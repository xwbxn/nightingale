var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&o(e,n,t[n]);return e},l=(e,r)=>t(e,n(r)),c=(e,t)=>{var n={};for(var o in e)i.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&r)for(var o of r(e))t.indexOf(o)<0&&a.call(e,o)&&(n[o]=e[o]);return n},u=(e,t,n)=>(o(e,"symbol"!=typeof t?t+"":t,n),n);import{W as h,J as p,R as d,H as f,aD as m,aT as g,aU as v,aV as y,aW as x,aX as E,aY as b,aZ as C,a_ as T,a$ as w,b0 as S,b1 as k,b2 as _,b3 as A,an as O,b4 as I,ah as M,ag as N,am as F,ak as L,b5 as P,Z as R,a7 as D,b6 as B,b7 as z,aS as H,aH as j,a6 as G,a8 as $,b8 as Y,b9 as U,ba as V,bb as W,bc as X,bd as q,N as K,be as Q,a2 as Z,bf as J,bg as ee,bh as te,bi as ne,bj as re,bk as ie,bl as ae,bm as oe,bn as se,bo as le,bp as ce,bq as ue,br as he,bs as pe,bt as de,bu as fe,bv as me,bw as ge,bx as ve,as as ye,by as xe,bz as Ee,bA as be,ao as Ce,aR as Te,bB as we,bC as Se,bD as ke,bE as _e,bF as Ae,aO as Oe,c as Ie,i as Me,d as Ne,a5 as Fe,bG as Le,bH as Pe,bI as Re,bJ as De,aM as Be,bK as ze,az as He,bL as je,a9 as Ge,bM as $e,bN as Ye,bO as Ue,a4 as Ve,bP as We,bQ as Xe,bR as qe,bS as Ke,bT as Qe,bU as Ze,bV as Je,bW as et,bX as tt,bY as nt,bZ as rt,b_ as it,L as at,P as ot,b$ as st,c0 as lt}from"./vendor.8cbf7ec7.js";import{_ as ct,a as ut,b as ht,c as pt,d as dt,e as ft,f as mt,g as gt,M as vt,B as yt,R as xt,F as Et,I as bt,T as Ct,D as Tt,C as wt,h as St,i as kt,j as _t,k as At,l as Ot,S as It,m as Mt,n as Nt,o as Ft,p as Lt,q as Pt,r as Rt,s as Dt,t as Bt,A as zt,u as Ht,P as jt,v as Gt,w as $t,L as Yt,x as Ut,y as Vt,z as Wt,E as Xt,G as qt,H as Kt,J as Qt,K as Zt,N as Jt}from"./antdChunk.15d6153c.js";import{D as en,r as tn,E as nn,H as rn,t as an,P as on,a as sn,h as ln,b as cn,i as un,c as hn,d as pn,e as dn,f as fn,k as mn,g as gn,j as vn,l as yn,m as xn,n as En,o as bn,p as Cn,q as Tn,s as wn,u as Sn,_ as kn,v as _n,w as An,x as On,y as In}from"./vendor1.eb6e58ec.js";import{_ as Mn}from"./vendor2.0657b300.js";var Nn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return N_},get Circle(){return F_},get Ellipse(){return P_},get Image(){return D_},get Line(){return z_},get Marker(){return j_},get Path(){return K_},get Polygon(){return Z_},get Polyline(){return J_},get Rect(){return eA},get Text(){return tA}}),Fn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return vA},get Circle(){return yA},get Dom(){return xA},get Ellipse(){return EA},get Image(){return bA},get Line(){return CA},get Marker(){return SA},get Path(){return kA},get Polygon(){return _A},get Polyline(){return AA},get Rect(){return OA},get Text(){return FA}});function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}var Pn={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Rn=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ht(this,e),this.init(t,n)}return ct(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Pn,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,Ln({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),Dn=function(){function e(){ht(this,e),this.observers={}}return ct(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var i=[].concat(this.observers[e]);i.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Bn(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function zn(e){return null==e?"":""+e}function Hn(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function jn(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var a="string"!=typeof t?[].concat(t):t.split(".");a.length>1;){if(i())return{};var o=r(a.shift());!e[o]&&n&&(e[o]=new n),e=Object.prototype.hasOwnProperty.call(e,o)?e[o]:{}}return i()?{}:{obj:e,k:r(a.shift())}}function Gn(e,t,n){var r=jn(e,t,Object);r.obj[r.k]=n}function $n(e,t){var n=jn(e,t),r=n.obj,i=n.k;if(r)return r[i]}function Yn(e,t,n){var r=$n(e,n);return void 0!==r?r:$n(t,n)}function Un(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):Un(e[r],t[r],n):e[r]=t[r]);return e}function Vn(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Wn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Xn(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return Wn[e]})):e}var qn="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function Kn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,a=0;a<r.length;++a){if("string"==typeof i[r[a]]&&a+1<r.length)return;if(void 0===i[r[a]]){for(var o=2,s=r.slice(a,a+o).join(n),l=i[s];void 0===l&&r.length>a+o;)o++,l=i[s=r.slice(a,a+o).join(n)];if(void 0===l)return;if("string"==typeof l)return l;if(s&&"string"==typeof l[s])return l[s];var c=r.slice(a+o).join(n);return c?Kn(l,c,n):void 0}i=i[r[a]]}return i}}var Qn=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return ht(this,t),n=pt(this,dt(t).call(this)),qn&&Dn.call(ft(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return ut(t,Dn),ct(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,o=[e,t];n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split("."));var s=$n(this.data,o);return s||!a||"string"!=typeof n?s:Kn(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(r=t,t=(o=e.split("."))[1]),this.addNamespaces(t),Gn(this.data,o,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(o=e.split("."))[1]),this.addNamespaces(t);var s=$n(this.data,o)||{};r?Un(s,n,i):s=Ln({},s,n),Gn(this.data,o,s),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Ln({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(),Zn={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var a=this;return e.forEach((function(e){a.processors[e]&&(t=a.processors[e].process(t,n,r,i))})),t}},Jn={},er=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ht(this,t),n=pt(this,dt(t).call(this)),qn&&Dn.call(ft(n)),Hn(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,ft(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=Rn.create("translator"),n}return ut(t,Dn),ct(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:i};var o=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),e=o.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,r){var i=this;if("object"!==p(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,o=this.extractFromKey(e[e.length-1],n),s=o.key,l=o.namespaces,c=l[l.length-1],u=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(h){var d=n.nsSeparator||this.options.nsSeparator;return c+d+s}return s}var f=this.resolve(e,n),m=f&&f.res,g=f&&f.usedKey||s,v=f&&f.exactUsedKey||s,y=Object.prototype.toString.apply(m),x=["[object Number]","[object Function]","[object RegExp]"],E=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,C="string"!=typeof m&&"boolean"!=typeof m&&"number"!=typeof m;if(b&&m&&C&&x.indexOf(y)<0&&("string"!=typeof E||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,m,Ln({},n,{ns:l})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(a){var T="[object Array]"===y,w=T?[]:{},S=T?v:g;for(var k in m)if(Object.prototype.hasOwnProperty.call(m,k)){var _="".concat(S).concat(a).concat(k);w[k]=this.translate(_,Ln({},n,{joinArrays:!1,ns:l})),w[k]===_&&(w[k]=m[k])}m=w}}else if(b&&"string"==typeof E&&"[object Array]"===y)(m=m.join(E))&&(m=this.extendTranslation(m,e,n,r));else{var A=!1,O=!1,I=void 0!==n.count&&"string"!=typeof n.count,M=t.hasDefaultValue(n),N=I?this.pluralResolver.getSuffix(u,n.count):"",F=n["defaultValue".concat(N)]||n.defaultValue;!this.isValidLookup(m)&&M&&(A=!0,m=F),this.isValidLookup(m)||(O=!0,m=s);var L=M&&F!==m&&this.options.updateMissing;if(O||A||L){if(this.logger.log(L?"updateKey":"missingKey",u,c,s,L?F:m),a){var P=this.resolve(s,Ln({},n,{keySeparator:!1}));P&&P.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var R=[],D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&D&&D[0])for(var B=0;B<D.length;B++)R.push(D[B]);else"all"===this.options.saveMissingTo?R=this.languageUtils.toResolveHierarchy(n.lng||this.language):R.push(n.lng||this.language);var z=function(e,t,r){i.options.missingKeyHandler?i.options.missingKeyHandler(e,c,t,L?r:m,L,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,c,t,L?r:m,L,n),i.emit("missingKey",e,c,t,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?R.forEach((function(e){i.pluralResolver.getSuffixes(e).forEach((function(t){z([e],s+t,n["defaultValue".concat(t)]||F)}))})):z(R,s,F))}m=this.extendTranslation(m,e,n,f,r),O&&m===s&&this.options.appendNamespaceToMissingKey&&(m="".concat(c,":").concat(s)),O&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(m))}return m}},{key:"extendTranslation",value:function(e,t,n,r,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Ln({},n,{interpolation:Ln({},this.options.interpolation,n.interpolation)}));var o,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var l=e.match(this.interpolator.nestingRegexp);o=l&&l.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=Ln({},this.options.interpolation.defaultVariables,c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),s){var u=e.match(this.interpolator.nestingRegexp);o<(u&&u.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i&&i[0]===r[0]&&!n.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):a.translate.apply(a,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var h=n.postProcess||this.options.postProcess,p="string"==typeof h?[h]:h;return null!=e&&p&&p.length&&!1!==n.applyPostProcessor&&(e=Zn.handle(p,e,t,this.options&&this.options.postProcessPassResolved?Ln({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,a,o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!o.isValidLookup(t)){var l=o.extractFromKey(e,s),c=l.key;n=c;var u=l.namespaces;o.options.fallbackNS&&(u=u.concat(o.options.fallbackNS));var h=void 0!==s.count&&"string"!=typeof s.count,p=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,d=s.lngs?s.lngs:o.languageUtils.toResolveHierarchy(s.lng||o.language,s.fallbackLng);u.forEach((function(e){o.isValidLookup(t)||(a=e,!Jn["".concat(d[0],"-").concat(e)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(a)&&(Jn["".concat(d[0],"-").concat(e)]=!0,o.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(n){if(!o.isValidLookup(t)){i=n;var a,l,u=c,d=[u];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(d,c,n,e,s);else h&&(a=o.pluralResolver.getSuffix(n,s.count)),h&&p&&d.push(u+a),p&&d.push(u+="".concat(o.options.contextSeparator).concat(s.context)),h&&d.push(u+=a);for(;l=d.pop();)o.isValidLookup(t)||(r=l,t=o.getResource(n,e,l,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:a}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}();function tr(e){return e.charAt(0).toUpperCase()+e.slice(1)}var nr=function(){function e(t){ht(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Rn.create("languageUtils")}return ct(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=tr(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=tr(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=tr(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],a=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):"string"==typeof e&&a(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&a(n.formatLanguageCode(e))})),i}}]),e}(),rr=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ir={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function ar(){var e={};return rr.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:ir[t.fc]}}))})),e}var or=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ht(this,e),this.languageUtils=t,this.options=n,this.logger=Rn.create("pluralResolver"),this.rules=ar()}return ct(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var i=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),a=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===a?a="plural":1===a&&(a=""));var o=function(){return n.options.prepend&&a.toString()?n.options.prepend+a.toString():a.toString()};return"v1"===this.options.compatibilityJSON?1===a?"":"number"==typeof a?"_plural_".concat(a.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),sr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ht(this,e),this.logger=Rn.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return ct(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:Xn,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Vn(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Vn(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Vn(t.nestingPrefix):t.nestingPrefixEscaped||Vn("$t("),this.nestingSuffix=t.nestingSuffix?Vn(t.nestingSuffix):t.nestingSuffixEscaped||Vn(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,a,o,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(s.formatSeparator)<0){var i=Yn(t,l,e);return s.alwaysFormat?s.format(i,void 0,n,Ln({},r,t,{interpolationkey:e})):i}var a=e.split(s.formatSeparator),o=a.shift().trim(),c=a.join(s.formatSeparator).trim();return s.format(Yn(t,l,o),c,n,Ln({},r,t,{interpolationkey:o}))};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?c(s.escape(e)):c(e)}}].forEach((function(t){for(o=0;i=t.regex.exec(e);){if(void 0===(a=u(i[1].trim())))if("function"==typeof h){var n=h(e,i,r);a="string"==typeof n?n:""}else{if(p){a=i[0];continue}s.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),a=""}else"string"==typeof a||s.useRawValueToEscape||(a=zn(a));var l=t.safeValue(a);if(e=e.replace(i[0],l),p?(t.regex.lastIndex+=l.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++o>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Ln({},a);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,o)).replace(/'/g,'"');try{o=JSON.parse(i),t&&(o=Ln({},t,o))}catch(eh){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),eh),"".concat(e).concat(n).concat(i)}return delete o.defaultValue,e}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=u.shift(),l=u,c=!0}if((r=t(s.call(this,n[1].trim(),o),o))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=zn(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),c&&(r=l.reduce((function(e,t){return i.format(e,t,a.lng,Ln({},a,{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var lr=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ht(this,t),i=pt(this,dt(t).call(this)),qn&&Dn.call(ft(i)),i.backend=e,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=a,i.logger=Rn.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,a.backend,a),i}return ut(t,Dn),ct(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,a=[],o=[],s=[],l=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?o.indexOf(s)<0&&o.push(s):(i.state[s]=1,r=!1,o.indexOf(s)<0&&o.push(s),a.indexOf(s)<0&&a.push(s),l.indexOf(t)<0&&l.push(t)))})),r||s.push(e)})),(a.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:r}),{toLoad:a,pending:o,toLoadLanguages:s,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],a=r[1];t&&this.emit("failedLoading",i,a,t),n&&this.store.addResourceBundle(i,a,n),this.state[e]=t?-1:2;var o={};this.queue.forEach((function(n){var r,s,l,c,u,h;r=n.loaded,s=a,c=jn(r,[i],Object),u=c.obj,h=c.k,u[h]=u[h]||[],l&&(u[h]=u[h].concat(s)),l||u[h].push(s),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){o[e]||(o[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){o[e].indexOf(t)<0&&o[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,l){s&&l&&i<5?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*a,o)}),a):o(s,l)})):o(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var a=this.queueLoad(e,t,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(function(r,o){r&&t.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(i," failed"),r),!r&&o&&t.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(i),o),t.loaded(e,r,o)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,Ln({},a,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}();function cr(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===p(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===p(e[2])||"object"===p(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function ur(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function hr(){}var pr=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(ht(this,t),e=pt(this,dt(t).call(this)),qn&&Dn.call(ft(e)),e.options=ur(n),e.services={},e.logger=Rn,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),pt(e,ft(e));setTimeout((function(){e.init(n,r)}),0)}return e}return ut(t,Dn),ct(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=Ln({},cr(),this.options,ur(t)),this.format=this.options.interpolation.format,n||(n=hr),!this.options.isClone){this.modules.logger?Rn.init(r(this.modules.logger),this.options):Rn.init(null,this.options);var i=new nr(this.options);this.store=new Qn(this.options.resources,this.options);var a=this.services;a.logger=Rn,a.resourceStore=this.store,a.languageUtils=i,a.pluralResolver=new or(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new sr(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new lr(r(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(a.languageDetector=r(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=r(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new er(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var o=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);o.length>0&&"dev"!==o[0]&&(this.options.lng=o[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var c=Bn(),u=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hr,r=n,i="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var a=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){a.indexOf(e)<0&&a.push(e)}))};if(i)o(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return o(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(a,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=Bn();return e||(e=this.languages),t||(t=this.options.ns),n||(n=hr),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Zn.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=Bn();this.emit("languageChanging",e);var i=function(i){e||i||!n.services.languageDetector||(i=[]);var a="string"==typeof i?i:n.services.languageUtils.getBestMatchFromCodes(i);a&&(n.language||(n.language=a,n.languages=n.services.languageUtils.toResolveHierarchy(a)),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(e){!function(e,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,a)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var i;if("object"!==p(r)){for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];i=n.options.overloadTranslationOptionHandler([t,r].concat(o))}else i=Ln({},r);return i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns,n.t(t,i)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],i=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,o);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!o(r,e)||i&&!o(a,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=Bn();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Bn();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hr,i=Ln({},this.options,n,{isClone:!0}),a=new t(i),o=["store","services","language"];return o.forEach((function(t){a[t]=e[t]})),a.services=Ln({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new er(a.services,a.options),a.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e].concat(n))})),a.init(i,r),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),t}());function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vr,yr={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},xr=d.createContext();function Er(){return yr}var br=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.usedNamespaces={}}var t,n,r;return t=e,(n=[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}])&&fr(t.prototype,n),r&&fr(t,r),e}();function Cr(){return vr}var Tr={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};yr=gr(gr({},yr),e)}(e.options.react),function(e){vr=e}(e)}};function wr(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var Sr={};function kr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&Sr[t[0]]||("string"==typeof t[0]&&(Sr[t[0]]=new Date),wr.apply(void 0,t))}function _r(e,t,n){e.loadNamespaces(t,(function(){if(e.isInitialized)n();else{e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),n()}))}}))}function Ar(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.languages||!t.languages.length)return kr("i18n.languages were undefined or empty",t.languages),!0;var r=t.languages[0],i=!!t.options&&t.options.fallbackLng,a=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!o(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||(!t.services.backendConnector.backend||!(!o(r,e)||i&&!o(a,e))))}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Or(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.i18n,r=f.exports.useContext(xr)||{},i=r.i18n,a=r.defaultNS,o=n||i||Cr();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new br),!o){kr("You will need to pass in an i18next instance by using initReactI18next");var s=function(e){return Array.isArray(e)?e[e.length-1]:e},l=[s,{},!1];return l.t=s,l.i18n={},l.ready=!1,l}o.options.react&&void 0!==o.options.react.wait&&kr("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var c=Nr(Nr(Nr({},Er()),o.options.react),t),u=c.useSuspense,h=e||a||o.options&&o.options.defaultNS;h="string"==typeof h?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(h);var p=(o.isInitialized||o.initializedStoreOnce)&&h.every((function(e){return Ar(e,o,c)}));function d(){return o.getFixedT(null,"fallback"===c.nsMode?h:h[0])}var m=f.exports.useState(d),g=Ir(m,2),v=g[0],y=g[1],x=f.exports.useRef(!0);f.exports.useEffect((function(){var e=c.bindI18n,t=c.bindI18nStore;function n(){x.current&&y(d)}return x.current=!0,p||u||_r(o,h,(function(){x.current&&y(d)})),e&&o&&o.on(e,n),t&&o&&o.store.on(t,n),function(){x.current=!1,e&&o&&e.split(" ").forEach((function(e){return o.off(e,n)})),t&&o&&t.split(" ").forEach((function(e){return o.store.off(e,n)}))}}),[o,h.join()]);var E=f.exports.useRef(!0);f.exports.useEffect((function(){x.current&&!E.current&&y(d),E.current=!1}),[o]);var b=[v,o,p];if(b.t=v,b.i18n=o,b.ready=p,p)return b;if(!p&&!u)return b;throw new Promise((function(e){_r(o,h,(function(){e()}))}))}const Lr={en:{translation:{classpath:{single:"Classpath"},strategy:{create:"New",single:"Alert Rule",multiple:"Alert Rules"},personalInfo:"Profile",n9e:"DiDi Nightingale","输入有误":"Incorrect input","修改密码成功":"Changed the password successfully","旧密码":"Old password","请输入旧密码":"Enter the old password","新密码":"New password","请输入新密码":"Enter a new password","再次输入新密码":"Enter a new password again","确认修改":"Update","自定义头像需以http开头":"The custom portrait needs to start at http","自定义头像":"Custom portrait","信息保存成功":"Saved successfully","用户名":"Username","显示名":"Display name","请输入显示名":"Enter a display name","邮箱":"Email","请输入邮箱":"Enter email","手机":"Mobile","请输入手机号":"Enter mobile number","请输入":"Enter ","更多联系方式":"More contacts","联系方式不能为空":"Contact information can not be blank","请选择联系方式":"Select contact","值不能为空":"Value can not be blank","请输入值":"Enter value","更换头像":"Change portrait","头像URL":"Portrait URL","个人中心":"Personal Center","个人信息":"Setting","修改密码":"Change password","秘钥管理":"Token management","Token更新成功":"Token updated successfully","Token创建成功":"Token created successfully","操作":"Action","重新生成":"Regenerate","生成":"Generate","该分享链接无图表数据":"The shared link has no graph data.","任意标签/资源分组":"Any Label / Classpath","必须要有一个变量名":"Var name required","变量名重复":"Duplicate variable name","变量名包含非法字符":"The variable name contains illegal characters","资源分组路径含有非法字符":"The Classpath contains illegal characters","变量名":"Variable name","标签或资源分组":"Label or Classpath","默认值":"Default value","添加大盘变量":"Add dashboard variables","添加变量":"Add variable","完成":"Finish","新建图表":"New chart","标题":"Title","图表名称":"Name required","配置方式":"Mode","指标":"Metrics","请选择指标":"Select metrics","请输入监控指标(输入4个以上字符发起检索)":"Enter a metric(search after 4 char)","资源分组":"Classpaths","请选择资源分组":"Select classpath","前缀匹配":"Prefix","请输入Promql":"Enter PromQL","阈值":"Threshold","下钻链接":"Drill URL","列":" Column","新增图表":"New Chart","一键规整":"Arrange","修改":"Edit","上移":"Move up","下移":"Move down","是否删除分类":"Delete group","删除":"Delete","编辑图表":"Edit Chart","是否删除图表":"Delete the chart","删除图表":"Delete","删除分组成功":"Group deleted successfully","新增图表分组":"New Chart Group","新建分组":"New Chart Group","更新分组名称":"Edit group name","分组名称":"Name","请输入名称":"Please enter the name","克隆大盘成功":"Cloned successfully","新建大盘成功":"Created successfully","大盘名称":"Name","分类标签":"Tags","更新时间":"Update Time","发布人":"Publisher","克隆":"Clone","是否删除大盘":"Sure to delete the dashboard?","删除大盘成功":"Deleted successfully","导入":"Import","未选择任何大盘":"No dashboard chosen","导出":"Export","监控大盘":"Dashboards","新建大盘":"New Dashboard","导入内置大盘":"Import built-in dashboard","更多操作":"More","克隆监控大盘":"Clone dashboard","创建新监控大盘":"New Dashboard","请输入大盘名称":"Enter dashboard name","大盘":"Dashboard","时间":"Time","值":"Value","告警详情":"Event Detail","策略名称:":"Rule name","通知结果":"Notice","已触发":"Triggered","已屏蔽":"Muted","表达式":"Expression","级别":"Level","策略名称":"Rule name","标签":"Tags","通知":"Notification","状态":"Status","发生时间":"When","屏蔽":"Mute","是否忽略告警?":"Sure to ignore the event?","忽略":"Ignore","未恢复告警事件":"Triggered Events","策略名称、标签、资源分组":"Rule name, tag, classpath","告警级别":"Level","告警状态":"Status","是否批量忽略告警?":"Sure to ignore the events?","已忽略告警":"Ignored successfully","批量忽略":"Batch Ignore","滴滴夜莺":"N9E","请输入用户名":"Enter a username","请输入密码":"Enter a password","登录":"Sign in","已选择":"Selected ","项":"","用户名、邮箱或电话":"User name, email or phone number","用户创建成功":"User created successfully","用户信息修改成功":"User Modified","团队创建成功":"Team created successfully","团队信息修改成功":"Team updated successfully","密码重置成功":"Password reset successfully","添加成功":"Added successfully","取消":"Cancel","确认":"Confirm","确认并搜索":"Confirm and search","用户删除成功":"User deleted successfully","团队删除成功":"Team deleted successfully","创建团队":"New Team","成员删除成功":"Deleted member successfully","确定":"OK","确定要删除么？":"Sure to delete it?","密码":"Password","请输入密码!":"Please enter the password!","确认密码":"Confirm password","请确认密码!":"Please confirm the password!","团队名称":"Team Name","团队名称不能为空！":"Team name can not be blank!","备注":"Remark","管理员":"Administrator","普通用户":"Ordinary users","游客":"Visitors","用户名不能为空！":"User name can not be blank!","角色":"Role","角色不能为空！":"Role is required","启用":"Enable","编辑":"Edit","重置密码":"Reset Password","是否删除该用户":"Sure to delete the user?","是否删除该成员":"Sure to delete the member?","禁用成功":"Disabled successfully","启用成功":"Enabled successfully","用户管理":"Users","用户名、邮箱或手机":"User name, email or mobile phone","创建":"Create","创建并关闭":"Create and close","创建用户":"Create User","团队管理":"Team Management","搜索团队名称":"Team name","是否删除该团队":"Sure to delete the team?","成员名、邮箱或手机":"Name, email or mobile","添加成员":"Add Member","选择监控指标添加图表":"Select the metric to add the chart","即时看图":"Explorer","监控指标":"Metric","筛选标签":"Tags","配置":"Configuration","每张图最多展示":"Maximum","条线":"lines per chart","重置":"Reset","分享图表":"Share","资源标识":"Resource ID","资源名称":"Name","资源信息或标签":"Resource information or labels","请选择标签":"Select a tag","删除指标成功":"Deleted successfully","创建指标成功":"Created successfully","请勾选需要导出的指标":"Please check the metrics you need to export","编辑成功":"Edit successfully","指标名称":"Metric","释义":"Description","确定删除该指标?":"Sure to delete this metric?","保存":"Save","指标释义":"Summary","指标名称或释义":"Search","不能为空":"Cannot be blank","已发送":"Sent","近":"Near","day-events":"Day Events","天未恢复的":"Days Events","进入事件管理":"Go to events page","一分钟自动刷新":"One minute refresh","指标TOP":"Metric TOP","个":"","资源总量":"Resources","策略总量":"Rules","大盘总量":"Dashboards","用户总量":"Users","团队总量":"Teams","统计数据":"Statistics","导入规则":"Import Rules","导出规则":"Export rules","请输入导入信息":"Please input import json","是否确定删除资源分组?":"Sure to delete classpath?","分组名称前缀匹配(聚合展示所有相关分组的内容)":"Prefix matching (aggregation displays all relevant grouping content)","count(对符合规则的日志进行计数)":"count(count the matching lines)","histogram(对符合规则的日志抓取出的数字计算统计值)":"histogram","秒":"s","不符合输入规范（格式为key=value）":"format should be 'key=value'","资源":"Resources","看图":"Explorer","端口":"Port","进程":"Process","插件":"Plugin","日志":"Log","端口号":"Port","进程标识":"Process identification","日志路径":"Log path","采集名称":"Collect rule","采集频率":"Step","修改人":"Modifier","修改时间":"Last update","是否删除该采集策略?":"Sure to delete this collection rule?","是否删除该告警规则?":"Sure to delete this alert rule?","删除成功":"Deleted successfully","挂载资源":"Bind Resources","请输入资源标识":"Input resource identifications, one resource per line","请输入资源标识，每行一个":"Input resource identifications, one resource per line","新建资源分组":"New","编辑资源分组":"Edit classpath","刷新":"Refresh","资源分组路径":"Classpath","资源分组路径必填":"Classpath cannot be blank","请填写资源分组路径":"Input classpath","资源分组备注":"Remark","创建进程采集":"New collection","进程采集详情":"Collection rule(Process)","更新":"Update","采集规则成功":" collection rule successfully","进程监控指标":"Metric","所属资源分组":"Classpath","资源分组必填":"Classpath is required","采集名称必填":"Rule name required","请输入采集配置的名称":"Please enter rule name","采集方式":"Method","采集方式必填":"Collection mode is required","命令行":"cmdline","进程名":"name","该项必填":"Required","取 /proc/$pid/cmdline 中的部分子串，可以唯一标识进程即可":"Take some substrings from /proc/$pid/cmdline to uniquely identify the process","取  /proc/$pid/status 中 name 的值":"Take the value of name in /proc/$pid/status","采集频率必填":"Step required","附加标签":"Append tags","格式为key=value回车分隔":"The format is key=value, use Enter to separate","创建端口采集":"New collection","端口采集详情":"Collection rule(Port)","端口监控指标":"Metric","端口协议":"Port Protocol","端口协议必填":"Port protocol required","端口号必填":"Port required","请输入端口号":"Enter port","连接超时":"Connection timeout","连接超时必填":"Connection timeout required","创建插件采集":"New Collection","插件采集详情":"Collection rule(Plugin)","插件采集成功":" collection successfully ","插件路径":"Plugin filepath","插件路径必填":"Plugin filepath required","参数":"Parameters","请输入参数":"Enter parameters","环境变量":"Env variables","变量":"Variable","标准输入(Stdin)":"Standard input (Stdin)","创建日志采集":"New collection","日志采集详情":"Collection rule(Log)","指标名称必填":"Metric required","计算方法":"Calculation method","计算方法必填":"Calculation method required","日志路径必填":"Log path required","匹配正则":"Main regexp","匹配正则必填":"Main regexp required","请输入正则表达式匹配日志关键字，histogram会提取第一个括号内的值":"Enter regexp to match logs, histogram will use first substring value","耗时计算：中的数值会用于计算曲线值流量计数：每匹配到该正则，曲线值+1":"Time-consuming calculation: the values in the calculation are used to calculate the number of curved-value flowmeters: for each match to the regular, the curves are + 1","tagName 填写说明\\r\\n\n              1. 不允许包含host、trigger、include\n              2. 不允许包含如下4个特殊字符\n              tagValue 填写说明\n              1.必须包含括号。括号中的正则内容被用作tagValue的取值，必须可枚举。\n              2.不允许包含如下4个特殊字符=,:@":"TagName  Fill in the instructions \n              1.  No host, no, no, no, no. \n              2.  Not allowed to include the following 4 special characters \n              tagValue  Fill in instructions \n              1. Must contain parentheses. The regular content in parentheses is used as a value for tagValue, and must be enumerated. \n              2. The following 4 special characters are not allowed =,: @","验证":"Verify","请输入一行待监控的完整日志":"Enter a full line of logs to be monitored","通过":"Success","失败":"Failure","屏蔽时间":"Mute time","选择时间":"Choose times","克隆到其他资源分组":"Cloning to other classpath","选择资源分组":"Select classpaths","克隆成功":"Cloned successfully","分组不可为空":"Group can not be blank","是否确认永久删除资源":"Sure to delete the resource ?","无":"None","资源详情":"Basic Information","请选择所属资源分组":"Select the classpaths","彻底删除资源":"Delete","两种情况会有彻底删除资源的需求":"There are two cases to delete resources","资源对应的设备已经下线了，永远都不会有新的监控数据上报了":"The resource has been offline","资源的ident(唯一标识)发生变化，老的ident需要手工清理掉":"The ident of the resource changes","未选择任何规则":"No rules chosen","是否批量删除规则?":"Sure to delete the rules?","组件采集信息":"Component Collection","端口信息":"Port","复制已选项":"Copied successfully","复制":"Copied ","条数据到剪贴板":" records","请先选择资源标识":"Select the resource logo first","是否移除该资源?":"Remove this resource from the classpath?","移除":"Unbind","您未选用任何资源":"No resources chosen","资源管理":"Resources","周期内所有点":"all","在统计周期 $n 秒内（初次上报的指标，统计周期内只有一个值，如要限制点数，可选择happen函数）每个值都 $v":"All the values $v in $n seconds (To limit the number of points, use the happen function)","发生次数":"happen","统计周期 $n 秒内至少有 $m 次值 $v":"There are at least $m times in $n seconds with the value $v","最大值":"max","统计周期 $n 秒内的最大值 $v":"The maximum value $v in $n seconds","最小值":"min","统计周期 $n 秒内的最小值 $v":"The minimum value $v in $n seconds","均值":"avg","统计周期 $n 秒内的均值 $v":"The average value $v in $n seconds","求和":"sum","统计周期 $n 秒内的所有值求和 $v":"The sum value $v in $n seconds","突增突降值":"diff","最新值与其之前 $n 秒内的任意值之差 (区分正负) $v":"(the difference between the latest value and any previous value of $n seconds) divided by the corresponding historical value (positive and negative) $v %","突增突降率":"pdiff","(最新值与其之前 $n 秒的任意值之差)除以对应历史值 (区分正负) $v ％":"(Latest value before  $n  The difference between any value of the second (divided by the corresponding historical value)  (distinguishing between positive and negative)  $v  %","同比变化率":"c_avg_rate_abs","最近 $n 秒平均值相对 $m 天前同周期平均值变化率 $v ％":"The change rate of last $n seconds average relative to $m days average in the same period $v %","同比变化率(区分正负)":"c_avg_rate","同比变化值":"c_avg_abs","最近 $n 秒平均值相对 $m 天前同周期平均值变化值 $v":"The change value of last $n seconds average relative to $m days average in the same period $v","同比变化值(区分正负)":"c_avg","3-sigma离群点检测":"stddev","统计周期 $n 秒内波动值过大，超过了 $m 个标准差范围":"The statistical period fluctuates too much in $n seconds, exceeding $m standard deviation range","新建告警屏蔽":"New mute rule","告警屏蔽":"Mute Rules","请检查":"Please check ","中的空格":" space","新建告警屏蔽成功":"Mute rule created successfully","屏蔽指标":"Mute metric","请输入指标名称":"Input metric","请输入资源标识的正则表达式":"Input a regexp for the resource identification","屏蔽标签":"Mute tags","请输入屏蔽标签(请用回车分割)":"Input mute tags (use Enter to split)","屏蔽原因":"Mute Cause","请填写屏蔽原因":"Enter mute cause","屏蔽标识、资源标识、屏蔽标签、资源分组前缀不能同时为空":"The metric, ID, tags ,Prefix coult not be empty at the same time","暂无":"None","告警策略详情":"Alert Strategy Details","解除成功":"Removed successfully","开始:":"Start:","结束:":"End:","创建人":"Creator","确定解除该告警屏蔽?":"Sure to remove the mute rule?","解除":"Remove","屏蔽策略":"Mute Rules","指标名称、资源标识、标签、屏蔽原因":"Metric, resource id, tag, mute cause","是否确定删除该策略分组?":"Sure to delete the alert group?","名称":"Name","告警接收者":"Recipients","未选择任何采集策略":"No rules selected","是否批量删除告警规则?":"Sure to delete the alert rules?","请输入告警策略名称":"Search rule name","新建告警策略":"New alert rule","导入内置策略":"Import built-in rules","策略":" rules","请输入标签key":"Enter the tag key","请输入标签value":"Enter the tag value","预览":"Preview","请输入指标":"Enter metric","请输入百分比":"Enter percentages","新建策略分组":"New rule group","新建子节点":"New child node","编辑策略组":"Edit rule Group","策略组名称":"Name","策略组名称必填":"Group name required","请填写策略组名称":"Please enter group name","管理团队":"Manage teams","请选择团队":"Select teams","告警策略":"Alert Rules","请输入分钟数":"Enter minutes","秒（告警恢复后持续观察":"Seconds (continued observation after alarm recovery)","秒，未再触发阈值才发送恢复通知）":"Seconds, no more trigger threshold to send recovery notice)","保存成功":"Successfully saved","创建成功":"Created successfully","克隆失败":"Cloning failed","保存失败":"Unable to save","创建失败":"Failed to create","周一":"Monday","周二":"Tuesday","周三":"Wednesday","周四":"Thursday","周五":"Friday","周六":"Saturday","周日":"Sunday","基本配置":"Basic configuration","策略名称不能为空":"Rule name required","请输入策略名称":"Enter the rule name","一级报警":"Level 1","二级报警":"Level 2","三级报警":"Level 3","触发模式":"Trigger mode","统计周期":"Step","触发条件":"Condition","资源过滤":"Resource filter","标签过滤":"Tag filter","执行频率":"Exec interval","请输入Promeql":"Enter Promeql","请输入附加标签，格式为key=value":"Enter an additional tag in a key=value format","生效配置":"Enable configuration","立即启用":"Enable","是":"Yes","否":"No","生效时间":"Time","通知配置":"Notification configuration","静默恢复":"Silent recovery","不发送恢复通知":"Do not send a recovery notice","通知媒介":"Media","报警接收团队":"Notify teams","报警接收人":"Notify users","报警回调":"Callback","通知自己开发的系统（请确认是夜莺服务端可访问的地址）":"Notify your system (make sure n9e-server could access the address)","其他配置":"Other configuration","预案链接":"Runbook","监控看图":"Metrics","策略配置":"Monitors","未恢复告警":"Unrecovered","用户":"Users","团队":"Teams","团队列表":"Team list","新建团队":"New","退出":"Logout","收藏的":"Favorite ","分组":"","所有":"All ","一行一个":"One per line","策略分组":"Rule Groups","新建":"New ","请输入日志路径，支持*通配符":"Please enter logs filepath, support wildcards","1小时":"1 hour","2小时":"2 hours","6小时":"6 hours","12小时":"12 hours","1天":"1 day","2天":"2 days","7天":"1 week","14天":"2 weeks","30天":"30 days","90天":"90 days","永久":"forever","清除":"clear","预览图":"Preview Chart","批量删除":"Delete","修改告警接受者":"Update recipients","修改通知媒介":"Update medias","策略启用控制":"Update status","是否启停":"Enable","修改附加标签":"Update append tags","修改附加标签成功":"Update append tags successfully",append_tags:"Tags","请先选择策略":"Select some rules","不符合输入规范(格式为key=value)":" format should be 'key=value'","编辑用户信息":"Edit user","编辑团队信息":"Edit team","基本信息":"Basic info","预案手册":"Runbook","预警值":"Threshold","维护备注":"Update remark","维护标签":"Update tags","修改备注":"Update remark","修改标签":"Update tags","暂无数据":"None","告警历史":"All Events","全部告警":"All","全量告警历史":"History Alert Events","恢复":"Recovery","告警":"Alert","资源分组前缀":"Classpath Prefix","搜索资源分组前缀":"Search Classpath Prefix","key, value必填":"key,value required","key重复":"Duplicate key","自定义开始时间":"Cumson start time","自定义结束时间":"Cumson end time","最近":"Past ",minute:" minute",minutes:" minutes",hour:" hour",hours:" hours","周":" week","天":" day","月":" month","季度":" quarter","tpl.create":"Create","tpl.tag.bind":"Bind tags","tpl.tag.unbind":"Unbind tags","tpl.tag.bind.title":"Batch bind tags","tpl.tag.bind.success":"Successfully binded","tpl.tag.bind.field":"tags","tpl.tag.unbind.title":"Batch unbind tags","tpl.tag.unbind.field":"tags","tpl.tag.unbind.success":"Successfully unbinded","tpl.node.modify":"Modify node","tpl.node.modify.title":"Batch modify node","tpl.batch.modify.group":"Batch modify group","tpl.title":"Title","tpl.title.tpl.help":"Describe the role of the template","tpl.title.task.help":"Describe the role of the task","tpl.tags":"Tags","tpl.tags.help":"Used for classification","tpl.creator":"Creator","tpl.last_updator":"Last updator","tpl.last_updated":"Last updated","tpl.account.help":"Execute account, use root with caution","tpl.batch.help":"Concurrency, default is 0, indicating full concurrent execution, 1 means sequential execution, 2 means that each time two execute","tpl.tolerance.help":"Tolerate several machines failing, the default is 0, which means no tolerance, once failed, immediately suspend","tpl.timeout.help":"Timeout for stand-alone script execution, in seconds","tpl.pause.help":"Pause after completed, pause multiple hosts, write multiple hosts, separated by commas","tpl.host.help":"List of hosts to be executed","tpl.script.help":"Script content to be executed","tpl.args.help":"Parameters attached to the script, separated by double commas, such as arg1,,arg2,,arg3","tpl.modify":"Modify the template","tpl.create.task":"Create a new task","task.create":"Create task","task.title":"Title","task.done":"Done","task.clone":"Clone","task.meta":"Meta","task.creator":"Creator","task.created":"Created","task.only.mine":"Just mine","task.host":"Host","task.status":"Status","task.output":"Output","task.refresh":"Refresh","task.control.params":"Control params","task.account":"Account","task.batch":"Batch","task.tolerance":"Tolerance","task.timeout":"Timeout","task.script":"Script","task.script.args":"Script params","task.pause":"Pause","task.host.list":"Host list","task.clone.new":"Clone a new task","task.temporary.create":"Create temporary task","groups.instGroups":"Instant groups","groups.crontabGroups":"Crontab groups","perms.hosts":"Hosts","perms.host":"Host","perms.team":"Team","perms.account":"Account","last.7.days":"Last 7 days","last.15.days":"Last 15 days","last.30.days":"Last 30 days","last.60.days":"Last 60 days","last.90.days":"Last 90 days","table.nodata":"No data","table.create":"Create","table.operations":"Operations","table.batch.operations":"Batch Operations","table.detail":"Detail","table.modify":"Modify","table.delete":"Delete","table.delete.batch":"Batch delete","table.clone":"Clone","table.delete.sure":"Are you sure to delete it?","table.delete.there.sure":"Are you sure to delete these?","table.ident":"Ident","table.name":"Name","table.cate":"Cate","table.creator":"Creator","table.lastupdated":"Last updated","table.note":"Note","form.submit":"Submit","form.save":"Save","form.submit.and.save":"Save","form.login":"Login","form.goback":"Go back","msg.submit.success":"Successfully submited","msg.modify.success":"Successfully modified","msg.create.success":"Successfully created","msg.add.success":"Successfully created","msg.delete.success":"Successfully deleted","msg.clone.success":"Successfully cloned","msg.clone.error":"Cloning failed","msg.sort.success":"Successfully sorted"}},zh:{translation:{"新建资源分组":"新建资源分组","端口号":"端口号",classpath:{single:"资源分组"},append_tags:"修改附加标签",strategy:{create:"新建策略分组",single:"告警策略",multiple:"告警策略"},personalInfo:"个人信息","day-events":"天未恢复的",n9e:"滴滴夜莺","周期内所有点":"周期内所有点 - all","发生次数":"发生次数 - happen","最大值":"最大值 - max","最小值":"最小值 - min","均值":"均值 - avg","求和":"求和 - sum","突增突降值":"突增突降值 - diff","突增突降率":"突增突降率 - pdiff","同比变化率":"同比变化率 - c_avg_rate_abs","同比变化率(区分正负)":"同比变化率(区分正负) - c_avg_rate","同比变化值":"同比变化值 - c_avg_abs","同比变化值(区分正负)":"同比变化值(区分正负) - c_avg","3-sigma离群点检测":"3-sigma离群点检测 - stddev",minute:"分钟",minutes:"分钟",hour:"小时",hours:"小时","tpl.create":"创建","tpl.tag.bind":"绑定标签","tpl.tag.unbind":"解绑标签","tpl.tag.bind.title":"批量绑定标签","tpl.tag.bind.field":"待绑定的标签","tpl.tag.bind.success":"批量绑定标签成功","tpl.tag.unbind.title":"批量解绑标签","tpl.tag.unbind.field":"待解绑的标签","tpl.tag.unbind.success":"批量解绑标签成功","tpl.node.modify":"修改节点","tpl.node.modify.title":"批量修改节点","tpl.batch.modify.group":"批量修改所属分组","tpl.title":"标题","tpl.title.tpl.help":"标题，说明这个脚本的作用","tpl.title.task.help":"标题，说明这个任务的作用","tpl.tags":"标签","tpl.tags.help":"标签，用于分类","tpl.creator":"创建人","tpl.last_updator":"更新人","tpl.last_updated":"更新时间","tpl.account.help":"执行账号，慎用root，除非要代表操作系统意志","tpl.batch.help":"并发度，默认是0，表示全并发执行，1表示顺序执行，2表示每次执行2台","tpl.tolerance.help":"容忍几台机器失败，默认是0，表示一台都不容忍，只要失败了，立马暂停","tpl.timeout.help":"单机脚本执行的超时时间，单位是秒","tpl.pause.help":"暂停点，做完某台之后暂停一下，要暂停多台，写多个 host，逗号分隔","tpl.host.help":"要执行的机器列表","tpl.script.help":"要执行的脚本内容","tpl.args.help":"附于脚本之后的参数，多个参数之间用双逗号,,分隔，比如arg1,,arg2,,arg3","tpl.modify":"编辑脚本","tpl.create.task":"创建任务","task.create":"创建任务","task.title":"标题","task.done":"是否完成","task.clone":"克隆任务","task.meta":"元信息","task.creator":"创建人","task.created":"创建时间","task.only.mine":"只看自己","task.host":"Host","task.status":"状态","task.output":"输出","task.refresh":"刷新","task.control.params":"控制参数","task.account":"执行账号","task.batch":"并发度","task.tolerance":"容忍度","task.timeout":"超时时间","task.script":"脚本内容","task.script.args":"脚本参数","task.pause":"暂停点","task.host.list":"机器列表","task.clone.new":"克隆一个新任务","task.temporary.create":"创建临时任务","groups.instGroups":"即时任务","groups.crontabGroups":"定时任务","perms.hosts":"机器","perms.host":"机器","perms.team":"有权限的团队","perms.account":"脚本执行账号","last.7.days":"最近 7 天","last.15.days":"最近 15 天","last.30.days":"最近 30 天","last.60.days":"最近 60 天","last.90.days":"最近 90 天","table.nodata":"暂无数据","table.create":"创建","table.operations":"操作","table.batch.operations":"批量操作","table.detail":"详情","table.modify":"修改","table.delete":"删除","table.delete.batch":"批量删除","table.clone":"克隆","table.delete.sure":"确定要删除吗？","table.delete.there.sure":"确定要删除这些吗?","table.ident":"英文标识","table.name":"显示名","table.cate":"类别","table.creator":"创建者","table.lastupdated":"修改时间","table.note":"备注","form.submit":"提 交","form.save":"保 存","form.submit.and.save":"提交保存","form.login":"登 录","form.goback":"返 回","msg.submit.success":"提交成功","msg.modify.success":"修改成功","msg.create.success":"创建成功","msg.add.success":"添加成功","msg.delete.success":"删除成功","msg.clone.success":"克隆成功","msg.clone.error":"克隆失败","msg.sort.success":"排序成功"}}};pr.use(Tr).init({resources:Lr,lng:localStorage.getItem("language")||"zh",interpolation:{escapeValue:!1}});var Pr=d.createContext(null);var Rr=function(e){e()},Dr={notify:function(){}};function Br(){var e=Rr,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var zr=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=Dr,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=Br())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=Dr)},e}(),Hr="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?f.exports.useLayoutEffect:f.exports.useEffect;function jr(e){var t=e.store,n=e.context,r=e.children,i=f.exports.useMemo((function(){var e=new zr(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),a=f.exports.useMemo((function(){return t.getState()}),[t]);Hr((function(){var e=i.subscription;return e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,a]);var o=n||Pr;return d.createElement(o.Provider,{value:i},r)}function Gr(){return f.exports.useContext(Pr)}function $r(e){void 0===e&&(e=Pr);var t=e===Pr?Gr:function(){return f.exports.useContext(e)};return function(){return t().store}}var Yr=$r();function Ur(e){void 0===e&&(e=Pr);var t=e===Pr?Yr:$r(e);return function(){return t().dispatch}}var Vr=Ur(),Wr=function(e,t){return e===t};function Xr(e){void 0===e&&(e=Pr);var t=e===Pr?Gr:function(){return f.exports.useContext(e)};return function(e,n){void 0===n&&(n=Wr);var r=t(),i=function(e,t,n,r){var i,a=f.exports.useReducer((function(e){return e+1}),0)[1],o=f.exports.useMemo((function(){return new zr(n,r)}),[n,r]),s=f.exports.useRef(),l=f.exports.useRef(),c=f.exports.useRef(),u=f.exports.useRef(),h=n.getState();try{if(e!==l.current||h!==c.current||s.current){var p=e(h);i=void 0!==u.current&&t(p,u.current)?u.current:p}else i=u.current}catch(d){throw s.current&&(d.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),d}return Hr((function(){l.current=e,c.current=h,u.current=i,s.current=void 0})),Hr((function(){function e(){try{var e=n.getState(),r=l.current(e);if(t(r,u.current))return;u.current=r,c.current=e}catch(d){s.current=d}a()}return o.onStateChange=e,o.trySubscribe(),e(),function(){return o.tryUnsubscribe()}}),[n,o]),i}(e,n,r.store,r.subscription);return f.exports.useDebugValue(i),i}}var qr,Kr,Qr,Zr,Jr,ei,ti,ni=Xr();qr=m.exports.unstable_batchedUpdates,Rr=qr,(Qr=Kr||(Kr={})).Get="Get",Qr.Post="Post",Qr.Put="Put",Qr.Delete="Delete",(Jr=Zr||(Zr={}))[Jr.Add=0]="Add",Jr[Jr.Delete=1]="Delete",(ti=ei||(ei={}))[ti.Favorite=0]="Favorite",ti[ti.Common=1]="Common";const ri=function(e,t){return ii("/api/n9e/auth/login",{method:Kr.Post,data:{username:e,password:t}})},ii=g({errorHandler:e=>{throw"AbortError"===e.name||e.silence||mt.error({message:e.message}),e.silence?e:new Error(e.message)},credentials:"include"});function ai(e,t=200){return ii("/api/n9e/busi-groups",{method:Kr.Get,params:Object.assign({limit:t},e?{query:e}:{})})}ii.interceptors.request.use(((e,t)=>{let n=s({},t.headers);return n.Authorization=`Bearer ${localStorage.getItem("access_token")||""}`,n["X-Cluster"]||(n["X-Cluster"]=localStorage.getItem("curCluster")||""),n["X-Language"]="zh",{url:e,options:l(s({},t),{headers:n})}})),ii.interceptors.response.use((async(e,t)=>{const{status:n}=e;if(200===n)return e.clone().json().then((r=>{if(!e.url.includes("/api/v1/")){if(""===r.err||"success"===r.status||""===r.error)return(r.data||r.dat)&&r.dat&&"[object Null]"===Object.prototype.toString.call(r.dat.list)&&(r.dat.list=[]),l(s({},r),{success:!0});throw t.silence?{name:r.err,message:r.err,silence:!0,data:r,response:e}:new Error(r.err)}if(200===n&&!r.error)return l(s({},r),{success:!0});if(r.error)throw new Error(r.error.message,{cause:t.silence})}));if(500===n&&e.url.includes("/api/v1"))return e.clone().json().then((n=>{if(!n.error)return l(s({},n),{success:!0});if(n.error)throw{name:n.error.name,message:n.error.message,silence:t.silence,data:n,response:e}}));if(401===n)e.url.indexOf("/api/n9e/auth/refresh")>0?location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:""):localStorage.getItem("refresh_token")?ii("/api/n9e/auth/refresh",{method:Kr.Post,data:{refresh_token:localStorage.getItem("refresh_token")}}).then((e=>{if(console.log("401 err",e),e.err)location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:"");else{const{access_token:t,refresh_token:n}=e.dat;localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",n)}})):location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:"");else{if(404!==n){if(403===n&&e.url.includes("/api/v1"))return e.clone().json().then((e=>{if(e.error&&e.error.message)throw new Error(e.error.message)}));{const n=e.headers.get("content-type");return-1!==(null==n?void 0:n.indexOf("text/plain; charset=utf-8"))?e.clone().text().then((e=>{throw new Error(e)})):e.clone().json().then((n=>{if(void 0===t.silence&&(e.url.indexOf("/api/n9e/prometheus/api/v1")>-1||e.url.indexOf("/api/v1/datasource/prometheus")>-1))return n;throw e.url.includes("/api/v1")?{name:n.error?n.error.name:JSON.stringify(n),message:n.error?n.error.message:JSON.stringify(n),silence:t.silence,data:n,response:e}:new Error(n.err?n.err:n)}))}}location.href="/404"}}),{global:!1});const oi=function(e,t="download.txt"){const n=document.createElement("a"),r=new Blob([Array.isArray(e)?e.join("\r\n"):e],{type:"text/plain"});n.href=URL.createObjectURL(r),n.download=t,document.body.appendChild(n),n.click()},si=(e,t,n)=>{const r=document.createElement("textarea");r.style.border="0",r.style.padding="0",r.style.margin="0",r.style.position="absolute",r.style.left="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;let a;r.style.top=`${i}px`,r.setAttribute("readonly",""),r.value=e,document.body.appendChild(r),r.select();try{a=document.execCommand("copy"),n&&e.includes(n)?gt.success(`${t("复制")}${e.split("\n").length}${t("条数据到剪贴板")}`):gt.success(t("复制到剪贴板"))}catch(o){gt.error(t("复制失败")),a=!1}return a&&document.body.removeChild(r),a},li=()=>Object.values({}).map((e=>e.default)),ci=()=>`_${Math.random().toString(36).substr(2,9)}`;function ui(){const{search:e}=v();return d.useMemo((()=>new URLSearchParams(e)),[e])}function hi(){return f.exports.createElement("svg",{t:1638430671795,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":2334,xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em"},f.exports.createElement("defs",null,f.exports.createElement("style",{type:"text/css"})),f.exports.createElement("path",{d:"M724 839c15.464 0 28 12.536 28 28s-12.536 28-28 28H300c-15.464 0-28-12.536-28-28s12.536-28 28-28h424z m116-709c66.274 0 120 53.726 120 120v402c0 66.274-53.726 120-120 120H184c-66.274 0-120-53.726-120-120V250c0-66.274 53.726-120 120-120h656z m0 56H184c-34.993 0-63.426 28.084-63.991 62.942L120 250v402c0 34.993 28.084 63.426 62.942 63.991L184 716h656c34.993 0 63.426-28.084 63.991-62.942L904 652V250c0-34.993-28.084-63.426-62.942-63.991L840 186zM298 512c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32-17.673 0-32-14.327-32-32 0-17.673 14.327-32 32-32z m433 4c15.464 0 28 12.536 28 28s-12.536 28-28 28H387c-15.464 0-28-12.536-28-28s12.536-28 28-28h344zM298 327c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32-17.673 0-32-14.327-32-32 0-17.673 14.327-32 32-32z m433 4c15.464 0 28 12.536 28 28s-12.536 28-28 28H387c-15.464 0-28-12.536-28-28s12.536-28 28-28h344z","p-id":2335,fill:"currentColor"}))}const{SubMenu:pi}=vt;let di=li().reduce(((e,t)=>{const n=t.menu;return n?e=e.concat(n):e}),[]);const fi=(e,t)=>{const n=S.find(e,(e=>S.some(e.children,(e=>-1!==t.indexOf(e.key)))));if(n)return n.key},mi=(e,t)=>{let n;return S.forEach(e,(e=>{S.forEach(e.children,(e=>{-1!==t.indexOf(e.key)&&(n=e.key)}))})),n},gi=()=>{const{t:e,i18n:t}=Fr(),n=[{key:"targets",icon:d.createElement(y,null),title:e("监控对象"),children:[{key:"/targets",title:e("对象列表")}]},{key:"monitor",icon:d.createElement(x,null),title:e("监控看图"),children:[{key:"/metric/explorer",title:e("即时查询")},{key:"/object/explorer",title:e("快捷视图")},{key:"/dashboards",title:e("监控大盘")}]},{key:"alarm",icon:d.createElement(E,null),title:e("告警管理"),children:[{key:"/alert-rules",title:e("告警规则")},{key:"/alert-mutes",title:e("屏蔽规则")},{key:"/alert-subscribes",title:e("订阅规则")},{key:"/alert-cur-events",title:e("活跃告警")},{key:"/alert-his-events",title:e("历史告警")}]},{key:"job",icon:d.createElement(b,null),title:e("告警自愈"),children:[{key:"/job-tpls",title:e("自愈脚本")},{key:"/job-tasks",title:e("执行历史")}]},{key:"manage",icon:d.createElement(C,null),title:e("人员组织"),children:[{key:"/users",title:e("用户管理")},{key:"/user-groups",title:e("团队管理")},{key:"/busi-groups",title:e("业务组管理")}]},{key:"help",icon:d.createElement(T,{component:hi}),title:e("系统信息"),children:[{key:"/help/version",title:e("系统版本")},{key:"/help/contact",title:e("联系我们")},{key:"/help/migrate",title:e("管理员迁移")}]}],[r,i]=f.exports.useState(n),a=w(),o=v(),{pathname:s}=o;let{profile:l}=ni((e=>e.account));const[c,u]=f.exports.useState("1"===localStorage.getItem("menuCollapsed")),[h,p]=f.exports.useState([mi(r,s)]),[m,g]=f.exports.useState(c?[]:[fi(r,s)]);return f.exports.useEffect((()=>{p([mi(r,s)]),c||g(S.union([...m,fi(r,s)]))}),[s,c]),f.exports.useEffect((()=>{l.roles.length>0&&(-1===l.roles.indexOf("Admin")?ii("/api/n9e/self/perms",{method:Kr.Get}).then((e=>{const{dat:t}=e,r=[...n];r.forEach((e=>{e.children=e.children.filter((e=>t.includes(e.key)))})),i(r)})):i(n))}),[l.roles]),"/login"===o.pathname||o.pathname.startsWith("/chart/")||"/callback"===o.pathname?null:d.createElement("div",{style:{display:"flex",flexDirection:"column"}},d.createElement("div",{className:"home "+(c?"collapse":"")},d.createElement("div",{className:"name",onClick:()=>a.push("/metric/explorer"),key:"overview"},d.createElement("img",{src:c?"/image/logo.svg":"/image/logo-l.svg",alt:"",className:"logo"}))),d.createElement(vt,{className:"left-menu-container",theme:"dark",inlineCollapsed:c,openKeys:m,selectedKeys:h,onClick:({key:e})=>{if(p([e]),"changeLanguage"===e){let e="en"==t.language?"zh":"en";t.changeLanguage(e),localStorage.setItem("language",e)}e.startsWith("/")&&a.push(e)},mode:"inline",onOpenChange:e=>{g(e)}},S.map(r,(e=>e.children.length>0&&d.createElement(pi,{key:e.key,icon:e.icon,title:e.title},S.map(e.children,(e=>d.createElement(vt.Item,{key:e.key},e.title)))))),di.sort(((e,t)=>t.weight-e.weight)).map((e=>e.content))),d.createElement(yt,{type:"text",onClick:()=>{u(!c),localStorage.setItem("menuCollapsed",c?"0":"1")},className:"collapseBtn"},d.createElement(c?k:_)))},vi=()=>{const e=w();return d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},d.createElement(xt,{title:"404",subTitle:"你访问的页面不存在!",extra:d.createElement(yt,{type:"primary",onClick:()=>e.replace("/")},"回到首页")}))};function yi(){const{t:e}=Fr(),[t]=Et.useForm(),n=w(),r=v(),i=r.search&&new URLSearchParams(r.search).get("redirect"),a=Vr(),o=async()=>{try{await t.validateFields(),s()}catch(eh){console.log(e("输入有误"))}},s=async()=>{let{username:e,password:r}=t.getFieldsValue();await a({type:"account/login",username:e,password:r})||n.push(i||"/metric/explorer")};return d.createElement("div",{className:"login-warp"},d.createElement("div",{className:"banner"},d.createElement("div",{className:"banner-bg"},d.createElement("img",{src:"/image/logo-l.svg",className:"logo",width:"132"}))),d.createElement("div",{className:"login-panel"},d.createElement("div",{className:"login-main"},d.createElement("div",{className:"login-title"},"Nightingale"),d.createElement(Et,{form:t,layout:"vertical",requiredMark:!0},d.createElement(Et.Item,{required:!0,name:"username",rules:[{required:!0,message:e("请输入用户名")}]},d.createElement(bt,{placeholder:e("请输入用户名"),prefix:d.createElement(C,{className:"site-form-item-icon"})})),d.createElement(Et.Item,{required:!0,name:"password",rules:[{required:!0,message:e("请输入密码")}]},d.createElement(bt,{type:"password",placeholder:e("请输入密码"),onPressEnter:o,prefix:d.createElement(A,{className:"site-form-item-icon"})})),d.createElement(Et.Item,null,d.createElement(yt,{type:"primary",onClick:o},e("登录"))),d.createElement("div",{className:"login-other"},d.createElement("strong",null,"其他登录方式："),d.createElement("a",{onClick:()=>{ii("/api/n9e/auth/redirect",{method:Kr.Get}).then((e=>{e.dat?window.location.href=e.dat:gt.warning("没有配置 OIDC 登录地址！")}))}},"OIDC"))))))}var xi={},Ei=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),bi=new RegExp("%[a-f0-9]{2}","gi"),Ci=new RegExp("(%[a-f0-9]{2})+","gi");function Ti(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],Ti(n),Ti(r))}function wi(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(bi),n=1;n<t.length;n++)t=(e=Ti(t,n).join("")).match(bi);return e}}var Si=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"��","%FF%FE":"��"},r=Ci.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var i=wi(r[0]);i!==r[0]&&(n[r[0]]=i)}r=Ci.exec(e)}n["%C2"]="�";for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o];e=e.replace(new RegExp(s,"g"),n[s])}return e}(e)}},ki=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},_i=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),a=0;a<r.length;a++){var o=r[a],s=e[o];(i?-1!==t.indexOf(o):t(o,s,e))&&(n[o]=s)}return n};function Ai(){const e=v(),t=xi.parse(e.search),[n,r]=f.exports.useState();return f.exports.useEffect((()=>{var e;(e={code:t.code,state:t.state,redirect:t.redirect||"/"},ii("/api/n9e/auth/callback",{method:Kr.Get,params:e})).then((e=>{""===e.err?e.dat&&e.dat.access_token&&e.dat.refresh_token?(localStorage.setItem("access_token",e.dat.access_token),localStorage.setItem("refresh_token",e.dat.refresh_token),window.location.href=e.dat.redirect):console.log(e.dat):r(e.err)})).catch((e=>{r(e.message)}))}),[]),void 0===n?null:d.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center"}},d.createElement("div",null,d.createElement("h1",null,"第三方登录验证失败"),d.createElement("div",{style:{fontSize:14}},n),d.createElement("div",null,d.createElement("a",{href:"/login"},"返回登录页"))))}!function(e){const t=Ei,n=Si,r=ki,i=_i,a=Symbol("encodeFragmentIdentifier");function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,n){return n.encode?n.strict?t(e):encodeURIComponent(e):e}function l(e,t){return t.decode?n(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"==typeof n&&n.includes(e.arrayFormatSeparator),a="string"==typeof n&&!i&&l(n,e).includes(e.arrayFormatSeparator);n=a?l(n,e):n;const o=i||a?n.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===n?n:l(n,e);r[t]=o};case"bracket-separator":return(t,n,r)=>{const i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(r[t]=n?l(n,e):n);const a=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>l(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],a):r[t]=a};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const a of e.split("&")){if(""===a)continue;let[e,o]=r(t.decode?a.replace(/\+/g," "):a,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:l(o,t),n(l(e,t),o,i)}for(const r of Object.keys(i)){const e=i[r];if("object"==typeof e&&null!==e)for(const n of Object.keys(e))e[n]=p(e[n],t);else i[r]=p(e,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))}e.extract=h,e.parse=d,e.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[",i,"]"].join("")]:[...n,[s(t,e),"[",s(i,e),"]=",s(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[s(n,e),t,s(i,e)].join("")]:[[r,s(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,s(t,e)]:[...n,[s(t,e),"=",s(r,e)].join("")]}}(t),i={};for(const o of Object.keys(e))n(o)||(i[o]=e[o]);const a=Object.keys(i);return!1!==t.sort&&a.sort(t.sort),a.map((n=>{const i=e[n];return void 0===i?"":null===i?s(n,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?s(n,t)+"[]":i.reduce(r(n),[]).join("&"):s(n,t)+"="+s(i,t)})).filter((e=>e.length>0)).join("&")},e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,i]=r(e,"#");return Object.assign({url:n.split("?")[0]||"",query:d(h(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:l(i,t)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0,[a]:!0},n);const r=u(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),l=Object.assign(o,t.query);let c=e.stringify(l,n);c&&(c=`?${c}`);let h=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(t.url);return t.fragmentIdentifier&&(h=`#${n[a]?s(t.fragmentIdentifier,n):t.fragmentIdentifier}`),`${r}${c}${h}`},e.pick=(t,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[a]:!1},r);const{url:o,query:s,fragmentIdentifier:l}=e.parseUrl(t,r);return e.stringifyUrl({url:o,query:i(s,n),fragmentIdentifier:l},r)},e.exclude=(t,n,r)=>{const i=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return e.pick(t,i,r)}}(xi);function Oi(e){return"function"==typeof e.children?d.createElement("div",null,e.children(!1)):null}const Ii=["red","orange","blue"],Mi=function(e,t=1){return ii("/api/n9e/alert-rule-groups",{method:Kr.Get,params:{query:e,p:t,limit:15}})},Ni=function(e){return ii(`/api/n9e/alert-rule-group/${e}`,{method:Kr.Delete})},Fi=function(e){return ii(`/api/n9e/alert-rule-group/${e.id}`,{method:Kr.Put,data:e})},Li=function(e){return ii(`/api/n9e/busi-group/${e.id}/alert-rules`,{method:Kr.Get})},Pi=function(e){return ii(`/api/n9e/alert-rule-group/${e}/favorites`,{method:Kr.Post,data:{id:e}})},Ri=function(e){return ii(`/api/n9e/alert-rule-group/${e}/favorites`,{method:Kr.Delete,data:{id:e}})},Di=function(e,t,n){return ii(`/api/n9e/busi-group/${t}/alert-rules`,{method:n,data:e})},Bi=function(e,t){return ii(`/api/n9e/busi-group/${t}/alert-rules`,{method:Kr.Delete,data:{ids:e}})},zi=function(e,t){return ii(`/api/n9e/busi-group/${t}/alert-rules/fields`,{method:Kr.Put,data:e})};function Hi(e){return ii("/api/n9e/busi-groups/alertings",{method:Kr.Get,params:{ids:e.join(",")}})}const ji=function(){return ii("/api/n9e/alert-rules/builtin/list",{method:Kr.Get})},Gi=function(e,t,n){return ii(`/api/n9e/busi-group/${n}/alert-rules/builtin`,{method:Kr.Post,data:{name:e,cluster:t}})},$i=function(e){return ii("/api/n9e/alert-aggr-views",{method:Kr.Post,data:e})},Yi=function(e){return ii("/api/n9e/alert-aggr-views",{method:Kr.Put,data:e})},Ui=function(e){return ii("/api/fc-brain/data",{method:Kr.Get,params:e})};function Vi(){const[e,t]=f.exports.useState(),[n,r]=f.exports.useState();return f.exports.useEffect((()=>{const e=O().unix();ii("/api/fc-brain/license",{method:Kr.Get}).then((n=>{var i,a,o;t(S.round(((null==(i=null==n?void 0:n.data)?void 0:i.expire)-e)/86400)),r(null==(a=null==n?void 0:n.data)?void 0:a.rules_remaining),window.localStorage.setItem("license_rules_remaining",S.toString(null==(o=null==n?void 0:n.data)?void 0:o.rules_remaining))}))}),[]),e?d.createElement("div",{style:{marginRight:20}},d.createElement(Ct,{title:d.createElement("div",null,d.createElement("div",null,"还剩 ",e," 天到期"),d.createElement("div",null,"还可添加 ",n," 条规则"))},d.createElement("div",{style:{background:"#EBE8F2",borderRadius:16,color:"#6C53B1",fontSize:12,padding:"2px 8px"}},"还剩 ",e," 天到期"))):null}const Wi=({icon:e,title:t,rightArea:n,children:r,customArea:i,showBack:a,onChangeCluster:o,hideCluster:s=!0})=>{const{t:l,i18n:c}=Fr(),u=w(),h=Vr();let{profile:p}=ni((e=>e.account));const{clusters:m}=ni((e=>e.common)),g=localStorage.getItem("curCluster"),[v,y]=f.exports.useState(g||m[0]);!g&&m.length>0&&(y(m[0]),localStorage.setItem("curCluster",m[0]),h({type:"common/saveData",prop:"curCluster",data:m[0]}));const x=d.createElement(vt,null,d.createElement(vt.Item,{onClick:()=>{u.push("/account/profile/info")}},l("个人信息")),d.createElement(vt.Item,{onClick:()=>{ii("/api/n9e/auth/logout",{method:Kr.Post}).then((e=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),h({type:"common/saveData",prop:"clusters",data:[]}),h({type:"common/saveData",prop:"busiGroups",data:[]}),u.push("/login")}))}},l("退出"))),E=d.createElement(vt,{selectedKeys:[v]},m.map((e=>d.createElement(vt.Item,{key:e,onClick:t=>{y(e),o&&o(e),localStorage.setItem("curCluster",e),h({type:"common/saveData",prop:"curCluster",data:e})}},e))));return d.createElement("div",{className:"page-wrapper"},i?d.createElement("div",{className:"page-top-header"},i):d.createElement("div",{className:"page-top-header"},d.createElement("div",{className:"page-header-content"},d.createElement("div",{className:"page-header-title"},a&&d.createElement(I,{onClick:()=>u.goBack(),style:{marginRight:"5px"}}),e,t),d.createElement("div",{className:"page-header-right-area"},{}.VITE_DOC_LINK,!s&&d.createElement("div",{style:{marginRight:20}},"集群：",d.createElement(Tt,{overlay:E},d.createElement(yt,null,v," ",d.createElement(M,null)))),d.createElement(Oi,null,d.createElement(Vi,null)),d.createElement(Tt,{overlay:x,trigger:["click"]},d.createElement("span",{className:"avator"},d.createElement("img",{src:p.portrait||"/image/avatar1.png",alt:""}),d.createElement("span",{className:"display-name"},p.nickname||p.username),d.createElement(M,null)))))),r&&r)};var Xi,qi=(Xi=function(e,t){return(Xi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Xi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ki=function(){return(Ki=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Qi={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Zi={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Ji={width:"20px",height:"20px",position:"absolute"},ea={top:Ki(Ki({},Qi),{top:"-5px"}),right:Ki(Ki({},Zi),{left:void 0,right:"-5px"}),bottom:Ki(Ki({},Qi),{top:void 0,bottom:"-5px"}),left:Ki(Ki({},Zi),{left:"-5px"}),topRight:Ki(Ki({},Ji),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Ki(Ki({},Ji),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Ki(Ki({},Ji),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Ki(Ki({},Ji),{left:"-10px",top:"-10px",cursor:"nw-resize"})},ta=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return qi(t,e),t.prototype.render=function(){return f.exports.createElement("div",{className:this.props.className||"",style:Ki(Ki({position:"absolute",userSelect:"none"},ea[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(f.exports.PureComponent),na=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ra=function(){return(ra=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ia={width:"auto",height:"auto"},aa=function(e,t,n){return Math.max(Math.min(e,n),t)},oa=function(e,t){return Math.round(e/t)*t},sa=function(e,t){return new RegExp(e,"i").test(t)},la=function(e){return Boolean(e.touches&&e.touches.length)},ca=function(e,t,n){void 0===n&&(n=0);var r=t.reduce((function(n,r,i){return Math.abs(r-e)<Math.abs(t[n]-e)?i:n}),0),i=Math.abs(t[r]-e);return 0===n||i<n?t[r]:e},ua=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},ha=function(e,t,n,r){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%"))return t*(Number(e.replace("%",""))/100);if(e.endsWith("vw"))return n*(Number(e.replace("vw",""))/100);if(e.endsWith("vh"))return r*(Number(e.replace("vh",""))/100)}return e},pa=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],da=function(e){function t(t){var n=e.call(this,t)||this;return n.ratio=1,n.resizable=null,n.parentLeft=0,n.parentTop=0,n.resizableLeft=0,n.resizableRight=0,n.resizableTop=0,n.resizableBottom=0,n.targetLeft=0,n.targetTop=0,n.appendBase=function(){if(!n.resizable||!n.window)return null;var e=n.parentNode;if(!e)return null;var t=n.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add("__resizable_base__"):t.className+="__resizable_base__",e.appendChild(t),t},n.removeBase=function(e){var t=n.parentNode;t&&t.removeChild(e)},n.ref=function(e){e&&(n.resizable=e)},n.state={isResizing:!1,width:void 0===(n.propsSize&&n.propsSize.width)?"auto":n.propsSize&&n.propsSize.width,height:void 0===(n.propsSize&&n.propsSize.height)?"auto":n.propsSize&&n.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},n.onResizeStart=n.onResizeStart.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n}return na(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||ia},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,i=this.resizable.style.position;"relative"!==i&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:n,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:r,this.resizable.style.position=i}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,n=function(t){if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&e.propsSize[t].toString().endsWith("%")){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var n=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/n[t]*100+"%"}return ua(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?ua(t.width):n("width"),height:t&&void 0!==t.height&&!this.state.isResizing?ua(t.height):n("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,n=this.parentNode.style.flexWrap;"wrap"!==n&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=n),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==n&&"auto"!==n?e:"auto"},t.prototype.calculateNewMaxFromBoundary=function(e,t){var n,r,i=this.props.boundsByDirection,a=this.state.direction,o=i&&sa("left",a),s=i&&sa("top",a);if("parent"===this.props.bounds){var l=this.parentNode;l&&(n=o?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),r=s?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(n=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,r=s?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(n=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),r=s?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return n&&Number.isFinite(n)&&(e=e&&e<n?e:n),r&&Number.isFinite(r)&&(t=t&&t<r?t:r),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n=this.props.scale||1,r=this.props.resizeRatio||1,i=this.state,a=i.direction,o=i.original,s=this.props,l=s.lockAspectRatio,c=s.lockAspectRatioExtraHeight,u=s.lockAspectRatioExtraWidth,h=o.width,p=o.height,d=c||0,f=u||0;return sa("right",a)&&(h=o.width+(e-o.x)*r/n,l&&(p=(h-f)/this.ratio+d)),sa("left",a)&&(h=o.width-(e-o.x)*r/n,l&&(p=(h-f)/this.ratio+d)),sa("bottom",a)&&(p=o.height+(t-o.y)*r/n,l&&(h=(p-d)*this.ratio+f)),sa("top",a)&&(p=o.height-(t-o.y)*r/n,l&&(h=(p-d)*this.ratio+f)),{newWidth:h,newHeight:p}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,r){var i=this.props,a=i.lockAspectRatio,o=i.lockAspectRatioExtraHeight,s=i.lockAspectRatioExtraWidth,l=void 0===r.width?10:r.width,c=void 0===n.width||n.width<0?e:n.width,u=void 0===r.height?10:r.height,h=void 0===n.height||n.height<0?t:n.height,p=o||0,d=s||0;if(a){var f=(u-p)*this.ratio+d,m=(h-p)*this.ratio+d,g=(l-d)/this.ratio+p,v=(c-d)/this.ratio+p,y=Math.max(l,f),x=Math.min(c,m),E=Math.max(u,g),b=Math.min(h,v);e=aa(e,y,x),t=aa(t,E,b)}else e=aa(e,l,c),t=aa(t,u,h);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){if("parent"===this.props.bounds){var e=this.parentNode;if(e){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left,this.targetTop=n.top}if(this.resizable){var r=this.resizable.getBoundingClientRect(),i=r.left,a=r.top,o=r.right,s=r.bottom;this.resizableLeft=i,this.resizableRight=o,this.resizableTop=a,this.resizableBottom=s}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var n,r=0,i=0;if(e.nativeEvent&&function(e){return Boolean((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))}(e.nativeEvent)?(r=e.nativeEvent.clientX,i=e.nativeEvent.clientY):e.nativeEvent&&la(e.nativeEvent)&&(r=e.nativeEvent.touches[0].clientX,i=e.nativeEvent.touches[0].clientY),this.props.onResizeStart)if(this.resizable)if(!1===this.props.onResizeStart(e,t,this.resizable))return;this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var a=this.window.getComputedStyle(this.resizable);if("auto"!==a.flexBasis){var o=this.parentNode;if(o){var s=this.window.getComputedStyle(o).flexDirection;this.flexDir=s.startsWith("row")?"row":"column",n=a.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var l={original:{x:r,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:ra(ra({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:n};this.setState(l)}},t.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&la(e))try{e.preventDefault(),e.stopPropagation()}catch(eh){}var n=this.props,r=n.maxWidth,i=n.maxHeight,a=n.minWidth,o=n.minHeight,s=la(e)?e.touches[0].clientX:e.clientX,l=la(e)?e.touches[0].clientY:e.clientY,c=this.state,u=c.direction,h=c.original,p=c.width,d=c.height,f=this.getParentSize(),g=function(e,t,n,r,i,a,o){return r=ha(r,e.width,t,n),i=ha(i,e.height,t,n),a=ha(a,e.width,t,n),o=ha(o,e.height,t,n),{maxWidth:void 0===r?void 0:Number(r),maxHeight:void 0===i?void 0:Number(i),minWidth:void 0===a?void 0:Number(a),minHeight:void 0===o?void 0:Number(o)}}(f,this.window.innerWidth,this.window.innerHeight,r,i,a,o);r=g.maxWidth,i=g.maxHeight,a=g.minWidth,o=g.minHeight;var v=this.calculateNewSizeFromDirection(s,l),y=v.newHeight,x=v.newWidth,E=this.calculateNewMaxFromBoundary(r,i);this.props.snap&&this.props.snap.x&&(x=ca(x,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(y=ca(y,this.props.snap.y,this.props.snapGap));var b=this.calculateNewSizeFromAspectRatio(x,y,{width:E.maxWidth,height:E.maxHeight},{width:a,height:o});if(x=b.newWidth,y=b.newHeight,this.props.grid){var C=oa(x,this.props.grid[0]),T=oa(y,this.props.grid[1]),w=this.props.snapGap||0;x=0===w||Math.abs(C-x)<=w?C:x,y=0===w||Math.abs(T-y)<=w?T:y}var S={width:x-h.width,height:y-h.height};if(p&&"string"==typeof p)if(p.endsWith("%"))x=x/f.width*100+"%";else if(p.endsWith("vw")){x=x/this.window.innerWidth*100+"vw"}else if(p.endsWith("vh")){x=x/this.window.innerHeight*100+"vh"}if(d&&"string"==typeof d)if(d.endsWith("%"))y=y/f.height*100+"%";else if(d.endsWith("vw")){y=y/this.window.innerWidth*100+"vw"}else if(d.endsWith("vh")){y=y/this.window.innerHeight*100+"vh"}var k={width:this.createSizeForCssProperty(x,"width"),height:this.createSizeForCssProperty(y,"height")};"row"===this.flexDir?k.flexBasis=k.width:"column"===this.flexDir&&(k.flexBasis=k.height),m.exports.flushSync((function(){t.setState(k)})),this.props.onResize&&this.props.onResize(e,u,this.resizable,S)}},t.prototype.onMouseUp=function(e){var t=this.state,n=t.isResizing,r=t.direction,i=t.original;if(n&&this.resizable){var a={width:this.size.width-i.width,height:this.size.height-i.height};this.props.onResizeStop&&this.props.onResizeStop(e,r,this.resizable,a),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:ra(ra({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(e){this.setState({width:e.width,height:e.height})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,r=t.handleStyles,i=t.handleClasses,a=t.handleWrapperStyle,o=t.handleWrapperClass,s=t.handleComponent;if(!n)return null;var l=Object.keys(n).map((function(t){return!1!==n[t]?f.exports.createElement(ta,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:r&&r[t],className:i&&i[t]},s&&s[t]?s[t]:null):null}));return f.exports.createElement("div",{className:o,style:a},l)},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce((function(t,n){return-1!==pa.indexOf(n)||(t[n]=e.props[n]),t}),{}),n=ra(ra(ra({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return f.exports.createElement(r,ra({ref:this.ref,style:n,className:this.props.className},t),this.state.isResizing&&f.exports.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(f.exports.PureComponent);const fa=wt.Group,ma=({dataSource:e,fieldNames:t={},allowNotSelect:n=!1,defaultSelect:r,showBadge:i=!0,badgeInfo:a={},onChange:o})=>{const[s,l]=f.exports.useState(r&&"object"==typeof r?r[t.key||"value"]:r);return d.createElement("div",{className:"radio-list"},e.map((e=>d.createElement(St,{key:e.id},d.createElement(kt,{span:i?20:24},d.createElement("div",{className:R({"n9e-metric-views-list-content-item":!0,active:e.id==s}),key:e.id,onClick:t=>{e.id!==s&&(l(e.id),o&&o(e.id,e))}},d.createElement("span",{className:"name"},e.name))),i&&d.createElement(kt,{span:4},d.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},d.createElement(_t,{count:a[e.id]||0})))))))},ga=e=>{const t=Vr(),{clusters:n,curClusterItems:r}=ni((e=>e.common)),[i,a]=f.exports.useState(!1),[o,s]=f.exports.useState(!1);return f.exports.useEffect((()=>{s(n.length===r.length),a(!!r.length&&r.length<n.length),n.length&&e.onChange&&e.onChange(r)}),[n]),{title:d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement("span",null,"集群")),isShow:e.isShow,shrink:{style:{flex:"none",maxHeight:"200px"}},render:()=>d.createElement(fa,{options:n,value:r,style:{flexShrink:1,overflow:"auto"},onChange:r=>{var i;t({type:"common/saveData",prop:"curClusterItems",data:i=r}),localStorage.setItem("curClusterItems",JSON.stringify(i)),e.onChange&&e.onChange(i),a(!!r.length&&r.length<n.length),s(r.length===n.length)}})}},va=e=>{const t=Vr(),{busiGroups:n,curBusiItem:r}=ni((e=>e.common)),{alertings:i}=ni((e=>e.event)),[a,o]=f.exports.useState(n),s=e.showNotGroupItem;if(!localStorage.getItem("curBusiItem")&&!s&&n.length>0&&(localStorage.setItem("curBusiItem",JSON.stringify(n[0])),t({type:"common/saveData",prop:"curBusiItem",data:n[0]})),e.defaultSelect&&n.length>0&&r.id!==e.defaultSelect){const r=n.find((t=>t.id===e.defaultSelect));r&&(localStorage.setItem("curBusiItem",JSON.stringify(r)),t({type:"common/saveData",prop:"curBusiItem",data:r}))}const l=f.exports.useMemo((()=>e.defaultSelect?{id:e.defaultSelect}:r.id?r:{id:void 0}),[r]);return f.exports.useEffect((()=>{a.length||o(n)}),[n]),f.exports.useEffect((()=>{n.length&&e.onChange&&(s||!s&&l.id)&&e.onChange(l.id,l)}),[n,l]),{title:"业务组",isShow:!0,shrink:!0,render:()=>d.createElement(d.Fragment,null,d.createElement(bt,{className:"left-area-group-search",prefix:d.createElement(N,null),onPressEnter:e=>{e.preventDefault();const n=e.currentTarget.value;n?ai(n).then((e=>{o(e.dat||[])})):ai("").then((e=>{const n=e.dat||[];o(n),t({type:"common/saveData",prop:"busiGroups",data:n})}))},placeholder:"请输入业务组名称进行筛选"}),!s&&r.id&&0!==a.length||s?d.createElement(ma,{dataSource:s?[{id:0,name:"未归组对象"}].concat(a):a,fieldNames:{key:"id",label:"name",value:"id"},allowNotSelect:s,defaultSelect:l,showBadge:e.showAlertings,badgeInfo:i,onChange:(n,r)=>{n&&(t({type:"common/saveData",prop:"curBusiItem",data:r}),localStorage.setItem("curBusiItem",JSON.stringify(r))),e.onChange&&e.onChange(n,r)}}):d.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",padding:20,marginLeft:-20}},d.createElement("img",{src:"/image/empty.png",width:"64"}),d.createElement("div",{className:"ant-empty-description"},"暂无数据")))}},ya=({clusterGroup:e={},busiGroup:t={},eventLevelGroup:n={},eventTypeGroup:r={}})=>{const i=w(),[a,o]=f.exports.useState("1"===localStorage.getItem("leftlist")),s=[ga(e),va(t),{title:"事件级别",isShow:n.isShow,render:()=>d.createElement(ma,{dataSource:[{label:"一级告警",value:1},{label:"二级告警",value:2},{label:"三级告警",value:3}],defaultSelect:n.defaultSelect,allowNotSelect:!0,onChange:null==n?void 0:n.onChange})},{title:"事件类别",isShow:r.isShow,render:()=>d.createElement(ma,{dataSource:[{label:"Triggered",value:0},{label:"Recovered",value:1}],defaultSelect:r.defaultSelect,allowNotSelect:!0,onChange:null==r?void 0:r.onChange})}],[l,c]=f.exports.useState(S.toNumber(localStorage.getItem("leftwidth")||200));return d.createElement(da,{style:{marginRight:a?0:10},size:{width:a?0:l,height:"100%"},enable:{right:!a},onResizeStop:(e,t,n,r)=>{let i=l+r.width;i<200&&(i=200),c(i),localStorage.setItem("leftwidth",i.toString())}},d.createElement("div",{className:a?"left-area collapse":"left-area"},d.createElement("div",{className:"collapse-btn",onClick:()=>{localStorage.setItem("leftlist",a?"0":"1"),o(!a)}},a?d.createElement(L,null):d.createElement(F,null)),s.map((({title:e,isShow:t,shrink:n=!1,render:r},a)=>t&&d.createElement("div",{key:a,className:"left-area-group "+(n?"group-shrink":""),style:"object"==typeof n?n.style:{}},d.createElement("div",{className:"left-area-group-title"},e,"业务组"===e&&d.createElement(P,{onClick:()=>i.push("/busi-groups")})),r())))))};function xa(e){const{t:t}=Fr(),{text:n}=e;return d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(D,{style:{color:"#1473ff"}})," ",t("提示信息")),d.createElement("p",null,n,"需要归属某个业务组，请先  ",d.createElement(B,{to:"/busi-groups"},"创建业务组")))}const Ea=e=>{var t=e,{onSearch:n}=t,r=c(t,["onSearch"]);Fr();const[i,a]=f.exports.useState("");return d.createElement(bt,s({prefix:d.createElement(N,null),value:i,onChange:e=>{a(e.target.value),""===e.target.value&&n&&n("")},onPressEnter:e=>{n&&n(i)}},r))};var ba,Ca,Ta,wa,Sa,ka,_a,Aa,Oa,Ia;(Ca=ba||(ba={}))[Ca.n9e=0]="n9e",Ca[Ca.prometheus=1]="prometheus",(wa=Ta||(Ta={}))[wa.Enable=0]="Enable",wa[wa.UnEnable=1]="UnEnable",(ka=Sa||(Sa={}))[ka.Send=0]="Send",ka[ka.UnSend=1]="UnSend",(Aa=_a||(_a={}))[Aa.First=1]="First",Aa[Aa.Second=2]="Second",Aa[Aa.Third=3]="Third",(Ia=Oa||(Oa={}))[Ia.Favorite=0]="Favorite",Ia[Ia.Common=1]="Common";const Ma=["30","50","100","300"],Na=[{value:"1h"},{value:"2h"},{value:"3h"},{value:"6h"},{value:"12h"},{value:"1d"},{value:"2d"},{value:"3d"},{value:"5d"},{value:"7d"},{value:"14d"},{value:"30d"},{value:"60d"},{value:"90d"},{value:"forever"}];function Fa(e){Fr();const{onClick:t,className:n}=e,[r,i]=f.exports.useState(!1);return d.createElement(yt,{className:n?n+" reload-icon":"reload-icon",loading:r,onClick:e=>{r||(i(!0),t(),setTimeout((()=>{i(!1)}),1e3))},icon:d.createElement(z,{className:"refresh",spin:r})})}const La=e=>{var t=e,{text:n}=t,r=c(t,["text"]);return Fr(),Array.from(n).reduce(((e,t)=>e+t.charCodeAt(0)),0),d.createElement(At,s({color:"blue"},r),n)};const{Option:Pa}=It,{TextArea:Ra}=bt;var Da,Ba;function za(e){const{t:t}=Fr(),n=f.exports.useRef(null),{status:r,title:i,exportData:a,description:o,onClose:c,onSubmit:u,crossCluster:h=!0,onSuccess:p,label:m,fetchBuiltinFunc:g,submitBuiltinFunc:v,bgid:y}=e,[x]=Et.useForm(),{clusters:E}=ni((e=>e.common)),[b,C]=f.exports.useState([]),[T,w]=f.exports.useState([]),[S,k]=f.exports.useState(),_=[{title:m,dataIndex:"name"},{title:"导入结果",dataIndex:"isTrue",render:e=>e?d.createElement(G,{style:{color:"#389e0d",fontSize:"18px"}}):d.createElement($,{style:{color:"#d4380d",fontSize:"18px"}})},{title:"错误消息",dataIndex:"msg"}],A=[{title:`${m}名称`,dataIndex:"name"},{title:"操作",dataIndex:"id",render:(e,t)=>d.createElement(yt,{type:"link",onClick:()=>{v&&v(t.name,x.getFieldValue("cluster"),y).then((({dat:e})=>{k(Object.keys(e).map((t=>({name:t,key:t,isTrue:!e[t],msg:e[t]}))))}))}},"导入")}],O=()=>{c(),S&&S.some((e=>e.isTrue))&&p&&p()};f.exports.useEffect((()=>{r!==Da.BuiltIn&&r!=Da.Import||g&&g().then((e=>{let t=e.dat.map((e=>({name:e})));w(t),C(t)})),k(void 0)}),[r]);const I=f.exports.isValidElement(i)?i:r===Da.Export?t("导出")+i:t("导入")+i;return d.createElement(Ot,{title:I,destroyOnClose:!0,wrapClassName:f.exports.isValidElement(i)?"import-modal-wrapper":void 0,footer:r===Da.Import&&d.createElement(d.Fragment,null,d.createElement(yt,{key:"delete",onClick:O},t("取消")),S?d.createElement(yt,{type:"primary",onClick:O},t("关闭")):d.createElement(yt,{key:"submit",type:"primary",onClick:async()=>{await x.validateFields();const e=x.getFieldsValue();try{const t=JSON.parse(e.import);if(!Array.isArray(t))return void gt.error(i+"JSON需要时数组");const n=t.map((t=>l(s({},t),{cluster:h?e.cluster:void 0}))),r=await u(n),a=Object.keys(r).map((e=>({name:e,key:e,isTrue:!r[e],msg:r[e]})));k(a)}catch(n){gt.error(t("数据有误:")+n)}}},t("确定"))),onCancel:O,afterClose:()=>k(void 0),visible:"hide"!==r,width:600},d.createElement("div",{style:{color:"#999"}},o&&d.createElement("p",null,o),r===Da.Export&&d.createElement("p",null,d.createElement("a",{onClick:()=>{oi([a],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>si(a,t)},d.createElement(H,null),"复制JSON内容到剪贴板"))),(()=>{switch(r){case Da.Export:return d.createElement("div",{contentEditable:"true",suppressContentEditableWarning:!0,ref:n,className:"export-dialog code-area"},d.createElement("pre",null,a));case Da.BuiltIn:return d.createElement(d.Fragment,null,d.createElement(Et,{form:x,preserve:!1,layout:"vertical"},h&&d.createElement(Et.Item,{label:t("生效集群："),name:"cluster",initialValue:E[0]||"Default",rules:[{required:!0,message:t("生效集群不能为空")}]},d.createElement(It,{suffixIcon:d.createElement(j,null)},null==E?void 0:E.map((e=>d.createElement(Pa,{value:e,key:e},e)))))),d.createElement(bt,{placeholder:`请输入要查询的${m}名称`,prefix:d.createElement(N,null),style:{marginBottom:"8px"},allowClear:!0,onChange:e=>{let t=e.target.value,n=[];b.forEach((e=>{-1!=e.name.toLowerCase().indexOf(t.toLowerCase())&&n.push(e)})),w(n)}}),d.createElement(Nt,{className:"samll_table",dataSource:T,columns:A,pagination:!(T.length<5)&&{pageSize:5},size:"small"}),S&&d.createElement(d.Fragment,null,d.createElement(Mt,null),d.createElement(Nt,{className:"samll_table",dataSource:S,columns:_,size:"small",pagination:!(S.length<5)&&{pageSize:5}})));case Da.Import:return d.createElement(d.Fragment,null,d.createElement(Et,{form:x,preserve:!1,layout:"vertical"},h?d.createElement(Et.Item,{label:t("生效集群："),name:"cluster",initialValue:E[0]||"Default",rules:[{required:!0,message:t("生效集群不能为空")}]},d.createElement(It,{suffixIcon:d.createElement(j,null)},null==E?void 0:E.map((e=>d.createElement(Pa,{value:e,key:e},e))))):null,d.createElement(Et.Item,{label:(f.exports.isValidElement(i)?m:i)+t("JSON："),name:"import",rules:[{required:!0,message:t("请输入")+i,validateTrigger:"trigger"}]},d.createElement(Ra,{className:"code-area",placeholder:t("请输入")+(f.exports.isValidElement(i)?m:i),rows:4}))),S&&d.createElement(d.Fragment,null,d.createElement(Mt,null),d.createElement(Nt,{className:"samll_table",dataSource:S,columns:_,pagination:!1,size:"small"})))}})())}(Ba=Da||(Da={})).Import="import",Ba.Export="export",Ba.BuiltIn="builtin",Ba.None="hide";const Ha=function(e={}){return ii("/api/n9e/users",{method:Kr.Get,params:e})},ja=function(e){const t=e?e.limit?e:l(s({},e),{limit:200}):{limit:200};return ii("/api/n9e/user-groups",{method:Kr.Get,params:t})},Ga=function(e={}){return ii("/api/n9e/busi-groups",{method:Kr.Get,params:e})},$a=function(e){return ii(`/api/n9e/busi-group/${e}`,{method:Kr.Get}).then((e=>e&&e.dat))},Ya=function(e){return ii(`/api/n9e/user-group/${e}`,{method:Kr.Get}).then((e=>e&&e.dat))},Ua=function(){return ii("/api/n9e/notify-channels",{method:Kr.Get}).then((e=>e&&e.dat))},Va=function(){return ii("/api/n9e/contact-keys",{method:Kr.Get}).then((e=>e&&e.dat))},Wa=({checked:e,onChange:t,label:n})=>d.createElement(d.Fragment,null,d.createElement(Ft,{checked:e,onChange:t,style:{marginRight:5}}),n),{Option:Xa}=It,qa={labelCol:{span:3},wrapperCol:{span:20}},Ka={wrapperCol:{offset:5}},Qa=[{id:2,field:"cluster",name:"集群"},{id:3,field:"severity",name:"级别"},{id:5,field:"prom_eval_interval",name:"执行频率"},{id:6,field:"prom_for_duration",name:"持续时长"},{id:4,field:"disabled",name:"启用"},{id:13,field:"enable_time",name:"生效时间"},{id:14,field:"enable_in_bg",name:"仅在本业务组生效"},{id:12,field:"append_tags",name:"附加标签"},{id:7,field:"notify_channels",name:"通知媒介"},{id:8,field:"notify_groups",name:"告警接收组"},{id:9,field:"notify_recovered",name:"启用恢复通知"},{id:10,field:"notify_repeat_step",name:"重复发送频率"},{id:15,field:"recover_duration",name:"留观时长"},{id:16,field:"notify_max_number",name:"最大发送次数"},{id:11,field:"callbacks",name:"回调地址"},{id:0,field:"note",name:"备注"},{id:1,field:"runbook_url",name:"预案链接"}];function Za(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function Ja(e){const{isCorrectFormat:t,isLengthAllowed:n}=Za(e.value);return t&&n?d.createElement(At,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(Ct,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(At,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function eo(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=Za(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const to=({isModalVisible:e,editModalFinish:t})=>{const{t:n,i18n:r}=Fr(),[i]=Et.useForm(),{clusters:a}=ni((e=>e.common)),[o,c]=f.exports.useState([]),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState("cluster"),[g,v]=f.exports.useState(!0);f.exports.useEffect((()=>(b(),C(""),()=>{})),[]);const y=[n("周日"),n("周一"),n("周二"),n("周三"),n("周四"),n("周五"),n("周六")].map(((e,t)=>d.createElement(Xa,{value:String(t),key:t},`${e}`))),x=o.map((e=>d.createElement(wt,{value:e.key,key:e.label},e.label))),E=u.map((e=>d.createElement(Xa,{value:e.id,key:e.id},e.name))),b=async()=>{const e=await Ua();c(e||[])},C=async e=>{const t=await ja({query:e}),n=t.dat||t;h(n||[])},T=f.exports.useCallback(Y.exports.debounce(C,800),[]);return d.createElement(d.Fragment,null,d.createElement(Ot,{title:n("批量更新"),visible:e,onOk:()=>{i.validateFields().then((async e=>{const n=s({},e);switch(e.field){case"enable_time":n.enable_stime=e.enable_time[0].format("HH:mm"),n.enable_etime=e.enable_time[1].format("HH:mm"),delete n.enable_time;break;case"disabled":n.disabled=e.enable_status?0:1,delete n.enable_status;break;case"enable_in_bg":n.enable_in_bg=e.enable_in_bg?1:0;break;case"callbacks":n.callbacks=e.callbacks.map((e=>e.url));break;case"notify_recovered":n.notify_recovered=e.notify_recovered?1:0}delete n.field,Object.keys(n).forEach((e=>{void 0===n[e]&&(n[e]=""),Array.isArray(n[e])&&(n[e]=n[e].join(" "))})),t(!0,n)}))},onCancel:()=>{t(!1)}},d.createElement(Et,l(s({},qa),{form:i,className:"strategy-form",layout:"horizontal",initialValues:{prom_eval_interval:15,disabled:0,enable_status:!0,notify_recovered:1,enable_time:[O("00:00","HH:mm"),O("23:59","HH:mm")],cluster:a[0]||"Default",enable_days_of_week:["1","2","3","4","5","6","0"],field:"cluster"}}),d.createElement(Et.Item,{label:n("字段："),name:"field",rules:[{required:!1}]},d.createElement(It,{suffixIcon:d.createElement(j,null),style:{width:"100%"},onChange:e=>{m(e)}},Qa.map((e=>d.createElement(Xa,{key:e.id,value:e.field},e.name))))),(()=>{switch(p){case"note":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),name:"note",rules:[{required:!1}]},d.createElement(bt,{placeholder:n("请输入规则备注")})));case"runbook_url":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),name:"runbook_url"},d.createElement(bt,null)));case"cluster":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),name:"cluster",rules:[{required:!1,message:n("生效集群不能为空")}]},d.createElement(It,{suffixIcon:d.createElement(j,null)},null==a?void 0:a.map((e=>d.createElement(Xa,{value:e,key:e},e))))));case"severity":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),name:"severity",initialValue:2,rules:[{required:!1,message:n("告警级别不能为空")}]},d.createElement(Dt.Group,null,d.createElement(Dt,{value:1},n("一级报警")),d.createElement(Dt,{value:2},n("二级报警")),d.createElement(Dt,{value:3},n("三级报警")))));case"disabled":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),name:"enable_status",rules:[{required:!1,message:n("立即启用不能为空")}],valuePropName:"checked"},d.createElement(Ft,null)));case"enable_in_bg":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),name:"enable_in_bg",valuePropName:"checked"},d.createElement(Wa,{label:"根据告警事件中的ident归属关系判断"})));case"prom_eval_interval":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),rules:[{required:!1,message:n("执行频率不能为空")}]},d.createElement(Pt,null,d.createElement(Et.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:15,wrapperCol:{span:10}},d.createElement(Rt,{min:1,onChange:e=>{v(!g)}})),"秒",d.createElement(Ct,{title:n(`每隔${i.getFieldValue("prom_eval_interval")}秒，把PromQL作为查询条件，去查询后端存储，如果查到了数据就表示当次有监控数据触发了规则`)},d.createElement(W,null)))));case"prom_for_duration":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),rules:[{required:!1,message:n("持续时长不能为空")}]},d.createElement(Pt,null,d.createElement(Et.Item,{style:{marginBottom:0},name:"prom_for_duration",initialValue:60,wrapperCol:{span:10}},d.createElement(Rt,{min:0})),"秒",d.createElement(Ct,{title:n("通常持续时长大于执行频率，在持续时长内按照执行频率多次执行PromQL查询，每次都触发才生成告警；如果持续时长置为0，表示只要有一次PromQL查询触发阈值，就生成告警")},d.createElement(W,null)))));case"notify_channels":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),name:"notify_channels"},d.createElement(wt.Group,null,x)));case"notify_groups":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),name:"notify_groups"},d.createElement(It,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>T(e),onBlur:()=>C("")},E)));case"notify_recovered":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),name:"notify_recovered",valuePropName:"checked"},d.createElement(Ft,null)));case"recover_duration":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为：")},d.createElement(Pt,null,d.createElement(Et.Item,{style:{marginBottom:0},name:"recover_duration",initialValue:0,wrapperCol:{span:10},rules:[{required:!1,message:n("留观时长不能为空")}]},d.createElement(Rt,{min:0,onChange:e=>{v(!g)}})),"秒",d.createElement(Ct,{title:n(`持续${i.getFieldValue("recover_duration")||0}秒没有再次触发阈值才发送恢复通知`)},d.createElement(W,null)))));case"notify_repeat_step":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为：")},d.createElement(Pt,null,d.createElement(Et.Item,{style:{marginBottom:0},name:"notify_repeat_step",initialValue:60,wrapperCol:{span:10},rules:[{required:!1,message:n("重复发送频率不能为空")}]},d.createElement(Rt,{min:0,onChange:e=>{v(!g)}})),"分钟",d.createElement(Ct,{title:n(`如果告警持续未恢复，间隔${i.getFieldValue("notify_repeat_step")}分钟之后重复提醒告警接收组的成员`)},d.createElement(W,null)))));case"notify_max_number":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为：")},d.createElement(Pt,null,d.createElement(Et.Item,{style:{marginBottom:0},name:"notify_max_number",initialValue:0,wrapperCol:{span:10},rules:[{required:!0,message:n("最大发送次数不能为空")}]},d.createElement(Rt,{min:0,precision:0})),d.createElement(Ct,{title:n("如果值为0，则不做最大发送次数的限制")},d.createElement(W,null)))));case"callbacks":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为：")},d.createElement(Et.List,{name:"callbacks",initialValue:[{}]},((e,{add:t,remove:n},{errors:r})=>d.createElement(d.Fragment,null,e.map(((e,t)=>d.createElement(St,{gutter:[10,0],key:e.key},d.createElement(kt,{span:22},d.createElement(Et.Item,{name:[e.name,"url"]},d.createElement(bt,null))),d.createElement(kt,{span:1},d.createElement(U,{className:"control-icon-normal",onClick:()=>n(e.name)}))))),d.createElement(V,{className:"control-icon-normal",onClick:()=>t()}))))));case"append_tags":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},eo]},d.createElement(It,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:Ja})));case"enable_time":return d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("改为："),name:"enable_days_of_week",rules:[{required:!1,message:n("生效时间不能为空")}]},d.createElement(It,{mode:"tags"},y)),d.createElement(Et.Item,l(s({name:"enable_time"},Ka),{rules:[{required:!1,message:n("生效时间不能为空")}]}),d.createElement(Lt.RangePicker,{format:"HH:mm",onChange:(e,t)=>{i.setFieldsValue({enable_stime:t[0],enable_etime:t[1]})}})));default:return null}})())))};function no(e){const{onSeverityChange:t,onEventTypeChange:n,onBusiGroupChange:r,onClusterChange:i,noLeftPadding:a,noRightPadding:o=!0}=e,{clusters:s,busiGroups:l}=ni((e=>e.common)),[c,u]=f.exports.useState(l),h=f.exports.useCallback(Y.exports.debounce((e=>{ai(e).then((e=>{u(e.dat||[])}))}),800),[]);return d.createElement(Pt,{style:{marginLeft:a?0:8,marginRight:o?0:8}},i&&d.createElement(It,{mode:"multiple",allowClear:!0,style:{minWidth:80},placeholder:"集群",onChange:i,getPopupContainer:()=>document.body,dropdownMatchSelectWidth:!1},s.map((e=>d.createElement(It.Option,{value:e,key:e},e)))),r&&d.createElement(It,{allowClear:!0,showSearch:!0,style:{minWidth:120},placeholder:"业务组",dropdownClassName:"overflow-586",filterOption:!1,onSearch:h,getPopupContainer:()=>document.body,onFocus:()=>{ai("").then((e=>{u(e.dat||[])}))},onClear:()=>{ai("").then((e=>{u(e.dat||[])}))},onChange:r},c.map((e=>d.createElement(It.Option,{value:e.id,key:e.id},e.name)))),t&&d.createElement(It,{suffixIcon:d.createElement(j,null),allowClear:!0,style:{minWidth:80},placeholder:"事件级别",onChange:t,getPopupContainer:()=>document.body},d.createElement(It.Option,{value:1},"一级告警"),d.createElement(It.Option,{value:2},"二级告警"),d.createElement(It.Option,{value:3},"三级告警")),n&&d.createElement(It,{suffixIcon:d.createElement(j,null),allowClear:!0,style:{minWidth:80},placeholder:"事件类别",onChange:n,getPopupContainer:()=>document.body},d.createElement(It.Option,{value:0},"Triggered"),d.createElement(It.Option,{value:1},"Recovered")))}const{confirm:ro}=Ot,{TabPane:io}=Bt,ao={cluster:void 0,create_by:void 0,group_id:void 0,id:void 0,notify_groups_obj:void 0,notify_groups:void 0,notify_users:void 0,create_at:void 0,update_at:void 0,update_by:void 0},oo=({bgid:e})=>{const[t,n]=f.exports.useState(),[r,i]=f.exports.useState([]),{t:a,i18n:o}=Fr(),l=w(),[c,u]=f.exports.useState(Da.None),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState(""),{curBusiItem:x}=ni((e=>e.common)),[E,b]=f.exports.useState(""),[C,T]=f.exports.useState(!1),[S,k]=f.exports.useState([]),[_,A]=f.exports.useState([]),[O,I]=f.exports.useState(!1);f.exports.useEffect((()=>{e&&N()}),[e,t]),f.exports.useEffect((()=>{F()}),[E,r,S]);const N=async()=>{if(!e)return;I(!0);const{success:n,dat:r}=await Li({id:e});n&&(k(r.filter((e=>!t||e.severity===t))||[]),I(!1))},F=()=>{const e=JSON.parse(JSON.stringify(S)).filter((e=>{const t=E.toLowerCase();return(e.name.toLowerCase().indexOf(t)>-1||e.append_tags.join(" ").toLowerCase().indexOf(t)>-1)&&(r&&(null==r?void 0:r.indexOf(e.cluster))>-1||0===(null==r?void 0:r.length))}));A(e||[])},L=(e,t=!1)=>{(null==x?void 0:x.id)&&l.push(`/alert-rules/edit/${e}${t?"?mode=clone":""}`)},P=()=>{N()},R=[{title:a("集群"),dataIndex:"cluster",render:e=>d.createElement("div",null,e)},{title:a("级别"),dataIndex:"severity",render:e=>d.createElement(At,{color:Ii[e-1]},"S",e)},{title:a("名称"),dataIndex:"name",render:(e,t)=>d.createElement("div",{className:"table-active-text",onClick:()=>{L(t.id)}},e)},{title:a("告警接收者"),dataIndex:"notify_groups_obj",width:100,render:(e,t)=>e.length&&e.map(((e,t)=>d.createElement(La,{text:e.nickname||e.username||e.name,key:t})))||d.createElement("div",null)},{title:a("附加标签"),dataIndex:"append_tags",render:e=>{const t=e||[];return t.length&&t.map(((e,t)=>d.createElement(La,{text:e,key:t})))||d.createElement("div",null)}},{title:a("更新时间"),dataIndex:"update_at",width:120,render:e=>X(1e3*Number(e)).format("YYYY-MM-DD HH:mm:ss")},{title:a("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Ft,{checked:e===Ta.Enable,size:"small",onChange:()=>{const{id:e,disabled:n}=t;zi({ids:[e],fields:{disabled:n?0:1}},x.id).then((()=>{P()}))}})},{title:a("操作"),dataIndex:"operator",width:160,render:(e,t)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{L(t.id,!0)}},a("克隆")),d.createElement("div",{className:"table-operator-area-warning",onClick:()=>{ro({title:a("是否删除该告警规则?"),onOk:()=>{Bi([t.id],x.id).then((()=>{gt.success(a("删除成功")),P()}))},onCancel(){}})}},a("删除")),"holtwinters"===t.algorithm&&d.createElement("div",null,d.createElement(B,{to:{pathname:`/alert-rules/brain/${t.id}`}},"训练结果")))}],D=f.exports.useMemo((()=>d.createElement("ul",{className:"ant-dropdown-menu"},d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>u(Da.BuiltIn)},d.createElement("span",null,a("导入告警规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{if(m.length){const e=m.map((e=>s(s({},e),ao)));y(JSON.stringify(e,null,2)),u(Da.Export)}else gt.warning(a("未选择任何规则"))}},d.createElement("span",null,a("导出告警规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{h.length?ro({title:a("是否批量删除告警规则?"),onOk:()=>{Bi(h,null==x?void 0:x.id).then((()=>{gt.success(a("删除成功")),P()}))},onCancel(){}}):gt.warning(a("未选择任何规则"))}},d.createElement("span",null,a("批量删除规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{a("批量更新规则"),0!=h.length?T(!0):gt.warning(a("请先选择策略"))}},d.createElement("span",null,a("批量更新规则"))))),[h,a]);return d.createElement("div",{className:"strategy-table-content"},d.createElement("div",{className:"strategy-table-search table-handle"},d.createElement("div",{className:"strategy-table-search-left"},d.createElement(Fa,{className:"strategy-table-search-left-refresh",onClick:()=>{P()}}),d.createElement(no,{noLeftPadding:!0,noRightPadding:!1,onSeverityChange:e=>n(e),onClusterChange:e=>i(e)}),d.createElement(Ea,{className:"searchInput",placeholder:a("搜索名称或标签"),onSearch:b,allowClear:!0})),d.createElement("div",{className:"strategy-table-search-right"},d.createElement(yt,{type:"primary",onClick:()=>{(null==x?void 0:x.id)&&l.push(`/alert-rules/add/${x.id}`)},className:"strategy-table-search-right-create",ghost:!0},a("新增告警规则")),d.createElement("div",{className:"table-more-options"},d.createElement(Tt,{overlay:D,trigger:["click"]},d.createElement(yt,{onClick:e=>e.stopPropagation()},a("更多操作"),d.createElement(M,{style:{marginLeft:2}})))))),d.createElement(Nt,{rowKey:"id",pagination:{total:_.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:Ma,defaultPageSize:30},loading:O,dataSource:_,rowSelection:{selectedRowKeys:m.map((e=>e.id)),onChange:(e,t)=>{p(e),g(t)}},columns:R}),d.createElement(za,{bgid:e,status:c,fetchBuiltinFunc:ji,submitBuiltinFunc:Gi,onClose:()=>{u(Da.None)},onSuccess:()=>{N()},onSubmit:async e=>{const{dat:t}=await Di(e,x.id,"Post");return t||{}},label:"告警规则",title:Da.Export===c?"告警规则":d.createElement(Bt,{defaultActiveKey:Da.BuiltIn,onChange:e=>u(e),className:"custom-import-alert-title"},d.createElement(io,{tab:" 导入内置告警规则",key:Da.BuiltIn}),d.createElement(io,{tab:"导入告警规则JSON",key:Da.Import})),exportData:v}),C&&d.createElement(to,{isModalVisible:C,editModalFinish:async(e,t)=>{if(e){const e=await zi({ids:h,fields:t},x.id);e.err?gt.error(e.err):(gt.success("修改成功！"),P(),T(!1))}else T(!1)}}))};const so=()=>{const e=ui(),t=w(),n=e.get("id"),{t:r}=Fr();return d.createElement(Wi,{title:r("告警规则"),icon:d.createElement(P,null),hideCluster:!0},d.createElement("div",{className:"strategy-content"},d.createElement(ya,{busiGroup:{defaultSelect:n?Number(n):void 0,onChange:e=>{t.push(`/alert-rules?id=${e}`)}}}),n?d.createElement(oo,{bgid:Number(n)}):d.createElement(xa,{text:"告警规则"})))};function lo(){const{t:e}=Fr(),[t]=Et.useForm(),n=()=>{const{oldpass:n,newpass:r}=t.getFieldsValue();(function(e,t){return ii("/api/n9e/self/password",{method:Kr.Put,data:{oldpass:e,newpass:t}})})(n,r).then((t=>{console.log(t),gt.success(e("修改密码成功"))}))};return d.createElement(Et,{form:t,layout:"vertical",requiredMark:!0},d.createElement(Et.Item,{label:d.createElement("span",null,e("旧密码"),":"),required:!0,name:"oldpass",rules:[{required:!0,message:e("请输入旧密码")}]},d.createElement(bt,{placeholder:e("请输入旧密码"),type:"password"})),d.createElement(Et.Item,{label:d.createElement("span",null,e("新密码"),":"),required:!0,name:"newpass",hasFeedback:!0,rules:[{required:!0,message:e("请输入新密码")}]},d.createElement(bt,{placeholder:e("请输入新密码"),type:"password"})),d.createElement(Et.Item,{label:d.createElement("span",null,e("确认密码"),": "),required:!0,name:"newpassagain",hasFeedback:!0,rules:[{required:!0,message:e("再次输入新密码")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("newpass")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(bt,{placeholder:e("再次输入新密码"),type:"password"})),d.createElement(Et.Item,null,d.createElement(yt,{type:"primary",onClick:async()=>{try{await t.validateFields(),n()}catch(eh){console.log(e("输入有误"))}}},e("确认修改"))))}const{Option:co}=It;function uo(){const{t:e}=Fr(),[t]=Et.useForm(),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState([]);let{profile:o}=ni((e=>e.account));const[u,h]=f.exports.useState(o.portrait||"/image/avatar1.png"),[p,m]=f.exports.useState(""),g=Vr();f.exports.useEffect((()=>{const{id:e,nickname:n,email:r,phone:i,contacts:a,portrait:s}=o;t.setFieldsValue({nickname:n,email:r,phone:i,contacts:a}),s.startsWith("http")&&m(s)}),[o]),f.exports.useEffect((()=>{Va().then((e=>{a(e)}))}),[]);const v=async()=>{try{await t.validateFields(),y()}catch(n){console.log(e("输入有误"),n)}},y=()=>{const{nickname:n,email:r,phone:i,moreContacts:a}=t.getFieldsValue();let{contacts:c}=t.getFieldsValue();a&&a.length>0&&a.forEach((e=>{const{key:t,value:n}=e;t&&n&&(c?c[t]=n:c={[t]:n})}));for(let e in c)c[e]||delete c[e];g({type:"account/updateProfile",data:l(s({},o),{portrait:p||u,nickname:n,email:r,phone:i,contacts:c})}),gt.success(e("信息保存成功"))},x=new Array(8).fill(0).map(((e,t)=>t+1));return d.createElement(d.Fragment,null,d.createElement(Et,{form:t,layout:"vertical"},d.createElement(St,{gutter:16,style:{marginBottom:"24px"}},d.createElement(kt,{span:20},d.createElement(St,{gutter:16,style:{marginBottom:"24px"}},d.createElement(kt,{span:4},d.createElement("div",null,d.createElement("label",null,e("用户名"),"："),d.createElement("span",null,o.username))),d.createElement(kt,{span:4},d.createElement("div",null,d.createElement("label",null,e("角色"),"："),d.createElement("span",null,o.roles.join(", "))))),d.createElement(Et.Item,{label:d.createElement("span",null,e("显示名"),"："),name:"nickname"},d.createElement(bt,{placeholder:e("请输入显示名")})),d.createElement(Et.Item,{label:d.createElement("span",null,e("邮箱"),"："),name:"email"},d.createElement(bt,{placeholder:e("请输入邮箱")})),d.createElement(Et.Item,{label:d.createElement("span",null,e("手机"),"："),name:"phone"},d.createElement(bt,{placeholder:e("请输入手机号")})),o.contacts&&Object.keys(o.contacts).sort().map(((t,n)=>{let r=i.find((e=>e.key===t));return d.createElement(d.Fragment,null,r?d.createElement(Et.Item,{label:r.label+"：",name:["contacts",t],key:n},d.createElement(bt,{placeholder:`${e("请输入")}${t}`})):null)})),d.createElement(Et.Item,{label:e("更多联系方式")},d.createElement(Et.List,{name:"moreContacts"},((t,{add:n,remove:r})=>d.createElement(d.Fragment,null,t.map((t=>{var n=t,{key:a,name:o,fieldKey:u}=n,h=c(n,["key","name","fieldKey"]);return d.createElement(Pt,{key:a,style:{display:"flex"},align:"baseline"},d.createElement(Et.Item,l(s({style:{width:"180px"}},h),{name:[o,"key"],fieldKey:[u,"key"],rules:[{required:!0,message:e("联系方式不能为空")}]}),d.createElement(It,{suffixIcon:d.createElement(j,null),placeholder:e("请选择联系方式")},i.map(((e,t)=>d.createElement(co,{value:e.key,key:t},e.label))))),d.createElement(Et.Item,l(s({},h),{style:{width:"330px"},name:[o,"value"],fieldKey:[u,"value"],rules:[{required:!0,message:e("值不能为空")}]}),d.createElement(bt,{placeholder:e("请输入值")})),d.createElement(U,{className:"control-icon-normal",onClick:()=>r(o)}))})),d.createElement(V,{className:"control-icon-normal",onClick:()=>n()}))))),d.createElement(Et.Item,null,d.createElement(yt,{type:"primary",onClick:v},e("确认修改")))),d.createElement(kt,{span:4},d.createElement("div",{className:"avatar"},d.createElement("img",{src:o.portrait||"/image/avatar1.png"}),d.createElement(yt,{type:"primary",className:"update-avatar",onClick:()=>r(!0)},e("更换头像")))))),d.createElement(Ot,{title:e("更换头像"),visible:n,onOk:()=>{if(p){if(!p.startsWith("http"))return void gt.error(e("自定义头像需以http开头"));fetch(p,{mode:"no-cors"}).then((e=>{r(!1),v()})).catch((t=>{gt.error(e("自定义头像")+t)}))}else r(!1),v()},onCancel:()=>{r(!1)},wrapClassName:"avatar-modal"},d.createElement("div",{className:"avatar-content"},x.map((e=>d.createElement("div",{key:e,className:`/image/avatar${e}.png`===u?"avatar active":"avatar",onClick:()=>(e=>{h(`/image/avatar${e}.png`)})(e)},d.createElement("img",{src:`/image/avatar${e}.png`}))))),d.createElement(bt,{addonBefore:d.createElement("span",null,e("头像URL"),":"),onChange:e=>m(e.target.value),value:p})))}const{TabPane:ho}=Bt;function po(){const{t:e}=Fr(),{tab:t}=q(),n=w();return d.createElement(Wi,{title:e("个人中心"),hideCluster:!0},d.createElement(Bt,{activeKey:t,className:"profile",onChange:e=>{n.push("/account/profile/"+e)}},d.createElement(ho,{tab:e("personalInfo"),key:"info"},d.createElement(uo,null)),d.createElement(ho,{tab:e("修改密码"),key:"pwd"},d.createElement(lo,null))))}const fo=function(e,t){return ii(`/api/n9e/busi-group/${e}/boards`,{method:Kr.Post,data:t}).then((e=>e.dat))},mo=function(e){return ii("/api/n9e/boards",{method:Kr.Delete,data:{ids:e}})},go=function(e){return ii(`/api/n9e/board/${e}`,{method:Kr.Get}).then((e=>e.dat))},vo=function(e,t){return ii(`/api/n9e/board/${e}`,{method:Kr.Put,data:t})},yo=function(e,t){return ii(`/api/n9e/board/${e}/configs`,{method:Kr.Put,data:t})},xo=function(e,t){return ii(`/api/n9e/dashboard/${e}/migrate`,{method:Kr.Put,data:t})};function Eo(e){return function(t){const n=document.createElement("div");function r(){K.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),K.render(d.createElement(e,s({},i)),n),{destroy:r}}}const bo={labelCol:{span:4},wrapperCol:{span:16}},Co={crate:"创建新监控大盘",edit:"编辑监控大盘"};var To=Eo((function(e){const{mode:t,initialValues:n={},visible:r,busiId:i,refreshList:a,destroy:o}=e,[c]=Et.useForm();return d.createElement(Ot,{title:Co[t],visible:r,onOk:async()=>{const e=await c.validateFields();"edit"===t?(await vo(n.id,{name:e.name,tags:S.join(e.tags," ")}),gt.success("编辑大盘成功")):"crate"===t&&(await fo(i,{name:e.name,tags:S.join(e.tags," "),configs:JSON.stringify({var:[],panels:[],version:"2.0.0"})}),gt.success("新建大盘成功")),a(),o()},onCancel:()=>{o()},destroyOnClose:!0},d.createElement(Et,l(s({},bo),{form:c,preserve:!1,initialValues:n}),d.createElement(Et.Item,{label:"大盘名称",name:"name",wrapperCol:{span:24},rules:[{required:!0,message:"请输入大盘名称"}]},d.createElement(bt,null)),d.createElement(Et.Item,{wrapperCol:{span:24},label:"分类标签",name:"tags"},d.createElement(It,{mode:"tags",dropdownStyle:{display:"none"},placeholder:"请输入分类标签(请用回车分割)"})),d.createElement(Et.Item,{name:"id",hidden:!0},d.createElement(bt,null))))})),wo={exports:{}};var So={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16};var ko="object"==typeof process&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=So,r=ko,i=(t=e.exports={}).re=[],a=t.src=[],o=t.t={};let s=0;const l=(e,t,n)=>{const l=s++;r(l,t),o[e]=l,a[l]=t,i[l]=new RegExp(t,n?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${a[o.NUMERICIDENTIFIER]}|${a[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${a[o.NUMERICIDENTIFIERLOOSE]}|${a[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${a[o.PRERELEASEIDENTIFIER]}(?:\\.${a[o.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${a[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[o.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${a[o.BUILDIDENTIFIER]}(?:\\.${a[o.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${a[o.MAINVERSION]}${a[o.PRERELEASE]}?${a[o.BUILD]}?`),l("FULL",`^${a[o.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${a[o.MAINVERSIONLOOSE]}${a[o.PRERELEASELOOSE]}?${a[o.BUILD]}?`),l("LOOSE",`^${a[o.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${a[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${a[o.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:${a[o.PRERELEASE]})?${a[o.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:${a[o.PRERELEASELOOSE]})?${a[o.BUILD]}?)?)?`),l("XRANGE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",a[o.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${a[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${a[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${a[o.LONECARET]}${a[o.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${a[o.LONECARET]}${a[o.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${a[o.GTLT]}\\s*(${a[o.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]}|${a[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${a[o.XRANGEPLAIN]})\\s+-\\s+(${a[o.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${a[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[o.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0.0.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(wo,wo.exports);const _o=["includePrerelease","loose","rtl"];var Ao=e=>e?"object"!=typeof e?{loose:!0}:_o.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};const Oo=/^[0-9]+$/,Io=(e,t)=>{const n=Oo.test(e),r=Oo.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var Mo={compareIdentifiers:Io,rcompareIdentifiers:(e,t)=>Io(t,e)};const No=ko,{MAX_LENGTH:Fo,MAX_SAFE_INTEGER:Lo}=So,{re:Po,t:Ro}=wo.exports,Do=Ao,{compareIdentifiers:Bo}=Mo;class zo{constructor(e,t){if(t=Do(t),e instanceof zo){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>Fo)throw new TypeError(`version is longer than ${Fo} characters`);No("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?Po[Ro.LOOSE]:Po[Ro.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Lo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lo||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<Lo)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(No("SemVer.compare",this.version,this.options,e),!(e instanceof zo)){if("string"==typeof e&&e===this.version)return 0;e=new zo(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof zo||(e=new zo(e,this.options)),Bo(this.major,e.major)||Bo(this.minor,e.minor)||Bo(this.patch,e.patch)}comparePre(e){if(e instanceof zo||(e=new zo(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(No("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Bo(n,r)}while(++t)}compareBuild(e){e instanceof zo||(e=new zo(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(No("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Bo(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var Ho=zo;const{MAX_LENGTH:jo}=So,{re:Go,t:$o}=wo.exports,Yo=Ho,Uo=Ao;var Vo=(e,t)=>{if(t=Uo(t),e instanceof Yo)return e;if("string"!=typeof e)return null;if(e.length>jo)return null;if(!(t.loose?Go[$o.LOOSE]:Go[$o.FULL]).test(e))return null;try{return new Yo(e,t)}catch(n){return null}};const Wo=Vo;var Xo=(e,t)=>{const n=Wo(e,t);return n?n.version:null};const qo=Vo;var Ko=(e,t)=>{const n=qo(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};const Qo=Ho;var Zo=(e,t,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new Qo(e,n).inc(t,r).version}catch(i){return null}};const Jo=Ho;var es=(e,t,n)=>new Jo(e,n).compare(new Jo(t,n));const ts=es;var ns=(e,t,n)=>0===ts(e,t,n);const rs=Vo,is=ns;var as=(e,t)=>{if(is(e,t))return null;{const n=rs(e),r=rs(t),i=n.prerelease.length||r.prerelease.length,a=i?"pre":"",o=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return a+e;return o}};const os=Ho;var ss=(e,t)=>new os(e,t).major;const ls=Ho;var cs=(e,t)=>new ls(e,t).minor;const us=Ho;var hs=(e,t)=>new us(e,t).patch;const ps=Vo;var ds=(e,t)=>{const n=ps(e,t);return n&&n.prerelease.length?n.prerelease:null};const fs=es;var ms=(e,t,n)=>fs(t,e,n);const gs=es;var vs=(e,t)=>gs(e,t,!0);const ys=Ho;var xs=(e,t,n)=>{const r=new ys(e,n),i=new ys(t,n);return r.compare(i)||r.compareBuild(i)};const Es=xs;var bs=(e,t)=>e.sort(((e,n)=>Es(e,n,t)));const Cs=xs;var Ts=(e,t)=>e.sort(((e,n)=>Cs(n,e,t)));const ws=es;var Ss=(e,t,n)=>ws(e,t,n)>0;const ks=es;var _s=(e,t,n)=>ks(e,t,n)<0;const As=es;var Os=(e,t,n)=>0!==As(e,t,n);const Is=es;var Ms=(e,t,n)=>Is(e,t,n)>=0;const Ns=es;var Fs=(e,t,n)=>Ns(e,t,n)<=0;const Ls=ns,Ps=Os,Rs=Ss,Ds=Ms,Bs=_s,zs=Fs;var Hs=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Ls(e,n,r);case"!=":return Ps(e,n,r);case">":return Rs(e,n,r);case">=":return Ds(e,n,r);case"<":return Bs(e,n,r);case"<=":return zs(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};const js=Ho,Gs=Vo,{re:$s,t:Ys}=wo.exports;var Us=(e,t)=>{if(e instanceof js)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=$s[Ys.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),$s[Ys.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;$s[Ys.COERCERTL].lastIndex=-1}else n=e.match($s[Ys.COERCE]);return null===n?null:Gs(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};class Vs{constructor(e,t){if(t=qs(t),e instanceof Vs)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Vs(e.raw,t);if(e instanceof Ks)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!il(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&al(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=Xs.get(t);if(n)return n;const r=this.options.loose,i=r?Js[el.HYPHENRANGELOOSE]:Js[el.HYPHENRANGE];e=e.replace(i,vl(this.options.includePrerelease)),Qs("hyphen replace",e),e=e.replace(Js[el.COMPARATORTRIM],tl),Qs("comparator trim",e,Js[el.COMPARATORTRIM]),e=(e=(e=e.replace(Js[el.TILDETRIM],nl)).replace(Js[el.CARETTRIM],rl)).split(/\s+/).join(" ");const a=r?Js[el.COMPARATORLOOSE]:Js[el.COMPARATOR],o=e.split(" ").map((e=>sl(e,this.options))).join(" ").split(/\s+/).map((e=>gl(e,this.options))).filter(this.options.loose?e=>!!e.match(a):()=>!0).map((e=>new Ks(e,this.options)));o.length;const s=new Map;for(const c of o){if(il(c))return[c];s.set(c.value,c)}s.size>1&&s.has("")&&s.delete("");const l=[...s.values()];return Xs.set(t,l),l}intersects(e,t){if(!(e instanceof Vs))throw new TypeError("a Range is required");return this.set.some((n=>ol(n,t)&&e.set.some((e=>ol(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new Zs(e,this.options)}catch(t){return!1}for(let n=0;n<this.set.length;n++)if(yl(this.set[n],e,this.options))return!0;return!1}}var Ws=Vs;const Xs=new en({max:1e3}),qs=Ao,Ks=bl,Qs=ko,Zs=Ho,{re:Js,t:el,comparatorTrimReplace:tl,tildeTrimReplace:nl,caretTrimReplace:rl}=wo.exports,il=e=>"<0.0.0-0"===e.value,al=e=>""===e.value,ol=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},sl=(e,t)=>(Qs("comp",e,t),e=hl(e,t),Qs("caret",e),e=cl(e,t),Qs("tildes",e),e=dl(e,t),Qs("xrange",e),e=ml(e,t),Qs("stars",e),e),ll=e=>!e||"x"===e.toLowerCase()||"*"===e,cl=(e,t)=>e.trim().split(/\s+/).map((e=>ul(e,t))).join(" "),ul=(e,t)=>{const n=t.loose?Js[el.TILDELOOSE]:Js[el.TILDE];return e.replace(n,((t,n,r,i,a)=>{let o;return Qs("tilde",e,t,n,r,i,a),ll(n)?o="":ll(r)?o=`>=${n}.0.0 <${+n+1}.0.0-0`:ll(i)?o=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:a?(Qs("replaceTilde pr",a),o=`>=${n}.${r}.${i}-${a} <${n}.${+r+1}.0-0`):o=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,Qs("tilde return",o),o}))},hl=(e,t)=>e.trim().split(/\s+/).map((e=>pl(e,t))).join(" "),pl=(e,t)=>{Qs("caret",e,t);const n=t.loose?Js[el.CARETLOOSE]:Js[el.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,a,o)=>{let s;return Qs("caret",e,t,n,i,a,o),ll(n)?s="":ll(i)?s=`>=${n}.0.0${r} <${+n+1}.0.0-0`:ll(a)?s="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:o?(Qs("replaceCaret pr",o),s="0"===n?"0"===i?`>=${n}.${i}.${a}-${o} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}-${o} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a}-${o} <${+n+1}.0.0-0`):(Qs("no pr"),s="0"===n?"0"===i?`>=${n}.${i}.${a}${r} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a} <${+n+1}.0.0-0`),Qs("caret return",s),s}))},dl=(e,t)=>(Qs("replaceXRanges",e,t),e.split(/\s+/).map((e=>fl(e,t))).join(" ")),fl=(e,t)=>{e=e.trim();const n=t.loose?Js[el.XRANGELOOSE]:Js[el.XRANGE];return e.replace(n,((n,r,i,a,o,s)=>{Qs("xRange",e,n,r,i,a,o,s);const l=ll(i),c=l||ll(a),u=c||ll(o),h=u;return"="===r&&h&&(r=""),s=t.includePrerelease?"-0":"",l?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(c&&(a=0),o=0,">"===r?(r=">=",c?(i=+i+1,a=0,o=0):(a=+a+1,o=0)):"<="===r&&(r="<",c?i=+i+1:a=+a+1),"<"===r&&(s="-0"),n=`${r+i}.${a}.${o}${s}`):c?n=`>=${i}.0.0${s} <${+i+1}.0.0-0`:u&&(n=`>=${i}.${a}.0${s} <${i}.${+a+1}.0-0`),Qs("xRange return",n),n}))},ml=(e,t)=>(Qs("replaceStars",e,t),e.trim().replace(Js[el.STAR],"")),gl=(e,t)=>(Qs("replaceGTE0",e,t),e.trim().replace(Js[t.includePrerelease?el.GTE0PRE:el.GTE0],"")),vl=e=>(t,n,r,i,a,o,s,l,c,u,h,p,d)=>`${n=ll(r)?"":ll(i)?`>=${r}.0.0${e?"-0":""}`:ll(a)?`>=${r}.${i}.0${e?"-0":""}`:o?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=ll(c)?"":ll(u)?`<${+c+1}.0.0-0`:ll(h)?`<${c}.${+u+1}.0-0`:p?`<=${c}.${u}.${h}-${p}`:e?`<${c}.${u}.${+h+1}-0`:`<=${l}`}`.trim(),yl=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(Qs(e[n].semver),e[n].semver!==Ks.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},xl=Symbol("SemVer ANY");class El{static get ANY(){return xl}constructor(e,t){if(t=Cl(t),e instanceof El){if(e.loose===!!t.loose)return e;e=e.value}kl("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===xl?this.value="":this.value=this.operator+this.semver.version,kl("comp",this)}parse(e){const t=this.options.loose?Tl[wl.COMPARATORLOOSE]:Tl[wl.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new _l(n[2],this.options.loose):this.semver=xl}toString(){return this.value}test(e){if(kl("Comparator.test",e,this.options.loose),this.semver===xl||e===xl)return!0;if("string"==typeof e)try{e=new _l(e,this.options)}catch(t){return!1}return Sl(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof El))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new Al(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new Al(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),o=Sl(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=Sl(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&a||o||s}}var bl=El;const Cl=Ao,{re:Tl,t:wl}=wo.exports,Sl=Hs,kl=ko,_l=Ho,Al=Ws,Ol=Ws;var Il=(e,t,n)=>{try{t=new Ol(t,n)}catch(r){return!1}return t.test(e)};const Ml=Ws;var Nl=(e,t)=>new Ml(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));const Fl=Ho,Ll=Ws;var Pl=(e,t,n)=>{let r=null,i=null,a=null;try{a=new Ll(t,n)}catch(o){return null}return e.forEach((e=>{a.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new Fl(r,n)))})),r};const Rl=Ho,Dl=Ws;var Bl=(e,t,n)=>{let r=null,i=null,a=null;try{a=new Dl(t,n)}catch(o){return null}return e.forEach((e=>{a.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new Rl(r,n)))})),r};const zl=Ho,Hl=Ws,jl=Ss;var Gl=(e,t)=>{e=new Hl(e,t);let n=new zl("0.0.0");if(e.test(n))return n;if(n=new zl("0.0.0-0"),e.test(n))return n;n=null;for(let r=0;r<e.set.length;++r){const t=e.set[r];let i=null;t.forEach((e=>{const t=new zl(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!jl(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!jl(n,i)||(n=i)}return n&&e.test(n)?n:null};const $l=Ws;var Yl=(e,t)=>{try{return new $l(e,t).range||"*"}catch(n){return null}};const Ul=Ho,Vl=bl,{ANY:Wl}=Vl,Xl=Ws,ql=Il,Kl=Ss,Ql=_s,Zl=Fs,Jl=Ms;var ec=(e,t,n,r)=>{let i,a,o,s,l;switch(e=new Ul(e,r),t=new Xl(t,r),n){case">":i=Kl,a=Zl,o=Ql,s=">",l=">=";break;case"<":i=Ql,a=Jl,o=Kl,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ql(e,t,r))return!1;for(let c=0;c<t.set.length;++c){const n=t.set[c];let u=null,h=null;if(n.forEach((e=>{e.semver===Wl&&(e=new Vl(">=0.0.0")),u=u||e,h=h||e,i(e.semver,u.semver,r)?u=e:o(e.semver,h.semver,r)&&(h=e)})),u.operator===s||u.operator===l)return!1;if((!h.operator||h.operator===s)&&a(e,h.semver))return!1;if(h.operator===l&&o(e,h.semver))return!1}return!0};const tc=ec;var nc=(e,t,n)=>tc(e,t,">",n);const rc=ec;var ic=(e,t,n)=>rc(e,t,"<",n);const ac=Ws;var oc=(e,t,n)=>(e=new ac(e,n),t=new ac(t,n),e.intersects(t));const sc=Il,lc=es;const cc=Ws,uc=bl,{ANY:hc}=uc,pc=Il,dc=es,fc=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===hc){if(1===t.length&&t[0].semver===hc)return!0;e=n.includePrerelease?[new uc(">=0.0.0-0")]:[new uc(">=0.0.0")]}if(1===t.length&&t[0].semver===hc){if(n.includePrerelease)return!0;t=[new uc(">=0.0.0")]}const r=new Set;let i,a,o,s,l,c,u;for(const d of e)">"===d.operator||">="===d.operator?i=mc(i,d,n):"<"===d.operator||"<="===d.operator?a=gc(a,d,n):r.add(d.semver);if(r.size>1)return null;if(i&&a){if(o=dc(i.semver,a.semver,n),o>0)return null;if(0===o&&(">="!==i.operator||"<="!==a.operator))return null}for(const d of r){if(i&&!pc(d,String(i),n))return null;if(a&&!pc(d,String(a),n))return null;for(const e of t)if(!pc(d,String(e),n))return!1;return!0}let h=!(!a||n.includePrerelease||!a.semver.prerelease.length)&&a.semver,p=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;h&&1===h.prerelease.length&&"<"===a.operator&&0===h.prerelease[0]&&(h=!1);for(const d of t){if(u=u||">"===d.operator||">="===d.operator,c=c||"<"===d.operator||"<="===d.operator,i)if(p&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===p.major&&d.semver.minor===p.minor&&d.semver.patch===p.patch&&(p=!1),">"===d.operator||">="===d.operator){if(s=mc(i,d,n),s===d&&s!==i)return!1}else if(">="===i.operator&&!pc(i.semver,String(d),n))return!1;if(a)if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),"<"===d.operator||"<="===d.operator){if(l=gc(a,d,n),l===d&&l!==a)return!1}else if("<="===a.operator&&!pc(a.semver,String(d),n))return!1;if(!d.operator&&(a||i)&&0!==o)return!1}return!(i&&c&&!a&&0!==o)&&(!(a&&u&&!i&&0!==o)&&(!p&&!h))},mc=(e,t,n)=>{if(!e)return t;const r=dc(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},gc=(e,t,n)=>{if(!e)return t;const r=dc(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};var vc=(e,t,n={})=>{if(e===t)return!0;e=new cc(e,n),t=new cc(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=fc(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0};const yc=wo.exports;var xc,Ec={re:yc.re,src:yc.src,tokens:yc.t,SEMVER_SPEC_VERSION:So.SEMVER_SPEC_VERSION,SemVer:Ho,compareIdentifiers:Mo.compareIdentifiers,rcompareIdentifiers:Mo.rcompareIdentifiers,parse:Vo,valid:Xo,clean:Ko,inc:Zo,diff:as,major:ss,minor:cs,patch:hs,prerelease:ds,compare:es,rcompare:ms,compareLoose:vs,compareBuild:xs,sort:bs,rsort:Ts,gt:Ss,lt:_s,eq:ns,neq:Os,gte:Ms,lte:Fs,cmp:Hs,coerce:Us,Comparator:bl,Range:Ws,satisfies:Il,toComparators:Nl,maxSatisfying:Pl,minSatisfying:Bl,minVersion:Gl,validRange:Yl,outside:ec,gtr:nc,ltr:ic,intersects:oc,simplifyRange:(e,t,n)=>{const r=[];let i=null,a=null;const o=e.sort(((e,t)=>lc(e,t,n)));for(const u of o){sc(u,t,n)?(a=u,i||(i=u)):(a&&r.push([i,a]),a=null,i=null)}i&&r.push([i,null]);const s=[];for(const[u,h]of r)u===h?s.push(u):h||u!==o[0]?h?u===o[0]?s.push(`<=${h}`):s.push(`${u} - ${h}`):s.push(`>=${u}`):s.push("*");const l=s.join(" || "),c="string"==typeof t.raw?t.raw:String(t);return l.length<c.length?l:t},subset:vc},bc=new Uint8Array(16);function Cc(){if(!xc&&!(xc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xc(bc)}var Tc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function wc(e){return"string"==typeof e&&Tc.test(e)}for(var Sc=[],kc=0;kc<256;++kc)Sc.push((kc+256).toString(16).substr(1));function _c(e,t,n){var r=(e=e||{}).random||(e.rng||Cc)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Sc[e[t+0]]+Sc[e[t+1]]+Sc[e[t+2]]+Sc[e[t+3]]+"-"+Sc[e[t+4]]+Sc[e[t+5]]+"-"+Sc[e[t+6]]+Sc[e[t+7]]+"-"+Sc[e[t+8]]+Sc[e[t+9]]+"-"+Sc[e[t+10]]+Sc[e[t+11]]+Sc[e[t+12]]+Sc[e[t+13]]+Sc[e[t+14]]+Sc[e[t+15]]).toLowerCase();if(!wc(n))throw TypeError("Stringified UUID is invalid");return n}(r)}const Ac=[{label:"green / orange",value:["#83c898","#c2c2c2","#fc653f"]},{label:"yellow / green",value:["#f0ee6e","#6ba261","#306d52"]},{label:"warm",value:["#ffeda0","#fc4e2a","#800026"]},{label:"cool",value:["#c7f1ff","#42a1fa","#083294"]},{label:"plasma",value:["#f0f921","#b12a90","#0d0887"]},{label:"viridis",value:["#fde725","#2a788e","#440154"]}],Oc=[{type:"timeseries",name:"时间序列图"},{type:"stat",name:"指标值"},{type:"table",name:"表格"},{type:"pie",name:"饼图"},{type:"hexbin",name:"蜂窝图"}],Ic={lastNotNull:{name:"最后一个非空值"},last:{name:"最后一个值"},firstNotNull:{name:"第一个非空值"},first:{name:"第一个值"},min:{name:"最小值"},max:{name:"最大值"},avg:{name:"平均值"},sum:{name:"总和"},count:{name:"数量"}},Mc={version:"1.0.0",type:"timeseries",options:{tooltip:{mode:"all",sort:"none"},legend:{displayMode:"hidden"}},custom:{},overrides:[{}]},Nc={timeseries:{drawStyle:"lines",lineInterpolation:"smooth",fillOpacity:.5,stack:"off"},stat:{textMode:"valueAndName",colorMode:"value",calc:"lastNotNull",colSpan:1,textSize:{}},pie:{textMode:"valueAndName",colorMode:"value",calc:"lastNotNull",textSize:{},legengPosition:"right"},table:{showHeader:!0,calc:"lastNotNull",displayMode:"seriesToRows"},hexbin:{calc:"lastNotNull",colorRange:S.join(Ac[0].value,","),colorDomainAuto:!0,colorDomain:[],reverseColorOrder:!1}},Fc=["hidden","top","left","right","bottom"],Lc="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split("");function Pc(e){if(e)try{return JSON.parse(e)}catch(eh){console.error(eh)}return{}}function Rc(e){let t=S.cloneDeep(e);return Ec.valid(t.version)||(t=function(e){var t,n,r,i;let a=S.cloneDeep(e);const o=S.compact([null==a?void 0:a.yplotline1,null==a?void 0:a.yplotline2]),s=["yellow","red"],l=a.link?[a.link]:[];var c;return a={version:"2.0.0",name:a.name,type:"timeseries",layout:a.layout,targets:S.map(a.QL,((e,t)=>({refId:Lc[t],expr:null==e?void 0:e.PromQL,legendFormat:null==e?void 0:e.Legend}))),options:{standardOptions:{util:(c=null==(t=null==a?void 0:a.highLevelConfig)?void 0:t.formatUnit,1e3===c?"bytesSI":1024===c?"bytesIEC":"humantime"===c?"humantimeSeconds":void 0)},legend:{displayMode:(null==(n=null==a?void 0:a.highLevelConfig)?void 0:n.legend)?"list":"hidden"},tooltip:{mode:(null==(r=null==a?void 0:a.highLevelConfig)?void 0:r.shared)?"all":"single",sort:null==(i=null==a?void 0:a.highLevelConfig)?void 0:i.sharedSortDirection},thresholds:{style:"line",steps:S.map(o,((e,t)=>({color:s[t],value:e})))}},links:S.map(l,(e=>({title:"链接",url:e}))),custom:Nc.timeseries},a}(t)),t}function Dc(e){const t=Pc(e.configs),n=S.sortBy(e.chart_groups,["weight"]),r=[];let i=0,a=0;return S.forEach(n,(e=>{const t=_c();r.push({id:t,type:"row",name:e.name,layout:{h:1,w:24,x:0,y:i,i:t},collapsed:!0}),i+=1,a+=1;const n=e.charts;S.forEach(n,(e=>{const t=_c(),n=Rc(Pc(e.configs)),o=S.floor(150*n.layout.h/40),c=i+n.layout.y;r.push(l(s({},n),{id:t,layout:l(s({},n.layout),{i:t,y:c,h:o})})),a=Math.max(a,c+o)})),i=a})),{name:e.name,tags:S.isArray(e.tags)?S.join(e.tags," "):e.tags,configs:JSON.stringify(l(s({},t),{version:"2.0.0",panels:r}))}}function Bc(e){if(e)try{return JSON.parse(e)}catch(eh){console.error(eh)}return{}}function zc(e){return S.chain(e).filter((e=>"link"===e.type)).map((e=>({title:e.title,url:e.url,targetBlank:e.targetBlank}))).value()}function Hc(e){var t,n;if("graph"===e.type)return Mc.options;const{fieldConfig:r,options:i}=e,a=null==r?void 0:r.defaults;if(!a)return{};const o={percent:"percent",percentunit:"percentUnit",bytes:"bytesIEC",bits:"bytesIEC",decbytes:"bytesSI",decbits:"bitsSI",s:"seconds",ms:"milliseconds"};return{valueMappings:a.mappings,thresholds:{mode:a.thresholds.mode,style:"line",steps:a.thresholds.steps},standardOptions:{util:o[a.unit]?o[a.unit]:"none",min:a.min,max:a.max,decimals:a.decimals},legend:{displayMode:"hidden"===(null==(t=null==i?void 0:i.legend)?void 0:t.displayMode)?"hidden":"list",placement:null==(n=null==i?void 0:i.legend)?void 0:n.placement},tooltip:{mode:"single"===i.tooltip?"single":"multi"}}}function jc(e){const t=S.get(e,"fieldConfig.defaults.custom.lineInterpolation"),n=S.get(e,"fieldConfig.defaults.custom.fillOpacity"),r=S.get(e,"fieldConfig.defaults.custom.stacking.mode");return{version:"2.0.0",drawStyle:"barchart"===e.type?"bars":"lines",lineInterpolation:"smooth"===t?"smooth":"linear",fillOpacity:n?n/100:.5,stack:"normal"===r?"normal":"off"}}function Gc(e){return{version:"2.0.0",calc:S.get(e,"options.reduceOptions.calcs[0]"),legengPosition:"hidden"}}function $c(e){return{version:"2.0.0",textMode:"value",calc:S.get(e,"options.reduceOptions.calcs[0]"),colorMode:"value"}}function Yc(e){const t={graph:{type:"timeseries",fn:jc},timeseries:{type:"timeseries",fn:jc},barchart:{type:"timeseries",fn:jc},piechart:{type:"pie",fn:Gc},gauge:{type:"stat",fn:$c},stat:{type:"stat",fn:$c}};return S.chain(e).filter((e=>!e.targets||S.every(e.targets,(e=>!!e.expr)))).map((e=>{const n=_c();return"row"===e.type?{version:"2.0.0",id:n,type:"row",name:e.title,collapsed:!e.collapsed,layout:l(s({},e.gridPos),{i:n}),panels:Yc(e.panels)}:{version:"2.0.0",id:n,type:t[e.type]?t[e.type].type:"unknown",name:e.title,description:e.description,links:zc(e.links),layout:l(s({},e.gridPos),{i:n}),targets:S.chain(e.targets).filter((e=>!0!==e.hide)).map((e=>({refId:e.refId,expr:S.replace(e.expr,"$__rate_interval","5m"),legend:e.legendFormat}))).value(),options:Hc(e),custom:t[e.type]?t[e.type].fn(e):{}}})).value()}function Uc(e){return JSON.stringify({name:e.name,tags:e.tags,configs:Bc(e.configs)},null,4)}function Vc(e){let t=Bc(e);return t=S.isArray(t)?S.head(t):t,!function(e){let t=S.cloneDeep(e);const n=S.get(t,"configs");if(!n)return;const r=S.get(n,"version");return r?Ec.valid(r):void 0}(t)?t=Dc(t):t.configs=JSON.stringify(t.configs),t}const Wc=Bt.TabPane,Xc=()=>d.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1912",width:"1em",height:"1em",fill:"currentColor"},d.createElement("path",{d:"M511.107677 501.222539c-24.585955 1.376347-37.904285 13.669324-39.952944 36.879955l78.881558 0C548.670178 514.892887 535.693632 502.599909 511.107677 501.222539z","p-id":"1913"}),d.createElement("path",{d:"M771.311931 586.250074c-0.682545 10.926864 7.853875 16.391319 25.610284 16.391319 30.05041-2.048659 46.440705-16.391319 49.172933-43.025932l0-11.268648c-8.878205 5.474688-22.537296 10.244318-40.977273 14.341636C782.581602 566.786791 771.311931 574.640666 771.311931 586.250074z","p-id":"1914"}),d.createElement("path",{d:"M327.734276 505.32088c-22.537296 1.376347-34.147728 14.693654-34.830273 39.952944l0 14.341636c0.682545 25.269523 11.951193 38.58683 33.805944 39.952944 23.903409 0.682545 35.854603-16.038278 35.854603-50.197262C361.882004 521.370415 350.271572 506.697227 327.734276 505.32088z","p-id":"1915"}),d.createElement("path",{d:"M896.519584 304.875662 225.495754 304.875662c-35.270295 0-63.86454 28.593222-63.86454 63.865563l0 227.13509-84.044138 76.517721 0.213871 0.703011c-7.286963 4.436032-12.410658 12.094456-12.410658 21.249977 0 13.96199 11.317767 25.279756 25.279756 25.279756 0.444115 0 0.814552-0.230244 1.25355-0.25378l0.075725 0.25378 133.496433 0 103.557564 0 567.466266 0c35.270295 0 63.86454-28.593222 63.86454-63.86454L960.384124 368.740202C960.3831 333.468884 931.789878 304.875662 896.519584 304.875662zM341.052606 631.325689c-21.171182 0-36.879955-8.195659-47.12325-24.585955l0 20.488637-44.050262 0L249.879094 401.853367l44.050262 0 0 96.296183c10.244318-17.756409 27.318182-26.635637 51.221592-26.635637 40.293705 2.048659 61.124126 27.659967 62.49024 76.831876C407.640164 603.665723 385.443629 631.325689 341.052606 631.325689zM513.156336 631.325689c-54.636365-2.048659-82.978876-27.659967-85.027535-76.831876 2.048659-53.270251 29.025057-80.930217 80.930217-82.978876 55.31891 0 82.978876 27.659967 82.978876 82.978876l0 10.244318L472.179063 564.738132c1.366114 23.220864 15.025205 35.513842 40.977273 36.878932 18.439978 0 30.391171-6.819313 35.854603-20.488637l46.098921 5.121648C582.817905 616.300484 555.499723 631.325689 513.156336 631.325689zM679.114089 631.325689c-31.4155 0.672312-46.782489-14.693654-46.098921-46.098921l0-77.856205-25.610284 0 0-32.781614 25.610284 0 0-51.221592 42.001603-9.219989 0 60.441581 36.879955 0 0 32.781614-36.879955 0 0 68.63724c0 15.719007 6.487761 23.561625 19.464307 23.561625 4.780887 0 9.219989-1.366114 13.317307-4.097318l9.219989 27.659967C708.822714 628.593462 696.187953 631.325689 679.114089 631.325689zM852.242148 627.227348c-4.097318-6.147-6.487761-13.659091-7.17133-22.537296-14.341636 17.062608-36.538171 25.952068-66.587558 26.635637-30.732955-2.048659-47.124274-16.391319-49.172933-43.025932 0-28.000728 19.122523-44.392046 57.367569-49.172933 30.05041-6.147 48.831148-11.268648 56.343239-15.365966 1.366114-15.70775-9.219989-23.209608-31.757285-22.537296-19.122523 0-31.074739 7.17133-35.854603 21.512966l-40.977273-6.147c8.195659-30.05041 33.465183-45.074591 75.807546-45.074591 52.587706-1.366114 77.856205 20.146852 75.807546 64.538899 0 15.025205 0 35.18229 0 60.441581 0 12.292977 2.732228 22.537296 8.195659 30.732955L852.242148 627.228371z","p-id":"1916"})),qc=e=>d.createElement(T,s({component:Xc},e));var Kc=Eo((function(e){const{visible:t,destroy:n,busiId:r,type:i,refreshList:a}=e,[o,c]=f.exports.useState(i),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState(""),g=S.filter(u,(e=>!p||S.includes(e.name,p)));return f.exports.useEffect((()=>{ii("/api/n9e/dashboards/builtin/list",{method:Kr.Get}).then((e=>e.dat)).then((e=>{h(S.map(e,(e=>({name:e}))))}))}),[]),d.createElement(Ot,{className:"dashboard-import-modal",title:d.createElement(Bt,{activeKey:o,onChange:e=>c(e),className:"custom-import-alert-title"},d.createElement(Wc,{tab:"导入内置大盘模块",key:"BuiltIn"}),d.createElement(Wc,{tab:"导入大盘JSON",key:"Import"}),d.createElement(Wc,{tab:d.createElement("div",{style:{position:"relative"}},"导入Grafana大盘JSON",d.createElement(qc,{style:{fontSize:24,position:"absolute",top:-12,color:"#1890ff"}})),key:"ImportGrafana"})),visible:t,onCancel:()=>{a(),n()},footer:null},"BuiltIn"===o?d.createElement(d.Fragment,null,d.createElement(bt,{prefix:d.createElement(N,null),placeholder:"请输入要查询的大盘名称",value:p,onChange:e=>{m(e.target.value)}}),d.createElement(Nt,{style:{marginTop:10},rowKey:"name",size:"small",dataSource:g,columns:[{title:"大盘名称",dataIndex:"name"},{title:"操作",render:e=>d.createElement("a",{onClick:()=>{var t;(t=e.name,ii(`/api/n9e/builtin-board/${t}`,{method:Kr.Get}).then((e=>e.dat))).then((e=>{fo(r,Vc(e)).then((()=>{gt.success("导入成功")}))}))}},"导入")}],pagination:!(g.length<5)&&{pageSize:5}})):null,"Import"===o?d.createElement(Et,{layout:"vertical",onFinish:e=>{const t=Vc(e.import);fo(r,l(s({},t),{configs:t.configs})).then((()=>{gt.success("导入成功"),a(),n()}))}},d.createElement(Et.Item,{label:"大盘JSON",name:"import",rules:[{required:!0,message:"请输入大盘JSON"}]},d.createElement(bt.TextArea,{className:"code-area",placeholder:"请输入大盘 JSON",rows:16})),d.createElement(Et.Item,null,d.createElement(yt,{type:"primary",htmlType:"submit"},"导入"))):null,"ImportGrafana"===o?d.createElement(Et,{layout:"vertical",onFinish:e=>{const t=function(e){var t;return{name:e.title,configs:{version:"2.0.0",links:zc(e.links),var:(t=e.templating,S.chain(t.list).filter((e=>"query"===e.type)).map((e=>({name:e.name,definition:e.definition||S.get(e,"query.query"),allOption:e.includeAll,multi:e.multi}))).value()),panels:Yc(e.panels)}}}(Bc(e.import));fo(r,l(s({},t),{tags:"",configs:JSON.stringify(t.configs)})).then((()=>{gt.success("导入成功"),a(),n()}))}},d.createElement("div",{style:{marginBottom:10}},d.createElement(zt,{message:"目前只支持导入 v8+ 版本的大盘配置，导入完的图表只支持夜莺目前支持的图表类型和功能",type:"info"})),d.createElement(Et.Item,{label:"大盘JSON",name:"import",rules:[{required:!0,message:"请输入大盘JSON"}]},d.createElement(bt.TextArea,{className:"code-area",placeholder:"请输入大盘 JSON",rows:16})),d.createElement(Et.Item,null,d.createElement(yt,{type:"primary",htmlType:"submit"},"导入"))):null)}));function Qc(e){const{busiId:t,selectRowKeys:n,refreshList:r,searchVal:i,onSearchChange:a}=e;return d.createElement(d.Fragment,null,d.createElement("div",{className:"table-handle"},d.createElement("div",{className:"table-handle-search"},d.createElement(bt,{className:"searchInput",value:i,onChange:e=>{a(e.target.value)},prefix:d.createElement(N,null),placeholder:"大盘名称、分类标签"})),d.createElement("div",{className:"table-handle-buttons"},d.createElement(yt,{type:"primary",onClick:()=>{To({mode:"crate",busiId:t,refreshList:r})},ghost:!0},"新建大盘"),d.createElement("div",{className:"table-more-options"},d.createElement(Tt,{overlay:d.createElement("ul",{className:"ant-dropdown-menu"},d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{Kc({busiId:t,type:"BuiltIn",refreshList:r})}},d.createElement("span",null,"导入监控大盘")),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{n.length?Ot.confirm({title:"是否批量删除大盘?",onOk:async()=>{mo(n).then((()=>{gt.success("批量删除大盘成功")})),setTimeout((()=>{r()}),500)}}):gt.warning("未选择任何大盘")}},d.createElement("span",null,"批量删除大盘"))),trigger:["click"]},d.createElement(yt,{onClick:e=>e.stopPropagation()},"更多操作",d.createElement(M,{style:{marginLeft:2}})))))))}var Zc=Eo((function(e){const{visible:t,destroy:n}=e,[r,i]=f.exports.useState(e.data);return d.createElement(Ot,{title:"导出大盘",visible:t,onCancel:()=>{n()},footer:null},d.createElement("p",null,d.createElement("a",{onClick:()=>{oi([r],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>si(r,(e=>e))},d.createElement(H,null),"复制JSON内容到剪贴板")),d.createElement(bt.TextArea,{value:r,onChange:e=>{i(e.target.value)},rows:15}))}));function Jc(){const e=w(),[t,n]=f.exports.useState(),[r,i]=f.exports.useState([]),[a,o]=f.exports.useState([]),[c,u]=f.exports.useState(S.uniqueId("refreshKey_")),[h,p]=f.exports.useState("");f.exports.useEffect((()=>{var e;t&&(e=t,ii(`/api/n9e/busi-group/${e}/boards`,{method:Kr.Get}).then((e=>e.dat))).then((e=>{i(e)}))}),[t,c]);const m=S.filter(r,(e=>!h||(S.includes(e.name,h)||S.includes(e.tags,h))));return d.createElement(Wi,{title:"监控大盘",icon:d.createElement(Q,null),hideCluster:!0},d.createElement("div",{style:{display:"flex"}},d.createElement(ya,{busiGroup:{onChange:e=>n(e)}}),t?d.createElement("div",{className:"dashboards-v2"},d.createElement(Qc,{busiId:t,selectRowKeys:a,refreshList:()=>{u(S.uniqueId("refreshKey_"))},searchVal:h,onSearchChange:p}),d.createElement(Nt,{dataSource:m,columns:[{title:"大盘名称",dataIndex:"name",className:"name-column",render:(t,n)=>d.createElement("div",{className:"table-active-text",onClick:()=>e.push(`/dashboard/${n.id}`)},t)},{title:"分类标签",dataIndex:"tags",className:"tags-column",render:e=>d.createElement(d.Fragment,null,S.map(S.split(e," "),((e,t)=>e?d.createElement(At,{color:"blue",key:t,style:{cursor:"pointer"},onClick:()=>{(h.length>0?h.split(" "):[]).includes(e)||p((t=>t?t+" "+e:e))}},e):null)))},{title:"更新时间",width:120,dataIndex:"update_at",render:e=>O.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:"发布人",width:70,dataIndex:"create_by"},{title:"操作",width:"160px",render:(e,n)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{To({mode:"edit",initialValues:l(s({},n),{tags:n.tags?S.split(n.tags," "):void 0}),busiId:t,refreshList:()=>{u(S.uniqueId("refreshKey_"))}})}},"编辑"),d.createElement("div",{className:"table-operator-area-normal",onClick:async()=>{Ot.confirm({title:`是否克隆大盘${n.name}?`,onOk:async()=>{await function(e,t){return ii(`/api/n9e/busi-group/${e}/board/${t}/clone`,{method:Kr.Post})}(t,n.id),gt.success("克隆大盘成功"),u(S.uniqueId("refreshKey_"))},onCancel(){}})}},"克隆"),d.createElement("div",{className:"table-operator-area-normal",onClick:async()=>{const e=await go(n.id);Zc({data:Uc(e)})}},"导出"),d.createElement("div",{className:"table-operator-area-warning",onClick:async()=>{Ot.confirm({title:`是否删除大盘：${n.name}?`,onOk:async()=>{await mo([n.id]),gt.success("删除大盘成功"),u(S.uniqueId("refreshKey_"))},onCancel(){}})}},"删除"))}],rowKey:"id",rowSelection:{selectedRowKeys:a,onChange:e=>{o(e)}}})):d.createElement(xa,{text:"监控大盘"})))}const eu=function(e){return ii("/api/n9e/share-charts",{method:Kr.Post,data:e})};function tu(e){return!!(e&&e.start&&e.end)}const nu=(e,t="s")=>{const{start:n,end:r}=tu(e)?e:((e,t="s")=>{const{num:n,unit:r}=e;let i="s"===t?O().unix():O().valueOf();return{start:"s"===t?O().subtract(n,r).unix():O().subtract(n,r).valueOf(),end:i}})(e,t);return{start:n,end:r}};function ru(e){const{t:t}=Fr(),n=[{num:5,unit:"minutes",description:t("minute")},{num:15,unit:"minutes",description:t("minutes")},{num:30,unit:"minutes",description:t("minutes")},{num:1,unit:"hour",description:t("hour")},{num:2,unit:"hours",description:t("hours")},{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:1,unit:"week",description:t("周")},{num:1,unit:"month",description:t("月")},{num:1,unit:"quarter",description:t("季度")}],{onChange:r,value:i,unit:a="s",showRight:o=!0,placement:s="bottom",leftList:l=n,nullable:c=!1}=e,[u,h]=f.exports.useState(!1),[p,m]=f.exports.useState(O()),[g,v]=f.exports.useState(O()),[y,x]=f.exports.useState(-1),[E,b]=f.exports.useState("选择时间"),C=f.exports.useRef(!1);f.exports.useEffect((()=>{if(i)if(tu(i))i.start>0&&i.end>0&&w(i);else{const e=l.findIndex((({num:e,unit:t})=>e===(null==i?void 0:i.num)&&t===i.unit));x(-1===e?0:e),S(l[e])}else if(!c){const e=localStorage.getItem("relativeDateIndex")?Number(localStorage.getItem("relativeDateIndex")):3;x(e),S(l[e])}}),[JSON.stringify(i)]);const T=(e,n)=>{if(tu(e)){const{start:t,end:r}=e;return O("s"===n?1e3*t:t).format("YYYY.MM.DD HH:mm:ss")+" 至 "+O("s"===n?1e3*r:r).format("YYYY.MM.DD HH:mm:ss")}{const{num:n,description:r}=e;return`${t("最近")} ${n} ${r}`}},w=e=>{const{start:t,end:n}=e;m(O("s"===a?1e3*t:t)),v(O("s"===a?1e3*n:n)),b(T(e,a))};const S=e=>{r&&r(e),b(e?T(e,a):"选择时间")},k=d.createElement("div",{className:"time-range-picker-wrapper"},d.createElement("div",{className:"time-range-picker-left"},l.map((({num:e,unit:n,description:r},i)=>d.createElement(yt,{key:i,type:"link",onClick:()=>(e=>{x(e),localStorage.setItem("relativeDateIndex",e),S(l[e]),h(!1)})(i),className:i===y?"active":""},t("最近"),d.createElement("span",{className:"num"},e),r)))),o&&d.createElement("div",{className:"time-range-picker-right"},d.createElement("p",{className:"title"},t("自定义开始时间")),d.createElement(Ht,{showTime:!0,onChange:(e,t)=>{m(e)},value:p,disabledDate:function(e){return e&&e>O().endOf("seconds")},onOpenChange:e=>{C.current=e}}),d.createElement("p",{className:"title"},t("自定义结束时间")),d.createElement(Ht,{showTime:!0,onChange:(e,t)=>{v(e)},value:g,disabledDate:function(e){return e&&e>O().endOf("seconds")},onOpenChange:e=>{C.current=e}}),d.createElement("div",{className:"footer"},d.createElement(yt,{onClick:()=>h(!1)},t("取消")),d.createElement(yt,{type:"primary",onClick:()=>{h(!1),x(-1),localStorage.setItem("relativeDateIndex",""),S({start:"s"===a?p.unix():p.valueOf(),end:"s"===a?g.unix():g.valueOf()})},disabled:!p||!g||p.endOf("seconds")>=g.endOf("seconds")},t("确定")))));return d.createElement(jt,{trigger:"click",placement:s,content:k,overlayClassName:"time-range-picker",visible:u,getPopupContainer:()=>document.body,onVisibleChange:e=>(e||!C.current)&&h(e)},d.createElement(yt,{className:R({"time-range-picker-target-nullable":c})},E," ",d.createElement(j,null),c&&d.createElement(Z,{onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),S(void 0)}})))}const iu=[15,30,60,120,300].map((e=>({label:e,value:e})));function au(e){const{onChange:t,value:n,initialValue:r}=e,[i,a]=f.exports.useState(String(r||"")),[o,s]=f.exports.useState(r||null);f.exports.useEffect((()=>{a(String(n||""))}),[n]);const l=()=>{if(!i&&null!==o)return s(null),void(t&&t(null));const e=Number(i);Number.isInteger(e)&&e>0&&e<=Number.MAX_SAFE_INTEGER&&e!==o&&(s(e),t&&t(e))};return d.createElement("div",{className:"resolution"},d.createElement(Gt,{options:iu,value:i,style:{width:72},onChange:e=>{a("number"==typeof e?e:e.replace(/^(0+)|[^\d]+/g,""))},onSelect:e=>{const n=Number(e);n!==o&&(s(n),t&&t(n))},onKeyDown:e=>{13===e.keyCode&&l()},onBlur:l,placeholder:"Res. (s)"}))}const ou=O();J.string,J.string,J.oneOfType([J.string,J.number]),J.oneOfType([J.string,J.number]),J.oneOfType([J.string,J.number]),J.arrayOf(J.string),J.array,J.bool,J.number,J.number,J.number,J.string,J.number,J.number,J.string,J.bool,J.bool,J.string,J.string,J.bool,J.arrayOf(J.shape({selectedEndpoint:J.array,selectedMetric:J.string,aggrFunc:J.string,aggrGroup:J.array,selectedTagkv:J.array,tagKv:J.array,counters:J.array}));const su={title:"",type:"chart",now:ou.clone().format("x"),start:ou.clone().subtract(36e5,"ms").format("x"),end:ou.clone().format("x"),comparisonOptions:[{label:"1小时",labelEn:"1 hour",value:"3600000"},{label:"2小时",labelEn:"2 hours",value:"7200000"},{label:"1天",labelEn:"1 day",value:"86400000"},{label:"2天",labelEn:"2 days",value:"172800000"},{label:"7天",labelEn:"7 days",value:"604800000"}],threshold:void 0,legend:!1,precision:"origin",shared:!1,sharedSortDirection:"desc"},lu=["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"];function cu(e){const t=[];return S.each(e,((e,n)=>{var r,i;const a=(null==(r=null==e?void 0:e.metric)?void 0:r.ident)||(null==(i=null==e?void 0:e.metric)?void 0:i.__name__),o=function(e,t,n=!1){const{comparison:r}=e;let i;if(n&&!r)i="rgb(67, 150, 30)";else if(86400===r)i="rgb(98, 127, 202)";else if(604800===r)i="rgb(238, 92, 90)";else{i=lu[t%lu.length]}return i}(e,n),s={id:n,name:a,tags:a,metricLabels:e.metric,data:(e.values||[]).map((e=>[1e3*e[0],Number(e[1])]))||[],lineWidth:2,color:o,oldColor:o,comparison:e.offset,legendTitleFormat:e.legendTitleFormat};t.push(s)})),t}var uu,hu;J.arrayOf(J.shape({ns:J.string,metric:J.string,counter:J.string})),(hu=uu||(uu={})).Line="line",hu.StackArea="stackArea";const pu="YYYY-MM-DD HH:mm:ss";function du(e){const{points:t,series:n,formatUnit:r,precision:i,chartType:a}=e,o=window.innerWidth/1.5;let s="";s+=function(e){const{points:t}=e,n=O(t[0].timestamp).format(pu);return`<span style="color: #666">${n}</span><br/>`}(e);const l=1===t.length;return S.each(t,((e,t)=>{s+=function(e,t={},n={},r,i,a){const{legendTitleFormat:o}=n,{color:s,filledNull:l,serieOptions:c={},timestamp:u}=t,h=a===uu.StackArea?t[3]:t.value;let p="";c.comparison&&(p+=` offset ${c.comparison}`);const d=(null==c?void 0:c.metricLabels)||{},f=d.__name__||"",m=Object.keys(d).filter((e=>"__name__"!==e)),g=()=>{const e=m.map((e=>`<span>${e}=${d[e]}</span>`)),t=o?mu(o,d):`${f} ${p} {${e}}`;return`<span style="color:${s}">● </span>\n      ${t}：<strong>${v(h)}${l?"(空值填补,仅限看图使用)":""}</strong>\n      <br/>`},v=e=>"short"===i?1024===r||1e3===r?e>1e3?((e,t=2,{withUnit:n=!0,withByte:r=!1,trimZero:i=!1,convertNum:a=1024}={withUnit:!0,withByte:!1,trimZero:!1,convertNum:2024})=>{const o=e?Number(e):0;let s,l="";return o<0?s=0:o<a?s=o.toFixed(t):o<a*a?(s=(o/a).toFixed(t),l="K"):o<a*a*a?(s=(o/a/a).toFixed(t),l="M"):o<a*a*a*a?(s=(o/a/a/a).toFixed(t),l="G"):o<a*a*a*a*a&&(s=(o/a/a/a/a).toFixed(t),l="T"),i&&(s=parseFloat(s)),n&&(s=`${s}${l}`),r&&(s=`${s}B`),s})(e,2,{convertNum:r}):e.toFixed(2):"humantime"===r?O.duration(e,"seconds").humanize():"":e,y=()=>{const e=m.map((e=>`<div><strong>${e}</strong>: ${d[e]}</div>`)),t=o?mu(o,d):`${f} ${p}`;return`<span style="color:${s}">● </span>\n      ${t}: <strong>${v(h)}${l?"(空值填补,仅限看图使用)":""}</strong>\n      <div /><br />\n      <div><strong>Series:</strong></div>\n      ${f?`<div><strong>${f}</strong></div>`:""}\n      ${e.join("")}`};return e?y():g()}(l,e,e.serieOptions,r,i,a)})),`<div style="table-layout: fixed;max-width: ${o}px;word-wrap: break-word;white-space: normal;">${s}</div>`}function fu(e,t){const{threshold:n,yAxisMin:r,yAxisMax:i}=t,a=S.clone(e);return null!=n?a.plotLines=[{value:n,color:"red"}]:delete a.plotLines,t.yAxis&&void 0!==t.yAxis.plotLines&&null!==t.yAxis.plotLines?a.plotLines=t.yAxis.plotLines:delete a.plotLines,null!=r&&null!=i?(a.min=r,a.max=i):(delete a.min,delete a.max),a}function mu(e,t){let n=(r=e,Array.from(r.matchAll(/{{([0-9a-zA-Z\._\-]+?)}}/g)).map((e=>e.length>0?e[1]:e[0])));var r,i=e;return n.forEach((e=>{i=i.replace(`{{${e}}}`,t[e]?t[e]:"")})),i}const gu={},vu=(e,t)=>{const n=new AbortController,{signal:r}=n;return t&&gu[t]&&gu[t].abort&&gu[t].abort(),gu[t]=n,ii("/api/n9e/prometheus/api/v1/query_range",{method:Kr.Get,params:e,signal:r}).finally((()=>{delete gu[t]}))};class yu extends f.exports.Component{constructor(e){super(e),this.handleInputChange=e=>{this.setState({searchText:e.target.value})},this.handleSearch=()=>{const{searchText:e}=this.state;this.setState({filterDropdownVisible:!1,filterVal:e})},this.handleContextMenu=(e,t)=>{e.preventDefault(),this.setState({currentCounter:t,contextMenuVisiable:!0,contextMenuLeft:e.clientX,contextMenuTop:e.clientY})},this.handleClickCounter=e=>{const{selectedKeys:t,highlightedKeys:n}=this.state,r=S.clone(n);S.includes(r,e.id)?S.remove(r,(t=>t===e.id)):r.push(e.id),this.setState({highlightedKeys:r},(()=>{this.props.onSelectedChange(t,r)}))},this.state={searchText:"",filterVal:"",filterDropdownVisible:!1,contextMenuVisiable:!1,contextMenuTop:0,contextMenuLeft:0,selectedKeys:"normal",highlightedKeys:[]}}componentWillReceiveProps(e){Cu(this.props.series,e.series)||this.setState({selectedKeys:"normal",highlightedKeys:[]})}filterData(){const{series:e}=this.props,{filterVal:t}=this.state,n=new RegExp(t,"gi"),r=function(e=[]){const t=S.map(e,(e=>{const{id:t,metric:n,tags:r,data:i,comparison:a,metricLabels:o,legendTitleFormat:s}=e,{last:l,avg:c,max:u,min:h,sum:p}=function(e){let t=0,n=0,r=-1/0,i=1/0,a=0,o=0;if(!S.isArray(e))return{last:t,avg:n,max:r,min:i,sum:a};S.each(e,(e=>{const n=S.get(e,"[0]"),s=S.get(e,"[1]");S.isNumber(n)&&S.isNumber(s)&&(a+=s,r<s&&(r=s),i>s&&(i=s),t=s,o++)})),S.isNumber(a)&&(n=a/o);return{last:t,avg:n,max:r,min:i,sum:a}}(i);return{id:t,metric:n,tags:r,comparison:a,metricLabels:o,last:S.isNumber(l)?l.toFixed(3):null,avg:S.isNumber(c)?c.toFixed(3):null,max:S.isNumber(u)?u.toFixed(3):null,min:S.isNumber(h)?h.toFixed(3):null,sum:S.isNumber(p)?p.toFixed(3):null,color:e.color,legendTitleFormat:s}}));return S.orderBy(t,"counter")}(e);return S.filter(r,(e=>e.tags&&e.tags.match(n)||e.metricLabels&&JSON.stringify(e.metricLabels).match(n)))}render(){const{comparisonOptions:e,onSelectedChange:t,rowSelection:n,renderValue:r=(e=>e)}=this.props,{graphConfig:i}=this.props;if(!i)return null;const a=S.cloneDeep(S.get(i,"sortOrder",{})),{searchText:o,selectedKeys:c,highlightedKeys:u}=this.state,h=u,p=this.filterData(),f=p[0];let m=[{title:d.createElement("span",null," Series(",p.length,") "),dataIndex:"tags",width:240,filterDropdown:d.createElement("div",{className:"custom-filter-dropdown"},d.createElement(bt,{placeholder:"Input serie name",value:o,onChange:this.handleInputChange,onPressEnter:this.handleSearch}),d.createElement(yt,{type:"primary",onClick:this.handleSearch},"Search")),ellipsis:!0,filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:e=>this.setState({filterDropdownVisible:e}),render:(e,t)=>{const{legendName:n,titleName:r}=function(e,t,n="zh"){const{comparison:r,legendTitleFormat:i}=e;let a,o="";const s=(null==e?void 0:e.metricLabels)||{},l=s.__name__,c=Object.keys(s).filter((e=>"__name__"!==e)).map((e=>`${e}=${s[e]}`));o=i?mu(i,s):`${l||""} ${r?`offset ${r}`:""} {${c}}`;return a=d.createElement("div",null,d.createElement("div",null,l," ",r?`offset ${r}`:""),c.map(((e,t)=>d.createElement("div",{key:t},e)))),{legendName:o,titleName:a}}(t);return d.createElement(Ct,{title:r,getPopupContainer:()=>document.body},d.createElement("span",{onClick:()=>this.handleClickCounter(t),onContextMenu:t=>this.handleContextMenu(t,e),style:{cursor:"pointer",opacity:h.length?S.includes(h,t.id)?1:.5:1}},d.createElement("span",{style:{color:t.color}},"● "),n))}},{title:"Max",dataIndex:"max",className:"alignRight",width:120,defaultSortOrder:"max"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.max-t.max},{title:"Min",dataIndex:"min",className:"alignRight",width:120,defaultSortOrder:"min"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.min-t.min},{title:"Avg",dataIndex:"avg",className:"alignRight",width:120,defaultSortOrder:"avg"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.avg-t.avg},{title:"Sum",dataIndex:"sum",className:"alignRight",width:120,defaultSortOrder:"sum"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.sum-t.sum},{title:"Last",dataIndex:"last",className:"alignRight",width:120,defaultSortOrder:"last"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.last-t.last}];"normal"===c&&S.map(p,(e=>e.id)),!1===S.get(f,"isSameMetric")&&m.unshift({title:"指标",dataIndex:"metric",width:60});let g=650;return this.props.columnsKey&&(m=S.filter(m,(e=>S.includes([...this.props.columnsKey,"metric","tags"],e.dataIndex))),g=150+100*this.props.columnsKey.length),d.createElement("div",{className:"graph-legend",style:l(s({},this.props.style),{height:"100%"})},d.createElement(Nt,{className:"auto-scroll-y",rowKey:({id:e,comparison:t})=>`${e}${t}`,size:"middle",rowSelection:!1,columns:m,dataSource:p,pagination:!1,scroll:{x:g,y:!0},showSorterTooltip:!1}))}}function xu(e,t){return"normal"===t||S.includes(t,S.get(e,"id"))}function Eu(e,t,n){return t.length&&!S.includes(t,S.get(e,"id"))?ee(n).lighten(.5).desaturate(.7).hex():n}function bu(e,t,n,r){return S.includes(t,S.get(e,"id"))?n+r:r}function Cu(e,t){const n=S.map(e,(e=>e.id)),r=S.map(t,(e=>e.id));return S.isEqual(n,r)}It.Option;class Tu extends f.exports.Component{constructor(e){super(e),this.refresh=()=>{const{graphConfig:e}=this.props;if(e){const t=O(),n=Number(t.format("x"))-Number(e.end)+Number(e.start)+"",r=t.format("x");return{now:r,start:n,end:r}}return{}},this.handleComparisonChange=e=>{const{onChange:t,relativeTimeComparison:n,comparisonOptions:r}=this.props;this.setState({curComparison:e}),t(l(s({},this.refresh()),{comparison:e,relativeTimeComparison:n,comparisonOptions:r}))},this.state={customValue:void 0,customType:"hour",errorText:"",curComparison:[]}}render(){const{curComparison:e}=this.state,t=e=>{const t=this.state.curComparison.findIndex((t=>t===e.key));let n;if(-1===t)n=[...this.state.curComparison,e.key],this.setState({curComparison:n});else{let e=[...this.state.curComparison];e.splice(t,1),n=e,this.setState({curComparison:e})}const{onChange:r,relativeTimeComparison:i,comparisonOptions:a}=this.props;r(l(s({},this.refresh()),{comparison:n,relativeTimeComparison:i,comparisonOptions:a}))},n=d.createElement(vt,{onClick:t,selectedKeys:e},d.createElement(vt.Item,{key:"1d"},"1d"),d.createElement(vt.Item,{key:"7d"},"7d"));return d.createElement("div",{className:"graph-config-inner-comparison"},this.state.curComparison.map((e=>d.createElement(At,{key:e,closable:!0,onClose:n=>{t({key:e})}},e))),d.createElement(Tt,{overlay:n},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(V,null))))}}Tu.defaultProps={size:"small",comparison:[],relativeTimeComparison:!1,comparisonOptions:[],graphConfig:null,onChange:S.noop};class wu extends f.exports.Component{constructor(e){super(e),this.handleAggrFuncChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curAggrFunc:e}),n("update",t.id,{changeType:"aggrFuncChange",comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:e,calcFunc:this.state.calcFunc,aggrGroups:this.state.curAggrGroups})},this.handleCalcFuncChange=e=>{const{data:t,onChange:n}=this.props;this.setState({calcFunc:e}),n("update",t.id,{comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:e,aggrGroups:this.state.curAggrGroups})},this.handleComparisonChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curComparisonValue:e}),n("update",t.id,{comparison:e.comparison,relativeTimeComparison:e.relativeTimeComparison,comparisonOptions:e.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:this.state.calcFunc,aggrGroups:this.state.curAggrGroups})},this.handleAggrGroupsChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curAggrGroups:e}),n("update",t.id,{comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:this.state.calcFunc,aggrGroups:e})},this.state={curAggrFunc:"avg",calcFunc:"",curAggrGroups:["ident"],curComparisonValue:{},aggrGroups:[]}}componentDidMount(){this.fetchAggrGroups()}componentDidUpdate(e){const t=(e.data.selectedHosts||[]).map((e=>e.ident)),n=(this.props.data.selectedHosts||[]).map((e=>e.ident));!S.isEqual(t,n)&&this.fetchAggrGroups()}fetchAggrGroups(){const{metric:e,selectedHosts:t}=this.props.data,n=t.map((e=>e.ident));var r;(r={start:Math.round(Number(this.props.data.start)/1e3),end:Math.round(Number(this.props.data.end)/1e3),match:[`${e}{ident=~"${n.join("|")}"}`]},ii("/api/n9e/prometheus/api/v1/labels",{method:Kr.Get,params:r,paramsSerializer:function(e){return xi.stringify(e,{arrayFormat:"bracket"})}})).then((e=>{this.setState({aggrGroups:e.data})}))}render(){const{data:e,onChange:t}=this.props,{now:n,start:r,end:i,comparison:a}=e,o=d.createElement(vt,{onClick:e=>{this.handleAggrFuncChange(e.key)},selectedKeys:[this.state.curAggrFunc]},d.createElement(vt.Item,{key:"sum"},"sum"),d.createElement(vt.Item,{key:"avg"},"avg"),d.createElement(vt.Item,{key:"max"},"max"),d.createElement(vt.Item,{key:"min"},"min")),s=d.createElement(vt,{onClick:e=>this.handleCalcFuncChange("clear"===e.key?"":e.key),selectedKeys:[this.state.calcFunc]},d.createElement(vt.Item,{key:"rate_1m"},"rate_1m"),d.createElement(vt.Item,{key:"rate_5m"},"rate_5m"),d.createElement(vt.Item,{key:"increase_1m"},"increase_1m"),d.createElement(vt.Item,{key:"increase_5m"},"increase_5m"),d.createElement(vt.Divider,null),d.createElement(vt.Item,{key:"clear"},"clear")),l=d.createElement(vt,{onClick:e=>{const t=this.state.curAggrGroups.findIndex((t=>t===e.key));let n;if(-1===t)n=[...this.state.curAggrGroups,e.key],this.setState({curAggrGroups:n});else{let e=[...this.state.curAggrGroups];e.splice(t,1),n=e,this.setState({curAggrGroups:e})}this.handleAggrGroupsChange(n)},selectedKeys:this.state.curAggrGroups},this.state.aggrGroups.filter((e=>"__name__"!==e)).map((e=>d.createElement(vt.Item,{key:e},e)))),c=e=>{let t=[...this.state.curAggrGroups],n=t.findIndex((t=>t===e));n>=0&&t.splice(n,1),this.handleAggrGroupsChange(t)};return d.createElement("div",{className:"graph-config-inner"},d.createElement("div",{className:"graph-config-inner-item"},"计算函数 ：",d.createElement(Tt,{overlay:s},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.calcFunc," ",d.createElement(M,null)))),d.createElement("div",{className:"graph-config-inner-item"},"环比：",d.createElement(Tu,{comparison:a,relativeTimeComparison:e.relativeTimeComparison,comparisonOptions:e.comparisonOptions,graphConfig:e,onChange:this.handleComparisonChange}),d.createElement("input",{style:{position:"fixed",left:-1e4},id:`hiddenInput${e.id}`})),d.createElement("div",{className:"graph-config-inner-item"},"聚合函数 ：",d.createElement(Tt,{overlay:o},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.curAggrFunc," ",d.createElement(M,null)))),this.state.curAggrFunc?d.createElement("div",{className:"graph-config-inner-item"},d.createElement("span",null,"聚合维度 ："),this.state.curAggrGroups.map((e=>d.createElement(At,{key:e,closable:!0,onClose:t=>{c(e)}},e))),d.createElement(Tt,{overlay:l,overlayStyle:{maxHeight:400,overflow:"auto"}},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(V,null)))):null)}}wu.defaultProps={};let Su=null;let ku=null;function _u(e,t={}){let n=document.createElement(e);return Object.keys(t).forEach((e=>{n[e]=t[e]})),n}function Au(e,t,n){return(window.getComputedStyle(e,n||null)||{display:"none"})[t]}function Ou(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;for(;t!==document;){if("none"===Au(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}let Iu=0,Mu=null;function Nu(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Fu.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:n}=e,r=new ResizeObserver((()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==n))&&Pu(e)})),{detached:i,rendered:a}=Ou(e);e.__resize_observer_triggered__=!1===i&&!1===a,e.__resize_observer__=r,r.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){Pu(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(Iu||(n='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(r=document.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(r),Mu=r),function(e){let t=Au(e,"position");t&&"static"!==t||(e.style.position="relative");e.__resize_old_position__=t,e.__resize_last__={};let n=_u("div",{className:"resize-triggers"}),r=_u("div",{className:"resize-expand-trigger"}),i=_u("div"),a=_u("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:a},Ru(e),e.addEventListener("scroll",Lu,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=Ou(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}var n,r;e.__resize_listeners__.push(t),Iu++}function Fu(){let{rendered:e,detached:t}=Ou(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(Ru(this),this.addEventListener("scroll",Lu,!0)),this.__resize_rendered__=e,Pu(this))}function Lu(){var e,t;Ru(this),this.__resize_raf__&&(e=this.__resize_raf__,ku||(ku=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),ku(e)),this.__resize_raf__=(t=()=>{let e=function(e){let{width:t,height:n}=e.__resize_last__,{offsetWidth:r,offsetHeight:i}=e;return r!==t||i!==n?{width:r,height:i}:null}(this);e&&(this.__resize_last__=e,Pu(this))},Su||(Su=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),Su(t))}function Pu(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((t=>{t.call(e,e)}))}function Ru(e){let{expand:t,expandChild:n,contract:r}=e.__resize_triggers__,{scrollWidth:i,scrollHeight:a}=r,{offsetWidth:o,offsetHeight:s,scrollWidth:l,scrollHeight:c}=t;r.scrollLeft=i,r.scrollTop=a,n.style.width=o+1+"px",n.style.height=s+1+"px",t.scrollLeft=l,t.scrollTop=c}function Du(e,t){return Math.sqrt(Math.pow(t-e,2))}function Bu(e,t){const n=e.length;return t<n?e[t]:Bu(e,t-n)}function zu(e,t){return"X"===t?1e3*e:e}function Hu(e,t){const n=e.getBoundingClientRect(),r=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY;return{offsetX:r-n.left,offsetY:i-n.top,clientX:r,clientY:i}}class ju{constructor(e,t){this.options=e,this.ctx=t}init(){const{chart:{width:e},timestamp:t,xmin:n,xmax:r}=this.options,i=te().range([0,e]);return i.domain([zu(r,t),zu(n,t)]),i}draw(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i,time:a}=n,o=e.ticks(Math.floor(r.width/90)),s=r.height-i.tickpadding-i.labels.fontSize;t.beginPath(),o.forEach((n=>{const r=e(n);r&&(t.moveTo(r,s),t.lineTo(r,s-i.tickLength))})),t.lineWidth=1,t.strokeStyle=i.tickColor,t.stroke(),t.beginPath(),t.moveTo(0,s-i.tickLength),t.lineTo(r.width,s-i.tickLength),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke(),t.textAlign="center",t.textBaseline="bottom",t.fillStyle=i.labels.color,t.font=`${i.labels.fontSize}px Palantino`,o.forEach((n=>{let i="%H:%M";0!==n.getSeconds()&&(i="%H:%M:%S"),0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&(i="%m-%d");let o=n;if(a&&a.timezoneOffset){const e=n.getTimezoneOffset(),t=n.getTime()+60*e*1e3+60*a.timezoneOffset*1e3;o=new Date(t)}e(n)&&t.fillText(ne(i)(o),e(n),r.height)}))}drawPlotLines(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i,xAxis:{plotLines:a}}=n,o=r.height-i.tickpadding-i.labels.fontSize;Array.isArray(a)&&a.forEach((n=>{const r=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(r,0),t.lineTo(r,o-i.tickLength),t.strokeStyle=n.color,t.stroke(),t.setLineDash([])}))}}class Gu{constructor(e,t){this.options=e,this.ctx=t,this.tickLength=Math.floor(e.chart.height/50),this.ticks=[]}init(){const{chart:e,xAxis:t}=this.options,n=re().range([e.height-(t.labels.fontSize+t.tickpadding+t.tickLength),20]);return this.setDomain(n,this.options),n}getRealData(e){const{yAxis:{plotLines:t},ykey:n,fillNull:r}=this.options;return Array.isArray(e)?(Array.isArray(t)&&t.forEach((t=>{"number"==typeof t.value&&e.push({[n]:t.value})})),"number"==typeof r&&e.push({[n]:r}),e):[]}getPlotLinesMaxMin(){const{yAxis:{plotLines:e}}=this.options;let t,n;return Array.isArray(e)&&e.forEach((e=>{(!t||e.value>t)&&(t=e.value),(!n||e.value<n)&&(n=e.value)})),{max:t,min:n}}setDomain(e,{ymin:t,ymax:n}){const{max:r,min:i}=this.getPlotLinesMaxMin();let a=this.tickLength;if(t===n){const e=(n-t)/(this.tickLength-1),r=e/2||n||1;a=0===e?1:this.tickLength,t-=r,n+=r}if(t>n){const e=t;t=n,n=e}void 0!==i&&i<t&&(t=i),void 0!==r&&r>n&&(n=r),this.options.chartType===uu.StackArea&&(t=0),e.domain([t,n]),e.nice(a),this.ticks=e.ticks(a)}draw(e){const{ctx:t,options:n}=this,{yAxis:r}=n;t.textAlign="left",t.textBaseline="bottom",t.shadowColor=r.labels.shadowColor,t.shadowBlur=1,t.lineWidth=1,t.fillStyle=r.labels.color,t.font=`${r.labels.fontSize}px Palantino`,this.ticks.forEach((n=>{let r=String(n);if(n>=1e3){r=ie(".5s")(n);const e=/[kMGTPEZY]$/;if(e.test(r)){const t=r[r.length-1];r=r.replace(e,""),r=parseFloat(r)+t}}const i=e(n);t.strokeText(r,0,i),t.fillText(r,0,i)}))}drawGridLine(e){const{ctx:t,options:n}=this,{chart:r,yAxis:i}=n;t.beginPath(),this.ticks.forEach((n=>{const i=e(n);t.moveTo(0,i),t.lineTo(r.width,i)})),t.strokeStyle=i.gridLineColor,t.stroke()}drawPlotLines(e){const{ctx:t,options:n}=this,{chart:r,yAxis:i,yAxis:{plotLines:a}}=n;Array.isArray(a)&&a.forEach((n=>{const a=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(0,a),t.lineTo(r.width,a),t.strokeStyle=n.color,t.stroke(),t.setLineDash([]),t.textAlign="right",t.textBaseline="top",t.shadowColor="#fff",t.shadowBlur=1,t.lineWidth=1,t.fillStyle=n.color,t.font=`${i.labels.fontSize}px Palantino`,t.strokeText(String(n.value),r.width-10,a),t.fillText(String(n.value),r.width-10,a)}))}}const $u=new function(){return new Worker("/assets/worker.f0706a63.js",{type:"module"})};class Yu{constructor(e,t,n,r){this.options=e,this.ctx=t,this.flag=!1,this.init(n,r),this.isMouserover=!1}init(e,t){const{chart:{id:n}}=this.options,r=document.createElement("div");r.id=`${n}-tooltip`,r.className="ts-graph-tooltip",document.getElementById(r.id)||document.body.append(r)}clear(){const{ratio:e,chart:{id:t,containerWidth:n,containerHeight:r}}=this.options,i=document.getElementById(`${t}-tooltip`);this.isMouserover=!1,this.ctx.save(),this.ctx.setTransform(1*e,0,0,1*e,0,0),this.ctx.clearRect(0,0,n,r),this.ctx.restore(),i.style.top="-99999px",i.lastChild&&i.removeChild(i.lastChild)}getNearestPoints(e,t,n,r){const{series:i=[],chart:{id:a,colors:o},tooltip:{shared:c},xkey:u,ykey:h,y0key:p,timestamp:d,fillNull:f}=this.options,m=t.invert(e.offsetX);let g=[];const v={x:m,xkey:u,ykey:h,y0key:p,timestamp:d,fillNull:f};this.flag?(v.id=a,v.flag=this.flag,$u.postMessage(v)):(v.id=a,v.str=JSON.stringify(i),v.flag=this.flag,$u.postMessage(v),this.flag=!0),$u.onmessage=i=>{if(!1===this.isMouserover)return;"[object Array]"===Object.prototype.toString.call(i.data)&&(g=i.data.map((e=>l(s({},e),{x:t(e.timestamp),y:n(e.value),color:e.color||Bu(o,e.serieIndex)}))));const a=Y.exports.groupBy(g,"x");if(Y.exports.keys(a).length>1){let t=Number.POSITIVE_INFINITY;for(const n in a)if(Object.prototype.hasOwnProperty.call(a,n)){const r=Du(e.offsetX,Number(n));r<t&&(t=r,g=a[n])}}if(!c){let t=Number.POSITIVE_INFINITY;g.forEach((n=>{const r=(i={x:e.offsetX,y:e.offsetY},a=n,Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)));var i,a;r<t&&(t=r,g=[n])}))}r(g)}}draw(e,t,n,r){this.isMouserover=!0,this.getNearestPoints(e,t,n,(t=>{this.clear(),t.length&&(this.drawCrosshair(t[0].x),this.drawSymbol(t),this.drawModal(t,e)),r&&"[object Function]"===Object.prototype.toString.call(r)&&r(t)}))}drawModal(e,t){const{chart:{id:n,renderTo:r},tooltip:i,time:a}=this.options,o=r.offsetWidth;let s=r.offsetHeight;const l=document.getElementById(`${n}-tooltip`),c=document.createElement("div"),u=e;s=window.innerHeight/1.5;const h=(s-18-100)/15;let p=!1;if(i.sharedSortDirection&&(e=Y.exports.orderBy(e,(e=>e.value),i.sharedSortDirection)),e.length>h&&(e=e.slice(0,h),p=!0),c.className="ts-graph-tooltip-content",l.appendChild(c),"[object Function]"===Object.prototype.toString.call(i.formatter))c.innerHTML=i.formatter([...e],[...u]);else{const t=e[0],n=document.createDocumentFragment(),r=document.createElement("ul"),o=document.createElement("li");let s=new Date(t.timestamp);if(a&&a.timezoneOffset){const e=s.getTimezoneOffset(),t=s.getTime()+60*e*1e3+60*a.timezoneOffset*1e3;s=new Date(t)}const l=document.createTextNode(ne("%Y-%m-%d %H:%M:%S")(s));if(o.appendChild(l),o.style.color="#666",r.style.maxWidth=window.innerWidth/1.5+"px",r.appendChild(o),n.appendChild(r),e.forEach((({color:e,name:t,value:n,filledNull:a})=>{const o=document.createElement("li");if(e){const t=document.createElement("span"),n=document.createTextNode("● ");t.style.color=e,t.appendChild(n),o.appendChild(t)}if(t){const e=document.createTextNode(`${t}: `);o.appendChild(e)}if(Y.exports.isNumber(n)){const e=document.createElement("strong");let t;if("origin"===i.precision)t=n;else if("short"===i.precision){t=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(ie(".5s")(n))}else t=i.precision>0?ie(",."+i.precision+"f")(n):ie(",.3f")(n);t+=a?"(空值填补,仅限看图使用)":"";const r=document.createTextNode(t);e.appendChild(r),o.appendChild(e)}r.appendChild(o)})),p){const e=document.createElement("li"),t=document.createTextNode("......");e.appendChild(t),r.appendChild(e)}c.appendChild(n)}const d=c.offsetWidth,f=c.offsetHeight;l.style.left=t.clientX-d-20+"px",l.style.top=`${t.clientY+20}px`,t.clientX-d-20<0&&(l.style.left=`${t.clientX+20}px`,t.clientX+20+d>o&&(l.style.left="0px")),t.clientY+20+f>s&&(t.clientY-f-20<0?l.style.top="0px":l.style.top=t.clientY-f-20+"px"),l.style.zIndex="9999",l.style.visibility="visible"}drawSymbol(e=[]){const{ctx:t}=this;e.forEach((e=>{const{x:n,y:r,color:i}=e;t.beginPath(),t.arc(n,r,5,0,360,!1),t.lineWidth=1,t.fillStyle=i,t.fill(),t.beginPath(),t.arc(n,r,3,0,360,!1),t.lineWidth=1,t.fillStyle="white",t.fill()}))}drawCrosshair(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i}=n,a=r.height-i.tickpadding-i.labels.fontSize-i.tickLength;t.beginPath(),t.moveTo(e,0),t.lineTo(e,a),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke()}destroy(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-tooltip`);t&&t.parentNode&&t.parentNode.removeChild(t)}}class Uu{constructor(e,t){this.options=e,this.ctx=t}draw(e,t){const{series:n,chart:{colors:r},xkey:i,ykey:a,timestamp:o,fillNull:s,notDisplayedSeries:l}=this.options,{ctx:c}=this,u=ae().x((t=>{const n="X"===o?1e3*t[i]:t[i];return e(new Date(n))})).y((e=>{const n=e[a];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).defined((e=>"number"==typeof e[a]||"number"==typeof s)).context(c);Y.exports.sortBy(n,"zIndex").forEach(((e,t)=>{if(!1===e.visible)return;if(l.indexOf(e.name)>-1)return;const n=e.color||Bu(r,t);e.color=n,c.beginPath(),c.lineTo(0,0),u(e.data||[]),c.lineJoin="round",c.lineWidth=this.options.line.width,c.strokeStyle=n,c.lineCap="round",c.setLineDash(e.lineDash||[]),c.stroke(),c.closePath()}))}}class Vu{constructor(e,t){this.options=e,this.ctx=t}draw(e,t){const{series:n,chart:{colors:r},xkey:i,ykey:a,timestamp:o,fillNull:s,notDisplayedSeries:l}=this.options,{ctx:c}=this,u=oe().x((t=>{const n="X"===o?1e3*t[i]:t[i];return e(new Date(n))})).y0((e=>{const n=e[2];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).y1((e=>{const n=e[1];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).defined((e=>"number"==typeof e[a]||"number"==typeof s)).context(c);Y.exports.sortBy(n,"zIndex").reverse().forEach(((e,t)=>{if(!1===e.visible)return;if(l.indexOf(e.name)>-1)return;const n=e.color||Bu(r,t);e.color=n,c.beginPath(),c.lineTo(0,0),u(e.data||[]),c.lineJoin="round",c.lineWidth=this.options.line.width,c.strokeStyle=n,c.fillStyle=n+"50",c.lineCap="round",c.stroke(),c.fill(),c.closePath()}))}}class Wu{constructor(e,t,n,r){this.options=e,this.init(n,r),this.reset=t}init(e,t){const{chart:{id:n,containerHeight:r}}=this.options,i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("a"),s=document.createTextNode("Reset zoom");i.id=`${n}-zoom`,i.className="ts-graph-zoom",a.id=`${n}-zoom-marker`,a.className="ts-graph-zoom-marker",a.style.height=`${r}px`,o.id=`${n}-zoom-resetBtn`,o.className="ts-graph-zoom-resetBtn",o.appendChild(s),i.appendChild(a),i.appendChild(o),e.insertBefore(i,t),this.onReset()}onReset(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).addEventListener("click",(e=>{e.stopPropagation(),this.reset(),this.clearResetBtn()}))}onZoom(e,t,n){const{chart:{width:r}}=this.options,i=t.offsetX-e.offsetX;if(i){const a=r/Math.abs(i),o=t.offsetX>e.offsetX?e.offsetX:t.offsetX,s=se.translate(-o*a,0).scale(a);this.drawResetBtn(),n(s)}}clearMarker(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-zoom-marker`);t.style.display="none",t.style.width="0px",t.style.left="unset",t.style.right="unset"}drawMarker(e,t){const{chart:{marginLeft:n}}=this.options,r=e.offsetX,i=t.offsetX,{chart:{id:a,containerWidth:o}}=this.options,s=document.getElementById(`${a}-zoom-marker`);s.style.display="block",s.style.top="0px",r<i?(s.style.right="unset",s.style.left=`${r+n}px`,s.style.width=i-r+"px"):(s.style.left="unset",s.style.right=o-r-n+"px",s.style.width=r-i+"px")}clearResetBtn(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).style.display="none"}drawResetBtn(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).style.display="block"}}function Xu(e){let t=-1,n=e;for(;n;){if(!("previousSibling"in n)){t=-1;break}n=n.previousSibling,t+=1}return t}class qu{constructor(e,t,n,r){this.handelLegendItemClick=e=>{const t=e.currentTarget;let n=e.target;for(;n!==t;){if(n&&"ts-graph-legend-item"===n.className){const{series:e}=this.options,t=Xu(n);this.onLegendItemClick(e[t].name)}n.parentNode&&(n=n.parentNode)}},this.options=e,this.init(n,r),this.onLegendItemClick=t}init(e,t){const{chart:{id:n}}=this.options,r=document.createElement("div");r.id=`${n}-legend`,r.className="ts-graph-legend",document.getElementById(r.id)||e.insertBefore(r,t),this.initEvent()}initEvent(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-legend`);t.removeEventListener("click",this.handelLegendItemClick),t.addEventListener("click",this.handelLegendItemClick)}updateOptions(e){this.options=e}draw(){const{chart:{id:e},series:t,legend:n}=this.options,r=document.getElementById(`${e}-legend`);if(n.enabled&&"[object Array]"===Object.prototype.toString.call(t)){r.innerHTML="";const e=document.createDocumentFragment();t.forEach((t=>{const n=document.createElement("span"),r=document.createElement("span"),i=document.createElement("span"),a=document.createElement("span"),o=document.createTextNode(t.name);n.className="ts-graph-legend-item",r.className="ts-graph-legend-item-symbol",i.className="ts-graph-legend-item-symbol-line",i.style.borderColor=t.color,a.className="ts-graph-legend-item-symbol-point",a.style.backgroundColor=t.color,r.appendChild(i),r.appendChild(a),n.appendChild(r),n.appendChild(o),e.appendChild(n)})),r.appendChild(e)}}}class Ku{constructor(e){this.getZoomedSeries=()=>{const{chart:{renderTo:e},series:t,timestamp:n,xkey:r}=this.options,i=e.offsetWidth;return t.map((e=>{if("[object Array]"===Object.prototype.toString.call(e.data)){const t=e.data.filter((e=>{const t="X"===n?1e3*e[r]:e[r],a=this.xScales(new Date(t));return a>=0&&a<=i}));return l(s({},e),{data:t})}return e}))},this.handleResize=()=>{const{chart:e}=this.options,t=e.renderTo.offsetWidth,n=e.renderTo.offsetHeight;this.options.chart.width=t-e.marginLeft-e.marginRight,this.options.chart.height=n-e.marginTop-e.marginBottom,this.options.chart.containerWidth=t,this.options.chart.containerHeight=n,this.container.style.width=`${t}px`,this.container.style.height=`${n}px`,this.retinaScaled(this.backCanvas,"back"),this.retinaScaled(this.frontCanvas,"front"),this.retinaScaled(this.eventCanvas,"event"),this.initScales(),this.draw()},this.handleZoom=e=>{const{ykey:t,yAxis:n}=this.options;let{series:r}=this.options;if(e?(this.transform=e,this.xScales=e.rescaleX(this.xScales),r=this.getZoomedSeries()):(this.transform=void 0,this.xScales=this.xAxis.init()),Array.isArray(r)){let e=n.min||-1/0,i=n.max||1/0;for(const n of r){const r=Array.isArray(n.data)?n.data:[];let a;for(a=0;a<r.length;a++){const n=r[a][t];null!==n&&(e<n&&(e=n),i>n&&(i=n))}}this.yAxis.setDomain(this.yScales,{ymin:e,ymax:i})}this.draw(),this.options.onZoom(this.getZoomedSeries)},this.handleLegendItemClick=e=>{const{notDisplayedSeries:t}=this.options;-1===t.indexOf(e)?t.push(e):(this.options.notDisplayedSeries=t.filter((t=>t!==e)),this.update(this.options))};const t={chartType:uu.Line,ratio:window.devicePixelRatio||1,xkey:0,ykey:1,y0key:2,timestamp:"x",chart:{id:Y.exports.uniqueId("ts-graph-"),colors:["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"],width:e.chart.renderTo.offsetWidth,height:e.chart.renderTo.offsetHeight||350,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10},xAxis:{lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",labels:{color:"#999",fontSize:11}},yAxis:{lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",gridLineColor:"#efefef",labels:{color:"#999",shadowColor:"#fff",fontSize:11,style:{fontSize:11,color:"#999"}}},line:{width:2},tooltip:{shared:!0},baseSeries:[],series:[],legend:{align:"center",verticalAlign:"top",enabled:!1},fillNull:void 0,onClick:()=>{},onZoom:()=>{}},n=Y.exports.merge({},t,e);void 0===e.chart.marginTop&&n.legend.enabled&&(n.chart.marginTop=20),this.handleResize=Y.exports.debounce(this.handleResize,300),this.init(n)}init(e){const{chart:t}=e;this.baseSeries=e.series,this.options=e,this.options.notDisplayedSeries=[],this.options.chart.containerWidth=t.width,this.options.chart.containerHeight=t.height,this.options.chart.width=t.width-t.marginLeft-t.marginRight,this.options.chart.height=t.height-t.marginTop-t.marginBottom,this.options.chartType===uu.Line?this.initLine():this.initStackArea(),this.createContainer(),this.createCanvas(),this.initEvent(),this.initLegend(),this.initTooltip(),this.initZoom(),this.initSeries(),this.initScales(),this.draw()}clearRect(e){const{chart:{containerWidth:t,containerHeight:n}}=this.options;e.clearRect(0,0,t,n)}draw(){this.clearRect(this.backContext),this.yAxis.drawGridLine(this.yScales),this.chartContent.draw(this.xScales,this.yScales),this.xAxis.draw(this.xScales),this.yAxis.draw(this.yScales),this.xAxis.drawPlotLines(this.xScales),this.yAxis.drawPlotLines(this.yScales),this.legend.draw()}update(e){const t=Y.exports.assign({},this.options,e);e.series&&(t.series=e.series),this.options=t,this.initSeries(),this.options.chartType===uu.Line?this.initLine():this.initStackArea(),this.initTooltip(),this.initScales(),this.legend.updateOptions(t),this.draw()}getSeries(){return[...this.options.series]}initEvent(){let e,t=!1,n={},r=!1;const i=this,a=Y.exports.debounce((e=>{r&&(i.tooltip.draw(e,i.xScales,i.yScales),t&&i.zoom.drawMarker(n,e))}),10),o=Y.exports.throttle((()=>{i.tooltip.clear()}),10);le(this.eventCanvas).on("mousemove",(function(){r=!0,a(ce)})).on("mouseleave",(function(){e=ce,r=!1,o()})).on("mousedown",(function(){t=!0,n=ce})).on("mouseup",(function(){ce.stopPropagation();const e=ce;n&&n.offsetX!==e.offsetX?(i.zoom.clearMarker(),i.zoom.onZoom(n,e,(e=>{i.handleZoom(e)}))):i.options.onClick(ce),t=!1,n={}})).on("touchmove",(function(){const e=Hu(i.eventCanvas,ce);i.tooltip.draw(e,i.xScales,i.yScales),t&&i.zoom.drawMarker(n,e)})).on("touchend",(function(){e=Hu(i.eventCanvas,ce),r=!1,o()})),window.addEventListener("mouseup",(()=>{if(!Y.exports.isEmpty(n)){const r=e;t=!1,i.zoom.clearMarker(),i.zoom.onZoom(n,r,(e=>{i.handleZoom(e)})),n={}}})),Nu(this.options.chart.renderTo,this.handleResize)}retinaScaled(e,t){const{chart:n,ratio:r}=this.options,i=e.getContext("2d"),a="front"===t?n.containerWidth:n.width,o="front"===t?n.containerHeight:n.height,s="front"===t?"0px":`${n.marginLeft}px`,l="front"===t?"0px":`${n.marginTop}px`;e.width=a*r,e.height=o*r,e.style.width=`${a}px`,e.style.height=`${o}px`,e.style.position="absolute",e.style.left=s,e.style.top=l,"front"===t&&i.translate(n.marginLeft*r,n.marginTop*r),i.scale(r,r)}createContainer(){const{chart:e}=this.options,t=document.createElement("div");t.style.position="relative",t.style.width=`${e.containerWidth}px`,t.style.height=`${e.containerHeight}px`,t.style.overflow="hidden",e.renderTo.appendChild(t),this.container=t}createCanvas(){const{chart:{id:e}}=this.options;function t(t){const n=document.createElement("canvas"),r=n.getContext("2d");n.setAttribute("id",`${e}-${t}Canvas`),this.container.appendChild(n),this[`${t}Canvas`]=n,this[`${t}Context`]=r,this.retinaScaled(n,t)}t.call(this,"back"),t.call(this,"front"),t.call(this,"event")}initSeries(){const{chartType:e,fillNull:t,series:n,xkey:r,ykey:i,y0key:a,yAxis:o}=this.options;let c=-1/0,u=1/0,h=o.min,p=o.max;if(Array.isArray(n)){const o=Number(a),d=[],f=Object.values(n),m=f.map((e=>JSON.parse(JSON.stringify(e.data))));m.forEach(((n,a)=>{const g=[...Array.isArray(n)?n:[]],v=[];let y,x=!1;for(y=0;y<g.length;y++){const n=g[y];if(e===uu.StackArea)if(0===a)n[o]=0,n[o+1]?n[i]=n[o+1]:n[o+1]=n[i];else{let e=0,t=a;for(;t>0;){if(m[t-1]){const a=m[t-1].find((e=>e[r]===n[0]));if(a){e=a[i];break}}t--}n[o]=e,n[o+1]||(n[o+1]=n[i]),n[i]=e+n[o+1]}const s=n[r],l=n[i];void 0===t?0===y||y===g.length-1||y>0&&y<g.length-1&&"number"==typeof l?(v.push(n),x=!0):x&&(v.push(n),x=!1):v.push(n),c<s&&(c=s),u>s&&(u=s),"number"==typeof l?(("number"!=typeof h||l<h)&&(h=l),("number"!=typeof p||l>p)&&(p=l)):"number"==typeof t&&(t<h&&(h=t),t>p&&(p=t))}d.push(l(s({},f[a]),{data:v}))})),this.baseSeries=d,this.options.xmin=c,this.options.xmax=u,this.options.ymin=h,this.options.ymax=p}}initLine(){this.chartContent=new Uu(Object.assign(this.options,{series:this.baseSeries}),this.backContext)}initStackArea(){this.chartContent=new Vu(Object.assign(this.options,{series:this.baseSeries}),this.backContext)}initTooltip(){this.tooltip=new Yu(this.options,this.frontContext,this.container,this.eventCanvas)}initZoom(){this.zoom=new Wu(this.options,this.handleZoom,this.container,this.eventCanvas)}initLegend(){this.legend=new qu(this.options,this.handleLegendItemClick,this.container,this.eventCanvas)}initScales(){const e=new ju(this.options,this.backContext),t=new Gu(this.options,this.backContext);this.xAxis=e;let n=e.init();this.transform&&(n=this.transform.rescaleX(n)),this.xScales=n,this.yAxis=t,this.yScales=t.init()}destroy(){this.tooltip.destroy(),le(this.eventCanvas).on("mousemove",null).on("mouseleave",null).on("mousedown",null).on("mouseup",null).on("touchmove",null),le(this.container).remove(),function(e,t){let n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",Lu),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--Iu&&Mu&&Mu.parentNode.removeChild(Mu)}}(this.options.chart.renderTo,this.handleResize)}}class Qu extends f.exports.Component{componentDidMount(){const e={chartType:this.props.graphConfig.chartType||uu.Line,timestamp:"x",chart:{height:this.props.height?this.props.height:void 0,renderTo:this.graphWrapEle},xAxis:this.props.graphConfig.xAxis,yAxis:fu({},this.props.graphConfig),tooltip:this.genChartTooltipOptions(this.props),series:this.props.series,legend:{enabled:!1}};this.chart=new Ku(e)}componentWillReceiveProps(e){if(this.chart){const t={yAxis:fu(this.chart.options.yAxis,e.graphConfig),tooltip:this.genChartTooltipOptions(e),series:e.series,chartType:e.graphConfig.chartType||uu.Line};this.chart.update(t)}}genChartTooltipOptions(e){const t=1024===e.graphConfig.formatUnit&&"short"===e.graphConfig.precision;let n={xAxis:e.graphConfig.xAxis,shared:e.graphConfig.shared,sharedSortDirection:e.graphConfig.sharedSortDirection,formatter:t=>du({formatUnit:e.graphConfig.formatUnit,precision:e.graphConfig.precision,series:this.props.series,points:t,chartWidth:this.graphWrapEle.offsetWidth-40,chartType:e.graphConfig.chartType})};return t&&Object.assign(n,{precision:e.graphConfig.precision}),n}render(){return d.createElement("div",{style:s({},this.props.style),ref:e=>{this.graphWrapEle=e},className:"chart-content"})}}const Zu={1024:"Ki, Mi, Gi by 1024",1e3:"Ki, Mi, Gi by 1000",humantime:"Human time duration"};class Ju extends f.exports.Component{constructor(e){var t,n,r,i,a;super(e),this.headerHeight=35,this.handleLegendRowSelectedChange=(e,t)=>{const{series:n}=this.state,r=this.props.data.chartType,i=[];r===uu.StackArea&&t.length&&t.forEach((e=>i.push(n[e])));const a=S.map(n,((i,a)=>{const o=S.get(i,"oldColor",i.color);return l(s({},i),{visible:xu(i,e),zIndex:bu(i,t,n.length,a),color:r===uu.StackArea?o:Eu(i,t,o),oldColor:o})}));this.setState({series:a,chartShowSeries:i.length?i:a,legendHighlightedKeys:t})},this.refresh=()=>{this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)},this.shareChart=()=>{const e=l(s({},this.props.data),{legend:this.state.legend});if(!e.promqls){let t=[];const n={curAggrFunc:this.state.aggrFunc,curAggrGroup:this.state.aggrGroups},r=this.generateQuery(n);r&&t.push(r);const i=this.state.offsets.map((e=>this.generateQuery(l(s({},n),{offset:e})))).filter((e=>e));t=t.concat(i),e.promqls=t}let t={dataProps:e,highLevelConfig:s({},this.state.highLevelConfig),curCluster:localStorage.getItem("curCluster")};delete t.dataProps.ref,eu([{configs:JSON.stringify(t)}]).then((e=>{const t=e.dat;window.open("/chart/"+t)}))},this.resize=()=>{this.chart&&this.chart.resizeHandle&&this.chart.resizeHandle()},this.state={spinning:!1,errorText:"",series:[],chartShowSeries:[],legendHighlightedKeys:[],offsets:this.props.defaultOffsets||[],aggrFunc:this.props.defaultAggrFunc||"avg",aggrGroups:this.props.defaultAggrGroups||["ident"],calcFunc:"",legend:void 0===e.data.legend||e.data.legend,highLevelConfig:{shared:void 0===(null==(t=this.props.highLevelConfig)?void 0:t.shared)||(null==(n=this.props.highLevelConfig)?void 0:n.shared),sharedSortDirection:(null==(r=this.props.highLevelConfig)?void 0:r.sharedSortDirection)||"desc",precision:(null==(i=this.props.highLevelConfig)?void 0:i.precision)||"short",formatUnit:(null==(a=this.props.highLevelConfig)?void 0:a.formatUnit)||1e3},onErrorOccured:this.props.onErrorOccured,onRequestCompleted:this.props.onRequestCompleted}}componentDidMount(){this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)}componentWillReceiveProps(e){if(void 0!==this.props.data.legend&&this.props.data.legend!==e.data.legend&&this.setState({legend:e.data.legend}),"object"==typeof e.highLevelConfig){let t=!1;const n=Object.assign({},this.state.highLevelConfig);for(let r of Object.keys(n))n[r]!==e.highLevelConfig[r]&&(n[r]=e.highLevelConfig[r],t=!0);t&&this.setState({highLevelConfig:n})}}componentDidUpdate(e){const t=(e.data.selectedHosts||[]).map((e=>e.ident)),n=(this.props.data.selectedHosts||[]).map((e=>e.ident));!!S.isEqual(t,n)&&S.isEqualWith(e.data,this.props.data)||this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)}componentWillUnmount(){this.chart&&this.chart.destroy()}afterFetchChartDataOperations(e,t,n){const r=[],{offsets:i,series:a,legendHighlightedKeys:o}=this.state,{legendTitleFormats:s}=this.props.data,l=cu(e.reduce(((e,t,n)=>{var a;if("error"===t.status)return r.push(t),e;const o=null==(a=null==t?void 0:t.data)?void 0:a.result;return i&&o.forEach((e=>{e.offset=i[n]||"",e.legendTitleFormat=s&&s[n]})),e.push(...o),e}),[])),c=Cu(a,l);this.setState(Object.assign({spinning:!1,series:l,chartShowSeries:l,legendHighlightedKeys:c?o:[]})),c&&this.handleLegendRowSelectedChange("normal",this.state.legendHighlightedKeys),this.state.onErrorOccured&&this.state.onErrorOccured(r),!r.length&&this.state.onRequestCompleted&&this.state.onRequestCompleted({loadTime:Date.now()-t,resolution:n,resultSeries:l.length})}getGraphConfig(e){return l(s(s(s({},su),e),this.state.highLevelConfig),{now:e.now?e.now:e.end?e.end:su.now})}getZoomedSeries(){return this.state.series}generateQuery(e){const{offset:t,curAggrFunc:n,curAggrGroup:r,calcFunc:i=""}=e,[a,o]=i.split("_"),{metric:s,selectedHosts:l}=this.props.data;if(s&&l){const e=t?" offset "+t:"";let c=`${i?a+"(":""}${s}{ident=~"${l.map((e=>e.ident)).join("|")}"}${i?"["+o+"]":""}${e}${i?")":""}`;return n&&r&&r.length>0&&(c=`${n}(${c}) by (${r.join(", ")})`),c}}fetchData(e,{start:t,end:n,step:r}){this.setState({spinning:!0});try{return vu({start:t-t%r,end:n-n%r,step:r,query:e})}catch(eh){return this.setState({spinning:!1}),Promise.reject()}}renderChart(){const{errorText:e,chartShowSeries:t}=this.state,{height:n,data:r}=this.props,i=this.getGraphConfig(r);return e?d.createElement("div",{className:"graph-errorText"},e):d.createElement(Qu,{graphConfig:i,series:t,style:{minHeight:"65%"}})}updateGraphConfig(e){const{aggrFunc:t,aggrGroups:n,comparison:r,calcFunc:i}=e;this.setState({aggrFunc:t,aggrGroups:n,offsets:r,calcFunc:i}),"aggrFuncChange"===e.changeType&&0===n.length||this.updateAllGraphs(t,n,r,i)}updateAllGraphs(e,t,n,r){const i=Date.now();let{promqls:a,range:o,step:c}=this.props.data;const{start:u,end:h}=nu(o);c||(c=Math.max(Math.floor((h-u)/250),1));let p={calcFunc:r};if(e&&(p.curAggrFunc=e),t&&t.length>0&&(p.curAggrGroup=t),a){const e=a.map((e=>"string"==typeof e?e:e.current)).filter((e=>e));if(e.length){const t=e.map((e=>this.fetchData(e,{start:u,end:h,step:c})));Promise.all([...t]).then((e=>{this.afterFetchChartDataOperations(e,i,c)}))}}else{const e=this.generateQuery(p);let t=[];n&&(t=n.map((e=>this.generateQuery(l(s({},p),{offset:e})))));const r=t.map((e=>this.fetchData(e,{start:u,end:h,step:c}))),a=this.fetchData(e,{start:u,end:h,step:c});Promise.all([...r,a]).then((e=>{this.afterFetchChartDataOperations(e,i,c)}))}}getContent(){const e=d.createElement(vt,{onClick:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{sharedSortDirection:e.key})})},selectedKeys:[this.state.highLevelConfig.sharedSortDirection]},d.createElement(vt.Item,{key:"desc"},"desc"),d.createElement(vt.Item,{key:"asc"},"asc")),t=d.createElement(vt,{onClick:e=>{const t=isNaN(Number(e.key))?e.key:Number(e.key);this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{formatUnit:t})})},selectedKeys:[String(this.state.highLevelConfig.formatUnit)]},d.createElement(vt.Item,{key:"1000"},"Ki, Mi, Gi by 1000"),d.createElement(vt.Item,{key:"1024"},"Ki, Mi, Gi by 1024"),d.createElement(vt.Item,{key:"humantime"},"Human time duration"));return d.createElement("div",null,d.createElement(wt,{checked:this.state.highLevelConfig.shared,onChange:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{shared:e.target.checked})})}},"Multi Series in Tooltip, order value"),d.createElement(Tt,{overlay:e},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.highLevelConfig.sharedSortDirection," ",d.createElement(M,null))),d.createElement("br",null),d.createElement(wt,{checked:this.state.legend,onChange:e=>{this.setState({legend:e.target.checked})}},"Show Legend"),d.createElement("br",null),d.createElement(wt,{checked:"short"===this.state.highLevelConfig.precision,onChange:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{precision:e.target.checked?"short":"origin"})})}},"Value format with:"," "),d.createElement(Tt,{overlay:t},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},Zu[this.state.highLevelConfig.formatUnit]," ",d.createElement(M,null))))}render(){this.state;const{extraRender:e,data:t,showHeader:n=!0}=this.props,{title:r,metric:i}=t,a=this.getGraphConfig(t);return d.createElement("div",{className:this.state.legend?"graph-container graph-container-hasLegend":"graph-container"},n&&d.createElement("div",{className:"graph-header",style:{height:this.headerHeight,lineHeight:`${this.headerHeight}px`}},d.createElement("div",null,r||i),d.createElement("div",{className:"graph-extra"},d.createElement("span",{className:"graph-operationbar-item",key:"info"},d.createElement(jt,{placement:"left",content:this.getContent(),trigger:"click",autoAdjustOverflow:!1,getPopupContainer:()=>document.body},d.createElement(yt,{className:"",type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(P,null)))),!1===this.props.isShowRefresh?null:d.createElement("span",{className:"graph-operationbar-item",key:"sync"},d.createElement(yt,{type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(ue,{onClick:this.refresh}))),!1===this.props.isShowShare?null:d.createElement("span",{className:"graph-operationbar-item",key:"share"},d.createElement(yt,{type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(he,{onClick:this.shareChart}))),e&&S.isFunction(e)?e(this):null)),this.props.graphConfigInnerVisible?d.createElement(wu,{data:a,onChange:(...e)=>{this.updateGraphConfig(e[2]||{})}}):null,this.renderChart(),d.createElement(yu,{style:{display:this.state.legend?"block":"none",overflowY:"auto",maxHeight:"35%"},graphConfig:a,series:this.getZoomedSeries(),onSelectedChange:this.handleLegendRowSelectedChange,comparisonOptions:a.comparisonOptions}))}}var eh,th,nh={exports:{}};window;var rh=pe(nh.exports=(eh=tn,th=Y.exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){e.exports=eh},function(e,t){e.exports=th},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(8),i=n(9),a=n(10),o=n(11);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}var o,s,l;v(e,t,a,{once:!0}),"error"!==t&&(s=i,l={once:!0},"function"==typeof(o=e).on&&v(o,"error",s,l))}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,a,o,s;if(c(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=u(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var c=l.length,u=g(l,c);for(n=0;n<c;++n)a(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(6);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(6);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){},function(e,t,n){n.r(t),n.d(t,"default",(function(){return Q}));var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=n(2),l=n.n(s),c=n(3),u=n.n(c),h=n(0),p=n(1);let d=null,f=null;function m(e,t={}){let n=document.createElement(e);return Object.keys(t).forEach((e=>{n[e]=t[e]})),n}function g(e,t,n){return(window.getComputedStyle(e,n||null)||{display:"none"})[t]}function v(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;for(;t!==document;){if("none"===g(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}let y=0,x=null;function E(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=b.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:n}=e,r=new ResizeObserver((()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==n))&&T(e)})),{detached:i,rendered:a}=v(e);e.__resize_observer_triggered__=!1===i&&!1===a,e.__resize_observer__=r,r.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){T(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(y||(n='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(r=document.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(r),x=r),function(e){let t=g(e,"position");t&&"static"!==t||(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};let n=m("div",{className:"resize-triggers"}),r=m("div",{className:"resize-expand-trigger"}),i=m("div"),a=m("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:a},w(e),e.addEventListener("scroll",C,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=v(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}var n,r;e.__resize_listeners__.push(t),y++}function b(){let{rendered:e,detached:t}=v(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(w(this),this.addEventListener("scroll",C,!0)),this.__resize_rendered__=e,T(this))}function C(){var e,t;w(this),this.__resize_raf__&&(e=this.__resize_raf__,f||(f=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),f(e)),this.__resize_raf__=(t=()=>{let e=function(e){let{width:t,height:n}=e.__resize_last__,{offsetWidth:r,offsetHeight:i}=e;return r!==t||i!==n?{width:r,height:i}:null}(this);e&&(this.__resize_last__=e,T(this))},d||(d=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),d(t))}function T(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((t=>{t.call(e,e)}))}function w(e){let{expand:t,expandChild:n,contract:r}=e.__resize_triggers__,{scrollWidth:i,scrollHeight:a}=r,{offsetWidth:o,offsetHeight:s,scrollWidth:l,scrollHeight:c}=t;r.scrollLeft=i,r.scrollTop=a,n.style.width=o+1+"px",n.style.height=s+1+"px",t.scrollLeft=l,t.scrollTop=c}var S=n(7),k=n.n(S);function _(e,t){var n=e.length;return t<n?e[t]:_(e,t-n)}function A(e,t){return"X"===t?1e3*e:e}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.getBoundingClientRect(),i=t.touches[n].clientX,a=t.touches[n].clientY;return{offsetX:i-r.left,offsetY:a-r.top,clientX:i,clientY:a}}function I(e){var t=String(e);if(e>=1e3){t=h.format(".5s")(e);var n=/[kMGTPEZY]$/;if(n.test(t)){var r=t[t.length-1];t=t.replace(n,""),t=parseFloat(t)+r}}return t}function M(e,t){var n=e;return null!==e&&"function"==typeof t&&(n=t(e)),n}var N=function(){function e(t,n,r){l()(this,e),this.options=void 0,this.ctx=void 0,this.yAxis=void 0,this.options=t,this.ctx=n,this.yAxis=r}return u()(e,[{key:"init",value:function(){var e=this.options,t=e.chart.width,n=e.timestamp,r=e.xmin,i=e.xmax,a=h.scaleTime().range([this.yAxis.tickMaxWidth,t]);return a.domain([A(i,n)+(r===i?1e3:0),A(r,n)-(r===i?1e3:0)]),a}},{key:"draw",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=n.time,o=e.ticks(Math.floor(r.width/90));i.ticks&&(o=i.ticks);var s=r.height-i.tickpadding-i.labels.fontSize;t.beginPath(),o.forEach((function(n){var r=e(n);r&&(t.moveTo(r,s),t.lineTo(r,s-i.tickLength))})),t.lineWidth=1,t.strokeStyle=i.tickColor,t.stroke(),t.closePath(),t.beginPath(),t.moveTo(0,s-i.tickLength),t.lineTo(r.width,s-i.tickLength),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke(),t.closePath(),t.textAlign="center",t.textBaseline="bottom",t.fillStyle=i.labels.color,t.font="".concat(i.labels.fontSize,"px Palantino"),o.forEach((function(n,s){var l="%H:%M";0!==n.getSeconds()&&(l="%H:%M:%S"),0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&(l="%m-%d"),i.labels.timeFormat&&(l=i.labels.timeFormat);var c=n;if(a&&a.timezoneOffset){var u=n.getTimezoneOffset(),p=n.getTime()+60*u*1e3+60*a.timezoneOffset*1e3;c=new Date(p)}if(i.ticks&&i.ticks.length>1){var d=e(n);0===s?d+=l.length*i.labels.fontSize/4+1:s===o.length-1&&(d-=l.length*i.labels.fontSize/4-1),t.fillText(h.timeFormat(l)(c),d,r.height)}else e(n)&&t.fillText(h.timeFormat(l)(c),e(n),r.height)}))}},{key:"drawPlotLines",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=n.xAxis.plotLines,o=r.height-i.tickpadding-i.labels.fontSize;Array.isArray(a)&&a.forEach((function(r){var a=e("X"===n.timestamp?1e3*r.value:r.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(a,0),t.lineTo(a,o-i.tickLength),t.strokeStyle=r.color,t.stroke(),t.setLineDash([])}))}}]),e}(),F=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.tickLength=void 0,this.ticks=void 0,this.tickMaxWidth=void 0,this.options=t;var r=t.yAxis;n.font="".concat(r.labels.fontSize,"px Palantino"),this.ctx=n,this.tickLength=Math.floor(t.chart.height/50),this.ticks=[],this.tickMaxWidth=0}return u()(e,[{key:"init",value:function(){var e=this.options,t=e.chart,n=e.xAxis,r=h.scaleLinear().range([t.height-(n.labels.fontSize+n.tickpadding+n.tickLength),20]);return this.setDomain(r,this.options),r}},{key:"getRealData",value:function(e){var t=this.options,n=t.yAxis.plotLines,r=t.ykey,i=t.fillNull;return Array.isArray(e)?(Array.isArray(n)&&n.forEach((function(t){"number"==typeof t.value&&e.push(o()({},r,t.value))})),"number"==typeof i&&e.push(o()({},r,i)),e):[]}},{key:"getPlotLinesMaxAbs",value:function(){var e,t=this.options.yAxis.plotLines;return Array.isArray(t)&&t.forEach((function(t){(!e||Math.abs(e)<Math.abs(t.value))&&(e=t.value)})),e}},{key:"setDomain",value:function(e,t){var n=t.ymin,r=t.ymax,i=this.options.yAxis,a=this.getPlotLinesMaxAbs(),o=this.tickLength;if(n===r){var s=(r-n)/(this.tickLength-1),l=s/2||r||1;o=0===s?1:this.tickLength,n-=l,r+=l}if(n>r){var c=n;n=r,r=c}a&&(a<n&&(n=a),a>r&&(r=a)),e.domain([n,r]),e.nice(o);var u,h,d,f,m=e.ticks(o),g=(u=m,h=this.ctx,d=i.tickValueFormatter,f=u.map((function(e){var t;return t="function"==typeof d?d(e):I(e),h.measureText(t).width})),Object(p.max)(f)+5);this.ticks=m,this.tickMaxWidth=g}},{key:"draw",value:function(e){var t=this,n=this.ctx,r=this.options,i=r.yAxis,a=r.chart;n.beginPath(),n.fillStyle="#fff",n.fillRect(0,0,this.tickMaxWidth,a.height),n.stroke(),n.closePath(),n.textAlign="right",n.textBaseline="middle",n.strokeStyle=i.labels.color,n.lineWidth=1,n.fillStyle=i.labels.color,this.ticks.forEach((function(r){var a;a="function"==typeof i.tickValueFormatter?i.tickValueFormatter(r):I(r);var o=e(r);n.fillText(a,t.tickMaxWidth-5,o)}))}},{key:"drawGridLine",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.yAxis;t.beginPath(),this.ticks.forEach((function(n){var i=e(n);t.moveTo(0,i),t.lineTo(r.width,i)})),t.strokeStyle=i.gridLineColor,t.stroke(),t.closePath()}},{key:"drawPlotLines",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.yAxis,a=n.yAxis.plotLines;Array.isArray(a)&&a.forEach((function(n){var a=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(0,a),t.lineTo(r.width,a),t.strokeStyle=n.color,t.stroke(),t.setLineDash([]),t.textAlign="right",t.textBaseline="top",t.shadowColor="#fff",t.shadowBlur=1,t.lineWidth=1,t.fillStyle=n.color,t.font="".concat(i.labels.fontSize,"px Palantino"),t.strokeText(String(n.value),r.width-10,a),t.fillText(String(n.value),r.width-10,a)}))}}]),e}();function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t){return"X"===t?1e3*e:e}function D(e){var t,n=e.series,r=e.x,i=e.xkey,a=e.ykey,o=e.ykey2,s=e.oykey,l=e.timestamp,c=e.fillNull,u=(t=function(e,t){return(n=R(e[i],l))<(r=t)?-1:n>r?1:n>=r?0:NaN;var n,r},{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}).left,h=new Date(r).getTime(),d=[];return"[object Array]"!==Object.prototype.toString.call(n)?[]:(n.forEach((function(e,t){if(I=e,M=o,!Object(p.some)(I.data,(function(e){return M&&M in e}))&&!1!==e.visible){var n=e.name,f=e.color,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"[object Function]"===Object.prototype.toString.call(t)&&t(r)&&(n[r]=e[r]);return n}(e,(function(e){return"data"!==e})),g=e.data,v=void 0===g?[]:g;if("[object Array]"===Object.prototype.toString.call(v)&&0!==(v=v.filter((function(e){return"number"==typeof e[a]||"number"==typeof c}))).length){var y,x=u(v,r),E=v[x-1],b=v[x];if(E&&b){var C=R(E[i],l),T=R(b[i],l),w=E[a],S=b[a];null===w&&void 0!==c&&(w=c),null===S&&void 0!==c&&(S=c),y=h-C<T-h?P(P({},E),{},{name:n,color:f,timestamp:C,value:w,origin:E[s],serieIndex:t,serieOptions:m}):P(P({},b),{},{name:n,color:f,timestamp:T,value:S,origin:b[s],serieIndex:t,serieOptions:m}),d.push(y)}else if(E){var k=R(E[i],l),_=E[a];null===_&&void 0!==c&&(_=c),y=P(P({},E),{},{name:n,color:f,timestamp:k,value:_,origin:E[s],serieIndex:t,serieOptions:m}),d.push(y)}else if(b){var A=R(b[i],l),O=b[a];null===O&&void 0!==c&&(O=c),y=P(P({},b),{},{name:n,color:f,timestamp:A,value:O,origin:b[s],serieIndex:t,serieOptions:m}),d.push(y)}}}var I,M})),d)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(){function e(t,n,r,i){l()(this,e),this.options=void 0,this.ctx=void 0,this.flag=void 0,this.container=void 0,this.isMouserover=void 0,this.options=t,this.ctx=n,this.flag=!1,this.container=r,this.init(r,i),this.isMouserover=!1}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart.id,r=document.createElement("div");r.id="".concat(n,"-tooltip"),r.className="ts-graph-tooltip",document.getElementById(r.id)||document.body.append(r)}},{key:"clear",value:function(){var e=this.options,t=e.ratio,n=e.chart,r=n.id,i=n.containerWidth,a=n.containerHeight,o=document.getElementById("".concat(r,"-tooltip"));this.isMouserover=!1,this.ctx.save(),this.ctx.setTransform(1*t,0,0,1*t,0,0),this.ctx.clearRect(0,0,i,a),this.ctx.restore(),o.style.top="-99999px",o.lastChild&&o.removeChild(o.lastChild)}},{key:"getNearestPoints",value:function(e,t,n,r){var i=this.options,a=i.series,o=void 0===a?[]:a,s=i.chart.colors,l=i.tooltip.shared,c=i.xkey,u=i.ykey,h=i.ykey2,d=i.oykey,f=i.timestamp,m=i.fillNull,g=this.container.getBoundingClientRect(),v=e.offsetX||e.clientX-g.left,y=t.invert(v),x=[];if(!1!==this.isMouserover){x=D({x:y,xkey:c,ykey:u,ykey2:h,oykey:d,timestamp:f,series:o,fillNull:m}).map((function(e){return z(z({},e),{},{x:t(e.timestamp),y:n(e.value),color:e.color||_(s,e.serieIndex)})}));var E,b,C=Object(p.groupBy)(x,"x");if(Object(p.keys)(C).length>1){var T=Number.POSITIVE_INFINITY;for(var w in C)if(Object.prototype.hasOwnProperty.call(C,w)){var S=(E=e.offsetX,b=Number(w),Math.sqrt(Math.pow(b-E,2)));S<T&&(T=S,x=C[w])}}if(!l){var k=Number.POSITIVE_INFINITY;x.forEach((function(t){var n,r,i=(n={x:e.offsetX,y:e.offsetY},r=t,Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)));i<k&&(k=i,x=[t])}))}r(x)}}},{key:"draw",value:function(e,t,n){var r=this,i=t.xScales,a=t.yScales,o=t.yAxis;this.isMouserover=!0,this.getNearestPoints(e,i,a,(function(t){if(r.clear(),t.length){if(t[0].x<o.tickMaxWidth)return;r.drawCrosshair(t[0].x),r.drawSymbol(t),r.drawModal(t,e)}n&&"[object Function]"===Object.prototype.toString.call(n)&&n(t)}))}},{key:"drawModal",value:function(e,t){var n=this.options,r=n.chart,a=r.id,o=r.renderTo,s=n.tooltip,l=n.time,c=n.notDisplayedSeries,u=o.offsetWidth,d=o.offsetHeight,f=document.getElementById("".concat(a,"-tooltip")),m=document.createElement("div"),g=e,v=((d=window.innerHeight/1.5)-18-100)/15,y=!1;if(s.sharedSortDirection&&(e=Object(p.orderBy)(e,(function(e){return e.value}),s.sharedSortDirection)),e.length>v&&(e=e.slice(0,v),y=!0),m.className="ts-graph-tooltip-content",f.appendChild(m),"[object Function]"===Object.prototype.toString.call(s.formatter))m.innerHTML=s.formatter(i()(e),i()(g));else{var x=e[0],E=document.createDocumentFragment(),b=document.createElement("ul"),C=document.createElement("li"),T=new Date(x.timestamp);if(l&&l.timezoneOffset){var w=T.getTimezoneOffset(),S=T.getTime()+60*w*1e3+60*l.timezoneOffset*1e3;T=new Date(S)}var k=document.createTextNode(h.timeFormat(s.timeFormat)(T));if(C.appendChild(k),C.style.color="#666",b.style.maxWidth="".concat(window.innerWidth/1.5,"px"),b.appendChild(C),E.appendChild(b),e.forEach((function(e){var t=e.color,n=e.name,r=e.origin,i=e.filledNull;if(!(c.indexOf(n)>-1)){var a=document.createElement("li");if(t){var o=document.createElement("span"),l=document.createTextNode("● ");o.style.color=t,o.appendChild(l),a.appendChild(o)}if(n){var u=document.createTextNode("".concat(n,": "));a.appendChild(u)}var d=r;if(Object(p.isNumber)(d)){var f,m=document.createElement("strong");f="function"==typeof s.pointValueformatter?s.pointValueformatter(d):"origin"===s.precision?d:"short"===s.precision?function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(h.format(".5s")(d)):s.precision>0?h.format(",."+s.precision+"f")(d):h.format(",.3f")(d),f+=i?"(空值填补,仅限看图使用)":"";var g=document.createTextNode(f);m.appendChild(g),a.appendChild(m)}b.appendChild(a)}})),y){var _=document.createElement("li"),A=document.createTextNode("......");_.appendChild(A),b.appendChild(_)}m.appendChild(E)}var O=m.offsetWidth,I=m.offsetHeight,M=this.container.getBoundingClientRect(),N=t.layerX+M.left,F=t.layerY+M.top;f.style.left="".concat(N-O-20,"px"),f.style.top="".concat(F+20,"px"),N-O-20<0&&(f.style.left="".concat(N+20,"px"),N+20+O>u&&(f.style.left="0px")),F+20+I>d&&(f.style.top=F-I-20<0?"0px":"".concat(F-I-20,"px")),f.style.zIndex="9999",f.style.visibility="visible"}},{key:"drawSymbol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.ctx,n=this.options;e.forEach((function(e){var r=e.x,i=e.y,a=e.color,o=e.name;n.notDisplayedSeries.indexOf(o)>-1||(t.beginPath(),t.arc(r,i,5,0,360,!1),t.lineWidth=1,t.fillStyle=a,t.fill(),t.beginPath(),t.arc(r,i,3,0,360,!1),t.lineWidth=1,t.fillStyle="white",t.fill())}))}},{key:"drawCrosshair",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=r.height-i.tickpadding-i.labels.fontSize-i.tickLength;t.beginPath(),t.moveTo(e,0),t.lineTo(e,a),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke()}},{key:"destroy",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-tooltip"));t&&t.parentNode&&t.parentNode.removeChild(t)}}]),e}(),j=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.options=t,this.ctx=n}return u()(e,[{key:"draw",value:function(e,t){var n=this.options,r=n.series,i=n.chart,a=i.colors,o=i.height,s=n.xAxis,l=n.xkey,c=n.ykey,u=n.ykey2,d=n.timestamp,f=n.fillNull,m=n.notDisplayedSeries,g=n.curve,v=this.options.line.width,y=this.options.area.opacity,x=this.ctx,E=function(t){var n="X"===d?1e3*t[l]:t[l];return e(new Date(n))},b=function(e,n){var r=e[n];return"number"!=typeof r||isNaN(r)?"number"==typeof f?t(f):void 0:t(r)},C=function(e){return"number"==typeof e[c]||"number"==typeof f};Object(p.sortBy)(r,"zIndex").forEach((function(e,t){if(!1!==e.visible&&!(m.indexOf(e.name)>-1)){var n=e.color||_(a,t);if(e.color=n,y>0||e.opacity){x.beginPath();var r=h.area().x(E).y0((function(e){return u&&u in e?b(e,c):o-s.tickpadding-s.labels.fontSize-5})).y1((function(e){return b(e,u&&u in e?u:c)})).defined(C).context(x);g.enabled&&"smooth"===g.mode&&r.curve(h.curveMonotoneX),r(e.data||[]),x.fillStyle=n,x.globalAlpha=y||(e.opacity?e.opacity:.5),x.fill(),x.closePath()}if(v>0&&void 0===e.opacity){x.beginPath();var i=h.line().x(E).y((function(e){return b(e,c)})).defined(C).context(x);g.enabled&&"smooth"===g.mode&&i.curve(h.curveMonotoneX),x.lineTo(0,0),i(e.data||[]),x.lineJoin="round",x.lineWidth=v,x.strokeStyle=n,x.lineCap="round",x.globalAlpha=1,x.setLineDash(e.lineDash||[]),x.stroke(),x.closePath()}}}))}}]),e}(),G=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.options=t,this.ctx=n}return u()(e,[{key:"draw",value:function(e,t,n){var r=this.options,i=r.series,a=r.chart,o=a.colors,s=a.height,l=a.width,c=r.xAxis,u=r.timestamp,d=r.xkey,f=r.ykey,m=r.notDisplayedSeries,g=this.ctx,v=this.options.area.opacity;Object(p.sortBy)(i,"zIndex").forEach((function(r,i){if(!1!==r.visible&&!(m.indexOf(r.name)>-1)){var a=r.color||_(o,i);r.color=a,g.fillStyle=a,g.globalAlpha=v;var p=h.scaleBand().domain(r.data.map((function(e){return"X"===u?1e3*e[d]:e[d]}))).range([0,l]).padding(.3),y=(null==n?void 0:n.k)||1;r.data.forEach((function(n){var r="X"===u?1e3*n[d]:n[d];g.fillRect(e(r)-p.bandwidth()*y/2,t(n[f]),p.bandwidth()*y,s-t(n[f])-c.tickpadding-c.labels.fontSize-5)})),g.globalAlpha=1}}))}}]),e}(),$=function(){function e(t,n,r,i){l()(this,e),this.options=void 0,this.reset=void 0,this.options=t,this.init(r,i),this.reset=n}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart,r=n.id,i=n.containerHeight,a=document.getElementById("".concat(r,"-zoom"));a&&a.remove(),a=document.createElement("div");var o=document.createElement("div"),s=document.createElement("a"),l=document.createTextNode("Reset zoom");a.id="".concat(r,"-zoom"),a.className="ts-graph-zoom",o.id="".concat(r,"-zoom-marker"),o.className="ts-graph-zoom-marker",o.style.height="".concat(i,"px"),s.id="".concat(r,"-zoom-resetBtn"),s.className="ts-graph-zoom-resetBtn",s.appendChild(l),a.appendChild(o),a.appendChild(s),e.insertBefore(a,t),this.onReset()}},{key:"onReset",value:function(){var e=this,t=this.options.chart.id;document.getElementById("".concat(t,"-zoom-resetBtn")).addEventListener("click",(function(t){t.stopPropagation(),e.reset(),e.clearResetBtn()}))}},{key:"onZoom",value:function(e,t,n){var r=this.options.chart.width,i=t.offsetX-e.offsetX;if(i){var a=r/Math.abs(i),o=t.offsetX>e.offsetX?e.offsetX:t.offsetX,s=h.zoomIdentity.translate(-o*a,0).scale(a);this.drawResetBtn(),n(s)}}},{key:"clearMarker",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-zoom-marker"));t.style.display="none",t.style.width="0px",t.style.left="unset",t.style.right="unset"}},{key:"drawMarker",value:function(e,t){var n=this.options.chart.marginLeft,r=e.offsetX,i=t.offsetX,a=this.options.chart,o=a.id,s=a.containerWidth,l=document.getElementById("".concat(o,"-zoom-marker"));l.style.display="block",l.style.top="0px",r<i?(l.style.right="unset",l.style.left="".concat(r+n,"px"),l.style.width="".concat(i-r,"px")):(l.style.left="unset",l.style.right="".concat(s-r-n,"px"),l.style.width="".concat(r-i,"px"))}},{key:"clearResetBtn",value:function(){var e=this.options.chart.id;document.getElementById("".concat(e,"-zoom-resetBtn")).style.display="none"}},{key:"drawResetBtn",value:function(){var e=this.options.chart.id;document.getElementById("".concat(e,"-zoom-resetBtn")).style.display="block"}}]),e}(),Y=function(){function e(t,n,r,i){var a=this;l()(this,e),this.options=void 0,this.onLegendItemClick=void 0,this.handelLegendItemClick=function(e){var t=e.currentTarget;if(t){t.classList.contains("ts-graph-legend-item-active")?t.classList.remove("ts-graph-legend-item-active"):t.classList.add("ts-graph-legend-item-active");var n=t.getAttribute("data-serie");n&&a.onLegendItemClick(n)}},this.options=t,this.init(r,i),this.onLegendItemClick=n}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart.id,r=document.createElement("div");r.id="".concat(n,"-legend"),r.className="ts-graph-legend",document.getElementById(r.id)||e.insertBefore(r,t)}},{key:"initEvent",value:function(){var e=this,t=this.options.chart.id;document.getElementById("".concat(t,"-legend")).querySelectorAll(".ts-graph-legend-item").forEach((function(t){t.removeEventListener("click",e.handelLegendItemClick),t.addEventListener("click",e.handelLegendItemClick)}))}},{key:"updateOptions",value:function(e){this.options=e}},{key:"draw",value:function(){var e=this.options,t=e.chart.id,n=e.series,r=e.legend,i=document.getElementById("".concat(t,"-legend"));if(r.enabled){if("[object Array]"===Object.prototype.toString.call(n)){i.innerHTML="";var a=document.createDocumentFragment();n.forEach((function(e){var t=document.createElement("span"),n=document.createElement("span"),r=document.createElement("span"),i=document.createElement("span"),o=document.createTextNode(e.name);t.className="ts-graph-legend-item",t.setAttribute("data-serie",e.name),n.className="ts-graph-legend-item-symbol",r.className="ts-graph-legend-item-symbol-line",r.style.borderColor=e.color,i.className="ts-graph-legend-item-symbol-point",i.style.backgroundColor=e.color,n.appendChild(r),n.appendChild(i),t.appendChild(n),t.appendChild(o),a.appendChild(t)})),i.appendChild(a)}this.initEvent()}}}]),e}(),U=function(){function e(t,n){l()(this,e),this.options=void 0,this.options=t,this.init(n)}return u()(e,[{key:"init",value:function(e){var t=this.options.chart.id,n=document.getElementById("".concat(t,"-shapes"));n&&n.remove(),(n=document.createElement("div")).id="".concat(t,"-shapes"),n.className="ts-graph-shapes",e.appendChild(n),n.addEventListener("mouseover",this.onMouseMove.bind(this)),n.addEventListener("click",this.onClick.bind(this))}},{key:"onMouseMove",value:function(e){var t=this.options,n=t.shapes,r=t.onShapeMouseOver;if("IMG"===e.target.tagName){var i=Object(p.find)(n,{id:e.target.dataset.id});i&&"function"==typeof r&&r(e,i)}}},{key:"onClick",value:function(e){var t=this.options,n=t.shapes,r=t.onShapeClick;if("IMG"===e.target.tagName){var i=Object(p.find)(n,{id:e.target.dataset.id});i&&"function"==typeof r&&r(e,i)}}},{key:"draw",value:function(e,t){var n=this.options,r=n.chart.id,i=n.shapes,a=document.getElementById("".concat(r,"-shapes"));a&&"[object Array]"===Object.prototype.toString.call(i)&&(a.innerHTML="",i.forEach((function(n){var r=document.createElement("img");r.src=n.imgData,r.dataset.id=n.id,r.style.position="absolute",r.onload=function(){r.style.left="".concat(e(n.x)+r.width/2,"px"),r.style.top="".concat(t(n.y)-r.height/2,"px")},a.appendChild(r)})))}},{key:"destroy",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-shapes"));t&&(t.removeEventListener("mouseover",this.onMouseMove),t.removeEventListener("click",this.onClick),t.parentNode&&(t.innerHTML=""))}}]),e}();function V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(12);var K=new k.a,Q=function(){function e(t){var n=this;l()(this,e),this.options=void 0,this.container=void 0,this.frontContext=void 0,this.backContext=void 0,this.eventCanvas=void 0,this.frontCanvas=void 0,this.backCanvas=void 0,this.xAxis=void 0,this.xScales=void 0,this.yAxis=void 0,this.yScales=void 0,this.line=void 0,this.bar=void 0,this.legend=void 0,this.tooltip=void 0,this.zoom=void 0,this.transform=void 0,this.shapes=void 0,this.showTooltip=function(e){n.tooltip.draw(e,n)},this.hideTooltip=function(){n.tooltip.clear()},this.getZoomedSeries=function(){var e=n.options,t=e.chart.renderTo,r=e.series,i=e.timestamp,a=e.xkey,o=t.offsetWidth;return r.map((function(e){if("[object Array]"===Object.prototype.toString.call(e.data)){var t=e.data.filter((function(e){var t="X"===i?1e3*e[a]:e[a],r=n.xScales(new Date(t));return r>=0&&r<=o}));return q(q({},e),{},{data:t})}return e}))},this.handleResize=function(){var e=n.options.chart,t=e.renderTo.offsetWidth,r=e.renderTo.offsetHeight;n.options.chart.width=t-e.marginLeft-e.marginRight,n.options.chart.height=r-e.marginTop-e.marginBottom,n.options.chart.containerWidth=t,n.options.chart.containerHeight=r,n.container.style.width="".concat(t,"px"),n.container.style.height="".concat(r,"px"),n.retinaScaled(n.backCanvas,"back"),n.retinaScaled(n.frontCanvas,"front"),n.retinaScaled(n.eventCanvas,"event"),n.initScales(),n.initZoom(),n.draw(!1)},this.handleZoom=function(e,t){if(n.options.onZoomWithoutDefult){var r;t&&(r=Object(p.sortBy)(t,"offsetX").map((function(e){return n.xScales.invert(e.offsetX)}))),n.options.onZoomWithoutDefult(r)}else{var i=n.options,a=i.ykey,o=i.yAxis,s=i.ykeyFormatter,l=n.options.series;if(e?(n.transform=e,n.xScales=e.rescaleX(n.xScales),l=n.getZoomedSeries()):(n.transform=void 0,n.xScales=n.xAxis.init()),Array.isArray(l)){var c,u=o.min||-1/0,h=o.max||1/0,d=V(l);try{for(d.s();!(c=d.n()).done;){var f=c.value,m=Array.isArray(f.data)?f.data:[],g=void 0;for(g=0;g<m.length;g++){var v=M(m[g][a],s);null!==v&&(u<v&&(u=v),h>v&&(h=v))}}}catch(y){d.e(y)}finally{d.f()}n.yAxis.setDomain(n.yScales,{ymin:u,ymax:h})}n.options.onZoom(n.getZoomedSeries)}n.draw(!1)},this.handleLegendItemClick=function(e){var t=n.options.notDisplayedSeries;-1===t.indexOf(e)?t.push(e):n.options.notDisplayedSeries=t.filter((function(t){return t!==e})),n.draw(!1)};var r={ratio:window.devicePixelRatio||1,xkey:0,ykey:1,ykey2:2,oykey:"__originValue",timestamp:"x",chart:{id:Object(p.uniqueId)("ts-graph-"),colors:["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"],width:t.chart.renderTo.offsetWidth,height:t.chart.renderTo.offsetHeight||350,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10},xAxis:{visible:!0,lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",labels:{color:"#999",fontSize:11}},yAxis:{visible:!0,lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",gridLineColor:"#efefef",labels:{color:"#999",fontSize:11}},type:"line",line:{enable:!0,width:2},area:{opacity:0},bars:{},stack:{enabled:!1},curve:{enabled:!1},tooltip:{shared:!0,cascade:!1,cascadeScope:void 0,timeFormat:"%Y-%m-%d %H:%M:%S"},series:[],legend:{align:"center",verticalAlign:"top",enabled:!1},fillNull:void 0,onClick:function(){},onRightClick:function(){},onZoom:function(){},onShapeMouseOver:function(){},onShapeClick:function(){}},i=Object(p.merge)({},r,t);void 0===t.chart.marginTop&&i.legend.enabled&&(i.chart.marginTop=20),this.handleResize=Object(p.debounce)(this.handleResize,300),this.init(i)}return u()(e,[{key:"init",value:function(e){var t=e.chart;this.options=e,this.options.notDisplayedSeries=[],this.options.chart.containerWidth=t.width,this.options.chart.containerHeight=t.height,this.options.chart.width=t.width-t.marginLeft-t.marginRight,this.options.chart.height=t.height-t.marginTop-t.marginBottom,this.createContainer(),this.createCanvas(),this.initSeries(),this.initScales(),this.initEvent(),"line"===this.options.type&&this.initLine(),"bar"===this.options.type&&this.initBar(),this.initLegend(),this.initTooltip(),this.initZoom(),this.initShapes(),this.draw()}},{key:"clearRect",value:function(e){var t=this.options.chart,n=t.containerWidth,r=t.containerHeight;e.clearRect(0,0,n,r)}},{key:"draw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.transform;this.clearRect(this.backContext),this.options.xAxis.visible&&this.yAxis.drawGridLine(this.yScales),this.options.xAxis.visible&&this.xAxis.draw(this.xScales),"line"===this.options.type&&this.line.draw(this.xScales,this.yScales),"bar"===this.options.type&&this.bar.draw(this.xScales,this.yScales,t),this.xAxis.drawPlotLines(this.xScales),this.yAxis.drawPlotLines(this.yScales),this.options.yAxis.visible&&this.yAxis.draw(this.yScales),e&&this.legend.draw(),this.shapes.draw(this.xScales,this.yScales)}},{key:"update",value:function(e){var t=Object(p.assign)({},this.options,e);e.series&&(t.series=e.series),this.options=t,this.offEvents(),this.initSeries(),this.initScales(),this.initEvent(),"line"===this.options.type&&this.initLine(),"bar"===this.options.type&&this.initBar(),this.initTooltip(),this.initShapes(),this.legend.updateOptions(t),this.draw()}},{key:"getSeries",value:function(){return i()(this.options.series)}},{key:"initEvent",value:function(){var e,t=this.options.tooltip,n=t.cascade,r=t.cascadeScope,i=r?"plotmove:".concat(r):"plotmove",a=r?"plotleave:".concat(r):"plotleave",o=!1,s={},l={},c=!1,u=this,d=Object(p.debounce)((function(e){c&&(u.tooltip.draw(e,u),o&&u.zoom.drawMarker(s,e))}),5),f=Object(p.throttle)((function(){u.tooltip.clear()}),5);h.select(this.eventCanvas).on("mousemove",(function(){c=!0,d(h.event),n&&K.emit(i,h.event)})).on("mouseleave",(function(){e=h.event,c=!1,f(),n&&K.emit(a)})).on("mousedown",(function(){1===h.event.which&&(o=!0,s=h.event)})).on("mouseup",(function(){h.event.stopPropagation();var e=h.event;s&&s.offsetX!==e.offsetX?(u.zoom.clearMarker(),u.zoom.onZoom(s,e,(function(t){u.handleZoom(t,[s,e])}))):u.options.onClick(h.event,u.xScales.invert(h.event.offsetX),u.yScales.invert(h.event.offsetY)),o=!1,s={}})).on("contextmenu",(function(){u.options.onRightClick(h.event,u.xScales.invert(h.event.offsetX),u.yScales.invert(h.event.offsetY)),h.event.preventDefault()})).on("touchstart",(function(){h.event.touches.length>1&&(o=!0)})).on("touchmove",(function(){var e=O(u.eventCanvas,h.event);1===h.event.touches.length&&u.tooltip.draw(e,u),o&&(s=e,l=O(u.eventCanvas,h.event,1),u.zoom.drawMarker(s,l))})).on("touchend",(function(){c=!1,f(),s&&s.offsetX!==l.offsetX?(u.zoom.clearMarker(),u.zoom.onZoom(s,l,(function(e){u.handleZoom(e,[s,l])}))):u.options.onClick(h.event,u.xScales.invert(h.event.offsetX),u.yScales.invert(h.event.offsetY)),o=!1,s={},l={}})),n&&(K.on(i,this.showTooltip),K.on(a,this.hideTooltip)),window.addEventListener("mouseup",(function(){if(!Object(p.isEmpty)(s)){var t=e;o=!1,u.zoom.clearMarker(),u.zoom.onZoom(s,t,(function(e){u.handleZoom(e,[s,t])})),s={}}})),E(this.options.chart.renderTo,this.handleResize)}},{key:"retinaScaled",value:function(e,t){var n=this.options,r=n.chart,i=n.ratio,a=e.getContext("2d"),o="front"===t?r.containerWidth:r.width,s="front"===t?r.containerHeight:r.height,l="front"===t?"0px":"".concat(r.marginLeft,"px"),c="front"===t?"0px":"".concat(r.marginTop,"px");e.width=o*i,e.height=s*i,e.style.width="".concat(o,"px"),e.style.height="".concat(s,"px"),e.style.position="absolute",e.style.left=l,e.style.top=c,"front"===t&&a.translate(r.marginLeft*i,r.marginTop*i),a.scale(i,i)}},{key:"createContainer",value:function(){var e=this.options.chart,t=document.createElement("div");t.style.position="relative",t.style.width="".concat(e.containerWidth,"px"),t.style.height="".concat(e.containerHeight,"px"),t.style.overflow="hidden",t.className="d3-graph-container",e.renderTo.appendChild(t),this.container=t}},{key:"createCanvas",value:function(){var e=this.options.chart.id;function t(t){var n=document.createElement("canvas"),r=n.getContext("2d");n.setAttribute("id","".concat(e,"-").concat(t,"Canvas")),this.container.appendChild(n),this["".concat(t,"Canvas")]=n,this["".concat(t,"Context")]=r,this.retinaScaled(n,t)}t.call(this,"back"),t.call(this,"front"),t.call(this,"event")}},{key:"initSeries",value:function(){var e=this.options,t=e.fillNull,n=e.series,r=e.xkey,i=e.ykey,a=e.ykey2,s=e.ykeyFormatter,l=e.oykey,c=e.yAxis,u=e.stack,h=-1/0,d=1/0,f=c.min,m=c.max;if(Array.isArray(n)){var g=[];n.forEach((function(e,c){var v,y=Array.isArray(e.data)?e.data:[],x=[],E=!1,b=function(){var e,g=y[v][l]?y[v][l]:M(y[v][i],s),b=(e={},o()(e,r,y[v][r]),o()(e,i,g),o()(e,l,g),e);if(a&&a in y[v]&&(b[a]=M(y[v][a],s)),u.enabled){void 0===b[l]&&(b[l]=M(b[i],s));var C=c;if(C>0)for(;C>0;){var T=Array.isArray(n[C-1].data)?n[C-1].data:[],w=Object(p.find)(T,(function(e){return e[r]===b[r]}));if(w){var S=isNaN(b[l])?0:b[l],k=M(w[i],s);k=isNaN(k)?0:k,b[i]=k+S;break}1===C&&(b[i]=b[l]),C--}else b[i]=b[l]}y[v]=b;var _=b[r],A=b[i],O=void 0;a&&a in y[v]&&(O=b[a]),void 0===t?!isNaN(A)&&(0===v||v===y.length-1||v>0&&v<y.length-1&&"number"==typeof A)?(x.push(b),E=!0):E&&(x.push(b),E=!1):x.push(b),h<_&&(h=_),d>_&&(d=_),"number"!=typeof A||isNaN(A)?"number"==typeof t&&(t<f&&(f=t),t>m&&(m=t)):(("number"!=typeof f||A<f)&&(f=A),"number"==typeof O&&O<f&&(f=O),("number"!=typeof m||A>m)&&(m=A),"number"==typeof O&&O>m&&(m=O))};for(v=0;v<y.length;v++)b();g.push(q(q({},e),{},{data:x,zIndex:u.enabled?n.length-c:c}))})),this.options.series=g,this.options.xmin=h,this.options.xmax=d,this.options.ymin=f,this.options.ymax=m}}},{key:"initLine",value:function(){this.line=new j(this.options,this.backContext)}},{key:"initBar",value:function(){this.bar=new G(this.options,this.backContext)}},{key:"initTooltip",value:function(){this.tooltip=new H(this.options,this.frontContext,this.container,this.eventCanvas)}},{key:"initZoom",value:function(){this.zoom=new $(this.options,this.handleZoom,this.container,this.eventCanvas)}},{key:"initLegend",value:function(){this.legend=new Y(this.options,this.handleLegendItemClick,this.container,this.eventCanvas)}},{key:"initScales",value:function(){var e=new F(this.options,this.backContext);this.yAxis=e,this.yScales=e.init();var t=new N(this.options,this.backContext,this.yAxis);this.xAxis=t;var n=t.init();this.transform&&(n=this.transform.rescaleX(n)),this.xScales=n}},{key:"initShapes",value:function(){var e=new U(this.options,this.container);this.shapes=e}},{key:"offEvents",value:function(){var e=this.options.tooltip,t=e.cascade,n=e.cascadeScope,r=n?"plotmove:".concat(n):"plotmove",i=n?"plotleave:".concat(n):"plotleave";h.select(this.eventCanvas).on("mousemove",null).on("mouseleave",null).on("mousedown",null).on("mouseup",null).on("touchmove",null),function(e,t){let n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",C),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--y&&x&&x.parentNode.removeChild(x)}}(this.options.chart.renderTo,this.handleResize),t&&(K.off(r,this.showTooltip),K.off(i,this.hideTooltip))}},{key:"destroy",value:function(){this.shapes.destroy(),this.tooltip.destroy(),this.offEvents(),h.select(this.container).remove()}}]),e}()}])));const ih=["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"],ah=()=>d.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em"},d.createElement("path",{d:"M810.666667 426.666667h-170.666667V128a42.666667 42.666667 0 0 0-42.666667-42.666667H384a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v512a42.666667 42.666667 0 0 0 42.666667 42.666667h640a42.666667 42.666667 0 0 0 42.666666-42.666667V469.333333a42.666667 42.666667 0 0 0-42.666666-42.666666zM341.333333 853.333333H213.333333V426.666667h128v426.666666z m213.333334 0h-128V170.666667h128v682.666666z m213.333333 0h-128v-341.333333h128v341.333333z m170.666667-682.666666h-42.666667V128a42.666667 42.666667 0 1 0-85.333333 0v42.666667h-42.666667a42.666667 42.666667 0 0 0 0 85.333333h42.666667v42.666667a42.666667 42.666667 0 0 0 85.333333 0V256h42.666667a42.666667 42.666667 0 1 0 0-85.333333z",fill:"currentColor"})),oh=e=>d.createElement(T,l(s({component:ah},e),{className:"anticon-addpanel"})),sh={bitsSI:{type:"si",base:"bits"},bytesSI:{type:"si",base:"bytes"},bitsIEC:{type:"iec",base:"bits"},bytesIEC:{type:"iec",base:"bytes"}},lh={type:"iec",base:"bytes",decimals:2},ch=[{exp:0,si:"",iec:"",iecExp:1},{exp:3,si:"k",iec:"Ki",iecExp:10},{exp:6,si:"M",iec:"Mi",iecExp:20},{exp:9,si:"G",iec:"Gi",iecExp:30},{exp:12,si:"T",iec:"Ti",iecExp:40},{exp:15,si:"P",iec:"Pi",iecExp:50},{exp:18,si:"E",iec:"Ei",iecExp:60},{exp:21,si:"Z",iec:"Zi",iecExp:70},{exp:24,si:"Y",iec:"Yi",iecExp:80}],uh={bits:"b",bytes:"B"};function hh(e,t=lh){if(null==e)return;const n=t.base?uh[t.base]:"";if("si"===t.type&&e<1e3||"iec"===t.type&&e<1024)return S.round(e,t.decimals)+n;const r="iec"===t.type?2:10,i=e.toExponential().match(/(\d.*\+)(\d{1,2})/);if(i){const a=3*Math.floor(parseInt(S.get(i,"[2]"))/3),o=S.find(ch,{exp:a});if(!o)return NaN;const s=S.get(o,t.type),l=S.get(o,"iec"===t.type?"iecExp":"exp"),c=Math.pow(r,l);return S.round(e/c,t.decimals)+s+n}return S.round(e,t.decimals)}function ph(e,t,n){if("number"!=typeof e)return e;let r=e,i={seconds:"s",milliseconds:"ms"}[t];if(S.forEach([{unit:"year",value:31104e3},{unit:"month",value:2592e3},{unit:"week",value:604800},{unit:"day",value:86400},{unit:"hour",value:3600},{unit:"min",value:60}],(n=>{const a=e/n.value/("milliseconds"===t?1e3:1);if(a>=1)return r=a,i=n.unit,!1})),"milliseconds"===t&&"ms"===i){const e=r/1e3;e>=1&&(r=e,i="s")}return S.round(r,n)+i}const dh=({util:e,decimals:t=3},n)=>{if(null===n||""===n||void 0===n)return"";if("number"!=typeof n&&(n=S.toNumber(n)),e){const r=sh[e];if(r){const{type:e,base:i}=r;return hh(n,{type:e,base:i,decimals:t})}return"none"===e?S.round(n,t):"percent"===e?S.round(n,t)+"%":"percentUnit"===e?S.round(100*n,t)+"%":"humantimeSeconds"===e?O.duration(n,"seconds").humanize():"humantimeMilliseconds"===e?O.duration(n,"milliseconds").humanize():"seconds"===e||"milliseconds"===e?ph(n,e,t):S.round(n,t)}return hh(n,{type:"si",decimals:t})},fh=e=>S.toNumber(S.get(e,1,NaN)),mh=(e,t,n)=>{var r,i,a;const{util:o,decimals:s}=t||{},l=S.find(n,(t=>{const{type:n,match:r}=t;if(null===e||""===e||void 0===e){if("specialValue"===n){if("empty"===(null==r?void 0:r.specialValue))return""===e;if("null"===(null==r?void 0:r.specialValue))return null==e}return!1}return e=S.toNumber(e),"special"===n?e===(null==r?void 0:r.special):"range"===n&&((null==r?void 0:r.from)&&(null==r?void 0:r.to)?e>=(null==r?void 0:r.from)&&e<=(null==r?void 0:r.to):(null==r?void 0:r.from)?e>=(null==r?void 0:r.from):!!(null==r?void 0:r.to)&&e<=(null==r?void 0:r.to))}));return{text:(null==(r=null==l?void 0:l.result)?void 0:r.text)?null==(i=null==l?void 0:l.result)?void 0:i.text:dh({util:o,decimals:s},e),color:null==(a=null==l?void 0:l.result)?void 0:a.color}},gh=(e,t,{util:n,decimals:r},i)=>S.map(e,(e=>{const a={lastNotNull:()=>S.get(S.last(S.filter(e.data,(e=>null!==e[1]))),1),last:()=>S.get(S.last(e.data),1),firstNotNull:()=>S.get(S.first(S.filter(e.data,(e=>null!==e[1]))),1),first:()=>S.get(S.first(e.data),1),min:()=>fh(S.minBy(e.data,(e=>S.toNumber(e[1])))),max:()=>fh(S.maxBy(e.data,(e=>S.toNumber(e[1])))),avg:()=>S.meanBy(e.data,(e=>S.toNumber(e[1]))),sum:()=>S.sumBy(e.data,(e=>S.toNumber(e[1]))),count:()=>S.size(e.data)},o=a[t]?a[t]():NaN;return s({id:e.id,name:e.name,metric:e.metric,fields:l(s({},e.metric),{refId:e.refId}),stat:S.toNumber(o)},mh(o,{util:n,decimals:r},i))})),vh=(e,{util:t,decimals:n},r)=>S.map(e,((e,i)=>{const a={max:fh(S.maxBy(e.data,(e=>S.toNumber(e[1])))),min:fh(S.minBy(e.data,(e=>S.toNumber(e[1])))),avg:S.meanBy(e.data,(e=>S.toNumber(e[1]))),sum:S.sumBy(e.data,(e=>S.toNumber(e[1]))),last:fh(S.last(e.data))};return{id:e.id,name:e.name,metric:e.metric,offset:e.offset,color:r[i%r.length],disabled:!1===e.visible||void 0,max:dh({util:t,decimals:n},a.max),min:dh({util:t,decimals:n},a.min),avg:dh({util:t,decimals:n},a.avg),sum:dh({util:t,decimals:n},a.sum),last:dh({util:t,decimals:n},a.last)}}));function yh(e){var t,n;const{values:r,series:i,inDashboard:a=!0,chartHeight:o="200px",tableHeight:c="200px"}=e,{custom:u,options:h={}}=r,[p,m]=f.exports.useState(i),[g,v]=f.exports.useState(""),y=f.exports.useRef(null),x=f.exports.useRef(null),E=f.exports.useRef(null),b=de(E),C=(null==(t=h.legend)?void 0:t.displayMode)||"table",T=(null==(n=h.legend)?void 0:n.placement)||"bottom",w="hidden"!==C,[k,_]=f.exports.useState([]);let A=w?"70%":"100%",O=w?"30%":"0px";return a||(A=o,O=c),"right"===T&&(A="100%",O="100%"),f.exports.useEffect((()=>{var e,t;return y.current&&(x.current&&x.current.destroy(),x.current=new rh({colors:ih,timestamp:"X",xkey:0,ykey:1,ykey2:2,ykeyFormatter:e=>Number(e),chart:{renderTo:y.current,height:y.current.clientHeight},series:[],line:{width:1}})),_(w?vh(p,{util:null==(e=null==h?void 0:h.standardOptions)?void 0:e.util,decimals:null==(t=null==h?void 0:h.standardOptions)?void 0:t.decimals},ih):[]),()=>{x.current&&"function"==typeof x.current.destroy&&x.current.destroy()}}),[w]),f.exports.useEffect((()=>{m(i)}),[JSON.stringify(i)]),f.exports.useEffect((()=>{var e,t,n,r,i,a,o,c;x.current&&x.current.update({type:"lines"===u.drawStyle?"line":"bar",series:p,area:{opacity:u.fillOpacity},stack:{enabled:"noraml"===u.stack},curve:{enabled:!0,mode:u.lineInterpolation},tooltip:l(s({},x.current.options.tooltip),{shared:"all"===(null==(e=h.tooltip)?void 0:e.mode),sharedSortDirection:"none"!==(null==(t=h.tooltip)?void 0:t.sort)?null==(n=h.tooltip)?void 0:n.sort:void 0,pointValueformatter:e=>{var t,n;return dh({util:null==(t=null==h?void 0:h.standardOptions)?void 0:t.util,decimals:null==(n=null==h?void 0:h.standardOptions)?void 0:n.decimals},e)}}),yAxis:l(s({},x.current.options.yAxis),{min:null==(r=null==h?void 0:h.standardOptions)?void 0:r.min,max:null==(i=null==h?void 0:h.standardOptions)?void 0:i.max,plotLines:null==(a=null==h?void 0:h.thresholds)?void 0:a.steps,tickValueFormatter:e=>{var t,n;return dh({util:null==(t=null==h?void 0:h.standardOptions)?void 0:t.util,decimals:null==(n=null==h?void 0:h.standardOptions)?void 0:n.decimals},e)}})}),_(w?vh(p,{util:null==(o=null==h?void 0:h.standardOptions)?void 0:o.util,decimals:null==(c=null==h?void 0:h.standardOptions)?void 0:c.decimals},ih):[])}),[JSON.stringify(p),JSON.stringify(u),JSON.stringify(h)]),f.exports.useEffect((()=>{x.current&&x.current.handleResize()}),[T]),d.createElement("div",{className:"renderer-timeseries-container",style:{display:"right"===T?"flex":"block"}},d.createElement("div",{ref:y,style:{height:A,width:"right"===T?"60%":"100%"}}),w&&d.createElement("div",{className:"renderer-timeseries-legend-table",style:{[a?"height":"maxHeight"]:O,overflow:"hidden"},ref:E},"table"===C&&d.createElement(Nt,{rowKey:"id",size:"small",scroll:{x:650,y:(null==b?void 0:b.height)||54},columns:[{title:`Series (${i.length})`,dataIndex:"name",width:150,ellipsis:{showTitle:!1},render:(e,t)=>d.createElement(Ct,{placement:"topLeft",title:d.createElement("div",null,d.createElement("div",null,S.get(t,"metric.__name__")),d.createElement("div",null,t.offset&&"current"!==t.offset?`offfset ${t.offset}`:""),S.map(S.omit(t.metric,"__name__"),((e,t)=>d.createElement("div",{key:t},t,"=",e)))),getTooltipContainer:()=>document.body},d.createElement("span",{className:"renderer-timeseries-legend-color-symbol",style:{backgroundColor:t.color}}),t.offset&&"current"!==t.offset?d.createElement("span",{style:{paddingRight:5}},"offfset ",t.offset):"",d.createElement("span",null,JSON.stringify(t.metric)))},{title:"Max",dataIndex:"max"},{title:"Min",dataIndex:"min"},{title:"Avg",dataIndex:"avg"},{title:"Sum",dataIndex:"sum"},{title:"Last",dataIndex:"last"}],dataSource:k,locale:{emptyText:"暂无数据"},pagination:!1}),"list"===C&&d.createElement("div",{className:"renderer-timeseries-legend-list"},S.map(k,(e=>d.createElement("div",{key:e.id,onClick:()=>{v(g!==e.id?e.id:""),m(S.map(p,(t=>l(s({},t),{visible:g===e.id||e.id===t.id}))))},className:e.disabled?"disabled":""},d.createElement("span",{className:"renderer-timeseries-legend-color-symbol",style:{backgroundColor:e.color}}),e.name))))))}function xh(e){const t=f.exports.useRef(null),n=de(t),{item:r,idx:i,colSpan:a,textMode:o,colorMode:s,textSize:l}=e,c=(null==l?void 0:l.title)?null==l?void 0:l.title:(null==n?void 0:n.width)/S.toString(r.name).length||12;let u=(null==l?void 0:l.value)?null==l?void 0:l.value:(null==n?void 0:n.width)/S.toString(r.text).length||12;const h=r.color?r.color:ih[i%ih.length];return u>(null==n?void 0:n.height)-20&&(u=(null==n?void 0:n.height)-20),d.createElement("div",{key:r.name,className:"renderer-stat-item",ref:t,style:{width:100/a+"%",flexBasis:100/a+"%",backgroundColor:"background"===s?h:"transparent"}},d.createElement("div",{className:"renderer-stat-item-content"},"valueAndName"===o&&d.createElement("div",{className:"renderer-stat-header",style:{fontSize:c>100?100:c}},r.name),d.createElement("div",{className:"renderer-stat-value",style:{color:"value"===s?h:"#fff",fontSize:u>100?100:u}},r.text)))}function Eh(e){var t,n;const{values:r,series:i}=e,{custom:a,options:o}=r,{calc:s,textMode:l,colorMode:c,colSpan:u,textSize:h}=a,p=gh(i,s,{util:null==(t=null==o?void 0:o.standardOptions)?void 0:t.util,decimals:null==(n=null==o?void 0:o.standardOptions)?void 0:n.decimals},null==o?void 0:o.valueMappings);return d.createElement("div",{className:"renderer-stat-container"},d.createElement("div",{className:"renderer-stat-container-box"},S.map(p,((e,t)=>d.createElement(xh,{key:e.name,item:e,idx:t,colSpan:u,textMode:l,colorMode:c,textSize:h})))))}const bh=(e,t)=>{let n={};return S.forEach(e,(e=>{var r;(null==(r=null==e?void 0:e.matcher)?void 0:r.value)===t&&(n=null==e?void 0:e.properties)})),n};function Ch(e,t){return"string"==typeof e&&"string"==typeof t?e.localeCompare(t):"number"==typeof e&&"number"==typeof t?e-t:0}const Th=f.exports.createContext({}),wh=(e,t)=>{switch(t.type){case"updateMetric":return l(s({},e),{metric:t.payload});default:return e}},Sh={metric:{}};function kh(e){const[t,n]=f.exports.useReducer(wh,Sh);return d.createElement(Th.Provider,{value:{state:t,dispatch:n}},e.children)}const _h=e=>{const t=S.reduce(e,((e,t)=>S.union(e,S.keys(t.metric))),[]);return S.uniq(t)},Ah=(e,t)=>t.sortColumn===e&&t.sortOrder;function Oh(e){const t=f.exports.useRef(null),n=de(t),{dispatch:r}=f.exports.useContext(Th),{values:i,series:a}=e,{custom:o,options:s,overrides:l}=i,{showHeader:c,calc:u,aggrDimension:h,displayMode:p,columns:m,sortColumn:g,sortOrder:v}=o,[y,x]=d.useState([]),[E,b]=d.useState({sortColumn:g,sortOrder:v});f.exports.useEffect((()=>{b({sortColumn:g,sortOrder:v})}),[g,v]),f.exports.useEffect((()=>{var e,t;const n=gh(a,u,{util:null==(e=null==s?void 0:s.standardOptions)?void 0:e.util,decimals:null==(t=null==s?void 0:s.standardOptions)?void 0:t.decimals},null==s?void 0:s.valueMappings);r&&r({type:"updateMetric",payload:_h(n)}),x(n)}),[JSON.stringify(a),u,JSON.stringify(s)]);let C=y,T=[{title:"name",dataIndex:"name",key:"name",sorter:(e,t)=>Ch(e.name,t.name),sortOrder:Ah("name",E),render:e=>d.createElement("div",{className:"renderer-table-td-content"},e)},{title:"value",dataIndex:"text",key:"text",sorter:(e,t)=>e.stat-t.stat,sortOrder:Ah("value",E),render:(e,t)=>{let n={text:e,color:t.color};const r=bh(l,t.fields.refId);return S.isEmpty(r)||(n=mh(null==t?void 0:t.stat,null==r?void 0:r.standardOptions,null==r?void 0:r.valueMappings)),d.createElement("div",{className:"renderer-table-td-content",style:{color:n.color}},n.text)}}];if("labelsOfSeriesToRows"===p){const e=S.isEmpty(m)?S.concat(_h(y),"value"):m;T=S.map(e,(e=>({title:e,dataIndex:e,key:e,sorter:(t,n)=>"value"===e?t.stat-n.stat:Ch(t.name,n.name),sortOrder:Ah(e,E),render:(t,n)=>"value"===e?S.get(n,"text"):S.get(n.metric,e)})))}if("labelValuesToRows"===p&&h){C=((e,t,n)=>{const r=S.groupBy(e,(e=>e.fields[t]));return S.map(r,((e,r)=>{const i={[t]:r},a=S.groupBy(e,(e=>e.fields[n]));return S.forEach(a,((e,t)=>{i[t]={name:e[0].name,id:e[0].id,stat:e[0].stat,color:e[0].color,text:e[0].text}})),i.groupNames=S.keys(a),i}))})(y,h,"refId");const e=S.reduce(C,((e,t)=>S.union(S.concat(e,t.groupNames))),[]);T=[{title:h,dataIndex:h,key:h,sorter:(e,t)=>Ch(e[h],t[h]),sortOrder:Ah(h,E),render:e=>d.createElement("div",{className:"renderer-table-td-content"},e)}],S.map(e,(e=>{var t;const n=S.find(C,(t=>t[e]));T.push({title:null==(t=n[e])?void 0:t.name,dataIndex:e,key:e,sorter:(t,n)=>S.get(t[e],"stat")-S.get(n[e],"stat"),sortOrder:Ah("value",E),render:t=>{let n={text:null==t?void 0:t.text,color:null==t?void 0:t.color};const r=bh(l,e);return S.isEmpty(r)||(n=mh(null==t?void 0:t.stat,null==r?void 0:r.standardOptions,null==r?void 0:r.valueMappings)),d.createElement("div",{className:"renderer-table-td-content",style:{color:null==n?void 0:n.color}},null==n?void 0:n.text)}})}))}const w=c?40:0,k=S.get(n,"height")-w,_=isNaN(k)?0:k;return d.createElement("div",{className:"renderer-table-container",ref:t},d.createElement("div",{className:"renderer-table-container-box"},d.createElement(Nt,{rowKey:"id",getPopupContainer:()=>document.body,showSorterTooltip:!1,showHeader:c,dataSource:C,columns:T,scroll:{y:_},bordered:!1,pagination:!1,onChange:(e,t,n)=>{b({sortColumn:n.columnKey,sortOrder:n.order})}})))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ih=function(e,t){return(Ih=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Mh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ih(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Nh=function(){return(Nh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Fh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Lh(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function Ph(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var Rh=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)},Dh=function(e,t){return!!Rh(e)&&e.indexOf(t)>-1},Bh=function(e,t){if(!Rh(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},zh={}.toString,Hh=function(e,t){return zh.call(e)==="[object "+t+"]"},jh=function(e){return Hh(e,"Function")},Gh=function(e){return null==e},$h=function(e){return Array.isArray?Array.isArray(e):Hh(e,"Array")},Yh=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};function Uh(e,t){if(e)if($h(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(Yh(e))for(var i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i))break}var Vh=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return Uh(e,(function(n,r){jh(e)&&"prototype"===r||t.push(r)})),t};function Wh(e,t){var n=Vh(t),r=n.length;if(Gh(e))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(t[a]!==e[a]||!(a in e))return!1}return!0}var Xh=function(e){return"object"==typeof e&&null!==e},qh=function(e){if(!Xh(e)||!Hh(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function Kh(e,t){if(!$h(e))return null;var n;if(jh(t)&&(n=t),qh(t)&&(n=function(e){return Wh(e,t)}),n)for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r];return null}function Qh(e,t,n){void 0===n&&(n=0);for(var r=n;r<e.length;r++)if(t(e[r],r))return r;return-1}var Zh=function(e){if(!$h(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t},Jh=function(e){if($h(e))return e.reduce((function(e,t){return Math.max(e,t)}),e[0])},ep=function(e){if($h(e))return e.reduce((function(e,t){return Math.min(e,t)}),e[0])},tp=function(e){var t=e.filter((function(e){return!isNaN(e)}));if(!t.length)return{min:0,max:0};if($h(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=Jh(t);return{min:ep(t),max:i}},np=Array.prototype.splice,rp=function(e,t,n){if(!$h(e)&&!qh(e))return e;var r=n;return Uh(e,(function(e,n){r=t(r,e,n)})),r},ip=function(e,t){var n=[];if(!Rh(e))return n;for(var r=-1,i=[],a=e.length;++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return function(e,t){if(!Rh(e))return[];for(var n=e?t.length:0,r=n-1;n--;){var i=void 0,a=t[n];n!==r&&a===i||(i=a,np.call(e,a,1))}}(e,i),n},ap=function(e){return Hh(e,"String")};function op(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];t.has(a)||(n.push(a),t.set(a,!0))}return n}var sp=function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i][t];if(!Gh(a)){$h(a)||(a=[a]);for(var o=0;o<a.length;o++){var s=a[o];r[s]||(n.push(s),r[s]=!0)}}}return n};function lp(e){if(Rh(e))return e[0]}function cp(e){if(Rh(e)){return e[e.length-1]}}var up=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},hp=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1},pp=Object.prototype.hasOwnProperty;function dp(e,t){if(!t||!$h(e))return{};for(var n,r={},i=jh(t)?t:function(e){return e[t]},a=0;a<e.length;a++){var o=e[a];n=i(o),pp.call(r,n)?r[n].push(o):r[n]=[o]}return r}function fp(e,t){if(!t)return{0:e};if(!jh(t)){var n=$h(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",r=0,i=n.length;r<i;r++)t+=e[n[r]]&&e[n[r]].toString();return t}}return dp(e,t)}var mp=function(e,t,n){return e<t?t:e>n?n:e},gp=function(e,t){var n=t.toString(),r=n.indexOf(".");if(-1===r)return Math.round(e);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))},vp=function(e){return Hh(e,"Number")};function yp(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n}var xp=function(e,t){if($h(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var a=e[i],o=jh(t)?t(a):a[t];o>r&&(n=a,r=o)}return n}},Ep=function(e,t){return(e%t+t)%t},bp=Math.PI/180,Cp=function(e){return bp*e},Tp=function(e,t){return e.hasOwnProperty(t)},wp=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return Uh(e,(function(n,r){jh(e)&&"prototype"===r||t.push(n)})),t},Sp=function(e){return Gh(e)?"":e.toString()},kp=function(e){return Sp(e).toLowerCase()};function _p(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]})):e}var Ap=function(e){var t=Sp(e);return t.charAt(0).toUpperCase()+t.substring(1)},Op={}.toString,Ip=function(e){return Hh(e,"Boolean")},Mp=function(e){return Hh(e,"Date")},Np=Object.prototype,Fp=function(e){return void 0===e},Lp=function(e){return e instanceof Element||e instanceof HTMLDocument};function Pp(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}function Rp(e,t,n,r){return t&&Pp(e,t),n&&Pp(e,n),r&&Pp(e,r),e}var Dp=function(e){if("object"!=typeof e||null===e)return e;var t;if($h(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"==typeof e[n]&&null!=e[n]?t[n]=Dp(e[n]):t[n]=e[n]}else for(var i in t={},e)"object"==typeof e[i]&&null!=e[i]?t[i]=Dp(e[i]):t[i]=e[i];return t};function Bp(e,t,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a)}}var zp=function(e,t){if(!jh(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var s=e.apply(this,r);return o.set(a,s),s};return n.cache=new Map,n};function Hp(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(t.hasOwnProperty(i)){var a=t[i];null!==a&&qh(a)?(qh(e[i])||(e[i]={}),n<r?Hp(e[i],a,n+1,r):e[i]=t[i]):$h(a)?(e[i]=[],e[i]=e[i].concat(a)):void 0!==a&&(e[i]=a)}}var jp=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)Hp(e,t[r]);return e},Gp=function(e,t){if(!Rh(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},$p=Object.prototype.hasOwnProperty;function Yp(e){if(Gh(e))return!0;if(Rh(e))return!e.length;var t=function(e){return Op.call(e).replace(/^\[object /,"").replace(/]$/,"")}(e);if("Map"===t||"Set"===t)return!e.size;if(function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Np)}(e))return!Object.keys(e).length;for(var n in e)if($p.call(e,n))return!1;return!0}var Up,Vp=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(ap(e)||ap(t))return!1;if(Rh(e)||Rh(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=Vp(e[r],t[r]));r++);return n}if(Xh(e)||Xh(t)){var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(n=!0,r=0;r<i.length&&(n=Vp(e[i[r]],t[i[r]]));r++);return n}return!1},Wp=function(e,t){if(!Rh(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(t(i,r))}return n},Xp=function(e){return e},qp=function(e,t,n){for(var r=0,i=ap(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return void 0===e||r<i.length?n:e},Kp=function(e,t,n){var r=e,i=ap(t)?t.split("."):t;return i.forEach((function(e,t){t<i.length-1?(Yh(r[e])||(r[e]=vp(i[t+1])?[]:{}),r=r[e]):r[e]=n})),e},Qp=Object.prototype.hasOwnProperty,Zp=function(e,t){if(null===e||!qh(e))return{};var n={};return Uh(t,(function(t){Qp.call(e,t)&&(n[t]=e[t])})),n},Jp=function(e,t){return rp(e,(function(e,n,r){return t.includes(r)||(e[r]=n),e}),{})},ed=function(e,t,n){var r,i,a,o,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,o=e.apply(i,a),r||(i=a=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return i=this,a=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,o=e.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(l,u)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c},td={},nd=function(e){return td[e=e||"g"]?td[e]+=1:td[e]=1,e+td[e]},rd=function(){};function id(e){return Gh(e)?0:Rh(e)?e.length:Object.keys(e).length}var ad,od,sd,ld,cd,ud,hd=zp((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return Up||(Up=document.createElement("canvas").getContext("2d")),Up.font=[a,o,i,n+"px",r].join(" "),Up.measureText(ap(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Lh([e],wp(t)).join("")})),pd=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();(od=ad||(ad={})).FORE="fore",od.MID="mid",od.BG="bg",(ld=sd||(sd={})).TOP="top",ld.TOP_LEFT="top-left",ld.TOP_RIGHT="top-right",ld.RIGHT="right",ld.RIGHT_TOP="right-top",ld.RIGHT_BOTTOM="right-bottom",ld.LEFT="left",ld.LEFT_TOP="left-top",ld.LEFT_BOTTOM="left-bottom",ld.BOTTOM="bottom",ld.BOTTOM_LEFT="bottom-left",ld.BOTTOM_RIGHT="bottom-right",ld.RADIUS="radius",ld.CIRCLE="circle",ld.NONE="none",(ud=cd||(cd={})).AXIS="axis",ud.GRID="grid",ud.LEGEND="legend",ud.TOOLTIP="tooltip",ud.ANNOTATION="annotation",ud.SLIDER="slider",ud.SCROLLBAR="scrollbar",ud.OTHER="other";var dd,fd,md,gd,vd,yd,xd,Ed,bd=3,Cd=2,Td=1;(fd=dd||(dd={})).BEFORE_RENDER="beforerender",fd.AFTER_RENDER="afterrender",fd.BEFORE_PAINT="beforepaint",fd.AFTER_PAINT="afterpaint",fd.BEFORE_CHANGE_DATA="beforechangedata",fd.AFTER_CHANGE_DATA="afterchangedata",fd.BEFORE_CLEAR="beforeclear",fd.AFTER_CLEAR="afterclear",fd.BEFORE_DESTROY="beforedestroy",fd.BEFORE_CHANGE_SIZE="beforechangesize",fd.AFTER_CHANGE_SIZE="afterchangesize",(gd=md||(md={})).BEFORE_DRAW_ANIMATE="beforeanimate",gd.AFTER_DRAW_ANIMATE="afteranimate",(yd=vd||(vd={})).MOUSE_ENTER="plot:mouseenter",yd.MOUSE_DOWN="plot:mousedown",yd.MOUSE_MOVE="plot:mousemove",yd.MOUSE_UP="plot:mouseup",yd.MOUSE_LEAVE="plot:mouseleave",yd.TOUCH_START="plot:touchstart",yd.TOUCH_MOVE="plot:touchmove",yd.TOUCH_END="plot:touchend",yd.TOUCH_CANCEL="plot:touchcancel",yd.CLICK="plot:click",yd.DBLCLICK="plot:dblclick",yd.CONTEXTMENU="plot:contextmenu",yd.LEAVE="plot:leave",yd.ENTER="plot:enter",(Ed=xd||(xd={})).ACTIVE="active",Ed.INACTIVE="inactive",Ed.SELECTED="selected",Ed.DEFAULT="default";var wd,Sd,kd,_d,Ad=["color","shape","size"],Od={};function Id(e,t){Od[e]=t}function Md(e,t,n){if(e){if("function"==typeof e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if("function"==typeof e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}}}function Nd(e){wd||(wd=document.createElement("table"),Sd=document.createElement("tr"),kd=/^\s*<(\w+|!)[^>]*>/,_d={tr:document.createElement("tbody"),tbody:wd,thead:wd,tfoot:wd,td:Sd,th:Sd,"*":document.createElement("div")});var t=kd.test(e)&&RegExp.$1;t&&t in _d||(t="*");var n=_d[t];e=e.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+e;var r=n.childNodes[0];return n.removeChild(r),r}function Fd(e,t,n){var r;try{r=window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.style[t]}catch(eh){}finally{r=void 0===r?n:r}return r}function Ld(e,t){var n=function(e,t){var n=Fd(e,"height",t);return"auto"===n&&(n=e.offsetHeight),parseFloat(n)}(e,t),r=parseFloat(Fd(e,"borderTopWidth"))||0,i=parseFloat(Fd(e,"paddingTop"))||0,a=parseFloat(Fd(e,"paddingBottom"))||0;return n+r+(parseFloat(Fd(e,"borderBottomWidth"))||0)+i+a+(parseFloat(Fd(e,"marginTop"))||0)+(parseFloat(Fd(e,"marginBottom"))||0)}function Pd(e,t){var n=function(e,t){var n=Fd(e,"width",t);return"auto"===n&&(n=e.offsetWidth),parseFloat(n)}(e,t),r=parseFloat(Fd(e,"borderLeftWidth"))||0,i=parseFloat(Fd(e,"paddingLeft"))||0,a=parseFloat(Fd(e,"paddingRight"))||0,o=parseFloat(Fd(e,"borderRightWidth"))||0,s=parseFloat(Fd(e,"marginRight"))||0;return n+r+o+i+a+(parseFloat(Fd(e,"marginLeft"))||0)+s}function Rd(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e}function Dd(e){return"number"==typeof e&&!isNaN(e)}function Bd(e,t,n,r){var i=n,a=r;if(t){var o=function(e){var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}(e);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(Dd(i)?i:1,1),height:Math.max(Dd(a)?a:1,1)}}var zd=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0),this},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],a=this._events["*"]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],s=o.callback;o.once&&(r.splice(a,1),0===r.length&&delete t._events[e],i--,a--),s.apply(t,n)}};o(i),o(a)},e.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}(),Hd=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=t.visible,i=void 0===r||r;return n.visible=i,n}return Mh(t,e),t.prototype.show=function(){this.visible||this.changeVisible(!0)},t.prototype.hide=function(){this.visible&&this.changeVisible(!1)},t.prototype.destroy=function(){this.off(),this.destroyed=!0},t.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},t}(zd),jd="\t\n\v\f\r   ᠎             　\u2028\u2029",Gd=new RegExp("([a-z])["+jd+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+jd+"]*,?["+jd+"]*)+)","ig"),$d=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+jd+"]*,?["+jd+"]*","ig"),Yd=function(e){if(!e)return null;if($h(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(Gd,(function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace($d,(function(e,t){t&&o.push(+t)})),"m"===s&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===o.length&&n.push([i,o[0]]),"r"===s)n.push([i].concat(o));else for(;o.length>=t[s]&&(n.push([i].concat(o.splice(0,t[s]))),t[s]););return e})),n},Ud=function(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var a=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4===r?a[3]={x:+e[0],y:+e[1]}:i-2===r&&(a[2]={x:+e[0],y:+e[1]},a[3]={x:+e[2],y:+e[3]}):a[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},Vd=function(e,t,n,r,i){var a=[];if(null===i&&null===r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!==i){var o=Math.PI/180,s=e+n*Math.cos(-r*o),l=e+n*Math.cos(-i*o);a=[["M",s,t+n*Math.sin(-r*o)],["A",n,n,0,+(i-r>180),0,l,t+n*Math.sin(-i*o)]]}else a=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return a},Wd=function(e){if(!(e=Yd(e))||!e.length)return[["M",0,0]];var t,n,r=[],i=0,a=0,o=0,s=0,l=0;"M"===e[0][0]&&(o=i=+e[0][1],s=a=+e[0][2],l++,r[0]=["M",i,a]);for(var c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),u=void 0,h=void 0,p=l,d=e.length;p<d;p++){if(r.push(u=[]),(t=(h=e[p])[0])!==t.toUpperCase())switch(u[0]=t.toUpperCase(),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+h[6]+i,u[7]=+h[7]+a;break;case"V":u[1]=+h[1]+a;break;case"H":u[1]=+h[1]+i;break;case"R":for(var f=2,m=(n=[i,a].concat(h.slice(1))).length;f<m;f++)n[f]=+n[f]+i,n[++f]=+n[f]+a;r.pop(),r=r.concat(Ud(n,c));break;case"O":r.pop(),(n=Vd(i,a,h[1],h[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(Vd(i,a,h[1],h[2],h[3])),u=["U"].concat(r[r.length-1].slice(-2));break;case"M":o=+h[1]+i,s=+h[2]+a;break;default:for(f=1,m=h.length;f<m;f++)u[f]=+h[f]+(f%2?i:a)}else if("R"===t)n=[i,a].concat(h.slice(1)),r.pop(),r=r.concat(Ud(n,c)),u=["R"].concat(h.slice(-2));else if("O"===t)r.pop(),(n=Vd(i,a,h[1],h[2])).push(n[0]),r=r.concat(n);else if("U"===t)r.pop(),r=r.concat(Vd(i,a,h[1],h[2],h[3])),u=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,v=h.length;g<v;g++)u[g]=h[g];if("O"!==(t=t.toUpperCase()))switch(u[0]){case"Z":i=+o,a=+s;break;case"H":i=u[1];break;case"V":a=u[1];break;case"M":o=u[u.length-2],s=u[u.length-1];break;default:i=u[u.length-2],a=u[u.length-1]}}return r},Xd=function(e,t,n,r){return[e,t,n,r,n,r]},qd=function(e,t,n,r,i,a){var o=1/3,s=2/3;return[o*e+s*n,o*t+s*r,o*i+s*n,o*a+s*r,i,a]},Kd=function(e,t,n,r,i,a,o,s,l,c){n===r&&(n+=1);var u,h,p,d,f,m=120*Math.PI/180,g=Math.PI/180*(+i||0),v=[],y=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(c)h=c[0],p=c[1],d=c[2],f=c[3];else{e=(u=y(e,t,-g)).x,t=u.y,s=(u=y(s,l,-g)).x,l=u.y,e===s&&t===l&&(s+=1,l+=1);var x=(e-s)/2,E=(t-l)/2,b=x*x/(n*n)+E*E/(r*r);b>1&&(n*=b=Math.sqrt(b),r*=b);var C=n*n,T=r*r,w=(a===o?-1:1)*Math.sqrt(Math.abs((C*T-C*E*E-T*x*x)/(C*E*E+T*x*x)));d=w*n*E/r+(e+s)/2,f=w*-r*x/n+(t+l)/2,h=Math.asin(((t-f)/r).toFixed(9)),p=Math.asin(((l-f)/r).toFixed(9)),h=e<d?Math.PI-h:h,p=s<d?Math.PI-p:p,h<0&&(h=2*Math.PI+h),p<0&&(p=2*Math.PI+p),o&&h>p&&(h-=2*Math.PI),!o&&p>h&&(p-=2*Math.PI)}var S=p-h;if(Math.abs(S)>m){var k=p,_=s,A=l;p=h+m*(o&&p>h?1:-1),s=d+n*Math.cos(p),l=f+r*Math.sin(p),v=Kd(s,l,n,r,i,0,o,_,A,[p,k,d,f])}S=p-h;var O=Math.cos(h),I=Math.sin(h),M=Math.cos(p),N=Math.sin(p),F=Math.tan(S/4),L=4/3*n*F,P=4/3*r*F,R=[e,t],D=[e+L*I,t-P*O],B=[s+L*N,l-P*M],z=[s,l];if(D[0]=2*R[0]-D[0],D[1]=2*R[1]-D[1],c)return[D,B,z].concat(v);for(var H=[],j=0,G=(v=[D,B,z].concat(v).join().split(",")).length;j<G;j++)H[j]=j%2?y(v[j-1],v[j],g).y:y(v[j],v[j+1],g).x;return H},Qd=function(e,t){var n,r=Wd(e),i=t&&Wd(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],c="",u="",h=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(Kd.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(qd(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(qd(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(Xd(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(Xd(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(Xd(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(Xd(t.x,t.y,t.X,t.Y))}return e},p=function(e,t){if(e[t].length>7){e[t].shift();for(var a=e[t];a.length;)s[t]="A",i&&(l[t]="A"),e.splice(t++,0,["C"].concat(a.splice(0,6)));e.splice(t,1),n=Math.max(r.length,i&&i.length||0)}},d=function(e,t,a,o,s){e&&t&&"M"===e[s][0]&&"M"!==t[s][0]&&(t.splice(s,0,["M",o.x,o.y]),a.bx=0,a.by=0,a.x=e[s][1],a.y=e[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var f=0;f<n;f++){r[f]&&(c=r[f][0]),"C"!==c&&(s[f]=c,f&&(u=s[f-1])),r[f]=h(r[f],a,u),"A"!==s[f]&&"C"===c&&(s[f]="C"),p(r,f),i&&(i[f]&&(c=i[f][0]),"C"!==c&&(l[f]=c,f&&(u=l[f-1])),i[f]=h(i[f],o,u),"A"!==l[f]&&"C"===c&&(l[f]="C"),p(i,f)),d(r,i,a,o,f),d(i,r,o,a,f);var m=r[f],g=i&&i[f],v=m.length,y=i&&g.length;a.x=m[v-2],a.y=m[v-1],a.bx=parseFloat(m[v-4])||a.x,a.by=parseFloat(m[v-3])||a.y,o.bx=i&&(parseFloat(g[y-4])||o.x),o.by=i&&(parseFloat(g[y-3])||o.y),o.x=i&&g[y-2],o.y=i&&g[y-1]}return i?[r,i]:r},Zd=/,?([a-z]),?/gi,Jd=function(e){return e.join(",").replace(Zd,"$1")},ef=function(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n},tf=function(e,t,n,r,i,a,o,s,l){null===l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,d=0;d<12;d++){var f=c*u[d]+c,m=ef(f,e,n,i,o),g=ef(f,t,r,a,s),v=m*m+g*g;p+=h[d]*Math.sqrt(v)}return c*p},nf=function(e,t,n,r,i,a,o,s){for(var l,c,u,h,p=[],d=[[],[]],f=0;f<2;++f)if(0===f?(c=6*e-12*n+6*i,l=-3*e+9*n-9*i+3*o,u=3*n-3*e):(c=6*t-12*r+6*a,l=-3*t+9*r-9*a+3*s,u=3*r-3*t),Math.abs(l)<1e-12){if(Math.abs(c)<1e-12)continue;(h=-u/c)>0&&h<1&&p.push(h)}else{var m=c*c-4*u*l,g=Math.sqrt(m);if(!(m<0)){var v=(-c+g)/(2*l);v>0&&v<1&&p.push(v);var y=(-c-g)/(2*l);y>0&&y<1&&p.push(y)}}for(var x,E=p.length,b=E;E--;)x=1-(h=p[E]),d[0][E]=x*x*x*e+3*x*x*h*n+3*x*h*h*i+h*h*h*o,d[1][E]=x*x*x*t+3*x*x*h*r+3*x*h*h*a+h*h*h*s;return d[0][b]=e,d[1][b]=t,d[0][b+1]=o,d[1][b+1]=s,d[0].length=d[1].length=b+2,{min:{x:Math.min.apply(0,d[0]),y:Math.min.apply(0,d[1])},max:{x:Math.max.apply(0,d[0]),y:Math.max.apply(0,d[1])}}},rf=function(e,t,n,r,i,a,o,s){if(!(Math.max(e,n)<Math.min(i,o)||Math.min(e,n)>Math.max(i,o)||Math.max(t,r)<Math.min(a,s)||Math.min(t,r)>Math.max(a,s))){var l=(e-n)*(a-s)-(t-r)*(i-o);if(l){var c=((e*r-t*n)*(i-o)-(e-n)*(i*s-a*o))/l,u=((e*r-t*n)*(a-s)-(t-r)*(i*s-a*o))/l,h=+c.toFixed(2),p=+u.toFixed(2);if(!(h<+Math.min(e,n).toFixed(2)||h>+Math.max(e,n).toFixed(2)||h<+Math.min(i,o).toFixed(2)||h>+Math.max(i,o).toFixed(2)||p<+Math.min(t,r).toFixed(2)||p>+Math.max(t,r).toFixed(2)||p<+Math.min(a,s).toFixed(2)||p>+Math.max(a,s).toFixed(2)))return{x:c,y:u}}}},af=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},of=function(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return a.parsePathArray=Jd,a},sf=function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:of(e,t,n,r),vb:[e,t,n,r].join(" ")}},lf=function(e,t,n,r,i,a,o,s){$h(e)||(e=[e,t,n,r,i,a,o,s]);var l=nf.apply(null,e);return sf(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},cf=function(e,t,n,r,i,a,o,s,l){var c=1-l,u=Math.pow(c,3),h=Math.pow(c,2),p=l*l,d=p*l,f=e+2*l*(n-e)+p*(i-2*n+e),m=t+2*l*(r-t)+p*(a-2*r+t),g=n+2*l*(i-n)+p*(o-2*i+n),v=r+2*l*(a-r)+p*(s-2*a+r);return{x:u*e+3*h*l*n+3*c*l*l*i+d*o,y:u*t+3*h*l*r+3*c*l*l*a+d*s,m:{x:f,y:m},n:{x:g,y:v},start:{x:c*e+l*n,y:c*t+l*r},end:{x:c*i+l*o,y:c*a+l*s},alpha:90-180*Math.atan2(f-g,m-v)/Math.PI}},uf=function(e,t,n){if(!function(e,t){return e=sf(e),t=sf(t),af(t,e.x,e.y)||af(t,e.x2,e.y)||af(t,e.x,e.y2)||af(t,e.x2,e.y2)||af(e,t.x,t.y)||af(e,t.x2,t.y)||af(e,t.x,t.y2)||af(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(lf(e),lf(t)))return n?0:[];for(var r=~~(tf.apply(0,e)/8),i=~~(tf.apply(0,t)/8),a=[],o=[],s={},l=n?0:[],c=0;c<r+1;c++){var u=cf.apply(0,e.concat(c/r));a.push({x:u.x,y:u.y,t:c/r})}for(c=0;c<i+1;c++){u=cf.apply(0,t.concat(c/i));o.push({x:u.x,y:u.y,t:c/i})}for(c=0;c<r;c++)for(var h=0;h<i;h++){var p=a[c],d=a[c+1],f=o[h],m=o[h+1],g=Math.abs(d.x-p.x)<.001?"y":"x",v=Math.abs(m.x-f.x)<.001?"y":"x",y=rf(p.x,p.y,d.x,d.y,f.x,f.y,m.x,m.y);if(y){if(s[y.x.toFixed(4)]===y.y.toFixed(4))continue;s[y.x.toFixed(4)]=y.y.toFixed(4);var x=p.t+Math.abs((y[g]-p[g])/(d[g]-p[g]))*(d.t-p.t),E=f.t+Math.abs((y[v]-f[v])/(m[v]-f[v]))*(m.t-f.t);x>=0&&x<=1&&E>=0&&E<=1&&(n?l+=1:l.push({x:y.x,y:y.y,t1:x,t2:E}))}}return l};function hf(e,t){var n=[],r=[];return e.length&&function e(t,i){if(1===t.length)n.push(t[0]),r.push(t[0]);else{for(var a=[],o=0;o<t.length-1;o++)0===o&&n.push(t[0]),o===t.length-2&&r.push(t[o+1]),a[o]=[(1-i)*t[o][0]+i*t[o+1][0],(1-i)*t[o][1]+i*t[o+1][1]];e(a,i)}}(e,t),{left:n,right:r.reverse()}}var pf=function(e,t,n){if(1===n)return[[].concat(e)];var r=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])r=r.concat(function(e,t,n){var r=[[e[1],e[2]]];n=n||2;var i=[];"A"===t[0]?(r.push(t[6]),r.push(t[7])):"C"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]]),r.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]])):r.push([t[1],t[2]]);for(var a=r,o=1/n,s=0;s<n-1;s++){var l=hf(a,o/(1-o*s));i.push(l.left),a=l.right}return i.push(a),i.map((function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t.concat(e[e.length-1])}))}(e,t,n));else{var i=[].concat(e);"M"===i[0]&&(i[0]="L");for(var a=0;a<=n-1;a++)r.push(i)}return r},df=function(e,t){if(e.length!==t.length)return!1;var n=!0;return Uh(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function ff(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var mf=function(e,t){var n=function(e,t){var n,r,i=e.length,a=t.length,o=0;if(0===i||0===a)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=a;c++)s[0][c]={min:c};for(l=1;l<=i;l++)for(n=e[l-1],c=1;c<=a;c++){r=t[c-1],o=df(n,r)?0:1;var u=s[l-1][c].min+1,h=s[l][c-1].min+1,p=s[l-1][c-1].min+o;s[l][c]=ff(u,h,p)}return s}(e,t),r=e.length,i=t.length,a=[],o=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=o;u<=i;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);o=s,n[l][o].type&&a.push({index:l-1,type:n[l][o].type})}for(l=a.length-1;l>=0;l--)o=a[l].index,"add"===a[l].type?e.splice(o,0,[].concat(e[o])):e.splice(o,1)}var h=i-(r=e.length);if(r<i)for(l=0;l<h;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function gf(e,t,n){for(var r,i=[].concat(e),a=1/(n+1),o=vf(t)[0],s=1;s<=n;s++)a*=s,0===(r=Math.floor(e.length*a))?i.unshift([o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]):i.splice(r,0,[o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]);return i}function vf(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var yf=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=vf(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=gf(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=gf(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=gf(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e},xf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",catmullRomToBezier:Ud,fillPath:function(e,t){if(1===e.length)return e;var n=e.length-1,r=t.length-1,i=n/r,a=[];if(1===e.length&&"M"===e[0][0]){for(var o=0;o<r-n;o++)e.push(e[0]);return e}for(o=0;o<r;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce((function(t,r,i){return i===n?t.concat(e[n]):t.concat(pf(e[i],e[i+1],r))}),[]);return l.unshift(e[0]),"Z"!==t[r]&&"z"!==t[r]||l.push("Z"),l},fillPathByDiff:mf,formatPath:yf,intersection:function(e,t){return function(e,t,n){var r,i,a,o,s,l,c,u,h,p;e=Qd(e),t=Qd(t);for(var d=n?0:[],f=0,m=e.length;f<m;f++){var g=e[f];if("M"===g[0])r=s=g[1],i=l=g[2];else{"C"===g[0]?(h=[r,i].concat(g.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,s,l,s,l],r=s,i=l);for(var v=0,y=t.length;v<y;v++){var x=t[v];if("M"===x[0])a=c=x[1],o=u=x[2];else{"C"===x[0]?(p=[a,o].concat(x.slice(1)),a=p[6],o=p[7]):(p=[a,o,a,o,c,u,c,u],a=c,o=u);var E=uf(h,p,n);if(n)d+=E;else{for(var b=0,C=E.length;b<C;b++)E[b].segment1=f,E[b].segment2=v,E[b].bez1=h,E[b].bez2=p;d=d.concat(E)}}}}}return d}(e,t)},parsePathArray:Jd,parsePathString:Yd,pathToAbsolute:Wd,pathToCurve:Qd,rectPath:of}),Ef=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function bf(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var Cf="undefined"!=typeof window&&void 0!==window.document;function Tf(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function wf(e){return e.cfg.visible&&e.cfg.capture}var Sf=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=Rp(r,t),n}return Mh(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(zd),kf=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},_f=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},Af=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},Of=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},If=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Mf=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Nf=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ff=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Lf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Pf(e){return e?Rf(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Mf:"undefined"!=typeof navigator?Rf(navigator.userAgent):"undefined"!=typeof process&&process.version?new Af(process.version.slice(1)):null}function Rf(e){var t=function(e){return""!==e&&Ff.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var a=i.exec(e);return!!a&&[r,a]}),!1)}(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new If;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=kf(kf([],i,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-i.length),!0)):i=[];var a=i.join("."),o=function(e){for(var t=0,n=Lf.length;t<n;t++){var r=Lf[t],i=r[0];if(r[1].exec(e))return i}return null}(e),s=Nf.exec(e);return s&&s[1]?new Of(n,a,o,s[1]):new _f(n,a,o)}var Df,Bf="undefined"!=typeof Float32Array?Float32Array:Array;function zf(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=n[0],d=n[1],f=n[2],m=n[3],g=n[4],v=n[5],y=n[6],x=n[7],E=n[8];return e[0]=p*r+d*o+f*c,e[1]=p*i+d*s+f*u,e[2]=p*a+d*l+f*h,e[3]=m*r+g*o+v*c,e[4]=m*i+g*s+v*u,e[5]=m*a+g*l+v*h,e[6]=y*r+x*o+E*c,e[7]=y*i+x*s+E*u,e[8]=y*a+x*l+E*h,e}function Hf(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function jf(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Gf(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function $f(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function Yf(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function Uf(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Vf(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function Wf(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function Xf(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function qf(e,t){return e[0]*t[0]+e[1]*t[1]}function Kf(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),s=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),Df=new Bf(3),Bf!=Float32Array&&(Df[0]=0,Df[1]=0,Df[2]=0);var Qf=Gf;function Zf(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1}(r,n),zf(e,r,t)}function Jf(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),zf(e,r,t)}function em(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),zf(e,r,t)}function tm(e,t,n){return zf(e,n,t)}function nm(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var a=t[r];switch(a[0]){case"t":Zf(n,n,[a[1],a[2]]);break;case"s":em(n,n,[a[1],a[2]]);break;case"r":Jf(n,n,a[1]);break;case"m":tm(n,n,a[1])}}return n}function rm(e,t,n){var r=Kf(e,t),i=function(e,t){return e[0]*t[1]-t[0]*e[1]}(e,t)>=0;return n?i?2*Math.PI-r:r:i?r:2*Math.PI-r}function im(e,t){var n=[],r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=t[0],d=t[1],f=t[2],m=t[3],g=t[4],v=t[5],y=t[6],x=t[7],E=t[8];return n[0]=p*r+d*o+f*c,n[1]=p*i+d*s+f*u,n[2]=p*a+d*l+f*h,n[3]=m*r+g*o+v*c,n[4]=m*i+g*s+v*u,n[5]=m*a+g*l+v*h,n[6]=y*r+x*o+E*c,n[7]=y*i+x*s+E*u,n[8]=y*a+x*l+E*h,n}function am(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}function om(e){var t=[],n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,t[0]=h*f,t[1]=(-u*r+i*c)*f,t[2]=(s*r-i*o)*f,t[3]=p*f,t[4]=(u*n-i*l)*f,t[5]=(-s*n+i*a)*f,t[6]=d*f,t[7]=(-c*n+r*l)*f,t[8]=(o*n-r*a)*f,t):null}!function(){var e=function(){var e=new Bf(2);return Bf!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var sm=nm,lm=["zIndex","capture","visible","type"],cm=["repeat"];function um(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function hm(e,t){var n={},r=t.attr();return Uh(e,(function(e,t){-1!==cm.indexOf(t)||Vp(r[t],e)||(n[t]=e)})),n}function pm(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return Uh(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&Uh(t.toAttrs,(function(t,n){a.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var dm=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return Rp(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return Mh(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(Yh(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(bf(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr("matrix")},t.prototype.setMatrix=function(e){this.attr("matrix",e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?im(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?im(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?am(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=om(t);if(n)return am(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[Ap(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};Uh(t,(function(e,r){$h(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)$h(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return Uh(lm,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,a,o,s,l,c=e[0],u=e[1],h=e[2],p=void 0===h?"easeLinear":h,d=e[3],f=void 0===d?rd:d,m=e[4],g=void 0===m?0:m;jh(c)?(i=c,c={}):Yh(c)&&c.onFrame&&(i=c.onFrame,a=c.repeat),Yh(u)?(u=(l=u).duration,p=l.easing||"easeLinear",g=l.delay||0,a=l.repeat||a||!1,f=l.callback||rd,o=l.pauseCallback||rd,s=l.resumeCallback||rd):(vp(f)&&(g=f,f=null),jh(p)?(f=p,p="easeLinear"):p=p||"easeLinear");var v=hm(c,this),y={fromAttrs:um(v,this),toAttrs:v,duration:u,easing:p,repeat:a,callback:f,pauseCallback:o,resumeCallback:s,delay:g,startTime:n.getTime(),id:nd(),onFrame:i,pathFormatted:!1};r.length>0?r=pm(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),Uh(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return Uh(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return Uh(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var a=function(e){var a=i[e],s=a.get("name");if(s){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&n&&Tf(a,n))return"break";$h(s)?Uh(s,(function(e){r.emitDelegateEvent(a,e,t)})):o.emitDelegateEvent(a,s,t)}},o=this,s=0;s<i.length;s++){if("break"===a(s))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=sm(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=sm(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=sm(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),a=sm(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(a),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=sm(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(Sf),fm={};function mm(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){mm(e,t)}))}}function gm(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){gm(e,t)}))}}var vm,ym,xm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Uh(o,(function(e){var t=e.getBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=ep(i),t=Jh(i),n=ep(a),r=Jh(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Uh(o,(function(e){var t=e.getCanvasBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=ep(i),t=Jh(i),n=ep(a),r=Jh(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){Uh(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];Yh(n)?r=n:r.type=n;var i=fm[r.type];i||(i=Ap(r.type),fm[r.type]=i);var a=this.getShapeBase(),o=new a[i](r);return this.add(o),o},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if(jh(r))n=new r(i||{parent:this});else{var a=r||{},o=this.getGroupBase();n=new o(a)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!wf(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var a=[e,t,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,a=e.length-1;a>=0;a--){var o=e[a];if(wf(o)&&(o.isGroup()?i=o.getShape(t,n,r):o.isHit(t,n)&&(i=o)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),bf(e.getChildren(),t)}(i,e,!1),e.set("parent",this),t&&mm(e,t),r&&gm(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();Uh(t,(function(e,t){return e._INDEX=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return Uh(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return Uh(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(dm),Em=0,bm=0,Cm=0,Tm=0,wm=0,Sm=0,km="object"==typeof performance&&performance.now?performance:Date,_m="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Am(){return wm||(_m(Om),wm=km.now()+Sm)}function Om(){wm=0}function Im(){this._call=this._time=this._next=null}function Mm(e,t,n){var r=new Im;return r.restart(e,t,n),r}function Nm(){wm=(Tm=km.now())+Sm,Em=bm=0;try{!function(){Am(),++Em;for(var e,t=vm;t;)(e=wm-t._time)>=0&&t._call.call(null,e),t=t._next;--Em}()}finally{Em=0,function(){var e,t,n=vm,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:vm=t);ym=e,Lm(r)}(),wm=0}}function Fm(){var e=km.now(),t=e-Tm;t>1e3&&(Sm-=t,Tm=e)}function Lm(e){Em||(bm&&(bm=clearTimeout(bm)),e-wm>24?(e<1/0&&(bm=setTimeout(Nm,e-km.now()-Sm)),Cm&&(Cm=clearInterval(Cm))):(Cm||(Tm=km.now(),Cm=setInterval(Fm,1e3)),Em=1,_m(Nm)))}function Pm(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Rm(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Im.prototype=Mm.prototype={constructor:Im,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Am():+n)+(null==t?0:+t),this._next||ym===this||(ym?ym._next=this:vm=this,ym=this),this._call=e,this._time=n,Lm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lm())}};var Dm=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),Bm=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),zm=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Hm=Math.PI,jm=Hm/2;function Gm(e){return(1-Math.cos(Hm*e))/2}function $m(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function Ym(e){return((e*=2)<=1?$m(1-e):2-$m(e-1))/2}function Um(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var Vm=4/11;function Wm(e){return(e=+e)<Vm?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375}var Xm=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158),qm=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158),Km=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),Qm=2*Math.PI,Zm=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Qm);function i(e){return t*$m(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*Qm)},i.period=function(n){return e(t,n)},i}(1,.3),Jm=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Qm);function i(e){return 1-t*$m(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*Qm)},i.period=function(n){return e(t,n)},i}(1,.3),eg=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Qm);function i(e){return((e=2*e-1)<0?t*$m(-e)*Math.sin((r-e)/n):2-t*$m(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*Qm)},i.period=function(n){return e(t,n)},i}(1,.3),tg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:function(e){return+e},easeQuad:Pm,easeQuadIn:function(e){return e*e},easeQuadOut:function(e){return e*(2-e)},easeQuadInOut:Pm,easeCubic:Rm,easeCubicIn:function(e){return e*e*e},easeCubicOut:function(e){return--e*e*e+1},easeCubicInOut:Rm,easePoly:zm,easePolyIn:Dm,easePolyOut:Bm,easePolyInOut:zm,easeSin:Gm,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*jm)},easeSinOut:function(e){return Math.sin(e*jm)},easeSinInOut:Gm,easeExp:Ym,easeExpIn:function(e){return $m(1-+e)},easeExpOut:function(e){return 1-$m(e)},easeExpInOut:Ym,easeCircle:Um,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCircleInOut:Um,easeBounce:Wm,easeBounceIn:function(e){return 1-Wm(1-e)},easeBounceOut:Wm,easeBounceInOut:function(e){return((e*=2)<=1?1-Wm(1-e):Wm(e-1)+1)/2},easeBack:Km,easeBackIn:Xm,easeBackOut:qm,easeBackInOut:Km,easeElastic:Jm,easeElasticIn:Zm,easeElasticOut:Jm,easeElasticInOut:eg});function ng(e){return function(){return e}}function rg(e){return 1==(e=+e)?ig:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):ng(isNaN(t)?n:t)}}function ig(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):ng(isNaN(e)?t:e)}var ag=function e(t){var n=rg(t);function r(e,t){var r=n((e=fe(e)).r,(t=fe(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=ig(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function og(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function sg(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lg(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=mg(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function cg(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ug(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hg(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=mg(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var pg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dg=new RegExp(pg.source,"g");function fg(e,t){var n,r,i,a=pg.lastIndex=dg.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=pg.exec(e))&&(r=dg.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:ug(n,r)})),a=dg.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function mg(e,t){var n,r=typeof t;return null==t||"boolean"===r?ng(t):("number"===r?ug:"string"===r?(n=me(t))?(t=n,ag):fg:t instanceof me?ag:t instanceof Date?cg:sg(t)?og:Array.isArray(t)?lg:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?hg:ug)(e,t)}var gg=[1,0,0,0,1,0,0,0,1];function vg(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var a=t.duration,o=t.easing;if(n=n-i-t.delay,t.repeat)r=n%a/a,r=tg[o](r);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=tg[o](r)}if(t.onFrame){var s=t.onFrame(r);e.attr(s)}else!function(e,t,n){var r={},i=t.fromAttrs,a=t.toAttrs;if(!e.destroyed){var o,s,l,c;for(var u in a)if(!Vp(i[u],a[u]))if("path"===u){var h=a[u],p=i[u];h.length>p.length?(h=Yd(a[u]),p=Yd(i[u]),p=mf(p,h),p=yf(p,h),t.fromAttrs.path=p,t.toAttrs.path=h):t.pathFormatted||(h=Yd(a[u]),p=Yd(i[u]),p=yf(p,h),t.fromAttrs.path=p,t.toAttrs.path=h,t.pathFormatted=!0),r[u]=[];for(var d=0;d<h.length;d++){for(var f=h[d],m=p[d],g=[],v=0;v<f.length;v++)vp(f[v])&&m&&vp(m[v])?(o=mg(m[v],f[v]),g.push(o(n))):g.push(f[v]);r[u].push(g)}}else if("matrix"===u){var y=(l=i[u]||gg,(sg(c=a[u]||gg)?og:lg)(l,c))(n);r[u]=y}else["fill","stroke","fillStyle","strokeStyle"].includes(u)&&(s=a[u],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[u]=a[u]:jh(a[u])||(o=mg(i[u],a[u]),r[u]=o(n));e.attr(r)}}(e,t,r);return!1}var yg=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=Mm((function(i){if(r.current=i,r.animators.length>0){for(var a=r.animators.length-1;a>=0;a--)if((e=r.animators[a]).destroyed)r.removeAnimator(a);else{if(!e.isAnimatePaused())for(var o=(t=e.get("animations")).length-1;o>=0;o--)n=t[o],vg(e,n,i)&&(t.splice(o,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(a)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),xg=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Eg(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function bg(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&Tf(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var Cg=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");Uh(xg,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");Uh(xg,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,a){var o=new Ef(e,t);return o.fromShape=i,o.toShape=a,o.x=n.x,o.y=n.y,o.clientX=n.clientX,o.clientY=n.clientY,o.propagationPath.push(r),o},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],a=!1;if(i)i.call(this,n,r,t);else{var o=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(a=!0,o&&this._emitEvent(e,t,n,o,o,null),this._emitEvent(e,t,n,null,o,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(a||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,a);else{var o=this.mousedownPoint;if(o){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=o.clientX-e.clientX,u=o.clientY-e.clientY;l>120||c*c+u*u>40?s&&s.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,e,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,a){var o=this._getEventObj(e,t,n,r,i,a);if(r){o.shape=r,Eg(r,e,o);for(var s=r.getParent();s;)s.emitDelegation(e,o),o.propagationStopped||bg(s,e,o),o.propagationPath.push(s),s=s.getParent()}else{Eg(this.canvas,e,o)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),Tg=Pf(),wg=Tg&&"firefox"===Tg.name,Sg=function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");ap(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new Cg({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new yg(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");Cf&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");Cf&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(wg&&!Gh(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Gh(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(xm),kg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t},t}(xm),_g=function(e){function t(t){return e.call(this,t)||this}return Mh(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,a=e.maxY;if(t){var o=am(t,[e.minX,e.minY]),s=am(t,[e.maxX,e.minY]),l=am(t,[e.minX,e.maxY]),c=am(t,[e.maxX,e.maxY]);n=Math.min(o[0],s[0],l[0],c[0]),i=Math.max(o[0],s[0],l[0],c[0]),r=Math.min(o[1],s[1],l[1],c[1]),a=Math.max(o[1],s[1],l[1],c[1])}var u=this.attrs;if(u.shadowColor){var h=u.shadowBlur,p=void 0===h?0:h,d=u.shadowOffsetX,f=void 0===d?0:d,m=u.shadowOffsetY,g=void 0===m?0:m,v=n-p+f,y=i+p+f,x=r-p+g,E=a+p+g;n=Math.min(n,v),i=Math.max(i,y),r=Math.min(r,x),a=Math.max(a,E)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],a=(i=this.invertFromMatrix(i))[0],o=i[1],s=this._isInBBox(a,o);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(a,o)){if(this.isInShape(a,o))return!0;if(n&&n.isHit(a,o))return!0;if(r&&r.isHit(a,o))return!0}return!1},t}(dm),Ag=new Map;function Og(e,t){Ag.set(e,t)}function Ig(e){return Ag.get(e)}function Mg(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function Ng(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Fg(e){return Math.min.apply(null,e)}function Lg(e){return Math.max.apply(null,e)}function Pg(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function Rg(e,t){return Math.abs(e-t)<.001}function Dg(e,t){var n=Fg(e),r=Fg(t);return{x:n,y:r,width:Lg(e)-n,height:Lg(t)-r}}function Bg(e){return(e+2*Math.PI)%(2*Math.PI)}var zg={box:function(e,t,n,r){return Dg([e,n],[t,r])},length:function(e,t,n,r){return Pg(e,t,n,r)},pointAt:function(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}},pointDistance:function(e,t,n,r,i,a){var o=(n-e)*(i-e)+(r-t)*(a-t);return o<0?Pg(e,t,i,a):o>(n-e)*(n-e)+(r-t)*(r-t)?Pg(n,r,i,a):this.pointToLine(e,t,n,r,i,a)},pointToLine:function(e,t,n,r,i,a){var o=[n-e,r-t];if(function(e,t){return e[0]===t[0]&&e[1]===t[1]}(o,[0,0]))return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t));var s=[-o[1],o[0]];Xf(s,s);var l=[i-e,a-t];return Math.abs(qf(l,s))},tangentAngle:function(e,t,n,r){return Math.atan2(r-t,n-e)}};function Hg(e,t,n,r,i,a){var o,s=1/0,l=[n,r],c=20;a&&a>200&&(c=a/10);for(var u=1/c,h=u/10,p=0;p<=c;p++){var d=p*u,f=[i.apply(null,e.concat([d])),i.apply(null,t.concat([d]))];(y=Pg(l[0],l[1],f[0],f[1]))<s&&(o=d,s=y)}if(0===o)return{x:e[0],y:t[0]};if(1===o){var m=e.length;return{x:e[m-1],y:t[m-1]}}s=1/0;for(p=0;p<32&&!(h<1e-4);p++){var g=o-h,v=o+h,y=(f=[i.apply(null,e.concat([g])),i.apply(null,t.concat([g]))],Pg(l[0],l[1],f[0],f[1]));if(g>=0&&y<s)o=g,s=y;else{var x=[i.apply(null,e.concat([v])),i.apply(null,t.concat([v]))],E=Pg(l[0],l[1],x[0],x[1]);v<=1&&E<s?(o=v,s=E):h*=.5}}return{x:i.apply(null,e.concat([o])),y:i.apply(null,t.concat([o]))}}function jg(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function Gg(e,t,n){var r=e+n-2*t;if(Rg(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function $g(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function Yg(e,t,n,r,i,a,o){var s=jg(e,n,i,o),l=jg(t,r,a,o),c=zg.pointAt(e,t,n,r,o),u=zg.pointAt(n,r,i,a,o);return[[e,t,c.x,c.y,s,l],[s,l,u.x,u.y,i,a]]}function Ug(e,t,n,r,i,a,o){if(0===o)return(Pg(e,t,n,r)+Pg(n,r,i,a)+Pg(e,t,i,a))/2;var s=Yg(e,t,n,r,i,a,.5),l=s[0],c=s[1];return l.push(o-1),c.push(o-1),Ug.apply(null,l)+Ug.apply(null,c)}var Vg={box:function(e,t,n,r,i,a){var o=Gg(e,n,i)[0],s=Gg(t,r,a)[0],l=[e,i],c=[t,a];return void 0!==o&&l.push(jg(e,n,i,o)),void 0!==s&&c.push(jg(t,r,a,s)),Dg(l,c)},length:function(e,t,n,r,i,a){return Ug(e,t,n,r,i,a,3)},nearestPoint:function(e,t,n,r,i,a,o,s){return Hg([e,n,i],[t,r,a],o,s,jg)},pointDistance:function(e,t,n,r,i,a,o,s){var l=this.nearestPoint(e,t,n,r,i,a,o,s);return Pg(l.x,l.y,o,s)},interpolationAt:jg,pointAt:function(e,t,n,r,i,a,o){return{x:jg(e,n,i,o),y:jg(t,r,a,o)}},divide:function(e,t,n,r,i,a,o){return Yg(e,t,n,r,i,a,o)},tangentAngle:function(e,t,n,r,i,a,o){var s=$g(e,n,i,o),l=$g(t,r,a,o);return Bg(Math.atan2(l,s))}};function Wg(e,t,n,r,i){var a=1-i;return a*a*a*e+3*t*i*a*a+3*n*i*i*a+r*i*i*i}function Xg(e,t,n,r,i){var a=1-i;return 3*(a*a*(t-e)+2*a*i*(n-t)+i*i*(r-n))}function qg(e,t,n,r){var i,a,o,s=-3*e+9*t-9*n+3*r,l=6*e-12*t+6*n,c=3*t-3*e,u=[];if(Rg(s,0))Rg(l,0)||(i=-c/l)>=0&&i<=1&&u.push(i);else{var h=l*l-4*s*c;Rg(h,0)?u.push(-l/(2*s)):h>0&&(a=(-l-(o=Math.sqrt(h)))/(2*s),(i=(-l+o)/(2*s))>=0&&i<=1&&u.push(i),a>=0&&a<=1&&u.push(a))}return u}function Kg(e,t,n,r,i,a,o,s,l){var c=Wg(e,n,i,o,l),u=Wg(t,r,a,s,l),h=zg.pointAt(e,t,n,r,l),p=zg.pointAt(n,r,i,a,l),d=zg.pointAt(i,a,o,s,l),f=zg.pointAt(h.x,h.y,p.x,p.y,l),m=zg.pointAt(p.x,p.y,d.x,d.y,l);return[[e,t,h.x,h.y,f.x,f.y,c,u],[c,u,m.x,m.y,d.x,d.y,o,s]]}function Qg(e,t,n,r,i,a,o,s,l){if(0===l)return function(e,t){for(var n=0,r=e.length,i=0;i<r;i++)n+=Pg(e[i],t[i],e[(i+1)%r],t[(i+1)%r]);return n/2}([e,n,i,o],[t,r,a,s]);var c=Kg(e,t,n,r,i,a,o,s,.5),u=c[0],h=c[1];return u.push(l-1),h.push(l-1),Qg.apply(null,u)+Qg.apply(null,h)}var Zg={extrema:qg,box:function(e,t,n,r,i,a,o,s){for(var l=[e,o],c=[t,s],u=qg(e,n,i,o),h=qg(t,r,a,s),p=0;p<u.length;p++)l.push(Wg(e,n,i,o,u[p]));for(p=0;p<h.length;p++)c.push(Wg(t,r,a,s,h[p]));return Dg(l,c)},length:function(e,t,n,r,i,a,o,s){return Qg(e,t,n,r,i,a,o,s,3)},nearestPoint:function(e,t,n,r,i,a,o,s,l,c,u){return Hg([e,n,i,o],[t,r,a,s],l,c,Wg,u)},pointDistance:function(e,t,n,r,i,a,o,s,l,c,u){var h=this.nearestPoint(e,t,n,r,i,a,o,s,l,c,u);return Pg(h.x,h.y,l,c)},interpolationAt:Wg,pointAt:function(e,t,n,r,i,a,o,s,l){return{x:Wg(e,n,i,o,l),y:Wg(t,r,a,s,l)}},divide:function(e,t,n,r,i,a,o,s,l){return Kg(e,t,n,r,i,a,o,s,l)},tangentAngle:function(e,t,n,r,i,a,o,s,l){var c=Xg(e,n,i,o,l),u=Xg(t,r,a,s,l);return Bg(Math.atan2(u,c))}};function Jg(e,t,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+e}function ev(e,t,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+t}var tv=function(e,t,n,r,i,a,o){for(var s=function(e,t,n){return Math.atan(-t/e*Math.tan(n))}(n,r,i),l=1/0,c=-1/0,u=[a,o],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var p=s+h;a<o?a<p&&p<o&&u.push(p):o<p&&p<a&&u.push(p)}for(h=0;h<u.length;h++){var d=Jg(e,0,n,r,i,u[h]);d<l&&(l=d),d>c&&(c=d)}var f=function(e,t,n){return Math.atan(t/(e*Math.tan(n)))}(n,r,i),m=1/0,g=-1/0,v=[a,o];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var y=f+h;a<o?a<y&&y<o&&v.push(y):o<y&&y<a&&v.push(y)}for(h=0;h<v.length;h++){var x=ev(0,t,n,r,i,v[h]);x<m&&(m=x),x>g&&(g=x)}return{x:l,y:m,width:c-l,height:g-m}};var nv=function(e){return function(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=Pg(r[0],r[1],i[0],i[1])}return t}(e)};function rv(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function iv(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=rv(t,n.getCanvasBBox())),r&&(t=rv(t,r.getCanvasBBox())),t}var av=null;function ov(){if(!av){var e=document.createElement("canvas");e.width=1,e.height=1,av=e.getContext("2d")}return av}function sv(e,t,n){var r=1;return ap(e)&&(r=e.split("\n").length),r>1?t*r+function(e,t){return t?t-e:.14*e}(t,n)*(r-1):t}function lv(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}var cv=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,uv=/[^\s\,]+/gi;function hv(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l,c,u,h=[],p=!!r;if(p){o=r[0],s=r[1];for(var d=0,f=e.length;d<f;d+=1)o=$f([0,0],o,g=e[d]),s=Yf([0,0],s,g)}d=0;for(var m=e.length;d<m;d+=1){var g=e[d];if(0!==d||n)if(d!==m-1||n){i=e[[d?d-1:m-1,d-1][n?0:1]],a=e[n?(d+1)%m:d+1];var v=[0,0];v=Uf(v=Qf(v,a,i),v,t);var y=Vf(g,i),x=Vf(g,a),E=y+x;0!==E&&(y/=E,x/=E);var b=Uf([0,0],v,-y),C=Uf([0,0],v,x);c=jf([0,0],g,b),l=$f([0,0],l=jf([0,0],g,C),Yf([0,0],a,g)),l=Yf([0,0],l,$f([0,0],a,g)),c=$f([0,0],c=jf([0,0],g,b=Uf([0,0],b=Qf([0,0],l,g),-y/x)),Yf([0,0],i,g)),c=Yf([0,0],c,$f([0,0],i,g)),l=jf([0,0],g,C=Uf([0,0],C=Qf([0,0],g,c),x/y)),p&&(c=$f([0,0],c=Yf([0,0],c,o),s),l=$f([0,0],l=Yf([0,0],l,o),s)),h.push(u),h.push(c),u=l}else c=g,h.push(u),h.push(c);else u=g}return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a+=1)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}var pv="\t\n\v\f\r   ᠎             　\u2028\u2029",dv=new RegExp("([a-z])["+pv+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+pv+"]*,?["+pv+"]*)+)","ig"),fv=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+pv+"]*,?["+pv+"]*","ig");function mv(e){if(!e)return null;if($h(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(dv,(function(e,r,i){var a=[],o=r.toLowerCase();if(i.replace(fv,(function(e,t){t&&a.push(+t)})),"m"===o&&a.length>2&&(n.push([r].concat(a.splice(0,2))),o="l",r="m"===r?"l":"L"),"o"===o&&1===a.length&&n.push([r,a[0]]),"r"===o)n.push([r].concat(a));else for(;a.length>=t[o]&&(n.push([r].concat(a.splice(0,t[o]))),t[o]););return""})),n}var gv=/[a-z]/;function vv(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function yv(e){var t=mv(e);if(!t||!t.length)return[["M",0,0]];for(var n=!1,r=0;r<t.length;r++){var i=t[r][0];if(gv.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return t;var a=[],o=0,s=0,l=0,c=0,u=0,h=t[0];"M"!==h[0]&&"m"!==h[0]||(l=o=+h[1],c=s=+h[2],u++,a[0]=["M",o,s]);r=u;for(var p=t.length;r<p;r++){var d=t[r],f=a[r-1],m=[],g=(i=d[0]).toUpperCase();if(i!==g)switch(m[0]=g,g){case"A":m[1]=d[1],m[2]=d[2],m[3]=d[3],m[4]=d[4],m[5]=d[5],m[6]=+d[6]+o,m[7]=+d[7]+s;break;case"V":m[1]=+d[1]+s;break;case"H":m[1]=+d[1]+o;break;case"M":l=+d[1]+o,c=+d[2]+s,m[1]=l,m[2]=c;break;default:for(var v=1,y=d.length;v<y;v++)m[v]=+d[v]+(v%2?o:s)}else m=t[r];switch(g){case"Z":o=+l,s=+c;break;case"H":m=["L",o=m[1],s];break;case"V":m=["L",o,s=m[1]];break;case"T":o=m[1],s=m[2];var x=vv([f[1],f[2]],[f[3],f[4]]);m=["Q",x[0],x[1],o,s];break;case"S":o=m[m.length-2],s=m[m.length-1];var E=f.length,b=vv([f[E-4],f[E-3]],[f[E-2],f[E-1]]);m=["C",b[0],b[1],m[1],m[2],o,s];break;case"M":l=m[m.length-2],c=m[m.length-1];break;default:o=m[m.length-2],s=m[m.length-1]}a.push(m)}return a}function xv(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ev(e,t){return xv(e)*xv(t)?(e[0]*t[0]+e[1]*t[1])/(xv(e)*xv(t)):1}function bv(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Ev(e,t))}function Cv(e,t){return e[0]===t[0]&&e[1]===t[1]}function Tv(e,t){var n=t[1],r=t[2],i=Ep(Cp(t[3]),2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],c=t[6],u=t[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=h*h/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var f=n*n*(p*p)+r*r*(h*h),m=f?Math.sqrt((n*n*(r*r)-f)/f):1;a===o&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*p/r:0,v=n?m*-r*h/n:0,y=(s+c)/2+Math.cos(i)*g-Math.sin(i)*v,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*v,E=[(h-g)/n,(p-v)/r],b=[(-1*h-g)/n,(-1*p-v)/r],C=bv([1,0],E),T=bv(E,b);return Ev(E,b)<=-1&&(T=Math.PI),Ev(E,b)>=1&&(T=0),0===o&&T>0&&(T-=2*Math.PI),1===o&&T<0&&(T+=2*Math.PI),{cx:y,cy:x,rx:Cv(e,[c,u])?0:n,ry:Cv(e,[c,u])?0:r,startAngle:C,endAngle:C+T,xRotation:i,arcFlag:a,sweepFlag:o}}function wv(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function Sv(e){for(var t=[],n=null,r=null,i=null,a=0,o=(e=function(e){var t=e||[];return $h(t)?t:ap(t)?(Uh(t=t.match(cv),(function(e,n){if((e=e.match(uv))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}Uh(e,(function(t,n){isNaN(t)||(e[n]=+t)})),t[n]=e})),t):void 0}(e)).length,s=0;s<o;s++){var l=e[s];r=e[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var h=Tv(n,l);u.arcParams=h}if("Z"===c)n=i,r=e[a+1];else{var p=l.length;n=[l[p-2],l[p-1]]}r&&"Z"===r[0]&&(r=e[a],t[a]&&(t[a].prePoint=n)),u.currentPoint=n,t[a]&&Cv(n,t[a].currentPoint)&&(t[a].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var f=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]];else if("Q"===c){var m=[l[1],l[2]];u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===c){m=wv((y=t[s-1]).currentPoint,f);"Q"===y.command?(u.command="Q",u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]):(u.command="TL",u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]])}else if("C"===c){var g=[l[1],l[2]],v=[l[3],l[4]];u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[g[0]-v[0],g[1]-v[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[v[0]-g[0],v[1]-g[1]])}else if("S"===c){var y;g=wv((y=t[s-1]).currentPoint,f),v=[l[1],l[2]];"C"===y.command?(u.command="C",u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]):(u.command="SQ",u.startTangent=[f[0]-v[0],f[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]])}else if("A"===c){var x=.001,E=u.arcParams||{},b=E.cx,C=void 0===b?0:b,T=E.cy,w=void 0===T?0:T,S=E.rx,k=void 0===S?0:S,_=E.ry,A=void 0===_?0:_,O=E.sweepFlag,I=void 0===O?0:O,M=E.startAngle,N=void 0===M?0:M,F=E.endAngle,L=void 0===F?0:F;0===I&&(x*=-1);var P=k*Math.cos(N-x)+C,R=A*Math.sin(N-x)+w;u.startTangent=[P-i[0],R-i[1]];var D=k*Math.cos(N+L+x)+C,B=A*Math.sin(N+L-x)+w;u.endTangent=[f[0]-D,f[1]-B]}t.push(u)}return t}var kv=function(e,t,n){return e>=t&&e<=n};function _v(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function Av(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function Ov(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(Av(o,s,[t,n]))return!0;_v(o[1]-n)>0!=_v(s[1]-n)>0&&_v(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Iv(e){for(var t=[],n=e.length,r=0;r<n-1;r++){var i=e[r],a=e[r+1];t.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(t.length>1){var o=e[0],s=e[n-1];t.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return t}function Mv(e,t){var n=!1;return Uh(e,(function(e){if(function(e,t,n,r){var i=n.x-e.x,a=n.y-e.y,o=t.x-e.x,s=t.y-e.y,l=r.x-n.x,c=r.y-n.y,u=o*c-s*l,h=null;if(u*u>.001*(o*o+s*s)*(l*l+c*c)){var p=(i*c-a*l)/u,d=(i*s-a*o)/u;kv(p,0,1)&&kv(d,0,1)&&(h={x:e.x+p*o,y:e.y+p*s})}return h}(e.from,e.to,t.from,t.to))return n=!0,!1})),n}function Nv(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function Fv(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||0===Math.sin(l)||yp(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(u-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}Og("rect",Mg),Og("image",Mg),Og("circle",Ng),Og("marker",Ng),Og("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}var o=Dg(n,r),s=o.x,l=o.y,c={minX:s,minY:l,maxX:s+o.width,maxY:l+o.height};return{x:(c=iv(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),Og("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}return Dg(n,r)})),Og("text",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=lv(t));var l,c=function(e,t){var n=ov(),r=0;return Gh(e)||""===e||(n.save(),n.font=t,ap(e)&&e.includes("\n")?Uh(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width,n.restore()),r}(i,s);if(c){var u=t.textAlign,h=t.textBaseline,p=sv(i,a,o),d={x:n,y:r-p};u&&("end"===u||"right"===u?d.x-=c:"center"===u&&(d.x-=c/2)),h&&("top"===h?d.y+=p:"middle"===h&&(d.y+=p/2)),l={x:d.x,y:d.y,width:c,height:p}}else l={x:n,y:r,width:0,height:0};return l})),Og("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=(m=e[a]).currentPoint,s=m.params,l=m.prePoint,c=void 0;switch(m.command){case"Q":c=Vg.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":c=Zg.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var u=m.arcParams;c=tv(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(o[0]),r.push(o[1])}c&&(m.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&i.push(m)}n=n.filter((function(e){return!Number.isNaN(e)})),r=r.filter((function(e){return!Number.isNaN(e)}));var h=ep(n),p=ep(r),d=Jh(n),f=Jh(r);if(0===i.length)return{x:h,y:p,width:d-h,height:f-p};for(a=0;a<i.length;a++){var m;(o=(m=i[a]).currentPoint)[0]===h?h-=Fv(m,t).xExtra:o[0]===d&&(d+=Fv(m,t).xExtra),o[1]===p?p-=Fv(m,t).yExtra:o[1]===f&&(f+=Fv(m,t).yExtra)}return{x:h,y:p,width:d-h,height:f-p}}(e.get("segments")||Sv(n),r),a=i.x,o=i.y,s={minX:a,minY:o,maxX:a+i.width,maxY:o+i.height};return{x:(s=iv(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Og("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,a),maxY:Math.max(r,a)};return{x:(o=iv(e,o)).minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}})),Og("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;return{x:n-i,y:r-a,width:2*i,height:2*a}}));var Lv=function(){function e(e){var t=e.xField,n=e.yField,r=e.adjustNames,i=void 0===r?["x","y"]:r;this.adjustNames=i,this.xField=t,this.yField=n}return e.prototype.isAdjust=function(e){return this.adjustNames.indexOf(e)>=0},e.prototype.getAdjustRange=function(e,t,n){var r,i,a=this.yField,o=n.indexOf(t),s=n.length;return!a&&this.isAdjust("y")?(r=0,i=1):s>1?(r=n[0===o?0:o-1],i=n[o===s-1?s-1:o+1],0!==o?r+=(t-r)/2:r-=(i-t)/2,o!==s-1?i-=(i-t)/2:i+=(t-n[s-2])/2):(r=0===t?0:t-.5,i=0===t?1:t+.5),{pre:r,next:i}},e.prototype.adjustData=function(e,t){var n=this,r=this.getDimValues(t);Uh(e,(function(e,t){Uh(r,(function(r,i){n.adjustDim(i,r,e,t)}))}))},e.prototype.groupData=function(e,t){return Uh(e,(function(e){void 0===e[t]&&(e[t]=0)})),dp(e,t)},e.prototype.adjustDim=function(e,t,n,r){},e.prototype.getDimValues=function(e){var t=this.xField,n=this.yField,r={},i=[];if(t&&this.isAdjust("x")&&i.push(t),n&&this.isAdjust("y")&&i.push(n),i.forEach((function(t){r[t]=sp(e,t).sort((function(e,t){return e-t}))})),!n&&this.isAdjust("y")){r.y=[0,1]}return r},e}(),Pv={},Rv=function(e){return Pv[e.toLowerCase()]},Dv=function(e,t){if(Rv(e))throw new Error("Adjust type '"+e+"' existed.");Pv[e.toLowerCase()]=t},Bv=function(e,t){return(Bv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function zv(e,t){function n(){this.constructor=e}Bv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Hv=function(){return(Hv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},jv=function(e){function t(t){var n=e.call(this,t)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var r=t.marginRatio,i=void 0===r?.5:r,a=t.dodgeRatio,o=void 0===a?.5:a,s=t.dodgeBy,l=t.intervalPadding,c=t.dodgePadding,u=t.xDimensionLength,h=t.groupNum,p=t.defaultSize,d=t.maxColumnWidth,f=t.minColumnWidth,m=t.columnWidthRatio;return n.marginRatio=i,n.dodgeRatio=o,n.dodgeBy=s,n.intervalPadding=l,n.dodgePadding=c,n.xDimensionLegenth=u,n.groupNum=h,n.defaultSize=p,n.maxColumnWidth=d,n.minColumnWidth=f,n.columnWidthRatio=m,n}return zv(t,e),t.prototype.process=function(e){var t=Dp(e),n=Zh(t),r=this.dodgeBy,i=r?function(e,t){if(!t)return[e];var n=fp(e,t),r=[];for(var i in n)r.push(n[i]);return r}(n,r):t;return this.cacheMap={},this.adjustDataArray=i,this.mergeData=n,this.adjustData(i,n),this.adjustDataArray=[],this.mergeData=[],t},t.prototype.adjustDim=function(e,t,n,r){var i=this,a=this.getDistribution(e);return Uh(this.groupData(n,e),(function(n,o){var s;s=1===t.length?{pre:t[0]-1,next:t[0]+1}:i.getAdjustRange(e,parseFloat(o),t),Uh(n,(function(t){var n=t[e],o=a[n],l=o.indexOf(r);t[e]=i.getDodgeOffset(s,l,o.length)}))})),[]},t.prototype.getDodgeOffset=function(e,t,n){var r,i=this,a=i.dodgeRatio,o=i.marginRatio,s=i.intervalPadding,l=i.dodgePadding,c=e.pre,u=e.next,h=u-c;if(!Gh(s)&&Gh(l)&&s>=0)r=c+this.getIntervalOnlyOffset(n,t);else if(!Gh(l)&&Gh(s)&&l>=0){r=c+this.getDodgeOnlyOffset(n,t)}else if(!Gh(s)&&!Gh(l)&&s>=0&&l>=0){r=c+this.getIntervalAndDodgeOffset(n,t)}else{var p=h*a/n,d=o*p;r=(c+u)/2+(.5*(h-n*p-(n-1)*d)+((t+1)*p+t*d)-.5*p-.5*h)}return r},t.prototype.getIntervalOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.intervalPadding,a=n.xDimensionLegenth,o=n.groupNum,s=n.dodgeRatio,l=n.maxColumnWidth,c=n.minColumnWidth,u=n.columnWidthRatio,h=i/a,p=(1-(o-1)*h)/o*s/(e-1),d=((1-h*(o-1))/o-p*(e-1))/e;if(d=Gh(u)?d:1/o/e*u,!Gh(l)){var f=l/a;d=Math.min(d,f)}if(!Gh(c)){var m=c/a;d=Math.max(d,m)}return((.5+t)*(d=r?r/a:d)+t*(p=((1-(o-1)*h)/o-e*d)/(e-1))+.5*h)*o-h/2},t.prototype.getDodgeOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,s=n.marginRatio,l=n.maxColumnWidth,c=n.minColumnWidth,u=n.columnWidthRatio,h=i/a,p=1*s/(o-1),d=((1-p*(o-1))/o-h*(e-1))/e;if(d=u?1/o/e*u:d,!Gh(l)){var f=l/a;d=Math.min(d,f)}if(!Gh(c)){var m=c/a;d=Math.max(d,m)}return((.5+t)*(d=r?r/a:d)+t*h+.5*(p=(1-(d*e+h*(e-1))*o)/(o-1)))*o-p/2},t.prototype.getIntervalAndDodgeOffset=function(e,t){var n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,s=r/a,l=i/a;return((.5+t)*(((1-s*(o-1))/o-l*(e-1))/e)+t*l+.5*s)*o-s/2},t.prototype.getDistribution=function(e){var t=this.adjustDataArray,n=this.cacheMap,r=n[e];return r||(r={},Uh(t,(function(t,n){var i=sp(t,e);i.length||i.push(0),Uh(i,(function(e){r[e]||(r[e]=[]),r[e].push(n)}))})),n[e]=r),r},t}(Lv);var Gv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zv(t,e),t.prototype.process=function(e){var t=Dp(e),n=Zh(t);return this.adjustData(t,n),t},t.prototype.adjustDim=function(e,t,n){var r=this;return Uh(this.groupData(n,e),(function(n,i){return r.adjustGroup(n,e,parseFloat(i),t)}))},t.prototype.getAdjustOffset=function(e){var t,n=e.pre,r=e.next,i=.05*(r-n);return(r-i-(t=n+i))*Math.random()+t},t.prototype.adjustGroup=function(e,t,n,r){var i=this,a=this.getAdjustRange(t,n,r);return Uh(e,(function(e){e[t]=i.getAdjustOffset(a)})),e},t}(Lv),$v=pd,Yv=function(e){function t(t){var n=e.call(this,t)||this,r=t.adjustNames,i=void 0===r?["y"]:r,a=t.height,o=void 0===a?NaN:a,s=t.size,l=void 0===s?10:s,c=t.reverseOrder,u=void 0!==c&&c;return n.adjustNames=i,n.height=o,n.size=l,n.reverseOrder=u,n}return zv(t,e),t.prototype.process=function(e){var t=this.yField,n=this.reverseOrder,r=t?this.processStack(e):this.processOneDimStack(e);return n?this.reverse(r):r},t.prototype.reverse=function(e){return e.slice(0).reverse()},t.prototype.processStack=function(e){var t=this,n=t.xField,r=t.yField,i=t.reverseOrder?this.reverse(e):e,a=new $v,o=new $v;return i.map((function(e){return e.map((function(e){var t,i=qp(e,n,0),s=qp(e,[r]),l=i.toString();if(s=$h(s)?s[1]:s,!Gh(s)){var c=s>=0?a:o;c.has(l)||c.set(l,0);var u=c.get(l),h=s+u;return c.set(l,h),Hv(Hv({},e),((t={})[r]=[u,h],t))}return e}))}))},t.prototype.processOneDimStack=function(e){var t=this,n=this,r=n.xField,i=n.height,a=n.reverseOrder,o=a?this.reverse(e):e,s=new $v;return o.map((function(e){return e.map((function(e){var n,a=t.size,o=e[r],l=2*a/i;s.has(o)||s.set(o,l/2);var c=s.get(o);return s.set(o,c+l),Hv(Hv({},e),((n={}).y=c,n))}))}))},t}(Lv),Uv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zv(t,e),t.prototype.process=function(e){var t=Zh(e),n=this.xField,r=this.yField,i=this.getXValuesMaxMap(t),a=Math.max.apply(Math,Object.keys(i).map((function(e){return i[e]})));return Wp(e,(function(e){return Wp(e,(function(e){var t,o,s=e[r],l=e[n];if($h(s)){var c=(a-i[l])/2;return Hv(Hv({},e),((t={})[r]=Wp(s,(function(e){return c+e})),t))}var u=(a-s)/2;return Hv(Hv({},e),((o={})[r]=[u,s+u],o))}))}))},t.prototype.getXValuesMaxMap=function(e){var t=this,n=this.xField,r=this.yField;return function(e,t){void 0===t&&(t=Xp);var n={};return Yh(e)&&!Gh(e)&&Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n}(dp(e,(function(e){return e[n]})),(function(e){return t.getDimMaxValue(e,r)}))},t.prototype.getDimMaxValue=function(e,t){var n=Wp(e,(function(e){return qp(e,t,[])})),r=Zh(n);return Math.max.apply(Math,r)},t}(Lv);Dv("Dodge",jv),Dv("Jitter",Gv),Dv("Stack",Yv),Dv("Symmetric",Uv);var Vv=function(e,t){return ap(t)?t:e.invert(e.scale(t))},Wv=function(){function e(e){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(e)}return e.prototype.mapping=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.map((function(t,n){return e._toOriginParam(t,e.scales[n])}));return this.callback.apply(this,r)},e.prototype.getLinearValue=function(e){var t=this.values.length-1,n=Math.floor(t*e),r=t*e-n,i=this.values[n];return i+((n===t?i:this.values[n+1])-i)*r},e.prototype.getNames=function(){for(var e=this.scales,t=this.names,n=Math.min(e.length,t.length),r=[],i=0;i<n;i+=1)r.push(t[i]);return r},e.prototype.getFields=function(){return this.scales.map((function(e){return e.field}))},e.prototype.getScale=function(e){return this.scales[this.names.indexOf(e)]},e.prototype.defaultCallback=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this.values:t.map((function(t,n){var r=e.scales[n];return"identity"===r.type?r.values[0]:e._getAttributeValue(r,t)}))},e.prototype._parseCfg=function(e){var t=this,n=e.type,r=void 0===n?"base":n,i=e.names,a=void 0===i?[]:i,o=e.scales,s=void 0===o?[]:o,l=e.values,c=void 0===l?[]:l,u=e.callback;this.type=r,this.scales=s,this.values=c,this.names=a,this.callback=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(u){var r=u.apply(void 0,e);if(!Gh(r))return[r]}return t.defaultCallback.apply(t,e)}},e.prototype._getAttributeValue=function(e,t){if(e.isCategory&&!this.linear){var n=e.translate(t);return this.values[n%this.values.length]}var r=e.scale(t);return this.getLinearValue(r)},e.prototype._toOriginParam=function(e,t){return t.isLinear?e:$h(e)?e.map((function(e){return Vv(t,e)})):Vv(t,e)},e}(),Xv=function(e,t){return(Xv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function qv(e,t){function n(){this.constructor=e}Xv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Kv=/rgba?\(([\s.,0-9]+)\)/,Qv=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Zv=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Jv=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,ey=function(e,t,n,r){return e[r]+(t[r]-e[r])*n};function ty(e){return"#"+iy(e[0])+iy(e[1])+iy(e[2])}var ny,ry=function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]},iy=function(e){var t=Math.round(e).toString(16);return 1===t.length?"0"+t:t},ay=function(e){if("#"===e[0]&&7===e.length)return e;ny||(ny=function(){var e=document.createElement("i");return e.title="Web Colour Picker",e.style.display="none",document.body.appendChild(e),e}()),ny.style.color=e;var t=document.defaultView.getComputedStyle(ny,"").getPropertyValue("color");return t=ty(Kv.exec(t)[1].split(/\s*,\s*/).map((function(e){return Number(e)})))},oy={rgb2arr:ry,gradient:function(e){var t=ap(e)?e.split("-"):e,n=Wp(t,(function(e){return ry(-1===e.indexOf("#")?ay(e):e)}));return function(e){return function(e,t){var n=isNaN(Number(t))||t<0?0:t>1?1:Number(t),r=e.length-1,i=Math.floor(r*n),a=r*n-i,o=e[i],s=i===r?o:e[i+1];return ty([ey(o,s,a,0),ey(o,s,a,1),ey(o,s,a,2)])}(n,e)}},toRGB:zp(ay),toCSSGradient:function(e){if(/^[r,R,L,l]{1}[\s]*\(/.test(e)){var t,n=void 0;if("l"===e[0]){var r=+(i=Qv.exec(e))[1]+90;n=i[2],t="linear-gradient("+r+"deg, "}else if("r"===e[0]){var i;t="radial-gradient(",n=(i=Zv.exec(e))[4]}var a=n.match(Jv);return Uh(a,(function(e,n){var r=e.split(":");t+=r[1]+" "+100*r[0]+"%",n!==a.length-1&&(t+=", ")})),t+=")"}return e}},sy=function(e){function t(t){var n=e.call(this,t)||this;return n.type="color",n.names=["color"],ap(n.values)&&(n.linear=!0),n.gradient=oy.gradient(n.values),n}return qv(t,e),t.prototype.getLinearValue=function(e){return this.gradient(e)},t}(Wv),ly=function(e){function t(t){var n=e.call(this,t)||this;return n.type="opacity",n.names=["opacity"],n}return qv(t,e),t}(Wv),cy=function(e){function t(t){var n=e.call(this,t)||this;return n.names=["x","y"],n.type="position",n}return qv(t,e),t.prototype.mapping=function(e,t){var n=this.scales,r=n[0],i=n[1];return Gh(e)||Gh(t)?[]:[$h(e)?e.map((function(e){return r.scale(e)})):r.scale(e),$h(t)?t.map((function(e){return i.scale(e)})):i.scale(t)]},t}(Wv),uy=function(e){function t(t){var n=e.call(this,t)||this;return n.type="shape",n.names=["shape"],n}return qv(t,e),t.prototype.getLinearValue=function(e){var t=Math.round((this.values.length-1)*e);return this.values[t]},t}(Wv),hy=function(e){function t(t){var n=e.call(this,t)||this;return n.type="size",n.names=["size"],n}return qv(t,e),t}(Wv),py={};function dy(e,t){py[e]=t}var fy=function(){function e(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return e.prototype.translate=function(e){return e},e.prototype.change=function(e){Rp(this.__cfg__,e),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var e=this;return Wp(this.ticks,(function(t,n){return Yh(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}}))},e.prototype.getText=function(e,t){var n=this.formatter,r=n?n(e,t):e;return Gh(r)||!jh(r.toString)?"":r.toString()},e.prototype.getConfig=function(e){return this.__cfg__[e]},e.prototype.init=function(){Rp(this,this.__cfg__),this.setDomain(),Yp(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(ap(e)){var n=py[e];if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else jh(e)&&(t=e(this));return t},e.prototype.rangeMin=function(){return this.range[0]},e.prototype.rangeMax=function(){return this.range[1]},e.prototype.calcPercent=function(e,t,n){return vp(e)?(e-t)/(n-t):NaN},e.prototype.calcValue=function(e,t,n){return t+e*(n-t)},e}(),my=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return Mh(t,e),t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var t=this.translateIndexMap.get(e);return void 0===t&&(t=vp(e)?e:NaN),t},t.prototype.scale=function(e){var t=this.translate(e),n=this.calcPercent(t,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var t=this.max-this.min,n=this.calcPercent(e,this.rangeMin(),this.rangeMax()),r=Math.round(t*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},t.prototype.getText=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t;return vp(t)&&!this.values.includes(t)&&(i=this.values[i]),e.prototype.getText.apply(this,Ph([i],n,!1))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(Gh(this.getConfig("min"))&&(this.min=0),Gh(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(fy),gy=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,vy="[^\\s]+",yy=/\[([^]*?)\]/gm;function xy(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var Ey=function(e){return function(t,n){var r=n[e].map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase());return r>-1?r:null}};function by(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];for(var o in a)e[o]=a[o]}return e}var Cy=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ty=["January","February","March","April","May","June","July","August","September","October","November","December"],wy=xy(Ty,3),Sy={dayNamesShort:xy(Cy,3),dayNames:Cy,monthNamesShort:wy,monthNames:Ty,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},ky=by({},Sy),_y=function(e){return ky=by(ky,e)},Ay=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Oy=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},Iy={D:function(e){return String(e.getDate())},DD:function(e){return Oy(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Oy(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Oy(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return Oy(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Oy(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Oy(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Oy(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Oy(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Oy(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Oy(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Oy(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Oy(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Oy(Math.floor(Math.abs(t)/60),2)+":"+Oy(Math.abs(t)%60,2)}},My=function(e){return+e-1},Ny=[null,"[1-9]\\d?"],Fy=[null,vy],Ly=["isPm",vy,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],Py=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?n:-n}return 0}],Ry={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+vy,function(e){return parseInt(e,10)}],M:["month","[1-9]\\d?",My],MM:["month","\\d\\d",My],YY:["year","\\d\\d",function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+e>68?t-1:t)+e)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond","\\d\\d",function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:Ny,dd:Ny,ddd:Fy,dddd:Fy,MMM:["month",vy,Ey("monthNamesShort")],MMMM:["month",vy,Ey("monthNames")],a:Ly,A:Ly,ZZ:Py,Z:Py},Dy={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},By=function(e){return by(Dy,e)},zy=function(e,t,n){if(void 0===t&&(t=Dy.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var r=[];t=(t=Dy[t]||t).replace(yy,(function(e,t){return r.push(t),"@@@"}));var i=by(by({},ky),n);return(t=t.replace(gy,(function(t){return Iy[t](e,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function Hy(e,t,n){if(void 0===n&&(n={}),"string"!=typeof t)throw new Error("Invalid format in fecha parse");if(t=Dy[t]||t,e.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],a=[],o=t.replace(yy,(function(e,t){return a.push(Ay(t)),"@@@"})),s={},l={};o=Ay(o).replace(gy,(function(e){var t=Ry[e],n=t[0],r=t[1],a=t[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,a&&(l[a]=!0),i.push(t),"("+r+")"})),Object.keys(l).forEach((function(e){if(!s[e])throw new Error("Invalid format. "+e+" is required in specified format")})),o=o.replace(/@@@/g,(function(){return a.shift()}));var c=e.match(new RegExp(o,"i"));if(!c)return null;for(var u=by(by({},ky),n),h=1;h<c.length;h++){var p=i[h-1],d=p[0],f=p[2],m=f?f(c[h],u):+c[h];if(null==m)return null;r[d]=m}1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0);for(var g=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond),v=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(h=0,v.length);h<y;h++)if(s[v[h][0]]&&r[v[h][0]]!==g[v[h][1]]())return null;return null==r.timezoneOffset?g:new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond))}var jy={format:zy,parse:Hy,defaultI18n:Sy,setGlobalDateI18n:_y,setGlobalDateMasks:By},Gy=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:jy,assign:by,format:zy,parse:Hy,defaultI18n:Sy,setGlobalDateI18n:_y,setGlobalDateMasks:By});function $y(e,t){return(Gy.format||jy.format)(e,t)}function Yy(e){return ap(e)&&(e=e.indexOf("T")>0?new Date(e).getTime():new Date(e.replace(/-/gi,"/")).getTime()),Mp(e)&&(e=e.getTime()),e}var Uy=36e5,Vy=24*Uy,Wy=31*Vy,Xy=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",Uy],["HH",6*Uy],["HH",12*Uy],["YYYY-MM-DD",Vy],["YYYY-MM-DD",4*Vy],["YYYY-WW",7*Vy],["YYYY-MM",Wy],["YYYY-MM",4*Wy],["YYYY-MM",6*Wy],["YYYY",380*Vy]];function qy(e,t,n){var r,i=(r=function(e){return e[1]},function(e,t,n,i){for(var a=Gh(n)?0:n,o=Gh(i)?e.length:i;a<o;){var s=a+o>>>1;r(e[s])>t?o=s:a=s+1}return a})(Xy,(t-e)/n)-1,a=Xy[i];return i<0?a=Xy[0]:i>=Xy.length&&(a=cp(Xy)),a}var Ky=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="timeCat",t}return Mh(t,e),t.prototype.translate=function(e){e=Yy(e);var t=this.values.indexOf(e);return-1===t&&(t=vp(e)&&e<this.values.length?e:NaN),t},t.prototype.getText=function(e,t){var n=this.translate(e);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,t):$y(r,this.mask)}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var t=this.values;Uh(t,(function(e,n){t[n]=Yy(e)})),t.sort((function(e,t){return e-t})),e.prototype.setDomain.call(this)},t}(my),Qy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return Mh(t,e),t.prototype.scale=function(e){if(Gh(e))return NaN;var t=this.rangeMin(),n=this.rangeMax();return this.max===this.min?t:t+this.getScalePercent(e)*(n-t)},t.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,n=lp(t),r=cp(t);n<this.min&&(this.min=n),r>this.max&&(this.max=r),Gh(this.minLimit)||(this.min=n),Gh(this.maxLimit)||(this.max=r)},t.prototype.setDomain=function(){var e=tp(this.values),t=e.min,n=e.max;Gh(this.min)&&(this.min=t),Gh(this.max)&&(this.max=n),this.min>this.max&&(this.min=t,this.max=n)},t.prototype.calculateTicks=function(){var t=this,n=e.prototype.calculateTicks.call(this);return this.nice||(n=Bh(n,(function(e){return e>=t.min&&e<=t.max}))),n},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;return(e-n)/(t-n)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(fy),Zy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return Mh(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e);return this.min+t*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(Qy);function Jy(e,t){var n=Math.E;return t>=0?Math.pow(n,Math.log(t)/e):-1*Math.pow(n,Math.log(-t)/e)}function ex(e,t){return 1===e?1:Math.log(t)/Math.log(e)}function tx(e,t,n){Gh(n)&&(n=Math.max.apply(null,e));var r=n;return Uh(e,(function(e){e>0&&e<r&&(r=e)})),r===n&&(r=n/t),r>1&&(r=1),r}var nx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t}return Mh(t,e),t.prototype.invert=function(e){var t,n=this.base,r=ex(n,this.max),i=this.rangeMin(),a=this.rangeMax()-i,o=this.positiveMin;if(o){if(0===e)return 0;var s=1/(r-(t=ex(n,o/n)))*a;if(e<s)return e/s*o}else t=ex(n,this.min);var l=(e-i)/a*(r-t)+t;return Math.pow(n,l)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){e.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=tx(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;if(e<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),e<i?e/i/(ex(r,t)-ex(r,n)):(ex(r,e)-ex(r,n))/(ex(r,t)-ex(r,n))},t}(Qy),rx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pow",t}return Mh(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e),n=this.exponent,r=Jy(n,this.max),i=Jy(n,this.min),a=t*(r-i)+i,o=a>=0?1:-1;return Math.pow(a,n)*o},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;var r=this.exponent;return(Jy(r,e)-Jy(r,n))/(Jy(r,t)-Jy(r,n))},t}(Qy),ix=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="time",t}return Mh(t,e),t.prototype.getText=function(e,t){var n=this.translate(e),r=this.formatter;return r?r(n,t):$y(n,this.mask)},t.prototype.scale=function(t){var n=t;return(ap(n)||Mp(n))&&(n=this.translate(n)),e.prototype.scale.call(this,n)},t.prototype.translate=function(e){return Yy(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,t=this.getConfig("min"),n=this.getConfig("max");if(Gh(t)&&vp(t)||(this.min=this.translate(this.min)),Gh(n)&&vp(n)||(this.max=this.translate(this.max)),e&&e.length){var r=[],i=1/0,a=i,o=0;Uh(e,(function(e){var t=Yy(e);if(isNaN(t))throw new TypeError("Invalid Time: "+e+" in time scale!");i>t?(a=i,i=t):a>t&&(a=t),o<t&&(o=t),r.push(t)})),e.length>1&&(this.minTickInterval=a-i),Gh(t)&&(this.min=i),Gh(n)&&(this.max=o)}},t}(Zy),ax=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantize",t}return Mh(t,e),t.prototype.invert=function(e){var t=this.ticks,n=t.length,r=this.getInvertPercent(e),i=Math.floor(r*(n-1));if(i>=n-1)return cp(t);if(i<0)return lp(t);var a=t[i],o=i/(n-1);return a+(r-o)/((i+1)/(n-1)-o)*(t[i+1]-a)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var t=e.prototype.calculateTicks.call(this);return this.nice||(cp(t)!==this.max&&t.push(this.max),lp(t)!==this.min&&t.unshift(this.min)),t},t.prototype.getScalePercent=function(e){var t=this.ticks;if(e<lp(t))return 0;if(e>cp(t))return 1;var n=0;return Uh(t,(function(t,r){if(!(e>=t))return!1;n=r})),n/(t.length-1)},t}(Qy),ox=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantile",t}return Mh(t,e),t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(ax),sx={};function lx(e){return sx[e]}function cx(e,t){if(lx(e))throw new Error("type '"+e+"' existed.");sx[e]=t}var ux=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return Mh(t,e),t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&vp(e)?e:this.range[0]},t.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},t}(fy);function hx(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}var px=[1,5,2,2.5,4,3],dx=100*Number.EPSILON;function fx(e,t,n,r,i,a){var o=id(t),s=Gp(t,e),l=0,c=function(e,t){return(e%t+t)%t}(r,a);return(c<dx||a-c<dx)&&r<=0&&i>=0&&(l=1),1-s/(o-1)-n+l}function mx(e,t,n){var r=id(t);return 1-Gp(t,e)/(r-1)-n+1}function gx(e,t,n,r,i,a){var o=(e-1)/(a-i),s=(t-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(o/s,s/o)}function vx(e,t){return e>=t?2-(e-1)/(t-1):1}function yx(e,t,n,r){var i=t-e;return 1-.5*(Math.pow(t-r,2)+Math.pow(e-n,2))/Math.pow(.1*i,2)}function xx(e,t,n){var r=t-e;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function Ex(e,t,n,r,i,a){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=px),void 0===a&&(a=[.25,.2,.5,.05]);var o=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||"number"!=typeof e||"number"!=typeof t||!o)return{min:0,max:0,ticks:[]};if(t-e<1e-15||1===o)return{min:e,max:t,ticks:[e]};for(var s={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var c=0;c<i.length;c+=1){var u=i[c],h=mx(u,i,l);if(a[0]*h+a[1]+a[2]+a[3]<s.score){l=1/0;break}for(var p=2;p<1/0;){var d=vx(p,o);if(a[0]*h+a[1]+a[2]*d+a[3]<s.score)break;for(var f=(t-e)/(p+1)/l/u,m=Math.ceil(Math.log10(f));m<1/0;){var g=l*u*Math.pow(10,m),v=xx(e,t,g*(p-1));if(a[0]*h+a[1]*v+a[2]*d+a[3]<s.score)break;var y=Math.floor(t/g)*l-(p-1)*l,x=Math.ceil(e/g)*l;if(y<=x)for(var E=x-y,b=0;b<=E;b+=1){var C=(y+b)*(g/l),T=C+g*(p-1),w=g,S=fx(u,i,l,C,T,w),k=yx(e,t,C,T),_=gx(p,o,e,t,C,T),A=a[0]*S+a[1]*k+a[2]*_+1*a[3];A>s.score&&(!r||C<=e&&T>=t)&&(s.lmin=C,s.lmax=T,s.lstep=w,s.score=A)}m+=1}p+=1}}l+=1}var O=hx(s.lmax),I=hx(s.lmin),M=hx(s.lstep),N=Math.floor(function(e){return Math.round(1e12*e)/1e12}((O-I)/M))+1,F=new Array(N);F[0]=hx(I);for(c=1;c<N;c++)F[c]=hx(F[c-1]+M);return{min:Math.min(e,lp(F)),max:Math.max(t,cp(F)),ticks:F}}function bx(e){var t=e.values,n=e.tickInterval,r=e.tickCount,i=t;if(vp(n))return Bh(i,(function(e,t){return t%n==0}));var a=e.min,o=e.max;if(Gh(a)&&(a=0),Gh(o)&&(o=t.length-1),vp(r)&&r<o-a){var s=Ex(a,o,r,!1,[1,2,5,3,4,7,6,8,9]).ticks;return Bh(s,(function(e){return e>=a&&e<=o})).map((function(e){return t[e]}))}return t.slice(a,o+1)}var Cx=Math.sqrt(50),Tx=Math.sqrt(10),wx=Math.sqrt(2),Sx=function(){function e(){this._domain=[0,1]}return e.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},e.prototype.nice=function(e){var t,n;void 0===e&&(e=5);var r,i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o];return l<s&&(s=(t=[l,s])[0],l=t[1],a=(n=[o,a])[0],o=n[1]),(r=kx(s,l,e))>0?r=kx(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,e):r<0&&(r=kx(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,e)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(l/r)*r,this.domain(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(l*r)/r,this.domain(i)),this},e.prototype.ticks=function(e){return void 0===e&&(e=5),function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];(r=t<e)&&(i=e,e=t,t=i);if(0===(o=kx(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(e-s)/o;r&&a.reverse();return a}(this._domain[0],this._domain[this._domain.length-1],e||5)},e}();function kx(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Cx?10:a>=Tx?5:a>=wx?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Cx?10:a>=Tx?5:a>=wx?2:1)}function _x(e,t,n){return("ceil"===n?Math.ceil(e/t):"floor"===n?Math.floor(e/t):Math.round(e/t))*t}function Ax(e,t,n){var r=_x(e,n,"floor"),i=_x(t,n,"ceil");r=gp(r,n),i=gp(i,n);for(var a=[],o=r;o<=i;o+=n){var s=gp(o,n);a.push(s)}return{min:r,max:i,ticks:a}}function Ox(e,t,n){var r,i=e.minLimit,a=e.maxLimit,o=e.min,s=e.max,l=e.tickCount,c=void 0===l?5:l,u=Gh(i)?Gh(t)?o:t:i,h=Gh(a)?Gh(n)?s:n:a;if(u>h&&(h=(r=[u,h])[0],u=r[1]),c<=2)return[u,h];for(var p=(h-u)/(c-1),d=[],f=0;f<c;f++)d.push(u+p*f);return d}function Ix(e,t,n){if(void 0===n&&(n=5),e===t)return{max:t,min:e,ticks:[e]};var r=n<0?0:Math.round(n);if(0===r)return{max:t,min:e,ticks:[]};var i=(t-e)/r,a=Math.pow(10,Math.floor(Math.log10(i))),o=a;2*a-i<1.5*(i-o)&&5*a-i<2.75*(i-(o=2*a))&&10*a-i<1.5*(i-(o=5*a))&&(o=10*a);for(var s=Math.ceil(t/o),l=Math.floor(e/o),c=Math.max(s*o,t),u=Math.min(l*o,e),h=Math.floor((c-u)/o)+1,p=new Array(h),d=0;d<h;d++)p[d]=hx(u+d*o);return{min:u,max:c,ticks:p}}function Mx(e,t){var n=e.length*t;return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function Nx(e){return new Date(e).getFullYear()}function Fx(e){return new Date(e,0,1).getTime()}function Lx(e){return new Date(e).getMonth()}function Px(e,t){return new Date(e,t,1).getTime()}dy("cat",bx),dy("time-cat",(function(e){var t=bx(e),n=cp(e.values);return n!==cp(t)&&t.push(n),t})),dy("wilkinson-extended",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.nice,a=e.tickInterval,o=e.minLimit,s=e.maxLimit,l=Ex(t,n,r,i).ticks;return Gh(o)&&Gh(s)?a?Ax(t,n,a).ticks:l:Ox(e,lp(l),cp(l))})),dy("r-pretty",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.tickInterval,a=e.minLimit,o=e.maxLimit,s=Ix(t,n,r).ticks;return Gh(a)&&Gh(o)?i?Ax(t,n,i).ticks:s:Ox(e,lp(s),cp(s))})),dy("time",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickInterval,a=e.tickCount;if(i)a=Math.ceil((n-t)/i);else{var o=(n-t)/(i=qy(t,n,a)[1])/a;o>1&&(i*=Math.ceil(o)),r&&i<r&&(i=r)}for(var s=[],l=t;l<n+i;l+=i)s.push(l);return s})),dy("time-pretty",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickCount,a=e.tickInterval,o=[];a||(a=(n-t)/i,r&&a<r&&(a=r));var s=Nx(t);if(a>31536e6)for(var l=Nx(n),c=Math.ceil(a/31536e6),u=s;u<=l+c;u+=c)o.push(Fx(u));else if(a>Wy){var h=Math.ceil(a/Wy),p=Lx(t),d=function(e,t){var n=Nx(e),r=Nx(t),i=Lx(e);return 12*(r-n)+(Lx(t)-i)%12}(t,n);for(u=0;u<=d+h;u+=h)o.push(Px(s,u+p))}else if(a>Vy){var f=(x=new Date(t)).getFullYear(),m=x.getMonth(),g=x.getDate(),v=Math.ceil(a/Vy),y=function(e,t){return Math.ceil((t-e)/Vy)}(t,n);for(u=0;u<y+v;u+=v)o.push(new Date(f,m,g+u).getTime())}else if(a>Uy){f=(x=new Date(t)).getFullYear(),m=x.getMonth(),v=x.getDate();var x,E=x.getHours(),b=Math.ceil(a/Uy),C=function(e,t){return Math.ceil((t-e)/Uy)}(t,n);for(u=0;u<=C+b;u+=b)o.push(new Date(f,m,v,E+u).getTime())}else if(a>6e4){var T=function(e,t){return Math.ceil((t-e)/6e4)}(t,n),w=Math.ceil(a/6e4);for(u=0;u<=T+w;u+=w)o.push(t+6e4*u)}else{var S=a;S<1e3&&(S=1e3);var k=1e3*Math.floor(t/1e3),_=Math.ceil((n-t)/1e3),A=Math.ceil(S/1e3);for(u=0;u<_+A;u+=A)o.push(k+1e3*u)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o})),dy("log",(function(e){var t,n=e.base,r=e.tickCount,i=e.min,a=e.max,o=e.values,s=ex(n,a);if(i>0)t=Math.floor(ex(n,i));else{var l=tx(o,n,a);t=Math.floor(ex(n,l))}for(var c=s-t,u=Math.ceil(c/r),h=[],p=t;p<s+u;p+=u)h.push(Math.pow(n,p));return i<=0&&h.unshift(0),h})),dy("pow",(function(e){var t=e.exponent,n=e.tickCount,r=Math.ceil(Jy(t,e.max));return Ix(Math.floor(Jy(t,e.min)),r,n).ticks.map((function(e){var n=e>=0?1:-1;return Math.pow(e,t)*n}))})),dy("quantile",(function(e){var t=e.tickCount,n=e.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(e,t){return e-t})),i=[],a=0;a<t;a++){var o=a/(t-1);i.push(Mx(r,o))}return i})),dy("d3-linear",(function(e){var t=e.min,n=e.max,r=e.tickInterval,i=e.minLimit,a=e.maxLimit,o=function(e){var t=e.min,n=e.max,r=e.nice,i=e.tickCount,a=new Sx;return a.domain([t,n]),r&&a.nice(i),a.ticks(i)}(e);return Gh(i)&&Gh(a)?r?Ax(t,n,r).ticks:o:Ox(e,lp(o),cp(o))})),cx("cat",my),cx("category",my),cx("identity",ux),cx("linear",Zy),cx("log",nx),cx("pow",rx),cx("time",ix),cx("timeCat",Ky),cx("quantize",ax),cx("quantile",ox);var Rx={},Dx=function(e){return Rx[e.toLowerCase()]},Bx=function(e,t){if(Dx(e))throw new Error("Attribute type '"+e+"' existed.");Rx[e.toLowerCase()]=t};Bx("Color",sy),Bx("Opacity",ly),Bx("Position",cy),Bx("Shape",uy),Bx("Size",hy);var zx=function(){function e(e){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=e.start,n=e.end,r=e.matrix,i=void 0===r?[1,0,0,0,1,0,0,0,1]:r,a=e.isTransposed,o=void 0!==a&&a;this.start=t,this.end=n,this.matrix=i,this.originalMatrix=Ph([],i),this.isTransposed=o}return e.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},e.prototype.update=function(e){Rp(this,e),this.initial()},e.prototype.convertDim=function(e,t){var n,r=this[t],i=r.start,a=r.end;return this.isReflect(t)&&(i=(n=[a,i])[0],a=n[1]),i+e*(a-i)},e.prototype.invertDim=function(e,t){var n,r=this[t],i=r.start,a=r.end;return this.isReflect(t)&&(i=(n=[a,i])[0],a=n[1]),(e-i)/(a-i)},e.prototype.applyMatrix=function(e,t,n){void 0===n&&(n=0);var r=[e,t,n];return Hf(r,r,this.matrix),r},e.prototype.invertMatrix=function(e,t,n){void 0===n&&(n=0);var r=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,e[0]=h*f,e[1]=(-u*r+i*c)*f,e[2]=(s*r-i*o)*f,e[3]=p*f,e[4]=(u*n-i*l)*f,e[5]=(-s*n+i*a)*f,e[6]=d*f,e[7]=(-c*n+r*l)*f,e[8]=(o*n-r*a)*f,e):null}([0,0,0,0,0,0,0,0,0],this.matrix),i=[e,t,n];return r&&Hf(i,i,r),i},e.prototype.convert=function(e){var t=this.convertPoint(e),n=t.x,r=t.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},e.prototype.invert=function(e){var t=this.invertMatrix(e.x,e.y,1);return this.invertPoint({x:t[0],y:t[1]})},e.prototype.rotate=function(e){var t=this.matrix,n=this.center;return Zf(t,t,[-n.x,-n.y]),Jf(t,t,e),Zf(t,t,[n.x,n.y]),this},e.prototype.reflect=function(e){return"x"===e?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},e.prototype.scale=function(e,t){var n=this.matrix,r=this.center;return Zf(n,n,[-r.x,-r.y]),em(n,n,[e,t]),Zf(n,n,[r.x,r.y]),this},e.prototype.translate=function(e,t){var n=this.matrix;return Zf(n,n,[e,t]),this},e.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},e.prototype.getCenter=function(){return this.center},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRadius=function(){return this.radius},e.prototype.isReflect=function(e){return"x"===e?this.isReflectX:this.isReflectY},e.prototype.resetMatrix=function(e){this.matrix=e||Ph([],this.originalMatrix)},e}(),Hx=function(e){function t(t){var n=e.call(this,t)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return Mh(t,e),t.prototype.initial=function(){e.prototype.initial.call(this);var t=this.start,n=this.end;this.x={start:t.x,end:n.x},this.y={start:t.y,end:n.y}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;return this.isTransposed&&(n=(t=[r,n])[0],r=t[1]),{x:this.convertDim(n,"x"),y:this.convertDim(r,"y")}},t.prototype.invertPoint=function(e){var t,n=this.invertDim(e.x,"x"),r=this.invertDim(e.y,"y");return this.isTransposed&&(n=(t=[r,n])[0],r=t[1]),{x:n,y:r}},t}(zx),jx=function(e){function t(t){var n=e.call(this,t)||this;n.isHelix=!0,n.type="helix";var r=t.startAngle,i=void 0===r?1.25*Math.PI:r,a=t.endAngle,o=void 0===a?7.25*Math.PI:a,s=t.innerRadius,l=void 0===s?0:s,c=t.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=l,n.radius=c,n.initial(),n}return Mh(t,e),t.prototype.initial=function(){e.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n*=this.radius),this.d=Math.floor(n*(1-this.innerRadius)/t),this.a=this.d/(2*Math.PI),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+.99*this.d}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;this.isTransposed&&(n=(t=[r,n])[0],r=t[1]);var i=this.convertDim(n,"x"),a=this.a*i,o=this.convertDim(r,"y");return{x:this.center.x+Math.cos(i)*(a+o),y:this.center.y+Math.sin(i)*(a+o)}},t.prototype.invertPoint=function(e){var t,n=this.d+this.y.start,r=Gf([0,0],[e.x,e.y],[this.center.x,this.center.y]),i=rm(r,[1,0],!0),a=i*this.a;Wf(r)<a&&(a=Wf(r)),i=2*Math.floor((Wf(r)-a)/n)*Math.PI+i;var o=this.a*i,s=Wf(r)-o;s=yp(s,0)?0:s;var l=this.invertDim(i,"x"),c=this.invertDim(s,"y");return l=yp(l,0)?0:l,c=yp(c,0)?0:c,this.isTransposed&&(l=(t=[c,l])[0],c=t[1]),{x:l,y:c}},t}(zx),Gx=function(e){function t(t){var n=e.call(this,t)||this;n.isPolar=!0,n.type="polar";var r=t.startAngle,i=void 0===r?-Math.PI/2:r,a=t.endAngle,o=void 0===a?3*Math.PI/2:a,s=t.innerRadius,l=void 0===s?0:s,c=t.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=l,n.radius=c,n.initial(),n}return Mh(t,e),t.prototype.initial=function(){for(e.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=2*Math.PI;var t,n=this.getOneBox(),r=n.maxX-n.minX,i=n.maxY-n.minY,a=Math.abs(n.minX)/r,o=Math.abs(n.minY)/i;this.height/i>this.width/r?(t=this.width/r,this.circleCenter={x:this.center.x-(.5-a)*this.width,y:this.center.y-(.5-o)*t*i}):(t=this.height/i,this.circleCenter={x:this.center.x-(.5-a)*t*r,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=t*this.radius:(this.radius<=0||this.radius>t)&&(this.polarRadius=t):this.polarRadius=t,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},t.prototype.getRadius=function(){return this.polarRadius},t.prototype.convertPoint=function(e){var t,n=this.getCenter(),r=e.x,i=e.y;return this.isTransposed&&(r=(t=[i,r])[0],i=t[1]),r=this.convertDim(r,"x"),i=this.convertDim(i,"y"),{x:n.x+Math.cos(r)*i,y:n.y+Math.sin(r)*i}},t.prototype.invertPoint=function(e){var t,n=this.getCenter(),r=[e.x-n.x,e.y-n.y],i=this.startAngle,a=this.endAngle;this.isReflect("x")&&(i=(t=[a,i])[0],a=t[1]);var o=[1,0,0,0,1,0,0,0,1];Jf(o,o,i);var s=[1,0,0];Hf(s,s,o);var l=rm([s[0],s[1]],r,a<i);yp(l,2*Math.PI)&&(l=0);var c=Wf(r),u=l/(a-i);u=a-i>0?u:-u;var h=this.invertDim(c,"y"),p={x:0,y:0};return p.x=this.isTransposed?h:u,p.y=this.isTransposed?u:h,p},t.prototype.getCenter=function(){return this.circleCenter},t.prototype.getOneBox=function(){var e=this.startAngle,t=this.endAngle;if(Math.abs(t-e)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(e),Math.cos(t)],r=[0,Math.sin(e),Math.sin(t)],i=Math.min(e,t);i<Math.max(e,t);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}},t}(zx),$x={},Yx=function(e,t){$x[e.toLowerCase()]=t};Yx("rect",Hx),Yx("cartesian",Hx),Yx("polar",Gx),Yx("helix",jx);var Ux="\t\n\v\f\r   ᠎             　\u2028\u2029",Vx=new RegExp("([a-z])["+Ux+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ux+"]*,?["+Ux+"]*)+)","ig"),Wx=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ux+"]*,?["+Ux+"]*","ig"),Xx=function(e){if(!e)return null;if($h(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(Vx,(function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(Wx,(function(e,t){t&&o.push(+t)})),"m"===s&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===o.length&&n.push([i,o[0]]),"r"===s)n.push([i].concat(o));else for(;o.length>=t[s]&&(n.push([i].concat(o.splice(0,t[s]))),t[s]););return e})),n},qx=function(e,t){if(e.length!==t.length)return!1;var n=!0;return Uh(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function Kx(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var Qx=function(e,t){var n=function(e,t){var n,r,i=e.length,a=t.length,o=0;if(0===i||0===a)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=a;c++)s[0][c]={min:c};for(l=1;l<=i;l++)for(n=e[l-1],c=1;c<=a;c++){r=t[c-1],o=qx(n,r)?0:1;var u=s[l-1][c].min+1,h=s[l][c-1].min+1,p=s[l-1][c-1].min+o;s[l][c]=Kx(u,h,p)}return s}(e,t),r=e.length,i=t.length,a=[],o=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=o;u<=i;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);o=s,n[l][o].type&&a.push({index:l-1,type:n[l][o].type})}for(l=a.length-1;l>=0;l--)o=a[l].index,"add"===a[l].type?e.splice(o,0,[].concat(e[o])):e.splice(o,1)}var h=i-(r=e.length);if(r<i)for(l=0;l<h;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function Zx(e,t,n){for(var r,i=[].concat(e),a=1/(n+1),o=Jx(t)[0],s=1;s<=n;s++)a*=s,0===(r=Math.floor(e.length*a))?i.unshift([o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]):i.splice(r,0,[o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]);return i}function Jx(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var eE=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=Jx(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=Zx(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=Zx(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=Zx(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e},tE=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function nE(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var rE="undefined"!=typeof window&&void 0!==window.document;function iE(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function aE(e){return e.cfg.visible&&e.cfg.capture}var oE=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=Rp(r,t),n}return Mh(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(zd);function sE(e,t){var n=[],r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=t[0],d=t[1],f=t[2],m=t[3],g=t[4],v=t[5],y=t[6],x=t[7],E=t[8];return n[0]=p*r+d*o+f*c,n[1]=p*i+d*s+f*u,n[2]=p*a+d*l+f*h,n[3]=m*r+g*o+v*c,n[4]=m*i+g*s+v*u,n[5]=m*a+g*l+v*h,n[6]=y*r+x*o+E*c,n[7]=y*i+x*s+E*u,n[8]=y*a+x*l+E*h,n}function lE(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}var cE=nm,uE=["zIndex","capture","visible","type"],hE=["repeat"];function pE(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function dE(e,t){var n={},r=t.attr();return Uh(e,(function(e,t){-1!==hE.indexOf(t)||Vp(r[t],e)||(n[t]=e)})),n}function fE(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return Uh(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&Uh(t.toAttrs,(function(t,n){a.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var mE=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return Rp(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return Mh(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(Yh(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(nE(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr("matrix")},t.prototype.setMatrix=function(e){this.attr("matrix",e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?sE(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?sE(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?lE(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=function(e){var t=[],n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,t[0]=h*f,t[1]=(-u*r+i*c)*f,t[2]=(s*r-i*o)*f,t[3]=p*f,t[4]=(u*n-i*l)*f,t[5]=(-s*n+i*a)*f,t[6]=d*f,t[7]=(-c*n+r*l)*f,t[8]=(o*n-r*a)*f,t):null}(t);if(n)return lE(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[Ap(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};Uh(t,(function(e,r){$h(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)$h(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return Uh(uE,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,a,o,s,l,c=e[0],u=e[1],h=e[2],p=void 0===h?"easeLinear":h,d=e[3],f=void 0===d?rd:d,m=e[4],g=void 0===m?0:m;jh(c)?(i=c,c={}):Yh(c)&&c.onFrame&&(i=c.onFrame,a=c.repeat),Yh(u)?(u=(l=u).duration,p=l.easing||"easeLinear",g=l.delay||0,a=l.repeat||a||!1,f=l.callback||rd,o=l.pauseCallback||rd,s=l.resumeCallback||rd):(vp(f)&&(g=f,f=null),jh(p)?(f=p,p="easeLinear"):p=p||"easeLinear");var v=dE(c,this),y={fromAttrs:pE(v,this),toAttrs:v,duration:u,easing:p,repeat:a,callback:f,pauseCallback:o,resumeCallback:s,delay:g,startTime:n.getTime(),id:nd(),onFrame:i,pathFormatted:!1};r.length>0?r=fE(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),Uh(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return Uh(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return Uh(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var a=function(e){var a=i[e],s=a.get("name");if(s){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&n&&iE(a,n))return"break";$h(s)?Uh(s,(function(e){r.emitDelegateEvent(a,e,t)})):o.emitDelegateEvent(a,s,t)}},o=this,s=0;s<i.length;s++){if("break"===a(s))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=cE(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=cE(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=cE(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),a=cE(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(a),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=cE(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(oE),gE={};function vE(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){vE(e,t)}))}}function yE(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){yE(e,t)}))}}var xE,EE,bE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Uh(o,(function(e){var t=e.getBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=ep(i),t=Jh(i),n=ep(a),r=Jh(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Uh(o,(function(e){var t=e.getCanvasBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=ep(i),t=Jh(i),n=ep(a),r=Jh(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){Uh(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];Yh(n)?r=n:r.type=n;var i=gE[r.type];i||(i=Ap(r.type),gE[r.type]=i);var a=this.getShapeBase(),o=new a[i](r);return this.add(o),o},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if(jh(r))n=new r(i||{parent:this});else{var a=r||{},o=this.getGroupBase();n=new o(a)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!aE(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var a=[e,t,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,a=e.length-1;a>=0;a--){var o=e[a];if(aE(o)&&(o.isGroup()?i=o.getShape(t,n,r):o.isHit(t,n)&&(i=o)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),nE(e.getChildren(),t)}(i,e,!1),e.set("parent",this),t&&vE(e,t),r&&yE(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();Uh(t,(function(e,t){return e._INDEX=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return Uh(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return Uh(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(mE),CE=0,TE=0,wE=0,SE=0,kE=0,_E=0,AE="object"==typeof performance&&performance.now?performance:Date,OE="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function IE(){return kE||(OE(ME),kE=AE.now()+_E)}function ME(){kE=0}function NE(){this._call=this._time=this._next=null}function FE(e,t,n){var r=new NE;return r.restart(e,t,n),r}function LE(){kE=(SE=AE.now())+_E,CE=TE=0;try{!function(){IE(),++CE;for(var e,t=xE;t;)(e=kE-t._time)>=0&&t._call.call(null,e),t=t._next;--CE}()}finally{CE=0,function(){var e,t,n=xE,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:xE=t);EE=e,RE(r)}(),kE=0}}function PE(){var e=AE.now(),t=e-SE;t>1e3&&(_E-=t,SE=e)}function RE(e){CE||(TE&&(TE=clearTimeout(TE)),e-kE>24?(e<1/0&&(TE=setTimeout(LE,e-AE.now()-_E)),wE&&(wE=clearInterval(wE))):(wE||(SE=AE.now(),wE=setInterval(PE,1e3)),CE=1,OE(LE)))}function DE(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function BE(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}NE.prototype=FE.prototype={constructor:NE,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?IE():+n)+(null==t?0:+t),this._next||EE===this||(EE?EE._next=this:xE=this,EE=this),this._call=e,this._time=n,RE()},stop:function(){this._call&&(this._call=null,this._time=1/0,RE())}};var zE=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),HE=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),jE=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),GE=Math.PI,$E=GE/2;function YE(e){return(1-Math.cos(GE*e))/2}function UE(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function VE(e){return((e*=2)<=1?UE(1-e):2-UE(e-1))/2}function WE(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var XE=4/11,qE=7.5625;function KE(e){return(e=+e)<XE?qE*e*e:e<.7272727272727273?qE*(e-=.5454545454545454)*e+.75:e<.9090909090909091?qE*(e-=.8181818181818182)*e+.9375:qE*(e-=.9545454545454546)*e+.984375}var QE=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158),ZE=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158),JE=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),eb=2*Math.PI,tb=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=eb);function i(e){return t*UE(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*eb)},i.period=function(n){return e(t,n)},i}(1,.3),nb=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=eb);function i(e){return 1-t*UE(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*eb)},i.period=function(n){return e(t,n)},i}(1,.3),rb=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=eb);function i(e){return((e=2*e-1)<0?t*UE(-e)*Math.sin((r-e)/n):2-t*UE(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*eb)},i.period=function(n){return e(t,n)},i}(1,.3),ib=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:function(e){return+e},easeQuad:DE,easeQuadIn:function(e){return e*e},easeQuadOut:function(e){return e*(2-e)},easeQuadInOut:DE,easeCubic:BE,easeCubicIn:function(e){return e*e*e},easeCubicOut:function(e){return--e*e*e+1},easeCubicInOut:BE,easePoly:jE,easePolyIn:zE,easePolyOut:HE,easePolyInOut:jE,easeSin:YE,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*$E)},easeSinOut:function(e){return Math.sin(e*$E)},easeSinInOut:YE,easeExp:VE,easeExpIn:function(e){return UE(1-+e)},easeExpOut:function(e){return 1-UE(e)},easeExpInOut:VE,easeCircle:WE,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCircleInOut:WE,easeBounce:KE,easeBounceIn:function(e){return 1-KE(1-e)},easeBounceOut:KE,easeBounceInOut:function(e){return((e*=2)<=1?1-KE(1-e):KE(e-1)+1)/2},easeBack:JE,easeBackIn:QE,easeBackOut:ZE,easeBackInOut:JE,easeElastic:nb,easeElasticIn:tb,easeElasticOut:nb,easeElasticInOut:rb});function ab(e){return function(){return e}}function ob(e){return 1==(e=+e)?sb:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):ab(isNaN(t)?n:t)}}function sb(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):ab(isNaN(e)?t:e)}var lb=function e(t){var n=ob(t);function r(e,t){var r=n((e=fe(e)).r,(t=fe(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=sb(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function cb(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function ub(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hb(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=yb(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function pb(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function db(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function fb(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=yb(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var mb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gb=new RegExp(mb.source,"g");function vb(e,t){var n,r,i,a=mb.lastIndex=gb.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=mb.exec(e))&&(r=gb.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:db(n,r)})),a=gb.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function yb(e,t){var n,r=typeof t;return null==t||"boolean"===r?ab(t):("number"===r?db:"string"===r?(n=me(t))?(t=n,lb):vb:t instanceof me?lb:t instanceof Date?pb:ub(t)?cb:Array.isArray(t)?hb:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?fb:db)(e,t)}var xb=[1,0,0,0,1,0,0,0,1];function Eb(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var a=t.duration,o=t.easing;if(n=n-i-t.delay,t.repeat)r=n%a/a,r=ib[o](r);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=ib[o](r)}if(t.onFrame){var s=t.onFrame(r);e.attr(s)}else!function(e,t,n){var r={},i=t.fromAttrs,a=t.toAttrs;if(!e.destroyed){var o,s,l,c;for(var u in a)if(!Vp(i[u],a[u]))if("path"===u){var h=a[u],p=i[u];h.length>p.length?(h=Xx(a[u]),p=Xx(i[u]),p=Qx(p,h),p=eE(p,h),t.fromAttrs.path=p,t.toAttrs.path=h):t.pathFormatted||(h=Xx(a[u]),p=Xx(i[u]),p=eE(p,h),t.fromAttrs.path=p,t.toAttrs.path=h,t.pathFormatted=!0),r[u]=[];for(var d=0;d<h.length;d++){for(var f=h[d],m=p[d],g=[],v=0;v<f.length;v++)vp(f[v])&&m&&vp(m[v])?(o=yb(m[v],f[v]),g.push(o(n))):g.push(f[v]);r[u].push(g)}}else if("matrix"===u){var y=(l=i[u]||xb,(ub(c=a[u]||xb)?cb:hb)(l,c))(n);r[u]=y}else["fill","stroke","fillStyle","strokeStyle"].includes(u)&&(s=a[u],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[u]=a[u]:jh(a[u])||(o=yb(i[u],a[u]),r[u]=o(n));e.attr(r)}}(e,t,r);return!1}var bb=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=FE((function(i){if(r.current=i,r.animators.length>0){for(var a=r.animators.length-1;a>=0;a--)if((e=r.animators[a]).destroyed)r.removeAnimator(a);else{if(!e.isAnimatePaused())for(var o=(t=e.get("animations")).length-1;o>=0;o--)n=t[o],Eb(e,n,i)&&(t.splice(o,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(a)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),Cb=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Tb(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function wb(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&iE(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var Sb=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");Uh(Cb,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");Uh(Cb,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,a){var o=new tE(e,t);return o.fromShape=i,o.toShape=a,o.x=n.x,o.y=n.y,o.clientX=n.clientX,o.clientY=n.clientY,o.propagationPath.push(r),o},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],a=!1;if(i)i.call(this,n,r,t);else{var o=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(a=!0,o&&this._emitEvent(e,t,n,o,o,null),this._emitEvent(e,t,n,null,o,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(a||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,a);else{var o=this.mousedownPoint;if(o){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=o.clientX-e.clientX,u=o.clientY-e.clientY;l>120||c*c+u*u>40?s&&s.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,e,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,a){var o=this._getEventObj(e,t,n,r,i,a);if(r){o.shape=r,Tb(r,e,o);for(var s=r.getParent();s;)s.emitDelegation(e,o),o.propagationStopped||wb(s,e,o),o.propagationPath.push(s),s=s.getParent()}else{Tb(this.canvas,e,o)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),kb=Pf(),_b=kb&&"firefox"===kb.name;!function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");ap(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new Sb({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new bb(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");rE&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");rE&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(_b&&!Gh(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Gh(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))}}(bE),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Mh(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t}}(bE),function(e){function t(t){return e.call(this,t)||this}Mh(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,a=e.maxY;if(t){var o=lE(t,[e.minX,e.minY]),s=lE(t,[e.maxX,e.minY]),l=lE(t,[e.minX,e.maxY]),c=lE(t,[e.maxX,e.maxY]);n=Math.min(o[0],s[0],l[0],c[0]),i=Math.max(o[0],s[0],l[0],c[0]),r=Math.min(o[1],s[1],l[1],c[1]),a=Math.max(o[1],s[1],l[1],c[1])}var u=this.attrs;if(u.shadowColor){var h=u.shadowBlur,p=void 0===h?0:h,d=u.shadowOffsetX,f=void 0===d?0:d,m=u.shadowOffsetY,g=void 0===m?0:m,v=n-p+f,y=i+p+f,x=r-p+g,E=a+p+g;n=Math.min(n,v),i=Math.max(i,y),r=Math.min(r,x),a=Math.max(a,E)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],a=(i=this.invertFromMatrix(i))[0],o=i[1],s=this._isInBBox(a,o);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(a,o)){if(this.isInShape(a,o))return!0;if(n&&n.isHit(a,o))return!0;if(r&&r.isHit(a,o))return!0}return!1}}(mE);var Ab=new Map;function Ob(e,t){Ab.set(e,t)}function Ib(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function Mb(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Nb(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function Fb(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=Nb(t,n.getCanvasBBox())),r&&(t=Nb(t,r.getCanvasBBox())),t}var Lb=null;function Pb(e,t){var n=function(){if(!Lb){var e=document.createElement("canvas");e.width=1,e.height=1,Lb=e.getContext("2d")}return Lb}(),r=0;if(Gh(e)||""===e)return r;(n.save(),n.font=t,ap(e)&&e.includes("\n"))?Uh(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width;return n.restore(),r}function Rb(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||0===Math.sin(l)||yp(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(u-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}function Db(e,t,n){var r=new tE(t,n);r.target=e,r.propagationPath.push(e),e.emitDelegation(t,r);for(var i=e.getParent();i;)i.emitDelegation(t,r),r.propagationPath.push(i),i=i.getParent()}Ob("rect",Ib),Ob("image",Ib),Ob("circle",Mb),Ob("marker",Mb),Ob("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}var o=Dg(n,r),s=o.x,l=o.y,c={minX:s,minY:l,maxX:s+o.width,maxY:l+o.height};return{x:(c=Fb(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),Ob("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}return Dg(n,r)})),Ob("text",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=function(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}(t));var l,c=Pb(i,s);if(c){var u=t.textAlign,h=t.textBaseline,p=function(e,t,n){var r=1;return ap(e)&&(r=e.split("\n").length),r>1?t*r+function(e,t){return t?t-e:.14*e}(t,n)*(r-1):t}(i,a,o),d={x:n,y:r-p};u&&("end"===u||"right"===u?d.x-=c:"center"===u&&(d.x-=c/2)),h&&("top"===h?d.y+=p:"middle"===h&&(d.y+=p/2)),l={x:d.x,y:d.y,width:c,height:p}}else l={x:n,y:r,width:0,height:0};return l})),Ob("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=(m=e[a]).currentPoint,s=m.params,l=m.prePoint,c=void 0;switch(m.command){case"Q":c=Vg.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":c=Zg.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var u=m.arcParams;c=tv(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(o[0]),r.push(o[1])}c&&(m.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&i.push(m)}n=n.filter((function(e){return!Number.isNaN(e)})),r=r.filter((function(e){return!Number.isNaN(e)}));var h=ep(n),p=ep(r),d=Jh(n),f=Jh(r);if(0===i.length)return{x:h,y:p,width:d-h,height:f-p};for(a=0;a<i.length;a++){var m;(o=(m=i[a]).currentPoint)[0]===h?h-=Rb(m,t).xExtra:o[0]===d&&(d+=Rb(m,t).xExtra),o[1]===p?p-=Rb(m,t).yExtra:o[1]===f&&(f+=Rb(m,t).yExtra)}return{x:h,y:p,width:d-h,height:f-p}}(e.get("segments")||Sv(n),r),a=i.x,o=i.y,s={minX:a,minY:o,maxX:a+i.width,maxY:o+i.height};return{x:(s=Fb(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Ob("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,a),maxY:Math.max(r,a)};return{x:(o=Fb(e,o)).minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}})),Ob("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;return{x:n-i,y:r-a,width:2*i,height:2*a}}));var Bb=[1,0,0,0,1,0,0,0,1];function zb(e,t,n){return void 0===n&&(n=Bb),t?nm(n,[["t",-e.x,-e.y],["r",t],["t",e.x,e.y]]):null}function Hb(e,t){return e.x||e.y?nm(t||Bb,[["t",e.x,e.y]]):null}function jb(e,t){var n=[0,0];return function(e,t,n){var r=t[0],i=t[1];e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7]}(n,t,e),n}function Gb(e,t,n,r){if(t){var i=zb({x:n,y:r},t,e.getMatrix());e.setMatrix(i)}}function $b(e,t,n){var r=Hb({x:t,y:n});e.attr("matrix",r)}function Yb(e){var t=0,n=0,r=0,i=0;return vp(e)?t=n=r=i=e:$h(e)&&(t=e[0],r=Gh(e[1])?e[0]:e[1],i=Gh(e[2])?e[0]:e[2],n=Gh(e[3])?r:e[3]),[t,r,i,n]}function Ub(e){for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t[n])}function Vb(e){var t=e.start,n=e.end,r=Math.min(t.x,n.x),i=Math.min(t.y,n.y),a=Math.max(t.x,n.x),o=Math.max(t.y,n.y);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function Wb(e,t,n,r){var i=e+n,a=t+r;return{x:e,y:t,width:n,height:r,minX:e,minY:t,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function Xb(e,t,n){return(1-n)*e+t*n}function qb(e,t,n){return{x:e.x+Math.cos(n)*t,y:e.y+Math.sin(n)*t}}var Kb=function(e,t,n){return void 0===n&&(n=Math.pow(Number.EPSILON,.5)),[e,t].includes(1/0)?Math.abs(e)===Math.abs(t):Math.abs(e-t)<n};function Qb(e){var t,n,r,i,a,o=e.getClip(),s=o&&o.getBBox();if(e.isGroup()){var l=1/0,c=-1/0,u=1/0,h=-1/0,p=e.getChildren();p.length>0?Uh(p,(function(e){if(e.get("visible")){if(e.isGroup()&&0===e.get("children").length)return!0;var t=Qb(e),n=e.applyToMatrix([t.minX,t.minY,1]),r=e.applyToMatrix([t.minX,t.maxY,1]),i=e.applyToMatrix([t.maxX,t.minY,1]),a=e.applyToMatrix([t.maxX,t.maxY,1]),o=Math.min(n[0],r[0],i[0],a[0]),s=Math.max(n[0],r[0],i[0],a[0]),p=Math.min(n[1],r[1],i[1],a[1]),d=Math.max(n[1],r[1],i[1],a[1]);o<l&&(l=o),s>c&&(c=s),p<u&&(u=p),d>h&&(h=d)}})):(l=0,c=0,u=0,h=0),t=Wb(l,u,c-l,h-u)}else t=e.getBBox();return s?(n=t,r=s,i=Math.max(n.minX,r.minX),a=Math.max(n.minY,r.minY),Wb(i,a,Math.min(n.maxX,r.maxX)-i,Math.min(n.maxY,r.maxY)-a)):t}function Zb(e){return e+"px"}function Jb(e,t,n,r){var i,a,o,s,l=r/(i=e,o=(a=t).x-i.x,s=a.y-i.y,Math.sqrt(o*o+s*s)),c=0;return"start"===n?c=0-l:"end"===n&&(c=1+l),{x:Xb(e.x,t.x,c),y:Xb(e.y,t.y,c)}}var eC={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},tC=function(e){function t(t){var n=e.call(this,t)||this;return n.initCfg(),n}return Mh(t,e),t.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},t.prototype.clear=function(){},t.prototype.update=function(e){var t=this,n=this.get("defaultCfg");Uh(e,(function(e,r){var i=e;t.get(r)!==e&&(Yh(e)&&n[r]&&(i=jp({},n[r],e)),t.set(r,i))})),this.updateInner(e),this.afterUpdate(e)},t.prototype.updateInner=function(e){},t.prototype.afterUpdate=function(e){Tp(e,"visible")&&(e.visible?this.show():this.hide()),Tp(e,"capture")&&this.setCapture(e.capture)},t.prototype.getLayoutBBox=function(){return this.getBBox()},t.prototype.getLocationType=function(){return this.get("locationType")},t.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},t.prototype.setOffset=function(e,t){this.update({offsetX:e,offsetY:t})},t.prototype.setLocation=function(e){var t=Nh({},e);this.update(t)},t.prototype.getLocation=function(){var e=this,t={},n=this.get("locationType");return Uh(eC[n],(function(n){t[n]=e.get(n)})),t},t.prototype.isList=function(){return!1},t.prototype.isSlider=function(){return!1},t.prototype.init=function(){},t.prototype.initCfg=function(){var e=this;Uh(this.get("defaultCfg"),(function(t,n){var r=e.get(n);if(Yh(r)){var i=jp({},t,r);e.set(n,i)}}))},t}(oE),nC=["visible","tip","delegateObject"],rC=["container","group","shapesMap","isRegister","isUpdating","destroyed"],iC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},t.prototype.remove=function(){this.clear(),this.get("group").remove()},t.prototype.clear=function(){this.get("group").clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},t.prototype.getChildComponentById=function(e){var t=this.getElementById(e);return t&&t.get("component")},t.prototype.getElementById=function(e){return this.get("shapesMap")[e]},t.prototype.getElementByLocalId=function(e){var t=this.getElementId(e);return this.getElementById(t)},t.prototype.getElementsByName=function(e){var t=[];return Uh(this.get("shapesMap"),(function(n){n.get("name")===e&&t.push(n)})),t},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateInner=function(e){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},t.prototype.render=function(){var e=this.get("offScreenGroup");e||(e=this.offScreenRender());var t=this.get("group");this.updateElements(e,t),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},t.prototype.show=function(){this.get("group").show(),this.set("visible",!0)},t.prototype.hide=function(){this.get("group").hide(),this.set("visible",!1)},t.prototype.setCapture=function(e){this.get("group").set("capture",e),this.set("capture",e)},t.prototype.destroy=function(){this.removeEvent(),this.remove(),e.prototype.destroy.call(this)},t.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},t.prototype.getLayoutBBox=function(){var e=this.get("group"),t=this.getInnerLayoutBBox(),n=e.getTotalMatrix();return n&&(t=function(e,t){var n=jb(e,[t.minX,t.minY]),r=jb(e,[t.maxX,t.minY]),i=jb(e,[t.minX,t.maxY]),a=jb(e,[t.maxX,t.maxY]),o=Math.min(n[0],r[0],i[0],a[0]),s=Math.max(n[0],r[0],i[0],a[0]),l=Math.min(n[1],r[1],i[1],a[1]),c=Math.max(n[1],r[1],i[1],a[1]);return{x:o,y:l,minX:o,minY:l,maxX:s,maxY:c,width:s-o,height:c-l}}(n,t)),t},t.prototype.on=function(e,t,n){return this.get("group").on(e,t,n),this},t.prototype.off=function(e,t){var n=this.get("group");return n&&n.off(e,t),this},t.prototype.emit=function(e,t){this.get("group").emit(e,t)},t.prototype.init=function(){e.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},t.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},t.prototype.delegateEmit=function(e,t){var n=this.get("group");t.target=n,n.emit(e,t),Db(n,e,t)},t.prototype.createOffScreenGroup=function(){return new(this.get("group").getGroupBase())({delegateObject:this.getDelegateObject()})},t.prototype.applyOffset=function(){var e=this.get("offsetX"),t=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e,y:t})},t.prototype.initGroup=function(){var e=this.get("container");this.set("group",e.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},t.prototype.offScreenRender=function(){this.clearOffScreenCache();var e=this.createOffScreenGroup();return this.renderInner(e),this.set("offScreenGroup",e),this.set("offScreenBBox",Qb(e)),e},t.prototype.addGroup=function(e,t){this.appendDelegateObject(e,t);var n=e.addGroup(t);return this.get("isRegister")&&this.registerElement(n),n},t.prototype.addShape=function(e,t){this.appendDelegateObject(e,t);var n=e.addShape(t);return this.get("isRegister")&&this.registerElement(n),n},t.prototype.addComponent=function(e,t){var n=t.id,r=t.component,i=Fh(t,["id","component"]),a=new r(Nh(Nh({},i),{id:n,container:e,updateAutoRender:this.get("updateAutoRender")}));return a.init(),a.render(),this.get("isRegister")&&this.registerElement(a.get("group")),a},t.prototype.initEvent=function(){},t.prototype.removeEvent=function(){this.get("group").off()},t.prototype.getElementId=function(e){return this.get("id")+"-"+this.get("name")+"-"+e},t.prototype.registerElement=function(e){var t=e.get("id");this.get("shapesMap")[t]=e},t.prototype.unregisterElement=function(e){var t=e.get("id");delete this.get("shapesMap")[t]},t.prototype.moveElementTo=function(e,t){var n=Hb(t);e.attr("matrix",n)},t.prototype.addAnimation=function(e,t,n){var r=t.attr("opacity");Gh(r)&&(r=1),t.attr("opacity",0),t.animate({opacity:r},n)},t.prototype.removeAnimation=function(e,t,n){t.animate({opacity:0},n)},t.prototype.updateAnimation=function(e,t,n,r){t.animate(n,r)},t.prototype.updateElements=function(e,t){var n,r=this,i=this.get("animate"),a=this.get("animateOption");Uh(e.getChildren().slice(0),(function(e){var o,s,l=e.get("id"),c=r.getElementById(l),u=e.get("name");if(c)if(e.get("isComponent")){var h=e.get("component"),p=c.get("component"),d=Zp(h.cfg,(o=Vh(h.cfg),void 0===(s=rC)&&(s=[]),Bh(o,(function(e){return!Dh(s,e)}))));p.update(d),c.set("update_status","update")}else{var f=r.getReplaceAttrs(c,e);i&&a.update?r.updateAnimation(u,c,f,a.update):c.attr(f),e.isGroup()&&r.updateElements(e,c),Uh(nC,(function(t){c.set(t,e.get(t))})),function(e,t){if(e.getClip()||t.getClip()){var n=t.getClip();if(n){var r={type:n.get("type"),attrs:n.attr()};e.setClip(r)}else e.setClip(null)}}(c,e),n=c,c.set("update_status","update")}else{t.add(e);var m=t.getChildren();if(m.splice(m.length-1,1),n){var g=m.indexOf(n);m.splice(g+1,0,e)}else m.unshift(e);if(r.registerElement(e),e.set("update_status","add"),e.get("isComponent"))(h=e.get("component")).set("container",t);else e.isGroup()&&r.registerNewGroup(e);if(n=e,i){var v=r.get("isInit")?a.appear:a.enter;v&&r.addAnimation(u,e,v)}}}))},t.prototype.clearUpdateStatus=function(e){Uh(e.getChildren(),(function(e){e.set("update_status",null)}))},t.prototype.clearOffScreenCache=function(){var e=this.get("offScreenGroup");e&&e.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},t.prototype.getDelegateObject=function(){var e;return(e={})[this.get("name")]=this,e.component=this,e},t.prototype.appendDelegateObject=function(e,t){var n=e.get("delegateObject");t.delegateObject||(t.delegateObject={}),Rp(t.delegateObject,n)},t.prototype.getReplaceAttrs=function(e,t){var n=e.attr(),r=t.attr();return Uh(n,(function(e,t){void 0===r[t]&&(r[t]=void 0)})),r},t.prototype.registerNewGroup=function(e){var t=this;Uh(e.getChildren(),(function(e){t.registerElement(e),e.set("update_status","add"),e.isGroup()&&t.registerNewGroup(e)}))},t.prototype.deleteElements=function(){var e=this,t=this.get("shapesMap"),n=[];Uh(t,(function(e,t){!e.get("update_status")||e.destroyed?n.push([t,e]):e.set("update_status",null)}));var r=this.get("animate"),i=this.get("animateOption");Uh(n,(function(n){var a=n[0],o=n[1];if(!o.destroyed){var s=o.get("name");if(r&&i.leave){var l=Rp({callback:function(){e.removeElement(o)}},i.leave);e.removeAnimation(s,o,l)}else e.removeElement(o)}delete t[a]}))},t.prototype.removeElement=function(e){if(e.get("isGroup")){var t=e.get("component");t&&t.destroy()}e.remove()},t}(tC);function aC(e,t){return e.charCodeAt(t)>0&&e.charCodeAt(t)<128?1:2}function oC(e){if(e.length>400)return function(e){for(var t=e.map((function(e){var t=e.attr("text");return Gh(t)?"":""+t})),n=0,r=0,i=0;i<t.length;i+=1){for(var a=0,o=0;o<=t[i].length;o+=1){var s=t[i].charCodeAt(o);a+=s>=19968&&s<=40869?2:1}a>n&&(n=a,r=i)}return e[r].getBBox().width}(e);var t=0;return Uh(e,(function(e){var n=e.getBBox().width;t<n&&(t=n)})),t}function sC(e,t,n,r){var i;void 0===r&&(r="tail");var a=null!==(i=t.attr("text"))&&void 0!==i?i:"";if("tail"===r){var o=function(e,t,n,r){void 0===r&&(r="...");var i,a,o=hd(r,n),s=ap(e)?e:Sp(e),l=t,c=[];if(hd(e,n)<=t)return e;for(;i=s.substr(0,16),!((a=hd(i,n))+o>l&&a>l);)if(c.push(i),l-=a,!(s=s.substr(16)))return c.join("");for(;i=s.substr(0,1),!((a=hd(i,n))+o>l);)if(c.push(i),l-=a,!(s=s.substr(1)))return c.join("");return""+c.join("")+r}(a,n,Zp(t.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),"…");return a!==o?(t.attr("text",o),t.set("tip",a),!0):(t.set("tip",null),!1)}var s=function(e,t){var n=t.getCanvasBBox();return e?n.width:n.height}(e,t),l=function(e){for(var t=0,n=0;n<e.length;n++)t+=aC(e,n);return t}(a),c=!1;if(n<s){var u=Math.floor(n/s*l)-2,h=void 0;(h=u>=0?function(e,t,n){void 0===n&&(n="tail");var r=e.length,i="";if("tail"===n){for(var a=0,o=0;a<t&&a+aC(e,o)<=t;)i+=e[o],a+=aC(e,o),o++;i+="…"}else if("head"===n){for(a=0,o=r-1;a<t&&a+aC(e,o)<=t;)i+=e[o],a+=aC(e,o),o--;i="…"+i}else{for(var s="",l="",c=(a=0,0),u=r-1;a<t;){var h=aC(e,c),p=!1;h+a<=t&&(s+=e[c],c++,a+=h,p=!0);var d=aC(e,u);if(d+a<=t&&(l=e[u]+l,a+=d,u--,p=!0),!p)break}i=s+"…"+l}return i}(a,u,r):"…")&&(t.attr("text",h),c=!0)}return c?t.set("tip",a):t.set("tip",null),c}function lC(e,t){var n=t.x,r=t.y,i=t.content,a=t.style,o=t.id,s=t.name,l=t.rotate,c=t.maxLength,u=t.autoEllipsis,h=t.isVertical,p=t.ellipsisPosition,d=t.background,f=e.addGroup({id:o+"-group",name:s+"-group",attrs:{x:n,y:r}}),m=f.addShape({type:"text",id:o,name:s,attrs:Nh({x:0,y:0,text:i},a)}),g=Yb(qp(d,"padding",0));c&&u&&sC(!h,m,c-(g[1]+g[3]),p);if(d){var v=qp(d,"style",{}),y=m.getCanvasBBox(),x=y.minX,E=y.minY,b=y.width,C=y.height;f.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:Nh({x:x-g[3],y:E-g[0],width:b+g[1]+g[3],height:C+g[0]+g[2]},v)}).toBack()}$b(f,n,r),Gb(f,l,n,r)}var cC={fontFamily:'\n  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"',textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},uC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:cC.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:cC.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:cC.lineColor,lineWidth:1}}}})},t.prototype.renderInner=function(e){this.renderLine(e),this.get("text")&&this.renderLabel(e)},t.prototype.renderLine=function(e){var t=this.get("start"),n=this.get("end"),r=this.get("style");this.addShape(e,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:Nh({x1:t.x,y1:t.y,x2:n.x,y2:n.y},r)})},t.prototype.getLabelPoint=function(e,t,n){var r;return((r="start"===n?0:"center"===n?.5:ap(n)&&-1!==n.indexOf("%")?parseInt(n,10)/100:vp(n)?n:1)>1||r<0)&&(r=1),{x:Xb(e.x,t.x,r),y:Xb(e.y,t.y,r)}},t.prototype.renderLabel=function(e){var t=this.get("text"),n=this.get("start"),r=this.get("end"),i=t.position,a=t.content,o=t.style,s=t.offsetX,l=t.offsetY,c=t.autoRotate,u=t.maxLength,h=t.autoEllipsis,p=t.ellipsisPosition,d=t.background,f=t.isVertical,m=void 0!==f&&f,g=this.getLabelPoint(n,r,i),v=g.x+s,y=g.y+l,x={id:this.getElementId("line-text"),name:"annotation-line-text",x:v,y:y,content:a,style:o,maxLength:u,autoEllipsis:h,ellipsisPosition:p,background:d,isVertical:m};if(c){var E=[r.x-n.x,r.y-n.y];x.rotate=Math.atan2(E[1],E[0])}lC(e,x)},t}(iC),hC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:cC.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:cC.fontFamily}}})},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.renderInner=function(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get("content"),a=this.get("style");lC(e,{id:this.getElementId("text"),name:this.get("name")+"-text",x:n,y:r,content:i,style:a,maxLength:this.get("maxLength"),autoEllipsis:this.get("autoEllipsis"),isVertical:this.get("isVertical"),ellipsisPosition:this.get("ellipsisPosition"),background:this.get("background"),rotate:this.get("rotate")})},t.prototype.resetLocation=function(){var e=this.getElementByLocalId("text-group");if(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get("rotate");$b(e,n,r),Gb(e,i,n,r)}},t}(iC),pC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,style:{stroke:"#999",lineWidth:1}})},t.prototype.renderInner=function(e){this.renderArc(e)},t.prototype.getArcPath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,a=qb(t,n,r),o=qb(t,n,i),s=i-r>Math.PI?1:0,l=[["M",a.x,a.y]];if(i-r==2*Math.PI){var c=qb(t,n,r+Math.PI);l.push(["A",n,n,0,s,1,c.x,c.y]),l.push(["A",n,n,0,s,1,o.x,o.y])}else l.push(["A",n,n,0,s,1,o.x,o.y]);return l},t.prototype.renderArc=function(e){var t=this.getArcPath(),n=this.get("style");this.addShape(e,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:Nh({path:t},n)})},t}(iC),dC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:cC.regionColor,opacity:.4}}})},t.prototype.renderInner=function(e){this.renderRegion(e)},t.prototype.renderRegion=function(e){var t=this.get("start"),n=this.get("end"),r=this.get("style"),i=Vb({start:t,end:n});this.addShape(e,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:Nh({x:i.x,y:i.y,width:i.width,height:i.height},r)})},t}(iC),fC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},t.prototype.renderInner=function(e){this.renderImage(e)},t.prototype.getImageAttrs=function(){var e=this.get("start"),t=this.get("end"),n=this.get("style"),r=Vb({start:e,end:t}),i=this.get("src");return Nh({x:r.x,y:r.y,img:i,width:r.width,height:r.height},n)},t.prototype.renderImage=function(e){this.addShape(e,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},t}(iC),mC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:cC.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:cC.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:cC.fontFamily}}}})},t.prototype.renderInner=function(e){qp(this.get("line"),"display")&&this.renderLine(e),qp(this.get("text"),"display")&&this.renderText(e),qp(this.get("point"),"display")&&this.renderPoint(e),this.get("autoAdjust")&&this.autoAdjust(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},t.prototype.renderPoint=function(e){var t=this.getShapeAttrs().point;this.addShape(e,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:t})},t.prototype.renderLine=function(e){var t=this.getShapeAttrs().line;this.addShape(e,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:t})},t.prototype.renderText=function(e){var t=this.getShapeAttrs().text,n=t.x,r=t.y,i=t.text,a=Fh(t,["x","y","text"]),o=this.get("text"),s=o.background,l=o.maxLength,c=o.autoEllipsis,u=o.isVertival,h=o.ellipsisPosition;lC(e,{x:n,y:r,id:this.getElementId("text"),name:"annotation-text",content:i,style:a,background:s,maxLength:l,autoEllipsis:c,isVertival:u,ellipsisPosition:h})},t.prototype.autoAdjust=function(e){var t=this.get("direction"),n=this.get("x"),r=this.get("y"),i=qp(this.get("line"),"length",0),a=this.get("coordinateBBox"),o=e.getBBox(),s=o.minX,l=o.maxX,c=o.minY,u=o.maxY,h=e.findById(this.getElementId("text-group")),p=e.findById(this.getElementId("text")),d=e.findById(this.getElementId("line"));if(a){if(h){if(n+s<=a.minX){var f=a.minX-(n+s);$b(h,h.attr("x")+f,h.attr("y"))}if(n+l>=a.maxX){f=n+l-a.maxX;$b(h,h.attr("x")-f,h.attr("y"))}}if("upward"===t&&r+c<=a.minY||"upward"!==t&&r+u>=a.maxY){var m=void 0,g=void 0;"upward"===t&&r+c<=a.minY?(m="top",g=1):(m="bottom",g=-1),p.attr("textBaseline",m),d&&d.attr("path",[["M",0,0],["L",0,i*g]]),$b(h,h.attr("x"),(i+2)*g)}}},t.prototype.getShapeAttrs=function(){var e=qp(this.get("line"),"display"),t=qp(this.get("point"),"style",{}),n=qp(this.get("line"),"style",{}),r=qp(this.get("text"),"style",{}),i=this.get("direction"),a=e?qp(this.get("line"),"length",0):0,o="upward"===i?-1:1;return{point:Nh({x:0,y:0},t),line:Nh({path:[["M",0,0],["L",0,a*o]]},n),text:Nh({x:0,y:(a+2)*o,text:qp(this.get("text"),"content",""),textBaseline:"upward"===i?"bottom":"top"},r)}},t}(iC),gC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:cC.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:cC.textColor,fontFamily:cC.fontFamily}}}})},t.prototype.renderInner=function(e){var t=qp(this.get("region"),"style",{});qp(this.get("text"),"style",{});var n=this.get("lineLength")||0,r=this.get("points");if(r.length){var i=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=Math.min.apply(Math,t),i=Math.min.apply(Math,n),a=Math.max.apply(Math,t),o=Math.max.apply(Math,n);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}(r),a=[];a.push(["M",r[0].x,i.minY-n]),r.forEach((function(e){a.push(["L",e.x,e.y])})),a.push(["L",r[r.length-1].x,r[r.length-1].y-n]),this.addShape(e,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:Nh({path:a},t)}),lC(e,Nh({id:this.getElementId("text"),name:"annotation-text",x:(i.minX+i.maxX)/2,y:i.minY-n},this.get("text")))}},t}(iC),vC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},t.prototype.renderInner=function(e){var t=this,n=this.get("start"),r=this.get("end"),i=this.addGroup(e,{id:this.getElementId("region-filter"),capture:!1});Uh(this.get("shapes"),(function(e,n){var r=e.get("type"),a=Dp(e.attr());t.adjustShapeAttrs(a),t.addShape(i,{id:t.getElementId("shape-"+r+"-"+n),capture:!1,type:r,attrs:a})}));var a=Vb({start:n,end:r});i.setClip({type:"rect",attrs:{x:a.minX,y:a.minY,width:a.width,height:a.height}})},t.prototype.adjustShapeAttrs=function(e){var t=this.get("color");e.fill&&(e.fill=e.fillStyle=t),e.stroke=e.strokeStyle=t},t}(iC),yC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"annotation",type:"shape",draw:rd})},t.prototype.renderInner=function(e){var t=this.get("render");jh(t)&&t(e)},t}(iC),xC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.show=function(){this.get("container").style.display="",this.set("visible",!0)},t.prototype.hide=function(){this.get("container").style.display="none",this.set("visible",!1)},t.prototype.setCapture=function(e){var t=e?"auto":"none";this.getContainer().style.pointerEvents=t,this.set("capture",e)},t.prototype.getBBox=function(){var e=this.getContainer();return Wb(parseFloat(e.style.left)||0,parseFloat(e.style.top)||0,e.clientWidth,e.clientHeight)},t.prototype.clear=function(){Ub(this.get("container"))},t.prototype.destroy=function(){this.removeEvent(),this.removeDom(),e.prototype.destroy.call(this)},t.prototype.init=function(){e.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},t.prototype.initCapture=function(){this.setCapture(this.get("capture"))},t.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},t.prototype.initDom=function(){},t.prototype.initContainer=function(){var e=this.get("container");if(Gh(e)){e=this.createDom();var t=this.get("parent");ap(t)&&(t=document.getElementById(t),this.set("parent",t)),t.appendChild(e),this.set("container",e)}else ap(e)&&(e=document.getElementById(e),this.set("container",e));this.get("parent")||this.set("parent",e.parentNode)},t.prototype.resetStyles=function(){var e=this.get("domStyles"),t=this.get("defaultStyles");e=e?jp({},t,e):t,this.set("domStyles",e)},t.prototype.applyStyles=function(){var e=this.get("domStyles");if(e){var t=this.getContainer();this.applyChildrenStyles(t,e);var n,r=this.get("containerClassName");if(r&&(n=r,t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))))Rd(t,e[r])}},t.prototype.applyChildrenStyles=function(e,t){Uh(t,(function(t,n){Uh(e.getElementsByClassName(n),(function(e){Rd(e,t)}))}))},t.prototype.applyStyle=function(e,t){Rd(t,this.get("domStyles")[e])},t.prototype.createDom=function(){return Nd(this.get("containerTpl"))},t.prototype.initEvent=function(){},t.prototype.removeDom=function(){var e=this.get("container");e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.removeEvent=function(){},t.prototype.updateInner=function(e){Tp(e,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},t.prototype.resetPosition=function(){},t}(tC),EC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},t.prototype.render=function(){var e=this.getContainer(),t=this.get("html");Ub(e);var n=jh(t)?t(e):t;Lp(n)?e.appendChild(n):ap(n)&&e.appendChild(Nd(n)),this.resetPosition()},t.prototype.resetPosition=function(){var e=this.getContainer(),t=this.getLocation(),n=t.x,r=t.y,i=this.get("alignX"),a=this.get("alignY"),o=this.get("offsetX"),s=this.get("offsetY"),l=Pd(e),c=Ld(e),u={x:n,y:r};"middle"===i?u.x-=Math.round(l/2):"right"===i&&(u.x-=Math.round(l)),"middle"===a?u.y-=Math.round(c/2):"bottom"===a&&(u.y-=Math.round(c)),o&&(u.x+=o),s&&(u.y+=s),Rd(e,{position:"absolute",left:u.x+"px",top:u.y+"px",zIndex:this.get("zIndex")})},t}(xC),bC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:uC,Text:hC,Arc:pC,Region:dC,Image:fC,DataMarker:mC,DataRegion:gC,RegionFilter:vC,Shape:yC,Html:EC});function CC(e,t,n){var r=t+"Style",i=null;return Uh(n,(function(t,n){e[n]&&t[r]&&(i||(i={}),Rp(i,t[r]))})),i}var TC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:cC.lineColor}},tickLine:{style:{lineWidth:1,stroke:cC.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:cC.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:cC.textColor,fontFamily:cC.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:cC.textColor,textBaseline:"middle",fontFamily:cC.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:cC.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},t.prototype.renderInner=function(e){this.get("line")&&this.drawLine(e),this.drawTicks(e),this.get("title")&&this.drawTitle(e)},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("ticks")},t.prototype.setItems=function(e){this.update({ticks:e})},t.prototype.updateItem=function(e,t){Rp(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("label-group");e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n,this.updateTickStates(e)},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get("tickStates"),n=[];return Uh(t,(function(t,r){e[r]&&n.push(r)})),n},t.prototype.clearItemsState=function(e){var t=this;Uh(this.getItemsByState(e),(function(n){t.setItemState(n,e,!1)}))},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return Bh(n,(function(n){return t.hasState(n,e)}))},t.prototype.getSidePoint=function(e,t){var n=this.getSideVector(t,e);return{x:e.x+n[0],y:e.y+n[1]}},t.prototype.getTextAnchor=function(e){var t;return yp(e[0],0)?t="center":e[0]>0?t="start":e[0]<0&&(t="end"),t},t.prototype.getTextBaseline=function(e){var t;return yp(e[1],0)?t="middle":e[1]>0?t="top":e[1]<0&&(t="bottom"),t},t.prototype.processOverlap=function(e){},t.prototype.drawLine=function(e){var t=this.getLinePath(),n=this.get("line");this.addShape(e,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:Rp({path:t},n.style)})},t.prototype.getTickLineItems=function(e){var t=this,n=[],r=this.get("tickLine"),i=r.alignTick,a=r.length,o=1;return e.length>=2&&(o=e[1].value-e[0].value),Uh(e,(function(e){var r=e.point;i||(r=t.getTickPoint(e.value-o/2));var s=t.getSidePoint(r,a);n.push({startPoint:r,tickValue:e.value,endPoint:s,tickId:e.id,id:"tickline-"+e.id})})),n},t.prototype.getSubTickLineItems=function(e){var t=[],n=this.get("subTickLine"),r=n.count,i=e.length;if(i>=2)for(var a=0;a<i-1;a++)for(var o=e[a],s=e[a+1],l=0;l<r;l++){var c=(l+1)/(r+1),u=(1-c)*o.tickValue+c*s.tickValue,h=this.getTickPoint(u),p=this.getSidePoint(h,n.length);t.push({startPoint:h,endPoint:p,tickValue:u,id:"sub-"+o.id+"-"+l})}return t},t.prototype.getTickLineAttrs=function(e,t,n,r){var i=this.get(t).style,a={points:[e.startPoint,e.endPoint]},o=qp(this.get("theme"),["tickLine","style"],{});i=jh(i)?Rp({},o,i(a,n,r)):i;var s=e.startPoint,l=e.endPoint;return Nh({x1:s.x,y1:s.y,x2:l.x,y2:l.y},i)},t.prototype.drawTick=function(e,t,n,r,i){this.addShape(t,{type:"line",id:this.getElementId(e.id),name:"axis-"+n,attrs:this.getTickLineAttrs(e,n,r,i)})},t.prototype.drawTickLines=function(e){var t=this,n=this.get("ticks"),r=this.get("subTickLine"),i=this.getTickLineItems(n),a=this.addGroup(e,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),o=this.get("tickLine");if(Uh(i,(function(n,r){if(o.displayWithLabel){var s=t.getElementId("label-"+n.tickId);e.findById(s)&&t.drawTick(n,a,"tickLine",r,i)}else t.drawTick(n,a,"tickLine",r,i)})),r){var s=this.getSubTickLineItems(i);Uh(s,(function(e,n){t.drawTick(e,a,"subTickLine",n,s)}))}},t.prototype.processTicks=function(){var e=this;Uh(this.get("ticks"),(function(t){t.point=e.getTickPoint(t.value),Gh(t.id)&&(t.id=t.name)}))},t.prototype.drawTicks=function(e){var t=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(e),this.get("tickLine")&&this.drawTickLines(e),Uh(this.get("ticks"),(function(n){t.applyTickStates(n,e)}))},t.prototype.optimizeTicks=function(){var e=this.get("optimize"),t=this.get("ticks");if(e&&e.enable&&e.threshold>0){var n=id(t);if(n>e.threshold){var r=Math.ceil(n/e.threshold),i=t.filter((function(e,t){return t%r==0}));this.set("ticks",i),this.set("originalTicks",t)}}},t.prototype.getLabelAttrs=function(e,t,n){var r=this.get("label"),i=r.offset,a=r.offsetX,o=r.offsetY,s=r.rotate,l=r.formatter,c=this.getSidePoint(e.point,i),u=this.getSideVector(i,c),h=l?l(e.name,e,t):e.name,p=r.style;p=jh(p)?qp(this.get("theme"),["label","style"],{}):p;var d=Rp({x:c.x+a,y:c.y+o,text:h,textAlign:this.getTextAnchor(u),textBaseline:this.getTextBaseline(u)},p);return s&&(d.matrix=zb(c,s)),d},t.prototype.drawLabels=function(e){var t=this,n=this.get("ticks"),r=this.addGroup(e,{name:"axis-label-group",id:this.getElementId("label-group")});Uh(n,(function(e,i){t.addShape(r,{type:"text",name:"axis-label",id:t.getElementId("label-"+e.id),attrs:t.getLabelAttrs(e,i,n),delegateObject:{tick:e,item:e,index:i}})})),this.processOverlap(r);var i=r.getChildren(),a=qp(this.get("theme"),["label","style"],{}),o=this.get("label"),s=o.style,l=o.formatter;if(jh(s)){var c=i.map((function(e){return qp(e.get("delegateObject"),"tick")}));Uh(i,(function(e,t){var n=e.get("delegateObject").tick,r=l?l(n.name,n,t):n.name,i=Rp({},a,s(r,t,c));e.attr(i)}))}},t.prototype.getTitleAttrs=function(){var e=this.get("title"),t=e.style,n=e.position,r=e.offset,i=e.spacing,a=void 0===i?0:i,o=e.autoRotate,s=t.fontSize,l=.5;"start"===n?l=0:"end"===n&&(l=1);var c=this.getTickPoint(l),u=this.getSidePoint(c,r||a+s/2),h=Rp({x:u.x,y:u.y,text:e.text},t),p=e.rotate,d=p;if(Gh(p)&&o){d=rm(this.getAxisVector(c),[1,0],!0)}if(d){var f=zb(u,d);h.matrix=f}return h},t.prototype.drawTitle=function(e){this.addShape(e,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},t.prototype.applyTickStates=function(e,t){if(this.getItemStates(e).length){var n=this.get("tickStates"),r=this.getElementId("label-"+e.id),i=t.findById(r);if(i){var a=CC(e,"label",n);a&&i.attr(a)}var o=this.getElementId("tickline-"+e.id),s=t.findById(o);if(s){var l=CC(e,"tickLine",n);l&&s.attr(l)}}},t.prototype.updateTickStates=function(e){var t=this.getItemStates(e),n=this.get("tickStates"),r=this.get("label"),i=this.getElementByLocalId("label-"+e.id),a=this.get("tickLine"),o=this.getElementByLocalId("tickline-"+e.id);if(t.length){if(i){var s=CC(e,"label",n);s&&i.attr(s)}if(o){var l=CC(e,"tickLine",n);l&&o.attr(l)}}else i&&i.attr(r.style),o&&o.attr(a.style)},t}(iC);function wC(e,t,n,r){var i=t.getChildren(),a=!1;return Uh(i,(function(t){var i=sC(e,t,n,r);a=a||i})),a}function SC(e,t,n){return wC(e,t,n,"tail")}var kC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return SC},ellipsisHead:function(e,t,n){return wC(e,t,n,"head")},ellipsisTail:SC,ellipsisMiddle:function(e,t,n){return wC(e,t,n,"middle")}});function _C(e){return(function(e){var t=e.attr("matrix");return t&&1!==t[0]}(e)?function(e){var t=[0,0,0];return Hf(t,[1,0,0],e),Math.atan2(t[1],t[0])}(e.attr("matrix")):0)%360}function AC(e,t,n,r){var i=!1,a=_C(t),o=e?Math.abs(n.attr("y")-t.attr("y")):Math.abs(n.attr("x")-t.attr("x")),s=(e?n.attr("y")>t.attr("y"):n.attr("x")>t.attr("x"))?t.getBBox():n.getBBox();if(e){var l=Math.abs(Math.cos(a));i=Kb(l,0,Math.PI/180)?s.width+r>o:s.height/l+r>o}else{l=Math.abs(Math.sin(a));i=Kb(l,0,Math.PI/180)?s.width+r>o:s.height/l+r>o}return i}function OC(e,t,n,r){var i=(null==r?void 0:r.minGap)||0,a=t.getChildren().slice().filter((function(e){return e.get("visible")}));if(!a.length)return!1;var o=!1;n&&a.reverse();for(var s=a.length,l=a[0],c=1;c<s;c++){var u=a[c];u.getBBox(),AC(e,l,u,i)?(u.hide(),o=!0):l=u}return o}function IC(e,t,n){var r=(null==n?void 0:n.minGap)||0,i=t.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],s=o.getBBox(),l=i[1],c=i.length,u=_C(o),h=e?Math.abs(l.attr("y")-o.attr("y")):Math.abs(l.attr("x")-o.attr("x")),p=0;if(e){var d=Math.abs(Math.cos(u));if(Kb(d,0,Math.PI/180))p=(oC(i)+r)/h;else p=(s.height/d+r)/h}else{d=Math.abs(Math.sin(u));if(Kb(d,0,Math.PI/180))p=(oC(i)+r)/h;else p=(s.height/d+r)/h}if(p>1){p=Math.ceil(p);for(var f=0;f<c;f++)f%p!=0&&(i[f].hide(),a=!0)}return a}function MC(e,t,n,r){var i=IC(e,t,r);return OC(e,t,!1)&&(i=!0),i}var NC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return MC},reserveFirst:function(e,t,n,r){return OC(e,t,!1,r)},reserveLast:function(e,t,n,r){return OC(e,t,!0,r)},reserveBoth:function(e,t,n,r){var i=(null==r?void 0:r.minGap)||0,a=t.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,s=a.length,l=a[0],c=a[s-1],u=l,h=1;h<s-1;h++){var p=a[h];p.getBBox(),AC(e,u,p,i)?(p.hide(),o=!0):u=p}return AC(e,u,c,i)&&(u.hide(),o=!0),o},equidistance:MC,equidistanceWithReverseBoth:function(e,t,n,r){var i=t.getChildren().slice(),a=IC(e,t,r);if(i.length>2){var o=i[0],s=i[i.length-1];o.get("visible")||(o.show(),OC(e,t,!1,r)&&(a=!0)),s.get("visible")||(s.show(),OC(e,t,!0,r)&&(a=!0))}return a}});function FC(e,t,n,r){var i=t.getChildren();if(!i.length)return!1;if(!e&&i.length<2)return!1;var a=oC(i),o=!1;e?o=!!n&&a>n:o=a>Math.abs(i[1].attr("x")-i[0].attr("x"));o&&function(e,t){Uh(e,(function(e){var n=zb({x:e.attr("x"),y:e.attr("y")},t);e.attr("matrix",n)}))}(i,r(n,a));return o}function LC(e,t,n,r){return FC(e,t,n,(function(){return vp(r)?r:e?cC.verticalAxisRotate:cC.horizontalAxisRotate}))}var PC,RC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return LC},fixedAngle:LC,unfixedAngle:function(e,t,n){return FC(e,t,n,(function(t,n){if(!t)return e?cC.verticalAxisRotate:cC.horizontalAxisRotate;if(e)return-Math.acos(t/n);var r=0;return(t>n||(r=Math.asin(t/n))>Math.PI/4)&&(r=Math.PI/4),r}))}}),DC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",autoHide:NC,autoRotate:RC,autoEllipsis:kC}),BC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getLinePath=function(){var e=this.get("start"),t=this.get("end"),n=[];return n.push(["M",e.x,e.y]),n.push(["L",t.x,t.y]),n},t.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),n=this.get("end"),r=e.prototype.getInnerLayoutBBox.call(this),i=Math.min(t.x,n.x,r.x),a=Math.min(t.y,n.y,r.y),o=Math.max(t.x,n.x,r.maxX),s=Math.max(t.y,n.y,r.maxY);return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},t.prototype.isVertical=function(){var e=this.get("start"),t=this.get("end");return yp(e.x,t.x)},t.prototype.isHorizontal=function(){var e=this.get("start"),t=this.get("end");return yp(e.y,t.y)},t.prototype.getTickPoint=function(e){var t=this.get("start"),n=this.get("end"),r=n.x-t.x,i=n.y-t.y;return{x:t.x+r*e,y:t.y+i*e}},t.prototype.getSideVector=function(e){var t=Xf([0,0],this.getAxisVector()),n=this.get("verticalFactor");return Uf([0,0],[t[1],-1*t[0]],e*n)},t.prototype.getAxisVector=function(){var e=this.get("start"),t=this.get("end");return[t.x-e.x,t.y-e.y]},t.prototype.processOverlap=function(e){var t=this,n=this.isVertical(),r=this.isHorizontal();if(n||r){var i=this.get("label"),a=this.get("title"),o=this.get("verticalLimitLength"),s=i.offset,l=o,c=0,u=0;if(a&&(c=a.style.fontSize,u=a.spacing),l&&(l=l-s-u-c),Uh(this.get("overlapOrder"),(function(n){i[n]&&t.canProcessOverlap(n)&&t.autoProcessOverlap(n,i[n],e,l)})),a&&Gh(a.offset)){var h=e.getCanvasBBox(),p=n?h.width:h.height;a.offset=s+p+u+c/2}}},t.prototype.canProcessOverlap=function(e){var t=this.get("label");return"autoRotate"!==e||Gh(t.rotate)},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,a=this.isVertical(),o=!1,s=DC[e];if(!0===t)this.get("label"),o=s.getDefault()(a,n,r);else if(jh(t))o=t(a,n,r);else if(Yh(t)){var l=t;s[l.type]&&(o=s[l.type](a,n,r,l.cfg))}else s[t]&&(o=s[t](a,n,r));if("autoRotate"===e){if(o){var c=n.getChildren(),u=this.get("verticalFactor");Uh(c,(function(e){if("center"===e.attr("textAlign")){var t=u>0?"end":"start";e.attr("textAlign",t)}}))}}else if("autoHide"===e){Uh(n.getChildren().slice(0),(function(e){e.get("visible")||(i.get("isRegister")&&i.unregisterElement(e),e.remove())}))}},t}(TC),zC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},t.prototype.getLinePath=function(){var e=this.get("center"),t=e.x,n=e.y,r=this.get("radius"),i=r,a=this.get("startAngle"),o=this.get("endAngle"),s=[];if(Math.abs(o-a)===2*Math.PI)s=[["M",t,n-i],["A",r,i,0,1,1,t,n+i],["A",r,i,0,1,1,t,n-i],["Z"]];else{var l=this.getCirclePoint(a),c=this.getCirclePoint(o),u=Math.abs(o-a)>Math.PI?1:0,h=a>o?0:1;s=[["M",t,n],["L",l.x,l.y],["A",r,i,0,u,h,c.x,c.y],["L",t,n]]}return s},t.prototype.getTickPoint=function(e){var t=this.get("startAngle"),n=t+(this.get("endAngle")-t)*e;return this.getCirclePoint(n)},t.prototype.getSideVector=function(e,t){var n=this.get("center"),r=[t.x-n.x,t.y-n.y];return Uf(r,r,this.get("verticalFactor")*e/Wf(r)),r},t.prototype.getAxisVector=function(e){var t=this.get("center"),n=[e.x-t.x,e.y-t.y];return[n[1],-1*n[0]]},t.prototype.getCirclePoint=function(e,t){var n=this.get("center");return t=t||this.get("radius"),{x:n.x+Math.cos(e)*t,y:n.y+Math.sin(e)*t}},t.prototype.canProcessOverlap=function(e){var t=this.get("label");return"autoRotate"!==e||Gh(t.rotate)},t.prototype.processOverlap=function(e){var t=this,n=this.get("label"),r=this.get("title"),i=this.get("verticalLimitLength"),a=n.offset,o=i,s=0,l=0;if(r&&(s=r.style.fontSize,l=r.spacing),o&&(o=o-a-l-s),Uh(this.get("overlapOrder"),(function(r){n[r]&&t.canProcessOverlap(r)&&t.autoProcessOverlap(r,n[r],e,o)})),r&&Gh(r.offset)){var c=e.getCanvasBBox().height;r.offset=a+c+l+s/2}},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,a=!1,o=DC[e];if(r>0)if(!0===t)a=o.getDefault()(!1,n,r);else if(jh(t))a=t(!1,n,r);else if(Yh(t)){var s=t;o[s.type]&&(a=o[s.type](!1,n,r,s.cfg))}else o[t]&&(a=o[t](!1,n,r));if("autoRotate"===e){if(a){var l=n.getChildren(),c=this.get("verticalFactor");Uh(l,(function(e){if("center"===e.attr("textAlign")){var t=c>0?"end":"start";e.attr("textAlign",t)}}))}}else if("autoHide"===e){Uh(n.getChildren().slice(0),(function(e){e.get("visible")||(i.get("isRegister")&&i.unregisterElement(e),e.remove())}))}},t}(TC),HC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:cC.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:cC.textColor,textAlign:"center",textBaseline:"middle",fontFamily:cC.fontFamily}},textBackground:{padding:5,style:{stroke:cC.lineColor}}}})},t.prototype.renderInner=function(e){this.get("line")&&this.renderLine(e),this.get("text")&&(this.renderText(e),this.renderBackground(e))},t.prototype.renderText=function(e){var t=this.get("text"),n=t.style,r=t.autoRotate,i=t.content;if(!Gh(i)){var a=this.getTextPoint(),o=null;if(r)o=zb(a,this.getRotateAngle());this.addShape(e,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:Nh(Nh(Nh({},a),{text:i,matrix:o}),n)})}},t.prototype.renderLine=function(e){var t=this.getLinePath(),n=this.get("line").style;this.addShape(e,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:Nh({path:t},n)})},t.prototype.renderBackground=function(e){var t=this.getElementId("text"),n=e.findById(t),r=this.get("textBackground");if(r&&n){var i=n.getBBox(),a=Yb(r.padding),o=r.style;this.addShape(e,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:Nh({x:i.x-a[3],y:i.y-a[0],width:i.width+a[1]+a[3],height:i.height+a[0]+a[2],matrix:n.attr("matrix")},o)}).toBack()}},t}(iC),jC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text").position,i=Math.atan2(n.y-t.y,n.x-t.x);return"start"===r?i-Math.PI/2:i+Math.PI/2},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text");return Jb(t,n,r.position,r.offset)},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.start,n=e.end;return[["M",t.x,t.y],["L",n.x,n.y]]},t}(HC),GC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.startAngle,n=e.endAngle;return"start"===this.get("text").position?t+Math.PI/2:n-Math.PI/2},t.prototype.getTextPoint=function(){var e=this.get("text"),t=e.position,n=e.offset,r=this.getLocation(),i=r.center,a=r.radius,o=r.startAngle,s=r.endAngle,l="start"===t?o:s,c=this.getRotateAngle()-Math.PI,u=qb(i,a,l),h=Math.cos(c)*n,p=Math.sin(c)*n;return{x:u.x+h,y:u.y+p}},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,a=null;if(i-r==2*Math.PI){var o=t.x,s=t.y;a=[["M",o,s-n],["A",n,n,0,1,1,o,s+n],["A",n,n,0,1,1,o,s-n],["Z"]]}else{var l=qb(t,n,r),c=qb(t,n,i),u=Math.abs(i-r)>Math.PI?1:0,h=r>i?0:1;a=[["M",l.x,l.y],["A",n,n,0,u,h,c.x,c.y]]}return a},t}(HC),$C=((PC={})["g2-crosshair"]={position:"relative"},PC["g2-crosshair-line"]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},PC["g2-crosshair-text"]={position:"absolute",color:cC.textColor,fontFamily:cC.fontFamily},PC),YC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="g2-crosshair"></div>',crosshairTpl:'<div class="g2-crosshair-line"></div>',textTpl:'<span class="g2-crosshair-text">{content}</span>',domStyles:null,containerClassName:"g2-crosshair",defaultStyles:$C,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},t.prototype.render=function(){this.resetText(),this.resetPosition()},t.prototype.initCrossHair=function(){var e=this.getContainer(),t=Nd(this.get("crosshairTpl"));e.appendChild(t),this.applyStyle("g2-crosshair-line",t),this.set("crosshairEl",t)},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text");return Jb(t,n,r.position,r.offset)},t.prototype.resetText=function(){var e=this.get("text"),t=this.get("textEl");if(e){var n=e.content;if(!t){var r=this.getContainer();t=Nd(_p(this.get("textTpl"),e)),r.appendChild(t),this.applyStyle("g2-crosshair-text",t),this.set("textEl",t)}t.innerHTML=n}else t&&t.remove()},t.prototype.isVertical=function(e,t){return e.x===t.x},t.prototype.resetPosition=function(){var e=this.get("crosshairEl");e||(this.initCrossHair(),e=this.get("crosshairEl"));var t=this.get("start"),n=this.get("end"),r=Math.min(t.x,n.x),i=Math.min(t.y,n.y);this.isVertical(t,n)?Rd(e,{width:"1px",height:Zb(Math.abs(n.y-t.y))}):Rd(e,{height:"1px",width:Zb(Math.abs(n.x-t.x))}),Rd(e,{top:Zb(i),left:Zb(r)}),this.alignText()},t.prototype.alignText=function(){var e=this.get("textEl");if(e){var t=this.get("text").align,n=e.clientWidth,r=this.getTextPoint();switch(t){case"center":r.x=r.x-n/2;break;case"right":r.x=r.x-n}Rd(e,{top:Zb(r.y),left:Zb(r.x)})}},t.prototype.updateInner=function(t){Tp(t,"text")&&this.resetText(),e.prototype.updateInner.call(this,t)},t}(xC),UC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:jC,Circle:GC,Base:HC,Html:YC}),VC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:cC.lineColor}}}})},t.prototype.getLineType=function(){return(this.get("line")||this.get("defaultCfg").line).type},t.prototype.renderInner=function(e){this.drawGrid(e)},t.prototype.getAlternatePath=function(e,t){var n=this.getGridPath(e),r=t.slice(0).reverse(),i=this.getGridPath(r,!0);return this.get("closed")?n=n.concat(i):(i[0][0]="L",(n=n.concat(i)).push(["Z"])),n},t.prototype.getPathStyle=function(){return this.get("line").style},t.prototype.drawGrid=function(e){var t=this,n=this.get("line"),r=this.get("items"),i=this.get("alternateColor"),a=null;Uh(r,(function(o,s){var l=o.id||s;if(n){var c=t.getPathStyle();c=jh(c)?c(o,s,r):c;var u=t.getElementId("line-"+l),h=t.getGridPath(o.points);t.addShape(e,{type:"path",name:"grid-line",id:u,attrs:Rp({path:h},c)})}if(i&&s>0){var p=t.getElementId("region-"+l),d=s%2==0;if(ap(i))d&&t.drawAlternateRegion(p,e,a.points,o.points,i);else{var f=d?i[1]:i[0];t.drawAlternateRegion(p,e,a.points,o.points,f)}}a=o}))},t.prototype.drawAlternateRegion=function(e,t,n,r,i){var a=this.getAlternatePath(n,r);this.addShape(t,{type:"path",id:e,name:"grid-region",attrs:{path:a,fill:i}})},t}(iC);var WC,XC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{type:"circle",center:null,closed:!0})},t.prototype.getGridPath=function(e,t){var n,r,i,a,o,s,l=this.getLineType(),c=this.get("closed"),u=[];if(e.length)if("circle"===l){var h=this.get("center"),p=e[0],d=(n=h.x,r=h.y,i=p.x,a=p.y,o=i-n,s=a-r,Math.sqrt(o*o+s*s)),f=t?0:1;c?(u.push(["M",h.x,h.y-d]),u.push(["A",d,d,0,0,f,h.x,h.y+d]),u.push(["A",d,d,0,0,f,h.x,h.y-d]),u.push(["Z"])):Uh(e,(function(e,t){0===t?u.push(["M",e.x,e.y]):u.push(["A",d,d,0,0,f,e.x,e.y])}))}else Uh(e,(function(e,t){0===t?u.push(["M",e.x,e.y]):u.push(["L",e.x,e.y])})),c&&u.push(["Z"]);return u},t}(VC),qC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{type:"line"})},t.prototype.getGridPath=function(e){var t=[];return Uh(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},t}(VC),KC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},t.prototype.getLayoutBBox=function(){var t=e.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),r=this.get("maxHeight"),i=t.width,a=t.height;return n&&(i=Math.min(i,n)),r&&(a=Math.min(a,r)),Wb(t.minX,t.minY,i,a)},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.resetLocation=function(){var e=this.get("x"),t=this.get("y"),n=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e+n,y:t+r})},t.prototype.applyOffset=function(){this.resetLocation()},t.prototype.getDrawPoint=function(){return this.get("currentPoint")},t.prototype.setDrawPoint=function(e){return this.set("currentPoint",e)},t.prototype.renderInner=function(e){this.resetDraw(),this.get("title")&&this.drawTitle(e),this.drawLegendContent(e),this.get("background")&&this.drawBackground(e)},t.prototype.drawBackground=function(e){var t=this.get("background"),n=e.getBBox(),r=Yb(t.padding),i=Nh({x:0,y:0,width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},t.style);this.addShape(e,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:i}).toBack()},t.prototype.drawTitle=function(e){var t=this.get("currentPoint"),n=this.get("title"),r=n.spacing,i=n.style,a=n.text,o=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:Nh({text:a,x:t.x,y:t.y},i)}).getBBox();this.set("currentPoint",{x:t.x,y:o.maxY+r})},t.prototype.resetDraw=function(){var e=this.get("background"),t={x:0,y:0};if(e){var n=Yb(e.padding);t.x=n[3],t.y=n[0]}this.set("currentPoint",t)},t}(iC),QC={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},ZC={fill:cC.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:cC.fontFamily,fontWeight:"normal",lineHeight:12},JC=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:n},100):e.attr({matrix:n})}},t.onNavigationAfter=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:n},100):e.attr({matrix:n})}},t}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:cC.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:cC.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:QC,itemName:{spacing:16,style:ZC},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:ZC},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:cC.uncheckedColor},markerStyle:{fill:cC.uncheckedColor,stroke:cC.uncheckedColor}},inactive:{nameStyle:{fill:cC.uncheckedColor},markerStyle:{opacity:.2}}}}})},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("items")},t.prototype.setItems=function(e){this.update({items:e})},t.prototype.updateItem=function(e,t){Rp(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("item-group");e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n;var r=this.getElementByLocalId("item-"+e.id);if(r){var i=this.getItems().indexOf(e),a=this.createOffScreenGroup(),o=this.drawItem(e,i,this.getItemHeight(),a);this.updateElements(o,r),this.clearUpdateStatus(r)}},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get("itemStates"),n=[];return Uh(t,(function(t,r){e[r]&&n.push(r)})),n},t.prototype.clearItemsState=function(e){var t=this;Uh(this.getItemsByState(e),(function(n){t.setItemState(n,e,!1)}))},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return Bh(n,(function(n){return t.hasState(n,e)}))},t.prototype.drawLegendContent=function(e){this.processItems(),this.drawItems(e)},t.prototype.processItems=function(){Uh(this.get("items"),(function(e){e.id||(e.id=e.name)}))},t.prototype.drawItems=function(e){var t=this,n=this.addGroup(e,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),r=this.addGroup(n,{id:this.getElementId("item-group"),name:"legend-item-group"}),i=this.getItemHeight(),a=this.get("itemWidth"),o=this.get("itemSpacing"),s=this.get("itemMarginBottom"),l=this.get("currentPoint"),c=l.x,u=l.y,h=this.get("layout"),p=this.get("items"),d=!1,f=0,m=this.get("maxWidth"),g=this.get("maxHeight");Uh(p,(function(e,n){var p=t.drawItem(e,n,i,r),v=p.getBBox(),y=a||v.width;y>f&&(f=y),"horizontal"===h?(m&&m<l.x+y-c&&(d=!0,l.x=c,l.y+=i+s),t.moveElementTo(p,l),l.x+=y+o):(g&&g<l.y+i+s-u&&(d=!0,l.x+=f+o,l.y=u,f=0),t.moveElementTo(p,l),l.y+=i+s)})),d&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=c,this.startY=u,this.adjustNavigation(e,r))},t.prototype.getItemHeight=function(){var e=this.get("itemHeight");if(!e){var t=(this.get("itemName")||{}).style;if(jh(t)){var n=this.getItems();n.forEach((function(r,i){var a=Nh(Nh({},ZC),t(r,i,n)).fontSize;e<a&&(e=a)}))}else t&&(e=t.fontSize)}return e},t.prototype.drawMarker=function(e,t,n,r){var i=Nh(Nh(Nh({x:0,y:r/2},t.style),{symbol:qp(n.marker,"symbol","circle")}),qp(n.marker,"style",{})),a=this.addShape(e,{type:"marker",id:this.getElementId("item-"+n.id+"-marker"),name:"legend-item-marker",attrs:i}),o=a.getBBox();a.attr("x",o.width/2);var s=a.attr(),l=s.stroke,c=s.fill;return l&&a.set("isStroke",!0),c&&a.set("isFill",!0),a},t.prototype.drawItemText=function(e,t,n,r,i,a,o){var s=n.formatter,l=n.style,c=Nh(Nh({x:a,y:i/2,text:s?s(r[t],r,o):r[t]},ZC),jh(l)?l(r,o,this.getItems()):l);return this.addShape(e,{type:"text",id:this.getElementId("item-"+r.id+"-"+t),name:"legend-item-"+t,attrs:c})},t.prototype.drawItem=function(e,t,n,r){var i="item-"+e.id,a=this.addGroup(r,{name:"legend-item-container",id:this.getElementId("item-container-"+i),delegateObject:{item:e,index:t}}),o=this.addGroup(a,{name:"legend-item",id:this.getElementId(i),delegateObject:{item:e,index:t}}),s=this.get("marker"),l=this.get("itemName"),c=this.get("itemValue"),u=this.get("itemBackground"),h=this.getLimitItemWidth(),p=0;if(s){var d=this.drawMarker(o,s,e,n),f=s.spacing,m=qp(e,["marker","spacing"]);vp(m)&&(f=m),p=d.getBBox().maxX+f}if(l){var g=this.drawItemText(o,"name",l,e,n,p,t);h&&sC(!0,g,mp(h-p,0,h)),p=g.getBBox().maxX+l.spacing}if(c){var v=this.drawItemText(o,"value",c,e,n,p,t);h&&(c.alignRight?(v.attr({textAlign:"right",x:h}),sC(!0,v,mp(h-p,0,h),"head")):sC(!0,v,mp(h-p,0,h)))}if(u){var y=o.getBBox();this.addShape(o,{type:"rect",name:"legend-item-background",id:this.getElementId(i+"-background"),attrs:Nh({x:0,y:0,width:y.width,height:n},u.style)}).toBack()}return this.applyItemStates(e,o),o},t.prototype.adjustNavigation=function(e,t){var n=this,r=this.startX,i=this.startY,a=this.get("layout"),o=t.findAll((function(e){return"legend-item"===e.get("name")})),s=this.get("maxWidth"),l=this.get("maxHeight"),c=this.get("itemWidth"),u=this.get("itemSpacing"),h=this.getItemHeight(),p=jp({},QC,this.get("pageNavigator")),d=this.drawNavigation(e,a,"00/00",p),f=d.getBBox(),m={x:r,y:i},g=1,v=0,y=0,x=0,E=this.get("itemMarginBottom");if("horizontal"===a){var b=this.get("maxRow")||1,C=h+(1===b?0:E);this.pageHeight=C*b,Uh(o,(function(e){var t=e.getBBox(),i=c||t.width;(v&&v<m.x+i+u||s<m.x+i+u+f.width)&&(1===g&&(v=m.x+u,n.pageWidth=v,n.moveElementTo(d,{x:s-u-f.width-f.minX,y:m.y+h/2-f.height/2-f.minY})),g+=1,m.x=r,m.y+=C),n.moveElementTo(e,m),e.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:i+u,height:h}}),m.x+=i+u}))}else{Uh(o,(function(e){var t=e.getBBox();t.width>y&&(y=t.width)})),x=y,y+=u,s&&(y=Math.min(s,y),x=Math.min(s,x)),this.pageWidth=y,this.pageHeight=l-Math.max(f.height,h+E);var T=Math.floor(this.pageHeight/(h+E));Uh(o,(function(e,t){0!==t&&t%T==0&&(g+=1,m.x+=y,m.y=i),n.moveElementTo(e,m),e.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:y,height:h}}),m.y+=h+E})),this.totalPagesCnt=g,this.moveElementTo(d,{x:r+x/2-f.width/2-f.minX,y:l-f.height-f.minY})}this.pageHeight&&this.pageWidth&&t.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),"horizontal"===a&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(g/this.get("maxRow")):this.totalPagesCnt=g,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(d),t.attr("matrix",this.getCurrentNavigationMatrix())},t.prototype.drawNavigation=function(e,t,n,r){var i={x:0,y:0},a=this.addGroup(e,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),o=qp(r.marker,"style",{}),s=o.size,l=void 0===s?12:s,c=Fh(o,["size"]),u=this.drawArrow(a,i,"navigation-arrow-left","horizontal"===t?"up":"left",l,c);u.on("click",this.onNavigationBack);var h=u.getBBox();i.x+=h.width+2;var p=this.addShape(a,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:Nh({x:i.x,y:i.y+l/2,text:n,textBaseline:"middle"},qp(r.text,"style"))}).getBBox();return i.x+=p.width+2,this.drawArrow(a,i,"navigation-arrow-right","horizontal"===t?"down":"right",l,c).on("click",this.onNavigationAfter),a},t.prototype.updateNavigation=function(e){var t=jp({},QC,this.get("pageNavigator")).marker.style,n=t.fill,r=t.opacity,i=t.inactiveFill,a=t.inactiveOpacity,o=this.currentPageIndex+"/"+this.totalPagesCnt,s=e?e.getChildren()[1]:this.getElementByLocalId("navigation-text"),l=e?e.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),c=e?e.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),u=s.getBBox();s.attr("text",o);var h=s.getBBox();s.attr("x",s.attr("x")-(h.width-u.width)/2),l.attr("opacity",1===this.currentPageIndex?a:r),l.attr("fill",1===this.currentPageIndex?i:n),l.attr("cursor",1===this.currentPageIndex?"not-allowed":"pointer"),c.attr("opacity",this.currentPageIndex===this.totalPagesCnt?a:r),c.attr("fill",this.currentPageIndex===this.totalPagesCnt?i:n),c.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},t.prototype.drawArrow=function(e,t,n,r,i,a){var o=t.x,s=t.y,l={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},c=this.addShape(e,{type:"path",id:this.getElementId(n),name:n,attrs:Nh({path:[["M",o+i/2,s],["L",o,s+i],["L",o+i,s+i],["Z"]],cursor:"pointer"},a)});return c.attr("matrix",zb({x:o+i/2,y:s+i/2},l[r])),c},t.prototype.getCurrentNavigationMatrix=function(){var e=this,t=e.currentPageIndex,n=e.pageWidth,r=e.pageHeight;return Hb("horizontal"===this.get("layout")?{x:0,y:r*(1-t)}:{x:n*(1-t),y:0})},t.prototype.applyItemStates=function(e,t){if(this.getItemStates(e).length>0){var n=t.getChildren(),r=this.get("itemStates");Uh(n,(function(t){var n=t.get("name").split("-")[2],i=CC(e,n,r);i&&(t.attr(i),"marker"!==n||t.get("isStroke")&&t.get("isFill")||(t.get("isStroke")&&t.attr("fill",null),t.get("isFill")&&t.attr("stroke",null)))}))}},t.prototype.getLimitItemWidth=function(){var e=this.get("itemWidth"),t=this.get("maxItemWidth");return t?e&&(t=e<=t?e:t):e&&(t=e),t},t}(KC),eT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:cC.textColor,textBaseline:"middle",fontFamily:cC.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:cC.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},t.prototype.isSlider=function(){return!0},t.prototype.getValue=function(){return this.getCurrentValue()},t.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},t.prototype.setRange=function(e,t){this.update({min:e,max:t})},t.prototype.setValue=function(e){var t=this.getValue();this.set("value",e);var n=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(n),this.delegateEmit("valuechanged",{originValue:t,value:e})},t.prototype.initEvent=function(){var e=this.get("group");this.bindSliderEvent(e),this.bindRailEvent(e),this.bindTrackEvent(e)},t.prototype.drawLegendContent=function(e){this.drawRail(e),this.drawLabels(e),this.fixedElements(e),this.resetTrack(e),this.resetTrackClip(e),this.get("slidable")&&this.resetHandlers(e)},t.prototype.bindSliderEvent=function(e){this.bindHandlersEvent(e)},t.prototype.bindHandlersEvent=function(e){var t=this;e.on("legend-handler-min:drag",(function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[1];r<n&&(r=n),t.setValue([n,r])})),e.on("legend-handler-max:drag",(function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[0];r>n&&(r=n),t.setValue([r,n])}))},t.prototype.bindRailEvent=function(e){},t.prototype.bindTrackEvent=function(e){var t=this,n=null;e.on("legend-track:dragstart",(function(e){n={x:e.x,y:e.y}})),e.on("legend-track:drag",(function(e){if(n){var r=t.getValueByCanvasPoint(n.x,n.y),i=t.getValueByCanvasPoint(e.x,e.y),a=t.getCurrentValue(),o=a[1]-a[0],s=t.getRange(),l=i-r;l<0?a[0]+l>s.min?t.setValue([a[0]+l,a[1]+l]):t.setValue([s.min,s.min+o]):l>0&&(l>0&&a[1]+l<s.max?t.setValue([a[0]+l,a[1]+l]):t.setValue([s.max-o,s.max])),n={x:e.x,y:e.y}}})),e.on("legend-track:dragend",(function(e){n=null}))},t.prototype.drawLabels=function(e){this.drawLabel("min",e),this.drawLabel("max",e)},t.prototype.drawLabel=function(e,t){var n=this.get("label"),r=n.style,i=n.align,a=n.formatter,o=this.get(e),s=this.getLabelAlignAttrs(e,i),l="label-"+e;this.addShape(t,{type:"text",id:this.getElementId(l),name:"legend-label-"+e,attrs:Nh(Nh({x:0,y:0,text:jh(a)?a(o):o},r),s)})},t.prototype.getLabelAlignAttrs=function(e,t){var n="center",r="middle";return this.isVertical()?(n="start",r="rail"!==t?"min"===e?"top":"bottom":"top"):"rail"!==t?(r="top",n="min"===e?"start":"end"):(n="start",r="middle"),{textAlign:n,textBaseline:r}},t.prototype.getRailPath=function(e,t,n,r){var i=this.get("rail"),a=i.size,o=i.defaultLength,s=i.type,l=this.isVertical(),c=n,u=r;c||(c=l?a:o),u||(u=l?o:a);var h=[];return"color"===s?(h.push(["M",e,t]),h.push(["L",e+c,t]),h.push(["L",e+c,t+u]),h.push(["L",e,t+u]),h.push(["Z"])):(h.push(["M",e+c,t]),h.push(["L",e+c,t+u]),h.push(["L",e,t+u]),h.push(["Z"])),h},t.prototype.drawRail=function(e){var t=this.get("rail").style;this.addShape(e,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:Nh({path:this.getRailPath(0,0)},t)})},t.prototype.getTrackColor=function(e){var t,n=e.length;if(!n)return null;if(1===n)return e[0];t=this.isVertical()?"l(90)":"l(0)";for(var r=0;r<n;r++){t+=" "+r/(n-1)+":"+e[r]}return t},t.prototype.getTrackPath=function(e){var t=this.getRailShape(e).attr("path");return Dp(t)},t.prototype.getClipTrackAttrs=function(e){var t,n,r,i,a=this.getCurrentValue(),o=a[0],s=a[1],l=this.getRailBBox(e),c=this.getPointByValue(o,e),u=this.getPointByValue(s,e);return this.isVertical()?(t=l.minX,n=c.y,r=l.width,i=u.y-c.y):(t=c.x,n=l.minY,r=u.x-c.x,i=l.height),{x:t,y:n,width:r,height:i}},t.prototype.getTrackAttrs=function(e){var t=this.get("track"),n=this.get("colors");return Rp({path:this.getTrackPath(e),fill:this.getTrackColor(n)},t.style)},t.prototype.resetTrackClip=function(e){var t=e||this.get("group"),n=this.getElementId("track"),r=t.findById(n),i=r.getClip(),a=this.getClipTrackAttrs(e);i?i.attr(a):r.setClip({type:"rect",attrs:a})},t.prototype.resetTrack=function(e){var t=this.getElementId("track"),n=e.findById(t),r=this.getTrackAttrs(e);n?n.attr(r):this.addShape(e,{type:"path",id:t,draggable:this.get("slidable"),name:"legend-track",attrs:r})},t.prototype.getPointByValue=function(e,t){var n=this.getRange(),r=n.min,i=(e-r)/(n.max-r),a=this.getRailBBox(t),o={x:0,y:0};return this.isVertical()?(o.x=a.minX+a.width/2,o.y=Xb(a.minY,a.maxY,i)):(o.x=Xb(a.minX,a.maxX,i),o.y=a.minY+a.height/2),o},t.prototype.getRailShape=function(e){return(e||this.get("group")).findById(this.getElementId("rail"))},t.prototype.getRailBBox=function(e){return this.getRailShape(e).getBBox()},t.prototype.getRailCanvasBBox=function(){return this.get("group").findById(this.getElementId("rail")).getCanvasBBox()},t.prototype.isVertical=function(){return"vertical"===this.get("layout")},t.prototype.getValueByCanvasPoint=function(e,t){var n=this.getRange(),r=n.min,i=n.max,a=this.getRailCanvasBBox(),o=this.isVertical(),s=this.get("step"),l=Xb(r,i,o?(t-a.minY)/a.height:(e-a.minX)/a.width);s&&(l=r+Math.round((l-r)/s)*s);return l>i&&(l=i),l<r&&(l=r),l},t.prototype.getCurrentValue=function(){var e=this.get("value");if(!e){var t=this.get("values");return t?[Math.max(Math.min.apply(Math,Lh(t,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,Lh(t,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return e},t.prototype.resetHandlers=function(e){var t=this.getCurrentValue(),n=t[0],r=t[1];this.resetHandler(e,"min",n),this.resetHandler(e,"max",r)},t.prototype.getHandlerPath=function(e,t){var n=this.isVertical(),r=[],i=e.size,a=t.x,o=t.y,s=1.4*i,l=i/2,c=i/6;if(n){var u=a+.4*s;r.push(["M",a,o]),r.push(["L",u,o+l]),r.push(["L",a+s,o+l]),r.push(["L",a+s,o-l]),r.push(["L",u,o-l]),r.push(["Z"]),r.push(["M",u,o+c]),r.push(["L",a+s-2,o+c]),r.push(["M",u,o-c]),r.push(["L",a+s-2,o-c])}else{var h=o+.4*s;r.push(["M",a,o]),r.push(["L",a-l,h]),r.push(["L",a-l,o+s]),r.push(["L",a+l,o+s]),r.push(["L",a+l,h]),r.push(["Z"]),r.push(["M",a-c,h]),r.push(["L",a-c,o+s-2]),r.push(["M",a+c,h]),r.push(["L",a+c,o+s-2])}return r},t.prototype.resetHandler=function(e,t,n){var r=this.getPointByValue(n,e),i=this.get("handler"),a=this.getHandlerPath(i,r),o=this.getElementId("handler-"+t),s=e.findById(o),l=this.isVertical();s?s.attr("path",a):this.addShape(e,{type:"path",name:"legend-handler-"+t,draggable:!0,id:o,attrs:Nh(Nh({path:a},i.style),{cursor:l?"ns-resize":"ew-resize"})})},t.prototype.fixedElements=function(e){var t=e.findById(this.getElementId("rail")),n=e.findById(this.getElementId("label-min")),r=e.findById(this.getElementId("label-max")),i=this.getDrawPoint();this.isVertical()?this.fixedVertail(n,r,t,i):this.fixedHorizontal(n,r,t,i)},t.prototype.fitRailLength=function(e,t,n,r){var i=this.isVertical()?"height":"width",a=this.get("label"),o=a.align,s=a.spacing,l=this.get("max"+Ap(i));if(l){var c=("rail"===o?n[i]+e[i]+t[i]+2*s:n[i])-l;c>0&&this.changeRailLength(r,i,n[i]-c)}},t.prototype.changeRailLength=function(e,t,n){var r,i=e.getBBox();r="height"===t?this.getRailPath(i.x,i.y,i.width,n):this.getRailPath(i.x,i.y,n,i.height),e.attr("path",r)},t.prototype.changeRailPosition=function(e,t,n){var r=e.getBBox(),i=this.getRailPath(t,n,r.width,r.height);e.attr("path",i)},t.prototype.fixedHorizontal=function(e,t,n,r){var i=this.get("label"),a=i.align,o=i.spacing,s=n.getBBox(),l=e.getBBox(),c=t.getBBox(),u=s.height;this.fitRailLength(l,c,s,n),s=n.getBBox(),"rail"===a?(e.attr({x:r.x,y:r.y+u/2}),this.changeRailPosition(n,r.x+l.width+o,r.y),t.attr({x:r.x+l.width+s.width+2*o,y:r.y+u/2})):"top"===a?(e.attr({x:r.x,y:r.y}),t.attr({x:r.x+s.width,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+o)):(this.changeRailPosition(n,r.x,r.y),e.attr({x:r.x,y:r.y+s.height+o}),t.attr({x:r.x+s.width,y:r.y+s.height+o}))},t.prototype.fixedVertail=function(e,t,n,r){var i=this.get("label"),a=i.align,o=i.spacing,s=n.getBBox(),l=e.getBBox(),c=t.getBBox();if(this.fitRailLength(l,c,s,n),s=n.getBBox(),"rail"===a)e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+o),t.attr({x:r.x,y:r.y+l.height+s.height+2*o});else if("right"===a)e.attr({x:r.x+s.width+o,y:r.y}),this.changeRailPosition(n,r.x,r.y),t.attr({x:r.x+s.width+o,y:r.y+s.height});else{var u=Math.max(l.width,c.width);e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x+u+o,r.y),t.attr({x:r.x,y:r.y+s.height})}},t}(KC),tT="g2-tooltip-title",nT="g2-tooltip-list",rT="g2-tooltip-crosshair-x",iT="g2-tooltip-crosshair-y",aT=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CONTAINER_CLASS:"g2-tooltip",TITLE_CLASS:tT,LIST_CLASS:nT,LIST_ITEM_CLASS:"g2-tooltip-list-item",MARKER_CLASS:"g2-tooltip-marker",VALUE_CLASS:"g2-tooltip-value",NAME_CLASS:"g2-tooltip-name",CROSSHAIR_X:rT,CROSSHAIR_Y:iT}),oT=((WC={})["g2-tooltip"]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:cC.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},WC[""+tT]={marginBottom:"4px"},WC[""+nT]={margin:"0px",listStyleType:"none",padding:"0px"},WC["g2-tooltip-list-item"]={listStyleType:"none",marginBottom:"4px"},WC["g2-tooltip-marker"]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},WC["g2-tooltip-value"]={display:"inline-block",float:"right",marginLeft:"30px"},WC[""+rT]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},WC[""+iT]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},WC);var sT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="g2-tooltip"><div class="'+tT+'"></div><ul class="'+nT+'"></ul></div>',itemTpl:'<li class="g2-tooltip-list-item" data-index={index}>\n          <span class="g2-tooltip-marker" style="background:{color}"></span>\n          <span class="g2-tooltip-name">{name}</span>:\n          <span class="g2-tooltip-value">{value}</span>\n        </li>',xCrosshairTpl:'<div class="'+rT+'"></div>',yCrosshairTpl:'<div class="'+iT+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:"g2-tooltip",crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:oT})},t.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},t.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},t.prototype.show=function(){var e=this.getContainer();e&&!this.destroyed&&(this.set("visible",!0),Rd(e,{visibility:"visible"}),this.setCrossHairsVisible(!0))},t.prototype.hide=function(){var e=this.getContainer();e&&!this.destroyed&&(this.set("visible",!1),Rd(e,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},t.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetPosition()},t.prototype.setCrossHairsVisible=function(e){var t=e?"":"none",n=this.get("xCrosshairDom"),r=this.get("yCrosshairDom");n&&Rd(n,{display:t}),r&&Rd(r,{display:t})},t.prototype.initContainer=function(){if(e.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},t.prototype.updateInner=function(t){var n,r;this.get("customContent")?this.renderCustomContent():(n=t,r=!1,Uh(["title","showTitle"],(function(e){if(Tp(n,e))return r=!0,!1})),r&&this.resetTitle(),Tp(t,"items")&&this.renderItems()),e.prototype.updateInner.call(this,t)},t.prototype.initDom=function(){this.cacheDoms()},t.prototype.removeDom=function(){e.prototype.removeDom.call(this),this.clearCrosshairs()},t.prototype.resetPosition=function(){var e,t=this.get("x"),n=this.get("y"),r=this.get("offset"),i=this.getOffset(),a=i.offsetX,o=i.offsetY,s=this.get("position"),l=this.get("region"),c=this.getContainer(),u=this.getBBox(),h=u.width,p=u.height;l&&(e=Vb(l));var d=function(e,t,n,r,i,a,o){var s=function(e,t,n,r,i,a){var o=e,s=t;switch(a){case"left":o=e-r-n,s=t-i/2;break;case"right":o=e+n,s=t-i/2;break;case"top":o=e-r/2,s=t-i-n;break;case"bottom":o=e-r/2,s=t+n;break;default:o=e+n,s=t-i-n}return{x:o,y:s}}(e,t,n,r,i,a);if(o){var l=function(e,t,n,r,i){return{left:e<i.x,right:e+n>i.x+i.width,top:t<i.y,bottom:t+r>i.y+i.height}}(s.x,s.y,r,i,o);"auto"===a?(l.right&&(s.x=Math.max(0,e-r-n)),l.top&&(s.y=Math.max(0,t-i-n))):"top"===a||"bottom"===a?(l.left&&(s.x=o.x),l.right&&(s.x=o.x+o.width-r),"top"===a&&l.top&&(s.y=t+n),"bottom"===a&&l.bottom&&(s.y=t-i-n)):(l.top&&(s.y=o.y),l.bottom&&(s.y=o.y+o.height-i),"left"===a&&l.left&&(s.x=e+n),"right"===a&&l.right&&(s.x=e-r-n))}return s}(t,n,r,h,p,s,e);Rd(c,{left:Zb(d.x+a),top:Zb(d.y+o)}),this.resetCrosshairs()},t.prototype.renderCustomContent=function(){var e=this.getHtmlContentNode(),t=this.get("parent"),n=this.get("container");n&&n.parentNode===t?t.replaceChild(e,n):t.appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()},t.prototype.getHtmlContentNode=function(){var e,t=this.get("customContent");if(t){var n=t(this.get("title"),this.get("items"));e=Lp(n)?n:Nd(n)}return e},t.prototype.cacheDoms=function(){var e=this.getContainer(),t=e.getElementsByClassName(tT)[0],n=e.getElementsByClassName(nT)[0];this.set("titleDom",t),this.set("listDom",n)},t.prototype.resetTitle=function(){var e=this.get("title");this.get("showTitle")&&e?this.setTitle(e):this.setTitle("")},t.prototype.setTitle=function(e){var t=this.get("titleDom");t&&(t.innerText=e)},t.prototype.resetCrosshairs=function(){var e=this.get("crosshairsRegion"),t=this.get("crosshairs");if(e&&t){var n=Vb(e),r=this.get("xCrosshairDom"),i=this.get("yCrosshairDom");"x"===t?(this.resetCrosshair("x",n),i&&(i.remove(),this.set("yCrosshairDom",null))):"y"===t?(this.resetCrosshair("y",n),r&&(r.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",n),this.resetCrosshair("y",n)),this.setCrossHairsVisible(this.get("visible"))}else this.clearCrosshairs()},t.prototype.resetCrosshair=function(e,t){var n=this.checkCrosshair(e),r=this.get(e);Rd(n,"x"===e?{left:Zb(r),top:Zb(t.y),height:Zb(t.height)}:{top:Zb(r),left:Zb(t.x),width:Zb(t.width)})},t.prototype.checkCrosshair=function(e){var t=e+"CrosshairDom",n=e+"CrosshairTpl",r="CROSSHAIR_"+e.toUpperCase(),i=aT[r],a=this.get(t),o=this.get("parent");return a||(a=Nd(this.get(n)),this.applyStyle(i,a),o.appendChild(a),this.set(t,a)),a},t.prototype.renderItems=function(){this.clearItemDoms();var e=this.get("items"),t=this.get("itemTpl"),n=this.get("listDom");n&&(Uh(e,(function(e){var r=oy.toCSSGradient(e.color),i=Nh(Nh({},e),{color:r}),a=Nd(_p(t,i));n.appendChild(a)})),this.applyChildrenStyles(n,this.get("domStyles")))},t.prototype.clearItemDoms=function(){this.get("listDom")&&Ub(this.get("listDom"))},t.prototype.clearCrosshairs=function(){var e=this.get("xCrosshairDom"),t=this.get("yCrosshairDom");e&&e.remove(),t&&t.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},t}(xC),lT={opacity:0},cT={stroke:"#C5C5C5",strokeOpacity:.85},uT={fill:"#CACED4",opacity:.85};function hT(e){return function(e){return Wp(e,(function(e,t){return[0===t?"M":"L",e[0],e[1]]}))}(e)}function pT(e,t,n,r){void 0===r&&(r=!0);var i=new Zy({values:e}),a=new my({values:Wp(e,(function(e,t){return t}))}),o=Wp(e,(function(e,r){return[a.scale(r)*t,n-i.scale(e)*n]}));return r?function(e){if(e.length<=2)return hT(e);var t=[];Uh(e,(function(e){Vp(e,t.slice(t.length-2))||t.push(e[0],e[1])}));var n=hv(t,!1),r=lp(e),i=r[0],a=r[1];return n.unshift(["M",i,a]),n}(o):hT(o)}function dT(e,t,n,r){var i=Lh(e),a=function(e,t){var n=new Zy({values:e}),r=Math.max(0,n.min);return t-n.scale(r)*t}(r,n);return i.push(["L",t,a]),i.push(["L",0,a]),i.push(["Z"]),i}var fT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:lT,lineStyle:cT,areaStyle:uT})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.data,a=t.smooth,o=t.isArea,s=t.backgroundStyle,l=t.lineStyle,c=t.areaStyle;this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:Nh({x:0,y:0,width:n,height:r},s)});var u=pT(i,n,r,a);if(this.addShape(e,{id:this.getElementId("line"),type:"path",attrs:Nh({path:u},l)}),o){var h=dT(u,n,r,i);this.addShape(e,{id:this.getElementId("area"),type:"path",attrs:Nh({path:h},c)})}},t.prototype.applyOffset=function(){var e=this.cfg,t=e.x,n=e.y;this.moveElementTo(this.get("group"),{x:t,y:n})},t}(iC),mT={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},gT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"handler",x:0,y:0,width:10,height:24,style:mT})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.style,a=i.fill,o=i.stroke,s=i.radius,l=i.opacity,c=i.cursor;this.addShape(e,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:n,height:r,fill:a,stroke:o,radius:s,opacity:l,cursor:c}});var u=1/3*n,h=2/3*n,p=1/4*r,d=3/4*r;this.addShape(e,{id:this.getElementId("line-left"),type:"line",attrs:{x1:u,y1:p,x2:u,y2:d,stroke:o,cursor:c}}),this.addShape(e,{id:this.getElementId("line-right"),type:"line",attrs:{x1:h,y1:p,x2:h,y2:d,stroke:o,cursor:c}})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.bindEvents=function(){var e=this;this.get("group").on("mouseenter",(function(){var t=e.get("style").highLightFill;e.getElementByLocalId("background").attr("fill",t),e.draw()})),this.get("group").on("mouseleave",(function(){var t=e.get("style").fill;e.getElementByLocalId("background").attr("fill",t),e.draw()}))},t.prototype.draw=function(){var e=this.get("container").get("canvas");e&&e.draw()},t}(iC),vT={fill:"#416180",opacity:.05},yT={fill:"#5B8FF9",opacity:.15,cursor:"move"},xT={width:10,height:24},ET={textBaseline:"middle",fill:"#000",opacity:.45},bT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){return function(n){t.currentTarget=e;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),t.prevX=qp(r,"touches.0.pageX",r.pageX),t.prevY=qp(r,"touches.0.pageY",r.pageY);var i=t.getContainerDOM();i.addEventListener("mousemove",t.onMouseMove),i.addEventListener("mouseup",t.onMouseUp),i.addEventListener("mouseleave",t.onMouseUp),i.addEventListener("touchmove",t.onMouseMove),i.addEventListener("touchend",t.onMouseUp),i.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(e){var n=t.cfg.width,r=[t.get("start"),t.get("end")];e.stopPropagation(),e.preventDefault();var i=qp(e,"touches.0.pageX",e.pageX),a=qp(e,"touches.0.pageY",e.pageY),o=i-t.prevX,s=t.adjustOffsetRange(o/n);t.updateStartEnd(s),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=i,t.prevY=a,t.draw(),t.emit("sliderchange",[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:r,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var e=t.getContainerDOM();e&&(e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseup",t.onMouseUp),e.removeEventListener("mouseleave",t.onMouseUp),e.removeEventListener("touchmove",t.onMouseMove),e.removeEventListener("touchend",t.onMouseUp),e.removeEventListener("touchcancel",t.onMouseUp))},t}return Mh(t,e),t.prototype.setRange=function(e,t){this.set("minLimit",e),this.set("maxLimit",t);var n=this.get("start"),r=this.get("end"),i=mp(n,e,t),a=mp(r,e,t);this.get("isInit")||n===i&&r===a||this.setValue([i,a])},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var t=this.getRange();if($h(e)&&2===e.length){var n=[this.get("start"),this.get("end")];this.update({start:mp(e[0],t.min,t.max),end:mp(e[1],t.min,t.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:n,value:e})}},t.prototype.getValue=function(){return[this.get("start"),this.get("end")]},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:vT,foregroundStyle:yT,handlerStyle:xT,textStyle:ET}})},t.prototype.update=function(t){var n=t.start,r=t.end,i=Nh({},t);Gh(n)||(i.start=mp(n,0,1)),Gh(r)||(i.end=mp(r,0,1)),e.prototype.update.call(this,i),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},t.prototype.init=function(){this.set("start",mp(this.get("start"),0,1)),this.set("end",mp(this.get("end"),0,1)),e.prototype.init.call(this)},t.prototype.render=function(){e.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},t.prototype.renderInner=function(e){var t=this.cfg;t.start,t.end;var n=t.width,r=t.height,i=t.trendCfg,a=void 0===i?{}:i,o=t.minText,s=t.maxText,l=t.backgroundStyle,c=void 0===l?{}:l,u=t.foregroundStyle,h=void 0===u?{}:u,p=t.textStyle,d=void 0===p?{}:p,f=jp({},mT,this.cfg.handlerStyle);id(qp(a,"data"))&&(this.trend=this.addComponent(e,Nh({component:fT,id:this.getElementId("trend"),x:0,y:0,width:n,height:r},a))),this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:Nh({x:0,y:0,width:n,height:r},c)}),this.addShape(e,{id:this.getElementId("minText"),type:"text",attrs:Nh({y:r/2,textAlign:"right",text:o,silent:!1},d)}),this.addShape(e,{id:this.getElementId("maxText"),type:"text",attrs:Nh({y:r/2,textAlign:"left",text:s,silent:!1},d)}),this.addShape(e,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:Nh({y:0,height:r},h)});var m=qp(f,"width",10),g=qp(f,"height",24);this.minHandler=this.addComponent(e,{component:gT,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(r-g)/2,width:m,height:g,cursor:"ew-resize",style:f}),this.maxHandler=this.addComponent(e,{component:gT,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(r-g)/2,width:m,height:g,cursor:"ew-resize",style:f})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.updateUI=function(e,t,n){var r=this.cfg,i=r.start,a=r.end,o=r.width,s=r.minText,l=r.maxText,c=r.handlerStyle,u=r.height,h=i*o,p=a*o;this.trend&&(this.trend.update({width:o,height:u}),this.get("updateAutoRender")||this.trend.render()),e.attr("x",h),e.attr("width",p-h);var d=qp(c,"width",10);t.attr("text",s),n.attr("text",l);var f=this._dodgeText([h,p],t,n),m=f[0],g=f[1];this.minHandler&&(this.minHandler.update({x:h-d/2}),this.get("updateAutoRender")||this.minHandler.render()),Uh(m,(function(e,n){return t.attr(n,e)})),this.maxHandler&&(this.maxHandler.update({x:p-d/2}),this.get("updateAutoRender")||this.maxHandler.render()),Uh(g,(function(e,t){return n.attr(t,e)}))},t.prototype.bindEvents=function(){var e=this.get("group");e.on("handler-min:mousedown",this.onMouseDown("minHandler")),e.on("handler-min:touchstart",this.onMouseDown("minHandler")),e.on("handler-max:mousedown",this.onMouseDown("maxHandler")),e.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var t=e.findById(this.getElementId("foreground"));t.on("mousedown",this.onMouseDown("foreground")),t.on("touchstart",this.onMouseDown("foreground"))},t.prototype.adjustOffsetRange=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case"minHandler":var i=0-n,a=1-n;return Math.min(a,Math.max(i,e));case"maxHandler":i=0-r,a=1-r;return Math.min(a,Math.max(i,e));case"foreground":i=0-n,a=1-r;return Math.min(a,Math.max(i,e))}},t.prototype.updateStartEnd=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case"minHandler":n+=e;break;case"maxHandler":r+=e;break;case"foreground":n+=e,r+=e}this.set("start",n),this.set("end",r)},t.prototype._dodgeText=function(e,t,n){var r,i,a=this.cfg,o=a.handlerStyle,s=a.width,l=qp(o,"width",10),c=e[0],u=e[1],h=!1;c>u&&(c=(r=[u,c])[0],u=r[1],t=(i=[n,t])[0],n=i[1],h=!0);var p=t.getBBox(),d=n.getBBox(),f=p.width>c-2?{x:c+l/2+2,textAlign:"left"}:{x:c-l/2-2,textAlign:"right"},m=d.width>s-u-2?{x:u-l/2-2,textAlign:"right"}:{x:u+l/2+2,textAlign:"left"};return h?[m,f]:[f,m]},t.prototype.draw=function(){var e=this.get("container"),t=e&&e.get("canvas");t&&t.draw()},t.prototype.getContainerDOM=function(){var e=this.get("container"),t=e&&e.get("canvas");return t&&t.get("container")},t}(iC),CT={default:{trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},hover:{thumbColor:"rgba(0,0,0,0.2)"}},TT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clearEvents=rd,t.onStartEvent=function(e){return function(n){t.isMobile=e,n.originalEvent.preventDefault();var r=e?qp(n.originalEvent,"touches.0.clientX"):n.clientX,i=e?qp(n.originalEvent,"touches.0.clientY"):n.clientY;t.startPos=t.cfg.isHorizontal?r:i,t.bindLaterEvent()}},t.bindLaterEvent=function(){var e=t.getContainerDOM(),n=[];n=t.isMobile?[Md(e,"touchmove",t.onMouseMove),Md(e,"touchend",t.onMouseUp),Md(e,"touchcancel",t.onMouseUp)]:[Md(e,"mousemove",t.onMouseMove),Md(e,"mouseup",t.onMouseUp),Md(e,"mouseleave",t.onMouseUp)],t.clearEvents=function(){n.forEach((function(e){e.remove()}))}},t.onMouseMove=function(e){var n=t.cfg,r=n.isHorizontal,i=n.thumbOffset;e.preventDefault();var a=t.isMobile?qp(e,"touches.0.clientX"):e.clientX,o=t.isMobile?qp(e,"touches.0.clientY"):e.clientY,s=r?a:o,l=s-t.startPos;t.startPos=s,t.updateThumbOffset(i+l)},t.onMouseUp=function(e){e.preventDefault(),t.clearEvents()},t.onTrackClick=function(e){var n=t.cfg,r=n.isHorizontal,i=n.x,a=n.y,o=n.thumbLen,s=t.getContainerDOM().getBoundingClientRect(),l=e.clientX,c=e.clientY,u=r?l-s.left-i-o/2:c-s.top-a-o/2,h=t.validateRange(u);t.updateThumbOffset(h)},t.onThumbMouseOver=function(){var e=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t.onThumbMouseOut=function(){var e=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t}return Mh(t,e),t.prototype.setRange=function(e,t){this.set("minLimit",e),this.set("maxLimit",t);var n=this.getValue(),r=mp(n,e,t);n===r||this.get("isInit")||this.setValue(r)},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var t=this.getRange(),n=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*mp(e,t.min,t.max)}),this.delegateEmit("valuechange",{originalValue:n,value:this.getValue()})},t.prototype.getValue=function(){return mp(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Nh(Nh({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:CT})},t.prototype.renderInner=function(e){this.renderTrackShape(e),this.renderThumbShape(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.renderTrackShape=function(e){var t=this.cfg,n=t.trackLen,r=t.theme,i=jp({},CT,void 0===r?{default:{}}:r).default,a=i.lineCap,o=i.trackColor,s=i.size,l=qp(this.cfg,"size",s),c=this.get("isHorizontal")?{x1:0+l/2,y1:l/2,x2:n-l/2,y2:l/2,lineWidth:l,stroke:o,lineCap:a}:{x1:l/2,y1:0+l/2,x2:l/2,y2:n-l/2,lineWidth:l,stroke:o,lineCap:a};return this.addShape(e,{id:this.getElementId("track"),name:"track",type:"line",attrs:c})},t.prototype.renderThumbShape=function(e){var t=this.cfg,n=t.thumbOffset,r=t.thumbLen,i=t.theme,a=jp({},CT,i).default,o=a.size,s=a.lineCap,l=a.thumbColor,c=qp(this.cfg,"size",o),u=this.get("isHorizontal")?{x1:n+c/2,y1:c/2,x2:n+r-c/2,y2:c/2,lineWidth:c,stroke:l,lineCap:s,cursor:"default"}:{x1:c/2,y1:n+c/2,x2:c/2,y2:n+r-c/2,lineWidth:c,stroke:l,lineCap:s,cursor:"default"};return this.addShape(e,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:u})},t.prototype.bindEvents=function(){var e=this.get("group");e.on("mousedown",this.onStartEvent(!1)),e.on("mouseup",this.onMouseUp),e.on("touchstart",this.onStartEvent(!0)),e.on("touchend",this.onMouseUp),e.findById(this.getElementId("track")).on("click",this.onTrackClick);var t=e.findById(this.getElementId("thumb"));t.on("mouseover",this.onThumbMouseOver),t.on("mouseout",this.onThumbMouseOut)},t.prototype.getContainerDOM=function(){var e=this.get("container"),t=e&&e.get("canvas");return t&&t.get("container")},t.prototype.validateRange=function(e){var t=this.cfg,n=t.thumbLen,r=t.trackLen,i=e;return e+n>r?i=r-n:e+n<n&&(i=0),i},t.prototype.draw=function(){var e=this.get("container"),t=e&&e.get("canvas");t&&t.draw()},t.prototype.updateThumbOffset=function(e){var t=this.cfg,n=t.thumbOffset,r=t.isHorizontal,i=t.thumbLen,a=t.size,o=this.validateRange(e);if(o!==n){var s=this.getElementByLocalId("thumb");r?s.attr({x1:o+a/2,x2:o+i-a/2}):s.attr({y1:o+a/2,y2:o+i-a/2}),this.emitOffsetChange(o)}},t.prototype.emitOffsetChange=function(e){var t=this.cfg,n=t.thumbOffset,r=t.trackLen,i=t.thumbLen;this.cfg.thumbOffset=e,this.emit("scrollchange",{thumbOffset:e,ratio:mp(e/(r-i),0,1)}),this.delegateEmit("valuechange",{originalValue:n,value:e})},t}(iC),wT=BC,ST=zC,kT=qC,_T=XC,AT=JC,OT=eT,IT=sT;function MT(e){return 1===Array.from(new Set(e)).length}function NT(e){return(ep(e)+Jh(e))/2}function FT(e,t,n,r){return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function LT(e,t,n,r,i,a){void 0===a&&(a=0);var o=FT(e,t,n,r),s=FT(e,t,n,i),l=FT(e,t,a,r),c=FT(e,t,a,i);if(i-r==2*Math.PI){var u=FT(e,t,n,r+Math.PI),h=FT(e,t,a,r+Math.PI),p=[["M",o.x,o.y],["A",n,n,0,1,1,u.x,u.y],["A",n,n,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(p.push(["A",a,a,0,1,0,h.x,h.y]),p.push(["A",a,a,0,1,0,c.x,c.y])),p.push(["M",o.x,o.y]),p.push(["Z"]),p}var d=i-r<=Math.PI?0:1,f=[["M",o.x,o.y],["A",n,n,0,d,1,s.x,s.y],["L",c.x,c.y]];return a&&f.push(["A",a,a,0,d,0,l.x,l.y]),f.push(["L",o.x,o.y]),f.push(["Z"]),f}function PT(e,t,n,r,i){var a=FT(e,t,n,r),o=FT(e,t,n,i);if(yp(i-r,2*Math.PI)){var s=FT(e,t,n,r+Math.PI);return[["M",a.x,a.y],["A",n,n,0,1,1,s.x,s.y],["A",n,n,0,1,1,a.x,a.y],["A",n,n,0,1,0,s.x,s.y],["A",n,n,0,1,0,a.x,a.y],["Z"]]}var l=i-r<=Math.PI?0:1;return[["M",a.x,a.y],["A",n,n,0,l,1,o.x,o.y]]}function RT(e,t){var n,r,i=function(e){if(Yp(e))return null;var t=e[0].x,n=e[0].x,r=e[0].y,i=e[0].y;return Uh(e,(function(e){t=t>e.x?e.x:t,n=n<e.x?e.x:n,r=r>e.y?e.y:r,i=i<e.y?e.y:i})),{minX:t,maxX:n,minY:r,maxY:i,centerX:(t+n)/2,centerY:(r+i)/2}}(e.points),a=t.startAngle,o=t.endAngle-a;return t.isTransposed?(n=i.maxY*o,r=i.minY*o):(n=i.maxX*o,r=i.minX*o),{startAngle:r+=a,endAngle:n+=a}}function DT(e,t){var n=e.attr(),r=t.attr();return Uh(n,(function(e,t){void 0===r[t]&&(r[t]=void 0)})),r}function BT(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}function zT(e,t){return"object"==typeof e&&t.forEach((function(t){delete e[t]})),e}function HT(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=new Map);for(var r=0,i=e;r<i.length;r++){var a=i[r];n.has(a)||(t.push(a),n.set(a,!0))}return t}var jT=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=e,this.y=t,this.height=r,this.width=n}return e.fromRange=function(t,n,r,i){return new e(t,n,r-t,i-n)},e.fromObject=function(t){return new e(t.minX,t.minY,t.width,t.height)},Object.defineProperty(e.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},e.prototype.contains=function(e){return e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return Uh(e,(function(e){n.x=Math.min(e.x,n.x),n.y=Math.min(e.y,n.y),n.width=Math.max(e.maxX,n.maxX)-n.x,n.height=Math.max(e.maxY,n.maxY)-n.y})),n},e.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return Uh(e,(function(e){n.x=Math.max(e.x,n.x),n.y=Math.max(e.y,n.y),n.width=Math.min(e.maxX,n.maxX)-n.x,n.height=Math.min(e.maxY,n.maxY)-n.y})),n},e.prototype.cut=function(t,n){var r=t.width,i=t.height;switch(n){case sd.TOP:case sd.TOP_LEFT:case sd.TOP_RIGHT:return e.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case sd.RIGHT:case sd.RIGHT_TOP:case sd.RIGHT_BOTTOM:return e.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case sd.BOTTOM:case sd.BOTTOM_LEFT:case sd.BOTTOM_RIGHT:return e.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case sd.LEFT:case sd.LEFT_TOP:case sd.LEFT_BOTTOM:return e.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},e.prototype.shrink=function(t){var n=t[0],r=t[1],i=t[2],a=t[3];return new e(this.x+a,this.y+n,this.width-a-r,this.height-n-i)},e.prototype.expand=function(t){var n=t[0],r=t[1],i=t[2],a=t[3];return new e(this.x-a,this.y-n,this.width+a+r,this.height+n+i)},e.prototype.exceed=function(e){return[Math.max(-this.minY+e.minY,0),Math.max(this.maxX-e.maxX,0),Math.max(this.maxY-e.maxY,0),Math.max(-this.minX+e.minX,0)]},e.prototype.collide=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},e.prototype.size=function(){return this.width*this.height},e.prototype.isPointIn=function(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY},e}();function GT(e){if(e.isPolar&&!e.isTransposed)return(e.endAngle-e.startAngle)*e.getRadius();var t=e.convert({x:0,y:0}),n=e.convert({x:1,y:0});return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function $T(e,t){var n=e.getCenter();return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function YT(e,t){var n=!1;if(e)if("theta"===e.type){var r=e.start,i=e.end;n=BT(t.x,r.x,i.x)&&BT(t.y,r.y,i.y)}else{var a=e.invert(t);n=BT(a.x,0,1)&&BT(a.y,0,1)}return n}function UT(e,t){var n=e.getCenter();return Math.atan2(t.y-n.y,t.x-n.x)}function VT(e,t){void 0===t&&(t=0);var n,r=e.start,i=e.end,a=e.getWidth(),o=e.getHeight();if(e.isPolar){var s=e.startAngle,l=e.endAngle,c=e.getCenter(),u=e.getRadius();return{type:"path",startState:{path:LT(c.x,c.y,u+t,s,s)},endState:function(e){var n=(l-s)*e+s;return{path:LT(c.x,c.y,u+t,s,n)}},attrs:{path:LT(c.x,c.y,u+t,s,l)}}}return n=e.isTransposed?{height:o+2*t}:{width:a+2*t},{type:"rect",startState:{x:r.x-t,y:i.y-t,width:e.isTransposed?a+2*t:0,height:e.isTransposed?0:o+2*t},endState:n,attrs:{x:r.x-t,y:i.y-t,width:a+2*t,height:o+2*t}}}var WT=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function XT(e,t,n){var r=t||[];if(vp(e)||Gh(function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r][t];if(!Gh(i)){n=$h(i)?i[0]:i;break}}return n}(r,e))&&Yp(n))return new(lx("identity"))({field:e.toString(),values:[e]});var i=sp(r,e);return new(lx(qp(n,"type",function(e){var t="linear";return WT.test(e)?t="timeCat":ap(e)&&(t="cat"),t}(i[0]))))(Nh({field:e,values:i},n))}function qT(e){return e.alias||e.field}function KT(e,t,n){var r,i=e.values.length;if(1===i)r=[.5,1];else{var a=0;r=function(e){if(e.isPolar){var t=e.startAngle;return e.endAngle-t==2*Math.PI}return!1}(t)?t.isTransposed?[(a=1/i*qp(n,"widthRatio.multiplePie",1/1.3))/2,1-a/2]:[0,1-1/i]:[a=1/i/2,1-a]}return r}function QT(e,t){var n={start:{x:0,y:0},end:{x:0,y:0}};e.isRect?n=function(e){var t,n;switch(e){case sd.TOP:t={x:0,y:1},n={x:1,y:1};break;case sd.RIGHT:t={x:1,y:0},n={x:1,y:1};break;case sd.BOTTOM:t={x:0,y:0},n={x:1,y:0};break;case sd.LEFT:t={x:0,y:0},n={x:0,y:1};break;default:t=n={x:0,y:0}}return{start:t,end:n}}(t):e.isPolar&&(n=function(e){var t,n;return e.isTransposed?(t={x:0,y:0},n={x:1,y:0}):(t={x:0,y:0},n={x:0,y:1}),{start:t,end:n}}(e));var r=n.start,i=n.end;return{start:e.convert(r),end:e.convert(i)}}function ZT(e){var t=e.start,n=e.end;return t.x===n.x}function JT(e,t){var n=e.start,r=e.end;return ZT(e)?(n.y-r.y)*(t.x-n.x)>0?1:-1:(r.x-n.x)*(n.y-t.y)>0?-1:1}function ew(e,t){var n=qp(e,["components","axis"],{});return jp({},qp(n,["common"],{}),jp({},qp(n,[t],{})))}function tw(e,t,n){var r=qp(e,["components","axis"],{});return jp({},qp(r,["common","title"],{}),jp({},qp(r,[t,"title"],{})),n)}function nw(e){var t=e.x,n=e.y,r=e.circleCenter,i=n.start>n.end,a=e.isTransposed?e.convert({x:i?0:1,y:0}):e.convert({x:0,y:i?0:1}),o=[a.x-r.x,a.y-r.y],s=[1,0],l=a.y>r.y?Kf(o,s):-1*Kf(o,s),c=l+(t.end-t.start);return{center:r,radius:Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2)),startAngle:l,endAngle:c}}function rw(e,t){return Ip(e)?!1!==e&&{}:qp(e,[t])}function iw(e,t){return qp(e,"position",t)}function aw(e,t){return qp(t,["title","text"],qT(e))}var ow=function(){function e(e,t){this.destroyed=!1,this.facets=[],this.view=e,this.cfg=jp({},this.getDefaultCfg(),t)}return e.prototype.init=function(){this.container||(this.container=this.createContainer());var e=this.view.getData();this.facets=this.generateFacets(e)},e.prototype.render=function(){this.renderViews()},e.prototype.update=function(){},e.prototype.clear=function(){this.clearFacetViews()},e.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},e.prototype.facetToView=function(e){var t=e.region,n=e.data,r=e.padding,i=void 0===r?this.cfg.padding:r,a=this.view.createView({region:t,padding:i});a.data(n||[]),e.view=a,this.beforeEachView(a,e);var o=this.cfg.eachView;return o&&o(a,e),this.afterEachView(a,e),a},e.prototype.createContainer=function(){return this.view.getLayer(ad.FORE).addGroup()},e.prototype.renderViews=function(){this.createFacetViews()},e.prototype.createFacetViews=function(){var e=this;return this.facets.map((function(t){return e.facetToView(t)}))},e.prototype.clearFacetViews=function(){var e=this;Uh(this.facets,(function(t){t.view&&(e.view.removeView(t.view),t.view=void 0)}))},e.prototype.parseSpacing=function(){var e=this.view.viewBBox,t=e.width,n=e.height;return this.cfg.spacing.map((function(e,r){return vp(e)?e/(0===r?t:n):parseFloat(e)/100}))},e.prototype.getFieldValues=function(e,t){var n=[],r={};return Uh(e,(function(e){var i=e[t];Gh(i)||r[i]||(n.push(i),r[i]=!0)})),n},e.prototype.getRegion=function(e,t,n,r){var i=this.parseSpacing(),a=i[0],o=i[1],s=(1+a)/(0===t?1:t)-a,l=(1+o)/(0===e?1:e)-o,c={x:(s+a)*n,y:(l+o)*r};return{start:c,end:{x:c.x+s,y:c.y+l}}},e.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},e.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:"#666",fontFamily:this.view.getTheme().fontFamily}}},e.prototype.processAxis=function(e,t){var n=e.getOptions(),r=n.coordinate,i=e.geometries;if("rect"===qp(r,"type","rect")&&i.length){Gh(n.axes)&&(n.axes={});var a=n.axes,o=i[0].getXYFields(),s=o[0],l=o[1],c=rw(a,s),u=rw(a,l);!1!==c&&(n.axes[s]=this.getXAxisOption(s,a,c,t)),!1!==u&&(n.axes[l]=this.getYAxisOption(l,a,u,t))}},e.prototype.getFacetDataFilter=function(e){return function(t){return up(e,(function(e){var n=e.field,r=e.value;return!(!Gh(r)&&n)||t[n]===r}))}},e}(),sw={},lw=function(e,t){sw[kp(e)]=t},cw=function(){function e(e,t){this.context=e,this.cfg=t,e.addAction(this)}return e.prototype.applyCfg=function(e){Rp(this,e)},e.prototype.init=function(){this.applyCfg(this.cfg)},e.prototype.destroy=function(){this.context.removeAction(this),this.context=null},e}(),uw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.execute=function(){this.callback&&this.callback(this.context)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.callback=null},t}(cw),hw={};function pw(e){var t=hw[e];return qp(t,"ActionClass")}function dw(e,t,n){hw[e]={ActionClass:t,cfg:n}}function fw(e,t){var n=new uw(t);return n.callback=e,n.name="callback",n}function mw(e,t){for(var n=[e[0]],r=1,i=e.length;r<i;r+=2){var a=t.convert({x:e[r],y:e[r+1]});n.push(a.x,a.y)}return n}function gw(e,t){var n=t.isTransposed,r=e[1],i=e[6],a=e[7],o=t.convert({x:i,y:a});return["A",r,r,0,0,n?0:1,o.x,o.y]}function vw(e,t,n){for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l,c,u,h=[],p=!!r;if(p){o=r[0],s=r[1];for(var d=0,f=e.length;d<f;d++)o=$f([0,0],o,g=e[d]),s=Yf([0,0],s,g)}d=0;for(var m=e.length;d<m;d++){var g=e[d];if(0!==d||n)if(d!==m-1||n){i=e[n?d?d-1:m-1:d-1],a=e[n?(d+1)%m:d+1];var v=[0,0];v=Uf(v=Qf(v,a,i),v,t);var y=Vf(g,i),x=Vf(g,a),E=y+x;0!==E&&(y/=E,x/=E);var b=Uf([0,0],v,-y),C=Uf([0,0],v,x);c=jf([0,0],g,b),l=$f([0,0],l=jf([0,0],g,C),Yf([0,0],a,g)),l=Yf([0,0],l,$f([0,0],a,g)),c=$f([0,0],c=jf([0,0],g,b=Uf([0,0],b=Qf([0,0],l,g),-y/x)),Yf([0,0],i,g)),c=Yf([0,0],c,$f([0,0],i,g)),l=jf([0,0],g,C=Uf([0,0],C=Qf([0,0],g,c),x/y)),p&&(c=$f([0,0],c=Yf([0,0],c,o),s),l=$f([0,0],l=Yf([0,0],l,o),s)),h.push(u),h.push(c),u=l}else c=g,h.push(u),h.push(c);else u=g}return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a++)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}function yw(e,t){return function(e,t){var n=[];if(e.length){n.push(["M",e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var a=e[r];n.push(["L",a.x,a.y])}t&&n.push(["Z"])}return n}(e,t)}function xw(e,t,n){var r=[],i=e[0],a=null;if(e.length<=2)return yw(e,t);for(var o=0,s=e.length;o<s;o++){var l=e[o];a&&a.x===l.x&&a.y===l.y||(r.push(l.x),r.push(l.y),a=l)}var c=vw(r,t,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}function Ew(e,t){var n,r,i,a=[];return Uh(t,(function(o,s){switch(o[0].toLowerCase()){case"m":case"c":case"q":a.push(mw(o,e));break;case"l":n=t[s-1],r=o,i=e.isTransposed,(i?n[n.length-2]===r[1]:n[n.length-1]===r[2])?a=a.concat(function(e,t,n){var r=n.isTransposed,i=n.startAngle,a=n.endAngle,o="a"===e[0].toLowerCase()?{x:e[6],y:e[7]}:{x:e[1],y:e[2]},s={x:t[1],y:t[2]},l=[],c=r?"y":"x",u=Math.abs(s[c]-o[c])*(a-i),h=s[c]>=o[c]?1:0,p=u>Math.PI?1:0,d=n.convert(s),f=$T(n,d);if(f>=.5)if(u===2*Math.PI){var m={x:(s.x+o.x)/2,y:(s.y+o.y)/2},g=n.convert(m);l.push(["A",f,f,0,p,h,g.x,g.y]),l.push(["A",f,f,0,p,h,d.x,d.y])}else l.push(["A",f,f,0,p,h,d.x,d.y]);return l}(n,r,e)):a.push(mw(o,e));break;case"a":a.push(gw(o,e));break;case"z":default:a.push(o)}})),function(e){Uh(e,(function(t,n){if("a"===t[0].toLowerCase()){var r=e[n-1],i=e[n+1];i&&"a"===i[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&i&&"l"===i[0].toLowerCase()&&(i[0]="M")}}))}(a),a}function bw(e,t){var n=e.event.target.getCanvasBBox();return n.width>=t||n.height>=t?n:null}function Cw(e){var t,n=e.event.target;return n&&(t=n.get("element")),t}function Tw(e){var t,n=e.event.target;return n&&(t=n.get("delegateObject")),t}function ww(e){var t=e.event.gEvent;return!(t&&t.fromShape&&t.toShape&&t.fromShape.get("element")===t.toShape.get("element"))}function Sw(e){return e&&e.component&&e.component.isList()}function kw(e){return e&&e.component&&e.component.isSlider()}function _w(e){var t=e.event.target;return t&&"mask"===t.get("name")}function Aw(e,t){var n,r,i,a;if("path"===e.event.target.get("type")){var o=function(e,t){var n=e.event.target,r=n.getCanvasBBox();return r.width>=t||r.height>=t?n.attr("path"):null}(e,t);if(!o)return;return n=e.view,r=o,i=Iw(n),a=Lw(r),i.filter((function(e){var t,n,r=e.shape;if("path"===r.get("type"))t=Lw(r.attr("path"));else{var i=r.getCanvasBBox();t=[[(n=i).minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY]]}return function(e,t){if(e.length<2||t.length<2)return!1;var n,r,i=Nv(e),a=Nv(t);if(n=i,(r=a).minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)return!1;var o=!1;if(Uh(t,(function(t){if(Ov(e,t[0],t[1]))return o=!0,!1})),o)return!0;if(Uh(e,(function(e){if(Ov(t,e[0],e[1]))return o=!0,!1})),o)return!0;var s=Iv(e),l=Iv(t),c=!1;return Uh(l,(function(e){if(Mv(s,e))return c=!0,!1})),c}(a,t)}))}var s=bw(e,t);return s?Fw(e.view,s):null}function Ow(e,t,n){var r=bw(e,n);if(!r)return null;var i=e.view,a=zw(i,t,{x:r.x,y:r.y}),o=zw(i,t,{x:r.maxX,y:r.maxY});return Fw(t,{minX:a.x,minY:a.y,maxX:o.x,maxY:o.y})}function Iw(e){var t=e.geometries,n=[];return Uh(t,(function(e){var t=e.elements;n=n.concat(t)})),e.views&&e.views.length&&Uh(e.views,(function(e){n=n.concat(Iw(e))})),n}function Mw(e,t){var n=e.geometries,r=[];return Uh(n,(function(e){var n=e.getElementsBy((function(e){return e.hasState(t)}));r=r.concat(n)})),r}function Nw(e,t){var n=e.getModel().data;return $h(n)?n[0][t]:n[t]}function Fw(e,t){var n=Iw(e),r=[];return Uh(n,(function(e){var n=e.shape.getCanvasBBox();(function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)})(t,n)&&r.push(e)})),r}function Lw(e){var t=[];return Uh(e,(function(e){if("A"!==e[0])for(var n=1;n<e.length;n+=2)t.push([e[n],e[n+1]]);else{var r=e.length;t.push([e[r-2],e[r-1]])}})),t}function Pw(e){return e.getComponents().map((function(e){return e.component}))}function Rw(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function Dw(e,t){return e.x<=t.x&&e.maxX>=t.x&&e.y<=t.y&&e.maxY>t.y}function Bw(e){var t=e.parent,n=null;return t&&(n=t.views.filter((function(t){return t!==e}))),n}function zw(e,t,n){var r=function(e,t){return e.getCoordinate().invert(t)}(e,n);return t.getCoordinate().convert(r)}function Hw(e,t,n,r){var i=!1;return Uh(e,(function(e){if(e[n]===t[n]&&e[r]===t[r])return i=!0,!1})),i}function jw(e,t){var n=e.getScaleByField(t);return!n&&e.views&&Uh(e.views,(function(e){if(n=jw(e,t))return!1})),n}var Gw=function(){function e(e){this.actions=[],this.event=null,this.cacheMap={},this.view=e}return e.prototype.cache=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length)return this.cacheMap[e[0]];2===e.length&&(this.cacheMap[e[0]]=e[1])},e.prototype.getAction=function(e){return this.actions.find((function(t){return t.name===e}))},e.prototype.addAction=function(e){this.actions.push(e)},e.prototype.removeAction=function(e){var t=this.actions,n=this.actions.indexOf(e);n>=0&&t.splice(n,1)},e.prototype.getCurrentPoint=function(){var e=this.event;return e?e.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(e.clientX,e.clientY):{x:e.x,y:e.y}:null},e.prototype.getCurrentShape=function(){return qp(this.event,["gEvent","shape"])},e.prototype.isInPlot=function(){var e=this.getCurrentPoint();return!!e&&this.view.isPointInPlot(e)},e.prototype.isInShape=function(e){var t=this.getCurrentShape();return!!t&&t.get("name")===e},e.prototype.isInComponent=function(e){var t=Pw(this.view),n=this.getCurrentPoint();return!!n&&!!t.find((function(t){var r=t.getBBox();return e?t.get("name")===e&&Dw(r,n):Dw(r,n)}))},e.prototype.destroy=function(){Uh(this.actions.slice(),(function(e){e.destroy()})),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},e}(),$w=function(){function e(e,t){this.view=e,this.cfg=t}return e.prototype.init=function(){this.initEvents()},e.prototype.initEvents=function(){},e.prototype.clearEvents=function(){},e.prototype.destroy=function(){this.clearEvents()},e}();function Yw(e,t,n){var r=e.split(":"),i=r[0],a=t.getAction(i)||function(e,t){var n=hw[e],r=null;return n&&((r=new(0,n.ActionClass)(t,n.cfg)).name=e,r.init()),r}(i,t);if(!a)throw new Error("There is no action named ".concat(i));return{action:a,methodName:r[1],arg:n}}function Uw(e){var t=e.action,n=e.methodName,r=e.arg;if(!t[n])throw new Error("Action(".concat(t.name,") doesn't have a method called ").concat(n));t[n](r)}var Vw="start",Ww="showEnable",Xw="end",qw="rollback",Kw="processing",Qw=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.callbackCaches={},r.emitCaches={},r.steps=n,r}return Mh(t,e),t.prototype.init=function(){this.initContext(),e.prototype.init.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},t.prototype.initEvents=function(){var e=this;Uh(this.steps,(function(t,n){Uh(t,(function(t){var r=e.getActionCallback(n,t);r&&e.bindEvent(t.trigger,r)}))}))},t.prototype.clearEvents=function(){var e=this;Uh(this.steps,(function(t,n){Uh(t,(function(t){var r=e.getActionCallback(n,t);r&&e.offEvent(t.trigger,r)}))}))},t.prototype.initContext=function(){var e=this.view,t=new Gw(e);this.context=t,Uh(this.steps,(function(e){Uh(e,(function(e){if(jh(e.action))e.actionObject={action:fw(e.action,t),methodName:"execute"};else if(ap(e.action))e.actionObject=Yw(e.action,t,e.arg);else if($h(e.action)){var n=e.action,r=$h(e.arg)?e.arg:[e.arg];e.actionObject=[],Uh(n,(function(n,i){e.actionObject.push(Yw(n,t,r[i]))}))}}))}))},t.prototype.isAllowStep=function(e){var t=this.currentStepName,n=this.steps;if(t===e)return!0;if(e===Ww)return!0;if(e===Kw)return t===Vw;if(e===Vw)return t!==Kw;if(e===Xw)return t===Kw||t===Vw;if(e===qw){if(n[Xw])return t===Xw;if(t===Vw)return!0}return!1},t.prototype.isAllowExecute=function(e,t){if(this.isAllowStep(e)){var n=this.getKey(e,t);return(!t.once||!this.emitCaches[n])&&(!t.isEnable||t.isEnable(this.context))}return!1},t.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},t.prototype.afterExecute=function(e,t){e!==Ww&&this.currentStepName!==e&&this.enterStep(e);var n=this.getKey(e,t);this.emitCaches[n]=!0},t.prototype.getKey=function(e,t){return e+t.trigger+t.action},t.prototype.getActionCallback=function(e,t){var n=this,r=this.context,i=this.callbackCaches,a=t.actionObject;if(t.action&&a){var o=this.getKey(e,t);if(!i[o]){var s=function(i){r.event=i,n.isAllowExecute(e,t)?($h(a)?Uh(a,(function(e){r.event=i,Uw(e)})):(r.event=i,Uw(a)),n.afterExecute(e,t),t.callback&&(r.event=i,t.callback(r))):r.event=null};t.debounce?i[o]=Bp(s,t.debounce.wait,t.debounce.immediate):t.throttle?i[o]=ed(s,t.throttle.wait,{leading:t.throttle.leading,trailing:t.throttle.trailing}):i[o]=s}return i[o]}return null},t.prototype.bindEvent=function(e,t){var n=e.split(":");"window"===n[0]?window.addEventListener(n[1],t):"document"===n[0]?document.addEventListener(n[1],t):this.view.on(e,t)},t.prototype.offEvent=function(e,t){var n=e.split(":");"window"===n[0]?window.removeEventListener(n[1],t):"document"===n[0]?document.removeEventListener(n[1],t):this.view.off(e,t)},t}($w),Zw={};function Jw(e,t){Zw[kp(e)]=t}function eS(e,t,n){var r=function(e){return Zw[kp(e)]}(e);if(!r)return null;if(qh(r)){var i=Rp(Dp(r),n);return new Qw(t,i)}return new r(t,n)}function tS(e){var t,n={point:{default:{fill:e.pointFillColor,r:e.pointSize,stroke:e.pointBorderColor,lineWidth:e.pointBorder,fillOpacity:e.pointFillOpacity},active:{stroke:e.pointActiveBorderColor,lineWidth:e.pointActiveBorder},selected:{stroke:e.pointSelectedBorderColor,lineWidth:e.pointSelectedBorder},inactive:{fillOpacity:e.pointInactiveFillOpacity,strokeOpacity:e.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:e.hollowPointFillColor,lineWidth:e.hollowPointBorder,stroke:e.hollowPointBorderColor,strokeOpacity:e.hollowPointBorderOpacity,r:e.hollowPointSize},active:{stroke:e.hollowPointActiveBorderColor,strokeOpacity:e.hollowPointActiveBorderOpacity},selected:{lineWidth:e.hollowPointSelectedBorder,stroke:e.hollowPointSelectedBorderColor,strokeOpacity:e.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:e.hollowPointInactiveBorderOpacity}},area:{default:{fill:e.areaFillColor,fillOpacity:e.areaFillOpacity,stroke:null},active:{fillOpacity:e.areaActiveFillOpacity},selected:{fillOpacity:e.areaSelectedFillOpacity},inactive:{fillOpacity:e.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:e.hollowAreaBorderColor,lineWidth:e.hollowAreaBorder,strokeOpacity:e.hollowAreaBorderOpacity},active:{fill:null,lineWidth:e.hollowAreaActiveBorder},selected:{fill:null,lineWidth:e.hollowAreaSelectedBorder},inactive:{strokeOpacity:e.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:e.intervalFillColor,fillOpacity:e.intervalFillOpacity},active:{stroke:e.intervalActiveBorderColor,lineWidth:e.intervalActiveBorder},selected:{stroke:e.intervalSelectedBorderColor,lineWidth:e.intervalSelectedBorder},inactive:{fillOpacity:e.intervalInactiveFillOpacity,strokeOpacity:e.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:e.hollowIntervalFillColor,stroke:e.hollowIntervalBorderColor,lineWidth:e.hollowIntervalBorder,strokeOpacity:e.hollowIntervalBorderOpacity},active:{stroke:e.hollowIntervalActiveBorderColor,lineWidth:e.hollowIntervalActiveBorder,strokeOpacity:e.hollowIntervalActiveBorderOpacity},selected:{stroke:e.hollowIntervalSelectedBorderColor,lineWidth:e.hollowIntervalSelectedBorder,strokeOpacity:e.hollowIntervalSelectedBorderOpacity},inactive:{stroke:e.hollowIntervalInactiveBorderColor,lineWidth:e.hollowIntervalInactiveBorder,strokeOpacity:e.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:e.lineBorderColor,lineWidth:e.lineBorder,strokeOpacity:e.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:e.lineActiveBorder},selected:{lineWidth:e.lineSelectedBorder},inactive:{strokeOpacity:e.lineInactiveBorderOpacity}}},r=function(e){return{title:{autoRotate:!0,position:"center",spacing:e.axisTitleSpacing,style:{fill:e.axisTitleTextFillColor,fontSize:e.axisTitleTextFontSize,lineHeight:e.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:e.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:e.axisLabelOffset,style:{fill:e.axisLabelFillColor,fontSize:e.axisLabelFontSize,lineHeight:e.axisLabelLineHeight,fontFamily:e.fontFamily}},line:{style:{lineWidth:e.axisLineBorder,stroke:e.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:e.axisGridBorderColor,lineWidth:e.axisGridBorder,lineDash:e.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:e.axisTickLineBorder,stroke:e.axisTickLineBorderColor},alignTick:!0,length:e.axisTickLineLength},subTickLine:null,animate:!0}}(e),i=function(e){return{title:null,marker:{symbol:"circle",spacing:e.legendMarkerSpacing,style:{r:e.legendCircleMarkerSize,fill:e.legendMarkerColor}},itemName:{spacing:5,style:{fill:e.legendItemNameFillColor,fontFamily:e.fontFamily,fontSize:e.legendItemNameFontSize,lineHeight:e.legendItemNameLineHeight,fontWeight:e.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:e.legendPageNavigatorMarkerSize,inactiveFill:e.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:e.legendPageNavigatorMarkerInactiveFillOpacity,fill:e.legendPageNavigatorMarkerFillColor,opacity:e.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:e.legendPageNavigatorTextFillColor,fontSize:e.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:e.legendItemSpacing,itemMarginBottom:e.legendItemMarginBottom,padding:e.legendPadding}}(e);return{background:e.backgroundColor,defaultColor:e.brandColor,subColor:e.subColor,semanticRed:e.paletteSemanticRed,semanticGreen:e.paletteSemanticGreen,padding:"auto",fontFamily:e.fontFamily,columnWidthRatio:.5,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:e.paletteQualitative10,colors20:e.paletteQualitative20,sequenceColors:e.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:function(e){var t=e.geometry.coordinate;if(t.isPolar&&t.isTransposed){var r=RT(e.getModel(),t),i=(r.startAngle+r.endAngle)/2;return{matrix:nm(null,[["t",7.5*Math.cos(i),7.5*Math.sin(i)]])}}return n.interval.selected}}},"hollow-rect":{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},line:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},tick:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},funnel:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}},pyramid:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},line:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},dot:{default:{style:Nh(Nh({},n.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:Nh(Nh({},n.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:Nh(Nh({},n.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:Nh(Nh({},n.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:Nh(Nh({},n.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:Nh(Nh({},n.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:Nh(Nh({},n.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:Nh(Nh({},n.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hvh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},polygon:{polygon:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},point:{circle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},square:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},bowtie:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},diamond:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},hexagon:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},triangle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"triangle-down":{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"hollow-circle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-square":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-bowtie":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-diamond":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-hexagon":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle-down":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},cross:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},tick:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},plus:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},hyphen:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},line:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}}},area:{area:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},smooth:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},line:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"smooth-line":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}},schema:{candle:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},box:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}}},edge:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},arc:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},violin:{violin:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hollow:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"hollow-smooth":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}}},components:{axis:{common:r,top:{position:"top",grid:null,title:null,verticalLimitLength:.5},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:.5},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:jp({},r.grid,{line:{type:"line"}})},radius:{title:null,grid:jp({},r.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:e.legendVerticalPadding},left:{layout:"vertical",padding:e.legendVerticalPadding},top:{layout:"horizontal",padding:e.legendHorizontalPadding},bottom:{layout:"horizontal",padding:e.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:e.sliderRailHeight,defaultLength:e.sliderRailWidth,style:{fill:e.sliderRailFillColor,stroke:e.sliderRailBorderColor,lineWidth:e.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:e.sliderLabelTextFillColor,fontSize:e.sliderLabelTextFontSize,lineHeight:e.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:e.fontFamily}},handler:{size:e.sliderHandlerWidth,style:{fill:e.sliderHandlerFillColor,stroke:e.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:e.tooltipCrosshairsBorderColor,lineWidth:e.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(t={},t["".concat("g2-tooltip")]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:e.tooltipContainerFillColor,opacity:e.tooltipContainerFillOpacity,boxShadow:e.tooltipContainerShadow,borderRadius:"".concat(e.tooltipContainerBorderRadius,"px"),color:e.tooltipTextFillColor,fontSize:"".concat(e.tooltipTextFontSize,"px"),fontFamily:e.fontFamily,lineHeight:"".concat(e.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},t["".concat(tT)]={marginBottom:"12px",marginTop:"12px"},t["".concat(nT)]={margin:0,listStyleType:"none",padding:0},t["".concat("g2-tooltip-list-item")]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},t["".concat("g2-tooltip-marker")]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t["".concat("g2-tooltip-value")]={display:"inline-block",float:"right",marginLeft:"30px"},t)},annotation:{arc:{style:{stroke:e.annotationArcBorderColor,lineWidth:e.annotationArcBorder},animate:!0},line:{style:{stroke:e.annotationLineBorderColor,lineDash:e.annotationLineDash,lineWidth:e.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textAlign:"start",fontFamily:e.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:e.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:e.annotationRegionBorder,stroke:e.annotationRegionBorderColor,fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:e.brandColor,lineWidth:2}},line:{style:{stroke:e.annotationLineBorderColor,lineWidth:e.annotationLineBorder},length:e.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:e.cSliderBackgroundFillColor,opacity:e.cSliderBackgroundFillOpacity},foregroundStyle:{fill:e.cSliderForegroundFillColor,opacity:e.cSliderForegroundFillOpacity},handlerStyle:{width:e.cSliderHandlerWidth,height:e.cSliderHandlerHeight,fill:e.cSliderHandlerFillColor,opacity:e.cSliderHandlerFillOpacity,stroke:e.cSliderHandlerBorderColor,lineWidth:e.cSliderHandlerBorder,radius:e.cSliderHandlerBorderRadius,highLightFill:e.cSliderHandlerHighlightFillColor},textStyle:{fill:e.cSliderTextFillColor,opacity:e.cSliderTextFillOpacity,fontSize:e.cSliderTextFontSize,lineHeight:e.cSliderTextLineHeight,fontWeight:e.cSliderTextFontWeight,stroke:e.cSliderTextBorderColor,lineWidth:e.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:e.scrollbarTrackFillColor,thumbColor:e.scrollbarThumbFillColor}},hover:{style:{thumbColor:e.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:e.labelFillColor,fontSize:e.labelFontSize,fontFamily:e.fontFamily,stroke:e.labelBorderColor,lineWidth:e.labelBorder},fillColorDark:e.labelFillColorDark,fillColorLight:e.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:e.innerLabelFillColor,fontSize:e.innerLabelFontSize,fontFamily:e.fontFamily,stroke:e.innerLabelBorderColor,lineWidth:e.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:e.overflowLabelFillColor,fontSize:e.overflowLabelFontSize,fontFamily:e.fontFamily,stroke:e.overflowLabelBorderColor,lineWidth:e.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:e.labelLineBorder}},autoRotate:!0}}}var nS="#000",rS="#595959",iS="#8C8C8C",aS="#BFBFBF",oS="#D9D9D9",sS="#F0F0F0",lS="#FFFFFF",cS=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],uS=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],hS=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],pS=function(e){void 0===e&&(e={});var t=e.backgroundColor,n=void 0===t?"transparent":t,r=e.subColor,i=void 0===r?"rgba(0,0,0,0.05)":r,a=e.paletteQualitative10,o=void 0===a?cS:a,s=e.paletteQualitative20,l=void 0===s?uS:s,c=e.paletteSemanticRed,u=void 0===c?"#F4664A":c,h=e.paletteSemanticGreen,p=void 0===h?"#30BF78":h,d=e.paletteSemanticYellow,f=void 0===d?"#FAAD14":d,m=e.paletteSequence,g=void 0===m?hS:m,v=e.fontFamily,y=void 0===v?'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"':v,x=e.brandColor,E=void 0===x?o[0]:x;return{backgroundColor:n,brandColor:E,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:u,paletteSemanticGreen:p,paletteSemanticYellow:f,paletteSequence:g,fontFamily:y,axisLineBorderColor:aS,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:rS,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:aS,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:oS,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:iS,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:oS,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:iS,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:E,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:rS,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:nS,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:nS,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:iS,legendPageNavigatorTextFontSize:12,sliderRailFillColor:oS,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:iS,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:sS,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:aS,annotationArcBorderColor:oS,annotationArcBorder:1,annotationLineBorderColor:aS,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:rS,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:nS,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:aS,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:rS,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:rS,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:lS,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:rS,overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:lS,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:aS,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:E,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:lS,pointBorderOpacity:1,pointActiveBorderColor:nS,pointSelectedBorder:2,pointSelectedBorderColor:nS,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:E,hollowPointBorderOpacity:.95,hollowPointFillColor:lS,hollowPointActiveBorder:1,hollowPointActiveBorderColor:nS,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:nS,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:E,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:E,areaFillOpacity:.25,areaActiveFillColor:E,areaActiveFillOpacity:.5,areaSelectedFillColor:E,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:E,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:nS,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:nS,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:E,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:nS,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:nS,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:E,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:lS,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:nS,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:nS,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}};function dS(e){var t=e.styleSheet,n=void 0===t?{}:t,r=Fh(e,["styleSheet"]),i=pS(n);return jp({},tS(i),r)}pS();var fS={default:dS({})};function mS(e){return qp(fS,kp(e),fS.default)}function gS(e,t,n){return yp(n.translate(e),n.translate(t))}function vS(e,t,n){var r=n.coordinate,i=n.getYScale(),a=i.field,o=r.invert(t),s=i.invert(o.y);return Kh(e,(function(e){var t=e._origin;return t[a][0]<=s&&t[a][1]>=s}))||e[e.length-1]}var yS=zp((function(e){if(e.isCategory)return 1;for(var t=e.values,n=t.length,r=e.translate(t[0]),i=r,a=0;a<n;a++){var o=t[a],s=e.translate(o);s<r&&(r=s),s>i&&(i=s)}return(i-r)/(n-1)}));function xS(e){for(var t,n=0,r=function(e){var t=wp(e.attributes);return Bh(t,(function(e){return Dh(Ad,e.type)}))}(e);n<r.length;n++){var i=r[n],a=i.getScale(i.type);if(a&&a.isLinear){t=a;break}}var o=e.getXScale(),s=e.getYScale();return t||s||o}function ES(e,t,n){if(0===t.length)return null;var r=n.type,i=n.getXScale(),a=n.getYScale(),o=i.field,s=a.field,l=null;if("heatmap"===r||"point"===r){for(var c=n.coordinate.invert(e),u=i.invert(c.x),h=a.invert(c.y),p=1/0,d=0;d<t.length;d++){var f=t[d],m=f._origin,g=Math.pow(m[o]-u,2)+Math.pow(m[s]-h,2);g<p&&(p=g,l=f)}return l}var v=t[0],y=t[t.length-1],x=function(e,t){var n=t.coordinate,r=t.getXScale(),i=r.range,a=i[i.length-1],o=i[0],s=n.invert(e).x;return n.isPolar&&s>(1+a)/2&&(s=o),r.translate(r.invert(s))}(e,n),E=v._origin[o],b=v._origin[s],C=y._origin[o],T=a.isLinear&&$h(b);if($h(E)){for(d=0;d<t.length;d++){m=(O=t[d])._origin;if(i.translate(m[o][0])<=x&&i.translate(m[o][1])>=x){if(!T){l=O;break}$h(l)||(l=[]),l.push(O)}}$h(l)&&(l=vS(l,e,n))}else{var w=void 0;if(i.isLinear||"timeCat"===i.type){if((x>i.translate(C)||x<i.translate(E))&&(x>i.max||x<i.min))return null;for(var S=0,k=t.length-1,_=void 0;S<=k;){var A=t[_=Math.floor((S+k)/2)]._origin[o];if(gS(A,x,i))return t[_];i.translate(A)<=i.translate(x)?(S=_+1,y=t[_],w=t[_+1]):(0===k&&(y=t[0]),k=_-1)}}else{for(d=0;d<t.length;d++){var O;if(gS((m=(O=t[d])._origin)[o],x,i)){if(!T){l=O;break}$h(l)||(l=[]),l.push(O)}else i.translate(m[o])<=x&&(y=O,w=t[d+1])}$h(l)&&(l=vS(l,e,n))}y&&w&&Math.abs(i.translate(y._origin[o])-x)>Math.abs(i.translate(w._origin[o])-x)&&(y=w)}var I=yS(n.getXScale());return!l&&Math.abs(i.translate(y._origin[o])-x)<=I/2&&(l=y),l}function bS(e,t,n,r){void 0===n&&(n=""),void 0===r&&(r=!1);var i,a=e._origin,o=function(e,t,n){var r=t.getAttribute("position").getFields(),i=t.scales,a=jh(n)||!n?r[0]:n,o=i[a],s=o?o.getText(e[a]):e[a]||a;return jh(n)?n(s,e):s}(a,t,n),s=t.tooltipOption,l=t.theme.defaultColor,c=[];function u(t,n){if(r||!Gh(n)&&""!==n){var i={title:o,data:a,mappingData:e,name:t,value:n,color:e.color||l,marker:!0};c.push(i)}}if(Yh(s)){var h=s.fields,p=s.callback;if(p){var d=h.map((function(t){return e._origin[t]})),f=p.apply(void 0,d),m=Nh({data:e._origin,mappingData:e,title:o,color:e.color||l,marker:!0},f);c.push(m)}else for(var g=t.scales,v=0,y=h;v<y.length;v++){var x=y[v];if(!Gh(a[x])){var E=g[x];u(qT(E),i=E.getText(a[x]))}}}else{var b=xS(t);i=function(e,t){var n=e[t.field];return $h(n)?n.map((function(e){return t.getText(e)})).join("-"):t.getText(n)}(a,b),u(function(e,t){var n,r=t.getGroupScales();if(r.length&&(n=r[0]),n){var i=n.field;return n.getText(e[i])}return qT(xS(t))}(a,t),i)}return c}function CS(e,t,n,r){var i=r.showNil,a=[],o=e.dataArray;if(!Yp(o)){e.sort(o);for(var s=0,l=o;s<l.length;s++){var c=ES(t,l[s],e);if(c){var u=e.getElementId(c),h=e.elementsMap[u];if("heatmap"===e.type||h.visible){var p=bS(c,e,n,i);p.length&&a.push(p)}}}}return a}function TS(e,t,n,r){var i=r.showNil,a=[],o=e.container.getShape(t.x,t.y);if(o&&o.get("visible")&&o.get("origin")){var s=bS(o.get("origin").mappingData,e,n,i);s.length&&a.push(s)}return a}function wS(e,t,n){for(var r=[],i=e.geometries,a=n.shared,o=n.title,s=n.reversed,l=0,c=i;l<c.length;l++){var u=c[l];if(u.visible&&!1!==u.tooltipOption){var h=u.type,p=void 0;(p=["point","edge","polygon"].includes(h)?TS(u,t,o,n):["area","line","path","heatmap"].includes(h)||!1!==a?CS(u,t,o,n):TS(u,t,o,n)).length&&(s&&p.reverse(),r.push(p))}}return r}function SS(e){void 0===e&&(e=0);var t=$h(e)?e:[e];switch(t.length){case 0:t=[0,0,0,0];break;case 1:t=new Array(4).fill(t[0]);break;case 2:t=Ph(Ph([],t,!0),t,!0);break;case 3:t=Ph(Ph([],t,!0),[t[1]],!1);break;default:t=t.slice(0,4)}return t}var kS={};function _S(e,t){kS[e]=t}var AS=function(){function e(e){this.option=this.wrapperOption(e)}return e.prototype.update=function(e){return this.option=this.wrapperOption(e),this},e.prototype.hasAction=function(e){var t=this.option.actions;return hp(t,(function(t){return t[0]===e}))},e.prototype.create=function(e,t){var n=this.option,r=n.type,i=n.cfg,a="theta"===r,o=Nh({start:e,end:t},i),s=function(e){return $x[e.toLowerCase()]}(a?"polar":r);return this.coordinate=new s(o),this.coordinate.type=r,a&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},e.prototype.adjust=function(e,t){return this.coordinate.update({start:e,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},e.prototype.rotate=function(e){return this.option.actions.push(["rotate",e]),this},e.prototype.reflect=function(e){return this.option.actions.push(["reflect",e]),this},e.prototype.scale=function(e,t){return this.option.actions.push(["scale",e,t]),this},e.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},e.prototype.getOption=function(){return this.option},e.prototype.getCoordinate=function(){return this.coordinate},e.prototype.wrapperOption=function(e){return Nh({type:"rect",actions:[],cfg:{}},e)},e.prototype.execActions=function(e){var t=this;Uh(this.option.actions,(function(n){var r,i=n[0],a=n.slice(1);(!!Gh(e)||e.includes(i))&&(r=t.coordinate)[i].apply(r,a)}))},e}(),OS=function(){function e(e,t,n){this.view=e,this.gEvent=t,this.data=n,this.type=t.type}return e.fromData=function(t,n,r){return new e(t,new Ef(n,{}),r)},Object.defineProperty(e.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},e.prototype.clone=function(){return new e(this.view,this.gEvent,this.data)},e}();function IS(e){var t=e.getController("axis"),n=e.getController("legend"),r=e.getController("annotation");[t,e.getController("slider"),e.getController("scrollbar"),n,r].forEach((function(e){e&&e.layout()}))}var MS=function(){function e(){this.scales=new Map,this.syncScales=new Map}return e.prototype.createScale=function(e,t,n,r){var i=n,a=this.getScaleMeta(r);if(0===t.length&&a){var o=a.scale,s={type:o.type};o.isCategory&&(s.values=o.values),i=jp(s,a.scaleDef,n)}var l=XT(e,t,i);return this.cacheScale(l,n,r),l},e.prototype.sync=function(e,t){var n=this;this.syncScales.forEach((function(r,i){var a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=[];Uh(r,(function(e){var t=n.getScale(e);o=vp(t.max)?Math.max(o,t.max):o,a=vp(t.min)?Math.min(a,t.min):a,Uh(t.values,(function(e){s.includes(e)||s.push(e)}))})),Uh(r,(function(r){var i=n.getScale(r);if(i.isContinuous)i.change({min:a,max:o,values:s});else if(i.isCategory){var l=i.range,c=n.getScaleMeta(r);s&&!qp(c,["scaleDef","range"])&&(l=KT(jp({},i,{values:s}),e,t)),i.change({values:s,range:l})}}))}))},e.prototype.cacheScale=function(e,t,n){var r=this.getScaleMeta(n);r&&r.scale.type===e.type?(!function(e,t){if("identity"!==e.type&&"identity"!==t.type){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);e.change(n)}}(r.scale,e),r.scaleDef=t):(r={key:n,scale:e,scaleDef:t},this.scales.set(n,r));var i=this.getSyncKey(r);if(r.syncKey=i,this.removeFromSyncScales(n),i){var a=this.syncScales.get(i);a||(a=[],this.syncScales.set(i,a)),a.push(n)}},e.prototype.getScale=function(e){var t=this.getScaleMeta(e);if(!t){var n=cp(e.split("-")),r=this.syncScales.get(n);r&&r.length&&(t=this.getScaleMeta(r[0]))}return t&&t.scale},e.prototype.deleteScale=function(e){var t=this.getScaleMeta(e);if(t){var n=t.syncKey,r=this.syncScales.get(n);if(r&&r.length){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}}this.scales.delete(e)},e.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},e.prototype.removeFromSyncScales=function(e){var t=this;this.syncScales.forEach((function(n,r){var i=n.indexOf(e);if(-1!==i)return n.splice(i,1),0===n.length&&t.syncScales.delete(r),!1}))},e.prototype.getSyncKey=function(e){var t=e.scale,n=e.scaleDef,r=t.field,i=qp(n,["sync"]);return!0===i?r:!1===i?void 0:i},e.prototype.getScaleMeta=function(e){return this.scales.get(e)},e}(),NS=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=e,this.right=t,this.bottom=n,this.left=r}return e.instance=function(t,n,r,i){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),new e(t,n,r,i)},e.prototype.max=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return this.top=Math.max(this.top,t),this.right=Math.max(this.right,n),this.bottom=Math.max(this.bottom,r),this.left=Math.max(this.left,i),this},e.prototype.shrink=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return this.top+=t,this.right+=n,this.bottom+=r,this.left+=i,this},e.prototype.inc=function(e,t){var n=e.width,r=e.height;switch(t){case sd.TOP:case sd.TOP_LEFT:case sd.TOP_RIGHT:this.top+=r;break;case sd.RIGHT:case sd.RIGHT_TOP:case sd.RIGHT_BOTTOM:this.right+=n;break;case sd.BOTTOM:case sd.BOTTOM_LEFT:case sd.BOTTOM_RIGHT:this.bottom+=r;break;case sd.LEFT:case sd.LEFT_TOP:case sd.LEFT_BOTTOM:this.left+=n}return this},e.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},e.prototype.clone=function(){return new(e.bind.apply(e,Ph([void 0],this.getPadding(),!1)))},e}();function FS(e){var t=e.padding;if(!function(e){return!vp(e)&&!$h(e)}(t))return new(NS.bind.apply(NS,Ph([void 0],SS(t),!1)));var n=e.viewBBox,r=new NS,i=[],a=[],o=[];return Uh(e.getComponents(),(function(e){var t=e.type;t===cd.AXIS?i.push(e):[cd.LEGEND,cd.SLIDER,cd.SCROLLBAR].includes(t)?a.push(e):t!==cd.GRID&&t!==cd.TOOLTIP&&o.push(e)})),Uh(i,(function(e){var t=e.component.getLayoutBBox(),i=new jT(t.x,t.y,t.width,t.height).exceed(n);r.max(i)})),Uh(a,(function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),a=t.get("padding"),o=new jT(i.x,i.y,i.width,i.height).expand(a);r.inc(o,n)})),Uh(o,(function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),a=new jT(i.x,i.y,i.width,i.height);r.inc(a,n)})),r}function LS(e,t,n){var r=n.instance();t.forEach((function(e){e.autoPadding=r.max(e.autoPadding.getPadding())}))}var PS=function(e){function t(t){var n=e.call(this,{visible:t.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=Object.keys(kS),n.scalePool=new MS,n.layoutFunc=IS,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(e){var t=e.name;if(!t.includes(":")){var r=n.createViewEvent(e);n.doPlotEvent(r),n.emit(t,r)}},n.onDelegateEvents=function(e){var t=e.name;if(t.includes(":")){var r=n.createViewEvent(e);n.emit(t,r)}};var r=t.id,i=void 0===r?nd("view"):r,a=t.parent,o=t.canvas,s=t.backgroundGroup,l=t.middleGroup,c=t.foregroundGroup,u=t.region,h=void 0===u?{start:{x:0,y:0},end:{x:1,y:1}}:u,p=t.padding,d=t.appendPadding,f=t.theme,m=t.options,g=t.limitInPlot,v=t.syncViewPadding;return n.parent=a,n.canvas=o,n.backgroundGroup=s,n.middleGroup=l,n.foregroundGroup=c,n.region=h,n.padding=p,n.appendPadding=d,n.options=Nh(Nh({},n.options),m),n.limitInPlot=g,n.id=i,n.syncViewPadding=v,n.themeObject=Yh(f)?jp({},mS("default"),dS(f)):mS(f),n.init(),n}return Mh(t,e),t.prototype.setLayout=function(e){this.layoutFunc=e},t.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},t.prototype.render=function(e,t){void 0===e&&(e=!1),this.emit(dd.BEFORE_RENDER,OS.fromData(this,dd.BEFORE_RENDER,t)),this.paint(e),this.emit(dd.AFTER_RENDER,OS.fromData(this,dd.AFTER_RENDER,t)),!1===this.visible&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this;this.emit(dd.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var t=this.geometries,n=0;n<t.length;n++)t[n].clear(),t[n].container.remove(!0),t[n].labelsContainer.remove(!0);this.geometries=[];var r=this.controllers;for(n=0;n<r.length;n++)"annotation"===r[n].name?r[n].clear(!0):r[n].clear();this.createdScaleKeys.forEach((function(t,n){e.getRootView().scalePool.deleteScale(n)})),this.createdScaleKeys.clear();var i=this.views;for(n=0;n<i.length;n++)i[n].clear();this.emit(dd.AFTER_CLEAR)},t.prototype.destroy=function(){this.emit(dd.BEFORE_DESTROY),Uh(this.interactions,(function(e){e&&e.destroy()})),this.clear();for(var t=this.controllers,n=0,r=t.length;n<r;n++){t[n].destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.geometries,r=0,i=n.length;r<i;r++){n[r].changeVisible(t)}var a=this.controllers;for(r=0,i=a.length;r<i;r++){a[r].changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},t.prototype.data=function(e){return Kp(this.options,"data",e),this.isDataChanged=!0,this},t.prototype.source=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(e)},t.prototype.filter=function(e,t){return jh(t)?(Kp(this.options,["filters",e],t),this):(!t&&qp(this.options,["filters",e])&&delete this.options.filters[e],this)},t.prototype.axis=function(e,t){return Ip(e)?Kp(this.options,["axes"],e):Kp(this.options,["axes",e],t),this},t.prototype.legend=function(e,t){return Ip(e)?Kp(this.options,["legends"],e):ap(e)?(Kp(this.options,["legends",e],t),qh(t)&&(null==t?void 0:t.selected)&&Kp(this.options,["filters",e],(function(e){var n;return null===(n=null==t?void 0:t.selected[e])||void 0===n||n}))):Kp(this.options,["legends"],e),this},t.prototype.scale=function(e,t){var n=this;return ap(e)?Kp(this.options,["scales",e],t):Yh(e)&&Uh(e,(function(e,t){Kp(n.options,["scales",t],e)})),this},t.prototype.tooltip=function(e){return Kp(this.options,"tooltip",e),this},t.prototype.annotation=function(){return this.getController("annotation")},t.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},t.prototype.coordinate=function(e,t){return ap(e)?Kp(this.options,"coordinate",{type:e,cfg:t}):Kp(this.options,"coordinate",e),this.coordinateController.update(this.options.coordinate),this.coordinateController},t.prototype.coord=function(e,t){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(e,t)},t.prototype.facet=function(e,t){this.facetInstance&&this.facetInstance.destroy();var n=function(e){return sw[kp(e)]}(e);if(!n)throw new Error("facet '".concat(e,"' is not exist!"));return this.facetInstance=new n(this,Nh(Nh({},t),{type:e})),this},t.prototype.animate=function(e){return Kp(this.options,"animate",e),this},t.prototype.updateOptions=function(e){return this.clear(),Rp(this.options,e),this.views.forEach((function(e){return e.destroy()})),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},t.prototype.option=function(e,n){if(t.prototype[e])throw new Error("Can't use built in variable name \"".concat(e,'", please change another one.'));return Kp(this.options,e,n),this},t.prototype.theme=function(e){return this.themeObject=Yh(e)?jp({},this.themeObject,dS(e)):mS(e),this},t.prototype.interaction=function(e,t){var n=this.interactions[e];n&&n.destroy();var r=eS(e,this,t);return r&&(r.init(),this.interactions[e]=r),this},t.prototype.removeInteraction=function(e){var t=this.interactions[e];t&&(t.destroy(),this.interactions[e]=void 0)},t.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(dd.BEFORE_CHANGE_DATA,OS.fromData(this,dd.BEFORE_CHANGE_DATA,null)),this.data(e),this.paint(!0);for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].changeData(e)}this.emit(dd.AFTER_CHANGE_DATA,OS.fromData(this,dd.AFTER_CHANGE_DATA,null))},t.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:Dp(this.options.scales),axes:Dp(this.options.axes),coordinate:Dp(this.coordinateController.getOption()),tooltip:Dp(this.options.tooltip),legends:Dp(this.options.legends),animate:this.options.animate,visible:this.visible},r=new t(Nh(Nh({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:Td}),middleGroup:this.middleGroup.addGroup({zIndex:Cd}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:bd}),theme:this.themeObject,padding:this.padding},e),{options:Nh(Nh({},n),qp(e,"options",{}))}));return this.views.push(r),r},t.prototype.view=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(e)},t.prototype.removeView=function(e){var t=ip(this.views,(function(t){return t===e}))[0];return t&&t.destroy(),t},t.prototype.getCoordinate=function(){return this.coordinateInstance},t.prototype.getTheme=function(){return this.themeObject},t.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},t.prototype.getYScales=function(){var e={},t=[];return this.geometries.forEach((function(n){var r=n.getYScale(),i=r.field;e[i]||(e[i]=!0,t.push(r))})),t},t.prototype.getScalesByDim=function(e){for(var t=this.geometries,n={},r=0,i=t.length;r<i;r++){var a=t[r],o="x"===e?a.getXScale():a.getYScale();o&&!n[o.field]&&(n[o.field]=o)}return n},t.prototype.getScale=function(e,t){var n=t||this.getScaleKey(e);return this.getRootView().scalePool.getScale(n)},t.prototype.getScaleByField=function(e,t){return this.getScale(e,t)},t.prototype.getOptions=function(){return this.options},t.prototype.getData=function(){return this.filteredData},t.prototype.getOriginalData=function(){return this.options.data},t.prototype.getPadding=function(){return this.autoPadding.getPadding()},t.prototype.getGeometries=function(){return this.geometries},t.prototype.getElements=function(){return rp(this.geometries,(function(e,t){return e.concat(t.getElements())}),[])},t.prototype.getElementsBy=function(e){return this.getElements().filter((function(t){return e(t)}))},t.prototype.getLayer=function(e){return e===ad.BG?this.backgroundGroup:e===ad.MID?this.middleGroup:(ad.FORE,this.foregroundGroup)},t.prototype.isPointInPlot=function(e){return YT(this.getCoordinate(),e)},t.prototype.getLegendAttributes=function(){return Zh(this.geometries.map((function(e){return e.getGroupAttributes()})))},t.prototype.getGroupScales=function(){var e=this.geometries.map((function(e){return e.getGroupScales()}));return HT(Zh(e))},t.prototype.getCanvas=function(){return this.getRootView().canvas},t.prototype.getRootView=function(){for(var e=this;e.parent;)e=e.parent;return e},t.prototype.getXY=function(e){var t,n,r=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y");if(Uh(e,(function(e,r){i[r]&&(t=i[r].scale(e)),a[r]&&(n=a[r].scale(e))})),!Gh(t)&&!Gh(n))return r.convert({x:t,y:n})},t.prototype.getController=function(e){return Kh(this.controllers,(function(t){return t.name===e}))},t.prototype.showTooltip=function(e){var t=this.getController("tooltip");return t&&t.showTooltip(e),this},t.prototype.hideTooltip=function(){var e=this.getController("tooltip");return e&&e.hideTooltip(),this},t.prototype.lockTooltip=function(){var e=this.getController("tooltip");return e&&e.lockTooltip(),this},t.prototype.unlockTooltip=function(){var e=this.getController("tooltip");return e&&e.unlockTooltip(),this},t.prototype.isTooltipLocked=function(){var e=this.getController("tooltip");return e&&e.isTooltipLocked()},t.prototype.getTooltipItems=function(e){var t=this.getController("tooltip");return t?t.getTooltipItems(e):[]},t.prototype.getSnapRecords=function(e){for(var t=this.geometries,n=[],r=0,i=t.length;r<i;r++){var a=t[r],o=a.dataArray;a.sort(o);for(var s=void 0,l=0,c=o.length;l<c;l++){(s=ES(e,o[l],a))&&n.push(s)}}var u=this.views;for(r=0,i=u.length;r<i;r++){var h=u[r].getSnapRecords(e);n=n.concat(h)}return n},t.prototype.getComponents=function(){for(var e=[],t=this.controllers,n=0,r=t.length;n<r;n++){var i=t[n];e=e.concat(i.getComponents())}return e},t.prototype.filterData=function(e){var t=this.options.filters;return 0===id(t)?e:Bh(e,(function(e,n){return Object.keys(t).every((function(r){return(0,t[r])(e[r],e,n)}))}))},t.prototype.filterFieldData=function(e,t){var n=this.options.filters,r=qp(n,e);return Fp(r)?t:t.filter((function(t,n){return r(t[e],t,n)}))},t.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),t=e.start,n=e.end,r=this.coordinateBBox.bl,i=this.coordinateBBox.tr;Vp(t,r)&&Vp(n,i)?this.isCoordinateChanged=!1:(this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(r,i))},t.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(dd.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(dd.AFTER_PAINT),this.isDataChanged=!1},t.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=qp(this.themeObject,"background");if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var t=this.viewBBox,n=t.x,r=t.y,i=t.width,a=t.height;this.backgroundStyleRectShape.attr({fill:e,x:n,y:r,width:i,height:a})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},t.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=FS(this).shrink(SS(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].renderPaddingRecursive(e)}},t.prototype.renderLayoutRecursive=function(e){var t=!0===this.syncViewPadding?LS:jh(this.syncViewPadding)?this.syncViewPadding:void 0;t&&(t(this,this.views,NS),this.views.forEach((function(e){e.coordinateBBox=e.viewBBox.shrink(e.autoPadding.getPadding()),e.adjustCoordinate()}))),this.doLayout();for(var n=this.views,r=0,i=n.length;r<i;r++){n[r].renderLayoutRecursive(e)}},t.prototype.renderPaintRecursive=function(e){var t=this.middleGroup;if(this.limitInPlot){var n=VT(this.coordinateInstance),r=n.type,i=n.attrs;t.setClip({type:r,attrs:i})}else t.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var a=this.views,o=0,s=a.length;o<s;o++){a[o].renderPaintRecursive(e)}},t.prototype.createScale=function(e,t,n,r){var i=qp(this.options.scales,[e]),a=Nh(Nh({},i),n);return this.parent?this.parent.createScale(e,t,a,r):this.scalePool.createScale(e,t,a,r)},t.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].renderDataRecursive(e)}},t.prototype.calculateViewBBox=function(){var e,t,n,r;if(this.parent){var i=this.parent.coordinateBBox;e=i.x,t=i.y,n=i.width,r=i.height}else e=0,t=0,n=this.canvas.get("width"),r=this.canvas.get("height");var a=this.region,o=a.start,s=a.end,l=new jT(e+n*o.x,t+r*o.y,n*(s.x-o.x),r*(s.y-o.y));this.viewBBox&&this.viewBBox.isEqual(l)||(this.viewBBox=new jT(e+n*o.x,t+r*o.y,n*(s.x-o.x),r*(s.y-o.y))),this.coordinateBBox=this.viewBBox},t.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},t.prototype.initComponentController=function(){for(var e=this.usedControllers,t=0,n=e.length;t<n;t++){var r=e[t],i=kS[r];i&&this.controllers.push(new i(this))}},t.prototype.createViewEvent=function(e){var t=e.shape,n=e.name,r=t?t.get("origin"):null,i=new OS(this,e,r);return i.type=n,i},t.prototype.doPlotEvent=function(e){var t=e.type,n={x:e.x,y:e.y};if(["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"].includes(t)){var r=this.isPointInPlot(n),i=e.clone();if(r){var a="plot:".concat(t);i.type=a,this.emit(a,i),"mouseleave"!==t&&"touchend"!==t||(this.isPreMouseInPlot=!1)}"mousemove"===t||"touchmove"===t?(this.isPreMouseInPlot&&!r?("mousemove"===t&&(i.type=vd.MOUSE_LEAVE,this.emit(vd.MOUSE_LEAVE,i)),i.type=vd.LEAVE,this.emit(vd.LEAVE,i)):!this.isPreMouseInPlot&&r&&("mousemove"===t&&(i.type=vd.MOUSE_ENTER,this.emit(vd.MOUSE_ENTER,i)),i.type=vd.ENTER,this.emit(vd.ENTER,i)),this.isPreMouseInPlot=r):"mouseleave"!==t&&"touchend"!==t||this.isPreMouseInPlot&&("mouseleave"===t&&(i.type=vd.MOUSE_LEAVE,this.emit(vd.MOUSE_LEAVE,i)),i.type=vd.LEAVE,this.emit(vd.LEAVE,i),this.isPreMouseInPlot=!1)}},t.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},t.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var t=this.getCoordinate(),n=qp(this.options,"scales",{}),r=this.geometries,i=0,a=r.length;i<a;i++){var o=r[i];o.scales=this.getGeometryScales();var s={coordinate:t,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?o.update(s):o.init(s)}this.adjustScales()},t.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),t=this.getGroupedFields(),n=this.getOptions(),r=n.data,i=n.scales,a=void 0===i?{}:i,o=this.filteredData,s=0,l=e.length;s<l;s++){var c=e[s],u=a[c],h=this.getScaleKey(c);this.createScale(c,t.includes(c)?r:o,u,h),this.createdScaleKeys.set(h,!0)}},t.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},t.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),t={},n=0;n<e.length;n++){var r=e[n];t[r]=this.getScaleByField(r)}return t},t.prototype.getScaleFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){HT(n[r].getScaleFields(),e,t)}return e},t.prototype.getGroupedFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){HT(n[r].getGroupFields(),e,t)}return e},t.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},t.prototype.adjustCategoryScaleRange=function(){var e=this,t=Ph([this.getXScale()],this.getYScales(),!0).filter((function(e){return!!e})),n=this.getCoordinate(),r=this.options.scales;Uh(t,(function(t){var i=t.field,a=t.values,o=t.isCategory,s=t.isIdentity;(o||s)&&a&&!qp(r,[i,"range"])&&(t.range=KT(t,n,e.theme))}))},t.prototype.initComponents=function(e){for(var t=this.controllers,n=0;n<t.length;n++){var r=t[n];e?r.update():(r.clear(),r.render())}},t.prototype.doLayout=function(){this.layoutFunc(this)},t.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,t=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,t)},t.prototype.paintGeometries=function(e){for(var t=this.options.animate,n=this.getCoordinate(),r={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},i=this.geometries,a=0;a<i.length;a++){var o=i[a];o.coordinate=n,o.canvasRegion=r,t||o.animate(!1),o.paint(e)}},t.prototype.renderComponents=function(e){for(var t=0;t<this.getComponents().length;t++){this.getComponents()[t].component.render()}},t.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},t.prototype.initOptions=function(){var e=this,t=this.options,n=t.geometries,r=void 0===n?[]:n,i=t.interactions,a=void 0===i?[]:i,o=t.views,s=void 0===o?[]:o,l=t.annotations,c=void 0===l?[]:l,u=t.coordinate,h=t.events,p=t.facets;this.coordinateController?u&&this.coordinateController.update(u):this.coordinateController=new AS(u);for(var d=0;d<r.length;d++){var f=r[d];this.createGeometry(f)}for(var m=0;m<a.length;m++){var g=a[m],v=g.type,y=g.cfg;this.interaction(v,y)}for(var x=0;x<s.length;x++){var E=s[x];this.createView(E)}for(var b=this.getController("annotation"),C=0;C<c.length;C++){var T=c[C];b.annotation(T)}h&&Uh(h,(function(t,n){e.on(n,t)})),p&&Uh(p,(function(t){var n=t.type,r=Fh(t,["type"]);e.facet(n,r)}))},t.prototype.createGeometry=function(e){var t=e.type,n=e.cfg,r=void 0===n?{}:n;if(this[t]){var i=this[t](r);Uh(e,(function(e,t){jh(i[t])&&i[t](e)}))}},t.prototype.getScaleKey=function(e){return"".concat(this.id,"-").concat(e)},t}(Hd);function RS(e,t){PS.prototype[e.toLowerCase()]=function(e){void 0===e&&(e={});var n=Nh({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),r=new t(n);return this.geometries.push(r),r}}var DS=function(e){function t(t){var n=this,r=t.container,i=t.width,a=t.height,o=t.autoFit,s=void 0!==o&&o,l=t.padding,c=t.appendPadding,u=t.renderer,h=void 0===u?"canvas":u,p=t.pixelRatio,d=t.localRefresh,f=void 0===d||d,m=t.visible,g=void 0===m||m,v=t.supportCSSTransform,y=void 0!==v&&v,x=t.defaultInteractions,E=void 0===x?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:x,b=t.options,C=t.limitInPlot,T=t.theme,w=t.syncViewPadding,S=ap(r)?document.getElementById(r):r,k=Nd('<div style="position:relative;"></div>');S.appendChild(k);var _=Bd(S,s,i,a),A=new(function(e){var t=Od[e];if(!t)throw new Error("G engine '".concat(e,"' is not exist, please register it at first."));return t}(h).Canvas)(Nh({container:k,pixelRatio:p,localRefresh:f,supportCSSTransform:y},_));return(n=e.call(this,{parent:null,canvas:A,backgroundGroup:A.addGroup({zIndex:Td}),middleGroup:A.addGroup({zIndex:Cd}),foregroundGroup:A.addGroup({zIndex:bd}),padding:l,appendPadding:c,visible:g,options:b,limitInPlot:C,theme:T,syncViewPadding:w})||this).onResize=Bp((function(){n.forceFit()}),300),n.ele=S,n.canvas=A,n.width=_.width,n.height=_.height,n.autoFit=s,n.localRefresh=f,n.renderer=h,n.wrapperElement=k,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(E),n}return Mh(t,e),t.prototype.initDefaultInteractions=function(e){var t=this;Uh(e,(function(e){t.interaction(e)}))},t.prototype.aria=function(e){var t="aria-label";!1===e?this.ele.removeAttribute(t):this.ele.setAttribute(t,e.label)},t.prototype.changeSize=function(e,t){return this.width===e&&this.height===t||(this.emit(dd.BEFORE_CHANGE_SIZE),this.width=e,this.height=t,this.canvas.changeSize(e,t),this.render(!0),this.emit(dd.AFTER_CHANGE_SIZE)),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.aria(!1)},t.prototype.destroy=function(){var t,n;e.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),t=this.wrapperElement,(n=t.parentNode)&&n.removeChild(t),this.wrapperElement=null},t.prototype.changeVisible=function(t){return e.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},t.prototype.forceFit=function(){if(!this.destroyed){var e=Bd(this.ele,!0,this.width,this.height),t=e.width,n=e.height;this.changeSize(t,n)}},t.prototype.updateCanvasStyle=function(){Rd(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},t.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},t.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},t}(PS),BS=function(){function e(e){this.visible=!0,this.components=[],this.view=e}return e.prototype.clear=function(e){Uh(this.components,(function(e){e.component.destroy()})),this.components=[]},e.prototype.destroy=function(){this.clear()},e.prototype.getComponents=function(){return this.components},e.prototype.changeVisible=function(e){this.visible!==e&&(this.components.forEach((function(t){e?t.component.show():t.component.hide()})),this.visible=e)},e}();var zS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isLocked=!1,t}return Mh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.isVisible=function(){return!1!==this.view.getOptions().tooltip},t.prototype.render=function(){},t.prototype.showTooltip=function(e){if(this.point=e,this.isVisible()){var t=this.view,n=this.getTooltipItems(e);if(n.length){var r=this.getTitle(n),i={x:n[0].x,y:n[0].y};t.emit("tooltip:show",OS.fromData(t,"tooltip:show",Nh({items:n,title:r},e)));var a=this.getTooltipCfg(),o=a.follow,s=a.showMarkers,l=a.showCrosshairs,c=a.showContent,u=a.marker,h=this.items,p=this.title;if(Vp(p,r)&&Vp(h,n)?(this.tooltip&&o&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()):(t.emit("tooltip:change",OS.fromData(t,"tooltip:change",Nh({items:n,title:r},e))),(jh(c)?c(n):c)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Rp({},a,{items:this.getItemsAfterProcess(n),title:r},o?e:{})),this.tooltip.show()),s&&this.renderTooltipMarkers(n,u)),this.items=n,this.title=r,l){var d=qp(a,["crosshairs","follow"],!1);this.renderCrosshairs(d?e:i,a)}}else this.hideTooltip()}},t.prototype.hideTooltip=function(){if(this.getTooltipCfg().follow){var e=this.tooltipMarkersGroup;e&&e.hide();var t=this.xCrosshair,n=this.yCrosshair;t&&t.hide(),n&&n.hide();var r=this.tooltip;r&&r.hide(),this.view.emit("tooltip:hide",OS.fromData(this.view,"tooltip:hide",{})),this.point=null}else this.point=null},t.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},t.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},t.prototype.isTooltipLocked=function(){return this.isLocked},t.prototype.clear=function(){var e=this,t=e.tooltip,n=e.xCrosshair,r=e.yCrosshair,i=e.tooltipMarkersGroup;t&&(t.hide(),t.clear()),n&&n.clear(),r&&r.clear(),i&&i.clear(),(null==t?void 0:t.get("customContent"))&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},t.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},t.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},t.prototype.changeVisible=function(e){if(this.visible!==e){var t=this,n=t.tooltip,r=t.tooltipMarkersGroup,i=t.xCrosshair,a=t.yCrosshair;e?(n&&n.show(),r&&r.show(),i&&i.show(),a&&a.show()):(n&&n.hide(),r&&r.hide(),i&&i.hide(),a&&a.hide()),this.visible=e}},t.prototype.getTooltipItems=function(e){var t=this.findItemsFromView(this.view,e);if(t.length){for(var n=0,r=t=Zh(t);n<r.length;n++)for(var i=0,a=r[n];i<a.length;i++){var o=a[i],s=o.mappingData,l=s.x,c=s.y;o.x=$h(l)?l[l.length-1]:l,o.y=$h(c)?c[c.length-1]:c}if(!1===this.getTooltipCfg().shared&&t.length>1){for(var u=t[0],h=Math.abs(e.y-u[0].y),p=0,d=t;p<d.length;p++){var f=d[p],m=Math.abs(e.y-f[0].y);m<=h&&(u=f,h=m)}t=[u]}return function(e){for(var t=[],n=function(n){var r=e[n];Kh(t,(function(e){return e.color===r.color&&e.name===r.name&&e.value===r.value&&e.title===r.title}))||t.push(r)},r=0;r<e.length;r++)n(r);return t}(Zh(t))}return[]},t.prototype.layout=function(){},t.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}})}},t.prototype.isCursorEntered=function(e){if(this.tooltip){var t=this.tooltip.getContainer(),n=this.tooltip.get("capture");if(t&&n){var r=t.getBoundingClientRect(),i=r.x,a=r.y,o=r.width,s=r.height;return new jT(i,a,o,s).isPointIn(e)}}return!1},t.prototype.getTooltipCfg=function(){var e=this.view,t=e.getOptions().tooltip,n=this.processCustomContent(t),r=e.getTheme(),i=qp(r,["components","tooltip"],{}),a=qp(n,"enterable",i.enterable);return jp({},i,n,{capture:!(!a&&!this.isLocked)})},t.prototype.processCustomContent=function(e){if(Ip(e)||!qp(e,"customContent"))return e;var t=e.customContent;return Nh(Nh({},e),{customContent:function(e,n){var r=t(e,n)||"";return ap(r)?'<div class="g2-tooltip">'+r+"</div>":r}})},t.prototype.getTitle=function(e){var t=e[0].title||e[0].name;return this.title=t,t},t.prototype.renderTooltip=function(){var e=this.view.getCanvas(),t={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},n=this.getTooltipCfg(),r=new IT(Nh(Nh({parent:e.get("el").parentNode,region:t},n),{visible:!1,crosshairs:null}));r.init(),this.tooltip=r},t.prototype.renderTooltipMarkers=function(e,t){for(var n=this.getTooltipMarkersGroup(),r=0,i=e;r<i.length;r++){var a=i[r],o=a.x,s=a.y,l=Nh(Nh({fill:a.color,symbol:"circle",shadowColor:a.color},t),{x:o,y:s});n.addShape("marker",{attrs:l})}},t.prototype.renderCrosshairs=function(e,t){var n=qp(t,["crosshairs","type"],"x");"x"===n?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,t)):"y"===n?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,t)):"xy"===n&&(this.renderXCrosshairs(e,t),this.renderYCrosshairs(e,t))},t.prototype.renderXCrosshairs=function(e,t){var n=this.getViewWithGeometry(this.view).getCoordinate();if(YT(n,e)){var r,i;if(n.isRect)n.isTransposed?(r={x:n.start.x,y:e.y},i={x:n.end.x,y:e.y}):(r={x:e.x,y:n.end.y},i={x:e.x,y:n.start.y});else{var a=UT(n,e),o=n.getCenter(),s=n.getRadius();i=FT(o.x,o.y,s,a),r=o}var l=jp({start:r,end:i,container:this.getTooltipCrosshairsGroup()},qp(t,"crosshairs",{}),this.getCrosshairsText("x",e,t));delete l.type;var c=this.xCrosshair;c?c.update(l):(c=new jC(l)).init(),c.render(),c.show(),this.xCrosshair=c}},t.prototype.renderYCrosshairs=function(e,t){var n=this.getViewWithGeometry(this.view).getCoordinate();if(YT(n,e)){var r,i;if(n.isRect){var a=void 0,o=void 0;n.isTransposed?(a={x:e.x,y:n.end.y},o={x:e.x,y:n.start.y}):(a={x:n.start.x,y:e.y},o={x:n.end.x,y:e.y}),r={start:a,end:o},i="Line"}else r={center:n.getCenter(),radius:$T(n,e),startAngle:n.startAngle,endAngle:n.endAngle},i="Circle";delete(r=jp({container:this.getTooltipCrosshairsGroup()},r,qp(t,"crosshairs",{}),this.getCrosshairsText("y",e,t))).type;var s=this.yCrosshair;s?n.isRect&&"circle"===s.get("type")||!n.isRect&&"line"===s.get("type")?(s=new UC[i](r)).init():s.update(r):(s=new UC[i](r)).init(),s.render(),s.show(),this.yCrosshair=s}},t.prototype.getCrosshairsText=function(e,t,n){var r=qp(n,["crosshairs","text"]),i=qp(n,["crosshairs","follow"]),a=this.items;if(r){var o=this.getViewWithGeometry(this.view),s=a[0],l=o.getXScale(),c=o.getYScales()[0],u=void 0,h=void 0;if(i){var p=this.view.getCoordinate().invert(t);u=l.invert(p.x),h=c.invert(p.y)}else u=s.data[l.field],h=s.data[c.field];var d="x"===e?u:h;return jh(r)?r=r(e,d,a,t):r.content=d,{text:r}}},t.prototype.getGuideGroup=function(){if(!this.guideGroup){var e=this.view.foregroundGroup;this.guideGroup=e.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},t.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):((e=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"})).toFront(),this.tooltipMarkersGroup=e),e},t.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||((e=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1})).toBack(),this.tooltipCrosshairsGroup=e),e},t.prototype.findItemsFromView=function(e,t){if(!1===e.getOptions().tooltip)return[];for(var n=wS(e,t,this.getTooltipCfg()),r=0,i=e.views;r<i.length;r++){var a=i[r];n=n.concat(this.findItemsFromView(a,t))}return n},t.prototype.getViewWithGeometry=function(e){var t=this;return e.geometries.length?e:Kh(e.views,(function(e){return t.getViewWithGeometry(e)}))},t.prototype.getItemsAfterProcess=function(e){var t=this.getTooltipCfg().customItems;return(t||function(e){return e})(e)},t}(BS),HS={};function jS(e){return HS[e.toLowerCase()]}function GS(e,t){HS[e.toLowerCase()]=t}var $S={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},YS={interval:function(e){return{enter:{animation:e.isRect?e.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:e.isPolar&&e.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},US={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(e){var t;return e.isRect?t=e.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",e.isPolar&&e.isTransposed&&(t="wave-in")),{animation:t}},schema:function(e){return{animation:e.isRect?e.isTransposed?"grow-in-x":"grow-in-y":"grow-in-xy"}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function VS(e,t,n){var r=YS[e];return r&&(jh(r)&&(r=r(t)),r=jp({},$S,r),n)?r[n]:r}function WS(e,t,n){var r=qp(e.get("origin"),"data","_origin"),i=t.animation,a=function(e,t){return{delay:jh(e.delay)?e.delay(t):e.delay,easing:jh(e.easing)?e.easing(t):e.easing,duration:jh(e.duration)?e.duration(t):e.duration,callback:e.callback,repeat:e.repeat}}(t,r);if(i){var o=jS(i);o&&o(e,a,n)}else e.animate(n.toAttrs,a)}var XS=function(e){function t(t){var n=e.call(this,t)||this;n.states=[];var r=t.shapeFactory,i=t.container,a=t.offscreenGroup,o=t.elementIndex,s=t.visible,l=void 0===s||s;return n.shapeFactory=r,n.container=i,n.offscreenGroup=a,n.visible=l,n.elementIndex=o,n}return Mh(t,e),t.prototype.draw=function(e,t){void 0===t&&(t=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,t),!1===this.visible&&this.changeVisible(!1)},t.prototype.update=function(e){var t=this.shapeFactory,n=this.shape;if(n){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(n,e);var r=this.getOffscreenGroup(),i=t.drawShape(this.shapeType,e,r);i.cfg.data=this.data,i.cfg.origin=e,i.cfg.element=this,this.syncShapeStyle(n,i,this.getStates(),this.getAnimateCfg("update"))}},t.prototype.destroy=function(){var t=this.shapeFactory,n=this.shape;if(n){var r=this.getAnimateCfg("leave");r?WS(n,r,{coordinate:t.coordinate,toAttrs:Nh({},n.attr())}):n.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach((function(e){e.show()}))):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach((function(e){e.hide()})))},t.prototype.setState=function(e,t){var n=this,r=n.states,i=n.shapeFactory,a=n.model,o=n.shape,s=n.shapeType,l=r.indexOf(e);if(t){if(l>-1)return;r.push(e),"active"!==e&&"selected"!==e||null==o||o.toFront()}else{if(-1===l)return;r.splice(l,1),"active"!==e&&"selected"!==e||(this.geometry.zIndexReversed?o.setZIndex(this.geometry.elements.length-this.elementIndex):o.setZIndex(this.elementIndex))}var c=i.drawShape(s,a,this.getOffscreenGroup());r.length?this.syncShapeStyle(o,c,r,null):this.syncShapeStyle(o,c,["reset"],null),c.remove(!0);var u={state:e,stateStatus:t,element:this,target:this.container};this.container.emit("statechange",u),Db(this.shape,"statechange",u)},t.prototype.clearStates=function(){var e=this;Uh(this.states,(function(t){e.setState(t,!1)})),this.states=[]},t.prototype.hasState=function(e){return this.states.includes(e)},t.prototype.getStates=function(){return this.states},t.prototype.getData=function(){return this.data},t.prototype.getModel=function(){return this.model},t.prototype.getBBox=function(){var e=this.shape,t=this.labelShape,n={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return e&&(n=e.getCanvasBBox()),t&&t.forEach((function(e){var t=e.getCanvasBBox();n.x=Math.min(t.x,n.x),n.y=Math.min(t.y,n.y),n.minX=Math.min(t.minX,n.minX),n.minY=Math.min(t.minY,n.minY),n.maxX=Math.max(t.maxX,n.maxX),n.maxY=Math.max(t.maxY,n.maxY)})),n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n},t.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,t=e.shapeType,n=e.geometry,r=e.shapeFactory,i=n.stateOption,a=r.defaultShapeType,o=r.theme[t]||r.theme[a];this.statesStyle=jp({},o,i)}return this.statesStyle},t.prototype.getStateStyle=function(e,t){var n=this.getStatesStyle(),r=qp(n,[e,"style"],{}),i=r[t]||r;return jh(i)?i(this):i},t.prototype.getAnimateCfg=function(e){var t=this,n=this.animate;if(n){var r=n[e];return r?Nh(Nh({},r),{callback:function(){var e;jh(r.callback)&&r.callback(),null===(e=t.geometry)||void 0===e||e.emit(md.AFTER_DRAW_ANIMATE)}}):r}return null},t.prototype.drawShape=function(e,t){var n;void 0===t&&(t=!1);var r=this,i=r.shapeFactory,a=r.container,o=r.shapeType;if(this.shape=i.drawShape(o,e,a),this.shape){this.setShapeInfo(this.shape,e);var s=this.shape.cfg.name;s?ap(s)&&(this.shape.cfg.name=["element",s]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var l=t?"enter":"appear",c=this.getAnimateCfg(l);c&&(null===(n=this.geometry)||void 0===n||n.emit(md.BEFORE_DRAW_ANIMATE),WS(this.shape,c,{coordinate:i.coordinate,toAttrs:Nh({},this.shape.attr())}))}},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.setShapeInfo=function(e,t){var n=this;(e.cfg.origin=t,e.cfg.element=this,e.isGroup())&&e.get("children").forEach((function(e){n.setShapeInfo(e,t)}))},t.prototype.syncShapeStyle=function(e,t,n,r,i){var a,o=this;if(void 0===n&&(n=[]),void 0===i&&(i=0),e&&t){var s=e.get("clipShape"),l=t.get("clipShape");if(this.syncShapeStyle(s,l,n,r),e.isGroup())for(var c=e.get("children"),u=t.get("children"),h=0;h<c.length;h++)this.syncShapeStyle(c[h],u[h],n,r,i+h);else{if(!Yp(n)&&!Vp(n,["reset"])){var p=e.get("name");$h(p)&&(p=p[1]),Uh(n,(function(e){if("element-background"!==t.get("name")){var n=o.getStateStyle(e,p||i);t.attr(n)}}))}var d=DT(e,t);this.animate?r?(null===(a=this.geometry)||void 0===a||a.emit(md.BEFORE_DRAW_ANIMATE),WS(e,r,{coordinate:this.shapeFactory.coordinate,toAttrs:d,shapeModel:this.model})):Yp(n)?e.attr(d):(e.stopAnimate(),e.animate(d,{duration:300})):e.attr(d)}}},t.prototype.getShapeType=function(e){var t=qp(e,"shape");return $h(t)?t[0]:t},t}(Hd),qS={},KS={};function QS(e,t){qS[e.toLowerCase()]=t}function ZS(e,t){KS[e.toLowerCase()]=t}var JS={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(e,t){var n=this.getShape(e);return n.getPoints?n.getPoints(t):this.getDefaultPoints(t)},getShape:function(e){var t=this[e]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(e){return qp(e,[this.defaultShapeType,"default","style"],{})},getMarker:function(e,t){var n=this.getShape(e);if(!n.getMarker){var r=this.defaultShapeType;n=this.getShape(r)}var i=this.theme,a=qp(i,[e,"default"],{}),o=n.getMarker(t);return jp({},a,o)},drawShape:function(e,t,n){return this.getShape(e).draw(t,n)}},ek={coordinate:null,parsePath:function(e){var t=this.coordinate,n=mv(e);return n=t.isPolar?Ew(t,n):function(e,t){var n=[];return Uh(t,(function(t){switch(t[0].toLowerCase()){case"m":case"l":case"c":n.push(mw(t,e));break;case"a":n.push(gw(t,e));break;case"z":default:n.push(t)}})),n}(t,n)},parsePoint:function(e){return this.coordinate.convert(e)},parsePoints:function(e){var t=this.coordinate;return e.map((function(e){return t.convert(e)}))},draw:function(e,t){}},tk={};function nk(e,t){var n=Ap(e),r=Nh(Nh(Nh({},JS),t),{geometryType:e});return tk[n]=r,r}function rk(e,t,n){var r=Ap(e),i=tk[r],a=Nh(Nh({},ek),n);return i[t]=a,a}function ik(e){var t=Ap(e);return tk[t]}function ak(e,t){return hp(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],(function(n){return!Vp(e[n],t[n])}))}function ok(e){return $h(e)?e:e.split("*")}function sk(e,t){for(var n=[],r=[],i=[],a=new Map,o=0;o<t.length;o++){var s=t[o];e[s]?r.push(s):n.push(s),a.set(s,!0)}return Object.keys(e).forEach((function(e){a.has(e)||i.push(e)})),{added:n,updated:r,removed:i}}var lk=function(e){function t(t){var n=e.call(this,t)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var r=t.container,i=t.labelsContainer,a=t.coordinate,o=t.data,s=t.sortable,l=void 0!==s&&s,c=t.visible,u=void 0===c||c,h=t.theme,p=t.scales,d=void 0===p?{}:p,f=t.scaleDefs,m=void 0===f?{}:f,g=t.intervalPadding,v=t.dodgePadding,y=t.maxColumnWidth,x=t.minColumnWidth,E=t.columnWidthRatio,b=t.roseWidthRatio,C=t.multiplePieWidthRatio,T=t.zIndexReversed;return n.container=r,n.labelsContainer=i,n.coordinate=a,n.data=o,n.sortable=l,n.visible=u,n.userTheme=h,n.scales=d,n.scaleDefs=m,n.intervalPadding=g,n.dodgePadding=v,n.maxColumnWidth=y,n.minColumnWidth=x,n.columnWidthRatio=E,n.roseWidthRatio=b,n.multiplePieWidthRatio=C,n.zIndexReversed=T,n}return Mh(t,e),t.prototype.position=function(e){var t=e;qh(e)||(t={fields:ok(e)});var n=qp(t,"fields");return 1===n.length&&(n.unshift("1"),Kp(t,"fields",n)),Kp(this.attributeOption,"position",t),this},t.prototype.color=function(e,t){return this.createAttrOption("color",e,t),this},t.prototype.shape=function(e,t){return this.createAttrOption("shape",e,t),this},t.prototype.size=function(e,t){return this.createAttrOption("size",e,t),this},t.prototype.adjust=function(e){var t=e;return(ap(e)||qh(e))&&(t=[e]),Uh(t,(function(e,n){Yh(e)||(t[n]={type:e})})),this.adjustOption=t,this},t.prototype.style=function(e,t){if(ap(e)){var n=ok(e);this.styleOption={fields:n,callback:t}}else{var r=e,i=(n=r.fields,r.callback),a=r.cfg;this.styleOption=n||i||a?e:{cfg:e}}return this},t.prototype.tooltip=function(e,t){if(ap(e)){var n=ok(e);this.tooltipOption={fields:n,callback:t}}else this.tooltipOption=e;return this},t.prototype.animate=function(e){return this.animateOption=e,this},t.prototype.label=function(e,t,n){if(ap(e)){var r={},i=ok(e);r.fields=i,jh(t)?r.callback=t:qh(t)&&(r.cfg=t),n&&(r.cfg=n),this.labelOption=r}else this.labelOption=e;return this},t.prototype.state=function(e){return this.stateOption=e,this},t.prototype.customInfo=function(e){return this.customOption=e,this},t.prototype.init=function(e){void 0===e&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},t.prototype.update=function(e){void 0===e&&(e={});var t=e.data,n=e.isDataChanged,r=e.isCoordinateChanged,i=this.attributeOption,a=this.lastAttributeOption;Vp(i,a)?!t||!n&&Vp(t,this.data)?this.setCfg(e):(this.setCfg(e),this.initAttributes(),this.processData(t)):this.init(e),this.adjustScale(),this.isCoordinateChanged=r},t.prototype.paint=function(e){void 0===e&&(e=!1),this.animateOption&&(this.animateOption=jp({},VS(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[],this.getOffscreenGroup().clear();var t=this.beforeMappingData,n=this.beforeMapping(t);this.dataArray=new Array(n.length);for(var r=0;r<n.length;r++){var i=n[r];this.dataArray[r]=this.mapping(i)}if(this.updateElements(this.dataArray,e),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(e)){var a=this.container,o=this.type,s=this.coordinate,l=qp(this.animateOption,"appear"),c=this.getYScale(),u=s.convert({x:0,y:c.scale(this.getYMinValue())});!function(e,t,n,r,i){if(US[n]){var a=US[n](r),o=jS(qp(a,"animation",""));if(o){var s=Nh(Nh(Nh({},$S.appear),a),t);e.stopAnimate(),o(e,s,{coordinate:r,minYPoint:i,toAttrs:null})}}}(a,l,o,s,u)}this.labelOption&&this.renderLabels(Zh(this.dataArray),e),this.lastAttributeOption=Nh({},this.attributeOption),!1===this.visible&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this,t=e.container,n=e.geometryLabel,r=e.offscreenGroup;t&&t.clear(),n&&n.clear(),r&&r.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},t.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,e.prototype.destroy.call(this)},t.prototype.getGroupScales=function(){return this.groupScales},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},t.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},t.prototype.getGroupAttributes=function(){var e=[];return Uh(this.attributes,(function(t){Ad.includes(t.type)&&e.push(t)})),e},t.prototype.getDefaultValue=function(e){var t,n=this.getAttribute(e);return n&&Yp(n.scales)&&(t=n.values[0]),t},t.prototype.getAttributeValues=function(e,t){for(var n=[],r=e.scales,i=0,a=r.length;i<a;i++){var o=r[i],s=o.field;o.isIdentity?n.push(o.values):n.push(t[s])}return e.mapping.apply(e,n)},t.prototype.getAdjust=function(e){return this.adjusts[e]},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.getData=function(){return this.data},t.prototype.getShapeMarker=function(e,t){return this.getShapeFactory().getMarker(e,t)},t.prototype.getElementsBy=function(e){return this.elements.filter((function(t){return e(t)}))},t.prototype.getElements=function(){return this.elements},t.prototype.getElementId=function(e){var t=(e=$h(e)?e[0]:e)._origin;if(this.idFields.length){for(var n=t[this.idFields[0]],r=1;r<this.idFields.length;r++)n+="-"+t[this.idFields[r]];return n}var i,a,o=this.type,s=this.getXScale(),l=this.getYScale(),c=s.field||"x",u=t[l.field||"y"];i="identity"===s.type?s.values[0]:t[c],a="interval"===o||"schema"===o?"".concat(i):"line"===o||"area"===o||"path"===o?o:"".concat(i,"-").concat(u);var h=this.groupScales;Yp(h)&&(h=qp(this.getAttribute("color"),"scales",[]));r=0;for(var p=h.length;r<p;r++){var d=h[r].field;a="".concat(a,"-").concat(t[d])}var f=this.getAdjust("dodge");if(f){var m=f.dodgeBy;m&&(a="".concat(a,"-").concat(t[m]))}return this.getAdjust("jitter")&&(a="".concat(a,"-").concat(e.x,"-").concat(e.y)),a},t.prototype.getScaleFields=function(){var e=[],t=new Map,n=this,r=n.attributeOption,i=n.labelOption,a=n.tooltipOption;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s.fields?HT(s.fields,e,t):s.values&&HT(s.values,e,t)}return i&&i.fields&&HT(i.fields,e,t),Yh(a)&&a.fields&&HT(a.fields,e,t),e},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.elements,r=0,i=n.length;r<i;r++){n[r].changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},t.prototype.getFields=function(){var e=new Map,t=[];return Object.values(this.attributeOption).forEach((function(n){((null==n?void 0:n.fields)||[]).forEach((function(n){e.has(n)||t.push(n),e.set(n,!0)}))}),[]),t},t.prototype.getGroupFields=function(){for(var e=[],t=new Map,n=0,r=Ad.length;n<r;n++){var i=Ad[n],a=this.attributeOption[i];a&&a.fields&&HT(a.fields,e,t)}return e},t.prototype.getXYFields=function(){var e=this.attributeOption.position.fields;return[e[0],e[1]]},t.prototype.getXField=function(){return qp(this.getXYFields(),[0])},t.prototype.getYField=function(){return qp(this.getXYFields(),[1])},t.prototype.getShapes=function(){return this.elements.map((function(e){return e.shape}))},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.sort=function(e){if(!this.hasSorted)for(var t=this.getXScale(),n=t.field,r=0;r<e.length;r++){e[r].sort((function(e,r){return t.translate(e._origin[n])-t.translate(r._origin[n])}))}this.hasSorted=!0},t.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust("stack")&&this.updateStackRange(e,this.beforeMappingData)},t.prototype.getShapeFactory=function(){var e=this.shapeType;if(ik(e))return this.shapeFactory||(this.shapeFactory=Dp(ik(e))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},t.prototype.createShapePointsCfg=function(e){var t=this.getXScale(),n=this.getYScale();return{x:this.normalizeValues(e[t.field],t),y:n?this.normalizeValues(e[n.field],n):e.y?e.y:.1,y0:n?n.scale(this.getYMinValue()):void 0}},t.prototype.createElement=function(e,t,n){void 0===n&&(n=!1);var r=this.container,i=this.getDrawCfg(e),a=this.getShapeFactory(),o=new XS({shapeFactory:a,container:r,offscreenGroup:this.getOffscreenGroup(),elementIndex:t});return o.animate=this.animateOption,o.geometry=this,o.draw(i,n),o},t.prototype.getDrawCfg=function(e){var t=e._origin,n={mappingData:e,data:t,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},r=e.shape;!r&&this.getShapeFactory()&&(r=this.getShapeFactory().defaultShapeType),n.shape=r;var i=this.theme.geometries[this.shapeType];n.defaultStyle=qp(i,[r,"default"],{}).style,!n.defaultStyle&&this.getShapeFactory()&&(n.defaultStyle=this.getShapeFactory().getDefaultStyle(i));var a=this.styleOption;return a&&(n.style=this.getStyleCfg(a,t)),this.generatePoints&&(n.points=e.points,n.nextPoints=e.nextPoints),n},t.prototype.updateElements=function(e,t){void 0===t&&(t=!1);for(var n=new Map,r=[],i=new Map,a=0,o=0;o<e.length;o++)for(var s=e[o],l=0;l<s.length;l++){var c=s[l],u=this.getElementId(c),h=n.has(u)?"".concat(u,"-").concat(o,"-").concat(l):u;r.push(h),n.set(h,c),i.set(h,a),a++}this.elements=new Array(a);for(var p=sk(this.lastElementsMap,r),d=p.added,f=p.updated,m=p.removed,g=0,v=d;g<v.length;g++){u=v[g],c=n.get(u),o=i.get(u);var y=this.createElement(c,o,t);this.elements[o]=y,this.elementsMap[u]=y,y.shape&&y.shape.setZIndex(this.zIndexReversed?this.elements.length-o:o)}for(var x=0,E=f;x<E.length;x++){u=E[x],y=this.lastElementsMap[u],c=n.get(u);var b=this.getDrawCfg(c),C=y.getModel();o=i.get(u);(this.isCoordinateChanged||ak(b,C))&&(y.animate=this.animateOption,y.update(b)),this.elements[o]=y,this.elementsMap[u]=y,y.shape&&y.shape.setZIndex(this.zIndexReversed?this.elements.length-o:o)}for(var T=0,w=m;T<w.length;T++){u=w[T];(y=this.lastElementsMap[u]).animate=this.animateOption,y.destroy()}},t.prototype.getLabelType=function(){var e=this,t=e.labelOption,n=e.coordinate,r=e.type,i=n.type,a=n.isTransposed,o=qp(t,["cfg","type"]);return o||(o="polar"===i?a?"pie":"polar":"theta"===i?"pie":"interval"===r||"polygon"===r?"interval":"base"),o},t.prototype.getYMinValue=function(){var e=this.getYScale(),t=e.min,n=e.max;return t>=0?t:n<=0?n:0},t.prototype.createAttrOption=function(e,t,n){if(Gh(t)||Yh(t))Yh(t)&&Vp(Object.keys(t),["values"])?Kp(this.attributeOption,e,{fields:t.values}):Kp(this.attributeOption,e,t);else{var r={};vp(t)?r.values=[t]:r.fields=ok(t),n&&(jh(n)?r.callback=n:r.values=n),Kp(this.attributeOption,e,r)}},t.prototype.initAttributes=function(){var e=this,t=this,n=t.attributes,r=t.attributeOption,i=t.theme,a=t.shapeType;this.groupScales=[];var o={},s=function(t){if(r.hasOwnProperty(t)){var s=r[t];if(!s)return{value:void 0};var l=Nh({},s),c=l.callback,u=l.values,h=l.fields,p=(void 0===h?[]:h).map((function(n){var r=e.scales[n];return r.isCategory&&!o[n]&&Ad.includes(t)&&(e.groupScales.push(r),o[n]=!0),r}));l.scales=p,"position"!==t&&1===p.length&&"identity"===p[0].type?l.values=p[0].values:c||u||("size"===t?l.values=i.sizes:"shape"===t?l.values=i.shapes[a]||[]:"color"===t&&(p.length?l.values=p[0].values.length<=10?i.colors10:i.colors20:l.values=i.colors10));var d=Dx(t);n[t]=new d(l)}};for(var l in r){var c=s(l);if("object"==typeof c)return c.value}},t.prototype.processData=function(e){this.hasSorted=!1;for(var t=this.getAttribute("position").scales.filter((function(e){return e.isCategory})),n=this.groupData(e),r=[],i=0,a=n.length;i<a;i++){for(var o=n[i],s=[],l=0,c=o.length;l<c;l++){var u=o[l],h={};for(var p in u)h[p]=u[p];h._origin=u;for(var d=0,f=t;d<f.length;d++){var m=f[d],g=m.field;h[g]=m.translate(h[g])}s.push(h)}r.push(s)}var v=this.adjustData(r);return this.beforeMappingData=v,v},t.prototype.adjustData=function(e){var t=this.adjustOption,n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.theme,o=this.maxColumnWidth||a.maxColumnWidth,s=this.minColumnWidth||a.minColumnWidth,l=this.columnWidthRatio||a.columnWidthRatio,c=e;if(t){var u=this.getXScale(),h=this.getYScale(),p=u.field,d=h?h.field:null,f=GT(this.coordinate),m=u.values.length,g=this.getAttribute("size"),v=void 0;g&&(v=g.values[0]);for(var y=0,x=t.length;y<x;y++){var E=t[y],b=Nh({xField:p,yField:d,intervalPadding:r,dodgePadding:i,xDimensionLength:f,groupNum:m,defaultSize:v,maxColumnWidth:o,minColumnWidth:s,columnWidthRatio:l},E),C=E.type;if("dodge"===C){var T=[];if(u.isCategory||"identity"===u.type)T.push("x");else{if(h)throw new Error("dodge is not support linear attribute, please use category attribute!");T.push("y")}b.adjustNames=T,b.dodgeRatio=l}else if("stack"===C){var w=this.coordinate;if(!h){b.height=w.getHeight();var S=this.getDefaultValue("size")||3;b.size=S}!w.isTransposed&&Gh(b.reverseOrder)&&(b.reverseOrder=!0)}var k=new(Rv(C))(b);c=k.process(c),this.adjusts[C]=k}}return c},t.prototype.groupData=function(e){for(var t=this.getGroupScales(),n=this.scaleDefs,r={},i=[],a=0;a<t.length;a++){var o=t[a].field;i.push(o),qp(n,[o,"values"])&&(r[o]=n[o].values)}return function(e,t,n){if(void 0===n&&(n={}),!t)return[e];var r=fp(e,t),i=[];if(1===t.length&&n[t[0]])for(var a=0,o=n[t[0]];a<o.length;a++){var s=o[a],l=r["_".concat(s)];l&&i.push(l)}else for(var c in r)if(r.hasOwnProperty(c)){var u=r[c];i.push(u)}return i}(e,i,r)},t.prototype.updateStackRange=function(e,t){for(var n=Zh(t),r=e.field,i=e.min,a=e.max,o=0;o<n.length;o++){var s=n[o],l=Math.min.apply(null,s[r]),c=Math.max.apply(null,s[r]);l<i&&(i=l),c>a&&(a=c)}var u=this.scaleDefs,h={};i<e.min&&!qp(u,[r,"min"])&&(h.min=i),a>e.max&&!qp(u,[r,"max"])&&(h.max=a),e.change(h)},t.prototype.beforeMapping=function(e){var t=e;if(this.sortable&&this.sort(t),this.generatePoints)for(var n=0,r=t.length;n<r;n++){var i=t[n];this.generateShapePoints(i);var a=t[n+1];a&&(this.generateShapePoints(a),i[0].nextPoints=a[0].points)}return t},t.prototype.generateShapePoints=function(e){for(var t=this.getShapeFactory(),n=this.getAttribute("shape"),r=0;r<e.length;r++){var i=e[r],a=this.createShapePointsCfg(i),o=n?this.getAttributeValues(n,i):null,s=t.getShapePoints(o,a);i.points=s}},t.prototype.normalizeValues=function(e,t){var n=[];if($h(e))for(var r=0;r<e.length;r++){var i=e[r];n.push(t.scale(i))}else n=t.scale(e);return n},t.prototype.mapping=function(e){for(var t=this.attributes,n=[],r=0;r<e.length;r++){var i=e[r],a={_origin:i._origin,points:i.points,nextPoints:i.nextPoints};for(var o in t)if(t.hasOwnProperty(o)){var s=t[o],l=s.names,c=this.getAttributeValues(s,i);if(l.length>1)for(var u=0;u<c.length;u+=1){var h=c[u];a[l[u]]=$h(h)&&1===h.length?h[0]:h}else a[l[0]]=1===c.length?c[0]:c}this.convertPoint(a),n.push(a)}return n},t.prototype.convertPoint=function(e){var t,n,r,i=e.x,a=e.y,o=this.coordinate;if($h(i)&&$h(a)){t=[],n=[];for(var s=0,l=0,c=i.length,u=a.length;s<c&&l<u;s+=1,l+=1)r=o.convert({x:i[s],y:a[l]}),t.push(r.x),n.push(r.y)}else if($h(a)){n=[];for(var h=0;h<a.length;h++){var p=a[h];r=o.convert({x:i,y:p}),t&&t!==r.x?($h(t)||(t=[t]),t.push(r.x)):t=r.x,n.push(r.y)}}else if($h(i)){t=[];for(h=0;h<i.length;h++){var d=i[h];r=o.convert({x:d,y:a}),n&&n!==r.y?($h(n)||(n=[n]),n.push(r.y)):n=r.y,t.push(r.x)}}else{var f=o.convert({x:i,y:a});t=f.x,n=f.y}e.x=t,e.y=n},t.prototype.getStyleCfg=function(e,t){var n=e.fields,r=void 0===n?[]:n,i=e.callback,a=e.cfg;if(a)return a;var o=r.map((function(e){return t[e]}));return i.apply(void 0,o)},t.prototype.setCfg=function(e){var t=this,n=e.coordinate,r=e.data,i=e.theme,a=e.scaleDefs;n&&(this.coordinate=n),r&&(this.data=r),a&&(this.scaleDefs=a,this.idFields=[],Uh(a,(function(e,n){e&&e.key&&t.idFields.push(n)}))),i&&(this.theme=this.userTheme?jp({},i,this.userTheme):i)},t.prototype.renderLabels=function(e,t){void 0===t&&(t=!1);var n=this.geometryLabel;if(!n){var r=this.getLabelType();n=new(0,qS[r.toLowerCase()])(this),this.geometryLabel=n}n.render(e,t);var i=n.labelsRenderer.shapesMap;Uh(this.elementsMap,(function(e,t){var n=function(e,t){var n=[];return Uh(t,(function(t,r){r.split(" ")[0]===e&&n.push(t)})),n}(t,i);if(n.length){e.labelShape=n;for(var r=0;r<n.length;r++)for(var a=n[r].getChildren(),o=0;o<a.length;o++){var s=a[o];s.cfg.name=["element","label"],s.cfg.element=e}}}))},t.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(void 0===qp(this.animateOption,"appear")||qp(this.animateOption,"appear")&&void 0===qp(this.animateOption,["appear","animation"]))},t}(Hd),ck=nm;function uk(e,t,n){var r=ck(e.getMatrix(),[["t",t,n]]);e.setMatrix(r)}function hk(e,t){var n=function(e,t){var n=e.attr(),r=n.x,i=n.y;return ck(e.getMatrix(),[["t",-r,-i],["r",t],["t",r,i]])}(e,t);e.setMatrix(n)}function pk(e){return e.find((function(e){return"text"===e.get("type")}))}function dk(e,t,n){void 0===n&&(n=[0,0,0,0]);var r=e.getChildren()[0];if(r){var i=r.clone();(null==t?void 0:t.rotate)&&hk(i,-t.rotate);var a=i.getCanvasBBox(),o=a.x,s=a.y,l=a.width,c=a.height;i.destroy();var u=n;return Gh(u)?u=[2,2,2,2]:vp(u)&&(u=new Array(4).fill(u)),{x:o-u[3],y:s-u[0],width:l+u[1]+u[3],height:c+u[0]+u[2],rotation:(null==t?void 0:t.rotate)||0}}}function fk(e,t){var n=e.getBBox();return hp(t,(function(e){var t,r,i,a=e.getBBox();return t=n,r=a,void 0===(i=2)&&(i=0),Math.max(0,Math.min(t.x+t.width+i,r.x+r.width+i)-Math.max(t.x-i,r.x-i))*Math.max(0,Math.min(t.y+t.height+i,r.y+r.height+i)-Math.max(t.y-i,r.y-i))>0}))}function mk(e,t,n){var r=n.data,i=n.origin,a=n.animateCfg,o=n.coordinate,s=qp(a,"update");e.set("data",r),e.set("origin",i),e.set("animateCfg",a),e.set("coordinate",o),e.set("visible",t.get("visible")),e.getChildren().forEach((function(l,c){var u=t.getChildByIndex(c);if(u){l.set("data",r),l.set("origin",i),l.set("animateCfg",a),l.set("coordinate",o);var h=DT(l,u);s?WS(l,s,{toAttrs:h,coordinate:o}):l.attr(h),u.isGroup()&&mk(l,u,n)}else e.removeChild(l),l.remove(!0)})),Uh(t.getChildren(),(function(t,n){n>=e.getCount()&&(t.destroyed||e.add(t))}))}var gk=function(){function e(e){this.shapesMap={},this.lastShapesMap={};var t=e.layout,n=e.container;this.layout=t,this.container=n}return e.prototype.render=function(e,t,n){var r=this;void 0===n&&(n=!1),this.shapesMap={};var i=this.container,a=this.createOffscreenGroup();if(e.length){for(var o=0,s=e;o<s.length;o++){var l=s[o];l&&this.renderLabel(l,a)}this.doLayout(e,t),this.renderLabelLine(e),this.renderLabelBackground(e),this.adjustLabel(e)}var c=this.lastShapesMap,u=this.shapesMap;Uh(u,(function(e,t){if(e.destroyed)delete u[t];else{if(c[t]){var a=e.get("data"),o=e.get("origin"),s=e.get("coordinate"),l=e.get("animateCfg"),h=c[t];mk(h,u[t],{data:a,origin:o,animateCfg:l,coordinate:s}),r.shapesMap[t]=h}else{i.add(e);var p=qp(e.get("animateCfg"),n?"enter":"appear");p&&WS(e,p,{toAttrs:Nh({},e.attr()),coordinate:e.get("coordinate")})}delete c[t]}})),Uh(c,(function(e){var t=qp(e.get("animateCfg"),"leave");t?WS(e,t,{toAttrs:null,coordinate:e.get("coordinate")}):e.remove(!0)})),this.lastShapesMap=u,a.destroy()},e.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},e.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},e.prototype.renderLabel=function(e,t){var n,r,i=e.id,a=e.elementId,o=e.data,s=e.mappingData,l=e.coordinate,c=e.animate,u=e.content,h={id:i,elementId:a,data:o,origin:Nh(Nh({},s),{data:s._origin}),coordinate:l},p=t.addGroup(Nh({name:"label",animateCfg:!1!==this.animate&&null!==c&&!1!==c&&jp({},this.animate,c)},h));if(u.isGroup&&u.isGroup()||u.isShape&&u.isShape()){var d=u.getCanvasBBox(),f=d.width,m=d.height,g=qp(e,"textAlign","left"),v=e.x;"center"===g?v-=f/2:"right"!==g&&"end"!==g||(v-=f),uk(u,v,e.y-m/2),n=u,p.add(u)}else{var y=qp(e,["style","fill"]);n=p.addShape("text",Nh({attrs:Nh(Nh({x:e.x,y:e.y,textAlign:e.textAlign,textBaseline:qp(e,"textBaseline","middle"),text:e.content},e.style),{fill:(r=y,null===r?e.color:y)})},h))}e.rotate&&hk(n,e.rotate),this.shapesMap[i]=p},e.prototype.doLayout=function(e,t){var n=this;this.layout&&Uh($h(this.layout)?this.layout:[this.layout],(function(r){var i,a=(i=qp(r,"type",""),KS[i.toLowerCase()]);if(a){var o=[],s=[];Uh(n.shapesMap,(function(e,n){o.push(e),s.push(t[e.get("elementId")])})),a(e,o,s,n.region,r.cfg)}}))},e.prototype.renderLabelLine=function(e){var t=this;Uh(e,(function(e){var n=qp(e,"coordinate");if(e&&n){var r=n.getCenter(),i=n.getRadius();if(e.labelLine){var a=qp(e,"labelLine",{}),o=e.id,s=a.path;if(!s){var l=FT(r.x,r.y,i,e.angle);s=[["M",l.x,l.y],["L",e.x,e.y]]}var c=t.shapesMap[o];c.destroyed||c.addShape("path",{capture:!1,attrs:Nh({path:s,stroke:e.color?e.color:qp(e,["style","fill"],"#000"),fill:null},a.style),id:o,origin:e.mappingData,data:e.data,coordinate:e.coordinate})}}}))},e.prototype.renderLabelBackground=function(e){var t=this;Uh(e,(function(e){var n=qp(e,"coordinate"),r=qp(e,"background");if(r&&n){var i=e.id,a=t.shapesMap[i];if(!a.destroyed){var o=a.getChildren()[0];if(o){var s=dk(a,e,r.padding),l=s.rotation,c=Fh(s,["rotation"]),u=a.addShape("rect",{attrs:Nh(Nh({},c),r.style||{}),id:i,origin:e.mappingData,data:e.data,coordinate:e.coordinate});if(u.setZIndex(-1),l){var h=o.getMatrix();u.setMatrix(h)}}}}}))},e.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},e.prototype.adjustLabel=function(e){var t=this;Uh(e,(function(e){if(e){var n=e.id,r=t.shapesMap[n];if(!r.destroyed)Uh(r.findAll((function(e){return"path"!==e.get("type")})),(function(t){t&&(e.offsetX&&t.attr("x",t.attr("x")+e.offsetX),e.offsetY&&t.attr("y",t.attr("y")+e.offsetY))}))}}))},e}();function vk(e){var t=0;return Uh(e,(function(e){t+=e})),t/e.length}var yk=function(){function e(e){this.geometry=e}return e.prototype.getLabelItems=function(e){var t=this,n=[],r=this.getLabelCfgs(e);return Uh(e,(function(e,i){var a=r[i];if(!a||Gh(e.x)||Gh(e.y))n.push(null);else{var o=$h(a.content)?a.content:[a.content];a.content=o;var s=o.length;Uh(o,(function(r,i){if(Gh(r)||""===r)n.push(null);else{var o=Nh(Nh({},a),t.getLabelPoint(a,e,i));o.textAlign||(o.textAlign=t.getLabelAlign(o,i,s)),o.offset<=0&&(o.labelLine=null),n.push(o)}}))}})),n},e.prototype.render=function(e,t){void 0===t&&(t=!1);var n=this.getLabelItems(e),r=this.getLabelsRenderer(),i=this.getGeometryShapes();r.render(n,i,t)},e.prototype.clear=function(){var e=this.labelsRenderer;e&&e.clear()},e.prototype.destroy=function(){var e=this.labelsRenderer;e&&e.destroy(),this.labelsRenderer=null},e.prototype.getCoordinate=function(){return this.geometry.coordinate},e.prototype.getDefaultLabelCfg=function(e,t){var n=this.geometry,r=n.type,i=n.theme;return"polygon"===r||"interval"===r&&"middle"===t||e<0&&!["line","point","path"].includes(r)?qp(i,"innerLabels",{}):qp(i,"labels",{})},e.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.type,i=t.theme;return"polygon"===r||e.offset<0&&!["line","point","path"].includes(r)?jp({},n,i.innerLabels,e):jp({},n,i.labels,e)},e.prototype.setLabelPosition=function(e,t,n,r){},e.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=this.getOffsetVector(e);return t.isTransposed?n[0]:n[1]},e.prototype.getLabelOffsetPoint=function(e,t,n){var r=e.offset,i=this.getCoordinate().isTransposed,a=i?"x":"y",o=i?1:-1,s={x:0,y:0};return s[a]=t>0||1===n?r*o:r*o*-1,s},e.prototype.getLabelPoint=function(e,t,n){var r=this.getCoordinate(),i=e.content.length;function a(t,n,r){void 0===r&&(r=!1);var i=t;return $h(i)&&(i=1===e.content.length?r?vk(i):i.length<=2?i[t.length-1]:vk(i):i[n]),i}var o={content:e.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},s=$h(t.shape)?t.shape[0]:t.shape,l="funnel"===s||"pyramid"===s;if("polygon"===this.geometry.type){var c=function(e,t){if(vp(e)&&vp(t))return[e,t];if(t=t,MT(e=e)||MT(t))return[NT(e),NT(t)];for(var n,r,i=-1,a=0,o=0,s=e.length-1,l=0;++i<e.length;)n=s,s=i,l+=r=e[n]*t[s]-e[s]*t[n],a+=(e[n]+e[s])*r,o+=(t[n]+t[s])*r;return[a/(l*=3),o/l]}(t.x,t.y);o.x=c[0],o.y=c[1]}else"interval"!==this.geometry.type||l?(o.x=a(t.x,n),o.y=a(t.y,n)):(o.x=a(t.x,n,!0),o.y=a(t.y,n));if(l){var u=qp(t,"nextPoints"),h=qp(t,"points");if(u){var p=r.convert(h[1]),d=r.convert(u[1]);o.x=(p.x+d.x)/2,o.y=(p.y+d.y)/2}else if("pyramid"===s){p=r.convert(h[1]),d=r.convert(h[2]);o.x=(p.x+d.x)/2,o.y=(p.y+d.y)/2}}e.position&&this.setLabelPosition(o,t,n,e.position);var f=this.getLabelOffsetPoint(e,n,i);return o.start={x:o.x,y:o.y},o.x+=f.x,o.y+=f.y,o.color=t.color,o},e.prototype.getLabelAlign=function(e,t,n){var r="center";if(this.getCoordinate().isTransposed){var i=e.offset;r=i<0?"right":0===i?"center":"left",n>1&&0===t&&("right"===r?r="left":"left"===r&&(r="right"))}return r},e.prototype.getLabelId=function(e){var t=this.geometry,n=t.type,r=t.getXScale(),i=t.getYScale(),a=e._origin,o=t.getElementId(e);return"line"===n||"area"===n?o+=" ".concat(a[r.field]):"path"===n&&(o+=" ".concat(a[r.field],"-").concat(a[i.field])),o},e.prototype.getLabelsRenderer=function(){var e=this.geometry,t=e.labelsContainer,n=e.labelOption,r=e.canvasRegion,i=e.animateOption,a=this.geometry.coordinate,o=this.labelsRenderer;return o||(o=new gk({container:t,layout:qp(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=o),o.region=r,o.animate=!!i&&VS("label",a),o},e.prototype.getLabelCfgs=function(e){var t=this,n=this.geometry,r=n.labelOption,i=n.scales,a=n.coordinate,o=r,s=o.fields,l=o.callback,c=o.cfg,u=s.map((function(e){return i[e]})),h=[];return Uh(e,(function(e,n){var r,i=e._origin,o=t.getLabelText(i,u);if(l){var p=s.map((function(e){return i[e]}));if(r=l.apply(void 0,p),Gh(r))return void h.push(null)}var d=Nh(Nh({id:t.getLabelId(e),elementId:t.geometry.getElementId(e),data:i,mappingData:e,coordinate:a},c),r);jh(d.position)&&(d.position=d.position(i,e,n));var f=t.getLabelOffset(d.offset||0),m=t.getDefaultLabelCfg(f,d.position);(d=jp({},m,d)).offset=t.getLabelOffset(d.offset||0);var g=d.content;jh(g)?d.content=g(i,e,n):Fp(g)&&(d.content=o[0]),h.push(d)})),h},e.prototype.getLabelText=function(e,t){var n=[];return Uh(t,(function(t){var r=e[t.field];r=$h(r)?r.map((function(e){return t.getText(e)})):t.getText(r),Gh(r)||""===r?n.push(null):n.push(r)})),n},e.prototype.getOffsetVector=function(e){void 0===e&&(e=0);var t=this.getCoordinate(),n=0;return vp(e)&&(n=e),t.isTransposed?t.applyMatrix(n,0):t.applyMatrix(0,n)},e.prototype.getGeometryShapes=function(){var e=this.geometry,t={};return Uh(e.elementsMap,(function(e,n){t[n]=e.shape})),Uh(e.getOffscreenGroup().getChildren(),(function(n){var r=e.getElementId(n.get("origin").mappingData);t[r]=n})),t},e}();function xk(e,t,n){if(!e)return n;var r;if(e.callback&&e.callback.length>1){var i=Array(e.callback.length-1).fill("");r=e.mapping.apply(e,Ph([t],i,!1)).join("")}else r=e.mapping(t).join("");return r||n}var Ek={hexagon:function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},bowtie:function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},cross:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},tick:function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},plus:function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},hyphen:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},line:function(e,t,n){return[["M",e,t-n],["L",e,t+n]]}},bk=["line","cross","tick","plus","hyphen"];function Ck(e){var t=e.symbol;ap(t)&&Ek[t]&&(e.symbol=Ek[t])}function Tk(e){return e.startsWith(sd.LEFT)||e.startsWith(sd.RIGHT)?"vertical":"horizontal"}function wk(e,t,n,r,i){var a=n.getScale(n.type);if(a.isCategory){var o=a.field,s=t.getAttribute("color"),l=t.getAttribute("shape"),c=e.getTheme().defaultColor,u=t.coordinate.isPolar;return a.getTicks().map((function(n,h){var p,d=n.text,f=n.value,m=d,g=a.invert(f),v=0===e.filterFieldData(o,[(p={},p[o]=g,p)]).length;Uh(e.views,(function(e){var t;e.filterFieldData(o,[(t={},t[o]=g,t)]).length||(v=!0)}));var y,x,E=xk(s,g,c),b=xk(l,g,"point"),C=t.getShapeMarker(b,{color:E,isInPolar:u}),T=i;return jh(T)&&(T=T(m,h,Nh({name:m,value:g},jp({},r,C)))),function(e,t){var n=e.symbol;if(ap(n)&&-1!==bk.indexOf(n)){var r=qp(e,"style",{}),i=qp(r,"lineWidth",1),a=r.stroke||r.fill||t;e.style=jp({},e.style,{lineWidth:i,stroke:a,fill:null})}}(C=jp({},r,C,zT(Nh({},T),["style"])),E),T&&T.style&&(C.style=(y=C.style,x=T.style,jh(x)?x(y):jp({},y,x))),Ck(C),{id:g,name:m,value:g,marker:C,unchecked:v}}))}return[]}function Sk(e,t){var n=qp(e,["components","legend"],{});return jp({},qp(n,["common"],{}),jp({},qp(n,[t],{})))}function kk(e){return!e&&(null==e||isNaN(e))}function _k(e){if($h(e))return kk(e[1].y);var t=e.y;return $h(t)?kk(t[0]):kk(t)}function Ak(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!0),!e.length||1===e.length&&!n)return[];if(t){for(var r=[],i=0,a=e.length;i<a;i++){_k(l=e[i])||r.push(l)}return[r]}var o=[],s=[];for(i=0,a=e.length;i<a;i++){var l;_k(l=e[i])?s.length&&((1!==s.length||n)&&o.push(s),s=[]):s.push(l)}return s.length&&o.push(s),o}function Ok(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=0===n?"M":"L";t.push([i,r.x,r.y])}}var a=e[0];return a&&(t.push(["L",a.x,a.y]),t.push(["z"])),t}function Ik(e){for(var t=e.length/2,n=[],r=[],i=0;i<e.length;i++)i<t?n.push(e[i]):r.push(e[i]);var a=xw(n,!1),o=xw(r,!1);r.length&&a.push(["L",r[0].x,r[0].y]),o.shift();var s=a.concat(o);return n.length&&s.push(["L",n[0].x,n[0].y]),s.push(["z"]),s}function Mk(e,t,n,r){void 0===r&&(r="");var i=e.style,a=void 0===i?{}:i,o=e.defaultStyle,s=e.color,l=e.size,c=Nh(Nh({},o),a);return s&&(t&&(a.stroke||(c.stroke=s)),n&&(a.fill||(c.fill=s))),r&&Gh(a[r])&&!Gh(l)&&(c[r]=l),c}function Nk(e){return jp({},{fill:"#CCD6EC",fillOpacity:.3},qp(e,["background","style"]))}function Fk(e){var t=e.x;return($h(e.y)?e.y:[e.y]).map((function(e,n){return{x:$h(t)?t[n]:t,y:e}}))}var Lk={line:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},dot:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},dash:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},smooth:function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},hv:function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},vh:function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},hvh:function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]},vhv:function(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}};function Pk(e,t){var n=e.color;return{symbol:Lk[t],style:{lineWidth:2,r:6,stroke:n}}}function Rk(e,t,n,r,i){return 1===e.length?[["M",e[0].x,e[0].y-i.lineWidth/2],["L",e[0].x,e[0].y],["L",e[0].x,e[0].y+i.lineWidth/2]]:(n?(t&&e.length&&e.push({x:e[0].x,y:e[0].y}),a=xw(e,!1,r)):(a=yw(e,!1),t&&a.push(["Z"])),a);var a}function Dk(e,t,n,r,i,a){if(e.length){var o=e[0];return $h(o.y)?function(e,t,n,r,i,a){var o=[],s=[];Uh(e,(function(e){var t=Fk(e);o.push(t[1]),s.push(t[0])}));var l=Rk(o,t,r,i,a),c=Rk(s,t,r,i,a);return n?l:l.concat(c)}(e,t,n,r,i,a):Rk(e,t,r,i,a)}return[]}nk("line",{defaultShapeType:"line"}),Uh(["line","dot","dash","smooth"],(function(e){rk("line",e,{draw:function(t,n){var r,i="smooth"===e;if(i){var a=this.coordinate,o=a.start,s=a.end;r=[[o.x,s.y],[s.x,o.y]]}var l=function(e,t,n){for(var r=e.isStack,i=e.connectNulls,a=e.isInCircle,o=e.showSinglePoint,s=Mk(e,!0,!1,"lineWidth"),l=Ak(e.points,i,o),c=[],u=0,h=l.length;u<h;u++){var p=l[u];c=c.concat(Dk(p,a,r,t,n,s))}return s.path=c,s}(t,i,r);return n.addShape({type:"path",attrs:l,name:"line",capture:!i})},getMarker:function(t){return Pk(t,e)}})}));var Bk={getLegendItems:wk,translate:uk,rotate:hk,zoom:function(e,t){var n=e.getBBox(),r=(n.minX+n.maxX)/2,i=(n.minY+n.maxY)/2;e.applyToMatrix([r,i,1]);var a=ck(e.getMatrix(),[["t",-r,-i],["s",t,t],["t",r,i]]);e.setMatrix(a)},transform:ck,getAngle:RT,getSectorPath:LT,polarToCartesian:FT,getDelegationObject:Tw,getTooltipItems:bS,getMappingValue:xk,getPath:Dk,getPathPoints:Ak},zk="#000",Hk="#BFBFBF",jk="#F0F0F0",Gk="#FFFFFF",$k="#A6A6A6",Yk="#737373",Uk="#404040",Vk="#262626",Wk=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Xk=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],qk=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],Kk=function(e){void 0===e&&(e={});var t=e.backgroundColor,n=void 0===t?"#141414":t,r=e.subColor,i=void 0===r?"rgba(255,255,255,0.05)":r,a=e.paletteQualitative10,o=void 0===a?Wk:a,s=e.paletteQualitative20,l=void 0===s?Xk:s,c=e.paletteSemanticRed,u=void 0===c?"#F4664A":c,h=e.paletteSemanticGreen,p=void 0===h?"#30BF78":h,d=e.paletteSemanticYellow,f=void 0===d?"#FAAD14":d,m=e.paletteSequence,g=void 0===m?qk:m,v=e.fontFamily,y=void 0===v?'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"':v,x=e.brandColor;return{backgroundColor:n,brandColor:void 0===x?o[0]:x,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:u,paletteSemanticGreen:p,paletteSemanticYellow:f,paletteSequence:g,fontFamily:y,axisLineBorderColor:Uk,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:$k,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:Uk,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Vk,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Yk,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Vk,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Yk,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Wk[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:$k,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Yk,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Yk,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:$k,legendPageNavigatorTextFontSize:12,sliderRailFillColor:Vk,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Yk,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:jk,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Hk,annotationArcBorderColor:Vk,annotationArcBorder:1,annotationLineBorderColor:Uk,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:$k,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Gk,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Uk,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:$k,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:$k,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:zk,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:$k,overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:zk,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Uk,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:Wk[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:zk,pointBorderOpacity:1,pointActiveBorderColor:Gk,pointSelectedBorder:2,pointSelectedBorderColor:Gk,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Wk[0],hollowPointBorderOpacity:.95,hollowPointFillColor:zk,hollowPointActiveBorder:1,hollowPointActiveBorderColor:Gk,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Gk,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Wk[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Wk[0],areaFillOpacity:.25,areaActiveFillColor:Wk[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Wk[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Wk[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Gk,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Gk,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Wk[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Gk,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Gk,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Wk[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:zk,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Gk,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Gk,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}}();function Qk(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function Zk(e,t,n,r,i,a){return i>=e&&i<=e+n&&a>=t&&a<=t+r}function Jk(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function e_(e,t){return e[0]===t[0]&&e[1]===t[1]}var t_=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,n_=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,r_=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,i_=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function a_(e,t){Uh(e.match(i_),(function(e){var n=e.split(":");t.addColorStop(n[0],n[1])}))}function o_(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(ap(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(e,t,n){var r,i,a=t_.exec(n),o=parseFloat(a[1])%360*(Math.PI/180),s=a[2],l=t.getBBox();o>=0&&o<.5*Math.PI?(r={x:l.minX,y:l.minY},i={x:l.maxX,y:l.maxY}):.5*Math.PI<=o&&o<Math.PI?(r={x:l.maxX,y:l.minY},i={x:l.minX,y:l.maxY}):Math.PI<=o&&o<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},i={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},i={x:l.maxX,y:l.minY});var c=Math.tan(o),u=c*c,h=(i.x-r.x+c*(i.y-r.y))/(u+1)+r.x,p=c*(i.x-r.x+c*(i.y-r.y))/(u+1)+r.y,d=e.createLinearGradient(r.x,r.y,h,p);return a_(s,d),d}(e,t,n);if("r"===n[0])return function(e,t,n){var r=n_.exec(n),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(0===o){var l=s.match(i_);return l[l.length-1].split(":")[1]}var c=t.getBBox(),u=c.maxX-c.minX,h=c.maxY-c.minY,p=Math.sqrt(u*u+h*h)/2,d=e.createRadialGradient(c.minX+u*i,c.minY+h*a,0,c.minX+u/2,c.minY+h/2,o*p);return a_(s,d),d}(e,t,n);if("p"===n[0])return function(e,t,n){if(t.get("patternSource")&&t.get("patternSource")===n)return t.get("pattern");var r,i,a=r_.exec(n),o=a[1],s=a[2];function l(){r=e.createPattern(i,o),t.set("pattern",r),t.set("patternSource",n)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}(e,t,n)}return n}return n instanceof CanvasPattern?n:void 0}function s_(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function l_(e,t){return s_(e)*s_(t)?(e[0]*t[0]+e[1]*t[1])/(s_(e)*s_(t)):1}function c_(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(l_(e,t))}function u_(e,t){var n=t[1],r=t[2],i=Ep(Cp(t[3]),2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],c=t[6],u=t[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=h*h/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var f=n*n*(p*p)+r*r*(h*h),m=f?Math.sqrt((n*n*(r*r)-f)/f):1;a===o&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*p/r:0,v=n?m*-r*h/n:0,y=(s+c)/2+Math.cos(i)*g-Math.sin(i)*v,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*v,E=[(h-g)/n,(p-v)/r],b=[(-1*h-g)/n,(-1*p-v)/r],C=c_([1,0],E),T=c_(E,b);return l_(E,b)<=-1&&(T=Math.PI),l_(E,b)>=1&&(T=0),0===o&&T>0&&(T-=2*Math.PI),1===o&&T<0&&(T+=2*Math.PI),{cx:y,cy:x,rx:e_(e,[c,u])?0:n,ry:e_(e,[c,u])?0:r,startAngle:C,endAngle:C+T,xRotation:i,arcFlag:a,sweepFlag:o}}var h_=Math.sin,p_=Math.cos,d_=Math.atan2,f_=Math.PI;function m_(e,t,n,r,i,a,o){var s=t.stroke,l=t.lineWidth,c=d_(r-a,n-i),u=new K_({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*p_(f_/6)+","+10*h_(f_/6)+" L0,0 L"+10*p_(f_/6)+",-"+10*h_(f_/6),stroke:s,lineWidth:l}});u.translate(i,a),u.rotateAtPoint(i,a,c),e.set(o?"startArrowShape":"endArrowShape",u)}function g_(e,t,n,r,i,a,o){var s=t.startArrow,l=t.endArrow,c=t.stroke,u=t.lineWidth,h=o?s:l,p=h.d,d=h.fill,f=h.stroke,m=h.lineWidth,g=Fh(h,["d","fill","stroke","lineWidth"]),v=d_(r-a,n-i);p&&(i-=p_(v)*p,a-=h_(v)*p);var y=new K_({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:Nh(Nh({},g),{stroke:f||c,lineWidth:m||u,fill:d})});y.translate(i,a),y.rotateAtPoint(i,a,v),e.set(o?"startArrowShape":"endArrowShape",y)}function v_(e,t,n,r,i){var a=d_(r-t,n-e);return{dx:p_(a)*i,dy:h_(a)*i}}function y_(e,t,n,r,i,a){"object"==typeof t.startArrow?g_(e,t,n,r,i,a,!0):t.startArrow?m_(e,t,n,r,i,a,!0):e.set("startArrowShape",null)}function x_(e,t,n,r,i,a){"object"==typeof t.endArrow?g_(e,t,n,r,i,a,!1):t.endArrow?m_(e,t,n,r,i,a,!1):e.set("startArrowShape",null)}var E_={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function b_(e,t){var n=t.attr();for(var r in n){var i=n[r],a=E_[r]?E_[r]:r;"matrix"===a&&i?e.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===a&&e.setLineDash?$h(i)&&e.setLineDash(i):("strokeStyle"===a||"fillStyle"===a?i=o_(e,t,i):"globalAlpha"===a&&(i*=e.globalAlpha),e[a]=i)}}function C_(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];i.cfg.visible?i.draw(e,n):i.skipDraw()}}function T_(e,t,n){var r=e.get("refreshElements");Uh(r,(function(t){if(t!==e)for(var n=t.cfg.parent;n&&n!==e&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===e?k_(t):w_(t,n)}function w_(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&k_(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&w_(r.cfg.children,t);else{var i=__(r,t);r.cfg.refresh=i,i&&r.isGroup()&&w_(r.cfg.children,t)}}}function S_(e){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&S_(n.cfg.children)}}function k_(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.refresh=!0,r.isGroup()&&k_(r.get("children"))}}function __(e,t){var n=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&n&&Jk(n,t)}function A_(e,t,n,r){var i=n.path,a=n.startArrow,o=n.endArrow;if(i){var s=[0,0],l=[0,0],c={dx:0,dy:0};t.beginPath();for(var u=0;u<i.length;u++){var h=i[u],p=h[0];if(0===u&&a&&a.d)c=v_((d=e.getStartTangent())[0][0],d[0][1],d[1][0],d[1][1],a.d);else if(u===i.length-2&&"Z"===i[u+1][0]&&o&&o.d){if("Z"===i[u+1][0])c=v_((d=e.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d)}else if(u===i.length-1&&o&&o.d){var d;if("Z"!==i[0])c=v_((d=e.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d)}var f=c.dx,m=c.dy;switch(p){case"M":t.moveTo(h[1]-f,h[2]-m),l=[h[1],h[2]];break;case"L":t.lineTo(h[1]-f,h[2]-m);break;case"Q":t.quadraticCurveTo(h[1],h[2],h[3]-f,h[4]-m);break;case"C":t.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-f,h[6]-m);break;case"A":var g=void 0;r?(g=r[u])||(g=u_(s,h),r[u]=g):g=u_(s,h);var v=g.cx,y=g.cy,x=g.rx,E=g.ry,b=g.startAngle,C=g.endAngle,T=g.xRotation,w=g.sweepFlag;if(t.ellipse)t.ellipse(v,y,x,E,T,b,C,1-w);else{var S=x>E?x:E,k=x>E?1:x/E,_=x>E?E/x:1;t.translate(v,y),t.rotate(T),t.scale(k,_),t.arc(0,0,S,b,C,1-w),t.scale(1/k,1/_),t.rotate(-T),t.translate(-v,-y)}break;case"Z":t.closePath()}if("Z"===p)s=l;else{var A=h.length;s=[h[A-2],h[A-1]]}}}}function O_(e,t){var n=e.get("canvas");n&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(n.refreshElement(e,t,n),n.get("autoDraw")&&n.draw())))}function I_(e){var t,n,r;if(e.destroyed)t=e._cacheCanvasBBox;else{var i=e.get("cacheCanvasBBox"),a=i&&!(!i.width||!i.height),o=e.getCanvasBBox(),s=o&&!(!o.width||!o.height);a&&s?(r=o,t=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):a?t=i:s&&(t=o)}return t}var M_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.onCanvasChange=function(e){O_(this,e)},t.prototype.getShapeBase=function(){return Nn},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),b_(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],n=[];Uh(e,(function(e){var r=e.cfg.cacheCanvasBBox;r&&e.cfg.isInView&&(t.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(t.length){var i=ep(t),a=Jh(t),o=ep(n),s=Jh(n);r={minX:i,minY:o,x:i,y:o,maxX:a,maxY:s,width:a-i,height:s-o};var l=this.cfg.canvas;if(l){var c=l.getViewRange();this.set("isInView",Jk(r,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},t.prototype.draw=function(e,t){var n=this.cfg.children,r=!t||this.cfg.refresh;n.length&&r&&(e.save(),b_(e,this),this._applyClip(e,this.getClip()),C_(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(kg),N_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return Nn},t.prototype.getGroupBase=function(){return M_},t.prototype.onCanvasChange=function(e){O_(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),n=Ig(e)(this),r=t/2,i=n.x-r,a=n.y-r,o=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:a,minY:a,width:n.width+t,height:n.height+t,maxX:o,maxY:s}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),b_(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!Jk(t,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),b_(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),n=Jk(t,e);this.set("isInView",n),n?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,a=t.fillOpacity;this.isFill()&&(Gh(a)||1===a?this.fill(e):(e.globalAlpha=a,this.fill(e),e.globalAlpha=r)),this.isStroke()&&n>0&&(Gh(i)||1===i||(e.globalAlpha=i),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(_g),F_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=a.x,s=a.y,l=a.r,c=i/2,u=Qk(o,s,e,t);return r&&n?u<=l+c:r?u<=l:!!n&&(u>=l-c&&u<=l+c)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.r;e.beginPath(),e.arc(n,r,i,0,2*Math.PI,!1),e.closePath()},t}(N_);function L_(e,t,n,r){return e/(n*n)+t/(r*r)}var P_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=i/2,s=a.x,l=a.y,c=a.rx,u=a.ry,h=(e-s)*(e-s),p=(t-l)*(t-l);return r&&n?L_(h,p,c+o,u+o)<=1:r?L_(h,p,c,u)<=1:!!n&&(L_(h,p,c-o,u-o)>=1&&L_(h,p,c+o,u+o)<=1)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(n,r,i,a,0,0,2*Math.PI,!1);else{var o=i>a?i:a,s=i>a?1:i/a,l=i>a?a/i:1;e.save(),e.translate(n,r),e.scale(s,l),e.arc(0,0,o,0,2*Math.PI),e.restore(),e.closePath()}},t}(N_);function R_(e){return e instanceof HTMLElement&&ap(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}var D_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var t=this,n=this.attrs;if(ap(e)){var r=new Image;r.onload=function(){if(t.destroyed)return!1;t.attr("img",r),t.set("loading",!1),t._afterLoading();var e=t.get("callback");e&&e.call(t)},r.crossOrigin="Anonymous",r.src=e,this.set("loading",!0)}else e instanceof Image?(n.width||(n.width=e.width),n.height||(n.height=e.height)):R_(e)&&(n.width||(n.width=Number(e.getAttribute("width"))),n.height||(n.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"img"===t&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",e);var t=this.attr(),n=t.x,r=t.y,i=t.width,a=t.height,o=t.sx,s=t.sy,l=t.swidth,c=t.sheight,u=t.img;(u instanceof Image||R_(u))&&(Gh(o)||Gh(s)||Gh(l)||Gh(c)?e.drawImage(u,n,r,i,a):e.drawImage(u,o,s,l,c,n,r,i,a))},t}(N_);function B_(e,t,n,r,i,a,o){var s=Math.min(e,n),l=Math.max(e,n),c=Math.min(t,r),u=Math.max(t,r),h=i/2;return a>=s-h&&a<=l+h&&o>=c-h&&o<=u+h&&zg.pointToLine(e,t,n,r,a,o)<=i/2}var z_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=e.startArrow,o=e.endArrow;a&&y_(this,e,r,i,t,n),o&&x_(this,e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){if(!n||!i)return!1;var a=this.attr();return B_(a.x1,a.y1,a.x2,a.y2,i,e,t)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o=t.startArrow,s=t.endArrow,l={dx:0,dy:0},c={dx:0,dy:0};o&&o.d&&(l=v_(n,r,i,a,t.startArrow.d)),s&&s.d&&(c=v_(n,r,i,a,t.endArrow.d)),e.beginPath(),e.moveTo(n+l.dx,r+l.dy),e.lineTo(i-c.dx,a-c.dy)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return zg.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2;return zg.pointAt(n,r,i,a,e)},t}(N_),H_={circle:function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},j_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return Gh(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e,n,r=this.attr(),i=r.x,a=r.y,o=r.symbol||"circle",s=this._getR(r);if(jh(o))n=yv(n=(e=o)(i,a,s));else{if(!(e=t.Symbols[o]))return console.warn(o+" marker is not supported."),null;n=e(i,a,s)}return n},t.prototype.createPath=function(e){A_(this,e,{path:this._getPath()},this.get("paramsCache"))},t.Symbols=H_,t}(N_);function G_(e,t,n){var r=ov();return e.createPath(r),r.isPointInPath(t,n)}function $_(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function Y_(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function U_(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(Y_(o,s,[t,n]))return!0;$_(o[1]-n)>0!=$_(s[1]-n)>0&&$_(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function V_(e,t,n,r,i,a,o,s){var l=(Math.atan2(s-t,o-e)+2*Math.PI)%(2*Math.PI);if(l<r||l>i)return!1;var c={x:e+n*Math.cos(l),y:t+n*Math.sin(l)};return Qk(c.x,c.y,o,s)<=a/2}var W_=nm;var X_=Nh({hasArc:function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break}}return t},extractPolygons:function(e){for(var t=e.length,n=[],r=[],i=[],a=0;a<t;a++){var o=e[a],s=o[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([o[1],o[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(e,t,n,r,i){for(var a=!1,o=t/2,s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,u=l.params,h=l.prePoint,p=l.box;if(!p||Zk(p.x-o,p.y-o,p.width+t,p.height+t,n,r)){switch(l.command){case"L":case"Z":a=B_(h[0],h[1],c[0],c[1],t,n,r);break;case"Q":a=Vg.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],n,r)<=t/2;break;case"C":a=Zg.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i)<=t/2;break;case"A":var d=l.arcParams,f=d.cx,m=d.cy,g=d.rx,v=d.ry,y=d.startAngle,x=d.endAngle,E=d.xRotation,b=[n,r,1],C=g>v?g:v;Hf(b,b,W_(null,[["t",-f,-m],["r",-E],["s",1/(g>v?1:g/v),1/(g>v?v/g:1)]])),a=V_(0,0,C,y,x,t,b[0],b[1])}if(a)break}}return a}},xf);function q_(e,t,n){for(var r=!1,i=0;i<e.length;i++){if(r=U_(e[i],t,n))break}return r}var K_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"path"===t&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=yv(e);var t=X_.hasArc(e);this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=Sv(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e,t=this.attr(),n=t.startArrow,r=t.endArrow;n&&y_(this,t,(e=this.getStartTangent())[0][0],e[0][1],e[1][0],e[1][1]);r&&x_(this,t,(e=this.getEndTangent())[0][0],e[0][1],e[1][0],e[1][1])},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.getSegments(),o=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=X_.isPointInStroke(a,i,e,t,l)}if(!s&&r)if(o)s=G_(this,e,t);else{var c=this.attr("path"),u=X_.extractPolygons(c);s=q_(u.polygons,e,t)||q_(u.polylines,e,t)}return s},t.prototype.createPath=function(e){A_(this,e,this.attr(),this.get("paramsCache"))},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return Gh(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var t,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;Uh(r,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)}));var a=i[n];if(Gh(a)||Gh(n))return null;var o=a.length,s=i[n+1];return Zg.pointAt(a[o-2],a[o-1],s[1],s[2],s[3],s[4],s[5],s[6],t)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",X_.pathToCurve(e))},t.prototype._setTcache=function(){var e,t,n,r,i=0,a=0,o=[],s=this.get("curve");s&&(Uh(s,(function(e,t){n=s[t+1],r=e.length,n&&(i+=Zg.length(e[r-2],e[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?(Uh(s,(function(l,c){n=s[c+1],r=l.length,n&&((e=[])[0]=a/i,t=Zg.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),a+=t||0,e[1]=a/i,o.push(e))})),this.set("tCache",o)):this.set("tCache",[]))},t.prototype.getStartTangent=function(){var e,t=this.getSegments();if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e},t.prototype.getEndTangent=function(){var e,t=this.getSegments(),n=t.length;if(n>1){var r=t[n-2].currentPoint,i=t[n-1].currentPoint,a=t[n-1].endTangent;e=[],a?(e.push([i[0]-a[0],i[1]-a[1]]),e.push([i[0],i[1]])):(e.push([r[0],r[1]]),e.push([i[0],i[1]]))}return e},t}(N_);function Q_(e,t,n,r,i){var a=e.length;if(a<2)return!1;for(var o=0;o<a-1;o++){if(B_(e[o][0],e[o][1],e[o+1][0],e[o+1][1],t,n,r))return!0}if(i){var s=e[0],l=e[a-1];if(B_(s[0],s[1],l[0],l[1],t,n,r))return!0}return!1}var Z_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr().points,o=!1;return n&&(o=Q_(a,i,e,t,!0)),!o&&r&&(o=U_(a,e,t)),o},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];0===n?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},t}(N_),J_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,i=t.endArrow,a=n.length,o=n[0][0],s=n[0][1],l=n[a-1][0],c=n[a-1][1];r&&y_(this,e,n[1][0],n[1][1],o,s),i&&x_(this,e,n[a-2][0],n[a-2][1],l,c)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!(!n||!i)&&Q_(this.attr().points,i,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,i=t.endArrow,a=n.length;if(!(n.length<2)){var o,s=n[0][0],l=n[0][1],c=n[a-1][0],u=n[a-1][1];if(r&&r.d)s+=(o=v_(s,l,n[1][0],n[1][1],r.d)).dx,l+=o.dy;if(i&&i.d)c-=(o=v_(n[a-2][0],n[a-2][1],c,u,i.d)).dx,u-=o.dy;e.beginPath(),e.moveTo(s,l);for(var h=0;h<a-1;h++){var p=n[h];e.lineTo(p[0],p[1])}e.lineTo(c,u)}},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return Gh(t)?(this.set("totalLength",nv(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),Uh(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),zg.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,a=[];Uh(e,(function(o,s){e[s+1]&&((n=[])[0]=i/t,r=zg.length(o[0],o[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,a.push(n))})),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(N_);var eA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=a.x,s=a.y,l=a.width,c=a.height,u=a.radius;if(u){var h=!1;return n&&(h=function(e,t,n,r,i,a,o,s){return B_(e+i,t,e+n-i,t,a,o,s)||B_(e+n,t+i,e+n,t+r-i,a,o,s)||B_(e+n-i,t+r,e+i,t+r,a,o,s)||B_(e,t+r-i,e,t+i,a,o,s)||V_(e+n-i,t+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||V_(e+n-i,t+r-i,i,0,.5*Math.PI,a,o,s)||V_(e+i,t+r-i,i,.5*Math.PI,Math.PI,a,o,s)||V_(e+i,t+i,i,Math.PI,1.5*Math.PI,a,o,s)}(o,s,l,c,u,i,e,t)),!h&&r&&(h=G_(this,e,t)),h}var p=i/2;return r&&n?Zk(o-p,s-p,l+p,c+p,e,t):r?Zk(o,s,l,c,e,t):n?function(e,t,n,r,i,a,o){var s=i/2;return Zk(e-s,t-s,n,i,a,o)||Zk(e+n-s,t-s,i,r,a,o)||Zk(e+s,t+r-s,n,i,a,o)||Zk(e-s,t+s,i,r,a,o)}(o,s,l,c,i,e,t):void 0},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.width,a=t.height,o=t.radius;if(e.beginPath(),0===o)e.rect(n,r,i,a);else{var s=function(e){var t=0,n=0,r=0,i=0;return $h(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,[t,n,r,i]}(o),l=s[0],c=s[1],u=s[2],h=s[3];e.moveTo(n+l,r),e.lineTo(n+i-c,r),0!==c&&e.arc(n+i-c,r+c,c,-Math.PI/2,0),e.lineTo(n+i,r+a-u),0!==u&&e.arc(n+i-u,r+a-u,u,0,Math.PI/2),e.lineTo(n+h,r+a),0!==h&&e.arc(n+h,r+a-h,h,Math.PI/2,Math.PI),e.lineTo(n,r+l),0!==l&&e.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),e.closePath()}},t}(N_),tA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=lv(e)},t.prototype._setText=function(e){var t=null;ap(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,n=1*e.fontSize;return t?t-n:.14*n},t.prototype._drawTextArr=function(e,t,n){var r,i=this.attrs,a=i.textBaseline,o=i.x,s=i.y,l=1*i.fontSize,c=this._getSpaceingY(),u=sv(i.text,i.fontSize,i.lineHeight);Uh(t,(function(t,i){r=s+i*(c+l)-u+l,"middle"===a&&(r+=u-l-(u-l)/2),"top"===a&&(r+=u-l),Gh(t)||(n?e.fillText(t,o,r):e.strokeText(t,o,r))}))},t.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,i=n.y,a=this.get("textArr");if(a)this._drawTextArr(e,a,t);else{var o=n.text;Gh(o)||(t?e.fillText(o,r,i):e.strokeText(o,r,i))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,a=t.fillOpacity;this.isStroke()&&n>0&&(Gh(i)||1===i||(e.globalAlpha=r),this.stroke(e)),this.isFill()&&(Gh(a)||1===a?this.fill(e):(e.globalAlpha=a,this.fill(e),e.globalAlpha=r)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(N_);function nA(e,t,n){var r,i,a=e.getTotalMatrix();if(a){var o=(r=[t,n,1],(i=a)?am(om(i),r):r);return[o[0],o[1]]}return[t,n]}function rA(e,t,n){if(e.isCanvas&&e.isCanvas())return!0;if(!wf(e)||!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var r=nA(e,t,n),i=r[0],a=r[1];if(e.isClipped(i,a))return!1}var o=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=o.minX&&t<=o.maxX&&n>=o.minY&&n<=o.maxY}function iA(e,t,n){if(!rA(e,t,n))return null;for(var r=null,i=e.getChildren(),a=i.length-1;a>=0;a--){var o=i[a];if(o.isGroup())r=iA(o,t,n);else if(rA(o,t,n)){var s=o,l=nA(o,t,n),c=l[0],u=l[1];s.isInShape(c,u)&&(r=o)}if(r)break}return r}var aA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return Nn},t.prototype.getGroupBase=function(){return M_},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},t.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get("context"),i=this.get("el"),a=this.getPixelRatio();i.width=a*t,i.height=a*n,a>1&&r.scale(a,a)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(t,n){return this.get("quickHit")?iA(this,t,n):e.prototype.getShape.call(this,t,n,null)},t.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),n=this.getViewRange();t.length&&t[0]===this?e=n:(e=function(e){if(!e.length)return null;var t=[],n=[],r=[],i=[];return Uh(e,(function(e){var a=I_(e);a&&(t.push(a.minX),n.push(a.minY),r.push(a.maxX),i.push(a.maxY))})),{minX:ep(t),minY:ep(n),maxX:Jh(r),maxY:Jh(i)}}(t))&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView")&&(e=function(e,t){return e&&t&&Jk(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}(e,n)));return e},t.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},t.prototype._clearFrame=function(){var e,t=this.get("drawFrame");t&&(e=t,(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),n=this.getChildren();e.clearRect(0,0,t.width,t.height),b_(e,this),C_(e,n),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),b_(e,this),T_(this,n,r),C_(e,n,r),e.restore()):t.length&&S_(t),Uh(t,(function(e){e.get("hasChanged")&&e.set("hasChanged",!1)})),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e,t=this,n=this.get("drawFrame");n||(e=function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)},n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e),this.set("drawFrame",n))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(Sg),oA=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:Nn,version:"0.5.12",Canvas:aA,Group:M_,getArcParams:u_,Event:Ef,Base:Sf,AbstractCanvas:Sg,AbstractGroup:kg,AbstractShape:_g,getBBoxMethod:Ig,getTextHeight:sv,assembleFont:lv,isAllowCapture:wf,multiplyVec2:am,invert:om,getOffScreenContext:ov,PathUtil:xf}),sA={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},lA={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function cA(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function uA(e){var t=sA[e.type],n=e.getParent();if(!t)throw new Error("the type "+e.type+" is not supported by svg");var r=cA(t);if(e.get("id")&&(r.id=e.get("id")),e.set("el",r),e.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function hA(e,t){var n,r=e.get("el"),i=(n=r.children,Rh(n)?Array.prototype.slice.call(n):[]).sort(t),a=document.createDocumentFragment();i.forEach((function(e){a.appendChild(e)})),r.appendChild(a)}function pA(e){var t=e.attr().matrix;if(t){for(var n=e.cfg.el,r=[],i=0;i<9;i+=3)r.push(t[i]+","+t[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",t)}}function dA(e,t){var n=e.getClip(),r=e.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){uA(n),n.createPath(t);var i=t.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function fA(e,t){t.forEach((function(t){t.draw(e)}))}function mA(e,t){var n=e.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=e.getParent(),a=i?i.getChildren():[n],o=e.get("el");if("remove"===t)if(e.get("isClipShape")){var s=o&&o.parentNode,l=s&&s.parentNode;s&&l&&l.removeChild(s)}else o&&o.parentNode&&o.parentNode.removeChild(o);else if("show"===t)o.setAttribute("visibility","visible");else if("hide"===t)o.setAttribute("visibility","hidden");else if("zIndex"===t)!function(e,t){var n=e.parentNode,r=Array.from(n.childNodes).filter((function(e){return 1===e.nodeType&&"defs"!==e.nodeName.toLowerCase()})),i=r[t],a=r.indexOf(e);if(i){if(a>t)n.insertBefore(e,i);else if(a<t){var o=r[t+1];o?n.insertBefore(e,o):n.appendChild(e)}}else n.appendChild(e)}(o,a.indexOf(e));else if("sort"===t){var c=e.get("children");c&&c.length&&hA(e,(function(e,t){return c.indexOf(e)-c.indexOf(t)?1:0}))}else"clear"===t?o&&(o.innerHTML=""):"matrix"===t?pA(e):"clip"===t?dA(e,r):"attr"===t||"add"===t&&e.draw(r)}}var gA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=cA("g");this.set("el",e);var t=this.getParent();if(t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(e)}return e},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,t)}},t.prototype.onCanvasChange=function(e){mA(this,e)},t.prototype.getShapeBase=function(){return Fn},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var t=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),dA(this,e),this.createPath(e),t.length&&fA(e,t))},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Uh(t||n,(function(e,t){lA[t]&&r.setAttribute(lA[t],e)})),pA(this)},t}(kg),vA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,t)}},t.prototype.getShapeBase=function(){return Fn},t.prototype.getGroupBase=function(){return gA},t.prototype.onCanvasChange=function(e){mA(this,e)},t.prototype.calculateBBox=function(){var e=this.get("el"),t=null;if(e)t=e.getBBox();else{var n=Ig(this.get("type"));n&&(t=n(this))}if(t){var r=t.x,i=t.y,a=t.width,o=t.height,s=this.getHitLineWidth(),l=s/2,c=r-l,u=i-l;return{x:c,y:u,minX:c,minY:u,maxX:r+a+l,maxY:i+o+l,width:a+s,height:o+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),t=e.fill,n=e.fillStyle;return(t||n||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),t=e.stroke,n=e.strokeStyle;return(t||n)&&this.canStroke},t.prototype.draw=function(e,t){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||uA(this),dA(this,e),this.createPath(e,t),this.shadow(e,t),this.strokeAndFill(e,t),this.transform(t))},t.prototype.createPath=function(e,t){},t.prototype.strokeAndFill=function(e,t){var n=t||this.attr(),r=n.fill,i=n.fillStyle,a=n.stroke,o=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,c=n.lineWidth,u=this.get("el");this.canFill&&(t?"fill"in n?this._setColor(e,"fill",r):"fillStyle"in n&&this._setColor(e,"fill",i):this._setColor(e,"fill",r||i),s&&u.setAttribute(lA.fillOpacity,s)),this.canStroke&&c>0&&(t?"stroke"in n?this._setColor(e,"stroke",a):"strokeStyle"in n&&this._setColor(e,"stroke",o):this._setColor(e,"stroke",a||o),l&&u.setAttribute(lA.strokeOpacity,l),c&&u.setAttribute(lA.lineWidth,c))},t.prototype._setColor=function(e,t,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=e.find("gradient",n))||(i=e.addGradient(n)),r.setAttribute(lA[t],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=e.find("pattern",n))||(i=e.addPattern(n)),r.setAttribute(lA[t],"url(#"+i+")")}else r.setAttribute(lA[t],n);else r.setAttribute(lA[t],"none")},t.prototype.shadow=function(e,t){var n=this.attr(),r=t||n,i=r.shadowOffsetX,a=r.shadowOffsetY,o=r.shadowBlur,s=r.shadowColor;(i||a||o||s)&&function(e,t){var n=e.cfg.el,r=e.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var a=t.find("filter",i);a||(a=t.addShadow(i)),n.setAttribute("filter","url(#"+a+")")}else n.removeAttribute("filter")}(this,e)},t.prototype.transform=function(e){var t=this.attr();(e||t).matrix&&pA(this)},t.prototype.isInShape=function(e,t){return this.isPointInPath(e,t)},t.prototype.isPointInPath=function(e,t){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=e+r.left,a=t+r.top,o=document.elementFromPoint(i,a);return!(!o||!o.isEqualNode(n))},t.prototype.getHitLineWidth=function(){var e=this.attrs,t=e.lineWidth,n=e.lineAppendWidth;return this.isStroke()?t+n:0},t}(_g),yA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x:0,y:0,r:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Uh(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):lA[t]&&r.setAttribute(lA[t],e)}))},t}(vA),xA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return Mh(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");if(Uh(t||n,(function(e,t){lA[t]&&r.setAttribute(lA[t],e)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var a=r.childNodes,o=a.length-1;o>=0;o--)r.removeChild(a[o]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},t}(vA),EA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Uh(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):lA[t]&&r.setAttribute(lA[t],e)}))},t}(vA),bA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");Uh(t||r,(function(e,t){"img"===t?n._setImage(r.img):lA[t]&&i.setAttribute(lA[t],e)}))},t.prototype.setAttr=function(e,t){this.attrs[e]=t,"img"===e&&this._setImage(t)},t.prototype._setImage=function(e){var t=this.attr(),n=this.get("el");if(ap(e))n.setAttribute("href",e);else if(e instanceof window.Image)t.width||(n.setAttribute("width",e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",e.height),this.attr("height",e.height)),n.setAttribute("href",e.src);else if(e instanceof HTMLElement&&ap(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())n.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+e.width),r.setAttribute("height",""+e.height),r.getContext("2d").putImageData(e,0,0),t.width||(n.setAttribute("width",""+e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",""+e.height),this.attr("height",e.height)),n.setAttribute("href",r.toDataURL())}},t}(vA),CA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Uh(t||n,(function(t,i){if("startArrow"===i||"endArrow"===i)if(t){var a=Yh(t)?e.addArrow(n,lA[i]):e.getDefaultArrow(n,lA[i]);r.setAttribute(lA[i],"url(#"+a+")")}else r.removeAttribute(lA[i]);else lA[i]&&r.setAttribute(lA[i],t)}))},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return zg.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2;return zg.pointAt(n,r,i,a,e)},t}(vA),TA={circle:function(e,t,n){return[["M",e,t],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["z"]]},triangleDown:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},wA={get:function(e){return TA[e]},register:function(e,t){TA[e]=t},remove:function(e){delete TA[e]},getAll:function(){return TA}},SA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return Mh(t,e),t.prototype.createPath=function(e){this.get("el").setAttribute("d",this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return $h(e)?e.map((function(e){return e.join(" ")})).join(""):e},t.prototype._getPath=function(){var e,t=this.attr(),n=t.x,r=t.y,i=t.r||t.radius,a=t.symbol||"circle";return(e=jh(a)?a:wA.get(a))?e(n,r,i):(console.warn(e+" symbol is not exist."),null)},t.symbolsFactory=wA,t}(vA),kA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");Uh(t||r,(function(t,a){if("path"===a&&$h(t))i.setAttribute("d",n._formatPath(t));else if("startArrow"===a||"endArrow"===a)if(t){var o=Yh(t)?e.addArrow(r,lA[a]):e.getDefaultArrow(r,lA[a]);i.setAttribute(lA[a],"url(#"+o+")")}else i.removeAttribute(lA[a]);else lA[a]&&i.setAttribute(lA[a],t)}))},t.prototype._formatPath=function(e){var t=e.map((function(e){return e.join(" ")})).join("");return~t.indexOf("NaN")?"":t},t.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var t=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=t?t.getPointAtLength(e*n):null;return r?{x:r.x,y:r.y}:null},t}(vA),_A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return Mh(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Uh(t||n,(function(e,t){"points"===t&&$h(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):lA[t]&&r.setAttribute(lA[t],e)}))},t}(vA),AA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Uh(t||n,(function(e,t){"points"===t&&$h(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):lA[t]&&r.setAttribute(lA[t],e)}))},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return Gh(t)?(this.set("totalLength",nv(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),Uh(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),zg.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,a=[];Uh(e,(function(o,s){e[s+1]&&((n=[])[0]=i/t,r=zg.length(o[0],o[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,a.push(n))})),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(vA);var OA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el"),a=!1,o=["x","y","width","height","radius"];Uh(t||r,(function(e,t){-1===o.indexOf(t)||a?-1===o.indexOf(t)&&lA[t]&&i.setAttribute(lA[t],e):(i.setAttribute("d",n._assembleRect(r)),a=!0)}))},t.prototype._assembleRect=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=e.radius;if(!a)return"M "+t+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var o=function(e){var t=0,n=0,r=0,i=0;return $h(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}(a);return $h(a)?1===a.length?o.r1=o.r2=o.r3=o.r4=a[0]:2===a.length?(o.r1=o.r3=a[0],o.r2=o.r4=a[1]):3===a.length?(o.r1=a[0],o.r2=o.r4=a[1],o.r3=a[2]):(o.r1=a[0],o.r2=a[1],o.r3=a[2],o.r4=a[3]):o.r1=o.r2=o.r3=o.r4=a,[["M "+(t+o.r1)+","+n],["l "+(r-o.r1-o.r2)+",0"],["a "+o.r2+","+o.r2+",0,0,1,"+o.r2+","+o.r2],["l 0,"+(i-o.r2-o.r3)],["a "+o.r3+","+o.r3+",0,0,1,"+-o.r3+","+o.r3],["l "+(o.r3+o.r4-r)+",0"],["a "+o.r4+","+o.r4+",0,0,1,"+-o.r4+","+-o.r4],["l 0,"+(o.r4+o.r1-i)],["a "+o.r1+","+o.r1+",0,0,1,"+o.r1+","+-o.r1],["z"]].join(" ")},t}(vA),IA={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},MA={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},NA={left:"left",start:"left",center:"middle",right:"end",end:"end"},FA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return Mh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Nh(Nh({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");this._setFont(),Uh(t||r,(function(e,t){"text"===t?n._setText(""+e):"matrix"===t&&e?pA(n):lA[t]&&i.setAttribute(lA[t],e)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},t.prototype._setFont=function(){var e=this.get("el"),t=this.attr(),n=t.textBaseline,r=t.textAlign,i=Pf();i&&"firefox"===i.name?e.setAttribute("dominant-baseline",MA[n]||"alphabetic"):e.setAttribute("alignment-baseline",IA[n]||"baseline"),e.setAttribute("text-anchor",NA[r]||"left")},t.prototype._setText=function(e){var t=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,a=void 0===i?"bottom":i;if(e)if(~e.indexOf("\n")){var o=e.split("\n"),s=o.length-1,l="";Uh(o,(function(e,t){0===t?"alphabetic"===a?l+='<tspan x="'+r+'" dy="'+-s+'em">'+e+"</tspan>":"top"===a?l+='<tspan x="'+r+'" dy="0.9em">'+e+"</tspan>":"middle"===a?l+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+e+"</tspan>":"bottom"===a?l+='<tspan x="'+r+'" dy="-'+(s+.3)+'em">'+e+"</tspan>":"hanging"===a&&(l+='<tspan x="'+r+'" dy="'+(-(s-1)-.3)+'em">'+e+"</tspan>"):l+='<tspan x="'+r+'" dy="1em">'+e+"</tspan>"})),t.innerHTML=l}else t.innerHTML=e;else t.innerHTML=""},t}(vA),LA=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,PA=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,RA=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function DA(e){var t=e.match(RA);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),Uh(t,(function(e){e=e.split(":"),n+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'})),n}var BA=function(){function e(e){this.cfg={};var t,n,r,i,a,o,s,l=null,c=nd("gradient_");return"l"===e.toLowerCase()[0]?function(e,t){var n,r,i=LA.exec(e),a=Ep(Cp(parseFloat(i[1])),2*Math.PI),o=i[2];a>=0&&a<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=a&&a<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=a&&a<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(a),l=s*s,c=(r.x-n.x+s*(r.y-n.y))/(l+1)+n.x,u=s*(r.x-n.x+s*(r.y-n.y))/(l+1)+n.y;t.setAttribute("x1",n.x),t.setAttribute("y1",n.y),t.setAttribute("x2",c),t.setAttribute("y2",u),t.innerHTML=DA(o)}(e,l=cA("linearGradient")):(l=cA("radialGradient"),t=e,n=l,r=PA.exec(t),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4],n.setAttribute("cx",i),n.setAttribute("cy",a),n.setAttribute("r",o),n.innerHTML=DA(s)),l.setAttribute("id",c),this.el=l,this.id=c,this.cfg=e,this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),zA={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},HA={x:"-40%",y:"-40%",width:"200%",height:"200%"},jA=function(){function e(e){this.type="filter",this.cfg={},this.type="filter";var t=cA("filter");return Uh(HA,(function(e,n){t.setAttribute(n,e)})),this.el=t,this.id=nd("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return e.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,r=this.cfg;return Uh(Object.keys(r),(function(e){if(r[e]!==t[e])return n=!1,!1})),n},e.prototype.update=function(e,t){var n=this.cfg;return n[zA[e]]=t,this._parseShadow(n,this.el),this},e.prototype._parseShadow=function(e,t){var n='<feDropShadow\n      dx="'+(e.dx||0)+'"\n      dy="'+(e.dy||0)+'"\n      stdDeviation="'+(e.blur?e.blur/10:0)+'"\n      flood-color="'+(e.color?e.color:"#000")+'"\n      flood-opacity="'+(e.opacity?e.opacity:1)+'"\n      />';t.innerHTML=n},e}(),GA=function(){function e(e,t){this.cfg={};var n=cA("marker"),r=nd("marker_");n.setAttribute("id",r);var i=cA("path");i.setAttribute("stroke",e.stroke||"none"),i.setAttribute("fill",e.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var a=e["marker-start"===t?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",!0===a?this._setDefaultPath(t,i):(this.cfg=a,this._setMarker(e.lineWidth,i)),this}return e.prototype.match=function(){return!1},e.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},e.prototype._setMarker=function(e,t){var n=this.el,r=this.cfg.path,i=this.cfg.d;$h(r)&&(r=r.map((function(e){return e.join(" ")})).join("")),t.setAttribute("d",r),n.appendChild(t),i&&n.setAttribute("refX",""+i/e)},e.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},e}(),$A=function(){function e(e){this.type="clip",this.cfg={};var t=cA("clipPath");this.el=t,this.id=nd("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return e.prototype.match=function(){return!1},e.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},e}(),YA=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,UA=function(){function e(e){this.cfg={};var t=cA("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=cA("image");t.appendChild(n);var r=nd("pattern_");t.id=r,this.el=t,this.id=r,this.cfg=e;var i=YA.exec(e)[2];n.setAttribute("href",i);var a=new Image;function o(){t.setAttribute("width",""+a.width),t.setAttribute("height",""+a.height)}return i.match(/^data:/i)||(a.crossOrigin="Anonymous"),a.src=i,a.complete?o():(a.onload=o,a.src=a.src),this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),VA=function(){function e(e){var t=cA("defs"),n=nd("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return e.prototype.find=function(e,t){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(e,t)){r=n[i].id;break}return r},e.prototype.findById=function(e){for(var t=this.children,n=null,r=0;r<t.length;r++)if(t[r].id===e){n=t[r];break}return n},e.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},e.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new GA(e,t);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},e.prototype.addGradient=function(e){var t=new BA(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addArrow=function(e,t){var n=new GA(e,t);return this.el.appendChild(n.el),this.add(n),n.id},e.prototype.addShadow=function(e){var t=new jA(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addPattern=function(e){var t=new UA(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addClip=function(e){var t=new $A(e);return this.el.appendChild(t.el),this.add(t),t.id},e}(),WA=function(e){function t(t){return e.call(this,Nh(Nh({},t),{autoDraw:!0,renderer:"svg"}))||this}return Mh(t,e),t.prototype.getShapeBase=function(){return Fn},t.prototype.getGroupBase=function(){return gA},t.prototype.getShape=function(e,t,n){var r=n.target||n.srcElement;if(!sA[r.tagName]){for(var i=r.parentNode;i&&!sA[i.tagName];)i=i.parentNode;r=i}return this.find((function(e){return e.get("el")===r}))},t.prototype.createDom=function(){var e=cA("svg"),t=new VA(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",t),e},t.prototype.onCanvasChange=function(e){var t=this.get("context"),n=this.get("el");if("sort"===e){var r=this.get("children");r&&r.length&&hA(this,(function(e,t){return r.indexOf(e)-r.indexOf(t)?1:0}))}else if("clear"===e){if(n){n.innerHTML="";var i=t.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===e?pA(this):"clip"===e?dA(this,t):"changeSize"===e&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},t.prototype.draw=function(){var e=this.get("context"),t=this.getChildren();dA(this,e),t.length&&fA(e,t)},t}(Sg),XA=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:Fn,version:"0.5.6",Canvas:WA,Group:gA,Event:Ef,Base:Sf,AbstractCanvas:Sg,AbstractGroup:kg,AbstractShape:_g,getBBoxMethod:Ig,getTextHeight:sv,assembleFont:lv,isAllowCapture:wf,multiplyVec2:am,invert:om,getOffScreenContext:ov,PathUtil:xf}),qA=function(e){function t(t){var n=e.call(this,t)||this;n.type="path",n.shapeType="line";var r=t.connectNulls,i=void 0!==r&&r,a=t.showSinglePoint,o=void 0===a||a;return n.connectNulls=i,n.showSinglePoint=o,n}return Mh(t,e),t.prototype.updateElements=function(e,t){void 0===t&&(t=!1);for(var n=new Map,r=new Map,i=[],a=0,o=0;o<e.length;o++){var s=e[o],l=this.getElementId(s);i.push(l),n.set(l,s),r.set(l,a),a++}this.elements=new Array(a);for(var c=sk(this.lastElementsMap,i),u=c.added,h=c.updated,p=c.removed,d=0,f=u;d<f.length;d++){l=f[d],s=n.get(l);var m=this.getShapeFactory(),g=this.getShapeInfo(s);o=r.get(l);(x=new XS({shapeFactory:m,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:o})).geometry=this,x.animate=this.animateOption,x.draw(g,t),this.elementsMap[l]=x,this.elements[o]=x}for(var v=0,y=h;v<y.length;v++){l=y[v],s=n.get(l);var x=this.lastElementsMap[l],E=(o=r.get(l),g=this.getShapeInfo(s),x.getModel());(this.isCoordinateChanged||ak(E,g))&&(x.animate=this.animateOption,x.update(g)),this.elementsMap[l]=x,this.elements[o]=x}for(var b=0,C=p;b<C.length;b++){l=C[b];(x=this.lastElementsMap[l]).animate=this.animateOption,x.destroy()}},t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push({x:a.x,y:a.y}),n.push(a._origin)}return{points:t,data:n}},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=this.getPointsAndData(e),r=n.points,i=n.data;return t.mappingData=e,t.data=i,t.isStack=!!this.getAdjust("stack"),t.points=r,t.connectNulls=this.connectNulls,t.showSinglePoint=this.showSinglePoint,t},t}(lk);function KA(e,t,n,r,i){var a=[];if(e.length){for(var o=[],s=[],l=0,c=e.length;l<c;l++){var u=e[l];o.push(u[1]),s.push(u[0])}s=s.reverse(),Uh([o,s],(function(e,l){var c=[],u=r.parsePoints(e),h=u[0];1===o.length&&1===s.length?c=0===l?[["M",h.x-.5,h.y],["L",h.x+.5,h.y]]:[["L",h.x+.5,h.y],["L",h.x-.5,h.y]]:(t&&u.push({x:h.x,y:h.y}),c=n?xw(u,!1,i):yw(u,!1),l>0&&(c[0][0]="L")),a=a.concat(c)})),a.push(["Z"])}return a}function QA(e,t,n,r,i){for(var a=Mk(e,t,!t,"lineWidth"),o=e.connectNulls,s=e.isInCircle,l=Ak(e.points,o,e.showSinglePoint),c=[],u=0,h=l.length;u<h;u++){var p=l[u];c=c.concat(KA(p,s,n,r,i))}return a.path=c,a}function ZA(e){var t=e.start,n=e.end;return[[t.x,n.y],[n.x,t.y]]}nk("area",{defaultShapeType:"area",getDefaultPoints:function(e){var t=e.x,n=e.y0;return($h(e.y)?e.y:[n,e.y]).map((function(e){return{x:t,y:e}}))}}),rk("area","area",{draw:function(e,t){var n=QA(e,!1,!1,this);return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,fill:e.color}}}});var JA=function(e){function t(t){var n=e.call(this,t)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var r=t.startOnZero,i=void 0===r||r,a=t.sortable,o=void 0!==a&&a,s=t.showSinglePoint,l=void 0!==s&&s;return n.startOnZero=i,n.sortable=o,n.showSinglePoint=l,n}return Mh(t,e),t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push(a.points),n.push(a._origin)}return{points:t,data:n}},t.prototype.getYMinValue=function(){return this.startOnZero?e.prototype.getYMinValue.call(this):this.getYScale().min},t}(qA);nk("edge",{defaultShapeType:"line",getDefaultPoints:function(e){return Fk(e)}}),rk("edge","line",{draw:function(e,t){var n=Mk(e,!0,!1,"lineWidth"),r=yw(this.parsePoints(e.points),this.coordinate.isPolar);return t.addShape("path",{attrs:Nh(Nh({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});var eO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return Mh(t,e),t}(lk),tO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return Mh(t,e),t.prototype.updateElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=this.prepareRange(r),a=this.prepareSize(),o=qp(this.styleOption,["cfg","shadowBlur"]);vp(o)||(o=a/2),this.prepareGreyScaleBlurredCircle(a,o),this.drawWithRange(r,i,a,o)}},t.prototype.color=function(e,t){return this.createAttrOption("color",e,"function"!=typeof t?t:""),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},t.prototype.prepareRange=function(e){var t=this.getAttribute("color").getFields()[0],n=1/0,r=-1/0;return e.forEach((function(e){var i=e._origin[t];i>r&&(r=i),i<n&&(n=i)})),n===r&&(n=r-1),[n,r]},t.prototype.prepareSize=function(){var e=this.getDefaultValue("size");return vp(e)||(e=this.getDefaultSize()),e},t.prototype.prepareGreyScaleBlurredCircle=function(e,t){var n=this.getGrayScaleBlurredCanvas(),r=e+t,i=n.getContext("2d");n.width=n.height=2*r,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=t,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,e,0,2*Math.PI,!0),i.closePath(),i.fill()},t.prototype.drawWithRange=function(e,t,n,r){var i=this.coordinate,a=i.start,o=i.end,s=this.coordinate.getWidth(),l=this.coordinate.getHeight(),c=this.getAttribute("color").getFields()[0];this.clearShadowCanvasCtx();var u=this.getShadowCanvasCtx();t&&(e=e.filter((function(e){return e._origin[c]<=t[1]&&e._origin[c]>=t[0]})));for(var h=this.scales[c],p=0,d=e;p<d.length;p++){var f=d[p],m=this.getDrawCfg(f),g=m.x,v=m.y,y=h.scale(f._origin[c]);this.drawGrayScaleBlurredCircle(g-a.x,v-o.y,n+r,y,u)}var x=u.getImageData(0,0,s,l);this.clearShadowCanvasCtx(),this.colorize(x),u.putImageData(x,0,0);var E=this.getImageShape();E.attr("x",a.x),E.attr("y",o.y),E.attr("width",s),E.attr("height",l),E.attr("img",u.canvas),E.set("origin",this.getShapeInfo(e))},t.prototype.getDefaultSize=function(){var e=this.getAttribute("position"),t=this.coordinate;return Math.min(t.getWidth()/(4*e.scales[0].ticks.length),t.getHeight()/(4*e.scales[1].ticks.length))},t.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},t.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement("canvas"),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext("2d")},t.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},t.prototype.drawGrayScaleBlurredCircle=function(e,t,n,r,i){var a=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(a,e-n,t-n)},t.prototype.colorize=function(e){for(var t=this.getAttribute("color"),n=e.data,r=this.paletteCache,i=3;i<n.length;i+=4){var a=n[i];if(vp(a)){var o=r[a]?r[a]:oy.rgb2arr(t.gradient(a/256));n[i-3]=o[0],n[i-2]=o[1],n[i-1]=o[2],n[i]=a}}},t.prototype.getImageShape=function(){var e=this.imageShape;return e||(e=this.container.addShape({type:"image",attrs:{}}),this.imageShape=e,e)},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=e.map((function(e){return e._origin}));return Nh(Nh({},t),{mappingData:e,data:n})},t}(lk);function nO(e){var t,n,r,i,a=e.x,o=e.y,s=e.y0,l=e.size;$h(o)?(t=o[0],n=o[1]):(t=s,n=o),$h(a)?(r=a[0],i=a[1]):(r=a-l/2,i=a+l/2);var c=[{x:r,y:t},{x:r,y:n}];return c.push({x:i,y:n},{x:i,y:t}),c}function rO(e,t){void 0===t&&(t=!0);var n=[],r=e[0];n.push(["M",r.x,r.y]);for(var i=1,a=e.length;i<a;i++)n.push(["L",e[i].x,e[i].y]);return t&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}function iO(e,t){var n=0,r=0,i=0,a=0;return $h(e)?1===e.length?n=r=i=a=e[0]:2===e.length?(n=i=e[0],r=a=e[1]):3===e.length?(n=e[0],r=a=e[1],i=e[2]):(n=e[0],r=e[1],i=e[2],a=e[3]):n=r=i=a=e,n+r>t&&(r=t-(n=n?t/(1+r/n):0)),i+a>t&&(a=t-(i=i?t/(1+a/i):0)),[n||0,r||0,i||0,a||0]}function aO(e,t,n){var r=[];if(n.isRect){var i=n.isTransposed?{x:n.start.x,y:t[0].y}:{x:t[0].x,y:n.start.y},a=n.isTransposed?{x:n.end.x,y:t[2].y}:{x:t[3].x,y:n.end.y},o=qp(e,["background","style","radius"]);if(o){var s=n.isTransposed?Math.abs(t[0].y-t[2].y):t[2].x-t[1].x,l=n.isTransposed?n.getWidth():n.getHeight(),c=iO(o,Math.min(s,l)),u=c[0],h=c[1],p=c[2],d=c[3];r.push(["M",i.x,a.y+u]),0!==u&&r.push(["A",u,u,0,0,1,i.x+u,a.y]),r.push(["L",a.x-h,a.y]),0!==h&&r.push(["A",h,h,0,0,1,a.x,a.y+h]),r.push(["L",a.x,i.y-p]),0!==p&&r.push(["A",p,p,0,0,1,a.x-p,i.y]),r.push(["L",i.x+d,i.y]),0!==d&&r.push(["A",d,d,0,0,1,i.x,i.y-d])}else r.push(["M",i.x,i.y]),r.push(["L",a.x,i.y]),r.push(["L",a.x,a.y]),r.push(["L",i.x,a.y]),r.push(["L",i.x,i.y]);r.push(["z"])}if(n.isPolar){var f=n.getCenter(),m=RT(e,n),g=m.startAngle,v=m.endAngle;if("theta"===n.type||n.isTransposed){var y=function(e){return Math.pow(e,2)};u=Math.sqrt(y(f.x-t[0].x)+y(f.y-t[0].y)),h=Math.sqrt(y(f.x-t[2].x)+y(f.y-t[2].y));r=LT(f.x,f.y,u,n.startAngle,n.endAngle,h)}else r=LT(f.x,f.y,n.getRadius(),g,v)}return r}function oO(e,t,n){var r=[];return Gh(t)?n?r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",(e[2].x+e[3].x)/2,(e[2].y+e[3].y)/2],["Z"]):r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[3].x,e[3].y],["Z"]):r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",t[1].x,t[1].y],["L",t[0].x,t[0].y],["Z"]),r}function sO(e,t){return[t,e]}function lO(e){var t=e.theme,n=e.coordinate,r=e.getXScale(),i=r.values,a=e.beforeMappingData,o=i.length,s=GT(e.coordinate),l=e.intervalPadding,c=e.dodgePadding,u=e.maxColumnWidth||t.maxColumnWidth,h=e.minColumnWidth||t.minColumnWidth,p=e.columnWidthRatio||t.columnWidthRatio,d=e.multiplePieWidthRatio||t.multiplePieWidthRatio,f=e.roseWidthRatio||t.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var m=function(e,t){var n=e.length,r=e;ap(r[0])&&(r=e.map((function(e){return t.translate(e)})));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}(i,r);o=(r.max-r.min)/m,i.length>o&&(o=i.length)}var g=r.range,v=1/o,y=1;(n.isPolar?y=n.isTransposed&&o>1?d:f:(r.isLinear&&(v*=g[1]-g[0]),y=p),!Gh(l)&&l>=0)?v=(1-(o-1)*(l/s))/o:v*=y;if(e.getAdjust("dodge")){var x=function(e,t){if(t){var n=Zh(e);return sp(n,t).length}return e.length}(a,e.getAdjust("dodge").dodgeBy);if(!Gh(c)&&c>=0)v=(v-c/s*(x-1))/x;else!Gh(l)&&l>=0?(v*=y,v/=x):v/=x;v=v>=0?v:0}if(!Gh(u)&&u>=0){var E=u/s;v>E&&(v=E)}if(!Gh(h)&&h>=0){var b=h/s;v<b&&(v=b)}return v}nk("interval",{defaultShapeType:"rect",getDefaultPoints:function(e){return nO(e)}}),rk("interval","rect",{draw:function(e,t){var n,r=Mk(e,!1,!0),i=t,a=null==e?void 0:e.background;if(a){i=t.addGroup();var o=Nk(e),s=aO(e,this.parsePoints(e.points),this.coordinate);i.addShape("path",{attrs:Nh(Nh({},o),{path:s}),zIndex:-1,name:"element-background"})}n=r.radius&&this.coordinate.isRect?function(e,t,n){var r,i,a,o,s,l,c,u=Ph([],e,!0),h=u[0],p=u[1],d=u[2],f=u[3],m="number"==typeof n?Array(4).fill(n):n,g=m[0],v=m[1],y=m[2],x=m[3];t.isTransposed&&(p=(r=sO(p,f))[0],f=r[1],g=(i=[x,g,v,y])[0],v=i[1],y=i[2],x=i[3]),t.isReflect("y")&&(h=(a=sO(h,p))[0],p=a[1],d=(o=sO(d,f))[0],f=o[1]),t.isReflect("x")&&(h=(s=sO(h,f))[0],f=s[1],p=(l=sO(p,d))[0],d=l[1]);var E=[],b=function(e){return Math.abs(e)};return g=(c=iO([g,v,y,x],Math.min(b(f.x-h.x),b(p.y-h.y))).map((function(e){return b(e)})))[0],v=c[1],y=c[2],x=c[3],h.y<p.y?(E.push(["M",f.x,f.y+y]),0!==y&&E.push(["A",y,y,0,0,0,f.x-y,f.y]),E.push(["L",h.x+x,h.y]),0!==x&&E.push(["A",x,x,0,0,0,h.x,h.y+x]),E.push(["L",p.x,p.y-g]),0!==g&&E.push(["A",g,g,0,0,0,p.x+g,p.y]),E.push(["L",d.x-v,d.y]),0!==v&&E.push(["A",v,v,0,0,0,d.x,d.y-v]),E.push(["L",f.x,f.y+y]),E.push(["z"])):f.x<h.x?(E.push(["M",d.x+v,d.y]),0!==v&&E.push(["A",v,v,0,0,0,d.x,d.y+v]),E.push(["L",f.x,f.y-y]),0!==y&&E.push(["A",y,y,0,0,0,f.x+y,f.y]),E.push(["L",h.x-x,h.y]),0!==x&&E.push(["A",x,x,0,0,0,h.x,h.y-x]),E.push(["L",p.x,p.y+g]),0!==g&&E.push(["A",g,g,0,0,0,p.x-g,p.y]),E.push(["L",d.x+v,d.y]),E.push(["z"])):(E.push(["M",p.x,p.y+g]),0!==g&&E.push(["A",g,g,0,0,1,p.x+g,p.y]),E.push(["L",d.x-v,d.y]),0!==v&&E.push(["A",v,v,0,0,1,d.x,d.y+v]),E.push(["L",f.x,f.y-y]),0!==y&&E.push(["A",y,y,0,0,1,f.x-y,f.y]),E.push(["L",h.x+x,h.y]),0!==x&&E.push(["A",x,x,0,0,1,h.x,h.y-x]),E.push(["L",p.x,p.y+g]),E.push(["z"])),E}(this.parsePoints(e.points),this.coordinate,r.radius):this.parsePath(function(e,t,n){var r=n.getWidth(),i=n.getHeight(),a="rect"===n.type,o=[],s=(e[2].x-e[1].x)/2,l=n.isTransposed?s*i/r:s*r/i;return"round"===t?(a?(o.push(["M",e[0].x,e[0].y+l]),o.push(["L",e[1].x,e[1].y-l]),o.push(["A",s,s,0,0,1,e[2].x,e[2].y-l]),o.push(["L",e[3].x,e[3].y+l]),o.push(["A",s,s,0,0,1,e[0].x,e[0].y+l])):(o.push(["M",e[0].x,e[0].y]),o.push(["L",e[1].x,e[1].y]),o.push(["A",s,s,0,0,1,e[2].x,e[2].y]),o.push(["L",e[3].x,e[3].y]),o.push(["A",s,s,0,0,1,e[0].x,e[0].y])),o.push(["z"])):o=rO(e),o}(e.points,r.lineCap,this.coordinate));var l=i.addShape("path",{attrs:Nh(Nh({},r),{path:n}),name:"interval"});return a?i:l},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});var cO=function(e){function t(t){var n=e.call(this,t)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var r=t.background;return n.background=r,n}return Mh(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=GT(this.coordinate)):(this.defaultSize||(this.defaultSize=lO(this)),n=this.defaultSize);return r.size=n,r},t.prototype.adjustScale=function(){e.prototype.adjustScale.call(this);var t,n,r=this.getYScale();if("theta"===this.coordinate.type)r.change({nice:!1,min:0,max:(t=r,n=t.values.filter((function(e){return!Gh(e)&&!isNaN(e)})),Math.max.apply(Math,Ph(Ph([],n,!1),[Gh(t.max)?-1/0:t.max],!1)))});else{var i=this.scaleDefs,a=r.field,o=r.min,s=r.max;"time"!==r.type&&(o>0&&!qp(i,[a,"min"])&&r.change({min:0}),s<=0&&!qp(i,[a,"max"])&&r.change({max:0}))}},t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return n.background=this.background,n},t}(lk),uO=function(e){function t(t){var n=e.call(this,t)||this;n.type="line";var r=t.sortable,i=void 0!==r&&r;return n.sortable=i,n}return Mh(t,e),t}(qA),hO=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"];function pO(e,t,n,r,i){var a=Mk(t,i,!i,"r"),o=e.parsePoints(t.points),s=o[0];if(t.isStack)s=o[1];else if(o.length>1){for(var l=n.addGroup(),c=0,u=o;c<u.length;c++){var h=u[c];l.addShape({type:"marker",attrs:Nh(Nh(Nh({},a),{symbol:Ek[r]||r}),h)})}return l}return n.addShape({type:"marker",attrs:Nh(Nh(Nh({},a),{symbol:Ek[r]||r}),s)})}nk("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(e){return Fk(e)}}),Uh(hO,(function(e){rk("point","hollow-".concat(e),{draw:function(t,n){return pO(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:Ek[e]||e,style:{r:4.5,stroke:n,fill:null}}}})}));var dO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return Mh(t,e),t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return Nh(Nh({},n),{isStack:!!this.getAdjust("stack")})},t}(lk);nk("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(e){var t=[];return Uh(e.x,(function(n,r){var i=e.y[r];t.push({x:n,y:i})})),t}}),rk("polygon","polygon",{draw:function(e,t){if(!Yp(e.points)){var n=Mk(e,!0,!0),r=this.parsePath(function(e){for(var t=e[0],n=1,r=[["M",t.x,t.y]];n<e.length;){var i=e[n];i.x===e[n-1].x&&i.y===e[n-1].y||(r.push(["L",i.x,i.y]),i.x===t.x&&i.y===t.y&&n<e.length-1&&(t=e[n+1],r.push(["Z"]),r.push(["M",t.x,t.y]),n++)),n++}return Vp(cp(r),t)||r.push(["L",t.x,t.y]),r.push(["Z"]),r}(e.points));return t.addShape("path",{attrs:Nh(Nh({},n),{path:r}),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}});var fO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return Mh(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=r.x,a=r.y;if(!$h(i)||!$h(a)){var o=this.getXScale(),s=this.getYScale(),l=.5/o.values.length,c=.5/s.values.length;o.isCategory&&s.isCategory?(i=[i-l,i-l,i+l,i+l],a=[a-c,a+c,a+c,a-c]):$h(i)?(i=[(n=i)[0],n[0],n[1],n[1]],a=[a-c/2,a+c/2,a+c/2,a-c/2]):$h(a)&&(a=[(n=a)[0],n[1],n[1],n[0]],i=[i-l/2,i-l/2,i+l/2,i+l/2]),r.x=i,r.y=a}return r},t}(lk);nk("schema",{defaultShapeType:""});var mO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return Mh(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=GT(this.coordinate)):(this.defaultSize||(this.defaultSize=lO(this)),n=this.defaultSize);return r.size=n,r},t}(lk);nk("violin",{defaultShapeType:"violin",getDefaultPoints:function(e){var t=e.size/2,n=[],r=function(e){if(!$h(e))return[];var t=Jh(e);return Wp(e,(function(e){return e/t}))}(e._size);return Uh(e.y,(function(i,a){var o=r[a]*t,s=0===a,l=a===e.y.length-1;n.push({isMin:s,isMax:l,x:e.x-o,y:i}),n.unshift({isMin:s,isMax:l,x:e.x+o,y:i})})),n}}),rk("violin","violin",{draw:function(e,t){var n=Mk(e,!0,!0),r=this.parsePath(Ok(e.points));return t.addShape("path",{attrs:Nh(Nh({},n),{path:r}),name:"violin"})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:e.color}}}});var gO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return Mh(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=GT(this.coordinate)):(this.defaultSize||(this.defaultSize=lO(this)),n=this.defaultSize);return r.size=n,r._size=qp(t._origin,[this._sizeField]),r},t.prototype.initAttributes=function(){var t=this.attributeOption,n=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete t.size,e.prototype.initAttributes.call(this)},t}(lk);function vO(e,t){return["C",1*e.x/2+1*t.x/2,e.y,1*e.x/2+1*t.x/2,t.y,t.x,t.y]}function yO(e,t){var n=[];n.push({x:t.x,y:t.y}),n.push(e);var r=["Q"];return Uh(n,(function(e){r.push(e.x,e.y)})),r}rk("area","line",{draw:function(e,t){var n=QA(e,!0,!1,this);return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,stroke:e.color,fill:null}}}}),rk("area","smooth",{draw:function(e,t){var n=QA(e,!1,!0,this,ZA(this.coordinate));return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,fill:e.color}}}}),rk("area","smooth-line",{draw:function(e,t){var n=QA(e,!0,!0,this,ZA(this.coordinate));return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,stroke:e.color,fill:null}}}}),rk("edge","arc",{draw:function(e,t){var n,r=Mk(e,!0,!1,"lineWidth"),i=e.points,a=i.length>2?"weight":"normal";if(e.isInCircle){var o={x:0,y:1};return"normal"===a?n=function(e,t,n){var r=yO(t,n),i=[["M",e.x,e.y]];return i.push(r),i}(i[0],i[1],o):(r.fill=r.stroke,n=function(e,t){var n=yO(e[1],t),r=yO(e[3],t),i=[["M",e[0].x,e[0].y]];return i.push(r),i.push(["L",e[3].x,e[3].y]),i.push(["L",e[2].x,e[2].y]),i.push(n),i.push(["L",e[1].x,e[1].y]),i.push(["L",e[0].x,e[0].y]),i.push(["Z"]),i}(i,o)),n=this.parsePath(n),t.addShape("path",{attrs:Nh(Nh({},r),{path:n})})}if("normal"===a)return n=PT(((i=this.parsePoints(i))[1].x+i[0].x)/2,i[0].y,Math.abs(i[1].x-i[0].x)/2,Math.PI,2*Math.PI),t.addShape("path",{attrs:Nh(Nh({},r),{path:n})});var s=vO(i[1],i[3]),l=vO(i[2],i[0]);return n=[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],s,["L",i[3].x,i[3].y],["L",i[2].x,i[2].y],l,["Z"]],n=this.parsePath(n),r.fill=r.stroke,t.addShape("path",{attrs:Nh(Nh({},r),{path:n})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),rk("edge","smooth",{draw:function(e,t){var n=Mk(e,!0,!1,"lineWidth"),r=e.points,i=this.parsePath(function(e,t){var n=vO(e,t),r=[["M",e.x,e.y]];return r.push(n),r}(r[0],r[1]));return t.addShape("path",{attrs:Nh(Nh({},n),{path:i})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});rk("edge","vhv",{draw:function(e,t){var n=Mk(e,!0,!1,"lineWidth"),r=e.points,i=this.parsePath(function(e,t){var n=[];n.push({x:e.x,y:.6666666666666667*e.y+.3333333333333333*t.y}),n.push({x:t.x,y:.6666666666666667*e.y+.3333333333333333*t.y}),n.push(t);var r=[["M",e.x,e.y]];return Uh(n,(function(e){r.push(["L",e.x,e.y])})),r}(r[0],r[1]));return t.addShape("path",{attrs:Nh(Nh({},n),{path:i})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),rk("interval","funnel",{getPoints:function(e){return e.size=2*e.size,nO(e)},draw:function(e,t){var n=Mk(e,!1,!0),r=this.parsePath(oO(e.points,e.nextPoints,!1));return t.addShape("path",{attrs:Nh(Nh({},n),{path:r}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),rk("interval","hollow-rect",{draw:function(e,t){var n=Mk(e,!0,!1),r=t,i=null==e?void 0:e.background;if(i){r=t.addGroup();var a=Nk(e),o=aO(e,this.parsePoints(e.points),this.coordinate);r.addShape("path",{attrs:Nh(Nh({},a),{path:o}),zIndex:-1,name:"element-background"})}var s=this.parsePath(rO(e.points)),l=r.addShape("path",{attrs:Nh(Nh({},n),{path:s}),name:"interval"});return i?r:l},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}}),rk("interval","line",{getPoints:function(e){return n=(t=e).x,r=t.y,i=t.y0,$h(r)?r.map((function(e,t){return{x:$h(n)?n[t]:n,y:e}})):[{x:n,y:i},{x:n,y:r}];var t,n,r,i},draw:function(e,t){var n=Mk(e,!0,!1,"lineWidth"),r=zT(Nh({},n),["fill"]),i=this.parsePath(rO(e.points,!1));return t.addShape("path",{attrs:Nh(Nh({},r),{path:i}),name:"interval"})},getMarker:function(e){return{symbol:function(e,t,n){return[["M",e,t-n],["L",e,t+n]]},style:{r:5,stroke:e.color}}}}),rk("interval","pyramid",{getPoints:function(e){return e.size=2*e.size,nO(e)},draw:function(e,t){var n=Mk(e,!1,!0),r=this.parsePath(oO(e.points,e.nextPoints,!0));return t.addShape("path",{attrs:Nh(Nh({},n),{path:r}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),rk("interval","tick",{getPoints:function(e){return function(e){var t,n,r=e.x,i=e.y,a=e.y0,o=e.size;$h(i)?(t=i[0],n=i[1]):(t=a,n=i);var s=r+o/2,l=r-o/2;return[{x:r,y:t},{x:r,y:n},{x:l,y:t},{x:s,y:t},{x:l,y:n},{x:s,y:n}]}(e)},draw:function(e,t){var n,r=Mk(e,!0,!1),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y]]);return t.addShape("path",{attrs:Nh(Nh({},r),{path:i}),name:"interval"})},getMarker:function(e){return{symbol:function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},style:{r:5,stroke:e.color}}}});function xO(e,t){var n=Ak(e.points,e.connectNulls,e.showSinglePoint),r=[];return Uh(n,(function(e){var n=function(e,t){var n=[];return Uh(e,(function(r,i){var a=e[i+1];if(n.push(r),a){var o=function(e,t,n){var r,i=e.x,a=e.y,o=t.x,s=t.y;switch(n){case"hv":r=[{x:o,y:a}];break;case"vh":r=[{x:i,y:s}];break;case"hvh":var l=(o+i)/2;r=[{x:l,y:a},{x:l,y:s}];break;case"vhv":var c=(a+s)/2;r=[{x:i,y:c},{x:o,y:c}]}return r}(r,a,t);n=n.concat(o)}})),n}(e,t);r=r.concat(function(e){return e.map((function(e,t){return 0===t?["M",e.x,e.y]:["L",e.x,e.y]}))}(n))})),Nh(Nh({},Mk(e,!0,!1,"lineWidth")),{path:r})}function EO(e){var t=$h(e)?e:[e],n=t[0],r=t[t.length-1],i=t.length>1?t[1]:n;return{min:n,max:r,min1:i,max1:t.length>3?t[3]:r,median:t.length>2?t[2]:i}}function bO(e,t,n){var r,i=n/2;if($h(t)){var a=EO(t),o=a.min,s=a.max,l=a.median,c=a.min1,u=e-i,h=e+i;r=[[u,s],[h,s],[e,s],[e,p=a.max1],[u,c],[u,p],[h,p],[h,c],[e,c],[e,o],[u,o],[h,o],[u,l],[h,l]]}else{t=Gh(t)?.5:t;var p,d=EO(e),f=(o=d.min,s=d.max,l=d.median,t-i),m=t+i;r=[[o,f],[o,m],[o,t],[c=d.min1,t],[c,f],[c,m],[p=d.max1,m],[p,f],[p,t],[s,t],[s,f],[s,m],[l,f],[l,m]]}return r.map((function(e){return{x:e[0],y:e[1]}}))}function CO(e){var t=($h(e)?e:[e]).sort((function(e,t){return t-e}));return function(e,t,n){if(ap(e))return e.padEnd(t,n);if($h(e)){var r=e.length;if(r<t)for(var i=t-r,a=0;a<i;a++)e.push(n)}return e}(t,4,t[t.length-1])}function TO(e,t,n){var r=CO(t);return[{x:e,y:r[0]},{x:e,y:r[1]},{x:e-n/2,y:r[2]},{x:e-n/2,y:r[1]},{x:e+n/2,y:r[1]},{x:e+n/2,y:r[2]},{x:e,y:r[2]},{x:e,y:r[3]}]}function wO(e,t){var n=Math.abs(e[0].x-e[2].x),r=Math.abs(e[0].y-e[2].y),i=Math.min(n,r);return t&&(i=mp(t,0,Math.min(n,r))),i/=2,{x:(e[0].x+e[2].x)/2-i,y:(e[0].y+e[2].y)/2-i,width:2*i,height:2*i}}Uh(["hv","vh","hvh","vhv"],(function(e){rk("line",e,{draw:function(t,n){var r=xO(t,e);return n.addShape({type:"path",attrs:r,name:"line"})},getMarker:function(t){return Pk(t,e)}})})),Uh(["cross","tick","plus","hyphen","line"],(function(e){rk("point",e,{draw:function(t,n){return pO(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:Ek[e],style:{r:4.5,stroke:n,fill:null}}}})})),rk("point","image",{draw:function(e,t){var n=Mk(e,!1,!1,"r").r,r=this.parsePoints(e.points),i=r[0];if(e.isStack)i=r[1];else if(r.length>1){for(var a=t.addGroup(),o=0,s=r;o<s.length;o++){var l=s[o];a.addShape("image",{attrs:{x:l.x-n/2,y:l.y-n,width:n,height:n,img:e.shape[1]}})}return a}return t.addShape("image",{attrs:{x:i.x-n/2,y:i.y-n,width:n,height:n,img:e.shape[1]}})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),Uh(hO,(function(e){rk("point",e,{draw:function(t,n){return pO(this,t,n,e,!1)},getMarker:function(t){var n=t.color;return{symbol:Ek[e]||e,style:{r:4.5,fill:n}}}})})),rk("schema","box",{getPoints:function(e){return bO(e.x,e.y,e.size)},draw:function(e,t){var n,r=Mk(e,!0,!1),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y],["L",n[6].x,n[6].y],["L",n[7].x,n[7].y],["L",n[4].x,n[4].y],["Z"],["M",n[8].x,n[8].y],["L",n[9].x,n[9].y],["M",n[10].x,n[10].y],["L",n[11].x,n[11].y],["M",n[12].x,n[12].y],["L",n[13].x,n[13].y]]);return t.addShape("path",{attrs:Nh(Nh({},r),{path:i,name:"schema"})})},getMarker:function(e){return{symbol:function(e,t,n){var r=bO(e,[t-6,t-3,t,t+3,t+6],n);return[["M",r[0].x+1,r[0].y],["L",r[1].x-1,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x+1,r[10].y],["L",r[11].x-1,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]},style:{r:6,lineWidth:1,stroke:e.color}}}}),rk("schema","candle",{getPoints:function(e){return TO(e.x,e.y,e.size)},draw:function(e,t){var n,r=Mk(e,!0,!0),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[4].x,n[4].y],["L",n[5].x,n[5].y],["Z"],["M",n[6].x,n[6].y],["L",n[7].x,n[7].y]]);return t.addShape("path",{attrs:Nh(Nh({},r),{path:i,name:"schema"})})},getMarker:function(e){var t=e.color;return{symbol:function(e,t,n){var r=TO(e,[t+7.5,t+3,t-3,t-7.5],n);return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}}),rk("polygon","square",{draw:function(e,t){if(!Yp(e.points)){var n=Mk(e,!0,!0),r=this.parsePoints(e.points);return t.addShape("rect",{attrs:Nh(Nh({},n),wO(r,e.size)),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),rk("violin","smooth",{draw:function(e,t){var n=Mk(e,!0,!0),r=this.parsePath(Ik(e.points));return t.addShape("path",{attrs:Nh(Nh({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{stroke:null,r:4,fill:e.color}}}}),rk("violin","hollow",{draw:function(e,t){var n=Mk(e,!0,!1),r=this.parsePath(Ok(e.points));return t.addShape("path",{attrs:Nh(Nh({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:null,stroke:e.color}}}}),rk("violin","hollow-smooth",{draw:function(e,t){var n=Mk(e,!0,!1),r=this.parsePath(Ik(e.points));return t.addShape("path",{attrs:Nh(Nh({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:null,stroke:e.color}}}});var SO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getLabelValueDir=function(e){var t=e.points;return t[0].y<=t[2].y?1:-1},t.prototype.getLabelOffsetPoint=function(t,n,r,i){var a,o=e.prototype.getLabelOffsetPoint.call(this,t,n,r),s=this.getCoordinate(),l=s.isTransposed?"x":"y",c=this.getLabelValueDir(t.mappingData);return o=Nh(Nh({},o),((a={})[l]=o[l]*c,a)),s.isReflect("x")&&(o=Nh(Nh({},o),{x:-1*o.x})),s.isReflect("y")&&(o=Nh(Nh({},o),{y:-1*o.y})),o},t.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.theme;return jp({},n,r.labels,"middle"===e.position?{offset:0}:{},e)},t.prototype.setLabelPosition=function(e,t,n,r){var i,a,o,s,l=this.getCoordinate(),c=l.isTransposed,u=t.points,h=l.convert(u[0]),p=l.convert(u[2]),d=this.getLabelValueDir(t),f=$h(t.shape)?t.shape[0]:t.shape;if("funnel"===f||"pyramid"===f){var m=qp(t,"nextPoints"),g=qp(t,"points");if(m){var v=l.convert(g[0]),y=l.convert(g[1]),x=l.convert(m[0]),E=l.convert(m[1]);c?(i=Math.min(x.y,v.y),o=Math.max(x.y,v.y),a=(y.x+E.x)/2,s=(v.x+x.x)/2):(i=Math.min((y.y+E.y)/2,(v.y+x.y)/2),o=Math.max((y.y+E.y)/2,(v.y+x.y)/2),a=E.x,s=v.x)}else i=Math.min(p.y,h.y),o=Math.max(p.y,h.y),a=p.x,s=h.x}else i=Math.min(p.y,h.y),o=Math.max(p.y,h.y),a=p.x,s=h.x;switch(r){case"right":e.x=a,e.y=(i+o)/2,e.textAlign=qp(e,"textAlign",d>0?"left":"right");break;case"left":e.x=s,e.y=(i+o)/2,e.textAlign=qp(e,"textAlign",d>0?"left":"right");break;case"bottom":c&&(e.x=(a+s)/2),e.y=o,e.textAlign=qp(e,"textAlign","center"),e.textBaseline=qp(e,"textBaseline",d>0?"bottom":"top");break;case"middle":c&&(e.x=(a+s)/2),e.y=(i+o)/2,e.textAlign=qp(e,"textAlign","center"),e.textBaseline=qp(e,"textBaseline","middle");break;case"top":c&&(e.x=(a+s)/2),e.y=i,e.textAlign=qp(e,"textAlign","center"),e.textBaseline=qp(e,"textBaseline",d>0?"bottom":"top")}},t}(yk),kO=Math.PI/2,_O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=0;if(vp(e))n=e;else if(ap(e)&&-1!==e.indexOf("%")){var r=t.getRadius();t.innerRadius>0&&(r*=1-t.innerRadius),n=.01*parseFloat(e)*r}return n},t.prototype.getLabelItems=function(t){var n=e.prototype.getLabelItems.call(this,t),r=this.geometry.getYScale();return Wp(n,(function(e){if(e&&r){var t=r.scale(qp(e.data,r.field));return Nh(Nh({},e),{percent:t})}return e}))},t.prototype.getLabelAlign=function(e){var t,n=this.getCoordinate();if(e.labelEmit)t=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?"left":"right";else if(n.isTransposed){var r=n.getCenter(),i=e.offset;t=Math.abs(e.x-r.x)<1?"center":e.angle>Math.PI||e.angle<=0?i>0?"left":"right":i>0?"right":"left"}else t="center";return t},t.prototype.getLabelPoint=function(e,t,n){var r,i=1,a=e.content[n];this.isToMiddle(t)?r=this.getMiddlePoint(t.points):(1===e.content.length&&0===n?n=1:0===n&&(i=-1),r=this.getArcPoint(t,n));var o=e.offset*i,s=this.getPointAngle(r),l=e.labelEmit,c=this.getCirclePoint(s,o,r,l);return 0===c.r?c.content="":(c.content=a,c.angle=s,c.color=t.color),c.rotate=e.autoRotate?this.getLabelRotate(s,o,l):e.rotate,c.start={x:r.x,y:r.y},c},t.prototype.getArcPoint=function(e,t){return void 0===t&&(t=0),$h(e.x)||$h(e.y)?{x:$h(e.x)?e.x[t]:e.x,y:$h(e.y)?e.y[t]:e.y}:{x:e.x,y:e.y}},t.prototype.getPointAngle=function(e){return UT(this.getCoordinate(),e)},t.prototype.getCirclePoint=function(e,t,n,r){var i=this.getCoordinate(),a=i.getCenter(),o=$T(i,n);if(0===o)return Nh(Nh({},a),{r:o});var s=e;i.isTransposed&&o>t&&!r?s=e+2*Math.asin(t/(2*o)):o+=t;return{x:a.x+o*Math.cos(s),y:a.y+o*Math.sin(s),r:o}},t.prototype.getLabelRotate=function(e,t,n){var r=e+kO;return n&&(r-=kO),r&&(r>kO?r-=Math.PI:r<-kO&&(r+=Math.PI)),r},t.prototype.getMiddlePoint=function(e){var t=this.getCoordinate(),n=e.length,r={x:0,y:0};return Uh(e,(function(e){r.x+=e.x,r.y+=e.y})),r.x/=n,r.y/=n,r=t.convert(r)},t.prototype.isToMiddle=function(e){return e.x.length>2},t}(yk),AO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return Mh(t,e),t.prototype.getDefaultLabelCfg=function(t,n){var r=e.prototype.getDefaultLabelCfg.call(this,t,n);return jp({},r,qp(this.geometry.theme,"pieLabels",{}))},t.prototype.getLabelOffset=function(t){return e.prototype.getLabelOffset.call(this,t)||0},t.prototype.getLabelRotate=function(e,t,n){var r;return t<0&&((r=e)>Math.PI/2&&(r-=Math.PI),r<-Math.PI/2&&(r+=Math.PI)),r},t.prototype.getLabelAlign=function(e){var t,n=this.getCoordinate().getCenter();return t=e.angle<=Math.PI/2&&e.x>=n.x?"left":"right",e.offset<=0&&(t="right"===t?"left":"right"),t},t.prototype.getArcPoint=function(e){return e},t.prototype.getPointAngle=function(e){var t,n=this.getCoordinate(),r={x:$h(e.x)?e.x[0]:e.x,y:e.y[0]},i={x:$h(e.x)?e.x[1]:e.x,y:e.y[1]},a=UT(n,r);if(e.points&&e.points[0].y===e.points[1].y)t=a;else{var o=UT(n,i);a>=o&&(o+=2*Math.PI),t=a+(o-a)/2}return t},t.prototype.getCirclePoint=function(e,t){var n=this.getCoordinate(),r=n.getCenter(),i=n.getRadius()+t;return Nh(Nh({},FT(r.x,r.y,i,e)),{angle:e,r:i})},t}(_O);function OO(e,t,n){var r=e.filter((function(e){return!e.invisible}));r.sort((function(e,t){return e.y-t.y}));var i,a=!0,o=n.minY,s=n.maxY,l=Math.abs(o-s),c=0,u=Number.MIN_VALUE,h=r.map((function(e){return e.y>c&&(c=e.y),e.y<u&&(u=e.y),{content:e.content,size:t,targets:[e.y-o],pos:null}}));for(u-=o,c-o>l&&(l=c-o);a;)for(h.forEach((function(e){var t=(Math.min.apply(u,e.targets)+Math.max.apply(u,e.targets))/2;e.pos=Math.min(Math.max(u,t-e.size/2),l-e.size),e.pos=Math.max(0,e.pos)})),a=!1,i=h.length;i--;)if(i>0){var p=h[i-1],d=h[i];p.pos+p.size>d.pos&&(p.size+=d.size,p.targets=p.targets.concat(d.targets),p.pos+p.size>l&&(p.pos=l-p.size),h.splice(i,1),a=!0)}i=0,h.forEach((function(e){var n=o+t/2;e.targets.forEach((function(){r[i].y=e.pos+n,n+=t,i++}))}))}var IO=function(){function e(e){void 0===e&&(e={}),this.bitmap={};var t=e.xGap,n=void 0===t?1:t,r=e.yGap,i=void 0===r?8:r;this.xGap=n,this.yGap=i}return e.prototype.hasGap=function(e){for(var t=!0,n=this.bitmap,r=Math.round(e.minX),i=Math.round(e.maxX),a=Math.round(e.minY),o=Math.round(e.maxY),s=r;s<=i;s+=1)if(n[s]){if(s===r||s===i){for(var l=a;l<=o;l++)if(n[s][l]){t=!1;break}}else if(n[s][a]||n[s][o]){t=!1;break}}else n[s]={};return t},e.prototype.fillGap=function(e){for(var t=this.bitmap,n=Math.round(e.minX),r=Math.round(e.maxX),i=Math.round(e.minY),a=Math.round(e.maxY),o=n;o<=r;o+=1)t[o]||(t[o]={});for(o=n;o<=r;o+=this.xGap){for(var s=i;s<=a;s+=this.yGap)t[o][s]=!0;t[o][a]=!0}if(1!==this.yGap)for(o=i;o<=a;o+=1)t[n][o]=!0,t[r][o]=!0;if(1!==this.xGap)for(o=n;o<=r;o+=1)t[o][i]=!0,t[o][a]=!0},e.prototype.destroy=function(){this.bitmap={}},e}();function MO(e,t,n,r){var i=e.getCanvasBBox(),a=i.width,o=i.height,s={x:t,y:n,textAlign:"center"};switch(r){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=2*o+2;break;case 6:s.y+=2*o+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right"}return e.attr(s),e.getCanvasBBox()}var NO=qf;function FO(e){if(e.length>4)return[];var t=function(e,t){return[t.x-e.x,t.y-e.y]};return[t(e[0],e[1]),t(e[1],e[2])]}function LO(e,t,n){void 0===t&&(t=0),void 0===n&&(n={x:0,y:0});var r=e.x,i=e.y;return{x:(r-n.x)*Math.cos(-t)+(i-n.y)*Math.sin(-t)+n.x,y:(n.x-r)*Math.sin(-t)+(i-n.y)*Math.cos(-t)+n.y}}function PO(e){var t=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=e.rotation;return n?[LO(t[0],n,t[0]),LO(t[1],n,t[0]),LO(t[2],n,t[0]),LO(t[3],n,t[0])]:t}function RO(e,t){if(e.length>4)return{min:0,max:0};var n=[];return e.forEach((function(e){n.push(NO([e.x,e.y],t))})),{min:Math.min.apply(Math,n),max:Math.max.apply(Math,n)}}function DO(e,t){return e.max>t.min&&e.min<t.max}function BO(e){return vp(e)&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0}function zO(e){return Object.values(e).every(BO)}function HO(e,t){if(!zO(e)||!zO(t))return!1;if(!e.rotation&&!t.rotation)return function(e,t,n){return void 0===n&&(n=0),!(t.x>e.x+e.width+n||t.x+t.width<e.x-n||t.y>e.y+e.height+n||t.y+t.height<e.y-n)}(e,t);for(var n=PO(e),r=PO(t),i=Ph(Ph([],FO(n),!0),FO(r),!0),a=0;a<i.length;a++){var o=i[a];if(!DO(RO(n,o),RO(r,o)))return!1}return!0}var jO,GO={"#5B8FF9":!0};function $O(e,t,n){return!!e.getAdjust("stack")||t.every((function(t,r){var i=n[r];return function(e,t,n){var r=e.coordinate,i=pk(t),a=jT.fromObject(i.getCanvasBBox()),o=jT.fromObject(n.getBBox());return r.isTransposed?o.height>=a.height:o.width>=a.width}(e,t,i)}))}function YO(e,t,n){return e.some((function(e){return n(e,t)}))}function UO(e,t){return YO(e,t,(function(e,t){var n,r,i,a=pk(e),o=pk(t);return n=a.getCanvasBBox(),r=o.getCanvasBBox(),void 0===(i=2)&&(i=0),Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}function VO(e,t,n){return e.some((function(e){return n(e,t)}))}function WO(e,t){return VO(e,t,(function(e,t){var n,r,i,a=pk(e),o=pk(t);return n=a.getCanvasBBox(),r=o.getCanvasBBox(),void 0===(i=2)&&(i=0),Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}var XO=zp((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant,s=(jO||(jO=document.createElement("canvas").getContext("2d")),jO);return s.font=[a,o,i,"".concat(n,"px"),r].join(" "),s.measureText(ap(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Ph([e],wp(t),!0).join("")}));function qO(e,t,n,r,i){var a,o,s=n.start,l=n.end,c=n.getWidth(),u=n.getHeight();"y"===i?(a=s.x+c/2,o=r.y<s.y?r.y:s.y):"x"===i?(a=r.x>s.x?r.x:s.x,o=s.y+u/2):"xy"===i&&(n.isPolar?(a=n.getCenter().x,o=n.getCenter().y):(a=(s.x+l.x)/2,o=(s.y+l.y)/2));var h=function(e,t,n){var r,i=t[0],a=t[1];return e.applyToMatrix([i,a,1]),"x"===n?(e.setMatrix(nm(e.getMatrix(),[["t",-i,-a],["s",.01,1],["t",i,a]])),r=nm(e.getMatrix(),[["t",-i,-a],["s",100,1],["t",i,a]])):"y"===n?(e.setMatrix(nm(e.getMatrix(),[["t",-i,-a],["s",1,.01],["t",i,a]])),r=nm(e.getMatrix(),[["t",-i,-a],["s",1,100],["t",i,a]])):"xy"===n&&(e.setMatrix(nm(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])),r=nm(e.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])),r}(e,[a,o],i);e.animate({matrix:h},t)}function KO(e,t){var n,r=u_(e,t),i=r.startAngle,a=r.endAngle;return!yp(i,.5*-Math.PI)&&i<.5*-Math.PI&&(i+=2*Math.PI),!yp(a,.5*-Math.PI)&&a<.5*-Math.PI&&(a+=2*Math.PI),0===t[5]&&(i=(n=[a,i])[0],a=n[1]),yp(i,1.5*Math.PI)&&(i=-.5*Math.PI),yp(a,-.5*Math.PI)&&(a=1.5*Math.PI),{startAngle:i,endAngle:a}}function QO(e){var t;return"M"===e[0]||"L"===e[0]?t=[e[1],e[2]]:"a"!==e[0]&&"A"!==e[0]&&"C"!==e[0]||(t=[e[e.length-2],e[e.length-1]]),t}function ZO(e){var t,n,r,i=e.filter((function(e){return"A"===e[0]||"a"===e[0]}));if(0===i.length)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var a=i[0],o=i.length>1?i[1]:i[0],s=e.indexOf(a),l=e.indexOf(o),c=QO(e[s-1]),u=QO(e[l-1]),h=KO(c,a),p=h.startAngle,d=h.endAngle,f=KO(u,o),m=f.startAngle,g=f.endAngle;yp(p,m)&&yp(d,g)?(n=p,r=d):(n=Math.min(p,m),r=Math.max(d,g));var v=a[1],y=i[i.length-1][1];return v<y?(v=(t=[y,v])[0],y=t[1]):v===y&&(y=0),{startAngle:n,endAngle:r,radius:v,innerRadius:y}}function JO(e,t,n){if(e.isGroup())Uh(e.getChildren(),(function(e){JO(e,t,n)}));else{var r=e.getBBox(),i=(r.minX+r.maxX)/2,a=(r.minY+r.maxY)/2;if(e.applyToMatrix([i,a,1]),"zoomIn"===n){var o=nm(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);e.setMatrix(o),e.animate({matrix:nm(e.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},t)}else e.animate({matrix:nm(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},Nh(Nh({},t),{callback:function(){e.remove(!0)}}))}}function eI(e){return[sd.TOP,sd.BOTTOM].includes(e)?{offsetX:0,offsetY:e===sd.TOP?-8:8,style:{textAlign:"center",textBaseline:e===sd.TOP?"bottom":"top"}}:[sd.LEFT,sd.RIGHT].includes(e)?{offsetX:e===sd.LEFT?-8:8,offsetY:0,style:{textAlign:e===sd.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function tI(e,t,n){return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}var nI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){return jp({},e.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.getRegion=function(e,t){var n=2*Math.PI/e,r=-1*Math.PI/2+n*t,i=.5/(1+1/Math.sin(n/2)),a=tI({x:.5,y:.5},.5-i,r),o=5*Math.PI/4,s=1*Math.PI/4;return{start:tI(a,i,o),end:tI(a,i,s)}},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg,r=n.fields,i=n.type,a=r[0];if(!a)throw new Error("No `fields` specified!");var o=this.getFieldValues(e,a),s=o.length,l=[];return o.forEach((function(n,r){var c=[{field:a,value:n,values:o}],u=Bh(e,t.getFacetDataFilter(c)),h={type:i,data:u,region:t.getRegion(s,r),columnValue:n,columnField:a,columnIndex:r,columnValuesLength:s,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};l.push(h)})),l},t.prototype.getXAxisOption=function(e,t,n,r){return n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;Uh(this.facets,(function(t){var n=t.columnValue,r=t.view,i=qp(e.cfg.title,"formatter"),a=jp({position:["50%","0%"],content:i?i(n):n},eI(sd.TOP),e.cfg.title);r.annotation().text(a)}))},t}(ow),rI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){return jp({},e.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg.fields,r=this.cfg.cols,i=n[0];if(!i)throw new Error("No `fields` specified!");var a=this.getFieldValues(e,i),o=a.length;r=r||o;var s=this.getPageCount(o,r),l=[];return a.forEach((function(n,c){var u=t.getRowCol(c,r),h=u.row,p=u.col,d=[{field:i,value:n,values:a}],f=Bh(e,t.getFacetDataFilter(d)),m={type:t.cfg.type,data:f,region:t.getRegion(s,r,p,h),columnValue:n,rowValue:n,columnField:i,rowField:null,columnIndex:p,rowIndex:h,columnValuesLength:r,rowValuesLength:s,total:o};l.push(m)})),l},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1&&r.columnValuesLength*r.rowIndex+r.columnIndex+1+r.columnValuesLength<=r.total?Nh(Nh({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?Nh(Nh({},n),{title:null,label:null}):n},t.prototype.renderTitle=function(){var e=this;Uh(this.facets,(function(t){var n=t.columnValue,r=t.view,i=qp(e.cfg.title,"formatter"),a=jp({position:["50%","0%"],content:i?i(n):n},eI(sd.TOP),e.cfg.title);r.annotation().text(a)}))},t.prototype.getPageCount=function(e,t){return Math.floor((e+t-1)/t)},t.prototype.getRowCol=function(e,t){return{row:Math.floor(e/t),col:e%t}},t}(ow),iI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){return jp({},e.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:Nh({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:Nh({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){for(var t=this.cfg,n=t.fields,r=t.type,i=n.length,a=i,o=[],s=0;s<a;s++)for(var l=n[s],c=0;c<i;c++){var u=n[c],h={type:r,data:e,region:this.getRegion(i,a,s,c),columnValue:l,rowValue:u,columnField:l,rowField:u,columnIndex:s,rowIndex:c,columnValuesLength:a,rowValuesLength:i};o.push(h)}return o},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?Nh(Nh({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?Nh(Nh({},n),{title:null,label:null}):n},t.prototype.renderTitle=function(){var e=this;Uh(this.facets,(function(t,n){var r=t.columnIndex,i=t.rowIndex,a=t.columnValuesLength;t.rowValuesLength;var o=t.columnValue,s=t.rowValue,l=t.view;if(0===i){var c=qp(e.cfg.columnTitle,"formatter"),u=jp({position:["50%","0%"],content:c?c(o):o},eI(sd.TOP),e.cfg.columnTitle);l.annotation().text(u)}if(r===a-1){c=qp(e.cfg.rowTitle,"formatter"),u=jp({position:["100%","50%"],content:c?c(s):s},eI(sd.RIGHT),e.cfg.rowTitle);l.annotation().text(u)}}))},t}(ow),aI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getDefaultCfg=function(){return jp({},e.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this),transpose:!1})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.beforeEachView=function(e,t){this.cfg.transpose?t.columnIndex%2==0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():t.rowIndex%2!=0&&e.coordinate().reflect("y")},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.generateFacets=function(e){var t,n,r=this,i=this.cfg.fields[0],a=[],o=1,s=1,l=[""],c=[""];return this.cfg.transpose?(t=i,l=this.getFieldValues(e,t).slice(0,2),o=l.length):(n=i,c=this.getFieldValues(e,n).slice(0,2),s=c.length),l.forEach((function(i,u){c.forEach((function(h,p){var d=[{field:t,value:i,values:l},{field:n,value:h,values:c}],f=Bh(e,r.getFacetDataFilter(d)),m={type:r.cfg.type,data:f,region:r.getRegion(s,o,u,p),columnValue:i,rowValue:h,columnField:t,rowField:n,columnIndex:u,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(m)}))})),a},t.prototype.getXAxisOption=function(e,t,n,r){return 1===r.columnIndex||1===r.rowIndex?Nh(Nh({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;Uh(this.facets,(function(t,n){var r=t.columnValue,i=t.rowValue,a=t.view,o=qp(e.cfg.title,"formatter");if(e.cfg.transpose){var s=jp({position:["50%","0%"],content:o?o(r):r},eI(sd.TOP),e.cfg.title);a.annotation().text(s)}else{s=jp({position:["100%","50%"],content:o?o(i):i},eI(sd.RIGHT),e.cfg.title);a.annotation().text(s)}}))},t}(ow),oI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.getDefaultCfg=function(){return jp({},e.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:Nh({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:Nh({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.generateFacets=function(e){var t=this,n=this.cfg.fields,r=n[0],i=n[1],a=[],o=1,s=1,l=[""],c=[""];return r&&(l=this.getFieldValues(e,r),o=l.length),i&&(c=this.getFieldValues(e,i),s=c.length),l.forEach((function(n,u){c.forEach((function(h,p){var d=[{field:r,value:n,values:l},{field:i,value:h,values:c}],f=Bh(e,t.getFacetDataFilter(d)),m={type:t.cfg.type,data:f,region:t.getRegion(s,o,u,p),columnValue:n,rowValue:h,columnField:r,rowField:i,columnIndex:u,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(m)}))})),a},t.prototype.renderTitle=function(){var e=this;Uh(this.facets,(function(t,n){var r=t.columnIndex,i=t.rowIndex,a=t.columnValuesLength,o=t.columnValue,s=t.rowValue,l=t.view;if(0===i){var c=qp(e.cfg.columnTitle,"formatter"),u=jp({position:["50%","0%"],content:c?c(o):o},eI(sd.TOP),e.cfg.columnTitle);l.annotation().text(u)}if(r===a-1){c=qp(e.cfg.rowTitle,"formatter"),u=jp({position:["100%","50%"],content:c?c(s):s},eI(sd.RIGHT),e.cfg.rowTitle);l.annotation().text(u)}}))},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?Nh(Nh({},n),{title:null,label:null}):r.columnIndex!==Math.floor((r.columnValuesLength-1)/2)?Nh(Nh({},n),{title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?Nh(Nh({},n),{title:null,label:null}):r.rowIndex!==Math.floor((r.rowValuesLength-1)/2)?Nh(Nh({},n),{title:null}):n},t}(ow),sI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return Mh(t,e),t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.init=function(){e.prototype.init.call(this),this.view.on(dd.AFTER_RENDER,this.afterChartRender)},t.prototype.getDefaultCfg=function(){return jp({},e.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.generateFacets=function(e){if(!this.cfg.fields.length)throw new Error("Please specify for the fields for rootFacet!");var t=[],n={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return t.push(n),n.children=this.getChildFacets(e,1,t),this.setRegion(t),t},t.prototype.setRegion=function(e){var t=this;this.forceColIndex(e),e.forEach((function(e){e.region=t.getRegion(e.rowValuesLength,e.columnValuesLength,e.columnIndex,e.rowIndex)}))},t.prototype.getRegion=function(e,t,n,r){var i=1/t,a=1/e,o={x:i*n,y:a*r};return{start:o,end:{x:o.x+i,y:o.y+2*a/3}}},t.prototype.forceColIndex=function(e){var t=this,n=[],r=0;e.forEach((function(e){t.isLeaf(e)&&(n.push(e),e.columnIndex=r,r++)})),n.forEach((function(e){e.columnValuesLength=n.length}));for(var i=this.cfg.fields.length-1;i>=0;i--)for(var a=0,o=this.getFacetsByLevel(e,i);a<o.length;a++){var s=o[a];this.isLeaf(s)||(s.originColIndex=s.columnIndex,s.columnIndex=this.getRegionIndex(s.children),s.columnValuesLength=n.length)}},t.prototype.getFacetsByLevel=function(e,t){var n=[];return e.forEach((function(e){e.rowIndex===t&&n.push(e)})),n},t.prototype.getRegionIndex=function(e){var t=e[0];return(e[e.length-1].columnIndex-t.columnIndex)/2+t.columnIndex},t.prototype.isLeaf=function(e){return!e.children||!e.children.length},t.prototype.getRows=function(){return this.cfg.fields.length+1},t.prototype.getChildFacets=function(e,t,n){var r=this,i=this.cfg.fields;if(!(i.length<t)){var a=[],o=i[t-1],s=this.getFieldValues(e,o);return s.forEach((function(i,l){var c=[{field:o,value:i,values:s}],u=e.filter(r.getFacetDataFilter(c));if(u.length){var h={type:r.cfg.type,data:u,region:null,columnValue:i,rowValue:"",columnField:o,rowField:"",columnIndex:l,rowValuesLength:r.getRows(),columnValuesLength:1,rowIndex:t,children:r.getChildFacets(u,t+1,n)};a.push(h),n.push(h)}})),a}},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.renderTitle=function(){var e=this;Uh(this.facets,(function(t){var n=t.columnValue,r=t.view,i=qp(e.cfg.title,"formatter"),a=jp({position:["50%","0%"],content:i?i(n):n},eI(sd.TOP),e.cfg.title);r.annotation().text(a)}))},t.prototype.drawLines=function(e){var t=this;e.forEach((function(e){if(!t.isLeaf(e)){var n=e.children;t.addFacetLines(e,n)}}))},t.prototype.addFacetLines=function(e,t){var n=this,r=e.view.coordinateBBox,i={x:r.x+r.width/2,y:r.y+r.height};t.forEach((function(e){var t=e.view.coordinateBBox,r={x:t.bl.x+(t.tr.x-t.bl.x)/2,y:t.tr.y},a={x:i.x,y:i.y+(r.y-i.y)/2},o={x:r.x,y:a.y};n.drawLine([i,a,o,r])}))},t.prototype.getPath=function(e){var t=[];return this.cfg.line.smooth?(t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach((function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},t.prototype.drawLine=function(e){var t=this.getPath(e),n=this.cfg.line.style;this.container.addShape("path",{attrs:Rp({path:t},n)})},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?Nh(Nh({},n),{title:null,label:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.originColIndex&&0!==r.columnIndex?Nh(Nh({},n),{title:null,label:null}):n},t}(ow);function lI(e){var t=Ph([],e,!0);t.sort((function(e,t){return e-t}));var n=t.length;return 0===n?0:n%2==1?t[(n-1)/2]:(t[n/2]+t[n/2-1])/2}function cI(e,t){if(!t)return null;var n,r,i;switch(e){case"start":return 0;case"center":return.5;case"end":return 1;case"median":n=t.isCategory?lI(t.values.map((function(e,t){return t}))):lI(t.values);break;case"mean":n=t.isCategory?(t.values.length-1)/2:(r=t.values,i=rp(r,(function(e,t){return e+(isNaN(t)||!vp(t)?0:t)}),0),0===r.length?0:i/r.length);break;case"min":n=t.isCategory?0:t[e];break;case"max":n=t.isCategory?t.values.length-1:t[e];break;default:n=e}return t.scale(n)}var uI=["regionFilter","shape"],hI=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(ad.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(ad.BG).addGroup(),n.option=[],n}return Mh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.layout=function(){this.update()},t.prototype.render=function(){},t.prototype.update=function(){var e=this;this.onAfterRender((function(){var t=new Map;Uh(e.option,(function(n){if(Dh(uI,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}})),e.cache=e.syncCache(t)}));var t=new Map;Uh(this.option,(function(n){if(!Dh(uI,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}})),this.cache=this.syncCache(t)},t.prototype.clear=function(t){void 0===t&&(t=!1),e.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},t.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},t.prototype.clearComponents=function(){this.getComponents().forEach((function(e){e.component.destroy()})),this.cache.clear()},t.prototype.onAfterRender=function(e){this.view.getOptions().animate?this.view.geometries.forEach((function(t){t.animateOption&&t.once(md.AFTER_DRAW_ANIMATE,(function(){e()}))})):this.view.getRootView().once(dd.AFTER_RENDER,(function(){e()}))},t.prototype.createAnnotation=function(e){var t=e.type,n=bC[Ap(t)];if(n){var r=this.getAnnotationTheme(t),i=this.getAnnotationCfg(t,e,r);return{component:new n(i),layer:this.isTop(i)?ad.FORE:ad.BG,direction:sd.NONE,type:cd.ANNOTATION,extra:e}}},t.prototype.annotation=function(e){this.option.push(e)},t.prototype.arc=function(e){return this.annotation(Nh({type:"arc"},e)),this},t.prototype.image=function(e){return this.annotation(Nh({type:"image"},e)),this},t.prototype.line=function(e){return this.annotation(Nh({type:"line"},e)),this},t.prototype.region=function(e){return this.annotation(Nh({type:"region"},e)),this},t.prototype.text=function(e){return this.annotation(Nh({type:"text"},e)),this},t.prototype.dataMarker=function(e){return this.annotation(Nh({type:"dataMarker"},e)),this},t.prototype.dataRegion=function(e){this.annotation(Nh({type:"dataRegion"},e))},t.prototype.regionFilter=function(e){this.annotation(Nh({type:"regionFilter"},e))},t.prototype.shape=function(e){this.annotation(Nh({type:"shape"},e))},t.prototype.html=function(e){this.annotation(Nh({type:"html"},e))},t.prototype.parsePosition=function(e){var t=this.view.getXScale(),n=this.view.getScalesByDim("y"),r=jh(e)?e.call(null,t,n):e,i=0,a=0;if($h(r)){var o=r[0],s=r[1];if(ap(o)&&-1!==o.indexOf("%")&&!isNaN(o.slice(0,-1)))return this.parsePercentPosition(r);i=cI(o,t),a=cI(s,Object.values(n)[0])}else if(!Gh(r))for(var l=0,c=Vh(r);l<c.length;l++){var u=c[l],h=r[u];u===t.field&&(i=cI(h,t)),n[u]&&(a=cI(h,n[u]))}return this.view.getCoordinate().convert({x:i,y:a})},t.prototype.getRegionPoints=function(e,t){var n,r=this,i=this.view.getXScale(),a=this.view.getScalesByDim("y"),o=Object.values(a)[0],s=i.field,l=this.view.getData(),c=$h(e)?e[0]:e[s],u=$h(t)?t[0]:t[s],h=[];return Uh(l,(function(e,t){if(e[s]===c&&(n=t),t>=n){var i=r.parsePosition([e[s],e[o.field]]);i&&h.push(i)}if(e[s]===u)return!1})),h},t.prototype.parsePercentPosition=function(e){var t=parseFloat(e[0])/100,n=parseFloat(e[1])/100,r=this.view.getCoordinate(),i=r.start,a=r.end,o=Math.min(i.x,a.x),s=Math.min(i.y,a.y);return{x:r.getWidth()*t+o,y:r.getHeight()*n+s}},t.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),t=e.start,n=e.end,r=e.getWidth(),i=e.getHeight(),a={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)};return{x:a.x,y:a.y,minX:a.x,minY:a.y,maxX:a.x+r,maxY:a.y+i,width:r,height:i}},t.prototype.getAnnotationCfg=function(e,t,n){var r=this,i=this.view.getCoordinate(),a=this.view.getCanvas(),o={};if(Gh(t))return null;if("arc"===e){var s=t,l=s.start,c=s.end,u=Fh(s,["start","end"]),h=this.parsePosition(l),p=this.parsePosition(c),d=UT(i,h),f=UT(i,p);d>f&&(f=2*Math.PI+f),o=Nh(Nh({},u),{center:i.getCenter(),radius:$T(i,h),startAngle:d,endAngle:f})}else if("image"===e){var m=t;l=m.start,c=m.end,u=Fh(m,["start","end"]);o=Nh(Nh({},u),{start:this.parsePosition(l),end:this.parsePosition(c),src:t.src})}else if("line"===e){var g=t;l=g.start,c=g.end,u=Fh(g,["start","end"]);o=Nh(Nh({},u),{start:this.parsePosition(l),end:this.parsePosition(c),text:qp(t,"text",null)})}else if("region"===e){var v=t;l=v.start,c=v.end,u=Fh(v,["start","end"]);o=Nh(Nh({},u),{start:this.parsePosition(l),end:this.parsePosition(c)})}else if("text"===e){var y=this.view.getData(),x=t,E=x.position,b=x.content,C=(u=Fh(x,["position","content"]),b);jh(b)&&(C=b(y)),o=Nh(Nh(Nh({},this.parsePosition(E)),u),{content:C})}else if("dataMarker"===e){var T=t,w=(E=T.position,T.point),S=T.line,k=T.text,_=T.autoAdjust,A=T.direction;u=Fh(T,["position","point","line","text","autoAdjust","direction"]);o=Nh(Nh(Nh({},u),this.parsePosition(E)),{coordinateBBox:this.getCoordinateBBox(),point:w,line:S,text:k,autoAdjust:_,direction:A})}else if("dataRegion"===e){var O=t,I=(l=O.start,c=O.end,O.region),M=(k=O.text,O.lineLength);u=Fh(O,["start","end","region","text","lineLength"]);o=Nh(Nh({},u),{points:this.getRegionPoints(l,c),region:I,text:k,lineLength:M})}else if("regionFilter"===e){var N=t,F=(l=N.start,c=N.end,N.apply),L=N.color,P=(u=Fh(N,["start","end","apply","color"]),this.view.geometries),R=[],D=function(e){e&&(e.isGroup()?e.getChildren().forEach((function(e){return D(e)})):R.push(e))};Uh(P,(function(e){F?Dh(F,e.type)&&Uh(e.elements,(function(e){D(e.shape)})):Uh(e.elements,(function(e){D(e.shape)}))})),o=Nh(Nh({},u),{color:L,shapes:R,start:this.parsePosition(l),end:this.parsePosition(c)})}else if("shape"===e){var B=t,z=B.render,H=Fh(B,["render"]);o=Nh(Nh({},H),{render:function(e){if(jh(t.render))return z(e,r.view,{parsePosition:r.parsePosition.bind(r)})}})}else if("html"===e){var j=t,G=j.html;E=j.position,H=Fh(j,["html","position"]);o=Nh(Nh(Nh({},H),this.parsePosition(E)),{parent:a.get("el").parentNode,html:function(e){return jh(G)?G(e,r.view):G}})}var $=jp({},n,Nh(Nh({},o),{top:t.top,style:t.style,offsetX:t.offsetX,offsetY:t.offsetY}));return"html"!==e&&($.container=this.getComponentContainer($)),$.animate=this.view.getOptions().animate&&$.animate&&qp(t,"animate",$.animate),$.animateOption=jp({},$S,$.animateOption,t.animateOption),$},t.prototype.isTop=function(e){return qp(e,"top",!0)},t.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},t.prototype.getAnnotationTheme=function(e){return qp(this.view.getTheme(),["components","annotation",e],{})},t.prototype.updateOrCreate=function(e){var t=this.cache.get(this.getCacheKey(e));if(t){var n=e.type,r=this.getAnnotationTheme(n),i=this.getAnnotationCfg(n,e,r);zT(i,["container"]),t.component.update(i),Dh(uI,e.type)&&t.component.render()}else(t=this.createAnnotation(e))&&(t.component.init(),Dh(uI,e.type)&&t.component.render());return t},t.prototype.syncCache=function(e){var t=this,n=new Map(this.cache);return e.forEach((function(e,t){n.set(t,e)})),n.forEach((function(e,r){Kh(t.option,(function(e){return r===t.getCacheKey(e)}))||(e.component.destroy(),n.delete(r))})),n},t.prototype.getCacheKey=function(e){return e},t}(BS);function pI(e,t){var n=jp({},qp(e,["components","axis","common"]),qp(e,["components","axis",t]));return qp(n,["grid"],{})}function dI(e,t,n,r){var i=[],a=t.getTicks();return e.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce((function(t,a,o){var s=a.value;if(r)i.push({points:[e.convert("y"===n?{x:0,y:s}:{x:s,y:0}),e.convert("y"===n?{x:1,y:s}:{x:s,y:1})]});else if(o){var l=(t.value+s)/2;i.push({points:[e.convert("y"===n?{x:0,y:l}:{x:l,y:0}),e.convert("y"===n?{x:1,y:l}:{x:l,y:1})]})}return a}),a[0]),i}function fI(e,t,n,r,i){var a=t.values.length,o=[],s=n.getTicks();return s.reduce((function(t,n){var s=t?t.value:n.value,l=n.value,c=(s+l)/2;return"x"===i?o.push({points:[e.convert({x:r?l:c,y:0}),e.convert({x:r?l:c,y:1})]}):o.push({points:Wp(Array(a+1),(function(t,n){return e.convert({x:n/a,y:r?l:c})}))}),n}),s[0]),o}function mI(e,t){var n=qp(t,"grid");if(null===n)return!1;var r=qp(e,"grid");return!(void 0===n&&null===r)}var gI=["container"],vI=Nh(Nh({},$S),{appear:null}),yI=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(ad.BG).addGroup(),n.gridForeContainer=n.view.getLayer(ad.FORE).addGroup(),n.axisContainer=n.view.getLayer(ad.BG).addGroup(),n.axisForeContainer=n.view.getLayer(ad.FORE).addGroup(),n}return Mh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this,t=this.view.getCoordinate();Uh(this.getComponents(),(function(n){var r,i=n.component,a=n.direction,o=n.type,s=n.extra,l=s.dim,c=s.scale,u=s.alignTick;if(o===cd.AXIS)t.isPolar?"x"===l?r=t.isTransposed?QT(t,a):nw(t):"y"===l&&(r=t.isTransposed?nw(t):QT(t,a)):r=QT(t,a);else if(o===cd.GRID)if(t.isPolar){r={items:t.isTransposed?"x"===l?fI(t,e.view.getYScales()[0],c,u,l):dI(t,c,l,u):"x"===l?dI(t,c,l,u):fI(t,e.view.getXScale(),c,u,l),center:e.view.getCoordinate().getCenter()}}else r={items:dI(t,c,l,u)};i.update(r)}))},t.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var t=new Map;this.cache.forEach((function(n,r){e.has(r)?t.set(r,n):n.component.destroy()})),this.cache=t},t.prototype.clear=function(){e.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},t.prototype.updateXAxes=function(e){var t=this.view.getXScale();if(t&&!t.isIdentity){var n=rw(this.option,t.field);if(!1!==n){var r=iw(n,sd.BOTTOM),i=ad.BG,a="x",o=this.view.getCoordinate(),s=this.getId("axis",t.field),l=this.getId("grid",t.field);if(o.isRect){if(c=this.cache.get(s))zT(h=this.getLineAxisCfg(t,n,r),gI),c.component.update(h),e.set(s,c);else c=this.createLineAxis(t,n,i,r,a),this.cache.set(s,c),e.set(s,c);if(u=this.cache.get(l))zT(h=this.getLineGridCfg(t,n,r,a),gI),u.component.update(h),e.set(l,u);else(u=this.createLineGrid(t,n,i,r,a))&&(this.cache.set(l,u),e.set(l,u))}else if(o.isPolar){var c,u;if(c=this.cache.get(s)){zT(h=o.isTransposed?this.getLineAxisCfg(t,n,sd.RADIUS):this.getCircleAxisCfg(t,n,r),gI),c.component.update(h),e.set(s,c)}else{if(o.isTransposed){if(Fp(n))return;c=this.createLineAxis(t,n,i,sd.RADIUS,a)}else c=this.createCircleAxis(t,n,i,r,a);this.cache.set(s,c),e.set(s,c)}if(u=this.cache.get(l)){var h;zT(h=o.isTransposed?this.getCircleGridCfg(t,n,sd.RADIUS,a):this.getLineGridCfg(t,n,sd.CIRCLE,a),gI),u.component.update(h),e.set(l,u)}else{if(o.isTransposed){if(Fp(n))return;u=this.createCircleGrid(t,n,i,sd.RADIUS,a)}else u=this.createLineGrid(t,n,i,sd.CIRCLE,a);u&&(this.cache.set(l,u),e.set(l,u))}}}}},t.prototype.updateYAxes=function(e){var t=this;Uh(this.view.getYScales(),(function(n,r){if(n&&!n.isIdentity){var i=n.field,a=rw(t.option,i);if(!1!==a){var o=ad.BG,s="y",l=t.getId("axis",i),c=t.getId("grid",i),u=t.view.getCoordinate();if(u.isRect){var h=iw(a,0===r?sd.LEFT:sd.RIGHT);if(p=t.cache.get(l))zT(f=t.getLineAxisCfg(n,a,h),gI),p.component.update(f),e.set(l,p);else p=t.createLineAxis(n,a,o,h,s),t.cache.set(l,p),e.set(l,p);if(d=t.cache.get(c))zT(f=t.getLineGridCfg(n,a,h,s),gI),d.component.update(f),e.set(c,d);else(d=t.createLineGrid(n,a,o,h,s))&&(t.cache.set(c,d),e.set(c,d))}else if(u.isPolar){var p,d;if(p=t.cache.get(l)){zT(f=u.isTransposed?t.getCircleAxisCfg(n,a,sd.CIRCLE):t.getLineAxisCfg(n,a,sd.RADIUS),gI),p.component.update(f),e.set(l,p)}else{if(u.isTransposed){if(Fp(a))return;p=t.createCircleAxis(n,a,o,sd.CIRCLE,s)}else p=t.createLineAxis(n,a,o,sd.RADIUS,s);t.cache.set(l,p),e.set(l,p)}if(d=t.cache.get(c)){var f;zT(f=u.isTransposed?t.getLineGridCfg(n,a,sd.CIRCLE,s):t.getCircleGridCfg(n,a,sd.RADIUS,s),gI),d.component.update(f),e.set(c,d)}else{if(u.isTransposed){if(Fp(a))return;d=t.createLineGrid(n,a,o,sd.CIRCLE,s)}else d=t.createCircleGrid(n,a,o,sd.RADIUS,s);d&&(t.cache.set(c,d),e.set(c,d))}}}}}))},t.prototype.createLineAxis=function(e,t,n,r,i){var a={component:new wT(this.getLineAxisCfg(e,t,r)),layer:n,direction:r===sd.RADIUS?sd.NONE:r,type:cd.AXIS,extra:{dim:i,scale:e}};return a.component.set("field",e.field),a.component.init(),a},t.prototype.createLineGrid=function(e,t,n,r,i){var a=this.getLineGridCfg(e,t,r,i);if(a){var o={component:new kT(a),layer:n,direction:sd.NONE,type:cd.GRID,extra:{dim:i,scale:e,alignTick:qp(a,"alignTick",!0)}};return o.component.init(),o}},t.prototype.createCircleAxis=function(e,t,n,r,i){var a={component:new ST(this.getCircleAxisCfg(e,t,r)),layer:n,direction:r,type:cd.AXIS,extra:{dim:i,scale:e}};return a.component.set("field",e.field),a.component.init(),a},t.prototype.createCircleGrid=function(e,t,n,r,i){var a=this.getCircleGridCfg(e,t,r,i);if(a){var o={component:new _T(a),layer:n,direction:sd.NONE,type:cd.GRID,extra:{dim:i,scale:e,alignTick:qp(a,"alignTick",!0)}};return o.component.init(),o}},t.prototype.getLineAxisCfg=function(e,t,n){var r=qp(t,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=QT(i,n),o=aw(e,t),s=ew(this.view.getTheme(),n),l=qp(t,["title"])?jp({title:{style:{text:o}}},{title:tw(this.view.getTheme(),n,t.title)},t):t,c=jp(Nh(Nh({container:r},a),{ticks:e.getTicks().map((function(e){return{id:"".concat(e.tickValue),name:e.text,value:e.value}})),verticalFactor:i.isPolar?-1*JT(a,i.getCenter()):JT(a,i.getCenter()),theme:s}),s,l),u=this.getAnimateCfg(c),h=u.animate,p=u.animateOption;c.animateOption=p,c.animate=h;var d=ZT(a),f=qp(c,"verticalLimitLength",d?1/3:.5);if(f<=1){var m=this.view.getCanvas().get("width"),g=this.view.getCanvas().get("height");c.verticalLimitLength=f*(d?m:g)}return c},t.prototype.getLineGridCfg=function(e,t,n,r){if(mI(ew(this.view.getTheme(),n),t)){var i=pI(this.view.getTheme(),n),a=jp({container:qp(t,["top"])?this.gridForeContainer:this.gridContainer},i,qp(t,"grid"),this.getAnimateCfg(t));return a.items=dI(this.view.getCoordinate(),e,r,qp(a,"alignTick",!0)),a}},t.prototype.getCircleAxisCfg=function(e,t,n){var r=qp(t,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=e.getTicks().map((function(e){return{id:"".concat(e.tickValue),name:e.text,value:e.value}}));e.isCategory||Math.abs(i.endAngle-i.startAngle)!==2*Math.PI||a.pop();var o=aw(e,t),s=ew(this.view.getTheme(),sd.CIRCLE),l=qp(t,["title"])?jp({title:{style:{text:o}}},{title:tw(this.view.getTheme(),n,t.title)},t):t,c=jp(Nh(Nh({container:r},nw(this.view.getCoordinate())),{ticks:a,verticalFactor:1,theme:s}),s,l),u=this.getAnimateCfg(c),h=u.animate,p=u.animateOption;return c.animate=h,c.animateOption=p,c},t.prototype.getCircleGridCfg=function(e,t,n,r){if(mI(ew(this.view.getTheme(),n),t)){var i=pI(this.view.getTheme(),sd.RADIUS),a=jp({container:qp(t,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},i,qp(t,"grid"),this.getAnimateCfg(t)),o=qp(a,"alignTick",!0),s="x"===r?this.view.getYScales()[0]:this.view.getXScale();return a.items=fI(this.view.getCoordinate(),s,e,o,r),a}},t.prototype.getId=function(e,t){var n=this.view.getCoordinate();return"".concat(e,"-").concat(t,"-").concat(n.type)},t.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&qp(e,"animate"),animateOption:e&&e.animateOption?jp({},vI,e.animateOption):vI}},t}(BS);function xI(e,t,n){return n===sd.TOP?[e.minX+e.width/2-t.width/2,e.minY]:n===sd.BOTTOM?[e.minX+e.width/2-t.width/2,e.maxY-t.height]:n===sd.LEFT?[e.minX,e.minY+e.height/2-t.height/2]:n===sd.RIGHT?[e.maxX-t.width,e.minY+e.height/2-t.height/2]:n===sd.TOP_LEFT||n===sd.LEFT_TOP?[e.tl.x,e.tl.y]:n===sd.TOP_RIGHT||n===sd.RIGHT_TOP?[e.tr.x-t.width,e.tr.y]:n===sd.BOTTOM_LEFT||n===sd.LEFT_BOTTOM?[e.bl.x,e.bl.y-t.height]:n===sd.BOTTOM_RIGHT||n===sd.RIGHT_BOTTOM?[e.br.x-t.width,e.br.y-t.height]:[0,0]}function EI(e,t){return Ip(e)?!1!==e&&{}:qp(e,[t],e)}function bI(e){return qp(e,"position",sd.BOTTOM)}var CI=function(e){function t(t){var n=e.call(this,t)||this;return n.container=n.view.getLayer(ad.FORE).addGroup(),n}return Mh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,Uh(this.components,(function(t){var n=t.component,r=t.direction,i=Tk(r),a=n.get("maxWidthRatio"),o=n.get("maxHeightRatio"),s=e.getCategoryLegendSizeCfg(i,a,o),l=n.get("maxWidth"),c=n.get("maxHeight");n.update({maxWidth:Math.min(s.maxWidth,l||0),maxHeight:Math.min(s.maxHeight,c||0)});var u=n.get("padding"),h=n.getLayoutBBox(),p=new jT(h.x,h.y,h.width,h.height).expand(u),d=xI(e.view.viewBBox,p,r),f=d[0],m=d[1],g=xI(e.layoutBBox,p,r),v=g[0],y=g[1],x=0,E=0;r.startsWith("top")||r.startsWith("bottom")?(x=f,E=y):(x=v,E=m),n.setLocation({x:x+u[3],y:E+u[0]}),e.layoutBBox=e.layoutBBox.cut(p,r)}))},t.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var t={};if(qp(this.option,"custom")){var n="global-custom",r=this.getComponentById(n);if(r){var i=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);zT(i,["container"]),r.component.update(i),t[n]=!0}else{var a=this.createCustomLegend(void 0,void 0,void 0,this.option);if(a){a.init();var o=ad.FORE,s=bI(this.option);this.components.push({id:n,component:a,layer:o,direction:s,type:cd.LEGEND,extra:void 0}),t[n]=!0}}}else this.loopLegends((function(n,r,i){var a=e.getId(i.field),o=e.getComponentById(a);if(o){var s=void 0,l=EI(e.option,i.field);!1!==l&&(qp(l,"custom")?s=e.getCategoryCfg(n,r,i,l,!0):i.isLinear?s=e.getContinuousCfg(n,r,i,l):i.isCategory&&(s=e.getCategoryCfg(n,r,i,l))),s&&(zT(s,["container"]),o.direction=bI(l),o.component.update(s),t[a]=!0)}else{var c=e.createFieldLegend(n,r,i);c&&(c.component.init(),e.components.push(c),t[a]=!0)}}));var l=[];Uh(this.getComponents(),(function(e){t[e.id]?l.push(e):e.component.destroy()})),this.components=l},t.prototype.clear=function(){e.prototype.clear.call(this),this.container.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.container.remove(!0)},t.prototype.getGeometries=function(e){var t=this,n=e.geometries;return Uh(e.views,(function(e){n=n.concat(t.getGeometries(e))})),n},t.prototype.loopLegends=function(e){if(this.view.getRootView()===this.view){var t=this.getGeometries(this.view),n={};Uh(t,(function(t){Uh(t.getGroupAttributes(),(function(r){var i=r.getScale(r.type);i&&"identity"!==i.type&&!n[i.field]&&(e(t,r,i),n[i.field]=!0)}))}))}},t.prototype.createFieldLegend=function(e,t,n){var r,i=EI(this.option,n.field),a=ad.FORE,o=bI(i);if(!1!==i&&(qp(i,"custom")?r=this.createCustomLegend(e,t,n,i):n.isLinear?r=this.createContinuousLegend(e,t,n,i):n.isCategory&&(r=this.createCategoryLegend(e,t,n,i))),r)return r.set("field",n.field),{id:this.getId(n.field),component:r,layer:a,direction:o,type:cd.LEGEND,extra:{scale:n}}},t.prototype.createCustomLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r,!0);return new AT(i)},t.prototype.createContinuousLegend=function(e,t,n,r){var i=this.getContinuousCfg(e,t,n,zT(r,["value"]));return new OT(i)},t.prototype.createCategoryLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r);return new AT(i)},t.prototype.getContinuousCfg=function(e,t,n,r){var i=n.getTicks(),a=Kh(i,(function(e){return 0===e.value})),o=Kh(i,(function(e){return 1===e.value})),s=i.map((function(e){var r=e.value,i=e.tickValue,a=t.mapping(n.invert(r)).join("");return{value:i,attrValue:a,color:a,scaleValue:r}}));a||s.push({value:n.min,attrValue:t.mapping(n.invert(0)).join(""),color:t.mapping(n.invert(0)).join(""),scaleValue:0}),o||s.push({value:n.max,attrValue:t.mapping(n.invert(1)).join(""),color:t.mapping(n.invert(1)).join(""),scaleValue:1}),s.sort((function(e,t){return e.value-t.value}));var l={min:lp(s).value,max:cp(s).value,colors:[],rail:{type:t.type},track:{}};"size"===t.type&&(l.track={style:{fill:"size"===t.type?this.view.getTheme().defaultColor:void 0}}),"color"===t.type&&(l.colors=s.map((function(e){return e.attrValue})));var c=this.container,u=Tk(bI(r)),h=qp(r,"title");return h&&(h=jp({text:qT(n)},h)),l.container=c,l.layout=u,l.title=h,l.animateOption=$S,this.mergeLegendCfg(l,r,"continuous")},t.prototype.getCategoryCfg=function(e,t,n,r,i){var a=this.container,o=qp(r,"position",sd.BOTTOM),s=Sk(this.view.getTheme(),o),l=qp(s,["marker"]),c=qp(r,"marker"),u=Tk(o),h=qp(s,["pageNavigator"]),p=qp(r,"pageNavigator"),d=i?function(e,t,n){return n.map((function(n,r){var i=t;jh(i)&&(i=i(n.name,r,jp({},e,n)));var a=jh(n.marker)?n.marker(n.name,r,jp({},e,n)):n.marker,o=jp({},e,i,a);return Ck(o),n.marker=o,n}))}(l,c,r.items):wk(this.view,e,t,l,c),f=qp(r,"title");f&&(f=jp({text:n?qT(n):""},f));var m=qp(r,"maxWidthRatio"),g=qp(r,"maxHeightRatio"),v=this.getCategoryLegendSizeCfg(u,m,g);v.container=a,v.layout=u,v.items=d,v.title=f,v.animateOption=$S,v.pageNavigator=jp({},h,p);var y=this.mergeLegendCfg(v,r,o);y.reversed&&y.items.reverse();var x=qp(y,"maxItemWidth");return x&&x<=1&&(y.maxItemWidth=this.view.viewBBox.width*x),y},t.prototype.mergeLegendCfg=function(e,t,n){var r=n.split("-")[0],i=Sk(this.view.getTheme(),r);return jp({},i,e,t)},t.prototype.getId=function(e){return"".concat(this.name,"-").concat(e)},t.prototype.getComponentById=function(e){return Kh(this.components,(function(t){return t.id===e}))},t.prototype.getCategoryLegendSizeCfg=function(e,t,n){void 0===t&&(t=.25),void 0===n&&(n=.25);var r=this.view.viewBBox,i=r.width,a=r.height;return"vertical"===e?{maxWidth:i*t,maxHeight:a}:{maxWidth:i,maxHeight:a*n}},t}(BS),TI=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeFn=rd,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=e[0],r=e[1];n.start=t,n.end=r,n.changeViewData(t,r)},n.container=n.view.getLayer(ad.FORE).addGroup(),n.onChangeFn=ed(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(dd.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(dd.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Mh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(dd.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(dd.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),t=e.start,n=e.end;Gh(this.start)&&(this.start=t,this.end=n);var r=this.view.getOptions().data;this.option&&!Yp(r)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout((function(){e.view.destroyed||e.changeViewData(e.start,e.end)}),0)),this.slider){var t=this.view.coordinateBBox.width,n=this.slider.component.get("padding"),r=n[0];n[1],n[2];var i=n[3],a=this.slider.component.getLayoutBBox(),o=new jT(a.x,a.y,Math.min(a.width,t),a.height).expand(n),s=this.getMinMaxText(this.start,this.end),l=s.minText,c=s.maxText,u=xI(this.view.viewBBox,o,sd.BOTTOM);u[0];var h=u[1],p=xI(this.view.coordinateBBox,o,sd.BOTTOM),d=p[0];p[1],this.slider.component.update(Nh(Nh({},this.getSliderCfg()),{x:d+i,y:h+r,width:this.width,start:this.start,end:this.end,minText:l,maxText:c})),this.view.viewBBox=this.view.viewBBox.cut(o,sd.BOTTOM)}},t.prototype.update=function(){this.render()},t.prototype.createSlider=function(){var e=this.getSliderCfg(),t=new bT(Nh({container:this.container},e));return t.init(),{component:t,layer:ad.FORE,direction:sd.BOTTOM,type:cd.SLIDER}},t.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var t=this.getMinMaxText(this.start,this.end),n=t.minText,r=t.maxText;e=Nh(Nh({},e),{width:this.width,start:this.start,end:this.end,minText:n,maxText:r})}return this.slider.component.update(e),this.slider},t.prototype.measureSlider=function(){var e=this.getSliderCfg().width;this.width=e},t.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(Yh(this.option)){var t=Nh({data:this.getData()},qp(this.option,"trendCfg",{}));e=jp({},e,this.getThemeOptions(),this.option),e=Nh(Nh({},e),{trendCfg:t})}return e.start=mp(Math.min(Gh(e.start)?0:e.start,Gh(e.end)?1:e.end),0,1),e.end=mp(Math.max(Gh(e.start)?0:e.start,Gh(e.end)?1:e.end),0,1),e},t.prototype.getData=function(){var e=this.view.getOptions().data,t=this.view.getYScales()[0],n=this.view.getGroupScales();if(n.length){var r=n[0],i=r.field,a=r.ticks;return e.reduce((function(e,n){return n[i]===a[0]&&e.push(n[t.field]),e}),[])}return e.map((function(e){return e[t.field]||0}))},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return qp(e,["components","slider","common"],{})},t.prototype.getMinMaxText=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=sp(n,r.field),a=id(n);if(!r||!a)return{};var o=id(i),s=Math.floor(e*(o-1)),l=Math.floor(t*(o-1)),c=qp(i,[s]),u=qp(i,[l]),h=this.getSliderCfg().formatter;return h&&(c=h(c,n[s],s),u=h(u,n[l],l)),{minText:c,maxText:u}},t.prototype.changeViewData=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=id(n);if(r&&i){var a=sp(n,r.field),o=id(a),s=Math.floor(e*(o-1)),l=Math.floor(t*(o-1));this.view.filter(r.field,(function(e,t){var n=a.indexOf(e);return!(n>-1)||BT(n,s,l)})),this.view.render(!0)}},t.prototype.getComponents=function(){return this.slider?[this.slider]:[]},t.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},t}(BS),wI=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeFn=rd,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=e.ratio,r=n.getValidScrollbarCfg().animate;n.ratio=mp(t,0,1);var i=n.view.getOptions().animate;r||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(i)},n.container=n.view.getLayer(ad.FORE).addGroup(),n.onChangeFn=ed(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(dd.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(dd.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Mh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(dd.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(dd.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout((function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)}))),this.scrollbar){var t=this.view.coordinateBBox.width,n=this.scrollbar.component.get("padding"),r=this.scrollbar.component.getLayoutBBox(),i=new jT(r.x,r.y,Math.min(r.width,t),r.height).expand(n),a=this.getScrollbarComponentCfg(),o=void 0,s=void 0;if(a.isHorizontal){var l=xI(this.view.viewBBox,i,sd.BOTTOM);l[0];var c=l[1],u=xI(this.view.coordinateBBox,i,sd.BOTTOM),h=u[0];u[1],o=h,s=c}else{var p=xI(this.view.viewBBox,i,sd.RIGHT);p[0];c=p[1];var d=xI(this.view.viewBBox,i,sd.RIGHT);h=d[0];d[1],o=h,s=c}o+=n[3],s+=n[0],this.trackLen?this.scrollbar.component.update(Nh(Nh({},a),{x:o,y:s,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(Nh(Nh({},a),{x:o,y:s})),this.view.viewBBox=this.view.viewBBox.cut(i,a.isHorizontal?sd.BOTTOM:sd.RIGHT)}},t.prototype.update=function(){this.render()},t.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},t.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},t.prototype.setValue=function(e){this.onValueChange({ratio:e})},t.prototype.getValue=function(){return this.ratio},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return qp(e,["components","scrollbar","common"],{})},t.prototype.getScrollbarTheme=function(e){var t=qp(this.view.getTheme(),["components","scrollbar"]),n=e||{},r=n.thumbHighlightColor,i=Fh(n,["thumbHighlightColor"]);return{default:jp({},qp(t,["default","style"],{}),i),hover:jp({},qp(t,["hover","style"],{}),{thumbColor:r})}},t.prototype.measureScrollbar=function(){var e=this.view.getXScale(),t=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var n=this.getScrollbarComponentCfg(),r=n.trackLen,i=n.thumbLen;this.trackLen=r,this.thumbLen=i,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=t},t.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*mp(this.ratio,0,1));return[e,Math.min(e+this.step-1,this.cnt-1)]},t.prototype.changeViewData=function(e,t){var n=this,r=e[0],i=e[1],a="vertical"!==this.getValidScrollbarCfg().type,o=sp(this.data,this.xScaleCfg.field),s=a?o:o.reverse();this.yScalesCfg.forEach((function(e){n.view.scale(e.field,{formatter:e.formatter,type:e.type,min:e.min,max:e.max})})),this.view.filter(this.xScaleCfg.field,(function(e){var t=s.indexOf(e);return!(t>-1)||BT(t,r,i)})),this.view.render(!0)},t.prototype.createScrollbar=function(){var e="vertical"!==this.getValidScrollbarCfg().type,t=new TT(Nh(Nh({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return t.init(),{component:t,layer:ad.FORE,direction:e?sd.BOTTOM:sd.RIGHT,type:cd.SCROLLBAR}},t.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),t=this.trackLen?Nh(Nh({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):Nh({},e);return this.scrollbar.component.update(t),this.scrollbar},t.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,t=this.getValidScrollbarCfg(),n=t.type,r=t.categorySize,i="vertical"!==n;return Math.floor((i?e.width:e.height)/r)},t.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),t=this.getScrollbarData();return id(sp(t,e.field))},t.prototype.getScrollbarComponentCfg=function(){var e=this.view,t=e.coordinateBBox,n=e.viewBBox,r=this.getValidScrollbarCfg(),i=r.type,a=r.padding,o=r.width,s=r.height,l=r.style,c="vertical"!==i,u=a[0],h=a[1],p=a[2],d=a[3],f=c?{x:t.minX+d,y:n.maxY-s-p}:{x:n.maxX-o-h,y:t.minY+u},m=this.getStep(),g=this.getCnt(),v=c?t.width-d-h:t.height-u-p,y=Math.max(v*mp(m/g,0,1),20);return Nh(Nh({},this.getThemeOptions()),{x:f.x,y:f.y,size:c?s:o,isHorizontal:c,trackLen:v,thumbLen:y,thumbOffset:0,theme:this.getScrollbarTheme(l)})},t.prototype.getValidScrollbarCfg=function(){var e={type:"horizontal",categorySize:32,width:8,height:8,padding:[0,0,0,0],animate:!0,style:{}};return Yh(this.option)&&(e=Nh(Nh({},e),this.option)),Yh(this.option)&&this.option.padding||(e.padding=(e.type,[0,0,0,0])),e},t.prototype.getScrollbarData=function(){var e=this.view.getCoordinate(),t=this.getValidScrollbarCfg(),n=this.view.getOptions().data||[];return e.isReflect("y")&&"vertical"===t.type&&(n=Ph([],n,!0).reverse()),n},t}(BS),SI={fill:"#CCD6EC",opacity:.3};function kI(e,t,n){var r=function(e,t,n){for(var r=wS(e,t,n),i=0,a=e.views;i<a.length;i++){var o=a[i];r=r.concat(wS(o,t,n))}return r}(e,t,n);if(r.length){for(var i=0,a=r=Zh(r);i<a.length;i++)for(var o=0,s=a[i];o<s.length;o++){var l=s[o],c=l.mappingData,u=c.x,h=c.y;l.x=$h(u)?u[u.length-1]:u,l.y=$h(h)?h[h.length-1]:h}if(!1===n.shared&&r.length>1){for(var p=r[0],d=Math.abs(t.y-p[0].y),f=0,m=r;f<m.length;f++){var g=m[f],v=Math.abs(t.y-g[0].y);v<=d&&(p=g,d=v)}r=[p]}return op(Zh(r))}return[]}var _I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.show=function(e){var t=this.context.view,n=this.context.event,r=t.getController("tooltip").getTooltipCfg(),i=kI(t,{x:n.x,y:n.y},r);if(!Vp(i,this.items)&&(this.items=i,i.length)){var a=t.getXScale().field,o=i[0].data[a],s=[];if(Uh(t.geometries,(function(e){if("interval"===e.type||"schema"===e.type){var t=e.getElementsBy((function(e){return e.getData()[a]===o}));s=s.concat(t)}})),s.length){var l=t.getCoordinate(),c=s[0].shape.getCanvasBBox(),u=s[0].shape.getCanvasBBox(),h=c;Uh(s,(function(e){var t=e.shape.getCanvasBBox();l.isTransposed?(t.minY<c.minY&&(c=t),t.maxY>u.maxY&&(u=t)):(t.minX<c.minX&&(c=t),t.maxX>u.maxX&&(u=t)),h.x=Math.min(t.minX,h.minX),h.y=Math.min(t.minY,h.minY),h.width=Math.max(t.maxX,h.maxX)-h.x,h.height=Math.max(t.maxY,h.maxY)-h.y}));var p=t.backgroundGroup,d=t.coordinateBBox,f=void 0;if(l.isRect){var m=t.getXScale(),g=e||{},v=g.appendRatio,y=g.appendWidth;Gh(y)&&(v=Gh(v)?m.isLinear?0:.25:v,y=l.isTransposed?v*u.height:v*c.width);var x=void 0,E=void 0,b=void 0,C=void 0;l.isTransposed?(x=d.minX,E=Math.min(u.minY,c.minY)-y,b=d.width,C=h.height+2*y):(x=Math.min(c.minX,u.minX)-y,E=d.minY,b=h.width+2*y,C=d.height),f=[["M",x,E],["L",x+b,E],["L",x+b,E+C],["L",x,E+C],["Z"]]}else{var T=lp(s),w=cp(s),S=RT(T.getModel(),l).startAngle,k=RT(w.getModel(),l).endAngle,_=l.getCenter(),A=l.getRadius(),O=l.innerRadius*A;f=LT(_.x,_.y,A,S,k,O)}if(this.regionPath)this.regionPath.attr("path",f),this.regionPath.show();else{var I=qp(e,"style",SI);this.regionPath=p.addShape({type:"path",name:"active-region",capture:!1,attrs:Nh(Nh({},I),{path:f})})}}}},t.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},t.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),e.prototype.destroy.call(this)},t}(cw),AI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return Mh(t,e),t.prototype.show=function(){var e=this.context,t=e.event,n=e.view;if(!n.isTooltipLocked()){var r=this.timeStamp,i=+new Date;if(i-r>qp(e.view.getOptions(),"tooltip.showDelay",16)){var a=this.location,o={x:t.x,y:t.y};a&&Vp(a,o)||this.showTooltip(n,o),this.timeStamp=i,this.location=o}}},t.prototype.hide=function(){var e=this.context.view,t=e.getController("tooltip"),n=this.context.event,r=n.clientX,i=n.clientY;t.isCursorEntered({x:r,y:i})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},t.prototype.showTooltip=function(e,t){e.showTooltip(t)},t.prototype.hideTooltip=function(e){e.hideTooltip()},t}(cw),OI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.showTooltip=function(e,t){Uh(Bw(e),(function(n){var r=zw(e,n,t);n.showTooltip(r)}))},t.prototype.hideTooltip=function(e){Uh(Bw(e),(function(e){e.hideTooltip()}))},t}(AI),II=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return Mh(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.show=function(){var e=this.context.event,t=this.timeStamp,n=+new Date;if(n-t>16){var r=this.location,i={x:e.x,y:e.y};r&&Vp(r,i)||this.showTooltip(i),this.timeStamp=n,this.location=i}},t.prototype.hide=function(){this.hideTooltip(),this.location=null},t.prototype.showTooltip=function(e){var t=this.context.event.target;if(t&&t.get("tip")){this.tooltip||this.renderTooltip();var n=t.get("tip");this.tooltip.update(Nh({title:n},e)),this.tooltip.show()}},t.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,t=this.context.view,n=t.canvas,r={start:{x:0,y:0},end:{x:n.get("width"),y:n.get("height")}},i=t.getTheme(),a=qp(i,["components","tooltip","domStyles"],{}),o=new IT({parent:n.get("el").parentNode,region:r,visible:!1,crosshairs:null,domStyles:Nh({},jp({},a,(e={},e["g2-tooltip"]={"max-width":"50%"},e[tT]={"word-break":"break-all"},e)))});o.init(),o.setCapture(!1),this.tooltip=o},t}(cw),MI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="",t}return Mh(t,e),t.prototype.hasState=function(e){return e.hasState(this.stateName)},t.prototype.setElementState=function(e,t){e.setState(this.stateName,t)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},t.prototype.clearViewState=function(e){var t=this;Uh(Mw(e,this.stateName),(function(e){t.setElementState(e,!1)}))},t}(cw);function NI(e){return qp(e.get("delegateObject"),"item")}var FI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return Mh(t,e),t.prototype.isItemIgnore=function(e,t){return!!this.ignoreListItemStates.filter((function(n){return t.hasState(e,n)})).length},t.prototype.setStateByComponent=function(e,t,n){var r=this.context.view,i=e.get("field"),a=Iw(r);this.setElementsStateByItem(a,i,t,n)},t.prototype.setStateByElement=function(e,t){this.setElementState(e,t)},t.prototype.isMathItem=function(e,t,n){var r=jw(this.context.view,t),i=Nw(e,t);return!Gh(i)&&n.name===r.getText(i)},t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;Uh(e,(function(e){i.isMathItem(e,t,n)&&e.setState(i.stateName,r)}))},t.prototype.setStateEnable=function(e){var t=Cw(this.context);if(t)ww(this.context)&&this.setStateByElement(t,e);else{var n=Tw(this.context);if(Sw(n)){var r=n.item,i=n.component;if(r&&i&&!this.isItemIgnore(r,i)){var a=this.context.event.gEvent;if(a&&a.fromShape&&a.toShape&&NI(a.fromShape)===NI(a.toShape))return;this.setStateByComponent(i,r,e)}}}},t.prototype.toggle=function(){var e=Cw(this.context);if(e){var t=e.hasState(this.stateName);this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(MI),LI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Mh(t,e),t.prototype.active=function(){this.setState()},t}(FI),PI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={},t}return Mh(t,e),t.prototype.getColorScale=function(e,t){var n=t.geometry.getAttribute("color");return n?e.getScaleByField(n.getFields()[0]):null},t.prototype.getLinkPath=function(e,t){var n=this.context.view.getCoordinate().isTransposed,r=e.shape.getCanvasBBox(),i=t.shape.getCanvasBBox();return n?[["M",r.minX,r.minY],["L",i.minX,i.maxY],["L",i.maxX,i.maxY],["L",r.maxX,r.minY],["Z"]]:[["M",r.maxX,r.minY],["L",i.minX,i.minY],["L",i.minX,i.maxY],["L",r.maxX,r.maxY],["Z"]]},t.prototype.addLinkShape=function(e,t,n,r){var i={opacity:.4,fill:t.shape.attr("fill")};e.addShape({type:"path",attrs:Nh(Nh({},jp({},i,jh(r)?r(i,t):r)),{path:this.getLinkPath(t,n)})})},t.prototype.linkByElement=function(e,t){var n=this,r=this.context.view,i=this.getColorScale(r,e);if(i){var a=Nw(e,i.field);if(!this.cache[a]){var o=function(e,t,n){return Iw(e).filter((function(e){return Nw(e,t)===n}))}(r,i.field,a),s=this.linkGroup.addGroup();this.cache[a]=s;var l=o.length;Uh(o,(function(e,r){if(r<l-1){var i=o[r+1];n.addLinkShape(s,e,i,t)}}))}}},t.prototype.removeLink=function(e){var t=this.getColorScale(this.context.view,e);if(t){var n=Nw(e,t.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},t.prototype.link=function(e){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var n=Cw(t);n&&this.linkByElement(n,null==e?void 0:e.style)},t.prototype.unlink=function(){var e=Cw(this.context);e&&this.removeLink(e)},t.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},t}(cw),RI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return Mh(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},t.prototype.getIntersectElements=function(){var e=null;if(_w(this.context))e=Aw(this.context,10);else{var t=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!t||!n)return;var r={minX:Math.min(t.x,n.x),minY:Math.min(t.y,n.y),maxX:Math.max(t.x,n.x),maxY:Math.max(t.y,n.y)};e=Fw(this.context.view,r)}return e},t.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var t=Iw(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,e):this.setElementsState(n,e,t):this.clear()}},t.prototype.setSiblingsStateByRecord=function(e,t){var n=this,r=this.context.view,i=Bw(r),a=e.map((function(e){return e.getModel().data})),o=r.getXScale().field,s=r.getYScales()[0].field;Uh(i,(function(e){var r=Iw(e),i=r.filter((function(e){var t=e.getModel().data;return Hw(a,t,o,s)}));n.setElementsState(i,t,r)}))},t.prototype.setSiblingsState=function(e){var t=this,n=Bw(this.context.view);_w(this.context)&&Uh(n,(function(n){var r=Iw(n),i=Ow(t.context,n,10);i&&i.length?t.setElementsState(i,e,r):t.clearViewState(n)}))},t.prototype.setElementsState=function(e,t,n){var r=this;Uh(n,(function(n){e.includes(n)?r.setElementState(n,t):r.setElementState(n,!1)}))},t.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},t.prototype.clear=function(){var e=this,t=this.context.view;this.effectSiblings?Uh(Bw(t),(function(t){e.clearViewState(t)})):this.clearViewState(t)},t}(MI),DI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Mh(t,e),t.prototype.active=function(){this.setState()},t}(RI),BI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.setStateEnable=function(e){var t=Cw(this.context);if(t){if(!ww(this.context))return;e?(this.clear(),this.setElementState(t,!0)):this.hasState(t)&&this.setElementState(t,!1)}},t.prototype.toggle=function(){var e=Cw(this.context);if(e){var t=this.hasState(e);t||this.clear(),this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(MI),zI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Mh(t,e),t.prototype.active=function(){this.setState()},t}(BI);function HI(e){Uh(Iw(e),(function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("inactive")&&e.setState("inactive",!1)}))}function jI(e,t,n){Uh(e,(function(e){t(e)?(e.hasState("inactive")&&e.setState("inactive",!1),e.setState("active",n)):(e.hasState("active")&&e.setState("active",!1),e.setState("inactive",n))}))}var GI,$I,YI=xd.INACTIVE,UI=xd.ACTIVE,VI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName=UI,t}return Mh(t,e),t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;this.setHighlightBy(e,(function(e){return i.isMathItem(e,t,n)}),r)},t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(YI)&&e.setState(YI,!1),e.setState(UI,!0)):e.hasState(UI)||e.setState(YI,!0)},t.prototype.setHighlightBy=function(e,t,n){var r=this;if(n)Uh(e,(function(e){r.setElementHighlight(e,t)}));else{var i=Mw(this.context.view,UI),a=!0;Uh(i,(function(e){if(!t(e))return a=!1,!1})),a?this.clear():Uh(e,(function(e){t(e)&&(e.hasState(UI)&&e.setState(UI,!1),e.setState(YI,!0))}))}},t.prototype.setElementState=function(e,t){var n=Iw(this.context.view);this.setHighlightBy(n,(function(t){return e===t}),t)},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){HI(this.context.view)},t}(FI),WI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=e.geometry.getAttribute("color");if(r){var i=n.getScaleByField(r.getFields()[0]),a=Nw(e,i.field),o=Iw(n),s=o.filter((function(e){return Nw(e,i.field)===a}));this.setHighlightBy(o,(function(e){return s.includes(e)}),t)}},t}(VI),XI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(YI)&&e.setState(YI,!1),e.setState(UI,!0)):(e.setState(YI,!0),e.hasState(UI)&&e.setState(UI,!1))},t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=n.getXScale(),i=Nw(e,r.field),a=Iw(n),o=a.filter((function(e){return Nw(e,r.field)===i}));this.setHighlightBy(a,(function(e){return o.includes(e)}),t)},t.prototype.toggle=function(){var e=Cw(this.context);if(e){var t=e.hasState(this.stateName);this.setStateByElement(e,!t)}},t}(VI);($I=GI||(GI={})).BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",$I.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",$I.BEFORE_CLEAR="element-range-highlight:beforeclear",$I.AFTER_CLEAR="element-range-highlight:afterclear";var qI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Mh(t,e),t.prototype.clearViewState=function(e){HI(e)},t.prototype.highlight=function(){var e=this.context,t=e.view,n={view:t,event:e.event,highlightElements:this.getIntersectElements()};t.emit(GI.BEFORE_HIGHLIGHT,OS.fromData(t,GI.BEFORE_HIGHLIGHT,n)),this.setState(),t.emit(GI.AFTER_HIGHLIGHT,OS.fromData(t,GI.AFTER_HIGHLIGHT,n))},t.prototype.clear=function(){var t=this.context.view;t.emit(GI.BEFORE_CLEAR,OS.fromData(t,GI.BEFORE_CLEAR,{})),e.prototype.clear.call(this),t.emit(GI.AFTER_CLEAR,OS.fromData(t,GI.AFTER_CLEAR,{}))},t.prototype.setElementsState=function(e,t,n){jI(n,(function(t){return e.indexOf(t)>=0}),t)},t}(RI),KI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Mh(t,e),t.prototype.highlight=function(){this.setState()},t.prototype.setElementState=function(e,t){jI(Iw(this.context.view),(function(t){return e===t}),t)},t.prototype.clear=function(){HI(this.context.view)},t}(BI),QI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Mh(t,e),t.prototype.selected=function(){this.setState()},t}(RI),ZI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Mh(t,e),t.prototype.selected=function(){this.setState()},t}(FI),JI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Mh(t,e),t.prototype.selected=function(){this.setState()},t}(BI),eM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return Mh(t,e),t.prototype.getTriggerListInfo=function(){var e=Tw(this.context),t=null;return Sw(e)&&(t={item:e.item,list:e.component}),t},t.prototype.getAllowComponents=function(){var e=this,t=Pw(this.context.view),n=[];return Uh(t,(function(t){t.isList()&&e.allowSetStateByElement(t)&&n.push(t)})),n},t.prototype.hasState=function(e,t){return e.hasState(t,this.stateName)},t.prototype.clearAllComponentsState=function(){var e=this;Uh(this.getAllowComponents(),(function(t){t.clearItemsState(e.stateName)}))},t.prototype.allowSetStateByElement=function(e){var t=e.get("field");if(!t)return!1;if(this.cfg&&this.cfg.componentNames){var n=e.get("name");if(-1===this.cfg.componentNames.indexOf(n))return!1}var r=jw(this.context.view,t);return r&&r.isCategory},t.prototype.allowSetStateByItem=function(e,t){var n=this.ignoreItemStates;return!n.length||0===n.filter((function(n){return t.hasState(e,n)})).length},t.prototype.setStateByElement=function(e,t,n){var r=e.get("field"),i=jw(this.context.view,r),a=Nw(t,r),o=i.getText(a);this.setItemsState(e,o,n)},t.prototype.setStateEnable=function(e){var t=this,n=Cw(this.context);if(n){Uh(this.getAllowComponents(),(function(r){t.setStateByElement(r,n,e)}))}else{var r=Tw(this.context);if(Sw(r)){var i=r.item,a=r.component;this.allowSetStateByElement(a)&&this.allowSetStateByItem(i,a)&&this.setItemState(a,i,e)}}},t.prototype.setItemsState=function(e,t,n){var r=this;Uh(e.getItems(),(function(i){i.name===t&&r.setItemState(e,i,n)}))},t.prototype.setItemState=function(e,t,n){e.setItemState(t,this.stateName,n)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.reset=function(){this.setStateEnable(!1)},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item,r=this.hasState(t,n);this.setItemState(t,n,!r)}},t.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},t}(cw),tM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Mh(t,e),t.prototype.active=function(){this.setState()},t}(eM);var nM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t.ignoreItemStates=["unchecked"],t}return Mh(t,e),t.prototype.setItemsState=function(e,t,n){this.setHighlightBy(e,(function(e){return e.name===t}),n)},t.prototype.setItemState=function(e,t,n){e.getItems(),this.setHighlightBy(e,(function(e){return e===t}),n)},t.prototype.setHighlightBy=function(e,t,n){var r=e.getItems();if(n)Uh(r,(function(n){t(n)?(e.hasState(n,"inactive")&&e.setItemState(n,"inactive",!1),e.setItemState(n,"active",!0)):e.hasState(n,"active")||e.setItemState(n,"inactive",!0)}));else{var i=e.getItemsByState("active"),a=!0;Uh(i,(function(e){if(!t(e))return a=!1,!1})),a?this.clear():Uh(r,(function(n){t(n)&&(e.hasState(n,"active")&&e.setItemState(n,"active",!1),e.setItemState(n,"inactive",!0))}))}},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e,t=this.getTriggerListInfo();t?Uh((e=t.list).getItems(),(function(t){e.hasState(t,"active")&&e.setItemState(t,"active",!1),e.hasState(t,"inactive")&&e.setItemState(t,"inactive",!1)})):Uh(this.getAllowComponents(),(function(e){e.clearItemsState("active"),e.clearItemsState("inactive")}))},t}(eM),rM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Mh(t,e),t.prototype.selected=function(){this.setState()},t}(eM),iM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="unchecked",t}return Mh(t,e),t.prototype.unchecked=function(){this.setState()},t}(eM),aM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="checked",t}return Mh(t,e),t.prototype.setItemState=function(e,t,n){this.setCheckedBy(e,(function(e){return e===t}),n)},t.prototype.setCheckedBy=function(e,t,n){var r=e.getItems();n&&Uh(r,(function(n){t(n)?(e.hasState(n,"unchecked")&&e.setItemState(n,"unchecked",!1),e.setItemState(n,"checked",!0)):e.hasState(n,"checked")||e.setItemState(n,"unchecked",!0)}))},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item;!hp(t.getItems(),(function(e){return t.hasState(e,"unchecked")}))||t.hasState(n,"unchecked")?this.setItemState(t,n,!0):this.reset()}},t.prototype.checked=function(){this.setState()},t.prototype.reset=function(){Uh(this.getAllowComponents(),(function(e){e.clearItemsState("checked"),e.clearItemsState("unchecked")}))},t}(eM),oM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return Mh(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.emitEvent=function(e){var t="mask:".concat(e),n=this.context.view,r=this.context.event;n.emit(t,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},t.prototype.createMask=function(){var e=this.context.view,t=this.getMaskAttrs();return e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:Nh({fill:"#C5D4EB",opacity:.3},t)})},t.prototype.getMaskPath=function(){return[]},t.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},t.prototype.start=function(e){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(null==e?void 0:e.maskStyle),this.emitEvent("start")},t.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},t.prototype.move=function(){if(this.moving&&this.maskShape){var e=this.getCurrentPoint(),t=this.preMovePoint,n=e.x-t.x,r=e.y-t.y;Uh(this.points,(function(e){e.x+=n,e.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e}},t.prototype.updateMask=function(e){var t=jp({},this.getMaskAttrs(),e);this.maskShape.attr(t)},t.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},t.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},t.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},t.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},t.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,e.prototype.destroy.call(this)},t}(cw),sM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="circle",t}return Mh(t,e),t.prototype.getMaskAttrs=function(){var e=this.points,t=cp(this.points),n=0,r=0,i=0;if(e.length){var a=e[0];n=Rw(a,t)/2,r=(t.x+a.x)/2,i=(t.y+a.y)/2}return{x:r,y:i,r:n}},t}(oM),lM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="rect",t}return Mh(t,e),t.prototype.getRegion=function(){var e=this.points;return{start:lp(e),end:cp(e)}},t.prototype.getMaskAttrs=function(){var e=this.getRegion(),t=e.start,n=e.end;return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),width:Math.abs(n.x-t.x),height:Math.abs(n.y-t.y)}},t}(oM);function cM(e){e.x=mp(e.x,0,1),e.y=mp(e.y,0,1)}var uM,hM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return Mh(t,e),t.prototype.getRegion=function(){var e=null,t=null,n=this.points,r=this.dim,i=this.context.view.getCoordinate(),a=i.invert(lp(n)),o=i.invert(cp(n));return this.inPlot&&(cM(a),cM(o)),"x"===r?(e=i.convert({x:a.x,y:0}),t=i.convert({x:o.x,y:1})):(e=i.convert({x:0,y:a.y}),t=i.convert({x:1,y:o.y})),{start:e,end:t}},t}(lM),pM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getMaskPath=function(){var e=this.points,t=[];return e.length&&(Uh(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t.push(["L",e[0].x,e[0].y])),t},t.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},t.prototype.addPoint=function(){this.resize()},t}(oM),dM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getMaskPath=function(){return function(e,t){if(e.length<=2)return yw(e,!1);var n=e[0],r=[];Uh(e,(function(e){r.push(e.x),r.push(e.y)}));var i=vw(r,t,null);return i.unshift(["M",n.x,n.y]),i}(this.points,!0)},t}(pM),fM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.setCursor=function(e){this.context.view.getCanvas().setCursor(e)},t.prototype.default=function(){this.setCursor("default")},t.prototype.pointer=function(){this.setCursor("pointer")},t.prototype.move=function(){this.setCursor("move")},t.prototype.crosshair=function(){this.setCursor("crosshair")},t.prototype.wait=function(){this.setCursor("wait")},t.prototype.help=function(){this.setCursor("help")},t.prototype.text=function(){this.setCursor("text")},t.prototype.eResize=function(){this.setCursor("e-resize")},t.prototype.wResize=function(){this.setCursor("w-resize")},t.prototype.nResize=function(){this.setCursor("n-resize")},t.prototype.sResize=function(){this.setCursor("s-resize")},t.prototype.neResize=function(){this.setCursor("ne-resize")},t.prototype.nwResize=function(){this.setCursor("nw-resize")},t.prototype.seResize=function(){this.setCursor("se-resize")},t.prototype.swResize=function(){this.setCursor("sw-resize")},t.prototype.nsResize=function(){this.setCursor("ns-resize")},t.prototype.ewResize=function(){this.setCursor("ew-resize")},t}(cw),mM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.filterView=function(e,t,n){var r=this;e.getScaleByField(t)&&e.filter(t,n),e.views&&e.views.length&&Uh(e.views,(function(e){r.filterView(e,t,n)}))},t.prototype.filter=function(){var e=Tw(this.context);if(e){var t=this.context.view,n=e.component,r=n.get("field");if(Sw(e)){if(r){var i=n.getItemsByState("unchecked"),a=jw(t,r),o=i.map((function(e){return e.name}));o.length?this.filterView(t,r,(function(e){var t=a.getText(e);return!o.includes(t)})):this.filterView(t,r,null),t.render(!0)}}else if(kw(e)){var s=n.getValue(),l=s[0],c=s[1];this.filterView(t,r,(function(e){return e>=l&&e<=c})),t.render(!0)}}},t}(cw);function gM(e,t,n,r){var i=Math.min(n[t],r[t]),a=Math.max(n[t],r[t]),o=e.range,s=o[0],l=o[1];if(i<s&&(i=s),a>l&&(a=l),i===l&&a===l)return null;var c=e.invert(i),u=e.invert(a);if(e.isCategory){var h=e.values.indexOf(c),p=e.values.indexOf(u),d=e.values.slice(h,p+1);return function(e){return d.includes(e)}}return function(e){return e>=c&&e<=u}}!function(e){e.FILTER="brush-filter-processing",e.RESET="brush-filter-reset",e.BEFORE_FILTER="brush-filter:beforefilter",e.AFTER_FILTER="brush-filter:afterfilter",e.BEFORE_RESET="brush-filter:beforereset",e.AFTER_RESET="brush-filter:afterreset"}(uM||(uM={}));var vM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return Mh(t,e),t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},t.prototype.filter=function(){var e,t;if(_w(this.context)){var n=this.context.event.target.getCanvasBBox();e={x:n.x,y:n.y},t={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;e=this.startPoint,t=this.context.getCurrentPoint()}if(!(Math.abs(e.x-t.x)<5||Math.abs(e.x-t.y)<5)){var r=this.context,i=r.view,a={view:i,event:r.event,dims:this.dims};i.emit(uM.BEFORE_FILTER,OS.fromData(i,uM.BEFORE_FILTER,a));var o=i.getCoordinate(),s=o.invert(t),l=o.invert(e);if(this.hasDim("x")){var c=i.getXScale(),u=gM(c,"x",s,l);this.filterView(i,c.field,u)}if(this.hasDim("y")){var h=i.getYScales()[0];u=gM(h,"y",s,l);this.filterView(i,h.field,u)}this.reRender(i,{source:uM.FILTER}),i.emit(uM.AFTER_FILTER,OS.fromData(i,uM.AFTER_FILTER,a))}},t.prototype.end=function(){this.isStarted=!1},t.prototype.reset=function(){var e=this.context.view;if(e.emit(uM.BEFORE_RESET,OS.fromData(e,uM.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var t=e.getXScale();this.filterView(e,t.field,null)}if(this.hasDim("y")){var n=e.getYScales()[0];this.filterView(e,n.field,null)}this.reRender(e,{source:uM.RESET}),e.emit(uM.AFTER_RESET,OS.fromData(e,uM.AFTER_RESET,{}))},t.prototype.filterView=function(e,t,n){e.filter(t,n)},t.prototype.reRender=function(e,t){e.render(!0,t)},t}(cw),yM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.filterView=function(e,t,n){Uh(Bw(e),(function(e){e.filter(t,n)}))},t.prototype.reRender=function(e){Uh(Bw(e),(function(e){e.render(!0)}))},t}(vM),xM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.filter=function(){var e=Tw(this.context),t=this.context.view,n=Iw(t);if(_w(this.context)){var r=Aw(this.context,10);r&&Uh(n,(function(e){r.includes(e)?e.show():e.hide()}))}else if(e){var i=e.component,a=i.get("field");if(Sw(e)){if(a){var o=i.getItemsByState("unchecked"),s=jw(t,a),l=o.map((function(e){return e.name}));Uh(n,(function(e){var t=Nw(e,a),n=s.getText(t);l.indexOf(n)>=0?e.hide():e.show()}))}}else if(kw(e)){var c=i.getValue(),u=c[0],h=c[1];Uh(n,(function(e){var t=Nw(e,a);t>=u&&t<=h?e.show():e.hide()}))}}},t.prototype.clear=function(){Uh(Iw(this.context.view),(function(e){e.show()}))},t.prototype.reset=function(){this.clear()},t}(cw),EM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.byRecord=!1,t}return Mh(t,e),t.prototype.filter=function(){_w(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},t.prototype.filterByRecord=function(){var e=this.context.view,t=Aw(this.context,10);if(t){var n=e.getXScale().field,r=e.getYScales()[0].field,i=t.map((function(e){return e.getModel().data}));Uh(Bw(e),(function(e){Uh(Iw(e),(function(e){var t=e.getModel().data;Hw(i,t,n,r)?e.show():e.hide()}))}))}},t.prototype.filterByBBox=function(){var e=this;Uh(Bw(this.context.view),(function(t){var n=Ow(e.context,t,10),r=Iw(t);n&&Uh(r,(function(e){n.includes(e)?e.show():e.hide()}))}))},t.prototype.reset=function(){Uh(Bw(this.context.view),(function(e){Uh(Iw(e),(function(e){e.show()}))}))},t}(cw),bM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return Mh(t,e),t.prototype.getButtonCfg=function(){return jp(this.buttonCfg,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=t.addShape({type:"text",name:"button-text",attrs:Nh({text:e.text},e.textStyle)}).getBBox(),r=SS(e.padding),i=t.addShape({type:"rect",name:"button-rect",attrs:Nh({x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},e.style)});i.toBack(),t.on("mouseenter",(function(){i.attr(e.activeStyle)})),t.on("mouseleave",(function(){i.attr(e.style)})),this.buttonGroup=t},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=nm(null,[["t",e.x-n.width-10,e.y+n.height+5]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(cw),CM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return Mh(t,e),t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},t.prototype.drag=function(){if(this.startPoint){var e=this.context.getCurrentPoint(),t=this.context.view,n=this.context.event;this.dragStart?t.emit("drag",{target:n.target,x:n.x,y:n.y}):Rw(e,this.startPoint)>4&&(t.emit("dragstart",{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},t.prototype.end=function(){if(this.dragStart){var e=this.context.view,t=this.context.event;e.emit("dragend",{target:t.target,x:t.x,y:t.y})}this.starting=!1,this.dragStart=!1},t}(cw),TM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return Mh(t,e),t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},t.prototype.move=function(){if(this.starting){var e=this.startPoint,t=this.context.getCurrentPoint();if(Rw(e,t)>5&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,r=nm(this.startMatrix,[["t",t.x-e.x,t.y-e.y]]);n.backgroundGroup.setMatrix(r),n.foregroundGroup.setMatrix(r),n.middleGroup.setMatrix(r)}}},t.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},t.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},t}(cw),wM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return Mh(t,e),t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.getScale=function(e){var t=this.context.view;return"x"===e?t.getXScale():t.getYScales()[0]},t.prototype.resetDim=function(e){var t=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var n=this.getScale(e);t.scale(n.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},t.prototype.reset=function(){this.resetDim("x"),this.resetDim("y"),this.context.view.render(!0)},t}(cw),SM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return Mh(t,e),t.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0,Uh(this.dims,(function(t){var n=e.getScale(t),r=n.min,i=n.max,a=n.values;e.startCache[t]={min:r,max:i,values:a}}))},t.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},t.prototype.translate=function(){var e=this;if(this.starting){var t=this.startPoint,n=this.context.view.getCoordinate(),r=this.context.getCurrentPoint(),i=n.invert(t),a=n.invert(r),o=a.x-i.x,s=a.y-i.y,l=this.context.view;Uh(this.dims,(function(t){e.translateDim(t,{x:-1*o,y:-1*s})})),l.render(!0)}},t.prototype.translateDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.translateLinear(e,n,t)}},t.prototype.translateLinear=function(e,t,n){var r=this.context.view,i=this.startCache[e],a=i.min,o=i.max,s=o-a,l=n[e]*s;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:a,max:o}),r.scale(t.field,{nice:!1,min:a+l,max:o+l})},t.prototype.reset=function(){e.prototype.reset.call(this),this.startPoint=null,this.starting=!1},t}(wM),kM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zoomRatio=.05,t}return Mh(t,e),t.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},t.prototype.zoom=function(e){var t=this;Uh(this.dims,(function(n){t.zoomDim(n,e)})),this.context.view.render(!0)},t.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},t.prototype.zoomDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.zoomLinear(e,n,t)}},t.prototype.zoomLinear=function(e,t,n){var r=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:t.min,max:t.max});var i=this.cacheScaleDefs[e],a=i.max-i.min,o=t.min,s=t.max,l=n*a,c=o-l,u=s+l,h=(u-c)/a;u>c&&h<100&&h>.01&&r.scale(t.field,{nice:!1,min:o-l,max:s+l})},t}(wM);var _M,AM,OM,IM,MM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.scroll=function(e){var t=this.context,n=t.view,r=t.event;if(n.getOptions().scrollbar){var i=(null==e?void 0:e.wheelDelta)||1,a=n.getController("scrollbar"),o=n.getXScale(),s=n.getOptions().data,l=id(sp(s,o.field)),c=id(o.values),u=a.getValue(),h=Math.floor((l-c)*u)+(function(e){return e.gEvent.originalEvent.deltaY>0}(r)?i:-i),p=mp(h/(l-c)+i/(l-c)/1e4,0,1);a.setValue(p)}},t}(cw);function NM(e){return e.isInPlot()}function FM(e){return e.gEvent.preventDefault(),e.gEvent.originalEvent.deltaY>0}function LM(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.reduce((function(e,t){return t(e)}),t)}}function PM(e,t){var n={};return null!==e&&"object"==typeof e&&t.forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n}function RM(e,t){return t?rp(t,(function(e,t,n){return e.replace(new RegExp("{\\s*"+n+"\\s*}","g"),t)}),e):e}_M="dark",AM=tS(Kk),fS[kp(_M)]=dS(AM),Id("canvas",oA),Id("svg",XA),RS("Polygon",fO),RS("Interval",cO),RS("Schema",mO),RS("Path",qA),RS("Point",dO),RS("Line",uO),RS("Area",JA),RS("Edge",eO),RS("Heatmap",tO),RS("Violin",gO),QS("base",yk),QS("interval",SO),QS("pie",AO),QS("polar",_O),ZS("overlap",(function(e,t,n,r){var i=new IO;Uh(t,(function(e){for(var t=e.find((function(e){return"text"===e.get("type")})),n=t.attr(),r=n.x,a=n.y,o=!1,s=0;s<=8;s++){var l=MO(t,r,a,s);if(i.hasGap(l)){i.fillGap(l),o=!0;break}}o||e.remove(!0)})),i.destroy()})),ZS("distribute",(function(e,t,n,r){if(e.length&&t.length){var i=e[0]?e[0].offset:0,a=t[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=2*(o+i)+28,c={start:a.start,end:a.end},u=[[],[]];e.forEach((function(e){e&&("right"===e.textAlign?u[0].push(e):u[1].push(e))})),u.forEach((function(e,n){var r=l/14;e.length>r&&(e.sort((function(e,t){return t["..percent"]-e["..percent"]})),e.splice(r,e.length-r)),e.sort((function(e,t){return e.y-t.y})),function(e,t,n,r,i,a){var o,s=!0,l=r.start,c=r.end,u=Math.min(l.y,c.y),h=Math.abs(l.y-c.y),p=0,d=Number.MIN_VALUE,f=t.map((function(e){return e.y>p&&(p=e.y),e.y<d&&(d=e.y),{size:n,targets:[e.y-u]}}));for(d-=u,p-u>h&&(h=p-u);s;)for(f.forEach((function(e){var t=(Math.min.apply(d,e.targets)+Math.max.apply(d,e.targets))/2;e.pos=Math.min(Math.max(d,t-e.size/2),h-e.size)})),s=!1,o=f.length;o--;)if(o>0){var m=f[o-1],g=f[o];m.pos+m.size>g.pos&&(m.size+=g.size,m.targets=m.targets.concat(g.targets),m.pos+m.size>h&&(m.pos=h-m.size),f.splice(o,1),s=!0)}o=0,f.forEach((function(e){var r=u+n/2;e.targets.forEach((function(){t[o].y=e.pos+r,r+=n,o++}))}));for(var v={},y=0,x=e;y<x.length;y++){var E=x[y];v[E.get("id")]=E}t.forEach((function(e){var t=e.r*e.r,n=Math.pow(Math.abs(e.y-i.y),2);if(t<n)e.x=i.x;else{var r=Math.sqrt(t-n);e.x=a?i.x+r:i.x-r}var o=v[e.id];o.attr("x",e.x),o.attr("y",e.y);var s=Kh(o.getChildren(),(function(e){return"text"===e.get("type")}));s&&(s.attr("y",e.y),s.attr("x",e.x))}))}(t,e,14,c,s,n)}))}Uh(e,(function(e){if(e&&e.labelLine){var t=e.offset,n=e.angle,r=FT(s.x,s.y,o,n),i=FT(s.x,s.y,o+t/2,n),a=e.x+qp(e,"offsetX",0),l=e.y+qp(e,"offsetY",0),c={x:a-4*Math.cos(n),y:l-4*Math.sin(n)};Yh(e.labelLine)||(e.labelLine={}),e.labelLine.path=["M ".concat(r.x),"".concat(r.y," Q").concat(i.x),"".concat(i.y," ").concat(c.x),c.y].join(",")}}))}})),ZS("fixed-overlap",(function(e,t,n,r){var i=new IO;Uh(t,(function(e){(function(e,t,n){void 0===n&&(n=100);var r,i=e.attr(),a=i.x,o=i.y,s=e.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),c=1,u=0,h=0;if(t.hasGap(s))return t.fillGap(s),!0;for(var p,d,f=!1,m=0,g={};Math.min(Math.abs(u),Math.abs(h))<l&&m<n;)if(p=c+=-1,d=void 0,h=~~(r=[(d=.1*p)*Math.cos(d),d*Math.sin(d)])[1],((u=~~r[0])||h)&&!g["".concat(u,"-").concat(h)]&&(e.attr({x:a+u,y:o+h}),u+h<0&&e.attr("textAlign","right"),m++,t.hasGap(e.getCanvasBBox()))){t.fillGap(e.getCanvasBBox()),f=!0,g["".concat(u,"-").concat(h)]=!0;break}return f})(e.find((function(e){return"text"===e.get("type")})),i)||e.remove(!0)})),i.destroy()})),ZS("hide-overlap",(function(e,t,n,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i].get("visible"))for(var o=i+1;o<t.length;o++){var s=t[o];if(a&&s&&a!==s&&s.get("visible"))HO(dk(a,e[i],qp(e[i],"background.padding")),dk(s,e[o],qp(e[o],"background.padding")))&&t[o].set("visible",!1)}}})),ZS("limit-in-shape",(function(e,t,n,r){Uh(t,(function(e,t){var r=e.getCanvasBBox(),i=n[t].getBBox();(r.minX<i.minX||r.minY<i.minY||r.maxX>i.maxX||r.maxY>i.maxY)&&e.remove(!0)}))})),ZS("limit-in-canvas",(function(e,t,n,r){Uh(t,(function(e){var t=r.minX,n=r.minY,i=r.maxX,a=r.maxY,o=e.getCanvasBBox(),s=o.minX,l=o.minY,c=o.maxX,u=o.maxY,h=o.x,p=o.y,d=o.width,f=o.height,m=h,g=p;(s<t||c<t)&&(m=t),(l<n||u<n)&&(g=n),s>i?m=i-d:c>i&&(m-=c-i),l>a?g=a-f:u>a&&(g-=u-a),m===h&&g===p||uk(e,m-h,g-p)}))})),ZS("limit-in-plot",(function(e,t,n,r,i){if(!(t.length<=0)){var a=(null==i?void 0:i.direction)||["top","right","bottom","left"],o=(null==i?void 0:i.action)||"translate",s=(null==i?void 0:i.margin)||0,l=t[0].get("coordinate");if(l){var c=function(e,t){void 0===t&&(t=0);var n=e.start,r=e.end,i=e.getWidth(),a=e.getHeight(),o=Math.min(n.x,r.x),s=Math.min(n.y,r.y);return jT.fromRange(o-t,s-t,o+i+t,s+a+t)}(l,s),u=c.minX,h=c.minY,p=c.maxX,d=c.maxY;Uh(t,(function(e){var t=e.getCanvasBBox(),n=t.minX,r=t.minY,i=t.maxX,s=t.maxY,l=t.x,c=t.y,f=t.width,m=t.height,g=l,v=c;if(a.indexOf("left")>=0&&(n<u||i<u)&&(g=u),a.indexOf("top")>=0&&(r<h||s<h)&&(v=h),a.indexOf("right")>=0&&(n>p?g=p-f:i>p&&(g-=i-p)),a.indexOf("bottom")>=0&&(r>d?v=d-m:s>d&&(v-=s-d)),g!==l||v!==c){var y=g-l;if("translate"===o)uk(e,y,v-c);else if("ellipsis"===o){e.findAll((function(e){return"text"===e.get("type")})).forEach((function(e){var t=Zp(e.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),n=e.getCanvasBBox(),r=function(e,t,n){var r,i=XO("...",n);r=ap(e)?e:Sp(e);var a,o,s=t,l=[];if(XO(e,n)<=t)return e;for(;a=r.substr(0,16),!((o=XO(a,n))+i>s&&o>s);)if(l.push(a),s-=o,!(r=r.substr(16)))return l.join("");for(;a=r.substr(0,1),!((o=XO(a,n))+i>s);)if(l.push(a),s-=o,!(r=r.substr(1)))return l.join("");return"".concat(l.join(""),"...")}(e.attr("text"),n.width-Math.abs(y),t);e.attr("text",r)}))}else e.hide()}}))}}})),ZS("pie-outer",(function(e,t,n,r){var i=Bh(e,(function(e){return!Gh(e)})),a=t[0]&&t[0].get("coordinate");if(a){for(var o=a.getCenter(),s=a.getRadius(),l={},c=0,u=t;c<u.length;c++){var h=u[c];l[h.get("id")]=h}var p=qp(i[0],"labelHeight",14),d=qp(i[0],"offset",0);if(!(d<=0)){var f="right",m=dp(i,(function(e){return e.x<o.x?"left":f})),g=a.start,v=a.end,y=Math.min(2*(s+d+p),a.getHeight()),x=y/2,E={minX:g.x,maxX:v.x,minY:o.y-x,maxY:o.y+x};Uh(m,(function(e,t){var n=Math.floor(y/p);e.length>n&&(e.sort((function(e,t){return t.percent-e.percent})),Uh(e,(function(e,t){t+1>n&&(l[e.id].set("visible",!1),e.invisible=!0)}))),OO(e,p,E)})),Uh(m,(function(e,t){Uh(e,(function(e){var n=t===f,r=l[e.id].getChildByIndex(0);if(r){var i=s+d,c=e.y-o.y,u=Math.pow(i,2),h=Math.pow(c,2),p=u-h>0?u-h:0,m=Math.sqrt(p),g=Math.abs(Math.cos(e.angle)*i);e.x=n?o.x+Math.max(m,g):o.x-Math.max(m,g)}r&&(r.attr("y",e.y),r.attr("x",e.x)),function(e,t){var n=t.getCenter(),r=t.getRadius();if(e&&e.labelLine){var i=e.angle,a=e.offset,o=FT(n.x,n.y,r,i),s=e.x+qp(e,"offsetX",0)*(Math.cos(i)>0?1:-1),l=e.y+qp(e,"offsetY",0)*(Math.sin(i)>0?1:-1),c={x:s-4*Math.cos(i),y:l-4*Math.sin(i)},u=e.labelLine.smooth,h=[],p=c.x-n.x,d=c.y-n.y,f=Math.atan(d/p);if(p<0&&(f+=Math.PI),!1===u){Yh(e.labelLine)||(e.labelLine={});var m=0;(i<0&&i>-Math.PI/2||i>1.5*Math.PI)&&c.y>o.y&&(m=1),i>=0&&i<Math.PI/2&&c.y>o.y&&(m=1),i>=Math.PI/2&&i<Math.PI&&o.y>c.y&&(m=1),(i<-Math.PI/2||i>=Math.PI&&i<1.5*Math.PI)&&o.y>c.y&&(m=1);var g=a/2>4?4:Math.max(a/2-1,0),v=FT(n.x,n.y,r+g,i),y=FT(n.x,n.y,r+a/2,f);h.push("M ".concat(o.x," ").concat(o.y)),h.push("L ".concat(v.x," ").concat(v.y)),h.push("A ".concat(n.x," ").concat(n.y," 0 ").concat(0," ").concat(m," ").concat(y.x," ").concat(y.y)),h.push("L ".concat(c.x," ").concat(c.y))}else{v=FT(n.x,n.y,r+(a/2>4?4:Math.max(a/2-1,0)),i);var x=o.x<n.x?1:-1;h.push("M ".concat(c.x," ").concat(c.y));var E=(o.y-n.y)/(o.x-n.x),b=(c.y-n.y)/(c.x-n.x);Math.abs(E-b)>Math.pow(Math.E,-16)&&h.push.apply(h,["C",c.x+4*x,c.y,2*v.x-o.x,2*v.y-o.y,o.x,o.y]),h.push("L ".concat(o.x," ").concat(o.y))}e.labelLine.path=h.join(" ")}}(e,a)}))}))}}})),ZS("adjust-color",(function(e,t,n){if(0!==n.length){var r=n[0].get("element").geometry.theme,i=r.labels||{},a=i.fillColorLight,o=i.fillColorDark;n.forEach((function(e,n){var i=t[n].find((function(e){return"text"===e.get("type")})),s=jT.fromObject(e.getBBox()),l=jT.fromObject(i.getCanvasBBox()),c=!s.contains(l),u=function(e){var t=oy.toRGB(e).toUpperCase();if(GO[t])return GO[t];var n=oy.rgb2arr(t);return(299*n[0]+587*n[1]+114*n[2])/1e3<128}(e.attr("fill"));c?i.attr(r.overflowLabels.style):u?a&&i.attr("fill",a):o&&i.attr("fill",o)}))}})),ZS("interval-adjust-position",(function(e,t,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),a=null==i?void 0:i.geometry;if(a&&"interval"===a.type)$O(a,t,n)&&n.forEach((function(e,n){var r=t[n];!function(e,t,n){var r=e.coordinate,i=jT.fromObject(n.getBBox()),a=pk(t);r.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:"center"}):a.attr({y:i.minY+i.height/2,textBaseline:"middle"})}(a,r,e)}))}})),ZS("interval-hide-overlap",(function(e,t,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),a=null==i?void 0:i.geometry;if(a&&"interval"===a.type){var o,s=function(e){var t=[],n=Math.max(Math.floor(e.length/500),1);return Uh(e,(function(e,r){r%n==0?t.push(e):e.set("visible",!1)})),t}(t),l=a.getXYFields()[0],c=[],u=[],h=dp(s,(function(e){return e.get("data")[l]})),p=op(Wp(s,(function(e){return e.get("data")[l]})));s.forEach((function(e){e.set("visible",!0)}));var d=function(e){e&&(e.length&&u.push(e.pop()),u.push.apply(u,e))};for(id(p)>0&&(o=p.shift(),d(h[o])),id(p)>0&&(o=p.pop(),d(h[o])),Uh(p.reverse(),(function(e){d(h[e])}));u.length>0;){var f=u.shift();f.get("visible")&&(fk(f,c)?f.set("visible",!1):c.push(f))}}}})),ZS("point-adjust-position",(function(e,t,n,r,i){var a,o;if(0!==n.length){var s=null===(a=n[0])||void 0===a?void 0:a.get("element"),l=null==s?void 0:s.geometry;if(l&&"point"===l.type){var c=l.getXYFields(),u=c[0],h=c[1],p=dp(t,(function(e){return e.get("data")[u]})),d=[],f=i&&i.offset||(null===(o=e[0])||void 0===o?void 0:o.offset)||12;Wp(Vh(p).reverse(),(function(e){for(var t=function(e,t){var n=e.getXYFields()[1],r=[],i=t.sort((function(e,t){return e.get("data")[n]-e.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}(l,p[e]);t.length;){var n=t.shift(),r=pk(n);if(YO(d,n,(function(e,t){return e.get("data")[u]===t.get("data")[u]&&e.get("data")[h]===t.get("data")[h]})))r.set("visible",!1);else{var i=!1;UO(d,n)&&(r.attr("y",r.attr("y")+2*f),i=UO(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),ZS("pie-spider",(function(e,t,n,r){var i=t[0]&&t[0].get("coordinate");if(i){for(var a=i.getCenter(),o=i.getRadius(),s={},l=0,c=t;l<c.length;l++){var u=c[l];s[u.get("id")]=u}var h=qp(e[0],"labelHeight",14),p=Math.max(qp(e[0],"offset",0),4);Uh(e,(function(e){if(qp(s,[e.id])){var t=e.x>a.x||e.x===a.x&&e.y>a.y,n=Gh(e.offsetX)?4:e.offsetX,r=FT(a.x,a.y,o+4,e.angle),i=p+n;e.x=a.x+(t?1:-1)*(o+i),e.y=r.y}}));var d=i.start,f=i.end,m="right",g=dp(e,(function(e){return e.x<a.x?"left":m})),v=2*(o+p)+h;Uh(g,(function(e){var t=e.length*h;t>v&&(v=Math.min(t,Math.abs(d.y-f.y)))}));var y={minX:d.x,maxX:f.x,minY:a.y-v/2,maxY:a.y+v/2};Uh(g,(function(e,t){var n=v/h;e.length>n&&(e.sort((function(e,t){return t.percent-e.percent})),Uh(e,(function(e,t){t>n&&(s[e.id].set("visible",!1),e.invisible=!0)}))),OO(e,h,y)}));var x=y.minY,E=y.maxY;Uh(g,(function(e,t){var n=t===m;Uh(e,(function(e){var t=qp(s,e&&[e.id]);if(t)if(e.y<x||e.y>E)t.set("visible",!1);else{var r=t.getChildByIndex(0),a=r.getCanvasBBox(),o=n?a.x:a.maxX,l=a.y+a.height/2;uk(r,e.x-o,e.y-l),e.labelLine&&function(e,t,n){var r,i=t.getCenter(),a=t.getRadius(),o={x:e.x-(n?4:-4),y:e.y},s=FT(i.x,i.y,a+4,e.angle),l={x:o.x,y:o.y},c={x:s.x,y:s.y},u=FT(i.x,i.y,a,e.angle);if(o.y!==s.y){var h=n?4:-4;l.y=o.y,e.angle<0&&e.angle>=-Math.PI/2&&(l.x=Math.max(s.x,o.x-h),o.y<s.y?c.y=l.y:(c.y=s.y,c.x=Math.max(c.x,l.x-h))),e.angle>0&&e.angle<Math.PI/2&&(l.x=Math.max(s.x,o.x-h),o.y>s.y?c.y=l.y:(c.y=s.y,c.x=Math.max(c.x,l.x-h))),e.angle>Math.PI/2&&(l.x=Math.min(s.x,o.x-h),o.y>s.y?c.y=l.y:(c.y=s.y,c.x=Math.min(c.x,l.x-h))),e.angle<-Math.PI/2&&(l.x=Math.min(s.x,o.x-h),o.y<s.y?c.y=l.y:(c.y=s.y,c.x=Math.min(c.x,l.x-h)))}r=["M ".concat(o.x,",").concat(o.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(c.x,",").concat(c.y),"L ".concat(s.x,",").concat(s.y),"L ".concat(u.x,",").concat(u.y)].join(" "),e.labelLine=jp({},e.labelLine,{path:r})}(e,i,n)}}))}))}})),ZS("path-adjust-position",(function(e,t,n,r,i){var a,o;if(0!==n.length){var s=null===(a=n[0])||void 0===a?void 0:a.get("element"),l=null==s?void 0:s.geometry;if(l&&!(["path","line","area"].indexOf(l.type)<0)){var c=l.getXYFields(),u=c[0],h=c[1],p=dp(t,(function(e){return e.get("data")[u]})),d=[],f=i&&i.offset||(null===(o=e[0])||void 0===o?void 0:o.offset)||12;Wp(Vh(p).reverse(),(function(e){for(var t=function(e,t){var n=e.getXYFields()[1],r=[],i=t.sort((function(e,t){return e.get("data")[n]-e.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}(l,p[e]);t.length;){var n=t.shift(),r=pk(n);if(VO(d,n,(function(e,t){return e.get("data")[u]===t.get("data")[u]&&e.get("data")[h]===t.get("data")[h]})))r.set("visible",!1);else{var i=!1;WO(d,n)&&(r.attr("y",r.attr("y")+2*f),i=WO(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),GS("fade-in",(function(e,t,n){var r={fillOpacity:Gh(e.attr("fillOpacity"))?1:e.attr("fillOpacity"),strokeOpacity:Gh(e.attr("strokeOpacity"))?1:e.attr("strokeOpacity"),opacity:Gh(e.attr("opacity"))?1:e.attr("opacity")};e.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),e.animate(r,t)})),GS("fade-out",(function(e,t,n){var r=t.easing,i=t.duration,a=t.delay;e.animate({fillOpacity:0,strokeOpacity:0,opacity:0},i,r,(function(){e.remove(!0)}),a)})),GS("grow-in-x",(function(e,t,n){qO(e,t,n.coordinate,n.minYPoint,"x")})),GS("grow-in-xy",(function(e,t,n){qO(e,t,n.coordinate,n.minYPoint,"xy")})),GS("grow-in-y",(function(e,t,n){qO(e,t,n.coordinate,n.minYPoint,"y")})),GS("scale-in-x",(function(e,t,n){var r=e.getBBox(),i=e.get("origin").mappingData.points,a=i[0].y-i[1].y>0?r.maxX:r.minX,o=(r.minY+r.maxY)/2;e.applyToMatrix([a,o,1]);var s=nm(e.getMatrix(),[["t",-a,-o],["s",.01,1],["t",a,o]]);e.setMatrix(s),e.animate({matrix:nm(e.getMatrix(),[["t",-a,-o],["s",100,1],["t",a,o]])},t)})),GS("scale-in-y",(function(e,t,n){var r=e.getBBox(),i=e.get("origin").mappingData,a=(r.minX+r.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?r.maxY:r.minY;e.applyToMatrix([a,s,1]);var l=nm(e.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);e.setMatrix(l),e.animate({matrix:nm(e.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},t)})),GS("wave-in",(function(e,t,n){var r=VT(n.coordinate,20),i=r.type,a=r.startState,o=r.endState,s=e.setClip({type:i,attrs:a});s.animate(o,Nh(Nh({},t),{callback:function(){e&&!e.get("destroyed")&&e.set("clipShape",null),s.remove(!0)}}))})),GS("zoom-in",(function(e,t,n){JO(e,t,"zoomIn")})),GS("zoom-out",(function(e,t,n){JO(e,t,"zoomOut")})),GS("position-update",(function(e,t,n){var r=n.toAttrs,i=r.x,a=r.y;delete r.x,delete r.y,e.attr(r),e.animate({x:i,y:a},t)})),GS("sector-path-update",(function(e,t,n){var r=n.toAttrs,i=n.coordinate,a=r.path||[],o=a.map((function(e){return e[0]}));if(!(a.length<1)){var s=ZO(a),l=s.startAngle,c=s.endAngle,u=s.radius,h=s.innerRadius,p=ZO(e.attr("path")),d=p.startAngle,f=p.endAngle,m=i.getCenter(),g=l-d,v=c-f;0!==g||0!==v?e.animate((function(e){var t=d+e*g,n=f+e*v;return Nh(Nh({},r),{path:Vp(o,["M","A","A","Z"])?PT(m.x,m.y,u,t,n):LT(m.x,m.y,u,t,n,h)})}),Nh(Nh({},t),{callback:function(){e.attr("path",a)}})):e.attr("path",a)}})),GS("path-in",(function(e,t,n){var r=e.getTotalLength();e.attr("lineDash",[r]),e.animate((function(e){return{lineDashOffset:(1-e)*r}}),t)})),lw("rect",oI),lw("mirror",aI),lw("list",rI),lw("matrix",iI),lw("circle",nI),lw("tree",sI),_S("axis",yI),_S("legend",CI),_S("tooltip",zS),_S("annotation",hI),_S("slider",TI),_S("scrollbar",wI),dw("tooltip",AI),dw("sibling-tooltip",OI),dw("ellipsis-text",II),dw("element-active",LI),dw("element-single-active",zI),dw("element-range-active",DI),dw("element-highlight",VI),dw("element-highlight-by-x",XI),dw("element-highlight-by-color",WI),dw("element-single-highlight",KI),dw("element-range-highlight",qI),dw("element-sibling-highlight",qI,{effectSiblings:!0,effectByRecord:!0}),dw("element-selected",ZI),dw("element-single-selected",JI),dw("element-range-selected",QI),dw("element-link-by-color",PI),dw("active-region",_I),dw("list-active",tM),dw("list-selected",rM),dw("list-highlight",nM),dw("list-unchecked",iM),dw("list-checked",aM),dw("legend-item-highlight",nM,{componentNames:["legend"]}),dw("axis-label-highlight",nM,{componentNames:["axis"]}),dw("rect-mask",lM),dw("x-rect-mask",hM,{dim:"x"}),dw("y-rect-mask",hM,{dim:"y"}),dw("circle-mask",sM),dw("path-mask",pM),dw("smooth-path-mask",dM),dw("cursor",fM),dw("data-filter",mM),dw("brush",vM),dw("brush-x",vM,{dims:["x"]}),dw("brush-y",vM,{dims:["y"]}),dw("sibling-filter",yM),dw("sibling-x-filter",yM),dw("sibling-y-filter",yM),dw("element-filter",xM),dw("element-sibling-filter",EM),dw("element-sibling-filter-record",EM,{byRecord:!0}),dw("view-drag",CM),dw("view-move",TM),dw("scale-translate",SM),dw("scale-zoom",kM),dw("reset-button",bM,{name:"reset-button",text:"reset"}),dw("mousewheel-scroll",MM),Jw("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),Jw("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),Jw("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),Jw("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),Jw("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),Jw("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),Jw("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),Jw("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),Jw("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),Jw("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),Jw("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),Jw("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),Jw("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:NM,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:NM,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:NM,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),Jw("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),Jw("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:NM,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:NM,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:NM,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),Jw("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:NM,action:"path-mask:start"},{trigger:"mousedown",isEnable:NM,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),Jw("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),Jw("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),Jw("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),Jw("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),Jw("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),Jw("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),Jw("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(e){return FM(e.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(e){return!FM(e.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),Jw("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),Jw("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]}),(IM=OM||(OM={})).ERROR="error",IM.WARN="warn",IM.INFO="log";function DM(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=0;return"AntV/G2Plot: "+e.replace(/%s/g,(function(){return""+t[r++]}))}function BM(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t||console[e](DM.apply(void 0,Lh([n],r)))}function zM(e){if(!e)return{width:0,height:0};var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function HM(e,t){return $M(e).find((function(e){return e.type===t}))}function jM(e){return rp(e.geometries,(function(e,t){return e.concat(t.elements)}),[])}function GM(e){return qp(e,["views","length"],0)<=0?jM(e):rp(e.views,(function(e,t){return e.concat(GM(t))}),jM(e))}function $M(e){return qp(e,["views","length"],0)<=0?e.geometries:rp(e.views,(function(e,t){return e.concat(t.geometries)}),e.geometries)}function YM(e,t){return e.views.find((function(e){return e.id===t}))}function UM(e){var t=e.parent;return t?t.views:[]}function VM(e){return UM(e).filter((function(t){return t!==e}))}function WM(e){if(!Hh(e,"Object"))return e;var t=Nh({},e);return t.formatter&&!t.content&&(t.content=t.formatter),t}function XM(e,t,n){for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l=[],c=!!r;if(c){o=[1/0,1/0],s=[-1/0,-1/0];for(var u=0,h=e.length;u<h;u++)o=$f([0,0],o,d=e[u]),s=Yf([0,0],s,d);o=$f([0,0],o,r[0]),s=Yf([0,0],s,r[1])}u=0;for(var p=e.length;u<p;u++){var d=e[u];if(n)i=e[u?u-1:p-1],a=e[(u+1)%p];else{if(0===u||u===p-1){l.push(d);continue}i=e[u-1],a=e[u+1]}var f=[0,0];f=Uf(f=Qf(f,a,i),f,t);var m=Vf(d,i),g=Vf(d,a),v=m+g;0!==v&&(m/=v,g/=v);var y=Uf([0,0],f,-m),x=Uf([0,0],f,g),E=jf([0,0],d,y),b=jf([0,0],d,x);c&&(E=$f([0,0],E=Yf([0,0],E,o),s),b=$f([0,0],b=Yf([0,0],b,o),s)),l.push(E),l.push(b)}return n&&l.push(l.shift()),l}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a++)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}var qM={}.toString,KM=function(e,t){return qM.call(e)==="[object "+t+"]"},QM=function(e){return KM(e,"Array")},ZM=function(e){if(!function(e){return"object"==typeof e&&null!==e}(e)||!KM(e,"Object"))return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},JM=function(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];a?ZM(a)?(ZM(e[i])||(e[i]={}),n<r?JM(e[i],a,n+1,r):e[i]=t[i]):QM(a)?(e[i]=[],e[i]=e[i].concat(a)):e[i]=a:e[i]=a}},eN=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)JM(e,t[r]);return e};function tN(e){return e?e.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g).map((function(e){return e.toLowerCase()})).join("-"):e}function nN(e){var t={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];qp(e,"fill")&&(t.color=e.fill);var r=PM(e,n),i=r.shadowColor,a=r.shadowBlur,o=void 0===a?0:a,s=r.shadowOffsetX,l=void 0===s?0:s,c=r.shadowOffsetY,u=void 0===c?0:c;t["text-shadow"]=""+[i,l+"px",u+"px",o+"px"].join(" ");var h=PM(e,n),p=h.stroke,d=h.lineWidth,f=void 0===d?0:d;return t["-webkit-text-stroke"]=""+[f+"px",p].join(" "),Uh(e,(function(e,r){["fontSize"].includes(r)&&vp(e)?t[tN(r)]=e+"px":r&&!n.includes(r)&&(t[tN(r)]=""+e)})),t}function rN(e,t){e.style["pointer-events"]="none",Uh(t,(function(t,n){n&&t&&(e.style[n]=t)}))}var iN,aN=function(e,t,n){var r=t.statistic,i=t.plotType,a=r.title,o=r.content;[a,o].forEach((function(t,r){if(t){var s="";s=0===r?o?"translate(-50%, -100%)":"translate(-50%, -50%)":a?"translate(-50%, 0)":"translate(-50%, -50%)";var l=jh(t.style)?t.style(n):t.style;e.annotation().html(Nh({position:["50%","50%"],html:function(e,r){var a=r.getCoordinate(),o=0;if("pie"===i||"ring-progress"===i)o=a.getRadius()*a.innerRadius*2;else if("liquid"===i){var c=qp(r.geometries,[0,"elements",0,"shape"]);if(c)o=c.find((function(e){return"wrap"===e.get("name")})).getCanvasBBox().width}else o||(o=a.getWidth());rN(e,Nh({width:o+"px",transform:s},nN(l)));var u=r.getData();if(t.customHtml)return t.customHtml(e,r,n,u);var h=t.content;return t.formatter&&(h=t.formatter(n,u)),h?ap(h)?h:""+h:"<div></div>"},key:(0===r?"top":"bottom")+"-statistic"},PM(t,["offsetX","offsetY","rotate","style","formatter"])))}}))};function oN(e){return"number"==typeof e&&!isNaN(e)}function sN(e,t){if(!e)return{};var n=e.filter((function(e){var n=qp(e,[t]);return vp(n)&&!isNaN(n)})),r=n.every((function(e){return qp(e,[t])>=0})),i=n.every((function(e){return qp(e,[t])<=0}));return r?{min:0}:i?{max:0}:{}}function lN(e,t,n,r,i){if(void 0===i&&(i=[]),!Array.isArray(e))return{nodes:[],links:[]};var a=[],o={},s=-1;return e.forEach((function(e){var l=e[t],c=e[n],u=e[r],h=PM(e,i);o[l]||(o[l]=Nh({id:++s,name:l},h)),o[c]||(o[c]=Nh({id:++s,name:c},h)),a.push(Nh({source:o[l].id,target:o[c].id,value:u},h))})),{nodes:Object.values(o).sort((function(e,t){return e.id-t.id})),links:a}}function cN(e,t){var n=Bh(e,(function(e){var n=e[t];return null===n||"number"==typeof n&&!isNaN(n)}));return BM(OM.WARN,n.length===e.length,"illegal data existed in chart data."),n}function uN(e){if(vp(e))return[e,e,e,e];if($h(e)){var t=e.length;if(1===t)return[e[0],e[0],e[0],e[0]];if(2===t)return[e[0],e[1],e[0],e[1]];if(3===t)return[e[0],e[1],e[2],e[1]];if(4===t)return e}return[0,0,0,0]}function hN(e,t,n){void 0===t&&(t="bottom"),void 0===n&&(n=25);var r=uN(e),i=[t.startsWith("top")?n:0,t.startsWith("right")?n:0,t.startsWith("bottom")?n:0,t.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function pN(e){var t=e.map((function(e){return uN(e)})),n=[0,0,0,0];return t.length>0&&(n=n.map((function(e,n){return t.forEach((function(r,i){e+=t[i][n]})),e}))),n}zp((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=void 0===r?"sans-serif":r,a=t.fontWeight,o=t.fontStyle,s=t.fontVariant,l=(iN||(iN=document.createElement("canvas").getContext("2d")),iN);return l.font=[o,a,s,n+"px",i].join(" "),l.measureText(ap(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Lh([e],wp(t)).join("")}));var dN="en-US",fN={};function mN(e,t){fN[e]=t}function gN(e){return{get:function(t,n){return RM(qp(fN[e],t)||qp(fN[dN],t)||qp(fN["en-US"],t)||t,n)}}}var vN={},yN={},xN={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=1;e.default=function(){return"".concat(t++)}}(xN);var EN={},bN={},CN={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){e.apply(r,a)}),t)}}}(CN);var TN={};Object.defineProperty(TN,"__esModule",{value:!0}),TN.SensorTabIndex=TN.SensorClassName=TN.SizeSensorId=void 0;TN.SizeSensorId="size-sensor-id";TN.SensorClassName="size-sensor-object";TN.SensorTabIndex="-1",Object.defineProperty(bN,"__esModule",{value:!0}),bN.createSensor=void 0;var wN,SN=(wN=CN)&&wN.__esModule?wN:{default:wN},kN=TN;bN.createSensor=function(e){var t=void 0,n=[],r=(0,SN.default)((function(){n.forEach((function(t){t(e)}))})),i=function(){t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",r),t.parentNode.removeChild(t),t=void 0,n=[])};return{element:e,bind:function(i){t||(t=function(){"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=document.createElement("object");return t.onload=function(){t.contentDocument.defaultView.addEventListener("resize",r),r()},t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex="-1",t.style.opacity="0",t.setAttribute("class",kN.SensorClassName),t.setAttribute("tabindex",kN.SensorTabIndex),t.type="text/html",e.appendChild(t),t.data="about:blank",t}()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}};var _N={};Object.defineProperty(_N,"__esModule",{value:!0}),_N.createSensor=void 0;var AN=function(e){return e&&e.__esModule?e:{default:e}}(CN);_N.createSensor=function(e){var t=void 0,n=[],r=(0,AN.default)((function(){n.forEach((function(t){t(e)}))})),i=function(){t.disconnect(),n=[],t=void 0};return{element:e,bind:function(i){var a;t||((a=new ResizeObserver(r)).observe(e),r(),t=a),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}},Object.defineProperty(EN,"__esModule",{value:!0}),EN.createSensor=void 0;var ON=bN,IN="undefined"!=typeof ResizeObserver?_N.createSensor:ON.createSensor;EN.createSensor=IN,Object.defineProperty(yN,"__esModule",{value:!0}),yN.removeSensor=yN.getSensor=void 0;var MN=function(e){return e&&e.__esModule?e:{default:e}}(xN),NN=EN,FN=TN;var LN={};yN.getSensor=function(e){var t=e.getAttribute(FN.SizeSensorId);if(t&&LN[t])return LN[t];var n=(0,MN.default)();e.setAttribute(FN.SizeSensorId,n);var r=(0,NN.createSensor)(e);return LN[n]=r,r};yN.removeSensor=function(e){var t=e.element.getAttribute(FN.SizeSensorId);e.element.removeAttribute(FN.SizeSensorId),e.destroy(),t&&LN[t]&&delete LN[t]},Object.defineProperty(vN,"__esModule",{value:!0}),vN.ver=vN.clear=RN=vN.bind=void 0;var PN=yN,RN=vN.bind=function(e,t){var n=(0,PN.getSensor)(e);return n.bind(t),function(){n.unbind(t)}};vN.clear=function(e){var t=(0,PN.getSensor)(e);(0,PN.removeSensor)(t)};vN.ver="1.0.1";var DN=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],BN=function(e){function t(t,n){var r=e.call(this)||this;return r.container="string"==typeof t?document.getElementById(t):t,r.options=eN({},r.getDefaultOptions(),n),r.createG2(),r.bindEvents(),r}return Mh(t,e),t.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},t.prototype.createG2=function(){var e=this.options,t=e.width,n=e.height,r=e.defaultInteractions;this.chart=new DS(Nh(Nh(Nh(Nh({container:this.container,autoFit:!1},this.getChartSize(t,n)),{localRefresh:!1}),PM(this.options,DN)),{defaultInteractions:r})),this.container.setAttribute("data-chart-source-type","G2Plot")},t.prototype.getChartSize=function(e,t){var n=zM(this.container);return{width:e||n.width||400,height:t||n.height||400}},t.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",(function(t){(null==t?void 0:t.type)&&e.emit(t.type,t)}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},t.prototype.update=function(e){this.updateOption(e),this.render()},t.prototype.updateOption=function(e){this.options=eN({},this.options,e)},t.prototype.setState=function(e,t,n){void 0===n&&(n=!0),Uh(GM(this.chart),(function(r){t(r.getData())&&r.setState(e,n)}))},t.prototype.getStates=function(){var e=GM(this.chart),t=[];return Uh(e,(function(e){var n=e.getData();Uh(e.getStates(),(function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})}))})),t},t.prototype.changeData=function(e){this.update({data:e})},t.prototype.changeSize=function(e,t){this.chart.changeSize(e,t)},t.prototype.addAnnotations=function(e){var t=Lh(e),n=this.chart.getController("annotation"),r=n.getComponents().map((function(e){return e.extra}));n.clear(!0);for(var i=function(e){var i=r[e],a=t.findIndex((function(e){return e.id&&e.id===i.id}));-1!==a&&(i=eN({},i,t[a]),t.splice(a,1)),n.annotation(i)},a=0;a<r.length;a++)i(a);t.forEach((function(e){return n.annotation(e)})),this.chart.render(!0)},t.prototype.removeAnnotations=function(e){var t=this.chart.getController("annotation"),n=t.getComponents().map((function(e){return e.extra}));t.clear(!0);for(var r=function(r){var i=n[r];e.find((function(e){return e.id&&e.id===i.id}))||t.annotation(i)},i=0;i<n.length;i++)r(i);this.chart.render(!0)},t.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute("data-chart-source-type")},t.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor(),t=this.options,n=t.padding,r=t.appendPadding;this.chart.padding=n,this.chart.appendPadding=r,e({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var e=this;if(!this.unbind){var t=this.options.autoFit;(void 0===t||t)&&(this.unbind=RN(this.container,(function(){var t=zM(e.container),n=t.width,r=t.height;n===e.chart.width&&r===e.chart.height||e.triggerResize()})))}},t.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},t}(zd),zN=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];function HN(){return"object"==typeof window?null===window||void 0===window?void 0:window.devicePixelRatio:2}function jN(e,t){void 0===t&&(t=e);var n=document.createElement("canvas"),r=HN();return n.width=e*r,n.height=t*r,n.style.width=e+"px",n.style.height=t+"px",n.getContext("2d").scale(r,r),n}function GN(e,t,n,r){void 0===r&&(r=n);var i=t.backgroundColor,a=t.opacity;e.globalAlpha=a,e.fillStyle=i,e.beginPath(),e.fillRect(0,0,n,r),e.closePath()}function $N(e,t,n){var r=e+t;return n?2*r:r}function YN(e,t){return t?[[e*(1/4),e*(1/4)],[e*(3/4),e*(3/4)]]:[[.5*e,.5*e]]}function UN(e,t){var n=t*Math.PI/180;return{a:Math.cos(n)*(1/e),b:Math.sin(n)*(1/e),c:-Math.sin(n)*(1/e),d:Math.cos(n)*(1/e),e:0,f:0}}var VN={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function WN(e,t,n,r){var i=t.size,a=t.fill,o=t.lineWidth,s=t.stroke,l=t.fillOpacity;e.beginPath(),e.globalAlpha=l,e.fillStyle=a,e.strokeStyle=s,e.lineWidth=o,e.arc(n,r,i/2,0,2*Math.PI,!1),e.fill(),o&&e.stroke(),e.closePath()}var XN={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function qN(e){var t=eN({},XN,e),n=t.spacing,r=t.rotation,i=t.lineWidth,a=n+i||1,o=n+i||1,s="\n            M 0 0 L "+a+" 0\n            M 0 "+o+" L "+a+" "+o+"\n            ",l=jN(a,o),c=l.getContext("2d");GN(c,t,a,o),function(e,t,n){var r=t.stroke,i=t.lineWidth,a=t.strokeOpacity,o=new Path2D(n);e.globalAlpha=a,e.lineCap="square",e.strokeStyle=i?r:"transparent",e.lineWidth=i,e.stroke(o)}(c,t,s);var u=c.createPattern(l,"repeat");if(u){var h=UN(HN(),r);u.setTransform(h)}return u}var KN={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function QN(e,t,n,r){var i=t.stroke,a=t.size,o=t.fill,s=t.lineWidth,l=t.fillOpacity;e.globalAlpha=l,e.strokeStyle=i,e.lineWidth=s,e.fillStyle=o,e.strokeRect(n-a/2,r-a/2,a,a),e.fillRect(n-a/2,r-a/2,a,a)}function ZN(e){var t,n=e.type,r=e.cfg;switch(n){case"dot":t=function(e){var t=eN({},VN,e),n=t.size,r=t.padding,i=t.isStagger,a=t.rotation,o=$N(n,r,i),s=YN(o,i),l=jN(o,o),c=l.getContext("2d");GN(c,t,o);for(var u=0,h=s;u<h.length;u++){var p=h[u];WN(c,t,p[0],p[1])}var d=c.createPattern(l,"repeat");if(d){var f=UN(HN(),a);d.setTransform(f)}return d}(r);break;case"line":t=qN(r);break;case"square":t=function(e){var t=eN({},KN,e),n=t.size,r=t.padding,i=t.isStagger,a=t.rotation,o=$N(n,r,i),s=YN(o,i),l=jN(o,o),c=l.getContext("2d");GN(c,t,o);for(var u=0,h=s;u<h.length;u++){var p=h[u];QN(c,t,p[0],p[1])}var d=c.createPattern(l,"repeat");if(d){var f=UN(HN(),a);d.setTransform(f)}return d}(r)}return t}function JN(e){var t=this;return function(n){var r,i=n.options,a=n.chart,o=i.pattern;if(!o)return n;return eN({},n,{options:(r={},r[e]=function(n){for(var r,s,l,c=[],u=1;u<arguments.length;u++)c[u-1]=arguments[u];var h=a.getTheme().defaultColor,p=h,d=null===(s=null===(r=a.geometries)||void 0===r?void 0:r[0])||void 0===s?void 0:s.getAttribute("color");if(d){var f=d.getFields()[0],m=qp(n,f);p=Bk.getMappingValue(d,m,(null===(l=d.values)||void 0===l?void 0:l[0])||h)}var g=o;"function"==typeof o&&(g=o.call(t,n,p)),g instanceof CanvasPattern==!1&&(g=ZN(eN({},{cfg:{backgroundColor:p}},g)));var v=i[e];return Nh(Nh({},"function"==typeof v?v.call.apply(v,Lh([t,n],c)):v||{}),{fill:g||p})},r)})}}function eF(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.seriesField;return!1===r?t.legend(!1):(i||a)&&t.legend(i||a,r),e}function tF(e){var t=e.chart,n=e.options.tooltip;return void 0!==n&&t.tooltip(n),e}function nF(e){var t=e.chart;return Uh(e.options.interactions,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg||{})})),e}function rF(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),Uh(t.geometries,(function(e){e.animate(n)})),e}function iF(e){var t=e.chart,n=e.options.theme;return n&&t.theme(n),e}function aF(e){var t=e.chart,n=e.options.state;return n&&Uh(t.geometries,(function(e){e.state(n)})),e}function oF(e){var t=e.chart,n=e.options.slider;return t.option("slider",n),e}function sF(e){var t=e.chart,n=e.options.scrollbar;return t.option("scrollbar",n),e}function lF(e,t){return function(n){var r=n.chart,i=n.options,a={};return Uh(e,(function(e,t){a[t]=PM(e,zN)})),a=eN({},t,i.meta,a),r.scale(a),n}}function cF(e){return function(t){var n=t.chart,r=t.options,i=n.getController("annotation");return Uh(Lh(r.annotations||[],e||[]),(function(e){i.annotation(e)})),t}}function uF(e){var t=e.chart,n=e.options,r=n.yAxis,i=n.limitInPlot,a=i;return Yh(r)&&Gh(i)&&(a=!!Object.values(PM(r,["min","max","minLimit","maxLimit"])).some((function(e){return!Gh(e)}))),t.limitInPlot=a,e}function hF(e,t){if(!1===e)return{fields:!1};var n=qp(e,"fields"),r=qp(e,"formatter");return r&&!n&&(n=t),{fields:n,formatter:r}}function pF(e,t){var n=e.type,r=e.xField,i=e.yField,a=e.colorField,o=e.shapeField,s=e.sizeField,l=e.styleField,c=e.rawFields,u=void 0===c?[]:c,h=[];if("color"===t)h=Lh([a||r],u);else if("shape"===t)h=Lh([o||r],u);else if("size"===t)h=Lh([s||r],u);else{h=Lh([r,i,a,o,s,l],u);var p=["x","y","color","shape","size","style"].indexOf(t),d=h[p];h.splice(p,1),h.unshift(d)}var f=op(h.filter((function(e){return!!e}))),m="line"===n&&[r,i].includes(f.join("*"))?"":f.join("*");return{mappingFields:f,tileMappingField:m}}function dF(e,t){if(t)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return e.forEach((function(e,t){i[e]=n[t]})),delete i[void 0],t(i)}}function fF(e){var t=e.chart,n=e.options,r=n.type,i=n.args,a=n.mapping,o=n.xField,s=n.yField,l=n.colorField,c=n.shapeField,u=n.sizeField,h=n.tooltipFields,p=n.label,d=n.state,f=n.customInfo;if(!a)return e;var m=a.color,g=a.shape,v=a.size,y=a.style,x=a.tooltip,E=t[r](i).position(o+"*"+s);if(ap(m))l?E.color(l,m):E.color(m);else if(jh(m)){var b=pF(n,"color"),C=b.mappingFields,T=b.tileMappingField;E.color(T,dF(C,m))}else l&&E.color(l,m);if(ap(g))c?E.shape(c,[g]):E.shape(g);else if(jh(g)){var w=pF(n,"shape");C=w.mappingFields,T=w.tileMappingField;E.shape(T,dF(C,g))}else c&&E.shape(c,g);if(vp(v))u?E.size(u,v):E.size(v);else if(jh(v)){var S=pF(n,"size");C=S.mappingFields,T=S.tileMappingField;E.size(T,dF(C,v))}else u&&E.size(u,v);if(jh(y)){var k=pF(n,"style");C=k.mappingFields,T=k.tileMappingField;E.style(T,dF(C,y))}else Yh(y)&&E.style(y);if(!1===h?E.tooltip(!1):Yp(h)||E.tooltip(h.join("*"),dF(h,x)),!1===p)E.label(!1);else if(p){var _=p.callback,A=p.fields,O=Fh(p,["callback","fields"]);E.label({fields:A||[s],callback:_,cfg:WM(O)})}return d&&E.state(d),f&&E.customInfo(f),[o,s].filter((function(e){return e!==l})).forEach((function(e){t.legend(e,!1)})),Nh(Nh({},e),{ext:{geometry:E}})}function mF(e){var t=e.options,n=t.area,r=t.xField,i=t.yField,a=t.seriesField,o=t.smooth,s=hF(t.tooltip,[r,i,a]),l=s.fields,c=s.formatter;return n?fF(eN({},e,{options:{type:"area",colorField:a,tooltipFields:l,mapping:Nh({shape:o?"smooth":"area",tooltip:c},n)}})):e}function gF(e){var t=e.options,n=t.line,r=t.stepType,i=t.xField,a=t.yField,o=t.seriesField,s=t.smooth,l=t.connectNulls,c=hF(t.tooltip,[i,a,o]),u=c.fields,h=c.formatter;return n?fF(eN({},e,{options:{type:"line",colorField:o,tooltipFields:u,mapping:jp({shape:r||(s?"smooth":"line"),tooltip:h},n),args:{connectNulls:l}}})):e}function vF(e){var t=e.options,n=t.point,r=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=t.shapeField,l=hF(t.tooltip,[r,i,a,o,s]),c=l.fields,u=l.formatter;return n?fF(eN({},e,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:c,mapping:Nh({tooltip:u},n)}})):e}function yF(e){var t=e.options,n=t.xField,r=t.yField,i=t.interval,a=t.seriesField,o=t.tooltip,s=t.minColumnWidth,l=t.maxColumnWidth,c=t.columnBackground,u=t.dodgePadding,h=t.intervalPadding,p=hF(o,[n,r,a]),d=p.fields,f=p.formatter,m=(i?fF(eN({},e,{options:{type:"interval",colorField:a,tooltipFields:d,mapping:Nh({tooltip:f},i),args:{dodgePadding:u,intervalPadding:h,minColumnWidth:s,maxColumnWidth:l,background:c}}})):e).ext;return function(e){var t=e.chart,n=e.options,r=e.ext,i=n.seriesField,a=n.isGroup,o=n.isStack,s=n.marginRatio,l=n.widthRatio,c=n.groupField,u=n.theme,h=[];return i&&(a&&h.push({type:"dodge",dodgeBy:c||i,marginRatio:s}),o&&h.push({type:"stack",marginRatio:s})),h.length&&(null==r?void 0:r.geometry)&&(null==r?void 0:r.geometry).adjust(h),Gh(l)||t.theme(eN({},Yh(u)?u:mS(u),{columnWidthRatio:l})),e}(Nh(Nh({},e),{ext:m}))}function xF(e){var t=e.options,n=t.polygon,r=t.xField,i=t.yField,a=t.seriesField,o=hF(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?fF(eN({},e,{options:{type:"polygon",colorField:a,tooltipFields:s,mapping:Nh({tooltip:l},n)}})):e}function EF(e){var t=e.options,n=t.edge,r=t.xField,i=t.yField,a=t.seriesField,o=hF(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?fF(eN({},e,{options:{type:"edge",colorField:a,tooltipFields:s,mapping:Nh({tooltip:l},n)}})):e}function bF(e){var t=e.options,n=t.schema,r=t.xField,i=t.yField,a=t.seriesField,o=hF(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?fF(eN({},e,{options:{type:"schema",colorField:a,tooltipFields:s,mapping:Nh({tooltip:l},n)}})):e}var CF=eN({},BN.getDefaultOptions(),{syncViewPadding:!0,tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1});function TF(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.lineStyle,o=n.lineShape,s=n.point,l=n.area,c=n.yField,u=n.seriesField,h=null==s?void 0:s.state;t.data(r);var p=eN({},e,{options:{shapeField:u,line:{color:i,style:a,shape:o},point:s&&Nh({color:i,shape:"circle"},s),area:l&&Nh({color:i},l),label:void 0}}),d=eN({},p,{options:{tooltip:!1,state:h}});gF(p),mF(d);var f=eN({},p,{options:{tooltip:!1,state:h}});if(s){var m=t.createView({id:"point-view"});m.axis(!1),m.tooltip(!1),m.legend(!1),m.data(r.filter((function(e){return!Gh(e[c])}))),vF(Nh(Nh({},f),{chart:m}))}return e}function wF(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,c=r.seriesField,u=((t={})[o]={type:"cat",sync:!0,values:op(l.map((function(e){return e[o]})))},t[s]=Nh(Nh({},sN(l,s)),{sync:!0}),t);return c&&(u[c]={sync:!0}),LM(lF(((n={})[o]=i,n[s]=a,n),u))(e)}function SF(e){var t=e.chart,n=e.options.reflect;if(n){var r=n;$h(r)||(r=[r]);var i=r.map((function(e){return["reflect",e]}));t.coordinate({type:"rect",actions:i})}return e}function kF(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function _F(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):!1===r&&t.legend(!1),e}function AF(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=HM(t,"line");if(r){var o=r.callback,s=Fh(r,["callback"]);a.label({fields:[i],callback:o,cfg:Nh({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},WM(s))})}else a.label(!1);return e}function OF(e){var t=e.chart,n=e.options.isStack,r=$M(t);return n&&Uh(r,(function(e){e.adjust("stack")})),e}function IF(e){return LM(TF,wF,OF,iF,SF,kF,_F,tF,AF,oF,nF,rF,cF(),uF)(e)}dw("marker-active",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.active=function(){var e=this.getView(),t=this.context.event;if(t.data){var n=t.data.items,r=HM(e,"point");r&&Uh(r.elements,(function(e){var t=-1!==Qh(n,(function(t){return t.data===e.data}));e.setState("active",t)}))}},t.prototype.reset=function(){var e=HM(this.getView(),"point");e&&Uh(e.elements,(function(e){e.setState("active",!1)}))},t.prototype.getView=function(){return this.context.view},t}(cw)),Jw("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var MF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t}return Mh(t,e),t.getDefaultOptions=function(){return CF},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.yField;wF({chart:t,options:n}),this.chart.changeData(e);var i=YM(this.chart,"point-view");i&&i.changeData(e.filter((function(e){return!Gh(e[r])})))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return IF},t}(BN);function NF(e,t,n,r){var i=rp(e,(function(e,r){var i=r[n],a=e.has(i)?e.get(i):0,o=r[t];return a=oN(o)?a+o:a,e.set(i,a),e}),new Map);return Wp(e,(function(e){var a,o=e[t],s=e[n],l=oN(o)?o/i.get(s):0;return Nh(Nh({},e),((a={})[r]=l,a))}))}function FF(e,t,n,r,i){return i?NF(e,t,n,r):e}var LF=eN({},BN.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}});function PF(e){var t=e.chart,n=e.options,r=n.data,i=n.areaStyle,a=n.color,o=n.point,s=n.line,l=n.isPercent,c=n.xField,u=n.yField,h=n.tooltip,p=n.seriesField,d=n.startOnZero,f=null==o?void 0:o.state,m=FF(r,u,c,u,l);t.data(m);var g=l?Nh({formatter:function(e){return{name:e[p]||e[c],value:(100*Number(e[u])).toFixed(2)+"%"}}},h):h,v=eN({},e,{options:{area:{color:a,style:i},line:s&&Nh({color:a},s),point:o&&Nh({color:a},o),tooltip:g,label:void 0,args:{startOnZero:d}}}),y=eN({options:{line:{size:2}}},v,{options:{sizeField:p,tooltip:!1}});mF(v),gF(y);var x=eN({},v,{options:{tooltip:!1,state:f}});if(o){var E=t.createView({id:"point-view"});E.axis(!1),E.tooltip(!1),E.legend(!1),E.data(r.filter((function(e){return!Gh(e[u])}))),vF(Nh(Nh({},x),{chart:E}))}return e}function RF(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=HM(t,"area");if(r){var o=r.callback,s=Fh(r,["callback"]);a.label({fields:[i],callback:o,cfg:Nh({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},WM(s))})}else a.label(!1);return e}function DF(e){var t=e.chart,n=e.options,r=n.isStack,i=n.isPercent,a=n.seriesField;(i||r)&&a&&Uh($M(t),(function(e){e.adjust("stack")}));return e}function BF(e){return LM(iF,JN("areaStyle"),PF,wF,DF,kF,_F,tF,RF,oF,cF(),nF,rF,uF)(e)}var zF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="area",t}return Mh(t,e),t.getDefaultOptions=function(){return LF},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.isPercent,i=n.xField,a=n.yField;wF({chart:t,options:n});var o=FF(e,a,i,a,r);this.chart.changeData(o);var s=YM(this.chart,"point-view");s&&s.changeData(e.filter((function(e){return!Gh(e[a])})))},t.prototype.getSchemaAdaptor=function(){return BF},t}(BN);function HF(e,t){return vp(e)&&vp(t)?e===t?"100%":0===e?"∞":0===t?"-∞":(100*t/e).toFixed(2)+"%":"-"}function jF(e,t){return eN({size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:!1!==e.arrow&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:!1!==e.text&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:HF}},e)}function GF(e,t){return Wp(t.getModel().points,(function(t){return e.convertPoint(t)}))}function $F(e,t,n){!function(e,t,n){var r=e.view,i=e.geometry,a=e.group,o=e.options,s=e.horizontal,l=o.offset,c=o.size,u=o.arrow,h=r.getCoordinate(),p=GF(h,t)[3],d=GF(h,n)[0],f=d.y-p.y,m=d.x-p.x;if("boolean"!=typeof u){var g,v=u.headSize,y=o.spacing;s?(m-v)/2<y?(y=Math.max(1,(m-v)/2),g=[[p.x+y,p.y-l],[p.x+y,p.y-l-c],[d.x-y,d.y-l-c/2]]):g=[[p.x+y,p.y-l],[p.x+y,p.y-l-c],[d.x-y-v,d.y-l-c],[d.x-y,d.y-l-c/2],[d.x-y-v,d.y-l]]:(f-v)/2<y?(y=Math.max(1,(f-v)/2),g=[[p.x+l,p.y+y],[p.x+l+c,p.y+y],[d.x+l+c/2,d.y-y]]):g=[[p.x+l,p.y+y],[p.x+l+c,p.y+y],[d.x+l+c,d.y-y-v],[d.x+l+c/2,d.y-y],[d.x+l,d.y-y-v]],a.addShape("polygon",{id:r.id+"-conversion-tag-arrow-"+i.getElementId(t.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:t,nextElement:n},attrs:Nh(Nh({},u.style||{}),{points:g})})}}(e,t,n),function(e,t,n){var r,i,a,o=e.view,s=e.geometry,l=e.group,c=e.options,u=e.field,h=e.horizontal,p=c.offset,d=c.size;if("boolean"!=typeof c.text){var f=o.getCoordinate(),m=(null===(r=c.text)||void 0===r?void 0:r.formatter)&&(null===(i=c.text)||void 0===i?void 0:i.formatter(t.getData()[u],n.getData()[u])),g=GF(f,t)[h?3:0],v=GF(f,n)[h?0:3],y=l.addShape("text",{id:o.id+"-conversion-tag-text-"+s.getElementId(t.getModel().mappingData),name:"conversion-tag-text",origin:{element:t,nextElement:n},attrs:Nh(Nh({},(null===(a=c.text)||void 0===a?void 0:a.style)||{}),{text:m,x:h?(g.x+v.x)/2:g.x+p+d/2,y:h?g.y-p-d/2:(g.y+v.y)/2})});if(h){var x=v.x-g.x,E=y.getBBox().width;if(E>x){var b=E/m.length,C=Math.max(1,Math.ceil(x/b)-1),T=m.slice(0,C)+"...";y.attr("text",T)}}}}(e,t,n)}var YF={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},UF=function(e,t){return"hover"===e?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:t}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:t}]}]};Jw(YF.hover,{start:UF(YF.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Jw(YF.click,{start:UF(YF.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});var VF={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}};function WF(e){return e.isInPlot()}function XF(e,t,n){var r=t||"rect";switch(e){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:WF,action:["brush:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:WF,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:WF,action:["brush:filter","brush:end",r+"-mask:end",r+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:WF,action:["brush-x:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:WF,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:WF,action:["brush-x:filter","brush-x:end",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:WF,action:["brush-y:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:WF,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:WF,action:["brush-y:filter","brush-y:end",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};default:return{}}}dw("brush-reset-button",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=Nh({name:"button"},VF),t}return Mh(t,e),t.prototype.getButtonCfg=function(){var e=this.context.view,t=qp(e,["interactions","filter-action","cfg","buttonConfig"]);return eN(this.buttonCfg,t,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=this.drawText(t);this.drawBackground(t,n.getBBox()),this.buttonGroup=t},t.prototype.drawText=function(e){var t,n=this.getButtonCfg();return e.addShape({type:"text",name:"button-text",attrs:Nh({text:n.text},null===(t=n.textStyle)||void 0===t?void 0:t.default)})},t.prototype.drawBackground=function(e,t){var n,r=this.getButtonCfg(),i=uN(r.padding),a=e.addShape({type:"rect",name:"button-rect",attrs:Nh({x:t.x-i[3],y:t.y-i[0],width:t.width+i[1]+i[3],height:t.height+i[0]+i[2]},null===(n=r.buttonStyle)||void 0===n?void 0:n.default)});return a.toBack(),e.on("mouseenter",(function(){var e;a.attr(null===(e=r.buttonStyle)||void 0===e?void 0:e.active)})),e.on("mouseleave",(function(){var e;a.attr(null===(e=r.buttonStyle)||void 0===e?void 0:e.default)})),a},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=Bk.transform(null,[["t",e.x-n.width-10,e.y+n.height+5]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(cw),{name:"brush-reset-button"}),Jw("filter-action",{}),Jw("brush",XF("brush")),Jw("brush-highlight",XF("brush-highlight")),Jw("brush-x",XF("brush-x","x-rect")),Jw("brush-y",XF("brush-y","y-rect")),Jw("brush-x-highlight",XF("brush-x-highlight","x-rect")),Jw("brush-y-highlight",XF("brush-y-highlight","y-rect"));var qF=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function KF(e){var t=e.options,n=t.brush,r=Bh(t.interactions||[],(function(e){return-1===qF.indexOf(e.type)}));return(null==n?void 0:n.enabled)&&(qF.forEach((function(e){var t,i=!1;switch(n.type){case"x-rect":i=e===("highlight"===n.action?"brush-x-highlight":"brush-x");break;case"y-rect":i=e===("highlight"===n.action?"brush-y-highlight":"brush-y");break;default:i=e===("highlight"===n.action?"brush-highlight":"brush")}var a={type:e,enable:i};((null===(t=n.mask)||void 0===t?void 0:t.style)||n.type)&&(a.cfg=XF(e,n.type,n.mask)),r.push(a)})),"highlight"!==(null==n?void 0:n.action)&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),eN({},e,{options:{interactions:r}})}function QF(e){var t=e.options,n=t.legend,r=t.seriesField,i=t.isStack;return r?!1!==n&&(n=Nh({position:i?"right-top":"top-left"},n)):n=!1,e.options.legend=n,e}function ZF(e){var t=e.chart,n=e.options,r=n.data,i=n.columnStyle,a=n.color,o=n.columnWidthRatio,s=n.isPercent,l=n.isGroup,c=n.isStack,u=n.xField,h=n.yField,p=n.seriesField,d=n.groupField,f=n.tooltip,m=n.shape,g=s&&l&&c?function(e,t,n,r){var i=rp(e,(function(e,r){var i=rp(n,(function(e,t){return""+e+r[t]}),""),a=e.has(i)?e.get(i):0,o=r[t];return a=oN(o)?a+o:a,e.set(i,a),e}),new Map);return Wp(e,(function(e){var a,o=e[t],s=rp(n,(function(t,n){return""+t+e[n]}),""),l=oN(o)?o/i.get(s):0;return Nh(Nh({},e),((a={})[r]=l,a))}))}(r,h,[u,d],h):FF(r,h,u,h,s),v=[];c&&p&&!l?g.forEach((function(e){var t=v.find((function(t){return t[u]===e[u]&&t[p]===e[p]}));t?t[h]+=e[h]||0:v.push(Nh({},e))})):v=g,t.data(v);var y=s?Nh({formatter:function(e){return{name:l&&c?e[p]+" - "+e[d]:e[p]||e[u],value:(100*Number(e[h])).toFixed(2)+"%"}}},f):f,x=eN({},e,{options:{data:v,widthRatio:o,tooltip:y,interval:{shape:m,style:i,color:a}}});return yF(x),x}function JF(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,c=r.isPercent?{max:1,min:0,minLimit:0,maxLimit:1}:{};return LM(lF(((t={})[o]=i,t[s]=a,t),((n={})[o]={type:"cat"},n[s]=Nh(Nh({},sN(l,s)),c),n)))(e)}function eL(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function tL(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):!1===r&&t.legend(!1),e}function nL(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=n.isRange,o=HM(t,"interval");if(r){var s=r.callback,l=Fh(r,["callback"]);o.label({fields:[i],callback:s,cfg:Nh({layout:(null==l?void 0:l.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},WM(a?Nh({content:function(e){var t;return null===(t=e[i])||void 0===t?void 0:t.join("-")}},l):l))})}else o.label(!1);return e}function rL(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.isGroup,a=n.isStack,o=n.groupField,s=n.data,l=n.xField,c=n.yField,u=n.seriesField;if(!1===r)t.tooltip(!1);else{var h=r;if(i&&a){var p=(null==h?void 0:h.formatter)||function(e){return{name:e[u]+" - "+e[o],value:e[c]}};h=Nh(Nh({},h),{customItems:function(e){var t=[];return Uh(e,(function(e){Bh(s,(function(t){return Wh(t,PM(e.data,[l,u]))})).forEach((function(n){t.push(Nh(Nh(Nh({},e),{value:n[c],data:n,mappingData:{_origin:n}}),p(n)))}))})),t}})}t.tooltip(h)}return e}function iL(e,t){void 0===t&&(t=!1);var n,r,i,a,o=e.options,s=o.seriesField;return LM(QF,iF,JN("columnStyle"),aF,ZF,JF,eL,tL,rL,oF,sF,nL,KF,nF,rF,cF(),(r=o.yField,void 0===(i=!t)&&(i=!0),void 0===(a=!!s)&&(a=!1),function(e){var t=e.options,n=e.chart,o=t.conversionTag,s=t.theme;return o&&!a&&(n.theme(eN({},Yh(s)?s:mS(s),{columnWidthRatio:1/3})),n.annotation().shape({render:function(e,t){var a=e.addGroup({id:n.id+"-conversion-tag-group",name:"conversion-tag-group"}),s=Kh(n.geometries,(function(e){return"interval"===e.type})),l={view:t,geometry:s,group:a,field:r,horizontal:i,options:jF(o,i)},c=s.elements;Uh(c,(function(e,t){t>0&&$F(l,c[t-1],e)}))}})),e}),(void 0===(n=!o.isStack)&&(n=!1),function(e){var t=e.chart,r=e.options.connectedArea,i=function(){t.removeInteraction(YF.hover),t.removeInteraction(YF.click)};if(!n&&r){var a=r.trigger||"hover";i(),t.interaction(YF[a],{start:UF(a,r.style)})}else i();return e}),uF)(e)}var aL=eN({},BN.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),oL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="column",t}return Mh(t,e),t.getDefaultOptions=function(){return aL},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.yField,r=t.xField,i=t.isPercent;JF({chart:this.chart,options:this.options}),this.chart.changeData(FF(e,n,r,n,i))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return iL},t}(BN);function sL(e){var t=e.options,n=t.xField,r=t.yField,i=t.xAxis,a=t.yAxis,o={left:"bottom",right:"top",top:"left",bottom:"right"},s=!1!==a&&Nh({position:o[(null==a?void 0:a.position)||"left"]},a),l=!1!==i&&Nh({position:o[(null==i?void 0:i.position)||"bottom"]},i);return Nh(Nh({},e),{options:Nh(Nh({},t),{xField:r,yField:n,xAxis:s,yAxis:l})})}function lL(e){var t=e.options.label;return t&&!t.position&&(t.position="left",t.layout||(t.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),eN({},e,{options:{label:t}})}function cL(e){var t=e.options,n=t.seriesField,r=t.isStack,i=t.legend;return n?!1!==i&&(i=Nh({position:r?"top-left":"right-top"},i||{})):i=!1,eN({},e,{options:{legend:i}})}function uL(e){return e.chart.coordinate({actions:[["transpose"],["reflect","y"]]}),e}function hL(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.barWidthRatio,a=n.minBarWidth,o=n.maxBarWidth,s=n.barBackground;return iL({chart:t,options:Nh(Nh({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:s})},!0)}function pL(e){return LM(sL,lL,cL,tF,uL,hL)(e)}var dL=eN({},BN.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),fL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bar",t}return Mh(t,e),t.getDefaultOptions=function(){return dL},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.xField,i=n.yField,a=n.isPercent;JF({chart:t,options:Nh(Nh({},n),{xField:i,yField:r})}),t.changeData(FF(e,r,i,r,a))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return pL},t}(BN),mL=eN({},BN.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function gL(e,t){var n;switch(e){case"inner":return n="-30%",ap(t)&&t.endsWith("%")?.01*parseFloat(t)>0?n:t:t<0?t:n;case"outer":return n=12,ap(t)&&t.endsWith("%")?.01*parseFloat(t)<0?n:t:t>0?t:n;default:return t}}function vL(e,t){return up(cN(e,t),(function(e){return 0===e[t]}))}var yL=[1,0,0,0,1,0,0,0,1];function xL(e,t){var n=Lh(t||yL);return Bk.transform(n,e)}var EL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getActiveElements=function(){var e=Bk.getDelegationObject(this.context);if(e){var t=this.context.view,n=e.component,r=e.item,i=n.get("field");if(i)return t.geometries[0].elements.filter((function(e){return e.getModel().data[i]===r.value}))}return[]},t.prototype.getActiveElementLabels=function(){var e=this.context.view,t=this.getActiveElements();return e.geometries[0].labelsContainer.getChildren().filter((function(e){return t.find((function(t){return Vp(t.getData(),e.get("data"))}))}))},t.prototype.transfrom=function(e){void 0===e&&(e=7.5);var t=this.getActiveElements(),n=this.getActiveElementLabels();t.forEach((function(t,r){var i=n[r],a=t.geometry.coordinate;if(a.isPolar&&a.isTransposed){var o=Bk.getAngle(t.getModel(),a),s=(o.startAngle+o.endAngle)/2,l=e,c=l*Math.cos(s),u=l*Math.sin(s);t.shape.setMatrix(xL([["t",c,u]])),i.setMatrix(xL([["t",c,u]]))}}))},t.prototype.active=function(){this.transfrom()},t.prototype.reset=function(){this.transfrom(0)},t}(cw);var bL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getAnnotations=function(e){return(e||this.context.view).getController("annotation").option},t.prototype.getInitialAnnotation=function(){return this.initialAnnotation},t.prototype.init=function(){var e=this,t=this.context.view;t.removeInteraction("tooltip"),t.on("afterchangesize",(function(){var n=e.getAnnotations(t);e.initialAnnotation=n}))},t.prototype.change=function(e){var t=this.context,n=t.view,r=t.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var i=qp(r,["data","data"]);if(r.type.match("legend-item")){var a=Bk.getDelegationObject(this.context),o=n.getGroupedFields()[0];if(a&&o){var s=a.item;i=n.getData().find((function(e){return e[o]===s.value}))}}if(i){var l=qp(e,"annotations",[]),c=qp(e,"statistic",{});n.getController("annotation").clear(!0),Uh(l,(function(e){"object"==typeof e&&n.annotation()[e.type](e)})),aN(n,{statistic:c,plotType:"pie"},i),n.render(!0)}var u,h,p,d=(u=this.context,(p=u.event.target)&&(h=p.get("element")),h);d&&d.shape.toFront()},t.prototype.reset=function(){var e=this.context.view;e.getController("annotation").clear(!0),Uh(this.getInitialAnnotation(),(function(t){e.annotation()[t.type](t)})),e.render(!0)},t}(cw);function CL(e){var t=e.chart,n=e.options,r=n.data,i=n.angleField,a=n.colorField,o=n.color,s=n.pieStyle,l=cN(r,i);if(vL(l,i)){var c="$$percentage$$";l=l.map((function(e){var t;return Nh(Nh({},e),((t={}).$$percentage$$=1/l.length,t))})),t.data(l),yF(eN({},e,{options:{xField:"1",yField:c,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}}))}else{t.data(l),yF(eN({},e,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}}))}return e}function TL(e){var t,n=e.chart,r=e.options,i=r.meta,a=r.colorField,o=eN({},i);return n.scale(o,((t={})[a]={type:"cat"},t)),e}function wL(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),e}function SL(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,a=n.angleField,o=t.geometries[0];if(r){var s=r.callback,l=WM(Fh(r,["callback"]));if(l.content){var c=l.content;l.content=function(e,n,r){var o=e[i],s=e[a],l=t.getScaleByField(a),u=null==l?void 0:l.scale(s);return jh(c)?c(Nh(Nh({},e),{percent:u}),n,r):ap(c)?RM(c,{value:s,name:o,percentage:vp(u)&&!Gh(s)?(100*u).toFixed(2)+"%":null}):c}}var u=l.type?{inner:"",outer:"pie-outer",spider:"pie-spider"}[l.type]:"pie-outer",h=l.layout?$h(l.layout)?l.layout:[l.layout]:[];l.layout=(u?[{type:u}]:[]).concat(h),o.label({fields:i?[a,i]:[a],callback:s,cfg:Nh(Nh({},l),{offset:gL(l.type,l.offset),type:"pie"})})}else o.label(!1);return e}function kL(e){var t=e.innerRadius,n=e.statistic,r=e.angleField,i=e.colorField,a=e.meta,o=gN(e.locale);if(t&&n){var s=eN({},mL.statistic,n),l=s.title,c=s.content;return!1!==l&&(l=eN({},{formatter:function(e){return e?e[i]:Gh(l.content)?o.get(["statistic","total"]):l.content}},l)),!1!==c&&(c=eN({},{formatter:function(e,t){var n=e?e[r]:function(e,t){var n=null;return Uh(e,(function(e){"number"==typeof e[t]&&(n+=e[t])})),n}(t,r),i=qp(a,[r,"formatter"])||function(e){return e};return e||Gh(c.content)?i(n):c.content}},c)),eN({},{statistic:{title:l,content:c}},e)}return e}function _L(e){var t=e.chart,n=kL(e.options),r=n.innerRadius,i=n.statistic;return t.getController("annotation").clear(!0),LM(cF())(e),r&&i&&aN(t,{statistic:i,plotType:"pie"}),e}function AL(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.colorField,a=n.angleField,o=n.data;if(!1===r)t.tooltip(r);else if(t.tooltip(eN({},r,{shared:!1})),vL(o,a)){var s=qp(r,"fields"),l=qp(r,"formatter");Yp(qp(r,"fields"))&&(s=[i,a],l=l||function(e){return{name:e[i],value:Sp(e[a])}}),t.geometries[0].tooltip(s.join("*"),dF(s,l))}return e}function OL(e){var t=e.chart,n=kL(e.options),r=n.interactions,i=n.statistic,a=n.annotations;return Uh(r,(function(e){var n,r;if(!1===e.enable)t.removeInteraction(e.type);else if("pie-statistic-active"===e.type){var o=[];(null===(n=e.cfg)||void 0===n?void 0:n.start)||(o=[{trigger:"element:mouseenter",action:"pie-statistic:change",arg:{statistic:i,annotations:a}}]),Uh(null===(r=e.cfg)||void 0===r?void 0:r.start,(function(e){o.push(Nh(Nh({},e),{arg:{statistic:i,annotations:a}}))})),t.interaction(e.type,eN({},e.cfg,{start:o}))}else t.interaction(e.type,e.cfg||{})})),e}function IL(e){return LM(JN("pieStyle"),CL,TL,iF,wL,eF,AL,SL,aF,_L,OL,rF)(e)}dw("pie-statistic",bL),Jw("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),dw("pie-legend",EL),Jw("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var ML=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pie",t}return Mh(t,e),t.getDefaultOptions=function(){return mL},t.prototype.changeData=function(e){this.chart.emit(dd.BEFORE_CHANGE_DATA,OS.fromData(this.chart,dd.BEFORE_CHANGE_DATA,null));var t=this.options,n=this.options.angleField,r=cN(t.data,n),i=cN(e,n);vL(r,n)||vL(i,n)?this.update({data:e}):(this.updateOption({data:e}),this.chart.data(i),_L({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(dd.AFTER_CHANGE_DATA,OS.fromData(this.chart,dd.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return IL},t}(BN);function NL(e){var t=e.chart,n=e.options,r=n.data,i=n.sectorStyle,a=n.color;return t.data(r),LM(yF)(eN({},e,{options:{marginRatio:1,interval:{style:i,color:a}}})),e}function FL(e){var t=e.chart,n=e.options,r=n.label,i=n.xField,a=HM(t,"interval");if(!1===r)a.label(!1);else if(Yh(r)){var o=r.callback,s=r.fields,l=Fh(r,["callback","fields"]),c=l.offset,u=l.layout;(void 0===c||c>=0)&&(u=u?$h(u)?u:[u]:[],l.layout=Bh(u,(function(e){return"limit-in-shape"!==e.type})),l.layout.length||delete l.layout),a.label({fields:s||[i],callback:o,cfg:WM(l)})}else BM(OM.WARN,null===r,"the label option must be an Object."),a.label({fields:[i]});return e}function LL(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return!1===r?t.legend(!1):i&&t.legend(i,r),e}function PL(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),e}function RL(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return LM(lF(((t={})[a]=r,t[o]=i,t)))(e)}function DL(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r?t.axis(a,r):t.axis(a,!1),i?t.axis(o,i):t.axis(o,!1),e}function BL(e){LM(JN("sectorStyle"),NL,RL,FL,PL,DL,LL,tF,nF,rF,iF,cF(),aF)(e)}var zL=eN({},BN.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right"},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rose",t}Mh(t,e),t.getDefaultOptions=function(){return zL},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return BL}}(BN);var HL={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function jL(e,t){return function(e,t){var n=function(){var e=[256,256],t=UL,n=WL,r=VL,i=XL,a=qL,o=eP,s=Math.random,l=[],c=1/0,u=YL,h=VL,p=nP,d={};function f(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=$L/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function m(t,n,r){for(var i,a,l,c=n.x,u=n.y,h=Math.sqrt(e[0]*e[0]+e[1]*e[1]),p=o(e),d=s()<.5?1:-1,f=-d;(i=p(f+=d))&&(a=~~i[0],l=~~i[1],!(Math.min(Math.abs(a),Math.abs(l))>=h));)if(n.x=c+a,n.y=u+l,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1])&&(!r||!QL(n,t,e[0]))&&(!r||JL(n,r))){for(var m=n.sprite,g=n.width>>5,v=e[0]>>5,y=n.x-(g<<4),x=127&y,E=32-x,b=n.y1-n.y0,C=void 0,T=(n.y+n.y0)*v+(y>>5),w=0;w<b;w++){C=0;for(var S=0;S<=g;S++)t[T+S]|=C<<E|(S<g?(C=m[w*g+S])>>>x:0);T+=v}return delete n.sprite,!0}return!1}return d.start=function(){var o=e[0],g=e[1],v=f(p()),y=d.board?d.board:tP((e[0]>>5)*e[1]),x=l.length,E=[],b=l.map((function(e,o,s){return e.text=u.call(this,e,o,s),e.font=t.call(this,e,o,s),e.style=h.call(this,e,o,s),e.weight=r.call(this,e,o,s),e.rotate=i.call(this,e,o,s),e.size=~~n.call(this,e,o,s),e.padding=a.call(this,e,o,s),e})).sort((function(e,t){return t.size-e.size})),C=-1,T=d.board?[{x:0,y:0},{x:o,y:g}]:null;function w(){for(var t=Date.now();Date.now()-t<c&&++C<x;){var n=b[C];n.x=o*(s()+.5)>>1,n.y=g*(s()+.5)>>1,KL(v,n,b,C),n.hasText&&m(y,n,T)&&(E.push(n),T?d.hasImage||ZL(T,n):T=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}d._tags=E,d._bounds=T}return w(),d},d.createMask=function(t){var n=document.createElement("canvas"),r=e[0],i=e[1];if(r&&i){var a=r>>5,o=tP((r>>5)*i);n.width=r,n.height=i;var s=n.getContext("2d");s.drawImage(t,0,0,t.width,t.height,0,0,r,i);for(var l=s.getImageData(0,0,r,i).data,c=0;c<i;c++)for(var u=0;u<r;u++){var h=a*c+(u>>5),p=c*r+u<<2,f=l[p]>=250&&l[p+1]>=250&&l[p+2]>=250?1<<31-u%32:0;o[h]|=f}d.board=o,d.hasImage=!0}},d.timeInterval=function(e){c=null==e?1/0:e},d.words=function(e){l=e},d.size=function(t){e=[+t[0],+t[1]]},d.font=function(e){t=rP(e)},d.fontWeight=function(e){r=rP(e)},d.rotate=function(e){i=rP(e)},d.spiral=function(e){o=iP[e]||e},d.fontSize=function(e){n=rP(e)},d.padding=function(e){a=rP(e)},d.random=function(e){s=rP(e)},d}();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach((function(e){Gh(t[e])||n[e](t[e])})),n.words(e),t.imageMask&&n.createMask(t.imageMask);var r=n.start()._tags;r.forEach((function(e){e.x+=t.size[0]/2,e.y+=t.size[1]/2}));var i=t.size,a=i[0],o=i[1];return r.push({text:"",value:0,x:0,y:0,opacity:0}),r.push({text:"",value:0,x:a,y:o,opacity:0}),r}(e,t=Rp({},HL,t))}var GL=Math.PI/180,$L=2048;function YL(e){return e.text}function UL(){return"serif"}function VL(){return"normal"}function WL(e){return e.value}function XL(){return 90*~~(2*Math.random())}function qL(){return 1}function KL(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,2048/a,$L/a);var o=0,s=0,l=0,c=n.length;for(--r;++r<c;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font;var u=i.measureText(t.text+"m").width*a,h=t.size<<1;if(t.rotate){var p=Math.sin(t.rotate*GL),d=Math.cos(t.rotate*GL),f=u*d,m=u*p,g=h*d,v=h*p;u=Math.max(Math.abs(f+v),Math.abs(f-v))+31>>5<<5,h=~~Math.max(Math.abs(m+g),Math.abs(m-g))}else u=u+31>>5<<5;if(h>l&&(l=h),o+u>=2048&&(o=0,s+=l,l=0),s+h>=$L)break;i.translate((o+(u>>1))/a,(s+(h>>1))/a),t.rotate&&i.rotate(t.rotate*GL),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=h,t.xoff=o,t.yoff=s,t.x1=u>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=u}for(var y=i.getImageData(0,0,2048/a,$L/a).data,x=[];--r>=0;)if((t=n[r]).hasText){for(var E=(u=t.width)>>5,b=(h=t.y1-t.y0,0);b<h*E;b++)x[b]=0;if(null==(o=t.xoff))return;s=t.yoff;for(var C=0,T=-1,w=0;w<h;w++){for(b=0;b<u;b++){var S=E*w+(b>>5),k=y[2048*(s+w)+(o+b)<<2]?1<<31-b%32:0;x[S]|=k,C|=k}C?T=w:(t.y0++,h--,w--,s++)}t.y1=t.y0+T,t.sprite=x.slice(0,(t.y1-t.y0)*E)}}}function QL(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,l=32-s,c=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),h=0;h<c;h++){r=0;for(var p=0;p<=a;p++)if((r<<l|(p<a?(r=i[h*a+p])>>>s:0))&t[u+p])return!0;u+=n}return!1}function ZL(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function JL(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function eP(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function tP(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function nP(){return document.createElement("canvas")}function rP(e){return jh(e)?e:function(){return e}}var iP={archimedean:eP,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};function aP(e){var t=e.options,n=e.chart,r=n,i=r.width,a=r.height,o=r.padding,s=r.appendPadding,l=r.ele,c=t.data,u=t.imageMask,h=t.wordField,p=t.weightField,d=t.colorField,f=t.wordStyle,m=t.timeInterval,g=t.random,v=t.spiral,y=t.autoFit,x=void 0===y||y,E=t.placementStrategy;if(!c||!c.length)return[];var b,C=f.fontFamily,T=f.fontWeight,w=f.padding,S=f.fontSize,k=function(e,t){return e.map((function(e){return e[t]})).filter((function(e){return"number"==typeof e&&!isNaN(e)}))}(c,p),_=[(b=k,Math.min.apply(Math,b)),cP(k)],A=c.map((function(e){return{text:e[h],value:e[p],color:e[d],datum:e}})),O={imageMask:u,font:C,fontSize:sP(S,_),fontWeight:T,size:oP({width:i,height:a,padding:o,appendPadding:s,autoFit:x,container:l}),padding:w,timeInterval:m,random:g,spiral:v,rotate:lP(t)};if(jh(E)){var I=A.map((function(e,t,r){return Nh(Nh(Nh({},e),{hasText:!!e.text,font:rP(O.font)(e,t,r),weight:rP(O.fontWeight)(e,t,r),rotate:rP(O.rotate)(e,t,r),size:rP(O.fontSize)(e,t,r),style:"normal"}),E.call(n,e,t,r))}));return I.push({text:"",value:0,x:0,y:0,opacity:0}),I.push({text:"",value:0,x:O.size[0],y:O.size[1],opacity:0}),I}return jL(A,O)}function oP(e){var t=e.width,n=e.height,r=e.container,i=e.autoFit,a=e.padding,o=e.appendPadding;if(i){var s=zM(r);t=s.width,n=s.height}t=t||400,n=n||400;var l=function(e){var t=uN(e.padding),n=uN(e.appendPadding),r=t[0]+n[0],i=t[1]+n[1],a=t[2]+n[2],o=t[3]+n[3];return[r,i,a,o]}({padding:a,appendPadding:o}),c=l[0],u=l[1],h=l[2];return[t-(l[3]+u),n-(c+h)]}function sP(e,t){if(jh(e))return e;if($h(e)){var n=e[0],r=e[1];if(!t)return function(){return(r+n)/2};var i=t[0],a=t[1];return a===i?function(){return(r+n)/2}:function(e){var t=e.value;return(r-n)/(a-i)*(t-i)+n}}return function(){return e}}function lP(e){var t=function(e){var t=e.wordStyle.rotationSteps;t<1&&(BM(OM.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),t=1);return{rotation:e.wordStyle.rotation,rotationSteps:t}}(e),n=t.rotation,r=t.rotationSteps;if(!$h(n))return n;var i=n[0],a=n[1],o=1===r?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function cP(e){return Math.max.apply(Math,e)}var uP=eN({},BN.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(e){return{name:e.text,value:e.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}});function hP(e){var t=e.chart,n=e.options,r=n.colorField,i=n.color,a=aP(e);return t.data(a),vF(eN({},e,{options:{xField:"x",yField:"y",seriesField:r&&"color",rawFields:jh(i)&&Lh(qp(n,"rawFields",[]),["datum"]),point:{color:i,shape:"word-cloud"}}})).ext.geometry.label(!1),t.coordinate().reflect("y"),t.axis(!1),e}function pP(e){return LM(lF({x:{nice:!1},y:{nice:!1}}))(e)}function dP(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField;return!1===r?t.legend(!1):i&&t.legend("color",r),e}function fP(e){LM(hP,pP,tF,dP,nF,rF,iF,aF)(e)}function mP(e){return{fontSize:e.data.size,text:e.data.text,textAlign:"center",fontFamily:e.data.font,fontWeight:e.data.weight,fill:e.color||e.defaultStyle.stroke,textBaseline:"alphabetic"}}function gP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function vP(e,t,n,r){e=e.filter((function(e,r){var i=t(e,r),a=n(e,r);return null!=i&&isFinite(i)&&null!=a&&isFinite(a)})),r&&e.sort((function(e,n){return t(e)-t(n)}));for(var i,a,o,s=e.length,l=new Float64Array(s),c=new Float64Array(s),u=0,h=0,p=0;p<s;)o=e[p],l[p]=i=+t(o,p,e),c[p]=a=+n(o,p,e),u+=(i-u)/++p,h+=(a-h)/p;for(var d=0;d<s;++d)l[d]-=u,c[d]-=h;return[l,c,u,h]}function yP(e,t,n,r){for(var i=0,a=0,o=e.length;a<o;a++){var s=e[a],l=+t(s,a,e),c=+n(s,a,e);null!=l&&isFinite(l)&&null!=c&&isFinite(c)&&r(l,c,i++)}}function xP(e,t,n,r,i){var a=0,o=0;return yP(e,t,n,(function(e,t){var n=t-i(e),s=t-r;a+=n*n,o+=s*s})),1-a/o}function EP(e){return 180*Math.atan2(e[1][1]-e[0][1],e[1][0]-e[0][0])/Math.PI}function bP(e,t,n){for(var r=Math.log(t-e)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),a=[s(e),s(t)],o=0;l(a)&&o<1e4;);return a;function s(e){return[e,n(e)]}function l(e){o++;for(var t,n=e.length,r=!1,a=0;a<n-1;a++){var l=e[a],c=e[a+1],u=[((t=[l,c])[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2],h=s(u[0]),p=EP([l,u]),d=EP([l,h]);Math.abs(p-d)>i&&(e.splice(a+1,0,h),r=!0)}return r}}function CP(e,t,n,r){var i=r-e*e,a=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-a*e,a]}function TP(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=e?+e[0]:1/0,u=e?+e[1]:-1/0;yP(r,t,n,(function(t,n){++i,a+=(t-a)/i,o+=(n-o)/i,s+=(t*n-s)/i,l+=(t*t-l)/i,e||(t<c&&(c=t),t>u&&(u=t))}));var h=gP(CP(a,o,s,l),2),p=h[0],d=h[1],f=function(e){return d*e+p},m=[[c,f(c)],[u,f(u)]];return m.a=d,m.b=p,m.predict=f,m.rSquared=xP(r,t,n,o,f),m}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r}function wP(e){e.sort((function(e,t){return e-t}));var t=e.length/2;return t%1==0?(e[t-1]+e[t])/2:e[Math.floor(t)]}rk("point","word-cloud",{draw:function(e,t){var n=e.x,r=e.y,i=t.addShape("text",{attrs:Nh(Nh({},mP(e)),{x:n,y:r})}),a=e.data.rotate;return"number"==typeof a&&Bk.rotate(i,a*Math.PI/180),i}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="word-cloud",t}Mh(t,e),t.getDefaultOptions=function(){return uP},t.prototype.changeData=function(e){this.updateOption({data:e}),this.options.imageMask?this.render():this.chart.changeData(aP({chart:this.chart,options:this.options}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){var t=this;return new Promise((function(n){var r=t.options.imageMask;if(!r)return e.prototype.render.call(t),void n();var i,a=function(r){t.options=Nh(Nh({},t.options),{imageMask:r||null}),e.prototype.render.call(t),n()};(i=r,new Promise((function(e,t){if(i instanceof HTMLImageElement)e(i);else{if(ap(i)){var n=new Image;return n.crossOrigin="anonymous",n.src=i,n.onload=function(){e(n)},void(n.onerror=function(){BM(OM.ERROR,!1,"image %s load failed !!!",i),t()})}BM(OM.WARN,void 0===i,"The type of imageMask option must be String or HTMLImageElement."),t()}}))).then(a).catch(a)}))},t.prototype.getSchemaAdaptor=function(){return fP},t.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout((function(){e.prototype.triggerResize.call(t)})))}}(BN);function SP(e){return(e=1-e*e*e)*e*e}function kP(e,t,n){var r=e[t],i=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>i&&e[a]-r<=r-e[i];)n[0]=++i,n[1]=a,++a}function _P(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i,a,o,s,l=gP(vP(r,t,n),4),c=l[0],u=l[1],h=l[2],p=l[3],d=c.length,f=0,m=0,g=0,v=0,y=0;for(i=0;i<d;)a=c[i],o=u[i++],f+=((s=a*a)-f)/i,m+=(s*a-m)/i,g+=(s*s-g)/i,v+=(a*o-v)/i,y+=(s*o-y)/i;var x=0,E=0,b=e?+e[0]:1/0,C=e?+e[1]:-1/0;yP(r,t,n,(function(t,n){E++,x+=(n-x)/E,e||(t<b&&(b=t),t>C&&(C=t))}));var T=g-f*f,w=f*T-m*m,S=(y*f-v*m)/w,k=(v*T-y*m)/w,_=-S*f,A=function(e){return S*(e-=h)*e+k*e+_+p},O=bP(b,C,A);return O.a=S,O.b=k-2*S*h,O.c=_-k*h+S*h*h+p,O.predict=A,O.rSquared=xP(r,t,n,x,A),O}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r}var AP={exp:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0;yP(r,t,n,(function(t,n){var r=Math.log(n),p=t*n;++i,a+=(n-a)/i,s+=(p-s)/i,c+=(t*p-c)/i,o+=(n*r-o)/i,l+=(p*r-l)/i,e||(t<u&&(u=t),t>h&&(h=t))}));var p=gP(CP(s/a,o/a,l/a,c/a),2),d=p[0],f=p[1];d=Math.exp(d);var m=function(e){return d*Math.exp(f*e)},g=bP(u,h,m);return g.a=d,g.b=f,g.predict=m,g.rSquared=xP(r,t,n,a,m),g}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},linear:TP,loess:function(){var e=function(e){return e[0]},t=function(e){return e[1]},n=.3;function r(r){for(var i=gP(vP(r,e,t,!0),4),a=i[0],o=i[1],s=i[2],l=i[3],c=a.length,u=Math.max(2,~~(n*c)),h=new Float64Array(c),p=new Float64Array(c),d=new Float64Array(c).fill(1),f=-1;++f<=2;){for(var m=[0,u-1],g=0;g<c;++g){for(var v=a[g],y=m[0],x=m[1],E=v-a[y]>a[x]-v?y:x,b=0,C=0,T=0,w=0,S=0,k=1/Math.abs(a[E]-v||1),_=y;_<=x;++_){var A=a[_],O=o[_],I=SP(Math.abs(v-A)*k)*d[_],M=A*I;b+=I,C+=M,T+=O*I,w+=O*M,S+=A*M}var N=gP(CP(C/b,T/b,w/b,S/b),2),F=N[0],L=N[1];h[g]=F+L*v,p[g]=Math.abs(o[g]-h[g]),kP(a,g+1,m)}if(2===f)break;var P=wP(p);if(Math.abs(P)<1e-12)break;for(var R,D,B=0;B<c;++B)R=p[B]/(6*P),d[B]=R>=1?1e-12:(D=1-R*R)*D}return function(e,t,n,r){for(var i,a=e.length,o=[],s=0,l=0,c=[];s<a;++s)i=e[s]+n,c[0]===i?c[1]+=(t[s]-c[1])/++l:(l=0,c[1]+=r,c=[i,t[s]],o.push(c));return c[1]+=r,o}(a,h,s,l)}return r.bandwidth=function(e){return arguments.length?(n=e,r):n},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(e){return arguments.length?(t=e,r):t},r},log:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]},r=Math.E;function i(i){var a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0,p=Math.log(r);yP(i,t,n,(function(t,n){var r=Math.log(t)/p;++a,o+=(r-o)/a,s+=(n-s)/a,l+=(r*n-l)/a,c+=(r*r-c)/a,e||(t<u&&(u=t),t>h&&(h=t))}));var d=gP(CP(o,s,l,c),2),f=d[0],m=d[1],g=function(e){return m*Math.log(e)/p+f},v=bP(u,h,g);return v.a=m,v.b=f,v.predict=g,v.rSquared=xP(i,t,n,s,g),v}return i.domain=function(t){return arguments.length?(e=t,i):e},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.base=function(e){return arguments.length?(r=e,i):r},i},poly:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]},r=3;function i(i){if(1===r){var a=TP().x(t).y(n).domain(e)(i);return a.coefficients=[a.b,a.a],delete a.a,delete a.b,a}if(2===r){var o=_P().x(t).y(n).domain(e)(i);return o.coefficients=[o.c,o.b,o.a],delete o.a,delete o.b,delete o.c,o}var s,l,c,u,h,p=gP(vP(i,t,n),4),d=p[0],f=p[1],m=p[2],g=p[3],v=d.length,y=[],x=[],E=r+1,b=0,C=0,T=e?+e[0]:1/0,w=e?+e[1]:-1/0;for(yP(i,t,n,(function(t,n){++C,b+=(n-b)/C,e||(t<T&&(T=t),t>w&&(w=t))})),s=0;s<E;++s){for(c=0,u=0;c<v;++c)u+=Math.pow(d[c],s)*f[c];for(y.push(u),h=new Float64Array(E),l=0;l<E;++l){for(c=0,u=0;c<v;++c)u+=Math.pow(d[c],s+l);h[l]=u}x.push(h)}x.push(y);var S=function(e){var t,n,r,i,a,o=e.length-1,s=[];for(t=0;t<o;++t){for(i=t,n=t+1;n<o;++n)Math.abs(e[t][n])>Math.abs(e[t][i])&&(i=n);for(r=t;r<o+1;++r)a=e[r][t],e[r][t]=e[r][i],e[r][i]=a;for(n=t+1;n<o;++n)for(r=o;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=o-1;n>=0;--n){for(a=0,r=n+1;r<o;++r)a+=e[r][n]*s[r];s[n]=(e[o][n]-a)/e[n][n]}return s}(x),k=function(e){e-=m;var t=g+S[0]+S[1]*e+S[2]*e*e;for(s=3;s<E;++s)t+=S[s]*Math.pow(e,s);return t},_=bP(T,w,k);return _.coefficients=function(e,t,n,r){var i,a,o,s,l=Array(e);for(i=0;i<e;++i)l[i]=0;for(i=e-1;i>=0;--i)for(o=t[i],s=1,l[i]+=o,a=1;a<=i;++a)s*=(i+1-a)/a,l[i-a]+=o*Math.pow(n,a)*s;return l[0]+=r,l}(E,S,-m,g),_.predict=k,_.rSquared=xP(i,t,n,b,k),_}return i.domain=function(t){return arguments.length?(e=t,i):e},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.order=function(e){return arguments.length?(r=e,i):r},i},pow:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0;yP(r,t,n,(function(t,n){var r=Math.log(t),p=Math.log(n);++i,a+=(r-a)/i,o+=(p-o)/i,s+=(r*p-s)/i,l+=(r*r-l)/i,c+=(n-c)/i,e||(t<u&&(u=t),t>h&&(h=t))}));var p=gP(CP(a,o,s,l),2),d=p[0],f=p[1];d=Math.exp(d);var m=function(e){return d*Math.pow(e,f)},g=bP(u,h,m);return g.a=d,g.b=f,g.predict=m,g.rSquared=xP(r,t,n,c,m),g}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},quad:_P};var OP=function(e,t){var n=t.view,r=t.options,i=r.xField,a=r.yField,o=n.getScaleByField(i),s=n.getScaleByField(a);return function(e,t,n){var r=[],i=e[0],a=null;if(e.length<=2)return function(e,t){var n=[];if(e.length){n.push(["M",e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var a=e[r];n.push(["L",a.x,a.y])}t&&n.push(["Z"])}return n}(e,t);for(var o=0,s=e.length;o<s;o++){var l=e[o];a&&a.x===l.x&&a.y===l.y||(r.push(l.x),r.push(l.y),a=l)}var c=XM(r,t,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}(e.map((function(e){return n.getCoordinate().convert({x:o.scale(e[0]),y:s.scale(e[1])})})),!1)};function IP(e){var t=e.data,n=void 0===t?[]:t,r=e.xField,i=e.yField;if(n.length){for(var a=!0,o=!0,s=n[0],l=void 0,c=1;c<n.length&&(l=n[c],s[r]!==l[r]&&(a=!1),s[i]!==l[i]&&(o=!1),a||o);c++)s=l;var u=[];a&&u.push(r),o&&u.push(i);var h=PM(function(e){var t,n=e.meta,r=void 0===n?{}:n,i=e.xField,a=e.yField,o=e.data,s=o[0][i],l=o[0][a],c=s>0,u=l>0;function h(e,t){var n=qp(r,[e]);function i(e){return qp(n,e)}var a={};return"x"===t?(vp(s)&&(vp(i("min"))||(a.min=c?0:2*s),vp(i("max"))||(a.max=c?2*s:0)),a):(vp(l)&&(vp(i("min"))||(a.min=u?0:2*l),vp(i("max"))||(a.max=u?2*l:0)),a)}return Nh(Nh({},r),((t={})[i]=Nh(Nh({},r[i]),h(i,"x")),t[a]=Nh(Nh({},r[a]),h(a,"y")),t))}(e),u);return eN({},e,{meta:h})}return e}function MP(e){var t=e.chart,n=e.options,r=n.data,i=n.type,a=n.color,o=n.shape,s=n.pointStyle,l=n.shapeField,c=n.colorField,u=n.xField,h=n.yField,p=n.sizeField,d=n.size,f=n.tooltip;p&&(d||(d=[2,8]),vp(d)&&(d=[d,d])),f&&!f.fields&&(f=Nh(Nh({},f),{fields:[u,h,c,p,l]})),t.data(r),vF(eN({},e,{options:{seriesField:c,point:{color:a,shape:o,size:d,style:s},tooltip:f}}));var m=HM(t,"point");return i&&m.adjust(i),e}function NP(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=IP(n);return LM(lF(((t={})[a]=r,t[o]=i,t)))(eN({},e,{options:s}))}function FP(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return t.axis(a,r),t.axis(o,i),e}function LP(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.shapeField,o=n.sizeField,s=n.shapeLegend,l=n.sizeLegend,c=!1!==r;return i&&t.legend(i,!!c&&r),a&&(s?t.legend(a,s):t.legend(a,!1!==s&&r)),o&&t.legend(o,l||!1),c||s||l||t.legend(!1),e}function PP(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=HM(t,"point");if(r){var o=r.callback,s=Fh(r,["callback"]);a.label({fields:[i],callback:o,cfg:WM(s)})}else a.label(!1);return e}function RP(e){var t=e.options.quadrant,n=[];if(t){var r=t.xBaseline,i=void 0===r?0:r,a=t.yBaseline,o=void 0===a?0:a,s=t.labels,l=t.regionStyle,c=t.lineStyle,u=function(e,t){var n=10;return{regionStyle:[{position:{start:[e,"max"],end:["max",t]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[e,t]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",t],end:[e,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[e,t],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",t],offsetX:-10,offsetY:-10,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:n,offsetY:-10,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",t],offsetX:-10,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]}}(i,o);new Array(4).join(",").split(",").forEach((function(e,t){n.push(Nh(Nh({type:"region",top:!1},u.regionStyle[t].position),{style:eN({},u.regionStyle[t].style,null==l?void 0:l[t])}),Nh({type:"text",top:!0},eN({},u.labelStyle[t],null==s?void 0:s[t])))})),n.push({type:"line",top:!1,start:["min",o],end:["max",o],style:eN({},u.lineStyle,c)},{type:"line",top:!1,start:[i,"min"],end:[i,"max"],style:eN({},u.lineStyle,c)})}return LM(cF(n))(e)}function DP(e){var t=e.options,n=e.chart,r=t.regressionLine;if(r){var i=r.style,a=r.top,o=void 0!==a&&a,s={stroke:"#9ba29a",lineWidth:2,opacity:.5};n.annotation().shape({top:o,render:function(e,r){var a=e.addGroup({id:n.id+"-regression-line",name:"regression-line-group"}),o=function(e){var t,n=e.options,r=n.xField,i=n.yField,a=n.data,o=n.regressionLine,s=o.type,l=void 0===s?"linear":s,c=o.algorithm;return t=c?$h(c)?c:c(a):AP[l]().x((function(e){return e[r]})).y((function(e){return e[i]}))(a),OP(t,e)}({view:r,options:t});a.addShape("path",{name:"regression-line",attrs:Nh(Nh({path:o},s),i)})}})}return e}function BP(e){var t=e.chart,n=e.options.tooltip;return n?t.tooltip(n):!1===n&&t.tooltip(!1),e}function zP(e){return LM(MP,NP,FP,LP,BP,PP,KF,nF,RP,rF,iF,DP)(e)}var HP=eN({},BN.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});Jw("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var jP,GP,$P,YP,UP=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="scatter",r.on(dd.BEFORE_RENDER,(function(e){var t,n,i=r,a=i.options,o=i.chart;if((null===(t=e.data)||void 0===t?void 0:t.source)===uM.FILTER){var s=r.chart.filterData(r.chart.getData());NP({chart:o,options:Nh(Nh({},a),{data:s})})}(null===(n=e.data)||void 0===n?void 0:n.source)===uM.RESET&&NP({chart:o,options:a})})),r}return Mh(t,e),t.getDefaultOptions=function(){return HP},t.prototype.changeData=function(e){this.updateOption(IP(eN({},this.options,{data:e})));var t=this.options;NP({chart:this.chart,options:t}),this.chart.changeData(e)},t.prototype.getSchemaAdaptor=function(){return zP},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t}(BN);function VP(e){var t=e.chart,n=e.options,r=n.data,i=n.lineStyle,a=n.color,o=n.point,s=n.area;t.data(r);var l=eN({},e,{options:{line:{style:i,color:a},point:o?Nh({color:a},o):o,area:s?Nh({color:a},s):s,label:void 0}}),c=eN({},l,{options:{tooltip:!1}}),u=(null==o?void 0:o.state)||n.state,h=eN({},l,{options:{tooltip:!1,state:u}});return gF(l),vF(h),mF(c),e}function WP(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return LM(lF(((t={})[a]=r,t[o]=i,t)))(e)}function XP(e){var t=e.chart,n=e.options,r=n.radius,i=n.startAngle,a=n.endAngle;return t.coordinate("polar",{radius:r,startAngle:i,endAngle:a}),e}function qP(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis,a=n.yField,o=n.yAxis;return t.axis(r,i),t.axis(a,o),e}function KP(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=HM(t,"line");if(r){var o=r.callback,s=Fh(r,["callback"]);a.label({fields:[i],callback:o,cfg:WM(s)})}else a.label(!1);return e}function QP(e){return LM(VP,WP,iF,XP,qP,eF,tF,KP,nF,rF,cF())(e)}_S("radar-tooltip",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),t.prototype.getTooltipItems=function(t){var n=this.getTooltipCfg(),r=n.shared,i=n.title,a=e.prototype.getTooltipItems.call(this,t);if(a.length>0){var o=this.view.geometries[0],s=o.dataArray,l=a[0].name,c=[];return s.forEach((function(e){e.forEach((function(e){var t=Bk.getTooltipItems(e,o)[0];if(!r&&t&&t.name===l){var n=Gh(i)?l:i;c.push(Nh(Nh({},t),{name:t.title,title:n}))}else if(r&&t){n=Gh(i)?t.name||l:i;c.push(Nh(Nh({},t),{name:t.title,title:n}))}}))})),c}return[]},t}(zS)),dw("radar-tooltip",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.init=function(){this.context.view.removeInteraction("tooltip")},t.prototype.show=function(){var e=this.context.event;this.getTooltipController().showTooltip({x:e.x,y:e.y})},t.prototype.hide=function(){this.getTooltipController().hideTooltip()},t.prototype.getTooltipController=function(){return this.context.view.getController("radar-tooltip")},t}(cw)),Jw("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="radar",t}Mh(t,e),t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return eN({},e.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},t.prototype.getSchemaAdaptor=function(){return QP}}(BN),(GP=jP||(jP={})).Left="Left",GP.Right="Right",(YP=$P||($P={})).Line="line",YP.Column="column";var ZP={nice:!0,label:{autoHide:!0,autoRotate:!1}},JP=Nh(Nh({},ZP),{position:"left"}),eR=Nh(Nh({},ZP),{position:"right",grid:null});function tR(e){return qp(e,"geometry")===$P.Line}function nR(e){return qp(e,"geometry")===$P.Column}function rR(e,t,n){return nR(n)?eN({},{geometry:$P.Column,label:n.label&&n.isRange?{content:function(e){var n;return null===(n=e[t])||void 0===n?void 0:n.join("-")}}:void 0},n):Nh({geometry:$P.Line},n)}function iR(e,t){var n=e[0],r=e[1];return $h(t)?[t[0],t[1]]:[qp(t,n),qp(t,r)]}function aR(e,t){return t===jP.Left?!1!==e&&eN({},JP,e):t===jP.Right?!1!==e&&eN({},eR,e):e}function oR(e){var t=e.view,n=e.geometryOption,r=e.yField,i=e.legend,a=qp(i,"marker"),o=HM(t,tR(n)?"line":"interval");if(!n.seriesField){var s=qp(t,"options.scales."+r+".alias")||r,l=o.getAttribute("color"),c=t.getTheme().defaultColor;return l&&(c=Bk.getMappingValue(l,s,qp(l,["values",0],c))),[{value:r,name:s,marker:(jh(a)?a:!Yp(a)&&eN({},{style:{stroke:c,fill:c}},a))||(tR(n)?{symbol:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},style:{lineWidth:2,r:6,stroke:c}}:{symbol:"square",style:{fill:c}}),isGeometry:!0,viewId:t.id}]}var u=o.getGroupAttributes();return rp(u,(function(e,n){var r=Bk.getLegendItems(t,o,n,t.getTheme(),a);return e.concat(r)}),[])}var sR=function(e,t){var n=t[0],r=t[1],i=e.getOptions().data,a=e.getXScale(),o=id(i);if(a&&o){var s=sp(i,a.field),l=id(s),c=Math.floor(n*(l-1)),u=Math.floor(r*(l-1));e.filter(a.field,(function(e){var t=s.indexOf(e);return!(t>-1)||function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}(t,c,u)})),e.render(!0)}};function lR(e){var t,n=e.options,r=n.geometryOptions,i=void 0===r?[]:r,a=n.xField,o=n.yField,s=up(i,(function(e){var t=e.geometry;return t===$P.Line||void 0===t}));return eN({},{options:{geometryOptions:[],meta:(t={},t[a]={type:"cat",sync:!0,range:s?[0,1]:void 0},t),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},e,{options:{yAxis:iR(o,n.yAxis),geometryOptions:[rR(0,o[0],i[0]),rR(0,o[1],i[1])],annotations:iR(o,n.annotations)}})}function cR(e){var t,n,r=e.chart,i=e.options.geometryOptions,a={line:0,column:1};return[{type:null===(t=i[0])||void 0===t?void 0:t.geometry,id:"left-axes-view"},{type:null===(n=i[1])||void 0===n?void 0:n.geometry,id:"right-axes-view"}].sort((function(e,t){return-a[e.type]+a[t.type]})).forEach((function(e){return r.createView({id:e.id})})),e}function uR(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.geometryOptions,o=n.data,s=n.tooltip;return[Nh(Nh({},a[0]),{id:"left-axes-view",data:o[0],yField:i[0]}),Nh(Nh({},a[1]),{id:"right-axes-view",data:o[1],yField:i[1]})].forEach((function(e){var n=e.id,i=e.data,a=e.yField,o=nR(e)&&e.isPercent,l=o?NF(i,a,r,a):i,c=YM(t,n).data(l),u=o?Nh({formatter:function(t){return{name:t[e.seriesField]||a,value:(100*Number(t[a])).toFixed(2)+"%"}}},s):s;!function(e){var t=e.options,n=e.chart,r=t.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,s=r.groupField,l=r.isGroup,c=["xField","yField"];if(tR(r)){gF(eN({},e,{options:Nh(Nh(Nh({},PM(t,c)),r),{line:{color:r.color,style:r.lineStyle}})})),vF(eN({},e,{options:Nh(Nh(Nh({},PM(t,c)),r),{point:r.point&&Nh({color:a,shape:"circle"},r.point)})}));var u=[];l&&u.push({type:"dodge",dodgeBy:s||o,customOffset:0}),i&&u.push({type:"stack"}),u.length&&Uh(n.geometries,(function(e){e.adjust(u)}))}nR(r)&&iL(eN({},e,{options:Nh(Nh(Nh({},PM(t,c)),r),{widthRatio:r.columnWidthRatio,interval:Nh(Nh({},PM(r,["color"])),{style:r.columnStyle})})}))}({chart:c,options:{xField:r,yField:a,tooltip:u,geometryOption:e}})})),e}function hR(e){var t,n=e.chart,r=e.options.geometryOptions,i=(null===(t=n.getTheme())||void 0===t?void 0:t.colors10)||[],a=0;return n.once("beforepaint",(function(){Uh(r,(function(e,t){var r=YM(n,0===t?"left-axes-view":"right-axes-view");if(!e.color){var o=r.getGroupScales(),s=qp(o,[0,"values","length"],1),l=i.slice(a,a+s).concat(0===t?[]:i);r.geometries.forEach((function(t){e.seriesField?t.color(e.seriesField,l):t.color(l[0])})),a+=s}})),n.render(!0)})),e}function pR(e){var t,n,r=e.chart,i=e.options,a=i.xAxis,o=i.yAxis,s=i.xField,l=i.yField;return lF(((t={})[s]=a,t[l[0]]=o[0],t))(eN({},e,{chart:YM(r,"left-axes-view")})),lF(((n={})[s]=a,n[l[1]]=o[1],n))(eN({},e,{chart:YM(r,"right-axes-view")})),e}function dR(e){var t=e.chart,n=e.options,r=YM(t,"left-axes-view"),i=YM(t,"right-axes-view"),a=n.xField,o=n.yField,s=n.xAxis,l=n.yAxis;return t.axis(a,!1),t.axis(o[0],!1),t.axis(o[1],!1),r.axis(a,s),r.axis(o[0],aR(l[0],jP.Left)),i.axis(a,!1),i.axis(o[1],aR(l[1],jP.Right)),e}function fR(e){var t=e.chart,n=e.options.tooltip,r=YM(t,"left-axes-view"),i=YM(t,"right-axes-view");return t.tooltip(n),r.tooltip({shared:!0}),i.tooltip({shared:!0}),e}function mR(e){var t=e.chart;return nF(eN({},e,{chart:YM(t,"left-axes-view")})),nF(eN({},e,{chart:YM(t,"right-axes-view")})),e}function gR(e){var t=e.chart,n=e.options.annotations,r=qp(n,[0]),i=qp(n,[1]);return cF(r)(eN({},e,{chart:YM(t,"left-axes-view"),options:{annotations:r}})),cF(i)(eN({},e,{chart:YM(t,"right-axes-view"),options:{annotations:i}})),e}function vR(e){var t=e.chart;return iF(eN({},e,{chart:YM(t,"left-axes-view")})),iF(eN({},e,{chart:YM(t,"right-axes-view")})),iF(e),e}function yR(e){var t=e.chart;return rF(eN({},e,{chart:YM(t,"left-axes-view")})),rF(eN({},e,{chart:YM(t,"right-axes-view")})),e}function xR(e){var t=e.chart,n=e.options.yAxis;return uF(eN({},e,{chart:YM(t,"left-axes-view"),options:{yAxis:n[0]}})),uF(eN({},e,{chart:YM(t,"right-axes-view"),options:{yAxis:n[1]}})),e}function ER(e){var t=e.chart,n=e.options,r=n.legend,i=n.geometryOptions,a=n.yField,o=n.data,s=YM(t,"left-axes-view"),l=YM(t,"right-axes-view");if(!1===r)t.legend(!1);else if(Yh(r)&&!0===r.custom)t.legend(r);else{var c=qp(i,[0,"legend"],r),u=qp(i,[1,"legend"],r);t.once("beforepaint",(function(){var e=o[0].length?oR({view:s,geometryOption:i[0],yField:a[0],legend:c}):[],n=o[1].length?oR({view:l,geometryOption:i[1],yField:a[1],legend:u}):[];t.legend(eN({},r,{custom:!0,items:e.concat(n)}))})),i[0].seriesField&&s.legend(i[0].seriesField,c),i[1].seriesField&&l.legend(i[1].seriesField,u),t.on("legend-item:click",(function(e){var n=qp(e,"gEvent.delegateObject",{});if(n&&n.item){var r=n.item,i=r.value,o=r.isGeometry,s=r.viewId;if(o){if(Qh(a,(function(e){return e===i}))>-1)Uh(qp(YM(t,s),"geometries"),(function(e){e.changeVisible(!n.item.unchecked)}))}else{var l=qp(t.getController("legend"),"option.items",[]);Uh(t.views,(function(e){Uh(e.getGroupScales(),(function(t){t.values&&t.values.indexOf(i)>-1&&e.filter(t.field,(function(e){return!Kh(l,(function(t){return t.value===e})).unchecked}))})),t.render(!0)}))}}}))}return e}function bR(e){var t=e.chart,n=e.options.slider,r=YM(t,"left-axes-view"),i=YM(t,"right-axes-view");return n&&(r.option("slider",n),r.on("slider:valuechanged",(function(e){var t=e.event,n=t.value,r=t.originValue;Vp(n,r)||sR(i,n)})),t.once("afterpaint",(function(){if(!Ip(n)){var e=n.start,t=n.end;(e||t)&&sR(i,[e,t])}}))),e}function CR(e){return LM(lR,cR,vR,uR,pR,dR,xR,fR,mR,gR,yR,hR,ER,bR)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dual-axes",t}Mh(t,e),t.prototype.getDefaultOptions=function(){return eN({},e.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},t.prototype.getSchemaAdaptor=function(){return CR}}(BN);var TR={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return""+qp(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},wR={appendPadding:2,tooltip:Nh({},TR),animation:{}};function SR(e){return Wp(e||[],(function(e,t){return{x:""+t,y:e}}))}function kR(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.areaStyle,o=n.point,s=n.line,l=null==o?void 0:o.state,c=SR(r);t.data(c);var u=eN({},e,{options:{xField:"x",yField:"y",area:{color:i,style:a},line:s,point:o}}),h=eN({},u,{options:{tooltip:!1}}),p=eN({},u,{options:{tooltip:!1,state:l}});return mF(u),gF(h),vF(p),t.axis(!1),t.legend(!1),e}function _R(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=SR(r.data);return LM(lF(((t={}).x=i,t.y=a,t),((n={}).x={type:"cat"},n.y=sN(o,"y"),n)))(e)}function AR(e){return LM(JN("areaStyle"),kR,_R,tF,iF,rF,cF())(e)}function OR(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.lineStyle,o=n.point,s=null==o?void 0:o.state,l=SR(r);t.data(l);var c=eN({},e,{options:{xField:"x",yField:"y",line:{color:i,style:a},point:o}}),u=eN({},c,{options:{tooltip:!1,state:s}});return gF(c),vF(u),t.axis(!1),t.legend(!1),e}function IR(e){return LM(OR,_R,iF,tF,rF,cF())(e)}var MR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-line",t}return Mh(t,e),t.getDefaultOptions=function(){return wR},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;_R({chart:t,options:this.options}),t.changeData(SR(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return IR},t}(BN);function NR(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.columnStyle,o=n.columnWidthRatio,s=SR(r);return t.data(s),yF(eN({},e,{options:{xField:"x",yField:"y",widthRatio:o,interval:{style:a,color:i}}})),t.axis(!1),t.legend(!1),t.interaction("element-active"),e}function FR(e){return LM(iF,JN("columnStyle"),NR,_R,tF,rF,cF())(e)}var LR={appendPadding:2,tooltip:Nh({},{showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return""+qp(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}}),animation:{}},PR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-column",t}return Mh(t,e),t.getDefaultOptions=function(){return LR},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;_R({chart:t,options:this.options}),t.changeData(SR(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return FR},t}(BN),RR={appendPadding:2,tooltip:Nh({},TR),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},DR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-area",t}return Mh(t,e),t.getDefaultOptions=function(){return RR},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;_R({chart:t,options:this.options}),t.changeData(SR(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return AR},t}(BN);function BR(e,t,n){if(1===n)return[0,t];var r=Math.floor(e/t);return[t*r,t*(r+1)]}function zR(e,t,n,r,i){var a=Dp(e);!function(e,t){var n;if(jh(t))n=function(e,n){return t(e)-t(n)};else{var r=[];ap(t)?r.push(t):$h(t)&&(r=t),n=function(e,t){for(var n=0;n<r.length;n+=1){var i=r[n];if(e[i]>t[i])return 1;if(e[i]<t[i])return-1}return 0}}e.sort(n)}(a,t);var o=sp(a,t),s=tp(o),l=s.max-s.min,c=n;if(!n&&r&&(c=r>1?l/(r-1):s.max),!n&&!r){var u=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}(o);c=l/u}var h={},p=dp(a,i);Yp(p)?Uh(a,(function(e){var n=BR(e[t],c,r),i=n[0]+"-"+n[1];Tp(h,i)||(h[i]={range:n,count:0}),h[i].count+=1})):Object.keys(p).forEach((function(e){Uh(p[e],(function(n){var a=BR(n[t],c,r),o=a[0]+"-"+a[1]+"-"+e;Tp(h,o)||(h[o]={range:a,count:0},h[o][i]=e),h[o].count+=1}))}));var d=[];return Uh(h,(function(e){d.push(e)})),d}var HR=eN({},BN.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function jR(e){var t=e.chart,n=e.options,r=n.data,i=n.binField,a=n.binNumber,o=n.binWidth,s=n.color,l=n.stackField,c=n.legend,u=n.columnStyle,h=zR(r,i,o,a,l);return t.data(h),yF(eN({},e,{options:{xField:"range",yField:"count",seriesField:l,isStack:!0,interval:{color:s,style:u}}})),c&&l&&t.legend(l,c),e}function GR(e){var t,n=e.options,r=n.xAxis,i=n.yAxis;return LM(lF(((t={}).range=r,t.count=i,t)))(e)}function $R(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis;return!1===r?t.axis("range",!1):t.axis("range",r),!1===i?t.axis("count",!1):t.axis("count",i),e}function YR(e){var t=e.chart,n=e.options.label,r=HM(t,"interval");if(n){var i=n.callback,a=Fh(n,["callback"]);r.label({fields:["count"],callback:i,cfg:WM(a)})}else r.label(!1);return e}function UR(e){return LM(iF,JN("columnStyle"),jR,GR,$R,aF,YR,tF,nF,rF)(e)}var VR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="histogram",t}return Mh(t,e),t.getDefaultOptions=function(){return HR},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.binField,r=t.binNumber,i=t.binWidth,a=t.stackField;this.chart.changeData(zR(e,n,i,r,a))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return UR},t}(BN),WR=["#FAAD14","#E8EDF3"],XR={percent:.2,color:WR,animation:{}};function qR(e){var t=mp(oN(e)?e:0,0,1);return[{type:"current",percent:t},{type:"target",percent:1-t}]}function KR(e){var t=e.chart,n=e.options,r=n.percent,i=n.progressStyle,a=n.color,o=n.barWidthRatio;return t.data(qR(r)),yF(eN({},e,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:o,interval:{style:i,color:ap(a)?[a,WR[1]]:a},args:{zIndexReversed:!0}}})),t.tooltip(!1),t.axis(!1),t.legend(!1),e}function QR(e){return e.chart.coordinate("rect").transpose(),e}function ZR(e){return LM(KR,lF({}),QR,rF,iF,cF())(e)}var JR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="process",t}return Mh(t,e),t.getDefaultOptions=function(){return XR},t.prototype.changeData=function(e){this.updateOption({percent:e}),this.chart.changeData(qR(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ZR},t}(BN);function eD(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius;return t.coordinate("theta",{innerRadius:r,radius:i}),e}function tD(e,t){var n=e.chart,r=e.options,i=r.innerRadius,a=r.statistic,o=r.percent,s=r.meta;if(n.getController("annotation").clear(!0),i&&a){var l=qp(s,["percent","formatter"])||function(e){return(100*e).toFixed(2)+"%"},c=a.content;c&&(c=eN({},c,{content:Gh(c.content)?l(o):c.content})),aN(n,{statistic:Nh(Nh({},a),{content:c}),plotType:"ring-progress"},{percent:o})}return t&&n.render(!0),e}function nD(e){return LM(KR,lF({}),eD,tD,rF,iF,cF())(e)}var rD={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},iD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ring-process",t}return Mh(t,e),t.getDefaultOptions=function(){return rD},t.prototype.changeData=function(e){this.chart.emit(dd.BEFORE_CHANGE_DATA,OS.fromData(this.chart,dd.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(qR(e)),tD({chart:this.chart,options:this.options},!0),this.chart.emit(dd.AFTER_CHANGE_DATA,OS.fromData(this.chart,dd.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return nD},t}(BN);function aD(e){var t=e.chart,n=e.options,r=n.data,i=n.type,a=n.xField,o=n.yField,s=n.colorField,l=n.sizeField,c=n.sizeRatio,u=n.shape,h=n.color,p=n.tooltip,d=n.heatmapStyle;t.data(r);var f="polygon";"density"===i&&(f="heatmap");var m=hF(p,[a,o,s]),g=m.fields,v=m.formatter,y=1;return(c||0===c)&&(u||l?c<0||c>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):y=c:console.warn("sizeRatio is not in effect: Must define shape or sizeField first")),fF(eN({},e,{options:{type:f,colorField:s,tooltipFields:g,shapeField:l||"",label:void 0,mapping:{tooltip:v,shape:u&&(l?function(e){var t=r.map((function(e){return e[l]})),n=Math.min.apply(Math,t),i=Math.max.apply(Math,t);return[u,(qp(e,l)-n)/(i-n),y]}:function(){return[u,1,y]}),color:h||s&&t.getTheme().sequenceColors.join("-"),style:d}}})),e}function oD(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return LM(lF(((t={})[a]=r,t[o]=i,t)))(e)}function sD(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function lD(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.sizeField,o=n.sizeLegend,s=!1!==r;return i&&t.legend(i,!!s&&r),a&&t.legend(a,void 0===o?r:o),s||o||t.legend(!1),e}function cD(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,a=HM(t,"density"===n.type?"heatmap":"polygon");if(r){if(i){var o=r.callback,s=Fh(r,["callback"]);a.label({fields:[i],callback:o,cfg:WM(s)})}}else a.label(!1);return e}function uD(e){var t=e.chart,n=e.options,r=n.coordinate,i=n.reflect;return r&&t.coordinate({type:r.type||"rect",cfg:r.cfg}),i&&t.coordinate().reflect(i),e}function hD(e){return LM(iF,JN("heatmapStyle"),oD,uD,aD,sD,lD,tF,cD,cF(),nF,rF,aF)(e)}var pD,dD=eN({},BN.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});rk("polygon","circle",{draw:function(e,t){var n,r,i=e.x,a=e.y,o=this.parsePoints(e.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l)/2,u=Number(e.shape[1]),h=Number(e.shape[2]),p=c*Math.sqrt(h)*Math.sqrt(u),d=(null===(n=e.style)||void 0===n?void 0:n.fill)||e.color||(null===(r=e.defaultStyle)||void 0===r?void 0:r.fill);return t.addShape("circle",{attrs:Nh(Nh(Nh({x:i,y:a,r:p},e.defaultStyle),e.style),{fill:d})})}}),rk("polygon","square",{draw:function(e,t){var n,r,i=e.x,a=e.y,o=this.parsePoints(e.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l),u=Number(e.shape[1]),h=Number(e.shape[2]),p=c*Math.sqrt(h)*Math.sqrt(u),d=(null===(n=e.style)||void 0===n?void 0:n.fill)||e.color||(null===(r=e.defaultStyle)||void 0===r?void 0:r.fill);return t.addShape("rect",{attrs:Nh(Nh(Nh({x:i-p/2,y:a-p/2,width:p,height:p},e.defaultStyle),e.style),{fill:d})})}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t}Mh(t,e),t.getDefaultOptions=function(){return dD},t.prototype.getSchemaAdaptor=function(){return hD},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(BN);var fD=eN({},BN.getDefaultOptions(),{meta:(pD={},pD.$$range$$={min:0,alias:"low-q1-median-q3-high"},pD),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),mD=function(e,t){var n=e;if(Array.isArray(t)){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4];n=Wp(e,(function(e){return e.$$range$$=[e[r],e[i],e[a],e[o],e[s]],e}))}return n};function gD(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.groupField,o=n.color,s=n.tooltip,l=n.boxStyle;t.data(mD(n.data,i));var c=$h(i)?"$$range$$":i,u=i?$h(i)?i:[i]:[],h=s;!1!==h&&(h=eN({},{fields:$h(i)?i:[]},h));var p=bF(eN({},e,{options:{xField:r,yField:c,seriesField:a,tooltip:h,rawFields:u,label:!1,schema:{shape:"box",color:o,style:l}}})).ext;return a&&p.geometry.adjust("dodge"),e}function vD(e){var t=e.chart,n=e.options,r=n.xField,i=n.data,a=n.outliersField,o=n.outliersStyle,s=n.padding,l=n.label;if(!a)return e;var c=t.createView({padding:s,id:"outliers_view"}),u=i.reduce((function(e,t){return t[a].forEach((function(n){var r;return e.push(Nh(Nh({},t),((r={})[a]=n,r)))})),e}),[]);return c.data(u),vF({chart:c,options:{xField:r,yField:a,point:{shape:"circle",style:o},label:l}}),c.axis(!1),e}function yD(e){var t,n,r=e.chart,i=e.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=i.outliersField,h=Array.isArray(c)?"$$range$$":c,p={};if(u){var d="$$y_outliers$$";(t={})[u]={sync:d,nice:!0},t[h]={sync:d,nice:!0},p=t}var f=eN(p,a,((n={})[l]=PM(o,zN),n[h]=PM(s,zN),n));return r.scale(f),e}function xD(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=Array.isArray(o)?"$$range$$":o;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis("$$range$$",!1):t.axis(s,i),e}function ED(e){var t=e.chart,n=e.options,r=n.legend,i=n.groupField;return i?r?t.legend(i,r):t.legend(i,{position:"bottom"}):t.legend(!1),e}function bD(e){return LM(gD,vD,yD,xD,ED,tF,nF,rF,iF)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="box",t}Mh(t,e),t.getDefaultOptions=function(){return fD},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField,n=this.chart.views.find((function(e){return"outliers_view"===e.id}));n&&n.data(e),this.chart.changeData(mD(e,t))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return bD}}(BN);var CD,TD,wD={exports:{}},SD={exports:{}};TD=(CD=SD).exports,CD.exports.isNumber=function(e){return"number"==typeof e},CD.exports.findMin=function(e){if(0===e.length)return 1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.min(t,e[n]);return t},CD.exports.findMax=function(e){if(0===e.length)return-1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.max(t,e[n]);return t},CD.exports.findMinMulti=function(e){for(var t=TD.findMin(e[0]),n=1;n<e.length;n++)t=Math.min(t,TD.findMin(e[n]));return t},CD.exports.findMaxMulti=function(e){for(var t=TD.findMax(e[0]),n=1;n<e.length;n++)t=Math.max(t,TD.findMax(e[n]));return t},CD.exports.inside=function(e,t,n){return e<=n&&n<=t},function(e){var t=Math.log(2),n=e.exports,r=SD.exports;function i(e){return 1-Math.abs(e)}e.exports.getUnifiedMinMax=function(e,t){return n.getUnifiedMinMaxMulti([e],t)},e.exports.getUnifiedMinMaxMulti=function(e,t){t=t||{};var n=!1,i=!1,a=r.isNumber(t.width)?t.width:2,o=r.isNumber(t.size)?t.size:50,s=r.isNumber(t.min)?t.min:(n=!0,r.findMinMulti(e)),l=r.isNumber(t.max)?t.max:(i=!0,r.findMaxMulti(e)),c=(l-s)/(o-1);return n&&(s-=2*a*c),i&&(l+=2*a*c),{min:s,max:l}},e.exports.create=function(e,t){if(t=t||{},!e||0===e.length)return[];var a=r.isNumber(t.size)?t.size:50,o=r.isNumber(t.width)?t.width:2,s=n.getUnifiedMinMax(e,{size:a,width:o,min:t.min,max:t.max}),l=s.min,c=s.max-l,u=c/(a-1);if(0===c)return[{x:l,y:1}];for(var h=[],p=0;p<a;p++)h.push({x:l+p*u,y:0});var d=function(e,t){for(var n={},r=0,i=-t;i<=t;i++)r+=e(i/t),n[i]=r;return n}(i,o),f=d[o],m=d[o-1]-d[o-2],g=0;e.forEach((function(e){var t=function(e){return Math.floor((e-l)/u)}(e);if(!(t+o<0||t-o>=h.length)){var n=Math.max(t-o,0),i=t,a=Math.min(t+o,h.length-1),s=n-(t-o),c=t+o-a,p=d[-o-1+s]||0,v=d[-o-1+c]||0,y=f/(f-p-v);s>0&&(g+=y*(s-1)*m);var x=Math.max(0,t-o+1);r.inside(0,h.length-1,x)&&(h[x].y+=1*y*m),r.inside(0,h.length-1,i+1)&&(h[i+1].y-=2*y*m),r.inside(0,h.length-1,a+1)&&(h[a+1].y+=1*y*m)}}));var v=g,y=0,x=0;return h.forEach((function(e){y+=e.y,v+=y,e.y=v,x+=v})),x>0&&h.forEach((function(e){e.y/=x})),h},e.exports.getExpectedValueFromPdf=function(e){if(e&&0!==e.length){var t=0;return e.forEach((function(e){t+=e.x*e.y})),t}},e.exports.getXWithLeftTailArea=function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=0;i<e.length&&(r=i,!((n+=e[i].y)>=t));i++);return e[r].x}},e.exports.getPerplexity=function(e){if(e&&0!==e.length){var n=0;return e.forEach((function(e){var t=Math.log(e.y);isFinite(t)&&(n+=e.y*t)})),n=-n/t,Math.pow(2,n)}}}(wD);var kD=wD.exports;function _D(e,t){var n=e.length*t;if(0===e.length)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function AD(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function OD(e,t,n,r){for(n=n||0,r=r||e.length-1;r>n;){if(r-n>600){var i=r-n+1,a=t-n+1,o=Math.log(i),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(l*=-1),OD(e,t,Math.max(n,Math.floor(t-a*s/i+l)),Math.min(r,Math.floor(t+(i-a)*s/i+l)))}var c=e[t],u=n,h=r;for(AD(e,n,t),e[r]>c&&AD(e,n,r);u<h;){for(AD(e,u,h),u++,h--;e[u]<c;)u++;for(;e[h]>c;)h--}e[n]===c?AD(e,n,h):AD(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function ID(e,t){var n=e.slice();if(Array.isArray(t)){!function(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(FD(e.length,t[r]));n.push(e.length-1),n.sort(ND);var i=[0,n.length-1];for(;i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);MD(e,n[s],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,s,s,a)}}}(n,t);for(var r=[],i=0;i<t.length;i++)r[i]=_D(n,t[i]);return r}return MD(n,FD(n.length,t),0,n.length-1),_D(n,t)}function MD(e,t,n,r){t%1==0?OD(e,t,n,r):(OD(e,t=Math.floor(t),n,r),OD(e,t+1,t+1,r))}function ND(e,t){return e-t}function FD(e,t){var n=e*t;return 1===t?e-1:0===t?0:n%1!=0?Math.ceil(n)-1:e%2==0?n-.5:n}var LD=function(e){return{low:ep(e),high:Jh(e),q1:ID(e,.25),q3:ID(e,.75),median:ID(e,[.5]),minMax:[ep(e),Jh(e)],quantile:[ID(e,.25),ID(e,.75)]}},PD=function(e,t){var n=kD.create(e,t);return{violinSize:n.map((function(e){return e.y})),violinY:n.map((function(e){return e.x}))}},RD=function(e){var t=e.xField,n=e.yField,r=e.seriesField,i=e.data,a=e.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var s=dp(i,t);return Object.keys(s).map((function(e){var t=s[e].map((function(e){return e[n]}));return Nh(Nh({x:e},PD(t,o)),LD(t))}))}var l=[],c=dp(i,r);return Object.keys(c).forEach((function(e){var i=dp(c[e],t);return Object.keys(i).forEach((function(t){var a,s=i[t].map((function(e){return e[n]}));l.push(Nh(Nh(((a={x:t})[r]=e,a),PD(s,o)),LD(s)))}))})),l},DD=eN({},BN.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),BD=["low","high","q1","q3","median"],zD=[{type:"dodge",marginRatio:1/32}];function HD(e){var t=e.chart,n=e.options;return t.data(RD(n)),e}function jD(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,a=n.shape,o=void 0===a?"violin":a,s=n.violinStyle,l=n.tooltip,c=n.state,u=t.createView({id:"violin_view"});return function(e){var t=e.options,n=t.violin,r=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=hF(t.tooltip,[r,i,a,o]),l=s.fields,c=s.formatter;n&&fF(eN({},e,{options:{type:"violin",colorField:a,tooltipFields:l,mapping:Nh({tooltip:c},n)}}))}({chart:u,options:{xField:"x",yField:"violinY",seriesField:r||"x",sizeField:"violinSize",tooltip:Nh({fields:BD},l),violin:{style:s,color:i,shape:o},state:c}}),u.geometries[0].adjust(zD),e}function GD(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,a=n.tooltip,o=n.box;if(!1===o)return e;var s=t.createView({id:"min_max_view"});yF({chart:s,options:{xField:"x",yField:"minMax",seriesField:r||"x",tooltip:Nh({fields:BD},a),state:"object"==typeof o?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(zD);var l=t.createView({id:"quantile_view"});yF({chart:l,options:{xField:"x",yField:"quantile",seriesField:r||"x",tooltip:Nh({fields:BD},a),state:"object"==typeof o?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(zD);var c=t.createView({id:"median_view"});return vF({chart:c,options:{xField:"x",yField:"median",seriesField:r||"x",tooltip:Nh({fields:BD},a),state:"object"==typeof o?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),c.geometries[0].adjust(zD),l.axis(!1),s.axis(!1),c.axis(!1),c.legend(!1),s.legend(!1),l.legend(!1),e}function $D(e){var t,n=e.chart,r=e.options,i=r.meta,a=r.xAxis,o=r.yAxis,s=eN({},i,((t={}).x=Nh(Nh({sync:!0},PM(a,zN)),{type:"cat"}),t.violinY=Nh({sync:!0},PM(o,zN)),t.minMax=Nh({sync:"violinY"},PM(o,zN)),t.quantile=Nh({sync:"violinY"},PM(o,zN)),t.median=Nh({sync:"violinY"},PM(o,zN)),t));return n.scale(s),e}function YD(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=YM(t,"violin_view");return!1===r?a.axis("x",!1):a.axis("x",r),!1===i?a.axis("violinY",!1):a.axis("violinY",i),t.axis(!1),e}function UD(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField,a=n.shape;if(!1===r)t.legend(!1);else{var o=i||"x",s=Jp(r,["selected"]);a&&a.startsWith("hollow")||qp(s,["marker","style","lineWidth"])||Kp(s,["marker","style","lineWidth"],0),t.legend(o,s),qp(r,"selected")&&Uh(t.views,(function(e){return e.legend(o,r)}))}return e}function VD(e){var t=YM(e.chart,"violin_view");return cF()(Nh(Nh({},e),{chart:t})),e}function WD(e){var t=e.chart,n=e.options.animation;return Uh(t.views,(function(e){"boolean"==typeof n?e.animate(n):e.animate(!0),Uh(e.geometries,(function(e){e.animate(n)}))})),e}function XD(e){return LM(iF,HD,jD,GD,$D,tF,YD,UD,nF,VD,WD)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="violin",t}Mh(t,e),t.getDefaultOptions=function(){return DD},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(RD(this.options))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return XD}}(BN);var qD={normal:function(e){return e},multiply:function(e,t){return e*t/255},screen:function(e,t){return 255*(1-(1-e/255)*(1-t/255))},overlay:function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},darken:function(e,t){return e>t?t:e},lighten:function(e,t){return e>t?e:t},dodge:function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e},burn:function(e,t){return 255===t?255:0===e?0:255*(1-Math.min(1,(1-t/255)/(e/255)))}};function KD(e,t,n){void 0===n&&(n="normal");var r,i=(r=function(e){if(!qD[e])throw new Error("unknown blend mode "+e);return qD[e]}(n),function(e,t){var n=[];return n[0]=r(e[0],t[0]),n[1]=r(e[1],t[1]),n[2]=r(e[2],t[2]),n})(QD(e),QD(t)),a=QD(e),o=a[0],s=a[1],l=a[2],c=a[3],u=QD(t),h=u[0],p=u[1],d=u[2],f=u[3],m=Number((c+f*(1-c)).toFixed(2));return"rgba("+Math.round((c*(1-f)*(o/255)+c*f*(i[0]/255)+(1-c)*f*(h/255))/m*255)+", "+Math.round((c*(1-f)*(s/255)+c*f*(i[1]/255)+(1-c)*f*(p/255))/m*255)+", "+Math.round((c*(1-f)*(l/255)+c*f*(i[2]/255)+(1-c)*f*(d/255))/m*255)+", "+m+")"}function QD(e){var t,n=e.replace("/s+/g","");return"string"!=typeof n||n.startsWith("rgba")||n.startsWith("#")?(n.startsWith("rgba")&&(t=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(t=oy.rgb2arr(n).concat([1])),t.map((function(e,t){return 3===t?Number(e):0|e}))):oy.rgb2arr(oy.toRGB(n)).concat([1])}function ZD(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function JD(e,t){return ZD(e).map((function(){return ZD(t)}))}function eB(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function tB(e){return Math.sqrt(eB(e,e))}function nB(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function rB(e,t,n,r,i){for(var a=0;a<e.length;++a)e[a]=t*n[a]+r*i[a]}function iB(e,t,n){var r,i=(n=n||{}).maxIterations||200*t.length,a=n.nonZeroDelta||1.05,o=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,l=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,u=void 0!==n.chi?n.chi:2,h=void 0!==n.psi?n.psi:-.5,p=void 0!==n.sigma?n.sigma:.5,d=t.length,f=new Array(d+1);f[0]=t,f[0].fx=e(t),f[0].id=0;for(var m=0;m<d;++m){var g=t.slice();g[m]=g[m]?g[m]*a:o,f[m+1]=g,f[m+1].fx=e(g),f[m+1].id=m+1}function v(e){for(var t=0;t<e.length;t++)f[d][t]=e[t];f[d].fx=e.fx}for(var y=function(e,t){return e.fx-t.fx},x=t.slice(),E=t.slice(),b=t.slice(),C=t.slice(),T=0;T<i;++T){if(f.sort(y),n.history){var w=f.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));w.sort((function(e,t){return e.id-t.id})),n.history.push({x:f[0].slice(),fx:f[0].fx,simplex:w})}for(r=0,m=0;m<d;++m)r=Math.max(r,Math.abs(f[0][m]-f[1][m]));if(Math.abs(f[0].fx-f[d].fx)<s&&r<l)break;for(m=0;m<d;++m){x[m]=0;for(var S=0;S<d;++S)x[m]+=f[S][m];x[m]/=d}var k=f[d];if(rB(E,1+c,x,-c,k),E.fx=e(E),E.fx<f[0].fx)rB(C,1+u,x,-u,k),C.fx=e(C),C.fx<E.fx?v(C):v(E);else if(E.fx>=f[d-1].fx){var _=!1;if(E.fx>k.fx?(rB(b,1+h,x,-h,k),b.fx=e(b),b.fx<k.fx?v(b):_=!0):(rB(b,1-h*c,x,h*c,k),b.fx=e(b),b.fx<E.fx?v(b):_=!0),_){if(p>=1)break;for(m=1;m<f.length;++m)rB(f[m],1-p,f[0],p,f[m]),f[m].fx=e(f[m])}}else v(E)}return f.sort(y),{fx:f[0].fx,x:f[0]}}function aB(e,t,n,r,i,a,o){var s=n.fx,l=eB(n.fxprime,t),c=s,u=s,h=l,p=0;function d(u,p,d){for(var f=0;f<16;++f)if(i=(u+p)/2,rB(r.x,1,n.x,i,t),c=r.fx=e(r.x,r.fxprime),h=eB(r.fxprime,t),c>s+a*i*l||c>=d)p=i;else{if(Math.abs(h)<=-o*l)return i;h*(p-u)>=0&&(p=u),u=i,d=c}return 0}i=i||1,a=a||1e-6,o=o||.1;for(var f=0;f<10;++f){if(rB(r.x,1,n.x,i,t),c=r.fx=e(r.x,r.fxprime),h=eB(r.fxprime,t),c>s+a*i*l||f&&c>=u)return d(p,i,u);if(Math.abs(h)<=-o*l)return i;if(h>=0)return d(i,p,c);u=c,p=i,i*=2}return i}function oB(e,t,n){var r,i,a,o={x:t.slice(),fx:0,fxprime:t.slice()},s={x:t.slice(),fx:0,fxprime:t.slice()},l=t.slice(),c=1;a=(n=n||{}).maxIterations||20*t.length,o.fx=e(o.x,o.fxprime),nB(r=o.fxprime.slice(),o.fxprime,-1);for(var u=0;u<a;++u){if(c=aB(e,r,o,s,c),n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:c}),c){rB(l,1,s.fxprime,-1,o.fxprime);var h=eB(o.fxprime,o.fxprime);rB(r,Math.max(0,eB(l,s.fxprime)/h),r,-1,s.fxprime),i=o,o=s,s=i}else nB(r,o.fxprime,-1);if(tB(o.fxprime)<=1e-5)break}return n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:c}),o}function sB(e,t){var n,r=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var i=hB(e[n],e[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],t.push(o)}return t}(e),i=r.filter((function(t){return function(e,t){for(var n=0;n<t.length;++n)if(cB(e,t[n])>t[n].radius+1e-10)return!1;return!0}(t,e)})),a=0,o=0,s=[];if(i.length>1){var l=pB(i);for(n=0;n<i.length;++n){var c=i[n];c.angle=Math.atan2(c.x-l.x,c.y-l.y)}i.sort((function(e,t){return t.angle-e.angle}));var u=i[i.length-1];for(n=0;n<i.length;++n){var h=i[n];o+=(u.x+h.x)*(h.y-u.y);for(var p={x:(h.x+u.x)/2,y:(h.y+u.y)/2},d=null,f=0;f<h.parentIndex.length;++f)if(u.parentIndex.indexOf(h.parentIndex[f])>-1){var m=e[h.parentIndex[f]],g=Math.atan2(h.x-m.x,h.y-m.y),v=Math.atan2(u.x-m.x,u.y-m.y),y=v-g;y<0&&(y+=2*Math.PI);var x=v-y/2,E=cB(p,{x:m.x+m.radius*Math.sin(x),y:m.y+m.radius*Math.cos(x)});E>2*m.radius&&(E=2*m.radius),(null===d||d.width>E)&&(d={circle:m,width:E,p1:h,p2:u})}null!==d&&(s.push(d),a+=lB(d.circle.radius,d.width),u=h)}}else{var b=e[0];for(n=1;n<e.length;++n)e[n].radius<b.radius&&(b=e[n]);var C=!1;for(n=0;n<e.length;++n)if(cB(e[n],b)>Math.abs(b.radius-e[n].radius)){C=!0;break}C?a=o=0:(a=b.radius*b.radius*Math.PI,s.push({circle:b,p1:{x:b.x,y:b.y+b.radius},p2:{x:b.x-1e-10,y:b.y+b.radius},width:2*b.radius}))}return o/=2,t&&(t.area=a+o,t.arcArea=a,t.polygonArea=o,t.arcs=s,t.innerPoints=i,t.intersectionPoints=r),a+o}function lB(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function cB(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function uB(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=t-(n*n-e*e+t*t)/(2*n);return lB(e,e-(n*n-t*t+e*e)/(2*n))+lB(t,r)}function hB(e,t){var n=cB(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),s=e.x+a*(t.x-e.x)/n,l=e.y+a*(t.y-e.y)/n,c=-(t.y-e.y)*(o/n),u=-(t.x-e.x)*(o/n);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function pB(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function dB(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+1e-10?Math.abs(e-t):function(e,t,n,r){var i=(r=r||{}).maxIterations||100,a=r.tolerance||1e-10,o=e(t),s=e(n),l=n-t;if(o*s>0)throw"Initial bisect points must have opposite signs";if(0===o)return t;if(0===s)return n;for(var c=0;c<i;++c){var u=t+(l/=2),h=e(u);if(h*o>=0&&(t=u),Math.abs(l)<a||0===h)return u}return t+l}((function(r){return uB(e,t,r)-n}),0,e+t)}function fB(e,t){var n=function(e,t){for(var n,r=t&&t.lossFunction?t.lossFunction:mB,i={},a={},o=0;o<e.length;++o){var s=e[o];1==s.sets.length&&(n=s.sets[0],i[n]={x:1e10,y:1e10,rowid:Object.keys(i).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},a[n]=[])}e=e.filter((function(e){return 2==e.sets.length}));for(o=0;o<e.length;++o){var l=e[o],c=l.hasOwnProperty("weight")?l.weight:1,u=l.sets[0],h=l.sets[1];l.size+1e-10>=Math.min(i[u].size,i[h].size)&&(c=0),a[u].push({set:h,size:l.size,weight:c}),a[h].push({set:u,size:l.size,weight:c})}var p=[];for(n in a)if(a.hasOwnProperty(n)){var d=0;for(o=0;o<a[n].length;++o)d+=a[n][o].size*a[n][o].weight;p.push({set:n,size:d})}function f(e,t){return t.size-e.size}p.sort(f);var m={};function g(e){return e.set in m}function v(e,t){i[t].x=e.x,i[t].y=e.y,m[t]=!0}v({x:0,y:0},p[0].set);for(o=1;o<p.length;++o){var y=p[o].set,x=a[y].filter(g);if(n=i[y],x.sort(f),0===x.length)throw"ERROR: missing pairwise overlap information";for(var E=[],b=0;b<x.length;++b){var C=i[x[b].set],T=dB(n.radius,C.radius,x[b].size);E.push({x:C.x+T,y:C.y}),E.push({x:C.x-T,y:C.y}),E.push({y:C.y+T,x:C.x}),E.push({y:C.y-T,x:C.x});for(var w=b+1;w<x.length;++w)for(var S=i[x[w].set],k=dB(n.radius,S.radius,x[w].size),_=hB({x:C.x,y:C.y,radius:T},{x:S.x,y:S.y,radius:k}),A=0;A<_.length;++A)E.push(_[A])}var O=1e50,I=E[0];for(b=0;b<E.length;++b){i[y].x=E[b].x,i[y].y=E[b].y;var M=r(i,e);M<O&&(O=M,I=E[b])}v(I,y)}return i}(e,t),r=t.lossFunction||mB;if(e.length>=8){var i=function(e,t){var n,r=(t=t||{}).restarts||10,i=[],a={};for(n=0;n<e.length;++n){var o=e[n];1==o.sets.length&&(a[o.sets[0]]=i.length,i.push(o))}var s=function(e,t,n){var r=JD(t.length,t.length),i=JD(t.length,t.length);return e.filter((function(e){return 2==e.sets.length})).map((function(e){var a=n[e.sets[0]],o=n[e.sets[1]],s=dB(Math.sqrt(t[a].size/Math.PI),Math.sqrt(t[o].size/Math.PI),e.size);r[a][o]=r[o][a]=s;var l=0;e.size+1e-10>=Math.min(t[a].size,t[o].size)?l=1:e.size<=1e-10&&(l=-1),i[a][o]=i[o][a]=l})),{distances:r,constraints:i}}(e,i,a),l=s.distances,c=s.constraints,u=tB(l.map(tB))/l.length;l=l.map((function(e){return e.map((function(e){return e/u}))}));var h,p,d=function(e,t){return function(e,t,n,r){var i,a=0;for(i=0;i<t.length;++i)t[i]=0;for(i=0;i<n.length;++i)for(var o=e[2*i],s=e[2*i+1],l=i+1;l<n.length;++l){var c=e[2*l],u=e[2*l+1],h=n[i][l],p=r[i][l],d=(c-o)*(c-o)+(u-s)*(u-s),f=Math.sqrt(d),m=d-h*h;p>0&&f<=h||p<0&&f>=h||(a+=2*m*m,t[2*i]+=4*m*(o-c),t[2*i+1]+=4*m*(s-u),t[2*l]+=4*m*(c-o),t[2*l+1]+=4*m*(u-s))}return a}(e,t,l,c)};for(n=0;n<r;++n){p=oB(d,ZD(2*l.length).map(Math.random),t),(!h||p.fx<h.fx)&&(h=p)}var f=h.x,m={};for(n=0;n<i.length;++n){var g=i[n];m[g.sets[0]]={x:f[2*n]*u,y:f[2*n+1]*u,radius:Math.sqrt(g.size/Math.PI)}}if(t.history)for(n=0;n<t.history.length;++n)nB(t.history[n].x,u);return m}(e,t);r(i,e)+1e-8<r(n,e)&&(n=i)}return n}function mB(e,t){var n=0;for(var r=0;r<t.length;++r){var i=t[r],a=void 0;if(1!=i.sets.length){if(2==i.sets.length){var o=e[i.sets[0]],s=e[i.sets[1]];a=uB(o.radius,s.radius,cB(o,s))}else a=sB(i.sets.map((function(t){return e[t]})));n+=(i.hasOwnProperty("weight")?i.weight:1)*(a-i.size)*(a-i.size)}}return n}function gB(e,t,n,r){var i=[],a=[];for(var o in e)e.hasOwnProperty(o)&&(a.push(o),i.push(e[o]));t-=2*r,n-=2*r;var s=function(e){var t=function(t){return{max:Math.max.apply(null,e.map((function(e){return e[t]+e.radius}))),min:Math.min.apply(null,e.map((function(e){return e[t]-e.radius})))}};return{xRange:t("x"),yRange:t("y")}}(i),l=s.xRange,c=s.yRange;if(l.max==l.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),e;for(var u=t/(l.max-l.min),h=n/(c.max-c.min),p=Math.min(h,u),d=(t-(l.max-l.min)*p)/2,f=(n-(c.max-c.min)*p)/2,m={},g=0;g<i.length;++g){var v=i[g];m[a[g]]={radius:p*v.radius,x:r+d+(v.x-l.min)*p,y:r+f+(v.y-c.min)*p}}return m}function vB(e,t,n){var r,i,a=t[0].radius-cB(t[0],e);for(r=1;r<t.length;++r)(i=t[r].radius-cB(t[r],e))<=a&&(a=i);for(r=0;r<n.length;++r)(i=cB(n[r],e)-n[r].radius)<=a&&(a=i);return a}function yB(e,t){var n,r=[];for(n=0;n<e.length;++n){var i=e[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var a=r[0],o=vB(r[0],e,t);for(n=1;n<r.length;++n){var s=vB(r[n],e,t);s>=o&&(a=r[n],o=s)}var l=iB((function(n){return-1*vB({x:n[0],y:n[1]},e,t)}),[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:l[0],y:l[1]},u=!0;for(n=0;n<e.length;++n)if(cB(c,e[n])>e[n].radius){u=!1;break}for(n=0;n<t.length;++n)if(cB(c,t[n])<t[n].radius){u=!1;break}if(!u)if(1==e.length)c={x:e[0].x,y:e[0].y};else{var h={};sB(e,h),c=0===h.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==h.arcs.length?{x:h.arcs[0].circle.x,y:h.arcs[0].circle.y}:t.length?yB(e,[]):pB(h.arcs.map((function(e){return e.p1})))}return c}function xB(e,t){for(var n={},r=function(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var i=0;i<n.length;i++)for(var a=e[n[i]],o=i+1;o<n.length;++o){var s=e[n[o]],l=cB(a,s);l+s.radius<=a.radius+1e-10?t[n[o]].push(n[i]):l+a.radius<=s.radius+1e-10&&t[n[i]].push(n[o])}return t}(e),i=0;i<t.length;++i){for(var a=t[i].sets,o={},s={},l=0;l<a.length;++l){o[a[l]]=!0;for(var c=r[a[l]],u=0;u<c.length;++u)s[c[u]]=!0}var h=[],p=[];for(var d in e)d in o?h.push(e[d]):d in s||p.push(e[d]);var f=yB(h,p);n[a]=f,f.disjoint&&t[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return n}var EB={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(e){return{name:e.id,value:e.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]},bB=zp((function(e,t,n,r){var i=new Map,a=e.length;return t.forEach((function(t,o){if(1===t[r].length)i.set(t.id,e[(o+a)%a]);else{var s=t[r].map((function(e){return i.get(e)}));i.set(t.id,s.slice(1).reduce((function(e,t){return KD(e,t,n)}),s[0]))}})),i}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return JSON.stringify(e)}));function CB(e,t,n,r){void 0===r&&(r=0);var i=e.data,a=e.setsField,o=e.sizeField;if(0===i.length)return BM(OM.WARN,!1,"warn: %s","数据不能为空"),[];var s=i.map((function(e){var t;return Nh(Nh({},e),((t={sets:e[a]||[],size:e[o]}).path="",t.id="",t))}));s.sort((function(e,t){return e.sets.length-t.sets.length}));var l=gB(function(e,t){(t=t||{}).maxIterations=t.maxIterations||500;var n,r=t.initialLayout||fB,i=t.lossFunction||mB,a=r(e=function(e){e=e.slice();var t,n,r,i,a=[],o={};for(t=0;t<e.length;++t){var s=e[t];1==s.sets.length?a.push(s.sets[0]):2==s.sets.length&&(o[[r=s.sets[0],i=s.sets[1]]]=!0,o[[i,r]]=!0)}for(a.sort((function(e,t){return e>t?1:-1})),t=0;t<a.length;++t)for(r=a[t],n=t+1;n<a.length;++n)[r,i=a[n]]in o||e.push({sets:[r,i],size:0});return e}(e),t),o=[],s=[];for(n in a)a.hasOwnProperty(n)&&(o.push(a[n].x),o.push(a[n].y),s.push(n));for(var l=iB((function(t){for(var n={},r=0;r<s.length;++r){var o=s[r];n[o]={x:t[2*r],y:t[2*r+1],radius:a[o].radius}}return i(n,e)}),o,t).x,c=0;c<s.length;++c)n=s[c],a[n].x=l[2*c],a[n].y=l[2*c+1];return a}(s),t,n,r),c=xB(l,s);return s.forEach((function(e){var t=e.sets,n=t.join(",");e.id=n;var r=function(e){var t={};sB(e,t);var n=t.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return function(e,t,n){var r=[],i=e-n,a=t;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var o=n[a],s=o.circle.radius,l=o.width>s;i.push("\nA",s,s,0,l?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}(t.map((function(e){return l[e]})));/[zZ]$/.test(r)||(r+=" Z"),e.path=r,Rp(e,c[n]||{x:0,y:0})})),s}function TB(e){e&&e.geometries[0].elements.forEach((function(e){e.shape.toFront()}))}rk("schema","venn",{draw:function(e,t){var n=mv(e.data.path),r=function(e){return eN({},e.defaultStyle,{fill:e.color},e.style)}(e),i=t.addGroup({name:"venn-shape"});i.addShape("path",{attrs:Nh(Nh({},r),{path:n}),name:"venn-path"});var a=e.customInfo,o=a.offsetX,s=a.offsetY,l=Bk.transform(null,[["t",o,s]]);return i.setMatrix(l),i},getMarker:function(e){var t=e.color;return{symbol:"circle",style:{lineWidth:0,stroke:t,fill:t,r:4}}}}),QS("venn",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getLabelPoint=function(e,t,n){var r=e.data,i=r.x,a=r.y,o=e.customLabelInfo,s=o.offsetX,l=o.offsetY;return{content:e.content[n],x:i+s,y:a+l}},t}(yk));var wB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.syncElementsPos=function(){TB(this.context.view)},t.prototype.active=function(){e.prototype.active.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(pw("element-active")),SB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.syncElementsPos=function(){TB(this.context.view)},t.prototype.highlight=function(){e.prototype.highlight.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.clear=function(){e.prototype.clear.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(pw("element-highlight")),kB=pw("element-selected"),_B=pw("element-single-selected"),AB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.syncElementsPos=function(){TB(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(kB),OB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.syncElementsPos=function(){TB(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(_B);dw("venn-element-active",wB),dw("venn-element-highlight",SB),dw("venn-element-selected",AB),dw("venn-element-single-selected",OB),Jw("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),Jw("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),Jw("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),Jw("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),Jw("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),Jw("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});function IB(e,t,n){var r=e.chart,i=e.options,a=i.blendMode,o=i.setsField,s=r.getTheme(),l=s.colors10,c=s.colors20,u=n;$h(u)||(u=t.filter((function(e){return 1===e[o].length})).length<=10?l:c);var h=bB(u,t,a,o);return function(e){return h.get(e)||u[0]}}function MB(e){var t=e.chart,n=e.options,r=n.legend,i=n.appendPadding,a=n.padding,o=uN(i);return!1!==r&&(o=hN(i,qp(r,"position"),40)),t.appendPadding=pN([o,a]),e}function NB(e){var t=e.options.data;t||(BM(OM.WARN,!1,"warn: %s","数据不能为空"),t=[]);var n=t.filter((function(e){return 1===e.sets.length})).map((function(e){return e.sets[0]})),r=t.filter((function(e){var t=e.sets;return function(e,t){for(var n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0}(n,t)}));return Vp(r,t)||BM(OM.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),jp({},e,{options:{data:r}})}function FB(e){var t=e.chart,n=e.options,r=n.pointStyle,i=n.setsField,a=n.sizeField,o=uN(t.appendPadding),s=o[0],l=o[1],c=o[2],u=o[3],h={offsetX:u,offsetY:s},p=t.viewBBox,d=p.width,f=p.height,m=CB(n,Math.max(d-(l+u),0),Math.max(f-(s+c),0),0);t.data(m);var g=bF(eN({},e,{options:{xField:"x",yField:"y",sizeField:a,seriesField:"id",rawFields:[i,a],schema:{shape:"venn",style:r}}})).ext.geometry;g.customInfo(h);var v=function(e,t){var n=e.options.color;if("function"!=typeof n){var r=IB(e,t,"string"==typeof n?[n]:n);return function(e){return r(e.id)}}return n}(e,m);return"function"==typeof v&&g.color("id",(function(t){var n=m.find((function(e){return e.id===t})),r=IB(e,m)(t);return v(n,r)})),e}function LB(e){var t=e.chart,n=e.options.label,r=uN(t.appendPadding),i=r[0],a={offsetX:r[3],offsetY:i},o=HM(t,"schema");if(n){var s=n.callback,l=Fh(n,["callback"]);o.label({fields:["id"],callback:s,cfg:jp({},WM(l),{type:"venn",customLabelInfo:a})})}else o.label(!1);return e}function PB(e){var t=e.chart,n=e.options,r=n.legend,i=n.sizeField;return t.legend("id",r),t.legend(i,!1),e}function RB(e){return e.chart.axis(!1),e}function DB(e){var t=e.options,n=e.chart,r=t.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};nF(eN({},e,{options:{interactions:r.map((function(e){return Nh(Nh({},e),{type:i[e.type]||e.type})}))}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),e}function BB(e){return LM(MB,iF,NB,FB,LB,lF({}),PB,RB,tF,DB,rF)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="venn",t}Mh(t,e),t.getDefaultOptions=function(){return EB},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return BB},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(BN);var zB,HB="$$stock-range$$",jB=eN({},BN.getDefaultOptions(),{tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(e,t,n){var r;if("x"===e){var i=n[0];r=i?i.title:t}else r=t;return{position:"y"===e?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function GB(e,t){return Wp(e,(function(e){if($h(t)){var n=t[0],r=t[1],i=t[2],a=t[3];e.trend=e[n]<=e[r]?"up":"down",e[HB]=[e[n],e[r],e[i],e[a]]}return e}))}function $B(e){var t=e.chart,n=e.options,r=n.yField,i=n.data,a=n.risingFill,o=n.fallingFill,s=n.tooltip,l=n.stockStyle;t.data(GB(i,r));var c=s;return!1!==c&&(c=eN({},{fields:r},c)),bF(eN({},e,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:HB,seriesField:"trend",rawFields:r,tooltip:c}})),e}function YB(e){var t,n,r=e.chart,i=e.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=((t={})[l]={type:"timeCat",tickCount:6},t.trend={values:["up","down"]},t),u=eN(c,a,((n={})[l]=PM(o,zN),n[HB]=PM(s,zN),n));return r.scale(u),e}function UB(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(HB,!1):t.axis(HB,i),e}function VB(e){var t=e.chart,n=e.options.tooltip;return!1!==n?t.tooltip(n):t.tooltip(!1),e}function WB(e){var t=e.chart,n=e.options.legend;return n?t.legend("trend",n):!1===n&&t.legend(!1),e}function XB(e){LM(iF,$B,YB,UB,VB,WB,nF,rF,cF(),oF)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="stock",t}Mh(t,e),t.getDefaultOptions=function(){return jB},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return XB},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField;this.chart.changeData(GB(e,t))}}(BN);var qB={appendPadding:[0,80],minSize:0,maxSize:1,meta:(zB={},zB.$$mappingValue$$={min:0,max:1,nice:!1},zB),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}};function KB(e,t,n){var r=n.yField,i=n.maxSize,a=n.minSize,o=qp(xp(t,r),[r]),s=vp(i)?i:1,l=vp(a)?a:0;return Wp(e,(function(t,n){var i=(t[r]||0)/o;return t.$$percentage$$=i,t.$$mappingValue$$=(s-l)*i+l,t.$$conversion$$=[qp(e,[n-1,r]),t[r]],t}))}function QB(e){return function(t){var n=t.chart,r=t.options.conversionTag,i=n.getOptions().data;if(r){var a=r.formatter;i.forEach((function(t,o){if(!(o<=0||Number.isNaN(t.$$mappingValue$$))){var s=e(t,o,i,{top:!0,text:{content:jh(a)?a(t,i):a,offsetX:r.offsetX,offsetY:r.offsetY,position:"end",autoRotate:!1,style:Nh({textAlign:"start",textBaseline:"middle"},r.style)}});n.annotation().line(s)}}))}return t}}function ZB(e){var t=e.chart,n=e.options,r=n.data,i=void 0===r?[]:r,a=KB(i,i,{yField:n.yField,maxSize:n.maxSize,minSize:n.minSize});return t.data(a),e}function JB(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,l=n.shape,c=void 0===l?"funnel":l,u=n.funnelStyle,h=n.state,p=hF(o,[r,i]),d=p.fields,f=p.formatter;return fF({chart:t,options:{type:"interval",xField:r,yField:"$$mappingValue$$",colorField:r,tooltipFields:$h(d)&&d.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:c,tooltip:f,color:a,style:u},label:s,state:h}}),HM(e.chart,"interval").adjust("symmetric"),e}function ez(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),e}function tz(e){var t=e.options.maxSize;return QB((function(e,n,r,i){var a=t-(t-e.$$mappingValue$$)/2;return Nh(Nh({},i),{start:[n-.5,a],end:[n-.5,a+.05]})}))(e),e}function nz(e){return LM(ZB,JB,ez,tz)(e)}function rz(e){var t,n=e.chart,r=e.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return n.data(a),n.scale(((t={})[o]={sync:!0},t)),e}function iz(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.color,s=n.compareField,l=n.isTransposed,c=n.tooltip,u=n.maxSize,h=n.minSize,p=n.label,d=n.funnelStyle,f=n.state;return t.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],eachView:function(e,t){var n=l?t.rowIndex:t.columnIndex;l||e.coordinate({type:"rect",actions:[["transpose"],["scale",0===n?-1:1,-1]]});var m=KB(t.data,r,{yField:a,maxSize:u,minSize:h});e.data(m);var g=hF(c,[i,a,s]),v=g.fields,y=g.formatter,x=l?{offset:0===n?10:-23,position:0===n?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:0===n?"end":"start"}};fF({chart:e,options:{type:"interval",xField:i,yField:"$$mappingValue$$",colorField:i,tooltipFields:$h(v)&&v.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:"funnel",tooltip:y,color:o,style:d},label:!1!==p&&eN({},x,p),state:f}})}}),e}function az(e){var t=e.chart,n=e.options,r=n.conversionTag,i=n.isTransposed;return t.once("beforepaint",(function(){t.views.forEach((function(e,t){QB((function(e,n,a,o){var s=0===t?-1:1;return eN({},o,{start:[n-.5,e.$$mappingValue$$],end:[n-.5,e.$$mappingValue$$+.05],text:i?{style:{textAlign:"start"}}:{offsetX:!1!==r?s*r.offsetX:0,style:{textAlign:0===t?"end":"start"}}})}))(eN({},{chart:e,options:n}))}))})),e}function oz(e){var t,n=e.chart,r=e.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return n.data(a),n.scale(((t={})[o]={sync:!0},t)),e}function sz(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.isTransposed;return t.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],eachView:function(t,n){nz(eN({},e,{chart:t,options:{data:n.data}}))}}),e}function lz(e){var t=e.chart,n=e.options,r=n.data,i=void 0===r?[]:r,a=n.yField,o=rp(i,(function(e,t){return e+(t[a]||0)}),0),s=xp(i,a)[a],l=Wp(i,(function(e,t){var n=[],r=[];if(e.$$totalPercentage$$=(e[a]||0)/o,t){var l=i[t-1].$$x$$,c=i[t-1].$$y$$;n[0]=l[3],r[0]=c[3],n[1]=l[2],r[1]=c[2]}else n[0]=-.5,r[0]=1,n[1]=.5,r[1]=1;return r[2]=r[1]-e.$$totalPercentage$$,n[2]=(r[2]+1)/4,r[3]=r[2],n[3]=-n[2],e.$$x$$=n,e.$$y$$=r,e.$$percentage$$=(e[a]||0)/s,e.$$conversion$$=[qp(i,[t-1,a]),e[a]],e}));return t.data(l),e}function cz(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,l=n.funnelStyle,c=n.state,u=hF(o,[r,i]),h=u.fields,p=u.formatter;return fF({chart:t,options:{type:"polygon",xField:"$$x$$",yField:"$$y$$",colorField:r,tooltipFields:$h(h)&&h.concat(["$$percentage$$","$$conversion$$"]),label:s,state:c,mapping:{tooltip:p,color:a,style:l}}}),e}function uz(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),e}function hz(e){return QB((function(e,t,n,r){return Nh(Nh({},r),{start:[e.$$x$$[1],e.$$y$$[1]],end:[e.$$x$$[1]+.05,e.$$y$$[1]]})}))(e),e}function pz(e){var t,n=e.options,r=n.compareField,i=n.xField,a=n.yField,o=n.locale,s=n.funnelStyle,l=n.data,c=gN(o);return(r||s)&&(t=function(e){return eN({},r&&{lineWidth:1,stroke:"#fff"},jh(s)?s(e):s)}),eN({options:{label:r?{fields:[i,a,r,"$$percentage$$","$$conversion$$"],formatter:function(e){return""+e[a]}}:{fields:[i,a,"$$percentage$$","$$conversion$$"],offset:0,position:"middle",formatter:function(e){return e[i]+" "+e[a]}},tooltip:{title:i,formatter:function(e){return{name:e[i],value:e[a]}}},conversionTag:{formatter:function(e){return c.get(["conversionTag","label"])+": "+HF.apply(void 0,e.$$conversion$$)}}}},e,{options:{funnelStyle:t,data:Dp(l)}})}function dz(e){var t=e.options,n=t.compareField,r=t.dynamicHeight;return t.seriesField?function(e){return LM(oz,sz)(e)}(e):n?function(e){return LM(rz,iz,az)(e)}(e):r?function(e){return LM(lz,cz,uz,hz)(e)}(e):nz(e)}function fz(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return LM(lF(((t={})[a]=r,t[o]=i,t)))(e)}function mz(e){return e.chart.axis(!1),e}function gz(e){var t=e.chart,n=e.options.legend;return!1===n?t.legend(!1):t.legend(n),e}function vz(e){return LM(pz,dz,fz,mz,tF,nF,gz,rF,iF,cF())(e)}var yz=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="funnel",t}return Mh(t,e),t.getDefaultOptions=function(){return qB},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return vz},t.prototype.setState=function(e,t,n){void 0===n&&(n=!0),Uh(GM(this.chart),(function(r){t(r.getData())&&r.setState(e,n)}))},t.prototype.getStates=function(){var e=GM(this.chart),t=[];return Uh(e,(function(e){var n=e.getData();Uh(e.getStates(),(function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})}))})),t},t.CONVERSATION_FIELD="$$conversion$$",t.PERCENT_FIELD="$$percentage$$",t.TOTAL_PERCENT_FIELD="$$totalPercentage$$",t}(BN);function xz(e){return[{percent:e,type:"liquid"}]}function Ez(e){var t=e.chart,n=e.options,r=n.percent,i=n.liquidStyle,a=n.radius,o=n.outline,s=n.wave,l=n.shape;t.scale({percent:{min:0,max:1}}),t.data(xz(r));var c=n.color||t.getTheme().defaultColor,u=yF(eN({},e,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:c,style:i,shape:"liquid-fill-gauge"}}})).ext.geometry,h={radius:a,outline:o,wave:s,shape:l,background:t.getTheme().background};return u.customInfo(h),t.legend(!1),t.axis(!1),t.tooltip(!1),e}function bz(e,t){var n=e.chart,r=e.options,i=r.statistic,a=r.percent,o=r.meta;n.getController("annotation").clear(!0);var s=qp(o,["percent","formatter"])||function(e){return(100*e).toFixed(2)+"%"},l=i.content;return l&&(l=eN({},l,{content:Gh(l.content)?s(a):l.content})),aN(n,{statistic:Nh(Nh({},i),{content:l}),plotType:"liquid"},{percent:a}),t&&n.render(!0),e}function Cz(e){return LM(iF,JN("liquidStyle"),Ez,bz,lF({}),rF,nF)(e)}var Tz={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"};function wz(e,t,n){return e+(t-e)*n}function Sz(e,t,n,r){return 0===t?[[e+.5*n/Math.PI/2,r/2],[e+.5*n/Math.PI,r],[e+n/4,r]]:1===t?[[e+.5*n/Math.PI/2*(Math.PI-2),r],[e+.5*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:2===t?[[e+.5*n/Math.PI/2,-r/2],[e+.5*n/Math.PI,-r],[e+n/4,-r]]:[[e+.5*n/Math.PI/2*(Math.PI-2),-r],[e+.5*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function kz(e,t,n,r,i,a,o){for(var s=4*Math.ceil(2*e/n*4),l=[],c=r;c<2*-Math.PI;)c+=2*Math.PI;for(;c>0;)c-=2*Math.PI;var u=a-e+(c=c/Math.PI/2*n)-2*e;l.push(["M",u,t]);for(var h=0,p=0;p<s;++p){var d=Sz(p*n/4,p%4,n,i);l.push(["C",d[0][0]+u,-d[0][1]+t,d[1][0]+u,-d[1][1]+t,d[2][0]+u,-d[2][1]+t]),p===s-1&&(h=d[2][0])}return l.push(["L",h+u,o+e]),l.push(["L",u,o+e]),l.push(["Z"]),l}function _z(e,t,n,r){var i=2*n/3,a=Math.max(i,r),o=i/2,s=e,l=o+t-a/2,c=Math.asin(o/(.85*(a-o))),u=Math.sin(c)*o,h=Math.cos(c)*o,p=s-h,d=l+u,f=e,m=l+o/Math.sin(c);return"\n      M "+p+" "+d+"\n      A "+o+" "+o+" 0 1 1 "+(p+2*h)+" "+d+"\n      Q "+f+" "+m+" "+e+" "+(t+a/2)+"\n      Q "+f+" "+m+" "+p+" "+d+"\n      Z \n    "}function Az(e,t,n,r){var i=n/2,a=r/2;return"\n      M "+e+" "+(t-a)+" \n      a "+i+" "+a+" 0 1 0 0 "+2*a+"\n      a "+i+" "+a+" 0 1 0 0 "+2*-a+"\n      Z\n    "}function Oz(e,t,n,r){var i=r/2,a=n/2;return"\n      M "+e+" "+(t-i)+"\n      L "+(e+a)+" "+t+"\n      L "+e+" "+(t+i)+"\n      L "+(e-a)+" "+t+"\n      Z\n    "}function Iz(e,t,n,r){var i=r/2,a=n/2;return"\n      M "+e+" "+(t-i)+"\n      L "+(e+a)+" "+(t+i)+"\n      L "+(e-a)+" "+(t+i)+"\n      Z\n    "}function Mz(e,t,n,r){var i=r/2,a=n/2*.618;return"\n      M "+(e-a)+" "+(t-i)+"\n      L "+(e+a)+" "+(t-i)+"\n      L "+(e+a)+" "+(t+i)+"\n      L "+(e-a)+" "+(t+i)+"\n      Z\n    "}function Nz(e){var t=e.data,n=e.xField,r=e.measureField,i=e.rangeField,a=e.targetField,o=e.layout,s=[],l=[];t.forEach((function(e,t){var o;e[i].sort((function(e,t){return e-t})),e[i].forEach((function(r,a){var o,l=0===a?r:e[i][a]-e[i][a-1];s.push(((o={rKey:i+"_"+a})[n]=n?e[n]:String(t),o[i]=l,o))})),e[r].forEach((function(i,a){var o;s.push(((o={mKey:e[r].length>1?r+"_"+a:""+r})[n]=n?e[n]:String(t),o[r]=i,o))})),s.push(((o={tKey:""+a})[n]=n?e[n]:String(t),o[a]=e[a],o)),l.push(e[i],e[r],e[a])}));var c=Math.min.apply(Math,l.flat(1/0)),u=Math.max.apply(Math,l.flat(1/0));return c=c>0?0:c,"vertical"===o&&s.reverse(),{min:c,max:u,ds:s}}function Fz(e){var t=e.chart,n=e.options,r=n.bulletStyle,i=n.targetField,a=n.rangeField,o=n.measureField,s=n.xField,l=n.color,c=n.layout,u=n.size,h=n.label,p=Nz(n),d=p.min,f=p.max,m=p.ds;return t.data(m),yF(eN({},e,{options:{xField:s,yField:a,seriesField:"rKey",isStack:!0,label:qp(h,"range"),interval:{color:qp(l,"range"),style:qp(r,"range"),size:qp(u,"range")}}})),t.geometries[0].tooltip(!1),yF(eN({},e,{options:{xField:s,yField:o,seriesField:"mKey",isStack:!0,label:qp(h,"measure"),interval:{color:qp(l,"measure"),style:qp(r,"measure"),size:qp(u,"measure")}}})),vF(eN({},e,{options:{xField:s,yField:i,seriesField:"tKey",label:qp(h,"target"),point:{color:qp(l,"target"),style:qp(r,"target"),size:jh(qp(u,"target"))?function(e){return qp(u,"target")(e)/2}:qp(u,"target")/2,shape:"horizontal"===c?"line":"hyphen"}}})),"horizontal"===c&&t.coordinate().transpose(),Nh(Nh({},e),{ext:{data:{min:d,max:f}}})}function Lz(e){var t,n,r=e.options,i=e.ext,a=r.xAxis,o=r.yAxis,s=r.targetField,l=r.rangeField,c=r.measureField,u=r.xField,h=i.data;return LM(lF(((t={})[u]=a,t[c]=o,t),((n={})[c]={min:null==h?void 0:h.min,max:null==h?void 0:h.max,sync:!0},n[s]={sync:""+c},n[l]={sync:""+c},n)))(e)}function Pz(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.measureField,s=n.rangeField,l=n.targetField;return t.axis(""+s,!1),t.axis(""+l,!1),!1===r?t.axis(""+a,!1):t.axis(""+a,r),!1===i?t.axis(""+o,!1):t.axis(""+o,i),e}function Rz(e){var t=e.chart,n=e.options.legend;return t.removeInteraction("legend-filter"),t.legend(n),t.legend("rKey",!1),t.legend("mKey",!1),t.legend("tKey",!1),e}function Dz(e){var t=e.chart,n=e.options,r=n.label,i=n.measureField,a=n.targetField,o=n.rangeField,s=t.geometries,l=s[0],c=s[1],u=s[2];return qp(r,"range")?l.label(""+o,Nh({layout:[{type:"limit-in-plot"}]},WM(r.range))):l.label(!1),qp(r,"measure")?c.label(""+i,Nh({layout:[{type:"limit-in-plot"}]},WM(r.measure))):c.label(!1),qp(r,"target")?u.label(""+a,Nh({layout:[{type:"limit-in-plot"}]},WM(r.target))):u.label(!1),e}function Bz(e){LM(Fz,Lz,Pz,Rz,iF,Dz,tF,nF,rF)(e)}rk("interval","liquid-fill-gauge",{draw:function(e,t){var n=e.customInfo,r=n,i=r.radius,a=r.shape,o=r.background,s=n.outline,l=n.wave,c=s.border,u=s.distance,h=l.count,p=l.length,d=rp(e.points,(function(e,t){return Math.min(e,t.x)}),1/0),f=this.parsePoint({x:.5,y:.5}),m=this.parsePoint({x:d,y:.5}),g=f.x-m.x,v=Math.min(g,m.y*i),y=function(e){var t=Nh({opacity:1},e.style);return e.color&&!t.fill&&(t.fill=e.color),t}(e),x=function(e){var t=Rp({},{fill:"#fff",fillOpacity:0,lineWidth:4},e.style);return e.color&&!t.stroke&&(t.stroke=e.color),vp(e.opacity)&&(t.opacity=t.strokeOpacity=e.opacity),t}(Rp({},e,s)),E=v-c/2,b={pin:_z,circle:Az,diamond:Oz,triangle:Iz,rect:Mz},C=("function"==typeof a?a:b[a]||b.circle)(f.x,f.y,2*E,2*E),T=t.addGroup({name:"waves"}),w=T.setClip({type:"path",attrs:{path:C}});return function(e,t,n,r,i,a,o,s,l){for(var c=i.fill,u=i.opacity,h=o.getBBox(),p=h.maxX-h.minX,d=h.maxY-h.minY,f=0;f<r;f++){var m=r<=1?0:f/(r-1),g=a.addShape("path",{name:"waterwave-path",attrs:{path:kz(s,h.minY+d*n,l,0,p/32,e,t),fill:c,opacity:wz(.2,.9,m)*u}});try{var v=xL([["t",l,0]]);g.stopAnimate(),g.animate({matrix:v},{duration:wz(2500,5e3,m),repeat:!0})}catch(eh){console.warn("off-screen group animate error!")}}}(f.x,f.y,1-e.points[1].y,h,y,T,w,2*v,p),t.addShape("path",{name:"distance",attrs:{path:C,fill:"transparent",lineWidth:c+2*u,stroke:"transparent"===o?"#fff":o}}),t.addShape("path",{name:"wrap",attrs:Rp(x,{path:C,fill:"transparent",lineWidth:c})}),t}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="liquid",t}Mh(t,e),t.getDefaultOptions=function(){return Tz},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.chart.emit(dd.BEFORE_CHANGE_DATA,OS.fromData(this.chart,dd.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(xz(e)),bz({chart:this.chart,options:this.options},!0),this.chart.emit(dd.AFTER_CHANGE_DATA,OS.fromData(this.chart,dd.AFTER_CHANGE_DATA,null))},t.prototype.getSchemaAdaptor=function(){return Cz}}(BN);var zz=eN({},BN.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bullet",t}Mh(t,e),t.getDefaultOptions=function(){return zz},t.prototype.changeData=function(e){this.updateOption({data:e});var t=Nz(this.options),n=t.min,r=t.max,i=t.ds;Lz({options:this.options,ext:{data:{min:n,max:r}},chart:this.chart}),this.chart.changeData(i)},t.prototype.getSchemaAdaptor=function(){return Bz},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(BN);function Hz(e,t){var n=e.field,r=e.fields;if(ap(n))return n;if($h(n))return console.warn("Invalid field: it must be a string!"),n[0];if(console.warn("Invalid field: it must be a string! will try to get fields instead."),ap(r))return r;if($h(r)&&r.length)return r[0];if(t)return t;throw new TypeError("Invalid field: it must be a string!")}function jz(e){var t,n,r=[];e&&e.each?e.each((function(e){var i,a;e.parent!==t?(t=e.parent,n=0):n+=1;var o=Bh(((null===(i=e.ancestors)||void 0===i?void 0:i.call(e))||[]).map((function(e){return r.find((function(t){return t.name===e.name}))||e})),(function(t){var n=t.depth;return n>0&&n<e.depth}));e.nodeAncestor=o,e.childNodeCount=(null===(a=e.children)||void 0===a?void 0:a.length)||0,e.nodeIndex=n,r.push(e)})):e&&e.eachNode&&e.eachNode((function(e){r.push(e)}));return r}var Gz=["path","nodeIndex","nodeAncestor","childNodeCount","name","depth","height"],$z=eN({},BN.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),Yz={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},Uz=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=Yz,t}return Mh(t,e),t.prototype.click=function(){var e=qp(this.context,["event","data","data"]);if(!e)return!1;this.drill(e),this.drawBreadCrumb()},t.prototype.resetPosition=function(){if(this.breadCrumbGroup){var e=this.context.view.getCoordinate(),t=this.breadCrumbGroup,n=t.getBBox(),r=this.getButtonCfg().position,i={x:e.start.x,y:e.end.y-(n.height+10)};e.isPolar&&(i={x:0,y:0}),"bottom-left"===r&&(i={x:e.start.x,y:e.start.y});var a=Bk.transform(null,[["t",i.x+0,i.y+n.height+5]]);t.setMatrix(a)}},t.prototype.back=function(){id(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},t.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},t.prototype.drill=function(e){var t=this.context.view,n=qp(t,["interactions","drill-down","cfg","transformData"],(function(e){return e})),r=n(Nh({data:e.data},e["hierarchy-data-transform-params"]));t.changeData(r);for(var i=[],a=e;a;){var o=a.data;i.unshift({id:o.name+"_"+a.height+"_"+a.depth,name:o.name,children:n(Nh({data:o},e["hierarchy-data-transform-params"]))}),a=a.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(i)},t.prototype.backTo=function(e){if(e&&!(e.length<=0)){var t=this.context.view,n=cp(e).children;t.changeData(n),e.length>1?(this.historyCache=e,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},t.prototype.getButtonCfg=function(){var e=this.context.view,t=qp(e,["interactions","drill-down","cfg","drillDownConfig"]);return eN(this.breadCrumbCfg,null==t?void 0:t.breadCrumb,this.cfg)},t.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},t.prototype.drawBreadCrumbGroup=function(){var e=this,t=this.getButtonCfg(),n=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:"drilldown-bread-crumb"});var r=0;n.forEach((function(i,a){var o=e.breadCrumbGroup.addShape({type:"text",id:i.id,name:"drilldown-bread-crumb_"+i.name+"_text",attrs:Nh(Nh({text:0!==a||Gh(t.rootText)?i.name:t.rootText},t.textStyle),{x:r,y:0})}),s=o.getBBox();if(r+=s.width+4,o.on("click",(function(t){var r,i=t.target.get("id");if(i!==(null===(r=cp(n))||void 0===r?void 0:r.id)){var a=n.slice(0,n.findIndex((function(e){return e.id===i}))+1);e.backTo(a)}})),o.on("mouseenter",(function(e){var r;e.target.get("id")!==(null===(r=cp(n))||void 0===r?void 0:r.id)?o.attr(t.activeTextStyle):o.attr({cursor:"default"})})),o.on("mouseleave",(function(){o.attr(t.textStyle)})),a<n.length-1){var l=e.breadCrumbGroup.addShape({type:"text",name:t.name+"_"+i.name+"_divider",attrs:Nh(Nh({text:t.dividerText},t.textStyle),{x:r,y:0})}).getBBox();r+=l.width+4}}))},t.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},t.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),e.prototype.destroy.call(this)},t}(cw);function Vz(e,t){return e.parent===t.parent?1:2}function Wz(e,t){return e+t.x}function Xz(e,t){return Math.max(e,t.y)}function qz(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Kz(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=Zz)):void 0===t&&(t=Qz);for(var n,r,i,a,o,s=new tH(e),l=[s];n=l.pop();)if((i=t(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)l.push(r=i[a]=new tH(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(eH)}function Qz(e){return e.children}function Zz(e){return Array.isArray(e)?e[1]:null}function Jz(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function eH(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function tH(e){this.data=e,this.depth=this.height=0,this.parent=null}function nH(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,a=[];r<i;)t=e[r],n&&aH(n,t)?++r:(n=sH(a=rH(a,t)),r=0);return n}function rH(e,t){var n,r;if(oH(t,e))return[t];for(n=0;n<e.length;++n)if(iH(t,e[n])&&oH(lH(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(iH(lH(e[n],e[r]),t)&&iH(lH(e[n],t),e[r])&&iH(lH(e[r],t),e[n])&&oH(cH(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function iH(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function aH(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function oH(e,t){for(var n=0;n<t.length;++n)if(!aH(e,t[n]))return!1;return!0}function sH(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return lH(e[0],e[1]);case 3:return cH(e[0],e[1],e[2])}var t}function lH(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,s=t.r,l=a-n,c=o-r,u=s-i,h=Math.sqrt(l*l+c*c);return{x:(n+a+l/h*u)/2,y:(r+o+c/h*u)/2,r:(h+i+s)/2}}function cH(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,s=t.y,l=t.r,c=n.x,u=n.y,h=n.r,p=r-o,d=r-c,f=i-s,m=i-u,g=l-a,v=h-a,y=r*r+i*i-a*a,x=y-o*o-s*s+l*l,E=y-c*c-u*u+h*h,b=d*f-p*m,C=(f*E-m*x)/(2*b)-r,T=(m*g-f*v)/b,w=(d*x-p*E)/(2*b)-i,S=(p*v-d*g)/b,k=T*T+S*S-1,_=2*(a+C*T+w*S),A=C*C+w*w-a*a,O=-(k?(_+Math.sqrt(_*_-4*k*A))/(2*k):A/_);return{x:r+C+T*O,y:i+w+S*O,r:O}}function uH(e,t,n){var r,i,a,o,s=e.x-t.x,l=e.y-t.y,c=s*s+l*l;c?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*s-a*l,n.y=e.y-r*l+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*s-a*l,n.y=t.y+r*l+a*s)):(n.x=t.x+n.r,n.y=t.y)}function hH(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function pH(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function dH(e){this._=e,this.next=null,this.previous=null}function fH(e){if(!(a=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,a,o,s,l,c,u,h,p;if((n=e[0]).x=0,n.y=0,!(a>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;uH(r,n,i=e[2]),n=new dH(n),r=new dH(r),i=new dH(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<a;++l){uH(n._,r._,i=e[l]),i=new dH(i),c=r.next,u=n.previous,h=r._.r,p=n._.r;do{if(h<=p){if(hH(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}h+=c._.r,c=c.next}else{if(hH(u._,i._)){(n=u).next=r,r.previous=n,--l;continue e}p+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=pH(n);(i=i.next)!==r;)(s=pH(i))<o&&(n=i,o=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=nH(n),l=0;l<a;++l)(n=e[l]).x-=i.x,n.y-=i.y;return i.r}function mH(e){return null==e?null:gH(e)}function gH(e){if("function"!=typeof e)throw new Error;return e}function vH(){return 0}function yH(e){return function(){return e}}function xH(e){return Math.sqrt(e.value)}function EH(){var e=null,t=1,n=1,r=vH;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(bH(e)).eachAfter(CH(r,.5)).eachBefore(TH(1)):i.eachBefore(bH(xH)).eachAfter(CH(vH,1)).eachAfter(CH(r,i.r/Math.min(t,n))).eachBefore(TH(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=mH(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:yH(+e),i):r},i}function bH(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function CH(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,s=e(n)*t||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=fH(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function TH(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function wH(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function SH(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,c=e.value&&(r-t)/e.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}function kH(){var e=1,t=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(function(e,t){return function(r){r.children&&SH(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(t,a)),r&&i.eachBefore(wH),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}tH.prototype=Kz.prototype={constructor:tH,count:function(){return this.eachAfter(qz)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,a=this,o=[a],s=[],l=-1;a=o.pop();)if(s.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=s.pop();)e.call(t,a,++l,this);return this},eachBefore:function(e,t){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(e.call(t,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return Kz(this).eachBefore(Jz)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,a=[i];do{for(e=a.reverse(),a=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n])}while(a.length)}};var _H={depth:-1},AH={};function OH(e){return e.id}function IH(e){return e.parentId}function MH(e,t){return e.parent===t.parent?1:2}function NH(e){var t=e.children;return t?t[0]:e.t}function FH(e){var t=e.children;return t?t[t.length-1]:e.t}function LH(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function PH(e,t,n){return e.a.parent===t.parent?e.a:n}function RH(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function DH(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,c=e.value&&(i-n)/e.value;++s<l;)(a=o[s]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}RH.prototype=Object.create(tH.prototype);var BH=(1+Math.sqrt(5))/2;function zH(e,t,n,r,i,a){for(var o,s,l,c,u,h,p,d,f,m,g,v=[],y=t.children,x=0,E=0,b=y.length,C=t.value;x<b;){l=i-n,c=a-r;do{u=y[E++].value}while(!u&&E<b);for(h=p=u,g=u*u*(m=Math.max(c/l,l/c)/(C*e)),f=Math.max(p/g,g/h);E<b;++E){if(u+=s=y[E].value,s<h&&(h=s),s>p&&(p=s),g=u*u*m,(d=Math.max(p/g,g/h))>f){u-=s;break}f=d}v.push(o={value:u,dice:l<c,children:y.slice(x,E)}),o.dice?SH(o,n,r,i,C?r+=c*u/C:a):DH(o,n,r,C?n+=l*u/C:i,a),C-=u,x=E}return v}var HH=function e(t){function n(e,n,r,i,a){zH(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(BH);function jH(){var e=HH,t=!1,n=1,r=1,i=[0],a=vH,o=vH,s=vH,l=vH,c=vH;function u(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(h),i=[0],t&&e.eachBefore(wH),e}function h(t){var n=i[t.depth],r=t.x0+n,u=t.y0+n,h=t.x1-n,p=t.y1-n;h<r&&(r=h=(r+h)/2),p<u&&(u=p=(u+p)/2),t.x0=r,t.y0=u,t.x1=h,t.y1=p,t.children&&(n=i[t.depth+1]=a(t)/2,r+=c(t)-n,u+=o(t)-n,(h-=s(t)-n)<r&&(r=h=(r+h)/2),(p-=l(t)-n)<u&&(u=p=(u+p)/2),e(t,r,u,h,p))}return u.round=function(e){return arguments.length?(t=!!e,u):t},u.size=function(e){return arguments.length?(n=+e[0],r=+e[1],u):[n,r]},u.tile=function(t){return arguments.length?(e=gH(t),u):e},u.padding=function(e){return arguments.length?u.paddingInner(e).paddingOuter(e):u.paddingInner()},u.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:yH(+e),u):a},u.paddingOuter=function(e){return arguments.length?u.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):u.paddingTop()},u.paddingTop=function(e){return arguments.length?(o="function"==typeof e?e:yH(+e),u):o},u.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:yH(+e),u):s},u.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:yH(+e),u):l},u.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:yH(+e),u):c},u}var GH=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,s,l,c,u,h=-1,p=o.length,d=e.value;++h<p;){for(l=(s=o[h]).children,c=s.value=0,u=l.length;c<u;++c)s.value+=l[c].value;s.dice?SH(s,n,r,i,d?r+=(a-r)*s.value/d:a):DH(s,n,r,d?n+=(i-n)*s.value/d:i,a),d-=s.value}else e._squarify=o=zH(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(BH),$H=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",cluster:function(){var e=Vz,t=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(Wz,0)/e.length}(n),t.y=function(e){return 1+e.reduce(Xz,0)}(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),l=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),c=s.x-e(s,l)/2,u=l.x+e(l,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-c)/(u-c)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},hierarchy:Kz,pack:EH,packSiblings:function(e){return fH(e),e},packEnclose:nH,partition:kH,stratify:function(){var e=OH,t=IH;function n(n){var r,i,a,o,s,l,c,u=Array.from(n),h=u.length,p=new Map;for(i=0;i<h;++i)r=u[i],s=u[i]=new tH(r),null!=(l=e(r,i,n))&&(l+="")&&(c=s.id=l,p.set(c,p.has(c)?AH:s)),null!=(l=t(r,i,n))&&(l+="")&&(s.parent=l);for(i=0;i<h;++i)if(l=(s=u[i]).parent){if(!(o=p.get(l)))throw new Error("missing: "+l);if(o===AH)throw new Error("ambiguous: "+l);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=_H,a.eachBefore((function(e){e.depth=e.parent.depth+1,--h})).eachBefore(eH),a.parent=null,h>0)throw new Error("cycle");return a}return n.id=function(t){return arguments.length?(e=gH(t),n):e},n.parentId=function(e){return arguments.length?(t=gH(e),n):t},n},tree:function(){var e=MH,t=1,n=1,r=null;function i(i){var l=function(e){for(var t,n,r,i,a,o=new RH(e,0),s=[o];t=s.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=t.children[i]=new RH(r[i],i)),n.parent=t;return(o.parent=new RH(null,0)).children=[o],o}(i);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),r)i.eachBefore(s);else{var c=i,u=i,h=i;i.eachBefore((function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>h.depth&&(h=e)}));var p=c===u?1:e(c,u)/2,d=p-c.x,f=t/(u.x+p+d),m=n/(h.depth||1);i.eachBefore((function(e){e.x=(e.x+d)*f,e.y=e.depth*m}))}return i}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,a=t,o=t,s=n,l=a.parent.children[0],c=a.m,u=o.m,h=s.m,p=l.m;s=FH(s),a=NH(a),s&&a;)l=NH(l),(o=FH(o)).a=t,(i=s.z+h-a.z-c+e(s._,a._))>0&&(LH(PH(s,t,r),t,i),c+=i,u+=i),h+=s.m,c+=a.m,p+=l.m,u+=o.m;s&&!FH(o)&&(o.t=s,o.m+=h-u),a&&!NH(l)&&(l.t=a,l.m+=c-p,r=t)}return r}(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},treemap:jH,treemapBinary:function(e,t,n,r,i){var a,o,s=e.children,l=s.length,c=new Array(l+1);for(c[0]=o=a=0;a<l;++a)c[a+1]=o+=s[a].value;!function e(t,n,r,i,a,o,l){if(t>=n-1){var u=s[t];return u.x0=i,u.y0=a,u.x1=o,void(u.y1=l)}var h=c[t],p=r/2+h,d=t+1,f=n-1;for(;d<f;){var m=d+f>>>1;c[m]<p?d=m+1:f=m}p-c[d-1]<c[d]-p&&t+1<d&&--d;var g=c[d]-h,v=r-g;if(o-i>l-a){var y=r?(i*v+o*g)/r:o;e(t,d,g,i,a,y,l),e(d,n,v,y,a,o,l)}else{var x=r?(a*v+l*g)/r:l;e(t,d,g,i,a,o,x),e(d,n,v,i,x,o,l)}}(0,l,e.value,t,n,r,i)},treemapDice:SH,treemapSlice:DH,treemapSliceDice:function(e,t,n,r,i){(1&e.depth?DH:SH)(e,t,n,r,i)},treemapSquarify:HH,treemapResquarify:GH}),YH={field:"value",size:[1,1],round:!1,padding:0,sort:function(e,t){return t.value-e.value},as:["x","y"],ignoreParentValue:!0};function UH(e,t){var n,r=(t=Rp({},YH,t)).as;if(!$h(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=Hz(t)}catch(eh){console.warn(eh)}var i,a=(i=e,kH().size(t.size).round(t.round).padding(t.padding)(Kz(i).sum((function(e){return id(e.children)?t.ignoreParentValue?0:e[n]-rp(e.children,(function(e,t){return e+t[n]}),0):e[n]})).sort(t.sort))),o=r[0],s=r[1];return a.each((function(e){var t,n;e[o]=[e.x0,e.x1,e.x1,e.x0],e[s]=[e.y1,e.y1,e.y0,e.y0],e.name=e.name||(null===(t=e.data)||void 0===t?void 0:t.name)||(null===(n=e.data)||void 0===n?void 0:n.label),e.data.name=e.name,["x0","x1","y0","y1"].forEach((function(t){-1===r.indexOf(t)&&delete e[t]}))})),jz(a)}var VH,WH={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(e,t){return t.value-e.value},ratio:.5*(1+Math.sqrt(5))};function XH(e,t){var n,r=(t=Rp({},WH,t)).as;if(!$h(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=Hz(t)}catch(eh){console.warn(eh)}var i,a,o,s=(i=t.tile,a=t.ratio,"treemapSquarify"===i?$H[i].ratio(a):$H[i]),l=(o=e,jH().tile(s).size(t.size).round(t.round).padding(t.padding).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(Kz(o).sum((function(e){return t.ignoreParentValue&&e.children?0:e[n]})).sort(t.sort))),c=r[0],u=r[1];return l.each((function(e){e[c]=[e.x0,e.x1,e.x1,e.x0],e[u]=[e.y1,e.y1,e.y0,e.y0],["x0","x1","y0","y1"].forEach((function(t){-1===r.indexOf(t)&&delete e[t]}))})),jz(l)}function qH(e){var t=e.data,n=e.colorField,r=e.rawFields,i=e.hierarchyConfig,a=void 0===i?{}:i,o=a.activeDepth,s={partition:UH,treemap:XH},l=e.seriesField,c=e.type||"partition",u=s[c](t,Nh(Nh({field:l||"value"},Jp(a,["activeDepth"])),{type:"hierarchy."+c,as:["x","y"]})),h=[];return u.forEach((function(e){var t,i,s,c,u,p;if(0===e.depth)return null;if(o>0&&e.depth>o)return null;for(var d=e.data.name,f=Nh({},e);f.depth>1;)d=(null===(i=f.parent.data)||void 0===i?void 0:i.name)+" / "+d,f=f.parent;var m=Nh(Nh(Nh({},PM(e.data,Lh(r||[],[a.field]))),((t={}).path=d,t["ancestor-node"]=f.data.name,t)),e);l&&(m[l]=e.data[l]||(null===(c=null===(s=e.parent)||void 0===s?void 0:s.data)||void 0===c?void 0:c[l])),n&&(m[n]=e.data[n]||(null===(p=null===(u=e.parent)||void 0===u?void 0:u.data)||void 0===p?void 0:p[n])),m.ext=a,m["hierarchy-data-transform-params"]={hierarchyConfig:a,colorField:n,rawFields:r},h.push(m)})),h}function KH(e){var t,n=e.chart,r=e.options,i=r.color,a=r.colorField,o=void 0===a?"ancestor-node":a,s=r.sunburstStyle,l=r.rawFields,c=void 0===l?[]:l,u=qH(r);return n.data(u),s&&(t=function(e){return eN({},{fillOpacity:Math.pow(.85,e.depth)},jh(s)?s(e):s)}),xF(eN({},e,{options:{xField:"x",yField:"y",seriesField:o,rawFields:op(Lh(Gz,c)),polygon:{color:i,style:t}}})),e}function QH(e){return e.chart.axis(!1),e}function ZH(e){var t=e.chart,n=e.options.label,r=HM(t,"polygon");if(n){var i=n.fields,a=void 0===i?["name"]:i,o=n.callback,s=Fh(n,["fields","callback"]);r.label({fields:a,callback:o,cfg:WM(s)})}else r.label(!1);return e}function JH(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius,a=n.reflect,o=t.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),e}function ej(e){var t,n=e.options,r=n.hierarchyConfig,i=n.meta;return LM(lF({},((t={}).value=qp(i,qp(r,["field"],"value")),t)))(e)}function tj(e){var t=e.chart,n=e.options.tooltip;if(!1===n)t.tooltip(!1);else{var r=n;qp(n,"fields")||(r=eN({},{customItems:function(e){return e.map((function(e){var n=qp(t.getOptions(),"scales"),r=qp(n,["path","formatter"],(function(e){return e})),i=qp(n,["value","formatter"],(function(e){return e}));return Nh(Nh({},e),{name:r(e.data.path),value:i(e.data.value)})}))}},r)),t.tooltip(r)}return e}function nj(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return(null==t?void 0:t.enabled)?eN({},e,{interactions:Lh(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:qH}}])}):e}function rj(e){var t=e.chart,n=e.options,r=n.drilldown;return nF({chart:t,options:nj(n)}),(null==r?void 0:r.enabled)&&(t.appendPadding=hN(t.appendPadding,qp(r,["breadCrumb","position"]))),e}function ij(e){return LM(iF,JN("sunburstStyle"),KH,QH,ej,eF,JH,tj,ZH,rj,rF,cF())(e)}function aj(e){var t=qp(e,["event","data","data"],{});return $h(t.children)&&t.children.length>0}function oj(e){var t=e.view.getCoordinate(),n=t.innerRadius;if(n){var r=e.event,i=r.x,a=r.y,o=t.center,s=o.x,l=o.y,c=t.getRadius()*n;return Math.sqrt(Math.pow(s-i,2)+Math.pow(l-a,2))<c}return!1}dw("drill-down-action",Uz),Jw("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:aj},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:oj}],start:[{trigger:"element:click",isEnable:aj,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:oj,action:["drill-down-action:back"]}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="sunburst",t}Mh(t,e),t.getDefaultOptions=function(){return $z},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ij},t.SUNBURST_ANCESTOR_FIELD="ancestor-node",t.SUNBURST_PATH_FIELD="path",t.NODE_ANCESTORS_FIELD="nodeAncestor"}(BN);var sj={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(VH={},VH.range={sync:"v"},VH.percent={sync:"v",tickCount:5,tickInterval:.2},VH),animation:!1};function lj(e){var t;return[(t={},t.percent=mp(e,0,1),t)]}function cj(e,t){var n=qp(t,["ticks"],[]);return function(e,t){return e.map((function(n,r){var i;return(i={}).range=n-(e[r-1]||0),i.type=""+r,i.percent=t,i})).filter((function(e){return!!e.range}))}(id(n)?n:[0,mp(e,0,1),1],e)}function uj(e){var t=e.chart,n=e.options,r=n.percent,i=n.range,a=n.radius,o=n.innerRadius,s=n.startAngle,l=n.endAngle,c=n.axis,u=n.indicator,h=n.gaugeStyle,p=n.type,d=n.meter,f=i.color,m=i.width;if(u){var g=lj(r),v=t.createView({id:"indicator-view"});v.data(g),v.point().position("percent*1").shape(u.shape||"gauge-indicator").customInfo({defaultColor:t.getTheme().defaultColor,indicator:u}),v.coordinate("polar",{startAngle:s,endAngle:l,radius:o*a}),v.axis("percent",c),v.scale("percent",PM(c,zN))}var y=cj(r,n.range),x=t.createView({id:"range-view"});return x.data(y),yF({chart:x,options:{xField:"1",yField:"range",seriesField:"type",rawFields:["percent"],isStack:!0,interval:{color:ap(f)?[f,"#f0f0f0"]:f,style:h,shape:"meter"===p?"meter-gauge":null},args:{zIndexReversed:!0},minColumnWidth:m,maxColumnWidth:m}}).ext.geometry.customInfo({meter:d}),x.coordinate("polar",{innerRadius:o,radius:a,startAngle:s,endAngle:l}).transpose(),e}function hj(e){var t;return LM(lF(((t={range:{min:0,max:1,maxLimit:1,minLimit:0}}).percent={},t)))(e)}function pj(e,t){var n=e.chart,r=e.options,i=r.statistic,a=r.percent;if(n.getController("annotation").clear(!0),i){var o=i.content,s=void 0;o&&(s=eN({},{content:(100*a).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),function(e,t,n){var r=t.statistic;[r.title,r.content].forEach((function(t){if(t){var r=jh(t.style)?t.style(n):t.style;e.annotation().html(Nh({position:["50%","100%"],html:function(e,i){var a=i.getCoordinate(),o=i.views[0].getCoordinate(),s=o.getCenter(),l=o.getRadius(),c=Math.max(Math.sin(o.startAngle),Math.sin(o.endAngle))*l,u=s.y+c-a.y.start-parseFloat(qp(r,"fontSize",0)),h=a.getRadius()*a.innerRadius*2;rN(e,Nh({width:h+"px",transform:"translate(-50%, "+u+"px)"},nN(r)));var p=i.getData();if(t.customHtml)return t.customHtml(e,i,n,p);var d=t.content;return t.formatter&&(d=t.formatter(n,p)),d?ap(d)?d:""+d:"<div></div>"}},PM(t,["offsetX","offsetY","rotate","style","formatter"])))}}))}(n,{statistic:Nh(Nh({},i),{content:s})},{percent:a})}return t&&n.render(!0),e}function dj(e){var t=e.chart;return t.legend(!1),t.tooltip(!1),e}function fj(e){return LM(iF,rF,uj,hj,pj,nF,cF(),dj)(e)}rk("point","gauge-indicator",{draw:function(e,t){var n=e.customInfo,r=n.indicator,i=n.defaultColor,a=r,o=a.pointer,s=a.pin,l=t.addGroup(),c=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:Nh({x1:c.x,y1:c.y,x2:e.x,y2:e.y,stroke:i},o.style)}),s&&l.addShape("circle",{name:"pin",attrs:Nh({x:c.x,y:c.y,stroke:i},s.style)}),l}}),rk("interval","meter-gauge",{draw:function(e,t){var n=e.customInfo.meter,r=void 0===n?{}:n,i=r.steps,a=void 0===i?50:i,o=r.stepRatio,s=void 0===o?.5:o;a=a<1?1:a,s=mp(s,0,1);var l=this.coordinate,c=l.startAngle,u=l.endAngle,h=0;s>0&&s<1&&(h=(u-c)/a/(s/(1-s)+1-1/a));for(var p=h/(1-s)*s,d=t.addGroup(),f=this.coordinate.getCenter(),m=this.coordinate.getRadius(),g=Bk.getAngle(e,this.coordinate),v=g.startAngle,y=g.endAngle,x=v;x<y;){var E=void 0,b=(x-c)%(p+h);E=b<p?x+(p-b):(x+=p+h-b)+p;var C=Bk.getSectorPath(f.x,f.y,m,x,Math.min(E,y),m*this.coordinate.innerRadius);d.addShape("path",{name:"meter-gauge",attrs:{path:C,fill:e.color,stroke:e.color,lineWidth:.5}}),x=E+h}return d}});var mj=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="gauge",t}return Mh(t,e),t.getDefaultOptions=function(){return sj},t.prototype.changeData=function(e){this.chart.emit(dd.BEFORE_CHANGE_DATA,OS.fromData(this.chart,dd.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e});var t=this.chart.views.find((function(e){return"indicator-view"===e.id}));t&&t.data(lj(e));var n=this.chart.views.find((function(e){return"range-view"===e.id}));n&&n.data(cj(e,this.options.range)),pj({chart:this.chart,options:this.options},!0),this.chart.emit(dd.AFTER_CHANGE_DATA,OS.fromData(this.chart,dd.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return fj},t}(BN),gj="$$yField$$",vj={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function yj(e,t,n,r){return function(e,t,n,r,i){var a,o=[];if(rp(e,(function(e,t){var i;BM(OM.WARN,vp(t[n]),t[n]+" is not a valid number");var a=Fp(t[n])?null:t[n];return o.push(Nh(Nh({},t),((i={})[r]=[e,e+a],i))),e+a}),0),o.length&&i){var s=qp(o,[[e.length-1],r,[1]]);o.push(((a={})[t]=i.label,a[n]=s,a[r]=[0,s],a))}return o}(e,t,n,gj,r).map((function(t,n){var r;return Yh(t)?Nh(Nh({},t),((r={}).$$absoluteField$$=t.$$yField$$[1],r.$$diffField$$=t.$$yField$$[1]-t.$$yField$$[0],r.$$isTotal$$=n===e.length,r)):t}))}function xj(e){var t=e.options,n=t.locale,r=t.total,i=gN(n).get(["waterfall","total"]);return r&&"string"!=typeof r.label&&i&&(e.options.total.label=i),e}function Ej(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.total,s=n.leaderLine,l=n.columnWidthRatio,c=n.waterfallStyle,u=n.risingFill,h=n.fallingFill,p=n.color;return t.data(yj(r,i,a,o)),yF(eN({},e,{options:{xField:i,yField:gj,seriesField:i,rawFields:[a,"$$diffField$$","$$isTotal$$",gj],widthRatio:l,interval:{style:c,shape:"waterfall",color:p||function(e){return qp(e,["$$isTotal$$"])?qp(o,["style","fill"],""):qp(e,[gj,1])-qp(e,[gj,0])>0?u:h}}}})).ext.geometry.customInfo({leaderLine:s}),e}function bj(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.meta,c=eN({},{alias:s},qp(l,s));return LM(lF(((t={})[o]=i,t[s]=a,t.$$yField$$=a,t),eN({},l,((n={}).$$yField$$=c,n.$$diffField$$=c,n.$$absoluteField$$=c,n))))(e)}function Cj(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?(t.axis(o,!1),t.axis(gj,!1)):(t.axis(o,i),t.axis(gj,i)),e}function Tj(e){var t=e.chart,n=e.options,r=n.legend,i=n.total,a=n.risingFill,o=n.fallingFill,s=gN(n.locale);if(!1===r)t.legend(!1);else{var l=[{name:s.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:s.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&l.push({name:i.label||"",value:"total",marker:{symbol:"square",style:eN({},{r:5},qp(i,"style"))}}),t.legend(eN({},{custom:!0,position:"top",items:l},r)),t.removeInteraction("legend-filter")}return e}function wj(e){var t=e.chart,n=e.options,r=n.label,i=n.labelMode,a=n.xField,o=HM(t,"interval");if(r){var s=r.callback,l=Fh(r,["callback"]);o.label({fields:"absolute"===i?["$$absoluteField$$",a]:["$$diffField$$",a],callback:s,cfg:WM(l)})}else o.label(!1);return e}function Sj(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.xField,a=n.yField;if(!1!==r){t.tooltip(Nh({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=t.geometries[0];(null==r?void 0:r.formatter)?o.tooltip(i+"*"+a,r.formatter):o.tooltip(a)}else t.tooltip(!1);return e}function kj(e){return LM(xj,iF,Ej,bj,Cj,Tj,Sj,wj,aF,nF,rF,cF())(e)}function _j(e,t,n){var r=n.map((function(e){return e[t]})).filter((function(e){return void 0!==e})),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(e)%360;return a?360*i/a:i}function Aj(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.color,a=n.tooltip,o=n.colorField,s=n.type,l=n.xField,c=n.yField,u=cN(n.data,c);return t.data(u),yF(eN({},e,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:"line"===s?"line":"intervel"},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}})),"line"===s&&vF({chart:t,options:{xField:l,yField:c,seriesField:o,point:{shape:"circle",color:i}}}),e}function Oj(e){var t,n=e.options,r=n.yField,i=n.xField,a=n.data,o=n.isStack,s=n.isGroup,l=n.colorField,c=n.maxAngle,u=cN(o&&!s&&l?function(e,t,n){var r=[];return e.forEach((function(e){var i=r.find((function(n){return n[t]===e[t]}));i?i[n]+=e[n]||null:r.push(Nh({},e))})),r}(a,i,r):a,r);return LM(lF(((t={})[r]={min:0,max:_j(c,r,u)},t)))(e)}function Ij(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),e}function Mj(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis;return t.axis(r,i),e}function Nj(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=HM(t,"interval");if(r){var o=r.callback,s=Fh(r,["callback"]);a.label({fields:[i],callback:o,cfg:Nh(Nh({},WM(s)),{type:"polar"})})}else a.label(!1);return e}function Fj(e){return LM(JN("barStyle"),Aj,Oj,Mj,Ij,nF,rF,iF,tF,eF,cF(),Nj)(e)}rk("interval","waterfall",{draw:function(e,t){var n=e.customInfo,r=e.points,i=e.nextPoints,a=t.addGroup(),o=this.parsePath(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=0===n?"M":"L";t.push([i,r.x,r.y])}}var a=e[0];return t.push(["L",a.x,a.y]),t.push(["z"]),t}(r)),s=function(e){return eN({},e.defaultStyle,e.style,{fill:e.color})}(e);a.addShape("path",{attrs:Nh(Nh({},s),{path:o})});var l=qp(n,"leaderLine");if(l&&i){var c=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(c[1]=["L",i[1].x,i[1].y]),c=this.parsePath(c),a.addShape("path",{attrs:Nh({path:c},l.style||{})})}return a}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="waterfall",t}Mh(t,e),t.getDefaultOptions=function(){return vj},t.prototype.changeData=function(e){var t=this.options,n=t.xField,r=t.yField,i=t.total;this.updateOption({data:e}),this.chart.changeData(yj(e,n,r,i))},t.prototype.getSchemaAdaptor=function(){return kj},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(BN);var Lj=eN({},BN.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="radial-bar",t}Mh(t,e),t.getDefaultOptions=function(){return Lj},t.prototype.changeData=function(e){this.updateOption({data:e}),Oj({chart:this.chart,options:this.options}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Fj}}(BN);function Pj(e,t,n,r,i){var a=[];t.forEach((function(t){r.forEach((function(r){var i,o=((i={})[e]=r[e],i[n]=t,i[t]=r[t],i);a.push(o)}))}));var o=Object.values(dp(a,n)),s=o[0],l=void 0===s?[]:s,c=o[1],u=void 0===c?[]:c;return i?[l.reverse(),u.reverse()]:[l,u]}function Rj(e){return"vertical"!==e}function Dj(e,t,n){var r=t[0],i=t[1],a=r.autoPadding,o=i.autoPadding,s=e.__axisPosition,l=s.layout,c=s.position;if(Rj(l)&&"top"===c&&(r.autoPadding=n.instance(a.top,0,a.bottom,a.left),i.autoPadding=n.instance(o.top,a.left,o.bottom,0)),Rj(l)&&"bottom"===c&&(r.autoPadding=n.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=n.instance(o.top,o.right,o.bottom,a.right/2+5)),!Rj(l)&&"bottom"===c){var u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,a.bottom/2+5,u),i.autoPadding=n.instance(a.bottom/2+5,o.right,o.bottom,u)}if(!Rj(l)&&"top"===c){u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,0,u),i.autoPadding=n.instance(0,o.right,a.top,u)}}function Bj(e){var t,n,r=e.chart,i=e.options,a=i.data,o=i.xField,s=i.yField,l=i.color,c=i.barStyle,u=i.widthRatio,h=i.legend,p=i.layout,d=Pj(o,s,"series-field-key",a,Rj(p));h?r.legend("series-field-key",h):!1===h&&r.legend(!1);var f=d[0],m=d[1];return Rj(p)?((t=r.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:"first-axes-view"})).coordinate().transpose().reflect("x"),(n=r.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().transpose(),t.data(f),n.data(m)):(t=r.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:"first-axes-view"}),(n=r.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().reflect("y"),t.data(f),n.data(m)),yF(eN({},e,{chart:t,options:{widthRatio:u,xField:o,yField:s[0],seriesField:"series-field-key",interval:{color:l,style:c}}})),yF(eN({},e,{chart:n,options:{xField:o,yField:s[1],seriesField:"series-field-key",widthRatio:u,interval:{color:l,style:c}}})),e}function zj(e){var t,n,r,i=e.options,a=e.chart,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=YM(a,"first-axes-view"),h=YM(a,"second-axes-view"),p={};return Vh((null==i?void 0:i.meta)||{}).map((function(e){qp(null==i?void 0:i.meta,[e,"alias"])&&(p[e]=i.meta[e].alias)})),a.scale(((t={})["series-field-key"]={sync:!0,formatter:function(e){return qp(p,e,e)}},t)),lF(((n={})[l]=o,n[c[0]]=s[c[0]],n))(eN({},e,{chart:u})),lF(((r={})[l]=o,r[c[1]]=s[c[1]],r))(eN({},e,{chart:h})),e}function Hj(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=n.layout,l=YM(t,"first-axes-view"),c=YM(t,"second-axes-view");return"bottom"===(null==r?void 0:r.position)?c.axis(a,Nh(Nh({},r),{label:{formatter:function(){return""}}})):c.axis(a,!1),!1===r?l.axis(a,!1):l.axis(a,Nh({position:Rj(s)?"top":"bottom"},r)),!1===i?(l.axis(o[0],!1),c.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),c.axis(o[1],i[o[1]])),t.__axisPosition={position:l.getOptions().axes[a].position,layout:s},e}function jj(e){var t=e.chart;return nF(eN({},e,{chart:YM(t,"first-axes-view")})),nF(eN({},e,{chart:YM(t,"second-axes-view")})),e}function Gj(e){var t=e.chart,n=e.options,r=n.yField,i=n.yAxis;return uF(eN({},e,{chart:YM(t,"first-axes-view"),options:{yAxis:i[r[0]]}})),uF(eN({},e,{chart:YM(t,"second-axes-view"),options:{yAxis:i[r[1]]}})),e}function $j(e){var t=e.chart;return iF(eN({},e,{chart:YM(t,"first-axes-view")})),iF(eN({},e,{chart:YM(t,"second-axes-view")})),e}function Yj(e){var t=e.chart;return rF(eN({},e,{chart:YM(t,"first-axes-view")})),rF(eN({},e,{chart:YM(t,"second-axes-view")})),e}function Uj(e){var t,n,r=this,i=e.chart,a=e.options,o=a.label,s=a.yField,l=a.layout,c=YM(i,"first-axes-view"),u=YM(i,"second-axes-view"),h=HM(c,"interval"),p=HM(u,"interval");if(o){var d=o.callback,f=Fh(o,["callback"]);f.position||(f.position="middle"),void 0===f.offset&&(f.offset=2);var m=Nh({},f);if(Rj(l)){var g=(null===(t=m.style)||void 0===t?void 0:t.textAlign)||("middle"===f.position?"center":"left");f.style=eN({},f.style,{textAlign:g});m.style=eN({},m.style,{textAlign:{left:"right",right:"left",center:"center"}[g]})}else{var v={top:"bottom",bottom:"top",middle:"middle"};"string"==typeof f.position?f.position=v[f.position]:"function"==typeof f.position&&(f.position=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return v[f.position.apply(r,e)]});var y=(null===(n=m.style)||void 0===n?void 0:n.textBaseline)||"bottom";m.style=eN({},m.style,{textBaseline:y});f.style=eN({},f.style,{textBaseline:{top:"bottom",bottom:"top",middle:"middle"}[y]})}h.label({fields:[s[0]],callback:d,cfg:WM(m)}),p.label({fields:[s[1]],callback:d,cfg:WM(f)})}else h.label(!1),p.label(!1);return e}function Vj(e){return LM(Bj,zj,Hj,Gj,$j,Uj,tF,jj,Yj)(e)}function Wj(e,t){if($h(e))return e.find((function(e){return e.type===t}))}function Xj(e,t){var n=Wj(e,t);return n&&!1!==n.enable}function qj(e){var t=e.interactions,n=e.drilldown;return qp(n,"enabled")||Xj(t,"treemap-drill-down")}function Kj(e){var t=e.data,n=e.colorField,r=e.enableDrillDown,i=e.hierarchyConfig,a=XH(t,Nh(Nh({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach((function(e){if(0===e.depth)return null;if(r&&1!==e.depth)return null;if(!r&&e.children)return null;var a=e.ancestors().map((function(e){return{data:e.data,height:e.height,value:e.value}})),s=r&&$h(t.path)?a.concat(t.path.slice(1)):a,l=Object.assign({},e.data,Nh({x:e.x,y:e.y,depth:e.depth,value:e.value,path:s},e));if(!e.data[n]&&e.parent){var c=e.ancestors().find((function(e){return e.data[n]}));l[n]=null==c?void 0:c.data[n]}else l[n]=e.data[n];l["hierarchy-data-transform-params"]={hierarchyConfig:i,colorField:n,enableDrillDown:r},o.push(l)})),o}function Qj(e){var t=e.options.colorField;return eN({options:{rawFields:["value"],tooltip:{fields:["name","value",t,"path"],formatter:function(e){return{name:e.name,value:e.value}}}}},e)}function Zj(e){var t=e.chart,n=e.options,r=n.color,i=n.colorField,a=n.rectStyle,o=n.hierarchyConfig,s=n.rawFields,l=Kj({data:n.data,colorField:n.colorField,enableDrillDown:qj(n),hierarchyConfig:o});return t.data(l),xF(eN({},e,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:r,style:a}}})),t.coordinate().reflect("y"),e}function Jj(e){return e.chart.axis(!1),e}function eG(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return qj(e)?eN({},e,{interactions:Lh(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:Kj}}])}):e}function tG(e){var t=e.chart,n=e.options,r=n.interactions,i=n.drilldown;nF({chart:t,options:eG(n)});var a=Wj(r,"view-zoom");return a&&(!1!==a.enable?t.getCanvas().on("mousewheel",(function(e){e.preventDefault()})):t.getCanvas().off("mousewheel")),qj(n)&&(t.appendPadding=hN(t.appendPadding,qp(i,["breadCrumb","position"]))),e}function nG(e){return LM(Qj,iF,JN("rectStyle"),Zj,Jj,eF,tF,tG,rF,cF())(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bidirectional-bar",t}Mh(t,e),t.getDefaultOptions=function(){return eN({},e.getDefaultOptions.call(this),{syncViewPadding:Dj})},t.prototype.changeData=function(e){void 0===e&&(e=[]),this.chart.emit(dd.BEFORE_CHANGE_DATA,OS.fromData(this.chart,dd.BEFORE_CHANGE_DATA,null)),this.updateOption({data:e});var t=this.options,n=Pj(t.xField,t.yField,"series-field-key",e,Rj(t.layout)),r=n[0],i=n[1],a=YM(this.chart,"first-axes-view"),o=YM(this.chart,"second-axes-view");a.data(r),o.data(i),this.chart.render(!0),this.chart.emit(dd.AFTER_CHANGE_DATA,OS.fromData(this.chart,dd.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Vj},t.SERIES_FIELD_KEY="series-field-key"}(BN);var rG={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};function iG(e){return e.target.depth}function aG(e,t){return e.sourceLinks.length?e.depth:t-1}function oG(e){return function(){return e}}function sG(e,t){for(var n=0,r=0;r<e.length;r++)n+=t(e[r]);return n}function lG(e,t){for(var n=-1/0,r=0;r<e.length;r++)n=Math.max(t(e[r]),n);return n}function cG(e,t){return hG(e.source,t.source)||e.index-t.index}function uG(e,t){return hG(e.target,t.target)||e.index-t.index}function hG(e,t){return e.y0-t.y0}function pG(e){return e.value}function dG(e){return e.index}function fG(e){return e.nodes}function mG(e){return e.links}function gG(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function vG(e){for(var t=0,n=e.nodes;t<n.length;t++){for(var r=n[t],i=r.y0,a=i,o=0,s=r.sourceLinks;o<s.length;o++){(u=s[o]).y0=i+u.width/2,i+=u.width}for(var l=0,c=r.targetLinks;l<c.length;l++){var u;(u=c[l]).y1=a+u.width/2,a+=u.width}}}function yG(){var e,t,n,r,i=0,a=0,o=1,s=1,l=24,c=8,u=dG,h=aG,p=fG,d=mG,f=6;function m(m){var y={nodes:p(m),links:d(m)};return function(e){var t=e.nodes,n=e.links;t.forEach((function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]}));var i=new Map(t.map((function(e){return[u(e),e]})));if(n.forEach((function(e,t){e.index=t;var n=e.source,r=e.target;"object"!=typeof n&&(n=e.source=gG(i,n)),"object"!=typeof r&&(r=e.target=gG(i,r)),n.sourceLinks.push(e),r.targetLinks.push(e)})),null!=r)for(var a=0,o=t;a<o.length;a++){var s=o[a],l=s.sourceLinks,c=s.targetLinks;l.sort(r),c.sort(r)}}(y),function(e){for(var t=e.nodes,n=0,r=t;n<r.length;n++){var i=r[n];i.value=void 0===i.fixedValue?Math.max(sG(i.sourceLinks,pG),sG(i.targetLinks,pG)):i.fixedValue}}(y),function(e){var n=e.nodes,r=n.length,i=new Set(n),a=new Set,o=0;for(;i.size;){if(i.forEach((function(e){e.depth=o;for(var t=0,n=e.sourceLinks;t<n.length;t++){var r=n[t].target;a.add(r)}})),++o>r)throw new Error("circular link");i=a,a=new Set}if(t)for(var s=Math.max(lG(n,(function(e){return e.depth}))+1,0),l=void 0,c=0;c<n.length;c++)(l=n[c]).depth=t.call(null,l,s)}(y),function(e){var t=e.nodes,n=t.length,r=new Set(t),i=new Set,a=0;for(;r.size;){if(r.forEach((function(e){e.height=a;for(var t=0,n=e.targetLinks;t<n.length;t++){var r=n[t].source;i.add(r)}})),++a>n)throw new Error("circular link");r=i,i=new Set}}(y),function(t){var r=function(e){for(var t=e.nodes,r=Math.max(lG(t,(function(e){return e.depth}))+1,0),a=(o-i-l)/(r-1),s=new Array(r).fill(0).map((function(){return[]})),c=0,u=t;c<u.length;c++){var p=u[c],d=Math.max(0,Math.min(r-1,Math.floor(h.call(null,p,r))));p.layer=d,p.x0=i+d*a,p.x1=p.x0+l,s[d]?s[d].push(p):s[d]=[p]}if(n)for(var f=0,m=s;f<m.length;f++){m[f].sort(n)}return s}(t);e=Math.min(c,(s-a)/(lG(r,(function(e){return e.length}))-1)),function(t){for(var n=function(e,t){for(var n=1/0,r=0;r<e.length;r++)n=Math.min(t(e[r]),n);return n}(t,(function(t){return(s-a-(t.length-1)*e)/sG(t,pG)})),r=0,i=t;r<i.length;r++){for(var o=i[r],l=a,c=0,u=o;c<u.length;c++){(m=u[c]).y0=l,m.y1=l+m.value*n,l=m.y1+e;for(var h=0,p=m.sourceLinks;h<p.length;h++){var d=p[h];d.width=d.value*n}}l=(s-l+e)/(o.length+1);for(var f=0;f<o.length;++f){var m;(m=o[f]).y0+=l*(f+1),m.y1+=l*(f+1)}C(o)}}(r);for(var u=0;u<f;++u){var p=Math.pow(.99,u),d=Math.max(1-p,(u+1)/f);v(r,p,d),g(r,p,d)}}(y),vG(y),y}function g(e,t,r){for(var i=1,a=e.length;i<a;++i){for(var o=e[i],s=0,l=o;s<l.length;s++){for(var c=l[s],u=0,h=0,p=0,d=c.targetLinks;p<d.length;p++){var f=d[p],m=f.source,g=f.value*(c.layer-m.layer);u+=T(m,c)*g,h+=g}if(h>0){var v=(u/h-c.y0)*t;c.y0+=v,c.y1+=v,b(c)}}void 0===n&&o.sort(hG),o.length&&y(o,r)}}function v(e,t,r){for(var i=e.length-2;i>=0;--i){for(var a=e[i],o=0,s=a;o<s.length;o++){for(var l=s[o],c=0,u=0,h=0,p=l.sourceLinks;h<p.length;h++){var d=p[h],f=d.target,m=d.value*(f.layer-l.layer);c+=w(l,f)*m,u+=m}if(u>0){var g=(c/u-l.y0)*t;l.y0+=g,l.y1+=g,b(l)}}void 0===n&&a.sort(hG),a.length&&y(a,r)}}function y(t,n){var r=t.length>>1,i=t[r];E(t,i.y0-e,r-1,n),x(t,i.y1+e,r+1,n),E(t,s,t.length-1,n),x(t,a,0,n)}function x(t,n,r,i){for(;r<t.length;++r){var a=t[r],o=(n-a.y0)*i;o>1e-6&&(a.y0+=o,a.y1+=o),n=a.y1+e}}function E(t,n,r,i){for(;r>=0;--r){var a=t[r],o=(a.y1-n)*i;o>1e-6&&(a.y0-=o,a.y1-=o),n=a.y0-e}}function b(e){var t=e.sourceLinks,n=e.targetLinks;if(void 0===r){for(var i=0,a=n;i<a.length;i++){a[i].source.sourceLinks.sort(uG)}for(var o=0,s=t;o<s.length;o++){s[o].target.targetLinks.sort(cG)}}}function C(e){if(void 0===r)for(var t=0,n=e;t<n.length;t++){var i=n[t],a=i.sourceLinks,o=i.targetLinks;a.sort(uG),o.sort(cG)}}function T(t,n){for(var r=t.y0-(t.sourceLinks.length-1)*e/2,i=0,a=t.sourceLinks;i<a.length;i++){var o=a[i],s=o.target,l=o.width;if(s===n)break;r+=l+e}for(var c=0,u=n.targetLinks;c<u.length;c++){var h=u[c];s=h.source,l=h.width;if(s===t)break;r-=l}return r}function w(t,n){for(var r=n.y0-(n.targetLinks.length-1)*e/2,i=0,a=n.targetLinks;i<a.length;i++){var o=a[i],s=o.source,l=o.width;if(s===t)break;r+=l+e}for(var c=0,u=t.sourceLinks;c<u.length;c++){var h=u[c];s=h.target,l=h.width;if(s===n)break;r-=l}return r}return m.update=function(e){return vG(e),e},m.nodeId=function(e){return arguments.length?(u="function"==typeof e?e:oG(e),m):u},m.nodeAlign=function(e){return arguments.length?(h="function"==typeof e?e:oG(e),m):h},m.nodeDepth=function(e){return arguments.length?(t=e,m):t},m.nodeSort=function(e){return arguments.length?(n=e,m):n},m.nodeWidth=function(e){return arguments.length?(l=+e,m):l},m.nodePadding=function(t){return arguments.length?(c=e=+t,m):c},m.nodes=function(e){return arguments.length?(p="function"==typeof e?e:oG(e),m):p},m.links=function(e){return arguments.length?(d="function"==typeof e?e:oG(e),m):d},m.linkSort=function(e){return arguments.length?(r=e,m):r},m.size=function(e){return arguments.length?(i=a=0,o=+e[0],s=+e[1],m):[o-i,s-a]},m.extent=function(e){return arguments.length?(i=+e[0][0],o=+e[1][0],a=+e[0][1],s=+e[1][1],m):[[i,a],[o,s]]},m.iterations=function(e){return arguments.length?(f=+e,m):f},m}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="treemap",t}Mh(t,e),t.getDefaultOptions=function(){return rG},t.prototype.changeData=function(e){var t=this.options,n=t.colorField,r=t.interactions,i=t.hierarchyConfig;this.updateOption({data:e});var a,o,s=Kj({data:e,colorField:n,enableDrillDown:Xj(r,"treemap-drill-down"),hierarchyConfig:i});this.chart.changeData(s),a=this.chart,(o=a.interactions["drill-down"])&&o.context.actions.find((function(e){return"drill-down-action"===e.name})).reset()},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return nG}}(BN);var xG={left:function(e){return e.depth},right:function(e,t){return t-1-e.height},center:function(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?function(e,t){if($h(e)){for(var n,r=1/0,i=0;i<e.length;i++){var a=e[i],o=jh(t)?t(a):a[t];o<r&&(n=a,r=o)}return n}}(e.sourceLinks,iG)-1:0},justify:aG},EG={nodeId:function(e){return e.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function bG(e,t){var n=function(e){return Rp({},EG,e)}(e),r=n.nodeId,i=n.nodeSort,a=n.nodeAlign,o=n.nodeWidth,s=n.nodePadding,l=n.nodeDepth,c=yG().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(l).nodeAlign(function(e){return(ap(e)?xG[e]:jh(e)?e:null)||aG}(a)).extent([[0,0],[1,1]]).nodeId(r)(t);return c.nodes.forEach((function(e){var t=e.x0,n=e.x1,r=e.y0,i=e.y1;e.x=[t,n,n,t],e.y=[r,r,i,i]})),c.links.forEach((function(e){var t=e.source,n=e.target,r=t.x1,i=n.x0;e.x=[r,r,i,i];var a=e.width/2;e.y=[e.y0+a,e.y0-a,e.y1+a,e.y1-a]})),c}function CG(e,t,n){if(!$h(e))return[];var r=[],i=function(e,t,n){var r=[];return e.forEach((function(e){var i=e[t],a=e[n];r.includes(i)||r.push(i),r.includes(a)||r.push(a)})),r}(e,t,n),a=function(e,t,n,r){var i={};return t.forEach((function(e){i[e]={},t.forEach((function(t){i[e][t]=0}))})),e.forEach((function(e){i[e[n]][e[r]]=1})),i}(e,i,t,n),o={};function s(e){o[e]=1,i.forEach((function(t){if(0!=a[e][t])if(1==o[t])r.push(e+"_"+t);else{if(-1==o[t])return;s(t)}})),o[e]=-1}return i.forEach((function(e){o[e]=0})),i.forEach((function(e){-1!=o[e]&&s(e)})),0!==r.length&&console.warn("sankey data contains circle, "+r.length+" records removed.",r),e.filter((function(e){return r.findIndex((function(r){return r===e[t]+"_"+e[n]}))<0}))}function TG(e,t,n){return oN(e)?e/n:t}function wG(e,t,n){return oN(e)?e/n:t}function SG(e,t,n){var r,i=e.dataType,a=e.data,o=e.sourceField,s=e.targetField,l=e.weightField,c=e.nodeAlign,u=e.nodeSort,h=e.nodePadding,p=e.nodePaddingRatio,d=e.nodeWidth,f=e.nodeWidthRatio,m=e.nodeDepth,g=e.rawFields,v=void 0===g?[]:g;r=function(e){return"node-link"===e}(i)?a:lN(CG(a,o,s),o,s,l,v);var y=bG({nodeAlign:c,nodePadding:wG(h,p,n),nodeWidth:TG(d,f,t),nodeSort:u,nodeDepth:m},r),x=y.nodes,E=y.links;return{nodes:x.map((function(e){return Nh(Nh({},PM(e,Lh(["x","y","name"],v))),{isNode:!0})})),edges:E.map((function(e){return Nh(Nh({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},PM(e,Lh(["x","y","value"],v))),{isNode:!1})}))}}function kG(e){var t=e.options.rawFields,n=void 0===t?[]:t;return eN({},{options:{tooltip:{fields:op(Lh(["name","source","target","value","isNode"],n))},label:{fields:op(Lh(["x","name"],n))}}},e)}function _G(e){var t=e.chart,n=e.options,r=n.color,i=n.nodeStyle,a=n.edgeStyle,o=n.label,s=n.tooltip,l=n.nodeState,c=n.edgeState;t.legend(!1),t.tooltip(s),t.axis(!1),t.coordinate().reflect("y");var u=SG(n,t.width,t.height),h=u.nodes,p=u.edges,d=t.createView({id:"edges"});d.data(p),EF({chart:d,options:{xField:"x",yField:"y",seriesField:"name",edge:{color:r,style:a,shape:"arc"},tooltip:s,state:c}});var f=t.createView({id:"nodes"});return f.data(h),xF({chart:f,options:{xField:"x",yField:"y",seriesField:"name",polygon:{color:r,style:i},label:o,tooltip:s,state:l}}),t.interaction("element-active"),t.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),e}function AG(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),Lh(t.views[0].geometries,t.views[1].geometries).forEach((function(e){e.animate(n)})),e}function OG(e){var t=e.chart,n="sankey-node-draggable";return e.options.nodeDraggable?t.interaction(n):t.removeInteraction(n),e}function IG(e){return LM(kG,_G,nF,OG,AG,iF)(e)}dw("sankey-node-drag",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDragging=!1,t}return Mh(t,e),t.prototype.isNodeElement=function(){var e=qp(this.context,"event.target");if(e){var t=e.get("element");return t&&t.getModel().data.isNode}return!1},t.prototype.getNodeView=function(){return YM(this.context.view,"nodes")},t.prototype.getEdgeView=function(){return YM(this.context.view,"edges")},t.prototype.getCurrentDatumIdx=function(e){return this.getNodeView().geometries[0].elements.indexOf(e)},t.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:qp(this.context,"event.x"),y:qp(this.context,"event.y")};var e=this.context.event.target.get("element"),t=this.getCurrentDatumIdx(e);if(-1===t)return;this.currentElementIdx=t,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},t.prototype.translate=function(){if(this.isDragging){var e=this.context.view,t={x:qp(this.context,"event.x"),y:qp(this.context,"event.y")},n=t.x-this.prevPoint.x,r=t.y-this.prevPoint.y,i=this.getNodeView(),a=i.geometries[0].elements[this.currentElementIdx];if(a&&a.getModel()){var o=a.getModel().data,s=i.getOptions().data,l=i.getCoordinate(),c={x:n/l.getWidth(),y:r/l.getHeight()},u=Nh(Nh({},o),{x:o.x.map((function(e){return e+c.x})),y:o.y.map((function(e){return e+c.y}))}),h=Lh(s);h[this.currentElementIdx]=u,i.data(h);var p=o.name,d=this.getEdgeView(),f=d.getOptions().data;f.forEach((function(e){e.source===p&&(e.x[0]+=c.x,e.x[1]+=c.x,e.y[0]+=c.y,e.y[1]+=c.y),e.target===p&&(e.x[2]+=c.x,e.x[3]+=c.x,e.y[2]+=c.y,e.y[3]+=c.y)})),d.data(f),this.prevPoint=t,e.render(!0)}}},t.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},t}(cw)),Jw("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(e){return e.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="sankey",t}Mh(t,e),t.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(e){return e.name},callback:function(e){var t=1===e[1];return{style:{fill:"#545454",textAlign:t?"end":"start"},offsetX:t?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(e){return!qp(e,[0,"data","isNode"])},formatter:function(e){return{name:e.source+" -> "+e.target,value:e.value}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},t.prototype.changeData=function(e){this.updateOption({data:e});var t=SG(this.options,this.chart.width,this.chart.height),n=t.nodes,r=t.edges,i=YM(this.chart,"nodes"),a=YM(this.chart,"edges");i.changeData(n),a.changeData(r)},t.prototype.getSchemaAdaptor=function(){return IG},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(BN);var MG={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(e){return e.id},source:function(e){return e.source},target:function(e){return e.target},sourceWeight:function(e){return e.value||1},targetWeight:function(e){return e.value||1},sortBy:null};function NG(e,t){var n=function(e){return Rp({},MG,e)}(e),r={},i=t.nodes,a=t.links;return i.forEach((function(e){var t=n.id(e);r[t]=e})),function(e,t,n){Uh(e,(function(e,r){e.inEdges=t.filter((function(e){return""+n.target(e)==""+r})),e.outEdges=t.filter((function(e){return""+n.source(e)==""+r})),e.edges=e.outEdges.concat(e.inEdges),e.frequency=e.edges.length,e.value=0,e.inEdges.forEach((function(t){e.value+=n.targetWeight(t)})),e.outEdges.forEach((function(t){e.value+=n.sourceWeight(t)}))}))}(r,a,n),function(e,t){var n={weight:function(e,t){return t.value-e.value},frequency:function(e,t){return t.frequency-e.frequency},id:function(e,n){return(""+t.id(e)).localeCompare(""+t.id(n))}}[t.sortBy];!n&&jh(t.sortBy)&&(n=t.sortBy),n&&e.sort(n)}(i,n),{nodes:function(e,t){var n=e.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(t.weight){var r=t.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),a=t.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;e.forEach((function(e){o+=e.value})),e.forEach((function(e){e.weight=e.value/o,e.width=e.weight*(1-r),e.height=a})),e.forEach((function(n,r){for(var o=0,s=r-1;s>=0;s--)o+=e[s].width+2*i;var l=n.minX=i+o,c=n.maxX=n.minX+n.width,u=n.minY=t.y-a/2,h=n.maxY=u+a;n.x=[l,c,c,l],n.y=[u,u,h,h]}))}else{var s=1/n;e.forEach((function(e,n){e.x=(n+.5)*s,e.y=t.y}))}return e}(i,n),links:function(e,t,n){if(n.weight){var r={};Uh(e,(function(e,t){r[t]=e.value})),t.forEach((function(t){var i=n.source(t),a=n.target(t),o=e[i],s=e[a];if(o&&s){var l=r[i],c=n.sourceWeight(t),u=o.minX+(o.value-l)/o.value*o.width,h=u+c/o.value*o.width;r[i]-=c;var p=r[a],d=n.targetWeight(t),f=s.minX+(s.value-p)/s.value*s.width,m=f+d/s.value*s.width;r[a]-=d;var g=n.y;t.x=[u,h,f,m],t.y=[g,g,g,g],t.source=o,t.target=s}}))}else t.forEach((function(t){var r=e[n.source(t)],i=e[n.target(t)];r&&i&&(t.x=[r.x,i.x],t.y=[r.y,i.y],t.source=r,t.target=i)}));return t}(r,a,n)}}var FG={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(e,t){return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:(e[0]+e[1])/2>.5?-4:4,content:t}}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(e){return!qp(e,[0,"data","isNode"])},formatter:function(e){return{name:e.source+" -> "+e.target,value:e.value}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function LG(e){var t=e.options,n=t.data,r=t.sourceField,i=t.targetField,a=t.weightField,o=t.nodePaddingRatio,s=t.nodeWidthRatio,l=t.rawFields,c=void 0===l?[]:l,u=NG({weight:!0,nodePaddingRatio:o,nodeWidthRatio:s},lN(n,r,i,a)),h=u.nodes,p=u.links,d=h.map((function(e){return Nh(Nh({},PM(e,Lh(["id","x","y","name"],c))),{isNode:!0})})),f=p.map((function(e){return Nh(Nh({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},PM(e,Lh(["x","y","value"],c))),{isNode:!1})}));return Nh(Nh({},e),{ext:Nh(Nh({},e.ext),{chordData:{nodesData:d,edgesData:f}})})}function PG(e){var t;return e.chart.scale(((t={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}}).name={sync:"color"},t.source={sync:"color"},t)),e}function RG(e){return e.chart.axis(!1),e}function DG(e){return e.chart.legend(!1),e}function BG(e){var t=e.chart,n=e.options.tooltip;return t.tooltip(n),e}function zG(e){return e.chart.coordinate("polar").reflect("y"),e}function HG(e){var t=e.chart,n=e.options,r=e.ext.chordData.nodesData,i=n.nodeStyle,a=n.label,o=n.tooltip,s=t.createView();return s.data(r),xF({chart:s,options:{xField:"x",yField:"y",seriesField:"name",polygon:{style:i},label:a,tooltip:o}}),e}function jG(e){var t=e.chart,n=e.options,r=e.ext.chordData.edgesData,i=n.edgeStyle,a=n.tooltip,o=t.createView();return o.data(r),EF({chart:o,options:{xField:"x",yField:"y",seriesField:"source",edge:{style:i,shape:"arc"},tooltip:a}}),e}function GG(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),Uh($M(t),(function(e){e.animate(n)})),e}function $G(e){return LM(iF,LG,zG,PG,RG,DG,BG,jG,HG,nF,aF,GG)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="chord",t}Mh(t,e),t.getDefaultOptions=function(){return FG},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return $G}}(BN);var YG={field:"value",as:["x","y","r"],sort:function(e,t){return t.value-e.value}};function UG(e){var t=e.data,n=e.hierarchyConfig,r=e.rawFields,i=void 0===r?[]:r,a=e.enableDrillDown,o=function(e,t){var n,r=(t=Rp({},YG,t)).as;if(!$h(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');try{n=Hz(t)}catch(eh){console.warn(eh)}var i,a=(i=e,EH().size(t.size).padding(t.padding)(Kz(i).sum((function(e){return e[n]})).sort(t.sort))),o=r[0],s=r[1],l=r[2];return a.each((function(e){e[o]=e.x,e[s]=e.y,e[l]=e.r})),jz(a)}(t,Nh(Nh({},n),{field:"value",as:["x","y","r"]})),s=[];return o.forEach((function(e){for(var t,r=e.data.name,o=Nh({},e);o.depth>1;)r=(null===(t=o.parent.data)||void 0===t?void 0:t.name)+" / "+r,o=o.parent;if(a&&e.depth>2)return null;var l=eN({},e.data,Nh(Nh(Nh({},PM(e.data,i)),{path:r}),e));l.ext=n,l["hierarchy-data-transform-params"]={hierarchyConfig:n,rawFields:i,enableDrillDown:a},s.push(l)})),s}function VG(e,t,n){var r=pN([e,t]),i=r[0],a=r[1],o=r[2],s=r[3],l=n.width-(s+a),c=n.height-(i+o),u=Math.min(l,c),h=(l-u)/2,p=(c-u)/2;return{finalPadding:[i+p,a+h,o+p,s+h],finalSize:u<0?0:u}}var WG=["x","y","r","name","value","path","depth"],XG={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}};function qG(e){var t=e.chart,n=Math.min(t.viewBBox.width,t.viewBBox.height);return eN({options:{size:function(e){return e.r*n}}},e)}function KG(e){var t=e.options,n=e.chart,r=n.viewBBox,i=t.padding,a=t.appendPadding,o=t.drilldown,s=a;(null==o?void 0:o.enabled)&&(s=pN([hN(n.appendPadding,qp(o,["breadCrumb","position"])),a]));var l=VG(i,s,r).finalPadding;return n.padding=l,n.appendPadding=0,e}function QG(e){var t=e.chart,n=e.options,r=t.padding,i=t.appendPadding,a=n.color,o=n.colorField,s=n.pointStyle,l=n.hierarchyConfig,c=n.sizeField,u=n.rawFields,h=void 0===u?[]:u,p=n.drilldown,d=UG({data:n.data,hierarchyConfig:l,enableDrillDown:null==p?void 0:p.enabled,rawFields:h});t.data(d);var f=VG(r,i,t.viewBBox).finalSize,m=function(e){return e.r*f};return c&&(m=function(e){return e[c]*f}),vF(eN({},e,{options:{xField:"x",yField:"y",seriesField:o,sizeField:c,rawFields:Lh(WG,h),point:{color:a,style:s,shape:"circle",size:m}}})),e}function ZG(e){return LM(lF({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(e)}function JG(e){var t=e.chart,n=e.options.tooltip;if(!1===n)t.tooltip(!1);else{var r=n;qp(n,"fields")||(r=eN({},{customItems:function(e){return e.map((function(e){var n=qp(t.getOptions(),"scales"),r=qp(n,["name","formatter"],(function(e){return e})),i=qp(n,["value","formatter"],(function(e){return e}));return Nh(Nh({},e),{name:r(e.data.name),value:i(e.data.value)})}))}},r)),t.tooltip(r)}return e}function e$(e){return e.chart.axis(!1),e}function t$(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return(null==t?void 0:t.enabled)?eN({},e,{interactions:Lh(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:UG,enableDrillDown:!0}}])}):e}function n$(e){return nF({chart:e.chart,options:t$(e.options)}),e}function r$(e){return LM(JN("pointStyle"),qG,KG,iF,ZG,QG,e$,eF,JG,n$,rF,cF())(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle-packing",t}Mh(t,e),t.getDefaultOptions=function(){return XG},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return r$},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(BN),function(e){function t(t,n,r,i){var a=e.call(this,t,eN({},i,n))||this;return a.type="g2-plot",a.defaultOptions=i,a.adaptor=r,a}Mh(t,e),t.prototype.getDefaultOptions=function(){return this.defaultOptions},t.prototype.getSchemaAdaptor=function(){return this.adaptor}}(BN);var i$={line:IF,pie:IL,column:iL,bar:pL,area:BF,gauge:fj,"tiny-line":IR,"tiny-column":FR,"tiny-area":AR,"ring-progress":nD,progress:ZR,scatter:zP,histogram:UR,funnel:vz},a$={line:MF,pie:ML,column:oL,bar:fL,area:zF,gauge:mj,"tiny-line":MR,"tiny-column":PR,"tiny-area":DR,"ring-progress":iD,progress:JR,scatter:UP,histogram:VR,funnel:yz},o$={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function s$(e,t,n){var r=a$[e];r?(0,i$[e])({chart:t,options:eN({},r.getDefaultOptions(),qp(o$,e,{}),n)}):console.error("could not find "+e+" plot")}function l$(e){var t=e.chart,n=e.options,r=n.views,i=n.legend;return Uh(r,(function(e){var n=e.region,r=e.data,i=e.meta,a=e.axes,o=e.coordinate,s=e.interactions,l=e.annotations,c=e.tooltip,u=e.geometries,h=t.createView({region:n});h.data(r);var p={};a&&Uh(a,(function(e,t){p[t]=PM(e,zN)})),p=eN({},i,p),h.scale(p),a?Uh(a,(function(e,t){h.axis(t,e)})):h.axis(!1),h.coordinate(o),Uh(u,(function(e){var t=fF({chart:h,options:e}).ext,n=e.adjust;n&&t.geometry.adjust(n)})),Uh(s,(function(e){!1===e.enable?h.removeInteraction(e.type):h.interaction(e.type,e.cfg)})),Uh(l,(function(e){h.annotation()[e.type](Nh({},e))})),"boolean"==typeof e.animation?h.animate(!1):(h.animate(!0),Uh(h.geometries,(function(t){t.animate(e.animation)}))),c&&(h.interaction("tooltip"),h.tooltip(c))})),i?Uh(i,(function(e,n){t.legend(n,e)})):t.legend(!1),t.tooltip(n.tooltip),e}function c$(e){var t=e.chart;return Uh(e.options.plots,(function(e){var n=e.type,r=e.region,i=e.options,a=void 0===i?{}:i,o=a.tooltip,s=t.createView(Nh({region:r},PM(a,DN)));o&&s.interaction("tooltip"),s$(n,s,a)})),e}function u$(e){return LM(rF,l$,c$,nF,rF,iF,tF)(e)}dw("association",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),t.prototype.getAssociationItems=function(e,t){var n,r=this.context.event,i=t||{},a=i.linkField,o=i.dim,s=[];if(null===(n=r.data)||void 0===n?void 0:n.data){var l=r.data.data;Uh(e,(function(e){var t,n,r=a;if("x"===o?r=e.getXScale().field:"y"===o?r=null===(t=e.getYScales().find((function(e){return e.field===r})))||void 0===t?void 0:t.field:r||(r=null===(n=e.getGroupScales()[0])||void 0===n?void 0:n.field),r){var i=Wp(jM(e),(function(t){var n=!1,i=!1,a=$h(l)?qp(l[0],r):qp(l,r);return function(e,t){var n=e.getModel().data;return $h(n)?n[0][t]:n[t]}(t,r)===a?n=!0:i=!0,{element:t,view:e,active:n,inactive:i}}));s.push.apply(s,i)}}))}return s},t.prototype.showTooltip=function(e){var t=VM(this.context.view);Uh(this.getAssociationItems(t,e),(function(e){if(e.active){var t=e.element.shape.getCanvasBBox();e.view.showTooltip({x:t.minX+t.width/2,y:t.minY+t.height/2})}}))},t.prototype.hideTooltip=function(){Uh(VM(this.context.view),(function(e){e.hideTooltip()}))},t.prototype.active=function(e){var t=UM(this.context.view);Uh(this.getAssociationItems(t,e),(function(e){var t=e.active,n=e.element;t&&n.setState("active",!0)}))},t.prototype.selected=function(e){var t=UM(this.context.view);Uh(this.getAssociationItems(t,e),(function(e){var t=e.active,n=e.element;t&&n.setState("selected",!0)}))},t.prototype.highlight=function(e){var t=UM(this.context.view);Uh(this.getAssociationItems(t,e),(function(e){var t=e.inactive,n=e.element;t&&n.setState("inactive",!0)}))},t.prototype.reset=function(){Uh(UM(this.context.view),(function(e){Uh(jM(e),(function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("selected")&&e.setState("selected",!1),e.hasState("inactive")&&e.setState("inactive",!1)}))}))},t}(cw)),Jw("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Jw("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Jw("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Jw("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var h$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="mix",t}return Mh(t,e),t.prototype.getSchemaAdaptor=function(){return u$},t}(BN);function p$(e){var t=e.chart,n=e.options,r=n.type,i=n.data,a=n.fields,o=n.eachView,s=Jp(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return t.data(i),t.facet(r,Nh(Nh({},s),{fields:a,eachView:function(e,t){var n=o(e,t);if(n.geometries)!function(e,t){var n=t.data,r=t.coordinate,i=t.interactions,a=t.annotations,o=t.animation,s=t.tooltip,l=t.axes,c=t.meta,u=t.geometries;n&&e.data(n);var h={};l&&Uh(l,(function(e,t){h[t]=PM(e,zN)})),h=eN({},c,h),e.scale(h),r&&e.coordinate(r),!1===l?e.axis(!1):Uh(l,(function(t,n){e.axis(n,t)})),Uh(u,(function(t){var n=fF({chart:e,options:t}).ext,r=t.adjust;r&&n.geometry.adjust(r)})),Uh(i,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg)})),Uh(a,(function(t){e.annotation()[t.type](Nh({},t))})),"boolean"==typeof o?e.animate(!1):(e.animate(!0),Uh(e.geometries,(function(e){e.animate(o)}))),s?(e.interaction("tooltip"),e.tooltip(s)):!1===s&&e.removeInteraction("tooltip")}(e,n);else{var r=n,i=r.options;i.tooltip&&e.interaction("tooltip"),s$(r.type,e,i)}}})),e}function d$(e){var t=e.chart,n=e.options,r=n.axes,i=n.meta,a=n.tooltip,o=n.coordinate,s=n.theme,l=n.legend,c=n.interactions,u=n.annotations,h={};return r&&Uh(r,(function(e,t){h[t]=PM(e,zN)})),h=eN({},i,h),t.scale(h),t.coordinate(o),r?Uh(r,(function(e,n){t.axis(n,e)})):t.axis(!1),a?(t.interaction("tooltip"),t.tooltip(a)):!1===a&&t.removeInteraction("tooltip"),t.legend(l),s&&t.theme(s),Uh(c,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg)})),Uh(u,(function(e){t.annotation()[e.type](Nh({},e))})),e}function f$(e){return LM(iF,p$,d$)(e)}var m$,g$,v$={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="area",t}Mh(t,e),t.getDefaultOptions=function(){return v$},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return f$}}(BN),(g$=m$||(m$={})).DEV="DEV",g$.BETA="BETA",g$.STABLE="STABLE",function(){function e(){}Object.defineProperty(e,"MultiView",{get:function(){var e,t;return e=m$.STABLE,t="MultiView",console.warn(e===m$.DEV?"Plot '"+t+"' is in DEV stage, just give us issues.":e===m$.BETA?"Plot '"+t+"' is in BETA stage, DO NOT use it in production env.":e===m$.STABLE?"Plot '"+t+"' is in STABLE stage, import it by \"import { "+t+" } from '@antv/g2plot'\".":"invalid Stage type."),h$},enumerable:!1,configurable:!0})}(),mN("en-US",{locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}}),mN("zh-CN",{locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}});var y$=function(e,t){var n=document.createElement("div");return"tooltip"===t&&(n.className="g2-tooltip"),K.render(e,n),n},x$=function(e,t){return{}.toString.call(e)==="[object ".concat(t,"]")},E$=function(e){return Object.prototype.toString.call(e).slice(8,-1)},b$=function(e){if(!e)return e;var t=new e.constructor;for(var n in e)e.hasOwnProperty(n)&&(t[n]="Object"===E$(e[n])||"Array"===E$(e[n])?b$(e[n]):e[n]);return t},C$=function(e,t){for(var n=e,r=0;r<t.length;r+=1){if(!(null==n?void 0:n[t[r]])){n=void 0;break}n=n[t[r]]}return n},T$=function(){return(T$=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},w$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function S$(e,t){var n=f.exports.useRef(),r=f.exports.useRef(),i=f.exports.useRef(null),a=t.onReady,o=t.onEvent,s=function(e,t,n){var r=C$(e,t);!function(e,t,n){if(!e)return e;var r=e;t.forEach((function(e,i){i<t.length-1?r=r[e]:r[e]=n}))}(e,t,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=x$(r,"Function")?r.apply(void 0,e):r;return x$(i,"String")||x$(i,"Number")||x$(i,"HTMLDivElement")?i:y$(i,n)}))},l=function(){C$(t,["statistic","content","customHtml"])&&s(t,["statistic","content","customHtml"]),C$(t,["statistic","title","customHtml"])&&s(t,["statistic","title","customHtml"]),"object"==typeof t.tooltip&&(C$(t,["tooltip","container"])&&s(t,["tooltip","container"],"tooltip"),C$(t,["tooltip","customContent"])&&s(t,["tooltip","customContent"],"tooltip"))};return f.exports.useEffect((function(){if(n.current&&!Vp(r.current,t)){var e=!1;if(r.current){var i=r.current;i.data,i.value,i.percent;var a=w$(i,["data","value","percent"]);t.data,t.value,t.percent;var o=w$(t,["data","value","percent"]);e=Vp(a,o)}if(e&&"Mix"!==qp(t,"chartType")){var s="data",c=Object.keys(t);["percent"].forEach((function(e){c.includes(e)&&(s=e)})),n.current.changeData((null==t?void 0:t[s])||[])}else l(),n.current.update(t);r.current=b$(t)}}),[t]),f.exports.useEffect((function(){if(!i.current)return function(){return null};l();var s=new e(i.current,T$({},t));e.__proto__.toDataURL=function(e,t){return function(e,t){var r;return void 0===e&&(e="image/png"),null===(r=n.current)||void 0===r?void 0:r.chart.canvas.cfg.el.toDataURL(e,t)}(e,t)},e.prototype.downloadImage=function(e,t,r){return function(e,t,r){var i;void 0===e&&(e="download"),void 0===t&&(t="image/png");var a=e;-1===e.indexOf(".")&&(a="".concat(e,".").concat(t.split("/")[1]));var o=null===(i=n.current)||void 0===i?void 0:i.chart.canvas.cfg.el.toDataURL(t,r),s=document.createElement("a");return s.href=o,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),s=null,a}(e,t,r)},s.render(),r.current||(r.current=b$(t)),n.current=function(e){if(!e)return e;var t={};for(var n in e)t[n]=e[n];return t}(s),a&&a(s);var c=function(e){o&&o(s,e)};return s.on("*",c),function(){n.current&&(n.current.destroy(),n.current.off("*",c),n.current=void 0)}}),[]),{chart:n,container:i}}var k$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1},t.renderError=function(e){var n=t.props.errorTemplate;return n&&"function"==typeof n?n(e):d.createElement("h5",null,"组件出错了，请核查后重试： ",e.message)},t}return k$(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0,error:e}},t.getDerivedStateFromProps=function(e,t){return t.children!==e.children?{children:e.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):d.createElement(f.exports.Fragment,null,this.props.children)},t}(d.Component),A$=function(){return(A$=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var O$=function(e){var t=e.animate,n=e.backgroundColor,r=e.backgroundOpacity,i=e.baseUrl,a=e.children,o=e.foregroundColor,s=e.foregroundOpacity,l=e.gradientRatio,c=e.uniqueKey,u=e.interval,h=e.rtl,p=e.speed,d=e.style,m=e.title,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),v=c||Math.random().toString(36).substring(6),y=v+"-diff",x=v+"-animated-diff",E=v+"-aria",b=h?{transform:"scaleX(-1)"}:null,C="0; "+u+"; 1",T=p+"s";return f.exports.createElement("svg",A$({"aria-labelledby":E,role:"img",style:A$(A$({},d),b)},g),m?f.exports.createElement("title",{id:E},m):null,f.exports.createElement("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+i+"#"+y+")",style:{fill:"url("+i+"#"+x+")"}}),f.exports.createElement("defs",{role:"presentation"},f.exports.createElement("clipPath",{id:y},a),f.exports.createElement("linearGradient",{id:x},f.exports.createElement("stop",{offset:"0%",stopColor:n,stopOpacity:r},t&&f.exports.createElement("animate",{attributeName:"offset",values:-l+"; "+-l+"; 1",keyTimes:C,dur:T,repeatCount:"indefinite"})),f.exports.createElement("stop",{offset:"50%",stopColor:o,stopOpacity:s},t&&f.exports.createElement("animate",{attributeName:"offset",values:-l/2+"; "+-l/2+"; "+(1+l/2),keyTimes:C,dur:T,repeatCount:"indefinite"})),f.exports.createElement("stop",{offset:"100%",stopColor:n,stopOpacity:r},t&&f.exports.createElement("animate",{attributeName:"offset",values:"0; 0; "+(1+l),keyTimes:C,dur:T,repeatCount:"indefinite"})))))};O$.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var I$=function(e){return e.children?f.exports.createElement(O$,A$({},e)):f.exports.createElement(M$,A$({},e))},M$=function(e){return f.exports.createElement(I$,A$({viewBox:"0 0 476 124"},e),f.exports.createElement("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),f.exports.createElement("circle",{cx:"20",cy:"20",r:"20"}))},N$=function(e){var t=e.loadingTemplate;return d.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},t||d.createElement(I$,{viewBox:"0 0 400 180",width:200,height:90,speed:1},d.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),d.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),d.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),d.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),d.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),d.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),d.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),d.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),d.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),d.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"})))},F$=f.exports.forwardRef((function(e,t){var n=e.chartRef,r=e.style,i=void 0===r?{height:"inherit"}:r,a=e.className,o=e.loading,s=e.loadingTemplate,l=e.errorTemplate,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),u=S$(ML,c),h=u.chart,p=u.container;return f.exports.useEffect((function(){!function(e,t){e&&(jh(e)?e(t):e.current=t)}(n,h.current)}),[h.current]),f.exports.useImperativeHandle(t,(function(){return{getChart:function(){return h.current}}})),d.createElement(_$,{errorTemplate:l},o&&d.createElement(N$,{loadingTemplate:s}),d.createElement("div",{className:a,style:i,ref:p}))}));const L$=e=>{const{data:t,positon:n,hidden:r,labelWithName:i}=e,a={padding:[16,8,16,8],appendPadding:10,data:t,angleField:"value",colorField:"name",radius:.9,label:{type:"spider",content:e=>`${i?`${e.name}: `:""}${(100*e.percent).toFixed(0)}%`,style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}],tooltip:{fields:["name","value"],formatter:e=>({name:e.name,value:`${e.value.toFixed(3)}`})},legend:!r&&{position:n}};return d.createElement(F$,s({},a))};function P$(e){var t,n;const{values:r,series:i}=e,{custom:a,options:o}=r,{calc:s,legengPosition:l,max:c,labelWithName:u}=a,h=gh(i,s,{util:null==(t=null==o?void 0:o.standardOptions)?void 0:t.util,decimals:null==(n=null==o?void 0:o.standardOptions)?void 0:n.decimals},null==o?void 0:o.valueMappings).sort(((e,t)=>t.value-e.value)),p=c&&h.length>c?h.slice(0,c).map((e=>({name:e.name,value:e.stat}))).concat({name:"其他",value:h.slice(c).reduce(((e,t)=>t.stat+e),0)}):h.map((e=>({name:e.name,value:e.stat})));return d.createElement("div",{className:"renderer-pie-container"},d.createElement(L$,{data:p,positon:"hidden"!==l?l:void 0,hidden:"hidden"===l,labelWithName:u}))}var R$=Math.PI/3,D$=[0,R$,2*R$,3*R$,4*R$,5*R$];function B$(e){return e[0]}function z$(e){return e[1]}const H$={fontWeight:"normal",fontSize:"12px",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono"},j$=(e=H$)=>`${e.fontWeight} ${e.fontSize} ${e.fontFamily}`;function G$(e,t=j$()){const n=document.createElement("canvas").getContext("2d");n.font=t;return n.measureText(e).width}function $$(e,t,n,r){return function(e,t,n){let r=G$(e,j$(l(s({},H$),{fontSize:"24px"})));if(r<=(t*=.95)&&24<=n)return 24;for(let i=24;i>=6;i--)if(r=G$(e,j$(l(s({},H$),{fontSize:i+"px"}))),r<t&&i<=n)return Math.ceil(i);return 0}(e,n,r/t)}const Y$=le("body").append((function(){return document.createElement("div")})).attr("class","hexbin-tooltip").style("opacity",0);function U$(e,t,{width:n,height:r,fontAutoScale:i=!0,fontSize:a=12}){const o=ge().duration(750),{columns:s,rows:l}=function(e,t,n){let r=0,i=0;const a=Math.sqrt(n);return e>t?(r=Math.ceil(e/t*a*.75),r<1?r=1:r>n&&(r=n),i=Math.ceil(n/r),i<1&&(i=1)):(i=Math.ceil(t/e*a*.75),i<1?i=1:i>n&&(i=n),r=Math.ceil(n/i),r<1&&(r=1)),{columns:r,rows:i}}(n,r,t.length),c=Math.floor(ve([n/((s+.5)*Math.sqrt(3)),r/(1.5*(l+1/3)),n/7])),u=Math.sin(60*Math.PI/180)*c*2,h=function(e,t,n,r){let i=[];for(let a=0,o=0;a<e;a++)for(let e=0;e<t&&o<=n-1;e++,o++)i.push([r*e*1.75,r*a*1.5]);return i}(l,s,t.length,c);let p=(n-u*s)/2+u/2;h.length>=2*s&&(p=(n-u*s-u/2)/2+u/2);const d=(r-2*c*l)/2+c,f=function(){var e,t,n,r=0,i=0,a=1,o=1,s=B$,l=z$;function c(e){var r,i={},a=[],o=e.length;for(r=0;r<o;++r)if(!isNaN(u=+s.call(null,c=e[r],r,e))&&!isNaN(h=+l.call(null,c,r,e))){var c,u,h,p=Math.round(h/=n),d=Math.round(u=u/t-(1&p)/2),f=h-p;if(3*Math.abs(f)>1){var m=u-d,g=d+(u<d?-1:1)/2,v=p+(h<p?-1:1),y=u-g,x=h-v;m*m+f*f>y*y+x*x&&(d=g+(1&p?1:-1)/2,p=v)}var E=d+"-"+p,b=i[E];b?b.push(c):(a.push(b=i[E]=[c]),b.x=(d+(1&p)/2)*t,b.y=p*n)}return a}function u(e){var t=0,n=0;return D$.map((function(r){var i=Math.sin(r)*e,a=-Math.cos(r)*e,o=i-t,s=a-n;return t=i,n=a,[o,s]}))}return c.hexagon=function(t){return"m"+u(null==t?e:+t).join("l")+"z"},c.centers=function(){for(var s=[],l=Math.round(i/n),c=Math.round(r/t),u=l*n;u<o+e;u+=n,++l)for(var h=c*t+(1&l)*t/2;h<a+t/2;h+=t)s.push([h,u]);return s},c.mesh=function(){var t=u(e).slice(0,4).join("l");return c.centers().map((function(e){return"M"+e+"m"+t})).join("")},c.x=function(e){return arguments.length?(s=e,c):s},c.y=function(e){return arguments.length?(l=e,c):l},c.radius=function(r){return arguments.length?(t=2*(e=+r)*Math.sin(R$),n=1.5*e,c):e},c.size=function(e){return arguments.length?(r=i=0,a=+e[0],o=+e[1],c):[a-r,o-i]},c.extent=function(e){return arguments.length?(r=+e[0][0],i=+e[0][1],a=+e[1][0],o=+e[1][1],c):[[r,i],[a,o]]},c.radius(1)}().radius(c),m=p,g=d,v=f(h),y=c,x=.9*u;let E=a,b=a,C=!1,T=0;if(i){let e="",n="";for(let r=0;r<t.length;r++)t[r].name.length>e.length&&(e=t[r].name),S.toString(t[r].value).length>n.length&&(n=S.toString(t[r].value));E=$$(e,2,x,y),b=$$(n,2,x,y),E<6&&(C=!0,T=18,e=e.substring(0,T+2),E=$$(e,2,x,y),E<6&&(T=10,e=e.substring(0,T+2),E=$$(e,2,x,y),E<6&&(T=6,e=e.substring(0,T+2),E=$$(e,2,x,y)))),b>E&&(b=E)}const w=y/2/2+b/2,k=-y/2/2+E/2;e.attr("width",n).attr("height",r).attr("transform",`translate(${m},${g})`);const _=e.selectAll(".hexagon").data(v),A=_.exit().remove();return _.enter().append((function(){return document.createElementNS("http://www.w3.org/2000/svg","path")})).attr("class","hexagon").on("mousemove",(function(e,n){var r,i;const a=null==(r=t[n])?void 0:r.metric,o=`${`<div><strong>${(null==a?void 0:a.__name__)||"value"}: ${null==(i=t[n])?void 0:i.value}</strong></div>`}${S.map(S.omit(a,"__name__"),((e,t)=>`<div>${t}: ${e}</div>`)).join("")}`;Y$.style("opacity",.9),Y$.html(o).style("left",ce.pageX+10+"px").style("top",ce.pageY-28+"px")})).on("mouseout",(function(){Y$.style("opacity",0)})).attr("stroke","white").attr("stroke-width","1px").style("fill",((e,n)=>{var r;return null==(r=t[n])?void 0:r.color})).style("fill-opacity",1).transition(o).attr("d",(function(e){return"M"+e.x+","+e.y+f.hexagon()})),_.enter().append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y+k})).text((function(e,n){var r;let i=null==(r=t[n])?void 0:r.name;return C?(i=i.substring(0,T)+"...",i):i})).attr("text-anchor","middle").attr("alignment-baseline","central").style("pointer-events","none").style("font-size",E+"px").style("fill","white").each((function(e){e.bbox=this.getBBox()})),E&&_.enter().insert("rect","text").attr("x",(function(e){return e.bbox.x-4})).attr("y",(function(e){return e.bbox.y-4})).attr("rx",2).attr("ry",2).attr("width",(function(e){return e.bbox.width+8})).attr("height",(function(e){return e.bbox.height+8})).attr("fill-opacity","0.2").style("fill","#000").style("pointer-events","none"),_.enter().append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y+w})).text((function(e,n){var r;return null==(r=t[n])?void 0:r.value})).attr("text-anchor","middle").attr("alignment-baseline","central").style("font-size",b+"px").style("fill","white").style("pointer-events","none").each((function(e){e.bbox=this.getBBox()})),b&&_.enter().insert("rect","text").attr("x",(function(e){return e.bbox.x-4})).attr("y",(function(e){return e.bbox.y-4})).attr("rx",2).attr("ry",2).attr("width",(function(e){return e.bbox.width+8})).attr("height",(function(e){return e.bbox.height+8})).attr("fill-opacity","0.2").style("fill","#000").style("pointer-events","none"),[...A.nodes()]}function V$(e,{width:t,height:n,parentGroupEl:r}){const i=le(r).attr("width",t).attr("height",n),a=function(e,t,n){let r=e;for(let i=1,a=1/0;i<=e;i+=1){const o=Math.floor(t/i),s=2*o/3,l=Math.abs(t*n-e*o*s);l<a&&(a=l,r=i)}return r}(1,t,n);U$(i,e,{width:Math.floor(t/a),height:n/Math.ceil(1/a)})}const W$=e=>{const{values:t,series:n}=e,{custom:r={},options:i}=t,{calc:a,colorRange:o=[],reverseColorOrder:c=!1,colorDomainAuto:u,colorDomain:h}=r,p=f.exports.useRef(null),d=f.exports.useRef(null),m=de(d);return f.exports.useEffect((()=>{var e,t;const r=gh(n,a,{util:null==(e=null==i?void 0:i.standardOptions)?void 0:e.util,decimals:null==(t=null==i?void 0:i.standardOptions)?void 0:t.decimals},null==i?void 0:i.valueMappings),d=re().domain(function(e,t,n){if(!t&&(null==n?void 0:n.length))return[n[0],(n[0]+n[1])/2,n[1]];const r=S.get(S.minBy(e,"stat"),"stat"),i=S.get(S.maxBy(e,"stat"),"stat");return void 0!==r&&void 0!==i?[r,(i+r)/2,i]:[]}(r,u,h)).range(c?S.reverse(S.slice(o)):o);if((null==m?void 0:m.width)&&(null==m?void 0:m.height)){const e={width:null==m?void 0:m.width,height:null==m?void 0:m.height,parentGroupEl:p.current},t=S.map(r,(e=>l(s({},e),{value:e.text,color:e.color||d(e.stat)||"#3399CC"})));le(p.current).selectAll("*").remove(),t.length&&V$(t,e)}}),[JSON.stringify(n),JSON.stringify(i),null==m?void 0:m.width,null==m?void 0:m.height,a,o,c,u,h]),f.exports.createElement("div",{ref:d,style:{width:"100%",height:"100%"}},f.exports.createElement("svg",{style:{width:"100%",height:"100%"}},f.exports.createElement("g",{ref:p})))},X$=["http","https","mailto","tel"];function q$(e){return e&&"object"==typeof e?"position"in e||"type"in e?Q$(e.position):"start"in e||"end"in e?Q$(e):"line"in e||"column"in e?K$(e):"":""}function K$(e){return Z$(e&&e.line)+":"+Z$(e&&e.column)}function Q$(e){return K$(e&&e.start)+"-"+K$(e&&e.end)}function Z$(e){return e&&"number"==typeof e?e:1}class J$ extends Error{constructor(e,t,n){const r=[null,null];let i={start:{line:null,column:null},end:{line:null,column:null}};if(super(),"string"==typeof t&&(n=t,t=void 0),"string"==typeof n){const e=n.indexOf(":");-1===e?r[1]=n:(r[0]=n.slice(0,e),r[1]=n.slice(e+1))}t&&("type"in t||"position"in t?t.position&&(i=t.position):"start"in t||"end"in t?i=t:("line"in t||"column"in t)&&(i.start=t)),this.name=q$(t)||"1:1",this.message="object"==typeof e?e.message:e,this.stack="object"==typeof e?e.stack:"",this.reason=this.message,this.fatal,this.line=i.start.line,this.column=i.start.column,this.source=r[0],this.ruleId=r[1],this.position=i,this.actual,this.expected,this.file,this.url,this.note}}J$.prototype.file="",J$.prototype.name="",J$.prototype.reason="",J$.prototype.message="",J$.prototype.stack="",J$.prototype.fatal=null,J$.prototype.column=null,J$.prototype.line=null,J$.prototype.source=null,J$.prototype.ruleId=null,J$.prototype.position=null;const eY={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');tY(e);let n,r=0,i=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.charCodeAt(a)){if(n){r=a+1;break}}else i<0&&(n=!0,i=a+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let o=-1,s=t.length-1;for(;a--;)if(47===e.charCodeAt(a)){if(n){r=a+1;break}}else o<0&&(n=!0,o=a+1),s>-1&&(e.charCodeAt(a)===t.charCodeAt(s--)?s<0&&(i=a):(s=-1,i=o));r===i?i=o:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(tY(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.charCodeAt(0)?"/":".":1===n&&47===e.charCodeAt(0)?"//":e.slice(0,n)},extname:function(e){tY(e);let t,n=e.length,r=-1,i=0,a=-1,o=0;for(;n--;){const s=e.charCodeAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?a<0?a=n:1!==o&&(o=1):a>-1&&(o=-1);else if(t){i=n+1;break}}if(a<0||r<0||0===o||1===o&&a===r-1&&a===i+1)return"";return e.slice(a,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)tY(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){tY(e);const t=47===e.charCodeAt(0);let n=function(e,t){let n,r,i="",a=0,o=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(o===l-1||1===s);else if(o!==l-1&&2===s){if(i.length<2||2!==a||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){if(r=i.lastIndexOf("/"),r!==i.length-1){r<0?(i="",a=0):(i=i.slice(0,r),a=i.length-1-i.lastIndexOf("/")),o=l,s=0;continue}}else if(i.length>0){i="",a=0,o=l,s=0;continue}t&&(i=i.length>0?i+"/..":"..",a=2)}else i.length>0?i+="/"+e.slice(o+1,l):i=e.slice(o+1,l),a=l-o-1;o=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.charCodeAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function tY(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const nY={cwd:function(){return"/"}};function rY(e){return null!==e&&"object"==typeof e&&e.href&&e.origin}function iY(e){if("string"==typeof e)e=new URL(e);else if(!rY(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.charCodeAt(n)&&50===t.charCodeAt(n+1)){const e=t.charCodeAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const aY=["history","path","basename","stem","extname","dirname"];class oY{constructor(e){let t;t=e?"string"==typeof e||function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)?{value:e}:rY(e)?{path:e}:e:{},this.data={},this.messages=[],this.history=[],this.cwd=nY.cwd(),this.value,this.stored,this.result,this.map;let n,r=-1;for(;++r<aY.length;){const e=aY[r];e in t&&void 0!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)aY.includes(n)||(this[n]=t[n])}get path(){return this.history[this.history.length-1]}set path(e){rY(e)&&(e=iY(e)),lY(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return"string"==typeof this.path?eY.dirname(this.path):void 0}set dirname(e){cY(this.basename,"dirname"),this.path=eY.join(e||"",this.basename)}get basename(){return"string"==typeof this.path?eY.basename(this.path):void 0}set basename(e){lY(e,"basename"),sY(e,"basename"),this.path=eY.join(this.dirname||"",e)}get extname(){return"string"==typeof this.path?eY.extname(this.path):void 0}set extname(e){if(sY(e,"extname"),cY(this.dirname,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=eY.join(this.dirname,this.stem+(e||""))}get stem(){return"string"==typeof this.path?eY.basename(this.path,this.extname):void 0}set stem(e){lY(e,"stem"),sY(e,"stem"),this.path=eY.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e)}message(e,t,n){const r=new J$(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=null,r}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}}function sY(e,t){if(e&&e.includes(eY.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+eY.sep+"`")}function lY(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function cY(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function uY(e){if(e)throw e}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hY=Object.prototype.hasOwnProperty,pY=Object.prototype.toString,dY=Object.defineProperty,fY=Object.getOwnPropertyDescriptor,mY=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===pY.call(e)},gY=function(e){if(!e||"[object Object]"!==pY.call(e))return!1;var t,n=hY.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&hY.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||hY.call(e,t)},vY=function(e,t){dY&&"__proto__"===t.name?dY(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},yY=function(e,t){if("__proto__"===t){if(!hY.call(e,t))return;if(fY)return fY(e,t).value}return e[t]},xY=function e(){var t,n,r,i,a,o,s=arguments[0],l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),(null==s||"object"!=typeof s&&"function"!=typeof s)&&(s={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)r=yY(s,n),s!==(i=yY(t,n))&&(u&&i&&(gY(i)||(a=mY(i)))?(a?(a=!1,o=r&&mY(r)?r:[]):o=r&&gY(r)?r:{},vY(s,{name:n,newValue:e(u,o,i)})):void 0!==i&&vY(s,{name:n,newValue:i}));return s};function EY(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function bY(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function i(a,...o){const s=e[++n];let l=-1;if(a)r(a);else{for(;++l<t.length;)null!==o[l]&&void 0!==o[l]||(o[l]=t[l]);t=o,s?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let s;r&&t.push(i);try{s=e.apply(this,t)}catch(a){const t=a;if(r&&n)throw t;return i(t)}r||(s instanceof Promise?s.then(o,i):s instanceof Error?i(s):o(s))}function i(e,...r){n||(n=!0,t(e,...r))}function o(e){i(null,e)}}(s,i)(...o):r(null,...o)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const CY=function e(){const t=bY(),n=[];let r,i={},a=-1;return o.data=function(e,t){if("string"==typeof e)return 2===arguments.length?(_Y("data",r),i[e]=t,o):TY.call(i,e)&&i[e]||null;if(e)return _Y("data",r),i=e,o;return i},o.Parser=void 0,o.Compiler=void 0,o.freeze=function(){if(r)return o;for(;++a<n.length;){const[e,...r]=n[a];if(!1===r[0])continue;!0===r[0]&&(r[0]=void 0);const i=e.call(o,...r);"function"==typeof i&&t.use(i)}return r=!0,a=Number.POSITIVE_INFINITY,o},o.attachers=n,o.use=function(e,...t){let a;if(_Y("use",r),null==e);else if("function"==typeof e)u(e,...t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?c(e):l(e)}a&&(i.settings=Object.assign(i.settings||{},a));return o;function s(e){if("function"==typeof e)u(e);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;u(t,...n)}else l(e)}}function l(e){c(e.plugins),e.settings&&(a=Object.assign(a||{},e.settings))}function c(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function u(e,t){let r,i=-1;for(;++i<n.length;)if(n[i][0]===e){r=n[i];break}r?(EY(r[1])&&EY(t)&&(t=xY(!0,r[1],t)),r[1]=t):n.push([...arguments])}},o.parse=function(e){o.freeze();const t=IY(e),n=o.Parser;if(SY("parse",n),wY(n,"parse"))return new n(String(t),t).parse();return n(String(t),t)},o.stringify=function(e,t){o.freeze();const n=IY(t),r=o.Compiler;if(kY("stringify",r),AY(e),wY(r,"compile"))return new r(e,n).compile();return r(e,n)},o.run=function(e,n,r){AY(e),o.freeze(),r||"function"!=typeof n||(r=n,n=void 0);if(!r)return new Promise(i);function i(i,a){function o(t,n,o){n=n||e,t?a(t):i?i(n):r(null,n,o)}t.run(e,IY(n),o)}i(null,r)},o.runSync=function(e,t){let n,r;return o.run(e,t,i),OY("runSync","run",r),n;function i(e,t){uY(e),n=t,r=!0}},o.process=function(e,t){if(o.freeze(),SY("process",o.Parser),kY("process",o.Compiler),!t)return new Promise(n);function n(n,r){const i=IY(e);function a(e,i){e||!i?r(e):n?n(i):t(null,i)}o.run(o.parse(i),i,((e,t,n)=>{if(!e&&t&&n){const r=o.stringify(t,n);null==r||(!function(e){return"string"==typeof e||function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)}(r)?n.result=r:n.value=r),a(e,n)}else a(e)}))}n(null,t)},o.processSync=function(e){let t;o.freeze(),SY("processSync",o.Parser),kY("processSync",o.Compiler);const n=IY(e);return o.process(n,r),OY("processSync","process",t),n;function r(e){t=!0,uY(e)}},o;function o(){const t=e();let r=-1;for(;++r<n.length;)t.use(...n[r]);return t.data(xY(!0,{},i)),t}}().freeze(),TY={}.hasOwnProperty;function wY(e,t){return"function"==typeof e&&e.prototype&&(function(e){let t;for(t in e)if(TY.call(e,t))return!0;return!1}(e.prototype)||t in e.prototype)}function SY(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `Parser`")}function kY(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `Compiler`")}function _Y(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function AY(e){if(!EY(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function OY(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function IY(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new oY(e)}function MY(e,t){return e&&"object"==typeof e&&(e.value||(t?e.alt:"")||"children"in e&&NY(e.children,t)||Array.isArray(e)&&NY(e,t))||""}function NY(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=MY(e[r],t);return n.join("")}function FY(e,t,n,r){const i=e.length;let a,o=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),[].splice.apply(e,a);else for(n&&[].splice.apply(e,[t,n]);o<r.length;)a=r.slice(o,o+1e4),a.unshift(t,0),[].splice.apply(e,a),o+=1e4,t+=1e4}function LY(e,t){return e.length>0?(FY(e,e.length,0,t),e):t}const PY={}.hasOwnProperty;function RY(e,t){let n;for(n in t){const r=(PY.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;for(a in i){PY.call(r,a)||(r[a]=[]);const e=i[a];DY(r[a],Array.isArray(e)?e:e?[e]:[])}}}function DY(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);FY(e,0,0,r)}const BY=KY(/[A-Za-z]/),zY=KY(/\d/),HY=KY(/[\dA-Fa-f]/),jY=KY(/[\dA-Za-z]/),GY=KY(/[!-/:-@[-`{-~]/),$Y=KY(/[#-'*+\--9=?A-Z^-~]/);function YY(e){return null!==e&&(e<32||127===e)}function UY(e){return null!==e&&(e<0||32===e)}function VY(e){return null!==e&&e<-2}function WY(e){return-2===e||-1===e||32===e}const XY=KY(/\s/),qY=KY(/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/);function KY(e){return function(t){return null!==t&&e.test(String.fromCharCode(t))}}function QY(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return function(r){if(WY(r))return e.enter(n),o(r);return t(r)};function o(r){return WY(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}}const ZY={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),QY(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):VY(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const JY={tokenize:function(e){const t=this,n=[];let r,i,a,o=0;return s;function s(r){if(o<n.length){const i=n[o];return t.containerState=i[1],e.attempt(i[0].continuation,l,c)(r)}return c(r)}function l(e){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let i,a=n;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){i=t.events[a][1].end;break}v(o);let s=n;for(;s<t.events.length;)t.events[s][1].end=Object.assign({},i),s++;return FY(t.events,a+1,0,t.events.slice(n)),t.events.length=s,c(e)}return s(e)}function c(i){if(o===n.length){if(!r)return p(i);if(r.currentConstruct&&r.currentConstruct.concrete)return f(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(eU,u,h)(i)}function u(e){return r&&y(),v(o),p(e)}function h(e){return t.parser.lazy[t.now().line]=o!==n.length,a=t.now().offset,f(e)}function p(n){return t.containerState={},e.attempt(eU,d,f)(n)}function d(e){return o++,n.push([t.currentConstruct,t.containerState]),p(e)}function f(n){return null===n?(r&&y(),v(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:r}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),v(0),void e.consume(n)):VY(n)?(e.consume(n),g(e.exit("chunkFlow")),o=0,t.interrupt=void 0,s):(e.consume(n),m)}function g(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<a&&(!r.events[e][1].end||r.events[e][1].end.offset>a))return;const n=t.events.length;let i,s,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){s=t.events[l][1].end;break}i=!0}for(v(o),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},s),e++;FY(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function v(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},eU={tokenize:function(e,t,n){return QY(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function tU(e){return null===e||UY(e)||XY(e)?1:qY(e)?2:void 0}function nU(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const rU={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=tU(r);let a;return function(t){return e.enter("attentionSequence"),a=t,o(t)};function o(s){if(s===a)return e.consume(s),o;const l=e.exit("attentionSequence"),c=tU(s),u=!c||2===c&&i||n.includes(s),h=!i||2===i&&c||n.includes(r);return l._open=Boolean(42===a?u:u&&(i||!h)),l._close=Boolean(42===a?h:h&&(c||!u)),t(s)}},resolveAll:function(e,t){let n,r,i,a,o,s,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const h=Object.assign({},e[n][1].end),p=Object.assign({},e[u][1].start);iU(h,-s),iU(p,s),a={type:s>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},e[n][1].end)},o={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:p},i={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},e[n][1].end=Object.assign({},a.start),e[u][1].start=Object.assign({},o.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=LY(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=LY(l,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",i,t]]),l=LY(l,nU(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=LY(l,[["exit",i,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=LY(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,FY(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function iU(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const aU={name:"autolink",tokenize:function(e,t,n){let r=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return BY(t)?(e.consume(t),a):$Y(t)?l(t):n(t)}function a(e){return 43===e||45===e||46===e||jY(e)?o(e):l(e)}function o(t){return 58===t?(e.consume(t),s):(43===t||45===t||46===t||jY(t))&&r++<32?(e.consume(t),o):l(t)}function s(t){return 62===t?(e.exit("autolinkProtocol"),p(t)):null===t||32===t||60===t||YY(t)?n(t):(e.consume(t),s)}function l(t){return 64===t?(e.consume(t),r=0,c):$Y(t)?(e.consume(t),l):n(t)}function c(e){return jY(e)?u(e):n(e)}function u(t){return 46===t?(e.consume(t),r=0,c):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",p(t)):h(t)}function h(t){return(45===t||jY(t))&&r++<63?(e.consume(t),45===t?h:u):n(t)}function p(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}};const oU={tokenize:function(e,t,n){return QY(e,(function(e){return null===e||VY(e)?t(e):n(e)}),"linePrefix")},partial:!0};const sU={name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return WY(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return QY(e,e.attempt(sU,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},exit:function(e){e.exit("blockQuote")}};const lU={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return GY(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const cU=document.createElement("i");function uU(e){const t="&"+e+";";cU.innerHTML=t;const n=cU.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const hU={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,a,o=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,a=jY,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=HY,c):(e.enter("characterReferenceValue"),i=7,a=zY,c(t))}function c(s){let l;return 59===s&&o?(l=e.exit("characterReferenceValue"),a!==jY||uU(r.sliceSerialize(l))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)):a(s)&&o++<i?(e.consume(s),c):n(s)}}};const pU={name:"codeFenced",tokenize:function(e,t,n){const r=this,i={tokenize:function(e,t,n){let r=0;return QY(e,i,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function i(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),a(t)}function a(t){return t===l?(e.consume(t),r++,a):r<c?n(t):(e.exit("codeFencedFenceSequence"),QY(e,o,"whitespace")(t))}function o(r){return null===r||VY(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},a={tokenize:function(e,t,n){const r=this;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a}function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},o=this.events[this.events.length-1],s=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0;let l,c=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=t,u(t)};function u(t){return t===l?(e.consume(t),c++,u):(e.exit("codeFencedFenceSequence"),c<3?n(t):QY(e,h,"whitespace")(t))}function h(t){return null===t||VY(t)?m(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||UY(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),QY(e,d,"whitespace")(t)):96===t&&t===l?n(t):(e.consume(t),p)}function d(t){return null===t||VY(t)?m(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||VY(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(t)):96===t&&t===l?n(t):(e.consume(t),f)}function m(n){return e.exit("codeFencedFence"),r.interrupt?t(n):g(n)}function g(t){return null===t?y(t):VY(t)?e.attempt(a,e.attempt(i,y,s?QY(e,g,"linePrefix",s+1):g),y)(t):(e.enter("codeFlowValue"),v(t))}function v(t){return null===t||VY(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),v)}function y(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const dU={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),QY(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?a(e):n(e)}function a(t){return null===t?s(t):VY(t)?e.attempt(fU,a,s)(t):(e.enter("codeFlowValue"),o(t))}function o(t){return null===t||VY(t)?(e.exit("codeFlowValue"),a(t)):(e.consume(t),o)}function s(n){return e.exit("codeIndented"),t(n)}}},fU={tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):VY(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):QY(e,a,"linePrefix",5)(t)}function a(e){const a=r.events[r.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):VY(e)?i(e):n(e)}},partial:!0};const mU={name:"codeText",tokenize:function(e,t,n){let r,i,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),o(t)};function o(t){return 96===t?(e.consume(t),a++,o):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):96===t?(i=e.enter("codeTextSequence"),r=0,c(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):VY(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||VY(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}},resolve:function(e){let t,n,r=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};function gU(e){const t={};let n,r,i,a,o,s,l,c=-1;for(;++c<e.length;){for(;c in t;)c=t[c];if(n=e[c],c&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[c-1][1].type&&(s=n[1]._tokenizer.events,i=0,i<s.length&&"lineEndingBlank"===s[i][1].type&&(i+=2),i<s.length&&"content"===s[i][1].type))for(;++i<s.length&&"content"!==s[i][1].type;)"chunkText"===s[i][1].type&&(s[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,vU(e,c)),c=t[c],l=!0);else if(n[1]._container){for(i=c,r=void 0;i--&&(a=e[i],"lineEnding"===a[1].type||"lineEndingBlank"===a[1].type);)"enter"===a[0]&&(r&&(e[r][1].type="lineEndingBlank"),a[1].type="lineEnding",r=i);r&&(n[1].end=Object.assign({},e[r][1].start),o=e.slice(r,c),o.unshift(n),FY(e,r,c-r+1,o))}}return!l}function vU(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const a=[],o=n._tokenizer||r.parser[n.contentType](n.start),s=o.events,l=[],c={};let u,h,p=-1,d=n,f=0,m=0;const g=[m];for(;d;){for(;e[++i][1]!==d;);a.push(i),d._tokenizer||(u=r.sliceStream(d),d.next||u.push(null),h&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=n;++p<s.length;)"exit"===s[p][0]&&"enter"===s[p-1][0]&&s[p][1].type===s[p-1][1].type&&s[p][1].start.line!==s[p][1].end.line&&(m=p+1,g.push(m),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):g.pop(),p=g.length;p--;){const t=s.slice(g[p],g[p+1]),n=a.pop();l.unshift([n,n+t.length-1]),FY(e,n,2,t)}for(p=-1;++p<l.length;)c[f+l[p][0]]=f+l[p][1],f+=l[p][1]-l[p][0]-1;return c}const yU={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):VY(t)?e.check(xU,a,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return gU(e),e}},xU={tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),QY(e,i,"linePrefix")};function i(i){if(null===i||VY(i))return n(i);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}},partial:!0};function EU(e,t,n,r,i,a,o,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(a),e.consume(t),e.exit(a),h;if(null===t||41===t||YY(t))return n(t);return e.enter(r),e.enter(o),e.enter(s),e.enter("chunkString",{contentType:"string"}),f(t)};function h(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return 62===t?(e.exit("chunkString"),e.exit(s),h(t)):null===t||60===t||VY(t)?n(t):(e.consume(t),92===t?d:p)}function d(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function f(i){return 40===i?++u>c?n(i):(e.consume(i),f):41===i?u--?(e.consume(i),f):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):null===i||UY(i)?u?n(i):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):YY(i)?n(i):(e.consume(i),92===i?m:f)}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function bU(e,t,n,r,i,a){const o=this;let s,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(a),c};function c(h){return null===h||91===h||93===h&&!s||94===h&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs||l>999?n(h):93===h?(e.exit(a),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):VY(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(t){return null===t||91===t||93===t||VY(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),s=s||!WY(t),92===t?h:u)}function h(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function CU(e,t,n,r,i,a){let o;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),o=40===t?41:t,s};function s(n){return n===o?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(a),l(n))}function l(t){return t===o?(e.exit(a),s(o)):null===t?n(t):VY(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),QY(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===o||null===t||VY(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===o||92===t?(e.consume(t),c):c(t)}}function TU(e,t){let n;return function r(i){if(VY(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(WY(i))return QY(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}function wU(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const SU={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),bU.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function a(t){return i=wU(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),TU(e,EU(e,e.attempt(kU,QY(e,o,"whitespace"),QY(e,o,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function o(a){return null===a||VY(a)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(a)):n(a)}}},kU={tokenize:function(e,t,n){return function(t){return UY(t)?TU(e,r)(t):n(t)};function r(t){return 34===t||39===t||40===t?CU(e,QY(e,i,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function i(e){return null===e||VY(e)?t(e):n(e)}},partial:!0};const _U={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return VY(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}};const AU={name:"headingAtx",tokenize:function(e,t,n){const r=this;let i=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),a(t)};function a(s){return 35===s&&i++<6?(e.consume(s),a):null===s||UY(s)?(e.exit("atxHeadingSequence"),r.interrupt?t(s):o(s)):n(s)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),s(n)):null===n||VY(n)?(e.exit("atxHeading"),t(n)):WY(n)?QY(e,o,"whitespace")(n):(e.enter("atxHeadingText"),l(n))}function s(t){return 35===t?(e.consume(t),s):(e.exit("atxHeadingSequence"),o(t))}function l(t){return null===t||35===t||UY(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),l)}},resolve:function(e,t){let n,r,i=e.length-2,a=3;"whitespace"===e[a][1].type&&(a+=2);i-2>a&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(a===i-1||i-4>a&&"whitespace"===e[i-2][1].type)&&(i-=a+1===i?2:4);i>a&&(n={type:"atxHeadingText",start:e[a][1].start,end:e[i][1].end},r={type:"chunkText",start:e[a][1].start,end:e[i][1].end,contentType:"text"},FY(e,a,i-a+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};const OU=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],IU=["pre","script","style","textarea"],MU={name:"htmlFlow",tokenize:function(e,t,n){const r=this;let i,a,o,s,l;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c};function c(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),d):63===s?(e.consume(s),i=3,r.interrupt?t:L):BY(s)?(e.consume(s),o=String.fromCharCode(s),a=!0,f):n(s)}function u(a){return 45===a?(e.consume(a),i=2,h):91===a?(e.consume(a),i=5,o="CDATA[",s=0,p):BY(a)?(e.consume(a),i=4,r.interrupt?t:L):n(a)}function h(i){return 45===i?(e.consume(i),r.interrupt?t:L):n(i)}function p(i){return i===o.charCodeAt(s++)?(e.consume(i),s===o.length?r.interrupt?t:k:p):n(i)}function d(t){return BY(t)?(e.consume(t),o=String.fromCharCode(t),f):n(t)}function f(s){return null===s||47===s||62===s||UY(s)?47!==s&&a&&IU.includes(o.toLowerCase())?(i=1,r.interrupt?t(s):k(s)):OU.includes(o.toLowerCase())?(i=6,47===s?(e.consume(s),m):r.interrupt?t(s):k(s)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):a?v(s):g(s)):45===s||jY(s)?(e.consume(s),o+=String.fromCharCode(s),f):n(s)}function m(i){return 62===i?(e.consume(i),r.interrupt?t:k):n(i)}function g(t){return WY(t)?(e.consume(t),g):w(t)}function v(t){return 47===t?(e.consume(t),w):58===t||95===t||BY(t)?(e.consume(t),y):WY(t)?(e.consume(t),v):w(t)}function y(t){return 45===t||46===t||58===t||95===t||jY(t)?(e.consume(t),y):x(t)}function x(t){return 61===t?(e.consume(t),E):WY(t)?(e.consume(t),x):v(t)}function E(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,b):WY(t)?(e.consume(t),E):(l=null,C(t))}function b(t){return null===t||VY(t)?n(t):t===l?(e.consume(t),T):(e.consume(t),b)}function C(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||UY(t)?x(t):(e.consume(t),C)}function T(e){return 47===e||62===e||WY(e)?v(e):n(e)}function w(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return WY(t)?(e.consume(t),S):null===t||VY(t)?k(t):n(t)}function k(t){return 45===t&&2===i?(e.consume(t),I):60===t&&1===i?(e.consume(t),M):62===t&&4===i?(e.consume(t),P):63===t&&3===i?(e.consume(t),L):93===t&&5===i?(e.consume(t),F):!VY(t)||6!==i&&7!==i?null===t||VY(t)?_(t):(e.consume(t),k):e.check(NU,P,_)(t)}function _(t){return e.exit("htmlFlowData"),A(t)}function A(t){return null===t?R(t):VY(t)?e.attempt({tokenize:O,partial:!0},A,R)(t):(e.enter("htmlFlowData"),k(t))}function O(e,t,n){return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}function I(t){return 45===t?(e.consume(t),L):k(t)}function M(t){return 47===t?(e.consume(t),o="",N):k(t)}function N(t){return 62===t&&IU.includes(o.toLowerCase())?(e.consume(t),P):BY(t)&&o.length<8?(e.consume(t),o+=String.fromCharCode(t),N):k(t)}function F(t){return 93===t?(e.consume(t),L):k(t)}function L(t){return 62===t?(e.consume(t),P):45===t&&2===i?(e.consume(t),L):k(t)}function P(t){return null===t||VY(t)?(e.exit("htmlFlowData"),R(t)):(e.consume(t),P)}function R(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},NU={tokenize:function(e,t,n){return function(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(oU,t,n)}},partial:!0};const FU={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,a,o,s;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l};function l(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),C):63===t?(e.consume(t),E):BY(t)?(e.consume(t),S):n(t)}function c(t){return 45===t?(e.consume(t),u):91===t?(e.consume(t),a="CDATA[",o=0,m):BY(t)?(e.consume(t),x):n(t)}function u(t){return 45===t?(e.consume(t),h):n(t)}function h(t){return null===t||62===t?n(t):45===t?(e.consume(t),p):d(t)}function p(e){return null===e||62===e?n(e):d(e)}function d(t){return null===t?n(t):45===t?(e.consume(t),f):VY(t)?(s=d,F(t)):(e.consume(t),d)}function f(t){return 45===t?(e.consume(t),P):d(t)}function m(t){return t===a.charCodeAt(o++)?(e.consume(t),o===a.length?g:m):n(t)}function g(t){return null===t?n(t):93===t?(e.consume(t),v):VY(t)?(s=g,F(t)):(e.consume(t),g)}function v(t){return 93===t?(e.consume(t),y):g(t)}function y(t){return 62===t?P(t):93===t?(e.consume(t),y):g(t)}function x(t){return null===t||62===t?P(t):VY(t)?(s=x,F(t)):(e.consume(t),x)}function E(t){return null===t?n(t):63===t?(e.consume(t),b):VY(t)?(s=E,F(t)):(e.consume(t),E)}function b(e){return 62===e?P(e):E(e)}function C(t){return BY(t)?(e.consume(t),T):n(t)}function T(t){return 45===t||jY(t)?(e.consume(t),T):w(t)}function w(t){return VY(t)?(s=w,F(t)):WY(t)?(e.consume(t),w):P(t)}function S(t){return 45===t||jY(t)?(e.consume(t),S):47===t||62===t||UY(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),P):58===t||95===t||BY(t)?(e.consume(t),_):VY(t)?(s=k,F(t)):WY(t)?(e.consume(t),k):P(t)}function _(t){return 45===t||46===t||58===t||95===t||jY(t)?(e.consume(t),_):A(t)}function A(t){return 61===t?(e.consume(t),O):VY(t)?(s=A,F(t)):WY(t)?(e.consume(t),A):k(t)}function O(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,I):VY(t)?(s=O,F(t)):WY(t)?(e.consume(t),O):(e.consume(t),i=void 0,N)}function I(t){return t===i?(e.consume(t),M):null===t?n(t):VY(t)?(s=I,F(t)):(e.consume(t),I)}function M(e){return 62===e||47===e||UY(e)?k(e):n(e)}function N(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||UY(t)?k(t):(e.consume(t),N)}function F(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),QY(e,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function L(t){return e.enter("htmlTextData"),s(t)}function P(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}}};const LU={name:"labelEnd",tokenize:function(e,t,n){const r=this;let i,a,o=r.events.length;for(;o--;)if(("labelImage"===r.events[o][1].type||"labelLink"===r.events[o][1].type)&&!r.events[o][1]._balanced){i=r.events[o][1];break}return function(t){if(!i)return n(t);return i._inactive?l(t):(a=r.parser.defined.includes(wU(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s)};function s(n){return 40===n?e.attempt(PU,t,a?t:l)(n):91===n?e.attempt(RU,t,a?e.attempt(DU,t,l):l)(n):a?t(n):l(n)}function l(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,i,a,o=e.length,s=0;for(;o--;)if(n=e[o][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[o][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[o][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=o,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=o);const l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[i-2][1].start)};return a=[["enter",l,t],["enter",c,t]],a=LY(a,e.slice(r+1,r+s+3)),a=LY(a,[["enter",u,t]]),a=LY(a,nU(t.parser.constructs.insideSpan.null,e.slice(r+s+4,i-3),t)),a=LY(a,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),a=LY(a,e.slice(i+1)),a=LY(a,[["exit",l,t]]),FY(e,r,e.length,a),e},resolveAll:function(e){let t,n=-1;for(;++n<e.length;)t=e[n][1],"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},PU={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),TU(e,r)};function r(t){return 41===t?o(t):EU(e,i,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return UY(t)?TU(e,a)(t):o(t)}function a(t){return 34===t||39===t||40===t?CU(e,TU(e,o),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):o(t)}function o(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},RU={tokenize:function(e,t,n){const r=this;return function(t){return bU.call(r,e,i,n,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(wU(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}}},DU={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const BU={name:"labelStartImage",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:LU.resolveAll};const zU={name:"labelStartLink",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:LU.resolveAll};const HU={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),QY(e,t,"linePrefix")}}};const jU={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),r=t,a(t)};function a(s){return s===r?(e.enter("thematicBreakSequence"),o(s)):WY(s)?QY(e,a,"whitespace")(s):i<3||null!==s&&!VY(s)?n(s):(e.exit("thematicBreak"),t(s))}function o(t){return t===r?(e.consume(t),i++,o):(e.exit("thematicBreakSequence"),a(t))}}};const GU={name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,o=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:zY(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(jU,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return zY(t)&&++o<10?(e.consume(t),s):(!r.interrupt||o<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(oU,r.interrupt?n:c,e.attempt($U,h,u))}function c(e){return r.containerState.initialBlankLine=!0,a++,h(e)}function u(t){return WY(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),h):n(t)}function h(n){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(oU,i,a);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,QY(e,t,"listItemIndent",r.containerState.size+1)(n)}function a(n){return r.containerState.furtherBlankLines||!WY(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(YU,t,o)(n))}function o(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,QY(e,e.attempt(GU,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},$U={tokenize:function(e,t,n){const r=this;return QY(e,(function(e){const i=r.events[r.events.length-1];return!WY(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},YU={tokenize:function(e,t,n){const r=this;return QY(e,(function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};const UU={name:"setextUnderline",tokenize:function(e,t,n){const r=this;let i,a,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){a="paragraph"===r.events[o][1].type;break}return function(t){if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),i=t,s(t);return n(t)};function s(t){return t===i?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),QY(e,l,"lineSuffix")(t))}function l(r){return null===r||VY(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,i,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),i||"definition"!==e[a][1].type||(i=a);const o={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=o;return e.push(["exit",o,t]),e}};const VU={tokenize:function(e){const t=this,n=e.attempt(oU,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,QY(e,e.attempt(this.parser.constructs.flow,r,e.attempt(yU,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const WU={resolveAll:QU()},XU=KU("string"),qU=KU("text");function KU(e){return{tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,a,o);return a;function a(e){return l(e)?i(e):o(e)}function o(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:QU("text"===e?ZU:void 0)}}function QU(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function ZU(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let a,o=i.length,s=-1,l=0;for(;o--;){const e=i[o];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)a=!0,l++;else if(-1!==e){o++;break}}if(l){const i={type:n===e.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+o,_bufferIndex:o?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}function JU(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},a=[];let o=[],s=[];const l={consume:function(e){VY(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,y()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=p(),c.events.push(["enter",n,c]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=p(),c.events.push(["exit",t,c]),t},attempt:g((function(e,t){v(e,t.from)})),check:g(m),interrupt:g(m,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if("string"==typeof a)o=a;else switch(a){case-5:o="\r";break;case-4:o="\n";break;case-3:o="\r\n";break;case-2:o=t?" ":"\t";break;case-1:if(!t&&i)continue;o=" ";break;default:o=String.fromCharCode(a)}i=-2===a,r.push(o)}return r.join("")}(h(e),t)},now:p,defineSkip:function(e){i[e.line]=e.column,y()},write:function(e){if(o=LY(o,e),d(),null!==o[o.length-1])return[];return v(t,0),c.events=nU(a,c.events,c),c.events}};let u=t.tokenize.call(c,l);return t.resolveAll&&a.push(t),c;function h(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;n===i?o=[e[n].slice(r,a)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),a>0&&o.push(e[i].slice(0,a)));return o}(o,e)}function p(){return Object.assign({},r)}function d(){let e;for(;r._index<o.length;){const t=o[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)f(t.charCodeAt(r._bufferIndex));else f(t)}}function f(e){u=u(e)}function m(e,t){t.restore()}function g(e,t){return function(n,i,a){let o,u,h,d;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function f(e){return o=e,u=0,0===e.length?a:m(e[u])}function m(e){return function(n){d=function(){const e=p(),t=c.previous,n=c.currentConstruct,i=c.events.length,a=Array.from(s);return{restore:o,from:i};function o(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=i,s=a,y()}}(),h=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return v();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,v)(n)}}function g(t){return e(h,d),i}function v(e){return d.restore(),++u<o.length?m(o[u]):a}}}function v(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&FY(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function y(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}const eV={42:GU,43:GU,45:GU,48:GU,49:GU,50:GU,51:GU,52:GU,53:GU,54:GU,55:GU,56:GU,57:GU,62:sU},tV={91:SU},nV={[-2]:dU,[-1]:dU,32:dU},rV={35:AU,42:jU,45:[UU,jU],60:MU,61:UU,95:jU,96:pU,126:pU},iV={38:hU,92:lU},aV={[-5]:HU,[-4]:HU,[-3]:HU,33:BU,38:hU,42:rU,60:[aU,FU],91:zU,92:[_U,lU],93:LU,95:rU,96:mU},oV={null:[rU,WU]};var sV=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",document:eV,contentInitial:tV,flowInitial:nV,flow:rV,string:iV,text:aV,insideSpan:oV,attentionMarkers:{null:[42,95]},disable:{null:[]}});function lV(e={}){const t={defined:[],lazy:{},constructs:function(e){const t={};let n=-1;for(;++n<e.length;)RY(t,e[n]);return t}([sV].concat(e.extensions||[])),content:n(ZY),document:n(JY),flow:n(VU),string:n(XU),text:n(qU)};return t;function n(e){return function(n){return JU(t,e,n)}}}const cV=/[\0\t\n\r]/g;function uV(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535==(65535&n)||65534==(65535&n)||n>1114111?"�":String.fromCharCode(n)}const hV=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function pV(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return uV(n.slice(t?2:1),t?16:10)}return uU(n)||e}const dV={}.hasOwnProperty,fV=function(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e={}){const t=mV({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(re),autolinkProtocol:A,autolinkEmail:A,atxHeading:l(J),blockQuote:l(X),characterEscape:A,characterReference:A,codeFenced:l(q),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(q,c),codeText:l(K,c),codeTextData:A,data:A,codeFlowValue:A,definition:l(Q),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l(Z),hardBreakEscape:l(ee),hardBreakTrailing:l(ee),htmlFlow:l(te,c),htmlFlowData:A,htmlText:l(te,c),htmlTextData:A,image:l(ne),label:c,link:l(re),listItem:l(ae),listItemValue:m,listOrdered:l(ie,f),listUnordered:l(ie),paragraph:l(oe),reference:G,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(J),strong:l(se),thematicBreak:l(ce)},exit:{atxHeading:h(),atxHeadingSequence:w,autolink:h(),autolinkEmail:W,autolinkProtocol:V,blockQuote:h(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:Y,characterReferenceMarkerNumeric:Y,characterReferenceValue:U,codeFenced:h(x),codeFencedFence:y,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:O,codeIndented:h(E),codeText:h(L),codeTextData:O,data:O,definition:h(),definitionDestinationString:T,definitionLabelString:b,definitionTitleString:C,emphasis:h(),hardBreakEscape:h(M),hardBreakTrailing:h(M),htmlFlow:h(N),htmlFlowData:O,htmlText:h(F),htmlTextData:O,image:h(R),label:B,labelText:D,lineEnding:I,link:h(P),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:$,resourceDestinationString:z,resourceTitleString:H,resource:j,setextHeading:h(_),setextHeadingLineSequence:k,setextHeadingText:S,strong:h(),thematicBreak:h()}},e.mdastExtensions||[]),n={};return r;function r(e){let n={type:"root",children:[]};const r=[],l=[],h={stack:[n],tokenStack:r,config:t,enter:u,exit:p,buffer:c,resume:d,setData:a,getData:o};let f=-1;for(;++f<e.length;)if("listOrdered"===e[f][1].type||"listUnordered"===e[f][1].type)if("enter"===e[f][0])l.push(f);else{f=i(e,l.pop(),f)}for(f=-1;++f<e.length;){const n=t[e[f][0]];dV.call(n,e[f][1].type)&&n[e[f][1].type].call(Object.assign({sliceSerialize:e[f][2].sliceSerialize},h),e[f][1])}if(r.length>0){const e=r[r.length-1];(e[1]||vV).call(h,void 0,e[0])}for(n.position={start:s(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:s(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},f=-1;++f<t.transforms.length;)n=t.transforms[f](n)||n;return n}function i(e,t,n){let r,i,a,o,s=t-1,l=-1,c=!1;for(;++s<=n;){const t=e[s];if("listUnordered"===t[1].type||"listOrdered"===t[1].type||"blockQuote"===t[1].type?("enter"===t[0]?l++:l--,o=void 0):"lineEndingBlank"===t[1].type?"enter"===t[0]&&(!r||o||l||a||(a=s),o=void 0):"linePrefix"===t[1].type||"listItemValue"===t[1].type||"listItemMarker"===t[1].type||"listItemPrefix"===t[1].type||"listItemPrefixWhitespace"===t[1].type||(o=void 0),!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let o=s;for(i=void 0;o--;){const t=e[o];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=o}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}a&&(!i||a<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",r,t[2]]),s++,n++}"listItemPrefix"===t[1].type&&(r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start)},e.splice(s,0,["enter",r,t[2]]),s++,n++,a=void 0,o=!0)}}return e[t][1]._spread=c,n}function a(e,t){n[e]=t}function o(e){return n[e]}function s(e){return{line:e.line,column:e.column,offset:e.offset}}function l(e,t){return n;function n(n){u.call(this,e(n),n),t&&t.call(this,n)}}function c(){this.stack.push({type:"fragment",children:[]})}function u(e,t,n){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:s(t.start)},e}function h(e){return t;function t(t){e&&e.call(this,t),p.call(this,t)}}function p(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+q$({start:e.start,end:e.end})+"): it’s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||vV).call(this,e,r[0])}return n.position.end=s(e.end),n}function d(){return function(e,t){var{includeImageAlt:n=!0}=t||{};return MY(e,n)}(this.stack.pop())}function f(){a("expectingFirstListItemValue",!0)}function m(e){if(o("expectingFirstListItemValue")){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),a("expectingFirstListItemValue")}}function g(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function v(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function y(){o("flowCodeInside")||(this.buffer(),a("flowCodeInside",!0))}function x(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),a("flowCodeInside")}function E(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function b(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=wU(this.sliceSerialize(e)).toLowerCase()}function C(){const e=this.resume();this.stack[this.stack.length-1].title=e}function T(){const e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function S(){a("setextHeadingSlurpLineEnding",!0)}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function _(){a("setextHeadingSlurpLineEnding")}function A(e){const t=this.stack[this.stack.length-1];let n=t.children[t.children.length-1];n&&"text"===n.type||(n=le(),n.position={start:s(e.start)},t.children.push(n)),this.stack.push(n)}function O(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=s(e.end)}function I(e){const n=this.stack[this.stack.length-1];if(o("atHardBreak")){return n.children[n.children.length-1].position.end=s(e.end),void a("atHardBreak")}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(n.type)&&(A.call(this,e),O.call(this,e))}function M(){a("atHardBreak",!0)}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function F(){const e=this.resume();this.stack[this.stack.length-1].value=e}function L(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.stack[this.stack.length-1];o("inReference")?(e.type+="Reference",e.referenceType=o("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),a("referenceType")}function R(){const e=this.stack[this.stack.length-1];o("inReference")?(e.type+="Reference",e.referenceType=o("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),a("referenceType")}function D(e){const t=this.stack[this.stack.length-2],n=this.sliceSerialize(e);t.label=function(e){return e.replace(hV,pV)}(n),t.identifier=wU(n).toLowerCase()}function B(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];a("inReference",!0),"link"===n.type?n.children=e.children:n.alt=t}function z(){const e=this.resume();this.stack[this.stack.length-1].url=e}function H(){const e=this.resume();this.stack[this.stack.length-1].title=e}function j(){a("inReference")}function G(){a("referenceType","collapsed")}function $(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=wU(this.sliceSerialize(e)).toLowerCase(),a("referenceType","full")}function Y(e){a("characterReferenceType",e.type)}function U(e){const t=this.sliceSerialize(e),n=o("characterReferenceType");let r;n?(r=uV(t,"characterReferenceMarkerNumeric"===n?10:16),a("characterReferenceType")):r=uU(t);const i=this.stack.pop();i.value+=r,i.position.end=s(e.end)}function V(e){O.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){O.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function X(){return{type:"blockquote",children:[]}}function q(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Z(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:void 0,children:[]}}function ee(){return{type:"break"}}function te(){return{type:"html",value:""}}function ne(){return{type:"image",title:null,url:"",alt:null}}function re(){return{type:"link",title:null,url:"",children:[]}}function ie(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ae(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function oe(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function le(){return{type:"text",value:""}}function ce(){return{type:"thematicBreak"}}}(n)(function(e){for(;!gU(e););return e}(lV(n).document().write(function(){let e,t=1,n="",r=!0;return function(i,a,o){const s=[];let l,c,u,h,p;for(i=n+i.toString(a),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(cV.lastIndex=u,l=cV.exec(i),h=l&&void 0!==l.index?l.index:i.length,p=i.charCodeAt(h),!l){n=i.slice(u);break}if(10===p&&u===h&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),u<h&&(s.push(i.slice(u,h)),t+=h-u),p){case 0:s.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),s.push(-2);t++<c;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}u=h+1}return o&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))};function mV(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?mV(e,r):gV(e,r)}return e}function gV(e,t){let n;for(n in t)if(dV.call(t,n)){const r="canContainEols"===n||"transforms"===n,i=(dV.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),a=t[n];a&&(r?e[n]=[...i,...a]:Object.assign(i,a))}}function vV(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+q$({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+q$({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+q$({start:t.start,end:t.end})+") is still open")}function yV(e){Object.assign(this,{Parser:t=>{const n=this.data("settings");return fV(t,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var xV=function(e,t,n){var r={type:String(e)};return null!=n||"string"!=typeof t&&!Array.isArray(t)?Object.assign(r,t):n=t,Array.isArray(n)?r.children=n:null!=n&&(r.value=String(n)),r};const EV={}.hasOwnProperty;function bV(e,t){const n=t.data||{};return"value"in t&&!(EV.call(n,"hName")||EV.call(n,"hProperties")||EV.call(n,"hChildren"))?e.augment(t,xV("text",t.value)):e(t,"div",wV(e,t))}function CV(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return i=EV.call(e.handlers,r)?e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?TV:e.unknownHandler,("function"==typeof i?i:bV)(e,t,n)}function TV(e,t){return"children"in t?l(s({},t),{children:wV(e,t)}):t}function wV(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const a=CV(e,r[i],t);if(a){if(i&&"break"===r[i-1].type&&(Array.isArray(a)||"text"!==a.type||(a.value=a.value.replace(/^\s+/,"")),!Array.isArray(a)&&"element"===a.type)){const e=a.children[0];e&&"text"===e.type&&(e.value=e.value.replace(/^\s+/,""))}Array.isArray(a)?n.push(...a):n.push(a)}}}return n}const SV=function(e){if(null==e)return _V;if("string"==typeof e)return function(e){return kV(t);function t(t){return t&&t.type===e}}(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=SV(e[n]);return kV(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].call(this,...e))return!0;return!1}}(e):function(e){return kV(t);function t(t){let n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return kV(e);throw new Error("Expected function, string, or object as test")};function kV(e){return function(...t){return Boolean(e.call(this,...t))}}function _V(){return!0}const AV=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null);const i=SV(t),a=r?-1:1;!function e(o,s,l){const c="object"==typeof o&&null!==o?o:{};let u;"string"==typeof c.type&&(u="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0,Object.defineProperty(h,"name",{value:"node ("+c.type+(u?"<"+u+">":"")+")"}));return h;function h(){let c,u,h,p=[];if((!t||i(o,s,l[l.length-1]||null))&&(p=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)),false===p[0]))return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+a,h=l.concat(o);u>-1&&u<o.children.length;){if(c=e(o.children[u],u,h)(),false===c[0])return c;u="number"==typeof c[1]?c[1]:u+a}return p}}(e,null,[])()};const OV=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),AV(e,t,(function(e,t){const r=t[t.length-1];return n(e,r?r.children.indexOf(e):null,r)}),r)};var IV=NV("start"),MV=NV("end");function NV(e){return function(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}const FV=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null);var i=SV(t),a=r?-1:1;!function e(o,s,l){var c,u="object"==typeof o&&null!==o?o:{};"string"==typeof u.type&&(c="string"==typeof u.tagName?u.tagName:"string"==typeof u.name?u.name:void 0,Object.defineProperty(h,"name",{value:"node ("+u.type+(c?"<"+c+">":"")+")"}));return h;function h(){var c,u,h,p=[];if((!t||i(o,s,l[l.length-1]||null))&&false===(p=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)))[0])return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+a,h=l.concat(o);u>-1&&u<o.children.length;){if(false===(c=e(o.children[u],u,h)())[0])return c;u="number"==typeof c[1]?c[1]:u+a}return p}}(e,null,[])()};const LV={}.hasOwnProperty;function PV(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");var n,r,i;return r=function(e){const n=RV(e.identifier);n&&!LV.call(t,n)&&(t[n]=e)},"function"==typeof(n="definition")&&"function"!=typeof r&&(i=r,r=n,n=null),FV(e,n,(function(e,t){var n=t[t.length-1];return r(e,n?n.children.indexOf(e):null,n)}),i),function(e){const n=RV(e);return n&&LV.call(t,n)?t[n]:null}}function RV(e){return String(e||"").toUpperCase()}function DV(e,t){return e(t,"hr")}function BV(e,t){const n=[];let r=-1;for(t&&n.push(xV("text","\n"));++r<e.length;)r&&n.push(xV("text","\n")),n.push(e[r]);return t&&e.length>0&&n.push(xV("text","\n")),n}function zV(e,t){const n={},r=t.ordered?"ol":"ul",i=wV(e,t);let a=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++a<i.length;){const e=i[a];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,BV(i,!0))}function HV(e,t){const n=e.footnoteOrder,r=String(t.identifier),i=n.indexOf(r),a=String(-1===i?n.push(r):i+1);return e(t,"a",{href:"#fn"+a,className:["footnote-ref"],id:"fnref"+a,role:"doc-noteref"},[e(t.position,"sup",[xV("text",a)])])}var jV={};function GV(e,t,n){var r,i,a,o,s,l="";for("string"!=typeof t&&(n=t,t=GV.defaultChars),void 0===n&&(n=!0),s=function(e){var t,n,r=jV[e];if(r)return r;for(r=jV[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}(t),r=0,i=e.length;r<i;r++)if(a=e.charCodeAt(r),n&&37===a&&r+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3)))l+=e.slice(r,r+3),r+=2;else if(a<128)l+=s[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&r+1<i&&(o=e.charCodeAt(r+1))>=56320&&o<=57343){l+=encodeURIComponent(e[r]+e[r+1]),r++;continue}l+="%EF%BF%BD"}else l+=encodeURIComponent(e[r]);return l}GV.defaultChars=";/?:@&=+$,-_.!~*'()#",GV.componentChars="-_.!~*'()";var $V=GV;function YV(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return xV("text","!["+t.alt+r);const i=wV(e,t),a=i[0];a&&"text"===a.type?a.value="["+a.value:i.unshift(xV("text","["));const o=i[i.length-1];return o&&"text"===o.type?o.value+=r:i.push(xV("text",r)),i}function UV(e){const t=e.spread;return null==t?e.children.length>1:t}const VV={blockquote:function(e,t){return e(t,"blockquote",BV(wV(e,t),!0))},break:function(e,t){return[e(t,"br"),xV("text","\n")]},code:function(e,t){const n=t.value?t.value+"\n":"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const a=e(t,"code",i,[xV("text",n)]);return t.meta&&(a.data={meta:t.meta}),e(t.position,"pre",[a])},delete:function(e,t){return e(t,"del",wV(e,t))},emphasis:function(e,t){return e(t,"em",wV(e,t))},footnoteReference:HV,footnote:function(e,t){const n=e.footnoteById,r=e.footnoteOrder;let i=1;for(;i in n;)i++;const a=String(i);return r.push(a),n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},HV(e,{type:"footnoteReference",identifier:a,position:t.position})},heading:function(e,t){return e(t,"h"+t.depth,wV(e,t))},html:function(e,t){return e.dangerous?e.augment(t,xV("raw",t.value)):null},imageReference:function(e,t){const n=e.definition(t.identifier);if(!n)return YV(e,t);const r={src:$V(n.url||""),alt:t.alt};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"img",r)},image:function(e,t){const n={src:$V(t.url),alt:t.alt};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"img",n)},inlineCode:function(e,t){return e(t,"code",[xV("text",t.value.replace(/\r?\n|\r/g," "))])},linkReference:function(e,t){const n=e.definition(t.identifier);if(!n)return YV(e,t);const r={href:$V(n.url||"")};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"a",r,wV(e,t))},link:function(e,t){const n={href:$V(t.url)};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"a",n,wV(e,t))},listItem:function(e,t,n){const r=wV(e,t),i=n?function(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=UV(n[r]);return Boolean(t)}(n):UV(t),a={},o=[];if("boolean"==typeof t.checked){let n;r[0]&&"element"===r[0].type&&"p"===r[0].tagName?n=r[0]:(n=e(null,"p",[]),r.unshift(n)),n.children.length>0&&n.children.unshift(xV("text"," ")),n.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&o.push(xV("text","\n")),"element"!==e.type||"p"!==e.tagName||i?o.push(e):o.push(...e.children)}const l=r[r.length-1];return!l||!i&&"tagName"in l&&"p"===l.tagName||o.push(xV("text","\n")),e(t,"li",a,o)},list:zV,paragraph:function(e,t){return e(t,"p",wV(e,t))},root:function(e,t){return e.augment(t,xV("root",BV(wV(e,t))))},strong:function(e,t){return e(t,"strong",wV(e,t))},table:function(e,t){const n=t.children;let r=-1;const i=t.align||[],a=[];for(;++r<n.length;){const o=n[r].children,s=0===r?"th":"td";let l=t.align?i.length:o.length;const c=[];for(;l--;){const t=o[l];c[l]=e(t,s,{align:i[l]},t?wV(e,t):[])}a[r]=e(n[r],"tr",BV(c,!0))}return e(t,"table",BV([e(a[0].position,"thead",BV([a[0]],!0))].concat(a[1]?e({start:IV(a[1]),end:MV(a[a.length-1])},"tbody",BV(a.slice(1),!0)):[]),!0))},text:function(e,t){return e.augment(t,xV("text",String(t.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))},thematicBreak:DV,toml:WV,yaml:WV,definition:WV,footnoteDefinition:WV};function WV(){return null}const XV={}.hasOwnProperty;function qV(e,t){const n=function(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.definition=PV(e),o.footnoteById=i,o.footnoteOrder=[],o.augment=a,o.handlers=s(s({},VV),n.handlers),o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,OV(e,"footnoteDefinition",(e=>{const t=String(e.identifier).toUpperCase();XV.call(i,t)||(i[t]=e)})),o;function a(e,t){if(e&&"data"in e&&e.data){const n=e.data;n.hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=s(s({},t.properties),n.hProperties)),"children"in t&&t.children&&n.hChildren&&(t.children=n.hChildren)}if(e){const r="type"in e?e:{position:e};(n=r)&&n.position&&n.position.start&&n.position.start.line&&n.position.start.column&&n.position.end&&n.position.end.line&&n.position.end.column&&(t.position={start:IV(r),end:MV(r)})}var n;return t}function o(e,t,n,r){return Array.isArray(n)&&(r=n,n={}),a(e,{type:"element",tagName:t,properties:n||{},children:r||[]})}}(e,t),r=CV(n,e,null),i=function(e){const t=e.footnoteById,n=e.footnoteOrder;let r=-1;const i=[];for(;++r<n.length;){const e=t[n[r].toUpperCase()];if(!e)continue;const a=String(r+1),o=[...e.children],s={type:"link",url:"#fnref"+a,data:{hProperties:{className:["footnote-back"],role:"doc-backlink"}},children:[{type:"text",value:"↩"}]},l=o[o.length-1];l&&"paragraph"===l.type?l.children.push(s):o.push(s),i.push({type:"listItem",data:{hProperties:{id:"fn"+a,role:"doc-endnote"}},children:o,position:e.position})}return 0===i.length?null:e(null,"section",{className:["footnotes"],role:"doc-endnotes"},BV([DV(e),zV(e,{type:"list",ordered:!0,children:i})],!0))}(n);return i&&r.children.push(xV("text","\n"),i),Array.isArray(r)?{type:"root",children:r}:r}const KV=function(e,t){return e&&"run"in e?function(e,t){return(n,r,i)=>{e.run(qV(n,t),r,(e=>{i(e)}))}}(e,t):function(e){return t=>qV(t,e)}(e)};class QV{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function ZV(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new QV(n,r,t)}function JV(e){return e.toLowerCase()}QV.prototype.property={},QV.prototype.normal={},QV.prototype.space=null;class eW{constructor(e,t){this.property=e,this.attribute=t}}eW.prototype.space=null,eW.prototype.boolean=!1,eW.prototype.booleanish=!1,eW.prototype.overloadedBoolean=!1,eW.prototype.number=!1,eW.prototype.commaSeparated=!1,eW.prototype.spaceSeparated=!1,eW.prototype.commaOrSpaceSeparated=!1,eW.prototype.mustUseProperty=!1,eW.prototype.defined=!1;let tW=0;const nW=cW(),rW=cW(),iW=cW(),aW=cW(),oW=cW(),sW=cW(),lW=cW();function cW(){return 2**++tW}var uW=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",boolean:nW,booleanish:rW,overloadedBoolean:iW,number:aW,spaceSeparated:oW,commaSeparated:sW,commaOrSpaceSeparated:lW});const hW=Object.keys(uW);class pW extends eW{constructor(e,t,n,r){let i=-1;if(super(e,t),dW(this,"space",r),"number"==typeof n)for(;++i<hW.length;){const e=hW[i];dW(this,hW[i],(n&uW[e])===uW[e])}}}function dW(e,t,n){n&&(e[t]=n)}pW.prototype.defined=!0;const fW={}.hasOwnProperty;function mW(e){const t={},n={};let r;for(r in e.properties)if(fW.call(e.properties,r)){const i=e.properties[r],a=new pW(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[JV(r)]=r,n[JV(a.attribute)]=r}return new QV(t,n,e.space)}const gW=mW({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),vW=mW({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function yW(e,t){return t in e?e[t]:t}function xW(e,t){return yW(e,t.toLowerCase())}const EW=mW({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:xW,properties:{xmlns:null,xmlnsXLink:null}}),bW=mW({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:rW,ariaAutoComplete:null,ariaBusy:rW,ariaChecked:rW,ariaColCount:aW,ariaColIndex:aW,ariaColSpan:aW,ariaControls:oW,ariaCurrent:null,ariaDescribedBy:oW,ariaDetails:null,ariaDisabled:rW,ariaDropEffect:oW,ariaErrorMessage:null,ariaExpanded:rW,ariaFlowTo:oW,ariaGrabbed:rW,ariaHasPopup:null,ariaHidden:rW,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:oW,ariaLevel:aW,ariaLive:null,ariaModal:rW,ariaMultiLine:rW,ariaMultiSelectable:rW,ariaOrientation:null,ariaOwns:oW,ariaPlaceholder:null,ariaPosInSet:aW,ariaPressed:rW,ariaReadOnly:rW,ariaRelevant:null,ariaRequired:rW,ariaRoleDescription:oW,ariaRowCount:aW,ariaRowIndex:aW,ariaRowSpan:aW,ariaSelected:rW,ariaSetSize:aW,ariaSort:null,ariaValueMax:aW,ariaValueMin:aW,ariaValueNow:aW,ariaValueText:null,role:null}}),CW=mW({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:xW,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:sW,acceptCharset:oW,accessKey:oW,action:null,allow:null,allowFullScreen:nW,allowPaymentRequest:nW,allowUserMedia:nW,alt:null,as:null,async:nW,autoCapitalize:null,autoComplete:oW,autoFocus:nW,autoPlay:nW,capture:nW,charSet:null,checked:nW,cite:null,className:oW,cols:aW,colSpan:null,content:null,contentEditable:rW,controls:nW,controlsList:oW,coords:aW|sW,crossOrigin:null,data:null,dateTime:null,decoding:null,default:nW,defer:nW,dir:null,dirName:null,disabled:nW,download:iW,draggable:rW,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:nW,formTarget:null,headers:oW,height:aW,hidden:nW,high:aW,href:null,hrefLang:null,htmlFor:oW,httpEquiv:oW,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:nW,itemId:null,itemProp:oW,itemRef:oW,itemScope:nW,itemType:oW,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:nW,low:aW,manifest:null,max:null,maxLength:aW,media:null,method:null,min:null,minLength:aW,multiple:nW,muted:nW,name:null,nonce:null,noModule:nW,noValidate:nW,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:nW,optimum:aW,pattern:null,ping:oW,placeholder:null,playsInline:nW,poster:null,preload:null,readOnly:nW,referrerPolicy:null,rel:oW,required:nW,reversed:nW,rows:aW,rowSpan:aW,sandbox:oW,scope:null,scoped:nW,seamless:nW,selected:nW,shape:null,size:aW,sizes:null,slot:null,span:aW,spellCheck:rW,src:null,srcDoc:null,srcLang:null,srcSet:null,start:aW,step:null,style:null,tabIndex:aW,target:null,title:null,translate:null,type:null,typeMustMatch:nW,useMap:null,value:rW,width:aW,wrap:null,align:null,aLink:null,archive:oW,axis:null,background:null,bgColor:null,border:aW,borderColor:null,bottomMargin:aW,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:nW,declare:nW,event:null,face:null,frame:null,frameBorder:null,hSpace:aW,leftMargin:aW,link:null,longDesc:null,lowSrc:null,marginHeight:aW,marginWidth:aW,noResize:nW,noHref:nW,noShade:nW,noWrap:nW,object:null,profile:null,prompt:null,rev:null,rightMargin:aW,rules:null,scheme:null,scrolling:rW,standby:null,summary:null,text:null,topMargin:aW,valueType:null,version:null,vAlign:null,vLink:null,vSpace:aW,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:nW,disableRemotePlayback:nW,prefix:null,property:null,results:aW,security:null,unselectable:null}}),TW=mW({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:yW,properties:{about:lW,accentHeight:aW,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:aW,amplitude:aW,arabicForm:null,ascent:aW,attributeName:null,attributeType:null,azimuth:aW,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:aW,by:null,calcMode:null,capHeight:aW,className:oW,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:aW,diffuseConstant:aW,direction:null,display:null,dur:null,divisor:aW,dominantBaseline:null,download:nW,dx:null,dy:null,edgeMode:null,editable:null,elevation:aW,enableBackground:null,end:null,event:null,exponent:aW,externalResourcesRequired:null,fill:null,fillOpacity:aW,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:sW,g2:sW,glyphName:sW,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:aW,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:aW,horizOriginX:aW,horizOriginY:aW,id:null,ideographic:aW,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:aW,k:aW,k1:aW,k2:aW,k3:aW,k4:aW,kernelMatrix:lW,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:aW,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:aW,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:aW,overlineThickness:aW,paintOrder:null,panose1:null,path:null,pathLength:aW,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:oW,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:aW,pointsAtY:aW,pointsAtZ:aW,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:lW,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:lW,rev:lW,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:lW,requiredFeatures:lW,requiredFonts:lW,requiredFormats:lW,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:aW,specularExponent:aW,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:aW,strikethroughThickness:aW,string:null,stroke:null,strokeDashArray:lW,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:aW,strokeOpacity:aW,strokeWidth:null,style:null,surfaceScale:aW,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:lW,tabIndex:aW,tableValues:null,target:null,targetX:aW,targetY:aW,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:lW,to:null,transform:null,u1:null,u2:null,underlinePosition:aW,underlineThickness:aW,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:aW,values:null,vAlphabetic:aW,vMathematical:aW,vectorEffect:null,vHanging:aW,vIdeographic:aW,version:null,vertAdvY:aW,vertOriginX:aW,vertOriginY:aW,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:aW,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),wW=/^data[-\w.:]+$/i,SW=/-[a-z]/g,kW=/[A-Z]/g;function _W(e,t){const n=JV(t);let r=t,i=eW;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&wW.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(SW,OW);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!SW.test(e)){let n=e.replace(kW,AW);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=pW}return new i(r,t)}function AW(e){return"-"+e.toLowerCase()}function OW(e){return e.charAt(1).toUpperCase()}const IW={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},MW=ZV([vW,gW,EW,bW,CW],"html"),NW=ZV([vW,gW,EW,bW,TW],"svg");function FW(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{OV(t,"element",((t,n,r)=>{const i=r;let a;if(e.allowedElements?a=!e.allowedElements.includes(t.tagName):e.disallowedElements&&(a=e.disallowedElements.includes(t.tagName)),!a&&e.allowElement&&"number"==typeof n&&(a=!e.allowElement(t,n,i)),a&&"number"==typeof n)return e.unwrapDisallowed&&t.children?i.children.splice(n,1,...t.children):i.children.splice(n,1),n}))}}var LW={exports:{}},PW={},RW=60103,DW=60106,BW=60107,zW=60108,HW=60114,jW=60109,GW=60110,$W=60112,YW=60113,UW=60120,VW=60115,WW=60116,XW=60121,qW=60122,KW=60117,QW=60129,ZW=60131;if("function"==typeof Symbol&&Symbol.for){var JW=Symbol.for;RW=JW("react.element"),DW=JW("react.portal"),BW=JW("react.fragment"),zW=JW("react.strict_mode"),HW=JW("react.profiler"),jW=JW("react.provider"),GW=JW("react.context"),$W=JW("react.forward_ref"),YW=JW("react.suspense"),UW=JW("react.suspense_list"),VW=JW("react.memo"),WW=JW("react.lazy"),XW=JW("react.block"),qW=JW("react.server.block"),KW=JW("react.fundamental"),QW=JW("react.debug_trace_mode"),ZW=JW("react.legacy_hidden")}function eX(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case RW:switch(e=e.type){case BW:case HW:case zW:case YW:case UW:return e;default:switch(e=e&&e.$$typeof){case GW:case $W:case WW:case VW:case jW:return e;default:return t}}case DW:return t}}}var tX=jW,nX=RW,rX=$W,iX=BW,aX=WW,oX=VW,sX=DW,lX=HW,cX=zW,uX=YW;PW.ContextConsumer=GW,PW.ContextProvider=tX,PW.Element=nX,PW.ForwardRef=rX,PW.Fragment=iX,PW.Lazy=aX,PW.Memo=oX,PW.Portal=sX,PW.Profiler=lX,PW.StrictMode=cX,PW.Suspense=uX,PW.isAsyncMode=function(){return!1},PW.isConcurrentMode=function(){return!1},PW.isContextConsumer=function(e){return eX(e)===GW},PW.isContextProvider=function(e){return eX(e)===jW},PW.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===RW},PW.isForwardRef=function(e){return eX(e)===$W},PW.isFragment=function(e){return eX(e)===BW},PW.isLazy=function(e){return eX(e)===WW},PW.isMemo=function(e){return eX(e)===VW},PW.isPortal=function(e){return eX(e)===DW},PW.isProfiler=function(e){return eX(e)===HW},PW.isStrictMode=function(e){return eX(e)===zW},PW.isSuspense=function(e){return eX(e)===YW},PW.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===BW||e===HW||e===QW||e===zW||e===YW||e===UW||e===ZW||"object"==typeof e&&null!==e&&(e.$$typeof===WW||e.$$typeof===VW||e.$$typeof===jW||e.$$typeof===GW||e.$$typeof===$W||e.$$typeof===KW||e.$$typeof===XW||e[0]===qW)},PW.typeOf=eX,LW.exports=PW;var hX=LW.exports;function pX(e){var t=e&&"object"==typeof e&&"text"===e.type?e.value||"":e;return"string"==typeof t&&""===t.replace(/[ \t\n\f\r]/g,"")}function dX(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function fX(e){return e.join(" ").trim()}function mX(e){for(var t,n,r=[],i=String(e||""),a=i.indexOf(","),o=0;!t;)-1===a&&(a=i.length,t=!0),!(n=i.slice(o,a).trim())&&t||r.push(n),o=a+1,a=i.indexOf(",",o);return r}function gX(e,t){var n=t||{};return""===e[e.length-1]&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}var vX=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,yX=/\n/g,xX=/^\s*/,EX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,bX=/^:\s*/,CX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,TX=/^[;\s]*/,wX=/^\s+|\s+$/g;function SX(e){return e?e.replace(wX,""):""}var kX=function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(e){var t=e.match(yX);t&&(n+=t.length);var i=e.lastIndexOf("\n");r=~i?e.length-i:r+e.length}function a(){var e={line:n,column:r};return function(t){return t.position=new o(e),c(),t}}function o(e){this.start=e,this.end={line:n,column:r},this.source=t.source}function s(i){var a=new Error(t.source+":"+n+":"+r+": "+i);if(a.reason=i,a.filename=t.source,a.line=n,a.column=r,a.source=e,!t.silent)throw a}function l(t){var n=t.exec(e);if(n){var r=n[0];return i(r),e=e.slice(r.length),n}}function c(){l(xX)}function u(e){var t;for(e=e||[];t=h();)!1!==t&&e.push(t);return e}function h(){var t=a();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;""!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return s("End of comment missing");var o=e.slice(2,n-2);return r+=2,i(o),e=e.slice(n),r+=2,t({type:"comment",comment:o})}}function p(){var e=a(),t=l(EX);if(t){if(h(),!l(bX))return s("property missing ':'");var n=l(CX),r=e({type:"declaration",property:SX(t[0].replace(vX,"")),value:n?SX(n[0].replace(vX,"")):""});return l(TX),r}}return o.prototype.content=e,c(),function(){var e,t=[];for(u(t);e=p();)!1!==e&&(t.push(e),u(t));return t}()};var _X=function(e,t){var n,r=null;if(!e||"string"!=typeof e)return r;for(var i,a,o=kX(e),s="function"==typeof t,l=0,c=o.length;l<c;l++)i=(n=o[l]).property,a=n.value,s?t(i,a,n):a&&(r||(r={}),r[i]=a);return r};const AX={}.hasOwnProperty,OX=new Set(["table","thead","tbody","tfoot","tr"]);function IX(e,t){const n=[];let r,i=-1;for(;++i<t.children.length;)r=t.children[i],"element"===r.type?n.push(MX(e,r,i,t)):"text"===r.type?"element"===t.type&&OX.has(t.tagName)&&pX(r)||n.push(r.value):"raw"!==r.type||e.options.skipHtml||n.push(r.value);return n}function MX(e,t,n,r){const i=e.options,a=e.schema,o=t.tagName,s={};let l,c=a;if("html"===a.space&&"svg"===o&&(c=NW,e.schema=c),t.properties)for(l in t.properties)AX.call(t.properties,l)&&FX(s,l,t.properties[l],e);"ol"!==o&&"ul"!==o||e.listDepth++;const u=IX(e,t);"ol"!==o&&"ul"!==o||e.listDepth--,e.schema=a;const h=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},p=i.components&&AX.call(i.components,o)?i.components[o]:o,f="string"==typeof p||p===d.Fragment;if(!hX.isValidElementType(p))throw new TypeError(`Component for name \`${o}\` not defined or is not renderable`);if(s.key=[o,h.start.line,h.start.column,n].join("-"),"a"===o&&i.linkTarget&&(s.target="function"==typeof i.linkTarget?i.linkTarget(String(s.href||""),t.children,"string"==typeof s.title?s.title:null):i.linkTarget),"a"===o&&i.transformLinkUri&&(s.href=i.transformLinkUri(String(s.href||""),t.children,"string"==typeof s.title?s.title:null)),f||"code"!==o||"element"!==r.type||"pre"===r.tagName||(s.inline=!0),f||"h1"!==o&&"h2"!==o&&"h3"!==o&&"h4"!==o&&"h5"!==o&&"h6"!==o||(s.level=Number.parseInt(o.charAt(1),10)),"img"===o&&i.transformImageUri&&(s.src=i.transformImageUri(String(s.src||""),String(s.alt||""),"string"==typeof s.title?s.title:null)),!f&&"li"===o&&"element"===r.type){const e=function(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if("element"===n.type&&"input"===n.tagName)return n}return null}(t);s.checked=e&&e.properties?Boolean(e.properties.checked):null,s.index=NX(r,t),s.ordered="ol"===r.tagName}var m;return f||"ol"!==o&&"ul"!==o||(s.ordered="ol"===o,s.depth=e.listDepth),"td"!==o&&"th"!==o||(s.align&&(s.style||(s.style={}),s.style.textAlign=s.align,delete s.align),f||(s.isHeader="th"===o)),f||"tr"!==o||"element"!==r.type||(s.isHeader=Boolean("thead"===r.tagName)),i.sourcePos&&(s["data-sourcepos"]=[(m=h).start.line,":",m.start.column,"-",m.end.line,":",m.end.column].map((e=>String(e))).join("")),!f&&i.rawSourcePos&&(s.sourcePosition=t.position),!f&&i.includeElementIndex&&(s.index=NX(r,t),s.siblingCount=NX(r)),f||(s.node=t),u.length>0?d.createElement(p,s,u):d.createElement(p,s)}function NX(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)"element"===e.children[n].type&&r++;return r}function FX(e,t,n,r){const i=_W(r.schema,t);let a=n;null!=a&&a==a&&(Array.isArray(a)&&(a=i.commaSeparated?gX(a):fX(a)),"style"===i.property&&"string"==typeof a&&(a=function(e){const t={};try{_X(e,n)}catch(eh){}return t;function n(e,n){const r="-ms-"===e.slice(0,4)?`ms-${e.slice(4)}`:e;t[r.replace(/-([a-z])/g,LX)]=n}}(a)),i.space&&i.property?e[AX.call(IW,i.property)?IW[i.property]:i.property]=a:i.attribute&&(e[i.attribute]=a))}function LX(e,t){return t.toUpperCase()}const PX={}.hasOwnProperty,RX={renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function DX(e){for(const a in RX)if(PX.call(RX,a)&&PX.call(e,a)){const e=RX[a];console.warn(`[react-markdown] Warning: please ${e.to?`use \`${e.to}\` instead of`:"remove"} \`${a}\` (see <https://github.com/remarkjs/react-markdown/blob/main/changelog.md#${e.id}> for more info)`),delete RX[a]}const t=CY().use(yV).use(e.remarkPlugins||e.plugins||[]).use(KV,{allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(FW,e),n=new oY;"string"==typeof e.children?n.value=e.children:void 0!==e.children&&null!==e.children&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if("root"!==r.type)throw new TypeError("Expected a `root` node");let i=d.createElement(d.Fragment,{},IX({options:e,schema:MW,listDepth:0},r));return e.className&&(i=d.createElement("div",{className:e.className},i)),i}DX.defaultProps={transformLinkUri:function(e){const t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;const r=t.indexOf(":");if(-1===r)return t;let i=-1;for(;++i<X$.length;){const e=X$[i];if(r===e.length&&t.slice(0,e.length).toLowerCase()===e)return t}return i=t.indexOf("?"),-1!==i&&r>i?t:(i=t.indexOf("#"),-1!==i&&r>i?t:"javascript:void(0)")}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */},DX.propTypes={children:J.string,className:J.string,allowElement:J.func,allowedElements:J.arrayOf(J.string),disallowedElements:J.arrayOf(J.string),unwrapDisallowed:J.bool,remarkPlugins:J.arrayOf(J.oneOfType([J.object,J.func,J.arrayOf(J.oneOfType([J.object,J.func]))])),rehypePlugins:J.arrayOf(J.oneOfType([J.object,J.func,J.arrayOf(J.oneOfType([J.object,J.func]))])),sourcePos:J.bool,rawSourcePos:J.bool,skipHtml:J.bool,includeElementIndex:J.bool,transformLinkUri:J.oneOfType([J.func,J.bool]),linkTarget:J.oneOfType([J.func,J.string]),transformImageUri:J.func,components:J.object};var BX=[].splice;var zX={}.hasOwnProperty,HX=function(e,t,n,r){var i,a=e.length,o=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),BX.apply(e,i);else for(n&&BX.apply(e,[t,n]);o<r.length;)(i=r.slice(o,o+1e4)).unshift(t,0),BX.apply(e,i),o+=1e4,t+=1e4},jX=function(e){return null==e?[]:"length"in e?e:[e]};function GX(e,t){var n,r,i,a;for(n in t)for(a in r=zX.call(e,n)?e[n]:e[n]={},i=t[n])r[a]=$X(jX(i[a]),zX.call(r,a)?r[a]:[])}function $X(e,t){for(var n=-1,r=[];++n<e.length;)("after"===e[n].add?t:r).push(e[n]);return HX(t,0,0,r),t}var YX=function(e){for(var t={},n=-1;++n<e.length;)GX(t,e[n]);return t},UX={},VX=String.fromCharCode;var WX=function(e){return function(t){return e.test(VX(t))}},XX=WX(/[A-Za-z]/),qX=WX(/[\dA-Za-z]/);var KX=function(e){return e<32||127===e};var QX=function(e){return e<-2},ZX=WX(/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/),JX=WX(/\s/),eq=XX,tq=qX,nq=KX,rq=QX,iq=ZX,aq=JX,oq={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return 87===t||t-32==87?(e.consume(t),i):n(t)}function i(t){return 87===t||t-32==87?(e.consume(t),a):n(t)}function a(t){return 46===t?(e.consume(t),o):n(t)}function o(e){return null===e||rq(e)?n(e):t(e)}},partial:!0},sq={tokenize:function(e,t,n){var r,i;return a;function a(t){return 38===t?e.check(uq,s,o)(t):46===t||95===t?e.check(cq,s,o)(t):nq(t)||aq(t)||45!==t&&iq(t)?s(t):(e.consume(t),a)}function o(t){return 46===t?(i=r,r=void 0,e.consume(t),a):(95===t&&(r=!0),e.consume(t),a)}function s(e){return i||r?n(e):t(e)}},partial:!0},lq={tokenize:function(e,t){var n=0;return r;function r(o){return 38===o?e.check(uq,t,i)(o):(40===o&&n++,41===o?e.check(cq,a,i)(o):vq(o)?t(o):gq(o)?e.check(cq,t,i)(o):(e.consume(o),r))}function i(t){return e.consume(t),r}function a(e){return--n<0?t(e):i(e)}},partial:!0},cq={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(i){return gq(i)?(e.consume(i),r):vq(i)?t(i):n(i)}},partial:!0},uq={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return eq(t)?(e.consume(t),r):59===t?(e.consume(t),i):n(t)}function i(e){return vq(e)?t(e):n(e)}},partial:!0},hq={tokenize:function(e,t,n){var r=this;return function(t){if(87!==t&&t-32!=87||!xq(r.previous)||Cq(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(oq,e.attempt(sq,e.attempt(lq,i),n),n)(t)};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:xq},pq={tokenize:function(e,t,n){var r=this;return function(t){if(72!==t&&t-32!=72||!Eq(r.previous)||Cq(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(t),i};function i(t){return 84===t||t-32==84?(e.consume(t),a):n(t)}function a(t){return 84===t||t-32==84?(e.consume(t),o):n(t)}function o(t){return 80===t||t-32==80?(e.consume(t),s):n(t)}function s(t){return 83===t||t-32==83?(e.consume(t),l):l(t)}function l(t){return 58===t?(e.consume(t),c):n(t)}function c(t){return 47===t?(e.consume(t),u):n(t)}function u(t){return 47===t?(e.consume(t),h):n(t)}function h(t){return nq(t)||aq(t)||iq(t)?n(t):e.attempt(sq,e.attempt(lq,p),n)(t)}function p(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:Eq},dq={tokenize:function(e,t,n){var r,i=this;return function(t){if(!yq(t)||!bq(i.previous)||Cq(i.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return yq(t)?(e.consume(t),a):64===t?(e.consume(t),o):n(t)}function o(t){return 46===t?e.check(cq,u,s)(t):45===t||95===t?e.check(cq,n,l)(t):tq(t)?(e.consume(t),o):u(t)}function s(t){return e.consume(t),r=!0,o}function l(t){return e.consume(t),c}function c(t){return 46===t?e.check(cq,n,s)(t):o(t)}function u(i){return r?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(i)):n(i)}},previous:bq},fq={};UX.text=fq;for(var mq=48;mq<123;)fq[mq]=dq,58===++mq?mq=65:91===mq&&(mq=97);function gq(e){return 33===e||34===e||39===e||41===e||42===e||44===e||46===e||58===e||59===e||60===e||63===e||95===e||126===e}function vq(e){return null===e||e<0||32===e||60===e}function yq(e){return 43===e||45===e||46===e||95===e||tq(e)}function xq(e){return null===e||e<0||32===e||40===e||42===e||95===e||126===e}function Eq(e){return null===e||!eq(e)}function bq(e){return 47!==e&&Eq(e)}function Cq(e){for(var t=e.length;t--;)if(("labelLink"===e[t][1].type||"labelImage"===e[t][1].type)&&!e[t][1]._balanced)return!0}fq[43]=dq,fq[45]=dq,fq[46]=dq,fq[95]=dq,fq[72]=[dq,pq],fq[104]=[dq,pq],fq[87]=[dq,hq],fq[119]=[dq,hq];var Tq=UX;var wq=function(e){return e<0||32===e},Sq=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,kq=String.fromCharCode;var _q=function(e){return function(t){return e.test(kq(t))}},Aq=_q(Sq),Oq=_q(/\s/),Iq=wq,Mq=Aq,Nq=Oq;var Fq=function(e){return null===e||Iq(e)||Nq(e)?1:Mq(e)?2:void 0},Lq=[].splice;var Pq=function(e,t,n,r){var i,a=e.length,o=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),Lq.apply(e,i);else for(n&&Lq.apply(e,[t,n]);o<r.length;)(i=r.slice(o,o+1e4)).unshift(t,0),Lq.apply(e,i),o+=1e4,t+=1e4};var Rq=function(e,t,n){for(var r,i=[],a=-1;++a<e.length;)(r=e[a].resolveAll)&&i.indexOf(r)<0&&(t=r(t,n),i.push(r));return t},Dq=Object.assign;var Bq=function(e){var t=(e||{}).singleTilde,n={tokenize:function(e,n,r){var i=this.previous,a=this.events,o=0;return s;function s(t){return 126!==t||126===i&&"characterEscape"!==a[a.length-1][1].type?r(t):(e.enter("strikethroughSequenceTemporary"),l(t))}function l(a){var s,c,u=zq(i);return 126===a?o>1?r(a):(e.consume(a),o++,l):o<2&&!t?r(a):(s=e.exit("strikethroughSequenceTemporary"),c=zq(a),s._open=!c||2===c&&u,s._close=!u||2===u&&c,n(a))}},resolveAll:function(e,t){var n,r,i,a,o=-1;for(;++o<e.length;)if("enter"===e[o][0]&&"strikethroughSequenceTemporary"===e[o][1].type&&e[o][1]._close)for(i=o;i--;)if("exit"===e[i][0]&&"strikethroughSequenceTemporary"===e[i][1].type&&e[i][1]._open&&e[o][1].end.offset-e[o][1].start.offset==e[i][1].end.offset-e[i][1].start.offset){e[o][1].type="strikethroughSequence",e[i][1].type="strikethroughSequence",n={type:"strikethrough",start:Gq(e[i][1].start),end:Gq(e[o][1].end)},r={type:"strikethroughText",start:Gq(e[i][1].end),end:Gq(e[o][1].start)},a=[["enter",n,t],["enter",e[i][1],t],["exit",e[i][1],t],["enter",r,t]],Hq(a,a.length,0,jq(t.parser.constructs.insideSpan.null,e.slice(i+1,o),t)),Hq(a,a.length,0,[["exit",r,t],["enter",e[o][1],t],["exit",e[o][1],t],["exit",n,t]]),Hq(e,i-1,o-i+3,a),o=i+a.length-2;break}return function(e){var t=-1,n=e.length;for(;++t<n;)"strikethroughSequenceTemporary"===e[t][1].type&&(e[t][1].type="data");return e}(e)}};null==t&&(t=!0);return{text:{126:n},insideSpan:{null:n}}},zq=Fq,Hq=Pq,jq=Rq,Gq=function(e){return Dq({},e)};var $q={};var Yq=function(e){return-2===e||-1===e||32===e};var Uq=function(e,t,n,r){var i=r?r-1:1/0,a=0;return function(r){if(Yq(r))return e.enter(n),o(r);return t(r)};function o(r){return Yq(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}};$q.flow={null:{tokenize:function(e,t,n){var r,i,a=[],o=0;return function(t){if(null===t||-5===t||-4===t||-3===t)return n(t);if(e.enter("table")._align=a,e.enter("tableHead"),e.enter("tableRow"),124===t)return s(t);return o++,e.enter("temporaryTableCellContent"),u(t)};function s(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,l}function l(t){return null===t||-5===t||-4===t||-3===t?function(t){if(null===t)return n(t);return e.exit("tableRow"),e.exit("tableHead"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.check(Wq,n,Vq(e,p,"linePrefix",4))}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),c):(r&&(r=void 0,o++),124===t?s(t):(e.enter("temporaryTableCellContent"),u(t)))}function c(t){return-2===t||-1===t||32===t?(e.consume(t),c):(e.exit("whitespace"),l(t))}function u(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),l(t)):(e.consume(t),92===t?h:u)}function h(t){return 92===t||124===t?(e.consume(t),u):u(t)}function p(t){return null===t||t<0||32===t?n(t):(e.enter("tableDelimiterRow"),d(t))}function d(t){return null===t||-5===t||-4===t||-3===t?y(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),f):45===t?(e.enter("tableDelimiterFiller"),e.consume(t),i=!0,a.push(null),m):58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),a.push("left"),g):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),d):n(t)}function f(t){return-2===t||-1===t||32===t?(e.consume(t),f):(e.exit("whitespace"),d(t))}function m(t){return 45===t?(e.consume(t),m):(e.exit("tableDelimiterFiller"),58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),a[a.length-1]="left"===a[a.length-1]?"center":"right",v):d(t))}function g(t){return 45===t?(e.enter("tableDelimiterFiller"),e.consume(t),i=!0,m):n(t)}function v(t){return null===t||-5===t||-4===t||-3===t?y(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),f):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),d):n(t)}function y(t){return e.exit("tableDelimiterRow"),i&&o===a.length?null===t?x(t):e.check(Xq,x,E)(t):n(t)}function x(n){return e.exit("table"),t(n)}function E(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Vq(e,b,"linePrefix",4)}function b(t){return e.enter("tableBody"),C(t)}function C(t){return e.enter("tableRow"),124===t?T(t):(e.enter("temporaryTableCellContent"),k(t))}function T(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),w}function w(t){return null===t||-5===t||-4===t||-3===t?function(t){if(e.exit("tableRow"),null===t)return A(t);return e.check(Xq,A,O)(t)}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),S):124===t?T(t):(e.enter("temporaryTableCellContent"),k(t))}function S(t){return-2===t||-1===t||32===t?(e.consume(t),S):(e.exit("whitespace"),w(t))}function k(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),w(t)):(e.consume(t),92===t?_:k)}function _(t){return 92===t||124===t?(e.consume(t),k):k(t)}function A(t){return e.exit("tableBody"),x(t)}function O(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Vq(e,C,"linePrefix",4)}},resolve:function(e,t){var n,r,i,a,o,s,l,c,u,h,p=e.length,d=-1;for(;++d<p;)n=e[d][1],a&&("temporaryTableCellContent"===n.type&&(c=c||d,u=d),"tableCellDivider"!==n.type&&"tableRow"!==n.type||!u||(s={type:"tableContent",start:e[c][1].start,end:e[u][1].end},l={type:"chunkText",start:s.start,end:s.end,contentType:"text"},e.splice(c,u-c+1,["enter",s,t],["enter",l,t],["exit",l,t],["exit",s,t]),d-=u-c-3,p=e.length,c=void 0,u=void 0)),"exit"===e[d][0]&&h&&h+1<d&&("tableCellDivider"===n.type||"tableRow"===n.type&&(h+3<d||"whitespace"!==e[h][1].type))&&(o={type:i?"tableDelimiter":r?"tableHeader":"tableData",start:e[h][1].start,end:e[d][1].end},e.splice(d+("tableCellDivider"===n.type?1:0),0,["exit",o,t]),e.splice(h,0,["enter",o,t]),d+=2,p=e.length,h=d+1),"tableRow"===n.type&&(a="enter"===e[d][0])&&(h=d+1),"tableDelimiterRow"===n.type&&(i="enter"===e[d][0])&&(h=d+1),"tableHead"===n.type&&(r="enter"===e[d][0]);return e},interruptible:!0}};var Vq=Uq,Wq={tokenize:function(e,t,n){return function(t){if(45!==t)return n(t);return e.enter("setextUnderline"),r(t)};function r(t){return 45===t?(e.consume(t),r):i(t)}function i(r){return-2===r||-1===r||32===r?(e.consume(r),i):null===r||-5===r||-4===r||-3===r?t(r):n(r)}},partial:!0},Xq={tokenize:function(e,t,n){var r=0;return function(t){return e.enter("check"),e.consume(t),i};function i(a){return-1===a||32===a?(e.consume(a),4===++r?t:i):null===a||a<0?t(a):n(a)}},partial:!0};var qq=$q,Kq={};var Qq=function(e){return-2===e||-1===e||32===e};var Zq=function(e){for(var t=-1,n=0;++t<e.length;)n+="string"==typeof e[t]?e[t].length:1;return n};var Jq=function(e){return e<0||32===e},eK=function(e,t,n,r){var i=r?r-1:1/0,a=0;return function(r){if(Qq(r))return e.enter(n),o(r);return t(r)};function o(r){return Qq(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}},tK=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?Zq(n[2].sliceStream(n[1])):0},nK={tokenize:function(e,t,n){var r=this;return function(t){if(91!==t||null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i};function i(t){return-2===t||32===t?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),a):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),a):n(t)}function a(r){return 93===r?(e.enter("taskListCheckMarker"),e.consume(r),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:rK},t,n)):n(r)}}};function rK(e,t,n){var r=this;return eK(e,(function(e){return tK(r.events,"whitespace")&&null!==e&&!Jq(e)?t(e):n(e)}),"whitespace")}Kq.text={91:nK};var iK=YX,aK=Tq,oK=Bq,sK=qq,lK=Kq;var cK=function(e){return iK([aK,oK(e),sK,lK])},uK={},hK=function(e,t){var n,r=String(e),i=0;if("string"!=typeof t)throw new Error("Expected character");n=r.indexOf(t);for(;-1!==n;)i++,n=r.indexOf(t,n+t.length);return i};function pK(e){if(null==e)return dK;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=pK(e[n]);return r;function r(){for(var e=-1;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function dK(){return!0}var fK=vK,mK=pK,gK=function(e){return e};function vK(e,t,n,r){var i,a;"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),a=mK(t),i=r?-1:1,function e(o,s,l){var c,u="object"==typeof o&&null!==o?o:{};"string"==typeof u.type&&(c="string"==typeof u.tagName?u.tagName:"string"==typeof u.name?u.name:void 0,h.displayName="node ("+gK(u.type+(c?"<"+c+">":""))+")");return h;function h(){var c,u,h=l.concat(o),p=[];if((!t||a(o,s,l[l.length-1]||null))&&false===(p=function(e){if(null!==e&&"object"==typeof e&&"length"in e)return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)))[0])return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+i;u>-1&&u<o.children.length;){if(false===(c=e(o.children[u],u,h)())[0])return c;u="number"==typeof c[1]?c[1]:u+i}return p}}(e,null,[])()}function yK(e){if(null==e)return xK;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=yK(e[n]);return r;function r(){for(var e=-1;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function xK(){return!0}vK.CONTINUE=true,vK.SKIP="skip",vK.EXIT=false;var EK=function(e,t,n,r){var i,a;"string"==typeof t||t&&"function"==typeof t.exec?a=[[t,n]]:(a=t,r=n);return SK(e,i=r||{},function e(t){var n=t[0];return r;function r(r,a){var o,s,l,c,u=n[0],h=n[1],p=[],d=0,f=a.children.indexOf(r);for(u.lastIndex=0,s=u.exec(r.value);s&&(o=s.index,!1!==(c=h.apply(null,[].concat(s,{index:s.index,input:s.input})))&&(d!==o&&p.push({type:"text",value:r.value.slice(d,o)}),"string"==typeof c&&c.length>0&&(c={type:"text",value:c}),c&&(p=[].concat(p,c)),d=o+s[0].length),u.global);)s=u.exec(r.value);if(void 0===o?(p=[r],f--):(d<r.value.length&&p.push({type:"text",value:r.value.slice(d)}),p.unshift(f,1),wK.apply(a.children,p)),t.length>1)for(l=e(t.slice(1)),o=-1;++o<p.length;)"text"===(r=p[o]).type?l(r,a):SK(r,i,l);return f+p.length+1}}(function(e){var t,n,r=[];if("object"!=typeof e)throw new Error("Expected array or object as schema");if("length"in e)for(n=-1;++n<e.length;)r.push([kK(e[n][0]),_K(e[n][1])]);else for(t in e)r.push([kK(t),_K(e[t])]);return r}(a))),e},bK=fK,CK=yK,TK=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},wK=[].splice;function SK(e,t,n){var r=CK(t.ignore||[]);return bK(e,"text",(function(e,t){var i,a,o=-1;for(;++o<t.length;){if(i=t[o],r(i,a?a.children.indexOf(i):void 0,a))return;a=i}return n(e,a)})),[]}function kK(e){return"string"==typeof e?new RegExp(TK(e),"g"):e}function _K(e){return"function"==typeof e?e:function(){return e}}var AK=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,OK=String.fromCharCode;var IK=function(e){return function(t){return e.test(OK(t))}},MK=IK(AK),NK=IK(/\s/),FK=hK,LK=EK,PK=MK,RK=NK;function DK(e){this.config.enter.autolinkProtocol.call(this,e)}function BK(e,t,n,r,i){var a,o,s="";return!!HK(i)&&(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!!function(e){var t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n)&&(!!(a=function(e){var t,n,r,i=/[!"&'),.:;<>?\]}]+$/.exec(e);if(i)for(e=e.slice(0,i.index),t=(i=i[0]).indexOf(")"),n=FK(e,"("),r=FK(e,")");-1!==t&&n>r;)e+=i.slice(0,t+1),t=(i=i.slice(t+1)).indexOf(")"),r++;return[e,i]}(n+r))[0]&&(o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]},a[1]&&(o=[o,{type:"text",value:a[1]}]),o)))}function zK(e,t,n,r){return!(!HK(r,!0)||/[_-]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function HK(e,t){var n=e.input.charCodeAt(e.index-1);return(n!=n||RK(n)||PK(n))&&(!t||47!==n)}uK.transforms=[function(e){LK(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/i,BK],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/,zK]],{ignore:["link","linkReference"]})}],uK.enter={literalAutolink:function(e){this.enter({type:"link",title:null,url:"",children:[]},e)},literalAutolinkEmail:DK,literalAutolinkHttp:DK,literalAutolinkWww:DK},uK.exit={literalAutolink:function(e){this.exit(e)},literalAutolinkEmail:function(e){this.config.exit.autolinkEmail.call(this,e)},literalAutolinkHttp:function(e){this.config.exit.autolinkProtocol.call(this,e)},literalAutolinkWww:function(e){this.config.exit.data.call(this,e),this.stack[this.stack.length-1].url="http://"+this.sliceSerialize(e)}};var jK={};jK.canContainEols=["delete"],jK.enter={strikethrough:function(e){this.enter({type:"delete",children:[]},e)}},jK.exit={strikethrough:function(e){this.exit(e)}};var GK={};function $K(e){this.exit(e)}function YK(e){this.enter({type:"tableCell",children:[]},e)}function UK(e,t){return"|"===t?t:e}GK.enter={table:function(e){this.enter({type:"table",align:e._align,children:[]},e),this.setData("inTable",!0)},tableData:YK,tableHeader:YK,tableRow:function(e){this.enter({type:"tableRow",children:[]},e)}},GK.exit={codeText:function(e){var t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,UK));this.stack[this.stack.length-1].value=t,this.exit(e)},table:function(e){this.exit(e),this.setData("inTable")},tableData:$K,tableHeader:$K,tableRow:$K};var VK={};function WK(e){this.stack[this.stack.length-2].checked="taskListCheckValueChecked"===e.type}VK.exit={taskListCheckValueChecked:WK,taskListCheckValueUnchecked:WK,paragraph:function(e){var t,n=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1],i=n.children,a=r.children[0],o=-1;if(n&&"listItem"===n.type&&"boolean"==typeof n.checked&&a&&"text"===a.type){for(;++o<i.length;)if("paragraph"===i[o].type){t=i[o];break}t===r&&(a.value=a.value.slice(1),0===a.value.length?r.children.shift():(a.position.start.column++,a.position.start.offset++,r.position.start=Object.assign({},a.position.start)))}this.exit(e)}};var XK={}.hasOwnProperty,qK=function(e){var t={transforms:[],canContainEols:[]},n=e.length,r=-1;for(;++r<n;)KK(t,e[r]);return t}([uK,jK,GK,VK]);function KK(e,t){var n,r,i;for(n in t)r=XK.call(e,n)?e[n]:e[n]={},i=t[n],"canContainEols"===n||"transforms"===n?e[n]=[].concat(r,i):Object.assign(r,i)}var QK={},ZK=["autolink","link","image","label"];QK.unsafe=[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:"phrasing",notInConstruct:ZK},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:"phrasing",notInConstruct:ZK},{character:":",before:"[ps]",after:"\\/",inConstruct:"phrasing",notInConstruct:ZK}];var JK={},eQ=function(e,t,n){var r,i,a,o=e.children||[],s=[],l=-1,c=n.before;for(;++l<o.length;)a=o[l],l+1<o.length?((i=t.handle.handlers[o[l+1].type])&&i.peek&&(i=i.peek),r=i?i(o[l+1],e,t,{before:"",after:""}).charAt(0):""):r=n.after,s.length>0&&("\r"===c||"\n"===c)&&"html"===a.type&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),c=" "),s.push(t.handle(a,e,t,{before:c,after:r})),c=s[s.length-1].slice(-1);return s.join("")};var tQ=eQ;function nQ(e,t,n){var r=n.enter("emphasis"),i=tQ(e,n,{before:"~",after:"~"});return r(),"~~"+i+"~~"}JK.unsafe=[{character:"~",inConstruct:"phrasing"}],JK.handlers={delete:nQ},nQ.peek=function(){return"~"};var rQ=function(e){var t,n;e._compiled||(t=e.before?"(?:"+e.before+")":"",n=e.after?"(?:"+e.after+")":"",e.atBreak&&(t="[\\r\\n][\\t ]*"+t),e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(n||""),"g"));return e._compiled};var iQ=oQ;oQ.peek=function(){return"`"}
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */;var aQ=rQ;function oQ(e,t,n){for(var r,i,a,o,s=e.value||"",l="`",c=-1;new RegExp("(^|[^`])"+l+"([^`]|$)").test(s);)l+="`";for(/[^ \r\n]/.test(s)&&(/[ \r\n`]/.test(s.charAt(0))||/[ \r\n`]/.test(s.charAt(s.length-1)))&&(s=" "+s+" ");++c<n.unsafe.length;)if((r=n.unsafe[c]).atBreak)for(i=aQ(r);a=i.exec(s);)o=a.index,10===s.charCodeAt(o)&&13===s.charCodeAt(o-1)&&o--,s=s.slice(0,o)+" "+s.slice(a.index+1);return l+s+l}var sQ,lQ="",cQ=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(sQ!==e||void 0===sQ)sQ=e,lQ="";else if(lQ.length>=n)return lQ.substr(0,n);for(;n>lQ.length&&t>1;)1&t&&(lQ+=e),t>>=1,e+=e;return lQ=(lQ+=e).substr(0,n)};var uQ=cQ,hQ=function(e,t){var n,r,i,a,o,s,l,c,u,h,p,d=t||{},f=!1!==d.padding,m=!1!==d.delimiterStart,g=!1!==d.delimiterEnd,v=(d.align||[]).concat(),y=!1!==d.alignDelimiters,x=[],E=d.stringLength||mQ,b=-1,C=e.length,T=[],w=[],S=[],k=[],_=[],A=0;for(;++b<C;){for(n=e[b],r=-1,i=n.length,S=[],k=[],i>A&&(A=i);++r<i;)s=fQ(n[r]),!0===y&&(o=E(s),k[r]=o,(void 0===(a=_[r])||o>a)&&(_[r]=o)),S.push(s);T[b]=S,w[b]=k}if(r=-1,i=A,"object"==typeof v&&"length"in v)for(;++r<i;)x[r]=gQ(v[r]);else for(p=gQ(v);++r<i;)x[r]=p;r=-1,i=A,S=[],k=[];for(;++r<i;)p=x[r],u="",h="",108===p?u=":":p===dQ?h=":":99===p&&(u=":",h=":"),o=y?Math.max(1,_[r]-u.length-h.length):1,s=u+uQ("-",o)+h,!0===y&&((o=u.length+o+h.length)>_[r]&&(_[r]=o),k[r]=o),S[r]=s;T.splice(1,0,S),w.splice(1,0,k),b=-1,C=T.length,l=[];for(;++b<C;){for(S=T[b],k=w[b],r=-1,i=A,c=[];++r<i;)s=S[r]||"",u="",h="",!0===y&&(o=_[r]-(k[r]||0),(p=x[r])===dQ?u=uQ(" ",o):99===p?o%2==0?(u=uQ(" ",o/2),h=u):(u=uQ(" ",o/2+.5),h=uQ(" ",o/2-.5)):h=uQ(" ",o)),!0===m&&0===r&&c.push("|"),!0!==f||!1===y&&""===s||!0!==m&&0===r||c.push(" "),!0===y&&c.push(u),c.push(s),!0===y&&c.push(h),!0===f&&c.push(" "),!0!==g&&r===i-1||c.push("|");c=c.join(""),!1===g&&(c=c.replace(pQ,"")),l.push(c)}return l.join("\n")},pQ=/ +$/,dQ=114;function fQ(e){return null==e?"":String(e)}function mQ(e){return e.length}function gQ(e){var t="string"==typeof e?e.charCodeAt(0):0;return 76===t||108===t?108:82===t||t===dQ?dQ:67===t||99===t?99:0}var vQ=eQ,yQ=iQ,xQ=hQ,EQ=function(e){var t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:function(e,t,n){return s(function(e,t){var n=e.children,r=-1,i=n.length,a=[],o=t.enter("table");for(;++r<i;)a[r]=l(n[r],t);return o(),a}(e,n),e.align)},tableRow:function(e,t,n){var r=s([l(e,n)]);return r.slice(0,r.indexOf("\n"))},tableCell:o,inlineCode:function(e,t,n){var r=yQ(e,t,n);-1!==n.stack.indexOf("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r}}};function o(e,t,n){var r=n.enter("tableCell"),i=vQ(e,n,{before:a,after:a});return r(),i}function s(e,t){return xQ(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function l(e,t){for(var n=e.children,r=-1,i=n.length,a=[],s=t.enter("tableRow");++r<i;)a[r]=o(n[r],0,t);return s(),a}};var bQ={};var CQ=function(e,t){var n,r=e.children||[],i=[],a=-1;for(;++a<r.length;)n=r[a],i.push(t.handle(n,e,t,{before:"\n",after:"\n"})),a+1<r.length&&i.push(o(n,r[a+1]));return i.join("");function o(n,r){for(var i,a=-1;++a<t.join.length&&!0!==(i=t.join[a](n,r,e,t))&&1!==i;){if("number"==typeof i)return TQ("\n",1+Number(i));if(!1===i)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}},TQ=cQ;var wQ=function(e,t){var n,r=[],i=0,a=0;for(;n=SQ.exec(e);)o(e.slice(i,n.index)),r.push(n[0]),i=n.index+n[0].length,a++;return o(e.slice(i)),r.join("");function o(e){r.push(t(e,a,!e))}},SQ=/\r?\n|\r/g;var kQ=function(e,t,n){var r,i,a,o=AQ(n),s=OQ(n);t&&t.ordered&&(o=(t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+".");r=o.length+1,("tab"===s||"mixed"===s&&(t&&t.spread||e.spread))&&(r=4*Math.ceil(r/4));return a=n.enter("listItem"),i=MQ(IQ(e,n),(function(e,t,n){if(t)return(n?"":_Q(" ",r))+e;return(n?o:o+_Q(" ",r-o.length))+e})),a(),i},_Q=cQ,AQ=function(e){var t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t},OQ=function(e){var t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t},IQ=CQ,MQ=wQ;var NQ=kQ;bQ.unsafe=[{atBreak:!0,character:"-",after:"[:|-]"}],bQ.handlers={listItem:function(e,t,n){var r=NQ(e,t,n),i=e.children[0];"boolean"==typeof e.checked&&i&&"paragraph"===i.type&&(r=r.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(t){return t+"["+(e.checked?"x":" ")+"] "})));return r}};var FQ=QK,LQ=JK,PQ=EQ,RQ=bQ,DQ=function e(t,n){var r,i=-1;if(n.extensions)for(;++i<n.extensions.length;)e(t,n.extensions[i]);for(r in n)"extensions"===r||("unsafe"===r||"join"===r?t[r]=t[r].concat(n[r]||[]):"handlers"===r?t[r]=Object.assign(t[r],n[r]||{}):t.options[r]=n[r]);return t};var BQ,zQ=cK,HQ=qK,jQ=function(e){var t=DQ({handlers:{},join:[],unsafe:[],options:{}},{extensions:[FQ,LQ,PQ(e),RQ]});return Object.assign(t.options,{handlers:t.handlers,join:t.join,unsafe:t.unsafe})},GQ=function(e){var t=this.data();!BQ&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(BQ=!0,console.warn("[remark-gfm] Warning: please upgrade to remark 13 to use this plugin"));function n(e,n){t[e]?t[e].push(n):t[e]=[n]}n("micromarkExtensions",zQ(e)),n("fromMarkdownExtensions",HQ),n("toMarkdownExtensions",jQ(e))};var $Q={};const YQ=[65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111];$Q.REPLACEMENT_CHARACTER="�",$Q.CODE_POINTS={EOF:-1,NULL:0,TABULATION:9,CARRIAGE_RETURN:13,LINE_FEED:10,FORM_FEED:12,SPACE:32,EXCLAMATION_MARK:33,QUOTATION_MARK:34,NUMBER_SIGN:35,AMPERSAND:38,APOSTROPHE:39,HYPHEN_MINUS:45,SOLIDUS:47,DIGIT_0:48,DIGIT_9:57,SEMICOLON:59,LESS_THAN_SIGN:60,EQUALS_SIGN:61,GREATER_THAN_SIGN:62,QUESTION_MARK:63,LATIN_CAPITAL_A:65,LATIN_CAPITAL_F:70,LATIN_CAPITAL_X:88,LATIN_CAPITAL_Z:90,RIGHT_SQUARE_BRACKET:93,GRAVE_ACCENT:96,LATIN_SMALL_A:97,LATIN_SMALL_F:102,LATIN_SMALL_X:120,LATIN_SMALL_Z:122,REPLACEMENT_CHARACTER:65533},$Q.CODE_POINT_SEQUENCES={DASH_DASH_STRING:[45,45],DOCTYPE_STRING:[68,79,67,84,89,80,69],CDATA_START_STRING:[91,67,68,65,84,65,91],SCRIPT_STRING:[115,99,114,105,112,116],PUBLIC_STRING:[80,85,66,76,73,67],SYSTEM_STRING:[83,89,83,84,69,77]},$Q.isSurrogate=function(e){return e>=55296&&e<=57343},$Q.isSurrogatePair=function(e){return e>=56320&&e<=57343},$Q.getSurrogatePairCodePoint=function(e,t){return 1024*(e-55296)+9216+t},$Q.isControlCodePoint=function(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159},$Q.isUndefinedCodePoint=function(e){return e>=64976&&e<=65007||YQ.indexOf(e)>-1};var UQ={controlCharacterInInputStream:"control-character-in-input-stream",noncharacterInInputStream:"noncharacter-in-input-stream",surrogateInInputStream:"surrogate-in-input-stream",nonVoidHtmlElementStartTagWithTrailingSolidus:"non-void-html-element-start-tag-with-trailing-solidus",endTagWithAttributes:"end-tag-with-attributes",endTagWithTrailingSolidus:"end-tag-with-trailing-solidus",unexpectedSolidusInTag:"unexpected-solidus-in-tag",unexpectedNullCharacter:"unexpected-null-character",unexpectedQuestionMarkInsteadOfTagName:"unexpected-question-mark-instead-of-tag-name",invalidFirstCharacterOfTagName:"invalid-first-character-of-tag-name",unexpectedEqualsSignBeforeAttributeName:"unexpected-equals-sign-before-attribute-name",missingEndTagName:"missing-end-tag-name",unexpectedCharacterInAttributeName:"unexpected-character-in-attribute-name",unknownNamedCharacterReference:"unknown-named-character-reference",missingSemicolonAfterCharacterReference:"missing-semicolon-after-character-reference",unexpectedCharacterAfterDoctypeSystemIdentifier:"unexpected-character-after-doctype-system-identifier",unexpectedCharacterInUnquotedAttributeValue:"unexpected-character-in-unquoted-attribute-value",eofBeforeTagName:"eof-before-tag-name",eofInTag:"eof-in-tag",missingAttributeValue:"missing-attribute-value",missingWhitespaceBetweenAttributes:"missing-whitespace-between-attributes",missingWhitespaceAfterDoctypePublicKeyword:"missing-whitespace-after-doctype-public-keyword",missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:"missing-whitespace-between-doctype-public-and-system-identifiers",missingWhitespaceAfterDoctypeSystemKeyword:"missing-whitespace-after-doctype-system-keyword",missingQuoteBeforeDoctypePublicIdentifier:"missing-quote-before-doctype-public-identifier",missingQuoteBeforeDoctypeSystemIdentifier:"missing-quote-before-doctype-system-identifier",missingDoctypePublicIdentifier:"missing-doctype-public-identifier",missingDoctypeSystemIdentifier:"missing-doctype-system-identifier",abruptDoctypePublicIdentifier:"abrupt-doctype-public-identifier",abruptDoctypeSystemIdentifier:"abrupt-doctype-system-identifier",cdataInHtmlContent:"cdata-in-html-content",incorrectlyOpenedComment:"incorrectly-opened-comment",eofInScriptHtmlCommentLikeText:"eof-in-script-html-comment-like-text",eofInDoctype:"eof-in-doctype",nestedComment:"nested-comment",abruptClosingOfEmptyComment:"abrupt-closing-of-empty-comment",eofInComment:"eof-in-comment",incorrectlyClosedComment:"incorrectly-closed-comment",eofInCdata:"eof-in-cdata",absenceOfDigitsInNumericCharacterReference:"absence-of-digits-in-numeric-character-reference",nullCharacterReference:"null-character-reference",surrogateCharacterReference:"surrogate-character-reference",characterReferenceOutsideUnicodeRange:"character-reference-outside-unicode-range",controlCharacterReference:"control-character-reference",noncharacterCharacterReference:"noncharacter-character-reference",missingWhitespaceBeforeDoctypeName:"missing-whitespace-before-doctype-name",missingDoctypeName:"missing-doctype-name",invalidCharacterSequenceAfterDoctypeName:"invalid-character-sequence-after-doctype-name",duplicateAttribute:"duplicate-attribute",nonConformingDoctype:"non-conforming-doctype",missingDoctype:"missing-doctype",misplacedDoctype:"misplaced-doctype",endTagWithoutMatchingOpenElement:"end-tag-without-matching-open-element",closingOfElementWithOpenChildElements:"closing-of-element-with-open-child-elements",disallowedContentInNoscriptInHead:"disallowed-content-in-noscript-in-head",openElementsLeftAfterEof:"open-elements-left-after-eof",abandonedHeadElementChild:"abandoned-head-element-child",misplacedStartTagForHeadElement:"misplaced-start-tag-for-head-element",nestedNoscriptInHead:"nested-noscript-in-head",eofInElementThatCanContainOnlyText:"eof-in-element-that-can-contain-only-text"};const VQ=$Q,WQ=UQ,XQ=VQ.CODE_POINTS;var qQ=class{constructor(){this.html=null,this.pos=-1,this.lastGapPos=-1,this.lastCharPos=-1,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536}_err(){}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.lastCharPos){const t=this.html.charCodeAt(this.pos+1);if(VQ.isSurrogatePair(t))return this.pos++,this._addGap(),VQ.getSurrogatePairCodePoint(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,XQ.EOF;return this._err(WQ.surrogateInInputStream),e}dropParsedChunk(){this.pos>this.bufferWaterline&&(this.lastCharPos-=this.pos,this.html=this.html.substring(this.pos),this.pos=0,this.lastGapPos=-1,this.gapStack=[])}write(e,t){this.html?this.html+=e:this.html=e,this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1,this.html.length),this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1}advance(){if(this.pos++,this.pos>this.lastCharPos)return this.endOfChunkHit=!this.lastChunkWritten,XQ.EOF;let e=this.html.charCodeAt(this.pos);if(this.skipNextNewLine&&e===XQ.LINE_FEED)return this.skipNextNewLine=!1,this._addGap(),this.advance();if(e===XQ.CARRIAGE_RETURN)return this.skipNextNewLine=!0,XQ.LINE_FEED;this.skipNextNewLine=!1,VQ.isSurrogate(e)&&(e=this._processSurrogate(e));return e>31&&e<127||e===XQ.LINE_FEED||e===XQ.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e}_checkForProblematicCharacters(e){VQ.isControlCodePoint(e)?this._err(WQ.controlCharacterInInputStream):VQ.isUndefinedCodePoint(e)&&this._err(WQ.noncharacterInInputStream)}retreat(){this.pos===this.lastGapPos&&(this.lastGapPos=this.gapStack.pop(),this.pos--),this.pos--}},KQ=new Uint16Array([4,52,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,106,303,412,810,1432,1701,1796,1987,2114,2360,2420,2484,3170,3251,4140,4393,4575,4610,5106,5512,5728,6117,6274,6315,6345,6427,6516,7002,7910,8733,9323,9870,10170,10631,10893,11318,11386,11467,12773,13092,14474,14922,15448,15542,16419,17666,18166,18611,19004,19095,19298,19397,4,16,69,77,97,98,99,102,103,108,109,110,111,112,114,115,116,117,140,150,158,169,176,194,199,210,216,222,226,242,256,266,283,294,108,105,103,5,198,1,59,148,1,198,80,5,38,1,59,156,1,38,99,117,116,101,5,193,1,59,167,1,193,114,101,118,101,59,1,258,4,2,105,121,182,191,114,99,5,194,1,59,189,1,194,59,1,1040,114,59,3,55349,56580,114,97,118,101,5,192,1,59,208,1,192,112,104,97,59,1,913,97,99,114,59,1,256,100,59,1,10835,4,2,103,112,232,237,111,110,59,1,260,102,59,3,55349,56632,112,108,121,70,117,110,99,116,105,111,110,59,1,8289,105,110,103,5,197,1,59,264,1,197,4,2,99,115,272,277,114,59,3,55349,56476,105,103,110,59,1,8788,105,108,100,101,5,195,1,59,292,1,195,109,108,5,196,1,59,301,1,196,4,8,97,99,101,102,111,114,115,117,321,350,354,383,388,394,400,405,4,2,99,114,327,336,107,115,108,97,115,104,59,1,8726,4,2,118,119,342,345,59,1,10983,101,100,59,1,8966,121,59,1,1041,4,3,99,114,116,362,369,379,97,117,115,101,59,1,8757,110,111,117,108,108,105,115,59,1,8492,97,59,1,914,114,59,3,55349,56581,112,102,59,3,55349,56633,101,118,101,59,1,728,99,114,59,1,8492,109,112,101,113,59,1,8782,4,14,72,79,97,99,100,101,102,104,105,108,111,114,115,117,442,447,456,504,542,547,569,573,577,616,678,784,790,796,99,121,59,1,1063,80,89,5,169,1,59,454,1,169,4,3,99,112,121,464,470,497,117,116,101,59,1,262,4,2,59,105,476,478,1,8914,116,97,108,68,105,102,102,101,114,101,110,116,105,97,108,68,59,1,8517,108,101,121,115,59,1,8493,4,4,97,101,105,111,514,520,530,535,114,111,110,59,1,268,100,105,108,5,199,1,59,528,1,199,114,99,59,1,264,110,105,110,116,59,1,8752,111,116,59,1,266,4,2,100,110,553,560,105,108,108,97,59,1,184,116,101,114,68,111,116,59,1,183,114,59,1,8493,105,59,1,935,114,99,108,101,4,4,68,77,80,84,591,596,603,609,111,116,59,1,8857,105,110,117,115,59,1,8854,108,117,115,59,1,8853,105,109,101,115,59,1,8855,111,4,2,99,115,623,646,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8754,101,67,117,114,108,121,4,2,68,81,658,671,111,117,98,108,101,81,117,111,116,101,59,1,8221,117,111,116,101,59,1,8217,4,4,108,110,112,117,688,701,736,753,111,110,4,2,59,101,696,698,1,8759,59,1,10868,4,3,103,105,116,709,717,722,114,117,101,110,116,59,1,8801,110,116,59,1,8751,111,117,114,73,110,116,101,103,114,97,108,59,1,8750,4,2,102,114,742,745,59,1,8450,111,100,117,99,116,59,1,8720,110,116,101,114,67,108,111,99,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8755,111,115,115,59,1,10799,99,114,59,3,55349,56478,112,4,2,59,67,803,805,1,8915,97,112,59,1,8781,4,11,68,74,83,90,97,99,101,102,105,111,115,834,850,855,860,865,888,903,916,921,1011,1415,4,2,59,111,840,842,1,8517,116,114,97,104,100,59,1,10513,99,121,59,1,1026,99,121,59,1,1029,99,121,59,1,1039,4,3,103,114,115,873,879,883,103,101,114,59,1,8225,114,59,1,8609,104,118,59,1,10980,4,2,97,121,894,900,114,111,110,59,1,270,59,1,1044,108,4,2,59,116,910,912,1,8711,97,59,1,916,114,59,3,55349,56583,4,2,97,102,927,998,4,2,99,109,933,992,114,105,116,105,99,97,108,4,4,65,68,71,84,950,957,978,985,99,117,116,101,59,1,180,111,4,2,116,117,964,967,59,1,729,98,108,101,65,99,117,116,101,59,1,733,114,97,118,101,59,1,96,105,108,100,101,59,1,732,111,110,100,59,1,8900,102,101,114,101,110,116,105,97,108,68,59,1,8518,4,4,112,116,117,119,1021,1026,1048,1249,102,59,3,55349,56635,4,3,59,68,69,1034,1036,1041,1,168,111,116,59,1,8412,113,117,97,108,59,1,8784,98,108,101,4,6,67,68,76,82,85,86,1065,1082,1101,1189,1211,1236,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8751,111,4,2,116,119,1089,1092,59,1,168,110,65,114,114,111,119,59,1,8659,4,2,101,111,1107,1141,102,116,4,3,65,82,84,1117,1124,1136,114,114,111,119,59,1,8656,105,103,104,116,65,114,114,111,119,59,1,8660,101,101,59,1,10980,110,103,4,2,76,82,1149,1177,101,102,116,4,2,65,82,1158,1165,114,114,111,119,59,1,10232,105,103,104,116,65,114,114,111,119,59,1,10234,105,103,104,116,65,114,114,111,119,59,1,10233,105,103,104,116,4,2,65,84,1199,1206,114,114,111,119,59,1,8658,101,101,59,1,8872,112,4,2,65,68,1218,1225,114,114,111,119,59,1,8657,111,119,110,65,114,114,111,119,59,1,8661,101,114,116,105,99,97,108,66,97,114,59,1,8741,110,4,6,65,66,76,82,84,97,1264,1292,1299,1352,1391,1408,114,114,111,119,4,3,59,66,85,1276,1278,1283,1,8595,97,114,59,1,10515,112,65,114,114,111,119,59,1,8693,114,101,118,101,59,1,785,101,102,116,4,3,82,84,86,1310,1323,1334,105,103,104,116,86,101,99,116,111,114,59,1,10576,101,101,86,101,99,116,111,114,59,1,10590,101,99,116,111,114,4,2,59,66,1345,1347,1,8637,97,114,59,1,10582,105,103,104,116,4,2,84,86,1362,1373,101,101,86,101,99,116,111,114,59,1,10591,101,99,116,111,114,4,2,59,66,1384,1386,1,8641,97,114,59,1,10583,101,101,4,2,59,65,1399,1401,1,8868,114,114,111,119,59,1,8615,114,114,111,119,59,1,8659,4,2,99,116,1421,1426,114,59,3,55349,56479,114,111,107,59,1,272,4,16,78,84,97,99,100,102,103,108,109,111,112,113,115,116,117,120,1466,1470,1478,1489,1515,1520,1525,1536,1544,1593,1609,1617,1650,1664,1668,1677,71,59,1,330,72,5,208,1,59,1476,1,208,99,117,116,101,5,201,1,59,1487,1,201,4,3,97,105,121,1497,1503,1512,114,111,110,59,1,282,114,99,5,202,1,59,1510,1,202,59,1,1069,111,116,59,1,278,114,59,3,55349,56584,114,97,118,101,5,200,1,59,1534,1,200,101,109,101,110,116,59,1,8712,4,2,97,112,1550,1555,99,114,59,1,274,116,121,4,2,83,86,1563,1576,109,97,108,108,83,113,117,97,114,101,59,1,9723,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9643,4,2,103,112,1599,1604,111,110,59,1,280,102,59,3,55349,56636,115,105,108,111,110,59,1,917,117,4,2,97,105,1624,1640,108,4,2,59,84,1631,1633,1,10869,105,108,100,101,59,1,8770,108,105,98,114,105,117,109,59,1,8652,4,2,99,105,1656,1660,114,59,1,8496,109,59,1,10867,97,59,1,919,109,108,5,203,1,59,1675,1,203,4,2,105,112,1683,1689,115,116,115,59,1,8707,111,110,101,110,116,105,97,108,69,59,1,8519,4,5,99,102,105,111,115,1713,1717,1722,1762,1791,121,59,1,1060,114,59,3,55349,56585,108,108,101,100,4,2,83,86,1732,1745,109,97,108,108,83,113,117,97,114,101,59,1,9724,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9642,4,3,112,114,117,1770,1775,1781,102,59,3,55349,56637,65,108,108,59,1,8704,114,105,101,114,116,114,102,59,1,8497,99,114,59,1,8497,4,12,74,84,97,98,99,100,102,103,111,114,115,116,1822,1827,1834,1848,1855,1877,1882,1887,1890,1896,1978,1984,99,121,59,1,1027,5,62,1,59,1832,1,62,109,109,97,4,2,59,100,1843,1845,1,915,59,1,988,114,101,118,101,59,1,286,4,3,101,105,121,1863,1869,1874,100,105,108,59,1,290,114,99,59,1,284,59,1,1043,111,116,59,1,288,114,59,3,55349,56586,59,1,8921,112,102,59,3,55349,56638,101,97,116,101,114,4,6,69,70,71,76,83,84,1915,1933,1944,1953,1959,1971,113,117,97,108,4,2,59,76,1925,1927,1,8805,101,115,115,59,1,8923,117,108,108,69,113,117,97,108,59,1,8807,114,101,97,116,101,114,59,1,10914,101,115,115,59,1,8823,108,97,110,116,69,113,117,97,108,59,1,10878,105,108,100,101,59,1,8819,99,114,59,3,55349,56482,59,1,8811,4,8,65,97,99,102,105,111,115,117,2005,2012,2026,2032,2036,2049,2073,2089,82,68,99,121,59,1,1066,4,2,99,116,2018,2023,101,107,59,1,711,59,1,94,105,114,99,59,1,292,114,59,1,8460,108,98,101,114,116,83,112,97,99,101,59,1,8459,4,2,112,114,2055,2059,102,59,1,8461,105,122,111,110,116,97,108,76,105,110,101,59,1,9472,4,2,99,116,2079,2083,114,59,1,8459,114,111,107,59,1,294,109,112,4,2,68,69,2097,2107,111,119,110,72,117,109,112,59,1,8782,113,117,97,108,59,1,8783,4,14,69,74,79,97,99,100,102,103,109,110,111,115,116,117,2144,2149,2155,2160,2171,2189,2194,2198,2209,2245,2307,2329,2334,2341,99,121,59,1,1045,108,105,103,59,1,306,99,121,59,1,1025,99,117,116,101,5,205,1,59,2169,1,205,4,2,105,121,2177,2186,114,99,5,206,1,59,2184,1,206,59,1,1048,111,116,59,1,304,114,59,1,8465,114,97,118,101,5,204,1,59,2207,1,204,4,3,59,97,112,2217,2219,2238,1,8465,4,2,99,103,2225,2229,114,59,1,298,105,110,97,114,121,73,59,1,8520,108,105,101,115,59,1,8658,4,2,116,118,2251,2281,4,2,59,101,2257,2259,1,8748,4,2,103,114,2265,2271,114,97,108,59,1,8747,115,101,99,116,105,111,110,59,1,8898,105,115,105,98,108,101,4,2,67,84,2293,2300,111,109,109,97,59,1,8291,105,109,101,115,59,1,8290,4,3,103,112,116,2315,2320,2325,111,110,59,1,302,102,59,3,55349,56640,97,59,1,921,99,114,59,1,8464,105,108,100,101,59,1,296,4,2,107,109,2347,2352,99,121,59,1,1030,108,5,207,1,59,2358,1,207,4,5,99,102,111,115,117,2372,2386,2391,2397,2414,4,2,105,121,2378,2383,114,99,59,1,308,59,1,1049,114,59,3,55349,56589,112,102,59,3,55349,56641,4,2,99,101,2403,2408,114,59,3,55349,56485,114,99,121,59,1,1032,107,99,121,59,1,1028,4,7,72,74,97,99,102,111,115,2436,2441,2446,2452,2467,2472,2478,99,121,59,1,1061,99,121,59,1,1036,112,112,97,59,1,922,4,2,101,121,2458,2464,100,105,108,59,1,310,59,1,1050,114,59,3,55349,56590,112,102,59,3,55349,56642,99,114,59,3,55349,56486,4,11,74,84,97,99,101,102,108,109,111,115,116,2508,2513,2520,2562,2585,2981,2986,3004,3011,3146,3167,99,121,59,1,1033,5,60,1,59,2518,1,60,4,5,99,109,110,112,114,2532,2538,2544,2548,2558,117,116,101,59,1,313,98,100,97,59,1,923,103,59,1,10218,108,97,99,101,116,114,102,59,1,8466,114,59,1,8606,4,3,97,101,121,2570,2576,2582,114,111,110,59,1,317,100,105,108,59,1,315,59,1,1051,4,2,102,115,2591,2907,116,4,10,65,67,68,70,82,84,85,86,97,114,2614,2663,2672,2728,2735,2760,2820,2870,2888,2895,4,2,110,114,2620,2633,103,108,101,66,114,97,99,107,101,116,59,1,10216,114,111,119,4,3,59,66,82,2644,2646,2651,1,8592,97,114,59,1,8676,105,103,104,116,65,114,114,111,119,59,1,8646,101,105,108,105,110,103,59,1,8968,111,4,2,117,119,2679,2692,98,108,101,66,114,97,99,107,101,116,59,1,10214,110,4,2,84,86,2699,2710,101,101,86,101,99,116,111,114,59,1,10593,101,99,116,111,114,4,2,59,66,2721,2723,1,8643,97,114,59,1,10585,108,111,111,114,59,1,8970,105,103,104,116,4,2,65,86,2745,2752,114,114,111,119,59,1,8596,101,99,116,111,114,59,1,10574,4,2,101,114,2766,2792,101,4,3,59,65,86,2775,2777,2784,1,8867,114,114,111,119,59,1,8612,101,99,116,111,114,59,1,10586,105,97,110,103,108,101,4,3,59,66,69,2806,2808,2813,1,8882,97,114,59,1,10703,113,117,97,108,59,1,8884,112,4,3,68,84,86,2829,2841,2852,111,119,110,86,101,99,116,111,114,59,1,10577,101,101,86,101,99,116,111,114,59,1,10592,101,99,116,111,114,4,2,59,66,2863,2865,1,8639,97,114,59,1,10584,101,99,116,111,114,4,2,59,66,2881,2883,1,8636,97,114,59,1,10578,114,114,111,119,59,1,8656,105,103,104,116,97,114,114,111,119,59,1,8660,115,4,6,69,70,71,76,83,84,2922,2936,2947,2956,2962,2974,113,117,97,108,71,114,101,97,116,101,114,59,1,8922,117,108,108,69,113,117,97,108,59,1,8806,114,101,97,116,101,114,59,1,8822,101,115,115,59,1,10913,108,97,110,116,69,113,117,97,108,59,1,10877,105,108,100,101,59,1,8818,114,59,3,55349,56591,4,2,59,101,2992,2994,1,8920,102,116,97,114,114,111,119,59,1,8666,105,100,111,116,59,1,319,4,3,110,112,119,3019,3110,3115,103,4,4,76,82,108,114,3030,3058,3070,3098,101,102,116,4,2,65,82,3039,3046,114,114,111,119,59,1,10229,105,103,104,116,65,114,114,111,119,59,1,10231,105,103,104,116,65,114,114,111,119,59,1,10230,101,102,116,4,2,97,114,3079,3086,114,114,111,119,59,1,10232,105,103,104,116,97,114,114,111,119,59,1,10234,105,103,104,116,97,114,114,111,119,59,1,10233,102,59,3,55349,56643,101,114,4,2,76,82,3123,3134,101,102,116,65,114,114,111,119,59,1,8601,105,103,104,116,65,114,114,111,119,59,1,8600,4,3,99,104,116,3154,3158,3161,114,59,1,8466,59,1,8624,114,111,107,59,1,321,59,1,8810,4,8,97,99,101,102,105,111,115,117,3188,3192,3196,3222,3227,3237,3243,3248,112,59,1,10501,121,59,1,1052,4,2,100,108,3202,3213,105,117,109,83,112,97,99,101,59,1,8287,108,105,110,116,114,102,59,1,8499,114,59,3,55349,56592,110,117,115,80,108,117,115,59,1,8723,112,102,59,3,55349,56644,99,114,59,1,8499,59,1,924,4,9,74,97,99,101,102,111,115,116,117,3271,3276,3283,3306,3422,3427,4120,4126,4137,99,121,59,1,1034,99,117,116,101,59,1,323,4,3,97,101,121,3291,3297,3303,114,111,110,59,1,327,100,105,108,59,1,325,59,1,1053,4,3,103,115,119,3314,3380,3415,97,116,105,118,101,4,3,77,84,86,3327,3340,3365,101,100,105,117,109,83,112,97,99,101,59,1,8203,104,105,4,2,99,110,3348,3357,107,83,112,97,99,101,59,1,8203,83,112,97,99,101,59,1,8203,101,114,121,84,104,105,110,83,112,97,99,101,59,1,8203,116,101,100,4,2,71,76,3389,3405,114,101,97,116,101,114,71,114,101,97,116,101,114,59,1,8811,101,115,115,76,101,115,115,59,1,8810,76,105,110,101,59,1,10,114,59,3,55349,56593,4,4,66,110,112,116,3437,3444,3460,3464,114,101,97,107,59,1,8288,66,114,101,97,107,105,110,103,83,112,97,99,101,59,1,160,102,59,1,8469,4,13,59,67,68,69,71,72,76,78,80,82,83,84,86,3492,3494,3517,3536,3578,3657,3685,3784,3823,3860,3915,4066,4107,1,10988,4,2,111,117,3500,3510,110,103,114,117,101,110,116,59,1,8802,112,67,97,112,59,1,8813,111,117,98,108,101,86,101,114,116,105,99,97,108,66,97,114,59,1,8742,4,3,108,113,120,3544,3552,3571,101,109,101,110,116,59,1,8713,117,97,108,4,2,59,84,3561,3563,1,8800,105,108,100,101,59,3,8770,824,105,115,116,115,59,1,8708,114,101,97,116,101,114,4,7,59,69,70,71,76,83,84,3600,3602,3609,3621,3631,3637,3650,1,8815,113,117,97,108,59,1,8817,117,108,108,69,113,117,97,108,59,3,8807,824,114,101,97,116,101,114,59,3,8811,824,101,115,115,59,1,8825,108,97,110,116,69,113,117,97,108,59,3,10878,824,105,108,100,101,59,1,8821,117,109,112,4,2,68,69,3666,3677,111,119,110,72,117,109,112,59,3,8782,824,113,117,97,108,59,3,8783,824,101,4,2,102,115,3692,3724,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3709,3711,3717,1,8938,97,114,59,3,10703,824,113,117,97,108,59,1,8940,115,4,6,59,69,71,76,83,84,3739,3741,3748,3757,3764,3777,1,8814,113,117,97,108,59,1,8816,114,101,97,116,101,114,59,1,8824,101,115,115,59,3,8810,824,108,97,110,116,69,113,117,97,108,59,3,10877,824,105,108,100,101,59,1,8820,101,115,116,101,100,4,2,71,76,3795,3812,114,101,97,116,101,114,71,114,101,97,116,101,114,59,3,10914,824,101,115,115,76,101,115,115,59,3,10913,824,114,101,99,101,100,101,115,4,3,59,69,83,3838,3840,3848,1,8832,113,117,97,108,59,3,10927,824,108,97,110,116,69,113,117,97,108,59,1,8928,4,2,101,105,3866,3881,118,101,114,115,101,69,108,101,109,101,110,116,59,1,8716,103,104,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3900,3902,3908,1,8939,97,114,59,3,10704,824,113,117,97,108,59,1,8941,4,2,113,117,3921,3973,117,97,114,101,83,117,4,2,98,112,3933,3952,115,101,116,4,2,59,69,3942,3945,3,8847,824,113,117,97,108,59,1,8930,101,114,115,101,116,4,2,59,69,3963,3966,3,8848,824,113,117,97,108,59,1,8931,4,3,98,99,112,3981,4e3,4045,115,101,116,4,2,59,69,3990,3993,3,8834,8402,113,117,97,108,59,1,8840,99,101,101,100,115,4,4,59,69,83,84,4015,4017,4025,4037,1,8833,113,117,97,108,59,3,10928,824,108,97,110,116,69,113,117,97,108,59,1,8929,105,108,100,101,59,3,8831,824,101,114,115,101,116,4,2,59,69,4056,4059,3,8835,8402,113,117,97,108,59,1,8841,105,108,100,101,4,4,59,69,70,84,4080,4082,4089,4100,1,8769,113,117,97,108,59,1,8772,117,108,108,69,113,117,97,108,59,1,8775,105,108,100,101,59,1,8777,101,114,116,105,99,97,108,66,97,114,59,1,8740,99,114,59,3,55349,56489,105,108,100,101,5,209,1,59,4135,1,209,59,1,925,4,14,69,97,99,100,102,103,109,111,112,114,115,116,117,118,4170,4176,4187,4205,4212,4217,4228,4253,4259,4292,4295,4316,4337,4346,108,105,103,59,1,338,99,117,116,101,5,211,1,59,4185,1,211,4,2,105,121,4193,4202,114,99,5,212,1,59,4200,1,212,59,1,1054,98,108,97,99,59,1,336,114,59,3,55349,56594,114,97,118,101,5,210,1,59,4226,1,210,4,3,97,101,105,4236,4241,4246,99,114,59,1,332,103,97,59,1,937,99,114,111,110,59,1,927,112,102,59,3,55349,56646,101,110,67,117,114,108,121,4,2,68,81,4272,4285,111,117,98,108,101,81,117,111,116,101,59,1,8220,117,111,116,101,59,1,8216,59,1,10836,4,2,99,108,4301,4306,114,59,3,55349,56490,97,115,104,5,216,1,59,4314,1,216,105,4,2,108,109,4323,4332,100,101,5,213,1,59,4330,1,213,101,115,59,1,10807,109,108,5,214,1,59,4344,1,214,101,114,4,2,66,80,4354,4380,4,2,97,114,4360,4364,114,59,1,8254,97,99,4,2,101,107,4372,4375,59,1,9182,101,116,59,1,9140,97,114,101,110,116,104,101,115,105,115,59,1,9180,4,9,97,99,102,104,105,108,111,114,115,4413,4422,4426,4431,4435,4438,4448,4471,4561,114,116,105,97,108,68,59,1,8706,121,59,1,1055,114,59,3,55349,56595,105,59,1,934,59,1,928,117,115,77,105,110,117,115,59,1,177,4,2,105,112,4454,4467,110,99,97,114,101,112,108,97,110,101,59,1,8460,102,59,1,8473,4,4,59,101,105,111,4481,4483,4526,4531,1,10939,99,101,100,101,115,4,4,59,69,83,84,4498,4500,4507,4519,1,8826,113,117,97,108,59,1,10927,108,97,110,116,69,113,117,97,108,59,1,8828,105,108,100,101,59,1,8830,109,101,59,1,8243,4,2,100,112,4537,4543,117,99,116,59,1,8719,111,114,116,105,111,110,4,2,59,97,4555,4557,1,8759,108,59,1,8733,4,2,99,105,4567,4572,114,59,3,55349,56491,59,1,936,4,4,85,102,111,115,4585,4594,4599,4604,79,84,5,34,1,59,4592,1,34,114,59,3,55349,56596,112,102,59,1,8474,99,114,59,3,55349,56492,4,12,66,69,97,99,101,102,104,105,111,114,115,117,4636,4642,4650,4681,4704,4763,4767,4771,5047,5069,5081,5094,97,114,114,59,1,10512,71,5,174,1,59,4648,1,174,4,3,99,110,114,4658,4664,4668,117,116,101,59,1,340,103,59,1,10219,114,4,2,59,116,4675,4677,1,8608,108,59,1,10518,4,3,97,101,121,4689,4695,4701,114,111,110,59,1,344,100,105,108,59,1,342,59,1,1056,4,2,59,118,4710,4712,1,8476,101,114,115,101,4,2,69,85,4722,4748,4,2,108,113,4728,4736,101,109,101,110,116,59,1,8715,117,105,108,105,98,114,105,117,109,59,1,8651,112,69,113,117,105,108,105,98,114,105,117,109,59,1,10607,114,59,1,8476,111,59,1,929,103,104,116,4,8,65,67,68,70,84,85,86,97,4792,4840,4849,4905,4912,4972,5022,5040,4,2,110,114,4798,4811,103,108,101,66,114,97,99,107,101,116,59,1,10217,114,111,119,4,3,59,66,76,4822,4824,4829,1,8594,97,114,59,1,8677,101,102,116,65,114,114,111,119,59,1,8644,101,105,108,105,110,103,59,1,8969,111,4,2,117,119,4856,4869,98,108,101,66,114,97,99,107,101,116,59,1,10215,110,4,2,84,86,4876,4887,101,101,86,101,99,116,111,114,59,1,10589,101,99,116,111,114,4,2,59,66,4898,4900,1,8642,97,114,59,1,10581,108,111,111,114,59,1,8971,4,2,101,114,4918,4944,101,4,3,59,65,86,4927,4929,4936,1,8866,114,114,111,119,59,1,8614,101,99,116,111,114,59,1,10587,105,97,110,103,108,101,4,3,59,66,69,4958,4960,4965,1,8883,97,114,59,1,10704,113,117,97,108,59,1,8885,112,4,3,68,84,86,4981,4993,5004,111,119,110,86,101,99,116,111,114,59,1,10575,101,101,86,101,99,116,111,114,59,1,10588,101,99,116,111,114,4,2,59,66,5015,5017,1,8638,97,114,59,1,10580,101,99,116,111,114,4,2,59,66,5033,5035,1,8640,97,114,59,1,10579,114,114,111,119,59,1,8658,4,2,112,117,5053,5057,102,59,1,8477,110,100,73,109,112,108,105,101,115,59,1,10608,105,103,104,116,97,114,114,111,119,59,1,8667,4,2,99,104,5087,5091,114,59,1,8475,59,1,8625,108,101,68,101,108,97,121,101,100,59,1,10740,4,13,72,79,97,99,102,104,105,109,111,113,115,116,117,5134,5150,5157,5164,5198,5203,5259,5265,5277,5283,5374,5380,5385,4,2,67,99,5140,5146,72,99,121,59,1,1065,121,59,1,1064,70,84,99,121,59,1,1068,99,117,116,101,59,1,346,4,5,59,97,101,105,121,5176,5178,5184,5190,5195,1,10940,114,111,110,59,1,352,100,105,108,59,1,350,114,99,59,1,348,59,1,1057,114,59,3,55349,56598,111,114,116,4,4,68,76,82,85,5216,5227,5238,5250,111,119,110,65,114,114,111,119,59,1,8595,101,102,116,65,114,114,111,119,59,1,8592,105,103,104,116,65,114,114,111,119,59,1,8594,112,65,114,114,111,119,59,1,8593,103,109,97,59,1,931,97,108,108,67,105,114,99,108,101,59,1,8728,112,102,59,3,55349,56650,4,2,114,117,5289,5293,116,59,1,8730,97,114,101,4,4,59,73,83,85,5306,5308,5322,5367,1,9633,110,116,101,114,115,101,99,116,105,111,110,59,1,8851,117,4,2,98,112,5329,5347,115,101,116,4,2,59,69,5338,5340,1,8847,113,117,97,108,59,1,8849,101,114,115,101,116,4,2,59,69,5358,5360,1,8848,113,117,97,108,59,1,8850,110,105,111,110,59,1,8852,99,114,59,3,55349,56494,97,114,59,1,8902,4,4,98,99,109,112,5395,5420,5475,5478,4,2,59,115,5401,5403,1,8912,101,116,4,2,59,69,5411,5413,1,8912,113,117,97,108,59,1,8838,4,2,99,104,5426,5468,101,101,100,115,4,4,59,69,83,84,5440,5442,5449,5461,1,8827,113,117,97,108,59,1,10928,108,97,110,116,69,113,117,97,108,59,1,8829,105,108,100,101,59,1,8831,84,104,97,116,59,1,8715,59,1,8721,4,3,59,101,115,5486,5488,5507,1,8913,114,115,101,116,4,2,59,69,5498,5500,1,8835,113,117,97,108,59,1,8839,101,116,59,1,8913,4,11,72,82,83,97,99,102,104,105,111,114,115,5536,5546,5552,5567,5579,5602,5607,5655,5695,5701,5711,79,82,78,5,222,1,59,5544,1,222,65,68,69,59,1,8482,4,2,72,99,5558,5563,99,121,59,1,1035,121,59,1,1062,4,2,98,117,5573,5576,59,1,9,59,1,932,4,3,97,101,121,5587,5593,5599,114,111,110,59,1,356,100,105,108,59,1,354,59,1,1058,114,59,3,55349,56599,4,2,101,105,5613,5631,4,2,114,116,5619,5627,101,102,111,114,101,59,1,8756,97,59,1,920,4,2,99,110,5637,5647,107,83,112,97,99,101,59,3,8287,8202,83,112,97,99,101,59,1,8201,108,100,101,4,4,59,69,70,84,5668,5670,5677,5688,1,8764,113,117,97,108,59,1,8771,117,108,108,69,113,117,97,108,59,1,8773,105,108,100,101,59,1,8776,112,102,59,3,55349,56651,105,112,108,101,68,111,116,59,1,8411,4,2,99,116,5717,5722,114,59,3,55349,56495,114,111,107,59,1,358,4,14,97,98,99,100,102,103,109,110,111,112,114,115,116,117,5758,5789,5805,5823,5830,5835,5846,5852,5921,5937,6089,6095,6101,6108,4,2,99,114,5764,5774,117,116,101,5,218,1,59,5772,1,218,114,4,2,59,111,5781,5783,1,8607,99,105,114,59,1,10569,114,4,2,99,101,5796,5800,121,59,1,1038,118,101,59,1,364,4,2,105,121,5811,5820,114,99,5,219,1,59,5818,1,219,59,1,1059,98,108,97,99,59,1,368,114,59,3,55349,56600,114,97,118,101,5,217,1,59,5844,1,217,97,99,114,59,1,362,4,2,100,105,5858,5905,101,114,4,2,66,80,5866,5892,4,2,97,114,5872,5876,114,59,1,95,97,99,4,2,101,107,5884,5887,59,1,9183,101,116,59,1,9141,97,114,101,110,116,104,101,115,105,115,59,1,9181,111,110,4,2,59,80,5913,5915,1,8899,108,117,115,59,1,8846,4,2,103,112,5927,5932,111,110,59,1,370,102,59,3,55349,56652,4,8,65,68,69,84,97,100,112,115,5955,5985,5996,6009,6026,6033,6044,6075,114,114,111,119,4,3,59,66,68,5967,5969,5974,1,8593,97,114,59,1,10514,111,119,110,65,114,114,111,119,59,1,8645,111,119,110,65,114,114,111,119,59,1,8597,113,117,105,108,105,98,114,105,117,109,59,1,10606,101,101,4,2,59,65,6017,6019,1,8869,114,114,111,119,59,1,8613,114,114,111,119,59,1,8657,111,119,110,97,114,114,111,119,59,1,8661,101,114,4,2,76,82,6052,6063,101,102,116,65,114,114,111,119,59,1,8598,105,103,104,116,65,114,114,111,119,59,1,8599,105,4,2,59,108,6082,6084,1,978,111,110,59,1,933,105,110,103,59,1,366,99,114,59,3,55349,56496,105,108,100,101,59,1,360,109,108,5,220,1,59,6115,1,220,4,9,68,98,99,100,101,102,111,115,118,6137,6143,6148,6152,6166,6250,6255,6261,6267,97,115,104,59,1,8875,97,114,59,1,10987,121,59,1,1042,97,115,104,4,2,59,108,6161,6163,1,8873,59,1,10982,4,2,101,114,6172,6175,59,1,8897,4,3,98,116,121,6183,6188,6238,97,114,59,1,8214,4,2,59,105,6194,6196,1,8214,99,97,108,4,4,66,76,83,84,6209,6214,6220,6231,97,114,59,1,8739,105,110,101,59,1,124,101,112,97,114,97,116,111,114,59,1,10072,105,108,100,101,59,1,8768,84,104,105,110,83,112,97,99,101,59,1,8202,114,59,3,55349,56601,112,102,59,3,55349,56653,99,114,59,3,55349,56497,100,97,115,104,59,1,8874,4,5,99,101,102,111,115,6286,6292,6298,6303,6309,105,114,99,59,1,372,100,103,101,59,1,8896,114,59,3,55349,56602,112,102,59,3,55349,56654,99,114,59,3,55349,56498,4,4,102,105,111,115,6325,6330,6333,6339,114,59,3,55349,56603,59,1,926,112,102,59,3,55349,56655,99,114,59,3,55349,56499,4,9,65,73,85,97,99,102,111,115,117,6365,6370,6375,6380,6391,6405,6410,6416,6422,99,121,59,1,1071,99,121,59,1,1031,99,121,59,1,1070,99,117,116,101,5,221,1,59,6389,1,221,4,2,105,121,6397,6402,114,99,59,1,374,59,1,1067,114,59,3,55349,56604,112,102,59,3,55349,56656,99,114,59,3,55349,56500,109,108,59,1,376,4,8,72,97,99,100,101,102,111,115,6445,6450,6457,6472,6477,6501,6505,6510,99,121,59,1,1046,99,117,116,101,59,1,377,4,2,97,121,6463,6469,114,111,110,59,1,381,59,1,1047,111,116,59,1,379,4,2,114,116,6483,6497,111,87,105,100,116,104,83,112,97,99,101,59,1,8203,97,59,1,918,114,59,1,8488,112,102,59,1,8484,99,114,59,3,55349,56501,4,16,97,98,99,101,102,103,108,109,110,111,112,114,115,116,117,119,6550,6561,6568,6612,6622,6634,6645,6672,6699,6854,6870,6923,6933,6963,6974,6983,99,117,116,101,5,225,1,59,6559,1,225,114,101,118,101,59,1,259,4,6,59,69,100,105,117,121,6582,6584,6588,6591,6600,6609,1,8766,59,3,8766,819,59,1,8767,114,99,5,226,1,59,6598,1,226,116,101,5,180,1,59,6607,1,180,59,1,1072,108,105,103,5,230,1,59,6620,1,230,4,2,59,114,6628,6630,1,8289,59,3,55349,56606,114,97,118,101,5,224,1,59,6643,1,224,4,2,101,112,6651,6667,4,2,102,112,6657,6663,115,121,109,59,1,8501,104,59,1,8501,104,97,59,1,945,4,2,97,112,6678,6692,4,2,99,108,6684,6688,114,59,1,257,103,59,1,10815,5,38,1,59,6697,1,38,4,2,100,103,6705,6737,4,5,59,97,100,115,118,6717,6719,6724,6727,6734,1,8743,110,100,59,1,10837,59,1,10844,108,111,112,101,59,1,10840,59,1,10842,4,7,59,101,108,109,114,115,122,6753,6755,6758,6762,6814,6835,6848,1,8736,59,1,10660,101,59,1,8736,115,100,4,2,59,97,6770,6772,1,8737,4,8,97,98,99,100,101,102,103,104,6790,6793,6796,6799,6802,6805,6808,6811,59,1,10664,59,1,10665,59,1,10666,59,1,10667,59,1,10668,59,1,10669,59,1,10670,59,1,10671,116,4,2,59,118,6821,6823,1,8735,98,4,2,59,100,6830,6832,1,8894,59,1,10653,4,2,112,116,6841,6845,104,59,1,8738,59,1,197,97,114,114,59,1,9084,4,2,103,112,6860,6865,111,110,59,1,261,102,59,3,55349,56658,4,7,59,69,97,101,105,111,112,6886,6888,6891,6897,6900,6904,6908,1,8776,59,1,10864,99,105,114,59,1,10863,59,1,8778,100,59,1,8779,115,59,1,39,114,111,120,4,2,59,101,6917,6919,1,8776,113,59,1,8778,105,110,103,5,229,1,59,6931,1,229,4,3,99,116,121,6941,6946,6949,114,59,3,55349,56502,59,1,42,109,112,4,2,59,101,6957,6959,1,8776,113,59,1,8781,105,108,100,101,5,227,1,59,6972,1,227,109,108,5,228,1,59,6981,1,228,4,2,99,105,6989,6997,111,110,105,110,116,59,1,8755,110,116,59,1,10769,4,16,78,97,98,99,100,101,102,105,107,108,110,111,112,114,115,117,7036,7041,7119,7135,7149,7155,7219,7224,7347,7354,7463,7489,7786,7793,7814,7866,111,116,59,1,10989,4,2,99,114,7047,7094,107,4,4,99,101,112,115,7058,7064,7073,7080,111,110,103,59,1,8780,112,115,105,108,111,110,59,1,1014,114,105,109,101,59,1,8245,105,109,4,2,59,101,7088,7090,1,8765,113,59,1,8909,4,2,118,119,7100,7105,101,101,59,1,8893,101,100,4,2,59,103,7113,7115,1,8965,101,59,1,8965,114,107,4,2,59,116,7127,7129,1,9141,98,114,107,59,1,9142,4,2,111,121,7141,7146,110,103,59,1,8780,59,1,1073,113,117,111,59,1,8222,4,5,99,109,112,114,116,7167,7181,7188,7193,7199,97,117,115,4,2,59,101,7176,7178,1,8757,59,1,8757,112,116,121,118,59,1,10672,115,105,59,1,1014,110,111,117,59,1,8492,4,3,97,104,119,7207,7210,7213,59,1,946,59,1,8502,101,101,110,59,1,8812,114,59,3,55349,56607,103,4,7,99,111,115,116,117,118,119,7241,7262,7288,7305,7328,7335,7340,4,3,97,105,117,7249,7253,7258,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,4,3,100,112,116,7270,7275,7281,111,116,59,1,10752,108,117,115,59,1,10753,105,109,101,115,59,1,10754,4,2,113,116,7294,7300,99,117,112,59,1,10758,97,114,59,1,9733,114,105,97,110,103,108,101,4,2,100,117,7318,7324,111,119,110,59,1,9661,112,59,1,9651,112,108,117,115,59,1,10756,101,101,59,1,8897,101,100,103,101,59,1,8896,97,114,111,119,59,1,10509,4,3,97,107,111,7362,7436,7458,4,2,99,110,7368,7432,107,4,3,108,115,116,7377,7386,7394,111,122,101,110,103,101,59,1,10731,113,117,97,114,101,59,1,9642,114,105,97,110,103,108,101,4,4,59,100,108,114,7411,7413,7419,7425,1,9652,111,119,110,59,1,9662,101,102,116,59,1,9666,105,103,104,116,59,1,9656,107,59,1,9251,4,2,49,51,7442,7454,4,2,50,52,7448,7451,59,1,9618,59,1,9617,52,59,1,9619,99,107,59,1,9608,4,2,101,111,7469,7485,4,2,59,113,7475,7478,3,61,8421,117,105,118,59,3,8801,8421,116,59,1,8976,4,4,112,116,119,120,7499,7504,7517,7523,102,59,3,55349,56659,4,2,59,116,7510,7512,1,8869,111,109,59,1,8869,116,105,101,59,1,8904,4,12,68,72,85,86,98,100,104,109,112,116,117,118,7549,7571,7597,7619,7655,7660,7682,7708,7715,7721,7728,7750,4,4,76,82,108,114,7559,7562,7565,7568,59,1,9559,59,1,9556,59,1,9558,59,1,9555,4,5,59,68,85,100,117,7583,7585,7588,7591,7594,1,9552,59,1,9574,59,1,9577,59,1,9572,59,1,9575,4,4,76,82,108,114,7607,7610,7613,7616,59,1,9565,59,1,9562,59,1,9564,59,1,9561,4,7,59,72,76,82,104,108,114,7635,7637,7640,7643,7646,7649,7652,1,9553,59,1,9580,59,1,9571,59,1,9568,59,1,9579,59,1,9570,59,1,9567,111,120,59,1,10697,4,4,76,82,108,114,7670,7673,7676,7679,59,1,9557,59,1,9554,59,1,9488,59,1,9484,4,5,59,68,85,100,117,7694,7696,7699,7702,7705,1,9472,59,1,9573,59,1,9576,59,1,9516,59,1,9524,105,110,117,115,59,1,8863,108,117,115,59,1,8862,105,109,101,115,59,1,8864,4,4,76,82,108,114,7738,7741,7744,7747,59,1,9563,59,1,9560,59,1,9496,59,1,9492,4,7,59,72,76,82,104,108,114,7766,7768,7771,7774,7777,7780,7783,1,9474,59,1,9578,59,1,9569,59,1,9566,59,1,9532,59,1,9508,59,1,9500,114,105,109,101,59,1,8245,4,2,101,118,7799,7804,118,101,59,1,728,98,97,114,5,166,1,59,7812,1,166,4,4,99,101,105,111,7824,7829,7834,7846,114,59,3,55349,56503,109,105,59,1,8271,109,4,2,59,101,7841,7843,1,8765,59,1,8909,108,4,3,59,98,104,7855,7857,7860,1,92,59,1,10693,115,117,98,59,1,10184,4,2,108,109,7872,7885,108,4,2,59,101,7879,7881,1,8226,116,59,1,8226,112,4,3,59,69,101,7894,7896,7899,1,8782,59,1,10926,4,2,59,113,7905,7907,1,8783,59,1,8783,4,15,97,99,100,101,102,104,105,108,111,114,115,116,117,119,121,7942,8021,8075,8080,8121,8126,8157,8279,8295,8430,8446,8485,8491,8707,8726,4,3,99,112,114,7950,7956,8007,117,116,101,59,1,263,4,6,59,97,98,99,100,115,7970,7972,7977,7984,7998,8003,1,8745,110,100,59,1,10820,114,99,117,112,59,1,10825,4,2,97,117,7990,7994,112,59,1,10827,112,59,1,10823,111,116,59,1,10816,59,3,8745,65024,4,2,101,111,8013,8017,116,59,1,8257,110,59,1,711,4,4,97,101,105,117,8031,8046,8056,8061,4,2,112,114,8037,8041,115,59,1,10829,111,110,59,1,269,100,105,108,5,231,1,59,8054,1,231,114,99,59,1,265,112,115,4,2,59,115,8069,8071,1,10828,109,59,1,10832,111,116,59,1,267,4,3,100,109,110,8088,8097,8104,105,108,5,184,1,59,8095,1,184,112,116,121,118,59,1,10674,116,5,162,2,59,101,8112,8114,1,162,114,100,111,116,59,1,183,114,59,3,55349,56608,4,3,99,101,105,8134,8138,8154,121,59,1,1095,99,107,4,2,59,109,8146,8148,1,10003,97,114,107,59,1,10003,59,1,967,114,4,7,59,69,99,101,102,109,115,8174,8176,8179,8258,8261,8268,8273,1,9675,59,1,10691,4,3,59,101,108,8187,8189,8193,1,710,113,59,1,8791,101,4,2,97,100,8200,8223,114,114,111,119,4,2,108,114,8210,8216,101,102,116,59,1,8634,105,103,104,116,59,1,8635,4,5,82,83,97,99,100,8235,8238,8241,8246,8252,59,1,174,59,1,9416,115,116,59,1,8859,105,114,99,59,1,8858,97,115,104,59,1,8861,59,1,8791,110,105,110,116,59,1,10768,105,100,59,1,10991,99,105,114,59,1,10690,117,98,115,4,2,59,117,8288,8290,1,9827,105,116,59,1,9827,4,4,108,109,110,112,8305,8326,8376,8400,111,110,4,2,59,101,8313,8315,1,58,4,2,59,113,8321,8323,1,8788,59,1,8788,4,2,109,112,8332,8344,97,4,2,59,116,8339,8341,1,44,59,1,64,4,3,59,102,108,8352,8354,8358,1,8705,110,59,1,8728,101,4,2,109,120,8365,8371,101,110,116,59,1,8705,101,115,59,1,8450,4,2,103,105,8382,8395,4,2,59,100,8388,8390,1,8773,111,116,59,1,10861,110,116,59,1,8750,4,3,102,114,121,8408,8412,8417,59,3,55349,56660,111,100,59,1,8720,5,169,2,59,115,8424,8426,1,169,114,59,1,8471,4,2,97,111,8436,8441,114,114,59,1,8629,115,115,59,1,10007,4,2,99,117,8452,8457,114,59,3,55349,56504,4,2,98,112,8463,8474,4,2,59,101,8469,8471,1,10959,59,1,10961,4,2,59,101,8480,8482,1,10960,59,1,10962,100,111,116,59,1,8943,4,7,100,101,108,112,114,118,119,8507,8522,8536,8550,8600,8697,8702,97,114,114,4,2,108,114,8516,8519,59,1,10552,59,1,10549,4,2,112,115,8528,8532,114,59,1,8926,99,59,1,8927,97,114,114,4,2,59,112,8545,8547,1,8630,59,1,10557,4,6,59,98,99,100,111,115,8564,8566,8573,8587,8592,8596,1,8746,114,99,97,112,59,1,10824,4,2,97,117,8579,8583,112,59,1,10822,112,59,1,10826,111,116,59,1,8845,114,59,1,10821,59,3,8746,65024,4,4,97,108,114,118,8610,8623,8663,8672,114,114,4,2,59,109,8618,8620,1,8631,59,1,10556,121,4,3,101,118,119,8632,8651,8656,113,4,2,112,115,8639,8645,114,101,99,59,1,8926,117,99,99,59,1,8927,101,101,59,1,8910,101,100,103,101,59,1,8911,101,110,5,164,1,59,8670,1,164,101,97,114,114,111,119,4,2,108,114,8684,8690,101,102,116,59,1,8630,105,103,104,116,59,1,8631,101,101,59,1,8910,101,100,59,1,8911,4,2,99,105,8713,8721,111,110,105,110,116,59,1,8754,110,116,59,1,8753,108,99,116,121,59,1,9005,4,19,65,72,97,98,99,100,101,102,104,105,106,108,111,114,115,116,117,119,122,8773,8778,8783,8821,8839,8854,8887,8914,8930,8944,9036,9041,9058,9197,9227,9258,9281,9297,9305,114,114,59,1,8659,97,114,59,1,10597,4,4,103,108,114,115,8793,8799,8805,8809,103,101,114,59,1,8224,101,116,104,59,1,8504,114,59,1,8595,104,4,2,59,118,8816,8818,1,8208,59,1,8867,4,2,107,108,8827,8834,97,114,111,119,59,1,10511,97,99,59,1,733,4,2,97,121,8845,8851,114,111,110,59,1,271,59,1,1076,4,3,59,97,111,8862,8864,8880,1,8518,4,2,103,114,8870,8876,103,101,114,59,1,8225,114,59,1,8650,116,115,101,113,59,1,10871,4,3,103,108,109,8895,8902,8907,5,176,1,59,8900,1,176,116,97,59,1,948,112,116,121,118,59,1,10673,4,2,105,114,8920,8926,115,104,116,59,1,10623,59,3,55349,56609,97,114,4,2,108,114,8938,8941,59,1,8643,59,1,8642,4,5,97,101,103,115,118,8956,8986,8989,8996,9001,109,4,3,59,111,115,8965,8967,8983,1,8900,110,100,4,2,59,115,8975,8977,1,8900,117,105,116,59,1,9830,59,1,9830,59,1,168,97,109,109,97,59,1,989,105,110,59,1,8946,4,3,59,105,111,9009,9011,9031,1,247,100,101,5,247,2,59,111,9020,9022,1,247,110,116,105,109,101,115,59,1,8903,110,120,59,1,8903,99,121,59,1,1106,99,4,2,111,114,9048,9053,114,110,59,1,8990,111,112,59,1,8973,4,5,108,112,116,117,119,9070,9076,9081,9130,9144,108,97,114,59,1,36,102,59,3,55349,56661,4,5,59,101,109,112,115,9093,9095,9109,9116,9122,1,729,113,4,2,59,100,9102,9104,1,8784,111,116,59,1,8785,105,110,117,115,59,1,8760,108,117,115,59,1,8724,113,117,97,114,101,59,1,8865,98,108,101,98,97,114,119,101,100,103,101,59,1,8966,110,4,3,97,100,104,9153,9160,9172,114,114,111,119,59,1,8595,111,119,110,97,114,114,111,119,115,59,1,8650,97,114,112,111,111,110,4,2,108,114,9184,9190,101,102,116,59,1,8643,105,103,104,116,59,1,8642,4,2,98,99,9203,9211,107,97,114,111,119,59,1,10512,4,2,111,114,9217,9222,114,110,59,1,8991,111,112,59,1,8972,4,3,99,111,116,9235,9248,9252,4,2,114,121,9241,9245,59,3,55349,56505,59,1,1109,108,59,1,10742,114,111,107,59,1,273,4,2,100,114,9264,9269,111,116,59,1,8945,105,4,2,59,102,9276,9278,1,9663,59,1,9662,4,2,97,104,9287,9292,114,114,59,1,8693,97,114,59,1,10607,97,110,103,108,101,59,1,10662,4,2,99,105,9311,9315,121,59,1,1119,103,114,97,114,114,59,1,10239,4,18,68,97,99,100,101,102,103,108,109,110,111,112,113,114,115,116,117,120,9361,9376,9398,9439,9444,9447,9462,9495,9531,9585,9598,9614,9659,9755,9771,9792,9808,9826,4,2,68,111,9367,9372,111,116,59,1,10871,116,59,1,8785,4,2,99,115,9382,9392,117,116,101,5,233,1,59,9390,1,233,116,101,114,59,1,10862,4,4,97,105,111,121,9408,9414,9430,9436,114,111,110,59,1,283,114,4,2,59,99,9421,9423,1,8790,5,234,1,59,9428,1,234,108,111,110,59,1,8789,59,1,1101,111,116,59,1,279,59,1,8519,4,2,68,114,9453,9458,111,116,59,1,8786,59,3,55349,56610,4,3,59,114,115,9470,9472,9482,1,10906,97,118,101,5,232,1,59,9480,1,232,4,2,59,100,9488,9490,1,10902,111,116,59,1,10904,4,4,59,105,108,115,9505,9507,9515,9518,1,10905,110,116,101,114,115,59,1,9191,59,1,8467,4,2,59,100,9524,9526,1,10901,111,116,59,1,10903,4,3,97,112,115,9539,9544,9564,99,114,59,1,275,116,121,4,3,59,115,118,9554,9556,9561,1,8709,101,116,59,1,8709,59,1,8709,112,4,2,49,59,9571,9583,4,2,51,52,9577,9580,59,1,8196,59,1,8197,1,8195,4,2,103,115,9591,9594,59,1,331,112,59,1,8194,4,2,103,112,9604,9609,111,110,59,1,281,102,59,3,55349,56662,4,3,97,108,115,9622,9635,9640,114,4,2,59,115,9629,9631,1,8917,108,59,1,10723,117,115,59,1,10865,105,4,3,59,108,118,9649,9651,9656,1,949,111,110,59,1,949,59,1,1013,4,4,99,115,117,118,9669,9686,9716,9747,4,2,105,111,9675,9680,114,99,59,1,8790,108,111,110,59,1,8789,4,2,105,108,9692,9696,109,59,1,8770,97,110,116,4,2,103,108,9705,9710,116,114,59,1,10902,101,115,115,59,1,10901,4,3,97,101,105,9724,9729,9734,108,115,59,1,61,115,116,59,1,8799,118,4,2,59,68,9741,9743,1,8801,68,59,1,10872,112,97,114,115,108,59,1,10725,4,2,68,97,9761,9766,111,116,59,1,8787,114,114,59,1,10609,4,3,99,100,105,9779,9783,9788,114,59,1,8495,111,116,59,1,8784,109,59,1,8770,4,2,97,104,9798,9801,59,1,951,5,240,1,59,9806,1,240,4,2,109,114,9814,9822,108,5,235,1,59,9820,1,235,111,59,1,8364,4,3,99,105,112,9834,9838,9843,108,59,1,33,115,116,59,1,8707,4,2,101,111,9849,9859,99,116,97,116,105,111,110,59,1,8496,110,101,110,116,105,97,108,101,59,1,8519,4,12,97,99,101,102,105,106,108,110,111,112,114,115,9896,9910,9914,9921,9954,9960,9967,9989,9994,10027,10036,10164,108,108,105,110,103,100,111,116,115,101,113,59,1,8786,121,59,1,1092,109,97,108,101,59,1,9792,4,3,105,108,114,9929,9935,9950,108,105,103,59,1,64259,4,2,105,108,9941,9945,103,59,1,64256,105,103,59,1,64260,59,3,55349,56611,108,105,103,59,1,64257,108,105,103,59,3,102,106,4,3,97,108,116,9975,9979,9984,116,59,1,9837,105,103,59,1,64258,110,115,59,1,9649,111,102,59,1,402,4,2,112,114,1e4,10005,102,59,3,55349,56663,4,2,97,107,10011,10016,108,108,59,1,8704,4,2,59,118,10022,10024,1,8916,59,1,10969,97,114,116,105,110,116,59,1,10765,4,2,97,111,10042,10159,4,2,99,115,10048,10155,4,6,49,50,51,52,53,55,10062,10102,10114,10135,10139,10151,4,6,50,51,52,53,54,56,10076,10083,10086,10093,10096,10099,5,189,1,59,10081,1,189,59,1,8531,5,188,1,59,10091,1,188,59,1,8533,59,1,8537,59,1,8539,4,2,51,53,10108,10111,59,1,8532,59,1,8534,4,3,52,53,56,10122,10129,10132,5,190,1,59,10127,1,190,59,1,8535,59,1,8540,53,59,1,8536,4,2,54,56,10145,10148,59,1,8538,59,1,8541,56,59,1,8542,108,59,1,8260,119,110,59,1,8994,99,114,59,3,55349,56507,4,17,69,97,98,99,100,101,102,103,105,106,108,110,111,114,115,116,118,10206,10217,10247,10254,10268,10273,10358,10363,10374,10380,10385,10406,10458,10464,10470,10497,10610,4,2,59,108,10212,10214,1,8807,59,1,10892,4,3,99,109,112,10225,10231,10244,117,116,101,59,1,501,109,97,4,2,59,100,10239,10241,1,947,59,1,989,59,1,10886,114,101,118,101,59,1,287,4,2,105,121,10260,10265,114,99,59,1,285,59,1,1075,111,116,59,1,289,4,4,59,108,113,115,10283,10285,10288,10308,1,8805,59,1,8923,4,3,59,113,115,10296,10298,10301,1,8805,59,1,8807,108,97,110,116,59,1,10878,4,4,59,99,100,108,10318,10320,10324,10345,1,10878,99,59,1,10921,111,116,4,2,59,111,10332,10334,1,10880,4,2,59,108,10340,10342,1,10882,59,1,10884,4,2,59,101,10351,10354,3,8923,65024,115,59,1,10900,114,59,3,55349,56612,4,2,59,103,10369,10371,1,8811,59,1,8921,109,101,108,59,1,8503,99,121,59,1,1107,4,4,59,69,97,106,10395,10397,10400,10403,1,8823,59,1,10898,59,1,10917,59,1,10916,4,4,69,97,101,115,10416,10419,10434,10453,59,1,8809,112,4,2,59,112,10426,10428,1,10890,114,111,120,59,1,10890,4,2,59,113,10440,10442,1,10888,4,2,59,113,10448,10450,1,10888,59,1,8809,105,109,59,1,8935,112,102,59,3,55349,56664,97,118,101,59,1,96,4,2,99,105,10476,10480,114,59,1,8458,109,4,3,59,101,108,10489,10491,10494,1,8819,59,1,10894,59,1,10896,5,62,6,59,99,100,108,113,114,10512,10514,10527,10532,10538,10545,1,62,4,2,99,105,10520,10523,59,1,10919,114,59,1,10874,111,116,59,1,8919,80,97,114,59,1,10645,117,101,115,116,59,1,10876,4,5,97,100,101,108,115,10557,10574,10579,10599,10605,4,2,112,114,10563,10570,112,114,111,120,59,1,10886,114,59,1,10616,111,116,59,1,8919,113,4,2,108,113,10586,10592,101,115,115,59,1,8923,108,101,115,115,59,1,10892,101,115,115,59,1,8823,105,109,59,1,8819,4,2,101,110,10616,10626,114,116,110,101,113,113,59,3,8809,65024,69,59,3,8809,65024,4,10,65,97,98,99,101,102,107,111,115,121,10653,10658,10713,10718,10724,10760,10765,10786,10850,10875,114,114,59,1,8660,4,4,105,108,109,114,10668,10674,10678,10684,114,115,112,59,1,8202,102,59,1,189,105,108,116,59,1,8459,4,2,100,114,10690,10695,99,121,59,1,1098,4,3,59,99,119,10703,10705,10710,1,8596,105,114,59,1,10568,59,1,8621,97,114,59,1,8463,105,114,99,59,1,293,4,3,97,108,114,10732,10748,10754,114,116,115,4,2,59,117,10741,10743,1,9829,105,116,59,1,9829,108,105,112,59,1,8230,99,111,110,59,1,8889,114,59,3,55349,56613,115,4,2,101,119,10772,10779,97,114,111,119,59,1,10533,97,114,111,119,59,1,10534,4,5,97,109,111,112,114,10798,10803,10809,10839,10844,114,114,59,1,8703,116,104,116,59,1,8763,107,4,2,108,114,10816,10827,101,102,116,97,114,114,111,119,59,1,8617,105,103,104,116,97,114,114,111,119,59,1,8618,102,59,3,55349,56665,98,97,114,59,1,8213,4,3,99,108,116,10858,10863,10869,114,59,3,55349,56509,97,115,104,59,1,8463,114,111,107,59,1,295,4,2,98,112,10881,10887,117,108,108,59,1,8259,104,101,110,59,1,8208,4,15,97,99,101,102,103,105,106,109,110,111,112,113,115,116,117,10925,10936,10958,10977,10990,11001,11039,11045,11101,11192,11220,11226,11237,11285,11299,99,117,116,101,5,237,1,59,10934,1,237,4,3,59,105,121,10944,10946,10955,1,8291,114,99,5,238,1,59,10953,1,238,59,1,1080,4,2,99,120,10964,10968,121,59,1,1077,99,108,5,161,1,59,10975,1,161,4,2,102,114,10983,10986,59,1,8660,59,3,55349,56614,114,97,118,101,5,236,1,59,10999,1,236,4,4,59,105,110,111,11011,11013,11028,11034,1,8520,4,2,105,110,11019,11024,110,116,59,1,10764,116,59,1,8749,102,105,110,59,1,10716,116,97,59,1,8489,108,105,103,59,1,307,4,3,97,111,112,11053,11092,11096,4,3,99,103,116,11061,11065,11088,114,59,1,299,4,3,101,108,112,11073,11076,11082,59,1,8465,105,110,101,59,1,8464,97,114,116,59,1,8465,104,59,1,305,102,59,1,8887,101,100,59,1,437,4,5,59,99,102,111,116,11113,11115,11121,11136,11142,1,8712,97,114,101,59,1,8453,105,110,4,2,59,116,11129,11131,1,8734,105,101,59,1,10717,100,111,116,59,1,305,4,5,59,99,101,108,112,11154,11156,11161,11179,11186,1,8747,97,108,59,1,8890,4,2,103,114,11167,11173,101,114,115,59,1,8484,99,97,108,59,1,8890,97,114,104,107,59,1,10775,114,111,100,59,1,10812,4,4,99,103,112,116,11202,11206,11211,11216,121,59,1,1105,111,110,59,1,303,102,59,3,55349,56666,97,59,1,953,114,111,100,59,1,10812,117,101,115,116,5,191,1,59,11235,1,191,4,2,99,105,11243,11248,114,59,3,55349,56510,110,4,5,59,69,100,115,118,11261,11263,11266,11271,11282,1,8712,59,1,8953,111,116,59,1,8949,4,2,59,118,11277,11279,1,8948,59,1,8947,59,1,8712,4,2,59,105,11291,11293,1,8290,108,100,101,59,1,297,4,2,107,109,11305,11310,99,121,59,1,1110,108,5,239,1,59,11316,1,239,4,6,99,102,109,111,115,117,11332,11346,11351,11357,11363,11380,4,2,105,121,11338,11343,114,99,59,1,309,59,1,1081,114,59,3,55349,56615,97,116,104,59,1,567,112,102,59,3,55349,56667,4,2,99,101,11369,11374,114,59,3,55349,56511,114,99,121,59,1,1112,107,99,121,59,1,1108,4,8,97,99,102,103,104,106,111,115,11404,11418,11433,11438,11445,11450,11455,11461,112,112,97,4,2,59,118,11413,11415,1,954,59,1,1008,4,2,101,121,11424,11430,100,105,108,59,1,311,59,1,1082,114,59,3,55349,56616,114,101,101,110,59,1,312,99,121,59,1,1093,99,121,59,1,1116,112,102,59,3,55349,56668,99,114,59,3,55349,56512,4,23,65,66,69,72,97,98,99,100,101,102,103,104,106,108,109,110,111,112,114,115,116,117,118,11515,11538,11544,11555,11560,11721,11780,11818,11868,12136,12160,12171,12203,12208,12246,12275,12327,12509,12523,12569,12641,12732,12752,4,3,97,114,116,11523,11528,11532,114,114,59,1,8666,114,59,1,8656,97,105,108,59,1,10523,97,114,114,59,1,10510,4,2,59,103,11550,11552,1,8806,59,1,10891,97,114,59,1,10594,4,9,99,101,103,109,110,112,113,114,116,11580,11586,11594,11600,11606,11624,11627,11636,11694,117,116,101,59,1,314,109,112,116,121,118,59,1,10676,114,97,110,59,1,8466,98,100,97,59,1,955,103,4,3,59,100,108,11615,11617,11620,1,10216,59,1,10641,101,59,1,10216,59,1,10885,117,111,5,171,1,59,11634,1,171,114,4,8,59,98,102,104,108,112,115,116,11655,11657,11669,11673,11677,11681,11685,11690,1,8592,4,2,59,102,11663,11665,1,8676,115,59,1,10527,115,59,1,10525,107,59,1,8617,112,59,1,8619,108,59,1,10553,105,109,59,1,10611,108,59,1,8610,4,3,59,97,101,11702,11704,11709,1,10923,105,108,59,1,10521,4,2,59,115,11715,11717,1,10925,59,3,10925,65024,4,3,97,98,114,11729,11734,11739,114,114,59,1,10508,114,107,59,1,10098,4,2,97,107,11745,11758,99,4,2,101,107,11752,11755,59,1,123,59,1,91,4,2,101,115,11764,11767,59,1,10635,108,4,2,100,117,11774,11777,59,1,10639,59,1,10637,4,4,97,101,117,121,11790,11796,11811,11815,114,111,110,59,1,318,4,2,100,105,11802,11807,105,108,59,1,316,108,59,1,8968,98,59,1,123,59,1,1083,4,4,99,113,114,115,11828,11832,11845,11864,97,59,1,10550,117,111,4,2,59,114,11840,11842,1,8220,59,1,8222,4,2,100,117,11851,11857,104,97,114,59,1,10599,115,104,97,114,59,1,10571,104,59,1,8626,4,5,59,102,103,113,115,11880,11882,12008,12011,12031,1,8804,116,4,5,97,104,108,114,116,11895,11913,11935,11947,11996,114,114,111,119,4,2,59,116,11905,11907,1,8592,97,105,108,59,1,8610,97,114,112,111,111,110,4,2,100,117,11925,11931,111,119,110,59,1,8637,112,59,1,8636,101,102,116,97,114,114,111,119,115,59,1,8647,105,103,104,116,4,3,97,104,115,11959,11974,11984,114,114,111,119,4,2,59,115,11969,11971,1,8596,59,1,8646,97,114,112,111,111,110,115,59,1,8651,113,117,105,103,97,114,114,111,119,59,1,8621,104,114,101,101,116,105,109,101,115,59,1,8907,59,1,8922,4,3,59,113,115,12019,12021,12024,1,8804,59,1,8806,108,97,110,116,59,1,10877,4,5,59,99,100,103,115,12043,12045,12049,12070,12083,1,10877,99,59,1,10920,111,116,4,2,59,111,12057,12059,1,10879,4,2,59,114,12065,12067,1,10881,59,1,10883,4,2,59,101,12076,12079,3,8922,65024,115,59,1,10899,4,5,97,100,101,103,115,12095,12103,12108,12126,12131,112,112,114,111,120,59,1,10885,111,116,59,1,8918,113,4,2,103,113,12115,12120,116,114,59,1,8922,103,116,114,59,1,10891,116,114,59,1,8822,105,109,59,1,8818,4,3,105,108,114,12144,12150,12156,115,104,116,59,1,10620,111,111,114,59,1,8970,59,3,55349,56617,4,2,59,69,12166,12168,1,8822,59,1,10897,4,2,97,98,12177,12198,114,4,2,100,117,12184,12187,59,1,8637,4,2,59,108,12193,12195,1,8636,59,1,10602,108,107,59,1,9604,99,121,59,1,1113,4,5,59,97,99,104,116,12220,12222,12227,12235,12241,1,8810,114,114,59,1,8647,111,114,110,101,114,59,1,8990,97,114,100,59,1,10603,114,105,59,1,9722,4,2,105,111,12252,12258,100,111,116,59,1,320,117,115,116,4,2,59,97,12267,12269,1,9136,99,104,101,59,1,9136,4,4,69,97,101,115,12285,12288,12303,12322,59,1,8808,112,4,2,59,112,12295,12297,1,10889,114,111,120,59,1,10889,4,2,59,113,12309,12311,1,10887,4,2,59,113,12317,12319,1,10887,59,1,8808,105,109,59,1,8934,4,8,97,98,110,111,112,116,119,122,12345,12359,12364,12421,12446,12467,12474,12490,4,2,110,114,12351,12355,103,59,1,10220,114,59,1,8701,114,107,59,1,10214,103,4,3,108,109,114,12373,12401,12409,101,102,116,4,2,97,114,12382,12389,114,114,111,119,59,1,10229,105,103,104,116,97,114,114,111,119,59,1,10231,97,112,115,116,111,59,1,10236,105,103,104,116,97,114,114,111,119,59,1,10230,112,97,114,114,111,119,4,2,108,114,12433,12439,101,102,116,59,1,8619,105,103,104,116,59,1,8620,4,3,97,102,108,12454,12458,12462,114,59,1,10629,59,3,55349,56669,117,115,59,1,10797,105,109,101,115,59,1,10804,4,2,97,98,12480,12485,115,116,59,1,8727,97,114,59,1,95,4,3,59,101,102,12498,12500,12506,1,9674,110,103,101,59,1,9674,59,1,10731,97,114,4,2,59,108,12517,12519,1,40,116,59,1,10643,4,5,97,99,104,109,116,12535,12540,12548,12561,12564,114,114,59,1,8646,111,114,110,101,114,59,1,8991,97,114,4,2,59,100,12556,12558,1,8651,59,1,10605,59,1,8206,114,105,59,1,8895,4,6,97,99,104,105,113,116,12583,12589,12594,12597,12614,12635,113,117,111,59,1,8249,114,59,3,55349,56513,59,1,8624,109,4,3,59,101,103,12606,12608,12611,1,8818,59,1,10893,59,1,10895,4,2,98,117,12620,12623,59,1,91,111,4,2,59,114,12630,12632,1,8216,59,1,8218,114,111,107,59,1,322,5,60,8,59,99,100,104,105,108,113,114,12660,12662,12675,12680,12686,12692,12698,12705,1,60,4,2,99,105,12668,12671,59,1,10918,114,59,1,10873,111,116,59,1,8918,114,101,101,59,1,8907,109,101,115,59,1,8905,97,114,114,59,1,10614,117,101,115,116,59,1,10875,4,2,80,105,12711,12716,97,114,59,1,10646,4,3,59,101,102,12724,12726,12729,1,9667,59,1,8884,59,1,9666,114,4,2,100,117,12739,12746,115,104,97,114,59,1,10570,104,97,114,59,1,10598,4,2,101,110,12758,12768,114,116,110,101,113,113,59,3,8808,65024,69,59,3,8808,65024,4,14,68,97,99,100,101,102,104,105,108,110,111,112,115,117,12803,12809,12893,12908,12914,12928,12933,12937,13011,13025,13032,13049,13052,13069,68,111,116,59,1,8762,4,4,99,108,112,114,12819,12827,12849,12887,114,5,175,1,59,12825,1,175,4,2,101,116,12833,12836,59,1,9794,4,2,59,101,12842,12844,1,10016,115,101,59,1,10016,4,2,59,115,12855,12857,1,8614,116,111,4,4,59,100,108,117,12869,12871,12877,12883,1,8614,111,119,110,59,1,8615,101,102,116,59,1,8612,112,59,1,8613,107,101,114,59,1,9646,4,2,111,121,12899,12905,109,109,97,59,1,10793,59,1,1084,97,115,104,59,1,8212,97,115,117,114,101,100,97,110,103,108,101,59,1,8737,114,59,3,55349,56618,111,59,1,8487,4,3,99,100,110,12945,12954,12985,114,111,5,181,1,59,12952,1,181,4,4,59,97,99,100,12964,12966,12971,12976,1,8739,115,116,59,1,42,105,114,59,1,10992,111,116,5,183,1,59,12983,1,183,117,115,4,3,59,98,100,12995,12997,13e3,1,8722,59,1,8863,4,2,59,117,13006,13008,1,8760,59,1,10794,4,2,99,100,13017,13021,112,59,1,10971,114,59,1,8230,112,108,117,115,59,1,8723,4,2,100,112,13038,13044,101,108,115,59,1,8871,102,59,3,55349,56670,59,1,8723,4,2,99,116,13058,13063,114,59,3,55349,56514,112,111,115,59,1,8766,4,3,59,108,109,13077,13079,13087,1,956,116,105,109,97,112,59,1,8888,97,112,59,1,8888,4,24,71,76,82,86,97,98,99,100,101,102,103,104,105,106,108,109,111,112,114,115,116,117,118,119,13142,13165,13217,13229,13247,13330,13359,13414,13420,13508,13513,13579,13602,13626,13631,13762,13767,13855,13936,13995,14214,14285,14312,14432,4,2,103,116,13148,13152,59,3,8921,824,4,2,59,118,13158,13161,3,8811,8402,59,3,8811,824,4,3,101,108,116,13173,13200,13204,102,116,4,2,97,114,13181,13188,114,114,111,119,59,1,8653,105,103,104,116,97,114,114,111,119,59,1,8654,59,3,8920,824,4,2,59,118,13210,13213,3,8810,8402,59,3,8810,824,105,103,104,116,97,114,114,111,119,59,1,8655,4,2,68,100,13235,13241,97,115,104,59,1,8879,97,115,104,59,1,8878,4,5,98,99,110,112,116,13259,13264,13270,13275,13308,108,97,59,1,8711,117,116,101,59,1,324,103,59,3,8736,8402,4,5,59,69,105,111,112,13287,13289,13293,13298,13302,1,8777,59,3,10864,824,100,59,3,8779,824,115,59,1,329,114,111,120,59,1,8777,117,114,4,2,59,97,13316,13318,1,9838,108,4,2,59,115,13325,13327,1,9838,59,1,8469,4,2,115,117,13336,13344,112,5,160,1,59,13342,1,160,109,112,4,2,59,101,13352,13355,3,8782,824,59,3,8783,824,4,5,97,101,111,117,121,13371,13385,13391,13407,13411,4,2,112,114,13377,13380,59,1,10819,111,110,59,1,328,100,105,108,59,1,326,110,103,4,2,59,100,13399,13401,1,8775,111,116,59,3,10861,824,112,59,1,10818,59,1,1085,97,115,104,59,1,8211,4,7,59,65,97,100,113,115,120,13436,13438,13443,13466,13472,13478,13494,1,8800,114,114,59,1,8663,114,4,2,104,114,13450,13454,107,59,1,10532,4,2,59,111,13460,13462,1,8599,119,59,1,8599,111,116,59,3,8784,824,117,105,118,59,1,8802,4,2,101,105,13484,13489,97,114,59,1,10536,109,59,3,8770,824,105,115,116,4,2,59,115,13503,13505,1,8708,59,1,8708,114,59,3,55349,56619,4,4,69,101,115,116,13523,13527,13563,13568,59,3,8807,824,4,3,59,113,115,13535,13537,13559,1,8817,4,3,59,113,115,13545,13547,13551,1,8817,59,3,8807,824,108,97,110,116,59,3,10878,824,59,3,10878,824,105,109,59,1,8821,4,2,59,114,13574,13576,1,8815,59,1,8815,4,3,65,97,112,13587,13592,13597,114,114,59,1,8654,114,114,59,1,8622,97,114,59,1,10994,4,3,59,115,118,13610,13612,13623,1,8715,4,2,59,100,13618,13620,1,8956,59,1,8954,59,1,8715,99,121,59,1,1114,4,7,65,69,97,100,101,115,116,13647,13652,13656,13661,13665,13737,13742,114,114,59,1,8653,59,3,8806,824,114,114,59,1,8602,114,59,1,8229,4,4,59,102,113,115,13675,13677,13703,13725,1,8816,116,4,2,97,114,13684,13691,114,114,111,119,59,1,8602,105,103,104,116,97,114,114,111,119,59,1,8622,4,3,59,113,115,13711,13713,13717,1,8816,59,3,8806,824,108,97,110,116,59,3,10877,824,4,2,59,115,13731,13734,3,10877,824,59,1,8814,105,109,59,1,8820,4,2,59,114,13748,13750,1,8814,105,4,2,59,101,13757,13759,1,8938,59,1,8940,105,100,59,1,8740,4,2,112,116,13773,13778,102,59,3,55349,56671,5,172,3,59,105,110,13787,13789,13829,1,172,110,4,4,59,69,100,118,13800,13802,13806,13812,1,8713,59,3,8953,824,111,116,59,3,8949,824,4,3,97,98,99,13820,13823,13826,59,1,8713,59,1,8951,59,1,8950,105,4,2,59,118,13836,13838,1,8716,4,3,97,98,99,13846,13849,13852,59,1,8716,59,1,8958,59,1,8957,4,3,97,111,114,13863,13892,13899,114,4,4,59,97,115,116,13874,13876,13883,13888,1,8742,108,108,101,108,59,1,8742,108,59,3,11005,8421,59,3,8706,824,108,105,110,116,59,1,10772,4,3,59,99,101,13907,13909,13914,1,8832,117,101,59,1,8928,4,2,59,99,13920,13923,3,10927,824,4,2,59,101,13929,13931,1,8832,113,59,3,10927,824,4,4,65,97,105,116,13946,13951,13971,13982,114,114,59,1,8655,114,114,4,3,59,99,119,13961,13963,13967,1,8603,59,3,10547,824,59,3,8605,824,103,104,116,97,114,114,111,119,59,1,8603,114,105,4,2,59,101,13990,13992,1,8939,59,1,8941,4,7,99,104,105,109,112,113,117,14011,14036,14060,14080,14085,14090,14106,4,4,59,99,101,114,14021,14023,14028,14032,1,8833,117,101,59,1,8929,59,3,10928,824,59,3,55349,56515,111,114,116,4,2,109,112,14045,14050,105,100,59,1,8740,97,114,97,108,108,101,108,59,1,8742,109,4,2,59,101,14067,14069,1,8769,4,2,59,113,14075,14077,1,8772,59,1,8772,105,100,59,1,8740,97,114,59,1,8742,115,117,4,2,98,112,14098,14102,101,59,1,8930,101,59,1,8931,4,3,98,99,112,14114,14157,14171,4,4,59,69,101,115,14124,14126,14130,14133,1,8836,59,3,10949,824,59,1,8840,101,116,4,2,59,101,14141,14144,3,8834,8402,113,4,2,59,113,14151,14153,1,8840,59,3,10949,824,99,4,2,59,101,14164,14166,1,8833,113,59,3,10928,824,4,4,59,69,101,115,14181,14183,14187,14190,1,8837,59,3,10950,824,59,1,8841,101,116,4,2,59,101,14198,14201,3,8835,8402,113,4,2,59,113,14208,14210,1,8841,59,3,10950,824,4,4,103,105,108,114,14224,14228,14238,14242,108,59,1,8825,108,100,101,5,241,1,59,14236,1,241,103,59,1,8824,105,97,110,103,108,101,4,2,108,114,14254,14269,101,102,116,4,2,59,101,14263,14265,1,8938,113,59,1,8940,105,103,104,116,4,2,59,101,14279,14281,1,8939,113,59,1,8941,4,2,59,109,14291,14293,1,957,4,3,59,101,115,14301,14303,14308,1,35,114,111,59,1,8470,112,59,1,8199,4,9,68,72,97,100,103,105,108,114,115,14332,14338,14344,14349,14355,14369,14376,14408,14426,97,115,104,59,1,8877,97,114,114,59,1,10500,112,59,3,8781,8402,97,115,104,59,1,8876,4,2,101,116,14361,14365,59,3,8805,8402,59,3,62,8402,110,102,105,110,59,1,10718,4,3,65,101,116,14384,14389,14393,114,114,59,1,10498,59,3,8804,8402,4,2,59,114,14399,14402,3,60,8402,105,101,59,3,8884,8402,4,2,65,116,14414,14419,114,114,59,1,10499,114,105,101,59,3,8885,8402,105,109,59,3,8764,8402,4,3,65,97,110,14440,14445,14468,114,114,59,1,8662,114,4,2,104,114,14452,14456,107,59,1,10531,4,2,59,111,14462,14464,1,8598,119,59,1,8598,101,97,114,59,1,10535,4,18,83,97,99,100,101,102,103,104,105,108,109,111,112,114,115,116,117,118,14512,14515,14535,14560,14597,14603,14618,14643,14657,14662,14701,14741,14747,14769,14851,14877,14907,14916,59,1,9416,4,2,99,115,14521,14531,117,116,101,5,243,1,59,14529,1,243,116,59,1,8859,4,2,105,121,14541,14557,114,4,2,59,99,14548,14550,1,8858,5,244,1,59,14555,1,244,59,1,1086,4,5,97,98,105,111,115,14572,14577,14583,14587,14591,115,104,59,1,8861,108,97,99,59,1,337,118,59,1,10808,116,59,1,8857,111,108,100,59,1,10684,108,105,103,59,1,339,4,2,99,114,14609,14614,105,114,59,1,10687,59,3,55349,56620,4,3,111,114,116,14626,14630,14640,110,59,1,731,97,118,101,5,242,1,59,14638,1,242,59,1,10689,4,2,98,109,14649,14654,97,114,59,1,10677,59,1,937,110,116,59,1,8750,4,4,97,99,105,116,14672,14677,14693,14698,114,114,59,1,8634,4,2,105,114,14683,14687,114,59,1,10686,111,115,115,59,1,10683,110,101,59,1,8254,59,1,10688,4,3,97,101,105,14709,14714,14719,99,114,59,1,333,103,97,59,1,969,4,3,99,100,110,14727,14733,14736,114,111,110,59,1,959,59,1,10678,117,115,59,1,8854,112,102,59,3,55349,56672,4,3,97,101,108,14755,14759,14764,114,59,1,10679,114,112,59,1,10681,117,115,59,1,8853,4,7,59,97,100,105,111,115,118,14785,14787,14792,14831,14837,14841,14848,1,8744,114,114,59,1,8635,4,4,59,101,102,109,14802,14804,14817,14824,1,10845,114,4,2,59,111,14811,14813,1,8500,102,59,1,8500,5,170,1,59,14822,1,170,5,186,1,59,14829,1,186,103,111,102,59,1,8886,114,59,1,10838,108,111,112,101,59,1,10839,59,1,10843,4,3,99,108,111,14859,14863,14873,114,59,1,8500,97,115,104,5,248,1,59,14871,1,248,108,59,1,8856,105,4,2,108,109,14884,14893,100,101,5,245,1,59,14891,1,245,101,115,4,2,59,97,14901,14903,1,8855,115,59,1,10806,109,108,5,246,1,59,14914,1,246,98,97,114,59,1,9021,4,12,97,99,101,102,104,105,108,109,111,114,115,117,14948,14992,14996,15033,15038,15068,15090,15189,15192,15222,15427,15441,114,4,4,59,97,115,116,14959,14961,14976,14989,1,8741,5,182,2,59,108,14968,14970,1,182,108,101,108,59,1,8741,4,2,105,108,14982,14986,109,59,1,10995,59,1,11005,59,1,8706,121,59,1,1087,114,4,5,99,105,109,112,116,15009,15014,15019,15024,15027,110,116,59,1,37,111,100,59,1,46,105,108,59,1,8240,59,1,8869,101,110,107,59,1,8241,114,59,3,55349,56621,4,3,105,109,111,15046,15057,15063,4,2,59,118,15052,15054,1,966,59,1,981,109,97,116,59,1,8499,110,101,59,1,9742,4,3,59,116,118,15076,15078,15087,1,960,99,104,102,111,114,107,59,1,8916,59,1,982,4,2,97,117,15096,15119,110,4,2,99,107,15103,15115,107,4,2,59,104,15110,15112,1,8463,59,1,8462,118,59,1,8463,115,4,9,59,97,98,99,100,101,109,115,116,15140,15142,15148,15151,15156,15168,15171,15179,15184,1,43,99,105,114,59,1,10787,59,1,8862,105,114,59,1,10786,4,2,111,117,15162,15165,59,1,8724,59,1,10789,59,1,10866,110,5,177,1,59,15177,1,177,105,109,59,1,10790,119,111,59,1,10791,59,1,177,4,3,105,112,117,15200,15208,15213,110,116,105,110,116,59,1,10773,102,59,3,55349,56673,110,100,5,163,1,59,15220,1,163,4,10,59,69,97,99,101,105,110,111,115,117,15244,15246,15249,15253,15258,15334,15347,15367,15416,15421,1,8826,59,1,10931,112,59,1,10935,117,101,59,1,8828,4,2,59,99,15264,15266,1,10927,4,6,59,97,99,101,110,115,15280,15282,15290,15299,15303,15329,1,8826,112,112,114,111,120,59,1,10935,117,114,108,121,101,113,59,1,8828,113,59,1,10927,4,3,97,101,115,15311,15319,15324,112,112,114,111,120,59,1,10937,113,113,59,1,10933,105,109,59,1,8936,105,109,59,1,8830,109,101,4,2,59,115,15342,15344,1,8242,59,1,8473,4,3,69,97,115,15355,15358,15362,59,1,10933,112,59,1,10937,105,109,59,1,8936,4,3,100,102,112,15375,15378,15404,59,1,8719,4,3,97,108,115,15386,15392,15398,108,97,114,59,1,9006,105,110,101,59,1,8978,117,114,102,59,1,8979,4,2,59,116,15410,15412,1,8733,111,59,1,8733,105,109,59,1,8830,114,101,108,59,1,8880,4,2,99,105,15433,15438,114,59,3,55349,56517,59,1,968,110,99,115,112,59,1,8200,4,6,102,105,111,112,115,117,15462,15467,15472,15478,15485,15491,114,59,3,55349,56622,110,116,59,1,10764,112,102,59,3,55349,56674,114,105,109,101,59,1,8279,99,114,59,3,55349,56518,4,3,97,101,111,15499,15520,15534,116,4,2,101,105,15506,15515,114,110,105,111,110,115,59,1,8461,110,116,59,1,10774,115,116,4,2,59,101,15528,15530,1,63,113,59,1,8799,116,5,34,1,59,15540,1,34,4,21,65,66,72,97,98,99,100,101,102,104,105,108,109,110,111,112,114,115,116,117,120,15586,15609,15615,15620,15796,15855,15893,15931,15977,16001,16039,16183,16204,16222,16228,16285,16312,16318,16363,16408,16416,4,3,97,114,116,15594,15599,15603,114,114,59,1,8667,114,59,1,8658,97,105,108,59,1,10524,97,114,114,59,1,10511,97,114,59,1,10596,4,7,99,100,101,110,113,114,116,15636,15651,15656,15664,15687,15696,15770,4,2,101,117,15642,15646,59,3,8765,817,116,101,59,1,341,105,99,59,1,8730,109,112,116,121,118,59,1,10675,103,4,4,59,100,101,108,15675,15677,15680,15683,1,10217,59,1,10642,59,1,10661,101,59,1,10217,117,111,5,187,1,59,15694,1,187,114,4,11,59,97,98,99,102,104,108,112,115,116,119,15721,15723,15727,15739,15742,15746,15750,15754,15758,15763,15767,1,8594,112,59,1,10613,4,2,59,102,15733,15735,1,8677,115,59,1,10528,59,1,10547,115,59,1,10526,107,59,1,8618,112,59,1,8620,108,59,1,10565,105,109,59,1,10612,108,59,1,8611,59,1,8605,4,2,97,105,15776,15781,105,108,59,1,10522,111,4,2,59,110,15788,15790,1,8758,97,108,115,59,1,8474,4,3,97,98,114,15804,15809,15814,114,114,59,1,10509,114,107,59,1,10099,4,2,97,107,15820,15833,99,4,2,101,107,15827,15830,59,1,125,59,1,93,4,2,101,115,15839,15842,59,1,10636,108,4,2,100,117,15849,15852,59,1,10638,59,1,10640,4,4,97,101,117,121,15865,15871,15886,15890,114,111,110,59,1,345,4,2,100,105,15877,15882,105,108,59,1,343,108,59,1,8969,98,59,1,125,59,1,1088,4,4,99,108,113,115,15903,15907,15914,15927,97,59,1,10551,100,104,97,114,59,1,10601,117,111,4,2,59,114,15922,15924,1,8221,59,1,8221,104,59,1,8627,4,3,97,99,103,15939,15966,15970,108,4,4,59,105,112,115,15950,15952,15957,15963,1,8476,110,101,59,1,8475,97,114,116,59,1,8476,59,1,8477,116,59,1,9645,5,174,1,59,15975,1,174,4,3,105,108,114,15985,15991,15997,115,104,116,59,1,10621,111,111,114,59,1,8971,59,3,55349,56623,4,2,97,111,16007,16028,114,4,2,100,117,16014,16017,59,1,8641,4,2,59,108,16023,16025,1,8640,59,1,10604,4,2,59,118,16034,16036,1,961,59,1,1009,4,3,103,110,115,16047,16167,16171,104,116,4,6,97,104,108,114,115,116,16063,16081,16103,16130,16143,16155,114,114,111,119,4,2,59,116,16073,16075,1,8594,97,105,108,59,1,8611,97,114,112,111,111,110,4,2,100,117,16093,16099,111,119,110,59,1,8641,112,59,1,8640,101,102,116,4,2,97,104,16112,16120,114,114,111,119,115,59,1,8644,97,114,112,111,111,110,115,59,1,8652,105,103,104,116,97,114,114,111,119,115,59,1,8649,113,117,105,103,97,114,114,111,119,59,1,8605,104,114,101,101,116,105,109,101,115,59,1,8908,103,59,1,730,105,110,103,100,111,116,115,101,113,59,1,8787,4,3,97,104,109,16191,16196,16201,114,114,59,1,8644,97,114,59,1,8652,59,1,8207,111,117,115,116,4,2,59,97,16214,16216,1,9137,99,104,101,59,1,9137,109,105,100,59,1,10990,4,4,97,98,112,116,16238,16252,16257,16278,4,2,110,114,16244,16248,103,59,1,10221,114,59,1,8702,114,107,59,1,10215,4,3,97,102,108,16265,16269,16273,114,59,1,10630,59,3,55349,56675,117,115,59,1,10798,105,109,101,115,59,1,10805,4,2,97,112,16291,16304,114,4,2,59,103,16298,16300,1,41,116,59,1,10644,111,108,105,110,116,59,1,10770,97,114,114,59,1,8649,4,4,97,99,104,113,16328,16334,16339,16342,113,117,111,59,1,8250,114,59,3,55349,56519,59,1,8625,4,2,98,117,16348,16351,59,1,93,111,4,2,59,114,16358,16360,1,8217,59,1,8217,4,3,104,105,114,16371,16377,16383,114,101,101,59,1,8908,109,101,115,59,1,8906,105,4,4,59,101,102,108,16394,16396,16399,16402,1,9657,59,1,8885,59,1,9656,116,114,105,59,1,10702,108,117,104,97,114,59,1,10600,59,1,8478,4,19,97,98,99,100,101,102,104,105,108,109,111,112,113,114,115,116,117,119,122,16459,16466,16472,16572,16590,16672,16687,16746,16844,16850,16924,16963,16988,17115,17121,17154,17206,17614,17656,99,117,116,101,59,1,347,113,117,111,59,1,8218,4,10,59,69,97,99,101,105,110,112,115,121,16494,16496,16499,16513,16518,16531,16536,16556,16564,16569,1,8827,59,1,10932,4,2,112,114,16505,16508,59,1,10936,111,110,59,1,353,117,101,59,1,8829,4,2,59,100,16524,16526,1,10928,105,108,59,1,351,114,99,59,1,349,4,3,69,97,115,16544,16547,16551,59,1,10934,112,59,1,10938,105,109,59,1,8937,111,108,105,110,116,59,1,10771,105,109,59,1,8831,59,1,1089,111,116,4,3,59,98,101,16582,16584,16587,1,8901,59,1,8865,59,1,10854,4,7,65,97,99,109,115,116,120,16606,16611,16634,16642,16646,16652,16668,114,114,59,1,8664,114,4,2,104,114,16618,16622,107,59,1,10533,4,2,59,111,16628,16630,1,8600,119,59,1,8600,116,5,167,1,59,16640,1,167,105,59,1,59,119,97,114,59,1,10537,109,4,2,105,110,16659,16665,110,117,115,59,1,8726,59,1,8726,116,59,1,10038,114,4,2,59,111,16679,16682,3,55349,56624,119,110,59,1,8994,4,4,97,99,111,121,16697,16702,16716,16739,114,112,59,1,9839,4,2,104,121,16708,16713,99,121,59,1,1097,59,1,1096,114,116,4,2,109,112,16724,16729,105,100,59,1,8739,97,114,97,108,108,101,108,59,1,8741,5,173,1,59,16744,1,173,4,2,103,109,16752,16770,109,97,4,3,59,102,118,16762,16764,16767,1,963,59,1,962,59,1,962,4,8,59,100,101,103,108,110,112,114,16788,16790,16795,16806,16817,16828,16832,16838,1,8764,111,116,59,1,10858,4,2,59,113,16801,16803,1,8771,59,1,8771,4,2,59,69,16812,16814,1,10910,59,1,10912,4,2,59,69,16823,16825,1,10909,59,1,10911,101,59,1,8774,108,117,115,59,1,10788,97,114,114,59,1,10610,97,114,114,59,1,8592,4,4,97,101,105,116,16860,16883,16891,16904,4,2,108,115,16866,16878,108,115,101,116,109,105,110,117,115,59,1,8726,104,112,59,1,10803,112,97,114,115,108,59,1,10724,4,2,100,108,16897,16900,59,1,8739,101,59,1,8995,4,2,59,101,16910,16912,1,10922,4,2,59,115,16918,16920,1,10924,59,3,10924,65024,4,3,102,108,112,16932,16938,16958,116,99,121,59,1,1100,4,2,59,98,16944,16946,1,47,4,2,59,97,16952,16954,1,10692,114,59,1,9023,102,59,3,55349,56676,97,4,2,100,114,16970,16985,101,115,4,2,59,117,16978,16980,1,9824,105,116,59,1,9824,59,1,8741,4,3,99,115,117,16996,17028,17089,4,2,97,117,17002,17015,112,4,2,59,115,17009,17011,1,8851,59,3,8851,65024,112,4,2,59,115,17022,17024,1,8852,59,3,8852,65024,117,4,2,98,112,17035,17062,4,3,59,101,115,17043,17045,17048,1,8847,59,1,8849,101,116,4,2,59,101,17056,17058,1,8847,113,59,1,8849,4,3,59,101,115,17070,17072,17075,1,8848,59,1,8850,101,116,4,2,59,101,17083,17085,1,8848,113,59,1,8850,4,3,59,97,102,17097,17099,17112,1,9633,114,4,2,101,102,17106,17109,59,1,9633,59,1,9642,59,1,9642,97,114,114,59,1,8594,4,4,99,101,109,116,17131,17136,17142,17148,114,59,3,55349,56520,116,109,110,59,1,8726,105,108,101,59,1,8995,97,114,102,59,1,8902,4,2,97,114,17160,17172,114,4,2,59,102,17167,17169,1,9734,59,1,9733,4,2,97,110,17178,17202,105,103,104,116,4,2,101,112,17188,17197,112,115,105,108,111,110,59,1,1013,104,105,59,1,981,115,59,1,175,4,5,98,99,109,110,112,17218,17351,17420,17423,17427,4,9,59,69,100,101,109,110,112,114,115,17238,17240,17243,17248,17261,17267,17279,17285,17291,1,8834,59,1,10949,111,116,59,1,10941,4,2,59,100,17254,17256,1,8838,111,116,59,1,10947,117,108,116,59,1,10945,4,2,69,101,17273,17276,59,1,10955,59,1,8842,108,117,115,59,1,10943,97,114,114,59,1,10617,4,3,101,105,117,17299,17335,17339,116,4,3,59,101,110,17308,17310,17322,1,8834,113,4,2,59,113,17317,17319,1,8838,59,1,10949,101,113,4,2,59,113,17330,17332,1,8842,59,1,10955,109,59,1,10951,4,2,98,112,17345,17348,59,1,10965,59,1,10963,99,4,6,59,97,99,101,110,115,17366,17368,17376,17385,17389,17415,1,8827,112,112,114,111,120,59,1,10936,117,114,108,121,101,113,59,1,8829,113,59,1,10928,4,3,97,101,115,17397,17405,17410,112,112,114,111,120,59,1,10938,113,113,59,1,10934,105,109,59,1,8937,105,109,59,1,8831,59,1,8721,103,59,1,9834,4,13,49,50,51,59,69,100,101,104,108,109,110,112,115,17455,17462,17469,17476,17478,17481,17496,17509,17524,17530,17536,17548,17554,5,185,1,59,17460,1,185,5,178,1,59,17467,1,178,5,179,1,59,17474,1,179,1,8835,59,1,10950,4,2,111,115,17487,17491,116,59,1,10942,117,98,59,1,10968,4,2,59,100,17502,17504,1,8839,111,116,59,1,10948,115,4,2,111,117,17516,17520,108,59,1,10185,98,59,1,10967,97,114,114,59,1,10619,117,108,116,59,1,10946,4,2,69,101,17542,17545,59,1,10956,59,1,8843,108,117,115,59,1,10944,4,3,101,105,117,17562,17598,17602,116,4,3,59,101,110,17571,17573,17585,1,8835,113,4,2,59,113,17580,17582,1,8839,59,1,10950,101,113,4,2,59,113,17593,17595,1,8843,59,1,10956,109,59,1,10952,4,2,98,112,17608,17611,59,1,10964,59,1,10966,4,3,65,97,110,17622,17627,17650,114,114,59,1,8665,114,4,2,104,114,17634,17638,107,59,1,10534,4,2,59,111,17644,17646,1,8601,119,59,1,8601,119,97,114,59,1,10538,108,105,103,5,223,1,59,17664,1,223,4,13,97,98,99,100,101,102,104,105,111,112,114,115,119,17694,17709,17714,17737,17742,17749,17754,17860,17905,17957,17964,18090,18122,4,2,114,117,17700,17706,103,101,116,59,1,8982,59,1,964,114,107,59,1,9140,4,3,97,101,121,17722,17728,17734,114,111,110,59,1,357,100,105,108,59,1,355,59,1,1090,111,116,59,1,8411,108,114,101,99,59,1,8981,114,59,3,55349,56625,4,4,101,105,107,111,17764,17805,17836,17851,4,2,114,116,17770,17786,101,4,2,52,102,17777,17780,59,1,8756,111,114,101,59,1,8756,97,4,3,59,115,118,17795,17797,17802,1,952,121,109,59,1,977,59,1,977,4,2,99,110,17811,17831,107,4,2,97,115,17818,17826,112,112,114,111,120,59,1,8776,105,109,59,1,8764,115,112,59,1,8201,4,2,97,115,17842,17846,112,59,1,8776,105,109,59,1,8764,114,110,5,254,1,59,17858,1,254,4,3,108,109,110,17868,17873,17901,100,101,59,1,732,101,115,5,215,3,59,98,100,17884,17886,17898,1,215,4,2,59,97,17892,17894,1,8864,114,59,1,10801,59,1,10800,116,59,1,8749,4,3,101,112,115,17913,17917,17953,97,59,1,10536,4,4,59,98,99,102,17927,17929,17934,17939,1,8868,111,116,59,1,9014,105,114,59,1,10993,4,2,59,111,17945,17948,3,55349,56677,114,107,59,1,10970,97,59,1,10537,114,105,109,101,59,1,8244,4,3,97,105,112,17972,17977,18082,100,101,59,1,8482,4,7,97,100,101,109,112,115,116,17993,18051,18056,18059,18066,18072,18076,110,103,108,101,4,5,59,100,108,113,114,18009,18011,18017,18032,18035,1,9653,111,119,110,59,1,9663,101,102,116,4,2,59,101,18026,18028,1,9667,113,59,1,8884,59,1,8796,105,103,104,116,4,2,59,101,18045,18047,1,9657,113,59,1,8885,111,116,59,1,9708,59,1,8796,105,110,117,115,59,1,10810,108,117,115,59,1,10809,98,59,1,10701,105,109,101,59,1,10811,101,122,105,117,109,59,1,9186,4,3,99,104,116,18098,18111,18116,4,2,114,121,18104,18108,59,3,55349,56521,59,1,1094,99,121,59,1,1115,114,111,107,59,1,359,4,2,105,111,18128,18133,120,116,59,1,8812,104,101,97,100,4,2,108,114,18143,18154,101,102,116,97,114,114,111,119,59,1,8606,105,103,104,116,97,114,114,111,119,59,1,8608,4,18,65,72,97,98,99,100,102,103,104,108,109,111,112,114,115,116,117,119,18204,18209,18214,18234,18250,18268,18292,18308,18319,18343,18379,18397,18413,18504,18547,18553,18584,18603,114,114,59,1,8657,97,114,59,1,10595,4,2,99,114,18220,18230,117,116,101,5,250,1,59,18228,1,250,114,59,1,8593,114,4,2,99,101,18241,18245,121,59,1,1118,118,101,59,1,365,4,2,105,121,18256,18265,114,99,5,251,1,59,18263,1,251,59,1,1091,4,3,97,98,104,18276,18281,18287,114,114,59,1,8645,108,97,99,59,1,369,97,114,59,1,10606,4,2,105,114,18298,18304,115,104,116,59,1,10622,59,3,55349,56626,114,97,118,101,5,249,1,59,18317,1,249,4,2,97,98,18325,18338,114,4,2,108,114,18332,18335,59,1,8639,59,1,8638,108,107,59,1,9600,4,2,99,116,18349,18374,4,2,111,114,18355,18369,114,110,4,2,59,101,18363,18365,1,8988,114,59,1,8988,111,112,59,1,8975,114,105,59,1,9720,4,2,97,108,18385,18390,99,114,59,1,363,5,168,1,59,18395,1,168,4,2,103,112,18403,18408,111,110,59,1,371,102,59,3,55349,56678,4,6,97,100,104,108,115,117,18427,18434,18445,18470,18475,18494,114,114,111,119,59,1,8593,111,119,110,97,114,114,111,119,59,1,8597,97,114,112,111,111,110,4,2,108,114,18457,18463,101,102,116,59,1,8639,105,103,104,116,59,1,8638,117,115,59,1,8846,105,4,3,59,104,108,18484,18486,18489,1,965,59,1,978,111,110,59,1,965,112,97,114,114,111,119,115,59,1,8648,4,3,99,105,116,18512,18537,18542,4,2,111,114,18518,18532,114,110,4,2,59,101,18526,18528,1,8989,114,59,1,8989,111,112,59,1,8974,110,103,59,1,367,114,105,59,1,9721,99,114,59,3,55349,56522,4,3,100,105,114,18561,18566,18572,111,116,59,1,8944,108,100,101,59,1,361,105,4,2,59,102,18579,18581,1,9653,59,1,9652,4,2,97,109,18590,18595,114,114,59,1,8648,108,5,252,1,59,18601,1,252,97,110,103,108,101,59,1,10663,4,15,65,66,68,97,99,100,101,102,108,110,111,112,114,115,122,18643,18648,18661,18667,18847,18851,18857,18904,18909,18915,18931,18937,18943,18949,18996,114,114,59,1,8661,97,114,4,2,59,118,18656,18658,1,10984,59,1,10985,97,115,104,59,1,8872,4,2,110,114,18673,18679,103,114,116,59,1,10652,4,7,101,107,110,112,114,115,116,18695,18704,18711,18720,18742,18754,18810,112,115,105,108,111,110,59,1,1013,97,112,112,97,59,1,1008,111,116,104,105,110,103,59,1,8709,4,3,104,105,114,18728,18732,18735,105,59,1,981,59,1,982,111,112,116,111,59,1,8733,4,2,59,104,18748,18750,1,8597,111,59,1,1009,4,2,105,117,18760,18766,103,109,97,59,1,962,4,2,98,112,18772,18791,115,101,116,110,101,113,4,2,59,113,18784,18787,3,8842,65024,59,3,10955,65024,115,101,116,110,101,113,4,2,59,113,18803,18806,3,8843,65024,59,3,10956,65024,4,2,104,114,18816,18822,101,116,97,59,1,977,105,97,110,103,108,101,4,2,108,114,18834,18840,101,102,116,59,1,8882,105,103,104,116,59,1,8883,121,59,1,1074,97,115,104,59,1,8866,4,3,101,108,114,18865,18884,18890,4,3,59,98,101,18873,18875,18880,1,8744,97,114,59,1,8891,113,59,1,8794,108,105,112,59,1,8942,4,2,98,116,18896,18901,97,114,59,1,124,59,1,124,114,59,3,55349,56627,116,114,105,59,1,8882,115,117,4,2,98,112,18923,18927,59,3,8834,8402,59,3,8835,8402,112,102,59,3,55349,56679,114,111,112,59,1,8733,116,114,105,59,1,8883,4,2,99,117,18955,18960,114,59,3,55349,56523,4,2,98,112,18966,18981,110,4,2,69,101,18973,18977,59,3,10955,65024,59,3,8842,65024,110,4,2,69,101,18988,18992,59,3,10956,65024,59,3,8843,65024,105,103,122,97,103,59,1,10650,4,7,99,101,102,111,112,114,115,19020,19026,19061,19066,19072,19075,19089,105,114,99,59,1,373,4,2,100,105,19032,19055,4,2,98,103,19038,19043,97,114,59,1,10847,101,4,2,59,113,19050,19052,1,8743,59,1,8793,101,114,112,59,1,8472,114,59,3,55349,56628,112,102,59,3,55349,56680,59,1,8472,4,2,59,101,19081,19083,1,8768,97,116,104,59,1,8768,99,114,59,3,55349,56524,4,14,99,100,102,104,105,108,109,110,111,114,115,117,118,119,19125,19146,19152,19157,19173,19176,19192,19197,19202,19236,19252,19269,19286,19291,4,3,97,105,117,19133,19137,19142,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,116,114,105,59,1,9661,114,59,3,55349,56629,4,2,65,97,19163,19168,114,114,59,1,10234,114,114,59,1,10231,59,1,958,4,2,65,97,19182,19187,114,114,59,1,10232,114,114,59,1,10229,97,112,59,1,10236,105,115,59,1,8955,4,3,100,112,116,19210,19215,19230,111,116,59,1,10752,4,2,102,108,19221,19225,59,3,55349,56681,117,115,59,1,10753,105,109,101,59,1,10754,4,2,65,97,19242,19247,114,114,59,1,10233,114,114,59,1,10230,4,2,99,113,19258,19263,114,59,3,55349,56525,99,117,112,59,1,10758,4,2,112,116,19275,19281,108,117,115,59,1,10756,114,105,59,1,9651,101,101,59,1,8897,101,100,103,101,59,1,8896,4,8,97,99,101,102,105,111,115,117,19316,19335,19349,19357,19362,19367,19373,19379,99,4,2,117,121,19323,19332,116,101,5,253,1,59,19330,1,253,59,1,1103,4,2,105,121,19341,19346,114,99,59,1,375,59,1,1099,110,5,165,1,59,19355,1,165,114,59,3,55349,56630,99,121,59,1,1111,112,102,59,3,55349,56682,99,114,59,3,55349,56526,4,2,99,109,19385,19389,121,59,1,1102,108,5,255,1,59,19395,1,255,4,10,97,99,100,101,102,104,105,111,115,119,19419,19426,19441,19446,19462,19467,19472,19480,19486,19492,99,117,116,101,59,1,378,4,2,97,121,19432,19438,114,111,110,59,1,382,59,1,1079,111,116,59,1,380,4,2,101,116,19452,19458,116,114,102,59,1,8488,97,59,1,950,114,59,3,55349,56631,99,121,59,1,1078,103,114,97,114,114,59,1,8669,112,102,59,3,55349,56683,99,114,59,3,55349,56527,4,2,106,110,19498,19501,59,1,8205,106,59,1,8204]);const QQ=qQ,ZQ=$Q,JQ=KQ,eZ=UQ,tZ=ZQ.CODE_POINTS,nZ=ZQ.CODE_POINT_SEQUENCES,rZ={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},iZ="DATA_STATE";function aZ(e){return e===tZ.SPACE||e===tZ.LINE_FEED||e===tZ.TABULATION||e===tZ.FORM_FEED}function oZ(e){return e>=tZ.DIGIT_0&&e<=tZ.DIGIT_9}function sZ(e){return e>=tZ.LATIN_CAPITAL_A&&e<=tZ.LATIN_CAPITAL_Z}function lZ(e){return e>=tZ.LATIN_SMALL_A&&e<=tZ.LATIN_SMALL_Z}function cZ(e){return lZ(e)||sZ(e)}function uZ(e){return cZ(e)||oZ(e)}function hZ(e){return e>=tZ.LATIN_CAPITAL_A&&e<=tZ.LATIN_CAPITAL_F}function pZ(e){return e>=tZ.LATIN_SMALL_A&&e<=tZ.LATIN_SMALL_F}function dZ(e){return e+32}function fZ(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(e>>>10&1023|55296)+String.fromCharCode(56320|1023&e))}function mZ(e){return String.fromCharCode(dZ(e))}function gZ(e,t){const n=JQ[++e];let r=++e,i=r+n-1;for(;r<=i;){const e=r+i>>>1,a=JQ[e];if(a<t)r=e+1;else{if(!(a>t))return JQ[e+n];i=e-1}}return-1}class vZ{constructor(){this.preprocessor=new QQ,this.tokenQueue=[],this.allowCDATA=!1,this.state=iZ,this.returnState="",this.charRefCode=-1,this.tempBuff=[],this.lastStartTagName="",this.consumedAfterSnapshot=-1,this.active=!1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr=null}_err(){}_errOnNextCodePoint(e){this._consume(),this._err(e),this._unconsume()}getNextToken(){for(;!this.tokenQueue.length&&this.active;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this[this.state](e)}return this.tokenQueue.shift()}write(e,t){this.active=!0,this.preprocessor.write(e,t)}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e)}_ensureHibernation(){if(this.preprocessor.endOfChunkHit){for(;this.consumedAfterSnapshot>0;this.consumedAfterSnapshot--)this.preprocessor.retreat();return this.active=!1,this.tokenQueue.push({type:vZ.HIBERNATION_TOKEN}),!0}return!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(){this.consumedAfterSnapshot--,this.preprocessor.retreat()}_reconsumeInState(e){this.state=e,this._unconsume()}_consumeSequenceIfMatch(e,t,n){let r=0,i=!0;const a=e.length;let o,s=0,l=t;for(;s<a;s++){if(s>0&&(l=this._consume(),r++),l===tZ.EOF){i=!1;break}if(o=e[s],l!==o&&(n||l!==dZ(o))){i=!1;break}}if(!i)for(;r--;)this._unconsume();return i}_isTempBufferEqualToScriptString(){if(this.tempBuff.length!==nZ.SCRIPT_STRING.length)return!1;for(let e=0;e<this.tempBuff.length;e++)if(this.tempBuff[e]!==nZ.SCRIPT_STRING[e])return!1;return!0}_createStartTagToken(){this.currentToken={type:vZ.START_TAG_TOKEN,tagName:"",selfClosing:!1,ackSelfClosing:!1,attrs:[]}}_createEndTagToken(){this.currentToken={type:vZ.END_TAG_TOKEN,tagName:"",selfClosing:!1,attrs:[]}}_createCommentToken(){this.currentToken={type:vZ.COMMENT_TOKEN,data:""}}_createDoctypeToken(e){this.currentToken={type:vZ.DOCTYPE_TOKEN,name:e,forceQuirks:!1,publicId:null,systemId:null}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t}}_createEOFToken(){this.currentToken={type:vZ.EOF_TOKEN}}_createAttr(e){this.currentAttr={name:e,value:""}}_leaveAttrName(e){null===vZ.getTokenAttr(this.currentToken,this.currentAttr.name)?this.currentToken.attrs.push(this.currentAttr):this._err(eZ.duplicateAttribute),this.state=e}_leaveAttrValue(e){this.state=e}_emitCurrentToken(){this._emitCurrentCharacterToken();const e=this.currentToken;this.currentToken=null,e.type===vZ.START_TAG_TOKEN?this.lastStartTagName=e.tagName:e.type===vZ.END_TAG_TOKEN&&(e.attrs.length>0&&this._err(eZ.endTagWithAttributes),e.selfClosing&&this._err(eZ.endTagWithTrailingSolidus)),this.tokenQueue.push(e)}_emitCurrentCharacterToken(){this.currentCharacterToken&&(this.tokenQueue.push(this.currentCharacterToken),this.currentCharacterToken=null)}_emitEOFToken(){this._createEOFToken(),this._emitCurrentToken()}_appendCharToCurrentCharacterToken(e,t){this.currentCharacterToken&&this.currentCharacterToken.type!==e&&this._emitCurrentCharacterToken(),this.currentCharacterToken?this.currentCharacterToken.chars+=t:this._createCharacterToken(e,t)}_emitCodePoint(e){let t=vZ.CHARACTER_TOKEN;aZ(e)?t=vZ.WHITESPACE_CHARACTER_TOKEN:e===tZ.NULL&&(t=vZ.NULL_CHARACTER_TOKEN),this._appendCharToCurrentCharacterToken(t,fZ(e))}_emitSeveralCodePoints(e){for(let t=0;t<e.length;t++)this._emitCodePoint(e[t])}_emitChars(e){this._appendCharToCurrentCharacterToken(vZ.CHARACTER_TOKEN,e)}_matchNamedCharacterReference(e){let t=null,n=1,r=gZ(0,e);for(this.tempBuff.push(e);r>-1;){const e=JQ[r],i=e<7;i&&1&e&&(t=2&e?[JQ[++r],JQ[++r]]:[JQ[++r]],n=0);const a=this._consume();if(this.tempBuff.push(a),n++,a===tZ.EOF)break;r=i?4&e?gZ(r,a):-1:a===e?++r:-1}for(;n--;)this.tempBuff.pop(),this._unconsume();return t}_isCharacterReferenceInAttribute(){return"ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE"===this.returnState||"ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE"===this.returnState||"ATTRIBUTE_VALUE_UNQUOTED_STATE"===this.returnState}_isCharacterReferenceAttributeQuirk(e){if(!e&&this._isCharacterReferenceInAttribute()){const e=this._consume();return this._unconsume(),e===tZ.EQUALS_SIGN||uZ(e)}return!1}_flushCodePointsConsumedAsCharacterReference(){if(this._isCharacterReferenceInAttribute())for(let e=0;e<this.tempBuff.length;e++)this.currentAttr.value+=fZ(this.tempBuff[e]);else this._emitSeveralCodePoints(this.tempBuff);this.tempBuff=[]}[iZ](e){this.preprocessor.dropParsedChunk(),e===tZ.LESS_THAN_SIGN?this.state="TAG_OPEN_STATE":e===tZ.AMPERSAND?(this.returnState=iZ,this.state="CHARACTER_REFERENCE_STATE"):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this._emitCodePoint(e)):e===tZ.EOF?this._emitEOFToken():this._emitCodePoint(e)}RCDATA_STATE(e){this.preprocessor.dropParsedChunk(),e===tZ.AMPERSAND?(this.returnState="RCDATA_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===tZ.LESS_THAN_SIGN?this.state="RCDATA_LESS_THAN_SIGN_STATE":e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this._emitChars(ZQ.REPLACEMENT_CHARACTER)):e===tZ.EOF?this._emitEOFToken():this._emitCodePoint(e)}RAWTEXT_STATE(e){this.preprocessor.dropParsedChunk(),e===tZ.LESS_THAN_SIGN?this.state="RAWTEXT_LESS_THAN_SIGN_STATE":e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this._emitChars(ZQ.REPLACEMENT_CHARACTER)):e===tZ.EOF?this._emitEOFToken():this._emitCodePoint(e)}SCRIPT_DATA_STATE(e){this.preprocessor.dropParsedChunk(),e===tZ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_LESS_THAN_SIGN_STATE":e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this._emitChars(ZQ.REPLACEMENT_CHARACTER)):e===tZ.EOF?this._emitEOFToken():this._emitCodePoint(e)}PLAINTEXT_STATE(e){this.preprocessor.dropParsedChunk(),e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this._emitChars(ZQ.REPLACEMENT_CHARACTER)):e===tZ.EOF?this._emitEOFToken():this._emitCodePoint(e)}TAG_OPEN_STATE(e){e===tZ.EXCLAMATION_MARK?this.state="MARKUP_DECLARATION_OPEN_STATE":e===tZ.SOLIDUS?this.state="END_TAG_OPEN_STATE":cZ(e)?(this._createStartTagToken(),this._reconsumeInState("TAG_NAME_STATE")):e===tZ.QUESTION_MARK?(this._err(eZ.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE")):e===tZ.EOF?(this._err(eZ.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken()):(this._err(eZ.invalidFirstCharacterOfTagName),this._emitChars("<"),this._reconsumeInState(iZ))}END_TAG_OPEN_STATE(e){cZ(e)?(this._createEndTagToken(),this._reconsumeInState("TAG_NAME_STATE")):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.missingEndTagName),this.state=iZ):e===tZ.EOF?(this._err(eZ.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken()):(this._err(eZ.invalidFirstCharacterOfTagName),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE"))}TAG_NAME_STATE(e){aZ(e)?this.state="BEFORE_ATTRIBUTE_NAME_STATE":e===tZ.SOLIDUS?this.state="SELF_CLOSING_START_TAG_STATE":e===tZ.GREATER_THAN_SIGN?(this.state=iZ,this._emitCurrentToken()):sZ(e)?this.currentToken.tagName+=mZ(e):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentToken.tagName+=ZQ.REPLACEMENT_CHARACTER):e===tZ.EOF?(this._err(eZ.eofInTag),this._emitEOFToken()):this.currentToken.tagName+=fZ(e)}RCDATA_LESS_THAN_SIGN_STATE(e){e===tZ.SOLIDUS?(this.tempBuff=[],this.state="RCDATA_END_TAG_OPEN_STATE"):(this._emitChars("<"),this._reconsumeInState("RCDATA_STATE"))}RCDATA_END_TAG_OPEN_STATE(e){cZ(e)?(this._createEndTagToken(),this._reconsumeInState("RCDATA_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("RCDATA_STATE"))}RCDATA_END_TAG_NAME_STATE(e){if(sZ(e))this.currentToken.tagName+=mZ(e),this.tempBuff.push(e);else if(lZ(e))this.currentToken.tagName+=fZ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(aZ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===tZ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===tZ.GREATER_THAN_SIGN)return this.state=iZ,void this._emitCurrentToken()}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("RCDATA_STATE")}}RAWTEXT_LESS_THAN_SIGN_STATE(e){e===tZ.SOLIDUS?(this.tempBuff=[],this.state="RAWTEXT_END_TAG_OPEN_STATE"):(this._emitChars("<"),this._reconsumeInState("RAWTEXT_STATE"))}RAWTEXT_END_TAG_OPEN_STATE(e){cZ(e)?(this._createEndTagToken(),this._reconsumeInState("RAWTEXT_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("RAWTEXT_STATE"))}RAWTEXT_END_TAG_NAME_STATE(e){if(sZ(e))this.currentToken.tagName+=mZ(e),this.tempBuff.push(e);else if(lZ(e))this.currentToken.tagName+=fZ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(aZ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===tZ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===tZ.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=iZ)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("RAWTEXT_STATE")}}SCRIPT_DATA_LESS_THAN_SIGN_STATE(e){e===tZ.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_END_TAG_OPEN_STATE"):e===tZ.EXCLAMATION_MARK?(this.state="SCRIPT_DATA_ESCAPE_START_STATE",this._emitChars("<!")):(this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_STATE"))}SCRIPT_DATA_END_TAG_OPEN_STATE(e){cZ(e)?(this._createEndTagToken(),this._reconsumeInState("SCRIPT_DATA_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("SCRIPT_DATA_STATE"))}SCRIPT_DATA_END_TAG_NAME_STATE(e){if(sZ(e))this.currentToken.tagName+=mZ(e),this.tempBuff.push(e);else if(lZ(e))this.currentToken.tagName+=fZ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(aZ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===tZ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===tZ.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=iZ)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("SCRIPT_DATA_STATE")}}SCRIPT_DATA_ESCAPE_START_STATE(e){e===tZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPE_START_DASH_STATE",this._emitChars("-")):this._reconsumeInState("SCRIPT_DATA_STATE")}SCRIPT_DATA_ESCAPE_START_DASH_STATE(e){e===tZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):this._reconsumeInState("SCRIPT_DATA_STATE")}SCRIPT_DATA_ESCAPED_STATE(e){e===tZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_STATE",this._emitChars("-")):e===tZ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this._emitChars(ZQ.REPLACEMENT_CHARACTER)):e===tZ.EOF?(this._err(eZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}SCRIPT_DATA_ESCAPED_DASH_STATE(e){e===tZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):e===tZ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitChars(ZQ.REPLACEMENT_CHARACTER)):e===tZ.EOF?(this._err(eZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_ESCAPED_DASH_DASH_STATE(e){e===tZ.HYPHEN_MINUS?this._emitChars("-"):e===tZ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===tZ.GREATER_THAN_SIGN?(this.state="SCRIPT_DATA_STATE",this._emitChars(">")):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitChars(ZQ.REPLACEMENT_CHARACTER)):e===tZ.EOF?(this._err(eZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE(e){e===tZ.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE"):cZ(e)?(this.tempBuff=[],this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE")):(this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE"))}SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE(e){cZ(e)?(this._createEndTagToken(),this._reconsumeInState("SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE"))}SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE(e){if(sZ(e))this.currentToken.tagName+=mZ(e),this.tempBuff.push(e);else if(lZ(e))this.currentToken.tagName+=fZ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(aZ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===tZ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===tZ.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=iZ)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE")}}SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE(e){aZ(e)||e===tZ.SOLIDUS||e===tZ.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?"SCRIPT_DATA_DOUBLE_ESCAPED_STATE":"SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e)):sZ(e)?(this.tempBuff.push(dZ(e)),this._emitCodePoint(e)):lZ(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE")}SCRIPT_DATA_DOUBLE_ESCAPED_STATE(e){e===tZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE",this._emitChars("-")):e===tZ.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this._emitChars(ZQ.REPLACEMENT_CHARACTER)):e===tZ.EOF?(this._err(eZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE(e){e===tZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):e===tZ.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitChars(ZQ.REPLACEMENT_CHARACTER)):e===tZ.EOF?(this._err(eZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE(e){e===tZ.HYPHEN_MINUS?this._emitChars("-"):e===tZ.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===tZ.GREATER_THAN_SIGN?(this.state="SCRIPT_DATA_STATE",this._emitChars(">")):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitChars(ZQ.REPLACEMENT_CHARACTER)):e===tZ.EOF?(this._err(eZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE(e){e===tZ.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE",this._emitChars("/")):this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPED_STATE")}SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE(e){aZ(e)||e===tZ.SOLIDUS||e===tZ.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?"SCRIPT_DATA_ESCAPED_STATE":"SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e)):sZ(e)?(this.tempBuff.push(dZ(e)),this._emitCodePoint(e)):lZ(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPED_STATE")}BEFORE_ATTRIBUTE_NAME_STATE(e){aZ(e)||(e===tZ.SOLIDUS||e===tZ.GREATER_THAN_SIGN||e===tZ.EOF?this._reconsumeInState("AFTER_ATTRIBUTE_NAME_STATE"):e===tZ.EQUALS_SIGN?(this._err(eZ.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state="ATTRIBUTE_NAME_STATE"):(this._createAttr(""),this._reconsumeInState("ATTRIBUTE_NAME_STATE")))}ATTRIBUTE_NAME_STATE(e){aZ(e)||e===tZ.SOLIDUS||e===tZ.GREATER_THAN_SIGN||e===tZ.EOF?(this._leaveAttrName("AFTER_ATTRIBUTE_NAME_STATE"),this._unconsume()):e===tZ.EQUALS_SIGN?this._leaveAttrName("BEFORE_ATTRIBUTE_VALUE_STATE"):sZ(e)?this.currentAttr.name+=mZ(e):e===tZ.QUOTATION_MARK||e===tZ.APOSTROPHE||e===tZ.LESS_THAN_SIGN?(this._err(eZ.unexpectedCharacterInAttributeName),this.currentAttr.name+=fZ(e)):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentAttr.name+=ZQ.REPLACEMENT_CHARACTER):this.currentAttr.name+=fZ(e)}AFTER_ATTRIBUTE_NAME_STATE(e){aZ(e)||(e===tZ.SOLIDUS?this.state="SELF_CLOSING_START_TAG_STATE":e===tZ.EQUALS_SIGN?this.state="BEFORE_ATTRIBUTE_VALUE_STATE":e===tZ.GREATER_THAN_SIGN?(this.state=iZ,this._emitCurrentToken()):e===tZ.EOF?(this._err(eZ.eofInTag),this._emitEOFToken()):(this._createAttr(""),this._reconsumeInState("ATTRIBUTE_NAME_STATE")))}BEFORE_ATTRIBUTE_VALUE_STATE(e){aZ(e)||(e===tZ.QUOTATION_MARK?this.state="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE":e===tZ.APOSTROPHE?this.state="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE":e===tZ.GREATER_THAN_SIGN?(this._err(eZ.missingAttributeValue),this.state=iZ,this._emitCurrentToken()):this._reconsumeInState("ATTRIBUTE_VALUE_UNQUOTED_STATE"))}ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE(e){e===tZ.QUOTATION_MARK?this.state="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE":e===tZ.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentAttr.value+=ZQ.REPLACEMENT_CHARACTER):e===tZ.EOF?(this._err(eZ.eofInTag),this._emitEOFToken()):this.currentAttr.value+=fZ(e)}ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE(e){e===tZ.APOSTROPHE?this.state="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE":e===tZ.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentAttr.value+=ZQ.REPLACEMENT_CHARACTER):e===tZ.EOF?(this._err(eZ.eofInTag),this._emitEOFToken()):this.currentAttr.value+=fZ(e)}ATTRIBUTE_VALUE_UNQUOTED_STATE(e){aZ(e)?this._leaveAttrValue("BEFORE_ATTRIBUTE_NAME_STATE"):e===tZ.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_UNQUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===tZ.GREATER_THAN_SIGN?(this._leaveAttrValue(iZ),this._emitCurrentToken()):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentAttr.value+=ZQ.REPLACEMENT_CHARACTER):e===tZ.QUOTATION_MARK||e===tZ.APOSTROPHE||e===tZ.LESS_THAN_SIGN||e===tZ.EQUALS_SIGN||e===tZ.GRAVE_ACCENT?(this._err(eZ.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=fZ(e)):e===tZ.EOF?(this._err(eZ.eofInTag),this._emitEOFToken()):this.currentAttr.value+=fZ(e)}AFTER_ATTRIBUTE_VALUE_QUOTED_STATE(e){aZ(e)?this._leaveAttrValue("BEFORE_ATTRIBUTE_NAME_STATE"):e===tZ.SOLIDUS?this._leaveAttrValue("SELF_CLOSING_START_TAG_STATE"):e===tZ.GREATER_THAN_SIGN?(this._leaveAttrValue(iZ),this._emitCurrentToken()):e===tZ.EOF?(this._err(eZ.eofInTag),this._emitEOFToken()):(this._err(eZ.missingWhitespaceBetweenAttributes),this._reconsumeInState("BEFORE_ATTRIBUTE_NAME_STATE"))}SELF_CLOSING_START_TAG_STATE(e){e===tZ.GREATER_THAN_SIGN?(this.currentToken.selfClosing=!0,this.state=iZ,this._emitCurrentToken()):e===tZ.EOF?(this._err(eZ.eofInTag),this._emitEOFToken()):(this._err(eZ.unexpectedSolidusInTag),this._reconsumeInState("BEFORE_ATTRIBUTE_NAME_STATE"))}BOGUS_COMMENT_STATE(e){e===tZ.GREATER_THAN_SIGN?(this.state=iZ,this._emitCurrentToken()):e===tZ.EOF?(this._emitCurrentToken(),this._emitEOFToken()):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentToken.data+=ZQ.REPLACEMENT_CHARACTER):this.currentToken.data+=fZ(e)}MARKUP_DECLARATION_OPEN_STATE(e){this._consumeSequenceIfMatch(nZ.DASH_DASH_STRING,e,!0)?(this._createCommentToken(),this.state="COMMENT_START_STATE"):this._consumeSequenceIfMatch(nZ.DOCTYPE_STRING,e,!1)?this.state="DOCTYPE_STATE":this._consumeSequenceIfMatch(nZ.CDATA_START_STRING,e,!0)?this.allowCDATA?this.state="CDATA_SECTION_STATE":(this._err(eZ.cdataInHtmlContent),this._createCommentToken(),this.currentToken.data="[CDATA[",this.state="BOGUS_COMMENT_STATE"):this._ensureHibernation()||(this._err(eZ.incorrectlyOpenedComment),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE"))}COMMENT_START_STATE(e){e===tZ.HYPHEN_MINUS?this.state="COMMENT_START_DASH_STATE":e===tZ.GREATER_THAN_SIGN?(this._err(eZ.abruptClosingOfEmptyComment),this.state=iZ,this._emitCurrentToken()):this._reconsumeInState("COMMENT_STATE")}COMMENT_START_DASH_STATE(e){e===tZ.HYPHEN_MINUS?this.state="COMMENT_END_STATE":e===tZ.GREATER_THAN_SIGN?(this._err(eZ.abruptClosingOfEmptyComment),this.state=iZ,this._emitCurrentToken()):e===tZ.EOF?(this._err(eZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState("COMMENT_STATE"))}COMMENT_STATE(e){e===tZ.HYPHEN_MINUS?this.state="COMMENT_END_DASH_STATE":e===tZ.LESS_THAN_SIGN?(this.currentToken.data+="<",this.state="COMMENT_LESS_THAN_SIGN_STATE"):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentToken.data+=ZQ.REPLACEMENT_CHARACTER):e===tZ.EOF?(this._err(eZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.data+=fZ(e)}COMMENT_LESS_THAN_SIGN_STATE(e){e===tZ.EXCLAMATION_MARK?(this.currentToken.data+="!",this.state="COMMENT_LESS_THAN_SIGN_BANG_STATE"):e===tZ.LESS_THAN_SIGN?this.currentToken.data+="!":this._reconsumeInState("COMMENT_STATE")}COMMENT_LESS_THAN_SIGN_BANG_STATE(e){e===tZ.HYPHEN_MINUS?this.state="COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE":this._reconsumeInState("COMMENT_STATE")}COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE(e){e===tZ.HYPHEN_MINUS?this.state="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE":this._reconsumeInState("COMMENT_END_DASH_STATE")}COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE(e){e!==tZ.GREATER_THAN_SIGN&&e!==tZ.EOF&&this._err(eZ.nestedComment),this._reconsumeInState("COMMENT_END_STATE")}COMMENT_END_DASH_STATE(e){e===tZ.HYPHEN_MINUS?this.state="COMMENT_END_STATE":e===tZ.EOF?(this._err(eZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState("COMMENT_STATE"))}COMMENT_END_STATE(e){e===tZ.GREATER_THAN_SIGN?(this.state=iZ,this._emitCurrentToken()):e===tZ.EXCLAMATION_MARK?this.state="COMMENT_END_BANG_STATE":e===tZ.HYPHEN_MINUS?this.currentToken.data+="-":e===tZ.EOF?(this._err(eZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--",this._reconsumeInState("COMMENT_STATE"))}COMMENT_END_BANG_STATE(e){e===tZ.HYPHEN_MINUS?(this.currentToken.data+="--!",this.state="COMMENT_END_DASH_STATE"):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.incorrectlyClosedComment),this.state=iZ,this._emitCurrentToken()):e===tZ.EOF?(this._err(eZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--!",this._reconsumeInState("COMMENT_STATE"))}DOCTYPE_STATE(e){aZ(e)?this.state="BEFORE_DOCTYPE_NAME_STATE":e===tZ.GREATER_THAN_SIGN?this._reconsumeInState("BEFORE_DOCTYPE_NAME_STATE"):e===tZ.EOF?(this._err(eZ.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(eZ.missingWhitespaceBeforeDoctypeName),this._reconsumeInState("BEFORE_DOCTYPE_NAME_STATE"))}BEFORE_DOCTYPE_NAME_STATE(e){aZ(e)||(sZ(e)?(this._createDoctypeToken(mZ(e)),this.state="DOCTYPE_NAME_STATE"):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this._createDoctypeToken(ZQ.REPLACEMENT_CHARACTER),this.state="DOCTYPE_NAME_STATE"):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.missingDoctypeName),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=iZ):e===tZ.EOF?(this._err(eZ.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._createDoctypeToken(fZ(e)),this.state="DOCTYPE_NAME_STATE"))}DOCTYPE_NAME_STATE(e){aZ(e)?this.state="AFTER_DOCTYPE_NAME_STATE":e===tZ.GREATER_THAN_SIGN?(this.state=iZ,this._emitCurrentToken()):sZ(e)?this.currentToken.name+=mZ(e):e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentToken.name+=ZQ.REPLACEMENT_CHARACTER):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.name+=fZ(e)}AFTER_DOCTYPE_NAME_STATE(e){aZ(e)||(e===tZ.GREATER_THAN_SIGN?(this.state=iZ,this._emitCurrentToken()):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this._consumeSequenceIfMatch(nZ.PUBLIC_STRING,e,!1)?this.state="AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE":this._consumeSequenceIfMatch(nZ.SYSTEM_STRING,e,!1)?this.state="AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE":this._ensureHibernation()||(this._err(eZ.invalidCharacterSequenceAfterDoctypeName),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE(e){aZ(e)?this.state="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===tZ.QUOTATION_MARK?(this._err(eZ.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===tZ.APOSTROPHE?(this._err(eZ.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE"):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=iZ,this._emitCurrentToken()):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(eZ.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE(e){aZ(e)||(e===tZ.QUOTATION_MARK?(this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===tZ.APOSTROPHE?(this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE"):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=iZ,this._emitCurrentToken()):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(eZ.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE(e){e===tZ.QUOTATION_MARK?this.state="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentToken.publicId+=ZQ.REPLACEMENT_CHARACTER):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=iZ):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=fZ(e)}DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE(e){e===tZ.APOSTROPHE?this.state="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentToken.publicId+=ZQ.REPLACEMENT_CHARACTER):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=iZ):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=fZ(e)}AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE(e){aZ(e)?this.state="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE":e===tZ.GREATER_THAN_SIGN?(this.state=iZ,this._emitCurrentToken()):e===tZ.QUOTATION_MARK?(this._err(eZ.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===tZ.APOSTROPHE?(this._err(eZ.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(eZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE(e){aZ(e)||(e===tZ.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=iZ):e===tZ.QUOTATION_MARK?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===tZ.APOSTROPHE?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(eZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE(e){aZ(e)?this.state="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===tZ.QUOTATION_MARK?(this._err(eZ.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===tZ.APOSTROPHE?(this._err(eZ.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=iZ,this._emitCurrentToken()):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(eZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE(e){aZ(e)||(e===tZ.QUOTATION_MARK?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===tZ.APOSTROPHE?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=iZ,this._emitCurrentToken()):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(eZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE(e){e===tZ.QUOTATION_MARK?this.state="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentToken.systemId+=ZQ.REPLACEMENT_CHARACTER):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=iZ):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=fZ(e)}DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE(e){e===tZ.APOSTROPHE?this.state="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===tZ.NULL?(this._err(eZ.unexpectedNullCharacter),this.currentToken.systemId+=ZQ.REPLACEMENT_CHARACTER):e===tZ.GREATER_THAN_SIGN?(this._err(eZ.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=iZ):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=fZ(e)}AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE(e){aZ(e)||(e===tZ.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=iZ):e===tZ.EOF?(this._err(eZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(eZ.unexpectedCharacterAfterDoctypeSystemIdentifier),this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}BOGUS_DOCTYPE_STATE(e){e===tZ.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=iZ):e===tZ.NULL?this._err(eZ.unexpectedNullCharacter):e===tZ.EOF&&(this._emitCurrentToken(),this._emitEOFToken())}CDATA_SECTION_STATE(e){e===tZ.RIGHT_SQUARE_BRACKET?this.state="CDATA_SECTION_BRACKET_STATE":e===tZ.EOF?(this._err(eZ.eofInCdata),this._emitEOFToken()):this._emitCodePoint(e)}CDATA_SECTION_BRACKET_STATE(e){e===tZ.RIGHT_SQUARE_BRACKET?this.state="CDATA_SECTION_END_STATE":(this._emitChars("]"),this._reconsumeInState("CDATA_SECTION_STATE"))}CDATA_SECTION_END_STATE(e){e===tZ.GREATER_THAN_SIGN?this.state=iZ:e===tZ.RIGHT_SQUARE_BRACKET?this._emitChars("]"):(this._emitChars("]]"),this._reconsumeInState("CDATA_SECTION_STATE"))}CHARACTER_REFERENCE_STATE(e){this.tempBuff=[tZ.AMPERSAND],e===tZ.NUMBER_SIGN?(this.tempBuff.push(e),this.state="NUMERIC_CHARACTER_REFERENCE_STATE"):uZ(e)?this._reconsumeInState("NAMED_CHARACTER_REFERENCE_STATE"):(this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}NAMED_CHARACTER_REFERENCE_STATE(e){const t=this._matchNamedCharacterReference(e);if(this._ensureHibernation())this.tempBuff=[tZ.AMPERSAND];else if(t){const e=this.tempBuff[this.tempBuff.length-1]===tZ.SEMICOLON;this._isCharacterReferenceAttributeQuirk(e)||(e||this._errOnNextCodePoint(eZ.missingSemicolonAfterCharacterReference),this.tempBuff=t),this._flushCodePointsConsumedAsCharacterReference(),this.state=this.returnState}else this._flushCodePointsConsumedAsCharacterReference(),this.state="AMBIGUOS_AMPERSAND_STATE"}AMBIGUOS_AMPERSAND_STATE(e){uZ(e)?this._isCharacterReferenceInAttribute()?this.currentAttr.value+=fZ(e):this._emitCodePoint(e):(e===tZ.SEMICOLON&&this._err(eZ.unknownNamedCharacterReference),this._reconsumeInState(this.returnState))}NUMERIC_CHARACTER_REFERENCE_STATE(e){this.charRefCode=0,e===tZ.LATIN_SMALL_X||e===tZ.LATIN_CAPITAL_X?(this.tempBuff.push(e),this.state="HEXADEMICAL_CHARACTER_REFERENCE_START_STATE"):this._reconsumeInState("DECIMAL_CHARACTER_REFERENCE_START_STATE")}HEXADEMICAL_CHARACTER_REFERENCE_START_STATE(e){!function(e){return oZ(e)||hZ(e)||pZ(e)}(e)?(this._err(eZ.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)):this._reconsumeInState("HEXADEMICAL_CHARACTER_REFERENCE_STATE")}DECIMAL_CHARACTER_REFERENCE_START_STATE(e){oZ(e)?this._reconsumeInState("DECIMAL_CHARACTER_REFERENCE_STATE"):(this._err(eZ.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}HEXADEMICAL_CHARACTER_REFERENCE_STATE(e){hZ(e)?this.charRefCode=16*this.charRefCode+e-55:pZ(e)?this.charRefCode=16*this.charRefCode+e-87:oZ(e)?this.charRefCode=16*this.charRefCode+e-48:e===tZ.SEMICOLON?this.state="NUMERIC_CHARACTER_REFERENCE_END_STATE":(this._err(eZ.missingSemicolonAfterCharacterReference),this._reconsumeInState("NUMERIC_CHARACTER_REFERENCE_END_STATE"))}DECIMAL_CHARACTER_REFERENCE_STATE(e){oZ(e)?this.charRefCode=10*this.charRefCode+e-48:e===tZ.SEMICOLON?this.state="NUMERIC_CHARACTER_REFERENCE_END_STATE":(this._err(eZ.missingSemicolonAfterCharacterReference),this._reconsumeInState("NUMERIC_CHARACTER_REFERENCE_END_STATE"))}NUMERIC_CHARACTER_REFERENCE_END_STATE(){if(this.charRefCode===tZ.NULL)this._err(eZ.nullCharacterReference),this.charRefCode=tZ.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(eZ.characterReferenceOutsideUnicodeRange),this.charRefCode=tZ.REPLACEMENT_CHARACTER;else if(ZQ.isSurrogate(this.charRefCode))this._err(eZ.surrogateCharacterReference),this.charRefCode=tZ.REPLACEMENT_CHARACTER;else if(ZQ.isUndefinedCodePoint(this.charRefCode))this._err(eZ.noncharacterCharacterReference);else if(ZQ.isControlCodePoint(this.charRefCode)||this.charRefCode===tZ.CARRIAGE_RETURN){this._err(eZ.controlCharacterReference);const e=rZ[this.charRefCode];e&&(this.charRefCode=e)}this.tempBuff=[this.charRefCode],this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)}}vZ.CHARACTER_TOKEN="CHARACTER_TOKEN",vZ.NULL_CHARACTER_TOKEN="NULL_CHARACTER_TOKEN",vZ.WHITESPACE_CHARACTER_TOKEN="WHITESPACE_CHARACTER_TOKEN",vZ.START_TAG_TOKEN="START_TAG_TOKEN",vZ.END_TAG_TOKEN="END_TAG_TOKEN",vZ.COMMENT_TOKEN="COMMENT_TOKEN",vZ.DOCTYPE_TOKEN="DOCTYPE_TOKEN",vZ.EOF_TOKEN="EOF_TOKEN",vZ.HIBERNATION_TOKEN="HIBERNATION_TOKEN",vZ.MODE={DATA:iZ,RCDATA:"RCDATA_STATE",RAWTEXT:"RAWTEXT_STATE",SCRIPT_DATA:"SCRIPT_DATA_STATE",PLAINTEXT:"PLAINTEXT_STATE"},vZ.getTokenAttr=function(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null};var yZ=vZ,xZ={};const EZ=xZ.NAMESPACES={HTML:"http://www.w3.org/1999/xhtml",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"};xZ.ATTRS={TYPE:"type",ACTION:"action",ENCODING:"encoding",PROMPT:"prompt",NAME:"name",COLOR:"color",FACE:"face",SIZE:"size"},xZ.DOCUMENT_MODE={NO_QUIRKS:"no-quirks",QUIRKS:"quirks",LIMITED_QUIRKS:"limited-quirks"};const bZ=xZ.TAG_NAMES={A:"a",ADDRESS:"address",ANNOTATION_XML:"annotation-xml",APPLET:"applet",AREA:"area",ARTICLE:"article",ASIDE:"aside",B:"b",BASE:"base",BASEFONT:"basefont",BGSOUND:"bgsound",BIG:"big",BLOCKQUOTE:"blockquote",BODY:"body",BR:"br",BUTTON:"button",CAPTION:"caption",CENTER:"center",CODE:"code",COL:"col",COLGROUP:"colgroup",DD:"dd",DESC:"desc",DETAILS:"details",DIALOG:"dialog",DIR:"dir",DIV:"div",DL:"dl",DT:"dt",EM:"em",EMBED:"embed",FIELDSET:"fieldset",FIGCAPTION:"figcaption",FIGURE:"figure",FONT:"font",FOOTER:"footer",FOREIGN_OBJECT:"foreignObject",FORM:"form",FRAME:"frame",FRAMESET:"frameset",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HEAD:"head",HEADER:"header",HGROUP:"hgroup",HR:"hr",HTML:"html",I:"i",IMG:"img",IMAGE:"image",INPUT:"input",IFRAME:"iframe",KEYGEN:"keygen",LABEL:"label",LI:"li",LINK:"link",LISTING:"listing",MAIN:"main",MALIGNMARK:"malignmark",MARQUEE:"marquee",MATH:"math",MENU:"menu",META:"meta",MGLYPH:"mglyph",MI:"mi",MO:"mo",MN:"mn",MS:"ms",MTEXT:"mtext",NAV:"nav",NOBR:"nobr",NOFRAMES:"noframes",NOEMBED:"noembed",NOSCRIPT:"noscript",OBJECT:"object",OL:"ol",OPTGROUP:"optgroup",OPTION:"option",P:"p",PARAM:"param",PLAINTEXT:"plaintext",PRE:"pre",RB:"rb",RP:"rp",RT:"rt",RTC:"rtc",RUBY:"ruby",S:"s",SCRIPT:"script",SECTION:"section",SELECT:"select",SOURCE:"source",SMALL:"small",SPAN:"span",STRIKE:"strike",STRONG:"strong",STYLE:"style",SUB:"sub",SUMMARY:"summary",SUP:"sup",TABLE:"table",TBODY:"tbody",TEMPLATE:"template",TEXTAREA:"textarea",TFOOT:"tfoot",TD:"td",TH:"th",THEAD:"thead",TITLE:"title",TR:"tr",TRACK:"track",TT:"tt",U:"u",UL:"ul",SVG:"svg",VAR:"var",WBR:"wbr",XMP:"xmp"};xZ.SPECIAL_ELEMENTS={[EZ.HTML]:{[bZ.ADDRESS]:!0,[bZ.APPLET]:!0,[bZ.AREA]:!0,[bZ.ARTICLE]:!0,[bZ.ASIDE]:!0,[bZ.BASE]:!0,[bZ.BASEFONT]:!0,[bZ.BGSOUND]:!0,[bZ.BLOCKQUOTE]:!0,[bZ.BODY]:!0,[bZ.BR]:!0,[bZ.BUTTON]:!0,[bZ.CAPTION]:!0,[bZ.CENTER]:!0,[bZ.COL]:!0,[bZ.COLGROUP]:!0,[bZ.DD]:!0,[bZ.DETAILS]:!0,[bZ.DIR]:!0,[bZ.DIV]:!0,[bZ.DL]:!0,[bZ.DT]:!0,[bZ.EMBED]:!0,[bZ.FIELDSET]:!0,[bZ.FIGCAPTION]:!0,[bZ.FIGURE]:!0,[bZ.FOOTER]:!0,[bZ.FORM]:!0,[bZ.FRAME]:!0,[bZ.FRAMESET]:!0,[bZ.H1]:!0,[bZ.H2]:!0,[bZ.H3]:!0,[bZ.H4]:!0,[bZ.H5]:!0,[bZ.H6]:!0,[bZ.HEAD]:!0,[bZ.HEADER]:!0,[bZ.HGROUP]:!0,[bZ.HR]:!0,[bZ.HTML]:!0,[bZ.IFRAME]:!0,[bZ.IMG]:!0,[bZ.INPUT]:!0,[bZ.LI]:!0,[bZ.LINK]:!0,[bZ.LISTING]:!0,[bZ.MAIN]:!0,[bZ.MARQUEE]:!0,[bZ.MENU]:!0,[bZ.META]:!0,[bZ.NAV]:!0,[bZ.NOEMBED]:!0,[bZ.NOFRAMES]:!0,[bZ.NOSCRIPT]:!0,[bZ.OBJECT]:!0,[bZ.OL]:!0,[bZ.P]:!0,[bZ.PARAM]:!0,[bZ.PLAINTEXT]:!0,[bZ.PRE]:!0,[bZ.SCRIPT]:!0,[bZ.SECTION]:!0,[bZ.SELECT]:!0,[bZ.SOURCE]:!0,[bZ.STYLE]:!0,[bZ.SUMMARY]:!0,[bZ.TABLE]:!0,[bZ.TBODY]:!0,[bZ.TD]:!0,[bZ.TEMPLATE]:!0,[bZ.TEXTAREA]:!0,[bZ.TFOOT]:!0,[bZ.TH]:!0,[bZ.THEAD]:!0,[bZ.TITLE]:!0,[bZ.TR]:!0,[bZ.TRACK]:!0,[bZ.UL]:!0,[bZ.WBR]:!0,[bZ.XMP]:!0},[EZ.MATHML]:{[bZ.MI]:!0,[bZ.MO]:!0,[bZ.MN]:!0,[bZ.MS]:!0,[bZ.MTEXT]:!0,[bZ.ANNOTATION_XML]:!0},[EZ.SVG]:{[bZ.TITLE]:!0,[bZ.FOREIGN_OBJECT]:!0,[bZ.DESC]:!0}};const CZ=xZ,TZ=CZ.TAG_NAMES,wZ=CZ.NAMESPACES;function SZ(e){switch(e.length){case 1:return e===TZ.P;case 2:return e===TZ.RB||e===TZ.RP||e===TZ.RT||e===TZ.DD||e===TZ.DT||e===TZ.LI;case 3:return e===TZ.RTC;case 6:return e===TZ.OPTION;case 8:return e===TZ.OPTGROUP}return!1}function kZ(e){switch(e.length){case 1:return e===TZ.P;case 2:return e===TZ.RB||e===TZ.RP||e===TZ.RT||e===TZ.DD||e===TZ.DT||e===TZ.LI||e===TZ.TD||e===TZ.TH||e===TZ.TR;case 3:return e===TZ.RTC;case 5:return e===TZ.TBODY||e===TZ.TFOOT||e===TZ.THEAD;case 6:return e===TZ.OPTION;case 7:return e===TZ.CAPTION;case 8:return e===TZ.OPTGROUP||e===TZ.COLGROUP}return!1}function _Z(e,t){switch(e.length){case 2:if(e===TZ.TD||e===TZ.TH)return t===wZ.HTML;if(e===TZ.MI||e===TZ.MO||e===TZ.MN||e===TZ.MS)return t===wZ.MATHML;break;case 4:if(e===TZ.HTML)return t===wZ.HTML;if(e===TZ.DESC)return t===wZ.SVG;break;case 5:if(e===TZ.TABLE)return t===wZ.HTML;if(e===TZ.MTEXT)return t===wZ.MATHML;if(e===TZ.TITLE)return t===wZ.SVG;break;case 6:return(e===TZ.APPLET||e===TZ.OBJECT)&&t===wZ.HTML;case 7:return(e===TZ.CAPTION||e===TZ.MARQUEE)&&t===wZ.HTML;case 8:return e===TZ.TEMPLATE&&t===wZ.HTML;case 13:return e===TZ.FOREIGN_OBJECT&&t===wZ.SVG;case 14:return e===TZ.ANNOTATION_XML&&t===wZ.MATHML}return!1}var AZ=class{constructor(e,t){this.stackTop=-1,this.items=[],this.current=e,this.currentTagName=null,this.currentTmplContent=null,this.tmplCount=0,this.treeAdapter=t}_indexOf(e){let t=-1;for(let n=this.stackTop;n>=0;n--)if(this.items[n]===e){t=n;break}return t}_isInTemplate(){return this.currentTagName===TZ.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===wZ.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagName=this.current&&this.treeAdapter.getTagName(this.current),this.currentTmplContent=this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):null}push(e){this.items[++this.stackTop]=e,this._updateCurrentElement(),this._isInTemplate()&&this.tmplCount++}pop(){this.stackTop--,this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this._updateCurrentElement()}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&this._updateCurrentElement()}insertAfter(e,t){const n=this._indexOf(e)+1;this.items.splice(n,0,t),n===++this.stackTop&&this._updateCurrentElement()}popUntilTagNamePopped(e){for(;this.stackTop>-1;){const t=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),t===e&&n===wZ.HTML)break}}popUntilElementPopped(e){for(;this.stackTop>-1;){const t=this.current;if(this.pop(),t===e)break}}popUntilNumberedHeaderPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===TZ.H1||e===TZ.H2||e===TZ.H3||e===TZ.H4||e===TZ.H5||e===TZ.H6&&t===wZ.HTML)break}}popUntilTableCellPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===TZ.TD||e===TZ.TH&&t===wZ.HTML)break}}popAllUpToHtmlElement(){this.stackTop=0,this._updateCurrentElement()}clearBackToTableContext(){for(;this.currentTagName!==TZ.TABLE&&this.currentTagName!==TZ.TEMPLATE&&this.currentTagName!==TZ.HTML||this.treeAdapter.getNamespaceURI(this.current)!==wZ.HTML;)this.pop()}clearBackToTableBodyContext(){for(;this.currentTagName!==TZ.TBODY&&this.currentTagName!==TZ.TFOOT&&this.currentTagName!==TZ.THEAD&&this.currentTagName!==TZ.TEMPLATE&&this.currentTagName!==TZ.HTML||this.treeAdapter.getNamespaceURI(this.current)!==wZ.HTML;)this.pop()}clearBackToTableRowContext(){for(;this.currentTagName!==TZ.TR&&this.currentTagName!==TZ.TEMPLATE&&this.currentTagName!==TZ.HTML||this.treeAdapter.getNamespaceURI(this.current)!==wZ.HTML;)this.pop()}remove(e){for(let t=this.stackTop;t>=0;t--)if(this.items[t]===e){this.items.splice(t,1),this.stackTop--,this._updateCurrentElement();break}}tryPeekProperlyNestedBodyElement(){const e=this.items[1];return e&&this.treeAdapter.getTagName(e)===TZ.BODY?e:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){let t=this._indexOf(e);return--t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.currentTagName===TZ.HTML}hasInScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===wZ.HTML)return!0;if(_Z(n,r))return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]),n=this.treeAdapter.getNamespaceURI(this.items[e]);if((t===TZ.H1||t===TZ.H2||t===TZ.H3||t===TZ.H4||t===TZ.H5||t===TZ.H6)&&n===wZ.HTML)return!0;if(_Z(t,n))return!1}return!0}hasInListItemScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===wZ.HTML)return!0;if((n===TZ.UL||n===TZ.OL)&&r===wZ.HTML||_Z(n,r))return!1}return!0}hasInButtonScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===wZ.HTML)return!0;if(n===TZ.BUTTON&&r===wZ.HTML||_Z(n,r))return!1}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===wZ.HTML){if(n===e)return!0;if(n===TZ.TABLE||n===TZ.TEMPLATE||n===TZ.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]);if(this.treeAdapter.getNamespaceURI(this.items[e])===wZ.HTML){if(t===TZ.TBODY||t===TZ.THEAD||t===TZ.TFOOT)return!0;if(t===TZ.TABLE||t===TZ.HTML)return!1}}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===wZ.HTML){if(n===e)return!0;if(n!==TZ.OPTION&&n!==TZ.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;SZ(this.currentTagName);)this.pop()}generateImpliedEndTagsThoroughly(){for(;kZ(this.currentTagName);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;SZ(this.currentTagName)&&this.currentTagName!==e;)this.pop()}};class OZ{constructor(e){this.length=0,this.entries=[],this.treeAdapter=e,this.bookmark=null}_getNoahArkConditionCandidates(e){const t=[];if(this.length>=3){const n=this.treeAdapter.getAttrList(e).length,r=this.treeAdapter.getTagName(e),i=this.treeAdapter.getNamespaceURI(e);for(let e=this.length-1;e>=0;e--){const a=this.entries[e];if(a.type===OZ.MARKER_ENTRY)break;const o=a.element,s=this.treeAdapter.getAttrList(o);this.treeAdapter.getTagName(o)===r&&this.treeAdapter.getNamespaceURI(o)===i&&s.length===n&&t.push({idx:e,attrs:s})}}return t.length<3?[]:t}_ensureNoahArkCondition(e){const t=this._getNoahArkConditionCandidates(e);let n=t.length;if(n){const r=this.treeAdapter.getAttrList(e),i=r.length,a=Object.create(null);for(let e=0;e<i;e++){const t=r[e];a[t.name]=t.value}for(let e=0;e<i;e++)for(let r=0;r<n;r++){const i=t[r].attrs[e];if(a[i.name]!==i.value&&(t.splice(r,1),n--),t.length<3)return}for(let e=n-1;e>=2;e--)this.entries.splice(t[e].idx,1),this.length--}}insertMarker(){this.entries.push({type:OZ.MARKER_ENTRY}),this.length++}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.push({type:OZ.ELEMENT_ENTRY,element:e,token:t}),this.length++}insertElementAfterBookmark(e,t){let n=this.length-1;for(;n>=0&&this.entries[n]!==this.bookmark;n--);this.entries.splice(n+1,0,{type:OZ.ELEMENT_ENTRY,element:e,token:t}),this.length++}removeEntry(e){for(let t=this.length-1;t>=0;t--)if(this.entries[t]===e){this.entries.splice(t,1),this.length--;break}}clearToLastMarker(){for(;this.length;){const e=this.entries.pop();if(this.length--,e.type===OZ.MARKER_ENTRY)break}}getElementEntryInScopeWithTagName(e){for(let t=this.length-1;t>=0;t--){const n=this.entries[t];if(n.type===OZ.MARKER_ENTRY)return null;if(this.treeAdapter.getTagName(n.element)===e)return n}return null}getElementEntry(e){for(let t=this.length-1;t>=0;t--){const n=this.entries[t];if(n.type===OZ.ELEMENT_ENTRY&&n.element===e)return n}return null}}OZ.MARKER_ENTRY="MARKER_ENTRY",OZ.ELEMENT_ENTRY="ELEMENT_ENTRY";var IZ=OZ;class MZ{constructor(e){const t={},n=this._getOverriddenMethods(this,t);for(const r of Object.keys(n))"function"==typeof n[r]&&(t[r]=e[r],e[r]=n[r])}_getOverriddenMethods(){throw new Error("Not implemented")}}MZ.install=function(e,t,n){e.__mixins||(e.__mixins=[]);for(let i=0;i<e.__mixins.length;i++)if(e.__mixins[i].constructor===t)return e.__mixins[i];const r=new t(e,n);return e.__mixins.push(r),r};var NZ=MZ;const FZ=NZ;var LZ=class extends FZ{constructor(e){super(e),this.preprocessor=e,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.offset=0,this.col=0,this.line=1}_getOverriddenMethods(e,t){return{advance(){const n=this.pos+1,r=this.html[n];return e.isEol&&(e.isEol=!1,e.line++,e.lineStartPos=n),("\n"===r||"\r"===r&&"\n"!==this.html[n+1])&&(e.isEol=!0),e.col=n-e.lineStartPos+1,e.offset=e.droppedBufferSize+n,t.advance.call(this)},retreat(){t.retreat.call(this),e.isEol=!1,e.col=this.pos-e.lineStartPos+1},dropParsedChunk(){const n=this.pos;t.dropParsedChunk.call(this);const r=n-this.pos;e.lineStartPos-=r,e.droppedBufferSize+=r,e.offset=e.droppedBufferSize+this.pos}}}};const PZ=NZ,RZ=yZ,DZ=LZ;var BZ=class extends PZ{constructor(e){super(e),this.tokenizer=e,this.posTracker=PZ.install(e.preprocessor,DZ),this.currentAttrLocation=null,this.ctLoc=null}_getCurrentLocation(){return{startLine:this.posTracker.line,startCol:this.posTracker.col,startOffset:this.posTracker.offset,endLine:-1,endCol:-1,endOffset:-1}}_attachCurrentAttrLocationInfo(){this.currentAttrLocation.endLine=this.posTracker.line,this.currentAttrLocation.endCol=this.posTracker.col,this.currentAttrLocation.endOffset=this.posTracker.offset;const e=this.tokenizer.currentToken,t=this.tokenizer.currentAttr;e.location.attrs||(e.location.attrs=Object.create(null)),e.location.attrs[t.name]=this.currentAttrLocation}_getOverriddenMethods(e,t){const n={_createStartTagToken(){t._createStartTagToken.call(this),this.currentToken.location=e.ctLoc},_createEndTagToken(){t._createEndTagToken.call(this),this.currentToken.location=e.ctLoc},_createCommentToken(){t._createCommentToken.call(this),this.currentToken.location=e.ctLoc},_createDoctypeToken(n){t._createDoctypeToken.call(this,n),this.currentToken.location=e.ctLoc},_createCharacterToken(n,r){t._createCharacterToken.call(this,n,r),this.currentCharacterToken.location=e.ctLoc},_createEOFToken(){t._createEOFToken.call(this),this.currentToken.location=e._getCurrentLocation()},_createAttr(n){t._createAttr.call(this,n),e.currentAttrLocation=e._getCurrentLocation()},_leaveAttrName(n){t._leaveAttrName.call(this,n),e._attachCurrentAttrLocationInfo()},_leaveAttrValue(n){t._leaveAttrValue.call(this,n),e._attachCurrentAttrLocationInfo()},_emitCurrentToken(){const n=this.currentToken.location;this.currentCharacterToken&&(this.currentCharacterToken.location.endLine=n.startLine,this.currentCharacterToken.location.endCol=n.startCol,this.currentCharacterToken.location.endOffset=n.startOffset),this.currentToken.type===RZ.EOF_TOKEN?(n.endLine=n.startLine,n.endCol=n.startCol,n.endOffset=n.startOffset):(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col+1,n.endOffset=e.posTracker.offset+1),t._emitCurrentToken.call(this)},_emitCurrentCharacterToken(){const n=this.currentCharacterToken&&this.currentCharacterToken.location;n&&-1===n.endOffset&&(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col,n.endOffset=e.posTracker.offset),t._emitCurrentCharacterToken.call(this)}};return Object.keys(RZ.MODE).forEach((r=>{const i=RZ.MODE[r];n[i]=function(n){e.ctLoc=e._getCurrentLocation(),t[i].call(this,n)}})),n}};const zZ=NZ;const HZ=NZ,jZ=yZ,GZ=BZ,$Z=class extends zZ{constructor(e,t){super(e),this.onItemPop=t.onItemPop}_getOverriddenMethods(e,t){return{pop(){e.onItemPop(this.current),t.pop.call(this)},popAllUpToHtmlElement(){for(let t=this.stackTop;t>0;t--)e.onItemPop(this.items[t]);t.popAllUpToHtmlElement.call(this)},remove(n){e.onItemPop(this.current),t.remove.call(this,n)}}}},YZ=xZ.TAG_NAMES;var UZ=class extends HZ{constructor(e){super(e),this.parser=e,this.treeAdapter=this.parser.treeAdapter,this.posTracker=null,this.lastStartTagToken=null,this.lastFosterParentingLocation=null,this.currentToken=null}_setStartLocation(e){let t=null;this.lastStartTagToken&&(t=Object.assign({},this.lastStartTagToken.location),t.startTag=this.lastStartTagToken.location),this.treeAdapter.setNodeSourceCodeLocation(e,t)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),i={};t.type===jZ.END_TAG_TOKEN&&r===t.tagName?(i.endTag=Object.assign({},n),i.endLine=n.endLine,i.endCol=n.endCol,i.endOffset=n.endOffset):(i.endLine=n.startLine,i.endCol=n.startCol,i.endOffset=n.startOffset),this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}_getOverriddenMethods(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),e.lastStartTagToken=null,e.lastFosterParentingLocation=null,e.currentToken=null;const i=HZ.install(this.tokenizer,GZ);e.posTracker=i.posTracker,HZ.install(this.openElements,$Z,{onItemPop:function(t){e._setEndLocation(t,e.currentToken)}})},_runParsingLoop(n){t._runParsingLoop.call(this,n);for(let t=this.openElements.stackTop;t>=0;t--)e._setEndLocation(this.openElements.items[t],e.currentToken)},_processTokenInForeignContent(n){e.currentToken=n,t._processTokenInForeignContent.call(this,n)},_processToken(n){e.currentToken=n,t._processToken.call(this,n);if(n.type===jZ.END_TAG_TOKEN&&(n.tagName===YZ.HTML||n.tagName===YZ.BODY&&this.openElements.hasInScope(YZ.BODY)))for(let t=this.openElements.stackTop;t>=0;t--){const r=this.openElements.items[t];if(this.treeAdapter.getTagName(r)===n.tagName){e._setEndLocation(r,n);break}}},_setDocumentType(e){t._setDocumentType.call(this,e);const n=this.treeAdapter.getChildNodes(this.document),r=n.length;for(let t=0;t<r;t++){const r=n[t];if(this.treeAdapter.isDocumentTypeNode(r)){this.treeAdapter.setNodeSourceCodeLocation(r,e.location);break}}},_attachElementToTree(n){e._setStartLocation(n),e.lastStartTagToken=null,t._attachElementToTree.call(this,n)},_appendElement(n,r){e.lastStartTagToken=n,t._appendElement.call(this,n,r)},_insertElement(n,r){e.lastStartTagToken=n,t._insertElement.call(this,n,r)},_insertTemplate(n){e.lastStartTagToken=n,t._insertTemplate.call(this,n);const r=this.treeAdapter.getTemplateContent(this.openElements.current);this.treeAdapter.setNodeSourceCodeLocation(r,null)},_insertFakeRootElement(){t._insertFakeRootElement.call(this),this.treeAdapter.setNodeSourceCodeLocation(this.openElements.current,null)},_appendCommentNode(e,n){t._appendCommentNode.call(this,e,n);const r=this.treeAdapter.getChildNodes(n),i=r[r.length-1];this.treeAdapter.setNodeSourceCodeLocation(i,e.location)},_findFosterParentingLocation(){return e.lastFosterParentingLocation=t._findFosterParentingLocation.call(this),e.lastFosterParentingLocation},_insertCharacters(n){t._insertCharacters.call(this,n);const r=this._shouldFosterParentOnInsertion(),i=r&&e.lastFosterParentingLocation.parent||this.openElements.currentTmplContent||this.openElements.current,a=this.treeAdapter.getChildNodes(i),o=r&&e.lastFosterParentingLocation.beforeElement?a.indexOf(e.lastFosterParentingLocation.beforeElement)-1:a.length-1,s=a[o];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:e,endCol:t,endOffset:r}=n.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:e,endCol:t,endOffset:r})}else this.treeAdapter.setNodeSourceCodeLocation(s,n.location)}}}};const VZ=NZ;var WZ=class extends VZ{constructor(e,t){super(e),this.posTracker=null,this.onParseError=t.onParseError}_setErrorLocation(e){e.startLine=e.endLine=this.posTracker.line,e.startCol=e.endCol=this.posTracker.col,e.startOffset=e.endOffset=this.posTracker.offset}_reportError(e){const t={code:e,startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1};this._setErrorLocation(t),this.onParseError(t)}_getOverriddenMethods(e){return{_err(t){e._reportError(t)}}}};const XZ=WZ,qZ=LZ,KZ=NZ;const QZ=WZ,ZZ=class extends XZ{constructor(e,t){super(e,t),this.posTracker=KZ.install(e,qZ),this.lastErrOffset=-1}_reportError(e){this.lastErrOffset!==this.posTracker.offset&&(this.lastErrOffset=this.posTracker.offset,super._reportError(e))}},JZ=NZ;const eJ=WZ,tJ=class extends QZ{constructor(e,t){super(e,t);const n=JZ.install(e.preprocessor,ZZ,t);this.posTracker=n.posTracker}},nJ=BZ,rJ=NZ;var iJ=class extends eJ{constructor(e,t){super(e,t),this.opts=t,this.ctLoc=null,this.locBeforeToken=!1}_setErrorLocation(e){this.ctLoc&&(e.startLine=this.ctLoc.startLine,e.startCol=this.ctLoc.startCol,e.startOffset=this.ctLoc.startOffset,e.endLine=this.locBeforeToken?this.ctLoc.startLine:this.ctLoc.endLine,e.endCol=this.locBeforeToken?this.ctLoc.startCol:this.ctLoc.endCol,e.endOffset=this.locBeforeToken?this.ctLoc.startOffset:this.ctLoc.endOffset)}_getOverriddenMethods(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),rJ.install(this.tokenizer,tJ,e.opts),rJ.install(this.tokenizer,nJ)},_processInputToken(n){e.ctLoc=n.location,t._processInputToken.call(this,n)},_err(t,n){e.locBeforeToken=n&&n.beforeToken,e._reportError(t)}}}},aJ={};const{DOCUMENT_MODE:oJ}=xZ;aJ.createDocument=function(){return{nodeName:"#document",mode:oJ.NO_QUIRKS,childNodes:[]}},aJ.createDocumentFragment=function(){return{nodeName:"#document-fragment",childNodes:[]}},aJ.createElement=function(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},aJ.createCommentNode=function(e){return{nodeName:"#comment",data:e,parentNode:null}};const sJ=function(e){return{nodeName:"#text",value:e,parentNode:null}},lJ=aJ.appendChild=function(e,t){e.childNodes.push(t),t.parentNode=e},cJ=aJ.insertBefore=function(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e};aJ.setTemplateContent=function(e,t){e.content=t},aJ.getTemplateContent=function(e){return e.content},aJ.setDocumentType=function(e,t,n,r){let i=null;for(let a=0;a<e.childNodes.length;a++)if("#documentType"===e.childNodes[a].nodeName){i=e.childNodes[a];break}i?(i.name=t,i.publicId=n,i.systemId=r):lJ(e,{nodeName:"#documentType",name:t,publicId:n,systemId:r})},aJ.setDocumentMode=function(e,t){e.mode=t},aJ.getDocumentMode=function(e){return e.mode},aJ.detachNode=function(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},aJ.insertText=function(e,t){if(e.childNodes.length){const n=e.childNodes[e.childNodes.length-1];if("#text"===n.nodeName)return void(n.value+=t)}lJ(e,sJ(t))},aJ.insertTextBefore=function(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&"#text"===r.nodeName?r.value+=t:cJ(e,sJ(t),n)},aJ.adoptAttributes=function(e,t){const n=[];for(let r=0;r<e.attrs.length;r++)n.push(e.attrs[r].name);for(let r=0;r<t.length;r++)-1===n.indexOf(t[r].name)&&e.attrs.push(t[r])},aJ.getFirstChild=function(e){return e.childNodes[0]},aJ.getChildNodes=function(e){return e.childNodes},aJ.getParentNode=function(e){return e.parentNode},aJ.getAttrList=function(e){return e.attrs},aJ.getTagName=function(e){return e.tagName},aJ.getNamespaceURI=function(e){return e.namespaceURI},aJ.getTextNodeContent=function(e){return e.value},aJ.getCommentNodeContent=function(e){return e.data},aJ.getDocumentTypeNodeName=function(e){return e.name},aJ.getDocumentTypeNodePublicId=function(e){return e.publicId},aJ.getDocumentTypeNodeSystemId=function(e){return e.systemId},aJ.isTextNode=function(e){return"#text"===e.nodeName},aJ.isCommentNode=function(e){return"#comment"===e.nodeName},aJ.isDocumentTypeNode=function(e){return"#documentType"===e.nodeName},aJ.isElementNode=function(e){return!!e.tagName},aJ.setNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=t},aJ.getNodeSourceCodeLocation=function(e){return e.sourceCodeLocation},aJ.updateNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=Object.assign(e.sourceCodeLocation,t)};var uJ={};const{DOCUMENT_MODE:hJ}=xZ,pJ=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],dJ=pJ.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]),fJ=["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"],mJ=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],gJ=mJ.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]);function vJ(e){const t=-1!==e.indexOf('"')?"'":'"';return t+e+t}function yJ(e,t){for(let n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return!0;return!1}uJ.isConforming=function(e){return"html"===e.name&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)},uJ.getDocumentMode=function(e){if("html"!==e.name)return hJ.QUIRKS;const t=e.systemId;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return hJ.QUIRKS;let n=e.publicId;if(null!==n){if(n=n.toLowerCase(),fJ.indexOf(n)>-1)return hJ.QUIRKS;let e=null===t?dJ:pJ;if(yJ(n,e))return hJ.QUIRKS;if(e=null===t?mJ:gJ,yJ(n,e))return hJ.LIMITED_QUIRKS}return hJ.NO_QUIRKS},uJ.serializeContent=function(e,t,n){let r="!DOCTYPE ";return e&&(r+=e),t?r+=" PUBLIC "+vJ(t):n&&(r+=" SYSTEM"),null!==n&&(r+=" "+vJ(n)),r};var xJ={};const EJ=yZ,bJ=xZ,CJ=bJ.TAG_NAMES,TJ=bJ.NAMESPACES,wJ=bJ.ATTRS,SJ="text/html",kJ="application/xhtml+xml",_J={attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},AJ={"xlink:actuate":{prefix:"xlink",name:"actuate",namespace:TJ.XLINK},"xlink:arcrole":{prefix:"xlink",name:"arcrole",namespace:TJ.XLINK},"xlink:href":{prefix:"xlink",name:"href",namespace:TJ.XLINK},"xlink:role":{prefix:"xlink",name:"role",namespace:TJ.XLINK},"xlink:show":{prefix:"xlink",name:"show",namespace:TJ.XLINK},"xlink:title":{prefix:"xlink",name:"title",namespace:TJ.XLINK},"xlink:type":{prefix:"xlink",name:"type",namespace:TJ.XLINK},"xml:base":{prefix:"xml",name:"base",namespace:TJ.XML},"xml:lang":{prefix:"xml",name:"lang",namespace:TJ.XML},"xml:space":{prefix:"xml",name:"space",namespace:TJ.XML},xmlns:{prefix:"",name:"xmlns",namespace:TJ.XMLNS},"xmlns:xlink":{prefix:"xmlns",name:"xlink",namespace:TJ.XMLNS}},OJ=xJ.SVG_TAG_NAMES_ADJUSTMENT_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},IJ={[CJ.B]:!0,[CJ.BIG]:!0,[CJ.BLOCKQUOTE]:!0,[CJ.BODY]:!0,[CJ.BR]:!0,[CJ.CENTER]:!0,[CJ.CODE]:!0,[CJ.DD]:!0,[CJ.DIV]:!0,[CJ.DL]:!0,[CJ.DT]:!0,[CJ.EM]:!0,[CJ.EMBED]:!0,[CJ.H1]:!0,[CJ.H2]:!0,[CJ.H3]:!0,[CJ.H4]:!0,[CJ.H5]:!0,[CJ.H6]:!0,[CJ.HEAD]:!0,[CJ.HR]:!0,[CJ.I]:!0,[CJ.IMG]:!0,[CJ.LI]:!0,[CJ.LISTING]:!0,[CJ.MENU]:!0,[CJ.META]:!0,[CJ.NOBR]:!0,[CJ.OL]:!0,[CJ.P]:!0,[CJ.PRE]:!0,[CJ.RUBY]:!0,[CJ.S]:!0,[CJ.SMALL]:!0,[CJ.SPAN]:!0,[CJ.STRONG]:!0,[CJ.STRIKE]:!0,[CJ.SUB]:!0,[CJ.SUP]:!0,[CJ.TABLE]:!0,[CJ.TT]:!0,[CJ.U]:!0,[CJ.UL]:!0,[CJ.VAR]:!0};xJ.causesExit=function(e){const t=e.tagName;return!!(t===CJ.FONT&&(null!==EJ.getTokenAttr(e,wJ.COLOR)||null!==EJ.getTokenAttr(e,wJ.SIZE)||null!==EJ.getTokenAttr(e,wJ.FACE)))||IJ[t]},xJ.adjustTokenMathMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}},xJ.adjustTokenSVGAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=_J[e.attrs[t].name];n&&(e.attrs[t].name=n)}},xJ.adjustTokenXMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=AJ[e.attrs[t].name];n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}},xJ.adjustTokenSVGTagName=function(e){const t=OJ[e.tagName];t&&(e.tagName=t)},xJ.isIntegrationPoint=function(e,t,n,r){return!(r&&r!==TJ.HTML||!function(e,t,n){if(t===TJ.MATHML&&e===CJ.ANNOTATION_XML)for(let r=0;r<n.length;r++)if(n[r].name===wJ.ENCODING){const e=n[r].value.toLowerCase();return e===SJ||e===kJ}return t===TJ.SVG&&(e===CJ.FOREIGN_OBJECT||e===CJ.DESC||e===CJ.TITLE)}(e,t,n))||!(r&&r!==TJ.MATHML||!function(e,t){return t===TJ.MATHML&&(e===CJ.MI||e===CJ.MO||e===CJ.MN||e===CJ.MS||e===CJ.MTEXT)}(e,t))};const MJ=yZ,NJ=AZ,FJ=IZ,LJ=UZ,PJ=iJ,RJ=NZ,DJ=aJ,BJ=function(e,t){return[e,t=t||Object.create(null)].reduce(((e,t)=>(Object.keys(t).forEach((n=>{e[n]=t[n]})),e)),Object.create(null))},zJ=uJ,HJ=xJ,jJ=UQ,GJ=$Q,$J=xZ,YJ=$J.TAG_NAMES,UJ=$J.NAMESPACES,VJ=$J.ATTRS,WJ={scriptingEnabled:!0,sourceCodeLocationInfo:!1,onParseError:null,treeAdapter:DJ},XJ="IN_TABLE_MODE",qJ={[YJ.TR]:"IN_ROW_MODE",[YJ.TBODY]:"IN_TABLE_BODY_MODE",[YJ.THEAD]:"IN_TABLE_BODY_MODE",[YJ.TFOOT]:"IN_TABLE_BODY_MODE",[YJ.CAPTION]:"IN_CAPTION_MODE",[YJ.COLGROUP]:"IN_COLUMN_GROUP_MODE",[YJ.TABLE]:XJ,[YJ.BODY]:"IN_BODY_MODE",[YJ.FRAMESET]:"IN_FRAMESET_MODE"},KJ={[YJ.CAPTION]:XJ,[YJ.COLGROUP]:XJ,[YJ.TBODY]:XJ,[YJ.TFOOT]:XJ,[YJ.THEAD]:XJ,[YJ.COL]:"IN_COLUMN_GROUP_MODE",[YJ.TR]:"IN_TABLE_BODY_MODE",[YJ.TD]:"IN_ROW_MODE",[YJ.TH]:"IN_ROW_MODE"},QJ={INITIAL_MODE:{[MJ.CHARACTER_TOKEN]:p1,[MJ.NULL_CHARACTER_TOKEN]:p1,[MJ.WHITESPACE_CHARACTER_TOKEN]:o1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:function(e,t){e._setDocumentType(t);const n=t.forceQuirks?$J.DOCUMENT_MODE.QUIRKS:zJ.getDocumentMode(t);zJ.isConforming(t)||e._err(jJ.nonConformingDoctype);e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode="BEFORE_HTML_MODE"},[MJ.START_TAG_TOKEN]:p1,[MJ.END_TAG_TOKEN]:p1,[MJ.EOF_TOKEN]:p1},BEFORE_HTML_MODE:{[MJ.CHARACTER_TOKEN]:d1,[MJ.NULL_CHARACTER_TOKEN]:d1,[MJ.WHITESPACE_CHARACTER_TOKEN]:o1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){t.tagName===YJ.HTML?(e._insertElement(t,UJ.HTML),e.insertionMode="BEFORE_HEAD_MODE"):d1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n!==YJ.HTML&&n!==YJ.HEAD&&n!==YJ.BODY&&n!==YJ.BR||d1(e,t)},[MJ.EOF_TOKEN]:d1},BEFORE_HEAD_MODE:{[MJ.CHARACTER_TOKEN]:f1,[MJ.NULL_CHARACTER_TOKEN]:f1,[MJ.WHITESPACE_CHARACTER_TOKEN]:o1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:s1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.HTML?N1(e,t):n===YJ.HEAD?(e._insertElement(t,UJ.HTML),e.headElement=e.openElements.current,e.insertionMode="IN_HEAD_MODE"):f1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.HEAD||n===YJ.BODY||n===YJ.HTML||n===YJ.BR?f1(e,t):e._err(jJ.endTagWithoutMatchingOpenElement)},[MJ.EOF_TOKEN]:f1},IN_HEAD_MODE:{[MJ.CHARACTER_TOKEN]:v1,[MJ.NULL_CHARACTER_TOKEN]:v1,[MJ.WHITESPACE_CHARACTER_TOKEN]:u1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:s1,[MJ.START_TAG_TOKEN]:m1,[MJ.END_TAG_TOKEN]:g1,[MJ.EOF_TOKEN]:v1},IN_HEAD_NO_SCRIPT_MODE:{[MJ.CHARACTER_TOKEN]:y1,[MJ.NULL_CHARACTER_TOKEN]:y1,[MJ.WHITESPACE_CHARACTER_TOKEN]:u1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:s1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.HTML?N1(e,t):n===YJ.BASEFONT||n===YJ.BGSOUND||n===YJ.HEAD||n===YJ.LINK||n===YJ.META||n===YJ.NOFRAMES||n===YJ.STYLE?m1(e,t):n===YJ.NOSCRIPT?e._err(jJ.nestedNoscriptInHead):y1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.NOSCRIPT?(e.openElements.pop(),e.insertionMode="IN_HEAD_MODE"):n===YJ.BR?y1(e,t):e._err(jJ.endTagWithoutMatchingOpenElement)},[MJ.EOF_TOKEN]:y1},AFTER_HEAD_MODE:{[MJ.CHARACTER_TOKEN]:x1,[MJ.NULL_CHARACTER_TOKEN]:x1,[MJ.WHITESPACE_CHARACTER_TOKEN]:u1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:s1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.HTML?N1(e,t):n===YJ.BODY?(e._insertElement(t,UJ.HTML),e.framesetOk=!1,e.insertionMode="IN_BODY_MODE"):n===YJ.FRAMESET?(e._insertElement(t,UJ.HTML),e.insertionMode="IN_FRAMESET_MODE"):n===YJ.BASE||n===YJ.BASEFONT||n===YJ.BGSOUND||n===YJ.LINK||n===YJ.META||n===YJ.NOFRAMES||n===YJ.SCRIPT||n===YJ.STYLE||n===YJ.TEMPLATE||n===YJ.TITLE?(e._err(jJ.abandonedHeadElementChild),e.openElements.push(e.headElement),m1(e,t),e.openElements.remove(e.headElement)):n===YJ.HEAD?e._err(jJ.misplacedStartTagForHeadElement):x1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.BODY||n===YJ.HTML||n===YJ.BR?x1(e,t):n===YJ.TEMPLATE?g1(e,t):e._err(jJ.endTagWithoutMatchingOpenElement)},[MJ.EOF_TOKEN]:x1},IN_BODY_MODE:{[MJ.CHARACTER_TOKEN]:b1,[MJ.NULL_CHARACTER_TOKEN]:o1,[MJ.WHITESPACE_CHARACTER_TOKEN]:E1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:N1,[MJ.END_TAG_TOKEN]:R1,[MJ.EOF_TOKEN]:D1},TEXT_MODE:{[MJ.CHARACTER_TOKEN]:u1,[MJ.NULL_CHARACTER_TOKEN]:u1,[MJ.WHITESPACE_CHARACTER_TOKEN]:u1,[MJ.COMMENT_TOKEN]:o1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:o1,[MJ.END_TAG_TOKEN]:function(e,t){t.tagName===YJ.SCRIPT&&(e.pendingScript=e.openElements.current);e.openElements.pop(),e.insertionMode=e.originalInsertionMode},[MJ.EOF_TOKEN]:function(e,t){e._err(jJ.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e._processToken(t)}},[XJ]:{[MJ.CHARACTER_TOKEN]:B1,[MJ.NULL_CHARACTER_TOKEN]:B1,[MJ.WHITESPACE_CHARACTER_TOKEN]:B1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:z1,[MJ.END_TAG_TOKEN]:H1,[MJ.EOF_TOKEN]:D1},IN_TABLE_TEXT_MODE:{[MJ.CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0},[MJ.NULL_CHARACTER_TOKEN]:o1,[MJ.WHITESPACE_CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t)},[MJ.COMMENT_TOKEN]:G1,[MJ.DOCTYPE_TOKEN]:G1,[MJ.START_TAG_TOKEN]:G1,[MJ.END_TAG_TOKEN]:G1,[MJ.EOF_TOKEN]:G1},IN_CAPTION_MODE:{[MJ.CHARACTER_TOKEN]:b1,[MJ.NULL_CHARACTER_TOKEN]:o1,[MJ.WHITESPACE_CHARACTER_TOKEN]:E1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.CAPTION||n===YJ.COL||n===YJ.COLGROUP||n===YJ.TBODY||n===YJ.TD||n===YJ.TFOOT||n===YJ.TH||n===YJ.THEAD||n===YJ.TR?e.openElements.hasInTableScope(YJ.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(YJ.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=XJ,e._processToken(t)):N1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.CAPTION||n===YJ.TABLE?e.openElements.hasInTableScope(YJ.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(YJ.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=XJ,n===YJ.TABLE&&e._processToken(t)):n!==YJ.BODY&&n!==YJ.COL&&n!==YJ.COLGROUP&&n!==YJ.HTML&&n!==YJ.TBODY&&n!==YJ.TD&&n!==YJ.TFOOT&&n!==YJ.TH&&n!==YJ.THEAD&&n!==YJ.TR&&R1(e,t)},[MJ.EOF_TOKEN]:D1},IN_COLUMN_GROUP_MODE:{[MJ.CHARACTER_TOKEN]:$1,[MJ.NULL_CHARACTER_TOKEN]:$1,[MJ.WHITESPACE_CHARACTER_TOKEN]:u1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.HTML?N1(e,t):n===YJ.COL?(e._appendElement(t,UJ.HTML),t.ackSelfClosing=!0):n===YJ.TEMPLATE?m1(e,t):$1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.COLGROUP?e.openElements.currentTagName===YJ.COLGROUP&&(e.openElements.pop(),e.insertionMode=XJ):n===YJ.TEMPLATE?g1(e,t):n!==YJ.COL&&$1(e,t)},[MJ.EOF_TOKEN]:D1},IN_TABLE_BODY_MODE:{[MJ.CHARACTER_TOKEN]:B1,[MJ.NULL_CHARACTER_TOKEN]:B1,[MJ.WHITESPACE_CHARACTER_TOKEN]:B1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.TR?(e.openElements.clearBackToTableBodyContext(),e._insertElement(t,UJ.HTML),e.insertionMode="IN_ROW_MODE"):n===YJ.TH||n===YJ.TD?(e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(YJ.TR),e.insertionMode="IN_ROW_MODE",e._processToken(t)):n===YJ.CAPTION||n===YJ.COL||n===YJ.COLGROUP||n===YJ.TBODY||n===YJ.TFOOT||n===YJ.THEAD?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=XJ,e._processToken(t)):z1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.TBODY||n===YJ.TFOOT||n===YJ.THEAD?e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=XJ):n===YJ.TABLE?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=XJ,e._processToken(t)):(n!==YJ.BODY&&n!==YJ.CAPTION&&n!==YJ.COL&&n!==YJ.COLGROUP||n!==YJ.HTML&&n!==YJ.TD&&n!==YJ.TH&&n!==YJ.TR)&&H1(e,t)},[MJ.EOF_TOKEN]:D1},IN_ROW_MODE:{[MJ.CHARACTER_TOKEN]:B1,[MJ.NULL_CHARACTER_TOKEN]:B1,[MJ.WHITESPACE_CHARACTER_TOKEN]:B1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.TH||n===YJ.TD?(e.openElements.clearBackToTableRowContext(),e._insertElement(t,UJ.HTML),e.insertionMode="IN_CELL_MODE",e.activeFormattingElements.insertMarker()):n===YJ.CAPTION||n===YJ.COL||n===YJ.COLGROUP||n===YJ.TBODY||n===YJ.TFOOT||n===YJ.THEAD||n===YJ.TR?e.openElements.hasInTableScope(YJ.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):z1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.TR?e.openElements.hasInTableScope(YJ.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE"):n===YJ.TABLE?e.openElements.hasInTableScope(YJ.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):n===YJ.TBODY||n===YJ.TFOOT||n===YJ.THEAD?(e.openElements.hasInTableScope(n)||e.openElements.hasInTableScope(YJ.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):(n!==YJ.BODY&&n!==YJ.CAPTION&&n!==YJ.COL&&n!==YJ.COLGROUP||n!==YJ.HTML&&n!==YJ.TD&&n!==YJ.TH)&&H1(e,t)},[MJ.EOF_TOKEN]:D1},IN_CELL_MODE:{[MJ.CHARACTER_TOKEN]:b1,[MJ.NULL_CHARACTER_TOKEN]:o1,[MJ.WHITESPACE_CHARACTER_TOKEN]:E1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.CAPTION||n===YJ.COL||n===YJ.COLGROUP||n===YJ.TBODY||n===YJ.TD||n===YJ.TFOOT||n===YJ.TH||n===YJ.THEAD||n===YJ.TR?(e.openElements.hasInTableScope(YJ.TD)||e.openElements.hasInTableScope(YJ.TH))&&(e._closeTableCell(),e._processToken(t)):N1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.TD||n===YJ.TH?e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode="IN_ROW_MODE"):n===YJ.TABLE||n===YJ.TBODY||n===YJ.TFOOT||n===YJ.THEAD||n===YJ.TR?e.openElements.hasInTableScope(n)&&(e._closeTableCell(),e._processToken(t)):n!==YJ.BODY&&n!==YJ.CAPTION&&n!==YJ.COL&&n!==YJ.COLGROUP&&n!==YJ.HTML&&R1(e,t)},[MJ.EOF_TOKEN]:D1},IN_SELECT_MODE:{[MJ.CHARACTER_TOKEN]:u1,[MJ.NULL_CHARACTER_TOKEN]:o1,[MJ.WHITESPACE_CHARACTER_TOKEN]:u1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:Y1,[MJ.END_TAG_TOKEN]:U1,[MJ.EOF_TOKEN]:D1},IN_SELECT_IN_TABLE_MODE:{[MJ.CHARACTER_TOKEN]:u1,[MJ.NULL_CHARACTER_TOKEN]:o1,[MJ.WHITESPACE_CHARACTER_TOKEN]:u1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.CAPTION||n===YJ.TABLE||n===YJ.TBODY||n===YJ.TFOOT||n===YJ.THEAD||n===YJ.TR||n===YJ.TD||n===YJ.TH?(e.openElements.popUntilTagNamePopped(YJ.SELECT),e._resetInsertionMode(),e._processToken(t)):Y1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.CAPTION||n===YJ.TABLE||n===YJ.TBODY||n===YJ.TFOOT||n===YJ.THEAD||n===YJ.TR||n===YJ.TD||n===YJ.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(YJ.SELECT),e._resetInsertionMode(),e._processToken(t)):U1(e,t)},[MJ.EOF_TOKEN]:D1},IN_TEMPLATE_MODE:{[MJ.CHARACTER_TOKEN]:b1,[MJ.NULL_CHARACTER_TOKEN]:o1,[MJ.WHITESPACE_CHARACTER_TOKEN]:E1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;if(n===YJ.BASE||n===YJ.BASEFONT||n===YJ.BGSOUND||n===YJ.LINK||n===YJ.META||n===YJ.NOFRAMES||n===YJ.SCRIPT||n===YJ.STYLE||n===YJ.TEMPLATE||n===YJ.TITLE)m1(e,t);else{const r=KJ[n]||"IN_BODY_MODE";e._popTmplInsertionMode(),e._pushTmplInsertionMode(r),e.insertionMode=r,e._processToken(t)}},[MJ.END_TAG_TOKEN]:function(e,t){t.tagName===YJ.TEMPLATE&&g1(e,t)},[MJ.EOF_TOKEN]:V1},AFTER_BODY_MODE:{[MJ.CHARACTER_TOKEN]:W1,[MJ.NULL_CHARACTER_TOKEN]:W1,[MJ.WHITESPACE_CHARACTER_TOKEN]:E1,[MJ.COMMENT_TOKEN]:function(e,t){e._appendCommentNode(t,e.openElements.items[0])},[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){t.tagName===YJ.HTML?N1(e,t):W1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){t.tagName===YJ.HTML?e.fragmentContext||(e.insertionMode="AFTER_AFTER_BODY_MODE"):W1(e,t)},[MJ.EOF_TOKEN]:h1},IN_FRAMESET_MODE:{[MJ.CHARACTER_TOKEN]:o1,[MJ.NULL_CHARACTER_TOKEN]:o1,[MJ.WHITESPACE_CHARACTER_TOKEN]:u1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.HTML?N1(e,t):n===YJ.FRAMESET?e._insertElement(t,UJ.HTML):n===YJ.FRAME?(e._appendElement(t,UJ.HTML),t.ackSelfClosing=!0):n===YJ.NOFRAMES&&m1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){t.tagName!==YJ.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagName===YJ.FRAMESET||(e.insertionMode="AFTER_FRAMESET_MODE"))},[MJ.EOF_TOKEN]:h1},AFTER_FRAMESET_MODE:{[MJ.CHARACTER_TOKEN]:o1,[MJ.NULL_CHARACTER_TOKEN]:o1,[MJ.WHITESPACE_CHARACTER_TOKEN]:u1,[MJ.COMMENT_TOKEN]:l1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.HTML?N1(e,t):n===YJ.NOFRAMES&&m1(e,t)},[MJ.END_TAG_TOKEN]:function(e,t){t.tagName===YJ.HTML&&(e.insertionMode="AFTER_AFTER_FRAMESET_MODE")},[MJ.EOF_TOKEN]:h1},AFTER_AFTER_BODY_MODE:{[MJ.CHARACTER_TOKEN]:X1,[MJ.NULL_CHARACTER_TOKEN]:X1,[MJ.WHITESPACE_CHARACTER_TOKEN]:E1,[MJ.COMMENT_TOKEN]:c1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){t.tagName===YJ.HTML?N1(e,t):X1(e,t)},[MJ.END_TAG_TOKEN]:X1,[MJ.EOF_TOKEN]:h1},AFTER_AFTER_FRAMESET_MODE:{[MJ.CHARACTER_TOKEN]:o1,[MJ.NULL_CHARACTER_TOKEN]:o1,[MJ.WHITESPACE_CHARACTER_TOKEN]:E1,[MJ.COMMENT_TOKEN]:c1,[MJ.DOCTYPE_TOKEN]:o1,[MJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===YJ.HTML?N1(e,t):n===YJ.NOFRAMES&&m1(e,t)},[MJ.END_TAG_TOKEN]:o1,[MJ.EOF_TOKEN]:h1}};var ZJ=class{constructor(e){this.options=BJ(WJ,e),this.treeAdapter=this.options.treeAdapter,this.pendingScript=null,this.options.sourceCodeLocationInfo&&RJ.install(this,LJ),this.options.onParseError&&RJ.install(this,PJ,{onParseError:this.options.onParseError})}parse(e){const t=this.treeAdapter.createDocument();return this._bootstrap(t,null),this.tokenizer.write(e,!0),this._runParsingLoop(null),t}parseFragment(e,t){t||(t=this.treeAdapter.createElement(YJ.TEMPLATE,UJ.HTML,[]));const n=this.treeAdapter.createElement("documentmock",UJ.HTML,[]);this._bootstrap(n,t),this.treeAdapter.getTagName(t)===YJ.TEMPLATE&&this._pushTmplInsertionMode("IN_TEMPLATE_MODE"),this._initTokenizerForFragmentParsing(),this._insertFakeRootElement(),this._resetInsertionMode(),this._findFormInFragmentContext(),this.tokenizer.write(e,!0),this._runParsingLoop(null);const r=this.treeAdapter.getFirstChild(n),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(r,i),i}_bootstrap(e,t){this.tokenizer=new MJ(this.options),this.stopped=!1,this.insertionMode="INITIAL_MODE",this.originalInsertionMode="",this.document=e,this.fragmentContext=t,this.headElement=null,this.formElement=null,this.openElements=new NJ(this.document,this.treeAdapter),this.activeFormattingElements=new FJ(this.treeAdapter),this.tmplInsertionModeStack=[],this.tmplInsertionModeStackTop=-1,this.currentTmplInsertionMode=null,this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1}_err(){}_runParsingLoop(e){for(;!this.stopped;){this._setupTokenizerCDATAMode();const t=this.tokenizer.getNextToken();if(t.type===MJ.HIBERNATION_TOKEN)break;if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.type===MJ.WHITESPACE_CHARACTER_TOKEN&&"\n"===t.chars[0])){if(1===t.chars.length)continue;t.chars=t.chars.substr(1)}if(this._processInputToken(t),e&&this.pendingScript)break}}runParsingLoopForCurrentChunk(e,t){if(this._runParsingLoop(t),t&&this.pendingScript){const e=this.pendingScript;return this.pendingScript=null,void t(e)}e&&e()}_setupTokenizerCDATAMode(){const e=this._getAdjustedCurrentElement();this.tokenizer.allowCDATA=e&&e!==this.document&&this.treeAdapter.getNamespaceURI(e)!==UJ.HTML&&!this._isIntegrationPoint(e)}_switchToTextParsing(e,t){this._insertElement(e,UJ.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode="TEXT_MODE"}switchToPlaintextParsing(){this.insertionMode="TEXT_MODE",this.originalInsertionMode="IN_BODY_MODE",this.tokenizer.state=MJ.MODE.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;do{if(this.treeAdapter.getTagName(e)===YJ.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}while(e)}_initTokenizerForFragmentParsing(){if(this.treeAdapter.getNamespaceURI(this.fragmentContext)===UJ.HTML){const e=this.treeAdapter.getTagName(this.fragmentContext);e===YJ.TITLE||e===YJ.TEXTAREA?this.tokenizer.state=MJ.MODE.RCDATA:e===YJ.STYLE||e===YJ.XMP||e===YJ.IFRAME||e===YJ.NOEMBED||e===YJ.NOFRAMES||e===YJ.NOSCRIPT?this.tokenizer.state=MJ.MODE.RAWTEXT:e===YJ.SCRIPT?this.tokenizer.state=MJ.MODE.SCRIPT_DATA:e===YJ.PLAINTEXT&&(this.tokenizer.state=MJ.MODE.PLAINTEXT)}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",r=e.systemId||"";this.treeAdapter.setDocumentType(this.document,t,n,r)}_attachElementToTree(e){if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n),this.openElements.push(n)}_insertFakeElement(e){const t=this.treeAdapter.createElement(e,UJ.HTML,[]);this._attachElementToTree(t),this.openElements.push(t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,UJ.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t),this.openElements.push(t)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(YJ.HTML,UJ.HTML,[]);this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n)}_insertCharacters(e){if(this._shouldFosterParentOnInsertion())this._fosterParentText(e.chars);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.insertText(t,e.chars)}}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_shouldProcessTokenInForeignContent(e){const t=this._getAdjustedCurrentElement();if(!t||t===this.document)return!1;const n=this.treeAdapter.getNamespaceURI(t);if(n===UJ.HTML)return!1;if(this.treeAdapter.getTagName(t)===YJ.ANNOTATION_XML&&n===UJ.MATHML&&e.type===MJ.START_TAG_TOKEN&&e.tagName===YJ.SVG)return!1;const r=e.type===MJ.CHARACTER_TOKEN||e.type===MJ.NULL_CHARACTER_TOKEN||e.type===MJ.WHITESPACE_CHARACTER_TOKEN;return(!(e.type===MJ.START_TAG_TOKEN&&e.tagName!==YJ.MGLYPH&&e.tagName!==YJ.MALIGNMARK)&&!r||!this._isIntegrationPoint(t,UJ.MATHML))&&((e.type!==MJ.START_TAG_TOKEN&&!r||!this._isIntegrationPoint(t,UJ.HTML))&&e.type!==MJ.EOF_TOKEN)}_processToken(e){QJ[this.insertionMode][e.type](this,e)}_processTokenInBodyMode(e){QJ.IN_BODY_MODE[e.type](this,e)}_processTokenInForeignContent(e){e.type===MJ.CHARACTER_TOKEN?function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e):e.type===MJ.NULL_CHARACTER_TOKEN?function(e,t){t.chars=GJ.REPLACEMENT_CHARACTER,e._insertCharacters(t)}(this,e):e.type===MJ.WHITESPACE_CHARACTER_TOKEN?u1(this,e):e.type===MJ.COMMENT_TOKEN?l1(this,e):e.type===MJ.START_TAG_TOKEN?function(e,t){if(HJ.causesExit(t)&&!e.fragmentContext){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==UJ.HTML&&!e._isIntegrationPoint(e.openElements.current);)e.openElements.pop();e._processToken(t)}else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===UJ.MATHML?HJ.adjustTokenMathMLAttrs(t):r===UJ.SVG&&(HJ.adjustTokenSVGTagName(t),HJ.adjustTokenSVGAttrs(t)),HJ.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):e.type===MJ.END_TAG_TOKEN&&function(e,t){for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===UJ.HTML){e._processToken(t);break}if(e.treeAdapter.getTagName(r).toLowerCase()===t.tagName){e.openElements.popUntilElementPopped(r);break}}}(this,e)}_processInputToken(e){this._shouldProcessTokenInForeignContent(e)?this._processTokenInForeignContent(e):this._processToken(e),e.type===MJ.START_TAG_TOKEN&&e.selfClosing&&!e.ackSelfClosing&&this._err(jJ.nonVoidHtmlElementStartTagWithTrailingSolidus)}_isIntegrationPoint(e,t){const n=this.treeAdapter.getTagName(e),r=this.treeAdapter.getNamespaceURI(e),i=this.treeAdapter.getAttrList(e);return HJ.isIntegrationPoint(n,r,i,t)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.length;if(e){let t=e,n=null;do{if(t--,n=this.activeFormattingElements.entries[t],n.type===FJ.MARKER_ENTRY||this.openElements.contains(n.element)){t++;break}}while(t>0);for(let r=t;r<e;r++)n=this.activeFormattingElements.entries[r],this._insertElement(n.token,this.treeAdapter.getNamespaceURI(n.element)),n.element=this.openElements.current}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode="IN_ROW_MODE"}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(YJ.P),this.openElements.popUntilTagNamePopped(YJ.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop,t=!1;e>=0;e--){let n=this.openElements.items[e];0===e&&(t=!0,this.fragmentContext&&(n=this.fragmentContext));const r=this.treeAdapter.getTagName(n),i=qJ[r];if(i){this.insertionMode=i;break}if(!(t||r!==YJ.TD&&r!==YJ.TH)){this.insertionMode="IN_CELL_MODE";break}if(!t&&r===YJ.HEAD){this.insertionMode="IN_HEAD_MODE";break}if(r===YJ.SELECT){this._resetInsertionModeForSelect(e);break}if(r===YJ.TEMPLATE){this.insertionMode=this.currentTmplInsertionMode;break}if(r===YJ.HTML){this.insertionMode=this.headElement?"AFTER_HEAD_MODE":"BEFORE_HEAD_MODE";break}if(t){this.insertionMode="IN_BODY_MODE";break}}}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.items[t],n=this.treeAdapter.getTagName(e);if(n===YJ.TEMPLATE)break;if(n===YJ.TABLE)return void(this.insertionMode="IN_SELECT_IN_TABLE_MODE")}this.insertionMode="IN_SELECT_MODE"}_pushTmplInsertionMode(e){this.tmplInsertionModeStack.push(e),this.tmplInsertionModeStackTop++,this.currentTmplInsertionMode=e}_popTmplInsertionMode(){this.tmplInsertionModeStack.pop(),this.tmplInsertionModeStackTop--,this.currentTmplInsertionMode=this.tmplInsertionModeStack[this.tmplInsertionModeStackTop]}_isElementCausesFosterParenting(e){const t=this.treeAdapter.getTagName(e);return t===YJ.TABLE||t===YJ.TBODY||t===YJ.TFOOT||t===YJ.THEAD||t===YJ.TR}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.current)}_findFosterParentingLocation(){const e={parent:null,beforeElement:null};for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t],r=this.treeAdapter.getTagName(n),i=this.treeAdapter.getNamespaceURI(n);if(r===YJ.TEMPLATE&&i===UJ.HTML){e.parent=this.treeAdapter.getTemplateContent(n);break}if(r===YJ.TABLE){e.parent=this.treeAdapter.getParentNode(n),e.parent?e.beforeElement=n:e.parent=this.openElements.items[t-1];break}}return e.parent||(e.parent=this.openElements.items[0]),e}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_fosterParentText(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertTextBefore(t.parent,e,t.beforeElement):this.treeAdapter.insertText(t.parent,e)}_isSpecialElement(e){const t=this.treeAdapter.getTagName(e),n=this.treeAdapter.getNamespaceURI(e);return $J.SPECIAL_ELEMENTS[n][t]}};function JJ(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagName)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):P1(e,t),n}function e1(e,t){let n=null;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i)&&(n=i)}return n||(e.openElements.popUntilElementPopped(t.element),e.activeFormattingElements.removeEntry(t)),n}function t1(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let a=0,o=i;o!==n;a++,o=i){i=e.openElements.getCommonAncestor(o);const n=e.activeFormattingElements.getElementEntry(o),s=n&&a>=3;!n||s?(s&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(o)):(o=n1(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function n1(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function r1(e,t,n){if(e._isElementCausesFosterParenting(t))e._fosterParentElement(n);else{const r=e.treeAdapter.getTagName(t),i=e.treeAdapter.getNamespaceURI(t);r===YJ.TEMPLATE&&i===UJ.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function i1(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),i=n.token,a=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,n.token),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,a)}function a1(e,t){let n;for(let r=0;r<8&&(n=JJ(e,t),n);r++){const t=e1(e,n);if(!t)break;e.activeFormattingElements.bookmark=n;const r=t1(e,t,n.element),i=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(r),r1(e,i,r),i1(e,t,n)}}function o1(){}function s1(e){e._err(jJ.misplacedDoctype)}function l1(e,t){e._appendCommentNode(t,e.openElements.currentTmplContent||e.openElements.current)}function c1(e,t){e._appendCommentNode(t,e.document)}function u1(e,t){e._insertCharacters(t)}function h1(e){e.stopped=!0}function p1(e,t){e._err(jJ.missingDoctype,{beforeToken:!0}),e.treeAdapter.setDocumentMode(e.document,$J.DOCUMENT_MODE.QUIRKS),e.insertionMode="BEFORE_HTML_MODE",e._processToken(t)}function d1(e,t){e._insertFakeRootElement(),e.insertionMode="BEFORE_HEAD_MODE",e._processToken(t)}function f1(e,t){e._insertFakeElement(YJ.HEAD),e.headElement=e.openElements.current,e.insertionMode="IN_HEAD_MODE",e._processToken(t)}function m1(e,t){const n=t.tagName;n===YJ.HTML?N1(e,t):n===YJ.BASE||n===YJ.BASEFONT||n===YJ.BGSOUND||n===YJ.LINK||n===YJ.META?(e._appendElement(t,UJ.HTML),t.ackSelfClosing=!0):n===YJ.TITLE?e._switchToTextParsing(t,MJ.MODE.RCDATA):n===YJ.NOSCRIPT?e.options.scriptingEnabled?e._switchToTextParsing(t,MJ.MODE.RAWTEXT):(e._insertElement(t,UJ.HTML),e.insertionMode="IN_HEAD_NO_SCRIPT_MODE"):n===YJ.NOFRAMES||n===YJ.STYLE?e._switchToTextParsing(t,MJ.MODE.RAWTEXT):n===YJ.SCRIPT?e._switchToTextParsing(t,MJ.MODE.SCRIPT_DATA):n===YJ.TEMPLATE?(e._insertTemplate(t,UJ.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode="IN_TEMPLATE_MODE",e._pushTmplInsertionMode("IN_TEMPLATE_MODE")):n===YJ.HEAD?e._err(jJ.misplacedStartTagForHeadElement):v1(e,t)}function g1(e,t){const n=t.tagName;n===YJ.HEAD?(e.openElements.pop(),e.insertionMode="AFTER_HEAD_MODE"):n===YJ.BODY||n===YJ.BR||n===YJ.HTML?v1(e,t):n===YJ.TEMPLATE&&e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagName!==YJ.TEMPLATE&&e._err(jJ.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(YJ.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode()):e._err(jJ.endTagWithoutMatchingOpenElement)}function v1(e,t){e.openElements.pop(),e.insertionMode="AFTER_HEAD_MODE",e._processToken(t)}function y1(e,t){const n=t.type===MJ.EOF_TOKEN?jJ.openElementsLeftAfterEof:jJ.disallowedContentInNoscriptInHead;e._err(n),e.openElements.pop(),e.insertionMode="IN_HEAD_MODE",e._processToken(t)}function x1(e,t){e._insertFakeElement(YJ.BODY),e.insertionMode="IN_BODY_MODE",e._processToken(t)}function E1(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function b1(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function C1(e,t){e.openElements.hasInButtonScope(YJ.P)&&e._closePElement(),e._insertElement(t,UJ.HTML)}function T1(e,t){e.openElements.hasInButtonScope(YJ.P)&&e._closePElement(),e._insertElement(t,UJ.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function w1(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,UJ.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function S1(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,UJ.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function k1(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,UJ.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function _1(e,t){e._appendElement(t,UJ.HTML),t.ackSelfClosing=!0}function A1(e,t){e._switchToTextParsing(t,MJ.MODE.RAWTEXT)}function O1(e,t){e.openElements.currentTagName===YJ.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,UJ.HTML)}function I1(e,t){e.openElements.hasInScope(YJ.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,UJ.HTML)}function M1(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,UJ.HTML)}function N1(e,t){const n=t.tagName;switch(n.length){case 1:n===YJ.I||n===YJ.S||n===YJ.B||n===YJ.U?w1(e,t):n===YJ.P?C1(e,t):n===YJ.A?function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(YJ.A);n&&(a1(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,UJ.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):M1(e,t);break;case 2:n===YJ.DL||n===YJ.OL||n===YJ.UL?C1(e,t):n===YJ.H1||n===YJ.H2||n===YJ.H3||n===YJ.H4||n===YJ.H5||n===YJ.H6?function(e,t){e.openElements.hasInButtonScope(YJ.P)&&e._closePElement();const n=e.openElements.currentTagName;n!==YJ.H1&&n!==YJ.H2&&n!==YJ.H3&&n!==YJ.H4&&n!==YJ.H5&&n!==YJ.H6||e.openElements.pop(),e._insertElement(t,UJ.HTML)}(e,t):n===YJ.LI||n===YJ.DD||n===YJ.DT?function(e,t){e.framesetOk=!1;const n=t.tagName;for(let r=e.openElements.stackTop;r>=0;r--){const t=e.openElements.items[r],i=e.treeAdapter.getTagName(t);let a=null;if(n===YJ.LI&&i===YJ.LI?a=YJ.LI:n!==YJ.DD&&n!==YJ.DT||i!==YJ.DD&&i!==YJ.DT||(a=i),a){e.openElements.generateImpliedEndTagsWithExclusion(a),e.openElements.popUntilTagNamePopped(a);break}if(i!==YJ.ADDRESS&&i!==YJ.DIV&&i!==YJ.P&&e._isSpecialElement(t))break}e.openElements.hasInButtonScope(YJ.P)&&e._closePElement(),e._insertElement(t,UJ.HTML)}(e,t):n===YJ.EM||n===YJ.TT?w1(e,t):n===YJ.BR?k1(e,t):n===YJ.HR?function(e,t){e.openElements.hasInButtonScope(YJ.P)&&e._closePElement(),e._appendElement(t,UJ.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t):n===YJ.RB?I1(e,t):n===YJ.RT||n===YJ.RP?function(e,t){e.openElements.hasInScope(YJ.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(YJ.RTC),e._insertElement(t,UJ.HTML)}(e,t):n!==YJ.TH&&n!==YJ.TD&&n!==YJ.TR&&M1(e,t);break;case 3:n===YJ.DIV||n===YJ.DIR||n===YJ.NAV?C1(e,t):n===YJ.PRE?T1(e,t):n===YJ.BIG?w1(e,t):n===YJ.IMG||n===YJ.WBR?k1(e,t):n===YJ.XMP?function(e,t){e.openElements.hasInButtonScope(YJ.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,MJ.MODE.RAWTEXT)}(e,t):n===YJ.SVG?function(e,t){e._reconstructActiveFormattingElements(),HJ.adjustTokenSVGAttrs(t),HJ.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,UJ.SVG):e._insertElement(t,UJ.SVG),t.ackSelfClosing=!0}(e,t):n===YJ.RTC?I1(e,t):n!==YJ.COL&&M1(e,t);break;case 4:n===YJ.HTML?function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t):n===YJ.BASE||n===YJ.LINK||n===YJ.META?m1(e,t):n===YJ.BODY?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t):n===YJ.MAIN||n===YJ.MENU?C1(e,t):n===YJ.FORM?function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(YJ.P)&&e._closePElement(),e._insertElement(t,UJ.HTML),n||(e.formElement=e.openElements.current))}(e,t):n===YJ.CODE||n===YJ.FONT?w1(e,t):n===YJ.NOBR?function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(YJ.NOBR)&&(a1(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,UJ.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):n===YJ.AREA?k1(e,t):n===YJ.MATH?function(e,t){e._reconstructActiveFormattingElements(),HJ.adjustTokenMathMLAttrs(t),HJ.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,UJ.MATHML):e._insertElement(t,UJ.MATHML),t.ackSelfClosing=!0}(e,t):n===YJ.MENU?function(e,t){e.openElements.hasInButtonScope(YJ.P)&&e._closePElement(),e._insertElement(t,UJ.HTML)}(e,t):n!==YJ.HEAD&&M1(e,t);break;case 5:n===YJ.STYLE||n===YJ.TITLE?m1(e,t):n===YJ.ASIDE?C1(e,t):n===YJ.SMALL?w1(e,t):n===YJ.TABLE?function(e,t){e.treeAdapter.getDocumentMode(e.document)!==$J.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(YJ.P)&&e._closePElement(),e._insertElement(t,UJ.HTML),e.framesetOk=!1,e.insertionMode=XJ}(e,t):n===YJ.EMBED?k1(e,t):n===YJ.INPUT?function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,UJ.HTML);const n=MJ.getTokenAttr(t,VJ.TYPE);n&&"hidden"===n.toLowerCase()||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t):n===YJ.PARAM||n===YJ.TRACK?_1(e,t):n===YJ.IMAGE?function(e,t){t.tagName=YJ.IMG,k1(e,t)}(e,t):n!==YJ.FRAME&&n!==YJ.TBODY&&n!==YJ.TFOOT&&n!==YJ.THEAD&&M1(e,t);break;case 6:n===YJ.SCRIPT?m1(e,t):n===YJ.CENTER||n===YJ.FIGURE||n===YJ.FOOTER||n===YJ.HEADER||n===YJ.HGROUP||n===YJ.DIALOG?C1(e,t):n===YJ.BUTTON?function(e,t){e.openElements.hasInScope(YJ.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(YJ.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,UJ.HTML),e.framesetOk=!1}(e,t):n===YJ.STRIKE||n===YJ.STRONG?w1(e,t):n===YJ.APPLET||n===YJ.OBJECT?S1(e,t):n===YJ.KEYGEN?k1(e,t):n===YJ.SOURCE?_1(e,t):n===YJ.IFRAME?function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,MJ.MODE.RAWTEXT)}(e,t):n===YJ.SELECT?function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,UJ.HTML),e.framesetOk=!1,e.insertionMode===XJ||"IN_CAPTION_MODE"===e.insertionMode||"IN_TABLE_BODY_MODE"===e.insertionMode||"IN_ROW_MODE"===e.insertionMode||"IN_CELL_MODE"===e.insertionMode?e.insertionMode="IN_SELECT_IN_TABLE_MODE":e.insertionMode="IN_SELECT_MODE"}(e,t):n===YJ.OPTION?O1(e,t):M1(e,t);break;case 7:n===YJ.BGSOUND?m1(e,t):n===YJ.DETAILS||n===YJ.ADDRESS||n===YJ.ARTICLE||n===YJ.SECTION||n===YJ.SUMMARY?C1(e,t):n===YJ.LISTING?T1(e,t):n===YJ.MARQUEE?S1(e,t):n===YJ.NOEMBED?A1(e,t):n!==YJ.CAPTION&&M1(e,t);break;case 8:n===YJ.BASEFONT?m1(e,t):n===YJ.FRAMESET?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,UJ.HTML),e.insertionMode="IN_FRAMESET_MODE")}(e,t):n===YJ.FIELDSET?C1(e,t):n===YJ.TEXTAREA?function(e,t){e._insertElement(t,UJ.HTML),e.skipNextNewLine=!0,e.tokenizer.state=MJ.MODE.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode="TEXT_MODE"}(e,t):n===YJ.TEMPLATE?m1(e,t):n===YJ.NOSCRIPT?e.options.scriptingEnabled?A1(e,t):M1(e,t):n===YJ.OPTGROUP?O1(e,t):n!==YJ.COLGROUP&&M1(e,t);break;case 9:n===YJ.PLAINTEXT?function(e,t){e.openElements.hasInButtonScope(YJ.P)&&e._closePElement(),e._insertElement(t,UJ.HTML),e.tokenizer.state=MJ.MODE.PLAINTEXT}(e,t):M1(e,t);break;case 10:n===YJ.BLOCKQUOTE||n===YJ.FIGCAPTION?C1(e,t):M1(e,t);break;default:M1(e,t)}}function F1(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function L1(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function P1(e,t){const n=t.tagName;for(let r=e.openElements.stackTop;r>0;r--){const t=e.openElements.items[r];if(e.treeAdapter.getTagName(t)===n){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilElementPopped(t);break}if(e._isSpecialElement(t))break}}function R1(e,t){const n=t.tagName;switch(n.length){case 1:n===YJ.A||n===YJ.B||n===YJ.I||n===YJ.S||n===YJ.U?a1(e,t):n===YJ.P?function(e){e.openElements.hasInButtonScope(YJ.P)||e._insertFakeElement(YJ.P),e._closePElement()}(e):P1(e,t);break;case 2:n===YJ.DL||n===YJ.UL||n===YJ.OL?F1(e,t):n===YJ.LI?function(e){e.openElements.hasInListItemScope(YJ.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(YJ.LI),e.openElements.popUntilTagNamePopped(YJ.LI))}(e):n===YJ.DD||n===YJ.DT?function(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t):n===YJ.H1||n===YJ.H2||n===YJ.H3||n===YJ.H4||n===YJ.H5||n===YJ.H6?function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e):n===YJ.BR?function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(YJ.BR),e.openElements.pop(),e.framesetOk=!1}(e):n===YJ.EM||n===YJ.TT?a1(e,t):P1(e,t);break;case 3:n===YJ.BIG?a1(e,t):n===YJ.DIR||n===YJ.DIV||n===YJ.NAV||n===YJ.PRE?F1(e,t):P1(e,t);break;case 4:n===YJ.BODY?function(e){e.openElements.hasInScope(YJ.BODY)&&(e.insertionMode="AFTER_BODY_MODE")}(e):n===YJ.HTML?function(e,t){e.openElements.hasInScope(YJ.BODY)&&(e.insertionMode="AFTER_BODY_MODE",e._processToken(t))}(e,t):n===YJ.FORM?function(e){const t=e.openElements.tmplCount>0,n=e.formElement;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(YJ.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(YJ.FORM):e.openElements.remove(n))}(e):n===YJ.CODE||n===YJ.FONT||n===YJ.NOBR?a1(e,t):n===YJ.MAIN||n===YJ.MENU?F1(e,t):P1(e,t);break;case 5:n===YJ.ASIDE?F1(e,t):n===YJ.SMALL?a1(e,t):P1(e,t);break;case 6:n===YJ.CENTER||n===YJ.FIGURE||n===YJ.FOOTER||n===YJ.HEADER||n===YJ.HGROUP||n===YJ.DIALOG?F1(e,t):n===YJ.APPLET||n===YJ.OBJECT?L1(e,t):n===YJ.STRIKE||n===YJ.STRONG?a1(e,t):P1(e,t);break;case 7:n===YJ.ADDRESS||n===YJ.ARTICLE||n===YJ.DETAILS||n===YJ.SECTION||n===YJ.SUMMARY||n===YJ.LISTING?F1(e,t):n===YJ.MARQUEE?L1(e,t):P1(e,t);break;case 8:n===YJ.FIELDSET?F1(e,t):n===YJ.TEMPLATE?g1(e,t):P1(e,t);break;case 10:n===YJ.BLOCKQUOTE||n===YJ.FIGCAPTION?F1(e,t):P1(e,t);break;default:P1(e,t)}}function D1(e,t){e.tmplInsertionModeStackTop>-1?V1(e,t):e.stopped=!0}function B1(e,t){const n=e.openElements.currentTagName;n===YJ.TABLE||n===YJ.TBODY||n===YJ.TFOOT||n===YJ.THEAD||n===YJ.TR?(e.pendingCharacterTokens=[],e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode="IN_TABLE_TEXT_MODE",e._processToken(t)):j1(e,t)}function z1(e,t){const n=t.tagName;switch(n.length){case 2:n===YJ.TD||n===YJ.TH||n===YJ.TR?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(YJ.TBODY),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)}(e,t):j1(e,t);break;case 3:n===YJ.COL?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(YJ.COLGROUP),e.insertionMode="IN_COLUMN_GROUP_MODE",e._processToken(t)}(e,t):j1(e,t);break;case 4:n===YJ.FORM?function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,UJ.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t):j1(e,t);break;case 5:n===YJ.TABLE?function(e,t){e.openElements.hasInTableScope(YJ.TABLE)&&(e.openElements.popUntilTagNamePopped(YJ.TABLE),e._resetInsertionMode(),e._processToken(t))}(e,t):n===YJ.STYLE?m1(e,t):n===YJ.TBODY||n===YJ.TFOOT||n===YJ.THEAD?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,UJ.HTML),e.insertionMode="IN_TABLE_BODY_MODE"}(e,t):n===YJ.INPUT?function(e,t){const n=MJ.getTokenAttr(t,VJ.TYPE);n&&"hidden"===n.toLowerCase()?e._appendElement(t,UJ.HTML):j1(e,t),t.ackSelfClosing=!0}(e,t):j1(e,t);break;case 6:n===YJ.SCRIPT?m1(e,t):j1(e,t);break;case 7:n===YJ.CAPTION?function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,UJ.HTML),e.insertionMode="IN_CAPTION_MODE"}(e,t):j1(e,t);break;case 8:n===YJ.COLGROUP?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,UJ.HTML),e.insertionMode="IN_COLUMN_GROUP_MODE"}(e,t):n===YJ.TEMPLATE?m1(e,t):j1(e,t);break;default:j1(e,t)}}function H1(e,t){const n=t.tagName;n===YJ.TABLE?e.openElements.hasInTableScope(YJ.TABLE)&&(e.openElements.popUntilTagNamePopped(YJ.TABLE),e._resetInsertionMode()):n===YJ.TEMPLATE?g1(e,t):n!==YJ.BODY&&n!==YJ.CAPTION&&n!==YJ.COL&&n!==YJ.COLGROUP&&n!==YJ.HTML&&n!==YJ.TBODY&&n!==YJ.TD&&n!==YJ.TFOOT&&n!==YJ.TH&&n!==YJ.THEAD&&n!==YJ.TR&&j1(e,t)}function j1(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,e._processTokenInBodyMode(t),e.fosterParentingEnabled=n}function G1(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)j1(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}function $1(e,t){e.openElements.currentTagName===YJ.COLGROUP&&(e.openElements.pop(),e.insertionMode=XJ,e._processToken(t))}function Y1(e,t){const n=t.tagName;n===YJ.HTML?N1(e,t):n===YJ.OPTION?(e.openElements.currentTagName===YJ.OPTION&&e.openElements.pop(),e._insertElement(t,UJ.HTML)):n===YJ.OPTGROUP?(e.openElements.currentTagName===YJ.OPTION&&e.openElements.pop(),e.openElements.currentTagName===YJ.OPTGROUP&&e.openElements.pop(),e._insertElement(t,UJ.HTML)):n===YJ.INPUT||n===YJ.KEYGEN||n===YJ.TEXTAREA||n===YJ.SELECT?e.openElements.hasInSelectScope(YJ.SELECT)&&(e.openElements.popUntilTagNamePopped(YJ.SELECT),e._resetInsertionMode(),n!==YJ.SELECT&&e._processToken(t)):n!==YJ.SCRIPT&&n!==YJ.TEMPLATE||m1(e,t)}function U1(e,t){const n=t.tagName;if(n===YJ.OPTGROUP){const t=e.openElements.items[e.openElements.stackTop-1],n=t&&e.treeAdapter.getTagName(t);e.openElements.currentTagName===YJ.OPTION&&n===YJ.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagName===YJ.OPTGROUP&&e.openElements.pop()}else n===YJ.OPTION?e.openElements.currentTagName===YJ.OPTION&&e.openElements.pop():n===YJ.SELECT&&e.openElements.hasInSelectScope(YJ.SELECT)?(e.openElements.popUntilTagNamePopped(YJ.SELECT),e._resetInsertionMode()):n===YJ.TEMPLATE&&g1(e,t)}function V1(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(YJ.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode(),e._processToken(t)):e.stopped=!0}function W1(e,t){e.insertionMode="IN_BODY_MODE",e._processToken(t)}function X1(e,t){e.insertionMode="IN_BODY_MODE",e._processToken(t)}var q1=/[#.]/g;const K1=new Set(["menu","submit","reset","button"]),Q1={}.hasOwnProperty;function Z1(e,t,n){const r=n&&function(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}(n);return function(n,i,...a){let o,s=-1;if(null==n)o={type:"root",children:[]},a.unshift(i);else if(o=function(e,t="div"){for(var n,r,i,a=e||"",o={},s=0;s<a.length;)q1.lastIndex=s,i=q1.exec(a),(n=a.slice(s,i?i.index:a.length))&&(r?"#"===r?o.id=n:Array.isArray(o.className)?o.className.push(n):o.className=[n]:t=n,s+=n.length),i&&(r=i[0],s++);return{type:"element",tagName:t,properties:o,children:[]}}(n,t),o.tagName=o.tagName.toLowerCase(),r&&Q1.call(r,o.tagName)&&(o.tagName=r[o.tagName]),function(e,t){if(null==e||"object"!=typeof e||Array.isArray(e))return!1;if("input"===t||!e.type||"string"!=typeof e.type)return!0;if("children"in e&&Array.isArray(e.children))return!1;if("button"===t)return K1.has(e.type.toLowerCase());return!("value"in e)}(i,o.tagName)){let t;for(t in i)Q1.call(i,t)&&J1(e,o.properties,t,i[t])}else a.unshift(i);for(;++s<a.length;)e0(o.children,a[s]);return"element"===o.type&&"template"===o.tagName&&(o.content={type:"root",children:o.children},o.children=[]),o}}function J1(e,t,n,r){const i=_W(e,n);let a,o=-1;if(null!=r){if("number"==typeof r){if(Number.isNaN(r))return;a=r}else a="boolean"==typeof r?r:"string"==typeof r?i.spaceSeparated?dX(r):i.commaSeparated?mX(r):i.commaOrSpaceSeparated?dX(mX(r).join(" ")):t0(i,i.property,r):Array.isArray(r)?r.concat():"style"===i.property?function(e){const t=[];let n;for(n in e)Q1.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}(r):String(r);if(Array.isArray(a)){const e=[];for(;++o<a.length;)e[o]=t0(i,i.property,a[o]);a=e}"className"===i.property&&Array.isArray(t.className)&&(a=t.className.concat(a)),t[i.property]=a}}function e0(e,t){let n=-1;if(null==t);else if("string"==typeof t||"number"==typeof t)e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)e0(e,t[n]);else{if("object"!=typeof t||!("type"in t))throw new Error("Expected node, nodes, or string, got `"+t+"`");"root"===t.type?e0(e,t.children):e.push(t)}}function t0(e,t,n){if("string"==typeof n){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(""===n||JV(n)===JV(t)))return!0}return n}const n0=Z1(MW,"div"),r0=Z1(NW,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]);const i0={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},a0={}.hasOwnProperty,o0={"#document":l0,"#document-fragment":l0,"#text":function(e,t){return{type:"text",value:t.value}},"#comment":function(e,t){return{type:"comment",value:t.data}},"#documentType":function(){return{type:"doctype"}}};function s0(e,t){const n=e.schema,r=a0.call(o0,t.nodeName)?o0[t.nodeName]:c0;let i;"tagName"in t&&(e.schema=t.namespaceURI===i0.svg?NW:MW),"childNodes"in t&&(i=function(e,t){let n=-1;const r=[];for(;++n<t.length;)r[n]=s0(e,t[n]);return r}(e,t.childNodes));const a=r(e,t,i);if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const n=function(e,t,n){const r=u0(n);if("element"===t.type){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const r={};let i;for(i in n.attrs)a0.call(n.attrs,i)&&(r[_W(e.schema,i).property]=u0(n.attrs[i]));t.data={position:{opening:u0(n.startTag),closing:n.endTag?u0(n.endTag):null,properties:r}}}}return r}(e,a,t.sourceCodeLocation);n&&(e.location=!0,a.position=n)}return e.schema=n,a}function l0(e,t,n){const r={type:"root",children:n,data:{quirksMode:"quirks"===t.mode||"limited-quirks"===t.mode}};if(e.file&&e.location){const t=String(e.file),n=function(e){for(var t=String(e),n=[],r=/\r?\n|\r/g;r.test(t);)n.push(r.lastIndex);return n.push(t.length+1),{toPoint:function(e){var t=-1;if(e>-1&&e<n[n.length-1])for(;++t<n.length;)if(n[t]>e)return{line:t+1,column:e-(n[t-1]||0)+1,offset:e};return{line:void 0,column:void 0,offset:void 0}},toOffset:function(e){var t,r=e&&e.line,i=e&&e.column;return"number"!=typeof r||"number"!=typeof i||Number.isNaN(r)||Number.isNaN(i)||!(r-1 in n)||(t=(n[r-2]||0)+i-1||0),t>-1&&t<n[n.length-1]?t:-1}}}(t);r.position={start:n.toPoint(0),end:n.toPoint(t.length)}}return r}function c0(e,t,n){const r="svg"===e.schema.space?r0:n0;let i=-1;const a={};for(;++i<t.attrs.length;){const e=t.attrs[i];a[(e.prefix?e.prefix+":":"")+e.name]=e.value}const o=r(t.tagName,a,n);if("template"===o.tagName&&"content"in t){const n=t.sourceCodeLocation,r=n&&n.startTag&&u0(n.startTag),i=n&&n.endTag&&u0(n.endTag),a=s0(e,t.content);r&&i&&e.file&&(a.position={start:r.end,end:i.start}),o.content=a}return o}function u0(e){const t=h0({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=h0({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:null}function h0(e){return e.line&&e.column?e:null}const p0=i0,d0=IW,f0={}.hasOwnProperty,m0=SV("root"),g0=SV("element"),v0=SV("text");function y0(e,t,n){if("function"!=typeof e)throw new TypeError("h is not a function");const r=function(e){const t=e("div",{});return Boolean(t&&("_owner"in t||"_store"in t)&&(void 0===t.key||null===t.key))}(e),i=function(e){const t=e("div",{});return Boolean(t&&t.context&&t.context._isVue)}(e),a=function(e){return"VirtualNode"===e("div",{}).type}(e);let o,s;if("string"==typeof n||"boolean"==typeof n?(o=n,n={}):(n||(n={}),o=n.prefix),m0(t))s=1===t.children.length&&g0(t.children[0])?t.children[0]:{type:"element",tagName:"div",properties:{},children:t.children};else{if(!g0(t))throw new Error("Expected root or element, not `"+(t&&t.type||t)+"`");s=t}return x0(e,s,{schema:"svg"===n.space?NW:MW,prefix:null==o?r||i||a?"h-":null:"string"==typeof o?o:o?"h-":null,key:0,react:r,vue:i,vdom:a,hyperscript:b0(e)})}function x0(e,t,n){const r=n.schema;let i=r,a=t.tagName;const o={},s=[];let l,c=-1;for(l in"html"===r.space&&"svg"===a.toLowerCase()&&(i=NW,n.schema=i),t.properties)t.properties&&f0.call(t.properties,l)&&E0(o,l,t.properties[l],n,a);if(n.vdom&&("html"===i.space?a=a.toUpperCase():i.space&&(o.namespace=p0[i.space])),n.prefix&&(n.key++,o.key=n.prefix+n.key),t.children)for(;++c<t.children.length;){const r=t.children[c];g0(r)?s.push(x0(e,r,n)):v0(r)&&s.push(r.value)}return n.schema=r,s.length>0?e.call(t,a,o,s):e.call(t,a,o)}function E0(e,t,n,r,i){const a=_W(r.schema,t);let o;null==n||"number"==typeof n&&Number.isNaN(n)||!1===n&&(r.vue||r.vdom||r.hyperscript)||!n&&a.boolean&&(r.vue||r.vdom||r.hyperscript)||(Array.isArray(n)&&(n=a.commaSeparated?gX(n):fX(n)),a.boolean&&r.hyperscript&&(n=""),"style"===a.property&&"string"==typeof n&&(r.react||r.vue||r.vdom)&&(n=function(e,t){const n={};try{_X(e,((e,t)=>{"-ms-"===e.slice(0,4)&&(e="ms-"+e.slice(4)),n[e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))]=t}))}catch(r){throw r.message=t+"[style]"+r.message.slice("undefined".length),r}return n}(n,i)),r.vue?"style"!==a.property&&(o="attrs"):a.mustUseProperty||(r.vdom?"style"!==a.property&&(o="attributes"):r.hyperscript&&(o="attrs")),o?e[o]=Object.assign(e[o]||{},{[a.attribute]:n}):a.space&&r.react?e[d0[a.property]||a.property]=n:e[a.attribute]=n)}function b0(e){return"context"in e&&"cleanup"in e}var C0={}.hasOwnProperty;function T0(e,t){var n=t||{};function r(t){var n=r.invalid,i=r.handlers;if(t&&C0.call(t,e)&&(n=C0.call(i,t[e])?i[t[e]]:r.unknown),n)return n.apply(this,arguments)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}var w0={}.hasOwnProperty,S0=T0("type",{handlers:{root:function(e,t){var n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=k0(e.children,n,t),_0(e,n)},element:function(e,t){var n=t.space;return y0((function(n,r){var i,a,o,s,l,c=[];for(o in r)w0.call(r,o)&&!1!==r[o]&&((i=_W(t,o)).boolean&&!r[o]||(a={name:o,value:!0===r[o]?"":String(r[o])},i.space&&"html"!==i.space&&"svg"!==i.space&&((s=o.indexOf(":"))<0?a.prefix="":(a.name=o.slice(s+1),a.prefix=o.slice(0,s)),a.namespace=i0[i.space]),c.push(a)));"html"===t.space&&"svg"===e.tagName&&(t=NW);(l=_0(e,{nodeName:n,tagName:n,attrs:c,namespaceURI:i0[t.space],childNodes:[],parentNode:void 0})).childNodes=k0(e.children,l,t),"template"===n&&(l.content=function(e,t){var n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=k0(e.children,n,t),_0(e,n)}(e.content,t));return l}),Object.assign({},e,{children:[]}),{space:n})},text:function(e){return _0(e,{nodeName:"#text",value:e.value,parentNode:void 0})},comment:function(e){return _0(e,{nodeName:"#comment",data:e.value,parentNode:void 0})},doctype:function(e){return _0(e,{nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:void 0})}}});function k0(e,t,n){var r,i=-1,a=[];if(e)for(;++i<e.length;)(r=S0(e[i],n)).parentNode=t,a.push(r);return a}function _0(e,t){var n=e.position;return n&&n.start&&n.end&&(t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset}),t}const A0=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"],O0={sourceCodeLocationInfo:!0,scriptingEnabled:!1},I0=function(e,t,n){let r=-1;const i=new ZJ(O0),a=T0("type",{handlers:{root:function(e){f(e.children)},element:function(e){v(),i._processToken(M0(e),i0.html),f(e.children),A0.includes(e.tagName)||(v(),i._processToken(function(e){const t=Object.assign(L0(e));return t.startTag=Object.assign({},t),{type:"END_TAG_TOKEN",tagName:e.tagName,attrs:[],location:t}}(e)))},text:function(e){v(),i._processToken({type:"CHARACTER_TOKEN",chars:e.value,location:L0(e)})},comment:m,doctype:function(e){v(),i._processToken({type:"DOCTYPE_TOKEN",name:"html",forceQuirks:!1,publicId:"",systemId:"",location:L0(e)})},raw:function(e){const t=IV(e),n=t.line||1,r=t.column||1,a=t.offset||0;if(!u)throw new Error("Expected `preprocessor`");if(!c)throw new Error("Expected `tokenizer`");if(!h)throw new Error("Expected `posTracker`");if(!p)throw new Error("Expected `locationTracker`");u.html=void 0,u.pos=-1,u.lastGapPos=-1,u.lastCharPos=-1,u.gapStack=[],u.skipNextNewLine=!1,u.lastChunkWritten=!1,u.endOfChunkHit=!1,h.isEol=!1,h.lineStartPos=1-r,h.droppedBufferSize=a,h.offset=0,h.col=1,h.line=n,p.currentAttrLocation=void 0,p.ctLoc=L0(e),c.write(e.value),i._runParsingLoop(null),("NAMED_CHARACTER_REFERENCE_STATE"===c.state||"NUMERIC_CHARACTER_REFERENCE_END_STATE"===c.state)&&(u.lastChunkWritten=!0,c[c.state](c._consume()));const o=c.currentCharacterToken;o&&(o.location.endLine=h.line,o.location.endCol=h.col+1,o.location.endOffset=h.offset+1,i._processToken(o))}},unknown:F0});let o,c,u,h,p;if(function(e){return Boolean(e&&!("message"in e&&"messages"in e))}(t)&&(n=t,t=void 0),n&&n.passThrough)for(;++r<n.passThrough.length;)a.handlers[n.passThrough[r]]=g;const d=function(e,t={}){let n,r;return function(e){return"messages"in e}(t)?(r=t,n={}):(r=t.file,n=t),s0({schema:"svg"===n.space?NW:MW,file:r,verbose:n.verbose,location:!1},e)}(function(e){const t="root"===e.type?e.children[0]:e;return Boolean(t&&("doctype"===t.type||"element"===t.type&&"html"===t.tagName))}(e)?function(){const t=i.treeAdapter.createDocument();if(i._bootstrap(t,void 0),c=i.tokenizer,!c)throw new Error("Expected `tokenizer`");return u=c.preprocessor,p=c.__mixins[0],h=p.posTracker,a(e),t}():function(){const t={nodeName:"template",tagName:"template",attrs:[],namespaceURI:i0.html,childNodes:[]},n={nodeName:"documentmock",tagName:"documentmock",attrs:[],namespaceURI:i0.html,childNodes:[]},r={nodeName:"#document-fragment",childNodes:[]};if(i._bootstrap(n,t),i._pushTmplInsertionMode("IN_TEMPLATE_MODE"),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),c=i.tokenizer,!c)throw new Error("Expected `tokenizer`");return u=c.preprocessor,p=c.__mixins[0],h=p.posTracker,a(e),i._adoptNodes(n.childNodes[0],r),r}(),t);return o&&OV(d,"comment",((e,t,n)=>{const r=e;if(r.value.stitch&&null!==n&&null!==t)return n.children[t]=r.value.stitch,t})),"root"!==e.type&&"root"===d.type&&1===d.children.length?d.children[0]:d;function f(e){let t=-1;if(e)for(;++t<e.length;)a(e[t])}function m(e){v(),i._processToken({type:"COMMENT_TOKEN",data:e.value,location:L0(e)})}function g(e){let r;o=!0,r="children"in e?l(s({},e),{children:I0({type:"root",children:e.children},t,n).children}):s({},e),m({type:"comment",value:{stitch:r}})}function v(){if(!c)throw new Error("Expected `tokenizer`");c.tokenQueue=[],c.state="DATA_STATE",c.returnState="",c.charRefCode=-1,c.tempBuff=[],c.lastStartTagName="",c.consumedAfterSnapshot=-1,c.active=!1,c.currentCharacterToken=void 0,c.currentToken=void 0,c.currentAttr=void 0}};function M0(e){const t=Object.assign(L0(e));return t.startTag=Object.assign({},t),{type:"START_TAG_TOKEN",tagName:e.tagName,selfClosing:!1,attrs:N0(e),location:t}}function N0(e){return(t={tagName:e.tagName,type:"element",properties:e.properties,children:[]},S0(t,"svg"===n?NW:MW)).attrs;var t,n}function F0(e){throw new Error("Cannot compile `"+e.type+"` node")}function L0(e){const t=IV(e),n=MV(e);return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function P0(e={}){return(t,n)=>I0(t,n,e)}const R0=({content:e})=>d.createElement("div",{className:"markdown-wrapper"},d.createElement(DX,{remarkPlugins:[GQ],children:e,rehypePlugins:[P0]})),{Option:D0}=It,B0=({expression:e,index:t,data:n,onChange:r,cluster:i,range:a,id:o,varsMap:s})=>{const[l,c]=f.exports.useState([]),[u,h]=f.exports.useState(),[p,m]=f.exports.useState(a);f.exports.useState();const[g,v]=f.exports.useState(i),{definition:y,multi:x,allOption:E,name:b,reg:C}=e,[T,w]=f.exports.useState(E),[S,k]=f.exports.useState(x),_=j0(b,o),A=V0(y);f.exports.useEffect((()=>{if(e&&(!A||A.every((e=>s[e])))){var l=U0(y,{var:n},t,o);u===l&&g===i&&p===a&&S===x&&T===E||(h(l),m(a),v(i),w(E),k(x),$0(l,a).then((e=>{const n=e.filter((e=>!!e&&(!C||!W0(C)||W0(C).test(e))));if(c(n),e.length>0)if(_)if(x&&_.length>0){let e;Array.isArray(_)?(e=1===_.length&&"all"===_[0]?_:_.filter((e=>n.includes(e))),r(t,e.length>0?e:[n[0]],n)):r(t,n.includes(_)?[_]:[n[0]],n)}else Array.isArray(_)?r(t,n.includes(_[0])?_[0]:n[0],n):r(t,n.includes(_)?_:n[0],n);else r(t,x?[n[0]]:n[0],n);else u&&l&&u!==l&&r(t,x?[]:"",n)})))}}),[e,n,t,i,a,_,x,E]);return d.createElement("div",null,d.createElement("div",{className:"tag-content-close-item"},d.createElement("div",{className:"tag-content-close-item-tagName"},b),d.createElement(It,{mode:x?"tags":void 0,style:{width:"180px"},onChange:e=>{if(x&&E&&e.includes("all"))r(t,["all"],l);else if(x&&!E){let n=e.indexOf("all");-1!==n&&e.splice(n,1),r(t,e,l)}else r(t,e,l)},defaultActiveFirstOption:!1,showSearch:!0,value:_,dropdownClassName:"overflow-586"},E&&d.createElement(D0,{key:"all",value:"all"},"all"),l&&l.map((e=>d.createElement(D0,{key:e,value:e},e))))))};function z0(e){const{visible:t,onChange:n,value:r,range:i,id:a}=e,{t:o}=Fr(),[u]=Et.useForm();f.exports.useEffect((()=>{r&&u.setFieldsValue(r)}),[r]);const h=e=>{const t=u.getFieldValue(["var",e,"reg"]),n=u.getFieldValue(["var",e,"definition"]);if((!t||new RegExp("^/(.*?)/(g?i?m?y?)$").test(t))&&n){const o=u.getFieldsValue();var r=U0(n,o,e,a);$0(r,i).then((n=>{const r=n.filter((e=>!t||!W0(t)||W0(t).test(e)));r.length>0&&H0(o.var[e].name,r[0],a)}))}};return d.createElement(Ot,{title:o("大盘变量"),width:950,visible:t,onOk:async()=>{await u.validateFields();const e=u.getFieldsValue();n(e)},onCancel:()=>{n(void 0)},wrapClassName:"variable-modal"},d.createElement(Et,{name:"dynamic_form_nest_item",onFinish:e=>{console.log("Received values of form:",e)},autoComplete:"off",preserve:!1,form:u},d.createElement(St,{gutter:[6,6],className:"tag-header"},d.createElement(kt,{span:4},o("变量名")),d.createElement(kt,{span:6},o("变量定义"),d.createElement(ye,{style:{marginLeft:5},onClick:()=>window.open("https://grafana.com/docs/grafana/latest/datasources/prometheus/#query-variable","_blank")})),d.createElement(kt,{span:6},o("筛值正则")),d.createElement(kt,{span:2},o("Multi")),d.createElement(kt,{span:2},o("All Option")),d.createElement(kt,{span:4},o("操作"))),d.createElement(Et.List,{name:"var"},((e,{add:t,remove:n,move:r})=>d.createElement(d.Fragment,null,e.map((i=>{var a=i,{key:p,name:f,fieldKey:m}=a,g=c(a,["key","name","fieldKey"]);return d.createElement(St,{gutter:[6,6],className:"tag-content-item",key:p},d.createElement(kt,{span:4},d.createElement(Et.Item,l(s({},g),{name:[f,"name"],fieldKey:[m,"name"],rules:[{required:!0,message:o("请输入变量名")},{pattern:/^[0-9a-zA-Z_]+$/,message:o("仅支持数字和字符下划线")}]}),d.createElement(bt,null))),d.createElement(kt,{span:6},d.createElement(Et.Item,l(s({},g),{name:[f,"definition"],fieldKey:[m,"definition"],rules:[{required:!0,message:o("请输入变量定义")},{validator:(e,t)=>/^\s*label_values.+,\s*\$.+/.test(t)?Promise.reject(new Error("label_values表达式的label不允许使用变量")):Promise.resolve()}]}),d.createElement(bt,{onBlur:e=>h(f)}))),d.createElement(kt,{span:6},d.createElement(Et.Item,l(s({},g),{name:[f,"reg"],fieldKey:[m,"reg"],rules:[{pattern:new RegExp("^/(.*?)/(g?i?m?y?)$"),message:o("格式不对")}]}),d.createElement(bt,{placeholder:"/*.hna/",onBlur:e=>h(f)}))),d.createElement(kt,{span:2},d.createElement(Et.Item,l(s({},g),{name:[f,"multi"],fieldKey:[m,"multi"],valuePropName:"checked"}),d.createElement(Ft,null))),d.createElement(kt,{span:2},d.createElement(Et.Item,{shouldUpdate:!0,style:{margin:0}},(()=>u.getFieldValue(["var",f,"multi"])&&d.createElement(Et.Item,l(s({},g),{name:[f,"allOption"],fieldKey:[m,"allOption"],valuePropName:"checked"}),d.createElement(Ft,null))))),d.createElement(kt,{span:4},d.createElement(yt,{type:"link",size:"small",onClick:()=>r(f,f+1),disabled:f===e.length-1},d.createElement(xe,null)),d.createElement(yt,{type:"link",size:"small",onClick:()=>r(f,f-1),disabled:0===f},d.createElement(Ee,null)),d.createElement(yt,{type:"link",size:"small",onClick:()=>{const e=u.getFieldValue(["var",f]);t(l(s({},e),{name:"copy_of_"+e.name}))}},d.createElement(H,null)),d.createElement(yt,{type:"link",size:"small",onClick:()=>n(f)},d.createElement(be,null))))})),d.createElement(Et.Item,null,d.createElement(yt,{type:"dashed",onClick:()=>t(),block:!0,icon:d.createElement(Ce,null)},o("新增变量"))))))))}function H0(e,t,n,r=!1){void 0!==t&&(localStorage.setItem(`dashboard_${n}_${e}`,JSON.stringify(t)),r&&function(e,t){const{protocol:n,host:r,pathname:i,search:a}=window.location;var o=new URLSearchParams(a);o.set(e,t);var s=`${n}//${r}${i}?${o.toString()}`;window.history.replaceState({path:s},"",s)}(e,JSON.stringify(t)))}function j0(e,t){const{search:n}=window.location;const r=new URLSearchParams(n).get(e)||localStorage.getItem(`dashboard_${t}_${e}`);return r?JSON.parse(r):null}var G0=d.forwardRef((({isOpen:e=!1,value:t,onChange:n,editable:r=!0,cluster:i,range:a,id:o,onOpenFire:c},u)=>{var h;const{t:p}=Fr(),[m,g]=f.exports.useState(e),[v,y]=f.exports.useState({}),[x,E]=f.exports.useState(),[b,C]=f.exports.useState();f.exports.useEffect((()=>{t&&(E(t),C(t))}),[JSON.stringify(t)]),f.exports.useEffect((()=>{x&&b&&(null==b?void 0:b.var.every((e=>!!e.options)))&&n(x,!1,b)}),[b]);const T=(e,t,n)=>{const r=x?{var:S.cloneDeep(x.var)}:{var:[]};H0(r.var[e].name,t,o,!0),y((n=>l(s({},n),{[`$${r.var[e].name}`]:t}))),E(r),C((t=>{let r=t?{var:S.cloneDeep(t.var)}:{var:[]};return n&&r&&(r.var[e].options=n),r}))};return d.createElement("div",{className:"tag-area"},d.createElement("div",{className:R("tag-content","tag-content-close")},(null==b?void 0:b.var)&&(null==b?void 0:b.var.length)>0&&d.createElement(d.Fragment,null,b.var.map(((e,t)=>d.createElement(B0,{expression:e,index:t,data:b.var,onChange:T,cluster:i,range:a,key:t,id:o,varsMap:v}))),r&&d.createElement(Te,{className:"icon",onClick:()=>{g(!0),c&&c()}})),(!x||0===(null==(h=null==x?void 0:x.var)?void 0:h.length))&&r&&d.createElement("div",{className:"add-variable-tips",onClick:()=>{g(!0),c&&c()}},p("添加大盘变量"))),d.createElement(z0,{visible:m,onChange:e=>{e&&(n(e,!0),E(e)),g(!1)},value:x,range:a,id:o}))}));f.exports.createContext({}),ei.Common;const $0=(e,t)=>{const{start:n,end:r}=nu(t);if("label_names()"===e)return(i={start:n,end:r},ii("/api/n9e/prometheus/api/v1/labels",{method:Kr.Get,params:s({},i)})).then((e=>e.data));if(e.startsWith("label_values(")){if(e.includes(",")){let t=e.substring("label_values(".length,e.length-1).split(",");const i=t.pop();return function(e){return ii("/api/n9e/prometheus/api/v1/series",{method:Kr.Get,params:s({},e)})}({"match[]":t.join(", ").trim(),start:n,end:r}).then((e=>Array.from(new Set(e.data.map((e=>e[i.trim()]))))))}return function(e,t){return ii(`/api/n9e/prometheus/api/v1/label/${e}/values`,{method:Kr.Get,params:s({},t)})}(e.substring("label_values(".length,e.length-1),{start:n,end:r}).then((e=>e.data))}if(e.startsWith("metrics(")){const t=e.substring("metrics(".length,e.length-1);return function(e={}){return ii("/api/n9e/prometheus/api/v1/label/__name__/values",{method:Kr.Get,params:s({},e)})}({start:n,end:r}).then((e=>e.data.filter((e=>e.includes(t)))))}if(e.startsWith("query_result(")){return function(e){return ii("/api/n9e/prometheus/api/v1/query",{method:Kr.Get,params:s({},e)})}({query:e.substring("query_result(".length,e.length-1),start:n,end:r}).then((e=>e.data.result.map((({metric:e,value:t})=>`${e.__name__||""} {${Object.keys(e).filter((e=>"__name__"!==e)).map((t=>`${t}="${e[t]}"`))}} ${t.join(" ")}`))))}var i;return Promise.resolve(e.length>0?e.split(",").map((e=>e.trim())):"")},Y0=(e,t,n)=>{let r=e;for(;r.includes(t);)r=r.replace(t,n);return r},U0=(e,t,n,r)=>{var i=e;const a=i.match(/\$[0-9a-zA-Z_]+/g);if(a&&a.length>0)for(let o=0;o<n;o++){const{name:e,options:n,reg:s}=t.var[o],l=j0(e,r);a.includes("$"+e)&&l&&(Array.isArray(l)?i=l.includes("all")&&n?Y0(i,"$"+e,`(${n.filter((e=>!s||!W0(s)||W0(s).test(e))).join("|")})`):Y0(i,"$"+e,`(${l.join("|")})`):"string"==typeof l&&(i=Y0(i,"$"+e,l)))}return i},V0=e=>e.match(/\$[0-9a-zA-Z\._\-]+/g);function W0(e){if(!function(e){return!!e&&"/"===e[0]}(e))return new RegExp(`^${e}$`);const t=e.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));return!!t&&new RegExp(t[1],t[2])}function X0(e,t){let n=S.map((r=e,Array.from(r.matchAll(/{{([\s0-9a-zA-Z_]+?)}}/g)).map((e=>e.length>0?e[1]:e[0]))),S.trim);var r,i=e;return n.forEach((e=>{const n=new RegExp(`{{\\s?${e}\\s?}}`,"g");i=i.replace(n,t[e]?t[e]:"")})),i}const q0=(e,t)=>{let n=e.__name__||"";return S.forEach(S.omit(e,"__name__"),((e,t)=>{n+=` ${t}: ${e}`})),S.trim(n)};var K0=d.memo((function(e){const{dashboardId:t,id:n,time:r,refreshFlag:i,step:a,type:o,variableConfig:c,isPreview:u,onCloneClick:h,onShareClick:p,onEditClick:m,onDeleteClick:g}=e,v=S.cloneDeep(e.values),y=f.exports.useRef(null),[x]=we(y),{series:E,loading:b}=function(e){const{id:t,dashboardId:n,time:r,refreshFlag:i,step:a,targets:o,variableConfig:c,inViewPort:u}=e,[h,p]=f.exports.useState([]),[d,m]=f.exports.useState(!1),g=S.map(null==c?void 0:c.var,(e=>j0(e.name,n))),v=f.exports.useRef(!1),y=()=>{let{start:e,end:i}=nu(r),s=a;a||(s=Math.max(Math.floor((i-e)/250),1));const l=[],u=[];S.forEach(o,(r=>{if(r.time){const{start:t,end:n}=nu(r.time);e=t,i=n}r.step&&(s=r.step);const a=c?U0(r.expr,c,c.var.length,n):r.expr,o=`${t}-${r.expr}`;a&&u.push(vu({start:e-e%s,end:i-i%s,step:s,query:a},o).then((e=>{var t;return{result:null==(t=null==e?void 0:e.data)?void 0:t.result,expr:r.expr,refId:r.refId}})))})),m(!0),Promise.all(u).then((e=>{S.forEach(e,(e=>{const t=S.find(o,(t=>t.expr===e.expr));S.forEach(e.result,(n=>{l.push({id:S.uniqueId("series_"),refId:e.refId,name:(null==t?void 0:t.legend)?X0(null==t?void 0:t.legend,n.metric):q0(n.metric,e.expr),metric:n.metric,expr:e.expr,data:n.values})}))})),p(l)})).finally((()=>{m(!1)}))};return f.exports.useEffect((()=>{u?y():v.current=!1}),[JSON.stringify(S.map(o,"expr")),JSON.stringify(r),i,a,JSON.stringify(c),JSON.stringify(g)]),f.exports.useEffect((()=>{u&&!v.current&&(v.current=!0,y())}),[u]),f.exports.useEffect((()=>{const e=S.map(h,(e=>{const t=S.find(o,(t=>t.expr===e.expr));return l(s({},e),{name:(null==t?void 0:t.legend)?X0(null==t?void 0:t.legend,e.metric):q0(e.metric,e.expr)})}));p(e)}),[JSON.stringify(S.map(o,"legend"))]),{series:h,loading:d}}({id:n,dashboardId:t,time:r,refreshFlag:i,step:a,targets:v.targets,variableConfig:c,inViewPort:u||x}),C=v.description||!S.isEmpty(v.links);if(S.isEmpty(v))return null;"string"==typeof S.get(v,"custom.colorRange")&&S.set(v,"custom.colorRange",S.split(S.get(v,"custom.colorRange"),","));const T={values:v,series:E},w={timeseries:()=>d.createElement(yh,s({},T)),stat:()=>d.createElement(Eh,s({},T)),table:()=>d.createElement(Oh,s({},T)),pie:()=>d.createElement(P$,s({},T)),hexbin:()=>d.createElement(W$,s({},T))};return d.createElement("div",{className:"renderer-container",ref:y},d.createElement("div",{className:"renderer-header graph-header dashboards-panels-item-drag-handle"},C?d.createElement(Ct,{placement:"rightTop",overlayInnerStyle:{width:300},title:d.createElement("div",null,d.createElement(R0,{content:v.description}),d.createElement("div",null,S.map(v.links,((e,t)=>d.createElement("div",{key:t,style:{marginTop:8}},d.createElement("a",{href:e.url,target:e.targetBlank?"_blank":"_self"},e.title))))))},d.createElement("div",{className:"renderer-header-desc"},d.createElement("span",{className:"renderer-header-info-corner-inner"}),v.description?d.createElement(Se,null):d.createElement(ke,null))):null,d.createElement("div",{className:"renderer-header-content"},u?d.createElement("div",{className:"renderer-header-title"},v.name):d.createElement(Tt,{trigger:["click"],placement:"bottomCenter",overlayStyle:{minWidth:"100px"},overlay:d.createElement(vt,null,u?null:d.createElement(d.Fragment,null,d.createElement(vt.Item,{onClick:m,key:"0"},d.createElement(P,{style:{marginRight:8}}),"编辑"),d.createElement(vt.Item,{onClick:h,key:"1"},d.createElement(H,{style:{marginRight:8}}),"克隆"),d.createElement(vt.Item,{onClick:p,key:"2"},d.createElement(he,{style:{marginRight:8}}),"分享"),d.createElement(vt.Item,{onClick:g,key:"3"},d.createElement(be,{style:{marginRight:8}}),"删除")))},d.createElement("div",{className:"renderer-header-title"},v.name,d.createElement(M,{className:"renderer-header-arrow"})))),d.createElement("div",{className:"renderer-header-loading"},b&&d.createElement(ue,{spin:!0}))),d.createElement("div",{className:"renderer-body",style:{height:"calc(100% - 36px)"}},w[o]?w[o]():`无效的图表类型 ${o}`))}));function Q0(){var e;const{t:t}=Fr(),{ids:n}=q(),[r,i]=f.exports.useState([]),[a,o]=f.exports.useState({num:1,unit:"hour",description:t("小时")}),[c,u]=f.exports.useState(null),[h,p]=f.exports.useState(uu.Line),{clusters:m}=ni((e=>e.common)),[g,v]=f.exports.useState("");f.exports.useEffect((()=>{y()}),[]);const y=()=>{(function(e){return ii(`/api/n9e/share-charts?ids=${e}`,{method:Kr.Get})})(n).then((e=>{let t=e.dat.filter((e=>!!e)).map((e=>l(s({},JSON.parse(e.configs)),{ref:d.createRef()})));const n=t[0].curCluster;p(t[0].dataProps.chartType||uu.Line),u(t[0].dataProps.step),o(t[0].dataProps.range),v(n),localStorage.setItem("curCluster",n),i(t)}))},E=d.createElement(vt,{selectedKeys:[g]},m.map((e=>d.createElement(vt.Item,{key:e,onClick:t=>{v(e),localStorage.setItem("curCluster",e),r.forEach((e=>e.ref.current.refresh()))}},e))));return d.createElement("div",{className:"chart-container"},r&&r.length>0&&g?d.createElement(d.Fragment,null,d.createElement("div",{className:"chart-container-header"},d.createElement("div",{className:"left"}),d.createElement("div",{className:"right"},d.createElement(Pt,null,d.createElement("div",null,d.createElement("span",null,"集群："),d.createElement(Tt,{overlay:E},d.createElement(yt,null,g," ",d.createElement(M,null)))),d.createElement(ru,{onChange:e=>{(tu(e)?S.isEqual(e,a):e.num===a.num&&e.unit===a.unit)||o(e)},value:r[0].dataProps.range}),d.createElement(au,{onChange:e=>u(e),initialValue:c}),!Ec.valid(null==(e=r[0].dataProps)?void 0:e.version)&&d.createElement(Dt.Group,{options:[{label:d.createElement(x,null),value:uu.Line},{label:d.createElement(_e,null),value:uu.StackArea}],onChange:e=>{e.preventDefault(),p(e.target.value)},value:h,optionType:"button",buttonStyle:"solid"})))),r.map(((e,t)=>{var n,r;if(Ec.valid(null==(n=e.dataProps)?void 0:n.version))return d.createElement("div",{style:{height:400,border:"1px solid #efefef"}},d.createElement(K0,{dashboardId:e.id,key:t,time:a,step:c,type:null==(r=e.dataProps)?void 0:r.type,values:e.dataProps,isPreview:!0}));const i=l(s({},e.dataProps),{range:a,step:c,chartType:h,title:d.createElement(Ct,{placement:"bottomLeft",title:()=>{var t;return d.createElement("div",null,null==(t=e.dataProps.promqls)?void 0:t.map((e=>d.createElement("div",null,e.current?e.current:e))))}},d.createElement(yt,{size:"small",type:"link"},"promql 语句"))});return d.createElement(Ju,{ref:e.ref,key:t,data:s({},i),graphConfigInnerVisible:!1,isShowShare:!1,highLevelConfig:e.highLevelConfig||{}})}))):d.createElement("h2",{className:"holder"},d.createElement(Ae,{style:{fontSize:"30px"}}),d.createElement("span",null,t("该分享链接无图表数据"))))}function Z0(e){return function(t){const n=document.createElement("div");function r(){K.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),K.render(d.createElement(e,s({},i)),n),{destroy:r}}}var J0=Z0((function(e){const{visible:t,initialValues:n}=e,[r]=Et.useForm();return d.createElement(Ot,{width:800,title:"大盘链接设置",style:{top:10,padding:0},visible:t,closable:!1,onOk:()=>{r.validateFields().then((t=>{e.onOk(t.links),e.destroy()}))},onCancel:()=>{e.destroy()},bodyStyle:{padding:"10px 24px 24px 24px"}},d.createElement(Et,{layout:"vertical",initialValues:{links:n},form:r},d.createElement(Et.List,{name:"links"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(Pt,{key:r,style:{alignItems:"flex-start"}},d.createElement(Et.Item,l(s({},a),{name:[i,"title"],rules:[{required:!0,message:"链接名称"}]}),d.createElement(bt,{placeholder:"链接名称",style:{width:192}})),d.createElement(Et.Item,l(s({},a),{name:[i,"url"],rules:[{required:!0,message:"链接地址"}]}),d.createElement(bt,{style:{width:460},placeholder:"链接地址"})),d.createElement(Ct,{title:"是否新窗口打开"},d.createElement(Et.Item,l(s({},a),{name:[i,"targetBlank"],valuePropName:"checked"}),d.createElement(Ft,null))),d.createElement(yt,{icon:d.createElement(be,null),onClick:()=>{n(i)}}))})),d.createElement(yt,{type:"dashed",style:{width:"100%",marginBottom:10},onClick:()=>{t({})}},d.createElement(Ce,null)," 新增链接"))))))}));function e9(e){const{editable:t=!0,value:n}=e;return d.createElement(Pt,{align:"baseline"},d.createElement(Tt,{overlay:d.createElement(vt,null,S.isEmpty(n)?d.createElement("div",{style:{textAlign:"center"}},"暂无数据"):S.map(n,((e,t)=>d.createElement(vt.Item,{key:t},d.createElement("a",{href:e.url,target:e.targetBlank?"_blank":"_self"},e.title)))))},d.createElement(yt,null,"大盘链接 ",d.createElement(M,null))),t&&d.createElement(Te,{style:{fontSize:18},className:"icon",onClick:()=>{J0({initialValues:n,onOk:t=>{e.onChange(t)}})}}))}function t9(e){return S.map(e,(e=>l(s({},e.layout),{i:S.toString(e.layout.i),isResizable:"row"!==e.type})))}function n9(e){return e.sort(((e,t)=>e.layout.y===t.layout.y?e.layout.x-t.layout.x:e.layout.y-t.layout.y))}function r9(e,t){return S.map(e,(e=>{const n=s({},e),r=S.find(t,{i:n.layout.i});return r&&(n.layout=S.pick(r,["h","w","x","y","i","isResizable"])),n}))}function i9(e,t){return S.findIndex(e,{id:t})}function a9(e,t){const n=[];for(let r=i9(e,t)+1;r<e.length;r++){const t=e[r];if("row"===t.type)break;n.push(t)}return n}function o9(e,t){var n;let r=S.cloneDeep(e);const i=i9(r,t.id),a=t.panels;if(a&&a.length>0){const e=(null!=(n=a[0].layout.y)?n:t.layout.y)-(t.layout.y+t.layout.h);let o=i+1,s=t.layout.y;for(const n of a)null!=n.layout.y||(n.layout.y=t.layout.y),n.layout.y-=e,r.splice(o,0,n),o+=1,s=Math.max(s,n.layout.y+n.layout.h);const l=s-t.layout.y-1;for(let t=o;t<r.length;t++)r[t].layout.y+=l;r=S.unionBy(r,"id");S.find(r,{id:t.id}).panels=[]}return r}function s9(e,t){let n=S.cloneDeep(e);const r=a9(n,t.id);if(r.length>0){n=S.filter(n,(e=>!S.find(r,{id:e.id})));S.find(n,{id:t.id}).panels=r}return n}function l9(e,t){return S.map(e,(e=>e.id===t.id?t:e))}function c9(e,t,n){const r="row"===n?24:12,i="row"===n?1:4,a=l(s({},t),{layout:{x:0,y:0,w:r,h:i,i:t.id}}),o=S.map(e,(e=>l(s({},e),{layout:l(s({},e.layout),{y:e.layout.y+i})})));return S.concat(a,o)}function u9(e,t,n){const r=function(e,t){let n;for(let r=i9(e,t)+1;r<e.length;r++){const t=e[r];if("row"===t.type){n=t;break}}return n}(e,t);let i;(null==r?void 0:r.id)&&(i=i9(e,null==r?void 0:r.id));const a=function(e,t){const n=a9(e,t),r=S.find(e,{id:t});let i=r.layout.y+r.layout.h;return S.forEach(n,(e=>{e.layout.y+e.layout.h>i&&(i=e.layout.y+e.layout.h)})),i}(e,t),o=l(s({},n),{layout:{x:0,y:a,w:12,h:4,i:n.id}}),c=S.map(e,((e,t)=>t>=i?l(s({},e),{layout:l(s({},e.layout),{y:e.layout.y+4})}):e));return S.concat(o,c)}function h9(e,t){const n=Bc(e);return n.panels=t,JSON.stringify(n)}function p9(e){const{name:t,row:n,onToggle:r,onAddClick:i,onEditClick:a,onDeleteClick:o}=e,[c,u]=f.exports.useState(!1),[h,p]=f.exports.useState(),[m,g]=f.exports.useState(!1);return d.createElement("div",{className:"dashboards-panels-row"},d.createElement("div",{className:"dashboards-panels-row-name",onClick:()=>{r()}},n.collapsed?d.createElement(M,null):d.createElement(L,null),d.createElement("span",{style:{paddingLeft:6}},t)),d.createElement(Pt,null,d.createElement(oh,{onClick:()=>{i()}}),d.createElement(P,{onClick:()=>{u(!0)}}),d.createElement(be,{onClick:()=>{g(!0)}}),!1===n.collapsed&&d.createElement(Oe,{className:"dashboards-panels-item-drag-handle"})),d.createElement(Ot,{title:"编辑分组",visible:c,onCancel:()=>{u(!1)},onOk:()=>{a(l(s({},n),{name:h})),u(!1)}},d.createElement("div",null,"分组名称",d.createElement(bt,{value:h,onChange:e=>{p(e.target.value)},onPressEnter:()=>{a(l(s({},n),{name:h})),u(!1)}}))),d.createElement(Ot,{closable:!1,visible:m,onCancel:()=>{g(!1)},footer:[d.createElement(yt,{key:"cancel",onClick:()=>{g(!1)}},"取消"),d.createElement(yt,{key:"ok",type:"primary",onClick:()=>{o("self"),g(!1)}},"仅删除分组"),d.createElement(yt,{key:"all",type:"primary",danger:!0,onClick:()=>{o("withPanels"),g(!1)}},"删除分组和图表")]},d.createElement("div",null,d.createElement("h3",{style:{fontSize:16}},d.createElement(D,{style:{color:"#faad14",marginRight:10,fontSize:22,position:"relative",top:4}})," 删除分组"),d.createElement("div",{style:{marginLeft:38,fontSize:14}},"确定删除该分组吗？"))))}const d9=nn.theme({".cm-content":{padding:0},"&.cm-editor.cm-focused":{outline:"unset"},".cm-scroller":{overflow:"hidden",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono;",lineHeight:"unset"},".cm-matchingBracket":{color:"#000",backgroundColor:"#dedede",fontWeight:"bold",outline:"1px dashed transparent"},".cm-nonmatchingBracket":{borderColor:"red"},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{maxHeight:"350px",fontFamily:'"DejaVu Sans Mono", monospace',maxWidth:"unset"},"& > ul > li":{padding:"2px 1em 2px 3px",overflowY:"hidden"},minWidth:"30%"},".cm-completionDetail":{float:"right",color:"#999"},".cm-tooltip.cm-completionInfo":{marginTop:"-11px",padding:"10px",fontFamily:"'Open Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;",border:"none",minWidth:"250px",maxWidth:"min-content"},".cm-completionInfo.cm-completionInfo-right":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",left:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginLeft:"12px"},".cm-completionInfo.cm-completionInfo-left":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",right:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginRight:"12px"},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold",color:"#0066bf"},".cm-selectionMatch":{backgroundColor:"#e6f3ff"},".cm-diagnostic":{"&.cm-diagnostic-error":{borderLeft:"3px solid #e65013"}},".cm-completionIcon":{boxSizing:"content-box",fontSize:"16px",lineHeight:"1",marginRight:"10px",verticalAlign:"top","&:after":{content:"'\\ea88'"},fontFamily:"codicon",paddingRight:"0",opacity:"1",color:"#007acc"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\ea8c'"},color:"#652d90"},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\eb5f'"},color:"#007acc"},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\eb62'"},color:"#616161"},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'\\ea95'"},color:"#ee9d28"}});nn.theme({".cm-tooltip":{backgroundColor:"#f8f8f8",borderColor:"rgba(52, 79, 113, 0.2)"},".cm-tooltip.cm-tooltip-autocomplete":{"& li:hover":{backgroundColor:"#ddd"},"& > ul > li[aria-selected]":{backgroundColor:"#d6ebff",color:"unset"}},".cm-tooltip.cm-completionInfo":{backgroundColor:"#d6ebff"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#d6ebff"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#d6ebff"}},".cm-line":{"&::selection":{backgroundColor:"#add6ff"},"& > span::selection":{backgroundColor:"#add6ff"}}},{dark:!1}),nn.theme({".cm-content":{caretColor:"#fff"},".cm-tooltip.cm-completionInfo":{backgroundColor:"#333338"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#333338"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#333338"}},".cm-line":{"&::selection":{backgroundColor:"#767676"},"& > span::selection":{backgroundColor:"#767676"}}},{dark:!0});const f9=rn.define([{tag:an.name,color:"#000"},{tag:an.number,color:"#09885a"},{tag:an.string,color:"#a31515"},{tag:an.keyword,color:"#008080"},{tag:an.function(an.variableName),color:"#008080"},{tag:an.labelName,color:"#800000"},{tag:an.operator},{tag:an.modifier,color:"#008080"},{tag:an.paren},{tag:an.squareBracket},{tag:an.brace},{tag:an.invalid,color:"red"},{tag:an.comment,color:"#888",fontStyle:"italic"}]),m9=new on;var g9=d.forwardRef((({url:e,headers:t,value:n,onChange:r,executeQuery:i,readonly:a=!1},o)=>{const l=f.exports.useRef(null),c=f.exports.useRef(null),u=f.exports.useRef(i),h=f.exports.useRef(n||""),p={Authorization:`Bearer ${localStorage.getItem("access_token")||""}`};return f.exports.useEffect((()=>{u.current=i,m9.activateCompletion(!0).activateLinter(!0).setComplete({remote:{url:e,fetchFn:(e,n={})=>{var r;const i=null==(r=n.body)?void 0:r.toString();return fetch(e+(i?`?${i}`:""),{method:"Get",headers:new Headers(t?s(s({},p),t):p)})}}});if(null===c.current){if(!l.current)throw new Error("expected CodeMirror container element to exist");const e=sn.create({doc:n,extensions:[d9,ln(),cn(),sn.allowMultipleSelections.of(!0),un(),hn(),pn(),dn(),fn(),f9,nn.lineWrapping,mn.of([...gn,...vn,...yn,...xn,...En,...bn]),Cn("Expression (press Shift+Enter for newlines)"),m9.asExtension(),nn.editable.of(!a),mn.of([{key:"Escape",run:e=>(e.contentDOM.blur(),!1)}]),Tn.override(mn.of([{key:"Enter",run:e=>("function"==typeof u.current&&u.current(h.current),!0)},{key:"Shift-Enter",run:wn}])),nn.updateListener.of((e=>{if("function"==typeof r){const t=e.state.doc.toString();t!==h.current&&(h.current=t,r(t))}}))]}),t=new nn({state:e,parent:l.current});c.current=t,o&&(o.current=t),t.focus()}}),[r,JSON.stringify(t)]),f.exports.useEffect((()=>{if(h.current!==n){const e=h.current;h.current=n||"";const t=c.current;if(null===t)return;t.dispatch(t.state.update({changes:{from:0,to:(null==e?void 0:e.length)||0,insert:n}}))}}),[n]),d.createElement("div",{className:R({"ant-input":!0,readonly:a,"promql-input":!0}),onBlur:()=>{"function"==typeof r&&h.current!==n&&r(h.current)}},d.createElement("div",{className:"input-content",ref:l}))}));function v9(e){return d.createElement("div",{className:"n9e-collapse"},e.children)}const y9=function(e){const[t,n]=f.exports.useState(e.isActive||!0);return d.createElement("div",{className:R({"n9e-collapse-item":!0,"n9e-collapse-item-active":t,"n9e-collapse-item-inner":e.isInner})},d.createElement("div",{className:"n9e-collapse-header",onClick:()=>{n(!t)}},t?d.createElement(M,{className:"n9e-collapse-arrow"}):d.createElement(L,{className:"n9e-collapse-arrow"}),e.header,d.createElement("div",{className:"n9e-collapse-extra",onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},e.extra)),d.createElement("div",{className:R({"n9e-collapse-content":!0,"n9e-collapse-content-hidden":!t})},d.createElement("div",{className:"n9e-collapse-content-box"},e.children)))};function x9(){const e=["options","tooltip"];return d.createElement(y9,{header:"Tooltip"},d.createElement(St,{gutter:10},d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"模式",name:[...e,"mode"]},d.createElement(Dt.Group,{buttonStyle:"solid"},d.createElement(Dt.Button,{value:"single"},"single"),d.createElement(Dt.Button,{value:"all"},"all")))),d.createElement(kt,{span:12},d.createElement(Et.Item,{noStyle:!0,shouldUpdate:(t,n)=>S.get(t,[...e,"mode"])!==S.get(n,[...e,"mode"])},(({getFieldValue:t})=>"all"===t([...e,"mode"])?d.createElement(Et.Item,{label:"排序",name:[...e,"sort"]},d.createElement(Dt.Group,{buttonStyle:"solid"},d.createElement(Dt.Button,{value:"none"},"none"),d.createElement(Dt.Button,{value:"asc"},"asc"),d.createElement(Dt.Button,{value:"desc"},"desc"))):null)))))}function E9(){const e=["options","legend"];return d.createElement(y9,{header:"Legend"},d.createElement(St,null,d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"显示模式",name:[...e,"displayMode"]},d.createElement(Dt.Group,{buttonStyle:"solid"},d.createElement(Dt.Button,{value:"table"},"表格"),d.createElement(Dt.Button,{value:"list"},"列表"),d.createElement(Dt.Button,{value:"hidden"},"关闭")))),d.createElement(kt,{span:12},d.createElement(Et.Item,{noStyle:!0,shouldUpdate:(t,n)=>S.get(t,[...e,"displayMode"])!==S.get(n,[...e,"displayMode"])},(({getFieldValue:t})=>"list"===t([...e,"displayMode"])?d.createElement(Et.Item,{label:"位置",name:[...e,"placement"]},d.createElement(Dt.Group,{buttonStyle:"solid"},d.createElement(Dt.Button,{value:"bottom"},"bottom"),d.createElement(Dt.Button,{value:"right"},"right"))):null)))))}function b9(){const e=["custom"];return d.createElement(y9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:"绘制模式",name:[...e,"drawStyle"]},d.createElement(Dt.Group,{buttonStyle:"solid"},d.createElement(Dt.Button,{value:"lines"},"lines"),d.createElement(Dt.Button,{value:"bars"},"bars"))),d.createElement(Et.Item,{noStyle:!0,shouldUpdate:(t,n)=>S.get(t,[...e,"drawStyle"])!==S.get(n,[...e,"drawStyle"])},(({getFieldValue:t})=>{const n=t([...e,"drawStyle"]);return"lines"===n||"bars"===n?d.createElement(d.Fragment,null,"lines"===n?d.createElement(Et.Item,{label:"线插值",name:[...e,"lineInterpolation"]},d.createElement(Dt.Group,{buttonStyle:"solid"},d.createElement(Dt.Button,{value:"linear"},"linear"),d.createElement(Dt.Button,{value:"smooth"},"smooth"))):null,d.createElement(Et.Item,{label:"透明度",name:[...e,"fillOpacity"]},d.createElement($t,{min:0,max:1,step:.01}))):null})),d.createElement(Et.Item,{label:"堆叠",name:[...e,"stack"]},d.createElement(Dt.Group,{buttonStyle:"solid"},d.createElement(Dt.Button,{value:"noraml"},"开启"),d.createElement(Dt.Button,{value:"off"},"关闭")))))}const{Option:C9,OptGroup:T9}=It;function w9(e){const{preNamePrefix:t=[],namePrefix:n=["options","standardOptions"]}=e;return d.createElement(y9,{header:"高级设置"},d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:d.createElement("div",null,"单位"," ",d.createElement(Ct,{overlayInnerStyle:{width:500},getTooltipContainer:()=>document.body,title:d.createElement("div",null,d.createElement("div",null,"默认会做 SI Prefixes 处理，如不想默认的处理可选择 none 关闭"),d.createElement("div",null,"Data(SI): 基数为 1000, 单位为 B、kB、MB、GB、TB、PB、EB、ZB、YB"),d.createElement("div",null,"Data(IEC): 基数为 1024, 单位为 B、KiB、MiB、GiB、TiB、PiB、EiB、ZiB、YiB"),d.createElement("div",null,"bits: b"),d.createElement("div",null,"bytes: B"))},d.createElement(D,null))),name:[...n,"util"]},d.createElement(It,{suffixIcon:d.createElement(j,null),placeholder:"auto",allowClear:!0},d.createElement(C9,{value:"none"},"none"),d.createElement(T9,{label:"Data(SI)"},d.createElement(C9,{value:"bitsSI"},"bits(SI)"),d.createElement(C9,{value:"bytesSI"},"bytes(SI)")),d.createElement(T9,{label:"Data(IEC)"},d.createElement(C9,{value:"bitsIEC"},"bits(IEC)"),d.createElement(C9,{value:"bytesIEC"},"bytes(IEC)")),d.createElement(T9,{label:"百分比"},d.createElement(C9,{value:"percent"},"百分比(0-100)"),d.createElement(C9,{value:"percentUnit"},"百分比(0.0-1.0)")),d.createElement(T9,{label:"时间"},d.createElement(C9,{value:"seconds"},"seconds"),d.createElement(C9,{value:"milliseconds"},"milliseconds"),d.createElement(C9,{value:"humantimeSeconds"},"humanize(seconds)"),d.createElement(C9,{value:"humantimeMilliseconds"},"humanize(milliseconds)")))),d.createElement(St,{gutter:10},d.createElement(kt,{span:8},d.createElement(Et.Item,{label:"最小值",name:[...n,"min"]},d.createElement(Rt,{placeholder:"auto",style:{width:"100%"}}))),d.createElement(kt,{span:8},d.createElement(Et.Item,{label:"最大值",name:[...n,"max"]},d.createElement(Rt,{placeholder:"auto",style:{width:"100%"}}))),d.createElement(kt,{span:8},d.createElement(Et.Item,{label:"小数点",name:[...n,"decimals"]},d.createElement(Rt,{placeholder:"auto",style:{width:"100%"}}))))))}var S9={},k9={},_9=Ie,A9=Me,O9=Ne;var I9=function(e){return"string"==typeof e||!A9(e)&&O9(e)&&"[object String]"==_9(e)},M9=Sn;var N9=kn,F9=function(e){return"function"==typeof e?e:M9};var L9=function(e,t){return e&&N9(e,F9(t))};Object.defineProperty(k9,"__esModule",{value:!0}),k9.flattenNames=void 0;var P9=z9(I9),R9=z9(L9),D9=z9(_n),B9=z9(An);function z9(e){return e&&e.__esModule?e:{default:e}}var H9=k9.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,B9.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,D9.default)(t)?(0,R9.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,P9.default)(t)&&n.push(t)})),n};k9.default=H9;var j9={},G9=On;var $9=function(e){return G9(e,5)};Object.defineProperty(j9,"__esModule",{value:!0}),j9.mergeClasses=void 0;var Y9=W9(L9),U9=W9($9),V9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function W9(e){return e&&e.__esModule?e:{default:e}}var X9=j9.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,U9.default)(e.default)||{};return t.map((function(t){var r=e[t];return r&&(0,Y9.default)(r,(function(e,t){n[t]||(n[t]={}),n[t]=V9({},n[t],r[t])})),t})),n};j9.default=X9;var q9={};Object.defineProperty(q9,"__esModule",{value:!0}),q9.autoprefix=void 0;var K9=function(e){return e&&e.__esModule?e:{default:e}}(L9),Q9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var Z9={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},J9=q9.autoprefix=function(e){var t={};return(0,K9.default)(e,(function(e,n){var r={};(0,K9.default)(e,(function(e,t){var n=Z9[t];n?r=Q9({},r,n(e)):r[t]=e})),t[n]=r})),t};q9.default=J9;var e5={};Object.defineProperty(e5,"__esModule",{value:!0}),e5.hover=void 0;var t5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n5=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);function r5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o5=e5.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,a;r5(this,r);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return i=a=i5(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return n5.default.createElement(t,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},n5.default.createElement(e,t5({},a.props,a.state)))},i5(a,i)}return a5(r,n5.default.Component),r}()};e5.default=o5;var s5={};Object.defineProperty(s5,"__esModule",{value:!0}),s5.active=void 0;var l5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c5=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);function u5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d5=s5.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,a;u5(this,r);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return i=a=h5(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return c5.default.createElement(t,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},c5.default.createElement(e,l5({},a.props,a.state)))},h5(a,i)}return p5(r,c5.default.Component),r}()};s5.default=d5;var f5={};Object.defineProperty(f5,"__esModule",{value:!0});f5.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n},Object.defineProperty(S9,"__esModule",{value:!0}),S9.ReactCSS=S9.loop=S9.handleActive=C5=S9.handleHover=S9.hover=void 0;var m5=b5(k9),g5=b5(j9),v5=b5(q9),y5=b5(e5),x5=b5(s5),E5=b5(f5);function b5(e){return e&&e.__esModule?e:{default:e}}S9.hover=y5.default;var C5=S9.handleHover=y5.default;S9.handleActive=x5.default,S9.loop=E5.default;var T5=S9.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=(0,m5.default)(n),a=(0,g5.default)(e,i);return(0,v5.default)(a)},w5=S9.default=T5,S5=function(e,t,n,r,i){var a=i.clientWidth,o=i.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h=void 0;if(h=u<0?0:u>o?1:Math.round(100*u/o)/100,t.a!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}else{var p=void 0;if(r!==(p=c<0?0:c>a?1:Math.round(100*c/a)/100))return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}return null},k5={},_5=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":"");if(k5[i])return k5[i];var a=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var a=i.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,i.width,i.height),a.fillStyle=t,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),i.toDataURL()):null}(e,t,n,r);return k5[i]=a,a},A5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O5=function(e){var t=e.white,n=e.grey,r=e.size,i=e.renderers,a=e.borderRadius,o=e.boxShadow,s=e.children,l=w5({default:{grid:{borderRadius:a,boxShadow:o,absolute:"0px 0px 0px 0px",background:"url("+_5(t,n,r,i.canvas)+") center left"}}});return f.exports.isValidElement(s)?d.cloneElement(s,A5({},s.props,{style:A5({},s.props.style,l.grid)})):d.createElement("div",{style:l.grid})};O5.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var I5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M5=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function N5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var L5=function(e){function t(){var e,n,r;N5(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=F5(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=S5(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},F5(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),M5(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=w5({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:I5({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return d.createElement("div",{style:n.alpha},d.createElement("div",{style:n.checkboard},d.createElement(O5,{renderers:this.props.renderers})),d.createElement("div",{style:n.gradient}),d.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.createElement("div",{style:n.pointer},this.props.pointer?d.createElement(this.props.pointer,this.props):d.createElement("div",{style:n.slider}))))}}]),t}(),P5=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var R5=[38,40],D5=1,B5=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,R5.indexOf(t)>-1)){var i=n.getArrowOffset(),a=38===e.keyCode?r+i:r-i;n.setUpdatedValue(a,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+D5++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),P5(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=w5({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return d.createElement("div",{style:t.wrap},d.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?d.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(),z5=function(e,t,n,r){var i=r.clientWidth,a=r.clientHeight,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(c<0)u=359;else if(c>a)u=0;else{u=360*(-100*c/a+100)/100}if(n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h=void 0;if(l<0)h=0;else if(l>i)h=359;else{h=360*(100*l/i)/100}if(n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},H5=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function j5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var $5=function(e){function t(){var e,n,r;j5(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=G5(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=z5(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},G5(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),H5(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=w5({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return d.createElement("div",{style:r.hue},d.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),d.createElement("div",{style:r.pointer},this.props.pointer?d.createElement(this.props.pointer,this.props):d.createElement("div",{style:r.slider}))))}}]),t}();function Y5(e,t){return e===t||e!=e&&t!=t}function U5(e,t){for(var n=e.length;n--;)if(Y5(e[n][0],t))return n;return-1}var V5=Array.prototype.splice;function W5(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}W5.prototype.clear=function(){this.__data__=[],this.size=0},W5.prototype.delete=function(e){var t=this.__data__,n=U5(t,e);return!(n<0)&&(n==t.length-1?t.pop():V5.call(t,n,1),--this.size,!0)},W5.prototype.get=function(e){var t=this.__data__,n=U5(t,e);return n<0?void 0:t[n][1]},W5.prototype.has=function(e){return U5(this.__data__,e)>-1},W5.prototype.set=function(e,t){var n=this.__data__,r=U5(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var X5="object"==typeof global&&global&&global.Object===Object&&global,q5="object"==typeof self&&self&&self.Object===Object&&self,K5=X5||q5||Function("return this")(),Q5=K5.Symbol,Z5=Object.prototype,J5=Z5.hasOwnProperty,e2=Z5.toString,t2=Q5?Q5.toStringTag:void 0;var n2=Object.prototype.toString;var r2=Q5?Q5.toStringTag:void 0;function i2(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r2&&r2 in Object(e)?function(e){var t=J5.call(e,t2),n=e[t2];try{e[t2]=void 0;var r=!0}catch(eh){}var i=e2.call(e);return r&&(t?e[t2]=n:delete e[t2]),i}(e):function(e){return n2.call(e)}(e)}function a2(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function o2(e){if(!a2(e))return!1;var t=i2(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var s2,l2=K5["__core-js_shared__"],c2=(s2=/[^.]+$/.exec(l2&&l2.keys&&l2.keys.IE_PROTO||""))?"Symbol(src)_1."+s2:"";var u2=Function.prototype.toString;function h2(e){if(null!=e){try{return u2.call(e)}catch(eh){}try{return e+""}catch(eh){}}return""}var p2=/^\[object .+?Constructor\]$/,d2=Function.prototype,f2=Object.prototype,m2=d2.toString,g2=f2.hasOwnProperty,v2=RegExp("^"+m2.call(g2).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y2(e){return!(!a2(e)||(t=e,c2&&c2 in t))&&(o2(e)?v2:p2).test(h2(e));var t}function x2(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return y2(n)?n:void 0}var E2=x2(K5,"Map"),b2=x2(Object,"create");var C2=Object.prototype.hasOwnProperty;var T2=Object.prototype.hasOwnProperty;function w2(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function S2(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function k2(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}w2.prototype.clear=function(){this.__data__=b2?b2(null):{},this.size=0},w2.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},w2.prototype.get=function(e){var t=this.__data__;if(b2){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return C2.call(t,e)?t[e]:void 0},w2.prototype.has=function(e){var t=this.__data__;return b2?void 0!==t[e]:T2.call(t,e)},w2.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=b2&&void 0===t?"__lodash_hash_undefined__":t,this},k2.prototype.clear=function(){this.size=0,this.__data__={hash:new w2,map:new(E2||W5),string:new w2}},k2.prototype.delete=function(e){var t=S2(this,e).delete(e);return this.size-=t?1:0,t},k2.prototype.get=function(e){return S2(this,e).get(e)},k2.prototype.has=function(e){return S2(this,e).has(e)},k2.prototype.set=function(e,t){var n=S2(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function _2(e){var t=this.__data__=new W5(e);this.size=t.size}_2.prototype.clear=function(){this.__data__=new W5,this.size=0},_2.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},_2.prototype.get=function(e){return this.__data__.get(e)},_2.prototype.has=function(e){return this.__data__.has(e)},_2.prototype.set=function(e,t){var n=this.__data__;if(n instanceof W5){var r=n.__data__;if(!E2||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new k2(r)}return n.set(e,t),this.size=n.size,this};var A2=function(){try{var e=x2(Object,"defineProperty");return e({},"",{}),e}catch(eh){}}();function O2(e,t,n){"__proto__"==t&&A2?A2(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function I2(e,t,n){(void 0!==n&&!Y5(e[t],n)||void 0===n&&!(t in e))&&O2(e,t,n)}var M2,N2=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),o=a.length;o--;){var s=a[M2?o:++r];if(!1===t(i[s],s,i))break}return e},F2="object"==typeof exports&&exports&&!exports.nodeType&&exports,L2=F2&&"object"==typeof module&&module&&!module.nodeType&&module,P2=L2&&L2.exports===F2?K5.Buffer:void 0,R2=P2?P2.allocUnsafe:void 0;var D2=K5.Uint8Array;function B2(e,t){var n,r,i=t?(n=e.buffer,r=new n.constructor(n.byteLength),new D2(r).set(new D2(n)),r):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var z2=Object.create,H2=function(){function e(){}return function(t){if(!a2(t))return{};if(z2)return z2(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function j2(e,t){return function(n){return e(t(n))}}var G2=j2(Object.getPrototypeOf,Object),$2=Object.prototype;function Y2(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$2)}function U2(e){return null!=e&&"object"==typeof e}function V2(e){return U2(e)&&"[object Arguments]"==i2(e)}var W2=Object.prototype,X2=W2.hasOwnProperty,q2=W2.propertyIsEnumerable,K2=V2(function(){return arguments}())?V2:function(e){return U2(e)&&X2.call(e,"callee")&&!q2.call(e,"callee")},Q2=Array.isArray;function Z2(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function J2(e){return null!=e&&Z2(e.length)&&!o2(e)}var e4="object"==typeof exports&&exports&&!exports.nodeType&&exports,t4=e4&&"object"==typeof module&&module&&!module.nodeType&&module,n4=t4&&t4.exports===e4?K5.Buffer:void 0,r4=(n4?n4.isBuffer:void 0)||function(){return!1},i4=Function.prototype,a4=Object.prototype,o4=i4.toString,s4=a4.hasOwnProperty,l4=o4.call(Object);var c4={};c4["[object Float32Array]"]=c4["[object Float64Array]"]=c4["[object Int8Array]"]=c4["[object Int16Array]"]=c4["[object Int32Array]"]=c4["[object Uint8Array]"]=c4["[object Uint8ClampedArray]"]=c4["[object Uint16Array]"]=c4["[object Uint32Array]"]=!0,c4["[object Arguments]"]=c4["[object Array]"]=c4["[object ArrayBuffer]"]=c4["[object Boolean]"]=c4["[object DataView]"]=c4["[object Date]"]=c4["[object Error]"]=c4["[object Function]"]=c4["[object Map]"]=c4["[object Number]"]=c4["[object Object]"]=c4["[object RegExp]"]=c4["[object Set]"]=c4["[object String]"]=c4["[object WeakMap]"]=!1;var u4,h4="object"==typeof exports&&exports&&!exports.nodeType&&exports,p4=h4&&"object"==typeof module&&module&&!module.nodeType&&module,d4=p4&&p4.exports===h4&&X5.process,f4=function(){try{var e=p4&&p4.require&&p4.require("util").types;return e||d4&&d4.binding&&d4.binding("util")}catch(eh){}}(),m4=f4&&f4.isTypedArray,g4=m4?(u4=m4,function(e){return u4(e)}):function(e){return U2(e)&&Z2(e.length)&&!!c4[i2(e)]};function v4(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var y4=Object.prototype.hasOwnProperty;function x4(e,t,n){var r=e[t];y4.call(e,t)&&Y5(r,n)&&(void 0!==n||t in e)||O2(e,t,n)}var E4=/^(?:0|[1-9]\d*)$/;function b4(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&E4.test(e))&&e>-1&&e%1==0&&e<t}var C4=Object.prototype.hasOwnProperty;function T4(e,t){var n=Q2(e),r=!n&&K2(e),i=!n&&!r&&r4(e),a=!n&&!r&&!i&&g4(e),o=n||r||i||a,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!C4.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||b4(c,l))||s.push(c);return s}var w4=Object.prototype.hasOwnProperty;function S4(e){if(!a2(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Y2(e),n=[];for(var r in e)("constructor"!=r||!t&&w4.call(e,r))&&n.push(r);return n}function k4(e){return J2(e)?T4(e,!0):S4(e)}function _4(e){return function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?O2(n,s,l):x4(n,s,l)}return n}(e,k4(e))}function A4(e,t,n,r,i,a,o){var s=v4(e,n),l=v4(t,n),c=o.get(l);if(c)I2(e,n,c);else{var u=a?a(s,l,n+"",e,t,o):void 0,h=void 0===u;if(h){var p=Q2(l),d=!p&&r4(l),f=!p&&!d&&g4(l);u=l,p||d||f?Q2(s)?u=s:!function(e){return U2(e)&&J2(e)}(s)?d?(h=!1,u=function(e,t){if(t)return e.slice();var n=e.length,r=R2?R2(n):new e.constructor(n);return e.copy(r),r}(l,!0)):f?(h=!1,u=B2(l,!0)):u=[]:u=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):function(e){if(!U2(e)||"[object Object]"!=i2(e))return!1;var t=G2(e);if(null===t)return!0;var n=s4.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&o4.call(n)==l4}(l)||K2(l)?(u=s,K2(s)?u=_4(s):a2(s)&&!o2(s)||(u=function(e){return"function"!=typeof e.constructor||Y2(e)?{}:H2(G2(e))}(l))):h=!1}h&&(o.set(l,u),i(u,l,r,a,o),o.delete(l)),I2(e,n,u)}}function O4(e,t,n,r,i){e!==t&&N2(t,(function(a,o){if(i||(i=new _2),a2(a))A4(e,t,o,n,O4,r,i);else{var s=r?r(v4(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),I2(e,o,s)}}),k4)}function I4(e){return e}function M4(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var N4=Math.max;function F4(e){return function(){return e}}var L4=A2?function(e,t){return A2(e,"toString",{configurable:!0,enumerable:!1,value:F4(t),writable:!0})}:I4,P4=Date.now;var R4=function(e){var t=0,n=0;return function(){var r=P4(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(L4);function D4(e,t){return R4(function(e,t,n){return t=N4(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=N4(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),M4(e,this,s)}}(e,t,I4),e+"")}var B4,z4=(B4=function(e,t,n){O4(e,t,n)},D4((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=B4.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!a2(n))return!1;var r=typeof t;return!!("number"==r?J2(n)&&b4(t,n.length):"string"==r&&t in n)&&Y5(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&B4(e,o,n,i)}return e}))),H4=function(e){var t=e.zDepth,n=e.radius,r=e.background,i=e.children,a=e.styles,o=w5(z4({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},void 0===a?{}:a),{"zDepth-1":1===t});return d.createElement("div",{style:o.wrap},d.createElement("div",{style:o.bg}),d.createElement("div",{style:o.content},i))};H4.propTypes={background:J.string,zDepth:J.oneOf([0,1,2,3,4,5]),radius:J.number,styles:J.object},H4.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var j4=function(){return K5.Date.now()},G4=/\s/;var $4=/^\s+/;function Y4(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&G4.test(e.charAt(t)););return t}(e)+1).replace($4,""):e}function U4(e){return"symbol"==typeof e||U2(e)&&"[object Symbol]"==i2(e)}var V4=/^[-+]0x[0-9a-f]+$/i,W4=/^0b[01]+$/i,X4=/^0o[0-7]+$/i,q4=parseInt;function K4(e){if("number"==typeof e)return e;if(U4(e))return NaN;if(a2(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a2(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Y4(e);var n=W4.test(e);return n||X4.test(e)?q4(e.slice(2),n?2:8):V4.test(e)?NaN:+e}var Q4=Math.max,Z4=Math.min;function J4(e,t,n){var r,i,a,o,s,l,c=0,u=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function f(e){return c=e,s=setTimeout(g,t),u?d(e):o}function m(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=a}function g(){var e=j4();if(m(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-l);return h?Z4(n,a-(e-c)):n}(e))}function v(e){return s=void 0,p&&r?d(e):(r=i=void 0,o)}function y(){var e=j4(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return f(l);if(h)return clearTimeout(s),s=setTimeout(g,t),d(l)}return void 0===s&&(s=setTimeout(g,t)),o}return t=K4(t)||0,a2(n)&&(u=!!n.leading,a=(h="maxWait"in n)?Q4(K4(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?o:v(j4())},y}var e8=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var t8=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,a=r.height,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),c<0?c=0:c>a&&(c=a);var u=l/i,h=1-c/a;return{h:t.h,s:u,v:h,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a2(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),J4(e,t,{leading:r,maxWait:t,trailing:i})}((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),e8(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,i=t.black,a=t.pointer,o=t.circle,s=w5({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:i,pointer:a,circle:o}},{custom:!!this.props.style});return d.createElement("div",{style:s.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),d.createElement("div",{style:s.white,className:"saturation-white"},d.createElement("div",{style:s.black,className:"saturation-black"}),d.createElement("div",{style:s.pointer},this.props.pointer?d.createElement(this.props.pointer,this.props):d.createElement("div",{style:s.circle}))))}}]),t}();function n8(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var r8=j2(Object.keys,Object),i8=Object.prototype.hasOwnProperty;function a8(e){return J2(e)?T4(e):function(e){if(!Y2(e))return r8(e);var t=[];for(var n in Object(e))i8.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var o8=function(e,t){return function(n,r){if(null==n)return n;if(!J2(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}((function(e,t){return e&&N2(e,t,a8)}));function s8(e,t){return(Q2(e)?n8:o8)(e,function(e){return"function"==typeof e?e:I4}(t))}var l8={exports:{}};!function(e){!function(t){var n=/^\s+/,r=/\s+$/,i=0,a=t.round,o=t.min,s=t.max,l=t.random;function c(e,l){if(l=l||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,l);var u=function(e){var i={r:0,g:0,b:0},a=1,l=null,c=null,u=null,h=!1,p=!1;"string"==typeof e&&(e=function(e){e=e.replace(n,"").replace(r,"").toLowerCase();var t,i=!1;if(_[e])e=_[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=H.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=H.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=H.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=H.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=H.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=H.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=H.hex8.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),a:R(t[4]),format:i?"name":"hex8"};if(t=H.hex6.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),format:i?"name":"hex"};if(t=H.hex4.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),a:R(t[4]+""+t[4]),format:i?"name":"hex8"};if(t=H.hex3.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),format:i?"name":"hex"};return!1}(e));"object"==typeof e&&(j(e.r)&&j(e.g)&&j(e.b)?(d=e.r,f=e.g,m=e.b,i={r:255*I(d,255),g:255*I(f,255),b:255*I(m,255)},h=!0,p="%"===String(e.r).substr(-1)?"prgb":"rgb"):j(e.h)&&j(e.s)&&j(e.v)?(l=L(e.s),c=L(e.v),i=function(e,n,r){e=6*I(e,360),n=I(n,100),r=I(r,100);var i=t.floor(e),a=e-i,o=r*(1-n),s=r*(1-a*n),l=r*(1-(1-a)*n),c=i%6;return{r:255*[r,s,o,o,l,r][c],g:255*[l,r,r,s,o,o][c],b:255*[o,o,l,r,r,s][c]}}(e.h,l,c),h=!0,p="hsv"):j(e.h)&&j(e.s)&&j(e.l)&&(l=L(e.s),u=L(e.l),i=function(e,t,n){var r,i,a;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=I(e,360),t=I(t,100),n=I(n,100),0===t)r=i=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=o(l,s,e+1/3),i=o(l,s,e),a=o(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,l,u),h=!0,p="hsl"),e.hasOwnProperty("a")&&(a=e.a));var d,f,m;return a=O(a),{ok:h,format:e.format||p,r:o(255,s(i.r,0)),g:o(255,s(i.g,0)),b:o(255,s(i.b,0)),a:a}}(e);this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=a(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=u.ok,this._tc_id=i++}function u(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,a=s(e,t,n),l=o(e,t,n),c=(a+l)/2;if(a==l)r=i=0;else{var u=a-l;switch(i=c>.5?u/(2-a-l):u/(a+l),a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,l:c}}function h(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,a=s(e,t,n),l=o(e,t,n),c=a,u=a-l;if(i=0===a?0:u/a,a==l)r=0;else{switch(a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,v:c}}function p(e,t,n,r){var i=[F(a(e).toString(16)),F(a(t).toString(16)),F(a(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(e,t,n,r){return[F(P(r)),F(a(e).toString(16)),F(a(t).toString(16)),F(a(n).toString(16))].join("")}function f(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=M(n.s),c(n)}function m(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=M(n.s),c(n)}function g(e){return c(e).desaturate(100)}function v(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=M(n.l),c(n)}function y(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=s(0,o(255,n.r-a(-t/100*255))),n.g=s(0,o(255,n.g-a(-t/100*255))),n.b=s(0,o(255,n.b-a(-t/100*255))),c(n)}function x(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=M(n.l),c(n)}function E(e,t){var n=c(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,c(n)}function b(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function C(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function T(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function w(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function S(e,t,n){t=t||6,n=n||30;var r=c(e).toHsl(),i=360/n,a=[c(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(c(r));return a}function k(e,t){t=t||6;for(var n=c(e).toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/t;t--;)o.push(c({h:r,s:i,v:a})),a=(a+s)%1;return o}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,r,i=this.toRgb();return e=i.r/255,n=i.g/255,r=i.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=O(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),r=a(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),r=a(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return p(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[F(a(e).toString(16)),F(a(t).toString(16)),F(a(n).toString(16)),F(P(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*I(this._r,255))+"%",g:a(100*I(this._g,255))+"%",b:a(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*I(this._r,255))+"%, "+a(100*I(this._g,255))+"%, "+a(100*I(this._b,255))+"%)":"rgba("+a(100*I(this._r,255))+"%, "+a(100*I(this._g,255))+"%, "+a(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+d(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=c(e);n="#"+d(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(E,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:L(e[r]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(e,t,n){n=0===n?0:n||50;var r=c(e).toRgb(),i=c(t).toRgb(),a=n/100;return c({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},c.readability=function(e,n){var r=c(e),i=c(n);return(t.max(r.getLuminance(),i.getLuminance())+.05)/(t.min(r.getLuminance(),i.getLuminance())+.05)},c.isReadable=function(e,t,n){var r,i,a=c.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},c.mostReadable=function(e,t,n){var r,i,a,o,s=null,l=0;i=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var u=0;u<t.length;u++)(r=c.readability(e,t[u]))>l&&(l=r,s=c(t[u]));return c.isReadable(e,s,{level:a,size:o})||!i?s:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var _=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(_);function O(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function I(e,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=o(n,s(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function M(e){return o(1,s(0,e))}function N(e){return parseInt(e,16)}function F(e){return 1==e.length?"0"+e:""+e}function L(e){return e<=1&&(e=100*e+"%"),e}function P(e){return t.round(255*parseFloat(e)).toString(16)}function R(e){return N(e)/255}var D,B,z,H=(B="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",z="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+B),rgba:new RegExp("rgba"+z),hsl:new RegExp("hsl"+B),hsla:new RegExp("hsla"+z),hsv:new RegExp("hsv"+B),hsva:new RegExp("hsva"+z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function j(e){return!!H.CSS_UNIT.exec(e)}e.exports?e.exports=c:window.tinycolor=c}(Math)}(l8);var c8=l8.exports,u8=function(e){var t=0,n=0;return s8(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e},h8=function(e,t){var n=e.hex?c8(e.hex):c8(e),r=n.toHsl(),i=n.toHsv(),a=n.toRgb(),o=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===o&&0===a.a?"transparent":"#"+o,rgb:a,hsv:i,oldHue:e.h||t||r.h,source:e.source}},p8=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&c8(e).isValid()},d8=function(e){if(!e)return"#fff";var t=h8(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},f8=function(e,t){var n=e.replace("°","");return c8(t+" ("+n+")")._ok},m8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g8=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var v8=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(u8(e)){var r=h8(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(u8(e)){var r=h8(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=m8({},h8(e.color,0)),t.debounce=J4((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,f.exports.PureComponent||f.exports.Component),g8(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),d.createElement(e,m8({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return m8({},h8(e.color,t.oldHue))}}]),n}();return t.propTypes=m8({},e.propTypes),t.defaultProps=m8({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},y8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x8=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function E8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b8(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C8(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w8=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;E8(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n=b8(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(a))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},b8(n,t)}return C8(r,d.Component),x8(r,[{key:"render",value:function(){return d.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},d.createElement(e,y8({},this.props,this.state)))}}]),r}()}((function(e){var t=e.color,n=e.style,r=e.onClick,i=void 0===r?function(){}:r,a=e.onHover,o=e.title,s=void 0===o?t:o,l=e.children,c=e.focus,u=e.focusStyle,h="transparent"===t,p=w5({default:{swatch:T8({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,c?void 0===u?{}:u:{})}}),f={};return a&&(f.onMouseOver=function(e){return a(t,e)}),d.createElement("div",T8({style:p.swatch,onClick:function(e){return i(t,e)},title:s,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&i(t,e)}},f),l,h&&d.createElement(O5,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))})),S8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k8=function(e){var t=e.rgb,n=e.hsl,r=e.width,i=e.height,a=e.onChange,o=e.direction,s=e.style,l=e.renderers,c=e.pointer,u=e.className,h=void 0===u?"":u,p=w5({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:s}}});return d.createElement("div",{style:p.picker,className:"alpha-picker "+h},d.createElement(L5,S8({},p.alpha,{rgb:t,hsl:n,pointer:c,renderers:l,onChange:a,direction:o})))};function _8(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}k8.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=w5({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return d.createElement("div",{style:n.picker})}},v8(k8);function A8(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new k2;++t<n;)this.add(e[t])}function O8(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}A8.prototype.add=A8.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},A8.prototype.has=function(e){return this.__data__.has(e)};function I8(e,t,n,r,i,a){var o=1&n,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var h=-1,p=!0,d=2&n?new A8:void 0;for(a.set(e,t),a.set(t,e);++h<s;){var f=e[h],m=t[h];if(r)var g=o?r(m,f,h,t,e,a):r(f,m,h,e,t,a);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!O8(t,(function(e,t){if(o=t,!d.has(o)&&(f===e||i(f,e,n,r,a)))return d.push(t);var o}))){p=!1;break}}else if(f!==m&&!i(f,m,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function M8(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function N8(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var F8=Q5?Q5.prototype:void 0,L8=F8?F8.valueOf:void 0;var P8=Object.prototype.propertyIsEnumerable,R8=Object.getOwnPropertySymbols,D8=R8?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(R8(e),(function(t){return P8.call(e,t)})))}:function(){return[]};function B8(e){return function(e,t,n){var r=t(e);return Q2(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,a8,D8)}var z8=Object.prototype.hasOwnProperty;var H8=x2(K5,"DataView"),j8=x2(K5,"Promise"),G8=x2(K5,"Set"),$8=x2(K5,"WeakMap"),Y8=h2(H8),U8=h2(E2),V8=h2(j8),W8=h2(G8),X8=h2($8),q8=i2;(H8&&"[object DataView]"!=q8(new H8(new ArrayBuffer(1)))||E2&&"[object Map]"!=q8(new E2)||j8&&"[object Promise]"!=q8(j8.resolve())||G8&&"[object Set]"!=q8(new G8)||$8&&"[object WeakMap]"!=q8(new $8))&&(q8=function(e){var t=i2(e),n="[object Object]"==t?e.constructor:void 0,r=n?h2(n):"";if(r)switch(r){case Y8:return"[object DataView]";case U8:return"[object Map]";case V8:return"[object Promise]";case W8:return"[object Set]";case X8:return"[object WeakMap]"}return t});var K8=q8,Q8="[object Object]",Z8=Object.prototype.hasOwnProperty;function J8(e,t,n,r,i,a){var o=Q2(e),s=Q2(t),l=o?"[object Array]":K8(e),c=s?"[object Array]":K8(t),u=(l="[object Arguments]"==l?Q8:l)==Q8,h=(c="[object Arguments]"==c?Q8:c)==Q8,p=l==c;if(p&&r4(e)){if(!r4(t))return!1;o=!0,u=!1}if(p&&!u)return a||(a=new _2),o||g4(e)?I8(e,t,n,r,i,a):function(e,t,n,r,i,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new D2(e),new D2(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Y5(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=M8;case"[object Set]":var l=1&r;if(s||(s=N8),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=I8(s(e),s(t),r,i,a,o);return o.delete(e),u;case"[object Symbol]":if(L8)return L8.call(e)==L8.call(t)}return!1}(e,t,l,n,r,i,a);if(!(1&n)){var d=u&&Z8.call(e,"__wrapped__"),f=h&&Z8.call(t,"__wrapped__");if(d||f){var m=d?e.value():e,g=f?t.value():t;return a||(a=new _2),i(m,g,n,r,a)}}return!!p&&(a||(a=new _2),function(e,t,n,r,i,a){var o=1&n,s=B8(e),l=s.length;if(l!=B8(t).length&&!o)return!1;for(var c=l;c--;){var u=s[c];if(!(o?u in t:z8.call(t,u)))return!1}var h=a.get(e),p=a.get(t);if(h&&p)return h==t&&p==e;var d=!0;a.set(e,t),a.set(t,e);for(var f=o;++c<l;){var m=e[u=s[c]],g=t[u];if(r)var v=o?r(g,m,u,t,e,a):r(m,g,u,e,t,a);if(!(void 0===v?m===g||i(m,g,n,r,a):v)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var y=e.constructor,x=t.constructor;y==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x||(d=!1)}return a.delete(e),a.delete(t),d}(e,t,n,r,i,a))}function e3(e,t,n,r,i){return e===t||(null==e||null==t||!U2(e)&&!U2(t)?e!=e&&t!=t:J8(e,t,n,r,e3,i))}function t3(e){return e==e&&!a2(e)}function n3(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function r3(e){var t=function(e){for(var t=a8(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,t3(i)]}return t}(e);return 1==t.length&&t[0][2]?n3(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=n[i])[0],c=e[l],u=s[1];if(o&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new _2;if(r)var p=r(c,u,l,e,t,h);if(!(void 0===p?e3(u,c,3,r,h):p))return!1}}return!0}(n,e,t)}}var i3=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a3=/^\w*$/;function o3(e,t){if(Q2(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!U4(e))||(a3.test(e)||!i3.test(e)||null!=t&&e in Object(t))}function s3(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(s3.Cache||k2),n}s3.Cache=k2;var l3=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c3=/\\(\\)?/g,u3=function(e){var t=s3(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(l3,(function(e,n,r,i){t.push(r?i.replace(c3,"$1"):n||e)})),t})),h3=Q5?Q5.prototype:void 0,p3=h3?h3.toString:void 0;function d3(e){if("string"==typeof e)return e;if(Q2(e))return _8(e,d3)+"";if(U4(e))return p3?p3.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function f3(e,t){return Q2(e)?e:o3(e,t)?[e]:u3(function(e){return null==e?"":d3(e)}(e))}function m3(e){if("string"==typeof e||U4(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function g3(e,t){for(var n=0,r=(t=f3(t,e)).length;null!=e&&n<r;)e=e[m3(t[n++])];return n&&n==r?e:void 0}function v3(e,t){return null!=e&&t in Object(e)}function y3(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=f3(t,e)).length,a=!1;++r<i;){var o=m3(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Z2(i)&&b4(o,i)&&(Q2(e)||K2(e))}(e,t,v3)}function x3(e,t){return o3(e)&&t3(t)?n3(m3(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:g3(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?y3(n,e):e3(t,r,3)}}function E3(e){return o3(e)?(t=m3(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return g3(t,e)}}(e);var t}function b3(e,t){var n=-1,r=J2(e)?Array(e.length):[];return o8(e,(function(e,i,a){r[++n]=t(e,i,a)})),r}function C3(e,t){return(Q2(e)?_8:b3)(e,function(e){return"function"==typeof e?e:null==e?I4:"object"==typeof e?Q2(e)?x3(e[0],e[1]):r3(e):E3(e)}(t))}var T3=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,i=w5({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return d.createElement("div",{style:i.swatches},C3(t,(function(e){return d.createElement(w8,{key:e,color:e,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),d.createElement("div",{style:i.clear}))},w3=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,a=e.width,o=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h="transparent"===r,p=function(e,n){p8(e)&&t({hex:e,source:"hex"},n)},f=w5(z4({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:d8(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},l),{"hide-triangle":"hide"===o});return d.createElement("div",{style:f.card,className:"block-picker "+u},d.createElement("div",{style:f.triangle}),d.createElement("div",{style:f.head},h&&d.createElement(O5,{borderRadius:"6px 6px 0 0"}),d.createElement("div",{style:f.label},r)),d.createElement("div",{style:f.body},d.createElement(T3,{colors:i,onClick:p,onSwatchHover:n}),d.createElement(B5,{style:{input:f.input},value:r,onChange:p})))};w3.propTypes={width:J.oneOfType([J.string,J.number]),colors:J.arrayOf(J.string),triangle:J.oneOf(["top","hide"]),styles:J.object},w3.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},v8(w3);var S3="#ffcdd2",k3="#e57373",_3="#f44336",A3="#d32f2f",O3="#b71c1c",I3="#f8bbd0",M3="#f06292",N3="#e91e63",F3="#c2185b",L3="#880e4f",P3="#e1bee7",R3="#ba68c8",D3="#9c27b0",B3="#7b1fa2",z3="#4a148c",H3="#d1c4e9",j3="#9575cd",G3="#673ab7",$3="#512da8",Y3="#311b92",U3="#c5cae9",V3="#7986cb",W3="#3f51b5",X3="#303f9f",q3="#1a237e",K3="#bbdefb",Q3="#64b5f6",Z3="#2196f3",J3="#1976d2",e6="#0d47a1",t6="#b3e5fc",n6="#4fc3f7",r6="#03a9f4",i6="#0288d1",a6="#01579b",o6="#b2ebf2",s6="#4dd0e1",l6="#00bcd4",c6="#0097a7",u6="#006064",h6="#b2dfdb",p6="#4db6ac",d6="#009688",f6="#00796b",m6="#004d40",g6="#c8e6c9",v6="#81c784",y6="#4caf50",x6="#388e3c",E6="#dcedc8",b6="#aed581",C6="#8bc34a",T6="#689f38",w6="#33691e",S6="#f0f4c3",k6="#dce775",_6="#cddc39",A6="#afb42b",O6="#827717",I6="#fff9c4",M6="#fff176",N6="#ffeb3b",F6="#fbc02d",L6="#f57f17",P6="#ffecb3",R6="#ffd54f",D6="#ffc107",B6="#ffa000",z6="#ff6f00",H6="#ffe0b2",j6="#ffb74d",G6="#ff9800",$6="#f57c00",Y6="#e65100",U6="#ffccbc",V6="#ff8a65",W6="#ff5722",X6="#e64a19",q6="#bf360c",K6="#d7ccc8",Q6="#a1887f",Z6="#795548",J6="#5d4037",e7="#3e2723",t7="#cfd8dc",n7="#90a4ae",r7="#607d8b",i7="#455a64",a7="#263238",o7=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,i=e.hover,a=e.active,o=e.circleSize,s=e.circleSpacing,l=w5({default:{swatch:{width:o,height:o,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:a});return d.createElement("div",{style:l.swatch},d.createElement(w8,{style:l.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+t}}))};o7.defaultProps={circleSize:28,circleSpacing:14};var s7=C5(o7),l7=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,i=e.colors,a=e.hex,o=e.circleSize,s=e.styles,l=void 0===s?{}:s,c=e.circleSpacing,u=e.className,h=void 0===u?"":u,p=w5(z4({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},l)),f=function(e,t){return n({hex:e,source:"hex"},t)};return d.createElement("div",{style:p.card,className:"circle-picker "+h},C3(i,(function(e){return d.createElement(s7,{key:e,color:e,onClick:f,onSwatchHover:r,active:a===e.toLowerCase(),circleSize:o,circleSpacing:c})})))};function c7(e){return void 0===e}l7.propTypes={width:J.oneOfType([J.string,J.number]),circleSize:J.number,circleSpacing:J.number,styles:J.object},l7.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[_3,N3,D3,G3,W3,Z3,r6,l6,d6,y6,C6,_6,N6,D6,G6,W6,Z6,r7],styles:{}},v8(l7);var u7={};Object.defineProperty(u7,"__esModule",{value:!0});var h7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p7=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);var d7=u7.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,a=e.height,o=void 0===a?24:a,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return p7.default.createElement("svg",h7({viewBox:"0 0 24 24",style:h7({fill:n,width:i,height:o},l)},c),p7.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},f7=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var m7=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?p8(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(c7(e.s)?n.props.hsl.s:e.s),l:Number(c7(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),f7(t,[{key:"render",value:function(){var e=this,t=w5({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=d.createElement("div",{style:t.fields,className:"flexbox-fix"},d.createElement("div",{style:t.field},d.createElement(B5,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=d.createElement("div",{style:t.fields,className:"flexbox-fix"},d.createElement("div",{style:t.field},d.createElement(B5,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(B5,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(B5,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),d.createElement("div",{style:t.alpha},d.createElement(B5,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=d.createElement("div",{style:t.fields,className:"flexbox-fix"},d.createElement("div",{style:t.field},d.createElement(B5,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(B5,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(B5,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),d.createElement("div",{style:t.alpha},d.createElement(B5,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),d.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,d.createElement("div",{style:t.toggle},d.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},d.createElement(d7,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}();m7.defaultProps={view:"hex"};var g7=function(){var e=w5({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return d.createElement("div",{style:e.picker})},v7=function(){var e=w5({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return d.createElement("div",{style:e.picker})},y7=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,i=e.rgb,a=e.hsl,o=e.hsv,s=e.hex,l=e.renderers,c=e.styles,u=void 0===c?{}:c,h=e.className,p=void 0===h?"":h,f=e.defaultView,m=w5(z4({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:r});return d.createElement("div",{style:m.picker,className:"chrome-picker "+p},d.createElement("div",{style:m.saturation},d.createElement(t8,{style:m.Saturation,hsl:a,hsv:o,pointer:v7,onChange:n})),d.createElement("div",{style:m.body},d.createElement("div",{style:m.controls,className:"flexbox-fix"},d.createElement("div",{style:m.color},d.createElement("div",{style:m.swatch},d.createElement("div",{style:m.active}),d.createElement(O5,{renderers:l}))),d.createElement("div",{style:m.toggles},d.createElement("div",{style:m.hue},d.createElement($5,{style:m.Hue,hsl:a,pointer:g7,onChange:n})),d.createElement("div",{style:m.alpha},d.createElement(L5,{style:m.Alpha,rgb:i,hsl:a,pointer:g7,renderers:l,onChange:n})))),d.createElement(m7,{rgb:i,hsl:a,hex:s,view:f,onChange:n,disableAlpha:r})))};y7.propTypes={width:J.oneOfType([J.string,J.number]),disableAlpha:J.bool,styles:J.object,defaultView:J.oneOf(["hex","rgb","hsl"])},y7.defaultProps={width:225,disableAlpha:!1,styles:{}},v8(y7);var x7=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,a=e.active,o=w5({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:d8(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return d.createElement(w8,{style:o.color,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},d.createElement("div",{style:o.dot}))},E7=function(e){var t=e.hex,n=e.rgb,r=e.onChange,i=w5({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return d.createElement("div",{style:i.fields,className:"flexbox-fix"},d.createElement("div",{style:i.active}),d.createElement(B5,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:a}),d.createElement(B5,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:a}),d.createElement(B5,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:a}),d.createElement(B5,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:a}))},b7=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,i=e.hex,a=e.rgb,o=e.styles,s=void 0===o?{}:o,l=e.className,c=void 0===l?"":l,u=w5(z4({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},s)),h=function(e,n){e.hex?p8(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return d.createElement(H4,{style:u.Compact,styles:s},d.createElement("div",{style:u.compact,className:"compact-picker "+c},d.createElement("div",null,C3(r,(function(e){return d.createElement(x7,{key:e,color:e,active:e.toLowerCase()===i,onClick:h,onSwatchHover:n})})),d.createElement("div",{style:u.clear})),d.createElement(E7,{hex:i,rgb:a,onChange:h})))};b7.propTypes={colors:J.arrayOf(J.string),styles:J.object},b7.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},v8(b7);var C7=C5((function(e){var t=e.hover,n=e.color,r=e.onClick,i=e.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=w5({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:t});return d.createElement("div",{style:o.swatch},d.createElement(w8,{color:n,onClick:r,onHover:i,focusStyle:a}))})),T7=function(e){var t=e.width,n=e.colors,r=e.onChange,i=e.onSwatchHover,a=e.triangle,o=e.styles,s=void 0===o?{}:o,l=e.className,c=void 0===l?"":l,u=w5(z4({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},s),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a,"bottom-left-triangle":"bottom-left"===a,"bottom-right-triangle":"bottom-right"===a}),h=function(e,t){return r({hex:e,source:"hex"},t)};return d.createElement("div",{style:u.card,className:"github-picker "+c},d.createElement("div",{style:u.triangleShadow}),d.createElement("div",{style:u.triangle}),C3(n,(function(e){return d.createElement(C7,{color:e,key:e,onClick:h,onSwatchHover:i})})))};T7.propTypes={width:J.oneOfType([J.string,J.number]),colors:J.arrayOf(J.string),triangle:J.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:J.object},T7.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},v8(T7);var w7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S7=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.hsl,a=e.direction,o=e.pointer,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=w5(z4({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},l));return d.createElement("div",{style:h.picker,className:"hue-picker "+u},d.createElement($5,w7({},h.hue,{hsl:i,pointer:o,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:a})))};S7.propTypes={styles:J.object},S7.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=w5({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return d.createElement("div",{style:n.picker})},styles:{}},v8(S7);v8((function(e){var t=e.onChange,n=e.hex,r=e.rgb,i=e.styles,a=void 0===i?{}:i,o=e.className,s=void 0===o?"":o,l=w5(z4({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),c=function(e,n){e.hex?p8(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return d.createElement(H4,{styles:a},d.createElement("div",{style:l.material,className:"material-picker "+s},d.createElement(B5,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:n,onChange:c}),d.createElement("div",{style:l.split,className:"flexbox-fix"},d.createElement("div",{style:l.third},d.createElement(B5,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:r.r,onChange:c})),d.createElement("div",{style:l.third},d.createElement(B5,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:r.g,onChange:c})),d.createElement("div",{style:l.third},d.createElement(B5,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:r.b,onChange:c})))))}));var k7=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,i=e.hex,a=w5({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(e,i){e["#"]?p8(e["#"])&&t({hex:e["#"],source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},i):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},i)};return d.createElement("div",{style:a.fields},d.createElement(B5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(r.h),onChange:o}),d.createElement(B5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:o}),d.createElement(B5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:o}),d.createElement("div",{style:a.divider}),d.createElement(B5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:n.r,onChange:o}),d.createElement(B5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:n.g,onChange:o}),d.createElement(B5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:n.b,onChange:o}),d.createElement("div",{style:a.divider}),d.createElement(B5,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:i.replace("#",""),onChange:o}),d.createElement("div",{style:a.fieldSymbols},d.createElement("div",{style:a.symbol},"°"),d.createElement("div",{style:a.symbol},"%"),d.createElement("div",{style:a.symbol},"%")))},_7=function(e){var t=e.hsl,n=w5({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return d.createElement("div",{style:n.picker})},A7=function(){var e=w5({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return d.createElement("div",{style:e.pointer},d.createElement("div",{style:e.left},d.createElement("div",{style:e.leftInside})),d.createElement("div",{style:e.right},d.createElement("div",{style:e.rightInside})))},O7=function(e){var t=e.onClick,n=e.label,r=e.children,i=e.active,a=w5({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return d.createElement("div",{style:a.button,onClick:t},n||r)},I7=function(e){var t=e.rgb,n=e.currentColor,r=w5({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return d.createElement("div",null,d.createElement("div",{style:r.label},"new"),d.createElement("div",{style:r.swatches},d.createElement("div",{style:r.new}),d.createElement("div",{style:r.current})),d.createElement("div",{style:r.label},"current"))},M7=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var N7=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),M7(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,i=void 0===r?"":r,a=w5(z4({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return d.createElement("div",{style:a.picker,className:"photoshop-picker "+i},d.createElement("div",{style:a.head},this.props.header),d.createElement("div",{style:a.body,className:"flexbox-fix"},d.createElement("div",{style:a.saturation},d.createElement(t8,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:_7,onChange:this.props.onChange})),d.createElement("div",{style:a.hue},d.createElement($5,{direction:"vertical",hsl:this.props.hsl,pointer:A7,onChange:this.props.onChange})),d.createElement("div",{style:a.controls},d.createElement("div",{style:a.top,className:"flexbox-fix"},d.createElement("div",{style:a.previews},d.createElement(I7,{rgb:this.props.rgb,currentColor:this.state.currentColor})),d.createElement("div",{style:a.actions},d.createElement(O7,{label:"OK",onClick:this.props.onAccept,active:!0}),d.createElement(O7,{label:"Cancel",onClick:this.props.onCancel}),d.createElement(k7,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}();N7.propTypes={header:J.string,styles:J.object},N7.defaultProps={header:"Color Picker",styles:{}},v8(N7);var F7=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,a=e.disableAlpha,o=w5({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),s=function(e,i){e.hex?p8(e.hex)&&t({hex:e.hex,source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},i):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},i))};return d.createElement("div",{style:o.fields,className:"flexbox-fix"},d.createElement("div",{style:o.double},d.createElement(B5,{style:{input:o.input,label:o.label},label:"hex",value:i.replace("#",""),onChange:s})),d.createElement("div",{style:o.single},d.createElement(B5,{style:{input:o.input,label:o.label},label:"r",value:n.r,onChange:s,dragLabel:"true",dragMax:"255"})),d.createElement("div",{style:o.single},d.createElement(B5,{style:{input:o.input,label:o.label},label:"g",value:n.g,onChange:s,dragLabel:"true",dragMax:"255"})),d.createElement("div",{style:o.single},d.createElement(B5,{style:{input:o.input,label:o.label},label:"b",value:n.b,onChange:s,dragLabel:"true",dragMax:"255"})),d.createElement("div",{style:o.alpha},d.createElement(B5,{style:{input:o.input,label:o.label},label:"a",value:Math.round(100*n.a),onChange:s,dragLabel:"true",dragMax:"100"})))},L7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P7=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,a=w5({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),o=function(e,t){r({hex:e,source:"hex"},t)};return d.createElement("div",{style:a.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return d.createElement("div",{key:n,style:a.swatchWrap},d.createElement(w8,L7({},t,{style:a.swatch,onClick:o,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};P7.propTypes={colors:J.arrayOf(J.oneOfType([J.string,J.shape({color:J.string,title:J.string})])).isRequired};var R7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D7=function(e){var t=e.width,n=e.rgb,r=e.hex,i=e.hsv,a=e.hsl,o=e.onChange,s=e.onSwatchHover,l=e.disableAlpha,c=e.presetColors,u=e.renderers,h=e.styles,p=void 0===h?{}:h,f=e.className,m=void 0===f?"":f,g=w5(z4({default:R7({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:l});return d.createElement("div",{style:g.picker,className:"sketch-picker "+m},d.createElement("div",{style:g.saturation},d.createElement(t8,{style:g.Saturation,hsl:a,hsv:i,onChange:o})),d.createElement("div",{style:g.controls,className:"flexbox-fix"},d.createElement("div",{style:g.sliders},d.createElement("div",{style:g.hue},d.createElement($5,{style:g.Hue,hsl:a,onChange:o})),d.createElement("div",{style:g.alpha},d.createElement(L5,{style:g.Alpha,rgb:n,hsl:a,renderers:u,onChange:o}))),d.createElement("div",{style:g.color},d.createElement(O5,null),d.createElement("div",{style:g.activeColor}))),d.createElement(F7,{rgb:n,hsl:a,hex:r,onChange:o,disableAlpha:l}),d.createElement(P7,{colors:c,onClick:o,onSwatchHover:s}))};D7.propTypes={disableAlpha:J.bool,width:J.oneOfType([J.string,J.number]),styles:J.object},D7.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};var B7=v8(D7),z7=function(e){var t=e.hsl,n=e.offset,r=e.onClick,i=void 0===r?function(){}:r,a=e.active,o=e.first,s=e.last,l=w5({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:o,last:s});return d.createElement("div",{style:l.swatch,onClick:function(e){return i({h:t.h,s:.5,l:n,source:"hsl"},e)}})},H7=function(e){var t=e.onClick,n=e.hsl,r=w5({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return d.createElement("div",{style:r.swatches},d.createElement("div",{style:r.swatch},d.createElement(z7,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:t,first:!0})),d.createElement("div",{style:r.swatch},d.createElement(z7,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:t})),d.createElement("div",{style:r.swatch},d.createElement(z7,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:t})),d.createElement("div",{style:r.swatch},d.createElement(z7,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:t})),d.createElement("div",{style:r.swatch},d.createElement(z7,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:t,last:!0})),d.createElement("div",{style:r.clear}))},j7=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,i=e.styles,a=void 0===i?{}:i,o=e.className,s=void 0===o?"":o,l=w5(z4({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return d.createElement("div",{style:l.wrap||{},className:"slider-picker "+s},d.createElement("div",{style:l.hue},d.createElement($5,{style:l.Hue,hsl:t,pointer:r,onChange:n})),d.createElement("div",{style:l.swatches},d.createElement(H7,{hsl:t,onClick:n})))};j7.propTypes={styles:J.object},j7.defaultProps={pointer:function(){var e=w5({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return d.createElement("div",{style:e.picker})},styles:{}},v8(j7);var G7={};Object.defineProperty(G7,"__esModule",{value:!0});var $7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y7=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);var U7=G7.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,a=e.height,o=void 0===a?24:a,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return Y7.default.createElement("svg",$7({viewBox:"0 0 24 24",style:$7({fill:n,width:i,height:o},l)},c),Y7.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},V7=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,a=e.first,o=e.last,s=e.active,l=w5({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:d8(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:o,active:s,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return d.createElement(w8,{color:t,style:l.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},d.createElement("div",{style:l.check},d.createElement(U7,null)))},W7=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,i=e.active,a=w5({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return d.createElement("div",{style:a.group},C3(r,(function(e,a){return d.createElement(V7,{key:e,color:e,active:e.toLowerCase()===i,first:0===a,last:a===r.length-1,onClick:t,onSwatchHover:n})})))},X7=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.onSwatchHover,a=e.colors,o=e.hex,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=w5(z4({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},l)),p=function(e,t){return r({hex:e,source:"hex"},t)};return d.createElement("div",{style:h.picker,className:"swatches-picker "+u},d.createElement(H4,null,d.createElement("div",{style:h.overflow},d.createElement("div",{style:h.body},C3(a,(function(e){return d.createElement(W7,{key:e.toString(),group:e,active:o,onClick:p,onSwatchHover:i})})),d.createElement("div",{style:h.clear})))))};X7.propTypes={width:J.oneOfType([J.string,J.number]),height:J.oneOfType([J.string,J.number]),colors:J.arrayOf(J.arrayOf(J.string)),styles:J.object},X7.defaultProps={width:320,height:240,colors:[[O3,A3,_3,k3,S3],[L3,F3,N3,M3,I3],[z3,B3,D3,R3,P3],[Y3,$3,G3,j3,H3],[q3,X3,W3,V3,U3],[e6,J3,Z3,Q3,K3],[a6,i6,r6,n6,t6],[u6,c6,l6,s6,o6],[m6,f6,d6,p6,h6],["#194D33",x6,y6,v6,g6],[w6,T6,C6,b6,E6],[O6,A6,_6,k6,S6],[L6,F6,N6,M6,I6],[z6,B6,D6,R6,P6],[Y6,$6,G6,j6,H6],[q6,X6,W6,V6,U6],[e7,J6,Z6,Q6,K6],[a7,i7,r7,n7,t7],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},v8(X7);var q7=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,a=e.width,o=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=w5(z4({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},l),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o}),p=function(e,n){p8(e)&&t({hex:e,source:"hex"},n)};return d.createElement("div",{style:h.card,className:"twitter-picker "+u},d.createElement("div",{style:h.triangleShadow}),d.createElement("div",{style:h.triangle}),d.createElement("div",{style:h.body},C3(i,(function(e,t){return d.createElement(w8,{key:t,color:e,hex:e,style:h.swatch,onClick:p,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),d.createElement("div",{style:h.hash},"#"),d.createElement(B5,{label:null,style:{input:h.input},value:r.replace("#",""),onChange:p}),d.createElement("div",{style:h.clear})))};q7.propTypes={width:J.oneOfType([J.string,J.number]),triangle:J.oneOf(["hide","top-left","top-right"]),colors:J.arrayOf(J.string),styles:J.object},q7.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},v8(q7);var K7=function(e){var t=w5({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return d.createElement("div",{style:t.picker})};K7.propTypes={hsl:J.shape({h:J.number,s:J.number,l:J.number,a:J.number})},K7.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Q7=function(e){var t=w5({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return d.createElement("div",{style:t.picker})};Q7.propTypes={hsl:J.shape({h:J.number,s:J.number,l:J.number,a:J.number})},Q7.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Z7=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,a=e.hsv,o=function(e,n){if(e.hex)p8(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");f8(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var i=e.hsv.split(",");f8(e.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("°",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},n))}else if(e.hsl){var a=e.hsl.split(",");f8(e.hsl,"hsl")&&(a[2]=a[2].replace("%",""),a[1]=a[1].replace("%",""),a[0]=a[0].replace("°",""),1==u[1]?u[1]=.01:1==u[2]&&(u[2]=.01),t({h:Number(a[0]),s:Number(a[1]),v:Number(a[2]),source:"hsl"},n))}},s=w5({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),l=n.r+", "+n.g+", "+n.b,c=Math.round(r.h)+"°, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",u=Math.round(a.h)+"°, "+Math.round(100*a.s)+"%, "+Math.round(100*a.v)+"%";return d.createElement("div",{style:s.wrap,className:"flexbox-fix"},d.createElement("div",{style:s.fields},d.createElement("div",{style:s.double},d.createElement(B5,{style:{input:s.input,label:s.label},label:"hex",value:i,onChange:o})),d.createElement("div",{style:s.column},d.createElement("div",{style:s.single},d.createElement(B5,{style:{input:s.input2,label:s.label2},label:"rgb",value:l,onChange:o})),d.createElement("div",{style:s.single},d.createElement(B5,{style:{input:s.input2,label:s.label2},label:"hsv",value:u,onChange:o})),d.createElement("div",{style:s.single},d.createElement(B5,{style:{input:s.input2,label:s.label2},label:"hsl",value:c,onChange:o})))))},J7=function(e){var t=e.width,n=e.onChange,r=e.rgb,i=e.hsl,a=e.hsv,o=e.hex,s=e.header,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p=w5(z4({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return d.createElement("div",{style:p.picker,className:"google-picker "+h},d.createElement("div",{style:p.head},s),d.createElement("div",{style:p.swatch}),d.createElement("div",{style:p.saturation},d.createElement(t8,{hsl:i,hsv:a,pointer:K7,onChange:n})),d.createElement("div",{style:p.body},d.createElement("div",{style:p.controls,className:"flexbox-fix"},d.createElement("div",{style:p.hue},d.createElement($5,{style:p.Hue,hsl:i,radius:"4px",pointer:Q7,onChange:n}))),d.createElement(Z7,{rgb:r,hsl:i,hex:o,hsv:a,onChange:n})))};J7.propTypes={width:J.oneOfType([J.string,J.number]),styles:J.object,header:J.string},J7.defaultProps={width:652,styles:{},header:"Color picker"},v8(J7);function eee(e){const{value:t="#000",onChange:n}=e,[r,i]=f.exports.useState(!1),a=f.exports.useRef(null);var o,s;return o=a,s=()=>{i(!1)},f.exports.useEffect((()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&s(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[o,s]),d.createElement(jt,{trigger:"click",placement:"left",visible:r,overlayClassName:"color-picker-popover",content:d.createElement("div",{ref:a,onMouseLeave:()=>{i(!1)}},d.createElement(B7,{color:t,onChange:e=>{n&&n(e.hex)}}))},d.createElement("div",{style:{background:t,width:32,height:32,borderRadius:2,cursor:"pointer"},onClick:()=>{i(!r)}}))}function tee(){return d.createElement(y9,{header:"阈值"},d.createElement(Et.List,{name:["options","thresholds","steps"]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement(yt,{style:{width:"100%",marginBottom:10},onClick:()=>{t({value:0})}},"添加"),e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(bt.Group,{key:r,compact:!0,style:{marginBottom:5}},d.createElement(Et.Item,l(s({noStyle:!0},a),{name:[i,"color"]}),d.createElement(eee,null)),d.createElement(Et.Item,l(s({noStyle:!0},a),{name:[i,"value"]}),d.createElement(Rt,{style:{width:430}})),d.createElement(yt,{style:{width:50},icon:d.createElement(be,null),onClick:()=>{n(i)}}))}))))))}function nee(){return d.createElement(d.Fragment,null,d.createElement(x9,null),d.createElement(E9,null),d.createElement(b9,null),d.createElement(w9,null),d.createElement(tee,null))}const ree=[1,2,3,4,5,6,7,8,9,10];function iee(){const e=["custom"];return d.createElement(y9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(St,{gutter:10},d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"显示内容",name:[...e,"textMode"]},d.createElement(Dt.Group,{buttonStyle:"solid"},d.createElement(Dt.Button,{value:"valueAndName"},"名称和值"),d.createElement(Dt.Button,{value:"value"},"值")))),d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"颜色模式",name:[...e,"colorMode"]},d.createElement(Dt.Group,{buttonStyle:"solid"},d.createElement(Dt.Button,{value:"value"},"值"),d.createElement(Dt.Button,{value:"background"},"背景"))))),d.createElement(St,{gutter:10},d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"取值计算",name:[...e,"calc"]},d.createElement(It,{suffixIcon:d.createElement(j,null)},S.map(Ic,((e,t)=>d.createElement(It.Option,{key:t,value:t},e.name)))))),d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"每行最多显示",name:[...e,"colSpan"]},d.createElement(It,{suffixIcon:d.createElement(j,null)},S.map(ree,(e=>d.createElement(It.Option,{key:e,value:e},e))))))),d.createElement(St,{gutter:10},d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"标题字体大小",name:[...e,"textSize","title"]},d.createElement(Rt,{placeholder:"auto",style:{width:"100%"},min:12,max:100}))),d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"值字体大小",name:[...e,"textSize","value"]},d.createElement(Rt,{placeholder:"auto",style:{width:"100%"},min:12,max:100}))))))}function aee(e){const{preNamePrefix:t=[],namePrefix:n=["options","valueMappings"]}=e;return d.createElement(y9,{header:"值映射"},d.createElement(Et.List,{name:n},((e,{add:r,remove:i})=>d.createElement(d.Fragment,null,d.createElement(yt,{style:{width:"100%",marginBottom:10},onClick:()=>{r({type:"special"})}},"添加"),S.isEmpty(e)?null:d.createElement(St,{gutter:10},d.createElement(kt,{flex:"290px"},d.createElement(Ct,{overlayInnerStyle:{width:300},title:d.createElement("div",null,d.createElement("div",null,"范围值说明: from >= value <= to"),d.createElement("div",null,"范围值默认值: from=-Infinity; to=Infinity "),d.createElement("div",null,"特殊值Null说明: 匹配值为 null 或 undefined 或 no data"))},"条件 ",d.createElement(D,null))),d.createElement(kt,{flex:"210"},"显示文字"),d.createElement(kt,{flex:"45"},"颜色"),d.createElement(kt,{flex:"50"},"操作")),e.map((e=>{var r=e,{key:a,name:o}=r,u=c(r,["key","name"]);return d.createElement(St,{key:a,gutter:10,style:{marginBottom:10}},d.createElement(kt,{flex:"290px"},d.createElement(St,{gutter:10},d.createElement(kt,{flex:"80px"},d.createElement(Et.Item,l(s({noStyle:!0},u),{name:[o,"type"]}),d.createElement(It,{suffixIcon:d.createElement(j,null),style:{width:80}},d.createElement(It.Option,{value:"special"},"固定值"),d.createElement(It.Option,{value:"range"},"范围值"),d.createElement(It.Option,{value:"specialValue"},"特殊值")))),d.createElement(kt,{flex:"1"},d.createElement(Et.Item,l(s({noStyle:!0},u),{shouldUpdate:!0}),(({getFieldValue:e})=>{const r=e([...t,...n,o,"type"]);return"special"===r?d.createElement(Et.Item,l(s({noStyle:!0},u),{name:[o,"match","special"]}),d.createElement(Rt,{style:{width:"100%"}})):"range"===r?d.createElement(St,{gutter:10},d.createElement(kt,{span:12},d.createElement(Et.Item,l(s({noStyle:!0},u),{name:[o,"match","from"]}),d.createElement(Rt,{placeholder:"from"}))),d.createElement(kt,{span:12},d.createElement(Et.Item,l(s({noStyle:!0},u),{name:[o,"match","to"]}),d.createElement(Rt,{placeholder:"to"})))):"specialValue"===r?d.createElement(Et.Item,l(s({noStyle:!0},u),{name:[o,"match","specialValue"]}),d.createElement(It,{suffixIcon:d.createElement(j,null),style:{width:"100%"}},d.createElement(It.Option,{value:"null"},"Null"),d.createElement(It.Option,{value:"empty"},"Empty string"))):null}))))),d.createElement(kt,{flex:"210"},d.createElement(Et.Item,l(s({noStyle:!0},u),{name:[o,"result","text"]}),d.createElement(bt,{placeholder:"可选"}))),d.createElement(kt,{flex:"45"},d.createElement(Et.Item,l(s({noStyle:!0},u),{name:[o,"result","color"]}),d.createElement(eee,null))),d.createElement(kt,{flex:"50"},d.createElement(yt,{onClick:()=>{i(o)},icon:d.createElement(be,null)})))}))))))}function oee(){return d.createElement(d.Fragment,null,d.createElement(iee,null),d.createElement(aee,null),d.createElement(w9,null))}function see({chartForm:e}){const t=["custom"],{state:n}=f.exports.useContext(Th);return d.createElement(y9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(St,{gutter:10},d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"显示表头",name:[...t,"showHeader"],valuePropName:"checked"},d.createElement(Ft,{size:"small"})))),d.createElement(Et.Item,{label:"取值计算",name:[...t,"calc"]},d.createElement(It,{suffixIcon:d.createElement(j,null)},S.map(Ic,((e,t)=>d.createElement(It.Option,{key:t,value:t},e.name))))),d.createElement(St,{gutter:10},d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"显示模式",name:[...t,"displayMode"]},d.createElement(It,{suffixIcon:d.createElement(j,null)},d.createElement(It.Option,{value:"seriesToRows"},"每行展示 serie 的值"),d.createElement(It.Option,{value:"labelsOfSeriesToRows"},"每行展示 labels 的值"),d.createElement(It.Option,{value:"labelValuesToRows"},"每行展示指定聚合维度的值")))),d.createElement(Et.Item,{noStyle:!0,shouldUpdate:(e,n)=>S.get(e,[...t,"displayMode"])!==S.get(n,[...t,"displayMode"])},(({getFieldValue:e})=>"labelsOfSeriesToRows"===e([...t,"displayMode"])?d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"显示列",name:[...t,"columns"]},d.createElement(It,{mode:"multiple",placeholder:"默认全选",suffixIcon:d.createElement(j,null)},S.map(S.concat(n.metric,"value"),(e=>d.createElement(It.Option,{key:e,value:e},e)))))):"labelValuesToRows"===e([...t,"displayMode"])?d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"显示维度",name:[...t,"aggrDimension"]},d.createElement(It,{suffixIcon:d.createElement(j,null)},S.map(n.metric,(e=>d.createElement(It.Option,{key:e,value:e},e)))))):null))),d.createElement(St,{gutter:10},d.createElement(kt,{span:12},d.createElement(Et.Item,{noStyle:!0,shouldUpdate:!0},(({getFieldValue:r})=>{const i=r([...t,"displayMode"]),a=r([...t,"columns"])?r([...t,"columns"]):S.concat(n.metric,"value"),o=r([...t,"aggrDimension"]);let s=[];return"seriesToRows"===i?s=["name","value"]:"labelsOfSeriesToRows"===i?s=a:"labelValuesToRows"===i&&(s=[o||"name","value"]),d.createElement(Et.Item,{label:"默认排序列",name:[...t,"sortColumn"]},d.createElement(It,{suffixIcon:d.createElement(j,null),allowClear:!0,onChange:()=>{if(!e.getFieldValue([...t,"sortOrder"])){const t=e.getFieldValue("custom");S.set(t,"sortOrder","ascend"),e.setFieldsValue({custom:t})}}},S.map(s,(e=>d.createElement(It.Option,{key:e,value:e},e)))))}))),d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"默认排序顺序",name:[...t,"sortOrder"]},d.createElement(It,{suffixIcon:d.createElement(j,null),allowClear:!0},d.createElement(It.Option,{value:"ascend"},"asc"),d.createElement(It.Option,{value:"descend"},"desc")))))))}function lee({targets:e}){const t=["overrides"];return d.createElement(Et.List,{name:t},((n,{add:r,remove:i})=>n.map((a=>{var o=a,{key:u,name:h}=o,p=c(o,["key","name"]);return d.createElement(y9,{key:u,isInner:!0,header:"override",extra:d.createElement(Pt,null,d.createElement(V,{onClick:()=>{r({type:"special"})}}),n.length>1&&d.createElement(U,{onClick:()=>{i(h)}}))},d.createElement(Et.Item,l(s({label:"查询条件名称"},p),{name:[h,"matcher","value"]}),d.createElement(It,{suffixIcon:d.createElement(j,null),allowClear:!0},S.map(e,(e=>d.createElement(It.Option,{key:e.refId,value:e.refId},e.refId))))),d.createElement(aee,{preNamePrefix:t,namePrefix:[h,"properties","valueMappings"]}),d.createElement(w9,{preNamePrefix:t,namePrefix:[h,"properties","standardOptions"]}))}))))}function cee({targets:e,chartForm:t}){return d.createElement(d.Fragment,null,d.createElement(see,{chartForm:t}),d.createElement(aee,null),d.createElement(w9,null),d.createElement(lee,{targets:e}))}function uee(){const e=["custom"];return d.createElement(y9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(St,{gutter:10},d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"取值计算",name:[...e,"calc"]},d.createElement(It,{suffixIcon:d.createElement(j,null)},S.map(Ic,((e,t)=>d.createElement(It.Option,{key:t,value:t},e.name)))))),d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"图例位置",name:[...e,"legengPosition"]},d.createElement(It,{suffixIcon:d.createElement(j,null)},Fc.map((e=>d.createElement(It.Option,{key:e,value:e},e)))))),d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"最多展示块数",name:[...e,"max"],tooltip:"超过的块数则合并展示为其他"},d.createElement(Rt,{style:{width:"100%"}}))),d.createElement(kt,{span:12},d.createElement(Et.Item,{label:"label是否包含名称",name:[...e,"labelWithName"],valuePropName:"checked"},d.createElement(Ft,null))))))}function hee(){return d.createElement(d.Fragment,null,d.createElement(uee,null))}function pee(){const e=["custom"];return d.createElement(y9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(St,{gutter:10},d.createElement(kt,{span:10},d.createElement(Et.Item,{label:"取值计算",name:[...e,"calc"]},d.createElement(It,{suffixIcon:d.createElement(j,null)},S.map(Ic,((e,t)=>d.createElement(It.Option,{key:t,value:t},e.name)))))),d.createElement(kt,{span:10},d.createElement(Et.Item,{label:"颜色",name:[...e,"colorRange"]},d.createElement(It,{suffixIcon:d.createElement(j,null),dropdownClassName:"color-scales",optionLabelProp:"label"},S.map(Ac,(e=>d.createElement(It.Option,{key:e.value,label:e.label,value:S.join(e.value,",")},d.createElement("span",{className:"color-scales-menu-colors"},S.map(e.value,(e=>d.createElement("span",{key:e,style:{backgroundColor:e}})))),e.label)))))),d.createElement(kt,{span:4},d.createElement(Et.Item,{label:"反转颜色",name:[...e,"reverseColorOrder"],valuePropName:"checked"},d.createElement(Ft,null)))),d.createElement(St,{gutter:10},d.createElement(kt,{span:8},d.createElement(Et.Item,{label:"自动 min/max 值",tooltip:"默认自动从 series 里面取 min max 值",name:[...e,"colorDomainAuto"],valuePropName:"checked"},d.createElement(Ft,null))),d.createElement(Et.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:t})=>{if(!t([...e,"colorDomainAuto"]))return d.createElement(d.Fragment,null,d.createElement(kt,{span:8},d.createElement(Et.Item,{label:"min",name:[...e,"colorDomain",0]},d.createElement(Rt,{style:{width:"100%"}}))),d.createElement(kt,{span:8},d.createElement(Et.Item,{label:"max",name:[...e,"colorDomain",1]},d.createElement(Rt,{style:{width:"100%"}}))))})))))}function dee(){return d.createElement(d.Fragment,null,d.createElement(pee,null),d.createElement(w9,null))}function fee({type:e,targets:t,chartForm:n}){return{timeseries:d.createElement(nee,null),stat:d.createElement(oee,null),table:d.createElement(cee,{targets:t,chartForm:n}),pie:d.createElement(hee,null),hexbin:d.createElement(dee,null)}[e]||`无效的图表类型 ${e}`}const mee="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split(""),gee=e=>{for(let t=0;t<mee.length;t++){const n=mee[t];if(!S.includes(e,n))return n}return"Z"},vee="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split("");function yee(e){const{chartForm:t,setChangedFlag:n,initialValues:r,type:i,variableConfig:a,cluster:o,render:u,range:h,id:p}=e,[m,g]=f.exports.useState(a);return Mc.custom=Nc[S.get(r,"type")||Mc.type],d.createElement(Et,{layout:"vertical",form:t,initialValues:S.merge({},Mc,r),onValuesChange:()=>{n(S.uniqueId("xxx_"))}},d.createElement("div",{style:{height:"calc(100vh - 173px)"}},d.createElement(St,{gutter:20,style:{flexWrap:"nowrap",height:"100%"}},d.createElement(kt,{flex:1,style:{minWidth:100}},d.createElement("div",{style:{marginBottom:10}},u(m)),d.createElement("div",{style:{height:"calc(100% - 310px)",overflowY:"auto"}},d.createElement("div",{style:{marginBottom:10}},d.createElement(G0,{onChange:e=>{g(e)},value:m,editable:!1,cluster:o,range:h,id:p})),d.createElement(Et.List,{name:"targets"},((e,{add:n,remove:r},{errors:i})=>d.createElement(d.Fragment,null,d.createElement(v9,null,S.map(e,(({name:t},n)=>d.createElement(y9,{header:d.createElement(Et.Item,{noStyle:!0,shouldUpdate:!0},(({getFieldValue:e})=>e(["targets",t,"refId"])||vee[n])),key:n,extra:d.createElement("div",null,e.length>1?d.createElement(be,{style:{marginLeft:10},onClick:()=>{r(t)}}):null)},d.createElement(Et.Item,{noStyle:!0,name:[t,"refId"]},d.createElement("div",null)),d.createElement("div",{style:{display:"flex",alignItems:"center"}},d.createElement(Et.Item,{label:"PromQL",name:[t,"expr"],validateTrigger:["onBlur"],rules:[{required:!0,message:"请输入PromQL"}],style:{flex:1}},d.createElement(g9,{url:"/api/n9e/prometheus",headers:{"X-Cluster":localStorage.getItem("curCluster")||"DEFAULT",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`}}))),d.createElement(St,{gutter:10},d.createElement(kt,{flex:"auto"},d.createElement(Et.Item,{label:"Legend",name:[t,"legend"],tooltip:{getPopupContainer:()=>document.body,title:"Controls the name of the time series, using name or pattern. For example {{hostname}} will be replaced with label value for the label hostname."}},d.createElement(bt,null))),d.createElement(kt,{flex:"116px"},d.createElement(Et.Item,{label:"时间选择",name:[t,"time"],tooltip:{getPopupContainer:()=>document.body,title:"可指定时间范围，默认为大盘全局时间范围"}},d.createElement(ru,{nullable:!0}))),d.createElement(kt,{flex:"72px"},d.createElement(Et.Item,{label:"Step",name:[t,"step"],tooltip:{getPopupContainer:()=>document.body,title:"可指定 step，默认为大盘全局 step"}},d.createElement(au,null))))))),d.createElement(Et.ErrorList,{errors:i})),d.createElement(yt,{style:{width:"100%",marginTop:10},onClick:()=>{n({expr:"",refId:gee(S.map(t.getFieldValue("targets"),"refId"))})}},"+ add query")))))),d.createElement(kt,{flex:"600px",style:{overflowY:"auto"}},d.createElement(v9,null,d.createElement(y9,{header:"面板配置"},d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:"标题",name:"name",rules:[{required:!0,message:"图表名称"}]},d.createElement(bt,null)),d.createElement(Et.Item,{label:"下钻链接"},d.createElement(Et.List,{name:"links"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement(yt,{style:{width:"100%",marginBottom:10},onClick:()=>{t({})}},"添加"),e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(Pt,{key:r,style:{alignItems:"flex-start"}},d.createElement(Et.Item,l(s({},a),{name:[i,"title"],rules:[{required:!0,message:"链接名称"}]}),d.createElement(bt,{placeholder:"链接名称"})),d.createElement(Et.Item,l(s({},a),{name:[i,"url"],rules:[{required:!0,message:"链接地址"}]}),d.createElement(bt,{style:{width:260},placeholder:"链接地址"})),d.createElement(Ct,{title:"是否新窗口打开"},d.createElement(Et.Item,l(s({},a),{name:[i,"targetBlank"],valuePropName:"checked"}),d.createElement(Ft,null))),d.createElement(yt,{icon:d.createElement(be,null),onClick:()=>{n(i)}}))}))))),d.createElement(Et.Item,{label:"备注",name:"description"},d.createElement(bt.TextArea,{placeholder:"支持 markdown"}))))),d.createElement(Et.Item,{shouldUpdate:(e,t)=>!S.isEqual(e.targets,t.targets)},(({getFieldValue:e})=>d.createElement(fee,{type:i,targets:e("targets"),chartForm:t}))))))))}var xee=Z0((function(e){var t;const{t:n}=Fr(),{visible:r,variableConfig:i,cluster:a,id:o}=e,s=S.cloneDeep(e.initialValues),[l]=Et.useForm(),[c,u]=f.exports.useState({description:"小时",num:1,unit:"hour"}),h=S.get(s,"type")||Mc.type,[p,m]=f.exports.useState(h),[g,v]=f.exports.useState(null),[y,x]=f.exports.useState(S.uniqueId("xxx_")),[E,b]=f.exports.useState(l.getFieldsValue());return"hexbin"===s.type&&(null==(t=null==s?void 0:s.custom)?void 0:t.colorRange)&&S.isArray(s.custom.colorRange)&&S.set(s,"custom.colorRange",S.join(s.custom.colorRange,",")),f.exports.useEffect((()=>{b(l.getFieldsValue())}),[y]),d.createElement(Ot,{width:"100%",title:d.createElement("div",{style:{display:"flex",alignItems:"center"}},d.createElement("div",null,n(s?"编辑图表":"新建图表")),d.createElement(Pt,{style:{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"center",fontSize:12,lineHeight:"20px"}},d.createElement(It,{dropdownMatchSelectWidth:!1,value:p,onChange:e=>{m(e),l.setFieldsValue({custom:Nc[e]}),setTimeout((()=>{x(S.uniqueId("xxx_"))}),100)}},S.map(Oc,(e=>d.createElement(It.Option,{value:e.type,key:e.type},e.name)))),d.createElement(ru,{onChange:e=>u(e)}),d.createElement(au,{onChange:e=>v(e),initialValue:g}),d.createElement(Fe,{style:{fontSize:18},onClick:()=>{e.destroy()}}))),style:{top:10,padding:0},visible:r,closable:!1,footer:[d.createElement(yt,{key:"cancel",onClick:()=>{e.destroy()}},"取消"),d.createElement(yt,{key:"ok",type:"primary",onClick:()=>{(async()=>{l.validateFields().then((async t=>{"hexbin"===p&&S.set(t,"custom.colorRange",S.split(t.custom.colorRange,","));let n=Object.assign(t,{version:"2.0.0",type:p,layout:null==s?void 0:s.layout});s&&s.id?n.id=s.id:n.id=_c(),e.onOK(n),e.destroy()}))})()}},"确认")],onCancel:()=>{e.destroy()},bodyStyle:{padding:"10px 24px 24px 24px"}},d.createElement(kh,null,d.createElement(yee,{chartForm:l,setChangedFlag:x,initialValues:s,type:p,variableConfig:i,cluster:a,range:c,id:o,render:e=>d.createElement("div",{style:{height:300,border:"1px solid #d9d9d9"}},d.createElement(K0,{dashboardId:o,time:c,step:g,type:p,values:E,variableConfig:e,isPreview:!0}))})))}));const Eee=Le.exports.WidthProvider(Pe);var bee=d.memo((function(e){const{curCluster:t,dashboard:n,range:r,step:i,refreshFlag:a,variableConfig:o,panels:c,setPanels:u,onShareClick:h}=e,p=f.exports.useRef(!1),m=f.exports.useRef(!1);return d.createElement("div",{className:"dashboards-panels"},d.createElement(Eee,s({layout:t9(c),onLayoutChange:e=>{if(p.current){const t=n9(r9(c,e));S.isEqual(c,t)||(u(t),m.current&&(m.current=!1,yo(n.id,{configs:h9(n.configs,t)})))}p.current=!0},onDragStop:e=>{const t=n9(r9(c,e));S.isEqual(c,t)||yo(n.id,{configs:h9(n.configs,t)})},onResizeStop:e=>{const t=n9(r9(c,e));S.isEqual(c,t)||yo(n.id,{configs:h9(n.configs,t)})}},{rowHeight:40,cols:24,useCSSTransforms:!1,draggableHandle:".dashboards-panels-item-drag-handle"}),S.map(c,(e=>d.createElement("div",{key:e.layout.i,"data-id":e.layout.i},"row"!==e.type?Ec.valid(e.version)?d.createElement(K0,{dashboardId:S.toString(n.id),id:e.id,time:r,refreshFlag:a,step:i,type:e.type,values:e,variableConfig:o,onCloneClick:()=>{const t=function(e,t){return S.concat(e,t)}(c,l(s({},e),{id:_c(),layout:l(s({},e.layout),{i:_c()})}));u(t),m.current=!0},onShareClick:()=>{h(e)},onEditClick:()=>{xee({visible:!0,variableConfig:o,cluster:t,id:e.id,initialValues:l(s({},e),{id:e.id}),onOK:e=>{const t=l9(c,e);u(t),yo(n.id,{configs:h9(n.configs,t)})}})},onDeleteClick:()=>{Ot.confirm({title:`是否删除图表：${e.name}`,onOk:async()=>{const t=S.filter(c,(t=>t.id!==e.id));m.current=!0,u(t),yo(n.id,{configs:h9(n.configs,t)})}})}}):d.createElement("div",{className:"dashboards-panels-item-invalid"},d.createElement("div",null,d.createElement("div",null,"无效的图表配置"),d.createElement("a",{onClick:()=>{const t=S.filter(c,(t=>t.id!==e.id));m.current=!0,u(t),yo(n.id,{configs:h9(n.configs,t)})}},"删除"))):d.createElement(p9,{name:e.name,row:e,onToggle:()=>{const t=function(e,t,n){let r=S.cloneDeep(t);return r=e?o9(r,n):s9(r,n),S.find(r,{id:n.id}).collapsed=e,r}(!e.collapsed,c,S.cloneDeep(e));u(t),yo(n.id,{configs:h9(n.configs,t)})},onAddClick:()=>{xee({visible:!0,variableConfig:o,cluster:t,id:e.id,initialValues:{type:"timeseries",targets:[{refId:"A",expr:""}]},onOK:t=>{const r=u9(c,e.id,t);u(r),yo(n.id,{configs:h9(n.configs,r)})}})},onEditClick:e=>{const t=l9(c,e);u(t),yo(n.id,{configs:h9(n.configs,t)})},onDeleteClick:t=>{let r=S.cloneDeep(c);"self"===t?(r=o9(r,e),r=S.filter(r,(t=>t.id!==e.id))):(r=s9(r,e),r=S.filter(r,(t=>t.id!==e.id))),m.current=!0,u(r),yo(n.id,{configs:h9(n.configs,r)})}}))))))}));const Cee={0:"off",5:"5s",10:"10s",20:"20s",30:"30s",60:"1m",120:"2m",180:"3m",300:"5m",600:"10m"},Tee=S.toNumber(window.localStorage.getItem("refresh-interval-seconds"));var wee=d.forwardRef((function(e,t){const[n,r]=f.exports.useState(Tee),i=f.exports.useRef();return f.exports.useEffect((()=>{i.current&&clearInterval(i.current),n&&(i.current=setInterval((()=>{e.onRefresh()}),1e3*n))}),[n]),f.exports.useEffect((()=>()=>{i.current&&clearInterval(i.current)}),[]),f.exports.useImperativeHandle(t,(()=>({closeRefresh(){r(0),window.localStorage.setItem("refresh-interval-seconds","0")}}))),d.createElement("div",{className:"refresh-container"},d.createElement(yt,{className:"refresh-btn",icon:d.createElement(ue,null),onClick:e.onRefresh}),d.createElement(Tt,{trigger:["click"],overlay:d.createElement(vt,{onClick:e=>{r(S.toNumber(e.key)),window.localStorage.setItem("refresh-interval-seconds",S.toString(e.key))}},S.map(Cee,((e,t)=>d.createElement(vt.Item,{key:t},e))))},d.createElement(yt,null,Cee[n]," ",d.createElement(M,null))))}));function See(e){const{curCluster:t,clusters:n,setCurCluster:r,dashboard:i,setDashboard:a,refresh:o,range:c,setRange:u,step:h,setStep:p,refreshFlag:m,setRefreshFlag:g,refreshRef:v,onAddPanel:y}=e,{id:x,name:E}=i,b=w(),[C,T]=f.exports.useState(!1),k=f.exports.useRef(null),_=async e=>{vo(x,l(s({},i),{name:e})).then((()=>{a(l(s({},i),{name:e})),T(!1)}))},{run:A}=Re((()=>{if("start"in c&&c.start&&c.end){const e=c.end-c.start,t=O().unix();u({end:t,start:t-e})}else if("unit"in c&&c.unit){const e=S.uniqueId("refreshFlag_");u(l(s({},c),{refreshFlag:e})),g(e)}o(!1)}),{wait:1e3});return d.createElement("div",{className:"dashboard-detail-header"},d.createElement("div",{className:"dashboard-detail-header-left"},d.createElement(I,{className:"back",onClick:()=>b.push("/dashboards")}),C?d.createElement(bt,{ref:k,defaultValue:E,onPressEnter:e=>{_(e.target.value)}}):d.createElement("div",{className:"title"},i.name),C?d.createElement(d.Fragment,null,d.createElement(yt,{size:"small",style:{marginRight:5,marginLeft:5},onClick:()=>T(!1)},"取消"),d.createElement(yt,{size:"small",type:"primary",onClick:()=>{_(k.current.state.value)}},"保存")):d.createElement(Te,{className:"edit",onClick:()=>{T(!C)}})),d.createElement("div",{className:"dashboard-detail-header-right"},d.createElement(Pt,null,d.createElement("div",null,d.createElement(Tt,{trigger:["click"],overlay:d.createElement(vt,null,S.map([{type:"row",name:"分组"},...Oc],(e=>d.createElement(vt.Item,{key:e.type,onClick:()=>{y(e.type)}},e.name))))},d.createElement(yt,{type:"primary",icon:d.createElement(oh,null)},"添加图表"))),d.createElement("div",{style:{display:"flex",alignItems:"center"}},"集群：",d.createElement(Tt,{overlay:d.createElement(vt,{selectedKeys:[t]},n.map((e=>d.createElement(vt.Item,{key:e,onClick:t=>{r(e),localStorage.setItem("curCluster",e),o()}},e))))},d.createElement(yt,null,t," ",d.createElement(M,null)))),d.createElement(ru,{value:c,onChange:u}),d.createElement(au,{onChange:e=>p(e),initialValue:h}),d.createElement(wee,{onRefresh:A,ref:v}))))}function kee(){const e=localStorage.getItem("curCluster"),{id:t}=q(),n=f.exports.useRef(),{clusters:r}=ni((e=>e.common)),[i,a]=f.exports.useState(e||r[0]),[o,c]=f.exports.useState({create_by:"",favorite:0,id:0,name:"",tags:"",update_at:0,update_by:""}),[u,h]=f.exports.useState(),[p,m]=f.exports.useState(),[g,v]=f.exports.useState(),[y,x]=f.exports.useState([]),[E,b]=f.exports.useState({unit:"hour",num:1,description:""}),[C,T]=f.exports.useState(null),[w,k]=f.exports.useState(S.uniqueId("refreshFlag_")),_=()=>{go(t).then((e=>{if(c(e),e.configs){const t=Bc(e.configs),n=t.var?t:l(s({},t),{var:[]});h(n),v(t.links),x(n9(t.panels))}}))};return f.exports.useEffect((()=>{_()}),[t,w]),d.createElement(Wi,{customArea:d.createElement(See,{curCluster:i,clusters:r,setCurCluster:a,dashboard:o,setDashboard:c,refresh:_,range:E,setRange:b,step:C,setStep:T,refreshFlag:w,setRefreshFlag:k,refreshRef:n,onAddPanel:e=>{if("row"===e){const e=c9(y,{type:"row",id:_c(),name:"分组",collapsed:!0},"row");x(e),yo(o.id,{configs:h9(o.configs,e)})}else xee({visible:!0,variableConfig:u,cluster:i,id:t,initialValues:{type:e,targets:[{refId:"A",expr:""}],custom:Nc[e]},onOK:e=>{const t=c9(y,e,"chart");x(t),yo(o.id,{configs:h9(o.configs,t)})}})}})},d.createElement("div",{className:"dashboard-detail-content"},d.createElement("div",{className:"dashboard-detail-content-header"},d.createElement("div",{className:"variable-area"},d.createElement(G0,{onChange:(e,n,r)=>{const i=Bc(o.configs);i.var=e.var,n&&yo(t,{configs:JSON.stringify(i)}),h(i),r&&m(r)},value:u,cluster:i,range:E,id:t,onOpenFire:()=>{var e;null==(e=n.current)||e.closeRefresh()}})),d.createElement(e9,{value:g,onChange:e=>{const n=Bc(o.configs);n.links=e,yo(t,{configs:JSON.stringify(n)}),v(e)}})),p&&d.createElement(bee,{panels:y,setPanels:x,curCluster:i,dashboard:o,range:E,step:C,refreshFlag:w,variableConfig:p,onShareClick:e=>{const n={dataProps:l(s({},e),{targets:S.map(e.targets,(e=>{const n=p?U0(e.expr,p,p.var.length,t):e.expr;return l(s({},e),{expr:n})})),step:C,range:E}),curCluster:localStorage.getItem("curCluster")};eu([{configs:JSON.stringify(n)}]).then((e=>{const t=e.dat;window.open("/chart/"+t)}))}})))}const _ee={labelCol:{span:4},wrapperCol:{span:20}},{Option:Aee}=It,Oee=d.forwardRef(((e,t)=>{const{t:n}=Fr(),{userId:r}=e,[i]=Et.useForm(),[a,o]=f.exports.useState(),[u,h]=f.exports.useState(!0),[p,m]=f.exports.useState([]),[g,v]=f.exports.useState([]);f.exports.useImperativeHandle(t,(()=>({form:i}))),f.exports.useEffect((()=>{r?x(r):h(!1),y(),ii("/api/n9e/roles",{method:Kr.Get}).then((e=>e&&e.dat)).then((e=>v(e)))}),[]);const y=()=>{Va().then((e=>{m(e)}))},x=e=>{(function(e){return ii(`/api/n9e/user/${e}/profile`,{method:Kr.Get}).then((e=>e&&e.dat))})(e).then((e=>{let t=[];e.contacts&&Object.keys(e.contacts).forEach((n=>{let r={key:n,value:e.contacts[n]};t.push(r)})),o(Object.assign({},e,{contacts:t})),h(!1)}))};return u?null:d.createElement(Et,l(s({},_ee),{form:i,initialValues:a,preserve:!1}),!r&&d.createElement(Et.Item,{label:n("用户名"),name:"username",rules:[{required:!0,message:n("用户名不能为空！")}]},d.createElement(bt,null)),d.createElement(Et.Item,{label:n("显示名"),name:"nickname"},d.createElement(bt,null)),!r&&d.createElement(d.Fragment,null,d.createElement(Et.Item,{name:"password",label:n("密码"),rules:[{required:!0,message:n("请输入密码!")}],hasFeedback:!0},d.createElement(bt.Password,null)),d.createElement(Et.Item,{name:"confirm",label:n("确认密码"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:n("请确认密码!")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("password")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(bt.Password,null))),d.createElement(Et.Item,{label:n("角色"),name:"roles",rules:[{required:!0,message:n("角色不能为空！")}]},d.createElement(It,{mode:"multiple"},g.map(((e,t)=>d.createElement(Aee,{value:e.name,key:t},d.createElement("div",null,d.createElement("div",null,e.name),d.createElement("div",{style:{color:"#8c8c8c"}},e.note))))))),d.createElement(Et.Item,{label:n("邮箱"),name:"email"},d.createElement(bt,null)),d.createElement(Et.Item,{label:n("手机"),name:"phone"},d.createElement(bt,null)),d.createElement(Et.Item,{label:n("更多联系方式")},d.createElement(Et.List,{name:"contacts"},((e,{add:t,remove:r})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:i,name:a,fieldKey:o}=t,u=c(t,["key","name","fieldKey"]);return d.createElement(Pt,{key:i,style:{display:"flex"},align:"baseline"},d.createElement(Et.Item,l(s({style:{width:"180px"}},u),{name:[a,"key"],fieldKey:[o,"key"],rules:[{required:!0,message:n("联系方式不能为空")}]}),d.createElement(It,{suffixIcon:d.createElement(j,null),placeholder:n("请选择联系方式")},p.map(((e,t)=>d.createElement(Aee,{value:e.key,key:t},e.label))))),d.createElement(Et.Item,l(s({},u),{style:{width:"170px"},name:[a,"value"],fieldKey:[o,"value"],rules:[{required:!0,message:n("值不能为空")}]}),d.createElement(bt,{placeholder:n("请输入值")})),d.createElement(U,{className:"control-icon-normal",onClick:()=>r(a)}))})),d.createElement(V,{className:"control-icon-normal",onClick:()=>t()}))))))})),Iee=d.forwardRef(((e,t)=>{const{t:n}=Fr(),{teamId:r}=e,[i]=Et.useForm(),[a,o]=f.exports.useState(),[c,u]=f.exports.useState(!0);f.exports.useImperativeHandle(t,(()=>({form:i}))),f.exports.useEffect((()=>{r?h(r):u(!1)}),[]);const h=e=>{Ya(e).then((e=>{o(e.user_group),u(!1)}))};return c?null:d.createElement(Et,l(s({},_ee),{form:i,initialValues:a,preserve:!1}),d.createElement(Et.Item,{label:n("团队名称"),name:"name",rules:[{required:!0,message:n("团队名称不能为空！")}]},d.createElement(bt,null)),d.createElement(Et.Item,{label:n("备注"),name:"note"},d.createElement(bt,null)))}));var Mee,Nee,Fee,Lee,Pee,Ree;(Nee=Mee||(Mee={})).User="用户",Nee.Team="团队",(Lee=Fee||(Fee={})).CreateUser="创建用户",Lee.CreateTeam="创建团队",Lee.CreateBusiness="创建业务组",Lee.AddBusinessMember="添加业务组成员",Lee.EditBusiness="编辑业务组",Lee.EditUser="编辑用户信息",Lee.EditTeam="编辑团队信息",Lee.Reset="重置密码",Lee.Disable="禁用",Lee.Undisable="启用",Lee.AddUser="添加成员",(Ree=Pee||(Pee={})).Admin="管理员",Ree.Standard="普通用户",Ree.Guest="游客";const{Option:Dee}=It,Bee=d.forwardRef(((e,t)=>{const{t:n}=Fr(),{businessId:r,action:i}=e,[a]=Et.useForm(),[o,u]=f.exports.useState([]),[h,p]=f.exports.useState({label_enable:!1,label_value:"",members:[{perm_flag:!0}],name:""}),[m,g]=f.exports.useState(!0),[v,y]=f.exports.useState(!0);f.exports.useImperativeHandle(t,(()=>({form:a}))),f.exports.useEffect((()=>{r&&i===Fee.EditBusiness?x(r):g(!1)}),[]);const x=e=>{$a(e).then((e=>{p({name:e.name,label_enable:1===e.label_enable,label_value:e.label_value,members:e.user_groups.map((e=>({perm_flag:"rw"===e.perm_flag,user_group_id:e.user_group.id})))}),g(!1)}))};f.exports.useEffect((()=>{E("")}),[]);const E=e=>{ja({query:e}).then((e=>{u(e.dat)}))},b=f.exports.useCallback(Y.exports.debounce(E,800),[]);return m?null:d.createElement(Et,l(s({},_ee),{form:a,initialValues:h,preserve:!1,layout:"horizontal"}),i!==Fee.AddBusinessMember&&d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:n("业务组名称"),name:"name",rules:[{required:!0,message:n("业务组名称不能为空！")}]},d.createElement(bt,null)),d.createElement(Et.Item,{label:n("作为标签使用"),name:"label_enable",valuePropName:"checked",tooltip:{title:"系统会自动把业务组的英文标识作为标签附到该业务组下辖监控对象的时序数据上",getPopupContainer:()=>document.body}},d.createElement(Ft,null)),d.createElement(Et.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.label_enable!==t.label_enable},(({getFieldValue:e})=>e("label_enable")&&d.createElement(Et.Item,{label:n("英文标识"),name:"label_value",rules:[{required:!0}],tooltip:{title:d.createElement("span",null,"尽量用英文，不能与其他业务组标识重复，系统会自动生成 ",d.createElement(At,{color:"blue"},"busigroup=",a.getFieldValue("label_value"))," 的标签"),getPopupContainer:()=>document.body}},d.createElement(bt,{onChange:e=>{y(!v)}}))))),(i===Fee.CreateBusiness||i===Fee.AddBusinessMember)&&d.createElement(Et.Item,{label:n("团队"),required:!0},d.createElement(Et.List,{name:"members"},((e,{add:t,remove:r})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:i,name:a,fieldKey:u}=t,h=c(t,["key","name","fieldKey"]);return d.createElement(Pt,{key:i,style:{display:"flex",marginBottom:8},align:"baseline"},d.createElement(Et.Item,l(s({style:{width:450}},h),{name:[a,"user_group_id"],fieldKey:[u,"user_group_id"],rules:[{required:!0,message:n("业务组团队不能为空！")}]}),d.createElement(It,{suffixIcon:d.createElement(j,null),style:{width:"100%"},filterOption:!1,onSearch:e=>b(e),showSearch:!0,onBlur:()=>E("")},o.map((e=>d.createElement(Dee,{key:e.id,value:e.id},e.name))))),d.createElement(Et.Item,l(s({},h),{name:[a,"perm_flag"],fieldKey:[u,"perm_flag"],valuePropName:"checked"}),d.createElement(Ft,{checkedChildren:"读写",unCheckedChildren:"只读"})),d.createElement(U,{onClick:()=>r(a)}))})),d.createElement(Et.Item,null,d.createElement(yt,{type:"dashed",onClick:()=>t(),block:!0,icon:d.createElement(Ce,null)},"添加团队")))))))})),zee=d.forwardRef(((e,t)=>{const{t:n}=Fr(),[r]=Et.useForm();return f.exports.useImperativeHandle(t,(()=>({form:r}))),d.createElement(Et,l(s({},_ee),{form:r}),d.createElement(Et.Item,{name:"password",label:n("密码"),rules:[{required:!0,message:n("请输入密码!")}],hasFeedback:!0},d.createElement(bt.Password,null)),d.createElement(Et.Item,{name:"confirm",label:n("确认密码"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:n("请确认密码!")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("password")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(bt.Password,null)))}));var Hee=d.forwardRef((function(e,t){var n=e,{fetchHandle:r,fetchParams:i={},needPagination:a=!0,pageSize:o,feQueryKey:u="query",feFixedKey:h="id",feQueryParams:p=[],fePaging:m=!1,autoFetch:g=!0,initFetch:v=!1,onFetchList:y,paginationProps:x}=n,E=c(n,["fetchHandle","fetchParams","needPagination","pageSize","feQueryKey","feFixedKey","feQueryParams","fePaging","autoFetch","initFetch","onFetchList","paginationProps"]);Fr();const[b,C]=f.exports.useState([]),[T,w]=f.exports.useState([]),[S,k]=f.exports.useState([]),[_,A]=f.exports.useState(!1),[O,I]=f.exports.useState(1),[M,N]=f.exports.useState(!1),[F,L]=f.exports.useState(0),[P,R]=f.exports.useState((()=>o||15)),[D,B]=f.exports.useState({});f.exports.useEffect((()=>{g&&(z(),A(!0))}),[]),f.exports.useEffect((()=>{!g&&v&&(z(),A(!0))}),[v]),f.exports.useEffect((()=>{if(_)if(m){const e=T.slice((O-1)*P,O*P);k(e),y&&y(e)}else z()}),[O,P]),f.exports.useEffect((()=>{m?(D[h]&&D[h]===i[h]?(H(b),I(1)):1===O?_&&z():I(1),B(i)):1===O?_&&z():I(1)}),[JSON.stringify(i)]);const z=async()=>{N(!0);const{success:e,dat:t}=await r(l(s({},i),{p:O,limit:P}));var n;e&&(!m&&(n=t,Array.isArray(n.list))?(C(t.list||[]),L(t.total),y&&y(t.list||[])):(C(t||[]),H(t||[]))),N(!1)},H=e=>{if(Array.isArray(e)){const t=i[u]||"",n=e.filter((e=>{let n=!1;return""!==t&&Array.isArray(p)&&0!==p.length?(p.forEach((r=>{const i=j(r,e);"string"==typeof i&&(n=n||-1!==i.indexOf(t))})),n):(n=!0,n)}));w(n),L(n.length);const r=n.slice((O-1)*P,O*P);k(r),y&&y(r)}else w([]),L(0),k([]),y&&y([])},j=(e,t)=>{const n=()=>{const n=e.indexOf("."),r=e.slice(0,n);return t[r]?j(e.slice(n+1,e.length),t[r]):""},r=()=>{let n=e.indexOf("[");if(n<=0)return"";let r=e.indexOf("]");const i=e.slice(0,n),a=t[i];if(Array.isArray(a)&&a.length){if(-1!==r){const n=e.match(/\[(\w+)\]/);if(n.length<2)return"";{const i=n[1];return a[i]?r===e.length-1?a[i]:j(e.slice(r+1,e.length),t[i]):""}}return""}return""};return-1!==e.indexOf(".")&&-1!==e.indexOf("[")?e.indexOf(".")<e.indexOf("[")?n():r():-1!==e.indexOf(".")?n():-1!==e.indexOf("[")?r():t[e]||""},G=()=>{z()};return f.exports.useImperativeHandle(t,(()=>({refreshList:G}))),d.createElement(Nt,s({dataSource:m?S:b,pagination:s({showTotal:e=>`Total ${e} items`,current:O,pageSize:P,onChange:I,total:F,showSizeChanger:!0,onShowSizeChange:(e,t)=>{R(t),I(1)}},x),loading:M},E))}));const jee=e=>{const{t:t}=Fr(),{teamId:n,onSelect:r}=e,[i,a]=f.exports.useState(),[o,s]=f.exports.useState([]),[l,c]=f.exports.useState([]),[u,h]=f.exports.useState(""),p=[{title:t("用户名"),dataIndex:"username",ellipsis:!0},{title:t("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:t("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:t("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}];f.exports.useEffect((()=>{m()}),[]);const m=()=>{n&&Ya(n).then((e=>{a(e.user_group)}))};return d.createElement("div",null,d.createElement("div",null,d.createElement("span",null,t("团队名称"),"："),i&&i.name),d.createElement("div",{style:{margin:"20px 0 16px"}},o.length>0&&d.createElement("span",null,t("已选择"),o.length,t("项"),"："),l.map(((e,t)=>d.createElement(At,{style:{marginBottom:"4px"},closable:!0,onClose:()=>(e=>{let t=l.filter((t=>t.id!==e.id)),n=t.map((e=>e.id));c(t),s(n)})(e),key:e.id},e.username)))),d.createElement(bt,{className:"searchInput",prefix:d.createElement(N,null),placeholder:t("用户名、邮箱或电话"),onPressEnter:e=>{h(e.target.value)}}),d.createElement(Hee,{fetchHandle:Ha,columns:p,rowKey:"id",needPagination:!0,pageSize:5,fetchParams:{query:u},rowSelection:{preserveSelectedRowKeys:!0,selectedRowKeys:o,onChange:(e,t)=>{r(e),s(e),c(t)}}}))},Gee=e=>{const{t:t}=Fr(),{visible:n,userType:r,onClose:i,action:a,userId:o,teamId:c,onSearch:u,width:h}=e,[p,m]=f.exports.useState(),g=f.exports.useRef(null),v=f.exports.useRef(null),y=f.exports.useRef(null),x="business"===r&&(a===Fee.CreateBusiness||a===Fee.AddBusinessMember||a===Fee.EditBusiness),E=(a===Fee.CreateUser||a===Fee.EditUser)&&r===Mee.User,b=(a===Fee.CreateTeam||a===Fee.EditTeam)&&r===Mee.Team,C=a===Fee.Reset,T=a===Fee.AddUser,w=async e=>{if(E){let e=g.current.form;const r=await e.validateFields();let c={};r.contacts&&r.contacts.forEach((e=>{c[e.key]=e.value}));let u=l(s({},r),{contacts:c,confirm:void 0});a===Fee.CreateUser&&(n=u,ii("/api/n9e/users",{method:Kr.Post,data:n}).then((e=>e&&e.dat))).then((e=>{gt.success(t("用户创建成功")),i(!0)})),a===Fee.EditUser&&o&&function(e,t){return ii(`/api/n9e/user/${e}/profile`,{method:Kr.Put,data:t}).then((e=>e&&e.dat))}(o,u).then((e=>{gt.success(t("用户信息修改成功")),i(!0)}))}var n;if(b){let n=v.current.form;const r=await n.validateFields();let o=s({},r);a===Fee.CreateTeam&&function(e){return ii("/api/n9e/user-groups",{method:Kr.Post,data:e}).then((e=>e&&e.dat))}(o).then((n=>{gt.success(t("团队创建成功")),i(!0),"search"===e&&u(o.name)})),a===Fee.EditTeam&&c&&function(e,t){return ii(`/api/n9e/user-group/${e}`,{method:Kr.Put,data:t}).then((e=>e&&e.dat))}(c,o).then((e=>{gt.success(t("团队信息修改成功")),i("updateName")}))}if(C&&o){let e=y.current.form;const n=await e.validateFields();let r=s({},n);(function(e,t){return ii(`/api/n9e/user/${e}/password`,{method:Kr.Put,data:t}).then((e=>e&&e.dat))})(o,r).then((e=>{gt.success(t("密码重置成功")),i()}))}if(T&&c){(function(e,t){return ii(`/api/n9e/user-group/${e}/members`,{method:Kr.Post,data:t}).then((e=>e&&e.dat))})(c,{ids:p}).then((e=>{gt.success(t("添加成功")),i("updateMember")}))}if(x){let e=v.current.form;const{name:n,members:r,label_enable:o,label_value:s}=await e.validateFields();let l={name:n,label_enable:o?1:0,label_value:s,members:r?r.map((({perm_flag:e,user_group_id:t})=>({user_group_id:t,perm_flag:e?"rw":"ro"}))):void 0};if(a===Fee.CreateBusiness&&function(e){return ii("/api/n9e/busi-groups",{method:Kr.Post,data:e}).then((e=>e&&e.dat))}(l).then((e=>{gt.success(t("业务组创建成功")),i("create"),u(e)})),a===Fee.EditBusiness&&c&&function(e,t){return ii(`/api/n9e/busi-group/${e}`,{method:Kr.Put,data:t}).then((e=>e&&e.dat))}(c,l).then((e=>{gt.success(t("业务组信息修改成功")),i("update")})),a===Fee.AddBusinessMember&&c){const e=r.map((({perm_flag:e,user_group_id:t})=>({user_group_id:t,perm_flag:e?"rw":"ro",busi_group_id:c})));(function(e,t){return ii(`/api/n9e/busi-group/${e}/members`,{method:Kr.Post,data:t}).then((e=>e&&e.dat))})(c,e).then((e=>{gt.success(t("业务组成员添加成功")),i("addMember")}))}}};return d.createElement(Ot,{title:a===Fee.CreateUser?t("创建用户"):a===Fee.CreateTeam?t("创建团队"):a===Fee.CreateBusiness?t("创建业务组"):a===Fee.AddBusinessMember?t("添加业务组成员"):a===Fee.EditBusiness?t("编辑业务组"):a===Fee.EditUser?t("编辑用户信息"):a===Fee.EditTeam?t("编辑团队信息"):a===Fee.Reset?t("重置密码"):a===Fee.Disable?t("禁用"):a===Fee.Undisable?t("启用"):a===Fee.AddUser?t("添加成员"):void 0,visible:n,width:h||700,onCancel:i,destroyOnClose:!0,footer:[d.createElement(yt,{key:"back",onClick:i},t("取消")),d.createElement(yt,{key:"submit",type:"primary",onClick:()=>w()},t("确定")),a===Fee.CreateTeam&&d.createElement(yt,{type:"primary",onClick:()=>w("search")},t("确定并搜索"))]},E&&d.createElement(Oee,{ref:g,userId:o}),b&&d.createElement(Iee,{ref:v,teamId:c}),x&&d.createElement(Bee,{ref:v,businessId:c,action:a}),C&&d.createElement(zee,{ref:y,userId:o}),T&&d.createElement(jee,{teamId:c,onSelect:e=>m(e)}))};const{confirm:$ee}=Ot,Yee=()=>{const{t:e}=Fr();q();const[t,n]=f.exports.useState(Mee.Team),[r,i]=f.exports.useState(!1),[a,o]=f.exports.useState(),[s,l]=f.exports.useState(""),[c,u]=f.exports.useState(""),[h,p]=f.exports.useState(""),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState([]),[x,E]=f.exports.useState(),[b,T]=f.exports.useState([]),[w,S]=f.exports.useState(!1),[k,_]=f.exports.useState(""),[A,O]=f.exports.useState("");f.exports.useRef(null),ni((e=>e.account));const I=[...[{title:e("用户名"),dataIndex:"username",ellipsis:!0},{title:e("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:e("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:e("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}],{title:e("操作"),width:"100px",render:(t,n)=>d.createElement("a",{style:{color:"red"},onClick:()=>{let t={ids:[n.id]};$ee({title:e("是否删除该成员"),onOk:()=>{var n,r;(n=c,r=t,ii(`/api/n9e/user-group/${n}/members`,{method:Kr.Delete,data:r}).then((e=>e&&e.dat))).then((t=>{gt.success(e("成员删除成功")),B("updateMember")}))},onCancel:()=>{}})}},e("删除"))}];f.exports.useEffect((()=>{M(!0)}),[]),f.exports.useEffect((()=>{c&&L(c)}),[c]);const M=(e=!1)=>{F("",e)},F=(e,t)=>{ja({query:e||""}).then((e=>{T(e.dat||[]),(!c||t)&&e.dat.length>0&&u(e.dat[0].id)}))},L=e=>{S(!0),Ya(e).then((e=>{E(e.user_group),g(e.users),y(e.users),S(!1)}))},P=(e,t)=>{if("team"===e)F(t);else if(t){S(!0);let e=v.filter((e=>-1!==e.username.indexOf(t)||-1!==e.nickname.indexOf(t)||-1!==e.id.toString().indexOf(t)||-1!==e.phone.indexOf(t)||-1!==e.email.indexOf(t)));g(e),S(!1)}else L(c)},R=(e,t,n)=>{u(t||""),p(n||""),o(e),i(!0)},B=(e=!1)=>{i(!1),k?P("team",k):"updateMember"!==e&&M("updateName"!==e),!c||"update"!==e&&"updateMember"!==e&&"updateName"!==e||L(c)};return d.createElement(Wi,{title:e("团队管理"),icon:d.createElement(C,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{style:{display:"flex",height:"100%"}},d.createElement("div",{className:"left-tree-area"},d.createElement("div",{className:"sub-title"},e("团队列表"),d.createElement(yt,{style:{height:"30px"},size:"small",type:"link",onClick:()=>{R(Fee.CreateTeam)}},e("新建团队"))),d.createElement("div",{style:{display:"flex",margin:"5px 0px 12px"}},d.createElement(bt,{prefix:d.createElement(N,null),value:k,onChange:e=>{_(e.target.value)},placeholder:e("搜索团队名称"),onPressEnter:e=>{F(e.target.value)},onBlur:e=>{F(e.target.value)}})),d.createElement(Yt,{style:{marginBottom:"12px",flex:1,overflow:"auto"},dataSource:b,size:"small",renderItem:e=>d.createElement(Yt.Item,{key:e.id,className:c===e.id?"is-active":"",onClick:()=>u(e.id)},e.name)})),b.length>0?d.createElement("div",{className:"resource-table-content"},d.createElement(St,{className:"team-info"},d.createElement(kt,{span:"24",style:{color:"#000",fontSize:"14px",fontWeight:"bold",display:"inline"}},x&&x.name,d.createElement(Te,{title:e("刷新"),style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>R(Fee.EditTeam,c)}),d.createElement(be,{style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>{$ee({title:e("是否删除该团队"),onOk:()=>{var t;(t=c,ii(`/api/n9e/user-group/${t}`,{method:Kr.Delete}).then((e=>e&&e.dat))).then((t=>{gt.success(e("团队删除成功")),B(!0)}))},onCancel:()=>{}})}})),d.createElement(kt,{style:{marginTop:"8px",color:"#666"}},e("备注"),"：",x&&x.note?x.note:"-")),d.createElement(St,{justify:"space-between",align:"middle"},d.createElement(kt,{span:"12"},d.createElement(bt,{prefix:d.createElement(N,null),value:A,className:"searchInput",onChange:e=>O(e.target.value),placeholder:e("用户名、显示名、邮箱或手机"),onPressEnter:e=>P("member",A)})),d.createElement(yt,{type:"primary",ghost:!0,onClick:()=>{R(Fee.AddUser,c)}},e("添加成员"))),d.createElement(Nt,{rowKey:"id",columns:I,dataSource:m,loading:w})):d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(D,{style:{color:"#1473ff"}})," ",e("提示信息")),d.createElement("p",null,"没有与您相关的团队，请先 ",d.createElement("a",{onClick:()=>R(Fee.CreateTeam)},"创建团队")))),d.createElement(Gee,{visible:r,action:a,width:500,userType:t,onClose:B,onSearch:e=>{_(e),P("team",e)},userId:s,teamId:c,memberId:h})))},{confirm:Uee}=Ot,Vee=()=>{const{t:e}=Fr(),[t,n]=f.exports.useState(Mee.User),[r,i]=f.exports.useState(!1),[a,o]=f.exports.useState(),[s,l]=f.exports.useState(""),[c,u]=f.exports.useState(""),[h,p]=f.exports.useState("");f.exports.useState([]),f.exports.useState([]);const[m,g]=f.exports.useState("");f.exports.useState("");const v=f.exports.useRef(null);let{profile:y}=ni((e=>e.account));const x=[...[{title:e("用户名"),dataIndex:"username",ellipsis:!0},{title:e("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:e("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:e("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}],{title:e("角色"),dataIndex:"roles",render:(e,t)=>e.join(", ")},{title:e("操作"),width:"240px",render:(t,n)=>d.createElement(d.Fragment,null,d.createElement(yt,{className:"oper-name",type:"link",onClick:()=>E(Fee.EditUser,n.id)},e("编辑")),d.createElement(yt,{className:"oper-name",type:"link",onClick:()=>E(Fee.Reset,n.id)},e("重置密码")),d.createElement("a",{style:{color:"red",marginLeft:"16px"},onClick:()=>{Uee({title:e("是否删除该用户"),onOk:()=>{var t;(t=n.id,ii(`/api/n9e/user/${t}`,{method:Kr.Delete}).then((e=>e&&e.dat))).then((t=>{gt.success(e("用户删除成功")),b()}))},onCancel:()=>{}})}},e("删除")))}];y.roles.includes("Admin")||x.pop();const E=(e,n,r)=>{n?t===Mee.User?l(n):u(n):t===Mee.User?l(""):u(""),p(r||""),o(e),i(!0)},b=()=>{i(!1),v.current.refreshList()};return d.createElement(Wi,{title:e("用户管理"),icon:d.createElement(C,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{className:"user-content"},d.createElement(St,{className:"event-table-search"},d.createElement("div",{className:"event-table-search-left"},d.createElement(bt,{className:"searchInput",prefix:d.createElement(N,null),onPressEnter:e=>{let t=e.target.value;g(t)},placeholder:e("用户名、邮箱或手机")})),d.createElement("div",{className:"event-table-search-right"},t===Mee.User&&y.roles.includes("Admin")&&d.createElement("div",{className:"user-manage-operate"},d.createElement(yt,{type:"primary",onClick:()=>E(t===Mee.User?Fee.CreateUser:e("创建团队")),ghost:!0},e("创建用户"))))),d.createElement(Hee,{ref:v,fetchHandle:Ha,columns:x,rowKey:"id",needPagination:!0,fetchParams:{query:m}})),d.createElement(Gee,{visible:r,action:a,width:t===Mee.User?500:700,userType:t,onClose:b,userId:s,teamId:c,memberId:h})))};const{confirm:Wee}=Ot,Xee=()=>{const{t:e}=Fr(),t=ui().get("id"),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState(),[o,s]=f.exports.useState(t||""),[l,c]=f.exports.useState(""),[u,h]=f.exports.useState([]);f.exports.useState(0),f.exports.useState([]);const[p,m]=f.exports.useState(),[g,v]=f.exports.useState([]);f.exports.useState("");const[y,x]=f.exports.useState(!1),[E,b]=f.exports.useState(""),[T,w]=f.exports.useState("");f.exports.useRef(null),ni((e=>e.account));const S=Vr(),k=[{title:e("团队名称"),dataIndex:["user_group","name"],ellipsis:!0},{title:e("团队备注"),dataIndex:["user_group","note"],ellipsis:!0,render:(e,t)=>t.user_group.note||"-"},{title:e("权限"),dataIndex:"perm_flag"},{title:e("操作"),width:"100px",render:(t,n)=>d.createElement("a",{style:{color:u.length>1?"red":"#00000040"},onClick:()=>{if(u.length<=1)return;let t=[{user_group_id:n.user_group.id,busi_group_id:o}];Wee({title:e("是否删除该团队"),onOk:()=>{(function(e,t){return ii(`/api/n9e/busi-group/${e}/members`,{method:Kr.Delete,data:t}).then((e=>e&&e.dat))})(o,t).then((t=>{gt.success(e("团队删除成功")),I("deleteMember")}))},onCancel:()=>{}})}},e("删除"))}];f.exports.useEffect((()=>{o&&A(o)}),[o]),f.exports.useEffect((()=>{_()}),[]);const _=(e,t)=>{Ga({query:void 0===e?E:e,limit:200}).then((e=>{v(e.dat||[]),(!o||t)&&e.dat.length>0&&s(e.dat[0].id)}))},A=e=>{x(!0),$a(e).then((e=>{S({type:"common/saveData",prop:"curBusiItem",data:e}),m(e),h(e.user_groups),x(!1)}))},O=(e,t,n)=>{c(n||""),a(e),r(!0)},I=e=>{r(!1),["create","delete","update"].includes(e)&&((e=>{_(void 0,"delete"===e)})(e),S({type:"common/getBusiGroups"})),o&&["update","addMember","deleteMember"].includes(e)&&A(o)};return d.createElement(Wi,{title:e("业务组管理"),icon:d.createElement(C,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{style:{display:"flex",height:"100%"}},d.createElement("div",{className:"left-tree-area"},d.createElement("div",{className:"sub-title"},e("业务组列表"),d.createElement(yt,{style:{height:"30px"},size:"small",type:"link",onClick:()=>{O(Fee.CreateBusiness)}},e("新建业务组"))),d.createElement("div",{style:{display:"flex",margin:"5px 0px 12px"}},d.createElement(bt,{prefix:d.createElement(N,null),placeholder:e("搜索业务组名称"),onPressEnter:e=>{_(e.target.value)},onBlur:e=>{_(e.target.value)}})),d.createElement(Yt,{style:{marginBottom:"12px",flex:1,overflow:"auto"},dataSource:g,size:"small",renderItem:e=>d.createElement(Yt.Item,{key:e.id,className:o==e.id?"is-active":"",onClick:()=>s(e.id)},e.name)})),g.length>0?d.createElement("div",{className:"resource-table-content"},d.createElement(St,{className:"team-info"},d.createElement(kt,{span:"24",style:{color:"#000",fontSize:"14px",fontWeight:"bold",display:"inline"}},p&&p.name,d.createElement(Te,{title:e("刷新"),style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>O(Fee.EditBusiness)}),d.createElement(be,{style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>{Wee({title:e("是否删除该业务组"),onOk:()=>{(function(e){return ii(`/api/n9e/busi-group/${e}`,{method:Kr.Delete}).then((e=>e&&e.dat))})(o).then((t=>{gt.success(e("业务组删除成功")),I("delete")}))},onCancel:()=>{}})}})),d.createElement(kt,{style:{marginTop:"8px",color:"#666"}},e("备注"),"：",e("告警规则，告警事件，监控对象，自愈脚本等都归属业务组，是一个在系统里可以自闭环的组织"))),d.createElement(St,{justify:"space-between",align:"middle"},d.createElement(kt,{span:"12"},d.createElement(bt,{prefix:d.createElement(N,null),value:T,className:"searchInput",onChange:e=>w(e.target.value),placeholder:e("搜索团队名称")})),d.createElement(yt,{type:"primary",ghost:!0,onClick:()=>{O(Fee.AddBusinessMember)}},e("添加团队"))),d.createElement(Nt,{rowKey:"id",columns:k,dataSource:u&&u.length>0?u.filter((e=>e.user_group&&-1!==e.user_group.name.indexOf(T))):[],loading:y})):d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(D,{style:{color:"#1473ff"}})," ",e("提示信息")),d.createElement("p",null,"业务组（监控对象、监控大盘、告警规则、自愈脚本都要归属某个业务组）为空，请先 ",d.createElement("a",{onClick:()=>O(Fee.CreateBusiness)},"创建业务组"))))),d.createElement(Gee,{visible:n,action:i,userType:"business",onClose:I,teamId:o,onSearch:e=>{s(e)}}))};const qee=nn.theme({"&":{"&.cm-focused":{outline:"none",outline_fallback:"none"},"&.cm-editor.cm-focused":{outline:"none"}},".cm-scroller":{overflow:"hidden",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono;"},".cm-placeholder":{},".cm-matchingBracket":{color:"#000",backgroundColor:"#dedede",fontWeight:"bold",outline:"1px dashed transparent"},".cm-nonmatchingBracket":{borderColor:"red"},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{maxHeight:"350px",fontFamily:'"DejaVu Sans Mono", monospace',maxWidth:"unset"},"& > ul > li":{padding:"2px 1em 2px 3px"},minWidth:"30%"},".cm-completionDetail":{float:"right",color:"#999"},".cm-tooltip.cm-completionInfo":{marginTop:"-11px",padding:"10px",fontFamily:"'Open Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;",border:"none",minWidth:"250px",maxWidth:"min-content"},".cm-completionInfo.cm-completionInfo-right":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",left:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginLeft:"12px"},".cm-completionInfo.cm-completionInfo-left":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",right:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginRight:"12px"},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold",color:"#0066bf"},".cm-selectionMatch":{backgroundColor:"#e6f3ff"},".cm-diagnostic":{"&.cm-diagnostic-error":{borderLeft:"3px solid #e65013"}},".cm-completionIcon":{boxSizing:"content-box",fontSize:"16px",lineHeight:"1",marginRight:"10px",verticalAlign:"top","&:after":{content:"'\\ea88'"},fontFamily:"codicon",paddingRight:"0",opacity:"1",color:"#007acc"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\ea8c'"},color:"#652d90"},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\eb5f'"},color:"#007acc"},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\eb62'"},color:"#616161"},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'\\ea95'"},color:"#ee9d28"}});nn.theme({".cm-tooltip":{backgroundColor:"#f8f8f8",borderColor:"rgba(52, 79, 113, 0.2)"},".cm-tooltip.cm-tooltip-autocomplete":{"& li:hover":{backgroundColor:"#ddd"},"& > ul > li[aria-selected]":{backgroundColor:"#d6ebff",color:"unset"}},".cm-tooltip.cm-completionInfo":{backgroundColor:"#d6ebff"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#d6ebff"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#d6ebff"}},".cm-line":{"&::selection":{backgroundColor:"#add6ff"},"& > span::selection":{backgroundColor:"#add6ff"}}},{dark:!1}),nn.theme({".cm-content":{caretColor:"#fff"},".cm-tooltip.cm-completionInfo":{backgroundColor:"#333338"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#333338"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#333338"}},".cm-line":{"&::selection":{backgroundColor:"#767676"},"& > span::selection":{backgroundColor:"#767676"}}},{dark:!0});const Kee=rn.define([{tag:an.name,color:"#000"},{tag:an.number,color:"#09885a"},{tag:an.string,color:"#a31515"},{tag:an.keyword,color:"#008080"},{tag:an.function(an.variableName),color:"#008080"},{tag:an.labelName,color:"#800000"},{tag:an.operator},{tag:an.modifier,color:"#008080"},{tag:an.paren},{tag:an.squareBracket},{tag:an.brace},{tag:an.invalid,color:"red"},{tag:an.comment,color:"#888",fontStyle:"italic"}]),Qee=({show:e,updateShow:t,metrics:n,insertAtCursor:r})=>{const[i,a]=f.exports.useState(n);return f.exports.useEffect((()=>{a(n)}),[n]),d.createElement(Ot,{className:"metrics-explorer-modal",width:540,visible:e,title:"Metrics Explorer",footer:null,onCancel:()=>t(!1)},d.createElement(bt,{className:"left-area-group-search",prefix:d.createElement(N,null),onPressEnter:e=>{e.preventDefault();const t=e.currentTarget.value;a(n.filter((e=>e.includes(t))))}}),d.createElement("div",{className:"metric-list",onClick:e=>function(e){r(e),t(!1)}(e.target.innerText)},i.map((e=>d.createElement("div",{className:"metric-list-item",key:e},e)))))};function Zee(e,t={}){return fetch(e,s({method:"Get",headers:new Headers({"X-Cluster":localStorage.getItem("curCluster")||"",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`})},t))}const Jee=new on,ete=({value:e,onExpressionChange:t,queryHistory:n,metricNames:r,isLoading:i,executeQuery:a})=>{const o=f.exports.useRef(null),s=f.exports.useRef(null),l=f.exports.useRef(a),[c,u]=f.exports.useState(!1);f.exports.useEffect((()=>{l.current=a,Jee.activateCompletion(!0).activateLinter(!0).setComplete({remote:{url:"/api/n9e/prometheus",fetchFn:Zee,cache:{initialMetricList:r}}});if(null===s.current){if(!o.current)throw new Error("expected CodeMirror container element to exist");const n=sn.create({doc:e,extensions:[qee,ln(),cn(),sn.allowMultipleSelections.of(!0),un(),hn(),pn(),dn(),fn(),Kee,nn.lineWrapping,mn.of([...gn,...vn,...yn,...xn,...En,...bn]),Cn("Expression (press Shift+Enter for newlines)"),Jee.asExtension(),mn.of([{key:"Escape",run:e=>(e.contentDOM.blur(),!1)}]),Tn.override(mn.of([{key:"Enter",run:e=>(l.current(),!0)},{key:"Shift-Enter",run:wn}])),nn.updateListener.of((e=>{t(e.state.doc.toString())}))]}),r=new nn({state:n,parent:o.current});s.current=r,r.focus()}}),[a,t,n]);return d.createElement(d.Fragment,null,d.createElement("div",{className:"prometheus-input-box"},d.createElement("div",{className:"input-prefix"},d.createElement("span",null,"PromQL: ")),d.createElement("div",{className:"input"},d.createElement("div",{className:"input-content",ref:o})),d.createElement("div",{className:"suffix"},d.createElement(yt,{size:"large",className:"metrics",icon:d.createElement(De,null),onClick:()=>u(!0)}),d.createElement(yt,{size:"large",type:"primary",className:"execute",onClick:a},"Execute"))),d.createElement(Qee,{show:c,updateShow:u,metrics:r,insertAtCursor:e=>{const t=s.current;if(null===t)return;const{from:n,to:r}=t.state.selection.ranges[0];t.dispatch(t.state.update({changes:{from:n,to:r,insert:e}}))}}))},tte=e=>{const{loadTime:t,resolution:n,resultSeries:r}=e;return d.createElement("div",{className:"query-stats"},d.createElement("span",null,"Load time: ",t,"ms  ",n&&`Resolution: ${n}s `," Result series: ",r))};var nte,rte;(rte=nte||(nte={})).Graph="graph",rte.Table="table";const{TabPane:ite}=Bt;const ate=({metrics:e,defaultPromQL:t,removePanel:n})=>{const{t:r}=Fr(),{clusters:i}=ni((e=>e.common)),a=f.exports.useRef(nte.Table),o=f.exports.useRef(null),l=f.exports.useRef(t),c=f.exports.useRef(null),u=f.exports.useRef(null),[h,p]=f.exports.useState(null),[m,g]=f.exports.useState(uu.Line),[v,y]=f.exports.useState({type:nte.Table,range:{num:1,unit:"hour",description:r("小时")},endTime:null,resolution:null,stacked:!1,showExemplars:!1}),[E,b]=f.exports.useState(""),[C,T]=f.exports.useState(!1),[w,k]=f.exports.useState(null);function _(e){y((t=>s(s({},t),e)))}function A(e=!0){const t=l.current;if(!e||""===t||0===i.length)return;if(a.current===nte.Graph)return p(null),void(o.current&&o.current.refresh());u.current&&(u.current(),u.current=null);const n=new AbortController;u.current=()=>n.abort(),T(!0),p(null);const r=Date.now(),c=function(e=v.endTime){return null===e?O().unix():e}(),h=new URLSearchParams({query:t});h.append("time",c.toString()),function(e,t,n){return ii(`/api/n9e/prometheus/api/v1/${e}`,s({method:Kr.Get,params:t},n))}("query",h,{cache:"no-store",credentials:"same-origin",signal:n.signal}).then((e=>{if(u.current=null,T(!1),a.current!==nte.Graph)if(e.hasOwnProperty("status")&&"success"===e.status){var t=!1,n=1e4,i=0;let{resultType:a,result:o}=e.data;o&&(o.length>n&&(t=!0,i=o.length,o=o.slice(n)),o.forEach((e=>{e.values&&e.values.length>n&&(t=!0,e.values.length>i&&(i=e.values.length),e.values=e.values.slice(n))}))),b(t?`Warning：Fetched ${i} metrics, only displaying first 10000`:""),k("scalar"===a||"string"===a?{resultType:a,result:[o]}:{resultType:a,result:o}),p({loadTime:Date.now()-r,resultSeries:e.data.result.length})}else k(null),b((null==e?void 0:e.error)||"")})).catch((e=>{T(!1)}))}return f.exports.useEffect((()=>{v.type===nte.Table&&A()}),[v.endTime,i]),f.exports.useEffect((()=>{v.type===nte.Table&&A()}),[v.type,i]),d.createElement("div",{className:"panel"},d.createElement(ete,{queryHistory:["abs(go_gc_duration_seconds)"],value:l.current,onExpressionChange:function(e){l.current=e},metricNames:e,isLoading:C,executeQuery:A}),E&&d.createElement(zt,{className:"error-alert",message:E,type:"error"}),!C&&!E&&h&&d.createElement(tte,s({},h)),d.createElement(Bt,{className:"panel-tab-box",type:"card",activeKey:v.type,onChange:function(e){v.type!==e&&(e===nte.Graph&&c.current!==v.endTime?null===v.endTime?_({range:{num:1,unit:"hour",description:"hour"}}):_({range:{start:v.endTime-3600,end:v.endTime}}):c.current=v.endTime,a.current=e,_({type:e}),p(null))}},d.createElement(ite,{tab:"Table",key:"table"},d.createElement("div",{className:"table-timestamp"},"Timestamp:"," ",d.createElement(Ht,{placeholder:"Evaluation time",showTime:!0,showNow:!1,disabledDate:e=>e>O(),value:v.endTime?O(1e3*v.endTime):null,onChange:function(e){_({endTime:e?null==e?void 0:e.unix():null})}})),d.createElement(Yt,{className:"table-list",size:"small",bordered:!0,loading:C,dataSource:w?w.result:[],renderItem:e=>{const{metric:t,value:n,values:r}=e;return d.createElement(Yt.Item,null,d.createElement("div",{className:"list-item-content"},d.createElement("div",{className:"left"},function(e,t){if("scalar"===e)return"scalar";if("string"===e)return"string";const n=null==t?void 0:t.__name__,r=S.keys(t).filter((e=>"__name__"!==e)).map(((e,n,r)=>d.createElement("span",{key:n},d.createElement("span",{className:"bold-text"},e),'="',t[e],'"',n===r.length-1?"":", ")));return d.createElement(d.Fragment,null,n,"{",r,"}")}(null==w?void 0:w.resultType,t)),"scalar"===(null==w?void 0:w.resultType)||"string"===(null==w?void 0:w.resultType)?e[1]:d.createElement("div",null,n&&n.length>1&&d.createElement("div",{className:"right"},n[1]||"-"),r&&r.length>0&&d.createElement("div",{className:"right"},r.map((e=>d.createElement(d.Fragment,null,e&&e.length>1&&d.createElement("span",{style:{display:"inline-block"}},e[1]," @",e[0]),d.createElement("br",null))))))))}})),d.createElement(ite,{tab:"Graph",key:"graph"},d.createElement("div",{className:"graph-operate-box"},d.createElement("div",{className:"left"},d.createElement(Pt,null,d.createElement(ru,{placement:"bottomRight",value:v.range,onChange:function(e){const t=v.range;if(tu(e)?!S.isEqual(t,e):e.num!==t.num||e.unit!==t.unit){_({endTime:e.hasOwnProperty("unit")?null:e.end,range:e})}}}),d.createElement(au,{onChange:e=>_({resolution:e}),initialValue:v.resolution}),d.createElement(Dt.Group,{options:[{label:d.createElement(x,null),value:uu.Line},{label:d.createElement(_e,null),value:uu.StackArea}],onChange:e=>{e.preventDefault(),g(e.target.value)},value:m,optionType:"button",buttonStyle:"solid"})))),d.createElement("div",null,v.type===nte.Graph&&d.createElement(Ju,{ref:o,showHeader:!0,isShowRefresh:!1,data:{step:v.resolution,range:v.range,promqls:[l],chartType:m},onErrorOccured:function(e){if(e.length){const t=e[0].error;b(t)}else b("")},onRequestCompleted:function(e){a.current===nte.Graph&&p(e)}})))),d.createElement("span",{className:"remove-panel-btn",onClick:n},d.createElement($,null)))};function ote(e){let t=new RegExp(`.*?${e}=([^&]*)`),n=(location.search||"").match(t);return n?n[1]:""}const ste=({metrics:e})=>{const[t,n]=f.exports.useState([{id:ci(),defaultPromQL:decodeURIComponent(ote("promql"))}]);return d.createElement(d.Fragment,null,t.map((({id:r,defaultPromQL:i=""})=>d.createElement(ate,{key:r,metrics:e,defaultPromQL:i,removePanel:()=>function(e){n(t.reduce(((t,n)=>n.id!==e?[...t,s({},n)]:t),[]))}(r)}))),d.createElement("div",{className:"add-prometheus-panel"},d.createElement(yt,{size:"large",onClick:function(){n((e=>[...t,{id:ci()}]))}},d.createElement(Ce,null),"新增一个查询面板")))},lte=()=>{const[e,t]=f.exports.useState([]),{clusters:n}=ni((e=>e.common)),[r,i]=f.exports.useState(S.uniqueId("rerenderFlag_"));return f.exports.useEffect((()=>{n.length&&function(e={}){return ii("/api/n9e/prometheus/api/v1/label/__name__/values",{method:Kr.Get,params:e,paramsSerializer:function(e){return xi.stringify(e,{arrayFormat:"bracket"})}})}().then((e=>{t(e.data||[])})).catch((()=>{t([])}))}),[n,r]),d.createElement(Wi,{title:"即时查询",icon:d.createElement(x,null),hideCluster:!1,onChangeCluster:()=>{i(S.uniqueId("rerenderFlag_"))}},d.createElement("div",{className:"prometheus-page",key:r},d.createElement(ste,{metrics:e})))},cte=function(e,t,n){const r=s({},nu(t));return n&&(r["match[]"]=n),ii(`/api/n9e/prometheus/api/v1/label/${e}/values`,{method:Kr.Get,params:r}).then((e=>null==e?void 0:e.data))},ute=function(e,t){const n=s({},nu(t));return e&&(n["match[]"]=e),ii("/api/n9e/prometheus/api/v1/labels",{method:Kr.Get,params:n}).then((e=>null==e?void 0:e.data))},hte=function(e,t){return ii("/api/n9e/prometheus/api/v1/label/__name__/values",{method:Kr.Get,params:l(s({},nu(t)),{"match[]":e})}).then((e=>null==e?void 0:e.data))};function pte(e){const{isAggr:t,aggrFunc:n,calcArr:r,metric:i,match:a,offset:o,aggrGroups:s}=e;return`${t?n+"(":""}${r[0]?r[0]+"(":""}${i}${a}${r[1]?`[${r[1]}]`:""}${o?` offset ${o}`:""}${r[0]?")":""}${t?`) by (${S.join(s,", ")})`:""}`}const dte=e=>{let t=e.__name__||"";return S.forEach(S.omit(e,"__name__"),((e,n)=>{t+=` ${n}: ${e}`})),S.trim(t)},fte=e=>{const{metric:t,match:n,calcFunc:r,comparison:i,aggrFunc:a,aggrGroups:o}=e,s=S.split(r,"_"),l=o.length>0;return[pte({isAggr:l,aggrFunc:a,calcArr:s,metric:t,match:n,offset:"",aggrGroups:o}),...S.map(i,(e=>pte({isAggr:l,aggrFunc:a,calcArr:s,metric:t,match:n,offset:e,aggrGroups:o})))]};function mte(e){const t=S.compact(S.map(e,(e=>e.label&&e.value?`${e.label}${e.oper}"${e.value}"`:"")));return S.join(S.compact(t),",")}function gte(e){const t=S.map(e.dimensionLabels,(e=>S.isEmpty(e.value)?"":`${e.label}=~"${S.join(e.value,"|")}"`)),n=S.join(S.compact(t),",");return n?`{${n}}`:""}const vte={add:"新建快捷视图",edit:"编辑快捷视图"},{TabPane:yte}=Bt;var xte=Eo((function(e){const{t:t}=Fr(),{action:n,visible:r,initialValues:i,destroy:a,range:o,onOk:l,admin:c}=e,[u]=Et.useForm(),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState(!1),[x,E]=f.exports.useState(!1),[b,C]=f.exports.useState([]),[T,w]=f.exports.useState("form"),k=e=>S.map(e,(e=>d.createElement(It.Option,{key:e,value:e},e)));return f.exports.useEffect((()=>{ute("",o).then((e=>{p(e),g(e)}))}),[JSON.stringify(o)]),d.createElement(Ot,{className:"n9e-metric-views-modal",title:d.createElement(Bt,{className:"custom-import-title",activeKey:T,onChange:w},d.createElement(yte,{tab:vte[n],key:"form"}),"add"===n&&d.createElement(yte,{tab:"导入快捷视图",key:"import"})),visible:r,onCancel:()=>{a()},onOk:()=>{u.validateFields().then((e=>{let t=S.cloneDeep(e);if("form"===T&&(t.dynamicLabels=S.map(t.dynamicLabels,(e=>({label:e,value:""}))),t.dimensionLabels=S.map(t.dimensionLabels,(e=>({label:e,value:""})))),"import"===T)try{const n=JSON.parse(e.import);t=s({name:e.name,cate:e.cate},n)}catch(eh){return void console.log(eh)}const{name:r,cate:o}=t,c={name:r,cate:o?0:1,configs:JSON.stringify(S.omit(t,["name","cate"]))};"add"===n?function(e){return ii("/api/n9e/metric-views",{method:Kr.Post,data:e}).then((e=>null==e?void 0:e.dat))}(c).then((e=>{gt.success("添加成功"),l(e),a()})):"edit"===n&&(c.id=i.id,function(e){return ii("/api/n9e/metric-views",{method:Kr.Put,data:e}).then((e=>null==e?void 0:e.dat))}(c).then((()=>{gt.success("修改成功"),l(),a()})))}))}},"form"===T&&d.createElement(Et,{layout:"vertical",initialValues:i||{cate:!1},form:u,onValuesChange:(e,t)=>{if(e.filters){const e=mte(t.filters);ute(""+(e?`{${e}}`:""),o).then((e=>{g(e)}))}}},d.createElement(Et.Item,{label:"视图名称",name:"name",rules:[{required:!0}]},d.createElement(bt,null)),c&&d.createElement(Et.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Ft,null)),d.createElement(Et.List,{name:"filters"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement("div",{style:{paddingBottom:8}},"前置过滤条件"," ",d.createElement(V,{onClick:()=>{t({oper:"="})}})),e.map((({key:e,name:t})=>d.createElement(Pt,{key:e},d.createElement(Et.Item,{name:[t,"label"],rules:[{required:!0}]},d.createElement(It,{suffixIcon:d.createElement(j,null),allowClear:!0,showSearch:!0,style:{width:170}},k(h))),d.createElement(Et.Item,{name:[t,"oper"],rules:[{required:!0}]},d.createElement(It,{suffixIcon:d.createElement(j,null),style:{width:60}},d.createElement(It.Option,{value:"="},"="),d.createElement(It.Option,{value:"!="},"!="),d.createElement(It.Option,{value:"=~"},"=~"),d.createElement(It.Option,{value:"!~"},"!~"))),d.createElement(Et.Item,{name:[t,"value"],rules:[{required:!0}]},d.createElement(bt,{style:{width:200}})),d.createElement(Et.Item,null,d.createElement(U,{onClick:()=>{n(t)}})))))))),d.createElement(Et.Item,{label:"动态过滤标签",name:"dynamicLabels"},d.createElement(It,{allowClear:!0,showSearch:!0,mode:"multiple"},k(m))),d.createElement(Et.Item,{label:"展开维度标签",name:"dimensionLabels",rules:[{required:!0}]},d.createElement(It,{allowClear:!0,showSearch:!0,mode:"multiple"},k(m))),d.createElement("div",{style:{textAlign:"right",marginBottom:10}},d.createElement(yt,{onClick:()=>{const e=u.getFieldsValue();y(!0),E(!0);const t=mte(e.filters),n=S.compact(S.concat(e.dynamicLabels,e.dimensionLabels)),r=S.map(n,(e=>cte(e,o,t?`{${t}}`:"")));Promise.all(r).then((e=>{const t=S.map(n,((t,n)=>({label:t,values:e[n]})));C(t),E(!1)}))}},"预览")),v&&d.createElement(Nt,{size:"small",rowKey:"label",columns:[{title:"Lable Key",dataIndex:"label"},{title:"Lable Value 数量",dataIndex:"values",render:e=>e.length},{title:"Lable Value 样例",dataIndex:"values",render:e=>d.createElement(Ct,{placement:"right",title:d.createElement("div",null,S.map(e,(e=>d.createElement("div",{key:e},e))))},`${S.head(e)}...`)}],dataSource:b,loading:x})),"import"===T&&d.createElement(Et,{form:u,preserve:!1,layout:"vertical",initialValues:i||{cate:!1}},d.createElement(Et.Item,{label:"视图名称",name:"name",rules:[{required:!0}]},d.createElement(bt,null)),c&&d.createElement(Et.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Ft,null)),d.createElement(Et.Item,{label:"配置JSON：",name:"import",rules:[{required:!0,message:t("请输入配置"),validateTrigger:"trigger"}]},d.createElement(bt.TextArea,{className:"code-area",placeholder:t("请输入配置"),rows:4}))))}));var Ete=Eo((function(e){const{visible:t,destroy:n,data:r}=e,{t:i}=Fr();let a=r;try{a=JSON.stringify(JSON.parse(r),null,4)}catch(eh){console.log(eh)}return d.createElement(Ot,{title:"导出配置",visible:t,onCancel:()=>{n()},footer:null},d.createElement(d.Fragment,null,d.createElement("div",{style:{marginBottom:10}},d.createElement("a",{onClick:()=>{oi([r],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>si(r,i)},d.createElement(H,null),"复制JSON内容到剪贴板")),d.createElement(bt.TextArea,{value:a,rows:10})))}));function bte(e){const[t,n]=f.exports.useState([]),[r,i]=f.exports.useState(),[a,o]=f.exports.useState(""),[l,c]=f.exports.useState(S.uniqueId("refreshFlag_")),{profile:u}=ni((e=>e.account));return f.exports.useEffect((()=>{const t=null!==localStorage.getItem("metric-view-id")?Number(localStorage.getItem("metric-view-id")):null;ii("/api/n9e/metric-views",{method:Kr.Get}).then((e=>null==e?void 0:e.dat)).then((r=>{let a;if(n(r),a=t&&S.find(r,{id:t})?t:S.get(S.head(r),"id"),a){i(a);const t=S.find(r,{id:a});let n={};try{n=JSON.parse(t.configs),n.id=a,n.refreshFlag=l}catch(eh){console.error(eh)}e.onSelect(s({},n))}}))}),[l]),d.createElement("div",{className:"n9e-metric-views-list"},d.createElement("div",{className:"n9e-metric-views-list-header"},d.createElement("div",{className:"metric-page-title"},"快捷视图列表"),d.createElement("a",null,d.createElement(Be,{onClick:()=>{xte({admin:u.admin,action:"add",visible:!0,range:e.range,onOk:e=>{localStorage.setItem("metric-view-id",e.id),c(S.uniqueId("refreshFlag_"))}})}}))),d.createElement(bt,{prefix:d.createElement(N,null),value:a,onChange:e=>{o(e.target.value)}}),d.createElement("div",{className:"n9e-metric-views-list-content"},S.isEmpty(t)?"暂无数据":S.map(S.filter(t,(e=>{if(a){let t=!0;try{t=new RegExp(a,"gi").test(e.name)}catch(eh){console.log(eh)}return t}return!0})),(n=>d.createElement("div",{className:R({"n9e-metric-views-list-content-item":!0,active:n.id===r}),key:n.id,onClick:()=>{i(n.id),localStorage.setItem("metric-view-id",n.id);const r=S.find(t,{id:n.id});let a={};try{a=JSON.parse(r.configs),a.id=n.id}catch(eh){console.error(eh)}e.onSelect(s({},a))}},d.createElement("span",{className:"name"},n.name),1===n.cate||u.admin?d.createElement("span",null,0===n.cate&&d.createElement("span",{className:"n9e-metric-views-list-content-item-cate",style:{color:"#ccc"}},"公开"),d.createElement("div",{className:"n9e-metric-views-list-content-item-opes"},d.createElement(Te,{onClick:t=>{t.stopPropagation();let r={};try{r=JSON.parse(n.configs),r.dynamicLabels=S.map(r.dynamicLabels,"label"),r.dimensionLabels=S.map(r.dimensionLabels,"label")}catch(a){console.error(a)}const i=s({id:n.id,name:n.name,cate:0===n.cate},r);xte({admin:u.admin,action:"edit",visible:!0,range:e.range,initialValues:i,onOk:()=>{localStorage.setItem("metric-view-id",n.id),c(S.uniqueId("refreshFlag_"))}})}}),d.createElement(be,{onClick:e=>{e.stopPropagation(),Ot.confirm({title:"是否要删除？",onOk:()=>{var e;(e={ids:[n.id]},ii("/api/n9e/metric-views",{method:Kr.Delete,data:e}).then((e=>null==e?void 0:e.dat))).then((()=>{gt.success("删除成功"),c(S.uniqueId("refreshFlag_"))}))}})}}),d.createElement(Ct,{title:"导出配置",placement:"right"},d.createElement(ze,{onClick:()=>{Ete({visible:!0,data:n.configs})}})))):d.createElement("span",{style:{color:"#ccc"}},"公开"))))))}function Cte(e){const{value:t,range:n,onChange:r}=e,{id:i,refreshFlag:a,filters:o,dynamicLabels:c,dimensionLabels:u}=t,[h,p]=f.exports.useState({}),[m,g]=f.exports.useState({}),[v,y]=f.exports.useState({}),x=mte(o),E=function(e){const t=S.map(e,(e=>e.value?`${e.label}="${e.value}"`:""));return S.join(S.compact(t),",")}(c),[b,C]=f.exports.useState({filters:!1,dynamicLabels:!0});return f.exports.useEffect((()=>{const e=S.map(c,(e=>cte(e.label,n,x?`{${x}}`:"")));Promise.all(e).then((e=>{const t={};S.forEach(e,((e,n)=>{t[c[n].label]=e})),p(t)}))}),[x]),f.exports.useEffect((()=>{const e=S.join(S.compact(S.concat(x,E)),","),i=S.map(u,(t=>cte(t.label,n,e?`{${e}}`:"")));Promise.all(i).then((e=>{const n={};S.forEach(e,((e,t)=>{n[u[t].label]=e})),g(n),S.every(u,(e=>S.isEmpty(e.value)))&&r(l(s({},t),{dimensionLabels:S.map(u,((e,t)=>0===t?{label:e.label,value:S.slice(n[e.label],0,10)}:e))}))}))}),[x,E,i,a]),d.createElement("div",{className:"n9e-metric-views-labels-values"},!S.isEmpty(x)&&d.createElement("div",{className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title",style:{cursor:"pointer"},onClick:()=>{C(l(s({},b),{filters:!b.filters}))}},"前置过滤条件 ",b.filters?d.createElement(He,null):d.createElement(M,null)),b.filters&&d.createElement("div",{className:"n9e-metric-views-filters"},x||"暂无数据")),!S.isEmpty(c)&&d.createElement("div",{className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title",style:{cursor:"pointer"},onClick:()=>{C(l(s({},b),{dynamicLabels:!b.dynamicLabels}))}},"动态过滤条件 ",b.dynamicLabels?d.createElement(He,null):d.createElement(M,null)),b.dynamicLabels&&d.createElement("div",{className:"n9e-metric-views-dynamicLabels"},S.isEmpty(c)?d.createElement("div",{style:{marginBottom:10}},"暂无数据"):S.map(c,(e=>d.createElement("div",{key:e.label,className:"n9e-metric-views-dynamicLabels-item"},d.createElement("div",{className:"n9e-metric-views-dynamicLabels-item-label"},e.label,":"),d.createElement(It,{allowClear:!0,showSearch:!0,style:{width:"100%"},value:e.value,onChange:n=>{const i=S.map(c,(t=>e.label===t.label?l(s({},t),{value:n}):t));r(l(s({},t),{dynamicLabels:i,dimensionLabels:S.map(u,((e,t)=>0===t?{label:e.label,value:[]}:e))}))}},S.map(h[e.label],(e=>d.createElement(It.Option,{key:e,value:e},e))))))))),S.map(u,(e=>{const n=m[e.label];return d.createElement("div",{key:e.label,className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title"},d.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",width:220}},d.createElement(Ct,{title:e.label,placement:"left"},d.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"calc(100% - 30px)"}},e.label)),d.createElement("a",{style:{fontSize:12,fontWeight:"normal"},onClick:()=>{r(l(s({},t),{dimensionLabels:S.map(u,(t=>t.label===e.label?l(s({},t),{value:n}):t))}))}},"全选"))),d.createElement("div",{className:"n9e-metric-views-dimensionLabel"},d.createElement(bt.Group,{compact:!0},d.createElement(bt,{style:{width:"calc(100% - 32px)"},prefix:d.createElement(N,null),value:v[e.label],onChange:t=>{y(l(s({},v),{[e.label]:t.target.value}))}}),d.createElement(Ct,{title:"清空已选的值",placement:"right",getTooltipContainer:()=>document.body},d.createElement(yt,{icon:d.createElement(je,null),onClick:()=>{r(l(s({},t),{dimensionLabels:S.map(u,(t=>t.label===e.label?l(s({},t),{value:[]}):t))}))}}))),d.createElement("div",{className:"n9e-metric-views-dimensionLabel-content"},S.isEmpty(n)?"暂无数据":d.createElement("div",null,S.map(S.filter(n,(t=>{let n=!0;if(v[e.label])try{n=new RegExp(v[e.label],"gi").test(t)}catch(eh){console.log(eh)}return n})),(n=>d.createElement("div",{key:n,className:R({"n9e-metric-views-dimensionLabel-content-item":!0,active:S.includes(e.value,n)}),onClick:()=>{const i=S.includes(e.value,n)?S.without(e.value,n):S.concat(e.value,n),a=S.map(u,(t=>t.label===e.label?l(s({},t),{value:S.compact(i)}):l(s({},t),{value:[]})));r(l(s({},t),{dimensionLabels:a}))}},n)))))))})))}const Tte=()=>d.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1269",width:"1em",height:"1em",fill:"currentColor"},d.createElement("path",{d:"M85.333333 85.333333h85.333334v768h768v85.333334H85.333333V85.333333m512 533.333334L512 768H338.773333l-86.186666-149.333333L338.773333 469.333333H512l85.333333 149.333334m3.413334-341.333334L514.56 426.666667H341.333333L256 277.333333 341.333333 128h173.226667l86.186667 149.333333m305.92 170.666667L820.48 597.333333h-172.373333l-86.186667-149.333333L648.106667 298.666667h172.373333l86.186667 149.333333z",fill:"","p-id":"1270"})),wte=e=>d.createElement(T,s({component:Tte},e)),Ste=[{label:"none",value:"none"},{label:"bits(SI)",value:"bitsSI"},{label:"bytes(SI)",value:"bytesSI"},{label:"bits(IEC)",value:"bitsIEC"},{label:"bytes(IEC)",value:"bytesIEC"},{label:"百分比(0-100)",value:"percent"},{label:"百分比(0.0-1.0)",value:"percentUnit"},{label:"seconds",value:"seconds"},{label:"milliseconds",value:"milliseconds"},{label:"humanize(seconds)",value:"humantimeSeconds"},{label:"humanize(milliseconds)",value:"humantimeMilliseconds"}];function kte(e){const{highLevelConfig:t,setHighLevelConfig:n}=e,r=d.createElement(vt,{onClick:e=>{n(l(s({},t),{sharedSortDirection:e.key}))},selectedKeys:[t.sharedSortDirection]},d.createElement(vt.Item,{key:"desc"},"desc"),d.createElement(vt.Item,{key:"asc"},"asc")),i=d.createElement(vt,{onClick:e=>{n(l(s({},t),{util:e.key}))},selectedKeys:[t.util]},S.map(Ste,(e=>d.createElement(vt.Item,{key:e.value},e.label))));return d.createElement("div",null,d.createElement(wt,{checked:t.shared,onChange:e=>{n(l(s({},t),{shared:e.target.checked}))}},"Multi Series in Tooltip, order value"),d.createElement(Tt,{overlay:r},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},t.sharedSortDirection," ",d.createElement(M,null))),d.createElement("br",null),d.createElement(wt,{checked:t.legend,onChange:e=>{n(l(s({},t),{legend:e.target.checked}))}},"Show Legend"),d.createElement("br",null),"Value format with:"," ",d.createElement(Tt,{overlay:i},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},S.get(S.find(Ste,{value:t.util}),"label")," ",d.createElement(M,null))))}function _te(e){const{onClick:t,selectedKeys:n}=e;return d.createElement(vt,{prefixCls:"ant-dropdown-menu",onClick:t,selectedKeys:n,className:"color-scales"},S.map(Ac,(e=>d.createElement(vt.Item,{key:e.value,className:"color-scales-menu-item"},d.createElement("span",{className:"color-scales-menu-colors"},S.map(e.value,(e=>d.createElement("span",{key:e,style:{backgroundColor:e}})))),e.label))))}function Ate(e){const{highLevelConfig:t,setHighLevelConfig:n}=e,r=d.createElement(vt,{onClick:e=>{n(l(s({},t),{util:e.key}))},selectedKeys:[t.util]},S.map(Ste,(e=>d.createElement(vt.Item,{key:e.value},e.label))));return d.createElement("div",null,d.createElement("div",{style:{marginBottom:5}},"Height:"," ",d.createElement(Rt,{size:"small",value:t.chartheight,onBlur:e=>{n(l(s({},t),{chartheight:S.toNumber(e.target.value)}))}})),d.createElement("div",{style:{marginBottom:5}},"Color:"," ",d.createElement(Tt,{overlay:d.createElement(_te,{onClick:e=>{n(l(s({},t),{colorRange:S.split(e.key,",")}))},selectedKeys:[S.join(t.colorRange,",")]})},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},S.get(S.find(Ac,(e=>S.isEqual(e.value,t.colorRange))),"label")," ",d.createElement(M,null)))),d.createElement("div",{style:{marginBottom:5}},"Reverse color order:"," ",d.createElement(Ft,{size:"small",checked:t.reverseColorOrder,onChange:e=>{n(l(s({},t),{reverseColorOrder:e}))}})),d.createElement("div",{style:{marginBottom:5}},"Auto min/max color values:"," ",d.createElement(Ft,{size:"small",checked:t.colorDomainAuto,onChange:e=>{n(l(s({},t),{colorDomainAuto:e,colorDomain:[0,100]}))}})),!t.colorDomainAuto&&d.createElement("div",{style:{marginBottom:5}},d.createElement(St,{gutter:8},d.createElement(kt,{span:12},d.createElement(Rt,{size:"small",addonBefore:"min",style:{width:110},value:t.colorDomain[0],onChange:e=>{n(l(s({},t),{colorDomain:[e,t.colorDomain[1]]}))}})),d.createElement(kt,{span:12},d.createElement(Rt,{size:"small",addonBefore:"max",style:{width:110},value:t.colorDomain[1],onChange:e=>{n(l(s({},t),{colorDomain:[t.colorDomain[0],e]}))}})))),d.createElement("div",null,"Value format with:"," ",d.createElement(Tt,{overlay:r},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},S.get(S.find(Ste,{value:t.util}),"label")," ",d.createElement(M,null)))))}function Ote(e){var t;const{metric:n,match:r,range:i,step:a,onClose:o}=e,c=S.map(S.filter(r.dimensionLabels,(e=>!S.isEmpty(e.value))),"label"),[u,h]=f.exports.useState(S.uniqueId("refreshFlag_")),[p,m]=f.exports.useState(""),[g,v]=f.exports.useState([]),[y,E]=f.exports.useState("avg"),[b,C]=f.exports.useState(c),[T,w]=f.exports.useState([]),[k,_]=f.exports.useState([]),[A,O]=f.exports.useState({shared:!0,sharedSortDirection:"desc",legend:!0,util:"none",colorRange:Ac[0].value,reverseColorOrder:!1,colorDomainAuto:!0,colorDomain:[],chartheight:300}),[I,N]=f.exports.useState("line"),[F,L]=f.exports.useState("last"),D={custom:{drawStyle:"lines",fillOpacity:0,stack:"hidden",lineInterpolation:"smooth"},options:{legend:{displayMode:A.legend?"table":"hidden"},tooltip:{mode:A.shared?"all":"single",sort:A.sharedSortDirection},standardOptions:{util:A.util}}},B={custom:{calc:F,colorRange:A.colorRange,reverseColorOrder:A.reverseColorOrder,colorDomainAuto:A.colorDomainAuto,colorDomain:A.colorDomain},options:{standardOptions:{util:A.util}}},z={line:d.createElement(kte,{highLevelConfig:A,setHighLevelConfig:O}),hexbin:d.createElement(Ate,{highLevelConfig:A,setHighLevelConfig:O})};return f.exports.useEffect((()=>{C(c)}),[JSON.stringify(c)]),f.exports.useEffect((()=>{const e=gte(r);ute(`${n}${e}`,i).then((e=>{w(e)}))}),[u,JSON.stringify(r),JSON.stringify(i)]),f.exports.useEffect((()=>{(function(e){const{metric:t,match:n,range:r,step:i,calcFunc:a,comparison:o,aggrFunc:s,aggrGroups:l}=e;let{start:c,end:u}=nu(r),h=i;i||(h=Math.max(Math.floor((u-c)/250),1));const p=fte({metric:t,match:n,calcFunc:a,comparison:o,aggrFunc:s,aggrGroups:l}),d=S.map(p,(e=>ii("/api/n9e/prometheus/api/v1/query_range",{method:Kr.Get,params:{start:c-c%h,end:u-u%h,step:h,query:e}})));return Promise.all(d).then((e=>{const t=[];return S.forEach(["current",...o],((n,r)=>{var i,a;const o=((null==(i=e[r])?void 0:i.data)?null==(a=e[r])?void 0:a.data:e[r]).result||[];S.forEach(o,(e=>{t.push({metric:e.metric,color:e.color,offset:n,name:`${dte(e.metric)}${"current"!==n?` offset ${n}`:""}`,id:S.uniqueId("series_"),data:e.values})}))})),t}))})({metric:n,match:gte(r),range:i,step:a,aggrFunc:y,aggrGroups:b,calcFunc:p,comparison:g}).then((e=>{_(e)}))}),[u,n,JSON.stringify(r),JSON.stringify(i),a,p,g,y,b]),d.createElement(Ut,{size:"small",style:{marginBottom:10},title:n,className:"n9e-metric-views-metrics-graph",extra:d.createElement(Pt,null,d.createElement(Pt,{size:0,style:{marginRight:10}},d.createElement(x,{className:R({"button-link-icon":!0,active:"line"===I}),onClick:()=>{N("line")}}),d.createElement(Mt,{type:"vertical"}),d.createElement(wte,{className:R({"button-link-icon":!0,active:"hexbin"===I}),onClick:()=>{N("hexbin")}})),d.createElement(jt,{placement:"left",content:z[I],trigger:"click",autoAdjustOverflow:!1,getPopupContainer:()=>document.body},d.createElement("a",null,d.createElement(P,null))),d.createElement("a",null,d.createElement(ue,{onClick:()=>{h(S.uniqueId("refreshFlag_"))}})),d.createElement("a",null,d.createElement(he,{onClick:()=>{const e=localStorage.getItem("curCluster"),t=l(s({type:"timeseries",version:"2.0.0",name:n,step:a,range:i},D),{targets:S.map(fte({metric:n,match:gte(r),aggrFunc:y,aggrGroups:b,calcFunc:p,comparison:g}),(e=>({expr:e})))});var o;(o=[{configs:JSON.stringify({curCluster:e,dataProps:t})}],ii("/api/n9e/share-charts",{method:Kr.Post,data:o})).then((e=>{const t=e.dat;window.open("/chart/"+t)}))}})),d.createElement("a",null,d.createElement($,{onClick:o})))},d.createElement("div",null,d.createElement(Pt,null,d.createElement("div",null,"计算函数：",d.createElement(Tt,{overlay:d.createElement(vt,{onClick:e=>m("clear"===e.key?"":e.key),selectedKeys:[p]},d.createElement(vt.Item,{key:"rate_1m"},"rate_1m"),d.createElement(vt.Item,{key:"rate_5m"},"rate_5m"),d.createElement(vt.Item,{key:"increase_1m"},"increase_1m"),d.createElement(vt.Item,{key:"increase_5m"},"increase_5m"),d.createElement(vt.Divider,null),d.createElement(vt.Item,{key:"clear"},"clear"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},p||"无"," ",d.createElement(M,null)))),d.createElement("div",null,"环比：",g.map((e=>d.createElement(At,{key:e,closable:!0,onClose:()=>{v(S.without(g,e))}},e))),d.createElement(Tt,{overlay:d.createElement(vt,{onClick:e=>{-1===g.indexOf(e.key)?v([...g,e.key]):v(S.without(g,e.key))},selectedKeys:g},d.createElement(vt.Item,{key:"1d"},"1d"),d.createElement(vt.Item,{key:"7d"},"7d")),overlayStyle:{maxHeight:400,overflow:"auto"}},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(V,null)))),d.createElement("div",null,"聚合函数：",d.createElement(Tt,{overlay:d.createElement(vt,{onClick:e=>E(e.key),selectedKeys:[y]},d.createElement(vt.Item,{key:"sum"},"sum"),d.createElement(vt.Item,{key:"avg"},"avg"),d.createElement(vt.Item,{key:"max"},"max"),d.createElement(vt.Item,{key:"min"},"min"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},y," ",d.createElement(M,null)))),y?d.createElement("div",{className:"graph-config-inner-item"},"聚合维度：",b.map((e=>d.createElement(At,{key:e,closable:!0,onClose:()=>{C(S.without(b,e))}},e))),d.createElement(Tt,{overlay:d.createElement(vt,{onClick:e=>{-1===b.indexOf(e.key)?C([...b,e.key]):C(S.without(b,e.key))},selectedKeys:b},S.map(S.filter(T,(e=>"__name__"!==e)),(e=>d.createElement(vt.Item,{key:e},e)))),overlayStyle:{maxHeight:400,overflow:"auto"}},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(V,null)))):null,"hexbin"===I&&d.createElement("div",null,"取值计算：",d.createElement(Tt,{overlay:d.createElement(vt,{onClick:e=>L(e.key),selectedKeys:[F]},S.map(Ic,((e,t)=>d.createElement(vt.Item,{key:t},e.name))))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},null==(t=Ic[F])?void 0:t.name," ",d.createElement(M,null)))))),d.createElement("div",null,"line"===I&&d.createElement(yh,{inDashboard:!1,values:D,series:k}),"hexbin"===I&&d.createElement("div",{style:{padding:"20px 0 0 0",height:A.chartheight}},d.createElement(W$,{values:B,series:k}))))}function Ite(e){const{range:t,setRange:n,match:r}=e,[i,a]=f.exports.useState(S.uniqueId("refreshFlag_")),[o,c]=f.exports.useState(""),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState({}),[g,v]=f.exports.useState("all"),[y,x]=f.exports.useState([]),[E,b]=f.exports.useState([]),[C,T]=f.exports.useState(),w=gte(r);return f.exports.useEffect((()=>{w&&hte(w,t).then((e=>{const t=S.union(e),n=S.union(S.compact(S.map(t,(e=>S.get(S.split(e,"_"),"[0]")))));var r;h(t),x(n),(r=t,ii("/api/n9e/metrics/desc",{method:Kr.Post,data:r,silence:!0}).then((e=>null==e?void 0:e.dat))).then((e=>{m(e)}))}))}),[i,w]),f.exports.useEffect((()=>{b([]),v("all"),h([])}),[r.id,w]),d.createElement("div",{className:"n9e-metric-views-metrics"},d.createElement("div",null,d.createElement("div",{className:"n9e-metric-views-metrics-header"},d.createElement("div",{className:"metric-page-title"},"监控指标"),d.createElement(bt,{prefix:d.createElement(N,null),value:o,onChange:e=>{c(e.target.value)},placeholder:"搜索，空格分隔多个关键字",addonAfter:d.createElement(ue,{style:{cursor:"pointer"},onClick:()=>{a(S.uniqueId("refreshFlag_"))}})})),d.createElement("div",null,u.length>0?d.createElement(d.Fragment,null,d.createElement(Ut,{size:"small",style:{width:"100%"},tabList:S.map(["all",...y],(e=>({key:e,tab:e}))),activeTabKey:g,onTabChange:v},d.createElement("div",null,((e=[],t)=>{const n=S.filter(e,(e=>{let n=!0;if(n="all"===t||0===e.indexOf(t),n&&o)try{n=new RegExp(o,"gi").test(e)}catch(eh){n=!1}return n}));return d.createElement("div",{className:"tabPane",style:{height:240,overflow:"auto"}},n.length?d.createElement("ul",{className:"n9e-metric-views-metrics-content",style:{border:"none"}},S.map(n,((e,t)=>d.createElement("li",{className:"item",key:t,onClick:()=>{b(S.union(S.concat(e,E)))}},d.createElement("span",null,e),S.find(E,(t=>t===e))?d.createElement("span",{style:{marginLeft:8}},"+1"):null,p[e]?d.createElement(Ct,{title:p[e]},d.createElement("span",{className:"desc"},p[e])):null)))):d.createElement("div",{style:{textAlign:"center"}},"No data"))})(u,g))),d.createElement(St,{style:{padding:"10px 0"}},d.createElement(kt,{span:8},d.createElement(Pt,null,d.createElement(ru,{value:t,onChange:e=>{n(e)}}),d.createElement(au,{onChange:e=>{T(null===e?void 0:e)},initialValue:C}),d.createElement(yt,{style:{padding:"4px 8px"},onClick:()=>{n(l(s({},t),{refreshFlag:S.uniqueId("refreshFlag_")}))},icon:d.createElement(ue,null)}))),d.createElement(kt,{span:16,style:{textAlign:"right"}},d.createElement(yt,{onClick:()=>{b([])},disabled:!E.length,style:{background:"#fff"}},"清空图表"))),S.map(E,((e,n)=>d.createElement(Ote,{key:e,metric:e,match:r,range:t,step:C,onClose:()=>{const e=[...E];e.splice(n,1),b(e)}})))):d.createElement("div",{style:{marginTop:12}},"暂无指标数据，请选择左侧 Lables"))))}function Mte(){const[e,t]=f.exports.useState(),[n,r]=f.exports.useState({num:1,unit:"hour",description:"hour"}),[i,a]=f.exports.useState(S.uniqueId("rerenderFlag_"));return d.createElement(Wi,{title:"快捷视图",icon:d.createElement(x,null),hideCluster:!1,onChangeCluster:()=>{a(S.uniqueId("rerenderFlag_"))}},d.createElement("div",{className:"n9e-metric-views",key:i},d.createElement(bte,{onSelect:e=>{t(e)},range:n}),e?d.createElement(d.Fragment,null,d.createElement(Cte,{range:n,value:e,onChange:e=>{t(e)}}),d.createElement(Ite,{range:n,setRange:r,match:e})):null))}const Nte=function(e){return ii("/api/n9e/metric-descriptions",{method:Kr.Get,params:e})};const{confirm:Fte}=Ot,{TextArea:Lte}=bt,Pte=()=>{const{t:e}=Fr(),[t]=Et.useForm(),n=f.exports.useRef(null),r=f.exports.useRef(null),[i,a]=f.exports.useState(!1),[o,l]=f.exports.useState("create"),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState({}),[m,g]=f.exports.useState(""),v=w(),y={import:e("导入"),edit:e("编辑"),export:e("导出"),create:e("创建")},x=()=>{a(!1)},E=t=>{var r;(r=[t.id],ii("/api/n9e/metric-descriptions",{method:Kr.Delete,data:{ids:r}})).then((async t=>{await n.current.refreshList(),gt.success(e("删除指标成功"))}))},[b,C]=f.exports.useState(e("更多操作")),T=t=>{switch(t){case"import":a(!0),l("import");break;case"export":c.length<=0?gt.warning(e("请勾选需要导出的指标")):(a(!0),l("export"),setTimeout((()=>{r.current&&r.current.focus()})))}C(t)},S=(e,t,n,r)=>t.id===h.id?d.createElement(bt,{defaultValue:e,onPressEnter:()=>k("save"),onChange:e=>((e,t,n,r)=>{let i=Object.assign({},t);i[r]=e.target.value,p(i)})(e,t,0,r)}):d.createElement("span",null,e),k=async(t="")=>{if("save"===t){let t=h.id||-1;await function(e,t){return ii(`/api/n9e/metric-description/${e}`,{method:Kr.Put,data:t})}(t,{description:h.description,metric:h.metric}),gt.success(e("编辑成功")),n.current.refreshList()}p({})},_=[{title:e("指标名称"),dataIndex:"metric",key:"metric",render:(e,t)=>d.createElement("a",{onClick:()=>{let n={pathname:"/metric/explorer",state:{name:e,description:t.description}};v.push(n)}},e)},{title:e("释义"),dataIndex:"description",width:"40%",key:"description",render:(e,t,n)=>S(e,t,0,"description")},{title:e("操作"),dataIndex:"",key:"operations",width:"15%",render:(t,n)=>d.createElement("div",{className:"operations"},n.id!==h.id?d.createElement("div",null,d.createElement("span",{className:"operation-item edit",onClick:()=>(e=>{p(e)})(n)},e("编辑")),d.createElement("div",{className:"table-operator-area-warning",style:{display:"inline-block",marginLeft:10},onClick:()=>{Fte({title:e("确定删除该指标?"),icon:d.createElement(Ge,null),onOk:()=>{E(n)}})}},e("删除"))):d.createElement("div",null,d.createElement("span",{className:"operation-item edit-save",onClick:()=>k("save")},e("保存")),d.createElement("span",{className:"operation-item edit-cancel",onClick:()=>k("cancel")},e("取消"))))}],A={onChange:(e,t)=>{let n=[];t.map((e=>{n.push(`${e.metric}:${e.description}`)})),u(n)}};return d.createElement(Wi,{title:e("指标释义"),icon:d.createElement($e,null)},d.createElement("div",{className:"indicator-index"},d.createElement("div",{className:"indicator-operations"},d.createElement(bt,{className:"searchInput",onPressEnter:e=>{let t=e.target.value;g(t)},prefix:d.createElement(N,null),placeholder:e("指标名称或释义")}),d.createElement("div",{className:"operations"},d.createElement(yt.Group,null,d.createElement(yt,{size:"middle",type:"default",icon:d.createElement(Ye,null),onClick:()=>T("import")},e("导入")),d.createElement(yt,{size:"middle",type:"default",icon:d.createElement(Ue,null),onClick:()=>T("export")},e("导出"))))),d.createElement("div",{className:"indicator-main"},d.createElement(Hee,{fetchHandle:Nte,ref:n,fetchParams:{query:m},rowSelection:s({},A),rowKey:e=>e.id,columns:_}))),d.createElement(Ot,{title:y[o],destroyOnClose:!0,footer:"export"!==o&&[d.createElement(yt,{key:"delete",onClick:x},e("取消")),d.createElement(yt,{key:"submit",type:"primary",onClick:async()=>{try{const i=await t.validateFields();(r=i.metrics||"",ii("/api/n9e/metric-descriptions",{method:Kr.Post,data:{data:r}})).then((async t=>{t&&t.success&&(await n.current.refreshList(),a(!1),gt.success(e("创建指标成功")))}))}catch(eh){}var r}},e("确定"))],onCancel:x,visible:i},d.createElement("p",{style:{color:"#999"}},"export"===o?d.createElement("a",{onClick:()=>{oi(c)}},"Download.txt"):d.createElement("span",null,e("一行一个"))),(()=>{switch(o){case"export":return d.createElement("div",{contentEditable:"true",suppressContentEditableWarning:!0,ref:r,style:{height:"200px",border:"1px solid #d9d9d9",overflow:"auto",padding:"10px"}},c.map(((e,t)=>d.createElement("div",{key:t},e))));case"import":case"create":return d.createElement(Et,{name:o+"-dialog",form:t,preserve:!1},d.createElement(Et.Item,{name:"metrics",key:"metrics",rules:[{required:!0,message:e("不能为空"),validateTrigger:"trigger"}]},d.createElement(Lte,{placeholder:"name:description",rows:4})))}})()))};function Rte(e){const{form:t}=e,[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState({});return f.exports.useEffect((()=>{ii("/api/fc-brain/params",{method:Kr.Get}).then((e=>e.data)).then((e=>{a(e)}))}),[]),d.createElement(d.Fragment,null,d.createElement(Et.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:"告警方式"},d.createElement(Dt.Group,{buttonStyle:"solid",value:"holtwinters"===e("algorithm")?"abnormalDetection":"threshold",onChange:e=>{"abnormalDetection"===e.target.value?t.setFieldsValue({algorithm:"holtwinters",algo_params:null==i?void 0:i.holtwinters}):t.setFieldsValue({algorithm:"",algo_params:void 0})}},d.createElement(Dt.Button,{value:"threshold"},"阈值告警"),d.createElement(Dt.Button,{value:"abnormalDetection"},"智能告警"))),"holtwinters"===e("algorithm")&&d.createElement(d.Fragment,null,d.createElement(Et.Item,{label:"使用算法",name:"algorithm",style:{display:"none"}},d.createElement(It,null,d.createElement(It.Option,{value:"holtwinters"},"holtwinters"))),d.createElement(Et.Item,{label:"高级配置"},d.createElement("div",{style:{height:32,lineHeight:"32px",userSelect:"none"}},d.createElement("a",{onClick:()=>r(!n)},n?"收起":"展开")),d.createElement("div",{style:{display:n?"block":"none"}},d.createElement("div",null,"季节性周期时间为：",d.createElement(Et.Item,{noStyle:!0,name:["algo_params","seasonal_duration"]},d.createElement(It,{style:{width:100}},d.createElement(It.Option,{value:3600},"小时"),d.createElement(It.Option,{value:86400},"天"),d.createElement(It.Option,{value:604800},"周"),d.createElement(It.Option,{value:2592e3},"月")))," "),d.createElement("div",{style:{display:"flex",alignItems:"baseline",marginTop:16}},d.createElement("div",{style:{marginRight:16}},"偏离"),d.createElement("div",{style:{display:"flex",gap:20}},d.createElement("div",{style:{marginBottom:16}},d.createElement(Et.Item,{noStyle:!0,name:["algo_params","upper_bound"],valuePropName:"checked",getValueFromEvent:e=>e.target.checked?1:0},d.createElement(wt,null,"上界")),d.createElement(Et.Item,{noStyle:!0,name:["algo_params","upper_times_num"]},d.createElement(Rt,null))," ","倍误差"),d.createElement("div",null,d.createElement(Et.Item,{noStyle:!0,name:["algo_params","lower_bound"],valuePropName:"checked",getValueFromEvent:e=>e.target.checked?1:0},d.createElement(wt,null,"下界")),d.createElement(Et.Item,{noStyle:!0,name:["algo_params","lower_times_num"]},d.createElement(Rt,null))," ","倍误差"))),d.createElement("div",null,d.createElement(Et.List,{name:["algo_params","compares"]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement("div",{style:{marginBottom:10}},"同环比"," ",d.createElement(V,{onClick:()=>{t({operator:1,offset:86400,bound_type:0})}})),e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(Pt,{key:r,style:{display:"flex",marginBottom:8},align:"baseline"},d.createElement(Et.Item,l(s({},a),{name:[i,"operator"]}),d.createElement(It,null,d.createElement(It.Option,{value:1},"且"),d.createElement(It.Option,{value:0},"或"))),d.createElement("span",null,"相比"),d.createElement(Et.Item,l(s({},a),{name:[i,"offset"]}),d.createElement(It,null,d.createElement(It.Option,{value:86400},"1"),d.createElement(It.Option,{value:172800},"2"),d.createElement(It.Option,{value:259200},"3"),d.createElement(It.Option,{value:345600},"4"),d.createElement(It.Option,{value:432e3},"5"),d.createElement(It.Option,{value:518400},"6"),d.createElement(It.Option,{value:604800},"7"))),d.createElement("span",null,"天前同时期"),d.createElement(Et.Item,l(s({},a),{name:[i,"bound_type"]}),d.createElement(It,null,d.createElement(It.Option,{value:0},"偏离"),d.createElement(It.Option,{value:1},"上升"),d.createElement(It.Option,{value:2},"下降"))),d.createElement(Et.Item,l(s({},a),{name:[i,"value"]}),d.createElement(Rt,null))," %",d.createElement(U,{onClick:()=>n(i)}))})))))))))))))}const{Option:Dte}=It,Bte={labelCol:{span:3},wrapperCol:{span:21}},zte={wrapperCol:{offset:3}};function Hte(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function jte(e){const{isCorrectFormat:t,isLengthAllowed:n}=Hte(e.value);return t&&n?d.createElement(At,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(Ct,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(At,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function Gte(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=Hte(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const $te=({type:e,detail:t={}})=>{const{t:n,i18n:r}=Fr(),i=w(),[a]=Et.useForm(),{clusters:o}=ni((e=>e.common)),{curBusiItem:c}=ni((e=>e.common)),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState([]),[g,v]=f.exports.useState({}),[y,x]=f.exports.useState(!0),[E,b]=f.exports.useState(!0);f.exports.useEffect((()=>(_(),A(""),()=>{})),[]),f.exports.useEffect((()=>{const n=l(s({},t),{enable_time:(null==t?void 0:t.enable_stime)?[t.enable_stime,t.enable_etime]:[],enable_status:void 0===(null==t?void 0:t.disabled)||!(null==t?void 0:t.disabled)});if(v(n),1==e){const e=(t.notify_groups_obj?t.notify_groups_obj.filter((e=>!p.find((t=>e.id===t.id)))):[]).concat(p);m(e)}}),[JSON.stringify(t)]);const C=[n("周日"),n("周一"),n("周二"),n("周三"),n("周四"),n("周五"),n("周六")].map(((e,t)=>d.createElement(Dte,{value:String(t),key:t},`${e}`))),T=u.map((e=>d.createElement(wt,{value:e.key,key:e.label},e.label))),k=p.map((e=>d.createElement(Dte,{value:String(e.id),key:e.id},e.name))),_=async()=>{const e=await Ua();h(e||[])},A=async e=>{const n=await ja({query:e}),r=n.dat||n,i=(t.notify_groups_obj?t.notify_groups_obj.filter((e=>!r.find((t=>e.id===t.id)))):[]).concat(r);m(i||[])},I=f.exports.useCallback(Y.exports.debounce(A,800),[]);return d.createElement("div",{className:"operate_con"},d.createElement(Et,l(s({},Bte),{form:a,className:"strategy-form",layout:"horizontal",initialValues:l(s({prom_eval_interval:15,prom_for_duration:60,severity:2,disabled:0,cluster:o[0]||"Default",enable_days_of_week:["1","2","3","4","5","6","0"]},t),{enable_in_bg:1===(null==t?void 0:t.enable_in_bg),enable_time:(null==t?void 0:t.enable_stime)?[O(t.enable_stime,"HH:mm"),O(t.enable_etime,"HH:mm")]:[O("00:00","HH:mm"),O("23:59","HH:mm")],enable_status:void 0===(null==t?void 0:t.disabled)||!(null==t?void 0:t.disabled),notify_recovered:1===(null==t?void 0:t.notify_recovered)||void 0===(null==t?void 0:t.notify_recovered),recover_duration:(null==t?void 0:t.recover_duration)||0,callbacks:(null==t?void 0:t.callbacks)?t.callbacks.map((e=>({url:e}))):[{}]})}),d.createElement(Pt,{direction:"vertical",style:{width:"100%"}},d.createElement(Ut,{title:n("基本配置")},d.createElement(Et.Item,{label:n("规则标题："),name:"name",rules:[{required:!0,message:n("规则标题不能为空")}]},d.createElement(bt,{placeholder:n("请输入规则标题")})),d.createElement(Et.Item,{label:n("规则备注："),name:"note",rules:[{required:!1}]},d.createElement(bt,{placeholder:n("请输入规则备注")})),d.createElement(Et.Item,{label:n("告警级别"),name:"severity",rules:[{required:!0,message:n("告警级别不能为空")}]},d.createElement(Dt.Group,null,d.createElement(Dt,{value:1},n("一级报警")),d.createElement(Dt,{value:2},n("二级报警")),d.createElement(Dt,{value:3},n("三级报警")))),d.createElement(Et.Item,{label:n("生效集群"),name:"cluster",rules:[{required:!0,message:n("生效集群不能为空")}]},d.createElement(It,{suffixIcon:d.createElement(j,null)},null==o?void 0:o.map((e=>d.createElement(Dte,{value:e,key:e},e))))),d.createElement(Oi,null,d.createElement(Rte,{form:a})),d.createElement(Et.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.cluster!==t.cluster},(()=>d.createElement(Et.Item,{label:"PromQL",className:"Promeql-content",required:!0,style:{marginBottom:0}},d.createElement(Oi,null,(e=>d.createElement(bt.Group,{compact:!0},d.createElement(Et.Item,{style:{width:e?"calc(100% - 80px)":"100%"},name:"prom_ql",validateTrigger:["onBlur"],trigger:"onChange",rules:[{required:!0,message:n("请输入PromQL")}]},d.createElement(g9,{url:"/api/n9e/prometheus",headers:{"X-Cluster":a.getFieldValue("cluster"),Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},onChange:()=>{b(!1)}})),e&&d.createElement(yt,{onClick:()=>{const e=a.getFieldsValue();var t;e.prom_ql&&(b(!0),(t={cluster:e.cluster,algorithm:e.algorithm,algo_params:e.algo_params,prom_ql:e.prom_ql,prom_eval_interval:e.prom_eval_interval},ii("/api/fc-brain/promql-check",{method:Kr.Post,data:t,silence:!0}).then((e=>e.data))).then((()=>{gt.success("校验通过")})).catch((e=>{gt.error(d.createElement("div",null,"校验失败",d.createElement("div",null,e.data.error)))})))}},"指标校验"))))))),d.createElement(Et.Item,{required:!0,label:n("执行频率")},d.createElement(Pt,null,d.createElement(Et.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:15,wrapperCol:{span:10},rules:[{required:!0,message:n("执行频率不能为空")}]},d.createElement(Rt,{min:1,onChange:e=>{x(!y)}})),"秒",d.createElement(Ct,{title:n(`每隔${a.getFieldValue("prom_eval_interval")}秒，把PromQL作为查询条件，去查询后端存储，如果查到了数据就表示当次有监控数据触发了规则`)},d.createElement(W,null)))),d.createElement(Et.Item,{required:!0,label:n("持续时长"),rules:[{required:!0,message:n("持续时长不能为空")}]},d.createElement(Pt,null,d.createElement(Et.Item,{style:{marginBottom:0},name:"prom_for_duration",wrapperCol:{span:10}},d.createElement(Rt,{min:0})),"秒",d.createElement(Ct,{title:n("通常持续时长大于执行频率，在持续时长内按照执行频率多次执行PromQL查询，每次都触发才生成告警；如果持续时长置为0，表示只要有一次PromQL查询触发阈值，就生成告警")},d.createElement(W,null)))),d.createElement(Et.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},Gte]},d.createElement(It,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:jte})),d.createElement(Et.Item,{label:n("预案链接"),name:"runbook_url"},d.createElement(bt,null))),d.createElement(Ut,{title:n("生效配置")},d.createElement(Et.Item,{label:n("立即启用"),name:"enable_status",rules:[{required:!0,message:n("立即启用不能为空")}],valuePropName:"checked"},d.createElement(Ft,null)),d.createElement(Et.Item,{label:n("生效时间"),name:"enable_days_of_week",rules:[{required:!0,message:n("生效时间不能为空")}]},d.createElement(It,{mode:"tags"},C)),d.createElement(Et.Item,l(s({name:"enable_time"},zte),{rules:[{required:!0,message:n("生效时间不能为空")}]}),d.createElement(Lt.RangePicker,{format:"HH:mm",onChange:(e,t)=>{a.setFieldsValue({enable_stime:t[0],enable_etime:t[1]})}})),d.createElement(Et.Item,{label:n("仅在本业务组生效"),name:"enable_in_bg",valuePropName:"checked"},d.createElement(Wa,{label:"根据告警事件中的ident归属关系判断"}))),d.createElement(Ut,{title:n("通知配置")},d.createElement(Et.Item,{label:n("通知媒介"),name:"notify_channels"},d.createElement(wt.Group,null,T)),d.createElement(Et.Item,{label:n("告警接收组"),name:"notify_groups"},d.createElement(It,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>I(e),onBlur:()=>A("")},k)),d.createElement(Et.Item,{label:n("启用恢复通知")},d.createElement(Pt,null,d.createElement(Et.Item,{name:"notify_recovered",valuePropName:"checked",style:{marginBottom:0}},d.createElement(Ft,null)),d.createElement(Ct,{title:n("告警恢复时也发送通知")},d.createElement(W,null)))),d.createElement(Et.Item,{label:n("留观时长"),required:!0},d.createElement(Pt,null,d.createElement(Et.Item,{style:{marginBottom:0},name:"recover_duration",initialValue:0,wrapperCol:{span:10}},d.createElement(Rt,{min:0,onChange:e=>{x(!y)}})),"秒",d.createElement(Ct,{title:n(`持续${a.getFieldValue("recover_duration")}秒没有再次触发阈值才发送恢复通知`)},d.createElement(W,null)))),d.createElement(Et.Item,{label:n("重复发送频率"),required:!0},d.createElement(Pt,null,d.createElement(Et.Item,{style:{marginBottom:0},name:"notify_repeat_step",initialValue:60,wrapperCol:{span:10},rules:[{required:!0,message:n("重复发送频率不能为空")}]},d.createElement(Rt,{min:0,onChange:e=>{x(!y)}})),"分钟",d.createElement(Ct,{title:n(`如果告警持续未恢复，间隔${a.getFieldValue("notify_repeat_step")}分钟之后重复提醒告警接收组的成员`)},d.createElement(W,null)))),d.createElement(Et.Item,{label:n("最大发送次数"),required:!0},d.createElement(Pt,null,d.createElement(Et.Item,{style:{marginBottom:0},name:"notify_max_number",initialValue:0,wrapperCol:{span:10},rules:[{required:!0,message:n("最大发送次数不能为空")}]},d.createElement(Rt,{min:0,precision:0})),d.createElement(Ct,{title:n("如果值为0，则不做最大发送次数的限制")},d.createElement(W,null)))),d.createElement(Et.Item,{label:n("回调地址")},d.createElement(Et.List,{name:"callbacks",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map((e=>d.createElement(St,{gutter:[10,0],key:e.key},d.createElement(kt,{span:22},d.createElement(Et.Item,{name:[e.name,"url"],fieldKey:[e.fieldKey,"url"]},d.createElement(bt,null))),d.createElement(kt,{span:1},d.createElement(U,{className:"control-icon-normal",onClick:()=>n(e.name)}))))),d.createElement(V,{className:"control-icon-normal",onClick:()=>t()})))))),d.createElement(Et.Item,{style:{marginTop:20}},d.createElement(yt,{type:"primary",onClick:()=>{a.validateFields().then((async r=>{if(!E&&"holtwinters"===r.algorithm)return void gt.warning("请先校验指标");const a=await function(e,t){return ii("/api/n9e/prometheus/api/v1/query",{method:Kr.Get,params:e,headers:{"X-Cluster":t}})}({query:r.prom_ql},r.cluster);if(a.error)return mt.error({message:a.error}),!1;const o=r.callbacks.map((e=>e.url)),u=l(s({},r),{enable_stime:r.enable_time[0].format("HH:mm"),enable_etime:r.enable_time[1].format("HH:mm"),disabled:r.enable_status?0:1,notify_recovered:r.notify_recovered?1:0,enable_in_bg:r.enable_in_bg?1:0,callbacks:o});let h,p="Post";if(1===e){h=u,p="Put";const e=await function(e,t,n){return ii(`/api/n9e/busi-group/${t}/alert-rule/${n}`,{method:Kr.Put,data:e})}(h,c.id,t.id);e.err?gt.error(e.error):(gt.success(n("编辑成功！")),i.push("/alert-rules"))}else{0===S.toNumber(window.localStorage.getItem("license_rules_remaining"))&&"holtwinters"===u.algorithm&&gt.error("可添加的智能告警规则数量已达上限，请联系客服"),h=[u];const{dat:t}=await Di(h,c.id,p);let r=0;const a=Object.keys(t).map((e=>(t[e]&&r++,t[e])));r?gt.error(n(a)):(gt.success(`${n(2===e?"告警规则克隆成功":"告警规则创建成功")}`),i.push("/alert-rules"))}}))},style:{marginRight:"8px"}},n(1===e?"编辑":2===e?"克隆":"创建")),1===e&&d.createElement(yt,{danger:!0,style:{marginRight:"8px"},onClick:()=>{Ot.confirm({title:n("是否删除该告警规则?"),onOk:()=>{Bi([t.id],c.id).then((()=>{gt.success(n("删除成功")),i.push("/alert-rules")}))},onCancel(){}})}},n("删除")),d.createElement(yt,{onClick:()=>{i.push("/alert-rules")}},n("取消"))))))};const Yte=()=>{const{t:e}=Fr();return d.createElement(Wi,{title:e("告警规则"),showBack:!0,hideCluster:!0},d.createElement($te,null))},Ute=()=>{const{t:e}=Fr(),t=ui().get("mode"),n=q(),r=f.exports.useMemo((()=>n.id),[n]),[i,a]=f.exports.useState({});f.exports.useEffect((()=>(o(),()=>{})),[r]);const o=async()=>{const e=await(t=r,ii(`/api/n9e/alert-rule/${t}`,{method:Kr.Get}));var t;a(e.dat||{})};return d.createElement(Wi,{title:e("告警规则"),showBack:!0,hideCluster:!0},i.id&&d.createElement($te,{detail:i,type:t?2:1}))};function Vte(e){const{series:t}=e;return d.createElement("div",{style:{height:200}},d.createElement(yh,{values:{custom:{drawStyle:"lines",fillOpacity:0,stack:"hidden",lineInterpolation:"smooth"},options:{legend:{displayMode:"hidden"},tooltip:{mode:"all"}}},series:t}))}const Wte={origin:"#573BA7",upper_bound:"#1A94FF",lower_bound:"#2ACA96",anomaly:"red"};function Xte(e){const{rid:t,uuid:n,promql:r,visible:i,setVisible:a}=e,[o,s]=f.exports.useState({num:1,unit:"hour",description:""}),[l,c]=f.exports.useState(15),[u,h]=f.exports.useState([]);return f.exports.useEffect((()=>{let{start:e,end:r}=nu(o),i=l;l||(i=Math.max(Math.floor((r-e)/250),1)),t&&n&&Ui({rid:t,uuid:n,start:e,end:r,step:i}).then((e=>{const t=S.map(S.filter(e.data,(e=>"predict"!==e.metric.value_type)),(e=>{const t=e.metric.value_type;return{name:`${t}`,data:e.values,color:Wte[t],lineDash:"origin"===t||"anomaly"===t?[]:[4,4]}})),n=[],r=S.cloneDeep(S.find(t,{name:"origin"})),i=S.find(t,{name:"lower_bound"}),a=S.find(t,{name:"upper_bound"});n.push({name:"lower_upper_bound",data:S.map(null==i?void 0:i.data,((e,t)=>a?[...e,null==a?void 0:a.data[t][1]]:[])),color:"#ddd",opacity:.5}),r&&n.push(r),h(n)}))}),[t,n,JSON.stringify(o),l]),d.createElement(Vt,{title:"曲线详情",width:800,placement:"right",onClose:()=>{a(!1)},visible:i},d.createElement("div",null,d.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},d.createElement(g9,{readonly:!0,url:"/api/n9e/prometheus",value:r}),d.createElement(Pt,null,d.createElement(ru,{value:o,onChange:s}),d.createElement(au,{value:l,onChange:e=>c(e),initialValue:l}))),d.createElement(Vte,{series:u})))}const qte={total:{border:"#9684C6",bg:"#EBE8F2",text:"总曲线数",title:"所有曲线"},success:{border:"#83D35C",bg:"#E8F4E3",text:"训练成功",title:"训练成功",status:1},fail:{border:"#EE5A52",bg:"#FCE7E6",text:"训练失败",title:"训练失败",status:2},training:{border:"#CCCCCC",bg:"#F4F4F4",text:"训练中",title:"训练中",status:0}};function Kte(){const[e,t]=f.exports.useState({}),[n,r]=f.exports.useState([]),[i,a]=f.exports.useState(""),[o,c]=f.exports.useState({}),[u,h]=f.exports.useState("total"),p=q();return f.exports.useEffect((()=>{var e;(e=p.id,ii("/api/fc-brain/jobs",{method:Kr.Get,params:{id:e}}).then((e=>e.data))).then((e=>{t({total:e.total,success:e.success,fail:e.fail,training:e.training}),r(e.jobs)}))}),[p.id]),d.createElement(Wi,{title:"训练结果",showBack:!0,hideCluster:!0},d.createElement("div",{className:"strategy-jobs-content"},d.createElement("div",{style:{padding:16}},d.createElement(St,{gutter:16},S.map(e,((t,n)=>d.createElement(kt,{key:n,span:6},d.createElement("div",{style:{border:`1px solid ${qte[n].border}`,borderRadius:2,background:qte[n].bg,height:86,display:"flex",gap:16,alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>{h(n)}},d.createElement(Wt,{width:60,type:"circle",percent:t/e.total*100,strokeColor:qte[n].border,strokeWidth:12,trailColor:"#FFFFFF",format:e=>null}),d.createElement("div",null,d.createElement("div",{style:{fontSize:24,color:"#333",fontWeight:500}},t),d.createElement("div",{style:{color:"#666"}},qte[n].text))))))),d.createElement(Nt,{style:{marginTop:6},rowKey:"uuid",showHeader:!0,title:()=>d.createElement("h3",null,qte[u].title),dataSource:S.filter(n,(e=>i?e.promql.indexOf(i)>-1:"total"===u||e.status===qte[u].status)),columns:[{title:d.createElement(Pt,null,d.createElement("span",null,"PromQL"),d.createElement(bt,{size:"small",prefix:d.createElement(N,null),value:i,onChange:e=>{a(e.target.value)}})),dataIndex:"promql",key:"promql"},{title:"结果",dataIndex:"train_detail",key:"train_detail"},{title:"操作",render:e=>d.createElement("a",{onClick:()=>{c({visible:!0,uuid:e.uuid,promql:e.promql})}},"曲线详情")}],locale:{emptyText:d.createElement("div",{style:{padding:"20px 0"}},d.createElement(Ve,{style:{fontSize:24}}),d.createElement("div",null,"曲线模型训练中"))}}))),d.createElement(Xte,l(s({rid:p.id},o),{setVisible:e=>{c(l(s({},o),{visible:e}))}})))}const{confirm:Qte}=Ot,Zte=()=>{const{t:e}=Fr(),t=w(),n=Vr(),[r,i]=f.exports.useState(""),{curBusiItem:a}=ni((e=>e.common)),[o,s]=f.exports.useState(void 0),[l,c]=f.exports.useState([]),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState([]),[g,v]=f.exports.useState(!1),y=[{title:e("集群"),dataIndex:"cluster",render:e=>d.createElement("div",null,e)},{title:e("标签"),dataIndex:"tags",render:e=>d.createElement(d.Fragment,null,e?e.map(((e,t)=>e?d.createElement("div",{key:t,style:{lineHeight:"16px"}},`${e.key} ${e.func} ${"in"===e.func?e.value.split(" ").join(", "):e.value}`):null)):"")},{title:e("屏蔽原因"),dataIndex:"cause",render:(e,t)=>d.createElement(d.Fragment,null,d.createElement(Ct,{placement:"topLeft",title:e},d.createElement("div",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"16px"}},e)),"by ",t.create_by)},{title:e("屏蔽时间"),dataIndex:"btime",render:(t,n)=>d.createElement("div",{className:"shield-time"},d.createElement("div",null,e("开始:"),X(1e3*(null==n?void 0:n.btime)).format("YYYY-MM-DD HH:mm:ss")),d.createElement("div",null,e("结束:"),X(1e3*(null==n?void 0:n.etime)).format("YYYY-MM-DD HH:mm:ss")))},{title:e("操作"),width:"98px",dataIndex:"operation",render:(r,i)=>d.createElement(d.Fragment,null,d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{n({type:"shield/setCurShieldData",data:i}),(null==a?void 0:a.id)&&t.push(`/alert-mutes/edit/${i.id}?mode=clone`)}},e("克隆")),d.createElement("div",{className:"table-operator-area-warning",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{Qte({title:e("确定删除该告警屏蔽?"),icon:d.createElement(Ge,null),onOk:()=>{x(i.id)},onCancel(){}})}},e("删除"))))}];f.exports.useEffect((()=>{b()}),[a]),f.exports.useEffect((()=>{E()}),[r,l,u]);const x=t=>{var n,r;(n={ids:[t]},r=a.id,ii(`/api/n9e/busi-group/${r}/alert-mutes`,{method:Kr.Delete,data:n})).then((t=>{C(),t.err?gt.success(t.err):gt.success(e("删除成功"))}))},E=()=>{const e=JSON.parse(JSON.stringify(u)).filter((e=>{const t=e.tags.find((e=>e.key.indexOf(r)>-1||e.value.indexOf(r)>-1||e.func.indexOf(r)>-1));return(e.cause.indexOf(r)>-1||!!t)&&(l&&(null==l?void 0:l.indexOf(e.cluster))>-1||0===(null==l?void 0:l.length))}));m(e||[])},b=async()=>{if(a.id){v(!0);const{success:t,dat:n}=await(e={id:a.id},ii(`/api/n9e/busi-group/${e.id}/alert-mutes`,{method:Kr.Get}));t&&(h(n||[]),v(!1))}var e},C=()=>{b()};return d.createElement(Wi,{title:e("屏蔽规则"),icon:d.createElement($,null),hideCluster:!0},d.createElement("div",{className:"shield-content"},d.createElement(ya,{busiGroup:{onChange:e=>{s(e)}}}),(null==a?void 0:a.id)?d.createElement("div",{className:"shield-index"},d.createElement("div",{className:"header"},d.createElement("div",{className:"header-left"},d.createElement(Fa,{className:"strategy-table-search-left-refresh",onClick:()=>{C()}}),d.createElement(no,{onClusterChange:e=>c(e)}),d.createElement(bt,{onPressEnter:e=>{let t=e.target.value;i(t)},className:"searchInput",prefix:d.createElement(N,null),placeholder:e("搜索标签、屏蔽原因")})),d.createElement("div",{className:"header-right"},d.createElement(yt,{type:"primary",className:"add",ghost:!0,onClick:()=>{t.push("/alert-mutes/add")}},e("新增屏蔽规则")))),d.createElement(Nt,{rowKey:"id",pagination:{total:p.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:Ma,defaultPageSize:30},loading:g,dataSource:p,columns:y})):d.createElement(xa,{text:"屏蔽规则"})))},{Option:Jte}=It,ene=({field:e,remove:t,form:n})=>{const{t:r}=Fr(),[i,a]=f.exports.useState(""),[o,s]=f.exports.useState("==");f.exports.useEffect((()=>{const t=n.getFieldValue("tags");l(t[e.name].func)}),[e]);const l=e=>{let t="";"in"===e?t="可以输入多个值，用回车分割":"=~"===e&&(t="请输入正则表达式匹配标签value"),s(e),a(t)};return d.createElement(d.Fragment,null,d.createElement(St,{gutter:[10,10],style:{marginBottom:"10px"}},d.createElement(kt,{span:5},d.createElement(Et.Item,{style:{marginBottom:0},name:[e.name,"key"],fieldKey:[e.name,"key"],rules:[{required:!0,message:r("key不能为空")}]},d.createElement(bt,{placeholder:r("请输入屏蔽事件标签key")}))),d.createElement(kt,{span:3},d.createElement(Et.Item,{style:{marginBottom:0},name:[e.name,"func"],fieldKey:[e.name,"func"],initialValue:"=="},d.createElement(It,{suffixIcon:d.createElement(j,null),onChange:l},d.createElement(Jte,{value:"=="},"=="),d.createElement(Jte,{value:"=~"},"=~"),d.createElement(Jte,{value:"in"},"in")))),d.createElement(kt,{span:15},d.createElement(Et.Item,{style:{marginBottom:0},name:[e.name,"value"],fieldKey:[e.name,"value"],rules:[{required:!0,message:r("value不能为空")}]},"in"==o?d.createElement(It,{mode:"tags",open:!1,style:{width:"100%"},placeholder:r(i),tokenSeparators:[" "]}):d.createElement(bt,{className:"ant-input",placeholder:r(i)}))),d.createElement(kt,null,d.createElement(U,{style:{marginTop:"8px"},onClick:()=>t(e.name)}))))},{Option:tne}=It,{TextArea:nne}=bt,rne=({detail:e={},type:t,tagsObj:n={}})=>{const r=(new Date).getTime(),i=(new Date).getTime()+36e5,{t:a,i18n:o}=Fr(),{clusters:c}=ni((e=>e.common)),[u]=Et.useForm(null),h=w(),[p,m]=f.exports.useState(!1),[g,v]=f.exports.useState("1h"),{curBusiItem:y,busiGroups:x}=ni((e=>e.common));f.exports.useEffect((()=>{const e=u.getFieldValue("btime"),t=u.getFieldValue("etime");return t&&e&&(O.duration(t-e).days(),O.duration(t-e).hours(),O.duration(t-e).minutes(),O.duration(t-e).seconds()),y?u.setFieldsValue({busiGroup:y.id}):x.length>0?u.setFieldsValue({busiGroup:x[0].id}):(gt.warning("无可用业务组"),h.push("/alert-mutes")),()=>{}}),[u]),f.exports.useEffect((()=>{var e;if((null==n?void 0:n.tags)&&(null==n?void 0:n.tags.length)>0){const t=null==(e=null==n?void 0:n.tags)?void 0:e.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));u.setFieldsValue({tags:t||[{}],cluster:n.cluster})}}),[n]);const E=()=>{const e=u.getFieldValue("btime"),t=u.getFieldValue("etime");if(t&&e){const n=Math.floor(O.duration(t-e).asDays()),r=Math.floor(O.duration(t-e).hours()),i=Math.floor(O.duration(t-e).minutes()),a=Math.floor(O.duration(t-e).seconds());v(`${n?`${n}d `:""}${r?`${r}h `:""}${i?`${i}m `:""}${a?`${a}s`:""}`)}},b=d.createElement(Et,l(s({form:u},{labelCol:{span:24},wrapperCol:{span:24}}),{layout:"vertical",className:"operate-form",onFinish:e=>{var t;m(!0);const n=null==(t=null==e?void 0:e.tags)?void 0:t.map((e=>l(s({},e),{value:Array.isArray(e.value)?e.value.join(" "):e.value}))),r=l(s({},e),{btime:O(e.btime).unix(),etime:O(e.etime).unix(),tags:n}),i=u.getFieldValue("busiGroup");var o,c;(o=r,c=i,ii(`/api/n9e/busi-group/${c}/alert-mutes`,{method:Kr.Post,data:o})).then((e=>{gt.success(a("新建告警屏蔽成功")),h.push("/alert-mutes")})).finally((()=>{m(!1)}))},onFinishFailed:()=>{m(!1)},initialValues:l(s({},e),{btime:(null==e?void 0:e.btime)?O(1e3*e.btime):O(r),etime:(null==e?void 0:e.etime)?O(1e3*e.etime):O(i),cluster:c[0]||"Default"})}),d.createElement(Ut,null,d.createElement(Et.Item,{label:a("业务组："),name:"busiGroup"},d.createElement(It,{suffixIcon:d.createElement(j,null)},null==x?void 0:x.map((e=>d.createElement(tne,{value:e.id,key:e.id},e.name))))),d.createElement(Et.Item,{label:a("生效集群："),name:"cluster",rules:[{required:!0,message:a("生效集群不能为空")}]},d.createElement(It,{suffixIcon:d.createElement(j,null)},null==c?void 0:c.map((e=>d.createElement(tne,{value:e,key:e},e))))),d.createElement(St,{gutter:10},d.createElement(kt,{span:8},d.createElement(Et.Item,{label:a("屏蔽开始时间："),name:"btime"},d.createElement(Ht,{showTime:!0,onChange:E}))),d.createElement(kt,{span:8},d.createElement(Et.Item,{label:a("屏蔽时长：")},d.createElement(It,{suffixIcon:d.createElement(j,null),placeholder:a("请选择屏蔽时长"),onChange:e=>{v(e);const t=(new Date).getTime();if("forever"===e){const e=6048e9;return void u.setFieldsValue({btime:O(t),etime:O(t).add({seconds:e})})}const n=e.charAt(e.length-1),r=e.substr(0,e.length-1);u.setFieldsValue({btime:O(t),etime:O(t).add({[n]:r})})},value:g},Na.map(((e,t)=>d.createElement(tne,{key:t,value:e.value},e.value)))))),d.createElement(kt,{span:8},d.createElement(Et.Item,{label:a("屏蔽结束时间："),name:"etime"},d.createElement(Ht,{showTime:!0,onChange:E})))),d.createElement(St,{gutter:[10,10],style:{marginBottom:"8px"}},d.createElement(kt,{span:5},a("屏蔽事件标签Key："),d.createElement(Ct,{title:a("这里的标签是指告警事件的标签，通过如下标签匹配规则过滤告警事件")},d.createElement(W,null))),d.createElement(kt,{span:3},a("运算符：")),d.createElement(kt,{span:16},a("标签Value："))),d.createElement(Et.List,{name:"tags",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map(((e,t)=>d.createElement(ene,{field:e,key:t,remove:n,form:u}))),d.createElement(Et.Item,null,d.createElement(V,{className:"control-icon-normal",onClick:()=>t()}))))),d.createElement(Et.Item,{label:a("屏蔽原因"),name:"cause",rules:[{required:!0,message:a("请填写屏蔽原因")}]},d.createElement(nne,{rows:3})),d.createElement(Et.Item,s({},{labelCol:{span:0},wrapperCol:{span:24}}),d.createElement(St,{gutter:[10,10]},d.createElement(kt,{span:1},d.createElement(yt,{type:"primary",htmlType:"submit"},a(2===t?"克隆":"创建"))),d.createElement(kt,{span:1,style:{marginLeft:40}},d.createElement(yt,{onClick:()=>window.history.back()},a("取消")))))));return d.createElement("div",{className:"operate-form-index"},b)},ine=()=>{const{t:e}=Fr(),t=v(),[n,r]=f.exports.useState(t.state);return d.createElement(Wi,{title:e("告警屏蔽"),showBack:!0,hideCluster:!0},d.createElement("div",{className:"shield-add"},d.createElement(rne,{tagsObj:n||void 0})))};const ane=()=>{const{t:e}=Fr(),t=w();ni((e=>e.common));const{curShieldData:n}=ni((e=>e.shield));n.id||t.push("/alert-mutes");const r=function(){const{search:e}=v();return d.useMemo((()=>new URLSearchParams(e)),[e])}().get("mode"),i=q();return f.exports.useMemo((()=>i.id),[i]),d.createElement(Wi,{title:e("告警屏蔽"),showBack:!0,hideCluster:!0},d.createElement("div",{className:"shield-add"},n.id&&d.createElement(rne,{detail:n,type:r?2:1})))},one=function(e,t){return ii(`/api/n9e/busi-group/${t}/alert-subscribes`,{method:Kr.Delete,data:e})};const{confirm:sne}=Ot,lne=()=>{const{t:e}=Fr(),t=w(),[n,r]=f.exports.useState(""),{curBusiItem:i}=ni((e=>e.common)),[a,o]=f.exports.useState(void 0),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState(!1),v=[{title:e("集群"),dataIndex:"cluster",render:e=>d.createElement("div",null,e)},{title:e("告警规则"),dataIndex:"rule_name",render:e=>d.createElement("div",null,e)},{title:e("订阅标签"),dataIndex:"tags",render:e=>d.createElement(d.Fragment,null,e?e.map(((e,t)=>e?d.createElement("div",{key:t},`${e.key} ${e.func} ${"in"===e.func?e.value.split(" ").join(", "):e.value}`):null)):"")},{title:e("告警接收组"),dataIndex:"user_groups",render:(e,t)=>{var n;return d.createElement(d.Fragment,null,null==(n=t.user_groups)?void 0:n.map((e=>d.createElement(La,{text:e.name,key:e.id}))))}},{title:e("编辑人"),ellipsis:!0,dataIndex:"update_by"},{title:e("操作"),width:"128px",dataIndex:"operation",render:(n,r)=>d.createElement(d.Fragment,null,d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{(null==i?void 0:i.id)&&t.push(`/alert-subscribes/edit/${r.id}`)}},e("编辑")),d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{(null==i?void 0:i.id)&&t.push(`/alert-subscribes/edit/${r.id}?mode=clone`)}},e("克隆")),d.createElement("div",{className:"table-operator-area-warning",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{sne({title:e("确定删除该订阅规则?"),icon:d.createElement(Ge,null),onOk:()=>{y(r.id)},onCancel(){}})}},e("删除"))))}];f.exports.useEffect((()=>{E()}),[i]),f.exports.useEffect((()=>{x()}),[n,s,c]);const y=t=>{one({ids:[t]},i.id).then((t=>{b(),t.err?gt.success(t.err):gt.success(e("删除成功"))}))},x=()=>{const e=JSON.parse(JSON.stringify(c)).filter((e=>{var t,r,i;const a=null==(t=null==e?void 0:e.tags)?void 0:t.find((e=>e.key.indexOf(n)>-1||e.value.indexOf(n)>-1||e.func.indexOf(n)>-1)),o=null==(r=null==e?void 0:e.user_groups)?void 0:r.find((e=>{var t;return(null==(t=null==e?void 0:e.name)?void 0:t.indexOf(n))>-1}));return((null==(i=null==e?void 0:e.rule_name)?void 0:i.indexOf(n))>-1||!!a||!!o)&&(s&&(null==s?void 0:s.indexOf(e.cluster))>-1||0===(null==s?void 0:s.length))}));p(e||[])},E=async()=>{if(i.id){g(!0);const{success:t,dat:n}=await(e={id:i.id},ii(`/api/n9e/busi-group/${e.id}/alert-subscribes`,{method:Kr.Get}));t&&(u(n||[]),g(!1))}var e},b=()=>{E()};return d.createElement(Wi,{title:e("订阅规则"),icon:d.createElement(H,null),hideCluster:!0},d.createElement("div",{className:"shield-content"},d.createElement(ya,{busiGroup:{onChange:e=>{o(e)}}}),(null==i?void 0:i.id)?d.createElement("div",{className:"shield-index"},d.createElement("div",{className:"header"},d.createElement("div",{className:"header-left"},d.createElement(Fa,{className:"strategy-table-search-left-refresh",onClick:()=>{b()}}),d.createElement(no,{onClusterChange:e=>l(e)}),d.createElement(bt,{onPressEnter:e=>{let t=e.target.value;r(t)},className:"searchInput",prefix:d.createElement(N,null),placeholder:e("搜索规则、标签、接收组")})),d.createElement("div",{className:"header-right"},d.createElement(yt,{type:"primary",className:"add",ghost:!0,onClick:()=>{t.push("/alert-subscribes/add")}},e("新增订阅规则")))),d.createElement(Nt,{rowKey:"id",pagination:{total:h.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:Ma,defaultPageSize:30},loading:m,dataSource:h,columns:v})):d.createElement(xa,{text:"订阅规则"})))},{Option:cne}=It,une=({visible:e,ruleModalClose:t,subscribe:n})=>{const{t:r}=Fr(),{curBusiItem:i}=ni((e=>e.common)),[a,o]=f.exports.useState([]),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState(i.id),[m,g]=f.exports.useState("");f.exports.useEffect((()=>{p(i.id)}),[i]),f.exports.useEffect((()=>{x()}),[h]),f.exports.useEffect((()=>{v("")}),[]),f.exports.useEffect((()=>{E()}),[m,s]);const v=e=>{console.log(111),Ga({all:1,query:e,limit:200}).then((e=>{o(e.dat||[])}))},y=f.exports.useCallback(Y.exports.debounce(v,400),[]),x=async()=>{const{success:e,dat:t}=await Li({id:h});e&&l(t||[])},E=()=>{const e=JSON.parse(JSON.stringify(s)).filter((e=>e.name.indexOf(m)>-1||e.append_tags.join(" ").indexOf(m)>-1));u(e||[])},b=[{title:r("集群"),dataIndex:"cluster",render:e=>d.createElement("div",null,e)},{title:r("级别"),dataIndex:"severity",render:e=>d.createElement(At,{color:Ii[e-1]},"S",e)},{title:r("名称"),dataIndex:"name",render:(e,t)=>d.createElement("div",{className:"table-active-text",onClick:()=>{}},e)},{title:r("告警接收者"),dataIndex:"notify_groups_obj",render:(e,t)=>e.length&&e.map(((e,t)=>d.createElement(La,{text:e.nickname||e.username||e.name,key:t})))||d.createElement("div",null)},{title:r("附加标签"),dataIndex:"append_tags",render:e=>{const t=e||[];return t.length&&t.map(((e,t)=>d.createElement(La,{text:e,key:t})))||d.createElement("div",null)}},{title:r("更新时间"),dataIndex:"update_at",render:e=>X(1e3*Number(e)).format("YYYY-MM-DD HH:mm:ss")},{title:r("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Ft,{checked:e===Ta.Enable,disabled:!0,size:"small",onChange:()=>{}})},{title:r("操作"),dataIndex:"operator",fixed:"right",width:100,render:(e,t)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{C(t)}},r("订阅")))}],C=e=>{n(e)};return d.createElement(d.Fragment,null,d.createElement(Ot,{title:r("订阅告警规则"),footer:"",forceRender:!0,visible:e,onCancel:()=>{t()},width:"80%"},d.createElement("div",null,d.createElement(It,{style:{width:"280px"},value:h,onChange:e=>{p(e)},showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>y(e),onBlur:()=>v("")},a.map((e=>d.createElement(cne,{value:e.id,key:e.id},e.name)))),d.createElement(bt,{style:{marginLeft:10,width:"280px"},onPressEnter:e=>{let t=e.target.value;g(t)},prefix:d.createElement(N,null),placeholder:r("规则名称、附加标签")})),d.createElement("div",{className:"rule_modal_table"},d.createElement(Nt,{rowKey:"id",pagination:{total:c.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:Ma,defaultPageSize:30},dataSource:c,columns:b}))))},{Option:hne}=It,pne=({field:e,remove:t,form:n})=>{const{t:r}=Fr(),[i,a]=f.exports.useState(""),[o,s]=f.exports.useState("==");f.exports.useEffect((()=>{const t=n.getFieldValue("tags");l(t[e.name].func)}),[]);const l=e=>{let t="";"in"===e?t="可以输入多个值，用回车分割":"=~"===e&&(t="请输入正则表达式匹配标签value"),s(e),a(t)};return d.createElement(d.Fragment,null,d.createElement(St,{gutter:[10,10],style:{marginBottom:"10px"}},d.createElement(kt,{span:5},d.createElement(Et.Item,{style:{marginBottom:0},name:[e.name,"key"],fieldKey:[e.name,"key"],rules:[{required:!0,message:r("key不能为空")}]},d.createElement(bt,{placeholder:r("请输入订阅事件标签key")}))),d.createElement(kt,{span:3},d.createElement(Et.Item,{style:{marginBottom:0},name:[e.name,"func"],fieldKey:[e.name,"func"],initialValue:"=="},d.createElement(It,{suffixIcon:d.createElement(j,null),onChange:l},d.createElement(hne,{value:"=="},"=="),d.createElement(hne,{value:"=~"},"=~"),d.createElement(hne,{value:"in"},"in")))),d.createElement(kt,{span:15},d.createElement(Et.Item,{style:{marginBottom:0},name:[e.name,"value"],fieldKey:[e.name,"value"],rules:[{required:!0,message:r("value不能为空")}]},"in"==o?d.createElement(It,{mode:"tags",open:!1,style:{width:"100%"},placeholder:r(i),tokenSeparators:[" "]}):d.createElement(bt,{className:"ant-input",placeholder:r(i)}))),d.createElement(kt,null,d.createElement(U,{style:{marginTop:"8px"},onClick:()=>t(e.name)}))))},{Option:dne}=It,fne=({detail:e={},type:t})=>{var n,r;const{t:i,i18n:a}=Fr(),{clusters:o}=ni((e=>e.common)),[c]=Et.useForm(null),u=w(),{curBusiItem:h}=ni((e=>e.common)),[p,m]=f.exports.useState(!1),[g,v]=f.exports.useState(!1),[y,x]=f.exports.useState(),[E,b]=f.exports.useState([]),[C,T]=f.exports.useState(!0),[k,_]=f.exports.useState([]);f.exports.useEffect((()=>{O(),I("")}),[]),f.exports.useEffect((()=>{x({id:e.rule_id||0,name:e.rule_name})}),[e.rule_id]);const A=(e.user_groups?e.user_groups.filter((e=>!k.find((t=>e.id===t.id)))):[]).concat(k).map((e=>d.createElement(dne,{value:String(e.id),key:e.id},e.name))),O=async()=>{const e=await Ua();b(e||[])},I=async e=>{const t=await ja({query:e}),n=t.dat||t;_(n||[])},M=f.exports.useCallback(S.debounce(I,800),[]),N=e=>{v(!1),x(e),c.setFieldsValue({rile_id:e.id||0})};return d.createElement(d.Fragment,null,d.createElement("div",{className:"operate-form-index",id:C?"littleAffect":""},d.createElement(Et,l(s({form:c},{labelCol:{span:24},wrapperCol:{span:24}}),{layout:"vertical",className:"operate-form",onFinish:n=>{var r;m(!0);const a=null==(r=null==n?void 0:n.tags)?void 0:r.map((e=>l(s({},e),{value:Array.isArray(e.value)?e.value.join(" "):e.value}))),o=l(s({},n),{tags:a,redefine_severity:n.redefine_severity?1:0,redefine_channels:n.redefine_channels?1:0,rule_id:y.id,user_group_ids:n.user_group_ids?n.user_group_ids.join(" "):"",new_channels:n.new_channels?n.new_channels.join(" "):""});var c,p;1===t?(c=[l(s({},o),{id:e.id})],p=h.id,ii(`/api/n9e/busi-group/${p}/alert-subscribes`,{method:Kr.Put,data:c})).then((e=>{gt.success(i("编辑订阅规则成功")),u.push("/alert-subscribes")})).finally((()=>{m(!1)})):function(e,t){return ii(`/api/n9e/busi-group/${t}/alert-subscribes`,{method:Kr.Post,data:e})}(o,h.id).then((e=>{gt.success(i("新建订阅规则成功")),u.push("/alert-subscribes")})).finally((()=>{m(!1)}))},onFinishFailed:()=>{m(!1)},initialValues:l(s({},e),{cluster:o[0]||"Default",redefine_severity:!!(null==e?void 0:e.redefine_severity),redefine_channels:!!(null==e?void 0:e.redefine_channels),user_group_ids:(null==e?void 0:e.user_group_ids)?null==(n=null==e?void 0:e.user_group_ids)?void 0:n.split(" "):[],new_channels:null==(r=null==e?void 0:e.new_channels)?void 0:r.split(" ")})}),d.createElement(Ut,null,d.createElement(Et.Item,{label:i("生效集群："),name:"cluster",rules:[{required:!0,message:i("生效集群不能为空")}]},d.createElement(It,{suffixIcon:d.createElement(j,null)},null==o?void 0:o.map(((e,t)=>d.createElement(dne,{value:e,key:t},e))))),d.createElement(Et.Item,{label:i("订阅告警规则：")},!!(null==y?void 0:y.id)&&d.createElement(yt,{type:"primary",ghost:!0,style:{marginRight:"8px"},onClick:()=>{(null==y?void 0:y.id)&&u.push(`/alert-rules/edit/${null==y?void 0:y.id}`)}},null==y?void 0:y.name),d.createElement(Te,{style:{cursor:"pointer",fontSize:"18px"},onClick:()=>{v(!0)}}),!!(null==y?void 0:y.id)&&d.createElement(be,{style:{cursor:"pointer",fontSize:"18px",marginLeft:5},onClick:()=>N({})})),d.createElement(St,{gutter:[10,10],style:{marginBottom:"8px"}},d.createElement(kt,{span:5},i("订阅事件标签Key："),d.createElement(Ct,{title:i("这里的标签是指告警事件的标签，通过如下标签匹配规则过滤告警事件")},d.createElement(W,null))),d.createElement(kt,{span:3},i("运算符：")),d.createElement(kt,{span:16},i("标签Value："))),d.createElement(Et.List,{name:"tags",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map(((r,i)=>d.createElement(pne,{field:r,fields:e,key:i,remove:n,add:t,form:c}))),d.createElement(Et.Item,null,d.createElement(V,{className:"control-icon-normal",onClick:()=>t()}))))),d.createElement(Et.Item,{label:i("告警级别："),name:"redefine_severity",valuePropName:"checked"},d.createElement(wt,{value:1,style:{lineHeight:"32px"},onChange:e=>{c.setFieldsValue({redefine_severity:e.target.checked?1:0}),T(!C)}},i("重新定义"))),d.createElement(Et.Item,{label:i("新的告警级别："),name:"new_severity",initialValue:2,style:{display:c.getFieldValue("redefine_severity")?"block":"none"}},d.createElement(Dt.Group,null,d.createElement(Dt,{key:1,value:1},i("一级报警")),d.createElement(Dt,{key:2,value:2},i("二级报警")),d.createElement(Dt,{key:3,value:3},i("三级报警")))),d.createElement(Et.Item,{label:i("通知媒介："),name:"redefine_channels",valuePropName:"checked"},d.createElement(wt,{value:1,style:{lineHeight:"32px"},onChange:e=>{c.setFieldsValue({redefine_channels:e.target.checked?1:0}),T(!C)}},i("重新定义"))),d.createElement(Et.Item,{label:i("新的通知媒介："),name:"new_channels",style:{display:c.getFieldValue("redefine_channels")?"block":"none"}},d.createElement(wt.Group,null,E.map((e=>d.createElement(wt,{value:e.key,key:e.label},e.label))))),d.createElement(Et.Item,{label:i("订阅告警接收组："),name:"user_group_ids",rules:[{required:!0,message:i("告警接收组不能为空")}]},d.createElement(It,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>M(e),onBlur:()=>I("")},A)),d.createElement(Et.Item,s({},{labelCol:{span:24},wrapperCol:{span:24}}),d.createElement(yt,{type:"primary",htmlType:"submit",style:{marginRight:"8px"}},i(1===t?"编辑":2===t?"克隆":"创建")),1===t&&d.createElement(yt,{danger:!0,style:{marginRight:"8px"},onClick:()=>{Ot.confirm({title:i("是否删除该告警规则?"),onOk:()=>{(null==e?void 0:e.id)&&one({ids:[e.id]},h.id).then((()=>{gt.success(i("删除成功")),u.push("/alert-subscribes")}))},onCancel(){}})}},i("删除")),d.createElement(yt,{onClick:()=>window.history.back()},i("取消"))))),d.createElement(une,{visible:g,ruleModalClose:()=>{v(!1)},subscribe:N})))},mne=()=>{const{t:e}=Fr();return d.createElement(Wi,{title:e("订阅规则"),showBack:!0},d.createElement("div",{className:"shield-add"},d.createElement(fne,null)))};const gne=()=>{const{t:e}=Fr();w(),ni((e=>e.common));const[t,n]=f.exports.useState(),r=function(){const{search:e}=v();return d.useMemo((()=>new URLSearchParams(e)),[e])}().get("mode"),i=q(),a=f.exports.useMemo((()=>i.id),[i]);f.exports.useEffect((()=>{o()}),[a]);const o=async()=>{const{dat:e}=await(t=a,ii(`/api/n9e/alert-subscribe/${t}`,{method:Kr.Get}));var t;const r=e.tags.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));n(l(s({},e),{tags:r}))};return d.createElement(Wi,{title:e("订阅规则"),showBack:!0},d.createElement("div",{className:"shield-add"},(null==t?void 0:t.id)&&d.createElement(fne,{detail:t,type:r?2:1})))};var vne={exports:{}},yne=pe(vne.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));t.default=r.default,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){return e&&e.__esModule?e:{default:e}}t.default=c;var a=n(3),o=i(n(4)),s=n(14),l=i(n(15));function c(e){var t=e.activeClassName,n=void 0===t?"":t,i=e.activeIndex,o=void 0===i?-1:i,c=e.activeStyle,u=e.autoEscape,h=e.caseSensitive,p=void 0!==h&&h,d=e.className,f=e.findChunks,m=e.highlightClassName,g=void 0===m?"":m,v=e.highlightStyle,y=void 0===v?{}:v,x=e.highlightTag,E=void 0===x?"mark":x,b=e.sanitize,C=e.searchWords,T=e.textToHighlight,w=e.unhighlightClassName,S=void 0===w?"":w,k=e.unhighlightStyle,_=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightClassName","unhighlightStyle"]),A=(0,a.findAll)({autoEscape:u,caseSensitive:p,findChunks:f,sanitize:b,searchWords:C,textToHighlight:T}),O=E,I=-1,M="",N=void 0,F=(0,l.default)((function(e){var t={};for(var n in e)t[n.toLowerCase()]=e[n];return t}));return(0,s.createElement)("span",r({className:d},_,{children:A.map((function(e,t){var r=T.substr(e.start,e.end-e.start);if(e.highlight){I++;var i=void 0;i="object"==typeof g?p?g[r]:(g=F(g))[r.toLowerCase()]:g;var a=I===+o;M=i+" "+(a?n:""),N=!0===a&&null!=c?Object.assign({},y,c):y;var l={children:r,className:M,key:t,style:N};return"string"!=typeof O&&(l.highlightIndex=I),(0,s.createElement)(O,l)}return(0,s.createElement)("span",{children:r,className:S,key:t,style:k})}))}))}c.propTypes={activeClassName:o.default.string,activeIndex:o.default.number,activeStyle:o.default.object,autoEscape:o.default.bool,className:o.default.string,findChunks:o.default.func,highlightClassName:o.default.oneOfType([o.default.object,o.default.string]),highlightStyle:o.default.object,highlightTag:o.default.oneOfType([o.default.node,o.default.func,o.default.string]),sanitize:o.default.func,searchWords:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.instanceOf(RegExp)])).isRequired,textToHighlight:o.default.string.isRequired,unhighlightClassName:o.default.string,unhighlightStyle:o.default.object},e.exports=t.default},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return r.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return r.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return r.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return r.findChunks}})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=function(e){var t=e.autoEscape,a=e.caseSensitive,o=void 0!==a&&a,s=e.findChunks,l=void 0===s?r:s,c=e.sanitize,u=e.searchWords,h=e.textToHighlight;return i({chunksToHighlight:n({chunks:l({autoEscape:t,caseSensitive:o,sanitize:c,searchWords:u,textToHighlight:h})}),totalLength:h?h.length:0})};var n=t.combineChunks=function(e){var t=e.chunks;return t=t.sort((function(e,t){return e.start-t.start})).reduce((function(e,t){if(0===e.length)return[t];var n=e.pop();if(t.start<=n.end){var r=Math.max(n.end,t.end);e.push({start:n.start,end:r})}else e.push(n,t);return e}),[])},r=function(e){var t=e.autoEscape,n=e.caseSensitive,r=e.sanitize,i=void 0===r?a:r,o=e.searchWords,s=e.textToHighlight;return s=i(s),o.filter((function(e){return e})).reduce((function(e,r){r=i(r),t&&(r=r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));for(var a=new RegExp(r,n?"g":"gi"),o=void 0;o=a.exec(s);){var l=o.index,c=a.lastIndex;c>l&&e.push({start:l,end:c}),o.index==a.lastIndex&&a.lastIndex++}return e}),[])};t.findChunks=r;var i=t.fillInChunks=function(e){var t=e.chunksToHighlight,n=e.totalLength,r=[],i=function(e,t,n){t-e>0&&r.push({start:e,end:t,highlight:n})};if(0===t.length)i(0,n,!1);else{var a=0;t.forEach((function(e){i(a,e.start,!1),i(e.start,e.end,!0),a=e.end})),i(a,n,!1)}return r};function a(e){return e}}])},function(e,t,n){(function(t){e.exports=n(13)()}).call(t,n(5))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(eh){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(eh){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(eh){r=o}}();var l,c=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(eh){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(t){var r=n(7),i=n(8),a=n(9),o=n(10),s=n(11),l=n(12);e.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,c="<<anonymous>>",u={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:d(r.thatReturnsNull),arrayOf:function(e){return d((function(t,n,r,i,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var o=t[n];if(!Array.isArray(o))return new p("Invalid "+i+" `"+a+"` of type `"+g(o)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<o.length;l++){var c=e(o,l,r,i,a+"["+l+"]",s);if(c instanceof Error)return c}return null}))},element:d((function(t,n,r,i,a){var o=t[n];return e(o)?null:new p("Invalid "+i+" `"+a+"` of type `"+g(o)+"` supplied to `"+r+"`, expected a single ReactElement.")})),instanceOf:function(e){return d((function(t,n,r,i,a){if(!(t[n]instanceof e)){var o=e.name||c;return new p("Invalid "+i+" `"+a+"` of type `"+((s=t[n]).constructor&&s.constructor.name?s.constructor.name:c)+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}var s;return null}))},node:d((function(e,t,n,r,i){return m(e[t])?null:new p("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return d((function(t,n,r,i,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var o=t[n],l=g(o);if("object"!==l)return new p("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in o)if(o.hasOwnProperty(c)){var u=e(o,c,r,i,a+"."+c,s);if(u instanceof Error)return u}return null}))},oneOf:function(e){return Array.isArray(e)?d((function(t,n,r,i,a){for(var o=t[n],s=0;s<e.length;s++)if(h(o,e[s]))return null;return new p("Invalid "+i+" `"+a+"` of value `"+o+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")})):r.thatReturnsNull},oneOfType:function(e){if(!Array.isArray(e))return r.thatReturnsNull;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return a(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",y(n),t),r.thatReturnsNull}return d((function(t,n,r,i,a){for(var o=0;o<e.length;o++)if(null==(0,e[o])(t,n,r,i,a,s))return null;return new p("Invalid "+i+" `"+a+"` supplied to `"+r+"`.")}))},shape:function(e){return d((function(t,n,r,i,a){var o=t[n],l=g(o);if("object"!==l)return new p("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var h=u(o,c,r,i,a+"."+c,s);if(h)return h}}return null}))},exact:function(e){return d((function(t,n,r,i,a){var l=t[n],c=g(l);if("object"!==c)return new p("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var u=o({},t[n],e);for(var h in u){var d=e[h];if(!d)return new p("Invalid "+i+" `"+a+"` key `"+h+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=d(l,h,r,i,a+"."+h,s);if(f)return f}return null}))}};function h(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e){this.message=e,this.stack=""}function d(e){function n(n,r,a,o,l,u,h){return o=o||c,u=u||a,h!==s&&t&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),null==r[a]?n?null===r[a]?new p("The "+l+" `"+u+"` is marked as required in `"+o+"`, but its value is `null`."):new p("The "+l+" `"+u+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(r,a,o,l,u)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function f(e){return d((function(t,n,r,i,a,o){var s=t[n];return g(s)!==e?new p("Invalid "+i+" `"+a+"` of type `"+v(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,a=r.call(t);if(r!==t.entries){for(;!(i=a.next()).done;)if(!m(i.value))return!1}else for(;!(i=a.next()).done;){var o=i.value;if(o&&!m(o[1]))return!1}return!0;default:return!1}}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function v(e){if(null==e)return""+e;var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function y(e){var t=v(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return p.prototype=Error.prototype,u.checkPropTypes=l,u.PropTypes=u,u}}).call(t,n(5))},function(e,t){function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){(function(t){e.exports=function(e,t,n,r,i,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}}).call(t,n(5))},function(e,t,n){(function(t){var r=n(7);e.exports=r}).call(t,n(5))},function(e,t){var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var o,s,l=a(e),c=1;c<arguments.length;c++){for(var u in o=Object(arguments[c]))r.call(o,u)&&(l[u]=o[u]);if(n){s=n(o);for(var h=0;h<s.length;h++)i.call(o,s[h])&&(l[s[h]]=o[s[h]])}}return l}},function(e,t){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){(function(t){e.exports=function(e,t,n,r,i){}}).call(t,n(5))},function(e,t,n){var r=n(7),i=n(8),a=n(11);e.exports=function(){function e(e,t,n,r,o,s){s!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t){e.exports=f.exports},function(e,t){var n=function(e,t){return e===t};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=void 0,i=[],a=void 0,o=!1,s=function(e,n){return t(e,i[n])},l=function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];return o&&r===this&&n.length===i.length&&n.every(s)?a:(o=!0,r=this,i=n,a=e.apply(this,n))};return l}}]));function xne(e,t){const[n,r]=f.exports.useState(e);return f.exports.useEffect((()=>{const n=setTimeout((()=>{r(e)}),t);return()=>{clearTimeout(n)}}),[e,t]),n}var Ene={"zh-CN":{back:"返回","table.search.placeholder":"模糊搜索表格内容(多个关键词请用空格分隔。如：key1 key2)","table.sort.ascend":"升序","table.sort.descend":"降序","table.total.prefix":"共","table.total.suffix":"条","table.select.num":"已选择: ","table.filter.search.placeholder":"请输入要搜索的内容","table.filter.search.btn.ok":"搜索","table.filter.search.btn.cancel":"清空","table.filter.header.title":"过滤条件:","table.filter.header.search":":搜索","table.filter.header.filter":":过滤","table.filter.header.btn.clear":"清空","form.item.key.title":"自定义Key","form.item.value.title":"自定义Value","form.detail.nodata":"暂无数据","form.item.key.placeholder":"请输入Key","form.item.value.placeholder":"请输入Value","form.item.add":"增加自定义参数","form.placeholder.prefix":"请输入","form.selectplaceholder.prefix":"请选择","queryform.reset":"重置","queryform.search":"查询","queryform.collapsed":"收起","queryform.expand":"展开","color.placeholder":"请选择颜色"},"en-US":{back:"Back","table.search.placeholder":"Fuzzy search table content (multiple keywords separated by Spaces. Such as: key1 key2)","table.sort.ascend":"Ascend","table.sort.descend":"Descend","table.total.prefix":"Total","table.total.suffix":"Items","table.select.num":"Selected: ","table.filter.search.placeholder":"Please enter keywords","table.filter.search.btn.ok":"Search","table.filter.search.btn.cancel":"Clear","table.filter.header.title":"Filtration Conditions:","table.filter.header.search":": Search","table.filter.header.filter":": Filter","table.filter.header.btn.clear":"Clear","form.item.key.title":"Custom Key","form.item.value.title":"Custom Value","form.detail.nodata":"No Data","form.item.key.placeholder":"Please enter key","form.item.value.placeholder":"Please enter value","form.item.add":"Add Custom Parameters","form.placeholder.prefix":"Please enter","form.selectplaceholder.prefix":"Please select","queryform.reset":"Clear","queryform.search":"Search","queryform.collapsed":"Collapsed","queryform.expand":"Expand","color.placeholder":"Please select color"}};const bne=e=>Ene["zh-CN"][e],Cne="object"==typeof window,Tne=(e,t=!1)=>{const[n,r]=f.exports.useState(Cne?()=>window.matchMedia(e).matches:t);return f.exports.useEffect((()=>{let t=!0;const n=window.matchMedia(e),i=()=>{t&&r(!!n.matches)};return n.addListener(i),r(n.matches),()=>{t=!1,n.removeListener(i)}}),[e]),n},wne={xs:"(max-width: 575px)",sm:"(min-width: 576px) and (max-width: 767px)",md:"(min-width: 768px) and (max-width: 991px)",lg:"(min-width: 992px) and (max-width: 1199px)",xl:"(min-width: 1200px) and (max-width: 1599px)",xxl:"(min-width: 1600px)"},Sne=()=>{const e=Tne(wne.md),t=Tne(wne.lg),n=Tne(wne.xxl),r=Tne(wne.xl),i=Tne(wne.sm),a=Tne(wne.xs),[o,s]=f.exports.useState((()=>{let e="md";return"undefined"==typeof window||(e=Object.keys(wne).find((e=>{const t=wne[e];return!!window.matchMedia(t).matches}))),e})());return f.exports.useEffect((()=>{s(n?"xxl":r?"xl":t?"lg":e?"md":i?"sm":a?"xs":"md")}),[e,t,n,r,i,a]),o};var kne="undefined"!=typeof Element,_ne="function"==typeof Map,Ane="function"==typeof Set,One="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function Ine(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,r,i,a;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!Ine(e[r],t[r]))return!1;return!0}if(_ne&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;for(a=e.entries();!(r=a.next()).done;)if(!Ine(r.value[1],t.get(r.value[0])))return!1;return!0}if(Ane&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(One&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(kne&&e instanceof Element)return!1;for(r=n;0!=r--;)if(("_owner"!==i[r]&&"__v"!==i[r]&&"__o"!==i[r]||!e.$$typeof)&&!Ine(e[i[r]],t[i[r]]))return!1;return!0}return e!=e&&t!=t}const Mne=function(e,t){try{return Ine(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}},Nne=(e,t)=>{((e,t,n)=>{const r=f.exports.useRef(void 0);r.current&&n(t,r.current)||(r.current=t),f.exports.useEffect(e,r.current)})(e,t,Mne)},Fne=Et.Item,{Option:Lne}=It,Pne={xs:24,sm:24,md:12,lg:12,xl:8,xxl:6},Rne={labelCol:{xs:{span:5},sm:{span:5},md:{span:7},lg:{span:7},xl:{span:8},xxl:{span:8}},wrapperCol:{xs:{span:19},sm:{span:19},md:{span:17},lg:{span:17},xl:{span:16},xxl:{span:16}}},Dne=(e,t)=>{if("number"==typeof e)return e;return s(s({},Pne),e)[t]},Bne=(e,t=8)=>{const n=24/t;return(n-1-e%n)*t},zne=e=>{const t=`${e.prefixCls||"dantd"}-query-form`,n=bne,{className:r,style:i,colConfig:a,searchText:o,resetText:c,showOptionBtns:u=!0,showCollapseButton:h=!0,defaultCollapse:p=!1,isResetClearAll:m=!1,onChange:g,onSearch:v,onReset:y,getFormInstance:x,columns:E=[],mode:b="full",colMode:C="grid",columnStyleHideNumber:T=1,defaultColStyle:w={width:"300px"}}=e,S=R(t,r),k=R({[`${t}-formitem`]:!0,[`${t}-formitem-full`]:"full"===b}),_=Sne(),A=a||Pne,[O,I]=f.exports.useState(Dne(A||8,_)),[N]=Et.useForm(),{validateFields:F,getFieldsValue:L,resetFields:P,setFieldsValue:D}=N,[B,z]=f.exports.useState(p),H=L();f.exports.useEffect((()=>{I(Dne(A||8,_))}),[_]),f.exports.useEffect((()=>{x&&x(N)}),[]),Nne((()=>{g&&Object.keys(H).length>0&&g(H,N)}),[H]);const j={6:3,8:2,12:1,24:1}[Dne(A||8,_)]||1;const G=()=>{F().then((e=>{v&&v(e,N)}))},$=()=>{if(m){const e=E.reduce(((e,t)=>t.dataIndex?l(s({},e),{[Array.isArray(t.dataIndex)?t.dataIndex.join("."):t.dataIndex]:void 0}):s({},e)),{});D(e)}else P();setTimeout((()=>{y&&y(L(),N)}))},Y=()=>{G()};return d.createElement(Xt,s({},e.antConfig),d.createElement("div",{className:S,style:i},d.createElement(Et,{form:N,layout:"inline"},d.createElement(St,{gutter:[12,12]},E.map(((e,t)=>{let r=B&&j<=t,i={};return"style"===C&&(i=e.colStyle||w,B&&t>=T&&(r=!0)),i=l(s({},i),{display:r?"none":"block"}),d.createElement(kt,s({style:i,key:`query-form-col-${e.dataIndex}-${t}`},A),"input"===e.type&&(e=>{const{initialValue:t,dataIndex:r,title:i,required:a,componentProps:o={},placeholder:c,isInputPressEnterCallSearch:u,formItemLayout:h,rules:p,size:f="default"}=e,m=c||n("form.placeholder.prefix");let g=[];a&&(g=[{required:!0,message:m}]);const v=h||"align"===b?Rne:{};return d.createElement(Fne,l(s({name:r,label:i,className:k},v),{initialValue:t,rules:p||g}),d.createElement(bt,s({"data-testid":"field-input",size:f,maxLength:255,placeholder:m,onPressEnter:u?Y:()=>{}},o)))})(e),"select"===e.type&&(e=>{const{initialValue:t,dataIndex:r,title:i,required:a,placeholder:o,selectMode:c="single",rules:u,formItemLayout:h,options:p=[],componentProps:f={},size:m="default"}=e,g=o||d.createElement(d.Fragment,null,n("form.selectplaceholder.prefix")," ",i);let v=[];a&&(v=[{required:!0,message:g}]);const y=h||"align"===b?Rne:{};return d.createElement(Fne,l(s({name:r,label:i,className:k},y),{initialValue:t,rules:u||v}),d.createElement(It,s({"data-testid":"select",mode:c,size:m,allowClear:!0,placeholder:g,showSearch:!0,optionFilterProp:"children",style:{width:"100%"}},f),p.map((e=>d.createElement(Lne,{key:`query-form-select-option-${e.value}`,"data-testid":"select-option",value:e.value},e.title)))))})(e),"custom"===e.type&&(e=>{const{initialValue:t,formItemLayout:r,dataIndex:i,title:a,required:o,placeholder:c,rules:u,valuePropName:h="value",component:p}=e,f=c||d.createElement(d.Fragment,null,n("form.placeholder.prefix")," ",a);let m=[];o&&(m=[{required:!0,message:f}]);const g=r||"align"===b?Rne:{};return d.createElement(Fne,l(s({name:i,label:a,className:k},g),{initialValue:t,rules:u||m,valuePropName:h}),p)})(e))})),u&&(()=>{const e=B?E.length<=j?Bne(E.length,O):Bne(j,O):Bne(E.length,O);let r={};return"style"===C&&(r={position:"absolute",width:280,bottom:0,right:0,marginLeft:0}),d.createElement(kt,l(s({},A),{offset:e,key:"option",className:`${t}-option`,style:s({},r)}),d.createElement(Et.Item,null,d.createElement("span",null,d.createElement(yt,{onClick:$},c||n("queryform.reset")),d.createElement(yt,{onClick:G,style:{marginLeft:10},type:"primary",htmlType:"submit"},o||n("queryform.search")),h&&d.createElement("a",{style:{marginLeft:10,display:"inline-block"},onClick:()=>{z(!B)}},n(B?"queryform.expand":"queryform.collapsed"),d.createElement(M,null)))))})()))))},Hne=["10","20","50","100"];function jne(e,t){switch(t.type){case"update":return l(s({},e),{[t.dataIndex]:l(s({},e[t.dataIndex]),{dataIndex:t.dataIndex,type:t.updateType,value:t.value})});case"clear":return s({},t.initialState);default:return e}}function Gne(e,t){switch(t.type){case"update":return s({},t.value);case"clear":return{};default:return e}}var $ne=d.forwardRef((function(e,t){const n=`${e.prefixCls||"dantd"}-data-table`,r=e.filterType||"half",i=f.exports.useRef(),a=bne,{fetchOptions:o={},searchParams:c,showFilter:u=!0,showReloadBtn:h=!0,showQueryOptionBtns:p=!0,showQueryCollapseButton:m=!0,isQuerySearchOnChange:g=!0,showBodyBg:v=!1,queryFormProps:y={},url:x,queryMode:E="default",reloadBtnPos:b="right",searchPos:C="full",reloadBtnType:T="icon",queryFormColumns:w,pageParams:k,antProps:_={rowKey:"id"}}=e,A=R(n,e.className),O=R({[`${n}-table-content`]:!0,[`${n}-table-content-noborder`]:e.hideContentBorder}),I=R({[`${n}-body`]:!!w||v,[`${n}-body-compact`]:"compact"===E}),M=R({[`${n}-query`]:!!w,[`${n}-query-compact`]:"compact"===E}),F=f.exports.useMemo((()=>{const t={};return e.columns&&e.columns.length>0&&e.columns.forEach((e=>{e.dataIndex&&(t[e.dataIndex]=l(s({},e),{value:null}))})),t}),[e.columns]),[L,P]=f.exports.useState({}),[D,B]=f.exports.useState(!1),H=f.exports.useRef(!1),j=f.exports.useRef({}),G=f.exports.useRef({}),[$,Y]=f.exports.useState([]),[U,V]=f.exports.useState(!1),[W,X]=f.exports.useReducer(Gne,{}),[q,K]=f.exports.useState(!1),[Q,Z]=f.exports.useState(),J=e.rowSelection,ee=J?J.selectedRowKeys&&J.selectedRowKeys.length:-1,te={ascend:a("table.sort.ascend"),descend:a("table.sort.descend")},ne=!!c,re=ne&&"full"===C,ie="full"===C&&h&&"right"===b,ae=(!ne||"full"!==C)&&h&&"right"===b,oe=h&&"left"===b,se=c?c.placeholder:a("table.search.placeholder"),[le,ce]=f.exports.useState(s({current:1,pageSize:10,total:0},k)),[ue,he]=f.exports.useReducer(jne,F),pe=xne(Q,300),de=xne(JSON.stringify(L),300),fe=JSON.stringify({pageSize:le.pageSize,current:le.current}),me=JSON.stringify(s(s({},ue),W));async function ge(t){let n=x,r=null;if(-1!==n.indexOf("?")){const e=n.split("?");n=e[0],r=xi.parse(e[1],{arrayFormat:"comma"})}let i={[k.curPageName]:t.current,[k.pageSizeName]:t.pageSize};r&&(i=s(s({},r),i)),0===k.startPage&&(i[k.curPageName]-=1),e.columns.forEach((e=>{e.dataIndex&&t[e.dataIndex]&&(i[e.dataIndex]=t[e.dataIndex]),e.apiSearch&&t[e.apiSearch.name]&&(i[e.apiSearch.name]=t[e.apiSearch.name]),e.apiFilter&&t[e.apiFilter.name]&&(i[e.apiFilter.name]=t[e.apiFilter.name]),e.apiSorter&&t[e.apiSorter.name]&&(i[e.apiSorter.name]=t[e.apiSorter.name])})),c&&t[c.apiName]&&(i[c.apiName]=t[c.apiName]),w&&L&&Object.keys(L).length>0&&(i=s(s({},L),i)),e.customQueryCallback&&(i=e.customQueryCallback(s({},i))),n=`${n}?${xi.stringify(i,{arrayFormat:"comma"})}`,e.customFetchUrlCallback&&(n=e.customFetchUrlCallback(n)),V(!0);let a=s({},o);o.method&&"post"===o.method.toLowerCase()&&(a.data=i);const u=ii(n,a);e.rowSelection&&e.rowSelection.onChange&&e.rowSelection.onChange([]),(u.status<200||u.status>=300)&&e.apiErrorCallback?(e.apiErrorCallback(u),V(!1)):u.then((async t=>{let n=t;e.apiCallback&&(n=e.apiCallback(t)),e.apiAsyncCallback&&(n=await e.apiAsyncCallback(t)),Y(n.data);const r=l(s({},le),{total:n.total});ce(r),V(!1)})).catch((()=>{e.apiErrorCallback&&e.apiErrorCallback(u),V(!1)}))}f.exports.useEffect((()=>{if(x&&i.current!==x){ge(be()),setTimeout((()=>{i.current=x}))}}),[x]),f.exports.useEffect((()=>{if(!i.current)return;let t=be();t[le.curPageName]=1,c&&pe&&pe.trim()&&(t[c.apiName]=pe.trim()),e.onSearch&&e.onSearch(pe?pe.trim():pe),ge(t)}),[pe]),f.exports.useEffect((()=>{if(!i.current)return;if(!w||L&&0===Object.keys(L).length)return;let e=be();e[le.curPageName]=1,ge(e)}),[de]),f.exports.useEffect((()=>{if(!i.current)return;ge(be())}),[me]),f.exports.useEffect((()=>{if(!i.current||!le.pageSize)return;if(H.current)return void(H.current=!1);ge(be())}),[fe]);const ve=f.exports.useCallback(((e,t,n)=>{t&&t(),e&&n&&he({type:"update",dataIndex:n,updateType:"search",value:e[0]})}),[]),ye=f.exports.useCallback(((e,t)=>{e&&e([]),t&&he({type:"update",dataIndex:t})}),[]),xe=()=>{X({type:"clear"}),he({type:"clear",initialState:F}),K(!1),setTimeout((()=>{Object.values(G.current).forEach((e=>{e&&e.clearFilters&&e.clearFilters([])}))}))},Ee=()=>{X({type:"clear"}),we(null,{})},be=()=>{let e=s({},le);return W&&W.order&&(e[W.column.apiSorter.name]=W.column.apiSorter[W.order]),Object.values(ue).forEach((t=>{const n=t.dataIndex,r=t.value;if(t.apiFilter&&r){let i=F[n].apiFilter?F[n].apiFilter.name:n;e[i]=r,t.apiFilter.callback&&(e[i]=F[n].apiFilter.callback(r))}if(t.apiSearch&&r){const t=F[n].apiSearch?F[n].apiSearch.name:n;e[t]=Array.isArray(r)?r[0]:r}})),c&&Q&&(e[c.apiName]=Q),(w||L&&Object.keys(L).length>0)&&(e=s(s({},L),e)),e},Ce=()=>{ge(be())},Te=e=>{const t=e.target.value;Z(t),ce(l(s({},le),{current:1}))},we=(e,t,n)=>{const r=t||W,i=e||ue,a=n||ue,o=Object.values(a).some((e=>!("search"!==e.type||!e.value)));let s=!1;s=e?Object.values(i).some((e=>e&&e.length>0)):Object.values(i).some((e=>!!("filter"===e.type&&e.value&&e.value.length>0)));const l=!!r.column;K(o||s||l)},Se=Object.values(ue).some((e=>!("search"!==e.type||!e.value))),ke=Object.values(ue).some((e=>!!("filter"===e.type&&e.value&&e.value.length>0)));f.exports.useImperativeHandle(t,(()=>({handleReload:Ce,goToFirstPage:()=>{ce(l(s({},le),{current:1}))}})));const _e=e=>u?d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("b",{style:{marginTop:4,display:"inline-block"}},a("table.filter.header.title"))),(Se||ke)&&Object.values(ue).map((t=>{if("search"===t.type&&t.value)return d.createElement("div",{key:`search-header-${t.dataIndex}`,className:`${e.headerClsPrefix}-item`},d.createElement(Ct,{title:d.createElement("span",null,t.title,":"," ",t.value)},d.createElement(yt,{size:"small",className:"table-header-item-btn",onClick:()=>(e=>{he({type:"update",dataIndex:e.dataIndex}),G.current[e.dataIndex]&&G.current[e.dataIndex].clearFilters&&G.current[e.dataIndex].clearFilters([]),we(null,W,l(s({},ue),{[e.dataIndex]:{title:ue[e.dataIndex].title,dataIndex:ue[e.dataIndex].dataIndex,value:null}}))})(t)},d.createElement("span",{className:"table-header-item-btn-content"},t.title,":"," ",t.value),d.createElement(Fe,null))));if("filter"===t.type&&t.value&&t.value.length>0){const n=(F[t.dataIndex]?F[t.dataIndex].filters:[]).reduce(((e,t)=>l(s({},e),{[t.value]:[t.text]})),{}),r=t.value.map((e=>n&&n[e]?n[e]:e));return d.createElement("div",{key:`search-header-${t.dataIndex}`,className:`${e.headerClsPrefix}-item`},d.createElement(Ct,{title:d.createElement("span",null,t.title,":"," ",r.join(","))},d.createElement(yt,{size:"small",className:"table-header-item-btn",onClick:()=>(e=>{he({type:"update",dataIndex:e.dataIndex,value:[]});const t=Object.values(ue).map((t=>t.dataIndex===e.dataIndex?{[t.dataIndex]:[]}:{[t.dataIndex]:t.value||[]}));we(t,W,ue)})(t)},d.createElement("span",{className:"table-header-item-btn-content"},t.title,":"," ",r.join(",")),d.createElement(Fe,null))))}return null})),W.columnKey&&W.column&&d.createElement("div",{className:`${e.headerClsPrefix}-item`},d.createElement(Ct,{title:d.createElement("span",null,F[W.columnKey].title,`: ${te[W.order]}`)},d.createElement(yt,{size:"small",className:"table-header-item-btn",onClick:Ee},d.createElement("span",{className:"table-header-item-btn-content"},F[W.columnKey].title,`: ${te[W.order]}`),d.createElement(Fe,null)))),d.createElement("div",{className:`${e.headerClsPrefix}-item`},d.createElement(yt,{size:"small",type:"link","data-testid":"btn-clearall",onClick:xe},a("table.filter.header.btn.clear")))):null,Ae=()=>d.createElement(Ct,{placement:"topLeft",title:se},d.createElement(bt,{"data-testid":"search-input",prefix:"right"===b&&d.createElement(N,{style:{color:"rgba(0,0,0,.25)"}}),suffix:"left"===b&&d.createElement(N,{style:{color:"rgba(0,0,0,.25)"}}),allowClear:!0,value:Q,onChange:Te,placeholder:se})),Oe=()=>{if("icon"===T){const e=R({[`${n}-header-loadbtn`]:!0,[`${n}-header-loadbtn-icon`]:!0,[`${n}-header-loadbtn-right`]:"right"===b,[`${n}-header-loadbtn-left`]:"left"===b});return d.createElement(z,{onClick:Ce,spin:U,className:e,type:"reload"})}if("btn"===T){const e=R({[`${n}-header-loadbtn`]:!0,[`${n}-header-loadbtn-btn`]:!0,[`${n}-header-loadbtn-right`]:"right"===b,[`${n}-header-loadbtn-left`]:"left"===b});return d.createElement(yt,{className:e,loading:U,icon:d.createElement(z,null),"data-testid":"reload-btn",onClick:Ce})}};return d.createElement(Xt,s({},e.antConfig),d.createElement("div",{className:A,style:e.style},w&&d.createElement("div",{className:M},d.createElement(zne,s({onChange:g?e=>{H.current=!0,ce(l(s({},le),{current:1})),P(e)}:e=>{D||(P(e),B(!0))},onReset:e=>{H.current=!0,ce(l(s({},le),{current:1})),P(e)},onSearch:e=>{le.current>1?(H.current=!0,ce(l(s({},le),{current:1})),P(e)):P(e)},columns:w,showOptionBtns:p,showCollapseButton:m},y))),d.createElement("div",{className:I},!!e.tableTitle&&d.createElement("h3",null," ",e.tableTitle," "),e.customHeader&&d.createElement("div",{"data-testid":"custom-header",className:`${n}-header-custom`},e.customHeader),re&&d.createElement(St,{type:"flex",className:`${n}-header-search`},ne?Ae():d.createElement("div",null),ie&&Oe()),"flex"===r&&d.createElement("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"10px"}},oe&&Oe(),e.leftHeader),"none"===r&&"right"!==C&&d.createElement(St,{className:`${n}-header-filter`},oe&&Oe(),d.createElement(kt,{"data-testid":"left-header",className:R(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`)},e.leftHeader),ae&&Oe()),"none"===r&&ne&&"right"===C&&d.createElement(St,{className:`${n}-header-filter`},d.createElement(kt,{"data-testid":"left-header",className:R(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`),span:14},oe&&Oe(),e.leftHeader),d.createElement(kt,{"data-testid":"right-header",className:`${n}-header-filter-right`,span:10},Ae()),ae&&Oe()),"line"===r&&d.createElement(St,{className:`${n}-header-filter`},oe&&Oe(),d.createElement(kt,{"data-testid":"right-header",className:`${n}-header-filter-line`,span:24},q&&_e({headerClsPrefix:`${n}-header-filter-line`})),ae&&Oe()),"half"===r&&d.createElement(St,{className:`${n}-header-filter`},oe&&Oe(),d.createElement(kt,{"data-testid":"left-header",className:R(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`),span:12},e.leftHeader),d.createElement(kt,{"data-testid":"right-header",className:`${n}-header-filter-right`,span:12},q&&_e({headerClsPrefix:`${n}-header-filter-right`})),ae&&Oe()),d.createElement("div",{className:`${n}-table-wrapper`},d.createElement("div",{className:O},d.createElement(Nt,s({loading:U,columns:e.columns.map((e=>{const t=S.cloneDeep(e);if(t.apiFilter&&(t.filterIcon=()=>d.createElement(We,null),t.filteredValue=ue[e.dataIndex].value),t.apiSorter&&(t.sortOrder=W.columnKey===t.dataIndex&&W.order),t.apiSearch){t.filterIcon=()=>d.createElement(N,null),t.onFilterDropdownVisibleChange=e=>{e&&j.current&&j.current.select&&setTimeout((()=>(j.current&&j.current.select&&j.current.select(),null)))},t.filterDropdown=({setSelectedKeys:e,selectedKeys:n,confirm:r,clearFilters:i})=>(G.current[t.dataIndex]={clearFilters:i},d.createElement("div",{style:{padding:8}},d.createElement(bt,{"data-testid":"filter-search-input",autoFocus:!0,ref:e=>{j.current=e},placeholder:a("table.filter.search.placeholder"),value:n&&n[0],onChange:t=>e?e(t.target.value?[t.target.value]:[]):[],onPressEnter:()=>ve(n,r,t.dataIndex),style:{width:188,marginBottom:8,display:"block"}}),d.createElement(yt,{type:"primary",onClick:()=>ve(n,r,t.dataIndex),icon:"search",size:"small","data-testid":"search-btn-ok",style:{width:90,marginRight:8}},a("table.filter.search.btn.ok")),d.createElement(yt,{onClick:()=>ye(i,t.dataIndex),size:"small",style:{width:90}},a("table.filter.search.btn.cancel"))));let e=[];const n=ue[t.dataIndex].value;"string"==typeof n&&(e=[n]),Array.isArray(n)&&"string"==typeof n[0]&&(e=[n[0]]),t.onFilter=(e,n)=>n[t.dataIndex].toString().toLowerCase().includes(e.toLowerCase()),t.render||(t.render=(n,r,i)=>t.searchRender?t.searchRender(n,r,i,d.createElement(yne,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:e,autoEscape:!0,textToHighlight:String(n)})):d.createElement(yne,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:e,autoEscape:!0,textToHighlight:String(n)}))}return t})),dataSource:$,bordered:!1,rowSelection:J,onChange:(e,t,n)=>{i.current&&(Object.keys(n).length>0&&n.column?X({type:"update",value:l(s({},n),{column:{apiSorter:n.column.apiSorter}})}):X({type:"update",value:{}}),Object.entries(t).forEach((([e,t])=>{F[e].filters&&he({type:"update",dataIndex:e,updateType:"filter",value:t})})),H.current=!1,ce(e),we(t,n))},pagination:s(s({showTotal:e=>`${a("table.total.prefix")} ${e} ${a("table.total.suffix")}`,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:Hne},e.pagination),le)},_)),J&&void 0!==ee&&ee>0&&d.createElement("div",{className:`${n}-table-content-select-num`},a("table.select.num"),ee))))))}));function Yne(e){const{onRefreshRule:t}=e,[n]=Et.useForm(),[r,i]=f.exports.useState(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState(),h=localStorage.getItem("selectedAlertRule"),[p,m]=f.exports.useState(h?Number(h):0),[g,v]=f.exports.useState(""),{profile:y}=ni((e=>e.account));function x(e){e&&(m(e),localStorage.setItem("selectedAlertRule",String(e)))}f.exports.useEffect((()=>{E(!0).then((e=>{if(p&&e&&e.length>0){const n=null==e?void 0:e.find((e=>e.id===p));n?t(n.rule):x(e[0].id)}}))}),[]),f.exports.useEffect((()=>{if(p&&r&&r.length>0){const e=null==r?void 0:r.find((e=>e.id===p));e?t(e.rule):x(r[0].id)}}),[p]);const E=(e=!1)=>ii("/api/n9e/alert-aggr-views",{method:Kr.Get}).then((t=>{const n=t.dat.sort(((e,t)=>e.cate-t.cate));return i(n),e&&n.length>0&&!n.find((e=>e.id===p))&&x(n[0].id),n})),b=e=>{Ot.confirm({title:`确定要删除聚合策略 ${e.name} 吗？`,onOk:async()=>{var t;await(t=[e.id],ii("/api/n9e/alert-aggr-views",{method:Kr.Delete,data:{ids:t}})),gt.success("删除成功"),E(!0)},onCancel:()=>{}})};return d.createElement("div",{className:"left-area",style:{width:240,background:"#fff"}},d.createElement("div",{className:"event-page-title"},d.createElement("span",null,"聚合规则"),d.createElement("a",{onClick:()=>o(!0)},d.createElement(Be,null))),d.createElement(bt,{style:{margin:"10px 0"},prefix:d.createElement(N,null),value:g,onChange:e=>{v(e.target.value)}}),null==r?void 0:r.filter((e=>e.name.includes(g))).map((e=>d.createElement("div",{className:e.id===p?"card-menu-item is-active":"card-menu-item",onClick:()=>x(e.id),key:e.id},d.createElement("div",{className:"label-area"},d.createElement("div",{className:"title"},e.name)),1===e.cate||y.admin?d.createElement("div",null,0===e.cate&&d.createElement("div",{className:"default-holder"},"公开"),d.createElement("div",{className:"icon-area"},d.createElement(Te,{onClick:()=>{u(e),o(!0),n.setFieldsValue(l(s({},e),{cate:0===e.cate})),t(e.rule)}}),d.createElement(be,{onClick:t=>{t.stopPropagation(),b(e)}}))):d.createElement("div",{className:"default-holder"},"公开")))),d.createElement(Ot,{title:(c?"编辑":"新增")+"聚合规则",visible:a,onOk:async()=>{await n.validateFields();const e=c?Yi:$i,t=n.getFieldsValue(),r=await e(l(s({},t),{cate:t.cate?0:1}));o(!1),await E(),x(c?c.id:r.dat.id)},onCancel:()=>{o(!1),u(void 0)},destroyOnClose:!0},d.createElement(Et,{form:n,layout:"vertical",preserve:!1},d.createElement(Et.Item,{label:"Name",name:"name",rules:[({getFieldValue:e})=>({validator:(e,t)=>t&&0!==t.length?Promise.resolve():Promise.reject(new Error("请输入聚合规则名称"))})]},d.createElement(bt,null)),d.createElement(Et.Item,{name:"id",hidden:!0},d.createElement(bt,null)),d.createElement(Et.Item,{label:"Rule",name:"rule",rules:[({getFieldValue:e})=>({validator:(e,t)=>t&&0!==t.length?Promise.resolve():Promise.reject(new Error("请输入Rule"))})]},d.createElement(bt,null)),y.admin&&d.createElement(Et.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Ft,null)))))}var Une=d.forwardRef((function(e,t){const{t:n}=Fr(),{filter:r,header:i}=e,a=f.exports.useRef(null),o=w(),[c,u]=f.exports.useState(4),[h,p]=f.exports.useState(),[m,g]=f.exports.useState(),[v,y]=f.exports.useState(),[x,E]=f.exports.useState([]),[b,C]=f.exports.useState(),[T,S]=f.exports.useState(!1);f.exports.useEffect((()=>{k()}),[r,h]);const k=()=>{var e;h&&(e=l(s({},r),{rule:h}),ii("/api/n9e/alert-cur-events/card",{method:Kr.Get,params:e})).then((e=>{g(e.dat)}))};f.exports.useLayoutEffect((()=>{function e(){var e;const t=null==(e=a.current)?void 0:e.offsetWidth;t&&u(function(e){return e>1500?4:e>1e3?6:e>850?8:12}(t))}const t=Y.exports.throttle(e,400);return window.addEventListener("resize",t),e(),()=>window.removeEventListener("resize",t)}),[]);const _=[{title:n("集群"),dataIndex:"cluster",width:120},{title:n("规则标题&事件标签"),dataIndex:"rule_name",render(e,{id:t,tags:n}){const r=n&&n.map((e=>d.createElement(At,{color:"blue",key:e},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>o.push(`/alert-cur-events/${t}`)},e)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},r)))}},{title:n("触发时间"),dataIndex:"trigger_time",width:120,render:e=>O(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{title:n("操作"),dataIndex:"operate",width:120,render:(e,t)=>d.createElement(d.Fragment,null,d.createElement(yt,{size:"small",type:"link",onClick:()=>{o.push("/alert-mutes/add",{cluster:t.cluster,tags:t.tags?t.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}})):[]})}},"屏蔽"),d.createElement(yt,{size:"small",type:"link",danger:!0,onClick:()=>Xne(void 0,[t.id],(()=>{E(x.filter((e=>e!==t.id))),A(v)}))},"删除"))}],A=e=>{var t;S(!0),y(e),(t=e.event_ids,ii("/api/n9e/alert-cur-events/card/details",{method:Kr.Post,data:{ids:t}})).then((e=>{C(e.dat)}))};return f.exports.useImperativeHandle(t,(()=>({reloadCard:k}))),d.createElement("div",{style:{display:"flex",height:"100%"},ref:a},d.createElement(Yne,{onRefreshRule:p}),d.createElement("div",{style:{background:"#fff",flex:1,padding:16}},i,d.createElement(St,{gutter:[16,16],style:{marginTop:16}},null==m?void 0:m.map(((e,t)=>d.createElement(kt,{span:c,key:t},d.createElement("div",{className:`event-card ${Wne[e.severity-1]} ${Wne[e.severity-1]}-left-border`,onClick:()=>A(e)},d.createElement("div",{className:"event-card-title"},e.title),d.createElement("div",{className:"event-card-num"},e.total))))))),d.createElement(Vt,{title:d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},d.createElement("span",null,null==v?void 0:v.title),d.createElement(yt,{danger:!0,disabled:0===x.length,onClick:()=>Xne(void 0,x,(()=>{E([]),A(v)}))},"批量删除")),placement:"right",onClose:()=>{S(!1)},visible:T,width:960},d.createElement(Nt,{rowKey:"id",className:"card-event-drawer",rowClassName:(e,t)=>Wne[e.severity-1]+"-left-border",rowSelection:{selectedRowKeys:x,onChange(e,t){E(e.map((e=>Number(e))))}},dataSource:b,columns:_})))}));const{confirm:Vne}=Ot,Wne=["red","orange","yellow","green"];function Xne(e,t,n=(()=>{})){Vne({title:"删除告警事件",icon:d.createElement(Ge,null),content:"通常只有在确定监控数据永远不再上报的情况下（比如调整了监控数据标签，或者机器下线）才删除告警事件，因为相关告警事件永远无法自动恢复了，您确定要这么做吗？",okText:"确认删除",maskClosable:!0,okButtonProps:{danger:!0},zIndex:1001,onOk:()=>function(e,t){return ii("/api/n9e/alert-cur-events",{method:Kr.Delete,data:{ids:t}})}(0,t).then((e=>{gt.success("删除成功"),n()})),onCancel(){}})}const qne=()=>{const e=w(),{t:t}=Fr(),[n,r]=f.exports.useState("card"),i=Vr(),[a,o]=f.exports.useState(),[s,l]=f.exports.useState([]),{hourRange:c,queryContent:u}=ni((e=>e.event)),h=f.exports.useMemo((()=>[{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:2,unit:"days",description:t("天")},{num:3,unit:"days",description:t("天")},{num:7,unit:"days",description:t("天")},{num:14,unit:"days",description:t("天")},{num:30,unit:"days",description:t("天")},{num:60,unit:"days",description:t("天")},{num:90,unit:"days",description:t("天")}]),[]),p=f.exports.useRef({handleReload(){}}),m=f.exports.useRef({reloadCard(){}}),g=f.exports.useRef(!1),[v,y]=f.exports.useState(-1),[x,b]=f.exports.useState([]),[C,T]=f.exports.useState(0);Xe((()=>{"list"===n?p.current.handleReload():m.current.reloadCard()}),C>0?1e3*C:void 0);const S=[{title:t("集群"),dataIndex:"cluster",width:120},{title:t("规则标题&事件标签"),dataIndex:"rule_name",render(t,{id:n,tags:r}){const i=r&&r.map((e=>d.createElement(At,{color:"blue",key:e,onClick:t=>{u.includes(e)||(g.current=!0,k("queryContent",u?`${u.trim()} ${e}`:e))}},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>e.push(`/alert-cur-events/${n}`)},t)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},i)))}},{title:t("触发时间"),dataIndex:"trigger_time",width:120,render:e=>O(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{title:t("操作"),dataIndex:"operate",width:120,render:(t,r)=>d.createElement(d.Fragment,null,d.createElement(yt,{size:"small",type:"link",onClick:()=>{e.push("/alert-mutes/add",{cluster:r.cluster,tags:r.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}}))})}},"屏蔽"),d.createElement(yt,{size:"small",type:"link",danger:!0,onClick:()=>Xne(0,[r.id],(()=>{b(x.filter((e=>e!==r.id))),"list"===n&&p.current.handleReload()}))},"删除"))}];function k(e,t){i({type:"event/saveData",prop:e,data:t})}function _(){const e=d.createElement(vt,{onClick:e=>{T(e.key)}},[{num:0,unit:"second",description:"off"},{num:5,unit:"seconds",description:"s"},{num:30,unit:"seconds",description:"s"},{num:60,unit:"seconds",description:"s"}].map((({num:e,description:t})=>d.createElement(vt.Item,{key:e},e>0&&d.createElement("span",{className:"num"},e),t))));return d.createElement("div",{className:"table-operate-box",style:{background:"#fff"}},d.createElement("div",{className:"left"},d.createElement(yt,{icon:d.createElement(qe,null),onClick:()=>r("card")}),d.createElement(yt,{icon:d.createElement(Ke,null),onClick:()=>r("list"),style:{marginLeft:8,marginRight:8}}),d.createElement(ru,{showRight:!1,leftList:h,value:c,onChange:e=>{e.num===c.num&&e.unit===c.unit||k("hourRange",e)}}),d.createElement(no,{onSeverityChange:e=>o(e),onBusiGroupChange:e=>y("number"==typeof e?e:-1),onClusterChange:e=>l(e)}),d.createElement(bt,{className:"search-input",prefix:d.createElement(N,null),placeholder:"模糊搜索规则和标签(多个关键词请用空格分隔)",value:u,onChange:e=>k("queryContent",e.target.value),onPressEnter:e=>"list"===n&&p.current.handleReload()})),d.createElement("div",{className:"right"},"list"===n&&d.createElement(yt,{danger:!0,style:{marginRight:8},disabled:0===x.length,onClick:()=>Xne(0,x,(()=>{b([]),"list"===n&&p.current.handleReload()}))},"批量删除"),d.createElement(Fa,{onClick:()=>{"list"===n&&p.current.handleReload(),"card"===n&&m.current.reloadCard()}}),d.createElement(Tt,{overlay:e},d.createElement(yt,{className:"interval-btn",icon:d.createElement(M,null)},C>0?C+"s":"off"))))}return f.exports.useEffect((()=>{g.current&&("list"===n&&p.current.handleReload(),g.current=!1)}),[u]),f.exports.useEffect((()=>{"list"===n&&p.current.handleReload()}),[s,a,c,v,n]),d.createElement(Wi,{icon:d.createElement(E,null),title:t("活跃告警"),hideCluster:!0},d.createElement("div",{className:"event-content cur-events"},d.createElement("div",{className:"table-area",style:{padding:"card"===n?0:void 0}},"card"===n?d.createElement("div",{style:{width:"100%",height:"100%",background:"#eee"}},d.createElement(Une,{ref:m,header:_(),filter:Object.assign({hours:"hours"!==c.unit?24*c.num:c.num},s.length?{clusters:s.join(",")}:{},a?{severity:a}:{},u?{query:u}:{},{bgid:v})})):d.createElement($ne,{ref:p,antProps:{rowKey:"id",rowClassName:(e,t)=>Wne[e.severity-1]+"-left-border",rowSelection:{selectedRowKeys:x,onChange(e,t){b(e.map((e=>Number(e))))}}},url:"/api/n9e/alert-cur-events/list",customQueryCallback:e=>Object.assign(e,{hours:"hours"!==c.unit?24*c.num:c.num},s.length?{clusters:s.join(",")}:{},a?{severity:a}:{},u?{query:u}:{},{bgid:v}),pageParams:{curPageName:"p",pageSizeName:"limit",pageSize:30,pageSizeOptions:["30","100","200","500"]},apiCallback:({dat:{list:e,total:t}})=>({data:e,total:t}),columns:S,reloadBtnType:"btn",reloadBtnPos:"right",showReloadBtn:!0,filterType:"flex",leftHeader:_()}))))};const{Paragraph:Kne}=Kt,Qne=e=>{let t="";return S.forEach(e,(e=>{const n=S.split(e,"uuid=");n[1]&&(t=n[1])})),t},Zne={origin:"#573BA7",upper_bound:"#1A94FF",lower_bound:"#2ACA96",anomaly:"red"},Jne=()=>{const{busiId:e,eventId:t}=q(),{busiGroups:n}=ni((e=>e.common));f.exports.useEffect((()=>{}),[n]);const r=w(),[i,a]=f.exports.useState(r.location.pathname.includes("alert-his-events")),[o,s]=f.exports.useState(),[l,c]=f.exports.useState([{label:"规则标题",key:"rule_name",render:(e,{rule_id:t})=>d.createElement(yt,{size:"small",type:"link",className:"rule-link-btn",onClick:()=>{r.push(`/alert-rules/edit/${t}`)}},e)},{label:"业务组",key:"group_name",render:(e,{group_id:t})=>d.createElement(yt,{size:"small",type:"link",className:"rule-link-btn",onClick:()=>{return e=t,void(n.find((t=>t.id===e))?r.push(`/alert-rules?id=${e}`):gt.error("该业务组已删除或无查看权限"));var e}},e)},{label:"规则备注",key:"rule_note"},{label:"所属集群",key:"cluster"},{label:"告警级别",key:"severity",render:e=>d.createElement(At,{color:Ii[e-1]},"S",e)},{label:"事件状态",key:"is_recovered",render:e=>d.createElement(At,{color:e?"green":"red"},e?"Recovered":"Triggered")},{label:"事件标签",key:"tags",render:e=>e?e.map((e=>d.createElement(At,{color:"blue",key:e},e))):""},{label:"对象备注",key:"target_note"},{label:"触发时间",key:"trigger_time",render:e=>O(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{label:"触发时值",key:"trigger_value"},{label:"恢复时间",key:"recover_time",render:e=>O(1e3*(e||0)).format("YYYY-MM-DD HH:mm:ss")},{label:"告警方式",key:"rule_algo",render:e=>e?"智能告警":"阈值告警"},{label:"PromQL",key:"prom_ql",render:e=>d.createElement(St,{className:"promql-row"},d.createElement(kt,{span:20},d.createElement(g9,{value:e,url:"/api/n9e/prometheus",readonly:!0})),d.createElement(kt,{span:4},d.createElement(yt,{className:"run-btn",type:"link",onClick:()=>{window.open(`${location.origin}/metric/explorer?promql=${encodeURIComponent(e)}`)}},d.createElement(Qe,{className:"run-con"}))))},{label:"执行频率",key:"prom_eval_interval",render:e=>`${e} 秒`},{label:"持续时长",key:"prom_for_duration",render:e=>`${e} 秒`},{label:"通知媒介",key:"notify_channels",render:e=>e.join(" ")},{label:"告警接收组",key:"notify_groups_obj",render:e=>e?e.map((e=>d.createElement(At,{color:"blue"},e.name))):""},{label:"回调地址",key:"callbacks",render:e=>e?e.map((e=>d.createElement(At,null,d.createElement(Kne,{copyable:!0,style:{margin:0}},e)))):""},{label:"预案链接",key:"runbook_url",render:e=>d.createElement("a",{href:e,target:"_balank"},e)}]),[u,h]=f.exports.useState({num:1,unit:"hour",description:""}),[p,m]=f.exports.useState(15),[g,v]=f.exports.useState([]);return f.exports.useEffect((()=>{(i?function(e,t){return ii(`/api/n9e/alert-his-event/${t}`,{method:Kr.Get})}(0,t):function(e,t){return ii(`/api/n9e/alert-cur-event/${t}`,{method:Kr.Get})}(0,t)).then((e=>{s(e.dat)}))}),[e,t]),f.exports.useEffect((()=>{if(o&&o.rule_algo){let{start:e,end:t}=nu(u),n=p;p||(n=Math.max(Math.floor((t-e)/250),1)),Ui({rid:o.rule_id,uuid:Qne(o.tags),start:e,end:t,step:n}).then((e=>{const t=S.map(S.filter(e.data,(e=>"predict"!==e.metric.value_type)),(e=>{const t=e.metric.value_type;return{name:`${t}`,data:e.values,color:Zne[t],lineDash:"origin"===t||"anomaly"===t?[]:[4,4]}})),n=[],r=S.cloneDeep(S.find(t,{name:"origin"})),i=S.find(t,{name:"lower_bound"}),a=S.find(t,{name:"upper_bound"});n.push({name:"lower_upper_bound",data:S.map(i.data,((e,t)=>[...e,a.data[t][1]])),color:"#ddd",opacity:.5}),n.push(r),v(n)}))}}),[JSON.stringify(o),JSON.stringify(u),p]),d.createElement(Wi,{title:"告警详情",showBack:!0,hideCluster:!0},d.createElement("div",{className:"event-detail-container"},d.createElement(qt,{spinning:!o},d.createElement(Ut,{className:"desc-container",title:"告警事件详情",actions:[d.createElement("div",{className:"action-btns"},d.createElement(Pt,null,d.createElement(yt,{type:"primary",onClick:()=>{r.push("/alert-mutes/add",{cluster:o.cluster,tags:o.tags?o.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}})):[]})}},"屏蔽"),!i&&d.createElement(yt,{danger:!0,onClick:()=>{o.group_id?Xne(o.group_id,[Number(t)],(()=>{r.replace("/alert-cur-events")})):gt.warn("该告警未返回业务组ID")}},"删除")))]},o&&d.createElement("div",null,o.rule_algo&&d.createElement("div",null,d.createElement(Pt,null,d.createElement(ru,{value:u,onChange:h}),d.createElement(au,{value:p,onChange:e=>m(e),initialValue:p})),d.createElement(Vte,{series:g})),l.filter((e=>!!o.is_recovered||"recover_time"!==e.key)).map((({label:e,key:t,render:n},r)=>d.createElement("div",{className:"desc-row",key:t+r},d.createElement("div",{className:"desc-label"},e,"："),d.createElement("div",{className:"desc-content"},n?n(o[t],o):o[t])))))))))},ere=()=>{const e=w(),{t:t}=Fr(),n=Vr(),r=f.exports.useRef({handleReload(){}}),{hisHourRange:i,hisQueryContent:a}=ni((e=>e.event)),[o,s]=f.exports.useState(),[l,c]=f.exports.useState(),[u,h]=f.exports.useState([]),p=f.exports.useRef(!1),[m,g]=f.exports.useState(-1),v=f.exports.useMemo((()=>[{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:2,unit:"days",description:t("天")},{num:3,unit:"days",description:t("天")},{num:7,unit:"days",description:t("天")},{num:14,unit:"days",description:t("天")},{num:30,unit:"days",description:t("天")},{num:60,unit:"days",description:t("天")},{num:90,unit:"days",description:t("天")}]),[]),y=[{title:t("集群"),dataIndex:"cluster",width:120},{title:t("规则标题&事件标签"),dataIndex:"rule_name",render(t,{id:n,tags:r}){const i=r&&r.map((e=>d.createElement(At,{color:"blue",key:e,onClick:t=>{a.includes(e)||(p.current=!0,x("hisQueryContent",a?`${a.trim()} ${e}`:e))}},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>e.push(`/alert-his-events/${n}`)},t)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},i)))}},{title:t("计算时间"),dataIndex:"last_eval_time",width:120,render:e=>O(1e3*(e||0)).format("YYYY-MM-DD HH:mm:ss")}];function x(e,t){n({type:"event/saveData",prop:e,data:t})}return f.exports.useEffect((()=>{p.current&&(r.current.handleReload(),p.current=!1)}),[a]),f.exports.useEffect((()=>{r.current.handleReload()}),[u,o,i,l,m]),d.createElement(Wi,{icon:d.createElement(E,null),title:t("历史告警"),hideCluster:!0},d.createElement("div",{className:"event-content"},d.createElement("div",{className:"table-area"},d.createElement($ne,{ref:r,antProps:{rowKey:"id",rowClassName:(e,t)=>Wne[e.is_recovered?3:e.severity-1]+"-left-border"},url:"/api/n9e/alert-his-events/list",customQueryCallback:e=>Object.assign(e,{hours:"hours"!==i.unit?24*i.num:i.num},u.length?{clusters:u.join(",")}:{},void 0!==o?{severity:o}:{},a?{query:a}:{},void 0!==l?{is_recovered:l}:{},{bgid:m}),pageParams:{curPageName:"p",pageSizeName:"limit",pageSize:30,pageSizeOptions:["30","100","200","500"]},apiCallback:({dat:{list:e,total:t}})=>({data:e,total:t}),columns:y,reloadBtnType:"btn",reloadBtnPos:"left",filterType:"flex",leftHeader:d.createElement("div",{className:"table-operate-box"},d.createElement("div",{className:"left"},d.createElement(ru,{showRight:!1,leftList:v,value:i,onChange:e=>{e.num===i.num&&e.unit===i.unit||x("hisHourRange",e)}}),d.createElement(no,{onSeverityChange:e=>s(e),onEventTypeChange:e=>c(e),onBusiGroupChange:e=>g("number"==typeof e?e:-1),onClusterChange:e=>h(e)}),d.createElement(bt,{className:"search-input",prefix:d.createElement(N,null),placeholder:"模糊搜索规则和标签(多个关键词请用空格分隔)",value:a,onChange:e=>x("hisQueryContent",e.target.value),onPressEnter:e=>r.current.handleReload()})))}))))};var tre,nre;function rre(e){return are(!0,e)}function ire(e){return are(!1,e)}function are(e,t){return ii("/api/n9e/targets/tags",{method:e?Kr.Post:Kr.Delete,data:t})}function ore(e){return ii("/api/n9e/targets/bgid",{method:Kr.Put,data:Object.assign({bgid:0},e)})}function sre(e){return ii("/api/n9e/targets/note",{method:Kr.Put,data:e})}function lre(e){return ii("/api/n9e/targets",{method:Kr.Delete,data:e})}(nre=tre||(tre={})).BindTag="bindTag",nre.UnbindTag="unbindTag",nre.UpdateBusi="updateBusi",nre.RemoveBusi="removeBusi",nre.UpdateNote="updateNote",nre.Delete="delete",nre.None="none";const{TextArea:cre}=bt,ure=()=>{function e(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function t(t){const{isCorrectFormat:n,isLengthAllowed:r}=e(t.value);return n&&r?d.createElement(At,{closable:t.closable,onClose:t.onClose},t.value):d.createElement(Ct,{title:n?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(At,{color:"error",closable:t.closable,onClose:t.onClose,style:{marginTop:"2px"}},t.value))}function n(){return{validator:(t,n)=>n.some((t=>{const{isCorrectFormat:n,isLengthAllowed:r}=e(t);if(!n||!r)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}return{operateTitle:"绑定标签",requestFunc:rre,isFormItem:!0,render:()=>d.createElement(Et.Item,{label:"标签",name:"tags",rules:[{required:!0,message:"请填写至少一项标签！"},n]},d.createElement(It,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:t}))}},hre=e=>({operateTitle:"解绑标签",requestFunc:ire,isFormItem:!0,render:()=>d.createElement(Et.Item,{label:"标签",name:"tags",rules:[{required:!0,message:"请选择至少一项标签！"}]},d.createElement(It,{mode:"multiple",showArrow:!0,placeholder:"请选择要解绑的标签",options:e.map((e=>({label:e,value:e})))}))}),pre=()=>({operateTitle:"移出业务组",requestFunc:ore,isFormItem:!1,render:()=>d.createElement(zt,{message:"提示信息：移出所属业务组，该业务组的管理人员将不再有权限操作这些监控对象！您可能需要提前清空这批监控对象的标签和备注信息！",type:"error"})}),dre=()=>({operateTitle:"修改备注",requestFunc:sre,isFormItem:!0,render:()=>d.createElement(Et.Item,{label:"备注信息",name:"note"},d.createElement(bt,{maxLength:64,placeholder:"内容如果为空，表示清空备注信息"}))}),fre=()=>({operateTitle:"批量删除",requestFunc:lre,isFormItem:!1,render:()=>d.createElement(zt,{message:"提示信息：该操作会把监控对象从系统内中彻底删除，非常危险，慎重操作！",type:"error"})}),mre=({operateType:e,setOperateType:t,idents:n,reloadList:r})=>{const{busiGroups:i}=ni((e=>e.common)),[a]=Et.useForm(),[o,s]=f.exports.useState(!1),[l,c]=f.exports.useState(n),[u,h]=f.exports.useState([]),p=e===tre.UnbindTag?u:i,m={bindTagDetail:ure,unbindTagDetail:hre,updateBusiDetail:e=>({operateTitle:"修改业务组",requestFunc:ore,isFormItem:!0,render:()=>d.createElement(Et.Item,{label:"归属业务组",name:"bgid",rules:[{required:!0,message:"请选择归属业务组！"}]},d.createElement(It,{showSearch:!0,style:{width:"100%"},placeholder:"请选择归属业务组",options:E.map((({id:e,name:t})=>({label:t,value:e}))),optionFilterProp:"label",filterOption:!1,onSearch:C,onFocus:()=>{ai("").then((e=>{b(e.dat||[])}))},onClear:()=>{ai("").then((e=>{b(e.dat||[])}))}}))}),removeBusiDetail:pre,updateNoteDetail:dre,deleteDetail:fre,noneDetail:()=>({operateTitle:"",requestFunc:()=>Promise.resolve(),isFormItem:!1,render(){}})},{operateTitle:g,requestFunc:v,isFormItem:y,render:x}=m[`${e}Detail`](p),[E,b]=f.exports.useState(i);f.exports.useEffect((()=>{E.length||b(i)}),[i]);const C=f.exports.useCallback(Y.exports.debounce((e=>{ai(e).then((e=>{b(e.dat||[])}))}),800),[]);return f.exports.useEffect((()=>{e!==tre.None&&(c(n),a.setFieldsValue({idents:n.join("\n")}))}),[e,n]),f.exports.useEffect((()=>{var t;e===tre.UnbindTag&&l.length&&(t={idents:l.join(",")},ii("/api/n9e/targets/tags",{method:Kr.Get,params:t})).then((({dat:e})=>{const t=a.getFieldValue("tags")||[];a.setFieldsValue({tags:t.filter((t=>e.includes(t)))}),h(e)}))}),[e,l]),d.createElement(Ot,{visible:"none"!==e,title:g,confirmLoading:o,okButtonProps:{danger:e===tre.RemoveBusi||e===tre.Delete},okText:e===tre.RemoveBusi?"移出":e===tre.Delete?"删除":"确定",onOk:function(){a.validateFields().then((e=>{s(!0),e.idents=e.idents.split("\n"),v(e).then((()=>{gt.success(`${g}成功！`),t(tre.None),r(),a.resetFields(),s(!1)})).catch((()=>s(!1)))}))},onCancel:()=>{t(tre.None),a.resetFields()}},d.createElement(Et,{form:a,labelCol:{span:4},wrapperCol:{span:20}},d.createElement(Et.Item,{label:"监控对象",name:"idents",rules:[{required:!0,message:"请填写监控对象指标"}]},d.createElement(cre,{autoSize:{minRows:3,maxRows:10},placeholder:"请填写监控对象的指标，一行一个",onBlur:function(){const e=a.getFieldValue("idents"),t=e.split(/[ ,\n]+/).filter((e=>e)),n=t.join("\n");e!==n&&a.setFieldsValue({idents:n}),l.sort().join("\n")!==t.sort().join("\n")&&c(t)}})),y&&x()),!y&&x())},gre=()=>{const{t:e}=Fr(),t=f.exports.useRef({handleReload(){}}),n=f.exports.useRef(!1),[r,i]=f.exports.useState(""),[a,o]=f.exports.useState(tre.None),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState(-2),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState([]),v=[{title:"集群",dataIndex:"cluster",width:100,fixed:"left"},{title:"标识",dataIndex:"ident",width:140},{title:"标签",dataIndex:"tags",ellipsis:{showTitle:!1},render(e){const t=e&&e.map((e=>d.createElement(At,{color:"blue",key:e,onClick:t=>{r.includes(e)||(n.current=!0,i(r?`${r.trim()} ${e}`:e))}},e)));return e&&d.createElement(Ct,{title:t,placement:"topLeft",getPopupContainer:()=>document.body,overlayClassName:"mon-manage-table-tooltip"},t)}},{title:"业务组",dataIndex:"group_obj",render:e=>e?e.name:"未归组"},{title:"备注",dataIndex:"note",ellipsis:{showTitle:!1},render:e=>d.createElement(Ct,{title:e,placement:"topLeft",getPopupContainer:()=>document.body},e)}];return f.exports.useEffect((()=>{t.current.handleReload()}),[c,s]),f.exports.useEffect((()=>{n.current&&(t.current.handleReload(),n.current=!1)}),[r]),d.createElement(Wi,{icon:d.createElement(y,null),title:e("对象列表"),hideCluster:!0},d.createElement("div",{className:"object-manage-page-content"},d.createElement(ya,{busiGroup:{showNotGroupItem:!0,onChange(e){u("number"==typeof e?e:-1),p([]),g([])}}}),d.createElement("div",{className:"table-area"},-2!==c&&d.createElement($ne,{ref:t,antProps:{rowKey:"id",rowSelection:{selectedRowKeys:h,onChange(e,t){p(e),g(t?t.map((({ident:e})=>e)):[])}}},url:"/api/n9e/targets",customQueryCallback:e=>Object.assign(e,r?{query:r}:{},-1!==c?{bgid:c}:{},s.length?{clusters:s.join(",")}:{}),pageParams:{curPageName:"p",pageSizeName:"limit",pageSize:30,pageSizeOptions:["30","100","200","500"]},apiCallback:({dat:{list:e,total:t}})=>({data:e,total:t}),columns:v,reloadBtnType:"btn",reloadBtnPos:"left",filterType:"flex",leftHeader:d.createElement("div",{className:"table-operate-box"},d.createElement(Pt,null,d.createElement(no,{noLeftPadding:!0,onClusterChange:e=>l(e)}),d.createElement(bt,{className:"search-input",prefix:d.createElement(N,null),placeholder:"模糊搜索表格内容(多个关键词请用空格分隔)",value:r,onChange:e=>i(e.target.value),onPressEnter:e=>t.current.handleReload()})),d.createElement(Tt,{trigger:["click"],overlay:d.createElement(vt,{onClick:({key:e})=>{o(e)}},d.createElement(vt.Item,{key:tre.BindTag},"绑定标签"),d.createElement(vt.Item,{key:tre.UnbindTag},"解绑标签"),d.createElement(vt.Item,{key:tre.UpdateBusi},"修改业务组"),d.createElement(vt.Item,{key:tre.RemoveBusi},"移出业务组"),d.createElement(vt.Item,{key:tre.UpdateNote},"修改备注"),d.createElement(vt.Item,{key:tre.Delete},"批量删除"))},d.createElement(yt,null,"批量操作 ",d.createElement(M,null))))}))),d.createElement(mre,{operateType:a,setOperateType:o,idents:m,reloadList:t.current.handleReload}))};function vre(e){const{range:t,idents:n,calc:r,onChange:i}=e,[a,o]=f.exports.useState([]),[s,l]=f.exports.useState(),c=function(e){return`{ident=~"${S.join(e,"|")}"}`}(n);return f.exports.useEffect((()=>{n.length&&hte(c,t).then((e=>{const t=S.union(e);o(t)}))}),[JSON.stringify(t),c]),f.exports.useEffect((()=>{s&&n.length&&function(e){const{metric:t,match:n,range:r,calcFunc:i}=e;let{start:a,end:o}=nu(r);const s=Math.max(Math.floor((o-a)/250),1),l=`${i}(${t}${n}) by (ident)`;return ii("/api/n9e/prometheus/api/v1/query_range",{method:Kr.Get,params:{start:a,end:o,step:s,query:l}})}({metric:s,match:c,range:t,calcFunc:r}).then((e=>{i(S.map(e.data.result,(e=>({name:e.metric.ident,metric:e.metric,data:e.values}))))}))}),[JSON.stringify(t),c,s,r]),d.createElement(It,{style:{width:200},placement:"bottomRight",showSearch:!0,placeholder:"指标",value:s,onChange:e=>{l(e)}},S.map(a,(e=>d.createElement(It.Option,{key:e,value:e},e))))}function yre(){const{t:e}=Fr(),t=Vr(),[n,r]=f.exports.useState(-1),[i,a]=f.exports.useState([]),[o,s]=f.exports.useState({num:1,unit:"hours",description:""}),{queryContent:l}=ni((e=>e.event)),[c,u]=f.exports.useState(),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState("avg"),[v,x]=f.exports.useState([]),[E]=Et.useForm(),[b,C]=f.exports.useState(!1),[T,w]=f.exports.useState({});return f.exports.useEffect((()=>{var e;(e={bgid:n,clusters:S.join(i,","),query:c},ii("/api/n9e/targets",{method:Kr.Get,params:e})).then((e=>{p(e.dat.list)}))}),[n,i,c]),d.createElement(Wi,{icon:d.createElement(y,null),title:e("对象蜂窝图"),hideCluster:!0},d.createElement("div",null,d.createElement("div",{className:"targets-map-container"},d.createElement("div",{className:"targets-map-header"},d.createElement(Pt,null,d.createElement(wee,{onRefresh:()=>{}}),d.createElement(ru,{onChange:s}),d.createElement(no,{noLeftPadding:!0,onBusiGroupChange:e=>r("number"==typeof e?e:-1),onClusterChange:e=>a(e)}),d.createElement(bt,{className:"search-input",prefix:d.createElement(N,null),placeholder:"模糊搜索规则和标签(多个关键词请用空格分隔)",value:l,onChange:e=>{return n="queryContent",r=e.target.value,void t({type:"event/saveData",prop:n,data:r});var n,r},onPressEnter:()=>{u(l)}})),d.createElement(Pt,null,d.createElement(vre,{range:o,idents:S.map(h,"ident"),calc:m,onChange:e=>{x(e)}}),d.createElement(It,{value:m,onChange:e=>{g(e)}},d.createElement(It.Option,{value:"avg"},"avg"),d.createElement(It.Option,{value:"max"},"max"),d.createElement(It.Option,{value:"min"},"min"),d.createElement(It.Option,{value:"sum"},"sum")),d.createElement(yt,{icon:d.createElement(P,null),onClick:()=>{C(!0)}}))),d.createElement("div",{style:{padding:20}},d.createElement(W$,{series:v,values:{custom:{calc:m},options:T.options}})))),d.createElement(Ot,{title:"自定义设置",width:600,visible:b,onCancel:()=>{C(!1)},onOk:()=>{E.validateFields().then((e=>{w(e),C(!1)}))}},d.createElement(Et,{layout:"vertical",form:E,initialValues:{}},d.createElement("div",{className:"n9e-collapse"},d.createElement(aee,null),d.createElement(w9,null)))))}function xre(e){const{onChange:t,value:n,className:r,style:i={},editable:a=!0,xCluster:o}=e,[l,c]=f.exports.useState(),u=f.exports.useRef(null);const h=(new on).setComplete({remote:{fetchFn:function(e,t={}){return fetch(e,s({method:"Get",headers:new Headers({"X-Cluster":o,Authorization:`Bearer ${localStorage.getItem("access_token")||""}`})},t))},url:"/api/n9e/prometheus"}});return f.exports.useEffect((()=>{const e=new nn({state:sn.create({doc:n,extensions:[qee,In,h.asExtension(),nn.updateListener.of((e=>{null==t||t(e.state.doc.toString())})),nn.editable.of(a)]}),parent:u.current});c(e)}),[]),d.createElement("div",{ref:u,className:r,style:Object.assign({fontSize:12},i)})}const{Panel:Ere}=Qt;function bre(){const[e,t]=f.exports.useState("Default");return d.createElement("div",null,d.createElement(Qt,{defaultActiveKey:"3"},d.createElement(Ere,{header:"PromqlEditor",key:"1"},d.createElement(St,{style:{marginBottom:20}},d.createElement("p",null,"PromqlEditor 的自动闭合及联想功能不支持动态切换集群，xCluster变化后自己销毁并重新初始化组件"),d.createElement(xre,{style:{width:"100%"},xCluster:e}))),d.createElement(Ere,{header:"G2PieChart",key:"2"},d.createElement(St,null,d.createElement(no,null))),d.createElement(Ere,{header:"Honeycomb",key:"3"},d.createElement(St,null,d.createElement("div",{style:{height:500,width:"100%"}})))))}function Cre(e){return t=>`/api/n9e/busi-group/${t}${e}`}const Tre={tasktpls:Cre("/task-tpls"),tasktpl:Cre("/task-tpl"),tasks:Cre("/tasks"),task:Cre("/task"),perms:Cre("/builtin-perms")};var wre={},Sre={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0}(Sre);var kre={};Object.defineProperty(kre,"__esModule",{value:!0}),kre.default=void 0;kre.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};var _re={},Are={exports:{}};!function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(Are);var Ore={};Object.defineProperty(Ore,"__esModule",{value:!0}),Ore.default=void 0;var Ire={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};Ore.default=Ire;var Mre={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};e.default=t}(Mre),function(e){var t=Sre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Are.exports),r=t(Ore),i=t(Mre),a={lang:(0,n.default)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},r.default),timePickerLocale:(0,n.default)({},i.default)};a.lang.ok="确定";var o=a;e.default=o}(_re);var Nre={};!function(e){var t=Sre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(_re).default;e.default=n}(Nre),function(e){var t=Sre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(kre),r=t(_re),i=t(Mre),a=t(Nre),o="${label}不是一个有效的${type}",s={locale:"zh-cn",Pagination:n.default,DatePicker:r.default,TimePicker:i.default,Calendar:a.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};e.default=s}(wre);var Fre=pe(wre),Lre={},Pre={},Rre={};Object.defineProperty(Rre,"__esModule",{value:!0}),Rre.default=void 0;Rre.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var Dre={},Bre={};Object.defineProperty(Bre,"__esModule",{value:!0}),Bre.default=void 0;var zre={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};Bre.default=zre;var Hre={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};e.default=t}(Hre),function(e){var t=Sre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Are.exports),r=t(Bre),i=t(Hre),a={lang:(0,n.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},r.default),timePickerLocale:(0,n.default)({},i.default)};e.default=a}(Dre);var jre={};!function(e){var t=Sre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Dre).default;e.default=n}(jre),function(e){var t=Sre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Rre),r=t(Dre),i=t(Hre),a=t(jre),o="${label} is not a valid ${type}",s={locale:"en",Pagination:n.default,DatePicker:r.default,TimePicker:i.default,Calendar:a.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e.default=s}(Pre),function(e){var t=Sre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Pre).default;e.default=n}(Lre);var Gre=pe(Lre);function $re(e){return function(t){const n=document.createElement("div");function r(){K.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),K.render(d.createElement(Xt,{locale:"en"===t.language?Gre:Fre},d.createElement(e,s({},i))),n),{destroy:r}}}const Yre=Et.Item,Ure=e=>{const{t:t}=Fr(),[n]=Et.useForm(),{visible:r}=e;return d.createElement(Ot,{title:t("tpl.tag.bind.title"),visible:r,onOk:()=>{const{selectedIds:r}=e;n.validateFields().then((n=>{ii(`${Tre.tasktpls(e.busiId)}/tags`,{method:"POST",body:JSON.stringify({tags:n.tags,ids:r})}).then((()=>{gt.success(t("tpl.tag.bind.success")),e.onOk(),e.destroy()}))}))},onCancel:()=>{e.destroy()}},d.createElement(Et,{form:n},d.createElement(Yre,{label:t("tpl.tag.bind.field"),required:!0,name:"tags",rules:[{required:!0,message:"请选择！"}]},d.createElement(It,{mode:"tags",open:!1}))))};Ure.defaultProps={visible:!0,onOk:S.noop,destroy:S.noop};var Vre=$re(Ure);const Wre=Et.Item,{Option:Xre}=It,qre=e=>{const{t:t}=Fr(),[n]=Et.useForm(),{visible:r,uniqueTags:i}=e;return d.createElement(Ot,{title:t("tpl.tag.unbind.title"),visible:r,onOk:()=>{const{selectedIds:r}=e;n.validateFields().then((n=>{ii(`${Tre.tasktpl(e.busiId)}s/tags`,{method:"DELETE",body:JSON.stringify({tags:n.tags,ids:r})}).then((()=>{gt.success(t("tpl.tag.unbind.success")),e.onOk(),e.destroy()}))}))},onCancel:()=>{e.destroy()}},d.createElement(Et,{form:n},d.createElement(Wre,{label:t("tpl.tag.unbind.field"),required:!0,name:"tags",rules:[{required:!0}]},d.createElement(It,{mode:"tags"},S.map(i,(e=>d.createElement(Xre,{key:e,value:e},e)))))))};qre.defaultProps={visible:!0,onOk:S.noop,destroy:S.noop};var Kre=$re(qre);const Qre=e=>{const{t:t,i18n:n}=Fr(),r=f.exports.useRef(null),[i,a]=f.exports.useState(""),{curBusiItem:o}=ni((e=>e.common)),c=o.id,[u,h]=f.exports.useState([]),{tableProps:p,refresh:m}=Ze((e=>function(e,t,n){return t?ii(`${Tre.tasktpls(t)}?limit=${e.pageSize}&p=${e.current}&query=${n}`).then((e=>({list:e.dat.list,total:e.dat.total}))):Promise.resolve({list:[],total:0})}(e,c,i)),{refreshDeps:[c,i]});const g=[{title:"ID",dataIndex:"id"},{title:t("tpl.title"),dataIndex:"title",render:(e,t)=>d.createElement(B,{to:{pathname:`/job-tpls/${t.id}/detail`}},e)},{title:t("tpl.tags"),dataIndex:"tags",render:e=>S.map(e,(e=>d.createElement(At,{color:"blue",key:e,onClick:()=>function(e){var t;if(!S.includes(i,e)){const n=i?`${i} ${e}`:e;a(n),null==(t=r.current)||t.setValue(n)}}(e)},e)))},{title:t("tpl.creator"),dataIndex:"create_by",width:100},{title:t("tpl.last_updated"),dataIndex:"update_at",width:160,render:e=>O.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:t("table.operations"),width:220,render:(e,n)=>d.createElement("span",null,d.createElement(B,{to:{pathname:"/job-tpls/add/task",search:`tpl=${n.id}`}},t("task.create")),d.createElement(Mt,{type:"vertical"}),d.createElement(B,{to:{pathname:`/job-tpls/${n.id}/modify`}},t("table.modify")),d.createElement(Mt,{type:"vertical"}),d.createElement(B,{to:{pathname:`/job-tpls/${n.id}/clone`}},t("table.clone")),d.createElement(Mt,{type:"vertical"}),d.createElement(Zt,{title:d.createElement("div",{style:{width:100}},t("table.delete.sure")),onConfirm:()=>{var e;e=n.id,c&&ii(`${Tre.tasktpl(c)}/${e}`,{method:"DELETE"}).then((()=>{gt.success(t("msg.delete.success")),m()}))}},d.createElement("a",{style:{color:"red"}},t("table.delete"))))}];return d.createElement(Wi,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(b,null),t("自愈脚本"))},d.createElement("div",{style:{display:"flex"}},d.createElement(ya,null),c?d.createElement("div",{style:{flex:1,padding:20}},d.createElement(St,null,d.createElement(kt,{span:14,className:"mb10"},d.createElement(bt,{style:{width:200},ref:r,prefix:d.createElement(N,null),defaultValue:i,onPressEnter:e=>{a(e.currentTarget.value)},placeholder:"搜索标题、标签"})),d.createElement(kt,{span:10,className:"textAlignRight"},d.createElement(B,{to:{pathname:"/job-tpls/add"}},d.createElement(yt,{icon:d.createElement(Ce,null),style:{marginRight:10},type:"primary",ghost:!0},t("tpl.create"))),d.createElement(Tt,{overlay:d.createElement(vt,null,d.createElement(vt.Item,null,d.createElement(yt,{type:"link",disabled:0===u.length,onClick:()=>{S.isEmpty(u)||Vre({language:n.language,selectedIds:u,busiId:c,onOk:()=>{m()}})}},t("tpl.tag.bind"))),d.createElement(vt.Item,null,d.createElement(yt,{type:"link",disabled:0===u.length,onClick:()=>{!function(){if(!S.isEmpty(u)){let e=[];S.each(p.dataSource,(t=>{const n=t.tags;e=S.union(e,n)})),Kre({language:n.language,selectedIds:u,uniqueTags:e,busiId:c,onOk:()=>{m()}})}}()}},t("tpl.tag.unbind"))))},d.createElement(yt,{icon:d.createElement(M,null)},t("table.batch.operations"))))),d.createElement(Nt,l(s({rowKey:"id",columns:g},p),{rowSelection:{selectedRowKeys:u,onChange:e=>{h(e)}},pagination:l(s({},p.pagination),{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==n.language?`Total ${e} items`:`共 ${e} 条`})}))):d.createElement(xa,{text:"自愈脚本"})))};!function(e,t){ace.define("ace/mode/sh_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,a=t.reservedKeywords="!|{|}|case|do|done|elif|else|esac|fi|for|if|in|then|until|while|&|;|export|local|read|typeset|unset|elif|select|set|function|declare|readonly",o=t.languageConstructs="[|]|alias|bg|bind|break|builtin|cd|command|compgen|complete|continue|dirs|disown|echo|enable|eval|exec|exit|fc|fg|getopts|hash|help|history|jobs|kill|let|logout|popd|printf|pushd|pwd|return|set|shift|shopt|source|suspend|test|times|trap|type|ulimit|umask|unalias|wait",s=function(){var e=this.createKeywordMapper({keyword:a,"support.function.builtin":o,"invalid.deprecated":"debugger"},"identifier");this.$rules={start:[{token:"constant",regex:/\\./},{token:["text","comment"],regex:/(^|\s)(#.*)$/},{token:"string.start",regex:'"',push:[{token:"constant.language.escape",regex:/\\(?:[$`"\\]|$)/},{include:"variables"},{token:"keyword.operator",regex:/`/},{token:"string.end",regex:'"',next:"pop"},{defaultToken:"string"}]},{token:"string",regex:"\\$'",push:[{token:"constant.language.escape",regex:/\\(?:[abeEfnrtv\\'"]|x[a-fA-F\d]{1,2}|u[a-fA-F\d]{4}([a-fA-F\d]{4})?|c.|\d{1,3})/},{token:"string",regex:"'",next:"pop"},{defaultToken:"string"}]},{regex:"<<<",token:"keyword.operator"},{stateName:"heredoc",regex:"(<<-?)(\\s*)(['\"`]?)([\\w\\-]+)(['\"`]?)",onMatch:function(e,t,n){var r="-"==e[2]?"indentedHeredoc":"heredoc",i=e.split(this.splitRegex);return n.push(r,i[4]),[{type:"constant",value:i[1]},{type:"text",value:i[2]},{type:"string",value:i[3]},{type:"support.class",value:i[4]},{type:"string",value:i[5]}]},rules:{heredoc:[{onMatch:function(e,t,n){return e===n[1]?(n.shift(),n.shift(),this.next=n[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^\t+"},{onMatch:function(e,t,n){return e===n[1]?(n.shift(),n.shift(),this.next=n[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(e,t){return"heredoc"===t[0]||"indentedHeredoc"===t[0]?t[0]:e}},{token:["keyword","text","text","text","variable"],regex:/(declare|local|readonly)(\s+)(?:(-[fixar]+)(\s+))?([a-zA-Z_][a-zA-Z0-9_]*\b)/},{token:"variable.language",regex:"(?:\\$(?:SHLVL|\\$|\\!|\\?))"},{token:"variable",regex:"(?:[a-zA-Z_][a-zA-Z0-9_]*(?==))"},{include:"variables"},{token:"support.function",regex:"(?:[a-zA-Z_][a-zA-Z0-9_]*\\s*\\(\\))"},{token:"support.function",regex:"(?:&(?:\\d+))"},{token:"string",start:"'",end:"'"},{token:"constant.numeric",regex:"(?:(?:(?:(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.))|(?:\\d+)))|(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.)))"},{token:"constant.numeric",regex:"(?:(?:[1-9]\\d*)|(?:0))\\b"},{token:e,regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|~|<|>|<=|=>|=|!=|[%&|`]"},{token:"punctuation.operator",regex:";"},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]]"},{token:"paren.rparen",regex:"[\\)\\}]",next:"pop"}],variables:[{token:"variable",regex:/(\$)(\w+)/},{token:["variable","paren.lparen"],regex:/(\$)(\()/,push:"start"},{token:["variable","paren.lparen","keyword.operator","variable","keyword.operator"],regex:/(\$)(\{)([#!]?)(\w+|[*@#?\-$!0_])(:[?+\-=]?|##?|%%?|,,?\/|\^\^?)?/,push:"start"},{token:"variable",regex:/\$[*@#?\-$!0_]/},{token:["variable","paren.lparen"],regex:/(\$)(\{)/,push:"start"}]},this.normalizeRules()};r.inherits(s,i),t.ShHighlightRules=s})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){var r=e("../../lib/oop"),i=e("../../range").Range,a=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(o,a),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var i=this._getFoldWidgetBase(e,t,n);return!i&&this.startRegionRe.test(r)?"start":i},this.getFoldWidgetRange=function(e,t,n,r){var i,a=e.getLine(n);if(this.startRegionRe.test(a))return this.getCommentRegionBlock(e,a,n);if(i=a.match(this.foldingStartMarker)){var o=i.index;if(i[1])return this.openingBracketBlock(e,i[1],n,o);var s=e.getCommentFoldRange(n,o+i[0].length,1);return s&&!s.isMultiLine()&&(r?s=this.getSectionRange(e,n):"all"!=t&&(s=null)),s}if("markbegin"!==t&&(i=a.match(this.foldingStopMarker))){o=i.index+i[0].length;return i[1]?this.closingBracketBlock(e,i[1],n,o):e.getCommentFoldRange(n,o,-1)}},this.getSectionRange=function(e,t){for(var n=e.getLine(t),r=n.search(/\S/),a=t,o=n.length,s=t+=1,l=e.getLength();++t<l;){var c=(n=e.getLine(t)).search(/\S/);if(-1!==c){if(r>c)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=a)break;if(u.isMultiLine())t=u.end.row;else if(r==c)break}s=t}}return new i(a,o,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,n){for(var r=t.search(/\s*$/),a=e.getLength(),o=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<a;){t=e.getLine(n);var c=s.exec(t);if(c&&(c[1]?l--:l++,!l))break}if(n>o)return new i(o,r,n,t.length)}}.call(o.prototype)})),ace.define("ace/mode/sh",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sh_highlight_rules","ace/range","ace/mode/folding/cstyle","ace/mode/behaviour/cstyle"],(function(e,t,n){var r=e("../lib/oop"),i=e("./text").Mode,a=e("./sh_highlight_rules").ShHighlightRules,o=e("../range").Range,s=e("./folding/cstyle").FoldMode,l=e("./behaviour/cstyle").CstyleBehaviour,c=function(){this.HighlightRules=a,this.foldingRules=new s,this.$behaviour=new l};r.inherits(c,i),function(){this.lineCommentStart="#",this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e).tokens;if(i.length&&"comment"==i[i.length-1].type)return r;"start"==e&&(t.match(/^.*[\{\(\[:]\s*$/)&&(r+=n));return r};var e={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(t,n,r){if("\r\n"!==r&&"\r"!==r&&"\n"!==r)return!1;var i=this.getTokenizer().getLineTokens(n.trim(),t).tokens;if(!i)return!1;do{var a=i.pop()}while(a&&("comment"==a.type||"text"==a.type&&a.value.match(/^\s+$/)));return!!a&&("keyword"==a.type&&e[a.value])},this.autoOutdent=function(e,t,n){n+=1;var r=this.$getIndent(t.getLine(n)),i=t.getTabString();r.slice(-i.length)==i&&t.remove(new o(n,r.length-i.length,n,r.length))},this.$id="ace/mode/sh",this.snippetFileId="ace/snippets/sh"}.call(c.prototype),t.Mode=c})),ace.require(["ace/mode/sh"],(function(t){e&&(e.exports=t)}))}({exports:{}});function Zre(e){return d.createElement(Mn,{placeholder:"Placeholder Text",style:{width:"100%"},height:e.height,mode:"sh",theme:"monokai",name:"blah2",fontSize:14,showPrintMargin:!1,showGutter:!0,readOnly:e.readOnly,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2},value:e.value,onChange:t=>{e.onChange&&e.onChange(t)}})}!function(e,t){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/monokai"],(function(t){e&&(e.exports=t)}))}({exports:{}}),Zre.defaultProps={readOnly:!1,height:"500px"};const Jre=Et.Item,{TextArea:eie}=bt,tie=e=>{const{t:t}=Fr(),[n]=Et.useForm();f.exports.useEffect((()=>{}));const{initialValues:r,type:i}=e;return d.createElement("div",{className:"job-tpl-form"},d.createElement(Et,{onFinish:t=>{e.onSubmit(l(s({},t),{hosts:S.split(t.hosts,"\n")}))},form:n,layout:"vertical"},d.createElement(Jre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Title:"),t("tpl"===i?"tpl.title.tpl.help":"tpl.title.task.help")),name:"title",initialValue:r.title,rules:[{required:!0,message:"必填项！"}]},d.createElement(bt,null)),"tpl"===i?d.createElement(Jre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Tags:"),t("tpl.tags.help")),name:"tags",initialValue:r.tags},d.createElement(It,{mode:"tags",open:!1,style:{width:"100%"}})):null,d.createElement(Jre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Account:"),t("tpl.account.help")),name:"account",initialValue:r.account,rules:[{required:!0,message:"必填项！"}]},d.createElement(bt,null)),d.createElement(Jre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Batch:"),t("tpl.batch.help")),name:"batch",initialValue:r.batch,rules:[{required:!0,message:"必填项！"}]},d.createElement(Rt,{min:0})),d.createElement(Jre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Tolerance:"),t("tpl.tolerance.help")),name:"tolerance",initialValue:r.tolerance,rules:[{required:!0,message:"必填项！"}]},d.createElement(Rt,{min:0})),d.createElement(Jre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Timeout:"),t("tpl.timeout.help")),name:"timeout",initialValue:r.timeout},d.createElement(Rt,{min:0})),d.createElement(Jre,{label:d.createElement("span",null,d.createElement("strong",null,"Pause:"),t("tpl.pause.help")),name:"pause",initialValue:r.pause},d.createElement(bt,null)),d.createElement(Jre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Host:"),t("tpl.host.help")),name:"hosts",initialValue:S.join(r.hosts,"\n"),rules:[{required:"tpl"!==i,message:"必填项！"}]},d.createElement(eie,{autoSize:{minRows:3,maxRows:8}})),d.createElement(Jre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Script:"),t("tpl.script.help")),name:"script",initialValue:r.script,rules:[{required:!0,message:"必填项！"}]},d.createElement(Zre,null)),d.createElement(Jre,{label:d.createElement("span",null,d.createElement("strong",null,"Args:"),t("tpl.args.help")),name:"args",initialValue:r.args},d.createElement(bt,null)),d.createElement(Jre,null,e.footer)))};tie.defaultProps={type:"tpl",initialValues:{title:"",batch:0,tolerance:0,timeout:30,pause:"",script:"#!/bin/bash\n# e.g.\nexport PATH=/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:~/bin\nss -tln",args:"",tags:void 0,account:"root",hosts:[],treeData:[]},onSubmit:()=>{}};var nie=Je(tie);const rie=e=>{const t=w(),{curBusiItem:n}=ni((e=>e.common)),{t:r}=Fr();return d.createElement(Wi,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(I,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Ut,{title:"创建自愈脚本"},d.createElement(nie,{onSubmit:t=>{ii(`${Tre.tasktpls(n.id)}`,{method:"POST",body:JSON.stringify(t)}).then((()=>{gt.success(r("msg.create.success")),e.history.push({pathname:"/job-tpls"})}))},footer:d.createElement("div",null,d.createElement(yt,{type:"primary",htmlType:"submit",style:{marginRight:8}},r("form.submit")))}))))},iie=e=>{const t=w(),n=S.get(e,"match.params.id"),{curBusiItem:r}=ni((e=>e.common)),{t:i}=Fr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),ii(`${Tre.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(Wi,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(I,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Ut,{title:"自愈脚本详情"},d.createElement(qt,{spinning:a},d.createElement("div",{className:"job-task-table"},d.createElement("div",{className:"ant-table ant-table-default ant-table-bordered"},d.createElement("div",{className:"ant-table-content"},d.createElement("div",{className:"ant-table-body"},d.createElement("table",null,d.createElement("colgroup",null,d.createElement("col",{style:{width:100,minWidth:100}}),d.createElement("col",null)),d.createElement("tbody",{className:"ant-table-tbody"},d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.title")),d.createElement("td",null,c.title)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("tpl.creator")),d.createElement("td",null,c.create_by)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("tpl.last_updated")),d.createElement("td",null,O.unix(c.update_at).format("YYYY-MM-DD HH:mm:ss"))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.control.params")),d.createElement("td",null,i("task.account"),"：",c.account,d.createElement(Mt,{type:"vertical"}),i("task.batch"),"：",c.batch,d.createElement(Mt,{type:"vertical"}),i("task.tolerance"),"：",c.tolerance,d.createElement(Mt,{type:"vertical"}),i("task.timeout"),"：",c.timeout)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.script")),d.createElement("td",null,d.createElement(Zre,{value:c.script,readOnly:!0,height:"200px"}))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.script.args")),d.createElement("td",null,c.args)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.pause")),d.createElement("td",null,c.pause)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.host.list")),d.createElement("td",null,S.map(c.hosts,(e=>d.createElement("div",{key:e},e))))))))))),d.createElement("div",{style:{marginTop:10}},d.createElement(B,{to:{pathname:`/job-tpls/${n}/modify`}},d.createElement(yt,{type:"primary",style:{marginRight:10}},i("tpl.modify"))),d.createElement(B,{to:{pathname:"/job-tpls/add/task",search:`tpl=${n}`}},d.createElement(yt,{type:"primary"},i("tpl.create.task"))))))))},aie=e=>{const t=w(),n=S.get(e,"match.params.id"),{curBusiItem:r}=ni((e=>e.common)),{t:i}=Fr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),ii(`${Tre.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(Wi,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(I,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Ut,{title:"修改自愈脚本"},d.createElement(qt,{spinning:a},c.title?d.createElement(nie,{onSubmit:t=>{ii(`${Tre.tasktpl(r.id)}/${n}`,{method:"PUT",body:JSON.stringify(t)}).then((()=>{gt.success(i("msg.modify.success")),e.history.push({pathname:"/job-tpls"})}))},initialValues:c,footer:d.createElement(yt,{type:"primary",htmlType:"submit"},i("form.submit"))}):null))))},oie=e=>{const t=w(),n=S.get(e,"match.params.id"),{curBusiItem:r}=ni((e=>e.common)),{t:i}=Fr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),ii(`${Tre.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(Wi,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(I,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Ut,{title:"克隆自愈脚本"},d.createElement(qt,{spinning:a},c.title?d.createElement(nie,{onSubmit:t=>{ii(`${Tre.tasktpls(r.id)}`,{method:"POST",body:JSON.stringify(t)}).then((()=>{gt.success(i("msg.create.success")),e.history.push({pathname:"/job-tpls"})}))},initialValues:c,footer:d.createElement("div",null,d.createElement(yt,{type:"primary",htmlType:"submit",style:{marginRight:8}},i("form.submit")))}):null))))};const sie=e=>{const t=w(),{t:n,i18n:r}=Fr(),[i,a]=f.exports.useState(""),[o,c]=f.exports.useState(!0),[u,h]=f.exports.useState(7),{curBusiItem:p}=ni((e=>e.common)),{tableProps:m}=Ze((e=>function(e,t,n,r,i){return t?ii(`${Tre.tasks(t)}?limit=${e.pageSize}&p=${e.current}&query=${n}&mine=${r?1:0}&days=${i}`).then((e=>({list:e.dat.list,total:e.dat.total}))):Promise.resolve({list:[],total:0})}(e,p.id,i,o,u)),{refreshDeps:[p.id,i,o,u]}),g=[{title:"ID",dataIndex:"id",width:100},{title:n("task.title"),dataIndex:"title",width:200,render:(e,t)=>d.createElement(B,{to:{pathname:`/job-tasks/${t.id}/result`}},e)},{title:n("table.operations"),width:150,render:(e,t)=>d.createElement("span",null,d.createElement(B,{to:{pathname:"/job-tasks/add",search:`task=${t.id}`}},n("task.clone")),d.createElement(Mt,{type:"vertical"}),d.createElement(B,{to:{pathname:`/job-tasks/${t.id}/detail`}},n("task.meta")))},{title:n("task.creator"),dataIndex:"create_by",width:100},{title:n("task.created"),dataIndex:"create_at",width:160,render:e=>O.unix(e).format("YYYY-MM-DD HH:mm:ss")}];return d.createElement(Wi,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(b,null),n("执行历史"))},d.createElement("div",{style:{display:"flex"}},d.createElement(ya,null),p.id?d.createElement("div",{style:{flex:1,padding:10}},d.createElement(St,null,d.createElement(kt,{span:16,className:"mb10"},d.createElement(bt,{style:{width:200,marginRight:10},prefix:d.createElement(N,null),defaultValue:i,onPressEnter:e=>{a(e.currentTarget.value)},placeholder:"搜索标题"}),d.createElement(It,{style:{marginRight:10},value:u,onChange:e=>{h(e)}},d.createElement(It.Option,{value:7},n("last.7.days")),d.createElement(It.Option,{value:15},n("last.15.days")),d.createElement(It.Option,{value:30},n("last.30.days")),d.createElement(It.Option,{value:60},n("last.60.days")),d.createElement(It.Option,{value:90},n("last.90.days"))),d.createElement(wt,{checked:o,onChange:e=>{c(e.target.checked)}},n("task.only.mine"))),d.createElement(kt,{span:8,style:{textAlign:"right"}},d.createElement(yt,{type:"primary",ghost:!0,onClick:()=>{t.push("/job-tasks/add")}},n("task.temporary.create")))),d.createElement(Nt,l(s({rowKey:"id",columns:g},m),{pagination:l(s({},m.pagination),{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==r.language?`Total ${e} items`:`共 ${e} 条`})}))):d.createElement(xa,{text:n("执行历史")})))},lie=e=>{const t=w(),n=xi.parse(S.get(e,"location.search")),{curBusiItem:r}=ni((e=>e.common)),{t:i}=Fr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState(),[h,p]=f.exports.useState("");return f.exports.useEffect((()=>{S.isPlainObject(n)&&(void 0!==n.tpl?(o(!0),ii(`${Tre.tasktpl(r.id)}/${n.tpl}`,{}).then((e=>{u(l(s({},e.dat.tpl),{hosts:e.dat.hosts}))})).finally((()=>{o(!1)}))):void 0!==n.task&&(o(!0),ii(`${Tre.task(r.id)}/${n.task}`,{}).then((e=>{u(l(s({},e.dat.meta),{hosts:S.map(e.dat.hosts,(e=>e.host))}))})).finally((()=>{o(!1)}))))}),[]),d.createElement(Wi,{hideCluster:!0,title:n.tpl?d.createElement(d.Fragment,null,d.createElement(I,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本"):d.createElement(d.Fragment,null,d.createElement(I,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{background:"none"}},d.createElement(St,{gutter:20},d.createElement(kt,{span:18},d.createElement(Ut,{title:n.tpl?"创建任务":n.task?"克隆任务":"创建临时任务"},d.createElement(qt,{spinning:a},c||!n.tpl&&!n.task?d.createElement(nie,{type:"task",initialValues:c,onSubmit:t=>{h&&ii(Tre.tasks(r.id),{method:"POST",body:JSON.stringify(l(s({},t),{action:h}))}).then((t=>{gt.success(i("msg.create.success")),e.history.push({pathname:`/job-tasks/${t.dat}/result`})}))},footer:d.createElement("div",null,d.createElement(yt,{type:"primary",htmlType:"submit",style:{marginRight:10},onClick:()=>{p("pause")}},"保存暂不执行"),d.createElement(yt,{type:"primary",htmlType:"submit",onClick:()=>{p("start")}},"保存立刻执行"))}):null))),d.createElement(kt,{span:6},d.createElement(zt,{showIcon:!0,message:"提示信息",description:"如果你的角色是管理员，则可以在任意机器执行脚本；否则，只能对有管理权限的业务组下的机器执行脚本",type:"warning"}))))))};const cie=e=>{const{t:t,i18n:n}=Fr(),r=async(r,i)=>{const{data:a}=e;let o=[];if("all"===i&&(o=S.map(a,(e=>e[r]))),S.isEmpty(o))return void gt.warning(t("host.copy.empty"));const s=S.join(o,"\n");(function(e){const t=document.createElement("textarea");t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style.left="-9999px";const n=window.pageYOffset||document.documentElement.scrollTop;let r;t.style.top=`${n}px`,t.setAttribute("readonly",""),t.value=e,document.body.appendChild(t),t.select();try{r=document.execCommand("copy")}catch(i){r=!1}return r&&document.body.removeChild(t),r})(s)?"zh"===n.language?gt.success(`复制成功${o.length}条记录`):"en"===n.language&&gt.success(`Successful copy ${o.length} items`):Ot.warning({title:t("host.copy.error"),content:d.createElement(bt.TextArea,{defaultValue:s})})},{dataIndex:i}=e;return d.createElement("span",null,"Host",d.createElement(H,{className:"pointer",style:{paddingLeft:5},onClick:()=>r(i,"all")}))};cie.defaultProps={data:[],selected:[],hasSelected:!0};const uie=e=>{const t=w(),{curBusiItem:n}=ni((e=>e.common)),{params:r}=e.match,i=r.id,{t:a,i18n:o}=Fr(),[c,u]=f.exports.useState(),[h,p]=f.exports.useState({}),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState(!1),x=()=>(y(!0),ii(`${Tre.task(n.id)}/${r.id}`).then((e=>{p(l(s({},e.dat.meta),{action:e.dat.action})),g(e.dat.hosts)})).finally((()=>{y(!1)})));f.exports.useEffect((()=>{x()}),[]);let E=S.cloneDeep(m);c&&(E=S.filter(E,(e=>S.includes(c,e.status))));const b=(e,t)=>{ii(`${Tre.task(n.id)}/${i}/host/${e}/action`,{method:"PUT",body:JSON.stringify({action:t})}).then((()=>{x()}))},C=e=>{ii(`${Tre.task(n.id)}/${i}/action`,{method:"PUT",body:JSON.stringify({action:e})}).then((()=>{x()}))},T=[{title:d.createElement(cie,{dataIndex:"host",hasSelected:!1,data:E}),dataIndex:"host"},{title:a("task.status"),dataIndex:"status",filters:(()=>{const e=S.groupBy(m,"status");return S.map(e,((e,t)=>({text:`${t} (${e.length})`,value:t})))})(),onFilter:(e,t)=>t.status===e,render:e=>"success"===e?d.createElement(At,{color:"#87d068"},e):"cancelled"===e||"ignored"===e?d.createElement(At,{color:"#ec971f"},e):"failed"===e||"killfailed"===e||"timeout"===e?d.createElement(At,{color:"#f50"},e):d.createElement(At,null,e)},{title:a("task.output"),render:(e,t)=>d.createElement("span",null,d.createElement(B,{to:`/job-task/${n.id}/output/${r.id}/${t.host}/stdout`,target:"_blank"},"stdout"),d.createElement(Mt,{type:"vertical"}),d.createElement("a",{href:`/job-task/${n.id}/output/${r.id}/${t.host}/stderr`,target:"_blank"},"stderr"))}];return h.done||T.push({title:a("table.operations"),render:(e,t)=>d.createElement("span",null,d.createElement("a",{onClick:()=>b(t.host,"ignore")},"ignore"),d.createElement(Mt,{type:"vertical"}),d.createElement("a",{onClick:()=>b(t.host,"redo")},"redo"),d.createElement(Mt,{type:"vertical"}),d.createElement("a",{onClick:()=>b(t.host,"kill")},"kill"))}),d.createElement(Wi,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(I,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10},className:"job-task-result"},d.createElement(Ut,{title:h.title,extra:d.createElement("a",{onClick:()=>{x()}},a("task.refresh"))},d.createElement(St,{style:{marginBottom:20}},d.createElement(kt,{span:18},d.createElement("div",null,d.createElement("a",{href:`/job-task/${n.id}/output/${i}/stdout`,target:"_blank"},"stdouts"),d.createElement(Mt,{type:"vertical"}),d.createElement("a",{href:`/job-task/${n.id}/output/${i}/stderr`,target:"_blank"},"stderrs"),d.createElement(Mt,{type:"vertical"}),d.createElement(B,{to:{pathname:`/job-tasks/${i}/detail`}},a("task.meta")),d.createElement(Mt,{type:"vertical"}),d.createElement(B,{to:{pathname:"/job-tasks/add",search:`task=${i}`}},a("task.clone")))),d.createElement(kt,{span:6,className:"textAlignRight"},h.done?null:d.createElement("span",null,"start"===h.action?d.createElement(yt,{className:"success-btn",onClick:()=>C("pause")},"Pause"):d.createElement(yt,{className:"success-btn",onClick:()=>C("start")},"Start"),d.createElement(yt,{className:"ml10 warning-btn",onClick:()=>C("cancel")},"Cancel"),d.createElement(yt,{className:"ml10 danger-btn",onClick:()=>C("kill")},"Kill")))),d.createElement(Nt,{rowKey:"host",columns:T,dataSource:m,loading:v,pagination:{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==o.language?`Total ${e} items`:`共 ${e} 条`},onChange:(e,t,n,r)=>{u(t.status)}}))))};const hie=e=>{const t=w(),{curBusiItem:n}=ni((e=>e.common)),{t:r}=Fr(),i=S.get(e,"match.params.id"),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{void 0!==i&&(o(!0),ii(`${Tre.task(n.id)}/${i}`).then((e=>{u(l(s({},e.dat.meta),{hosts:S.map(e.dat.hosts,(e=>e.host))}))})).finally((()=>{o(!1)})))}),[i]),d.createElement(Wi,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(I,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10}},d.createElement(Ut,{title:c.title},d.createElement(qt,{spinning:a},d.createElement("div",{className:"job-task-table"},d.createElement("div",{className:"ant-table ant-table-default ant-table-bordered"},d.createElement("div",{className:"ant-table-content"},d.createElement("div",{className:"ant-table-body"},d.createElement("table",null,d.createElement("colgroup",null,d.createElement("col",{style:{width:100,minWidth:100}}),d.createElement("col",null)),d.createElement("tbody",{className:"ant-table-tbody"},d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.title")),d.createElement("td",null,c.title)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.creator")),d.createElement("td",null,c.creator," @ ",O(c.created).format("YYYY-MM-DD HH:mm:ss"))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.control.params")),d.createElement("td",null,r("task.account"),"：",c.account,d.createElement(Mt,{type:"vertical"}),r("task.batch"),"：",c.batch,d.createElement(Mt,{type:"vertical"}),r("task.tolerance"),"：",c.tolerance,d.createElement(Mt,{type:"vertical"}),r("task.timeout"),"：",c.timeout)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.script")),d.createElement("td",null,d.createElement(Zre,{value:c.script,readOnly:!0,height:"200px"}))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.script.args")),d.createElement("td",null,c.args)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.pause")),d.createElement("td",null,c.pause)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.host.list")),d.createElement("td",null,S.map(c.hosts,(e=>d.createElement("div",{key:e},e))))))))))),d.createElement("div",{style:{marginTop:10}},d.createElement(B,{to:{pathname:"/job-tasks/add",search:`task=${i}`}},d.createElement(yt,{type:"primary"},r("task.clone.new"))),d.createElement(B,{style:{marginLeft:8},to:{pathname:"/job-tasks"}},d.createElement(yt,null,"返回")))))))};var pie="5.5.1";function die(){const[e,t]=f.exports.useState("");return f.exports.useEffect((()=>{fetch("/api/n9e/version").then((e=>e.text())).then((e=>{t(e)}))}),[]),d.createElement(Wi,{title:d.createElement(d.Fragment,null,d.createElement(T,{component:hi})," 系统版本"),hideCluster:!0},d.createElement("div",{style:{padding:10}},d.createElement("ul",{style:{padding:"20px 30px"}},d.createElement("li",null,"前端版本：",pie),d.createElement("li",null,"后端版本：",e))))}function fie(){const[e,t]=f.exports.useState(4701),[n,r]=f.exports.useState(95);return f.exports.useEffect((()=>{fetch("https://api.github.com/repos/ccfos/nightingale").then((e=>{e.json().then((e=>{t(e.stargazers_count)}))})),fetch("https://api.github.com/repos/n9e/fe-v5").then((e=>{e.json().then((e=>{r(e.stargazers_count)}))}))}),[]),d.createElement(Wi,{title:d.createElement(d.Fragment,null,d.createElement(T,{component:hi})," 联系我们"),hideCluster:!0},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{padding:20}},d.createElement("ul",{style:{paddingLeft:10,marginBottom:10}},d.createElement("li",{style:{display:"flex",height:20}},"文档地址：",d.createElement("a",{href:"https://n9e.github.io/",target:"_blank"},"https://n9e.github.io/"))),d.createElement("div",{style:{paddingLeft:10,marginBottom:16}},"欢迎大家在github上关注夜莺项目，及时获取项目更新动态，有任何问题，也欢迎提交 issue，当然，如果能直接 PR 就更好了，开源软件，就是需要大家一起参与才能有蓬勃的生命力。"),d.createElement("ul",{style:{paddingLeft:10}},d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"后端代码仓库：",d.createElement("a",{href:"https://github.com/ccfos/nightingale",target:"_blank",style:{marginRight:8}},"https://github.com/ccfos/nightingale"),d.createElement("span",{className:"github-widget"},d.createElement("a",{className:"github-icon",href:"https://github.com/ccfos/nightingale",target:"_blank"},d.createElement(et,null)," Star"),d.createElement("a",{className:"github-star",href:"https://github.com/ccfos/nightingale/stargazers",target:"_blank"},e))),d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"后端代码仓库：",d.createElement("a",{href:"https://www.gitlink.org.cn/ccfos/nightingale",target:"_blank",style:{marginRight:8}},"https://www.gitlink.org.cn/ccfos/nightingale")),d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"前端代码仓库：",d.createElement("a",{href:"https://github.com/n9e/fe-v5",target:"_blank",style:{marginRight:8}},"https://github.com/n9e/fe-v5"),d.createElement("span",{className:"github-widget"},d.createElement("a",{className:"github-icon",href:"https://github.com/n9e/fe-v5",target:"_blank"},d.createElement(et,null)," Star"),d.createElement("a",{className:"github-star",href:"https://github.com/n9e/fe-v5/stargazers",target:"_blank"},n)))),d.createElement(Jt,{style:{border:"1px solid #efefef",height:250},preview:!1,src:"/image/wx_n9e.jpg"}))))}function mie(){const{busiGroups:e,curBusiItem:t}=ni((e=>e.common)),[n,r]=f.exports.useState(),[i,a]=f.exports.useState(e),[o,s]=f.exports.useState([]),[l,c]=f.exports.useState(S.uniqueId("tableKey_")),u=f.exports.useRef({}),[h,p]=f.exports.useState(!1),m=e=>{ai(e).then((e=>{a(e.dat||[])}))},g=f.exports.useCallback(S.debounce(m,800),[]);return f.exports.useEffect((()=>{r(S.get(t,"id"))}),[t]),f.exports.useEffect((()=>{a(e)}),[JSON.stringify(e)]),f.exports.useEffect((()=>{var e;n&&(e=S.toNumber(n),ii(`/api/n9e/busi-group/${e}/dashboards?`,{method:Kr.Get})).then((e=>{s(e.dat)}))}),[n]),d.createElement("div",null,d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement(It,{allowClear:!0,showSearch:!0,style:{minWidth:120},placeholder:"业务组",dropdownClassName:"overflow-586",filterOption:!1,onSearch:g,getPopupContainer:()=>document.body,onFocus:()=>{m("")},onClear:()=>{m("")},value:n,onChange:e=>{r(e)}},i.map((e=>d.createElement(It.Option,{value:e.id,key:e.id},e.name)))),d.createElement(yt,{type:"primary",onClick:async()=>{if(n){S.forEach(o,(e=>{u.current[e.id]="migrating"}));try{const e=await function(e,t){return ii(`/api/n9e/busi-group/${e}/dashboards/export`,{method:Kr.Post,data:{ids:t}}).then((e=>e.dat))}(n,S.map(o,"id"));for(const t of e){const e=S.get(S.find(o,{name:t.name}),"id");await xo(e,Dc(t)),u.current[e]="migrated",c(S.uniqueId("tableKey_"))}p(!0)}catch(e){console.error(e)}}},disabled:h},"大盘迁移")),d.createElement(Nt,{key:l,rowKey:"id",pagination:!1,dataSource:o,columns:[{title:"大盘名称",dataIndex:"name",key:"name"},{title:"更新时间",dataIndex:"update_at",key:"update_at",render:e=>O.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:"发布人",dataIndex:"update_by",key:"update_by"},{title:"状态",render:e=>u.current[e.id]}]}))}const{TabPane:gie}=Bt;function vie(){return d.createElement(Wi,{title:d.createElement(d.Fragment,null,d.createElement(tt,null)," 管理员迁移"),hideCluster:!0},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{padding:20}},d.createElement(Bt,{defaultActiveKey:"boards"},d.createElement(gie,{tab:"大盘迁移",key:"boards"},d.createElement(mie,null))))))}let yie=li().reduce(((e,t)=>e.concat(t.routes)),[]);function xie(e){return d.createElement(rt,{path:e.path,render:t=>d.createElement(e.component,l(s({},t),{routes:e.routes}))})}function Eie(){let{profile:e}=ni((e=>e.account));const t=v(),n=Vr();return e.id||"/login"==t.pathname||t.pathname.startsWith("/callback")||(n({type:"common/getClusters"}),t.pathname.startsWith("/chart/")||t.pathname.startsWith("/alert-cur-events/")||t.pathname.startsWith("/alert-his-events/")||t.pathname.startsWith("/callback")||(n({type:"account/getProfile"}),n({type:"common/getBusiGroups"}))),d.createElement("div",{className:"content"},d.createElement(nt,null,d.createElement(rt,{path:"/demo",component:bre}),d.createElement(rt,{path:"/login",component:yi,exact:!0}),d.createElement(rt,{path:"/callback",component:Ai,exact:!0}),d.createElement(rt,{path:"/metric/explorer",component:lte,exact:!0}),d.createElement(rt,{path:"/object/explorer",component:Mte,exact:!0}),d.createElement(rt,{path:"/busi-groups",component:Xee}),d.createElement(rt,{path:"/users",component:Vee}),d.createElement(rt,{path:"/user-groups",component:Yee}),d.createElement(rt,{path:"/account/profile/:tab",component:po}),d.createElement(rt,{path:"/dashboard/:id",exact:!0,component:kee}),d.createElement(rt,{path:"/dashboards",component:Jc}),d.createElement(rt,{path:"/chart/:ids",component:Q0}),d.createElement(rt,{path:"/indicator",component:Pte}),d.createElement(rt,{exact:!0,path:"/alert-rules/add/:group_id",component:Yte}),d.createElement(rt,{exact:!0,path:"/alert-rules/edit/:id",component:Ute}),d.createElement(rt,{exact:!0,path:"/alert-rules/:id?",component:so}),d.createElement(rt,{exact:!0,path:"/alert-rules/brain/:id",component:Kte}),d.createElement(rt,{exact:!0,path:"/alert-mutes",component:Zte}),d.createElement(rt,{exact:!0,path:"/alert-mutes/add/:from?",component:ine}),d.createElement(rt,{exact:!0,path:"/alert-mutes/edit/:id",component:ane}),d.createElement(rt,{exact:!0,path:"/alert-subscribes",component:lne}),d.createElement(rt,{exact:!0,path:"/alert-subscribes/add",component:mne}),d.createElement(rt,{exact:!0,path:"/alert-subscribes/edit/:id",component:gne}),d.createElement(rt,{exact:!0,path:"/alert-cur-events",component:qne}),d.createElement(rt,{exact:!0,path:"/alert-his-events",component:ere}),d.createElement(rt,{exact:!0,path:"/alert-cur-events/:eventId",component:Jne}),d.createElement(rt,{exact:!0,path:"/alert-his-events/:eventId",component:Jne}),d.createElement(rt,{exact:!0,path:"/targets",component:gre}),d.createElement(rt,{exact:!0,path:"/targets-map",component:yre}),d.createElement(rt,{exact:!0,path:"/job-tpls",component:Qre}),d.createElement(rt,{exact:!0,path:"/job-tpls/add",component:rie}),d.createElement(rt,{exact:!0,path:"/job-tpls/add/task",component:lie}),d.createElement(rt,{exact:!0,path:"/job-tpls/:id/detail",component:iie}),d.createElement(rt,{exact:!0,path:"/job-tpls/:id/modify",component:aie}),d.createElement(rt,{exact:!0,path:"/job-tpls/:id/clone",component:oie}),d.createElement(rt,{exact:!0,path:"/job-tasks",component:sie}),d.createElement(rt,{exact:!0,path:"/job-tasks/add",component:lie}),d.createElement(rt,{exact:!0,path:"/job-tasks/:id/result",component:uie}),d.createElement(rt,{exact:!0,path:"/job-tasks/:id/detail",component:hie}),d.createElement(rt,{exact:!0,path:"/help/version",component:die}),d.createElement(rt,{exact:!0,path:"/help/contact",component:fie}),d.createElement(rt,{exact:!0,path:"/help/migrate",component:vie}),yie.map(((e,t)=>d.createElement(xie,s({key:t},e)))),d.createElement(rt,{path:"/",exact:!0},d.createElement(it,{to:"/metric/explorer"})),d.createElement(rt,{path:"/404",component:vi}),d.createElement(rt,{path:"*",component:vi})))}function bie(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Cie="function"==typeof Symbol&&Symbol.observable||"@@observable",Tie=function(){return Math.random().toString(36).substring(7).split("").join(".")},wie={INIT:"@@redux/INIT"+Tie(),REPLACE:"@@redux/REPLACE"+Tie(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Tie()}};function Sie(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function kie(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(bie(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(bie(1));return n(kie)(e,t)}if("function"!=typeof e)throw new Error(bie(2));var i=e,a=t,o=[],s=o,l=!1;function c(){s===o&&(s=o.slice())}function u(){if(l)throw new Error(bie(3));return a}function h(e){if("function"!=typeof e)throw new Error(bie(4));if(l)throw new Error(bie(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(bie(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function p(e){if(!Sie(e))throw new Error(bie(7));if(void 0===e.type)throw new Error(bie(8));if(l)throw new Error(bie(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!=typeof e)throw new Error(bie(10));i=e,p({type:wie.REPLACE})}function f(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(bie(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Cie]=function(){return this},e}return p({type:wie.INIT}),(r={dispatch:p,subscribe:h,getState:u,replaceReducer:d})[Cie]=f,r}function _ie(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:wie.INIT}))throw new Error(bie(12));if(void 0===n(void 0,{type:wie.PROBE_UNKNOWN_ACTION()}))throw new Error(bie(13))}))}(n)}catch(eh){a=eh}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var l=o[s],c=n[l],u=e[l],h=c(u,t);if(void 0===h)throw t&&t.type,new Error(bie(14));i[l]=h,r=r||h!==u}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Aie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var Oie=function(e){return"@@redux-saga/"+e},Iie=Oie("CANCEL_PROMISE"),Mie=Oie("CHANNEL_END"),Nie=Oie("IO"),Fie=Oie("MATCH"),Lie=Oie("MULTICAST"),Pie=Oie("SAGA_ACTION"),Rie=Oie("SELF_CANCELLATION"),Die=Oie("TASK"),Bie=Oie("TASK_CANCEL"),zie=Oie("TERMINATE"),Hie=Oie("LOCATION"),jie=function(e){return null==e},Gie=function(e){return null!=e},$ie=function(e){return"function"==typeof e},Yie=function(e){return"string"==typeof e},Uie=Array.isArray,Vie=function(e){return e&&$ie(e.then)},Wie=function(e){return e&&$ie(e.next)&&$ie(e.throw)},Xie=function e(t){return t&&(Yie(t)||Qie(t)||$ie(t)||Uie(t)&&t.every(e))},qie=function(e){return e&&$ie(e.take)&&$ie(e.close)},Kie=function(e){return $ie(e)&&e.hasOwnProperty("toString")},Qie=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};function Zie(e,t){var n;void 0===t&&(t=!0);var r=new Promise((function(r){n=setTimeout(r,e,t)}));return r[Iie]=function(){clearTimeout(n)},r}var Jie=function(e){return function(){return e}}(!0),eae=function(){},tae=function(e){return e},nae=function(e,t){ot(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function rae(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var iae=function(e){throw e},aae=function(e){return{value:e,done:!0}};function oae(e,t,n){void 0===t&&(t=iae),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:aae,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function sae(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var lae=function(e){return Array.apply(null,new Array(e))},cae=function(e){return function(t){return e(Object.defineProperty(t,Pie,{value:!0}))}},uae=function(e){return e===zie},hae=function(e){return e===Bie},pae=function(e){return uae(e)||hae(e)};function dae(e,t){var n,r=Object.keys(e),i=r.length,a=0,o=Uie(e)?lae(i):{},s={};return r.forEach((function(e){var r=function(r,s){n||(s||pae(r)?(t.cancel(),t(r,s)):(o[e]=r,++a===i&&(n=!0,t(o))))};r.cancel=eae,s[e]=r})),t.cancel=function(){n||(n=!0,r.forEach((function(e){return s[e].cancel()})))},s}function fae(e){return{name:e.name||"anonymous",location:mae(e)}}function mae(e){return e[Hie]}function gae(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,a=0,o=function(t){n[i]=t,i=(i+1)%e,r++},s=function(){if(0!=r){var t=n[a];return n[a]=null,r--,a=(a+1)%e,t}},l=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var c;if(r<e)o(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=s,a=i=(i+1)%e;break;case 4:c=2*e,n=l(),r=n.length,i=n.length,a=0,n.length=c,e=c,o(s)}},take:s,flush:l}}var vae=function(e){return gae(e,3)},yae=Object.freeze({__proto__:null,TAKE:"TAKE",PUT:"PUT",ALL:"ALL",RACE:"RACE",CALL:"CALL",CPS:"CPS",FORK:"FORK",JOIN:"JOIN",CANCEL:"CANCEL",SELECT:"SELECT",ACTION_CHANNEL:"ACTION_CHANNEL",CANCELLED:"CANCELLED",FLUSH:"FLUSH",GET_CONTEXT:"GET_CONTEXT",SET_CONTEXT:"SET_CONTEXT"}),xae=function(e,t){var n;return(n={})[Nie]=!0,n.combinator=!1,n.type=e,n.payload=t,n},Eae=function(e){return xae("FORK",ot({},e.payload,{detached:!0}))};function bae(e,t){return void 0===e&&(e="*"),Xie(e)?xae("TAKE",{pattern:e}):qie(n=e)&&n[Lie]&&Gie(t)&&Xie(t)?xae("TAKE",{channel:e,pattern:t}):qie(e)?xae("TAKE",{channel:e}):void 0;var n}function Cae(e,t){return jie(t)&&(t=e,e=void 0),xae("PUT",{channel:e,action:t})}function Tae(e){var t=xae("RACE",e);return t.combinator=!0,t}function wae(e,t){var n,r=null;return $ie(e)?n=e:(Uie(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&Yie(n)&&$ie(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function Sae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xae("CALL",wae(e,n))}function kae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xae("FORK",wae(e,n))}function _ae(e){return void 0===e&&(e=Rie),xae("CANCEL",e)}function Aae(e,t){return xae("ACTION_CHANNEL",{pattern:e,buffer:t})}var Oae=Sae.bind(null,Zie);var Iae=[],Mae=0;function Nae(e){try{Pae(),e()}finally{Rae()}}function Fae(e){Iae.push(e),Mae||(Pae(),Dae())}function Lae(e){try{return Pae(),e()}finally{Dae()}}function Pae(){Mae++}function Rae(){Mae--}function Dae(){var e;for(Rae();!Mae&&void 0!==(e=Iae.shift());)Nae(e)}var Bae=function(e){return function(t){return e.some((function(e){return $ae(e)(t)}))}},zae=function(e){return function(t){return e(t)}},Hae=function(e){return function(t){return t.type===String(e)}},jae=function(e){return function(t){return t.type===e}},Gae=function(){return Jie};function $ae(e){var t="*"===e?Gae:Yie(e)?Hae:Uie(e)?Bae:Kie(e)?Hae:$ie(e)?zae:Qie(e)?jae:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var Yae={type:Mie},Uae=function(e){return e&&e.type===Mie};function Vae(e){var t;void 0===e&&(e=gae(t,4));var n=!1,r=[];return{take:function(t){n&&e.isEmpty()?t(Yae):e.isEmpty()?(r.push(t),t.cancel=function(){rae(r,t)}):t(e.take())},put:function(t){if(!n){if(0===r.length)return e.put(t);r.shift()(t)}},flush:function(t){n&&e.isEmpty()?t(Yae):t(e.flush())},close:function(){if(!n){n=!0;var e=r;r=[];for(var t=0,i=e.length;t<i;t++){(0,e[t])(Yae)}}}}}function Wae(){var e,t,n,r,i,a,o=(t=!1,r=n=[],i=function(){r===n&&(r=n.slice())},a=function(){t=!0;var e=n=r;r=[],e.forEach((function(e){e(Yae)}))},(e={})[Lie]=!0,e.put=function(e){if(!t)if(Uae(e))a();else for(var i=n=r,o=0,s=i.length;o<s;o++){var l=i[o];l[Fie](e)&&(l.cancel(),l(e))}},e.take=function(e,n){var a,o;void 0===n&&(n=Gae),t?e(Yae):(e[Fie]=n,i(),r.push(e),e.cancel=(a=function(){i(),rae(r,e)},o=!1,function(){o||(o=!0,a())}))},e.close=a,e),s=o.put;return o.put=function(e){e[Pie]?s(e):Fae((function(){s(e)}))},o}function Xae(e,t){var n=e[Iie];$ie(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var qae,Kae=0,Qae=function(){return++Kae};function Zae(e){e.isRunning()&&e.cancel()}var Jae=((qae={}).TAKE=function(e,t,n){var r=t.channel,i=void 0===r?e.channel:r,a=t.pattern,o=t.maybe,s=function(e){e instanceof Error?n(e,!0):!Uae(e)||o?n(e):n(zie)};try{i.take(s,Gie(a)?$ae(a):null)}catch(l){return void n(l,!0)}n.cancel=s.cancel},qae.PUT=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;Fae((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(o){return void n(o,!0)}a&&Vie(t)?Xae(t,n):n(t)}))},qae.ALL=function(e,t,n,r){var i=r.digestEffect,a=Kae,o=Object.keys(t);if(0!==o.length){var s=dae(t,n);o.forEach((function(e){i(t[e],a,s[e],e)}))}else n(Uie(t)?[]:{})},qae.RACE=function(e,t,n,r){var i=r.digestEffect,a=Kae,o=Object.keys(t),s=Uie(t)?lae(o.length):{},l={},c=!1;o.forEach((function(e){var t=function(t,r){c||(r||pae(t)?(n.cancel(),n(t,r)):(n.cancel(),c=!0,s[e]=t,n(s)))};t.cancel=eae,l[e]=t})),n.cancel=function(){c||(c=!0,o.forEach((function(e){return l[e].cancel()})))},o.forEach((function(e){c||i(t[e],a,l[e],e)}))},qae.CALL=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,s=r.task;try{var l=a.apply(i,o);if(Vie(l))return void Xae(l,n);if(Wie(l))return void soe(e,l,s.context,Kae,fae(a),!1,n);n(l)}catch(c){n(c,!0)}},qae.CPS=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var o=function(e,t){jie(e)?n(t):n(e,!0)};i.apply(r,a.concat(o)),o.cancel&&(n.cancel=o.cancel)}catch(s){n(s,!0)}},qae.FORK=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,s=t.detached,l=r.task,c=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if(Wie(i))return i;var a=!1;return oae((function(e){return a?{value:e,done:!0}:(a=!0,{value:i,done:!Vie(i)})}))}catch(o){return oae((function(){throw o}))}}({context:i,fn:a,args:o}),u=function(e,t){return e.isSagaIterator?{name:e.meta.name}:fae(t)}(c,a);Lae((function(){var t=soe(e,c,l.context,Kae,u,s,void 0);s?n(t):t.isRunning()?(l.queue.addTask(t),n(t)):t.isAborted()?l.queue.abort(t.error()):n(t)}))},qae.JOIN=function(e,t,n,r){var i=r.task,a=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&rae(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(Uie(t)){if(0===t.length)return void n([]);var o=dae(t,n);t.forEach((function(e,t){a(e,o[t])}))}else a(t,n)},qae.CANCEL=function(e,t,n,r){var i=r.task;t===Rie?Zae(i):Uie(t)?t.forEach(Zae):Zae(t),n()},qae.SELECT=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(a){n(a,!0)}},qae.ACTION_CHANNEL=function(e,t,n){var r=t.pattern,i=Vae(t.buffer),a=$ae(r),o=function t(n){Uae(n)||e.channel.take(t,a),i.put(n)},s=i.close;i.close=function(){o.cancel(),s()},e.channel.take(o,a),n(i)},qae.CANCELLED=function(e,t,n,r){n(r.task.isCancelled())},qae.FLUSH=function(e,t,n){t.flush(n)},qae.GET_CONTEXT=function(e,t,n,r){n(r.task.context[t])},qae.SET_CONTEXT=function(e,t,n,r){var i=r.task;nae(i.context,t),n()},qae);function eoe(e,t){return e+"?"+t}function toe(e){var t=e.name,n=e.location;return n?t+"  "+eoe(n.fileName,n.lineNumber):t}var noe=null,roe=[],ioe=function(){noe=null,roe.length=0},aoe=function(){var e,t,n,r,i,a,o,s=roe[0],l=roe.slice(1),c=s.crashedEffect?(e=s.crashedEffect,(t=mae(e))?t.code+"  "+eoe(t.fileName,t.lineNumber):""):null;return["The above error occurred in task "+toe(s.meta)+(c?" \n when executing effect "+c:"")].concat(l.map((function(e){return"    created by "+toe(e.meta)})),[(n=roe,r=function(e){return e.cancelledTasks},i=n,o=(a=[]).concat.apply(a,i.map(r)),o.length?["Tasks cancelled due to error:"].concat(o).join("\n"):"")]).join("\n")};function ooe(e,t,n,r,i,a,o){var s;void 0===o&&(o=eae);var l,c,u=0,h=null,p=[],d=Object.create(n),f=function(e,t,n){var r,i=[],a=!1;function o(e){t(),l(),n(e,!0)}function s(t){i.push(t),t.cont=function(s,l){a||(rae(i,t),t.cont=eae,l?o(s):(t===e&&(r=s),i.length||(a=!0,n(r))))}}function l(){a||(a=!0,i.forEach((function(e){e.cont=eae,e.cancel()})),i=[])}return s(e),{addTask:s,cancelAll:l,abort:o,getTasks:function(){return i}}}(t,(function(){p.push.apply(p,f.getTasks().map((function(e){return e.meta.name})))}),m);function m(t,n){if(n){if(u=2,(a={meta:i,cancelledTasks:p}).crashedEffect=noe,roe.push(a),g.isRoot){var r=aoe();ioe(),e.onError(t,{sagaStack:r})}c=t,h&&h.reject(t)}else t===Bie?u=1:1!==u&&(u=3),l=t,h&&h.resolve(t);var a;g.cont(t,n),g.joiners.forEach((function(e){e.cb(t,n)})),g.joiners=null}var g=((s={})[Die]=!0,s.id=r,s.meta=i,s.isRoot=a,s.context=d,s.joiners=[],s.queue=f,s.cancel=function(){0===u&&(u=1,f.cancelAll(),m(Bie,!1))},s.cont=o,s.end=m,s.setContext=function(e){nae(d,e)},s.toPromise=function(){return h||((e={}).promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),h=e,2===u?h.reject(c):0!==u&&h.resolve(l)),h.promise;var e},s.isRunning=function(){return 0===u},s.isCancelled=function(){return 1===u||0===u&&1===t.status},s.isAborted=function(){return 2===u},s.result=function(){return l},s.error=function(){return c},s);return g}function soe(e,t,n,r,i,a,o){var s=e.finalizeRunEffect((function(t,n,r){if(Vie(t))Xae(t,r);else if(Wie(t))soe(e,t,c.context,n,i,!1,r);else if(t&&t[Nie]){(0,Jae[t.type])(e,t.payload,r,u)}else r(t)}));h.cancel=eae;var l={meta:i,cancel:function(){0===l.status&&(l.status=1,h(Bie))},status:0},c=ooe(e,l,n,r,i,a,o),u={task:c,digestEffect:p};return o&&(o.cancel=c.cancel),h(),c;function h(e,n){try{var i;n?(i=t.throw(e),ioe()):hae(e)?(l.status=1,h.cancel(),i=$ie(t.return)?t.return(Bie):{done:!0,value:Bie}):i=uae(e)?$ie(t.return)?t.return():{done:!0}:t.next(e),i.done?(1!==l.status&&(l.status=3),l.cont(i.value)):p(i.value,r,h)}catch(a){if(1===l.status)throw a;l.status=2,l.cont(a,!0)}}function p(t,n,r,i){void 0===i&&(i="");var a,o=Qae();function l(n,i){a||(a=!0,r.cancel=eae,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),i&&function(e){noe=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:i,effect:t}),l.cancel=eae,r.cancel=function(){a||(a=!0,l.cancel(),l.cancel=eae,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},s(t,o,l)}}function loe(e,t){for(var n=e.channel,r=void 0===n?Wae():n,i=e.dispatch,a=e.getState,o=e.context,s=void 0===o?{}:o,l=e.sagaMonitor,c=e.effectMiddlewares,u=e.onError,h=void 0===u?sae:u,p=arguments.length,d=new Array(p>2?p-2:0),f=2;f<p;f++)d[f-2]=arguments[f];var m,g=t.apply(void 0,d),v=Qae();if(l&&(l.rootSagaStarted=l.rootSagaStarted||eae,l.effectTriggered=l.effectTriggered||eae,l.effectResolved=l.effectResolved||eae,l.effectRejected=l.effectRejected||eae,l.effectCancelled=l.effectCancelled||eae,l.actionDispatched=l.actionDispatched||eae,l.rootSagaStarted({effectId:v,saga:t,args:d})),c){var y=Aie.apply(void 0,c);m=function(e){return function(t,n,r){return y((function(t){return e(t,n,r)}))(t)}}}else m=tae;var x={channel:r,dispatch:cae(i),getState:a,sagaMonitor:l,onError:h,finalizeRunEffect:m};return Lae((function(){var e=soe(x,g,s,v,fae(t),!0,void 0);return l&&l.effectResolved(v,e),e}))}function coe(e){var t,n=void 0===e?{}:e,r=n.context,i=void 0===r?{}:r,a=n.channel,o=void 0===a?Wae():a,s=n.sagaMonitor,l=st(n,["context","channel","sagaMonitor"]);function c(e){var n=e.getState,r=e.dispatch;return t=loe.bind(null,ot({},l,{context:i,channel:o,dispatch:r,getState:n,sagaMonitor:s})),function(e){return function(t){s&&s.actionDispatched&&s.actionDispatched(t);var n=e(t);return o.put(t),n}}}return c.run=function(){return t.apply(void 0,arguments)},c.setContext=function(e){nae(i,e)},c}var uoe=function(e){return{done:!0,value:e}},hoe={};function poe(e){return qie(e)?"channel":Kie(e)?String(e):$ie(e)?e.name:String(e)}function doe(e,t,n){var r,i,a,o=t;function s(t,n){if(o===hoe)return uoe(t);if(n&&!i)throw o=hoe,n;r&&r(t);var s=n?e[i](n):e[o]();return o=s.nextState,a=s.effect,r=s.stateUpdater,i=s.errorState,o===hoe?uoe(t):a}return oae(s,(function(e){return s(null,e)}),n)}function foe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o={done:!1,value:bae(e)},s=function(e){return{done:!1,value:kae.apply(void 0,[t].concat(r,[e]))}},l=function(e){return a=e};return doe({q1:function(){return{nextState:"q2",effect:o,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(a)}}},"q1","takeEvery("+poe(e)+", "+t.name+")")}function moe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o,s={done:!1,value:bae(e)},l=function(e){return{done:!1,value:kae.apply(void 0,[t].concat(r,[e]))}},c=function(e){return{done:!1,value:_ae(e)}},u=function(e){return a=e},h=function(e){return o=e};return doe({q1:function(){return{nextState:"q2",effect:s,stateUpdater:h}},q2:function(){return a?{nextState:"q3",effect:c(a)}:{nextState:"q1",effect:l(o),stateUpdater:u}},q3:function(){return{nextState:"q1",effect:l(o),stateUpdater:u}}},"q1","takeLatest("+poe(e)+", "+t.name+")")}function goe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o={done:!1,value:bae(e)},s=function(e){return{done:!1,value:Sae.apply(void 0,[t].concat(r,[e]))}},l=function(e){return a=e};return doe({q1:function(){return{nextState:"q2",effect:o,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(a)}}},"q1","takeLeading("+poe(e)+", "+t.name+")")}function voe(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s,l={done:!1,value:Aae(t,vae(1))},c=function(){return{done:!1,value:bae(s)}},u=function(e){return{done:!1,value:kae.apply(void 0,[n].concat(i,[e]))}},h={done:!1,value:Oae(e)},p=function(e){return o=e},d=function(e){return s=e};return doe({q1:function(){return{nextState:"q2",effect:l,stateUpdater:d}},q2:function(){return{nextState:"q3",effect:c(),stateUpdater:p}},q3:function(){return{nextState:"q4",effect:u(o)}},q4:function(){return{nextState:"q2",effect:h}}},"q1","throttle("+poe(t)+", "+n.name+")")}function yoe(e,t,n){for(var r=e,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s={done:!1,value:Sae.apply(void 0,[n].concat(a))},l={done:!1,value:Oae(t)};return doe({q1:function(){return{nextState:"q2",effect:s,errorState:"q10"}},q2:function(){return{nextState:hoe}},q10:function(e){if((r-=1)<=0)throw e;return{nextState:"q1",effect:l}}},"q1","retry("+n.name+")")}function xoe(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s,l={done:!1,value:bae(t)},c={done:!1,value:Tae({action:bae(t),debounce:Oae(e)})},u=function(e){return{done:!1,value:kae.apply(void 0,[n].concat(i,[e]))}},h=function(e){return{done:!1,value:e}},p=function(e){return o=e},d=function(e){return s=e};return doe({q1:function(){return{nextState:"q2",effect:l,stateUpdater:p}},q2:function(){return{nextState:"q3",effect:c,stateUpdater:d}},q3:function(){return s.debounce?{nextState:"q1",effect:u(o)}:{nextState:"q2",effect:h(s.action),stateUpdater:p}}},"q1","debounce("+poe(t)+", "+n.name+")")}function Eoe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return kae.apply(void 0,[foe,e,t].concat(r))}var boe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",actionChannel:Aae,all:function(e){var t=xae("ALL",e);return t.combinator=!0,t},apply:function(e,t,n){return void 0===n&&(n=[]),xae("CALL",wae([e,t],n))},call:Sae,cancel:_ae,cancelled:function(){return xae("CANCELLED",{})},cps:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xae("CPS",wae(e,n))},delay:Oae,effectTypes:yae,flush:function(e){return xae("FLUSH",e)},fork:kae,getContext:function(e){return xae("GET_CONTEXT",e)},join:function(e){return xae("JOIN",e)},put:Cae,putResolve:function(){var e=Cae.apply(void 0,arguments);return e.payload.resolve=!0,e},race:Tae,select:function(e){void 0===e&&(e=tae);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xae("SELECT",{selector:e,args:n})},setContext:function(e){return xae("SET_CONTEXT",e)},spawn:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Eae(kae.apply(void 0,[e].concat(n)))},take:bae,takeMaybe:function(){var e=bae.apply(void 0,arguments);return e.payload.maybe=!0,e},debounce:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return kae.apply(void 0,[xoe,e,t,n].concat(i))},retry:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return Sae.apply(void 0,[yoe,e,t,n].concat(i))},takeEvery:Eoe,takeLatest:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return kae.apply(void 0,[moe,e,t].concat(r))},takeLeading:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return kae.apply(void 0,[goe,e,t].concat(r))},throttle:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return kae.apply(void 0,[voe,e,t,n].concat(i))}});const Coe="@@DVA_LOADING/SHOW",Toe="@@DVA_LOADING/HIDE";function woe(e){return()=>t=>n=>{const{type:r}=n;return function(t){if(!t||"string"!=typeof t)return!1;const[n]=t.split("/"),r=e._models.filter((e=>e.namespace===n))[0];if(r&&r.effects&&r.effects[t])return!0;return!1}(r)?new Promise(((e,r)=>{t(s({__dva_resolve:e,__dva_reject:r},n))})):t(n)}}const Soe=new class{constructor(e){this.hooks=e.reduce(((e,t)=>(e[t]=[],e)),{})}use(e){const{hooks:t}=this;for(let n in e)t[n].push(e[n])}get(e){return"extraReducers"===e?Object.assign({},...this.hooks[e]):this.hooks[e]}}(["onEffect","extraReducers"]),koe=new class{constructor(e){this.noop=e=>{},this._models=[],this.store={},this.plugin=e}addModel(e){const t=this.prefixResolve(e);this._models.push(t)}removeModel(){}prefixResolve(e){return e.reducers&&(e.reducers=this.prefix(e.reducers,e.namespace)),e.effects&&(e.effects=this.prefix(e.effects,e.namespace)),e}prefix(e,t){return Object.keys(e).reduce(((n,r)=>(n[t+"/"+r]=e[r],n)),{})}getReducer(){let e={};for(let n of this._models)e[n.namespace]=function(e=n.state,t){let r=n.reducers[t.type];return r?r(e,t):e};let t=this.plugin.get("extraReducers");return _ie(s(s({},e),t))}getSagas(){let e=[];const t=this;for(let n of this._models)e.push((function*(){for(const e in n.effects){const r=t.getWatcher(e,n.effects[e],n,t.plugin.get("onEffect"));yield kae(r)}}));return e}prefixType(e,t){return-1===e.indexOf("/")?t.namespace+"/"+e:e}getWatcher(e,t,n,r){const i=this,a=e=>Cae(l(s({},e),{type:this.prefixType(e.type,n)}));return function*(){yield Eoe(e,(function*(o){if(r)for(const i of r)t=i(t,l(s({},boe),{put:a}),n,e);const{__dva_resolve:c=i.noop}=o||{};try{c(yield t(o,l(s({},boe),{put:a})))}catch(u){console.error(u)}}))}}start(){let e=this.getReducer(),t=this.getSagas(),n=coe();this.store=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(bie(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Aie.apply(void 0,a)(n.dispatch),at(at({},n),{},{dispatch:r})}}}(woe(this),n)(kie)(e),t.forEach(n.run)}}(Soe);koe.plugin.use(function(){let e={effects:{}};return{onEffect:function(e,{put:t},n,r){const{namespace:i}=n;return function*(...n){try{return yield t({type:Coe,payload:{namespace:i,actionType:r}}),yield e(...n)}finally{yield t({type:Toe,payload:{namespace:i,actionType:r}})}}},extraReducers:{loading(t=e,{type:n,payload:r}){let{actionType:i}=r||{};switch(n){case Coe:return{effects:l(s({},t.effects),{[i]:!0})};case Toe:return{effects:l(s({},t.effects),{[i]:!1})};default:return t}}}}}());const _oe={namespace:"common",state:{clusters:[],curClusterItems:JSON.parse(localStorage.getItem("curClusterItems")||"[]"),busiGroups:[],curBusiItem:JSON.parse(localStorage.getItem("curBusiItem")||"{}")},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*getClusters({},{put:e,select:t}){const{curClusterItems:n}=yield t((e=>e.common)),{dat:r}=yield ii("/api/n9e/clusters",{method:Kr.Get}),i=r||[],a=n.filter((e=>i.includes(e)));yield e({type:"saveData",prop:"curClusterItems",data:a}),localStorage.setItem("curClusterItems",JSON.stringify(a)),i.includes(localStorage.getItem("curCluster"))||localStorage.removeItem("curCluster"),yield e({type:"saveData",prop:"clusters",data:i})},*getBusiGroups({query:e},{put:t,select:n}){const{curBusiItem:r}=yield n((e=>e.common)),{dat:i}=yield ai(e),a=i||[];r.id&&a.every((e=>e.id!==r.id))&&(yield t({type:"saveData",prop:"curBusiItem",data:{}}),localStorage.removeItem("curBusiItem")),yield t({type:"saveData",prop:"busiGroups",data:a})}}};var Aoe,Ooe,Ioe,Moe,Noe,Foe;(Ooe=Aoe||(Aoe={}))[Ooe.Need=1]="Need",Ooe[Ooe.UnNeed=0]="UnNeed",(Moe=Ioe||(Ioe={})).CmdLine="cmdline",Moe.Name="name",(Foe=Noe||(Noe={})).TCP="tcp",Foe.UDP="udp";const Loe=function(e,t=1){return ii("/api/n9e/classpaths",{method:Kr.Get,params:{query:e,limit:30,p:t}})},Poe=function(e){return ii(`/api/n9e/classpath/${e}/favorites`,{method:Kr.Post,data:{id:e}})},Roe=function(e){return ii(`/api/n9e/classpath/${e}/favorites`,{method:Kr.Delete,data:{id:e}})},Doe=function(e){return ii(`/api/n9e/classpath/${e}`,{method:Kr.Delete})},Boe=function(e){return ii(`/api/n9e/classpath/${e.id}`,{method:Kr.Put,data:e})},zoe=function(e){return ii(`/api/n9e/resource/${e}`,{method:Kr.Get})},Hoe={namespace:"resource",state:{tableData:[],pageNumber:1,group:{favorite:[],common:[],currentPage:1,commonTotal:0},currentGroup:null,prefix:Aoe.UnNeed,resourceData:{resourceDetail:null,resourceDetailLoading:!1}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data}),saveResourceGroupData:(e,{data:t})=>l(s({},e),{group:s(s({},e.group),t)}),saveResourceData:(e,{data:t})=>l(s({},e),{resourceData:s(s({},e.resourceData),t)})},effects:{*updatePrefix({data:e},{put:t}){yield t({type:"saveData",prop:"prefix",data:e})},*chooseGroupItem({data:e},{put:t,select:n}){const{currentGroup:r}=yield n((e=>e.resource));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentGroup",data:e})))},*getResourceItem({id:e},{call:t,put:n}){yield n({type:"saveResourceData",data:{resourceDetailLoading:!0}});const{success:r,dat:i}=yield t(zoe,e);r&&(yield n({type:"saveResourceData",data:{resourceDetail:i}})),yield n({type:"saveResourceData",data:{resourceDetailLoading:!1}})},*getGroup({sign:e,data:t=""},{put:n,select:r,call:i}){var a,o,c;const{currentGroup:u}=yield r((e=>e.resource));if("init"===e||"refresh"===e){const[r,i]=yield Promise.all([Loe("",1),ii("/api/n9e/classpaths/favorites",{method:Kr.Get})]);if(r.success){const h=(null==(a=null==i?void 0:i.dat)?void 0:a.map((e=>l(s({},e),{isFavorite:!0,isBelongIn:ei.Favorite}))))||[],p=(null==(o=null==r?void 0:r.dat)?void 0:o.list.map((e=>l(s({},e),{isFavorite:!!h.find((t=>t.id===e.id)),isBelongIn:ei.Common}))))||[],d=(null==(c=null==r?void 0:r.dat)?void 0:c.total)||0;if(yield n({type:"saveResourceGroupData",data:{favorite:h,common:p,commonTotal:d,currentPage:1}}),"init"===e&&t&&""!==t){const e=p.find((e=>e.id===Number(t)));yield n({type:"saveData",prop:"currentGroup",data:e})}else if(u){const e=p.find((e=>e.id===u.id));e?yield n({type:"saveData",prop:"currentGroup",data:e}):yield n({type:"saveData",prop:"currentGroup",data:p[0]})}else yield n({type:"saveData",prop:"currentGroup",data:p[0]})}}else if("search"===e){const{group:{favorite:e}}=yield r((e=>e.resource)),{success:a,dat:o}=yield i(Loe,t);if(a){const t=(null==o?void 0:o.total)||0,r=(null==o?void 0:o.list.map((t=>l(s({},t),{isFavorite:!!e.find((e=>e.id===t.id)),isBelongIn:ei.Common}))))||[];yield n({type:"saveResourceGroupData",data:{common:r,commonTotal:t,currentPage:1}}),(u||u.id)&&e.find((e=>e.id===u.id))&&r.find((e=>e.id===u.id))||(yield n({type:"saveData",prop:"currentGroup",data:r[0]}))}}else if("append"===e){const{group:{common:e,favorite:t,currentPage:a}}=yield r((e=>e.resource)),{success:o,dat:c}=yield i(Loe,"",a+1);if(o){const r=(null==c?void 0:c.total)||0,i=(null==c?void 0:c.list.map((e=>l(s({},e),{isFavorite:!!t.find((t=>t.id===e.id)),isBelongIn:ei.Common}))))||[];yield n({type:"saveResourceGroupData",data:{common:e.concat(i),commonTotal:r,currentPage:a+1}})}}},*changeGroupFavorite({id:e,favorType:t},{put:n,call:r}){const i=t===Zr.Add?Poe:Roe,{success:a}=yield r(i,e);a&&(yield n({type:"getGroup",sign:"refresh"}))},*deleteGroup({id:e},{call:t,put:n}){const{success:r}=yield t(Doe,e);r&&(yield n({type:"getGroup",sign:"refresh"}))},*updateGroup({id:e,data:t},{call:n,put:r}){const{success:i}=yield n(Boe,l(s({},t),{id:e}));i&&(yield r({type:"getGroup",sign:"refresh"}))}}},joe=function(e){return ii("/api/n9e/self/profile",{method:Kr.Put,data:e})},Goe=function(){return ii("/api/n9e/self/profile",{method:Kr.Get})},$oe={namespace:"account",state:{num:0,profile:{nickname:"",role:"",roles:[],username:"",email:"",phone:"",id:0,portrait:"",contacts:{}},csrfToken:""},reducers:{SET_PROFILE:(e,t)=>l(s({},e),{profile:t.profile})},effects:{*login({username:e,password:t},{put:n,call:r,select:i}){const{dat:a,err:o}=yield r(ri,e,t);yield n({type:"SET_PROFILE",profile:a.user});const{access_token:s,refresh_token:l}=a;return localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",l),yield n({type:"common/getClusters"}),yield n({type:"common/getBusiGroups"}),o},*getProfile({},{put:e,call:t,select:n}){const{dat:r,err:i}=yield t(Goe);return yield e({type:"SET_PROFILE",profile:r}),i},*updateProfile({data:e},{put:t,call:n,select:r}){const{dat:i,err:a}=yield n(joe,e);return yield t({type:"SET_PROFILE",profile:e}),a}}},Yoe={namespace:"strategy",state:{group:{favorite:[],common:[],currentPage:1,commonTotal:0},currentGroup:{id:1}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data}),saveStrategyGroupData:(e,{data:t})=>l(s({},e),{group:s(s({},e.group),t)})},effects:{*chooseGroupItem({data:e},{put:t,select:n}){const{currentGroup:r}=yield n((e=>e.strategy));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentGroup",data:e})))},*getGroup({sign:e,data:t=""},{put:n,select:r,call:i}){var a,o,c;const{currentGroup:u}=yield r((e=>e.strategy));if("init"===e||"refresh"===e){const[r,i]=yield Promise.all([Mi("",1),ii("/api/n9e/alert-rule-groups/favorites",{method:Kr.Get})]);if(r.success){const h=(null==(a=null==i?void 0:i.dat)?void 0:a.map((e=>l(s({},e),{isFavorite:!0,isBelongIn:ei.Favorite}))))||[],p=(null==(o=null==r?void 0:r.dat)?void 0:o.list.map((e=>l(s({},e),{isFavorite:!!h.find((t=>t.id===e.id)),isBelongIn:ei.Common}))))||[],d=(null==(c=null==r?void 0:r.dat)?void 0:c.total)||0;if(yield n({type:"saveStrategyGroupData",data:{favorite:h,common:p,commonTotal:d,currentPage:1}}),"init"===e&&t&&""!==t){const e=p.find((e=>e.id===Number(t)));yield n({type:"saveData",prop:"currentGroup",data:e})}else if(u){const e=p.find((e=>e.id===u.id));e?yield n({type:"saveData",prop:"currentGroup",data:e}):yield n({type:"saveData",prop:"currentGroup",data:p[0]})}else yield n({type:"saveData",prop:"currentGroup",data:p[0]})}}else if("search"===e){const{group:{favorite:e}}=yield r((e=>e.strategy)),{success:a,dat:o}=yield i(Mi,t);if(a){const t=(null==o?void 0:o.total)||0,r=(null==o?void 0:o.list.map((t=>l(s({},t),{isFavorite:!!e.find((e=>e.id===t.id)),isBelongIn:ei.Common}))))||[];yield n({type:"saveStrategyGroupData",data:{common:r,commonTotal:t,currentPage:1}}),(u||u.id)&&e.find((e=>e.id===u.id))&&r.find((e=>e.id===u.id))||(yield n({type:"saveData",prop:"currentGroup",data:r[0]}))}}else if("append"===e){const{group:{common:e,favorite:t,currentPage:a}}=yield r((e=>e.strategy)),{success:o,dat:c}=yield i(Mi,"",a+1);if(o){const r=(null==c?void 0:c.total)||0,i=(null==c?void 0:c.list.map((e=>l(s({},e),{isFavorite:!!t.find((t=>t.id===e.id)),isBelongIn:ei.Common}))))||[];yield n({type:"saveStrategyGroupData",data:{common:e.concat(i),commonTotal:r,currentPage:a+1}})}}},*changeGroupFavorite({id:e,favorType:t},{put:n,call:r}){const i=t===Zr.Add?Pi:Ri,{success:a}=yield r(i,e);a&&(yield n({type:"getGroup",sign:"refresh"}))},*deleteGroup({id:e},{call:t,put:n}){const{success:r}=yield t(Ni,e);r&&(yield n({type:"getGroup",sign:"refresh"}))},*updateGroup({id:e,data:t},{call:n,put:r}){const{success:i}=yield n(Fi,e,t);i&&(yield r({type:"getGroup",sign:"refresh"}))}}},Uoe={namespace:"shield",state:{curShieldData:{}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*setCurShieldData({data:e},{put:t}){const n=e.tags.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));yield t({type:"saveData",prop:"curShieldData",data:l(s({},e),{tags:n})})}}},Voe={namespace:"event",state:{currentEdit:null,alertings:{},severity:void 0,hourRange:{num:6,unit:"hours",description:"hours"},queryContent:"",hisSeverity:void 0,hisEventType:void 0,hisHourRange:{num:6,unit:"hours",description:"hours"},hisQueryContent:""},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*editItem({data:e},{put:t,select:n}){const{currentEdit:r}=yield n((e=>e.event));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentEdit",data:e})))},*refreshAlertings({ids:e},{put:t,call:n}){const{dat:r}=yield n(Hi,e);yield t({type:"saveData",prop:"alertings",data:r})}}},Woe=li();for(let Zoe of Woe)Zoe.module&&koe.addModel(Zoe.module);koe.addModel(_oe),koe.addModel(Hoe),koe.addModel($oe),koe.addModel(Yoe),koe.addModel(Uoe),koe.addModel(Voe),koe.start();var Xoe=koe.store;class qoe extends f.exports.Component{constructor(e){super(e),u(this,"componentDidMount",(()=>{this.fetchData(),document.title="任务输出",document.body.style.backgroundColor="#fff",document.body.style.color="#000"})),u(this,"componentWillMount",(()=>{document.body.style.backgroundColor="#f0f2f5",document.body.style.color="rgba(0, 0, 0, 0.65)"})),this.state={loading:!1,data:[]}}fetchData(){const e=S.get(this.props,"match.params.busiId"),t=S.get(this.props,"match.params.taskId"),n=S.get(this.props,"match.params.outputType");void 0!==t&&void 0!==n&&(this.setState({loading:!0}),ii(`${Tre.task(e)}/${t}/${n}`).then((e=>{this.setState({data:e.dat})})).finally((()=>{this.setState({loading:!1})})))}getOutput(){const e=S.get(this.props,"match.params.outputType"),{data:t}=this.state;let n="";return S.each(t,(t=>{n+=`${t.host}\n`,n+=`${t[e]}\n\n`})),n}render(){const{loading:e}=this.state,t=this.getOutput();return d.createElement(qt,{spinning:e},d.createElement("pre",{style:{fontSize:12,padding:10,height:"100vh"}},t))}}class Koe extends f.exports.Component{constructor(e){super(e),u(this,"componentDidMount",(()=>{this.fetchData(),document.title="任务输出",document.body.style.backgroundColor="#fff",document.body.style.color="#000"})),u(this,"componentWillMount",(()=>{document.body.style.backgroundColor="#f0f2f5",document.body.style.color="rgba(0, 0, 0, 0.65)"})),this.state={loading:!1,data:""}}fetchData(){const e=S.get(this.props,"match.params.busiId"),t=S.get(this.props,"match.params.taskId"),n=S.get(this.props,"match.params.host"),r=S.get(this.props,"match.params.outputType");void 0!==t&&void 0!==n&&(this.setState({loading:!0}),ii(`${Tre.task(e)}/${t}/host/${n}/${r}`).then((e=>{this.setState({data:e.dat})})).finally((()=>{this.setState({loading:!1})})))}getOutput(){const e=S.get(this.props,"match.params.host"),{data:t}=this.state;let n="";return n+=`${e}\n`,n+=`${t}\n\n`,n}render(){const{loading:e}=this.state,t=this.getOutput();return d.createElement(qt,{spinning:e},d.createElement("pre",{style:{fontSize:12,padding:10,height:"100vh"}},t))}}function Qoe(){const{t:e,i18n:t}=Fr();return d.createElement("div",{className:"App"},d.createElement(Xt,{locale:"en"==t.language?Gre:Fre,getPopupContainer:e=>e?e.parentNode:document.body,renderEmpty:()=>d.createElement("div",{style:{padding:20}},d.createElement("img",{src:"/image/empty.png",width:"64"}),d.createElement("div",{className:"ant-empty-description"},e("暂无数据")))},d.createElement(jr,{store:Xoe},d.createElement(lt,null,d.createElement(nt,null,d.createElement(rt,{exact:!0,path:"/job-task/:busiId/output/:taskId/:outputType",component:qoe}),d.createElement(rt,{exact:!0,path:"/job-task/:busiId/output/:taskId/:host/:outputType",component:Koe}),d.createElement(d.Fragment,null,d.createElement(gi,null),d.createElement(Eie,null)))))))}K.render(d.createElement(Qoe,null),document.getElementById("root"));
//# sourceMappingURL=index.4cb2eab5.js.map
