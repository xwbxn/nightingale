var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&o(e,n,t[n]);return e},l=(e,r)=>t(e,n(r)),c=(e,t)=>{var n={};for(var o in e)i.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&r)for(var o of r(e))t.indexOf(o)<0&&a.call(e,o)&&(n[o]=e[o]);return n},u=(e,t,n)=>(o(e,"symbol"!=typeof t?t+"":t,n),n);import{o as h,_ as p,R as d,r as f,aa as m,t as g,aq as y,ar as v,as as E,at as x,au as b,av as C,aw as S,ax as w,ay as T,az as k,aA as _,aB as O,aC as A,U as I,aD as M,K as N,S as P,Q as F,O as L,aE as R,z as D,aF as B,aG as $,ap as z,ae as H,y as j,A as G,aH as V,f as Y,aI as U,aJ as q,Y as W,a6 as X,aK as K,aL as Q,aM as Z,x as J,aN as ee,h as te,s as ne,V as re,aO as ie,aP as ae,aQ as oe,aR as se,aS as le,$ as ce,aT as ue,aU as he,aV as pe,aW as de,aX as fe,aY as me,aZ as ge,a_ as ye,a$ as ve,b0 as Ee,b1 as xe,b2 as be,b3 as Ce,v as Se,b4 as we,b5 as Te,b6 as ke,b7 as _e,b8 as Oe,b9 as Ae,ba as Ie,bb as Me,bc as Ne,bd as Pe,be as Fe,bf as Le,bg as Re,ao as De,bh as Be,bi as $e,aj as ze,bj as He,bk as je,bl as Ge,B as Ve,bm as Ye,bn as Ue,bo as qe,L as We,bp as Xe,bq as Ke,br as Qe,bs as Ze,bt as Je,bu as et,bv as tt,bw as nt,bx as rt,by as it,C as at,bz as ot,bA as st,bB as lt,bC as ct,b as ut}from"./vendor.a3803713.js";import{_ as ht,a as pt,b as dt,c as ft,d as mt,e as gt,T as yt,M as vt,f as Et,g as xt,R as bt,B as Ct,F as St,I as wt,h as Tt,D as kt,C as _t,i as Ot,j as At,k as It,l as Mt,S as Nt,m as Pt,n as Ft,o as Lt,p as Rt,P as Dt,q as Bt,r as $t,s as zt,t as Ht,u as jt,v as Gt,w as Vt,x as Yt,y as Ut,z as qt,A as Wt,E as Xt,L as Kt,G as Qt,H as Zt,J as Jt,K as en,N as tn,O as nn,Q as rn,U as an,V as on}from"./antdChunk.b30f87a0.js";import{E as sn,H as ln,t as cn,L as un,P as hn,a as pn,h as dn,b as fn,i as mn,c as gn,d as yn,e as vn,f as En,k as xn,g as bn,j as Cn,l as Sn,m as wn,n as Tn,o as kn,p as _n,q as On,r as An,s as In,u as Mn,v as Nn,w as Pn,S as Fn,N as Ln,x as Rn,y as Dn,z as Bn,A as $n,B as zn,C as Hn,D as jn,F as Gn}from"./vendor1.c84ddc33.js";import{_ as Vn}from"./vendor2.c6ea47a1.js";var Yn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return KU},get Circle(){return QU},get Ellipse(){return JU},get Image(){return tq},get Line(){return rq},get Marker(){return aq},get Path(){return fq},get Polygon(){return gq},get Polyline(){return yq},get Rect(){return vq},get Text(){return Eq}}),Un=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return Lq},get Circle(){return Rq},get Dom(){return Dq},get Ellipse(){return Bq},get Image(){return $q},get Line(){return zq},get Marker(){return Gq},get Path(){return Vq},get Polygon(){return Yq},get Polyline(){return Uq},get Rect(){return qq},get Text(){return Qq}});function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}var Wn={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Xn=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};dt(this,e),this.init(t,n)}return ht(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Wn,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,qn({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),Kn=function(){function e(){dt(this,e),this.observers={}}return ht(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var i=[].concat(this.observers[e]);i.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Qn(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Zn(e){return null==e?"":""+e}function Jn(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function er(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var a="string"!=typeof t?[].concat(t):t.split(".");a.length>1;){if(i())return{};var o=r(a.shift());!e[o]&&n&&(e[o]=new n),e=Object.prototype.hasOwnProperty.call(e,o)?e[o]:{}}return i()?{}:{obj:e,k:r(a.shift())}}function tr(e,t,n){var r=er(e,t,Object);r.obj[r.k]=n}function nr(e,t){var n=er(e,t),r=n.obj,i=n.k;if(r)return r[i]}function rr(e,t,n){var r=nr(e,n);return void 0!==r?r:nr(t,n)}function ir(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):ir(e[r],t[r],n):e[r]=t[r]);return e}function ar(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var or={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function sr(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return or[e]})):e}var lr="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function cr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,a=0;a<r.length;++a){if("string"==typeof i[r[a]]&&a+1<r.length)return;if(void 0===i[r[a]]){for(var o=2,s=r.slice(a,a+o).join(n),l=i[s];void 0===l&&r.length>a+o;)o++,l=i[s=r.slice(a,a+o).join(n)];if(void 0===l)return;if("string"==typeof l)return l;if(s&&"string"==typeof l[s])return l[s];var c=r.slice(a+o).join(n);return c?cr(l,c,n):void 0}i=i[r[a]]}return i}}var ur=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return dt(this,t),n=ft(this,mt(t).call(this)),lr&&Kn.call(gt(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return pt(t,Kn),ht(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,o=[e,t];n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split("."));var s=nr(this.data,o);return s||!a||"string"!=typeof n?s:cr(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(r=t,t=(o=e.split("."))[1]),this.addNamespaces(t),tr(this.data,o,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(o=e.split("."))[1]),this.addNamespaces(t);var s=nr(this.data,o)||{};r?ir(s,n,i):s=qn({},s,n),tr(this.data,o,s),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?qn({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(),hr={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var a=this;return e.forEach((function(e){a.processors[e]&&(t=a.processors[e].process(t,n,r,i))})),t}},pr={},dr=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dt(this,t),n=ft(this,mt(t).call(this)),lr&&Kn.call(gt(n)),Jn(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,gt(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=Xn.create("translator"),n}return pt(t,Kn),ht(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:i};var o=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),e=o.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,r){var i=this;if("object"!==p(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,o=this.extractFromKey(e[e.length-1],n),s=o.key,l=o.namespaces,c=l[l.length-1],u=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(h){var d=n.nsSeparator||this.options.nsSeparator;return c+d+s}return s}var f=this.resolve(e,n),m=f&&f.res,g=f&&f.usedKey||s,y=f&&f.exactUsedKey||s,v=Object.prototype.toString.apply(m),E=["[object Number]","[object Function]","[object RegExp]"],x=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,C="string"!=typeof m&&"boolean"!=typeof m&&"number"!=typeof m;if(b&&m&&C&&E.indexOf(v)<0&&("string"!=typeof x||"[object Array]"!==v)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,m,qn({},n,{ns:l})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(a){var S="[object Array]"===v,w=S?[]:{},T=S?y:g;for(var k in m)if(Object.prototype.hasOwnProperty.call(m,k)){var _="".concat(T).concat(a).concat(k);w[k]=this.translate(_,qn({},n,{joinArrays:!1,ns:l})),w[k]===_&&(w[k]=m[k])}m=w}}else if(b&&"string"==typeof x&&"[object Array]"===v)(m=m.join(x))&&(m=this.extendTranslation(m,e,n,r));else{var O=!1,A=!1,I=void 0!==n.count&&"string"!=typeof n.count,M=t.hasDefaultValue(n),N=I?this.pluralResolver.getSuffix(u,n.count):"",P=n["defaultValue".concat(N)]||n.defaultValue;!this.isValidLookup(m)&&M&&(O=!0,m=P),this.isValidLookup(m)||(A=!0,m=s);var F=M&&P!==m&&this.options.updateMissing;if(A||O||F){if(this.logger.log(F?"updateKey":"missingKey",u,c,s,F?P:m),a){var L=this.resolve(s,qn({},n,{keySeparator:!1}));L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var R=[],D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&D&&D[0])for(var B=0;B<D.length;B++)R.push(D[B]);else"all"===this.options.saveMissingTo?R=this.languageUtils.toResolveHierarchy(n.lng||this.language):R.push(n.lng||this.language);var $=function(e,t,r){i.options.missingKeyHandler?i.options.missingKeyHandler(e,c,t,F?r:m,F,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,c,t,F?r:m,F,n),i.emit("missingKey",e,c,t,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?R.forEach((function(e){i.pluralResolver.getSuffixes(e).forEach((function(t){$([e],s+t,n["defaultValue".concat(t)]||P)}))})):$(R,s,P))}m=this.extendTranslation(m,e,n,f,r),A&&m===s&&this.options.appendNamespaceToMissingKey&&(m="".concat(c,":").concat(s)),A&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(m))}return m}},{key:"extendTranslation",value:function(e,t,n,r,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(qn({},n,{interpolation:qn({},this.options.interpolation,n.interpolation)}));var o,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var l=e.match(this.interpolator.nestingRegexp);o=l&&l.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=qn({},this.options.interpolation.defaultVariables,c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),s){var u=e.match(this.interpolator.nestingRegexp);o<(u&&u.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i&&i[0]===r[0]&&!n.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):a.translate.apply(a,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var h=n.postProcess||this.options.postProcess,p="string"==typeof h?[h]:h;return null!=e&&p&&p.length&&!1!==n.applyPostProcessor&&(e=hr.handle(p,e,t,this.options&&this.options.postProcessPassResolved?qn({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,a,o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!o.isValidLookup(t)){var l=o.extractFromKey(e,s),c=l.key;n=c;var u=l.namespaces;o.options.fallbackNS&&(u=u.concat(o.options.fallbackNS));var h=void 0!==s.count&&"string"!=typeof s.count,p=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,d=s.lngs?s.lngs:o.languageUtils.toResolveHierarchy(s.lng||o.language,s.fallbackLng);u.forEach((function(e){o.isValidLookup(t)||(a=e,!pr["".concat(d[0],"-").concat(e)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(a)&&(pr["".concat(d[0],"-").concat(e)]=!0,o.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(n){if(!o.isValidLookup(t)){i=n;var a,l,u=c,d=[u];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(d,c,n,e,s);else h&&(a=o.pluralResolver.getSuffix(n,s.count)),h&&p&&d.push(u+a),p&&d.push(u+="".concat(o.options.contextSeparator).concat(s.context)),h&&d.push(u+=a);for(;l=d.pop();)o.isValidLookup(t)||(r=l,t=o.getResource(n,e,l,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:a}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}();function fr(e){return e.charAt(0).toUpperCase()+e.slice(1)}var mr=function(){function e(t){dt(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Xn.create("languageUtils")}return ht(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=fr(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=fr(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=fr(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],a=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):"string"==typeof e&&a(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&a(n.formatLanguageCode(e))})),i}}]),e}(),gr=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],yr={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function vr(){var e={};return gr.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:yr[t.fc]}}))})),e}var Er=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};dt(this,e),this.languageUtils=t,this.options=n,this.logger=Xn.create("pluralResolver"),this.rules=vr()}return ht(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var i=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),a=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===a?a="plural":1===a&&(a=""));var o=function(){return n.options.prepend&&a.toString()?n.options.prepend+a.toString():a.toString()};return"v1"===this.options.compatibilityJSON?1===a?"":"number"==typeof a?"_plural_".concat(a.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),xr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,e),this.logger=Xn.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return ht(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:sr,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?ar(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?ar(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?ar(t.nestingPrefix):t.nestingPrefixEscaped||ar("$t("),this.nestingSuffix=t.nestingSuffix?ar(t.nestingSuffix):t.nestingSuffixEscaped||ar(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,a,o,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(s.formatSeparator)<0){var i=rr(t,l,e);return s.alwaysFormat?s.format(i,void 0,n,qn({},r,t,{interpolationkey:e})):i}var a=e.split(s.formatSeparator),o=a.shift().trim(),c=a.join(s.formatSeparator).trim();return s.format(rr(t,l,o),c,n,qn({},r,t,{interpolationkey:o}))};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?c(s.escape(e)):c(e)}}].forEach((function(t){for(o=0;i=t.regex.exec(e);){if(void 0===(a=u(i[1].trim())))if("function"==typeof h){var n=h(e,i,r);a="string"==typeof n?n:""}else{if(p){a=i[0];continue}s.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),a=""}else"string"==typeof a||s.useRawValueToEscape||(a=Zn(a));var l=t.safeValue(a);if(e=e.replace(i[0],l),p?(t.regex.lastIndex+=l.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++o>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=qn({},a);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,o)).replace(/'/g,'"');try{o=JSON.parse(i),t&&(o=qn({},t,o))}catch(uu){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),uu),"".concat(e).concat(n).concat(i)}return delete o.defaultValue,e}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=u.shift(),l=u,c=!0}if((r=t(s.call(this,n[1].trim(),o),o))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=Zn(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),c&&(r=l.reduce((function(e,t){return i.format(e,t,a.lng,qn({},a,{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var br=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return dt(this,t),i=ft(this,mt(t).call(this)),lr&&Kn.call(gt(i)),i.backend=e,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=a,i.logger=Xn.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,a.backend,a),i}return pt(t,Kn),ht(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,a=[],o=[],s=[],l=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?o.indexOf(s)<0&&o.push(s):(i.state[s]=1,r=!1,o.indexOf(s)<0&&o.push(s),a.indexOf(s)<0&&a.push(s),l.indexOf(t)<0&&l.push(t)))})),r||s.push(e)})),(a.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:r}),{toLoad:a,pending:o,toLoadLanguages:s,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],a=r[1];t&&this.emit("failedLoading",i,a,t),n&&this.store.addResourceBundle(i,a,n),this.state[e]=t?-1:2;var o={};this.queue.forEach((function(n){var r,s,l,c,u,h;r=n.loaded,s=a,c=er(r,[i],Object),u=c.obj,h=c.k,u[h]=u[h]||[],l&&(u[h]=u[h].concat(s)),l||u[h].push(s),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){o[e]||(o[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){o[e].indexOf(t)<0&&o[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,l){s&&l&&i<5?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*a,o)}),a):o(s,l)})):o(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var a=this.queueLoad(e,t,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(function(r,o){r&&t.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(i," failed"),r),!r&&o&&t.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(i),o),t.loaded(e,r,o)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,qn({},a,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}();function Cr(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===p(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===p(e[2])||"object"===p(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function Sr(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function wr(){}var Tr=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(dt(this,t),e=ft(this,mt(t).call(this)),lr&&Kn.call(gt(e)),e.options=Sr(n),e.services={},e.logger=Xn,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),ft(e,gt(e));setTimeout((function(){e.init(n,r)}),0)}return e}return pt(t,Kn),ht(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=qn({},Cr(),this.options,Sr(t)),this.format=this.options.interpolation.format,n||(n=wr),!this.options.isClone){this.modules.logger?Xn.init(r(this.modules.logger),this.options):Xn.init(null,this.options);var i=new mr(this.options);this.store=new ur(this.options.resources,this.options);var a=this.services;a.logger=Xn,a.resourceStore=this.store,a.languageUtils=i,a.pluralResolver=new Er(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new xr(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new br(r(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(a.languageDetector=r(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=r(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new dr(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var o=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);o.length>0&&"dev"!==o[0]&&(this.options.lng=o[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var c=Qn(),u=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wr,r=n,i="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var a=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){a.indexOf(e)<0&&a.push(e)}))};if(i)o(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return o(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(a,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=Qn();return e||(e=this.languages),t||(t=this.options.ns),n||(n=wr),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&hr.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=Qn();this.emit("languageChanging",e);var i=function(i){e||i||!n.services.languageDetector||(i=[]);var a="string"==typeof i?i:n.services.languageUtils.getBestMatchFromCodes(i);a&&(n.language||(n.language=a,n.languages=n.services.languageUtils.toResolveHierarchy(a)),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(e){!function(e,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,a)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var i;if("object"!==p(r)){for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];i=n.options.overloadTranslationOptionHandler([t,r].concat(o))}else i=qn({},r);return i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns,n.t(t,i)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],i=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,o);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!o(r,e)||i&&!o(a,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=Qn();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Qn();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wr,i=qn({},this.options,n,{isClone:!0}),a=new t(i),o=["store","services","language"];return o.forEach((function(t){a[t]=e[t]})),a.services=qn({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new dr(a.services,a.options),a.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e].concat(n))})),a.init(i,r),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),t}());function kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ir,Mr={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},Nr=d.createContext();function Pr(){return Mr}var Fr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.usedNamespaces={}}var t,n,r;return t=e,(n=[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}])&&_r(t.prototype,n),r&&_r(t,r),e}();function Lr(){return Ir}var Rr={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Mr=Ar(Ar({},Mr),e)}(e.options.react),function(e){Ir=e}(e)}};function Dr(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var Br={};function $r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&Br[t[0]]||("string"==typeof t[0]&&(Br[t[0]]=new Date),Dr.apply(void 0,t))}function zr(e,t,n){e.loadNamespaces(t,(function(){if(e.isInitialized)n();else{e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),n()}))}}))}function Hr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.languages||!t.languages.length)return $r("i18n.languages were undefined or empty",t.languages),!0;var r=t.languages[0],i=!!t.options&&t.options.fallbackLng,a=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!o(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||(!t.services.backendConnector.backend||!(!o(r,e)||i&&!o(a,e))))}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ur(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.i18n,r=f.exports.useContext(Nr)||{},i=r.i18n,a=r.defaultNS,o=n||i||Lr();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Fr),!o){$r("You will need to pass in an i18next instance by using initReactI18next");var s=function(e){return Array.isArray(e)?e[e.length-1]:e},l=[s,{},!1];return l.t=s,l.i18n={},l.ready=!1,l}o.options.react&&void 0!==o.options.react.wait&&$r("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var c=Yr(Yr(Yr({},Pr()),o.options.react),t),u=c.useSuspense,h=e||a||o.options&&o.options.defaultNS;h="string"==typeof h?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(h);var p=(o.isInitialized||o.initializedStoreOnce)&&h.every((function(e){return Hr(e,o,c)}));function d(){return o.getFixedT(null,"fallback"===c.nsMode?h:h[0])}var m=f.exports.useState(d),g=Gr(m,2),y=g[0],v=g[1],E=f.exports.useRef(!0);f.exports.useEffect((function(){var e=c.bindI18n,t=c.bindI18nStore;function n(){E.current&&v(d)}return E.current=!0,p||u||zr(o,h,(function(){E.current&&v(d)})),e&&o&&o.on(e,n),t&&o&&o.store.on(t,n),function(){E.current=!1,e&&o&&e.split(" ").forEach((function(e){return o.off(e,n)})),t&&o&&t.split(" ").forEach((function(e){return o.store.off(e,n)}))}}),[o,h.join()]);var x=f.exports.useRef(!0);f.exports.useEffect((function(){E.current&&!x.current&&v(d),x.current=!1}),[o]);var b=[y,o,p];if(b.t=y,b.i18n=o,b.ready=p,p)return b;if(!p&&!u)return b;throw new Promise((function(e){zr(o,h,(function(){e()}))}))}const qr={en:{translation:{classpath:{single:"Classpath"},strategy:{create:"New",single:"Alert Rule",multiple:"Alert Rules"},personalInfo:"Profile",n9e:"DiDi Nightingale","输入有误":"Incorrect input","修改密码成功":"Changed the password successfully","旧密码":"Old password","请输入旧密码":"Enter the old password","新密码":"New password","请输入新密码":"Enter a new password","再次输入新密码":"Enter a new password again","确认修改":"Update","自定义头像需以http开头":"The custom portrait needs to start at http","自定义头像":"Custom portrait","信息保存成功":"Saved successfully","用户名":"Username","显示名":"Display name","请输入显示名":"Enter a display name","邮箱":"Email","请输入邮箱":"Enter email","手机":"Mobile","请输入手机号":"Enter mobile number","请输入":"Enter ","更多联系方式":"More contacts","联系方式不能为空":"Contact information can not be blank","请选择联系方式":"Select contact","值不能为空":"Value can not be blank","请输入值":"Enter value","更换头像":"Change portrait","头像URL":"Portrait URL","个人中心":"Personal Center","个人信息":"Setting","修改密码":"Change password","秘钥管理":"Token management","Token更新成功":"Token updated successfully","Token创建成功":"Token created successfully","操作":"Action","重新生成":"Regenerate","生成":"Generate","该分享链接无图表数据":"The shared link has no graph data.","任意标签/资源分组":"Any Label / Classpath","必须要有一个变量名":"Var name required","变量名重复":"Duplicate variable name","变量名包含非法字符":"The variable name contains illegal characters","资源分组路径含有非法字符":"The Classpath contains illegal characters","变量名":"Variable name","标签或资源分组":"Label or Classpath","默认值":"Default value","添加大盘变量":"Add dashboard variables","添加变量":"Add variable","完成":"Finish","新建图表":"New chart","标题":"Title","图表名称":"Name required","配置方式":"Mode","指标":"Metrics","请选择指标":"Select metrics","请输入监控指标(输入4个以上字符发起检索)":"Enter a metric(search after 4 char)","资源分组":"Classpaths","请选择资源分组":"Select classpath","前缀匹配":"Prefix","请输入Promql":"Enter PromQL","阈值":"Threshold","下钻链接":"Drill URL","列":" Column","新增图表":"New Chart","一键规整":"Arrange","修改":"Edit","上移":"Move up","下移":"Move down","是否删除分类":"Delete group","删除":"Delete","编辑图表":"Edit Chart","是否删除图表":"Delete the chart","删除图表":"Delete","删除分组成功":"Group deleted successfully","新增图表分组":"New Chart Group","新建分组":"New Chart Group","更新分组名称":"Edit group name","分组名称":"Name","请输入名称":"Please enter the name","克隆大盘成功":"Cloned successfully","新建大盘成功":"Created successfully","大盘名称":"Name","分类标签":"Tags","更新时间":"Update Time","发布人":"Publisher","克隆":"Clone","是否删除大盘":"Sure to delete the dashboard?","删除大盘成功":"Deleted successfully","导入":"Import","未选择任何大盘":"No dashboard chosen","导出":"Export","监控大盘":"Dashboards","新建大盘":"New Dashboard","导入内置大盘":"Import built-in dashboard","更多操作":"More","克隆监控大盘":"Clone dashboard","创建新监控大盘":"New Dashboard","请输入大盘名称":"Enter dashboard name","大盘":"Dashboard","时间":"Time","值":"Value","告警详情":"Event Detail","策略名称:":"Rule name","通知结果":"Notice","已触发":"Triggered","已屏蔽":"Muted","表达式":"Expression","级别":"Level","策略名称":"Rule name","标签":"Tags","通知":"Notification","状态":"Status","发生时间":"When","屏蔽":"Mute","是否忽略告警?":"Sure to ignore the event?","忽略":"Ignore","未恢复告警事件":"Triggered Events","策略名称、标签、资源分组":"Rule name, tag, classpath","告警级别":"Level","告警状态":"Status","是否批量忽略告警?":"Sure to ignore the events?","已忽略告警":"Ignored successfully","批量忽略":"Batch Ignore","滴滴夜莺":"N9E","请输入用户名":"Enter a username","请输入密码":"Enter a password","登录":"Sign in","已选择":"Selected ","项":"","用户名、邮箱或电话":"User name, email or phone number","用户创建成功":"User created successfully","用户信息修改成功":"User Modified","团队创建成功":"Team created successfully","团队信息修改成功":"Team updated successfully","密码重置成功":"Password reset successfully","添加成功":"Added successfully","取消":"Cancel","确认":"Confirm","确认并搜索":"Confirm and search","用户删除成功":"User deleted successfully","团队删除成功":"Team deleted successfully","创建团队":"New Team","成员删除成功":"Deleted member successfully","确定":"OK","确定要删除么？":"Sure to delete it?","密码":"Password","请输入密码!":"Please enter the password!","确认密码":"Confirm password","请确认密码!":"Please confirm the password!","团队名称":"Team Name","团队名称不能为空！":"Team name can not be blank!","备注":"Remark","管理员":"Administrator","普通用户":"Ordinary users","游客":"Visitors","用户名不能为空！":"User name can not be blank!","角色":"Role","角色不能为空！":"Role is required","启用":"Enable","编辑":"Edit","重置密码":"Reset Password","是否删除该用户":"Sure to delete the user?","是否删除该成员":"Sure to delete the member?","禁用成功":"Disabled successfully","启用成功":"Enabled successfully","用户管理":"Users","用户名、邮箱或手机":"User name, email or mobile phone","创建":"Create","创建并关闭":"Create and close","创建用户":"Create User","团队管理":"Team Management","搜索团队名称":"Team name","是否删除该团队":"Sure to delete the team?","成员名、邮箱或手机":"Name, email or mobile","添加成员":"Add Member","选择监控指标添加图表":"Select the metric to add the chart","即时看图":"Explorer","监控指标":"Metric","筛选标签":"Tags","配置":"Configuration","每张图最多展示":"Maximum","条线":"lines per chart","重置":"Reset","分享图表":"Share","资源标识":"Resource ID","资源名称":"Name","资源信息或标签":"Resource information or labels","请选择标签":"Select a tag","删除指标成功":"Deleted successfully","创建指标成功":"Created successfully","请勾选需要导出的指标":"Please check the metrics you need to export","编辑成功":"Edit successfully","指标名称":"Metric","释义":"Description","确定删除该指标?":"Sure to delete this metric?","保存":"Save","指标释义":"Summary","指标名称或释义":"Search","不能为空":"Cannot be blank","已发送":"Sent","近":"Near","day-events":"Day Events","天未恢复的":"Days Events","进入事件管理":"Go to events page","一分钟自动刷新":"One minute refresh","指标TOP":"Metric TOP","个":"","资源总量":"Resources","策略总量":"Rules","大盘总量":"Dashboards","用户总量":"Users","团队总量":"Teams","统计数据":"Statistics","导入规则":"Import Rules","导出规则":"Export rules","请输入导入信息":"Please input import json","是否确定删除资源分组?":"Sure to delete classpath?","分组名称前缀匹配(聚合展示所有相关分组的内容)":"Prefix matching (aggregation displays all relevant grouping content)","count(对符合规则的日志进行计数)":"count(count the matching lines)","histogram(对符合规则的日志抓取出的数字计算统计值)":"histogram","秒":"s","不符合输入规范（格式为key=value）":"format should be 'key=value'","资源":"Resources","看图":"Explorer","端口":"Port","进程":"Process","插件":"Plugin","日志":"Log","端口号":"Port","进程标识":"Process identification","日志路径":"Log path","采集名称":"Collect rule","采集频率":"Step","修改人":"Modifier","修改时间":"Last update","是否删除该采集策略?":"Sure to delete this collection rule?","是否删除该告警规则?":"Sure to delete this alert rule?","删除成功":"Deleted successfully","挂载资源":"Bind Resources","请输入资源标识":"Input resource identifications, one resource per line","请输入资源标识，每行一个":"Input resource identifications, one resource per line","新建资源分组":"New","编辑资源分组":"Edit classpath","刷新":"Refresh","资源分组路径":"Classpath","资源分组路径必填":"Classpath cannot be blank","请填写资源分组路径":"Input classpath","资源分组备注":"Remark","创建进程采集":"New collection","进程采集详情":"Collection rule(Process)","更新":"Update","采集规则成功":" collection rule successfully","进程监控指标":"Metric","所属资源分组":"Classpath","资源分组必填":"Classpath is required","采集名称必填":"Rule name required","请输入采集配置的名称":"Please enter rule name","采集方式":"Method","采集方式必填":"Collection mode is required","命令行":"cmdline","进程名":"name","该项必填":"Required","取 /proc/$pid/cmdline 中的部分子串，可以唯一标识进程即可":"Take some substrings from /proc/$pid/cmdline to uniquely identify the process","取  /proc/$pid/status 中 name 的值":"Take the value of name in /proc/$pid/status","采集频率必填":"Step required","附加标签":"Append tags","格式为key=value回车分隔":"The format is key=value, use Enter to separate","创建端口采集":"New collection","端口采集详情":"Collection rule(Port)","端口监控指标":"Metric","端口协议":"Port Protocol","端口协议必填":"Port protocol required","端口号必填":"Port required","请输入端口号":"Enter port","连接超时":"Connection timeout","连接超时必填":"Connection timeout required","创建插件采集":"New Collection","插件采集详情":"Collection rule(Plugin)","插件采集成功":" collection successfully ","插件路径":"Plugin filepath","插件路径必填":"Plugin filepath required","参数":"Parameters","请输入参数":"Enter parameters","环境变量":"Env variables","变量":"Variable","标准输入(Stdin)":"Standard input (Stdin)","创建日志采集":"New collection","日志采集详情":"Collection rule(Log)","指标名称必填":"Metric required","计算方法":"Calculation method","计算方法必填":"Calculation method required","日志路径必填":"Log path required","匹配正则":"Main regexp","匹配正则必填":"Main regexp required","请输入正则表达式匹配日志关键字，histogram会提取第一个括号内的值":"Enter regexp to match logs, histogram will use first substring value","耗时计算：中的数值会用于计算曲线值流量计数：每匹配到该正则，曲线值+1":"Time-consuming calculation: the values in the calculation are used to calculate the number of curved-value flowmeters: for each match to the regular, the curves are + 1","tagName 填写说明\\r\\n\n              1. 不允许包含host、trigger、include\n              2. 不允许包含如下4个特殊字符\n              tagValue 填写说明\n              1.必须包含括号。括号中的正则内容被用作tagValue的取值，必须可枚举。\n              2.不允许包含如下4个特殊字符=,:@":"TagName  Fill in the instructions \n              1.  No host, no, no, no, no. \n              2.  Not allowed to include the following 4 special characters \n              tagValue  Fill in instructions \n              1. Must contain parentheses. The regular content in parentheses is used as a value for tagValue, and must be enumerated. \n              2. The following 4 special characters are not allowed =,: @","验证":"Verify","请输入一行待监控的完整日志":"Enter a full line of logs to be monitored","通过":"Success","失败":"Failure","屏蔽时间":"Mute time","选择时间":"Choose times","克隆到其他资源分组":"Cloning to other classpath","选择资源分组":"Select classpaths","克隆成功":"Cloned successfully","分组不可为空":"Group can not be blank","是否确认永久删除资源":"Sure to delete the resource ?","无":"None","资源详情":"Basic Information","请选择所属资源分组":"Select the classpaths","彻底删除资源":"Delete","两种情况会有彻底删除资源的需求":"There are two cases to delete resources","资源对应的设备已经下线了，永远都不会有新的监控数据上报了":"The resource has been offline","资源的ident(唯一标识)发生变化，老的ident需要手工清理掉":"The ident of the resource changes","未选择任何规则":"No rules chosen","是否批量删除规则?":"Sure to delete the rules?","组件采集信息":"Component Collection","端口信息":"Port","复制已选项":"Copied successfully","复制":"Copied ","条数据到剪贴板":" records","请先选择资源标识":"Select the resource logo first","是否移除该资源?":"Remove this resource from the classpath?","移除":"Unbind","您未选用任何资源":"No resources chosen","资源管理":"Resources","周期内所有点":"all","在统计周期 $n 秒内（初次上报的指标，统计周期内只有一个值，如要限制点数，可选择happen函数）每个值都 $v":"All the values $v in $n seconds (To limit the number of points, use the happen function)","发生次数":"happen","统计周期 $n 秒内至少有 $m 次值 $v":"There are at least $m times in $n seconds with the value $v","最大值":"max","统计周期 $n 秒内的最大值 $v":"The maximum value $v in $n seconds","最小值":"min","统计周期 $n 秒内的最小值 $v":"The minimum value $v in $n seconds","均值":"avg","统计周期 $n 秒内的均值 $v":"The average value $v in $n seconds","求和":"sum","统计周期 $n 秒内的所有值求和 $v":"The sum value $v in $n seconds","突增突降值":"diff","最新值与其之前 $n 秒内的任意值之差 (区分正负) $v":"(the difference between the latest value and any previous value of $n seconds) divided by the corresponding historical value (positive and negative) $v %","突增突降率":"pdiff","(最新值与其之前 $n 秒的任意值之差)除以对应历史值 (区分正负) $v ％":"(Latest value before  $n  The difference between any value of the second (divided by the corresponding historical value)  (distinguishing between positive and negative)  $v  %","同比变化率":"c_avg_rate_abs","最近 $n 秒平均值相对 $m 天前同周期平均值变化率 $v ％":"The change rate of last $n seconds average relative to $m days average in the same period $v %","同比变化率(区分正负)":"c_avg_rate","同比变化值":"c_avg_abs","最近 $n 秒平均值相对 $m 天前同周期平均值变化值 $v":"The change value of last $n seconds average relative to $m days average in the same period $v","同比变化值(区分正负)":"c_avg","3-sigma离群点检测":"stddev","统计周期 $n 秒内波动值过大，超过了 $m 个标准差范围":"The statistical period fluctuates too much in $n seconds, exceeding $m standard deviation range","新建告警屏蔽":"New mute rule","告警屏蔽":"Mute Rules","请检查":"Please check ","中的空格":" space","新建告警屏蔽成功":"Mute rule created successfully","屏蔽指标":"Mute metric","请输入指标名称":"Input metric","请输入资源标识的正则表达式":"Input a regexp for the resource identification","屏蔽标签":"Mute tags","请输入屏蔽标签(请用回车分割)":"Input mute tags (use Enter to split)","屏蔽原因":"Mute Cause","请填写屏蔽原因":"Enter mute cause","屏蔽标识、资源标识、屏蔽标签、资源分组前缀不能同时为空":"The metric, ID, tags ,Prefix coult not be empty at the same time","暂无":"None","告警策略详情":"Alert Strategy Details","解除成功":"Removed successfully","开始:":"Start:","结束:":"End:","创建人":"Creator","确定解除该告警屏蔽?":"Sure to remove the mute rule?","解除":"Remove","屏蔽策略":"Mute Rules","指标名称、资源标识、标签、屏蔽原因":"Metric, resource id, tag, mute cause","是否确定删除该策略分组?":"Sure to delete the alert group?","名称":"Name","告警接收者":"Recipients","未选择任何采集策略":"No rules selected","是否批量删除告警规则?":"Sure to delete the alert rules?","请输入告警策略名称":"Search rule name","新建告警策略":"New alert rule","导入内置策略":"Import built-in rules","策略":" rules","请输入标签key":"Enter the tag key","请输入标签value":"Enter the tag value","预览":"Preview","请输入指标":"Enter metric","请输入百分比":"Enter percentages","新建策略分组":"New rule group","新建子节点":"New child node","编辑策略组":"Edit rule Group","策略组名称":"Name","策略组名称必填":"Group name required","请填写策略组名称":"Please enter group name","管理团队":"Manage teams","请选择团队":"Select teams","告警策略":"Alert Rules","请输入分钟数":"Enter minutes","秒（告警恢复后持续观察":"Seconds (continued observation after alarm recovery)","秒，未再触发阈值才发送恢复通知）":"Seconds, no more trigger threshold to send recovery notice)","保存成功":"Successfully saved","创建成功":"Created successfully","克隆失败":"Cloning failed","保存失败":"Unable to save","创建失败":"Failed to create","周一":"Monday","周二":"Tuesday","周三":"Wednesday","周四":"Thursday","周五":"Friday","周六":"Saturday","周日":"Sunday","基本配置":"Basic configuration","策略名称不能为空":"Rule name required","请输入策略名称":"Enter the rule name","一级报警":"Level 1","二级报警":"Level 2","三级报警":"Level 3","触发模式":"Trigger mode","统计周期":"Step","触发条件":"Condition","资源过滤":"Resource filter","标签过滤":"Tag filter","执行频率":"Exec interval","请输入Promeql":"Enter Promeql","请输入附加标签，格式为key=value":"Enter an additional tag in a key=value format","生效配置":"Enable configuration","立即启用":"Enable","是":"Yes","否":"No","生效时间":"Time","通知配置":"Notification configuration","静默恢复":"Silent recovery","不发送恢复通知":"Do not send a recovery notice","通知媒介":"Media","报警接收团队":"Notify teams","报警接收人":"Notify users","报警回调":"Callback","通知自己开发的系统（请确认是夜莺服务端可访问的地址）":"Notify your system (make sure n9e-server could access the address)","其他配置":"Other configuration","预案链接":"Runbook","监控看图":"Metrics","策略配置":"Monitors","未恢复告警":"Unrecovered","用户":"Users","团队":"Teams","团队列表":"Team list","新建团队":"New","退出":"Logout","收藏的":"Favorite ","分组":"","所有":"All ","一行一个":"One per line","策略分组":"Rule Groups","新建":"New ","请输入日志路径，支持*通配符":"Please enter logs filepath, support wildcards","1小时":"1 hour","2小时":"2 hours","6小时":"6 hours","12小时":"12 hours","1天":"1 day","2天":"2 days","7天":"1 week","14天":"2 weeks","30天":"30 days","90天":"90 days","永久":"forever","清除":"clear","预览图":"Preview Chart","批量删除":"Delete","修改告警接受者":"Update recipients","修改通知媒介":"Update medias","策略启用控制":"Update status","是否启停":"Enable","修改附加标签":"Update append tags","修改附加标签成功":"Update append tags successfully",append_tags:"Tags","请先选择策略":"Select some rules","不符合输入规范(格式为key=value)":" format should be 'key=value'","编辑用户信息":"Edit user","编辑团队信息":"Edit team","基本信息":"Basic info","预案手册":"Runbook","预警值":"Threshold","维护备注":"Update remark","维护标签":"Update tags","修改备注":"Update remark","修改标签":"Update tags","暂无数据":"None","告警历史":"All Events","全部告警":"All","全量告警历史":"History Alert Events","恢复":"Recovery","告警":"Alert","资源分组前缀":"Classpath Prefix","搜索资源分组前缀":"Search Classpath Prefix","key, value必填":"key,value required","key重复":"Duplicate key","自定义开始时间":"Cumson start time","自定义结束时间":"Cumson end time","最近":"Past ",minute:" minute",minutes:" minutes",hour:" hour",hours:" hours","周":" week","天":" day","月":" month","季度":" quarter","tpl.create":"Create","tpl.tag.bind":"Bind tags","tpl.tag.unbind":"Unbind tags","tpl.tag.bind.title":"Batch bind tags","tpl.tag.bind.success":"Successfully binded","tpl.tag.bind.field":"tags","tpl.tag.unbind.title":"Batch unbind tags","tpl.tag.unbind.field":"tags","tpl.tag.unbind.success":"Successfully unbinded","tpl.node.modify":"Modify node","tpl.node.modify.title":"Batch modify node","tpl.batch.modify.group":"Batch modify group","tpl.title":"Title","tpl.title.tpl.help":"Describe the role of the template","tpl.title.task.help":"Describe the role of the task","tpl.tags":"Tags","tpl.tags.help":"Used for classification","tpl.creator":"Creator","tpl.last_updator":"Last updator","tpl.last_updated":"Last updated","tpl.account.help":"Execute account, use root with caution","tpl.batch.help":"Concurrency, default is 0, indicating full concurrent execution, 1 means sequential execution, 2 means that each time two execute","tpl.tolerance.help":"Tolerate several machines failing, the default is 0, which means no tolerance, once failed, immediately suspend","tpl.timeout.help":"Timeout for stand-alone script execution, in seconds","tpl.pause.help":"Pause after completed, pause multiple hosts, write multiple hosts, separated by commas","tpl.host.help":"List of hosts to be executed","tpl.script.help":"Script content to be executed","tpl.args.help":"Parameters attached to the script, separated by double commas, such as arg1,,arg2,,arg3","tpl.modify":"Modify the template","tpl.create.task":"Create a new task","task.create":"Create task","task.title":"Title","task.done":"Done","task.clone":"Clone","task.meta":"Meta","task.creator":"Creator","task.created":"Created","task.only.mine":"Just mine","task.host":"Host","task.status":"Status","task.output":"Output","task.refresh":"Refresh","task.control.params":"Control params","task.account":"Account","task.batch":"Batch","task.tolerance":"Tolerance","task.timeout":"Timeout","task.script":"Script","task.script.args":"Script params","task.pause":"Pause","task.host.list":"Host list","task.clone.new":"Clone a new task","task.temporary.create":"Create temporary task","groups.instGroups":"Instant groups","groups.crontabGroups":"Crontab groups","perms.hosts":"Hosts","perms.host":"Host","perms.team":"Team","perms.account":"Account","last.7.days":"Last 7 days","last.15.days":"Last 15 days","last.30.days":"Last 30 days","last.60.days":"Last 60 days","last.90.days":"Last 90 days","table.nodata":"No data","table.create":"Create","table.operations":"Operations","table.batch.operations":"Batch Operations","table.detail":"Detail","table.modify":"Modify","table.delete":"Delete","table.delete.batch":"Batch delete","table.clone":"Clone","table.delete.sure":"Are you sure to delete it?","table.delete.there.sure":"Are you sure to delete these?","table.ident":"Ident","table.name":"Name","table.cate":"Cate","table.creator":"Creator","table.lastupdated":"Last updated","table.note":"Note","form.submit":"Submit","form.save":"Save","form.submit.and.save":"Save","form.login":"Login","form.goback":"Go back","msg.submit.success":"Successfully submited","msg.modify.success":"Successfully modified","msg.create.success":"Successfully created","msg.add.success":"Successfully created","msg.delete.success":"Successfully deleted","msg.clone.success":"Successfully cloned","msg.clone.error":"Cloning failed","msg.sort.success":"Successfully sorted"}},zh:{translation:{"新建资源分组":"新建资源分组","端口号":"端口号",classpath:{single:"资源分组"},append_tags:"修改附加标签",strategy:{create:"新建策略分组",single:"告警策略",multiple:"告警策略"},personalInfo:"个人信息","day-events":"天未恢复的",n9e:"滴滴夜莺","周期内所有点":"周期内所有点 - all","发生次数":"发生次数 - happen","最大值":"最大值 - max","最小值":"最小值 - min","均值":"均值 - avg","求和":"求和 - sum","突增突降值":"突增突降值 - diff","突增突降率":"突增突降率 - pdiff","同比变化率":"同比变化率 - c_avg_rate_abs","同比变化率(区分正负)":"同比变化率(区分正负) - c_avg_rate","同比变化值":"同比变化值 - c_avg_abs","同比变化值(区分正负)":"同比变化值(区分正负) - c_avg","3-sigma离群点检测":"3-sigma离群点检测 - stddev",minute:"分钟",minutes:"分钟",hour:"小时",hours:"小时","tpl.create":"创建","tpl.tag.bind":"绑定标签","tpl.tag.unbind":"解绑标签","tpl.tag.bind.title":"批量绑定标签","tpl.tag.bind.field":"待绑定的标签","tpl.tag.bind.success":"批量绑定标签成功","tpl.tag.unbind.title":"批量解绑标签","tpl.tag.unbind.field":"待解绑的标签","tpl.tag.unbind.success":"批量解绑标签成功","tpl.node.modify":"修改节点","tpl.node.modify.title":"批量修改节点","tpl.batch.modify.group":"批量修改所属分组","tpl.title":"标题","tpl.title.tpl.help":"标题，说明这个脚本的作用","tpl.title.task.help":"标题，说明这个任务的作用","tpl.tags":"标签","tpl.tags.help":"标签，用于分类","tpl.creator":"创建人","tpl.last_updator":"更新人","tpl.last_updated":"更新时间","tpl.account.help":"执行账号，慎用root，除非要代表操作系统意志","tpl.batch.help":"并发度，默认是0，表示全并发执行，1表示顺序执行，2表示每次执行2台","tpl.tolerance.help":"容忍几台机器失败，默认是0，表示一台都不容忍，只要失败了，立马暂停","tpl.timeout.help":"单机脚本执行的超时时间，单位是秒","tpl.pause.help":"暂停点，做完某台之后暂停一下，要暂停多台，写多个 host，逗号分隔","tpl.host.help":"要执行的机器列表","tpl.script.help":"要执行的脚本内容","tpl.args.help":"附于脚本之后的参数，多个参数之间用双逗号,,分隔，比如arg1,,arg2,,arg3","tpl.modify":"编辑脚本","tpl.create.task":"创建任务","task.create":"创建任务","task.title":"标题","task.done":"是否完成","task.clone":"克隆任务","task.meta":"元信息","task.creator":"创建人","task.created":"创建时间","task.only.mine":"只看自己","task.host":"Host","task.status":"状态","task.output":"输出","task.refresh":"刷新","task.control.params":"控制参数","task.account":"执行账号","task.batch":"并发度","task.tolerance":"容忍度","task.timeout":"超时时间","task.script":"脚本内容","task.script.args":"脚本参数","task.pause":"暂停点","task.host.list":"机器列表","task.clone.new":"克隆一个新任务","task.temporary.create":"创建临时任务","groups.instGroups":"即时任务","groups.crontabGroups":"定时任务","perms.hosts":"机器","perms.host":"机器","perms.team":"有权限的团队","perms.account":"脚本执行账号","last.7.days":"最近 7 天","last.15.days":"最近 15 天","last.30.days":"最近 30 天","last.60.days":"最近 60 天","last.90.days":"最近 90 天","table.nodata":"暂无数据","table.create":"创建","table.operations":"操作","table.batch.operations":"批量操作","table.detail":"详情","table.modify":"修改","table.delete":"删除","table.delete.batch":"批量删除","table.clone":"克隆","table.delete.sure":"确定要删除吗？","table.delete.there.sure":"确定要删除这些吗?","table.ident":"英文标识","table.name":"显示名","table.cate":"类别","table.creator":"创建者","table.lastupdated":"修改时间","table.note":"备注","form.submit":"提 交","form.save":"保 存","form.submit.and.save":"提交保存","form.login":"登 录","form.goback":"返 回","msg.submit.success":"提交成功","msg.modify.success":"修改成功","msg.create.success":"创建成功","msg.add.success":"添加成功","msg.delete.success":"删除成功","msg.clone.success":"克隆成功","msg.clone.error":"克隆失败","msg.sort.success":"排序成功"}}};Tr.use(Rr).init({resources:qr,lng:localStorage.getItem("language")||"zh",interpolation:{escapeValue:!1}});var Wr=d.createContext(null);var Xr=function(e){e()},Kr={notify:function(){}};function Qr(){var e=Xr,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Zr=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=Kr,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=Qr())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=Kr)},e}(),Jr="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?f.exports.useLayoutEffect:f.exports.useEffect;function ei(e){var t=e.store,n=e.context,r=e.children,i=f.exports.useMemo((function(){var e=new Zr(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),a=f.exports.useMemo((function(){return t.getState()}),[t]);Jr((function(){var e=i.subscription;return e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,a]);var o=n||Wr;return d.createElement(o.Provider,{value:i},r)}function ti(){return f.exports.useContext(Wr)}function ni(e){void 0===e&&(e=Wr);var t=e===Wr?ti:function(){return f.exports.useContext(e)};return function(){return t().store}}var ri=ni();function ii(e){void 0===e&&(e=Wr);var t=e===Wr?ri:ni(e);return function(){return t().dispatch}}var ai=ii(),oi=function(e,t){return e===t};function si(e){void 0===e&&(e=Wr);var t=e===Wr?ti:function(){return f.exports.useContext(e)};return function(e,n){void 0===n&&(n=oi);var r=t(),i=function(e,t,n,r){var i,a=f.exports.useReducer((function(e){return e+1}),0)[1],o=f.exports.useMemo((function(){return new Zr(n,r)}),[n,r]),s=f.exports.useRef(),l=f.exports.useRef(),c=f.exports.useRef(),u=f.exports.useRef(),h=n.getState();try{if(e!==l.current||h!==c.current||s.current){var p=e(h);i=void 0!==u.current&&t(p,u.current)?u.current:p}else i=u.current}catch(d){throw s.current&&(d.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),d}return Jr((function(){l.current=e,c.current=h,u.current=i,s.current=void 0})),Jr((function(){function e(){try{var e=n.getState(),r=l.current(e);if(t(r,u.current))return;u.current=r,c.current=e}catch(d){s.current=d}a()}return o.onStateChange=e,o.trySubscribe(),e(),function(){return o.tryUnsubscribe()}}),[n,o]),i}(e,n,r.store,r.subscription);return f.exports.useDebugValue(i),i}}var li,ci=si();li=m.exports.unstable_batchedUpdates,Xr=li;function ui(e){const{item:t,subMenuKey:n,collapsed:r}=e,{activeMode:i}=f.exports.useContext(vi),[a,o]=gi(),[s,l]=yi();return d.createElement("div",{className:g({"fc-menu-item":!0,"fc-menu-item-selected":a.includes(t.key)}),onClick:()=>{const e=[t.key];n&&e.unshift(n),o(e)},onMouseEnter:()=>{if("hover"===i){const e=[t.key];n&&e.unshift(n),l(e)}}},!n&&(s.length>0?s.includes(t.key):a.includes(t.key))&&d.createElement(d.Fragment,null,d.createElement("div",{className:"fc-menu-sub-top"}),d.createElement("div",{className:"fc-menu-sub-topleft-corner"}),d.createElement("div",{className:"fc-menu-sub-bottomleft-corner"}),d.createElement("div",{className:"fc-menu-sub-left"}),d.createElement("div",{className:"fc-menu-sub-bottom"})),r?d.createElement(yt,{title:t.label,placement:"right"},d.createElement("span",{className:"fc-menu-item-icon"},t.icon)):d.createElement("span",{className:"fc-menu-item-icon"},t.icon),!r&&d.createElement("span",{className:"fc-menu-item-label"},t.label))}function hi(e){const{item:t,collapsed:n}=e,{activeMode:r}=f.exports.useContext(vi),[i,a]=gi(),[o,s]=yi(),[l,c]=f.exports.useState(!1),u=i.includes(t.key)&&i.length>1,h=o.length>0?o.includes(t.key):u;f.exports.useEffect((()=>{n&&c(u)}),[i,n]);const p=d.createElement(vt,{onClick:({key:e})=>a([t.key,e])},t.children.filter((e=>!!e)).map((e=>d.createElement(vt.Item,{key:e.key},e.label))));return d.createElement("div",{className:g({"fc-menu-sub":!0,"fc-menu-sub-open":l,"fc-menu-sub-selected":"hover"===r?h:u}),onMouseEnter:()=>{"hover"===r&&(c(!0),s([t.key]))},onMouseLeave:()=>{"hover"===r&&c(!1)}},(l||("hover"===r?h:u))&&d.createElement(d.Fragment,null,d.createElement("div",{className:"fc-menu-sub-top"}),d.createElement("div",{className:"fc-menu-sub-topleft-corner"}),d.createElement("div",{className:"fc-menu-sub-bottomleft-corner"}),d.createElement("div",{className:"fc-menu-sub-left"}),d.createElement("div",{className:"fc-menu-sub-bottom"})),d.createElement("div",{className:"fc-menu-sub-title",onClick:()=>{"click"===r&&(n||c(!l))},onMouseEnter:()=>{"hover"===r&&s([t.key])}},n?d.createElement(yt,{title:p,placement:"right",color:"white",overlayClassName:"fc-menu-sub-tooltip"},d.createElement("span",{className:"fc-menu-sub-title-icon"},t.icon)):d.createElement("span",{className:"fc-menu-sub-title-icon"},t.icon),!n&&d.createElement("span",{className:"fc-menu-sub-title-label"},t.label)),"click"===r&&!n&&l&&t.children.filter((e=>!!e)).map((e=>d.createElement(ui,{key:e.key,item:e,subMenuKey:t.key,collapsed:n}))),"hover"===r&&!n&&(l||h)&&t.children.filter((e=>!!e)).map((e=>d.createElement(ui,{key:e.key,item:e,subMenuKey:t.key,collapsed:n}))))}var pi=function(e){f.exports.useEffect(e,[])},di="undefined"!=typeof window?f.exports.useLayoutEffect:f.exports.useEffect;function fi(e){var t={state:e instanceof Function?e():e,setState:function(e){t.state=function(e,t){return"function"==typeof e?e.length?e(t):e():e}(e,t.state),t.setters.forEach((function(e){return e(t.state)}))},setters:[]};return function(){var e=f.exports.useState(t.state),n=e[0],r=e[1];return pi((function(){return function(){t.setters=t.setters.filter((function(e){return e!==r}))}})),di((function(){t.setters.includes(r)||t.setters.push(r)})),[n,t.setState]}}function mi(e){const{items:t}=e,[n,r]=gi(),[i,a]=f.exports.useState();return d.createElement("div",{className:"fc-skim-menu"},d.createElement("div",{className:"fc-skim-menu-primary"},t.filter((e=>!!e)).map((e=>d.createElement("div",{key:e.key,onMouseEnter:()=>a(e),onClick:()=>!e.children&&r([e.key])},e.label)))),d.createElement("div",{className:"fc-skim-menu-secondary"},d.createElement("div",{className:"fc-skim-menu-secondary-wrap"},i&&i.children&&i.children.filter((e=>!!e)).map((e=>d.createElement("div",{key:e.key,onClick:()=>r([i.key,e.key])},e.label))))))}const gi=fi([]),yi=fi([]),vi=f.exports.createContext({activeMode:"hover"});function Ei(e){const{items:t,onClick:n,collapsed:r,switchCollapsed:i,defaultSelectedKeys:a,activeMode:o="hover"}=e,[s,l]=yi(),[c,u]=gi(),[h,p]=f.exports.useState(!1);return f.exports.useEffect((()=>{h?c.length>0&&n(c[c.length-1]):(a&&l(a),a&&u(a),setTimeout((()=>{p(!0)}),0))}),[c]),d.createElement(vi.Provider,{value:{activeMode:o}},d.createElement("div",{className:g({"fc-menu":!0,collapsed:"1"===r,hide:"2"===r,hoverMode:"hover"===o}),onMouseLeave:()=>{"hover"===o&&l([])}},d.createElement("div",{className:"collapse-btn"},"2"===r?d.createElement(yt,{title:d.createElement(mi,{items:t}),placement:"rightTop",overlayClassName:"fc-skim-menu-tooltip"},d.createElement(y,{onClick:()=>i()})):"0"===r?d.createElement(y,{onClick:()=>i()}):d.createElement(v,{onClick:()=>i()})),"2"!==r&&t.filter((e=>!!e)).map((e=>{return(t=e)&&t.children?d.createElement(hi,{item:e,collapsed:"1"===r}):e&&d.createElement(ui,{item:e,collapsed:"1"===r});var t}))))}var xi={},bi=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),Ci=new RegExp("%[a-f0-9]{2}","gi"),Si=new RegExp("(%[a-f0-9]{2})+","gi");function wi(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],wi(n),wi(r))}function Ti(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(Ci),n=1;n<t.length;n++)t=(e=wi(t,n).join("")).match(Ci);return e}}var ki=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"��","%FF%FE":"��"},r=Si.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var i=Ti(r[0]);i!==r[0]&&(n[r[0]]=i)}r=Si.exec(e)}n["%C2"]="�";for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o];e=e.replace(new RegExp(s,"g"),n[s])}return e}(e)}},_i=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},Oi=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),a=0;a<r.length;a++){var o=r[a],s=e[o];(i?-1!==t.indexOf(o):t(o,s,e))&&(n[o]=s)}return n};!function(e){const t=bi,n=ki,r=_i,i=Oi,a=Symbol("encodeFragmentIdentifier");function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,n){return n.encode?n.strict?t(e):encodeURIComponent(e):e}function l(e,t){return t.decode?n(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"==typeof n&&n.includes(e.arrayFormatSeparator),a="string"==typeof n&&!i&&l(n,e).includes(e.arrayFormatSeparator);n=a?l(n,e):n;const o=i||a?n.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===n?n:l(n,e);r[t]=o};case"bracket-separator":return(t,n,r)=>{const i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(r[t]=n?l(n,e):n);const a=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>l(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],a):r[t]=a};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const a of e.split("&")){if(""===a)continue;let[e,o]=r(t.decode?a.replace(/\+/g," "):a,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:l(o,t),n(l(e,t),o,i)}for(const r of Object.keys(i)){const e=i[r];if("object"==typeof e&&null!==e)for(const n of Object.keys(e))e[n]=p(e[n],t);else i[r]=p(e,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))}e.extract=h,e.parse=d,e.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[",i,"]"].join("")]:[...n,[s(t,e),"[",s(i,e),"]=",s(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[s(n,e),t,s(i,e)].join("")]:[[r,s(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,s(t,e)]:[...n,[s(t,e),"=",s(r,e)].join("")]}}(t),i={};for(const o of Object.keys(e))n(o)||(i[o]=e[o]);const a=Object.keys(i);return!1!==t.sort&&a.sort(t.sort),a.map((n=>{const i=e[n];return void 0===i?"":null===i?s(n,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?s(n,t)+"[]":i.reduce(r(n),[]).join("&"):s(n,t)+"="+s(i,t)})).filter((e=>e.length>0)).join("&")},e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,i]=r(e,"#");return Object.assign({url:n.split("?")[0]||"",query:d(h(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:l(i,t)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0,[a]:!0},n);const r=u(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),l=Object.assign(o,t.query);let c=e.stringify(l,n);c&&(c=`?${c}`);let h=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(t.url);return t.fragmentIdentifier&&(h=`#${n[a]?s(t.fragmentIdentifier,n):t.fragmentIdentifier}`),`${r}${c}${h}`},e.pick=(t,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[a]:!1},r);const{url:o,query:s,fragmentIdentifier:l}=e.parseUrl(t,r);return e.stringifyUrl({url:o,query:i(s,n),fragmentIdentifier:l},r)},e.exclude=(t,n,r)=>{const i=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return e.pick(t,i,r)}}(xi);const Ai=function(e,t="download.txt"){const n=document.createElement("a"),r=new Blob([Array.isArray(e)?e.join("\r\n"):e],{type:"text/plain"});n.href=URL.createObjectURL(r),n.download=t,document.body.appendChild(n),n.click()},Ii=(e,t,n)=>{const r=document.createElement("textarea");r.style.border="0",r.style.padding="0",r.style.margin="0",r.style.position="absolute",r.style.left="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;let a;r.style.top=`${i}px`,r.setAttribute("readonly",""),r.value=e,document.body.appendChild(r),r.select();try{a=document.execCommand("copy"),n&&e.includes(n)?Et.success(`${t("复制")}${e.split("\n").length}${t("条数据到剪贴板")}`):Et.success(t("复制到剪贴板"))}catch(o){Et.error(t("复制失败")),a=!1}return a&&document.body.removeChild(r),a},Mi=(e,t=!1)=>{const n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style.left="-9999px";const r=window.pageYOffset||document.documentElement.scrollTop;let i;n.style.top=`${r}px`,n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n),n.select();try{i=document.execCommand("copy"),!t&&Et.success("复制到剪贴板")}catch(a){Et.error("复制失败"),i=!1}return i&&document.body.removeChild(n),i},Ni=()=>Object.values({}).map((e=>e.default)),Pi=()=>`_${Math.random().toString(36).substr(2,9)}`;function Fi(){const{search:e}=E();return d.useMemo((()=>new URLSearchParams(e)),[e])}var Li,Ri,Di,Bi,$i,zi;(Ri=Li||(Li={})).Get="Get",Ri.Post="Post",Ri.Put="Put",Ri.Delete="Delete",(Bi=Di||(Di={}))[Bi.Add=0]="Add",Bi[Bi.Delete=1]="Delete",(zi=$i||($i={}))[zi.Favorite=0]="Favorite",zi[zi.Common=1]="Common";const Hi=function(e,t){return ji("/api/n9e/auth/login",{method:Li.Post,data:{username:e,password:t}})},ji=x({errorHandler:e=>{throw"AbortError"===e.name||e.silence||xt.error({message:e.message}),e.silence?e:new Error(e.message)},credentials:"include"});function Gi(){return ji("/api/n9e/clusters",{method:Li.Get})}function Vi(){return ji("/api/n9e/clusters",{method:Li.Get})}function Yi(){return Promise.resolve({dat:[]})}function Ui(e,t=200){return ji("/api/n9e/busi-groups",{method:Li.Get,params:Object.assign({limit:t},e?{query:e}:{})})}ji.interceptors.request.use(((e,t)=>{let n=s({},t.headers);return n.Authorization=`Bearer ${localStorage.getItem("access_token")||""}`,n["X-Cluster"]||(n["X-Cluster"]=localStorage.getItem("curCluster")||""),n["X-Language"]="zh",{url:e,options:l(s({},t),{headers:n})}})),ji.interceptors.response.use((async(e,t)=>{const{status:n}=e;if(200===n)return e.clone().json().then((r=>{if(!(e.url.includes("/api/v1/")||e.url.includes("/api/v2")||e.url.includes("/api/n9e-plus/datasource"))){if(""===r.err||"success"===r.status||""===r.error)return(r.data||r.dat)&&r.dat&&"[object Null]"===Object.prototype.toString.call(r.dat.list)&&(r.dat.list=[]),l(s({},r),{success:!0});throw t.silence?{name:r.err,message:r.err,silence:!0,data:r,response:e}:new Error(r.err)}if(200===n&&!r.error)return l(s({},r),{success:!0});if(r.error){if(e.url.indexOf("/api/n9e/prometheus/api/v1")>-1||e.url.indexOf("/api/v1/datasource/prometheus")>-1)return r;throw new Error(r.error.message,{cause:t.silence})}}));if(!(500===n&&e.url.indexOf("/api/v1/dimensions/log/aggregation")>-1)){if(500===n&&(e.url.includes("/api/v1")||e.url.includes("/api/v2")))return e.clone().json().then((n=>{if(!n.error)return l(s({},n),{success:!0});if(n.error)throw{name:n.error.name,message:n.error.message,silence:t.silence,data:n,response:e}}));if(401!==n){if(403===n&&(e.url.includes("/api/v1")||e.url.includes("/api/v2")))return e.clone().json().then((e=>{if(location.href="/403",e.error&&e.error.message)throw new Error(e.error.message)}));{const n=e.headers.get("content-type");return-1!==(null==n?void 0:n.indexOf("text/plain; charset=utf-8"))?e.clone().text().then((e=>{throw new Error(e)})):e.clone().json().then((n=>{if(void 0===t.silence&&(e.url.indexOf("/api/n9e/prometheus/api/v1")>-1||e.url.indexOf("/api/v1/datasource/prometheus")>-1))return n;throw e.url.includes("/api/v1")||e.url.includes("/api/v2")?{name:n.error?n.error.name:JSON.stringify(n),message:n.error?n.error.message:JSON.stringify(n),silence:t.silence,data:n,response:e}:new Error(n.err?n.err:n)}))}}if(e.url.indexOf("/api/n9e/prometheus/api/v1")>-1||e.url.indexOf("/api/v1/datasource/prometheus")>-1)return e.clone().json().then((e=>{throw new Error(e.err?e.err:e)}));e.url.indexOf("/api/n9e/auth/refresh")>0?location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:""):localStorage.getItem("refresh_token")?ji("/api/n9e/auth/refresh",{method:Li.Post,data:{refresh_token:localStorage.getItem("refresh_token")}}).then((e=>{if(console.log("401 err",e),e.err)location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:"");else{const{access_token:t,refresh_token:n}=e.dat;localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",n),location.href=`${location.pathname}${location.search}`}})):location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:"")}}),{global:!1});const qi=b({scriptUrl:"/font/iconfont.js"});Ni().reduce(((e,t)=>{const n=t.menu;return n?e=e.concat(n):e}),[]);const Wi=(e,t)=>{const n=_.find(e,(e=>_.some(e.children.filter((e=>!!e)),(e=>-1!==t.indexOf(e.key)))));if(n)return n.key},Xi=(e,t)=>{let n;return _.forEach(e,(e=>{_.forEach(e.children,(e=>{e&&-1!==t.indexOf(e.key)&&(n=e.key)}))})),n},Ki=()=>{const{t:e,i18n:t}=Ur(),[n,r]=f.exports.useState(),i=[{key:"targets",icon:d.createElement(C,null),label:e("监控对象"),children:[{key:"/home",label:e("监控总览")},{key:"/targets",label:e("监控管理")}]},{key:"monitor",icon:d.createElement(S,null),label:e("监控看图"),children:[{key:"/metric/explorer",label:e("即时查询")},{key:"/object/explorer",label:e("快捷视图")},{key:"/dashboards",label:e("监控大盘")}]},{key:"alarm",icon:d.createElement(w,null),label:e("告警管理"),children:[{key:"/alert-rules",label:e("告警规则")},{key:"/recording-rules",label:e("记录规则")},{key:"/alert-mutes",label:e("屏蔽规则")},{key:"/alert-subscribes",label:e("订阅规则")},{key:"/alert-cur-events",label:e("活跃告警")},{key:"/alert-his-events",label:e("历史告警")}]},{key:"job",icon:d.createElement(T,null),label:e("告警自愈"),children:[{key:"/job-tpls",label:e("自愈脚本")},{key:"/job-tasks",label:e("执行历史")}]},{key:"manage",icon:d.createElement(qi,{type:"icon-renyuanzuzhi-weixuanzhongyangshi"}),label:e("人员组织"),children:[{key:"/users",label:e("用户管理")},{key:"/user-groups",label:e("团队管理")},{key:"/busi-groups",label:e("业务组管理")}]},{key:"help",icon:d.createElement(qi,{type:"icon-xitongxinxi-weixuanzhongyangshi"}),label:e("系统信息"),children:[{key:"/help/version",label:e("系统版本")},{key:"/help/servers",label:e("告警引擎")},{}]}],[a,o]=f.exports.useState(i);f.exports.useEffect((()=>{r([]);for(const e of i){if(e&&e.key.startsWith("/")&&window.location.pathname.includes(e.key)){r([null==e?void 0:e.key]);break}if((null==e?void 0:e.children)&&e.children.length>0)for(const t of e.children)if(t&&window.location.pathname.includes(t.key)){r([null==e?void 0:e.key,t.key]);break}}}),[]);const s=k(),l=E(),{pathname:c}=l;let{profile:u}=ci((e=>e.account));const[h,p]=f.exports.useState(localStorage.getItem("menuCollapsed")),[m,g]=f.exports.useState([Xi(a,c)]),[y,v]=f.exports.useState(h?[]:[Wi(a,c)]);return f.exports.useEffect((()=>{g([Xi(a,c)]),h||v(_.union([...y,Wi(a,c)]))}),[c,h]),f.exports.useEffect((()=>{u.roles.length>0&&(-1===u.roles.indexOf("Admin")?ji("/api/n9e/self/perms",{method:Li.Get}).then((e=>{const{dat:t}=e,n=[...i];n.forEach((e=>{e.children=e.children.filter((e=>e&&t.includes(e.key)))})),o(n)})):o(i))}),[u.roles]),(()=>{if("/login"===l.pathname||l.pathname.startsWith("/chart/")||l.pathname.startsWith("/dashboards/share/")||"/callback"===l.pathname||0===l.pathname.indexOf("/polaris/screen")||/\/dashboards\/\d+/.test(l.pathname))return!0;if(0===l.pathname.indexOf("/dashboard")){const e=xi.parse(l.search);return"fullscreen"===(null==e?void 0:e.viewMode)}return!1})()?null:d.createElement("div",{style:{display:"flex",flexDirection:"column",padding:"10px 0 10px 10px"}},n&&d.createElement(Ei,{items:a,onClick:e=>{if(l.pathname!==e){if(g([e]),"changeLanguage"===e){let e="en"==t.language?"zh":"en";t.changeLanguage(e),localStorage.setItem("language",e)}e.startsWith("/")&&s.push(e)}},collapsed:h,switchCollapsed:()=>{if(isNaN(Number(h)))p("1"),localStorage.setItem("menuCollapsed","1");else{const e=(2===Number(h)?-1:Number(h))+1+"";p(e),localStorage.setItem("menuCollapsed",e)}setTimeout((()=>{window.dispatchEvent(new Event("resize"))}),500)},defaultSelectedKeys:n,activeMode:"click"}))},Qi=()=>{const e=k();return d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},d.createElement(bt,{title:"404",subTitle:"你访问的页面不存在!",extra:d.createElement(Ct,{type:"primary",onClick:()=>e.replace("/")},"回到首页")}))},Zi=()=>{const e=k();return d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},d.createElement(bt,{title:"403",subTitle:"你没有权限访问该页面, 请联系管理员!",extra:d.createElement(Ct,{type:"primary",onClick:()=>e.go(-2)},"返回上一页")}))};function Ji(){const{t:e}=Ur(),[t]=St.useForm(),n=k(),r=E(),i=r.search&&new URLSearchParams(r.search).get("redirect"),a=ai(),[o,s]=f.exports.useState({oidc:"OIDC",cas:"CAS",oauth:"OAuth"});f.exports.useEffect((()=>{ji("/api/n9e/auth/sso-config",{method:Li.Get}).then((e=>{e.dat&&s({oidc:e.dat.oidcDisplayName,cas:e.dat.casDisplayName,oauth:e.dat.oauthDisplayName})}))}),[]);const l=async()=>{try{await t.validateFields(),c()}catch(uu){console.log(e("输入有误"))}},c=async()=>{let{username:e,password:r}=t.getFieldsValue();await a({type:"account/login",username:e,password:r})||n.push(i||"/metric/explorer")};return d.createElement("div",{className:"login-warp"},d.createElement("img",{src:"/image/login-left-top-corner.png",className:"left-top-bg"}),d.createElement("img",{src:"/image/login-right-bottom-corner.png",className:"right-bottom-bg"}),d.createElement("div",{className:"banner integration"},d.createElement("img",{src:"/image/login-dashboard.svg",style:{margin:"0 60px",zIndex:5,width:632}})),d.createElement("div",{className:"login-panel"},d.createElement("div",{className:"login-main  integration"},d.createElement("div",{className:"login-title"},"一体化监控运维平台"),d.createElement(St,{form:t,layout:"vertical",requiredMark:!0},d.createElement(St.Item,{label:"账户",name:"username",rules:[{required:!0,message:e("请输入用户名")}]},d.createElement(wt,{placeholder:e("请输入用户名"),prefix:d.createElement(O,{className:"site-form-item-icon"})})),d.createElement(St.Item,{label:"密码",name:"password",rules:[{required:!0,message:e("请输入密码")}]},d.createElement(wt,{type:"password",placeholder:e("请输入密码"),onPressEnter:l,prefix:d.createElement(A,{className:"site-form-item-icon"})})),d.createElement(St.Item,null,d.createElement(Ct,{type:"primary",onClick:l},e("登录")))))))}function ea(){return d.createElement("div",{className:"login-warp"})}function ta(){const e=E(),t=xi.parse(e.search),[n,r]=f.exports.useState();return f.exports.useEffect((()=>{var e;(e={code:t.code,state:t.state,redirect:t.redirect||"/"},ji("/api/n9e/auth/callback",{method:Li.Get,params:e})).then((e=>{""===e.err?e.dat&&e.dat.access_token&&e.dat.refresh_token?(localStorage.setItem("access_token",e.dat.access_token),localStorage.setItem("refresh_token",e.dat.refresh_token),window.location.href=e.dat.redirect):console.log(e.dat):r(e.err)})).catch((e=>{r(e.message)}))}),[]),void 0===n?null:d.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center"}},d.createElement("div",null,d.createElement("h1",null,"第三方登录验证失败"),d.createElement("div",{style:{fontSize:14}},n),d.createElement("div",null,d.createElement("a",{href:"/login"},"返回登录页"))))}function na(){const e=E(),t=xi.parse(e.search),[n,r]=f.exports.useState();return f.exports.useEffect((()=>{var e;(e={ticket:t.ticket,state:localStorage.getItem("CAS_state"),redirect:t.redirect||"/"},ji("/api/n9e/auth/callback/cas",{method:Li.Get,params:e})).then((e=>{""===e.err?e.dat&&e.dat.access_token&&e.dat.refresh_token?(localStorage.setItem("access_token",e.dat.access_token),localStorage.setItem("refresh_token",e.dat.refresh_token),window.location.href=e.dat.redirect,localStorage.removeItem("CAS_state")):console.log(e.dat):r(e.err)})).catch((e=>{r(e.message)}))}),[]),void 0===n?null:d.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center"}},d.createElement("div",null,d.createElement("h1",null,"第三方登录验证失败"),d.createElement("div",{style:{fontSize:14}},n),d.createElement("div",null,d.createElement("a",{href:"/login"},"返回登录页"))))}function ra(){const e=E(),t=xi.parse(e.search),[n,r]=f.exports.useState();return f.exports.useEffect((()=>{var e;(e={code:t.code,state:t.state,redirect:t.redirect||"/"},ji("/api/n9e/auth/callback/oauth",{method:Li.Get,params:e})).then((e=>{""===e.err?e.dat&&e.dat.access_token&&e.dat.refresh_token?(localStorage.setItem("access_token",e.dat.access_token),localStorage.setItem("refresh_token",e.dat.refresh_token),window.location.href=e.dat.redirect):console.log(e.dat):r(e.err)})).catch((e=>{r(e.message)}))}),[]),void 0===n?null:d.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center"}},d.createElement("div",null,d.createElement("h1",null,"第三方登录验证失败"),d.createElement("div",{style:{fontSize:14}},n),d.createElement("div",null,d.createElement("a",{href:"/login"},"返回登录页"))))}function ia(e){let t=[];if(e.var){t=e.var.indexOf(",")>-1?e.var.split(","):[e.var];if(_.some(t,(e=>"true"==={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}[e])))return"function"==typeof e.children?d.createElement("div",null,e.children(!0)):d.createElement("div",null,e.children)}return"function"==typeof e.children?d.createElement("div",null,e.children(!1)):null}const aa=["red","orange","blue"],oa=[{value:"prometheus",label:"Prometheus"}],sa={normal:oa,all:[...oa,{value:"elasticsearch",label:"Elasticsearch"},{value:"aliyun-sls",label:"阿里云SLS"}]};var la,ca;(ca=la||(la={})).prometheus="prometheus",ca.elasticsearch="elasticsearch",ca.aliyunSLS="aliyun-sls";const ua=function(e,t=1){return ji("/api/n9e/alert-rule-groups",{method:Li.Get,params:{query:e,p:t,limit:15}})},ha=function(e){return ji(`/api/n9e/alert-rule-group/${e}`,{method:Li.Delete})},pa=function(e){return ji(`/api/n9e/alert-rule-group/${e.id}`,{method:Li.Put,data:e})},da=function(e){return ji(`/api/n9e/busi-group/${e.id}/alert-rules`,{method:Li.Get})},fa=function(e){return ji(`/api/n9e/alert-rule-group/${e}/favorites`,{method:Li.Post,data:{id:e}})},ma=function(e){return ji(`/api/n9e/alert-rule-group/${e}/favorites`,{method:Li.Delete,data:{id:e}})},ga=function(e,t,n){return ji(`/api/n9e/busi-group/${t}/alert-rules`,{method:n,data:e})},ya=function(e,t){return ji(`/api/n9e/busi-group/${t}/alert-rules`,{method:Li.Delete,data:{ids:e}})},va=function(e,t){return ji("/api/n9e/prometheus/api/v1/query",{method:Li.Get,params:e,headers:{"X-Cluster":t}})},Ea=function(e,t){return ji(`/api/n9e/busi-group/${t}/alert-rules/fields`,{method:Li.Put,data:e})};function xa(e){return ji("/api/n9e/busi-groups/alertings",{method:Li.Get,params:{ids:e.join(",")}})}const ba=function(){return ji("/api/n9e/alert-rules/builtin/list",{method:Li.Get})},Ca=function(e,t,n){return ji(`/api/n9e/busi-group/${n}/alert-rules/builtin`,{method:Li.Post,data:{name:e,cluster:t}})},Sa=function(e){return ji("/api/n9e/alert-aggr-views",{method:Li.Post,data:e})},wa=function(e){return ji("/api/n9e/alert-aggr-views",{method:Li.Put,data:e})},Ta=function(e){return ji("/api/fc-brain/data",{method:Li.Get,params:e})};function ka(e){return ji("/api/n9e-plus/ds-query",{method:Li.Post,data:e,headers:{"X-Cluster":"Default"},silence:!0})}function _a(e){return ji("/api/n9e-plus/log-query",{method:Li.Post,data:e,headers:{"X-Cluster":"Default"},silence:!0})}function Oa(e){return ji("/api/n9e-plus/indices",{method:Li.Post,data:e,headers:{"X-Cluster":"Default"}})}function Aa(e){return ji("/api/n9e-plus/fields",{method:Li.Post,data:e,headers:{"X-Cluster":"Default"},silence:!0})}function Ia(e){return ji("/api/n9e-plus/event-ts-query",{method:Li.Post,data:e})}function Ma(e){return ji("/api/n9e-plus/event-log-query",{method:Li.Post,data:e})}function Na(){const[e,t]=f.exports.useState(),[n,r]=f.exports.useState();return f.exports.useEffect((()=>{const e=I().unix();ji("/api/fc-brain/license",{method:Li.Get,silence:!0}).then((n=>{var i,a,o;t(_.round(((null==(i=null==n?void 0:n.data)?void 0:i.expire)-e)/86400)),r(null==(a=null==n?void 0:n.data)?void 0:a.rules_remaining),window.localStorage.setItem("license_rules_remaining",_.toString(null==(o=null==n?void 0:n.data)?void 0:o.rules_remaining))})).catch((e=>{const t=Tt.error({closable:!1,maskClosable:!1,title:"License证书不存在或已过期，请联系Flashcat技术支持",className:"license-off"});setTimeout((()=>{t.destroy()}),1e4)}))}),[]),!e||e>30?null:d.createElement("div",{style:{marginRight:20}},d.createElement(yt,{title:d.createElement("div",null,d.createElement("div",null,"还剩 ",e," 天到期"),n>0?d.createElement("div",null,"还可添加 ",n," 条规则"):d.createElement("div",null,"请尽快联系管理员续费"))},d.createElement("div",{style:{background:"#EBE8F2",borderRadius:16,color:"#6C53B1",fontSize:12,padding:"2px 8px"}},"还剩 ",e," 天到期")))}const Pa=({icon:e,title:t,rightArea:n,introIcon:r,children:i,customArea:a,showBack:o,backPath:s,onChangeCluster:l,hideCluster:c=!0,docFn:u})=>{const{t:h,i18n:p}=Ur(),m=k(),g=ai();let{profile:y}=ci((e=>e.account));const{clusters:v}=ci((e=>e.common)),E=localStorage.getItem("curCluster"),[x,b]=f.exports.useState(E||v[0]);!E&&v.length>0&&(b(v[0]),localStorage.setItem("curCluster",v[0]),g({type:"common/saveData",prop:"curCluster",data:v[0]}));const C=d.createElement(vt,null,d.createElement(vt.Item,{onClick:()=>{m.push("/account/profile/info")}},h("个人信息")),d.createElement(vt.Item,{onClick:()=>{ji("/api/n9e/auth/logout",{method:Li.Post}).then((e=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),g({type:"common/saveData",prop:"clusters",data:[]}),g({type:"common/saveData",prop:"busiGroups",data:[]}),m.push("/login")}))}},h("退出"))),S=d.createElement(vt,{selectedKeys:[x]},v.map((e=>d.createElement(vt.Item,{key:e,onClick:t=>{b(e),l&&l(e),localStorage.setItem("curCluster",e),g({type:"common/saveData",prop:"curCluster",data:e})}},e))));return d.createElement("div",{className:"page-wrapper"},a?d.createElement("div",{className:"page-top-header"},a):d.createElement("div",{className:"page-top-header"},d.createElement("div",{className:"page-header-content"},d.createElement("div",{className:"page-header-title"},o&&d.createElement(M,{onClick:()=>{s?m.push({pathname:s}):m.goBack()},style:{marginRight:"5px"}}),e,t),d.createElement("div",{className:"page-header-right-area"},r,u&&d.createElement("a",{onClick:()=>u(),style:{marginRight:20}},"文档"),!c&&d.createElement("div",{style:{marginRight:20}},"集群：",d.createElement(kt,{overlay:S},d.createElement(Ct,null,x," ",d.createElement(N,null)))),d.createElement(ia,{var:"VITE_IS_ALERT_AI,VITE_IS_ALERT_ES_DS"},d.createElement(Na,null)),d.createElement(kt,{overlay:C,trigger:["click"]},d.createElement("span",{className:"avator"},d.createElement("img",{src:y.portrait||"/image/avatar1.png",alt:""}),d.createElement("span",{className:"display-name"},y.nickname||y.username),d.createElement(N,null)))))),i&&i)};var Fa,La=(Fa=function(e,t){return(Fa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Fa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ra=function(){return(Ra=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Da={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Ba={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},$a={width:"20px",height:"20px",position:"absolute"},za={top:Ra(Ra({},Da),{top:"-5px"}),right:Ra(Ra({},Ba),{left:void 0,right:"-5px"}),bottom:Ra(Ra({},Da),{top:void 0,bottom:"-5px"}),left:Ra(Ra({},Ba),{left:"-5px"}),topRight:Ra(Ra({},$a),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Ra(Ra({},$a),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Ra(Ra({},$a),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Ra(Ra({},$a),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Ha=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return La(t,e),t.prototype.render=function(){return f.exports.createElement("div",{className:this.props.className||"",style:Ra(Ra({position:"absolute",userSelect:"none"},za[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(f.exports.PureComponent),ja=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ga=function(){return(Ga=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Va={width:"auto",height:"auto"},Ya=function(e,t,n){return Math.max(Math.min(e,n),t)},Ua=function(e,t){return Math.round(e/t)*t},qa=function(e,t){return new RegExp(e,"i").test(t)},Wa=function(e){return Boolean(e.touches&&e.touches.length)},Xa=function(e,t,n){void 0===n&&(n=0);var r=t.reduce((function(n,r,i){return Math.abs(r-e)<Math.abs(t[n]-e)?i:n}),0),i=Math.abs(t[r]-e);return 0===n||i<n?t[r]:e},Ka=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},Qa=function(e,t,n,r){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%"))return t*(Number(e.replace("%",""))/100);if(e.endsWith("vw"))return n*(Number(e.replace("vw",""))/100);if(e.endsWith("vh"))return r*(Number(e.replace("vh",""))/100)}return e},Za=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Ja=function(e){function t(t){var n=e.call(this,t)||this;return n.ratio=1,n.resizable=null,n.parentLeft=0,n.parentTop=0,n.resizableLeft=0,n.resizableRight=0,n.resizableTop=0,n.resizableBottom=0,n.targetLeft=0,n.targetTop=0,n.appendBase=function(){if(!n.resizable||!n.window)return null;var e=n.parentNode;if(!e)return null;var t=n.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add("__resizable_base__"):t.className+="__resizable_base__",e.appendChild(t),t},n.removeBase=function(e){var t=n.parentNode;t&&t.removeChild(e)},n.ref=function(e){e&&(n.resizable=e)},n.state={isResizing:!1,width:void 0===(n.propsSize&&n.propsSize.width)?"auto":n.propsSize&&n.propsSize.width,height:void 0===(n.propsSize&&n.propsSize.height)?"auto":n.propsSize&&n.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},n.onResizeStart=n.onResizeStart.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n}return ja(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Va},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,i=this.resizable.style.position;"relative"!==i&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:n,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:r,this.resizable.style.position=i}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,n=function(t){if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&e.propsSize[t].toString().endsWith("%")){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var n=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/n[t]*100+"%"}return Ka(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?Ka(t.width):n("width"),height:t&&void 0!==t.height&&!this.state.isResizing?Ka(t.height):n("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,n=this.parentNode.style.flexWrap;"wrap"!==n&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=n),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==n&&"auto"!==n?e:"auto"},t.prototype.calculateNewMaxFromBoundary=function(e,t){var n,r,i=this.props.boundsByDirection,a=this.state.direction,o=i&&qa("left",a),s=i&&qa("top",a);if("parent"===this.props.bounds){var l=this.parentNode;l&&(n=o?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),r=s?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(n=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,r=s?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(n=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),r=s?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return n&&Number.isFinite(n)&&(e=e&&e<n?e:n),r&&Number.isFinite(r)&&(t=t&&t<r?t:r),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n=this.props.scale||1,r=this.props.resizeRatio||1,i=this.state,a=i.direction,o=i.original,s=this.props,l=s.lockAspectRatio,c=s.lockAspectRatioExtraHeight,u=s.lockAspectRatioExtraWidth,h=o.width,p=o.height,d=c||0,f=u||0;return qa("right",a)&&(h=o.width+(e-o.x)*r/n,l&&(p=(h-f)/this.ratio+d)),qa("left",a)&&(h=o.width-(e-o.x)*r/n,l&&(p=(h-f)/this.ratio+d)),qa("bottom",a)&&(p=o.height+(t-o.y)*r/n,l&&(h=(p-d)*this.ratio+f)),qa("top",a)&&(p=o.height-(t-o.y)*r/n,l&&(h=(p-d)*this.ratio+f)),{newWidth:h,newHeight:p}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,r){var i=this.props,a=i.lockAspectRatio,o=i.lockAspectRatioExtraHeight,s=i.lockAspectRatioExtraWidth,l=void 0===r.width?10:r.width,c=void 0===n.width||n.width<0?e:n.width,u=void 0===r.height?10:r.height,h=void 0===n.height||n.height<0?t:n.height,p=o||0,d=s||0;if(a){var f=(u-p)*this.ratio+d,m=(h-p)*this.ratio+d,g=(l-d)/this.ratio+p,y=(c-d)/this.ratio+p,v=Math.max(l,f),E=Math.min(c,m),x=Math.max(u,g),b=Math.min(h,y);e=Ya(e,v,E),t=Ya(t,x,b)}else e=Ya(e,l,c),t=Ya(t,u,h);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){if("parent"===this.props.bounds){var e=this.parentNode;if(e){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left,this.targetTop=n.top}if(this.resizable){var r=this.resizable.getBoundingClientRect(),i=r.left,a=r.top,o=r.right,s=r.bottom;this.resizableLeft=i,this.resizableRight=o,this.resizableTop=a,this.resizableBottom=s}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var n,r=0,i=0;if(e.nativeEvent&&function(e){return Boolean((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))}(e.nativeEvent)?(r=e.nativeEvent.clientX,i=e.nativeEvent.clientY):e.nativeEvent&&Wa(e.nativeEvent)&&(r=e.nativeEvent.touches[0].clientX,i=e.nativeEvent.touches[0].clientY),this.props.onResizeStart)if(this.resizable)if(!1===this.props.onResizeStart(e,t,this.resizable))return;this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var a=this.window.getComputedStyle(this.resizable);if("auto"!==a.flexBasis){var o=this.parentNode;if(o){var s=this.window.getComputedStyle(o).flexDirection;this.flexDir=s.startsWith("row")?"row":"column",n=a.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var l={original:{x:r,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Ga(Ga({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:n};this.setState(l)}},t.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&Wa(e))try{e.preventDefault(),e.stopPropagation()}catch(uu){}var n=this.props,r=n.maxWidth,i=n.maxHeight,a=n.minWidth,o=n.minHeight,s=Wa(e)?e.touches[0].clientX:e.clientX,l=Wa(e)?e.touches[0].clientY:e.clientY,c=this.state,u=c.direction,h=c.original,p=c.width,d=c.height,f=this.getParentSize(),g=function(e,t,n,r,i,a,o){return r=Qa(r,e.width,t,n),i=Qa(i,e.height,t,n),a=Qa(a,e.width,t,n),o=Qa(o,e.height,t,n),{maxWidth:void 0===r?void 0:Number(r),maxHeight:void 0===i?void 0:Number(i),minWidth:void 0===a?void 0:Number(a),minHeight:void 0===o?void 0:Number(o)}}(f,this.window.innerWidth,this.window.innerHeight,r,i,a,o);r=g.maxWidth,i=g.maxHeight,a=g.minWidth,o=g.minHeight;var y=this.calculateNewSizeFromDirection(s,l),v=y.newHeight,E=y.newWidth,x=this.calculateNewMaxFromBoundary(r,i);this.props.snap&&this.props.snap.x&&(E=Xa(E,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(v=Xa(v,this.props.snap.y,this.props.snapGap));var b=this.calculateNewSizeFromAspectRatio(E,v,{width:x.maxWidth,height:x.maxHeight},{width:a,height:o});if(E=b.newWidth,v=b.newHeight,this.props.grid){var C=Ua(E,this.props.grid[0]),S=Ua(v,this.props.grid[1]),w=this.props.snapGap||0;E=0===w||Math.abs(C-E)<=w?C:E,v=0===w||Math.abs(S-v)<=w?S:v}var T={width:E-h.width,height:v-h.height};if(p&&"string"==typeof p)if(p.endsWith("%"))E=E/f.width*100+"%";else if(p.endsWith("vw")){E=E/this.window.innerWidth*100+"vw"}else if(p.endsWith("vh")){E=E/this.window.innerHeight*100+"vh"}if(d&&"string"==typeof d)if(d.endsWith("%"))v=v/f.height*100+"%";else if(d.endsWith("vw")){v=v/this.window.innerWidth*100+"vw"}else if(d.endsWith("vh")){v=v/this.window.innerHeight*100+"vh"}var k={width:this.createSizeForCssProperty(E,"width"),height:this.createSizeForCssProperty(v,"height")};"row"===this.flexDir?k.flexBasis=k.width:"column"===this.flexDir&&(k.flexBasis=k.height),m.exports.flushSync((function(){t.setState(k)})),this.props.onResize&&this.props.onResize(e,u,this.resizable,T)}},t.prototype.onMouseUp=function(e){var t=this.state,n=t.isResizing,r=t.direction,i=t.original;if(n&&this.resizable){var a={width:this.size.width-i.width,height:this.size.height-i.height};this.props.onResizeStop&&this.props.onResizeStop(e,r,this.resizable,a),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Ga(Ga({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(e){this.setState({width:e.width,height:e.height})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,r=t.handleStyles,i=t.handleClasses,a=t.handleWrapperStyle,o=t.handleWrapperClass,s=t.handleComponent;if(!n)return null;var l=Object.keys(n).map((function(t){return!1!==n[t]?f.exports.createElement(Ha,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:r&&r[t],className:i&&i[t]},s&&s[t]?s[t]:null):null}));return f.exports.createElement("div",{className:o,style:a},l)},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce((function(t,n){return-1!==Za.indexOf(n)||(t[n]=e.props[n]),t}),{}),n=Ga(Ga(Ga({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return f.exports.createElement(r,Ga({ref:this.ref,style:n,className:this.props.className},t),this.state.isResizing&&f.exports.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(f.exports.PureComponent);const eo=_t.Group,to=({dataSource:e,fieldNames:t={},allowNotSelect:n=!1,defaultSelect:r,showBadge:i=!1,badgeInfo:a={},onChange:o})=>{const[s,l]=f.exports.useState(r&&"object"==typeof r?r[t.key||"value"]:r);return d.createElement("div",{className:"radio-list"},e.map((e=>d.createElement(Ot,{key:e.id},d.createElement(At,{span:i?20:24},d.createElement("div",{className:g({"n9e-metric-views-list-content-item":!0,active:e.id==s}),key:e.id,onClick:t=>{e.id!==s&&(l(e.id),o&&o(e.id,e))}},d.createElement("span",{className:"name"},e.name))),i&&d.createElement(At,{span:4},d.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},d.createElement(It,{count:a[e.id]||0})))))))},no=e=>{const t=ai(),{clusters:n,curClusterItems:r}=ci((e=>e.common)),[i,a]=f.exports.useState(!1),[o,s]=f.exports.useState(!1);return f.exports.useEffect((()=>{s(n.length===r.length),a(!!r.length&&r.length<n.length),n.length&&e.onChange&&e.onChange(r)}),[n]),{title:d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement("span",null,"集群")),isShow:e.isShow,shrink:{style:{flex:"none",maxHeight:"200px"}},render:()=>d.createElement(eo,{options:n,value:r,style:{flexShrink:1,overflow:"auto"},onChange:r=>{var i;t({type:"common/saveData",prop:"curClusterItems",data:i=r}),localStorage.setItem("curClusterItems",JSON.stringify(i)),e.onChange&&e.onChange(i),a(!!r.length&&r.length<n.length),s(r.length===n.length)}})}},ro=e=>{const t=ai(),{busiGroups:n,curBusiItem:r}=ci((e=>e.common)),{alertings:i}=ci((e=>e.event)),[a,o]=f.exports.useState(n),s=e.showNotGroupItem;if(!localStorage.getItem("curBusiItem")&&!s&&n.length>0&&(localStorage.setItem("curBusiItem",JSON.stringify(n[0])),t({type:"common/saveData",prop:"curBusiItem",data:n[0]})),e.defaultSelect&&n.length>0&&r.id!==e.defaultSelect){const r=n.find((t=>t.id===e.defaultSelect));r&&(localStorage.setItem("curBusiItem",JSON.stringify(r)),t({type:"common/saveData",prop:"curBusiItem",data:r}))}const l=f.exports.useMemo((()=>e.defaultSelect?{id:e.defaultSelect}:r.id?r:{id:void 0}),[r]);return f.exports.useEffect((()=>{a.length||o(n)}),[n]),f.exports.useEffect((()=>{n.length&&e.onChange&&(s||!s&&l.id)&&e.onChange(l.id,l)}),[n,l]),{title:"业务组",isShow:!0,shrink:!0,render:()=>d.createElement(d.Fragment,null,d.createElement(wt,{className:"left-area-group-search",prefix:d.createElement(P,null),onPressEnter:e=>{e.preventDefault();const n=e.currentTarget.value;n?Ui(n).then((e=>{o(e.dat||[])})):Ui("").then((e=>{const n=e.dat||[];o(n),t({type:"common/saveData",prop:"busiGroups",data:n})}))},placeholder:"请输入业务组名称进行筛选"}),!s&&r.id&&0!==a.length||s?d.createElement(to,{dataSource:s?[{id:0,name:"未归组对象"}].concat(a):a,fieldNames:{key:"id",label:"name",value:"id"},allowNotSelect:s,defaultSelect:l,showBadge:e.showAlertings,badgeInfo:i,onChange:(n,r)=>{n&&(t({type:"common/saveData",prop:"curBusiItem",data:r}),localStorage.setItem("curBusiItem",JSON.stringify(r))),e.onChange&&e.onChange(n,r)}}):d.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",padding:20,marginLeft:-20}},d.createElement("img",{src:"/image/empty.png",width:"64"}),d.createElement("div",{className:"ant-empty-description"},"暂无数据")))}},io=({clusterGroup:e={},busiGroup:t={},eventLevelGroup:n={},eventTypeGroup:r={}})=>{const i=k(),[a,o]=f.exports.useState("1"===localStorage.getItem("leftlist")),s=[no(e),ro(t),{title:"事件级别",isShow:n.isShow,render:()=>d.createElement(to,{dataSource:[{label:"一级告警",value:1},{label:"二级告警",value:2},{label:"三级告警",value:3}],defaultSelect:n.defaultSelect,allowNotSelect:!0,onChange:null==n?void 0:n.onChange})},{title:"事件类别",isShow:r.isShow,render:()=>d.createElement(to,{dataSource:[{label:"Triggered",value:0},{label:"Recovered",value:1}],defaultSelect:r.defaultSelect,allowNotSelect:!0,onChange:null==r?void 0:r.onChange})}],[l,c]=f.exports.useState(_.toNumber(localStorage.getItem("leftwidth")||200));return d.createElement(Ja,{style:{marginRight:a?0:10},size:{width:a?0:l,height:"100%"},enable:{right:!a},onResizeStop:(e,t,n,r)=>{let i=l+r.width;i<200&&(i=200),c(i),localStorage.setItem("leftwidth",i.toString())}},d.createElement("div",{className:a?"left-area collapse":"left-area"},d.createElement("div",{className:"collapse-btn",onClick:()=>{localStorage.setItem("leftlist",a?"0":"1"),o(!a)}},a?d.createElement(L,null):d.createElement(F,null)),s.map((({title:e,isShow:t,shrink:n=!1,render:r},a)=>t&&d.createElement("div",{key:a,className:"left-area-group "+(n?"group-shrink":""),style:"object"==typeof n?n.style:{}},d.createElement("div",{className:"left-area-group-title"},e,"业务组"===e&&d.createElement(R,{onClick:()=>i.push("/busi-groups")})),r())))))};function ao(e){const{t:t}=Ur(),{text:n}=e;return d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(D,{style:{color:"#1473ff"}})," ",t("提示信息")),d.createElement("p",null,n,"需要归属某个业务组，请先  ",d.createElement(B,{to:"/busi-groups"},"创建业务组")))}const oo=e=>{var t=e,{onSearch:n}=t,r=c(t,["onSearch"]);Ur();const[i,a]=f.exports.useState("");return d.createElement(wt,s({prefix:d.createElement(P,null),value:i,onChange:e=>{a(e.target.value),""===e.target.value&&n&&n("")},onPressEnter:e=>{n&&n(i)}},r))};var so,lo,co,uo,ho,po,fo,mo,go,yo;(lo=so||(so={}))[lo.n9e=0]="n9e",lo[lo.prometheus=1]="prometheus",(uo=co||(co={}))[uo.Enable=0]="Enable",uo[uo.UnEnable=1]="UnEnable",(po=ho||(ho={}))[po.Send=0]="Send",po[po.UnSend=1]="UnSend",(mo=fo||(fo={}))[mo.First=1]="First",mo[mo.Second=2]="Second",mo[mo.Third=3]="Third",(yo=go||(go={}))[yo.Favorite=0]="Favorite",yo[yo.Common=1]="Common";const vo=["30","50","100","300"],Eo=[{value:"1h"},{value:"2h"},{value:"3h"},{value:"6h"},{value:"12h"},{value:"1d"},{value:"2d"},{value:"3d"},{value:"5d"},{value:"7d"},{value:"14d"},{value:"30d"},{value:"60d"},{value:"90d"},{value:"99y"}];function xo(e){Ur();const{onClick:t,className:n}=e,[r,i]=f.exports.useState(!1);return d.createElement(Ct,{className:n?n+" reload-icon":"reload-icon",loading:r,onClick:e=>{r||(i(!0),t(),setTimeout((()=>{i(!1)}),1e3))},icon:d.createElement($,{className:"refresh",spin:r})})}const bo=e=>{var t=e,{text:n}=t,r=c(t,["text"]);return Ur(),Array.from(n).reduce(((e,t)=>e+t.charCodeAt(0)),0),d.createElement(Mt,s({color:"purple"},r),n)};const{Option:Co}=Nt,{TextArea:So}=wt;var wo,To;function ko(e){const{t:t}=Ur(),n=f.exports.useRef(null),{status:r,title:i,exportData:a,description:o,onClose:c,onSubmit:u,crossCluster:h=!0,onSuccess:p,label:m,fetchBuiltinFunc:g,submitBuiltinFunc:y,bgid:v}=e,[E]=St.useForm(),{clusters:x}=ci((e=>e.common)),[b,C]=f.exports.useState([]),[S,w]=f.exports.useState([]),[T,k]=f.exports.useState(),_=[{title:m,dataIndex:"name"},{title:"导入结果",dataIndex:"isTrue",render:e=>e?d.createElement(j,{style:{color:"#389e0d",fontSize:"18px"}}):d.createElement(G,{style:{color:"#d4380d",fontSize:"18px"}})},{title:"错误消息",dataIndex:"msg"}],O=[{title:`${m}名称`,dataIndex:"name"},{title:"操作",dataIndex:"id",render:(e,t)=>d.createElement(Ct,{type:"link",onClick:()=>{y&&y(t.name,E.getFieldValue("cluster"),v).then((({dat:e})=>{k(Object.keys(e).map((t=>({name:t,key:t,isTrue:!e[t],msg:e[t]}))))}))}},"导入")}],A=()=>{c(),T&&T.some((e=>e.isTrue))&&p&&p()};f.exports.useEffect((()=>{r!==wo.BuiltIn&&r!=wo.Import||g&&g().then((e=>{let t=e.dat.map((e=>({name:e})));w(t),C(t)})),k(void 0)}),[r]);const I=f.exports.isValidElement(i)?i:r===wo.Export?t("导出")+i:t("导入")+i;return d.createElement(Tt,{title:I,destroyOnClose:!0,wrapClassName:f.exports.isValidElement(i)?"import-modal-wrapper":void 0,footer:r===wo.Import&&d.createElement(d.Fragment,null,d.createElement(Ct,{key:"delete",onClick:A},t("取消")),T?d.createElement(Ct,{type:"primary",onClick:A},t("关闭")):d.createElement(Ct,{key:"submit",type:"primary",onClick:async()=>{await E.validateFields();const e=E.getFieldsValue();try{const t=JSON.parse(e.import);if(!Array.isArray(t))return void Et.error(i+"JSON需要时数组");const n=t.map((t=>l(s({},t),{cluster:h?e.cluster:void 0}))),r=await u(n),a=Object.keys(r).map((e=>({name:e,key:e,isTrue:!r[e],msg:r[e]})));k(a)}catch(n){Et.error(t("数据有误:")+n)}}},t("确定"))),onCancel:A,afterClose:()=>k(void 0),visible:"hide"!==r,width:600},d.createElement("div",{style:{color:"#999"}},o&&d.createElement("p",null,o),r===wo.Export&&d.createElement("p",null,d.createElement("a",{onClick:()=>{Ai([a],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>Ii(a,t)},d.createElement(z,null),"复制JSON内容到剪贴板"))),(()=>{switch(r){case wo.Export:return d.createElement("div",{contentEditable:"true",suppressContentEditableWarning:!0,ref:n,className:"export-dialog code-area"},d.createElement("pre",null,a));case wo.BuiltIn:return d.createElement(d.Fragment,null,d.createElement(St,{form:E,preserve:!1,layout:"vertical"},h&&d.createElement(St.Item,{label:t("生效集群："),name:"cluster",initialValue:x[0]||"Default",rules:[{required:!0,message:t("生效集群不能为空")}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null)},null==x?void 0:x.map((e=>d.createElement(Co,{value:e,key:e},e)))))),d.createElement(wt,{placeholder:`请输入要查询的${m}名称`,prefix:d.createElement(P,null),style:{marginBottom:"8px"},allowClear:!0,onChange:e=>{let t=e.target.value,n=[];b.forEach((e=>{-1!=e.name.toLowerCase().indexOf(t.toLowerCase())&&n.push(e)})),w(n)}}),d.createElement(Ft,{className:"samll_table",dataSource:S,columns:O,pagination:!(S.length<5)&&{pageSize:5},size:"small"}),T&&d.createElement(d.Fragment,null,d.createElement(Pt,null),d.createElement(Ft,{className:"samll_table",dataSource:T,columns:_,size:"small",pagination:!(T.length<5)&&{pageSize:5}})));case wo.Import:return d.createElement(d.Fragment,null,d.createElement(St,{form:E,preserve:!1,layout:"vertical"},h?d.createElement(St.Item,{label:t("生效集群："),name:"cluster",initialValue:x[0]||"Default",rules:[{required:!0,message:t("生效集群不能为空")}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null)},null==x?void 0:x.map((e=>d.createElement(Co,{value:e,key:e},e))))):null,d.createElement(St.Item,{label:(f.exports.isValidElement(i)?m:i)+t("JSON："),name:"import",rules:[{required:!0,message:t("请输入")+i,validateTrigger:"trigger"}]},d.createElement(So,{className:"code-area",placeholder:t("请输入")+(f.exports.isValidElement(i)?m:i),rows:4}))),T&&d.createElement(d.Fragment,null,d.createElement(Pt,null),d.createElement(Ft,{className:"samll_table",dataSource:T,columns:_,pagination:!1,size:"small"})))}})())}(To=wo||(wo={})).Import="import",To.Export="export",To.BuiltIn="builtin",To.None="hide";const _o=function(e={}){return ji("/api/n9e/users",{method:Li.Get,params:e})},Oo=function(e){const t=e?e.limit?e:l(s({},e),{limit:200}):{limit:200};return ji("/api/n9e/user-groups",{method:Li.Get,params:t})},Ao=function(e={}){return ji("/api/n9e/busi-groups",{method:Li.Get,params:e})},Io=function(e){return ji(`/api/n9e/busi-group/${e}`,{method:Li.Get}).then((e=>e&&e.dat))},Mo=function(e){return ji(`/api/n9e/user-group/${e}`,{method:Li.Get}).then((e=>e&&e.dat))},No=function(){return ji("/api/n9e/notify-channels",{method:Li.Get}).then((e=>e&&e.dat))},Po=function(){return ji("/api/n9e/contact-keys",{method:Li.Get}).then((e=>e&&e.dat))},Fo=({checked:e,onChange:t,label:n})=>d.createElement(d.Fragment,null,d.createElement(Lt,{checked:e,onChange:t,style:{marginRight:5}}),n),Lo=sn.theme({".cm-content":{padding:0},"&.cm-editor.cm-focused":{outline:"unset"},".cm-scroller":{overflow:"hidden",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono;",lineHeight:"unset"},".cm-matchingBracket":{color:"#000",backgroundColor:"#dedede",fontWeight:"bold",outline:"1px dashed transparent"},".cm-nonmatchingBracket":{borderColor:"red"},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{maxHeight:"350px",fontFamily:'"DejaVu Sans Mono", monospace',maxWidth:"unset"},"& > ul > li":{padding:"2px 1em 2px 3px",overflowY:"hidden"},"& > ul > li[aria-selected]":{backgroundColor:"#a7d0f2",color:"unset"},minWidth:"30%"},".cm-completionDetail":{float:"right",color:"#999"},".cm-tooltip.cm-completionInfo":{marginTop:"-11px",padding:"10px",fontFamily:"'Open Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;",border:"none",minWidth:"250px",maxWidth:"min-content"},".cm-completionInfo.cm-completionInfo-right":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",left:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginLeft:"12px"},".cm-completionInfo.cm-completionInfo-left":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",right:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginRight:"12px"},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold",color:"#0066bf"},".cm-selectionMatch":{backgroundColor:"#e6f3ff"},".cm-diagnostic":{"&.cm-diagnostic-error":{borderLeft:"3px solid #e65013"}},".cm-completionIcon":{boxSizing:"content-box",fontSize:"16px",lineHeight:"1",marginRight:"10px",verticalAlign:"top","&:after":{content:"'\\ea88'"},fontFamily:"codicon",paddingRight:"0",opacity:"1",color:"#007acc"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\ea8c'"},color:"#652d90"},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\eb5f'"},color:"#007acc"},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\eb62'"},color:"#616161"},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'\\ea95'"},color:"#ee9d28"}});sn.theme({".cm-tooltip":{backgroundColor:"#f8f8f8",borderColor:"rgba(52, 79, 113, 0.2)"},".cm-tooltip.cm-tooltip-autocomplete":{"& li:hover":{backgroundColor:"#ddd"},"& > ul > li[aria-selected]":{backgroundColor:"#d6ebff",color:"unset"}},".cm-tooltip.cm-completionInfo":{backgroundColor:"#d6ebff"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#d6ebff"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#d6ebff"}},".cm-line":{"&::selection":{backgroundColor:"#add6ff"},"& > span::selection":{backgroundColor:"#add6ff"}}},{dark:!1}),sn.theme({".cm-content":{caretColor:"#fff"},".cm-tooltip.cm-completionInfo":{backgroundColor:"#333338"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#333338"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#333338"}},".cm-line":{"&::selection":{backgroundColor:"#767676"},"& > span::selection":{backgroundColor:"#767676"}}},{dark:!0});const Ro=ln.define([{tag:cn.name,color:"#000"},{tag:cn.number,color:"#09885a"},{tag:cn.string,color:"#a31515"},{tag:cn.keyword,color:"#008080"},{tag:cn.function(cn.variableName),color:"#008080"},{tag:cn.labelName,color:"#800000"},{tag:cn.operator},{tag:cn.modifier,color:"#008080"},{tag:cn.paren},{tag:cn.squareBracket},{tag:cn.brace},{tag:cn.invalid,color:"red"},{tag:cn.comment,color:"#888",fontStyle:"italic"}]);var Do,Bo={},$o={exports:{}};(Do=$o).exports=function(e){return e&&e.__esModule?e:{default:e}},Do.exports.default=Do.exports,Do.exports.__esModule=!0;var zo={};Object.defineProperty(zo,"__esModule",{value:!0}),zo.default=void 0;zo.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};var Ho={},jo={exports:{}};!function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(jo);var Go={};Object.defineProperty(Go,"__esModule",{value:!0});var Vo=Go.default=void 0,Yo={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};Vo=Go.default=Yo;var Uo={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};e.default=t}(Uo),function(e){var t=$o.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(jo.exports),r=t(Go),i=t(Uo),a={lang:(0,n.default)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},r.default),timePickerLocale:(0,n.default)({},i.default)};a.lang.ok="确定";var o=a;e.default=o}(Ho);var qo={};!function(e){var t=$o.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Ho).default;e.default=n}(qo),function(e){var t=$o.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(zo),r=t(Ho),i=t(Uo),a=t(qo),o="${label}不是一个有效的${type}",s={locale:"zh-cn",Pagination:n.default,DatePicker:r.default,TimePicker:i.default,Calendar:a.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};e.default=s}(Bo);var Wo=V(Bo),Xo={},Ko={},Qo={};Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.default=void 0;Qo.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var Zo={},Jo={};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.default=void 0;var es={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};Jo.default=es;var ts={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};e.default=t}(ts),function(e){var t=$o.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(jo.exports),r=t(Jo),i=t(ts),a={lang:(0,n.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},r.default),timePickerLocale:(0,n.default)({},i.default)};e.default=a}(Zo);var ns={};!function(e){var t=$o.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Zo).default;e.default=n}(ns),function(e){var t=$o.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Qo),r=t(Zo),i=t(ts),a=t(ns),o="${label} is not a valid ${type}",s={locale:"en",Pagination:n.default,DatePicker:r.default,TimePicker:i.default,Calendar:a.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e.default=s}(Ko),function(e){var t=$o.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Ko).default;e.default=n}(Xo);var rs=V(Xo);function is(e){return function(t){const n=document.createElement("div");function r(){Y.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),Y.render(d.createElement(Rt,{locale:"en"===t.language?rs:Wo},d.createElement(U,null,d.createElement(e,s({},i)))),n),{destroy:r}}}const as={s:{display:"second",displayZh:"秒"},m:{display:"minute",displayZh:"分钟"},h:{display:"hour",displayZh:"小时"},d:{display:"day",displayZh:"天"},w:{display:"week",displayZh:"周"},M:{display:"month",displayZh:"月"},y:{display:"year",displayZh:"年"}},os=[{start:"now-1m",end:"now",display:"Last 1 minutes",displayZh:"最近 1 分钟"},{start:"now-2m",end:"now",display:"Last 2 minutes",displayZh:"最近 2 分钟"},{start:"now-3m",end:"now",display:"Last 3 minutes",displayZh:"最近 3 分钟"},{start:"now-5m",end:"now",display:"Last 5 minutes",displayZh:"最近 5 分钟"},{start:"now-15m",end:"now",display:"Last 15 minutes",displayZh:"最近 15 分钟"},{start:"now-30m",end:"now",display:"Last 30 minutes",displayZh:"最近 30 分钟"},{start:"now-1h",end:"now",display:"Last 1 hour",displayZh:"最近 1 小时"},{start:"now-3h",end:"now",display:"Last 3 hours",displayZh:"最近 3 小时"},{start:"now-6h",end:"now",display:"Last 6 hours",displayZh:"最近 6 小时"},{start:"now-12h",end:"now",display:"Last 12 hours",displayZh:"最近 12 小时"},{start:"now-24h",end:"now",display:"Last 24 hours",displayZh:"最近 24 小时"},{start:"now-2d",end:"now",display:"Last 2 days",displayZh:"最近 2 天"},{start:"now-7d",end:"now",display:"Last 7 days",displayZh:"最近 7 天"},{start:"now-30d",end:"now",display:"Last 30 days",displayZh:"最近 30 天"},{start:"now-90d",end:"now",display:"Last 90 days",displayZh:"最近 90 天"},{start:"now-1d/d",end:"now-1d/d",display:"Yesterday",displayZh:"昨天"},{start:"now-2d/d",end:"now-2d/d",display:"Day before yesterday",displayZh:"前天"},{start:"now-7d/d",end:"now-7d/d",display:"This day last week",displayZh:"上周今天"},{start:"now-1w/w",end:"now-1w/w",display:"Previous week",displayZh:"上周"},{start:"now-1M/M",end:"now-1M/M",display:"Previous month",displayZh:"上个月"},{start:"now/d",end:"now/d",display:"Today",displayZh:"今天"},{start:"now/d",end:"now",display:"Today so far",displayZh:"今天到现在"},{start:"now/w",end:"now/w",display:"This week",displayZh:"本周"},{start:"now/w",end:"now",display:"This week so far",displayZh:"本周到现在"},{start:"now/M",end:"now/M",display:"This month",displayZh:"本月"},{start:"now/M",end:"now",display:"This month so far",displayZh:"本月到现在"}],ss={months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_")},ls=["y","M","w","d","h","m","s","Q"];function cs(e){return!!e&&!("string"!=typeof e||"now"!==e.substring(0,3)&&!e.includes("||"))}function us(e,t){if(e){if("string"!=typeof e)return I.isMoment(e)?e:q.exports.isDate(e)?I(e):void 0;{let n,r,i,a="";return"now"===e.substring(0,3)?(n=I(),a=e.substring("now".length)):(r=e.indexOf("||"),-1===r?(i=e,a=""):(i=e.substring(0,r),a=e.substring(r+2)),n=I(i,I.ISO_8601)),a.length?function(e,t,n){const r=e.replace(/\s/g,""),i=t;let a=0;const o=r.length;for(;a<o;){const e=r.charAt(a++);let t,o,s;if("/"===e)t=0;else if("+"===e)t=1;else{if("-"!==e)return;t=2}if(isNaN(parseInt(r.charAt(a),10)))o=1;else if(2===r.length)o=parseInt(r.charAt(a),10);else{const e=a;for(;!isNaN(parseInt(r.charAt(a),10));)if(a++,a>10)return;o=parseInt(r.substring(e,a),10)}if(0===t&&1!==o)return;if(s=r.charAt(a++),!q.exports.includes(ls,s))return;0===t?n?i.endOf(s):i.startOf(s):1===t?i.add(o,s):2===t&&i.subtract(o,s)}return i}(a,n,t):n}}}function hs(e){const t=us(e);return!!t&&(!!I.isMoment(t)&&t.isValid())}const ps={};function ds(e,t){const n=ps[e.start.toString()+" ~ "+e.end.toString()];if(n)return n.displayZh;if(I.isMoment(e.start)&&I.isMoment(e.end))return I(e.start).format(t)+" ~ "+I(e.end).format(t);if(I.isMoment(e.start)){return us(e.end)?I(e.start).format(t)+" ~ "+e.end:""}if(I.isMoment(e.end)){return us(e.start)?e.start+" ~ "+I(e.end).format(t):""}if("now"===e.end.toString()){return function(e){const t=0!==e.indexOf("+");-1===e.indexOf("now")&&(e=(t?"now-":"now")+e);let n=ps[e+" ~ now"];if(n)return n;n=t?{start:e,end:"now"}:{start:"now",end:e};const r=/^now([-+])(\d+)(\w)/.exec(e);if(r){const e=r[3],i=parseInt(r[2],10),a=as[e];a&&(n.displayZh=t?"最近 ":"接下来 ",n.displayZh+=i+" "+a.displayZh,n.section=a.section)}else n.displayZh=n.start+" ~ "+n.end,n.invalid=!0;return n}(e.start).displayZh}return e.start.toString()+" ~ "+e.end.toString()}_.forEach(os,(e=>{ps[e.start+" ~ "+e.end]=e}));const fs=(e,t)=>I.isMoment(e)?e.format(t):e,ms=e=>({start:us(e.start),end:us(e.end,!0)}),gs=e=>{const t=ms(e);return{start:I(t.start).unix(),end:I(t.end).unix()}};I.locale("zh-cn",ss);const ys=()=>{const e=localStorage.getItem("flashcat-timeRangePicker-absolute-history");if(e)try{return _.unionWith(JSON.parse(e),_.isEqual)}catch(uu){return console.log(uu),[]}return[]},vs=(e,t)=>{const n=ys(),r=_.cloneDeep(e);r.start=fs(r.start,t),r.end=fs(r.end,t);const i=_.unionWith([r,...n],_.isEqual).slice(0,4);try{const e=JSON.stringify(i);localStorage.setItem("flashcat-timeRangePicker-absolute-history",e)}catch(uu){console.log(uu)}};function Es(e){const t=ys(),{value:n,onChange:r=(()=>{}),dateFormat:i="YYYY-MM-DD HH:mm",placeholder:a="请选择时间",allowClear:o=!1,onClear:c=(()=>{}),extraFooter:u}=e,[h,p]=f.exports.useState(!1),[m,y]=f.exports.useState(),[v,E]=f.exports.useState(""),[x,b]=f.exports.useState(""),[C,S]=f.exports.useState({start:void 0,end:void 0}),w=e=>{const t={start:"开始时间",end:"结束时间"},n=I(m?m[e]:void 0,!0);return d.createElement("div",{className:"mb10"},d.createElement("span",null,t[e]),d.createElement(wt.Group,{compact:!0,style:{marginTop:4}},d.createElement(Dt,{title:`选择${t[e]}`,placement:"leftTop",trigger:"click",overlayClassName:"flashcat-timeRangePicker-single-popover",getPopupContainer:()=>document.body,content:d.createElement(Bt,{prefixCls:"ant-picker",generateConfig:$t,locale:Vo,showTime:{defaultValue:"start"===e?I().startOf("day"):I().endOf("day"),showSecond:!1},disabledDate:t=>"start"===e?t&&t.valueOf()>I(null==m?void 0:m.end,!0).valueOf():t&&t.valueOf()<I(null==m?void 0:m.start,!0).valueOf(),value:n.isValid()?n:void 0,onChange:t=>{const n=l(s({},m||{}),{[e]:t});"start"!==e||I.isMoment(n.end)||(n.end=I(n.start).endOf("day")),"end"!==e||I.isMoment(n.start)||(n.start=I(n.end).startOf("day")),y(n),vs(n,i)}})},d.createElement(Ct,{danger:"invalid"===C[e],icon:d.createElement(W,null)})),d.createElement(wt,{style:{width:"calc(100% - 32px)"},className:"invalid"===C[e]?"ant-input-status-error":"",value:m?fs(m[e],i):void 0,onChange:t=>{const n=t.target.value;if(S(l(s({},C),{[e]:hs(n)?void 0:"invalid"})),hs(n)){const t=l(s({},m||{}),{[e]:cs(n)?n:I(n)});y(t)}else y(l(s({},m||{}),{[e]:n}))},onBlur:t=>{const n=t.target.value,r="start"===e?"end":"start";m&&!cs(n)&&I.isMoment(m[r])&&vs(l(s({},m),{[e]:n}),i)}})),d.createElement("div",{className:"flashcat-timeRangePicker-single-status"},"invalid"===C[e]?"时间格式错误":void 0))};return f.exports.useEffect((()=>{n&&(y(n),E(ds(n,i)))}),[JSON.stringify(n),h]),d.createElement(d.Fragment,null,d.createElement(Dt,{overlayClassName:"flashcat-timeRangePicker-container",content:d.createElement(d.Fragment,null,d.createElement("div",{className:"flashcat-timeRangePicker"},d.createElement(Ot,null,d.createElement(At,{span:15},d.createElement("div",{className:"flashcat-timeRangePicker-left"},w("start"),w("end"),d.createElement("div",{className:"flashcat-timeRangePicker-absolute-history"},d.createElement("span",null,"最近使用的时间范围"),d.createElement("ul",{style:{marginTop:8}},_.map(t,((e,t)=>d.createElement("li",{key:e.start+e.end+t,onClick:()=>{const t={start:cs(e.start)?e.start:I(e.start),end:cs(e.end)?e.end:I(e.end)};y(t),r(t),vs(t,i),p(!1)}},ds(e,i)))))))),d.createElement(At,{span:9},d.createElement("div",{className:"flashcat-timeRangePicker-ranges"},d.createElement(wt,{placeholder:"搜索快捷选项",prefix:d.createElement(P,null),value:x,onChange:e=>{b(e.target.value)}}),d.createElement("ul",null,_.map(_.filter(os,(e=>e.displayZh.indexOf(x)>-1)),(e=>d.createElement("li",{key:e.display,className:g({active:e.start===(null==m?void 0:m.start)&&e.end===(null==m?void 0:m.end)}),onClick:()=>{const t={start:e.start,end:e.end};y(t),r(t),p(!1),vs(t,i)}},e.displayZh)))))))),d.createElement("div",{className:"flashcat-timeRangePicker-footer"},d.createElement(Ct,{type:"primary",onClick:()=>{"invalid"!==C.start&&"invalid"!==C.end&&(r(m),p(!1))}},"确定"),u&&u(p))),trigger:"click",placement:"bottomRight",visible:h,onVisibleChange:e=>{p(e)}},d.createElement(Ct,{style:e.style,className:g({"flashcat-timeRangePicker-target":!0,"flashcat-timeRangePicker-target-allowClear":o&&v}),onClick:()=>{p(!h)}},e.label||v||a,!e.label&&d.createElement("span",{className:"flashcat-timeRangePicker-target-icon"},h?d.createElement(X,null):d.createElement(N,null),d.createElement(G,{onClick:e=>{e.nativeEvent.stopImmediatePropagation(),e.stopPropagation(),y(void 0),E(""),c()}})))))}const xs={0:"off",5:"5s",10:"10s",20:"20s",30:"30s",60:"1m",120:"2m",180:"3m",300:"5m",600:"10m"};var bs=d.forwardRef((function(e,t){const n=e.localKey?_.toNumber(window.localStorage.getItem(e.localKey)):0,[r,i]=f.exports.useState(e.intervalSeconds||n),[a,o]=f.exports.useState(!1),s=f.exports.useRef();return f.exports.useEffect((()=>{s.current&&clearInterval(s.current),r&&(s.current=setInterval((()=>{e.onRefresh()}),1e3*r))}),[r,e.onRefresh]),f.exports.useEffect((()=>()=>{s.current&&clearInterval(s.current)}),[]),f.exports.useEffect((()=>{i(e.intervalSeconds||n)}),[e.intervalSeconds]),f.exports.useImperativeHandle(t,(()=>({closeRefresh(){i(0),e.localKey&&window.localStorage.setItem(e.localKey,"0")}}))),d.createElement("div",{className:"auto-refresh-container"},d.createElement(yt,{title:e.tooltip},d.createElement(Ct,{className:"refresh-btn",icon:d.createElement(K,null),onClick:e.onRefresh})),d.createElement(kt,{trigger:["click"],visible:a,onVisibleChange:e=>{o(e)},overlay:d.createElement(vt,{onClick:t=>{i(_.toNumber(t.key)),e.localKey&&window.localStorage.setItem(e.localKey,t.key),e.onIntervalSecondsChange&&e.onIntervalSecondsChange(_.toNumber(t.key)),o(!1)}},_.map(xs,((e,t)=>d.createElement(vt.Item,{key:t},e))))},d.createElement(Ct,{onClick:()=>{o(!a)},style:{display:"flex",alignItems:"center"}},xs[r]," ",a?d.createElement(X,null):d.createElement(N,{style:{fontSize:12}}))))}));function Cs(e){const{value:t,onChange:n,style:r,refreshTooltip:i,dateFormat:a="YYYY-MM-DD HH:mm",localKey:o}=e;return d.createElement(zt,{style:r},d.createElement(bs,{localKey:o&&`${o}_refresh`,tooltip:i,onRefresh:()=>{t&&n&&n(l(s({},t),{refreshFlag:_.uniqueId("refreshFlag_ ")}))},intervalSeconds:e.intervalSeconds,onIntervalSecondsChange:e.onIntervalSecondsChange}),d.createElement(Es,l(s({},_.omit(e,["style"])),{onChange:e=>{o&&localStorage.setItem(o,JSON.stringify({start:fs(e.start,a),end:fs(e.end,a)})),n&&n(e)}})))}const Ss=/^now$|^now\-(\d{1,10})([wdhms])$/,ws=e=>{const t=_s(e.start),n=_s(e.end);return{start:t,end:n,display:`${t} to ${n}`}},Ts=e=>{const t=Ss.exec(e);if(!t||3!==t.length)return 0;const[,n,r]=t,i=parseInt(n,10);return isNaN(i)?0:i*ks[r]},ks={w:604800,d:86400,h:3600,m:60,s:1},_s=e=>e<=0?"now":e>=ks.w&&e%ks.w==0?`now-${e/ks.w}w`:e>=ks.d&&e%ks.d==0?`now-${e/ks.d}d`:e>=ks.h&&e%ks.h==0?`now-${e/ks.h}h`:e>=ks.m&&e%ks.m==0?`now-${e/ks.m}m`:`now-${e}s`;I.locale("zh-cn",ss);const Os=os.filter((e=>{return t=e.start,Ss.test(t);var t})),As=()=>{const e=localStorage.getItem("flashcat-timeRangePicker-relative-history");if(e)try{return _.unionWith(JSON.parse(e),_.isEqual)}catch(uu){return console.log(uu),[]}return[]},Is=(e,t)=>{const n=As(),r=_.cloneDeep(e);r.start=fs(r.start,t),r.end=fs(r.end,t);const i=_.unionWith([r,...n],_.isEqual).slice(0,4);try{const e=JSON.stringify(i);localStorage.setItem("flashcat-timeRangePicker-relative-history",e)}catch(uu){console.log(uu)}};function Ms(e){const t=As(),{value:n,onChange:r=(()=>{}),dateFormat:i="YYYY-MM-DD HH:mm",placeholder:a="请选择时间",allowClear:o=!1,onClear:c=(()=>{}),extraFooter:u}=e,[h,p]=f.exports.useState(!1),[m,y]=f.exports.useState(),[v,E]=f.exports.useState(""),[x,b]=f.exports.useState(""),[C,S]=f.exports.useState({start:void 0,end:void 0}),w=e=>(I(m?m[e]:void 0,!0),d.createElement("div",{className:"mb10"},d.createElement("span",null,{start:"开始时间",end:"结束时间"}[e]),d.createElement(wt.Group,{compact:!0,style:{marginTop:4}},d.createElement(wt,{style:{width:"calc(100% - 32px)"},className:"invalid"===C[e]?"ant-input-status-error":"",value:m?fs(m[e],i):void 0,onChange:t=>{const n=t.target.value;if(S(l(s({},C),{[e]:hs(n)?void 0:"invalid"})),hs(n)){const t=l(s({},m||{}),{[e]:cs(n)?n:I(n)});y(t)}else y(l(s({},m||{}),{[e]:n}))},onBlur:t=>{const n=t.target.value,r="start"===e?"end":"start";m&&!cs(n)&&I.isMoment(m[r])&&Is(l(s({},m),{[e]:n}),i)}})),d.createElement("div",{className:"flashcat-timeRangePicker-single-status"},"invalid"===C[e]?"时间格式错误":void 0)));return f.exports.useEffect((()=>{n&&(y(n),E(ds(n,i)))}),[JSON.stringify(n),h]),d.createElement(d.Fragment,null,d.createElement(Dt,{overlayClassName:"flashcat-timeRangePicker-container",content:d.createElement(d.Fragment,null,d.createElement("div",{className:"flashcat-timeRangePicker"},d.createElement(Ot,null,d.createElement(At,{span:15},d.createElement("div",{className:"flashcat-timeRangePicker-left"},w("start"),w("end"),d.createElement("div",{className:"flashcat-timeRangePicker-absolute-history"},d.createElement("span",null,"最近使用的时间范围"),d.createElement("ul",{style:{marginTop:8}},_.map(t,((e,t)=>d.createElement("li",{key:e.start+e.end+t,onClick:()=>{const t={start:cs(e.start)?e.start:I(e.start),end:cs(e.end)?e.end:I(e.end)};y(t),r(t),Is(t,i),p(!1)}},ds(e,i)))))))),d.createElement(At,{span:9},d.createElement("div",{className:"flashcat-timeRangePicker-ranges"},d.createElement(wt,{placeholder:"搜索快捷选项",prefix:d.createElement(P,null),value:x,onChange:e=>{b(e.target.value)}}),d.createElement("ul",null,_.map(_.filter(Os,(e=>e.displayZh.indexOf(x)>-1)),(e=>d.createElement("li",{key:e.display,className:g({active:e.start===(null==m?void 0:m.start)&&e.end===(null==m?void 0:m.end)}),onClick:()=>{const t={start:e.start,end:e.end};y(t),r(t),p(!1),Is(t,i)}},e.displayZh)))))))),d.createElement("div",{className:"flashcat-timeRangePicker-footer"},d.createElement(Ct,{type:"primary",onClick:()=>{"invalid"!==C.start&&"invalid"!==C.end&&(r(m),p(!1))}},"确定"),u&&u(p))),trigger:"click",placement:"bottomRight",visible:h,onVisibleChange:e=>{p(e)}},d.createElement(Ct,{style:e.style,className:g({"flashcat-timeRangePicker-target":!0,"flashcat-timeRangePicker-target-allowClear":o&&v}),onClick:()=>{p(!h)}},e.label||v||a,!e.label&&d.createElement("span",{className:"flashcat-timeRangePicker-target-icon"},h?d.createElement(X,null):d.createElement(N,null),d.createElement(G,{onClick:e=>{e.nativeEvent.stopImmediatePropagation(),e.stopPropagation(),y(void 0),E(""),c()}})))))}function Ns(e){const{localKey:t,dateFormat:n="YYYY-MM-DD HH:mm",onChange:r}=e;return d.createElement(Es,l(s({},e),{onChange:e=>{t&&localStorage.setItem(t,JSON.stringify({start:fs(e.start,n),end:fs(e.end,n)})),r&&r(e)}}))}function Ps(e){return d.createElement("div",{className:"prom-query-builder-formitem",style:s({},e.style||{})},d.createElement("div",{className:"prom-query-builder-formitem-label"},e.label),d.createElement("div",null,e.children))}function Fs(e){const{datasourceValue:t,params:n,value:r,onChange:i}=e,[a,o]=f.exports.useState([]),[l,c]=f.exports.useState();return f.exports.useEffect((()=>{(function(e={},t){return ji("/api/n9e/prometheus/api/v1/label/__name__/values",{method:Li.Get,params:s({},e),headers:{"X-Cluster":t}})})(n,t).then((e=>{o(e.data)}))}),[]),f.exports.useEffect((()=>{c(r)}),[r]),d.createElement(Ps,{label:"指标",style:{width:"calc(50% - 4px)"}},d.createElement(Ht,{style:{width:"100%"},options:_.map(a,(e=>({value:e}))),value:l,filterOption:(e,t)=>!t||!t.value||-1!==t.value.indexOf(e),onSearch:e=>{c(e)},onBlur:e=>{i(e.target.value)},onSelect:e=>{i(e)}}))}const Ls=(e,t,n)=>{const r=_.map(_.filter(t,(e=>n?e.label!==n:!!e.label&&!!e.value)),(({label:e,value:t,op:n})=>`${e}${n}"${t}"`));return`{__name__="${e}"${_.isEmpty(r)?"":`,${r.join(", ")}`}}`};function Rs(e){const{metric:t,labels:n,datasourceValue:r,params:i,style:a,size:o,value:c,onChange:u}=e,[h,p]=f.exports.useState([]),[m,g]=f.exports.useState();return f.exports.useEffect((()=>{t&&function(e,t){return ji("/api/n9e/prometheus/api/v1/labels",{method:Li.Get,params:s({},e),headers:{"X-Cluster":t}})}(l(s({},i),{"match[]":Ls(t,n,c)}),r).then((e=>{p(e.data)}))}),[t,n]),f.exports.useEffect((()=>{g(c)}),[c]),d.createElement(Ht,{size:o,style:s({},a||{}),options:_.map(h,(e=>({value:e}))),value:m,filterOption:(e,t)=>!t||!t.value||-1!==t.value.indexOf(e),onSearch:e=>{g(e)},onBlur:e=>{u(e.target.value)},onSelect:e=>{u(e)}})}function Ds(e){const{label:t,datasourceValue:n,params:r,style:i,value:a,onChange:o}=e,[l,c]=f.exports.useState([]),[u,h]=f.exports.useState();return f.exports.useEffect((()=>{t&&function(e,t,n){return ji(`/api/n9e/prometheus/api/v1/label/${e}/values`,{method:Li.Get,params:s({},t),headers:{"X-Cluster":n}})}(t,r,n).then((e=>{c(e.data)}))}),[t]),f.exports.useEffect((()=>{h(a)}),[a]),d.createElement(Ht,{style:s({},i||{}),options:_.map(l,(e=>({value:e}))),value:u,filterOption:(e,t)=>!t||!t.value||-1!==t.value.indexOf(e),onSearch:e=>{h(e)},onBlur:e=>{o(e.target.value)},onSelect:e=>{o(e)}})}function Bs(e){const{datasourceValue:t,metric:n,params:r,value:i,onChange:a}=e,{list:o,remove:c,getKey:u,insert:h,replace:p}=Q(i||[{label:"",value:"",op:"="}]);return f.exports.useEffect((()=>{a(o)}),[o]),d.createElement(d.Fragment,null,d.createElement(Ps,{label:d.createElement(zt,null,"标签过滤",d.createElement(Z,{onClick:()=>{h(o.length,{label:"",value:"",op:"="})}})),style:{width:o.length>1?"100%":"calc(50% - 4px)"}},d.createElement("div",{className:"prom-query-builder-labels-container"},_.map(o,((e,i)=>d.createElement(wt.Group,{compact:!0,key:u(i),style:{width:o.length>1?"calc(50% - 4px)":"100%"}},d.createElement(Rs,{style:{width:"30%"},metric:n,labels:o,datasourceValue:t,params:r,value:e.label,onChange:t=>{p(i,l(s({},e),{label:t}))}}),d.createElement(Nt,{style:{width:60},value:e.op,onChange:t=>{p(i,l(s({},e),{op:t}))}},d.createElement(Nt.Option,{value:"="},"="),d.createElement(Nt.Option,{value:"!="},"!="),d.createElement(Nt.Option,{value:"=~"},"=~"),d.createElement(Nt.Option,{value:"!~"},"!~")),d.createElement(Ds,{label:e.label,datasourceValue:t,params:r,style:{width:"calc(100% - 30% - 60px - 32px)"},value:e.value,onChange:t=>{p(i,l(s({},e),{value:t}))}}),d.createElement(Ct,{icon:d.createElement(J,null),onClick:()=>{c(i)}})))))))}function $s(e,t,n){return function(e,t,n){const r=t<0?e.length+t:t;if(r>=0&&r<e.length){const r=n<0?e.length+n:n,[i]=e.splice(t,1);e.splice(r,0,i)}}(e=[...e],t,n),e}var zs=function(e,t,n,r,i,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}},Hs=function(){function e(){dt(this,e),h(this,"refs",{})}return ht(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(js)}}]),e}();function js(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function Gs(e,t){return Object.keys(e).reduce((function(n,r){return-1===t.indexOf(r)&&(n[r]=e[r]),n}),{})}var Vs={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},Ys=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function Us(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function qs(e,t){e.style["".concat(Ys,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function Ws(e,t){e.style["".concat(Ys,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function Xs(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function Ks(e,t,n){return Math.max(e,Math.min(n,t))}function Qs(e){return"px"===e.substr(-2)?parseFloat(e):0}function Zs(e){var t=window.getComputedStyle(e);return{bottom:Qs(t.marginBottom),left:Qs(t.marginLeft),right:Qs(t.marginRight),top:Qs(t.marginTop)}}function Js(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function el(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function tl(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function nl(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}function rl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var r={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?r:rl(e.parentNode,t,r)}}function il(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}function al(e){var t=e.lockOffset,n=e.width,r=e.height,i=t,a=t,o="px";if("string"==typeof t){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);zs(null!==s,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),i=parseFloat(t),a=parseFloat(t),o=s[1]}return zs(isFinite(i)&&isFinite(a),"lockOffset value should be a finite. Given %s",t),"%"===o&&(i=i*n/100,a=a*r/100),{x:i,y:a}}function ol(e){var t=e.height,n=e.width,r=e.lockOffset,i=Array.isArray(r)?r:[r,r];zs(2===i.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var a=ne(i,2),o=a[0],s=a[1];return[al({height:t,lockOffset:o,width:n}),al({height:t,lockOffset:s,width:n})]}function sl(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))}(e)?e:sl(e.parentNode):null}function ll(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:Qs(t.gridColumnGap),y:Qs(t.gridRowGap)}:{x:0,y:0}}var cl=27,ul=32,hl=37,pl=38,dl=39,fl=40,ml="A",gl="BUTTON",yl="CANVAS",vl="INPUT",El="OPTION",xl="TEXTAREA",bl="SELECT";function Cl(e){var t="input, textarea, select, canvas, [contenteditable]",n=e.querySelectorAll(t),r=e.cloneNode(!0);return jt(r.querySelectorAll(t)).forEach((function(e,t){("file"!==e.type&&(e.value=n[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===yl&&n[t].width>0&&n[t].height>0)&&e.getContext("2d").drawImage(n[t],0,0)})),r}function Sl(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return dt(this,n),ft(this,mt(n).apply(this,arguments))}return pt(n,t),ht(n,[{key:"componentDidMount",value:function(){m.exports.findDOMNode(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return zs(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return f.exports.createElement(e,te({ref:t},this.props))}}]),n}(f.exports.Component),h(t,"displayName",Js("sortableHandle",e)),n}function wl(e){return null!=e.sortableHandle}var Tl=function(){function e(t,n){dt(this,e),this.container=t,this.onScrollCallback=n}return ht(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,i=e.maxTranslate,a=e.width,o=e.height,s={x:0,y:0},l={x:1,y:1},c=10,u=10,h=this.container,p=h.scrollTop,d=h.scrollLeft,f=h.scrollHeight,m=h.scrollWidth,g=0===p,y=f-p-h.clientHeight==0,v=0===d,E=m-d-h.clientWidth==0;n.y>=i.y-o/2&&!y?(s.y=1,l.y=u*Math.abs((i.y-o/2-n.y)/o)):n.x>=i.x-a/2&&!E?(s.x=1,l.x=c*Math.abs((i.x-a/2-n.x)/a)):n.y<=r.y+o/2&&!g?(s.y=-1,l.y=u*Math.abs((n.y-o/2-r.y)/o)):n.x<=r.x+a/2&&!v&&(s.x=-1,l.x=c*Math.abs((n.x-a/2-r.x)/a)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===s.x&&0===s.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:l.x*s.x,top:l.y*s.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}();var kl={axis:ee.oneOf(["x","y","xy"]),contentWindow:ee.any,disableAutoscroll:ee.bool,distance:ee.number,getContainer:ee.func,getHelperDimensions:ee.func,helperClass:ee.string,helperContainer:ee.oneOfType([ee.func,"undefined"==typeof HTMLElement?ee.any:ee.instanceOf(HTMLElement)]),hideSortableGhost:ee.bool,keyboardSortingTransitionDuration:ee.number,lockAxis:ee.string,lockOffset:ee.oneOfType([ee.number,ee.string,ee.arrayOf(ee.oneOfType([ee.number,ee.string]))]),lockToContainerEdges:ee.bool,onSortEnd:ee.func,onSortMove:ee.func,onSortOver:ee.func,onSortStart:ee.func,pressDelay:ee.number,pressThreshold:ee.number,keyCodes:ee.shape({lift:ee.arrayOf(ee.number),drop:ee.arrayOf(ee.number),cancel:ee.arrayOf(ee.number),up:ee.arrayOf(ee.number),down:ee.arrayOf(ee.number)}),shouldCancelStart:ee.func,transitionDuration:ee.number,updateBeforeSortStart:ee.func,useDragHandle:ee.bool,useWindowAsScrollContainer:ee.bool},_l={lift:[ul],drop:[ul],cancel:[cl],up:[pl,hl],down:[fl,dl]},Ol={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:_l,shouldCancelStart:function(e){return-1!==[vl,xl,bl,El,gl].indexOf(e.target.tagName)||!!Xs(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},Al=Object.keys(kl);function Il(e){zs(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function Ml(e,t){try{var n=e()}catch(uu){return t(!0,uu)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}function Nl(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(e){var t;return dt(this,n),t=ft(this,mt(n).call(this,e)),h(gt(gt(t)),"state",{}),h(gt(gt(t)),"handleStart",(function(e){var n=t.props,r=n.distance,i=n.shouldCancelStart;if(2!==e.button&&!i(e)){t.touched=!0,t.position=tl(e);var a=Xs(e.target,(function(e){return null!=e.sortableInfo}));if(a&&a.sortableInfo&&t.nodeIsChild(a)&&!t.state.sorting){var o=t.props.useDragHandle,s=a.sortableInfo,l=s.index,c=s.collection;if(s.disabled)return;if(o&&!Xs(e.target,wl))return;t.manager.active={collection:c,index:l},nl(e)||e.target.tagName!==ml||e.preventDefault(),r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),h(gt(gt(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),h(gt(gt(t)),"handleMove",(function(e){var n=t.props,r=n.distance,i=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var a=tl(e),o={x:t.position.x-a.x,y:t.position.y-a.y},s=Math.abs(o.x)+Math.abs(o.y);t.delta=o,r||i&&!(s>=i)?r&&s>=r&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),h(gt(gt(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),h(gt(gt(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),h(gt(gt(t)),"handlePress",(function(e){try{var n=t.manager.getActive(),r=function(){if(n){var r=function(){var n=p.sortableInfo.index,r=Zs(p),i=ll(t.container),c=t.scrollContainer.getBoundingClientRect(),m=o({index:n,node:p,collection:d});if(t.node=p,t.margin=r,t.gridGap=i,t.width=m.width,t.height=m.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=p.getBoundingClientRect(),t.containerBoundingRect=c,t.index=n,t.newIndex=n,t.axis={x:a.indexOf("x")>=0,y:a.indexOf("y")>=0},t.offsetEdge=rl(p,t.container),t.initialOffset=tl(f?qn({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild(Cl(p)),Us(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-r.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-r.top,"px"),width:"".concat(t.width,"px")}),f&&t.helper.focus(),l&&(t.sortableGhost=p,Us(p,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},f){var g=h?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,y=g.top,v=g.left,E=g.width,x=y+g.height,b=v+E;t.axis.x&&(t.minTranslate.x=v-t.boundingClientRect.left,t.maxTranslate.x=b-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=y-t.boundingClientRect.top,t.maxTranslate.y=x-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(h?0:c.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(h?t.contentWindow.innerWidth:c.left+c.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(h?0:c.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(h?t.contentWindow.innerHeight:c.top+c.height)-t.boundingClientRect.top-t.height/2);s&&s.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?p:t.contentWindow,f?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(Vs.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),Vs.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:n}),u&&u({node:p,index:n,collection:d,isKeySorting:f,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),f&&t.keyMove(0)},i=t.props,a=i.axis,o=i.getHelperDimensions,s=i.helperClass,l=i.hideSortableGhost,c=i.updateBeforeSortStart,u=i.onSortStart,h=i.useWindowAsScrollContainer,p=n.node,d=n.collection,f=t.manager.isKeySorting,m=function(){if("function"==typeof c){t._awaitingUpdateBeforeSortStart=!0;var n=Ml((function(){var t=p.sortableInfo.index;return Promise.resolve(c({collection:d,index:t,node:p,isKeySorting:f},e)).then((function(){}))}),(function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n}));if(n&&n.then)return n.then((function(){}))}}();return m&&m.then?m.then(r):r()}}();return Promise.resolve(r&&r.then?r.then((function(){})):void 0)}catch(uu){return Promise.reject(uu)}})),h(gt(gt(t)),"handleSortMove",(function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)})),h(gt(gt(t)),"handleSortEnd",(function(e){var n=t.props,r=n.hideSortableGhost,i=n.onSortEnd,a=t.manager,o=a.active.collection,s=a.isKeySorting,l=t.manager.getOrderedRefs();t.listenerNode&&(s?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(Vs.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),Vs.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),r&&t.sortableGhost&&Us(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,u=l.length;c<u;c++){var h=l[c],p=h.node;h.edgeOffset=null,h.boundingClientRect=null,qs(p,null),Ws(p,null),h.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof i&&i({collection:o,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:s,nodes:l},e),t.touched=!1})),h(gt(gt(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var r=qn({},t.translate),i=0,a=0;return t.axis.x&&(r.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),i=t.translate.x-r.x),t.axis.y&&(r.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),a=t.translate.y-r.y),t.translate=r,qs(t.helper,t.translate),t.scrollContainer.scrollLeft+=i,void(t.scrollContainer.scrollTop+=a)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),h(gt(gt(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),h(gt(gt(t)),"handleKeyDown",(function(e){var n=e.keyCode,r=t.props,i=r.shouldCancelStart,a=r.keyCodes,o=qn({},_l,void 0===a?{}:a);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||o.lift.includes(n)&&!i(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),o.lift.includes(n)&&!t.manager.active?t.keyLift(e):o.drop.includes(n)&&t.manager.active?t.keyDrop(e):o.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):o.up.includes(n)?t.keyMove(-1):o.down.includes(n)&&t.keyMove(1))})),h(gt(gt(t)),"keyLift",(function(e){var n=e.target,r=Xs(n,(function(e){return null!=e.sortableInfo})).sortableInfo,i=r.index,a=r.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:i,collection:a},t.handlePress(e)})),h(gt(gt(t)),"keyMove",(function(e){var n=t.manager.getOrderedRefs(),r=n[n.length-1].node.sortableInfo.index,i=t.newIndex+e,a=t.newIndex;if(!(i<0||i>r)){t.prevIndex=a,t.newIndex=i;var o=il(t.newIndex,t.prevIndex,t.index),s=n.find((function(e){return e.node.sortableInfo.index===o})),l=s.node,c=t.containerScrollDelta,u=s.boundingClientRect||el(l,c),h=s.translate||{x:0,y:0},p=u.top+h.y-c.top,d=u.left+h.x-c.left,f=a<i,m=f&&t.axis.x?l.offsetWidth-t.width:0,g=f&&t.axis.y?l.offsetHeight-t.height:0;t.handleSortMove({pageX:d+m,pageY:p+g,ignoreTransition:0===e})}})),h(gt(gt(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),h(gt(gt(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),h(gt(gt(t)),"isValidSortingTarget",(function(e){var n=t.props.useDragHandle,r=e.target,i=Xs(r,(function(e){return null!=e.sortableInfo}));return i&&i.sortableInfo&&!i.sortableInfo.disabled&&(n?wl(r):r.sortableInfo)})),Il(e),t.manager=new Hs,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return pt(n,t),ht(n,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document;var r=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof r?r():r,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:sl(e.container)||e.container,e.autoScroller=new Tl(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return Vs[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return Vs[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockOffset,i=t.lockToContainerEdges,a=t.transitionDuration,o=t.keyboardSortingTransitionDuration,s=void 0===o?a:o,l=this.manager.isKeySorting,c=e.ignoreTransition,u=tl(e),h={x:u.x-this.initialOffset.x,y:u.y-this.initialOffset.y};if(h.y-=window.pageYOffset-this.initialWindowScroll.top,h.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=h,i){var p=ol({height:this.height,lockOffset:r,width:this.width}),d=ne(p,2),f=d[0],m=d[1],g={x:this.width/2-f.x,y:this.height/2-f.y},y={x:this.width/2-m.x,y:this.height/2-m.y};h.x=Ks(this.minTranslate.x+g.x,this.maxTranslate.x-y.x,h.x),h.y=Ks(this.minTranslate.y+g.y,this.maxTranslate.y-y.y,h.y)}"x"===n?h.y=0:"y"===n&&(h.x=0),l&&s&&!c&&Ws(this.helper,s),qs(this.helper,h)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=e.onSortOver,i=this.containerScrollDelta,a=this.windowScrollDelta,o=this.manager.getOrderedRefs(),s=this.offsetEdge.left+this.translate.x+i.left,l=this.offsetEdge.top+this.translate.y+i.top,c=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var h=0,p=o.length;h<p;h++){var d=o[h].node,f=d.sortableInfo.index,m=d.offsetWidth,g=d.offsetHeight,y={height:this.height>g?g/2:this.height/2,width:this.width>m?m/2:this.width/2},v=c&&f>this.index&&f<=u,E=c&&f<this.index&&f>=u,x={x:0,y:0},b=o[h].edgeOffset;b||(b=rl(d,this.container),o[h].edgeOffset=b,c&&(o[h].boundingClientRect=el(d,i)));var C=h<o.length-1&&o[h+1],S=h>0&&o[h-1];C&&!C.edgeOffset&&(C.edgeOffset=rl(C.node,this.container),c&&(C.boundingClientRect=el(C.node,i))),f!==this.index?(t&&Ws(d,t),this.axis.x?this.axis.y?E||f<this.index&&(s+a.left-y.width<=b.left&&l+a.top<=b.top+y.height||l+a.top+y.height<=b.top)?(x.x=this.width+this.marginOffset.x,b.left+x.x>this.containerBoundingRect.width-y.width&&C&&(x.x=C.edgeOffset.left-b.left,x.y=C.edgeOffset.top-b.top),null===this.newIndex&&(this.newIndex=f)):(v||f>this.index&&(s+a.left+y.width>=b.left&&l+a.top+y.height>=b.top||l+a.top+y.height>=b.top+g))&&(x.x=-(this.width+this.marginOffset.x),b.left+x.x<this.containerBoundingRect.left+y.width&&S&&(x.x=S.edgeOffset.left-b.left,x.y=S.edgeOffset.top-b.top),this.newIndex=f):v||f>this.index&&s+a.left+y.width>=b.left?(x.x=-(this.width+this.marginOffset.x),this.newIndex=f):(E||f<this.index&&s+a.left<=b.left+y.width)&&(x.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=f)):this.axis.y&&(v||f>this.index&&l+a.top+y.height>=b.top?(x.y=-(this.height+this.marginOffset.y),this.newIndex=f):(E||f<this.index&&l+a.top<=b.top+y.height)&&(x.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=f))),qs(d,x),o[h].translate=x):n&&(this.sortableGhost=d,Us(d,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=u);var w=c?this.prevIndex:u;r&&this.newIndex!==w&&r({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:w,isKeySorting:c,nodes:o,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return zs(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?m.exports.findDOMNode(this):e(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return f.exports.createElement(e,te({ref:t},Gs(this.props,Al)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),n}(f.exports.Component),h(t,"displayName",Js("sortableList",e)),h(t,"defaultProps",Ol),h(t,"propTypes",kl),h(t,"childContextTypes",{manager:ee.object.isRequired}),n}var Pl,Fl,Ll,Rl,Dl={index:ee.number.isRequired,collection:ee.oneOfType([ee.number,ee.string]),disabled:ee.bool},Bl=Object.keys(Dl);function $l(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return dt(this,n),ft(this,mt(n).apply(this,arguments))}return pt(n,t),ht(n,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,r=e.index,i=m.exports.findDOMNode(this);i.sortableInfo={collection:t,disabled:n,index:r,manager:this.context.manager},this.node=i,this.ref={node:i},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return zs(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return f.exports.createElement(e,te({ref:t},Gs(this.props,Bl)))}}]),n}(f.exports.Component),h(t,"displayName",Js("sortableElement",e)),h(t,"contextTypes",{manager:ee.object.isRequired}),h(t,"propTypes",Dl),h(t,"defaultProps",{collection:0}),n}function zl(e,t,n){var r;return(null!=(r=e.params)?r:[]).map(((e,n)=>"string"===t.params[n].type?'"'+e+'"':e))}function Hl(e,t,n){const r=zl(e,t),i=e.id+"(";return n&&r.push(n),i+r.join(", ")+")"}function jl(e,t,n){const r=zl(e,t),i=e.id+"(";return n&&r.unshift(n),i+r.join(", ")+")"}function Gl(e){return function(t,n,r){return`${e} without(${t.params.join(", ")}) (${r})`}}function Vl(e,t,n){var r,i;let a=null!=(i=(null!=(r=e.params)?r:[])[0])?i:"5m";return`${t.id}(${n}[${a}])`}function Yl(e,t,n,r){var i,a;if(t.params.length<2)throw`Cannot render a function with params of length [${t.params.length}]`;let o=null!=(a=(null!=(i=e.params)?i:[])[0])?a:"5m";const c=zl(l(s({},e),{params:e.params.slice(1)}),l(s({},t),{params:t.params.slice(1),defaultParams:t.defaultParams.slice(1)})),u=e.id+"(";return n&&(r?c.push(`${n}[${o}]`):c.unshift(`${n}[${o}]`)),u+c.join(", ")+")"}function Ul(e,t,n){return Yl(e,t,n,!1)}function ql(e,t,n){return Yl(e,t,n,!0)}function Wl(e,t,n){if("string"!=typeof e.params[1])throw"The separator must be a string";const r=`"${e.params[1]}"`;return`${e.id}(${n}, "${e.params[0]}", ${r}, "${e.params.slice(2).join(r)}")`}function Xl(e,t,n){let r=e.params[0],i=e.params[1],a="";return 3===e.params.length&&(a=e.params[2]?" bool":""),`${n} ${r}${a} ${i}`}function Kl(e,t){const n={id:e.id,params:e.defaultParams};return l(s({},t),{operations:[...t.operations,n]})}function Ql(e,t,n){const r={id:e.id,params:e.defaultParams};return t.operations.length>0&&n.addOperationHandler===Ql?l(s({},t),{operations:[r,...t.operations.slice(1)]}):l(s({},t),{operations:[r,...t.operations]})}function Zl(e,t){const n={id:e.id,params:e.defaultParams};return l(s({},t),{operations:[...t.operations,n]})}function Jl(e,t={}){var n,r;return[s({id:e,name:hc(e),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:Pl.Aggregations,renderer:Hl,paramChangedHandler:(r=`__${e}_by`,function(e,t,n){return t.params.length===n.params.length?l(s({},t),{id:r}):t}),addOperationHandler:Kl},t),s({id:`__${e}_by`,name:`${hc(e)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,subType:"labelNameSelect"}],defaultParams:[""],alternativesKey:"aggregations by",category:Pl.Aggregations,renderer:(n=e,function(e,t,r){return`${n} by(${e.params.join(", ")}) (${r})`}),paramChangedHandler:ec(e),addOperationHandler:Kl,hideFromList:!0},t),s({id:`__${e}_without`,name:`${hc(e)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,subType:"labelNameSelect"}],defaultParams:[""],alternativesKey:"aggregations by",category:Pl.Aggregations,renderer:Gl(e),paramChangedHandler:ec(e),addOperationHandler:Kl,hideFromList:!0},t)]}function ec(e){return function(t,n,r){return n.params.length<r.params.length?l(s({},n),{id:e}):n}}function tc(e,t,n={}){const r=Jl(e,n);return r[0].params.unshift(...t.params),r[1].params.unshift(...t.params),r[2].params.unshift(...t.params),r[0].defaultParams=t.defaultParams,r[1].defaultParams=[...t.defaultParams,""],r[2].defaultParams=[...t.defaultParams,""],r[1].renderer=nc(e),r[2].renderer=nc(e),r}function nc(e){return function(t,n,r){const i=n.params.findIndex((e=>e.restParam)),a=t.params.slice(0,i),o=t.params.slice(i);return`${e} by(${o.join(", ")}) (${a.map(((e,t)=>"string"===n.params[t].type?`"${e}"`:e)).join(", ")}, ${r})`}}function rc(e){return{id:e,name:hc(e),params:[uc()],defaultParams:["5m"],alternativesKey:"overtime function",category:Pl.Aggregations,renderer:Vl,addOperationHandler:Ql}}function ic(e){return{id:e,name:hc(e),params:[ac()],defaultParams:["5m"],alternativesKey:"range function",category:Pl.Functions,renderer:Vl,addOperationHandler:Ql}}function ac(){return{name:"Range",type:"string",options:[{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]}}function oc(e){var t,n,r,i,a,o;return l(s({},e),{id:e.id,name:null!=(t=e.name)?t:hc(e.id),params:null!=(n=e.params)?n:[],defaultParams:null!=(r=e.defaultParams)?r:[],category:null!=(i=e.category)?i:Pl.Functions,renderer:null!=(a=e.renderer)?a:e.params?jl:Hl,addOperationHandler:null!=(o=e.addOperationHandler)?o:Kl})}(Fl=Pl||(Pl={})).Aggregations="Aggregations",Fl.BinaryOps="Binary operations",Fl.Functions="Functions",Fl.Trigonometric="Trigonometric",(Rl=Ll||(Ll={})).Abs="abs",Rl.Absent="absent",Rl.AbsentOverTime="absent_over_time",Rl.Acos="acos",Rl.Acosh="acosh",Rl.Asin="asin",Rl.Asinh="asinh",Rl.Atan="atan",Rl.Atanh="atanh",Rl.Avg="avg",Rl.AvgOverTime="avg_over_time",Rl.BottomK="bottomk",Rl.Ceil="ceil",Rl.Changes="changes",Rl.Clamp="clamp",Rl.ClampMax="clamp_max",Rl.ClampMin="clamp_min",Rl.Cos="cos",Rl.Cosh="cosh",Rl.Count="count",Rl.CountOverTime="count_over_time",Rl.CountScalar="count_scalar",Rl.CountValues="count_values",Rl.DayOfMonth="day_of_month",Rl.DayOfWeek="day_of_week",Rl.DaysInMonth="days_in_month",Rl.Deg="deg",Rl.Delta="delta",Rl.Deriv="deriv",Rl.DropCommonLabels="drop_common_labels",Rl.Exp="exp",Rl.Floor="floor",Rl.Group="group",Rl.HistogramQuantile="histogram_quantile",Rl.HoltWinters="holt_winters",Rl.Hour="hour",Rl.Idelta="idelta",Rl.Increase="increase",Rl.Irate="irate",Rl.LabelJoin="label_join",Rl.LabelReplace="label_replace",Rl.Last="last",Rl.LastOverTime="last_over_time",Rl.Ln="ln",Rl.Log10="log10",Rl.Log2="log2",Rl.Max="max",Rl.MaxOverTime="max_over_time",Rl.Min="min",Rl.MinOverTime="min_over_time",Rl.Minute="minute",Rl.Month="month",Rl.Pi="pi",Rl.PredictLinear="predict_linear",Rl.Present="present",Rl.PresentOverTime="present_over_time",Rl.Quantile="quantile",Rl.QuantileOverTime="quantile_over_time",Rl.Rad="rad",Rl.Rate="rate",Rl.Resets="resets",Rl.Round="round",Rl.Scalar="scalar",Rl.Sgn="sgn",Rl.Sin="sin",Rl.Sinh="sinh",Rl.Sort="sort",Rl.SortDesc="sort_desc",Rl.Sqrt="sqrt",Rl.Stddev="stddev",Rl.StddevOverTime="stddev_over_time",Rl.Sum="sum",Rl.SumOverTime="sum_over_time",Rl.Tan="tan",Rl.Tanh="tanh",Rl.Time="time",Rl.Timestamp="timestamp",Rl.TopK="topk",Rl.Vector="vector",Rl.Year="year",Rl.ArithmeticBinary="__arithmetic_binary_operators",Rl.ComparisonBinary="__comparison_binary_operators",Rl.NestedQuery="__nested_query";const sc=["+","-","*","/","%","^"],lc=["==","!=",">","<",">=","<="];function cc(){return[...Jl(Ll.Sum),...Jl(Ll.Avg),...Jl(Ll.Min),...Jl(Ll.Max),...Jl(Ll.Count),...tc(Ll.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...tc(Ll.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...tc(Ll.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),rc(Ll.SumOverTime),rc(Ll.AvgOverTime),rc(Ll.MinOverTime),rc(Ll.MaxOverTime),rc(Ll.CountOverTime),rc(Ll.LastOverTime),rc(Ll.PresentOverTime),rc(Ll.AbsentOverTime),rc(Ll.StddevOverTime),{id:Ll.ArithmeticBinary,name:"Arithmetic",params:[{name:"Operator",type:"string",options:_.map(sc,(e=>({label:e,value:e})))},{name:"Value",type:"number"}],defaultParams:["+",2],alternativesKey:"binary scalar operations",category:Pl.BinaryOps,renderer:Xl,addOperationHandler:Kl},{id:Ll.ComparisonBinary,name:"Comparison",params:[{name:"Operator",type:"string",options:_.map(lc,(e=>({label:e,value:e})))},{name:"Value",type:"number"},{name:"Bool",type:"boolean"}],defaultParams:["==",2,!1],alternativesKey:"binary scalar operations",category:Pl.BinaryOps,renderer:Xl,addOperationHandler:Kl},{id:Ll.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:Pl.BinaryOps,renderer:(e,t,n)=>n,addOperationHandler:pc},ic(Ll.Changes),ic(Ll.Rate),ic(Ll.Irate),ic(Ll.Increase),ic(Ll.Idelta),ic(Ll.Delta),oc({id:Ll.HoltWinters,params:[uc(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["5m",.5,.5],alternativesKey:"range function",category:Pl.Functions,renderer:Ul,addOperationHandler:Ql}),oc({id:Ll.PredictLinear,params:[uc(),{name:"Seconds from now",type:"number"}],defaultParams:["5m",60],alternativesKey:"range function",category:Pl.Functions,renderer:Ul,addOperationHandler:Ql}),oc({id:Ll.QuantileOverTime,params:[uc(),{name:"Quantile",type:"number"}],defaultParams:["5m",.5],alternativesKey:"overtime function",category:Pl.Functions,renderer:ql,addOperationHandler:Ql}),oc({id:Ll.Absent}),oc({id:Ll.Acos,category:Pl.Trigonometric}),oc({id:Ll.Acosh,category:Pl.Trigonometric}),oc({id:Ll.Asin,category:Pl.Trigonometric}),oc({id:Ll.Asinh,category:Pl.Trigonometric}),oc({id:Ll.Atan,category:Pl.Trigonometric}),oc({id:Ll.Atanh,category:Pl.Trigonometric}),oc({id:Ll.Ceil}),oc({id:Ll.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),oc({id:Ll.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),oc({id:Ll.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),oc({id:Ll.Cos,category:Pl.Trigonometric}),oc({id:Ll.Cosh,category:Pl.Trigonometric}),oc({id:Ll.DayOfMonth,category:Pl.Functions}),oc({id:Ll.DayOfWeek,category:Pl.Functions}),oc({id:Ll.DaysInMonth,category:Pl.Functions}),oc({id:Ll.Deg}),ic(Ll.Deriv),oc({id:Ll.Exp}),oc({id:Ll.Floor}),oc({id:Ll.Group}),oc({id:Ll.Hour}),oc({id:Ll.LabelJoin,params:[{name:"Destination Label",type:"string",subType:"labelNameSelect"},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,subType:"labelNameSelect"}],defaultParams:["",",",""],renderer:Wl,addOperationHandler:Zl}),oc({id:Ll.Log10}),oc({id:Ll.Log2}),oc({id:Ll.Minute}),oc({id:Ll.Month}),oc({id:Ll.Pi,renderer:e=>`${e.id}()`}),oc({id:Ll.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:Hl}),oc({id:Ll.Rad}),ic(Ll.Resets),oc({id:Ll.Round,category:Pl.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),oc({id:Ll.Scalar}),oc({id:Ll.Sgn}),oc({id:Ll.Sin,category:Pl.Trigonometric}),oc({id:Ll.Sinh,category:Pl.Trigonometric}),oc({id:Ll.Sort}),oc({id:Ll.SortDesc}),oc({id:Ll.Sqrt}),oc({id:Ll.Stddev}),oc({id:Ll.Tan,category:Pl.Trigonometric}),oc({id:Ll.Tanh,category:Pl.Trigonometric}),oc({id:Ll.Time,renderer:e=>`${e.id}()`}),oc({id:Ll.Timestamp}),oc({id:Ll.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:e=>`${e.id}(${e.params[0]})`}),oc({id:Ll.Year})]}function uc(){return{name:"Range",type:"string",options:[{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]}}function hc(e){return _.capitalize(e.replace(/_/g," "))}function pc(e,t){var n;return l(s({},t),{binaryQueries:[...null!=(n=t.binaryQueries)?n:[],{operator:"/",query:t}]})}const dc=$l((({children:e})=>d.createElement("div",null,e))),fc=Sl((({children:e})=>d.createElement("div",{className:"prom-query-builder-operation-handler"},e)));function mc(e,t,n,r){if("labelNameSelect"===e.subType)return d.createElement(Rs,l(s({size:"small"},t),{style:{width:"100%",minWidth:100},value:n,onChange:e=>{r(e)}}));if(e.options)return d.createElement(Nt,{size:"small",style:{width:"100%"},value:n,onChange:e=>{r(e)}},_.map(e.options,(e=>d.createElement(Nt.Option,{key:e.value,value:e.value},e.label))));switch(e.type){case"boolean":return d.createElement(Lt,{size:"small",checked:n,onChange:e=>{r(e)}});case"number":return d.createElement(Gt,{style:{width:"100%"},size:"small",value:n,onChange:e=>{r(e)}});case"string":default:return d.createElement(wt,{size:"small",value:n,onChange:e=>{r(e.target.value)}})}}function gc(e){const{metric:t,datasourceValue:n,params:r,query:i,onChange:a,operation:o,index:c}=e,{operations:u}=i,h=cc(),p=_.find(h,{id:o.id}),f=[];for(let g=0;g<o.params.length;g++){const e=p.params[Math.min(p.params.length-1,g)];f.push(d.createElement("div",{key:g-1,className:"prom-query-builder-operation-param"},!e.hideName&&d.createElement("div",{className:"prom-query-builder-operation-param-label"},e.name),d.createElement("div",{className:"prom-query-builder-operation-param-value"},d.createElement(Ot,{gutter:8},d.createElement(At,{flex:"auto"},mc(e,{metric:t,datasourceValue:n,params:r,labels:i.labels},_.get(o,`params[${g}]`),(e=>{const t=_.cloneDeep(u);let n=l(s({},o),{params:[...o.params.slice(0,g),e,...o.params.slice(g+1)]});p.paramChangedHandler&&(n=p.paramChangedHandler(c,n,p)),t[c]=n,a(l(s({},i),{operations:t}))}))),e.restParam&&(o.params.length>p.params.length||e.optional)&&d.createElement(At,{flex:"24px"},d.createElement(Ct,{size:"small",icon:d.createElement(J,null),title:`Remove ${e.name}`,onClick:()=>{let e=l(s({},o),{params:[...o.params.slice(0,g),...o.params.slice(g+1)]});p.paramChangedHandler&&(e=p.paramChangedHandler(c,e,p));const t=_.cloneDeep(u);t[c]=e,a(l(s({},i),{operations:t}))}}))))))}let m;if(p.params.length>0){const e=p.params[p.params.length-1];e.restParam&&(m=d.createElement(Ct,{size:"small",icon:d.createElement(re,null),onClick:()=>{let e=l(s({},o),{params:[...o.params,""]});p.paramChangedHandler&&(e=p.paramChangedHandler(o.params.length,e,p));const t=_.cloneDeep(u);t[c]=e,a(l(s({},i),{operations:t}))}},e.name))}return p?d.createElement(dc,{key:o.id,index:c},d.createElement("div",{className:"prom-query-builder-operation"},d.createElement("div",{className:"prom-query-builder-operation-header"},d.createElement(fc,null,p.name),d.createElement(G,{onClick:()=>{a(l(s({},i),{operations:_.filter(u,(e=>e.id!==o.id))}))}})),d.createElement("div",{className:"prom-query-builder-operation-content"},f,m,_.isEmpty(p.params)&&d.createElement("div",null,"无参数")))):null}const yc=Nl((({children:e})=>d.createElement("div",{className:"prom-query-builder-operations"},e)));function vc(e){const{query:t,onChange:n}=e,{operations:r}=t,i=cc(),a=_.groupBy(i,"category");return d.createElement("div",{className:"prom-query-builder-operations-container"},d.createElement("div",{className:"prom-query-builder-operations"},!_.isEmpty(r)&&d.createElement(yc,{useDragHandle:!0,axis:"x",helperClass:"row-dragging",onSortEnd:({oldIndex:e,newIndex:i})=>{const a=$s(r,e,i);n(l(s({},t),{operations:a}))}},_.map(r,((t,n)=>d.createElement(gc,l(s({},e),{operation:t,index:n,key:`${t.id}_${n}`}))))),d.createElement(Vt,{value:[],options:_.map(a,((e,t)=>({value:t,label:t,children:_.map(e,(e=>({value:e.id,label:e.name})))}))),onChange:e=>{var r;const a=_.last(e),o=_.find(i,{id:a});if(!o)return;const s=_.find(i,{id:null==(r=t.operations[0])?void 0:r.id});n(o.addOperationHandler(o,t,s))}},d.createElement(Ct,null,"添加操作"))))}function Ec(e){return void 0!==e.operations.find((e=>{const t=cc(),n=_.find(t,{id:e.id});return"Binary operations"===(null==n?void 0:n.category)}))}function xc(e,t){let n=e+` ${t.operator} `;return t.vectorMatches&&(n+=`${t.vectorMatchesType}(${t.vectorMatches}) `),n+bc(t.query,!0)}function bc(e,t){var n,r,i;let a=`${null!=(n=e.metric)?n:""}${function(e){const t=_.filter(e,(e=>!!e.label&&!!e.value));if(0===t.length)return"";let n="{";for(const r of t)"{"!==n&&(n+=", "),n+=`${r.label}${r.op}"${r.value}"`;return n+"}"}(e.labels)}`;return a=function(e,t){const n=cc();for(const r of t){const t=_.find(n,{id:r.id});if(!t)throw new Error(`Could not find operation ${r.id} in the registry`);e=t.renderer(r,t,e)}return e}(a,e.operations),!t&&Ec(e)&&Boolean(null==(r=e.binaryQueries)?void 0:r.length)&&(a=`(${a})`),a=function(e,t){if(t)for(const n of t)e=`${xc(e,n)}`;return e}(a,e.binaryQueries),t&&(Ec(e)||Boolean(null==(i=e.binaryQueries)?void 0:i.length))&&(a=`(${a})`),a}function Cc(e){const t=bc(e.query);return t?d.createElement("div",{className:"prom-query-builder-rawquery-container"},d.createElement(Vc,{url:"/api/v1/datasource/prometheus",value:t,readonly:!0})):null}const Sc=["+","-","*","/","%","^","==","!=","<","<=",">",">="];function wc(e){const{nestedQuery:t,datasourceValue:n,params:r,index:i,onChange:a,onRemove:o}=e;return d.createElement("div",null,d.createElement(zt,null,d.createElement("div",null,"Operator"),d.createElement(Nt,{style:{minWidth:60},value:t.operator,onChange:e=>{a(i,l(s({},t),{operator:e}))}},_.map(Sc,(e=>d.createElement(Nt.Option,{key:e,value:e},e)))),d.createElement("div",null,"Vector matches"),d.createElement(zt,null,d.createElement(Nt,{style:{minWidth:60},value:t.vectorMatchesType||"on",onChange:e=>{a(i,l(s({},t),{vectorMatchesType:e}))}},d.createElement(Nt.Option,{value:"on"},"on"),d.createElement(Nt.Option,{value:"ignoring"},"ignoring")),d.createElement(wt,{style:{minWidth:60},value:t.vectorMatches,onChange:e=>{a(i,l(s({},t),{vectorMatches:e.target.value,vectorMatchesType:t.vectorMatchesType||"on"}))}})),d.createElement(G,{onClick:()=>o(i)})),d.createElement("div",null,d.createElement(zc,{rawQueryOpen:!1,datasourceValue:n,params:r,value:t.query,onChange:e=>{a(i,l(s({},t),{query:e}))}})))}function Tc(e){var t;const{datasourceValue:n,params:r,onChange:i}=e,a=null!=(t=e.value)?t:[],o=(e,t)=>{const n=[...a];n.splice(e,1,t),i(n)},s=e=>{const t=[...a.slice(0,e),...a.slice(e+1)];i(t)};return d.createElement("div",null,_.map(a,((e,t)=>d.createElement(wc,{key:t.toString(),params:r,nestedQuery:e,index:t,onChange:o,datasourceValue:n,onRemove:s}))))}const kc={inf:146,nan:147,bool:1,ignoring:2,on:3,group_left:4,group_right:5,offset:6},_c={avg:8,atan2:7,bottomk:9,count:10,count_values:11,group:12,max:13,min:14,quantile:15,stddev:16,stdvar:17,sum:18,topk:19,by:20,without:21,and:22,or:23,unless:24,start:25,end:26},Oc={__proto__:null,absent_over_time:307,absent:309,abs:311,acos:313,acosh:315,asin:317,asinh:319,atan:321,atanh:323,avg_over_time:325,ceil:327,changes:329,clamp:331,clamp_max:333,clamp_min:335,cos:337,cosh:339,count_over_time:341,days_in_month:343,day_of_month:345,day_of_week:347,deg:349,delta:351,deriv:353,exp:355,floor:357,histogram_quantile:359,holt_winters:361,hour:363,idelta:365,increase:367,irate:369,label_replace:371,label_join:373,last_over_time:375,ln:377,log10:379,log2:381,max_over_time:383,min_over_time:385,minute:387,month:389,pi:391,predict_linear:393,present_over_time:395,quantile_over_time:397,rad:399,rate:401,resets:403,round:405,scalar:407,sgn:409,sin:411,sinh:413,sort:415,sort_desc:417,sqrt:419,stddev_over_time:421,stdvar_over_time:423,sum_over_time:425,tan:427,tanh:429,timestamp:431,time:433,vector:435,year:437},Ac=un.deserialize({version:13,states:"6[OYQPOOO&{QPOOOOQO'#C{'#C{O'QQPO'#CzQ']QQOOOOQO'#De'#DeO'WQPO'#DdOOQO'#E}'#E}O(jQPO'#FTOYQPO'#FPOYQPO'#FSOOQO'#FV'#FVO.fQSO'#FWO.nQQO'#FUOOQO'#FU'#FUOOQO'#Cy'#CyOOQO'#Df'#DfOOQO'#Dh'#DhOOQO'#Di'#DiOOQO'#Dj'#DjOOQO'#Dk'#DkOOQO'#Dl'#DlOOQO'#Dm'#DmOOQO'#Dn'#DnOOQO'#Do'#DoOOQO'#Dp'#DpOOQO'#Dq'#DqOOQO'#Dr'#DrOOQO'#Ds'#DsOOQO'#Dt'#DtOOQO'#Du'#DuOOQO'#Dv'#DvOOQO'#Dw'#DwOOQO'#Dx'#DxOOQO'#Dy'#DyOOQO'#Dz'#DzOOQO'#D{'#D{OOQO'#D|'#D|OOQO'#D}'#D}OOQO'#EO'#EOOOQO'#EP'#EPOOQO'#EQ'#EQOOQO'#ER'#EROOQO'#ES'#ESOOQO'#ET'#ETOOQO'#EU'#EUOOQO'#EV'#EVOOQO'#EW'#EWOOQO'#EX'#EXOOQO'#EY'#EYOOQO'#EZ'#EZOOQO'#E['#E[OOQO'#E]'#E]OOQO'#E^'#E^OOQO'#E_'#E_OOQO'#E`'#E`OOQO'#Ea'#EaOOQO'#Eb'#EbOOQO'#Ec'#EcOOQO'#Ed'#EdOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsOOQO'#Et'#EtOOQO'#Eu'#EuOOQO'#Ev'#EvOOQO'#Ew'#EwOOQO'#Ex'#ExOOQO'#Ey'#EyOOQO'#Ez'#EzQOQPOOO0XQPO'#C|O0^QPO'#DRO'WQPO,59fO0eQQO,59fO2RQPO,59oO2RQPO,59oO2RQPO,59oO2RQPO,59oO2RQPO,59oO7}QQO,5;gO8SQQO,5;jO8[QPO,5;yOOQO,5:O,5:OOOQO,5;i,5;iO8sQQO,5;kO8zQQO,5;nO:bQPO'#FYO:pQPO,5;rOOQO'#FX'#FXOOQO,5;r,5;rOOQO,5;p,5;pO:xQSO'#C}OOQO,59h,59hO;QQPO,59mO;YQQO'#DSOOQO,59m,59mOOQO1G/Q1G/QO0XQPO'#DWOAVQPO'#DVOAaQPO'#DVOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOAkQSO1G1ROOQO1G1U1G1UOAsQQO1G1UOAxQPO'#E}OOQO'#Fa'#FaOOQO1G1e1G1eOBTQPO1G1eOOQO1G1V1G1VOOQO'#FZ'#FZOBYQPO,5;tOB_QSO1G1^OOQO1G1^1G1^OOQO'#DP'#DPOBgQPO,59iOOQO'#DO'#DOOOQO,59i,59iOYQPO,59nOOQO1G/X1G/XOOQO,59r,59rOH_QPO,59qOHfQPO,59qOI}QQO7+$uOJ_QQO7+$uOKsQQO7+$uOLZQQO7+$uOMrQQO7+$uOOQO7+&m7+&mON]QQO7+&sOOQO7+&p7+&pONeQPO7+'POOQO1G1`1G1`OOQO1G1_1G1_OOQO7+&x7+&xONjQSO1G/TOOQO1G/T1G/TONrQQO1G/YOOQO1G/]1G/]ON|QPO1G/]OOQO<<J_<<J_O!&oQPO<<J_OOQO<<Jk<<JkOOQO1G/U1G/UOOQO7+$o7+$oOOQO7+$w7+$wOOQOAN?yAN?y",stateData:"!&t~O$ZOSkOS~OWQOXQOYQOZQO[QO]QO^QO_QO`QOaQObQOcQO!ZZO#t_O$WVO$XVO$[XO$_`O$`aO$abO$bcO$cdO$deO$efO$fgO$ghO$hiO$ijO$jkO$klO$lmO$mnO$noO$opO$pqO$qrO$rsO$stO$tuO$uvO$vwO$wxO$xyO$yzO$z{O${|O$|}O$}!OO%O!PO%P!QO%Q!RO%R!SO%S!TO%T!UO%U!VO%V!WO%W!XO%X!YO%Y!ZO%Z![O%[!]O%]!^O%^!_O%_!`O%`!aO%a!bO%b!cO%c!dO%d!eO%e!fO%f!gO%g!hO%h!iO%i!jO%j!kO%k!lO%l!mO%m!nO%n!oO%o!pO%p!qO%q!rO%r!sO%uWO%vWO%wVO%y[O~O!ZZO~Od!uOe!uO$[!vO~OU#POV!yOf!|Og!}Oh!|Ox!yO{!yO|!yO}!yO!O!zO!P!zO!Q!{O!R!{O!S!{O!T!{O!U!{O!V!{O$S#QO%s#OO~O$W#SO$X#SO%w#SOW#wXX#wXY#wXZ#wX[#wX]#wX^#wX_#wX`#wXa#wXb#wXc#wX!Z#wX#t#wX$W#wX$X#wX$[#wX$_#wX$`#wX$a#wX$b#wX$c#wX$d#wX$e#wX$f#wX$g#wX$h#wX$i#wX$j#wX$k#wX$l#wX$m#wX$n#wX$o#wX$p#wX$q#wX$r#wX$s#wX$t#wX$u#wX$v#wX$w#wX$x#wX$y#wX$z#wX${#wX$|#wX$}#wX%O#wX%P#wX%Q#wX%R#wX%S#wX%T#wX%U#wX%V#wX%W#wX%X#wX%Y#wX%Z#wX%[#wX%]#wX%^#wX%_#wX%`#wX%a#wX%b#wX%c#wX%d#wX%e#wX%f#wX%g#wX%h#wX%i#wX%j#wX%k#wX%l#wX%m#wX%n#wX%o#wX%p#wX%q#wX%r#wX%u#wX%v#wX%w#wX%y#wX~Ot#VO%z#YO~O%y[OU#xXV#xXf#xXg#xXh#xXx#xX{#xX|#xX}#xX!O#xX!P#xX!Q#xX!R#xX!S#xX!T#xX!U#xX!V#xX$S#xX$V#xX%s#xX$^#xX$]#xX~O$[#[O~O$^#`O~PYOd!uOe!uOUnaVnafnagnahnaxna{na|na}na!Ona!Pna!Qna!Rna!Sna!Tna!Una!Vna$Sna$Vna%sna$^na$]na~OP#dOQ#bOR#bOWyPXyPYyPZyP[yP]yP^yP_yP`yPayPbyPcyP!ZyP#tyP$WyP$XyP$[yP$_yP$`yP$ayP$byP$cyP$dyP$eyP$fyP$gyP$hyP$iyP$jyP$kyP$lyP$myP$nyP$oyP$pyP$qyP$ryP$syP$tyP$uyP$vyP$wyP$xyP$yyP$zyP${yP$|yP$}yP%OyP%PyP%QyP%RyP%SyP%TyP%UyP%VyP%WyP%XyP%YyP%ZyP%[yP%]yP%^yP%_yP%`yP%ayP%byP%cyP%dyP%eyP%fyP%gyP%hyP%iyP%jyP%kyP%lyP%myP%nyP%oyP%pyP%qyP%ryP%uyP%vyP%wyP%yyP~O#p#jO~O!P#lO#p#kO~Oi#nOj#nO$WVO$XVO%u#mO%v#mO%wVO~O$^#qO~P']Ox!yOU#vaV#vaf#vag#vah#va{#va|#va}#va!O#va!P#va!Q#va!R#va!S#va!T#va!U#va!V#va$S#va$V#va%s#va$^#va$]#va~O!V#rO$O#rO$P#rO$Q#rO~O$]#tO%z#uO~Ot#vO$^#yO~O$]#zO$^#{O~O$]vX$^vX~P']OWyXXyXYyXZyX[yX]yX^yX_yX`yXayXbyXcyX!ZyX#tyX$WyX$XyX$[yX$_yX$`yX$ayX$byX$cyX$dyX$eyX$fyX$gyX$hyX$iyX$jyX$kyX$lyX$myX$nyX$oyX$pyX$qyX$ryX$syX$tyX$uyX$vyX$wyX$xyX$yyX$zyX${yX$|yX$}yX%OyX%PyX%QyX%RyX%SyX%TyX%UyX%VyX%WyX%XyX%YyX%ZyX%[yX%]yX%^yX%_yX%`yX%ayX%byX%cyX%dyX%eyX%fyX%gyX%hyX%iyX%jyX%kyX%lyX%myX%nyX%oyX%pyX%qyX%ryX%uyX%vyX%wyX%yyX~OS#}OT#}O~P;dOQ#bOR#bO~P;dO%t$UO%x$VO~O#p$WO~O$W#SO$X#SO%w#SO~O$[$XO~O#t$YO~Ot#VO%z$[O~O$]$]O$^$^O~OWyaXyaYyaZya[ya]ya^ya_ya`yaayabyacya!Zya#tya$Wya$Xya$_ya$`ya$aya$bya$cya$dya$eya$fya$gya$hya$iya$jya$kya$lya$mya$nya$oya$pya$qya$rya$sya$tya$uya$vya$wya$xya$yya$zya${ya$|ya$}ya%Oya%Pya%Qya%Rya%Sya%Tya%Uya%Vya%Wya%Xya%Yya%Zya%[ya%]ya%^ya%_ya%`ya%aya%bya%cya%dya%eya%fya%gya%hya%iya%jya%kya%lya%mya%nya%oya%pya%qya%rya%uya%vya%wya%yya~O$[#[O~PBoOS$aOT$aO$[ya~PBoOx!yOUwqfwqgwqhwq!Owq!Pwq!Qwq!Rwq!Swq!Twq!Uwq!Vwq$Swq$Vwq%swq$^wq$]wq~OVwq{wq|wq}wq~PHsOV!yO{!yO|!yO}!yO~PHsOV!yOx!yO{!yO|!yO}!yO!O!zO!P!zOUwqfwqgwqhwq$Swq$Vwq%swq$^wq$]wq~O!Qwq!Rwq!Swq!Twq!Uwq!Vwq~PJoO!Q!{O!R!{O!S!{O!T!{O!U!{O!V!{O~PJoOV!yOf!|Oh!|Ox!yO{!yO|!yO}!yO!O!zO!P!zO!Q!{O!R!{O!S!{O!T!{O!U!{O!V!{O~OUwqgwq$Swq$Vwq%swq$^wq$]wq~PLqO#p$cO%t$bO~O$^$dO~Ot#vO$^$fO~O$]vi$^vi~P']O$[#[OWyiXyiYyiZyi[yi]yi^yi_yi`yiayibyicyi!Zyi#tyi$Wyi$Xyi$_yi$`yi$ayi$byi$cyi$dyi$eyi$fyi$gyi$hyi$iyi$jyi$kyi$lyi$myi$nyi$oyi$pyi$qyi$ryi$syi$tyi$uyi$vyi$wyi$xyi$yyi$zyi${yi$|yi$}yi%Oyi%Pyi%Qyi%Ryi%Syi%Tyi%Uyi%Vyi%Wyi%Xyi%Yyi%Zyi%[yi%]yi%^yi%_yi%`yi%ayi%byi%cyi%dyi%eyi%fyi%gyi%hyi%iyi%jyi%kyi%lyi%myi%nyi%oyi%pyi%qyi%ryi%uyi%vyi%wyi%yyi~O%t$hO~O",goto:"(u$UPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$V$u%R%_%e%q%tP%z&T$uP&W&gPPPPPPPPPPP$u&q&}P&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}&}$uP'Z$u$uP$u$u'j$u'v(V(f(i(oPPP$uP(rQSOQ#TXQ#UYQ#_!vQ$P#eQ$Q#fQ$R#gQ$S#hQ$T#iR$_#ze_OXY!v#e#f#g#h#i#zeROXY!v#e#f#g#h#i#zQ!wRR#a!xQ#]!uQ#|#bQ$`#}R$g$aR#w#[Q#x#[R$e$]Q!xRQ#RUR#a!wR#^!vQ#e!yQ#f!zQ#g!{Q#h!|R#i!}Y#c!y!z!{!|!}R$O#deUOXY!v#e#f#g#h#i#zeTOXY!v#e#f#g#h#i#zd_OXY!v#e#f#g#h#i#zR#o#QeYOXY!v#e#f#g#h#i#zd]OXY!v#e#f#g#h#i#zR!tPd^OXY!v#e#f#g#h#i#zR#Z]R#W[Q#X[R$Z#tR#s#VR#p#Q",nodeNames:"⚠ Bool Ignoring On GroupLeft GroupRight Offset Atan2 Avg Bottomk Count CountValues Group Max Min Quantile Stddev Stdvar Sum Topk By Without And Or Unless Start End LineComment PromQL Expr AggregateExpr AggregateOp AggregateModifier GroupingLabels GroupingLabelList GroupingLabel LabelName FunctionCallBody FunctionCallArgs BinaryExpr Pow BinModifiers OnOrIgnoring Mul Div Mod Add Sub Eql Gte Gtr Lte Lss Neq FunctionCall FunctionIdentifier AbsentOverTime Identifier Absent Abs Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek Deg Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Timestamp Time Vector Year MatrixSelector Duration NumberLiteral OffsetExpr ParenExpr StringLiteral SubqueryExpr UnaryExpr UnaryOp VectorSelector MetricIdentifier LabelMatchers LabelMatchList LabelMatcher MatchOp EqlSingle EqlRegex NeqRegex StepInvariantExpr At AtModifierPreprocessors MetricName",maxTerm:226,skippedNodes:[0,27],repeatNodeCount:0,tokenData:"1R~RwX^#lpq#lqr$ars$tst%huv%swx%xxy&gyz&lz{&q{|&v|}&}}!O'S!O!P'Z!P!Q(Z!Q!R(`!R![)W![!]-r!^!_.n!_!`.{!`!a/b!b!c/o!c!}/t!}#O0[#P#Q0a#Q#R0f#R#S/t#S#T0k#T#o/t#o#p0w#q#r0|#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~#qY$Z~X^#lpq#l#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~$dQ!_!`$j#r#s$o~$oO!V~~$tO$Q~~$yU#t~OY$tZr$trs%]s#O$t#O#P%b#P~$t~%bO#t~~%ePO~$t~%mQk~OY%hZ~%h~%xO}~~%}U#t~OY%xZw%xwx%]x#O%x#O#P&a#P~%x~&dPO~%x~&lO$[~~&qO$^~~&vO{~R&}O%vP!OQ~'SO$]~R'ZO%uP!PQP'^P!Q!['aP'fR%wP!Q!['a!g!h'o#X#Y'oP'rR{|'{}!O'{!Q![(RP(OP!Q![(RP(WP%wP!Q![(R~(`O|~R(eZ%wP!O!P'a!Q![)W!g!h'o#W#X){#X#Y'o#[#]*d#a#b*x#g#h+l#k#l+}#l#m-W#m#n,iR)]Y%wP!O!P'a!Q![)W!g!h'o#W#X){#X#Y'o#[#]*d#a#b*x#g#h+l#k#l+}#m#n,iQ*QP#pQ!Q![*TQ*WS!Q![*T#[#]*d#a#b*x#g#h+lQ*iP#pQ!Q![*lQ*oR!Q![*l#a#b*x#g#h+lQ*}Q#pQ!Q![+T#g#h+gQ+WR!Q![+T#a#b+a#g#h+lQ+dP#g#h+gQ+lO#pQQ+qP#pQ!Q![+tQ+wQ!Q![+t#a#b+aQ,SP#pQ!Q![,VQ,YT!Q![,V#W#X){#[#]*d#a#b*x#g#h+lQ,nP#pQ!Q![,qQ,tU!Q![,q#W#X){#[#]*d#a#b*x#g#h+l#k#l+}P-ZR!Q![-d!c!i-d#T#Z-dP-iR%wP!Q![-d!c!i-d#T#Z-dV-yT%xS!ZR!Q![.Y![!].Y!c!}.Y#R#S.Y#T#o.YR._T!ZR!Q![.Y![!].Y!c!}.Y#R#S.Y#T#o.Y~.sP!U~!_!`.v~.{O!T~~/QQ$OP!_!`/W#r#s/]Q/]O!QQ~/bO$P~~/gP!S~!_!`/j~/oO!R~~/tO$S~V/{T!ZRtS!Q![/t![!].Y!c!}/t#R#S/t#T#o/t~0aO%s~~0fO%t~~0kOx~~0nRO#S0k#S#T%]#T~0k~0|O%y~~1RO%z~",tokenizers:[0,1,2],topRules:{PromQL:[0,28],MetricName:[1,144]},specialized:[{term:57,get:(e,t)=>((e,t)=>kc[e.toLowerCase()]||-1)(e)<<1},{term:57,get:(e,t)=>((e,t)=>_c[e.toLowerCase()]||-1)(e)<<1|1},{term:57,get:e=>Oc[e]||-1}],tokenPrec:0});function Ic(e,t,n){const r=n.query;switch(t.type.id){case 133:r.metric=Rc(e,t);break;case 136:{r.labels.push(function(e,t){const n=Rc(e,t.getChild(36)),r=Rc(e,t.getChild(137)),i=Rc(e,t.getChild(128)).replace(/"|'/g,"");return{label:n,op:r,value:i}}(e,t));const i=t.getChild(Pc);i&&n.errors.push(Lc(e,i));break}case 54:!function(e,t,n){const r=n.query,i=t.getChild(55),a=Rc(e,i),o=t.getChild(37).getChild(38),s=[];let l="";if(Mc.includes(a)||a.endsWith("_over_time")){let n=Rc(e,t).match(/\[(.+)\]/);(null==n?void 0:n[1])&&(l=n[1],s.push(n[1]))}const c={id:a,params:s};if(r.operations.unshift(c),o){if(Rc(e,o)===l+"]")return;Nc(e,o,n,c)}}(e,t,n);break;case 30:!function(e,t,n){const r=n.query,i=t.getChild(31);let a=Rc(e,i);const o=t.getChild(32),s=[];if(o){o.getChild("By")&&a&&(a=`__${a}_by`);o.getChild(21)&&(a=`__${a}_without`),s.push(...$c(e,o,35))}const l=t.getChild(37).getChild(38),c={id:a,params:[]};r.operations.unshift(c),Nc(e,l,n,c),c.params.push(...s)}(e,t,n);break;case 39:!function(e,t,n){const r=n.query,i=t.firstChild,a=Rc(e,i.nextSibling),o=function(e,t){var n;if(!t)return;if(t.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const r=t.getChild(42);if(!r)return;return{isMatcher:!0,isBool:!1,matches:Rc(e,null==(n=r.getChild(33))?void 0:n.getChild(34)),matchType:r.getChild(3)?"on":"ignoring"}}}(e,t.getChild(41)),s=t.lastChild,l=function(e){const t={};return _.forEach(sc,(e=>{t[e]={id:Ll.ArithmeticBinary}})),_.forEach(lc,(e=>{t[e]={id:Ll.ComparisonBinary,comparison:!0}})),t[e]}(a),c=i.getChild(125),u=s.getChild(125),h=s.getChild(39);c||Ic(e,i,n);if(u)r.operations.push(Bc(a,l,e,s,!!(null==o?void 0:o.isBool)));else if(h){const t=Fc(s);125===(null==t?void 0:t.type.id)&&r.operations.push(Bc(a,l,e,t,!!(null==o?void 0:o.isBool))),Ic(e,s,n)}else{r.binaryQueries=r.binaryQueries||[];const t={operator:a,query:{metric:"",labels:[],operations:[]}};(null==o?void 0:o.isMatcher)&&(t.vectorMatchesType=o.matchType,t.vectorMatches=o.matches),r.binaryQueries.push(t),Ic(e,s,{query:t.query,errors:n.errors})}}(e,t,n);break;case Pc:if(function(e){var t,n,r;return 29===(null==(t=e.prevSibling)?void 0:t.type.id)&&132===(null==(r=null==(n=e.prevSibling)?void 0:n.firstChild)?void 0:r.type.id)}(t))break;n.errors.push(Lc(e,t));break;default:{127===t.type.id&&n.errors.push(Lc(e,t));let r=t.firstChild;for(;r;)Ic(e,r,n),r=r.nextSibling}}}const Mc=["changes","rate","irate","increase","delta"];function Nc(e,t,n,r){if(t)switch(t.type.id){case 29:case 38:{let i=t.firstChild;for(;i;)Nc(e,i,n,r),i=i.nextSibling;break}case 125:r.params.push(parseFloat(Rc(e,t)));break;case 128:r.params.push(Rc(e,t).replace(/"/g,""));break;default:Ic(e,t,n)}}const Pc=0;function Fc(e){return e.firstChild?Fc(e.firstChild):e}function Lc(e,t){var n;return{text:Rc(e,t),from:t.from,to:t.to,parentType:null==(n=t.parent)?void 0:n.name}}function Rc(e,t){return t?function(e){return e.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,((e,t,n,r)=>Dc[parseInt(t,10)](n,r)))}(e.substring(t.from,t.to)):""}const Dc=[(e,t)=>`$${e}`,(e,t)=>`[[${e}${t?`:${t}`:""}]]`,(e,t)=>`\${${e}${t?`:${t}`:""}}`];function Bc(e,t,n,r,i){const a=[e,parseFloat(Rc(n,r))];return t.comparison&&a.push(i),{id:t.id,params:a}}function $c(e,t,n){if(t.type.id===n||t.name===n)return[Rc(e,t)];const r=[];let i=0,a=t.childAfter(i);for(;a;)r.push(...$c(e,a,n)),i=a.to,a=t.childAfter(i);return r}function zc(e){const{datasourceValue:t,params:n,rawQueryOpen:r=!0,value:i,onChange:a}=e,o=(e=>{const t=_.cloneDeep(e);return 0===t.labels.length&&t.labels.push({label:"",value:"",op:"="}),t})(i);return d.createElement("div",{className:"prom-query-builder-container"},d.createElement("div",{className:"prom-query-builder-metric-label-container"},d.createElement(Fs,{datasourceValue:t,params:n,value:i.metric,onChange:e=>{a(l(s({},o),{metric:e}))}}),d.createElement(Bs,{datasourceValue:t,metric:o.metric,params:n,value:o.labels,onChange:e=>{a(l(s({},o),{labels:e}))}})),d.createElement(vc,{metric:o.metric,query:o,datasourceValue:t,params:n,value:o.operations,onChange:e=>{a(e)}}),o.binaryQueries&&o.binaryQueries.length>0&&d.createElement(Tc,{params:n,datasourceValue:t,value:o.binaryQueries,onChange:e=>{a(l(s({},o),{binaryQueries:e}))}}),r&&d.createElement(Cc,{query:o}))}var Hc=is((function(e){const{visible:t,datasourceValue:n,range:r,value:i="",onChange:a}=e,o=ms(r),s=I(o.start).unix(),l=I(o.end).unix(),c=function(e){const t=Ac.parse(e).topNode,n={query:{metric:"",labels:[],operations:[]},errors:[]};try{Ic(e,t,n)}catch(r){console.error(r),r instanceof Error&&n.errors.push({text:r.message})}return function(e){return 0===e.labels.length&&0===e.operations.length&&!e.metric}(n.query)&&(n.errors=[]),n}(i),[u,h]=f.exports.useState(c.query);return d.createElement(Tt,{width:800,title:"PromQL 新手模式",visible:t,closable:!1,onOk:()=>{a(bc(u)),e.destroy()},onCancel:()=>{e.destroy()}},d.createElement(zc,{datasourceValue:n,params:{start:s,end:l},value:u,onChange:e=>{h(e)}}))}));function jc(e){return d.createElement(Ot,{gutter:8},d.createElement(At,{flex:"auto"},d.createElement(Vc,s({},_.omit(e,"cluster")))),d.createElement(At,{flex:"74px"},d.createElement(Ct,{onClick:()=>{Hc({range:{start:"now-12h",end:"now"},datasourceValue:e.cluster,value:e.value,onChange:t=>{e.onChange&&e.onChange(t)}})}},"新手模式")))}const Gc=new hn;var Vc=d.forwardRef((({url:e,headers:t,value:n,onChange:r,executeQuery:i,readonly:a=!1,validateTrigger:o=["onChange","onBlur"],completeEnabled:l=!0,trigger:c=["onBlur","onEnter"]},u)=>{const h=f.exports.useRef(null),p=f.exports.useRef(null),m=f.exports.useRef(i),y=f.exports.useRef(n||""),v={Authorization:`Bearer ${localStorage.getItem("access_token")||""}`};return f.exports.useEffect((()=>{m.current=i,Gc.activateCompletion(!0).activateLinter(!0).setComplete(l?{remote:{url:e,fetchFn:(e,n={})=>{var r;const i=null==(r=n.body)?void 0:r.toString();return fetch(e+(i?`?${i}`:""),{method:"Get",headers:new Headers(t?s(s({},v),t):v)})}}}:void 0);if(null===p.current){if(!h.current)throw new Error("expected CodeMirror container element to exist");const e=pn.create({doc:n,extensions:[Lo,dn(),fn(),pn.allowMultipleSelections.of(!0),mn(),gn(),yn(),vn(),En(),Ro,sn.lineWrapping,xn.of([...bn,...Cn,...Sn,...wn,...Tn,...kn]),_n("Input promql to query. Press Shift+Enter for newlines"),Gc.asExtension(),sn.editable.of(!a),xn.of([{key:"Escape",run:e=>(e.contentDOM.blur(),!1)}]),On.override(xn.of([{key:"Enter",run:e=>("function"==typeof m.current&&m.current(y.current),"function"==typeof r&&_.includes(c,"onEnter")&&r(y.current),!0)},{key:"Shift-Enter",run:An}])),sn.updateListener.of((e=>{if("function"==typeof r){const t=e.state.doc.toString();t!==y.current&&(y.current=t,_.includes(o,"onChange")&&r(t))}}))]}),t=new sn({state:e,parent:h.current});p.current=t,u&&(u.current=t),t.focus()}}),[r,JSON.stringify(t),l]),f.exports.useEffect((()=>{if(y.current!==n){const e=y.current;y.current=n||"";const t=p.current;if(null===t)return;t.dispatch(t.state.update({changes:{from:0,to:(null==e?void 0:e.length)||0,insert:n}}))}}),[n]),d.createElement("div",{className:g({"ant-input":!0,readonly:a,"promql-input":!0}),onBlur:()=>{"function"==typeof r&&_.includes(c,"onBlur")&&y.current!==n&&r(y.current)}},d.createElement("div",{className:"input-content",ref:h}))}));function Yc(e){const{form:t}=e,[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState({});return f.exports.useEffect((()=>{ji("/api/fc-brain/params",{method:Li.Get}).then((e=>e.data)).then((e=>{a(e)}))}),[]),d.createElement(d.Fragment,null,d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>d.createElement(d.Fragment,null,d.createElement(St.Item,{label:"告警方式"},d.createElement(Yt.Group,{buttonStyle:"solid",value:"holtwinters"===e("algorithm")?"abnormalDetection":"threshold",onChange:e=>{"abnormalDetection"===e.target.value?t.setFieldsValue({algorithm:"holtwinters",algo_params:null==i?void 0:i.holtwinters}):t.setFieldsValue({algorithm:"",algo_params:void 0})}},d.createElement(Yt.Button,{value:"threshold"},"阈值告警"),d.createElement(Yt.Button,{value:"abnormalDetection"},"智能告警"))),"holtwinters"===e("algorithm")&&d.createElement(d.Fragment,null,d.createElement(St.Item,{label:"使用算法",name:"algorithm",style:{display:"none"}},d.createElement(Nt,null,d.createElement(Nt.Option,{value:"holtwinters"},"holtwinters"))),d.createElement(St.Item,{label:"高级配置"},d.createElement("div",{style:{height:32,lineHeight:"32px",userSelect:"none"}},d.createElement("a",{onClick:()=>r(!n)},n?"收起":"展开")),d.createElement("div",{style:{display:n?"block":"none"}},d.createElement("div",null,"季节性周期时间为：",d.createElement(St.Item,{noStyle:!0,name:["algo_params","seasonal_duration"]},d.createElement(Nt,{style:{width:100}},d.createElement(Nt.Option,{value:3600},"小时"),d.createElement(Nt.Option,{value:86400},"天"),d.createElement(Nt.Option,{value:604800},"周"),d.createElement(Nt.Option,{value:2592e3},"月")))," "),d.createElement("div",{style:{display:"flex",alignItems:"baseline",marginTop:16}},d.createElement("div",{style:{marginRight:16}},"偏离"),d.createElement("div",{style:{display:"flex",gap:20}},d.createElement("div",{style:{marginBottom:16}},d.createElement(St.Item,{noStyle:!0,name:["algo_params","upper_bound"],valuePropName:"checked",getValueFromEvent:e=>e.target.checked?1:0},d.createElement(_t,null,"上界")),d.createElement(St.Item,{noStyle:!0,name:["algo_params","upper_times_num"]},d.createElement(Gt,null))," ","倍误差"),d.createElement("div",null,d.createElement(St.Item,{noStyle:!0,name:["algo_params","lower_bound"],valuePropName:"checked",getValueFromEvent:e=>e.target.checked?1:0},d.createElement(_t,null,"下界")),d.createElement(St.Item,{noStyle:!0,name:["algo_params","lower_times_num"]},d.createElement(Gt,null))," ","倍误差"))),d.createElement("div",null,d.createElement(St.List,{name:["algo_params","compares"]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement("div",{style:{marginBottom:10}},"同环比"," ",d.createElement(Z,{onClick:()=>{t({operator:1,offset:86400,bound_type:0})}})),e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(zt,{key:r,style:{display:"flex",marginBottom:8},align:"baseline"},d.createElement(St.Item,l(s({},a),{name:[i,"operator"]}),d.createElement(Nt,null,d.createElement(Nt.Option,{value:1},"且"),d.createElement(Nt.Option,{value:0},"或"))),d.createElement("span",null,"相比"),d.createElement(St.Item,l(s({},a),{name:[i,"offset"]}),d.createElement(Nt,null,d.createElement(Nt.Option,{value:86400},"1"),d.createElement(Nt.Option,{value:172800},"2"),d.createElement(Nt.Option,{value:259200},"3"),d.createElement(Nt.Option,{value:345600},"4"),d.createElement(Nt.Option,{value:432e3},"5"),d.createElement(Nt.Option,{value:518400},"6"),d.createElement(Nt.Option,{value:604800},"7"))),d.createElement("span",null,"天前同时期"),d.createElement(St.Item,l(s({},a),{name:[i,"bound_type"]}),d.createElement(Nt,null,d.createElement(Nt.Option,{value:0},"偏离"),d.createElement(Nt.Option,{value:1},"上升"),d.createElement(Nt.Option,{value:2},"下降"))),d.createElement(St.Item,l(s({},a),{name:[i,"value"]}),d.createElement(Gt,null))," %",d.createElement(ie,{onClick:()=>n(i)}))})))))))))))))}function Uc(e){const{children:t,label:n,labelWidth:r="max-content",noStyle:i=!1}=e;return d.createElement(wt.Group,{compact:!0,className:"input-group-with-form-item"},d.createElement("span",{className:g({"ant-input-group-addon":!i,"input-group-with-form-item-label":!0}),style:{width:r}},n),d.createElement("div",{className:"input-group-with-form-item-content"},t))}const qc="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split(""),Wc=["count","avg","sum","max","min","p90","p95","p99","rawData"],Xc={count:"count",avg:"avg",sum:"sum",max:"max",min:"min",p90:"p90",p95:"p95",p99:"p99",rawData:"raw data"};function Kc({prefixField:e={},prefixFields:t=[],prefixNameField:n=[],cate:r,cluster:i,index:a,valueRefVisible:o=!0}){const[c,u]=f.exports.useState(""),[h,p]=f.exports.useState([]),{run:m}=ae((()=>{Aa({cate:r,cluster:_.join(i," "),index:a}).then((e=>{p(_.map(e.dat,(e=>({value:e}))))}))}),{wait:500});return f.exports.useEffect((()=>{"elasticsearch"===r&&!_.isEmpty(i)&&a&&m()}),[r,_.join(i),a]),d.createElement(St.List,l(s({},e),{name:[...n,"query","values"]}),((e,{add:r,remove:i})=>d.createElement("div",null,d.createElement(St.Item,{shouldUpdate:(e,r)=>{const i=_.get(e,[...t,...n,"query","values"]),a=_.get(r,[...t,...n,"query","values"]);return!_.isEqual(i,a)},noStyle:!0},(({getFieldValue:i})=>{const a=i([...t,...n,"query","values"]);return"rawData"===_.get(a,[0,"func"])?d.createElement("div",{style:{marginBottom:8}},"数值提取"):d.createElement("div",{style:{marginBottom:8}},"数值提取"," ",d.createElement(Z,{style:{cursor:"pointer"},onClick:()=>{r({ref:qc[e.length],func:Wc[0],field:void 0})}}))})),e.map(((r,a)=>d.createElement("div",{key:r.key,style:{marginBottom:16}},d.createElement(St.Item,l(s({},r),{name:[r.name,"ref"],hidden:!0})),d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:p,setFields:f})=>{const m=p([...t,...n,"query","values",r.name,"func"]);return d.createElement(Ot,{gutter:10},d.createElement(At,{flex:"auto"},d.createElement(Ot,{gutter:10},d.createElement(At,{span:"count"===m?24:12},d.createElement(wt.Group,null,o&&d.createElement("span",{className:"ant-input-group-addon"},qc[a]),d.createElement(St.Item,l(s({},r),{name:[r.name,"func"],noStyle:!0}),d.createElement(Nt,{style:{width:"100%"},onChange:e=>{"rawData"===e&&f([{name:[...t,...n,"query","values"],value:[{func:"rawData"}]},{name:[...t,...n,"query","limit"],value:100}])}},Wc.map((e=>d.createElement(Nt.Option,{key:e,value:e},Xc[e]))))))),"count"!==m&&"rawData"!==m&&d.createElement(At,{span:12},d.createElement(Uc,{label:"Field key",labelWidth:80},d.createElement(St.Item,l(s({},r),{name:[r.name,"field"],rules:[{required:!0,message:"必须填写 field key"}]}),d.createElement(Ht,{options:_.filter(h,(e=>!c||e.value.includes(c))),style:{width:"100%"},onSearch:u})))))),e.length>1&&d.createElement(At,{flex:"40px"},d.createElement("div",{style:{height:30,display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{i(r.name)}},d.createElement(ie,null))))}))))))))}const Qc=["terms"],Zc={terms:"根据指定 field 分组"};function Jc({prefixField:e}){return d.createElement(d.Fragment,null,d.createElement(St.Item,l(s({},e),{name:[e.name,"cate"]}),d.createElement(Nt,{style:{width:"100%"},optionLabelProp:"value"},Qc.map((e=>d.createElement(Nt.Option,{key:e,value:e},e," (",Zc[e],")"))))),d.createElement(St.List,l(s({},e),{name:[e.name,"params"]}),((e,{add:t,remove:n})=>d.createElement("div",null,e.map(((r,i)=>d.createElement(Ot,{gutter:16,key:r.key,style:{marginBottom:i<e.length-1?16:0}},d.createElement(At,{flex:"auto"},d.createElement(Ot,{gutter:16},d.createElement(At,{flex:12},d.createElement(St.Item,l(s({},r),{name:[r.name,"query"],noStyle:!0}),d.createElement(wt,{addonBefore:"Query"}))),d.createElement(At,{flex:12},d.createElement(St.Item,l(s({},r),{name:[r.name,"alias"],noStyle:!0}),d.createElement(wt,{addonBefore:"Alias"}))))),d.createElement(At,{flex:"40px",style:{display:"flex",alignItems:"center"}},d.createElement(zt,null,d.createElement(Z,{style:{cursor:"pointer"},onClick:()=>{t({alias:"",query:""})}}),e.length>1&&d.createElement(ie,{style:{cursor:"pointer"},onClick:()=>{n(r.name)}}))))))))))}function eu({prefixField:e,fieldsOptions:t}){const[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState("");return d.createElement(Ot,{gutter:16},d.createElement(At,{flex:"auto"},d.createElement(Ot,{gutter:16},d.createElement(At,{span:n?6:12},d.createElement(St.Item,l(s({},e),{name:[e.name,"cate"],noStyle:!0}),d.createElement(Nt,{style:{width:"100%"}},Qc.map((e=>d.createElement(Nt.Option,{key:e,value:e},e," (",Zc[e],")")))))),d.createElement(At,{span:n?6:12},d.createElement(Uc,{label:"Field key",labelWidth:80},d.createElement(St.Item,l(s({},e),{name:[e.name,"field"],rules:[{required:!0,message:"必须填写 field key"}]}),d.createElement(Ht,{options:_.filter(t,(e=>!i||e.value.includes(i))),style:{width:"100%"},onSearch:a})))),n&&d.createElement(d.Fragment,null,d.createElement(At,{span:6},d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"匹配个数"),d.createElement(St.Item,l(s({},e),{name:[e.name,"size"],noStyle:!0}),d.createElement(Gt,{style:{width:"100%"}})))),d.createElement(At,{span:6},d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"文档最小值"),d.createElement(St.Item,l(s({},e),{name:[e.name,"min_value"],noStyle:!0}),d.createElement(Gt,{style:{width:"100%"}}))))))),d.createElement(At,{flex:"88px"},d.createElement(Ct,{onClick:()=>{r(!n)}},"高级设置 ",n?d.createElement(oe,null):d.createElement(se,null))))}function tu({prefixField:e}){const[t,n]=f.exports.useState(!1);return d.createElement(Ot,{gutter:16},d.createElement(At,{flex:"auto"},d.createElement(Ot,{gutter:16},d.createElement(At,{span:t?6:12},d.createElement(St.Item,l(s({},e),{name:[e.name,"cate"],noStyle:!0}),d.createElement(Nt,{style:{width:"100%"}},Qc.map((e=>d.createElement(Nt.Option,{key:e,value:e},e)))))),d.createElement(At,{span:t?6:12},d.createElement(St.Item,l(s({},e),{name:[e.name,"field"],noStyle:!0}),d.createElement(wt,{placeholder:"Field key"}))),t&&d.createElement(d.Fragment,null,d.createElement(At,{span:6},d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"步长"),d.createElement(St.Item,l(s({},e),{name:[e.name,"size"],noStyle:!0}),d.createElement(Gt,{style:{width:"100%"}})))),d.createElement(At,{span:6},d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"文档最小值"),d.createElement(St.Item,l(s({},e),{name:[e.name,"min_value"],noStyle:!0}),d.createElement(Gt,{style:{width:"100%"}}))))))),d.createElement(At,{flex:"88px"},d.createElement(Ct,{onClick:()=>{n(!t)}},"高级设置 ",t?d.createElement(oe,null):d.createElement(se,null))))}function nu({prefixField:e={},prefixFields:t=[],prefixNameField:n=[],cate:r,cluster:i,index:a,backgroundVisible:o=!0}){const[c,u]=f.exports.useState([]),{run:h}=ae((()=>{Aa({cate:r,cluster:_.join(i," "),index:a}).then((e=>{u(_.map(e.dat,(e=>({value:e}))))}))}),{wait:500});return f.exports.useEffect((()=>{"elasticsearch"===r&&!_.isEmpty(i)&&a&&h()}),[r,_.join(i),a]),d.createElement(St.List,l(s({},e),{name:[...n,"group_by"]}),((e,{add:r,remove:i})=>d.createElement("div",null,d.createElement("div",{style:{marginBottom:8}},"Group By"," ",d.createElement(Z,{style:{cursor:"pointer"},onClick:()=>{r({cate:"terms",params:[{alias:"",query:""}]})}})),e.map((e=>d.createElement("div",{key:e.key,style:{marginBottom:o?16:0}},d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:r})=>{const a=r([...t,...n,"group_by",e.name,"cate"]);return d.createElement(Ot,{gutter:10,align:"top"},d.createElement(At,{flex:"auto"},d.createElement("div",{style:o?{backgroundColor:"#FAFAFA",padding:16}:{}},"filters"===a&&d.createElement(Jc,{prefixField:e}),"terms"===a&&d.createElement(eu,{prefixField:e,fieldsOptions:c}),"histgram"===a&&d.createElement(tu,{prefixField:e}))),d.createElement(At,{flex:"40px",style:{display:"flex",alignItems:"center"}},d.createElement("div",{onClick:()=>{i(e.name)},style:{height:32,lineHeight:"32px"}},d.createElement(ie,{style:{cursor:"pointer"}}))))}))))))))}function ru({prefixField:e={},prefixNameField:t=[]}){return d.createElement(d.Fragment,null,d.createElement("div",{style:{marginBottom:8}},"时间颗粒度"),d.createElement(Ot,{gutter:10},d.createElement(At,{span:12},d.createElement(St.Item,l(s({},e),{name:[...t,"query","date_field"]}),d.createElement(wt,{placeholder:"日期字段 key"}))),d.createElement(At,{span:12},d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"间隔"),d.createElement(St.Item,l(s({},e),{name:[...t,"query","interval"],noStyle:!0}),d.createElement(Gt,{style:{width:"100%"}})),d.createElement("span",{className:"ant-input-group-addon"},d.createElement(St.Item,l(s({},e),{name:[...t,"query","interval_unit"],noStyle:!0,initialValue:"min"}),d.createElement(Nt,null,d.createElement(Nt.Option,{value:"second"},"秒"),d.createElement(Nt.Option,{value:"min"},"分"),d.createElement(Nt.Option,{value:"hour"},"小时"))))))))}const iu=[">",">=","<","<=","=","!="],au=["cur","diff","diff_abs","diff_percent","diff_percent_abs","query_percent","nodata"],ou={cur:"当前值",diff:"变化值",diff_abs:"变化值绝对值",diff_percent:"变化百分比",diff_percent_abs:"变化百分比绝对值",query_percent:"查询占比",nodata:"无数据"};function su({restField:e,name:t,queryValues:n,form:r,defaultRuleOp:i}){const[a,o]=f.exports.useState(i||"AND");function c(t){return d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},d.createElement(St.Item,l(s({noStyle:!0},e),{name:[t,"value"]}),d.createElement(Nt,null,_.map(n,(e=>d.createElement(Nt.Option,{key:e.ref,value:e.ref},e.ref)))))),d.createElement(St.Item,l(s({noStyle:!0},e),{name:[t,"func"]}),d.createElement(Nt,{style:{width:"100%"}},_.map(au,(e=>d.createElement(Nt.Option,{key:e,value:e},ou[e]))))))}function u(t){return d.createElement(St.Item,l(s({noStyle:!0},e),{name:[t,"op"]}),d.createElement(Nt,{style:{width:"100%"}},_.map(iu,(e=>d.createElement(Nt.Option,{key:e,value:e},e)))))}function h(t){return d.createElement(St.Item,l(s({noStyle:!0},e),{name:[t,"threshold"]}),d.createElement(Gt,{style:{width:"100%"},placeholder:"阈值"}))}function p(){return d.createElement(St.Item,{noStyle:!0},d.createElement(Nt,{value:a,onChange:e=>{o(e),r.setFields([{name:["query","rules",t,"rule_op"],value:e}])}},d.createElement(Nt.Option,{value:"AND"},"AND"),d.createElement(Nt.Option,{value:"OR"},"OR")))}return f.exports.useEffect((()=>{o(i||"AND")}),[i]),d.createElement(St.List,l(s({},e),{name:[t,"rule"]}),((e,{add:n,remove:r})=>d.createElement("div",null,e.map((({key:i,name:a},o)=>d.createElement(Ot,{gutter:16,key:i,style:{marginBottom:16}},d.createElement(At,{flex:"auto"},d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>{const n=e(["query","rules",t,"rule",a,"func"]);return"cur"===n?d.createElement(Ot,{gutter:16},d.createElement(At,{span:7},c(a)),d.createElement(At,{span:7},u(a)),d.createElement(At,{span:8},h(a)),d.createElement(At,{span:2},p())):_.includes(["diff","diff_abs","diff_percent","diff_percent_abs"],n)?d.createElement(Ot,{gutter:16},d.createElement(At,{span:6},c(a)),d.createElement(At,{span:5},u(a)),d.createElement(At,{span:5},h(a)),d.createElement(At,{span:6},d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"相比"),d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>{const n=e(["query","rules",t,"rule",a,"compare_time_unit"]);return d.createElement(St.Item,{name:[a,"compare_time"],noStyle:!0},d.createElement(Gt,{style:{width:"100%"},min:1,max:{min:59,hour:23,day:void 0}[n]}))})),d.createElement("span",{className:"ant-input-group-addon"},d.createElement(St.Item,{name:[a,"compare_time_unit"],noStyle:!0,initialValue:"min"},d.createElement(Nt,null,d.createElement(Nt.Option,{value:"min"},"分"),d.createElement(Nt.Option,{value:"hour"},"小时"),d.createElement(Nt.Option,{value:"day"},"天")))))),d.createElement(At,{span:2},p())):"query_percent"===n?d.createElement(Ot,{gutter:16},d.createElement(At,{span:6},c(a)),d.createElement(At,{span:5},u(a)),d.createElement(At,{span:5},h(a)),d.createElement(At,{span:6},d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"占比"),d.createElement(St.Item,{name:[a,"compare_query"],noStyle:!0},d.createElement(Gt,{style:{width:"100%"}})))),d.createElement(At,{span:2},p())):"nodata"===n?d.createElement(Ot,{gutter:16},d.createElement(At,{span:22},c(a)),d.createElement(At,{span:2},p())):void 0}))),d.createElement(At,{flex:"40px",style:{display:"flex",alignItems:"center"}},d.createElement(zt,null,d.createElement(Z,{style:{cursor:"pointer"},onClick:()=>{n({value:"A",func:au[0],op:iu[0]})}}),e.length>1&&d.createElement(ie,{style:{cursor:"pointer"},onClick:()=>{r(t)}})))))))))}const lu=["一级告警","二级告警","三级告警"];function cu({form:e}){return d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:t})=>{const n=t(["query","values"]);return d.createElement(St.List,{name:["query","rules"]},((r,{add:i,remove:a})=>d.createElement("div",null,d.createElement("div",{style:{marginBottom:8}},"告警条件"," ",d.createElement(Z,{style:{cursor:"pointer"},onClick:()=>{i({rule:[{value:"A",func:au[0],op:iu[0]}],rule_op:"AND",severity:1})}})),r.map((i=>{var o=i,{key:s,name:l}=o,u=c(o,["key","name"]);const h=t(["query","rules",l,"rule_op"]);return d.createElement("div",{key:s,style:{marginBottom:16}},d.createElement(Ot,{gutter:16},d.createElement(At,{flex:"auto"},d.createElement("div",{style:{backgroundColor:"#FAFAFA",padding:16}},d.createElement(su,{restField:u,name:l,queryValues:n,form:e,defaultRuleOp:h}),d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"触发"),d.createElement(St.Item,{name:[l,"severity"],noStyle:!0},d.createElement(Nt,{style:{width:"100%"}},d.createElement(Nt.Option,{value:1},"一级告警"),d.createElement(Nt.Option,{value:2},"二级告警"),d.createElement(Nt.Option,{value:3},"三级告警")))),d.createElement(St.Item,{name:[l,"rule_op"],noStyle:!0,hidden:!0},d.createElement("div",null)))),r.length>1&&d.createElement(At,{flex:"40px",style:{display:"flex",alignItems:"center"}},d.createElement("div",{onClick:()=>{a(l)}},d.createElement(ie,{style:{cursor:"pointer"}})))))})))))}))}var uu,hu,pu={exports:{}};window;var du=V(pu.exports=(uu=In,hu=q.exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){e.exports=uu},function(e,t){e.exports=hu},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(8),i=n(9),a=n(10),o=n(11);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}var o,s,l;y(e,t,a,{once:!0}),"error"!==t&&(s=i,l={once:!0},"function"==typeof(o=e).on&&y(o,"error",s,l))}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,a,o,s;if(c(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=u(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var c=l.length,u=g(l,c);for(n=0;n<c;++n)a(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(6);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(6);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){},function(e,t,n){n.r(t),n.d(t,"default",(function(){return Q}));var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=n(2),l=n.n(s),c=n(3),u=n.n(c),h=n(0),p=n(1);let d=null,f=null;function m(e,t={}){let n=document.createElement(e);return Object.keys(t).forEach((e=>{n[e]=t[e]})),n}function g(e,t,n){return(window.getComputedStyle(e,n||null)||{display:"none"})[t]}function y(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;for(;t!==document;){if("none"===g(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}let v=0,E=null;function x(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=b.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:n}=e,r=new ResizeObserver((()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==n))&&S(e)})),{detached:i,rendered:a}=y(e);e.__resize_observer_triggered__=!1===i&&!1===a,e.__resize_observer__=r,r.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){S(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(v||(n='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(r=document.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(r),E=r),function(e){let t=g(e,"position");t&&"static"!==t||(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};let n=m("div",{className:"resize-triggers"}),r=m("div",{className:"resize-expand-trigger"}),i=m("div"),a=m("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:a},w(e),e.addEventListener("scroll",C,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=y(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}var n,r;e.__resize_listeners__.push(t),v++}function b(){let{rendered:e,detached:t}=y(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(w(this),this.addEventListener("scroll",C,!0)),this.__resize_rendered__=e,S(this))}function C(){var e,t;w(this),this.__resize_raf__&&(e=this.__resize_raf__,f||(f=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),f(e)),this.__resize_raf__=(t=()=>{let e=function(e){let{width:t,height:n}=e.__resize_last__,{offsetWidth:r,offsetHeight:i}=e;return r!==t||i!==n?{width:r,height:i}:null}(this);e&&(this.__resize_last__=e,S(this))},d||(d=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),d(t))}function S(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((t=>{t.call(e,e)}))}function w(e){let{expand:t,expandChild:n,contract:r}=e.__resize_triggers__,{scrollWidth:i,scrollHeight:a}=r,{offsetWidth:o,offsetHeight:s,scrollWidth:l,scrollHeight:c}=t;r.scrollLeft=i,r.scrollTop=a,n.style.width=o+1+"px",n.style.height=s+1+"px",t.scrollLeft=l,t.scrollTop=c}var T=n(7),k=n.n(T);function _(e,t){var n=e.length;return t<n?e[t]:_(e,t-n)}function O(e,t){return"X"===t?1e3*e:e}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.getBoundingClientRect(),i=t.touches[n].clientX,a=t.touches[n].clientY;return{offsetX:i-r.left,offsetY:a-r.top,clientX:i,clientY:a}}function I(e){var t=String(e);if(e>=1e3){t=h.format(".5s")(e);var n=/[kMGTPEZY]$/;if(n.test(t)){var r=t[t.length-1];t=t.replace(n,""),t=parseFloat(t)+r}}return t}function M(e,t){var n=e;return null!==e&&"function"==typeof t&&(n=t(e)),n}var N=function(){function e(t,n,r){l()(this,e),this.options=void 0,this.ctx=void 0,this.yAxis=void 0,this.options=t,this.ctx=n,this.yAxis=r}return u()(e,[{key:"init",value:function(){var e=this.options,t=e.chart.width,n=e.timestamp,r=e.xmin,i=e.xmax,a=h.scaleTime().range([this.yAxis.tickMaxWidth,t]);return a.domain([O(r,n)-(r===i?1e3:0),O(i,n)+(r===i?1e3:0)]),a}},{key:"draw",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=n.time,o=e.ticks(Math.floor(r.width/90));i.ticks&&(o=i.ticks);var s=r.height-i.tickpadding-i.labels.fontSize;t.beginPath(),o.forEach((function(n){var r=e(n);r&&(t.moveTo(r,s),t.lineTo(r,s-i.tickLength))})),t.lineWidth=1,t.strokeStyle=i.tickColor,t.stroke(),t.closePath(),t.beginPath(),t.moveTo(0,s-i.tickLength),t.lineTo(r.width,s-i.tickLength),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke(),t.closePath(),t.textAlign="center",t.textBaseline="bottom",t.fillStyle=i.labels.color,t.font="".concat(i.labels.fontSize,"px Palantino"),o.forEach((function(n,s){var l="%H:%M";0!==n.getSeconds()&&(l="%H:%M:%S"),0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&(l="%m-%d"),i.labels.timeFormat&&(l=i.labels.timeFormat);var c=n;if(a&&a.timezoneOffset){var u=n.getTimezoneOffset(),p=n.getTime()+60*u*1e3+60*a.timezoneOffset*1e3;c=new Date(p)}if(i.ticks&&i.ticks.length>1){var d=e(n);0===s?d+=l.length*i.labels.fontSize/4+1:s===o.length-1&&(d-=l.length*i.labels.fontSize/4-1),t.fillText(h.timeFormat(l)(c),d,r.height)}else e(n)&&t.fillText(h.timeFormat(l)(c),e(n),r.height)}))}},{key:"drawPlotLines",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=n.xAxis.plotLines,o=r.height-i.tickpadding-i.labels.fontSize;Array.isArray(a)&&a.forEach((function(r){var a=e("X"===n.timestamp?1e3*r.value:r.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(a,0),t.lineTo(a,o-i.tickLength),t.strokeStyle=r.color,t.stroke(),t.setLineDash([])}))}}]),e}(),P=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.tickLength=void 0,this.ticks=void 0,this.tickMaxWidth=void 0,this.options=t;var r=t.yAxis;n.font="".concat(r.labels.fontSize,"px Palantino"),this.ctx=n,this.tickLength=Math.floor(t.chart.height/50),this.ticks=[],this.tickMaxWidth=0}return u()(e,[{key:"init",value:function(){var e=this.options,t=e.chart,n=e.xAxis,r=e.yAxis,i=h.scaleLinear();r.scale&&"log"===r.scale.type&&(i=h.scaleLog().base(r.scale.log||10));var a=i.range([t.height-(n.labels.fontSize+n.tickpadding+n.tickLength),10]);return this.setDomain(a,this.options),a}},{key:"getRealData",value:function(e){var t=this.options,n=t.yAxis.plotLines,r=t.ykey,i=t.fillNull;return Array.isArray(e)?(Array.isArray(n)&&n.forEach((function(t){"number"==typeof t.value&&e.push(o()({},r,t.value))})),"number"==typeof i&&e.push(o()({},r,i)),e):[]}},{key:"getPlotLinesMaxAbs",value:function(){var e,t=this.options.yAxis.plotLines;return Array.isArray(t)&&t.forEach((function(t){(!e||Math.abs(e)<Math.abs(t.value))&&(e=t.value)})),e}},{key:"setDomain",value:function(e,t){var n=t.ymin,r=t.ymax,i=this.options.yAxis,a=this.tickLength;if(n===r&&0!==n){var o=(r-n)/(this.tickLength-1),s=o/2||r||1;a=0===o?1:this.tickLength,n-=s,r+=s}if(n>r){var l=n;n=r,r=l}if(i.plotLinesFixed){var c=this.getPlotLinesMaxAbs();c&&(c<n&&(n=c),c>r&&(r=c))}e.domain([n,r]),e.nice(a);var u,h,d,f,m=e.ticks(a),g=(u=m,h=this.ctx,d=i.tickValueFormatter,f=u.map((function(e){var t;return t="function"==typeof d?d(e):I(e),h.measureText(t).width})),Object(p.max)(f)+5);this.ticks=m,this.tickMaxWidth=g}},{key:"draw",value:function(e){var t=this,n=this.ctx,r=this.options,i=r.yAxis,a=r.chart;n.beginPath(),n.fillStyle=i.backgroundColor||"#fff",n.fillRect(0,0,this.tickMaxWidth,a.height-12),n.stroke(),n.closePath(),n.textAlign="right",n.textBaseline="middle",n.strokeStyle=i.labels.color,n.lineWidth=1,n.fillStyle=i.labels.color,this.ticks.forEach((function(r){var a;a="function"==typeof i.tickValueFormatter?i.tickValueFormatter(r):I(r);var o=e(r);n.fillText(a,t.tickMaxWidth-5,o)}))}},{key:"drawGridLine",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.yAxis;t.beginPath(),this.ticks.forEach((function(n){var i=e(n);t.moveTo(0,i),t.lineTo(r.width,i)})),t.lineWidth=1,t.strokeStyle=i.gridLineColor,t.stroke(),t.closePath()}},{key:"drawPlotLines",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.yAxis,a=n.yAxis.plotLines;Array.isArray(a)&&a.forEach((function(n){var a=n.labelEnable,o=void 0===a||a,s=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(0,s),t.lineTo(r.width,s),t.strokeStyle=n.color,t.stroke(),t.setLineDash([]),o&&(t.textAlign="right",t.textBaseline="top",t.shadowColor=n.shadowColor||"#fff",t.shadowBlur=1,t.lineWidth=1,t.fillStyle=n.color,t.font="".concat(i.labels.fontSize,"px Palantino"),t.strokeText(String(n.value),r.width-10,s),t.fillText(String(n.value),r.width-10,s))}))}}]),e}();function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t){return"X"===t?1e3*e:e}function D(e){var t,n=e.series,r=e.x,i=e.xkey,a=e.ykey,o=e.ykey2,s=e.oykey,l=e.timestamp,c=e.fillNull,u=(t=function(e,t){return(n=R(e[i],l))<(r=t)?-1:n>r?1:n>=r?0:NaN;var n,r},{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}).left,h=new Date(r).getTime(),d=[];return"[object Array]"!==Object.prototype.toString.call(n)?[]:(n.forEach((function(e,t){if(I=e,M=o,!Object(p.some)(I.data,(function(e){return M&&M in e}))&&!1!==e.visible){var n=e.name,f=e.color,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"[object Function]"===Object.prototype.toString.call(t)&&t(r)&&(n[r]=e[r]);return n}(e,(function(e){return"data"!==e})),g=e.data,y=void 0===g?[]:g;if("[object Array]"===Object.prototype.toString.call(y)&&0!==(y=y.filter((function(e){return"number"==typeof e[a]||"number"==typeof c}))).length){var v,E=u(y,r),x=y[E-1],b=y[E];if(x&&b){var C=R(x[i],l),S=R(b[i],l),w=x[a],T=b[a];null===w&&void 0!==c&&(w=c),null===T&&void 0!==c&&(T=c),v=h-C<S-h?L(L({},x),{},{name:n,color:f,timestamp:C,value:w,origin:x[s],serieIndex:t,serieOptions:m}):L(L({},b),{},{name:n,color:f,timestamp:S,value:T,origin:b[s],serieIndex:t,serieOptions:m}),d.push(v)}else if(x){var k=R(x[i],l),_=x[a];null===_&&void 0!==c&&(_=c),v=L(L({},x),{},{name:n,color:f,timestamp:k,value:_,origin:x[s],serieIndex:t,serieOptions:m}),d.push(v)}else if(b){var O=R(b[i],l),A=b[a];null===A&&void 0!==c&&(A=c),v=L(L({},b),{},{name:n,color:f,timestamp:O,value:A,origin:b[s],serieIndex:t,serieOptions:m}),d.push(v)}}}var I,M})),d)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(){function e(t,n,r,i){l()(this,e),this.options=void 0,this.ctx=void 0,this.flag=void 0,this.container=void 0,this.isMouserover=void 0,this.options=t,this.ctx=n,this.flag=!1,this.container=r,this.init(r,i),this.isMouserover=!1}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart.id,r=document.createElement("div");r.id="".concat(n,"-tooltip"),r.className="ts-graph-tooltip",document.getElementById(r.id)||document.body.append(r)}},{key:"clear",value:function(){var e=this.options,t=e.ratio,n=e.chart,r=n.id,i=n.containerWidth,a=n.containerHeight,o=document.getElementById("".concat(r,"-tooltip"));this.isMouserover=!1,this.ctx.save(),this.ctx.setTransform(1*t,0,0,1*t,0,0),this.ctx.clearRect(0,0,i,a),this.ctx.restore(),o.style.top="-99999px",o.lastChild&&o.removeChild(o.lastChild)}},{key:"getNearestPoints",value:function(e,t,n,r){var i=this.options,a=i.series,o=void 0===a?[]:a,s=i.chart.colors,l=i.tooltip.shared,c=i.xkey,u=i.ykey,h=i.ykey2,d=i.oykey,f=i.timestamp,m=i.fillNull,g=e.offsetX||e.layerX,y=t.invert(g),v=[];if(!1!==this.isMouserover){v=D({x:y,xkey:c,ykey:u,ykey2:h,oykey:d,timestamp:f,series:o,fillNull:m}).map((function(e){return $($({},e),{},{x:t(e.timestamp),y:n(e.value),color:e.color||_(s,e.serieIndex)})}));var E,x,b=Object(p.groupBy)(v,"x");if(Object(p.keys)(b).length>1){var C=Number.POSITIVE_INFINITY;for(var S in b)if(Object.prototype.hasOwnProperty.call(b,S)){var w=(E=e.offsetX,x=Number(S),Math.sqrt(Math.pow(x-E,2)));w<C&&(C=w,v=b[S])}}if(!l){var T=Number.POSITIVE_INFINITY;v.forEach((function(t){var n,r,i=(n={x:e.offsetX,y:e.offsetY},r=t,Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)));i<T&&(T=i,v=[t])}))}r(v)}}},{key:"draw",value:function(e,t,n){var r=this,i=t.xScales,a=t.yScales,o=t.yAxis;this.isMouserover=!0,this.getNearestPoints(e,i,a,(function(t){if(r.clear(),t.length){if(t[0].x<o.tickMaxWidth)return;r.drawCrosshair(t[0].x),r.drawSymbol(t),r.drawModal(t,e)}n&&"[object Function]"===Object.prototype.toString.call(n)&&n(t)}))}},{key:"drawModal",value:function(e,t){var n=this.options,r=n.chart,a=r.id,o=r.renderTo,s=n.tooltip,l=n.time,c=n.notDisplayedSeries,u=o.offsetHeight,d=document.getElementById("".concat(a,"-tooltip")),f=document.createElement("div"),m=e,g=((u=window.innerHeight/1.5)-18-100)/15,y=!1;if(s.sharedSortDirection&&(e=Object(p.orderBy)(e,(function(e){return e.value}),s.sharedSortDirection)),e.length>g&&(e=e.slice(0,g),y=!0),f.className="ts-graph-tooltip-content",d.appendChild(f),"[object Function]"===Object.prototype.toString.call(s.formatter))f.innerHTML=s.formatter(i()(e),i()(m));else{var v=e[0],E=document.createDocumentFragment(),x=document.createElement("ul"),b=document.createElement("li"),C=new Date(v.timestamp);if(l&&l.timezoneOffset){var S=C.getTimezoneOffset(),w=C.getTime()+60*S*1e3+60*l.timezoneOffset*1e3;C=new Date(w)}var T=document.createTextNode(h.timeFormat(s.timeFormat)(C));if(b.appendChild(T),b.style.color="#666",x.style.maxWidth="".concat(window.innerWidth/1.5,"px"),x.appendChild(b),E.appendChild(x),e.forEach((function(e){var t=e.color,n=e.name,r=e.origin,i=e.filledNull;if(!(c.indexOf(n)>-1)){var a=document.createElement("li");if(t){var o=document.createElement("span"),l=document.createTextNode("● ");o.style.color=t,o.appendChild(l),a.appendChild(o)}if(n){var u=document.createTextNode("".concat(n,": "));a.appendChild(u)}var d=r;if(Object(p.isNumber)(d)){var f,m=document.createElement("strong");f="function"==typeof s.pointValueformatter?s.pointValueformatter(d):"origin"===s.precision?d:"short"===s.precision?function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(h.format(".5s")(d)):s.precision>0?h.format(",."+s.precision+"f")(d):h.format(",.3f")(d),f+=i?"(空值填补,仅限看图使用)":"";var g=document.createTextNode(f);m.appendChild(g),a.appendChild(m)}x.appendChild(a)}})),y){var k=document.createElement("li"),_=document.createTextNode("......");k.appendChild(_),x.appendChild(k)}f.appendChild(E)}var O=f.offsetWidth,A=f.offsetHeight,I=this.container.getBoundingClientRect(),M=t.layerX+I.left,N=t.layerY+I.top;d.style.left="".concat(M-O-20,"px"),d.style.top="".concat(N+20,"px"),M-O-20<0&&(d.style.left="".concat(M+20,"px")),N+20+A>u&&(d.style.top=N-A-20<0?"0px":"".concat(N-A-20,"px")),d.style.zIndex="9999",d.style.visibility="visible"}},{key:"drawSymbol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.ctx,n=this.options;e.forEach((function(e){var r=e.x,i=e.y,a=e.color,o=e.name;n.notDisplayedSeries.indexOf(o)>-1||(t.beginPath(),t.arc(r,i,5,0,360,!1),t.lineWidth=1,t.fillStyle=a,t.fill(),t.beginPath(),t.arc(r,i,3,0,360,!1),t.lineWidth=1,t.fillStyle="white",t.fill())}))}},{key:"drawCrosshair",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=r.height-i.tickpadding-i.labels.fontSize-i.tickLength;t.beginPath(),t.moveTo(e,0),t.lineTo(e,a),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke()}},{key:"destroy",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-tooltip"));t&&t.parentNode&&t.parentNode.removeChild(t)}}]),e}(),H=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.options=t,this.ctx=n}return u()(e,[{key:"draw",value:function(e,t){var n=this.options,r=n.series,i=n.chart,a=i.colors,o=i.height,s=n.xAxis,l=n.xkey,c=n.ykey,u=n.ykey2,d=n.timestamp,f=n.fillNull,m=n.notDisplayedSeries,g=n.curve,y=this.options.line.width,v=this.options.area,E=v.opacity,x=v.gradientMode,b=v.gradientOpacityStopColor,C=this.ctx,S=function(t){var n="X"===d?1e3*t[l]:t[l];return e(new Date(n))},w=function(e,n){var r=e[n];return"number"!=typeof r||isNaN(r)?"number"==typeof f?t(f):void 0:t(r)},T=function(e){return"number"==typeof e[c]||"number"==typeof f};Object(p.sortBy)(r,"zIndex").forEach((function(e,t){if(!1!==e.visible&&!(m.indexOf(e.name)>-1)){var n,r=e.color||_(a,t);if(e.color=r,"opacity"===x&&((n=C.createLinearGradient(0,0,0,o)).addColorStop(0,r),n.addColorStop(1,b)),E>0||e.opacity){C.beginPath();var i=h.area().x(S).y0((function(e){return u&&u in e?w(e,c):o-s.tickpadding-s.labels.fontSize-5})).y1((function(e){return w(e,u&&u in e?u:c)})).defined(T).context(C);g.enabled&&"smooth"===g.mode&&i.curve(h.curveMonotoneX),i(e.data||[]),C.fillStyle="opacity"===x&&n?n:r,C.globalAlpha=E||(e.opacity?e.opacity:.5),C.fill(),C.closePath()}if(y>0&&void 0===e.opacity){C.beginPath();var l=h.line().x(S).y((function(e){return w(e,c)})).defined(T).context(C);g.enabled&&"smooth"===g.mode&&l.curve(h.curveMonotoneX),C.lineTo(0,0),l(e.data||[]),C.lineJoin="round",C.lineWidth=y,C.strokeStyle=r,C.lineCap="round",C.globalAlpha=1,C.setLineDash(e.lineDash||[]),C.stroke(),C.closePath()}}}))}}]),e}(),j=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.options=t,this.ctx=n}return u()(e,[{key:"draw",value:function(e,t,n){var r=this.options,i=r.series,a=r.chart,o=a.colors,s=a.height,l=a.width,c=r.xAxis,u=r.timestamp,d=r.xkey,f=r.ykey,m=r.notDisplayedSeries,g=this.ctx,y=this.options.area.opacity;Object(p.sortBy)(i,"zIndex").forEach((function(r,i){if(!1!==r.visible&&!(m.indexOf(r.name)>-1)){var a=r.color||_(o,i);r.color=a,g.fillStyle=a,g.globalAlpha=y;var p=h.scaleBand().domain(r.data.map((function(e){return"X"===u?1e3*e[d]:e[d]}))).range([0,l]).padding(.3),v=(null==n?void 0:n.k)||1;r.data.forEach((function(n){var r="X"===u?1e3*n[d]:n[d];g.fillRect(e(r)-p.bandwidth()*v/2,t(n[f]),p.bandwidth()*v,s-t(n[f])-c.tickpadding-c.labels.fontSize-5)})),g.globalAlpha=1}}))}}]),e}(),G=function(){function e(t,n,r,i){l()(this,e),this.options=void 0,this.reset=void 0,this.options=t,this.init(r,i),this.reset=n}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart,r=n.id,i=n.containerHeight,a=document.getElementById("".concat(r,"-zoom"));a&&a.remove(),a=document.createElement("div");var o=document.createElement("div"),s=document.createElement("a"),l=document.createTextNode("Reset zoom");a.id="".concat(r,"-zoom"),a.className="ts-graph-zoom",o.id="".concat(r,"-zoom-marker"),o.className="ts-graph-zoom-marker",o.style.height="".concat(i,"px"),s.id="".concat(r,"-zoom-resetBtn"),s.className="ts-graph-zoom-resetBtn",s.appendChild(l),a.appendChild(o),a.appendChild(s),e.insertBefore(a,t),this.onReset()}},{key:"onReset",value:function(){var e=this,t=this.options.chart.id,n=document.getElementById("".concat(t,"-zoom-resetBtn"));null==n||n.addEventListener("click",(function(t){t.stopPropagation(),e.reset(),e.clearResetBtn()}))}},{key:"onZoom",value:function(e,t,n){var r=this.options.chart.width,i=t.layerX-e.layerX;if(i){var a=r/Math.abs(i),o=t.layerX>e.layerX?e.layerX:t.layerX,s=h.zoomIdentity.translate(-o*a,0).scale(a);this.drawResetBtn(),n(s)}}},{key:"clearMarker",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-zoom-marker"));t.style.display="none",t.style.width="0px",t.style.left="unset",t.style.right="unset"}},{key:"drawMarker",value:function(e,t){var n=this.options.chart.marginLeft,r=e.layerX,i=t.layerX,a=this.options.chart,o=a.id,s=a.containerWidth,l=document.getElementById("".concat(o,"-zoom-marker"));l.style.display="block",l.style.top="0px",r<i?(l.style.right="unset",l.style.left="".concat(r+n,"px"),l.style.width="".concat(i-r,"px")):(l.style.left="unset",l.style.right="".concat(s-r-n,"px"),l.style.width="".concat(r-i,"px"))}},{key:"clearResetBtn",value:function(){var e=this.options.chart.id;document.getElementById("".concat(e,"-zoom-resetBtn")).style.display="none"}},{key:"drawResetBtn",value:function(){var e=this.options.chart.id;document.getElementById("".concat(e,"-zoom-resetBtn")).style.display="block"}}]),e}(),V=function(){function e(t,n,r,i){var a=this;l()(this,e),this.options=void 0,this.onLegendItemClick=void 0,this.handelLegendItemClick=function(e){var t=e.currentTarget;if(t){t.classList.contains("ts-graph-legend-item-active")?t.classList.remove("ts-graph-legend-item-active"):t.classList.add("ts-graph-legend-item-active");var n=t.getAttribute("data-serie");n&&a.onLegendItemClick(n)}},this.options=t,this.init(r,i),this.onLegendItemClick=n}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart.id,r=document.createElement("div");r.id="".concat(n,"-legend"),r.className="ts-graph-legend",document.getElementById(r.id)||e.insertBefore(r,t)}},{key:"initEvent",value:function(){var e=this,t=this.options.chart.id;document.getElementById("".concat(t,"-legend")).querySelectorAll(".ts-graph-legend-item").forEach((function(t){t.removeEventListener("click",e.handelLegendItemClick),t.addEventListener("click",e.handelLegendItemClick)}))}},{key:"updateOptions",value:function(e){this.options=e}},{key:"draw",value:function(){var e=this.options,t=e.chart.id,n=e.series,r=e.legend,i=document.getElementById("".concat(t,"-legend"));if(r.enabled){if("[object Array]"===Object.prototype.toString.call(n)){i.innerHTML="";var a=document.createDocumentFragment();n.forEach((function(e){var t=document.createElement("span"),n=document.createElement("span"),r=document.createElement("span"),i=document.createElement("span"),o=document.createTextNode(e.name);t.className="ts-graph-legend-item",t.setAttribute("data-serie",e.name),n.className="ts-graph-legend-item-symbol",r.className="ts-graph-legend-item-symbol-line",r.style.borderColor=e.color,i.className="ts-graph-legend-item-symbol-point",i.style.backgroundColor=e.color,n.appendChild(r),n.appendChild(i),t.appendChild(n),t.appendChild(o),a.appendChild(t)})),i.appendChild(a)}this.initEvent()}}}]),e}(),Y=function(){function e(t,n){l()(this,e),this.options=void 0,this.options=t,this.init(n)}return u()(e,[{key:"init",value:function(e){var t=this.options.chart.id,n=document.getElementById("".concat(t,"-shapes"));n&&n.remove(),(n=document.createElement("div")).id="".concat(t,"-shapes"),n.className="ts-graph-shapes",e.appendChild(n),n.addEventListener("mouseover",this.onMouseMove.bind(this)),n.addEventListener("click",this.onClick.bind(this))}},{key:"onMouseMove",value:function(e){var t=this.options,n=t.shapes,r=t.onShapeMouseOver;if("IMG"===e.target.tagName){var i=Object(p.find)(n,{id:e.target.dataset.id});i&&"function"==typeof r&&r(e,i)}}},{key:"onClick",value:function(e){var t=this.options,n=t.shapes,r=t.onShapeClick;if("IMG"===e.target.tagName){var i=Object(p.find)(n,{id:e.target.dataset.id});i&&"function"==typeof r&&r(e,i)}}},{key:"draw",value:function(e,t){var n=this.options,r=n.chart.id,i=n.shapes,a=document.getElementById("".concat(r,"-shapes"));a&&"[object Array]"===Object.prototype.toString.call(i)&&(a.innerHTML="",i.forEach((function(n){var r=document.createElement("img");r.src=n.imgData,r.dataset.id=n.id,r.style.position="absolute",r.onload=function(){r.style.left="".concat(e(n.x)+r.width/2,"px"),r.style.top="".concat(t(n.y)-r.height/2,"px")},a.appendChild(r)})))}},{key:"destroy",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-shapes"));t&&(t.removeEventListener("mouseover",this.onMouseMove),t.removeEventListener("click",this.onClick),t.parentNode&&(t.innerHTML=""))}}]),e}();function U(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(12);var K=new k.a,Q=function(){function e(t){var n=this;l()(this,e),this.options=void 0,this.container=void 0,this.frontContext=void 0,this.backContext=void 0,this.eventCanvas=void 0,this.frontCanvas=void 0,this.backCanvas=void 0,this.xAxis=void 0,this.xScales=void 0,this.yAxis=void 0,this.yScales=void 0,this.line=void 0,this.bar=void 0,this.legend=void 0,this.tooltip=void 0,this.zoom=void 0,this.transform=void 0,this.shapes=void 0,this.showTooltip=function(e){n.tooltip.draw(e,n)},this.hideTooltip=function(){n.tooltip.clear()},this.getZoomedSeries=function(){var e=n.options,t=e.chart.renderTo,r=e.series,i=e.timestamp,a=e.xkey,o=t.offsetWidth;return r.map((function(e){if("[object Array]"===Object.prototype.toString.call(e.data)){var t=e.data.filter((function(e){var t="X"===i?1e3*e[a]:e[a],r=n.xScales(new Date(t));return r>=0&&r<=o}));return X(X({},e),{},{data:t})}return e}))},this.handleResize=function(){var e=n.options.chart,t=e.renderTo.offsetWidth,r=e.renderTo.offsetHeight;n.options.chart.width=t-e.marginLeft-e.marginRight,n.options.chart.height=r-e.marginTop-e.marginBottom,n.options.chart.containerWidth=t,n.options.chart.containerHeight=r,n.container.style.width="".concat(t,"px"),n.container.style.height="".concat(r,"px"),n.retinaScaled(n.backCanvas,"back"),n.retinaScaled(n.frontCanvas,"front"),n.retinaScaled(n.eventCanvas,"event"),n.initScales(),n.initZoom(),n.draw(!1)},this.handleZoom=function(e,t){if(n.options.onZoomWithoutDefult){var r;t&&(r=Object(p.sortBy)(t,"layerX").map((function(e){return n.xScales.invert(e.layerX)}))),n.options.onZoomWithoutDefult(r)}else{var i=n.options,a=i.ykey,o=i.yAxis,s=i.ykeyFormatter,l=n.options.series;if(e?(n.transform=e,n.xScales=e.rescaleX(n.xScales),l=n.getZoomedSeries()):(n.transform=void 0,n.xScales=n.xAxis.init()),Array.isArray(l)){var c,u=o.min||-1/0,h=o.max||1/0,d=U(l);try{for(d.s();!(c=d.n()).done;){var f=c.value,m=Array.isArray(f.data)?f.data:[],g=void 0;for(g=0;g<m.length;g++){var y=M(m[g][a],s);null!==y&&(u<y&&(u=y),h>y&&(h=y))}}}catch(v){d.e(v)}finally{d.f()}n.yAxis.setDomain(n.yScales,{ymin:u,ymax:h})}n.options.onZoom(n.getZoomedSeries)}n.draw(!1)},this.handleLegendItemClick=function(e){var t=n.options.notDisplayedSeries;-1===t.indexOf(e)?t.push(e):n.options.notDisplayedSeries=t.filter((function(t){return t!==e})),n.draw(!1)};var r={ratio:window.devicePixelRatio||1,xkey:0,ykey:1,ykey2:2,oykey:"__originValue",timestamp:"x",chart:{id:Object(p.uniqueId)("ts-graph-"),colors:["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"],width:t.chart.renderTo.offsetWidth,height:t.chart.renderTo.offsetHeight||350,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10},xAxis:{visible:!0,lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",labels:{color:"#999",fontSize:11}},yAxis:{scale:{type:"linear",log:10},visible:!0,lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",gridLineColor:"#efefef",labels:{color:"#999",fontSize:11}},type:"line",line:{enable:!0,width:2},area:{opacity:0,gradientMode:"none",gradientOpacityStopColor:"rgba(255, 255, 255, 0)"},bars:{},stack:{enabled:!1},curve:{enabled:!1},tooltip:{shared:!0,cascade:!1,cascadeScope:void 0,timeFormat:"%Y-%m-%d %H:%M:%S"},series:[],legend:{align:"center",verticalAlign:"top",enabled:!1},fillNull:void 0,onClick:void 0,onRightClick:function(){},onZoom:function(){},onShapeMouseOver:function(){},onShapeClick:function(){}},i=Object(p.merge)({},r,t);void 0===t.chart.marginTop&&i.legend.enabled&&(i.chart.marginTop=20),this.handleResize=Object(p.debounce)(this.handleResize,300),this.init(i)}return u()(e,[{key:"init",value:function(e){var t=e.chart;this.options=e,this.options.notDisplayedSeries=[],this.options.chart.containerWidth=t.width,this.options.chart.containerHeight=t.height,this.options.chart.width=t.width-t.marginLeft-t.marginRight,this.options.chart.height=t.height-t.marginTop-t.marginBottom,this.createContainer(),this.createCanvas(),this.initSeries(),this.initScales(),this.initEvent(),"line"===this.options.type&&this.initLine(),"bar"===this.options.type&&this.initBar(),this.initLegend(),this.initTooltip(),this.initZoom(),this.initShapes(),this.draw()}},{key:"clearRect",value:function(e){var t=this.options.chart,n=t.containerWidth,r=t.containerHeight;e.clearRect(0,0,n,r)}},{key:"draw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.transform;this.clearRect(this.backContext),this.options.xAxis.visible&&this.yAxis.drawGridLine(this.yScales),this.options.xAxis.visible&&this.xAxis.draw(this.xScales),"line"===this.options.type&&this.line.draw(this.xScales,this.yScales),"bar"===this.options.type&&this.bar.draw(this.xScales,this.yScales,t),this.xAxis.drawPlotLines(this.xScales),this.yAxis.drawPlotLines(this.yScales),this.options.yAxis.visible&&this.yAxis.draw(this.yScales),e&&this.legend.draw(),this.shapes.draw(this.xScales,this.yScales)}},{key:"update",value:function(e){var t=Object(p.assign)({},this.options,e);e.series&&(t.series=e.series),this.options=t,this.offEvents(),this.initSeries(),this.initScales(),this.initEvent(),"line"===this.options.type&&this.initLine(),"bar"===this.options.type&&this.initBar(),this.initTooltip(),this.initShapes(),this.legend.updateOptions(t),this.draw()}},{key:"getSeries",value:function(){return i()(this.options.series)}},{key:"initEvent",value:function(){var e,t=this.options.tooltip,n=t.cascade,r=t.cascadeScope,i=r?"plotmove:".concat(r):"plotmove",a=r?"plotleave:".concat(r):"plotleave",o=!1,s={},l={},c=!1,u=this,d=Object(p.debounce)((function(e){c&&(u.tooltip.draw(e,u),o&&u.zoom.drawMarker(s,e))}),5),f=Object(p.throttle)((function(){u.tooltip.clear()}),5),m=function(){if("function"==typeof u.options.onClick){var e=u.options,t=e.xkey,n=e.ykey,r=e.ykey2,i=e.oykey,a=e.timestamp,o=e.series,s=e.fillNull,l=h.event.offsetX||h.event.layerX,c=h.event.offsetY||h.event.layerY,p=u.xScales.invert(l),d=u.yScales.invert(c),f=D({x:p,xkey:t,ykey:n,ykey2:r,oykey:i,timestamp:a,series:o,fillNull:s});u.options.onClick(h.event,p,d,f)}};h.select(this.eventCanvas).on("mousemove",(function(){c=!0,d(h.event),n&&K.emit(i,h.event)})).on("mouseleave",(function(){e=h.event,c=!1,f(),n&&K.emit(a)})).on("mousedown",(function(){1===h.event.which&&(o=!0,s=h.event)})).on("mouseup",(function(){h.event.stopPropagation();var e=h.event;s&&s.layerX!==e.layerX?(u.zoom.clearMarker(),u.zoom.onZoom(s,e,(function(t){u.handleZoom(t,[s,e])}))):m(),o=!1,s={}})).on("contextmenu",(function(){u.options.onRightClick(h.event,u.xScales.invert(h.event.offsetX),u.yScales.invert(h.event.offsetY)),h.event.preventDefault()})).on("touchstart",(function(){h.event.touches.length>1&&(o=!0)})).on("touchmove",(function(){var e=A(u.eventCanvas,h.event);1===h.event.touches.length&&u.tooltip.draw(e,u),o&&(s=e,l=A(u.eventCanvas,h.event,1),u.zoom.drawMarker(s,l))})).on("touchend",(function(){c=!1,f(),s&&s.layerX!==l.layerX?(u.zoom.clearMarker(),u.zoom.onZoom(s,l,(function(e){u.handleZoom(e,[s,l])}))):m(),o=!1,s={},l={}})),n&&(K.on(i,this.showTooltip),K.on(a,this.hideTooltip)),window.addEventListener("mouseup",(function(){if(!Object(p.isEmpty)(s)){var t=e;o=!1,u.zoom.clearMarker(),u.zoom.onZoom(s,t,(function(e){u.handleZoom(e,[s,t])})),s={}}})),x(this.options.chart.renderTo,this.handleResize)}},{key:"retinaScaled",value:function(e,t){var n=this.options,r=n.chart,i=n.ratio,a=e.getContext("2d"),o="front"===t?r.containerWidth:r.width,s="front"===t?r.containerHeight:r.height,l="front"===t?"0px":"".concat(r.marginLeft,"px"),c="front"===t?"0px":"".concat(r.marginTop,"px");e.width=o*i,e.height=s*i,e.style.width="".concat(o,"px"),e.style.height="".concat(s,"px"),e.style.position="absolute",e.style.left=l,e.style.top=c,"front"===t&&a.translate(r.marginLeft*i,r.marginTop*i),a.scale(i,i)}},{key:"createContainer",value:function(){var e=this.options.chart,t=document.createElement("div");t.style.position="relative",t.style.width="".concat(e.containerWidth,"px"),t.style.height="".concat(e.containerHeight,"px"),t.style.overflow="hidden",t.className="d3-graph-container",e.renderTo.appendChild(t),this.container=t}},{key:"createCanvas",value:function(){var e=this.options.chart.id;function t(t){var n=document.createElement("canvas"),r=n.getContext("2d");n.setAttribute("id","".concat(e,"-").concat(t,"Canvas")),this.container.appendChild(n),this["".concat(t,"Canvas")]=n,this["".concat(t,"Context")]=r,this.retinaScaled(n,t)}t.call(this,"back"),t.call(this,"front"),t.call(this,"event")}},{key:"initSeries",value:function(){var e=this.options,t=e.fillNull,n=e.series,r=e.xkey,i=e.ykey,a=e.ykey2,s=e.ykeyFormatter,l=e.oykey,c=e.xAxis,u=e.yAxis,h=e.stack,d=e.notDisplayedSeries,f=c.min||-1/0,m=c.max||1/0,g=u.min,y=u.max;if(Array.isArray(n)){var v=[];n.forEach((function(e,c){if(!(d.indexOf(e.name)>-1)){var u,E=Array.isArray(e.data)?e.data:[],x=[],b=!1,C=function(){var e,d=E[u][l]?E[u][l]:M(E[u][i],s),v=(e={},o()(e,r,E[u][r]),o()(e,i,d),o()(e,l,d),e);if(a&&a in E[u]&&(v[a]=M(E[u][a],s)),h.enabled){void 0===v[l]&&(v[l]=M(v[i],s));var C=c;if(C>0)for(;C>0;){var S=Array.isArray(n[C-1].data)?n[C-1].data:[],w=Object(p.find)(S,(function(e){return e[r]===v[r]}));if(w){var T=isNaN(v[l])?0:v[l],k=M(w[i],s);k=isNaN(k)?0:k,v[i]=k+T;break}1===C&&(v[i]=v[l]),C--}else v[i]=v[l]}E[u]=v;var _=v[r],O=v[i],A=void 0;a&&a in E[u]&&(A=v[a]),void 0===t?!isNaN(O)&&(0===u||u===E.length-1||u>0&&u<E.length-1&&"number"==typeof O)?(x.push(v),b=!0):b&&(x.push(v),b=!1):x.push(v),(_<f||f===-1/0)&&(f=_),(_>m||m===1/0)&&(m=_),"number"!=typeof O||isNaN(O)?"number"==typeof t&&(t<g&&(g=t),t>y&&(y=t)):(("number"!=typeof g||O<g)&&(g=O),"number"==typeof A&&A<g&&(g=A),("number"!=typeof y||O>y)&&(y=O),"number"==typeof A&&A>y&&(y=A))};for(u=0;u<E.length;u++)C();v.push(X(X({},e),{},{data:x,zIndex:h.enabled?n.length-c:c}))}})),this.options.series=v,this.options.xmin=f,this.options.xmax=m,this.options.ymin=g,this.options.ymax=y}}},{key:"initLine",value:function(){this.line=new H(this.options,this.backContext)}},{key:"initBar",value:function(){this.bar=new j(this.options,this.backContext)}},{key:"initTooltip",value:function(){this.tooltip=new z(this.options,this.frontContext,this.container,this.eventCanvas)}},{key:"initZoom",value:function(){this.zoom=new G(this.options,this.handleZoom,this.container,this.eventCanvas)}},{key:"initLegend",value:function(){this.legend=new V(this.options,this.handleLegendItemClick,this.container,this.eventCanvas)}},{key:"initScales",value:function(){var e=new P(this.options,this.backContext);this.yAxis=e,this.yScales=e.init();var t=new N(this.options,this.backContext,this.yAxis);this.xAxis=t;var n=t.init();this.transform&&(n=this.transform.rescaleX(n)),this.xScales=n}},{key:"initShapes",value:function(){var e=new Y(this.options,this.container);this.shapes=e}},{key:"offEvents",value:function(){var e=this.options.tooltip,t=e.cascade,n=e.cascadeScope,r=n?"plotmove:".concat(n):"plotmove",i=n?"plotleave:".concat(n):"plotleave";h.select(this.eventCanvas).on("mousemove",null).on("mouseleave",null).on("mousedown",null).on("mouseup",null).on("touchmove",null),function(e,t){let n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",C),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--v&&E&&E.parentNode.removeChild(E)}}(this.options.chart.renderTo,this.handleResize),t&&(K.off(r,this.showTooltip),K.off(i,this.hideTooltip))}},{key:"destroy",value:function(){this.shapes.destroy(),this.tooltip.destroy(),this.offEvents(),h.select(this.container).remove()}}]),e}()}])));const fu=["#634CD9","#3FC453","#FF6A00","#FF656B"],mu=["#9B5CE6","#2E85FF","#55BCAC","#FAB34F","#49DBFF","#E65CCB"],gu={bitsSI:{type:"si",base:"bits"},bytesSI:{type:"si",base:"bytes"},bitsIEC:{type:"iec",base:"bits"},bytesIEC:{type:"iec",base:"bytes"}},yu={type:"iec",base:"bytes",decimals:2},vu=[{exp:0,si:"",iec:"",iecExp:1},{exp:3,si:"k",iec:"Ki",iecExp:10},{exp:6,si:"M",iec:"Mi",iecExp:20},{exp:9,si:"G",iec:"Gi",iecExp:30},{exp:12,si:"T",iec:"Ti",iecExp:40},{exp:15,si:"P",iec:"Pi",iecExp:50},{exp:18,si:"E",iec:"Ei",iecExp:60},{exp:21,si:"Z",iec:"Zi",iecExp:70},{exp:24,si:"Y",iec:"Yi",iecExp:80}],Eu={bits:"b",bytes:"B"};function xu(e,t=yu){if(null==e)return{value:"",unit:"",text:""};const n=t.base?Eu[t.base]:"";if("si"===t.type&&Math.abs(e)<1e3||"iec"===t.type&&Math.abs(e)<1024)return{value:_.round(e,t.decimals),unit:n,text:_.round(e,t.decimals)+n};const r="iec"===t.type?2:10,i=e.toExponential().match(/(\d.*\+)(\d{1,2})/);if(i){const a=3*Math.floor(parseInt(_.get(i,"[2]"))/3),o=_.find(vu,{exp:a});if(!o)return{value:NaN,unit:"",text:NaN};const s=_.get(o,t.type),l=_.get(o,"iec"===t.type?"iecExp":"exp"),c=Math.pow(r,l),u=_.round(e/c,t.decimals);return{value:u,unit:s+n,text:u+s+n}}return{value:_.round(e,t.decimals),unit:"",text:_.round(e,t.decimals)}}function bu(e,t,n){if("number"!=typeof e)return{value:e,unit:"",text:e};let r=e,i={seconds:"s",milliseconds:"ms"}[t];if(_.forEach([{unit:"year",value:31104e3},{unit:"month",value:2592e3},{unit:"week",value:604800},{unit:"day",value:86400},{unit:"hour",value:3600},{unit:"min",value:60}],(n=>{const a=e/n.value/("milliseconds"===t?1e3:1);if(a>=1)return r=a,i=n.unit,!1})),"milliseconds"===t&&"ms"===i){const e=r/1e3;e>=1&&(r=e,i="s")}return{value:_.round(r,n),unit:i,text:_.round(r,n)+i}}const Cu=({unit:e,decimals:t=3,dateFormat:n="YYYY-MM-DD HH:mm:ss"},r)=>{if(null===r||""===r||void 0===r)return{value:"",unit:"",text:""};if("number"!=typeof r&&(r=_.toNumber(r)),e){const i=gu[e];if(i){const{type:e,base:n}=i;return xu(r,{type:e,base:n,decimals:t})}return"none"===e?{value:_.round(r,t),unit:"",text:_.round(r,t)}:"percent"===e?{value:_.round(r,t),unit:"%",text:_.round(r,t)+"%"}:"percentUnit"===e?{value:_.round(100*r,t),unit:"%",text:_.round(100*r,t)+"%"}:"humantimeSeconds"===e?{value:I.duration(r,"seconds").humanize(),unit:"",text:I.duration(r,"seconds").humanize()}:"humantimeMilliseconds"===e?{value:I.duration(r,"milliseconds").humanize(),unit:"",text:I.duration(r,"milliseconds").humanize()}:"seconds"===e||"milliseconds"===e?bu(r,e,t):"datetimeSeconds"===e?{value:I.unix(r).format(n),unit:"",text:I.unix(r).format(n)}:"datetimeMilliseconds"===e?{value:I(r).format(n),unit:"",text:I(r).format(n)}:{value:_.round(r,t),unit:"",text:_.round(r,t)}}return xu(r,{type:"si",decimals:t})},Su=e=>_.toNumber(_.get(e,1,NaN)),wu=(e,t,n,r)=>{var i,a,o;const{unit:s,decimals:l,dateFormat:c}=t||{},u=_.find(n,(t=>{const{type:n,match:r}=t;if(null===e||""===e||void 0===e){if("specialValue"===n){if("empty"===(null==r?void 0:r.specialValue))return""===e;if("null"===(null==r?void 0:r.specialValue))return null==e}return!1}return e=_.toNumber(e),"special"===n?e===(null==r?void 0:r.special):"range"===n&&((null==r?void 0:r.from)&&(null==r?void 0:r.to)?e>=(null==r?void 0:r.from)&&e<=(null==r?void 0:r.to):(null==r?void 0:r.from)?e>=(null==r?void 0:r.from):!!(null==r?void 0:r.to)&&e<=(null==r?void 0:r.to))}));let h;if(null==r?void 0:r.steps){const e=_.get(_.find(null==r?void 0:r.steps,{type:"base"}),"color");h=e}_.forEach(_.sortBy(null==r?void 0:r.steps,(e=>Number(e.value))),(t=>{t.value&&e&&(e=_.toNumber(e))>=t.value&&(h=t.color)}));const p=Cu({unit:s,decimals:l,dateFormat:c},e),d=(null==(i=null==u?void 0:u.result)?void 0:i.text)?null==(a=null==u?void 0:u.result)?void 0:a.text:p.value;return{value:d,unit:p.unit,color:(null==(o=null==u?void 0:u.result)?void 0:o.color)||h,text:d+p.unit}},Tu=(e,t,{unit:n,decimals:r,dateFormat:i},a,o)=>_.map(e,(e=>{const c={lastNotNull:()=>_.get(_.last(_.filter(e.data,(e=>null!==e[1]))),1),last:()=>_.get(_.last(e.data),1),firstNotNull:()=>_.get(_.first(_.filter(e.data,(e=>null!==e[1]))),1),first:()=>_.get(_.first(e.data),1),min:()=>Su(_.minBy(e.data,(e=>_.toNumber(e[1])))),max:()=>Su(_.maxBy(e.data,(e=>_.toNumber(e[1])))),avg:()=>_.meanBy(e.data,(e=>_.toNumber(e[1]))),sum:()=>_.sumBy(e.data,(e=>_.toNumber(e[1]))),count:()=>_.size(e.data)},u=c[t]?c[t]():NaN;return s({id:e.id,name:e.name,metric:e.metric,fields:l(s({},e.metric),{refId:e.refId}),stat:_.toNumber(u)},wu(u,{unit:n,decimals:r,dateFormat:i},a,o))})),ku=(e,{unit:t,decimals:n,dateFormat:r},i)=>_.map(e,((e,a)=>{const o={max:Su(_.maxBy(e.data,(e=>_.toNumber(e[1])))),min:Su(_.minBy(e.data,(e=>_.toNumber(e[1])))),avg:_.meanBy(e.data,(e=>_.toNumber(e[1]))),sum:_.sumBy(e.data,(e=>_.toNumber(e[1]))),last:Su(_.last(e.data))};return{id:e.id,name:e.name,metric:e.metric,offset:e.offset,color:i[a%i.length],disabled:!1===e.visible||void 0,max:Cu({unit:t,decimals:n,dateFormat:r},o.max),min:Cu({unit:t,decimals:n,dateFormat:r},o.min),avg:Cu({unit:t,decimals:n,dateFormat:r},o.avg),sum:Cu({unit:t,decimals:n,dateFormat:r},o.sum),last:Cu({unit:t,decimals:n,dateFormat:r},o.last)}}));function _u(e){var t,n;const{time:r,values:i,series:a,inDashboard:o=!0,chartHeight:c="200px",tableHeight:u="200px",themeMode:h="",onClick:p}=e,{custom:m,options:y={},targets:v}=i,{lineWidth:E=1,gradientMode:x="none",scaleDistribution:b}=m,[C,S]=f.exports.useState(a),[w,T]=f.exports.useState(""),k=f.exports.useRef(null),O=f.exports.useRef(null),A=f.exports.useRef(null),M=le(A),N=(null==(t=y.legend)?void 0:t.displayMode)||"table",P=(null==(n=y.legend)?void 0:n.placement)||"bottom",F="hidden"!==N,[L,R]=f.exports.useState([]),[D,B]=f.exports.useState(!1);let $=F?`calc(100% - ${(null==M?void 0:M.height)+16}px)`:"100%",z=F?"30%":"0px";return o||($=c,z=u),"right"===P&&($="100%",z="100%"),f.exports.useEffect((()=>{var e,t,n;return k.current&&(O.current&&O.current.destroy(),O.current=new du({timestamp:"X",xkey:0,ykey:1,ykey2:2,ykeyFormatter:e=>Number(e),chart:{renderTo:k.current,height:k.current.clientHeight,colors:mu,marginTop:0},series:[],onClick:(e,t,n,r)=>{p&&p(e,t,n,r)}})),R(F?ku(C,{unit:null==(e=null==y?void 0:y.standardOptions)?void 0:e.util,decimals:null==(t=null==y?void 0:y.standardOptions)?void 0:t.decimals,dateFormat:null==(n=null==y?void 0:y.standardOptions)?void 0:n.dateFormat},mu):[]),()=>{O.current&&"function"==typeof O.current.destroy&&O.current.destroy()}}),[F]),f.exports.useEffect((()=>{S(a)}),[JSON.stringify(a)]),f.exports.useEffect((()=>{var e,t,n,i,a,o,c,u,p,d;let f={};if(r){const e=ms(r),t=function(e){let t,n;return _.forEach(e,(e=>{if(e.time){const{start:r,end:i}=ms(e.time);(!t||(null==r?void 0:r.unix())<t)&&(t=null==r?void 0:r.unix()),(!n||(null==i?void 0:i.unix())>n)&&(n=null==i?void 0:i.unix())}})),{start:t,end:n}}(v);f={min:t.start||I(e.start).unix(),max:t.end||I(e.end).unix()}}O.current&&O.current.update({type:"lines"===m.drawStyle?"line":"bar",series:C,line:{width:E},area:l(s({},O.current.options.area),{opacity:m.fillOpacity,gradientMode:x,gradientOpacityStopColor:"dark"===h?"rgba(0,0,0,0)":"rgba(255,255,255,0)"}),stack:{enabled:"noraml"===m.stack},curve:{enabled:!0,mode:m.lineInterpolation},tooltip:l(s({},O.current.options.tooltip),{shared:"all"===(null==(e=y.tooltip)?void 0:e.mode),sharedSortDirection:"none"!==(null==(t=y.tooltip)?void 0:t.sort)?null==(n=y.tooltip)?void 0:n.sort:void 0,pointValueformatter:e=>{var t,n,r;return Cu({unit:null==(t=null==y?void 0:y.standardOptions)?void 0:t.util,decimals:null==(n=null==y?void 0:y.standardOptions)?void 0:n.decimals,dateFormat:null==(r=null==y?void 0:y.standardOptions)?void 0:r.dateFormat},e).text}}),xAxis:l(s(s({},O.current.options.xAxis),f),{plotLines:null==(i=null==y?void 0:y.xThresholds)?void 0:i.steps,lineColor:"dark"===h?"rgba(255,255,255,0.2)":"#ccc",tickColor:"dark"===h?"rgba(255,255,255,0.2)":"#ccc"}),yAxis:l(s({},O.current.options.yAxis),{min:null==(a=null==y?void 0:y.standardOptions)?void 0:a.min,max:null==(o=null==y?void 0:y.standardOptions)?void 0:o.max,scale:b,plotLines:_.map(_.filter(null==(c=null==y?void 0:y.thresholds)?void 0:c.steps,(e=>null!==e.value)),(e=>l(s({},e),{shadowColor:"dark"===h?"rgba(255,255,255,0.2)":"#fff"}))),backgroundColor:"dark"===h?"#2A2D3C":"#fff",gridLineColor:"dark"===h?"rgba(255,255,255,0.05)":"#efefef",tickValueFormatter:e=>{var t,n,r;return Cu({unit:null==(t=null==y?void 0:y.standardOptions)?void 0:t.util,decimals:null==(n=null==y?void 0:y.standardOptions)?void 0:n.decimals,dateFormat:null==(r=null==y?void 0:y.standardOptions)?void 0:r.dateFormat},e).text}})}),R(F?ku(C,{unit:null==(u=null==y?void 0:y.standardOptions)?void 0:u.util,decimals:null==(p=null==y?void 0:y.standardOptions)?void 0:p.decimals,dateFormat:null==(d=null==y?void 0:y.standardOptions)?void 0:d.dateFormat},mu):[])}),[JSON.stringify(C),JSON.stringify(m),JSON.stringify(y),h]),f.exports.useEffect((()=>{O.current&&O.current.handleResize()}),[P]),d.createElement("div",{className:"renderer-timeseries-container",style:{display:"right"===P?"flex":"block"}},d.createElement("div",{ref:k,style:{height:$,minHeight:"70%",width:"right"===P?D?0:"60%":"100%"}}),F&&d.createElement("div",{className:"renderer-timeseries-legend-table",style:{maxHeight:z,height:(null==M?void 0:M.height)+16,width:"right"===P?D?"100%":"40%":"100%",overflow:"hidden",overflowY:"auto"}},"table"===N&&d.createElement("div",{ref:A},d.createElement(Ft,{rowKey:"id",size:"small",className:"scroll-container-table",scroll:{x:650},columns:[{title:`Series (${a.length})`,dataIndex:"name",ellipsis:{showTitle:!1},render:(e,t)=>d.createElement(yt,{placement:"topLeft",title:d.createElement("div",null,d.createElement("div",null,_.get(t,"metric.__name__")),d.createElement("div",null,t.offset&&"current"!==t.offset?`offfset ${t.offset}`:""),_.map(_.omit(t.metric,"__name__"),((e,t)=>d.createElement("div",{key:t},t,"=",e)))),getTooltipContainer:()=>document.body},d.createElement("span",{className:"renderer-timeseries-legend-color-symbol",style:{backgroundColor:t.color}}),t.offset&&"current"!==t.offset?d.createElement("span",{style:{paddingRight:5}},"offfset ",t.offset):"",d.createElement("span",null,e))},{title:"Max",dataIndex:"max",width:100,sorter:(e,t)=>e.max.value-t.max.value,render:e=>e.text},{title:"Min",dataIndex:"min",width:100,sorter:(e,t)=>e.min.value-t.min.value,render:e=>e.text},{title:"Avg",dataIndex:"avg",width:100,sorter:(e,t)=>e.avg.value-t.avg.value,render:e=>e.text},{title:"Sum",dataIndex:"sum",width:100,sorter:(e,t)=>e.sum.value-t.sum.value,render:e=>e.text},{title:"Last",dataIndex:"last",width:100,sorter:(e,t)=>e.last.value-t.last.value,render:e=>e.text}],dataSource:L,locale:{emptyText:"暂无数据"},pagination:!1,rowClassName:e=>e.disabled?"disabled":"",onRow:e=>({onClick:()=>{T(w!==e.id?e.id:""),S(_.map(C,(t=>l(s({},t),{visible:w===e.id||e.id===t.id}))))}})})),"list"===N&&!_.isEmpty(L)&&d.createElement("div",{className:"renderer-timeseries-legend-container",ref:A},d.createElement("div",{className:g({"renderer-timeseries-legend-list":!0,"renderer-timeseries-legend-list-placement-right":"right"===P,"scroll-container":!0})},_.map(L,(e=>d.createElement("div",{key:e.id,onClick:()=>{T(w!==e.id?e.id:""),S(_.map(C,(t=>l(s({},t),{visible:w===e.id||e.id===t.id}))))},className:e.disabled?"disabled":""},d.createElement("span",{className:"renderer-timeseries-legend-color-symbol",style:{backgroundColor:e.color}}),e.name)))),"right"===P&&d.createElement("div",{className:"renderer-timeseries-legend-toggle",onClick:()=>{B(!D)}},D?d.createElement(oe,null):d.createElement(se,null)))))}const Ou="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split(""),Au=e=>{if(!e)return{value:e,unit:"min"};let t=e/60;return t<60?{value:t,unit:"min"}:(t/=60,t<24?{value:t,unit:"hour"}:(t/=24,{value:t,unit:"day"}))},Iu=(e,t)=>e?"second"===t?e:"min"===t?60*e:"hour"===t?60*e*60:"day"===t?60*e*60*24:e:e,Mu=(e={})=>{const t=_.cloneDeep(e),n=t.cate||"prometheus";if("elasticsearch"===n){const e=t.prom_ql;let n={};try{n=JSON.parse(e)}catch(uu){console.error(uu)}void 0!==(null==n?void 0:n.interval)?(n.interval=Au(n.interval).value,n.interval_unit=Au(n.interval).unit,n.rules=_.map(n.rules,(e=>l(s({},e),{rule:_.map(e.rule,(e=>l(s({},e),{compare_time:Au(e.compare_time).value,compare_time_unit:Au(e.compare_time).unit})))}))),t.query=n):(null==n?void 0:n.queries)&&(null==n?void 0:n.triggers)&&(t.queries=_.map(n.queries,(e=>l(s({},e),{interval:Au(e.interval).value,interval_unit:Au(e.interval).unit}))),t.triggers=n.triggers)}else if("aliyun-sls"===n){const e=t.prom_ql;let n={};try{n=JSON.parse(e)}catch(uu){console.error(uu)}t.queries=_.map(n.queries,(e=>{var t,n;return(null==(t=null==e?void 0:e.keys)?void 0:t.valueKey)?e.keys.valueKey=_.split(e.keys.valueKey," "):e.keys.valueKey=[],(null==(n=null==e?void 0:e.keys)?void 0:n.labelKey)?e.keys.labelKey=_.split(e.keys.labelKey," "):e.keys.labelKey=[],l(s({},_.omit(e,["from","to"])),{range:ws({start:e.from,end:e.to})})})),t.triggers=n.triggers}return t.cate=n,t},Nu=e=>{const t=_.cloneDeep(e),n=t.cate||"prometheus";if("elasticsearch"===n){const e=t.query;if(void 0!==(null==e?void 0:e.interval))e.interval=Iu(e.interval,e.interval_unit),delete e.interval_unit,e.rules=_.map(e.rules,(e=>l(s({},e),{rule:_.map(e.rule,(e=>{const t=Iu(e.compare_time,e.compare_time_unit);return delete e.compare_time_unit,l(s({},e),{compare_time:t})}))}))),t.prom_ql=JSON.stringify(e),delete t.query;else if((null==t?void 0:t.queries)&&(null==t?void 0:t.triggers)){const e={};e.queries=_.map(t.queries,(e=>l(s({},_.omit(e,"interval_unit")),{interval:Iu(e.interval,e.interval_unit)}))),e.triggers=_.map(t.triggers,(e=>0===e.mode?l(s({},e),{exp:Pu(e.expressions)}):e)),t.prom_ql=JSON.stringify(e),delete t.queries,delete t.triggers}}else if("aliyun-sls"===n){const{queries:e,triggers:n}=t,r={};r.queries=_.map(e,((e,t)=>{var n,r;const i=(a=e.range,{start:Ts(a.start),end:Ts(a.end)});var a;return(null==(n=null==e?void 0:e.keys)?void 0:n.valueKey)&&(e.keys.valueKey=_.join(e.keys.valueKey," ")),(null==(r=null==e?void 0:e.keys)?void 0:r.labelKey)&&(e.keys.labelKey=_.join(e.keys.labelKey," ")),l(s({},_.omit(e,"range")),{ref:Ou[t],from:null==i?void 0:i.start,to:null==i?void 0:i.end})})),r.triggers=_.map(n,(e=>0===e.mode?l(s({},e),{exp:Pu(e.expressions)}):e)),t.prom_ql=JSON.stringify(r),delete t.queries,delete t.triggers}return t},Pu=e=>{const t=_.get(e,"[0].logicalOperator");let n="";return _.forEach(e,((e,r)=>{0!==r&&(n+=` ${t} `),n+=`$${e.ref}${e.label?`.${e.label}`:""} ${e.comparisonOperator} ${e.value}`})),n},Fu=e=>{let t=e.__name__||"";return _.forEach(_.omit(e,"__name__"),((e,n)=>{t+=` ${n}: ${e}`})),_.trim(t)};function Lu({form:e}){const t=f.exports.useRef(null),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState({start:"now-1h",end:"now"}),[o,s]=f.exports.useState([]),l=()=>{const t=e.getFieldValue("queries"),n=ms(i),r=I(n.start).unix(),a=I(n.end).unix();ka({cate:e.getFieldValue("cate"),cluster:_.join(e.getFieldValue("cluster")," "),query:_.map(t,(e=>({index:e.index,filter:e.filter,value:e.value,group_by:e.group_by,date_field:e.date_field,interval:Iu(e.interval,e.interval_unit),start:r,end:a})))}).then((e=>{s(_.map(e.dat,(e=>({id:_.uniqueId("series_"),name:Fu(e.metric),metric:e.metric,data:e.values}))))}))};return f.exports.useEffect((()=>{n&&l()}),[JSON.stringify(i)]),d.createElement("div",{style:{marginBottom:16},ref:t},d.createElement(Dt,{placement:"bottomLeft",visible:n,onVisibleChange:e=>{r(e)},title:d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement("div",{style:{lineHeight:"32px"}},"数据预览"),d.createElement("div",null,d.createElement(Ns,{value:i,onChange:a}))),content:d.createElement("div",{style:{width:700}},d.createElement(_u,{inDashboard:!1,values:{custom:{drawStyle:"lines",fillOpacity:0,stack:"hidden",lineInterpolation:"smooth"},options:{legend:{displayMode:"table"},tooltip:{mode:"all"}}},series:o})),trigger:"click",getPopupContainer:()=>t.current||document.body},d.createElement(Ct,{type:"primary",onClick:()=>{n||(l(),r(!0))}},"数据预览")))}function Ru({prefixField:e={},prefixName:t=[],cate:n,cluster:r,name:i}){const[a,o]=f.exports.useState([]),[c,u]=f.exports.useState("");return f.exports.useEffect((()=>{"elasticsearch"!==n&&"elasticsearch-log"!==n||_.isEmpty(r)||Oa({cate:n,cluster:_.join(r," ")}).then((e=>{o(_.map(e.dat,(e=>({value:e}))))}))}),[n,_.join(r," ")]),d.createElement(St.Item,l(s({label:"索引",tooltip:d.createElement("div",null,"支持多种配置方式",d.createElement("br",null),"1. 指定单个索引 gb 在 gb 索引中搜索所有的文档",d.createElement("br",null),"2. 指定多个索引 gb,us 在 gb 和 us 索引中搜索所有的文档",d.createElement("br",null),"3. 指定索引前缀 g*,u* 在任何以 g 或者 u 开头的索引中搜索所有的文档",d.createElement("br",null))},e),{name:i||[...t,"query","index"],rules:[{required:!0,message:"请输入索引"}],validateTrigger:"onBlur"}),d.createElement(Ht,{options:_.filter(a,(e=>!c||e.value.includes(c))),onSearch:e=>{u(e)}}))}function Du({form:e}){return d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:16},d.createElement(At,{span:12},d.createElement(St.Item,{shouldUpdate:(e,t)=>_.isEqual(e.cluster,t.cluster),noStyle:!0},(({getFieldValue:e})=>d.createElement(Ru,{cate:e("cate"),cluster:e("cluster")})))),d.createElement(At,{span:12},d.createElement(St.Item,{label:d.createElement("span",null,"过滤条件"," ",d.createElement("a",{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax ",target:"_blank"},d.createElement(ce,null))),name:["query","filter"]},d.createElement(wt,null)))),d.createElement(St.Item,{shouldUpdate:(e,t)=>{var n,r;return _.isEqual(e.cluster,t.cluster)||_.isEqual(null==(n=null==e?void 0:e.query)?void 0:n.index,null==(r=null==t?void 0:t.query)?void 0:r.index)},noStyle:!0},(({getFieldValue:e})=>d.createElement(d.Fragment,null,d.createElement(Kc,{cate:e("cate"),cluster:e("cluster"),index:e(["query","index"])}),d.createElement(nu,{cate:e("cate"),cluster:e("cluster"),index:e(["query","index"]),prefixNameField:["query"]})))),d.createElement(ru,null),d.createElement(Lu,{form:e}),d.createElement(cu,{form:e}))}const Bu=["count","avg","sum","max","min","p90","p95","p99","rawData"],$u={count:"count",avg:"avg",sum:"sum",max:"max",min:"min",p90:"p90",p95:"p95",p99:"p99",rawData:"raw data"};function zu(e){const{cate:t,cluster:n,index:r,prefixField:i={},prefixFields:a=[],prefixNameField:o=[]}=e,[c,u]=f.exports.useState([]),[h,p]=f.exports.useState(""),{run:m}=ae((()=>{Aa({cate:t,cluster:_.join(n," "),index:r}).then((e=>{u(_.map(e.dat,(e=>({value:e}))))}))}),{wait:500});return f.exports.useEffect((()=>{"elasticsearch"===t&&!_.isEmpty(n)&&r&&m()}),[t,_.join(n),r]),d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>{const t=e(["queries",i.name,"value","func"]);return d.createElement(Ot,{gutter:8},d.createElement(At,{span:"count"===t||"rawData"===t?24:12},d.createElement(Uc,{label:d.createElement("div",null,"数值提取"," ",d.createElement(yt,{title:""},d.createElement(ce,null))),labelWidth:90},d.createElement(St.Item,l(s({},i),{name:[i.name,"value","func"],noStyle:!0}),d.createElement(Nt,{style:{width:"100%"}},Bu.map((e=>d.createElement(Nt.Option,{key:e,value:e},$u[e]))))))),"count"!==t&&"rawData"!==t&&d.createElement(At,{span:12},d.createElement(Uc,{label:"Field key",labelWidth:90},d.createElement(St.Item,l(s({},i),{name:[i.name,"value","field"],noStyle:!0}),d.createElement(Ht,{options:_.filter(c,(e=>!h||e.value.includes(h))),style:{width:"100%"},onSearch:p})))))}))}const Hu="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split("");function ju(e){const{form:t,cate:n,cluster:r}=e,[i,a]=f.exports.useState([]),[o,c]=f.exports.useState("");return f.exports.useEffect((()=>{_.isEmpty(r)||Oa({cate:n,cluster:_.join(r," ")}).then((e=>{a(_.map(e.dat,(e=>({value:e}))))}))}),[n,_.join(r)]),d.createElement(St.List,{name:["queries"]},((e,{add:t,remove:a})=>d.createElement(d.Fragment,null,d.createElement("div",{style:{marginBottom:8}},"查询统计"," ",d.createElement(Z,{onClick:()=>{t({})}})),e.map(((t,u)=>d.createElement("div",{key:t.key,style:{backgroundColor:"#fafafa",padding:16,marginBottom:16,position:"relative"}},d.createElement(Ot,{gutter:8},d.createElement(At,{flex:"32px"},d.createElement(St.Item,null,d.createElement(wt,{readOnly:!0,style:{width:"32px"},value:Hu[u]}))),d.createElement(At,{flex:"auto"},d.createElement(Ot,{gutter:8},d.createElement(At,{span:8},d.createElement(Uc,{label:d.createElement("span",null,"索引"," ",d.createElement(yt,{title:d.createElement("div",null,"支持多种配置方式",d.createElement("br",null),"1. 指定单个索引 gb 在 gb 索引中搜索所有的文档",d.createElement("br",null),"2. 指定多个索引 gb,us 在 gb 和 us 索引中搜索所有的文档",d.createElement("br",null),"3. 指定索引前缀 g*,u* 在任何以 g 或者 u 开头的索引中搜索所有的文档",d.createElement("br",null))},d.createElement(ce,null)))},d.createElement(St.Item,l(s({},t),{name:[t.name,"index"],rules:[{required:!0,message:"请输入索引"}]}),d.createElement(Ht,{dropdownMatchSelectWidth:!1,options:_.filter(i,(e=>!o||e.value.includes(o))),onSearch:e=>{c(e)}})))),d.createElement(At,{span:7},d.createElement(Uc,{label:d.createElement("span",null,"查询条件"," ",d.createElement("a",{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax ",target:"_blank"},d.createElement(ce,null))),labelWidth:90},d.createElement(St.Item,l(s({},t),{name:[t.name,"filter"]}),d.createElement(wt,null)))),d.createElement(At,{span:5},d.createElement(Uc,{label:"时间字段",labelWidth:80},d.createElement(St.Item,l(s({},t),{name:[t.name,"date_field"]}),d.createElement(wt,null)))),d.createElement(At,{span:4},d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"间隔"),d.createElement(St.Item,l(s({},t),{name:[t.name,"interval"],noStyle:!0}),d.createElement(Gt,{style:{width:"100%"}})),d.createElement("span",{className:"ant-input-group-addon"},d.createElement(St.Item,l(s({},t),{name:[t.name,"interval_unit"],noStyle:!0,initialValue:"min"}),d.createElement(Nt,null,d.createElement(Nt.Option,{value:"second"},"秒"),d.createElement(Nt.Option,{value:"min"},"分"),d.createElement(Nt.Option,{value:"hour"},"小时"))))))))),d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>{const i=e(["queries",t.name,"index"]);return d.createElement(d.Fragment,null,d.createElement(zu,{cate:n,cluster:r,index:i,prefixField:t}),d.createElement("div",{style:{marginTop:8}},d.createElement(nu,{cate:n,cluster:r,index:i,prefixField:t,prefixFields:["queries"],prefixNameField:[t.name],backgroundVisible:!1})))})),e.length>1&&d.createElement(G,{style:{position:"absolute",right:-4,top:-4},onClick:()=>{a(t.name)}})))))))}const Gu="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split("");function Vu(e){const{prefixField:t={},fullPrefixName:n=[],prefixName:r=[],queries:i}=e;return d.createElement("div",null,d.createElement(St.List,l(s({},t),{name:[...r,"expressions"],initialValue:[{ref:"A"}]}),((e,{add:t,remove:n})=>d.createElement("div",null,e.map((r=>d.createElement("div",{key:r.key},d.createElement(zt,{align:"start"},d.createElement(St.Item,l(s({},r),{name:[r.name,"ref"]}),d.createElement(Nt,null,_.map(i,((e,t)=>d.createElement(Nt.Option,{value:Gu[t]},Gu[t]))))),d.createElement(St.Item,l(s({},r),{name:[r.name,"comparisonOperator"],initialValue:"=="}),d.createElement(Nt,{style:{width:64}},d.createElement(Nt.Option,{value:"=="},"=="),d.createElement(Nt.Option,{value:"!="},"!="),d.createElement(Nt.Option,{value:">"},">"),d.createElement(Nt.Option,{value:">="},">="),d.createElement(Nt.Option,{value:"<"},"<"),d.createElement(Nt.Option,{value:"<="},"<="))),d.createElement(St.Item,l(s({},r),{name:[r.name,"value"]}),d.createElement(Gt,{style:{width:200}})),r.name!==e.length-1&&d.createElement(St.Item,l(s({},r),{name:[0,"logicalOperator"],initialValue:"&&"}),d.createElement(Nt,{style:{width:80}},d.createElement(Nt.Option,{value:"&&"},"AND"),d.createElement(Nt.Option,{value:"||"},"OR"))),d.createElement(zt,{style:{height:32,lineHeight:" 32px"}},d.createElement(Z,{onClick:()=>{t({ref:Gu[e.length]})}}),e.length>1&&d.createElement(ie,{onClick:()=>{n(r.name)}}))))))))))}function Yu(e){const{prefixField:t={},fullPrefixName:n=[],prefixName:r=[]}=e;return d.createElement(St.Item,l(s({},t),{name:[...r,"exp"]}),d.createElement(wt,null))}function Uu(e){const{prefixField:t={},fullPrefixName:n=[],prefixName:r=[]}=e;return d.createElement("div",{style:{backgroundColor:"#fafafa",padding:16,marginBottom:16}},d.createElement(St.Item,l(s({},t),{name:[...r,"mode"],initialValue:0}),d.createElement(Yt.Group,{buttonStyle:"solid",size:"small"},d.createElement(Yt.Button,{value:0},"简单模式"),d.createElement(Yt.Button,{value:1},"表达式模式"))),d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>{const i=e([...n,"mode"]),a=e(["queries"]);return 0==i?d.createElement(Vu,{prefixField:t,prefixName:r,queries:a}):1===i?d.createElement(Yu,{prefixField:t,prefixName:r}):void 0})),d.createElement(St.List,l(s({},t),{name:[...r,"relation_key"]}),((e,{add:t,remove:n})=>d.createElement("div",null,d.createElement("div",{style:{marginBottom:8}},"关联 Label:"," ",d.createElement(Z,{onClick:()=>{t()}})),e.map((e=>d.createElement(zt,{align:"start"},d.createElement(St.Item,l(s({},e),{name:[e.name,"left_key"]}),d.createElement(wt,{style:{width:197}})),d.createElement(St.Item,l(s({},e),{name:[e.name,"op"],initialValue:"=="}),d.createElement(wt,{disabled:!0,style:{width:64}})),d.createElement(St.Item,l(s({},e),{name:[e.name,"right_key"]}),d.createElement(wt,{style:{width:200}})),d.createElement(zt,{style:{height:32,lineHeight:" 32px"}},d.createElement(ie,{onClick:()=>{n(e.name)}})))))))),d.createElement(Uc,{label:"触发",labelWidth:60},d.createElement(St.Item,l(s({},t),{name:[...r,"severity"],initialValue:1}),d.createElement(Nt,{style:{width:210}},d.createElement(Nt.Option,{value:1},"一级告警"),d.createElement(Nt.Option,{value:2},"二级告警"),d.createElement(Nt.Option,{value:3},"三级告警")))))}function qu(e){const{prefixField:t={},fullPrefixName:n=[],prefixName:r=[]}=e;return d.createElement(St.List,l(s({},t),{name:[...r,"triggers"],initialValue:[{mode:0}]}),((e,{add:t,remove:n})=>d.createElement("div",null,d.createElement("div",{style:{marginBottom:8}},"告警条件"," ",d.createElement(Z,{style:{cursor:"pointer"},onClick:()=>{t({})}})),e.map((t=>d.createElement("div",{key:t.key,style:{position:"relative"}},d.createElement(Uu,{prefixField:t,fullPrefixName:[...r,"triggers",t.name],prefixName:[t.name]}),e.length>1&&d.createElement(G,{style:{position:"absolute",right:-4,top:-4},onClick:()=>{n(t.name)}})))))))}function Wu({form:e}){return d.createElement(St.Item,{shouldUpdate:(e,t)=>_.isEqual(e.cluster,t.cluster),noStyle:!0},(({getFieldValue:t})=>{const n=t("cate"),r=t("cluster");return d.createElement(d.Fragment,null,d.createElement(ju,{form:e,cate:n,cluster:r}),d.createElement(Lu,{form:e}),d.createElement(qu,null))}))}const Xu=function(e){return ji("/api/n9e-plus/logs-query",{method:Li.Post,data:e}).then((e=>e.dat))},Ku=function(e){return ji("/api/n9e-plus/ds-query",{method:Li.Post,data:e}).then((e=>e.dat))};function Qu(e){const{datasourceCate:t,datasourceName:n,prefixField:r={},prefixName:i=[],width:a=180,layout:o="horizontal"}=e,[c,u]=f.exports.useState([]),h=d.createElement("span",null,"项目"," ",d.createElement(yt,{title:d.createElement("div",null,"项目是日志服务的资源管理单元，是进行多用户隔离与访问控制的主要边界。更多信息，请参见",d.createElement("a",{href:"https://help.aliyun.com/document_detail/48873.htm",target:"_blank",style:{color:"#c6b2fd"}},"项目"))},d.createElement(ce,null)));return f.exports.useEffect((()=>{var e;n&&(e={cate:t,cluster:n},ji("/api/n9e-plus/sls-project",{method:Li.Post,data:e}).then((e=>e.dat))).then((e=>{u(_.map(e,(e=>({label:e,value:e}))))}))}),[n]),"vertical"===o?d.createElement(St.Item,l(s({},r),{label:h,name:[...i,"project"],rules:[{required:!0,message:"请输入项目"}],style:{width:a}}),d.createElement(Ht,{options:c})):d.createElement(Uc,{label:h,labelWidth:84},d.createElement(St.Item,l(s({},r),{name:[...i,"project"],rules:[{required:!0,message:"请输入项目"}],style:{width:a}}),d.createElement(Ht,{options:c})))}function Zu(e){const{datasourceCate:t,datasourceName:n,project:r,prefixField:i={},prefixName:a=[],width:o=190,layout:c="horizontal"}=e,[u,h]=f.exports.useState([]),p=d.createElement("span",null,"日志库"," ",d.createElement(yt,{title:d.createElement("div",null,"日志库是日志服务中日志数据的采集、存储和查询单元。更多信息，请参见",d.createElement("a",{href:"https://help.aliyun.com/document_detail/48874.htm",target:"_blank",style:{color:"#c6b2fd"}},"日志库"))},d.createElement(ce,null)));return f.exports.useEffect((()=>{var e;n&&r&&(e={cate:t,cluster:n,project:r},ji("/api/n9e-plus/sls-logstore",{method:Li.Post,data:e}).then((e=>e.dat))).then((e=>{h(_.map(e,(e=>({label:e,value:e}))))}))}),[n,r]),"vertical"===c?d.createElement(St.Item,l(s({},i),{label:p,name:[...a,"logstore"],rules:[{required:!0,message:"请输入日志库"}],style:{width:o}}),d.createElement(Ht,{options:u})):d.createElement(Uc,{label:p,labelWidth:84},d.createElement(St.Item,l(s({},i),{name:[...a,"logstore"],rules:[{required:!0,message:"请输入日志库"}],style:{width:o}}),d.createElement(Ht,{options:u})))}const Ju=["http","https","mailto","tel"];function eh(e){return e&&"object"==typeof e?"position"in e||"type"in e?nh(e.position):"start"in e||"end"in e?nh(e):"line"in e||"column"in e?th(e):"":""}function th(e){return rh(e&&e.line)+":"+rh(e&&e.column)}function nh(e){return th(e&&e.start)+"-"+th(e&&e.end)}function rh(e){return e&&"number"==typeof e?e:1}class ih extends Error{constructor(e,t,n){const r=[null,null];let i={start:{line:null,column:null},end:{line:null,column:null}};if(super(),"string"==typeof t&&(n=t,t=void 0),"string"==typeof n){const e=n.indexOf(":");-1===e?r[1]=n:(r[0]=n.slice(0,e),r[1]=n.slice(e+1))}t&&("type"in t||"position"in t?t.position&&(i=t.position):"start"in t||"end"in t?i=t:("line"in t||"column"in t)&&(i.start=t)),this.name=eh(t)||"1:1",this.message="object"==typeof e?e.message:e,this.stack="object"==typeof e?e.stack:"",this.reason=this.message,this.fatal,this.line=i.start.line,this.column=i.start.column,this.source=r[0],this.ruleId=r[1],this.position=i,this.actual,this.expected,this.file,this.url,this.note}}ih.prototype.file="",ih.prototype.name="",ih.prototype.reason="",ih.prototype.message="",ih.prototype.stack="",ih.prototype.fatal=null,ih.prototype.column=null,ih.prototype.line=null,ih.prototype.source=null,ih.prototype.ruleId=null,ih.prototype.position=null;const ah={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');oh(e);let n,r=0,i=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.charCodeAt(a)){if(n){r=a+1;break}}else i<0&&(n=!0,i=a+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let o=-1,s=t.length-1;for(;a--;)if(47===e.charCodeAt(a)){if(n){r=a+1;break}}else o<0&&(n=!0,o=a+1),s>-1&&(e.charCodeAt(a)===t.charCodeAt(s--)?s<0&&(i=a):(s=-1,i=o));r===i?i=o:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(oh(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.charCodeAt(0)?"/":".":1===n&&47===e.charCodeAt(0)?"//":e.slice(0,n)},extname:function(e){oh(e);let t,n=e.length,r=-1,i=0,a=-1,o=0;for(;n--;){const s=e.charCodeAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?a<0?a=n:1!==o&&(o=1):a>-1&&(o=-1);else if(t){i=n+1;break}}if(a<0||r<0||0===o||1===o&&a===r-1&&a===i+1)return"";return e.slice(a,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)oh(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){oh(e);const t=47===e.charCodeAt(0);let n=function(e,t){let n,r,i="",a=0,o=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(o===l-1||1===s);else if(o!==l-1&&2===s){if(i.length<2||2!==a||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){if(r=i.lastIndexOf("/"),r!==i.length-1){r<0?(i="",a=0):(i=i.slice(0,r),a=i.length-1-i.lastIndexOf("/")),o=l,s=0;continue}}else if(i.length>0){i="",a=0,o=l,s=0;continue}t&&(i=i.length>0?i+"/..":"..",a=2)}else i.length>0?i+="/"+e.slice(o+1,l):i=e.slice(o+1,l),a=l-o-1;o=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.charCodeAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function oh(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const sh={cwd:function(){return"/"}};function lh(e){return null!==e&&"object"==typeof e&&e.href&&e.origin}function ch(e){if("string"==typeof e)e=new URL(e);else if(!lh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.charCodeAt(n)&&50===t.charCodeAt(n+1)){const e=t.charCodeAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const uh=["history","path","basename","stem","extname","dirname"];class hh{constructor(e){let t;var n;t=e?"string"==typeof e||null!=(n=e)&&null!=n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)?{value:e}:lh(e)?{path:e}:e:{},this.data={},this.messages=[],this.history=[],this.cwd=sh.cwd(),this.value,this.stored,this.result,this.map;let r,i=-1;for(;++i<uh.length;){const e=uh[i];e in t&&void 0!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(r in t)uh.includes(r)||(this[r]=t[r])}get path(){return this.history[this.history.length-1]}set path(e){lh(e)&&(e=ch(e)),dh(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return"string"==typeof this.path?ah.dirname(this.path):void 0}set dirname(e){fh(this.basename,"dirname"),this.path=ah.join(e||"",this.basename)}get basename(){return"string"==typeof this.path?ah.basename(this.path):void 0}set basename(e){dh(e,"basename"),ph(e,"basename"),this.path=ah.join(this.dirname||"",e)}get extname(){return"string"==typeof this.path?ah.extname(this.path):void 0}set extname(e){if(ph(e,"extname"),fh(this.dirname,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ah.join(this.dirname,this.stem+(e||""))}get stem(){return"string"==typeof this.path?ah.basename(this.path,this.extname):void 0}set stem(e){dh(e,"stem"),ph(e,"stem"),this.path=ah.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e)}message(e,t,n){const r=new ih(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=null,r}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}}function ph(e,t){if(e&&e.includes(ah.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ah.sep+"`")}function dh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function fh(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function mh(e){if(e)throw e}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var gh=Object.prototype.hasOwnProperty,yh=Object.prototype.toString,vh=Object.defineProperty,Eh=Object.getOwnPropertyDescriptor,xh=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===yh.call(e)},bh=function(e){if(!e||"[object Object]"!==yh.call(e))return!1;var t,n=gh.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&gh.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||gh.call(e,t)},Ch=function(e,t){vh&&"__proto__"===t.name?vh(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},Sh=function(e,t){if("__proto__"===t){if(!gh.call(e,t))return;if(Eh)return Eh(e,t).value}return e[t]},wh=function e(){var t,n,r,i,a,o,s=arguments[0],l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),(null==s||"object"!=typeof s&&"function"!=typeof s)&&(s={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)r=Sh(s,n),s!==(i=Sh(t,n))&&(u&&i&&(bh(i)||(a=xh(i)))?(a?(a=!1,o=r&&xh(r)?r:[]):o=r&&bh(r)?r:{},Ch(s,{name:n,newValue:e(u,o,i)})):void 0!==i&&Ch(s,{name:n,newValue:i}));return s};function Th(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function kh(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function i(a,...o){const s=e[++n];let l=-1;if(a)r(a);else{for(;++l<t.length;)null!==o[l]&&void 0!==o[l]||(o[l]=t[l]);t=o,s?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let s;r&&t.push(i);try{s=e.apply(this,t)}catch(a){const t=a;if(r&&n)throw t;return i(t)}r||(s instanceof Promise?s.then(o,i):s instanceof Error?i(s):o(s))}function i(e,...r){n||(n=!0,t(e,...r))}function o(e){i(null,e)}}(s,i)(...o):r(null,...o)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const _h=function e(){const t=kh(),n=[];let r,i={},a=-1;return o.data=function(e,t){if("string"==typeof e)return 2===arguments.length?(Nh("data",r),i[e]=t,o):Oh.call(i,e)&&i[e]||null;if(e)return Nh("data",r),i=e,o;return i},o.Parser=void 0,o.Compiler=void 0,o.freeze=function(){if(r)return o;for(;++a<n.length;){const[e,...r]=n[a];if(!1===r[0])continue;!0===r[0]&&(r[0]=void 0);const i=e.call(o,...r);"function"==typeof i&&t.use(i)}return r=!0,a=Number.POSITIVE_INFINITY,o},o.attachers=n,o.use=function(e,...t){let a;if(Nh("use",r),null==e);else if("function"==typeof e)u(e,...t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?c(e):l(e)}a&&(i.settings=Object.assign(i.settings||{},a));return o;function s(e){if("function"==typeof e)u(e);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;u(t,...n)}else l(e)}}function l(e){c(e.plugins),e.settings&&(a=Object.assign(a||{},e.settings))}function c(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function u(e,t){let r,i=-1;for(;++i<n.length;)if(n[i][0]===e){r=n[i];break}r?(Th(r[1])&&Th(t)&&(t=wh(!0,r[1],t)),r[1]=t):n.push([...arguments])}},o.parse=function(e){o.freeze();const t=Lh(e),n=o.Parser;if(Ih("parse",n),Ah(n,"parse"))return new n(String(t),t).parse();return n(String(t),t)},o.stringify=function(e,t){o.freeze();const n=Lh(t),r=o.Compiler;if(Mh("stringify",r),Ph(e),Ah(r,"compile"))return new r(e,n).compile();return r(e,n)},o.run=function(e,n,r){Ph(e),o.freeze(),r||"function"!=typeof n||(r=n,n=void 0);if(!r)return new Promise(i);function i(i,a){function o(t,n,o){n=n||e,t?a(t):i?i(n):r(null,n,o)}t.run(e,Lh(n),o)}i(null,r)},o.runSync=function(e,t){let n,r;return o.run(e,t,i),Fh("runSync","run",r),n;function i(e,t){mh(e),n=t,r=!0}},o.process=function(e,t){if(o.freeze(),Ih("process",o.Parser),Mh("process",o.Compiler),!t)return new Promise(n);function n(n,r){const i=Lh(e);function a(e,i){e||!i?r(e):n?n(i):t(null,i)}o.run(o.parse(i),i,((e,t,n)=>{if(!e&&t&&n){const s=o.stringify(t,n);null==s||("string"==typeof(r=s)||null!=(i=r)&&null!=i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)?n.value=s:n.result=s),a(e,n)}else a(e);var r,i}))}n(null,t)},o.processSync=function(e){let t;o.freeze(),Ih("processSync",o.Parser),Mh("processSync",o.Compiler);const n=Lh(e);return o.process(n,r),Fh("processSync","process",t),n;function r(e){t=!0,mh(e)}},o;function o(){const t=e();let r=-1;for(;++r<n.length;)t.use(...n[r]);return t.data(wh(!0,{},i)),t}}().freeze(),Oh={}.hasOwnProperty;function Ah(e,t){return"function"==typeof e&&e.prototype&&(function(e){let t;for(t in e)if(Oh.call(e,t))return!0;return!1}(e.prototype)||t in e.prototype)}function Ih(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `Parser`")}function Mh(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Nh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ph(e){if(!Th(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Fh(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Lh(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new hh(e)}function Rh(e,t){return e&&"object"==typeof e&&(e.value||(t?e.alt:"")||"children"in e&&Dh(e.children,t)||Array.isArray(e)&&Dh(e,t))||""}function Dh(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=Rh(e[r],t);return n.join("")}function Bh(e,t,n,r){const i=e.length;let a,o=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),[].splice.apply(e,a);else for(n&&[].splice.apply(e,[t,n]);o<r.length;)a=r.slice(o,o+1e4),a.unshift(t,0),[].splice.apply(e,a),o+=1e4,t+=1e4}function $h(e,t){return e.length>0?(Bh(e,e.length,0,t),e):t}const zh={}.hasOwnProperty;function Hh(e,t){let n;for(n in t){const r=(zh.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;for(a in i){zh.call(r,a)||(r[a]=[]);const e=i[a];jh(r[a],Array.isArray(e)?e:e?[e]:[])}}}function jh(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);Bh(e,0,0,r)}const Gh=tp(/[A-Za-z]/),Vh=tp(/\d/),Yh=tp(/[\dA-Fa-f]/),Uh=tp(/[\dA-Za-z]/),qh=tp(/[!-/:-@[-`{-~]/),Wh=tp(/[#-'*+\--9=?A-Z^-~]/);function Xh(e){return null!==e&&(e<32||127===e)}function Kh(e){return null!==e&&(e<0||32===e)}function Qh(e){return null!==e&&e<-2}function Zh(e){return-2===e||-1===e||32===e}const Jh=tp(/\s/),ep=tp(/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/);function tp(e){return function(t){return null!==t&&e.test(String.fromCharCode(t))}}function np(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return function(r){if(Zh(r))return e.enter(n),o(r);return t(r)};function o(r){return Zh(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}}const rp={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),np(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Qh(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const ip={tokenize:function(e){const t=this,n=[];let r,i,a,o=0;return s;function s(r){if(o<n.length){const i=n[o];return t.containerState=i[1],e.attempt(i[0].continuation,l,c)(r)}return c(r)}function l(e){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&v();const n=t.events.length;let i,a=n;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){i=t.events[a][1].end;break}y(o);let s=n;for(;s<t.events.length;)t.events[s][1].end=Object.assign({},i),s++;return Bh(t.events,a+1,0,t.events.slice(n)),t.events.length=s,c(e)}return s(e)}function c(i){if(o===n.length){if(!r)return p(i);if(r.currentConstruct&&r.currentConstruct.concrete)return f(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ap,u,h)(i)}function u(e){return r&&v(),y(o),p(e)}function h(e){return t.parser.lazy[t.now().line]=o!==n.length,a=t.now().offset,f(e)}function p(n){return t.containerState={},e.attempt(ap,d,f)(n)}function d(e){return o++,n.push([t.currentConstruct,t.containerState]),p(e)}function f(n){return null===n?(r&&v(),y(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:r}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):Qh(n)?(e.consume(n),g(e.exit("chunkFlow")),o=0,t.interrupt=void 0,s):(e.consume(n),m)}function g(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<a&&(!r.events[e][1].end||r.events[e][1].end.offset>a))return;const n=t.events.length;let i,s,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){s=t.events[l][1].end;break}i=!0}for(y(o),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},s),e++;Bh(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function v(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},ap={tokenize:function(e,t,n){return np(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function op(e){return null===e||Kh(e)||Jh(e)?1:ep(e)?2:void 0}function sp(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const lp={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=op(r);let a;return function(t){return e.enter("attentionSequence"),a=t,o(t)};function o(s){if(s===a)return e.consume(s),o;const l=e.exit("attentionSequence"),c=op(s),u=!c||2===c&&i||n.includes(s),h=!i||2===i&&c||n.includes(r);return l._open=Boolean(42===a?u:u&&(i||!h)),l._close=Boolean(42===a?h:h&&(c||!u)),t(s)}},resolveAll:function(e,t){let n,r,i,a,o,s,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const h=Object.assign({},e[n][1].end),p=Object.assign({},e[u][1].start);cp(h,-s),cp(p,s),a={type:s>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},e[n][1].end)},o={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:p},i={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},e[n][1].end=Object.assign({},a.start),e[u][1].start=Object.assign({},o.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=$h(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=$h(l,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",i,t]]),l=$h(l,sp(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=$h(l,[["exit",i,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=$h(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,Bh(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function cp(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const up={name:"autolink",tokenize:function(e,t,n){let r=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return Gh(t)?(e.consume(t),a):Wh(t)?l(t):n(t)}function a(e){return 43===e||45===e||46===e||Uh(e)?o(e):l(e)}function o(t){return 58===t?(e.consume(t),s):(43===t||45===t||46===t||Uh(t))&&r++<32?(e.consume(t),o):l(t)}function s(t){return 62===t?(e.exit("autolinkProtocol"),p(t)):null===t||32===t||60===t||Xh(t)?n(t):(e.consume(t),s)}function l(t){return 64===t?(e.consume(t),r=0,c):Wh(t)?(e.consume(t),l):n(t)}function c(e){return Uh(e)?u(e):n(e)}function u(t){return 46===t?(e.consume(t),r=0,c):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",p(t)):h(t)}function h(t){return(45===t||Uh(t))&&r++<63?(e.consume(t),45===t?h:u):n(t)}function p(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}};const hp={tokenize:function(e,t,n){return np(e,(function(e){return null===e||Qh(e)?t(e):n(e)}),"linePrefix")},partial:!0};const pp={name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return Zh(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return np(e,e.attempt(pp,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},exit:function(e){e.exit("blockQuote")}};const dp={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return qh(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const fp=document.createElement("i");function mp(e){const t="&"+e+";";fp.innerHTML=t;const n=fp.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const gp={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,a,o=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,a=Uh,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=Yh,c):(e.enter("characterReferenceValue"),i=7,a=Vh,c(t))}function c(s){let l;return 59===s&&o?(l=e.exit("characterReferenceValue"),a!==Uh||mp(r.sliceSerialize(l))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)):a(s)&&o++<i?(e.consume(s),c):n(s)}}};const yp={name:"codeFenced",tokenize:function(e,t,n){const r=this,i={tokenize:function(e,t,n){let r=0;return np(e,i,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function i(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),a(t)}function a(t){return t===l?(e.consume(t),r++,a):r<c?n(t):(e.exit("codeFencedFenceSequence"),np(e,o,"whitespace")(t))}function o(r){return null===r||Qh(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},a={tokenize:function(e,t,n){const r=this;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a}function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},o=this.events[this.events.length-1],s=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0;let l,c=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=t,u(t)};function u(t){return t===l?(e.consume(t),c++,u):(e.exit("codeFencedFenceSequence"),c<3?n(t):np(e,h,"whitespace")(t))}function h(t){return null===t||Qh(t)?m(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||Kh(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),np(e,d,"whitespace")(t)):96===t&&t===l?n(t):(e.consume(t),p)}function d(t){return null===t||Qh(t)?m(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||Qh(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(t)):96===t&&t===l?n(t):(e.consume(t),f)}function m(n){return e.exit("codeFencedFence"),r.interrupt?t(n):g(n)}function g(t){return null===t?v(t):Qh(t)?e.attempt(a,e.attempt(i,v,s?np(e,g,"linePrefix",s+1):g),v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||Qh(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const vp={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),np(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?a(e):n(e)}function a(t){return null===t?s(t):Qh(t)?e.attempt(Ep,a,s)(t):(e.enter("codeFlowValue"),o(t))}function o(t){return null===t||Qh(t)?(e.exit("codeFlowValue"),a(t)):(e.consume(t),o)}function s(n){return e.exit("codeIndented"),t(n)}}},Ep={tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):Qh(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):np(e,a,"linePrefix",5)(t)}function a(e){const a=r.events[r.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):Qh(e)?i(e):n(e)}},partial:!0};const xp={name:"codeText",tokenize:function(e,t,n){let r,i,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),o(t)};function o(t){return 96===t?(e.consume(t),a++,o):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):96===t?(i=e.enter("codeTextSequence"),r=0,c(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):Qh(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Qh(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}},resolve:function(e){let t,n,r=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};function bp(e){const t={};let n,r,i,a,o,s,l,c=-1;for(;++c<e.length;){for(;c in t;)c=t[c];if(n=e[c],c&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[c-1][1].type&&(s=n[1]._tokenizer.events,i=0,i<s.length&&"lineEndingBlank"===s[i][1].type&&(i+=2),i<s.length&&"content"===s[i][1].type))for(;++i<s.length&&"content"!==s[i][1].type;)"chunkText"===s[i][1].type&&(s[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,Cp(e,c)),c=t[c],l=!0);else if(n[1]._container){for(i=c,r=void 0;i--&&(a=e[i],"lineEnding"===a[1].type||"lineEndingBlank"===a[1].type);)"enter"===a[0]&&(r&&(e[r][1].type="lineEndingBlank"),a[1].type="lineEnding",r=i);r&&(n[1].end=Object.assign({},e[r][1].start),o=e.slice(r,c),o.unshift(n),Bh(e,r,c-r+1,o))}}return!l}function Cp(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const a=[],o=n._tokenizer||r.parser[n.contentType](n.start),s=o.events,l=[],c={};let u,h,p=-1,d=n,f=0,m=0;const g=[m];for(;d;){for(;e[++i][1]!==d;);a.push(i),d._tokenizer||(u=r.sliceStream(d),d.next||u.push(null),h&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=n;++p<s.length;)"exit"===s[p][0]&&"enter"===s[p-1][0]&&s[p][1].type===s[p-1][1].type&&s[p][1].start.line!==s[p][1].end.line&&(m=p+1,g.push(m),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):g.pop(),p=g.length;p--;){const t=s.slice(g[p],g[p+1]),n=a.pop();l.unshift([n,n+t.length-1]),Bh(e,n,2,t)}for(p=-1;++p<l.length;)c[f+l[p][0]]=f+l[p][1],f+=l[p][1]-l[p][0]-1;return c}const Sp={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):Qh(t)?e.check(wp,a,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return bp(e),e}},wp={tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),np(e,i,"linePrefix")};function i(i){if(null===i||Qh(i))return n(i);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}},partial:!0};function Tp(e,t,n,r,i,a,o,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(a),e.consume(t),e.exit(a),h;if(null===t||41===t||Xh(t))return n(t);return e.enter(r),e.enter(o),e.enter(s),e.enter("chunkString",{contentType:"string"}),f(t)};function h(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return 62===t?(e.exit("chunkString"),e.exit(s),h(t)):null===t||60===t||Qh(t)?n(t):(e.consume(t),92===t?d:p)}function d(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function f(i){return 40===i?++u>c?n(i):(e.consume(i),f):41===i?u--?(e.consume(i),f):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):null===i||Kh(i)?u?n(i):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):Xh(i)?n(i):(e.consume(i),92===i?m:f)}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function kp(e,t,n,r,i,a){const o=this;let s,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(a),c};function c(h){return null===h||91===h||93===h&&!s||94===h&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs||l>999?n(h):93===h?(e.exit(a),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Qh(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(t){return null===t||91===t||93===t||Qh(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),s=s||!Zh(t),92===t?h:u)}function h(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function _p(e,t,n,r,i,a){let o;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),o=40===t?41:t,s};function s(n){return n===o?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(a),l(n))}function l(t){return t===o?(e.exit(a),s(o)):null===t?n(t):Qh(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),np(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===o||null===t||Qh(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===o||92===t?(e.consume(t),c):c(t)}}function Op(e,t){let n;return function r(i){if(Qh(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(Zh(i))return np(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}function Ap(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ip={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),kp.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function a(t){return i=Ap(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),Op(e,Tp(e,e.attempt(Mp,np(e,o,"whitespace"),np(e,o,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function o(a){return null===a||Qh(a)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(a)):n(a)}}},Mp={tokenize:function(e,t,n){return function(t){return Kh(t)?Op(e,r)(t):n(t)};function r(t){return 34===t||39===t||40===t?_p(e,np(e,i,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function i(e){return null===e||Qh(e)?t(e):n(e)}},partial:!0};const Np={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return Qh(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}};const Pp={name:"headingAtx",tokenize:function(e,t,n){const r=this;let i=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),a(t)};function a(s){return 35===s&&i++<6?(e.consume(s),a):null===s||Kh(s)?(e.exit("atxHeadingSequence"),r.interrupt?t(s):o(s)):n(s)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),s(n)):null===n||Qh(n)?(e.exit("atxHeading"),t(n)):Zh(n)?np(e,o,"whitespace")(n):(e.enter("atxHeadingText"),l(n))}function s(t){return 35===t?(e.consume(t),s):(e.exit("atxHeadingSequence"),o(t))}function l(t){return null===t||35===t||Kh(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),l)}},resolve:function(e,t){let n,r,i=e.length-2,a=3;"whitespace"===e[a][1].type&&(a+=2);i-2>a&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(a===i-1||i-4>a&&"whitespace"===e[i-2][1].type)&&(i-=a+1===i?2:4);i>a&&(n={type:"atxHeadingText",start:e[a][1].start,end:e[i][1].end},r={type:"chunkText",start:e[a][1].start,end:e[i][1].end,contentType:"text"},Bh(e,a,i-a+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};const Fp=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Lp=["pre","script","style","textarea"],Rp={name:"htmlFlow",tokenize:function(e,t,n){const r=this;let i,a,o,s,l;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c};function c(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),d):63===s?(e.consume(s),i=3,r.interrupt?t:F):Gh(s)?(e.consume(s),o=String.fromCharCode(s),a=!0,f):n(s)}function u(a){return 45===a?(e.consume(a),i=2,h):91===a?(e.consume(a),i=5,o="CDATA[",s=0,p):Gh(a)?(e.consume(a),i=4,r.interrupt?t:F):n(a)}function h(i){return 45===i?(e.consume(i),r.interrupt?t:F):n(i)}function p(i){return i===o.charCodeAt(s++)?(e.consume(i),s===o.length?r.interrupt?t:k:p):n(i)}function d(t){return Gh(t)?(e.consume(t),o=String.fromCharCode(t),f):n(t)}function f(s){return null===s||47===s||62===s||Kh(s)?47!==s&&a&&Lp.includes(o.toLowerCase())?(i=1,r.interrupt?t(s):k(s)):Fp.includes(o.toLowerCase())?(i=6,47===s?(e.consume(s),m):r.interrupt?t(s):k(s)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):a?y(s):g(s)):45===s||Uh(s)?(e.consume(s),o+=String.fromCharCode(s),f):n(s)}function m(i){return 62===i?(e.consume(i),r.interrupt?t:k):n(i)}function g(t){return Zh(t)?(e.consume(t),g):w(t)}function y(t){return 47===t?(e.consume(t),w):58===t||95===t||Gh(t)?(e.consume(t),v):Zh(t)?(e.consume(t),y):w(t)}function v(t){return 45===t||46===t||58===t||95===t||Uh(t)?(e.consume(t),v):E(t)}function E(t){return 61===t?(e.consume(t),x):Zh(t)?(e.consume(t),E):y(t)}function x(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,b):Zh(t)?(e.consume(t),x):(l=null,C(t))}function b(t){return null===t||Qh(t)?n(t):t===l?(e.consume(t),S):(e.consume(t),b)}function C(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||Kh(t)?E(t):(e.consume(t),C)}function S(e){return 47===e||62===e||Zh(e)?y(e):n(e)}function w(t){return 62===t?(e.consume(t),T):n(t)}function T(t){return Zh(t)?(e.consume(t),T):null===t||Qh(t)?k(t):n(t)}function k(t){return 45===t&&2===i?(e.consume(t),I):60===t&&1===i?(e.consume(t),M):62===t&&4===i?(e.consume(t),L):63===t&&3===i?(e.consume(t),F):93===t&&5===i?(e.consume(t),P):!Qh(t)||6!==i&&7!==i?null===t||Qh(t)?_(t):(e.consume(t),k):e.check(Dp,L,_)(t)}function _(t){return e.exit("htmlFlowData"),O(t)}function O(t){return null===t?R(t):Qh(t)?e.attempt({tokenize:A,partial:!0},O,R)(t):(e.enter("htmlFlowData"),k(t))}function A(e,t,n){return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}function I(t){return 45===t?(e.consume(t),F):k(t)}function M(t){return 47===t?(e.consume(t),o="",N):k(t)}function N(t){return 62===t&&Lp.includes(o.toLowerCase())?(e.consume(t),L):Gh(t)&&o.length<8?(e.consume(t),o+=String.fromCharCode(t),N):k(t)}function P(t){return 93===t?(e.consume(t),F):k(t)}function F(t){return 62===t?(e.consume(t),L):45===t&&2===i?(e.consume(t),F):k(t)}function L(t){return null===t||Qh(t)?(e.exit("htmlFlowData"),R(t)):(e.consume(t),L)}function R(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},Dp={tokenize:function(e,t,n){return function(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(hp,t,n)}},partial:!0};const Bp={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,a,o,s;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l};function l(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),C):63===t?(e.consume(t),x):Gh(t)?(e.consume(t),T):n(t)}function c(t){return 45===t?(e.consume(t),u):91===t?(e.consume(t),a="CDATA[",o=0,m):Gh(t)?(e.consume(t),E):n(t)}function u(t){return 45===t?(e.consume(t),h):n(t)}function h(t){return null===t||62===t?n(t):45===t?(e.consume(t),p):d(t)}function p(e){return null===e||62===e?n(e):d(e)}function d(t){return null===t?n(t):45===t?(e.consume(t),f):Qh(t)?(s=d,P(t)):(e.consume(t),d)}function f(t){return 45===t?(e.consume(t),L):d(t)}function m(t){return t===a.charCodeAt(o++)?(e.consume(t),o===a.length?g:m):n(t)}function g(t){return null===t?n(t):93===t?(e.consume(t),y):Qh(t)?(s=g,P(t)):(e.consume(t),g)}function y(t){return 93===t?(e.consume(t),v):g(t)}function v(t){return 62===t?L(t):93===t?(e.consume(t),v):g(t)}function E(t){return null===t||62===t?L(t):Qh(t)?(s=E,P(t)):(e.consume(t),E)}function x(t){return null===t?n(t):63===t?(e.consume(t),b):Qh(t)?(s=x,P(t)):(e.consume(t),x)}function b(e){return 62===e?L(e):x(e)}function C(t){return Gh(t)?(e.consume(t),S):n(t)}function S(t){return 45===t||Uh(t)?(e.consume(t),S):w(t)}function w(t){return Qh(t)?(s=w,P(t)):Zh(t)?(e.consume(t),w):L(t)}function T(t){return 45===t||Uh(t)?(e.consume(t),T):47===t||62===t||Kh(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),L):58===t||95===t||Gh(t)?(e.consume(t),_):Qh(t)?(s=k,P(t)):Zh(t)?(e.consume(t),k):L(t)}function _(t){return 45===t||46===t||58===t||95===t||Uh(t)?(e.consume(t),_):O(t)}function O(t){return 61===t?(e.consume(t),A):Qh(t)?(s=O,P(t)):Zh(t)?(e.consume(t),O):k(t)}function A(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,I):Qh(t)?(s=A,P(t)):Zh(t)?(e.consume(t),A):(e.consume(t),i=void 0,N)}function I(t){return t===i?(e.consume(t),M):null===t?n(t):Qh(t)?(s=I,P(t)):(e.consume(t),I)}function M(e){return 62===e||47===e||Kh(e)?k(e):n(e)}function N(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||Kh(t)?k(t):(e.consume(t),N)}function P(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),np(e,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function F(t){return e.enter("htmlTextData"),s(t)}function L(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}}};const $p={name:"labelEnd",tokenize:function(e,t,n){const r=this;let i,a,o=r.events.length;for(;o--;)if(("labelImage"===r.events[o][1].type||"labelLink"===r.events[o][1].type)&&!r.events[o][1]._balanced){i=r.events[o][1];break}return function(t){if(!i)return n(t);return i._inactive?l(t):(a=r.parser.defined.includes(Ap(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s)};function s(n){return 40===n?e.attempt(zp,t,a?t:l)(n):91===n?e.attempt(Hp,t,a?e.attempt(jp,t,l):l)(n):a?t(n):l(n)}function l(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,i,a,o=e.length,s=0;for(;o--;)if(n=e[o][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[o][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[o][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=o,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=o);const l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[i-2][1].start)};return a=[["enter",l,t],["enter",c,t]],a=$h(a,e.slice(r+1,r+s+3)),a=$h(a,[["enter",u,t]]),a=$h(a,sp(t.parser.constructs.insideSpan.null,e.slice(r+s+4,i-3),t)),a=$h(a,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),a=$h(a,e.slice(i+1)),a=$h(a,[["exit",l,t]]),Bh(e,r,e.length,a),e},resolveAll:function(e){let t,n=-1;for(;++n<e.length;)t=e[n][1],"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},zp={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),Op(e,r)};function r(t){return 41===t?o(t):Tp(e,i,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return Kh(t)?Op(e,a)(t):o(t)}function a(t){return 34===t||39===t||40===t?_p(e,Op(e,o),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):o(t)}function o(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Hp={tokenize:function(e,t,n){const r=this;return function(t){return kp.call(r,e,i,n,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(Ap(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}}},jp={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const Gp={name:"labelStartImage",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:$p.resolveAll};const Vp={name:"labelStartLink",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:$p.resolveAll};const Yp={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),np(e,t,"linePrefix")}}};const Up={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),r=t,a(t)};function a(s){return s===r?(e.enter("thematicBreakSequence"),o(s)):Zh(s)?np(e,a,"whitespace")(s):i<3||null!==s&&!Qh(s)?n(s):(e.exit("thematicBreak"),t(s))}function o(t){return t===r?(e.consume(t),i++,o):(e.exit("thematicBreakSequence"),a(t))}}};const qp={name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,o=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:Vh(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(Up,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return Vh(t)&&++o<10?(e.consume(t),s):(!r.interrupt||o<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(hp,r.interrupt?n:c,e.attempt(Wp,h,u))}function c(e){return r.containerState.initialBlankLine=!0,a++,h(e)}function u(t){return Zh(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),h):n(t)}function h(n){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(hp,(function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,np(e,t,"listItemIndent",r.containerState.size+1)(n)}),(function(n){if(r.containerState.furtherBlankLines||!Zh(n))return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(n);return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Xp,t,i)(n)}));function i(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,np(e,e.attempt(qp,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},Wp={tokenize:function(e,t,n){const r=this;return np(e,(function(e){const i=r.events[r.events.length-1];return!Zh(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},Xp={tokenize:function(e,t,n){const r=this;return np(e,(function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};const Kp={name:"setextUnderline",tokenize:function(e,t,n){const r=this;let i,a,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){a="paragraph"===r.events[o][1].type;break}return function(t){if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),i=t,s(t);return n(t)};function s(t){return t===i?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),np(e,l,"lineSuffix")(t))}function l(r){return null===r||Qh(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,i,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),i||"definition"!==e[a][1].type||(i=a);const o={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=o;return e.push(["exit",o,t]),e}};const Qp={tokenize:function(e){const t=this,n=e.attempt(hp,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,np(e,e.attempt(this.parser.constructs.flow,r,e.attempt(Sp,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const Zp={resolveAll:nd()},Jp=td("string"),ed=td("text");function td(e){return{tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,a,o);return a;function a(e){return l(e)?i(e):o(e)}function o(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:nd("text"===e?rd:void 0)}}function nd(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function rd(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let a,o=i.length,s=-1,l=0;for(;o--;){const e=i[o];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)a=!0,l++;else if(-1!==e){o++;break}}if(l){const i={type:n===e.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+o,_bufferIndex:o?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}function id(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},a=[];let o=[],s=[];const l={consume:function(e){Qh(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,v()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=p(),c.events.push(["enter",n,c]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=p(),c.events.push(["exit",t,c]),t},attempt:g((function(e,t){y(e,t.from)})),check:g(m),interrupt:g(m,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if("string"==typeof a)o=a;else switch(a){case-5:o="\r";break;case-4:o="\n";break;case-3:o="\r\n";break;case-2:o=t?" ":"\t";break;case-1:if(!t&&i)continue;o=" ";break;default:o=String.fromCharCode(a)}i=-2===a,r.push(o)}return r.join("")}(h(e),t)},now:p,defineSkip:function(e){i[e.line]=e.column,v()},write:function(e){if(o=$h(o,e),d(),null!==o[o.length-1])return[];return y(t,0),c.events=sp(a,c.events,c),c.events}};let u=t.tokenize.call(c,l);return t.resolveAll&&a.push(t),c;function h(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;n===i?o=[e[n].slice(r,a)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),a>0&&o.push(e[i].slice(0,a)));return o}(o,e)}function p(){return Object.assign({},r)}function d(){let e;for(;r._index<o.length;){const t=o[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)f(t.charCodeAt(r._bufferIndex));else f(t)}}function f(e){u=u(e)}function m(e,t){t.restore()}function g(e,t){return function(n,i,a){let o,u,h,d;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function f(e){return o=e,u=0,0===e.length?a:m(e[u])}function m(e){return function(n){d=function(){const e=p(),t=c.previous,n=c.currentConstruct,i=c.events.length,a=Array.from(s);return{restore:o,from:i};function o(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=i,s=a,v()}}(),h=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return y();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,y)(n)}}function g(t){return e(h,d),i}function y(e){return d.restore(),++u<o.length?m(o[u]):a}}}function y(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&Bh(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function v(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}const ad={42:qp,43:qp,45:qp,48:qp,49:qp,50:qp,51:qp,52:qp,53:qp,54:qp,55:qp,56:qp,57:qp,62:pp},od={91:Ip},sd={[-2]:vp,[-1]:vp,32:vp},ld={35:Pp,42:Up,45:[Kp,Up],60:Rp,61:Kp,95:Up,96:yp,126:yp},cd={38:gp,92:dp},ud={[-5]:Yp,[-4]:Yp,[-3]:Yp,33:Gp,38:gp,42:lp,60:[up,Bp],91:Vp,92:[Np,dp],93:$p,95:lp,96:xp},hd={null:[lp,Zp]};var pd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",document:ad,contentInitial:od,flowInitial:sd,flow:ld,string:cd,text:ud,insideSpan:hd,attentionMarkers:{null:[42,95]},disable:{null:[]}});function dd(e={}){const t={defined:[],lazy:{},constructs:function(e){const t={};let n=-1;for(;++n<e.length;)Hh(t,e[n]);return t}([pd].concat(e.extensions||[])),content:n(rp),document:n(ip),flow:n(Qp),string:n(Jp),text:n(ed)};return t;function n(e){return function(n){return id(t,e,n)}}}const fd=/[\0\t\n\r]/g;function md(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535==(65535&n)||65534==(65535&n)||n>1114111?"�":String.fromCharCode(n)}const gd=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function yd(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return md(n.slice(t?2:1),t?16:10)}return mp(n)||e}const vd={}.hasOwnProperty,Ed=function(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e={}){const t=xd({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(re),autolinkProtocol:O,autolinkEmail:O,atxHeading:l(J),blockQuote:l(W),characterEscape:O,characterReference:O,codeFenced:l(X),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(X,c),codeText:l(K,c),codeTextData:O,data:O,codeFlowValue:O,definition:l(Q),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l(Z),hardBreakEscape:l(ee),hardBreakTrailing:l(ee),htmlFlow:l(te,c),htmlFlowData:O,htmlText:l(te,c),htmlTextData:O,image:l(ne),label:c,link:l(re),listItem:l(ae),listItemValue:m,listOrdered:l(ie,f),listUnordered:l(ie),paragraph:l(oe),reference:j,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(J),strong:l(se),thematicBreak:l(ce)},exit:{atxHeading:h(),atxHeadingSequence:w,autolink:h(),autolinkEmail:q,autolinkProtocol:U,blockQuote:h(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:V,characterReferenceMarkerNumeric:V,characterReferenceValue:Y,codeFenced:h(E),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:A,codeIndented:h(x),codeText:h(F),codeTextData:A,data:A,definition:h(),definitionDestinationString:S,definitionLabelString:b,definitionTitleString:C,emphasis:h(),hardBreakEscape:h(M),hardBreakTrailing:h(M),htmlFlow:h(N),htmlFlowData:A,htmlText:h(P),htmlTextData:A,image:h(R),label:B,labelText:D,lineEnding:I,link:h(L),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:G,resourceDestinationString:$,resourceTitleString:z,resource:H,setextHeading:h(_),setextHeadingLineSequence:k,setextHeadingText:T,strong:h(),thematicBreak:h()}},e.mdastExtensions||[]),n={};return r;function r(e){let n={type:"root",children:[]};const r=[],l=[],h={stack:[n],tokenStack:r,config:t,enter:u,exit:p,buffer:c,resume:d,setData:a,getData:o};let f=-1;for(;++f<e.length;)if("listOrdered"===e[f][1].type||"listUnordered"===e[f][1].type)if("enter"===e[f][0])l.push(f);else{f=i(e,l.pop(),f)}for(f=-1;++f<e.length;){const n=t[e[f][0]];vd.call(n,e[f][1].type)&&n[e[f][1].type].call(Object.assign({sliceSerialize:e[f][2].sliceSerialize},h),e[f][1])}if(r.length>0){const e=r[r.length-1];(e[1]||Cd).call(h,void 0,e[0])}for(n.position={start:s(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:s(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},f=-1;++f<t.transforms.length;)n=t.transforms[f](n)||n;return n}function i(e,t,n){let r,i,a,o,s=t-1,l=-1,c=!1;for(;++s<=n;){const t=e[s];if("listUnordered"===t[1].type||"listOrdered"===t[1].type||"blockQuote"===t[1].type?("enter"===t[0]?l++:l--,o=void 0):"lineEndingBlank"===t[1].type?"enter"===t[0]&&(!r||o||l||a||(a=s),o=void 0):"linePrefix"===t[1].type||"listItemValue"===t[1].type||"listItemMarker"===t[1].type||"listItemPrefix"===t[1].type||"listItemPrefixWhitespace"===t[1].type||(o=void 0),!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let o=s;for(i=void 0;o--;){const t=e[o];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=o}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}a&&(!i||a<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",r,t[2]]),s++,n++}"listItemPrefix"===t[1].type&&(r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start)},e.splice(s,0,["enter",r,t[2]]),s++,n++,a=void 0,o=!0)}}return e[t][1]._spread=c,n}function a(e,t){n[e]=t}function o(e){return n[e]}function s(e){return{line:e.line,column:e.column,offset:e.offset}}function l(e,t){return n;function n(n){u.call(this,e(n),n),t&&t.call(this,n)}}function c(){this.stack.push({type:"fragment",children:[]})}function u(e,t,n){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:s(t.start)},e}function h(e){return t;function t(t){e&&e.call(this,t),p.call(this,t)}}function p(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+eh({start:e.start,end:e.end})+"): it’s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||Cd).call(this,e,r[0])}return n.position.end=s(e.end),n}function d(){return function(e,t){var{includeImageAlt:n=!0}=t||{};return Rh(e,n)}(this.stack.pop())}function f(){a("expectingFirstListItemValue",!0)}function m(e){if(o("expectingFirstListItemValue")){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),a("expectingFirstListItemValue")}}function g(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function y(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function v(){o("flowCodeInside")||(this.buffer(),a("flowCodeInside",!0))}function E(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),a("flowCodeInside")}function x(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function b(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Ap(this.sliceSerialize(e)).toLowerCase()}function C(){const e=this.resume();this.stack[this.stack.length-1].title=e}function S(){const e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function T(){a("setextHeadingSlurpLineEnding",!0)}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function _(){a("setextHeadingSlurpLineEnding")}function O(e){const t=this.stack[this.stack.length-1];let n=t.children[t.children.length-1];n&&"text"===n.type||(n=le(),n.position={start:s(e.start)},t.children.push(n)),this.stack.push(n)}function A(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=s(e.end)}function I(e){const n=this.stack[this.stack.length-1];if(o("atHardBreak")){return n.children[n.children.length-1].position.end=s(e.end),void a("atHardBreak")}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(n.type)&&(O.call(this,e),A.call(this,e))}function M(){a("atHardBreak",!0)}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.resume();this.stack[this.stack.length-1].value=e}function F(){const e=this.resume();this.stack[this.stack.length-1].value=e}function L(){const e=this.stack[this.stack.length-1];o("inReference")?(e.type+="Reference",e.referenceType=o("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),a("referenceType")}function R(){const e=this.stack[this.stack.length-1];o("inReference")?(e.type+="Reference",e.referenceType=o("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),a("referenceType")}function D(e){const t=this.stack[this.stack.length-2],n=this.sliceSerialize(e);t.label=function(e){return e.replace(gd,yd)}(n),t.identifier=Ap(n).toLowerCase()}function B(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];a("inReference",!0),"link"===n.type?n.children=e.children:n.alt=t}function $(){const e=this.resume();this.stack[this.stack.length-1].url=e}function z(){const e=this.resume();this.stack[this.stack.length-1].title=e}function H(){a("inReference")}function j(){a("referenceType","collapsed")}function G(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Ap(this.sliceSerialize(e)).toLowerCase(),a("referenceType","full")}function V(e){a("characterReferenceType",e.type)}function Y(e){const t=this.sliceSerialize(e),n=o("characterReferenceType");let r;n?(r=md(t,"characterReferenceMarkerNumeric"===n?10:16),a("characterReferenceType")):r=mp(t);const i=this.stack.pop();i.value+=r,i.position.end=s(e.end)}function U(e){A.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function q(e){A.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function W(){return{type:"blockquote",children:[]}}function X(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Z(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:void 0,children:[]}}function ee(){return{type:"break"}}function te(){return{type:"html",value:""}}function ne(){return{type:"image",title:null,url:"",alt:null}}function re(){return{type:"link",title:null,url:"",children:[]}}function ie(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ae(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function oe(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function le(){return{type:"text",value:""}}function ce(){return{type:"thematicBreak"}}}(n)(function(e){for(;!bp(e););return e}(dd(n).document().write(function(){let e,t=1,n="",r=!0;return function(i,a,o){const s=[];let l,c,u,h,p;for(i=n+i.toString(a),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(fd.lastIndex=u,l=fd.exec(i),h=l&&void 0!==l.index?l.index:i.length,p=i.charCodeAt(h),!l){n=i.slice(u);break}if(10===p&&u===h&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),u<h&&(s.push(i.slice(u,h)),t+=h-u),p){case 0:s.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),s.push(-2);t++<c;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}u=h+1}return o&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))};function xd(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?xd(e,r):bd(e,r)}return e}function bd(e,t){let n;for(n in t)if(vd.call(t,n)){const r="canContainEols"===n||"transforms"===n,i=(vd.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),a=t[n];a&&(r?e[n]=[...i,...a]:Object.assign(i,a))}}function Cd(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+eh({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+eh({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+eh({start:t.start,end:t.end})+") is still open")}function Sd(e){Object.assign(this,{Parser:t=>{const n=this.data("settings");return Ed(t,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var wd=function(e,t,n){var r={type:String(e)};return null!=n||"string"!=typeof t&&!Array.isArray(t)?Object.assign(r,t):n=t,Array.isArray(n)?r.children=n:null!=n&&(r.value=String(n)),r};const Td={}.hasOwnProperty;function kd(e,t){const n=t.data||{};return"value"in t&&!(Td.call(n,"hName")||Td.call(n,"hProperties")||Td.call(n,"hChildren"))?e.augment(t,wd("text",t.value)):e(t,"div",Ad(e,t))}function _d(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return i=Td.call(e.handlers,r)?e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?Od:e.unknownHandler,("function"==typeof i?i:kd)(e,t,n)}function Od(e,t){return"children"in t?l(s({},t),{children:Ad(e,t)}):t}function Ad(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const a=_d(e,r[i],t);if(a){if(i&&"break"===r[i-1].type&&(Array.isArray(a)||"text"!==a.type||(a.value=a.value.replace(/^\s+/,"")),!Array.isArray(a)&&"element"===a.type)){const e=a.children[0];e&&"text"===e.type&&(e.value=e.value.replace(/^\s+/,""))}Array.isArray(a)?n.push(...a):n.push(a)}}}return n}const Id=function(e){if(null==e)return Nd;if("string"==typeof e)return function(e){return Md(t);function t(t){return t&&t.type===e}}(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Id(e[n]);return Md(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].call(this,...e))return!0;return!1}}(e):function(e){return Md(t);function t(t){let n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return Md(e);throw new Error("Expected function, string, or object as test")};function Md(e){return function(...t){return Boolean(e.call(this,...t))}}function Nd(){return!0}const Pd=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null);const i=Id(t),a=r?-1:1;!function e(o,s,l){const c="object"==typeof o&&null!==o?o:{};let u;"string"==typeof c.type&&(u="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0,Object.defineProperty(h,"name",{value:"node ("+c.type+(u?"<"+u+">":"")+")"}));return h;function h(){let c,u,h,p=[];if((!t||i(o,s,l[l.length-1]||null))&&(p=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)),false===p[0]))return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+a,h=l.concat(o);u>-1&&u<o.children.length;){if(c=e(o.children[u],u,h)(),false===c[0])return c;u="number"==typeof c[1]?c[1]:u+a}return p}}(e,null,[])()};const Fd=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),Pd(e,t,(function(e,t){const r=t[t.length-1];return n(e,r?r.children.indexOf(e):null,r)}),r)};var Ld=Dd("start"),Rd=Dd("end");function Dd(e){return function(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}const Bd=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null);var i=Id(t),a=r?-1:1;!function e(o,s,l){var c,u="object"==typeof o&&null!==o?o:{};"string"==typeof u.type&&(c="string"==typeof u.tagName?u.tagName:"string"==typeof u.name?u.name:void 0,Object.defineProperty(h,"name",{value:"node ("+u.type+(c?"<"+c+">":"")+")"}));return h;function h(){var c,u,h,p=[];if((!t||i(o,s,l[l.length-1]||null))&&false===(p=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)))[0])return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+a,h=l.concat(o);u>-1&&u<o.children.length;){if(false===(c=e(o.children[u],u,h)())[0])return c;u="number"==typeof c[1]?c[1]:u+a}return p}}(e,null,[])()};const $d={}.hasOwnProperty;function zd(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");var n,r,i;return r=function(e){const n=Hd(e.identifier);n&&!$d.call(t,n)&&(t[n]=e)},"function"==typeof(n="definition")&&"function"!=typeof r&&(i=r,r=n,n=null),Bd(e,n,(function(e,t){var n=t[t.length-1];return r(e,n?n.children.indexOf(e):null,n)}),i),function(e){const n=Hd(e);return n&&$d.call(t,n)?t[n]:null}}function Hd(e){return String(e||"").toUpperCase()}function jd(e,t){return e(t,"hr")}function Gd(e,t){const n=[];let r=-1;for(t&&n.push(wd("text","\n"));++r<e.length;)r&&n.push(wd("text","\n")),n.push(e[r]);return t&&e.length>0&&n.push(wd("text","\n")),n}function Vd(e,t){const n={},r=t.ordered?"ol":"ul",i=Ad(e,t);let a=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++a<i.length;){const e=i[a];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,Gd(i,!0))}function Yd(e,t){const n=e.footnoteOrder,r=String(t.identifier),i=n.indexOf(r),a=String(-1===i?n.push(r):i+1);return e(t,"a",{href:"#fn"+a,className:["footnote-ref"],id:"fnref"+a,role:"doc-noteref"},[e(t.position,"sup",[wd("text",a)])])}var Ud={};function qd(e,t,n){var r,i,a,o,s,l="";for("string"!=typeof t&&(n=t,t=qd.defaultChars),void 0===n&&(n=!0),s=function(e){var t,n,r=Ud[e];if(r)return r;for(r=Ud[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}(t),r=0,i=e.length;r<i;r++)if(a=e.charCodeAt(r),n&&37===a&&r+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3)))l+=e.slice(r,r+3),r+=2;else if(a<128)l+=s[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&r+1<i&&(o=e.charCodeAt(r+1))>=56320&&o<=57343){l+=encodeURIComponent(e[r]+e[r+1]),r++;continue}l+="%EF%BF%BD"}else l+=encodeURIComponent(e[r]);return l}qd.defaultChars=";/?:@&=+$,-_.!~*'()#",qd.componentChars="-_.!~*'()";var Wd=qd;function Xd(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return wd("text","!["+t.alt+r);const i=Ad(e,t),a=i[0];a&&"text"===a.type?a.value="["+a.value:i.unshift(wd("text","["));const o=i[i.length-1];return o&&"text"===o.type?o.value+=r:i.push(wd("text",r)),i}function Kd(e){const t=e.spread;return null==t?e.children.length>1:t}const Qd={blockquote:function(e,t){return e(t,"blockquote",Gd(Ad(e,t),!0))},break:function(e,t){return[e(t,"br"),wd("text","\n")]},code:function(e,t){const n=t.value?t.value+"\n":"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const a=e(t,"code",i,[wd("text",n)]);return t.meta&&(a.data={meta:t.meta}),e(t.position,"pre",[a])},delete:function(e,t){return e(t,"del",Ad(e,t))},emphasis:function(e,t){return e(t,"em",Ad(e,t))},footnoteReference:Yd,footnote:function(e,t){const n=e.footnoteById,r=e.footnoteOrder;let i=1;for(;i in n;)i++;const a=String(i);return r.push(a),n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},Yd(e,{type:"footnoteReference",identifier:a,position:t.position})},heading:function(e,t){return e(t,"h"+t.depth,Ad(e,t))},html:function(e,t){return e.dangerous?e.augment(t,wd("raw",t.value)):null},imageReference:function(e,t){const n=e.definition(t.identifier);if(!n)return Xd(e,t);const r={src:Wd(n.url||""),alt:t.alt};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"img",r)},image:function(e,t){const n={src:Wd(t.url),alt:t.alt};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"img",n)},inlineCode:function(e,t){return e(t,"code",[wd("text",t.value.replace(/\r?\n|\r/g," "))])},linkReference:function(e,t){const n=e.definition(t.identifier);if(!n)return Xd(e,t);const r={href:Wd(n.url||"")};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"a",r,Ad(e,t))},link:function(e,t){const n={href:Wd(t.url)};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"a",n,Ad(e,t))},listItem:function(e,t,n){const r=Ad(e,t),i=n?function(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Kd(n[r]);return Boolean(t)}(n):Kd(t),a={},o=[];if("boolean"==typeof t.checked){let n;r[0]&&"element"===r[0].type&&"p"===r[0].tagName?n=r[0]:(n=e(null,"p",[]),r.unshift(n)),n.children.length>0&&n.children.unshift(wd("text"," ")),n.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&o.push(wd("text","\n")),"element"!==e.type||"p"!==e.tagName||i?o.push(e):o.push(...e.children)}const l=r[r.length-1];return!l||!i&&"tagName"in l&&"p"===l.tagName||o.push(wd("text","\n")),e(t,"li",a,o)},list:Vd,paragraph:function(e,t){return e(t,"p",Ad(e,t))},root:function(e,t){return e.augment(t,wd("root",Gd(Ad(e,t))))},strong:function(e,t){return e(t,"strong",Ad(e,t))},table:function(e,t){const n=t.children;let r=-1;const i=t.align||[],a=[];for(;++r<n.length;){const o=n[r].children,s=0===r?"th":"td";let l=t.align?i.length:o.length;const c=[];for(;l--;){const t=o[l];c[l]=e(t,s,{align:i[l]},t?Ad(e,t):[])}a[r]=e(n[r],"tr",Gd(c,!0))}return e(t,"table",Gd([e(a[0].position,"thead",Gd([a[0]],!0))].concat(a[1]?e({start:Ld(a[1]),end:Rd(a[a.length-1])},"tbody",Gd(a.slice(1),!0)):[]),!0))},text:function(e,t){return e.augment(t,wd("text",String(t.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))},thematicBreak:jd,toml:Zd,yaml:Zd,definition:Zd,footnoteDefinition:Zd};function Zd(){return null}const Jd={}.hasOwnProperty;function ef(e,t){const n=function(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.definition=zd(e),o.footnoteById=i,o.footnoteOrder=[],o.augment=a,o.handlers=s(s({},Qd),n.handlers),o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,Fd(e,"footnoteDefinition",(e=>{const t=String(e.identifier).toUpperCase();Jd.call(i,t)||(i[t]=e)})),o;function a(e,t){if(e&&"data"in e&&e.data){const n=e.data;n.hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=s(s({},t.properties),n.hProperties)),"children"in t&&t.children&&n.hChildren&&(t.children=n.hChildren)}if(e){const r="type"in e?e:{position:e};(n=r)&&n.position&&n.position.start&&n.position.start.line&&n.position.start.column&&n.position.end&&n.position.end.line&&n.position.end.column&&(t.position={start:Ld(r),end:Rd(r)})}var n;return t}function o(e,t,n,r){return Array.isArray(n)&&(r=n,n={}),a(e,{type:"element",tagName:t,properties:n||{},children:r||[]})}}(e,t),r=_d(n,e,null),i=function(e){const t=e.footnoteById,n=e.footnoteOrder;let r=-1;const i=[];for(;++r<n.length;){const e=t[n[r].toUpperCase()];if(!e)continue;const a=String(r+1),o=[...e.children],s={type:"link",url:"#fnref"+a,data:{hProperties:{className:["footnote-back"],role:"doc-backlink"}},children:[{type:"text",value:"↩"}]},l=o[o.length-1];l&&"paragraph"===l.type?l.children.push(s):o.push(s),i.push({type:"listItem",data:{hProperties:{id:"fn"+a,role:"doc-endnote"}},children:o,position:e.position})}return 0===i.length?null:e(null,"section",{className:["footnotes"],role:"doc-endnotes"},Gd([jd(e),Vd(e,{type:"list",ordered:!0,children:i})],!0))}(n);return i&&r.children.push(wd("text","\n"),i),Array.isArray(r)?{type:"root",children:r}:r}const tf=function(e,t){return e&&"run"in e?function(e,t){return(n,r,i)=>{e.run(ef(n,t),r,(e=>{i(e)}))}}(e,t):function(e){return t=>ef(t,e)}(e)};class nf{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function rf(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new nf(n,r,t)}function af(e){return e.toLowerCase()}nf.prototype.property={},nf.prototype.normal={},nf.prototype.space=null;class of{constructor(e,t){this.property=e,this.attribute=t}}of.prototype.space=null,of.prototype.boolean=!1,of.prototype.booleanish=!1,of.prototype.overloadedBoolean=!1,of.prototype.number=!1,of.prototype.commaSeparated=!1,of.prototype.spaceSeparated=!1,of.prototype.commaOrSpaceSeparated=!1,of.prototype.mustUseProperty=!1,of.prototype.defined=!1;let sf=0;const lf=mf(),cf=mf(),uf=mf(),hf=mf(),pf=mf(),df=mf(),ff=mf();function mf(){return 2**++sf}var gf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",boolean:lf,booleanish:cf,overloadedBoolean:uf,number:hf,spaceSeparated:pf,commaSeparated:df,commaOrSpaceSeparated:ff});const yf=Object.keys(gf);class vf extends of{constructor(e,t,n,r){let i=-1;if(super(e,t),Ef(this,"space",r),"number"==typeof n)for(;++i<yf.length;){const e=yf[i];Ef(this,yf[i],(n&gf[e])===gf[e])}}}function Ef(e,t,n){n&&(e[t]=n)}vf.prototype.defined=!0;const xf={}.hasOwnProperty;function bf(e){const t={},n={};let r;for(r in e.properties)if(xf.call(e.properties,r)){const i=e.properties[r],a=new vf(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[af(r)]=r,n[af(a.attribute)]=r}return new nf(t,n,e.space)}const Cf=bf({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Sf=bf({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function wf(e,t){return t in e?e[t]:t}function Tf(e,t){return wf(e,t.toLowerCase())}const kf=bf({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Tf,properties:{xmlns:null,xmlnsXLink:null}}),_f=bf({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:cf,ariaAutoComplete:null,ariaBusy:cf,ariaChecked:cf,ariaColCount:hf,ariaColIndex:hf,ariaColSpan:hf,ariaControls:pf,ariaCurrent:null,ariaDescribedBy:pf,ariaDetails:null,ariaDisabled:cf,ariaDropEffect:pf,ariaErrorMessage:null,ariaExpanded:cf,ariaFlowTo:pf,ariaGrabbed:cf,ariaHasPopup:null,ariaHidden:cf,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pf,ariaLevel:hf,ariaLive:null,ariaModal:cf,ariaMultiLine:cf,ariaMultiSelectable:cf,ariaOrientation:null,ariaOwns:pf,ariaPlaceholder:null,ariaPosInSet:hf,ariaPressed:cf,ariaReadOnly:cf,ariaRelevant:null,ariaRequired:cf,ariaRoleDescription:pf,ariaRowCount:hf,ariaRowIndex:hf,ariaRowSpan:hf,ariaSelected:cf,ariaSetSize:hf,ariaSort:null,ariaValueMax:hf,ariaValueMin:hf,ariaValueNow:hf,ariaValueText:null,role:null}}),Of=bf({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Tf,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:df,acceptCharset:pf,accessKey:pf,action:null,allow:null,allowFullScreen:lf,allowPaymentRequest:lf,allowUserMedia:lf,alt:null,as:null,async:lf,autoCapitalize:null,autoComplete:pf,autoFocus:lf,autoPlay:lf,capture:lf,charSet:null,checked:lf,cite:null,className:pf,cols:hf,colSpan:null,content:null,contentEditable:cf,controls:lf,controlsList:pf,coords:hf|df,crossOrigin:null,data:null,dateTime:null,decoding:null,default:lf,defer:lf,dir:null,dirName:null,disabled:lf,download:uf,draggable:cf,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:lf,formTarget:null,headers:pf,height:hf,hidden:lf,high:hf,href:null,hrefLang:null,htmlFor:pf,httpEquiv:pf,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:lf,itemId:null,itemProp:pf,itemRef:pf,itemScope:lf,itemType:pf,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:lf,low:hf,manifest:null,max:null,maxLength:hf,media:null,method:null,min:null,minLength:hf,multiple:lf,muted:lf,name:null,nonce:null,noModule:lf,noValidate:lf,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:lf,optimum:hf,pattern:null,ping:pf,placeholder:null,playsInline:lf,poster:null,preload:null,readOnly:lf,referrerPolicy:null,rel:pf,required:lf,reversed:lf,rows:hf,rowSpan:hf,sandbox:pf,scope:null,scoped:lf,seamless:lf,selected:lf,shape:null,size:hf,sizes:null,slot:null,span:hf,spellCheck:cf,src:null,srcDoc:null,srcLang:null,srcSet:null,start:hf,step:null,style:null,tabIndex:hf,target:null,title:null,translate:null,type:null,typeMustMatch:lf,useMap:null,value:cf,width:hf,wrap:null,align:null,aLink:null,archive:pf,axis:null,background:null,bgColor:null,border:hf,borderColor:null,bottomMargin:hf,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:lf,declare:lf,event:null,face:null,frame:null,frameBorder:null,hSpace:hf,leftMargin:hf,link:null,longDesc:null,lowSrc:null,marginHeight:hf,marginWidth:hf,noResize:lf,noHref:lf,noShade:lf,noWrap:lf,object:null,profile:null,prompt:null,rev:null,rightMargin:hf,rules:null,scheme:null,scrolling:cf,standby:null,summary:null,text:null,topMargin:hf,valueType:null,version:null,vAlign:null,vLink:null,vSpace:hf,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:lf,disableRemotePlayback:lf,prefix:null,property:null,results:hf,security:null,unselectable:null}}),Af=bf({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:wf,properties:{about:ff,accentHeight:hf,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:hf,amplitude:hf,arabicForm:null,ascent:hf,attributeName:null,attributeType:null,azimuth:hf,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:hf,by:null,calcMode:null,capHeight:hf,className:pf,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:hf,diffuseConstant:hf,direction:null,display:null,dur:null,divisor:hf,dominantBaseline:null,download:lf,dx:null,dy:null,edgeMode:null,editable:null,elevation:hf,enableBackground:null,end:null,event:null,exponent:hf,externalResourcesRequired:null,fill:null,fillOpacity:hf,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:df,g2:df,glyphName:df,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:hf,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:hf,horizOriginX:hf,horizOriginY:hf,id:null,ideographic:hf,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:hf,k:hf,k1:hf,k2:hf,k3:hf,k4:hf,kernelMatrix:ff,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:hf,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:hf,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:hf,overlineThickness:hf,paintOrder:null,panose1:null,path:null,pathLength:hf,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pf,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:hf,pointsAtY:hf,pointsAtZ:hf,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ff,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ff,rev:ff,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ff,requiredFeatures:ff,requiredFonts:ff,requiredFormats:ff,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:hf,specularExponent:hf,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:hf,strikethroughThickness:hf,string:null,stroke:null,strokeDashArray:ff,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:hf,strokeOpacity:hf,strokeWidth:null,style:null,surfaceScale:hf,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ff,tabIndex:hf,tableValues:null,target:null,targetX:hf,targetY:hf,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ff,to:null,transform:null,u1:null,u2:null,underlinePosition:hf,underlineThickness:hf,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:hf,values:null,vAlphabetic:hf,vMathematical:hf,vectorEffect:null,vHanging:hf,vIdeographic:hf,version:null,vertAdvY:hf,vertOriginX:hf,vertOriginY:hf,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:hf,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),If=/^data[-\w.:]+$/i,Mf=/-[a-z]/g,Nf=/[A-Z]/g;function Pf(e,t){const n=af(t);let r=t,i=of;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&If.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Mf,Lf);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Mf.test(e)){let n=e.replace(Nf,Ff);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=vf}return new i(r,t)}function Ff(e){return"-"+e.toLowerCase()}function Lf(e){return e.charAt(1).toUpperCase()}const Rf={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Df=rf([Sf,Cf,kf,_f,Of],"html"),Bf=rf([Sf,Cf,kf,_f,Af],"svg");function $f(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{Fd(t,"element",((t,n,r)=>{const i=r;let a;if(e.allowedElements?a=!e.allowedElements.includes(t.tagName):e.disallowedElements&&(a=e.disallowedElements.includes(t.tagName)),!a&&e.allowElement&&"number"==typeof n&&(a=!e.allowElement(t,n,i)),a&&"number"==typeof n)return e.unwrapDisallowed&&t.children?i.children.splice(n,1,...t.children):i.children.splice(n,1),n}))}}var zf={exports:{}},Hf={},jf=60103,Gf=60106,Vf=60107,Yf=60108,Uf=60114,qf=60109,Wf=60110,Xf=60112,Kf=60113,Qf=60120,Zf=60115,Jf=60116,em=60121,tm=60122,nm=60117,rm=60129,im=60131;if("function"==typeof Symbol&&Symbol.for){var am=Symbol.for;jf=am("react.element"),Gf=am("react.portal"),Vf=am("react.fragment"),Yf=am("react.strict_mode"),Uf=am("react.profiler"),qf=am("react.provider"),Wf=am("react.context"),Xf=am("react.forward_ref"),Kf=am("react.suspense"),Qf=am("react.suspense_list"),Zf=am("react.memo"),Jf=am("react.lazy"),em=am("react.block"),tm=am("react.server.block"),nm=am("react.fundamental"),rm=am("react.debug_trace_mode"),im=am("react.legacy_hidden")}function om(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case jf:switch(e=e.type){case Vf:case Uf:case Yf:case Kf:case Qf:return e;default:switch(e=e&&e.$$typeof){case Wf:case Xf:case Jf:case Zf:case qf:return e;default:return t}}case Gf:return t}}}var sm=qf,lm=jf,cm=Xf,um=Vf,hm=Jf,pm=Zf,dm=Gf,fm=Uf,mm=Yf,gm=Kf;Hf.ContextConsumer=Wf,Hf.ContextProvider=sm,Hf.Element=lm,Hf.ForwardRef=cm,Hf.Fragment=um,Hf.Lazy=hm,Hf.Memo=pm,Hf.Portal=dm,Hf.Profiler=fm,Hf.StrictMode=mm,Hf.Suspense=gm,Hf.isAsyncMode=function(){return!1},Hf.isConcurrentMode=function(){return!1},Hf.isContextConsumer=function(e){return om(e)===Wf},Hf.isContextProvider=function(e){return om(e)===qf},Hf.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===jf},Hf.isForwardRef=function(e){return om(e)===Xf},Hf.isFragment=function(e){return om(e)===Vf},Hf.isLazy=function(e){return om(e)===Jf},Hf.isMemo=function(e){return om(e)===Zf},Hf.isPortal=function(e){return om(e)===Gf},Hf.isProfiler=function(e){return om(e)===Uf},Hf.isStrictMode=function(e){return om(e)===Yf},Hf.isSuspense=function(e){return om(e)===Kf},Hf.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Vf||e===Uf||e===rm||e===Yf||e===Kf||e===Qf||e===im||"object"==typeof e&&null!==e&&(e.$$typeof===Jf||e.$$typeof===Zf||e.$$typeof===qf||e.$$typeof===Wf||e.$$typeof===Xf||e.$$typeof===nm||e.$$typeof===em||e[0]===tm)},Hf.typeOf=om,zf.exports=Hf;var ym=zf.exports;function vm(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Em(e){return e.join(" ").trim()}function xm(e){for(var t,n,r=[],i=String(e||""),a=i.indexOf(","),o=0;!t;)-1===a&&(a=i.length,t=!0),!(n=i.slice(o,a).trim())&&t||r.push(n),o=a+1,a=i.indexOf(",",o);return r}function bm(e,t){var n=t||{};return""===e[e.length-1]&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}var Cm=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Sm=/\n/g,wm=/^\s*/,Tm=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,km=/^:\s*/,_m=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Om=/^[;\s]*/,Am=/^\s+|\s+$/g;function Im(e){return e?e.replace(Am,""):""}var Mm=function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(e){var t=e.match(Sm);t&&(n+=t.length);var i=e.lastIndexOf("\n");r=~i?e.length-i:r+e.length}function a(){var e={line:n,column:r};return function(t){return t.position=new o(e),c(),t}}function o(e){this.start=e,this.end={line:n,column:r},this.source=t.source}function s(i){var a=new Error(t.source+":"+n+":"+r+": "+i);if(a.reason=i,a.filename=t.source,a.line=n,a.column=r,a.source=e,!t.silent)throw a}function l(t){var n=t.exec(e);if(n){var r=n[0];return i(r),e=e.slice(r.length),n}}function c(){l(wm)}function u(e){var t;for(e=e||[];t=h();)!1!==t&&e.push(t);return e}function h(){var t=a();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;""!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return s("End of comment missing");var o=e.slice(2,n-2);return r+=2,i(o),e=e.slice(n),r+=2,t({type:"comment",comment:o})}}function p(){var e=a(),t=l(Tm);if(t){if(h(),!l(km))return s("property missing ':'");var n=l(_m),r=e({type:"declaration",property:Im(t[0].replace(Cm,"")),value:n?Im(n[0].replace(Cm,"")):""});return l(Om),r}}return o.prototype.content=e,c(),function(){var e,t=[];for(u(t);e=p();)!1!==e&&(t.push(e),u(t));return t}()};var Nm=function(e,t){var n,r=null;if(!e||"string"!=typeof e)return r;for(var i,a,o=Mm(e),s="function"==typeof t,l=0,c=o.length;l<c;l++)i=(n=o[l]).property,a=n.value,s?t(i,a,n):a&&(r||(r={}),r[i]=a);return r};const Pm={}.hasOwnProperty,Fm=new Set(["table","thead","tbody","tfoot","tr"]);function Lm(e,t){const n=[];let r,i=-1;for(;++i<t.children.length;)r=t.children[i],"element"===r.type?n.push(Rm(e,r,i,t)):"text"===r.type?"element"===t.type&&Fm.has(t.tagName)&&(o=void 0,"string"==typeof(o=(a=r)&&"object"==typeof a&&"text"===a.type?a.value||"":a)&&""===o.replace(/[ \t\n\f\r]/g,""))||n.push(r.value):"raw"!==r.type||e.options.skipHtml||n.push(r.value);var a,o;return n}function Rm(e,t,n,r){const i=e.options,a=e.schema,o=t.tagName,s={};let l,c=a;if("html"===a.space&&"svg"===o&&(c=Bf,e.schema=c),t.properties)for(l in t.properties)Pm.call(t.properties,l)&&Bm(s,l,t.properties[l],e);"ol"!==o&&"ul"!==o||e.listDepth++;const u=Lm(e,t);"ol"!==o&&"ul"!==o||e.listDepth--,e.schema=a;const h=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},p=i.components&&Pm.call(i.components,o)?i.components[o]:o,f="string"==typeof p||p===d.Fragment;if(!ym.isValidElementType(p))throw new TypeError(`Component for name \`${o}\` not defined or is not renderable`);if(s.key=[o,h.start.line,h.start.column,n].join("-"),"a"===o&&i.linkTarget&&(s.target="function"==typeof i.linkTarget?i.linkTarget(String(s.href||""),t.children,"string"==typeof s.title?s.title:null):i.linkTarget),"a"===o&&i.transformLinkUri&&(s.href=i.transformLinkUri(String(s.href||""),t.children,"string"==typeof s.title?s.title:null)),f||"code"!==o||"element"!==r.type||"pre"===r.tagName||(s.inline=!0),f||"h1"!==o&&"h2"!==o&&"h3"!==o&&"h4"!==o&&"h5"!==o&&"h6"!==o||(s.level=Number.parseInt(o.charAt(1),10)),"img"===o&&i.transformImageUri&&(s.src=i.transformImageUri(String(s.src||""),String(s.alt||""),"string"==typeof s.title?s.title:null)),!f&&"li"===o&&"element"===r.type){const e=function(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if("element"===n.type&&"input"===n.tagName)return n}return null}(t);s.checked=e&&e.properties?Boolean(e.properties.checked):null,s.index=Dm(r,t),s.ordered="ol"===r.tagName}var m;return f||"ol"!==o&&"ul"!==o||(s.ordered="ol"===o,s.depth=e.listDepth),"td"!==o&&"th"!==o||(s.align&&(s.style||(s.style={}),s.style.textAlign=s.align,delete s.align),f||(s.isHeader="th"===o)),f||"tr"!==o||"element"!==r.type||(s.isHeader=Boolean("thead"===r.tagName)),i.sourcePos&&(s["data-sourcepos"]=[(m=h).start.line,":",m.start.column,"-",m.end.line,":",m.end.column].map((e=>String(e))).join("")),!f&&i.rawSourcePos&&(s.sourcePosition=t.position),!f&&i.includeElementIndex&&(s.index=Dm(r,t),s.siblingCount=Dm(r)),f||(s.node=t),u.length>0?d.createElement(p,s,u):d.createElement(p,s)}function Dm(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)"element"===e.children[n].type&&r++;return r}function Bm(e,t,n,r){const i=Pf(r.schema,t);let a=n;null!=a&&a==a&&(Array.isArray(a)&&(a=i.commaSeparated?bm(a):Em(a)),"style"===i.property&&"string"==typeof a&&(a=function(e){const t={};try{Nm(e,n)}catch(uu){}return t;function n(e,n){const r="-ms-"===e.slice(0,4)?`ms-${e.slice(4)}`:e;t[r.replace(/-([a-z])/g,$m)]=n}}(a)),i.space&&i.property?e[Pm.call(Rf,i.property)?Rf[i.property]:i.property]=a:i.attribute&&(e[i.attribute]=a))}function $m(e,t){return t.toUpperCase()}const zm={}.hasOwnProperty,Hm={renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function jm(e){for(const a in Hm)if(zm.call(Hm,a)&&zm.call(e,a)){const e=Hm[a];console.warn(`[react-markdown] Warning: please ${e.to?`use \`${e.to}\` instead of`:"remove"} \`${a}\` (see <https://github.com/remarkjs/react-markdown/blob/main/changelog.md#${e.id}> for more info)`),delete Hm[a]}const t=_h().use(Sd).use(e.remarkPlugins||e.plugins||[]).use(tf,{allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use($f,e),n=new hh;"string"==typeof e.children?n.value=e.children:void 0!==e.children&&null!==e.children&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if("root"!==r.type)throw new TypeError("Expected a `root` node");let i=d.createElement(d.Fragment,{},Lm({options:e,schema:Df,listDepth:0},r));return e.className&&(i=d.createElement("div",{className:e.className},i)),i}jm.defaultProps={transformLinkUri:function(e){const t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;const r=t.indexOf(":");if(-1===r)return t;let i=-1;for(;++i<Ju.length;){const e=Ju[i];if(r===e.length&&t.slice(0,e.length).toLowerCase()===e)return t}return i=t.indexOf("?"),-1!==i&&r>i?t:(i=t.indexOf("#"),-1!==i&&r>i?t:"javascript:void(0)")}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */},jm.propTypes={children:ee.string,className:ee.string,allowElement:ee.func,allowedElements:ee.arrayOf(ee.string),disallowedElements:ee.arrayOf(ee.string),unwrapDisallowed:ee.bool,remarkPlugins:ee.arrayOf(ee.oneOfType([ee.object,ee.func,ee.arrayOf(ee.oneOfType([ee.object,ee.func]))])),rehypePlugins:ee.arrayOf(ee.oneOfType([ee.object,ee.func,ee.arrayOf(ee.oneOfType([ee.object,ee.func]))])),sourcePos:ee.bool,rawSourcePos:ee.bool,skipHtml:ee.bool,includeElementIndex:ee.bool,transformLinkUri:ee.oneOfType([ee.func,ee.bool]),linkTarget:ee.oneOfType([ee.func,ee.string]),transformImageUri:ee.func,components:ee.object};var Gm=[].splice;var Vm={}.hasOwnProperty,Ym=function(e,t,n,r){var i,a=e.length,o=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),Gm.apply(e,i);else for(n&&Gm.apply(e,[t,n]);o<r.length;)(i=r.slice(o,o+1e4)).unshift(t,0),Gm.apply(e,i),o+=1e4,t+=1e4},Um=function(e){return null==e?[]:"length"in e?e:[e]};function qm(e,t){var n,r,i,a;for(n in t)for(a in r=Vm.call(e,n)?e[n]:e[n]={},i=t[n])r[a]=Wm(Um(i[a]),Vm.call(r,a)?r[a]:[])}function Wm(e,t){for(var n=-1,r=[];++n<e.length;)("after"===e[n].add?t:r).push(e[n]);return Ym(t,0,0,r),t}var Xm=function(e){for(var t={},n=-1;++n<e.length;)qm(t,e[n]);return t},Km={},Qm=String.fromCharCode;var Zm=function(e){return function(t){return e.test(Qm(t))}},Jm=Zm(/[A-Za-z]/),eg=Zm(/[\dA-Za-z]/);var tg=function(e){return e<32||127===e};var ng=function(e){return e<-2},rg=Zm(/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/),ig=Zm(/\s/),ag=Jm,og=eg,sg=tg,lg=ng,cg=rg,ug=ig,hg={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return 87===t||t-32==87?(e.consume(t),i):n(t)}function i(t){return 87===t||t-32==87?(e.consume(t),a):n(t)}function a(t){return 46===t?(e.consume(t),o):n(t)}function o(e){return null===e||lg(e)?n(e):t(e)}},partial:!0},pg={tokenize:function(e,t,n){var r,i;return a;function a(t){return 38===t?e.check(mg,s,o)(t):46===t||95===t?e.check(fg,s,o)(t):sg(t)||ug(t)||45!==t&&cg(t)?s(t):(e.consume(t),a)}function o(t){return 46===t?(i=r,r=void 0,e.consume(t),a):(95===t&&(r=!0),e.consume(t),a)}function s(e){return i||r?n(e):t(e)}},partial:!0},dg={tokenize:function(e,t){var n=0;return r;function r(o){return 38===o?e.check(mg,t,i)(o):(40===o&&n++,41===o?e.check(fg,a,i)(o):Cg(o)?t(o):bg(o)?e.check(fg,t,i)(o):(e.consume(o),r))}function i(t){return e.consume(t),r}function a(e){return--n<0?t(e):i(e)}},partial:!0},fg={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(i){return bg(i)?(e.consume(i),r):Cg(i)?t(i):n(i)}},partial:!0},mg={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return ag(t)?(e.consume(t),r):59===t?(e.consume(t),i):n(t)}function i(e){return Cg(e)?t(e):n(e)}},partial:!0},gg={tokenize:function(e,t,n){var r=this;return function(t){if(87!==t&&t-32!=87||!wg(r.previous)||_g(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(hg,e.attempt(pg,e.attempt(dg,i),n),n)(t)};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:wg},yg={tokenize:function(e,t,n){var r=this;return function(t){if(72!==t&&t-32!=72||!Tg(r.previous)||_g(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(t),i};function i(t){return 84===t||t-32==84?(e.consume(t),a):n(t)}function a(t){return 84===t||t-32==84?(e.consume(t),o):n(t)}function o(t){return 80===t||t-32==80?(e.consume(t),s):n(t)}function s(t){return 83===t||t-32==83?(e.consume(t),l):l(t)}function l(t){return 58===t?(e.consume(t),c):n(t)}function c(t){return 47===t?(e.consume(t),u):n(t)}function u(t){return 47===t?(e.consume(t),h):n(t)}function h(t){return sg(t)||ug(t)||cg(t)?n(t):e.attempt(pg,e.attempt(dg,p),n)(t)}function p(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:Tg},vg={tokenize:function(e,t,n){var r,i=this;return function(t){if(!Sg(t)||!kg(i.previous)||_g(i.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return Sg(t)?(e.consume(t),a):64===t?(e.consume(t),o):n(t)}function o(t){return 46===t?e.check(fg,u,s)(t):45===t||95===t?e.check(fg,n,l)(t):og(t)?(e.consume(t),o):u(t)}function s(t){return e.consume(t),r=!0,o}function l(t){return e.consume(t),c}function c(t){return 46===t?e.check(fg,n,s)(t):o(t)}function u(i){return r?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(i)):n(i)}},previous:kg},Eg={};Km.text=Eg;for(var xg=48;xg<123;)Eg[xg]=vg,58===++xg?xg=65:91===xg&&(xg=97);function bg(e){return 33===e||34===e||39===e||41===e||42===e||44===e||46===e||58===e||59===e||60===e||63===e||95===e||126===e}function Cg(e){return null===e||e<0||32===e||60===e}function Sg(e){return 43===e||45===e||46===e||95===e||og(e)}function wg(e){return null===e||e<0||32===e||40===e||42===e||95===e||126===e}function Tg(e){return null===e||!ag(e)}function kg(e){return 47!==e&&Tg(e)}function _g(e){for(var t=e.length;t--;)if(("labelLink"===e[t][1].type||"labelImage"===e[t][1].type)&&!e[t][1]._balanced)return!0}Eg[43]=vg,Eg[45]=vg,Eg[46]=vg,Eg[95]=vg,Eg[72]=[vg,yg],Eg[104]=[vg,yg],Eg[87]=[vg,gg],Eg[119]=[vg,gg];var Og=Km;var Ag=function(e){return e<0||32===e},Ig=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Mg=String.fromCharCode;var Ng=function(e){return function(t){return e.test(Mg(t))}},Pg=Ng(Ig),Fg=Ng(/\s/),Lg=Ag,Rg=Pg,Dg=Fg;var Bg=function(e){return null===e||Lg(e)||Dg(e)?1:Rg(e)?2:void 0},$g=[].splice;var zg=function(e,t,n,r){var i,a=e.length,o=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),$g.apply(e,i);else for(n&&$g.apply(e,[t,n]);o<r.length;)(i=r.slice(o,o+1e4)).unshift(t,0),$g.apply(e,i),o+=1e4,t+=1e4};var Hg=function(e,t,n){for(var r,i=[],a=-1;++a<e.length;)(r=e[a].resolveAll)&&i.indexOf(r)<0&&(t=r(t,n),i.push(r));return t},jg=Object.assign;var Gg=function(e){var t=(e||{}).singleTilde,n={tokenize:function(e,n,r){var i=this.previous,a=this.events,o=0;return s;function s(t){return 126!==t||126===i&&"characterEscape"!==a[a.length-1][1].type?r(t):(e.enter("strikethroughSequenceTemporary"),l(t))}function l(a){var s,c,u=Vg(i);return 126===a?o>1?r(a):(e.consume(a),o++,l):o<2&&!t?r(a):(s=e.exit("strikethroughSequenceTemporary"),c=Vg(a),s._open=!c||2===c&&u,s._close=!u||2===u&&c,n(a))}},resolveAll:function(e,t){var n,r,i,a,o=-1;for(;++o<e.length;)if("enter"===e[o][0]&&"strikethroughSequenceTemporary"===e[o][1].type&&e[o][1]._close)for(i=o;i--;)if("exit"===e[i][0]&&"strikethroughSequenceTemporary"===e[i][1].type&&e[i][1]._open&&e[o][1].end.offset-e[o][1].start.offset==e[i][1].end.offset-e[i][1].start.offset){e[o][1].type="strikethroughSequence",e[i][1].type="strikethroughSequence",n={type:"strikethrough",start:qg(e[i][1].start),end:qg(e[o][1].end)},r={type:"strikethroughText",start:qg(e[i][1].end),end:qg(e[o][1].start)},a=[["enter",n,t],["enter",e[i][1],t],["exit",e[i][1],t],["enter",r,t]],Yg(a,a.length,0,Ug(t.parser.constructs.insideSpan.null,e.slice(i+1,o),t)),Yg(a,a.length,0,[["exit",r,t],["enter",e[o][1],t],["exit",e[o][1],t],["exit",n,t]]),Yg(e,i-1,o-i+3,a),o=i+a.length-2;break}return function(e){var t=-1,n=e.length;for(;++t<n;)"strikethroughSequenceTemporary"===e[t][1].type&&(e[t][1].type="data");return e}(e)}};null==t&&(t=!0);return{text:{126:n},insideSpan:{null:n}}},Vg=Bg,Yg=zg,Ug=Hg,qg=function(e){return jg({},e)};var Wg={};var Xg=function(e){return-2===e||-1===e||32===e};var Kg=function(e,t,n,r){var i=r?r-1:1/0,a=0;return function(r){if(Xg(r))return e.enter(n),o(r);return t(r)};function o(r){return Xg(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}};Wg.flow={null:{tokenize:function(e,t,n){var r,i,a=[],o=0;return function(t){if(null===t||-5===t||-4===t||-3===t)return n(t);if(e.enter("table")._align=a,e.enter("tableHead"),e.enter("tableRow"),124===t)return s(t);return o++,e.enter("temporaryTableCellContent"),u(t)};function s(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,l}function l(t){return null===t||-5===t||-4===t||-3===t?function(t){if(null===t)return n(t);return e.exit("tableRow"),e.exit("tableHead"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.check(Zg,n,Qg(e,p,"linePrefix",4))}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),c):(r&&(r=void 0,o++),124===t?s(t):(e.enter("temporaryTableCellContent"),u(t)))}function c(t){return-2===t||-1===t||32===t?(e.consume(t),c):(e.exit("whitespace"),l(t))}function u(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),l(t)):(e.consume(t),92===t?h:u)}function h(t){return 92===t||124===t?(e.consume(t),u):u(t)}function p(t){return null===t||t<0||32===t?n(t):(e.enter("tableDelimiterRow"),d(t))}function d(t){return null===t||-5===t||-4===t||-3===t?v(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),f):45===t?(e.enter("tableDelimiterFiller"),e.consume(t),i=!0,a.push(null),m):58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),a.push("left"),g):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),d):n(t)}function f(t){return-2===t||-1===t||32===t?(e.consume(t),f):(e.exit("whitespace"),d(t))}function m(t){return 45===t?(e.consume(t),m):(e.exit("tableDelimiterFiller"),58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),a[a.length-1]="left"===a[a.length-1]?"center":"right",y):d(t))}function g(t){return 45===t?(e.enter("tableDelimiterFiller"),e.consume(t),i=!0,m):n(t)}function y(t){return null===t||-5===t||-4===t||-3===t?v(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),f):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),d):n(t)}function v(t){return e.exit("tableDelimiterRow"),i&&o===a.length?null===t?E(t):e.check(Jg,E,x)(t):n(t)}function E(n){return e.exit("table"),t(n)}function x(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Qg(e,b,"linePrefix",4)}function b(t){return e.enter("tableBody"),C(t)}function C(t){return e.enter("tableRow"),124===t?S(t):(e.enter("temporaryTableCellContent"),k(t))}function S(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),w}function w(t){return null===t||-5===t||-4===t||-3===t?function(t){if(e.exit("tableRow"),null===t)return O(t);return e.check(Jg,O,A)(t)}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),T):124===t?S(t):(e.enter("temporaryTableCellContent"),k(t))}function T(t){return-2===t||-1===t||32===t?(e.consume(t),T):(e.exit("whitespace"),w(t))}function k(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),w(t)):(e.consume(t),92===t?_:k)}function _(t){return 92===t||124===t?(e.consume(t),k):k(t)}function O(t){return e.exit("tableBody"),E(t)}function A(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Qg(e,C,"linePrefix",4)}},resolve:function(e,t){var n,r,i,a,o,s,l,c,u,h,p=e.length,d=-1;for(;++d<p;)n=e[d][1],a&&("temporaryTableCellContent"===n.type&&(c=c||d,u=d),"tableCellDivider"!==n.type&&"tableRow"!==n.type||!u||(s={type:"tableContent",start:e[c][1].start,end:e[u][1].end},l={type:"chunkText",start:s.start,end:s.end,contentType:"text"},e.splice(c,u-c+1,["enter",s,t],["enter",l,t],["exit",l,t],["exit",s,t]),d-=u-c-3,p=e.length,c=void 0,u=void 0)),"exit"===e[d][0]&&h&&h+1<d&&("tableCellDivider"===n.type||"tableRow"===n.type&&(h+3<d||"whitespace"!==e[h][1].type))&&(o={type:i?"tableDelimiter":r?"tableHeader":"tableData",start:e[h][1].start,end:e[d][1].end},e.splice(d+("tableCellDivider"===n.type?1:0),0,["exit",o,t]),e.splice(h,0,["enter",o,t]),d+=2,p=e.length,h=d+1),"tableRow"===n.type&&(a="enter"===e[d][0])&&(h=d+1),"tableDelimiterRow"===n.type&&(i="enter"===e[d][0])&&(h=d+1),"tableHead"===n.type&&(r="enter"===e[d][0]);return e},interruptible:!0}};var Qg=Kg,Zg={tokenize:function(e,t,n){return function(t){if(45!==t)return n(t);return e.enter("setextUnderline"),r(t)};function r(t){return 45===t?(e.consume(t),r):i(t)}function i(r){return-2===r||-1===r||32===r?(e.consume(r),i):null===r||-5===r||-4===r||-3===r?t(r):n(r)}},partial:!0},Jg={tokenize:function(e,t,n){var r=0;return function(t){return e.enter("check"),e.consume(t),i};function i(a){return-1===a||32===a?(e.consume(a),4===++r?t:i):null===a||a<0?t(a):n(a)}},partial:!0};var ey=Wg,ty={};var ny=function(e){return-2===e||-1===e||32===e};var ry=function(e){for(var t=-1,n=0;++t<e.length;)n+="string"==typeof e[t]?e[t].length:1;return n};var iy=function(e){return e<0||32===e},ay=function(e,t,n,r){var i=r?r-1:1/0,a=0;return function(r){if(ny(r))return e.enter(n),o(r);return t(r)};function o(r){return ny(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}},oy=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?ry(n[2].sliceStream(n[1])):0},sy={tokenize:function(e,t,n){var r=this;return function(t){if(91!==t||null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i};function i(t){return-2===t||32===t?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),a):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),a):n(t)}function a(r){return 93===r?(e.enter("taskListCheckMarker"),e.consume(r),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:ly},t,n)):n(r)}}};function ly(e,t,n){var r=this;return ay(e,(function(e){return oy(r.events,"whitespace")&&null!==e&&!iy(e)?t(e):n(e)}),"whitespace")}ty.text={91:sy};var cy=Xm,uy=Og,hy=Gg,py=ey,dy=ty;var fy=function(e){return cy([uy,hy(e),py,dy])},my={},gy=function(e,t){var n,r=String(e),i=0;if("string"!=typeof t)throw new Error("Expected character");n=r.indexOf(t);for(;-1!==n;)i++,n=r.indexOf(t,n+t.length);return i};function yy(e){if(null==e)return vy;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=yy(e[n]);return r;function r(){for(var e=-1;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function vy(){return!0}var Ey=Cy,xy=yy,by=function(e){return e};function Cy(e,t,n,r){var i,a;"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),a=xy(t),i=r?-1:1,function e(o,s,l){var c,u="object"==typeof o&&null!==o?o:{};"string"==typeof u.type&&(c="string"==typeof u.tagName?u.tagName:"string"==typeof u.name?u.name:void 0,h.displayName="node ("+by(u.type+(c?"<"+c+">":""))+")");return h;function h(){var c,u,h=l.concat(o),p=[];if((!t||a(o,s,l[l.length-1]||null))&&false===(p=function(e){if(null!==e&&"object"==typeof e&&"length"in e)return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)))[0])return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+i;u>-1&&u<o.children.length;){if(false===(c=e(o.children[u],u,h)())[0])return c;u="number"==typeof c[1]?c[1]:u+i}return p}}(e,null,[])()}function Sy(e){if(null==e)return wy;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=Sy(e[n]);return r;function r(){for(var e=-1;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function wy(){return!0}Cy.CONTINUE=true,Cy.SKIP="skip",Cy.EXIT=false;var Ty=function(e,t,n,r){var i,a;"string"==typeof t||t&&"function"==typeof t.exec?a=[[t,n]]:(a=t,r=n);return Iy(e,i=r||{},function e(t){var n=t[0];return r;function r(r,a){var o,s,l,c,u=n[0],h=n[1],p=[],d=0,f=a.children.indexOf(r);for(u.lastIndex=0,s=u.exec(r.value);s&&(o=s.index,!1!==(c=h.apply(null,[].concat(s,{index:s.index,input:s.input})))&&(d!==o&&p.push({type:"text",value:r.value.slice(d,o)}),"string"==typeof c&&c.length>0&&(c={type:"text",value:c}),c&&(p=[].concat(p,c)),d=o+s[0].length),u.global);)s=u.exec(r.value);if(void 0===o?(p=[r],f--):(d<r.value.length&&p.push({type:"text",value:r.value.slice(d)}),p.unshift(f,1),Ay.apply(a.children,p)),t.length>1)for(l=e(t.slice(1)),o=-1;++o<p.length;)"text"===(r=p[o]).type?l(r,a):Iy(r,i,l);return f+p.length+1}}(function(e){var t,n,r=[];if("object"!=typeof e)throw new Error("Expected array or object as schema");if("length"in e)for(n=-1;++n<e.length;)r.push([My(e[n][0]),Ny(e[n][1])]);else for(t in e)r.push([My(t),Ny(e[t])]);return r}(a))),e},ky=Ey,_y=Sy,Oy=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},Ay=[].splice;function Iy(e,t,n){var r=_y(t.ignore||[]);return ky(e,"text",(function(e,t){var i,a,o=-1;for(;++o<t.length;){if(i=t[o],r(i,a?a.children.indexOf(i):void 0,a))return;a=i}return n(e,a)})),[]}function My(e){return"string"==typeof e?new RegExp(Oy(e),"g"):e}function Ny(e){return"function"==typeof e?e:function(){return e}}var Py=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Fy=String.fromCharCode;var Ly=function(e){return function(t){return e.test(Fy(t))}},Ry=Ly(Py),Dy=Ly(/\s/),By=gy,$y=Ty,zy=Ry,Hy=Dy;function jy(e){this.config.enter.autolinkProtocol.call(this,e)}function Gy(e,t,n,r,i){var a,o,s="";return!!Yy(i)&&(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!!function(e){var t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n)&&(!!(a=function(e){var t,n,r,i=/[!"&'),.:;<>?\]}]+$/.exec(e);if(i)for(e=e.slice(0,i.index),t=(i=i[0]).indexOf(")"),n=By(e,"("),r=By(e,")");-1!==t&&n>r;)e+=i.slice(0,t+1),t=(i=i.slice(t+1)).indexOf(")"),r++;return[e,i]}(n+r))[0]&&(o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]},a[1]&&(o=[o,{type:"text",value:a[1]}]),o)))}function Vy(e,t,n,r){return!(!Yy(r,!0)||/[_-]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Yy(e,t){var n=e.input.charCodeAt(e.index-1);return(n!=n||Hy(n)||zy(n))&&(!t||47!==n)}my.transforms=[function(e){$y(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/i,Gy],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/,Vy]],{ignore:["link","linkReference"]})}],my.enter={literalAutolink:function(e){this.enter({type:"link",title:null,url:"",children:[]},e)},literalAutolinkEmail:jy,literalAutolinkHttp:jy,literalAutolinkWww:jy},my.exit={literalAutolink:function(e){this.exit(e)},literalAutolinkEmail:function(e){this.config.exit.autolinkEmail.call(this,e)},literalAutolinkHttp:function(e){this.config.exit.autolinkProtocol.call(this,e)},literalAutolinkWww:function(e){this.config.exit.data.call(this,e),this.stack[this.stack.length-1].url="http://"+this.sliceSerialize(e)}};var Uy={};Uy.canContainEols=["delete"],Uy.enter={strikethrough:function(e){this.enter({type:"delete",children:[]},e)}},Uy.exit={strikethrough:function(e){this.exit(e)}};var qy={};function Wy(e){this.exit(e)}function Xy(e){this.enter({type:"tableCell",children:[]},e)}function Ky(e,t){return"|"===t?t:e}qy.enter={table:function(e){this.enter({type:"table",align:e._align,children:[]},e),this.setData("inTable",!0)},tableData:Xy,tableHeader:Xy,tableRow:function(e){this.enter({type:"tableRow",children:[]},e)}},qy.exit={codeText:function(e){var t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,Ky));this.stack[this.stack.length-1].value=t,this.exit(e)},table:function(e){this.exit(e),this.setData("inTable")},tableData:Wy,tableHeader:Wy,tableRow:Wy};var Qy={};function Zy(e){this.stack[this.stack.length-2].checked="taskListCheckValueChecked"===e.type}Qy.exit={taskListCheckValueChecked:Zy,taskListCheckValueUnchecked:Zy,paragraph:function(e){var t,n=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1],i=n.children,a=r.children[0],o=-1;if(n&&"listItem"===n.type&&"boolean"==typeof n.checked&&a&&"text"===a.type){for(;++o<i.length;)if("paragraph"===i[o].type){t=i[o];break}t===r&&(a.value=a.value.slice(1),0===a.value.length?r.children.shift():(a.position.start.column++,a.position.start.offset++,r.position.start=Object.assign({},a.position.start)))}this.exit(e)}};var Jy={}.hasOwnProperty,ev=function(e){var t={transforms:[],canContainEols:[]},n=e.length,r=-1;for(;++r<n;)tv(t,e[r]);return t}([my,Uy,qy,Qy]);function tv(e,t){var n,r,i;for(n in t)r=Jy.call(e,n)?e[n]:e[n]={},i=t[n],"canContainEols"===n||"transforms"===n?e[n]=[].concat(r,i):Object.assign(r,i)}var nv={},rv=["autolink","link","image","label"];nv.unsafe=[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:"phrasing",notInConstruct:rv},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:"phrasing",notInConstruct:rv},{character:":",before:"[ps]",after:"\\/",inConstruct:"phrasing",notInConstruct:rv}];var iv={},av=function(e,t,n){var r,i,a,o=e.children||[],s=[],l=-1,c=n.before;for(;++l<o.length;)a=o[l],l+1<o.length?((i=t.handle.handlers[o[l+1].type])&&i.peek&&(i=i.peek),r=i?i(o[l+1],e,t,{before:"",after:""}).charAt(0):""):r=n.after,s.length>0&&("\r"===c||"\n"===c)&&"html"===a.type&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),c=" "),s.push(t.handle(a,e,t,{before:c,after:r})),c=s[s.length-1].slice(-1);return s.join("")};var ov=av;function sv(e,t,n){var r=n.enter("emphasis"),i=ov(e,n,{before:"~",after:"~"});return r(),"~~"+i+"~~"}iv.unsafe=[{character:"~",inConstruct:"phrasing"}],iv.handlers={delete:sv},sv.peek=function(){return"~"};var lv=function(e){var t,n;e._compiled||(t=e.before?"(?:"+e.before+")":"",n=e.after?"(?:"+e.after+")":"",e.atBreak&&(t="[\\r\\n][\\t ]*"+t),e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(n||""),"g"));return e._compiled};var cv=hv;hv.peek=function(){return"`"}
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */;var uv=lv;function hv(e,t,n){for(var r,i,a,o,s=e.value||"",l="`",c=-1;new RegExp("(^|[^`])"+l+"([^`]|$)").test(s);)l+="`";for(/[^ \r\n]/.test(s)&&(/[ \r\n`]/.test(s.charAt(0))||/[ \r\n`]/.test(s.charAt(s.length-1)))&&(s=" "+s+" ");++c<n.unsafe.length;)if((r=n.unsafe[c]).atBreak)for(i=uv(r);a=i.exec(s);)o=a.index,10===s.charCodeAt(o)&&13===s.charCodeAt(o-1)&&o--,s=s.slice(0,o)+" "+s.slice(a.index+1);return l+s+l}var pv,dv="",fv=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(pv!==e||void 0===pv)pv=e,dv="";else if(dv.length>=n)return dv.substr(0,n);for(;n>dv.length&&t>1;)1&t&&(dv+=e),t>>=1,e+=e;return dv=(dv+=e).substr(0,n)};var mv=fv,gv=function(e,t){var n,r,i,a,o,s,l,c,u,h,p,d=t||{},f=!1!==d.padding,m=!1!==d.delimiterStart,g=!1!==d.delimiterEnd,y=(d.align||[]).concat(),v=!1!==d.alignDelimiters,E=[],x=d.stringLength||vv,b=-1,C=e.length,S=[],w=[],T=[],k=[],_=[],O=0;for(;++b<C;){for(n=e[b],r=-1,i=n.length,T=[],k=[],i>O&&(O=i);++r<i;)A=n[r],s=null==A?"":String(A),!0===v&&(o=x(s),k[r]=o,(void 0===(a=_[r])||o>a)&&(_[r]=o)),T.push(s);S[b]=T,w[b]=k}var A;if(r=-1,i=O,"object"==typeof y&&"length"in y)for(;++r<i;)E[r]=Ev(y[r]);else for(p=Ev(y);++r<i;)E[r]=p;r=-1,i=O,T=[],k=[];for(;++r<i;)p=E[r],u="",h="",108===p?u=":":114===p?h=":":99===p&&(u=":",h=":"),o=v?Math.max(1,_[r]-u.length-h.length):1,s=u+mv("-",o)+h,!0===v&&((o=u.length+o+h.length)>_[r]&&(_[r]=o),k[r]=o),T[r]=s;S.splice(1,0,T),w.splice(1,0,k),b=-1,C=S.length,l=[];for(;++b<C;){for(T=S[b],k=w[b],r=-1,i=O,c=[];++r<i;)s=T[r]||"",u="",h="",!0===v&&(o=_[r]-(k[r]||0),114===(p=E[r])?u=mv(" ",o):99===p?o%2==0?(u=mv(" ",o/2),h=u):(u=mv(" ",o/2+.5),h=mv(" ",o/2-.5)):h=mv(" ",o)),!0===m&&0===r&&c.push("|"),!0!==f||!1===v&&""===s||!0!==m&&0===r||c.push(" "),!0===v&&c.push(u),c.push(s),!0===v&&c.push(h),!0===f&&c.push(" "),!0!==g&&r===i-1||c.push("|");c=c.join(""),!1===g&&(c=c.replace(yv,"")),l.push(c)}return l.join("\n")},yv=/ +$/;function vv(e){return e.length}function Ev(e){var t="string"==typeof e?e.charCodeAt(0):0;return 76===t||108===t?108:82===t||114===t?114:67===t||99===t?99:0}var xv=av,bv=cv,Cv=gv,Sv=function(e){var t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:function(e,t,n){return s(function(e,t){var n=e.children,r=-1,i=n.length,a=[],o=t.enter("table");for(;++r<i;)a[r]=l(n[r],t);return o(),a}(e,n),e.align)},tableRow:function(e,t,n){var r=s([l(e,n)]);return r.slice(0,r.indexOf("\n"))},tableCell:o,inlineCode:function(e,t,n){var r=bv(e,t,n);-1!==n.stack.indexOf("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r}}};function o(e,t,n){var r=n.enter("tableCell"),i=xv(e,n,{before:a,after:a});return r(),i}function s(e,t){return Cv(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function l(e,t){for(var n=e.children,r=-1,i=n.length,a=[],s=t.enter("tableRow");++r<i;)a[r]=o(n[r],0,t);return s(),a}};var wv={};var Tv=function(e,t){var n,r=e.children||[],i=[],a=-1;for(;++a<r.length;)n=r[a],i.push(t.handle(n,e,t,{before:"\n",after:"\n"})),a+1<r.length&&i.push(o(n,r[a+1]));return i.join("");function o(n,r){for(var i,a=-1;++a<t.join.length&&!0!==(i=t.join[a](n,r,e,t))&&1!==i;){if("number"==typeof i)return kv("\n",1+Number(i));if(!1===i)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}},kv=fv;var _v=function(e,t){var n,r=[],i=0,a=0;for(;n=Ov.exec(e);)o(e.slice(i,n.index)),r.push(n[0]),i=n.index+n[0].length,a++;return o(e.slice(i)),r.join("");function o(e){r.push(t(e,a,!e))}},Ov=/\r?\n|\r/g;var Av=function(e,t,n){var r,i,a,o=Mv(n),s=Nv(n);t&&t.ordered&&(o=(t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+".");r=o.length+1,("tab"===s||"mixed"===s&&(t&&t.spread||e.spread))&&(r=4*Math.ceil(r/4));return a=n.enter("listItem"),i=Fv(Pv(e,n),(function(e,t,n){if(t)return(n?"":Iv(" ",r))+e;return(n?o:o+Iv(" ",r-o.length))+e})),a(),i},Iv=fv,Mv=function(e){var t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t},Nv=function(e){var t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t},Pv=Tv,Fv=_v;var Lv=Av;wv.unsafe=[{atBreak:!0,character:"-",after:"[:|-]"}],wv.handlers={listItem:function(e,t,n){var r=Lv(e,t,n),i=e.children[0];"boolean"==typeof e.checked&&i&&"paragraph"===i.type&&(r=r.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(t){return t+"["+(e.checked?"x":" ")+"] "})));return r}};var Rv=nv,Dv=iv,Bv=Sv,$v=wv,zv=function e(t,n){var r,i=-1;if(n.extensions)for(;++i<n.extensions.length;)e(t,n.extensions[i]);for(r in n)"extensions"===r||("unsafe"===r||"join"===r?t[r]=t[r].concat(n[r]||[]):"handlers"===r?t[r]=Object.assign(t[r],n[r]||{}):t.options[r]=n[r]);return t};var Hv,jv=fy,Gv=ev,Vv=function(e){var t=zv({handlers:{},join:[],unsafe:[],options:{}},{extensions:[Rv,Dv,Bv(e),$v]});return Object.assign(t.options,{handlers:t.handlers,join:t.join,unsafe:t.unsafe})},Yv=function(e){var t=this.data();!Hv&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(Hv=!0,console.warn("[remark-gfm] Warning: please upgrade to remark 13 to use this plugin"));function n(e,n){t[e]?t[e].push(n):t[e]=[n]}n("micromarkExtensions",jv(e)),n("fromMarkdownExtensions",Gv),n("toMarkdownExtensions",Vv(e))};var Uv={};const qv=[65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111];Uv.REPLACEMENT_CHARACTER="�",Uv.CODE_POINTS={EOF:-1,NULL:0,TABULATION:9,CARRIAGE_RETURN:13,LINE_FEED:10,FORM_FEED:12,SPACE:32,EXCLAMATION_MARK:33,QUOTATION_MARK:34,NUMBER_SIGN:35,AMPERSAND:38,APOSTROPHE:39,HYPHEN_MINUS:45,SOLIDUS:47,DIGIT_0:48,DIGIT_9:57,SEMICOLON:59,LESS_THAN_SIGN:60,EQUALS_SIGN:61,GREATER_THAN_SIGN:62,QUESTION_MARK:63,LATIN_CAPITAL_A:65,LATIN_CAPITAL_F:70,LATIN_CAPITAL_X:88,LATIN_CAPITAL_Z:90,RIGHT_SQUARE_BRACKET:93,GRAVE_ACCENT:96,LATIN_SMALL_A:97,LATIN_SMALL_F:102,LATIN_SMALL_X:120,LATIN_SMALL_Z:122,REPLACEMENT_CHARACTER:65533},Uv.CODE_POINT_SEQUENCES={DASH_DASH_STRING:[45,45],DOCTYPE_STRING:[68,79,67,84,89,80,69],CDATA_START_STRING:[91,67,68,65,84,65,91],SCRIPT_STRING:[115,99,114,105,112,116],PUBLIC_STRING:[80,85,66,76,73,67],SYSTEM_STRING:[83,89,83,84,69,77]},Uv.isSurrogate=function(e){return e>=55296&&e<=57343},Uv.isSurrogatePair=function(e){return e>=56320&&e<=57343},Uv.getSurrogatePairCodePoint=function(e,t){return 1024*(e-55296)+9216+t},Uv.isControlCodePoint=function(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159},Uv.isUndefinedCodePoint=function(e){return e>=64976&&e<=65007||qv.indexOf(e)>-1};var Wv={controlCharacterInInputStream:"control-character-in-input-stream",noncharacterInInputStream:"noncharacter-in-input-stream",surrogateInInputStream:"surrogate-in-input-stream",nonVoidHtmlElementStartTagWithTrailingSolidus:"non-void-html-element-start-tag-with-trailing-solidus",endTagWithAttributes:"end-tag-with-attributes",endTagWithTrailingSolidus:"end-tag-with-trailing-solidus",unexpectedSolidusInTag:"unexpected-solidus-in-tag",unexpectedNullCharacter:"unexpected-null-character",unexpectedQuestionMarkInsteadOfTagName:"unexpected-question-mark-instead-of-tag-name",invalidFirstCharacterOfTagName:"invalid-first-character-of-tag-name",unexpectedEqualsSignBeforeAttributeName:"unexpected-equals-sign-before-attribute-name",missingEndTagName:"missing-end-tag-name",unexpectedCharacterInAttributeName:"unexpected-character-in-attribute-name",unknownNamedCharacterReference:"unknown-named-character-reference",missingSemicolonAfterCharacterReference:"missing-semicolon-after-character-reference",unexpectedCharacterAfterDoctypeSystemIdentifier:"unexpected-character-after-doctype-system-identifier",unexpectedCharacterInUnquotedAttributeValue:"unexpected-character-in-unquoted-attribute-value",eofBeforeTagName:"eof-before-tag-name",eofInTag:"eof-in-tag",missingAttributeValue:"missing-attribute-value",missingWhitespaceBetweenAttributes:"missing-whitespace-between-attributes",missingWhitespaceAfterDoctypePublicKeyword:"missing-whitespace-after-doctype-public-keyword",missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:"missing-whitespace-between-doctype-public-and-system-identifiers",missingWhitespaceAfterDoctypeSystemKeyword:"missing-whitespace-after-doctype-system-keyword",missingQuoteBeforeDoctypePublicIdentifier:"missing-quote-before-doctype-public-identifier",missingQuoteBeforeDoctypeSystemIdentifier:"missing-quote-before-doctype-system-identifier",missingDoctypePublicIdentifier:"missing-doctype-public-identifier",missingDoctypeSystemIdentifier:"missing-doctype-system-identifier",abruptDoctypePublicIdentifier:"abrupt-doctype-public-identifier",abruptDoctypeSystemIdentifier:"abrupt-doctype-system-identifier",cdataInHtmlContent:"cdata-in-html-content",incorrectlyOpenedComment:"incorrectly-opened-comment",eofInScriptHtmlCommentLikeText:"eof-in-script-html-comment-like-text",eofInDoctype:"eof-in-doctype",nestedComment:"nested-comment",abruptClosingOfEmptyComment:"abrupt-closing-of-empty-comment",eofInComment:"eof-in-comment",incorrectlyClosedComment:"incorrectly-closed-comment",eofInCdata:"eof-in-cdata",absenceOfDigitsInNumericCharacterReference:"absence-of-digits-in-numeric-character-reference",nullCharacterReference:"null-character-reference",surrogateCharacterReference:"surrogate-character-reference",characterReferenceOutsideUnicodeRange:"character-reference-outside-unicode-range",controlCharacterReference:"control-character-reference",noncharacterCharacterReference:"noncharacter-character-reference",missingWhitespaceBeforeDoctypeName:"missing-whitespace-before-doctype-name",missingDoctypeName:"missing-doctype-name",invalidCharacterSequenceAfterDoctypeName:"invalid-character-sequence-after-doctype-name",duplicateAttribute:"duplicate-attribute",nonConformingDoctype:"non-conforming-doctype",missingDoctype:"missing-doctype",misplacedDoctype:"misplaced-doctype",endTagWithoutMatchingOpenElement:"end-tag-without-matching-open-element",closingOfElementWithOpenChildElements:"closing-of-element-with-open-child-elements",disallowedContentInNoscriptInHead:"disallowed-content-in-noscript-in-head",openElementsLeftAfterEof:"open-elements-left-after-eof",abandonedHeadElementChild:"abandoned-head-element-child",misplacedStartTagForHeadElement:"misplaced-start-tag-for-head-element",nestedNoscriptInHead:"nested-noscript-in-head",eofInElementThatCanContainOnlyText:"eof-in-element-that-can-contain-only-text"};const Xv=Uv,Kv=Wv,Qv=Xv.CODE_POINTS;var Zv=class{constructor(){this.html=null,this.pos=-1,this.lastGapPos=-1,this.lastCharPos=-1,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536}_err(){}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.lastCharPos){const t=this.html.charCodeAt(this.pos+1);if(Xv.isSurrogatePair(t))return this.pos++,this._addGap(),Xv.getSurrogatePairCodePoint(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Qv.EOF;return this._err(Kv.surrogateInInputStream),e}dropParsedChunk(){this.pos>this.bufferWaterline&&(this.lastCharPos-=this.pos,this.html=this.html.substring(this.pos),this.pos=0,this.lastGapPos=-1,this.gapStack=[])}write(e,t){this.html?this.html+=e:this.html=e,this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1,this.html.length),this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1}advance(){if(this.pos++,this.pos>this.lastCharPos)return this.endOfChunkHit=!this.lastChunkWritten,Qv.EOF;let e=this.html.charCodeAt(this.pos);if(this.skipNextNewLine&&e===Qv.LINE_FEED)return this.skipNextNewLine=!1,this._addGap(),this.advance();if(e===Qv.CARRIAGE_RETURN)return this.skipNextNewLine=!0,Qv.LINE_FEED;this.skipNextNewLine=!1,Xv.isSurrogate(e)&&(e=this._processSurrogate(e));return e>31&&e<127||e===Qv.LINE_FEED||e===Qv.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e}_checkForProblematicCharacters(e){Xv.isControlCodePoint(e)?this._err(Kv.controlCharacterInInputStream):Xv.isUndefinedCodePoint(e)&&this._err(Kv.noncharacterInInputStream)}retreat(){this.pos===this.lastGapPos&&(this.lastGapPos=this.gapStack.pop(),this.pos--),this.pos--}},Jv=new Uint16Array([4,52,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,106,303,412,810,1432,1701,1796,1987,2114,2360,2420,2484,3170,3251,4140,4393,4575,4610,5106,5512,5728,6117,6274,6315,6345,6427,6516,7002,7910,8733,9323,9870,10170,10631,10893,11318,11386,11467,12773,13092,14474,14922,15448,15542,16419,17666,18166,18611,19004,19095,19298,19397,4,16,69,77,97,98,99,102,103,108,109,110,111,112,114,115,116,117,140,150,158,169,176,194,199,210,216,222,226,242,256,266,283,294,108,105,103,5,198,1,59,148,1,198,80,5,38,1,59,156,1,38,99,117,116,101,5,193,1,59,167,1,193,114,101,118,101,59,1,258,4,2,105,121,182,191,114,99,5,194,1,59,189,1,194,59,1,1040,114,59,3,55349,56580,114,97,118,101,5,192,1,59,208,1,192,112,104,97,59,1,913,97,99,114,59,1,256,100,59,1,10835,4,2,103,112,232,237,111,110,59,1,260,102,59,3,55349,56632,112,108,121,70,117,110,99,116,105,111,110,59,1,8289,105,110,103,5,197,1,59,264,1,197,4,2,99,115,272,277,114,59,3,55349,56476,105,103,110,59,1,8788,105,108,100,101,5,195,1,59,292,1,195,109,108,5,196,1,59,301,1,196,4,8,97,99,101,102,111,114,115,117,321,350,354,383,388,394,400,405,4,2,99,114,327,336,107,115,108,97,115,104,59,1,8726,4,2,118,119,342,345,59,1,10983,101,100,59,1,8966,121,59,1,1041,4,3,99,114,116,362,369,379,97,117,115,101,59,1,8757,110,111,117,108,108,105,115,59,1,8492,97,59,1,914,114,59,3,55349,56581,112,102,59,3,55349,56633,101,118,101,59,1,728,99,114,59,1,8492,109,112,101,113,59,1,8782,4,14,72,79,97,99,100,101,102,104,105,108,111,114,115,117,442,447,456,504,542,547,569,573,577,616,678,784,790,796,99,121,59,1,1063,80,89,5,169,1,59,454,1,169,4,3,99,112,121,464,470,497,117,116,101,59,1,262,4,2,59,105,476,478,1,8914,116,97,108,68,105,102,102,101,114,101,110,116,105,97,108,68,59,1,8517,108,101,121,115,59,1,8493,4,4,97,101,105,111,514,520,530,535,114,111,110,59,1,268,100,105,108,5,199,1,59,528,1,199,114,99,59,1,264,110,105,110,116,59,1,8752,111,116,59,1,266,4,2,100,110,553,560,105,108,108,97,59,1,184,116,101,114,68,111,116,59,1,183,114,59,1,8493,105,59,1,935,114,99,108,101,4,4,68,77,80,84,591,596,603,609,111,116,59,1,8857,105,110,117,115,59,1,8854,108,117,115,59,1,8853,105,109,101,115,59,1,8855,111,4,2,99,115,623,646,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8754,101,67,117,114,108,121,4,2,68,81,658,671,111,117,98,108,101,81,117,111,116,101,59,1,8221,117,111,116,101,59,1,8217,4,4,108,110,112,117,688,701,736,753,111,110,4,2,59,101,696,698,1,8759,59,1,10868,4,3,103,105,116,709,717,722,114,117,101,110,116,59,1,8801,110,116,59,1,8751,111,117,114,73,110,116,101,103,114,97,108,59,1,8750,4,2,102,114,742,745,59,1,8450,111,100,117,99,116,59,1,8720,110,116,101,114,67,108,111,99,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8755,111,115,115,59,1,10799,99,114,59,3,55349,56478,112,4,2,59,67,803,805,1,8915,97,112,59,1,8781,4,11,68,74,83,90,97,99,101,102,105,111,115,834,850,855,860,865,888,903,916,921,1011,1415,4,2,59,111,840,842,1,8517,116,114,97,104,100,59,1,10513,99,121,59,1,1026,99,121,59,1,1029,99,121,59,1,1039,4,3,103,114,115,873,879,883,103,101,114,59,1,8225,114,59,1,8609,104,118,59,1,10980,4,2,97,121,894,900,114,111,110,59,1,270,59,1,1044,108,4,2,59,116,910,912,1,8711,97,59,1,916,114,59,3,55349,56583,4,2,97,102,927,998,4,2,99,109,933,992,114,105,116,105,99,97,108,4,4,65,68,71,84,950,957,978,985,99,117,116,101,59,1,180,111,4,2,116,117,964,967,59,1,729,98,108,101,65,99,117,116,101,59,1,733,114,97,118,101,59,1,96,105,108,100,101,59,1,732,111,110,100,59,1,8900,102,101,114,101,110,116,105,97,108,68,59,1,8518,4,4,112,116,117,119,1021,1026,1048,1249,102,59,3,55349,56635,4,3,59,68,69,1034,1036,1041,1,168,111,116,59,1,8412,113,117,97,108,59,1,8784,98,108,101,4,6,67,68,76,82,85,86,1065,1082,1101,1189,1211,1236,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8751,111,4,2,116,119,1089,1092,59,1,168,110,65,114,114,111,119,59,1,8659,4,2,101,111,1107,1141,102,116,4,3,65,82,84,1117,1124,1136,114,114,111,119,59,1,8656,105,103,104,116,65,114,114,111,119,59,1,8660,101,101,59,1,10980,110,103,4,2,76,82,1149,1177,101,102,116,4,2,65,82,1158,1165,114,114,111,119,59,1,10232,105,103,104,116,65,114,114,111,119,59,1,10234,105,103,104,116,65,114,114,111,119,59,1,10233,105,103,104,116,4,2,65,84,1199,1206,114,114,111,119,59,1,8658,101,101,59,1,8872,112,4,2,65,68,1218,1225,114,114,111,119,59,1,8657,111,119,110,65,114,114,111,119,59,1,8661,101,114,116,105,99,97,108,66,97,114,59,1,8741,110,4,6,65,66,76,82,84,97,1264,1292,1299,1352,1391,1408,114,114,111,119,4,3,59,66,85,1276,1278,1283,1,8595,97,114,59,1,10515,112,65,114,114,111,119,59,1,8693,114,101,118,101,59,1,785,101,102,116,4,3,82,84,86,1310,1323,1334,105,103,104,116,86,101,99,116,111,114,59,1,10576,101,101,86,101,99,116,111,114,59,1,10590,101,99,116,111,114,4,2,59,66,1345,1347,1,8637,97,114,59,1,10582,105,103,104,116,4,2,84,86,1362,1373,101,101,86,101,99,116,111,114,59,1,10591,101,99,116,111,114,4,2,59,66,1384,1386,1,8641,97,114,59,1,10583,101,101,4,2,59,65,1399,1401,1,8868,114,114,111,119,59,1,8615,114,114,111,119,59,1,8659,4,2,99,116,1421,1426,114,59,3,55349,56479,114,111,107,59,1,272,4,16,78,84,97,99,100,102,103,108,109,111,112,113,115,116,117,120,1466,1470,1478,1489,1515,1520,1525,1536,1544,1593,1609,1617,1650,1664,1668,1677,71,59,1,330,72,5,208,1,59,1476,1,208,99,117,116,101,5,201,1,59,1487,1,201,4,3,97,105,121,1497,1503,1512,114,111,110,59,1,282,114,99,5,202,1,59,1510,1,202,59,1,1069,111,116,59,1,278,114,59,3,55349,56584,114,97,118,101,5,200,1,59,1534,1,200,101,109,101,110,116,59,1,8712,4,2,97,112,1550,1555,99,114,59,1,274,116,121,4,2,83,86,1563,1576,109,97,108,108,83,113,117,97,114,101,59,1,9723,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9643,4,2,103,112,1599,1604,111,110,59,1,280,102,59,3,55349,56636,115,105,108,111,110,59,1,917,117,4,2,97,105,1624,1640,108,4,2,59,84,1631,1633,1,10869,105,108,100,101,59,1,8770,108,105,98,114,105,117,109,59,1,8652,4,2,99,105,1656,1660,114,59,1,8496,109,59,1,10867,97,59,1,919,109,108,5,203,1,59,1675,1,203,4,2,105,112,1683,1689,115,116,115,59,1,8707,111,110,101,110,116,105,97,108,69,59,1,8519,4,5,99,102,105,111,115,1713,1717,1722,1762,1791,121,59,1,1060,114,59,3,55349,56585,108,108,101,100,4,2,83,86,1732,1745,109,97,108,108,83,113,117,97,114,101,59,1,9724,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9642,4,3,112,114,117,1770,1775,1781,102,59,3,55349,56637,65,108,108,59,1,8704,114,105,101,114,116,114,102,59,1,8497,99,114,59,1,8497,4,12,74,84,97,98,99,100,102,103,111,114,115,116,1822,1827,1834,1848,1855,1877,1882,1887,1890,1896,1978,1984,99,121,59,1,1027,5,62,1,59,1832,1,62,109,109,97,4,2,59,100,1843,1845,1,915,59,1,988,114,101,118,101,59,1,286,4,3,101,105,121,1863,1869,1874,100,105,108,59,1,290,114,99,59,1,284,59,1,1043,111,116,59,1,288,114,59,3,55349,56586,59,1,8921,112,102,59,3,55349,56638,101,97,116,101,114,4,6,69,70,71,76,83,84,1915,1933,1944,1953,1959,1971,113,117,97,108,4,2,59,76,1925,1927,1,8805,101,115,115,59,1,8923,117,108,108,69,113,117,97,108,59,1,8807,114,101,97,116,101,114,59,1,10914,101,115,115,59,1,8823,108,97,110,116,69,113,117,97,108,59,1,10878,105,108,100,101,59,1,8819,99,114,59,3,55349,56482,59,1,8811,4,8,65,97,99,102,105,111,115,117,2005,2012,2026,2032,2036,2049,2073,2089,82,68,99,121,59,1,1066,4,2,99,116,2018,2023,101,107,59,1,711,59,1,94,105,114,99,59,1,292,114,59,1,8460,108,98,101,114,116,83,112,97,99,101,59,1,8459,4,2,112,114,2055,2059,102,59,1,8461,105,122,111,110,116,97,108,76,105,110,101,59,1,9472,4,2,99,116,2079,2083,114,59,1,8459,114,111,107,59,1,294,109,112,4,2,68,69,2097,2107,111,119,110,72,117,109,112,59,1,8782,113,117,97,108,59,1,8783,4,14,69,74,79,97,99,100,102,103,109,110,111,115,116,117,2144,2149,2155,2160,2171,2189,2194,2198,2209,2245,2307,2329,2334,2341,99,121,59,1,1045,108,105,103,59,1,306,99,121,59,1,1025,99,117,116,101,5,205,1,59,2169,1,205,4,2,105,121,2177,2186,114,99,5,206,1,59,2184,1,206,59,1,1048,111,116,59,1,304,114,59,1,8465,114,97,118,101,5,204,1,59,2207,1,204,4,3,59,97,112,2217,2219,2238,1,8465,4,2,99,103,2225,2229,114,59,1,298,105,110,97,114,121,73,59,1,8520,108,105,101,115,59,1,8658,4,2,116,118,2251,2281,4,2,59,101,2257,2259,1,8748,4,2,103,114,2265,2271,114,97,108,59,1,8747,115,101,99,116,105,111,110,59,1,8898,105,115,105,98,108,101,4,2,67,84,2293,2300,111,109,109,97,59,1,8291,105,109,101,115,59,1,8290,4,3,103,112,116,2315,2320,2325,111,110,59,1,302,102,59,3,55349,56640,97,59,1,921,99,114,59,1,8464,105,108,100,101,59,1,296,4,2,107,109,2347,2352,99,121,59,1,1030,108,5,207,1,59,2358,1,207,4,5,99,102,111,115,117,2372,2386,2391,2397,2414,4,2,105,121,2378,2383,114,99,59,1,308,59,1,1049,114,59,3,55349,56589,112,102,59,3,55349,56641,4,2,99,101,2403,2408,114,59,3,55349,56485,114,99,121,59,1,1032,107,99,121,59,1,1028,4,7,72,74,97,99,102,111,115,2436,2441,2446,2452,2467,2472,2478,99,121,59,1,1061,99,121,59,1,1036,112,112,97,59,1,922,4,2,101,121,2458,2464,100,105,108,59,1,310,59,1,1050,114,59,3,55349,56590,112,102,59,3,55349,56642,99,114,59,3,55349,56486,4,11,74,84,97,99,101,102,108,109,111,115,116,2508,2513,2520,2562,2585,2981,2986,3004,3011,3146,3167,99,121,59,1,1033,5,60,1,59,2518,1,60,4,5,99,109,110,112,114,2532,2538,2544,2548,2558,117,116,101,59,1,313,98,100,97,59,1,923,103,59,1,10218,108,97,99,101,116,114,102,59,1,8466,114,59,1,8606,4,3,97,101,121,2570,2576,2582,114,111,110,59,1,317,100,105,108,59,1,315,59,1,1051,4,2,102,115,2591,2907,116,4,10,65,67,68,70,82,84,85,86,97,114,2614,2663,2672,2728,2735,2760,2820,2870,2888,2895,4,2,110,114,2620,2633,103,108,101,66,114,97,99,107,101,116,59,1,10216,114,111,119,4,3,59,66,82,2644,2646,2651,1,8592,97,114,59,1,8676,105,103,104,116,65,114,114,111,119,59,1,8646,101,105,108,105,110,103,59,1,8968,111,4,2,117,119,2679,2692,98,108,101,66,114,97,99,107,101,116,59,1,10214,110,4,2,84,86,2699,2710,101,101,86,101,99,116,111,114,59,1,10593,101,99,116,111,114,4,2,59,66,2721,2723,1,8643,97,114,59,1,10585,108,111,111,114,59,1,8970,105,103,104,116,4,2,65,86,2745,2752,114,114,111,119,59,1,8596,101,99,116,111,114,59,1,10574,4,2,101,114,2766,2792,101,4,3,59,65,86,2775,2777,2784,1,8867,114,114,111,119,59,1,8612,101,99,116,111,114,59,1,10586,105,97,110,103,108,101,4,3,59,66,69,2806,2808,2813,1,8882,97,114,59,1,10703,113,117,97,108,59,1,8884,112,4,3,68,84,86,2829,2841,2852,111,119,110,86,101,99,116,111,114,59,1,10577,101,101,86,101,99,116,111,114,59,1,10592,101,99,116,111,114,4,2,59,66,2863,2865,1,8639,97,114,59,1,10584,101,99,116,111,114,4,2,59,66,2881,2883,1,8636,97,114,59,1,10578,114,114,111,119,59,1,8656,105,103,104,116,97,114,114,111,119,59,1,8660,115,4,6,69,70,71,76,83,84,2922,2936,2947,2956,2962,2974,113,117,97,108,71,114,101,97,116,101,114,59,1,8922,117,108,108,69,113,117,97,108,59,1,8806,114,101,97,116,101,114,59,1,8822,101,115,115,59,1,10913,108,97,110,116,69,113,117,97,108,59,1,10877,105,108,100,101,59,1,8818,114,59,3,55349,56591,4,2,59,101,2992,2994,1,8920,102,116,97,114,114,111,119,59,1,8666,105,100,111,116,59,1,319,4,3,110,112,119,3019,3110,3115,103,4,4,76,82,108,114,3030,3058,3070,3098,101,102,116,4,2,65,82,3039,3046,114,114,111,119,59,1,10229,105,103,104,116,65,114,114,111,119,59,1,10231,105,103,104,116,65,114,114,111,119,59,1,10230,101,102,116,4,2,97,114,3079,3086,114,114,111,119,59,1,10232,105,103,104,116,97,114,114,111,119,59,1,10234,105,103,104,116,97,114,114,111,119,59,1,10233,102,59,3,55349,56643,101,114,4,2,76,82,3123,3134,101,102,116,65,114,114,111,119,59,1,8601,105,103,104,116,65,114,114,111,119,59,1,8600,4,3,99,104,116,3154,3158,3161,114,59,1,8466,59,1,8624,114,111,107,59,1,321,59,1,8810,4,8,97,99,101,102,105,111,115,117,3188,3192,3196,3222,3227,3237,3243,3248,112,59,1,10501,121,59,1,1052,4,2,100,108,3202,3213,105,117,109,83,112,97,99,101,59,1,8287,108,105,110,116,114,102,59,1,8499,114,59,3,55349,56592,110,117,115,80,108,117,115,59,1,8723,112,102,59,3,55349,56644,99,114,59,1,8499,59,1,924,4,9,74,97,99,101,102,111,115,116,117,3271,3276,3283,3306,3422,3427,4120,4126,4137,99,121,59,1,1034,99,117,116,101,59,1,323,4,3,97,101,121,3291,3297,3303,114,111,110,59,1,327,100,105,108,59,1,325,59,1,1053,4,3,103,115,119,3314,3380,3415,97,116,105,118,101,4,3,77,84,86,3327,3340,3365,101,100,105,117,109,83,112,97,99,101,59,1,8203,104,105,4,2,99,110,3348,3357,107,83,112,97,99,101,59,1,8203,83,112,97,99,101,59,1,8203,101,114,121,84,104,105,110,83,112,97,99,101,59,1,8203,116,101,100,4,2,71,76,3389,3405,114,101,97,116,101,114,71,114,101,97,116,101,114,59,1,8811,101,115,115,76,101,115,115,59,1,8810,76,105,110,101,59,1,10,114,59,3,55349,56593,4,4,66,110,112,116,3437,3444,3460,3464,114,101,97,107,59,1,8288,66,114,101,97,107,105,110,103,83,112,97,99,101,59,1,160,102,59,1,8469,4,13,59,67,68,69,71,72,76,78,80,82,83,84,86,3492,3494,3517,3536,3578,3657,3685,3784,3823,3860,3915,4066,4107,1,10988,4,2,111,117,3500,3510,110,103,114,117,101,110,116,59,1,8802,112,67,97,112,59,1,8813,111,117,98,108,101,86,101,114,116,105,99,97,108,66,97,114,59,1,8742,4,3,108,113,120,3544,3552,3571,101,109,101,110,116,59,1,8713,117,97,108,4,2,59,84,3561,3563,1,8800,105,108,100,101,59,3,8770,824,105,115,116,115,59,1,8708,114,101,97,116,101,114,4,7,59,69,70,71,76,83,84,3600,3602,3609,3621,3631,3637,3650,1,8815,113,117,97,108,59,1,8817,117,108,108,69,113,117,97,108,59,3,8807,824,114,101,97,116,101,114,59,3,8811,824,101,115,115,59,1,8825,108,97,110,116,69,113,117,97,108,59,3,10878,824,105,108,100,101,59,1,8821,117,109,112,4,2,68,69,3666,3677,111,119,110,72,117,109,112,59,3,8782,824,113,117,97,108,59,3,8783,824,101,4,2,102,115,3692,3724,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3709,3711,3717,1,8938,97,114,59,3,10703,824,113,117,97,108,59,1,8940,115,4,6,59,69,71,76,83,84,3739,3741,3748,3757,3764,3777,1,8814,113,117,97,108,59,1,8816,114,101,97,116,101,114,59,1,8824,101,115,115,59,3,8810,824,108,97,110,116,69,113,117,97,108,59,3,10877,824,105,108,100,101,59,1,8820,101,115,116,101,100,4,2,71,76,3795,3812,114,101,97,116,101,114,71,114,101,97,116,101,114,59,3,10914,824,101,115,115,76,101,115,115,59,3,10913,824,114,101,99,101,100,101,115,4,3,59,69,83,3838,3840,3848,1,8832,113,117,97,108,59,3,10927,824,108,97,110,116,69,113,117,97,108,59,1,8928,4,2,101,105,3866,3881,118,101,114,115,101,69,108,101,109,101,110,116,59,1,8716,103,104,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3900,3902,3908,1,8939,97,114,59,3,10704,824,113,117,97,108,59,1,8941,4,2,113,117,3921,3973,117,97,114,101,83,117,4,2,98,112,3933,3952,115,101,116,4,2,59,69,3942,3945,3,8847,824,113,117,97,108,59,1,8930,101,114,115,101,116,4,2,59,69,3963,3966,3,8848,824,113,117,97,108,59,1,8931,4,3,98,99,112,3981,4e3,4045,115,101,116,4,2,59,69,3990,3993,3,8834,8402,113,117,97,108,59,1,8840,99,101,101,100,115,4,4,59,69,83,84,4015,4017,4025,4037,1,8833,113,117,97,108,59,3,10928,824,108,97,110,116,69,113,117,97,108,59,1,8929,105,108,100,101,59,3,8831,824,101,114,115,101,116,4,2,59,69,4056,4059,3,8835,8402,113,117,97,108,59,1,8841,105,108,100,101,4,4,59,69,70,84,4080,4082,4089,4100,1,8769,113,117,97,108,59,1,8772,117,108,108,69,113,117,97,108,59,1,8775,105,108,100,101,59,1,8777,101,114,116,105,99,97,108,66,97,114,59,1,8740,99,114,59,3,55349,56489,105,108,100,101,5,209,1,59,4135,1,209,59,1,925,4,14,69,97,99,100,102,103,109,111,112,114,115,116,117,118,4170,4176,4187,4205,4212,4217,4228,4253,4259,4292,4295,4316,4337,4346,108,105,103,59,1,338,99,117,116,101,5,211,1,59,4185,1,211,4,2,105,121,4193,4202,114,99,5,212,1,59,4200,1,212,59,1,1054,98,108,97,99,59,1,336,114,59,3,55349,56594,114,97,118,101,5,210,1,59,4226,1,210,4,3,97,101,105,4236,4241,4246,99,114,59,1,332,103,97,59,1,937,99,114,111,110,59,1,927,112,102,59,3,55349,56646,101,110,67,117,114,108,121,4,2,68,81,4272,4285,111,117,98,108,101,81,117,111,116,101,59,1,8220,117,111,116,101,59,1,8216,59,1,10836,4,2,99,108,4301,4306,114,59,3,55349,56490,97,115,104,5,216,1,59,4314,1,216,105,4,2,108,109,4323,4332,100,101,5,213,1,59,4330,1,213,101,115,59,1,10807,109,108,5,214,1,59,4344,1,214,101,114,4,2,66,80,4354,4380,4,2,97,114,4360,4364,114,59,1,8254,97,99,4,2,101,107,4372,4375,59,1,9182,101,116,59,1,9140,97,114,101,110,116,104,101,115,105,115,59,1,9180,4,9,97,99,102,104,105,108,111,114,115,4413,4422,4426,4431,4435,4438,4448,4471,4561,114,116,105,97,108,68,59,1,8706,121,59,1,1055,114,59,3,55349,56595,105,59,1,934,59,1,928,117,115,77,105,110,117,115,59,1,177,4,2,105,112,4454,4467,110,99,97,114,101,112,108,97,110,101,59,1,8460,102,59,1,8473,4,4,59,101,105,111,4481,4483,4526,4531,1,10939,99,101,100,101,115,4,4,59,69,83,84,4498,4500,4507,4519,1,8826,113,117,97,108,59,1,10927,108,97,110,116,69,113,117,97,108,59,1,8828,105,108,100,101,59,1,8830,109,101,59,1,8243,4,2,100,112,4537,4543,117,99,116,59,1,8719,111,114,116,105,111,110,4,2,59,97,4555,4557,1,8759,108,59,1,8733,4,2,99,105,4567,4572,114,59,3,55349,56491,59,1,936,4,4,85,102,111,115,4585,4594,4599,4604,79,84,5,34,1,59,4592,1,34,114,59,3,55349,56596,112,102,59,1,8474,99,114,59,3,55349,56492,4,12,66,69,97,99,101,102,104,105,111,114,115,117,4636,4642,4650,4681,4704,4763,4767,4771,5047,5069,5081,5094,97,114,114,59,1,10512,71,5,174,1,59,4648,1,174,4,3,99,110,114,4658,4664,4668,117,116,101,59,1,340,103,59,1,10219,114,4,2,59,116,4675,4677,1,8608,108,59,1,10518,4,3,97,101,121,4689,4695,4701,114,111,110,59,1,344,100,105,108,59,1,342,59,1,1056,4,2,59,118,4710,4712,1,8476,101,114,115,101,4,2,69,85,4722,4748,4,2,108,113,4728,4736,101,109,101,110,116,59,1,8715,117,105,108,105,98,114,105,117,109,59,1,8651,112,69,113,117,105,108,105,98,114,105,117,109,59,1,10607,114,59,1,8476,111,59,1,929,103,104,116,4,8,65,67,68,70,84,85,86,97,4792,4840,4849,4905,4912,4972,5022,5040,4,2,110,114,4798,4811,103,108,101,66,114,97,99,107,101,116,59,1,10217,114,111,119,4,3,59,66,76,4822,4824,4829,1,8594,97,114,59,1,8677,101,102,116,65,114,114,111,119,59,1,8644,101,105,108,105,110,103,59,1,8969,111,4,2,117,119,4856,4869,98,108,101,66,114,97,99,107,101,116,59,1,10215,110,4,2,84,86,4876,4887,101,101,86,101,99,116,111,114,59,1,10589,101,99,116,111,114,4,2,59,66,4898,4900,1,8642,97,114,59,1,10581,108,111,111,114,59,1,8971,4,2,101,114,4918,4944,101,4,3,59,65,86,4927,4929,4936,1,8866,114,114,111,119,59,1,8614,101,99,116,111,114,59,1,10587,105,97,110,103,108,101,4,3,59,66,69,4958,4960,4965,1,8883,97,114,59,1,10704,113,117,97,108,59,1,8885,112,4,3,68,84,86,4981,4993,5004,111,119,110,86,101,99,116,111,114,59,1,10575,101,101,86,101,99,116,111,114,59,1,10588,101,99,116,111,114,4,2,59,66,5015,5017,1,8638,97,114,59,1,10580,101,99,116,111,114,4,2,59,66,5033,5035,1,8640,97,114,59,1,10579,114,114,111,119,59,1,8658,4,2,112,117,5053,5057,102,59,1,8477,110,100,73,109,112,108,105,101,115,59,1,10608,105,103,104,116,97,114,114,111,119,59,1,8667,4,2,99,104,5087,5091,114,59,1,8475,59,1,8625,108,101,68,101,108,97,121,101,100,59,1,10740,4,13,72,79,97,99,102,104,105,109,111,113,115,116,117,5134,5150,5157,5164,5198,5203,5259,5265,5277,5283,5374,5380,5385,4,2,67,99,5140,5146,72,99,121,59,1,1065,121,59,1,1064,70,84,99,121,59,1,1068,99,117,116,101,59,1,346,4,5,59,97,101,105,121,5176,5178,5184,5190,5195,1,10940,114,111,110,59,1,352,100,105,108,59,1,350,114,99,59,1,348,59,1,1057,114,59,3,55349,56598,111,114,116,4,4,68,76,82,85,5216,5227,5238,5250,111,119,110,65,114,114,111,119,59,1,8595,101,102,116,65,114,114,111,119,59,1,8592,105,103,104,116,65,114,114,111,119,59,1,8594,112,65,114,114,111,119,59,1,8593,103,109,97,59,1,931,97,108,108,67,105,114,99,108,101,59,1,8728,112,102,59,3,55349,56650,4,2,114,117,5289,5293,116,59,1,8730,97,114,101,4,4,59,73,83,85,5306,5308,5322,5367,1,9633,110,116,101,114,115,101,99,116,105,111,110,59,1,8851,117,4,2,98,112,5329,5347,115,101,116,4,2,59,69,5338,5340,1,8847,113,117,97,108,59,1,8849,101,114,115,101,116,4,2,59,69,5358,5360,1,8848,113,117,97,108,59,1,8850,110,105,111,110,59,1,8852,99,114,59,3,55349,56494,97,114,59,1,8902,4,4,98,99,109,112,5395,5420,5475,5478,4,2,59,115,5401,5403,1,8912,101,116,4,2,59,69,5411,5413,1,8912,113,117,97,108,59,1,8838,4,2,99,104,5426,5468,101,101,100,115,4,4,59,69,83,84,5440,5442,5449,5461,1,8827,113,117,97,108,59,1,10928,108,97,110,116,69,113,117,97,108,59,1,8829,105,108,100,101,59,1,8831,84,104,97,116,59,1,8715,59,1,8721,4,3,59,101,115,5486,5488,5507,1,8913,114,115,101,116,4,2,59,69,5498,5500,1,8835,113,117,97,108,59,1,8839,101,116,59,1,8913,4,11,72,82,83,97,99,102,104,105,111,114,115,5536,5546,5552,5567,5579,5602,5607,5655,5695,5701,5711,79,82,78,5,222,1,59,5544,1,222,65,68,69,59,1,8482,4,2,72,99,5558,5563,99,121,59,1,1035,121,59,1,1062,4,2,98,117,5573,5576,59,1,9,59,1,932,4,3,97,101,121,5587,5593,5599,114,111,110,59,1,356,100,105,108,59,1,354,59,1,1058,114,59,3,55349,56599,4,2,101,105,5613,5631,4,2,114,116,5619,5627,101,102,111,114,101,59,1,8756,97,59,1,920,4,2,99,110,5637,5647,107,83,112,97,99,101,59,3,8287,8202,83,112,97,99,101,59,1,8201,108,100,101,4,4,59,69,70,84,5668,5670,5677,5688,1,8764,113,117,97,108,59,1,8771,117,108,108,69,113,117,97,108,59,1,8773,105,108,100,101,59,1,8776,112,102,59,3,55349,56651,105,112,108,101,68,111,116,59,1,8411,4,2,99,116,5717,5722,114,59,3,55349,56495,114,111,107,59,1,358,4,14,97,98,99,100,102,103,109,110,111,112,114,115,116,117,5758,5789,5805,5823,5830,5835,5846,5852,5921,5937,6089,6095,6101,6108,4,2,99,114,5764,5774,117,116,101,5,218,1,59,5772,1,218,114,4,2,59,111,5781,5783,1,8607,99,105,114,59,1,10569,114,4,2,99,101,5796,5800,121,59,1,1038,118,101,59,1,364,4,2,105,121,5811,5820,114,99,5,219,1,59,5818,1,219,59,1,1059,98,108,97,99,59,1,368,114,59,3,55349,56600,114,97,118,101,5,217,1,59,5844,1,217,97,99,114,59,1,362,4,2,100,105,5858,5905,101,114,4,2,66,80,5866,5892,4,2,97,114,5872,5876,114,59,1,95,97,99,4,2,101,107,5884,5887,59,1,9183,101,116,59,1,9141,97,114,101,110,116,104,101,115,105,115,59,1,9181,111,110,4,2,59,80,5913,5915,1,8899,108,117,115,59,1,8846,4,2,103,112,5927,5932,111,110,59,1,370,102,59,3,55349,56652,4,8,65,68,69,84,97,100,112,115,5955,5985,5996,6009,6026,6033,6044,6075,114,114,111,119,4,3,59,66,68,5967,5969,5974,1,8593,97,114,59,1,10514,111,119,110,65,114,114,111,119,59,1,8645,111,119,110,65,114,114,111,119,59,1,8597,113,117,105,108,105,98,114,105,117,109,59,1,10606,101,101,4,2,59,65,6017,6019,1,8869,114,114,111,119,59,1,8613,114,114,111,119,59,1,8657,111,119,110,97,114,114,111,119,59,1,8661,101,114,4,2,76,82,6052,6063,101,102,116,65,114,114,111,119,59,1,8598,105,103,104,116,65,114,114,111,119,59,1,8599,105,4,2,59,108,6082,6084,1,978,111,110,59,1,933,105,110,103,59,1,366,99,114,59,3,55349,56496,105,108,100,101,59,1,360,109,108,5,220,1,59,6115,1,220,4,9,68,98,99,100,101,102,111,115,118,6137,6143,6148,6152,6166,6250,6255,6261,6267,97,115,104,59,1,8875,97,114,59,1,10987,121,59,1,1042,97,115,104,4,2,59,108,6161,6163,1,8873,59,1,10982,4,2,101,114,6172,6175,59,1,8897,4,3,98,116,121,6183,6188,6238,97,114,59,1,8214,4,2,59,105,6194,6196,1,8214,99,97,108,4,4,66,76,83,84,6209,6214,6220,6231,97,114,59,1,8739,105,110,101,59,1,124,101,112,97,114,97,116,111,114,59,1,10072,105,108,100,101,59,1,8768,84,104,105,110,83,112,97,99,101,59,1,8202,114,59,3,55349,56601,112,102,59,3,55349,56653,99,114,59,3,55349,56497,100,97,115,104,59,1,8874,4,5,99,101,102,111,115,6286,6292,6298,6303,6309,105,114,99,59,1,372,100,103,101,59,1,8896,114,59,3,55349,56602,112,102,59,3,55349,56654,99,114,59,3,55349,56498,4,4,102,105,111,115,6325,6330,6333,6339,114,59,3,55349,56603,59,1,926,112,102,59,3,55349,56655,99,114,59,3,55349,56499,4,9,65,73,85,97,99,102,111,115,117,6365,6370,6375,6380,6391,6405,6410,6416,6422,99,121,59,1,1071,99,121,59,1,1031,99,121,59,1,1070,99,117,116,101,5,221,1,59,6389,1,221,4,2,105,121,6397,6402,114,99,59,1,374,59,1,1067,114,59,3,55349,56604,112,102,59,3,55349,56656,99,114,59,3,55349,56500,109,108,59,1,376,4,8,72,97,99,100,101,102,111,115,6445,6450,6457,6472,6477,6501,6505,6510,99,121,59,1,1046,99,117,116,101,59,1,377,4,2,97,121,6463,6469,114,111,110,59,1,381,59,1,1047,111,116,59,1,379,4,2,114,116,6483,6497,111,87,105,100,116,104,83,112,97,99,101,59,1,8203,97,59,1,918,114,59,1,8488,112,102,59,1,8484,99,114,59,3,55349,56501,4,16,97,98,99,101,102,103,108,109,110,111,112,114,115,116,117,119,6550,6561,6568,6612,6622,6634,6645,6672,6699,6854,6870,6923,6933,6963,6974,6983,99,117,116,101,5,225,1,59,6559,1,225,114,101,118,101,59,1,259,4,6,59,69,100,105,117,121,6582,6584,6588,6591,6600,6609,1,8766,59,3,8766,819,59,1,8767,114,99,5,226,1,59,6598,1,226,116,101,5,180,1,59,6607,1,180,59,1,1072,108,105,103,5,230,1,59,6620,1,230,4,2,59,114,6628,6630,1,8289,59,3,55349,56606,114,97,118,101,5,224,1,59,6643,1,224,4,2,101,112,6651,6667,4,2,102,112,6657,6663,115,121,109,59,1,8501,104,59,1,8501,104,97,59,1,945,4,2,97,112,6678,6692,4,2,99,108,6684,6688,114,59,1,257,103,59,1,10815,5,38,1,59,6697,1,38,4,2,100,103,6705,6737,4,5,59,97,100,115,118,6717,6719,6724,6727,6734,1,8743,110,100,59,1,10837,59,1,10844,108,111,112,101,59,1,10840,59,1,10842,4,7,59,101,108,109,114,115,122,6753,6755,6758,6762,6814,6835,6848,1,8736,59,1,10660,101,59,1,8736,115,100,4,2,59,97,6770,6772,1,8737,4,8,97,98,99,100,101,102,103,104,6790,6793,6796,6799,6802,6805,6808,6811,59,1,10664,59,1,10665,59,1,10666,59,1,10667,59,1,10668,59,1,10669,59,1,10670,59,1,10671,116,4,2,59,118,6821,6823,1,8735,98,4,2,59,100,6830,6832,1,8894,59,1,10653,4,2,112,116,6841,6845,104,59,1,8738,59,1,197,97,114,114,59,1,9084,4,2,103,112,6860,6865,111,110,59,1,261,102,59,3,55349,56658,4,7,59,69,97,101,105,111,112,6886,6888,6891,6897,6900,6904,6908,1,8776,59,1,10864,99,105,114,59,1,10863,59,1,8778,100,59,1,8779,115,59,1,39,114,111,120,4,2,59,101,6917,6919,1,8776,113,59,1,8778,105,110,103,5,229,1,59,6931,1,229,4,3,99,116,121,6941,6946,6949,114,59,3,55349,56502,59,1,42,109,112,4,2,59,101,6957,6959,1,8776,113,59,1,8781,105,108,100,101,5,227,1,59,6972,1,227,109,108,5,228,1,59,6981,1,228,4,2,99,105,6989,6997,111,110,105,110,116,59,1,8755,110,116,59,1,10769,4,16,78,97,98,99,100,101,102,105,107,108,110,111,112,114,115,117,7036,7041,7119,7135,7149,7155,7219,7224,7347,7354,7463,7489,7786,7793,7814,7866,111,116,59,1,10989,4,2,99,114,7047,7094,107,4,4,99,101,112,115,7058,7064,7073,7080,111,110,103,59,1,8780,112,115,105,108,111,110,59,1,1014,114,105,109,101,59,1,8245,105,109,4,2,59,101,7088,7090,1,8765,113,59,1,8909,4,2,118,119,7100,7105,101,101,59,1,8893,101,100,4,2,59,103,7113,7115,1,8965,101,59,1,8965,114,107,4,2,59,116,7127,7129,1,9141,98,114,107,59,1,9142,4,2,111,121,7141,7146,110,103,59,1,8780,59,1,1073,113,117,111,59,1,8222,4,5,99,109,112,114,116,7167,7181,7188,7193,7199,97,117,115,4,2,59,101,7176,7178,1,8757,59,1,8757,112,116,121,118,59,1,10672,115,105,59,1,1014,110,111,117,59,1,8492,4,3,97,104,119,7207,7210,7213,59,1,946,59,1,8502,101,101,110,59,1,8812,114,59,3,55349,56607,103,4,7,99,111,115,116,117,118,119,7241,7262,7288,7305,7328,7335,7340,4,3,97,105,117,7249,7253,7258,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,4,3,100,112,116,7270,7275,7281,111,116,59,1,10752,108,117,115,59,1,10753,105,109,101,115,59,1,10754,4,2,113,116,7294,7300,99,117,112,59,1,10758,97,114,59,1,9733,114,105,97,110,103,108,101,4,2,100,117,7318,7324,111,119,110,59,1,9661,112,59,1,9651,112,108,117,115,59,1,10756,101,101,59,1,8897,101,100,103,101,59,1,8896,97,114,111,119,59,1,10509,4,3,97,107,111,7362,7436,7458,4,2,99,110,7368,7432,107,4,3,108,115,116,7377,7386,7394,111,122,101,110,103,101,59,1,10731,113,117,97,114,101,59,1,9642,114,105,97,110,103,108,101,4,4,59,100,108,114,7411,7413,7419,7425,1,9652,111,119,110,59,1,9662,101,102,116,59,1,9666,105,103,104,116,59,1,9656,107,59,1,9251,4,2,49,51,7442,7454,4,2,50,52,7448,7451,59,1,9618,59,1,9617,52,59,1,9619,99,107,59,1,9608,4,2,101,111,7469,7485,4,2,59,113,7475,7478,3,61,8421,117,105,118,59,3,8801,8421,116,59,1,8976,4,4,112,116,119,120,7499,7504,7517,7523,102,59,3,55349,56659,4,2,59,116,7510,7512,1,8869,111,109,59,1,8869,116,105,101,59,1,8904,4,12,68,72,85,86,98,100,104,109,112,116,117,118,7549,7571,7597,7619,7655,7660,7682,7708,7715,7721,7728,7750,4,4,76,82,108,114,7559,7562,7565,7568,59,1,9559,59,1,9556,59,1,9558,59,1,9555,4,5,59,68,85,100,117,7583,7585,7588,7591,7594,1,9552,59,1,9574,59,1,9577,59,1,9572,59,1,9575,4,4,76,82,108,114,7607,7610,7613,7616,59,1,9565,59,1,9562,59,1,9564,59,1,9561,4,7,59,72,76,82,104,108,114,7635,7637,7640,7643,7646,7649,7652,1,9553,59,1,9580,59,1,9571,59,1,9568,59,1,9579,59,1,9570,59,1,9567,111,120,59,1,10697,4,4,76,82,108,114,7670,7673,7676,7679,59,1,9557,59,1,9554,59,1,9488,59,1,9484,4,5,59,68,85,100,117,7694,7696,7699,7702,7705,1,9472,59,1,9573,59,1,9576,59,1,9516,59,1,9524,105,110,117,115,59,1,8863,108,117,115,59,1,8862,105,109,101,115,59,1,8864,4,4,76,82,108,114,7738,7741,7744,7747,59,1,9563,59,1,9560,59,1,9496,59,1,9492,4,7,59,72,76,82,104,108,114,7766,7768,7771,7774,7777,7780,7783,1,9474,59,1,9578,59,1,9569,59,1,9566,59,1,9532,59,1,9508,59,1,9500,114,105,109,101,59,1,8245,4,2,101,118,7799,7804,118,101,59,1,728,98,97,114,5,166,1,59,7812,1,166,4,4,99,101,105,111,7824,7829,7834,7846,114,59,3,55349,56503,109,105,59,1,8271,109,4,2,59,101,7841,7843,1,8765,59,1,8909,108,4,3,59,98,104,7855,7857,7860,1,92,59,1,10693,115,117,98,59,1,10184,4,2,108,109,7872,7885,108,4,2,59,101,7879,7881,1,8226,116,59,1,8226,112,4,3,59,69,101,7894,7896,7899,1,8782,59,1,10926,4,2,59,113,7905,7907,1,8783,59,1,8783,4,15,97,99,100,101,102,104,105,108,111,114,115,116,117,119,121,7942,8021,8075,8080,8121,8126,8157,8279,8295,8430,8446,8485,8491,8707,8726,4,3,99,112,114,7950,7956,8007,117,116,101,59,1,263,4,6,59,97,98,99,100,115,7970,7972,7977,7984,7998,8003,1,8745,110,100,59,1,10820,114,99,117,112,59,1,10825,4,2,97,117,7990,7994,112,59,1,10827,112,59,1,10823,111,116,59,1,10816,59,3,8745,65024,4,2,101,111,8013,8017,116,59,1,8257,110,59,1,711,4,4,97,101,105,117,8031,8046,8056,8061,4,2,112,114,8037,8041,115,59,1,10829,111,110,59,1,269,100,105,108,5,231,1,59,8054,1,231,114,99,59,1,265,112,115,4,2,59,115,8069,8071,1,10828,109,59,1,10832,111,116,59,1,267,4,3,100,109,110,8088,8097,8104,105,108,5,184,1,59,8095,1,184,112,116,121,118,59,1,10674,116,5,162,2,59,101,8112,8114,1,162,114,100,111,116,59,1,183,114,59,3,55349,56608,4,3,99,101,105,8134,8138,8154,121,59,1,1095,99,107,4,2,59,109,8146,8148,1,10003,97,114,107,59,1,10003,59,1,967,114,4,7,59,69,99,101,102,109,115,8174,8176,8179,8258,8261,8268,8273,1,9675,59,1,10691,4,3,59,101,108,8187,8189,8193,1,710,113,59,1,8791,101,4,2,97,100,8200,8223,114,114,111,119,4,2,108,114,8210,8216,101,102,116,59,1,8634,105,103,104,116,59,1,8635,4,5,82,83,97,99,100,8235,8238,8241,8246,8252,59,1,174,59,1,9416,115,116,59,1,8859,105,114,99,59,1,8858,97,115,104,59,1,8861,59,1,8791,110,105,110,116,59,1,10768,105,100,59,1,10991,99,105,114,59,1,10690,117,98,115,4,2,59,117,8288,8290,1,9827,105,116,59,1,9827,4,4,108,109,110,112,8305,8326,8376,8400,111,110,4,2,59,101,8313,8315,1,58,4,2,59,113,8321,8323,1,8788,59,1,8788,4,2,109,112,8332,8344,97,4,2,59,116,8339,8341,1,44,59,1,64,4,3,59,102,108,8352,8354,8358,1,8705,110,59,1,8728,101,4,2,109,120,8365,8371,101,110,116,59,1,8705,101,115,59,1,8450,4,2,103,105,8382,8395,4,2,59,100,8388,8390,1,8773,111,116,59,1,10861,110,116,59,1,8750,4,3,102,114,121,8408,8412,8417,59,3,55349,56660,111,100,59,1,8720,5,169,2,59,115,8424,8426,1,169,114,59,1,8471,4,2,97,111,8436,8441,114,114,59,1,8629,115,115,59,1,10007,4,2,99,117,8452,8457,114,59,3,55349,56504,4,2,98,112,8463,8474,4,2,59,101,8469,8471,1,10959,59,1,10961,4,2,59,101,8480,8482,1,10960,59,1,10962,100,111,116,59,1,8943,4,7,100,101,108,112,114,118,119,8507,8522,8536,8550,8600,8697,8702,97,114,114,4,2,108,114,8516,8519,59,1,10552,59,1,10549,4,2,112,115,8528,8532,114,59,1,8926,99,59,1,8927,97,114,114,4,2,59,112,8545,8547,1,8630,59,1,10557,4,6,59,98,99,100,111,115,8564,8566,8573,8587,8592,8596,1,8746,114,99,97,112,59,1,10824,4,2,97,117,8579,8583,112,59,1,10822,112,59,1,10826,111,116,59,1,8845,114,59,1,10821,59,3,8746,65024,4,4,97,108,114,118,8610,8623,8663,8672,114,114,4,2,59,109,8618,8620,1,8631,59,1,10556,121,4,3,101,118,119,8632,8651,8656,113,4,2,112,115,8639,8645,114,101,99,59,1,8926,117,99,99,59,1,8927,101,101,59,1,8910,101,100,103,101,59,1,8911,101,110,5,164,1,59,8670,1,164,101,97,114,114,111,119,4,2,108,114,8684,8690,101,102,116,59,1,8630,105,103,104,116,59,1,8631,101,101,59,1,8910,101,100,59,1,8911,4,2,99,105,8713,8721,111,110,105,110,116,59,1,8754,110,116,59,1,8753,108,99,116,121,59,1,9005,4,19,65,72,97,98,99,100,101,102,104,105,106,108,111,114,115,116,117,119,122,8773,8778,8783,8821,8839,8854,8887,8914,8930,8944,9036,9041,9058,9197,9227,9258,9281,9297,9305,114,114,59,1,8659,97,114,59,1,10597,4,4,103,108,114,115,8793,8799,8805,8809,103,101,114,59,1,8224,101,116,104,59,1,8504,114,59,1,8595,104,4,2,59,118,8816,8818,1,8208,59,1,8867,4,2,107,108,8827,8834,97,114,111,119,59,1,10511,97,99,59,1,733,4,2,97,121,8845,8851,114,111,110,59,1,271,59,1,1076,4,3,59,97,111,8862,8864,8880,1,8518,4,2,103,114,8870,8876,103,101,114,59,1,8225,114,59,1,8650,116,115,101,113,59,1,10871,4,3,103,108,109,8895,8902,8907,5,176,1,59,8900,1,176,116,97,59,1,948,112,116,121,118,59,1,10673,4,2,105,114,8920,8926,115,104,116,59,1,10623,59,3,55349,56609,97,114,4,2,108,114,8938,8941,59,1,8643,59,1,8642,4,5,97,101,103,115,118,8956,8986,8989,8996,9001,109,4,3,59,111,115,8965,8967,8983,1,8900,110,100,4,2,59,115,8975,8977,1,8900,117,105,116,59,1,9830,59,1,9830,59,1,168,97,109,109,97,59,1,989,105,110,59,1,8946,4,3,59,105,111,9009,9011,9031,1,247,100,101,5,247,2,59,111,9020,9022,1,247,110,116,105,109,101,115,59,1,8903,110,120,59,1,8903,99,121,59,1,1106,99,4,2,111,114,9048,9053,114,110,59,1,8990,111,112,59,1,8973,4,5,108,112,116,117,119,9070,9076,9081,9130,9144,108,97,114,59,1,36,102,59,3,55349,56661,4,5,59,101,109,112,115,9093,9095,9109,9116,9122,1,729,113,4,2,59,100,9102,9104,1,8784,111,116,59,1,8785,105,110,117,115,59,1,8760,108,117,115,59,1,8724,113,117,97,114,101,59,1,8865,98,108,101,98,97,114,119,101,100,103,101,59,1,8966,110,4,3,97,100,104,9153,9160,9172,114,114,111,119,59,1,8595,111,119,110,97,114,114,111,119,115,59,1,8650,97,114,112,111,111,110,4,2,108,114,9184,9190,101,102,116,59,1,8643,105,103,104,116,59,1,8642,4,2,98,99,9203,9211,107,97,114,111,119,59,1,10512,4,2,111,114,9217,9222,114,110,59,1,8991,111,112,59,1,8972,4,3,99,111,116,9235,9248,9252,4,2,114,121,9241,9245,59,3,55349,56505,59,1,1109,108,59,1,10742,114,111,107,59,1,273,4,2,100,114,9264,9269,111,116,59,1,8945,105,4,2,59,102,9276,9278,1,9663,59,1,9662,4,2,97,104,9287,9292,114,114,59,1,8693,97,114,59,1,10607,97,110,103,108,101,59,1,10662,4,2,99,105,9311,9315,121,59,1,1119,103,114,97,114,114,59,1,10239,4,18,68,97,99,100,101,102,103,108,109,110,111,112,113,114,115,116,117,120,9361,9376,9398,9439,9444,9447,9462,9495,9531,9585,9598,9614,9659,9755,9771,9792,9808,9826,4,2,68,111,9367,9372,111,116,59,1,10871,116,59,1,8785,4,2,99,115,9382,9392,117,116,101,5,233,1,59,9390,1,233,116,101,114,59,1,10862,4,4,97,105,111,121,9408,9414,9430,9436,114,111,110,59,1,283,114,4,2,59,99,9421,9423,1,8790,5,234,1,59,9428,1,234,108,111,110,59,1,8789,59,1,1101,111,116,59,1,279,59,1,8519,4,2,68,114,9453,9458,111,116,59,1,8786,59,3,55349,56610,4,3,59,114,115,9470,9472,9482,1,10906,97,118,101,5,232,1,59,9480,1,232,4,2,59,100,9488,9490,1,10902,111,116,59,1,10904,4,4,59,105,108,115,9505,9507,9515,9518,1,10905,110,116,101,114,115,59,1,9191,59,1,8467,4,2,59,100,9524,9526,1,10901,111,116,59,1,10903,4,3,97,112,115,9539,9544,9564,99,114,59,1,275,116,121,4,3,59,115,118,9554,9556,9561,1,8709,101,116,59,1,8709,59,1,8709,112,4,2,49,59,9571,9583,4,2,51,52,9577,9580,59,1,8196,59,1,8197,1,8195,4,2,103,115,9591,9594,59,1,331,112,59,1,8194,4,2,103,112,9604,9609,111,110,59,1,281,102,59,3,55349,56662,4,3,97,108,115,9622,9635,9640,114,4,2,59,115,9629,9631,1,8917,108,59,1,10723,117,115,59,1,10865,105,4,3,59,108,118,9649,9651,9656,1,949,111,110,59,1,949,59,1,1013,4,4,99,115,117,118,9669,9686,9716,9747,4,2,105,111,9675,9680,114,99,59,1,8790,108,111,110,59,1,8789,4,2,105,108,9692,9696,109,59,1,8770,97,110,116,4,2,103,108,9705,9710,116,114,59,1,10902,101,115,115,59,1,10901,4,3,97,101,105,9724,9729,9734,108,115,59,1,61,115,116,59,1,8799,118,4,2,59,68,9741,9743,1,8801,68,59,1,10872,112,97,114,115,108,59,1,10725,4,2,68,97,9761,9766,111,116,59,1,8787,114,114,59,1,10609,4,3,99,100,105,9779,9783,9788,114,59,1,8495,111,116,59,1,8784,109,59,1,8770,4,2,97,104,9798,9801,59,1,951,5,240,1,59,9806,1,240,4,2,109,114,9814,9822,108,5,235,1,59,9820,1,235,111,59,1,8364,4,3,99,105,112,9834,9838,9843,108,59,1,33,115,116,59,1,8707,4,2,101,111,9849,9859,99,116,97,116,105,111,110,59,1,8496,110,101,110,116,105,97,108,101,59,1,8519,4,12,97,99,101,102,105,106,108,110,111,112,114,115,9896,9910,9914,9921,9954,9960,9967,9989,9994,10027,10036,10164,108,108,105,110,103,100,111,116,115,101,113,59,1,8786,121,59,1,1092,109,97,108,101,59,1,9792,4,3,105,108,114,9929,9935,9950,108,105,103,59,1,64259,4,2,105,108,9941,9945,103,59,1,64256,105,103,59,1,64260,59,3,55349,56611,108,105,103,59,1,64257,108,105,103,59,3,102,106,4,3,97,108,116,9975,9979,9984,116,59,1,9837,105,103,59,1,64258,110,115,59,1,9649,111,102,59,1,402,4,2,112,114,1e4,10005,102,59,3,55349,56663,4,2,97,107,10011,10016,108,108,59,1,8704,4,2,59,118,10022,10024,1,8916,59,1,10969,97,114,116,105,110,116,59,1,10765,4,2,97,111,10042,10159,4,2,99,115,10048,10155,4,6,49,50,51,52,53,55,10062,10102,10114,10135,10139,10151,4,6,50,51,52,53,54,56,10076,10083,10086,10093,10096,10099,5,189,1,59,10081,1,189,59,1,8531,5,188,1,59,10091,1,188,59,1,8533,59,1,8537,59,1,8539,4,2,51,53,10108,10111,59,1,8532,59,1,8534,4,3,52,53,56,10122,10129,10132,5,190,1,59,10127,1,190,59,1,8535,59,1,8540,53,59,1,8536,4,2,54,56,10145,10148,59,1,8538,59,1,8541,56,59,1,8542,108,59,1,8260,119,110,59,1,8994,99,114,59,3,55349,56507,4,17,69,97,98,99,100,101,102,103,105,106,108,110,111,114,115,116,118,10206,10217,10247,10254,10268,10273,10358,10363,10374,10380,10385,10406,10458,10464,10470,10497,10610,4,2,59,108,10212,10214,1,8807,59,1,10892,4,3,99,109,112,10225,10231,10244,117,116,101,59,1,501,109,97,4,2,59,100,10239,10241,1,947,59,1,989,59,1,10886,114,101,118,101,59,1,287,4,2,105,121,10260,10265,114,99,59,1,285,59,1,1075,111,116,59,1,289,4,4,59,108,113,115,10283,10285,10288,10308,1,8805,59,1,8923,4,3,59,113,115,10296,10298,10301,1,8805,59,1,8807,108,97,110,116,59,1,10878,4,4,59,99,100,108,10318,10320,10324,10345,1,10878,99,59,1,10921,111,116,4,2,59,111,10332,10334,1,10880,4,2,59,108,10340,10342,1,10882,59,1,10884,4,2,59,101,10351,10354,3,8923,65024,115,59,1,10900,114,59,3,55349,56612,4,2,59,103,10369,10371,1,8811,59,1,8921,109,101,108,59,1,8503,99,121,59,1,1107,4,4,59,69,97,106,10395,10397,10400,10403,1,8823,59,1,10898,59,1,10917,59,1,10916,4,4,69,97,101,115,10416,10419,10434,10453,59,1,8809,112,4,2,59,112,10426,10428,1,10890,114,111,120,59,1,10890,4,2,59,113,10440,10442,1,10888,4,2,59,113,10448,10450,1,10888,59,1,8809,105,109,59,1,8935,112,102,59,3,55349,56664,97,118,101,59,1,96,4,2,99,105,10476,10480,114,59,1,8458,109,4,3,59,101,108,10489,10491,10494,1,8819,59,1,10894,59,1,10896,5,62,6,59,99,100,108,113,114,10512,10514,10527,10532,10538,10545,1,62,4,2,99,105,10520,10523,59,1,10919,114,59,1,10874,111,116,59,1,8919,80,97,114,59,1,10645,117,101,115,116,59,1,10876,4,5,97,100,101,108,115,10557,10574,10579,10599,10605,4,2,112,114,10563,10570,112,114,111,120,59,1,10886,114,59,1,10616,111,116,59,1,8919,113,4,2,108,113,10586,10592,101,115,115,59,1,8923,108,101,115,115,59,1,10892,101,115,115,59,1,8823,105,109,59,1,8819,4,2,101,110,10616,10626,114,116,110,101,113,113,59,3,8809,65024,69,59,3,8809,65024,4,10,65,97,98,99,101,102,107,111,115,121,10653,10658,10713,10718,10724,10760,10765,10786,10850,10875,114,114,59,1,8660,4,4,105,108,109,114,10668,10674,10678,10684,114,115,112,59,1,8202,102,59,1,189,105,108,116,59,1,8459,4,2,100,114,10690,10695,99,121,59,1,1098,4,3,59,99,119,10703,10705,10710,1,8596,105,114,59,1,10568,59,1,8621,97,114,59,1,8463,105,114,99,59,1,293,4,3,97,108,114,10732,10748,10754,114,116,115,4,2,59,117,10741,10743,1,9829,105,116,59,1,9829,108,105,112,59,1,8230,99,111,110,59,1,8889,114,59,3,55349,56613,115,4,2,101,119,10772,10779,97,114,111,119,59,1,10533,97,114,111,119,59,1,10534,4,5,97,109,111,112,114,10798,10803,10809,10839,10844,114,114,59,1,8703,116,104,116,59,1,8763,107,4,2,108,114,10816,10827,101,102,116,97,114,114,111,119,59,1,8617,105,103,104,116,97,114,114,111,119,59,1,8618,102,59,3,55349,56665,98,97,114,59,1,8213,4,3,99,108,116,10858,10863,10869,114,59,3,55349,56509,97,115,104,59,1,8463,114,111,107,59,1,295,4,2,98,112,10881,10887,117,108,108,59,1,8259,104,101,110,59,1,8208,4,15,97,99,101,102,103,105,106,109,110,111,112,113,115,116,117,10925,10936,10958,10977,10990,11001,11039,11045,11101,11192,11220,11226,11237,11285,11299,99,117,116,101,5,237,1,59,10934,1,237,4,3,59,105,121,10944,10946,10955,1,8291,114,99,5,238,1,59,10953,1,238,59,1,1080,4,2,99,120,10964,10968,121,59,1,1077,99,108,5,161,1,59,10975,1,161,4,2,102,114,10983,10986,59,1,8660,59,3,55349,56614,114,97,118,101,5,236,1,59,10999,1,236,4,4,59,105,110,111,11011,11013,11028,11034,1,8520,4,2,105,110,11019,11024,110,116,59,1,10764,116,59,1,8749,102,105,110,59,1,10716,116,97,59,1,8489,108,105,103,59,1,307,4,3,97,111,112,11053,11092,11096,4,3,99,103,116,11061,11065,11088,114,59,1,299,4,3,101,108,112,11073,11076,11082,59,1,8465,105,110,101,59,1,8464,97,114,116,59,1,8465,104,59,1,305,102,59,1,8887,101,100,59,1,437,4,5,59,99,102,111,116,11113,11115,11121,11136,11142,1,8712,97,114,101,59,1,8453,105,110,4,2,59,116,11129,11131,1,8734,105,101,59,1,10717,100,111,116,59,1,305,4,5,59,99,101,108,112,11154,11156,11161,11179,11186,1,8747,97,108,59,1,8890,4,2,103,114,11167,11173,101,114,115,59,1,8484,99,97,108,59,1,8890,97,114,104,107,59,1,10775,114,111,100,59,1,10812,4,4,99,103,112,116,11202,11206,11211,11216,121,59,1,1105,111,110,59,1,303,102,59,3,55349,56666,97,59,1,953,114,111,100,59,1,10812,117,101,115,116,5,191,1,59,11235,1,191,4,2,99,105,11243,11248,114,59,3,55349,56510,110,4,5,59,69,100,115,118,11261,11263,11266,11271,11282,1,8712,59,1,8953,111,116,59,1,8949,4,2,59,118,11277,11279,1,8948,59,1,8947,59,1,8712,4,2,59,105,11291,11293,1,8290,108,100,101,59,1,297,4,2,107,109,11305,11310,99,121,59,1,1110,108,5,239,1,59,11316,1,239,4,6,99,102,109,111,115,117,11332,11346,11351,11357,11363,11380,4,2,105,121,11338,11343,114,99,59,1,309,59,1,1081,114,59,3,55349,56615,97,116,104,59,1,567,112,102,59,3,55349,56667,4,2,99,101,11369,11374,114,59,3,55349,56511,114,99,121,59,1,1112,107,99,121,59,1,1108,4,8,97,99,102,103,104,106,111,115,11404,11418,11433,11438,11445,11450,11455,11461,112,112,97,4,2,59,118,11413,11415,1,954,59,1,1008,4,2,101,121,11424,11430,100,105,108,59,1,311,59,1,1082,114,59,3,55349,56616,114,101,101,110,59,1,312,99,121,59,1,1093,99,121,59,1,1116,112,102,59,3,55349,56668,99,114,59,3,55349,56512,4,23,65,66,69,72,97,98,99,100,101,102,103,104,106,108,109,110,111,112,114,115,116,117,118,11515,11538,11544,11555,11560,11721,11780,11818,11868,12136,12160,12171,12203,12208,12246,12275,12327,12509,12523,12569,12641,12732,12752,4,3,97,114,116,11523,11528,11532,114,114,59,1,8666,114,59,1,8656,97,105,108,59,1,10523,97,114,114,59,1,10510,4,2,59,103,11550,11552,1,8806,59,1,10891,97,114,59,1,10594,4,9,99,101,103,109,110,112,113,114,116,11580,11586,11594,11600,11606,11624,11627,11636,11694,117,116,101,59,1,314,109,112,116,121,118,59,1,10676,114,97,110,59,1,8466,98,100,97,59,1,955,103,4,3,59,100,108,11615,11617,11620,1,10216,59,1,10641,101,59,1,10216,59,1,10885,117,111,5,171,1,59,11634,1,171,114,4,8,59,98,102,104,108,112,115,116,11655,11657,11669,11673,11677,11681,11685,11690,1,8592,4,2,59,102,11663,11665,1,8676,115,59,1,10527,115,59,1,10525,107,59,1,8617,112,59,1,8619,108,59,1,10553,105,109,59,1,10611,108,59,1,8610,4,3,59,97,101,11702,11704,11709,1,10923,105,108,59,1,10521,4,2,59,115,11715,11717,1,10925,59,3,10925,65024,4,3,97,98,114,11729,11734,11739,114,114,59,1,10508,114,107,59,1,10098,4,2,97,107,11745,11758,99,4,2,101,107,11752,11755,59,1,123,59,1,91,4,2,101,115,11764,11767,59,1,10635,108,4,2,100,117,11774,11777,59,1,10639,59,1,10637,4,4,97,101,117,121,11790,11796,11811,11815,114,111,110,59,1,318,4,2,100,105,11802,11807,105,108,59,1,316,108,59,1,8968,98,59,1,123,59,1,1083,4,4,99,113,114,115,11828,11832,11845,11864,97,59,1,10550,117,111,4,2,59,114,11840,11842,1,8220,59,1,8222,4,2,100,117,11851,11857,104,97,114,59,1,10599,115,104,97,114,59,1,10571,104,59,1,8626,4,5,59,102,103,113,115,11880,11882,12008,12011,12031,1,8804,116,4,5,97,104,108,114,116,11895,11913,11935,11947,11996,114,114,111,119,4,2,59,116,11905,11907,1,8592,97,105,108,59,1,8610,97,114,112,111,111,110,4,2,100,117,11925,11931,111,119,110,59,1,8637,112,59,1,8636,101,102,116,97,114,114,111,119,115,59,1,8647,105,103,104,116,4,3,97,104,115,11959,11974,11984,114,114,111,119,4,2,59,115,11969,11971,1,8596,59,1,8646,97,114,112,111,111,110,115,59,1,8651,113,117,105,103,97,114,114,111,119,59,1,8621,104,114,101,101,116,105,109,101,115,59,1,8907,59,1,8922,4,3,59,113,115,12019,12021,12024,1,8804,59,1,8806,108,97,110,116,59,1,10877,4,5,59,99,100,103,115,12043,12045,12049,12070,12083,1,10877,99,59,1,10920,111,116,4,2,59,111,12057,12059,1,10879,4,2,59,114,12065,12067,1,10881,59,1,10883,4,2,59,101,12076,12079,3,8922,65024,115,59,1,10899,4,5,97,100,101,103,115,12095,12103,12108,12126,12131,112,112,114,111,120,59,1,10885,111,116,59,1,8918,113,4,2,103,113,12115,12120,116,114,59,1,8922,103,116,114,59,1,10891,116,114,59,1,8822,105,109,59,1,8818,4,3,105,108,114,12144,12150,12156,115,104,116,59,1,10620,111,111,114,59,1,8970,59,3,55349,56617,4,2,59,69,12166,12168,1,8822,59,1,10897,4,2,97,98,12177,12198,114,4,2,100,117,12184,12187,59,1,8637,4,2,59,108,12193,12195,1,8636,59,1,10602,108,107,59,1,9604,99,121,59,1,1113,4,5,59,97,99,104,116,12220,12222,12227,12235,12241,1,8810,114,114,59,1,8647,111,114,110,101,114,59,1,8990,97,114,100,59,1,10603,114,105,59,1,9722,4,2,105,111,12252,12258,100,111,116,59,1,320,117,115,116,4,2,59,97,12267,12269,1,9136,99,104,101,59,1,9136,4,4,69,97,101,115,12285,12288,12303,12322,59,1,8808,112,4,2,59,112,12295,12297,1,10889,114,111,120,59,1,10889,4,2,59,113,12309,12311,1,10887,4,2,59,113,12317,12319,1,10887,59,1,8808,105,109,59,1,8934,4,8,97,98,110,111,112,116,119,122,12345,12359,12364,12421,12446,12467,12474,12490,4,2,110,114,12351,12355,103,59,1,10220,114,59,1,8701,114,107,59,1,10214,103,4,3,108,109,114,12373,12401,12409,101,102,116,4,2,97,114,12382,12389,114,114,111,119,59,1,10229,105,103,104,116,97,114,114,111,119,59,1,10231,97,112,115,116,111,59,1,10236,105,103,104,116,97,114,114,111,119,59,1,10230,112,97,114,114,111,119,4,2,108,114,12433,12439,101,102,116,59,1,8619,105,103,104,116,59,1,8620,4,3,97,102,108,12454,12458,12462,114,59,1,10629,59,3,55349,56669,117,115,59,1,10797,105,109,101,115,59,1,10804,4,2,97,98,12480,12485,115,116,59,1,8727,97,114,59,1,95,4,3,59,101,102,12498,12500,12506,1,9674,110,103,101,59,1,9674,59,1,10731,97,114,4,2,59,108,12517,12519,1,40,116,59,1,10643,4,5,97,99,104,109,116,12535,12540,12548,12561,12564,114,114,59,1,8646,111,114,110,101,114,59,1,8991,97,114,4,2,59,100,12556,12558,1,8651,59,1,10605,59,1,8206,114,105,59,1,8895,4,6,97,99,104,105,113,116,12583,12589,12594,12597,12614,12635,113,117,111,59,1,8249,114,59,3,55349,56513,59,1,8624,109,4,3,59,101,103,12606,12608,12611,1,8818,59,1,10893,59,1,10895,4,2,98,117,12620,12623,59,1,91,111,4,2,59,114,12630,12632,1,8216,59,1,8218,114,111,107,59,1,322,5,60,8,59,99,100,104,105,108,113,114,12660,12662,12675,12680,12686,12692,12698,12705,1,60,4,2,99,105,12668,12671,59,1,10918,114,59,1,10873,111,116,59,1,8918,114,101,101,59,1,8907,109,101,115,59,1,8905,97,114,114,59,1,10614,117,101,115,116,59,1,10875,4,2,80,105,12711,12716,97,114,59,1,10646,4,3,59,101,102,12724,12726,12729,1,9667,59,1,8884,59,1,9666,114,4,2,100,117,12739,12746,115,104,97,114,59,1,10570,104,97,114,59,1,10598,4,2,101,110,12758,12768,114,116,110,101,113,113,59,3,8808,65024,69,59,3,8808,65024,4,14,68,97,99,100,101,102,104,105,108,110,111,112,115,117,12803,12809,12893,12908,12914,12928,12933,12937,13011,13025,13032,13049,13052,13069,68,111,116,59,1,8762,4,4,99,108,112,114,12819,12827,12849,12887,114,5,175,1,59,12825,1,175,4,2,101,116,12833,12836,59,1,9794,4,2,59,101,12842,12844,1,10016,115,101,59,1,10016,4,2,59,115,12855,12857,1,8614,116,111,4,4,59,100,108,117,12869,12871,12877,12883,1,8614,111,119,110,59,1,8615,101,102,116,59,1,8612,112,59,1,8613,107,101,114,59,1,9646,4,2,111,121,12899,12905,109,109,97,59,1,10793,59,1,1084,97,115,104,59,1,8212,97,115,117,114,101,100,97,110,103,108,101,59,1,8737,114,59,3,55349,56618,111,59,1,8487,4,3,99,100,110,12945,12954,12985,114,111,5,181,1,59,12952,1,181,4,4,59,97,99,100,12964,12966,12971,12976,1,8739,115,116,59,1,42,105,114,59,1,10992,111,116,5,183,1,59,12983,1,183,117,115,4,3,59,98,100,12995,12997,13e3,1,8722,59,1,8863,4,2,59,117,13006,13008,1,8760,59,1,10794,4,2,99,100,13017,13021,112,59,1,10971,114,59,1,8230,112,108,117,115,59,1,8723,4,2,100,112,13038,13044,101,108,115,59,1,8871,102,59,3,55349,56670,59,1,8723,4,2,99,116,13058,13063,114,59,3,55349,56514,112,111,115,59,1,8766,4,3,59,108,109,13077,13079,13087,1,956,116,105,109,97,112,59,1,8888,97,112,59,1,8888,4,24,71,76,82,86,97,98,99,100,101,102,103,104,105,106,108,109,111,112,114,115,116,117,118,119,13142,13165,13217,13229,13247,13330,13359,13414,13420,13508,13513,13579,13602,13626,13631,13762,13767,13855,13936,13995,14214,14285,14312,14432,4,2,103,116,13148,13152,59,3,8921,824,4,2,59,118,13158,13161,3,8811,8402,59,3,8811,824,4,3,101,108,116,13173,13200,13204,102,116,4,2,97,114,13181,13188,114,114,111,119,59,1,8653,105,103,104,116,97,114,114,111,119,59,1,8654,59,3,8920,824,4,2,59,118,13210,13213,3,8810,8402,59,3,8810,824,105,103,104,116,97,114,114,111,119,59,1,8655,4,2,68,100,13235,13241,97,115,104,59,1,8879,97,115,104,59,1,8878,4,5,98,99,110,112,116,13259,13264,13270,13275,13308,108,97,59,1,8711,117,116,101,59,1,324,103,59,3,8736,8402,4,5,59,69,105,111,112,13287,13289,13293,13298,13302,1,8777,59,3,10864,824,100,59,3,8779,824,115,59,1,329,114,111,120,59,1,8777,117,114,4,2,59,97,13316,13318,1,9838,108,4,2,59,115,13325,13327,1,9838,59,1,8469,4,2,115,117,13336,13344,112,5,160,1,59,13342,1,160,109,112,4,2,59,101,13352,13355,3,8782,824,59,3,8783,824,4,5,97,101,111,117,121,13371,13385,13391,13407,13411,4,2,112,114,13377,13380,59,1,10819,111,110,59,1,328,100,105,108,59,1,326,110,103,4,2,59,100,13399,13401,1,8775,111,116,59,3,10861,824,112,59,1,10818,59,1,1085,97,115,104,59,1,8211,4,7,59,65,97,100,113,115,120,13436,13438,13443,13466,13472,13478,13494,1,8800,114,114,59,1,8663,114,4,2,104,114,13450,13454,107,59,1,10532,4,2,59,111,13460,13462,1,8599,119,59,1,8599,111,116,59,3,8784,824,117,105,118,59,1,8802,4,2,101,105,13484,13489,97,114,59,1,10536,109,59,3,8770,824,105,115,116,4,2,59,115,13503,13505,1,8708,59,1,8708,114,59,3,55349,56619,4,4,69,101,115,116,13523,13527,13563,13568,59,3,8807,824,4,3,59,113,115,13535,13537,13559,1,8817,4,3,59,113,115,13545,13547,13551,1,8817,59,3,8807,824,108,97,110,116,59,3,10878,824,59,3,10878,824,105,109,59,1,8821,4,2,59,114,13574,13576,1,8815,59,1,8815,4,3,65,97,112,13587,13592,13597,114,114,59,1,8654,114,114,59,1,8622,97,114,59,1,10994,4,3,59,115,118,13610,13612,13623,1,8715,4,2,59,100,13618,13620,1,8956,59,1,8954,59,1,8715,99,121,59,1,1114,4,7,65,69,97,100,101,115,116,13647,13652,13656,13661,13665,13737,13742,114,114,59,1,8653,59,3,8806,824,114,114,59,1,8602,114,59,1,8229,4,4,59,102,113,115,13675,13677,13703,13725,1,8816,116,4,2,97,114,13684,13691,114,114,111,119,59,1,8602,105,103,104,116,97,114,114,111,119,59,1,8622,4,3,59,113,115,13711,13713,13717,1,8816,59,3,8806,824,108,97,110,116,59,3,10877,824,4,2,59,115,13731,13734,3,10877,824,59,1,8814,105,109,59,1,8820,4,2,59,114,13748,13750,1,8814,105,4,2,59,101,13757,13759,1,8938,59,1,8940,105,100,59,1,8740,4,2,112,116,13773,13778,102,59,3,55349,56671,5,172,3,59,105,110,13787,13789,13829,1,172,110,4,4,59,69,100,118,13800,13802,13806,13812,1,8713,59,3,8953,824,111,116,59,3,8949,824,4,3,97,98,99,13820,13823,13826,59,1,8713,59,1,8951,59,1,8950,105,4,2,59,118,13836,13838,1,8716,4,3,97,98,99,13846,13849,13852,59,1,8716,59,1,8958,59,1,8957,4,3,97,111,114,13863,13892,13899,114,4,4,59,97,115,116,13874,13876,13883,13888,1,8742,108,108,101,108,59,1,8742,108,59,3,11005,8421,59,3,8706,824,108,105,110,116,59,1,10772,4,3,59,99,101,13907,13909,13914,1,8832,117,101,59,1,8928,4,2,59,99,13920,13923,3,10927,824,4,2,59,101,13929,13931,1,8832,113,59,3,10927,824,4,4,65,97,105,116,13946,13951,13971,13982,114,114,59,1,8655,114,114,4,3,59,99,119,13961,13963,13967,1,8603,59,3,10547,824,59,3,8605,824,103,104,116,97,114,114,111,119,59,1,8603,114,105,4,2,59,101,13990,13992,1,8939,59,1,8941,4,7,99,104,105,109,112,113,117,14011,14036,14060,14080,14085,14090,14106,4,4,59,99,101,114,14021,14023,14028,14032,1,8833,117,101,59,1,8929,59,3,10928,824,59,3,55349,56515,111,114,116,4,2,109,112,14045,14050,105,100,59,1,8740,97,114,97,108,108,101,108,59,1,8742,109,4,2,59,101,14067,14069,1,8769,4,2,59,113,14075,14077,1,8772,59,1,8772,105,100,59,1,8740,97,114,59,1,8742,115,117,4,2,98,112,14098,14102,101,59,1,8930,101,59,1,8931,4,3,98,99,112,14114,14157,14171,4,4,59,69,101,115,14124,14126,14130,14133,1,8836,59,3,10949,824,59,1,8840,101,116,4,2,59,101,14141,14144,3,8834,8402,113,4,2,59,113,14151,14153,1,8840,59,3,10949,824,99,4,2,59,101,14164,14166,1,8833,113,59,3,10928,824,4,4,59,69,101,115,14181,14183,14187,14190,1,8837,59,3,10950,824,59,1,8841,101,116,4,2,59,101,14198,14201,3,8835,8402,113,4,2,59,113,14208,14210,1,8841,59,3,10950,824,4,4,103,105,108,114,14224,14228,14238,14242,108,59,1,8825,108,100,101,5,241,1,59,14236,1,241,103,59,1,8824,105,97,110,103,108,101,4,2,108,114,14254,14269,101,102,116,4,2,59,101,14263,14265,1,8938,113,59,1,8940,105,103,104,116,4,2,59,101,14279,14281,1,8939,113,59,1,8941,4,2,59,109,14291,14293,1,957,4,3,59,101,115,14301,14303,14308,1,35,114,111,59,1,8470,112,59,1,8199,4,9,68,72,97,100,103,105,108,114,115,14332,14338,14344,14349,14355,14369,14376,14408,14426,97,115,104,59,1,8877,97,114,114,59,1,10500,112,59,3,8781,8402,97,115,104,59,1,8876,4,2,101,116,14361,14365,59,3,8805,8402,59,3,62,8402,110,102,105,110,59,1,10718,4,3,65,101,116,14384,14389,14393,114,114,59,1,10498,59,3,8804,8402,4,2,59,114,14399,14402,3,60,8402,105,101,59,3,8884,8402,4,2,65,116,14414,14419,114,114,59,1,10499,114,105,101,59,3,8885,8402,105,109,59,3,8764,8402,4,3,65,97,110,14440,14445,14468,114,114,59,1,8662,114,4,2,104,114,14452,14456,107,59,1,10531,4,2,59,111,14462,14464,1,8598,119,59,1,8598,101,97,114,59,1,10535,4,18,83,97,99,100,101,102,103,104,105,108,109,111,112,114,115,116,117,118,14512,14515,14535,14560,14597,14603,14618,14643,14657,14662,14701,14741,14747,14769,14851,14877,14907,14916,59,1,9416,4,2,99,115,14521,14531,117,116,101,5,243,1,59,14529,1,243,116,59,1,8859,4,2,105,121,14541,14557,114,4,2,59,99,14548,14550,1,8858,5,244,1,59,14555,1,244,59,1,1086,4,5,97,98,105,111,115,14572,14577,14583,14587,14591,115,104,59,1,8861,108,97,99,59,1,337,118,59,1,10808,116,59,1,8857,111,108,100,59,1,10684,108,105,103,59,1,339,4,2,99,114,14609,14614,105,114,59,1,10687,59,3,55349,56620,4,3,111,114,116,14626,14630,14640,110,59,1,731,97,118,101,5,242,1,59,14638,1,242,59,1,10689,4,2,98,109,14649,14654,97,114,59,1,10677,59,1,937,110,116,59,1,8750,4,4,97,99,105,116,14672,14677,14693,14698,114,114,59,1,8634,4,2,105,114,14683,14687,114,59,1,10686,111,115,115,59,1,10683,110,101,59,1,8254,59,1,10688,4,3,97,101,105,14709,14714,14719,99,114,59,1,333,103,97,59,1,969,4,3,99,100,110,14727,14733,14736,114,111,110,59,1,959,59,1,10678,117,115,59,1,8854,112,102,59,3,55349,56672,4,3,97,101,108,14755,14759,14764,114,59,1,10679,114,112,59,1,10681,117,115,59,1,8853,4,7,59,97,100,105,111,115,118,14785,14787,14792,14831,14837,14841,14848,1,8744,114,114,59,1,8635,4,4,59,101,102,109,14802,14804,14817,14824,1,10845,114,4,2,59,111,14811,14813,1,8500,102,59,1,8500,5,170,1,59,14822,1,170,5,186,1,59,14829,1,186,103,111,102,59,1,8886,114,59,1,10838,108,111,112,101,59,1,10839,59,1,10843,4,3,99,108,111,14859,14863,14873,114,59,1,8500,97,115,104,5,248,1,59,14871,1,248,108,59,1,8856,105,4,2,108,109,14884,14893,100,101,5,245,1,59,14891,1,245,101,115,4,2,59,97,14901,14903,1,8855,115,59,1,10806,109,108,5,246,1,59,14914,1,246,98,97,114,59,1,9021,4,12,97,99,101,102,104,105,108,109,111,114,115,117,14948,14992,14996,15033,15038,15068,15090,15189,15192,15222,15427,15441,114,4,4,59,97,115,116,14959,14961,14976,14989,1,8741,5,182,2,59,108,14968,14970,1,182,108,101,108,59,1,8741,4,2,105,108,14982,14986,109,59,1,10995,59,1,11005,59,1,8706,121,59,1,1087,114,4,5,99,105,109,112,116,15009,15014,15019,15024,15027,110,116,59,1,37,111,100,59,1,46,105,108,59,1,8240,59,1,8869,101,110,107,59,1,8241,114,59,3,55349,56621,4,3,105,109,111,15046,15057,15063,4,2,59,118,15052,15054,1,966,59,1,981,109,97,116,59,1,8499,110,101,59,1,9742,4,3,59,116,118,15076,15078,15087,1,960,99,104,102,111,114,107,59,1,8916,59,1,982,4,2,97,117,15096,15119,110,4,2,99,107,15103,15115,107,4,2,59,104,15110,15112,1,8463,59,1,8462,118,59,1,8463,115,4,9,59,97,98,99,100,101,109,115,116,15140,15142,15148,15151,15156,15168,15171,15179,15184,1,43,99,105,114,59,1,10787,59,1,8862,105,114,59,1,10786,4,2,111,117,15162,15165,59,1,8724,59,1,10789,59,1,10866,110,5,177,1,59,15177,1,177,105,109,59,1,10790,119,111,59,1,10791,59,1,177,4,3,105,112,117,15200,15208,15213,110,116,105,110,116,59,1,10773,102,59,3,55349,56673,110,100,5,163,1,59,15220,1,163,4,10,59,69,97,99,101,105,110,111,115,117,15244,15246,15249,15253,15258,15334,15347,15367,15416,15421,1,8826,59,1,10931,112,59,1,10935,117,101,59,1,8828,4,2,59,99,15264,15266,1,10927,4,6,59,97,99,101,110,115,15280,15282,15290,15299,15303,15329,1,8826,112,112,114,111,120,59,1,10935,117,114,108,121,101,113,59,1,8828,113,59,1,10927,4,3,97,101,115,15311,15319,15324,112,112,114,111,120,59,1,10937,113,113,59,1,10933,105,109,59,1,8936,105,109,59,1,8830,109,101,4,2,59,115,15342,15344,1,8242,59,1,8473,4,3,69,97,115,15355,15358,15362,59,1,10933,112,59,1,10937,105,109,59,1,8936,4,3,100,102,112,15375,15378,15404,59,1,8719,4,3,97,108,115,15386,15392,15398,108,97,114,59,1,9006,105,110,101,59,1,8978,117,114,102,59,1,8979,4,2,59,116,15410,15412,1,8733,111,59,1,8733,105,109,59,1,8830,114,101,108,59,1,8880,4,2,99,105,15433,15438,114,59,3,55349,56517,59,1,968,110,99,115,112,59,1,8200,4,6,102,105,111,112,115,117,15462,15467,15472,15478,15485,15491,114,59,3,55349,56622,110,116,59,1,10764,112,102,59,3,55349,56674,114,105,109,101,59,1,8279,99,114,59,3,55349,56518,4,3,97,101,111,15499,15520,15534,116,4,2,101,105,15506,15515,114,110,105,111,110,115,59,1,8461,110,116,59,1,10774,115,116,4,2,59,101,15528,15530,1,63,113,59,1,8799,116,5,34,1,59,15540,1,34,4,21,65,66,72,97,98,99,100,101,102,104,105,108,109,110,111,112,114,115,116,117,120,15586,15609,15615,15620,15796,15855,15893,15931,15977,16001,16039,16183,16204,16222,16228,16285,16312,16318,16363,16408,16416,4,3,97,114,116,15594,15599,15603,114,114,59,1,8667,114,59,1,8658,97,105,108,59,1,10524,97,114,114,59,1,10511,97,114,59,1,10596,4,7,99,100,101,110,113,114,116,15636,15651,15656,15664,15687,15696,15770,4,2,101,117,15642,15646,59,3,8765,817,116,101,59,1,341,105,99,59,1,8730,109,112,116,121,118,59,1,10675,103,4,4,59,100,101,108,15675,15677,15680,15683,1,10217,59,1,10642,59,1,10661,101,59,1,10217,117,111,5,187,1,59,15694,1,187,114,4,11,59,97,98,99,102,104,108,112,115,116,119,15721,15723,15727,15739,15742,15746,15750,15754,15758,15763,15767,1,8594,112,59,1,10613,4,2,59,102,15733,15735,1,8677,115,59,1,10528,59,1,10547,115,59,1,10526,107,59,1,8618,112,59,1,8620,108,59,1,10565,105,109,59,1,10612,108,59,1,8611,59,1,8605,4,2,97,105,15776,15781,105,108,59,1,10522,111,4,2,59,110,15788,15790,1,8758,97,108,115,59,1,8474,4,3,97,98,114,15804,15809,15814,114,114,59,1,10509,114,107,59,1,10099,4,2,97,107,15820,15833,99,4,2,101,107,15827,15830,59,1,125,59,1,93,4,2,101,115,15839,15842,59,1,10636,108,4,2,100,117,15849,15852,59,1,10638,59,1,10640,4,4,97,101,117,121,15865,15871,15886,15890,114,111,110,59,1,345,4,2,100,105,15877,15882,105,108,59,1,343,108,59,1,8969,98,59,1,125,59,1,1088,4,4,99,108,113,115,15903,15907,15914,15927,97,59,1,10551,100,104,97,114,59,1,10601,117,111,4,2,59,114,15922,15924,1,8221,59,1,8221,104,59,1,8627,4,3,97,99,103,15939,15966,15970,108,4,4,59,105,112,115,15950,15952,15957,15963,1,8476,110,101,59,1,8475,97,114,116,59,1,8476,59,1,8477,116,59,1,9645,5,174,1,59,15975,1,174,4,3,105,108,114,15985,15991,15997,115,104,116,59,1,10621,111,111,114,59,1,8971,59,3,55349,56623,4,2,97,111,16007,16028,114,4,2,100,117,16014,16017,59,1,8641,4,2,59,108,16023,16025,1,8640,59,1,10604,4,2,59,118,16034,16036,1,961,59,1,1009,4,3,103,110,115,16047,16167,16171,104,116,4,6,97,104,108,114,115,116,16063,16081,16103,16130,16143,16155,114,114,111,119,4,2,59,116,16073,16075,1,8594,97,105,108,59,1,8611,97,114,112,111,111,110,4,2,100,117,16093,16099,111,119,110,59,1,8641,112,59,1,8640,101,102,116,4,2,97,104,16112,16120,114,114,111,119,115,59,1,8644,97,114,112,111,111,110,115,59,1,8652,105,103,104,116,97,114,114,111,119,115,59,1,8649,113,117,105,103,97,114,114,111,119,59,1,8605,104,114,101,101,116,105,109,101,115,59,1,8908,103,59,1,730,105,110,103,100,111,116,115,101,113,59,1,8787,4,3,97,104,109,16191,16196,16201,114,114,59,1,8644,97,114,59,1,8652,59,1,8207,111,117,115,116,4,2,59,97,16214,16216,1,9137,99,104,101,59,1,9137,109,105,100,59,1,10990,4,4,97,98,112,116,16238,16252,16257,16278,4,2,110,114,16244,16248,103,59,1,10221,114,59,1,8702,114,107,59,1,10215,4,3,97,102,108,16265,16269,16273,114,59,1,10630,59,3,55349,56675,117,115,59,1,10798,105,109,101,115,59,1,10805,4,2,97,112,16291,16304,114,4,2,59,103,16298,16300,1,41,116,59,1,10644,111,108,105,110,116,59,1,10770,97,114,114,59,1,8649,4,4,97,99,104,113,16328,16334,16339,16342,113,117,111,59,1,8250,114,59,3,55349,56519,59,1,8625,4,2,98,117,16348,16351,59,1,93,111,4,2,59,114,16358,16360,1,8217,59,1,8217,4,3,104,105,114,16371,16377,16383,114,101,101,59,1,8908,109,101,115,59,1,8906,105,4,4,59,101,102,108,16394,16396,16399,16402,1,9657,59,1,8885,59,1,9656,116,114,105,59,1,10702,108,117,104,97,114,59,1,10600,59,1,8478,4,19,97,98,99,100,101,102,104,105,108,109,111,112,113,114,115,116,117,119,122,16459,16466,16472,16572,16590,16672,16687,16746,16844,16850,16924,16963,16988,17115,17121,17154,17206,17614,17656,99,117,116,101,59,1,347,113,117,111,59,1,8218,4,10,59,69,97,99,101,105,110,112,115,121,16494,16496,16499,16513,16518,16531,16536,16556,16564,16569,1,8827,59,1,10932,4,2,112,114,16505,16508,59,1,10936,111,110,59,1,353,117,101,59,1,8829,4,2,59,100,16524,16526,1,10928,105,108,59,1,351,114,99,59,1,349,4,3,69,97,115,16544,16547,16551,59,1,10934,112,59,1,10938,105,109,59,1,8937,111,108,105,110,116,59,1,10771,105,109,59,1,8831,59,1,1089,111,116,4,3,59,98,101,16582,16584,16587,1,8901,59,1,8865,59,1,10854,4,7,65,97,99,109,115,116,120,16606,16611,16634,16642,16646,16652,16668,114,114,59,1,8664,114,4,2,104,114,16618,16622,107,59,1,10533,4,2,59,111,16628,16630,1,8600,119,59,1,8600,116,5,167,1,59,16640,1,167,105,59,1,59,119,97,114,59,1,10537,109,4,2,105,110,16659,16665,110,117,115,59,1,8726,59,1,8726,116,59,1,10038,114,4,2,59,111,16679,16682,3,55349,56624,119,110,59,1,8994,4,4,97,99,111,121,16697,16702,16716,16739,114,112,59,1,9839,4,2,104,121,16708,16713,99,121,59,1,1097,59,1,1096,114,116,4,2,109,112,16724,16729,105,100,59,1,8739,97,114,97,108,108,101,108,59,1,8741,5,173,1,59,16744,1,173,4,2,103,109,16752,16770,109,97,4,3,59,102,118,16762,16764,16767,1,963,59,1,962,59,1,962,4,8,59,100,101,103,108,110,112,114,16788,16790,16795,16806,16817,16828,16832,16838,1,8764,111,116,59,1,10858,4,2,59,113,16801,16803,1,8771,59,1,8771,4,2,59,69,16812,16814,1,10910,59,1,10912,4,2,59,69,16823,16825,1,10909,59,1,10911,101,59,1,8774,108,117,115,59,1,10788,97,114,114,59,1,10610,97,114,114,59,1,8592,4,4,97,101,105,116,16860,16883,16891,16904,4,2,108,115,16866,16878,108,115,101,116,109,105,110,117,115,59,1,8726,104,112,59,1,10803,112,97,114,115,108,59,1,10724,4,2,100,108,16897,16900,59,1,8739,101,59,1,8995,4,2,59,101,16910,16912,1,10922,4,2,59,115,16918,16920,1,10924,59,3,10924,65024,4,3,102,108,112,16932,16938,16958,116,99,121,59,1,1100,4,2,59,98,16944,16946,1,47,4,2,59,97,16952,16954,1,10692,114,59,1,9023,102,59,3,55349,56676,97,4,2,100,114,16970,16985,101,115,4,2,59,117,16978,16980,1,9824,105,116,59,1,9824,59,1,8741,4,3,99,115,117,16996,17028,17089,4,2,97,117,17002,17015,112,4,2,59,115,17009,17011,1,8851,59,3,8851,65024,112,4,2,59,115,17022,17024,1,8852,59,3,8852,65024,117,4,2,98,112,17035,17062,4,3,59,101,115,17043,17045,17048,1,8847,59,1,8849,101,116,4,2,59,101,17056,17058,1,8847,113,59,1,8849,4,3,59,101,115,17070,17072,17075,1,8848,59,1,8850,101,116,4,2,59,101,17083,17085,1,8848,113,59,1,8850,4,3,59,97,102,17097,17099,17112,1,9633,114,4,2,101,102,17106,17109,59,1,9633,59,1,9642,59,1,9642,97,114,114,59,1,8594,4,4,99,101,109,116,17131,17136,17142,17148,114,59,3,55349,56520,116,109,110,59,1,8726,105,108,101,59,1,8995,97,114,102,59,1,8902,4,2,97,114,17160,17172,114,4,2,59,102,17167,17169,1,9734,59,1,9733,4,2,97,110,17178,17202,105,103,104,116,4,2,101,112,17188,17197,112,115,105,108,111,110,59,1,1013,104,105,59,1,981,115,59,1,175,4,5,98,99,109,110,112,17218,17351,17420,17423,17427,4,9,59,69,100,101,109,110,112,114,115,17238,17240,17243,17248,17261,17267,17279,17285,17291,1,8834,59,1,10949,111,116,59,1,10941,4,2,59,100,17254,17256,1,8838,111,116,59,1,10947,117,108,116,59,1,10945,4,2,69,101,17273,17276,59,1,10955,59,1,8842,108,117,115,59,1,10943,97,114,114,59,1,10617,4,3,101,105,117,17299,17335,17339,116,4,3,59,101,110,17308,17310,17322,1,8834,113,4,2,59,113,17317,17319,1,8838,59,1,10949,101,113,4,2,59,113,17330,17332,1,8842,59,1,10955,109,59,1,10951,4,2,98,112,17345,17348,59,1,10965,59,1,10963,99,4,6,59,97,99,101,110,115,17366,17368,17376,17385,17389,17415,1,8827,112,112,114,111,120,59,1,10936,117,114,108,121,101,113,59,1,8829,113,59,1,10928,4,3,97,101,115,17397,17405,17410,112,112,114,111,120,59,1,10938,113,113,59,1,10934,105,109,59,1,8937,105,109,59,1,8831,59,1,8721,103,59,1,9834,4,13,49,50,51,59,69,100,101,104,108,109,110,112,115,17455,17462,17469,17476,17478,17481,17496,17509,17524,17530,17536,17548,17554,5,185,1,59,17460,1,185,5,178,1,59,17467,1,178,5,179,1,59,17474,1,179,1,8835,59,1,10950,4,2,111,115,17487,17491,116,59,1,10942,117,98,59,1,10968,4,2,59,100,17502,17504,1,8839,111,116,59,1,10948,115,4,2,111,117,17516,17520,108,59,1,10185,98,59,1,10967,97,114,114,59,1,10619,117,108,116,59,1,10946,4,2,69,101,17542,17545,59,1,10956,59,1,8843,108,117,115,59,1,10944,4,3,101,105,117,17562,17598,17602,116,4,3,59,101,110,17571,17573,17585,1,8835,113,4,2,59,113,17580,17582,1,8839,59,1,10950,101,113,4,2,59,113,17593,17595,1,8843,59,1,10956,109,59,1,10952,4,2,98,112,17608,17611,59,1,10964,59,1,10966,4,3,65,97,110,17622,17627,17650,114,114,59,1,8665,114,4,2,104,114,17634,17638,107,59,1,10534,4,2,59,111,17644,17646,1,8601,119,59,1,8601,119,97,114,59,1,10538,108,105,103,5,223,1,59,17664,1,223,4,13,97,98,99,100,101,102,104,105,111,112,114,115,119,17694,17709,17714,17737,17742,17749,17754,17860,17905,17957,17964,18090,18122,4,2,114,117,17700,17706,103,101,116,59,1,8982,59,1,964,114,107,59,1,9140,4,3,97,101,121,17722,17728,17734,114,111,110,59,1,357,100,105,108,59,1,355,59,1,1090,111,116,59,1,8411,108,114,101,99,59,1,8981,114,59,3,55349,56625,4,4,101,105,107,111,17764,17805,17836,17851,4,2,114,116,17770,17786,101,4,2,52,102,17777,17780,59,1,8756,111,114,101,59,1,8756,97,4,3,59,115,118,17795,17797,17802,1,952,121,109,59,1,977,59,1,977,4,2,99,110,17811,17831,107,4,2,97,115,17818,17826,112,112,114,111,120,59,1,8776,105,109,59,1,8764,115,112,59,1,8201,4,2,97,115,17842,17846,112,59,1,8776,105,109,59,1,8764,114,110,5,254,1,59,17858,1,254,4,3,108,109,110,17868,17873,17901,100,101,59,1,732,101,115,5,215,3,59,98,100,17884,17886,17898,1,215,4,2,59,97,17892,17894,1,8864,114,59,1,10801,59,1,10800,116,59,1,8749,4,3,101,112,115,17913,17917,17953,97,59,1,10536,4,4,59,98,99,102,17927,17929,17934,17939,1,8868,111,116,59,1,9014,105,114,59,1,10993,4,2,59,111,17945,17948,3,55349,56677,114,107,59,1,10970,97,59,1,10537,114,105,109,101,59,1,8244,4,3,97,105,112,17972,17977,18082,100,101,59,1,8482,4,7,97,100,101,109,112,115,116,17993,18051,18056,18059,18066,18072,18076,110,103,108,101,4,5,59,100,108,113,114,18009,18011,18017,18032,18035,1,9653,111,119,110,59,1,9663,101,102,116,4,2,59,101,18026,18028,1,9667,113,59,1,8884,59,1,8796,105,103,104,116,4,2,59,101,18045,18047,1,9657,113,59,1,8885,111,116,59,1,9708,59,1,8796,105,110,117,115,59,1,10810,108,117,115,59,1,10809,98,59,1,10701,105,109,101,59,1,10811,101,122,105,117,109,59,1,9186,4,3,99,104,116,18098,18111,18116,4,2,114,121,18104,18108,59,3,55349,56521,59,1,1094,99,121,59,1,1115,114,111,107,59,1,359,4,2,105,111,18128,18133,120,116,59,1,8812,104,101,97,100,4,2,108,114,18143,18154,101,102,116,97,114,114,111,119,59,1,8606,105,103,104,116,97,114,114,111,119,59,1,8608,4,18,65,72,97,98,99,100,102,103,104,108,109,111,112,114,115,116,117,119,18204,18209,18214,18234,18250,18268,18292,18308,18319,18343,18379,18397,18413,18504,18547,18553,18584,18603,114,114,59,1,8657,97,114,59,1,10595,4,2,99,114,18220,18230,117,116,101,5,250,1,59,18228,1,250,114,59,1,8593,114,4,2,99,101,18241,18245,121,59,1,1118,118,101,59,1,365,4,2,105,121,18256,18265,114,99,5,251,1,59,18263,1,251,59,1,1091,4,3,97,98,104,18276,18281,18287,114,114,59,1,8645,108,97,99,59,1,369,97,114,59,1,10606,4,2,105,114,18298,18304,115,104,116,59,1,10622,59,3,55349,56626,114,97,118,101,5,249,1,59,18317,1,249,4,2,97,98,18325,18338,114,4,2,108,114,18332,18335,59,1,8639,59,1,8638,108,107,59,1,9600,4,2,99,116,18349,18374,4,2,111,114,18355,18369,114,110,4,2,59,101,18363,18365,1,8988,114,59,1,8988,111,112,59,1,8975,114,105,59,1,9720,4,2,97,108,18385,18390,99,114,59,1,363,5,168,1,59,18395,1,168,4,2,103,112,18403,18408,111,110,59,1,371,102,59,3,55349,56678,4,6,97,100,104,108,115,117,18427,18434,18445,18470,18475,18494,114,114,111,119,59,1,8593,111,119,110,97,114,114,111,119,59,1,8597,97,114,112,111,111,110,4,2,108,114,18457,18463,101,102,116,59,1,8639,105,103,104,116,59,1,8638,117,115,59,1,8846,105,4,3,59,104,108,18484,18486,18489,1,965,59,1,978,111,110,59,1,965,112,97,114,114,111,119,115,59,1,8648,4,3,99,105,116,18512,18537,18542,4,2,111,114,18518,18532,114,110,4,2,59,101,18526,18528,1,8989,114,59,1,8989,111,112,59,1,8974,110,103,59,1,367,114,105,59,1,9721,99,114,59,3,55349,56522,4,3,100,105,114,18561,18566,18572,111,116,59,1,8944,108,100,101,59,1,361,105,4,2,59,102,18579,18581,1,9653,59,1,9652,4,2,97,109,18590,18595,114,114,59,1,8648,108,5,252,1,59,18601,1,252,97,110,103,108,101,59,1,10663,4,15,65,66,68,97,99,100,101,102,108,110,111,112,114,115,122,18643,18648,18661,18667,18847,18851,18857,18904,18909,18915,18931,18937,18943,18949,18996,114,114,59,1,8661,97,114,4,2,59,118,18656,18658,1,10984,59,1,10985,97,115,104,59,1,8872,4,2,110,114,18673,18679,103,114,116,59,1,10652,4,7,101,107,110,112,114,115,116,18695,18704,18711,18720,18742,18754,18810,112,115,105,108,111,110,59,1,1013,97,112,112,97,59,1,1008,111,116,104,105,110,103,59,1,8709,4,3,104,105,114,18728,18732,18735,105,59,1,981,59,1,982,111,112,116,111,59,1,8733,4,2,59,104,18748,18750,1,8597,111,59,1,1009,4,2,105,117,18760,18766,103,109,97,59,1,962,4,2,98,112,18772,18791,115,101,116,110,101,113,4,2,59,113,18784,18787,3,8842,65024,59,3,10955,65024,115,101,116,110,101,113,4,2,59,113,18803,18806,3,8843,65024,59,3,10956,65024,4,2,104,114,18816,18822,101,116,97,59,1,977,105,97,110,103,108,101,4,2,108,114,18834,18840,101,102,116,59,1,8882,105,103,104,116,59,1,8883,121,59,1,1074,97,115,104,59,1,8866,4,3,101,108,114,18865,18884,18890,4,3,59,98,101,18873,18875,18880,1,8744,97,114,59,1,8891,113,59,1,8794,108,105,112,59,1,8942,4,2,98,116,18896,18901,97,114,59,1,124,59,1,124,114,59,3,55349,56627,116,114,105,59,1,8882,115,117,4,2,98,112,18923,18927,59,3,8834,8402,59,3,8835,8402,112,102,59,3,55349,56679,114,111,112,59,1,8733,116,114,105,59,1,8883,4,2,99,117,18955,18960,114,59,3,55349,56523,4,2,98,112,18966,18981,110,4,2,69,101,18973,18977,59,3,10955,65024,59,3,8842,65024,110,4,2,69,101,18988,18992,59,3,10956,65024,59,3,8843,65024,105,103,122,97,103,59,1,10650,4,7,99,101,102,111,112,114,115,19020,19026,19061,19066,19072,19075,19089,105,114,99,59,1,373,4,2,100,105,19032,19055,4,2,98,103,19038,19043,97,114,59,1,10847,101,4,2,59,113,19050,19052,1,8743,59,1,8793,101,114,112,59,1,8472,114,59,3,55349,56628,112,102,59,3,55349,56680,59,1,8472,4,2,59,101,19081,19083,1,8768,97,116,104,59,1,8768,99,114,59,3,55349,56524,4,14,99,100,102,104,105,108,109,110,111,114,115,117,118,119,19125,19146,19152,19157,19173,19176,19192,19197,19202,19236,19252,19269,19286,19291,4,3,97,105,117,19133,19137,19142,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,116,114,105,59,1,9661,114,59,3,55349,56629,4,2,65,97,19163,19168,114,114,59,1,10234,114,114,59,1,10231,59,1,958,4,2,65,97,19182,19187,114,114,59,1,10232,114,114,59,1,10229,97,112,59,1,10236,105,115,59,1,8955,4,3,100,112,116,19210,19215,19230,111,116,59,1,10752,4,2,102,108,19221,19225,59,3,55349,56681,117,115,59,1,10753,105,109,101,59,1,10754,4,2,65,97,19242,19247,114,114,59,1,10233,114,114,59,1,10230,4,2,99,113,19258,19263,114,59,3,55349,56525,99,117,112,59,1,10758,4,2,112,116,19275,19281,108,117,115,59,1,10756,114,105,59,1,9651,101,101,59,1,8897,101,100,103,101,59,1,8896,4,8,97,99,101,102,105,111,115,117,19316,19335,19349,19357,19362,19367,19373,19379,99,4,2,117,121,19323,19332,116,101,5,253,1,59,19330,1,253,59,1,1103,4,2,105,121,19341,19346,114,99,59,1,375,59,1,1099,110,5,165,1,59,19355,1,165,114,59,3,55349,56630,99,121,59,1,1111,112,102,59,3,55349,56682,99,114,59,3,55349,56526,4,2,99,109,19385,19389,121,59,1,1102,108,5,255,1,59,19395,1,255,4,10,97,99,100,101,102,104,105,111,115,119,19419,19426,19441,19446,19462,19467,19472,19480,19486,19492,99,117,116,101,59,1,378,4,2,97,121,19432,19438,114,111,110,59,1,382,59,1,1079,111,116,59,1,380,4,2,101,116,19452,19458,116,114,102,59,1,8488,97,59,1,950,114,59,3,55349,56631,99,121,59,1,1078,103,114,97,114,114,59,1,8669,112,102,59,3,55349,56683,99,114,59,3,55349,56527,4,2,106,110,19498,19501,59,1,8205,106,59,1,8204]);const eE=Zv,tE=Uv,nE=Jv,rE=Wv,iE=tE.CODE_POINTS,aE=tE.CODE_POINT_SEQUENCES,oE={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},sE="DATA_STATE";function lE(e){return e===iE.SPACE||e===iE.LINE_FEED||e===iE.TABULATION||e===iE.FORM_FEED}function cE(e){return e>=iE.DIGIT_0&&e<=iE.DIGIT_9}function uE(e){return e>=iE.LATIN_CAPITAL_A&&e<=iE.LATIN_CAPITAL_Z}function hE(e){return e>=iE.LATIN_SMALL_A&&e<=iE.LATIN_SMALL_Z}function pE(e){return hE(e)||uE(e)}function dE(e){return pE(e)||cE(e)}function fE(e){return e>=iE.LATIN_CAPITAL_A&&e<=iE.LATIN_CAPITAL_F}function mE(e){return e>=iE.LATIN_SMALL_A&&e<=iE.LATIN_SMALL_F}function gE(e){return e+32}function yE(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(e>>>10&1023|55296)+String.fromCharCode(56320|1023&e))}function vE(e){return String.fromCharCode(gE(e))}function EE(e,t){const n=nE[++e];let r=++e,i=r+n-1;for(;r<=i;){const e=r+i>>>1,a=nE[e];if(a<t)r=e+1;else{if(!(a>t))return nE[e+n];i=e-1}}return-1}class xE{constructor(){this.preprocessor=new eE,this.tokenQueue=[],this.allowCDATA=!1,this.state=sE,this.returnState="",this.charRefCode=-1,this.tempBuff=[],this.lastStartTagName="",this.consumedAfterSnapshot=-1,this.active=!1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr=null}_err(){}_errOnNextCodePoint(e){this._consume(),this._err(e),this._unconsume()}getNextToken(){for(;!this.tokenQueue.length&&this.active;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this[this.state](e)}return this.tokenQueue.shift()}write(e,t){this.active=!0,this.preprocessor.write(e,t)}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e)}_ensureHibernation(){if(this.preprocessor.endOfChunkHit){for(;this.consumedAfterSnapshot>0;this.consumedAfterSnapshot--)this.preprocessor.retreat();return this.active=!1,this.tokenQueue.push({type:xE.HIBERNATION_TOKEN}),!0}return!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(){this.consumedAfterSnapshot--,this.preprocessor.retreat()}_reconsumeInState(e){this.state=e,this._unconsume()}_consumeSequenceIfMatch(e,t,n){let r=0,i=!0;const a=e.length;let o,s=0,l=t;for(;s<a;s++){if(s>0&&(l=this._consume(),r++),l===iE.EOF){i=!1;break}if(o=e[s],l!==o&&(n||l!==gE(o))){i=!1;break}}if(!i)for(;r--;)this._unconsume();return i}_isTempBufferEqualToScriptString(){if(this.tempBuff.length!==aE.SCRIPT_STRING.length)return!1;for(let e=0;e<this.tempBuff.length;e++)if(this.tempBuff[e]!==aE.SCRIPT_STRING[e])return!1;return!0}_createStartTagToken(){this.currentToken={type:xE.START_TAG_TOKEN,tagName:"",selfClosing:!1,ackSelfClosing:!1,attrs:[]}}_createEndTagToken(){this.currentToken={type:xE.END_TAG_TOKEN,tagName:"",selfClosing:!1,attrs:[]}}_createCommentToken(){this.currentToken={type:xE.COMMENT_TOKEN,data:""}}_createDoctypeToken(e){this.currentToken={type:xE.DOCTYPE_TOKEN,name:e,forceQuirks:!1,publicId:null,systemId:null}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t}}_createEOFToken(){this.currentToken={type:xE.EOF_TOKEN}}_createAttr(e){this.currentAttr={name:e,value:""}}_leaveAttrName(e){null===xE.getTokenAttr(this.currentToken,this.currentAttr.name)?this.currentToken.attrs.push(this.currentAttr):this._err(rE.duplicateAttribute),this.state=e}_leaveAttrValue(e){this.state=e}_emitCurrentToken(){this._emitCurrentCharacterToken();const e=this.currentToken;this.currentToken=null,e.type===xE.START_TAG_TOKEN?this.lastStartTagName=e.tagName:e.type===xE.END_TAG_TOKEN&&(e.attrs.length>0&&this._err(rE.endTagWithAttributes),e.selfClosing&&this._err(rE.endTagWithTrailingSolidus)),this.tokenQueue.push(e)}_emitCurrentCharacterToken(){this.currentCharacterToken&&(this.tokenQueue.push(this.currentCharacterToken),this.currentCharacterToken=null)}_emitEOFToken(){this._createEOFToken(),this._emitCurrentToken()}_appendCharToCurrentCharacterToken(e,t){this.currentCharacterToken&&this.currentCharacterToken.type!==e&&this._emitCurrentCharacterToken(),this.currentCharacterToken?this.currentCharacterToken.chars+=t:this._createCharacterToken(e,t)}_emitCodePoint(e){let t=xE.CHARACTER_TOKEN;lE(e)?t=xE.WHITESPACE_CHARACTER_TOKEN:e===iE.NULL&&(t=xE.NULL_CHARACTER_TOKEN),this._appendCharToCurrentCharacterToken(t,yE(e))}_emitSeveralCodePoints(e){for(let t=0;t<e.length;t++)this._emitCodePoint(e[t])}_emitChars(e){this._appendCharToCurrentCharacterToken(xE.CHARACTER_TOKEN,e)}_matchNamedCharacterReference(e){let t=null,n=1,r=EE(0,e);for(this.tempBuff.push(e);r>-1;){const e=nE[r],i=e<7;i&&1&e&&(t=2&e?[nE[++r],nE[++r]]:[nE[++r]],n=0);const a=this._consume();if(this.tempBuff.push(a),n++,a===iE.EOF)break;r=i?4&e?EE(r,a):-1:a===e?++r:-1}for(;n--;)this.tempBuff.pop(),this._unconsume();return t}_isCharacterReferenceInAttribute(){return"ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE"===this.returnState||"ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE"===this.returnState||"ATTRIBUTE_VALUE_UNQUOTED_STATE"===this.returnState}_isCharacterReferenceAttributeQuirk(e){if(!e&&this._isCharacterReferenceInAttribute()){const e=this._consume();return this._unconsume(),e===iE.EQUALS_SIGN||dE(e)}return!1}_flushCodePointsConsumedAsCharacterReference(){if(this._isCharacterReferenceInAttribute())for(let e=0;e<this.tempBuff.length;e++)this.currentAttr.value+=yE(this.tempBuff[e]);else this._emitSeveralCodePoints(this.tempBuff);this.tempBuff=[]}[sE](e){this.preprocessor.dropParsedChunk(),e===iE.LESS_THAN_SIGN?this.state="TAG_OPEN_STATE":e===iE.AMPERSAND?(this.returnState=sE,this.state="CHARACTER_REFERENCE_STATE"):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this._emitCodePoint(e)):e===iE.EOF?this._emitEOFToken():this._emitCodePoint(e)}RCDATA_STATE(e){this.preprocessor.dropParsedChunk(),e===iE.AMPERSAND?(this.returnState="RCDATA_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===iE.LESS_THAN_SIGN?this.state="RCDATA_LESS_THAN_SIGN_STATE":e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this._emitChars(tE.REPLACEMENT_CHARACTER)):e===iE.EOF?this._emitEOFToken():this._emitCodePoint(e)}RAWTEXT_STATE(e){this.preprocessor.dropParsedChunk(),e===iE.LESS_THAN_SIGN?this.state="RAWTEXT_LESS_THAN_SIGN_STATE":e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this._emitChars(tE.REPLACEMENT_CHARACTER)):e===iE.EOF?this._emitEOFToken():this._emitCodePoint(e)}SCRIPT_DATA_STATE(e){this.preprocessor.dropParsedChunk(),e===iE.LESS_THAN_SIGN?this.state="SCRIPT_DATA_LESS_THAN_SIGN_STATE":e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this._emitChars(tE.REPLACEMENT_CHARACTER)):e===iE.EOF?this._emitEOFToken():this._emitCodePoint(e)}PLAINTEXT_STATE(e){this.preprocessor.dropParsedChunk(),e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this._emitChars(tE.REPLACEMENT_CHARACTER)):e===iE.EOF?this._emitEOFToken():this._emitCodePoint(e)}TAG_OPEN_STATE(e){e===iE.EXCLAMATION_MARK?this.state="MARKUP_DECLARATION_OPEN_STATE":e===iE.SOLIDUS?this.state="END_TAG_OPEN_STATE":pE(e)?(this._createStartTagToken(),this._reconsumeInState("TAG_NAME_STATE")):e===iE.QUESTION_MARK?(this._err(rE.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE")):e===iE.EOF?(this._err(rE.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken()):(this._err(rE.invalidFirstCharacterOfTagName),this._emitChars("<"),this._reconsumeInState(sE))}END_TAG_OPEN_STATE(e){pE(e)?(this._createEndTagToken(),this._reconsumeInState("TAG_NAME_STATE")):e===iE.GREATER_THAN_SIGN?(this._err(rE.missingEndTagName),this.state=sE):e===iE.EOF?(this._err(rE.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken()):(this._err(rE.invalidFirstCharacterOfTagName),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE"))}TAG_NAME_STATE(e){lE(e)?this.state="BEFORE_ATTRIBUTE_NAME_STATE":e===iE.SOLIDUS?this.state="SELF_CLOSING_START_TAG_STATE":e===iE.GREATER_THAN_SIGN?(this.state=sE,this._emitCurrentToken()):uE(e)?this.currentToken.tagName+=vE(e):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentToken.tagName+=tE.REPLACEMENT_CHARACTER):e===iE.EOF?(this._err(rE.eofInTag),this._emitEOFToken()):this.currentToken.tagName+=yE(e)}RCDATA_LESS_THAN_SIGN_STATE(e){e===iE.SOLIDUS?(this.tempBuff=[],this.state="RCDATA_END_TAG_OPEN_STATE"):(this._emitChars("<"),this._reconsumeInState("RCDATA_STATE"))}RCDATA_END_TAG_OPEN_STATE(e){pE(e)?(this._createEndTagToken(),this._reconsumeInState("RCDATA_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("RCDATA_STATE"))}RCDATA_END_TAG_NAME_STATE(e){if(uE(e))this.currentToken.tagName+=vE(e),this.tempBuff.push(e);else if(hE(e))this.currentToken.tagName+=yE(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(lE(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===iE.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===iE.GREATER_THAN_SIGN)return this.state=sE,void this._emitCurrentToken()}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("RCDATA_STATE")}}RAWTEXT_LESS_THAN_SIGN_STATE(e){e===iE.SOLIDUS?(this.tempBuff=[],this.state="RAWTEXT_END_TAG_OPEN_STATE"):(this._emitChars("<"),this._reconsumeInState("RAWTEXT_STATE"))}RAWTEXT_END_TAG_OPEN_STATE(e){pE(e)?(this._createEndTagToken(),this._reconsumeInState("RAWTEXT_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("RAWTEXT_STATE"))}RAWTEXT_END_TAG_NAME_STATE(e){if(uE(e))this.currentToken.tagName+=vE(e),this.tempBuff.push(e);else if(hE(e))this.currentToken.tagName+=yE(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(lE(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===iE.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===iE.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=sE)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("RAWTEXT_STATE")}}SCRIPT_DATA_LESS_THAN_SIGN_STATE(e){e===iE.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_END_TAG_OPEN_STATE"):e===iE.EXCLAMATION_MARK?(this.state="SCRIPT_DATA_ESCAPE_START_STATE",this._emitChars("<!")):(this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_STATE"))}SCRIPT_DATA_END_TAG_OPEN_STATE(e){pE(e)?(this._createEndTagToken(),this._reconsumeInState("SCRIPT_DATA_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("SCRIPT_DATA_STATE"))}SCRIPT_DATA_END_TAG_NAME_STATE(e){if(uE(e))this.currentToken.tagName+=vE(e),this.tempBuff.push(e);else if(hE(e))this.currentToken.tagName+=yE(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(lE(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===iE.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===iE.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=sE)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("SCRIPT_DATA_STATE")}}SCRIPT_DATA_ESCAPE_START_STATE(e){e===iE.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPE_START_DASH_STATE",this._emitChars("-")):this._reconsumeInState("SCRIPT_DATA_STATE")}SCRIPT_DATA_ESCAPE_START_DASH_STATE(e){e===iE.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):this._reconsumeInState("SCRIPT_DATA_STATE")}SCRIPT_DATA_ESCAPED_STATE(e){e===iE.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_STATE",this._emitChars("-")):e===iE.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this._emitChars(tE.REPLACEMENT_CHARACTER)):e===iE.EOF?(this._err(rE.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}SCRIPT_DATA_ESCAPED_DASH_STATE(e){e===iE.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):e===iE.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitChars(tE.REPLACEMENT_CHARACTER)):e===iE.EOF?(this._err(rE.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_ESCAPED_DASH_DASH_STATE(e){e===iE.HYPHEN_MINUS?this._emitChars("-"):e===iE.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===iE.GREATER_THAN_SIGN?(this.state="SCRIPT_DATA_STATE",this._emitChars(">")):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitChars(tE.REPLACEMENT_CHARACTER)):e===iE.EOF?(this._err(rE.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE(e){e===iE.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE"):pE(e)?(this.tempBuff=[],this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE")):(this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE"))}SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE(e){pE(e)?(this._createEndTagToken(),this._reconsumeInState("SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE"))}SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE(e){if(uE(e))this.currentToken.tagName+=vE(e),this.tempBuff.push(e);else if(hE(e))this.currentToken.tagName+=yE(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(lE(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===iE.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===iE.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=sE)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE")}}SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE(e){lE(e)||e===iE.SOLIDUS||e===iE.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?"SCRIPT_DATA_DOUBLE_ESCAPED_STATE":"SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e)):uE(e)?(this.tempBuff.push(gE(e)),this._emitCodePoint(e)):hE(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE")}SCRIPT_DATA_DOUBLE_ESCAPED_STATE(e){e===iE.HYPHEN_MINUS?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE",this._emitChars("-")):e===iE.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this._emitChars(tE.REPLACEMENT_CHARACTER)):e===iE.EOF?(this._err(rE.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE(e){e===iE.HYPHEN_MINUS?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):e===iE.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitChars(tE.REPLACEMENT_CHARACTER)):e===iE.EOF?(this._err(rE.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE(e){e===iE.HYPHEN_MINUS?this._emitChars("-"):e===iE.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===iE.GREATER_THAN_SIGN?(this.state="SCRIPT_DATA_STATE",this._emitChars(">")):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitChars(tE.REPLACEMENT_CHARACTER)):e===iE.EOF?(this._err(rE.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE(e){e===iE.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE",this._emitChars("/")):this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPED_STATE")}SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE(e){lE(e)||e===iE.SOLIDUS||e===iE.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?"SCRIPT_DATA_ESCAPED_STATE":"SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e)):uE(e)?(this.tempBuff.push(gE(e)),this._emitCodePoint(e)):hE(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPED_STATE")}BEFORE_ATTRIBUTE_NAME_STATE(e){lE(e)||(e===iE.SOLIDUS||e===iE.GREATER_THAN_SIGN||e===iE.EOF?this._reconsumeInState("AFTER_ATTRIBUTE_NAME_STATE"):e===iE.EQUALS_SIGN?(this._err(rE.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state="ATTRIBUTE_NAME_STATE"):(this._createAttr(""),this._reconsumeInState("ATTRIBUTE_NAME_STATE")))}ATTRIBUTE_NAME_STATE(e){lE(e)||e===iE.SOLIDUS||e===iE.GREATER_THAN_SIGN||e===iE.EOF?(this._leaveAttrName("AFTER_ATTRIBUTE_NAME_STATE"),this._unconsume()):e===iE.EQUALS_SIGN?this._leaveAttrName("BEFORE_ATTRIBUTE_VALUE_STATE"):uE(e)?this.currentAttr.name+=vE(e):e===iE.QUOTATION_MARK||e===iE.APOSTROPHE||e===iE.LESS_THAN_SIGN?(this._err(rE.unexpectedCharacterInAttributeName),this.currentAttr.name+=yE(e)):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentAttr.name+=tE.REPLACEMENT_CHARACTER):this.currentAttr.name+=yE(e)}AFTER_ATTRIBUTE_NAME_STATE(e){lE(e)||(e===iE.SOLIDUS?this.state="SELF_CLOSING_START_TAG_STATE":e===iE.EQUALS_SIGN?this.state="BEFORE_ATTRIBUTE_VALUE_STATE":e===iE.GREATER_THAN_SIGN?(this.state=sE,this._emitCurrentToken()):e===iE.EOF?(this._err(rE.eofInTag),this._emitEOFToken()):(this._createAttr(""),this._reconsumeInState("ATTRIBUTE_NAME_STATE")))}BEFORE_ATTRIBUTE_VALUE_STATE(e){lE(e)||(e===iE.QUOTATION_MARK?this.state="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE":e===iE.APOSTROPHE?this.state="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE":e===iE.GREATER_THAN_SIGN?(this._err(rE.missingAttributeValue),this.state=sE,this._emitCurrentToken()):this._reconsumeInState("ATTRIBUTE_VALUE_UNQUOTED_STATE"))}ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE(e){e===iE.QUOTATION_MARK?this.state="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE":e===iE.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentAttr.value+=tE.REPLACEMENT_CHARACTER):e===iE.EOF?(this._err(rE.eofInTag),this._emitEOFToken()):this.currentAttr.value+=yE(e)}ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE(e){e===iE.APOSTROPHE?this.state="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE":e===iE.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentAttr.value+=tE.REPLACEMENT_CHARACTER):e===iE.EOF?(this._err(rE.eofInTag),this._emitEOFToken()):this.currentAttr.value+=yE(e)}ATTRIBUTE_VALUE_UNQUOTED_STATE(e){lE(e)?this._leaveAttrValue("BEFORE_ATTRIBUTE_NAME_STATE"):e===iE.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_UNQUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===iE.GREATER_THAN_SIGN?(this._leaveAttrValue(sE),this._emitCurrentToken()):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentAttr.value+=tE.REPLACEMENT_CHARACTER):e===iE.QUOTATION_MARK||e===iE.APOSTROPHE||e===iE.LESS_THAN_SIGN||e===iE.EQUALS_SIGN||e===iE.GRAVE_ACCENT?(this._err(rE.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=yE(e)):e===iE.EOF?(this._err(rE.eofInTag),this._emitEOFToken()):this.currentAttr.value+=yE(e)}AFTER_ATTRIBUTE_VALUE_QUOTED_STATE(e){lE(e)?this._leaveAttrValue("BEFORE_ATTRIBUTE_NAME_STATE"):e===iE.SOLIDUS?this._leaveAttrValue("SELF_CLOSING_START_TAG_STATE"):e===iE.GREATER_THAN_SIGN?(this._leaveAttrValue(sE),this._emitCurrentToken()):e===iE.EOF?(this._err(rE.eofInTag),this._emitEOFToken()):(this._err(rE.missingWhitespaceBetweenAttributes),this._reconsumeInState("BEFORE_ATTRIBUTE_NAME_STATE"))}SELF_CLOSING_START_TAG_STATE(e){e===iE.GREATER_THAN_SIGN?(this.currentToken.selfClosing=!0,this.state=sE,this._emitCurrentToken()):e===iE.EOF?(this._err(rE.eofInTag),this._emitEOFToken()):(this._err(rE.unexpectedSolidusInTag),this._reconsumeInState("BEFORE_ATTRIBUTE_NAME_STATE"))}BOGUS_COMMENT_STATE(e){e===iE.GREATER_THAN_SIGN?(this.state=sE,this._emitCurrentToken()):e===iE.EOF?(this._emitCurrentToken(),this._emitEOFToken()):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentToken.data+=tE.REPLACEMENT_CHARACTER):this.currentToken.data+=yE(e)}MARKUP_DECLARATION_OPEN_STATE(e){this._consumeSequenceIfMatch(aE.DASH_DASH_STRING,e,!0)?(this._createCommentToken(),this.state="COMMENT_START_STATE"):this._consumeSequenceIfMatch(aE.DOCTYPE_STRING,e,!1)?this.state="DOCTYPE_STATE":this._consumeSequenceIfMatch(aE.CDATA_START_STRING,e,!0)?this.allowCDATA?this.state="CDATA_SECTION_STATE":(this._err(rE.cdataInHtmlContent),this._createCommentToken(),this.currentToken.data="[CDATA[",this.state="BOGUS_COMMENT_STATE"):this._ensureHibernation()||(this._err(rE.incorrectlyOpenedComment),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE"))}COMMENT_START_STATE(e){e===iE.HYPHEN_MINUS?this.state="COMMENT_START_DASH_STATE":e===iE.GREATER_THAN_SIGN?(this._err(rE.abruptClosingOfEmptyComment),this.state=sE,this._emitCurrentToken()):this._reconsumeInState("COMMENT_STATE")}COMMENT_START_DASH_STATE(e){e===iE.HYPHEN_MINUS?this.state="COMMENT_END_STATE":e===iE.GREATER_THAN_SIGN?(this._err(rE.abruptClosingOfEmptyComment),this.state=sE,this._emitCurrentToken()):e===iE.EOF?(this._err(rE.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState("COMMENT_STATE"))}COMMENT_STATE(e){e===iE.HYPHEN_MINUS?this.state="COMMENT_END_DASH_STATE":e===iE.LESS_THAN_SIGN?(this.currentToken.data+="<",this.state="COMMENT_LESS_THAN_SIGN_STATE"):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentToken.data+=tE.REPLACEMENT_CHARACTER):e===iE.EOF?(this._err(rE.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.data+=yE(e)}COMMENT_LESS_THAN_SIGN_STATE(e){e===iE.EXCLAMATION_MARK?(this.currentToken.data+="!",this.state="COMMENT_LESS_THAN_SIGN_BANG_STATE"):e===iE.LESS_THAN_SIGN?this.currentToken.data+="!":this._reconsumeInState("COMMENT_STATE")}COMMENT_LESS_THAN_SIGN_BANG_STATE(e){e===iE.HYPHEN_MINUS?this.state="COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE":this._reconsumeInState("COMMENT_STATE")}COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE(e){e===iE.HYPHEN_MINUS?this.state="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE":this._reconsumeInState("COMMENT_END_DASH_STATE")}COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE(e){e!==iE.GREATER_THAN_SIGN&&e!==iE.EOF&&this._err(rE.nestedComment),this._reconsumeInState("COMMENT_END_STATE")}COMMENT_END_DASH_STATE(e){e===iE.HYPHEN_MINUS?this.state="COMMENT_END_STATE":e===iE.EOF?(this._err(rE.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState("COMMENT_STATE"))}COMMENT_END_STATE(e){e===iE.GREATER_THAN_SIGN?(this.state=sE,this._emitCurrentToken()):e===iE.EXCLAMATION_MARK?this.state="COMMENT_END_BANG_STATE":e===iE.HYPHEN_MINUS?this.currentToken.data+="-":e===iE.EOF?(this._err(rE.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--",this._reconsumeInState("COMMENT_STATE"))}COMMENT_END_BANG_STATE(e){e===iE.HYPHEN_MINUS?(this.currentToken.data+="--!",this.state="COMMENT_END_DASH_STATE"):e===iE.GREATER_THAN_SIGN?(this._err(rE.incorrectlyClosedComment),this.state=sE,this._emitCurrentToken()):e===iE.EOF?(this._err(rE.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--!",this._reconsumeInState("COMMENT_STATE"))}DOCTYPE_STATE(e){lE(e)?this.state="BEFORE_DOCTYPE_NAME_STATE":e===iE.GREATER_THAN_SIGN?this._reconsumeInState("BEFORE_DOCTYPE_NAME_STATE"):e===iE.EOF?(this._err(rE.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rE.missingWhitespaceBeforeDoctypeName),this._reconsumeInState("BEFORE_DOCTYPE_NAME_STATE"))}BEFORE_DOCTYPE_NAME_STATE(e){lE(e)||(uE(e)?(this._createDoctypeToken(vE(e)),this.state="DOCTYPE_NAME_STATE"):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this._createDoctypeToken(tE.REPLACEMENT_CHARACTER),this.state="DOCTYPE_NAME_STATE"):e===iE.GREATER_THAN_SIGN?(this._err(rE.missingDoctypeName),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=sE):e===iE.EOF?(this._err(rE.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._createDoctypeToken(yE(e)),this.state="DOCTYPE_NAME_STATE"))}DOCTYPE_NAME_STATE(e){lE(e)?this.state="AFTER_DOCTYPE_NAME_STATE":e===iE.GREATER_THAN_SIGN?(this.state=sE,this._emitCurrentToken()):uE(e)?this.currentToken.name+=vE(e):e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentToken.name+=tE.REPLACEMENT_CHARACTER):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.name+=yE(e)}AFTER_DOCTYPE_NAME_STATE(e){lE(e)||(e===iE.GREATER_THAN_SIGN?(this.state=sE,this._emitCurrentToken()):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this._consumeSequenceIfMatch(aE.PUBLIC_STRING,e,!1)?this.state="AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE":this._consumeSequenceIfMatch(aE.SYSTEM_STRING,e,!1)?this.state="AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE":this._ensureHibernation()||(this._err(rE.invalidCharacterSequenceAfterDoctypeName),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE(e){lE(e)?this.state="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===iE.QUOTATION_MARK?(this._err(rE.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iE.APOSTROPHE?(this._err(rE.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iE.GREATER_THAN_SIGN?(this._err(rE.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=sE,this._emitCurrentToken()):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rE.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE(e){lE(e)||(e===iE.QUOTATION_MARK?(this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iE.APOSTROPHE?(this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iE.GREATER_THAN_SIGN?(this._err(rE.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=sE,this._emitCurrentToken()):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rE.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE(e){e===iE.QUOTATION_MARK?this.state="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentToken.publicId+=tE.REPLACEMENT_CHARACTER):e===iE.GREATER_THAN_SIGN?(this._err(rE.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=sE):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=yE(e)}DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE(e){e===iE.APOSTROPHE?this.state="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentToken.publicId+=tE.REPLACEMENT_CHARACTER):e===iE.GREATER_THAN_SIGN?(this._err(rE.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=sE):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=yE(e)}AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE(e){lE(e)?this.state="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE":e===iE.GREATER_THAN_SIGN?(this.state=sE,this._emitCurrentToken()):e===iE.QUOTATION_MARK?(this._err(rE.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iE.APOSTROPHE?(this._err(rE.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rE.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE(e){lE(e)||(e===iE.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=sE):e===iE.QUOTATION_MARK?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iE.APOSTROPHE?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rE.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE(e){lE(e)?this.state="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===iE.QUOTATION_MARK?(this._err(rE.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iE.APOSTROPHE?(this._err(rE.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iE.GREATER_THAN_SIGN?(this._err(rE.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=sE,this._emitCurrentToken()):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rE.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE(e){lE(e)||(e===iE.QUOTATION_MARK?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iE.APOSTROPHE?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iE.GREATER_THAN_SIGN?(this._err(rE.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=sE,this._emitCurrentToken()):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rE.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE(e){e===iE.QUOTATION_MARK?this.state="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentToken.systemId+=tE.REPLACEMENT_CHARACTER):e===iE.GREATER_THAN_SIGN?(this._err(rE.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=sE):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=yE(e)}DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE(e){e===iE.APOSTROPHE?this.state="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===iE.NULL?(this._err(rE.unexpectedNullCharacter),this.currentToken.systemId+=tE.REPLACEMENT_CHARACTER):e===iE.GREATER_THAN_SIGN?(this._err(rE.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=sE):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=yE(e)}AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE(e){lE(e)||(e===iE.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=sE):e===iE.EOF?(this._err(rE.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rE.unexpectedCharacterAfterDoctypeSystemIdentifier),this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}BOGUS_DOCTYPE_STATE(e){e===iE.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=sE):e===iE.NULL?this._err(rE.unexpectedNullCharacter):e===iE.EOF&&(this._emitCurrentToken(),this._emitEOFToken())}CDATA_SECTION_STATE(e){e===iE.RIGHT_SQUARE_BRACKET?this.state="CDATA_SECTION_BRACKET_STATE":e===iE.EOF?(this._err(rE.eofInCdata),this._emitEOFToken()):this._emitCodePoint(e)}CDATA_SECTION_BRACKET_STATE(e){e===iE.RIGHT_SQUARE_BRACKET?this.state="CDATA_SECTION_END_STATE":(this._emitChars("]"),this._reconsumeInState("CDATA_SECTION_STATE"))}CDATA_SECTION_END_STATE(e){e===iE.GREATER_THAN_SIGN?this.state=sE:e===iE.RIGHT_SQUARE_BRACKET?this._emitChars("]"):(this._emitChars("]]"),this._reconsumeInState("CDATA_SECTION_STATE"))}CHARACTER_REFERENCE_STATE(e){this.tempBuff=[iE.AMPERSAND],e===iE.NUMBER_SIGN?(this.tempBuff.push(e),this.state="NUMERIC_CHARACTER_REFERENCE_STATE"):dE(e)?this._reconsumeInState("NAMED_CHARACTER_REFERENCE_STATE"):(this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}NAMED_CHARACTER_REFERENCE_STATE(e){const t=this._matchNamedCharacterReference(e);if(this._ensureHibernation())this.tempBuff=[iE.AMPERSAND];else if(t){const e=this.tempBuff[this.tempBuff.length-1]===iE.SEMICOLON;this._isCharacterReferenceAttributeQuirk(e)||(e||this._errOnNextCodePoint(rE.missingSemicolonAfterCharacterReference),this.tempBuff=t),this._flushCodePointsConsumedAsCharacterReference(),this.state=this.returnState}else this._flushCodePointsConsumedAsCharacterReference(),this.state="AMBIGUOS_AMPERSAND_STATE"}AMBIGUOS_AMPERSAND_STATE(e){dE(e)?this._isCharacterReferenceInAttribute()?this.currentAttr.value+=yE(e):this._emitCodePoint(e):(e===iE.SEMICOLON&&this._err(rE.unknownNamedCharacterReference),this._reconsumeInState(this.returnState))}NUMERIC_CHARACTER_REFERENCE_STATE(e){this.charRefCode=0,e===iE.LATIN_SMALL_X||e===iE.LATIN_CAPITAL_X?(this.tempBuff.push(e),this.state="HEXADEMICAL_CHARACTER_REFERENCE_START_STATE"):this._reconsumeInState("DECIMAL_CHARACTER_REFERENCE_START_STATE")}HEXADEMICAL_CHARACTER_REFERENCE_START_STATE(e){!function(e){return cE(e)||fE(e)||mE(e)}(e)?(this._err(rE.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)):this._reconsumeInState("HEXADEMICAL_CHARACTER_REFERENCE_STATE")}DECIMAL_CHARACTER_REFERENCE_START_STATE(e){cE(e)?this._reconsumeInState("DECIMAL_CHARACTER_REFERENCE_STATE"):(this._err(rE.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}HEXADEMICAL_CHARACTER_REFERENCE_STATE(e){fE(e)?this.charRefCode=16*this.charRefCode+e-55:mE(e)?this.charRefCode=16*this.charRefCode+e-87:cE(e)?this.charRefCode=16*this.charRefCode+e-48:e===iE.SEMICOLON?this.state="NUMERIC_CHARACTER_REFERENCE_END_STATE":(this._err(rE.missingSemicolonAfterCharacterReference),this._reconsumeInState("NUMERIC_CHARACTER_REFERENCE_END_STATE"))}DECIMAL_CHARACTER_REFERENCE_STATE(e){cE(e)?this.charRefCode=10*this.charRefCode+e-48:e===iE.SEMICOLON?this.state="NUMERIC_CHARACTER_REFERENCE_END_STATE":(this._err(rE.missingSemicolonAfterCharacterReference),this._reconsumeInState("NUMERIC_CHARACTER_REFERENCE_END_STATE"))}NUMERIC_CHARACTER_REFERENCE_END_STATE(){if(this.charRefCode===iE.NULL)this._err(rE.nullCharacterReference),this.charRefCode=iE.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(rE.characterReferenceOutsideUnicodeRange),this.charRefCode=iE.REPLACEMENT_CHARACTER;else if(tE.isSurrogate(this.charRefCode))this._err(rE.surrogateCharacterReference),this.charRefCode=iE.REPLACEMENT_CHARACTER;else if(tE.isUndefinedCodePoint(this.charRefCode))this._err(rE.noncharacterCharacterReference);else if(tE.isControlCodePoint(this.charRefCode)||this.charRefCode===iE.CARRIAGE_RETURN){this._err(rE.controlCharacterReference);const e=oE[this.charRefCode];e&&(this.charRefCode=e)}this.tempBuff=[this.charRefCode],this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)}}xE.CHARACTER_TOKEN="CHARACTER_TOKEN",xE.NULL_CHARACTER_TOKEN="NULL_CHARACTER_TOKEN",xE.WHITESPACE_CHARACTER_TOKEN="WHITESPACE_CHARACTER_TOKEN",xE.START_TAG_TOKEN="START_TAG_TOKEN",xE.END_TAG_TOKEN="END_TAG_TOKEN",xE.COMMENT_TOKEN="COMMENT_TOKEN",xE.DOCTYPE_TOKEN="DOCTYPE_TOKEN",xE.EOF_TOKEN="EOF_TOKEN",xE.HIBERNATION_TOKEN="HIBERNATION_TOKEN",xE.MODE={DATA:sE,RCDATA:"RCDATA_STATE",RAWTEXT:"RAWTEXT_STATE",SCRIPT_DATA:"SCRIPT_DATA_STATE",PLAINTEXT:"PLAINTEXT_STATE"},xE.getTokenAttr=function(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null};var bE=xE,CE={};const SE=CE.NAMESPACES={HTML:"http://www.w3.org/1999/xhtml",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"};CE.ATTRS={TYPE:"type",ACTION:"action",ENCODING:"encoding",PROMPT:"prompt",NAME:"name",COLOR:"color",FACE:"face",SIZE:"size"},CE.DOCUMENT_MODE={NO_QUIRKS:"no-quirks",QUIRKS:"quirks",LIMITED_QUIRKS:"limited-quirks"};const wE=CE.TAG_NAMES={A:"a",ADDRESS:"address",ANNOTATION_XML:"annotation-xml",APPLET:"applet",AREA:"area",ARTICLE:"article",ASIDE:"aside",B:"b",BASE:"base",BASEFONT:"basefont",BGSOUND:"bgsound",BIG:"big",BLOCKQUOTE:"blockquote",BODY:"body",BR:"br",BUTTON:"button",CAPTION:"caption",CENTER:"center",CODE:"code",COL:"col",COLGROUP:"colgroup",DD:"dd",DESC:"desc",DETAILS:"details",DIALOG:"dialog",DIR:"dir",DIV:"div",DL:"dl",DT:"dt",EM:"em",EMBED:"embed",FIELDSET:"fieldset",FIGCAPTION:"figcaption",FIGURE:"figure",FONT:"font",FOOTER:"footer",FOREIGN_OBJECT:"foreignObject",FORM:"form",FRAME:"frame",FRAMESET:"frameset",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HEAD:"head",HEADER:"header",HGROUP:"hgroup",HR:"hr",HTML:"html",I:"i",IMG:"img",IMAGE:"image",INPUT:"input",IFRAME:"iframe",KEYGEN:"keygen",LABEL:"label",LI:"li",LINK:"link",LISTING:"listing",MAIN:"main",MALIGNMARK:"malignmark",MARQUEE:"marquee",MATH:"math",MENU:"menu",META:"meta",MGLYPH:"mglyph",MI:"mi",MO:"mo",MN:"mn",MS:"ms",MTEXT:"mtext",NAV:"nav",NOBR:"nobr",NOFRAMES:"noframes",NOEMBED:"noembed",NOSCRIPT:"noscript",OBJECT:"object",OL:"ol",OPTGROUP:"optgroup",OPTION:"option",P:"p",PARAM:"param",PLAINTEXT:"plaintext",PRE:"pre",RB:"rb",RP:"rp",RT:"rt",RTC:"rtc",RUBY:"ruby",S:"s",SCRIPT:"script",SECTION:"section",SELECT:"select",SOURCE:"source",SMALL:"small",SPAN:"span",STRIKE:"strike",STRONG:"strong",STYLE:"style",SUB:"sub",SUMMARY:"summary",SUP:"sup",TABLE:"table",TBODY:"tbody",TEMPLATE:"template",TEXTAREA:"textarea",TFOOT:"tfoot",TD:"td",TH:"th",THEAD:"thead",TITLE:"title",TR:"tr",TRACK:"track",TT:"tt",U:"u",UL:"ul",SVG:"svg",VAR:"var",WBR:"wbr",XMP:"xmp"};CE.SPECIAL_ELEMENTS={[SE.HTML]:{[wE.ADDRESS]:!0,[wE.APPLET]:!0,[wE.AREA]:!0,[wE.ARTICLE]:!0,[wE.ASIDE]:!0,[wE.BASE]:!0,[wE.BASEFONT]:!0,[wE.BGSOUND]:!0,[wE.BLOCKQUOTE]:!0,[wE.BODY]:!0,[wE.BR]:!0,[wE.BUTTON]:!0,[wE.CAPTION]:!0,[wE.CENTER]:!0,[wE.COL]:!0,[wE.COLGROUP]:!0,[wE.DD]:!0,[wE.DETAILS]:!0,[wE.DIR]:!0,[wE.DIV]:!0,[wE.DL]:!0,[wE.DT]:!0,[wE.EMBED]:!0,[wE.FIELDSET]:!0,[wE.FIGCAPTION]:!0,[wE.FIGURE]:!0,[wE.FOOTER]:!0,[wE.FORM]:!0,[wE.FRAME]:!0,[wE.FRAMESET]:!0,[wE.H1]:!0,[wE.H2]:!0,[wE.H3]:!0,[wE.H4]:!0,[wE.H5]:!0,[wE.H6]:!0,[wE.HEAD]:!0,[wE.HEADER]:!0,[wE.HGROUP]:!0,[wE.HR]:!0,[wE.HTML]:!0,[wE.IFRAME]:!0,[wE.IMG]:!0,[wE.INPUT]:!0,[wE.LI]:!0,[wE.LINK]:!0,[wE.LISTING]:!0,[wE.MAIN]:!0,[wE.MARQUEE]:!0,[wE.MENU]:!0,[wE.META]:!0,[wE.NAV]:!0,[wE.NOEMBED]:!0,[wE.NOFRAMES]:!0,[wE.NOSCRIPT]:!0,[wE.OBJECT]:!0,[wE.OL]:!0,[wE.P]:!0,[wE.PARAM]:!0,[wE.PLAINTEXT]:!0,[wE.PRE]:!0,[wE.SCRIPT]:!0,[wE.SECTION]:!0,[wE.SELECT]:!0,[wE.SOURCE]:!0,[wE.STYLE]:!0,[wE.SUMMARY]:!0,[wE.TABLE]:!0,[wE.TBODY]:!0,[wE.TD]:!0,[wE.TEMPLATE]:!0,[wE.TEXTAREA]:!0,[wE.TFOOT]:!0,[wE.TH]:!0,[wE.THEAD]:!0,[wE.TITLE]:!0,[wE.TR]:!0,[wE.TRACK]:!0,[wE.UL]:!0,[wE.WBR]:!0,[wE.XMP]:!0},[SE.MATHML]:{[wE.MI]:!0,[wE.MO]:!0,[wE.MN]:!0,[wE.MS]:!0,[wE.MTEXT]:!0,[wE.ANNOTATION_XML]:!0},[SE.SVG]:{[wE.TITLE]:!0,[wE.FOREIGN_OBJECT]:!0,[wE.DESC]:!0}};const TE=CE,kE=TE.TAG_NAMES,_E=TE.NAMESPACES;function OE(e){switch(e.length){case 1:return e===kE.P;case 2:return e===kE.RB||e===kE.RP||e===kE.RT||e===kE.DD||e===kE.DT||e===kE.LI;case 3:return e===kE.RTC;case 6:return e===kE.OPTION;case 8:return e===kE.OPTGROUP}return!1}function AE(e){switch(e.length){case 1:return e===kE.P;case 2:return e===kE.RB||e===kE.RP||e===kE.RT||e===kE.DD||e===kE.DT||e===kE.LI||e===kE.TD||e===kE.TH||e===kE.TR;case 3:return e===kE.RTC;case 5:return e===kE.TBODY||e===kE.TFOOT||e===kE.THEAD;case 6:return e===kE.OPTION;case 7:return e===kE.CAPTION;case 8:return e===kE.OPTGROUP||e===kE.COLGROUP}return!1}function IE(e,t){switch(e.length){case 2:if(e===kE.TD||e===kE.TH)return t===_E.HTML;if(e===kE.MI||e===kE.MO||e===kE.MN||e===kE.MS)return t===_E.MATHML;break;case 4:if(e===kE.HTML)return t===_E.HTML;if(e===kE.DESC)return t===_E.SVG;break;case 5:if(e===kE.TABLE)return t===_E.HTML;if(e===kE.MTEXT)return t===_E.MATHML;if(e===kE.TITLE)return t===_E.SVG;break;case 6:return(e===kE.APPLET||e===kE.OBJECT)&&t===_E.HTML;case 7:return(e===kE.CAPTION||e===kE.MARQUEE)&&t===_E.HTML;case 8:return e===kE.TEMPLATE&&t===_E.HTML;case 13:return e===kE.FOREIGN_OBJECT&&t===_E.SVG;case 14:return e===kE.ANNOTATION_XML&&t===_E.MATHML}return!1}var ME=class{constructor(e,t){this.stackTop=-1,this.items=[],this.current=e,this.currentTagName=null,this.currentTmplContent=null,this.tmplCount=0,this.treeAdapter=t}_indexOf(e){let t=-1;for(let n=this.stackTop;n>=0;n--)if(this.items[n]===e){t=n;break}return t}_isInTemplate(){return this.currentTagName===kE.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===_E.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagName=this.current&&this.treeAdapter.getTagName(this.current),this.currentTmplContent=this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):null}push(e){this.items[++this.stackTop]=e,this._updateCurrentElement(),this._isInTemplate()&&this.tmplCount++}pop(){this.stackTop--,this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this._updateCurrentElement()}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&this._updateCurrentElement()}insertAfter(e,t){const n=this._indexOf(e)+1;this.items.splice(n,0,t),n===++this.stackTop&&this._updateCurrentElement()}popUntilTagNamePopped(e){for(;this.stackTop>-1;){const t=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),t===e&&n===_E.HTML)break}}popUntilElementPopped(e){for(;this.stackTop>-1;){const t=this.current;if(this.pop(),t===e)break}}popUntilNumberedHeaderPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===kE.H1||e===kE.H2||e===kE.H3||e===kE.H4||e===kE.H5||e===kE.H6&&t===_E.HTML)break}}popUntilTableCellPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===kE.TD||e===kE.TH&&t===_E.HTML)break}}popAllUpToHtmlElement(){this.stackTop=0,this._updateCurrentElement()}clearBackToTableContext(){for(;this.currentTagName!==kE.TABLE&&this.currentTagName!==kE.TEMPLATE&&this.currentTagName!==kE.HTML||this.treeAdapter.getNamespaceURI(this.current)!==_E.HTML;)this.pop()}clearBackToTableBodyContext(){for(;this.currentTagName!==kE.TBODY&&this.currentTagName!==kE.TFOOT&&this.currentTagName!==kE.THEAD&&this.currentTagName!==kE.TEMPLATE&&this.currentTagName!==kE.HTML||this.treeAdapter.getNamespaceURI(this.current)!==_E.HTML;)this.pop()}clearBackToTableRowContext(){for(;this.currentTagName!==kE.TR&&this.currentTagName!==kE.TEMPLATE&&this.currentTagName!==kE.HTML||this.treeAdapter.getNamespaceURI(this.current)!==_E.HTML;)this.pop()}remove(e){for(let t=this.stackTop;t>=0;t--)if(this.items[t]===e){this.items.splice(t,1),this.stackTop--,this._updateCurrentElement();break}}tryPeekProperlyNestedBodyElement(){const e=this.items[1];return e&&this.treeAdapter.getTagName(e)===kE.BODY?e:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){let t=this._indexOf(e);return--t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.currentTagName===kE.HTML}hasInScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===_E.HTML)return!0;if(IE(n,r))return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]),n=this.treeAdapter.getNamespaceURI(this.items[e]);if((t===kE.H1||t===kE.H2||t===kE.H3||t===kE.H4||t===kE.H5||t===kE.H6)&&n===_E.HTML)return!0;if(IE(t,n))return!1}return!0}hasInListItemScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===_E.HTML)return!0;if((n===kE.UL||n===kE.OL)&&r===_E.HTML||IE(n,r))return!1}return!0}hasInButtonScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===_E.HTML)return!0;if(n===kE.BUTTON&&r===_E.HTML||IE(n,r))return!1}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===_E.HTML){if(n===e)return!0;if(n===kE.TABLE||n===kE.TEMPLATE||n===kE.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]);if(this.treeAdapter.getNamespaceURI(this.items[e])===_E.HTML){if(t===kE.TBODY||t===kE.THEAD||t===kE.TFOOT)return!0;if(t===kE.TABLE||t===kE.HTML)return!1}}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===_E.HTML){if(n===e)return!0;if(n!==kE.OPTION&&n!==kE.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;OE(this.currentTagName);)this.pop()}generateImpliedEndTagsThoroughly(){for(;AE(this.currentTagName);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;OE(this.currentTagName)&&this.currentTagName!==e;)this.pop()}};class NE{constructor(e){this.length=0,this.entries=[],this.treeAdapter=e,this.bookmark=null}_getNoahArkConditionCandidates(e){const t=[];if(this.length>=3){const n=this.treeAdapter.getAttrList(e).length,r=this.treeAdapter.getTagName(e),i=this.treeAdapter.getNamespaceURI(e);for(let e=this.length-1;e>=0;e--){const a=this.entries[e];if(a.type===NE.MARKER_ENTRY)break;const o=a.element,s=this.treeAdapter.getAttrList(o);this.treeAdapter.getTagName(o)===r&&this.treeAdapter.getNamespaceURI(o)===i&&s.length===n&&t.push({idx:e,attrs:s})}}return t.length<3?[]:t}_ensureNoahArkCondition(e){const t=this._getNoahArkConditionCandidates(e);let n=t.length;if(n){const r=this.treeAdapter.getAttrList(e),i=r.length,a=Object.create(null);for(let e=0;e<i;e++){const t=r[e];a[t.name]=t.value}for(let e=0;e<i;e++)for(let r=0;r<n;r++){const i=t[r].attrs[e];if(a[i.name]!==i.value&&(t.splice(r,1),n--),t.length<3)return}for(let e=n-1;e>=2;e--)this.entries.splice(t[e].idx,1),this.length--}}insertMarker(){this.entries.push({type:NE.MARKER_ENTRY}),this.length++}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.push({type:NE.ELEMENT_ENTRY,element:e,token:t}),this.length++}insertElementAfterBookmark(e,t){let n=this.length-1;for(;n>=0&&this.entries[n]!==this.bookmark;n--);this.entries.splice(n+1,0,{type:NE.ELEMENT_ENTRY,element:e,token:t}),this.length++}removeEntry(e){for(let t=this.length-1;t>=0;t--)if(this.entries[t]===e){this.entries.splice(t,1),this.length--;break}}clearToLastMarker(){for(;this.length;){const e=this.entries.pop();if(this.length--,e.type===NE.MARKER_ENTRY)break}}getElementEntryInScopeWithTagName(e){for(let t=this.length-1;t>=0;t--){const n=this.entries[t];if(n.type===NE.MARKER_ENTRY)return null;if(this.treeAdapter.getTagName(n.element)===e)return n}return null}getElementEntry(e){for(let t=this.length-1;t>=0;t--){const n=this.entries[t];if(n.type===NE.ELEMENT_ENTRY&&n.element===e)return n}return null}}NE.MARKER_ENTRY="MARKER_ENTRY",NE.ELEMENT_ENTRY="ELEMENT_ENTRY";var PE=NE;class FE{constructor(e){const t={},n=this._getOverriddenMethods(this,t);for(const r of Object.keys(n))"function"==typeof n[r]&&(t[r]=e[r],e[r]=n[r])}_getOverriddenMethods(){throw new Error("Not implemented")}}FE.install=function(e,t,n){e.__mixins||(e.__mixins=[]);for(let i=0;i<e.__mixins.length;i++)if(e.__mixins[i].constructor===t)return e.__mixins[i];const r=new t(e,n);return e.__mixins.push(r),r};var LE=FE;const RE=LE;var DE=class extends RE{constructor(e){super(e),this.preprocessor=e,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.offset=0,this.col=0,this.line=1}_getOverriddenMethods(e,t){return{advance(){const n=this.pos+1,r=this.html[n];return e.isEol&&(e.isEol=!1,e.line++,e.lineStartPos=n),("\n"===r||"\r"===r&&"\n"!==this.html[n+1])&&(e.isEol=!0),e.col=n-e.lineStartPos+1,e.offset=e.droppedBufferSize+n,t.advance.call(this)},retreat(){t.retreat.call(this),e.isEol=!1,e.col=this.pos-e.lineStartPos+1},dropParsedChunk(){const n=this.pos;t.dropParsedChunk.call(this);const r=n-this.pos;e.lineStartPos-=r,e.droppedBufferSize+=r,e.offset=e.droppedBufferSize+this.pos}}}};const BE=LE,$E=bE,zE=DE;var HE=class extends BE{constructor(e){super(e),this.tokenizer=e,this.posTracker=BE.install(e.preprocessor,zE),this.currentAttrLocation=null,this.ctLoc=null}_getCurrentLocation(){return{startLine:this.posTracker.line,startCol:this.posTracker.col,startOffset:this.posTracker.offset,endLine:-1,endCol:-1,endOffset:-1}}_attachCurrentAttrLocationInfo(){this.currentAttrLocation.endLine=this.posTracker.line,this.currentAttrLocation.endCol=this.posTracker.col,this.currentAttrLocation.endOffset=this.posTracker.offset;const e=this.tokenizer.currentToken,t=this.tokenizer.currentAttr;e.location.attrs||(e.location.attrs=Object.create(null)),e.location.attrs[t.name]=this.currentAttrLocation}_getOverriddenMethods(e,t){const n={_createStartTagToken(){t._createStartTagToken.call(this),this.currentToken.location=e.ctLoc},_createEndTagToken(){t._createEndTagToken.call(this),this.currentToken.location=e.ctLoc},_createCommentToken(){t._createCommentToken.call(this),this.currentToken.location=e.ctLoc},_createDoctypeToken(n){t._createDoctypeToken.call(this,n),this.currentToken.location=e.ctLoc},_createCharacterToken(n,r){t._createCharacterToken.call(this,n,r),this.currentCharacterToken.location=e.ctLoc},_createEOFToken(){t._createEOFToken.call(this),this.currentToken.location=e._getCurrentLocation()},_createAttr(n){t._createAttr.call(this,n),e.currentAttrLocation=e._getCurrentLocation()},_leaveAttrName(n){t._leaveAttrName.call(this,n),e._attachCurrentAttrLocationInfo()},_leaveAttrValue(n){t._leaveAttrValue.call(this,n),e._attachCurrentAttrLocationInfo()},_emitCurrentToken(){const n=this.currentToken.location;this.currentCharacterToken&&(this.currentCharacterToken.location.endLine=n.startLine,this.currentCharacterToken.location.endCol=n.startCol,this.currentCharacterToken.location.endOffset=n.startOffset),this.currentToken.type===$E.EOF_TOKEN?(n.endLine=n.startLine,n.endCol=n.startCol,n.endOffset=n.startOffset):(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col+1,n.endOffset=e.posTracker.offset+1),t._emitCurrentToken.call(this)},_emitCurrentCharacterToken(){const n=this.currentCharacterToken&&this.currentCharacterToken.location;n&&-1===n.endOffset&&(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col,n.endOffset=e.posTracker.offset),t._emitCurrentCharacterToken.call(this)}};return Object.keys($E.MODE).forEach((r=>{const i=$E.MODE[r];n[i]=function(n){e.ctLoc=e._getCurrentLocation(),t[i].call(this,n)}})),n}};const jE=LE;const GE=LE,VE=bE,YE=HE,UE=class extends jE{constructor(e,t){super(e),this.onItemPop=t.onItemPop}_getOverriddenMethods(e,t){return{pop(){e.onItemPop(this.current),t.pop.call(this)},popAllUpToHtmlElement(){for(let t=this.stackTop;t>0;t--)e.onItemPop(this.items[t]);t.popAllUpToHtmlElement.call(this)},remove(n){e.onItemPop(this.current),t.remove.call(this,n)}}}},qE=CE.TAG_NAMES;var WE=class extends GE{constructor(e){super(e),this.parser=e,this.treeAdapter=this.parser.treeAdapter,this.posTracker=null,this.lastStartTagToken=null,this.lastFosterParentingLocation=null,this.currentToken=null}_setStartLocation(e){let t=null;this.lastStartTagToken&&(t=Object.assign({},this.lastStartTagToken.location),t.startTag=this.lastStartTagToken.location),this.treeAdapter.setNodeSourceCodeLocation(e,t)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),i={};t.type===VE.END_TAG_TOKEN&&r===t.tagName?(i.endTag=Object.assign({},n),i.endLine=n.endLine,i.endCol=n.endCol,i.endOffset=n.endOffset):(i.endLine=n.startLine,i.endCol=n.startCol,i.endOffset=n.startOffset),this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}_getOverriddenMethods(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),e.lastStartTagToken=null,e.lastFosterParentingLocation=null,e.currentToken=null;const i=GE.install(this.tokenizer,YE);e.posTracker=i.posTracker,GE.install(this.openElements,UE,{onItemPop:function(t){e._setEndLocation(t,e.currentToken)}})},_runParsingLoop(n){t._runParsingLoop.call(this,n);for(let t=this.openElements.stackTop;t>=0;t--)e._setEndLocation(this.openElements.items[t],e.currentToken)},_processTokenInForeignContent(n){e.currentToken=n,t._processTokenInForeignContent.call(this,n)},_processToken(n){e.currentToken=n,t._processToken.call(this,n);if(n.type===VE.END_TAG_TOKEN&&(n.tagName===qE.HTML||n.tagName===qE.BODY&&this.openElements.hasInScope(qE.BODY)))for(let t=this.openElements.stackTop;t>=0;t--){const r=this.openElements.items[t];if(this.treeAdapter.getTagName(r)===n.tagName){e._setEndLocation(r,n);break}}},_setDocumentType(e){t._setDocumentType.call(this,e);const n=this.treeAdapter.getChildNodes(this.document),r=n.length;for(let t=0;t<r;t++){const r=n[t];if(this.treeAdapter.isDocumentTypeNode(r)){this.treeAdapter.setNodeSourceCodeLocation(r,e.location);break}}},_attachElementToTree(n){e._setStartLocation(n),e.lastStartTagToken=null,t._attachElementToTree.call(this,n)},_appendElement(n,r){e.lastStartTagToken=n,t._appendElement.call(this,n,r)},_insertElement(n,r){e.lastStartTagToken=n,t._insertElement.call(this,n,r)},_insertTemplate(n){e.lastStartTagToken=n,t._insertTemplate.call(this,n);const r=this.treeAdapter.getTemplateContent(this.openElements.current);this.treeAdapter.setNodeSourceCodeLocation(r,null)},_insertFakeRootElement(){t._insertFakeRootElement.call(this),this.treeAdapter.setNodeSourceCodeLocation(this.openElements.current,null)},_appendCommentNode(e,n){t._appendCommentNode.call(this,e,n);const r=this.treeAdapter.getChildNodes(n),i=r[r.length-1];this.treeAdapter.setNodeSourceCodeLocation(i,e.location)},_findFosterParentingLocation(){return e.lastFosterParentingLocation=t._findFosterParentingLocation.call(this),e.lastFosterParentingLocation},_insertCharacters(n){t._insertCharacters.call(this,n);const r=this._shouldFosterParentOnInsertion(),i=r&&e.lastFosterParentingLocation.parent||this.openElements.currentTmplContent||this.openElements.current,a=this.treeAdapter.getChildNodes(i),o=r&&e.lastFosterParentingLocation.beforeElement?a.indexOf(e.lastFosterParentingLocation.beforeElement)-1:a.length-1,s=a[o];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:e,endCol:t,endOffset:r}=n.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:e,endCol:t,endOffset:r})}else this.treeAdapter.setNodeSourceCodeLocation(s,n.location)}}}};const XE=LE;var KE=class extends XE{constructor(e,t){super(e),this.posTracker=null,this.onParseError=t.onParseError}_setErrorLocation(e){e.startLine=e.endLine=this.posTracker.line,e.startCol=e.endCol=this.posTracker.col,e.startOffset=e.endOffset=this.posTracker.offset}_reportError(e){const t={code:e,startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1};this._setErrorLocation(t),this.onParseError(t)}_getOverriddenMethods(e){return{_err(t){e._reportError(t)}}}};const QE=KE,ZE=DE,JE=LE;const ex=KE,tx=class extends QE{constructor(e,t){super(e,t),this.posTracker=JE.install(e,ZE),this.lastErrOffset=-1}_reportError(e){this.lastErrOffset!==this.posTracker.offset&&(this.lastErrOffset=this.posTracker.offset,super._reportError(e))}},nx=LE;const rx=KE,ix=class extends ex{constructor(e,t){super(e,t);const n=nx.install(e.preprocessor,tx,t);this.posTracker=n.posTracker}},ax=HE,ox=LE;var sx=class extends rx{constructor(e,t){super(e,t),this.opts=t,this.ctLoc=null,this.locBeforeToken=!1}_setErrorLocation(e){this.ctLoc&&(e.startLine=this.ctLoc.startLine,e.startCol=this.ctLoc.startCol,e.startOffset=this.ctLoc.startOffset,e.endLine=this.locBeforeToken?this.ctLoc.startLine:this.ctLoc.endLine,e.endCol=this.locBeforeToken?this.ctLoc.startCol:this.ctLoc.endCol,e.endOffset=this.locBeforeToken?this.ctLoc.startOffset:this.ctLoc.endOffset)}_getOverriddenMethods(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),ox.install(this.tokenizer,ix,e.opts),ox.install(this.tokenizer,ax)},_processInputToken(n){e.ctLoc=n.location,t._processInputToken.call(this,n)},_err(t,n){e.locBeforeToken=n&&n.beforeToken,e._reportError(t)}}}},lx={};const{DOCUMENT_MODE:cx}=CE;lx.createDocument=function(){return{nodeName:"#document",mode:cx.NO_QUIRKS,childNodes:[]}},lx.createDocumentFragment=function(){return{nodeName:"#document-fragment",childNodes:[]}},lx.createElement=function(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},lx.createCommentNode=function(e){return{nodeName:"#comment",data:e,parentNode:null}};const ux=function(e){return{nodeName:"#text",value:e,parentNode:null}},hx=lx.appendChild=function(e,t){e.childNodes.push(t),t.parentNode=e},px=lx.insertBefore=function(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e};lx.setTemplateContent=function(e,t){e.content=t},lx.getTemplateContent=function(e){return e.content},lx.setDocumentType=function(e,t,n,r){let i=null;for(let a=0;a<e.childNodes.length;a++)if("#documentType"===e.childNodes[a].nodeName){i=e.childNodes[a];break}i?(i.name=t,i.publicId=n,i.systemId=r):hx(e,{nodeName:"#documentType",name:t,publicId:n,systemId:r})},lx.setDocumentMode=function(e,t){e.mode=t},lx.getDocumentMode=function(e){return e.mode},lx.detachNode=function(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},lx.insertText=function(e,t){if(e.childNodes.length){const n=e.childNodes[e.childNodes.length-1];if("#text"===n.nodeName)return void(n.value+=t)}hx(e,ux(t))},lx.insertTextBefore=function(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&"#text"===r.nodeName?r.value+=t:px(e,ux(t),n)},lx.adoptAttributes=function(e,t){const n=[];for(let r=0;r<e.attrs.length;r++)n.push(e.attrs[r].name);for(let r=0;r<t.length;r++)-1===n.indexOf(t[r].name)&&e.attrs.push(t[r])},lx.getFirstChild=function(e){return e.childNodes[0]},lx.getChildNodes=function(e){return e.childNodes},lx.getParentNode=function(e){return e.parentNode},lx.getAttrList=function(e){return e.attrs},lx.getTagName=function(e){return e.tagName},lx.getNamespaceURI=function(e){return e.namespaceURI},lx.getTextNodeContent=function(e){return e.value},lx.getCommentNodeContent=function(e){return e.data},lx.getDocumentTypeNodeName=function(e){return e.name},lx.getDocumentTypeNodePublicId=function(e){return e.publicId},lx.getDocumentTypeNodeSystemId=function(e){return e.systemId},lx.isTextNode=function(e){return"#text"===e.nodeName},lx.isCommentNode=function(e){return"#comment"===e.nodeName},lx.isDocumentTypeNode=function(e){return"#documentType"===e.nodeName},lx.isElementNode=function(e){return!!e.tagName},lx.setNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=t},lx.getNodeSourceCodeLocation=function(e){return e.sourceCodeLocation},lx.updateNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=Object.assign(e.sourceCodeLocation,t)};var dx={};const{DOCUMENT_MODE:fx}=CE,mx=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],gx=mx.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]),yx=["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"],vx=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Ex=vx.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]);function xx(e){const t=-1!==e.indexOf('"')?"'":'"';return t+e+t}function bx(e,t){for(let n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return!0;return!1}dx.isConforming=function(e){return"html"===e.name&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)},dx.getDocumentMode=function(e){if("html"!==e.name)return fx.QUIRKS;const t=e.systemId;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return fx.QUIRKS;let n=e.publicId;if(null!==n){if(n=n.toLowerCase(),yx.indexOf(n)>-1)return fx.QUIRKS;let e=null===t?gx:mx;if(bx(n,e))return fx.QUIRKS;if(e=null===t?vx:Ex,bx(n,e))return fx.LIMITED_QUIRKS}return fx.NO_QUIRKS},dx.serializeContent=function(e,t,n){let r="!DOCTYPE ";return e&&(r+=e),t?r+=" PUBLIC "+xx(t):n&&(r+=" SYSTEM"),null!==n&&(r+=" "+xx(n)),r};var Cx={};const Sx=bE,wx=CE,Tx=wx.TAG_NAMES,kx=wx.NAMESPACES,_x=wx.ATTRS,Ox="text/html",Ax="application/xhtml+xml",Ix={attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},Mx={"xlink:actuate":{prefix:"xlink",name:"actuate",namespace:kx.XLINK},"xlink:arcrole":{prefix:"xlink",name:"arcrole",namespace:kx.XLINK},"xlink:href":{prefix:"xlink",name:"href",namespace:kx.XLINK},"xlink:role":{prefix:"xlink",name:"role",namespace:kx.XLINK},"xlink:show":{prefix:"xlink",name:"show",namespace:kx.XLINK},"xlink:title":{prefix:"xlink",name:"title",namespace:kx.XLINK},"xlink:type":{prefix:"xlink",name:"type",namespace:kx.XLINK},"xml:base":{prefix:"xml",name:"base",namespace:kx.XML},"xml:lang":{prefix:"xml",name:"lang",namespace:kx.XML},"xml:space":{prefix:"xml",name:"space",namespace:kx.XML},xmlns:{prefix:"",name:"xmlns",namespace:kx.XMLNS},"xmlns:xlink":{prefix:"xmlns",name:"xlink",namespace:kx.XMLNS}},Nx=Cx.SVG_TAG_NAMES_ADJUSTMENT_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},Px={[Tx.B]:!0,[Tx.BIG]:!0,[Tx.BLOCKQUOTE]:!0,[Tx.BODY]:!0,[Tx.BR]:!0,[Tx.CENTER]:!0,[Tx.CODE]:!0,[Tx.DD]:!0,[Tx.DIV]:!0,[Tx.DL]:!0,[Tx.DT]:!0,[Tx.EM]:!0,[Tx.EMBED]:!0,[Tx.H1]:!0,[Tx.H2]:!0,[Tx.H3]:!0,[Tx.H4]:!0,[Tx.H5]:!0,[Tx.H6]:!0,[Tx.HEAD]:!0,[Tx.HR]:!0,[Tx.I]:!0,[Tx.IMG]:!0,[Tx.LI]:!0,[Tx.LISTING]:!0,[Tx.MENU]:!0,[Tx.META]:!0,[Tx.NOBR]:!0,[Tx.OL]:!0,[Tx.P]:!0,[Tx.PRE]:!0,[Tx.RUBY]:!0,[Tx.S]:!0,[Tx.SMALL]:!0,[Tx.SPAN]:!0,[Tx.STRONG]:!0,[Tx.STRIKE]:!0,[Tx.SUB]:!0,[Tx.SUP]:!0,[Tx.TABLE]:!0,[Tx.TT]:!0,[Tx.U]:!0,[Tx.UL]:!0,[Tx.VAR]:!0};Cx.causesExit=function(e){const t=e.tagName;return!!(t===Tx.FONT&&(null!==Sx.getTokenAttr(e,_x.COLOR)||null!==Sx.getTokenAttr(e,_x.SIZE)||null!==Sx.getTokenAttr(e,_x.FACE)))||Px[t]},Cx.adjustTokenMathMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}},Cx.adjustTokenSVGAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=Ix[e.attrs[t].name];n&&(e.attrs[t].name=n)}},Cx.adjustTokenXMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=Mx[e.attrs[t].name];n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}},Cx.adjustTokenSVGTagName=function(e){const t=Nx[e.tagName];t&&(e.tagName=t)},Cx.isIntegrationPoint=function(e,t,n,r){return!(r&&r!==kx.HTML||!function(e,t,n){if(t===kx.MATHML&&e===Tx.ANNOTATION_XML)for(let r=0;r<n.length;r++)if(n[r].name===_x.ENCODING){const e=n[r].value.toLowerCase();return e===Ox||e===Ax}return t===kx.SVG&&(e===Tx.FOREIGN_OBJECT||e===Tx.DESC||e===Tx.TITLE)}(e,t,n))||!(r&&r!==kx.MATHML||!function(e,t){return t===kx.MATHML&&(e===Tx.MI||e===Tx.MO||e===Tx.MN||e===Tx.MS||e===Tx.MTEXT)}(e,t))};const Fx=bE,Lx=ME,Rx=PE,Dx=WE,Bx=sx,$x=LE,zx=lx,Hx=function(e,t){return[e,t=t||Object.create(null)].reduce(((e,t)=>(Object.keys(t).forEach((n=>{e[n]=t[n]})),e)),Object.create(null))},jx=dx,Gx=Cx,Vx=Wv,Yx=Uv,Ux=CE,qx=Ux.TAG_NAMES,Wx=Ux.NAMESPACES,Xx=Ux.ATTRS,Kx={scriptingEnabled:!0,sourceCodeLocationInfo:!1,onParseError:null,treeAdapter:zx},Qx="IN_TABLE_MODE",Zx={[qx.TR]:"IN_ROW_MODE",[qx.TBODY]:"IN_TABLE_BODY_MODE",[qx.THEAD]:"IN_TABLE_BODY_MODE",[qx.TFOOT]:"IN_TABLE_BODY_MODE",[qx.CAPTION]:"IN_CAPTION_MODE",[qx.COLGROUP]:"IN_COLUMN_GROUP_MODE",[qx.TABLE]:Qx,[qx.BODY]:"IN_BODY_MODE",[qx.FRAMESET]:"IN_FRAMESET_MODE"},Jx={[qx.CAPTION]:Qx,[qx.COLGROUP]:Qx,[qx.TBODY]:Qx,[qx.TFOOT]:Qx,[qx.THEAD]:Qx,[qx.COL]:"IN_COLUMN_GROUP_MODE",[qx.TR]:"IN_TABLE_BODY_MODE",[qx.TD]:"IN_ROW_MODE",[qx.TH]:"IN_ROW_MODE"},eb={INITIAL_MODE:{[Fx.CHARACTER_TOKEN]:mb,[Fx.NULL_CHARACTER_TOKEN]:mb,[Fx.WHITESPACE_CHARACTER_TOKEN]:cb,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:function(e,t){e._setDocumentType(t);const n=t.forceQuirks?Ux.DOCUMENT_MODE.QUIRKS:jx.getDocumentMode(t);jx.isConforming(t)||e._err(Vx.nonConformingDoctype);e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode="BEFORE_HTML_MODE"},[Fx.START_TAG_TOKEN]:mb,[Fx.END_TAG_TOKEN]:mb,[Fx.EOF_TOKEN]:mb},BEFORE_HTML_MODE:{[Fx.CHARACTER_TOKEN]:gb,[Fx.NULL_CHARACTER_TOKEN]:gb,[Fx.WHITESPACE_CHARACTER_TOKEN]:cb,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){t.tagName===qx.HTML?(e._insertElement(t,Wx.HTML),e.insertionMode="BEFORE_HEAD_MODE"):gb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n!==qx.HTML&&n!==qx.HEAD&&n!==qx.BODY&&n!==qx.BR||gb(e,t)},[Fx.EOF_TOKEN]:gb},BEFORE_HEAD_MODE:{[Fx.CHARACTER_TOKEN]:yb,[Fx.NULL_CHARACTER_TOKEN]:yb,[Fx.WHITESPACE_CHARACTER_TOKEN]:cb,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:ub,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.HTML?Lb(e,t):n===qx.HEAD?(e._insertElement(t,Wx.HTML),e.headElement=e.openElements.current,e.insertionMode="IN_HEAD_MODE"):yb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.HEAD||n===qx.BODY||n===qx.HTML||n===qx.BR?yb(e,t):e._err(Vx.endTagWithoutMatchingOpenElement)},[Fx.EOF_TOKEN]:yb},IN_HEAD_MODE:{[Fx.CHARACTER_TOKEN]:xb,[Fx.NULL_CHARACTER_TOKEN]:xb,[Fx.WHITESPACE_CHARACTER_TOKEN]:db,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:ub,[Fx.START_TAG_TOKEN]:vb,[Fx.END_TAG_TOKEN]:Eb,[Fx.EOF_TOKEN]:xb},IN_HEAD_NO_SCRIPT_MODE:{[Fx.CHARACTER_TOKEN]:bb,[Fx.NULL_CHARACTER_TOKEN]:bb,[Fx.WHITESPACE_CHARACTER_TOKEN]:db,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:ub,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.HTML?Lb(e,t):n===qx.BASEFONT||n===qx.BGSOUND||n===qx.HEAD||n===qx.LINK||n===qx.META||n===qx.NOFRAMES||n===qx.STYLE?vb(e,t):n===qx.NOSCRIPT?e._err(Vx.nestedNoscriptInHead):bb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.NOSCRIPT?(e.openElements.pop(),e.insertionMode="IN_HEAD_MODE"):n===qx.BR?bb(e,t):e._err(Vx.endTagWithoutMatchingOpenElement)},[Fx.EOF_TOKEN]:bb},AFTER_HEAD_MODE:{[Fx.CHARACTER_TOKEN]:Cb,[Fx.NULL_CHARACTER_TOKEN]:Cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:db,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:ub,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.HTML?Lb(e,t):n===qx.BODY?(e._insertElement(t,Wx.HTML),e.framesetOk=!1,e.insertionMode="IN_BODY_MODE"):n===qx.FRAMESET?(e._insertElement(t,Wx.HTML),e.insertionMode="IN_FRAMESET_MODE"):n===qx.BASE||n===qx.BASEFONT||n===qx.BGSOUND||n===qx.LINK||n===qx.META||n===qx.NOFRAMES||n===qx.SCRIPT||n===qx.STYLE||n===qx.TEMPLATE||n===qx.TITLE?(e._err(Vx.abandonedHeadElementChild),e.openElements.push(e.headElement),vb(e,t),e.openElements.remove(e.headElement)):n===qx.HEAD?e._err(Vx.misplacedStartTagForHeadElement):Cb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.BODY||n===qx.HTML||n===qx.BR?Cb(e,t):n===qx.TEMPLATE?Eb(e,t):e._err(Vx.endTagWithoutMatchingOpenElement)},[Fx.EOF_TOKEN]:Cb},IN_BODY_MODE:{[Fx.CHARACTER_TOKEN]:wb,[Fx.NULL_CHARACTER_TOKEN]:cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:Sb,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:Lb,[Fx.END_TAG_TOKEN]:$b,[Fx.EOF_TOKEN]:zb},TEXT_MODE:{[Fx.CHARACTER_TOKEN]:db,[Fx.NULL_CHARACTER_TOKEN]:db,[Fx.WHITESPACE_CHARACTER_TOKEN]:db,[Fx.COMMENT_TOKEN]:cb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:cb,[Fx.END_TAG_TOKEN]:function(e,t){t.tagName===qx.SCRIPT&&(e.pendingScript=e.openElements.current);e.openElements.pop(),e.insertionMode=e.originalInsertionMode},[Fx.EOF_TOKEN]:function(e,t){e._err(Vx.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e._processToken(t)}},[Qx]:{[Fx.CHARACTER_TOKEN]:Hb,[Fx.NULL_CHARACTER_TOKEN]:Hb,[Fx.WHITESPACE_CHARACTER_TOKEN]:Hb,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:jb,[Fx.END_TAG_TOKEN]:Gb,[Fx.EOF_TOKEN]:zb},IN_TABLE_TEXT_MODE:{[Fx.CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0},[Fx.NULL_CHARACTER_TOKEN]:cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t)},[Fx.COMMENT_TOKEN]:Yb,[Fx.DOCTYPE_TOKEN]:Yb,[Fx.START_TAG_TOKEN]:Yb,[Fx.END_TAG_TOKEN]:Yb,[Fx.EOF_TOKEN]:Yb},IN_CAPTION_MODE:{[Fx.CHARACTER_TOKEN]:wb,[Fx.NULL_CHARACTER_TOKEN]:cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:Sb,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.CAPTION||n===qx.COL||n===qx.COLGROUP||n===qx.TBODY||n===qx.TD||n===qx.TFOOT||n===qx.TH||n===qx.THEAD||n===qx.TR?e.openElements.hasInTableScope(qx.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(qx.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Qx,e._processToken(t)):Lb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.CAPTION||n===qx.TABLE?e.openElements.hasInTableScope(qx.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(qx.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Qx,n===qx.TABLE&&e._processToken(t)):n!==qx.BODY&&n!==qx.COL&&n!==qx.COLGROUP&&n!==qx.HTML&&n!==qx.TBODY&&n!==qx.TD&&n!==qx.TFOOT&&n!==qx.TH&&n!==qx.THEAD&&n!==qx.TR&&$b(e,t)},[Fx.EOF_TOKEN]:zb},IN_COLUMN_GROUP_MODE:{[Fx.CHARACTER_TOKEN]:Ub,[Fx.NULL_CHARACTER_TOKEN]:Ub,[Fx.WHITESPACE_CHARACTER_TOKEN]:db,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.HTML?Lb(e,t):n===qx.COL?(e._appendElement(t,Wx.HTML),t.ackSelfClosing=!0):n===qx.TEMPLATE?vb(e,t):Ub(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.COLGROUP?e.openElements.currentTagName===qx.COLGROUP&&(e.openElements.pop(),e.insertionMode=Qx):n===qx.TEMPLATE?Eb(e,t):n!==qx.COL&&Ub(e,t)},[Fx.EOF_TOKEN]:zb},IN_TABLE_BODY_MODE:{[Fx.CHARACTER_TOKEN]:Hb,[Fx.NULL_CHARACTER_TOKEN]:Hb,[Fx.WHITESPACE_CHARACTER_TOKEN]:Hb,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.TR?(e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Wx.HTML),e.insertionMode="IN_ROW_MODE"):n===qx.TH||n===qx.TD?(e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(qx.TR),e.insertionMode="IN_ROW_MODE",e._processToken(t)):n===qx.CAPTION||n===qx.COL||n===qx.COLGROUP||n===qx.TBODY||n===qx.TFOOT||n===qx.THEAD?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Qx,e._processToken(t)):jb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.TBODY||n===qx.TFOOT||n===qx.THEAD?e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Qx):n===qx.TABLE?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Qx,e._processToken(t)):(n!==qx.BODY&&n!==qx.CAPTION&&n!==qx.COL&&n!==qx.COLGROUP||n!==qx.HTML&&n!==qx.TD&&n!==qx.TH&&n!==qx.TR)&&Gb(e,t)},[Fx.EOF_TOKEN]:zb},IN_ROW_MODE:{[Fx.CHARACTER_TOKEN]:Hb,[Fx.NULL_CHARACTER_TOKEN]:Hb,[Fx.WHITESPACE_CHARACTER_TOKEN]:Hb,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.TH||n===qx.TD?(e.openElements.clearBackToTableRowContext(),e._insertElement(t,Wx.HTML),e.insertionMode="IN_CELL_MODE",e.activeFormattingElements.insertMarker()):n===qx.CAPTION||n===qx.COL||n===qx.COLGROUP||n===qx.TBODY||n===qx.TFOOT||n===qx.THEAD||n===qx.TR?e.openElements.hasInTableScope(qx.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):jb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.TR?e.openElements.hasInTableScope(qx.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE"):n===qx.TABLE?e.openElements.hasInTableScope(qx.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):n===qx.TBODY||n===qx.TFOOT||n===qx.THEAD?(e.openElements.hasInTableScope(n)||e.openElements.hasInTableScope(qx.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):(n!==qx.BODY&&n!==qx.CAPTION&&n!==qx.COL&&n!==qx.COLGROUP||n!==qx.HTML&&n!==qx.TD&&n!==qx.TH)&&Gb(e,t)},[Fx.EOF_TOKEN]:zb},IN_CELL_MODE:{[Fx.CHARACTER_TOKEN]:wb,[Fx.NULL_CHARACTER_TOKEN]:cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:Sb,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.CAPTION||n===qx.COL||n===qx.COLGROUP||n===qx.TBODY||n===qx.TD||n===qx.TFOOT||n===qx.TH||n===qx.THEAD||n===qx.TR?(e.openElements.hasInTableScope(qx.TD)||e.openElements.hasInTableScope(qx.TH))&&(e._closeTableCell(),e._processToken(t)):Lb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.TD||n===qx.TH?e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode="IN_ROW_MODE"):n===qx.TABLE||n===qx.TBODY||n===qx.TFOOT||n===qx.THEAD||n===qx.TR?e.openElements.hasInTableScope(n)&&(e._closeTableCell(),e._processToken(t)):n!==qx.BODY&&n!==qx.CAPTION&&n!==qx.COL&&n!==qx.COLGROUP&&n!==qx.HTML&&$b(e,t)},[Fx.EOF_TOKEN]:zb},IN_SELECT_MODE:{[Fx.CHARACTER_TOKEN]:db,[Fx.NULL_CHARACTER_TOKEN]:cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:db,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:qb,[Fx.END_TAG_TOKEN]:Wb,[Fx.EOF_TOKEN]:zb},IN_SELECT_IN_TABLE_MODE:{[Fx.CHARACTER_TOKEN]:db,[Fx.NULL_CHARACTER_TOKEN]:cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:db,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.CAPTION||n===qx.TABLE||n===qx.TBODY||n===qx.TFOOT||n===qx.THEAD||n===qx.TR||n===qx.TD||n===qx.TH?(e.openElements.popUntilTagNamePopped(qx.SELECT),e._resetInsertionMode(),e._processToken(t)):qb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.CAPTION||n===qx.TABLE||n===qx.TBODY||n===qx.TFOOT||n===qx.THEAD||n===qx.TR||n===qx.TD||n===qx.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(qx.SELECT),e._resetInsertionMode(),e._processToken(t)):Wb(e,t)},[Fx.EOF_TOKEN]:zb},IN_TEMPLATE_MODE:{[Fx.CHARACTER_TOKEN]:wb,[Fx.NULL_CHARACTER_TOKEN]:cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:Sb,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;if(n===qx.BASE||n===qx.BASEFONT||n===qx.BGSOUND||n===qx.LINK||n===qx.META||n===qx.NOFRAMES||n===qx.SCRIPT||n===qx.STYLE||n===qx.TEMPLATE||n===qx.TITLE)vb(e,t);else{const r=Jx[n]||"IN_BODY_MODE";e._popTmplInsertionMode(),e._pushTmplInsertionMode(r),e.insertionMode=r,e._processToken(t)}},[Fx.END_TAG_TOKEN]:function(e,t){t.tagName===qx.TEMPLATE&&Eb(e,t)},[Fx.EOF_TOKEN]:Xb},AFTER_BODY_MODE:{[Fx.CHARACTER_TOKEN]:Kb,[Fx.NULL_CHARACTER_TOKEN]:Kb,[Fx.WHITESPACE_CHARACTER_TOKEN]:Sb,[Fx.COMMENT_TOKEN]:function(e,t){e._appendCommentNode(t,e.openElements.items[0])},[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){t.tagName===qx.HTML?Lb(e,t):Kb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){t.tagName===qx.HTML?e.fragmentContext||(e.insertionMode="AFTER_AFTER_BODY_MODE"):Kb(e,t)},[Fx.EOF_TOKEN]:fb},IN_FRAMESET_MODE:{[Fx.CHARACTER_TOKEN]:cb,[Fx.NULL_CHARACTER_TOKEN]:cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:db,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.HTML?Lb(e,t):n===qx.FRAMESET?e._insertElement(t,Wx.HTML):n===qx.FRAME?(e._appendElement(t,Wx.HTML),t.ackSelfClosing=!0):n===qx.NOFRAMES&&vb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){t.tagName!==qx.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagName===qx.FRAMESET||(e.insertionMode="AFTER_FRAMESET_MODE"))},[Fx.EOF_TOKEN]:fb},AFTER_FRAMESET_MODE:{[Fx.CHARACTER_TOKEN]:cb,[Fx.NULL_CHARACTER_TOKEN]:cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:db,[Fx.COMMENT_TOKEN]:hb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.HTML?Lb(e,t):n===qx.NOFRAMES&&vb(e,t)},[Fx.END_TAG_TOKEN]:function(e,t){t.tagName===qx.HTML&&(e.insertionMode="AFTER_AFTER_FRAMESET_MODE")},[Fx.EOF_TOKEN]:fb},AFTER_AFTER_BODY_MODE:{[Fx.CHARACTER_TOKEN]:Qb,[Fx.NULL_CHARACTER_TOKEN]:Qb,[Fx.WHITESPACE_CHARACTER_TOKEN]:Sb,[Fx.COMMENT_TOKEN]:pb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){t.tagName===qx.HTML?Lb(e,t):Qb(e,t)},[Fx.END_TAG_TOKEN]:Qb,[Fx.EOF_TOKEN]:fb},AFTER_AFTER_FRAMESET_MODE:{[Fx.CHARACTER_TOKEN]:cb,[Fx.NULL_CHARACTER_TOKEN]:cb,[Fx.WHITESPACE_CHARACTER_TOKEN]:Sb,[Fx.COMMENT_TOKEN]:pb,[Fx.DOCTYPE_TOKEN]:cb,[Fx.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===qx.HTML?Lb(e,t):n===qx.NOFRAMES&&vb(e,t)},[Fx.END_TAG_TOKEN]:cb,[Fx.EOF_TOKEN]:fb}};var tb=class{constructor(e){this.options=Hx(Kx,e),this.treeAdapter=this.options.treeAdapter,this.pendingScript=null,this.options.sourceCodeLocationInfo&&$x.install(this,Dx),this.options.onParseError&&$x.install(this,Bx,{onParseError:this.options.onParseError})}parse(e){const t=this.treeAdapter.createDocument();return this._bootstrap(t,null),this.tokenizer.write(e,!0),this._runParsingLoop(null),t}parseFragment(e,t){t||(t=this.treeAdapter.createElement(qx.TEMPLATE,Wx.HTML,[]));const n=this.treeAdapter.createElement("documentmock",Wx.HTML,[]);this._bootstrap(n,t),this.treeAdapter.getTagName(t)===qx.TEMPLATE&&this._pushTmplInsertionMode("IN_TEMPLATE_MODE"),this._initTokenizerForFragmentParsing(),this._insertFakeRootElement(),this._resetInsertionMode(),this._findFormInFragmentContext(),this.tokenizer.write(e,!0),this._runParsingLoop(null);const r=this.treeAdapter.getFirstChild(n),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(r,i),i}_bootstrap(e,t){this.tokenizer=new Fx(this.options),this.stopped=!1,this.insertionMode="INITIAL_MODE",this.originalInsertionMode="",this.document=e,this.fragmentContext=t,this.headElement=null,this.formElement=null,this.openElements=new Lx(this.document,this.treeAdapter),this.activeFormattingElements=new Rx(this.treeAdapter),this.tmplInsertionModeStack=[],this.tmplInsertionModeStackTop=-1,this.currentTmplInsertionMode=null,this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1}_err(){}_runParsingLoop(e){for(;!this.stopped;){this._setupTokenizerCDATAMode();const t=this.tokenizer.getNextToken();if(t.type===Fx.HIBERNATION_TOKEN)break;if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.type===Fx.WHITESPACE_CHARACTER_TOKEN&&"\n"===t.chars[0])){if(1===t.chars.length)continue;t.chars=t.chars.substr(1)}if(this._processInputToken(t),e&&this.pendingScript)break}}runParsingLoopForCurrentChunk(e,t){if(this._runParsingLoop(t),t&&this.pendingScript){const e=this.pendingScript;return this.pendingScript=null,void t(e)}e&&e()}_setupTokenizerCDATAMode(){const e=this._getAdjustedCurrentElement();this.tokenizer.allowCDATA=e&&e!==this.document&&this.treeAdapter.getNamespaceURI(e)!==Wx.HTML&&!this._isIntegrationPoint(e)}_switchToTextParsing(e,t){this._insertElement(e,Wx.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode="TEXT_MODE"}switchToPlaintextParsing(){this.insertionMode="TEXT_MODE",this.originalInsertionMode="IN_BODY_MODE",this.tokenizer.state=Fx.MODE.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;do{if(this.treeAdapter.getTagName(e)===qx.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}while(e)}_initTokenizerForFragmentParsing(){if(this.treeAdapter.getNamespaceURI(this.fragmentContext)===Wx.HTML){const e=this.treeAdapter.getTagName(this.fragmentContext);e===qx.TITLE||e===qx.TEXTAREA?this.tokenizer.state=Fx.MODE.RCDATA:e===qx.STYLE||e===qx.XMP||e===qx.IFRAME||e===qx.NOEMBED||e===qx.NOFRAMES||e===qx.NOSCRIPT?this.tokenizer.state=Fx.MODE.RAWTEXT:e===qx.SCRIPT?this.tokenizer.state=Fx.MODE.SCRIPT_DATA:e===qx.PLAINTEXT&&(this.tokenizer.state=Fx.MODE.PLAINTEXT)}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",r=e.systemId||"";this.treeAdapter.setDocumentType(this.document,t,n,r)}_attachElementToTree(e){if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n),this.openElements.push(n)}_insertFakeElement(e){const t=this.treeAdapter.createElement(e,Wx.HTML,[]);this._attachElementToTree(t),this.openElements.push(t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,Wx.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t),this.openElements.push(t)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(qx.HTML,Wx.HTML,[]);this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n)}_insertCharacters(e){if(this._shouldFosterParentOnInsertion())this._fosterParentText(e.chars);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.insertText(t,e.chars)}}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_shouldProcessTokenInForeignContent(e){const t=this._getAdjustedCurrentElement();if(!t||t===this.document)return!1;const n=this.treeAdapter.getNamespaceURI(t);if(n===Wx.HTML)return!1;if(this.treeAdapter.getTagName(t)===qx.ANNOTATION_XML&&n===Wx.MATHML&&e.type===Fx.START_TAG_TOKEN&&e.tagName===qx.SVG)return!1;const r=e.type===Fx.CHARACTER_TOKEN||e.type===Fx.NULL_CHARACTER_TOKEN||e.type===Fx.WHITESPACE_CHARACTER_TOKEN;return(!(e.type===Fx.START_TAG_TOKEN&&e.tagName!==qx.MGLYPH&&e.tagName!==qx.MALIGNMARK)&&!r||!this._isIntegrationPoint(t,Wx.MATHML))&&((e.type!==Fx.START_TAG_TOKEN&&!r||!this._isIntegrationPoint(t,Wx.HTML))&&e.type!==Fx.EOF_TOKEN)}_processToken(e){eb[this.insertionMode][e.type](this,e)}_processTokenInBodyMode(e){eb.IN_BODY_MODE[e.type](this,e)}_processTokenInForeignContent(e){e.type===Fx.CHARACTER_TOKEN?function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e):e.type===Fx.NULL_CHARACTER_TOKEN?function(e,t){t.chars=Yx.REPLACEMENT_CHARACTER,e._insertCharacters(t)}(this,e):e.type===Fx.WHITESPACE_CHARACTER_TOKEN?db(this,e):e.type===Fx.COMMENT_TOKEN?hb(this,e):e.type===Fx.START_TAG_TOKEN?function(e,t){if(Gx.causesExit(t)&&!e.fragmentContext){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Wx.HTML&&!e._isIntegrationPoint(e.openElements.current);)e.openElements.pop();e._processToken(t)}else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Wx.MATHML?Gx.adjustTokenMathMLAttrs(t):r===Wx.SVG&&(Gx.adjustTokenSVGTagName(t),Gx.adjustTokenSVGAttrs(t)),Gx.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):e.type===Fx.END_TAG_TOKEN&&function(e,t){for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Wx.HTML){e._processToken(t);break}if(e.treeAdapter.getTagName(r).toLowerCase()===t.tagName){e.openElements.popUntilElementPopped(r);break}}}(this,e)}_processInputToken(e){this._shouldProcessTokenInForeignContent(e)?this._processTokenInForeignContent(e):this._processToken(e),e.type===Fx.START_TAG_TOKEN&&e.selfClosing&&!e.ackSelfClosing&&this._err(Vx.nonVoidHtmlElementStartTagWithTrailingSolidus)}_isIntegrationPoint(e,t){const n=this.treeAdapter.getTagName(e),r=this.treeAdapter.getNamespaceURI(e),i=this.treeAdapter.getAttrList(e);return Gx.isIntegrationPoint(n,r,i,t)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.length;if(e){let t=e,n=null;do{if(t--,n=this.activeFormattingElements.entries[t],n.type===Rx.MARKER_ENTRY||this.openElements.contains(n.element)){t++;break}}while(t>0);for(let r=t;r<e;r++)n=this.activeFormattingElements.entries[r],this._insertElement(n.token,this.treeAdapter.getNamespaceURI(n.element)),n.element=this.openElements.current}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode="IN_ROW_MODE"}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(qx.P),this.openElements.popUntilTagNamePopped(qx.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop,t=!1;e>=0;e--){let n=this.openElements.items[e];0===e&&(t=!0,this.fragmentContext&&(n=this.fragmentContext));const r=this.treeAdapter.getTagName(n),i=Zx[r];if(i){this.insertionMode=i;break}if(!(t||r!==qx.TD&&r!==qx.TH)){this.insertionMode="IN_CELL_MODE";break}if(!t&&r===qx.HEAD){this.insertionMode="IN_HEAD_MODE";break}if(r===qx.SELECT){this._resetInsertionModeForSelect(e);break}if(r===qx.TEMPLATE){this.insertionMode=this.currentTmplInsertionMode;break}if(r===qx.HTML){this.insertionMode=this.headElement?"AFTER_HEAD_MODE":"BEFORE_HEAD_MODE";break}if(t){this.insertionMode="IN_BODY_MODE";break}}}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.items[t],n=this.treeAdapter.getTagName(e);if(n===qx.TEMPLATE)break;if(n===qx.TABLE)return void(this.insertionMode="IN_SELECT_IN_TABLE_MODE")}this.insertionMode="IN_SELECT_MODE"}_pushTmplInsertionMode(e){this.tmplInsertionModeStack.push(e),this.tmplInsertionModeStackTop++,this.currentTmplInsertionMode=e}_popTmplInsertionMode(){this.tmplInsertionModeStack.pop(),this.tmplInsertionModeStackTop--,this.currentTmplInsertionMode=this.tmplInsertionModeStack[this.tmplInsertionModeStackTop]}_isElementCausesFosterParenting(e){const t=this.treeAdapter.getTagName(e);return t===qx.TABLE||t===qx.TBODY||t===qx.TFOOT||t===qx.THEAD||t===qx.TR}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.current)}_findFosterParentingLocation(){const e={parent:null,beforeElement:null};for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t],r=this.treeAdapter.getTagName(n),i=this.treeAdapter.getNamespaceURI(n);if(r===qx.TEMPLATE&&i===Wx.HTML){e.parent=this.treeAdapter.getTemplateContent(n);break}if(r===qx.TABLE){e.parent=this.treeAdapter.getParentNode(n),e.parent?e.beforeElement=n:e.parent=this.openElements.items[t-1];break}}return e.parent||(e.parent=this.openElements.items[0]),e}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_fosterParentText(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertTextBefore(t.parent,e,t.beforeElement):this.treeAdapter.insertText(t.parent,e)}_isSpecialElement(e){const t=this.treeAdapter.getTagName(e),n=this.treeAdapter.getNamespaceURI(e);return Ux.SPECIAL_ELEMENTS[n][t]}};function nb(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagName)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Bb(e,t),n}function rb(e,t){let n=null;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i)&&(n=i)}return n||(e.openElements.popUntilElementPopped(t.element),e.activeFormattingElements.removeEntry(t)),n}function ib(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let a=0,o=i;o!==n;a++,o=i){i=e.openElements.getCommonAncestor(o);const n=e.activeFormattingElements.getElementEntry(o),s=n&&a>=3;!n||s?(s&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(o)):(o=ab(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function ab(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function ob(e,t,n){if(e._isElementCausesFosterParenting(t))e._fosterParentElement(n);else{const r=e.treeAdapter.getTagName(t),i=e.treeAdapter.getNamespaceURI(t);r===qx.TEMPLATE&&i===Wx.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function sb(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),i=n.token,a=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,n.token),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,a)}function lb(e,t){let n;for(let r=0;r<8&&(n=nb(e,t),n);r++){const t=rb(e,n);if(!t)break;e.activeFormattingElements.bookmark=n;const r=ib(e,t,n.element),i=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(r),ob(e,i,r),sb(e,t,n)}}function cb(){}function ub(e){e._err(Vx.misplacedDoctype)}function hb(e,t){e._appendCommentNode(t,e.openElements.currentTmplContent||e.openElements.current)}function pb(e,t){e._appendCommentNode(t,e.document)}function db(e,t){e._insertCharacters(t)}function fb(e){e.stopped=!0}function mb(e,t){e._err(Vx.missingDoctype,{beforeToken:!0}),e.treeAdapter.setDocumentMode(e.document,Ux.DOCUMENT_MODE.QUIRKS),e.insertionMode="BEFORE_HTML_MODE",e._processToken(t)}function gb(e,t){e._insertFakeRootElement(),e.insertionMode="BEFORE_HEAD_MODE",e._processToken(t)}function yb(e,t){e._insertFakeElement(qx.HEAD),e.headElement=e.openElements.current,e.insertionMode="IN_HEAD_MODE",e._processToken(t)}function vb(e,t){const n=t.tagName;n===qx.HTML?Lb(e,t):n===qx.BASE||n===qx.BASEFONT||n===qx.BGSOUND||n===qx.LINK||n===qx.META?(e._appendElement(t,Wx.HTML),t.ackSelfClosing=!0):n===qx.TITLE?e._switchToTextParsing(t,Fx.MODE.RCDATA):n===qx.NOSCRIPT?e.options.scriptingEnabled?e._switchToTextParsing(t,Fx.MODE.RAWTEXT):(e._insertElement(t,Wx.HTML),e.insertionMode="IN_HEAD_NO_SCRIPT_MODE"):n===qx.NOFRAMES||n===qx.STYLE?e._switchToTextParsing(t,Fx.MODE.RAWTEXT):n===qx.SCRIPT?e._switchToTextParsing(t,Fx.MODE.SCRIPT_DATA):n===qx.TEMPLATE?(e._insertTemplate(t,Wx.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode="IN_TEMPLATE_MODE",e._pushTmplInsertionMode("IN_TEMPLATE_MODE")):n===qx.HEAD?e._err(Vx.misplacedStartTagForHeadElement):xb(e,t)}function Eb(e,t){const n=t.tagName;n===qx.HEAD?(e.openElements.pop(),e.insertionMode="AFTER_HEAD_MODE"):n===qx.BODY||n===qx.BR||n===qx.HTML?xb(e,t):n===qx.TEMPLATE&&e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagName!==qx.TEMPLATE&&e._err(Vx.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(qx.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode()):e._err(Vx.endTagWithoutMatchingOpenElement)}function xb(e,t){e.openElements.pop(),e.insertionMode="AFTER_HEAD_MODE",e._processToken(t)}function bb(e,t){const n=t.type===Fx.EOF_TOKEN?Vx.openElementsLeftAfterEof:Vx.disallowedContentInNoscriptInHead;e._err(n),e.openElements.pop(),e.insertionMode="IN_HEAD_MODE",e._processToken(t)}function Cb(e,t){e._insertFakeElement(qx.BODY),e.insertionMode="IN_BODY_MODE",e._processToken(t)}function Sb(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function wb(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Tb(e,t){e.openElements.hasInButtonScope(qx.P)&&e._closePElement(),e._insertElement(t,Wx.HTML)}function kb(e,t){e.openElements.hasInButtonScope(qx.P)&&e._closePElement(),e._insertElement(t,Wx.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function _b(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Wx.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Ob(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Wx.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Ab(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Wx.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Ib(e,t){e._appendElement(t,Wx.HTML),t.ackSelfClosing=!0}function Mb(e,t){e._switchToTextParsing(t,Fx.MODE.RAWTEXT)}function Nb(e,t){e.openElements.currentTagName===qx.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Wx.HTML)}function Pb(e,t){e.openElements.hasInScope(qx.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Wx.HTML)}function Fb(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Wx.HTML)}function Lb(e,t){const n=t.tagName;switch(n.length){case 1:n===qx.I||n===qx.S||n===qx.B||n===qx.U?_b(e,t):n===qx.P?Tb(e,t):n===qx.A?function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(qx.A);n&&(lb(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Wx.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):Fb(e,t);break;case 2:n===qx.DL||n===qx.OL||n===qx.UL?Tb(e,t):n===qx.H1||n===qx.H2||n===qx.H3||n===qx.H4||n===qx.H5||n===qx.H6?function(e,t){e.openElements.hasInButtonScope(qx.P)&&e._closePElement();const n=e.openElements.currentTagName;n!==qx.H1&&n!==qx.H2&&n!==qx.H3&&n!==qx.H4&&n!==qx.H5&&n!==qx.H6||e.openElements.pop(),e._insertElement(t,Wx.HTML)}(e,t):n===qx.LI||n===qx.DD||n===qx.DT?function(e,t){e.framesetOk=!1;const n=t.tagName;for(let r=e.openElements.stackTop;r>=0;r--){const t=e.openElements.items[r],i=e.treeAdapter.getTagName(t);let a=null;if(n===qx.LI&&i===qx.LI?a=qx.LI:n!==qx.DD&&n!==qx.DT||i!==qx.DD&&i!==qx.DT||(a=i),a){e.openElements.generateImpliedEndTagsWithExclusion(a),e.openElements.popUntilTagNamePopped(a);break}if(i!==qx.ADDRESS&&i!==qx.DIV&&i!==qx.P&&e._isSpecialElement(t))break}e.openElements.hasInButtonScope(qx.P)&&e._closePElement(),e._insertElement(t,Wx.HTML)}(e,t):n===qx.EM||n===qx.TT?_b(e,t):n===qx.BR?Ab(e,t):n===qx.HR?function(e,t){e.openElements.hasInButtonScope(qx.P)&&e._closePElement(),e._appendElement(t,Wx.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t):n===qx.RB?Pb(e,t):n===qx.RT||n===qx.RP?function(e,t){e.openElements.hasInScope(qx.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(qx.RTC),e._insertElement(t,Wx.HTML)}(e,t):n!==qx.TH&&n!==qx.TD&&n!==qx.TR&&Fb(e,t);break;case 3:n===qx.DIV||n===qx.DIR||n===qx.NAV?Tb(e,t):n===qx.PRE?kb(e,t):n===qx.BIG?_b(e,t):n===qx.IMG||n===qx.WBR?Ab(e,t):n===qx.XMP?function(e,t){e.openElements.hasInButtonScope(qx.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Fx.MODE.RAWTEXT)}(e,t):n===qx.SVG?function(e,t){e._reconstructActiveFormattingElements(),Gx.adjustTokenSVGAttrs(t),Gx.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,Wx.SVG):e._insertElement(t,Wx.SVG),t.ackSelfClosing=!0}(e,t):n===qx.RTC?Pb(e,t):n!==qx.COL&&Fb(e,t);break;case 4:n===qx.HTML?function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t):n===qx.BASE||n===qx.LINK||n===qx.META?vb(e,t):n===qx.BODY?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t):n===qx.MAIN||n===qx.MENU?Tb(e,t):n===qx.FORM?function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(qx.P)&&e._closePElement(),e._insertElement(t,Wx.HTML),n||(e.formElement=e.openElements.current))}(e,t):n===qx.CODE||n===qx.FONT?_b(e,t):n===qx.NOBR?function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(qx.NOBR)&&(lb(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Wx.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):n===qx.AREA?Ab(e,t):n===qx.MATH?function(e,t){e._reconstructActiveFormattingElements(),Gx.adjustTokenMathMLAttrs(t),Gx.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,Wx.MATHML):e._insertElement(t,Wx.MATHML),t.ackSelfClosing=!0}(e,t):n===qx.MENU?function(e,t){e.openElements.hasInButtonScope(qx.P)&&e._closePElement(),e._insertElement(t,Wx.HTML)}(e,t):n!==qx.HEAD&&Fb(e,t);break;case 5:n===qx.STYLE||n===qx.TITLE?vb(e,t):n===qx.ASIDE?Tb(e,t):n===qx.SMALL?_b(e,t):n===qx.TABLE?function(e,t){e.treeAdapter.getDocumentMode(e.document)!==Ux.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(qx.P)&&e._closePElement(),e._insertElement(t,Wx.HTML),e.framesetOk=!1,e.insertionMode=Qx}(e,t):n===qx.EMBED?Ab(e,t):n===qx.INPUT?function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Wx.HTML);const n=Fx.getTokenAttr(t,Xx.TYPE);n&&"hidden"===n.toLowerCase()||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t):n===qx.PARAM||n===qx.TRACK?Ib(e,t):n===qx.IMAGE?function(e,t){t.tagName=qx.IMG,Ab(e,t)}(e,t):n!==qx.FRAME&&n!==qx.TBODY&&n!==qx.TFOOT&&n!==qx.THEAD&&Fb(e,t);break;case 6:n===qx.SCRIPT?vb(e,t):n===qx.CENTER||n===qx.FIGURE||n===qx.FOOTER||n===qx.HEADER||n===qx.HGROUP||n===qx.DIALOG?Tb(e,t):n===qx.BUTTON?function(e,t){e.openElements.hasInScope(qx.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(qx.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Wx.HTML),e.framesetOk=!1}(e,t):n===qx.STRIKE||n===qx.STRONG?_b(e,t):n===qx.APPLET||n===qx.OBJECT?Ob(e,t):n===qx.KEYGEN?Ab(e,t):n===qx.SOURCE?Ib(e,t):n===qx.IFRAME?function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Fx.MODE.RAWTEXT)}(e,t):n===qx.SELECT?function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Wx.HTML),e.framesetOk=!1,e.insertionMode===Qx||"IN_CAPTION_MODE"===e.insertionMode||"IN_TABLE_BODY_MODE"===e.insertionMode||"IN_ROW_MODE"===e.insertionMode||"IN_CELL_MODE"===e.insertionMode?e.insertionMode="IN_SELECT_IN_TABLE_MODE":e.insertionMode="IN_SELECT_MODE"}(e,t):n===qx.OPTION?Nb(e,t):Fb(e,t);break;case 7:n===qx.BGSOUND?vb(e,t):n===qx.DETAILS||n===qx.ADDRESS||n===qx.ARTICLE||n===qx.SECTION||n===qx.SUMMARY?Tb(e,t):n===qx.LISTING?kb(e,t):n===qx.MARQUEE?Ob(e,t):n===qx.NOEMBED?Mb(e,t):n!==qx.CAPTION&&Fb(e,t);break;case 8:n===qx.BASEFONT?vb(e,t):n===qx.FRAMESET?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Wx.HTML),e.insertionMode="IN_FRAMESET_MODE")}(e,t):n===qx.FIELDSET?Tb(e,t):n===qx.TEXTAREA?function(e,t){e._insertElement(t,Wx.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Fx.MODE.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode="TEXT_MODE"}(e,t):n===qx.TEMPLATE?vb(e,t):n===qx.NOSCRIPT?e.options.scriptingEnabled?Mb(e,t):Fb(e,t):n===qx.OPTGROUP?Nb(e,t):n!==qx.COLGROUP&&Fb(e,t);break;case 9:n===qx.PLAINTEXT?function(e,t){e.openElements.hasInButtonScope(qx.P)&&e._closePElement(),e._insertElement(t,Wx.HTML),e.tokenizer.state=Fx.MODE.PLAINTEXT}(e,t):Fb(e,t);break;case 10:n===qx.BLOCKQUOTE||n===qx.FIGCAPTION?Tb(e,t):Fb(e,t);break;default:Fb(e,t)}}function Rb(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Db(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Bb(e,t){const n=t.tagName;for(let r=e.openElements.stackTop;r>0;r--){const t=e.openElements.items[r];if(e.treeAdapter.getTagName(t)===n){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilElementPopped(t);break}if(e._isSpecialElement(t))break}}function $b(e,t){const n=t.tagName;switch(n.length){case 1:n===qx.A||n===qx.B||n===qx.I||n===qx.S||n===qx.U?lb(e,t):n===qx.P?function(e){e.openElements.hasInButtonScope(qx.P)||e._insertFakeElement(qx.P),e._closePElement()}(e):Bb(e,t);break;case 2:n===qx.DL||n===qx.UL||n===qx.OL?Rb(e,t):n===qx.LI?function(e){e.openElements.hasInListItemScope(qx.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(qx.LI),e.openElements.popUntilTagNamePopped(qx.LI))}(e):n===qx.DD||n===qx.DT?function(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t):n===qx.H1||n===qx.H2||n===qx.H3||n===qx.H4||n===qx.H5||n===qx.H6?function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e):n===qx.BR?function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(qx.BR),e.openElements.pop(),e.framesetOk=!1}(e):n===qx.EM||n===qx.TT?lb(e,t):Bb(e,t);break;case 3:n===qx.BIG?lb(e,t):n===qx.DIR||n===qx.DIV||n===qx.NAV||n===qx.PRE?Rb(e,t):Bb(e,t);break;case 4:n===qx.BODY?function(e){e.openElements.hasInScope(qx.BODY)&&(e.insertionMode="AFTER_BODY_MODE")}(e):n===qx.HTML?function(e,t){e.openElements.hasInScope(qx.BODY)&&(e.insertionMode="AFTER_BODY_MODE",e._processToken(t))}(e,t):n===qx.FORM?function(e){const t=e.openElements.tmplCount>0,n=e.formElement;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(qx.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(qx.FORM):e.openElements.remove(n))}(e):n===qx.CODE||n===qx.FONT||n===qx.NOBR?lb(e,t):n===qx.MAIN||n===qx.MENU?Rb(e,t):Bb(e,t);break;case 5:n===qx.ASIDE?Rb(e,t):n===qx.SMALL?lb(e,t):Bb(e,t);break;case 6:n===qx.CENTER||n===qx.FIGURE||n===qx.FOOTER||n===qx.HEADER||n===qx.HGROUP||n===qx.DIALOG?Rb(e,t):n===qx.APPLET||n===qx.OBJECT?Db(e,t):n===qx.STRIKE||n===qx.STRONG?lb(e,t):Bb(e,t);break;case 7:n===qx.ADDRESS||n===qx.ARTICLE||n===qx.DETAILS||n===qx.SECTION||n===qx.SUMMARY||n===qx.LISTING?Rb(e,t):n===qx.MARQUEE?Db(e,t):Bb(e,t);break;case 8:n===qx.FIELDSET?Rb(e,t):n===qx.TEMPLATE?Eb(e,t):Bb(e,t);break;case 10:n===qx.BLOCKQUOTE||n===qx.FIGCAPTION?Rb(e,t):Bb(e,t);break;default:Bb(e,t)}}function zb(e,t){e.tmplInsertionModeStackTop>-1?Xb(e,t):e.stopped=!0}function Hb(e,t){const n=e.openElements.currentTagName;n===qx.TABLE||n===qx.TBODY||n===qx.TFOOT||n===qx.THEAD||n===qx.TR?(e.pendingCharacterTokens=[],e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode="IN_TABLE_TEXT_MODE",e._processToken(t)):Vb(e,t)}function jb(e,t){const n=t.tagName;switch(n.length){case 2:n===qx.TD||n===qx.TH||n===qx.TR?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(qx.TBODY),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)}(e,t):Vb(e,t);break;case 3:n===qx.COL?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(qx.COLGROUP),e.insertionMode="IN_COLUMN_GROUP_MODE",e._processToken(t)}(e,t):Vb(e,t);break;case 4:n===qx.FORM?function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,Wx.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t):Vb(e,t);break;case 5:n===qx.TABLE?function(e,t){e.openElements.hasInTableScope(qx.TABLE)&&(e.openElements.popUntilTagNamePopped(qx.TABLE),e._resetInsertionMode(),e._processToken(t))}(e,t):n===qx.STYLE?vb(e,t):n===qx.TBODY||n===qx.TFOOT||n===qx.THEAD?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Wx.HTML),e.insertionMode="IN_TABLE_BODY_MODE"}(e,t):n===qx.INPUT?function(e,t){const n=Fx.getTokenAttr(t,Xx.TYPE);n&&"hidden"===n.toLowerCase()?e._appendElement(t,Wx.HTML):Vb(e,t),t.ackSelfClosing=!0}(e,t):Vb(e,t);break;case 6:n===qx.SCRIPT?vb(e,t):Vb(e,t);break;case 7:n===qx.CAPTION?function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Wx.HTML),e.insertionMode="IN_CAPTION_MODE"}(e,t):Vb(e,t);break;case 8:n===qx.COLGROUP?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Wx.HTML),e.insertionMode="IN_COLUMN_GROUP_MODE"}(e,t):n===qx.TEMPLATE?vb(e,t):Vb(e,t);break;default:Vb(e,t)}}function Gb(e,t){const n=t.tagName;n===qx.TABLE?e.openElements.hasInTableScope(qx.TABLE)&&(e.openElements.popUntilTagNamePopped(qx.TABLE),e._resetInsertionMode()):n===qx.TEMPLATE?Eb(e,t):n!==qx.BODY&&n!==qx.CAPTION&&n!==qx.COL&&n!==qx.COLGROUP&&n!==qx.HTML&&n!==qx.TBODY&&n!==qx.TD&&n!==qx.TFOOT&&n!==qx.TH&&n!==qx.THEAD&&n!==qx.TR&&Vb(e,t)}function Vb(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,e._processTokenInBodyMode(t),e.fosterParentingEnabled=n}function Yb(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Vb(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}function Ub(e,t){e.openElements.currentTagName===qx.COLGROUP&&(e.openElements.pop(),e.insertionMode=Qx,e._processToken(t))}function qb(e,t){const n=t.tagName;n===qx.HTML?Lb(e,t):n===qx.OPTION?(e.openElements.currentTagName===qx.OPTION&&e.openElements.pop(),e._insertElement(t,Wx.HTML)):n===qx.OPTGROUP?(e.openElements.currentTagName===qx.OPTION&&e.openElements.pop(),e.openElements.currentTagName===qx.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Wx.HTML)):n===qx.INPUT||n===qx.KEYGEN||n===qx.TEXTAREA||n===qx.SELECT?e.openElements.hasInSelectScope(qx.SELECT)&&(e.openElements.popUntilTagNamePopped(qx.SELECT),e._resetInsertionMode(),n!==qx.SELECT&&e._processToken(t)):n!==qx.SCRIPT&&n!==qx.TEMPLATE||vb(e,t)}function Wb(e,t){const n=t.tagName;if(n===qx.OPTGROUP){const t=e.openElements.items[e.openElements.stackTop-1],n=t&&e.treeAdapter.getTagName(t);e.openElements.currentTagName===qx.OPTION&&n===qx.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagName===qx.OPTGROUP&&e.openElements.pop()}else n===qx.OPTION?e.openElements.currentTagName===qx.OPTION&&e.openElements.pop():n===qx.SELECT&&e.openElements.hasInSelectScope(qx.SELECT)?(e.openElements.popUntilTagNamePopped(qx.SELECT),e._resetInsertionMode()):n===qx.TEMPLATE&&Eb(e,t)}function Xb(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(qx.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode(),e._processToken(t)):e.stopped=!0}function Kb(e,t){e.insertionMode="IN_BODY_MODE",e._processToken(t)}function Qb(e,t){e.insertionMode="IN_BODY_MODE",e._processToken(t)}var Zb=/[#.]/g;const Jb=new Set(["menu","submit","reset","button"]),eC={}.hasOwnProperty;function tC(e,t,n){const r=n&&function(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}(n);return function(n,i,...a){let o,s=-1;if(null==n)o={type:"root",children:[]},a.unshift(i);else if(o=function(e,t="div"){for(var n,r,i,a=e||"",o={},s=0;s<a.length;)Zb.lastIndex=s,i=Zb.exec(a),(n=a.slice(s,i?i.index:a.length))&&(r?"#"===r?o.id=n:Array.isArray(o.className)?o.className.push(n):o.className=[n]:t=n,s+=n.length),i&&(r=i[0],s++);return{type:"element",tagName:t,properties:o,children:[]}}(n,t),o.tagName=o.tagName.toLowerCase(),r&&eC.call(r,o.tagName)&&(o.tagName=r[o.tagName]),function(e,t){if(null==e||"object"!=typeof e||Array.isArray(e))return!1;if("input"===t||!e.type||"string"!=typeof e.type)return!0;if("children"in e&&Array.isArray(e.children))return!1;if("button"===t)return Jb.has(e.type.toLowerCase());return!("value"in e)}(i,o.tagName)){let t;for(t in i)eC.call(i,t)&&nC(e,o.properties,t,i[t])}else a.unshift(i);for(;++s<a.length;)rC(o.children,a[s]);return"element"===o.type&&"template"===o.tagName&&(o.content={type:"root",children:o.children},o.children=[]),o}}function nC(e,t,n,r){const i=Pf(e,n);let a,o=-1;if(null!=r){if("number"==typeof r){if(Number.isNaN(r))return;a=r}else a="boolean"==typeof r?r:"string"==typeof r?i.spaceSeparated?vm(r):i.commaSeparated?xm(r):i.commaOrSpaceSeparated?vm(xm(r).join(" ")):iC(i,i.property,r):Array.isArray(r)?r.concat():"style"===i.property?function(e){const t=[];let n;for(n in e)eC.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}(r):String(r);if(Array.isArray(a)){const e=[];for(;++o<a.length;)e[o]=iC(i,i.property,a[o]);a=e}"className"===i.property&&Array.isArray(t.className)&&(a=t.className.concat(a)),t[i.property]=a}}function rC(e,t){let n=-1;if(null==t);else if("string"==typeof t||"number"==typeof t)e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)rC(e,t[n]);else{if("object"!=typeof t||!("type"in t))throw new Error("Expected node, nodes, or string, got `"+t+"`");"root"===t.type?rC(e,t.children):e.push(t)}}function iC(e,t,n){if("string"==typeof n){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(""===n||af(n)===af(t)))return!0}return n}const aC=tC(Df,"div"),oC=tC(Bf,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]);const sC={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lC={}.hasOwnProperty,cC={"#document":hC,"#document-fragment":hC,"#text":function(e,t){return{type:"text",value:t.value}},"#comment":function(e,t){return{type:"comment",value:t.data}},"#documentType":function(){return{type:"doctype"}}};function uC(e,t){const n=e.schema,r=lC.call(cC,t.nodeName)?cC[t.nodeName]:pC;let i;"tagName"in t&&(e.schema=t.namespaceURI===sC.svg?Bf:Df),"childNodes"in t&&(i=function(e,t){let n=-1;const r=[];for(;++n<t.length;)r[n]=uC(e,t[n]);return r}(e,t.childNodes));const a=r(e,t,i);if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const n=function(e,t,n){const r=dC(n);if("element"===t.type){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const r={};let i;for(i in n.attrs)lC.call(n.attrs,i)&&(r[Pf(e.schema,i).property]=dC(n.attrs[i]));t.data={position:{opening:dC(n.startTag),closing:n.endTag?dC(n.endTag):null,properties:r}}}}return r}(e,a,t.sourceCodeLocation);n&&(e.location=!0,a.position=n)}return e.schema=n,a}function hC(e,t,n){const r={type:"root",children:n,data:{quirksMode:"quirks"===t.mode||"limited-quirks"===t.mode}};if(e.file&&e.location){const t=String(e.file),n=function(e){for(var t=String(e),n=[],r=/\r?\n|\r/g;r.test(t);)n.push(r.lastIndex);return n.push(t.length+1),{toPoint:function(e){var t=-1;if(e>-1&&e<n[n.length-1])for(;++t<n.length;)if(n[t]>e)return{line:t+1,column:e-(n[t-1]||0)+1,offset:e};return{line:void 0,column:void 0,offset:void 0}},toOffset:function(e){var t,r=e&&e.line,i=e&&e.column;return"number"!=typeof r||"number"!=typeof i||Number.isNaN(r)||Number.isNaN(i)||!(r-1 in n)||(t=(n[r-2]||0)+i-1||0),t>-1&&t<n[n.length-1]?t:-1}}}(t);r.position={start:n.toPoint(0),end:n.toPoint(t.length)}}return r}function pC(e,t,n){const r="svg"===e.schema.space?oC:aC;let i=-1;const a={};for(;++i<t.attrs.length;){const e=t.attrs[i];a[(e.prefix?e.prefix+":":"")+e.name]=e.value}const o=r(t.tagName,a,n);if("template"===o.tagName&&"content"in t){const n=t.sourceCodeLocation,r=n&&n.startTag&&dC(n.startTag),i=n&&n.endTag&&dC(n.endTag),a=uC(e,t.content);r&&i&&e.file&&(a.position={start:r.end,end:i.start}),o.content=a}return o}function dC(e){const t=fC({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=fC({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:null}function fC(e){return e.line&&e.column?e:null}const mC=sC,gC=Rf,yC={}.hasOwnProperty,vC=Id("root"),EC=Id("element"),xC=Id("text");function bC(e,t,n){if("function"!=typeof e)throw new TypeError("h is not a function");const r=function(e){const t=e("div",{});return Boolean(t&&("_owner"in t||"_store"in t)&&(void 0===t.key||null===t.key))}(e),i=function(e){const t=e("div",{});return Boolean(t&&t.context&&t.context._isVue)}(e),a=function(e){return"VirtualNode"===e("div",{}).type}(e);let o,s;if("string"==typeof n||"boolean"==typeof n?(o=n,n={}):(n||(n={}),o=n.prefix),vC(t))s=1===t.children.length&&EC(t.children[0])?t.children[0]:{type:"element",tagName:"div",properties:{},children:t.children};else{if(!EC(t))throw new Error("Expected root or element, not `"+(t&&t.type||t)+"`");s=t}return CC(e,s,{schema:"svg"===n.space?Bf:Df,prefix:null==o?r||i||a?"h-":null:"string"==typeof o?o:o?"h-":null,key:0,react:r,vue:i,vdom:a,hyperscript:wC(e)})}function CC(e,t,n){const r=n.schema;let i=r,a=t.tagName;const o={},s=[];let l,c=-1;for(l in"html"===r.space&&"svg"===a.toLowerCase()&&(i=Bf,n.schema=i),t.properties)t.properties&&yC.call(t.properties,l)&&SC(o,l,t.properties[l],n,a);if(n.vdom&&("html"===i.space?a=a.toUpperCase():i.space&&(o.namespace=mC[i.space])),n.prefix&&(n.key++,o.key=n.prefix+n.key),t.children)for(;++c<t.children.length;){const r=t.children[c];EC(r)?s.push(CC(e,r,n)):xC(r)&&s.push(r.value)}return n.schema=r,s.length>0?e.call(t,a,o,s):e.call(t,a,o)}function SC(e,t,n,r,i){const a=Pf(r.schema,t);let o;null==n||"number"==typeof n&&Number.isNaN(n)||!1===n&&(r.vue||r.vdom||r.hyperscript)||!n&&a.boolean&&(r.vue||r.vdom||r.hyperscript)||(Array.isArray(n)&&(n=a.commaSeparated?bm(n):Em(n)),a.boolean&&r.hyperscript&&(n=""),"style"===a.property&&"string"==typeof n&&(r.react||r.vue||r.vdom)&&(n=function(e,t){const n={};try{Nm(e,((e,t)=>{"-ms-"===e.slice(0,4)&&(e="ms-"+e.slice(4)),n[e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))]=t}))}catch(r){throw r.message=t+"[style]"+r.message.slice("undefined".length),r}return n}(n,i)),r.vue?"style"!==a.property&&(o="attrs"):a.mustUseProperty||(r.vdom?"style"!==a.property&&(o="attributes"):r.hyperscript&&(o="attrs")),o?e[o]=Object.assign(e[o]||{},{[a.attribute]:n}):a.space&&r.react?e[gC[a.property]||a.property]=n:e[a.attribute]=n)}function wC(e){return"context"in e&&"cleanup"in e}var TC={}.hasOwnProperty;function kC(e,t){var n=t||{};function r(t){var n=r.invalid,i=r.handlers;if(t&&TC.call(t,e)&&(n=TC.call(i,t[e])?i[t[e]]:r.unknown),n)return n.apply(this,arguments)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}var _C={}.hasOwnProperty,OC=kC("type",{handlers:{root:function(e,t){var n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=AC(e.children,n,t),IC(e,n)},element:function(e,t){var n=t.space;return bC((function(n,r){var i,a,o,s,l,c=[];for(o in r)_C.call(r,o)&&!1!==r[o]&&((i=Pf(t,o)).boolean&&!r[o]||(a={name:o,value:!0===r[o]?"":String(r[o])},i.space&&"html"!==i.space&&"svg"!==i.space&&((s=o.indexOf(":"))<0?a.prefix="":(a.name=o.slice(s+1),a.prefix=o.slice(0,s)),a.namespace=sC[i.space]),c.push(a)));"html"===t.space&&"svg"===e.tagName&&(t=Bf);(l=IC(e,{nodeName:n,tagName:n,attrs:c,namespaceURI:sC[t.space],childNodes:[],parentNode:void 0})).childNodes=AC(e.children,l,t),"template"===n&&(l.content=function(e,t){var n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=AC(e.children,n,t),IC(e,n)}(e.content,t));return l}),Object.assign({},e,{children:[]}),{space:n})},text:function(e){return IC(e,{nodeName:"#text",value:e.value,parentNode:void 0})},comment:function(e){return IC(e,{nodeName:"#comment",data:e.value,parentNode:void 0})},doctype:function(e){return IC(e,{nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:void 0})}}});function AC(e,t,n){var r,i=-1,a=[];if(e)for(;++i<e.length;)(r=OC(e[i],n)).parentNode=t,a.push(r);return a}function IC(e,t){var n=e.position;return n&&n.start&&n.end&&(t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset}),t}const MC=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"],NC={sourceCodeLocationInfo:!0,scriptingEnabled:!1},PC=function(e,t,n){let r=-1;const i=new tb(NC),a=kC("type",{handlers:{root:function(e){m(e.children)},element:function(e){v(),i._processToken(FC(e),sC.html),m(e.children),MC.includes(e.tagName)||(v(),i._processToken(function(e){const t=Object.assign(DC(e));return t.startTag=Object.assign({},t),{type:"END_TAG_TOKEN",tagName:e.tagName,attrs:[],location:t}}(e)))},text:function(e){v(),i._processToken({type:"CHARACTER_TOKEN",chars:e.value,location:DC(e)})},comment:g,doctype:function(e){v(),i._processToken({type:"DOCTYPE_TOKEN",name:"html",forceQuirks:!1,publicId:"",systemId:"",location:DC(e)})},raw:function(e){const t=Ld(e),n=t.line||1,r=t.column||1,a=t.offset||0;if(!u)throw new Error("Expected `preprocessor`");if(!c)throw new Error("Expected `tokenizer`");if(!h)throw new Error("Expected `posTracker`");if(!p)throw new Error("Expected `locationTracker`");u.html=void 0,u.pos=-1,u.lastGapPos=-1,u.lastCharPos=-1,u.gapStack=[],u.skipNextNewLine=!1,u.lastChunkWritten=!1,u.endOfChunkHit=!1,h.isEol=!1,h.lineStartPos=1-r,h.droppedBufferSize=a,h.offset=0,h.col=1,h.line=n,p.currentAttrLocation=void 0,p.ctLoc=DC(e),c.write(e.value),i._runParsingLoop(null),("NAMED_CHARACTER_REFERENCE_STATE"===c.state||"NUMERIC_CHARACTER_REFERENCE_END_STATE"===c.state)&&(u.lastChunkWritten=!0,c[c.state](c._consume()));const o=c.currentCharacterToken;o&&(o.location.endLine=h.line,o.location.endCol=h.col+1,o.location.endOffset=h.offset+1,i._processToken(o))}},unknown:RC});let o,c,u,h,p;var d;if(d=t,Boolean(d&&!("message"in d&&"messages"in d))&&(n=t,t=void 0),n&&n.passThrough)for(;++r<n.passThrough.length;)a.handlers[n.passThrough[r]]=y;const f=function(e,t={}){let n,r;return"messages"in t?(r=t,n={}):(r=t.file,n=t),uC({schema:"svg"===n.space?Bf:Df,file:r,verbose:n.verbose,location:!1},e)}(function(e){const t="root"===e.type?e.children[0]:e;return Boolean(t&&("doctype"===t.type||"element"===t.type&&"html"===t.tagName))}(e)?function(){const t=i.treeAdapter.createDocument();if(i._bootstrap(t,void 0),c=i.tokenizer,!c)throw new Error("Expected `tokenizer`");return u=c.preprocessor,p=c.__mixins[0],h=p.posTracker,a(e),t}():function(){const t={nodeName:"template",tagName:"template",attrs:[],namespaceURI:sC.html,childNodes:[]},n={nodeName:"documentmock",tagName:"documentmock",attrs:[],namespaceURI:sC.html,childNodes:[]},r={nodeName:"#document-fragment",childNodes:[]};if(i._bootstrap(n,t),i._pushTmplInsertionMode("IN_TEMPLATE_MODE"),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),c=i.tokenizer,!c)throw new Error("Expected `tokenizer`");return u=c.preprocessor,p=c.__mixins[0],h=p.posTracker,a(e),i._adoptNodes(n.childNodes[0],r),r}(),t);return o&&Fd(f,"comment",((e,t,n)=>{const r=e;if(r.value.stitch&&null!==n&&null!==t)return n.children[t]=r.value.stitch,t})),"root"!==e.type&&"root"===f.type&&1===f.children.length?f.children[0]:f;function m(e){let t=-1;if(e)for(;++t<e.length;)a(e[t])}function g(e){v(),i._processToken({type:"COMMENT_TOKEN",data:e.value,location:DC(e)})}function y(e){let r;o=!0,r="children"in e?l(s({},e),{children:PC({type:"root",children:e.children},t,n).children}):s({},e),g({type:"comment",value:{stitch:r}})}function v(){if(!c)throw new Error("Expected `tokenizer`");c.tokenQueue=[],c.state="DATA_STATE",c.returnState="",c.charRefCode=-1,c.tempBuff=[],c.lastStartTagName="",c.consumedAfterSnapshot=-1,c.active=!1,c.currentCharacterToken=void 0,c.currentToken=void 0,c.currentAttr=void 0}};function FC(e){const t=Object.assign(DC(e));return t.startTag=Object.assign({},t),{type:"START_TAG_TOKEN",tagName:e.tagName,selfClosing:!1,attrs:LC(e),location:t}}function LC(e){return(t={tagName:e.tagName,type:"element",properties:e.properties,children:[]},OC(t,"svg"===n?Bf:Df)).attrs;var t,n}function RC(e){throw new Error("Cannot compile `"+e.type+"` node")}function DC(e){const t=Ld(e),n=Rd(e);return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function BC(e={}){return(t,n)=>PC(t,n,e)}const $C=({content:e})=>d.createElement("div",{className:"srm-markdown-wrapper"},d.createElement(jm,{remarkPlugins:[Yv],children:e,rehypePlugins:[BC]}));function zC(e){const{prefixField:t={},prefixName:n=[],width:r=84,layout:i="horizontal"}=e,a=d.createElement("span",null,"查询条件"," ",d.createElement(yt,{overlayClassName:"sls-discover-tooltips",placement:"right",title:d.createElement($C,{content:"\n场景举例  \n查询日志原文:  \n- 查询GET、POST请求成功的日志：(request_method:GET or request_method:POST) and status in [200 299]\n- 查询GET、POST请求失败的日志：(request_method:GET or request_method:POST) and status in [200 299]\n- 查询request_uri字段值以/request开头的日志：request_uri:/request*  \n\n查询时序值:  \n- 查询GET、POST请求成功的日志条数，有两种查询方式，如果对展示的时间样式没有特殊要求，可以不写 [time_series](https://help.aliyun.com/document_detail/63451.htm)\n  - (request_method:GET or request_method:POST) and status in [200 299]|count(1) as count\n  - (request_method:GET or request_method:POST) and status in [200 299]|count(1) as count, select time_series(__time__, '1m', '%H:%i:%s' ,'0') as Time group by Time order by Time limit 100\n\n详细文档：\n- [查询语法](https://help.aliyun.com/document_detail/29060.htm) \n- [分析语法](https://help.aliyun.com/document_detail/53608.html)\n- [函数概览](https://help.aliyun.com/document_detail/321454.html)"})},d.createElement(ce,null)));return"vertical"===i?d.createElement(St.Item,l(s({},t),{label:a,name:[...n,"query"]}),d.createElement(wt,null)):d.createElement(Uc,{label:a},d.createElement(St.Item,l(s({},t),{name:[...n,"query"],style:{width:r}}),d.createElement(wt,null)))}function HC({form:e}){const t=f.exports.useRef(null),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState([]);return d.createElement("div",{style:{marginBottom:16},ref:t},d.createElement(Dt,{placement:"right",visible:n,onVisibleChange:e=>{r(e)},title:"数据预览",content:d.createElement("div",{style:{width:700}},d.createElement(Ft,{tableLayout:"auto",scroll:{x:700,y:300},dataSource:i,columns:_.map(i[0],((e,t)=>({title:t,dataIndex:t,className:"alert-rule-sls-preview-table-column"})))})),trigger:"click",getPopupContainer:()=>t.current||document.body},d.createElement(Ct,{type:"primary",onClick:()=>{n||((()=>{const t=e.getFieldValue("cate"),n=e.getFieldValue("cluster"),r=e.getFieldValue("queries");_.isEmpty(n)||Xu({cate:t,cluster:_.join(n," "),query:_.map(r,(e=>{const t=ms(e.range),n=I(t.start).unix(),r=I(t.end).unix();return{project:e.project,logstore:e.logstore,query:e.query,power_sql:e.power_sql,from:n,to:r,lines:100,offset:0,reverse:!1}}))}).then((e=>{a(e.list)}))})(),r(!0))}},"数据预览")))}function jC(e){const{prefixField:t={}}=e,[n,r]=f.exports.useState(!1);return d.createElement("div",{style:{marginBottom:n?0:16}},d.createElement("div",{style:{marginBottom:8}},d.createElement("span",{onClick:()=>{r(!n)},style:{cursor:"pointer"}},n?d.createElement(N,null):d.createElement(L,null)," 辅助配置")),d.createElement("div",{style:{display:n?"block":"none"}},d.createElement(Ot,{gutter:8},d.createElement(At,{span:6},d.createElement(Uc,{label:d.createElement("span",null,"ValueKey"," ",d.createElement(yt,{title:"通过此字段从返回结果中提取的数值。例如 查询条件为 `* | select count(1) as PV` 返回结果为 PV:11，ValueKey 写了 PV，则会根据 PV 提取到 11，作为查询结果的值"},d.createElement(ce,null))),labelWidth:100},d.createElement(St.Item,l(s({},t),{name:[t.name,"keys","valueKey"],style:{width:"100%"}}),d.createElement(Nt,{mode:"tags",placeholder:"回车输入多个"})))),d.createElement(At,{span:6},d.createElement(Uc,{label:d.createElement("span",null,"LabelKey"," ",d.createElement(yt,{title:"将此字段以及期对应的 value，作为tag，追加到监控数据的标签中，例如 查询条件为  `* | select count(1) as PV group by host` 返回结果为 `[{PV:11 host:dev01},{PV:10 host:dev02}]`, LabelKey 写了 host, 则第一条返回数据 host=dev01 会作为tag"},d.createElement(ce,null))),labelWidth:100},d.createElement(St.Item,l(s({},t),{name:[t.name,"keys","labelKey"],style:{width:"100%"}}),d.createElement(Nt,{mode:"tags",placeholder:"回车输入多个"})))))))}const GC="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split("");function VC({form:e,prefixField:t={},fullPrefixName:n=[],prefixName:r=[]}){return d.createElement(d.Fragment,null,d.createElement(St.List,l(s({},t),{name:[...r,"queries"],initialValue:[{ref:"A"}]}),((e,{add:t,remove:i})=>d.createElement("div",null,d.createElement("div",{style:{marginBottom:8}},"查询统计"," ",d.createElement(Z,{style:{cursor:"pointer"},onClick:()=>{t({ref:GC[e.length]})}})),e.map(((t,a)=>d.createElement("div",{key:t.key,style:{backgroundColor:"#fafafa",padding:16,marginBottom:16,position:"relative"}},d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>{const i=e("cate"),o=e("cluster"),c=e([...n,...r,"queries",t.name,"project"]);return d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:8},d.createElement(At,{flex:"32px"},d.createElement(St.Item,null,d.createElement(wt,{readOnly:!0,style:{width:32},value:GC[a]}))),d.createElement(At,{flex:"auto"},d.createElement(Ot,{gutter:8},d.createElement(At,{span:12},d.createElement(Qu,{width:"100%",datasourceCate:i,datasourceName:_.join(o," "),prefixField:t,prefixName:[t.name]})),d.createElement(At,{span:12},d.createElement(Zu,{width:"100%",datasourceCate:i,datasourceName:_.join(o," "),prefixField:t,prefixName:[t.name],project:c})))),d.createElement(At,{flex:"360px"},d.createElement(zt,{style:{display:"flex"}},d.createElement(Uc,{label:"查询区间",labelWidth:80},d.createElement(St.Item,l(s({},t),{name:[t.name,"range"],initialValue:{start:"now-5m",end:"now"}}),d.createElement(Ms,null))),d.createElement("div",{style:{display:"flex",gap:8}},d.createElement("div",{style:{lineHeight:"32px"}},"SQL增强"),d.createElement(St.Item,l(s({},t),{name:[t.name,"power_sql"],valuePropName:"checked"}),d.createElement(Lt,null))))),d.createElement(At,{span:24},d.createElement(zC,{width:"100%",prefixField:t,prefixName:[t.name]}))))})),d.createElement(jC,{prefixField:t}),e.length>1&&d.createElement(G,{style:{position:"absolute",right:16,top:16},onClick:()=>{i(t.name)}}))))))),d.createElement(HC,{form:e}))}function YC({form:e}){return d.createElement(d.Fragment,null,d.createElement(VC,{form:e}),d.createElement(qu,null))}const UC={prometheus:"Prometheus",elasticsearch:"Elasticsearch","aliyun-sls":"阿里云SLS"};function qC({visible:e,form:t}){const n=e?["prometheus","elasticsearch","aliyun-sls"]:["prometheus"];return d.createElement(St.Item,{label:"数据源类型",name:"cate",initialValue:"prometheus"},d.createElement(Nt,{suffixIcon:d.createElement(H,null),onChange:e=>{const n={cluster:[],prom_ql:""};"elasticsearch"===e&&(n.queries=[{ref:"A",value:{func:"count"},date_field:"@timestamp",interval:1,interval_unit:"min"}],n.triggers=[{mode:0,severity:1}]),t.setFieldsValue(n)}},n.map((e=>d.createElement(Nt.Option,{key:e,value:e},UC[e])))))}function WC({form:e,cate:t}){const[n,r]=f.exports.useState([]);return f.exports.useEffect((()=>{"elasticsearch"===t&&Vi().then((({dat:e})=>{r(e)})).catch((()=>{r([])})),"aliyun-sls"===t&&Yi().then((({dat:e})=>{r(e)})).catch((()=>{r([])})),"prometheus"===t&&Gi().then((({dat:e})=>{r(_.concat(["$all"],e))})).catch((()=>{r([])}))}),[t]),d.createElement(St.Item,{label:"生效集群",name:"cluster",rules:[{required:!0,message:"生效集群不能为空"}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:t=>{t.includes("$all")&&e.setFieldsValue({cluster:["$all"]})}},null==n?void 0:n.map((e=>d.createElement(Nt.Option,{value:e,key:e},e)))))}const{Option:XC}=Nt;function KC(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function QC(e){const{isCorrectFormat:t,isLengthAllowed:n}=KC(e.value);return t&&n?d.createElement(Mt,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(yt,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Mt,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function ZC(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=KC(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const JC=({type:e,detail:t={}})=>{const{t:n}=Ur(),r=k(),[i]=St.useForm(),{clusters:a}=ci((e=>e.common)),{curBusiItem:o}=ci((e=>e.common)),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState([]),[g,y]=f.exports.useState(!0);f.exports.useEffect((()=>(b(),C(""),()=>{})),[]),f.exports.useEffect((()=>{if(1==e){const e=(t.notify_groups_obj?t.notify_groups_obj.filter((e=>!p.find((t=>e.id===t.id)))):[]).concat(p);m(e)}}),[JSON.stringify(t)]);const v=[n("周日"),n("周一"),n("周二"),n("周三"),n("周四"),n("周五"),n("周六")].map(((e,t)=>d.createElement(XC,{value:String(t),key:t},`${e}`))),E=u.map((e=>d.createElement(_t,{value:e.key,key:e.label},e.label))),x=p.map((e=>d.createElement(XC,{value:String(e.id),key:e.id},e.name))),b=async()=>{const e=await No();h(e||[])},C=async e=>{const n=await Oo({query:e}),r=n.dat||n,i=(t.notify_groups_obj?t.notify_groups_obj.filter((e=>!r.find((t=>e.id===t.id)))):[]).concat(r);m(i||[])},S=f.exports.useCallback(q.exports.debounce(C,800),[]);return d.createElement("div",{className:"operate_con"},d.createElement(St,{form:i,className:"strategy-form",layout:"vertical",initialValues:l(s({severity:2,disabled:0},Mu(t)),{cluster:t.cluster?t.cluster.split(" "):["$all"],enable_in_bg:1===(null==t?void 0:t.enable_in_bg),effective_time:(null==t?void 0:t.enable_stime)?null==t?void 0:t.enable_stime.map(((e,n)=>({enable_stime:I(t.enable_stime[n],"HH:mm"),enable_etime:I(t.enable_etime[n],"HH:mm"),enable_days_of_week:t.enable_days_of_week[n]}))):[{enable_stime:I("00:00","HH:mm"),enable_etime:I("23:59","HH:mm"),enable_days_of_week:["1","2","3","4","5","6","0"]}],enable_status:void 0===(null==t?void 0:t.disabled)||!(null==t?void 0:t.disabled),notify_recovered:1===(null==t?void 0:t.notify_recovered)||void 0===(null==t?void 0:t.notify_recovered),callbacks:_.isEmpty(null==t?void 0:t.callbacks)?[{}]:t.callbacks.map((e=>({url:e})))})},d.createElement(zt,{direction:"vertical",style:{width:"100%"}},d.createElement(Ut,{title:n("基本配置")},d.createElement(Ot,{gutter:16},d.createElement(At,{span:12},d.createElement(St.Item,{label:n("规则标题："),name:"name",rules:[{required:!0,message:n("规则标题不能为空")}]},d.createElement(wt,{placeholder:n("请输入规则标题")}))),d.createElement(At,{span:12},d.createElement(St.Item,{label:n("规则备注："),name:"note",rules:[{required:!1}]},d.createElement(wt,{placeholder:n("请输入规则备注")})))),d.createElement(St.Item,{label:n("告警级别"),name:"severity",rules:[{required:!0,message:n("告警级别不能为空")}]},d.createElement(Yt.Group,null,d.createElement(Yt,{value:1},n("一级报警")),d.createElement(Yt,{value:2},n("二级报警")),d.createElement(Yt,{value:3},n("三级报警")))),d.createElement(Ot,{gutter:16},d.createElement(At,{span:12},d.createElement(ia,{var:"VITE_IS_ALERT_ES_DS"},(e=>d.createElement(qC,{form:i,visible:e})))),d.createElement(At,{span:12},d.createElement(St.Item,{shouldUpdate:(e,t)=>e.cate!==t.cate,noStyle:!0},(({getFieldValue:e})=>d.createElement(WC,{form:i,cate:e("cate")}))))),d.createElement(St.Item,{shouldUpdate:(e,t)=>e.cate!==t.cate,noStyle:!0},(({getFieldValue:e})=>{const t=e("cate");if("prometheus"===t)return d.createElement(d.Fragment,null,d.createElement(ia,{var:"VITE_IS_ALERT_AI"},d.createElement(Yc,{form:i})),d.createElement(St.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.cluster!==t.cluster},(({getFieldValue:e})=>d.createElement(St.Item,{label:"PromQL",className:"Promeql-content",required:!0,style:{marginBottom:0}},d.createElement(ia,{var:"VITE_IS_ALERT_AI"},(t=>{const r=i.getFieldValue("cluster").includes("$all")&&a.length>0?a[0]:i.getFieldValue("cluster")[0]||"";return d.createElement(Ot,{gutter:8},d.createElement(At,{flex:"auto"},d.createElement(St.Item,{name:"prom_ql",validateTrigger:["onBlur"],trigger:"onChange",rules:[{required:!0,message:n("请输入PromQL")}]},d.createElement(jc,{url:"/api/n9e/prometheus",headers:{"X-Cluster":r,Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},onChange:()=>{y(!1)},cluster:r}))),t&&"holtwinters"===e("algorithm")&&d.createElement(At,{flex:"74px"},d.createElement(Ct,{onClick:()=>{const e=i.getFieldsValue();var t;e.prom_ql&&(y(!0),(t={cluster:_.join(e.cluster,""),algorithm:e.algorithm,algo_params:e.algo_params,prom_ql:e.prom_ql,prom_eval_interval:e.prom_eval_interval},ji("/api/fc-brain/promql-check",{method:Li.Post,data:t,silence:!0}).then((e=>e.data))).then((()=>{Et.success("校验通过")})).catch((e=>{Et.error(d.createElement("div",null,"校验失败",d.createElement("div",null,e.data.error)))})))}},"指标校验")))}))))));if("elasticsearch"===t){const t=e("query"),n=e("queries");if(t)return d.createElement(Du,{form:i});if(n)return d.createElement(Wu,{form:i})}return"aliyun-sls"===t?d.createElement(YC,{form:i}):void 0})),d.createElement(Ot,{gutter:16},d.createElement(At,{span:12},d.createElement(St.Item,{shouldUpdate:(e,t)=>e.cate!==t.cate,noStyle:!0},(({getFieldValue:e})=>{const t=e("cate");return d.createElement(St.Item,{name:"prom_eval_interval",label:n("执行频率（秒）"),tooltip:"prometheus"===t?n(`每隔${i.getFieldValue("prom_eval_interval")}秒，把PromQL作为查询条件，去查询后端存储，如果查到了数据就表示当次有监控数据触发了规则`):"每隔15秒，去查询后端存储",initialValue:60,rules:[{required:!0,message:n("执行频率不能为空")}]},d.createElement(Gt,{min:1,style:{width:"100%"}}))}))),d.createElement(At,{span:12},d.createElement(St.Item,{shouldUpdate:(e,t)=>e.cate!==t.cate,noStyle:!0},(({getFieldValue:e})=>{const t=e("cate");return d.createElement(St.Item,{name:"prom_for_duration",label:n("持续时长（秒）"),tooltip:"prometheus"===t?n("通常持续时长大于执行频率，在持续时长内按照执行频率多次执行PromQL查询，每次都触发才生成告警；如果持续时长置为0，表示只要有一次PromQL查询触发阈值，就生成告警"):"通常持续时长大于执行频率，在持续时长内按照执行频率多次执行查询，每次都触发才生成告警；如果持续时长置为0，表示只要有一次查询的数据满足告警条件，就生成告警",initialValue:60,rules:[{required:!0,message:n("持续时长不能为空")}]},d.createElement(Gt,{min:0,style:{width:"100%"}}))})))),d.createElement(St.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},ZC]},d.createElement(Nt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:QC})),d.createElement(St.Item,{label:n("预案链接"),name:"runbook_url"},d.createElement(wt,null))),d.createElement(Ut,{title:n("生效配置")},d.createElement(St.Item,{label:n("立即启用"),name:"enable_status",rules:[{required:!0,message:n("立即启用不能为空")}],valuePropName:"checked"},d.createElement(Lt,null)),d.createElement(St.List,{name:"effective_time"},((e,{add:t,remove:r})=>d.createElement(d.Fragment,null,d.createElement(zt,null,d.createElement("div",{style:{width:450}},"生效时间 ",d.createElement(Z,{className:"control-icon-normal",onClick:()=>t()})),d.createElement("div",{style:{width:110}},"开始时间"),d.createElement("div",{style:{width:110}},"结束时间")),e.map((e=>{var t=e,{key:i,name:a}=t,o=c(t,["key","name"]);return d.createElement(zt,{key:i,style:{display:"flex",marginBottom:8},align:"baseline"},d.createElement(St.Item,l(s({},o),{name:[a,"enable_days_of_week"],style:{width:450},rules:[{required:!0,message:n("请选择生效周期")}]}),d.createElement(Nt,{mode:"tags"},v)),d.createElement(St.Item,l(s({},o),{name:[a,"enable_stime"],style:{width:110},rules:[{required:!0,message:n("开始时间不能为空")}]}),d.createElement(qt,{format:"HH:mm"})),d.createElement(St.Item,l(s({},o),{name:[a,"enable_etime"],style:{width:110},rules:[{required:!0,message:n("结束时间不能为空")}]}),d.createElement(qt,{format:"HH:mm"})),d.createElement(ie,{onClick:()=>r(a)}))}))))),d.createElement(St.Item,{shouldUpdate:(e,t)=>e.cate!==t.cate,noStyle:!0},(({getFieldValue:e})=>{if("prometheus"===e("cate"))return d.createElement(St.Item,{label:n("仅在本业务组生效"),name:"enable_in_bg",valuePropName:"checked"},d.createElement(Fo,{label:"根据告警事件中的ident归属关系判断"}))}))),d.createElement(Ut,{title:n("通知配置")},d.createElement(St.Item,{label:n("通知媒介"),name:"notify_channels"},d.createElement(_t.Group,null,E)),d.createElement(St.Item,{label:n("告警接收组"),name:"notify_groups"},d.createElement(Nt,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>S(e),onBlur:()=>C("")},x)),d.createElement(St.Item,{label:n("启用恢复通知")},d.createElement(zt,null,d.createElement(St.Item,{name:"notify_recovered",valuePropName:"checked",style:{marginBottom:0}},d.createElement(Lt,null)),d.createElement(yt,{title:n("告警恢复时也发送通知")},d.createElement(ue,null)))),d.createElement(Ot,{gutter:16},d.createElement(At,{span:8},d.createElement(St.Item,{label:n("留观时长（秒）"),name:"recover_duration",initialValue:0,tooltip:n(`持续${i.getFieldValue("recover_duration")}秒没有再次触发阈值才发送恢复通知`)},d.createElement(Gt,{min:0,style:{width:"100%"}}))),d.createElement(At,{span:8},d.createElement(St.Item,{label:n("重复发送频率（分钟）"),name:"notify_repeat_step",initialValue:60,rules:[{required:!0,message:n("重复发送频率不能为空")}],tooltip:n(`如果告警持续未恢复，间隔${i.getFieldValue("notify_repeat_step")}分钟之后重复提醒告警接收组的成员`)},d.createElement(Gt,{min:0,style:{width:"100%"}}))),d.createElement(At,{span:8},d.createElement(St.Item,{label:n("最大发送次数"),name:"notify_max_number",initialValue:0,rules:[{required:!0,message:n("最大发送次数不能为空")}],tooltip:n("如果值为0，则不做最大发送次数的限制")},d.createElement(Gt,{min:0,precision:0,style:{width:"100%"}})))),d.createElement(St.List,{name:"callbacks"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement("div",null,"回调地址 ",d.createElement(Z,{className:"control-icon-normal",onClick:()=>t()})),e.map((e=>d.createElement(Ot,{gutter:16,key:e.key},d.createElement(At,{flex:"auto"},d.createElement(St.Item,{name:[e.name,"url"],fieldKey:[e.fieldKey,"url"]},d.createElement(wt,null))),d.createElement(At,{flex:"40px"},d.createElement(ie,{className:"control-icon-normal",onClick:()=>n(e.name)}))))))))),d.createElement(St.Item,{style:{marginTop:20}},d.createElement(Ct,{type:"primary",onClick:()=>{i.validateFields().then((async i=>{if("prometheus"===i.cate){if(!g&&"holtwinters"===i.algorithm)return void Et.warning("请先校验指标");const e=i.cluster.includes("$all")&&a.length>0?a[0]:i.cluster[0]||"",t=await va({query:i.prom_ql},e);if(t.error)return xt.error({message:t.error}),!1}else"elasticsearch"!==i.cate&&"aliyun-sls"!==i.cate||(i=Nu(i));const c=i.callbacks.map((e=>e.url)),u=l(s({},i),{enable_days_of_week:i.effective_time.map((e=>e.enable_days_of_week)),enable_stime:i.effective_time.map((e=>e.enable_stime.format("HH:mm"))),enable_etime:i.effective_time.map((e=>e.enable_etime.format("HH:mm"))),disabled:i.enable_status?0:1,notify_recovered:i.notify_recovered?1:0,enable_in_bg:i.enable_in_bg?1:0,callbacks:c,cluster:i.cluster.join(" ")});let h,p="Post";if(1===e){h=u,p="Put";const e=await function(e,t,n){return ji(`/api/n9e/busi-group/${t}/alert-rule/${n}`,{method:Li.Put,data:e})}(h,o.id,t.id);e.err?Et.error(e.error):(Et.success(n("编辑成功！")),r.push("/alert-rules"))}else{0===_.toNumber(window.localStorage.getItem("license_rules_remaining"))&&"holtwinters"===u.algorithm&&Et.error("可添加的智能告警规则数量已达上限，请联系客服"),h=[u];const{dat:t}=await ga(h,o.id,p);let i=0;const a=Object.keys(t).map((e=>(t[e]&&i++,t[e])));i?Et.error(n(a)):(Et.success(`${n(2===e?"告警规则克隆成功":"告警规则创建成功")}`),r.push("/alert-rules"))}})).catch((e=>{console.log(e)}))},style:{marginRight:"8px"}},n(1===e?"编辑":2===e?"克隆":"创建")),1===e&&d.createElement(Ct,{danger:!0,style:{marginRight:"8px"},onClick:()=>{Tt.confirm({title:n("是否删除该告警规则?"),onOk:()=>{ya([t.id],o.id).then((()=>{Et.success(n("删除成功")),r.push("/alert-rules")}))},onCancel(){}})}},n("删除")),d.createElement(Ct,{onClick:()=>{r.push("/alert-rules")}},n("取消"))))))},{Option:eS}=Nt,tS={labelCol:{span:2},wrapperCol:{span:20}},nS=[{id:2,field:"cluster",name:"集群"},{id:3,field:"severity",name:"级别"},{id:5,field:"prom_eval_interval",name:"执行频率"},{id:6,field:"prom_for_duration",name:"持续时长"},{id:4,field:"disabled",name:"启用"},{id:13,field:"effective_time",name:"生效时间"},{id:14,field:"enable_in_bg",name:"仅在本业务组生效"},{id:12,field:"append_tags",name:"附加标签"},{id:7,field:"notify_channels",name:"通知媒介"},{id:8,field:"notify_groups",name:"告警接收组"},{id:9,field:"notify_recovered",name:"启用恢复通知"},{id:10,field:"notify_repeat_step",name:"重复发送频率"},{id:15,field:"recover_duration",name:"留观时长"},{id:16,field:"notify_max_number",name:"最大发送次数"},{id:11,field:"callbacks",name:"回调地址"},{id:0,field:"note",name:"备注"},{id:1,field:"runbook_url",name:"预案链接"}];function rS(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function iS(e){const{isCorrectFormat:t,isLengthAllowed:n}=rS(e.value);return t&&n?d.createElement(Mt,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(yt,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Mt,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function aS(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=rS(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const oS=({isModalVisible:e,editModalFinish:t})=>{const{t:n,i18n:r}=Ur(),[i]=St.useForm(),{clusters:a}=ci((e=>e.common)),[o,u]=f.exports.useState([]),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState("cluster"),[y,v]=f.exports.useState(!0);f.exports.useEffect((()=>(C(),S(""),()=>{})),[]);const E=[n("周日"),n("周一"),n("周二"),n("周三"),n("周四"),n("周五"),n("周六")].map(((e,t)=>d.createElement(eS,{value:String(t),key:t},`${e}`))),x=o.map((e=>d.createElement(_t,{value:e.key,key:e.label},e.label))),b=h.map((e=>d.createElement(eS,{value:e.id,key:e.id},e.name))),C=async()=>{const e=await No();u(e||[])},S=async e=>{const t=await Oo({query:e}),n=t.dat||t;p(n||[])},w=f.exports.useCallback(q.exports.debounce(S,800),[]),T=e=>{e.includes("$all")&&i.setFieldsValue({cluster:["$all"]})};return d.createElement(d.Fragment,null,d.createElement(Tt,{title:n("批量更新"),visible:e,onOk:()=>{i.validateFields().then((async e=>{const n=s({},e);switch(e.field){case"effective_time":n.enable_days_of_week="",e.effective_time.map(((t,r)=>{1===e.effective_time.length||r===e.effective_time.length-1?n.enable_days_of_week+=q.exports.join(t.enable_days_of_week," "):n.enable_days_of_week+=q.exports.join(t.enable_days_of_week," ")+";"})),n.enable_stime=e.effective_time.map((e=>e.enable_stime.format("HH:mm"))),n.enable_etime=e.effective_time.map((e=>e.enable_etime.format("HH:mm"))),delete n.effective_time;break;case"disabled":n.disabled=e.enable_status?0:1,delete n.enable_status;break;case"enable_in_bg":n.enable_in_bg=e.enable_in_bg?1:0;break;case"callbacks":"cover"===n.action?(delete n.action,n.callbacks=e.callbacks.map((e=>e.url))):n.callbacks=e.callbacks;break;case"cluster":n.cluster=e.cluster.join(" ");break;case"notify_recovered":n.notify_recovered=e.notify_recovered?1:0}delete n.field,Object.keys(n).forEach((e=>{void 0===n[e]&&(n[e]=""),Array.isArray(n[e])&&(n[e]=n[e].join(" "))})),t(!0,n)}))},width:860,onCancel:()=>{t(!1)}},d.createElement(St,l(s({},tS),{form:i,className:"strategy-form",layout:"horizontal",initialValues:{prom_eval_interval:15,disabled:0,enable_status:!0,notify_recovered:1,effective_time:[{enable_stime:I("00:00","HH:mm"),enable_etime:I("23:59","HH:mm"),enable_days_of_week:["1","2","3","4","5","6","0"]}],cluster:a||["Default"],field:"cluster"}}),d.createElement(St.Item,{label:n("字段："),name:"field",rules:[{required:!1}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null),style:{width:"100%"},onChange:e=>{g(e)}},nS.map((e=>d.createElement(eS,{key:e.id,value:e.field},e.name))))),(()=>{switch(m){case"note":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"note",rules:[{required:!1}]},d.createElement(wt,{placeholder:n("请输入规则备注")})));case"runbook_url":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"runbook_url"},d.createElement(wt,null)));case"cluster":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"cluster",rules:[{required:!1,message:n("生效集群不能为空")}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:T},d.createElement(eS,{value:"$all",key:"$all"},"$all"),null==a?void 0:a.map((e=>d.createElement(eS,{value:e,key:e},e))))));case"severity":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"severity",initialValue:2,rules:[{required:!1,message:n("告警级别不能为空")}]},d.createElement(Yt.Group,null,d.createElement(Yt,{value:1},n("一级报警")),d.createElement(Yt,{value:2},n("二级报警")),d.createElement(Yt,{value:3},n("三级报警")))));case"disabled":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"enable_status",rules:[{required:!1,message:n("立即启用不能为空")}],valuePropName:"checked"},d.createElement(Lt,null)));case"enable_in_bg":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"enable_in_bg",valuePropName:"checked"},d.createElement(Fo,{label:"根据告警事件中的ident归属关系判断"})));case"prom_eval_interval":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),rules:[{required:!1,message:n("执行频率不能为空")}]},d.createElement(zt,null,d.createElement(St.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:15,wrapperCol:{span:10}},d.createElement(Gt,{min:1,onChange:e=>{v(!y)}})),"秒",d.createElement(yt,{title:n(`每隔${i.getFieldValue("prom_eval_interval")}秒，把PromQL作为查询条件，去查询后端存储，如果查到了数据就表示当次有监控数据触发了规则`)},d.createElement(ue,null)))));case"prom_for_duration":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),rules:[{required:!1,message:n("持续时长不能为空")}]},d.createElement(zt,null,d.createElement(St.Item,{style:{marginBottom:0},name:"prom_for_duration",initialValue:60,wrapperCol:{span:10}},d.createElement(Gt,{min:0})),"秒",d.createElement(yt,{title:n("通常持续时长大于执行频率，在持续时长内按照执行频率多次执行PromQL查询，每次都触发才生成告警；如果持续时长置为0，表示只要有一次PromQL查询触发阈值，就生成告警")},d.createElement(ue,null)))));case"notify_channels":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"notify_channels"},d.createElement(_t.Group,null,x)));case"notify_groups":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"notify_groups"},d.createElement(Nt,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>w(e),onBlur:()=>S("")},b)));case"notify_recovered":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"notify_recovered",valuePropName:"checked"},d.createElement(Lt,null)));case"recover_duration":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为：")},d.createElement(zt,null,d.createElement(St.Item,{style:{marginBottom:0},name:"recover_duration",initialValue:0,wrapperCol:{span:10},rules:[{required:!1,message:n("留观时长不能为空")}]},d.createElement(Gt,{min:0,onChange:e=>{v(!y)}})),"秒",d.createElement(yt,{title:n(`持续${i.getFieldValue("recover_duration")||0}秒没有再次触发阈值才发送恢复通知`)},d.createElement(ue,null)))));case"notify_repeat_step":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为：")},d.createElement(zt,null,d.createElement(St.Item,{style:{marginBottom:0},name:"notify_repeat_step",initialValue:60,wrapperCol:{span:10},rules:[{required:!1,message:n("重复发送频率不能为空")}]},d.createElement(Gt,{min:0,onChange:e=>{v(!y)}})),"分钟",d.createElement(yt,{title:n(`如果告警持续未恢复，间隔${i.getFieldValue("notify_repeat_step")}分钟之后重复提醒告警接收组的成员`)},d.createElement(ue,null)))));case"notify_max_number":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为：")},d.createElement(zt,null,d.createElement(St.Item,{style:{marginBottom:0},name:"notify_max_number",initialValue:0,wrapperCol:{span:10},rules:[{required:!0,message:n("最大发送次数不能为空")}]},d.createElement(Gt,{min:0,precision:0})),d.createElement(yt,{title:n("如果值为0，则不做最大发送次数的限制")},d.createElement(ue,null)))));case"callbacks":return d.createElement(d.Fragment,null,d.createElement(St.Item,{name:"action",label:n("模式："),initialValue:"cover"},d.createElement(Yt.Group,{buttonStyle:"solid",onChange:e=>{"cover"===e.target.value?i.setFieldsValue({callbacks:[{url:""}]}):i.setFieldsValue({callbacks:""})}},d.createElement(Yt.Button,{value:"cover"},"覆盖"),d.createElement(Yt.Button,{value:"callback_add"},"新增"),d.createElement(Yt.Button,{value:"callback_del"},"删除"))),d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>{const t=e("action");return"cover"===t?d.createElement(St.Item,{label:n("改为：")},d.createElement(St.List,{name:"callbacks",initialValue:[{}]},((e,{add:t,remove:n},{errors:r})=>d.createElement(d.Fragment,null,e.map(((e,t)=>d.createElement(Ot,{gutter:[10,0],key:e.key},d.createElement(At,{span:22},d.createElement(St.Item,{name:[e.name,"url"]},d.createElement(wt,null))),d.createElement(At,{span:1},d.createElement(ie,{className:"control-icon-normal",onClick:()=>n(e.name)}))))),d.createElement(Z,{className:"control-icon-normal",onClick:()=>t()}))))):"callback_add"===t?d.createElement(St.Item,{name:"callbacks",label:n("新增：")},d.createElement(wt,null)):"callback_del"===t?d.createElement(St.Item,{name:"callbacks",label:n("删除：")},d.createElement(wt,null)):void 0})));case"append_tags":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},aS]},d.createElement(Nt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:iS})));case"effective_time":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"effective_time",rules:[{required:!0,message:n("生效时间不能为空")}]},d.createElement(St.List,{name:"effective_time"},((e,{add:t,remove:r})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:i,name:a}=t,o=c(t,["key","name"]);return d.createElement(zt,{key:i,style:{display:"flex",marginBottom:8},align:"baseline"},d.createElement(St.Item,l(s({},o),{name:[a,"enable_days_of_week"],style:{width:450},rules:[{required:!0,message:n("请选择生效周期")}]}),d.createElement(Nt,{mode:"multiple",placeholder:"生效周期"},E)),d.createElement(St.Item,l(s({},o),{name:[a,"enable_stime"],rules:[{required:!0,message:n("开始时间不能为空")}]}),d.createElement(qt,{format:"HH:mm",placeholder:"开始时间"})),d.createElement(St.Item,l(s({},o),{name:[a,"enable_etime"],rules:[{required:!0,message:n("结束时间不能为空")}]}),d.createElement(qt,{format:"HH:mm",placeholder:"结束时间"})),d.createElement(ie,{onClick:()=>r(a)}))})),d.createElement(St.Item,null,d.createElement(Ct,{type:"dashed",onClick:()=>t(),block:!0,icon:d.createElement(re,null)},"添加生效时间")))))));default:return null}})())))};function sS(e){const{onSeverityChange:t,onEventTypeChange:n,onBusiGroupChange:r,onClusterChange:i,noLeftPadding:a,noRightPadding:o=!0}=e,{clusters:s,busiGroups:l}=ci((e=>e.common)),[c,u]=f.exports.useState(l),h=f.exports.useCallback(q.exports.debounce((e=>{Ui(e).then((e=>{u(e.dat||[])}))}),800),[]);return d.createElement(zt,{style:{marginLeft:a?0:8,marginRight:o?0:8}},i&&d.createElement(Nt,{mode:"multiple",allowClear:!0,style:{minWidth:80},placeholder:"集群",onChange:i,getPopupContainer:()=>document.body,dropdownMatchSelectWidth:!1},s.map((e=>d.createElement(Nt.Option,{value:e,key:e},e)))),r&&d.createElement(Nt,{allowClear:!0,showSearch:!0,style:{minWidth:120},placeholder:"业务组",dropdownClassName:"overflow-586",filterOption:!1,onSearch:h,getPopupContainer:()=>document.body,dropdownMatchSelectWidth:!1,onFocus:()=>{Ui("").then((e=>{u(e.dat||[])}))},onClear:()=>{Ui("").then((e=>{u(e.dat||[])}))},onChange:r},c.map((e=>d.createElement(Nt.Option,{value:e.id,key:e.id},e.name)))),t&&d.createElement(Nt,{suffixIcon:d.createElement(H,null),allowClear:!0,style:{minWidth:80},placeholder:"事件级别",onChange:t,getPopupContainer:()=>document.body},d.createElement(Nt.Option,{value:1},"一级告警"),d.createElement(Nt.Option,{value:2},"二级告警"),d.createElement(Nt.Option,{value:3},"三级告警")),n&&d.createElement(Nt,{suffixIcon:d.createElement(H,null),allowClear:!0,style:{minWidth:80},placeholder:"事件类别",onChange:n,getPopupContainer:()=>document.body},d.createElement(Nt.Option,{value:0},"Triggered"),d.createElement(Nt.Option,{value:1},"Recovered")))}const{confirm:lS}=Tt,{TabPane:cS}=Wt,uS={cluster:void 0,create_by:void 0,group_id:void 0,id:void 0,notify_groups_obj:void 0,notify_groups:void 0,notify_users:void 0,create_at:void 0,update_at:void 0,update_by:void 0},hS=({bgid:e})=>{const[t,n]=f.exports.useState(),[r,i]=f.exports.useState([]),{t:a}=Ur(),o=k(),[l,c]=f.exports.useState(wo.None),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState([]),[g,y]=f.exports.useState(""),{curBusiItem:v}=ci((e=>e.common)),[E,x]=f.exports.useState(""),[b,C]=f.exports.useState(!1),[S,w]=f.exports.useState([]),[T,O]=f.exports.useState([]),[A,I]=f.exports.useState(!1),[M,P]=f.exports.useState();f.exports.useEffect((()=>{e&&F()}),[e,t]),f.exports.useEffect((()=>{L()}),[E,r,S]);const F=async()=>{if(!e)return;I(!0);const{success:n,dat:r}=await da({id:e});n&&(w(r.filter((e=>!t||e.severity===t))||[]),I(!1))},L=()=>{const e=JSON.parse(JSON.stringify(S)).filter((e=>{const t=E.toLowerCase();return(e.name.toLowerCase().indexOf(t)>-1||e.append_tags.join(" ").toLowerCase().indexOf(t)>-1)&&(r&&(null==r?void 0:r.indexOf(e.cluster))>-1||0===(null==r?void 0:r.length))}));O(e||[])},R=()=>{F()},D=[{title:a("集群"),dataIndex:"cluster",render:e=>{const t=e.split(" ")||[];return t.length&&t.map(((e,t)=>d.createElement(bo,{text:e,key:t})))||d.createElement("div",null)}},{title:a("级别"),dataIndex:"severity",render:e=>d.createElement(Mt,{color:aa[e-1]},"S",e)},{title:a("名称"),dataIndex:"name",render:(e,t)=>d.createElement(B,{className:"table-active-text",to:{pathname:`/alert-rules/edit/${t.id}`}},e)},{title:a("告警接收者"),dataIndex:"notify_groups_obj",width:100,render:(e,t)=>e.length&&e.map(((e,t)=>d.createElement(bo,{text:e.nickname||e.username||e.name,key:t})))||d.createElement("div",null)},{title:a("附加标签"),dataIndex:"append_tags",render:e=>{const t=e||[];return t.length&&t.map(((e,t)=>d.createElement(bo,{text:e,key:t})))||d.createElement("div",null)}},{title:a("更新时间"),dataIndex:"update_at",width:120,render:e=>he(1e3*Number(e)).format("YYYY-MM-DD HH:mm:ss")},{title:a("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Lt,{checked:e===co.Enable,size:"small",onChange:()=>{const{id:e,disabled:n}=t;Ea({ids:[e],fields:{disabled:n?0:1}},v.id).then((()=>{R()}))}})},{title:a("操作"),dataIndex:"operator",width:160,render:(e,t)=>d.createElement("div",{className:"table-operator-area"},d.createElement(B,{className:"table-operator-area-normal",style:{marginRight:8},to:{pathname:`/alert-rules/edit/${t.id}?mode=clone`},target:"_blank"},a("克隆")),d.createElement("div",{className:"table-operator-area-warning",onClick:()=>{lS({title:a("是否删除该告警规则?"),onOk:()=>{ya([t.id],v.id).then((()=>{Et.success(a("删除成功")),R()}))},onCancel(){}})}},a("删除")),"holtwinters"===t.algorithm&&d.createElement("div",null,d.createElement(B,{to:{pathname:`/alert-rules/brain/${t.id}`}},"训练结果")))}],$=f.exports.useMemo((()=>d.createElement("ul",{className:"ant-dropdown-menu"},d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>c(wo.BuiltIn)},d.createElement("span",null,a("导入告警规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{if(p.length){const e=p.map((e=>s(s({},e),uS)));y(JSON.stringify(e,null,2)),c(wo.Export)}else Et.warning(a("未选择任何规则"))}},d.createElement("span",null,a("导出告警规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{u.length?lS({title:a("是否批量删除告警规则?"),onOk:()=>{ya(u,null==v?void 0:v.id).then((()=>{Et.success(a("删除成功")),R()}))},onCancel(){}}):Et.warning(a("未选择任何规则"))}},d.createElement("span",null,a("批量删除规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{a("批量更新规则"),0!=u.length?C(!0):Et.warning(a("请先选择策略"))}},d.createElement("span",null,a("批量更新规则"))))),[u,a]);return d.createElement("div",{className:"strategy-table-content"},d.createElement("div",{className:"strategy-table-search table-handle"},d.createElement(zt,null,d.createElement(xo,{onClick:()=>{R()}}),d.createElement(ia,{var:"VITE_IS_ALERT_ES_DS"},d.createElement(Nt,{value:M,onChange:e=>{P(e)},style:{width:120},placeholder:"数据源类型",allowClear:!0},d.createElement(Nt.Option,{value:"prometheus"},"Prometheus"),d.createElement(Nt.Option,{value:"elasticsearch"},"Elasticsearch"),d.createElement(Nt.Option,{value:"aliyun-sls"},"阿里云 SLS"))),d.createElement(sS,{noLeftPadding:!0,noRightPadding:!0,onSeverityChange:e=>n(e),onClusterChange:e=>i(e)}),d.createElement(oo,{className:"searchInput",placeholder:a("搜索名称或标签"),onSearch:x,allowClear:!0})),d.createElement("div",{className:"strategy-table-search-right"},d.createElement(Ct,{type:"primary",onClick:()=>{(null==v?void 0:v.id)&&o.push(`/alert-rules/add/${v.id}`)},className:"strategy-table-search-right-create",ghost:!0},a("新增告警规则")),d.createElement("div",{className:"table-more-options"},d.createElement(kt,{overlay:$,trigger:["click"]},d.createElement(Ct,{onClick:e=>e.stopPropagation()},a("更多操作"),d.createElement(N,{style:{marginLeft:2}})))))),d.createElement(Ft,{rowKey:"id",pagination:{total:T.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:vo,defaultPageSize:30},loading:A,dataSource:_.filter(T,(e=>{const t=e.cate||"prometheus";return!M||t===M})),rowSelection:{selectedRowKeys:p.map((e=>e.id)),onChange:(e,t)=>{h(e),m(t)}},columns:D}),d.createElement(ko,{bgid:e,status:l,fetchBuiltinFunc:ba,submitBuiltinFunc:Ca,onClose:()=>{c(wo.None)},onSuccess:()=>{F()},onSubmit:async e=>{const{dat:t}=await ga(e,v.id,"Post");return t||{}},label:"告警规则",title:wo.Export===l?"告警规则":d.createElement(Wt,{defaultActiveKey:wo.BuiltIn,onChange:e=>c(e),className:"custom-import-alert-title"},d.createElement(cS,{tab:" 导入内置告警规则",key:wo.BuiltIn}),d.createElement(cS,{tab:"导入告警规则JSON",key:wo.Import})),exportData:g}),b&&d.createElement(oS,{isModalVisible:b,editModalFinish:async(e,t)=>{if(e){const e=t.action;delete t.action;const n=await Ea({ids:u,fields:t,action:e},v.id);n.err?Et.error(n.err):(Et.success("修改成功！"),R(),C(!1))}else C(!1)}}))};const pS=()=>{const e=Fi(),t=k(),n=e.get("id"),{t:r}=Ur();return d.createElement(Pa,{title:r("告警规则"),icon:d.createElement(R,null),hideCluster:!0},d.createElement("div",{className:"strategy-content"},d.createElement(io,{busiGroup:{defaultSelect:n?Number(n):void 0,onChange:e=>{t.push(`/alert-rules?id=${e}`)}}}),n?d.createElement(hS,{bgid:Number(n)}):d.createElement(ao,{text:"告警规则"})))};function dS(){const{t:e}=Ur(),[t]=St.useForm(),n=()=>{const{oldpass:n,newpass:r}=t.getFieldsValue();(function(e,t){return ji("/api/n9e/self/password",{method:Li.Put,data:{oldpass:e,newpass:t}})})(n,r).then((t=>{console.log(t),Et.success(e("修改密码成功"))}))};return d.createElement(St,{form:t,layout:"vertical",requiredMark:!0},d.createElement(St.Item,{label:d.createElement("span",null,e("旧密码"),":"),required:!0,name:"oldpass",rules:[{required:!0,message:e("请输入旧密码")}]},d.createElement(wt,{placeholder:e("请输入旧密码"),type:"password"})),d.createElement(St.Item,{label:d.createElement("span",null,e("新密码"),":"),required:!0,name:"newpass",hasFeedback:!0,rules:[{required:!0,message:e("请输入新密码")}]},d.createElement(wt,{placeholder:e("请输入新密码"),type:"password"})),d.createElement(St.Item,{label:d.createElement("span",null,e("确认密码"),": "),required:!0,name:"newpassagain",hasFeedback:!0,rules:[{required:!0,message:e("再次输入新密码")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("newpass")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(wt,{placeholder:e("再次输入新密码"),type:"password"})),d.createElement(St.Item,null,d.createElement(Ct,{type:"primary",onClick:async()=>{try{await t.validateFields(),n()}catch(uu){console.log(e("输入有误"))}}},e("确认修改"))))}const{Option:fS}=Nt;function mS(){const{t:e}=Ur(),[t]=St.useForm(),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState([]);let{profile:o}=ci((e=>e.account));const[u,h]=f.exports.useState(o.portrait||"/image/avatar1.png"),[p,m]=f.exports.useState(""),g=ai();f.exports.useEffect((()=>{const{id:e,nickname:n,email:r,phone:i,contacts:a,portrait:s}=o;t.setFieldsValue({nickname:n,email:r,phone:i,contacts:a}),s.startsWith("http")&&m(s)}),[o]),f.exports.useEffect((()=>{Po().then((e=>{a(e)}))}),[]);const y=async()=>{try{await t.validateFields(),v()}catch(n){console.log(e("输入有误"),n)}},v=()=>{const{nickname:n,email:r,phone:i,moreContacts:a}=t.getFieldsValue();let{contacts:c}=t.getFieldsValue();a&&a.length>0&&a.forEach((e=>{const{key:t,value:n}=e;t&&n&&(c?c[t]=n:c={[t]:n})}));for(let e in c)c[e]||delete c[e];g({type:"account/updateProfile",data:l(s({},o),{portrait:p||u,nickname:n,email:r,phone:i,contacts:c})}),Et.success(e("信息保存成功"))},E=new Array(8).fill(0).map(((e,t)=>t+1));return d.createElement(d.Fragment,null,d.createElement(St,{form:t,layout:"vertical"},d.createElement(Ot,{gutter:16,style:{marginBottom:"24px"}},d.createElement(At,{span:20},d.createElement(Ot,{gutter:16,style:{marginBottom:"24px"}},d.createElement(At,{span:4},d.createElement("div",null,d.createElement("label",null,e("用户名"),"："),d.createElement("span",null,o.username))),d.createElement(At,{span:4},d.createElement("div",null,d.createElement("label",null,e("角色"),"："),d.createElement("span",null,o.roles.join(", "))))),d.createElement(St.Item,{label:d.createElement("span",null,e("显示名"),"："),name:"nickname"},d.createElement(wt,{placeholder:e("请输入显示名")})),d.createElement(St.Item,{label:d.createElement("span",null,e("邮箱"),"："),name:"email"},d.createElement(wt,{placeholder:e("请输入邮箱")})),d.createElement(St.Item,{label:d.createElement("span",null,e("手机"),"："),name:"phone"},d.createElement(wt,{placeholder:e("请输入手机号")})),o.contacts&&Object.keys(o.contacts).sort().map(((t,n)=>{let r=i.find((e=>e.key===t));return d.createElement(d.Fragment,null,r?d.createElement(St.Item,{label:r.label+"：",name:["contacts",t],key:n},d.createElement(wt,{placeholder:`${e("请输入")}${t}`})):null)})),d.createElement(St.Item,{label:e("更多联系方式")},d.createElement(St.List,{name:"moreContacts"},((t,{add:n,remove:r})=>d.createElement(d.Fragment,null,t.map((t=>{var n=t,{key:a,name:o,fieldKey:u}=n,h=c(n,["key","name","fieldKey"]);return d.createElement(zt,{key:a,style:{display:"flex"},align:"baseline"},d.createElement(St.Item,l(s({style:{width:"180px"}},h),{name:[o,"key"],fieldKey:[u,"key"],rules:[{required:!0,message:e("联系方式不能为空")}]}),d.createElement(Nt,{suffixIcon:d.createElement(H,null),placeholder:e("请选择联系方式")},i.map(((e,t)=>d.createElement(fS,{value:e.key,key:t},e.label))))),d.createElement(St.Item,l(s({},h),{style:{width:"330px"},name:[o,"value"],fieldKey:[u,"value"],rules:[{required:!0,message:e("值不能为空")}]}),d.createElement(wt,{placeholder:e("请输入值")})),d.createElement(ie,{className:"control-icon-normal",onClick:()=>r(o)}))})),d.createElement(Z,{className:"control-icon-normal",onClick:()=>n()}))))),d.createElement(St.Item,null,d.createElement(Ct,{type:"primary",onClick:y},e("确认修改")))),d.createElement(At,{span:4},d.createElement("div",{className:"avatar"},d.createElement("img",{src:o.portrait||"/image/avatar1.png"}),d.createElement(Ct,{type:"primary",className:"update-avatar",onClick:()=>r(!0)},e("更换头像")))))),d.createElement(Tt,{title:e("更换头像"),visible:n,onOk:()=>{if(p){if(!p.startsWith("http"))return void Et.error(e("自定义头像需以http开头"));fetch(p,{mode:"no-cors"}).then((e=>{r(!1),y()})).catch((t=>{Et.error(e("自定义头像")+t)}))}else r(!1),y()},onCancel:()=>{r(!1)},wrapClassName:"avatar-modal"},d.createElement("div",{className:"avatar-content"},E.map((e=>d.createElement("div",{key:e,className:`/image/avatar${e}.png`===u?"avatar active":"avatar",onClick:()=>(e=>{h(`/image/avatar${e}.png`)})(e)},d.createElement("img",{src:`/image/avatar${e}.png`}))))),d.createElement(wt,{addonBefore:d.createElement("span",null,e("头像URL"),":"),onChange:e=>m(e.target.value),value:p})))}const{TabPane:gS}=Wt;function yS(){const{t:e}=Ur(),{tab:t}=pe(),n=k();return d.createElement(Pa,{title:e("个人中心"),hideCluster:!0},d.createElement(Wt,{activeKey:t,className:"profile",onChange:e=>{n.push("/account/profile/"+e)}},d.createElement(gS,{tab:e("personalInfo"),key:"info"},d.createElement(mS,null)),d.createElement(gS,{tab:e("修改密码"),key:"pwd"},d.createElement(dS,null))))}var vS={exports:{}};var ES={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16};var xS="object"==typeof process&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=ES,r=xS,i=(t=e.exports={}).re=[],a=t.src=[],o=t.t={};let s=0;const l=(e,t,n)=>{const l=s++;r(l,t),o[e]=l,a[l]=t,i[l]=new RegExp(t,n?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${a[o.NUMERICIDENTIFIER]}|${a[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${a[o.NUMERICIDENTIFIERLOOSE]}|${a[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${a[o.PRERELEASEIDENTIFIER]}(?:\\.${a[o.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${a[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[o.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${a[o.BUILDIDENTIFIER]}(?:\\.${a[o.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${a[o.MAINVERSION]}${a[o.PRERELEASE]}?${a[o.BUILD]}?`),l("FULL",`^${a[o.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${a[o.MAINVERSIONLOOSE]}${a[o.PRERELEASELOOSE]}?${a[o.BUILD]}?`),l("LOOSE",`^${a[o.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${a[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${a[o.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:${a[o.PRERELEASE]})?${a[o.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:${a[o.PRERELEASELOOSE]})?${a[o.BUILD]}?)?)?`),l("XRANGE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",a[o.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${a[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${a[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${a[o.LONECARET]}${a[o.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${a[o.LONECARET]}${a[o.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${a[o.GTLT]}\\s*(${a[o.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]}|${a[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${a[o.XRANGEPLAIN]})\\s+-\\s+(${a[o.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${a[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[o.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0.0.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(vS,vS.exports);const bS=["includePrerelease","loose","rtl"];var CS=e=>e?"object"!=typeof e?{loose:!0}:bS.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};const SS=/^[0-9]+$/,wS=(e,t)=>{const n=SS.test(e),r=SS.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var TS={compareIdentifiers:wS,rcompareIdentifiers:(e,t)=>wS(t,e)};const kS=xS,{MAX_LENGTH:_S,MAX_SAFE_INTEGER:OS}=ES,{re:AS,t:IS}=vS.exports,MS=CS,{compareIdentifiers:NS}=TS;class PS{constructor(e,t){if(t=MS(t),e instanceof PS){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>_S)throw new TypeError(`version is longer than ${_S} characters`);kS("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?AS[IS.LOOSE]:AS[IS.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>OS||this.major<0)throw new TypeError("Invalid major version");if(this.minor>OS||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>OS||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<OS)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(kS("SemVer.compare",this.version,this.options,e),!(e instanceof PS)){if("string"==typeof e&&e===this.version)return 0;e=new PS(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof PS||(e=new PS(e,this.options)),NS(this.major,e.major)||NS(this.minor,e.minor)||NS(this.patch,e.patch)}comparePre(e){if(e instanceof PS||(e=new PS(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(kS("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return NS(n,r)}while(++t)}compareBuild(e){e instanceof PS||(e=new PS(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(kS("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return NS(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var FS=PS;const{MAX_LENGTH:LS}=ES,{re:RS,t:DS}=vS.exports,BS=FS,$S=CS;var zS=(e,t)=>{if(t=$S(t),e instanceof BS)return e;if("string"!=typeof e)return null;if(e.length>LS)return null;if(!(t.loose?RS[DS.LOOSE]:RS[DS.FULL]).test(e))return null;try{return new BS(e,t)}catch(n){return null}};const HS=zS;var jS=(e,t)=>{const n=HS(e,t);return n?n.version:null};const GS=zS;var VS=(e,t)=>{const n=GS(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};const YS=FS;var US=(e,t,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new YS(e,n).inc(t,r).version}catch(i){return null}};const qS=FS;var WS=(e,t,n)=>new qS(e,n).compare(new qS(t,n));const XS=WS;var KS=(e,t,n)=>0===XS(e,t,n);const QS=zS,ZS=KS;var JS=(e,t)=>{if(ZS(e,t))return null;{const n=QS(e),r=QS(t),i=n.prerelease.length||r.prerelease.length,a=i?"pre":"",o=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return a+e;return o}};const ew=FS;var tw=(e,t)=>new ew(e,t).major;const nw=FS;var rw=(e,t)=>new nw(e,t).minor;const iw=FS;var aw=(e,t)=>new iw(e,t).patch;const ow=zS;var sw=(e,t)=>{const n=ow(e,t);return n&&n.prerelease.length?n.prerelease:null};const lw=WS;var cw=(e,t,n)=>lw(t,e,n);const uw=WS;var hw=(e,t)=>uw(e,t,!0);const pw=FS;var dw=(e,t,n)=>{const r=new pw(e,n),i=new pw(t,n);return r.compare(i)||r.compareBuild(i)};const fw=dw;var mw=(e,t)=>e.sort(((e,n)=>fw(e,n,t)));const gw=dw;var yw=(e,t)=>e.sort(((e,n)=>gw(n,e,t)));const vw=WS;var Ew=(e,t,n)=>vw(e,t,n)>0;const xw=WS;var bw=(e,t,n)=>xw(e,t,n)<0;const Cw=WS;var Sw=(e,t,n)=>0!==Cw(e,t,n);const ww=WS;var Tw=(e,t,n)=>ww(e,t,n)>=0;const kw=WS;var _w=(e,t,n)=>kw(e,t,n)<=0;const Ow=KS,Aw=Sw,Iw=Ew,Mw=Tw,Nw=bw,Pw=_w;var Fw=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Ow(e,n,r);case"!=":return Aw(e,n,r);case">":return Iw(e,n,r);case">=":return Mw(e,n,r);case"<":return Nw(e,n,r);case"<=":return Pw(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};const Lw=FS,Rw=zS,{re:Dw,t:Bw}=vS.exports;var $w=(e,t)=>{if(e instanceof Lw)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=Dw[Bw.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),Dw[Bw.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;Dw[Bw.COERCERTL].lastIndex=-1}else n=e.match(Dw[Bw.COERCE]);return null===n?null:Rw(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};class zw{constructor(e,t){if(t=Gw(t),e instanceof zw)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new zw(e.raw,t);if(e instanceof Vw)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!Zw(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&Jw(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=jw.get(t);if(n)return n;const r=this.options.loose,i=r?qw[Ww.HYPHENRANGELOOSE]:qw[Ww.HYPHENRANGE];e=e.replace(i,hT(this.options.includePrerelease)),Yw("hyphen replace",e),e=e.replace(qw[Ww.COMPARATORTRIM],Xw),Yw("comparator trim",e,qw[Ww.COMPARATORTRIM]),e=(e=(e=e.replace(qw[Ww.TILDETRIM],Kw)).replace(qw[Ww.CARETTRIM],Qw)).split(/\s+/).join(" ");const a=r?qw[Ww.COMPARATORLOOSE]:qw[Ww.COMPARATOR],o=e.split(" ").map((e=>tT(e,this.options))).join(" ").split(/\s+/).map((e=>uT(e,this.options))).filter(this.options.loose?e=>!!e.match(a):()=>!0).map((e=>new Vw(e,this.options)));o.length;const s=new Map;for(const c of o){if(Zw(c))return[c];s.set(c.value,c)}s.size>1&&s.has("")&&s.delete("");const l=[...s.values()];return jw.set(t,l),l}intersects(e,t){if(!(e instanceof zw))throw new TypeError("a Range is required");return this.set.some((n=>eT(n,t)&&e.set.some((e=>eT(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new Uw(e,this.options)}catch(t){return!1}for(let n=0;n<this.set.length;n++)if(pT(this.set[n],e,this.options))return!0;return!1}}var Hw=zw;const jw=new Mn({max:1e3}),Gw=CS,Vw=mT,Yw=xS,Uw=FS,{re:qw,t:Ww,comparatorTrimReplace:Xw,tildeTrimReplace:Kw,caretTrimReplace:Qw}=vS.exports,Zw=e=>"<0.0.0-0"===e.value,Jw=e=>""===e.value,eT=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},tT=(e,t)=>(Yw("comp",e,t),e=aT(e,t),Yw("caret",e),e=rT(e,t),Yw("tildes",e),e=sT(e,t),Yw("xrange",e),e=cT(e,t),Yw("stars",e),e),nT=e=>!e||"x"===e.toLowerCase()||"*"===e,rT=(e,t)=>e.trim().split(/\s+/).map((e=>iT(e,t))).join(" "),iT=(e,t)=>{const n=t.loose?qw[Ww.TILDELOOSE]:qw[Ww.TILDE];return e.replace(n,((t,n,r,i,a)=>{let o;return Yw("tilde",e,t,n,r,i,a),nT(n)?o="":nT(r)?o=`>=${n}.0.0 <${+n+1}.0.0-0`:nT(i)?o=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:a?(Yw("replaceTilde pr",a),o=`>=${n}.${r}.${i}-${a} <${n}.${+r+1}.0-0`):o=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,Yw("tilde return",o),o}))},aT=(e,t)=>e.trim().split(/\s+/).map((e=>oT(e,t))).join(" "),oT=(e,t)=>{Yw("caret",e,t);const n=t.loose?qw[Ww.CARETLOOSE]:qw[Ww.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,a,o)=>{let s;return Yw("caret",e,t,n,i,a,o),nT(n)?s="":nT(i)?s=`>=${n}.0.0${r} <${+n+1}.0.0-0`:nT(a)?s="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:o?(Yw("replaceCaret pr",o),s="0"===n?"0"===i?`>=${n}.${i}.${a}-${o} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}-${o} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a}-${o} <${+n+1}.0.0-0`):(Yw("no pr"),s="0"===n?"0"===i?`>=${n}.${i}.${a}${r} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a} <${+n+1}.0.0-0`),Yw("caret return",s),s}))},sT=(e,t)=>(Yw("replaceXRanges",e,t),e.split(/\s+/).map((e=>lT(e,t))).join(" ")),lT=(e,t)=>{e=e.trim();const n=t.loose?qw[Ww.XRANGELOOSE]:qw[Ww.XRANGE];return e.replace(n,((n,r,i,a,o,s)=>{Yw("xRange",e,n,r,i,a,o,s);const l=nT(i),c=l||nT(a),u=c||nT(o),h=u;return"="===r&&h&&(r=""),s=t.includePrerelease?"-0":"",l?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(c&&(a=0),o=0,">"===r?(r=">=",c?(i=+i+1,a=0,o=0):(a=+a+1,o=0)):"<="===r&&(r="<",c?i=+i+1:a=+a+1),"<"===r&&(s="-0"),n=`${r+i}.${a}.${o}${s}`):c?n=`>=${i}.0.0${s} <${+i+1}.0.0-0`:u&&(n=`>=${i}.${a}.0${s} <${i}.${+a+1}.0-0`),Yw("xRange return",n),n}))},cT=(e,t)=>(Yw("replaceStars",e,t),e.trim().replace(qw[Ww.STAR],"")),uT=(e,t)=>(Yw("replaceGTE0",e,t),e.trim().replace(qw[t.includePrerelease?Ww.GTE0PRE:Ww.GTE0],"")),hT=e=>(t,n,r,i,a,o,s,l,c,u,h,p,d)=>`${n=nT(r)?"":nT(i)?`>=${r}.0.0${e?"-0":""}`:nT(a)?`>=${r}.${i}.0${e?"-0":""}`:o?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=nT(c)?"":nT(u)?`<${+c+1}.0.0-0`:nT(h)?`<${c}.${+u+1}.0-0`:p?`<=${c}.${u}.${h}-${p}`:e?`<${c}.${u}.${+h+1}-0`:`<=${l}`}`.trim(),pT=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(Yw(e[n].semver),e[n].semver!==Vw.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},dT=Symbol("SemVer ANY");class fT{static get ANY(){return dT}constructor(e,t){if(t=gT(t),e instanceof fT){if(e.loose===!!t.loose)return e;e=e.value}xT("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===dT?this.value="":this.value=this.operator+this.semver.version,xT("comp",this)}parse(e){const t=this.options.loose?yT[vT.COMPARATORLOOSE]:yT[vT.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new bT(n[2],this.options.loose):this.semver=dT}toString(){return this.value}test(e){if(xT("Comparator.test",e,this.options.loose),this.semver===dT||e===dT)return!0;if("string"==typeof e)try{e=new bT(e,this.options)}catch(t){return!1}return ET(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof fT))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new CT(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new CT(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),o=ET(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=ET(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&a||o||s}}var mT=fT;const gT=CS,{re:yT,t:vT}=vS.exports,ET=Fw,xT=xS,bT=FS,CT=Hw,ST=Hw;var wT=(e,t,n)=>{try{t=new ST(t,n)}catch(r){return!1}return t.test(e)};const TT=Hw;var kT=(e,t)=>new TT(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));const _T=FS,OT=Hw;var AT=(e,t,n)=>{let r=null,i=null,a=null;try{a=new OT(t,n)}catch(o){return null}return e.forEach((e=>{a.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new _T(r,n)))})),r};const IT=FS,MT=Hw;var NT=(e,t,n)=>{let r=null,i=null,a=null;try{a=new MT(t,n)}catch(o){return null}return e.forEach((e=>{a.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new IT(r,n)))})),r};const PT=FS,FT=Hw,LT=Ew;var RT=(e,t)=>{e=new FT(e,t);let n=new PT("0.0.0");if(e.test(n))return n;if(n=new PT("0.0.0-0"),e.test(n))return n;n=null;for(let r=0;r<e.set.length;++r){const t=e.set[r];let i=null;t.forEach((e=>{const t=new PT(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!LT(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!LT(n,i)||(n=i)}return n&&e.test(n)?n:null};const DT=Hw;var BT=(e,t)=>{try{return new DT(e,t).range||"*"}catch(n){return null}};const $T=FS,zT=mT,{ANY:HT}=zT,jT=Hw,GT=wT,VT=Ew,YT=bw,UT=_w,qT=Tw;var WT=(e,t,n,r)=>{let i,a,o,s,l;switch(e=new $T(e,r),t=new jT(t,r),n){case">":i=VT,a=UT,o=YT,s=">",l=">=";break;case"<":i=YT,a=qT,o=VT,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(GT(e,t,r))return!1;for(let c=0;c<t.set.length;++c){const n=t.set[c];let u=null,h=null;if(n.forEach((e=>{e.semver===HT&&(e=new zT(">=0.0.0")),u=u||e,h=h||e,i(e.semver,u.semver,r)?u=e:o(e.semver,h.semver,r)&&(h=e)})),u.operator===s||u.operator===l)return!1;if((!h.operator||h.operator===s)&&a(e,h.semver))return!1;if(h.operator===l&&o(e,h.semver))return!1}return!0};const XT=WT;var KT=(e,t,n)=>XT(e,t,">",n);const QT=WT;var ZT=(e,t,n)=>QT(e,t,"<",n);const JT=Hw;var ek=(e,t,n)=>(e=new JT(e,n),t=new JT(t,n),e.intersects(t));const tk=wT,nk=WS;const rk=Hw,ik=mT,{ANY:ak}=ik,ok=wT,sk=WS,lk=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===ak){if(1===t.length&&t[0].semver===ak)return!0;e=n.includePrerelease?[new ik(">=0.0.0-0")]:[new ik(">=0.0.0")]}if(1===t.length&&t[0].semver===ak){if(n.includePrerelease)return!0;t=[new ik(">=0.0.0")]}const r=new Set;let i,a,o,s,l,c,u;for(const d of e)">"===d.operator||">="===d.operator?i=ck(i,d,n):"<"===d.operator||"<="===d.operator?a=uk(a,d,n):r.add(d.semver);if(r.size>1)return null;if(i&&a){if(o=sk(i.semver,a.semver,n),o>0)return null;if(0===o&&(">="!==i.operator||"<="!==a.operator))return null}for(const d of r){if(i&&!ok(d,String(i),n))return null;if(a&&!ok(d,String(a),n))return null;for(const e of t)if(!ok(d,String(e),n))return!1;return!0}let h=!(!a||n.includePrerelease||!a.semver.prerelease.length)&&a.semver,p=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;h&&1===h.prerelease.length&&"<"===a.operator&&0===h.prerelease[0]&&(h=!1);for(const d of t){if(u=u||">"===d.operator||">="===d.operator,c=c||"<"===d.operator||"<="===d.operator,i)if(p&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===p.major&&d.semver.minor===p.minor&&d.semver.patch===p.patch&&(p=!1),">"===d.operator||">="===d.operator){if(s=ck(i,d,n),s===d&&s!==i)return!1}else if(">="===i.operator&&!ok(i.semver,String(d),n))return!1;if(a)if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),"<"===d.operator||"<="===d.operator){if(l=uk(a,d,n),l===d&&l!==a)return!1}else if("<="===a.operator&&!ok(a.semver,String(d),n))return!1;if(!d.operator&&(a||i)&&0!==o)return!1}return!(i&&c&&!a&&0!==o)&&(!(a&&u&&!i&&0!==o)&&(!p&&!h))},ck=(e,t,n)=>{if(!e)return t;const r=sk(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},uk=(e,t,n)=>{if(!e)return t;const r=sk(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};var hk=(e,t,n={})=>{if(e===t)return!0;e=new rk(e,n),t=new rk(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=lk(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0};const pk=vS.exports;var dk={re:pk.re,src:pk.src,tokens:pk.t,SEMVER_SPEC_VERSION:ES.SEMVER_SPEC_VERSION,SemVer:FS,compareIdentifiers:TS.compareIdentifiers,rcompareIdentifiers:TS.rcompareIdentifiers,parse:zS,valid:jS,clean:VS,inc:US,diff:JS,major:tw,minor:rw,patch:aw,prerelease:sw,compare:WS,rcompare:cw,compareLoose:hw,compareBuild:dw,sort:mw,rsort:yw,gt:Ew,lt:bw,eq:KS,neq:Sw,gte:Tw,lte:_w,cmp:Fw,coerce:$w,Comparator:mT,Range:Hw,satisfies:wT,toComparators:kT,maxSatisfying:AT,minSatisfying:NT,minVersion:RT,validRange:BT,outside:WT,gtr:KT,ltr:ZT,intersects:ek,simplifyRange:(e,t,n)=>{const r=[];let i=null,a=null;const o=e.sort(((e,t)=>nk(e,t,n)));for(const u of o){tk(u,t,n)?(a=u,i||(i=u)):(a&&r.push([i,a]),a=null,i=null)}i&&r.push([i,null]);const s=[];for(const[u,h]of r)u===h?s.push(u):h||u!==o[0]?h?u===o[0]?s.push(`<=${h}`):s.push(`${u} - ${h}`):s.push(`>=${u}`):s.push("*");const l=s.join(" || "),c="string"==typeof t.raw?t.raw:String(t);return l.length<c.length?l:t},subset:hk};const fk=[15,30,60,120,300].map((e=>({label:e,value:e})));function mk(e){const{onChange:t,value:n,initialValue:r}=e,[i,a]=f.exports.useState(String(r||"")),[o,s]=f.exports.useState(r||null);f.exports.useEffect((()=>{a(String(n||""))}),[n]);const l=()=>{if(!i)return s(null),void(t&&t(null));const e=Number(i);Number.isInteger(e)&&e>0&&e<=Number.MAX_SAFE_INTEGER&&e!==o&&(s(e),t&&t(e))};return d.createElement("div",{className:"resolution"},d.createElement(Ht,{options:fk,value:i,style:{width:72},onChange:e=>{a("number"==typeof e?e:e.replace(/^(0+)|[^\d]+/g,""))},onSelect:e=>{const n=Number(e);n!==o&&(s(n),t&&t(n))},onKeyDown:e=>{13===e.keyCode&&l()},onBlur:l,placeholder:"Res. (s)"}))}const gk=I();ee.string,ee.string,ee.oneOfType([ee.string,ee.number]),ee.oneOfType([ee.string,ee.number]),ee.oneOfType([ee.string,ee.number]),ee.arrayOf(ee.string),ee.array,ee.bool,ee.number,ee.number,ee.number,ee.string,ee.number,ee.number,ee.string,ee.bool,ee.bool,ee.string,ee.string,ee.bool,ee.arrayOf(ee.shape({selectedEndpoint:ee.array,selectedMetric:ee.string,aggrFunc:ee.string,aggrGroup:ee.array,selectedTagkv:ee.array,tagKv:ee.array,counters:ee.array}));const yk={title:"",type:"chart",now:gk.clone().format("x"),start:gk.clone().subtract(36e5,"ms").format("x"),end:gk.clone().format("x"),comparisonOptions:[{label:"1小时",labelEn:"1 hour",value:"3600000"},{label:"2小时",labelEn:"2 hours",value:"7200000"},{label:"1天",labelEn:"1 day",value:"86400000"},{label:"2天",labelEn:"2 days",value:"172800000"},{label:"7天",labelEn:"7 days",value:"604800000"}],threshold:void 0,legend:!1,precision:"origin",shared:!1,sharedSortDirection:"desc"},vk=["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"];function Ek(e){const t=[];return _.each(e,((e,n)=>{var r,i;const a=(null==(r=null==e?void 0:e.metric)?void 0:r.ident)||(null==(i=null==e?void 0:e.metric)?void 0:i.__name__),o=function(e,t,n=!1){const{comparison:r}=e;let i;if(n&&!r)i="rgb(67, 150, 30)";else if(86400===r)i="rgb(98, 127, 202)";else if(604800===r)i="rgb(238, 92, 90)";else{i=vk[t%vk.length]}return i}(e,n),s={id:n,name:a,tags:a,metricLabels:e.metric,data:(e.values||[]).map((e=>[1e3*e[0],Number(e[1])]))||[],lineWidth:2,color:o,oldColor:o,comparison:e.offset,legendTitleFormat:e.legendTitleFormat};t.push(s)})),t}var xk,bk;ee.arrayOf(ee.shape({ns:ee.string,metric:ee.string,counter:ee.string})),(bk=xk||(xk={})).Line="line",bk.StackArea="stackArea";const Ck="YYYY-MM-DD HH:mm:ss";function Sk(e){const{points:t,series:n,formatUnit:r,precision:i,chartType:a}=e,o=window.innerWidth/1.5;let s="";s+=function(e){const{points:t}=e,n=I(t[0].timestamp).format(Ck);return`<span style="color: #666">${n}</span><br/>`}(e);const l=1===t.length;return _.each(t,((e,t)=>{s+=function(e,t={},n={},r,i,a){const{legendTitleFormat:o}=n,{color:s,filledNull:l,serieOptions:c={},timestamp:u}=t,h=a===xk.StackArea?t[3]:t.value;let p="";c.comparison&&(p+=` offset ${c.comparison}`);const d=(null==c?void 0:c.metricLabels)||{},f=d.__name__||"",m=Object.keys(d).filter((e=>"__name__"!==e)),g=()=>{const e=m.map((e=>`<span>${e}=${d[e]}</span>`)),t=o?Tk(o,d):`${f} ${p} {${e}}`;return`<span style="color:${s}">● </span>\n      ${t}：<strong>${y(h)}${l?"(空值填补,仅限看图使用)":""}</strong>\n      <br/>`},y=e=>"short"===i?1024===r||1e3===r?e>1e3?((e,t=2,{withUnit:n=!0,withByte:r=!1,trimZero:i=!1,convertNum:a=1024}={withUnit:!0,withByte:!1,trimZero:!1,convertNum:2024})=>{const o=e?Number(e):0;let s,l="";return o<0?s=0:o<a?s=o.toFixed(t):o<a*a?(s=(o/a).toFixed(t),l="K"):o<a*a*a?(s=(o/a/a).toFixed(t),l="M"):o<a*a*a*a?(s=(o/a/a/a).toFixed(t),l="G"):o<a*a*a*a*a&&(s=(o/a/a/a/a).toFixed(t),l="T"),i&&(s=parseFloat(s)),n&&(s=`${s}${l}`),r&&(s=`${s}B`),s})(e,2,{convertNum:r}):e.toFixed(2):"humantime"===r?I.duration(e,"seconds").humanize():"":e,v=()=>{const e=m.map((e=>`<div><strong>${e}</strong>: ${d[e]}</div>`)),t=o?Tk(o,d):`${f} ${p}`;return`<span style="color:${s}">● </span>\n      ${t}: <strong>${y(h)}${l?"(空值填补,仅限看图使用)":""}</strong>\n      <div /><br />\n      <div><strong>Series:</strong></div>\n      ${f?`<div><strong>${f}</strong></div>`:""}\n      ${e.join("")}`};return e?v():g()}(l,e,e.serieOptions,r,i,a)})),`<div style="table-layout: fixed;max-width: ${o}px;word-wrap: break-word;white-space: normal;">${s}</div>`}function wk(e,t){const{threshold:n,yAxisMin:r,yAxisMax:i}=t,a=_.clone(e);return null!=n?a.plotLines=[{value:n,color:"red"}]:delete a.plotLines,t.yAxis&&void 0!==t.yAxis.plotLines&&null!==t.yAxis.plotLines?a.plotLines=t.yAxis.plotLines:delete a.plotLines,null!=r&&null!=i?(a.min=r,a.max=i):(delete a.min,delete a.max),a}function Tk(e,t){let n=(r=e,Array.from(r.matchAll(/{{([0-9a-zA-Z\._\-]+?)}}/g)).map((e=>e.length>0?e[1]:e[0])));var r,i=e;return n.forEach((e=>{i=i.replace(`{{${e}}}`,t[e]?t[e]:"")})),i}const kk={};class _k extends f.exports.Component{constructor(e){super(e),this.handleInputChange=e=>{this.setState({searchText:e.target.value})},this.handleSearch=()=>{const{searchText:e}=this.state;this.setState({filterDropdownVisible:!1,filterVal:e})},this.handleContextMenu=(e,t)=>{e.preventDefault(),this.setState({currentCounter:t,contextMenuVisiable:!0,contextMenuLeft:e.clientX,contextMenuTop:e.clientY})},this.handleClickCounter=e=>{const{selectedKeys:t,highlightedKeys:n}=this.state,r=_.clone(n);_.includes(r,e.id)?_.remove(r,(t=>t===e.id)):r.push(e.id),this.setState({highlightedKeys:r},(()=>{this.props.onSelectedChange(t,r)}))},this.state={searchText:"",filterVal:"",filterDropdownVisible:!1,contextMenuVisiable:!1,contextMenuTop:0,contextMenuLeft:0,selectedKeys:"normal",highlightedKeys:[]}}componentWillReceiveProps(e){Mk(this.props.series,e.series)||this.setState({selectedKeys:"normal",highlightedKeys:[]})}filterData(){const{series:e}=this.props,{filterVal:t}=this.state,n=new RegExp(t,"gi"),r=function(e=[]){const t=_.map(e,(e=>{const{id:t,metric:n,tags:r,data:i,comparison:a,metricLabels:o,legendTitleFormat:s}=e,{last:l,avg:c,max:u,min:h,sum:p}=function(e){let t=0,n=0,r=-1/0,i=1/0,a=0,o=0;if(!_.isArray(e))return{last:t,avg:n,max:r,min:i,sum:a};_.each(e,(e=>{const n=_.get(e,"[0]"),s=_.get(e,"[1]");_.isNumber(n)&&_.isNumber(s)&&(a+=s,r<s&&(r=s),i>s&&(i=s),t=s,o++)})),_.isNumber(a)&&(n=a/o);return{last:t,avg:n,max:r,min:i,sum:a}}(i);return{id:t,metric:n,tags:r,comparison:a,metricLabels:o,last:_.isNumber(l)?l.toFixed(3):null,avg:_.isNumber(c)?c.toFixed(3):null,max:_.isNumber(u)?u.toFixed(3):null,min:_.isNumber(h)?h.toFixed(3):null,sum:_.isNumber(p)?p.toFixed(3):null,color:e.color,legendTitleFormat:s}}));return _.orderBy(t,"counter")}(e);return _.filter(r,(e=>e.tags&&e.tags.match(n)||e.metricLabels&&JSON.stringify(e.metricLabels).match(n)))}render(){const{comparisonOptions:e,onSelectedChange:t,rowSelection:n,renderValue:r=(e=>e)}=this.props,{graphConfig:i}=this.props;if(!i)return null;const a=_.cloneDeep(_.get(i,"sortOrder",{})),{searchText:o,selectedKeys:c,highlightedKeys:u}=this.state,h=u,p=this.filterData(),f=p[0];let m=[{title:d.createElement("span",null," Series(",p.length,") "),dataIndex:"tags",width:240,filterDropdown:d.createElement("div",{className:"custom-filter-dropdown"},d.createElement(wt,{placeholder:"Input serie name",value:o,onChange:this.handleInputChange,onPressEnter:this.handleSearch}),d.createElement(Ct,{type:"primary",onClick:this.handleSearch},"Search")),ellipsis:!0,filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:e=>this.setState({filterDropdownVisible:e}),render:(e,t)=>{const{legendName:n,titleName:r}=function(e,t,n="zh"){const{comparison:r,legendTitleFormat:i}=e;let a,o="";const s=(null==e?void 0:e.metricLabels)||{},l=s.__name__,c=Object.keys(s).filter((e=>"__name__"!==e)).map((e=>`${e}=${s[e]}`));o=i?Tk(i,s):`${l||""} ${r?`offset ${r}`:""} {${c}}`;return a=d.createElement("div",null,d.createElement("div",null,l," ",r?`offset ${r}`:""),c.map(((e,t)=>d.createElement("div",{key:t},e)))),{legendName:o,titleName:a}}(t);return d.createElement(yt,{title:r,getPopupContainer:()=>document.body},d.createElement("span",{onClick:()=>this.handleClickCounter(t),onContextMenu:t=>this.handleContextMenu(t,e),style:{cursor:"pointer",opacity:h.length?_.includes(h,t.id)?1:.5:1}},d.createElement("span",{style:{color:t.color}},"● "),n))}},{title:"Max",dataIndex:"max",className:"alignRight",width:120,defaultSortOrder:"max"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.max-t.max},{title:"Min",dataIndex:"min",className:"alignRight",width:120,defaultSortOrder:"min"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.min-t.min},{title:"Avg",dataIndex:"avg",className:"alignRight",width:120,defaultSortOrder:"avg"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.avg-t.avg},{title:"Sum",dataIndex:"sum",className:"alignRight",width:120,defaultSortOrder:"sum"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.sum-t.sum},{title:"Last",dataIndex:"last",className:"alignRight",width:120,defaultSortOrder:"last"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.last-t.last}];"normal"===c&&_.map(p,(e=>e.id)),!1===_.get(f,"isSameMetric")&&m.unshift({title:"指标",dataIndex:"metric",width:60});let g=650;return this.props.columnsKey&&(m=_.filter(m,(e=>_.includes([...this.props.columnsKey,"metric","tags"],e.dataIndex))),g=150+100*this.props.columnsKey.length),d.createElement("div",{className:"graph-legend",style:l(s({},this.props.style),{height:"100%"})},d.createElement(Ft,{className:"auto-scroll-y",rowKey:({id:e,comparison:t})=>`${e}${t}`,size:"middle",rowSelection:!1,columns:m,dataSource:p,pagination:!1,scroll:{x:g,y:!0},showSorterTooltip:!1}))}}function Ok(e,t){return"normal"===t||_.includes(t,_.get(e,"id"))}function Ak(e,t,n){return t.length&&!_.includes(t,_.get(e,"id"))?de(n).lighten(.5).desaturate(.7).hex():n}function Ik(e,t,n,r){return _.includes(t,_.get(e,"id"))?n+r:r}function Mk(e,t){const n=_.map(e,(e=>e.id)),r=_.map(t,(e=>e.id));return _.isEqual(n,r)}Nt.Option;class Nk extends f.exports.Component{constructor(e){super(e),this.refresh=()=>{const{graphConfig:e}=this.props;if(e){const t=I(),n=Number(t.format("x"))-Number(e.end)+Number(e.start)+"",r=t.format("x");return{now:r,start:n,end:r}}return{}},this.handleComparisonChange=e=>{const{onChange:t,relativeTimeComparison:n,comparisonOptions:r}=this.props;this.setState({curComparison:e}),t(l(s({},this.refresh()),{comparison:e,relativeTimeComparison:n,comparisonOptions:r}))},this.state={customValue:void 0,customType:"hour",errorText:"",curComparison:[]}}render(){const{curComparison:e}=this.state,t=e=>{const t=this.state.curComparison.findIndex((t=>t===e.key));let n;if(-1===t)n=[...this.state.curComparison,e.key],this.setState({curComparison:n});else{let e=[...this.state.curComparison];e.splice(t,1),n=e,this.setState({curComparison:e})}const{onChange:r,relativeTimeComparison:i,comparisonOptions:a}=this.props;r(l(s({},this.refresh()),{comparison:n,relativeTimeComparison:i,comparisonOptions:a}))},n=d.createElement(vt,{onClick:t,selectedKeys:e},d.createElement(vt.Item,{key:"1d"},"1d"),d.createElement(vt.Item,{key:"7d"},"7d"));return d.createElement("div",{className:"graph-config-inner-comparison"},this.state.curComparison.map((e=>d.createElement(Mt,{key:e,closable:!0,onClose:n=>{t({key:e})}},e))),d.createElement(kt,{overlay:n},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(Z,null))))}}Nk.defaultProps={size:"small",comparison:[],relativeTimeComparison:!1,comparisonOptions:[],graphConfig:null,onChange:_.noop};class Pk extends f.exports.Component{constructor(e){super(e),this.handleAggrFuncChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curAggrFunc:e}),n("update",t.id,{changeType:"aggrFuncChange",comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:e,calcFunc:this.state.calcFunc,aggrGroups:this.state.curAggrGroups})},this.handleCalcFuncChange=e=>{const{data:t,onChange:n}=this.props;this.setState({calcFunc:e}),n("update",t.id,{comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:e,aggrGroups:this.state.curAggrGroups})},this.handleComparisonChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curComparisonValue:e}),n("update",t.id,{comparison:e.comparison,relativeTimeComparison:e.relativeTimeComparison,comparisonOptions:e.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:this.state.calcFunc,aggrGroups:this.state.curAggrGroups})},this.handleAggrGroupsChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curAggrGroups:e}),n("update",t.id,{comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:this.state.calcFunc,aggrGroups:e})},this.state={curAggrFunc:"avg",calcFunc:"",curAggrGroups:["ident"],curComparisonValue:{},aggrGroups:[]}}componentDidMount(){this.fetchAggrGroups()}componentDidUpdate(e){const t=(e.data.selectedHosts||[]).map((e=>e.ident)),n=(this.props.data.selectedHosts||[]).map((e=>e.ident));!_.isEqual(t,n)&&this.fetchAggrGroups()}fetchAggrGroups(){const{metric:e,selectedHosts:t}=this.props.data,n=t.map((e=>e.ident));var r;(r={start:Math.round(Number(this.props.data.start)/1e3),end:Math.round(Number(this.props.data.end)/1e3),match:[`${e}{ident=~"${n.join("|")}"}`]},ji("/api/n9e/prometheus/api/v1/labels",{method:Li.Get,params:r,paramsSerializer:function(e){return xi.stringify(e,{arrayFormat:"bracket"})}})).then((e=>{this.setState({aggrGroups:e.data})}))}render(){const{data:e,onChange:t}=this.props,{now:n,start:r,end:i,comparison:a}=e,o=d.createElement(vt,{onClick:e=>{this.handleAggrFuncChange(e.key)},selectedKeys:[this.state.curAggrFunc]},d.createElement(vt.Item,{key:"sum"},"sum"),d.createElement(vt.Item,{key:"avg"},"avg"),d.createElement(vt.Item,{key:"max"},"max"),d.createElement(vt.Item,{key:"min"},"min")),s=d.createElement(vt,{onClick:e=>this.handleCalcFuncChange("clear"===e.key?"":e.key),selectedKeys:[this.state.calcFunc]},d.createElement(vt.Item,{key:"rate_1m"},"rate_1m"),d.createElement(vt.Item,{key:"rate_5m"},"rate_5m"),d.createElement(vt.Item,{key:"increase_1m"},"increase_1m"),d.createElement(vt.Item,{key:"increase_5m"},"increase_5m"),d.createElement(vt.Divider,null),d.createElement(vt.Item,{key:"clear"},"clear")),l=d.createElement(vt,{onClick:e=>{const t=this.state.curAggrGroups.findIndex((t=>t===e.key));let n;if(-1===t)n=[...this.state.curAggrGroups,e.key],this.setState({curAggrGroups:n});else{let e=[...this.state.curAggrGroups];e.splice(t,1),n=e,this.setState({curAggrGroups:e})}this.handleAggrGroupsChange(n)},selectedKeys:this.state.curAggrGroups},this.state.aggrGroups.filter((e=>"__name__"!==e)).map((e=>d.createElement(vt.Item,{key:e},e)))),c=e=>{let t=[...this.state.curAggrGroups],n=t.findIndex((t=>t===e));n>=0&&t.splice(n,1),this.handleAggrGroupsChange(t)};return d.createElement("div",{className:"graph-config-inner"},d.createElement("div",{className:"graph-config-inner-item"},"计算函数 ：",d.createElement(kt,{overlay:s},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.calcFunc," ",d.createElement(N,null)))),d.createElement("div",{className:"graph-config-inner-item"},"环比：",d.createElement(Nk,{comparison:a,relativeTimeComparison:e.relativeTimeComparison,comparisonOptions:e.comparisonOptions,graphConfig:e,onChange:this.handleComparisonChange}),d.createElement("input",{style:{position:"fixed",left:-1e4},id:`hiddenInput${e.id}`})),d.createElement("div",{className:"graph-config-inner-item"},"聚合函数 ：",d.createElement(kt,{overlay:o},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.curAggrFunc," ",d.createElement(N,null)))),this.state.curAggrFunc?d.createElement("div",{className:"graph-config-inner-item"},d.createElement("span",null,"聚合维度 ："),this.state.curAggrGroups.map((e=>d.createElement(Mt,{key:e,closable:!0,onClose:t=>{c(e)}},e))),d.createElement(kt,{overlay:l,overlayStyle:{maxHeight:400,overflow:"auto"}},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(Z,null)))):null)}}Pk.defaultProps={};let Fk=null;let Lk=null;function Rk(e,t={}){let n=document.createElement(e);return Object.keys(t).forEach((e=>{n[e]=t[e]})),n}function Dk(e,t,n){return(window.getComputedStyle(e,n||null)||{display:"none"})[t]}function Bk(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;for(;t!==document;){if("none"===Dk(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}let $k=0,zk=null;function Hk(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=jk.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:n}=e,r=new ResizeObserver((()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==n))&&Vk(e)})),{detached:i,rendered:a}=Bk(e);e.__resize_observer_triggered__=!1===i&&!1===a,e.__resize_observer__=r,r.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){Vk(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if($k||(n='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(r=document.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(r),zk=r),function(e){let t=Dk(e,"position");t&&"static"!==t||(e.style.position="relative");e.__resize_old_position__=t,e.__resize_last__={};let n=Rk("div",{className:"resize-triggers"}),r=Rk("div",{className:"resize-expand-trigger"}),i=Rk("div"),a=Rk("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:a},Yk(e),e.addEventListener("scroll",Gk,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=Bk(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}var n,r;e.__resize_listeners__.push(t),$k++}function jk(){let{rendered:e,detached:t}=Bk(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(Yk(this),this.addEventListener("scroll",Gk,!0)),this.__resize_rendered__=e,Vk(this))}function Gk(){var e,t;Yk(this),this.__resize_raf__&&(e=this.__resize_raf__,Lk||(Lk=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),Lk(e)),this.__resize_raf__=(t=()=>{let e=function(e){let{width:t,height:n}=e.__resize_last__,{offsetWidth:r,offsetHeight:i}=e;return r!==t||i!==n?{width:r,height:i}:null}(this);e&&(this.__resize_last__=e,Vk(this))},Fk||(Fk=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),Fk(t))}function Vk(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((t=>{t.call(e,e)}))}function Yk(e){let{expand:t,expandChild:n,contract:r}=e.__resize_triggers__,{scrollWidth:i,scrollHeight:a}=r,{offsetWidth:o,offsetHeight:s,scrollWidth:l,scrollHeight:c}=t;r.scrollLeft=i,r.scrollTop=a,n.style.width=o+1+"px",n.style.height=s+1+"px",t.scrollLeft=l,t.scrollTop=c}function Uk(e,t){return Math.sqrt(Math.pow(t-e,2))}function qk(e,t){const n=e.length;return t<n?e[t]:qk(e,t-n)}function Wk(e,t){return"X"===t?1e3*e:e}function Xk(e,t){const n=e.getBoundingClientRect(),r=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY;return{offsetX:r-n.left,offsetY:i-n.top,clientX:r,clientY:i}}class Kk{constructor(e,t){this.options=e,this.ctx=t}init(){const{chart:{width:e},timestamp:t,xmin:n,xmax:r}=this.options,i=fe().range([0,e]);return i.domain([Wk(r,t),Wk(n,t)]),i}draw(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i,time:a}=n,o=e.ticks(Math.floor(r.width/90)),s=r.height-i.tickpadding-i.labels.fontSize;t.beginPath(),o.forEach((n=>{const r=e(n);r&&(t.moveTo(r,s),t.lineTo(r,s-i.tickLength))})),t.lineWidth=1,t.strokeStyle=i.tickColor,t.stroke(),t.beginPath(),t.moveTo(0,s-i.tickLength),t.lineTo(r.width,s-i.tickLength),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke(),t.textAlign="center",t.textBaseline="bottom",t.fillStyle=i.labels.color,t.font=`${i.labels.fontSize}px Palantino`,o.forEach((n=>{let i="%H:%M";0!==n.getSeconds()&&(i="%H:%M:%S"),0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&(i="%m-%d");let o=n;if(a&&a.timezoneOffset){const e=n.getTimezoneOffset(),t=n.getTime()+60*e*1e3+60*a.timezoneOffset*1e3;o=new Date(t)}e(n)&&t.fillText(me(i)(o),e(n),r.height)}))}drawPlotLines(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i,xAxis:{plotLines:a}}=n,o=r.height-i.tickpadding-i.labels.fontSize;Array.isArray(a)&&a.forEach((n=>{const r=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(r,0),t.lineTo(r,o-i.tickLength),t.strokeStyle=n.color,t.stroke(),t.setLineDash([])}))}}class Qk{constructor(e,t){this.options=e,this.ctx=t,this.tickLength=Math.floor(e.chart.height/50),this.ticks=[]}init(){const{chart:e,xAxis:t}=this.options,n=ge().range([e.height-(t.labels.fontSize+t.tickpadding+t.tickLength),20]);return this.setDomain(n,this.options),n}getRealData(e){const{yAxis:{plotLines:t},ykey:n,fillNull:r}=this.options;return Array.isArray(e)?(Array.isArray(t)&&t.forEach((t=>{"number"==typeof t.value&&e.push({[n]:t.value})})),"number"==typeof r&&e.push({[n]:r}),e):[]}getPlotLinesMaxMin(){const{yAxis:{plotLines:e}}=this.options;let t,n;return Array.isArray(e)&&e.forEach((e=>{(!t||e.value>t)&&(t=e.value),(!n||e.value<n)&&(n=e.value)})),{max:t,min:n}}setDomain(e,{ymin:t,ymax:n}){const{max:r,min:i}=this.getPlotLinesMaxMin();let a=this.tickLength;if(t===n){const e=(n-t)/(this.tickLength-1),r=e/2||n||1;a=0===e?1:this.tickLength,t-=r,n+=r}if(t>n){const e=t;t=n,n=e}void 0!==i&&i<t&&(t=i),void 0!==r&&r>n&&(n=r),this.options.chartType===xk.StackArea&&(t=0),e.domain([t,n]),e.nice(a),this.ticks=e.ticks(a)}draw(e){const{ctx:t,options:n}=this,{yAxis:r}=n;t.textAlign="left",t.textBaseline="bottom",t.shadowColor=r.labels.shadowColor,t.shadowBlur=1,t.lineWidth=1,t.fillStyle=r.labels.color,t.font=`${r.labels.fontSize}px Palantino`,this.ticks.forEach((n=>{let r=String(n);if(n>=1e3){r=ye(".5s")(n);const e=/[kMGTPEZY]$/;if(e.test(r)){const t=r[r.length-1];r=r.replace(e,""),r=parseFloat(r)+t}}const i=e(n);t.strokeText(r,0,i),t.fillText(r,0,i)}))}drawGridLine(e){const{ctx:t,options:n}=this,{chart:r,yAxis:i}=n;t.beginPath(),this.ticks.forEach((n=>{const i=e(n);t.moveTo(0,i),t.lineTo(r.width,i)})),t.strokeStyle=i.gridLineColor,t.stroke()}drawPlotLines(e){const{ctx:t,options:n}=this,{chart:r,yAxis:i,yAxis:{plotLines:a}}=n;Array.isArray(a)&&a.forEach((n=>{const a=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(0,a),t.lineTo(r.width,a),t.strokeStyle=n.color,t.stroke(),t.setLineDash([]),t.textAlign="right",t.textBaseline="top",t.shadowColor="#fff",t.shadowBlur=1,t.lineWidth=1,t.fillStyle=n.color,t.font=`${i.labels.fontSize}px Palantino`,t.strokeText(String(n.value),r.width-10,a),t.fillText(String(n.value),r.width-10,a)}))}}const Zk=new function(){return new Worker("/assets/worker.f0706a63.js",{type:"module"})};class Jk{constructor(e,t,n,r){this.options=e,this.ctx=t,this.flag=!1,this.init(n,r),this.isMouserover=!1}init(e,t){const{chart:{id:n}}=this.options,r=document.createElement("div");r.id=`${n}-tooltip`,r.className="ts-graph-tooltip",document.getElementById(r.id)||document.body.append(r)}clear(){const{ratio:e,chart:{id:t,containerWidth:n,containerHeight:r}}=this.options,i=document.getElementById(`${t}-tooltip`);this.isMouserover=!1,this.ctx.save(),this.ctx.setTransform(1*e,0,0,1*e,0,0),this.ctx.clearRect(0,0,n,r),this.ctx.restore(),i.style.top="-99999px",i.lastChild&&i.removeChild(i.lastChild)}getNearestPoints(e,t,n,r){const{series:i=[],chart:{id:a,colors:o},tooltip:{shared:c},xkey:u,ykey:h,y0key:p,timestamp:d,fillNull:f}=this.options,m=t.invert(e.offsetX);let g=[];const y={x:m,xkey:u,ykey:h,y0key:p,timestamp:d,fillNull:f};this.flag?(y.id=a,y.flag=this.flag,Zk.postMessage(y)):(y.id=a,y.str=JSON.stringify(i),y.flag=this.flag,Zk.postMessage(y),this.flag=!0),Zk.onmessage=i=>{if(!1===this.isMouserover)return;"[object Array]"===Object.prototype.toString.call(i.data)&&(g=i.data.map((e=>l(s({},e),{x:t(e.timestamp),y:n(e.value),color:e.color||qk(o,e.serieIndex)}))));const a=q.exports.groupBy(g,"x");if(q.exports.keys(a).length>1){let t=Number.POSITIVE_INFINITY;for(const n in a)if(Object.prototype.hasOwnProperty.call(a,n)){const r=Uk(e.offsetX,Number(n));r<t&&(t=r,g=a[n])}}if(!c){let t=Number.POSITIVE_INFINITY;g.forEach((n=>{const r=(i={x:e.offsetX,y:e.offsetY},a=n,Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)));var i,a;r<t&&(t=r,g=[n])}))}r(g)}}draw(e,t,n,r){this.isMouserover=!0,this.getNearestPoints(e,t,n,(t=>{this.clear(),t.length&&(this.drawCrosshair(t[0].x),this.drawSymbol(t),this.drawModal(t,e)),r&&"[object Function]"===Object.prototype.toString.call(r)&&r(t)}))}drawModal(e,t){const{chart:{id:n,renderTo:r},tooltip:i,time:a}=this.options,o=r.offsetWidth;let s=r.offsetHeight;const l=document.getElementById(`${n}-tooltip`),c=document.createElement("div"),u=e;s=window.innerHeight/1.5;const h=(s-18-100)/15;let p=!1;if(i.sharedSortDirection&&(e=q.exports.orderBy(e,(e=>e.value),i.sharedSortDirection)),e.length>h&&(e=e.slice(0,h),p=!0),c.className="ts-graph-tooltip-content",l.appendChild(c),"[object Function]"===Object.prototype.toString.call(i.formatter))c.innerHTML=i.formatter([...e],[...u]);else{const t=e[0],n=document.createDocumentFragment(),r=document.createElement("ul"),o=document.createElement("li");let s=new Date(t.timestamp);if(a&&a.timezoneOffset){const e=s.getTimezoneOffset(),t=s.getTime()+60*e*1e3+60*a.timezoneOffset*1e3;s=new Date(t)}const l=document.createTextNode(me("%Y-%m-%d %H:%M:%S")(s));if(o.appendChild(l),o.style.color="#666",r.style.maxWidth=window.innerWidth/1.5+"px",r.appendChild(o),n.appendChild(r),e.forEach((({color:e,name:t,value:n,filledNull:a})=>{const o=document.createElement("li");if(e){const t=document.createElement("span"),n=document.createTextNode("● ");t.style.color=e,t.appendChild(n),o.appendChild(t)}if(t){const e=document.createTextNode(`${t}: `);o.appendChild(e)}if(q.exports.isNumber(n)){const e=document.createElement("strong");let t;if("origin"===i.precision)t=n;else if("short"===i.precision){t=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(ye(".5s")(n))}else t=i.precision>0?ye(",."+i.precision+"f")(n):ye(",.3f")(n);t+=a?"(空值填补,仅限看图使用)":"";const r=document.createTextNode(t);e.appendChild(r),o.appendChild(e)}r.appendChild(o)})),p){const e=document.createElement("li"),t=document.createTextNode("......");e.appendChild(t),r.appendChild(e)}c.appendChild(n)}const d=c.offsetWidth,f=c.offsetHeight;l.style.left=t.clientX-d-20+"px",l.style.top=`${t.clientY+20}px`,t.clientX-d-20<0&&(l.style.left=`${t.clientX+20}px`,t.clientX+20+d>o&&(l.style.left="0px")),t.clientY+20+f>s&&(t.clientY-f-20<0?l.style.top="0px":l.style.top=t.clientY-f-20+"px"),l.style.zIndex="9999",l.style.visibility="visible"}drawSymbol(e=[]){const{ctx:t}=this;e.forEach((e=>{const{x:n,y:r,color:i}=e;t.beginPath(),t.arc(n,r,5,0,360,!1),t.lineWidth=1,t.fillStyle=i,t.fill(),t.beginPath(),t.arc(n,r,3,0,360,!1),t.lineWidth=1,t.fillStyle="white",t.fill()}))}drawCrosshair(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i}=n,a=r.height-i.tickpadding-i.labels.fontSize-i.tickLength;t.beginPath(),t.moveTo(e,0),t.lineTo(e,a),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke()}destroy(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-tooltip`);t&&t.parentNode&&t.parentNode.removeChild(t)}}class e_{constructor(e,t){this.options=e,this.ctx=t}draw(e,t){const{series:n,chart:{colors:r},xkey:i,ykey:a,timestamp:o,fillNull:s,notDisplayedSeries:l}=this.options,{ctx:c}=this,u=ve().x((t=>{const n="X"===o?1e3*t[i]:t[i];return e(new Date(n))})).y((e=>{const n=e[a];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).defined((e=>"number"==typeof e[a]||"number"==typeof s)).context(c);q.exports.sortBy(n,"zIndex").forEach(((e,t)=>{if(!1===e.visible)return;if(l.indexOf(e.name)>-1)return;const n=e.color||qk(r,t);e.color=n,c.beginPath(),c.lineTo(0,0),u(e.data||[]),c.lineJoin="round",c.lineWidth=this.options.line.width,c.strokeStyle=n,c.lineCap="round",c.setLineDash(e.lineDash||[]),c.stroke(),c.closePath()}))}}class t_{constructor(e,t){this.options=e,this.ctx=t}draw(e,t){const{series:n,chart:{colors:r},xkey:i,ykey:a,timestamp:o,fillNull:s,notDisplayedSeries:l}=this.options,{ctx:c}=this,u=Ee().x((t=>{const n="X"===o?1e3*t[i]:t[i];return e(new Date(n))})).y0((e=>{const n=e[2];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).y1((e=>{const n=e[1];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).defined((e=>"number"==typeof e[a]||"number"==typeof s)).context(c);q.exports.sortBy(n,"zIndex").reverse().forEach(((e,t)=>{if(!1===e.visible)return;if(l.indexOf(e.name)>-1)return;const n=e.color||qk(r,t);e.color=n,c.beginPath(),c.lineTo(0,0),u(e.data||[]),c.lineJoin="round",c.lineWidth=this.options.line.width,c.strokeStyle=n,c.fillStyle=n+"50",c.lineCap="round",c.stroke(),c.fill(),c.closePath()}))}}class n_{constructor(e,t,n,r){this.options=e,this.init(n,r),this.reset=t}init(e,t){const{chart:{id:n,containerHeight:r}}=this.options,i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("a"),s=document.createTextNode("Reset zoom");i.id=`${n}-zoom`,i.className="ts-graph-zoom",a.id=`${n}-zoom-marker`,a.className="ts-graph-zoom-marker",a.style.height=`${r}px`,o.id=`${n}-zoom-resetBtn`,o.className="ts-graph-zoom-resetBtn",o.appendChild(s),i.appendChild(a),i.appendChild(o),e.insertBefore(i,t),this.onReset()}onReset(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).addEventListener("click",(e=>{e.stopPropagation(),this.reset(),this.clearResetBtn()}))}onZoom(e,t,n){const{chart:{width:r}}=this.options,i=t.offsetX-e.offsetX;if(i){const a=r/Math.abs(i),o=t.offsetX>e.offsetX?e.offsetX:t.offsetX,s=xe.translate(-o*a,0).scale(a);this.drawResetBtn(),n(s)}}clearMarker(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-zoom-marker`);t.style.display="none",t.style.width="0px",t.style.left="unset",t.style.right="unset"}drawMarker(e,t){const{chart:{marginLeft:n}}=this.options,r=e.offsetX,i=t.offsetX,{chart:{id:a,containerWidth:o}}=this.options,s=document.getElementById(`${a}-zoom-marker`);s.style.display="block",s.style.top="0px",r<i?(s.style.right="unset",s.style.left=`${r+n}px`,s.style.width=i-r+"px"):(s.style.left="unset",s.style.right=o-r-n+"px",s.style.width=r-i+"px")}clearResetBtn(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).style.display="none"}drawResetBtn(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).style.display="block"}}function r_(e){let t=-1,n=e;for(;n;){if(!("previousSibling"in n)){t=-1;break}n=n.previousSibling,t+=1}return t}class i_{constructor(e,t,n,r){this.handelLegendItemClick=e=>{const t=e.currentTarget;let n=e.target;for(;n!==t;){if(n&&"ts-graph-legend-item"===n.className){const{series:e}=this.options,t=r_(n);this.onLegendItemClick(e[t].name)}n.parentNode&&(n=n.parentNode)}},this.options=e,this.init(n,r),this.onLegendItemClick=t}init(e,t){const{chart:{id:n}}=this.options,r=document.createElement("div");r.id=`${n}-legend`,r.className="ts-graph-legend",document.getElementById(r.id)||e.insertBefore(r,t),this.initEvent()}initEvent(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-legend`);t.removeEventListener("click",this.handelLegendItemClick),t.addEventListener("click",this.handelLegendItemClick)}updateOptions(e){this.options=e}draw(){const{chart:{id:e},series:t,legend:n}=this.options,r=document.getElementById(`${e}-legend`);if(n.enabled&&"[object Array]"===Object.prototype.toString.call(t)){r.innerHTML="";const e=document.createDocumentFragment();t.forEach((t=>{const n=document.createElement("span"),r=document.createElement("span"),i=document.createElement("span"),a=document.createElement("span"),o=document.createTextNode(t.name);n.className="ts-graph-legend-item",r.className="ts-graph-legend-item-symbol",i.className="ts-graph-legend-item-symbol-line",i.style.borderColor=t.color,a.className="ts-graph-legend-item-symbol-point",a.style.backgroundColor=t.color,r.appendChild(i),r.appendChild(a),n.appendChild(r),n.appendChild(o),e.appendChild(n)})),r.appendChild(e)}}}class a_{constructor(e){this.getZoomedSeries=()=>{const{chart:{renderTo:e},series:t,timestamp:n,xkey:r}=this.options,i=e.offsetWidth;return t.map((e=>{if("[object Array]"===Object.prototype.toString.call(e.data)){const t=e.data.filter((e=>{const t="X"===n?1e3*e[r]:e[r],a=this.xScales(new Date(t));return a>=0&&a<=i}));return l(s({},e),{data:t})}return e}))},this.handleResize=()=>{const{chart:e}=this.options,t=e.renderTo.offsetWidth,n=e.renderTo.offsetHeight;this.options.chart.width=t-e.marginLeft-e.marginRight,this.options.chart.height=n-e.marginTop-e.marginBottom,this.options.chart.containerWidth=t,this.options.chart.containerHeight=n,this.container.style.width=`${t}px`,this.container.style.height=`${n}px`,this.retinaScaled(this.backCanvas,"back"),this.retinaScaled(this.frontCanvas,"front"),this.retinaScaled(this.eventCanvas,"event"),this.initScales(),this.draw()},this.handleZoom=e=>{const{ykey:t,yAxis:n}=this.options;let{series:r}=this.options;if(e?(this.transform=e,this.xScales=e.rescaleX(this.xScales),r=this.getZoomedSeries()):(this.transform=void 0,this.xScales=this.xAxis.init()),Array.isArray(r)){let e=n.min||-1/0,i=n.max||1/0;for(const n of r){const r=Array.isArray(n.data)?n.data:[];let a;for(a=0;a<r.length;a++){const n=r[a][t];null!==n&&(e<n&&(e=n),i>n&&(i=n))}}this.yAxis.setDomain(this.yScales,{ymin:e,ymax:i})}this.draw(),this.options.onZoom(this.getZoomedSeries)},this.handleLegendItemClick=e=>{const{notDisplayedSeries:t}=this.options;-1===t.indexOf(e)?t.push(e):(this.options.notDisplayedSeries=t.filter((t=>t!==e)),this.update(this.options))};const t={chartType:xk.Line,ratio:window.devicePixelRatio||1,xkey:0,ykey:1,y0key:2,timestamp:"x",chart:{id:q.exports.uniqueId("ts-graph-"),colors:["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"],width:e.chart.renderTo.offsetWidth,height:e.chart.renderTo.offsetHeight||350,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10},xAxis:{lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",labels:{color:"#999",fontSize:11}},yAxis:{lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",gridLineColor:"#efefef",labels:{color:"#999",shadowColor:"#fff",fontSize:11,style:{fontSize:11,color:"#999"}}},line:{width:2},tooltip:{shared:!0},baseSeries:[],series:[],legend:{align:"center",verticalAlign:"top",enabled:!1},fillNull:void 0,onClick:()=>{},onZoom:()=>{}},n=q.exports.merge({},t,e);void 0===e.chart.marginTop&&n.legend.enabled&&(n.chart.marginTop=20),this.handleResize=q.exports.debounce(this.handleResize,300),this.init(n)}init(e){const{chart:t}=e;this.baseSeries=e.series,this.options=e,this.options.notDisplayedSeries=[],this.options.chart.containerWidth=t.width,this.options.chart.containerHeight=t.height,this.options.chart.width=t.width-t.marginLeft-t.marginRight,this.options.chart.height=t.height-t.marginTop-t.marginBottom,this.options.chartType===xk.Line?this.initLine():this.initStackArea(),this.createContainer(),this.createCanvas(),this.initEvent(),this.initLegend(),this.initTooltip(),this.initZoom(),this.initSeries(),this.initScales(),this.draw()}clearRect(e){const{chart:{containerWidth:t,containerHeight:n}}=this.options;e.clearRect(0,0,t,n)}draw(){this.clearRect(this.backContext),this.yAxis.drawGridLine(this.yScales),this.chartContent.draw(this.xScales,this.yScales),this.xAxis.draw(this.xScales),this.yAxis.draw(this.yScales),this.xAxis.drawPlotLines(this.xScales),this.yAxis.drawPlotLines(this.yScales),this.legend.draw()}update(e){const t=q.exports.assign({},this.options,e);e.series&&(t.series=e.series),this.options=t,this.initSeries(),this.options.chartType===xk.Line?this.initLine():this.initStackArea(),this.initTooltip(),this.initScales(),this.legend.updateOptions(t),this.draw()}getSeries(){return[...this.options.series]}initEvent(){let e,t=!1,n={},r=!1;const i=this,a=q.exports.debounce((e=>{r&&(i.tooltip.draw(e,i.xScales,i.yScales),t&&i.zoom.drawMarker(n,e))}),10),o=q.exports.throttle((()=>{i.tooltip.clear()}),10);be(this.eventCanvas).on("mousemove",(function(){r=!0,a(Ce)})).on("mouseleave",(function(){e=Ce,r=!1,o()})).on("mousedown",(function(){t=!0,n=Ce})).on("mouseup",(function(){Ce.stopPropagation();const e=Ce;n&&n.offsetX!==e.offsetX?(i.zoom.clearMarker(),i.zoom.onZoom(n,e,(e=>{i.handleZoom(e)}))):i.options.onClick(Ce),t=!1,n={}})).on("touchmove",(function(){const e=Xk(i.eventCanvas,Ce);i.tooltip.draw(e,i.xScales,i.yScales),t&&i.zoom.drawMarker(n,e)})).on("touchend",(function(){e=Xk(i.eventCanvas,Ce),r=!1,o()})),window.addEventListener("mouseup",(()=>{if(!q.exports.isEmpty(n)){const r=e;t=!1,i.zoom.clearMarker(),i.zoom.onZoom(n,r,(e=>{i.handleZoom(e)})),n={}}})),Hk(this.options.chart.renderTo,this.handleResize)}retinaScaled(e,t){const{chart:n,ratio:r}=this.options,i=e.getContext("2d"),a="front"===t?n.containerWidth:n.width,o="front"===t?n.containerHeight:n.height,s="front"===t?"0px":`${n.marginLeft}px`,l="front"===t?"0px":`${n.marginTop}px`;e.width=a*r,e.height=o*r,e.style.width=`${a}px`,e.style.height=`${o}px`,e.style.position="absolute",e.style.left=s,e.style.top=l,"front"===t&&i.translate(n.marginLeft*r,n.marginTop*r),i.scale(r,r)}createContainer(){const{chart:e}=this.options,t=document.createElement("div");t.style.position="relative",t.style.width=`${e.containerWidth}px`,t.style.height=`${e.containerHeight}px`,t.style.overflow="hidden",e.renderTo.appendChild(t),this.container=t}createCanvas(){const{chart:{id:e}}=this.options;function t(t){const n=document.createElement("canvas"),r=n.getContext("2d");n.setAttribute("id",`${e}-${t}Canvas`),this.container.appendChild(n),this[`${t}Canvas`]=n,this[`${t}Context`]=r,this.retinaScaled(n,t)}t.call(this,"back"),t.call(this,"front"),t.call(this,"event")}initSeries(){const{chartType:e,fillNull:t,series:n,xkey:r,ykey:i,y0key:a,yAxis:o}=this.options;let c=-1/0,u=1/0,h=o.min,p=o.max;if(Array.isArray(n)){const o=Number(a),d=[],f=Object.values(n),m=f.map((e=>JSON.parse(JSON.stringify(e.data))));m.forEach(((n,a)=>{const g=[...Array.isArray(n)?n:[]],y=[];let v,E=!1;for(v=0;v<g.length;v++){const n=g[v];if(e===xk.StackArea)if(0===a)n[o]=0,n[o+1]?n[i]=n[o+1]:n[o+1]=n[i];else{let e=0,t=a;for(;t>0;){if(m[t-1]){const a=m[t-1].find((e=>e[r]===n[0]));if(a){e=a[i];break}}t--}n[o]=e,n[o+1]||(n[o+1]=n[i]),n[i]=e+n[o+1]}const s=n[r],l=n[i];void 0===t?0===v||v===g.length-1||v>0&&v<g.length-1&&"number"==typeof l?(y.push(n),E=!0):E&&(y.push(n),E=!1):y.push(n),c<s&&(c=s),u>s&&(u=s),"number"==typeof l?(("number"!=typeof h||l<h)&&(h=l),("number"!=typeof p||l>p)&&(p=l)):"number"==typeof t&&(t<h&&(h=t),t>p&&(p=t))}d.push(l(s({},f[a]),{data:y}))})),this.baseSeries=d,this.options.xmin=c,this.options.xmax=u,this.options.ymin=h,this.options.ymax=p}}initLine(){this.chartContent=new e_(Object.assign(this.options,{series:this.baseSeries}),this.backContext)}initStackArea(){this.chartContent=new t_(Object.assign(this.options,{series:this.baseSeries}),this.backContext)}initTooltip(){this.tooltip=new Jk(this.options,this.frontContext,this.container,this.eventCanvas)}initZoom(){this.zoom=new n_(this.options,this.handleZoom,this.container,this.eventCanvas)}initLegend(){this.legend=new i_(this.options,this.handleLegendItemClick,this.container,this.eventCanvas)}initScales(){const e=new Kk(this.options,this.backContext),t=new Qk(this.options,this.backContext);this.xAxis=e;let n=e.init();this.transform&&(n=this.transform.rescaleX(n)),this.xScales=n,this.yAxis=t,this.yScales=t.init()}destroy(){this.tooltip.destroy(),be(this.eventCanvas).on("mousemove",null).on("mouseleave",null).on("mousedown",null).on("mouseup",null).on("touchmove",null),be(this.container).remove(),function(e,t){let n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",Gk),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--$k&&zk&&zk.parentNode.removeChild(zk)}}(this.options.chart.renderTo,this.handleResize)}}class o_ extends f.exports.Component{componentDidMount(){const e={chartType:this.props.graphConfig.chartType||xk.Line,timestamp:"x",chart:{height:this.props.height?this.props.height:void 0,renderTo:this.graphWrapEle},xAxis:this.props.graphConfig.xAxis,yAxis:wk({},this.props.graphConfig),tooltip:this.genChartTooltipOptions(this.props),series:this.props.series,legend:{enabled:!1}};this.chart=new a_(e)}componentWillReceiveProps(e){if(this.chart){const t={yAxis:wk(this.chart.options.yAxis,e.graphConfig),tooltip:this.genChartTooltipOptions(e),series:e.series,chartType:e.graphConfig.chartType||xk.Line};this.chart.update(t)}}genChartTooltipOptions(e){const t=1024===e.graphConfig.formatUnit&&"short"===e.graphConfig.precision;let n={xAxis:e.graphConfig.xAxis,shared:e.graphConfig.shared,sharedSortDirection:e.graphConfig.sharedSortDirection,formatter:t=>Sk({formatUnit:e.graphConfig.formatUnit,precision:e.graphConfig.precision,series:this.props.series,points:t,chartWidth:this.graphWrapEle.offsetWidth-40,chartType:e.graphConfig.chartType})};return t&&Object.assign(n,{precision:e.graphConfig.precision}),n}render(){return d.createElement("div",{style:s({},this.props.style),ref:e=>{this.graphWrapEle=e},className:"chart-content"})}}function s_(e){return!!(e&&e.start&&e.end)}const l_=(e,t="s")=>{const{start:n,end:r}=s_(e)?e:((e,t="s")=>{const{num:n,unit:r}=e;let i="s"===t?I().unix():I().valueOf();return{start:"s"===t?I().subtract(n,r).unix():I().subtract(n,r).valueOf(),end:i}})(e,t);return{start:n,end:r}};function c_(e){const{t:t}=Ur(),n=[{num:5,unit:"minutes",description:t("minute")},{num:15,unit:"minutes",description:t("minutes")},{num:30,unit:"minutes",description:t("minutes")},{num:1,unit:"hour",description:t("hour")},{num:2,unit:"hours",description:t("hours")},{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:1,unit:"week",description:t("周")},{num:1,unit:"month",description:t("月")},{num:1,unit:"quarter",description:t("季度")}],{onChange:r,value:i,unit:a="s",showRight:o=!0,placement:s="bottom",leftList:l=n,nullable:c=!1}=e,[u,h]=f.exports.useState(!1),[p,m]=f.exports.useState(I()),[y,v]=f.exports.useState(I()),[E,x]=f.exports.useState(-1),[b,C]=f.exports.useState("选择时间"),S=f.exports.useRef(!1);f.exports.useEffect((()=>{if(i)if(s_(i))i.start>0&&i.end>0&&T(i);else{const e=l.findIndex((({num:e,unit:t})=>e===(null==i?void 0:i.num)&&t===i.unit));x(-1===e?0:e),k(l[e])}else if(!c){const e=localStorage.getItem("relativeDateIndex")?Number(localStorage.getItem("relativeDateIndex")):3;x(e),k(l[e])}}),[JSON.stringify(i)]);const w=(e,n)=>{if(s_(e)){const{start:t,end:r}=e;return I("s"===n?1e3*t:t).format("YYYY.MM.DD HH:mm:ss")+" 至 "+I("s"===n?1e3*r:r).format("YYYY.MM.DD HH:mm:ss")}{const{num:n,description:r}=e;return`${t("最近")} ${n} ${r}`}},T=e=>{const{start:t,end:n}=e;m(I("s"===a?1e3*t:t)),v(I("s"===a?1e3*n:n)),C(w(e,a))};const k=e=>{_.isEqual(_.omit(i,"refreshFlag"),_.omit(e,"refreshFlag"))||r&&r(e),C(e?w(e,a):"选择时间")},O=d.createElement("div",{className:"time-range-picker-wrapper"},d.createElement("div",{className:"time-range-picker-left"},l.map((({num:e,unit:n,description:r},i)=>d.createElement(Ct,{key:i,type:"link",onClick:()=>(e=>{x(e),localStorage.setItem("relativeDateIndex",e),k(l[e]),h(!1)})(i),className:i===E?"active":""},t("最近"),d.createElement("span",{className:"num"},e),r)))),o&&d.createElement("div",{className:"time-range-picker-right"},d.createElement("p",{className:"title"},t("自定义开始时间")),d.createElement(Xt,{showTime:!0,onChange:(e,t)=>{m(e)},value:p,disabledDate:function(e){return e&&e>I().endOf("seconds")},onOpenChange:e=>{S.current=e}}),d.createElement("p",{className:"title"},t("自定义结束时间")),d.createElement(Xt,{showTime:!0,onChange:(e,t)=>{v(e)},value:y,disabledDate:function(e){return e&&e>I().endOf("seconds")},onOpenChange:e=>{S.current=e}}),d.createElement("div",{className:"footer"},d.createElement(Ct,{onClick:()=>h(!1)},t("取消")),d.createElement(Ct,{type:"primary",onClick:()=>{h(!1),x(-1),localStorage.setItem("relativeDateIndex",""),k({start:"s"===a?p.unix():p.valueOf(),end:"s"===a?y.unix():y.valueOf()})},disabled:!p||!y||p.endOf("seconds")>=y.endOf("seconds")},t("确定")))));return d.createElement(Dt,{trigger:"click",placement:s,content:O,overlayClassName:"time-range-picker",visible:u,getPopupContainer:()=>document.body,onVisibleChange:e=>(e||!S.current)&&h(e)},d.createElement(Ct,{className:g({"time-range-picker-target-nullable":c})},b," ",d.createElement(H,null),c&&d.createElement(Se,{onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),k(void 0)}})))}const u_={1024:"Ki, Mi, Gi by 1024",1e3:"Ki, Mi, Gi by 1000",humantime:"Human time duration"};class h_ extends f.exports.Component{constructor(e){var t,n,r,i,a;super(e),this.headerHeight=35,this.handleLegendRowSelectedChange=(e,t)=>{const{series:n}=this.state,r=this.props.data.chartType,i=[];r===xk.StackArea&&t.length&&t.forEach((e=>i.push(n[e])));const a=_.map(n,((i,a)=>{const o=_.get(i,"oldColor",i.color);return l(s({},i),{visible:Ok(i,e),zIndex:Ik(i,t,n.length,a),color:r===xk.StackArea?o:Ak(i,t,o),oldColor:o})}));this.setState({series:a,chartShowSeries:i.length?i:a,legendHighlightedKeys:t})},this.refresh=()=>{this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)},this.shareChart=()=>{const e=l(s({},this.props.data),{legend:this.state.legend});if(!e.promqls){let t=[];const n={curAggrFunc:this.state.aggrFunc,curAggrGroup:this.state.aggrGroups},r=this.generateQuery(n);r&&t.push(r);const i=this.state.offsets.map((e=>this.generateQuery(l(s({},n),{offset:e})))).filter((e=>e));t=t.concat(i),e.promqls=t}let t={dataProps:e,highLevelConfig:s({},this.state.highLevelConfig),curCluster:localStorage.getItem("curCluster")};var n;delete t.dataProps.ref,(n=[{configs:JSON.stringify(t)}],ji("/api/n9e/share-charts",{method:Li.Post,data:n})).then((e=>{const t=e.dat;window.open("/chart/"+t)}))},this.resize=()=>{this.chart&&this.chart.resizeHandle&&this.chart.resizeHandle()},this.state={spinning:!1,errorText:"",series:[],chartShowSeries:[],legendHighlightedKeys:[],offsets:this.props.defaultOffsets||[],aggrFunc:this.props.defaultAggrFunc||"avg",aggrGroups:this.props.defaultAggrGroups||["ident"],calcFunc:"",legend:void 0===e.data.legend||e.data.legend,highLevelConfig:{shared:void 0===(null==(t=this.props.highLevelConfig)?void 0:t.shared)||(null==(n=this.props.highLevelConfig)?void 0:n.shared),sharedSortDirection:(null==(r=this.props.highLevelConfig)?void 0:r.sharedSortDirection)||"desc",precision:(null==(i=this.props.highLevelConfig)?void 0:i.precision)||"short",formatUnit:(null==(a=this.props.highLevelConfig)?void 0:a.formatUnit)||1e3},onErrorOccured:this.props.onErrorOccured,onRequestCompleted:this.props.onRequestCompleted}}componentDidMount(){this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)}componentWillReceiveProps(e){if(void 0!==this.props.data.legend&&this.props.data.legend!==e.data.legend&&this.setState({legend:e.data.legend}),"object"==typeof e.highLevelConfig){let t=!1;const n=Object.assign({},this.state.highLevelConfig);for(let r of Object.keys(n))n[r]!==e.highLevelConfig[r]&&(n[r]=e.highLevelConfig[r],t=!0);t&&this.setState({highLevelConfig:n})}}componentDidUpdate(e){const t=(e.data.selectedHosts||[]).map((e=>e.ident)),n=(this.props.data.selectedHosts||[]).map((e=>e.ident));!!_.isEqual(t,n)&&_.isEqualWith(e.data,this.props.data)||this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)}componentWillUnmount(){this.chart&&this.chart.destroy()}afterFetchChartDataOperations(e,t,n){const r=[],{offsets:i,series:a,legendHighlightedKeys:o}=this.state,{legendTitleFormats:s}=this.props.data,l=Ek(e.reduce(((e,t,n)=>{var a;if("error"===t.status)return r.push(t),e;const o=null==(a=null==t?void 0:t.data)?void 0:a.result;return i&&o.forEach((e=>{e.offset=i[n]||"",e.legendTitleFormat=s&&s[n]})),e.push(...o),e}),[])),c=Mk(a,l);this.setState(Object.assign({spinning:!1,series:l,chartShowSeries:l,legendHighlightedKeys:c?o:[]})),c&&this.handleLegendRowSelectedChange("normal",this.state.legendHighlightedKeys),this.state.onErrorOccured&&this.state.onErrorOccured(r),!r.length&&this.state.onRequestCompleted&&this.state.onRequestCompleted({loadTime:Date.now()-t,resolution:n,resultSeries:l.length})}getGraphConfig(e){return l(s(s(s({},yk),e),this.state.highLevelConfig),{now:e.now?e.now:e.end?e.end:yk.now})}getZoomedSeries(){return this.state.series}generateQuery(e){const{offset:t,curAggrFunc:n,curAggrGroup:r,calcFunc:i=""}=e,[a,o]=i.split("_"),{metric:s,selectedHosts:l}=this.props.data;if(s&&l){const e=t?" offset "+t:"";let c=`${i?a+"(":""}${s}{ident=~"${l.map((e=>e.ident)).join("|")}"}${i?"["+o+"]":""}${e}${i?")":""}`;return n&&r&&r.length>0&&(c=`${n}(${c}) by (${r.join(", ")})`),c}}fetchData(e,{start:t,end:n,step:r}){this.setState({spinning:!0});try{return((e,t)=>{const n=new AbortController,{signal:r}=n;return t&&kk[t]&&kk[t].abort&&kk[t].abort(),kk[t]=n,ji("/api/n9e/prometheus/api/v1/query_range",{method:Li.Post,body:xi.stringify(e),headers:{"Content-Type":"application/x-www-form-urlencoded"},signal:r}).finally((()=>{delete kk[t]}))})({start:t-t%r,end:n-n%r,step:r,query:e})}catch(uu){return this.setState({spinning:!1}),Promise.reject()}}renderChart(){const{errorText:e,chartShowSeries:t}=this.state,{height:n,data:r}=this.props,i=this.getGraphConfig(r);return e?d.createElement("div",{className:"graph-errorText"},e):d.createElement(o_,{graphConfig:i,series:t,style:{minHeight:"65%"}})}updateGraphConfig(e){const{aggrFunc:t,aggrGroups:n,comparison:r,calcFunc:i}=e;this.setState({aggrFunc:t,aggrGroups:n,offsets:r,calcFunc:i}),"aggrFuncChange"===e.changeType&&0===n.length||this.updateAllGraphs(t,n,r,i)}updateAllGraphs(e,t,n,r){const i=Date.now();let{promqls:a,range:o,step:c}=this.props.data;const{start:u,end:h}=l_(o);c||(c=Math.max(Math.floor((h-u)/240),1));let p={calcFunc:r};if(e&&(p.curAggrFunc=e),t&&t.length>0&&(p.curAggrGroup=t),a){const e=a.map((e=>"string"==typeof e?e:e.current)).filter((e=>e));if(e.length){const t=e.map((e=>this.fetchData(e,{start:u,end:h,step:c})));Promise.all([...t]).then((e=>{this.afterFetchChartDataOperations(e,i,c)}))}}else{const e=this.generateQuery(p);let t=[];n&&(t=n.map((e=>this.generateQuery(l(s({},p),{offset:e})))));const r=t.map((e=>this.fetchData(e,{start:u,end:h,step:c}))),a=this.fetchData(e,{start:u,end:h,step:c});Promise.all([...r,a]).then((e=>{this.afterFetchChartDataOperations(e,i,c)}))}}getContent(){const e=d.createElement(vt,{onClick:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{sharedSortDirection:e.key})})},selectedKeys:[this.state.highLevelConfig.sharedSortDirection]},d.createElement(vt.Item,{key:"desc"},"desc"),d.createElement(vt.Item,{key:"asc"},"asc")),t=d.createElement(vt,{onClick:e=>{const t=isNaN(Number(e.key))?e.key:Number(e.key);this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{formatUnit:t})})},selectedKeys:[String(this.state.highLevelConfig.formatUnit)]},d.createElement(vt.Item,{key:"1000"},"Ki, Mi, Gi by 1000"),d.createElement(vt.Item,{key:"1024"},"Ki, Mi, Gi by 1024"),d.createElement(vt.Item,{key:"humantime"},"Human time duration"));return d.createElement("div",null,d.createElement(_t,{checked:this.state.highLevelConfig.shared,onChange:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{shared:e.target.checked})})}},"Multi Series in Tooltip, order value"),d.createElement(kt,{overlay:e},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.highLevelConfig.sharedSortDirection," ",d.createElement(N,null))),d.createElement("br",null),d.createElement(_t,{checked:this.state.legend,onChange:e=>{this.setState({legend:e.target.checked})}},"Show Legend"),d.createElement("br",null),d.createElement(_t,{checked:"short"===this.state.highLevelConfig.precision,onChange:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{precision:e.target.checked?"short":"origin"})})}},"Value format with:"," "),d.createElement(kt,{overlay:t},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},u_[this.state.highLevelConfig.formatUnit]," ",d.createElement(N,null))))}render(){this.state;const{extraRender:e,data:t,showHeader:n=!0}=this.props,{title:r,metric:i}=t,a=this.getGraphConfig(t);return d.createElement("div",{className:this.state.legend?"graph-container graph-container-hasLegend":"graph-container"},n&&d.createElement("div",{className:"graph-header",style:{height:this.headerHeight,lineHeight:`${this.headerHeight}px`}},d.createElement("div",null,r||i),d.createElement("div",{className:"graph-extra"},d.createElement("span",{className:"graph-operationbar-item",key:"info"},d.createElement(Dt,{placement:"left",content:this.getContent(),trigger:"click",autoAdjustOverflow:!1,getPopupContainer:()=>document.body},d.createElement(Ct,{className:"",type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(R,null)))),!1===this.props.isShowRefresh?null:d.createElement("span",{className:"graph-operationbar-item",key:"sync"},d.createElement(Ct,{type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(K,{onClick:this.refresh}))),!1===this.props.isShowShare?null:d.createElement("span",{className:"graph-operationbar-item",key:"share"},d.createElement(Ct,{type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(we,{onClick:this.shareChart}))),e&&_.isFunction(e)?e(this):null)),this.props.graphConfigInnerVisible?d.createElement(Pk,{data:a,onChange:(...e)=>{this.updateGraphConfig(e[2]||{})}}):null,this.renderChart(),d.createElement(_k,{style:{display:this.state.legend?"block":"none",overflowY:"auto",maxHeight:"35%"},graphConfig:a,series:this.getZoomedSeries(),onSelectedChange:this.handleLegendRowSelectedChange,comparisonOptions:a.comparisonOptions}))}}const p_=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,a={setState:r,getState:i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,a),a};var d_={exports:{}},f_={},m_={exports:{}},g_={},y_=f.exports;var v_="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},E_=y_.useState,x_=y_.useEffect,b_=y_.useLayoutEffect,C_=y_.useDebugValue;function S_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!v_(e,n)}catch(r){return!0}}var w_="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=E_({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return b_((function(){i.value=n,i.getSnapshot=t,S_(i)&&a({inst:i})}),[e,n,t]),x_((function(){return S_(i)&&a({inst:i}),e((function(){S_(i)&&a({inst:i})}))}),[e]),C_(n),n};g_.useSyncExternalStore=void 0!==y_.useSyncExternalStore?y_.useSyncExternalStore:w_,m_.exports=g_;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var T_=f.exports,k_=m_.exports;var __="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},O_=k_.useSyncExternalStore,A_=T_.useRef,I_=T_.useEffect,M_=T_.useMemo,N_=T_.useDebugValue;f_.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=A_(null);if(null===a.current){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=M_((function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&o.hasValue){var t=o.value;if(i(t,e))return s=t}return s=e}if(t=s,__(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(a=e,s=n)}var a,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var s=O_(e,a[0],a[1]);return I_((function(){o.hasValue=!0,o.value=s}),[s]),N_(s),s},d_.exports=f_;var P_=d_.exports;const{useSyncExternalStoreWithSelector:F_}=P_;const L_=e=>{const t="function"==typeof e?(e=>e?p_(e):p_)(e):e,n=(e,n)=>function(e,t=e.getState,n){const r=F_(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return f.exports.useDebugValue(r),r}(t,e,n);return Object.assign(n,t),n};var R_=e=>e?L_(e):L_;const{useGlobalState:D_}=(e=>{const t=R_((()=>e)),n=(e,n)=>{t.setState((t=>{return{[e]:(r=t[e],i=n,"function"==typeof i?i(r):i)};var r,i}))};return{useGlobalState:e=>{const r=f.exports.useCallback((t=>t[e]),[e]);return[t(r),f.exports.useCallback((t=>n(e,t)),[e])]},getGlobalState:e=>t.getState()[e],setGlobalState:n}})({statFields:[],tableFields:[],displayedTableFields:[],dashboardMeta:{}});const B_=(e,t)=>"value"===t?e:"#fff";function $_(e){const t=f.exports.useRef(null),n=le(t),{item:r,colSpan:i,textMode:a,colorMode:o,textSize:s,isFullSizeBackground:l,valueField:c="Value"}=e,u=(null==s?void 0:s.title)?null==s?void 0:s.title:(null==n?void 0:n.width)/_.toString(r.name).length||12;let h=(null==s?void 0:s.value)?null==s?void 0:s.value:((null==n?void 0:n.width)-12*r.unit.length-4)/_.toString(r.value).length||12;const p=r.color,m="background"===o?p:"transparent";return h>(null==n?void 0:n.height)-20&&(h=(null==n?void 0:n.height)-20),d.createElement("div",{key:r.name,className:"renderer-stat-item",ref:t,style:{width:100/i+"%",flexBasis:100/i+"%",backgroundColor:l?"transparent":m}},d.createElement("div",{className:"renderer-stat-item-content"},"valueAndName"===a&&d.createElement("div",{className:"renderer-stat-header",style:{fontSize:u>100?100:u}},r.name),d.createElement("div",{className:"renderer-stat-value",style:{color:B_(p,o),fontSize:h>100?100:h}},"Value"===c?d.createElement(d.Fragment,null,r.value,d.createElement("span",{style:{fontSize:12,paddingLeft:4}},r.unit)):_.get(r,["metric",c]))))}function z_(e){var t,n,r;const{values:i,series:a,bodyWrapRef:o}=e,{custom:s,options:l}=i,{calc:c,textMode:u,colorMode:h,colSpan:p,textSize:m,valueField:g}=s,y=Tu(a,c,{unit:null==(t=null==l?void 0:l.standardOptions)?void 0:t.util,decimals:null==(n=null==l?void 0:l.standardOptions)?void 0:n.decimals,dateFormat:null==(r=null==l?void 0:l.standardOptions)?void 0:r.dateFormat},null==l?void 0:l.valueMappings,null==l?void 0:l.thresholds),[v,E]=f.exports.useState(!1),[x,b]=D_("statFields");return f.exports.useEffect((()=>{if(b((e=>{const t=_.reduce(e,((e,t)=>_.union(e,_.keys(t.metric))),[]);return _.uniq(t)})(y)),o.current)if(1===y.length&&"background"===h){const e=_.head(y),t=e.color?e.color:fu[0],n=Te(t);o.current.style.border="1px solid "+(n+""),o.current.style.backgroundColor=n+"",o.current.style.color="#fff",E(!0)}else o.current.style.border="0 none",o.current.style.backgroundColor="unset",o.current.style.color="unset",E(!1)}),[JSON.stringify(y),h]),d.createElement("div",{className:"renderer-stat-container"},d.createElement("div",{className:"renderer-stat-container-box scroll-container"},_.map(y,((e,t)=>d.createElement($_,{key:e.name,item:e,idx:t,colSpan:p,textMode:u,colorMode:h,textSize:m,isFullSizeBackground:v,valueField:g})))))}var H_=Object.defineProperty,j_=Object.defineProperties,G_=Object.getOwnPropertyDescriptors,V_=Object.getOwnPropertySymbols,Y_=Object.prototype.hasOwnProperty,U_=Object.prototype.propertyIsEnumerable,q_=(e,t,n)=>t in e?H_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W_=(e,t)=>{for(var n in t||(t={}))Y_.call(t,n)&&q_(e,n,t[n]);if(V_)for(var n of V_(t))U_.call(t,n)&&q_(e,n,t[n]);return e},X_=(e,t)=>j_(e,G_(t)),K_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Q_(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var Z_={exports:{}};!function(e,t){var n=9007199254740991,r="[object Map]",i="[object Promise]",a="[object Set]",o="[object WeakMap]",s="[object DataView]",l=/^\[object .+?Constructor\]$/,c="object"==typeof K_&&K_&&K_.Object===Object&&K_,u="object"==typeof self&&self&&self.Object===Object&&self,h=c||u||Function("return this")(),p=t&&!t.nodeType&&t,d=p&&e&&!e.nodeType&&e,f=d&&d.exports===p;var m,g,y,v=Function.prototype,E=Object.prototype,x=h["__core-js_shared__"],b=(m=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",C=v.toString,S=E.hasOwnProperty,w=E.toString,T=RegExp("^"+C.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=f?h.Buffer:void 0,_=E.propertyIsEnumerable,O=k?k.isBuffer:void 0,A=(g=Object.keys,y=Object,function(e){return g(y(e))}),I=j(h,"DataView"),M=j(h,"Map"),N=j(h,"Promise"),P=j(h,"Set"),F=j(h,"WeakMap"),L=!_.call({valueOf:1},"valueOf"),R=V(I),D=V(M),B=V(N),$=V(P),z=V(F);function H(e){return!(!K(e)||function(e){return!!b&&b in e}(e))&&(X(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(uu){}return t}(e)?T:l).test(V(e))}function j(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return H(n)?n:void 0}var G=function(e){return w.call(e)};function V(e){if(null!=e){try{return C.call(e)}catch(uu){}try{return e+""}catch(uu){}}return""}function Y(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&q(e)}(e)&&S.call(e,"callee")&&(!_.call(e,"callee")||"[object Arguments]"==w.call(e))}(I&&G(new I(new ArrayBuffer(1)))!=s||M&&G(new M)!=r||N&&G(N.resolve())!=i||P&&G(new P)!=a||F&&G(new F)!=o)&&(G=function(e){var t=w.call(e),n="[object Object]"==t?e.constructor:void 0,l=n?V(n):void 0;if(l)switch(l){case R:return s;case D:return r;case B:return i;case $:return a;case z:return o}return t});var U=Array.isArray;function q(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!X(e)}var W=O||function(){return!1};function X(e){var t=K(e)?w.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function K(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){if(q(e)&&(U(e)||"string"==typeof e||"function"==typeof e.splice||W(e)||Y(e)))return!e.length;var t=G(e);if(t==r||t==a)return!e.size;if(L||function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||E)}(e))return!A(e).length;for(var n in e)if(S.call(e,n))return!1;return!0}}(Z_,Z_.exports);var J_=Z_.exports,eO={exports:{}},tO={},nO={exports:{}},rO={},iO={exports:{}};function aO(){}function oO(){}oO.resetWarningCache=aO;function sO(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=sO(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}iO.exports=function(){function e(e,t,n,r,i,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:oO,resetWarningCache:aO};return n.PropTypes=n,n}();var lO=Q_(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=sO(e))&&(r&&(r+=" "),r+=t);return r}})),cO={},uO={};Object.defineProperty(uO,"__esModule",{value:!0}),uO.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},uO.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},uO.isNum=function(e){return"number"==typeof e&&!isNaN(e)},uO.int=function(e){return parseInt(e,10)},uO.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))};var hO={};Object.defineProperty(hO,"__esModule",{value:!0}),hO.getPrefix=dO,hO.browserPrefixToKey=fO,hO.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},hO.default=void 0;var pO=["Moz","Webkit","O","ms"];function dO(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var r=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!r)return"";if(n in r)return"";for(var i=0;i<pO.length;i++)if(fO(n,pO[i])in r)return pO[i];return""}function fO(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}var mO=dO();function gO(e){return(gO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}hO.default=mO,Object.defineProperty(cO,"__esModule",{value:!0}),cO.matchesSelector=wO,cO.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(wO(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},cO.addEvent=function(e,t,n,r){if(!e)return;var i=bO({capture:!0},r);e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},cO.removeEvent=function(e,t,n,r){if(!e)return;var i=bO({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},cO.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,yO.int)(n.borderTopWidth),t+=(0,yO.int)(n.borderBottomWidth)},cO.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,yO.int)(n.borderLeftWidth),t+=(0,yO.int)(n.borderRightWidth)},cO.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,yO.int)(n.paddingTop),t-=(0,yO.int)(n.paddingBottom)},cO.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,yO.int)(n.paddingLeft),t-=(0,yO.int)(n.paddingRight)},cO.offsetXYFromParent=function(e,t,n){var r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-r.left)/n,a=(e.clientY+t.scrollTop-r.top)/n;return{x:i,y:a}},cO.createCSSTransform=function(e,t){var n=TO(e,t,"px");return CO({},(0,vO.browserPrefixToKey)("transform",vO.default),n)},cO.createSVGTransform=function(e,t){return TO(e,t,"")},cO.getTranslation=TO,cO.getTouch=function(e,t){return e.targetTouches&&(0,yO.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,yO.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},cO.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},cO.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&kO(e.body,"react-draggable-transparent-selection")},cO.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&_O(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(uu){}},cO.addClassName=kO,cO.removeClassName=_O;var yO=uO,vO=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==gO(e)&&"function"!=typeof e)return{default:e};var n=EO(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(hO);function EO(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(EO=function(e){return e?n:t})(e)}function xO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xO(Object(n),!0).forEach((function(t){CO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SO="";function wO(e,t){return SO||(SO=(0,yO.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,yO.isFunction)(e[t])}))),!!(0,yO.isFunction)(e[SO])&&e[SO](t)}function TO(e,t,n){var r=e.x,i=e.y,a="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){var o="".concat("string"==typeof t.x?t.x:t.x+n),s="".concat("string"==typeof t.y?t.y:t.y+n);a="translate(".concat(o,", ").concat(s,")")+a}return a}function kO(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function _O(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var OO={};Object.defineProperty(OO,"__esModule",{value:!0}),OO.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);var i=MO(e);if("string"==typeof r){var a,o=i.ownerDocument,s=o.defaultView;if(!((a="parent"===r?i.parentNode:o.querySelector(r))instanceof s.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var l=a,c=s.getComputedStyle(i),u=s.getComputedStyle(l);r={left:-i.offsetLeft+(0,AO.int)(u.paddingLeft)+(0,AO.int)(c.marginLeft),top:-i.offsetTop+(0,AO.int)(u.paddingTop)+(0,AO.int)(c.marginTop),right:(0,IO.innerWidth)(l)-(0,IO.outerWidth)(i)-i.offsetLeft+(0,AO.int)(u.paddingRight)-(0,AO.int)(c.marginRight),bottom:(0,IO.innerHeight)(l)-(0,IO.outerHeight)(i)-i.offsetTop+(0,AO.int)(u.paddingBottom)-(0,AO.int)(c.marginBottom)}}(0,AO.isNum)(r.right)&&(t=Math.min(t,r.right));(0,AO.isNum)(r.bottom)&&(n=Math.min(n,r.bottom));(0,AO.isNum)(r.left)&&(t=Math.max(t,r.left));(0,AO.isNum)(r.top)&&(n=Math.max(n,r.top));return[t,n]},OO.snapToGrid=function(e,t,n){var r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]},OO.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},OO.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},OO.getControlPosition=function(e,t,n){var r="number"==typeof t?(0,IO.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var i=MO(n),a=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,IO.offsetXYFromParent)(r||e,a,n.props.scale)},OO.createCoreData=function(e,t,n){var r=e.state,i=!(0,AO.isNum)(r.lastX),a=MO(e);return i?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}},OO.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}};var AO=uO,IO=cO;function MO(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var NO={},PO={};function FO(e){return(FO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(PO,"__esModule",{value:!0}),PO.default=function(){},Object.defineProperty(NO,"__esModule",{value:!0}),NO.default=void 0;var LO=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==FO(e)&&"function"!=typeof e)return{default:e};var n=GO(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(d),RO=jO(iO.exports),DO=jO(Y),BO=cO,$O=OO,zO=uO,HO=jO(PO);function jO(e){return e&&e.__esModule?e:{default:e}}function GO(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(GO=function(e){return e?n:t})(e)}function VO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return YO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function UO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WO(e,t){return(WO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function XO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(uu){return!1}}();return function(){var n,r=ZO(e);if(t){var i=ZO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return KO(this,n)}}function KO(e,t){if(t&&("object"===FO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return QO(e)}function QO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZO(e){return(ZO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eA={start:"touchstart",move:"touchmove",stop:"touchend"},tA={start:"mousedown",move:"mousemove",stop:"mouseup"},nA=tA,rA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WO(e,t)}(a,LO.Component);var t,n,r,i=XO(a);function a(){var e;UO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return JO(QO(e=i.call.apply(i,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),JO(QO(e),"mounted",!1),JO(QO(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,BO.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,BO.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var i=(0,BO.getTouchIdentifier)(t);e.setState({touchIdentifier:i});var a=(0,$O.getControlPosition)(t,i,QO(e));if(null!=a){var o=a.x,s=a.y,l=(0,$O.createCoreData)(QO(e),o,s);(0,HO.default)("DraggableCore: handleDragStart: %j",l),(0,HO.default)("calling",e.props.onStart),!1!==e.props.onStart(t,l)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,BO.addUserSelectStyles)(r),e.setState({dragging:!0,lastX:o,lastY:s}),(0,BO.addEvent)(r,nA.move,e.handleDrag),(0,BO.addEvent)(r,nA.stop,e.handleDragStop))}}})),JO(QO(e),"handleDrag",(function(t){var n=(0,$O.getControlPosition)(t,e.state.touchIdentifier,QO(e));if(null!=n){var r=n.x,i=n.y;if(Array.isArray(e.props.grid)){var a=r-e.state.lastX,o=i-e.state.lastY,s=VO((0,$O.snapToGrid)(e.props.grid,a,o),2);if(a=s[0],o=s[1],!a&&!o)return;r=e.state.lastX+a,i=e.state.lastY+o}var l=(0,$O.createCoreData)(QO(e),r,i);if((0,HO.default)("DraggableCore: handleDrag: %j",l),!1!==e.props.onDrag(t,l)&&!1!==e.mounted)e.setState({lastX:r,lastY:i});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(u){var c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(c)}}})),JO(QO(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,$O.getControlPosition)(t,e.state.touchIdentifier,QO(e));if(null!=n){var r=n.x,i=n.y,a=(0,$O.createCoreData)(QO(e),r,i);if(!1===e.props.onStop(t,a)||!1===e.mounted)return!1;var o=e.findDOMNode();o&&e.props.enableUserSelectHack&&(0,BO.removeUserSelectStyles)(o.ownerDocument),(0,HO.default)("DraggableCore: handleDragStop: %j",a),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),o&&((0,HO.default)("DraggableCore: Removing handlers"),(0,BO.removeEvent)(o.ownerDocument,nA.move,e.handleDrag),(0,BO.removeEvent)(o.ownerDocument,nA.stop,e.handleDragStop))}}})),JO(QO(e),"onMouseDown",(function(t){return nA=tA,e.handleDragStart(t)})),JO(QO(e),"onMouseUp",(function(t){return nA=tA,e.handleDragStop(t)})),JO(QO(e),"onTouchStart",(function(t){return nA=eA,e.handleDragStart(t)})),JO(QO(e),"onTouchEnd",(function(t){return nA=eA,e.handleDragStop(t)})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,BO.addEvent)(e,eA.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,BO.removeEvent)(t,tA.move,this.handleDrag),(0,BO.removeEvent)(t,eA.move,this.handleDrag),(0,BO.removeEvent)(t,tA.stop,this.handleDragStop),(0,BO.removeEvent)(t,eA.stop,this.handleDragStop),(0,BO.removeEvent)(e,eA.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,BO.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:DO.default.findDOMNode(this)}},{key:"render",value:function(){return LO.cloneElement(LO.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&qO(t.prototype,n),r&&qO(t,r),a}();NO.default=rA,JO(rA,"displayName","DraggableCore"),JO(rA,"propTypes",{allowAnyClick:RO.default.bool,disabled:RO.default.bool,enableUserSelectHack:RO.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:RO.default.arrayOf(RO.default.number),handle:RO.default.string,cancel:RO.default.string,nodeRef:RO.default.object,onStart:RO.default.func,onDrag:RO.default.func,onStop:RO.default.func,onMouseDown:RO.default.func,scale:RO.default.number,className:zO.dontSetMe,style:zO.dontSetMe,transform:zO.dontSetMe}),JO(rA,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var n=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=f(n);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,r&&r.set(e,i);return i}(d),r=p(iO.exports),i=p(Y),a=p(lO),o=cO,s=OO,l=uO,c=p(NO),u=p(PO),h=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(uu){return!1}}();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(d,e);var t,r,l,p=S(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),_(T(t=p.call(this,e)),"onDragStart",(function(e,n){if((0,u.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,s.createDraggableData)(T(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),_(T(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",n);var r=(0,s.createDraggableData)(T(t),n),i={x:r.x,y:r.y};if(t.props.bounds){var a=i.x,o=i.y;i.x+=t.state.slackX,i.y+=t.state.slackY;var l=E((0,s.getBoundPosition)(T(t),i.x,i.y),2),c=l[0],h=l[1];i.x=c,i.y=h,i.slackX=t.state.slackX+(a-i.x),i.slackY=t.state.slackY+(o-i.y),r.x=i.x,r.y=i.y,r.deltaX=i.x-t.state.x,r.deltaY=i.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(i)})),_(T(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,s.createDraggableData)(T(t),n)))return!1;(0,u.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var i=t.props.position,a=i.x,o=i.y;r.x=a,r.y=o}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:v({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=d,l=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=t.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:v({},n)})}}],(r=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:i.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var r=t.children,i=t.defaultPosition,l=t.defaultClassName,u=t.defaultClassNameDragging,p=t.defaultClassNameDragged,d=t.position,f=t.positionOffset;t.scale;var y=g(t,h),E={},x=null,b=!Boolean(d)||this.state.dragging,C=d||i,S={x:(0,s.canDragX)(this)&&b?this.state.x:C.x,y:(0,s.canDragY)(this)&&b?this.state.y:C.y};this.state.isElementSVG?x=(0,o.createSVGTransform)(S,f):E=(0,o.createCSSTransform)(S,f);var w=(0,a.default)(r.props.className||"",l,(_(e={},u,this.state.dragging),_(e,p,this.state.dragged),e));return n.createElement(c.default,m({},y,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(r),{className:w,style:v(v({},r.props.style),E),transform:x}))}}])&&b(t.prototype,r),l&&b(t,l),d}(n.Component);e.default=O,_(O,"displayName","Draggable"),_(O,"propTypes",v(v({},c.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe})),_(O,"defaultProps",v(v({},c.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(rO);var iA=rO.default,aA=rO.DraggableCore;nO.exports=iA,nO.exports.default=iA,nO.exports.DraggableCore=aA;var oA,sA={__esModule:!0,cloneElement:function(e,t){t.style&&e.props.style&&(t.style=uA(uA({},e.props.style),t.style));t.className&&e.props.className&&(t.className=e.props.className+" "+t.className);return lA.default.cloneElement(e,t)}},lA=(oA=d)&&oA.__esModule?oA:{default:oA};function cA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cA(Object(n),!0).forEach((function(t){hA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pA={__esModule:!0,resizableProps:void 0},dA=function(e){return e&&e.__esModule?e:{default:e}}(iO.exports);var fA={axis:dA.default.oneOf(["both","x","y","none"]),className:dA.default.string,children:dA.default.element.isRequired,draggableOpts:dA.default.shape({allowAnyClick:dA.default.bool,cancel:dA.default.string,children:dA.default.node,disabled:dA.default.bool,enableUserSelectHack:dA.default.bool,offsetParent:dA.default.node,grid:dA.default.arrayOf(dA.default.number),handle:dA.default.string,nodeRef:dA.default.object,onStart:dA.default.func,onDrag:dA.default.func,onStop:dA.default.func,onMouseDown:dA.default.func,scale:dA.default.number}),height:dA.default.number.isRequired,handle:dA.default.oneOfType([dA.default.node,dA.default.func]),handleSize:dA.default.arrayOf(dA.default.number),lockAspectRatio:dA.default.bool,maxConstraints:dA.default.arrayOf(dA.default.number),minConstraints:dA.default.arrayOf(dA.default.number),onResizeStop:dA.default.func,onResizeStart:dA.default.func,onResize:dA.default.func,resizeHandles:dA.default.arrayOf(dA.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:dA.default.number,width:dA.default.number.isRequired};pA.resizableProps=fA,tO.__esModule=!0,tO.default=void 0;var mA=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=xA(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(d),gA=nO.exports,yA=sA,vA=pA,EA=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function xA(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(xA=function(e){return e?n:t})(e)}function bA(){return(bA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function CA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CA(Object(n),!0).forEach((function(t){wA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TA(e,t){return(TA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kA=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,TA(t,n);var i=r.prototype;return i.componentWillUnmount=function(){this.resetData()},i.resetData=function(){this.lastHandleRect=this.slack=null},i.runConstraints=function(e,t){var n=this.props,r=n.minConstraints,i=n.maxConstraints,a=n.lockAspectRatio;if(!r&&!i&&!a)return[e,t];if(a){var o=this.props.width/this.props.height,s=e-this.props.width,l=t-this.props.height;Math.abs(s)>Math.abs(l*o)?t=e/o:e=t*o}var c=e,u=t,h=this.slack||[0,0],p=h[0],d=h[1];return e+=p,t+=d,r&&(e=Math.max(r[0],e),t=Math.max(r[1],t)),i&&(e=Math.min(i[0],e),t=Math.min(i[1],t)),this.slack=[p+(c-e),d+(u-t)],[e,t]},i.resizeHandler=function(e,t){var n=this;return function(r,i){var a=i.node,o=i.deltaX,s=i.deltaY;"onResizeStart"===e&&n.resetData();var l=("both"===n.props.axis||"x"===n.props.axis)&&"n"!==t&&"s"!==t,c=("both"===n.props.axis||"y"===n.props.axis)&&"e"!==t&&"w"!==t;if(l||c){var u=t[0],h=t[t.length-1],p=a.getBoundingClientRect();if(null!=n.lastHandleRect){if("w"===h)o+=p.left-n.lastHandleRect.left;if("n"===u)s+=p.top-n.lastHandleRect.top}n.lastHandleRect=p,"w"===h&&(o=-o),"n"===u&&(s=-s);var d=n.props.width+(l?o/n.props.transformScale:0),f=n.props.height+(c?s/n.props.transformScale:0),m=n.runConstraints(d,f);d=m[0],f=m[1];var g=d!==n.props.width||f!==n.props.height,y="function"==typeof n.props[e]?n.props[e]:null;y&&!("onResize"===e&&!g)&&(null==r.persist||r.persist(),y(r,{node:a,size:{width:d,height:f},handle:t})),"onResizeStop"===e&&n.resetData()}}},i.renderResizeHandle=function(e,t){var n=this.props.handle;if(!n)return mA.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof n)return n(e,t);var r=SA({ref:t},"string"==typeof n.type?{}:{handleAxis:e});return mA.cloneElement(n,r)},i.render=function(){var e=this,t=this.props,n=t.children,r=t.className,i=t.draggableOpts;t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart;var a=t.resizeHandles;t.transformScale;var o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,EA);return(0,yA.cloneElement)(n,SA(SA({},o),{},{className:(r?r+" ":"")+"react-resizable",children:[].concat(n.props.children,a.map((function(t){var n,r=null!=(n=e.handleRefs[t])?n:e.handleRefs[t]=mA.createRef();return mA.createElement(gA.DraggableCore,bA({},i,{nodeRef:r,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,r))})))}))},r}(mA.Component);tO.default=kA,kA.propTypes=vA.resizableProps,kA.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var _A={__esModule:!0,default:void 0},OA=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=FA(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(d),AA=PA(iO.exports),IA=PA(tO),MA=pA,NA=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function PA(e){return e&&e.__esModule?e:{default:e}}function FA(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(FA=function(e){return e?n:t})(e)}function LA(){return(LA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function RA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RA(Object(n),!0).forEach((function(t){BA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $A(e,t){return($A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zA=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,n){var r=n.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(r,(function(){return t.props.onResize&&t.props.onResize(e,n)}))):t.setState(r)},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,$A(t,n),r.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},r.prototype.render=function(){var e=this.props,t=e.handle,n=e.handleSize;e.onResize;var r=e.onResizeStart,i=e.onResizeStop,a=e.draggableOpts,o=e.minConstraints,s=e.maxConstraints,l=e.lockAspectRatio,c=e.axis;e.width,e.height;var u=e.resizeHandles,h=e.style,p=e.transformScale,d=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,NA);return OA.createElement(IA.default,{axis:c,draggableOpts:a,handle:t,handleSize:n,height:this.state.height,lockAspectRatio:l,maxConstraints:s,minConstraints:o,onResizeStart:r,onResize:this.onResize,onResizeStop:i,resizeHandles:u,transformScale:p,width:this.state.width},OA.createElement("div",LA({},d,{style:DA(DA({},h),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},r}(OA.Component);_A.default=zA,zA.propTypes=DA(DA({},MA.resizableProps),{},{children:AA.default.element}),eO.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var HA=eO.exports.Resizable=tO.default;eO.exports.ResizableBox=_A.default;var jA={exports:{}};
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)){if(i.length){var o=n.apply(null,i);o&&e.push(o)}}else if("object"===a)if(i.toString===Object.prototype.toString)for(var s in i)t.call(i,s)&&i[s]&&e.push(s);else e.push(i.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}(jA);var GA=jA.exports;function VA(e){const t=(()=>{const e=f.exports.useRef(!1);return f.exports.useEffect((()=>(e.current=!1,()=>{e.current=!0})),[]),e})(),[n,r]=f.exports.useState(e);return[n,f.exports.useCallback((e=>{t.current||r(e)}),[])]}var YA={exports:{}},UA={};Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()||Object.assign;
/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var qA=d,WA=60103;if(UA.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var XA=Symbol.for;WA=XA("react.element"),UA.Fragment=XA("react.fragment")}var KA=qA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QA=Object.prototype.hasOwnProperty,ZA={key:!0,ref:!0,__self:!0,__source:!0};function JA(e,t,n){var r,i={},a=null,o=null;for(r in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(o=t.ref),t)QA.call(t,r)&&!ZA.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:WA,type:e,key:a,ref:o,props:i,_owner:KA.current}}UA.jsx=JA,UA.jsxs=JA,YA.exports=UA;const eI=YA.exports.jsx,tI=YA.exports.jsxs;var nI=d.memo((e=>{const t=e,{width:n,minWidth:r,maxWidth:i,onResize:a,onResizeStart:o,onResizeEnd:s,onMount:l,triggerRender:c,className:u,style:h,onClick:p,children:f,rowSpan:m,colSpan:g,title:y}=t,v=((e,t)=>{var n={};for(var r in e)Y_.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&V_)for(var r of V_(e))t.indexOf(r)<0&&U_.call(e,r)&&(n[r]=e[r]);return n})(t,["width","minWidth","maxWidth","onResize","onResizeStart","onResizeEnd","onMount","triggerRender","className","style","onClick","children","rowSpan","colSpan","title"]),E=d.useRef(null),[x,b]=VA(0);if(d.useEffect((()=>{n&&(b(n),null==l||l(n))}),[c]),d.useEffect((()=>{n&&b(n)}),[b,n]),!n||Number.isNaN(Number(n)))return eI("th",X_(W_({},v),{style:h,className:u,onClick:p,rowSpan:m,colSpan:g,children:eI("span",{title:y,children:f})}));const C=e=>{document.body.style.userSelect=e?"none":"",document.body.style.pointerEvents=e?"none":"",document.documentElement.style.cursor=e?"col-resize":""};return tI("th",{className:GA(u,"resizable-container"),style:X_(W_({},h),{overflow:"unset"}),ref:E,onClick:p,rowSpan:m,colSpan:g,children:[eI(HA,{className:"resizable-box",width:x,minConstraints:[r,0],maxConstraints:[i,0],height:0,handle:eI("div",{className:"resizable-handler",onClick:e=>{e.stopPropagation()},children:eI("div",{className:"resizable-line"})}),draggableOpts:{enableUserSelectHack:!1},onResizeStart:({},e)=>{b(e.size.width),C(!0),null==o||o(e.size.width)},onResize:({},e)=>{b(e.size.width)},onResizeStop:()=>{x<=0||(a(x),C(!1),null==s||s(x))},children:eI("div",{style:{width:x,height:"100%"}})}),eI("div",X_(W_({},v),{className:"resizable-title",children:eI("span",{title:y,children:f})}))]})}));const rI={wait:500};var iI=/^\s+|\s+$/g,aI=/^[-+]0x[0-9a-f]+$/i,oI=/^0b[01]+$/i,sI=/^0o[0-7]+$/i,lI=parseInt,cI="object"==typeof K_&&K_&&K_.Object===Object&&K_,uI="object"==typeof self&&self&&self.Object===Object&&self,hI=cI||uI||Function("return this")(),pI=Object.prototype.toString,dI=Math.max,fI=Math.min,mI=function(){return hI.Date.now()};function gI(e,t,n){var r,i,a,o,s,l,c=0,u=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function f(e){return c=e,s=setTimeout(g,t),u?d(e):o}function m(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=a}function g(){var e=mI();if(m(e))return y(e);s=setTimeout(g,function(e){var n=t-(e-l);return h?fI(n,a-(e-c)):n}(e))}function y(e){return s=void 0,p&&r?d(e):(r=i=void 0,o)}function v(){var e=mI(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return f(l);if(h)return s=setTimeout(g,t),d(l)}return void 0===s&&(s=setTimeout(g,t)),o}return t=vI(t)||0,yI(n)&&(u=!!n.leading,a=(h="maxWait"in n)?dI(vI(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?o:y(mI())},v}function yI(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function vI(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==pI.call(e)}(e))return NaN;if(yI(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=yI(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(iI,"");var n=oI.test(e);return n||sI.test(e)?lI(e.slice(2),n?2:8):aI.test(e)?NaN:+e}var EI=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return yI(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),gI(e,t,{leading:r,maxWait:t,trailing:i})};function xI(e,t){const{current:n}=f.exports.useRef({deps:t,obj:void 0,initialized:!1});return!1!==n.initialized&&function(e,t){if(e===t)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(n.deps,t)||(n.deps=t,n.obj=e(),n.initialized=!0),n.obj}function bI(e,t,n){const[r,i]=f.exports.useState({}),{run:a,cancel:o}=function(e,t){var n;const r=f.exports.useRef(e);r.current=e;const i=null!=(n=null==t?void 0:t.wait)?n:1e3,a=xI((()=>EI(((...e)=>r.current(...e)),i,t)),[]);return f.exports.useEffect((()=>{a.cancel()}),[]),{run:a,cancel:a.cancel,flush:a.flush}}((()=>{i({})}),n);f.exports.useEffect((()=>a()),t),d.useEffect(o,[]),((e,t)=>{const n=f.exports.useRef(!1);f.exports.useEffect((()=>{if(n.current)return e();n.current=!0}),t)})(e,[r])}var CI=/^\s+|\s+$/g,SI=/^[-+]0x[0-9a-f]+$/i,wI=/^0b[01]+$/i,TI=/^0o[0-7]+$/i,kI=parseInt,_I="object"==typeof K_&&K_&&K_.Object===Object&&K_,OI="object"==typeof self&&self&&self.Object===Object&&self,AI=_I||OI||Function("return this")(),II=Object.prototype.toString,MI=Math.max,NI=Math.min,PI=function(){return AI.Date.now()};function FI(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function LI(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==II.call(e)}(e))return NaN;if(FI(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=FI(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(CI,"");var n=wI.test(e);return n||TI.test(e)?kI(e.slice(2),n?2:8):SI.test(e)?NaN:+e}var RI=function(e,t,n){var r,i,a,o,s,l,c=0,u=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function f(e){return c=e,s=setTimeout(g,t),u?d(e):o}function m(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=a}function g(){var e=PI();if(m(e))return y(e);s=setTimeout(g,function(e){var n=t-(e-l);return h?NI(n,a-(e-c)):n}(e))}function y(e){return s=void 0,p&&r?d(e):(r=i=void 0,o)}function v(){var e=PI(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return f(l);if(h)return s=setTimeout(g,t),d(l)}return void 0===s&&(s=setTimeout(g,t)),o}return t=LI(t)||0,FI(n)&&(u=!!n.leading,a=(h="maxWait"in n)?MI(LI(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?o:y(PI())},v};const DI="dataIndex";function BI(e){return`resizable-table-id-${e}`}function $I(e){return null==e?void 0:e.map(((e,t)=>{var n;return X_(W_({},e),{children:(null==(n=null==e?void 0:e.children)?void 0:n.length)?$I(e.children):void 0,[DI]:e[DI]||e.key||BI(t)})}))}function zI(e){return d.useMemo((()=>$I(e)),[e])||e}function HI(e){const t=f.exports.useRef(e);t.current=f.exports.useMemo((()=>e),[e]);const n=f.exports.useRef();return n.current||(n.current=function(...e){return t.current.apply(this,e)}),n.current}const jI=120;function GI(e){const{columns:t,defaultWidth:n=jI,minConstraints:r=jI/2,maxConstraints:i=1/0,cache:a=!0,columnsState:o,onResizeStart:s,onResizeEnd:l}=e,c=d.useRef(new Map),[u,h]=VA([]),p=function(e){const t=f.exports.useRef(e);return t.current=e,t}(u),{localColumns:m,resetLocalColumns:g}=function({columnsState:e,resizableColumns:t,columns:n}){const r=zI(n),i=HI((()=>{var t;const{persistenceType:n,persistenceKey:i}=e||{};if(!i||!n)return r;if("undefined"==typeof window)return r;const a=window[n];try{const e=null==(t=JSON.parse((null==a?void 0:a.getItem(i))||"{}"))?void 0:t.resizableColumns;return null==r?void 0:r.map(((t,n)=>{var r;return X_(W_({},t),{width:(null==(r=null==e?void 0:e.find(((e,r)=>!(!e.dataIndex||!t.dataIndex||e.dataIndex!==t.dataIndex)||!(!e.key||!t.key||e.key!==t.key)||n===r&&!t.dataIndex&&!t.key)))?void 0:r.width)||t.width})}))}catch(o){console.error(o)}})),[a,o]=d.useState(i);f.exports.useEffect((()=>{o(i())}),[r]),d.useEffect((()=>{const{persistenceType:n,persistenceKey:r}=e||{};if(!r||!n||!(null==t?void 0:t.length))return;if("undefined"==typeof window)return;const i=window[n];try{i.setItem(r,JSON.stringify(X_(W_({},JSON.parse((null==i?void 0:i.getItem(r))||"{}")),{resizableColumns:t.map((e=>({dataIndex:e.dataIndex,key:e.key,title:e.title,width:e.width})))})))}catch(a){console.error(a)}}),[t]);const s=HI((()=>{o([...r||[]])}));return{localColumns:f.exports.useMemo((()=>a),[a]),resetLocalColumns:s}}({columnsState:o,columns:t,resizableColumns:u}),[y,v]=VA(),[E,x]=d.useReducer((e=>e+1),0),b=HI((()=>{c.current=new Map,g()})),C=d.useCallback((e=>t=>{t&&h((n=>{const r=function(e,t,n){const r=[...e];return function e(r){if(r)for(let i=0;i<(null==r?void 0:r.length);i++){if(t(r[i]))return void(r[i]=X_(W_({},r[i]),{width:n}));r[i].children&&e(r[i].children)}}(r),r}(n,(t=>t[DI]===e),t),i=new Map;return function e(t){t.forEach(((t,n)=>{const r=t[DI];i.set(null!=r?r:"",{width:null==t?void 0:t.width,index:n}),(null==t?void 0:t.children)&&e(t.children)}))}(r),c.current=i,r}))}),[h]),S=d.useMemo((()=>C),[C]),w=e=>t=>{null==s||s(X_(W_({},e),{width:t,resizableColumns:p.current}))},T=e=>t=>{null==l||l(X_(W_({},e),{width:t,resizableColumns:p.current}))},k=HI((e=>(null==e?void 0:e.filter((e=>!J_(e)))).map((e=>{var t,n,o,s;return X_(W_({},e),{children:(null==(t=null==e?void 0:e.children)?void 0:t.length)?k(e.children):void 0,onHeaderCell:t=>{var n,o,s;return{title:"string"==typeof(null==e?void 0:e.title)?null==e?void 0:e.title:"",width:a&&(null==(s=null==(o=c.current)?void 0:o.get(null!=(n=t[DI])?n:""))?void 0:s.width)||(null==t?void 0:t.width),resizable:t.resizable,onMount:C(null==t?void 0:t[DI]),onResize:S(null==t?void 0:t[DI]),onResizeStart:w(t),onResizeEnd:T(t),minWidth:r,maxWidth:i,triggerRender:E}},width:a&&(null==(s=null==(o=c.current)?void 0:o.get(null!=(n=e[DI])?n:""))?void 0:s.width)||(null==e?void 0:e.width),ellipsis:void 0===e.ellipsis||e.ellipsis,[DI]:e[DI]||e.key})}))));d.useEffect((()=>{if(m){const e=k(m);h(e)}}),[m,k,h]),bI((()=>{const e=k(u);h(e)}),[E],rI),d.useEffect((()=>{let e=0;!function t(r){for(let i=0;i<r.length;i++)r[i].children?t(r[i].children):r[i].hideInTable||(e+=Number(r[i].width)||Number(null==m?void 0:m[m.length-1].width)||n)}(u),v(e)}),[m,n,u,v]);const{run:_}=function(e,t){var n;const r=f.exports.useRef(e);r.current=e;const i=null!=(n=null==t?void 0:t.wait)?n:1e3,a=xI((()=>RI(((...e)=>r.current(...e)),i,t)),[]);return d.useEffect((()=>{a.cancel()}),[]),{run:a,cancel:a.cancel,flush:a.flush}}(x);d.useEffect((()=>(window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)})),[_]);const O=d.useMemo((()=>({header:{cell:nI}})),[]);return{resizableColumns:u,components:O,tableWidth:y,resetColumns:b}}const VI=(e,t)=>{let n={};return _.forEach(e,(e=>{var r;(null==(r=null==e?void 0:e.matcher)?void 0:r.value)===t&&(n=null==e?void 0:e.properties)})),n};function YI(e,t){return"string"==typeof e&&"string"==typeof t?e.localeCompare(t):"number"==typeof e&&"number"==typeof t?e-t:0}const UI=e=>{const t=_.reduce(e,((e,t)=>_.union(e,_.keys(t.metric))),[]);return _.uniq(t)},qI=(e,t)=>t.sortColumn===e&&t.sortOrder;function WI(e){const t=f.exports.useRef(null),n=le(t),{values:r,series:i,themeMode:a}=e,{custom:o,options:c,overrides:u}=r,{showHeader:h,calc:p,aggrDimension:m,displayMode:g,columns:y,sortColumn:v,sortOrder:E,colorMode:x="value"}=o,[b,C]=f.exports.useState([]),[S,w]=f.exports.useState({sortColumn:v,sortOrder:E}),[T,k]=D_("tableFields"),[O,A]=D_("displayedTableFields");f.exports.useEffect((()=>{w({sortColumn:v,sortOrder:E})}),[v,E]),f.exports.useEffect((()=>{var e,t,n;const r=Tu(i,p,{unit:null==(e=null==c?void 0:c.standardOptions)?void 0:e.util,decimals:null==(t=null==c?void 0:c.standardOptions)?void 0:t.decimals,dateFormat:null==(n=null==c?void 0:c.standardOptions)?void 0:n.dateFormat},null==c?void 0:c.valueMappings);let a=[];"seriesToRows"===g?a=["name","value"]:"labelsOfSeriesToRows"===g?a=_.isEmpty(y)?[...UI(r),"value"]:y:"labelValuesToRows"===g&&(a=[m]),A(a),k(UI(r)),C(r)}),[JSON.stringify(i),p,JSON.stringify(c),g,m,JSON.stringify(y)]);const I=f.exports.useRef(null),M=e=>{e()},N=e=>({filterDropdown:({setSelectedKeys:e,selectedKeys:t,confirm:n,clearFilters:r})=>d.createElement("div",{style:{padding:8}},d.createElement(wt,{ref:I,value:t[0],onChange:t=>e(t.target.value?[t.target.value]:[]),onPressEnter:()=>M(n),style:{marginBottom:8,display:"block"}}),d.createElement(zt,null,d.createElement(Ct,{type:"primary",onClick:()=>M(n),icon:d.createElement(P,null),size:"small",style:{width:90}},"Search"),d.createElement(Ct,{onClick:()=>r&&((e,t)=>{e(),t()})(r,n),size:"small",style:{width:90}},"Reset"))),filterIcon:e=>d.createElement(ke,{style:{color:e?"#1890ff":void 0}}),onFilter:(t,n)=>{const r=_.get(n,e);return"string"!=typeof r&&!_.isArray(r)||r.toString().toLowerCase().includes(t.toLowerCase())}});let F=b,L=[s({title:"name",dataIndex:"name",key:"name",width:_.get(n,"width")-200,sorter:(e,t)=>YI(e.name,t.name),sortOrder:qI("name",S),render:e=>d.createElement("div",{className:"renderer-table-td-content"},e)},N(["name"])),s({title:"value",dataIndex:"text",key:"text",sorter:(e,t)=>e.stat-t.stat,sortOrder:qI("text",S),className:"renderer-table-td-content-value-container",render:(e,t)=>{var n;let r={value:e,unit:"",color:t.color||("dark"===a?"#fff":"#000")};const i=VI(u,null==(n=t.fields)?void 0:n.refId);return _.isEmpty(i)||(r=wu(null==t?void 0:t.stat,null==i?void 0:i.standardOptions,null==i?void 0:i.valueMappings)),d.createElement("div",{className:"renderer-table-td-content",style:{color:"background"===x?"#fff":null==r?void 0:r.color,backgroundColor:"background"===x?r.color:"unset"}},r.value,r.unit)}},N(["text"]))];if("labelsOfSeriesToRows"===g){const e=_.isEmpty(y)?_.concat(UI(b),"value"):y;L=_.map(e,((t,r)=>s({title:t,dataIndex:t,key:t,width:r<e.length-1?_.get(n,"width")/e.length:void 0,sorter:(e,n)=>"value"===t?e.stat-n.stat:YI(_.toString(_.get(e.metric,t)),_.toString(_.get(n.metric,t))),sortOrder:qI(t,S),className:"value"===t?"renderer-table-td-content-value-container":"",render:(e,n)=>{if("value"===t){const e={value:null==n?void 0:n.value,unit:null==n?void 0:n.unit,color:n.color||("dark"===a?"#fff":"#000")};return d.createElement("div",{className:"renderer-table-td-content",style:{color:"background"===x?"#fff":null==e?void 0:e.color,backgroundColor:"background"===x?e.color:"unset"}},null==e?void 0:e.value,null==e?void 0:e.unit)}return d.createElement("span",{title:_.get(n.metric,t)},_.get(n.metric,t))}},N(["metric",t]))))}if("labelValuesToRows"===g&&m){F=((e,t,n)=>{const r=_.groupBy(e,(e=>e.fields[t]));return _.map(r,((e,r)=>{const i={id:_.uniqueId("series_"),[t]:r},a=_.groupBy(e,(e=>e.fields[n]));return _.forEach(a,((e,t)=>{i[t]={name:e[0].name,id:e[0].id,stat:e[0].stat,color:e[0].color,text:e[0].text}})),i.groupNames=_.keys(a),i}))})(b,m,"refId");const e=_.reduce(F,((e,t)=>_.union(_.concat(e,t.groupNames))),[]);L=[s({title:m,dataIndex:m,key:m,width:_.get(n,"width")/(e.length+1),sorter:(e,t)=>YI(e[m],t[m]),sortOrder:qI(m,S),render:e=>d.createElement("div",{className:"renderer-table-td-content"},e)},N([m]))],_.map(e,((t,r)=>{var i;const o=_.find(F,(e=>e[t]));L.push(s({title:null==(i=o[t])?void 0:i.name,dataIndex:t,key:t,width:r<e.length-1?_.get(n,"width")/(e.length+1):void 0,sorter:(e,n)=>_.get(e[t],"stat")-_.get(n[t],"stat"),sortOrder:qI(t,S),className:"renderer-table-td-content-value-container",render:e=>{var n;let r={value:null==e?void 0:e.text,unit:"",color:(null==e?void 0:e.color)||("dark"===a?"#fff":"#000")};const i=VI(u,t);return _.isEmpty(i)||(r=wu(null==e?void 0:e.stat,l(s({},(null==i?void 0:i.standardOptions)||{}),{unit:null==(n=null==i?void 0:i.standardOptions)?void 0:n.util}),null==i?void 0:i.valueMappings)),d.createElement("div",{className:"renderer-table-td-content",style:{color:"background"===x?"#fff":null==r?void 0:r.color,backgroundColor:"background"===x?null==r?void 0:r.color:"unset"}},null==r?void 0:r.value,null==r?void 0:r.unit)}},N([t,"text"])))}))}_.isEmpty(b)||_.isEmpty(L)||(L=function(e,t){var n;let r=e;if(!t)return r;const i=null==(n=t[0])?void 0:n.options;if(i){const{excludeByName:e,indexByName:t,renameByName:n}=i;t&&(r=_.map(r,(e=>{const n=t[e.title];return l(s({},e),{sort:n})})),r=_.sortBy(r,"sort")),e&&(r=_.filter(r,(t=>!e[t.title]))),n&&(r=_.map(r,(e=>{const t=n[e.title];return t?l(s({},e),{title:t}):e})))}return r}(L,r.transformations));const R=h?40:0,D=_.get(n,"height")-R,B=isNaN(D)?0:D,{components:$,resizableColumns:z,tableWidth:H,resetColumns:j}=GI({columns:f.exports.useMemo((()=>L),[JSON.stringify(y),g,JSON.stringify(b),S,a,m,u,n])});return d.createElement("div",{className:"renderer-table-container",ref:t},d.createElement("div",{className:"renderer-table-container-box"},d.createElement(Ft,{rowKey:"id",getPopupContainer:()=>document.body,showSorterTooltip:!1,showHeader:h,dataSource:F,columns:z,scroll:{y:B,x:H},bordered:!1,pagination:!1,onChange:(e,t,n)=>{w({sortColumn:n.columnKey,sortOrder:n.order})},components:$})))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var XI=function(e,t){return(XI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function KI(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}XI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var QI=function(){return(QI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ZI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function JI(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function eM(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var tM=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)},nM=function(e,t){return!!tM(e)&&e.indexOf(t)>-1},rM=function(e,t){if(!tM(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},iM={}.toString,aM=function(e,t){return iM.call(e)==="[object "+t+"]"},oM=function(e){return aM(e,"Function")},sM=function(e){return null==e},lM=function(e){return Array.isArray?Array.isArray(e):aM(e,"Array")},cM=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};function uM(e,t){if(e)if(lM(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(cM(e))for(var i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i))break}var hM=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return uM(e,(function(n,r){oM(e)&&"prototype"===r||t.push(r)})),t};function pM(e,t){var n=hM(t),r=n.length;if(sM(e))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(t[a]!==e[a]||!(a in e))return!1}return!0}var dM=function(e){return"object"==typeof e&&null!==e},fM=function(e){if(!dM(e)||!aM(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function mM(e,t){if(!lM(e))return null;var n;if(oM(t)&&(n=t),fM(t)&&(n=function(e){return pM(e,t)}),n)for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r];return null}function gM(e,t,n){void 0===n&&(n=0);for(var r=n;r<e.length;r++)if(t(e[r],r))return r;return-1}var yM=function(e){if(!lM(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t},vM=function(e){if(lM(e))return e.reduce((function(e,t){return Math.max(e,t)}),e[0])},EM=function(e){if(lM(e))return e.reduce((function(e,t){return Math.min(e,t)}),e[0])},xM=function(e){var t=e.filter((function(e){return!isNaN(e)}));if(!t.length)return{min:0,max:0};if(lM(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=vM(t);return{min:EM(t),max:i}},bM=Array.prototype.splice,CM=function(e,t,n){if(!lM(e)&&!fM(e))return e;var r=n;return uM(e,(function(e,n){r=t(r,e,n)})),r},SM=function(e,t){var n=[];if(!tM(e))return n;for(var r=-1,i=[],a=e.length;++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return function(e,t){if(!tM(e))return[];for(var n=e?t.length:0,r=n-1;n--;){var i=void 0,a=t[n];n!==r&&a===i||(i=a,bM.call(e,a,1))}}(e,i),n},wM=function(e){return aM(e,"String")};function TM(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];t.has(a)||(n.push(a),t.set(a,!0))}return n}var kM=function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i][t];if(!sM(a)){lM(a)||(a=[a]);for(var o=0;o<a.length;o++){var s=a[o];r[s]||(n.push(s),r[s]=!0)}}}return n};function _M(e){if(tM(e))return e[0]}function OM(e){if(tM(e)){return e[e.length-1]}}var AM=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},IM=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1},MM=Object.prototype.hasOwnProperty;function NM(e,t){if(!t||!lM(e))return{};for(var n,r={},i=oM(t)?t:function(e){return e[t]},a=0;a<e.length;a++){var o=e[a];n=i(o),MM.call(r,n)?r[n].push(o):r[n]=[o]}return r}function PM(e,t){if(!t)return{0:e};if(!oM(t)){var n=lM(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",r=0,i=n.length;r<i;r++)t+=e[n[r]]&&e[n[r]].toString();return t}}return NM(e,t)}var FM=function(e,t,n){return e<t?t:e>n?n:e},LM=function(e,t){var n=t.toString(),r=n.indexOf(".");if(-1===r)return Math.round(e);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))},RM=function(e){return aM(e,"Number")};function DM(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n}var BM=function(e,t){if(lM(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var a=e[i],o=oM(t)?t(a):a[t];o>r&&(n=a,r=o)}return n}},$M=function(e,t){return(e%t+t)%t},zM=Math.PI/180,HM=function(e){return zM*e},jM=function(e,t){return e.hasOwnProperty(t)},GM=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return uM(e,(function(n,r){oM(e)&&"prototype"===r||t.push(n)})),t},VM=function(e){return sM(e)?"":e.toString()},YM=function(e){return VM(e).toLowerCase()};function UM(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]})):e}var qM=function(e){var t=VM(e);return t.charAt(0).toUpperCase()+t.substring(1)},WM={}.toString,XM=function(e){return aM(e,"Boolean")},KM=function(e){return aM(e,"Date")},QM=Object.prototype,ZM=function(e){return void 0===e},JM=function(e){return e instanceof Element||e instanceof HTMLDocument};function eN(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}function tN(e,t,n,r){return t&&eN(e,t),n&&eN(e,n),r&&eN(e,r),e}var nN=function(e){if("object"!=typeof e||null===e)return e;var t;if(lM(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"==typeof e[n]&&null!=e[n]?t[n]=nN(e[n]):t[n]=e[n]}else for(var i in t={},e)"object"==typeof e[i]&&null!=e[i]?t[i]=nN(e[i]):t[i]=e[i];return t};function rN(e,t,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a)}}var iN=function(e,t){if(!oM(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var s=e.apply(this,r);return o.set(a,s),s};return n.cache=new Map,n};function aN(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(t.hasOwnProperty(i)){var a=t[i];null!==a&&fM(a)?(fM(e[i])||(e[i]={}),n<r?aN(e[i],a,n+1,r):e[i]=t[i]):lM(a)?(e[i]=[],e[i]=e[i].concat(a)):void 0!==a&&(e[i]=a)}}var oN=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)aN(e,t[r]);return e},sN=function(e,t){if(!tM(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},lN=Object.prototype.hasOwnProperty;function cN(e){if(sM(e))return!0;if(tM(e))return!e.length;var t=function(e){return WM.call(e).replace(/^\[object /,"").replace(/]$/,"")}(e);if("Map"===t||"Set"===t)return!e.size;if(function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||QM)}(e))return!Object.keys(e).length;for(var n in e)if(lN.call(e,n))return!1;return!0}var uN,hN=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(wM(e)||wM(t))return!1;if(tM(e)||tM(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=hN(e[r],t[r]));r++);return n}if(dM(e)||dM(t)){var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(n=!0,r=0;r<i.length&&(n=hN(e[i[r]],t[i[r]]));r++);return n}return!1},pN=function(e,t){if(!tM(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(t(i,r))}return n},dN=function(e){return e},fN=function(e,t,n){for(var r=0,i=wM(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return void 0===e||r<i.length?n:e},mN=function(e,t,n){var r=e,i=wM(t)?t.split("."):t;return i.forEach((function(e,t){t<i.length-1?(cM(r[e])||(r[e]=RM(i[t+1])?[]:{}),r=r[e]):r[e]=n})),e},gN=Object.prototype.hasOwnProperty,yN=function(e,t){if(null===e||!fM(e))return{};var n={};return uM(t,(function(t){gN.call(e,t)&&(n[t]=e[t])})),n},vN=function(e,t){return CM(e,(function(e,n,r){return t.includes(r)||(e[r]=n),e}),{})},EN=function(e,t,n){var r,i,a,o,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,o=e.apply(i,a),r||(i=a=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return i=this,a=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,o=e.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(l,u)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c},xN={},bN=function(e){return xN[e=e||"g"]?xN[e]+=1:xN[e]=1,e+xN[e]},CN=function(){};function SN(e){return sM(e)?0:tM(e)?e.length:Object.keys(e).length}var wN,TN,kN,_N,ON,AN,IN=iN((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return uN||(uN=document.createElement("canvas").getContext("2d")),uN.font=[a,o,i,n+"px",r].join(" "),uN.measureText(wM(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),JI([e],GM(t)).join("")})),MN=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();(TN=wN||(wN={})).FORE="fore",TN.MID="mid",TN.BG="bg",(_N=kN||(kN={})).TOP="top",_N.TOP_LEFT="top-left",_N.TOP_RIGHT="top-right",_N.RIGHT="right",_N.RIGHT_TOP="right-top",_N.RIGHT_BOTTOM="right-bottom",_N.LEFT="left",_N.LEFT_TOP="left-top",_N.LEFT_BOTTOM="left-bottom",_N.BOTTOM="bottom",_N.BOTTOM_LEFT="bottom-left",_N.BOTTOM_RIGHT="bottom-right",_N.RADIUS="radius",_N.CIRCLE="circle",_N.NONE="none",(AN=ON||(ON={})).AXIS="axis",AN.GRID="grid",AN.LEGEND="legend",AN.TOOLTIP="tooltip",AN.ANNOTATION="annotation",AN.SLIDER="slider",AN.SCROLLBAR="scrollbar",AN.OTHER="other";var NN,PN,FN,LN,RN,DN,BN,$N,zN=3,HN=2,jN=1;(PN=NN||(NN={})).BEFORE_RENDER="beforerender",PN.AFTER_RENDER="afterrender",PN.BEFORE_PAINT="beforepaint",PN.AFTER_PAINT="afterpaint",PN.BEFORE_CHANGE_DATA="beforechangedata",PN.AFTER_CHANGE_DATA="afterchangedata",PN.BEFORE_CLEAR="beforeclear",PN.AFTER_CLEAR="afterclear",PN.BEFORE_DESTROY="beforedestroy",PN.BEFORE_CHANGE_SIZE="beforechangesize",PN.AFTER_CHANGE_SIZE="afterchangesize",(LN=FN||(FN={})).BEFORE_DRAW_ANIMATE="beforeanimate",LN.AFTER_DRAW_ANIMATE="afteranimate",(DN=RN||(RN={})).MOUSE_ENTER="plot:mouseenter",DN.MOUSE_DOWN="plot:mousedown",DN.MOUSE_MOVE="plot:mousemove",DN.MOUSE_UP="plot:mouseup",DN.MOUSE_LEAVE="plot:mouseleave",DN.TOUCH_START="plot:touchstart",DN.TOUCH_MOVE="plot:touchmove",DN.TOUCH_END="plot:touchend",DN.TOUCH_CANCEL="plot:touchcancel",DN.CLICK="plot:click",DN.DBLCLICK="plot:dblclick",DN.CONTEXTMENU="plot:contextmenu",DN.LEAVE="plot:leave",DN.ENTER="plot:enter",($N=BN||(BN={})).ACTIVE="active",$N.INACTIVE="inactive",$N.SELECTED="selected",$N.DEFAULT="default";var GN,VN,YN,UN,qN=["color","shape","size"],WN={};function XN(e,t){WN[e]=t}function KN(e,t,n){if(e){if("function"==typeof e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if("function"==typeof e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}}}function QN(e){GN||(GN=document.createElement("table"),VN=document.createElement("tr"),YN=/^\s*<(\w+|!)[^>]*>/,UN={tr:document.createElement("tbody"),tbody:GN,thead:GN,tfoot:GN,td:VN,th:VN,"*":document.createElement("div")});var t=YN.test(e)&&RegExp.$1;t&&t in UN||(t="*");var n=UN[t];e=e.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+e;var r=n.childNodes[0];return n.removeChild(r),r}function ZN(e,t,n){var r;try{r=window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.style[t]}catch(uu){}finally{r=void 0===r?n:r}return r}function JN(e,t){var n=function(e,t){var n=ZN(e,"height",t);return"auto"===n&&(n=e.offsetHeight),parseFloat(n)}(e,t),r=parseFloat(ZN(e,"borderTopWidth"))||0,i=parseFloat(ZN(e,"paddingTop"))||0,a=parseFloat(ZN(e,"paddingBottom"))||0;return n+r+(parseFloat(ZN(e,"borderBottomWidth"))||0)+i+a+(parseFloat(ZN(e,"marginTop"))||0)+(parseFloat(ZN(e,"marginBottom"))||0)}function eP(e,t){var n=function(e,t){var n=ZN(e,"width",t);return"auto"===n&&(n=e.offsetWidth),parseFloat(n)}(e,t),r=parseFloat(ZN(e,"borderLeftWidth"))||0,i=parseFloat(ZN(e,"paddingLeft"))||0,a=parseFloat(ZN(e,"paddingRight"))||0,o=parseFloat(ZN(e,"borderRightWidth"))||0,s=parseFloat(ZN(e,"marginRight"))||0;return n+r+o+i+a+(parseFloat(ZN(e,"marginLeft"))||0)+s}function tP(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e}function nP(e){return"number"==typeof e&&!isNaN(e)}function rP(e,t,n,r){var i=n,a=r;if(t){var o=function(e){var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}(e);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(nP(i)?i:1,1),height:Math.max(nP(a)?a:1,1)}}var iP=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0),this},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],a=this._events["*"]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],s=o.callback;o.once&&(r.splice(a,1),0===r.length&&delete t._events[e],i--,a--),s.apply(t,n)}};o(i),o(a)},e.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}(),aP=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=t.visible,i=void 0===r||r;return n.visible=i,n}return KI(t,e),t.prototype.show=function(){this.visible||this.changeVisible(!0)},t.prototype.hide=function(){this.visible&&this.changeVisible(!1)},t.prototype.destroy=function(){this.off(),this.destroyed=!0},t.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},t}(iP),oP="\t\n\v\f\r   ᠎             　\u2028\u2029",sP=new RegExp("([a-z])["+oP+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+oP+"]*,?["+oP+"]*)+)","ig"),lP=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+oP+"]*,?["+oP+"]*","ig"),cP=function(e){if(!e)return null;if(lM(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(sP,(function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(lP,(function(e,t){t&&o.push(+t)})),"m"===s&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===o.length&&n.push([i,o[0]]),"r"===s)n.push([i].concat(o));else for(;o.length>=t[s]&&(n.push([i].concat(o.splice(0,t[s]))),t[s]););return e})),n},uP=function(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var a=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4===r?a[3]={x:+e[0],y:+e[1]}:i-2===r&&(a[2]={x:+e[0],y:+e[1]},a[3]={x:+e[2],y:+e[3]}):a[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},hP=function(e,t,n,r,i){var a=[];if(null===i&&null===r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!==i){var o=Math.PI/180,s=e+n*Math.cos(-r*o),l=e+n*Math.cos(-i*o);a=[["M",s,t+n*Math.sin(-r*o)],["A",n,n,0,+(i-r>180),0,l,t+n*Math.sin(-i*o)]]}else a=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return a},pP=function(e){if(!(e=cP(e))||!e.length)return[["M",0,0]];var t,n,r=[],i=0,a=0,o=0,s=0,l=0;"M"===e[0][0]&&(o=i=+e[0][1],s=a=+e[0][2],l++,r[0]=["M",i,a]);for(var c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),u=void 0,h=void 0,p=l,d=e.length;p<d;p++){if(r.push(u=[]),(t=(h=e[p])[0])!==t.toUpperCase())switch(u[0]=t.toUpperCase(),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+h[6]+i,u[7]=+h[7]+a;break;case"V":u[1]=+h[1]+a;break;case"H":u[1]=+h[1]+i;break;case"R":for(var f=2,m=(n=[i,a].concat(h.slice(1))).length;f<m;f++)n[f]=+n[f]+i,n[++f]=+n[f]+a;r.pop(),r=r.concat(uP(n,c));break;case"O":r.pop(),(n=hP(i,a,h[1],h[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(hP(i,a,h[1],h[2],h[3])),u=["U"].concat(r[r.length-1].slice(-2));break;case"M":o=+h[1]+i,s=+h[2]+a;break;default:for(f=1,m=h.length;f<m;f++)u[f]=+h[f]+(f%2?i:a)}else if("R"===t)n=[i,a].concat(h.slice(1)),r.pop(),r=r.concat(uP(n,c)),u=["R"].concat(h.slice(-2));else if("O"===t)r.pop(),(n=hP(i,a,h[1],h[2])).push(n[0]),r=r.concat(n);else if("U"===t)r.pop(),r=r.concat(hP(i,a,h[1],h[2],h[3])),u=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,y=h.length;g<y;g++)u[g]=h[g];if("O"!==(t=t.toUpperCase()))switch(u[0]){case"Z":i=+o,a=+s;break;case"H":i=u[1];break;case"V":a=u[1];break;case"M":o=u[u.length-2],s=u[u.length-1];break;default:i=u[u.length-2],a=u[u.length-1]}}return r},dP=function(e,t,n,r){return[e,t,n,r,n,r]},fP=function(e,t,n,r,i,a){var o=1/3,s=2/3;return[o*e+s*n,o*t+s*r,o*i+s*n,o*a+s*r,i,a]},mP=function(e,t,n,r,i,a,o,s,l,c){n===r&&(n+=1);var u,h,p,d,f,m=120*Math.PI/180,g=Math.PI/180*(+i||0),y=[],v=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(c)h=c[0],p=c[1],d=c[2],f=c[3];else{e=(u=v(e,t,-g)).x,t=u.y,s=(u=v(s,l,-g)).x,l=u.y,e===s&&t===l&&(s+=1,l+=1);var E=(e-s)/2,x=(t-l)/2,b=E*E/(n*n)+x*x/(r*r);b>1&&(n*=b=Math.sqrt(b),r*=b);var C=n*n,S=r*r,w=(a===o?-1:1)*Math.sqrt(Math.abs((C*S-C*x*x-S*E*E)/(C*x*x+S*E*E)));d=w*n*x/r+(e+s)/2,f=w*-r*E/n+(t+l)/2,h=Math.asin(((t-f)/r).toFixed(9)),p=Math.asin(((l-f)/r).toFixed(9)),h=e<d?Math.PI-h:h,p=s<d?Math.PI-p:p,h<0&&(h=2*Math.PI+h),p<0&&(p=2*Math.PI+p),o&&h>p&&(h-=2*Math.PI),!o&&p>h&&(p-=2*Math.PI)}var T=p-h;if(Math.abs(T)>m){var k=p,_=s,O=l;p=h+m*(o&&p>h?1:-1),s=d+n*Math.cos(p),l=f+r*Math.sin(p),y=mP(s,l,n,r,i,0,o,_,O,[p,k,d,f])}T=p-h;var A=Math.cos(h),I=Math.sin(h),M=Math.cos(p),N=Math.sin(p),P=Math.tan(T/4),F=4/3*n*P,L=4/3*r*P,R=[e,t],D=[e+F*I,t-L*A],B=[s+F*N,l-L*M],$=[s,l];if(D[0]=2*R[0]-D[0],D[1]=2*R[1]-D[1],c)return[D,B,$].concat(y);for(var z=[],H=0,j=(y=[D,B,$].concat(y).join().split(",")).length;H<j;H++)z[H]=H%2?v(y[H-1],y[H],g).y:v(y[H],y[H+1],g).x;return z},gP=function(e,t){var n,r=pP(e),i=t&&pP(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],c="",u="",h=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(mP.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(fP(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(fP(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(dP(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(dP(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(dP(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(dP(t.x,t.y,t.X,t.Y))}return e},p=function(e,t){if(e[t].length>7){e[t].shift();for(var a=e[t];a.length;)s[t]="A",i&&(l[t]="A"),e.splice(t++,0,["C"].concat(a.splice(0,6)));e.splice(t,1),n=Math.max(r.length,i&&i.length||0)}},d=function(e,t,a,o,s){e&&t&&"M"===e[s][0]&&"M"!==t[s][0]&&(t.splice(s,0,["M",o.x,o.y]),a.bx=0,a.by=0,a.x=e[s][1],a.y=e[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var f=0;f<n;f++){r[f]&&(c=r[f][0]),"C"!==c&&(s[f]=c,f&&(u=s[f-1])),r[f]=h(r[f],a,u),"A"!==s[f]&&"C"===c&&(s[f]="C"),p(r,f),i&&(i[f]&&(c=i[f][0]),"C"!==c&&(l[f]=c,f&&(u=l[f-1])),i[f]=h(i[f],o,u),"A"!==l[f]&&"C"===c&&(l[f]="C"),p(i,f)),d(r,i,a,o,f),d(i,r,o,a,f);var m=r[f],g=i&&i[f],y=m.length,v=i&&g.length;a.x=m[y-2],a.y=m[y-1],a.bx=parseFloat(m[y-4])||a.x,a.by=parseFloat(m[y-3])||a.y,o.bx=i&&(parseFloat(g[v-4])||o.x),o.by=i&&(parseFloat(g[v-3])||o.y),o.x=i&&g[v-2],o.y=i&&g[v-1]}return i?[r,i]:r},yP=/,?([a-z]),?/gi,vP=function(e){return e.join(",").replace(yP,"$1")},EP=function(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n},xP=function(e,t,n,r,i,a,o,s,l){null===l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,d=0;d<12;d++){var f=c*u[d]+c,m=EP(f,e,n,i,o),g=EP(f,t,r,a,s),y=m*m+g*g;p+=h[d]*Math.sqrt(y)}return c*p},bP=function(e,t,n,r,i,a,o,s){for(var l,c,u,h,p=[],d=[[],[]],f=0;f<2;++f)if(0===f?(c=6*e-12*n+6*i,l=-3*e+9*n-9*i+3*o,u=3*n-3*e):(c=6*t-12*r+6*a,l=-3*t+9*r-9*a+3*s,u=3*r-3*t),Math.abs(l)<1e-12){if(Math.abs(c)<1e-12)continue;(h=-u/c)>0&&h<1&&p.push(h)}else{var m=c*c-4*u*l,g=Math.sqrt(m);if(!(m<0)){var y=(-c+g)/(2*l);y>0&&y<1&&p.push(y);var v=(-c-g)/(2*l);v>0&&v<1&&p.push(v)}}for(var E,x=p.length,b=x;x--;)E=1-(h=p[x]),d[0][x]=E*E*E*e+3*E*E*h*n+3*E*h*h*i+h*h*h*o,d[1][x]=E*E*E*t+3*E*E*h*r+3*E*h*h*a+h*h*h*s;return d[0][b]=e,d[1][b]=t,d[0][b+1]=o,d[1][b+1]=s,d[0].length=d[1].length=b+2,{min:{x:Math.min.apply(0,d[0]),y:Math.min.apply(0,d[1])},max:{x:Math.max.apply(0,d[0]),y:Math.max.apply(0,d[1])}}},CP=function(e,t,n,r,i,a,o,s){if(!(Math.max(e,n)<Math.min(i,o)||Math.min(e,n)>Math.max(i,o)||Math.max(t,r)<Math.min(a,s)||Math.min(t,r)>Math.max(a,s))){var l=(e-n)*(a-s)-(t-r)*(i-o);if(l){var c=((e*r-t*n)*(i-o)-(e-n)*(i*s-a*o))/l,u=((e*r-t*n)*(a-s)-(t-r)*(i*s-a*o))/l,h=+c.toFixed(2),p=+u.toFixed(2);if(!(h<+Math.min(e,n).toFixed(2)||h>+Math.max(e,n).toFixed(2)||h<+Math.min(i,o).toFixed(2)||h>+Math.max(i,o).toFixed(2)||p<+Math.min(t,r).toFixed(2)||p>+Math.max(t,r).toFixed(2)||p<+Math.min(a,s).toFixed(2)||p>+Math.max(a,s).toFixed(2)))return{x:c,y:u}}}},SP=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},wP=function(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return a.parsePathArray=vP,a},TP=function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:wP(e,t,n,r),vb:[e,t,n,r].join(" ")}},kP=function(e,t,n,r,i,a,o,s){lM(e)||(e=[e,t,n,r,i,a,o,s]);var l=bP.apply(null,e);return TP(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},_P=function(e,t,n,r,i,a,o,s,l){var c=1-l,u=Math.pow(c,3),h=Math.pow(c,2),p=l*l,d=p*l,f=e+2*l*(n-e)+p*(i-2*n+e),m=t+2*l*(r-t)+p*(a-2*r+t),g=n+2*l*(i-n)+p*(o-2*i+n),y=r+2*l*(a-r)+p*(s-2*a+r);return{x:u*e+3*h*l*n+3*c*l*l*i+d*o,y:u*t+3*h*l*r+3*c*l*l*a+d*s,m:{x:f,y:m},n:{x:g,y:y},start:{x:c*e+l*n,y:c*t+l*r},end:{x:c*i+l*o,y:c*a+l*s},alpha:90-180*Math.atan2(f-g,m-y)/Math.PI}},OP=function(e,t,n){if(!function(e,t){return e=TP(e),t=TP(t),SP(t,e.x,e.y)||SP(t,e.x2,e.y)||SP(t,e.x,e.y2)||SP(t,e.x2,e.y2)||SP(e,t.x,t.y)||SP(e,t.x2,t.y)||SP(e,t.x,t.y2)||SP(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(kP(e),kP(t)))return n?0:[];for(var r=~~(xP.apply(0,e)/8),i=~~(xP.apply(0,t)/8),a=[],o=[],s={},l=n?0:[],c=0;c<r+1;c++){var u=_P.apply(0,e.concat(c/r));a.push({x:u.x,y:u.y,t:c/r})}for(c=0;c<i+1;c++){u=_P.apply(0,t.concat(c/i));o.push({x:u.x,y:u.y,t:c/i})}for(c=0;c<r;c++)for(var h=0;h<i;h++){var p=a[c],d=a[c+1],f=o[h],m=o[h+1],g=Math.abs(d.x-p.x)<.001?"y":"x",y=Math.abs(m.x-f.x)<.001?"y":"x",v=CP(p.x,p.y,d.x,d.y,f.x,f.y,m.x,m.y);if(v){if(s[v.x.toFixed(4)]===v.y.toFixed(4))continue;s[v.x.toFixed(4)]=v.y.toFixed(4);var E=p.t+Math.abs((v[g]-p[g])/(d[g]-p[g]))*(d.t-p.t),x=f.t+Math.abs((v[y]-f[y])/(m[y]-f[y]))*(m.t-f.t);E>=0&&E<=1&&x>=0&&x<=1&&(n?l+=1:l.push({x:v.x,y:v.y,t1:E,t2:x}))}}return l};function AP(e,t){var n=[],r=[];return e.length&&function e(t,i){if(1===t.length)n.push(t[0]),r.push(t[0]);else{for(var a=[],o=0;o<t.length-1;o++)0===o&&n.push(t[0]),o===t.length-2&&r.push(t[o+1]),a[o]=[(1-i)*t[o][0]+i*t[o+1][0],(1-i)*t[o][1]+i*t[o+1][1]];e(a,i)}}(e,t),{left:n,right:r.reverse()}}var IP=function(e,t,n){if(1===n)return[[].concat(e)];var r=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])r=r.concat(function(e,t,n){var r=[[e[1],e[2]]];n=n||2;var i=[];"A"===t[0]?(r.push(t[6]),r.push(t[7])):"C"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]]),r.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]])):r.push([t[1],t[2]]);for(var a=r,o=1/n,s=0;s<n-1;s++){var l=AP(a,o/(1-o*s));i.push(l.left),a=l.right}return i.push(a),i.map((function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t.concat(e[e.length-1])}))}(e,t,n));else{var i=[].concat(e);"M"===i[0]&&(i[0]="L");for(var a=0;a<=n-1;a++)r.push(i)}return r},MP=function(e,t){if(e.length!==t.length)return!1;var n=!0;return uM(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function NP(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var PP=function(e,t){var n=function(e,t){var n,r,i=e.length,a=t.length,o=0;if(0===i||0===a)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=a;c++)s[0][c]={min:c};for(l=1;l<=i;l++)for(n=e[l-1],c=1;c<=a;c++){r=t[c-1],o=MP(n,r)?0:1;var u=s[l-1][c].min+1,h=s[l][c-1].min+1,p=s[l-1][c-1].min+o;s[l][c]=NP(u,h,p)}return s}(e,t),r=e.length,i=t.length,a=[],o=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=o;u<=i;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);o=s,n[l][o].type&&a.push({index:l-1,type:n[l][o].type})}for(l=a.length-1;l>=0;l--)o=a[l].index,"add"===a[l].type?e.splice(o,0,[].concat(e[o])):e.splice(o,1)}var h=i-(r=e.length);if(r<i)for(l=0;l<h;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function FP(e,t,n){for(var r,i=[].concat(e),a=1/(n+1),o=LP(t)[0],s=1;s<=n;s++)a*=s,0===(r=Math.floor(e.length*a))?i.unshift([o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]):i.splice(r,0,[o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]);return i}function LP(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var RP=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=LP(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=FP(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=FP(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=FP(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e},DP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",catmullRomToBezier:uP,fillPath:function(e,t){if(1===e.length)return e;var n=e.length-1,r=t.length-1,i=n/r,a=[];if(1===e.length&&"M"===e[0][0]){for(var o=0;o<r-n;o++)e.push(e[0]);return e}for(o=0;o<r;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce((function(t,r,i){return i===n?t.concat(e[n]):t.concat(IP(e[i],e[i+1],r))}),[]);return l.unshift(e[0]),"Z"!==t[r]&&"z"!==t[r]||l.push("Z"),l},fillPathByDiff:PP,formatPath:RP,intersection:function(e,t){return function(e,t,n){var r,i,a,o,s,l,c,u,h,p;e=gP(e),t=gP(t);for(var d=n?0:[],f=0,m=e.length;f<m;f++){var g=e[f];if("M"===g[0])r=s=g[1],i=l=g[2];else{"C"===g[0]?(h=[r,i].concat(g.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,s,l,s,l],r=s,i=l);for(var y=0,v=t.length;y<v;y++){var E=t[y];if("M"===E[0])a=c=E[1],o=u=E[2];else{"C"===E[0]?(p=[a,o].concat(E.slice(1)),a=p[6],o=p[7]):(p=[a,o,a,o,c,u,c,u],a=c,o=u);var x=OP(h,p,n);if(n)d+=x;else{for(var b=0,C=x.length;b<C;b++)x[b].segment1=f,x[b].segment2=y,x[b].bez1=h,x[b].bez2=p;d=d.concat(x)}}}}}return d}(e,t)},parsePathArray:vP,parsePathString:cP,pathToAbsolute:pP,pathToCurve:gP,rectPath:wP}),BP=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function $P(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var zP="undefined"!=typeof window&&void 0!==window.document;function HP(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function jP(e){return e.cfg.visible&&e.cfg.capture}var GP=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=tN(r,t),n}return KI(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(iP),VP=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},YP=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},UP=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},qP=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},WP=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},XP=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},KP=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,QP=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],ZP=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function JP(e){return e?eF(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new XP:"undefined"!=typeof navigator?eF(navigator.userAgent):"undefined"!=typeof process&&process.version?new UP(process.version.slice(1)):null}function eF(e){var t=function(e){return""!==e&&QP.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var a=i.exec(e);return!!a&&[r,a]}),!1)}(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new WP;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=VP(VP([],i,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-i.length),!0)):i=[];var a=i.join("."),o=function(e){for(var t=0,n=ZP.length;t<n;t++){var r=ZP[t],i=r[0];if(r[1].exec(e))return i}return null}(e),s=KP.exec(e);return s&&s[1]?new qP(n,a,o,s[1]):new YP(n,a,o)}var tF,nF="undefined"!=typeof Float32Array?Float32Array:Array;function rF(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=n[0],d=n[1],f=n[2],m=n[3],g=n[4],y=n[5],v=n[6],E=n[7],x=n[8];return e[0]=p*r+d*o+f*c,e[1]=p*i+d*s+f*u,e[2]=p*a+d*l+f*h,e[3]=m*r+g*o+y*c,e[4]=m*i+g*s+y*u,e[5]=m*a+g*l+y*h,e[6]=v*r+E*o+x*c,e[7]=v*i+E*s+x*u,e[8]=v*a+E*l+x*h,e}function iF(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function aF(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function oF(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function sF(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function lF(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function cF(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function uF(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function hF(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function pF(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function dF(e,t){return e[0]*t[0]+e[1]*t[1]}function fF(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),s=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),tF=new nF(3),nF!=Float32Array&&(tF[0]=0,tF[1]=0,tF[2]=0);var mF=oF;function gF(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1}(r,n),rF(e,r,t)}function yF(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),rF(e,r,t)}function vF(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),rF(e,r,t)}function EF(e,t,n){return rF(e,n,t)}function xF(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var a=t[r];switch(a[0]){case"t":gF(n,n,[a[1],a[2]]);break;case"s":vF(n,n,[a[1],a[2]]);break;case"r":yF(n,n,a[1]);break;case"m":EF(n,n,a[1])}}return n}function bF(e,t,n){var r=fF(e,t),i=function(e,t){return e[0]*t[1]-t[0]*e[1]}(e,t)>=0;return n?i?2*Math.PI-r:r:i?r:2*Math.PI-r}function CF(e,t){var n=[],r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=t[0],d=t[1],f=t[2],m=t[3],g=t[4],y=t[5],v=t[6],E=t[7],x=t[8];return n[0]=p*r+d*o+f*c,n[1]=p*i+d*s+f*u,n[2]=p*a+d*l+f*h,n[3]=m*r+g*o+y*c,n[4]=m*i+g*s+y*u,n[5]=m*a+g*l+y*h,n[6]=v*r+E*o+x*c,n[7]=v*i+E*s+x*u,n[8]=v*a+E*l+x*h,n}function SF(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}function wF(e){var t=[],n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,t[0]=h*f,t[1]=(-u*r+i*c)*f,t[2]=(s*r-i*o)*f,t[3]=p*f,t[4]=(u*n-i*l)*f,t[5]=(-s*n+i*a)*f,t[6]=d*f,t[7]=(-c*n+r*l)*f,t[8]=(o*n-r*a)*f,t):null}!function(){var e=function(){var e=new nF(2);return nF!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var TF=xF,kF=["zIndex","capture","visible","type"],_F=["repeat"];function OF(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function AF(e,t){var n={},r=t.attr();return uM(e,(function(e,t){-1!==_F.indexOf(t)||hN(r[t],e)||(n[t]=e)})),n}function IF(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return uM(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&uM(t.toAttrs,(function(t,n){a.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var MF=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return tN(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return KI(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(cM(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?($P(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr("matrix")},t.prototype.setMatrix=function(e){this.attr("matrix",e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?CF(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?CF(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?SF(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=wF(t);if(n)return SF(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[qM(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};uM(t,(function(e,r){lM(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)lM(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return uM(kF,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,a,o,s,l,c=e[0],u=e[1],h=e[2],p=void 0===h?"easeLinear":h,d=e[3],f=void 0===d?CN:d,m=e[4],g=void 0===m?0:m;oM(c)?(i=c,c={}):cM(c)&&c.onFrame&&(i=c.onFrame,a=c.repeat),cM(u)?(u=(l=u).duration,p=l.easing||"easeLinear",g=l.delay||0,a=l.repeat||a||!1,f=l.callback||CN,o=l.pauseCallback||CN,s=l.resumeCallback||CN):(RM(f)&&(g=f,f=null),oM(p)?(f=p,p="easeLinear"):p=p||"easeLinear");var y=AF(c,this),v={fromAttrs:OF(y,this),toAttrs:y,duration:u,easing:p,repeat:a,callback:f,pauseCallback:o,resumeCallback:s,delay:g,startTime:n.getTime(),id:bN(),onFrame:i,pathFormatted:!1};r.length>0?r=IF(r,v):n.addAnimator(this),r.push(v),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),uM(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return uM(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return uM(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var a=function(e){var a=i[e],s=a.get("name");if(s){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&n&&HP(a,n))return"break";lM(s)?uM(s,(function(e){r.emitDelegateEvent(a,e,t)})):o.emitDelegateEvent(a,s,t)}},o=this,s=0;s<i.length;s++){if("break"===a(s))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=TF(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=TF(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=TF(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),a=TF(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(a),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=TF(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(GP),NF={};function PF(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){PF(e,t)}))}}function FF(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){FF(e,t)}))}}var LF,RF,DF=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(uM(o,(function(e){var t=e.getBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=EM(i),t=vM(i),n=EM(a),r=vM(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(uM(o,(function(e){var t=e.getCanvasBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=EM(i),t=vM(i),n=EM(a),r=vM(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){uM(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];cM(n)?r=n:r.type=n;var i=NF[r.type];i||(i=qM(r.type),NF[r.type]=i);var a=this.getShapeBase(),o=new a[i](r);return this.add(o),o},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if(oM(r))n=new r(i||{parent:this});else{var a=r||{},o=this.getGroupBase();n=new o(a)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!jP(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var a=[e,t,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,a=e.length-1;a>=0;a--){var o=e[a];if(jP(o)&&(o.isGroup()?i=o.getShape(t,n,r):o.isHit(t,n)&&(i=o)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),$P(e.getChildren(),t)}(i,e,!1),e.set("parent",this),t&&PF(e,t),r&&FF(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();uM(t,(function(e,t){return e._INDEX=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return uM(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return uM(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(MF),BF=0,$F=0,zF=0,HF=0,jF=0,GF=0,VF="object"==typeof performance&&performance.now?performance:Date,YF="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function UF(){return jF||(YF(qF),jF=VF.now()+GF)}function qF(){jF=0}function WF(){this._call=this._time=this._next=null}function XF(e,t,n){var r=new WF;return r.restart(e,t,n),r}function KF(){jF=(HF=VF.now())+GF,BF=$F=0;try{!function(){UF(),++BF;for(var e,t=LF;t;)(e=jF-t._time)>=0&&t._call.call(null,e),t=t._next;--BF}()}finally{BF=0,function(){var e,t,n=LF,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:LF=t);RF=e,ZF(r)}(),jF=0}}function QF(){var e=VF.now(),t=e-HF;t>1e3&&(GF-=t,HF=e)}function ZF(e){BF||($F&&($F=clearTimeout($F)),e-jF>24?(e<1/0&&($F=setTimeout(KF,e-VF.now()-GF)),zF&&(zF=clearInterval(zF))):(zF||(HF=VF.now(),zF=setInterval(QF,1e3)),BF=1,YF(KF)))}function JF(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function eL(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}WF.prototype=XF.prototype={constructor:WF,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?UF():+n)+(null==t?0:+t),this._next||RF===this||(RF?RF._next=this:LF=this,RF=this),this._call=e,this._time=n,ZF()},stop:function(){this._call&&(this._call=null,this._time=1/0,ZF())}};var tL=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),nL=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),rL=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),iL=Math.PI,aL=iL/2;function oL(e){return(1-Math.cos(iL*e))/2}function sL(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function lL(e){return((e*=2)<=1?sL(1-e):2-sL(e-1))/2}function cL(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var uL=4/11;function hL(e){return(e=+e)<uL?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375}var pL=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158),dL=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158),fL=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),mL=2*Math.PI,gL=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=mL);function i(e){return t*sL(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*mL)},i.period=function(n){return e(t,n)},i}(1,.3),yL=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=mL);function i(e){return 1-t*sL(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*mL)},i.period=function(n){return e(t,n)},i}(1,.3),vL=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=mL);function i(e){return((e=2*e-1)<0?t*sL(-e)*Math.sin((r-e)/n):2-t*sL(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*mL)},i.period=function(n){return e(t,n)},i}(1,.3),EL=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:function(e){return+e},easeQuad:JF,easeQuadIn:function(e){return e*e},easeQuadOut:function(e){return e*(2-e)},easeQuadInOut:JF,easeCubic:eL,easeCubicIn:function(e){return e*e*e},easeCubicOut:function(e){return--e*e*e+1},easeCubicInOut:eL,easePoly:rL,easePolyIn:tL,easePolyOut:nL,easePolyInOut:rL,easeSin:oL,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*aL)},easeSinOut:function(e){return Math.sin(e*aL)},easeSinInOut:oL,easeExp:lL,easeExpIn:function(e){return sL(1-+e)},easeExpOut:function(e){return 1-sL(e)},easeExpInOut:lL,easeCircle:cL,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCircleInOut:cL,easeBounce:hL,easeBounceIn:function(e){return 1-hL(1-e)},easeBounceOut:hL,easeBounceInOut:function(e){return((e*=2)<=1?1-hL(1-e):hL(e-1)+1)/2},easeBack:fL,easeBackIn:pL,easeBackOut:dL,easeBackInOut:fL,easeElastic:yL,easeElasticIn:gL,easeElasticOut:yL,easeElasticInOut:vL});function xL(e){return function(){return e}}function bL(e){return 1==(e=+e)?CL:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):xL(isNaN(t)?n:t)}}function CL(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):xL(isNaN(e)?t:e)}var SL=function e(t){var n=bL(t);function r(e,t){var r=n((e=_e(e)).r,(t=_e(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=CL(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function wL(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function TL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kL(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=PL(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function _L(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function OL(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function AL(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=PL(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var IL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ML=new RegExp(IL.source,"g");function NL(e,t){var n,r,i,a=IL.lastIndex=ML.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=IL.exec(e))&&(r=ML.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:OL(n,r)})),a=ML.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function PL(e,t){var n,r=typeof t;return null==t||"boolean"===r?xL(t):("number"===r?OL:"string"===r?(n=Te(t))?(t=n,SL):NL:t instanceof Te?SL:t instanceof Date?_L:TL(t)?wL:Array.isArray(t)?kL:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?AL:OL)(e,t)}var FL=[1,0,0,0,1,0,0,0,1];function LL(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var a=t.duration,o=t.easing;if(n=n-i-t.delay,t.repeat)r=n%a/a,r=EL[o](r);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=EL[o](r)}if(t.onFrame){var s=t.onFrame(r);e.attr(s)}else!function(e,t,n){var r={},i=t.fromAttrs,a=t.toAttrs;if(!e.destroyed){var o,s,l,c;for(var u in a)if(!hN(i[u],a[u]))if("path"===u){var h=a[u],p=i[u];h.length>p.length?(h=cP(a[u]),p=cP(i[u]),p=PP(p,h),p=RP(p,h),t.fromAttrs.path=p,t.toAttrs.path=h):t.pathFormatted||(h=cP(a[u]),p=cP(i[u]),p=RP(p,h),t.fromAttrs.path=p,t.toAttrs.path=h,t.pathFormatted=!0),r[u]=[];for(var d=0;d<h.length;d++){for(var f=h[d],m=p[d],g=[],y=0;y<f.length;y++)RM(f[y])&&m&&RM(m[y])?(o=PL(m[y],f[y]),g.push(o(n))):g.push(f[y]);r[u].push(g)}}else if("matrix"===u){var v=(l=i[u]||FL,(TL(c=a[u]||FL)?wL:kL)(l,c))(n);r[u]=v}else["fill","stroke","fillStyle","strokeStyle"].includes(u)&&(s=a[u],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[u]=a[u]:oM(a[u])||(o=PL(i[u],a[u]),r[u]=o(n));e.attr(r)}}(e,t,r);return!1}var RL=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=XF((function(i){if(r.current=i,r.animators.length>0){for(var a=r.animators.length-1;a>=0;a--)if((e=r.animators[a]).destroyed)r.removeAnimator(a);else{if(!e.isAnimatePaused())for(var o=(t=e.get("animations")).length-1;o>=0;o--)n=t[o],LL(e,n,i)&&(t.splice(o,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(a)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),DL=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function BL(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function $L(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&HP(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var zL=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");uM(DL,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");uM(DL,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,a){var o=new BP(e,t);return o.fromShape=i,o.toShape=a,o.x=n.x,o.y=n.y,o.clientX=n.clientX,o.clientY=n.clientY,o.propagationPath.push(r),o},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],a=!1;if(i)i.call(this,n,r,t);else{var o=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(a=!0,o&&this._emitEvent(e,t,n,o,o,null),this._emitEvent(e,t,n,null,o,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(a||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,a);else{var o=this.mousedownPoint;if(o){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=o.clientX-e.clientX,u=o.clientY-e.clientY;l>120||c*c+u*u>40?s&&s.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,e,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,a){var o=this._getEventObj(e,t,n,r,i,a);if(r){o.shape=r,BL(r,e,o);for(var s=r.getParent();s;)s.emitDelegation(e,o),o.propagationStopped||$L(s,e,o),o.propagationPath.push(s),s=s.getParent()}else{BL(this.canvas,e,o)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),HL=JP(),jL=HL&&"firefox"===HL.name,GL=function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");wM(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new zL({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new RL(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");zP&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");zP&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(jL&&!sM(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!sM(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(DF),VL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t},t}(DF),YL=function(e){function t(t){return e.call(this,t)||this}return KI(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,a=e.maxY;if(t){var o=SF(t,[e.minX,e.minY]),s=SF(t,[e.maxX,e.minY]),l=SF(t,[e.minX,e.maxY]),c=SF(t,[e.maxX,e.maxY]);n=Math.min(o[0],s[0],l[0],c[0]),i=Math.max(o[0],s[0],l[0],c[0]),r=Math.min(o[1],s[1],l[1],c[1]),a=Math.max(o[1],s[1],l[1],c[1])}var u=this.attrs;if(u.shadowColor){var h=u.shadowBlur,p=void 0===h?0:h,d=u.shadowOffsetX,f=void 0===d?0:d,m=u.shadowOffsetY,g=void 0===m?0:m,y=n-p+f,v=i+p+f,E=r-p+g,x=a+p+g;n=Math.min(n,y),i=Math.max(i,v),r=Math.min(r,E),a=Math.max(a,x)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],a=(i=this.invertFromMatrix(i))[0],o=i[1],s=this._isInBBox(a,o);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(a,o)){if(this.isInShape(a,o))return!0;if(n&&n.isHit(a,o))return!0;if(r&&r.isHit(a,o))return!0}return!1},t}(MF),UL=new Map;function qL(e,t){UL.set(e,t)}function WL(e){return UL.get(e)}function XL(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function KL(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function QL(e){return Math.min.apply(null,e)}function ZL(e){return Math.max.apply(null,e)}function JL(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function eR(e,t){return Math.abs(e-t)<.001}function tR(e,t){var n=QL(e),r=QL(t);return{x:n,y:r,width:ZL(e)-n,height:ZL(t)-r}}function nR(e){return(e+2*Math.PI)%(2*Math.PI)}var rR={box:function(e,t,n,r){return tR([e,n],[t,r])},length:function(e,t,n,r){return JL(e,t,n,r)},pointAt:function(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}},pointDistance:function(e,t,n,r,i,a){var o=(n-e)*(i-e)+(r-t)*(a-t);return o<0?JL(e,t,i,a):o>(n-e)*(n-e)+(r-t)*(r-t)?JL(n,r,i,a):this.pointToLine(e,t,n,r,i,a)},pointToLine:function(e,t,n,r,i,a){var o=[n-e,r-t];if(function(e,t){return e[0]===t[0]&&e[1]===t[1]}(o,[0,0]))return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t));var s=[-o[1],o[0]];pF(s,s);var l=[i-e,a-t];return Math.abs(dF(l,s))},tangentAngle:function(e,t,n,r){return Math.atan2(r-t,n-e)}};function iR(e,t,n,r,i,a){var o,s=1/0,l=[n,r],c=20;a&&a>200&&(c=a/10);for(var u=1/c,h=u/10,p=0;p<=c;p++){var d=p*u,f=[i.apply(null,e.concat([d])),i.apply(null,t.concat([d]))];(v=JL(l[0],l[1],f[0],f[1]))<s&&(o=d,s=v)}if(0===o)return{x:e[0],y:t[0]};if(1===o){var m=e.length;return{x:e[m-1],y:t[m-1]}}s=1/0;for(p=0;p<32&&!(h<1e-4);p++){var g=o-h,y=o+h,v=(f=[i.apply(null,e.concat([g])),i.apply(null,t.concat([g]))],JL(l[0],l[1],f[0],f[1]));if(g>=0&&v<s)o=g,s=v;else{var E=[i.apply(null,e.concat([y])),i.apply(null,t.concat([y]))],x=JL(l[0],l[1],E[0],E[1]);y<=1&&x<s?(o=y,s=x):h*=.5}}return{x:i.apply(null,e.concat([o])),y:i.apply(null,t.concat([o]))}}function aR(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function oR(e,t,n){var r=e+n-2*t;if(eR(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function sR(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function lR(e,t,n,r,i,a,o){var s=aR(e,n,i,o),l=aR(t,r,a,o),c=rR.pointAt(e,t,n,r,o),u=rR.pointAt(n,r,i,a,o);return[[e,t,c.x,c.y,s,l],[s,l,u.x,u.y,i,a]]}function cR(e,t,n,r,i,a,o){if(0===o)return(JL(e,t,n,r)+JL(n,r,i,a)+JL(e,t,i,a))/2;var s=lR(e,t,n,r,i,a,.5),l=s[0],c=s[1];return l.push(o-1),c.push(o-1),cR.apply(null,l)+cR.apply(null,c)}var uR={box:function(e,t,n,r,i,a){var o=oR(e,n,i)[0],s=oR(t,r,a)[0],l=[e,i],c=[t,a];return void 0!==o&&l.push(aR(e,n,i,o)),void 0!==s&&c.push(aR(t,r,a,s)),tR(l,c)},length:function(e,t,n,r,i,a){return cR(e,t,n,r,i,a,3)},nearestPoint:function(e,t,n,r,i,a,o,s){return iR([e,n,i],[t,r,a],o,s,aR)},pointDistance:function(e,t,n,r,i,a,o,s){var l=this.nearestPoint(e,t,n,r,i,a,o,s);return JL(l.x,l.y,o,s)},interpolationAt:aR,pointAt:function(e,t,n,r,i,a,o){return{x:aR(e,n,i,o),y:aR(t,r,a,o)}},divide:function(e,t,n,r,i,a,o){return lR(e,t,n,r,i,a,o)},tangentAngle:function(e,t,n,r,i,a,o){var s=sR(e,n,i,o),l=sR(t,r,a,o);return nR(Math.atan2(l,s))}};function hR(e,t,n,r,i){var a=1-i;return a*a*a*e+3*t*i*a*a+3*n*i*i*a+r*i*i*i}function pR(e,t,n,r,i){var a=1-i;return 3*(a*a*(t-e)+2*a*i*(n-t)+i*i*(r-n))}function dR(e,t,n,r){var i,a,o,s=-3*e+9*t-9*n+3*r,l=6*e-12*t+6*n,c=3*t-3*e,u=[];if(eR(s,0))eR(l,0)||(i=-c/l)>=0&&i<=1&&u.push(i);else{var h=l*l-4*s*c;eR(h,0)?u.push(-l/(2*s)):h>0&&(a=(-l-(o=Math.sqrt(h)))/(2*s),(i=(-l+o)/(2*s))>=0&&i<=1&&u.push(i),a>=0&&a<=1&&u.push(a))}return u}function fR(e,t,n,r,i,a,o,s,l){var c=hR(e,n,i,o,l),u=hR(t,r,a,s,l),h=rR.pointAt(e,t,n,r,l),p=rR.pointAt(n,r,i,a,l),d=rR.pointAt(i,a,o,s,l),f=rR.pointAt(h.x,h.y,p.x,p.y,l),m=rR.pointAt(p.x,p.y,d.x,d.y,l);return[[e,t,h.x,h.y,f.x,f.y,c,u],[c,u,m.x,m.y,d.x,d.y,o,s]]}function mR(e,t,n,r,i,a,o,s,l){if(0===l)return function(e,t){for(var n=0,r=e.length,i=0;i<r;i++)n+=JL(e[i],t[i],e[(i+1)%r],t[(i+1)%r]);return n/2}([e,n,i,o],[t,r,a,s]);var c=fR(e,t,n,r,i,a,o,s,.5),u=c[0],h=c[1];return u.push(l-1),h.push(l-1),mR.apply(null,u)+mR.apply(null,h)}var gR={extrema:dR,box:function(e,t,n,r,i,a,o,s){for(var l=[e,o],c=[t,s],u=dR(e,n,i,o),h=dR(t,r,a,s),p=0;p<u.length;p++)l.push(hR(e,n,i,o,u[p]));for(p=0;p<h.length;p++)c.push(hR(t,r,a,s,h[p]));return tR(l,c)},length:function(e,t,n,r,i,a,o,s){return mR(e,t,n,r,i,a,o,s,3)},nearestPoint:function(e,t,n,r,i,a,o,s,l,c,u){return iR([e,n,i,o],[t,r,a,s],l,c,hR,u)},pointDistance:function(e,t,n,r,i,a,o,s,l,c,u){var h=this.nearestPoint(e,t,n,r,i,a,o,s,l,c,u);return JL(h.x,h.y,l,c)},interpolationAt:hR,pointAt:function(e,t,n,r,i,a,o,s,l){return{x:hR(e,n,i,o,l),y:hR(t,r,a,s,l)}},divide:function(e,t,n,r,i,a,o,s,l){return fR(e,t,n,r,i,a,o,s,l)},tangentAngle:function(e,t,n,r,i,a,o,s,l){var c=pR(e,n,i,o,l),u=pR(t,r,a,s,l);return nR(Math.atan2(u,c))}};function yR(e,t,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+e}function vR(e,t,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+t}var ER=function(e,t,n,r,i,a,o){for(var s=function(e,t,n){return Math.atan(-t/e*Math.tan(n))}(n,r,i),l=1/0,c=-1/0,u=[a,o],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var p=s+h;a<o?a<p&&p<o&&u.push(p):o<p&&p<a&&u.push(p)}for(h=0;h<u.length;h++){var d=yR(e,0,n,r,i,u[h]);d<l&&(l=d),d>c&&(c=d)}var f=function(e,t,n){return Math.atan(t/(e*Math.tan(n)))}(n,r,i),m=1/0,g=-1/0,y=[a,o];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var v=f+h;a<o?a<v&&v<o&&y.push(v):o<v&&v<a&&y.push(v)}for(h=0;h<y.length;h++){var E=vR(0,t,n,r,i,y[h]);E<m&&(m=E),E>g&&(g=E)}return{x:l,y:m,width:c-l,height:g-m}};var xR=function(e){return function(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=JL(r[0],r[1],i[0],i[1])}return t}(e)};function bR(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function CR(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=bR(t,n.getCanvasBBox())),r&&(t=bR(t,r.getCanvasBBox())),t}var SR=null;function wR(){if(!SR){var e=document.createElement("canvas");e.width=1,e.height=1,SR=e.getContext("2d")}return SR}function TR(e,t,n){var r=1;return wM(e)&&(r=e.split("\n").length),r>1?t*r+function(e,t){return t?t-e:.14*e}(t,n)*(r-1):t}function kR(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}var _R=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,OR=/[^\s\,]+/gi;function AR(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l,c,u,h=[],p=!!r;if(p){o=r[0],s=r[1];for(var d=0,f=e.length;d<f;d+=1)o=sF([0,0],o,g=e[d]),s=lF([0,0],s,g)}d=0;for(var m=e.length;d<m;d+=1){var g=e[d];if(0!==d||n)if(d!==m-1||n){i=e[[d?d-1:m-1,d-1][n?0:1]],a=e[n?(d+1)%m:d+1];var y=[0,0];y=cF(y=mF(y,a,i),y,t);var v=uF(g,i),E=uF(g,a),x=v+E;0!==x&&(v/=x,E/=x);var b=cF([0,0],y,-v),C=cF([0,0],y,E);c=aF([0,0],g,b),l=sF([0,0],l=aF([0,0],g,C),lF([0,0],a,g)),l=lF([0,0],l,sF([0,0],a,g)),c=sF([0,0],c=aF([0,0],g,b=cF([0,0],b=mF([0,0],l,g),-v/E)),lF([0,0],i,g)),c=lF([0,0],c,sF([0,0],i,g)),l=aF([0,0],g,C=cF([0,0],C=mF([0,0],g,c),E/v)),p&&(c=sF([0,0],c=lF([0,0],c,o),s),l=sF([0,0],l=lF([0,0],l,o),s)),h.push(u),h.push(c),u=l}else c=g,h.push(u),h.push(c);else u=g}return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a+=1)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}var IR="\t\n\v\f\r   ᠎             　\u2028\u2029",MR=new RegExp("([a-z])["+IR+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+IR+"]*,?["+IR+"]*)+)","ig"),NR=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+IR+"]*,?["+IR+"]*","ig");function PR(e){if(!e)return null;if(lM(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(MR,(function(e,r,i){var a=[],o=r.toLowerCase();if(i.replace(NR,(function(e,t){t&&a.push(+t)})),"m"===o&&a.length>2&&(n.push([r].concat(a.splice(0,2))),o="l",r="m"===r?"l":"L"),"o"===o&&1===a.length&&n.push([r,a[0]]),"r"===o)n.push([r].concat(a));else for(;a.length>=t[o]&&(n.push([r].concat(a.splice(0,t[o]))),t[o]););return""})),n}var FR=/[a-z]/;function LR(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function RR(e){var t=PR(e);if(!t||!t.length)return[["M",0,0]];for(var n=!1,r=0;r<t.length;r++){var i=t[r][0];if(FR.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return t;var a=[],o=0,s=0,l=0,c=0,u=0,h=t[0];"M"!==h[0]&&"m"!==h[0]||(l=o=+h[1],c=s=+h[2],u++,a[0]=["M",o,s]);r=u;for(var p=t.length;r<p;r++){var d=t[r],f=a[r-1],m=[],g=(i=d[0]).toUpperCase();if(i!==g)switch(m[0]=g,g){case"A":m[1]=d[1],m[2]=d[2],m[3]=d[3],m[4]=d[4],m[5]=d[5],m[6]=+d[6]+o,m[7]=+d[7]+s;break;case"V":m[1]=+d[1]+s;break;case"H":m[1]=+d[1]+o;break;case"M":l=+d[1]+o,c=+d[2]+s,m[1]=l,m[2]=c;break;default:for(var y=1,v=d.length;y<v;y++)m[y]=+d[y]+(y%2?o:s)}else m=t[r];switch(g){case"Z":o=+l,s=+c;break;case"H":m=["L",o=m[1],s];break;case"V":m=["L",o,s=m[1]];break;case"T":o=m[1],s=m[2];var E=LR([f[1],f[2]],[f[3],f[4]]);m=["Q",E[0],E[1],o,s];break;case"S":o=m[m.length-2],s=m[m.length-1];var x=f.length,b=LR([f[x-4],f[x-3]],[f[x-2],f[x-1]]);m=["C",b[0],b[1],m[1],m[2],o,s];break;case"M":l=m[m.length-2],c=m[m.length-1];break;default:o=m[m.length-2],s=m[m.length-1]}a.push(m)}return a}function DR(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function BR(e,t){return DR(e)*DR(t)?(e[0]*t[0]+e[1]*t[1])/(DR(e)*DR(t)):1}function $R(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(BR(e,t))}function zR(e,t){return e[0]===t[0]&&e[1]===t[1]}function HR(e,t){var n=t[1],r=t[2],i=$M(HM(t[3]),2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],c=t[6],u=t[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=h*h/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var f=n*n*(p*p)+r*r*(h*h),m=f?Math.sqrt((n*n*(r*r)-f)/f):1;a===o&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*p/r:0,y=n?m*-r*h/n:0,v=(s+c)/2+Math.cos(i)*g-Math.sin(i)*y,E=(l+u)/2+Math.sin(i)*g+Math.cos(i)*y,x=[(h-g)/n,(p-y)/r],b=[(-1*h-g)/n,(-1*p-y)/r],C=$R([1,0],x),S=$R(x,b);return BR(x,b)<=-1&&(S=Math.PI),BR(x,b)>=1&&(S=0),0===o&&S>0&&(S-=2*Math.PI),1===o&&S<0&&(S+=2*Math.PI),{cx:v,cy:E,rx:zR(e,[c,u])?0:n,ry:zR(e,[c,u])?0:r,startAngle:C,endAngle:C+S,xRotation:i,arcFlag:a,sweepFlag:o}}function jR(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function GR(e){for(var t=[],n=null,r=null,i=null,a=0,o=(e=function(e){var t=e||[];return lM(t)?t:wM(t)?(uM(t=t.match(_R),(function(e,n){if((e=e.match(OR))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}uM(e,(function(t,n){isNaN(t)||(e[n]=+t)})),t[n]=e})),t):void 0}(e)).length,s=0;s<o;s++){var l=e[s];r=e[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var h=HR(n,l);u.arcParams=h}if("Z"===c)n=i,r=e[a+1];else{var p=l.length;n=[l[p-2],l[p-1]]}r&&"Z"===r[0]&&(r=e[a],t[a]&&(t[a].prePoint=n)),u.currentPoint=n,t[a]&&zR(n,t[a].currentPoint)&&(t[a].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var f=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]];else if("Q"===c){var m=[l[1],l[2]];u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===c){m=jR((v=t[s-1]).currentPoint,f);"Q"===v.command?(u.command="Q",u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]):(u.command="TL",u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]])}else if("C"===c){var g=[l[1],l[2]],y=[l[3],l[4]];u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[g[0]-y[0],g[1]-y[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[y[0]-g[0],y[1]-g[1]])}else if("S"===c){var v;g=jR((v=t[s-1]).currentPoint,f),y=[l[1],l[2]];"C"===v.command?(u.command="C",u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]]):(u.command="SQ",u.startTangent=[f[0]-y[0],f[1]-y[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]])}else if("A"===c){var E=.001,x=u.arcParams||{},b=x.cx,C=void 0===b?0:b,S=x.cy,w=void 0===S?0:S,T=x.rx,k=void 0===T?0:T,_=x.ry,O=void 0===_?0:_,A=x.sweepFlag,I=void 0===A?0:A,M=x.startAngle,N=void 0===M?0:M,P=x.endAngle,F=void 0===P?0:P;0===I&&(E*=-1);var L=k*Math.cos(N-E)+C,R=O*Math.sin(N-E)+w;u.startTangent=[L-i[0],R-i[1]];var D=k*Math.cos(N+F+E)+C,B=O*Math.sin(N+F-E)+w;u.endTangent=[f[0]-D,f[1]-B]}t.push(u)}return t}var VR=function(e,t,n){return e>=t&&e<=n};function YR(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function UR(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function qR(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(UR(o,s,[t,n]))return!0;YR(o[1]-n)>0!=YR(s[1]-n)>0&&YR(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function WR(e){for(var t=[],n=e.length,r=0;r<n-1;r++){var i=e[r],a=e[r+1];t.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(t.length>1){var o=e[0],s=e[n-1];t.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return t}function XR(e,t){var n=!1;return uM(e,(function(e){if(function(e,t,n,r){var i=n.x-e.x,a=n.y-e.y,o=t.x-e.x,s=t.y-e.y,l=r.x-n.x,c=r.y-n.y,u=o*c-s*l,h=null;if(u*u>.001*(o*o+s*s)*(l*l+c*c)){var p=(i*c-a*l)/u,d=(i*s-a*o)/u;VR(p,0,1)&&VR(d,0,1)&&(h={x:e.x+p*o,y:e.y+p*s})}return h}(e.from,e.to,t.from,t.to))return n=!0,!1})),n}function KR(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function QR(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||0===Math.sin(l)||DM(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(u-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}qL("rect",XL),qL("image",XL),qL("circle",KL),qL("marker",KL),qL("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}var o=tR(n,r),s=o.x,l=o.y,c={minX:s,minY:l,maxX:s+o.width,maxY:l+o.height};return{x:(c=CR(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),qL("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}return tR(n,r)})),qL("text",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=kR(t));var l,c=function(e,t){var n=wR(),r=0;return sM(e)||""===e||(n.save(),n.font=t,wM(e)&&e.includes("\n")?uM(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width,n.restore()),r}(i,s);if(c){var u=t.textAlign,h=t.textBaseline,p=TR(i,a,o),d={x:n,y:r-p};u&&("end"===u||"right"===u?d.x-=c:"center"===u&&(d.x-=c/2)),h&&("top"===h?d.y+=p:"middle"===h&&(d.y+=p/2)),l={x:d.x,y:d.y,width:c,height:p}}else l={x:n,y:r,width:0,height:0};return l})),qL("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=(m=e[a]).currentPoint,s=m.params,l=m.prePoint,c=void 0;switch(m.command){case"Q":c=uR.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":c=gR.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var u=m.arcParams;c=ER(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(o[0]),r.push(o[1])}c&&(m.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&i.push(m)}n=n.filter((function(e){return!Number.isNaN(e)})),r=r.filter((function(e){return!Number.isNaN(e)}));var h=EM(n),p=EM(r),d=vM(n),f=vM(r);if(0===i.length)return{x:h,y:p,width:d-h,height:f-p};for(a=0;a<i.length;a++){var m;(o=(m=i[a]).currentPoint)[0]===h?h-=QR(m,t).xExtra:o[0]===d&&(d+=QR(m,t).xExtra),o[1]===p?p-=QR(m,t).yExtra:o[1]===f&&(f+=QR(m,t).yExtra)}return{x:h,y:p,width:d-h,height:f-p}}(e.get("segments")||GR(n),r),a=i.x,o=i.y,s={minX:a,minY:o,maxX:a+i.width,maxY:o+i.height};return{x:(s=CR(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),qL("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,a),maxY:Math.max(r,a)};return{x:(o=CR(e,o)).minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}})),qL("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;return{x:n-i,y:r-a,width:2*i,height:2*a}}));var ZR=function(){function e(e){var t=e.xField,n=e.yField,r=e.adjustNames,i=void 0===r?["x","y"]:r;this.adjustNames=i,this.xField=t,this.yField=n}return e.prototype.isAdjust=function(e){return this.adjustNames.indexOf(e)>=0},e.prototype.getAdjustRange=function(e,t,n){var r,i,a=this.yField,o=n.indexOf(t),s=n.length;return!a&&this.isAdjust("y")?(r=0,i=1):s>1?(r=n[0===o?0:o-1],i=n[o===s-1?s-1:o+1],0!==o?r+=(t-r)/2:r-=(i-t)/2,o!==s-1?i-=(i-t)/2:i+=(t-n[s-2])/2):(r=0===t?0:t-.5,i=0===t?1:t+.5),{pre:r,next:i}},e.prototype.adjustData=function(e,t){var n=this,r=this.getDimValues(t);uM(e,(function(e,t){uM(r,(function(r,i){n.adjustDim(i,r,e,t)}))}))},e.prototype.groupData=function(e,t){return uM(e,(function(e){void 0===e[t]&&(e[t]=0)})),NM(e,t)},e.prototype.adjustDim=function(e,t,n,r){},e.prototype.getDimValues=function(e){var t=this.xField,n=this.yField,r={},i=[];if(t&&this.isAdjust("x")&&i.push(t),n&&this.isAdjust("y")&&i.push(n),i.forEach((function(t){r[t]=kM(e,t).sort((function(e,t){return e-t}))})),!n&&this.isAdjust("y")){r.y=[0,1]}return r},e}(),JR={},eD=function(e){return JR[e.toLowerCase()]},tD=function(e,t){if(eD(e))throw new Error("Adjust type '"+e+"' existed.");JR[e.toLowerCase()]=t},nD=function(e,t){return(nD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function rD(e,t){function n(){this.constructor=e}nD(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var iD=function(){return(iD=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},aD=function(e){function t(t){var n=e.call(this,t)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var r=t.marginRatio,i=void 0===r?.5:r,a=t.dodgeRatio,o=void 0===a?.5:a,s=t.dodgeBy,l=t.intervalPadding,c=t.dodgePadding,u=t.xDimensionLength,h=t.groupNum,p=t.defaultSize,d=t.maxColumnWidth,f=t.minColumnWidth,m=t.columnWidthRatio;return n.marginRatio=i,n.dodgeRatio=o,n.dodgeBy=s,n.intervalPadding=l,n.dodgePadding=c,n.xDimensionLegenth=u,n.groupNum=h,n.defaultSize=p,n.maxColumnWidth=d,n.minColumnWidth=f,n.columnWidthRatio=m,n}return rD(t,e),t.prototype.process=function(e){var t=nN(e),n=yM(t),r=this.dodgeBy,i=r?function(e,t){if(!t)return[e];var n=PM(e,t),r=[];for(var i in n)r.push(n[i]);return r}(n,r):t;return this.cacheMap={},this.adjustDataArray=i,this.mergeData=n,this.adjustData(i,n),this.adjustDataArray=[],this.mergeData=[],t},t.prototype.adjustDim=function(e,t,n,r){var i=this,a=this.getDistribution(e);return uM(this.groupData(n,e),(function(n,o){var s;s=1===t.length?{pre:t[0]-1,next:t[0]+1}:i.getAdjustRange(e,parseFloat(o),t),uM(n,(function(t){var n=t[e],o=a[n],l=o.indexOf(r);t[e]=i.getDodgeOffset(s,l,o.length)}))})),[]},t.prototype.getDodgeOffset=function(e,t,n){var r,i=this,a=i.dodgeRatio,o=i.marginRatio,s=i.intervalPadding,l=i.dodgePadding,c=e.pre,u=e.next,h=u-c;if(!sM(s)&&sM(l)&&s>=0)r=c+this.getIntervalOnlyOffset(n,t);else if(!sM(l)&&sM(s)&&l>=0){r=c+this.getDodgeOnlyOffset(n,t)}else if(!sM(s)&&!sM(l)&&s>=0&&l>=0){r=c+this.getIntervalAndDodgeOffset(n,t)}else{var p=h*a/n,d=o*p;r=(c+u)/2+(.5*(h-n*p-(n-1)*d)+((t+1)*p+t*d)-.5*p-.5*h)}return r},t.prototype.getIntervalOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.intervalPadding,a=n.xDimensionLegenth,o=n.groupNum,s=n.dodgeRatio,l=n.maxColumnWidth,c=n.minColumnWidth,u=n.columnWidthRatio,h=i/a,p=(1-(o-1)*h)/o*s/(e-1),d=((1-h*(o-1))/o-p*(e-1))/e;if(d=sM(u)?d:1/o/e*u,!sM(l)){var f=l/a;d=Math.min(d,f)}if(!sM(c)){var m=c/a;d=Math.max(d,m)}return((.5+t)*(d=r?r/a:d)+t*(p=((1-(o-1)*h)/o-e*d)/(e-1))+.5*h)*o-h/2},t.prototype.getDodgeOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,s=n.marginRatio,l=n.maxColumnWidth,c=n.minColumnWidth,u=n.columnWidthRatio,h=i/a,p=1*s/(o-1),d=((1-p*(o-1))/o-h*(e-1))/e;if(d=u?1/o/e*u:d,!sM(l)){var f=l/a;d=Math.min(d,f)}if(!sM(c)){var m=c/a;d=Math.max(d,m)}return((.5+t)*(d=r?r/a:d)+t*h+.5*(p=(1-(d*e+h*(e-1))*o)/(o-1)))*o-p/2},t.prototype.getIntervalAndDodgeOffset=function(e,t){var n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,s=r/a,l=i/a;return((.5+t)*(((1-s*(o-1))/o-l*(e-1))/e)+t*l+.5*s)*o-s/2},t.prototype.getDistribution=function(e){var t=this.adjustDataArray,n=this.cacheMap,r=n[e];return r||(r={},uM(t,(function(t,n){var i=kM(t,e);i.length||i.push(0),uM(i,(function(e){r[e]||(r[e]=[]),r[e].push(n)}))})),n[e]=r),r},t}(ZR);var oD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rD(t,e),t.prototype.process=function(e){var t=nN(e),n=yM(t);return this.adjustData(t,n),t},t.prototype.adjustDim=function(e,t,n){var r=this;return uM(this.groupData(n,e),(function(n,i){return r.adjustGroup(n,e,parseFloat(i),t)}))},t.prototype.getAdjustOffset=function(e){var t,n=e.pre,r=e.next,i=.05*(r-n);return(r-i-(t=n+i))*Math.random()+t},t.prototype.adjustGroup=function(e,t,n,r){var i=this,a=this.getAdjustRange(t,n,r);return uM(e,(function(e){e[t]=i.getAdjustOffset(a)})),e},t}(ZR),sD=MN,lD=function(e){function t(t){var n=e.call(this,t)||this,r=t.adjustNames,i=void 0===r?["y"]:r,a=t.height,o=void 0===a?NaN:a,s=t.size,l=void 0===s?10:s,c=t.reverseOrder,u=void 0!==c&&c;return n.adjustNames=i,n.height=o,n.size=l,n.reverseOrder=u,n}return rD(t,e),t.prototype.process=function(e){var t=this.yField,n=this.reverseOrder,r=t?this.processStack(e):this.processOneDimStack(e);return n?this.reverse(r):r},t.prototype.reverse=function(e){return e.slice(0).reverse()},t.prototype.processStack=function(e){var t=this,n=t.xField,r=t.yField,i=t.reverseOrder?this.reverse(e):e,a=new sD,o=new sD;return i.map((function(e){return e.map((function(e){var t,i=fN(e,n,0),s=fN(e,[r]),l=i.toString();if(s=lM(s)?s[1]:s,!sM(s)){var c=s>=0?a:o;c.has(l)||c.set(l,0);var u=c.get(l),h=s+u;return c.set(l,h),iD(iD({},e),((t={})[r]=[u,h],t))}return e}))}))},t.prototype.processOneDimStack=function(e){var t=this,n=this,r=n.xField,i=n.height,a=n.reverseOrder,o=a?this.reverse(e):e,s=new sD;return o.map((function(e){return e.map((function(e){var n,a=t.size,o=e[r],l=2*a/i;s.has(o)||s.set(o,l/2);var c=s.get(o);return s.set(o,c+l),iD(iD({},e),((n={}).y=c,n))}))}))},t}(ZR),cD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rD(t,e),t.prototype.process=function(e){var t=yM(e),n=this.xField,r=this.yField,i=this.getXValuesMaxMap(t),a=Math.max.apply(Math,Object.keys(i).map((function(e){return i[e]})));return pN(e,(function(e){return pN(e,(function(e){var t,o,s=e[r],l=e[n];if(lM(s)){var c=(a-i[l])/2;return iD(iD({},e),((t={})[r]=pN(s,(function(e){return c+e})),t))}var u=(a-s)/2;return iD(iD({},e),((o={})[r]=[u,s+u],o))}))}))},t.prototype.getXValuesMaxMap=function(e){var t=this,n=this.xField,r=this.yField;return function(e,t){void 0===t&&(t=dN);var n={};return cM(e)&&!sM(e)&&Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n}(NM(e,(function(e){return e[n]})),(function(e){return t.getDimMaxValue(e,r)}))},t.prototype.getDimMaxValue=function(e,t){var n=pN(e,(function(e){return fN(e,t,[])})),r=yM(n);return Math.max.apply(Math,r)},t}(ZR);tD("Dodge",aD),tD("Jitter",oD),tD("Stack",lD),tD("Symmetric",cD);var uD=function(e,t){return wM(t)?t:e.invert(e.scale(t))},hD=function(){function e(e){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(e)}return e.prototype.mapping=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.map((function(t,n){return e._toOriginParam(t,e.scales[n])}));return this.callback.apply(this,r)},e.prototype.getLinearValue=function(e){var t=this.values.length-1,n=Math.floor(t*e),r=t*e-n,i=this.values[n];return i+((n===t?i:this.values[n+1])-i)*r},e.prototype.getNames=function(){for(var e=this.scales,t=this.names,n=Math.min(e.length,t.length),r=[],i=0;i<n;i+=1)r.push(t[i]);return r},e.prototype.getFields=function(){return this.scales.map((function(e){return e.field}))},e.prototype.getScale=function(e){return this.scales[this.names.indexOf(e)]},e.prototype.defaultCallback=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this.values:t.map((function(t,n){var r=e.scales[n];return"identity"===r.type?r.values[0]:e._getAttributeValue(r,t)}))},e.prototype._parseCfg=function(e){var t=this,n=e.type,r=void 0===n?"base":n,i=e.names,a=void 0===i?[]:i,o=e.scales,s=void 0===o?[]:o,l=e.values,c=void 0===l?[]:l,u=e.callback;this.type=r,this.scales=s,this.values=c,this.names=a,this.callback=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(u){var r=u.apply(void 0,e);if(!sM(r))return[r]}return t.defaultCallback.apply(t,e)}},e.prototype._getAttributeValue=function(e,t){if(e.isCategory&&!this.linear){var n=e.translate(t);return this.values[n%this.values.length]}var r=e.scale(t);return this.getLinearValue(r)},e.prototype._toOriginParam=function(e,t){return t.isLinear?e:lM(e)?e.map((function(e){return uD(t,e)})):uD(t,e)},e}(),pD=function(e,t){return(pD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function dD(e,t){function n(){this.constructor=e}pD(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var fD=/rgba?\(([\s.,0-9]+)\)/,mD=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,gD=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,yD=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,vD=function(e,t,n,r){return e[r]+(t[r]-e[r])*n};function ED(e){return"#"+CD(e[0])+CD(e[1])+CD(e[2])}var xD,bD=function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]},CD=function(e){var t=Math.round(e).toString(16);return 1===t.length?"0"+t:t},SD=function(e){if("#"===e[0]&&7===e.length)return e;xD||(xD=function(){var e=document.createElement("i");return e.title="Web Colour Picker",e.style.display="none",document.body.appendChild(e),e}()),xD.style.color=e;var t=document.defaultView.getComputedStyle(xD,"").getPropertyValue("color");return t=ED(fD.exec(t)[1].split(/\s*,\s*/).map((function(e){return Number(e)})))},wD={rgb2arr:bD,gradient:function(e){var t=wM(e)?e.split("-"):e,n=pN(t,(function(e){return bD(-1===e.indexOf("#")?SD(e):e)}));return function(e){return function(e,t){var n=isNaN(Number(t))||t<0?0:t>1?1:Number(t),r=e.length-1,i=Math.floor(r*n),a=r*n-i,o=e[i],s=i===r?o:e[i+1];return ED([vD(o,s,a,0),vD(o,s,a,1),vD(o,s,a,2)])}(n,e)}},toRGB:iN(SD),toCSSGradient:function(e){if(/^[r,R,L,l]{1}[\s]*\(/.test(e)){var t,n=void 0;if("l"===e[0]){var r=+(i=mD.exec(e))[1]+90;n=i[2],t="linear-gradient("+r+"deg, "}else if("r"===e[0]){var i;t="radial-gradient(",n=(i=gD.exec(e))[4]}var a=n.match(yD);return uM(a,(function(e,n){var r=e.split(":");t+=r[1]+" "+100*r[0]+"%",n!==a.length-1&&(t+=", ")})),t+=")"}return e}},TD=function(e){function t(t){var n=e.call(this,t)||this;return n.type="color",n.names=["color"],wM(n.values)&&(n.linear=!0),n.gradient=wD.gradient(n.values),n}return dD(t,e),t.prototype.getLinearValue=function(e){return this.gradient(e)},t}(hD),kD=function(e){function t(t){var n=e.call(this,t)||this;return n.type="opacity",n.names=["opacity"],n}return dD(t,e),t}(hD),_D=function(e){function t(t){var n=e.call(this,t)||this;return n.names=["x","y"],n.type="position",n}return dD(t,e),t.prototype.mapping=function(e,t){var n=this.scales,r=n[0],i=n[1];return sM(e)||sM(t)?[]:[lM(e)?e.map((function(e){return r.scale(e)})):r.scale(e),lM(t)?t.map((function(e){return i.scale(e)})):i.scale(t)]},t}(hD),OD=function(e){function t(t){var n=e.call(this,t)||this;return n.type="shape",n.names=["shape"],n}return dD(t,e),t.prototype.getLinearValue=function(e){var t=Math.round((this.values.length-1)*e);return this.values[t]},t}(hD),AD=function(e){function t(t){var n=e.call(this,t)||this;return n.type="size",n.names=["size"],n}return dD(t,e),t}(hD),ID={};function MD(e,t){ID[e]=t}var ND=function(){function e(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return e.prototype.translate=function(e){return e},e.prototype.change=function(e){tN(this.__cfg__,e),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var e=this;return pN(this.ticks,(function(t,n){return cM(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}}))},e.prototype.getText=function(e,t){var n=this.formatter,r=n?n(e,t):e;return sM(r)||!oM(r.toString)?"":r.toString()},e.prototype.getConfig=function(e){return this.__cfg__[e]},e.prototype.init=function(){tN(this,this.__cfg__),this.setDomain(),cN(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(wM(e)){var n=ID[e];if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else oM(e)&&(t=e(this));return t},e.prototype.rangeMin=function(){return this.range[0]},e.prototype.rangeMax=function(){return this.range[1]},e.prototype.calcPercent=function(e,t,n){return RM(e)?(e-t)/(n-t):NaN},e.prototype.calcValue=function(e,t,n){return t+e*(n-t)},e}(),PD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return KI(t,e),t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var t=this.translateIndexMap.get(e);return void 0===t&&(t=RM(e)?e:NaN),t},t.prototype.scale=function(e){var t=this.translate(e),n=this.calcPercent(t,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var t=this.max-this.min,n=this.calcPercent(e,this.rangeMin(),this.rangeMax()),r=Math.round(t*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},t.prototype.getText=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t;return RM(t)&&!this.values.includes(t)&&(i=this.values[i]),e.prototype.getText.apply(this,eM([i],n,!1))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(sM(this.getConfig("min"))&&(this.min=0),sM(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(ND),FD=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,LD="[^\\s]+",RD=/\[([^]*?)\]/gm;function DD(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var BD=function(e){return function(t,n){var r=n[e].map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase());return r>-1?r:null}};function $D(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];for(var o in a)e[o]=a[o]}return e}var zD=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],HD=["January","February","March","April","May","June","July","August","September","October","November","December"],jD=DD(HD,3),GD={dayNamesShort:DD(zD,3),dayNames:zD,monthNamesShort:jD,monthNames:HD,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},VD=$D({},GD),YD=function(e){return VD=$D(VD,e)},UD=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},qD=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},WD={D:function(e){return String(e.getDate())},DD:function(e){return qD(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return qD(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return qD(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return qD(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return qD(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return qD(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return qD(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return qD(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return qD(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return qD(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return qD(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+qD(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+qD(Math.floor(Math.abs(t)/60),2)+":"+qD(Math.abs(t)%60,2)}},XD=function(e){return+e-1},KD=[null,"[1-9]\\d?"],QD=[null,LD],ZD=["isPm",LD,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],JD=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?n:-n}return 0}],eB={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+LD,function(e){return parseInt(e,10)}],M:["month","[1-9]\\d?",XD],MM:["month","\\d\\d",XD],YY:["year","\\d\\d",function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+e>68?t-1:t)+e)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond","\\d\\d",function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:KD,dd:KD,ddd:QD,dddd:QD,MMM:["month",LD,BD("monthNamesShort")],MMMM:["month",LD,BD("monthNames")],a:ZD,A:ZD,ZZ:JD,Z:JD},tB={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},nB=function(e){return $D(tB,e)},rB=function(e,t,n){if(void 0===t&&(t=tB.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var r=[];t=(t=tB[t]||t).replace(RD,(function(e,t){return r.push(t),"@@@"}));var i=$D($D({},VD),n);return(t=t.replace(FD,(function(t){return WD[t](e,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function iB(e,t,n){if(void 0===n&&(n={}),"string"!=typeof t)throw new Error("Invalid format in fecha parse");if(t=tB[t]||t,e.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],a=[],o=t.replace(RD,(function(e,t){return a.push(UD(t)),"@@@"})),s={},l={};o=UD(o).replace(FD,(function(e){var t=eB[e],n=t[0],r=t[1],a=t[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,a&&(l[a]=!0),i.push(t),"("+r+")"})),Object.keys(l).forEach((function(e){if(!s[e])throw new Error("Invalid format. "+e+" is required in specified format")})),o=o.replace(/@@@/g,(function(){return a.shift()}));var c=e.match(new RegExp(o,"i"));if(!c)return null;for(var u=$D($D({},VD),n),h=1;h<c.length;h++){var p=i[h-1],d=p[0],f=p[2],m=f?f(c[h],u):+c[h];if(null==m)return null;r[d]=m}1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0);for(var g=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond),y=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],v=(h=0,y.length);h<v;h++)if(s[y[h][0]]&&r[y[h][0]]!==g[y[h][1]]())return null;return null==r.timezoneOffset?g:new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond))}var aB={format:rB,parse:iB,defaultI18n:GD,setGlobalDateI18n:YD,setGlobalDateMasks:nB},oB=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:aB,assign:$D,format:rB,parse:iB,defaultI18n:GD,setGlobalDateI18n:YD,setGlobalDateMasks:nB});function sB(e,t){return(oB.format||aB.format)(e,t)}function lB(e){return wM(e)&&(e=e.indexOf("T")>0?new Date(e).getTime():new Date(e.replace(/-/gi,"/")).getTime()),KM(e)&&(e=e.getTime()),e}var cB=36e5,uB=24*cB,hB=31*uB,pB=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",cB],["HH",6*cB],["HH",12*cB],["YYYY-MM-DD",uB],["YYYY-MM-DD",4*uB],["YYYY-WW",7*uB],["YYYY-MM",hB],["YYYY-MM",4*hB],["YYYY-MM",6*hB],["YYYY",380*uB]];function dB(e,t,n){var r,i=(r=function(e){return e[1]},function(e,t,n,i){for(var a=sM(n)?0:n,o=sM(i)?e.length:i;a<o;){var s=a+o>>>1;r(e[s])>t?o=s:a=s+1}return a})(pB,(t-e)/n)-1,a=pB[i];return i<0?a=pB[0]:i>=pB.length&&(a=OM(pB)),a}var fB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="timeCat",t}return KI(t,e),t.prototype.translate=function(e){e=lB(e);var t=this.values.indexOf(e);return-1===t&&(t=RM(e)&&e<this.values.length?e:NaN),t},t.prototype.getText=function(e,t){var n=this.translate(e);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,t):sB(r,this.mask)}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var t=this.values;uM(t,(function(e,n){t[n]=lB(e)})),t.sort((function(e,t){return e-t})),e.prototype.setDomain.call(this)},t}(PD),mB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return KI(t,e),t.prototype.scale=function(e){if(sM(e))return NaN;var t=this.rangeMin(),n=this.rangeMax();return this.max===this.min?t:t+this.getScalePercent(e)*(n-t)},t.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,n=_M(t),r=OM(t);n<this.min&&(this.min=n),r>this.max&&(this.max=r),sM(this.minLimit)||(this.min=n),sM(this.maxLimit)||(this.max=r)},t.prototype.setDomain=function(){var e=xM(this.values),t=e.min,n=e.max;sM(this.min)&&(this.min=t),sM(this.max)&&(this.max=n),this.min>this.max&&(this.min=t,this.max=n)},t.prototype.calculateTicks=function(){var t=this,n=e.prototype.calculateTicks.call(this);return this.nice||(n=rM(n,(function(e){return e>=t.min&&e<=t.max}))),n},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;return(e-n)/(t-n)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(ND),gB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return KI(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e);return this.min+t*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(mB);function yB(e,t){var n=Math.E;return t>=0?Math.pow(n,Math.log(t)/e):-1*Math.pow(n,Math.log(-t)/e)}function vB(e,t){return 1===e?1:Math.log(t)/Math.log(e)}function EB(e,t,n){sM(n)&&(n=Math.max.apply(null,e));var r=n;return uM(e,(function(e){e>0&&e<r&&(r=e)})),r===n&&(r=n/t),r>1&&(r=1),r}var xB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t}return KI(t,e),t.prototype.invert=function(e){var t,n=this.base,r=vB(n,this.max),i=this.rangeMin(),a=this.rangeMax()-i,o=this.positiveMin;if(o){if(0===e)return 0;var s=1/(r-(t=vB(n,o/n)))*a;if(e<s)return e/s*o}else t=vB(n,this.min);var l=(e-i)/a*(r-t)+t;return Math.pow(n,l)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){e.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=EB(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;if(e<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),e<i?e/i/(vB(r,t)-vB(r,n)):(vB(r,e)-vB(r,n))/(vB(r,t)-vB(r,n))},t}(mB),bB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pow",t}return KI(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e),n=this.exponent,r=yB(n,this.max),i=yB(n,this.min),a=t*(r-i)+i,o=a>=0?1:-1;return Math.pow(a,n)*o},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;var r=this.exponent;return(yB(r,e)-yB(r,n))/(yB(r,t)-yB(r,n))},t}(mB),CB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="time",t}return KI(t,e),t.prototype.getText=function(e,t){var n=this.translate(e),r=this.formatter;return r?r(n,t):sB(n,this.mask)},t.prototype.scale=function(t){var n=t;return(wM(n)||KM(n))&&(n=this.translate(n)),e.prototype.scale.call(this,n)},t.prototype.translate=function(e){return lB(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,t=this.getConfig("min"),n=this.getConfig("max");if(sM(t)&&RM(t)||(this.min=this.translate(this.min)),sM(n)&&RM(n)||(this.max=this.translate(this.max)),e&&e.length){var r=[],i=1/0,a=i,o=0;uM(e,(function(e){var t=lB(e);if(isNaN(t))throw new TypeError("Invalid Time: "+e+" in time scale!");i>t?(a=i,i=t):a>t&&(a=t),o<t&&(o=t),r.push(t)})),e.length>1&&(this.minTickInterval=a-i),sM(t)&&(this.min=i),sM(n)&&(this.max=o)}},t}(gB),SB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantize",t}return KI(t,e),t.prototype.invert=function(e){var t=this.ticks,n=t.length,r=this.getInvertPercent(e),i=Math.floor(r*(n-1));if(i>=n-1)return OM(t);if(i<0)return _M(t);var a=t[i],o=i/(n-1);return a+(r-o)/((i+1)/(n-1)-o)*(t[i+1]-a)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var t=e.prototype.calculateTicks.call(this);return this.nice||(OM(t)!==this.max&&t.push(this.max),_M(t)!==this.min&&t.unshift(this.min)),t},t.prototype.getScalePercent=function(e){var t=this.ticks;if(e<_M(t))return 0;if(e>OM(t))return 1;var n=0;return uM(t,(function(t,r){if(!(e>=t))return!1;n=r})),n/(t.length-1)},t}(mB),wB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantile",t}return KI(t,e),t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(SB),TB={};function kB(e){return TB[e]}function _B(e,t){if(kB(e))throw new Error("type '"+e+"' existed.");TB[e]=t}var OB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return KI(t,e),t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&RM(e)?e:this.range[0]},t.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},t}(ND);function AB(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}var IB=[1,5,2,2.5,4,3],MB=100*Number.EPSILON;function NB(e,t,n,r,i,a){var o=SN(t),s=sN(t,e),l=0,c=function(e,t){return(e%t+t)%t}(r,a);return(c<MB||a-c<MB)&&r<=0&&i>=0&&(l=1),1-s/(o-1)-n+l}function PB(e,t,n){var r=SN(t);return 1-sN(t,e)/(r-1)-n+1}function FB(e,t,n,r,i,a){var o=(e-1)/(a-i),s=(t-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(o/s,s/o)}function LB(e,t){return e>=t?2-(e-1)/(t-1):1}function RB(e,t,n,r){var i=t-e;return 1-.5*(Math.pow(t-r,2)+Math.pow(e-n,2))/Math.pow(.1*i,2)}function DB(e,t,n){var r=t-e;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function BB(e,t,n,r,i,a){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=IB),void 0===a&&(a=[.25,.2,.5,.05]);var o=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||"number"!=typeof e||"number"!=typeof t||!o)return{min:0,max:0,ticks:[]};if(t-e<1e-15||1===o)return{min:e,max:t,ticks:[e]};for(var s={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var c=0;c<i.length;c+=1){var u=i[c],h=PB(u,i,l);if(a[0]*h+a[1]+a[2]+a[3]<s.score){l=1/0;break}for(var p=2;p<1/0;){var d=LB(p,o);if(a[0]*h+a[1]+a[2]*d+a[3]<s.score)break;for(var f=(t-e)/(p+1)/l/u,m=Math.ceil(Math.log10(f));m<1/0;){var g=l*u*Math.pow(10,m),y=DB(e,t,g*(p-1));if(a[0]*h+a[1]*y+a[2]*d+a[3]<s.score)break;var v=Math.floor(t/g)*l-(p-1)*l,E=Math.ceil(e/g)*l;if(v<=E)for(var x=E-v,b=0;b<=x;b+=1){var C=(v+b)*(g/l),S=C+g*(p-1),w=g,T=NB(u,i,l,C,S,w),k=RB(e,t,C,S),_=FB(p,o,e,t,C,S),O=a[0]*T+a[1]*k+a[2]*_+1*a[3];O>s.score&&(!r||C<=e&&S>=t)&&(s.lmin=C,s.lmax=S,s.lstep=w,s.score=O)}m+=1}p+=1}}l+=1}var A=AB(s.lmax),I=AB(s.lmin),M=AB(s.lstep),N=Math.floor(function(e){return Math.round(1e12*e)/1e12}((A-I)/M))+1,P=new Array(N);P[0]=AB(I);for(c=1;c<N;c++)P[c]=AB(P[c-1]+M);return{min:Math.min(e,_M(P)),max:Math.max(t,OM(P)),ticks:P}}function $B(e){var t=e.values,n=e.tickInterval,r=e.tickCount,i=t;if(RM(n))return rM(i,(function(e,t){return t%n==0}));var a=e.min,o=e.max;if(sM(a)&&(a=0),sM(o)&&(o=t.length-1),RM(r)&&r<o-a){var s=BB(a,o,r,!1,[1,2,5,3,4,7,6,8,9]).ticks;return rM(s,(function(e){return e>=a&&e<=o})).map((function(e){return t[e]}))}return t.slice(a,o+1)}var zB=Math.sqrt(50),HB=Math.sqrt(10),jB=Math.sqrt(2),GB=function(){function e(){this._domain=[0,1]}return e.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},e.prototype.nice=function(e){var t,n;void 0===e&&(e=5);var r,i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o];return l<s&&(s=(t=[l,s])[0],l=t[1],a=(n=[o,a])[0],o=n[1]),(r=VB(s,l,e))>0?r=VB(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,e):r<0&&(r=VB(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,e)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(l/r)*r,this.domain(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(l*r)/r,this.domain(i)),this},e.prototype.ticks=function(e){return void 0===e&&(e=5),function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];(r=t<e)&&(i=e,e=t,t=i);if(0===(o=VB(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(e-s)/o;r&&a.reverse();return a}(this._domain[0],this._domain[this._domain.length-1],e||5)},e}();function VB(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=zB?10:a>=HB?5:a>=jB?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=zB?10:a>=HB?5:a>=jB?2:1)}function YB(e,t,n){return("ceil"===n?Math.ceil(e/t):"floor"===n?Math.floor(e/t):Math.round(e/t))*t}function UB(e,t,n){var r=YB(e,n,"floor"),i=YB(t,n,"ceil");r=LM(r,n),i=LM(i,n);for(var a=[],o=r;o<=i;o+=n){var s=LM(o,n);a.push(s)}return{min:r,max:i,ticks:a}}function qB(e,t,n){var r,i=e.minLimit,a=e.maxLimit,o=e.min,s=e.max,l=e.tickCount,c=void 0===l?5:l,u=sM(i)?sM(t)?o:t:i,h=sM(a)?sM(n)?s:n:a;if(u>h&&(h=(r=[u,h])[0],u=r[1]),c<=2)return[u,h];for(var p=(h-u)/(c-1),d=[],f=0;f<c;f++)d.push(u+p*f);return d}function WB(e,t,n){if(void 0===n&&(n=5),e===t)return{max:t,min:e,ticks:[e]};var r=n<0?0:Math.round(n);if(0===r)return{max:t,min:e,ticks:[]};var i=(t-e)/r,a=Math.pow(10,Math.floor(Math.log10(i))),o=a;2*a-i<1.5*(i-o)&&5*a-i<2.75*(i-(o=2*a))&&10*a-i<1.5*(i-(o=5*a))&&(o=10*a);for(var s=Math.ceil(t/o),l=Math.floor(e/o),c=Math.max(s*o,t),u=Math.min(l*o,e),h=Math.floor((c-u)/o)+1,p=new Array(h),d=0;d<h;d++)p[d]=AB(u+d*o);return{min:u,max:c,ticks:p}}function XB(e,t){var n=e.length*t;return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function KB(e){return new Date(e).getFullYear()}function QB(e){return new Date(e,0,1).getTime()}function ZB(e){return new Date(e).getMonth()}function JB(e,t){return new Date(e,t,1).getTime()}MD("cat",$B),MD("time-cat",(function(e){var t=$B(e),n=OM(e.values);return n!==OM(t)&&t.push(n),t})),MD("wilkinson-extended",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.nice,a=e.tickInterval,o=e.minLimit,s=e.maxLimit,l=BB(t,n,r,i).ticks;return sM(o)&&sM(s)?a?UB(t,n,a).ticks:l:qB(e,_M(l),OM(l))})),MD("r-pretty",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.tickInterval,a=e.minLimit,o=e.maxLimit,s=WB(t,n,r).ticks;return sM(a)&&sM(o)?i?UB(t,n,i).ticks:s:qB(e,_M(s),OM(s))})),MD("time",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickInterval,a=e.tickCount;if(i)a=Math.ceil((n-t)/i);else{var o=(n-t)/(i=dB(t,n,a)[1])/a;o>1&&(i*=Math.ceil(o)),r&&i<r&&(i=r)}for(var s=[],l=t;l<n+i;l+=i)s.push(l);return s})),MD("time-pretty",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickCount,a=e.tickInterval,o=[];a||(a=(n-t)/i,r&&a<r&&(a=r));var s=KB(t);if(a>31536e6)for(var l=KB(n),c=Math.ceil(a/31536e6),u=s;u<=l+c;u+=c)o.push(QB(u));else if(a>hB){var h=Math.ceil(a/hB),p=ZB(t),d=function(e,t){var n=KB(e),r=KB(t),i=ZB(e);return 12*(r-n)+(ZB(t)-i)%12}(t,n);for(u=0;u<=d+h;u+=h)o.push(JB(s,u+p))}else if(a>uB){var f=(E=new Date(t)).getFullYear(),m=E.getMonth(),g=E.getDate(),y=Math.ceil(a/uB),v=function(e,t){return Math.ceil((t-e)/uB)}(t,n);for(u=0;u<v+y;u+=y)o.push(new Date(f,m,g+u).getTime())}else if(a>cB){f=(E=new Date(t)).getFullYear(),m=E.getMonth(),y=E.getDate();var E,x=E.getHours(),b=Math.ceil(a/cB),C=function(e,t){return Math.ceil((t-e)/cB)}(t,n);for(u=0;u<=C+b;u+=b)o.push(new Date(f,m,y,x+u).getTime())}else if(a>6e4){var S=function(e,t){return Math.ceil((t-e)/6e4)}(t,n),w=Math.ceil(a/6e4);for(u=0;u<=S+w;u+=w)o.push(t+6e4*u)}else{var T=a;T<1e3&&(T=1e3);var k=1e3*Math.floor(t/1e3),_=Math.ceil((n-t)/1e3),O=Math.ceil(T/1e3);for(u=0;u<_+O;u+=O)o.push(k+1e3*u)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o})),MD("log",(function(e){var t,n=e.base,r=e.tickCount,i=e.min,a=e.max,o=e.values,s=vB(n,a);if(i>0)t=Math.floor(vB(n,i));else{var l=EB(o,n,a);t=Math.floor(vB(n,l))}for(var c=s-t,u=Math.ceil(c/r),h=[],p=t;p<s+u;p+=u)h.push(Math.pow(n,p));return i<=0&&h.unshift(0),h})),MD("pow",(function(e){var t=e.exponent,n=e.tickCount,r=Math.ceil(yB(t,e.max));return WB(Math.floor(yB(t,e.min)),r,n).ticks.map((function(e){var n=e>=0?1:-1;return Math.pow(e,t)*n}))})),MD("quantile",(function(e){var t=e.tickCount,n=e.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(e,t){return e-t})),i=[],a=0;a<t;a++){var o=a/(t-1);i.push(XB(r,o))}return i})),MD("d3-linear",(function(e){var t=e.min,n=e.max,r=e.tickInterval,i=e.minLimit,a=e.maxLimit,o=function(e){var t=e.min,n=e.max,r=e.nice,i=e.tickCount,a=new GB;return a.domain([t,n]),r&&a.nice(i),a.ticks(i)}(e);return sM(i)&&sM(a)?r?UB(t,n,r).ticks:o:qB(e,_M(o),OM(o))})),_B("cat",PD),_B("category",PD),_B("identity",OB),_B("linear",gB),_B("log",xB),_B("pow",bB),_B("time",CB),_B("timeCat",fB),_B("quantize",SB),_B("quantile",wB);var e$={},t$=function(e){return e$[e.toLowerCase()]},n$=function(e,t){if(t$(e))throw new Error("Attribute type '"+e+"' existed.");e$[e.toLowerCase()]=t};n$("Color",TD),n$("Opacity",kD),n$("Position",_D),n$("Shape",OD),n$("Size",AD);var r$=function(){function e(e){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=e.start,n=e.end,r=e.matrix,i=void 0===r?[1,0,0,0,1,0,0,0,1]:r,a=e.isTransposed,o=void 0!==a&&a;this.start=t,this.end=n,this.matrix=i,this.originalMatrix=eM([],i),this.isTransposed=o}return e.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},e.prototype.update=function(e){tN(this,e),this.initial()},e.prototype.convertDim=function(e,t){var n,r=this[t],i=r.start,a=r.end;return this.isReflect(t)&&(i=(n=[a,i])[0],a=n[1]),i+e*(a-i)},e.prototype.invertDim=function(e,t){var n,r=this[t],i=r.start,a=r.end;return this.isReflect(t)&&(i=(n=[a,i])[0],a=n[1]),(e-i)/(a-i)},e.prototype.applyMatrix=function(e,t,n){void 0===n&&(n=0);var r=[e,t,n];return iF(r,r,this.matrix),r},e.prototype.invertMatrix=function(e,t,n){void 0===n&&(n=0);var r=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,e[0]=h*f,e[1]=(-u*r+i*c)*f,e[2]=(s*r-i*o)*f,e[3]=p*f,e[4]=(u*n-i*l)*f,e[5]=(-s*n+i*a)*f,e[6]=d*f,e[7]=(-c*n+r*l)*f,e[8]=(o*n-r*a)*f,e):null}([0,0,0,0,0,0,0,0,0],this.matrix),i=[e,t,n];return r&&iF(i,i,r),i},e.prototype.convert=function(e){var t=this.convertPoint(e),n=t.x,r=t.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},e.prototype.invert=function(e){var t=this.invertMatrix(e.x,e.y,1);return this.invertPoint({x:t[0],y:t[1]})},e.prototype.rotate=function(e){var t=this.matrix,n=this.center;return gF(t,t,[-n.x,-n.y]),yF(t,t,e),gF(t,t,[n.x,n.y]),this},e.prototype.reflect=function(e){return"x"===e?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},e.prototype.scale=function(e,t){var n=this.matrix,r=this.center;return gF(n,n,[-r.x,-r.y]),vF(n,n,[e,t]),gF(n,n,[r.x,r.y]),this},e.prototype.translate=function(e,t){var n=this.matrix;return gF(n,n,[e,t]),this},e.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},e.prototype.getCenter=function(){return this.center},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRadius=function(){return this.radius},e.prototype.isReflect=function(e){return"x"===e?this.isReflectX:this.isReflectY},e.prototype.resetMatrix=function(e){this.matrix=e||eM([],this.originalMatrix)},e}(),i$=function(e){function t(t){var n=e.call(this,t)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return KI(t,e),t.prototype.initial=function(){e.prototype.initial.call(this);var t=this.start,n=this.end;this.x={start:t.x,end:n.x},this.y={start:t.y,end:n.y}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;return this.isTransposed&&(n=(t=[r,n])[0],r=t[1]),{x:this.convertDim(n,"x"),y:this.convertDim(r,"y")}},t.prototype.invertPoint=function(e){var t,n=this.invertDim(e.x,"x"),r=this.invertDim(e.y,"y");return this.isTransposed&&(n=(t=[r,n])[0],r=t[1]),{x:n,y:r}},t}(r$),a$=function(e){function t(t){var n=e.call(this,t)||this;n.isHelix=!0,n.type="helix";var r=t.startAngle,i=void 0===r?1.25*Math.PI:r,a=t.endAngle,o=void 0===a?7.25*Math.PI:a,s=t.innerRadius,l=void 0===s?0:s,c=t.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=l,n.radius=c,n.initial(),n}return KI(t,e),t.prototype.initial=function(){e.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n*=this.radius),this.d=Math.floor(n*(1-this.innerRadius)/t),this.a=this.d/(2*Math.PI),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+.99*this.d}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;this.isTransposed&&(n=(t=[r,n])[0],r=t[1]);var i=this.convertDim(n,"x"),a=this.a*i,o=this.convertDim(r,"y");return{x:this.center.x+Math.cos(i)*(a+o),y:this.center.y+Math.sin(i)*(a+o)}},t.prototype.invertPoint=function(e){var t,n=this.d+this.y.start,r=oF([0,0],[e.x,e.y],[this.center.x,this.center.y]),i=bF(r,[1,0],!0),a=i*this.a;hF(r)<a&&(a=hF(r)),i=2*Math.floor((hF(r)-a)/n)*Math.PI+i;var o=this.a*i,s=hF(r)-o;s=DM(s,0)?0:s;var l=this.invertDim(i,"x"),c=this.invertDim(s,"y");return l=DM(l,0)?0:l,c=DM(c,0)?0:c,this.isTransposed&&(l=(t=[c,l])[0],c=t[1]),{x:l,y:c}},t}(r$),o$=function(e){function t(t){var n=e.call(this,t)||this;n.isPolar=!0,n.type="polar";var r=t.startAngle,i=void 0===r?-Math.PI/2:r,a=t.endAngle,o=void 0===a?3*Math.PI/2:a,s=t.innerRadius,l=void 0===s?0:s,c=t.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=l,n.radius=c,n.initial(),n}return KI(t,e),t.prototype.initial=function(){for(e.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=2*Math.PI;var t,n=this.getOneBox(),r=n.maxX-n.minX,i=n.maxY-n.minY,a=Math.abs(n.minX)/r,o=Math.abs(n.minY)/i;this.height/i>this.width/r?(t=this.width/r,this.circleCenter={x:this.center.x-(.5-a)*this.width,y:this.center.y-(.5-o)*t*i}):(t=this.height/i,this.circleCenter={x:this.center.x-(.5-a)*t*r,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=t*this.radius:(this.radius<=0||this.radius>t)&&(this.polarRadius=t):this.polarRadius=t,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},t.prototype.getRadius=function(){return this.polarRadius},t.prototype.convertPoint=function(e){var t,n=this.getCenter(),r=e.x,i=e.y;return this.isTransposed&&(r=(t=[i,r])[0],i=t[1]),r=this.convertDim(r,"x"),i=this.convertDim(i,"y"),{x:n.x+Math.cos(r)*i,y:n.y+Math.sin(r)*i}},t.prototype.invertPoint=function(e){var t,n=this.getCenter(),r=[e.x-n.x,e.y-n.y],i=this.startAngle,a=this.endAngle;this.isReflect("x")&&(i=(t=[a,i])[0],a=t[1]);var o=[1,0,0,0,1,0,0,0,1];yF(o,o,i);var s=[1,0,0];iF(s,s,o);var l=bF([s[0],s[1]],r,a<i);DM(l,2*Math.PI)&&(l=0);var c=hF(r),u=l/(a-i);u=a-i>0?u:-u;var h=this.invertDim(c,"y"),p={x:0,y:0};return p.x=this.isTransposed?h:u,p.y=this.isTransposed?u:h,p},t.prototype.getCenter=function(){return this.circleCenter},t.prototype.getOneBox=function(){var e=this.startAngle,t=this.endAngle;if(Math.abs(t-e)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(e),Math.cos(t)],r=[0,Math.sin(e),Math.sin(t)],i=Math.min(e,t);i<Math.max(e,t);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}},t}(r$),s$={},l$=function(e,t){s$[e.toLowerCase()]=t};l$("rect",i$),l$("cartesian",i$),l$("polar",o$),l$("helix",a$);var c$="\t\n\v\f\r   ᠎             　\u2028\u2029",u$=new RegExp("([a-z])["+c$+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+c$+"]*,?["+c$+"]*)+)","ig"),h$=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+c$+"]*,?["+c$+"]*","ig"),p$=function(e){if(!e)return null;if(lM(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(u$,(function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(h$,(function(e,t){t&&o.push(+t)})),"m"===s&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===o.length&&n.push([i,o[0]]),"r"===s)n.push([i].concat(o));else for(;o.length>=t[s]&&(n.push([i].concat(o.splice(0,t[s]))),t[s]););return e})),n},d$=function(e,t){if(e.length!==t.length)return!1;var n=!0;return uM(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function f$(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var m$=function(e,t){var n=function(e,t){var n,r,i=e.length,a=t.length,o=0;if(0===i||0===a)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=a;c++)s[0][c]={min:c};for(l=1;l<=i;l++)for(n=e[l-1],c=1;c<=a;c++){r=t[c-1],o=d$(n,r)?0:1;var u=s[l-1][c].min+1,h=s[l][c-1].min+1,p=s[l-1][c-1].min+o;s[l][c]=f$(u,h,p)}return s}(e,t),r=e.length,i=t.length,a=[],o=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=o;u<=i;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);o=s,n[l][o].type&&a.push({index:l-1,type:n[l][o].type})}for(l=a.length-1;l>=0;l--)o=a[l].index,"add"===a[l].type?e.splice(o,0,[].concat(e[o])):e.splice(o,1)}var h=i-(r=e.length);if(r<i)for(l=0;l<h;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function g$(e,t,n){for(var r,i=[].concat(e),a=1/(n+1),o=y$(t)[0],s=1;s<=n;s++)a*=s,0===(r=Math.floor(e.length*a))?i.unshift([o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]):i.splice(r,0,[o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]);return i}function y$(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var v$=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=y$(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=g$(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=g$(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=g$(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e},E$=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function x$(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var b$="undefined"!=typeof window&&void 0!==window.document;function C$(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function S$(e){return e.cfg.visible&&e.cfg.capture}var w$=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=tN(r,t),n}return KI(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(iP);function T$(e,t){var n=[],r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=t[0],d=t[1],f=t[2],m=t[3],g=t[4],y=t[5],v=t[6],E=t[7],x=t[8];return n[0]=p*r+d*o+f*c,n[1]=p*i+d*s+f*u,n[2]=p*a+d*l+f*h,n[3]=m*r+g*o+y*c,n[4]=m*i+g*s+y*u,n[5]=m*a+g*l+y*h,n[6]=v*r+E*o+x*c,n[7]=v*i+E*s+x*u,n[8]=v*a+E*l+x*h,n}function k$(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}var _$=xF,O$=["zIndex","capture","visible","type"],A$=["repeat"];function I$(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function M$(e,t){var n={},r=t.attr();return uM(e,(function(e,t){-1!==A$.indexOf(t)||hN(r[t],e)||(n[t]=e)})),n}function N$(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return uM(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&uM(t.toAttrs,(function(t,n){a.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var P$=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return tN(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return KI(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(cM(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(x$(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr("matrix")},t.prototype.setMatrix=function(e){this.attr("matrix",e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?T$(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?T$(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?k$(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=function(e){var t=[],n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,t[0]=h*f,t[1]=(-u*r+i*c)*f,t[2]=(s*r-i*o)*f,t[3]=p*f,t[4]=(u*n-i*l)*f,t[5]=(-s*n+i*a)*f,t[6]=d*f,t[7]=(-c*n+r*l)*f,t[8]=(o*n-r*a)*f,t):null}(t);if(n)return k$(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[qM(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};uM(t,(function(e,r){lM(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)lM(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return uM(O$,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,a,o,s,l,c=e[0],u=e[1],h=e[2],p=void 0===h?"easeLinear":h,d=e[3],f=void 0===d?CN:d,m=e[4],g=void 0===m?0:m;oM(c)?(i=c,c={}):cM(c)&&c.onFrame&&(i=c.onFrame,a=c.repeat),cM(u)?(u=(l=u).duration,p=l.easing||"easeLinear",g=l.delay||0,a=l.repeat||a||!1,f=l.callback||CN,o=l.pauseCallback||CN,s=l.resumeCallback||CN):(RM(f)&&(g=f,f=null),oM(p)?(f=p,p="easeLinear"):p=p||"easeLinear");var y=M$(c,this),v={fromAttrs:I$(y,this),toAttrs:y,duration:u,easing:p,repeat:a,callback:f,pauseCallback:o,resumeCallback:s,delay:g,startTime:n.getTime(),id:bN(),onFrame:i,pathFormatted:!1};r.length>0?r=N$(r,v):n.addAnimator(this),r.push(v),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),uM(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return uM(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return uM(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var a=function(e){var a=i[e],s=a.get("name");if(s){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&n&&C$(a,n))return"break";lM(s)?uM(s,(function(e){r.emitDelegateEvent(a,e,t)})):o.emitDelegateEvent(a,s,t)}},o=this,s=0;s<i.length;s++){if("break"===a(s))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=_$(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=_$(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=_$(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),a=_$(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(a),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=_$(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(w$),F$={};function L$(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){L$(e,t)}))}}function R$(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){R$(e,t)}))}}var D$,B$,$$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(uM(o,(function(e){var t=e.getBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=EM(i),t=vM(i),n=EM(a),r=vM(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(uM(o,(function(e){var t=e.getCanvasBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=EM(i),t=vM(i),n=EM(a),r=vM(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){uM(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];cM(n)?r=n:r.type=n;var i=F$[r.type];i||(i=qM(r.type),F$[r.type]=i);var a=this.getShapeBase(),o=new a[i](r);return this.add(o),o},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if(oM(r))n=new r(i||{parent:this});else{var a=r||{},o=this.getGroupBase();n=new o(a)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!S$(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var a=[e,t,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,a=e.length-1;a>=0;a--){var o=e[a];if(S$(o)&&(o.isGroup()?i=o.getShape(t,n,r):o.isHit(t,n)&&(i=o)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),x$(e.getChildren(),t)}(i,e,!1),e.set("parent",this),t&&L$(e,t),r&&R$(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();uM(t,(function(e,t){return e._INDEX=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return uM(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return uM(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(P$),z$=0,H$=0,j$=0,G$=0,V$=0,Y$=0,U$="object"==typeof performance&&performance.now?performance:Date,q$="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function W$(){return V$||(q$(X$),V$=U$.now()+Y$)}function X$(){V$=0}function K$(){this._call=this._time=this._next=null}function Q$(e,t,n){var r=new K$;return r.restart(e,t,n),r}function Z$(){V$=(G$=U$.now())+Y$,z$=H$=0;try{!function(){W$(),++z$;for(var e,t=D$;t;)(e=V$-t._time)>=0&&t._call.call(null,e),t=t._next;--z$}()}finally{z$=0,function(){var e,t,n=D$,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:D$=t);B$=e,ez(r)}(),V$=0}}function J$(){var e=U$.now(),t=e-G$;t>1e3&&(Y$-=t,G$=e)}function ez(e){z$||(H$&&(H$=clearTimeout(H$)),e-V$>24?(e<1/0&&(H$=setTimeout(Z$,e-U$.now()-Y$)),j$&&(j$=clearInterval(j$))):(j$||(G$=U$.now(),j$=setInterval(J$,1e3)),z$=1,q$(Z$)))}function tz(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function nz(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}K$.prototype=Q$.prototype={constructor:K$,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?W$():+n)+(null==t?0:+t),this._next||B$===this||(B$?B$._next=this:D$=this,B$=this),this._call=e,this._time=n,ez()},stop:function(){this._call&&(this._call=null,this._time=1/0,ez())}};var rz=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),iz=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),az=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),oz=Math.PI,sz=oz/2;function lz(e){return(1-Math.cos(oz*e))/2}function cz(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function uz(e){return((e*=2)<=1?cz(1-e):2-cz(e-1))/2}function hz(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var pz=4/11,dz=7.5625;function fz(e){return(e=+e)<pz?dz*e*e:e<.7272727272727273?dz*(e-=.5454545454545454)*e+.75:e<.9090909090909091?dz*(e-=.8181818181818182)*e+.9375:dz*(e-=.9545454545454546)*e+.984375}var mz=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158),gz=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158),yz=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),vz=2*Math.PI,Ez=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=vz);function i(e){return t*cz(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*vz)},i.period=function(n){return e(t,n)},i}(1,.3),xz=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=vz);function i(e){return 1-t*cz(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*vz)},i.period=function(n){return e(t,n)},i}(1,.3),bz=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=vz);function i(e){return((e=2*e-1)<0?t*cz(-e)*Math.sin((r-e)/n):2-t*cz(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*vz)},i.period=function(n){return e(t,n)},i}(1,.3),Cz=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:function(e){return+e},easeQuad:tz,easeQuadIn:function(e){return e*e},easeQuadOut:function(e){return e*(2-e)},easeQuadInOut:tz,easeCubic:nz,easeCubicIn:function(e){return e*e*e},easeCubicOut:function(e){return--e*e*e+1},easeCubicInOut:nz,easePoly:az,easePolyIn:rz,easePolyOut:iz,easePolyInOut:az,easeSin:lz,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*sz)},easeSinOut:function(e){return Math.sin(e*sz)},easeSinInOut:lz,easeExp:uz,easeExpIn:function(e){return cz(1-+e)},easeExpOut:function(e){return 1-cz(e)},easeExpInOut:uz,easeCircle:hz,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCircleInOut:hz,easeBounce:fz,easeBounceIn:function(e){return 1-fz(1-e)},easeBounceOut:fz,easeBounceInOut:function(e){return((e*=2)<=1?1-fz(1-e):fz(e-1)+1)/2},easeBack:yz,easeBackIn:mz,easeBackOut:gz,easeBackInOut:yz,easeElastic:xz,easeElasticIn:Ez,easeElasticOut:xz,easeElasticInOut:bz});function Sz(e){return function(){return e}}function wz(e){return 1==(e=+e)?Tz:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Sz(isNaN(t)?n:t)}}function Tz(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Sz(isNaN(e)?t:e)}var kz=function e(t){var n=wz(t);function r(e,t){var r=n((e=_e(e)).r,(t=_e(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=Tz(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function _z(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function Oz(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Az(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Rz(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function Iz(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Mz(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Nz(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Rz(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var Pz=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fz=new RegExp(Pz.source,"g");function Lz(e,t){var n,r,i,a=Pz.lastIndex=Fz.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=Pz.exec(e))&&(r=Fz.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:Mz(n,r)})),a=Fz.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function Rz(e,t){var n,r=typeof t;return null==t||"boolean"===r?Sz(t):("number"===r?Mz:"string"===r?(n=Te(t))?(t=n,kz):Lz:t instanceof Te?kz:t instanceof Date?Iz:Oz(t)?_z:Array.isArray(t)?Az:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Nz:Mz)(e,t)}var Dz=[1,0,0,0,1,0,0,0,1];function Bz(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var a=t.duration,o=t.easing;if(n=n-i-t.delay,t.repeat)r=n%a/a,r=Cz[o](r);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=Cz[o](r)}if(t.onFrame){var s=t.onFrame(r);e.attr(s)}else!function(e,t,n){var r={},i=t.fromAttrs,a=t.toAttrs;if(!e.destroyed){var o,s,l,c;for(var u in a)if(!hN(i[u],a[u]))if("path"===u){var h=a[u],p=i[u];h.length>p.length?(h=p$(a[u]),p=p$(i[u]),p=m$(p,h),p=v$(p,h),t.fromAttrs.path=p,t.toAttrs.path=h):t.pathFormatted||(h=p$(a[u]),p=p$(i[u]),p=v$(p,h),t.fromAttrs.path=p,t.toAttrs.path=h,t.pathFormatted=!0),r[u]=[];for(var d=0;d<h.length;d++){for(var f=h[d],m=p[d],g=[],y=0;y<f.length;y++)RM(f[y])&&m&&RM(m[y])?(o=Rz(m[y],f[y]),g.push(o(n))):g.push(f[y]);r[u].push(g)}}else if("matrix"===u){var v=(l=i[u]||Dz,(Oz(c=a[u]||Dz)?_z:Az)(l,c))(n);r[u]=v}else["fill","stroke","fillStyle","strokeStyle"].includes(u)&&(s=a[u],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[u]=a[u]:oM(a[u])||(o=Rz(i[u],a[u]),r[u]=o(n));e.attr(r)}}(e,t,r);return!1}var $z=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=Q$((function(i){if(r.current=i,r.animators.length>0){for(var a=r.animators.length-1;a>=0;a--)if((e=r.animators[a]).destroyed)r.removeAnimator(a);else{if(!e.isAnimatePaused())for(var o=(t=e.get("animations")).length-1;o>=0;o--)n=t[o],Bz(e,n,i)&&(t.splice(o,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(a)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),zz=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Hz(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function jz(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&C$(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var Gz=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");uM(zz,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");uM(zz,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,a){var o=new E$(e,t);return o.fromShape=i,o.toShape=a,o.x=n.x,o.y=n.y,o.clientX=n.clientX,o.clientY=n.clientY,o.propagationPath.push(r),o},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],a=!1;if(i)i.call(this,n,r,t);else{var o=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(a=!0,o&&this._emitEvent(e,t,n,o,o,null),this._emitEvent(e,t,n,null,o,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(a||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,a);else{var o=this.mousedownPoint;if(o){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=o.clientX-e.clientX,u=o.clientY-e.clientY;l>120||c*c+u*u>40?s&&s.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,e,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,a){var o=this._getEventObj(e,t,n,r,i,a);if(r){o.shape=r,Hz(r,e,o);for(var s=r.getParent();s;)s.emitDelegation(e,o),o.propagationStopped||jz(s,e,o),o.propagationPath.push(s),s=s.getParent()}else{Hz(this.canvas,e,o)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),Vz=JP(),Yz=Vz&&"firefox"===Vz.name;!function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");wM(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new Gz({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new $z(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");b$&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");b$&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(Yz&&!sM(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!sM(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))}}($$),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}KI(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t}}($$),function(e){function t(t){return e.call(this,t)||this}KI(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,a=e.maxY;if(t){var o=k$(t,[e.minX,e.minY]),s=k$(t,[e.maxX,e.minY]),l=k$(t,[e.minX,e.maxY]),c=k$(t,[e.maxX,e.maxY]);n=Math.min(o[0],s[0],l[0],c[0]),i=Math.max(o[0],s[0],l[0],c[0]),r=Math.min(o[1],s[1],l[1],c[1]),a=Math.max(o[1],s[1],l[1],c[1])}var u=this.attrs;if(u.shadowColor){var h=u.shadowBlur,p=void 0===h?0:h,d=u.shadowOffsetX,f=void 0===d?0:d,m=u.shadowOffsetY,g=void 0===m?0:m,y=n-p+f,v=i+p+f,E=r-p+g,x=a+p+g;n=Math.min(n,y),i=Math.max(i,v),r=Math.min(r,E),a=Math.max(a,x)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],a=(i=this.invertFromMatrix(i))[0],o=i[1],s=this._isInBBox(a,o);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(a,o)){if(this.isInShape(a,o))return!0;if(n&&n.isHit(a,o))return!0;if(r&&r.isHit(a,o))return!0}return!1}}(P$);var Uz=new Map;function qz(e,t){Uz.set(e,t)}function Wz(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function Xz(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Kz(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function Qz(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=Kz(t,n.getCanvasBBox())),r&&(t=Kz(t,r.getCanvasBBox())),t}var Zz=null;function Jz(e,t){var n=function(){if(!Zz){var e=document.createElement("canvas");e.width=1,e.height=1,Zz=e.getContext("2d")}return Zz}(),r=0;if(sM(e)||""===e)return r;(n.save(),n.font=t,wM(e)&&e.includes("\n"))?uM(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width;return n.restore(),r}function eH(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||0===Math.sin(l)||DM(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(u-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}function tH(e,t,n){var r=new E$(t,n);r.target=e,r.propagationPath.push(e),e.emitDelegation(t,r);for(var i=e.getParent();i;)i.emitDelegation(t,r),r.propagationPath.push(i),i=i.getParent()}qz("rect",Wz),qz("image",Wz),qz("circle",Xz),qz("marker",Xz),qz("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}var o=tR(n,r),s=o.x,l=o.y,c={minX:s,minY:l,maxX:s+o.width,maxY:l+o.height};return{x:(c=Qz(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),qz("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}return tR(n,r)})),qz("text",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=function(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}(t));var l,c=Jz(i,s);if(c){var u=t.textAlign,h=t.textBaseline,p=function(e,t,n){var r=1;return wM(e)&&(r=e.split("\n").length),r>1?t*r+function(e,t){return t?t-e:.14*e}(t,n)*(r-1):t}(i,a,o),d={x:n,y:r-p};u&&("end"===u||"right"===u?d.x-=c:"center"===u&&(d.x-=c/2)),h&&("top"===h?d.y+=p:"middle"===h&&(d.y+=p/2)),l={x:d.x,y:d.y,width:c,height:p}}else l={x:n,y:r,width:0,height:0};return l})),qz("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=(m=e[a]).currentPoint,s=m.params,l=m.prePoint,c=void 0;switch(m.command){case"Q":c=uR.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":c=gR.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var u=m.arcParams;c=ER(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(o[0]),r.push(o[1])}c&&(m.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&i.push(m)}n=n.filter((function(e){return!Number.isNaN(e)})),r=r.filter((function(e){return!Number.isNaN(e)}));var h=EM(n),p=EM(r),d=vM(n),f=vM(r);if(0===i.length)return{x:h,y:p,width:d-h,height:f-p};for(a=0;a<i.length;a++){var m;(o=(m=i[a]).currentPoint)[0]===h?h-=eH(m,t).xExtra:o[0]===d&&(d+=eH(m,t).xExtra),o[1]===p?p-=eH(m,t).yExtra:o[1]===f&&(f+=eH(m,t).yExtra)}return{x:h,y:p,width:d-h,height:f-p}}(e.get("segments")||GR(n),r),a=i.x,o=i.y,s={minX:a,minY:o,maxX:a+i.width,maxY:o+i.height};return{x:(s=Qz(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),qz("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,a),maxY:Math.max(r,a)};return{x:(o=Qz(e,o)).minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}})),qz("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;return{x:n-i,y:r-a,width:2*i,height:2*a}}));var nH=[1,0,0,0,1,0,0,0,1];function rH(e,t,n){return void 0===n&&(n=nH),t?xF(n,[["t",-e.x,-e.y],["r",t],["t",e.x,e.y]]):null}function iH(e,t){return e.x||e.y?xF(t||nH,[["t",e.x,e.y]]):null}function aH(e,t){var n=[0,0];return function(e,t,n){var r=t[0],i=t[1];e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7]}(n,t,e),n}function oH(e,t,n,r){if(t){var i=rH({x:n,y:r},t,e.getMatrix());e.setMatrix(i)}}function sH(e,t,n){var r=iH({x:t,y:n});e.attr("matrix",r)}function lH(e){var t=0,n=0,r=0,i=0;return RM(e)?t=n=r=i=e:lM(e)&&(t=e[0],r=sM(e[1])?e[0]:e[1],i=sM(e[2])?e[0]:e[2],n=sM(e[3])?r:e[3]),[t,r,i,n]}function cH(e){for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t[n])}function uH(e){var t=e.start,n=e.end,r=Math.min(t.x,n.x),i=Math.min(t.y,n.y),a=Math.max(t.x,n.x),o=Math.max(t.y,n.y);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function hH(e,t,n,r){var i=e+n,a=t+r;return{x:e,y:t,width:n,height:r,minX:e,minY:t,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function pH(e,t,n){return(1-n)*e+t*n}function dH(e,t,n){return{x:e.x+Math.cos(n)*t,y:e.y+Math.sin(n)*t}}var fH=function(e,t,n){return void 0===n&&(n=Math.pow(Number.EPSILON,.5)),[e,t].includes(1/0)?Math.abs(e)===Math.abs(t):Math.abs(e-t)<n};function mH(e){var t,n,r,i,a,o=e.getClip(),s=o&&o.getBBox();if(e.isGroup()){var l=1/0,c=-1/0,u=1/0,h=-1/0,p=e.getChildren();p.length>0?uM(p,(function(e){if(e.get("visible")){if(e.isGroup()&&0===e.get("children").length)return!0;var t=mH(e),n=e.applyToMatrix([t.minX,t.minY,1]),r=e.applyToMatrix([t.minX,t.maxY,1]),i=e.applyToMatrix([t.maxX,t.minY,1]),a=e.applyToMatrix([t.maxX,t.maxY,1]),o=Math.min(n[0],r[0],i[0],a[0]),s=Math.max(n[0],r[0],i[0],a[0]),p=Math.min(n[1],r[1],i[1],a[1]),d=Math.max(n[1],r[1],i[1],a[1]);o<l&&(l=o),s>c&&(c=s),p<u&&(u=p),d>h&&(h=d)}})):(l=0,c=0,u=0,h=0),t=hH(l,u,c-l,h-u)}else t=e.getBBox();return s?(n=t,r=s,i=Math.max(n.minX,r.minX),a=Math.max(n.minY,r.minY),hH(i,a,Math.min(n.maxX,r.maxX)-i,Math.min(n.maxY,r.maxY)-a)):t}function gH(e){return e+"px"}function yH(e,t,n,r){var i,a,o,s,l=r/(i=e,o=(a=t).x-i.x,s=a.y-i.y,Math.sqrt(o*o+s*s)),c=0;return"start"===n?c=0-l:"end"===n&&(c=1+l),{x:pH(e.x,t.x,c),y:pH(e.y,t.y,c)}}var vH={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},EH=function(e){function t(t){var n=e.call(this,t)||this;return n.initCfg(),n}return KI(t,e),t.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},t.prototype.clear=function(){},t.prototype.update=function(e){var t=this,n=this.get("defaultCfg");uM(e,(function(e,r){var i=e;t.get(r)!==e&&(cM(e)&&n[r]&&(i=oN({},n[r],e)),t.set(r,i))})),this.updateInner(e),this.afterUpdate(e)},t.prototype.updateInner=function(e){},t.prototype.afterUpdate=function(e){jM(e,"visible")&&(e.visible?this.show():this.hide()),jM(e,"capture")&&this.setCapture(e.capture)},t.prototype.getLayoutBBox=function(){return this.getBBox()},t.prototype.getLocationType=function(){return this.get("locationType")},t.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},t.prototype.setOffset=function(e,t){this.update({offsetX:e,offsetY:t})},t.prototype.setLocation=function(e){var t=QI({},e);this.update(t)},t.prototype.getLocation=function(){var e=this,t={},n=this.get("locationType");return uM(vH[n],(function(n){t[n]=e.get(n)})),t},t.prototype.isList=function(){return!1},t.prototype.isSlider=function(){return!1},t.prototype.init=function(){},t.prototype.initCfg=function(){var e=this;uM(this.get("defaultCfg"),(function(t,n){var r=e.get(n);if(cM(r)){var i=oN({},t,r);e.set(n,i)}}))},t}(w$),xH=["visible","tip","delegateObject"],bH=["container","group","shapesMap","isRegister","isUpdating","destroyed"],CH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},t.prototype.remove=function(){this.clear(),this.get("group").remove()},t.prototype.clear=function(){this.get("group").clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},t.prototype.getChildComponentById=function(e){var t=this.getElementById(e);return t&&t.get("component")},t.prototype.getElementById=function(e){return this.get("shapesMap")[e]},t.prototype.getElementByLocalId=function(e){var t=this.getElementId(e);return this.getElementById(t)},t.prototype.getElementsByName=function(e){var t=[];return uM(this.get("shapesMap"),(function(n){n.get("name")===e&&t.push(n)})),t},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateInner=function(e){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},t.prototype.render=function(){var e=this.get("offScreenGroup");e||(e=this.offScreenRender());var t=this.get("group");this.updateElements(e,t),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},t.prototype.show=function(){this.get("group").show(),this.set("visible",!0)},t.prototype.hide=function(){this.get("group").hide(),this.set("visible",!1)},t.prototype.setCapture=function(e){this.get("group").set("capture",e),this.set("capture",e)},t.prototype.destroy=function(){this.removeEvent(),this.remove(),e.prototype.destroy.call(this)},t.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},t.prototype.getLayoutBBox=function(){var e=this.get("group"),t=this.getInnerLayoutBBox(),n=e.getTotalMatrix();return n&&(t=function(e,t){var n=aH(e,[t.minX,t.minY]),r=aH(e,[t.maxX,t.minY]),i=aH(e,[t.minX,t.maxY]),a=aH(e,[t.maxX,t.maxY]),o=Math.min(n[0],r[0],i[0],a[0]),s=Math.max(n[0],r[0],i[0],a[0]),l=Math.min(n[1],r[1],i[1],a[1]),c=Math.max(n[1],r[1],i[1],a[1]);return{x:o,y:l,minX:o,minY:l,maxX:s,maxY:c,width:s-o,height:c-l}}(n,t)),t},t.prototype.on=function(e,t,n){return this.get("group").on(e,t,n),this},t.prototype.off=function(e,t){var n=this.get("group");return n&&n.off(e,t),this},t.prototype.emit=function(e,t){this.get("group").emit(e,t)},t.prototype.init=function(){e.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},t.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},t.prototype.delegateEmit=function(e,t){var n=this.get("group");t.target=n,n.emit(e,t),tH(n,e,t)},t.prototype.createOffScreenGroup=function(){return new(this.get("group").getGroupBase())({delegateObject:this.getDelegateObject()})},t.prototype.applyOffset=function(){var e=this.get("offsetX"),t=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e,y:t})},t.prototype.initGroup=function(){var e=this.get("container");this.set("group",e.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},t.prototype.offScreenRender=function(){this.clearOffScreenCache();var e=this.createOffScreenGroup();return this.renderInner(e),this.set("offScreenGroup",e),this.set("offScreenBBox",mH(e)),e},t.prototype.addGroup=function(e,t){this.appendDelegateObject(e,t);var n=e.addGroup(t);return this.get("isRegister")&&this.registerElement(n),n},t.prototype.addShape=function(e,t){this.appendDelegateObject(e,t);var n=e.addShape(t);return this.get("isRegister")&&this.registerElement(n),n},t.prototype.addComponent=function(e,t){var n=t.id,r=t.component,i=ZI(t,["id","component"]),a=new r(QI(QI({},i),{id:n,container:e,updateAutoRender:this.get("updateAutoRender")}));return a.init(),a.render(),this.get("isRegister")&&this.registerElement(a.get("group")),a},t.prototype.initEvent=function(){},t.prototype.removeEvent=function(){this.get("group").off()},t.prototype.getElementId=function(e){return this.get("id")+"-"+this.get("name")+"-"+e},t.prototype.registerElement=function(e){var t=e.get("id");this.get("shapesMap")[t]=e},t.prototype.unregisterElement=function(e){var t=e.get("id");delete this.get("shapesMap")[t]},t.prototype.moveElementTo=function(e,t){var n=iH(t);e.attr("matrix",n)},t.prototype.addAnimation=function(e,t,n){var r=t.attr("opacity");sM(r)&&(r=1),t.attr("opacity",0),t.animate({opacity:r},n)},t.prototype.removeAnimation=function(e,t,n){t.animate({opacity:0},n)},t.prototype.updateAnimation=function(e,t,n,r){t.animate(n,r)},t.prototype.updateElements=function(e,t){var n,r=this,i=this.get("animate"),a=this.get("animateOption");uM(e.getChildren().slice(0),(function(e){var o,s,l=e.get("id"),c=r.getElementById(l),u=e.get("name");if(c)if(e.get("isComponent")){var h=e.get("component"),p=c.get("component"),d=yN(h.cfg,(o=hM(h.cfg),void 0===(s=bH)&&(s=[]),rM(o,(function(e){return!nM(s,e)}))));p.update(d),c.set("update_status","update")}else{var f=r.getReplaceAttrs(c,e);i&&a.update?r.updateAnimation(u,c,f,a.update):c.attr(f),e.isGroup()&&r.updateElements(e,c),uM(xH,(function(t){c.set(t,e.get(t))})),function(e,t){if(e.getClip()||t.getClip()){var n=t.getClip();if(n){var r={type:n.get("type"),attrs:n.attr()};e.setClip(r)}else e.setClip(null)}}(c,e),n=c,c.set("update_status","update")}else{t.add(e);var m=t.getChildren();if(m.splice(m.length-1,1),n){var g=m.indexOf(n);m.splice(g+1,0,e)}else m.unshift(e);if(r.registerElement(e),e.set("update_status","add"),e.get("isComponent"))(h=e.get("component")).set("container",t);else e.isGroup()&&r.registerNewGroup(e);if(n=e,i){var y=r.get("isInit")?a.appear:a.enter;y&&r.addAnimation(u,e,y)}}}))},t.prototype.clearUpdateStatus=function(e){uM(e.getChildren(),(function(e){e.set("update_status",null)}))},t.prototype.clearOffScreenCache=function(){var e=this.get("offScreenGroup");e&&e.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},t.prototype.getDelegateObject=function(){var e;return(e={})[this.get("name")]=this,e.component=this,e},t.prototype.appendDelegateObject=function(e,t){var n=e.get("delegateObject");t.delegateObject||(t.delegateObject={}),tN(t.delegateObject,n)},t.prototype.getReplaceAttrs=function(e,t){var n=e.attr(),r=t.attr();return uM(n,(function(e,t){void 0===r[t]&&(r[t]=void 0)})),r},t.prototype.registerNewGroup=function(e){var t=this;uM(e.getChildren(),(function(e){t.registerElement(e),e.set("update_status","add"),e.isGroup()&&t.registerNewGroup(e)}))},t.prototype.deleteElements=function(){var e=this,t=this.get("shapesMap"),n=[];uM(t,(function(e,t){!e.get("update_status")||e.destroyed?n.push([t,e]):e.set("update_status",null)}));var r=this.get("animate"),i=this.get("animateOption");uM(n,(function(n){var a=n[0],o=n[1];if(!o.destroyed){var s=o.get("name");if(r&&i.leave){var l=tN({callback:function(){e.removeElement(o)}},i.leave);e.removeAnimation(s,o,l)}else e.removeElement(o)}delete t[a]}))},t.prototype.removeElement=function(e){if(e.get("isGroup")){var t=e.get("component");t&&t.destroy()}e.remove()},t}(EH);function SH(e,t){return e.charCodeAt(t)>0&&e.charCodeAt(t)<128?1:2}function wH(e){if(e.length>400)return function(e){for(var t=e.map((function(e){var t=e.attr("text");return sM(t)?"":""+t})),n=0,r=0,i=0;i<t.length;i+=1){for(var a=0,o=0;o<=t[i].length;o+=1){var s=t[i].charCodeAt(o);a+=s>=19968&&s<=40869?2:1}a>n&&(n=a,r=i)}return e[r].getBBox().width}(e);var t=0;return uM(e,(function(e){var n=e.getBBox().width;t<n&&(t=n)})),t}function TH(e,t,n,r){var i;void 0===r&&(r="tail");var a=null!==(i=t.attr("text"))&&void 0!==i?i:"";if("tail"===r){var o=function(e,t,n,r){void 0===r&&(r="...");var i,a,o=IN(r,n),s=wM(e)?e:VM(e),l=t,c=[];if(IN(e,n)<=t)return e;for(;i=s.substr(0,16),!((a=IN(i,n))+o>l&&a>l);)if(c.push(i),l-=a,!(s=s.substr(16)))return c.join("");for(;i=s.substr(0,1),!((a=IN(i,n))+o>l);)if(c.push(i),l-=a,!(s=s.substr(1)))return c.join("");return""+c.join("")+r}(a,n,yN(t.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),"…");return a!==o?(t.attr("text",o),t.set("tip",a),!0):(t.set("tip",null),!1)}var s=function(e,t){var n=t.getCanvasBBox();return e?n.width:n.height}(e,t),l=function(e){for(var t=0,n=0;n<e.length;n++)t+=SH(e,n);return t}(a),c=!1;if(n<s){var u=Math.floor(n/s*l)-2,h=void 0;(h=u>=0?function(e,t,n){void 0===n&&(n="tail");var r=e.length,i="";if("tail"===n){for(var a=0,o=0;a<t&&a+SH(e,o)<=t;)i+=e[o],a+=SH(e,o),o++;i+="…"}else if("head"===n){for(a=0,o=r-1;a<t&&a+SH(e,o)<=t;)i+=e[o],a+=SH(e,o),o--;i="…"+i}else{for(var s="",l="",c=(a=0,0),u=r-1;a<t;){var h=SH(e,c),p=!1;h+a<=t&&(s+=e[c],c++,a+=h,p=!0);var d=SH(e,u);if(d+a<=t&&(l=e[u]+l,a+=d,u--,p=!0),!p)break}i=s+"…"+l}return i}(a,u,r):"…")&&(t.attr("text",h),c=!0)}return c?t.set("tip",a):t.set("tip",null),c}function kH(e,t){var n=t.x,r=t.y,i=t.content,a=t.style,o=t.id,s=t.name,l=t.rotate,c=t.maxLength,u=t.autoEllipsis,h=t.isVertical,p=t.ellipsisPosition,d=t.background,f=e.addGroup({id:o+"-group",name:s+"-group",attrs:{x:n,y:r}}),m=f.addShape({type:"text",id:o,name:s,attrs:QI({x:0,y:0,text:i},a)}),g=lH(fN(d,"padding",0));c&&u&&TH(!h,m,c-(g[1]+g[3]),p);if(d){var y=fN(d,"style",{}),v=m.getCanvasBBox(),E=v.minX,x=v.minY,b=v.width,C=v.height;f.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:QI({x:E-g[3],y:x-g[0],width:b+g[1]+g[3],height:C+g[0]+g[2]},y)}).toBack()}sH(f,n,r),oH(f,l,n,r)}var _H={fontFamily:'\n  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"',textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},OH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:_H.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:_H.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:_H.lineColor,lineWidth:1}}}})},t.prototype.renderInner=function(e){this.renderLine(e),this.get("text")&&this.renderLabel(e)},t.prototype.renderLine=function(e){var t=this.get("start"),n=this.get("end"),r=this.get("style");this.addShape(e,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:QI({x1:t.x,y1:t.y,x2:n.x,y2:n.y},r)})},t.prototype.getLabelPoint=function(e,t,n){var r;return((r="start"===n?0:"center"===n?.5:wM(n)&&-1!==n.indexOf("%")?parseInt(n,10)/100:RM(n)?n:1)>1||r<0)&&(r=1),{x:pH(e.x,t.x,r),y:pH(e.y,t.y,r)}},t.prototype.renderLabel=function(e){var t=this.get("text"),n=this.get("start"),r=this.get("end"),i=t.position,a=t.content,o=t.style,s=t.offsetX,l=t.offsetY,c=t.autoRotate,u=t.maxLength,h=t.autoEllipsis,p=t.ellipsisPosition,d=t.background,f=t.isVertical,m=void 0!==f&&f,g=this.getLabelPoint(n,r,i),y=g.x+s,v=g.y+l,E={id:this.getElementId("line-text"),name:"annotation-line-text",x:y,y:v,content:a,style:o,maxLength:u,autoEllipsis:h,ellipsisPosition:p,background:d,isVertical:m};if(c){var x=[r.x-n.x,r.y-n.y];E.rotate=Math.atan2(x[1],x[0])}kH(e,E)},t}(CH),AH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:_H.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:_H.fontFamily}}})},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.renderInner=function(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get("content"),a=this.get("style");kH(e,{id:this.getElementId("text"),name:this.get("name")+"-text",x:n,y:r,content:i,style:a,maxLength:this.get("maxLength"),autoEllipsis:this.get("autoEllipsis"),isVertical:this.get("isVertical"),ellipsisPosition:this.get("ellipsisPosition"),background:this.get("background"),rotate:this.get("rotate")})},t.prototype.resetLocation=function(){var e=this.getElementByLocalId("text-group");if(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get("rotate");sH(e,n,r),oH(e,i,n,r)}},t}(CH),IH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,style:{stroke:"#999",lineWidth:1}})},t.prototype.renderInner=function(e){this.renderArc(e)},t.prototype.getArcPath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,a=dH(t,n,r),o=dH(t,n,i),s=i-r>Math.PI?1:0,l=[["M",a.x,a.y]];if(i-r==2*Math.PI){var c=dH(t,n,r+Math.PI);l.push(["A",n,n,0,s,1,c.x,c.y]),l.push(["A",n,n,0,s,1,o.x,o.y])}else l.push(["A",n,n,0,s,1,o.x,o.y]);return l},t.prototype.renderArc=function(e){var t=this.getArcPath(),n=this.get("style");this.addShape(e,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:QI({path:t},n)})},t}(CH),MH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:_H.regionColor,opacity:.4}}})},t.prototype.renderInner=function(e){this.renderRegion(e)},t.prototype.renderRegion=function(e){var t=this.get("start"),n=this.get("end"),r=this.get("style"),i=uH({start:t,end:n});this.addShape(e,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:QI({x:i.x,y:i.y,width:i.width,height:i.height},r)})},t}(CH),NH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},t.prototype.renderInner=function(e){this.renderImage(e)},t.prototype.getImageAttrs=function(){var e=this.get("start"),t=this.get("end"),n=this.get("style"),r=uH({start:e,end:t}),i=this.get("src");return QI({x:r.x,y:r.y,img:i,width:r.width,height:r.height},n)},t.prototype.renderImage=function(e){this.addShape(e,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},t}(CH),PH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:_H.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:_H.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:_H.fontFamily}}}})},t.prototype.renderInner=function(e){fN(this.get("line"),"display")&&this.renderLine(e),fN(this.get("text"),"display")&&this.renderText(e),fN(this.get("point"),"display")&&this.renderPoint(e),this.get("autoAdjust")&&this.autoAdjust(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},t.prototype.renderPoint=function(e){var t=this.getShapeAttrs().point;this.addShape(e,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:t})},t.prototype.renderLine=function(e){var t=this.getShapeAttrs().line;this.addShape(e,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:t})},t.prototype.renderText=function(e){var t=this.getShapeAttrs().text,n=t.x,r=t.y,i=t.text,a=ZI(t,["x","y","text"]),o=this.get("text"),s=o.background,l=o.maxLength,c=o.autoEllipsis,u=o.isVertival,h=o.ellipsisPosition;kH(e,{x:n,y:r,id:this.getElementId("text"),name:"annotation-text",content:i,style:a,background:s,maxLength:l,autoEllipsis:c,isVertival:u,ellipsisPosition:h})},t.prototype.autoAdjust=function(e){var t=this.get("direction"),n=this.get("x"),r=this.get("y"),i=fN(this.get("line"),"length",0),a=this.get("coordinateBBox"),o=e.getBBox(),s=o.minX,l=o.maxX,c=o.minY,u=o.maxY,h=e.findById(this.getElementId("text-group")),p=e.findById(this.getElementId("text")),d=e.findById(this.getElementId("line"));if(a){if(h){if(n+s<=a.minX){var f=a.minX-(n+s);sH(h,h.attr("x")+f,h.attr("y"))}if(n+l>=a.maxX){f=n+l-a.maxX;sH(h,h.attr("x")-f,h.attr("y"))}}if("upward"===t&&r+c<=a.minY||"upward"!==t&&r+u>=a.maxY){var m=void 0,g=void 0;"upward"===t&&r+c<=a.minY?(m="top",g=1):(m="bottom",g=-1),p.attr("textBaseline",m),d&&d.attr("path",[["M",0,0],["L",0,i*g]]),sH(h,h.attr("x"),(i+2)*g)}}},t.prototype.getShapeAttrs=function(){var e=fN(this.get("line"),"display"),t=fN(this.get("point"),"style",{}),n=fN(this.get("line"),"style",{}),r=fN(this.get("text"),"style",{}),i=this.get("direction"),a=e?fN(this.get("line"),"length",0):0,o="upward"===i?-1:1;return{point:QI({x:0,y:0},t),line:QI({path:[["M",0,0],["L",0,a*o]]},n),text:QI({x:0,y:(a+2)*o,text:fN(this.get("text"),"content",""),textBaseline:"upward"===i?"bottom":"top"},r)}},t}(CH),FH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:_H.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:_H.textColor,fontFamily:_H.fontFamily}}}})},t.prototype.renderInner=function(e){var t=fN(this.get("region"),"style",{});fN(this.get("text"),"style",{});var n=this.get("lineLength")||0,r=this.get("points");if(r.length){var i=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=Math.min.apply(Math,t),i=Math.min.apply(Math,n),a=Math.max.apply(Math,t),o=Math.max.apply(Math,n);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}(r),a=[];a.push(["M",r[0].x,i.minY-n]),r.forEach((function(e){a.push(["L",e.x,e.y])})),a.push(["L",r[r.length-1].x,r[r.length-1].y-n]),this.addShape(e,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:QI({path:a},t)}),kH(e,QI({id:this.getElementId("text"),name:"annotation-text",x:(i.minX+i.maxX)/2,y:i.minY-n},this.get("text")))}},t}(CH),LH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},t.prototype.renderInner=function(e){var t=this,n=this.get("start"),r=this.get("end"),i=this.addGroup(e,{id:this.getElementId("region-filter"),capture:!1});uM(this.get("shapes"),(function(e,n){var r=e.get("type"),a=nN(e.attr());t.adjustShapeAttrs(a),t.addShape(i,{id:t.getElementId("shape-"+r+"-"+n),capture:!1,type:r,attrs:a})}));var a=uH({start:n,end:r});i.setClip({type:"rect",attrs:{x:a.minX,y:a.minY,width:a.width,height:a.height}})},t.prototype.adjustShapeAttrs=function(e){var t=this.get("color");e.fill&&(e.fill=e.fillStyle=t),e.stroke=e.strokeStyle=t},t}(CH),RH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"annotation",type:"shape",draw:CN})},t.prototype.renderInner=function(e){var t=this.get("render");oM(t)&&t(e)},t}(CH),DH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.show=function(){this.get("container").style.display="",this.set("visible",!0)},t.prototype.hide=function(){this.get("container").style.display="none",this.set("visible",!1)},t.prototype.setCapture=function(e){var t=e?"auto":"none";this.getContainer().style.pointerEvents=t,this.set("capture",e)},t.prototype.getBBox=function(){var e=this.getContainer();return hH(parseFloat(e.style.left)||0,parseFloat(e.style.top)||0,e.clientWidth,e.clientHeight)},t.prototype.clear=function(){cH(this.get("container"))},t.prototype.destroy=function(){this.removeEvent(),this.removeDom(),e.prototype.destroy.call(this)},t.prototype.init=function(){e.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},t.prototype.initCapture=function(){this.setCapture(this.get("capture"))},t.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},t.prototype.initDom=function(){},t.prototype.initContainer=function(){var e=this.get("container");if(sM(e)){e=this.createDom();var t=this.get("parent");wM(t)&&(t=document.getElementById(t),this.set("parent",t)),t.appendChild(e),this.set("container",e)}else wM(e)&&(e=document.getElementById(e),this.set("container",e));this.get("parent")||this.set("parent",e.parentNode)},t.prototype.resetStyles=function(){var e=this.get("domStyles"),t=this.get("defaultStyles");e=e?oN({},t,e):t,this.set("domStyles",e)},t.prototype.applyStyles=function(){var e=this.get("domStyles");if(e){var t=this.getContainer();this.applyChildrenStyles(t,e);var n,r=this.get("containerClassName");if(r&&(n=r,t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))))tP(t,e[r])}},t.prototype.applyChildrenStyles=function(e,t){uM(t,(function(t,n){uM(e.getElementsByClassName(n),(function(e){tP(e,t)}))}))},t.prototype.applyStyle=function(e,t){tP(t,this.get("domStyles")[e])},t.prototype.createDom=function(){return QN(this.get("containerTpl"))},t.prototype.initEvent=function(){},t.prototype.removeDom=function(){var e=this.get("container");e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.removeEvent=function(){},t.prototype.updateInner=function(e){jM(e,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},t.prototype.resetPosition=function(){},t}(EH),BH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},t.prototype.render=function(){var e=this.getContainer(),t=this.get("html");cH(e);var n=oM(t)?t(e):t;JM(n)?e.appendChild(n):wM(n)&&e.appendChild(QN(n)),this.resetPosition()},t.prototype.resetPosition=function(){var e=this.getContainer(),t=this.getLocation(),n=t.x,r=t.y,i=this.get("alignX"),a=this.get("alignY"),o=this.get("offsetX"),s=this.get("offsetY"),l=eP(e),c=JN(e),u={x:n,y:r};"middle"===i?u.x-=Math.round(l/2):"right"===i&&(u.x-=Math.round(l)),"middle"===a?u.y-=Math.round(c/2):"bottom"===a&&(u.y-=Math.round(c)),o&&(u.x+=o),s&&(u.y+=s),tP(e,{position:"absolute",left:u.x+"px",top:u.y+"px",zIndex:this.get("zIndex")})},t}(DH),$H=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:OH,Text:AH,Arc:IH,Region:MH,Image:NH,DataMarker:PH,DataRegion:FH,RegionFilter:LH,Shape:RH,Html:BH});function zH(e,t,n){var r=t+"Style",i=null;return uM(n,(function(t,n){e[n]&&t[r]&&(i||(i={}),tN(i,t[r]))})),i}var HH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:_H.lineColor}},tickLine:{style:{lineWidth:1,stroke:_H.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:_H.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:_H.textColor,fontFamily:_H.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:_H.textColor,textBaseline:"middle",fontFamily:_H.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:_H.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},t.prototype.renderInner=function(e){this.get("line")&&this.drawLine(e),this.drawTicks(e),this.get("title")&&this.drawTitle(e)},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("ticks")},t.prototype.setItems=function(e){this.update({ticks:e})},t.prototype.updateItem=function(e,t){tN(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("label-group");e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n,this.updateTickStates(e)},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get("tickStates"),n=[];return uM(t,(function(t,r){e[r]&&n.push(r)})),n},t.prototype.clearItemsState=function(e){var t=this;uM(this.getItemsByState(e),(function(n){t.setItemState(n,e,!1)}))},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return rM(n,(function(n){return t.hasState(n,e)}))},t.prototype.getSidePoint=function(e,t){var n=this.getSideVector(t,e);return{x:e.x+n[0],y:e.y+n[1]}},t.prototype.getTextAnchor=function(e){var t;return DM(e[0],0)?t="center":e[0]>0?t="start":e[0]<0&&(t="end"),t},t.prototype.getTextBaseline=function(e){var t;return DM(e[1],0)?t="middle":e[1]>0?t="top":e[1]<0&&(t="bottom"),t},t.prototype.processOverlap=function(e){},t.prototype.drawLine=function(e){var t=this.getLinePath(),n=this.get("line");this.addShape(e,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:tN({path:t},n.style)})},t.prototype.getTickLineItems=function(e){var t=this,n=[],r=this.get("tickLine"),i=r.alignTick,a=r.length,o=1;return e.length>=2&&(o=e[1].value-e[0].value),uM(e,(function(e){var r=e.point;i||(r=t.getTickPoint(e.value-o/2));var s=t.getSidePoint(r,a);n.push({startPoint:r,tickValue:e.value,endPoint:s,tickId:e.id,id:"tickline-"+e.id})})),n},t.prototype.getSubTickLineItems=function(e){var t=[],n=this.get("subTickLine"),r=n.count,i=e.length;if(i>=2)for(var a=0;a<i-1;a++)for(var o=e[a],s=e[a+1],l=0;l<r;l++){var c=(l+1)/(r+1),u=(1-c)*o.tickValue+c*s.tickValue,h=this.getTickPoint(u),p=this.getSidePoint(h,n.length);t.push({startPoint:h,endPoint:p,tickValue:u,id:"sub-"+o.id+"-"+l})}return t},t.prototype.getTickLineAttrs=function(e,t,n,r){var i=this.get(t).style,a={points:[e.startPoint,e.endPoint]},o=fN(this.get("theme"),["tickLine","style"],{});i=oM(i)?tN({},o,i(a,n,r)):i;var s=e.startPoint,l=e.endPoint;return QI({x1:s.x,y1:s.y,x2:l.x,y2:l.y},i)},t.prototype.drawTick=function(e,t,n,r,i){this.addShape(t,{type:"line",id:this.getElementId(e.id),name:"axis-"+n,attrs:this.getTickLineAttrs(e,n,r,i)})},t.prototype.drawTickLines=function(e){var t=this,n=this.get("ticks"),r=this.get("subTickLine"),i=this.getTickLineItems(n),a=this.addGroup(e,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),o=this.get("tickLine");if(uM(i,(function(n,r){if(o.displayWithLabel){var s=t.getElementId("label-"+n.tickId);e.findById(s)&&t.drawTick(n,a,"tickLine",r,i)}else t.drawTick(n,a,"tickLine",r,i)})),r){var s=this.getSubTickLineItems(i);uM(s,(function(e,n){t.drawTick(e,a,"subTickLine",n,s)}))}},t.prototype.processTicks=function(){var e=this;uM(this.get("ticks"),(function(t){t.point=e.getTickPoint(t.value),sM(t.id)&&(t.id=t.name)}))},t.prototype.drawTicks=function(e){var t=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(e),this.get("tickLine")&&this.drawTickLines(e),uM(this.get("ticks"),(function(n){t.applyTickStates(n,e)}))},t.prototype.optimizeTicks=function(){var e=this.get("optimize"),t=this.get("ticks");if(e&&e.enable&&e.threshold>0){var n=SN(t);if(n>e.threshold){var r=Math.ceil(n/e.threshold),i=t.filter((function(e,t){return t%r==0}));this.set("ticks",i),this.set("originalTicks",t)}}},t.prototype.getLabelAttrs=function(e,t,n){var r=this.get("label"),i=r.offset,a=r.offsetX,o=r.offsetY,s=r.rotate,l=r.formatter,c=this.getSidePoint(e.point,i),u=this.getSideVector(i,c),h=l?l(e.name,e,t):e.name,p=r.style;p=oM(p)?fN(this.get("theme"),["label","style"],{}):p;var d=tN({x:c.x+a,y:c.y+o,text:h,textAlign:this.getTextAnchor(u),textBaseline:this.getTextBaseline(u)},p);return s&&(d.matrix=rH(c,s)),d},t.prototype.drawLabels=function(e){var t=this,n=this.get("ticks"),r=this.addGroup(e,{name:"axis-label-group",id:this.getElementId("label-group")});uM(n,(function(e,i){t.addShape(r,{type:"text",name:"axis-label",id:t.getElementId("label-"+e.id),attrs:t.getLabelAttrs(e,i,n),delegateObject:{tick:e,item:e,index:i}})})),this.processOverlap(r);var i=r.getChildren(),a=fN(this.get("theme"),["label","style"],{}),o=this.get("label"),s=o.style,l=o.formatter;if(oM(s)){var c=i.map((function(e){return fN(e.get("delegateObject"),"tick")}));uM(i,(function(e,t){var n=e.get("delegateObject").tick,r=l?l(n.name,n,t):n.name,i=tN({},a,s(r,t,c));e.attr(i)}))}},t.prototype.getTitleAttrs=function(){var e=this.get("title"),t=e.style,n=e.position,r=e.offset,i=e.spacing,a=void 0===i?0:i,o=e.autoRotate,s=t.fontSize,l=.5;"start"===n?l=0:"end"===n&&(l=1);var c=this.getTickPoint(l),u=this.getSidePoint(c,r||a+s/2),h=tN({x:u.x,y:u.y,text:e.text},t),p=e.rotate,d=p;if(sM(p)&&o){d=bF(this.getAxisVector(c),[1,0],!0)}if(d){var f=rH(u,d);h.matrix=f}return h},t.prototype.drawTitle=function(e){this.addShape(e,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},t.prototype.applyTickStates=function(e,t){if(this.getItemStates(e).length){var n=this.get("tickStates"),r=this.getElementId("label-"+e.id),i=t.findById(r);if(i){var a=zH(e,"label",n);a&&i.attr(a)}var o=this.getElementId("tickline-"+e.id),s=t.findById(o);if(s){var l=zH(e,"tickLine",n);l&&s.attr(l)}}},t.prototype.updateTickStates=function(e){var t=this.getItemStates(e),n=this.get("tickStates"),r=this.get("label"),i=this.getElementByLocalId("label-"+e.id),a=this.get("tickLine"),o=this.getElementByLocalId("tickline-"+e.id);if(t.length){if(i){var s=zH(e,"label",n);s&&i.attr(s)}if(o){var l=zH(e,"tickLine",n);l&&o.attr(l)}}else i&&i.attr(r.style),o&&o.attr(a.style)},t}(CH);function jH(e,t,n,r){var i=t.getChildren(),a=!1;return uM(i,(function(t){var i=TH(e,t,n,r);a=a||i})),a}function GH(e,t,n){return jH(e,t,n,"tail")}var VH=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return GH},ellipsisHead:function(e,t,n){return jH(e,t,n,"head")},ellipsisTail:GH,ellipsisMiddle:function(e,t,n){return jH(e,t,n,"middle")}});function YH(e){return(function(e){var t=e.attr("matrix");return t&&1!==t[0]}(e)?function(e){var t=[0,0,0];return iF(t,[1,0,0],e),Math.atan2(t[1],t[0])}(e.attr("matrix")):0)%360}function UH(e,t,n,r){var i=!1,a=YH(t),o=e?Math.abs(n.attr("y")-t.attr("y")):Math.abs(n.attr("x")-t.attr("x")),s=(e?n.attr("y")>t.attr("y"):n.attr("x")>t.attr("x"))?t.getBBox():n.getBBox();if(e){var l=Math.abs(Math.cos(a));i=fH(l,0,Math.PI/180)?s.width+r>o:s.height/l+r>o}else{l=Math.abs(Math.sin(a));i=fH(l,0,Math.PI/180)?s.width+r>o:s.height/l+r>o}return i}function qH(e,t,n,r){var i=(null==r?void 0:r.minGap)||0,a=t.getChildren().slice().filter((function(e){return e.get("visible")}));if(!a.length)return!1;var o=!1;n&&a.reverse();for(var s=a.length,l=a[0],c=1;c<s;c++){var u=a[c];u.getBBox(),UH(e,l,u,i)?(u.hide(),o=!0):l=u}return o}function WH(e,t,n){var r=(null==n?void 0:n.minGap)||0,i=t.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],s=o.getBBox(),l=i[1],c=i.length,u=YH(o),h=e?Math.abs(l.attr("y")-o.attr("y")):Math.abs(l.attr("x")-o.attr("x")),p=0;if(e){var d=Math.abs(Math.cos(u));if(fH(d,0,Math.PI/180))p=(wH(i)+r)/h;else p=(s.height/d+r)/h}else{d=Math.abs(Math.sin(u));if(fH(d,0,Math.PI/180))p=(wH(i)+r)/h;else p=(s.height/d+r)/h}if(p>1){p=Math.ceil(p);for(var f=0;f<c;f++)f%p!=0&&(i[f].hide(),a=!0)}return a}function XH(e,t,n,r){var i=WH(e,t,r);return qH(e,t,!1)&&(i=!0),i}var KH=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return XH},reserveFirst:function(e,t,n,r){return qH(e,t,!1,r)},reserveLast:function(e,t,n,r){return qH(e,t,!0,r)},reserveBoth:function(e,t,n,r){var i=(null==r?void 0:r.minGap)||0,a=t.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,s=a.length,l=a[0],c=a[s-1],u=l,h=1;h<s-1;h++){var p=a[h];p.getBBox(),UH(e,u,p,i)?(p.hide(),o=!0):u=p}return UH(e,u,c,i)&&(u.hide(),o=!0),o},equidistance:XH,equidistanceWithReverseBoth:function(e,t,n,r){var i=t.getChildren().slice(),a=WH(e,t,r);if(i.length>2){var o=i[0],s=i[i.length-1];o.get("visible")||(o.show(),qH(e,t,!1,r)&&(a=!0)),s.get("visible")||(s.show(),qH(e,t,!0,r)&&(a=!0))}return a}});function QH(e,t,n,r){var i=t.getChildren();if(!i.length)return!1;if(!e&&i.length<2)return!1;var a=wH(i),o=!1;e?o=!!n&&a>n:o=a>Math.abs(i[1].attr("x")-i[0].attr("x"));o&&function(e,t){uM(e,(function(e){var n=rH({x:e.attr("x"),y:e.attr("y")},t);e.attr("matrix",n)}))}(i,r(n,a));return o}function ZH(e,t,n,r){return QH(e,t,n,(function(){return RM(r)?r:e?_H.verticalAxisRotate:_H.horizontalAxisRotate}))}var JH,ej=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return ZH},fixedAngle:ZH,unfixedAngle:function(e,t,n){return QH(e,t,n,(function(t,n){if(!t)return e?_H.verticalAxisRotate:_H.horizontalAxisRotate;if(e)return-Math.acos(t/n);var r=0;return(t>n||(r=Math.asin(t/n))>Math.PI/4)&&(r=Math.PI/4),r}))}}),tj=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",autoHide:KH,autoRotate:ej,autoEllipsis:VH}),nj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getLinePath=function(){var e=this.get("start"),t=this.get("end"),n=[];return n.push(["M",e.x,e.y]),n.push(["L",t.x,t.y]),n},t.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),n=this.get("end"),r=e.prototype.getInnerLayoutBBox.call(this),i=Math.min(t.x,n.x,r.x),a=Math.min(t.y,n.y,r.y),o=Math.max(t.x,n.x,r.maxX),s=Math.max(t.y,n.y,r.maxY);return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},t.prototype.isVertical=function(){var e=this.get("start"),t=this.get("end");return DM(e.x,t.x)},t.prototype.isHorizontal=function(){var e=this.get("start"),t=this.get("end");return DM(e.y,t.y)},t.prototype.getTickPoint=function(e){var t=this.get("start"),n=this.get("end"),r=n.x-t.x,i=n.y-t.y;return{x:t.x+r*e,y:t.y+i*e}},t.prototype.getSideVector=function(e){var t=pF([0,0],this.getAxisVector()),n=this.get("verticalFactor");return cF([0,0],[t[1],-1*t[0]],e*n)},t.prototype.getAxisVector=function(){var e=this.get("start"),t=this.get("end");return[t.x-e.x,t.y-e.y]},t.prototype.processOverlap=function(e){var t=this,n=this.isVertical(),r=this.isHorizontal();if(n||r){var i=this.get("label"),a=this.get("title"),o=this.get("verticalLimitLength"),s=i.offset,l=o,c=0,u=0;if(a&&(c=a.style.fontSize,u=a.spacing),l&&(l=l-s-u-c),uM(this.get("overlapOrder"),(function(n){i[n]&&t.canProcessOverlap(n)&&t.autoProcessOverlap(n,i[n],e,l)})),a&&sM(a.offset)){var h=e.getCanvasBBox(),p=n?h.width:h.height;a.offset=s+p+u+c/2}}},t.prototype.canProcessOverlap=function(e){var t=this.get("label");return"autoRotate"!==e||sM(t.rotate)},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,a=this.isVertical(),o=!1,s=tj[e];if(!0===t)this.get("label"),o=s.getDefault()(a,n,r);else if(oM(t))o=t(a,n,r);else if(cM(t)){var l=t;s[l.type]&&(o=s[l.type](a,n,r,l.cfg))}else s[t]&&(o=s[t](a,n,r));if("autoRotate"===e){if(o){var c=n.getChildren(),u=this.get("verticalFactor");uM(c,(function(e){if("center"===e.attr("textAlign")){var t=u>0?"end":"start";e.attr("textAlign",t)}}))}}else if("autoHide"===e){uM(n.getChildren().slice(0),(function(e){e.get("visible")||(i.get("isRegister")&&i.unregisterElement(e),e.remove())}))}},t}(HH),rj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},t.prototype.getLinePath=function(){var e=this.get("center"),t=e.x,n=e.y,r=this.get("radius"),i=r,a=this.get("startAngle"),o=this.get("endAngle"),s=[];if(Math.abs(o-a)===2*Math.PI)s=[["M",t,n-i],["A",r,i,0,1,1,t,n+i],["A",r,i,0,1,1,t,n-i],["Z"]];else{var l=this.getCirclePoint(a),c=this.getCirclePoint(o),u=Math.abs(o-a)>Math.PI?1:0,h=a>o?0:1;s=[["M",t,n],["L",l.x,l.y],["A",r,i,0,u,h,c.x,c.y],["L",t,n]]}return s},t.prototype.getTickPoint=function(e){var t=this.get("startAngle"),n=t+(this.get("endAngle")-t)*e;return this.getCirclePoint(n)},t.prototype.getSideVector=function(e,t){var n=this.get("center"),r=[t.x-n.x,t.y-n.y];return cF(r,r,this.get("verticalFactor")*e/hF(r)),r},t.prototype.getAxisVector=function(e){var t=this.get("center"),n=[e.x-t.x,e.y-t.y];return[n[1],-1*n[0]]},t.prototype.getCirclePoint=function(e,t){var n=this.get("center");return t=t||this.get("radius"),{x:n.x+Math.cos(e)*t,y:n.y+Math.sin(e)*t}},t.prototype.canProcessOverlap=function(e){var t=this.get("label");return"autoRotate"!==e||sM(t.rotate)},t.prototype.processOverlap=function(e){var t=this,n=this.get("label"),r=this.get("title"),i=this.get("verticalLimitLength"),a=n.offset,o=i,s=0,l=0;if(r&&(s=r.style.fontSize,l=r.spacing),o&&(o=o-a-l-s),uM(this.get("overlapOrder"),(function(r){n[r]&&t.canProcessOverlap(r)&&t.autoProcessOverlap(r,n[r],e,o)})),r&&sM(r.offset)){var c=e.getCanvasBBox().height;r.offset=a+c+l+s/2}},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,a=!1,o=tj[e];if(r>0)if(!0===t)a=o.getDefault()(!1,n,r);else if(oM(t))a=t(!1,n,r);else if(cM(t)){var s=t;o[s.type]&&(a=o[s.type](!1,n,r,s.cfg))}else o[t]&&(a=o[t](!1,n,r));if("autoRotate"===e){if(a){var l=n.getChildren(),c=this.get("verticalFactor");uM(l,(function(e){if("center"===e.attr("textAlign")){var t=c>0?"end":"start";e.attr("textAlign",t)}}))}}else if("autoHide"===e){uM(n.getChildren().slice(0),(function(e){e.get("visible")||(i.get("isRegister")&&i.unregisterElement(e),e.remove())}))}},t}(HH),ij=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:_H.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:_H.textColor,textAlign:"center",textBaseline:"middle",fontFamily:_H.fontFamily}},textBackground:{padding:5,style:{stroke:_H.lineColor}}}})},t.prototype.renderInner=function(e){this.get("line")&&this.renderLine(e),this.get("text")&&(this.renderText(e),this.renderBackground(e))},t.prototype.renderText=function(e){var t=this.get("text"),n=t.style,r=t.autoRotate,i=t.content;if(!sM(i)){var a=this.getTextPoint(),o=null;if(r)o=rH(a,this.getRotateAngle());this.addShape(e,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:QI(QI(QI({},a),{text:i,matrix:o}),n)})}},t.prototype.renderLine=function(e){var t=this.getLinePath(),n=this.get("line").style;this.addShape(e,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:QI({path:t},n)})},t.prototype.renderBackground=function(e){var t=this.getElementId("text"),n=e.findById(t),r=this.get("textBackground");if(r&&n){var i=n.getBBox(),a=lH(r.padding),o=r.style;this.addShape(e,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:QI({x:i.x-a[3],y:i.y-a[0],width:i.width+a[1]+a[3],height:i.height+a[0]+a[2],matrix:n.attr("matrix")},o)}).toBack()}},t}(CH),aj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text").position,i=Math.atan2(n.y-t.y,n.x-t.x);return"start"===r?i-Math.PI/2:i+Math.PI/2},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text");return yH(t,n,r.position,r.offset)},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.start,n=e.end;return[["M",t.x,t.y],["L",n.x,n.y]]},t}(ij),oj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.startAngle,n=e.endAngle;return"start"===this.get("text").position?t+Math.PI/2:n-Math.PI/2},t.prototype.getTextPoint=function(){var e=this.get("text"),t=e.position,n=e.offset,r=this.getLocation(),i=r.center,a=r.radius,o=r.startAngle,s=r.endAngle,l="start"===t?o:s,c=this.getRotateAngle()-Math.PI,u=dH(i,a,l),h=Math.cos(c)*n,p=Math.sin(c)*n;return{x:u.x+h,y:u.y+p}},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,a=null;if(i-r==2*Math.PI){var o=t.x,s=t.y;a=[["M",o,s-n],["A",n,n,0,1,1,o,s+n],["A",n,n,0,1,1,o,s-n],["Z"]]}else{var l=dH(t,n,r),c=dH(t,n,i),u=Math.abs(i-r)>Math.PI?1:0,h=r>i?0:1;a=[["M",l.x,l.y],["A",n,n,0,u,h,c.x,c.y]]}return a},t}(ij),sj=((JH={})["g2-crosshair"]={position:"relative"},JH["g2-crosshair-line"]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},JH["g2-crosshair-text"]={position:"absolute",color:_H.textColor,fontFamily:_H.fontFamily},JH),lj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="g2-crosshair"></div>',crosshairTpl:'<div class="g2-crosshair-line"></div>',textTpl:'<span class="g2-crosshair-text">{content}</span>',domStyles:null,containerClassName:"g2-crosshair",defaultStyles:sj,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},t.prototype.render=function(){this.resetText(),this.resetPosition()},t.prototype.initCrossHair=function(){var e=this.getContainer(),t=QN(this.get("crosshairTpl"));e.appendChild(t),this.applyStyle("g2-crosshair-line",t),this.set("crosshairEl",t)},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text");return yH(t,n,r.position,r.offset)},t.prototype.resetText=function(){var e=this.get("text"),t=this.get("textEl");if(e){var n=e.content;if(!t){var r=this.getContainer();t=QN(UM(this.get("textTpl"),e)),r.appendChild(t),this.applyStyle("g2-crosshair-text",t),this.set("textEl",t)}t.innerHTML=n}else t&&t.remove()},t.prototype.isVertical=function(e,t){return e.x===t.x},t.prototype.resetPosition=function(){var e=this.get("crosshairEl");e||(this.initCrossHair(),e=this.get("crosshairEl"));var t=this.get("start"),n=this.get("end"),r=Math.min(t.x,n.x),i=Math.min(t.y,n.y);this.isVertical(t,n)?tP(e,{width:"1px",height:gH(Math.abs(n.y-t.y))}):tP(e,{height:"1px",width:gH(Math.abs(n.x-t.x))}),tP(e,{top:gH(i),left:gH(r)}),this.alignText()},t.prototype.alignText=function(){var e=this.get("textEl");if(e){var t=this.get("text").align,n=e.clientWidth,r=this.getTextPoint();switch(t){case"center":r.x=r.x-n/2;break;case"right":r.x=r.x-n}tP(e,{top:gH(r.y),left:gH(r.x)})}},t.prototype.updateInner=function(t){jM(t,"text")&&this.resetText(),e.prototype.updateInner.call(this,t)},t}(DH),cj=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:aj,Circle:oj,Base:ij,Html:lj}),uj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:_H.lineColor}}}})},t.prototype.getLineType=function(){return(this.get("line")||this.get("defaultCfg").line).type},t.prototype.renderInner=function(e){this.drawGrid(e)},t.prototype.getAlternatePath=function(e,t){var n=this.getGridPath(e),r=t.slice(0).reverse(),i=this.getGridPath(r,!0);return this.get("closed")?n=n.concat(i):(i[0][0]="L",(n=n.concat(i)).push(["Z"])),n},t.prototype.getPathStyle=function(){return this.get("line").style},t.prototype.drawGrid=function(e){var t=this,n=this.get("line"),r=this.get("items"),i=this.get("alternateColor"),a=null;uM(r,(function(o,s){var l=o.id||s;if(n){var c=t.getPathStyle();c=oM(c)?c(o,s,r):c;var u=t.getElementId("line-"+l),h=t.getGridPath(o.points);t.addShape(e,{type:"path",name:"grid-line",id:u,attrs:tN({path:h},c)})}if(i&&s>0){var p=t.getElementId("region-"+l),d=s%2==0;if(wM(i))d&&t.drawAlternateRegion(p,e,a.points,o.points,i);else{var f=d?i[1]:i[0];t.drawAlternateRegion(p,e,a.points,o.points,f)}}a=o}))},t.prototype.drawAlternateRegion=function(e,t,n,r,i){var a=this.getAlternatePath(n,r);this.addShape(t,{type:"path",id:e,name:"grid-region",attrs:{path:a,fill:i}})},t}(CH);var hj,pj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{type:"circle",center:null,closed:!0})},t.prototype.getGridPath=function(e,t){var n,r,i,a,o,s,l=this.getLineType(),c=this.get("closed"),u=[];if(e.length)if("circle"===l){var h=this.get("center"),p=e[0],d=(n=h.x,r=h.y,i=p.x,a=p.y,o=i-n,s=a-r,Math.sqrt(o*o+s*s)),f=t?0:1;c?(u.push(["M",h.x,h.y-d]),u.push(["A",d,d,0,0,f,h.x,h.y+d]),u.push(["A",d,d,0,0,f,h.x,h.y-d]),u.push(["Z"])):uM(e,(function(e,t){0===t?u.push(["M",e.x,e.y]):u.push(["A",d,d,0,0,f,e.x,e.y])}))}else uM(e,(function(e,t){0===t?u.push(["M",e.x,e.y]):u.push(["L",e.x,e.y])})),c&&u.push(["Z"]);return u},t}(uj),dj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{type:"line"})},t.prototype.getGridPath=function(e){var t=[];return uM(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},t}(uj),fj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},t.prototype.getLayoutBBox=function(){var t=e.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),r=this.get("maxHeight"),i=t.width,a=t.height;return n&&(i=Math.min(i,n)),r&&(a=Math.min(a,r)),hH(t.minX,t.minY,i,a)},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.resetLocation=function(){var e=this.get("x"),t=this.get("y"),n=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e+n,y:t+r})},t.prototype.applyOffset=function(){this.resetLocation()},t.prototype.getDrawPoint=function(){return this.get("currentPoint")},t.prototype.setDrawPoint=function(e){return this.set("currentPoint",e)},t.prototype.renderInner=function(e){this.resetDraw(),this.get("title")&&this.drawTitle(e),this.drawLegendContent(e),this.get("background")&&this.drawBackground(e)},t.prototype.drawBackground=function(e){var t=this.get("background"),n=e.getBBox(),r=lH(t.padding),i=QI({x:0,y:0,width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},t.style);this.addShape(e,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:i}).toBack()},t.prototype.drawTitle=function(e){var t=this.get("currentPoint"),n=this.get("title"),r=n.spacing,i=n.style,a=n.text,o=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:QI({text:a,x:t.x,y:t.y},i)}).getBBox();this.set("currentPoint",{x:t.x,y:o.maxY+r})},t.prototype.resetDraw=function(){var e=this.get("background"),t={x:0,y:0};if(e){var n=lH(e.padding);t.x=n[3],t.y=n[0]}this.set("currentPoint",t)},t}(CH),mj={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},gj={fill:_H.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:_H.fontFamily,fontWeight:"normal",lineHeight:12},yj=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:n},100):e.attr({matrix:n})}},t.onNavigationAfter=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:n},100):e.attr({matrix:n})}},t}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:_H.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:_H.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:mj,itemName:{spacing:16,style:gj},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:gj},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:_H.uncheckedColor},markerStyle:{fill:_H.uncheckedColor,stroke:_H.uncheckedColor}},inactive:{nameStyle:{fill:_H.uncheckedColor},markerStyle:{opacity:.2}}}}})},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("items")},t.prototype.setItems=function(e){this.update({items:e})},t.prototype.updateItem=function(e,t){tN(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("item-group");e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n;var r=this.getElementByLocalId("item-"+e.id);if(r){var i=this.getItems().indexOf(e),a=this.createOffScreenGroup(),o=this.drawItem(e,i,this.getItemHeight(),a);this.updateElements(o,r),this.clearUpdateStatus(r)}},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get("itemStates"),n=[];return uM(t,(function(t,r){e[r]&&n.push(r)})),n},t.prototype.clearItemsState=function(e){var t=this;uM(this.getItemsByState(e),(function(n){t.setItemState(n,e,!1)}))},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return rM(n,(function(n){return t.hasState(n,e)}))},t.prototype.drawLegendContent=function(e){this.processItems(),this.drawItems(e)},t.prototype.processItems=function(){uM(this.get("items"),(function(e){e.id||(e.id=e.name)}))},t.prototype.drawItems=function(e){var t=this,n=this.addGroup(e,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),r=this.addGroup(n,{id:this.getElementId("item-group"),name:"legend-item-group"}),i=this.getItemHeight(),a=this.get("itemWidth"),o=this.get("itemSpacing"),s=this.get("itemMarginBottom"),l=this.get("currentPoint"),c=l.x,u=l.y,h=this.get("layout"),p=this.get("items"),d=!1,f=0,m=this.get("maxWidth"),g=this.get("maxHeight");uM(p,(function(e,n){var p=t.drawItem(e,n,i,r),y=p.getBBox(),v=a||y.width;v>f&&(f=v),"horizontal"===h?(m&&m<l.x+v-c&&(d=!0,l.x=c,l.y+=i+s),t.moveElementTo(p,l),l.x+=v+o):(g&&g<l.y+i+s-u&&(d=!0,l.x+=f+o,l.y=u,f=0),t.moveElementTo(p,l),l.y+=i+s)})),d&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=c,this.startY=u,this.adjustNavigation(e,r))},t.prototype.getItemHeight=function(){var e=this.get("itemHeight");if(!e){var t=(this.get("itemName")||{}).style;if(oM(t)){var n=this.getItems();n.forEach((function(r,i){var a=QI(QI({},gj),t(r,i,n)).fontSize;e<a&&(e=a)}))}else t&&(e=t.fontSize)}return e},t.prototype.drawMarker=function(e,t,n,r){var i=QI(QI(QI({x:0,y:r/2},t.style),{symbol:fN(n.marker,"symbol","circle")}),fN(n.marker,"style",{})),a=this.addShape(e,{type:"marker",id:this.getElementId("item-"+n.id+"-marker"),name:"legend-item-marker",attrs:i}),o=a.getBBox();a.attr("x",o.width/2);var s=a.attr(),l=s.stroke,c=s.fill;return l&&a.set("isStroke",!0),c&&a.set("isFill",!0),a},t.prototype.drawItemText=function(e,t,n,r,i,a,o){var s=n.formatter,l=n.style,c=QI(QI({x:a,y:i/2,text:s?s(r[t],r,o):r[t]},gj),oM(l)?l(r,o,this.getItems()):l);return this.addShape(e,{type:"text",id:this.getElementId("item-"+r.id+"-"+t),name:"legend-item-"+t,attrs:c})},t.prototype.drawItem=function(e,t,n,r){var i="item-"+e.id,a=this.addGroup(r,{name:"legend-item-container",id:this.getElementId("item-container-"+i),delegateObject:{item:e,index:t}}),o=this.addGroup(a,{name:"legend-item",id:this.getElementId(i),delegateObject:{item:e,index:t}}),s=this.get("marker"),l=this.get("itemName"),c=this.get("itemValue"),u=this.get("itemBackground"),h=this.getLimitItemWidth(),p=0;if(s){var d=this.drawMarker(o,s,e,n),f=s.spacing,m=fN(e,["marker","spacing"]);RM(m)&&(f=m),p=d.getBBox().maxX+f}if(l){var g=this.drawItemText(o,"name",l,e,n,p,t);h&&TH(!0,g,FM(h-p,0,h)),p=g.getBBox().maxX+l.spacing}if(c){var y=this.drawItemText(o,"value",c,e,n,p,t);h&&(c.alignRight?(y.attr({textAlign:"right",x:h}),TH(!0,y,FM(h-p,0,h),"head")):TH(!0,y,FM(h-p,0,h)))}if(u){var v=o.getBBox();this.addShape(o,{type:"rect",name:"legend-item-background",id:this.getElementId(i+"-background"),attrs:QI({x:0,y:0,width:v.width,height:n},u.style)}).toBack()}return this.applyItemStates(e,o),o},t.prototype.adjustNavigation=function(e,t){var n=this,r=this.startX,i=this.startY,a=this.get("layout"),o=t.findAll((function(e){return"legend-item"===e.get("name")})),s=this.get("maxWidth"),l=this.get("maxHeight"),c=this.get("itemWidth"),u=this.get("itemSpacing"),h=this.getItemHeight(),p=oN({},mj,this.get("pageNavigator")),d=this.drawNavigation(e,a,"00/00",p),f=d.getBBox(),m={x:r,y:i},g=1,y=0,v=0,E=0,x=this.get("itemMarginBottom");if("horizontal"===a){var b=this.get("maxRow")||1,C=h+(1===b?0:x);this.pageHeight=C*b,uM(o,(function(e){var t=e.getBBox(),i=c||t.width;(y&&y<m.x+i+u||s<m.x+i+u+f.width)&&(1===g&&(y=m.x+u,n.pageWidth=y,n.moveElementTo(d,{x:s-u-f.width-f.minX,y:m.y+h/2-f.height/2-f.minY})),g+=1,m.x=r,m.y+=C),n.moveElementTo(e,m),e.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:i+u,height:h}}),m.x+=i+u}))}else{uM(o,(function(e){var t=e.getBBox();t.width>v&&(v=t.width)})),E=v,v+=u,s&&(v=Math.min(s,v),E=Math.min(s,E)),this.pageWidth=v,this.pageHeight=l-Math.max(f.height,h+x);var S=Math.floor(this.pageHeight/(h+x));uM(o,(function(e,t){0!==t&&t%S==0&&(g+=1,m.x+=v,m.y=i),n.moveElementTo(e,m),e.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:v,height:h}}),m.y+=h+x})),this.totalPagesCnt=g,this.moveElementTo(d,{x:r+E/2-f.width/2-f.minX,y:l-f.height-f.minY})}this.pageHeight&&this.pageWidth&&t.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),"horizontal"===a&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(g/this.get("maxRow")):this.totalPagesCnt=g,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(d),t.attr("matrix",this.getCurrentNavigationMatrix())},t.prototype.drawNavigation=function(e,t,n,r){var i={x:0,y:0},a=this.addGroup(e,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),o=fN(r.marker,"style",{}),s=o.size,l=void 0===s?12:s,c=ZI(o,["size"]),u=this.drawArrow(a,i,"navigation-arrow-left","horizontal"===t?"up":"left",l,c);u.on("click",this.onNavigationBack);var h=u.getBBox();i.x+=h.width+2;var p=this.addShape(a,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:QI({x:i.x,y:i.y+l/2,text:n,textBaseline:"middle"},fN(r.text,"style"))}).getBBox();return i.x+=p.width+2,this.drawArrow(a,i,"navigation-arrow-right","horizontal"===t?"down":"right",l,c).on("click",this.onNavigationAfter),a},t.prototype.updateNavigation=function(e){var t=oN({},mj,this.get("pageNavigator")).marker.style,n=t.fill,r=t.opacity,i=t.inactiveFill,a=t.inactiveOpacity,o=this.currentPageIndex+"/"+this.totalPagesCnt,s=e?e.getChildren()[1]:this.getElementByLocalId("navigation-text"),l=e?e.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),c=e?e.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),u=s.getBBox();s.attr("text",o);var h=s.getBBox();s.attr("x",s.attr("x")-(h.width-u.width)/2),l.attr("opacity",1===this.currentPageIndex?a:r),l.attr("fill",1===this.currentPageIndex?i:n),l.attr("cursor",1===this.currentPageIndex?"not-allowed":"pointer"),c.attr("opacity",this.currentPageIndex===this.totalPagesCnt?a:r),c.attr("fill",this.currentPageIndex===this.totalPagesCnt?i:n),c.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},t.prototype.drawArrow=function(e,t,n,r,i,a){var o=t.x,s=t.y,l={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},c=this.addShape(e,{type:"path",id:this.getElementId(n),name:n,attrs:QI({path:[["M",o+i/2,s],["L",o,s+i],["L",o+i,s+i],["Z"]],cursor:"pointer"},a)});return c.attr("matrix",rH({x:o+i/2,y:s+i/2},l[r])),c},t.prototype.getCurrentNavigationMatrix=function(){var e=this,t=e.currentPageIndex,n=e.pageWidth,r=e.pageHeight;return iH("horizontal"===this.get("layout")?{x:0,y:r*(1-t)}:{x:n*(1-t),y:0})},t.prototype.applyItemStates=function(e,t){if(this.getItemStates(e).length>0){var n=t.getChildren(),r=this.get("itemStates");uM(n,(function(t){var n=t.get("name").split("-")[2],i=zH(e,n,r);i&&(t.attr(i),"marker"!==n||t.get("isStroke")&&t.get("isFill")||(t.get("isStroke")&&t.attr("fill",null),t.get("isFill")&&t.attr("stroke",null)))}))}},t.prototype.getLimitItemWidth=function(){var e=this.get("itemWidth"),t=this.get("maxItemWidth");return t?e&&(t=e<=t?e:t):e&&(t=e),t},t}(fj),vj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:_H.textColor,textBaseline:"middle",fontFamily:_H.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:_H.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},t.prototype.isSlider=function(){return!0},t.prototype.getValue=function(){return this.getCurrentValue()},t.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},t.prototype.setRange=function(e,t){this.update({min:e,max:t})},t.prototype.setValue=function(e){var t=this.getValue();this.set("value",e);var n=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(n),this.delegateEmit("valuechanged",{originValue:t,value:e})},t.prototype.initEvent=function(){var e=this.get("group");this.bindSliderEvent(e),this.bindRailEvent(e),this.bindTrackEvent(e)},t.prototype.drawLegendContent=function(e){this.drawRail(e),this.drawLabels(e),this.fixedElements(e),this.resetTrack(e),this.resetTrackClip(e),this.get("slidable")&&this.resetHandlers(e)},t.prototype.bindSliderEvent=function(e){this.bindHandlersEvent(e)},t.prototype.bindHandlersEvent=function(e){var t=this;e.on("legend-handler-min:drag",(function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[1];r<n&&(r=n),t.setValue([n,r])})),e.on("legend-handler-max:drag",(function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[0];r>n&&(r=n),t.setValue([r,n])}))},t.prototype.bindRailEvent=function(e){},t.prototype.bindTrackEvent=function(e){var t=this,n=null;e.on("legend-track:dragstart",(function(e){n={x:e.x,y:e.y}})),e.on("legend-track:drag",(function(e){if(n){var r=t.getValueByCanvasPoint(n.x,n.y),i=t.getValueByCanvasPoint(e.x,e.y),a=t.getCurrentValue(),o=a[1]-a[0],s=t.getRange(),l=i-r;l<0?a[0]+l>s.min?t.setValue([a[0]+l,a[1]+l]):t.setValue([s.min,s.min+o]):l>0&&(l>0&&a[1]+l<s.max?t.setValue([a[0]+l,a[1]+l]):t.setValue([s.max-o,s.max])),n={x:e.x,y:e.y}}})),e.on("legend-track:dragend",(function(e){n=null}))},t.prototype.drawLabels=function(e){this.drawLabel("min",e),this.drawLabel("max",e)},t.prototype.drawLabel=function(e,t){var n=this.get("label"),r=n.style,i=n.align,a=n.formatter,o=this.get(e),s=this.getLabelAlignAttrs(e,i),l="label-"+e;this.addShape(t,{type:"text",id:this.getElementId(l),name:"legend-label-"+e,attrs:QI(QI({x:0,y:0,text:oM(a)?a(o):o},r),s)})},t.prototype.getLabelAlignAttrs=function(e,t){var n="center",r="middle";return this.isVertical()?(n="start",r="rail"!==t?"min"===e?"top":"bottom":"top"):"rail"!==t?(r="top",n="min"===e?"start":"end"):(n="start",r="middle"),{textAlign:n,textBaseline:r}},t.prototype.getRailPath=function(e,t,n,r){var i=this.get("rail"),a=i.size,o=i.defaultLength,s=i.type,l=this.isVertical(),c=n,u=r;c||(c=l?a:o),u||(u=l?o:a);var h=[];return"color"===s?(h.push(["M",e,t]),h.push(["L",e+c,t]),h.push(["L",e+c,t+u]),h.push(["L",e,t+u]),h.push(["Z"])):(h.push(["M",e+c,t]),h.push(["L",e+c,t+u]),h.push(["L",e,t+u]),h.push(["Z"])),h},t.prototype.drawRail=function(e){var t=this.get("rail").style;this.addShape(e,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:QI({path:this.getRailPath(0,0)},t)})},t.prototype.getTrackColor=function(e){var t,n=e.length;if(!n)return null;if(1===n)return e[0];t=this.isVertical()?"l(90)":"l(0)";for(var r=0;r<n;r++){t+=" "+r/(n-1)+":"+e[r]}return t},t.prototype.getTrackPath=function(e){var t=this.getRailShape(e).attr("path");return nN(t)},t.prototype.getClipTrackAttrs=function(e){var t,n,r,i,a=this.getCurrentValue(),o=a[0],s=a[1],l=this.getRailBBox(e),c=this.getPointByValue(o,e),u=this.getPointByValue(s,e);return this.isVertical()?(t=l.minX,n=c.y,r=l.width,i=u.y-c.y):(t=c.x,n=l.minY,r=u.x-c.x,i=l.height),{x:t,y:n,width:r,height:i}},t.prototype.getTrackAttrs=function(e){var t=this.get("track"),n=this.get("colors");return tN({path:this.getTrackPath(e),fill:this.getTrackColor(n)},t.style)},t.prototype.resetTrackClip=function(e){var t=e||this.get("group"),n=this.getElementId("track"),r=t.findById(n),i=r.getClip(),a=this.getClipTrackAttrs(e);i?i.attr(a):r.setClip({type:"rect",attrs:a})},t.prototype.resetTrack=function(e){var t=this.getElementId("track"),n=e.findById(t),r=this.getTrackAttrs(e);n?n.attr(r):this.addShape(e,{type:"path",id:t,draggable:this.get("slidable"),name:"legend-track",attrs:r})},t.prototype.getPointByValue=function(e,t){var n=this.getRange(),r=n.min,i=(e-r)/(n.max-r),a=this.getRailBBox(t),o={x:0,y:0};return this.isVertical()?(o.x=a.minX+a.width/2,o.y=pH(a.minY,a.maxY,i)):(o.x=pH(a.minX,a.maxX,i),o.y=a.minY+a.height/2),o},t.prototype.getRailShape=function(e){return(e||this.get("group")).findById(this.getElementId("rail"))},t.prototype.getRailBBox=function(e){return this.getRailShape(e).getBBox()},t.prototype.getRailCanvasBBox=function(){return this.get("group").findById(this.getElementId("rail")).getCanvasBBox()},t.prototype.isVertical=function(){return"vertical"===this.get("layout")},t.prototype.getValueByCanvasPoint=function(e,t){var n=this.getRange(),r=n.min,i=n.max,a=this.getRailCanvasBBox(),o=this.isVertical(),s=this.get("step"),l=pH(r,i,o?(t-a.minY)/a.height:(e-a.minX)/a.width);s&&(l=r+Math.round((l-r)/s)*s);return l>i&&(l=i),l<r&&(l=r),l},t.prototype.getCurrentValue=function(){var e=this.get("value");if(!e){var t=this.get("values");return t?[Math.max(Math.min.apply(Math,JI(t,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,JI(t,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return e},t.prototype.resetHandlers=function(e){var t=this.getCurrentValue(),n=t[0],r=t[1];this.resetHandler(e,"min",n),this.resetHandler(e,"max",r)},t.prototype.getHandlerPath=function(e,t){var n=this.isVertical(),r=[],i=e.size,a=t.x,o=t.y,s=1.4*i,l=i/2,c=i/6;if(n){var u=a+.4*s;r.push(["M",a,o]),r.push(["L",u,o+l]),r.push(["L",a+s,o+l]),r.push(["L",a+s,o-l]),r.push(["L",u,o-l]),r.push(["Z"]),r.push(["M",u,o+c]),r.push(["L",a+s-2,o+c]),r.push(["M",u,o-c]),r.push(["L",a+s-2,o-c])}else{var h=o+.4*s;r.push(["M",a,o]),r.push(["L",a-l,h]),r.push(["L",a-l,o+s]),r.push(["L",a+l,o+s]),r.push(["L",a+l,h]),r.push(["Z"]),r.push(["M",a-c,h]),r.push(["L",a-c,o+s-2]),r.push(["M",a+c,h]),r.push(["L",a+c,o+s-2])}return r},t.prototype.resetHandler=function(e,t,n){var r=this.getPointByValue(n,e),i=this.get("handler"),a=this.getHandlerPath(i,r),o=this.getElementId("handler-"+t),s=e.findById(o),l=this.isVertical();s?s.attr("path",a):this.addShape(e,{type:"path",name:"legend-handler-"+t,draggable:!0,id:o,attrs:QI(QI({path:a},i.style),{cursor:l?"ns-resize":"ew-resize"})})},t.prototype.fixedElements=function(e){var t=e.findById(this.getElementId("rail")),n=e.findById(this.getElementId("label-min")),r=e.findById(this.getElementId("label-max")),i=this.getDrawPoint();this.isVertical()?this.fixedVertail(n,r,t,i):this.fixedHorizontal(n,r,t,i)},t.prototype.fitRailLength=function(e,t,n,r){var i=this.isVertical()?"height":"width",a=this.get("label"),o=a.align,s=a.spacing,l=this.get("max"+qM(i));if(l){var c=("rail"===o?n[i]+e[i]+t[i]+2*s:n[i])-l;c>0&&this.changeRailLength(r,i,n[i]-c)}},t.prototype.changeRailLength=function(e,t,n){var r,i=e.getBBox();r="height"===t?this.getRailPath(i.x,i.y,i.width,n):this.getRailPath(i.x,i.y,n,i.height),e.attr("path",r)},t.prototype.changeRailPosition=function(e,t,n){var r=e.getBBox(),i=this.getRailPath(t,n,r.width,r.height);e.attr("path",i)},t.prototype.fixedHorizontal=function(e,t,n,r){var i=this.get("label"),a=i.align,o=i.spacing,s=n.getBBox(),l=e.getBBox(),c=t.getBBox(),u=s.height;this.fitRailLength(l,c,s,n),s=n.getBBox(),"rail"===a?(e.attr({x:r.x,y:r.y+u/2}),this.changeRailPosition(n,r.x+l.width+o,r.y),t.attr({x:r.x+l.width+s.width+2*o,y:r.y+u/2})):"top"===a?(e.attr({x:r.x,y:r.y}),t.attr({x:r.x+s.width,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+o)):(this.changeRailPosition(n,r.x,r.y),e.attr({x:r.x,y:r.y+s.height+o}),t.attr({x:r.x+s.width,y:r.y+s.height+o}))},t.prototype.fixedVertail=function(e,t,n,r){var i=this.get("label"),a=i.align,o=i.spacing,s=n.getBBox(),l=e.getBBox(),c=t.getBBox();if(this.fitRailLength(l,c,s,n),s=n.getBBox(),"rail"===a)e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+o),t.attr({x:r.x,y:r.y+l.height+s.height+2*o});else if("right"===a)e.attr({x:r.x+s.width+o,y:r.y}),this.changeRailPosition(n,r.x,r.y),t.attr({x:r.x+s.width+o,y:r.y+s.height});else{var u=Math.max(l.width,c.width);e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x+u+o,r.y),t.attr({x:r.x,y:r.y+s.height})}},t}(fj),Ej="g2-tooltip-title",xj="g2-tooltip-list",bj="g2-tooltip-crosshair-x",Cj="g2-tooltip-crosshair-y",Sj=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CONTAINER_CLASS:"g2-tooltip",TITLE_CLASS:Ej,LIST_CLASS:xj,LIST_ITEM_CLASS:"g2-tooltip-list-item",MARKER_CLASS:"g2-tooltip-marker",VALUE_CLASS:"g2-tooltip-value",NAME_CLASS:"g2-tooltip-name",CROSSHAIR_X:bj,CROSSHAIR_Y:Cj}),wj=((hj={})["g2-tooltip"]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:_H.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},hj[""+Ej]={marginBottom:"4px"},hj[""+xj]={margin:"0px",listStyleType:"none",padding:"0px"},hj["g2-tooltip-list-item"]={listStyleType:"none",marginBottom:"4px"},hj["g2-tooltip-marker"]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},hj["g2-tooltip-value"]={display:"inline-block",float:"right",marginLeft:"30px"},hj[""+bj]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},hj[""+Cj]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},hj);var Tj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="g2-tooltip"><div class="'+Ej+'"></div><ul class="'+xj+'"></ul></div>',itemTpl:'<li class="g2-tooltip-list-item" data-index={index}>\n          <span class="g2-tooltip-marker" style="background:{color}"></span>\n          <span class="g2-tooltip-name">{name}</span>:\n          <span class="g2-tooltip-value">{value}</span>\n        </li>',xCrosshairTpl:'<div class="'+bj+'"></div>',yCrosshairTpl:'<div class="'+Cj+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:"g2-tooltip",crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:wj})},t.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},t.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},t.prototype.show=function(){var e=this.getContainer();e&&!this.destroyed&&(this.set("visible",!0),tP(e,{visibility:"visible"}),this.setCrossHairsVisible(!0))},t.prototype.hide=function(){var e=this.getContainer();e&&!this.destroyed&&(this.set("visible",!1),tP(e,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},t.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetPosition()},t.prototype.setCrossHairsVisible=function(e){var t=e?"":"none",n=this.get("xCrosshairDom"),r=this.get("yCrosshairDom");n&&tP(n,{display:t}),r&&tP(r,{display:t})},t.prototype.initContainer=function(){if(e.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},t.prototype.updateInner=function(t){this.get("customContent")?this.renderCustomContent():(function(e,t){var n=!1;return uM(t,(function(t){if(jM(e,t))return n=!0,!1})),n}(t,["title","showTitle"])&&this.resetTitle(),jM(t,"items")&&this.renderItems()),e.prototype.updateInner.call(this,t)},t.prototype.initDom=function(){this.cacheDoms()},t.prototype.removeDom=function(){e.prototype.removeDom.call(this),this.clearCrosshairs()},t.prototype.resetPosition=function(){var e,t=this.get("x"),n=this.get("y"),r=this.get("offset"),i=this.getOffset(),a=i.offsetX,o=i.offsetY,s=this.get("position"),l=this.get("region"),c=this.getContainer(),u=this.getBBox(),h=u.width,p=u.height;l&&(e=uH(l));var d=function(e,t,n,r,i,a,o){var s=function(e,t,n,r,i,a){var o=e,s=t;switch(a){case"left":o=e-r-n,s=t-i/2;break;case"right":o=e+n,s=t-i/2;break;case"top":o=e-r/2,s=t-i-n;break;case"bottom":o=e-r/2,s=t+n;break;default:o=e+n,s=t-i-n}return{x:o,y:s}}(e,t,n,r,i,a);if(o){var l=function(e,t,n,r,i){return{left:e<i.x,right:e+n>i.x+i.width,top:t<i.y,bottom:t+r>i.y+i.height}}(s.x,s.y,r,i,o);"auto"===a?(l.right&&(s.x=Math.max(0,e-r-n)),l.top&&(s.y=Math.max(0,t-i-n))):"top"===a||"bottom"===a?(l.left&&(s.x=o.x),l.right&&(s.x=o.x+o.width-r),"top"===a&&l.top&&(s.y=t+n),"bottom"===a&&l.bottom&&(s.y=t-i-n)):(l.top&&(s.y=o.y),l.bottom&&(s.y=o.y+o.height-i),"left"===a&&l.left&&(s.x=e+n),"right"===a&&l.right&&(s.x=e-r-n))}return s}(t,n,r,h,p,s,e);tP(c,{left:gH(d.x+a),top:gH(d.y+o)}),this.resetCrosshairs()},t.prototype.renderCustomContent=function(){var e=this.getHtmlContentNode(),t=this.get("parent"),n=this.get("container");n&&n.parentNode===t?t.replaceChild(e,n):t.appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()},t.prototype.getHtmlContentNode=function(){var e,t=this.get("customContent");if(t){var n=t(this.get("title"),this.get("items"));e=JM(n)?n:QN(n)}return e},t.prototype.cacheDoms=function(){var e=this.getContainer(),t=e.getElementsByClassName(Ej)[0],n=e.getElementsByClassName(xj)[0];this.set("titleDom",t),this.set("listDom",n)},t.prototype.resetTitle=function(){var e=this.get("title");this.get("showTitle")&&e?this.setTitle(e):this.setTitle("")},t.prototype.setTitle=function(e){var t=this.get("titleDom");t&&(t.innerText=e)},t.prototype.resetCrosshairs=function(){var e=this.get("crosshairsRegion"),t=this.get("crosshairs");if(e&&t){var n=uH(e),r=this.get("xCrosshairDom"),i=this.get("yCrosshairDom");"x"===t?(this.resetCrosshair("x",n),i&&(i.remove(),this.set("yCrosshairDom",null))):"y"===t?(this.resetCrosshair("y",n),r&&(r.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",n),this.resetCrosshair("y",n)),this.setCrossHairsVisible(this.get("visible"))}else this.clearCrosshairs()},t.prototype.resetCrosshair=function(e,t){var n=this.checkCrosshair(e),r=this.get(e);tP(n,"x"===e?{left:gH(r),top:gH(t.y),height:gH(t.height)}:{top:gH(r),left:gH(t.x),width:gH(t.width)})},t.prototype.checkCrosshair=function(e){var t=e+"CrosshairDom",n=e+"CrosshairTpl",r="CROSSHAIR_"+e.toUpperCase(),i=Sj[r],a=this.get(t),o=this.get("parent");return a||(a=QN(this.get(n)),this.applyStyle(i,a),o.appendChild(a),this.set(t,a)),a},t.prototype.renderItems=function(){this.clearItemDoms();var e=this.get("items"),t=this.get("itemTpl"),n=this.get("listDom");n&&(uM(e,(function(e){var r=wD.toCSSGradient(e.color),i=QI(QI({},e),{color:r}),a=QN(UM(t,i));n.appendChild(a)})),this.applyChildrenStyles(n,this.get("domStyles")))},t.prototype.clearItemDoms=function(){this.get("listDom")&&cH(this.get("listDom"))},t.prototype.clearCrosshairs=function(){var e=this.get("xCrosshairDom"),t=this.get("yCrosshairDom");e&&e.remove(),t&&t.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},t}(DH),kj={opacity:0},_j={stroke:"#C5C5C5",strokeOpacity:.85},Oj={fill:"#CACED4",opacity:.85};function Aj(e){return function(e){return pN(e,(function(e,t){return[0===t?"M":"L",e[0],e[1]]}))}(e)}function Ij(e,t,n,r){void 0===r&&(r=!0);var i=new gB({values:e}),a=new PD({values:pN(e,(function(e,t){return t}))}),o=pN(e,(function(e,r){return[a.scale(r)*t,n-i.scale(e)*n]}));return r?function(e){if(e.length<=2)return Aj(e);var t=[];uM(e,(function(e){hN(e,t.slice(t.length-2))||t.push(e[0],e[1])}));var n=AR(t,!1),r=_M(e),i=r[0],a=r[1];return n.unshift(["M",i,a]),n}(o):Aj(o)}function Mj(e,t,n,r){var i=JI(e),a=function(e,t){var n=new gB({values:e}),r=Math.max(0,n.min);return t-n.scale(r)*t}(r,n);return i.push(["L",t,a]),i.push(["L",0,a]),i.push(["Z"]),i}var Nj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:kj,lineStyle:_j,areaStyle:Oj})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.data,a=t.smooth,o=t.isArea,s=t.backgroundStyle,l=t.lineStyle,c=t.areaStyle;this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:QI({x:0,y:0,width:n,height:r},s)});var u=Ij(i,n,r,a);if(this.addShape(e,{id:this.getElementId("line"),type:"path",attrs:QI({path:u},l)}),o){var h=Mj(u,n,r,i);this.addShape(e,{id:this.getElementId("area"),type:"path",attrs:QI({path:h},c)})}},t.prototype.applyOffset=function(){var e=this.cfg,t=e.x,n=e.y;this.moveElementTo(this.get("group"),{x:t,y:n})},t}(CH),Pj={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},Fj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"handler",x:0,y:0,width:10,height:24,style:Pj})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.style,a=i.fill,o=i.stroke,s=i.radius,l=i.opacity,c=i.cursor;this.addShape(e,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:n,height:r,fill:a,stroke:o,radius:s,opacity:l,cursor:c}});var u=1/3*n,h=2/3*n,p=1/4*r,d=3/4*r;this.addShape(e,{id:this.getElementId("line-left"),type:"line",attrs:{x1:u,y1:p,x2:u,y2:d,stroke:o,cursor:c}}),this.addShape(e,{id:this.getElementId("line-right"),type:"line",attrs:{x1:h,y1:p,x2:h,y2:d,stroke:o,cursor:c}})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.bindEvents=function(){var e=this;this.get("group").on("mouseenter",(function(){var t=e.get("style").highLightFill;e.getElementByLocalId("background").attr("fill",t),e.draw()})),this.get("group").on("mouseleave",(function(){var t=e.get("style").fill;e.getElementByLocalId("background").attr("fill",t),e.draw()}))},t.prototype.draw=function(){var e=this.get("container").get("canvas");e&&e.draw()},t}(CH),Lj={fill:"#416180",opacity:.05},Rj={fill:"#5B8FF9",opacity:.15,cursor:"move"},Dj={width:10,height:24},Bj={textBaseline:"middle",fill:"#000",opacity:.45},$j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){return function(n){t.currentTarget=e;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),t.prevX=fN(r,"touches.0.pageX",r.pageX),t.prevY=fN(r,"touches.0.pageY",r.pageY);var i=t.getContainerDOM();i.addEventListener("mousemove",t.onMouseMove),i.addEventListener("mouseup",t.onMouseUp),i.addEventListener("mouseleave",t.onMouseUp),i.addEventListener("touchmove",t.onMouseMove),i.addEventListener("touchend",t.onMouseUp),i.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(e){var n=t.cfg.width,r=[t.get("start"),t.get("end")];e.stopPropagation(),e.preventDefault();var i=fN(e,"touches.0.pageX",e.pageX),a=fN(e,"touches.0.pageY",e.pageY),o=i-t.prevX,s=t.adjustOffsetRange(o/n);t.updateStartEnd(s),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=i,t.prevY=a,t.draw(),t.emit("sliderchange",[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:r,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var e=t.getContainerDOM();e&&(e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseup",t.onMouseUp),e.removeEventListener("mouseleave",t.onMouseUp),e.removeEventListener("touchmove",t.onMouseMove),e.removeEventListener("touchend",t.onMouseUp),e.removeEventListener("touchcancel",t.onMouseUp))},t}return KI(t,e),t.prototype.setRange=function(e,t){this.set("minLimit",e),this.set("maxLimit",t);var n=this.get("start"),r=this.get("end"),i=FM(n,e,t),a=FM(r,e,t);this.get("isInit")||n===i&&r===a||this.setValue([i,a])},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var t=this.getRange();if(lM(e)&&2===e.length){var n=[this.get("start"),this.get("end")];this.update({start:FM(e[0],t.min,t.max),end:FM(e[1],t.min,t.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:n,value:e})}},t.prototype.getValue=function(){return[this.get("start"),this.get("end")]},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:Lj,foregroundStyle:Rj,handlerStyle:Dj,textStyle:Bj}})},t.prototype.update=function(t){var n=t.start,r=t.end,i=QI({},t);sM(n)||(i.start=FM(n,0,1)),sM(r)||(i.end=FM(r,0,1)),e.prototype.update.call(this,i),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},t.prototype.init=function(){this.set("start",FM(this.get("start"),0,1)),this.set("end",FM(this.get("end"),0,1)),e.prototype.init.call(this)},t.prototype.render=function(){e.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},t.prototype.renderInner=function(e){var t=this.cfg;t.start,t.end;var n=t.width,r=t.height,i=t.trendCfg,a=void 0===i?{}:i,o=t.minText,s=t.maxText,l=t.backgroundStyle,c=void 0===l?{}:l,u=t.foregroundStyle,h=void 0===u?{}:u,p=t.textStyle,d=void 0===p?{}:p,f=oN({},Pj,this.cfg.handlerStyle);SN(fN(a,"data"))&&(this.trend=this.addComponent(e,QI({component:Nj,id:this.getElementId("trend"),x:0,y:0,width:n,height:r},a))),this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:QI({x:0,y:0,width:n,height:r},c)}),this.addShape(e,{id:this.getElementId("minText"),type:"text",attrs:QI({y:r/2,textAlign:"right",text:o,silent:!1},d)}),this.addShape(e,{id:this.getElementId("maxText"),type:"text",attrs:QI({y:r/2,textAlign:"left",text:s,silent:!1},d)}),this.addShape(e,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:QI({y:0,height:r},h)});var m=fN(f,"width",10),g=fN(f,"height",24);this.minHandler=this.addComponent(e,{component:Fj,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(r-g)/2,width:m,height:g,cursor:"ew-resize",style:f}),this.maxHandler=this.addComponent(e,{component:Fj,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(r-g)/2,width:m,height:g,cursor:"ew-resize",style:f})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.updateUI=function(e,t,n){var r=this.cfg,i=r.start,a=r.end,o=r.width,s=r.minText,l=r.maxText,c=r.handlerStyle,u=r.height,h=i*o,p=a*o;this.trend&&(this.trend.update({width:o,height:u}),this.get("updateAutoRender")||this.trend.render()),e.attr("x",h),e.attr("width",p-h);var d=fN(c,"width",10);t.attr("text",s),n.attr("text",l);var f=this._dodgeText([h,p],t,n),m=f[0],g=f[1];this.minHandler&&(this.minHandler.update({x:h-d/2}),this.get("updateAutoRender")||this.minHandler.render()),uM(m,(function(e,n){return t.attr(n,e)})),this.maxHandler&&(this.maxHandler.update({x:p-d/2}),this.get("updateAutoRender")||this.maxHandler.render()),uM(g,(function(e,t){return n.attr(t,e)}))},t.prototype.bindEvents=function(){var e=this.get("group");e.on("handler-min:mousedown",this.onMouseDown("minHandler")),e.on("handler-min:touchstart",this.onMouseDown("minHandler")),e.on("handler-max:mousedown",this.onMouseDown("maxHandler")),e.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var t=e.findById(this.getElementId("foreground"));t.on("mousedown",this.onMouseDown("foreground")),t.on("touchstart",this.onMouseDown("foreground"))},t.prototype.adjustOffsetRange=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case"minHandler":var i=0-n,a=1-n;return Math.min(a,Math.max(i,e));case"maxHandler":i=0-r,a=1-r;return Math.min(a,Math.max(i,e));case"foreground":i=0-n,a=1-r;return Math.min(a,Math.max(i,e))}},t.prototype.updateStartEnd=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case"minHandler":n+=e;break;case"maxHandler":r+=e;break;case"foreground":n+=e,r+=e}this.set("start",n),this.set("end",r)},t.prototype._dodgeText=function(e,t,n){var r,i,a=this.cfg,o=a.handlerStyle,s=a.width,l=fN(o,"width",10),c=e[0],u=e[1],h=!1;c>u&&(c=(r=[u,c])[0],u=r[1],t=(i=[n,t])[0],n=i[1],h=!0);var p=t.getBBox(),d=n.getBBox(),f=p.width>c-2?{x:c+l/2+2,textAlign:"left"}:{x:c-l/2-2,textAlign:"right"},m=d.width>s-u-2?{x:u-l/2-2,textAlign:"right"}:{x:u+l/2+2,textAlign:"left"};return h?[m,f]:[f,m]},t.prototype.draw=function(){var e=this.get("container"),t=e&&e.get("canvas");t&&t.draw()},t.prototype.getContainerDOM=function(){var e=this.get("container"),t=e&&e.get("canvas");return t&&t.get("container")},t}(CH),zj={default:{trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},hover:{thumbColor:"rgba(0,0,0,0.2)"}},Hj=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clearEvents=CN,t.onStartEvent=function(e){return function(n){t.isMobile=e,n.originalEvent.preventDefault();var r=e?fN(n.originalEvent,"touches.0.clientX"):n.clientX,i=e?fN(n.originalEvent,"touches.0.clientY"):n.clientY;t.startPos=t.cfg.isHorizontal?r:i,t.bindLaterEvent()}},t.bindLaterEvent=function(){var e=t.getContainerDOM(),n=[];n=t.isMobile?[KN(e,"touchmove",t.onMouseMove),KN(e,"touchend",t.onMouseUp),KN(e,"touchcancel",t.onMouseUp)]:[KN(e,"mousemove",t.onMouseMove),KN(e,"mouseup",t.onMouseUp),KN(e,"mouseleave",t.onMouseUp)],t.clearEvents=function(){n.forEach((function(e){e.remove()}))}},t.onMouseMove=function(e){var n=t.cfg,r=n.isHorizontal,i=n.thumbOffset;e.preventDefault();var a=t.isMobile?fN(e,"touches.0.clientX"):e.clientX,o=t.isMobile?fN(e,"touches.0.clientY"):e.clientY,s=r?a:o,l=s-t.startPos;t.startPos=s,t.updateThumbOffset(i+l)},t.onMouseUp=function(e){e.preventDefault(),t.clearEvents()},t.onTrackClick=function(e){var n=t.cfg,r=n.isHorizontal,i=n.x,a=n.y,o=n.thumbLen,s=t.getContainerDOM().getBoundingClientRect(),l=e.clientX,c=e.clientY,u=r?l-s.left-i-o/2:c-s.top-a-o/2,h=t.validateRange(u);t.updateThumbOffset(h)},t.onThumbMouseOver=function(){var e=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t.onThumbMouseOut=function(){var e=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t}return KI(t,e),t.prototype.setRange=function(e,t){this.set("minLimit",e),this.set("maxLimit",t);var n=this.getValue(),r=FM(n,e,t);n===r||this.get("isInit")||this.setValue(r)},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var t=this.getRange(),n=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*FM(e,t.min,t.max)}),this.delegateEmit("valuechange",{originalValue:n,value:this.getValue()})},t.prototype.getValue=function(){return FM(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return QI(QI({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:zj})},t.prototype.renderInner=function(e){this.renderTrackShape(e),this.renderThumbShape(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.renderTrackShape=function(e){var t=this.cfg,n=t.trackLen,r=t.theme,i=oN({},zj,void 0===r?{default:{}}:r).default,a=i.lineCap,o=i.trackColor,s=i.size,l=fN(this.cfg,"size",s),c=this.get("isHorizontal")?{x1:0+l/2,y1:l/2,x2:n-l/2,y2:l/2,lineWidth:l,stroke:o,lineCap:a}:{x1:l/2,y1:0+l/2,x2:l/2,y2:n-l/2,lineWidth:l,stroke:o,lineCap:a};return this.addShape(e,{id:this.getElementId("track"),name:"track",type:"line",attrs:c})},t.prototype.renderThumbShape=function(e){var t=this.cfg,n=t.thumbOffset,r=t.thumbLen,i=t.theme,a=oN({},zj,i).default,o=a.size,s=a.lineCap,l=a.thumbColor,c=fN(this.cfg,"size",o),u=this.get("isHorizontal")?{x1:n+c/2,y1:c/2,x2:n+r-c/2,y2:c/2,lineWidth:c,stroke:l,lineCap:s,cursor:"default"}:{x1:c/2,y1:n+c/2,x2:c/2,y2:n+r-c/2,lineWidth:c,stroke:l,lineCap:s,cursor:"default"};return this.addShape(e,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:u})},t.prototype.bindEvents=function(){var e=this.get("group");e.on("mousedown",this.onStartEvent(!1)),e.on("mouseup",this.onMouseUp),e.on("touchstart",this.onStartEvent(!0)),e.on("touchend",this.onMouseUp),e.findById(this.getElementId("track")).on("click",this.onTrackClick);var t=e.findById(this.getElementId("thumb"));t.on("mouseover",this.onThumbMouseOver),t.on("mouseout",this.onThumbMouseOut)},t.prototype.getContainerDOM=function(){var e=this.get("container"),t=e&&e.get("canvas");return t&&t.get("container")},t.prototype.validateRange=function(e){var t=this.cfg,n=t.thumbLen,r=t.trackLen,i=e;return e+n>r?i=r-n:e+n<n&&(i=0),i},t.prototype.draw=function(){var e=this.get("container"),t=e&&e.get("canvas");t&&t.draw()},t.prototype.updateThumbOffset=function(e){var t=this.cfg,n=t.thumbOffset,r=t.isHorizontal,i=t.thumbLen,a=t.size,o=this.validateRange(e);if(o!==n){var s=this.getElementByLocalId("thumb");r?s.attr({x1:o+a/2,x2:o+i-a/2}):s.attr({y1:o+a/2,y2:o+i-a/2}),this.emitOffsetChange(o)}},t.prototype.emitOffsetChange=function(e){var t=this.cfg,n=t.thumbOffset,r=t.trackLen,i=t.thumbLen;this.cfg.thumbOffset=e,this.emit("scrollchange",{thumbOffset:e,ratio:FM(e/(r-i),0,1)}),this.delegateEmit("valuechange",{originalValue:n,value:e})},t}(CH),jj=nj,Gj=rj,Vj=dj,Yj=pj,Uj=yj,qj=vj,Wj=Tj;function Xj(e){return 1===Array.from(new Set(e)).length}function Kj(e){return(EM(e)+vM(e))/2}function Qj(e,t,n,r){return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function Zj(e,t,n,r,i,a){void 0===a&&(a=0);var o=Qj(e,t,n,r),s=Qj(e,t,n,i),l=Qj(e,t,a,r),c=Qj(e,t,a,i);if(i-r==2*Math.PI){var u=Qj(e,t,n,r+Math.PI),h=Qj(e,t,a,r+Math.PI),p=[["M",o.x,o.y],["A",n,n,0,1,1,u.x,u.y],["A",n,n,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(p.push(["A",a,a,0,1,0,h.x,h.y]),p.push(["A",a,a,0,1,0,c.x,c.y])),p.push(["M",o.x,o.y]),p.push(["Z"]),p}var d=i-r<=Math.PI?0:1,f=[["M",o.x,o.y],["A",n,n,0,d,1,s.x,s.y],["L",c.x,c.y]];return a&&f.push(["A",a,a,0,d,0,l.x,l.y]),f.push(["L",o.x,o.y]),f.push(["Z"]),f}function Jj(e,t,n,r,i){var a=Qj(e,t,n,r),o=Qj(e,t,n,i);if(DM(i-r,2*Math.PI)){var s=Qj(e,t,n,r+Math.PI);return[["M",a.x,a.y],["A",n,n,0,1,1,s.x,s.y],["A",n,n,0,1,1,a.x,a.y],["A",n,n,0,1,0,s.x,s.y],["A",n,n,0,1,0,a.x,a.y],["Z"]]}var l=i-r<=Math.PI?0:1;return[["M",a.x,a.y],["A",n,n,0,l,1,o.x,o.y]]}function eG(e,t){var n,r,i=function(e){if(cN(e))return null;var t=e[0].x,n=e[0].x,r=e[0].y,i=e[0].y;return uM(e,(function(e){t=t>e.x?e.x:t,n=n<e.x?e.x:n,r=r>e.y?e.y:r,i=i<e.y?e.y:i})),{minX:t,maxX:n,minY:r,maxY:i,centerX:(t+n)/2,centerY:(r+i)/2}}(e.points),a=t.startAngle,o=t.endAngle-a;return t.isTransposed?(n=i.maxY*o,r=i.minY*o):(n=i.maxX*o,r=i.minX*o),{startAngle:r+=a,endAngle:n+=a}}function tG(e,t){var n=e.attr(),r=t.attr();return uM(n,(function(e,t){void 0===r[t]&&(r[t]=void 0)})),r}function nG(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}function rG(e,t){return"object"==typeof e&&t.forEach((function(t){delete e[t]})),e}function iG(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=new Map);for(var r=0,i=e;r<i.length;r++){var a=i[r];n.has(a)||(t.push(a),n.set(a,!0))}return t}var aG=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=e,this.y=t,this.height=r,this.width=n}return e.fromRange=function(t,n,r,i){return new e(t,n,r-t,i-n)},e.fromObject=function(t){return new e(t.minX,t.minY,t.width,t.height)},Object.defineProperty(e.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},e.prototype.contains=function(e){return e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return uM(e,(function(e){n.x=Math.min(e.x,n.x),n.y=Math.min(e.y,n.y),n.width=Math.max(e.maxX,n.maxX)-n.x,n.height=Math.max(e.maxY,n.maxY)-n.y})),n},e.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return uM(e,(function(e){n.x=Math.max(e.x,n.x),n.y=Math.max(e.y,n.y),n.width=Math.min(e.maxX,n.maxX)-n.x,n.height=Math.min(e.maxY,n.maxY)-n.y})),n},e.prototype.cut=function(t,n){var r=t.width,i=t.height;switch(n){case kN.TOP:case kN.TOP_LEFT:case kN.TOP_RIGHT:return e.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case kN.RIGHT:case kN.RIGHT_TOP:case kN.RIGHT_BOTTOM:return e.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case kN.BOTTOM:case kN.BOTTOM_LEFT:case kN.BOTTOM_RIGHT:return e.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case kN.LEFT:case kN.LEFT_TOP:case kN.LEFT_BOTTOM:return e.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},e.prototype.shrink=function(t){var n=t[0],r=t[1],i=t[2],a=t[3];return new e(this.x+a,this.y+n,this.width-a-r,this.height-n-i)},e.prototype.expand=function(t){var n=t[0],r=t[1],i=t[2],a=t[3];return new e(this.x-a,this.y-n,this.width+a+r,this.height+n+i)},e.prototype.exceed=function(e){return[Math.max(-this.minY+e.minY,0),Math.max(this.maxX-e.maxX,0),Math.max(this.maxY-e.maxY,0),Math.max(-this.minX+e.minX,0)]},e.prototype.collide=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},e.prototype.size=function(){return this.width*this.height},e.prototype.isPointIn=function(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY},e}();function oG(e){if(e.isPolar&&!e.isTransposed)return(e.endAngle-e.startAngle)*e.getRadius();var t=e.convert({x:0,y:0}),n=e.convert({x:1,y:0});return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function sG(e,t){var n=e.getCenter();return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function lG(e,t){var n=!1;if(e)if("theta"===e.type){var r=e.start,i=e.end;n=nG(t.x,r.x,i.x)&&nG(t.y,r.y,i.y)}else{var a=e.invert(t);n=nG(a.x,0,1)&&nG(a.y,0,1)}return n}function cG(e,t){var n=e.getCenter();return Math.atan2(t.y-n.y,t.x-n.x)}function uG(e,t){void 0===t&&(t=0);var n,r=e.start,i=e.end,a=e.getWidth(),o=e.getHeight();if(e.isPolar){var s=e.startAngle,l=e.endAngle,c=e.getCenter(),u=e.getRadius();return{type:"path",startState:{path:Zj(c.x,c.y,u+t,s,s)},endState:function(e){var n=(l-s)*e+s;return{path:Zj(c.x,c.y,u+t,s,n)}},attrs:{path:Zj(c.x,c.y,u+t,s,l)}}}return n=e.isTransposed?{height:o+2*t}:{width:a+2*t},{type:"rect",startState:{x:r.x-t,y:i.y-t,width:e.isTransposed?a+2*t:0,height:e.isTransposed?0:o+2*t},endState:n,attrs:{x:r.x-t,y:i.y-t,width:a+2*t,height:o+2*t}}}var hG=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function pG(e,t,n){var r=t||[];if(RM(e)||sM(function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r][t];if(!sM(i)){n=lM(i)?i[0]:i;break}}return n}(r,e))&&cN(n))return new(kB("identity"))({field:e.toString(),values:[e]});var i=kM(r,e);return new(kB(fN(n,"type",function(e){var t="linear";return hG.test(e)?t="timeCat":wM(e)&&(t="cat"),t}(i[0]))))(QI({field:e,values:i},n))}function dG(e){return e.alias||e.field}function fG(e,t,n){var r,i=e.values.length;if(1===i)r=[.5,1];else{var a=0;r=function(e){if(e.isPolar){var t=e.startAngle;return e.endAngle-t==2*Math.PI}return!1}(t)?t.isTransposed?[(a=1/i*fN(n,"widthRatio.multiplePie",1/1.3))/2,1-a/2]:[0,1-1/i]:[a=1/i/2,1-a]}return r}function mG(e,t){var n={start:{x:0,y:0},end:{x:0,y:0}};e.isRect?n=function(e){var t,n;switch(e){case kN.TOP:t={x:0,y:1},n={x:1,y:1};break;case kN.RIGHT:t={x:1,y:0},n={x:1,y:1};break;case kN.BOTTOM:t={x:0,y:0},n={x:1,y:0};break;case kN.LEFT:t={x:0,y:0},n={x:0,y:1};break;default:t=n={x:0,y:0}}return{start:t,end:n}}(t):e.isPolar&&(n=function(e){var t,n;return e.isTransposed?(t={x:0,y:0},n={x:1,y:0}):(t={x:0,y:0},n={x:0,y:1}),{start:t,end:n}}(e));var r=n.start,i=n.end;return{start:e.convert(r),end:e.convert(i)}}function gG(e){var t=e.start,n=e.end;return t.x===n.x}function yG(e,t){var n=e.start,r=e.end;return gG(e)?(n.y-r.y)*(t.x-n.x)>0?1:-1:(r.x-n.x)*(n.y-t.y)>0?-1:1}function vG(e,t){var n=fN(e,["components","axis"],{});return oN({},fN(n,["common"],{}),oN({},fN(n,[t],{})))}function EG(e,t,n){var r=fN(e,["components","axis"],{});return oN({},fN(r,["common","title"],{}),oN({},fN(r,[t,"title"],{})),n)}function xG(e){var t=e.x,n=e.y,r=e.circleCenter,i=n.start>n.end,a=e.isTransposed?e.convert({x:i?0:1,y:0}):e.convert({x:0,y:i?0:1}),o=[a.x-r.x,a.y-r.y],s=[1,0],l=a.y>r.y?fF(o,s):-1*fF(o,s),c=l+(t.end-t.start);return{center:r,radius:Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2)),startAngle:l,endAngle:c}}function bG(e,t){return XM(e)?!1!==e&&{}:fN(e,[t])}function CG(e,t){return fN(e,"position",t)}function SG(e,t){return fN(t,["title","text"],dG(e))}var wG=function(){function e(e,t){this.destroyed=!1,this.facets=[],this.view=e,this.cfg=oN({},this.getDefaultCfg(),t)}return e.prototype.init=function(){this.container||(this.container=this.createContainer());var e=this.view.getData();this.facets=this.generateFacets(e)},e.prototype.render=function(){this.renderViews()},e.prototype.update=function(){},e.prototype.clear=function(){this.clearFacetViews()},e.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},e.prototype.facetToView=function(e){var t=e.region,n=e.data,r=e.padding,i=void 0===r?this.cfg.padding:r,a=this.view.createView({region:t,padding:i});a.data(n||[]),e.view=a,this.beforeEachView(a,e);var o=this.cfg.eachView;return o&&o(a,e),this.afterEachView(a,e),a},e.prototype.createContainer=function(){return this.view.getLayer(wN.FORE).addGroup()},e.prototype.renderViews=function(){this.createFacetViews()},e.prototype.createFacetViews=function(){var e=this;return this.facets.map((function(t){return e.facetToView(t)}))},e.prototype.clearFacetViews=function(){var e=this;uM(this.facets,(function(t){t.view&&(e.view.removeView(t.view),t.view=void 0)}))},e.prototype.parseSpacing=function(){var e=this.view.viewBBox,t=e.width,n=e.height;return this.cfg.spacing.map((function(e,r){return RM(e)?e/(0===r?t:n):parseFloat(e)/100}))},e.prototype.getFieldValues=function(e,t){var n=[],r={};return uM(e,(function(e){var i=e[t];sM(i)||r[i]||(n.push(i),r[i]=!0)})),n},e.prototype.getRegion=function(e,t,n,r){var i=this.parseSpacing(),a=i[0],o=i[1],s=(1+a)/(0===t?1:t)-a,l=(1+o)/(0===e?1:e)-o,c={x:(s+a)*n,y:(l+o)*r};return{start:c,end:{x:c.x+s,y:c.y+l}}},e.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},e.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:"#666",fontFamily:this.view.getTheme().fontFamily}}},e.prototype.processAxis=function(e,t){var n=e.getOptions(),r=n.coordinate,i=e.geometries;if("rect"===fN(r,"type","rect")&&i.length){sM(n.axes)&&(n.axes={});var a=n.axes,o=i[0].getXYFields(),s=o[0],l=o[1],c=bG(a,s),u=bG(a,l);!1!==c&&(n.axes[s]=this.getXAxisOption(s,a,c,t)),!1!==u&&(n.axes[l]=this.getYAxisOption(l,a,u,t))}},e.prototype.getFacetDataFilter=function(e){return function(t){return AM(e,(function(e){var n=e.field,r=e.value;return!(!sM(r)&&n)||t[n]===r}))}},e}(),TG={},kG=function(e,t){TG[YM(e)]=t},_G=function(){function e(e,t){this.context=e,this.cfg=t,e.addAction(this)}return e.prototype.applyCfg=function(e){tN(this,e)},e.prototype.init=function(){this.applyCfg(this.cfg)},e.prototype.destroy=function(){this.context.removeAction(this),this.context=null},e}(),OG=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.execute=function(){this.callback&&this.callback(this.context)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.callback=null},t}(_G),AG={};function IG(e){var t=AG[e];return fN(t,"ActionClass")}function MG(e,t,n){AG[e]={ActionClass:t,cfg:n}}function NG(e,t){var n=new OG(t);return n.callback=e,n.name="callback",n}function PG(e,t){for(var n=[e[0]],r=1,i=e.length;r<i;r+=2){var a=t.convert({x:e[r],y:e[r+1]});n.push(a.x,a.y)}return n}function FG(e,t){var n=t.isTransposed,r=e[1],i=e[6],a=e[7],o=t.convert({x:i,y:a});return["A",r,r,0,0,n?0:1,o.x,o.y]}function LG(e,t,n){for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l,c,u,h=[],p=!!r;if(p){o=r[0],s=r[1];for(var d=0,f=e.length;d<f;d++)o=sF([0,0],o,g=e[d]),s=lF([0,0],s,g)}d=0;for(var m=e.length;d<m;d++){var g=e[d];if(0!==d||n)if(d!==m-1||n){i=e[n?d?d-1:m-1:d-1],a=e[n?(d+1)%m:d+1];var y=[0,0];y=cF(y=mF(y,a,i),y,t);var v=uF(g,i),E=uF(g,a),x=v+E;0!==x&&(v/=x,E/=x);var b=cF([0,0],y,-v),C=cF([0,0],y,E);c=aF([0,0],g,b),l=sF([0,0],l=aF([0,0],g,C),lF([0,0],a,g)),l=lF([0,0],l,sF([0,0],a,g)),c=sF([0,0],c=aF([0,0],g,b=cF([0,0],b=mF([0,0],l,g),-v/E)),lF([0,0],i,g)),c=lF([0,0],c,sF([0,0],i,g)),l=aF([0,0],g,C=cF([0,0],C=mF([0,0],g,c),E/v)),p&&(c=sF([0,0],c=lF([0,0],c,o),s),l=sF([0,0],l=lF([0,0],l,o),s)),h.push(u),h.push(c),u=l}else c=g,h.push(u),h.push(c);else u=g}return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a++)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}function RG(e,t){return function(e,t){var n=[];if(e.length){n.push(["M",e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var a=e[r];n.push(["L",a.x,a.y])}t&&n.push(["Z"])}return n}(e,t)}function DG(e,t,n){var r=[],i=e[0],a=null;if(e.length<=2)return RG(e,t);for(var o=0,s=e.length;o<s;o++){var l=e[o];a&&a.x===l.x&&a.y===l.y||(r.push(l.x),r.push(l.y),a=l)}var c=LG(r,t,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}function BG(e,t){var n,r,i,a=[];return uM(t,(function(o,s){switch(o[0].toLowerCase()){case"m":case"c":case"q":a.push(PG(o,e));break;case"l":n=t[s-1],r=o,i=e.isTransposed,(i?n[n.length-2]===r[1]:n[n.length-1]===r[2])?a=a.concat(function(e,t,n){var r=n.isTransposed,i=n.startAngle,a=n.endAngle,o="a"===e[0].toLowerCase()?{x:e[6],y:e[7]}:{x:e[1],y:e[2]},s={x:t[1],y:t[2]},l=[],c=r?"y":"x",u=Math.abs(s[c]-o[c])*(a-i),h=s[c]>=o[c]?1:0,p=u>Math.PI?1:0,d=n.convert(s),f=sG(n,d);if(f>=.5)if(u===2*Math.PI){var m={x:(s.x+o.x)/2,y:(s.y+o.y)/2},g=n.convert(m);l.push(["A",f,f,0,p,h,g.x,g.y]),l.push(["A",f,f,0,p,h,d.x,d.y])}else l.push(["A",f,f,0,p,h,d.x,d.y]);return l}(n,r,e)):a.push(PG(o,e));break;case"a":a.push(FG(o,e));break;case"z":default:a.push(o)}})),function(e){uM(e,(function(t,n){if("a"===t[0].toLowerCase()){var r=e[n-1],i=e[n+1];i&&"a"===i[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&i&&"l"===i[0].toLowerCase()&&(i[0]="M")}}))}(a),a}function $G(e,t){var n=e.event.target.getCanvasBBox();return n.width>=t||n.height>=t?n:null}function zG(e){var t,n=e.event.target;return n&&(t=n.get("element")),t}function HG(e){var t,n=e.event.target;return n&&(t=n.get("delegateObject")),t}function jG(e){var t=e.event.gEvent;return!(t&&t.fromShape&&t.toShape&&t.fromShape.get("element")===t.toShape.get("element"))}function GG(e){return e&&e.component&&e.component.isList()}function VG(e){return e&&e.component&&e.component.isSlider()}function YG(e){var t=e.event.target;return t&&"mask"===t.get("name")}function UG(e,t){var n,r,i,a;if("path"===e.event.target.get("type")){var o=function(e,t){var n=e.event.target,r=n.getCanvasBBox();return r.width>=t||r.height>=t?n.attr("path"):null}(e,t);if(!o)return;return n=e.view,r=o,i=WG(n),a=ZG(r),i.filter((function(e){var t,n,r=e.shape;if("path"===r.get("type"))t=ZG(r.attr("path"));else{var i=r.getCanvasBBox();t=[[(n=i).minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY]]}return function(e,t){if(e.length<2||t.length<2)return!1;var n,r,i=KR(e),a=KR(t);if(n=i,(r=a).minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)return!1;var o=!1;if(uM(t,(function(t){if(qR(e,t[0],t[1]))return o=!0,!1})),o)return!0;if(uM(e,(function(e){if(qR(t,e[0],e[1]))return o=!0,!1})),o)return!0;var s=WR(e),l=WR(t),c=!1;return uM(l,(function(e){if(XR(s,e))return c=!0,!1})),c}(a,t)}))}var s=$G(e,t);return s?QG(e.view,s):null}function qG(e,t,n){var r=$G(e,n);if(!r)return null;var i=e.view,a=rV(i,t,{x:r.x,y:r.y}),o=rV(i,t,{x:r.maxX,y:r.maxY});return QG(t,{minX:a.x,minY:a.y,maxX:o.x,maxY:o.y})}function WG(e){var t=e.geometries,n=[];return uM(t,(function(e){var t=e.elements;n=n.concat(t)})),e.views&&e.views.length&&uM(e.views,(function(e){n=n.concat(WG(e))})),n}function XG(e,t){var n=e.geometries,r=[];return uM(n,(function(e){var n=e.getElementsBy((function(e){return e.hasState(t)}));r=r.concat(n)})),r}function KG(e,t){var n=e.getModel().data;return lM(n)?n[0][t]:n[t]}function QG(e,t){var n=WG(e),r=[];return uM(n,(function(e){var n=e.shape.getCanvasBBox();(function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)})(t,n)&&r.push(e)})),r}function ZG(e){var t=[];return uM(e,(function(e){if("A"!==e[0])for(var n=1;n<e.length;n+=2)t.push([e[n],e[n+1]]);else{var r=e.length;t.push([e[r-2],e[r-1]])}})),t}function JG(e){return e.getComponents().map((function(e){return e.component}))}function eV(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function tV(e,t){return e.x<=t.x&&e.maxX>=t.x&&e.y<=t.y&&e.maxY>t.y}function nV(e){var t=e.parent,n=null;return t&&(n=t.views.filter((function(t){return t!==e}))),n}function rV(e,t,n){var r=function(e,t){return e.getCoordinate().invert(t)}(e,n);return t.getCoordinate().convert(r)}function iV(e,t,n,r){var i=!1;return uM(e,(function(e){if(e[n]===t[n]&&e[r]===t[r])return i=!0,!1})),i}function aV(e,t){var n=e.getScaleByField(t);return!n&&e.views&&uM(e.views,(function(e){if(n=aV(e,t))return!1})),n}var oV=function(){function e(e){this.actions=[],this.event=null,this.cacheMap={},this.view=e}return e.prototype.cache=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length)return this.cacheMap[e[0]];2===e.length&&(this.cacheMap[e[0]]=e[1])},e.prototype.getAction=function(e){return this.actions.find((function(t){return t.name===e}))},e.prototype.addAction=function(e){this.actions.push(e)},e.prototype.removeAction=function(e){var t=this.actions,n=this.actions.indexOf(e);n>=0&&t.splice(n,1)},e.prototype.getCurrentPoint=function(){var e=this.event;return e?e.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(e.clientX,e.clientY):{x:e.x,y:e.y}:null},e.prototype.getCurrentShape=function(){return fN(this.event,["gEvent","shape"])},e.prototype.isInPlot=function(){var e=this.getCurrentPoint();return!!e&&this.view.isPointInPlot(e)},e.prototype.isInShape=function(e){var t=this.getCurrentShape();return!!t&&t.get("name")===e},e.prototype.isInComponent=function(e){var t=JG(this.view),n=this.getCurrentPoint();return!!n&&!!t.find((function(t){var r=t.getBBox();return e?t.get("name")===e&&tV(r,n):tV(r,n)}))},e.prototype.destroy=function(){uM(this.actions.slice(),(function(e){e.destroy()})),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},e}(),sV=function(){function e(e,t){this.view=e,this.cfg=t}return e.prototype.init=function(){this.initEvents()},e.prototype.initEvents=function(){},e.prototype.clearEvents=function(){},e.prototype.destroy=function(){this.clearEvents()},e}();function lV(e,t,n){var r=e.split(":"),i=r[0],a=t.getAction(i)||function(e,t){var n=AG[e],r=null;return n&&((r=new(0,n.ActionClass)(t,n.cfg)).name=e,r.init()),r}(i,t);if(!a)throw new Error("There is no action named ".concat(i));return{action:a,methodName:r[1],arg:n}}function cV(e){var t=e.action,n=e.methodName,r=e.arg;if(!t[n])throw new Error("Action(".concat(t.name,") doesn't have a method called ").concat(n));t[n](r)}var uV="start",hV="showEnable",pV="end",dV="rollback",fV="processing",mV=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.callbackCaches={},r.emitCaches={},r.steps=n,r}return KI(t,e),t.prototype.init=function(){this.initContext(),e.prototype.init.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},t.prototype.initEvents=function(){var e=this;uM(this.steps,(function(t,n){uM(t,(function(t){var r=e.getActionCallback(n,t);r&&e.bindEvent(t.trigger,r)}))}))},t.prototype.clearEvents=function(){var e=this;uM(this.steps,(function(t,n){uM(t,(function(t){var r=e.getActionCallback(n,t);r&&e.offEvent(t.trigger,r)}))}))},t.prototype.initContext=function(){var e=this.view,t=new oV(e);this.context=t,uM(this.steps,(function(e){uM(e,(function(e){if(oM(e.action))e.actionObject={action:NG(e.action,t),methodName:"execute"};else if(wM(e.action))e.actionObject=lV(e.action,t,e.arg);else if(lM(e.action)){var n=e.action,r=lM(e.arg)?e.arg:[e.arg];e.actionObject=[],uM(n,(function(n,i){e.actionObject.push(lV(n,t,r[i]))}))}}))}))},t.prototype.isAllowStep=function(e){var t=this.currentStepName,n=this.steps;if(t===e)return!0;if(e===hV)return!0;if(e===fV)return t===uV;if(e===uV)return t!==fV;if(e===pV)return t===fV||t===uV;if(e===dV){if(n[pV])return t===pV;if(t===uV)return!0}return!1},t.prototype.isAllowExecute=function(e,t){if(this.isAllowStep(e)){var n=this.getKey(e,t);return(!t.once||!this.emitCaches[n])&&(!t.isEnable||t.isEnable(this.context))}return!1},t.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},t.prototype.afterExecute=function(e,t){e!==hV&&this.currentStepName!==e&&this.enterStep(e);var n=this.getKey(e,t);this.emitCaches[n]=!0},t.prototype.getKey=function(e,t){return e+t.trigger+t.action},t.prototype.getActionCallback=function(e,t){var n=this,r=this.context,i=this.callbackCaches,a=t.actionObject;if(t.action&&a){var o=this.getKey(e,t);if(!i[o]){var s=function(i){r.event=i,n.isAllowExecute(e,t)?(lM(a)?uM(a,(function(e){r.event=i,cV(e)})):(r.event=i,cV(a)),n.afterExecute(e,t),t.callback&&(r.event=i,t.callback(r))):r.event=null};t.debounce?i[o]=rN(s,t.debounce.wait,t.debounce.immediate):t.throttle?i[o]=EN(s,t.throttle.wait,{leading:t.throttle.leading,trailing:t.throttle.trailing}):i[o]=s}return i[o]}return null},t.prototype.bindEvent=function(e,t){var n=e.split(":");"window"===n[0]?window.addEventListener(n[1],t):"document"===n[0]?document.addEventListener(n[1],t):this.view.on(e,t)},t.prototype.offEvent=function(e,t){var n=e.split(":");"window"===n[0]?window.removeEventListener(n[1],t):"document"===n[0]?document.removeEventListener(n[1],t):this.view.off(e,t)},t}(sV),gV={};function yV(e,t){gV[YM(e)]=t}function vV(e,t,n){var r=function(e){return gV[YM(e)]}(e);if(!r)return null;if(fM(r)){var i=tN(nN(r),n);return new mV(t,i)}return new r(t,n)}function EV(e){var t,n={point:{default:{fill:e.pointFillColor,r:e.pointSize,stroke:e.pointBorderColor,lineWidth:e.pointBorder,fillOpacity:e.pointFillOpacity},active:{stroke:e.pointActiveBorderColor,lineWidth:e.pointActiveBorder},selected:{stroke:e.pointSelectedBorderColor,lineWidth:e.pointSelectedBorder},inactive:{fillOpacity:e.pointInactiveFillOpacity,strokeOpacity:e.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:e.hollowPointFillColor,lineWidth:e.hollowPointBorder,stroke:e.hollowPointBorderColor,strokeOpacity:e.hollowPointBorderOpacity,r:e.hollowPointSize},active:{stroke:e.hollowPointActiveBorderColor,strokeOpacity:e.hollowPointActiveBorderOpacity},selected:{lineWidth:e.hollowPointSelectedBorder,stroke:e.hollowPointSelectedBorderColor,strokeOpacity:e.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:e.hollowPointInactiveBorderOpacity}},area:{default:{fill:e.areaFillColor,fillOpacity:e.areaFillOpacity,stroke:null},active:{fillOpacity:e.areaActiveFillOpacity},selected:{fillOpacity:e.areaSelectedFillOpacity},inactive:{fillOpacity:e.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:e.hollowAreaBorderColor,lineWidth:e.hollowAreaBorder,strokeOpacity:e.hollowAreaBorderOpacity},active:{fill:null,lineWidth:e.hollowAreaActiveBorder},selected:{fill:null,lineWidth:e.hollowAreaSelectedBorder},inactive:{strokeOpacity:e.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:e.intervalFillColor,fillOpacity:e.intervalFillOpacity},active:{stroke:e.intervalActiveBorderColor,lineWidth:e.intervalActiveBorder},selected:{stroke:e.intervalSelectedBorderColor,lineWidth:e.intervalSelectedBorder},inactive:{fillOpacity:e.intervalInactiveFillOpacity,strokeOpacity:e.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:e.hollowIntervalFillColor,stroke:e.hollowIntervalBorderColor,lineWidth:e.hollowIntervalBorder,strokeOpacity:e.hollowIntervalBorderOpacity},active:{stroke:e.hollowIntervalActiveBorderColor,lineWidth:e.hollowIntervalActiveBorder,strokeOpacity:e.hollowIntervalActiveBorderOpacity},selected:{stroke:e.hollowIntervalSelectedBorderColor,lineWidth:e.hollowIntervalSelectedBorder,strokeOpacity:e.hollowIntervalSelectedBorderOpacity},inactive:{stroke:e.hollowIntervalInactiveBorderColor,lineWidth:e.hollowIntervalInactiveBorder,strokeOpacity:e.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:e.lineBorderColor,lineWidth:e.lineBorder,strokeOpacity:e.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:e.lineActiveBorder},selected:{lineWidth:e.lineSelectedBorder},inactive:{strokeOpacity:e.lineInactiveBorderOpacity}}},r=function(e){return{title:{autoRotate:!0,position:"center",spacing:e.axisTitleSpacing,style:{fill:e.axisTitleTextFillColor,fontSize:e.axisTitleTextFontSize,lineHeight:e.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:e.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:e.axisLabelOffset,style:{fill:e.axisLabelFillColor,fontSize:e.axisLabelFontSize,lineHeight:e.axisLabelLineHeight,fontFamily:e.fontFamily}},line:{style:{lineWidth:e.axisLineBorder,stroke:e.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:e.axisGridBorderColor,lineWidth:e.axisGridBorder,lineDash:e.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:e.axisTickLineBorder,stroke:e.axisTickLineBorderColor},alignTick:!0,length:e.axisTickLineLength},subTickLine:null,animate:!0}}(e),i=function(e){return{title:null,marker:{symbol:"circle",spacing:e.legendMarkerSpacing,style:{r:e.legendCircleMarkerSize,fill:e.legendMarkerColor}},itemName:{spacing:5,style:{fill:e.legendItemNameFillColor,fontFamily:e.fontFamily,fontSize:e.legendItemNameFontSize,lineHeight:e.legendItemNameLineHeight,fontWeight:e.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:e.legendPageNavigatorMarkerSize,inactiveFill:e.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:e.legendPageNavigatorMarkerInactiveFillOpacity,fill:e.legendPageNavigatorMarkerFillColor,opacity:e.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:e.legendPageNavigatorTextFillColor,fontSize:e.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:e.legendItemSpacing,itemMarginBottom:e.legendItemMarginBottom,padding:e.legendPadding}}(e);return{background:e.backgroundColor,defaultColor:e.brandColor,subColor:e.subColor,semanticRed:e.paletteSemanticRed,semanticGreen:e.paletteSemanticGreen,padding:"auto",fontFamily:e.fontFamily,columnWidthRatio:.5,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:e.paletteQualitative10,colors20:e.paletteQualitative20,sequenceColors:e.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:function(e){var t=e.geometry.coordinate;if(t.isPolar&&t.isTransposed){var r=eG(e.getModel(),t),i=(r.startAngle+r.endAngle)/2;return{matrix:xF(null,[["t",7.5*Math.cos(i),7.5*Math.sin(i)]])}}return n.interval.selected}}},"hollow-rect":{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},line:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},tick:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},funnel:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}},pyramid:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},line:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},dot:{default:{style:QI(QI({},n.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:QI(QI({},n.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:QI(QI({},n.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:QI(QI({},n.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:QI(QI({},n.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:QI(QI({},n.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:QI(QI({},n.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:QI(QI({},n.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hvh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},polygon:{polygon:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},point:{circle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},square:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},bowtie:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},diamond:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},hexagon:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},triangle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"triangle-down":{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"hollow-circle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-square":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-bowtie":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-diamond":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-hexagon":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle-down":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},cross:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},tick:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},plus:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},hyphen:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},line:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}}},area:{area:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},smooth:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},line:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"smooth-line":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}},schema:{candle:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},box:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}}},edge:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},arc:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},violin:{violin:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hollow:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"hollow-smooth":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}}},components:{axis:{common:r,top:{position:"top",grid:null,title:null,verticalLimitLength:.5},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:.5},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:oN({},r.grid,{line:{type:"line"}})},radius:{title:null,grid:oN({},r.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:e.legendVerticalPadding},left:{layout:"vertical",padding:e.legendVerticalPadding},top:{layout:"horizontal",padding:e.legendHorizontalPadding},bottom:{layout:"horizontal",padding:e.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:e.sliderRailHeight,defaultLength:e.sliderRailWidth,style:{fill:e.sliderRailFillColor,stroke:e.sliderRailBorderColor,lineWidth:e.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:e.sliderLabelTextFillColor,fontSize:e.sliderLabelTextFontSize,lineHeight:e.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:e.fontFamily}},handler:{size:e.sliderHandlerWidth,style:{fill:e.sliderHandlerFillColor,stroke:e.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:e.tooltipCrosshairsBorderColor,lineWidth:e.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(t={},t["".concat("g2-tooltip")]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:e.tooltipContainerFillColor,opacity:e.tooltipContainerFillOpacity,boxShadow:e.tooltipContainerShadow,borderRadius:"".concat(e.tooltipContainerBorderRadius,"px"),color:e.tooltipTextFillColor,fontSize:"".concat(e.tooltipTextFontSize,"px"),fontFamily:e.fontFamily,lineHeight:"".concat(e.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},t["".concat(Ej)]={marginBottom:"12px",marginTop:"12px"},t["".concat(xj)]={margin:0,listStyleType:"none",padding:0},t["".concat("g2-tooltip-list-item")]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},t["".concat("g2-tooltip-marker")]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t["".concat("g2-tooltip-value")]={display:"inline-block",float:"right",marginLeft:"30px"},t)},annotation:{arc:{style:{stroke:e.annotationArcBorderColor,lineWidth:e.annotationArcBorder},animate:!0},line:{style:{stroke:e.annotationLineBorderColor,lineDash:e.annotationLineDash,lineWidth:e.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textAlign:"start",fontFamily:e.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:e.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:e.annotationRegionBorder,stroke:e.annotationRegionBorderColor,fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:e.brandColor,lineWidth:2}},line:{style:{stroke:e.annotationLineBorderColor,lineWidth:e.annotationLineBorder},length:e.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:e.cSliderBackgroundFillColor,opacity:e.cSliderBackgroundFillOpacity},foregroundStyle:{fill:e.cSliderForegroundFillColor,opacity:e.cSliderForegroundFillOpacity},handlerStyle:{width:e.cSliderHandlerWidth,height:e.cSliderHandlerHeight,fill:e.cSliderHandlerFillColor,opacity:e.cSliderHandlerFillOpacity,stroke:e.cSliderHandlerBorderColor,lineWidth:e.cSliderHandlerBorder,radius:e.cSliderHandlerBorderRadius,highLightFill:e.cSliderHandlerHighlightFillColor},textStyle:{fill:e.cSliderTextFillColor,opacity:e.cSliderTextFillOpacity,fontSize:e.cSliderTextFontSize,lineHeight:e.cSliderTextLineHeight,fontWeight:e.cSliderTextFontWeight,stroke:e.cSliderTextBorderColor,lineWidth:e.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:e.scrollbarTrackFillColor,thumbColor:e.scrollbarThumbFillColor}},hover:{style:{thumbColor:e.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:e.labelFillColor,fontSize:e.labelFontSize,fontFamily:e.fontFamily,stroke:e.labelBorderColor,lineWidth:e.labelBorder},fillColorDark:e.labelFillColorDark,fillColorLight:e.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:e.innerLabelFillColor,fontSize:e.innerLabelFontSize,fontFamily:e.fontFamily,stroke:e.innerLabelBorderColor,lineWidth:e.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:e.overflowLabelFillColor,fontSize:e.overflowLabelFontSize,fontFamily:e.fontFamily,stroke:e.overflowLabelBorderColor,lineWidth:e.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:e.labelLineBorder}},autoRotate:!0}}}var xV="#000",bV="#595959",CV="#8C8C8C",SV="#BFBFBF",wV="#D9D9D9",TV="#F0F0F0",kV="#FFFFFF",_V=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],OV=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],AV=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],IV=function(e){void 0===e&&(e={});var t=e.backgroundColor,n=void 0===t?"transparent":t,r=e.subColor,i=void 0===r?"rgba(0,0,0,0.05)":r,a=e.paletteQualitative10,o=void 0===a?_V:a,s=e.paletteQualitative20,l=void 0===s?OV:s,c=e.paletteSemanticRed,u=void 0===c?"#F4664A":c,h=e.paletteSemanticGreen,p=void 0===h?"#30BF78":h,d=e.paletteSemanticYellow,f=void 0===d?"#FAAD14":d,m=e.paletteSequence,g=void 0===m?AV:m,y=e.fontFamily,v=void 0===y?'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"':y,E=e.brandColor,x=void 0===E?o[0]:E;return{backgroundColor:n,brandColor:x,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:u,paletteSemanticGreen:p,paletteSemanticYellow:f,paletteSequence:g,fontFamily:v,axisLineBorderColor:SV,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:bV,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:SV,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:wV,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:CV,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:wV,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:CV,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:x,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:bV,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:xV,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:xV,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:CV,legendPageNavigatorTextFontSize:12,sliderRailFillColor:wV,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:CV,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:TV,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:SV,annotationArcBorderColor:wV,annotationArcBorder:1,annotationLineBorderColor:SV,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:bV,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:xV,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:SV,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:bV,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:bV,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:kV,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:bV,overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:kV,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:SV,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:x,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:kV,pointBorderOpacity:1,pointActiveBorderColor:xV,pointSelectedBorder:2,pointSelectedBorderColor:xV,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:x,hollowPointBorderOpacity:.95,hollowPointFillColor:kV,hollowPointActiveBorder:1,hollowPointActiveBorderColor:xV,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:xV,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:x,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:x,areaFillOpacity:.25,areaActiveFillColor:x,areaActiveFillOpacity:.5,areaSelectedFillColor:x,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:x,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:xV,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:xV,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:x,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:xV,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:xV,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:x,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:kV,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:xV,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:xV,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}};function MV(e){var t=e.styleSheet,n=void 0===t?{}:t,r=ZI(e,["styleSheet"]),i=IV(n);return oN({},EV(i),r)}IV();var NV={default:MV({})};function PV(e){return fN(NV,YM(e),NV.default)}function FV(e,t,n){return DM(n.translate(e),n.translate(t))}function LV(e,t,n){var r=n.coordinate,i=n.getYScale(),a=i.field,o=r.invert(t),s=i.invert(o.y);return mM(e,(function(e){var t=e._origin;return t[a][0]<=s&&t[a][1]>=s}))||e[e.length-1]}var RV=iN((function(e){if(e.isCategory)return 1;for(var t=e.values,n=t.length,r=e.translate(t[0]),i=r,a=0;a<n;a++){var o=t[a],s=e.translate(o);s<r&&(r=s),s>i&&(i=s)}return(i-r)/(n-1)}));function DV(e){for(var t,n=0,r=function(e){var t=GM(e.attributes);return rM(t,(function(e){return nM(qN,e.type)}))}(e);n<r.length;n++){var i=r[n],a=i.getScale(i.type);if(a&&a.isLinear){t=a;break}}var o=e.getXScale(),s=e.getYScale();return t||s||o}function BV(e,t,n){if(0===t.length)return null;var r=n.type,i=n.getXScale(),a=n.getYScale(),o=i.field,s=a.field,l=null;if("heatmap"===r||"point"===r){for(var c=n.coordinate.invert(e),u=i.invert(c.x),h=a.invert(c.y),p=1/0,d=0;d<t.length;d++){var f=t[d],m=f._origin,g=Math.pow(m[o]-u,2)+Math.pow(m[s]-h,2);g<p&&(p=g,l=f)}return l}var y=t[0],v=t[t.length-1],E=function(e,t){var n=t.coordinate,r=t.getXScale(),i=r.range,a=i[i.length-1],o=i[0],s=n.invert(e).x;return n.isPolar&&s>(1+a)/2&&(s=o),r.translate(r.invert(s))}(e,n),x=y._origin[o],b=y._origin[s],C=v._origin[o],S=a.isLinear&&lM(b);if(lM(x)){for(d=0;d<t.length;d++){m=(A=t[d])._origin;if(i.translate(m[o][0])<=E&&i.translate(m[o][1])>=E){if(!S){l=A;break}lM(l)||(l=[]),l.push(A)}}lM(l)&&(l=LV(l,e,n))}else{var w=void 0;if(i.isLinear||"timeCat"===i.type){if((E>i.translate(C)||E<i.translate(x))&&(E>i.max||E<i.min))return null;for(var T=0,k=t.length-1,_=void 0;T<=k;){var O=t[_=Math.floor((T+k)/2)]._origin[o];if(FV(O,E,i))return t[_];i.translate(O)<=i.translate(E)?(T=_+1,v=t[_],w=t[_+1]):(0===k&&(v=t[0]),k=_-1)}}else{for(d=0;d<t.length;d++){var A;if(FV((m=(A=t[d])._origin)[o],E,i)){if(!S){l=A;break}lM(l)||(l=[]),l.push(A)}else i.translate(m[o])<=E&&(v=A,w=t[d+1])}lM(l)&&(l=LV(l,e,n))}v&&w&&Math.abs(i.translate(v._origin[o])-E)>Math.abs(i.translate(w._origin[o])-E)&&(v=w)}var I=RV(n.getXScale());return!l&&Math.abs(i.translate(v._origin[o])-E)<=I/2&&(l=v),l}function $V(e,t,n,r){void 0===n&&(n=""),void 0===r&&(r=!1);var i,a=e._origin,o=function(e,t,n){var r=t.getAttribute("position").getFields(),i=t.scales,a=oM(n)||!n?r[0]:n,o=i[a],s=o?o.getText(e[a]):e[a]||a;return oM(n)?n(s,e):s}(a,t,n),s=t.tooltipOption,l=t.theme.defaultColor,c=[];function u(t,n){if(r||!sM(n)&&""!==n){var i={title:o,data:a,mappingData:e,name:t,value:n,color:e.color||l,marker:!0};c.push(i)}}if(cM(s)){var h=s.fields,p=s.callback;if(p){var d=h.map((function(t){return e._origin[t]})),f=p.apply(void 0,d),m=QI({data:e._origin,mappingData:e,title:o,color:e.color||l,marker:!0},f);c.push(m)}else for(var g=t.scales,y=0,v=h;y<v.length;y++){var E=v[y];if(!sM(a[E])){var x=g[E];u(dG(x),i=x.getText(a[E]))}}}else{var b=DV(t);i=function(e,t){var n=e[t.field];return lM(n)?n.map((function(e){return t.getText(e)})).join("-"):t.getText(n)}(a,b),u(function(e,t){var n,r=t.getGroupScales();if(r.length&&(n=r[0]),n){var i=n.field;return n.getText(e[i])}return dG(DV(t))}(a,t),i)}return c}function zV(e,t,n,r){var i=r.showNil,a=[],o=e.dataArray;if(!cN(o)){e.sort(o);for(var s=0,l=o;s<l.length;s++){var c=BV(t,l[s],e);if(c){var u=e.getElementId(c),h=e.elementsMap[u];if("heatmap"===e.type||h.visible){var p=$V(c,e,n,i);p.length&&a.push(p)}}}}return a}function HV(e,t,n,r){var i=r.showNil,a=[],o=e.container.getShape(t.x,t.y);if(o&&o.get("visible")&&o.get("origin")){var s=$V(o.get("origin").mappingData,e,n,i);s.length&&a.push(s)}return a}function jV(e,t,n){for(var r=[],i=e.geometries,a=n.shared,o=n.title,s=n.reversed,l=0,c=i;l<c.length;l++){var u=c[l];if(u.visible&&!1!==u.tooltipOption){var h=u.type,p=void 0;(p=["point","edge","polygon"].includes(h)?HV(u,t,o,n):["area","line","path","heatmap"].includes(h)||!1!==a?zV(u,t,o,n):HV(u,t,o,n)).length&&(s&&p.reverse(),r.push(p))}}return r}function GV(e){void 0===e&&(e=0);var t=lM(e)?e:[e];switch(t.length){case 0:t=[0,0,0,0];break;case 1:t=new Array(4).fill(t[0]);break;case 2:t=eM(eM([],t,!0),t,!0);break;case 3:t=eM(eM([],t,!0),[t[1]],!1);break;default:t=t.slice(0,4)}return t}var VV={};function YV(e,t){VV[e]=t}var UV=function(){function e(e){this.option=this.wrapperOption(e)}return e.prototype.update=function(e){return this.option=this.wrapperOption(e),this},e.prototype.hasAction=function(e){var t=this.option.actions;return IM(t,(function(t){return t[0]===e}))},e.prototype.create=function(e,t){var n=this.option,r=n.type,i=n.cfg,a="theta"===r,o=QI({start:e,end:t},i),s=function(e){return s$[e.toLowerCase()]}(a?"polar":r);return this.coordinate=new s(o),this.coordinate.type=r,a&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},e.prototype.adjust=function(e,t){return this.coordinate.update({start:e,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},e.prototype.rotate=function(e){return this.option.actions.push(["rotate",e]),this},e.prototype.reflect=function(e){return this.option.actions.push(["reflect",e]),this},e.prototype.scale=function(e,t){return this.option.actions.push(["scale",e,t]),this},e.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},e.prototype.getOption=function(){return this.option},e.prototype.getCoordinate=function(){return this.coordinate},e.prototype.wrapperOption=function(e){return QI({type:"rect",actions:[],cfg:{}},e)},e.prototype.execActions=function(e){var t=this;uM(this.option.actions,(function(n){var r,i=n[0],a=n.slice(1);(!!sM(e)||e.includes(i))&&(r=t.coordinate)[i].apply(r,a)}))},e}(),qV=function(){function e(e,t,n){this.view=e,this.gEvent=t,this.data=n,this.type=t.type}return e.fromData=function(t,n,r){return new e(t,new BP(n,{}),r)},Object.defineProperty(e.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},e.prototype.clone=function(){return new e(this.view,this.gEvent,this.data)},e}();function WV(e){var t=e.getController("axis"),n=e.getController("legend"),r=e.getController("annotation");[t,e.getController("slider"),e.getController("scrollbar"),n,r].forEach((function(e){e&&e.layout()}))}var XV=function(){function e(){this.scales=new Map,this.syncScales=new Map}return e.prototype.createScale=function(e,t,n,r){var i=n,a=this.getScaleMeta(r);if(0===t.length&&a){var o=a.scale,s={type:o.type};o.isCategory&&(s.values=o.values),i=oN(s,a.scaleDef,n)}var l=pG(e,t,i);return this.cacheScale(l,n,r),l},e.prototype.sync=function(e,t){var n=this;this.syncScales.forEach((function(r,i){var a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=[];uM(r,(function(e){var t=n.getScale(e);o=RM(t.max)?Math.max(o,t.max):o,a=RM(t.min)?Math.min(a,t.min):a,uM(t.values,(function(e){s.includes(e)||s.push(e)}))})),uM(r,(function(r){var i=n.getScale(r);if(i.isContinuous)i.change({min:a,max:o,values:s});else if(i.isCategory){var l=i.range,c=n.getScaleMeta(r);s&&!fN(c,["scaleDef","range"])&&(l=fG(oN({},i,{values:s}),e,t)),i.change({values:s,range:l})}}))}))},e.prototype.cacheScale=function(e,t,n){var r=this.getScaleMeta(n);r&&r.scale.type===e.type?(!function(e,t){if("identity"!==e.type&&"identity"!==t.type){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);e.change(n)}}(r.scale,e),r.scaleDef=t):(r={key:n,scale:e,scaleDef:t},this.scales.set(n,r));var i=this.getSyncKey(r);if(r.syncKey=i,this.removeFromSyncScales(n),i){var a=this.syncScales.get(i);a||(a=[],this.syncScales.set(i,a)),a.push(n)}},e.prototype.getScale=function(e){var t=this.getScaleMeta(e);if(!t){var n=OM(e.split("-")),r=this.syncScales.get(n);r&&r.length&&(t=this.getScaleMeta(r[0]))}return t&&t.scale},e.prototype.deleteScale=function(e){var t=this.getScaleMeta(e);if(t){var n=t.syncKey,r=this.syncScales.get(n);if(r&&r.length){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}}this.scales.delete(e)},e.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},e.prototype.removeFromSyncScales=function(e){var t=this;this.syncScales.forEach((function(n,r){var i=n.indexOf(e);if(-1!==i)return n.splice(i,1),0===n.length&&t.syncScales.delete(r),!1}))},e.prototype.getSyncKey=function(e){var t=e.scale,n=e.scaleDef,r=t.field,i=fN(n,["sync"]);return!0===i?r:!1===i?void 0:i},e.prototype.getScaleMeta=function(e){return this.scales.get(e)},e}(),KV=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=e,this.right=t,this.bottom=n,this.left=r}return e.instance=function(t,n,r,i){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),new e(t,n,r,i)},e.prototype.max=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return this.top=Math.max(this.top,t),this.right=Math.max(this.right,n),this.bottom=Math.max(this.bottom,r),this.left=Math.max(this.left,i),this},e.prototype.shrink=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return this.top+=t,this.right+=n,this.bottom+=r,this.left+=i,this},e.prototype.inc=function(e,t){var n=e.width,r=e.height;switch(t){case kN.TOP:case kN.TOP_LEFT:case kN.TOP_RIGHT:this.top+=r;break;case kN.RIGHT:case kN.RIGHT_TOP:case kN.RIGHT_BOTTOM:this.right+=n;break;case kN.BOTTOM:case kN.BOTTOM_LEFT:case kN.BOTTOM_RIGHT:this.bottom+=r;break;case kN.LEFT:case kN.LEFT_TOP:case kN.LEFT_BOTTOM:this.left+=n}return this},e.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},e.prototype.clone=function(){return new(e.bind.apply(e,eM([void 0],this.getPadding(),!1)))},e}();function QV(e){var t=e.padding;if(!function(e){return!RM(e)&&!lM(e)}(t))return new(KV.bind.apply(KV,eM([void 0],GV(t),!1)));var n=e.viewBBox,r=new KV,i=[],a=[],o=[];return uM(e.getComponents(),(function(e){var t=e.type;t===ON.AXIS?i.push(e):[ON.LEGEND,ON.SLIDER,ON.SCROLLBAR].includes(t)?a.push(e):t!==ON.GRID&&t!==ON.TOOLTIP&&o.push(e)})),uM(i,(function(e){var t=e.component.getLayoutBBox(),i=new aG(t.x,t.y,t.width,t.height).exceed(n);r.max(i)})),uM(a,(function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),a=t.get("padding"),o=new aG(i.x,i.y,i.width,i.height).expand(a);r.inc(o,n)})),uM(o,(function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),a=new aG(i.x,i.y,i.width,i.height);r.inc(a,n)})),r}function ZV(e,t,n){var r=n.instance();t.forEach((function(e){e.autoPadding=r.max(e.autoPadding.getPadding())}))}var JV=function(e){function t(t){var n=e.call(this,{visible:t.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=Object.keys(VV),n.scalePool=new XV,n.layoutFunc=WV,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(e){var t=e.name;if(!t.includes(":")){var r=n.createViewEvent(e);n.doPlotEvent(r),n.emit(t,r)}},n.onDelegateEvents=function(e){var t=e.name;if(t.includes(":")){var r=n.createViewEvent(e);n.emit(t,r)}};var r=t.id,i=void 0===r?bN("view"):r,a=t.parent,o=t.canvas,s=t.backgroundGroup,l=t.middleGroup,c=t.foregroundGroup,u=t.region,h=void 0===u?{start:{x:0,y:0},end:{x:1,y:1}}:u,p=t.padding,d=t.appendPadding,f=t.theme,m=t.options,g=t.limitInPlot,y=t.syncViewPadding;return n.parent=a,n.canvas=o,n.backgroundGroup=s,n.middleGroup=l,n.foregroundGroup=c,n.region=h,n.padding=p,n.appendPadding=d,n.options=QI(QI({},n.options),m),n.limitInPlot=g,n.id=i,n.syncViewPadding=y,n.themeObject=cM(f)?oN({},PV("default"),MV(f)):PV(f),n.init(),n}return KI(t,e),t.prototype.setLayout=function(e){this.layoutFunc=e},t.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},t.prototype.render=function(e,t){void 0===e&&(e=!1),this.emit(NN.BEFORE_RENDER,qV.fromData(this,NN.BEFORE_RENDER,t)),this.paint(e),this.emit(NN.AFTER_RENDER,qV.fromData(this,NN.AFTER_RENDER,t)),!1===this.visible&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this;this.emit(NN.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var t=this.geometries,n=0;n<t.length;n++)t[n].clear(),t[n].container.remove(!0),t[n].labelsContainer.remove(!0);this.geometries=[];var r=this.controllers;for(n=0;n<r.length;n++)"annotation"===r[n].name?r[n].clear(!0):r[n].clear();this.createdScaleKeys.forEach((function(t,n){e.getRootView().scalePool.deleteScale(n)})),this.createdScaleKeys.clear();var i=this.views;for(n=0;n<i.length;n++)i[n].clear();this.emit(NN.AFTER_CLEAR)},t.prototype.destroy=function(){this.emit(NN.BEFORE_DESTROY),uM(this.interactions,(function(e){e&&e.destroy()})),this.clear();for(var t=this.controllers,n=0,r=t.length;n<r;n++){t[n].destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.geometries,r=0,i=n.length;r<i;r++){n[r].changeVisible(t)}var a=this.controllers;for(r=0,i=a.length;r<i;r++){a[r].changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},t.prototype.data=function(e){return mN(this.options,"data",e),this.isDataChanged=!0,this},t.prototype.source=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(e)},t.prototype.filter=function(e,t){return oM(t)?(mN(this.options,["filters",e],t),this):(!t&&fN(this.options,["filters",e])&&delete this.options.filters[e],this)},t.prototype.axis=function(e,t){return XM(e)?mN(this.options,["axes"],e):mN(this.options,["axes",e],t),this},t.prototype.legend=function(e,t){return XM(e)?mN(this.options,["legends"],e):wM(e)?(mN(this.options,["legends",e],t),fM(t)&&(null==t?void 0:t.selected)&&mN(this.options,["filters",e],(function(e){var n;return null===(n=null==t?void 0:t.selected[e])||void 0===n||n}))):mN(this.options,["legends"],e),this},t.prototype.scale=function(e,t){var n=this;return wM(e)?mN(this.options,["scales",e],t):cM(e)&&uM(e,(function(e,t){mN(n.options,["scales",t],e)})),this},t.prototype.tooltip=function(e){return mN(this.options,"tooltip",e),this},t.prototype.annotation=function(){return this.getController("annotation")},t.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},t.prototype.coordinate=function(e,t){return wM(e)?mN(this.options,"coordinate",{type:e,cfg:t}):mN(this.options,"coordinate",e),this.coordinateController.update(this.options.coordinate),this.coordinateController},t.prototype.coord=function(e,t){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(e,t)},t.prototype.facet=function(e,t){this.facetInstance&&this.facetInstance.destroy();var n=function(e){return TG[YM(e)]}(e);if(!n)throw new Error("facet '".concat(e,"' is not exist!"));return this.facetInstance=new n(this,QI(QI({},t),{type:e})),this},t.prototype.animate=function(e){return mN(this.options,"animate",e),this},t.prototype.updateOptions=function(e){return this.clear(),tN(this.options,e),this.views.forEach((function(e){return e.destroy()})),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},t.prototype.option=function(e,n){if(t.prototype[e])throw new Error("Can't use built in variable name \"".concat(e,'", please change another one.'));return mN(this.options,e,n),this},t.prototype.theme=function(e){return this.themeObject=cM(e)?oN({},this.themeObject,MV(e)):PV(e),this},t.prototype.interaction=function(e,t){var n=this.interactions[e];n&&n.destroy();var r=vV(e,this,t);return r&&(r.init(),this.interactions[e]=r),this},t.prototype.removeInteraction=function(e){var t=this.interactions[e];t&&(t.destroy(),this.interactions[e]=void 0)},t.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(NN.BEFORE_CHANGE_DATA,qV.fromData(this,NN.BEFORE_CHANGE_DATA,null)),this.data(e),this.paint(!0);for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].changeData(e)}this.emit(NN.AFTER_CHANGE_DATA,qV.fromData(this,NN.AFTER_CHANGE_DATA,null))},t.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:nN(this.options.scales),axes:nN(this.options.axes),coordinate:nN(this.coordinateController.getOption()),tooltip:nN(this.options.tooltip),legends:nN(this.options.legends),animate:this.options.animate,visible:this.visible},r=new t(QI(QI({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:jN}),middleGroup:this.middleGroup.addGroup({zIndex:HN}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:zN}),theme:this.themeObject,padding:this.padding},e),{options:QI(QI({},n),fN(e,"options",{}))}));return this.views.push(r),r},t.prototype.view=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(e)},t.prototype.removeView=function(e){var t=SM(this.views,(function(t){return t===e}))[0];return t&&t.destroy(),t},t.prototype.getCoordinate=function(){return this.coordinateInstance},t.prototype.getTheme=function(){return this.themeObject},t.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},t.prototype.getYScales=function(){var e={},t=[];return this.geometries.forEach((function(n){var r=n.getYScale(),i=r.field;e[i]||(e[i]=!0,t.push(r))})),t},t.prototype.getScalesByDim=function(e){for(var t=this.geometries,n={},r=0,i=t.length;r<i;r++){var a=t[r],o="x"===e?a.getXScale():a.getYScale();o&&!n[o.field]&&(n[o.field]=o)}return n},t.prototype.getScale=function(e,t){var n=t||this.getScaleKey(e);return this.getRootView().scalePool.getScale(n)},t.prototype.getScaleByField=function(e,t){return this.getScale(e,t)},t.prototype.getOptions=function(){return this.options},t.prototype.getData=function(){return this.filteredData},t.prototype.getOriginalData=function(){return this.options.data},t.prototype.getPadding=function(){return this.autoPadding.getPadding()},t.prototype.getGeometries=function(){return this.geometries},t.prototype.getElements=function(){return CM(this.geometries,(function(e,t){return e.concat(t.getElements())}),[])},t.prototype.getElementsBy=function(e){return this.getElements().filter((function(t){return e(t)}))},t.prototype.getLayer=function(e){return e===wN.BG?this.backgroundGroup:e===wN.MID?this.middleGroup:(wN.FORE,this.foregroundGroup)},t.prototype.isPointInPlot=function(e){return lG(this.getCoordinate(),e)},t.prototype.getLegendAttributes=function(){return yM(this.geometries.map((function(e){return e.getGroupAttributes()})))},t.prototype.getGroupScales=function(){var e=this.geometries.map((function(e){return e.getGroupScales()}));return iG(yM(e))},t.prototype.getCanvas=function(){return this.getRootView().canvas},t.prototype.getRootView=function(){for(var e=this;e.parent;)e=e.parent;return e},t.prototype.getXY=function(e){var t,n,r=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y");if(uM(e,(function(e,r){i[r]&&(t=i[r].scale(e)),a[r]&&(n=a[r].scale(e))})),!sM(t)&&!sM(n))return r.convert({x:t,y:n})},t.prototype.getController=function(e){return mM(this.controllers,(function(t){return t.name===e}))},t.prototype.showTooltip=function(e){var t=this.getController("tooltip");return t&&t.showTooltip(e),this},t.prototype.hideTooltip=function(){var e=this.getController("tooltip");return e&&e.hideTooltip(),this},t.prototype.lockTooltip=function(){var e=this.getController("tooltip");return e&&e.lockTooltip(),this},t.prototype.unlockTooltip=function(){var e=this.getController("tooltip");return e&&e.unlockTooltip(),this},t.prototype.isTooltipLocked=function(){var e=this.getController("tooltip");return e&&e.isTooltipLocked()},t.prototype.getTooltipItems=function(e){var t=this.getController("tooltip");return t?t.getTooltipItems(e):[]},t.prototype.getSnapRecords=function(e){for(var t=this.geometries,n=[],r=0,i=t.length;r<i;r++){var a=t[r],o=a.dataArray;a.sort(o);for(var s=void 0,l=0,c=o.length;l<c;l++){(s=BV(e,o[l],a))&&n.push(s)}}var u=this.views;for(r=0,i=u.length;r<i;r++){var h=u[r].getSnapRecords(e);n=n.concat(h)}return n},t.prototype.getComponents=function(){for(var e=[],t=this.controllers,n=0,r=t.length;n<r;n++){var i=t[n];e=e.concat(i.getComponents())}return e},t.prototype.filterData=function(e){var t=this.options.filters;return 0===SN(t)?e:rM(e,(function(e,n){return Object.keys(t).every((function(r){return(0,t[r])(e[r],e,n)}))}))},t.prototype.filterFieldData=function(e,t){var n=this.options.filters,r=fN(n,e);return ZM(r)?t:t.filter((function(t,n){return r(t[e],t,n)}))},t.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),t=e.start,n=e.end,r=this.coordinateBBox.bl,i=this.coordinateBBox.tr;hN(t,r)&&hN(n,i)?this.isCoordinateChanged=!1:(this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(r,i))},t.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(NN.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(NN.AFTER_PAINT),this.isDataChanged=!1},t.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=fN(this.themeObject,"background");if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var t=this.viewBBox,n=t.x,r=t.y,i=t.width,a=t.height;this.backgroundStyleRectShape.attr({fill:e,x:n,y:r,width:i,height:a})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},t.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=QV(this).shrink(GV(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].renderPaddingRecursive(e)}},t.prototype.renderLayoutRecursive=function(e){var t=!0===this.syncViewPadding?ZV:oM(this.syncViewPadding)?this.syncViewPadding:void 0;t&&(t(this,this.views,KV),this.views.forEach((function(e){e.coordinateBBox=e.viewBBox.shrink(e.autoPadding.getPadding()),e.adjustCoordinate()}))),this.doLayout();for(var n=this.views,r=0,i=n.length;r<i;r++){n[r].renderLayoutRecursive(e)}},t.prototype.renderPaintRecursive=function(e){var t=this.middleGroup;if(this.limitInPlot){var n=uG(this.coordinateInstance),r=n.type,i=n.attrs;t.setClip({type:r,attrs:i})}else t.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var a=this.views,o=0,s=a.length;o<s;o++){a[o].renderPaintRecursive(e)}},t.prototype.createScale=function(e,t,n,r){var i=fN(this.options.scales,[e]),a=QI(QI({},i),n);return this.parent?this.parent.createScale(e,t,a,r):this.scalePool.createScale(e,t,a,r)},t.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].renderDataRecursive(e)}},t.prototype.calculateViewBBox=function(){var e,t,n,r;if(this.parent){var i=this.parent.coordinateBBox;e=i.x,t=i.y,n=i.width,r=i.height}else e=0,t=0,n=this.canvas.get("width"),r=this.canvas.get("height");var a=this.region,o=a.start,s=a.end,l=new aG(e+n*o.x,t+r*o.y,n*(s.x-o.x),r*(s.y-o.y));this.viewBBox&&this.viewBBox.isEqual(l)||(this.viewBBox=new aG(e+n*o.x,t+r*o.y,n*(s.x-o.x),r*(s.y-o.y))),this.coordinateBBox=this.viewBBox},t.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},t.prototype.initComponentController=function(){for(var e=this.usedControllers,t=0,n=e.length;t<n;t++){var r=e[t],i=VV[r];i&&this.controllers.push(new i(this))}},t.prototype.createViewEvent=function(e){var t=e.shape,n=e.name,r=t?t.get("origin"):null,i=new qV(this,e,r);return i.type=n,i},t.prototype.doPlotEvent=function(e){var t=e.type,n={x:e.x,y:e.y};if(["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"].includes(t)){var r=this.isPointInPlot(n),i=e.clone();if(r){var a="plot:".concat(t);i.type=a,this.emit(a,i),"mouseleave"!==t&&"touchend"!==t||(this.isPreMouseInPlot=!1)}"mousemove"===t||"touchmove"===t?(this.isPreMouseInPlot&&!r?("mousemove"===t&&(i.type=RN.MOUSE_LEAVE,this.emit(RN.MOUSE_LEAVE,i)),i.type=RN.LEAVE,this.emit(RN.LEAVE,i)):!this.isPreMouseInPlot&&r&&("mousemove"===t&&(i.type=RN.MOUSE_ENTER,this.emit(RN.MOUSE_ENTER,i)),i.type=RN.ENTER,this.emit(RN.ENTER,i)),this.isPreMouseInPlot=r):"mouseleave"!==t&&"touchend"!==t||this.isPreMouseInPlot&&("mouseleave"===t&&(i.type=RN.MOUSE_LEAVE,this.emit(RN.MOUSE_LEAVE,i)),i.type=RN.LEAVE,this.emit(RN.LEAVE,i),this.isPreMouseInPlot=!1)}},t.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},t.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var t=this.getCoordinate(),n=fN(this.options,"scales",{}),r=this.geometries,i=0,a=r.length;i<a;i++){var o=r[i];o.scales=this.getGeometryScales();var s={coordinate:t,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?o.update(s):o.init(s)}this.adjustScales()},t.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),t=this.getGroupedFields(),n=this.getOptions(),r=n.data,i=n.scales,a=void 0===i?{}:i,o=this.filteredData,s=0,l=e.length;s<l;s++){var c=e[s],u=a[c],h=this.getScaleKey(c);this.createScale(c,t.includes(c)?r:o,u,h),this.createdScaleKeys.set(h,!0)}},t.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},t.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),t={},n=0;n<e.length;n++){var r=e[n];t[r]=this.getScaleByField(r)}return t},t.prototype.getScaleFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){iG(n[r].getScaleFields(),e,t)}return e},t.prototype.getGroupedFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){iG(n[r].getGroupFields(),e,t)}return e},t.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},t.prototype.adjustCategoryScaleRange=function(){var e=this,t=eM([this.getXScale()],this.getYScales(),!0).filter((function(e){return!!e})),n=this.getCoordinate(),r=this.options.scales;uM(t,(function(t){var i=t.field,a=t.values,o=t.isCategory,s=t.isIdentity;(o||s)&&a&&!fN(r,[i,"range"])&&(t.range=fG(t,n,e.theme))}))},t.prototype.initComponents=function(e){for(var t=this.controllers,n=0;n<t.length;n++){var r=t[n];e?r.update():(r.clear(),r.render())}},t.prototype.doLayout=function(){this.layoutFunc(this)},t.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,t=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,t)},t.prototype.paintGeometries=function(e){for(var t=this.options.animate,n=this.getCoordinate(),r={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},i=this.geometries,a=0;a<i.length;a++){var o=i[a];o.coordinate=n,o.canvasRegion=r,t||o.animate(!1),o.paint(e)}},t.prototype.renderComponents=function(e){for(var t=0;t<this.getComponents().length;t++){this.getComponents()[t].component.render()}},t.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},t.prototype.initOptions=function(){var e=this,t=this.options,n=t.geometries,r=void 0===n?[]:n,i=t.interactions,a=void 0===i?[]:i,o=t.views,s=void 0===o?[]:o,l=t.annotations,c=void 0===l?[]:l,u=t.coordinate,h=t.events,p=t.facets;this.coordinateController?u&&this.coordinateController.update(u):this.coordinateController=new UV(u);for(var d=0;d<r.length;d++){var f=r[d];this.createGeometry(f)}for(var m=0;m<a.length;m++){var g=a[m],y=g.type,v=g.cfg;this.interaction(y,v)}for(var E=0;E<s.length;E++){var x=s[E];this.createView(x)}for(var b=this.getController("annotation"),C=0;C<c.length;C++){var S=c[C];b.annotation(S)}h&&uM(h,(function(t,n){e.on(n,t)})),p&&uM(p,(function(t){var n=t.type,r=ZI(t,["type"]);e.facet(n,r)}))},t.prototype.createGeometry=function(e){var t=e.type,n=e.cfg,r=void 0===n?{}:n;if(this[t]){var i=this[t](r);uM(e,(function(e,t){oM(i[t])&&i[t](e)}))}},t.prototype.getScaleKey=function(e){return"".concat(this.id,"-").concat(e)},t}(aP);function eY(e,t){JV.prototype[e.toLowerCase()]=function(e){void 0===e&&(e={});var n=QI({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),r=new t(n);return this.geometries.push(r),r}}var tY=function(e){function t(t){var n=this,r=t.container,i=t.width,a=t.height,o=t.autoFit,s=void 0!==o&&o,l=t.padding,c=t.appendPadding,u=t.renderer,h=void 0===u?"canvas":u,p=t.pixelRatio,d=t.localRefresh,f=void 0===d||d,m=t.visible,g=void 0===m||m,y=t.supportCSSTransform,v=void 0!==y&&y,E=t.defaultInteractions,x=void 0===E?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:E,b=t.options,C=t.limitInPlot,S=t.theme,w=t.syncViewPadding,T=wM(r)?document.getElementById(r):r,k=QN('<div style="position:relative;"></div>');T.appendChild(k);var _=rP(T,s,i,a),O=new(function(e){var t=WN[e];if(!t)throw new Error("G engine '".concat(e,"' is not exist, please register it at first."));return t}(h).Canvas)(QI({container:k,pixelRatio:p,localRefresh:f,supportCSSTransform:v},_));return(n=e.call(this,{parent:null,canvas:O,backgroundGroup:O.addGroup({zIndex:jN}),middleGroup:O.addGroup({zIndex:HN}),foregroundGroup:O.addGroup({zIndex:zN}),padding:l,appendPadding:c,visible:g,options:b,limitInPlot:C,theme:S,syncViewPadding:w})||this).onResize=rN((function(){n.forceFit()}),300),n.ele=T,n.canvas=O,n.width=_.width,n.height=_.height,n.autoFit=s,n.localRefresh=f,n.renderer=h,n.wrapperElement=k,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(x),n}return KI(t,e),t.prototype.initDefaultInteractions=function(e){var t=this;uM(e,(function(e){t.interaction(e)}))},t.prototype.aria=function(e){var t="aria-label";!1===e?this.ele.removeAttribute(t):this.ele.setAttribute(t,e.label)},t.prototype.changeSize=function(e,t){return this.width===e&&this.height===t||(this.emit(NN.BEFORE_CHANGE_SIZE),this.width=e,this.height=t,this.canvas.changeSize(e,t),this.render(!0),this.emit(NN.AFTER_CHANGE_SIZE)),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.aria(!1)},t.prototype.destroy=function(){var t,n;e.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),t=this.wrapperElement,(n=t.parentNode)&&n.removeChild(t),this.wrapperElement=null},t.prototype.changeVisible=function(t){return e.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},t.prototype.forceFit=function(){if(!this.destroyed){var e=rP(this.ele,!0,this.width,this.height),t=e.width,n=e.height;this.changeSize(t,n)}},t.prototype.updateCanvasStyle=function(){tP(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},t.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},t.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},t}(JV),nY=function(){function e(e){this.visible=!0,this.components=[],this.view=e}return e.prototype.clear=function(e){uM(this.components,(function(e){e.component.destroy()})),this.components=[]},e.prototype.destroy=function(){this.clear()},e.prototype.getComponents=function(){return this.components},e.prototype.changeVisible=function(e){this.visible!==e&&(this.components.forEach((function(t){e?t.component.show():t.component.hide()})),this.visible=e)},e}();var rY=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isLocked=!1,t}return KI(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.isVisible=function(){return!1!==this.view.getOptions().tooltip},t.prototype.render=function(){},t.prototype.showTooltip=function(e){if(this.point=e,this.isVisible()){var t=this.view,n=this.getTooltipItems(e);if(n.length){var r=this.getTitle(n),i={x:n[0].x,y:n[0].y};t.emit("tooltip:show",qV.fromData(t,"tooltip:show",QI({items:n,title:r},e)));var a=this.getTooltipCfg(),o=a.follow,s=a.showMarkers,l=a.showCrosshairs,c=a.showContent,u=a.marker,h=this.items,p=this.title;if(hN(p,r)&&hN(h,n)?(this.tooltip&&o&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()):(t.emit("tooltip:change",qV.fromData(t,"tooltip:change",QI({items:n,title:r},e))),(oM(c)?c(n):c)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(tN({},a,{items:this.getItemsAfterProcess(n),title:r},o?e:{})),this.tooltip.show()),s&&this.renderTooltipMarkers(n,u)),this.items=n,this.title=r,l){var d=fN(a,["crosshairs","follow"],!1);this.renderCrosshairs(d?e:i,a)}}else this.hideTooltip()}},t.prototype.hideTooltip=function(){if(this.getTooltipCfg().follow){var e=this.tooltipMarkersGroup;e&&e.hide();var t=this.xCrosshair,n=this.yCrosshair;t&&t.hide(),n&&n.hide();var r=this.tooltip;r&&r.hide(),this.view.emit("tooltip:hide",qV.fromData(this.view,"tooltip:hide",{})),this.point=null}else this.point=null},t.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},t.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},t.prototype.isTooltipLocked=function(){return this.isLocked},t.prototype.clear=function(){var e=this,t=e.tooltip,n=e.xCrosshair,r=e.yCrosshair,i=e.tooltipMarkersGroup;t&&(t.hide(),t.clear()),n&&n.clear(),r&&r.clear(),i&&i.clear(),(null==t?void 0:t.get("customContent"))&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},t.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},t.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},t.prototype.changeVisible=function(e){if(this.visible!==e){var t=this,n=t.tooltip,r=t.tooltipMarkersGroup,i=t.xCrosshair,a=t.yCrosshair;e?(n&&n.show(),r&&r.show(),i&&i.show(),a&&a.show()):(n&&n.hide(),r&&r.hide(),i&&i.hide(),a&&a.hide()),this.visible=e}},t.prototype.getTooltipItems=function(e){var t=this.findItemsFromView(this.view,e);if(t.length){for(var n=0,r=t=yM(t);n<r.length;n++)for(var i=0,a=r[n];i<a.length;i++){var o=a[i],s=o.mappingData,l=s.x,c=s.y;o.x=lM(l)?l[l.length-1]:l,o.y=lM(c)?c[c.length-1]:c}if(!1===this.getTooltipCfg().shared&&t.length>1){for(var u=t[0],h=Math.abs(e.y-u[0].y),p=0,d=t;p<d.length;p++){var f=d[p],m=Math.abs(e.y-f[0].y);m<=h&&(u=f,h=m)}t=[u]}return function(e){for(var t=[],n=function(n){var r=e[n];mM(t,(function(e){return e.color===r.color&&e.name===r.name&&e.value===r.value&&e.title===r.title}))||t.push(r)},r=0;r<e.length;r++)n(r);return t}(yM(t))}return[]},t.prototype.layout=function(){},t.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}})}},t.prototype.isCursorEntered=function(e){if(this.tooltip){var t=this.tooltip.getContainer(),n=this.tooltip.get("capture");if(t&&n){var r=t.getBoundingClientRect(),i=r.x,a=r.y,o=r.width,s=r.height;return new aG(i,a,o,s).isPointIn(e)}}return!1},t.prototype.getTooltipCfg=function(){var e=this.view,t=e.getOptions().tooltip,n=this.processCustomContent(t),r=e.getTheme(),i=fN(r,["components","tooltip"],{}),a=fN(n,"enterable",i.enterable);return oN({},i,n,{capture:!(!a&&!this.isLocked)})},t.prototype.processCustomContent=function(e){if(XM(e)||!fN(e,"customContent"))return e;var t=e.customContent;return QI(QI({},e),{customContent:function(e,n){var r=t(e,n)||"";return wM(r)?'<div class="g2-tooltip">'+r+"</div>":r}})},t.prototype.getTitle=function(e){var t=e[0].title||e[0].name;return this.title=t,t},t.prototype.renderTooltip=function(){var e=this.view.getCanvas(),t={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},n=this.getTooltipCfg(),r=new Wj(QI(QI({parent:e.get("el").parentNode,region:t},n),{visible:!1,crosshairs:null}));r.init(),this.tooltip=r},t.prototype.renderTooltipMarkers=function(e,t){for(var n=this.getTooltipMarkersGroup(),r=0,i=e;r<i.length;r++){var a=i[r],o=a.x,s=a.y,l=QI(QI({fill:a.color,symbol:"circle",shadowColor:a.color},t),{x:o,y:s});n.addShape("marker",{attrs:l})}},t.prototype.renderCrosshairs=function(e,t){var n=fN(t,["crosshairs","type"],"x");"x"===n?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,t)):"y"===n?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,t)):"xy"===n&&(this.renderXCrosshairs(e,t),this.renderYCrosshairs(e,t))},t.prototype.renderXCrosshairs=function(e,t){var n=this.getViewWithGeometry(this.view).getCoordinate();if(lG(n,e)){var r,i;if(n.isRect)n.isTransposed?(r={x:n.start.x,y:e.y},i={x:n.end.x,y:e.y}):(r={x:e.x,y:n.end.y},i={x:e.x,y:n.start.y});else{var a=cG(n,e),o=n.getCenter(),s=n.getRadius();i=Qj(o.x,o.y,s,a),r=o}var l=oN({start:r,end:i,container:this.getTooltipCrosshairsGroup()},fN(t,"crosshairs",{}),this.getCrosshairsText("x",e,t));delete l.type;var c=this.xCrosshair;c?c.update(l):(c=new aj(l)).init(),c.render(),c.show(),this.xCrosshair=c}},t.prototype.renderYCrosshairs=function(e,t){var n=this.getViewWithGeometry(this.view).getCoordinate();if(lG(n,e)){var r,i;if(n.isRect){var a=void 0,o=void 0;n.isTransposed?(a={x:e.x,y:n.end.y},o={x:e.x,y:n.start.y}):(a={x:n.start.x,y:e.y},o={x:n.end.x,y:e.y}),r={start:a,end:o},i="Line"}else r={center:n.getCenter(),radius:sG(n,e),startAngle:n.startAngle,endAngle:n.endAngle},i="Circle";delete(r=oN({container:this.getTooltipCrosshairsGroup()},r,fN(t,"crosshairs",{}),this.getCrosshairsText("y",e,t))).type;var s=this.yCrosshair;s?n.isRect&&"circle"===s.get("type")||!n.isRect&&"line"===s.get("type")?(s=new cj[i](r)).init():s.update(r):(s=new cj[i](r)).init(),s.render(),s.show(),this.yCrosshair=s}},t.prototype.getCrosshairsText=function(e,t,n){var r=fN(n,["crosshairs","text"]),i=fN(n,["crosshairs","follow"]),a=this.items;if(r){var o=this.getViewWithGeometry(this.view),s=a[0],l=o.getXScale(),c=o.getYScales()[0],u=void 0,h=void 0;if(i){var p=this.view.getCoordinate().invert(t);u=l.invert(p.x),h=c.invert(p.y)}else u=s.data[l.field],h=s.data[c.field];var d="x"===e?u:h;return oM(r)?r=r(e,d,a,t):r.content=d,{text:r}}},t.prototype.getGuideGroup=function(){if(!this.guideGroup){var e=this.view.foregroundGroup;this.guideGroup=e.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},t.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):((e=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"})).toFront(),this.tooltipMarkersGroup=e),e},t.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||((e=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1})).toBack(),this.tooltipCrosshairsGroup=e),e},t.prototype.findItemsFromView=function(e,t){if(!1===e.getOptions().tooltip)return[];for(var n=jV(e,t,this.getTooltipCfg()),r=0,i=e.views;r<i.length;r++){var a=i[r];n=n.concat(this.findItemsFromView(a,t))}return n},t.prototype.getViewWithGeometry=function(e){var t=this;return e.geometries.length?e:mM(e.views,(function(e){return t.getViewWithGeometry(e)}))},t.prototype.getItemsAfterProcess=function(e){var t=this.getTooltipCfg().customItems;return(t||function(e){return e})(e)},t}(nY),iY={};function aY(e){return iY[e.toLowerCase()]}function oY(e,t){iY[e.toLowerCase()]=t}var sY={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},lY={interval:function(e){return{enter:{animation:e.isRect?e.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:e.isPolar&&e.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},cY={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(e){var t;return e.isRect?t=e.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",e.isPolar&&e.isTransposed&&(t="wave-in")),{animation:t}},schema:function(e){return{animation:e.isRect?e.isTransposed?"grow-in-x":"grow-in-y":"grow-in-xy"}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function uY(e,t,n){var r=lY[e];return r&&(oM(r)&&(r=r(t)),r=oN({},sY,r),n)?r[n]:r}function hY(e,t,n){var r=fN(e.get("origin"),"data","_origin"),i=t.animation,a=function(e,t){return{delay:oM(e.delay)?e.delay(t):e.delay,easing:oM(e.easing)?e.easing(t):e.easing,duration:oM(e.duration)?e.duration(t):e.duration,callback:e.callback,repeat:e.repeat}}(t,r);if(i){var o=aY(i);o&&o(e,a,n)}else e.animate(n.toAttrs,a)}var pY=function(e){function t(t){var n=e.call(this,t)||this;n.states=[];var r=t.shapeFactory,i=t.container,a=t.offscreenGroup,o=t.elementIndex,s=t.visible,l=void 0===s||s;return n.shapeFactory=r,n.container=i,n.offscreenGroup=a,n.visible=l,n.elementIndex=o,n}return KI(t,e),t.prototype.draw=function(e,t){void 0===t&&(t=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,t),!1===this.visible&&this.changeVisible(!1)},t.prototype.update=function(e){var t=this.shapeFactory,n=this.shape;if(n){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(n,e);var r=this.getOffscreenGroup(),i=t.drawShape(this.shapeType,e,r);i.cfg.data=this.data,i.cfg.origin=e,i.cfg.element=this,this.syncShapeStyle(n,i,this.getStates(),this.getAnimateCfg("update"))}},t.prototype.destroy=function(){var t=this.shapeFactory,n=this.shape;if(n){var r=this.getAnimateCfg("leave");r?hY(n,r,{coordinate:t.coordinate,toAttrs:QI({},n.attr())}):n.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach((function(e){e.show()}))):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach((function(e){e.hide()})))},t.prototype.setState=function(e,t){var n=this,r=n.states,i=n.shapeFactory,a=n.model,o=n.shape,s=n.shapeType,l=r.indexOf(e);if(t){if(l>-1)return;r.push(e),"active"!==e&&"selected"!==e||null==o||o.toFront()}else{if(-1===l)return;r.splice(l,1),"active"!==e&&"selected"!==e||(this.geometry.zIndexReversed?o.setZIndex(this.geometry.elements.length-this.elementIndex):o.setZIndex(this.elementIndex))}var c=i.drawShape(s,a,this.getOffscreenGroup());r.length?this.syncShapeStyle(o,c,r,null):this.syncShapeStyle(o,c,["reset"],null),c.remove(!0);var u={state:e,stateStatus:t,element:this,target:this.container};this.container.emit("statechange",u),tH(this.shape,"statechange",u)},t.prototype.clearStates=function(){var e=this;uM(this.states,(function(t){e.setState(t,!1)})),this.states=[]},t.prototype.hasState=function(e){return this.states.includes(e)},t.prototype.getStates=function(){return this.states},t.prototype.getData=function(){return this.data},t.prototype.getModel=function(){return this.model},t.prototype.getBBox=function(){var e=this.shape,t=this.labelShape,n={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return e&&(n=e.getCanvasBBox()),t&&t.forEach((function(e){var t=e.getCanvasBBox();n.x=Math.min(t.x,n.x),n.y=Math.min(t.y,n.y),n.minX=Math.min(t.minX,n.minX),n.minY=Math.min(t.minY,n.minY),n.maxX=Math.max(t.maxX,n.maxX),n.maxY=Math.max(t.maxY,n.maxY)})),n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n},t.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,t=e.shapeType,n=e.geometry,r=e.shapeFactory,i=n.stateOption,a=r.defaultShapeType,o=r.theme[t]||r.theme[a];this.statesStyle=oN({},o,i)}return this.statesStyle},t.prototype.getStateStyle=function(e,t){var n=this.getStatesStyle(),r=fN(n,[e,"style"],{}),i=r[t]||r;return oM(i)?i(this):i},t.prototype.getAnimateCfg=function(e){var t=this,n=this.animate;if(n){var r=n[e];return r?QI(QI({},r),{callback:function(){var e;oM(r.callback)&&r.callback(),null===(e=t.geometry)||void 0===e||e.emit(FN.AFTER_DRAW_ANIMATE)}}):r}return null},t.prototype.drawShape=function(e,t){var n;void 0===t&&(t=!1);var r=this,i=r.shapeFactory,a=r.container,o=r.shapeType;if(this.shape=i.drawShape(o,e,a),this.shape){this.setShapeInfo(this.shape,e);var s=this.shape.cfg.name;s?wM(s)&&(this.shape.cfg.name=["element",s]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var l=t?"enter":"appear",c=this.getAnimateCfg(l);c&&(null===(n=this.geometry)||void 0===n||n.emit(FN.BEFORE_DRAW_ANIMATE),hY(this.shape,c,{coordinate:i.coordinate,toAttrs:QI({},this.shape.attr())}))}},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.setShapeInfo=function(e,t){var n=this;(e.cfg.origin=t,e.cfg.element=this,e.isGroup())&&e.get("children").forEach((function(e){n.setShapeInfo(e,t)}))},t.prototype.syncShapeStyle=function(e,t,n,r,i){var a,o=this;if(void 0===n&&(n=[]),void 0===i&&(i=0),e&&t){var s=e.get("clipShape"),l=t.get("clipShape");if(this.syncShapeStyle(s,l,n,r),e.isGroup())for(var c=e.get("children"),u=t.get("children"),h=0;h<c.length;h++)this.syncShapeStyle(c[h],u[h],n,r,i+h);else{if(!cN(n)&&!hN(n,["reset"])){var p=e.get("name");lM(p)&&(p=p[1]),uM(n,(function(e){if("element-background"!==t.get("name")){var n=o.getStateStyle(e,p||i);t.attr(n)}}))}var d=tG(e,t);this.animate?r?(null===(a=this.geometry)||void 0===a||a.emit(FN.BEFORE_DRAW_ANIMATE),hY(e,r,{coordinate:this.shapeFactory.coordinate,toAttrs:d,shapeModel:this.model})):cN(n)?e.attr(d):(e.stopAnimate(),e.animate(d,{duration:300})):e.attr(d)}}},t.prototype.getShapeType=function(e){var t=fN(e,"shape");return lM(t)?t[0]:t},t}(aP),dY={},fY={};function mY(e,t){dY[e.toLowerCase()]=t}function gY(e,t){fY[e.toLowerCase()]=t}var yY={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(e,t){var n=this.getShape(e);return n.getPoints?n.getPoints(t):this.getDefaultPoints(t)},getShape:function(e){var t=this[e]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(e){return fN(e,[this.defaultShapeType,"default","style"],{})},getMarker:function(e,t){var n=this.getShape(e);if(!n.getMarker){var r=this.defaultShapeType;n=this.getShape(r)}var i=this.theme,a=fN(i,[e,"default"],{}),o=n.getMarker(t);return oN({},a,o)},drawShape:function(e,t,n){return this.getShape(e).draw(t,n)}},vY={coordinate:null,parsePath:function(e){var t=this.coordinate,n=PR(e);return n=t.isPolar?BG(t,n):function(e,t){var n=[];return uM(t,(function(t){switch(t[0].toLowerCase()){case"m":case"l":case"c":n.push(PG(t,e));break;case"a":n.push(FG(t,e));break;case"z":default:n.push(t)}})),n}(t,n)},parsePoint:function(e){return this.coordinate.convert(e)},parsePoints:function(e){var t=this.coordinate;return e.map((function(e){return t.convert(e)}))},draw:function(e,t){}},EY={};function xY(e,t){var n=qM(e),r=QI(QI(QI({},yY),t),{geometryType:e});return EY[n]=r,r}function bY(e,t,n){var r=qM(e),i=EY[r],a=QI(QI({},vY),n);return i[t]=a,a}function CY(e){var t=qM(e);return EY[t]}function SY(e,t){return IM(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],(function(n){return!hN(e[n],t[n])}))}function wY(e){return lM(e)?e:e.split("*")}function TY(e,t){for(var n=[],r=[],i=[],a=new Map,o=0;o<t.length;o++){var s=t[o];e[s]?r.push(s):n.push(s),a.set(s,!0)}return Object.keys(e).forEach((function(e){a.has(e)||i.push(e)})),{added:n,updated:r,removed:i}}var kY=function(e){function t(t){var n=e.call(this,t)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var r=t.container,i=t.labelsContainer,a=t.coordinate,o=t.data,s=t.sortable,l=void 0!==s&&s,c=t.visible,u=void 0===c||c,h=t.theme,p=t.scales,d=void 0===p?{}:p,f=t.scaleDefs,m=void 0===f?{}:f,g=t.intervalPadding,y=t.dodgePadding,v=t.maxColumnWidth,E=t.minColumnWidth,x=t.columnWidthRatio,b=t.roseWidthRatio,C=t.multiplePieWidthRatio,S=t.zIndexReversed;return n.container=r,n.labelsContainer=i,n.coordinate=a,n.data=o,n.sortable=l,n.visible=u,n.userTheme=h,n.scales=d,n.scaleDefs=m,n.intervalPadding=g,n.dodgePadding=y,n.maxColumnWidth=v,n.minColumnWidth=E,n.columnWidthRatio=x,n.roseWidthRatio=b,n.multiplePieWidthRatio=C,n.zIndexReversed=S,n}return KI(t,e),t.prototype.position=function(e){var t=e;fM(e)||(t={fields:wY(e)});var n=fN(t,"fields");return 1===n.length&&(n.unshift("1"),mN(t,"fields",n)),mN(this.attributeOption,"position",t),this},t.prototype.color=function(e,t){return this.createAttrOption("color",e,t),this},t.prototype.shape=function(e,t){return this.createAttrOption("shape",e,t),this},t.prototype.size=function(e,t){return this.createAttrOption("size",e,t),this},t.prototype.adjust=function(e){var t=e;return(wM(e)||fM(e))&&(t=[e]),uM(t,(function(e,n){cM(e)||(t[n]={type:e})})),this.adjustOption=t,this},t.prototype.style=function(e,t){if(wM(e)){var n=wY(e);this.styleOption={fields:n,callback:t}}else{var r=e,i=(n=r.fields,r.callback),a=r.cfg;this.styleOption=n||i||a?e:{cfg:e}}return this},t.prototype.tooltip=function(e,t){if(wM(e)){var n=wY(e);this.tooltipOption={fields:n,callback:t}}else this.tooltipOption=e;return this},t.prototype.animate=function(e){return this.animateOption=e,this},t.prototype.label=function(e,t,n){if(wM(e)){var r={},i=wY(e);r.fields=i,oM(t)?r.callback=t:fM(t)&&(r.cfg=t),n&&(r.cfg=n),this.labelOption=r}else this.labelOption=e;return this},t.prototype.state=function(e){return this.stateOption=e,this},t.prototype.customInfo=function(e){return this.customOption=e,this},t.prototype.init=function(e){void 0===e&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},t.prototype.update=function(e){void 0===e&&(e={});var t=e.data,n=e.isDataChanged,r=e.isCoordinateChanged,i=this.attributeOption,a=this.lastAttributeOption;hN(i,a)?!t||!n&&hN(t,this.data)?this.setCfg(e):(this.setCfg(e),this.initAttributes(),this.processData(t)):this.init(e),this.adjustScale(),this.isCoordinateChanged=r},t.prototype.paint=function(e){void 0===e&&(e=!1),this.animateOption&&(this.animateOption=oN({},uY(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[],this.getOffscreenGroup().clear();var t=this.beforeMappingData,n=this.beforeMapping(t);this.dataArray=new Array(n.length);for(var r=0;r<n.length;r++){var i=n[r];this.dataArray[r]=this.mapping(i)}if(this.updateElements(this.dataArray,e),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(e)){var a=this.container,o=this.type,s=this.coordinate,l=fN(this.animateOption,"appear"),c=this.getYScale(),u=s.convert({x:0,y:c.scale(this.getYMinValue())});!function(e,t,n,r,i){if(cY[n]){var a=cY[n](r),o=aY(fN(a,"animation",""));if(o){var s=QI(QI(QI({},sY.appear),a),t);e.stopAnimate(),o(e,s,{coordinate:r,minYPoint:i,toAttrs:null})}}}(a,l,o,s,u)}this.labelOption&&this.renderLabels(yM(this.dataArray),e),this.lastAttributeOption=QI({},this.attributeOption),!1===this.visible&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this,t=e.container,n=e.geometryLabel,r=e.offscreenGroup;t&&t.clear(),n&&n.clear(),r&&r.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},t.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,e.prototype.destroy.call(this)},t.prototype.getGroupScales=function(){return this.groupScales},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},t.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},t.prototype.getGroupAttributes=function(){var e=[];return uM(this.attributes,(function(t){qN.includes(t.type)&&e.push(t)})),e},t.prototype.getDefaultValue=function(e){var t,n=this.getAttribute(e);return n&&cN(n.scales)&&(t=n.values[0]),t},t.prototype.getAttributeValues=function(e,t){for(var n=[],r=e.scales,i=0,a=r.length;i<a;i++){var o=r[i],s=o.field;o.isIdentity?n.push(o.values):n.push(t[s])}return e.mapping.apply(e,n)},t.prototype.getAdjust=function(e){return this.adjusts[e]},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.getData=function(){return this.data},t.prototype.getShapeMarker=function(e,t){return this.getShapeFactory().getMarker(e,t)},t.prototype.getElementsBy=function(e){return this.elements.filter((function(t){return e(t)}))},t.prototype.getElements=function(){return this.elements},t.prototype.getElementId=function(e){var t=(e=lM(e)?e[0]:e)._origin;if(this.idFields.length){for(var n=t[this.idFields[0]],r=1;r<this.idFields.length;r++)n+="-"+t[this.idFields[r]];return n}var i,a,o=this.type,s=this.getXScale(),l=this.getYScale(),c=s.field||"x",u=t[l.field||"y"];i="identity"===s.type?s.values[0]:t[c],a="interval"===o||"schema"===o?"".concat(i):"line"===o||"area"===o||"path"===o?o:"".concat(i,"-").concat(u);var h=this.groupScales;cN(h)&&(h=fN(this.getAttribute("color"),"scales",[]));r=0;for(var p=h.length;r<p;r++){var d=h[r].field;a="".concat(a,"-").concat(t[d])}var f=this.getAdjust("dodge");if(f){var m=f.dodgeBy;m&&(a="".concat(a,"-").concat(t[m]))}return this.getAdjust("jitter")&&(a="".concat(a,"-").concat(e.x,"-").concat(e.y)),a},t.prototype.getScaleFields=function(){var e=[],t=new Map,n=this,r=n.attributeOption,i=n.labelOption,a=n.tooltipOption;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s.fields?iG(s.fields,e,t):s.values&&iG(s.values,e,t)}return i&&i.fields&&iG(i.fields,e,t),cM(a)&&a.fields&&iG(a.fields,e,t),e},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.elements,r=0,i=n.length;r<i;r++){n[r].changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},t.prototype.getFields=function(){var e=new Map,t=[];return Object.values(this.attributeOption).forEach((function(n){((null==n?void 0:n.fields)||[]).forEach((function(n){e.has(n)||t.push(n),e.set(n,!0)}))}),[]),t},t.prototype.getGroupFields=function(){for(var e=[],t=new Map,n=0,r=qN.length;n<r;n++){var i=qN[n],a=this.attributeOption[i];a&&a.fields&&iG(a.fields,e,t)}return e},t.prototype.getXYFields=function(){var e=this.attributeOption.position.fields;return[e[0],e[1]]},t.prototype.getXField=function(){return fN(this.getXYFields(),[0])},t.prototype.getYField=function(){return fN(this.getXYFields(),[1])},t.prototype.getShapes=function(){return this.elements.map((function(e){return e.shape}))},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.sort=function(e){if(!this.hasSorted)for(var t=this.getXScale(),n=t.field,r=0;r<e.length;r++){e[r].sort((function(e,r){return t.translate(e._origin[n])-t.translate(r._origin[n])}))}this.hasSorted=!0},t.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust("stack")&&this.updateStackRange(e,this.beforeMappingData)},t.prototype.getShapeFactory=function(){var e=this.shapeType;if(CY(e))return this.shapeFactory||(this.shapeFactory=nN(CY(e))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},t.prototype.createShapePointsCfg=function(e){var t=this.getXScale(),n=this.getYScale();return{x:this.normalizeValues(e[t.field],t),y:n?this.normalizeValues(e[n.field],n):e.y?e.y:.1,y0:n?n.scale(this.getYMinValue()):void 0}},t.prototype.createElement=function(e,t,n){void 0===n&&(n=!1);var r=this.container,i=this.getDrawCfg(e),a=this.getShapeFactory(),o=new pY({shapeFactory:a,container:r,offscreenGroup:this.getOffscreenGroup(),elementIndex:t});return o.animate=this.animateOption,o.geometry=this,o.draw(i,n),o},t.prototype.getDrawCfg=function(e){var t=e._origin,n={mappingData:e,data:t,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},r=e.shape;!r&&this.getShapeFactory()&&(r=this.getShapeFactory().defaultShapeType),n.shape=r;var i=this.theme.geometries[this.shapeType];n.defaultStyle=fN(i,[r,"default"],{}).style,!n.defaultStyle&&this.getShapeFactory()&&(n.defaultStyle=this.getShapeFactory().getDefaultStyle(i));var a=this.styleOption;return a&&(n.style=this.getStyleCfg(a,t)),this.generatePoints&&(n.points=e.points,n.nextPoints=e.nextPoints),n},t.prototype.updateElements=function(e,t){void 0===t&&(t=!1);for(var n=new Map,r=[],i=new Map,a=0,o=0;o<e.length;o++)for(var s=e[o],l=0;l<s.length;l++){var c=s[l],u=this.getElementId(c),h=n.has(u)?"".concat(u,"-").concat(o,"-").concat(l):u;r.push(h),n.set(h,c),i.set(h,a),a++}this.elements=new Array(a);for(var p=TY(this.lastElementsMap,r),d=p.added,f=p.updated,m=p.removed,g=0,y=d;g<y.length;g++){u=y[g],c=n.get(u),o=i.get(u);var v=this.createElement(c,o,t);this.elements[o]=v,this.elementsMap[u]=v,v.shape&&v.shape.setZIndex(this.zIndexReversed?this.elements.length-o:o)}for(var E=0,x=f;E<x.length;E++){u=x[E],v=this.lastElementsMap[u],c=n.get(u);var b=this.getDrawCfg(c),C=v.getModel();o=i.get(u);(this.isCoordinateChanged||SY(b,C))&&(v.animate=this.animateOption,v.update(b)),this.elements[o]=v,this.elementsMap[u]=v,v.shape&&v.shape.setZIndex(this.zIndexReversed?this.elements.length-o:o)}for(var S=0,w=m;S<w.length;S++){u=w[S];(v=this.lastElementsMap[u]).animate=this.animateOption,v.destroy()}},t.prototype.getLabelType=function(){var e=this,t=e.labelOption,n=e.coordinate,r=e.type,i=n.type,a=n.isTransposed,o=fN(t,["cfg","type"]);return o||(o="polar"===i?a?"pie":"polar":"theta"===i?"pie":"interval"===r||"polygon"===r?"interval":"base"),o},t.prototype.getYMinValue=function(){var e=this.getYScale(),t=e.min,n=e.max;return t>=0?t:n<=0?n:0},t.prototype.createAttrOption=function(e,t,n){if(sM(t)||cM(t))cM(t)&&hN(Object.keys(t),["values"])?mN(this.attributeOption,e,{fields:t.values}):mN(this.attributeOption,e,t);else{var r={};RM(t)?r.values=[t]:r.fields=wY(t),n&&(oM(n)?r.callback=n:r.values=n),mN(this.attributeOption,e,r)}},t.prototype.initAttributes=function(){var e=this,t=this,n=t.attributes,r=t.attributeOption,i=t.theme,a=t.shapeType;this.groupScales=[];var o={},s=function(t){if(r.hasOwnProperty(t)){var s=r[t];if(!s)return{value:void 0};var l=QI({},s),c=l.callback,u=l.values,h=l.fields,p=(void 0===h?[]:h).map((function(n){var r=e.scales[n];return r.isCategory&&!o[n]&&qN.includes(t)&&(e.groupScales.push(r),o[n]=!0),r}));l.scales=p,"position"!==t&&1===p.length&&"identity"===p[0].type?l.values=p[0].values:c||u||("size"===t?l.values=i.sizes:"shape"===t?l.values=i.shapes[a]||[]:"color"===t&&(p.length?l.values=p[0].values.length<=10?i.colors10:i.colors20:l.values=i.colors10));var d=t$(t);n[t]=new d(l)}};for(var l in r){var c=s(l);if("object"==typeof c)return c.value}},t.prototype.processData=function(e){this.hasSorted=!1;for(var t=this.getAttribute("position").scales.filter((function(e){return e.isCategory})),n=this.groupData(e),r=[],i=0,a=n.length;i<a;i++){for(var o=n[i],s=[],l=0,c=o.length;l<c;l++){var u=o[l],h={};for(var p in u)h[p]=u[p];h._origin=u;for(var d=0,f=t;d<f.length;d++){var m=f[d],g=m.field;h[g]=m.translate(h[g])}s.push(h)}r.push(s)}var y=this.adjustData(r);return this.beforeMappingData=y,y},t.prototype.adjustData=function(e){var t=this.adjustOption,n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.theme,o=this.maxColumnWidth||a.maxColumnWidth,s=this.minColumnWidth||a.minColumnWidth,l=this.columnWidthRatio||a.columnWidthRatio,c=e;if(t){var u=this.getXScale(),h=this.getYScale(),p=u.field,d=h?h.field:null,f=oG(this.coordinate),m=u.values.length,g=this.getAttribute("size"),y=void 0;g&&(y=g.values[0]);for(var v=0,E=t.length;v<E;v++){var x=t[v],b=QI({xField:p,yField:d,intervalPadding:r,dodgePadding:i,xDimensionLength:f,groupNum:m,defaultSize:y,maxColumnWidth:o,minColumnWidth:s,columnWidthRatio:l},x),C=x.type;if("dodge"===C){var S=[];if(u.isCategory||"identity"===u.type)S.push("x");else{if(h)throw new Error("dodge is not support linear attribute, please use category attribute!");S.push("y")}b.adjustNames=S,b.dodgeRatio=l}else if("stack"===C){var w=this.coordinate;if(!h){b.height=w.getHeight();var T=this.getDefaultValue("size")||3;b.size=T}!w.isTransposed&&sM(b.reverseOrder)&&(b.reverseOrder=!0)}var k=new(eD(C))(b);c=k.process(c),this.adjusts[C]=k}}return c},t.prototype.groupData=function(e){for(var t=this.getGroupScales(),n=this.scaleDefs,r={},i=[],a=0;a<t.length;a++){var o=t[a].field;i.push(o),fN(n,[o,"values"])&&(r[o]=n[o].values)}return function(e,t,n){if(void 0===n&&(n={}),!t)return[e];var r=PM(e,t),i=[];if(1===t.length&&n[t[0]])for(var a=0,o=n[t[0]];a<o.length;a++){var s=o[a],l=r["_".concat(s)];l&&i.push(l)}else for(var c in r)if(r.hasOwnProperty(c)){var u=r[c];i.push(u)}return i}(e,i,r)},t.prototype.updateStackRange=function(e,t){for(var n=yM(t),r=e.field,i=e.min,a=e.max,o=0;o<n.length;o++){var s=n[o],l=Math.min.apply(null,s[r]),c=Math.max.apply(null,s[r]);l<i&&(i=l),c>a&&(a=c)}var u=this.scaleDefs,h={};i<e.min&&!fN(u,[r,"min"])&&(h.min=i),a>e.max&&!fN(u,[r,"max"])&&(h.max=a),e.change(h)},t.prototype.beforeMapping=function(e){var t=e;if(this.sortable&&this.sort(t),this.generatePoints)for(var n=0,r=t.length;n<r;n++){var i=t[n];this.generateShapePoints(i);var a=t[n+1];a&&(this.generateShapePoints(a),i[0].nextPoints=a[0].points)}return t},t.prototype.generateShapePoints=function(e){for(var t=this.getShapeFactory(),n=this.getAttribute("shape"),r=0;r<e.length;r++){var i=e[r],a=this.createShapePointsCfg(i),o=n?this.getAttributeValues(n,i):null,s=t.getShapePoints(o,a);i.points=s}},t.prototype.normalizeValues=function(e,t){var n=[];if(lM(e))for(var r=0;r<e.length;r++){var i=e[r];n.push(t.scale(i))}else n=t.scale(e);return n},t.prototype.mapping=function(e){for(var t=this.attributes,n=[],r=0;r<e.length;r++){var i=e[r],a={_origin:i._origin,points:i.points,nextPoints:i.nextPoints};for(var o in t)if(t.hasOwnProperty(o)){var s=t[o],l=s.names,c=this.getAttributeValues(s,i);if(l.length>1)for(var u=0;u<c.length;u+=1){var h=c[u];a[l[u]]=lM(h)&&1===h.length?h[0]:h}else a[l[0]]=1===c.length?c[0]:c}this.convertPoint(a),n.push(a)}return n},t.prototype.convertPoint=function(e){var t,n,r,i=e.x,a=e.y,o=this.coordinate;if(lM(i)&&lM(a)){t=[],n=[];for(var s=0,l=0,c=i.length,u=a.length;s<c&&l<u;s+=1,l+=1)r=o.convert({x:i[s],y:a[l]}),t.push(r.x),n.push(r.y)}else if(lM(a)){n=[];for(var h=0;h<a.length;h++){var p=a[h];r=o.convert({x:i,y:p}),t&&t!==r.x?(lM(t)||(t=[t]),t.push(r.x)):t=r.x,n.push(r.y)}}else if(lM(i)){t=[];for(h=0;h<i.length;h++){var d=i[h];r=o.convert({x:d,y:a}),n&&n!==r.y?(lM(n)||(n=[n]),n.push(r.y)):n=r.y,t.push(r.x)}}else{var f=o.convert({x:i,y:a});t=f.x,n=f.y}e.x=t,e.y=n},t.prototype.getStyleCfg=function(e,t){var n=e.fields,r=void 0===n?[]:n,i=e.callback,a=e.cfg;if(a)return a;var o=r.map((function(e){return t[e]}));return i.apply(void 0,o)},t.prototype.setCfg=function(e){var t=this,n=e.coordinate,r=e.data,i=e.theme,a=e.scaleDefs;n&&(this.coordinate=n),r&&(this.data=r),a&&(this.scaleDefs=a,this.idFields=[],uM(a,(function(e,n){e&&e.key&&t.idFields.push(n)}))),i&&(this.theme=this.userTheme?oN({},i,this.userTheme):i)},t.prototype.renderLabels=function(e,t){void 0===t&&(t=!1);var n=this.geometryLabel;if(!n){var r=this.getLabelType();n=new(0,dY[r.toLowerCase()])(this),this.geometryLabel=n}n.render(e,t);var i=n.labelsRenderer.shapesMap;uM(this.elementsMap,(function(e,t){var n=function(e,t){var n=[];return uM(t,(function(t,r){r.split(" ")[0]===e&&n.push(t)})),n}(t,i);if(n.length){e.labelShape=n;for(var r=0;r<n.length;r++)for(var a=n[r].getChildren(),o=0;o<a.length;o++){var s=a[o];s.cfg.name=["element","label"],s.cfg.element=e}}}))},t.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(void 0===fN(this.animateOption,"appear")||fN(this.animateOption,"appear")&&void 0===fN(this.animateOption,["appear","animation"]))},t}(aP),_Y=xF;function OY(e,t,n){var r=_Y(e.getMatrix(),[["t",t,n]]);e.setMatrix(r)}function AY(e,t){var n=function(e,t){var n=e.attr(),r=n.x,i=n.y;return _Y(e.getMatrix(),[["t",-r,-i],["r",t],["t",r,i]])}(e,t);e.setMatrix(n)}function IY(e){return e.find((function(e){return"text"===e.get("type")}))}function MY(e,t,n){void 0===n&&(n=[0,0,0,0]);var r=e.getChildren()[0];if(r){var i=r.clone();(null==t?void 0:t.rotate)&&AY(i,-t.rotate);var a=i.getCanvasBBox(),o=a.x,s=a.y,l=a.width,c=a.height;i.destroy();var u=n;return sM(u)?u=[2,2,2,2]:RM(u)&&(u=new Array(4).fill(u)),{x:o-u[3],y:s-u[0],width:l+u[1]+u[3],height:c+u[0]+u[2],rotation:(null==t?void 0:t.rotate)||0}}}function NY(e,t){var n=e.getBBox();return IM(t,(function(e){var t,r,i,a=e.getBBox();return t=n,r=a,void 0===(i=2)&&(i=0),Math.max(0,Math.min(t.x+t.width+i,r.x+r.width+i)-Math.max(t.x-i,r.x-i))*Math.max(0,Math.min(t.y+t.height+i,r.y+r.height+i)-Math.max(t.y-i,r.y-i))>0}))}function PY(e,t,n){var r=n.data,i=n.origin,a=n.animateCfg,o=n.coordinate,s=fN(a,"update");e.set("data",r),e.set("origin",i),e.set("animateCfg",a),e.set("coordinate",o),e.set("visible",t.get("visible")),e.getChildren().forEach((function(l,c){var u=t.getChildByIndex(c);if(u){l.set("data",r),l.set("origin",i),l.set("animateCfg",a),l.set("coordinate",o);var h=tG(l,u);s?hY(l,s,{toAttrs:h,coordinate:o}):l.attr(h),u.isGroup()&&PY(l,u,n)}else e.removeChild(l),l.remove(!0)})),uM(t.getChildren(),(function(t,n){n>=e.getCount()&&(t.destroyed||e.add(t))}))}var FY=function(){function e(e){this.shapesMap={},this.lastShapesMap={};var t=e.layout,n=e.container;this.layout=t,this.container=n}return e.prototype.render=function(e,t,n){var r=this;void 0===n&&(n=!1),this.shapesMap={};var i=this.container,a=this.createOffscreenGroup();if(e.length){for(var o=0,s=e;o<s.length;o++){var l=s[o];l&&this.renderLabel(l,a)}this.doLayout(e,t),this.renderLabelLine(e),this.renderLabelBackground(e),this.adjustLabel(e)}var c=this.lastShapesMap,u=this.shapesMap;uM(u,(function(e,t){if(e.destroyed)delete u[t];else{if(c[t]){var a=e.get("data"),o=e.get("origin"),s=e.get("coordinate"),l=e.get("animateCfg"),h=c[t];PY(h,u[t],{data:a,origin:o,animateCfg:l,coordinate:s}),r.shapesMap[t]=h}else{i.add(e);var p=fN(e.get("animateCfg"),n?"enter":"appear");p&&hY(e,p,{toAttrs:QI({},e.attr()),coordinate:e.get("coordinate")})}delete c[t]}})),uM(c,(function(e){var t=fN(e.get("animateCfg"),"leave");t?hY(e,t,{toAttrs:null,coordinate:e.get("coordinate")}):e.remove(!0)})),this.lastShapesMap=u,a.destroy()},e.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},e.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},e.prototype.renderLabel=function(e,t){var n,r,i=e.id,a=e.elementId,o=e.data,s=e.mappingData,l=e.coordinate,c=e.animate,u=e.content,h={id:i,elementId:a,data:o,origin:QI(QI({},s),{data:s._origin}),coordinate:l},p=t.addGroup(QI({name:"label",animateCfg:!1!==this.animate&&null!==c&&!1!==c&&oN({},this.animate,c)},h));if(u.isGroup&&u.isGroup()||u.isShape&&u.isShape()){var d=u.getCanvasBBox(),f=d.width,m=d.height,g=fN(e,"textAlign","left"),y=e.x;"center"===g?y-=f/2:"right"!==g&&"end"!==g||(y-=f),OY(u,y,e.y-m/2),n=u,p.add(u)}else{var v=fN(e,["style","fill"]);n=p.addShape("text",QI({attrs:QI(QI({x:e.x,y:e.y,textAlign:e.textAlign,textBaseline:fN(e,"textBaseline","middle"),text:e.content},e.style),{fill:(r=v,null===r?e.color:v)})},h))}e.rotate&&AY(n,e.rotate),this.shapesMap[i]=p},e.prototype.doLayout=function(e,t){var n=this;this.layout&&uM(lM(this.layout)?this.layout:[this.layout],(function(r){var i,a=(i=fN(r,"type",""),fY[i.toLowerCase()]);if(a){var o=[],s=[];uM(n.shapesMap,(function(e,n){o.push(e),s.push(t[e.get("elementId")])})),a(e,o,s,n.region,r.cfg)}}))},e.prototype.renderLabelLine=function(e){var t=this;uM(e,(function(e){var n=fN(e,"coordinate");if(e&&n){var r=n.getCenter(),i=n.getRadius();if(e.labelLine){var a=fN(e,"labelLine",{}),o=e.id,s=a.path;if(!s){var l=Qj(r.x,r.y,i,e.angle);s=[["M",l.x,l.y],["L",e.x,e.y]]}var c=t.shapesMap[o];c.destroyed||c.addShape("path",{capture:!1,attrs:QI({path:s,stroke:e.color?e.color:fN(e,["style","fill"],"#000"),fill:null},a.style),id:o,origin:e.mappingData,data:e.data,coordinate:e.coordinate})}}}))},e.prototype.renderLabelBackground=function(e){var t=this;uM(e,(function(e){var n=fN(e,"coordinate"),r=fN(e,"background");if(r&&n){var i=e.id,a=t.shapesMap[i];if(!a.destroyed){var o=a.getChildren()[0];if(o){var s=MY(a,e,r.padding),l=s.rotation,c=ZI(s,["rotation"]),u=a.addShape("rect",{attrs:QI(QI({},c),r.style||{}),id:i,origin:e.mappingData,data:e.data,coordinate:e.coordinate});if(u.setZIndex(-1),l){var h=o.getMatrix();u.setMatrix(h)}}}}}))},e.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},e.prototype.adjustLabel=function(e){var t=this;uM(e,(function(e){if(e){var n=e.id,r=t.shapesMap[n];if(!r.destroyed)uM(r.findAll((function(e){return"path"!==e.get("type")})),(function(t){t&&(e.offsetX&&t.attr("x",t.attr("x")+e.offsetX),e.offsetY&&t.attr("y",t.attr("y")+e.offsetY))}))}}))},e}();function LY(e){var t=0;return uM(e,(function(e){t+=e})),t/e.length}var RY=function(){function e(e){this.geometry=e}return e.prototype.getLabelItems=function(e){var t=this,n=[],r=this.getLabelCfgs(e);return uM(e,(function(e,i){var a=r[i];if(!a||sM(e.x)||sM(e.y))n.push(null);else{var o=lM(a.content)?a.content:[a.content];a.content=o;var s=o.length;uM(o,(function(r,i){if(sM(r)||""===r)n.push(null);else{var o=QI(QI({},a),t.getLabelPoint(a,e,i));o.textAlign||(o.textAlign=t.getLabelAlign(o,i,s)),o.offset<=0&&(o.labelLine=null),n.push(o)}}))}})),n},e.prototype.render=function(e,t){void 0===t&&(t=!1);var n=this.getLabelItems(e),r=this.getLabelsRenderer(),i=this.getGeometryShapes();r.render(n,i,t)},e.prototype.clear=function(){var e=this.labelsRenderer;e&&e.clear()},e.prototype.destroy=function(){var e=this.labelsRenderer;e&&e.destroy(),this.labelsRenderer=null},e.prototype.getCoordinate=function(){return this.geometry.coordinate},e.prototype.getDefaultLabelCfg=function(e,t){var n=this.geometry,r=n.type,i=n.theme;return"polygon"===r||"interval"===r&&"middle"===t||e<0&&!["line","point","path"].includes(r)?fN(i,"innerLabels",{}):fN(i,"labels",{})},e.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.type,i=t.theme;return"polygon"===r||e.offset<0&&!["line","point","path"].includes(r)?oN({},n,i.innerLabels,e):oN({},n,i.labels,e)},e.prototype.setLabelPosition=function(e,t,n,r){},e.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=this.getOffsetVector(e);return t.isTransposed?n[0]:n[1]},e.prototype.getLabelOffsetPoint=function(e,t,n){var r=e.offset,i=this.getCoordinate().isTransposed,a=i?"x":"y",o=i?1:-1,s={x:0,y:0};return s[a]=t>0||1===n?r*o:r*o*-1,s},e.prototype.getLabelPoint=function(e,t,n){var r=this.getCoordinate(),i=e.content.length;function a(t,n,r){void 0===r&&(r=!1);var i=t;return lM(i)&&(i=1===e.content.length?r?LY(i):i.length<=2?i[t.length-1]:LY(i):i[n]),i}var o={content:e.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},s=lM(t.shape)?t.shape[0]:t.shape,l="funnel"===s||"pyramid"===s;if("polygon"===this.geometry.type){var c=function(e,t){if(RM(e)&&RM(t))return[e,t];if(t=t,Xj(e=e)||Xj(t))return[Kj(e),Kj(t)];for(var n,r,i=-1,a=0,o=0,s=e.length-1,l=0;++i<e.length;)n=s,s=i,l+=r=e[n]*t[s]-e[s]*t[n],a+=(e[n]+e[s])*r,o+=(t[n]+t[s])*r;return[a/(l*=3),o/l]}(t.x,t.y);o.x=c[0],o.y=c[1]}else"interval"!==this.geometry.type||l?(o.x=a(t.x,n),o.y=a(t.y,n)):(o.x=a(t.x,n,!0),o.y=a(t.y,n));if(l){var u=fN(t,"nextPoints"),h=fN(t,"points");if(u){var p=r.convert(h[1]),d=r.convert(u[1]);o.x=(p.x+d.x)/2,o.y=(p.y+d.y)/2}else if("pyramid"===s){p=r.convert(h[1]),d=r.convert(h[2]);o.x=(p.x+d.x)/2,o.y=(p.y+d.y)/2}}e.position&&this.setLabelPosition(o,t,n,e.position);var f=this.getLabelOffsetPoint(e,n,i);return o.start={x:o.x,y:o.y},o.x+=f.x,o.y+=f.y,o.color=t.color,o},e.prototype.getLabelAlign=function(e,t,n){var r="center";if(this.getCoordinate().isTransposed){var i=e.offset;r=i<0?"right":0===i?"center":"left",n>1&&0===t&&("right"===r?r="left":"left"===r&&(r="right"))}return r},e.prototype.getLabelId=function(e){var t=this.geometry,n=t.type,r=t.getXScale(),i=t.getYScale(),a=e._origin,o=t.getElementId(e);return"line"===n||"area"===n?o+=" ".concat(a[r.field]):"path"===n&&(o+=" ".concat(a[r.field],"-").concat(a[i.field])),o},e.prototype.getLabelsRenderer=function(){var e=this.geometry,t=e.labelsContainer,n=e.labelOption,r=e.canvasRegion,i=e.animateOption,a=this.geometry.coordinate,o=this.labelsRenderer;return o||(o=new FY({container:t,layout:fN(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=o),o.region=r,o.animate=!!i&&uY("label",a),o},e.prototype.getLabelCfgs=function(e){var t=this,n=this.geometry,r=n.labelOption,i=n.scales,a=n.coordinate,o=r,s=o.fields,l=o.callback,c=o.cfg,u=s.map((function(e){return i[e]})),h=[];return uM(e,(function(e,n){var r,i=e._origin,o=t.getLabelText(i,u);if(l){var p=s.map((function(e){return i[e]}));if(r=l.apply(void 0,p),sM(r))return void h.push(null)}var d=QI(QI({id:t.getLabelId(e),elementId:t.geometry.getElementId(e),data:i,mappingData:e,coordinate:a},c),r);oM(d.position)&&(d.position=d.position(i,e,n));var f=t.getLabelOffset(d.offset||0),m=t.getDefaultLabelCfg(f,d.position);(d=oN({},m,d)).offset=t.getLabelOffset(d.offset||0);var g=d.content;oM(g)?d.content=g(i,e,n):ZM(g)&&(d.content=o[0]),h.push(d)})),h},e.prototype.getLabelText=function(e,t){var n=[];return uM(t,(function(t){var r=e[t.field];r=lM(r)?r.map((function(e){return t.getText(e)})):t.getText(r),sM(r)||""===r?n.push(null):n.push(r)})),n},e.prototype.getOffsetVector=function(e){void 0===e&&(e=0);var t=this.getCoordinate(),n=0;return RM(e)&&(n=e),t.isTransposed?t.applyMatrix(n,0):t.applyMatrix(0,n)},e.prototype.getGeometryShapes=function(){var e=this.geometry,t={};return uM(e.elementsMap,(function(e,n){t[n]=e.shape})),uM(e.getOffscreenGroup().getChildren(),(function(n){var r=e.getElementId(n.get("origin").mappingData);t[r]=n})),t},e}();function DY(e,t,n){if(!e)return n;var r;if(e.callback&&e.callback.length>1){var i=Array(e.callback.length-1).fill("");r=e.mapping.apply(e,eM([t],i,!1)).join("")}else r=e.mapping(t).join("");return r||n}var BY={hexagon:function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},bowtie:function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},cross:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},tick:function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},plus:function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},hyphen:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},line:function(e,t,n){return[["M",e,t-n],["L",e,t+n]]}},$Y=["line","cross","tick","plus","hyphen"];function zY(e){var t=e.symbol;wM(t)&&BY[t]&&(e.symbol=BY[t])}function HY(e){return e.startsWith(kN.LEFT)||e.startsWith(kN.RIGHT)?"vertical":"horizontal"}function jY(e,t,n,r,i){var a=n.getScale(n.type);if(a.isCategory){var o=a.field,s=t.getAttribute("color"),l=t.getAttribute("shape"),c=e.getTheme().defaultColor,u=t.coordinate.isPolar;return a.getTicks().map((function(n,h){var p,d=n.text,f=n.value,m=d,g=a.invert(f),y=0===e.filterFieldData(o,[(p={},p[o]=g,p)]).length;uM(e.views,(function(e){var t;e.filterFieldData(o,[(t={},t[o]=g,t)]).length||(y=!0)}));var v,E,x=DY(s,g,c),b=DY(l,g,"point"),C=t.getShapeMarker(b,{color:x,isInPolar:u}),S=i;return oM(S)&&(S=S(m,h,QI({name:m,value:g},oN({},r,C)))),function(e,t){var n=e.symbol;if(wM(n)&&-1!==$Y.indexOf(n)){var r=fN(e,"style",{}),i=fN(r,"lineWidth",1),a=r.stroke||r.fill||t;e.style=oN({},e.style,{lineWidth:i,stroke:a,fill:null})}}(C=oN({},r,C,rG(QI({},S),["style"])),x),S&&S.style&&(C.style=(v=C.style,E=S.style,oM(E)?E(v):oN({},v,E))),zY(C),{id:g,name:m,value:g,marker:C,unchecked:y}}))}return[]}function GY(e,t){var n=fN(e,["components","legend"],{});return oN({},fN(n,["common"],{}),oN({},fN(n,[t],{})))}function VY(e){return!e&&(null==e||isNaN(e))}function YY(e){if(lM(e))return VY(e[1].y);var t=e.y;return lM(t)?VY(t[0]):VY(t)}function UY(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!0),!e.length||1===e.length&&!n)return[];if(t){for(var r=[],i=0,a=e.length;i<a;i++){YY(l=e[i])||r.push(l)}return[r]}var o=[],s=[];for(i=0,a=e.length;i<a;i++){var l;YY(l=e[i])?s.length&&((1!==s.length||n)&&o.push(s),s=[]):s.push(l)}return s.length&&o.push(s),o}function qY(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=0===n?"M":"L";t.push([i,r.x,r.y])}}var a=e[0];return a&&(t.push(["L",a.x,a.y]),t.push(["z"])),t}function WY(e){for(var t=e.length/2,n=[],r=[],i=0;i<e.length;i++)i<t?n.push(e[i]):r.push(e[i]);var a=DG(n,!1),o=DG(r,!1);r.length&&a.push(["L",r[0].x,r[0].y]),o.shift();var s=a.concat(o);return n.length&&s.push(["L",n[0].x,n[0].y]),s.push(["z"]),s}function XY(e,t,n,r){void 0===r&&(r="");var i=e.style,a=void 0===i?{}:i,o=e.defaultStyle,s=e.color,l=e.size,c=QI(QI({},o),a);return s&&(t&&(a.stroke||(c.stroke=s)),n&&(a.fill||(c.fill=s))),r&&sM(a[r])&&!sM(l)&&(c[r]=l),c}function KY(e){return oN({},{fill:"#CCD6EC",fillOpacity:.3},fN(e,["background","style"]))}function QY(e){var t=e.x;return(lM(e.y)?e.y:[e.y]).map((function(e,n){return{x:lM(t)?t[n]:t,y:e}}))}var ZY={line:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},dot:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},dash:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},smooth:function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},hv:function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},vh:function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},hvh:function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]},vhv:function(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}};function JY(e,t){var n=e.color;return{symbol:ZY[t],style:{lineWidth:2,r:6,stroke:n}}}function eU(e,t,n,r,i){return 1===e.length?[["M",e[0].x,e[0].y-i.lineWidth/2],["L",e[0].x,e[0].y],["L",e[0].x,e[0].y+i.lineWidth/2]]:(n?(t&&e.length&&e.push({x:e[0].x,y:e[0].y}),a=DG(e,!1,r)):(a=RG(e,!1),t&&a.push(["Z"])),a);var a}function tU(e,t,n,r,i,a){if(e.length){var o=e[0];return lM(o.y)?function(e,t,n,r,i,a){var o=[],s=[];uM(e,(function(e){var t=QY(e);o.push(t[1]),s.push(t[0])}));var l=eU(o,t,r,i,a),c=eU(s,t,r,i,a);return n?l:l.concat(c)}(e,t,n,r,i,a):eU(e,t,r,i,a)}return[]}xY("line",{defaultShapeType:"line"}),uM(["line","dot","dash","smooth"],(function(e){bY("line",e,{draw:function(t,n){var r,i="smooth"===e;if(i){var a=this.coordinate,o=a.start,s=a.end;r=[[o.x,s.y],[s.x,o.y]]}var l=function(e,t,n){for(var r=e.isStack,i=e.connectNulls,a=e.isInCircle,o=e.showSinglePoint,s=XY(e,!0,!1,"lineWidth"),l=UY(e.points,i,o),c=[],u=0,h=l.length;u<h;u++){var p=l[u];c=c.concat(tU(p,a,r,t,n,s))}return s.path=c,s}(t,i,r);return n.addShape({type:"path",attrs:l,name:"line",capture:!i})},getMarker:function(t){return JY(t,e)}})}));var nU={getLegendItems:jY,translate:OY,rotate:AY,zoom:function(e,t){var n=e.getBBox(),r=(n.minX+n.maxX)/2,i=(n.minY+n.maxY)/2;e.applyToMatrix([r,i,1]);var a=_Y(e.getMatrix(),[["t",-r,-i],["s",t,t],["t",r,i]]);e.setMatrix(a)},transform:_Y,getAngle:eG,getSectorPath:Zj,polarToCartesian:Qj,getDelegationObject:HG,getTooltipItems:$V,getMappingValue:DY,getPath:tU,getPathPoints:UY},rU="#000",iU="#BFBFBF",aU="#F0F0F0",oU="#FFFFFF",sU="#A6A6A6",lU="#737373",cU="#404040",uU="#262626",hU=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],pU=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],dU=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],fU=function(e){void 0===e&&(e={});var t=e.backgroundColor,n=void 0===t?"#141414":t,r=e.subColor,i=void 0===r?"rgba(255,255,255,0.05)":r,a=e.paletteQualitative10,o=void 0===a?hU:a,s=e.paletteQualitative20,l=void 0===s?pU:s,c=e.paletteSemanticRed,u=void 0===c?"#F4664A":c,h=e.paletteSemanticGreen,p=void 0===h?"#30BF78":h,d=e.paletteSemanticYellow,f=void 0===d?"#FAAD14":d,m=e.paletteSequence,g=void 0===m?dU:m,y=e.fontFamily,v=void 0===y?'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"':y,E=e.brandColor;return{backgroundColor:n,brandColor:void 0===E?o[0]:E,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:u,paletteSemanticGreen:p,paletteSemanticYellow:f,paletteSequence:g,fontFamily:v,axisLineBorderColor:cU,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:sU,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:cU,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:uU,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:lU,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:uU,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:lU,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:hU[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:sU,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:lU,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:lU,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:sU,legendPageNavigatorTextFontSize:12,sliderRailFillColor:uU,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:lU,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:aU,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:iU,annotationArcBorderColor:uU,annotationArcBorder:1,annotationLineBorderColor:cU,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:sU,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:oU,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:cU,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:sU,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:sU,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:rU,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:sU,overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:rU,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:cU,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:hU[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:rU,pointBorderOpacity:1,pointActiveBorderColor:oU,pointSelectedBorder:2,pointSelectedBorderColor:oU,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:hU[0],hollowPointBorderOpacity:.95,hollowPointFillColor:rU,hollowPointActiveBorder:1,hollowPointActiveBorderColor:oU,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:oU,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:hU[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:hU[0],areaFillOpacity:.25,areaActiveFillColor:hU[0],areaActiveFillOpacity:.5,areaSelectedFillColor:hU[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:hU[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:oU,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:oU,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:hU[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:oU,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:oU,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:hU[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:rU,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:oU,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:oU,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}}();function mU(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function gU(e,t,n,r,i,a){return i>=e&&i<=e+n&&a>=t&&a<=t+r}function yU(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function vU(e,t){return e[0]===t[0]&&e[1]===t[1]}var EU=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,xU=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,bU=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,CU=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function SU(e,t){uM(e.match(CU),(function(e){var n=e.split(":");t.addColorStop(n[0],n[1])}))}function wU(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(wM(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(e,t,n){var r,i,a=EU.exec(n),o=parseFloat(a[1])%360*(Math.PI/180),s=a[2],l=t.getBBox();o>=0&&o<.5*Math.PI?(r={x:l.minX,y:l.minY},i={x:l.maxX,y:l.maxY}):.5*Math.PI<=o&&o<Math.PI?(r={x:l.maxX,y:l.minY},i={x:l.minX,y:l.maxY}):Math.PI<=o&&o<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},i={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},i={x:l.maxX,y:l.minY});var c=Math.tan(o),u=c*c,h=(i.x-r.x+c*(i.y-r.y))/(u+1)+r.x,p=c*(i.x-r.x+c*(i.y-r.y))/(u+1)+r.y,d=e.createLinearGradient(r.x,r.y,h,p);return SU(s,d),d}(e,t,n);if("r"===n[0])return function(e,t,n){var r=xU.exec(n),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(0===o){var l=s.match(CU);return l[l.length-1].split(":")[1]}var c=t.getBBox(),u=c.maxX-c.minX,h=c.maxY-c.minY,p=Math.sqrt(u*u+h*h)/2,d=e.createRadialGradient(c.minX+u*i,c.minY+h*a,0,c.minX+u/2,c.minY+h/2,o*p);return SU(s,d),d}(e,t,n);if("p"===n[0])return function(e,t,n){if(t.get("patternSource")&&t.get("patternSource")===n)return t.get("pattern");var r,i,a=bU.exec(n),o=a[1],s=a[2];function l(){r=e.createPattern(i,o),t.set("pattern",r),t.set("patternSource",n)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}(e,t,n)}return n}return n instanceof CanvasPattern?n:void 0}function TU(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function kU(e,t){return TU(e)*TU(t)?(e[0]*t[0]+e[1]*t[1])/(TU(e)*TU(t)):1}function _U(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(kU(e,t))}function OU(e,t){var n=t[1],r=t[2],i=$M(HM(t[3]),2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],c=t[6],u=t[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=h*h/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var f=n*n*(p*p)+r*r*(h*h),m=f?Math.sqrt((n*n*(r*r)-f)/f):1;a===o&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*p/r:0,y=n?m*-r*h/n:0,v=(s+c)/2+Math.cos(i)*g-Math.sin(i)*y,E=(l+u)/2+Math.sin(i)*g+Math.cos(i)*y,x=[(h-g)/n,(p-y)/r],b=[(-1*h-g)/n,(-1*p-y)/r],C=_U([1,0],x),S=_U(x,b);return kU(x,b)<=-1&&(S=Math.PI),kU(x,b)>=1&&(S=0),0===o&&S>0&&(S-=2*Math.PI),1===o&&S<0&&(S+=2*Math.PI),{cx:v,cy:E,rx:vU(e,[c,u])?0:n,ry:vU(e,[c,u])?0:r,startAngle:C,endAngle:C+S,xRotation:i,arcFlag:a,sweepFlag:o}}var AU=Math.sin,IU=Math.cos,MU=Math.atan2,NU=Math.PI;function PU(e,t,n,r,i,a,o){var s=t.stroke,l=t.lineWidth,c=MU(r-a,n-i),u=new fq({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*IU(NU/6)+","+10*AU(NU/6)+" L0,0 L"+10*IU(NU/6)+",-"+10*AU(NU/6),stroke:s,lineWidth:l}});u.translate(i,a),u.rotateAtPoint(i,a,c),e.set(o?"startArrowShape":"endArrowShape",u)}function FU(e,t,n,r,i,a,o){var s=t.startArrow,l=t.endArrow,c=t.stroke,u=t.lineWidth,h=o?s:l,p=h.d,d=h.fill,f=h.stroke,m=h.lineWidth,g=ZI(h,["d","fill","stroke","lineWidth"]),y=MU(r-a,n-i);p&&(i-=IU(y)*p,a-=AU(y)*p);var v=new fq({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:QI(QI({},g),{stroke:f||c,lineWidth:m||u,fill:d})});v.translate(i,a),v.rotateAtPoint(i,a,y),e.set(o?"startArrowShape":"endArrowShape",v)}function LU(e,t,n,r,i){var a=MU(r-t,n-e);return{dx:IU(a)*i,dy:AU(a)*i}}function RU(e,t,n,r,i,a){"object"==typeof t.startArrow?FU(e,t,n,r,i,a,!0):t.startArrow?PU(e,t,n,r,i,a,!0):e.set("startArrowShape",null)}function DU(e,t,n,r,i,a){"object"==typeof t.endArrow?FU(e,t,n,r,i,a,!1):t.endArrow?PU(e,t,n,r,i,a,!1):e.set("startArrowShape",null)}var BU={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function $U(e,t){var n=t.attr();for(var r in n){var i=n[r],a=BU[r]?BU[r]:r;"matrix"===a&&i?e.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===a&&e.setLineDash?lM(i)&&e.setLineDash(i):("strokeStyle"===a||"fillStyle"===a?i=wU(e,t,i):"globalAlpha"===a&&(i*=e.globalAlpha),e[a]=i)}}function zU(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];i.cfg.visible?i.draw(e,n):i.skipDraw()}}function HU(e,t,n){var r=e.get("refreshElements");uM(r,(function(t){if(t!==e)for(var n=t.cfg.parent;n&&n!==e&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===e?VU(t):jU(t,n)}function jU(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&VU(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&jU(r.cfg.children,t);else{var i=YU(r,t);r.cfg.refresh=i,i&&r.isGroup()&&jU(r.cfg.children,t)}}}function GU(e){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&GU(n.cfg.children)}}function VU(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.refresh=!0,r.isGroup()&&VU(r.get("children"))}}function YU(e,t){var n=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&n&&yU(n,t)}function UU(e,t,n,r){var i=n.path,a=n.startArrow,o=n.endArrow;if(i){var s=[0,0],l=[0,0],c={dx:0,dy:0};t.beginPath();for(var u=0;u<i.length;u++){var h=i[u],p=h[0];if(0===u&&a&&a.d)c=LU((d=e.getStartTangent())[0][0],d[0][1],d[1][0],d[1][1],a.d);else if(u===i.length-2&&"Z"===i[u+1][0]&&o&&o.d){if("Z"===i[u+1][0])c=LU((d=e.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d)}else if(u===i.length-1&&o&&o.d){var d;if("Z"!==i[0])c=LU((d=e.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d)}var f=c.dx,m=c.dy;switch(p){case"M":t.moveTo(h[1]-f,h[2]-m),l=[h[1],h[2]];break;case"L":t.lineTo(h[1]-f,h[2]-m);break;case"Q":t.quadraticCurveTo(h[1],h[2],h[3]-f,h[4]-m);break;case"C":t.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-f,h[6]-m);break;case"A":var g=void 0;r?(g=r[u])||(g=OU(s,h),r[u]=g):g=OU(s,h);var y=g.cx,v=g.cy,E=g.rx,x=g.ry,b=g.startAngle,C=g.endAngle,S=g.xRotation,w=g.sweepFlag;if(t.ellipse)t.ellipse(y,v,E,x,S,b,C,1-w);else{var T=E>x?E:x,k=E>x?1:E/x,_=E>x?x/E:1;t.translate(y,v),t.rotate(S),t.scale(k,_),t.arc(0,0,T,b,C,1-w),t.scale(1/k,1/_),t.rotate(-S),t.translate(-y,-v)}break;case"Z":t.closePath()}if("Z"===p)s=l;else{var O=h.length;s=[h[O-2],h[O-1]]}}}}function qU(e,t){var n=e.get("canvas");n&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(n.refreshElement(e,t,n),n.get("autoDraw")&&n.draw())))}function WU(e){var t,n,r;if(e.destroyed)t=e._cacheCanvasBBox;else{var i=e.get("cacheCanvasBBox"),a=i&&!(!i.width||!i.height),o=e.getCanvasBBox(),s=o&&!(!o.width||!o.height);a&&s?(r=o,t=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):a?t=i:s&&(t=o)}return t}var XU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.onCanvasChange=function(e){qU(this,e)},t.prototype.getShapeBase=function(){return Yn},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),$U(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],n=[];uM(e,(function(e){var r=e.cfg.cacheCanvasBBox;r&&e.cfg.isInView&&(t.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(t.length){var i=EM(t),a=vM(t),o=EM(n),s=vM(n);r={minX:i,minY:o,x:i,y:o,maxX:a,maxY:s,width:a-i,height:s-o};var l=this.cfg.canvas;if(l){var c=l.getViewRange();this.set("isInView",yU(r,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},t.prototype.draw=function(e,t){var n=this.cfg.children,r=!t||this.cfg.refresh;n.length&&r&&(e.save(),$U(e,this),this._applyClip(e,this.getClip()),zU(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(VL),KU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return Yn},t.prototype.getGroupBase=function(){return XU},t.prototype.onCanvasChange=function(e){qU(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),n=WL(e)(this),r=t/2,i=n.x-r,a=n.y-r,o=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:a,minY:a,width:n.width+t,height:n.height+t,maxX:o,maxY:s}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),$U(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!yU(t,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),$U(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),n=yU(t,e);this.set("isInView",n),n?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,a=t.fillOpacity;this.isFill()&&(sM(a)||1===a?this.fill(e):(e.globalAlpha=a,this.fill(e),e.globalAlpha=r)),this.isStroke()&&n>0&&(sM(i)||1===i||(e.globalAlpha=i),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(YL),QU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=a.x,s=a.y,l=a.r,c=i/2,u=mU(o,s,e,t);return r&&n?u<=l+c:r?u<=l:!!n&&(u>=l-c&&u<=l+c)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.r;e.beginPath(),e.arc(n,r,i,0,2*Math.PI,!1),e.closePath()},t}(KU);function ZU(e,t,n,r){return e/(n*n)+t/(r*r)}var JU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=i/2,s=a.x,l=a.y,c=a.rx,u=a.ry,h=(e-s)*(e-s),p=(t-l)*(t-l);return r&&n?ZU(h,p,c+o,u+o)<=1:r?ZU(h,p,c,u)<=1:!!n&&(ZU(h,p,c-o,u-o)>=1&&ZU(h,p,c+o,u+o)<=1)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(n,r,i,a,0,0,2*Math.PI,!1);else{var o=i>a?i:a,s=i>a?1:i/a,l=i>a?a/i:1;e.save(),e.translate(n,r),e.scale(s,l),e.arc(0,0,o,0,2*Math.PI),e.restore(),e.closePath()}},t}(KU);function eq(e){return e instanceof HTMLElement&&wM(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}var tq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var t=this,n=this.attrs;if(wM(e)){var r=new Image;r.onload=function(){if(t.destroyed)return!1;t.attr("img",r),t.set("loading",!1),t._afterLoading();var e=t.get("callback");e&&e.call(t)},r.crossOrigin="Anonymous",r.src=e,this.set("loading",!0)}else e instanceof Image?(n.width||(n.width=e.width),n.height||(n.height=e.height)):eq(e)&&(n.width||(n.width=Number(e.getAttribute("width"))),n.height||(n.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"img"===t&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",e);var t=this.attr(),n=t.x,r=t.y,i=t.width,a=t.height,o=t.sx,s=t.sy,l=t.swidth,c=t.sheight,u=t.img;(u instanceof Image||eq(u))&&(sM(o)||sM(s)||sM(l)||sM(c)?e.drawImage(u,n,r,i,a):e.drawImage(u,o,s,l,c,n,r,i,a))},t}(KU);function nq(e,t,n,r,i,a,o){var s=Math.min(e,n),l=Math.max(e,n),c=Math.min(t,r),u=Math.max(t,r),h=i/2;return a>=s-h&&a<=l+h&&o>=c-h&&o<=u+h&&rR.pointToLine(e,t,n,r,a,o)<=i/2}var rq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=e.startArrow,o=e.endArrow;a&&RU(this,e,r,i,t,n),o&&DU(this,e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){if(!n||!i)return!1;var a=this.attr();return nq(a.x1,a.y1,a.x2,a.y2,i,e,t)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o=t.startArrow,s=t.endArrow,l={dx:0,dy:0},c={dx:0,dy:0};o&&o.d&&(l=LU(n,r,i,a,t.startArrow.d)),s&&s.d&&(c=LU(n,r,i,a,t.endArrow.d)),e.beginPath(),e.moveTo(n+l.dx,r+l.dy),e.lineTo(i-c.dx,a-c.dy)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return rR.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2;return rR.pointAt(n,r,i,a,e)},t}(KU),iq={circle:function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},aq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return sM(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e,n,r=this.attr(),i=r.x,a=r.y,o=r.symbol||"circle",s=this._getR(r);if(oM(o))n=RR(n=(e=o)(i,a,s));else{if(!(e=t.Symbols[o]))return console.warn(o+" marker is not supported."),null;n=e(i,a,s)}return n},t.prototype.createPath=function(e){UU(this,e,{path:this._getPath()},this.get("paramsCache"))},t.Symbols=iq,t}(KU);function oq(e,t,n){var r=wR();return e.createPath(r),r.isPointInPath(t,n)}function sq(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function lq(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function cq(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(lq(o,s,[t,n]))return!0;sq(o[1]-n)>0!=sq(s[1]-n)>0&&sq(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function uq(e,t,n,r,i,a,o,s){var l=(Math.atan2(s-t,o-e)+2*Math.PI)%(2*Math.PI);if(l<r||l>i)return!1;var c={x:e+n*Math.cos(l),y:t+n*Math.sin(l)};return mU(c.x,c.y,o,s)<=a/2}var hq=xF;var pq=QI({hasArc:function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break}}return t},extractPolygons:function(e){for(var t=e.length,n=[],r=[],i=[],a=0;a<t;a++){var o=e[a],s=o[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([o[1],o[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(e,t,n,r,i){for(var a=!1,o=t/2,s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,u=l.params,h=l.prePoint,p=l.box;if(!p||gU(p.x-o,p.y-o,p.width+t,p.height+t,n,r)){switch(l.command){case"L":case"Z":a=nq(h[0],h[1],c[0],c[1],t,n,r);break;case"Q":a=uR.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],n,r)<=t/2;break;case"C":a=gR.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i)<=t/2;break;case"A":var d=l.arcParams,f=d.cx,m=d.cy,g=d.rx,y=d.ry,v=d.startAngle,E=d.endAngle,x=d.xRotation,b=[n,r,1],C=g>y?g:y;iF(b,b,hq(null,[["t",-f,-m],["r",-x],["s",1/(g>y?1:g/y),1/(g>y?y/g:1)]])),a=uq(0,0,C,v,E,t,b[0],b[1])}if(a)break}}return a}},DP);function dq(e,t,n){for(var r=!1,i=0;i<e.length;i++){if(r=cq(e[i],t,n))break}return r}var fq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"path"===t&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=RR(e);var t=pq.hasArc(e);this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=GR(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e,t=this.attr(),n=t.startArrow,r=t.endArrow;n&&RU(this,t,(e=this.getStartTangent())[0][0],e[0][1],e[1][0],e[1][1]);r&&DU(this,t,(e=this.getEndTangent())[0][0],e[0][1],e[1][0],e[1][1])},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.getSegments(),o=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=pq.isPointInStroke(a,i,e,t,l)}if(!s&&r)if(o)s=oq(this,e,t);else{var c=this.attr("path"),u=pq.extractPolygons(c);s=dq(u.polygons,e,t)||dq(u.polylines,e,t)}return s},t.prototype.createPath=function(e){UU(this,e,this.attr(),this.get("paramsCache"))},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return sM(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var t,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;uM(r,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)}));var a=i[n];if(sM(a)||sM(n))return null;var o=a.length,s=i[n+1];return gR.pointAt(a[o-2],a[o-1],s[1],s[2],s[3],s[4],s[5],s[6],t)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",pq.pathToCurve(e))},t.prototype._setTcache=function(){var e,t,n,r,i=0,a=0,o=[],s=this.get("curve");s&&(uM(s,(function(e,t){n=s[t+1],r=e.length,n&&(i+=gR.length(e[r-2],e[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?(uM(s,(function(l,c){n=s[c+1],r=l.length,n&&((e=[])[0]=a/i,t=gR.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),a+=t||0,e[1]=a/i,o.push(e))})),this.set("tCache",o)):this.set("tCache",[]))},t.prototype.getStartTangent=function(){var e,t=this.getSegments();if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e},t.prototype.getEndTangent=function(){var e,t=this.getSegments(),n=t.length;if(n>1){var r=t[n-2].currentPoint,i=t[n-1].currentPoint,a=t[n-1].endTangent;e=[],a?(e.push([i[0]-a[0],i[1]-a[1]]),e.push([i[0],i[1]])):(e.push([r[0],r[1]]),e.push([i[0],i[1]]))}return e},t}(KU);function mq(e,t,n,r,i){var a=e.length;if(a<2)return!1;for(var o=0;o<a-1;o++){if(nq(e[o][0],e[o][1],e[o+1][0],e[o+1][1],t,n,r))return!0}if(i){var s=e[0],l=e[a-1];if(nq(s[0],s[1],l[0],l[1],t,n,r))return!0}return!1}var gq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr().points,o=!1;return n&&(o=mq(a,i,e,t,!0)),!o&&r&&(o=cq(a,e,t)),o},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];0===n?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},t}(KU),yq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,i=t.endArrow,a=n.length,o=n[0][0],s=n[0][1],l=n[a-1][0],c=n[a-1][1];r&&RU(this,e,n[1][0],n[1][1],o,s),i&&DU(this,e,n[a-2][0],n[a-2][1],l,c)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!(!n||!i)&&mq(this.attr().points,i,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,i=t.endArrow,a=n.length;if(!(n.length<2)){var o,s=n[0][0],l=n[0][1],c=n[a-1][0],u=n[a-1][1];if(r&&r.d)s+=(o=LU(s,l,n[1][0],n[1][1],r.d)).dx,l+=o.dy;if(i&&i.d)c-=(o=LU(n[a-2][0],n[a-2][1],c,u,i.d)).dx,u-=o.dy;e.beginPath(),e.moveTo(s,l);for(var h=0;h<a-1;h++){var p=n[h];e.lineTo(p[0],p[1])}e.lineTo(c,u)}},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return sM(t)?(this.set("totalLength",xR(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),uM(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),rR.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,a=[];uM(e,(function(o,s){e[s+1]&&((n=[])[0]=i/t,r=rR.length(o[0],o[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,a.push(n))})),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(KU);var vq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=a.x,s=a.y,l=a.width,c=a.height,u=a.radius;if(u){var h=!1;return n&&(h=function(e,t,n,r,i,a,o,s){return nq(e+i,t,e+n-i,t,a,o,s)||nq(e+n,t+i,e+n,t+r-i,a,o,s)||nq(e+n-i,t+r,e+i,t+r,a,o,s)||nq(e,t+r-i,e,t+i,a,o,s)||uq(e+n-i,t+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||uq(e+n-i,t+r-i,i,0,.5*Math.PI,a,o,s)||uq(e+i,t+r-i,i,.5*Math.PI,Math.PI,a,o,s)||uq(e+i,t+i,i,Math.PI,1.5*Math.PI,a,o,s)}(o,s,l,c,u,i,e,t)),!h&&r&&(h=oq(this,e,t)),h}var p=i/2;return r&&n?gU(o-p,s-p,l+p,c+p,e,t):r?gU(o,s,l,c,e,t):n?function(e,t,n,r,i,a,o){var s=i/2;return gU(e-s,t-s,n,i,a,o)||gU(e+n-s,t-s,i,r,a,o)||gU(e+s,t+r-s,n,i,a,o)||gU(e-s,t+s,i,r,a,o)}(o,s,l,c,i,e,t):void 0},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.width,a=t.height,o=t.radius;if(e.beginPath(),0===o)e.rect(n,r,i,a);else{var s=function(e){var t=0,n=0,r=0,i=0;return lM(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,[t,n,r,i]}(o),l=s[0],c=s[1],u=s[2],h=s[3];e.moveTo(n+l,r),e.lineTo(n+i-c,r),0!==c&&e.arc(n+i-c,r+c,c,-Math.PI/2,0),e.lineTo(n+i,r+a-u),0!==u&&e.arc(n+i-u,r+a-u,u,0,Math.PI/2),e.lineTo(n+h,r+a),0!==h&&e.arc(n+h,r+a-h,h,Math.PI/2,Math.PI),e.lineTo(n,r+l),0!==l&&e.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),e.closePath()}},t}(KU),Eq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=kR(e)},t.prototype._setText=function(e){var t=null;wM(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,n=1*e.fontSize;return t?t-n:.14*n},t.prototype._drawTextArr=function(e,t,n){var r,i=this.attrs,a=i.textBaseline,o=i.x,s=i.y,l=1*i.fontSize,c=this._getSpaceingY(),u=TR(i.text,i.fontSize,i.lineHeight);uM(t,(function(t,i){r=s+i*(c+l)-u+l,"middle"===a&&(r+=u-l-(u-l)/2),"top"===a&&(r+=u-l),sM(t)||(n?e.fillText(t,o,r):e.strokeText(t,o,r))}))},t.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,i=n.y,a=this.get("textArr");if(a)this._drawTextArr(e,a,t);else{var o=n.text;sM(o)||(t?e.fillText(o,r,i):e.strokeText(o,r,i))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,a=t.fillOpacity;this.isStroke()&&n>0&&(sM(i)||1===i||(e.globalAlpha=r),this.stroke(e)),this.isFill()&&(sM(a)||1===a?this.fill(e):(e.globalAlpha=a,this.fill(e),e.globalAlpha=r)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(KU);function xq(e,t,n){var r,i,a=e.getTotalMatrix();if(a){var o=(r=[t,n,1],(i=a)?SF(wF(i),r):r);return[o[0],o[1]]}return[t,n]}function bq(e,t,n){if(e.isCanvas&&e.isCanvas())return!0;if(!jP(e)||!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var r=xq(e,t,n),i=r[0],a=r[1];if(e.isClipped(i,a))return!1}var o=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=o.minX&&t<=o.maxX&&n>=o.minY&&n<=o.maxY}function Cq(e,t,n){if(!bq(e,t,n))return null;for(var r=null,i=e.getChildren(),a=i.length-1;a>=0;a--){var o=i[a];if(o.isGroup())r=Cq(o,t,n);else if(bq(o,t,n)){var s=o,l=xq(o,t,n),c=l[0],u=l[1];s.isInShape(c,u)&&(r=o)}if(r)break}return r}var Sq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return Yn},t.prototype.getGroupBase=function(){return XU},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},t.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get("context"),i=this.get("el"),a=this.getPixelRatio();i.width=a*t,i.height=a*n,a>1&&r.scale(a,a)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(t,n){return this.get("quickHit")?Cq(this,t,n):e.prototype.getShape.call(this,t,n,null)},t.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),n=this.getViewRange();t.length&&t[0]===this?e=n:(e=function(e){if(!e.length)return null;var t=[],n=[],r=[],i=[];return uM(e,(function(e){var a=WU(e);a&&(t.push(a.minX),n.push(a.minY),r.push(a.maxX),i.push(a.maxY))})),{minX:EM(t),minY:EM(n),maxX:vM(r),maxY:vM(i)}}(t))&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView")&&(e=function(e,t){return e&&t&&yU(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}(e,n)));return e},t.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},t.prototype._clearFrame=function(){var e,t=this.get("drawFrame");t&&(e=t,(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),n=this.getChildren();e.clearRect(0,0,t.width,t.height),$U(e,this),zU(e,n),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),$U(e,this),HU(this,n,r),zU(e,n,r),e.restore()):t.length&&GU(t),uM(t,(function(e){e.get("hasChanged")&&e.set("hasChanged",!1)})),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e,t=this,n=this.get("drawFrame");n||(e=function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)},n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e),this.set("drawFrame",n))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(GL),wq=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:Yn,version:"0.5.12",Canvas:Sq,Group:XU,getArcParams:OU,Event:BP,Base:GP,AbstractCanvas:GL,AbstractGroup:VL,AbstractShape:YL,getBBoxMethod:WL,getTextHeight:TR,assembleFont:kR,isAllowCapture:jP,multiplyVec2:SF,invert:wF,getOffScreenContext:wR,PathUtil:DP}),Tq={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},kq={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function _q(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Oq(e){var t=Tq[e.type],n=e.getParent();if(!t)throw new Error("the type "+e.type+" is not supported by svg");var r=_q(t);if(e.get("id")&&(r.id=e.get("id")),e.set("el",r),e.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function Aq(e,t){var n,r=e.get("el"),i=(n=r.children,tM(n)?Array.prototype.slice.call(n):[]).sort(t),a=document.createDocumentFragment();i.forEach((function(e){a.appendChild(e)})),r.appendChild(a)}function Iq(e){var t=e.attr().matrix;if(t){for(var n=e.cfg.el,r=[],i=0;i<9;i+=3)r.push(t[i]+","+t[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",t)}}function Mq(e,t){var n=e.getClip(),r=e.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){Oq(n),n.createPath(t);var i=t.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function Nq(e,t){t.forEach((function(t){t.draw(e)}))}function Pq(e,t){var n=e.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=e.getParent(),a=i?i.getChildren():[n],o=e.get("el");if("remove"===t)if(e.get("isClipShape")){var s=o&&o.parentNode,l=s&&s.parentNode;s&&l&&l.removeChild(s)}else o&&o.parentNode&&o.parentNode.removeChild(o);else if("show"===t)o.setAttribute("visibility","visible");else if("hide"===t)o.setAttribute("visibility","hidden");else if("zIndex"===t)!function(e,t){var n=e.parentNode,r=Array.from(n.childNodes).filter((function(e){return 1===e.nodeType&&"defs"!==e.nodeName.toLowerCase()})),i=r[t],a=r.indexOf(e);if(i){if(a>t)n.insertBefore(e,i);else if(a<t){var o=r[t+1];o?n.insertBefore(e,o):n.appendChild(e)}}else n.appendChild(e)}(o,a.indexOf(e));else if("sort"===t){var c=e.get("children");c&&c.length&&Aq(e,(function(e,t){return c.indexOf(e)-c.indexOf(t)?1:0}))}else"clear"===t?o&&(o.innerHTML=""):"matrix"===t?Iq(e):"clip"===t?Mq(e,r):"attr"===t||"add"===t&&e.draw(r)}}var Fq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=_q("g");this.set("el",e);var t=this.getParent();if(t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(e)}return e},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,t)}},t.prototype.onCanvasChange=function(e){Pq(this,e)},t.prototype.getShapeBase=function(){return Un},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var t=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Mq(this,e),this.createPath(e),t.length&&Nq(e,t))},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");uM(t||n,(function(e,t){kq[t]&&r.setAttribute(kq[t],e)})),Iq(this)},t}(VL),Lq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,t)}},t.prototype.getShapeBase=function(){return Un},t.prototype.getGroupBase=function(){return Fq},t.prototype.onCanvasChange=function(e){Pq(this,e)},t.prototype.calculateBBox=function(){var e=this.get("el"),t=null;if(e)t=e.getBBox();else{var n=WL(this.get("type"));n&&(t=n(this))}if(t){var r=t.x,i=t.y,a=t.width,o=t.height,s=this.getHitLineWidth(),l=s/2,c=r-l,u=i-l;return{x:c,y:u,minX:c,minY:u,maxX:r+a+l,maxY:i+o+l,width:a+s,height:o+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),t=e.fill,n=e.fillStyle;return(t||n||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),t=e.stroke,n=e.strokeStyle;return(t||n)&&this.canStroke},t.prototype.draw=function(e,t){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Oq(this),Mq(this,e),this.createPath(e,t),this.shadow(e,t),this.strokeAndFill(e,t),this.transform(t))},t.prototype.createPath=function(e,t){},t.prototype.strokeAndFill=function(e,t){var n=t||this.attr(),r=n.fill,i=n.fillStyle,a=n.stroke,o=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,c=n.lineWidth,u=this.get("el");this.canFill&&(t?"fill"in n?this._setColor(e,"fill",r):"fillStyle"in n&&this._setColor(e,"fill",i):this._setColor(e,"fill",r||i),s&&u.setAttribute(kq.fillOpacity,s)),this.canStroke&&c>0&&(t?"stroke"in n?this._setColor(e,"stroke",a):"strokeStyle"in n&&this._setColor(e,"stroke",o):this._setColor(e,"stroke",a||o),l&&u.setAttribute(kq.strokeOpacity,l),c&&u.setAttribute(kq.lineWidth,c))},t.prototype._setColor=function(e,t,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=e.find("gradient",n))||(i=e.addGradient(n)),r.setAttribute(kq[t],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=e.find("pattern",n))||(i=e.addPattern(n)),r.setAttribute(kq[t],"url(#"+i+")")}else r.setAttribute(kq[t],n);else r.setAttribute(kq[t],"none")},t.prototype.shadow=function(e,t){var n=this.attr(),r=t||n,i=r.shadowOffsetX,a=r.shadowOffsetY,o=r.shadowBlur,s=r.shadowColor;(i||a||o||s)&&function(e,t){var n=e.cfg.el,r=e.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var a=t.find("filter",i);a||(a=t.addShadow(i)),n.setAttribute("filter","url(#"+a+")")}else n.removeAttribute("filter")}(this,e)},t.prototype.transform=function(e){var t=this.attr();(e||t).matrix&&Iq(this)},t.prototype.isInShape=function(e,t){return this.isPointInPath(e,t)},t.prototype.isPointInPath=function(e,t){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=e+r.left,a=t+r.top,o=document.elementFromPoint(i,a);return!(!o||!o.isEqualNode(n))},t.prototype.getHitLineWidth=function(){var e=this.attrs,t=e.lineWidth,n=e.lineAppendWidth;return this.isStroke()?t+n:0},t}(YL),Rq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x:0,y:0,r:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");uM(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):kq[t]&&r.setAttribute(kq[t],e)}))},t}(Lq),Dq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return KI(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");if(uM(t||n,(function(e,t){kq[t]&&r.setAttribute(kq[t],e)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var a=r.childNodes,o=a.length-1;o>=0;o--)r.removeChild(a[o]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},t}(Lq),Bq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");uM(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):kq[t]&&r.setAttribute(kq[t],e)}))},t}(Lq),$q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");uM(t||r,(function(e,t){"img"===t?n._setImage(r.img):kq[t]&&i.setAttribute(kq[t],e)}))},t.prototype.setAttr=function(e,t){this.attrs[e]=t,"img"===e&&this._setImage(t)},t.prototype._setImage=function(e){var t=this.attr(),n=this.get("el");if(wM(e))n.setAttribute("href",e);else if(e instanceof window.Image)t.width||(n.setAttribute("width",e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",e.height),this.attr("height",e.height)),n.setAttribute("href",e.src);else if(e instanceof HTMLElement&&wM(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())n.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+e.width),r.setAttribute("height",""+e.height),r.getContext("2d").putImageData(e,0,0),t.width||(n.setAttribute("width",""+e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",""+e.height),this.attr("height",e.height)),n.setAttribute("href",r.toDataURL())}},t}(Lq),zq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");uM(t||n,(function(t,i){if("startArrow"===i||"endArrow"===i)if(t){var a=cM(t)?e.addArrow(n,kq[i]):e.getDefaultArrow(n,kq[i]);r.setAttribute(kq[i],"url(#"+a+")")}else r.removeAttribute(kq[i]);else kq[i]&&r.setAttribute(kq[i],t)}))},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return rR.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2;return rR.pointAt(n,r,i,a,e)},t}(Lq),Hq={circle:function(e,t,n){return[["M",e,t],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["z"]]},triangleDown:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},jq={get:function(e){return Hq[e]},register:function(e,t){Hq[e]=t},remove:function(e){delete Hq[e]},getAll:function(){return Hq}},Gq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return KI(t,e),t.prototype.createPath=function(e){this.get("el").setAttribute("d",this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return lM(e)?e.map((function(e){return e.join(" ")})).join(""):e},t.prototype._getPath=function(){var e,t=this.attr(),n=t.x,r=t.y,i=t.r||t.radius,a=t.symbol||"circle";return(e=oM(a)?a:jq.get(a))?e(n,r,i):(console.warn(e+" symbol is not exist."),null)},t.symbolsFactory=jq,t}(Lq),Vq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");uM(t||r,(function(t,a){if("path"===a&&lM(t))i.setAttribute("d",n._formatPath(t));else if("startArrow"===a||"endArrow"===a)if(t){var o=cM(t)?e.addArrow(r,kq[a]):e.getDefaultArrow(r,kq[a]);i.setAttribute(kq[a],"url(#"+o+")")}else i.removeAttribute(kq[a]);else kq[a]&&i.setAttribute(kq[a],t)}))},t.prototype._formatPath=function(e){var t=e.map((function(e){return e.join(" ")})).join("");return~t.indexOf("NaN")?"":t},t.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var t=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=t?t.getPointAtLength(e*n):null;return r?{x:r.x,y:r.y}:null},t}(Lq),Yq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return KI(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");uM(t||n,(function(e,t){"points"===t&&lM(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):kq[t]&&r.setAttribute(kq[t],e)}))},t}(Lq),Uq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");uM(t||n,(function(e,t){"points"===t&&lM(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):kq[t]&&r.setAttribute(kq[t],e)}))},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return sM(t)?(this.set("totalLength",xR(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),uM(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),rR.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,a=[];uM(e,(function(o,s){e[s+1]&&((n=[])[0]=i/t,r=rR.length(o[0],o[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,a.push(n))})),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(Lq);var qq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el"),a=!1,o=["x","y","width","height","radius"];uM(t||r,(function(e,t){-1===o.indexOf(t)||a?-1===o.indexOf(t)&&kq[t]&&i.setAttribute(kq[t],e):(i.setAttribute("d",n._assembleRect(r)),a=!0)}))},t.prototype._assembleRect=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=e.radius;if(!a)return"M "+t+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var o=function(e){var t=0,n=0,r=0,i=0;return lM(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}(a);return lM(a)?1===a.length?o.r1=o.r2=o.r3=o.r4=a[0]:2===a.length?(o.r1=o.r3=a[0],o.r2=o.r4=a[1]):3===a.length?(o.r1=a[0],o.r2=o.r4=a[1],o.r3=a[2]):(o.r1=a[0],o.r2=a[1],o.r3=a[2],o.r4=a[3]):o.r1=o.r2=o.r3=o.r4=a,[["M "+(t+o.r1)+","+n],["l "+(r-o.r1-o.r2)+",0"],["a "+o.r2+","+o.r2+",0,0,1,"+o.r2+","+o.r2],["l 0,"+(i-o.r2-o.r3)],["a "+o.r3+","+o.r3+",0,0,1,"+-o.r3+","+o.r3],["l "+(o.r3+o.r4-r)+",0"],["a "+o.r4+","+o.r4+",0,0,1,"+-o.r4+","+-o.r4],["l 0,"+(o.r4+o.r1-i)],["a "+o.r1+","+o.r1+",0,0,1,"+o.r1+","+-o.r1],["z"]].join(" ")},t}(Lq),Wq={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},Xq={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},Kq={left:"left",start:"left",center:"middle",right:"end",end:"end"},Qq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return KI(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return QI(QI({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");this._setFont(),uM(t||r,(function(e,t){"text"===t?n._setText(""+e):"matrix"===t&&e?Iq(n):kq[t]&&i.setAttribute(kq[t],e)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},t.prototype._setFont=function(){var e=this.get("el"),t=this.attr(),n=t.textBaseline,r=t.textAlign,i=JP();i&&"firefox"===i.name?e.setAttribute("dominant-baseline",Xq[n]||"alphabetic"):e.setAttribute("alignment-baseline",Wq[n]||"baseline"),e.setAttribute("text-anchor",Kq[r]||"left")},t.prototype._setText=function(e){var t=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,a=void 0===i?"bottom":i;if(e)if(~e.indexOf("\n")){var o=e.split("\n"),s=o.length-1,l="";uM(o,(function(e,t){0===t?"alphabetic"===a?l+='<tspan x="'+r+'" dy="'+-s+'em">'+e+"</tspan>":"top"===a?l+='<tspan x="'+r+'" dy="0.9em">'+e+"</tspan>":"middle"===a?l+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+e+"</tspan>":"bottom"===a?l+='<tspan x="'+r+'" dy="-'+(s+.3)+'em">'+e+"</tspan>":"hanging"===a&&(l+='<tspan x="'+r+'" dy="'+(-(s-1)-.3)+'em">'+e+"</tspan>"):l+='<tspan x="'+r+'" dy="1em">'+e+"</tspan>"})),t.innerHTML=l}else t.innerHTML=e;else t.innerHTML=""},t}(Lq),Zq=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Jq=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,eW=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function tW(e){var t=e.match(eW);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),uM(t,(function(e){e=e.split(":"),n+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'})),n}var nW=function(){function e(e){this.cfg={};var t,n,r,i,a,o,s,l=null,c=bN("gradient_");return"l"===e.toLowerCase()[0]?function(e,t){var n,r,i=Zq.exec(e),a=$M(HM(parseFloat(i[1])),2*Math.PI),o=i[2];a>=0&&a<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=a&&a<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=a&&a<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(a),l=s*s,c=(r.x-n.x+s*(r.y-n.y))/(l+1)+n.x,u=s*(r.x-n.x+s*(r.y-n.y))/(l+1)+n.y;t.setAttribute("x1",n.x),t.setAttribute("y1",n.y),t.setAttribute("x2",c),t.setAttribute("y2",u),t.innerHTML=tW(o)}(e,l=_q("linearGradient")):(l=_q("radialGradient"),t=e,n=l,r=Jq.exec(t),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4],n.setAttribute("cx",i),n.setAttribute("cy",a),n.setAttribute("r",o),n.innerHTML=tW(s)),l.setAttribute("id",c),this.el=l,this.id=c,this.cfg=e,this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),rW={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},iW={x:"-40%",y:"-40%",width:"200%",height:"200%"},aW=function(){function e(e){this.type="filter",this.cfg={},this.type="filter";var t=_q("filter");return uM(iW,(function(e,n){t.setAttribute(n,e)})),this.el=t,this.id=bN("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return e.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,r=this.cfg;return uM(Object.keys(r),(function(e){if(r[e]!==t[e])return n=!1,!1})),n},e.prototype.update=function(e,t){var n=this.cfg;return n[rW[e]]=t,this._parseShadow(n,this.el),this},e.prototype._parseShadow=function(e,t){var n='<feDropShadow\n      dx="'+(e.dx||0)+'"\n      dy="'+(e.dy||0)+'"\n      stdDeviation="'+(e.blur?e.blur/10:0)+'"\n      flood-color="'+(e.color?e.color:"#000")+'"\n      flood-opacity="'+(e.opacity?e.opacity:1)+'"\n      />';t.innerHTML=n},e}(),oW=function(){function e(e,t){this.cfg={};var n=_q("marker"),r=bN("marker_");n.setAttribute("id",r);var i=_q("path");i.setAttribute("stroke",e.stroke||"none"),i.setAttribute("fill",e.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var a=e["marker-start"===t?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",!0===a?this._setDefaultPath(t,i):(this.cfg=a,this._setMarker(e.lineWidth,i)),this}return e.prototype.match=function(){return!1},e.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},e.prototype._setMarker=function(e,t){var n=this.el,r=this.cfg.path,i=this.cfg.d;lM(r)&&(r=r.map((function(e){return e.join(" ")})).join("")),t.setAttribute("d",r),n.appendChild(t),i&&n.setAttribute("refX",""+i/e)},e.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},e}(),sW=function(){function e(e){this.type="clip",this.cfg={};var t=_q("clipPath");this.el=t,this.id=bN("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return e.prototype.match=function(){return!1},e.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},e}(),lW=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,cW=function(){function e(e){this.cfg={};var t=_q("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=_q("image");t.appendChild(n);var r=bN("pattern_");t.id=r,this.el=t,this.id=r,this.cfg=e;var i=lW.exec(e)[2];n.setAttribute("href",i);var a=new Image;function o(){t.setAttribute("width",""+a.width),t.setAttribute("height",""+a.height)}return i.match(/^data:/i)||(a.crossOrigin="Anonymous"),a.src=i,a.complete?o():(a.onload=o,a.src=a.src),this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),uW=function(){function e(e){var t=_q("defs"),n=bN("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return e.prototype.find=function(e,t){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(e,t)){r=n[i].id;break}return r},e.prototype.findById=function(e){for(var t=this.children,n=null,r=0;r<t.length;r++)if(t[r].id===e){n=t[r];break}return n},e.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},e.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new oW(e,t);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},e.prototype.addGradient=function(e){var t=new nW(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addArrow=function(e,t){var n=new oW(e,t);return this.el.appendChild(n.el),this.add(n),n.id},e.prototype.addShadow=function(e){var t=new aW(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addPattern=function(e){var t=new cW(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addClip=function(e){var t=new sW(e);return this.el.appendChild(t.el),this.add(t),t.id},e}(),hW=function(e){function t(t){return e.call(this,QI(QI({},t),{autoDraw:!0,renderer:"svg"}))||this}return KI(t,e),t.prototype.getShapeBase=function(){return Un},t.prototype.getGroupBase=function(){return Fq},t.prototype.getShape=function(e,t,n){var r=n.target||n.srcElement;if(!Tq[r.tagName]){for(var i=r.parentNode;i&&!Tq[i.tagName];)i=i.parentNode;r=i}return this.find((function(e){return e.get("el")===r}))},t.prototype.createDom=function(){var e=_q("svg"),t=new uW(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",t),e},t.prototype.onCanvasChange=function(e){var t=this.get("context"),n=this.get("el");if("sort"===e){var r=this.get("children");r&&r.length&&Aq(this,(function(e,t){return r.indexOf(e)-r.indexOf(t)?1:0}))}else if("clear"===e){if(n){n.innerHTML="";var i=t.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===e?Iq(this):"clip"===e?Mq(this,t):"changeSize"===e&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},t.prototype.draw=function(){var e=this.get("context"),t=this.getChildren();Mq(this,e),t.length&&Nq(e,t)},t}(GL),pW=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:Un,version:"0.5.6",Canvas:hW,Group:Fq,Event:BP,Base:GP,AbstractCanvas:GL,AbstractGroup:VL,AbstractShape:YL,getBBoxMethod:WL,getTextHeight:TR,assembleFont:kR,isAllowCapture:jP,multiplyVec2:SF,invert:wF,getOffScreenContext:wR,PathUtil:DP}),dW=function(e){function t(t){var n=e.call(this,t)||this;n.type="path",n.shapeType="line";var r=t.connectNulls,i=void 0!==r&&r,a=t.showSinglePoint,o=void 0===a||a;return n.connectNulls=i,n.showSinglePoint=o,n}return KI(t,e),t.prototype.updateElements=function(e,t){void 0===t&&(t=!1);for(var n=new Map,r=new Map,i=[],a=0,o=0;o<e.length;o++){var s=e[o],l=this.getElementId(s);i.push(l),n.set(l,s),r.set(l,a),a++}this.elements=new Array(a);for(var c=TY(this.lastElementsMap,i),u=c.added,h=c.updated,p=c.removed,d=0,f=u;d<f.length;d++){l=f[d],s=n.get(l);var m=this.getShapeFactory(),g=this.getShapeInfo(s);o=r.get(l);(E=new pY({shapeFactory:m,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:o})).geometry=this,E.animate=this.animateOption,E.draw(g,t),this.elementsMap[l]=E,this.elements[o]=E}for(var y=0,v=h;y<v.length;y++){l=v[y],s=n.get(l);var E=this.lastElementsMap[l],x=(o=r.get(l),g=this.getShapeInfo(s),E.getModel());(this.isCoordinateChanged||SY(x,g))&&(E.animate=this.animateOption,E.update(g)),this.elementsMap[l]=E,this.elements[o]=E}for(var b=0,C=p;b<C.length;b++){l=C[b];(E=this.lastElementsMap[l]).animate=this.animateOption,E.destroy()}},t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push({x:a.x,y:a.y}),n.push(a._origin)}return{points:t,data:n}},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=this.getPointsAndData(e),r=n.points,i=n.data;return t.mappingData=e,t.data=i,t.isStack=!!this.getAdjust("stack"),t.points=r,t.connectNulls=this.connectNulls,t.showSinglePoint=this.showSinglePoint,t},t}(kY);function fW(e,t,n,r,i){var a=[];if(e.length){for(var o=[],s=[],l=0,c=e.length;l<c;l++){var u=e[l];o.push(u[1]),s.push(u[0])}s=s.reverse(),uM([o,s],(function(e,l){var c=[],u=r.parsePoints(e),h=u[0];1===o.length&&1===s.length?c=0===l?[["M",h.x-.5,h.y],["L",h.x+.5,h.y]]:[["L",h.x+.5,h.y],["L",h.x-.5,h.y]]:(t&&u.push({x:h.x,y:h.y}),c=n?DG(u,!1,i):RG(u,!1),l>0&&(c[0][0]="L")),a=a.concat(c)})),a.push(["Z"])}return a}function mW(e,t,n,r,i){for(var a=XY(e,t,!t,"lineWidth"),o=e.connectNulls,s=e.isInCircle,l=UY(e.points,o,e.showSinglePoint),c=[],u=0,h=l.length;u<h;u++){var p=l[u];c=c.concat(fW(p,s,n,r,i))}return a.path=c,a}function gW(e){var t=e.start,n=e.end;return[[t.x,n.y],[n.x,t.y]]}xY("area",{defaultShapeType:"area",getDefaultPoints:function(e){var t=e.x,n=e.y0;return(lM(e.y)?e.y:[n,e.y]).map((function(e){return{x:t,y:e}}))}}),bY("area","area",{draw:function(e,t){var n=mW(e,!1,!1,this);return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,fill:e.color}}}});var yW=function(e){function t(t){var n=e.call(this,t)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var r=t.startOnZero,i=void 0===r||r,a=t.sortable,o=void 0!==a&&a,s=t.showSinglePoint,l=void 0!==s&&s;return n.startOnZero=i,n.sortable=o,n.showSinglePoint=l,n}return KI(t,e),t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push(a.points),n.push(a._origin)}return{points:t,data:n}},t.prototype.getYMinValue=function(){return this.startOnZero?e.prototype.getYMinValue.call(this):this.getYScale().min},t}(dW);xY("edge",{defaultShapeType:"line",getDefaultPoints:function(e){return QY(e)}}),bY("edge","line",{draw:function(e,t){var n=XY(e,!0,!1,"lineWidth"),r=RG(this.parsePoints(e.points),this.coordinate.isPolar);return t.addShape("path",{attrs:QI(QI({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});var vW=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return KI(t,e),t}(kY),EW=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return KI(t,e),t.prototype.updateElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=this.prepareRange(r),a=this.prepareSize(),o=fN(this.styleOption,["cfg","shadowBlur"]);RM(o)||(o=a/2),this.prepareGreyScaleBlurredCircle(a,o),this.drawWithRange(r,i,a,o)}},t.prototype.color=function(e,t){return this.createAttrOption("color",e,"function"!=typeof t?t:""),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},t.prototype.prepareRange=function(e){var t=this.getAttribute("color").getFields()[0],n=1/0,r=-1/0;return e.forEach((function(e){var i=e._origin[t];i>r&&(r=i),i<n&&(n=i)})),n===r&&(n=r-1),[n,r]},t.prototype.prepareSize=function(){var e=this.getDefaultValue("size");return RM(e)||(e=this.getDefaultSize()),e},t.prototype.prepareGreyScaleBlurredCircle=function(e,t){var n=this.getGrayScaleBlurredCanvas(),r=e+t,i=n.getContext("2d");n.width=n.height=2*r,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=t,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,e,0,2*Math.PI,!0),i.closePath(),i.fill()},t.prototype.drawWithRange=function(e,t,n,r){var i=this.coordinate,a=i.start,o=i.end,s=this.coordinate.getWidth(),l=this.coordinate.getHeight(),c=this.getAttribute("color").getFields()[0];this.clearShadowCanvasCtx();var u=this.getShadowCanvasCtx();t&&(e=e.filter((function(e){return e._origin[c]<=t[1]&&e._origin[c]>=t[0]})));for(var h=this.scales[c],p=0,d=e;p<d.length;p++){var f=d[p],m=this.getDrawCfg(f),g=m.x,y=m.y,v=h.scale(f._origin[c]);this.drawGrayScaleBlurredCircle(g-a.x,y-o.y,n+r,v,u)}var E=u.getImageData(0,0,s,l);this.clearShadowCanvasCtx(),this.colorize(E),u.putImageData(E,0,0);var x=this.getImageShape();x.attr("x",a.x),x.attr("y",o.y),x.attr("width",s),x.attr("height",l),x.attr("img",u.canvas),x.set("origin",this.getShapeInfo(e))},t.prototype.getDefaultSize=function(){var e=this.getAttribute("position"),t=this.coordinate;return Math.min(t.getWidth()/(4*e.scales[0].ticks.length),t.getHeight()/(4*e.scales[1].ticks.length))},t.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},t.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement("canvas"),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext("2d")},t.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},t.prototype.drawGrayScaleBlurredCircle=function(e,t,n,r,i){var a=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(a,e-n,t-n)},t.prototype.colorize=function(e){for(var t=this.getAttribute("color"),n=e.data,r=this.paletteCache,i=3;i<n.length;i+=4){var a=n[i];if(RM(a)){var o=r[a]?r[a]:wD.rgb2arr(t.gradient(a/256));n[i-3]=o[0],n[i-2]=o[1],n[i-1]=o[2],n[i]=a}}},t.prototype.getImageShape=function(){var e=this.imageShape;return e||(e=this.container.addShape({type:"image",attrs:{}}),this.imageShape=e,e)},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=e.map((function(e){return e._origin}));return QI(QI({},t),{mappingData:e,data:n})},t}(kY);function xW(e){var t,n,r,i,a=e.x,o=e.y,s=e.y0,l=e.size;lM(o)?(t=o[0],n=o[1]):(t=s,n=o),lM(a)?(r=a[0],i=a[1]):(r=a-l/2,i=a+l/2);var c=[{x:r,y:t},{x:r,y:n}];return c.push({x:i,y:n},{x:i,y:t}),c}function bW(e,t){void 0===t&&(t=!0);var n=[],r=e[0];n.push(["M",r.x,r.y]);for(var i=1,a=e.length;i<a;i++)n.push(["L",e[i].x,e[i].y]);return t&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}function CW(e,t){var n=0,r=0,i=0,a=0;return lM(e)?1===e.length?n=r=i=a=e[0]:2===e.length?(n=i=e[0],r=a=e[1]):3===e.length?(n=e[0],r=a=e[1],i=e[2]):(n=e[0],r=e[1],i=e[2],a=e[3]):n=r=i=a=e,n+r>t&&(r=t-(n=n?t/(1+r/n):0)),i+a>t&&(a=t-(i=i?t/(1+a/i):0)),[n||0,r||0,i||0,a||0]}function SW(e,t,n){var r=[];if(n.isRect){var i=n.isTransposed?{x:n.start.x,y:t[0].y}:{x:t[0].x,y:n.start.y},a=n.isTransposed?{x:n.end.x,y:t[2].y}:{x:t[3].x,y:n.end.y},o=fN(e,["background","style","radius"]);if(o){var s=n.isTransposed?Math.abs(t[0].y-t[2].y):t[2].x-t[1].x,l=n.isTransposed?n.getWidth():n.getHeight(),c=CW(o,Math.min(s,l)),u=c[0],h=c[1],p=c[2],d=c[3];r.push(["M",i.x,a.y+u]),0!==u&&r.push(["A",u,u,0,0,1,i.x+u,a.y]),r.push(["L",a.x-h,a.y]),0!==h&&r.push(["A",h,h,0,0,1,a.x,a.y+h]),r.push(["L",a.x,i.y-p]),0!==p&&r.push(["A",p,p,0,0,1,a.x-p,i.y]),r.push(["L",i.x+d,i.y]),0!==d&&r.push(["A",d,d,0,0,1,i.x,i.y-d])}else r.push(["M",i.x,i.y]),r.push(["L",a.x,i.y]),r.push(["L",a.x,a.y]),r.push(["L",i.x,a.y]),r.push(["L",i.x,i.y]);r.push(["z"])}if(n.isPolar){var f=n.getCenter(),m=eG(e,n),g=m.startAngle,y=m.endAngle;if("theta"===n.type||n.isTransposed){var v=function(e){return Math.pow(e,2)};u=Math.sqrt(v(f.x-t[0].x)+v(f.y-t[0].y)),h=Math.sqrt(v(f.x-t[2].x)+v(f.y-t[2].y));r=Zj(f.x,f.y,u,n.startAngle,n.endAngle,h)}else r=Zj(f.x,f.y,n.getRadius(),g,y)}return r}function wW(e,t,n){var r=[];return sM(t)?n?r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",(e[2].x+e[3].x)/2,(e[2].y+e[3].y)/2],["Z"]):r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[3].x,e[3].y],["Z"]):r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",t[1].x,t[1].y],["L",t[0].x,t[0].y],["Z"]),r}function TW(e,t){return[t,e]}function kW(e){var t=e.theme,n=e.coordinate,r=e.getXScale(),i=r.values,a=e.beforeMappingData,o=i.length,s=oG(e.coordinate),l=e.intervalPadding,c=e.dodgePadding,u=e.maxColumnWidth||t.maxColumnWidth,h=e.minColumnWidth||t.minColumnWidth,p=e.columnWidthRatio||t.columnWidthRatio,d=e.multiplePieWidthRatio||t.multiplePieWidthRatio,f=e.roseWidthRatio||t.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var m=function(e,t){var n=e.length,r=e;wM(r[0])&&(r=e.map((function(e){return t.translate(e)})));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}(i,r);o=(r.max-r.min)/m,i.length>o&&(o=i.length)}var g=r.range,y=1/o,v=1;(n.isPolar?v=n.isTransposed&&o>1?d:f:(r.isLinear&&(y*=g[1]-g[0]),v=p),!sM(l)&&l>=0)?y=(1-(o-1)*(l/s))/o:y*=v;if(e.getAdjust("dodge")){var E=function(e,t){if(t){var n=yM(e);return kM(n,t).length}return e.length}(a,e.getAdjust("dodge").dodgeBy);if(!sM(c)&&c>=0)y=(y-c/s*(E-1))/E;else!sM(l)&&l>=0?(y*=v,y/=E):y/=E;y=y>=0?y:0}if(!sM(u)&&u>=0){var x=u/s;y>x&&(y=x)}if(!sM(h)&&h>=0){var b=h/s;y<b&&(y=b)}return y}xY("interval",{defaultShapeType:"rect",getDefaultPoints:function(e){return xW(e)}}),bY("interval","rect",{draw:function(e,t){var n,r=XY(e,!1,!0),i=t,a=null==e?void 0:e.background;if(a){i=t.addGroup();var o=KY(e),s=SW(e,this.parsePoints(e.points),this.coordinate);i.addShape("path",{attrs:QI(QI({},o),{path:s}),zIndex:-1,name:"element-background"})}n=r.radius&&this.coordinate.isRect?function(e,t,n){var r,i,a,o,s,l,c,u=eM([],e,!0),h=u[0],p=u[1],d=u[2],f=u[3],m="number"==typeof n?Array(4).fill(n):n,g=m[0],y=m[1],v=m[2],E=m[3];t.isTransposed&&(p=(r=TW(p,f))[0],f=r[1],g=(i=[E,g,y,v])[0],y=i[1],v=i[2],E=i[3]),t.isReflect("y")&&(h=(a=TW(h,p))[0],p=a[1],d=(o=TW(d,f))[0],f=o[1]),t.isReflect("x")&&(h=(s=TW(h,f))[0],f=s[1],p=(l=TW(p,d))[0],d=l[1]);var x=[],b=function(e){return Math.abs(e)};return g=(c=CW([g,y,v,E],Math.min(b(f.x-h.x),b(p.y-h.y))).map((function(e){return b(e)})))[0],y=c[1],v=c[2],E=c[3],h.y<p.y?(x.push(["M",f.x,f.y+v]),0!==v&&x.push(["A",v,v,0,0,0,f.x-v,f.y]),x.push(["L",h.x+E,h.y]),0!==E&&x.push(["A",E,E,0,0,0,h.x,h.y+E]),x.push(["L",p.x,p.y-g]),0!==g&&x.push(["A",g,g,0,0,0,p.x+g,p.y]),x.push(["L",d.x-y,d.y]),0!==y&&x.push(["A",y,y,0,0,0,d.x,d.y-y]),x.push(["L",f.x,f.y+v]),x.push(["z"])):f.x<h.x?(x.push(["M",d.x+y,d.y]),0!==y&&x.push(["A",y,y,0,0,0,d.x,d.y+y]),x.push(["L",f.x,f.y-v]),0!==v&&x.push(["A",v,v,0,0,0,f.x+v,f.y]),x.push(["L",h.x-E,h.y]),0!==E&&x.push(["A",E,E,0,0,0,h.x,h.y-E]),x.push(["L",p.x,p.y+g]),0!==g&&x.push(["A",g,g,0,0,0,p.x-g,p.y]),x.push(["L",d.x+y,d.y]),x.push(["z"])):(x.push(["M",p.x,p.y+g]),0!==g&&x.push(["A",g,g,0,0,1,p.x+g,p.y]),x.push(["L",d.x-y,d.y]),0!==y&&x.push(["A",y,y,0,0,1,d.x,d.y+y]),x.push(["L",f.x,f.y-v]),0!==v&&x.push(["A",v,v,0,0,1,f.x-v,f.y]),x.push(["L",h.x+E,h.y]),0!==E&&x.push(["A",E,E,0,0,1,h.x,h.y-E]),x.push(["L",p.x,p.y+g]),x.push(["z"])),x}(this.parsePoints(e.points),this.coordinate,r.radius):this.parsePath(function(e,t,n){var r=n.getWidth(),i=n.getHeight(),a="rect"===n.type,o=[],s=(e[2].x-e[1].x)/2,l=n.isTransposed?s*i/r:s*r/i;return"round"===t?(a?(o.push(["M",e[0].x,e[0].y+l]),o.push(["L",e[1].x,e[1].y-l]),o.push(["A",s,s,0,0,1,e[2].x,e[2].y-l]),o.push(["L",e[3].x,e[3].y+l]),o.push(["A",s,s,0,0,1,e[0].x,e[0].y+l])):(o.push(["M",e[0].x,e[0].y]),o.push(["L",e[1].x,e[1].y]),o.push(["A",s,s,0,0,1,e[2].x,e[2].y]),o.push(["L",e[3].x,e[3].y]),o.push(["A",s,s,0,0,1,e[0].x,e[0].y])),o.push(["z"])):o=bW(e),o}(e.points,r.lineCap,this.coordinate));var l=i.addShape("path",{attrs:QI(QI({},r),{path:n}),name:"interval"});return a?i:l},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});var _W=function(e){function t(t){var n=e.call(this,t)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var r=t.background;return n.background=r,n}return KI(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=oG(this.coordinate)):(this.defaultSize||(this.defaultSize=kW(this)),n=this.defaultSize);return r.size=n,r},t.prototype.adjustScale=function(){e.prototype.adjustScale.call(this);var t,n,r=this.getYScale();if("theta"===this.coordinate.type)r.change({nice:!1,min:0,max:(t=r,n=t.values.filter((function(e){return!sM(e)&&!isNaN(e)})),Math.max.apply(Math,eM(eM([],n,!1),[sM(t.max)?-1/0:t.max],!1)))});else{var i=this.scaleDefs,a=r.field,o=r.min,s=r.max;"time"!==r.type&&(o>0&&!fN(i,[a,"min"])&&r.change({min:0}),s<=0&&!fN(i,[a,"max"])&&r.change({max:0}))}},t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return n.background=this.background,n},t}(kY),OW=function(e){function t(t){var n=e.call(this,t)||this;n.type="line";var r=t.sortable,i=void 0!==r&&r;return n.sortable=i,n}return KI(t,e),t}(dW),AW=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"];function IW(e,t,n,r,i){var a=XY(t,i,!i,"r"),o=e.parsePoints(t.points),s=o[0];if(t.isStack)s=o[1];else if(o.length>1){for(var l=n.addGroup(),c=0,u=o;c<u.length;c++){var h=u[c];l.addShape({type:"marker",attrs:QI(QI(QI({},a),{symbol:BY[r]||r}),h)})}return l}return n.addShape({type:"marker",attrs:QI(QI(QI({},a),{symbol:BY[r]||r}),s)})}xY("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(e){return QY(e)}}),uM(AW,(function(e){bY("point","hollow-".concat(e),{draw:function(t,n){return IW(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:BY[e]||e,style:{r:4.5,stroke:n,fill:null}}}})}));var MW=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return KI(t,e),t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return QI(QI({},n),{isStack:!!this.getAdjust("stack")})},t}(kY);xY("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(e){var t=[];return uM(e.x,(function(n,r){var i=e.y[r];t.push({x:n,y:i})})),t}}),bY("polygon","polygon",{draw:function(e,t){if(!cN(e.points)){var n=XY(e,!0,!0),r=this.parsePath(function(e){for(var t=e[0],n=1,r=[["M",t.x,t.y]];n<e.length;){var i=e[n];i.x===e[n-1].x&&i.y===e[n-1].y||(r.push(["L",i.x,i.y]),i.x===t.x&&i.y===t.y&&n<e.length-1&&(t=e[n+1],r.push(["Z"]),r.push(["M",t.x,t.y]),n++)),n++}return hN(OM(r),t)||r.push(["L",t.x,t.y]),r.push(["Z"]),r}(e.points));return t.addShape("path",{attrs:QI(QI({},n),{path:r}),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}});var NW=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return KI(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=r.x,a=r.y;if(!lM(i)||!lM(a)){var o=this.getXScale(),s=this.getYScale(),l=.5/o.values.length,c=.5/s.values.length;o.isCategory&&s.isCategory?(i=[i-l,i-l,i+l,i+l],a=[a-c,a+c,a+c,a-c]):lM(i)?(i=[(n=i)[0],n[0],n[1],n[1]],a=[a-c/2,a+c/2,a+c/2,a-c/2]):lM(a)&&(a=[(n=a)[0],n[1],n[1],n[0]],i=[i-l/2,i-l/2,i+l/2,i+l/2]),r.x=i,r.y=a}return r},t}(kY);xY("schema",{defaultShapeType:""});var PW=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return KI(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=oG(this.coordinate)):(this.defaultSize||(this.defaultSize=kW(this)),n=this.defaultSize);return r.size=n,r},t}(kY);xY("violin",{defaultShapeType:"violin",getDefaultPoints:function(e){var t=e.size/2,n=[],r=function(e){if(!lM(e))return[];var t=vM(e);return pN(e,(function(e){return e/t}))}(e._size);return uM(e.y,(function(i,a){var o=r[a]*t,s=0===a,l=a===e.y.length-1;n.push({isMin:s,isMax:l,x:e.x-o,y:i}),n.unshift({isMin:s,isMax:l,x:e.x+o,y:i})})),n}}),bY("violin","violin",{draw:function(e,t){var n=XY(e,!0,!0),r=this.parsePath(qY(e.points));return t.addShape("path",{attrs:QI(QI({},n),{path:r}),name:"violin"})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:e.color}}}});var FW=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return KI(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=oG(this.coordinate)):(this.defaultSize||(this.defaultSize=kW(this)),n=this.defaultSize);return r.size=n,r._size=fN(t._origin,[this._sizeField]),r},t.prototype.initAttributes=function(){var t=this.attributeOption,n=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete t.size,e.prototype.initAttributes.call(this)},t}(kY);function LW(e,t){return["C",1*e.x/2+1*t.x/2,e.y,1*e.x/2+1*t.x/2,t.y,t.x,t.y]}function RW(e,t){var n=[];n.push({x:t.x,y:t.y}),n.push(e);var r=["Q"];return uM(n,(function(e){r.push(e.x,e.y)})),r}bY("area","line",{draw:function(e,t){var n=mW(e,!0,!1,this);return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,stroke:e.color,fill:null}}}}),bY("area","smooth",{draw:function(e,t){var n=mW(e,!1,!0,this,gW(this.coordinate));return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,fill:e.color}}}}),bY("area","smooth-line",{draw:function(e,t){var n=mW(e,!0,!0,this,gW(this.coordinate));return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,stroke:e.color,fill:null}}}}),bY("edge","arc",{draw:function(e,t){var n,r=XY(e,!0,!1,"lineWidth"),i=e.points,a=i.length>2?"weight":"normal";if(e.isInCircle){var o={x:0,y:1};return"normal"===a?n=function(e,t,n){var r=RW(t,n),i=[["M",e.x,e.y]];return i.push(r),i}(i[0],i[1],o):(r.fill=r.stroke,n=function(e,t){var n=RW(e[1],t),r=RW(e[3],t),i=[["M",e[0].x,e[0].y]];return i.push(r),i.push(["L",e[3].x,e[3].y]),i.push(["L",e[2].x,e[2].y]),i.push(n),i.push(["L",e[1].x,e[1].y]),i.push(["L",e[0].x,e[0].y]),i.push(["Z"]),i}(i,o)),n=this.parsePath(n),t.addShape("path",{attrs:QI(QI({},r),{path:n})})}if("normal"===a)return n=Jj(((i=this.parsePoints(i))[1].x+i[0].x)/2,i[0].y,Math.abs(i[1].x-i[0].x)/2,Math.PI,2*Math.PI),t.addShape("path",{attrs:QI(QI({},r),{path:n})});var s=LW(i[1],i[3]),l=LW(i[2],i[0]);return n=[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],s,["L",i[3].x,i[3].y],["L",i[2].x,i[2].y],l,["Z"]],n=this.parsePath(n),r.fill=r.stroke,t.addShape("path",{attrs:QI(QI({},r),{path:n})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),bY("edge","smooth",{draw:function(e,t){var n=XY(e,!0,!1,"lineWidth"),r=e.points,i=this.parsePath(function(e,t){var n=LW(e,t),r=[["M",e.x,e.y]];return r.push(n),r}(r[0],r[1]));return t.addShape("path",{attrs:QI(QI({},n),{path:i})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});bY("edge","vhv",{draw:function(e,t){var n=XY(e,!0,!1,"lineWidth"),r=e.points,i=this.parsePath(function(e,t){var n=[];n.push({x:e.x,y:.6666666666666667*e.y+.3333333333333333*t.y}),n.push({x:t.x,y:.6666666666666667*e.y+.3333333333333333*t.y}),n.push(t);var r=[["M",e.x,e.y]];return uM(n,(function(e){r.push(["L",e.x,e.y])})),r}(r[0],r[1]));return t.addShape("path",{attrs:QI(QI({},n),{path:i})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),bY("interval","funnel",{getPoints:function(e){return e.size=2*e.size,xW(e)},draw:function(e,t){var n=XY(e,!1,!0),r=this.parsePath(wW(e.points,e.nextPoints,!1));return t.addShape("path",{attrs:QI(QI({},n),{path:r}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),bY("interval","hollow-rect",{draw:function(e,t){var n=XY(e,!0,!1),r=t,i=null==e?void 0:e.background;if(i){r=t.addGroup();var a=KY(e),o=SW(e,this.parsePoints(e.points),this.coordinate);r.addShape("path",{attrs:QI(QI({},a),{path:o}),zIndex:-1,name:"element-background"})}var s=this.parsePath(bW(e.points)),l=r.addShape("path",{attrs:QI(QI({},n),{path:s}),name:"interval"});return i?r:l},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}}),bY("interval","line",{getPoints:function(e){return n=(t=e).x,r=t.y,i=t.y0,lM(r)?r.map((function(e,t){return{x:lM(n)?n[t]:n,y:e}})):[{x:n,y:i},{x:n,y:r}];var t,n,r,i},draw:function(e,t){var n=XY(e,!0,!1,"lineWidth"),r=rG(QI({},n),["fill"]),i=this.parsePath(bW(e.points,!1));return t.addShape("path",{attrs:QI(QI({},r),{path:i}),name:"interval"})},getMarker:function(e){return{symbol:function(e,t,n){return[["M",e,t-n],["L",e,t+n]]},style:{r:5,stroke:e.color}}}}),bY("interval","pyramid",{getPoints:function(e){return e.size=2*e.size,xW(e)},draw:function(e,t){var n=XY(e,!1,!0),r=this.parsePath(wW(e.points,e.nextPoints,!0));return t.addShape("path",{attrs:QI(QI({},n),{path:r}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),bY("interval","tick",{getPoints:function(e){return function(e){var t,n,r=e.x,i=e.y,a=e.y0,o=e.size;lM(i)?(t=i[0],n=i[1]):(t=a,n=i);var s=r+o/2,l=r-o/2;return[{x:r,y:t},{x:r,y:n},{x:l,y:t},{x:s,y:t},{x:l,y:n},{x:s,y:n}]}(e)},draw:function(e,t){var n,r=XY(e,!0,!1),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y]]);return t.addShape("path",{attrs:QI(QI({},r),{path:i}),name:"interval"})},getMarker:function(e){return{symbol:function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},style:{r:5,stroke:e.color}}}});function DW(e,t){var n=UY(e.points,e.connectNulls,e.showSinglePoint),r=[];return uM(n,(function(e){var n=function(e,t){var n=[];return uM(e,(function(r,i){var a=e[i+1];if(n.push(r),a){var o=function(e,t,n){var r,i=e.x,a=e.y,o=t.x,s=t.y;switch(n){case"hv":r=[{x:o,y:a}];break;case"vh":r=[{x:i,y:s}];break;case"hvh":var l=(o+i)/2;r=[{x:l,y:a},{x:l,y:s}];break;case"vhv":var c=(a+s)/2;r=[{x:i,y:c},{x:o,y:c}]}return r}(r,a,t);n=n.concat(o)}})),n}(e,t);r=r.concat(function(e){return e.map((function(e,t){return 0===t?["M",e.x,e.y]:["L",e.x,e.y]}))}(n))})),QI(QI({},XY(e,!0,!1,"lineWidth")),{path:r})}function BW(e){var t=lM(e)?e:[e],n=t[0],r=t[t.length-1],i=t.length>1?t[1]:n;return{min:n,max:r,min1:i,max1:t.length>3?t[3]:r,median:t.length>2?t[2]:i}}function $W(e,t,n){var r,i=n/2;if(lM(t)){var a=BW(t),o=a.min,s=a.max,l=a.median,c=a.min1,u=e-i,h=e+i;r=[[u,s],[h,s],[e,s],[e,p=a.max1],[u,c],[u,p],[h,p],[h,c],[e,c],[e,o],[u,o],[h,o],[u,l],[h,l]]}else{t=sM(t)?.5:t;var p,d=BW(e),f=(o=d.min,s=d.max,l=d.median,t-i),m=t+i;r=[[o,f],[o,m],[o,t],[c=d.min1,t],[c,f],[c,m],[p=d.max1,m],[p,f],[p,t],[s,t],[s,f],[s,m],[l,f],[l,m]]}return r.map((function(e){return{x:e[0],y:e[1]}}))}function zW(e){var t=(lM(e)?e:[e]).sort((function(e,t){return t-e}));return function(e,t,n){if(wM(e))return e.padEnd(t,n);if(lM(e)){var r=e.length;if(r<t)for(var i=t-r,a=0;a<i;a++)e.push(n)}return e}(t,4,t[t.length-1])}function HW(e,t,n){var r=zW(t);return[{x:e,y:r[0]},{x:e,y:r[1]},{x:e-n/2,y:r[2]},{x:e-n/2,y:r[1]},{x:e+n/2,y:r[1]},{x:e+n/2,y:r[2]},{x:e,y:r[2]},{x:e,y:r[3]}]}function jW(e,t){var n=Math.abs(e[0].x-e[2].x),r=Math.abs(e[0].y-e[2].y),i=Math.min(n,r);return t&&(i=FM(t,0,Math.min(n,r))),i/=2,{x:(e[0].x+e[2].x)/2-i,y:(e[0].y+e[2].y)/2-i,width:2*i,height:2*i}}uM(["hv","vh","hvh","vhv"],(function(e){bY("line",e,{draw:function(t,n){var r=DW(t,e);return n.addShape({type:"path",attrs:r,name:"line"})},getMarker:function(t){return JY(t,e)}})})),uM(["cross","tick","plus","hyphen","line"],(function(e){bY("point",e,{draw:function(t,n){return IW(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:BY[e],style:{r:4.5,stroke:n,fill:null}}}})})),bY("point","image",{draw:function(e,t){var n=XY(e,!1,!1,"r").r,r=this.parsePoints(e.points),i=r[0];if(e.isStack)i=r[1];else if(r.length>1){for(var a=t.addGroup(),o=0,s=r;o<s.length;o++){var l=s[o];a.addShape("image",{attrs:{x:l.x-n/2,y:l.y-n,width:n,height:n,img:e.shape[1]}})}return a}return t.addShape("image",{attrs:{x:i.x-n/2,y:i.y-n,width:n,height:n,img:e.shape[1]}})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),uM(AW,(function(e){bY("point",e,{draw:function(t,n){return IW(this,t,n,e,!1)},getMarker:function(t){var n=t.color;return{symbol:BY[e]||e,style:{r:4.5,fill:n}}}})})),bY("schema","box",{getPoints:function(e){return $W(e.x,e.y,e.size)},draw:function(e,t){var n,r=XY(e,!0,!1),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y],["L",n[6].x,n[6].y],["L",n[7].x,n[7].y],["L",n[4].x,n[4].y],["Z"],["M",n[8].x,n[8].y],["L",n[9].x,n[9].y],["M",n[10].x,n[10].y],["L",n[11].x,n[11].y],["M",n[12].x,n[12].y],["L",n[13].x,n[13].y]]);return t.addShape("path",{attrs:QI(QI({},r),{path:i,name:"schema"})})},getMarker:function(e){return{symbol:function(e,t,n){var r=$W(e,[t-6,t-3,t,t+3,t+6],n);return[["M",r[0].x+1,r[0].y],["L",r[1].x-1,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x+1,r[10].y],["L",r[11].x-1,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]},style:{r:6,lineWidth:1,stroke:e.color}}}}),bY("schema","candle",{getPoints:function(e){return HW(e.x,e.y,e.size)},draw:function(e,t){var n,r=XY(e,!0,!0),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[4].x,n[4].y],["L",n[5].x,n[5].y],["Z"],["M",n[6].x,n[6].y],["L",n[7].x,n[7].y]]);return t.addShape("path",{attrs:QI(QI({},r),{path:i,name:"schema"})})},getMarker:function(e){var t=e.color;return{symbol:function(e,t,n){var r=HW(e,[t+7.5,t+3,t-3,t-7.5],n);return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}}),bY("polygon","square",{draw:function(e,t){if(!cN(e.points)){var n=XY(e,!0,!0),r=this.parsePoints(e.points);return t.addShape("rect",{attrs:QI(QI({},n),jW(r,e.size)),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),bY("violin","smooth",{draw:function(e,t){var n=XY(e,!0,!0),r=this.parsePath(WY(e.points));return t.addShape("path",{attrs:QI(QI({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{stroke:null,r:4,fill:e.color}}}}),bY("violin","hollow",{draw:function(e,t){var n=XY(e,!0,!1),r=this.parsePath(qY(e.points));return t.addShape("path",{attrs:QI(QI({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:null,stroke:e.color}}}}),bY("violin","hollow-smooth",{draw:function(e,t){var n=XY(e,!0,!1),r=this.parsePath(WY(e.points));return t.addShape("path",{attrs:QI(QI({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:null,stroke:e.color}}}});var GW=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getLabelValueDir=function(e){var t=e.points;return t[0].y<=t[2].y?1:-1},t.prototype.getLabelOffsetPoint=function(t,n,r,i){var a,o=e.prototype.getLabelOffsetPoint.call(this,t,n,r),s=this.getCoordinate(),l=s.isTransposed?"x":"y",c=this.getLabelValueDir(t.mappingData);return o=QI(QI({},o),((a={})[l]=o[l]*c,a)),s.isReflect("x")&&(o=QI(QI({},o),{x:-1*o.x})),s.isReflect("y")&&(o=QI(QI({},o),{y:-1*o.y})),o},t.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.theme;return oN({},n,r.labels,"middle"===e.position?{offset:0}:{},e)},t.prototype.setLabelPosition=function(e,t,n,r){var i,a,o,s,l=this.getCoordinate(),c=l.isTransposed,u=t.points,h=l.convert(u[0]),p=l.convert(u[2]),d=this.getLabelValueDir(t),f=lM(t.shape)?t.shape[0]:t.shape;if("funnel"===f||"pyramid"===f){var m=fN(t,"nextPoints"),g=fN(t,"points");if(m){var y=l.convert(g[0]),v=l.convert(g[1]),E=l.convert(m[0]),x=l.convert(m[1]);c?(i=Math.min(E.y,y.y),o=Math.max(E.y,y.y),a=(v.x+x.x)/2,s=(y.x+E.x)/2):(i=Math.min((v.y+x.y)/2,(y.y+E.y)/2),o=Math.max((v.y+x.y)/2,(y.y+E.y)/2),a=x.x,s=y.x)}else i=Math.min(p.y,h.y),o=Math.max(p.y,h.y),a=p.x,s=h.x}else i=Math.min(p.y,h.y),o=Math.max(p.y,h.y),a=p.x,s=h.x;switch(r){case"right":e.x=a,e.y=(i+o)/2,e.textAlign=fN(e,"textAlign",d>0?"left":"right");break;case"left":e.x=s,e.y=(i+o)/2,e.textAlign=fN(e,"textAlign",d>0?"left":"right");break;case"bottom":c&&(e.x=(a+s)/2),e.y=o,e.textAlign=fN(e,"textAlign","center"),e.textBaseline=fN(e,"textBaseline",d>0?"bottom":"top");break;case"middle":c&&(e.x=(a+s)/2),e.y=(i+o)/2,e.textAlign=fN(e,"textAlign","center"),e.textBaseline=fN(e,"textBaseline","middle");break;case"top":c&&(e.x=(a+s)/2),e.y=i,e.textAlign=fN(e,"textAlign","center"),e.textBaseline=fN(e,"textBaseline",d>0?"bottom":"top")}},t}(RY),VW=Math.PI/2,YW=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=0;if(RM(e))n=e;else if(wM(e)&&-1!==e.indexOf("%")){var r=t.getRadius();t.innerRadius>0&&(r*=1-t.innerRadius),n=.01*parseFloat(e)*r}return n},t.prototype.getLabelItems=function(t){var n=e.prototype.getLabelItems.call(this,t),r=this.geometry.getYScale();return pN(n,(function(e){if(e&&r){var t=r.scale(fN(e.data,r.field));return QI(QI({},e),{percent:t})}return e}))},t.prototype.getLabelAlign=function(e){var t,n=this.getCoordinate();if(e.labelEmit)t=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?"left":"right";else if(n.isTransposed){var r=n.getCenter(),i=e.offset;t=Math.abs(e.x-r.x)<1?"center":e.angle>Math.PI||e.angle<=0?i>0?"left":"right":i>0?"right":"left"}else t="center";return t},t.prototype.getLabelPoint=function(e,t,n){var r,i=1,a=e.content[n];this.isToMiddle(t)?r=this.getMiddlePoint(t.points):(1===e.content.length&&0===n?n=1:0===n&&(i=-1),r=this.getArcPoint(t,n));var o=e.offset*i,s=this.getPointAngle(r),l=e.labelEmit,c=this.getCirclePoint(s,o,r,l);return 0===c.r?c.content="":(c.content=a,c.angle=s,c.color=t.color),c.rotate=e.autoRotate?this.getLabelRotate(s,o,l):e.rotate,c.start={x:r.x,y:r.y},c},t.prototype.getArcPoint=function(e,t){return void 0===t&&(t=0),lM(e.x)||lM(e.y)?{x:lM(e.x)?e.x[t]:e.x,y:lM(e.y)?e.y[t]:e.y}:{x:e.x,y:e.y}},t.prototype.getPointAngle=function(e){return cG(this.getCoordinate(),e)},t.prototype.getCirclePoint=function(e,t,n,r){var i=this.getCoordinate(),a=i.getCenter(),o=sG(i,n);if(0===o)return QI(QI({},a),{r:o});var s=e;i.isTransposed&&o>t&&!r?s=e+2*Math.asin(t/(2*o)):o+=t;return{x:a.x+o*Math.cos(s),y:a.y+o*Math.sin(s),r:o}},t.prototype.getLabelRotate=function(e,t,n){var r=e+VW;return n&&(r-=VW),r&&(r>VW?r-=Math.PI:r<-VW&&(r+=Math.PI)),r},t.prototype.getMiddlePoint=function(e){var t=this.getCoordinate(),n=e.length,r={x:0,y:0};return uM(e,(function(e){r.x+=e.x,r.y+=e.y})),r.x/=n,r.y/=n,r=t.convert(r)},t.prototype.isToMiddle=function(e){return e.x.length>2},t}(RY),UW=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return KI(t,e),t.prototype.getDefaultLabelCfg=function(t,n){var r=e.prototype.getDefaultLabelCfg.call(this,t,n);return oN({},r,fN(this.geometry.theme,"pieLabels",{}))},t.prototype.getLabelOffset=function(t){return e.prototype.getLabelOffset.call(this,t)||0},t.prototype.getLabelRotate=function(e,t,n){var r;return t<0&&((r=e)>Math.PI/2&&(r-=Math.PI),r<-Math.PI/2&&(r+=Math.PI)),r},t.prototype.getLabelAlign=function(e){var t,n=this.getCoordinate().getCenter();return t=e.angle<=Math.PI/2&&e.x>=n.x?"left":"right",e.offset<=0&&(t="right"===t?"left":"right"),t},t.prototype.getArcPoint=function(e){return e},t.prototype.getPointAngle=function(e){var t,n=this.getCoordinate(),r={x:lM(e.x)?e.x[0]:e.x,y:e.y[0]},i={x:lM(e.x)?e.x[1]:e.x,y:e.y[1]},a=cG(n,r);if(e.points&&e.points[0].y===e.points[1].y)t=a;else{var o=cG(n,i);a>=o&&(o+=2*Math.PI),t=a+(o-a)/2}return t},t.prototype.getCirclePoint=function(e,t){var n=this.getCoordinate(),r=n.getCenter(),i=n.getRadius()+t;return QI(QI({},Qj(r.x,r.y,i,e)),{angle:e,r:i})},t}(YW);function qW(e,t,n){var r=e.filter((function(e){return!e.invisible}));r.sort((function(e,t){return e.y-t.y}));var i,a=!0,o=n.minY,s=n.maxY,l=Math.abs(o-s),c=0,u=Number.MIN_VALUE,h=r.map((function(e){return e.y>c&&(c=e.y),e.y<u&&(u=e.y),{content:e.content,size:t,targets:[e.y-o],pos:null}}));for(u-=o,c-o>l&&(l=c-o);a;)for(h.forEach((function(e){var t=(Math.min.apply(u,e.targets)+Math.max.apply(u,e.targets))/2;e.pos=Math.min(Math.max(u,t-e.size/2),l-e.size),e.pos=Math.max(0,e.pos)})),a=!1,i=h.length;i--;)if(i>0){var p=h[i-1],d=h[i];p.pos+p.size>d.pos&&(p.size+=d.size,p.targets=p.targets.concat(d.targets),p.pos+p.size>l&&(p.pos=l-p.size),h.splice(i,1),a=!0)}i=0,h.forEach((function(e){var n=o+t/2;e.targets.forEach((function(){r[i].y=e.pos+n,n+=t,i++}))}))}var WW=function(){function e(e){void 0===e&&(e={}),this.bitmap={};var t=e.xGap,n=void 0===t?1:t,r=e.yGap,i=void 0===r?8:r;this.xGap=n,this.yGap=i}return e.prototype.hasGap=function(e){for(var t=!0,n=this.bitmap,r=Math.round(e.minX),i=Math.round(e.maxX),a=Math.round(e.minY),o=Math.round(e.maxY),s=r;s<=i;s+=1)if(n[s]){if(s===r||s===i){for(var l=a;l<=o;l++)if(n[s][l]){t=!1;break}}else if(n[s][a]||n[s][o]){t=!1;break}}else n[s]={};return t},e.prototype.fillGap=function(e){for(var t=this.bitmap,n=Math.round(e.minX),r=Math.round(e.maxX),i=Math.round(e.minY),a=Math.round(e.maxY),o=n;o<=r;o+=1)t[o]||(t[o]={});for(o=n;o<=r;o+=this.xGap){for(var s=i;s<=a;s+=this.yGap)t[o][s]=!0;t[o][a]=!0}if(1!==this.yGap)for(o=i;o<=a;o+=1)t[n][o]=!0,t[r][o]=!0;if(1!==this.xGap)for(o=n;o<=r;o+=1)t[o][i]=!0,t[o][a]=!0},e.prototype.destroy=function(){this.bitmap={}},e}();function XW(e,t,n,r){var i=e.getCanvasBBox(),a=i.width,o=i.height,s={x:t,y:n,textAlign:"center"};switch(r){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=2*o+2;break;case 6:s.y+=2*o+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right"}return e.attr(s),e.getCanvasBBox()}var KW=dF;function QW(e){if(e.length>4)return[];var t=function(e,t){return[t.x-e.x,t.y-e.y]};return[t(e[0],e[1]),t(e[1],e[2])]}function ZW(e,t,n){void 0===t&&(t=0),void 0===n&&(n={x:0,y:0});var r=e.x,i=e.y;return{x:(r-n.x)*Math.cos(-t)+(i-n.y)*Math.sin(-t)+n.x,y:(n.x-r)*Math.sin(-t)+(i-n.y)*Math.cos(-t)+n.y}}function JW(e){var t=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=e.rotation;return n?[ZW(t[0],n,t[0]),ZW(t[1],n,t[0]),ZW(t[2],n,t[0]),ZW(t[3],n,t[0])]:t}function eX(e,t){if(e.length>4)return{min:0,max:0};var n=[];return e.forEach((function(e){n.push(KW([e.x,e.y],t))})),{min:Math.min.apply(Math,n),max:Math.max.apply(Math,n)}}function tX(e,t){return e.max>t.min&&e.min<t.max}function nX(e){return RM(e)&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0}function rX(e){return Object.values(e).every(nX)}function iX(e,t){if(!rX(e)||!rX(t))return!1;if(!e.rotation&&!t.rotation)return function(e,t,n){return void 0===n&&(n=0),!(t.x>e.x+e.width+n||t.x+t.width<e.x-n||t.y>e.y+e.height+n||t.y+t.height<e.y-n)}(e,t);for(var n=JW(e),r=JW(t),i=eM(eM([],QW(n),!0),QW(r),!0),a=0;a<i.length;a++){var o=i[a];if(!tX(eX(n,o),eX(r,o)))return!1}return!0}var aX,oX={"#5B8FF9":!0};function sX(e,t,n){return!!e.getAdjust("stack")||t.every((function(t,r){var i=n[r];return function(e,t,n){var r=e.coordinate,i=IY(t),a=aG.fromObject(i.getCanvasBBox()),o=aG.fromObject(n.getBBox());return r.isTransposed?o.height>=a.height:o.width>=a.width}(e,t,i)}))}function lX(e,t,n){return e.some((function(e){return n(e,t)}))}function cX(e,t){return lX(e,t,(function(e,t){var n,r,i,a=IY(e),o=IY(t);return n=a.getCanvasBBox(),r=o.getCanvasBBox(),void 0===(i=2)&&(i=0),Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}function uX(e,t,n){return e.some((function(e){return n(e,t)}))}function hX(e,t){return uX(e,t,(function(e,t){var n,r,i,a=IY(e),o=IY(t);return n=a.getCanvasBBox(),r=o.getCanvasBBox(),void 0===(i=2)&&(i=0),Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}var pX=iN((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant,s=(aX||(aX=document.createElement("canvas").getContext("2d")),aX);return s.font=[a,o,i,"".concat(n,"px"),r].join(" "),s.measureText(wM(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),eM([e],GM(t),!0).join("")}));function dX(e,t,n,r,i){var a,o,s=n.start,l=n.end,c=n.getWidth(),u=n.getHeight();"y"===i?(a=s.x+c/2,o=r.y<s.y?r.y:s.y):"x"===i?(a=r.x>s.x?r.x:s.x,o=s.y+u/2):"xy"===i&&(n.isPolar?(a=n.getCenter().x,o=n.getCenter().y):(a=(s.x+l.x)/2,o=(s.y+l.y)/2));var h=function(e,t,n){var r,i=t[0],a=t[1];return e.applyToMatrix([i,a,1]),"x"===n?(e.setMatrix(xF(e.getMatrix(),[["t",-i,-a],["s",.01,1],["t",i,a]])),r=xF(e.getMatrix(),[["t",-i,-a],["s",100,1],["t",i,a]])):"y"===n?(e.setMatrix(xF(e.getMatrix(),[["t",-i,-a],["s",1,.01],["t",i,a]])),r=xF(e.getMatrix(),[["t",-i,-a],["s",1,100],["t",i,a]])):"xy"===n&&(e.setMatrix(xF(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])),r=xF(e.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])),r}(e,[a,o],i);e.animate({matrix:h},t)}function fX(e,t){var n,r=OU(e,t),i=r.startAngle,a=r.endAngle;return!DM(i,.5*-Math.PI)&&i<.5*-Math.PI&&(i+=2*Math.PI),!DM(a,.5*-Math.PI)&&a<.5*-Math.PI&&(a+=2*Math.PI),0===t[5]&&(i=(n=[a,i])[0],a=n[1]),DM(i,1.5*Math.PI)&&(i=-.5*Math.PI),DM(a,-.5*Math.PI)&&(a=1.5*Math.PI),{startAngle:i,endAngle:a}}function mX(e){var t;return"M"===e[0]||"L"===e[0]?t=[e[1],e[2]]:"a"!==e[0]&&"A"!==e[0]&&"C"!==e[0]||(t=[e[e.length-2],e[e.length-1]]),t}function gX(e){var t,n,r,i=e.filter((function(e){return"A"===e[0]||"a"===e[0]}));if(0===i.length)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var a=i[0],o=i.length>1?i[1]:i[0],s=e.indexOf(a),l=e.indexOf(o),c=mX(e[s-1]),u=mX(e[l-1]),h=fX(c,a),p=h.startAngle,d=h.endAngle,f=fX(u,o),m=f.startAngle,g=f.endAngle;DM(p,m)&&DM(d,g)?(n=p,r=d):(n=Math.min(p,m),r=Math.max(d,g));var y=a[1],v=i[i.length-1][1];return y<v?(y=(t=[v,y])[0],v=t[1]):y===v&&(v=0),{startAngle:n,endAngle:r,radius:y,innerRadius:v}}function yX(e,t,n){if(e.isGroup())uM(e.getChildren(),(function(e){yX(e,t,n)}));else{var r=e.getBBox(),i=(r.minX+r.maxX)/2,a=(r.minY+r.maxY)/2;if(e.applyToMatrix([i,a,1]),"zoomIn"===n){var o=xF(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);e.setMatrix(o),e.animate({matrix:xF(e.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},t)}else e.animate({matrix:xF(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},QI(QI({},t),{callback:function(){e.remove(!0)}}))}}function vX(e){return[kN.TOP,kN.BOTTOM].includes(e)?{offsetX:0,offsetY:e===kN.TOP?-8:8,style:{textAlign:"center",textBaseline:e===kN.TOP?"bottom":"top"}}:[kN.LEFT,kN.RIGHT].includes(e)?{offsetX:e===kN.LEFT?-8:8,offsetY:0,style:{textAlign:e===kN.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function EX(e,t,n){return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}var xX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){return oN({},e.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.getRegion=function(e,t){var n=2*Math.PI/e,r=-1*Math.PI/2+n*t,i=.5/(1+1/Math.sin(n/2)),a=EX({x:.5,y:.5},.5-i,r),o=5*Math.PI/4,s=1*Math.PI/4;return{start:EX(a,i,o),end:EX(a,i,s)}},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg,r=n.fields,i=n.type,a=r[0];if(!a)throw new Error("No `fields` specified!");var o=this.getFieldValues(e,a),s=o.length,l=[];return o.forEach((function(n,r){var c=[{field:a,value:n,values:o}],u=rM(e,t.getFacetDataFilter(c)),h={type:i,data:u,region:t.getRegion(s,r),columnValue:n,columnField:a,columnIndex:r,columnValuesLength:s,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};l.push(h)})),l},t.prototype.getXAxisOption=function(e,t,n,r){return n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;uM(this.facets,(function(t){var n=t.columnValue,r=t.view,i=fN(e.cfg.title,"formatter"),a=oN({position:["50%","0%"],content:i?i(n):n},vX(kN.TOP),e.cfg.title);r.annotation().text(a)}))},t}(wG),bX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){return oN({},e.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg.fields,r=this.cfg.cols,i=n[0];if(!i)throw new Error("No `fields` specified!");var a=this.getFieldValues(e,i),o=a.length;r=r||o;var s=this.getPageCount(o,r),l=[];return a.forEach((function(n,c){var u=t.getRowCol(c,r),h=u.row,p=u.col,d=[{field:i,value:n,values:a}],f=rM(e,t.getFacetDataFilter(d)),m={type:t.cfg.type,data:f,region:t.getRegion(s,r,p,h),columnValue:n,rowValue:n,columnField:i,rowField:null,columnIndex:p,rowIndex:h,columnValuesLength:r,rowValuesLength:s,total:o};l.push(m)})),l},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1&&r.columnValuesLength*r.rowIndex+r.columnIndex+1+r.columnValuesLength<=r.total?QI(QI({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?QI(QI({},n),{title:null,label:null}):n},t.prototype.renderTitle=function(){var e=this;uM(this.facets,(function(t){var n=t.columnValue,r=t.view,i=fN(e.cfg.title,"formatter"),a=oN({position:["50%","0%"],content:i?i(n):n},vX(kN.TOP),e.cfg.title);r.annotation().text(a)}))},t.prototype.getPageCount=function(e,t){return Math.floor((e+t-1)/t)},t.prototype.getRowCol=function(e,t){return{row:Math.floor(e/t),col:e%t}},t}(wG),CX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){return oN({},e.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:QI({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:QI({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){for(var t=this.cfg,n=t.fields,r=t.type,i=n.length,a=i,o=[],s=0;s<a;s++)for(var l=n[s],c=0;c<i;c++){var u=n[c],h={type:r,data:e,region:this.getRegion(i,a,s,c),columnValue:l,rowValue:u,columnField:l,rowField:u,columnIndex:s,rowIndex:c,columnValuesLength:a,rowValuesLength:i};o.push(h)}return o},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?QI(QI({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?QI(QI({},n),{title:null,label:null}):n},t.prototype.renderTitle=function(){var e=this;uM(this.facets,(function(t,n){var r=t.columnIndex,i=t.rowIndex,a=t.columnValuesLength;t.rowValuesLength;var o=t.columnValue,s=t.rowValue,l=t.view;if(0===i){var c=fN(e.cfg.columnTitle,"formatter"),u=oN({position:["50%","0%"],content:c?c(o):o},vX(kN.TOP),e.cfg.columnTitle);l.annotation().text(u)}if(r===a-1){c=fN(e.cfg.rowTitle,"formatter"),u=oN({position:["100%","50%"],content:c?c(s):s},vX(kN.RIGHT),e.cfg.rowTitle);l.annotation().text(u)}}))},t}(wG),SX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getDefaultCfg=function(){return oN({},e.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this),transpose:!1})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.beforeEachView=function(e,t){this.cfg.transpose?t.columnIndex%2==0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():t.rowIndex%2!=0&&e.coordinate().reflect("y")},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.generateFacets=function(e){var t,n,r=this,i=this.cfg.fields[0],a=[],o=1,s=1,l=[""],c=[""];return this.cfg.transpose?(t=i,l=this.getFieldValues(e,t).slice(0,2),o=l.length):(n=i,c=this.getFieldValues(e,n).slice(0,2),s=c.length),l.forEach((function(i,u){c.forEach((function(h,p){var d=[{field:t,value:i,values:l},{field:n,value:h,values:c}],f=rM(e,r.getFacetDataFilter(d)),m={type:r.cfg.type,data:f,region:r.getRegion(s,o,u,p),columnValue:i,rowValue:h,columnField:t,rowField:n,columnIndex:u,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(m)}))})),a},t.prototype.getXAxisOption=function(e,t,n,r){return 1===r.columnIndex||1===r.rowIndex?QI(QI({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;uM(this.facets,(function(t,n){var r=t.columnValue,i=t.rowValue,a=t.view,o=fN(e.cfg.title,"formatter");if(e.cfg.transpose){var s=oN({position:["50%","0%"],content:o?o(r):r},vX(kN.TOP),e.cfg.title);a.annotation().text(s)}else{s=oN({position:["100%","50%"],content:o?o(i):i},vX(kN.RIGHT),e.cfg.title);a.annotation().text(s)}}))},t}(wG),wX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.getDefaultCfg=function(){return oN({},e.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:QI({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:QI({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.generateFacets=function(e){var t=this,n=this.cfg.fields,r=n[0],i=n[1],a=[],o=1,s=1,l=[""],c=[""];return r&&(l=this.getFieldValues(e,r),o=l.length),i&&(c=this.getFieldValues(e,i),s=c.length),l.forEach((function(n,u){c.forEach((function(h,p){var d=[{field:r,value:n,values:l},{field:i,value:h,values:c}],f=rM(e,t.getFacetDataFilter(d)),m={type:t.cfg.type,data:f,region:t.getRegion(s,o,u,p),columnValue:n,rowValue:h,columnField:r,rowField:i,columnIndex:u,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(m)}))})),a},t.prototype.renderTitle=function(){var e=this;uM(this.facets,(function(t,n){var r=t.columnIndex,i=t.rowIndex,a=t.columnValuesLength,o=t.columnValue,s=t.rowValue,l=t.view;if(0===i){var c=fN(e.cfg.columnTitle,"formatter"),u=oN({position:["50%","0%"],content:c?c(o):o},vX(kN.TOP),e.cfg.columnTitle);l.annotation().text(u)}if(r===a-1){c=fN(e.cfg.rowTitle,"formatter"),u=oN({position:["100%","50%"],content:c?c(s):s},vX(kN.RIGHT),e.cfg.rowTitle);l.annotation().text(u)}}))},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?QI(QI({},n),{title:null,label:null}):r.columnIndex!==Math.floor((r.columnValuesLength-1)/2)?QI(QI({},n),{title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?QI(QI({},n),{title:null,label:null}):r.rowIndex!==Math.floor((r.rowValuesLength-1)/2)?QI(QI({},n),{title:null}):n},t}(wG),TX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return KI(t,e),t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.init=function(){e.prototype.init.call(this),this.view.on(NN.AFTER_RENDER,this.afterChartRender)},t.prototype.getDefaultCfg=function(){return oN({},e.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.generateFacets=function(e){if(!this.cfg.fields.length)throw new Error("Please specify for the fields for rootFacet!");var t=[],n={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return t.push(n),n.children=this.getChildFacets(e,1,t),this.setRegion(t),t},t.prototype.setRegion=function(e){var t=this;this.forceColIndex(e),e.forEach((function(e){e.region=t.getRegion(e.rowValuesLength,e.columnValuesLength,e.columnIndex,e.rowIndex)}))},t.prototype.getRegion=function(e,t,n,r){var i=1/t,a=1/e,o={x:i*n,y:a*r};return{start:o,end:{x:o.x+i,y:o.y+2*a/3}}},t.prototype.forceColIndex=function(e){var t=this,n=[],r=0;e.forEach((function(e){t.isLeaf(e)&&(n.push(e),e.columnIndex=r,r++)})),n.forEach((function(e){e.columnValuesLength=n.length}));for(var i=this.cfg.fields.length-1;i>=0;i--)for(var a=0,o=this.getFacetsByLevel(e,i);a<o.length;a++){var s=o[a];this.isLeaf(s)||(s.originColIndex=s.columnIndex,s.columnIndex=this.getRegionIndex(s.children),s.columnValuesLength=n.length)}},t.prototype.getFacetsByLevel=function(e,t){var n=[];return e.forEach((function(e){e.rowIndex===t&&n.push(e)})),n},t.prototype.getRegionIndex=function(e){var t=e[0];return(e[e.length-1].columnIndex-t.columnIndex)/2+t.columnIndex},t.prototype.isLeaf=function(e){return!e.children||!e.children.length},t.prototype.getRows=function(){return this.cfg.fields.length+1},t.prototype.getChildFacets=function(e,t,n){var r=this,i=this.cfg.fields;if(!(i.length<t)){var a=[],o=i[t-1],s=this.getFieldValues(e,o);return s.forEach((function(i,l){var c=[{field:o,value:i,values:s}],u=e.filter(r.getFacetDataFilter(c));if(u.length){var h={type:r.cfg.type,data:u,region:null,columnValue:i,rowValue:"",columnField:o,rowField:"",columnIndex:l,rowValuesLength:r.getRows(),columnValuesLength:1,rowIndex:t,children:r.getChildFacets(u,t+1,n)};a.push(h),n.push(h)}})),a}},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.renderTitle=function(){var e=this;uM(this.facets,(function(t){var n=t.columnValue,r=t.view,i=fN(e.cfg.title,"formatter"),a=oN({position:["50%","0%"],content:i?i(n):n},vX(kN.TOP),e.cfg.title);r.annotation().text(a)}))},t.prototype.drawLines=function(e){var t=this;e.forEach((function(e){if(!t.isLeaf(e)){var n=e.children;t.addFacetLines(e,n)}}))},t.prototype.addFacetLines=function(e,t){var n=this,r=e.view.coordinateBBox,i={x:r.x+r.width/2,y:r.y+r.height};t.forEach((function(e){var t=e.view.coordinateBBox,r={x:t.bl.x+(t.tr.x-t.bl.x)/2,y:t.tr.y},a={x:i.x,y:i.y+(r.y-i.y)/2},o={x:r.x,y:a.y};n.drawLine([i,a,o,r])}))},t.prototype.getPath=function(e){var t=[];return this.cfg.line.smooth?(t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach((function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},t.prototype.drawLine=function(e){var t=this.getPath(e),n=this.cfg.line.style;this.container.addShape("path",{attrs:tN({path:t},n)})},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?QI(QI({},n),{title:null,label:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.originColIndex&&0!==r.columnIndex?QI(QI({},n),{title:null,label:null}):n},t}(wG);function kX(e){var t=eM([],e,!0);t.sort((function(e,t){return e-t}));var n=t.length;return 0===n?0:n%2==1?t[(n-1)/2]:(t[n/2]+t[n/2-1])/2}function _X(e,t){if(!t)return null;var n,r,i;switch(e){case"start":return 0;case"center":return.5;case"end":return 1;case"median":n=t.isCategory?kX(t.values.map((function(e,t){return t}))):kX(t.values);break;case"mean":n=t.isCategory?(t.values.length-1)/2:(r=t.values,i=CM(r,(function(e,t){return e+(isNaN(t)||!RM(t)?0:t)}),0),0===r.length?0:i/r.length);break;case"min":n=t.isCategory?0:t[e];break;case"max":n=t.isCategory?t.values.length-1:t[e];break;default:n=e}return t.scale(n)}var OX=["regionFilter","shape"],AX=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(wN.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(wN.BG).addGroup(),n.option=[],n}return KI(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.layout=function(){this.update()},t.prototype.render=function(){},t.prototype.update=function(){var e=this;this.onAfterRender((function(){var t=new Map;uM(e.option,(function(n){if(nM(OX,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}})),e.cache=e.syncCache(t)}));var t=new Map;uM(this.option,(function(n){if(!nM(OX,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}})),this.cache=this.syncCache(t)},t.prototype.clear=function(t){void 0===t&&(t=!1),e.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},t.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},t.prototype.clearComponents=function(){this.getComponents().forEach((function(e){e.component.destroy()})),this.cache.clear()},t.prototype.onAfterRender=function(e){this.view.getOptions().animate?this.view.geometries.forEach((function(t){t.animateOption&&t.once(FN.AFTER_DRAW_ANIMATE,(function(){e()}))})):this.view.getRootView().once(NN.AFTER_RENDER,(function(){e()}))},t.prototype.createAnnotation=function(e){var t=e.type,n=$H[qM(t)];if(n){var r=this.getAnnotationTheme(t),i=this.getAnnotationCfg(t,e,r);return{component:new n(i),layer:this.isTop(i)?wN.FORE:wN.BG,direction:kN.NONE,type:ON.ANNOTATION,extra:e}}},t.prototype.annotation=function(e){this.option.push(e)},t.prototype.arc=function(e){return this.annotation(QI({type:"arc"},e)),this},t.prototype.image=function(e){return this.annotation(QI({type:"image"},e)),this},t.prototype.line=function(e){return this.annotation(QI({type:"line"},e)),this},t.prototype.region=function(e){return this.annotation(QI({type:"region"},e)),this},t.prototype.text=function(e){return this.annotation(QI({type:"text"},e)),this},t.prototype.dataMarker=function(e){return this.annotation(QI({type:"dataMarker"},e)),this},t.prototype.dataRegion=function(e){this.annotation(QI({type:"dataRegion"},e))},t.prototype.regionFilter=function(e){this.annotation(QI({type:"regionFilter"},e))},t.prototype.shape=function(e){this.annotation(QI({type:"shape"},e))},t.prototype.html=function(e){this.annotation(QI({type:"html"},e))},t.prototype.parsePosition=function(e){var t=this.view.getXScale(),n=this.view.getScalesByDim("y"),r=oM(e)?e.call(null,t,n):e,i=0,a=0;if(lM(r)){var o=r[0],s=r[1];if(wM(o)&&-1!==o.indexOf("%")&&!isNaN(o.slice(0,-1)))return this.parsePercentPosition(r);i=_X(o,t),a=_X(s,Object.values(n)[0])}else if(!sM(r))for(var l=0,c=hM(r);l<c.length;l++){var u=c[l],h=r[u];u===t.field&&(i=_X(h,t)),n[u]&&(a=_X(h,n[u]))}return this.view.getCoordinate().convert({x:i,y:a})},t.prototype.getRegionPoints=function(e,t){var n,r=this,i=this.view.getXScale(),a=this.view.getScalesByDim("y"),o=Object.values(a)[0],s=i.field,l=this.view.getData(),c=lM(e)?e[0]:e[s],u=lM(t)?t[0]:t[s],h=[];return uM(l,(function(e,t){if(e[s]===c&&(n=t),t>=n){var i=r.parsePosition([e[s],e[o.field]]);i&&h.push(i)}if(e[s]===u)return!1})),h},t.prototype.parsePercentPosition=function(e){var t=parseFloat(e[0])/100,n=parseFloat(e[1])/100,r=this.view.getCoordinate(),i=r.start,a=r.end,o=Math.min(i.x,a.x),s=Math.min(i.y,a.y);return{x:r.getWidth()*t+o,y:r.getHeight()*n+s}},t.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),t=e.start,n=e.end,r=e.getWidth(),i=e.getHeight(),a={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)};return{x:a.x,y:a.y,minX:a.x,minY:a.y,maxX:a.x+r,maxY:a.y+i,width:r,height:i}},t.prototype.getAnnotationCfg=function(e,t,n){var r=this,i=this.view.getCoordinate(),a=this.view.getCanvas(),o={};if(sM(t))return null;if("arc"===e){var s=t,l=s.start,c=s.end,u=ZI(s,["start","end"]),h=this.parsePosition(l),p=this.parsePosition(c),d=cG(i,h),f=cG(i,p);d>f&&(f=2*Math.PI+f),o=QI(QI({},u),{center:i.getCenter(),radius:sG(i,h),startAngle:d,endAngle:f})}else if("image"===e){var m=t;l=m.start,c=m.end,u=ZI(m,["start","end"]);o=QI(QI({},u),{start:this.parsePosition(l),end:this.parsePosition(c),src:t.src})}else if("line"===e){var g=t;l=g.start,c=g.end,u=ZI(g,["start","end"]);o=QI(QI({},u),{start:this.parsePosition(l),end:this.parsePosition(c),text:fN(t,"text",null)})}else if("region"===e){var y=t;l=y.start,c=y.end,u=ZI(y,["start","end"]);o=QI(QI({},u),{start:this.parsePosition(l),end:this.parsePosition(c)})}else if("text"===e){var v=this.view.getData(),E=t,x=E.position,b=E.content,C=(u=ZI(E,["position","content"]),b);oM(b)&&(C=b(v)),o=QI(QI(QI({},this.parsePosition(x)),u),{content:C})}else if("dataMarker"===e){var S=t,w=(x=S.position,S.point),T=S.line,k=S.text,_=S.autoAdjust,O=S.direction;u=ZI(S,["position","point","line","text","autoAdjust","direction"]);o=QI(QI(QI({},u),this.parsePosition(x)),{coordinateBBox:this.getCoordinateBBox(),point:w,line:T,text:k,autoAdjust:_,direction:O})}else if("dataRegion"===e){var A=t,I=(l=A.start,c=A.end,A.region),M=(k=A.text,A.lineLength);u=ZI(A,["start","end","region","text","lineLength"]);o=QI(QI({},u),{points:this.getRegionPoints(l,c),region:I,text:k,lineLength:M})}else if("regionFilter"===e){var N=t,P=(l=N.start,c=N.end,N.apply),F=N.color,L=(u=ZI(N,["start","end","apply","color"]),this.view.geometries),R=[],D=function(e){e&&(e.isGroup()?e.getChildren().forEach((function(e){return D(e)})):R.push(e))};uM(L,(function(e){P?nM(P,e.type)&&uM(e.elements,(function(e){D(e.shape)})):uM(e.elements,(function(e){D(e.shape)}))})),o=QI(QI({},u),{color:F,shapes:R,start:this.parsePosition(l),end:this.parsePosition(c)})}else if("shape"===e){var B=t,$=B.render,z=ZI(B,["render"]);o=QI(QI({},z),{render:function(e){if(oM(t.render))return $(e,r.view,{parsePosition:r.parsePosition.bind(r)})}})}else if("html"===e){var H=t,j=H.html;x=H.position,z=ZI(H,["html","position"]);o=QI(QI(QI({},z),this.parsePosition(x)),{parent:a.get("el").parentNode,html:function(e){return oM(j)?j(e,r.view):j}})}var G=oN({},n,QI(QI({},o),{top:t.top,style:t.style,offsetX:t.offsetX,offsetY:t.offsetY}));return"html"!==e&&(G.container=this.getComponentContainer(G)),G.animate=this.view.getOptions().animate&&G.animate&&fN(t,"animate",G.animate),G.animateOption=oN({},sY,G.animateOption,t.animateOption),G},t.prototype.isTop=function(e){return fN(e,"top",!0)},t.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},t.prototype.getAnnotationTheme=function(e){return fN(this.view.getTheme(),["components","annotation",e],{})},t.prototype.updateOrCreate=function(e){var t=this.cache.get(this.getCacheKey(e));if(t){var n=e.type,r=this.getAnnotationTheme(n),i=this.getAnnotationCfg(n,e,r);rG(i,["container"]),t.component.update(i),nM(OX,e.type)&&t.component.render()}else(t=this.createAnnotation(e))&&(t.component.init(),nM(OX,e.type)&&t.component.render());return t},t.prototype.syncCache=function(e){var t=this,n=new Map(this.cache);return e.forEach((function(e,t){n.set(t,e)})),n.forEach((function(e,r){mM(t.option,(function(e){return r===t.getCacheKey(e)}))||(e.component.destroy(),n.delete(r))})),n},t.prototype.getCacheKey=function(e){return e},t}(nY);function IX(e,t){var n=oN({},fN(e,["components","axis","common"]),fN(e,["components","axis",t]));return fN(n,["grid"],{})}function MX(e,t,n,r){var i=[],a=t.getTicks();return e.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce((function(t,a,o){var s=a.value;if(r)i.push({points:[e.convert("y"===n?{x:0,y:s}:{x:s,y:0}),e.convert("y"===n?{x:1,y:s}:{x:s,y:1})]});else if(o){var l=(t.value+s)/2;i.push({points:[e.convert("y"===n?{x:0,y:l}:{x:l,y:0}),e.convert("y"===n?{x:1,y:l}:{x:l,y:1})]})}return a}),a[0]),i}function NX(e,t,n,r,i){var a=t.values.length,o=[],s=n.getTicks();return s.reduce((function(t,n){var s=t?t.value:n.value,l=n.value,c=(s+l)/2;return"x"===i?o.push({points:[e.convert({x:r?l:c,y:0}),e.convert({x:r?l:c,y:1})]}):o.push({points:pN(Array(a+1),(function(t,n){return e.convert({x:n/a,y:r?l:c})}))}),n}),s[0]),o}function PX(e,t){var n=fN(t,"grid");if(null===n)return!1;var r=fN(e,"grid");return!(void 0===n&&null===r)}var FX=["container"],LX=QI(QI({},sY),{appear:null}),RX=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(wN.BG).addGroup(),n.gridForeContainer=n.view.getLayer(wN.FORE).addGroup(),n.axisContainer=n.view.getLayer(wN.BG).addGroup(),n.axisForeContainer=n.view.getLayer(wN.FORE).addGroup(),n}return KI(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this,t=this.view.getCoordinate();uM(this.getComponents(),(function(n){var r,i=n.component,a=n.direction,o=n.type,s=n.extra,l=s.dim,c=s.scale,u=s.alignTick;if(o===ON.AXIS)t.isPolar?"x"===l?r=t.isTransposed?mG(t,a):xG(t):"y"===l&&(r=t.isTransposed?xG(t):mG(t,a)):r=mG(t,a);else if(o===ON.GRID)if(t.isPolar){r={items:t.isTransposed?"x"===l?NX(t,e.view.getYScales()[0],c,u,l):MX(t,c,l,u):"x"===l?MX(t,c,l,u):NX(t,e.view.getXScale(),c,u,l),center:e.view.getCoordinate().getCenter()}}else r={items:MX(t,c,l,u)};i.update(r)}))},t.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var t=new Map;this.cache.forEach((function(n,r){e.has(r)?t.set(r,n):n.component.destroy()})),this.cache=t},t.prototype.clear=function(){e.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},t.prototype.updateXAxes=function(e){var t=this.view.getXScale();if(t&&!t.isIdentity){var n=bG(this.option,t.field);if(!1!==n){var r=CG(n,kN.BOTTOM),i=wN.BG,a="x",o=this.view.getCoordinate(),s=this.getId("axis",t.field),l=this.getId("grid",t.field);if(o.isRect){if(c=this.cache.get(s))rG(h=this.getLineAxisCfg(t,n,r),FX),c.component.update(h),e.set(s,c);else c=this.createLineAxis(t,n,i,r,a),this.cache.set(s,c),e.set(s,c);if(u=this.cache.get(l))rG(h=this.getLineGridCfg(t,n,r,a),FX),u.component.update(h),e.set(l,u);else(u=this.createLineGrid(t,n,i,r,a))&&(this.cache.set(l,u),e.set(l,u))}else if(o.isPolar){var c,u;if(c=this.cache.get(s)){rG(h=o.isTransposed?this.getLineAxisCfg(t,n,kN.RADIUS):this.getCircleAxisCfg(t,n,r),FX),c.component.update(h),e.set(s,c)}else{if(o.isTransposed){if(ZM(n))return;c=this.createLineAxis(t,n,i,kN.RADIUS,a)}else c=this.createCircleAxis(t,n,i,r,a);this.cache.set(s,c),e.set(s,c)}if(u=this.cache.get(l)){var h;rG(h=o.isTransposed?this.getCircleGridCfg(t,n,kN.RADIUS,a):this.getLineGridCfg(t,n,kN.CIRCLE,a),FX),u.component.update(h),e.set(l,u)}else{if(o.isTransposed){if(ZM(n))return;u=this.createCircleGrid(t,n,i,kN.RADIUS,a)}else u=this.createLineGrid(t,n,i,kN.CIRCLE,a);u&&(this.cache.set(l,u),e.set(l,u))}}}}},t.prototype.updateYAxes=function(e){var t=this;uM(this.view.getYScales(),(function(n,r){if(n&&!n.isIdentity){var i=n.field,a=bG(t.option,i);if(!1!==a){var o=wN.BG,s="y",l=t.getId("axis",i),c=t.getId("grid",i),u=t.view.getCoordinate();if(u.isRect){var h=CG(a,0===r?kN.LEFT:kN.RIGHT);if(p=t.cache.get(l))rG(f=t.getLineAxisCfg(n,a,h),FX),p.component.update(f),e.set(l,p);else p=t.createLineAxis(n,a,o,h,s),t.cache.set(l,p),e.set(l,p);if(d=t.cache.get(c))rG(f=t.getLineGridCfg(n,a,h,s),FX),d.component.update(f),e.set(c,d);else(d=t.createLineGrid(n,a,o,h,s))&&(t.cache.set(c,d),e.set(c,d))}else if(u.isPolar){var p,d;if(p=t.cache.get(l)){rG(f=u.isTransposed?t.getCircleAxisCfg(n,a,kN.CIRCLE):t.getLineAxisCfg(n,a,kN.RADIUS),FX),p.component.update(f),e.set(l,p)}else{if(u.isTransposed){if(ZM(a))return;p=t.createCircleAxis(n,a,o,kN.CIRCLE,s)}else p=t.createLineAxis(n,a,o,kN.RADIUS,s);t.cache.set(l,p),e.set(l,p)}if(d=t.cache.get(c)){var f;rG(f=u.isTransposed?t.getLineGridCfg(n,a,kN.CIRCLE,s):t.getCircleGridCfg(n,a,kN.RADIUS,s),FX),d.component.update(f),e.set(c,d)}else{if(u.isTransposed){if(ZM(a))return;d=t.createLineGrid(n,a,o,kN.CIRCLE,s)}else d=t.createCircleGrid(n,a,o,kN.RADIUS,s);d&&(t.cache.set(c,d),e.set(c,d))}}}}}))},t.prototype.createLineAxis=function(e,t,n,r,i){var a={component:new jj(this.getLineAxisCfg(e,t,r)),layer:n,direction:r===kN.RADIUS?kN.NONE:r,type:ON.AXIS,extra:{dim:i,scale:e}};return a.component.set("field",e.field),a.component.init(),a},t.prototype.createLineGrid=function(e,t,n,r,i){var a=this.getLineGridCfg(e,t,r,i);if(a){var o={component:new Vj(a),layer:n,direction:kN.NONE,type:ON.GRID,extra:{dim:i,scale:e,alignTick:fN(a,"alignTick",!0)}};return o.component.init(),o}},t.prototype.createCircleAxis=function(e,t,n,r,i){var a={component:new Gj(this.getCircleAxisCfg(e,t,r)),layer:n,direction:r,type:ON.AXIS,extra:{dim:i,scale:e}};return a.component.set("field",e.field),a.component.init(),a},t.prototype.createCircleGrid=function(e,t,n,r,i){var a=this.getCircleGridCfg(e,t,r,i);if(a){var o={component:new Yj(a),layer:n,direction:kN.NONE,type:ON.GRID,extra:{dim:i,scale:e,alignTick:fN(a,"alignTick",!0)}};return o.component.init(),o}},t.prototype.getLineAxisCfg=function(e,t,n){var r=fN(t,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=mG(i,n),o=SG(e,t),s=vG(this.view.getTheme(),n),l=fN(t,["title"])?oN({title:{style:{text:o}}},{title:EG(this.view.getTheme(),n,t.title)},t):t,c=oN(QI(QI({container:r},a),{ticks:e.getTicks().map((function(e){return{id:"".concat(e.tickValue),name:e.text,value:e.value}})),verticalFactor:i.isPolar?-1*yG(a,i.getCenter()):yG(a,i.getCenter()),theme:s}),s,l),u=this.getAnimateCfg(c),h=u.animate,p=u.animateOption;c.animateOption=p,c.animate=h;var d=gG(a),f=fN(c,"verticalLimitLength",d?1/3:.5);if(f<=1){var m=this.view.getCanvas().get("width"),g=this.view.getCanvas().get("height");c.verticalLimitLength=f*(d?m:g)}return c},t.prototype.getLineGridCfg=function(e,t,n,r){if(PX(vG(this.view.getTheme(),n),t)){var i=IX(this.view.getTheme(),n),a=oN({container:fN(t,["top"])?this.gridForeContainer:this.gridContainer},i,fN(t,"grid"),this.getAnimateCfg(t));return a.items=MX(this.view.getCoordinate(),e,r,fN(a,"alignTick",!0)),a}},t.prototype.getCircleAxisCfg=function(e,t,n){var r=fN(t,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=e.getTicks().map((function(e){return{id:"".concat(e.tickValue),name:e.text,value:e.value}}));e.isCategory||Math.abs(i.endAngle-i.startAngle)!==2*Math.PI||a.pop();var o=SG(e,t),s=vG(this.view.getTheme(),kN.CIRCLE),l=fN(t,["title"])?oN({title:{style:{text:o}}},{title:EG(this.view.getTheme(),n,t.title)},t):t,c=oN(QI(QI({container:r},xG(this.view.getCoordinate())),{ticks:a,verticalFactor:1,theme:s}),s,l),u=this.getAnimateCfg(c),h=u.animate,p=u.animateOption;return c.animate=h,c.animateOption=p,c},t.prototype.getCircleGridCfg=function(e,t,n,r){if(PX(vG(this.view.getTheme(),n),t)){var i=IX(this.view.getTheme(),kN.RADIUS),a=oN({container:fN(t,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},i,fN(t,"grid"),this.getAnimateCfg(t)),o=fN(a,"alignTick",!0),s="x"===r?this.view.getYScales()[0]:this.view.getXScale();return a.items=NX(this.view.getCoordinate(),s,e,o,r),a}},t.prototype.getId=function(e,t){var n=this.view.getCoordinate();return"".concat(e,"-").concat(t,"-").concat(n.type)},t.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&fN(e,"animate"),animateOption:e&&e.animateOption?oN({},LX,e.animateOption):LX}},t}(nY);function DX(e,t,n){return n===kN.TOP?[e.minX+e.width/2-t.width/2,e.minY]:n===kN.BOTTOM?[e.minX+e.width/2-t.width/2,e.maxY-t.height]:n===kN.LEFT?[e.minX,e.minY+e.height/2-t.height/2]:n===kN.RIGHT?[e.maxX-t.width,e.minY+e.height/2-t.height/2]:n===kN.TOP_LEFT||n===kN.LEFT_TOP?[e.tl.x,e.tl.y]:n===kN.TOP_RIGHT||n===kN.RIGHT_TOP?[e.tr.x-t.width,e.tr.y]:n===kN.BOTTOM_LEFT||n===kN.LEFT_BOTTOM?[e.bl.x,e.bl.y-t.height]:n===kN.BOTTOM_RIGHT||n===kN.RIGHT_BOTTOM?[e.br.x-t.width,e.br.y-t.height]:[0,0]}function BX(e,t){return XM(e)?!1!==e&&{}:fN(e,[t],e)}function $X(e){return fN(e,"position",kN.BOTTOM)}var zX=function(e){function t(t){var n=e.call(this,t)||this;return n.container=n.view.getLayer(wN.FORE).addGroup(),n}return KI(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,uM(this.components,(function(t){var n=t.component,r=t.direction,i=HY(r),a=n.get("maxWidthRatio"),o=n.get("maxHeightRatio"),s=e.getCategoryLegendSizeCfg(i,a,o),l=n.get("maxWidth"),c=n.get("maxHeight");n.update({maxWidth:Math.min(s.maxWidth,l||0),maxHeight:Math.min(s.maxHeight,c||0)});var u=n.get("padding"),h=n.getLayoutBBox(),p=new aG(h.x,h.y,h.width,h.height).expand(u),d=DX(e.view.viewBBox,p,r),f=d[0],m=d[1],g=DX(e.layoutBBox,p,r),y=g[0],v=g[1],E=0,x=0;r.startsWith("top")||r.startsWith("bottom")?(E=f,x=v):(E=y,x=m),n.setLocation({x:E+u[3],y:x+u[0]}),e.layoutBBox=e.layoutBBox.cut(p,r)}))},t.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var t={};if(fN(this.option,"custom")){var n="global-custom",r=this.getComponentById(n);if(r){var i=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);rG(i,["container"]),r.component.update(i),t[n]=!0}else{var a=this.createCustomLegend(void 0,void 0,void 0,this.option);if(a){a.init();var o=wN.FORE,s=$X(this.option);this.components.push({id:n,component:a,layer:o,direction:s,type:ON.LEGEND,extra:void 0}),t[n]=!0}}}else this.loopLegends((function(n,r,i){var a=e.getId(i.field),o=e.getComponentById(a);if(o){var s=void 0,l=BX(e.option,i.field);!1!==l&&(fN(l,"custom")?s=e.getCategoryCfg(n,r,i,l,!0):i.isLinear?s=e.getContinuousCfg(n,r,i,l):i.isCategory&&(s=e.getCategoryCfg(n,r,i,l))),s&&(rG(s,["container"]),o.direction=$X(l),o.component.update(s),t[a]=!0)}else{var c=e.createFieldLegend(n,r,i);c&&(c.component.init(),e.components.push(c),t[a]=!0)}}));var l=[];uM(this.getComponents(),(function(e){t[e.id]?l.push(e):e.component.destroy()})),this.components=l},t.prototype.clear=function(){e.prototype.clear.call(this),this.container.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.container.remove(!0)},t.prototype.getGeometries=function(e){var t=this,n=e.geometries;return uM(e.views,(function(e){n=n.concat(t.getGeometries(e))})),n},t.prototype.loopLegends=function(e){if(this.view.getRootView()===this.view){var t=this.getGeometries(this.view),n={};uM(t,(function(t){uM(t.getGroupAttributes(),(function(r){var i=r.getScale(r.type);i&&"identity"!==i.type&&!n[i.field]&&(e(t,r,i),n[i.field]=!0)}))}))}},t.prototype.createFieldLegend=function(e,t,n){var r,i=BX(this.option,n.field),a=wN.FORE,o=$X(i);if(!1!==i&&(fN(i,"custom")?r=this.createCustomLegend(e,t,n,i):n.isLinear?r=this.createContinuousLegend(e,t,n,i):n.isCategory&&(r=this.createCategoryLegend(e,t,n,i))),r)return r.set("field",n.field),{id:this.getId(n.field),component:r,layer:a,direction:o,type:ON.LEGEND,extra:{scale:n}}},t.prototype.createCustomLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r,!0);return new Uj(i)},t.prototype.createContinuousLegend=function(e,t,n,r){var i=this.getContinuousCfg(e,t,n,rG(r,["value"]));return new qj(i)},t.prototype.createCategoryLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r);return new Uj(i)},t.prototype.getContinuousCfg=function(e,t,n,r){var i=n.getTicks(),a=mM(i,(function(e){return 0===e.value})),o=mM(i,(function(e){return 1===e.value})),s=i.map((function(e){var r=e.value,i=e.tickValue,a=t.mapping(n.invert(r)).join("");return{value:i,attrValue:a,color:a,scaleValue:r}}));a||s.push({value:n.min,attrValue:t.mapping(n.invert(0)).join(""),color:t.mapping(n.invert(0)).join(""),scaleValue:0}),o||s.push({value:n.max,attrValue:t.mapping(n.invert(1)).join(""),color:t.mapping(n.invert(1)).join(""),scaleValue:1}),s.sort((function(e,t){return e.value-t.value}));var l={min:_M(s).value,max:OM(s).value,colors:[],rail:{type:t.type},track:{}};"size"===t.type&&(l.track={style:{fill:"size"===t.type?this.view.getTheme().defaultColor:void 0}}),"color"===t.type&&(l.colors=s.map((function(e){return e.attrValue})));var c=this.container,u=HY($X(r)),h=fN(r,"title");return h&&(h=oN({text:dG(n)},h)),l.container=c,l.layout=u,l.title=h,l.animateOption=sY,this.mergeLegendCfg(l,r,"continuous")},t.prototype.getCategoryCfg=function(e,t,n,r,i){var a=this.container,o=fN(r,"position",kN.BOTTOM),s=GY(this.view.getTheme(),o),l=fN(s,["marker"]),c=fN(r,"marker"),u=HY(o),h=fN(s,["pageNavigator"]),p=fN(r,"pageNavigator"),d=i?function(e,t,n){return n.map((function(n,r){var i=t;oM(i)&&(i=i(n.name,r,oN({},e,n)));var a=oM(n.marker)?n.marker(n.name,r,oN({},e,n)):n.marker,o=oN({},e,i,a);return zY(o),n.marker=o,n}))}(l,c,r.items):jY(this.view,e,t,l,c),f=fN(r,"title");f&&(f=oN({text:n?dG(n):""},f));var m=fN(r,"maxWidthRatio"),g=fN(r,"maxHeightRatio"),y=this.getCategoryLegendSizeCfg(u,m,g);y.container=a,y.layout=u,y.items=d,y.title=f,y.animateOption=sY,y.pageNavigator=oN({},h,p);var v=this.mergeLegendCfg(y,r,o);v.reversed&&v.items.reverse();var E=fN(v,"maxItemWidth");return E&&E<=1&&(v.maxItemWidth=this.view.viewBBox.width*E),v},t.prototype.mergeLegendCfg=function(e,t,n){var r=n.split("-")[0],i=GY(this.view.getTheme(),r);return oN({},i,e,t)},t.prototype.getId=function(e){return"".concat(this.name,"-").concat(e)},t.prototype.getComponentById=function(e){return mM(this.components,(function(t){return t.id===e}))},t.prototype.getCategoryLegendSizeCfg=function(e,t,n){void 0===t&&(t=.25),void 0===n&&(n=.25);var r=this.view.viewBBox,i=r.width,a=r.height;return"vertical"===e?{maxWidth:i*t,maxHeight:a}:{maxWidth:i,maxHeight:a*n}},t}(nY),HX=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeFn=CN,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=e[0],r=e[1];n.start=t,n.end=r,n.changeViewData(t,r)},n.container=n.view.getLayer(wN.FORE).addGroup(),n.onChangeFn=EN(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(NN.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(NN.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return KI(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(NN.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(NN.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),t=e.start,n=e.end;sM(this.start)&&(this.start=t,this.end=n);var r=this.view.getOptions().data;this.option&&!cN(r)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout((function(){e.view.destroyed||e.changeViewData(e.start,e.end)}),0)),this.slider){var t=this.view.coordinateBBox.width,n=this.slider.component.get("padding"),r=n[0];n[1],n[2];var i=n[3],a=this.slider.component.getLayoutBBox(),o=new aG(a.x,a.y,Math.min(a.width,t),a.height).expand(n),s=this.getMinMaxText(this.start,this.end),l=s.minText,c=s.maxText,u=DX(this.view.viewBBox,o,kN.BOTTOM);u[0];var h=u[1],p=DX(this.view.coordinateBBox,o,kN.BOTTOM),d=p[0];p[1],this.slider.component.update(QI(QI({},this.getSliderCfg()),{x:d+i,y:h+r,width:this.width,start:this.start,end:this.end,minText:l,maxText:c})),this.view.viewBBox=this.view.viewBBox.cut(o,kN.BOTTOM)}},t.prototype.update=function(){this.render()},t.prototype.createSlider=function(){var e=this.getSliderCfg(),t=new $j(QI({container:this.container},e));return t.init(),{component:t,layer:wN.FORE,direction:kN.BOTTOM,type:ON.SLIDER}},t.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var t=this.getMinMaxText(this.start,this.end),n=t.minText,r=t.maxText;e=QI(QI({},e),{width:this.width,start:this.start,end:this.end,minText:n,maxText:r})}return this.slider.component.update(e),this.slider},t.prototype.measureSlider=function(){var e=this.getSliderCfg().width;this.width=e},t.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(cM(this.option)){var t=QI({data:this.getData()},fN(this.option,"trendCfg",{}));e=oN({},e,this.getThemeOptions(),this.option),e=QI(QI({},e),{trendCfg:t})}return e.start=FM(Math.min(sM(e.start)?0:e.start,sM(e.end)?1:e.end),0,1),e.end=FM(Math.max(sM(e.start)?0:e.start,sM(e.end)?1:e.end),0,1),e},t.prototype.getData=function(){var e=this.view.getOptions().data,t=this.view.getYScales()[0],n=this.view.getGroupScales();if(n.length){var r=n[0],i=r.field,a=r.ticks;return e.reduce((function(e,n){return n[i]===a[0]&&e.push(n[t.field]),e}),[])}return e.map((function(e){return e[t.field]||0}))},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return fN(e,["components","slider","common"],{})},t.prototype.getMinMaxText=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=kM(n,r.field),a=SN(n);if(!r||!a)return{};var o=SN(i),s=Math.floor(e*(o-1)),l=Math.floor(t*(o-1)),c=fN(i,[s]),u=fN(i,[l]),h=this.getSliderCfg().formatter;return h&&(c=h(c,n[s],s),u=h(u,n[l],l)),{minText:c,maxText:u}},t.prototype.changeViewData=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=SN(n);if(r&&i){var a=kM(n,r.field),o=SN(a),s=Math.floor(e*(o-1)),l=Math.floor(t*(o-1));this.view.filter(r.field,(function(e,t){var n=a.indexOf(e);return!(n>-1)||nG(n,s,l)})),this.view.render(!0)}},t.prototype.getComponents=function(){return this.slider?[this.slider]:[]},t.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},t}(nY),jX=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeFn=CN,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=e.ratio,r=n.getValidScrollbarCfg().animate;n.ratio=FM(t,0,1);var i=n.view.getOptions().animate;r||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(i)},n.container=n.view.getLayer(wN.FORE).addGroup(),n.onChangeFn=EN(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(NN.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(NN.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return KI(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(NN.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(NN.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout((function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)}))),this.scrollbar){var t=this.view.coordinateBBox.width,n=this.scrollbar.component.get("padding"),r=this.scrollbar.component.getLayoutBBox(),i=new aG(r.x,r.y,Math.min(r.width,t),r.height).expand(n),a=this.getScrollbarComponentCfg(),o=void 0,s=void 0;if(a.isHorizontal){var l=DX(this.view.viewBBox,i,kN.BOTTOM);l[0];var c=l[1],u=DX(this.view.coordinateBBox,i,kN.BOTTOM),h=u[0];u[1],o=h,s=c}else{var p=DX(this.view.viewBBox,i,kN.RIGHT);p[0];c=p[1];var d=DX(this.view.viewBBox,i,kN.RIGHT);h=d[0];d[1],o=h,s=c}o+=n[3],s+=n[0],this.trackLen?this.scrollbar.component.update(QI(QI({},a),{x:o,y:s,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(QI(QI({},a),{x:o,y:s})),this.view.viewBBox=this.view.viewBBox.cut(i,a.isHorizontal?kN.BOTTOM:kN.RIGHT)}},t.prototype.update=function(){this.render()},t.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},t.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},t.prototype.setValue=function(e){this.onValueChange({ratio:e})},t.prototype.getValue=function(){return this.ratio},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return fN(e,["components","scrollbar","common"],{})},t.prototype.getScrollbarTheme=function(e){var t=fN(this.view.getTheme(),["components","scrollbar"]),n=e||{},r=n.thumbHighlightColor,i=ZI(n,["thumbHighlightColor"]);return{default:oN({},fN(t,["default","style"],{}),i),hover:oN({},fN(t,["hover","style"],{}),{thumbColor:r})}},t.prototype.measureScrollbar=function(){var e=this.view.getXScale(),t=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var n=this.getScrollbarComponentCfg(),r=n.trackLen,i=n.thumbLen;this.trackLen=r,this.thumbLen=i,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=t},t.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*FM(this.ratio,0,1));return[e,Math.min(e+this.step-1,this.cnt-1)]},t.prototype.changeViewData=function(e,t){var n=this,r=e[0],i=e[1],a="vertical"!==this.getValidScrollbarCfg().type,o=kM(this.data,this.xScaleCfg.field),s=a?o:o.reverse();this.yScalesCfg.forEach((function(e){n.view.scale(e.field,{formatter:e.formatter,type:e.type,min:e.min,max:e.max})})),this.view.filter(this.xScaleCfg.field,(function(e){var t=s.indexOf(e);return!(t>-1)||nG(t,r,i)})),this.view.render(!0)},t.prototype.createScrollbar=function(){var e="vertical"!==this.getValidScrollbarCfg().type,t=new Hj(QI(QI({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return t.init(),{component:t,layer:wN.FORE,direction:e?kN.BOTTOM:kN.RIGHT,type:ON.SCROLLBAR}},t.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),t=this.trackLen?QI(QI({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):QI({},e);return this.scrollbar.component.update(t),this.scrollbar},t.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,t=this.getValidScrollbarCfg(),n=t.type,r=t.categorySize,i="vertical"!==n;return Math.floor((i?e.width:e.height)/r)},t.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),t=this.getScrollbarData();return SN(kM(t,e.field))},t.prototype.getScrollbarComponentCfg=function(){var e=this.view,t=e.coordinateBBox,n=e.viewBBox,r=this.getValidScrollbarCfg(),i=r.type,a=r.padding,o=r.width,s=r.height,l=r.style,c="vertical"!==i,u=a[0],h=a[1],p=a[2],d=a[3],f=c?{x:t.minX+d,y:n.maxY-s-p}:{x:n.maxX-o-h,y:t.minY+u},m=this.getStep(),g=this.getCnt(),y=c?t.width-d-h:t.height-u-p,v=Math.max(y*FM(m/g,0,1),20);return QI(QI({},this.getThemeOptions()),{x:f.x,y:f.y,size:c?s:o,isHorizontal:c,trackLen:y,thumbLen:v,thumbOffset:0,theme:this.getScrollbarTheme(l)})},t.prototype.getValidScrollbarCfg=function(){var e={type:"horizontal",categorySize:32,width:8,height:8,padding:[0,0,0,0],animate:!0,style:{}};return cM(this.option)&&(e=QI(QI({},e),this.option)),cM(this.option)&&this.option.padding||(e.padding=(e.type,[0,0,0,0])),e},t.prototype.getScrollbarData=function(){var e=this.view.getCoordinate(),t=this.getValidScrollbarCfg(),n=this.view.getOptions().data||[];return e.isReflect("y")&&"vertical"===t.type&&(n=eM([],n,!0).reverse()),n},t}(nY),GX={fill:"#CCD6EC",opacity:.3};function VX(e,t,n){var r=function(e,t,n){for(var r=jV(e,t,n),i=0,a=e.views;i<a.length;i++){var o=a[i];r=r.concat(jV(o,t,n))}return r}(e,t,n);if(r.length){for(var i=0,a=r=yM(r);i<a.length;i++)for(var o=0,s=a[i];o<s.length;o++){var l=s[o],c=l.mappingData,u=c.x,h=c.y;l.x=lM(u)?u[u.length-1]:u,l.y=lM(h)?h[h.length-1]:h}if(!1===n.shared&&r.length>1){for(var p=r[0],d=Math.abs(t.y-p[0].y),f=0,m=r;f<m.length;f++){var g=m[f],y=Math.abs(t.y-g[0].y);y<=d&&(p=g,d=y)}r=[p]}return TM(yM(r))}return[]}var YX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.show=function(e){var t=this.context.view,n=this.context.event,r=t.getController("tooltip").getTooltipCfg(),i=VX(t,{x:n.x,y:n.y},r);if(!hN(i,this.items)&&(this.items=i,i.length)){var a=t.getXScale().field,o=i[0].data[a],s=[];if(uM(t.geometries,(function(e){if("interval"===e.type||"schema"===e.type){var t=e.getElementsBy((function(e){return e.getData()[a]===o}));s=s.concat(t)}})),s.length){var l=t.getCoordinate(),c=s[0].shape.getCanvasBBox(),u=s[0].shape.getCanvasBBox(),h=c;uM(s,(function(e){var t=e.shape.getCanvasBBox();l.isTransposed?(t.minY<c.minY&&(c=t),t.maxY>u.maxY&&(u=t)):(t.minX<c.minX&&(c=t),t.maxX>u.maxX&&(u=t)),h.x=Math.min(t.minX,h.minX),h.y=Math.min(t.minY,h.minY),h.width=Math.max(t.maxX,h.maxX)-h.x,h.height=Math.max(t.maxY,h.maxY)-h.y}));var p=t.backgroundGroup,d=t.coordinateBBox,f=void 0;if(l.isRect){var m=t.getXScale(),g=e||{},y=g.appendRatio,v=g.appendWidth;sM(v)&&(y=sM(y)?m.isLinear?0:.25:y,v=l.isTransposed?y*u.height:y*c.width);var E=void 0,x=void 0,b=void 0,C=void 0;l.isTransposed?(E=d.minX,x=Math.min(u.minY,c.minY)-v,b=d.width,C=h.height+2*v):(E=Math.min(c.minX,u.minX)-v,x=d.minY,b=h.width+2*v,C=d.height),f=[["M",E,x],["L",E+b,x],["L",E+b,x+C],["L",E,x+C],["Z"]]}else{var S=_M(s),w=OM(s),T=eG(S.getModel(),l).startAngle,k=eG(w.getModel(),l).endAngle,_=l.getCenter(),O=l.getRadius(),A=l.innerRadius*O;f=Zj(_.x,_.y,O,T,k,A)}if(this.regionPath)this.regionPath.attr("path",f),this.regionPath.show();else{var I=fN(e,"style",GX);this.regionPath=p.addShape({type:"path",name:"active-region",capture:!1,attrs:QI(QI({},I),{path:f})})}}}},t.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},t.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),e.prototype.destroy.call(this)},t}(_G),UX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return KI(t,e),t.prototype.show=function(){var e=this.context,t=e.event,n=e.view;if(!n.isTooltipLocked()){var r=this.timeStamp,i=+new Date;if(i-r>fN(e.view.getOptions(),"tooltip.showDelay",16)){var a=this.location,o={x:t.x,y:t.y};a&&hN(a,o)||this.showTooltip(n,o),this.timeStamp=i,this.location=o}}},t.prototype.hide=function(){var e=this.context.view,t=e.getController("tooltip"),n=this.context.event,r=n.clientX,i=n.clientY;t.isCursorEntered({x:r,y:i})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},t.prototype.showTooltip=function(e,t){e.showTooltip(t)},t.prototype.hideTooltip=function(e){e.hideTooltip()},t}(_G),qX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.showTooltip=function(e,t){uM(nV(e),(function(n){var r=rV(e,n,t);n.showTooltip(r)}))},t.prototype.hideTooltip=function(e){uM(nV(e),(function(e){e.hideTooltip()}))},t}(UX),WX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return KI(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.show=function(){var e=this.context.event,t=this.timeStamp,n=+new Date;if(n-t>16){var r=this.location,i={x:e.x,y:e.y};r&&hN(r,i)||this.showTooltip(i),this.timeStamp=n,this.location=i}},t.prototype.hide=function(){this.hideTooltip(),this.location=null},t.prototype.showTooltip=function(e){var t=this.context.event.target;if(t&&t.get("tip")){this.tooltip||this.renderTooltip();var n=t.get("tip");this.tooltip.update(QI({title:n},e)),this.tooltip.show()}},t.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,t=this.context.view,n=t.canvas,r={start:{x:0,y:0},end:{x:n.get("width"),y:n.get("height")}},i=t.getTheme(),a=fN(i,["components","tooltip","domStyles"],{}),o=new Wj({parent:n.get("el").parentNode,region:r,visible:!1,crosshairs:null,domStyles:QI({},oN({},a,(e={},e["g2-tooltip"]={"max-width":"50%"},e[Ej]={"word-break":"break-all"},e)))});o.init(),o.setCapture(!1),this.tooltip=o},t}(_G),XX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="",t}return KI(t,e),t.prototype.hasState=function(e){return e.hasState(this.stateName)},t.prototype.setElementState=function(e,t){e.setState(this.stateName,t)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},t.prototype.clearViewState=function(e){var t=this;uM(XG(e,this.stateName),(function(e){t.setElementState(e,!1)}))},t}(_G);function KX(e){return fN(e.get("delegateObject"),"item")}var QX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return KI(t,e),t.prototype.isItemIgnore=function(e,t){return!!this.ignoreListItemStates.filter((function(n){return t.hasState(e,n)})).length},t.prototype.setStateByComponent=function(e,t,n){var r=this.context.view,i=e.get("field"),a=WG(r);this.setElementsStateByItem(a,i,t,n)},t.prototype.setStateByElement=function(e,t){this.setElementState(e,t)},t.prototype.isMathItem=function(e,t,n){var r=aV(this.context.view,t),i=KG(e,t);return!sM(i)&&n.name===r.getText(i)},t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;uM(e,(function(e){i.isMathItem(e,t,n)&&e.setState(i.stateName,r)}))},t.prototype.setStateEnable=function(e){var t=zG(this.context);if(t)jG(this.context)&&this.setStateByElement(t,e);else{var n=HG(this.context);if(GG(n)){var r=n.item,i=n.component;if(r&&i&&!this.isItemIgnore(r,i)){var a=this.context.event.gEvent;if(a&&a.fromShape&&a.toShape&&KX(a.fromShape)===KX(a.toShape))return;this.setStateByComponent(i,r,e)}}}},t.prototype.toggle=function(){var e=zG(this.context);if(e){var t=e.hasState(this.stateName);this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(XX),ZX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return KI(t,e),t.prototype.active=function(){this.setState()},t}(QX),JX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={},t}return KI(t,e),t.prototype.getColorScale=function(e,t){var n=t.geometry.getAttribute("color");return n?e.getScaleByField(n.getFields()[0]):null},t.prototype.getLinkPath=function(e,t){var n=this.context.view.getCoordinate().isTransposed,r=e.shape.getCanvasBBox(),i=t.shape.getCanvasBBox();return n?[["M",r.minX,r.minY],["L",i.minX,i.maxY],["L",i.maxX,i.maxY],["L",r.maxX,r.minY],["Z"]]:[["M",r.maxX,r.minY],["L",i.minX,i.minY],["L",i.minX,i.maxY],["L",r.maxX,r.maxY],["Z"]]},t.prototype.addLinkShape=function(e,t,n,r){var i={opacity:.4,fill:t.shape.attr("fill")};e.addShape({type:"path",attrs:QI(QI({},oN({},i,oM(r)?r(i,t):r)),{path:this.getLinkPath(t,n)})})},t.prototype.linkByElement=function(e,t){var n=this,r=this.context.view,i=this.getColorScale(r,e);if(i){var a=KG(e,i.field);if(!this.cache[a]){var o=function(e,t,n){return WG(e).filter((function(e){return KG(e,t)===n}))}(r,i.field,a),s=this.linkGroup.addGroup();this.cache[a]=s;var l=o.length;uM(o,(function(e,r){if(r<l-1){var i=o[r+1];n.addLinkShape(s,e,i,t)}}))}}},t.prototype.removeLink=function(e){var t=this.getColorScale(this.context.view,e);if(t){var n=KG(e,t.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},t.prototype.link=function(e){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var n=zG(t);n&&this.linkByElement(n,null==e?void 0:e.style)},t.prototype.unlink=function(){var e=zG(this.context);e&&this.removeLink(e)},t.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},t}(_G),eK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return KI(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},t.prototype.getIntersectElements=function(){var e=null;if(YG(this.context))e=UG(this.context,10);else{var t=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!t||!n)return;var r={minX:Math.min(t.x,n.x),minY:Math.min(t.y,n.y),maxX:Math.max(t.x,n.x),maxY:Math.max(t.y,n.y)};e=QG(this.context.view,r)}return e},t.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var t=WG(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,e):this.setElementsState(n,e,t):this.clear()}},t.prototype.setSiblingsStateByRecord=function(e,t){var n=this,r=this.context.view,i=nV(r),a=e.map((function(e){return e.getModel().data})),o=r.getXScale().field,s=r.getYScales()[0].field;uM(i,(function(e){var r=WG(e),i=r.filter((function(e){var t=e.getModel().data;return iV(a,t,o,s)}));n.setElementsState(i,t,r)}))},t.prototype.setSiblingsState=function(e){var t=this,n=nV(this.context.view);YG(this.context)&&uM(n,(function(n){var r=WG(n),i=qG(t.context,n,10);i&&i.length?t.setElementsState(i,e,r):t.clearViewState(n)}))},t.prototype.setElementsState=function(e,t,n){var r=this;uM(n,(function(n){e.includes(n)?r.setElementState(n,t):r.setElementState(n,!1)}))},t.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},t.prototype.clear=function(){var e=this,t=this.context.view;this.effectSiblings?uM(nV(t),(function(t){e.clearViewState(t)})):this.clearViewState(t)},t}(XX),tK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return KI(t,e),t.prototype.active=function(){this.setState()},t}(eK),nK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.setStateEnable=function(e){var t=zG(this.context);if(t){if(!jG(this.context))return;e?(this.clear(),this.setElementState(t,!0)):this.hasState(t)&&this.setElementState(t,!1)}},t.prototype.toggle=function(){var e=zG(this.context);if(e){var t=this.hasState(e);t||this.clear(),this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(XX),rK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return KI(t,e),t.prototype.active=function(){this.setState()},t}(nK);function iK(e){uM(WG(e),(function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("inactive")&&e.setState("inactive",!1)}))}function aK(e,t,n){uM(e,(function(e){t(e)?(e.hasState("inactive")&&e.setState("inactive",!1),e.setState("active",n)):(e.hasState("active")&&e.setState("active",!1),e.setState("inactive",n))}))}var oK,sK,lK=BN.INACTIVE,cK=BN.ACTIVE,uK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName=cK,t}return KI(t,e),t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;this.setHighlightBy(e,(function(e){return i.isMathItem(e,t,n)}),r)},t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(lK)&&e.setState(lK,!1),e.setState(cK,!0)):e.hasState(cK)||e.setState(lK,!0)},t.prototype.setHighlightBy=function(e,t,n){var r=this;if(n)uM(e,(function(e){r.setElementHighlight(e,t)}));else{var i=XG(this.context.view,cK),a=!0;uM(i,(function(e){if(!t(e))return a=!1,!1})),a?this.clear():uM(e,(function(e){t(e)&&(e.hasState(cK)&&e.setState(cK,!1),e.setState(lK,!0))}))}},t.prototype.setElementState=function(e,t){var n=WG(this.context.view);this.setHighlightBy(n,(function(t){return e===t}),t)},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){iK(this.context.view)},t}(QX),hK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=e.geometry.getAttribute("color");if(r){var i=n.getScaleByField(r.getFields()[0]),a=KG(e,i.field),o=WG(n),s=o.filter((function(e){return KG(e,i.field)===a}));this.setHighlightBy(o,(function(e){return s.includes(e)}),t)}},t}(uK),pK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(lK)&&e.setState(lK,!1),e.setState(cK,!0)):(e.setState(lK,!0),e.hasState(cK)&&e.setState(cK,!1))},t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=n.getXScale(),i=KG(e,r.field),a=WG(n),o=a.filter((function(e){return KG(e,r.field)===i}));this.setHighlightBy(a,(function(e){return o.includes(e)}),t)},t.prototype.toggle=function(){var e=zG(this.context);if(e){var t=e.hasState(this.stateName);this.setStateByElement(e,!t)}},t}(uK);(sK=oK||(oK={})).BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",sK.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",sK.BEFORE_CLEAR="element-range-highlight:beforeclear",sK.AFTER_CLEAR="element-range-highlight:afterclear";var dK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return KI(t,e),t.prototype.clearViewState=function(e){iK(e)},t.prototype.highlight=function(){var e=this.context,t=e.view,n={view:t,event:e.event,highlightElements:this.getIntersectElements()};t.emit(oK.BEFORE_HIGHLIGHT,qV.fromData(t,oK.BEFORE_HIGHLIGHT,n)),this.setState(),t.emit(oK.AFTER_HIGHLIGHT,qV.fromData(t,oK.AFTER_HIGHLIGHT,n))},t.prototype.clear=function(){var t=this.context.view;t.emit(oK.BEFORE_CLEAR,qV.fromData(t,oK.BEFORE_CLEAR,{})),e.prototype.clear.call(this),t.emit(oK.AFTER_CLEAR,qV.fromData(t,oK.AFTER_CLEAR,{}))},t.prototype.setElementsState=function(e,t,n){aK(n,(function(t){return e.indexOf(t)>=0}),t)},t}(eK),fK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return KI(t,e),t.prototype.highlight=function(){this.setState()},t.prototype.setElementState=function(e,t){aK(WG(this.context.view),(function(t){return e===t}),t)},t.prototype.clear=function(){iK(this.context.view)},t}(nK),mK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return KI(t,e),t.prototype.selected=function(){this.setState()},t}(eK),gK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return KI(t,e),t.prototype.selected=function(){this.setState()},t}(QX),yK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return KI(t,e),t.prototype.selected=function(){this.setState()},t}(nK),vK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return KI(t,e),t.prototype.getTriggerListInfo=function(){var e=HG(this.context),t=null;return GG(e)&&(t={item:e.item,list:e.component}),t},t.prototype.getAllowComponents=function(){var e=this,t=JG(this.context.view),n=[];return uM(t,(function(t){t.isList()&&e.allowSetStateByElement(t)&&n.push(t)})),n},t.prototype.hasState=function(e,t){return e.hasState(t,this.stateName)},t.prototype.clearAllComponentsState=function(){var e=this;uM(this.getAllowComponents(),(function(t){t.clearItemsState(e.stateName)}))},t.prototype.allowSetStateByElement=function(e){var t=e.get("field");if(!t)return!1;if(this.cfg&&this.cfg.componentNames){var n=e.get("name");if(-1===this.cfg.componentNames.indexOf(n))return!1}var r=aV(this.context.view,t);return r&&r.isCategory},t.prototype.allowSetStateByItem=function(e,t){var n=this.ignoreItemStates;return!n.length||0===n.filter((function(n){return t.hasState(e,n)})).length},t.prototype.setStateByElement=function(e,t,n){var r=e.get("field"),i=aV(this.context.view,r),a=KG(t,r),o=i.getText(a);this.setItemsState(e,o,n)},t.prototype.setStateEnable=function(e){var t=this,n=zG(this.context);if(n){uM(this.getAllowComponents(),(function(r){t.setStateByElement(r,n,e)}))}else{var r=HG(this.context);if(GG(r)){var i=r.item,a=r.component;this.allowSetStateByElement(a)&&this.allowSetStateByItem(i,a)&&this.setItemState(a,i,e)}}},t.prototype.setItemsState=function(e,t,n){var r=this;uM(e.getItems(),(function(i){i.name===t&&r.setItemState(e,i,n)}))},t.prototype.setItemState=function(e,t,n){e.setItemState(t,this.stateName,n)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.reset=function(){this.setStateEnable(!1)},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item,r=this.hasState(t,n);this.setItemState(t,n,!r)}},t.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},t}(_G),EK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return KI(t,e),t.prototype.active=function(){this.setState()},t}(vK);var xK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t.ignoreItemStates=["unchecked"],t}return KI(t,e),t.prototype.setItemsState=function(e,t,n){this.setHighlightBy(e,(function(e){return e.name===t}),n)},t.prototype.setItemState=function(e,t,n){e.getItems(),this.setHighlightBy(e,(function(e){return e===t}),n)},t.prototype.setHighlightBy=function(e,t,n){var r=e.getItems();if(n)uM(r,(function(n){t(n)?(e.hasState(n,"inactive")&&e.setItemState(n,"inactive",!1),e.setItemState(n,"active",!0)):e.hasState(n,"active")||e.setItemState(n,"inactive",!0)}));else{var i=e.getItemsByState("active"),a=!0;uM(i,(function(e){if(!t(e))return a=!1,!1})),a?this.clear():uM(r,(function(n){t(n)&&(e.hasState(n,"active")&&e.setItemState(n,"active",!1),e.setItemState(n,"inactive",!0))}))}},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e,t=this.getTriggerListInfo();t?uM((e=t.list).getItems(),(function(t){e.hasState(t,"active")&&e.setItemState(t,"active",!1),e.hasState(t,"inactive")&&e.setItemState(t,"inactive",!1)})):uM(this.getAllowComponents(),(function(e){e.clearItemsState("active"),e.clearItemsState("inactive")}))},t}(vK),bK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return KI(t,e),t.prototype.selected=function(){this.setState()},t}(vK),CK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="unchecked",t}return KI(t,e),t.prototype.unchecked=function(){this.setState()},t}(vK),SK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="checked",t}return KI(t,e),t.prototype.setItemState=function(e,t,n){this.setCheckedBy(e,(function(e){return e===t}),n)},t.prototype.setCheckedBy=function(e,t,n){var r=e.getItems();n&&uM(r,(function(n){t(n)?(e.hasState(n,"unchecked")&&e.setItemState(n,"unchecked",!1),e.setItemState(n,"checked",!0)):e.hasState(n,"checked")||e.setItemState(n,"unchecked",!0)}))},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item;!IM(t.getItems(),(function(e){return t.hasState(e,"unchecked")}))||t.hasState(n,"unchecked")?this.setItemState(t,n,!0):this.reset()}},t.prototype.checked=function(){this.setState()},t.prototype.reset=function(){uM(this.getAllowComponents(),(function(e){e.clearItemsState("checked"),e.clearItemsState("unchecked")}))},t}(vK),wK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return KI(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.emitEvent=function(e){var t="mask:".concat(e),n=this.context.view,r=this.context.event;n.emit(t,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},t.prototype.createMask=function(){var e=this.context.view,t=this.getMaskAttrs();return e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:QI({fill:"#C5D4EB",opacity:.3},t)})},t.prototype.getMaskPath=function(){return[]},t.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},t.prototype.start=function(e){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(null==e?void 0:e.maskStyle),this.emitEvent("start")},t.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},t.prototype.move=function(){if(this.moving&&this.maskShape){var e=this.getCurrentPoint(),t=this.preMovePoint,n=e.x-t.x,r=e.y-t.y;uM(this.points,(function(e){e.x+=n,e.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e}},t.prototype.updateMask=function(e){var t=oN({},this.getMaskAttrs(),e);this.maskShape.attr(t)},t.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},t.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},t.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},t.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},t.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,e.prototype.destroy.call(this)},t}(_G),TK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="circle",t}return KI(t,e),t.prototype.getMaskAttrs=function(){var e=this.points,t=OM(this.points),n=0,r=0,i=0;if(e.length){var a=e[0];n=eV(a,t)/2,r=(t.x+a.x)/2,i=(t.y+a.y)/2}return{x:r,y:i,r:n}},t}(wK),kK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="rect",t}return KI(t,e),t.prototype.getRegion=function(){var e=this.points;return{start:_M(e),end:OM(e)}},t.prototype.getMaskAttrs=function(){var e=this.getRegion(),t=e.start,n=e.end;return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),width:Math.abs(n.x-t.x),height:Math.abs(n.y-t.y)}},t}(wK);function _K(e){e.x=FM(e.x,0,1),e.y=FM(e.y,0,1)}var OK,AK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return KI(t,e),t.prototype.getRegion=function(){var e=null,t=null,n=this.points,r=this.dim,i=this.context.view.getCoordinate(),a=i.invert(_M(n)),o=i.invert(OM(n));return this.inPlot&&(_K(a),_K(o)),"x"===r?(e=i.convert({x:a.x,y:0}),t=i.convert({x:o.x,y:1})):(e=i.convert({x:0,y:a.y}),t=i.convert({x:1,y:o.y})),{start:e,end:t}},t}(kK),IK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getMaskPath=function(){var e=this.points,t=[];return e.length&&(uM(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t.push(["L",e[0].x,e[0].y])),t},t.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},t.prototype.addPoint=function(){this.resize()},t}(wK),MK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getMaskPath=function(){return function(e,t){if(e.length<=2)return RG(e,!1);var n=e[0],r=[];uM(e,(function(e){r.push(e.x),r.push(e.y)}));var i=LG(r,t,null);return i.unshift(["M",n.x,n.y]),i}(this.points,!0)},t}(IK),NK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.setCursor=function(e){this.context.view.getCanvas().setCursor(e)},t.prototype.default=function(){this.setCursor("default")},t.prototype.pointer=function(){this.setCursor("pointer")},t.prototype.move=function(){this.setCursor("move")},t.prototype.crosshair=function(){this.setCursor("crosshair")},t.prototype.wait=function(){this.setCursor("wait")},t.prototype.help=function(){this.setCursor("help")},t.prototype.text=function(){this.setCursor("text")},t.prototype.eResize=function(){this.setCursor("e-resize")},t.prototype.wResize=function(){this.setCursor("w-resize")},t.prototype.nResize=function(){this.setCursor("n-resize")},t.prototype.sResize=function(){this.setCursor("s-resize")},t.prototype.neResize=function(){this.setCursor("ne-resize")},t.prototype.nwResize=function(){this.setCursor("nw-resize")},t.prototype.seResize=function(){this.setCursor("se-resize")},t.prototype.swResize=function(){this.setCursor("sw-resize")},t.prototype.nsResize=function(){this.setCursor("ns-resize")},t.prototype.ewResize=function(){this.setCursor("ew-resize")},t}(_G),PK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.filterView=function(e,t,n){var r=this;e.getScaleByField(t)&&e.filter(t,n),e.views&&e.views.length&&uM(e.views,(function(e){r.filterView(e,t,n)}))},t.prototype.filter=function(){var e=HG(this.context);if(e){var t=this.context.view,n=e.component,r=n.get("field");if(GG(e)){if(r){var i=n.getItemsByState("unchecked"),a=aV(t,r),o=i.map((function(e){return e.name}));o.length?this.filterView(t,r,(function(e){var t=a.getText(e);return!o.includes(t)})):this.filterView(t,r,null),t.render(!0)}}else if(VG(e)){var s=n.getValue(),l=s[0],c=s[1];this.filterView(t,r,(function(e){return e>=l&&e<=c})),t.render(!0)}}},t}(_G);function FK(e,t,n,r){var i=Math.min(n[t],r[t]),a=Math.max(n[t],r[t]),o=e.range,s=o[0],l=o[1];if(i<s&&(i=s),a>l&&(a=l),i===l&&a===l)return null;var c=e.invert(i),u=e.invert(a);if(e.isCategory){var h=e.values.indexOf(c),p=e.values.indexOf(u),d=e.values.slice(h,p+1);return function(e){return d.includes(e)}}return function(e){return e>=c&&e<=u}}!function(e){e.FILTER="brush-filter-processing",e.RESET="brush-filter-reset",e.BEFORE_FILTER="brush-filter:beforefilter",e.AFTER_FILTER="brush-filter:afterfilter",e.BEFORE_RESET="brush-filter:beforereset",e.AFTER_RESET="brush-filter:afterreset"}(OK||(OK={}));var LK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return KI(t,e),t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},t.prototype.filter=function(){var e,t;if(YG(this.context)){var n=this.context.event.target.getCanvasBBox();e={x:n.x,y:n.y},t={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;e=this.startPoint,t=this.context.getCurrentPoint()}if(!(Math.abs(e.x-t.x)<5||Math.abs(e.x-t.y)<5)){var r=this.context,i=r.view,a={view:i,event:r.event,dims:this.dims};i.emit(OK.BEFORE_FILTER,qV.fromData(i,OK.BEFORE_FILTER,a));var o=i.getCoordinate(),s=o.invert(t),l=o.invert(e);if(this.hasDim("x")){var c=i.getXScale(),u=FK(c,"x",s,l);this.filterView(i,c.field,u)}if(this.hasDim("y")){var h=i.getYScales()[0];u=FK(h,"y",s,l);this.filterView(i,h.field,u)}this.reRender(i,{source:OK.FILTER}),i.emit(OK.AFTER_FILTER,qV.fromData(i,OK.AFTER_FILTER,a))}},t.prototype.end=function(){this.isStarted=!1},t.prototype.reset=function(){var e=this.context.view;if(e.emit(OK.BEFORE_RESET,qV.fromData(e,OK.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var t=e.getXScale();this.filterView(e,t.field,null)}if(this.hasDim("y")){var n=e.getYScales()[0];this.filterView(e,n.field,null)}this.reRender(e,{source:OK.RESET}),e.emit(OK.AFTER_RESET,qV.fromData(e,OK.AFTER_RESET,{}))},t.prototype.filterView=function(e,t,n){e.filter(t,n)},t.prototype.reRender=function(e,t){e.render(!0,t)},t}(_G),RK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.filterView=function(e,t,n){uM(nV(e),(function(e){e.filter(t,n)}))},t.prototype.reRender=function(e){uM(nV(e),(function(e){e.render(!0)}))},t}(LK),DK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.filter=function(){var e=HG(this.context),t=this.context.view,n=WG(t);if(YG(this.context)){var r=UG(this.context,10);r&&uM(n,(function(e){r.includes(e)?e.show():e.hide()}))}else if(e){var i=e.component,a=i.get("field");if(GG(e)){if(a){var o=i.getItemsByState("unchecked"),s=aV(t,a),l=o.map((function(e){return e.name}));uM(n,(function(e){var t=KG(e,a),n=s.getText(t);l.indexOf(n)>=0?e.hide():e.show()}))}}else if(VG(e)){var c=i.getValue(),u=c[0],h=c[1];uM(n,(function(e){var t=KG(e,a);t>=u&&t<=h?e.show():e.hide()}))}}},t.prototype.clear=function(){uM(WG(this.context.view),(function(e){e.show()}))},t.prototype.reset=function(){this.clear()},t}(_G),BK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.byRecord=!1,t}return KI(t,e),t.prototype.filter=function(){YG(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},t.prototype.filterByRecord=function(){var e=this.context.view,t=UG(this.context,10);if(t){var n=e.getXScale().field,r=e.getYScales()[0].field,i=t.map((function(e){return e.getModel().data}));uM(nV(e),(function(e){uM(WG(e),(function(e){var t=e.getModel().data;iV(i,t,n,r)?e.show():e.hide()}))}))}},t.prototype.filterByBBox=function(){var e=this;uM(nV(this.context.view),(function(t){var n=qG(e.context,t,10),r=WG(t);n&&uM(r,(function(e){n.includes(e)?e.show():e.hide()}))}))},t.prototype.reset=function(){uM(nV(this.context.view),(function(e){uM(WG(e),(function(e){e.show()}))}))},t}(_G),$K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return KI(t,e),t.prototype.getButtonCfg=function(){return oN(this.buttonCfg,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=t.addShape({type:"text",name:"button-text",attrs:QI({text:e.text},e.textStyle)}).getBBox(),r=GV(e.padding),i=t.addShape({type:"rect",name:"button-rect",attrs:QI({x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},e.style)});i.toBack(),t.on("mouseenter",(function(){i.attr(e.activeStyle)})),t.on("mouseleave",(function(){i.attr(e.style)})),this.buttonGroup=t},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=xF(null,[["t",e.x-n.width-10,e.y+n.height+5]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(_G),zK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return KI(t,e),t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},t.prototype.drag=function(){if(this.startPoint){var e=this.context.getCurrentPoint(),t=this.context.view,n=this.context.event;this.dragStart?t.emit("drag",{target:n.target,x:n.x,y:n.y}):eV(e,this.startPoint)>4&&(t.emit("dragstart",{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},t.prototype.end=function(){if(this.dragStart){var e=this.context.view,t=this.context.event;e.emit("dragend",{target:t.target,x:t.x,y:t.y})}this.starting=!1,this.dragStart=!1},t}(_G),HK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return KI(t,e),t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},t.prototype.move=function(){if(this.starting){var e=this.startPoint,t=this.context.getCurrentPoint();if(eV(e,t)>5&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,r=xF(this.startMatrix,[["t",t.x-e.x,t.y-e.y]]);n.backgroundGroup.setMatrix(r),n.foregroundGroup.setMatrix(r),n.middleGroup.setMatrix(r)}}},t.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},t.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},t}(_G),jK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return KI(t,e),t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.getScale=function(e){var t=this.context.view;return"x"===e?t.getXScale():t.getYScales()[0]},t.prototype.resetDim=function(e){var t=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var n=this.getScale(e);t.scale(n.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},t.prototype.reset=function(){this.resetDim("x"),this.resetDim("y"),this.context.view.render(!0)},t}(_G),GK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return KI(t,e),t.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0,uM(this.dims,(function(t){var n=e.getScale(t),r=n.min,i=n.max,a=n.values;e.startCache[t]={min:r,max:i,values:a}}))},t.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},t.prototype.translate=function(){var e=this;if(this.starting){var t=this.startPoint,n=this.context.view.getCoordinate(),r=this.context.getCurrentPoint(),i=n.invert(t),a=n.invert(r),o=a.x-i.x,s=a.y-i.y,l=this.context.view;uM(this.dims,(function(t){e.translateDim(t,{x:-1*o,y:-1*s})})),l.render(!0)}},t.prototype.translateDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.translateLinear(e,n,t)}},t.prototype.translateLinear=function(e,t,n){var r=this.context.view,i=this.startCache[e],a=i.min,o=i.max,s=o-a,l=n[e]*s;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:a,max:o}),r.scale(t.field,{nice:!1,min:a+l,max:o+l})},t.prototype.reset=function(){e.prototype.reset.call(this),this.startPoint=null,this.starting=!1},t}(jK),VK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zoomRatio=.05,t}return KI(t,e),t.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},t.prototype.zoom=function(e){var t=this;uM(this.dims,(function(n){t.zoomDim(n,e)})),this.context.view.render(!0)},t.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},t.prototype.zoomDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.zoomLinear(e,n,t)}},t.prototype.zoomLinear=function(e,t,n){var r=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:t.min,max:t.max});var i=this.cacheScaleDefs[e],a=i.max-i.min,o=t.min,s=t.max,l=n*a,c=o-l,u=s+l,h=(u-c)/a;u>c&&h<100&&h>.01&&r.scale(t.field,{nice:!1,min:o-l,max:s+l})},t}(jK);var YK,UK,qK,WK,XK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.scroll=function(e){var t=this.context,n=t.view,r=t.event;if(n.getOptions().scrollbar){var i=(null==e?void 0:e.wheelDelta)||1,a=n.getController("scrollbar"),o=n.getXScale(),s=n.getOptions().data,l=SN(kM(s,o.field)),c=SN(o.values),u=a.getValue(),h=Math.floor((l-c)*u)+(function(e){return e.gEvent.originalEvent.deltaY>0}(r)?i:-i),p=FM(h/(l-c)+i/(l-c)/1e4,0,1);a.setValue(p)}},t}(_G);function KK(e){return e.isInPlot()}function QK(e){return e.gEvent.preventDefault(),e.gEvent.originalEvent.deltaY>0}function ZK(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.reduce((function(e,t){return t(e)}),t)}}function JK(e,t){var n={};return null!==e&&"object"==typeof e&&t.forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n}function eQ(e,t){return t?CM(t,(function(e,t,n){return e.replace(new RegExp("{\\s*"+n+"\\s*}","g"),t)}),e):e}YK="dark",UK=EV(fU),NV[YM(YK)]=MV(UK),XN("canvas",wq),XN("svg",pW),eY("Polygon",NW),eY("Interval",_W),eY("Schema",PW),eY("Path",dW),eY("Point",MW),eY("Line",OW),eY("Area",yW),eY("Edge",vW),eY("Heatmap",EW),eY("Violin",FW),mY("base",RY),mY("interval",GW),mY("pie",UW),mY("polar",YW),gY("overlap",(function(e,t,n,r){var i=new WW;uM(t,(function(e){for(var t=e.find((function(e){return"text"===e.get("type")})),n=t.attr(),r=n.x,a=n.y,o=!1,s=0;s<=8;s++){var l=XW(t,r,a,s);if(i.hasGap(l)){i.fillGap(l),o=!0;break}}o||e.remove(!0)})),i.destroy()})),gY("distribute",(function(e,t,n,r){if(e.length&&t.length){var i=e[0]?e[0].offset:0,a=t[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=2*(o+i)+28,c={start:a.start,end:a.end},u=[[],[]];e.forEach((function(e){e&&("right"===e.textAlign?u[0].push(e):u[1].push(e))})),u.forEach((function(e,n){var r=l/14;e.length>r&&(e.sort((function(e,t){return t["..percent"]-e["..percent"]})),e.splice(r,e.length-r)),e.sort((function(e,t){return e.y-t.y})),function(e,t,n,r,i,a){var o,s=!0,l=r.start,c=r.end,u=Math.min(l.y,c.y),h=Math.abs(l.y-c.y),p=0,d=Number.MIN_VALUE,f=t.map((function(e){return e.y>p&&(p=e.y),e.y<d&&(d=e.y),{size:n,targets:[e.y-u]}}));for(d-=u,p-u>h&&(h=p-u);s;)for(f.forEach((function(e){var t=(Math.min.apply(d,e.targets)+Math.max.apply(d,e.targets))/2;e.pos=Math.min(Math.max(d,t-e.size/2),h-e.size)})),s=!1,o=f.length;o--;)if(o>0){var m=f[o-1],g=f[o];m.pos+m.size>g.pos&&(m.size+=g.size,m.targets=m.targets.concat(g.targets),m.pos+m.size>h&&(m.pos=h-m.size),f.splice(o,1),s=!0)}o=0,f.forEach((function(e){var r=u+n/2;e.targets.forEach((function(){t[o].y=e.pos+r,r+=n,o++}))}));for(var y={},v=0,E=e;v<E.length;v++){var x=E[v];y[x.get("id")]=x}t.forEach((function(e){var t=e.r*e.r,n=Math.pow(Math.abs(e.y-i.y),2);if(t<n)e.x=i.x;else{var r=Math.sqrt(t-n);e.x=a?i.x+r:i.x-r}var o=y[e.id];o.attr("x",e.x),o.attr("y",e.y);var s=mM(o.getChildren(),(function(e){return"text"===e.get("type")}));s&&(s.attr("y",e.y),s.attr("x",e.x))}))}(t,e,14,c,s,n)}))}uM(e,(function(e){if(e&&e.labelLine){var t=e.offset,n=e.angle,r=Qj(s.x,s.y,o,n),i=Qj(s.x,s.y,o+t/2,n),a=e.x+fN(e,"offsetX",0),l=e.y+fN(e,"offsetY",0),c={x:a-4*Math.cos(n),y:l-4*Math.sin(n)};cM(e.labelLine)||(e.labelLine={}),e.labelLine.path=["M ".concat(r.x),"".concat(r.y," Q").concat(i.x),"".concat(i.y," ").concat(c.x),c.y].join(",")}}))}})),gY("fixed-overlap",(function(e,t,n,r){var i=new WW;uM(t,(function(e){(function(e,t,n){void 0===n&&(n=100);var r,i=e.attr(),a=i.x,o=i.y,s=e.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),c=1,u=0,h=0;if(t.hasGap(s))return t.fillGap(s),!0;for(var p,d,f=!1,m=0,g={};Math.min(Math.abs(u),Math.abs(h))<l&&m<n;)if(p=c+=-1,d=void 0,h=~~(r=[(d=.1*p)*Math.cos(d),d*Math.sin(d)])[1],((u=~~r[0])||h)&&!g["".concat(u,"-").concat(h)]&&(e.attr({x:a+u,y:o+h}),u+h<0&&e.attr("textAlign","right"),m++,t.hasGap(e.getCanvasBBox()))){t.fillGap(e.getCanvasBBox()),f=!0,g["".concat(u,"-").concat(h)]=!0;break}return f})(e.find((function(e){return"text"===e.get("type")})),i)||e.remove(!0)})),i.destroy()})),gY("hide-overlap",(function(e,t,n,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i].get("visible"))for(var o=i+1;o<t.length;o++){var s=t[o];if(a&&s&&a!==s&&s.get("visible"))iX(MY(a,e[i],fN(e[i],"background.padding")),MY(s,e[o],fN(e[o],"background.padding")))&&t[o].set("visible",!1)}}})),gY("limit-in-shape",(function(e,t,n,r){uM(t,(function(e,t){var r=e.getCanvasBBox(),i=n[t].getBBox();(r.minX<i.minX||r.minY<i.minY||r.maxX>i.maxX||r.maxY>i.maxY)&&e.remove(!0)}))})),gY("limit-in-canvas",(function(e,t,n,r){uM(t,(function(e){var t=r.minX,n=r.minY,i=r.maxX,a=r.maxY,o=e.getCanvasBBox(),s=o.minX,l=o.minY,c=o.maxX,u=o.maxY,h=o.x,p=o.y,d=o.width,f=o.height,m=h,g=p;(s<t||c<t)&&(m=t),(l<n||u<n)&&(g=n),s>i?m=i-d:c>i&&(m-=c-i),l>a?g=a-f:u>a&&(g-=u-a),m===h&&g===p||OY(e,m-h,g-p)}))})),gY("limit-in-plot",(function(e,t,n,r,i){if(!(t.length<=0)){var a=(null==i?void 0:i.direction)||["top","right","bottom","left"],o=(null==i?void 0:i.action)||"translate",s=(null==i?void 0:i.margin)||0,l=t[0].get("coordinate");if(l){var c=function(e,t){void 0===t&&(t=0);var n=e.start,r=e.end,i=e.getWidth(),a=e.getHeight(),o=Math.min(n.x,r.x),s=Math.min(n.y,r.y);return aG.fromRange(o-t,s-t,o+i+t,s+a+t)}(l,s),u=c.minX,h=c.minY,p=c.maxX,d=c.maxY;uM(t,(function(e){var t=e.getCanvasBBox(),n=t.minX,r=t.minY,i=t.maxX,s=t.maxY,l=t.x,c=t.y,f=t.width,m=t.height,g=l,y=c;if(a.indexOf("left")>=0&&(n<u||i<u)&&(g=u),a.indexOf("top")>=0&&(r<h||s<h)&&(y=h),a.indexOf("right")>=0&&(n>p?g=p-f:i>p&&(g-=i-p)),a.indexOf("bottom")>=0&&(r>d?y=d-m:s>d&&(y-=s-d)),g!==l||y!==c){var v=g-l;if("translate"===o)OY(e,v,y-c);else if("ellipsis"===o){e.findAll((function(e){return"text"===e.get("type")})).forEach((function(e){var t=yN(e.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),n=e.getCanvasBBox(),r=function(e,t,n){var r,i=pX("...",n);r=wM(e)?e:VM(e);var a,o,s=t,l=[];if(pX(e,n)<=t)return e;for(;a=r.substr(0,16),!((o=pX(a,n))+i>s&&o>s);)if(l.push(a),s-=o,!(r=r.substr(16)))return l.join("");for(;a=r.substr(0,1),!((o=pX(a,n))+i>s);)if(l.push(a),s-=o,!(r=r.substr(1)))return l.join("");return"".concat(l.join(""),"...")}(e.attr("text"),n.width-Math.abs(v),t);e.attr("text",r)}))}else e.hide()}}))}}})),gY("pie-outer",(function(e,t,n,r){var i=rM(e,(function(e){return!sM(e)})),a=t[0]&&t[0].get("coordinate");if(a){for(var o=a.getCenter(),s=a.getRadius(),l={},c=0,u=t;c<u.length;c++){var h=u[c];l[h.get("id")]=h}var p=fN(i[0],"labelHeight",14),d=fN(i[0],"offset",0);if(!(d<=0)){var f="right",m=NM(i,(function(e){return e.x<o.x?"left":f})),g=a.start,y=a.end,v=Math.min(2*(s+d+p),a.getHeight()),E=v/2,x={minX:g.x,maxX:y.x,minY:o.y-E,maxY:o.y+E};uM(m,(function(e,t){var n=Math.floor(v/p);e.length>n&&(e.sort((function(e,t){return t.percent-e.percent})),uM(e,(function(e,t){t+1>n&&(l[e.id].set("visible",!1),e.invisible=!0)}))),qW(e,p,x)})),uM(m,(function(e,t){uM(e,(function(e){var n=t===f,r=l[e.id].getChildByIndex(0);if(r){var i=s+d,c=e.y-o.y,u=Math.pow(i,2),h=Math.pow(c,2),p=u-h>0?u-h:0,m=Math.sqrt(p),g=Math.abs(Math.cos(e.angle)*i);e.x=n?o.x+Math.max(m,g):o.x-Math.max(m,g)}r&&(r.attr("y",e.y),r.attr("x",e.x)),function(e,t){var n=t.getCenter(),r=t.getRadius();if(e&&e.labelLine){var i=e.angle,a=e.offset,o=Qj(n.x,n.y,r,i),s=e.x+fN(e,"offsetX",0)*(Math.cos(i)>0?1:-1),l=e.y+fN(e,"offsetY",0)*(Math.sin(i)>0?1:-1),c={x:s-4*Math.cos(i),y:l-4*Math.sin(i)},u=e.labelLine.smooth,h=[],p=c.x-n.x,d=c.y-n.y,f=Math.atan(d/p);if(p<0&&(f+=Math.PI),!1===u){cM(e.labelLine)||(e.labelLine={});var m=0;(i<0&&i>-Math.PI/2||i>1.5*Math.PI)&&c.y>o.y&&(m=1),i>=0&&i<Math.PI/2&&c.y>o.y&&(m=1),i>=Math.PI/2&&i<Math.PI&&o.y>c.y&&(m=1),(i<-Math.PI/2||i>=Math.PI&&i<1.5*Math.PI)&&o.y>c.y&&(m=1);var g=a/2>4?4:Math.max(a/2-1,0),y=Qj(n.x,n.y,r+g,i),v=Qj(n.x,n.y,r+a/2,f);h.push("M ".concat(o.x," ").concat(o.y)),h.push("L ".concat(y.x," ").concat(y.y)),h.push("A ".concat(n.x," ").concat(n.y," 0 ").concat(0," ").concat(m," ").concat(v.x," ").concat(v.y)),h.push("L ".concat(c.x," ").concat(c.y))}else{y=Qj(n.x,n.y,r+(a/2>4?4:Math.max(a/2-1,0)),i);var E=o.x<n.x?1:-1;h.push("M ".concat(c.x," ").concat(c.y));var x=(o.y-n.y)/(o.x-n.x),b=(c.y-n.y)/(c.x-n.x);Math.abs(x-b)>Math.pow(Math.E,-16)&&h.push.apply(h,["C",c.x+4*E,c.y,2*y.x-o.x,2*y.y-o.y,o.x,o.y]),h.push("L ".concat(o.x," ").concat(o.y))}e.labelLine.path=h.join(" ")}}(e,a)}))}))}}})),gY("adjust-color",(function(e,t,n){if(0!==n.length){var r=n[0].get("element").geometry.theme,i=r.labels||{},a=i.fillColorLight,o=i.fillColorDark;n.forEach((function(e,n){var i=t[n].find((function(e){return"text"===e.get("type")})),s=aG.fromObject(e.getBBox()),l=aG.fromObject(i.getCanvasBBox()),c=!s.contains(l),u=function(e){var t=wD.toRGB(e).toUpperCase();if(oX[t])return oX[t];var n=wD.rgb2arr(t);return(299*n[0]+587*n[1]+114*n[2])/1e3<128}(e.attr("fill"));c?i.attr(r.overflowLabels.style):u?a&&i.attr("fill",a):o&&i.attr("fill",o)}))}})),gY("interval-adjust-position",(function(e,t,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),a=null==i?void 0:i.geometry;if(a&&"interval"===a.type)sX(a,t,n)&&n.forEach((function(e,n){var r=t[n];!function(e,t,n){var r=e.coordinate,i=aG.fromObject(n.getBBox()),a=IY(t);r.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:"center"}):a.attr({y:i.minY+i.height/2,textBaseline:"middle"})}(a,r,e)}))}})),gY("interval-hide-overlap",(function(e,t,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),a=null==i?void 0:i.geometry;if(a&&"interval"===a.type){var o,s=function(e){var t=[],n=Math.max(Math.floor(e.length/500),1);return uM(e,(function(e,r){r%n==0?t.push(e):e.set("visible",!1)})),t}(t),l=a.getXYFields()[0],c=[],u=[],h=NM(s,(function(e){return e.get("data")[l]})),p=TM(pN(s,(function(e){return e.get("data")[l]})));s.forEach((function(e){e.set("visible",!0)}));var d=function(e){e&&(e.length&&u.push(e.pop()),u.push.apply(u,e))};for(SN(p)>0&&(o=p.shift(),d(h[o])),SN(p)>0&&(o=p.pop(),d(h[o])),uM(p.reverse(),(function(e){d(h[e])}));u.length>0;){var f=u.shift();f.get("visible")&&(NY(f,c)?f.set("visible",!1):c.push(f))}}}})),gY("point-adjust-position",(function(e,t,n,r,i){var a,o;if(0!==n.length){var s=null===(a=n[0])||void 0===a?void 0:a.get("element"),l=null==s?void 0:s.geometry;if(l&&"point"===l.type){var c=l.getXYFields(),u=c[0],h=c[1],p=NM(t,(function(e){return e.get("data")[u]})),d=[],f=i&&i.offset||(null===(o=e[0])||void 0===o?void 0:o.offset)||12;pN(hM(p).reverse(),(function(e){for(var t=function(e,t){var n=e.getXYFields()[1],r=[],i=t.sort((function(e,t){return e.get("data")[n]-e.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}(l,p[e]);t.length;){var n=t.shift(),r=IY(n);if(lX(d,n,(function(e,t){return e.get("data")[u]===t.get("data")[u]&&e.get("data")[h]===t.get("data")[h]})))r.set("visible",!1);else{var i=!1;cX(d,n)&&(r.attr("y",r.attr("y")+2*f),i=cX(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),gY("pie-spider",(function(e,t,n,r){var i=t[0]&&t[0].get("coordinate");if(i){for(var a=i.getCenter(),o=i.getRadius(),s={},l=0,c=t;l<c.length;l++){var u=c[l];s[u.get("id")]=u}var h=fN(e[0],"labelHeight",14),p=Math.max(fN(e[0],"offset",0),4);uM(e,(function(e){if(fN(s,[e.id])){var t=e.x>a.x||e.x===a.x&&e.y>a.y,n=sM(e.offsetX)?4:e.offsetX,r=Qj(a.x,a.y,o+4,e.angle),i=p+n;e.x=a.x+(t?1:-1)*(o+i),e.y=r.y}}));var d=i.start,f=i.end,m="right",g=NM(e,(function(e){return e.x<a.x?"left":m})),y=2*(o+p)+h;uM(g,(function(e){var t=e.length*h;t>y&&(y=Math.min(t,Math.abs(d.y-f.y)))}));var v={minX:d.x,maxX:f.x,minY:a.y-y/2,maxY:a.y+y/2};uM(g,(function(e,t){var n=y/h;e.length>n&&(e.sort((function(e,t){return t.percent-e.percent})),uM(e,(function(e,t){t>n&&(s[e.id].set("visible",!1),e.invisible=!0)}))),qW(e,h,v)}));var E=v.minY,x=v.maxY;uM(g,(function(e,t){var n=t===m;uM(e,(function(e){var t=fN(s,e&&[e.id]);if(t)if(e.y<E||e.y>x)t.set("visible",!1);else{var r=t.getChildByIndex(0),a=r.getCanvasBBox(),o=n?a.x:a.maxX,l=a.y+a.height/2;OY(r,e.x-o,e.y-l),e.labelLine&&function(e,t,n){var r,i=t.getCenter(),a=t.getRadius(),o={x:e.x-(n?4:-4),y:e.y},s=Qj(i.x,i.y,a+4,e.angle),l={x:o.x,y:o.y},c={x:s.x,y:s.y},u=Qj(i.x,i.y,a,e.angle);if(o.y!==s.y){var h=n?4:-4;l.y=o.y,e.angle<0&&e.angle>=-Math.PI/2&&(l.x=Math.max(s.x,o.x-h),o.y<s.y?c.y=l.y:(c.y=s.y,c.x=Math.max(c.x,l.x-h))),e.angle>0&&e.angle<Math.PI/2&&(l.x=Math.max(s.x,o.x-h),o.y>s.y?c.y=l.y:(c.y=s.y,c.x=Math.max(c.x,l.x-h))),e.angle>Math.PI/2&&(l.x=Math.min(s.x,o.x-h),o.y>s.y?c.y=l.y:(c.y=s.y,c.x=Math.min(c.x,l.x-h))),e.angle<-Math.PI/2&&(l.x=Math.min(s.x,o.x-h),o.y<s.y?c.y=l.y:(c.y=s.y,c.x=Math.min(c.x,l.x-h)))}r=["M ".concat(o.x,",").concat(o.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(c.x,",").concat(c.y),"L ".concat(s.x,",").concat(s.y),"L ".concat(u.x,",").concat(u.y)].join(" "),e.labelLine=oN({},e.labelLine,{path:r})}(e,i,n)}}))}))}})),gY("path-adjust-position",(function(e,t,n,r,i){var a,o;if(0!==n.length){var s=null===(a=n[0])||void 0===a?void 0:a.get("element"),l=null==s?void 0:s.geometry;if(l&&!(["path","line","area"].indexOf(l.type)<0)){var c=l.getXYFields(),u=c[0],h=c[1],p=NM(t,(function(e){return e.get("data")[u]})),d=[],f=i&&i.offset||(null===(o=e[0])||void 0===o?void 0:o.offset)||12;pN(hM(p).reverse(),(function(e){for(var t=function(e,t){var n=e.getXYFields()[1],r=[],i=t.sort((function(e,t){return e.get("data")[n]-e.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}(l,p[e]);t.length;){var n=t.shift(),r=IY(n);if(uX(d,n,(function(e,t){return e.get("data")[u]===t.get("data")[u]&&e.get("data")[h]===t.get("data")[h]})))r.set("visible",!1);else{var i=!1;hX(d,n)&&(r.attr("y",r.attr("y")+2*f),i=hX(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),oY("fade-in",(function(e,t,n){var r={fillOpacity:sM(e.attr("fillOpacity"))?1:e.attr("fillOpacity"),strokeOpacity:sM(e.attr("strokeOpacity"))?1:e.attr("strokeOpacity"),opacity:sM(e.attr("opacity"))?1:e.attr("opacity")};e.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),e.animate(r,t)})),oY("fade-out",(function(e,t,n){var r=t.easing,i=t.duration,a=t.delay;e.animate({fillOpacity:0,strokeOpacity:0,opacity:0},i,r,(function(){e.remove(!0)}),a)})),oY("grow-in-x",(function(e,t,n){dX(e,t,n.coordinate,n.minYPoint,"x")})),oY("grow-in-xy",(function(e,t,n){dX(e,t,n.coordinate,n.minYPoint,"xy")})),oY("grow-in-y",(function(e,t,n){dX(e,t,n.coordinate,n.minYPoint,"y")})),oY("scale-in-x",(function(e,t,n){var r=e.getBBox(),i=e.get("origin").mappingData.points,a=i[0].y-i[1].y>0?r.maxX:r.minX,o=(r.minY+r.maxY)/2;e.applyToMatrix([a,o,1]);var s=xF(e.getMatrix(),[["t",-a,-o],["s",.01,1],["t",a,o]]);e.setMatrix(s),e.animate({matrix:xF(e.getMatrix(),[["t",-a,-o],["s",100,1],["t",a,o]])},t)})),oY("scale-in-y",(function(e,t,n){var r=e.getBBox(),i=e.get("origin").mappingData,a=(r.minX+r.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?r.maxY:r.minY;e.applyToMatrix([a,s,1]);var l=xF(e.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);e.setMatrix(l),e.animate({matrix:xF(e.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},t)})),oY("wave-in",(function(e,t,n){var r=uG(n.coordinate,20),i=r.type,a=r.startState,o=r.endState,s=e.setClip({type:i,attrs:a});s.animate(o,QI(QI({},t),{callback:function(){e&&!e.get("destroyed")&&e.set("clipShape",null),s.remove(!0)}}))})),oY("zoom-in",(function(e,t,n){yX(e,t,"zoomIn")})),oY("zoom-out",(function(e,t,n){yX(e,t,"zoomOut")})),oY("position-update",(function(e,t,n){var r=n.toAttrs,i=r.x,a=r.y;delete r.x,delete r.y,e.attr(r),e.animate({x:i,y:a},t)})),oY("sector-path-update",(function(e,t,n){var r=n.toAttrs,i=n.coordinate,a=r.path||[],o=a.map((function(e){return e[0]}));if(!(a.length<1)){var s=gX(a),l=s.startAngle,c=s.endAngle,u=s.radius,h=s.innerRadius,p=gX(e.attr("path")),d=p.startAngle,f=p.endAngle,m=i.getCenter(),g=l-d,y=c-f;0!==g||0!==y?e.animate((function(e){var t=d+e*g,n=f+e*y;return QI(QI({},r),{path:hN(o,["M","A","A","Z"])?Jj(m.x,m.y,u,t,n):Zj(m.x,m.y,u,t,n,h)})}),QI(QI({},t),{callback:function(){e.attr("path",a)}})):e.attr("path",a)}})),oY("path-in",(function(e,t,n){var r=e.getTotalLength();e.attr("lineDash",[r]),e.animate((function(e){return{lineDashOffset:(1-e)*r}}),t)})),kG("rect",wX),kG("mirror",SX),kG("list",bX),kG("matrix",CX),kG("circle",xX),kG("tree",TX),YV("axis",RX),YV("legend",zX),YV("tooltip",rY),YV("annotation",AX),YV("slider",HX),YV("scrollbar",jX),MG("tooltip",UX),MG("sibling-tooltip",qX),MG("ellipsis-text",WX),MG("element-active",ZX),MG("element-single-active",rK),MG("element-range-active",tK),MG("element-highlight",uK),MG("element-highlight-by-x",pK),MG("element-highlight-by-color",hK),MG("element-single-highlight",fK),MG("element-range-highlight",dK),MG("element-sibling-highlight",dK,{effectSiblings:!0,effectByRecord:!0}),MG("element-selected",gK),MG("element-single-selected",yK),MG("element-range-selected",mK),MG("element-link-by-color",JX),MG("active-region",YX),MG("list-active",EK),MG("list-selected",bK),MG("list-highlight",xK),MG("list-unchecked",CK),MG("list-checked",SK),MG("legend-item-highlight",xK,{componentNames:["legend"]}),MG("axis-label-highlight",xK,{componentNames:["axis"]}),MG("rect-mask",kK),MG("x-rect-mask",AK,{dim:"x"}),MG("y-rect-mask",AK,{dim:"y"}),MG("circle-mask",TK),MG("path-mask",IK),MG("smooth-path-mask",MK),MG("cursor",NK),MG("data-filter",PK),MG("brush",LK),MG("brush-x",LK,{dims:["x"]}),MG("brush-y",LK,{dims:["y"]}),MG("sibling-filter",RK),MG("sibling-x-filter",RK),MG("sibling-y-filter",RK),MG("element-filter",DK),MG("element-sibling-filter",BK),MG("element-sibling-filter-record",BK,{byRecord:!0}),MG("view-drag",zK),MG("view-move",HK),MG("scale-translate",GK),MG("scale-zoom",VK),MG("reset-button",$K,{name:"reset-button",text:"reset"}),MG("mousewheel-scroll",XK),yV("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),yV("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),yV("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),yV("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),yV("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),yV("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),yV("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),yV("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),yV("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),yV("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),yV("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),yV("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),yV("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:KK,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:KK,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:KK,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),yV("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),yV("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:KK,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:KK,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:KK,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),yV("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:KK,action:"path-mask:start"},{trigger:"mousedown",isEnable:KK,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),yV("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),yV("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),yV("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),yV("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),yV("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),yV("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),yV("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(e){return QK(e.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(e){return!QK(e.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),yV("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),yV("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]}),(WK=qK||(qK={})).ERROR="error",WK.WARN="warn",WK.INFO="log";function tQ(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=0;return"AntV/G2Plot: "+e.replace(/%s/g,(function(){return""+t[r++]}))}function nQ(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t||console[e](tQ.apply(void 0,JI([n],r)))}function rQ(e){if(!e)return{width:0,height:0};var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function iQ(e,t){return sQ(e).find((function(e){return e.type===t}))}function aQ(e){return CM(e.geometries,(function(e,t){return e.concat(t.elements)}),[])}function oQ(e){return fN(e,["views","length"],0)<=0?aQ(e):CM(e.views,(function(e,t){return e.concat(oQ(t))}),aQ(e))}function sQ(e){return fN(e,["views","length"],0)<=0?e.geometries:CM(e.views,(function(e,t){return e.concat(t.geometries)}),e.geometries)}function lQ(e,t){return e.views.find((function(e){return e.id===t}))}function cQ(e){var t=e.parent;return t?t.views:[]}function uQ(e){return cQ(e).filter((function(t){return t!==e}))}function hQ(e){if(!aM(e,"Object"))return e;var t=QI({},e);return t.formatter&&!t.content&&(t.content=t.formatter),t}function pQ(e,t,n){for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l=[],c=!!r;if(c){o=[1/0,1/0],s=[-1/0,-1/0];for(var u=0,h=e.length;u<h;u++)o=sF([0,0],o,d=e[u]),s=lF([0,0],s,d);o=sF([0,0],o,r[0]),s=lF([0,0],s,r[1])}u=0;for(var p=e.length;u<p;u++){var d=e[u];if(n)i=e[u?u-1:p-1],a=e[(u+1)%p];else{if(0===u||u===p-1){l.push(d);continue}i=e[u-1],a=e[u+1]}var f=[0,0];f=cF(f=mF(f,a,i),f,t);var m=uF(d,i),g=uF(d,a),y=m+g;0!==y&&(m/=y,g/=y);var v=cF([0,0],f,-m),E=cF([0,0],f,g),x=aF([0,0],d,v),b=aF([0,0],d,E);c&&(x=sF([0,0],x=lF([0,0],x,o),s),b=sF([0,0],b=lF([0,0],b,o),s)),l.push(x),l.push(b)}return n&&l.push(l.shift()),l}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a++)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}var dQ={}.toString,fQ=function(e,t){return dQ.call(e)==="[object "+t+"]"},mQ=function(e){return fQ(e,"Array")},gQ=function(e){if(!function(e){return"object"==typeof e&&null!==e}(e)||!fQ(e,"Object"))return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},yQ=function(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];a?gQ(a)?(gQ(e[i])||(e[i]={}),n<r?yQ(e[i],a,n+1,r):e[i]=t[i]):mQ(a)?(e[i]=[],e[i]=e[i].concat(a)):e[i]=a:e[i]=a}},vQ=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)yQ(e,t[r]);return e};function EQ(e){return e?e.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g).map((function(e){return e.toLowerCase()})).join("-"):e}function xQ(e){var t={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];fN(e,"fill")&&(t.color=e.fill);var r=JK(e,n),i=r.shadowColor,a=r.shadowBlur,o=void 0===a?0:a,s=r.shadowOffsetX,l=void 0===s?0:s,c=r.shadowOffsetY,u=void 0===c?0:c;t["text-shadow"]=""+[i,l+"px",u+"px",o+"px"].join(" ");var h=JK(e,n),p=h.stroke,d=h.lineWidth,f=void 0===d?0:d;return t["-webkit-text-stroke"]=""+[f+"px",p].join(" "),uM(e,(function(e,r){["fontSize"].includes(r)&&RM(e)?t[EQ(r)]=e+"px":r&&!n.includes(r)&&(t[EQ(r)]=""+e)})),t}function bQ(e,t){e.style["pointer-events"]="none",uM(t,(function(t,n){n&&t&&(e.style[n]=t)}))}var CQ,SQ=function(e,t,n){var r=t.statistic,i=t.plotType,a=r.title,o=r.content;[a,o].forEach((function(t,r){if(t){var s="";s=0===r?o?"translate(-50%, -100%)":"translate(-50%, -50%)":a?"translate(-50%, 0)":"translate(-50%, -50%)";var l=oM(t.style)?t.style(n):t.style;e.annotation().html(QI({position:["50%","50%"],html:function(e,r){var a=r.getCoordinate(),o=0;if("pie"===i||"ring-progress"===i)o=a.getRadius()*a.innerRadius*2;else if("liquid"===i){var c=fN(r.geometries,[0,"elements",0,"shape"]);if(c)o=c.find((function(e){return"wrap"===e.get("name")})).getCanvasBBox().width}else o||(o=a.getWidth());bQ(e,QI({width:o+"px",transform:s},xQ(l)));var u=r.getData();if(t.customHtml)return t.customHtml(e,r,n,u);var h=t.content;return t.formatter&&(h=t.formatter(n,u)),h?wM(h)?h:""+h:"<div></div>"},key:(0===r?"top":"bottom")+"-statistic"},JK(t,["offsetX","offsetY","rotate","style","formatter"])))}}))};var wQ=iN((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=void 0===r?"sans-serif":r,a=t.fontWeight,o=t.fontStyle,s=t.fontVariant,l=(CQ||(CQ=document.createElement("canvas").getContext("2d")),CQ);return l.font=[o,a,s,n+"px",i].join(" "),l.measureText(wM(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),JI([e],GM(t)).join("")}));function TQ(e){return"number"==typeof e&&!isNaN(e)}function kQ(e,t){if(!e)return{};var n=e.filter((function(e){var n=fN(e,[t]);return RM(n)&&!isNaN(n)})),r=n.every((function(e){return fN(e,[t])>=0})),i=n.every((function(e){return fN(e,[t])<=0}));return r?{min:0}:i?{max:0}:{}}function _Q(e,t,n,r,i){if(void 0===i&&(i=[]),!Array.isArray(e))return{nodes:[],links:[]};var a=[],o={},s=-1;return e.forEach((function(e){var l=e[t],c=e[n],u=e[r],h=JK(e,i);o[l]||(o[l]=QI({id:++s,name:l},h)),o[c]||(o[c]=QI({id:++s,name:c},h)),a.push(QI({source:o[l].id,target:o[c].id,value:u},h))})),{nodes:Object.values(o).sort((function(e,t){return e.id-t.id})),links:a}}function OQ(e,t){var n=rM(e,(function(e){var n=e[t];return null===n||"number"==typeof n&&!isNaN(n)}));return nQ(qK.WARN,n.length===e.length,"illegal data existed in chart data."),n}function AQ(e){if(RM(e))return[e,e,e,e];if(lM(e)){var t=e.length;if(1===t)return[e[0],e[0],e[0],e[0]];if(2===t)return[e[0],e[1],e[0],e[1]];if(3===t)return[e[0],e[1],e[2],e[1]];if(4===t)return e}return[0,0,0,0]}function IQ(e,t,n){void 0===t&&(t="bottom"),void 0===n&&(n=25);var r=AQ(e),i=[t.startsWith("top")?n:0,t.startsWith("right")?n:0,t.startsWith("bottom")?n:0,t.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function MQ(e){var t=e.map((function(e){return AQ(e)})),n=[0,0,0,0];return t.length>0&&(n=n.map((function(e,n){return t.forEach((function(r,i){e+=t[i][n]})),e}))),n}var NQ="en-US",PQ={};function FQ(e,t){PQ[e]=t}function LQ(e){return{get:function(t,n){return eQ(fN(PQ[e],t)||fN(PQ[NQ],t)||fN(PQ["en-US"],t)||t,n)}}}var RQ={},DQ={},BQ={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=1;e.default=function(){return"".concat(t++)}}(BQ);var $Q={},zQ={},HQ={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){e.apply(r,a)}),t)}}}(HQ);var jQ={};Object.defineProperty(jQ,"__esModule",{value:!0}),jQ.SensorTabIndex=jQ.SensorClassName=jQ.SizeSensorId=void 0;jQ.SizeSensorId="size-sensor-id";jQ.SensorClassName="size-sensor-object";jQ.SensorTabIndex="-1",Object.defineProperty(zQ,"__esModule",{value:!0}),zQ.createSensor=void 0;var GQ=function(e){return e&&e.__esModule?e:{default:e}}(HQ),VQ=jQ;zQ.createSensor=function(e){var t=void 0,n=[],r=(0,GQ.default)((function(){n.forEach((function(t){t(e)}))})),i=function(){t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",r),t.parentNode.removeChild(t),t=void 0,n=[])};return{element:e,bind:function(i){t||(t=function(){"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=document.createElement("object");return t.onload=function(){t.contentDocument.defaultView.addEventListener("resize",r),r()},t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex="-1",t.style.opacity="0",t.setAttribute("class",VQ.SensorClassName),t.setAttribute("tabindex",VQ.SensorTabIndex),t.type="text/html",e.appendChild(t),t.data="about:blank",t}()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}};var YQ={};Object.defineProperty(YQ,"__esModule",{value:!0}),YQ.createSensor=void 0;var UQ=function(e){return e&&e.__esModule?e:{default:e}}(HQ);YQ.createSensor=function(e){var t=void 0,n=[],r=(0,UQ.default)((function(){n.forEach((function(t){t(e)}))})),i=function(){t.disconnect(),n=[],t=void 0};return{element:e,bind:function(i){var a;t||((a=new ResizeObserver(r)).observe(e),r(),t=a),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}},Object.defineProperty($Q,"__esModule",{value:!0}),$Q.createSensor=void 0;var qQ=zQ,WQ="undefined"!=typeof ResizeObserver?YQ.createSensor:qQ.createSensor;$Q.createSensor=WQ,Object.defineProperty(DQ,"__esModule",{value:!0}),DQ.removeSensor=DQ.getSensor=void 0;var XQ=function(e){return e&&e.__esModule?e:{default:e}}(BQ),KQ=$Q,QQ=jQ;var ZQ={};DQ.getSensor=function(e){var t=e.getAttribute(QQ.SizeSensorId);if(t&&ZQ[t])return ZQ[t];var n=(0,XQ.default)();e.setAttribute(QQ.SizeSensorId,n);var r=(0,KQ.createSensor)(e);return ZQ[n]=r,r};DQ.removeSensor=function(e){var t=e.element.getAttribute(QQ.SizeSensorId);e.element.removeAttribute(QQ.SizeSensorId),e.destroy(),t&&ZQ[t]&&delete ZQ[t]},Object.defineProperty(RQ,"__esModule",{value:!0}),RQ.ver=RQ.clear=eZ=RQ.bind=void 0;var JQ=DQ,eZ=RQ.bind=function(e,t){var n=(0,JQ.getSensor)(e);return n.bind(t),function(){n.unbind(t)}};RQ.clear=function(e){var t=(0,JQ.getSensor)(e);(0,JQ.removeSensor)(t)};RQ.ver="1.0.1";var tZ=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],nZ=function(e){function t(t,n){var r=e.call(this)||this;return r.container="string"==typeof t?document.getElementById(t):t,r.options=vQ({},r.getDefaultOptions(),n),r.createG2(),r.bindEvents(),r}return KI(t,e),t.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},t.prototype.createG2=function(){var e=this.options,t=e.width,n=e.height,r=e.defaultInteractions;this.chart=new tY(QI(QI(QI(QI({container:this.container,autoFit:!1},this.getChartSize(t,n)),{localRefresh:!1}),JK(this.options,tZ)),{defaultInteractions:r})),this.container.setAttribute("data-chart-source-type","G2Plot")},t.prototype.getChartSize=function(e,t){var n=rQ(this.container);return{width:e||n.width||400,height:t||n.height||400}},t.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",(function(t){(null==t?void 0:t.type)&&e.emit(t.type,t)}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},t.prototype.update=function(e){this.updateOption(e),this.render()},t.prototype.updateOption=function(e){this.options=vQ({},this.options,e)},t.prototype.setState=function(e,t,n){void 0===n&&(n=!0),uM(oQ(this.chart),(function(r){t(r.getData())&&r.setState(e,n)}))},t.prototype.getStates=function(){var e=oQ(this.chart),t=[];return uM(e,(function(e){var n=e.getData();uM(e.getStates(),(function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})}))})),t},t.prototype.changeData=function(e){this.update({data:e})},t.prototype.changeSize=function(e,t){this.chart.changeSize(e,t)},t.prototype.addAnnotations=function(e){var t=JI(e),n=this.chart.getController("annotation"),r=n.getComponents().map((function(e){return e.extra}));n.clear(!0);for(var i=function(e){var i=r[e],a=t.findIndex((function(e){return e.id&&e.id===i.id}));-1!==a&&(i=vQ({},i,t[a]),t.splice(a,1)),n.annotation(i)},a=0;a<r.length;a++)i(a);t.forEach((function(e){return n.annotation(e)})),this.chart.render(!0)},t.prototype.removeAnnotations=function(e){var t=this.chart.getController("annotation"),n=t.getComponents().map((function(e){return e.extra}));t.clear(!0);for(var r=function(r){var i=n[r];e.find((function(e){return e.id&&e.id===i.id}))||t.annotation(i)},i=0;i<n.length;i++)r(i);this.chart.render(!0)},t.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute("data-chart-source-type")},t.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor(),t=this.options,n=t.padding,r=t.appendPadding;this.chart.padding=n,this.chart.appendPadding=r,e({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var e=this;if(!this.unbind){var t=this.options.autoFit;(void 0===t||t)&&(this.unbind=eZ(this.container,(function(){var t=rQ(e.container),n=t.width,r=t.height;n===e.chart.width&&r===e.chart.height||e.triggerResize()})))}},t.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},t}(iP),rZ=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];function iZ(){return"object"==typeof window?null===window||void 0===window?void 0:window.devicePixelRatio:2}function aZ(e,t){void 0===t&&(t=e);var n=document.createElement("canvas"),r=iZ();return n.width=e*r,n.height=t*r,n.style.width=e+"px",n.style.height=t+"px",n.getContext("2d").scale(r,r),n}function oZ(e,t,n,r){void 0===r&&(r=n);var i=t.backgroundColor,a=t.opacity;e.globalAlpha=a,e.fillStyle=i,e.beginPath(),e.fillRect(0,0,n,r),e.closePath()}function sZ(e,t,n){var r=e+t;return n?2*r:r}function lZ(e,t){return t?[[e*(1/4),e*(1/4)],[e*(3/4),e*(3/4)]]:[[.5*e,.5*e]]}function cZ(e,t){var n=t*Math.PI/180;return{a:Math.cos(n)*(1/e),b:Math.sin(n)*(1/e),c:-Math.sin(n)*(1/e),d:Math.cos(n)*(1/e),e:0,f:0}}var uZ={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function hZ(e,t,n,r){var i=t.size,a=t.fill,o=t.lineWidth,s=t.stroke,l=t.fillOpacity;e.beginPath(),e.globalAlpha=l,e.fillStyle=a,e.strokeStyle=s,e.lineWidth=o,e.arc(n,r,i/2,0,2*Math.PI,!1),e.fill(),o&&e.stroke(),e.closePath()}var pZ={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function dZ(e){var t=vQ({},pZ,e),n=t.spacing,r=t.rotation,i=t.lineWidth,a=n+i||1,o=n+i||1,s="\n            M 0 0 L "+a+" 0\n            M 0 "+o+" L "+a+" "+o+"\n            ",l=aZ(a,o),c=l.getContext("2d");oZ(c,t,a,o),function(e,t,n){var r=t.stroke,i=t.lineWidth,a=t.strokeOpacity,o=new Path2D(n);e.globalAlpha=a,e.lineCap="square",e.strokeStyle=i?r:"transparent",e.lineWidth=i,e.stroke(o)}(c,t,s);var u=c.createPattern(l,"repeat");if(u){var h=cZ(iZ(),r);u.setTransform(h)}return u}var fZ={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function mZ(e,t,n,r){var i=t.stroke,a=t.size,o=t.fill,s=t.lineWidth,l=t.fillOpacity;e.globalAlpha=l,e.strokeStyle=i,e.lineWidth=s,e.fillStyle=o,e.strokeRect(n-a/2,r-a/2,a,a),e.fillRect(n-a/2,r-a/2,a,a)}function gZ(e){var t,n=e.type,r=e.cfg;switch(n){case"dot":t=function(e){var t=vQ({},uZ,e),n=t.size,r=t.padding,i=t.isStagger,a=t.rotation,o=sZ(n,r,i),s=lZ(o,i),l=aZ(o,o),c=l.getContext("2d");oZ(c,t,o);for(var u=0,h=s;u<h.length;u++){var p=h[u];hZ(c,t,p[0],p[1])}var d=c.createPattern(l,"repeat");if(d){var f=cZ(iZ(),a);d.setTransform(f)}return d}(r);break;case"line":t=dZ(r);break;case"square":t=function(e){var t=vQ({},fZ,e),n=t.size,r=t.padding,i=t.isStagger,a=t.rotation,o=sZ(n,r,i),s=lZ(o,i),l=aZ(o,o),c=l.getContext("2d");oZ(c,t,o);for(var u=0,h=s;u<h.length;u++){var p=h[u];mZ(c,t,p[0],p[1])}var d=c.createPattern(l,"repeat");if(d){var f=cZ(iZ(),a);d.setTransform(f)}return d}(r)}return t}function yZ(e){var t=this;return function(n){var r,i=n.options,a=n.chart,o=i.pattern;if(!o)return n;return vQ({},n,{options:(r={},r[e]=function(n){for(var r,s,l,c=[],u=1;u<arguments.length;u++)c[u-1]=arguments[u];var h=a.getTheme().defaultColor,p=h,d=null===(s=null===(r=a.geometries)||void 0===r?void 0:r[0])||void 0===s?void 0:s.getAttribute("color");if(d){var f=d.getFields()[0],m=fN(n,f);p=nU.getMappingValue(d,m,(null===(l=d.values)||void 0===l?void 0:l[0])||h)}var g=o;"function"==typeof o&&(g=o.call(t,n,p)),g instanceof CanvasPattern==!1&&(g=gZ(vQ({},{cfg:{backgroundColor:p}},g)));var y=i[e];return QI(QI({},"function"==typeof y?y.call.apply(y,JI([t,n],c)):y||{}),{fill:g||p})},r)})}}function vZ(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.seriesField;return!1===r?t.legend(!1):(i||a)&&t.legend(i||a,r),e}function EZ(e){var t=e.chart,n=e.options.tooltip;return void 0!==n&&t.tooltip(n),e}function xZ(e){var t=e.chart;return uM(e.options.interactions,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg||{})})),e}function bZ(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),uM(t.geometries,(function(e){e.animate(n)})),e}function CZ(e){var t=e.chart,n=e.options.theme;return n&&t.theme(n),e}function SZ(e){var t=e.chart,n=e.options.state;return n&&uM(t.geometries,(function(e){e.state(n)})),e}function wZ(e){var t=e.chart,n=e.options.slider;return t.option("slider",n),e}function TZ(e){var t=e.chart,n=e.options.scrollbar;return t.option("scrollbar",n),e}function kZ(e,t){return function(n){var r=n.chart,i=n.options,a={};return uM(e,(function(e,t){a[t]=JK(e,rZ)})),a=vQ({},t,i.meta,a),r.scale(a),n}}function _Z(e){return function(t){var n=t.chart,r=t.options,i=n.getController("annotation");return uM(JI(r.annotations||[],e||[]),(function(e){i.annotation(e)})),t}}function OZ(e){var t=e.chart,n=e.options,r=n.yAxis,i=n.limitInPlot,a=i;return cM(r)&&sM(i)&&(a=!!Object.values(JK(r,["min","max","minLimit","maxLimit"])).some((function(e){return!sM(e)}))),t.limitInPlot=a,e}function AZ(e,t){if(!1===e)return{fields:!1};var n=fN(e,"fields"),r=fN(e,"formatter");return r&&!n&&(n=t),{fields:n,formatter:r}}function IZ(e,t){var n=e.type,r=e.xField,i=e.yField,a=e.colorField,o=e.shapeField,s=e.sizeField,l=e.styleField,c=e.rawFields,u=void 0===c?[]:c,h=[];if("color"===t)h=JI([a||r],u);else if("shape"===t)h=JI([o||r],u);else if("size"===t)h=JI([s||r],u);else{h=JI([r,i,a,o,s,l],u);var p=["x","y","color","shape","size","style"].indexOf(t),d=h[p];h.splice(p,1),h.unshift(d)}var f=TM(h.filter((function(e){return!!e}))),m="line"===n&&[r,i].includes(f.join("*"))?"":f.join("*");return{mappingFields:f,tileMappingField:m}}function MZ(e,t){if(t)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return e.forEach((function(e,t){i[e]=n[t]})),delete i[void 0],t(i)}}function NZ(e){var t=e.chart,n=e.options,r=n.type,i=n.args,a=n.mapping,o=n.xField,s=n.yField,l=n.colorField,c=n.shapeField,u=n.sizeField,h=n.tooltipFields,p=n.label,d=n.state,f=n.customInfo;if(!a)return e;var m=a.color,g=a.shape,y=a.size,v=a.style,E=a.tooltip,x=t[r](i).position(o+"*"+s);if(wM(m))l?x.color(l,m):x.color(m);else if(oM(m)){var b=IZ(n,"color"),C=b.mappingFields,S=b.tileMappingField;x.color(S,MZ(C,m))}else l&&x.color(l,m);if(wM(g))c?x.shape(c,[g]):x.shape(g);else if(oM(g)){var w=IZ(n,"shape");C=w.mappingFields,S=w.tileMappingField;x.shape(S,MZ(C,g))}else c&&x.shape(c,g);if(RM(y))u?x.size(u,y):x.size(y);else if(oM(y)){var T=IZ(n,"size");C=T.mappingFields,S=T.tileMappingField;x.size(S,MZ(C,y))}else u&&x.size(u,y);if(oM(v)){var k=IZ(n,"style");C=k.mappingFields,S=k.tileMappingField;x.style(S,MZ(C,v))}else cM(v)&&x.style(v);if(!1===h?x.tooltip(!1):cN(h)||x.tooltip(h.join("*"),MZ(h,E)),!1===p)x.label(!1);else if(p){var _=p.callback,O=p.fields,A=ZI(p,["callback","fields"]);x.label({fields:O||[s],callback:_,cfg:hQ(A)})}return d&&x.state(d),f&&x.customInfo(f),[o,s].filter((function(e){return e!==l})).forEach((function(e){t.legend(e,!1)})),QI(QI({},e),{ext:{geometry:x}})}function PZ(e){var t=e.options,n=t.area,r=t.xField,i=t.yField,a=t.seriesField,o=t.smooth,s=AZ(t.tooltip,[r,i,a]),l=s.fields,c=s.formatter;return n?NZ(vQ({},e,{options:{type:"area",colorField:a,tooltipFields:l,mapping:QI({shape:o?"smooth":"area",tooltip:c},n)}})):e}function FZ(e){var t=e.options,n=t.line,r=t.stepType,i=t.xField,a=t.yField,o=t.seriesField,s=t.smooth,l=t.connectNulls,c=AZ(t.tooltip,[i,a,o]),u=c.fields,h=c.formatter;return n?NZ(vQ({},e,{options:{type:"line",colorField:o,tooltipFields:u,mapping:oN({shape:r||(s?"smooth":"line"),tooltip:h},n),args:{connectNulls:l}}})):e}function LZ(e){var t=e.options,n=t.point,r=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=t.shapeField,l=AZ(t.tooltip,[r,i,a,o,s]),c=l.fields,u=l.formatter;return n?NZ(vQ({},e,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:c,mapping:QI({tooltip:u},n)}})):e}function RZ(e){var t=e.options,n=t.xField,r=t.yField,i=t.interval,a=t.seriesField,o=t.tooltip,s=t.minColumnWidth,l=t.maxColumnWidth,c=t.columnBackground,u=t.dodgePadding,h=t.intervalPadding,p=AZ(o,[n,r,a]),d=p.fields,f=p.formatter,m=(i?NZ(vQ({},e,{options:{type:"interval",colorField:a,tooltipFields:d,mapping:QI({tooltip:f},i),args:{dodgePadding:u,intervalPadding:h,minColumnWidth:s,maxColumnWidth:l,background:c}}})):e).ext;return function(e){var t=e.chart,n=e.options,r=e.ext,i=n.seriesField,a=n.isGroup,o=n.isStack,s=n.marginRatio,l=n.widthRatio,c=n.groupField,u=n.theme,h=[];return i&&(a&&h.push({type:"dodge",dodgeBy:c||i,marginRatio:s}),o&&h.push({type:"stack",marginRatio:s})),h.length&&(null==r?void 0:r.geometry)&&(null==r?void 0:r.geometry).adjust(h),sM(l)||t.theme(vQ({},cM(u)?u:PV(u),{columnWidthRatio:l})),e}(QI(QI({},e),{ext:m}))}function DZ(e){var t=e.options,n=t.polygon,r=t.xField,i=t.yField,a=t.seriesField,o=AZ(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?NZ(vQ({},e,{options:{type:"polygon",colorField:a,tooltipFields:s,mapping:QI({tooltip:l},n)}})):e}function BZ(e){var t=e.options,n=t.edge,r=t.xField,i=t.yField,a=t.seriesField,o=AZ(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?NZ(vQ({},e,{options:{type:"edge",colorField:a,tooltipFields:s,mapping:QI({tooltip:l},n)}})):e}function $Z(e){var t=e.options,n=t.schema,r=t.xField,i=t.yField,a=t.seriesField,o=AZ(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?NZ(vQ({},e,{options:{type:"schema",colorField:a,tooltipFields:s,mapping:QI({tooltip:l},n)}})):e}var zZ=vQ({},nZ.getDefaultOptions(),{syncViewPadding:!0,tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1});function HZ(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.lineStyle,o=n.lineShape,s=n.point,l=n.area,c=n.yField,u=n.seriesField,h=null==s?void 0:s.state;t.data(r);var p=vQ({},e,{options:{shapeField:u,line:{color:i,style:a,shape:o},point:s&&QI({color:i,shape:"circle"},s),area:l&&QI({color:i},l),label:void 0}}),d=vQ({},p,{options:{tooltip:!1,state:h}});FZ(p),PZ(d);var f=vQ({},p,{options:{tooltip:!1,state:h}});if(s){var m=t.createView({id:"point-view"});m.axis(!1),m.tooltip(!1),m.legend(!1),m.data(r.filter((function(e){return!sM(e[c])}))),LZ(QI(QI({},f),{chart:m}))}return e}function jZ(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,c=r.seriesField,u=((t={})[o]={type:"cat",sync:!0,values:TM(l.map((function(e){return e[o]})))},t[s]=QI(QI({},kQ(l,s)),{sync:!0}),t);return c&&(u[c]={sync:!0}),ZK(kZ(((n={})[o]=i,n[s]=a,n),u))(e)}function GZ(e){var t=e.chart,n=e.options.reflect;if(n){var r=n;lM(r)||(r=[r]);var i=r.map((function(e){return["reflect",e]}));t.coordinate({type:"rect",actions:i})}return e}function VZ(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function YZ(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):!1===r&&t.legend(!1),e}function UZ(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=iQ(t,"line");if(r){var o=r.callback,s=ZI(r,["callback"]);a.label({fields:[i],callback:o,cfg:QI({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},hQ(s))})}else a.label(!1);return e}function qZ(e){var t=e.chart,n=e.options.isStack,r=sQ(t);return n&&uM(r,(function(e){e.adjust("stack")})),e}function WZ(e){return ZK(HZ,jZ,qZ,CZ,GZ,VZ,YZ,EZ,UZ,wZ,xZ,bZ,_Z(),OZ)(e)}MG("marker-active",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.active=function(){var e=this.getView(),t=this.context.event;if(t.data){var n=t.data.items,r=iQ(e,"point");r&&uM(r.elements,(function(e){var t=-1!==gM(n,(function(t){return t.data===e.data}));e.setState("active",t)}))}},t.prototype.reset=function(){var e=iQ(this.getView(),"point");e&&uM(e.elements,(function(e){e.setState("active",!1)}))},t.prototype.getView=function(){return this.context.view},t}(_G)),yV("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var XZ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t}return KI(t,e),t.getDefaultOptions=function(){return zZ},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.yField;jZ({chart:t,options:n}),this.chart.changeData(e);var i=lQ(this.chart,"point-view");i&&i.changeData(e.filter((function(e){return!sM(e[r])})))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return WZ},t}(nZ);function KZ(e,t,n,r){var i=CM(e,(function(e,r){var i=r[n],a=e.has(i)?e.get(i):0,o=r[t];return a=TQ(o)?a+o:a,e.set(i,a),e}),new Map);return pN(e,(function(e){var a,o=e[t],s=e[n],l=TQ(o)?o/i.get(s):0;return QI(QI({},e),((a={})[r]=l,a))}))}function QZ(e,t,n,r,i){return i?KZ(e,t,n,r):e}var ZZ=vQ({},nZ.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}});function JZ(e){var t=e.chart,n=e.options,r=n.data,i=n.areaStyle,a=n.color,o=n.point,s=n.line,l=n.isPercent,c=n.xField,u=n.yField,h=n.tooltip,p=n.seriesField,d=n.startOnZero,f=null==o?void 0:o.state,m=QZ(r,u,c,u,l);t.data(m);var g=l?QI({formatter:function(e){return{name:e[p]||e[c],value:(100*Number(e[u])).toFixed(2)+"%"}}},h):h,y=vQ({},e,{options:{area:{color:a,style:i},line:s&&QI({color:a},s),point:o&&QI({color:a},o),tooltip:g,label:void 0,args:{startOnZero:d}}}),v=vQ({options:{line:{size:2}}},y,{options:{sizeField:p,tooltip:!1}});PZ(y),FZ(v);var E=vQ({},y,{options:{tooltip:!1,state:f}});if(o){var x=t.createView({id:"point-view"});x.axis(!1),x.tooltip(!1),x.legend(!1),x.data(r.filter((function(e){return!sM(e[u])}))),LZ(QI(QI({},E),{chart:x}))}return e}function eJ(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=iQ(t,"area");if(r){var o=r.callback,s=ZI(r,["callback"]);a.label({fields:[i],callback:o,cfg:QI({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},hQ(s))})}else a.label(!1);return e}function tJ(e){var t=e.chart,n=e.options,r=n.isStack,i=n.isPercent,a=n.seriesField;(i||r)&&a&&uM(sQ(t),(function(e){e.adjust("stack")}));return e}function nJ(e){return ZK(CZ,yZ("areaStyle"),JZ,jZ,tJ,VZ,YZ,EZ,eJ,wZ,_Z(),xZ,bZ,OZ)(e)}var rJ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="area",t}return KI(t,e),t.getDefaultOptions=function(){return ZZ},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.isPercent,i=n.xField,a=n.yField;jZ({chart:t,options:n});var o=QZ(e,a,i,a,r);this.chart.changeData(o);var s=lQ(this.chart,"point-view");s&&s.changeData(e.filter((function(e){return!sM(e[a])})))},t.prototype.getSchemaAdaptor=function(){return nJ},t}(nZ);function iJ(e,t){return RM(e)&&RM(t)?e===t?"100%":0===e?"∞":0===t?"-∞":(100*t/e).toFixed(2)+"%":"-"}function aJ(e,t){return vQ({size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:!1!==e.arrow&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:!1!==e.text&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:iJ}},e)}function oJ(e,t){return pN(t.getModel().points,(function(t){return e.convertPoint(t)}))}function sJ(e,t,n){!function(e,t,n){var r=e.view,i=e.geometry,a=e.group,o=e.options,s=e.horizontal,l=o.offset,c=o.size,u=o.arrow,h=r.getCoordinate(),p=oJ(h,t)[3],d=oJ(h,n)[0],f=d.y-p.y,m=d.x-p.x;if("boolean"!=typeof u){var g,y=u.headSize,v=o.spacing;s?(m-y)/2<v?(v=Math.max(1,(m-y)/2),g=[[p.x+v,p.y-l],[p.x+v,p.y-l-c],[d.x-v,d.y-l-c/2]]):g=[[p.x+v,p.y-l],[p.x+v,p.y-l-c],[d.x-v-y,d.y-l-c],[d.x-v,d.y-l-c/2],[d.x-v-y,d.y-l]]:(f-y)/2<v?(v=Math.max(1,(f-y)/2),g=[[p.x+l,p.y+v],[p.x+l+c,p.y+v],[d.x+l+c/2,d.y-v]]):g=[[p.x+l,p.y+v],[p.x+l+c,p.y+v],[d.x+l+c,d.y-v-y],[d.x+l+c/2,d.y-v],[d.x+l,d.y-v-y]],a.addShape("polygon",{id:r.id+"-conversion-tag-arrow-"+i.getElementId(t.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:t,nextElement:n},attrs:QI(QI({},u.style||{}),{points:g})})}}(e,t,n),function(e,t,n){var r,i,a,o=e.view,s=e.geometry,l=e.group,c=e.options,u=e.field,h=e.horizontal,p=c.offset,d=c.size;if("boolean"!=typeof c.text){var f=o.getCoordinate(),m=(null===(r=c.text)||void 0===r?void 0:r.formatter)&&(null===(i=c.text)||void 0===i?void 0:i.formatter(t.getData()[u],n.getData()[u])),g=oJ(f,t)[h?3:0],y=oJ(f,n)[h?0:3],v=l.addShape("text",{id:o.id+"-conversion-tag-text-"+s.getElementId(t.getModel().mappingData),name:"conversion-tag-text",origin:{element:t,nextElement:n},attrs:QI(QI({},(null===(a=c.text)||void 0===a?void 0:a.style)||{}),{text:m,x:h?(g.x+y.x)/2:g.x+p+d/2,y:h?g.y-p-d/2:(g.y+y.y)/2})});if(h){var E=y.x-g.x,x=v.getBBox().width;if(x>E){var b=x/m.length,C=Math.max(1,Math.ceil(E/b)-1),S=m.slice(0,C)+"...";v.attr("text",S)}}}}(e,t,n)}var lJ={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},cJ=function(e,t){return"hover"===e?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:t}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:t}]}]};yV(lJ.hover,{start:cJ(lJ.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),yV(lJ.click,{start:cJ(lJ.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});var uJ={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}};function hJ(e){return e.isInPlot()}function pJ(e,t,n){var r=t||"rect";switch(e){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:hJ,action:["brush:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:hJ,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:hJ,action:["brush:filter","brush:end",r+"-mask:end",r+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:hJ,action:["brush-x:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:hJ,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:hJ,action:["brush-x:filter","brush-x:end",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:hJ,action:["brush-y:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:hJ,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:hJ,action:["brush-y:filter","brush-y:end",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};default:return{}}}MG("brush-reset-button",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=QI({name:"button"},uJ),t}return KI(t,e),t.prototype.getButtonCfg=function(){var e=this.context.view,t=fN(e,["interactions","filter-action","cfg","buttonConfig"]);return vQ(this.buttonCfg,t,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=this.drawText(t);this.drawBackground(t,n.getBBox()),this.buttonGroup=t},t.prototype.drawText=function(e){var t,n=this.getButtonCfg();return e.addShape({type:"text",name:"button-text",attrs:QI({text:n.text},null===(t=n.textStyle)||void 0===t?void 0:t.default)})},t.prototype.drawBackground=function(e,t){var n,r=this.getButtonCfg(),i=AQ(r.padding),a=e.addShape({type:"rect",name:"button-rect",attrs:QI({x:t.x-i[3],y:t.y-i[0],width:t.width+i[1]+i[3],height:t.height+i[0]+i[2]},null===(n=r.buttonStyle)||void 0===n?void 0:n.default)});return a.toBack(),e.on("mouseenter",(function(){var e;a.attr(null===(e=r.buttonStyle)||void 0===e?void 0:e.active)})),e.on("mouseleave",(function(){var e;a.attr(null===(e=r.buttonStyle)||void 0===e?void 0:e.default)})),a},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=nU.transform(null,[["t",e.x-n.width-10,e.y+n.height+5]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(_G),{name:"brush-reset-button"}),yV("filter-action",{}),yV("brush",pJ("brush")),yV("brush-highlight",pJ("brush-highlight")),yV("brush-x",pJ("brush-x","x-rect")),yV("brush-y",pJ("brush-y","y-rect")),yV("brush-x-highlight",pJ("brush-x-highlight","x-rect")),yV("brush-y-highlight",pJ("brush-y-highlight","y-rect"));var dJ=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function fJ(e){var t=e.options,n=t.brush,r=rM(t.interactions||[],(function(e){return-1===dJ.indexOf(e.type)}));return(null==n?void 0:n.enabled)&&(dJ.forEach((function(e){var t,i=!1;switch(n.type){case"x-rect":i=e===("highlight"===n.action?"brush-x-highlight":"brush-x");break;case"y-rect":i=e===("highlight"===n.action?"brush-y-highlight":"brush-y");break;default:i=e===("highlight"===n.action?"brush-highlight":"brush")}var a={type:e,enable:i};((null===(t=n.mask)||void 0===t?void 0:t.style)||n.type)&&(a.cfg=pJ(e,n.type,n.mask)),r.push(a)})),"highlight"!==(null==n?void 0:n.action)&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),vQ({},e,{options:{interactions:r}})}function mJ(e){var t=e.options,n=t.legend,r=t.seriesField,i=t.isStack;return r?!1!==n&&(n=QI({position:i?"right-top":"top-left"},n)):n=!1,e.options.legend=n,e}function gJ(e){var t=e.chart,n=e.options,r=n.data,i=n.columnStyle,a=n.color,o=n.columnWidthRatio,s=n.isPercent,l=n.isGroup,c=n.isStack,u=n.xField,h=n.yField,p=n.seriesField,d=n.groupField,f=n.tooltip,m=n.shape,g=s&&l&&c?function(e,t,n,r){var i=CM(e,(function(e,r){var i=CM(n,(function(e,t){return""+e+r[t]}),""),a=e.has(i)?e.get(i):0,o=r[t];return a=TQ(o)?a+o:a,e.set(i,a),e}),new Map);return pN(e,(function(e){var a,o=e[t],s=CM(n,(function(t,n){return""+t+e[n]}),""),l=TQ(o)?o/i.get(s):0;return QI(QI({},e),((a={})[r]=l,a))}))}(r,h,[u,d],h):QZ(r,h,u,h,s),y=[];c&&p&&!l?g.forEach((function(e){var t=y.find((function(t){return t[u]===e[u]&&t[p]===e[p]}));t?t[h]+=e[h]||0:y.push(QI({},e))})):y=g,t.data(y);var v=s?QI({formatter:function(e){return{name:l&&c?e[p]+" - "+e[d]:e[p]||e[u],value:(100*Number(e[h])).toFixed(2)+"%"}}},f):f,E=vQ({},e,{options:{data:y,widthRatio:o,tooltip:v,interval:{shape:m,style:i,color:a}}});return RZ(E),E}function yJ(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,c=r.isPercent?{max:1,min:0,minLimit:0,maxLimit:1}:{};return ZK(kZ(((t={})[o]=i,t[s]=a,t),((n={})[o]={type:"cat"},n[s]=QI(QI({},kQ(l,s)),c),n)))(e)}function vJ(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function EJ(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):!1===r&&t.legend(!1),e}function xJ(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=n.isRange,o=iQ(t,"interval");if(r){var s=r.callback,l=ZI(r,["callback"]);o.label({fields:[i],callback:s,cfg:QI({layout:(null==l?void 0:l.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},hQ(a?QI({content:function(e){var t;return null===(t=e[i])||void 0===t?void 0:t.join("-")}},l):l))})}else o.label(!1);return e}function bJ(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.isGroup,a=n.isStack,o=n.groupField,s=n.data,l=n.xField,c=n.yField,u=n.seriesField;if(!1===r)t.tooltip(!1);else{var h=r;if(i&&a){var p=(null==h?void 0:h.formatter)||function(e){return{name:e[u]+" - "+e[o],value:e[c]}};h=QI(QI({},h),{customItems:function(e){var t=[];return uM(e,(function(e){rM(s,(function(t){return pM(t,JK(e.data,[l,u]))})).forEach((function(n){t.push(QI(QI(QI({},e),{value:n[c],data:n,mappingData:{_origin:n}}),p(n)))}))})),t}})}t.tooltip(h)}return e}function CJ(e,t){void 0===t&&(t=!1);var n,r,i,a,o=e.options,s=o.seriesField;return ZK(mJ,CZ,yZ("columnStyle"),SZ,gJ,yJ,vJ,EJ,bJ,wZ,TZ,xJ,fJ,xZ,bZ,_Z(),(r=o.yField,void 0===(i=!t)&&(i=!0),void 0===(a=!!s)&&(a=!1),function(e){var t=e.options,n=e.chart,o=t.conversionTag,s=t.theme;return o&&!a&&(n.theme(vQ({},cM(s)?s:PV(s),{columnWidthRatio:1/3})),n.annotation().shape({render:function(e,t){var a=e.addGroup({id:n.id+"-conversion-tag-group",name:"conversion-tag-group"}),s=mM(n.geometries,(function(e){return"interval"===e.type})),l={view:t,geometry:s,group:a,field:r,horizontal:i,options:aJ(o,i)},c=s.elements;uM(c,(function(e,t){t>0&&sJ(l,c[t-1],e)}))}})),e}),(void 0===(n=!o.isStack)&&(n=!1),function(e){var t=e.chart,r=e.options.connectedArea,i=function(){t.removeInteraction(lJ.hover),t.removeInteraction(lJ.click)};if(!n&&r){var a=r.trigger||"hover";i(),t.interaction(lJ[a],{start:cJ(a,r.style)})}else i();return e}),OZ)(e)}var SJ=vQ({},nZ.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),wJ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="column",t}return KI(t,e),t.getDefaultOptions=function(){return SJ},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.yField,r=t.xField,i=t.isPercent;yJ({chart:this.chart,options:this.options}),this.chart.changeData(QZ(e,n,r,n,i))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return CJ},t}(nZ);function TJ(e){var t=e.options,n=t.xField,r=t.yField,i=t.xAxis,a=t.yAxis,o={left:"bottom",right:"top",top:"left",bottom:"right"},s=!1!==a&&QI({position:o[(null==a?void 0:a.position)||"left"]},a),l=!1!==i&&QI({position:o[(null==i?void 0:i.position)||"bottom"]},i);return QI(QI({},e),{options:QI(QI({},t),{xField:r,yField:n,xAxis:s,yAxis:l})})}function kJ(e){var t=e.options.label;return t&&!t.position&&(t.position="left",t.layout||(t.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),vQ({},e,{options:{label:t}})}function _J(e){var t=e.options,n=t.seriesField,r=t.isStack,i=t.legend;return n?!1!==i&&(i=QI({position:r?"top-left":"right-top"},i||{})):i=!1,vQ({},e,{options:{legend:i}})}function OJ(e){return e.chart.coordinate({actions:[["transpose"],["reflect","y"]]}),e}function AJ(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.barWidthRatio,a=n.minBarWidth,o=n.maxBarWidth,s=n.barBackground;return CJ({chart:t,options:QI(QI({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:s})},!0)}function IJ(e){return ZK(TJ,kJ,_J,EZ,OJ,AJ)(e)}var MJ=vQ({},nZ.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),NJ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bar",t}return KI(t,e),t.getDefaultOptions=function(){return MJ},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.xField,i=n.yField,a=n.isPercent;yJ({chart:t,options:QI(QI({},n),{xField:i,yField:r})}),t.changeData(QZ(e,r,i,r,a))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return IJ},t}(nZ),PJ=vQ({},nZ.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function FJ(e,t){var n;switch(e){case"inner":return n="-30%",wM(t)&&t.endsWith("%")?.01*parseFloat(t)>0?n:t:t<0?t:n;case"outer":return n=12,wM(t)&&t.endsWith("%")?.01*parseFloat(t)<0?n:t:t>0?t:n;default:return t}}function LJ(e,t){return AM(OQ(e,t),(function(e){return 0===e[t]}))}var RJ=[1,0,0,0,1,0,0,0,1];function DJ(e,t){var n=JI(t||RJ);return nU.transform(n,e)}var BJ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getActiveElements=function(){var e=nU.getDelegationObject(this.context);if(e){var t=this.context.view,n=e.component,r=e.item,i=n.get("field");if(i)return t.geometries[0].elements.filter((function(e){return e.getModel().data[i]===r.value}))}return[]},t.prototype.getActiveElementLabels=function(){var e=this.context.view,t=this.getActiveElements();return e.geometries[0].labelsContainer.getChildren().filter((function(e){return t.find((function(t){return hN(t.getData(),e.get("data"))}))}))},t.prototype.transfrom=function(e){void 0===e&&(e=7.5);var t=this.getActiveElements(),n=this.getActiveElementLabels();t.forEach((function(t,r){var i=n[r],a=t.geometry.coordinate;if(a.isPolar&&a.isTransposed){var o=nU.getAngle(t.getModel(),a),s=(o.startAngle+o.endAngle)/2,l=e,c=l*Math.cos(s),u=l*Math.sin(s);t.shape.setMatrix(DJ([["t",c,u]])),i.setMatrix(DJ([["t",c,u]]))}}))},t.prototype.active=function(){this.transfrom()},t.prototype.reset=function(){this.transfrom(0)},t}(_G);var $J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getAnnotations=function(e){return(e||this.context.view).getController("annotation").option},t.prototype.getInitialAnnotation=function(){return this.initialAnnotation},t.prototype.init=function(){var e=this,t=this.context.view;t.removeInteraction("tooltip"),t.on("afterchangesize",(function(){var n=e.getAnnotations(t);e.initialAnnotation=n}))},t.prototype.change=function(e){var t=this.context,n=t.view,r=t.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var i=fN(r,["data","data"]);if(r.type.match("legend-item")){var a=nU.getDelegationObject(this.context),o=n.getGroupedFields()[0];if(a&&o){var s=a.item;i=n.getData().find((function(e){return e[o]===s.value}))}}if(i){var l=fN(e,"annotations",[]),c=fN(e,"statistic",{});n.getController("annotation").clear(!0),uM(l,(function(e){"object"==typeof e&&n.annotation()[e.type](e)})),SQ(n,{statistic:c,plotType:"pie"},i),n.render(!0)}var u,h,p,d=(u=this.context,(p=u.event.target)&&(h=p.get("element")),h);d&&d.shape.toFront()},t.prototype.reset=function(){var e=this.context.view;e.getController("annotation").clear(!0),uM(this.getInitialAnnotation(),(function(t){e.annotation()[t.type](t)})),e.render(!0)},t}(_G);function zJ(e){var t=e.chart,n=e.options,r=n.data,i=n.angleField,a=n.colorField,o=n.color,s=n.pieStyle,l=OQ(r,i);if(LJ(l,i)){var c="$$percentage$$";l=l.map((function(e){var t;return QI(QI({},e),((t={}).$$percentage$$=1/l.length,t))})),t.data(l),RZ(vQ({},e,{options:{xField:"1",yField:c,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}}))}else{t.data(l),RZ(vQ({},e,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}}))}return e}function HJ(e){var t,n=e.chart,r=e.options,i=r.meta,a=r.colorField,o=vQ({},i);return n.scale(o,((t={})[a]={type:"cat"},t)),e}function jJ(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),e}function GJ(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,a=n.angleField,o=t.geometries[0];if(r){var s=r.callback,l=hQ(ZI(r,["callback"]));if(l.content){var c=l.content;l.content=function(e,n,r){var o=e[i],s=e[a],l=t.getScaleByField(a),u=null==l?void 0:l.scale(s);return oM(c)?c(QI(QI({},e),{percent:u}),n,r):wM(c)?eQ(c,{value:s,name:o,percentage:RM(u)&&!sM(s)?(100*u).toFixed(2)+"%":null}):c}}var u=l.type?{inner:"",outer:"pie-outer",spider:"pie-spider"}[l.type]:"pie-outer",h=l.layout?lM(l.layout)?l.layout:[l.layout]:[];l.layout=(u?[{type:u}]:[]).concat(h),o.label({fields:i?[a,i]:[a],callback:s,cfg:QI(QI({},l),{offset:FJ(l.type,l.offset),type:"pie"})})}else o.label(!1);return e}function VJ(e){var t=e.innerRadius,n=e.statistic,r=e.angleField,i=e.colorField,a=e.meta,o=LQ(e.locale);if(t&&n){var s=vQ({},PJ.statistic,n),l=s.title,c=s.content;return!1!==l&&(l=vQ({},{formatter:function(e){return e?e[i]:sM(l.content)?o.get(["statistic","total"]):l.content}},l)),!1!==c&&(c=vQ({},{formatter:function(e,t){var n=e?e[r]:function(e,t){var n=null;return uM(e,(function(e){"number"==typeof e[t]&&(n+=e[t])})),n}(t,r),i=fN(a,[r,"formatter"])||function(e){return e};return e||sM(c.content)?i(n):c.content}},c)),vQ({},{statistic:{title:l,content:c}},e)}return e}function YJ(e){var t=e.chart,n=VJ(e.options),r=n.innerRadius,i=n.statistic;return t.getController("annotation").clear(!0),ZK(_Z())(e),r&&i&&SQ(t,{statistic:i,plotType:"pie"}),e}function UJ(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.colorField,a=n.angleField,o=n.data;if(!1===r)t.tooltip(r);else if(t.tooltip(vQ({},r,{shared:!1})),LJ(o,a)){var s=fN(r,"fields"),l=fN(r,"formatter");cN(fN(r,"fields"))&&(s=[i,a],l=l||function(e){return{name:e[i],value:VM(e[a])}}),t.geometries[0].tooltip(s.join("*"),MZ(s,l))}return e}function qJ(e){var t=e.chart,n=VJ(e.options),r=n.interactions,i=n.statistic,a=n.annotations;return uM(r,(function(e){var n,r;if(!1===e.enable)t.removeInteraction(e.type);else if("pie-statistic-active"===e.type){var o=[];(null===(n=e.cfg)||void 0===n?void 0:n.start)||(o=[{trigger:"element:mouseenter",action:"pie-statistic:change",arg:{statistic:i,annotations:a}}]),uM(null===(r=e.cfg)||void 0===r?void 0:r.start,(function(e){o.push(QI(QI({},e),{arg:{statistic:i,annotations:a}}))})),t.interaction(e.type,vQ({},e.cfg,{start:o}))}else t.interaction(e.type,e.cfg||{})})),e}function WJ(e){return ZK(yZ("pieStyle"),zJ,HJ,CZ,jJ,vZ,UJ,GJ,SZ,YJ,qJ,bZ)(e)}MG("pie-statistic",$J),yV("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),MG("pie-legend",BJ),yV("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var XJ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pie",t}return KI(t,e),t.getDefaultOptions=function(){return PJ},t.prototype.changeData=function(e){this.chart.emit(NN.BEFORE_CHANGE_DATA,qV.fromData(this.chart,NN.BEFORE_CHANGE_DATA,null));var t=this.options,n=this.options.angleField,r=OQ(t.data,n),i=OQ(e,n);LJ(r,n)||LJ(i,n)?this.update({data:e}):(this.updateOption({data:e}),this.chart.data(i),YJ({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(NN.AFTER_CHANGE_DATA,qV.fromData(this.chart,NN.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return WJ},t}(nZ);function KJ(e){var t=e.chart,n=e.options,r=n.data,i=n.sectorStyle,a=n.color;return t.data(r),ZK(RZ)(vQ({},e,{options:{marginRatio:1,interval:{style:i,color:a}}})),e}function QJ(e){var t=e.chart,n=e.options,r=n.label,i=n.xField,a=iQ(t,"interval");if(!1===r)a.label(!1);else if(cM(r)){var o=r.callback,s=r.fields,l=ZI(r,["callback","fields"]),c=l.offset,u=l.layout;(void 0===c||c>=0)&&(u=u?lM(u)?u:[u]:[],l.layout=rM(u,(function(e){return"limit-in-shape"!==e.type})),l.layout.length||delete l.layout),a.label({fields:s||[i],callback:o,cfg:hQ(l)})}else nQ(qK.WARN,null===r,"the label option must be an Object."),a.label({fields:[i]});return e}function ZJ(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return!1===r?t.legend(!1):i&&t.legend(i,r),e}function JJ(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),e}function e1(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ZK(kZ(((t={})[a]=r,t[o]=i,t)))(e)}function t1(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r?t.axis(a,r):t.axis(a,!1),i?t.axis(o,i):t.axis(o,!1),e}function n1(e){ZK(yZ("sectorStyle"),KJ,e1,QJ,JJ,t1,ZJ,EZ,xZ,bZ,CZ,_Z(),SZ)(e)}var r1=vQ({},nZ.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right"},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rose",t}KI(t,e),t.getDefaultOptions=function(){return r1},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return n1}}(nZ);var i1={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function a1(e,t){return function(e,t){var n=function(){var e=[256,256],t=c1,n=h1,r=u1,i=p1,a=d1,o=v1,s=Math.random,l=[],c=1/0,u=l1,h=u1,p=x1,d={};function f(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=s1/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function m(t,n,r){for(var i,a,l,c=n.x,u=n.y,h=Math.sqrt(e[0]*e[0]+e[1]*e[1]),p=o(e),d=s()<.5?1:-1,f=-d;(i=p(f+=d))&&(a=~~i[0],l=~~i[1],!(Math.min(Math.abs(a),Math.abs(l))>=h));)if(n.x=c+a,n.y=u+l,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1])&&(!r||!m1(n,t,e[0]))&&(!r||y1(n,r))){for(var m=n.sprite,g=n.width>>5,y=e[0]>>5,v=n.x-(g<<4),E=127&v,x=32-E,b=n.y1-n.y0,C=void 0,S=(n.y+n.y0)*y+(v>>5),w=0;w<b;w++){C=0;for(var T=0;T<=g;T++)t[S+T]|=C<<x|(T<g?(C=m[w*g+T])>>>E:0);S+=y}return delete n.sprite,!0}return!1}return d.start=function(){var o=e[0],g=e[1],y=f(p()),v=d.board?d.board:E1((e[0]>>5)*e[1]),E=l.length,x=[],b=l.map((function(e,o,s){return e.text=u.call(this,e,o,s),e.font=t.call(this,e,o,s),e.style=h.call(this,e,o,s),e.weight=r.call(this,e,o,s),e.rotate=i.call(this,e,o,s),e.size=~~n.call(this,e,o,s),e.padding=a.call(this,e,o,s),e})).sort((function(e,t){return t.size-e.size})),C=-1,S=d.board?[{x:0,y:0},{x:o,y:g}]:null;function w(){for(var t=Date.now();Date.now()-t<c&&++C<E;){var n=b[C];n.x=o*(s()+.5)>>1,n.y=g*(s()+.5)>>1,f1(y,n,b,C),n.hasText&&m(v,n,S)&&(x.push(n),S?d.hasImage||g1(S,n):S=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}d._tags=x,d._bounds=S}return w(),d},d.createMask=function(t){var n=document.createElement("canvas"),r=e[0],i=e[1];if(r&&i){var a=r>>5,o=E1((r>>5)*i);n.width=r,n.height=i;var s=n.getContext("2d");s.drawImage(t,0,0,t.width,t.height,0,0,r,i);for(var l=s.getImageData(0,0,r,i).data,c=0;c<i;c++)for(var u=0;u<r;u++){var h=a*c+(u>>5),p=c*r+u<<2,f=l[p]>=250&&l[p+1]>=250&&l[p+2]>=250?1<<31-u%32:0;o[h]|=f}d.board=o,d.hasImage=!0}},d.timeInterval=function(e){c=null==e?1/0:e},d.words=function(e){l=e},d.size=function(t){e=[+t[0],+t[1]]},d.font=function(e){t=b1(e)},d.fontWeight=function(e){r=b1(e)},d.rotate=function(e){i=b1(e)},d.spiral=function(e){o=C1[e]||e},d.fontSize=function(e){n=b1(e)},d.padding=function(e){a=b1(e)},d.random=function(e){s=b1(e)},d}();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach((function(e){sM(t[e])||n[e](t[e])})),n.words(e),t.imageMask&&n.createMask(t.imageMask);var r=n.start()._tags;r.forEach((function(e){e.x+=t.size[0]/2,e.y+=t.size[1]/2}));var i=t.size,a=i[0],o=i[1];return r.push({text:"",value:0,x:0,y:0,opacity:0}),r.push({text:"",value:0,x:a,y:o,opacity:0}),r}(e,t=tN({},i1,t))}var o1=Math.PI/180,s1=2048;function l1(e){return e.text}function c1(){return"serif"}function u1(){return"normal"}function h1(e){return e.value}function p1(){return 90*~~(2*Math.random())}function d1(){return 1}function f1(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,2048/a,s1/a);var o=0,s=0,l=0,c=n.length;for(--r;++r<c;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font;var u=i.measureText(t.text+"m").width*a,h=t.size<<1;if(t.rotate){var p=Math.sin(t.rotate*o1),d=Math.cos(t.rotate*o1),f=u*d,m=u*p,g=h*d,y=h*p;u=Math.max(Math.abs(f+y),Math.abs(f-y))+31>>5<<5,h=~~Math.max(Math.abs(m+g),Math.abs(m-g))}else u=u+31>>5<<5;if(h>l&&(l=h),o+u>=2048&&(o=0,s+=l,l=0),s+h>=s1)break;i.translate((o+(u>>1))/a,(s+(h>>1))/a),t.rotate&&i.rotate(t.rotate*o1),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=h,t.xoff=o,t.yoff=s,t.x1=u>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=u}for(var v=i.getImageData(0,0,2048/a,s1/a).data,E=[];--r>=0;)if((t=n[r]).hasText){for(var x=(u=t.width)>>5,b=(h=t.y1-t.y0,0);b<h*x;b++)E[b]=0;if(null==(o=t.xoff))return;s=t.yoff;for(var C=0,S=-1,w=0;w<h;w++){for(b=0;b<u;b++){var T=x*w+(b>>5),k=v[2048*(s+w)+(o+b)<<2]?1<<31-b%32:0;E[T]|=k,C|=k}C?S=w:(t.y0++,h--,w--,s++)}t.y1=t.y0+S,t.sprite=E.slice(0,(t.y1-t.y0)*x)}}}function m1(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,l=32-s,c=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),h=0;h<c;h++){r=0;for(var p=0;p<=a;p++)if((r<<l|(p<a?(r=i[h*a+p])>>>s:0))&t[u+p])return!0;u+=n}return!1}function g1(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function y1(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function v1(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function E1(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function x1(){return document.createElement("canvas")}function b1(e){return oM(e)?e:function(){return e}}var C1={archimedean:v1,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};function S1(e){var t=e.options,n=e.chart,r=n,i=r.width,a=r.height,o=r.padding,s=r.appendPadding,l=r.ele,c=t.data,u=t.imageMask,h=t.wordField,p=t.weightField,d=t.colorField,f=t.wordStyle,m=t.timeInterval,g=t.random,y=t.spiral,v=t.autoFit,E=void 0===v||v,x=t.placementStrategy;if(!c||!c.length)return[];var b,C=f.fontFamily,S=f.fontWeight,w=f.padding,T=f.fontSize,k=function(e,t){return e.map((function(e){return e[t]})).filter((function(e){return"number"==typeof e&&!isNaN(e)}))}(c,p),_=[(b=k,Math.min.apply(Math,b)),_1(k)],O=c.map((function(e){return{text:e[h],value:e[p],color:e[d],datum:e}})),A={imageMask:u,font:C,fontSize:T1(T,_),fontWeight:S,size:w1({width:i,height:a,padding:o,appendPadding:s,autoFit:E,container:l}),padding:w,timeInterval:m,random:g,spiral:y,rotate:k1(t)};if(oM(x)){var I=O.map((function(e,t,r){return QI(QI(QI({},e),{hasText:!!e.text,font:b1(A.font)(e,t,r),weight:b1(A.fontWeight)(e,t,r),rotate:b1(A.rotate)(e,t,r),size:b1(A.fontSize)(e,t,r),style:"normal"}),x.call(n,e,t,r))}));return I.push({text:"",value:0,x:0,y:0,opacity:0}),I.push({text:"",value:0,x:A.size[0],y:A.size[1],opacity:0}),I}return a1(O,A)}function w1(e){var t=e.width,n=e.height,r=e.container,i=e.autoFit,a=e.padding,o=e.appendPadding;if(i){var s=rQ(r);t=s.width,n=s.height}t=t||400,n=n||400;var l=function(e){var t=AQ(e.padding),n=AQ(e.appendPadding),r=t[0]+n[0],i=t[1]+n[1],a=t[2]+n[2],o=t[3]+n[3];return[r,i,a,o]}({padding:a,appendPadding:o}),c=l[0],u=l[1],h=l[2];return[t-(l[3]+u),n-(c+h)]}function T1(e,t){if(oM(e))return e;if(lM(e)){var n=e[0],r=e[1];if(!t)return function(){return(r+n)/2};var i=t[0],a=t[1];return a===i?function(){return(r+n)/2}:function(e){var t=e.value;return(r-n)/(a-i)*(t-i)+n}}return function(){return e}}function k1(e){var t=function(e){var t=e.wordStyle.rotationSteps;t<1&&(nQ(qK.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),t=1);return{rotation:e.wordStyle.rotation,rotationSteps:t}}(e),n=t.rotation,r=t.rotationSteps;if(!lM(n))return n;var i=n[0],a=n[1],o=1===r?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function _1(e){return Math.max.apply(Math,e)}var O1=vQ({},nZ.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(e){return{name:e.text,value:e.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}});function A1(e){var t=e.chart,n=e.options,r=n.colorField,i=n.color,a=S1(e);return t.data(a),LZ(vQ({},e,{options:{xField:"x",yField:"y",seriesField:r&&"color",rawFields:oM(i)&&JI(fN(n,"rawFields",[]),["datum"]),point:{color:i,shape:"word-cloud"}}})).ext.geometry.label(!1),t.coordinate().reflect("y"),t.axis(!1),e}function I1(e){return ZK(kZ({x:{nice:!1},y:{nice:!1}}))(e)}function M1(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField;return!1===r?t.legend(!1):i&&t.legend("color",r),e}function N1(e){ZK(A1,I1,EZ,M1,xZ,bZ,CZ,SZ)(e)}function P1(e){return{fontSize:e.data.size,text:e.data.text,textAlign:"center",fontFamily:e.data.font,fontWeight:e.data.weight,fill:e.color||e.defaultStyle.stroke,textBaseline:"alphabetic"}}function F1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function L1(e,t,n,r){e=e.filter((function(e,r){var i=t(e,r),a=n(e,r);return null!=i&&isFinite(i)&&null!=a&&isFinite(a)})),r&&e.sort((function(e,n){return t(e)-t(n)}));for(var i,a,o,s=e.length,l=new Float64Array(s),c=new Float64Array(s),u=0,h=0,p=0;p<s;)o=e[p],l[p]=i=+t(o,p,e),c[p]=a=+n(o,p,e),u+=(i-u)/++p,h+=(a-h)/p;for(var d=0;d<s;++d)l[d]-=u,c[d]-=h;return[l,c,u,h]}function R1(e,t,n,r){for(var i=0,a=0,o=e.length;a<o;a++){var s=e[a],l=+t(s,a,e),c=+n(s,a,e);null!=l&&isFinite(l)&&null!=c&&isFinite(c)&&r(l,c,i++)}}function D1(e,t,n,r,i){var a=0,o=0;return R1(e,t,n,(function(e,t){var n=t-i(e),s=t-r;a+=n*n,o+=s*s})),1-a/o}function B1(e){return 180*Math.atan2(e[1][1]-e[0][1],e[1][0]-e[0][0])/Math.PI}function $1(e,t,n){for(var r=Math.log(t-e)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),a=[s(e),s(t)],o=0;l(a)&&o<1e4;);return a;function s(e){return[e,n(e)]}function l(e){o++;for(var t,n=e.length,r=!1,a=0;a<n-1;a++){var l=e[a],c=e[a+1],u=[((t=[l,c])[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2],h=s(u[0]),p=B1([l,u]),d=B1([l,h]);Math.abs(p-d)>i&&(e.splice(a+1,0,h),r=!0)}return r}}function z1(e,t,n,r){var i=r-e*e,a=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-a*e,a]}function H1(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=e?+e[0]:1/0,u=e?+e[1]:-1/0;R1(r,t,n,(function(t,n){++i,a+=(t-a)/i,o+=(n-o)/i,s+=(t*n-s)/i,l+=(t*t-l)/i,e||(t<c&&(c=t),t>u&&(u=t))}));var h=F1(z1(a,o,s,l),2),p=h[0],d=h[1],f=function(e){return d*e+p},m=[[c,f(c)],[u,f(u)]];return m.a=d,m.b=p,m.predict=f,m.rSquared=D1(r,t,n,o,f),m}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r}function j1(e){e.sort((function(e,t){return e-t}));var t=e.length/2;return t%1==0?(e[t-1]+e[t])/2:e[Math.floor(t)]}bY("point","word-cloud",{draw:function(e,t){var n=e.x,r=e.y,i=t.addShape("text",{attrs:QI(QI({},P1(e)),{x:n,y:r})}),a=e.data.rotate;return"number"==typeof a&&nU.rotate(i,a*Math.PI/180),i}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="word-cloud",t}KI(t,e),t.getDefaultOptions=function(){return O1},t.prototype.changeData=function(e){this.updateOption({data:e}),this.options.imageMask?this.render():this.chart.changeData(S1({chart:this.chart,options:this.options}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){var t=this;return new Promise((function(n){var r=t.options.imageMask;if(!r)return e.prototype.render.call(t),void n();var i,a=function(r){t.options=QI(QI({},t.options),{imageMask:r||null}),e.prototype.render.call(t),n()};(i=r,new Promise((function(e,t){if(i instanceof HTMLImageElement)e(i);else{if(wM(i)){var n=new Image;return n.crossOrigin="anonymous",n.src=i,n.onload=function(){e(n)},void(n.onerror=function(){nQ(qK.ERROR,!1,"image %s load failed !!!",i),t()})}nQ(qK.WARN,void 0===i,"The type of imageMask option must be String or HTMLImageElement."),t()}}))).then(a).catch(a)}))},t.prototype.getSchemaAdaptor=function(){return N1},t.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout((function(){e.prototype.triggerResize.call(t)})))}}(nZ);function G1(e){return(e=1-e*e*e)*e*e}function V1(e,t,n){var r=e[t],i=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>i&&e[a]-r<=r-e[i];)n[0]=++i,n[1]=a,++a}function Y1(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i,a,o,s,l=F1(L1(r,t,n),4),c=l[0],u=l[1],h=l[2],p=l[3],d=c.length,f=0,m=0,g=0,y=0,v=0;for(i=0;i<d;)a=c[i],o=u[i++],f+=((s=a*a)-f)/i,m+=(s*a-m)/i,g+=(s*s-g)/i,y+=(a*o-y)/i,v+=(s*o-v)/i;var E=0,x=0,b=e?+e[0]:1/0,C=e?+e[1]:-1/0;R1(r,t,n,(function(t,n){x++,E+=(n-E)/x,e||(t<b&&(b=t),t>C&&(C=t))}));var S=g-f*f,w=f*S-m*m,T=(v*f-y*m)/w,k=(y*S-v*m)/w,_=-T*f,O=function(e){return T*(e-=h)*e+k*e+_+p},A=$1(b,C,O);return A.a=T,A.b=k-2*T*h,A.c=_-k*h+T*h*h+p,A.predict=O,A.rSquared=D1(r,t,n,E,O),A}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r}var U1={exp:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0;R1(r,t,n,(function(t,n){var r=Math.log(n),p=t*n;++i,a+=(n-a)/i,s+=(p-s)/i,c+=(t*p-c)/i,o+=(n*r-o)/i,l+=(p*r-l)/i,e||(t<u&&(u=t),t>h&&(h=t))}));var p=F1(z1(s/a,o/a,l/a,c/a),2),d=p[0],f=p[1];d=Math.exp(d);var m=function(e){return d*Math.exp(f*e)},g=$1(u,h,m);return g.a=d,g.b=f,g.predict=m,g.rSquared=D1(r,t,n,a,m),g}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},linear:H1,loess:function(){var e=function(e){return e[0]},t=function(e){return e[1]},n=.3;function r(r){for(var i=F1(L1(r,e,t,!0),4),a=i[0],o=i[1],s=i[2],l=i[3],c=a.length,u=Math.max(2,~~(n*c)),h=new Float64Array(c),p=new Float64Array(c),d=new Float64Array(c).fill(1),f=-1;++f<=2;){for(var m=[0,u-1],g=0;g<c;++g){for(var y=a[g],v=m[0],E=m[1],x=y-a[v]>a[E]-y?v:E,b=0,C=0,S=0,w=0,T=0,k=1/Math.abs(a[x]-y||1),_=v;_<=E;++_){var O=a[_],A=o[_],I=G1(Math.abs(y-O)*k)*d[_],M=O*I;b+=I,C+=M,S+=A*I,w+=A*M,T+=O*M}var N=F1(z1(C/b,S/b,w/b,T/b),2),P=N[0],F=N[1];h[g]=P+F*y,p[g]=Math.abs(o[g]-h[g]),V1(a,g+1,m)}if(2===f)break;var L=j1(p);if(Math.abs(L)<1e-12)break;for(var R,D,B=0;B<c;++B)R=p[B]/(6*L),d[B]=R>=1?1e-12:(D=1-R*R)*D}return function(e,t,n,r){for(var i,a=e.length,o=[],s=0,l=0,c=[];s<a;++s)i=e[s]+n,c[0]===i?c[1]+=(t[s]-c[1])/++l:(l=0,c[1]+=r,c=[i,t[s]],o.push(c));return c[1]+=r,o}(a,h,s,l)}return r.bandwidth=function(e){return arguments.length?(n=e,r):n},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(e){return arguments.length?(t=e,r):t},r},log:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]},r=Math.E;function i(i){var a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0,p=Math.log(r);R1(i,t,n,(function(t,n){var r=Math.log(t)/p;++a,o+=(r-o)/a,s+=(n-s)/a,l+=(r*n-l)/a,c+=(r*r-c)/a,e||(t<u&&(u=t),t>h&&(h=t))}));var d=F1(z1(o,s,l,c),2),f=d[0],m=d[1],g=function(e){return m*Math.log(e)/p+f},y=$1(u,h,g);return y.a=m,y.b=f,y.predict=g,y.rSquared=D1(i,t,n,s,g),y}return i.domain=function(t){return arguments.length?(e=t,i):e},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.base=function(e){return arguments.length?(r=e,i):r},i},poly:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]},r=3;function i(i){if(1===r){var a=H1().x(t).y(n).domain(e)(i);return a.coefficients=[a.b,a.a],delete a.a,delete a.b,a}if(2===r){var o=Y1().x(t).y(n).domain(e)(i);return o.coefficients=[o.c,o.b,o.a],delete o.a,delete o.b,delete o.c,o}var s,l,c,u,h,p=F1(L1(i,t,n),4),d=p[0],f=p[1],m=p[2],g=p[3],y=d.length,v=[],E=[],x=r+1,b=0,C=0,S=e?+e[0]:1/0,w=e?+e[1]:-1/0;for(R1(i,t,n,(function(t,n){++C,b+=(n-b)/C,e||(t<S&&(S=t),t>w&&(w=t))})),s=0;s<x;++s){for(c=0,u=0;c<y;++c)u+=Math.pow(d[c],s)*f[c];for(v.push(u),h=new Float64Array(x),l=0;l<x;++l){for(c=0,u=0;c<y;++c)u+=Math.pow(d[c],s+l);h[l]=u}E.push(h)}E.push(v);var T=function(e){var t,n,r,i,a,o=e.length-1,s=[];for(t=0;t<o;++t){for(i=t,n=t+1;n<o;++n)Math.abs(e[t][n])>Math.abs(e[t][i])&&(i=n);for(r=t;r<o+1;++r)a=e[r][t],e[r][t]=e[r][i],e[r][i]=a;for(n=t+1;n<o;++n)for(r=o;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=o-1;n>=0;--n){for(a=0,r=n+1;r<o;++r)a+=e[r][n]*s[r];s[n]=(e[o][n]-a)/e[n][n]}return s}(E),k=function(e){e-=m;var t=g+T[0]+T[1]*e+T[2]*e*e;for(s=3;s<x;++s)t+=T[s]*Math.pow(e,s);return t},_=$1(S,w,k);return _.coefficients=function(e,t,n,r){var i,a,o,s,l=Array(e);for(i=0;i<e;++i)l[i]=0;for(i=e-1;i>=0;--i)for(o=t[i],s=1,l[i]+=o,a=1;a<=i;++a)s*=(i+1-a)/a,l[i-a]+=o*Math.pow(n,a)*s;return l[0]+=r,l}(x,T,-m,g),_.predict=k,_.rSquared=D1(i,t,n,b,k),_}return i.domain=function(t){return arguments.length?(e=t,i):e},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.order=function(e){return arguments.length?(r=e,i):r},i},pow:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0;R1(r,t,n,(function(t,n){var r=Math.log(t),p=Math.log(n);++i,a+=(r-a)/i,o+=(p-o)/i,s+=(r*p-s)/i,l+=(r*r-l)/i,c+=(n-c)/i,e||(t<u&&(u=t),t>h&&(h=t))}));var p=F1(z1(a,o,s,l),2),d=p[0],f=p[1];d=Math.exp(d);var m=function(e){return d*Math.pow(e,f)},g=$1(u,h,m);return g.a=d,g.b=f,g.predict=m,g.rSquared=D1(r,t,n,c,m),g}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},quad:Y1};var q1=function(e,t){var n=t.view,r=t.options,i=r.xField,a=r.yField,o=n.getScaleByField(i),s=n.getScaleByField(a);return function(e,t,n){var r=[],i=e[0],a=null;if(e.length<=2)return function(e,t){var n=[];if(e.length){n.push(["M",e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var a=e[r];n.push(["L",a.x,a.y])}t&&n.push(["Z"])}return n}(e,t);for(var o=0,s=e.length;o<s;o++){var l=e[o];a&&a.x===l.x&&a.y===l.y||(r.push(l.x),r.push(l.y),a=l)}var c=pQ(r,t,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}(e.map((function(e){return n.getCoordinate().convert({x:o.scale(e[0]),y:s.scale(e[1])})})),!1)};function W1(e){var t=e.data,n=void 0===t?[]:t,r=e.xField,i=e.yField;if(n.length){for(var a=!0,o=!0,s=n[0],l=void 0,c=1;c<n.length&&(l=n[c],s[r]!==l[r]&&(a=!1),s[i]!==l[i]&&(o=!1),a||o);c++)s=l;var u=[];a&&u.push(r),o&&u.push(i);var h=JK(function(e){var t,n=e.meta,r=void 0===n?{}:n,i=e.xField,a=e.yField,o=e.data,s=o[0][i],l=o[0][a],c=s>0,u=l>0;function h(e,t){var n=fN(r,[e]);function i(e){return fN(n,e)}var a={};return"x"===t?(RM(s)&&(RM(i("min"))||(a.min=c?0:2*s),RM(i("max"))||(a.max=c?2*s:0)),a):(RM(l)&&(RM(i("min"))||(a.min=u?0:2*l),RM(i("max"))||(a.max=u?2*l:0)),a)}return QI(QI({},r),((t={})[i]=QI(QI({},r[i]),h(i,"x")),t[a]=QI(QI({},r[a]),h(a,"y")),t))}(e),u);return vQ({},e,{meta:h})}return e}function X1(e){var t=e.chart,n=e.options,r=n.data,i=n.type,a=n.color,o=n.shape,s=n.pointStyle,l=n.shapeField,c=n.colorField,u=n.xField,h=n.yField,p=n.sizeField,d=n.size,f=n.tooltip;p&&(d||(d=[2,8]),RM(d)&&(d=[d,d])),f&&!f.fields&&(f=QI(QI({},f),{fields:[u,h,c,p,l]})),t.data(r),LZ(vQ({},e,{options:{seriesField:c,point:{color:a,shape:o,size:d,style:s},tooltip:f}}));var m=iQ(t,"point");return i&&m.adjust(i),e}function K1(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=W1(n);return ZK(kZ(((t={})[a]=r,t[o]=i,t)))(vQ({},e,{options:s}))}function Q1(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return t.axis(a,r),t.axis(o,i),e}function Z1(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.shapeField,o=n.sizeField,s=n.shapeLegend,l=n.sizeLegend,c=!1!==r;return i&&t.legend(i,!!c&&r),a&&(s?t.legend(a,s):t.legend(a,!1!==s&&r)),o&&t.legend(o,l||!1),c||s||l||t.legend(!1),e}function J1(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=iQ(t,"point");if(r){var o=r.callback,s=ZI(r,["callback"]);a.label({fields:[i],callback:o,cfg:hQ(s)})}else a.label(!1);return e}function e0(e){var t=e.options.quadrant,n=[];if(t){var r=t.xBaseline,i=void 0===r?0:r,a=t.yBaseline,o=void 0===a?0:a,s=t.labels,l=t.regionStyle,c=t.lineStyle,u=function(e,t){var n=10;return{regionStyle:[{position:{start:[e,"max"],end:["max",t]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[e,t]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",t],end:[e,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[e,t],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",t],offsetX:-10,offsetY:-10,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:n,offsetY:-10,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",t],offsetX:-10,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]}}(i,o);new Array(4).join(",").split(",").forEach((function(e,t){n.push(QI(QI({type:"region",top:!1},u.regionStyle[t].position),{style:vQ({},u.regionStyle[t].style,null==l?void 0:l[t])}),QI({type:"text",top:!0},vQ({},u.labelStyle[t],null==s?void 0:s[t])))})),n.push({type:"line",top:!1,start:["min",o],end:["max",o],style:vQ({},u.lineStyle,c)},{type:"line",top:!1,start:[i,"min"],end:[i,"max"],style:vQ({},u.lineStyle,c)})}return ZK(_Z(n))(e)}function t0(e){var t=e.options,n=e.chart,r=t.regressionLine;if(r){var i=r.style,a=r.top,o=void 0!==a&&a,s={stroke:"#9ba29a",lineWidth:2,opacity:.5};n.annotation().shape({top:o,render:function(e,r){var a=e.addGroup({id:n.id+"-regression-line",name:"regression-line-group"}),o=function(e){var t,n=e.options,r=n.xField,i=n.yField,a=n.data,o=n.regressionLine,s=o.type,l=void 0===s?"linear":s,c=o.algorithm;return t=c?lM(c)?c:c(a):U1[l]().x((function(e){return e[r]})).y((function(e){return e[i]}))(a),q1(t,e)}({view:r,options:t});a.addShape("path",{name:"regression-line",attrs:QI(QI({path:o},s),i)})}})}return e}function n0(e){var t=e.chart,n=e.options.tooltip;return n?t.tooltip(n):!1===n&&t.tooltip(!1),e}function r0(e){return ZK(X1,K1,Q1,Z1,n0,J1,fJ,xZ,e0,bZ,CZ,t0)(e)}var i0=vQ({},nZ.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});yV("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var a0,o0,s0,l0,c0=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="scatter",r.on(NN.BEFORE_RENDER,(function(e){var t,n,i=r,a=i.options,o=i.chart;if((null===(t=e.data)||void 0===t?void 0:t.source)===OK.FILTER){var s=r.chart.filterData(r.chart.getData());K1({chart:o,options:QI(QI({},a),{data:s})})}(null===(n=e.data)||void 0===n?void 0:n.source)===OK.RESET&&K1({chart:o,options:a})})),r}return KI(t,e),t.getDefaultOptions=function(){return i0},t.prototype.changeData=function(e){this.updateOption(W1(vQ({},this.options,{data:e})));var t=this.options;K1({chart:this.chart,options:t}),this.chart.changeData(e)},t.prototype.getSchemaAdaptor=function(){return r0},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t}(nZ);function u0(e){var t=e.chart,n=e.options,r=n.data,i=n.lineStyle,a=n.color,o=n.point,s=n.area;t.data(r);var l=vQ({},e,{options:{line:{style:i,color:a},point:o?QI({color:a},o):o,area:s?QI({color:a},s):s,label:void 0}}),c=vQ({},l,{options:{tooltip:!1}}),u=(null==o?void 0:o.state)||n.state,h=vQ({},l,{options:{tooltip:!1,state:u}});return FZ(l),LZ(h),PZ(c),e}function h0(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ZK(kZ(((t={})[a]=r,t[o]=i,t)))(e)}function p0(e){var t=e.chart,n=e.options,r=n.radius,i=n.startAngle,a=n.endAngle;return t.coordinate("polar",{radius:r,startAngle:i,endAngle:a}),e}function d0(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis,a=n.yField,o=n.yAxis;return t.axis(r,i),t.axis(a,o),e}function f0(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=iQ(t,"line");if(r){var o=r.callback,s=ZI(r,["callback"]);a.label({fields:[i],callback:o,cfg:hQ(s)})}else a.label(!1);return e}function m0(e){return ZK(u0,h0,CZ,p0,d0,vZ,EZ,f0,xZ,bZ,_Z())(e)}YV("radar-tooltip",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),t.prototype.getTooltipItems=function(t){var n=this.getTooltipCfg(),r=n.shared,i=n.title,a=e.prototype.getTooltipItems.call(this,t);if(a.length>0){var o=this.view.geometries[0],s=o.dataArray,l=a[0].name,c=[];return s.forEach((function(e){e.forEach((function(e){var t=nU.getTooltipItems(e,o)[0];if(!r&&t&&t.name===l){var n=sM(i)?l:i;c.push(QI(QI({},t),{name:t.title,title:n}))}else if(r&&t){n=sM(i)?t.name||l:i;c.push(QI(QI({},t),{name:t.title,title:n}))}}))})),c}return[]},t}(rY)),MG("radar-tooltip",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.init=function(){this.context.view.removeInteraction("tooltip")},t.prototype.show=function(){var e=this.context.event;this.getTooltipController().showTooltip({x:e.x,y:e.y})},t.prototype.hide=function(){this.getTooltipController().hideTooltip()},t.prototype.getTooltipController=function(){return this.context.view.getController("radar-tooltip")},t}(_G)),yV("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="radar",t}KI(t,e),t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return vQ({},e.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},t.prototype.getSchemaAdaptor=function(){return m0}}(nZ),(o0=a0||(a0={})).Left="Left",o0.Right="Right",(l0=s0||(s0={})).Line="line",l0.Column="column";var g0={nice:!0,label:{autoHide:!0,autoRotate:!1}},y0=QI(QI({},g0),{position:"left"}),v0=QI(QI({},g0),{position:"right",grid:null});function E0(e){return fN(e,"geometry")===s0.Line}function x0(e){return fN(e,"geometry")===s0.Column}function b0(e,t,n){return x0(n)?vQ({},{geometry:s0.Column,label:n.label&&n.isRange?{content:function(e){var n;return null===(n=e[t])||void 0===n?void 0:n.join("-")}}:void 0},n):QI({geometry:s0.Line},n)}function C0(e,t){var n=e[0],r=e[1];return lM(t)?[t[0],t[1]]:[fN(t,n),fN(t,r)]}function S0(e,t){return t===a0.Left?!1!==e&&vQ({},y0,e):t===a0.Right?!1!==e&&vQ({},v0,e):e}function w0(e){var t=e.view,n=e.geometryOption,r=e.yField,i=e.legend,a=fN(i,"marker"),o=iQ(t,E0(n)?"line":"interval");if(!n.seriesField){var s=fN(t,"options.scales."+r+".alias")||r,l=o.getAttribute("color"),c=t.getTheme().defaultColor;return l&&(c=nU.getMappingValue(l,s,fN(l,["values",0],c))),[{value:r,name:s,marker:(oM(a)?a:!cN(a)&&vQ({},{style:{stroke:c,fill:c}},a))||(E0(n)?{symbol:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},style:{lineWidth:2,r:6,stroke:c}}:{symbol:"square",style:{fill:c}}),isGeometry:!0,viewId:t.id}]}var u=o.getGroupAttributes();return CM(u,(function(e,n){var r=nU.getLegendItems(t,o,n,t.getTheme(),a);return e.concat(r)}),[])}var T0=function(e,t){var n=t[0],r=t[1],i=e.getOptions().data,a=e.getXScale(),o=SN(i);if(a&&o){var s=kM(i,a.field),l=SN(s),c=Math.floor(n*(l-1)),u=Math.floor(r*(l-1));e.filter(a.field,(function(e){var t=s.indexOf(e);return!(t>-1)||function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}(t,c,u)})),e.render(!0)}};function k0(e){var t,n=e.options,r=n.geometryOptions,i=void 0===r?[]:r,a=n.xField,o=n.yField,s=AM(i,(function(e){var t=e.geometry;return t===s0.Line||void 0===t}));return vQ({},{options:{geometryOptions:[],meta:(t={},t[a]={type:"cat",sync:!0,range:s?[0,1]:void 0},t),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},e,{options:{yAxis:C0(o,n.yAxis),geometryOptions:[b0(0,o[0],i[0]),b0(0,o[1],i[1])],annotations:C0(o,n.annotations)}})}function _0(e){var t,n,r=e.chart,i=e.options.geometryOptions,a={line:0,column:1};return[{type:null===(t=i[0])||void 0===t?void 0:t.geometry,id:"left-axes-view"},{type:null===(n=i[1])||void 0===n?void 0:n.geometry,id:"right-axes-view"}].sort((function(e,t){return-a[e.type]+a[t.type]})).forEach((function(e){return r.createView({id:e.id})})),e}function O0(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.geometryOptions,o=n.data,s=n.tooltip;return[QI(QI({},a[0]),{id:"left-axes-view",data:o[0],yField:i[0]}),QI(QI({},a[1]),{id:"right-axes-view",data:o[1],yField:i[1]})].forEach((function(e){var n=e.id,i=e.data,a=e.yField,o=x0(e)&&e.isPercent,l=o?KZ(i,a,r,a):i,c=lQ(t,n).data(l),u=o?QI({formatter:function(t){return{name:t[e.seriesField]||a,value:(100*Number(t[a])).toFixed(2)+"%"}}},s):s;!function(e){var t=e.options,n=e.chart,r=t.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,s=r.groupField,l=r.isGroup,c=["xField","yField"];if(E0(r)){FZ(vQ({},e,{options:QI(QI(QI({},JK(t,c)),r),{line:{color:r.color,style:r.lineStyle}})})),LZ(vQ({},e,{options:QI(QI(QI({},JK(t,c)),r),{point:r.point&&QI({color:a,shape:"circle"},r.point)})}));var u=[];l&&u.push({type:"dodge",dodgeBy:s||o,customOffset:0}),i&&u.push({type:"stack"}),u.length&&uM(n.geometries,(function(e){e.adjust(u)}))}x0(r)&&CJ(vQ({},e,{options:QI(QI(QI({},JK(t,c)),r),{widthRatio:r.columnWidthRatio,interval:QI(QI({},JK(r,["color"])),{style:r.columnStyle})})}))}({chart:c,options:{xField:r,yField:a,tooltip:u,geometryOption:e}})})),e}function A0(e){var t,n=e.chart,r=e.options.geometryOptions,i=(null===(t=n.getTheme())||void 0===t?void 0:t.colors10)||[],a=0;return n.once("beforepaint",(function(){uM(r,(function(e,t){var r=lQ(n,0===t?"left-axes-view":"right-axes-view");if(!e.color){var o=r.getGroupScales(),s=fN(o,[0,"values","length"],1),l=i.slice(a,a+s).concat(0===t?[]:i);r.geometries.forEach((function(t){e.seriesField?t.color(e.seriesField,l):t.color(l[0])})),a+=s}})),n.render(!0)})),e}function I0(e){var t,n,r=e.chart,i=e.options,a=i.xAxis,o=i.yAxis,s=i.xField,l=i.yField;return kZ(((t={})[s]=a,t[l[0]]=o[0],t))(vQ({},e,{chart:lQ(r,"left-axes-view")})),kZ(((n={})[s]=a,n[l[1]]=o[1],n))(vQ({},e,{chart:lQ(r,"right-axes-view")})),e}function M0(e){var t=e.chart,n=e.options,r=lQ(t,"left-axes-view"),i=lQ(t,"right-axes-view"),a=n.xField,o=n.yField,s=n.xAxis,l=n.yAxis;return t.axis(a,!1),t.axis(o[0],!1),t.axis(o[1],!1),r.axis(a,s),r.axis(o[0],S0(l[0],a0.Left)),i.axis(a,!1),i.axis(o[1],S0(l[1],a0.Right)),e}function N0(e){var t=e.chart,n=e.options.tooltip,r=lQ(t,"left-axes-view"),i=lQ(t,"right-axes-view");return t.tooltip(n),r.tooltip({shared:!0}),i.tooltip({shared:!0}),e}function P0(e){var t=e.chart;return xZ(vQ({},e,{chart:lQ(t,"left-axes-view")})),xZ(vQ({},e,{chart:lQ(t,"right-axes-view")})),e}function F0(e){var t=e.chart,n=e.options.annotations,r=fN(n,[0]),i=fN(n,[1]);return _Z(r)(vQ({},e,{chart:lQ(t,"left-axes-view"),options:{annotations:r}})),_Z(i)(vQ({},e,{chart:lQ(t,"right-axes-view"),options:{annotations:i}})),e}function L0(e){var t=e.chart;return CZ(vQ({},e,{chart:lQ(t,"left-axes-view")})),CZ(vQ({},e,{chart:lQ(t,"right-axes-view")})),CZ(e),e}function R0(e){var t=e.chart;return bZ(vQ({},e,{chart:lQ(t,"left-axes-view")})),bZ(vQ({},e,{chart:lQ(t,"right-axes-view")})),e}function D0(e){var t=e.chart,n=e.options.yAxis;return OZ(vQ({},e,{chart:lQ(t,"left-axes-view"),options:{yAxis:n[0]}})),OZ(vQ({},e,{chart:lQ(t,"right-axes-view"),options:{yAxis:n[1]}})),e}function B0(e){var t=e.chart,n=e.options,r=n.legend,i=n.geometryOptions,a=n.yField,o=n.data,s=lQ(t,"left-axes-view"),l=lQ(t,"right-axes-view");if(!1===r)t.legend(!1);else if(cM(r)&&!0===r.custom)t.legend(r);else{var c=fN(i,[0,"legend"],r),u=fN(i,[1,"legend"],r);t.once("beforepaint",(function(){var e=o[0].length?w0({view:s,geometryOption:i[0],yField:a[0],legend:c}):[],n=o[1].length?w0({view:l,geometryOption:i[1],yField:a[1],legend:u}):[];t.legend(vQ({},r,{custom:!0,items:e.concat(n)}))})),i[0].seriesField&&s.legend(i[0].seriesField,c),i[1].seriesField&&l.legend(i[1].seriesField,u),t.on("legend-item:click",(function(e){var n=fN(e,"gEvent.delegateObject",{});if(n&&n.item){var r=n.item,i=r.value,o=r.isGeometry,s=r.viewId;if(o){if(gM(a,(function(e){return e===i}))>-1)uM(fN(lQ(t,s),"geometries"),(function(e){e.changeVisible(!n.item.unchecked)}))}else{var l=fN(t.getController("legend"),"option.items",[]);uM(t.views,(function(e){uM(e.getGroupScales(),(function(t){t.values&&t.values.indexOf(i)>-1&&e.filter(t.field,(function(e){return!mM(l,(function(t){return t.value===e})).unchecked}))})),t.render(!0)}))}}}))}return e}function $0(e){var t=e.chart,n=e.options.slider,r=lQ(t,"left-axes-view"),i=lQ(t,"right-axes-view");return n&&(r.option("slider",n),r.on("slider:valuechanged",(function(e){var t=e.event,n=t.value,r=t.originValue;hN(n,r)||T0(i,n)})),t.once("afterpaint",(function(){if(!XM(n)){var e=n.start,t=n.end;(e||t)&&T0(i,[e,t])}}))),e}function z0(e){return ZK(k0,_0,L0,O0,I0,M0,D0,N0,P0,F0,R0,A0,B0,$0)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dual-axes",t}KI(t,e),t.prototype.getDefaultOptions=function(){return vQ({},e.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},t.prototype.getSchemaAdaptor=function(){return z0}}(nZ);var H0={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return""+fN(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},j0={appendPadding:2,tooltip:QI({},H0),animation:{}};function G0(e){return pN(e||[],(function(e,t){return{x:""+t,y:e}}))}function V0(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.areaStyle,o=n.point,s=n.line,l=null==o?void 0:o.state,c=G0(r);t.data(c);var u=vQ({},e,{options:{xField:"x",yField:"y",area:{color:i,style:a},line:s,point:o}}),h=vQ({},u,{options:{tooltip:!1}}),p=vQ({},u,{options:{tooltip:!1,state:l}});return PZ(u),FZ(h),LZ(p),t.axis(!1),t.legend(!1),e}function Y0(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=G0(r.data);return ZK(kZ(((t={}).x=i,t.y=a,t),((n={}).x={type:"cat"},n.y=kQ(o,"y"),n)))(e)}function U0(e){return ZK(yZ("areaStyle"),V0,Y0,EZ,CZ,bZ,_Z())(e)}function q0(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.lineStyle,o=n.point,s=null==o?void 0:o.state,l=G0(r);t.data(l);var c=vQ({},e,{options:{xField:"x",yField:"y",line:{color:i,style:a},point:o}}),u=vQ({},c,{options:{tooltip:!1,state:s}});return FZ(c),LZ(u),t.axis(!1),t.legend(!1),e}function W0(e){return ZK(q0,Y0,CZ,EZ,bZ,_Z())(e)}var X0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-line",t}return KI(t,e),t.getDefaultOptions=function(){return j0},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;Y0({chart:t,options:this.options}),t.changeData(G0(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return W0},t}(nZ);function K0(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.columnStyle,o=n.columnWidthRatio,s=G0(r);return t.data(s),RZ(vQ({},e,{options:{xField:"x",yField:"y",widthRatio:o,interval:{style:a,color:i}}})),t.axis(!1),t.legend(!1),t.interaction("element-active"),e}function Q0(e){return ZK(CZ,yZ("columnStyle"),K0,Y0,EZ,bZ,_Z())(e)}var Z0={appendPadding:2,tooltip:QI({},{showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return""+fN(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}}),animation:{}},J0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-column",t}return KI(t,e),t.getDefaultOptions=function(){return Z0},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;Y0({chart:t,options:this.options}),t.changeData(G0(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Q0},t}(nZ),e9={appendPadding:2,tooltip:QI({},H0),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},t9=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-area",t}return KI(t,e),t.getDefaultOptions=function(){return e9},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;Y0({chart:t,options:this.options}),t.changeData(G0(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return U0},t}(nZ);function n9(e,t,n){if(1===n)return[0,t];var r=Math.floor(e/t);return[t*r,t*(r+1)]}function r9(e,t,n,r,i){var a=nN(e);!function(e,t){var n;if(oM(t))n=function(e,n){return t(e)-t(n)};else{var r=[];wM(t)?r.push(t):lM(t)&&(r=t),n=function(e,t){for(var n=0;n<r.length;n+=1){var i=r[n];if(e[i]>t[i])return 1;if(e[i]<t[i])return-1}return 0}}e.sort(n)}(a,t);var o=kM(a,t),s=xM(o),l=s.max-s.min,c=n;if(!n&&r&&(c=r>1?l/(r-1):s.max),!n&&!r){var u=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}(o);c=l/u}var h={},p=NM(a,i);cN(p)?uM(a,(function(e){var n=n9(e[t],c,r),i=n[0]+"-"+n[1];jM(h,i)||(h[i]={range:n,count:0}),h[i].count+=1})):Object.keys(p).forEach((function(e){uM(p[e],(function(n){var a=n9(n[t],c,r),o=a[0]+"-"+a[1]+"-"+e;jM(h,o)||(h[o]={range:a,count:0},h[o][i]=e),h[o].count+=1}))}));var d=[];return uM(h,(function(e){d.push(e)})),d}var i9=vQ({},nZ.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function a9(e){var t=e.chart,n=e.options,r=n.data,i=n.binField,a=n.binNumber,o=n.binWidth,s=n.color,l=n.stackField,c=n.legend,u=n.columnStyle,h=r9(r,i,o,a,l);return t.data(h),RZ(vQ({},e,{options:{xField:"range",yField:"count",seriesField:l,isStack:!0,interval:{color:s,style:u}}})),c&&l&&t.legend(l,c),e}function o9(e){var t,n=e.options,r=n.xAxis,i=n.yAxis;return ZK(kZ(((t={}).range=r,t.count=i,t)))(e)}function s9(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis;return!1===r?t.axis("range",!1):t.axis("range",r),!1===i?t.axis("count",!1):t.axis("count",i),e}function l9(e){var t=e.chart,n=e.options.label,r=iQ(t,"interval");if(n){var i=n.callback,a=ZI(n,["callback"]);r.label({fields:["count"],callback:i,cfg:hQ(a)})}else r.label(!1);return e}function c9(e){return ZK(CZ,yZ("columnStyle"),a9,o9,s9,SZ,l9,EZ,xZ,bZ)(e)}var u9=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="histogram",t}return KI(t,e),t.getDefaultOptions=function(){return i9},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.binField,r=t.binNumber,i=t.binWidth,a=t.stackField;this.chart.changeData(r9(e,n,i,r,a))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return c9},t}(nZ),h9=["#FAAD14","#E8EDF3"],p9={percent:.2,color:h9,animation:{}};function d9(e){var t=FM(TQ(e)?e:0,0,1);return[{type:"current",percent:t},{type:"target",percent:1-t}]}function f9(e){var t=e.chart,n=e.options,r=n.percent,i=n.progressStyle,a=n.color,o=n.barWidthRatio;return t.data(d9(r)),RZ(vQ({},e,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:o,interval:{style:i,color:wM(a)?[a,h9[1]]:a},args:{zIndexReversed:!0}}})),t.tooltip(!1),t.axis(!1),t.legend(!1),e}function m9(e){return e.chart.coordinate("rect").transpose(),e}function g9(e){return ZK(f9,kZ({}),m9,bZ,CZ,_Z())(e)}var y9=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="process",t}return KI(t,e),t.getDefaultOptions=function(){return p9},t.prototype.changeData=function(e){this.updateOption({percent:e}),this.chart.changeData(d9(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return g9},t}(nZ);function v9(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius;return t.coordinate("theta",{innerRadius:r,radius:i}),e}function E9(e,t){var n=e.chart,r=e.options,i=r.innerRadius,a=r.statistic,o=r.percent,s=r.meta;if(n.getController("annotation").clear(!0),i&&a){var l=fN(s,["percent","formatter"])||function(e){return(100*e).toFixed(2)+"%"},c=a.content;c&&(c=vQ({},c,{content:sM(c.content)?l(o):c.content})),SQ(n,{statistic:QI(QI({},a),{content:c}),plotType:"ring-progress"},{percent:o})}return t&&n.render(!0),e}function x9(e){return ZK(f9,kZ({}),v9,E9,bZ,CZ,_Z())(e)}var b9={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},C9=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ring-process",t}return KI(t,e),t.getDefaultOptions=function(){return b9},t.prototype.changeData=function(e){this.chart.emit(NN.BEFORE_CHANGE_DATA,qV.fromData(this.chart,NN.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(d9(e)),E9({chart:this.chart,options:this.options},!0),this.chart.emit(NN.AFTER_CHANGE_DATA,qV.fromData(this.chart,NN.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return x9},t}(nZ);function S9(e){var t=e.chart,n=e.options,r=n.data,i=n.type,a=n.xField,o=n.yField,s=n.colorField,l=n.sizeField,c=n.sizeRatio,u=n.shape,h=n.color,p=n.tooltip,d=n.heatmapStyle;t.data(r);var f="polygon";"density"===i&&(f="heatmap");var m=AZ(p,[a,o,s]),g=m.fields,y=m.formatter,v=1;return(c||0===c)&&(u||l?c<0||c>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):v=c:console.warn("sizeRatio is not in effect: Must define shape or sizeField first")),NZ(vQ({},e,{options:{type:f,colorField:s,tooltipFields:g,shapeField:l||"",label:void 0,mapping:{tooltip:y,shape:u&&(l?function(e){var t=r.map((function(e){return e[l]})),n=Math.min.apply(Math,t),i=Math.max.apply(Math,t);return[u,(fN(e,l)-n)/(i-n),v]}:function(){return[u,1,v]}),color:h||s&&t.getTheme().sequenceColors.join("-"),style:d}}})),e}function w9(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ZK(kZ(((t={})[a]=r,t[o]=i,t)))(e)}function T9(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function k9(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.sizeField,o=n.sizeLegend,s=!1!==r;return i&&t.legend(i,!!s&&r),a&&t.legend(a,void 0===o?r:o),s||o||t.legend(!1),e}function _9(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,a=iQ(t,"density"===n.type?"heatmap":"polygon");if(r){if(i){var o=r.callback,s=ZI(r,["callback"]);a.label({fields:[i],callback:o,cfg:hQ(s)})}}else a.label(!1);return e}function O9(e){var t=e.chart,n=e.options,r=n.coordinate,i=n.reflect;return r&&t.coordinate({type:r.type||"rect",cfg:r.cfg}),i&&t.coordinate().reflect(i),e}function A9(e){return ZK(CZ,yZ("heatmapStyle"),w9,O9,S9,T9,k9,EZ,_9,_Z(),xZ,bZ,SZ)(e)}var I9,M9=vQ({},nZ.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});bY("polygon","circle",{draw:function(e,t){var n,r,i=e.x,a=e.y,o=this.parsePoints(e.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l)/2,u=Number(e.shape[1]),h=Number(e.shape[2]),p=c*Math.sqrt(h)*Math.sqrt(u),d=(null===(n=e.style)||void 0===n?void 0:n.fill)||e.color||(null===(r=e.defaultStyle)||void 0===r?void 0:r.fill);return t.addShape("circle",{attrs:QI(QI(QI({x:i,y:a,r:p},e.defaultStyle),e.style),{fill:d})})}}),bY("polygon","square",{draw:function(e,t){var n,r,i=e.x,a=e.y,o=this.parsePoints(e.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l),u=Number(e.shape[1]),h=Number(e.shape[2]),p=c*Math.sqrt(h)*Math.sqrt(u),d=(null===(n=e.style)||void 0===n?void 0:n.fill)||e.color||(null===(r=e.defaultStyle)||void 0===r?void 0:r.fill);return t.addShape("rect",{attrs:QI(QI(QI({x:i-p/2,y:a-p/2,width:p,height:p},e.defaultStyle),e.style),{fill:d})})}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t}KI(t,e),t.getDefaultOptions=function(){return M9},t.prototype.getSchemaAdaptor=function(){return A9},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(nZ);var N9=vQ({},nZ.getDefaultOptions(),{meta:(I9={},I9.$$range$$={min:0,alias:"low-q1-median-q3-high"},I9),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),P9=function(e,t){var n=e;if(Array.isArray(t)){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4];n=pN(e,(function(e){return e.$$range$$=[e[r],e[i],e[a],e[o],e[s]],e}))}return n};function F9(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.groupField,o=n.color,s=n.tooltip,l=n.boxStyle;t.data(P9(n.data,i));var c=lM(i)?"$$range$$":i,u=i?lM(i)?i:[i]:[],h=s;!1!==h&&(h=vQ({},{fields:lM(i)?i:[]},h));var p=$Z(vQ({},e,{options:{xField:r,yField:c,seriesField:a,tooltip:h,rawFields:u,label:!1,schema:{shape:"box",color:o,style:l}}})).ext;return a&&p.geometry.adjust("dodge"),e}function L9(e){var t=e.chart,n=e.options,r=n.xField,i=n.data,a=n.outliersField,o=n.outliersStyle,s=n.padding,l=n.label;if(!a)return e;var c=t.createView({padding:s,id:"outliers_view"}),u=i.reduce((function(e,t){return t[a].forEach((function(n){var r;return e.push(QI(QI({},t),((r={})[a]=n,r)))})),e}),[]);return c.data(u),LZ({chart:c,options:{xField:r,yField:a,point:{shape:"circle",style:o},label:l}}),c.axis(!1),e}function R9(e){var t,n,r=e.chart,i=e.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=i.outliersField,h=Array.isArray(c)?"$$range$$":c,p={};if(u){var d="$$y_outliers$$";(t={})[u]={sync:d,nice:!0},t[h]={sync:d,nice:!0},p=t}var f=vQ(p,a,((n={})[l]=JK(o,rZ),n[h]=JK(s,rZ),n));return r.scale(f),e}function D9(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=Array.isArray(o)?"$$range$$":o;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis("$$range$$",!1):t.axis(s,i),e}function B9(e){var t=e.chart,n=e.options,r=n.legend,i=n.groupField;return i?r?t.legend(i,r):t.legend(i,{position:"bottom"}):t.legend(!1),e}function $9(e){return ZK(F9,L9,R9,D9,B9,EZ,xZ,bZ,CZ)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="box",t}KI(t,e),t.getDefaultOptions=function(){return N9},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField,n=this.chart.views.find((function(e){return"outliers_view"===e.id}));n&&n.data(e),this.chart.changeData(P9(e,t))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return $9}}(nZ);var z9={exports:{}},H9={exports:{}};!function(e){var t=e.exports;e.exports.isNumber=function(e){return"number"==typeof e},e.exports.findMin=function(e){if(0===e.length)return 1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.min(t,e[n]);return t},e.exports.findMax=function(e){if(0===e.length)return-1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.max(t,e[n]);return t},e.exports.findMinMulti=function(e){for(var n=t.findMin(e[0]),r=1;r<e.length;r++)n=Math.min(n,t.findMin(e[r]));return n},e.exports.findMaxMulti=function(e){for(var n=t.findMax(e[0]),r=1;r<e.length;r++)n=Math.max(n,t.findMax(e[r]));return n},e.exports.inside=function(e,t,n){return e<=n&&n<=t}}(H9),function(e){var t=Math.log(2),n=e.exports,r=H9.exports;function i(e){return 1-Math.abs(e)}e.exports.getUnifiedMinMax=function(e,t){return n.getUnifiedMinMaxMulti([e],t)},e.exports.getUnifiedMinMaxMulti=function(e,t){t=t||{};var n=!1,i=!1,a=r.isNumber(t.width)?t.width:2,o=r.isNumber(t.size)?t.size:50,s=r.isNumber(t.min)?t.min:(n=!0,r.findMinMulti(e)),l=r.isNumber(t.max)?t.max:(i=!0,r.findMaxMulti(e)),c=(l-s)/(o-1);return n&&(s-=2*a*c),i&&(l+=2*a*c),{min:s,max:l}},e.exports.create=function(e,t){if(t=t||{},!e||0===e.length)return[];var a=r.isNumber(t.size)?t.size:50,o=r.isNumber(t.width)?t.width:2,s=n.getUnifiedMinMax(e,{size:a,width:o,min:t.min,max:t.max}),l=s.min,c=s.max-l,u=c/(a-1);if(0===c)return[{x:l,y:1}];for(var h=[],p=0;p<a;p++)h.push({x:l+p*u,y:0});var d=function(e,t){for(var n={},r=0,i=-t;i<=t;i++)r+=e(i/t),n[i]=r;return n}(i,o),f=d[o],m=d[o-1]-d[o-2],g=0;e.forEach((function(e){var t=function(e){return Math.floor((e-l)/u)}(e);if(!(t+o<0||t-o>=h.length)){var n=Math.max(t-o,0),i=t,a=Math.min(t+o,h.length-1),s=n-(t-o),c=t+o-a,p=d[-o-1+s]||0,y=d[-o-1+c]||0,v=f/(f-p-y);s>0&&(g+=v*(s-1)*m);var E=Math.max(0,t-o+1);r.inside(0,h.length-1,E)&&(h[E].y+=1*v*m),r.inside(0,h.length-1,i+1)&&(h[i+1].y-=2*v*m),r.inside(0,h.length-1,a+1)&&(h[a+1].y+=1*v*m)}}));var y=g,v=0,E=0;return h.forEach((function(e){v+=e.y,y+=v,e.y=y,E+=y})),E>0&&h.forEach((function(e){e.y/=E})),h},e.exports.getExpectedValueFromPdf=function(e){if(e&&0!==e.length){var t=0;return e.forEach((function(e){t+=e.x*e.y})),t}},e.exports.getXWithLeftTailArea=function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=0;i<e.length&&(r=i,!((n+=e[i].y)>=t));i++);return e[r].x}},e.exports.getPerplexity=function(e){if(e&&0!==e.length){var n=0;return e.forEach((function(e){var t=Math.log(e.y);isFinite(t)&&(n+=e.y*t)})),n=-n/t,Math.pow(2,n)}}}(z9);var j9=z9.exports;function G9(e,t){var n=e.length*t;if(0===e.length)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function V9(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Y9(e,t,n,r){for(n=n||0,r=r||e.length-1;r>n;){if(r-n>600){var i=r-n+1,a=t-n+1,o=Math.log(i),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(l*=-1),Y9(e,t,Math.max(n,Math.floor(t-a*s/i+l)),Math.min(r,Math.floor(t+(i-a)*s/i+l)))}var c=e[t],u=n,h=r;for(V9(e,n,t),e[r]>c&&V9(e,n,r);u<h;){for(V9(e,u,h),u++,h--;e[u]<c;)u++;for(;e[h]>c;)h--}e[n]===c?V9(e,n,h):V9(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function U9(e,t){var n=e.slice();if(Array.isArray(t)){!function(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(X9(e.length,t[r]));n.push(e.length-1),n.sort(W9);var i=[0,n.length-1];for(;i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);q9(e,n[s],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,s,s,a)}}}(n,t);for(var r=[],i=0;i<t.length;i++)r[i]=G9(n,t[i]);return r}return q9(n,X9(n.length,t),0,n.length-1),G9(n,t)}function q9(e,t,n,r){t%1==0?Y9(e,t,n,r):(Y9(e,t=Math.floor(t),n,r),Y9(e,t+1,t+1,r))}function W9(e,t){return e-t}function X9(e,t){var n=e*t;return 1===t?e-1:0===t?0:n%1!=0?Math.ceil(n)-1:e%2==0?n-.5:n}var K9=function(e){return{low:EM(e),high:vM(e),q1:U9(e,.25),q3:U9(e,.75),median:U9(e,[.5]),minMax:[EM(e),vM(e)],quantile:[U9(e,.25),U9(e,.75)]}},Q9=function(e,t){var n=j9.create(e,t);return{violinSize:n.map((function(e){return e.y})),violinY:n.map((function(e){return e.x}))}},Z9=function(e){var t=e.xField,n=e.yField,r=e.seriesField,i=e.data,a=e.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var s=NM(i,t);return Object.keys(s).map((function(e){var t=s[e].map((function(e){return e[n]}));return QI(QI({x:e},Q9(t,o)),K9(t))}))}var l=[],c=NM(i,r);return Object.keys(c).forEach((function(e){var i=NM(c[e],t);return Object.keys(i).forEach((function(t){var a,s=i[t].map((function(e){return e[n]}));l.push(QI(QI(((a={x:t})[r]=e,a),Q9(s,o)),K9(s)))}))})),l},J9=vQ({},nZ.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),e5=["low","high","q1","q3","median"],t5=[{type:"dodge",marginRatio:1/32}];function n5(e){var t=e.chart,n=e.options;return t.data(Z9(n)),e}function r5(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,a=n.shape,o=void 0===a?"violin":a,s=n.violinStyle,l=n.tooltip,c=n.state,u=t.createView({id:"violin_view"});return function(e){var t=e.options,n=t.violin,r=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=AZ(t.tooltip,[r,i,a,o]),l=s.fields,c=s.formatter;n&&NZ(vQ({},e,{options:{type:"violin",colorField:a,tooltipFields:l,mapping:QI({tooltip:c},n)}}))}({chart:u,options:{xField:"x",yField:"violinY",seriesField:r||"x",sizeField:"violinSize",tooltip:QI({fields:e5},l),violin:{style:s,color:i,shape:o},state:c}}),u.geometries[0].adjust(t5),e}function i5(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,a=n.tooltip,o=n.box;if(!1===o)return e;var s=t.createView({id:"min_max_view"});RZ({chart:s,options:{xField:"x",yField:"minMax",seriesField:r||"x",tooltip:QI({fields:e5},a),state:"object"==typeof o?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(t5);var l=t.createView({id:"quantile_view"});RZ({chart:l,options:{xField:"x",yField:"quantile",seriesField:r||"x",tooltip:QI({fields:e5},a),state:"object"==typeof o?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(t5);var c=t.createView({id:"median_view"});return LZ({chart:c,options:{xField:"x",yField:"median",seriesField:r||"x",tooltip:QI({fields:e5},a),state:"object"==typeof o?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),c.geometries[0].adjust(t5),l.axis(!1),s.axis(!1),c.axis(!1),c.legend(!1),s.legend(!1),l.legend(!1),e}function a5(e){var t,n=e.chart,r=e.options,i=r.meta,a=r.xAxis,o=r.yAxis,s=vQ({},i,((t={}).x=QI(QI({sync:!0},JK(a,rZ)),{type:"cat"}),t.violinY=QI({sync:!0},JK(o,rZ)),t.minMax=QI({sync:"violinY"},JK(o,rZ)),t.quantile=QI({sync:"violinY"},JK(o,rZ)),t.median=QI({sync:"violinY"},JK(o,rZ)),t));return n.scale(s),e}function o5(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=lQ(t,"violin_view");return!1===r?a.axis("x",!1):a.axis("x",r),!1===i?a.axis("violinY",!1):a.axis("violinY",i),t.axis(!1),e}function s5(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField,a=n.shape;if(!1===r)t.legend(!1);else{var o=i||"x",s=vN(r,["selected"]);a&&a.startsWith("hollow")||fN(s,["marker","style","lineWidth"])||mN(s,["marker","style","lineWidth"],0),t.legend(o,s),fN(r,"selected")&&uM(t.views,(function(e){return e.legend(o,r)}))}return e}function l5(e){var t=lQ(e.chart,"violin_view");return _Z()(QI(QI({},e),{chart:t})),e}function c5(e){var t=e.chart,n=e.options.animation;return uM(t.views,(function(e){"boolean"==typeof n?e.animate(n):e.animate(!0),uM(e.geometries,(function(e){e.animate(n)}))})),e}function u5(e){return ZK(CZ,n5,r5,i5,a5,EZ,o5,s5,xZ,l5,c5)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="violin",t}KI(t,e),t.getDefaultOptions=function(){return J9},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(Z9(this.options))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return u5}}(nZ);var h5={normal:function(e){return e},multiply:function(e,t){return e*t/255},screen:function(e,t){return 255*(1-(1-e/255)*(1-t/255))},overlay:function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},darken:function(e,t){return e>t?t:e},lighten:function(e,t){return e>t?e:t},dodge:function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e},burn:function(e,t){return 255===t?255:0===e?0:255*(1-Math.min(1,(1-t/255)/(e/255)))}};function p5(e,t,n){void 0===n&&(n="normal");var r,i=(r=function(e){if(!h5[e])throw new Error("unknown blend mode "+e);return h5[e]}(n),function(e,t){var n=[];return n[0]=r(e[0],t[0]),n[1]=r(e[1],t[1]),n[2]=r(e[2],t[2]),n})(d5(e),d5(t)),a=d5(e),o=a[0],s=a[1],l=a[2],c=a[3],u=d5(t),h=u[0],p=u[1],d=u[2],f=u[3],m=Number((c+f*(1-c)).toFixed(2));return"rgba("+Math.round((c*(1-f)*(o/255)+c*f*(i[0]/255)+(1-c)*f*(h/255))/m*255)+", "+Math.round((c*(1-f)*(s/255)+c*f*(i[1]/255)+(1-c)*f*(p/255))/m*255)+", "+Math.round((c*(1-f)*(l/255)+c*f*(i[2]/255)+(1-c)*f*(d/255))/m*255)+", "+m+")"}function d5(e){var t,n=e.replace("/s+/g","");return"string"!=typeof n||n.startsWith("rgba")||n.startsWith("#")?(n.startsWith("rgba")&&(t=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(t=wD.rgb2arr(n).concat([1])),t.map((function(e,t){return 3===t?Number(e):0|e}))):wD.rgb2arr(wD.toRGB(n)).concat([1])}function f5(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function m5(e,t){return f5(e).map((function(){return f5(t)}))}function g5(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function y5(e){return Math.sqrt(g5(e,e))}function v5(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function E5(e,t,n,r,i){for(var a=0;a<e.length;++a)e[a]=t*n[a]+r*i[a]}function x5(e,t,n){var r,i=(n=n||{}).maxIterations||200*t.length,a=n.nonZeroDelta||1.05,o=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,l=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,u=void 0!==n.chi?n.chi:2,h=void 0!==n.psi?n.psi:-.5,p=void 0!==n.sigma?n.sigma:.5,d=t.length,f=new Array(d+1);f[0]=t,f[0].fx=e(t),f[0].id=0;for(var m=0;m<d;++m){var g=t.slice();g[m]=g[m]?g[m]*a:o,f[m+1]=g,f[m+1].fx=e(g),f[m+1].id=m+1}function y(e){for(var t=0;t<e.length;t++)f[d][t]=e[t];f[d].fx=e.fx}for(var v=function(e,t){return e.fx-t.fx},E=t.slice(),x=t.slice(),b=t.slice(),C=t.slice(),S=0;S<i;++S){if(f.sort(v),n.history){var w=f.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));w.sort((function(e,t){return e.id-t.id})),n.history.push({x:f[0].slice(),fx:f[0].fx,simplex:w})}for(r=0,m=0;m<d;++m)r=Math.max(r,Math.abs(f[0][m]-f[1][m]));if(Math.abs(f[0].fx-f[d].fx)<s&&r<l)break;for(m=0;m<d;++m){E[m]=0;for(var T=0;T<d;++T)E[m]+=f[T][m];E[m]/=d}var k=f[d];if(E5(x,1+c,E,-c,k),x.fx=e(x),x.fx<f[0].fx)E5(C,1+u,E,-u,k),C.fx=e(C),C.fx<x.fx?y(C):y(x);else if(x.fx>=f[d-1].fx){var _=!1;if(x.fx>k.fx?(E5(b,1+h,E,-h,k),b.fx=e(b),b.fx<k.fx?y(b):_=!0):(E5(b,1-h*c,E,h*c,k),b.fx=e(b),b.fx<x.fx?y(b):_=!0),_){if(p>=1)break;for(m=1;m<f.length;++m)E5(f[m],1-p,f[0],p,f[m]),f[m].fx=e(f[m])}}else y(x)}return f.sort(v),{fx:f[0].fx,x:f[0]}}function b5(e,t,n,r,i,a,o){var s=n.fx,l=g5(n.fxprime,t),c=s,u=s,h=l,p=0;function d(u,p,d){for(var f=0;f<16;++f)if(i=(u+p)/2,E5(r.x,1,n.x,i,t),c=r.fx=e(r.x,r.fxprime),h=g5(r.fxprime,t),c>s+a*i*l||c>=d)p=i;else{if(Math.abs(h)<=-o*l)return i;h*(p-u)>=0&&(p=u),u=i,d=c}return 0}i=i||1,a=a||1e-6,o=o||.1;for(var f=0;f<10;++f){if(E5(r.x,1,n.x,i,t),c=r.fx=e(r.x,r.fxprime),h=g5(r.fxprime,t),c>s+a*i*l||f&&c>=u)return d(p,i,u);if(Math.abs(h)<=-o*l)return i;if(h>=0)return d(i,p,c);u=c,p=i,i*=2}return i}function C5(e,t,n){var r,i,a,o={x:t.slice(),fx:0,fxprime:t.slice()},s={x:t.slice(),fx:0,fxprime:t.slice()},l=t.slice(),c=1;a=(n=n||{}).maxIterations||20*t.length,o.fx=e(o.x,o.fxprime),v5(r=o.fxprime.slice(),o.fxprime,-1);for(var u=0;u<a;++u){if(c=b5(e,r,o,s,c),n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:c}),c){E5(l,1,s.fxprime,-1,o.fxprime);var h=g5(o.fxprime,o.fxprime);E5(r,Math.max(0,g5(l,s.fxprime)/h),r,-1,s.fxprime),i=o,o=s,s=i}else v5(r,o.fxprime,-1);if(y5(o.fxprime)<=1e-5)break}return n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:c}),o}function S5(e,t){var n,r=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var i=_5(e[n],e[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],t.push(o)}return t}(e),i=r.filter((function(t){return function(e,t){for(var n=0;n<t.length;++n)if(T5(e,t[n])>t[n].radius+1e-10)return!1;return!0}(t,e)})),a=0,o=0,s=[];if(i.length>1){var l=O5(i);for(n=0;n<i.length;++n){var c=i[n];c.angle=Math.atan2(c.x-l.x,c.y-l.y)}i.sort((function(e,t){return t.angle-e.angle}));var u=i[i.length-1];for(n=0;n<i.length;++n){var h=i[n];o+=(u.x+h.x)*(h.y-u.y);for(var p={x:(h.x+u.x)/2,y:(h.y+u.y)/2},d=null,f=0;f<h.parentIndex.length;++f)if(u.parentIndex.indexOf(h.parentIndex[f])>-1){var m=e[h.parentIndex[f]],g=Math.atan2(h.x-m.x,h.y-m.y),y=Math.atan2(u.x-m.x,u.y-m.y),v=y-g;v<0&&(v+=2*Math.PI);var E=y-v/2,x=T5(p,{x:m.x+m.radius*Math.sin(E),y:m.y+m.radius*Math.cos(E)});x>2*m.radius&&(x=2*m.radius),(null===d||d.width>x)&&(d={circle:m,width:x,p1:h,p2:u})}null!==d&&(s.push(d),a+=w5(d.circle.radius,d.width),u=h)}}else{var b=e[0];for(n=1;n<e.length;++n)e[n].radius<b.radius&&(b=e[n]);var C=!1;for(n=0;n<e.length;++n)if(T5(e[n],b)>Math.abs(b.radius-e[n].radius)){C=!0;break}C?a=o=0:(a=b.radius*b.radius*Math.PI,s.push({circle:b,p1:{x:b.x,y:b.y+b.radius},p2:{x:b.x-1e-10,y:b.y+b.radius},width:2*b.radius}))}return o/=2,t&&(t.area=a+o,t.arcArea=a,t.polygonArea=o,t.arcs=s,t.innerPoints=i,t.intersectionPoints=r),a+o}function w5(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function T5(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function k5(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=t-(n*n-e*e+t*t)/(2*n);return w5(e,e-(n*n-t*t+e*e)/(2*n))+w5(t,r)}function _5(e,t){var n=T5(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),s=e.x+a*(t.x-e.x)/n,l=e.y+a*(t.y-e.y)/n,c=-(t.y-e.y)*(o/n),u=-(t.x-e.x)*(o/n);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function O5(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function A5(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+1e-10?Math.abs(e-t):function(e,t,n,r){var i=(r=r||{}).maxIterations||100,a=r.tolerance||1e-10,o=e(t),s=e(n),l=n-t;if(o*s>0)throw"Initial bisect points must have opposite signs";if(0===o)return t;if(0===s)return n;for(var c=0;c<i;++c){var u=t+(l/=2),h=e(u);if(h*o>=0&&(t=u),Math.abs(l)<a||0===h)return u}return t+l}((function(r){return k5(e,t,r)-n}),0,e+t)}function I5(e,t){var n=function(e,t){for(var n,r=t&&t.lossFunction?t.lossFunction:M5,i={},a={},o=0;o<e.length;++o){var s=e[o];1==s.sets.length&&(n=s.sets[0],i[n]={x:1e10,y:1e10,rowid:Object.keys(i).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},a[n]=[])}e=e.filter((function(e){return 2==e.sets.length}));for(o=0;o<e.length;++o){var l=e[o],c=l.hasOwnProperty("weight")?l.weight:1,u=l.sets[0],h=l.sets[1];l.size+1e-10>=Math.min(i[u].size,i[h].size)&&(c=0),a[u].push({set:h,size:l.size,weight:c}),a[h].push({set:u,size:l.size,weight:c})}var p=[];for(n in a)if(a.hasOwnProperty(n)){var d=0;for(o=0;o<a[n].length;++o)d+=a[n][o].size*a[n][o].weight;p.push({set:n,size:d})}function f(e,t){return t.size-e.size}p.sort(f);var m={};function g(e){return e.set in m}function y(e,t){i[t].x=e.x,i[t].y=e.y,m[t]=!0}y({x:0,y:0},p[0].set);for(o=1;o<p.length;++o){var v=p[o].set,E=a[v].filter(g);if(n=i[v],E.sort(f),0===E.length)throw"ERROR: missing pairwise overlap information";for(var x=[],b=0;b<E.length;++b){var C=i[E[b].set],S=A5(n.radius,C.radius,E[b].size);x.push({x:C.x+S,y:C.y}),x.push({x:C.x-S,y:C.y}),x.push({y:C.y+S,x:C.x}),x.push({y:C.y-S,x:C.x});for(var w=b+1;w<E.length;++w)for(var T=i[E[w].set],k=A5(n.radius,T.radius,E[w].size),_=_5({x:C.x,y:C.y,radius:S},{x:T.x,y:T.y,radius:k}),O=0;O<_.length;++O)x.push(_[O])}var A=1e50,I=x[0];for(b=0;b<x.length;++b){i[v].x=x[b].x,i[v].y=x[b].y;var M=r(i,e);M<A&&(A=M,I=x[b])}y(I,v)}return i}(e,t),r=t.lossFunction||M5;if(e.length>=8){var i=function(e,t){var n,r=(t=t||{}).restarts||10,i=[],a={};for(n=0;n<e.length;++n){var o=e[n];1==o.sets.length&&(a[o.sets[0]]=i.length,i.push(o))}var s=function(e,t,n){var r=m5(t.length,t.length),i=m5(t.length,t.length);return e.filter((function(e){return 2==e.sets.length})).map((function(e){var a=n[e.sets[0]],o=n[e.sets[1]],s=A5(Math.sqrt(t[a].size/Math.PI),Math.sqrt(t[o].size/Math.PI),e.size);r[a][o]=r[o][a]=s;var l=0;e.size+1e-10>=Math.min(t[a].size,t[o].size)?l=1:e.size<=1e-10&&(l=-1),i[a][o]=i[o][a]=l})),{distances:r,constraints:i}}(e,i,a),l=s.distances,c=s.constraints,u=y5(l.map(y5))/l.length;l=l.map((function(e){return e.map((function(e){return e/u}))}));var h,p,d=function(e,t){return function(e,t,n,r){var i,a=0;for(i=0;i<t.length;++i)t[i]=0;for(i=0;i<n.length;++i)for(var o=e[2*i],s=e[2*i+1],l=i+1;l<n.length;++l){var c=e[2*l],u=e[2*l+1],h=n[i][l],p=r[i][l],d=(c-o)*(c-o)+(u-s)*(u-s),f=Math.sqrt(d),m=d-h*h;p>0&&f<=h||p<0&&f>=h||(a+=2*m*m,t[2*i]+=4*m*(o-c),t[2*i+1]+=4*m*(s-u),t[2*l]+=4*m*(c-o),t[2*l+1]+=4*m*(u-s))}return a}(e,t,l,c)};for(n=0;n<r;++n){p=C5(d,f5(2*l.length).map(Math.random),t),(!h||p.fx<h.fx)&&(h=p)}var f=h.x,m={};for(n=0;n<i.length;++n){var g=i[n];m[g.sets[0]]={x:f[2*n]*u,y:f[2*n+1]*u,radius:Math.sqrt(g.size/Math.PI)}}if(t.history)for(n=0;n<t.history.length;++n)v5(t.history[n].x,u);return m}(e,t);r(i,e)+1e-8<r(n,e)&&(n=i)}return n}function M5(e,t){var n=0;for(var r=0;r<t.length;++r){var i=t[r],a=void 0;if(1!=i.sets.length){if(2==i.sets.length){var o=e[i.sets[0]],s=e[i.sets[1]];a=k5(o.radius,s.radius,T5(o,s))}else a=S5(i.sets.map((function(t){return e[t]})));n+=(i.hasOwnProperty("weight")?i.weight:1)*(a-i.size)*(a-i.size)}}return n}function N5(e,t,n,r){var i=[],a=[];for(var o in e)e.hasOwnProperty(o)&&(a.push(o),i.push(e[o]));t-=2*r,n-=2*r;var s=function(e){var t=function(t){return{max:Math.max.apply(null,e.map((function(e){return e[t]+e.radius}))),min:Math.min.apply(null,e.map((function(e){return e[t]-e.radius})))}};return{xRange:t("x"),yRange:t("y")}}(i),l=s.xRange,c=s.yRange;if(l.max==l.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),e;for(var u=t/(l.max-l.min),h=n/(c.max-c.min),p=Math.min(h,u),d=(t-(l.max-l.min)*p)/2,f=(n-(c.max-c.min)*p)/2,m={},g=0;g<i.length;++g){var y=i[g];m[a[g]]={radius:p*y.radius,x:r+d+(y.x-l.min)*p,y:r+f+(y.y-c.min)*p}}return m}function P5(e,t,n){var r,i,a=t[0].radius-T5(t[0],e);for(r=1;r<t.length;++r)(i=t[r].radius-T5(t[r],e))<=a&&(a=i);for(r=0;r<n.length;++r)(i=T5(n[r],e)-n[r].radius)<=a&&(a=i);return a}function F5(e,t){var n,r=[];for(n=0;n<e.length;++n){var i=e[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var a=r[0],o=P5(r[0],e,t);for(n=1;n<r.length;++n){var s=P5(r[n],e,t);s>=o&&(a=r[n],o=s)}var l=x5((function(n){return-1*P5({x:n[0],y:n[1]},e,t)}),[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:l[0],y:l[1]},u=!0;for(n=0;n<e.length;++n)if(T5(c,e[n])>e[n].radius){u=!1;break}for(n=0;n<t.length;++n)if(T5(c,t[n])<t[n].radius){u=!1;break}if(!u)if(1==e.length)c={x:e[0].x,y:e[0].y};else{var h={};S5(e,h),c=0===h.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==h.arcs.length?{x:h.arcs[0].circle.x,y:h.arcs[0].circle.y}:t.length?F5(e,[]):O5(h.arcs.map((function(e){return e.p1})))}return c}function L5(e,t){for(var n={},r=function(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var i=0;i<n.length;i++)for(var a=e[n[i]],o=i+1;o<n.length;++o){var s=e[n[o]],l=T5(a,s);l+s.radius<=a.radius+1e-10?t[n[o]].push(n[i]):l+a.radius<=s.radius+1e-10&&t[n[i]].push(n[o])}return t}(e),i=0;i<t.length;++i){for(var a=t[i].sets,o={},s={},l=0;l<a.length;++l){o[a[l]]=!0;for(var c=r[a[l]],u=0;u<c.length;++u)s[c[u]]=!0}var h=[],p=[];for(var d in e)d in o?h.push(e[d]):d in s||p.push(e[d]);var f=F5(h,p);n[a]=f,f.disjoint&&t[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return n}var R5={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(e){return{name:e.id,value:e.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]},D5=iN((function(e,t,n,r){var i=new Map,a=e.length;return t.forEach((function(t,o){if(1===t[r].length)i.set(t.id,e[(o+a)%a]);else{var s=t[r].map((function(e){return i.get(e)}));i.set(t.id,s.slice(1).reduce((function(e,t){return p5(e,t,n)}),s[0]))}})),i}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return JSON.stringify(e)}));function B5(e,t,n,r){void 0===r&&(r=0);var i=e.data,a=e.setsField,o=e.sizeField;if(0===i.length)return nQ(qK.WARN,!1,"warn: %s","数据不能为空"),[];var s=i.map((function(e){var t;return QI(QI({},e),((t={sets:e[a]||[],size:e[o]}).path="",t.id="",t))}));s.sort((function(e,t){return e.sets.length-t.sets.length}));var l=N5(function(e,t){(t=t||{}).maxIterations=t.maxIterations||500;var n,r=t.initialLayout||I5,i=t.lossFunction||M5,a=r(e=function(e){e=e.slice();var t,n,r,i,a=[],o={};for(t=0;t<e.length;++t){var s=e[t];1==s.sets.length?a.push(s.sets[0]):2==s.sets.length&&(o[[r=s.sets[0],i=s.sets[1]]]=!0,o[[i,r]]=!0)}for(a.sort((function(e,t){return e>t?1:-1})),t=0;t<a.length;++t)for(r=a[t],n=t+1;n<a.length;++n)[r,i=a[n]]in o||e.push({sets:[r,i],size:0});return e}(e),t),o=[],s=[];for(n in a)a.hasOwnProperty(n)&&(o.push(a[n].x),o.push(a[n].y),s.push(n));for(var l=x5((function(t){for(var n={},r=0;r<s.length;++r){var o=s[r];n[o]={x:t[2*r],y:t[2*r+1],radius:a[o].radius}}return i(n,e)}),o,t).x,c=0;c<s.length;++c)n=s[c],a[n].x=l[2*c],a[n].y=l[2*c+1];return a}(s),t,n,r),c=L5(l,s);return s.forEach((function(e){var t=e.sets,n=t.join(",");e.id=n;var r=function(e){var t={};S5(e,t);var n=t.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return function(e,t,n){var r=[],i=e-n,a=t;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var o=n[a],s=o.circle.radius,l=o.width>s;i.push("\nA",s,s,0,l?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}(t.map((function(e){return l[e]})));/[zZ]$/.test(r)||(r+=" Z"),e.path=r,tN(e,c[n]||{x:0,y:0})})),s}function $5(e){e&&e.geometries[0].elements.forEach((function(e){e.shape.toFront()}))}bY("schema","venn",{draw:function(e,t){var n=PR(e.data.path),r=function(e){return vQ({},e.defaultStyle,{fill:e.color},e.style)}(e),i=t.addGroup({name:"venn-shape"});i.addShape("path",{attrs:QI(QI({},r),{path:n}),name:"venn-path"});var a=e.customInfo,o=a.offsetX,s=a.offsetY,l=nU.transform(null,[["t",o,s]]);return i.setMatrix(l),i},getMarker:function(e){var t=e.color;return{symbol:"circle",style:{lineWidth:0,stroke:t,fill:t,r:4}}}}),mY("venn",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getLabelPoint=function(e,t,n){var r=e.data,i=r.x,a=r.y,o=e.customLabelInfo,s=o.offsetX,l=o.offsetY;return{content:e.content[n],x:i+s,y:a+l}},t}(RY));var z5=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.syncElementsPos=function(){$5(this.context.view)},t.prototype.active=function(){e.prototype.active.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(IG("element-active")),H5=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.syncElementsPos=function(){$5(this.context.view)},t.prototype.highlight=function(){e.prototype.highlight.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.clear=function(){e.prototype.clear.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(IG("element-highlight")),j5=IG("element-selected"),G5=IG("element-single-selected"),V5=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.syncElementsPos=function(){$5(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(j5),Y5=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.syncElementsPos=function(){$5(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(G5);MG("venn-element-active",z5),MG("venn-element-highlight",H5),MG("venn-element-selected",V5),MG("venn-element-single-selected",Y5),yV("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),yV("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),yV("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),yV("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),yV("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),yV("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});function U5(e,t,n){var r=e.chart,i=e.options,a=i.blendMode,o=i.setsField,s=r.getTheme(),l=s.colors10,c=s.colors20,u=n;lM(u)||(u=t.filter((function(e){return 1===e[o].length})).length<=10?l:c);var h=D5(u,t,a,o);return function(e){return h.get(e)||u[0]}}function q5(e){var t=e.chart,n=e.options,r=n.legend,i=n.appendPadding,a=n.padding,o=AQ(i);return!1!==r&&(o=IQ(i,fN(r,"position"),40)),t.appendPadding=MQ([o,a]),e}function W5(e){var t=e.options.data;t||(nQ(qK.WARN,!1,"warn: %s","数据不能为空"),t=[]);var n=t.filter((function(e){return 1===e.sets.length})).map((function(e){return e.sets[0]})),r=t.filter((function(e){var t=e.sets;return function(e,t){for(var n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0}(n,t)}));return hN(r,t)||nQ(qK.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),oN({},e,{options:{data:r}})}function X5(e){var t=e.chart,n=e.options,r=n.pointStyle,i=n.setsField,a=n.sizeField,o=AQ(t.appendPadding),s=o[0],l=o[1],c=o[2],u=o[3],h={offsetX:u,offsetY:s},p=t.viewBBox,d=p.width,f=p.height,m=B5(n,Math.max(d-(l+u),0),Math.max(f-(s+c),0),0);t.data(m);var g=$Z(vQ({},e,{options:{xField:"x",yField:"y",sizeField:a,seriesField:"id",rawFields:[i,a],schema:{shape:"venn",style:r}}})).ext.geometry;g.customInfo(h);var y=function(e,t){var n=e.options.color;if("function"!=typeof n){var r=U5(e,t,"string"==typeof n?[n]:n);return function(e){return r(e.id)}}return n}(e,m);return"function"==typeof y&&g.color("id",(function(t){var n=m.find((function(e){return e.id===t})),r=U5(e,m)(t);return y(n,r)})),e}function K5(e){var t=e.chart,n=e.options.label,r=AQ(t.appendPadding),i=r[0],a={offsetX:r[3],offsetY:i},o=iQ(t,"schema");if(n){var s=n.callback,l=ZI(n,["callback"]);o.label({fields:["id"],callback:s,cfg:oN({},hQ(l),{type:"venn",customLabelInfo:a})})}else o.label(!1);return e}function Q5(e){var t=e.chart,n=e.options,r=n.legend,i=n.sizeField;return t.legend("id",r),t.legend(i,!1),e}function Z5(e){return e.chart.axis(!1),e}function J5(e){var t=e.options,n=e.chart,r=t.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};xZ(vQ({},e,{options:{interactions:r.map((function(e){return QI(QI({},e),{type:i[e.type]||e.type})}))}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),e}function e2(e){return ZK(q5,CZ,W5,X5,K5,kZ({}),Q5,Z5,EZ,J5,bZ)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="venn",t}KI(t,e),t.getDefaultOptions=function(){return R5},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return e2},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(nZ);var t2,n2="$$stock-range$$",r2=vQ({},nZ.getDefaultOptions(),{tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(e,t,n){var r;if("x"===e){var i=n[0];r=i?i.title:t}else r=t;return{position:"y"===e?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function i2(e,t){return pN(e,(function(e){if(lM(t)){var n=t[0],r=t[1],i=t[2],a=t[3];e.trend=e[n]<=e[r]?"up":"down",e[n2]=[e[n],e[r],e[i],e[a]]}return e}))}function a2(e){var t=e.chart,n=e.options,r=n.yField,i=n.data,a=n.risingFill,o=n.fallingFill,s=n.tooltip,l=n.stockStyle;t.data(i2(i,r));var c=s;return!1!==c&&(c=vQ({},{fields:r},c)),$Z(vQ({},e,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:n2,seriesField:"trend",rawFields:r,tooltip:c}})),e}function o2(e){var t,n,r=e.chart,i=e.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=((t={})[l]={type:"timeCat",tickCount:6},t.trend={values:["up","down"]},t),u=vQ(c,a,((n={})[l]=JK(o,rZ),n[n2]=JK(s,rZ),n));return r.scale(u),e}function s2(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(n2,!1):t.axis(n2,i),e}function l2(e){var t=e.chart,n=e.options.tooltip;return!1!==n?t.tooltip(n):t.tooltip(!1),e}function c2(e){var t=e.chart,n=e.options.legend;return n?t.legend("trend",n):!1===n&&t.legend(!1),e}function u2(e){ZK(CZ,a2,o2,s2,l2,c2,xZ,bZ,_Z(),wZ)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="stock",t}KI(t,e),t.getDefaultOptions=function(){return r2},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return u2},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField;this.chart.changeData(i2(e,t))}}(nZ);var h2={appendPadding:[0,80],minSize:0,maxSize:1,meta:(t2={},t2.$$mappingValue$$={min:0,max:1,nice:!1},t2),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}};function p2(e,t,n){var r=n.yField,i=n.maxSize,a=n.minSize,o=fN(BM(t,r),[r]),s=RM(i)?i:1,l=RM(a)?a:0;return pN(e,(function(t,n){var i=(t[r]||0)/o;return t.$$percentage$$=i,t.$$mappingValue$$=(s-l)*i+l,t.$$conversion$$=[fN(e,[n-1,r]),t[r]],t}))}function d2(e){return function(t){var n=t.chart,r=t.options.conversionTag,i=n.getOptions().data;if(r){var a=r.formatter;i.forEach((function(t,o){if(!(o<=0||Number.isNaN(t.$$mappingValue$$))){var s=e(t,o,i,{top:!0,text:{content:oM(a)?a(t,i):a,offsetX:r.offsetX,offsetY:r.offsetY,position:"end",autoRotate:!1,style:QI({textAlign:"start",textBaseline:"middle"},r.style)}});n.annotation().line(s)}}))}return t}}function f2(e){var t=e.chart,n=e.options,r=n.data,i=void 0===r?[]:r,a=p2(i,i,{yField:n.yField,maxSize:n.maxSize,minSize:n.minSize});return t.data(a),e}function m2(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,l=n.shape,c=void 0===l?"funnel":l,u=n.funnelStyle,h=n.state,p=AZ(o,[r,i]),d=p.fields,f=p.formatter;return NZ({chart:t,options:{type:"interval",xField:r,yField:"$$mappingValue$$",colorField:r,tooltipFields:lM(d)&&d.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:c,tooltip:f,color:a,style:u},label:s,state:h}}),iQ(e.chart,"interval").adjust("symmetric"),e}function g2(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),e}function y2(e){var t=e.options.maxSize;return d2((function(e,n,r,i){var a=t-(t-e.$$mappingValue$$)/2;return QI(QI({},i),{start:[n-.5,a],end:[n-.5,a+.05]})}))(e),e}function v2(e){return ZK(f2,m2,g2,y2)(e)}function E2(e){var t,n=e.chart,r=e.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return n.data(a),n.scale(((t={})[o]={sync:!0},t)),e}function x2(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.color,s=n.compareField,l=n.isTransposed,c=n.tooltip,u=n.maxSize,h=n.minSize,p=n.label,d=n.funnelStyle,f=n.state;return t.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],eachView:function(e,t){var n=l?t.rowIndex:t.columnIndex;l||e.coordinate({type:"rect",actions:[["transpose"],["scale",0===n?-1:1,-1]]});var m=p2(t.data,r,{yField:a,maxSize:u,minSize:h});e.data(m);var g=AZ(c,[i,a,s]),y=g.fields,v=g.formatter,E=l?{offset:0===n?10:-23,position:0===n?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:0===n?"end":"start"}};NZ({chart:e,options:{type:"interval",xField:i,yField:"$$mappingValue$$",colorField:i,tooltipFields:lM(y)&&y.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:"funnel",tooltip:v,color:o,style:d},label:!1!==p&&vQ({},E,p),state:f}})}}),e}function b2(e){var t=e.chart,n=e.options,r=n.conversionTag,i=n.isTransposed;return t.once("beforepaint",(function(){t.views.forEach((function(e,t){d2((function(e,n,a,o){var s=0===t?-1:1;return vQ({},o,{start:[n-.5,e.$$mappingValue$$],end:[n-.5,e.$$mappingValue$$+.05],text:i?{style:{textAlign:"start"}}:{offsetX:!1!==r?s*r.offsetX:0,style:{textAlign:0===t?"end":"start"}}})}))(vQ({},{chart:e,options:n}))}))})),e}function C2(e){var t,n=e.chart,r=e.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return n.data(a),n.scale(((t={})[o]={sync:!0},t)),e}function S2(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.isTransposed;return t.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],eachView:function(t,n){v2(vQ({},e,{chart:t,options:{data:n.data}}))}}),e}function w2(e){var t=e.chart,n=e.options,r=n.data,i=void 0===r?[]:r,a=n.yField,o=CM(i,(function(e,t){return e+(t[a]||0)}),0),s=BM(i,a)[a],l=pN(i,(function(e,t){var n=[],r=[];if(e.$$totalPercentage$$=(e[a]||0)/o,t){var l=i[t-1].$$x$$,c=i[t-1].$$y$$;n[0]=l[3],r[0]=c[3],n[1]=l[2],r[1]=c[2]}else n[0]=-.5,r[0]=1,n[1]=.5,r[1]=1;return r[2]=r[1]-e.$$totalPercentage$$,n[2]=(r[2]+1)/4,r[3]=r[2],n[3]=-n[2],e.$$x$$=n,e.$$y$$=r,e.$$percentage$$=(e[a]||0)/s,e.$$conversion$$=[fN(i,[t-1,a]),e[a]],e}));return t.data(l),e}function T2(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,l=n.funnelStyle,c=n.state,u=AZ(o,[r,i]),h=u.fields,p=u.formatter;return NZ({chart:t,options:{type:"polygon",xField:"$$x$$",yField:"$$y$$",colorField:r,tooltipFields:lM(h)&&h.concat(["$$percentage$$","$$conversion$$"]),label:s,state:c,mapping:{tooltip:p,color:a,style:l}}}),e}function k2(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),e}function _2(e){return d2((function(e,t,n,r){return QI(QI({},r),{start:[e.$$x$$[1],e.$$y$$[1]],end:[e.$$x$$[1]+.05,e.$$y$$[1]]})}))(e),e}function O2(e){var t,n=e.options,r=n.compareField,i=n.xField,a=n.yField,o=n.locale,s=n.funnelStyle,l=n.data,c=LQ(o);return(r||s)&&(t=function(e){return vQ({},r&&{lineWidth:1,stroke:"#fff"},oM(s)?s(e):s)}),vQ({options:{label:r?{fields:[i,a,r,"$$percentage$$","$$conversion$$"],formatter:function(e){return""+e[a]}}:{fields:[i,a,"$$percentage$$","$$conversion$$"],offset:0,position:"middle",formatter:function(e){return e[i]+" "+e[a]}},tooltip:{title:i,formatter:function(e){return{name:e[i],value:e[a]}}},conversionTag:{formatter:function(e){return c.get(["conversionTag","label"])+": "+iJ.apply(void 0,e.$$conversion$$)}}}},e,{options:{funnelStyle:t,data:nN(l)}})}function A2(e){var t=e.options,n=t.compareField,r=t.dynamicHeight;return t.seriesField?function(e){return ZK(C2,S2)(e)}(e):n?function(e){return ZK(E2,x2,b2)(e)}(e):r?function(e){return ZK(w2,T2,k2,_2)(e)}(e):v2(e)}function I2(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ZK(kZ(((t={})[a]=r,t[o]=i,t)))(e)}function M2(e){return e.chart.axis(!1),e}function N2(e){var t=e.chart,n=e.options.legend;return!1===n?t.legend(!1):t.legend(n),e}function P2(e){return ZK(O2,A2,I2,M2,EZ,xZ,N2,bZ,CZ,_Z())(e)}var F2=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="funnel",t}return KI(t,e),t.getDefaultOptions=function(){return h2},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return P2},t.prototype.setState=function(e,t,n){void 0===n&&(n=!0),uM(oQ(this.chart),(function(r){t(r.getData())&&r.setState(e,n)}))},t.prototype.getStates=function(){var e=oQ(this.chart),t=[];return uM(e,(function(e){var n=e.getData();uM(e.getStates(),(function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})}))})),t},t.CONVERSATION_FIELD="$$conversion$$",t.PERCENT_FIELD="$$percentage$$",t.TOTAL_PERCENT_FIELD="$$totalPercentage$$",t}(nZ);function L2(e){return[{percent:e,type:"liquid"}]}function R2(e){var t=e.chart,n=e.options,r=n.percent,i=n.liquidStyle,a=n.radius,o=n.outline,s=n.wave,l=n.shape;t.scale({percent:{min:0,max:1}}),t.data(L2(r));var c=n.color||t.getTheme().defaultColor,u=RZ(vQ({},e,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:c,style:i,shape:"liquid-fill-gauge"}}})).ext.geometry,h={radius:a,outline:o,wave:s,shape:l,background:t.getTheme().background};return u.customInfo(h),t.legend(!1),t.axis(!1),t.tooltip(!1),e}function D2(e,t){var n=e.chart,r=e.options,i=r.statistic,a=r.percent,o=r.meta;n.getController("annotation").clear(!0);var s=fN(o,["percent","formatter"])||function(e){return(100*e).toFixed(2)+"%"},l=i.content;return l&&(l=vQ({},l,{content:sM(l.content)?s(a):l.content})),SQ(n,{statistic:QI(QI({},i),{content:l}),plotType:"liquid"},{percent:a}),t&&n.render(!0),e}function B2(e){return ZK(CZ,yZ("liquidStyle"),R2,D2,kZ({}),bZ,xZ)(e)}var $2={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"};function z2(e,t,n){return e+(t-e)*n}function H2(e,t,n,r){return 0===t?[[e+.5*n/Math.PI/2,r/2],[e+.5*n/Math.PI,r],[e+n/4,r]]:1===t?[[e+.5*n/Math.PI/2*(Math.PI-2),r],[e+.5*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:2===t?[[e+.5*n/Math.PI/2,-r/2],[e+.5*n/Math.PI,-r],[e+n/4,-r]]:[[e+.5*n/Math.PI/2*(Math.PI-2),-r],[e+.5*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function j2(e,t,n,r,i,a,o){for(var s=4*Math.ceil(2*e/n*4),l=[],c=r;c<2*-Math.PI;)c+=2*Math.PI;for(;c>0;)c-=2*Math.PI;var u=a-e+(c=c/Math.PI/2*n)-2*e;l.push(["M",u,t]);for(var h=0,p=0;p<s;++p){var d=H2(p*n/4,p%4,n,i);l.push(["C",d[0][0]+u,-d[0][1]+t,d[1][0]+u,-d[1][1]+t,d[2][0]+u,-d[2][1]+t]),p===s-1&&(h=d[2][0])}return l.push(["L",h+u,o+e]),l.push(["L",u,o+e]),l.push(["Z"]),l}function G2(e,t,n,r){var i=2*n/3,a=Math.max(i,r),o=i/2,s=e,l=o+t-a/2,c=Math.asin(o/(.85*(a-o))),u=Math.sin(c)*o,h=Math.cos(c)*o,p=s-h,d=l+u,f=e,m=l+o/Math.sin(c);return"\n      M "+p+" "+d+"\n      A "+o+" "+o+" 0 1 1 "+(p+2*h)+" "+d+"\n      Q "+f+" "+m+" "+e+" "+(t+a/2)+"\n      Q "+f+" "+m+" "+p+" "+d+"\n      Z \n    "}function V2(e,t,n,r){var i=n/2,a=r/2;return"\n      M "+e+" "+(t-a)+" \n      a "+i+" "+a+" 0 1 0 0 "+2*a+"\n      a "+i+" "+a+" 0 1 0 0 "+2*-a+"\n      Z\n    "}function Y2(e,t,n,r){var i=r/2,a=n/2;return"\n      M "+e+" "+(t-i)+"\n      L "+(e+a)+" "+t+"\n      L "+e+" "+(t+i)+"\n      L "+(e-a)+" "+t+"\n      Z\n    "}function U2(e,t,n,r){var i=r/2,a=n/2;return"\n      M "+e+" "+(t-i)+"\n      L "+(e+a)+" "+(t+i)+"\n      L "+(e-a)+" "+(t+i)+"\n      Z\n    "}function q2(e,t,n,r){var i=r/2,a=n/2*.618;return"\n      M "+(e-a)+" "+(t-i)+"\n      L "+(e+a)+" "+(t-i)+"\n      L "+(e+a)+" "+(t+i)+"\n      L "+(e-a)+" "+(t+i)+"\n      Z\n    "}function W2(e){var t=e.data,n=e.xField,r=e.measureField,i=e.rangeField,a=e.targetField,o=e.layout,s=[],l=[];t.forEach((function(e,t){var o;e[i].sort((function(e,t){return e-t})),e[i].forEach((function(r,a){var o,l=0===a?r:e[i][a]-e[i][a-1];s.push(((o={rKey:i+"_"+a})[n]=n?e[n]:String(t),o[i]=l,o))})),e[r].forEach((function(i,a){var o;s.push(((o={mKey:e[r].length>1?r+"_"+a:""+r})[n]=n?e[n]:String(t),o[r]=i,o))})),s.push(((o={tKey:""+a})[n]=n?e[n]:String(t),o[a]=e[a],o)),l.push(e[i],e[r],e[a])}));var c=Math.min.apply(Math,l.flat(1/0)),u=Math.max.apply(Math,l.flat(1/0));return c=c>0?0:c,"vertical"===o&&s.reverse(),{min:c,max:u,ds:s}}function X2(e){var t=e.chart,n=e.options,r=n.bulletStyle,i=n.targetField,a=n.rangeField,o=n.measureField,s=n.xField,l=n.color,c=n.layout,u=n.size,h=n.label,p=W2(n),d=p.min,f=p.max,m=p.ds;return t.data(m),RZ(vQ({},e,{options:{xField:s,yField:a,seriesField:"rKey",isStack:!0,label:fN(h,"range"),interval:{color:fN(l,"range"),style:fN(r,"range"),size:fN(u,"range")}}})),t.geometries[0].tooltip(!1),RZ(vQ({},e,{options:{xField:s,yField:o,seriesField:"mKey",isStack:!0,label:fN(h,"measure"),interval:{color:fN(l,"measure"),style:fN(r,"measure"),size:fN(u,"measure")}}})),LZ(vQ({},e,{options:{xField:s,yField:i,seriesField:"tKey",label:fN(h,"target"),point:{color:fN(l,"target"),style:fN(r,"target"),size:oM(fN(u,"target"))?function(e){return fN(u,"target")(e)/2}:fN(u,"target")/2,shape:"horizontal"===c?"line":"hyphen"}}})),"horizontal"===c&&t.coordinate().transpose(),QI(QI({},e),{ext:{data:{min:d,max:f}}})}function K2(e){var t,n,r=e.options,i=e.ext,a=r.xAxis,o=r.yAxis,s=r.targetField,l=r.rangeField,c=r.measureField,u=r.xField,h=i.data;return ZK(kZ(((t={})[u]=a,t[c]=o,t),((n={})[c]={min:null==h?void 0:h.min,max:null==h?void 0:h.max,sync:!0},n[s]={sync:""+c},n[l]={sync:""+c},n)))(e)}function Q2(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.measureField,s=n.rangeField,l=n.targetField;return t.axis(""+s,!1),t.axis(""+l,!1),!1===r?t.axis(""+a,!1):t.axis(""+a,r),!1===i?t.axis(""+o,!1):t.axis(""+o,i),e}function Z2(e){var t=e.chart,n=e.options.legend;return t.removeInteraction("legend-filter"),t.legend(n),t.legend("rKey",!1),t.legend("mKey",!1),t.legend("tKey",!1),e}function J2(e){var t=e.chart,n=e.options,r=n.label,i=n.measureField,a=n.targetField,o=n.rangeField,s=t.geometries,l=s[0],c=s[1],u=s[2];return fN(r,"range")?l.label(""+o,QI({layout:[{type:"limit-in-plot"}]},hQ(r.range))):l.label(!1),fN(r,"measure")?c.label(""+i,QI({layout:[{type:"limit-in-plot"}]},hQ(r.measure))):c.label(!1),fN(r,"target")?u.label(""+a,QI({layout:[{type:"limit-in-plot"}]},hQ(r.target))):u.label(!1),e}function e4(e){ZK(X2,K2,Q2,Z2,CZ,J2,EZ,xZ,bZ)(e)}bY("interval","liquid-fill-gauge",{draw:function(e,t){var n=e.customInfo,r=n,i=r.radius,a=r.shape,o=r.background,s=n.outline,l=n.wave,c=s.border,u=s.distance,h=l.count,p=l.length,d=CM(e.points,(function(e,t){return Math.min(e,t.x)}),1/0),f=this.parsePoint({x:.5,y:.5}),m=this.parsePoint({x:d,y:.5}),g=f.x-m.x,y=Math.min(g,m.y*i),v=function(e){var t=QI({opacity:1},e.style);return e.color&&!t.fill&&(t.fill=e.color),t}(e),E=function(e){var t=tN({},{fill:"#fff",fillOpacity:0,lineWidth:4},e.style);return e.color&&!t.stroke&&(t.stroke=e.color),RM(e.opacity)&&(t.opacity=t.strokeOpacity=e.opacity),t}(tN({},e,s)),x=y-c/2,b={pin:G2,circle:V2,diamond:Y2,triangle:U2,rect:q2},C=("function"==typeof a?a:b[a]||b.circle)(f.x,f.y,2*x,2*x),S=t.addGroup({name:"waves"}),w=S.setClip({type:"path",attrs:{path:C}});return function(e,t,n,r,i,a,o,s,l){for(var c=i.fill,u=i.opacity,h=o.getBBox(),p=h.maxX-h.minX,d=h.maxY-h.minY,f=0;f<r;f++){var m=r<=1?0:f/(r-1),g=a.addShape("path",{name:"waterwave-path",attrs:{path:j2(s,h.minY+d*n,l,0,p/32,e,t),fill:c,opacity:z2(.2,.9,m)*u}});try{var y=DJ([["t",l,0]]);g.stopAnimate(),g.animate({matrix:y},{duration:z2(2500,5e3,m),repeat:!0})}catch(uu){console.warn("off-screen group animate error!")}}}(f.x,f.y,1-e.points[1].y,h,v,S,w,2*y,p),t.addShape("path",{name:"distance",attrs:{path:C,fill:"transparent",lineWidth:c+2*u,stroke:"transparent"===o?"#fff":o}}),t.addShape("path",{name:"wrap",attrs:tN(E,{path:C,fill:"transparent",lineWidth:c})}),t}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="liquid",t}KI(t,e),t.getDefaultOptions=function(){return $2},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.chart.emit(NN.BEFORE_CHANGE_DATA,qV.fromData(this.chart,NN.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(L2(e)),D2({chart:this.chart,options:this.options},!0),this.chart.emit(NN.AFTER_CHANGE_DATA,qV.fromData(this.chart,NN.AFTER_CHANGE_DATA,null))},t.prototype.getSchemaAdaptor=function(){return B2}}(nZ);var t4=vQ({},nZ.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bullet",t}KI(t,e),t.getDefaultOptions=function(){return t4},t.prototype.changeData=function(e){this.updateOption({data:e});var t=W2(this.options),n=t.min,r=t.max,i=t.ds;K2({options:this.options,ext:{data:{min:n,max:r}},chart:this.chart}),this.chart.changeData(i)},t.prototype.getSchemaAdaptor=function(){return e4},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(nZ);function n4(e,t){var n=e.field,r=e.fields;if(wM(n))return n;if(lM(n))return console.warn("Invalid field: it must be a string!"),n[0];if(console.warn("Invalid field: it must be a string! will try to get fields instead."),wM(r))return r;if(lM(r)&&r.length)return r[0];if(t)return t;throw new TypeError("Invalid field: it must be a string!")}function r4(e){var t,n,r=[];e&&e.each?e.each((function(e){var i,a;e.parent!==t?(t=e.parent,n=0):n+=1;var o=rM(((null===(i=e.ancestors)||void 0===i?void 0:i.call(e))||[]).map((function(e){return r.find((function(t){return t.name===e.name}))||e})),(function(t){var n=t.depth;return n>0&&n<e.depth}));e.nodeAncestor=o,e.childNodeCount=(null===(a=e.children)||void 0===a?void 0:a.length)||0,e.nodeIndex=n,r.push(e)})):e&&e.eachNode&&e.eachNode((function(e){r.push(e)}));return r}var i4=["path","nodeIndex","nodeAncestor","childNodeCount","name","depth","height"],a4=vQ({},nZ.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),o4={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},s4=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=o4,t}return KI(t,e),t.prototype.click=function(){var e=fN(this.context,["event","data","data"]);if(!e)return!1;this.drill(e),this.drawBreadCrumb()},t.prototype.resetPosition=function(){if(this.breadCrumbGroup){var e=this.context.view.getCoordinate(),t=this.breadCrumbGroup,n=t.getBBox(),r=this.getButtonCfg().position,i={x:e.start.x,y:e.end.y-(n.height+10)};e.isPolar&&(i={x:0,y:0}),"bottom-left"===r&&(i={x:e.start.x,y:e.start.y});var a=nU.transform(null,[["t",i.x+0,i.y+n.height+5]]);t.setMatrix(a)}},t.prototype.back=function(){SN(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},t.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},t.prototype.drill=function(e){var t=this.context.view,n=fN(t,["interactions","drill-down","cfg","transformData"],(function(e){return e})),r=n(QI({data:e.data},e["hierarchy-data-transform-params"]));t.changeData(r);for(var i=[],a=e;a;){var o=a.data;i.unshift({id:o.name+"_"+a.height+"_"+a.depth,name:o.name,children:n(QI({data:o},e["hierarchy-data-transform-params"]))}),a=a.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(i)},t.prototype.backTo=function(e){if(e&&!(e.length<=0)){var t=this.context.view,n=OM(e).children;t.changeData(n),e.length>1?(this.historyCache=e,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},t.prototype.getButtonCfg=function(){var e=this.context.view,t=fN(e,["interactions","drill-down","cfg","drillDownConfig"]);return vQ(this.breadCrumbCfg,null==t?void 0:t.breadCrumb,this.cfg)},t.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},t.prototype.drawBreadCrumbGroup=function(){var e=this,t=this.getButtonCfg(),n=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:"drilldown-bread-crumb"});var r=0;n.forEach((function(i,a){var o=e.breadCrumbGroup.addShape({type:"text",id:i.id,name:"drilldown-bread-crumb_"+i.name+"_text",attrs:QI(QI({text:0!==a||sM(t.rootText)?i.name:t.rootText},t.textStyle),{x:r,y:0})}),s=o.getBBox();if(r+=s.width+4,o.on("click",(function(t){var r,i=t.target.get("id");if(i!==(null===(r=OM(n))||void 0===r?void 0:r.id)){var a=n.slice(0,n.findIndex((function(e){return e.id===i}))+1);e.backTo(a)}})),o.on("mouseenter",(function(e){var r;e.target.get("id")!==(null===(r=OM(n))||void 0===r?void 0:r.id)?o.attr(t.activeTextStyle):o.attr({cursor:"default"})})),o.on("mouseleave",(function(){o.attr(t.textStyle)})),a<n.length-1){var l=e.breadCrumbGroup.addShape({type:"text",name:t.name+"_"+i.name+"_divider",attrs:QI(QI({text:t.dividerText},t.textStyle),{x:r,y:0})}).getBBox();r+=l.width+4}}))},t.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},t.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),e.prototype.destroy.call(this)},t}(_G);function l4(e,t){return e.parent===t.parent?1:2}function c4(e,t){return e+t.x}function u4(e,t){return Math.max(e,t.y)}function h4(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function p4(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=f4)):void 0===t&&(t=d4);for(var n,r,i,a,o,s=new y4(e),l=[s];n=l.pop();)if((i=t(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)l.push(r=i[a]=new y4(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(g4)}function d4(e){return e.children}function f4(e){return Array.isArray(e)?e[1]:null}function m4(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function g4(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function y4(e){this.data=e,this.depth=this.height=0,this.parent=null}function v4(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,a=[];r<i;)t=e[r],n&&b4(n,t)?++r:(n=S4(a=E4(a,t)),r=0);return n}function E4(e,t){var n,r;if(C4(t,e))return[t];for(n=0;n<e.length;++n)if(x4(t,e[n])&&C4(w4(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(x4(w4(e[n],e[r]),t)&&x4(w4(e[n],t),e[r])&&x4(w4(e[r],t),e[n])&&C4(T4(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function x4(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function b4(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function C4(e,t){for(var n=0;n<t.length;++n)if(!b4(e,t[n]))return!1;return!0}function S4(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return w4(e[0],e[1]);case 3:return T4(e[0],e[1],e[2])}var t}function w4(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,s=t.r,l=a-n,c=o-r,u=s-i,h=Math.sqrt(l*l+c*c);return{x:(n+a+l/h*u)/2,y:(r+o+c/h*u)/2,r:(h+i+s)/2}}function T4(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,s=t.y,l=t.r,c=n.x,u=n.y,h=n.r,p=r-o,d=r-c,f=i-s,m=i-u,g=l-a,y=h-a,v=r*r+i*i-a*a,E=v-o*o-s*s+l*l,x=v-c*c-u*u+h*h,b=d*f-p*m,C=(f*x-m*E)/(2*b)-r,S=(m*g-f*y)/b,w=(d*E-p*x)/(2*b)-i,T=(p*y-d*g)/b,k=S*S+T*T-1,_=2*(a+C*S+w*T),O=C*C+w*w-a*a,A=-(k?(_+Math.sqrt(_*_-4*k*O))/(2*k):O/_);return{x:r+C+S*A,y:i+w+T*A,r:A}}function k4(e,t,n){var r,i,a,o,s=e.x-t.x,l=e.y-t.y,c=s*s+l*l;c?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*s-a*l,n.y=e.y-r*l+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*s-a*l,n.y=t.y+r*l+a*s)):(n.x=t.x+n.r,n.y=t.y)}function _4(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function O4(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function A4(e){this._=e,this.next=null,this.previous=null}function I4(e){if(!(a=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,a,o,s,l,c,u,h,p;if((n=e[0]).x=0,n.y=0,!(a>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;k4(r,n,i=e[2]),n=new A4(n),r=new A4(r),i=new A4(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<a;++l){k4(n._,r._,i=e[l]),i=new A4(i),c=r.next,u=n.previous,h=r._.r,p=n._.r;do{if(h<=p){if(_4(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}h+=c._.r,c=c.next}else{if(_4(u._,i._)){(n=u).next=r,r.previous=n,--l;continue e}p+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=O4(n);(i=i.next)!==r;)(s=O4(i))<o&&(n=i,o=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=v4(n),l=0;l<a;++l)(n=e[l]).x-=i.x,n.y-=i.y;return i.r}function M4(e){return null==e?null:N4(e)}function N4(e){if("function"!=typeof e)throw new Error;return e}function P4(){return 0}function F4(e){return function(){return e}}function L4(e){return Math.sqrt(e.value)}function R4(){var e=null,t=1,n=1,r=P4;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(D4(e)).eachAfter(B4(r,.5)).eachBefore($4(1)):i.eachBefore(D4(L4)).eachAfter(B4(P4,1)).eachAfter(B4(r,i.r/Math.min(t,n))).eachBefore($4(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=M4(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:F4(+e),i):r},i}function D4(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function B4(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,s=e(n)*t||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=I4(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function $4(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function z4(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function H4(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,c=e.value&&(r-t)/e.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}function j4(){var e=1,t=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(function(e,t){return function(r){r.children&&H4(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(t,a)),r&&i.eachBefore(z4),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}y4.prototype=p4.prototype={constructor:y4,count:function(){return this.eachAfter(h4)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,a=this,o=[a],s=[],l=-1;a=o.pop();)if(s.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=s.pop();)e.call(t,a,++l,this);return this},eachBefore:function(e,t){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(e.call(t,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return p4(this).eachBefore(m4)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,a=[i];do{for(e=a.reverse(),a=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n])}while(a.length)}};var G4={depth:-1},V4={};function Y4(e){return e.id}function U4(e){return e.parentId}function q4(e,t){return e.parent===t.parent?1:2}function W4(e){var t=e.children;return t?t[0]:e.t}function X4(e){var t=e.children;return t?t[t.length-1]:e.t}function K4(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Q4(e,t,n){return e.a.parent===t.parent?e.a:n}function Z4(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function J4(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,c=e.value&&(i-n)/e.value;++s<l;)(a=o[s]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}Z4.prototype=Object.create(y4.prototype);var e8=(1+Math.sqrt(5))/2;function t8(e,t,n,r,i,a){for(var o,s,l,c,u,h,p,d,f,m,g,y=[],v=t.children,E=0,x=0,b=v.length,C=t.value;E<b;){l=i-n,c=a-r;do{u=v[x++].value}while(!u&&x<b);for(h=p=u,g=u*u*(m=Math.max(c/l,l/c)/(C*e)),f=Math.max(p/g,g/h);x<b;++x){if(u+=s=v[x].value,s<h&&(h=s),s>p&&(p=s),g=u*u*m,(d=Math.max(p/g,g/h))>f){u-=s;break}f=d}y.push(o={value:u,dice:l<c,children:v.slice(E,x)}),o.dice?H4(o,n,r,i,C?r+=c*u/C:a):J4(o,n,r,C?n+=l*u/C:i,a),C-=u,E=x}return y}var n8=function e(t){function n(e,n,r,i,a){t8(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(e8);function r8(){var e=n8,t=!1,n=1,r=1,i=[0],a=P4,o=P4,s=P4,l=P4,c=P4;function u(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(h),i=[0],t&&e.eachBefore(z4),e}function h(t){var n=i[t.depth],r=t.x0+n,u=t.y0+n,h=t.x1-n,p=t.y1-n;h<r&&(r=h=(r+h)/2),p<u&&(u=p=(u+p)/2),t.x0=r,t.y0=u,t.x1=h,t.y1=p,t.children&&(n=i[t.depth+1]=a(t)/2,r+=c(t)-n,u+=o(t)-n,(h-=s(t)-n)<r&&(r=h=(r+h)/2),(p-=l(t)-n)<u&&(u=p=(u+p)/2),e(t,r,u,h,p))}return u.round=function(e){return arguments.length?(t=!!e,u):t},u.size=function(e){return arguments.length?(n=+e[0],r=+e[1],u):[n,r]},u.tile=function(t){return arguments.length?(e=N4(t),u):e},u.padding=function(e){return arguments.length?u.paddingInner(e).paddingOuter(e):u.paddingInner()},u.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:F4(+e),u):a},u.paddingOuter=function(e){return arguments.length?u.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):u.paddingTop()},u.paddingTop=function(e){return arguments.length?(o="function"==typeof e?e:F4(+e),u):o},u.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:F4(+e),u):s},u.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:F4(+e),u):l},u.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:F4(+e),u):c},u}var i8=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,s,l,c,u,h=-1,p=o.length,d=e.value;++h<p;){for(l=(s=o[h]).children,c=s.value=0,u=l.length;c<u;++c)s.value+=l[c].value;s.dice?H4(s,n,r,i,d?r+=(a-r)*s.value/d:a):J4(s,n,r,d?n+=(i-n)*s.value/d:i,a),d-=s.value}else e._squarify=o=t8(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(e8),a8=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",cluster:function(){var e=l4,t=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(c4,0)/e.length}(n),t.y=function(e){return 1+e.reduce(u4,0)}(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),l=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),c=s.x-e(s,l)/2,u=l.x+e(l,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-c)/(u-c)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},hierarchy:p4,pack:R4,packSiblings:function(e){return I4(e),e},packEnclose:v4,partition:j4,stratify:function(){var e=Y4,t=U4;function n(n){var r,i,a,o,s,l,c,u=Array.from(n),h=u.length,p=new Map;for(i=0;i<h;++i)r=u[i],s=u[i]=new y4(r),null!=(l=e(r,i,n))&&(l+="")&&(c=s.id=l,p.set(c,p.has(c)?V4:s)),null!=(l=t(r,i,n))&&(l+="")&&(s.parent=l);for(i=0;i<h;++i)if(l=(s=u[i]).parent){if(!(o=p.get(l)))throw new Error("missing: "+l);if(o===V4)throw new Error("ambiguous: "+l);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=G4,a.eachBefore((function(e){e.depth=e.parent.depth+1,--h})).eachBefore(g4),a.parent=null,h>0)throw new Error("cycle");return a}return n.id=function(t){return arguments.length?(e=N4(t),n):e},n.parentId=function(e){return arguments.length?(t=N4(e),n):t},n},tree:function(){var e=q4,t=1,n=1,r=null;function i(i){var l=function(e){for(var t,n,r,i,a,o=new Z4(e,0),s=[o];t=s.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=t.children[i]=new Z4(r[i],i)),n.parent=t;return(o.parent=new Z4(null,0)).children=[o],o}(i);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),r)i.eachBefore(s);else{var c=i,u=i,h=i;i.eachBefore((function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>h.depth&&(h=e)}));var p=c===u?1:e(c,u)/2,d=p-c.x,f=t/(u.x+p+d),m=n/(h.depth||1);i.eachBefore((function(e){e.x=(e.x+d)*f,e.y=e.depth*m}))}return i}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,a=t,o=t,s=n,l=a.parent.children[0],c=a.m,u=o.m,h=s.m,p=l.m;s=X4(s),a=W4(a),s&&a;)l=W4(l),(o=X4(o)).a=t,(i=s.z+h-a.z-c+e(s._,a._))>0&&(K4(Q4(s,t,r),t,i),c+=i,u+=i),h+=s.m,c+=a.m,p+=l.m,u+=o.m;s&&!X4(o)&&(o.t=s,o.m+=h-u),a&&!W4(l)&&(l.t=a,l.m+=c-p,r=t)}return r}(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},treemap:r8,treemapBinary:function(e,t,n,r,i){var a,o,s=e.children,l=s.length,c=new Array(l+1);for(c[0]=o=a=0;a<l;++a)c[a+1]=o+=s[a].value;!function e(t,n,r,i,a,o,l){if(t>=n-1){var u=s[t];return u.x0=i,u.y0=a,u.x1=o,void(u.y1=l)}var h=c[t],p=r/2+h,d=t+1,f=n-1;for(;d<f;){var m=d+f>>>1;c[m]<p?d=m+1:f=m}p-c[d-1]<c[d]-p&&t+1<d&&--d;var g=c[d]-h,y=r-g;if(o-i>l-a){var v=r?(i*y+o*g)/r:o;e(t,d,g,i,a,v,l),e(d,n,y,v,a,o,l)}else{var E=r?(a*y+l*g)/r:l;e(t,d,g,i,a,o,E),e(d,n,y,i,E,o,l)}}(0,l,e.value,t,n,r,i)},treemapDice:H4,treemapSlice:J4,treemapSliceDice:function(e,t,n,r,i){(1&e.depth?J4:H4)(e,t,n,r,i)},treemapSquarify:n8,treemapResquarify:i8}),o8={field:"value",size:[1,1],round:!1,padding:0,sort:function(e,t){return t.value-e.value},as:["x","y"],ignoreParentValue:!0};function s8(e,t){var n,r=(t=tN({},o8,t)).as;if(!lM(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=n4(t)}catch(uu){console.warn(uu)}var i,a=(i=e,j4().size(t.size).round(t.round).padding(t.padding)(p4(i).sum((function(e){return SN(e.children)?t.ignoreParentValue?0:e[n]-CM(e.children,(function(e,t){return e+t[n]}),0):e[n]})).sort(t.sort))),o=r[0],s=r[1];return a.each((function(e){var t,n;e[o]=[e.x0,e.x1,e.x1,e.x0],e[s]=[e.y1,e.y1,e.y0,e.y0],e.name=e.name||(null===(t=e.data)||void 0===t?void 0:t.name)||(null===(n=e.data)||void 0===n?void 0:n.label),e.data.name=e.name,["x0","x1","y0","y1"].forEach((function(t){-1===r.indexOf(t)&&delete e[t]}))})),r4(a)}var l8,c8={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(e,t){return t.value-e.value},ratio:.5*(1+Math.sqrt(5))};function u8(e,t){var n,r=(t=tN({},c8,t)).as;if(!lM(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=n4(t)}catch(uu){console.warn(uu)}var i,a,o,s=(i=t.tile,a=t.ratio,"treemapSquarify"===i?a8[i].ratio(a):a8[i]),l=(o=e,r8().tile(s).size(t.size).round(t.round).padding(t.padding).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(p4(o).sum((function(e){return t.ignoreParentValue&&e.children?0:e[n]})).sort(t.sort))),c=r[0],u=r[1];return l.each((function(e){e[c]=[e.x0,e.x1,e.x1,e.x0],e[u]=[e.y1,e.y1,e.y0,e.y0],["x0","x1","y0","y1"].forEach((function(t){-1===r.indexOf(t)&&delete e[t]}))})),r4(l)}function h8(e){var t=e.data,n=e.colorField,r=e.rawFields,i=e.hierarchyConfig,a=void 0===i?{}:i,o=a.activeDepth,s={partition:s8,treemap:u8},l=e.seriesField,c=e.type||"partition",u=s[c](t,QI(QI({field:l||"value"},vN(a,["activeDepth"])),{type:"hierarchy."+c,as:["x","y"]})),h=[];return u.forEach((function(e){var t,i,s,c,u,p;if(0===e.depth)return null;if(o>0&&e.depth>o)return null;for(var d=e.data.name,f=QI({},e);f.depth>1;)d=(null===(i=f.parent.data)||void 0===i?void 0:i.name)+" / "+d,f=f.parent;var m=QI(QI(QI({},JK(e.data,JI(r||[],[a.field]))),((t={}).path=d,t["ancestor-node"]=f.data.name,t)),e);l&&(m[l]=e.data[l]||(null===(c=null===(s=e.parent)||void 0===s?void 0:s.data)||void 0===c?void 0:c[l])),n&&(m[n]=e.data[n]||(null===(p=null===(u=e.parent)||void 0===u?void 0:u.data)||void 0===p?void 0:p[n])),m.ext=a,m["hierarchy-data-transform-params"]={hierarchyConfig:a,colorField:n,rawFields:r},h.push(m)})),h}function p8(e){var t,n=e.chart,r=e.options,i=r.color,a=r.colorField,o=void 0===a?"ancestor-node":a,s=r.sunburstStyle,l=r.rawFields,c=void 0===l?[]:l,u=h8(r);return n.data(u),s&&(t=function(e){return vQ({},{fillOpacity:Math.pow(.85,e.depth)},oM(s)?s(e):s)}),DZ(vQ({},e,{options:{xField:"x",yField:"y",seriesField:o,rawFields:TM(JI(i4,c)),polygon:{color:i,style:t}}})),e}function d8(e){return e.chart.axis(!1),e}function f8(e){var t=e.chart,n=e.options.label,r=iQ(t,"polygon");if(n){var i=n.fields,a=void 0===i?["name"]:i,o=n.callback,s=ZI(n,["fields","callback"]);r.label({fields:a,callback:o,cfg:hQ(s)})}else r.label(!1);return e}function m8(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius,a=n.reflect,o=t.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),e}function g8(e){var t,n=e.options,r=n.hierarchyConfig,i=n.meta;return ZK(kZ({},((t={}).value=fN(i,fN(r,["field"],"value")),t)))(e)}function y8(e){var t=e.chart,n=e.options.tooltip;if(!1===n)t.tooltip(!1);else{var r=n;fN(n,"fields")||(r=vQ({},{customItems:function(e){return e.map((function(e){var n=fN(t.getOptions(),"scales"),r=fN(n,["path","formatter"],(function(e){return e})),i=fN(n,["value","formatter"],(function(e){return e}));return QI(QI({},e),{name:r(e.data.path),value:i(e.data.value)})}))}},r)),t.tooltip(r)}return e}function v8(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return(null==t?void 0:t.enabled)?vQ({},e,{interactions:JI(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:h8}}])}):e}function E8(e){var t=e.chart,n=e.options,r=n.drilldown;return xZ({chart:t,options:v8(n)}),(null==r?void 0:r.enabled)&&(t.appendPadding=IQ(t.appendPadding,fN(r,["breadCrumb","position"]))),e}function x8(e){return ZK(CZ,yZ("sunburstStyle"),p8,d8,g8,vZ,m8,y8,f8,E8,bZ,_Z())(e)}function b8(e){var t=fN(e,["event","data","data"],{});return lM(t.children)&&t.children.length>0}function C8(e){var t=e.view.getCoordinate(),n=t.innerRadius;if(n){var r=e.event,i=r.x,a=r.y,o=t.center,s=o.x,l=o.y,c=t.getRadius()*n;return Math.sqrt(Math.pow(s-i,2)+Math.pow(l-a,2))<c}return!1}MG("drill-down-action",s4),yV("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:b8},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:C8}],start:[{trigger:"element:click",isEnable:b8,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:C8,action:["drill-down-action:back"]}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="sunburst",t}KI(t,e),t.getDefaultOptions=function(){return a4},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return x8},t.SUNBURST_ANCESTOR_FIELD="ancestor-node",t.SUNBURST_PATH_FIELD="path",t.NODE_ANCESTORS_FIELD="nodeAncestor"}(nZ);var S8={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(l8={},l8.range={sync:"v"},l8.percent={sync:"v",tickCount:5,tickInterval:.2},l8),animation:!1};function w8(e){var t;return[(t={},t.percent=FM(e,0,1),t)]}function T8(e,t){var n=fN(t,["ticks"],[]);return function(e,t){return e.map((function(n,r){var i;return(i={}).range=n-(e[r-1]||0),i.type=""+r,i.percent=t,i})).filter((function(e){return!!e.range}))}(SN(n)?n:[0,FM(e,0,1),1],e)}function k8(e){var t=e.chart,n=e.options,r=n.percent,i=n.range,a=n.radius,o=n.innerRadius,s=n.startAngle,l=n.endAngle,c=n.axis,u=n.indicator,h=n.gaugeStyle,p=n.type,d=n.meter,f=i.color,m=i.width;if(u){var g=w8(r),y=t.createView({id:"indicator-view"});y.data(g),y.point().position("percent*1").shape(u.shape||"gauge-indicator").customInfo({defaultColor:t.getTheme().defaultColor,indicator:u}),y.coordinate("polar",{startAngle:s,endAngle:l,radius:o*a}),y.axis("percent",c),y.scale("percent",JK(c,rZ))}var v=T8(r,n.range),E=t.createView({id:"range-view"});return E.data(v),RZ({chart:E,options:{xField:"1",yField:"range",seriesField:"type",rawFields:["percent"],isStack:!0,interval:{color:wM(f)?[f,"#f0f0f0"]:f,style:h,shape:"meter"===p?"meter-gauge":null},args:{zIndexReversed:!0},minColumnWidth:m,maxColumnWidth:m}}).ext.geometry.customInfo({meter:d}),E.coordinate("polar",{innerRadius:o,radius:a,startAngle:s,endAngle:l}).transpose(),e}function _8(e){var t;return ZK(kZ(((t={range:{min:0,max:1,maxLimit:1,minLimit:0}}).percent={},t)))(e)}function O8(e,t){var n=e.chart,r=e.options,i=r.statistic,a=r.percent;if(n.getController("annotation").clear(!0),i){var o=i.content,s=void 0;o&&(s=vQ({},{content:(100*a).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),function(e,t,n){var r=t.statistic;[r.title,r.content].forEach((function(t){if(t){var r=oM(t.style)?t.style(n):t.style;e.annotation().html(QI({position:["50%","100%"],html:function(e,i){var a=i.getCoordinate(),o=i.views[0].getCoordinate(),s=o.getCenter(),l=o.getRadius(),c=Math.max(Math.sin(o.startAngle),Math.sin(o.endAngle))*l,u=s.y+c-a.y.start-parseFloat(fN(r,"fontSize",0)),h=a.getRadius()*a.innerRadius*2;bQ(e,QI({width:h+"px",transform:"translate(-50%, "+u+"px)"},xQ(r)));var p=i.getData();if(t.customHtml)return t.customHtml(e,i,n,p);var d=t.content;return t.formatter&&(d=t.formatter(n,p)),d?wM(d)?d:""+d:"<div></div>"}},JK(t,["offsetX","offsetY","rotate","style","formatter"])))}}))}(n,{statistic:QI(QI({},i),{content:s})},{percent:a})}return t&&n.render(!0),e}function A8(e){var t=e.chart;return t.legend(!1),t.tooltip(!1),e}function I8(e){return ZK(CZ,bZ,k8,_8,O8,xZ,_Z(),A8)(e)}bY("point","gauge-indicator",{draw:function(e,t){var n=e.customInfo,r=n.indicator,i=n.defaultColor,a=r,o=a.pointer,s=a.pin,l=t.addGroup(),c=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:QI({x1:c.x,y1:c.y,x2:e.x,y2:e.y,stroke:i},o.style)}),s&&l.addShape("circle",{name:"pin",attrs:QI({x:c.x,y:c.y,stroke:i},s.style)}),l}}),bY("interval","meter-gauge",{draw:function(e,t){var n=e.customInfo.meter,r=void 0===n?{}:n,i=r.steps,a=void 0===i?50:i,o=r.stepRatio,s=void 0===o?.5:o;a=a<1?1:a,s=FM(s,0,1);var l=this.coordinate,c=l.startAngle,u=l.endAngle,h=0;s>0&&s<1&&(h=(u-c)/a/(s/(1-s)+1-1/a));for(var p=h/(1-s)*s,d=t.addGroup(),f=this.coordinate.getCenter(),m=this.coordinate.getRadius(),g=nU.getAngle(e,this.coordinate),y=g.startAngle,v=g.endAngle,E=y;E<v;){var x=void 0,b=(E-c)%(p+h);x=b<p?E+(p-b):(E+=p+h-b)+p;var C=nU.getSectorPath(f.x,f.y,m,E,Math.min(x,v),m*this.coordinate.innerRadius);d.addShape("path",{name:"meter-gauge",attrs:{path:C,fill:e.color,stroke:e.color,lineWidth:.5}}),E=x+h}return d}});var M8=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="gauge",t}return KI(t,e),t.getDefaultOptions=function(){return S8},t.prototype.changeData=function(e){this.chart.emit(NN.BEFORE_CHANGE_DATA,qV.fromData(this.chart,NN.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e});var t=this.chart.views.find((function(e){return"indicator-view"===e.id}));t&&t.data(w8(e));var n=this.chart.views.find((function(e){return"range-view"===e.id}));n&&n.data(T8(e,this.options.range)),O8({chart:this.chart,options:this.options},!0),this.chart.emit(NN.AFTER_CHANGE_DATA,qV.fromData(this.chart,NN.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return I8},t}(nZ),N8="$$yField$$",P8={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function F8(e,t,n,r){return function(e,t,n,r,i){var a,o=[];if(CM(e,(function(e,t){var i;nQ(qK.WARN,RM(t[n]),t[n]+" is not a valid number");var a=ZM(t[n])?null:t[n];return o.push(QI(QI({},t),((i={})[r]=[e,e+a],i))),e+a}),0),o.length&&i){var s=fN(o,[[e.length-1],r,[1]]);o.push(((a={})[t]=i.label,a[n]=s,a[r]=[0,s],a))}return o}(e,t,n,N8,r).map((function(t,n){var r;return cM(t)?QI(QI({},t),((r={}).$$absoluteField$$=t.$$yField$$[1],r.$$diffField$$=t.$$yField$$[1]-t.$$yField$$[0],r.$$isTotal$$=n===e.length,r)):t}))}function L8(e){var t=e.options,n=t.locale,r=t.total,i=LQ(n).get(["waterfall","total"]);return r&&"string"!=typeof r.label&&i&&(e.options.total.label=i),e}function R8(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.total,s=n.leaderLine,l=n.columnWidthRatio,c=n.waterfallStyle,u=n.risingFill,h=n.fallingFill,p=n.color;return t.data(F8(r,i,a,o)),RZ(vQ({},e,{options:{xField:i,yField:N8,seriesField:i,rawFields:[a,"$$diffField$$","$$isTotal$$",N8],widthRatio:l,interval:{style:c,shape:"waterfall",color:p||function(e){return fN(e,["$$isTotal$$"])?fN(o,["style","fill"],""):fN(e,[N8,1])-fN(e,[N8,0])>0?u:h}}}})).ext.geometry.customInfo({leaderLine:s}),e}function D8(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.meta,c=vQ({},{alias:s},fN(l,s));return ZK(kZ(((t={})[o]=i,t[s]=a,t.$$yField$$=a,t),vQ({},l,((n={}).$$yField$$=c,n.$$diffField$$=c,n.$$absoluteField$$=c,n))))(e)}function B8(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?(t.axis(o,!1),t.axis(N8,!1)):(t.axis(o,i),t.axis(N8,i)),e}function $8(e){var t=e.chart,n=e.options,r=n.legend,i=n.total,a=n.risingFill,o=n.fallingFill,s=LQ(n.locale);if(!1===r)t.legend(!1);else{var l=[{name:s.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:s.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&l.push({name:i.label||"",value:"total",marker:{symbol:"square",style:vQ({},{r:5},fN(i,"style"))}}),t.legend(vQ({},{custom:!0,position:"top",items:l},r)),t.removeInteraction("legend-filter")}return e}function z8(e){var t=e.chart,n=e.options,r=n.label,i=n.labelMode,a=n.xField,o=iQ(t,"interval");if(r){var s=r.callback,l=ZI(r,["callback"]);o.label({fields:"absolute"===i?["$$absoluteField$$",a]:["$$diffField$$",a],callback:s,cfg:hQ(l)})}else o.label(!1);return e}function H8(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.xField,a=n.yField;if(!1!==r){t.tooltip(QI({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=t.geometries[0];(null==r?void 0:r.formatter)?o.tooltip(i+"*"+a,r.formatter):o.tooltip(a)}else t.tooltip(!1);return e}function j8(e){return ZK(L8,CZ,R8,D8,B8,$8,H8,z8,SZ,xZ,bZ,_Z())(e)}function G8(e,t,n){var r=n.map((function(e){return e[t]})).filter((function(e){return void 0!==e})),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(e)%360;return a?360*i/a:i}function V8(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.color,a=n.tooltip,o=n.colorField,s=n.type,l=n.xField,c=n.yField,u=OQ(n.data,c);return t.data(u),RZ(vQ({},e,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:"line"===s?"line":"intervel"},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}})),"line"===s&&LZ({chart:t,options:{xField:l,yField:c,seriesField:o,point:{shape:"circle",color:i}}}),e}function Y8(e){var t,n=e.options,r=n.yField,i=n.xField,a=n.data,o=n.isStack,s=n.isGroup,l=n.colorField,c=n.maxAngle,u=OQ(o&&!s&&l?function(e,t,n){var r=[];return e.forEach((function(e){var i=r.find((function(n){return n[t]===e[t]}));i?i[n]+=e[n]||null:r.push(QI({},e))})),r}(a,i,r):a,r);return ZK(kZ(((t={})[r]={min:0,max:G8(c,r,u)},t)))(e)}function U8(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),e}function q8(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis;return t.axis(r,i),e}function W8(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=iQ(t,"interval");if(r){var o=r.callback,s=ZI(r,["callback"]);a.label({fields:[i],callback:o,cfg:QI(QI({},hQ(s)),{type:"polar"})})}else a.label(!1);return e}function X8(e){return ZK(yZ("barStyle"),V8,Y8,q8,U8,xZ,bZ,CZ,EZ,vZ,_Z(),W8)(e)}bY("interval","waterfall",{draw:function(e,t){var n=e.customInfo,r=e.points,i=e.nextPoints,a=t.addGroup(),o=this.parsePath(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=0===n?"M":"L";t.push([i,r.x,r.y])}}var a=e[0];return t.push(["L",a.x,a.y]),t.push(["z"]),t}(r)),s=function(e){return vQ({},e.defaultStyle,e.style,{fill:e.color})}(e);a.addShape("path",{attrs:QI(QI({},s),{path:o})});var l=fN(n,"leaderLine");if(l&&i){var c=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(c[1]=["L",i[1].x,i[1].y]),c=this.parsePath(c),a.addShape("path",{attrs:QI({path:c},l.style||{})})}return a}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="waterfall",t}KI(t,e),t.getDefaultOptions=function(){return P8},t.prototype.changeData=function(e){var t=this.options,n=t.xField,r=t.yField,i=t.total;this.updateOption({data:e}),this.chart.changeData(F8(e,n,r,i))},t.prototype.getSchemaAdaptor=function(){return j8},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(nZ);var K8=vQ({},nZ.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="radial-bar",t}KI(t,e),t.getDefaultOptions=function(){return K8},t.prototype.changeData=function(e){this.updateOption({data:e}),Y8({chart:this.chart,options:this.options}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return X8}}(nZ);function Q8(e,t,n,r,i){var a=[];t.forEach((function(t){r.forEach((function(r){var i,o=((i={})[e]=r[e],i[n]=t,i[t]=r[t],i);a.push(o)}))}));var o=Object.values(NM(a,n)),s=o[0],l=void 0===s?[]:s,c=o[1],u=void 0===c?[]:c;return i?[l.reverse(),u.reverse()]:[l,u]}function Z8(e){return"vertical"!==e}function J8(e,t,n){var r=t[0],i=t[1],a=r.autoPadding,o=i.autoPadding,s=e.__axisPosition,l=s.layout,c=s.position;if(Z8(l)&&"top"===c&&(r.autoPadding=n.instance(a.top,0,a.bottom,a.left),i.autoPadding=n.instance(o.top,a.left,o.bottom,0)),Z8(l)&&"bottom"===c&&(r.autoPadding=n.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=n.instance(o.top,o.right,o.bottom,a.right/2+5)),!Z8(l)&&"bottom"===c){var u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,a.bottom/2+5,u),i.autoPadding=n.instance(a.bottom/2+5,o.right,o.bottom,u)}if(!Z8(l)&&"top"===c){u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,0,u),i.autoPadding=n.instance(0,o.right,a.top,u)}}function e3(e){var t,n,r=e.chart,i=e.options,a=i.data,o=i.xField,s=i.yField,l=i.color,c=i.barStyle,u=i.widthRatio,h=i.legend,p=i.layout,d=Q8(o,s,"series-field-key",a,Z8(p));h?r.legend("series-field-key",h):!1===h&&r.legend(!1);var f=d[0],m=d[1];return Z8(p)?((t=r.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:"first-axes-view"})).coordinate().transpose().reflect("x"),(n=r.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().transpose(),t.data(f),n.data(m)):(t=r.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:"first-axes-view"}),(n=r.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().reflect("y"),t.data(f),n.data(m)),RZ(vQ({},e,{chart:t,options:{widthRatio:u,xField:o,yField:s[0],seriesField:"series-field-key",interval:{color:l,style:c}}})),RZ(vQ({},e,{chart:n,options:{xField:o,yField:s[1],seriesField:"series-field-key",widthRatio:u,interval:{color:l,style:c}}})),e}function t3(e){var t,n,r,i=e.options,a=e.chart,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=lQ(a,"first-axes-view"),h=lQ(a,"second-axes-view"),p={};return hM((null==i?void 0:i.meta)||{}).map((function(e){fN(null==i?void 0:i.meta,[e,"alias"])&&(p[e]=i.meta[e].alias)})),a.scale(((t={})["series-field-key"]={sync:!0,formatter:function(e){return fN(p,e,e)}},t)),kZ(((n={})[l]=o,n[c[0]]=s[c[0]],n))(vQ({},e,{chart:u})),kZ(((r={})[l]=o,r[c[1]]=s[c[1]],r))(vQ({},e,{chart:h})),e}function n3(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=n.layout,l=lQ(t,"first-axes-view"),c=lQ(t,"second-axes-view");return"bottom"===(null==r?void 0:r.position)?c.axis(a,QI(QI({},r),{label:{formatter:function(){return""}}})):c.axis(a,!1),!1===r?l.axis(a,!1):l.axis(a,QI({position:Z8(s)?"top":"bottom"},r)),!1===i?(l.axis(o[0],!1),c.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),c.axis(o[1],i[o[1]])),t.__axisPosition={position:l.getOptions().axes[a].position,layout:s},e}function r3(e){var t=e.chart;return xZ(vQ({},e,{chart:lQ(t,"first-axes-view")})),xZ(vQ({},e,{chart:lQ(t,"second-axes-view")})),e}function i3(e){var t=e.chart,n=e.options,r=n.yField,i=n.yAxis;return OZ(vQ({},e,{chart:lQ(t,"first-axes-view"),options:{yAxis:i[r[0]]}})),OZ(vQ({},e,{chart:lQ(t,"second-axes-view"),options:{yAxis:i[r[1]]}})),e}function a3(e){var t=e.chart;return CZ(vQ({},e,{chart:lQ(t,"first-axes-view")})),CZ(vQ({},e,{chart:lQ(t,"second-axes-view")})),e}function o3(e){var t=e.chart;return bZ(vQ({},e,{chart:lQ(t,"first-axes-view")})),bZ(vQ({},e,{chart:lQ(t,"second-axes-view")})),e}function s3(e){var t,n,r=this,i=e.chart,a=e.options,o=a.label,s=a.yField,l=a.layout,c=lQ(i,"first-axes-view"),u=lQ(i,"second-axes-view"),h=iQ(c,"interval"),p=iQ(u,"interval");if(o){var d=o.callback,f=ZI(o,["callback"]);f.position||(f.position="middle"),void 0===f.offset&&(f.offset=2);var m=QI({},f);if(Z8(l)){var g=(null===(t=m.style)||void 0===t?void 0:t.textAlign)||("middle"===f.position?"center":"left");f.style=vQ({},f.style,{textAlign:g});m.style=vQ({},m.style,{textAlign:{left:"right",right:"left",center:"center"}[g]})}else{var y={top:"bottom",bottom:"top",middle:"middle"};"string"==typeof f.position?f.position=y[f.position]:"function"==typeof f.position&&(f.position=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return y[f.position.apply(r,e)]});var v=(null===(n=m.style)||void 0===n?void 0:n.textBaseline)||"bottom";m.style=vQ({},m.style,{textBaseline:v});f.style=vQ({},f.style,{textBaseline:{top:"bottom",bottom:"top",middle:"middle"}[v]})}h.label({fields:[s[0]],callback:d,cfg:hQ(m)}),p.label({fields:[s[1]],callback:d,cfg:hQ(f)})}else h.label(!1),p.label(!1);return e}function l3(e){return ZK(e3,t3,n3,i3,a3,s3,EZ,r3,o3)(e)}function c3(e,t){if(lM(e))return e.find((function(e){return e.type===t}))}function u3(e,t){var n=c3(e,t);return n&&!1!==n.enable}function h3(e){var t=e.interactions,n=e.drilldown;return fN(n,"enabled")||u3(t,"treemap-drill-down")}function p3(e){var t=e.data,n=e.colorField,r=e.enableDrillDown,i=e.hierarchyConfig,a=u8(t,QI(QI({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach((function(e){if(0===e.depth)return null;if(r&&1!==e.depth)return null;if(!r&&e.children)return null;var a=e.ancestors().map((function(e){return{data:e.data,height:e.height,value:e.value}})),s=r&&lM(t.path)?a.concat(t.path.slice(1)):a,l=Object.assign({},e.data,QI({x:e.x,y:e.y,depth:e.depth,value:e.value,path:s},e));if(!e.data[n]&&e.parent){var c=e.ancestors().find((function(e){return e.data[n]}));l[n]=null==c?void 0:c.data[n]}else l[n]=e.data[n];l["hierarchy-data-transform-params"]={hierarchyConfig:i,colorField:n,enableDrillDown:r},o.push(l)})),o}function d3(e){var t=e.options.colorField;return vQ({options:{rawFields:["value"],tooltip:{fields:["name","value",t,"path"],formatter:function(e){return{name:e.name,value:e.value}}}}},e)}function f3(e){var t=e.chart,n=e.options,r=n.color,i=n.colorField,a=n.rectStyle,o=n.hierarchyConfig,s=n.rawFields,l=p3({data:n.data,colorField:n.colorField,enableDrillDown:h3(n),hierarchyConfig:o});return t.data(l),DZ(vQ({},e,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:r,style:a}}})),t.coordinate().reflect("y"),e}function m3(e){return e.chart.axis(!1),e}function g3(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return h3(e)?vQ({},e,{interactions:JI(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:p3}}])}):e}function y3(e){var t=e.chart,n=e.options,r=n.interactions,i=n.drilldown;xZ({chart:t,options:g3(n)});var a=c3(r,"view-zoom");return a&&(!1!==a.enable?t.getCanvas().on("mousewheel",(function(e){e.preventDefault()})):t.getCanvas().off("mousewheel")),h3(n)&&(t.appendPadding=IQ(t.appendPadding,fN(i,["breadCrumb","position"]))),e}function v3(e){return ZK(d3,CZ,yZ("rectStyle"),f3,m3,vZ,EZ,y3,bZ,_Z())(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bidirectional-bar",t}KI(t,e),t.getDefaultOptions=function(){return vQ({},e.getDefaultOptions.call(this),{syncViewPadding:J8})},t.prototype.changeData=function(e){void 0===e&&(e=[]),this.chart.emit(NN.BEFORE_CHANGE_DATA,qV.fromData(this.chart,NN.BEFORE_CHANGE_DATA,null)),this.updateOption({data:e});var t=this.options,n=Q8(t.xField,t.yField,"series-field-key",e,Z8(t.layout)),r=n[0],i=n[1],a=lQ(this.chart,"first-axes-view"),o=lQ(this.chart,"second-axes-view");a.data(r),o.data(i),this.chart.render(!0),this.chart.emit(NN.AFTER_CHANGE_DATA,qV.fromData(this.chart,NN.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return l3},t.SERIES_FIELD_KEY="series-field-key"}(nZ);var E3={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};function x3(e){return e.target.depth}function b3(e,t){return e.sourceLinks.length?e.depth:t-1}function C3(e){return function(){return e}}function S3(e,t){for(var n=0,r=0;r<e.length;r++)n+=t(e[r]);return n}function w3(e,t){for(var n=-1/0,r=0;r<e.length;r++)n=Math.max(t(e[r]),n);return n}function T3(e,t){return _3(e.source,t.source)||e.index-t.index}function k3(e,t){return _3(e.target,t.target)||e.index-t.index}function _3(e,t){return e.y0-t.y0}function O3(e){return e.value}function A3(e){return e.index}function I3(e){return e.nodes}function M3(e){return e.links}function N3(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function P3(e){for(var t=0,n=e.nodes;t<n.length;t++){for(var r=n[t],i=r.y0,a=i,o=0,s=r.sourceLinks;o<s.length;o++){(u=s[o]).y0=i+u.width/2,i+=u.width}for(var l=0,c=r.targetLinks;l<c.length;l++){var u;(u=c[l]).y1=a+u.width/2,a+=u.width}}}function F3(){var e,t,n,r,i=0,a=0,o=1,s=1,l=24,c=8,u=A3,h=b3,p=I3,d=M3,f=6;function m(m){var v={nodes:p(m),links:d(m)};return function(e){var t=e.nodes,n=e.links;t.forEach((function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]}));var i=new Map(t.map((function(e){return[u(e),e]})));if(n.forEach((function(e,t){e.index=t;var n=e.source,r=e.target;"object"!=typeof n&&(n=e.source=N3(i,n)),"object"!=typeof r&&(r=e.target=N3(i,r)),n.sourceLinks.push(e),r.targetLinks.push(e)})),null!=r)for(var a=0,o=t;a<o.length;a++){var s=o[a],l=s.sourceLinks,c=s.targetLinks;l.sort(r),c.sort(r)}}(v),function(e){for(var t=e.nodes,n=0,r=t;n<r.length;n++){var i=r[n];i.value=void 0===i.fixedValue?Math.max(S3(i.sourceLinks,O3),S3(i.targetLinks,O3)):i.fixedValue}}(v),function(e){var n=e.nodes,r=n.length,i=new Set(n),a=new Set,o=0;for(;i.size;){if(i.forEach((function(e){e.depth=o;for(var t=0,n=e.sourceLinks;t<n.length;t++){var r=n[t].target;a.add(r)}})),++o>r)throw new Error("circular link");i=a,a=new Set}if(t)for(var s=Math.max(w3(n,(function(e){return e.depth}))+1,0),l=void 0,c=0;c<n.length;c++)(l=n[c]).depth=t.call(null,l,s)}(v),function(e){var t=e.nodes,n=t.length,r=new Set(t),i=new Set,a=0;for(;r.size;){if(r.forEach((function(e){e.height=a;for(var t=0,n=e.targetLinks;t<n.length;t++){var r=n[t].source;i.add(r)}})),++a>n)throw new Error("circular link");r=i,i=new Set}}(v),function(t){var r=function(e){for(var t=e.nodes,r=Math.max(w3(t,(function(e){return e.depth}))+1,0),a=(o-i-l)/(r-1),s=new Array(r).fill(0).map((function(){return[]})),c=0,u=t;c<u.length;c++){var p=u[c],d=Math.max(0,Math.min(r-1,Math.floor(h.call(null,p,r))));p.layer=d,p.x0=i+d*a,p.x1=p.x0+l,s[d]?s[d].push(p):s[d]=[p]}if(n)for(var f=0,m=s;f<m.length;f++){m[f].sort(n)}return s}(t);e=Math.min(c,(s-a)/(w3(r,(function(e){return e.length}))-1)),function(t){for(var n=function(e,t){for(var n=1/0,r=0;r<e.length;r++)n=Math.min(t(e[r]),n);return n}(t,(function(t){return(s-a-(t.length-1)*e)/S3(t,O3)})),r=0,i=t;r<i.length;r++){for(var o=i[r],l=a,c=0,u=o;c<u.length;c++){(m=u[c]).y0=l,m.y1=l+m.value*n,l=m.y1+e;for(var h=0,p=m.sourceLinks;h<p.length;h++){var d=p[h];d.width=d.value*n}}l=(s-l+e)/(o.length+1);for(var f=0;f<o.length;++f){var m;(m=o[f]).y0+=l*(f+1),m.y1+=l*(f+1)}C(o)}}(r);for(var u=0;u<f;++u){var p=Math.pow(.99,u),d=Math.max(1-p,(u+1)/f);y(r,p,d),g(r,p,d)}}(v),P3(v),v}function g(e,t,r){for(var i=1,a=e.length;i<a;++i){for(var o=e[i],s=0,l=o;s<l.length;s++){for(var c=l[s],u=0,h=0,p=0,d=c.targetLinks;p<d.length;p++){var f=d[p],m=f.source,g=f.value*(c.layer-m.layer);u+=S(m,c)*g,h+=g}if(h>0){var y=(u/h-c.y0)*t;c.y0+=y,c.y1+=y,b(c)}}void 0===n&&o.sort(_3),o.length&&v(o,r)}}function y(e,t,r){for(var i=e.length-2;i>=0;--i){for(var a=e[i],o=0,s=a;o<s.length;o++){for(var l=s[o],c=0,u=0,h=0,p=l.sourceLinks;h<p.length;h++){var d=p[h],f=d.target,m=d.value*(f.layer-l.layer);c+=w(l,f)*m,u+=m}if(u>0){var g=(c/u-l.y0)*t;l.y0+=g,l.y1+=g,b(l)}}void 0===n&&a.sort(_3),a.length&&v(a,r)}}function v(t,n){var r=t.length>>1,i=t[r];x(t,i.y0-e,r-1,n),E(t,i.y1+e,r+1,n),x(t,s,t.length-1,n),E(t,a,0,n)}function E(t,n,r,i){for(;r<t.length;++r){var a=t[r],o=(n-a.y0)*i;o>1e-6&&(a.y0+=o,a.y1+=o),n=a.y1+e}}function x(t,n,r,i){for(;r>=0;--r){var a=t[r],o=(a.y1-n)*i;o>1e-6&&(a.y0-=o,a.y1-=o),n=a.y0-e}}function b(e){var t=e.sourceLinks,n=e.targetLinks;if(void 0===r){for(var i=0,a=n;i<a.length;i++){a[i].source.sourceLinks.sort(k3)}for(var o=0,s=t;o<s.length;o++){s[o].target.targetLinks.sort(T3)}}}function C(e){if(void 0===r)for(var t=0,n=e;t<n.length;t++){var i=n[t],a=i.sourceLinks,o=i.targetLinks;a.sort(k3),o.sort(T3)}}function S(t,n){for(var r=t.y0-(t.sourceLinks.length-1)*e/2,i=0,a=t.sourceLinks;i<a.length;i++){var o=a[i],s=o.target,l=o.width;if(s===n)break;r+=l+e}for(var c=0,u=n.targetLinks;c<u.length;c++){var h=u[c];s=h.source,l=h.width;if(s===t)break;r-=l}return r}function w(t,n){for(var r=n.y0-(n.targetLinks.length-1)*e/2,i=0,a=n.targetLinks;i<a.length;i++){var o=a[i],s=o.source,l=o.width;if(s===t)break;r+=l+e}for(var c=0,u=t.sourceLinks;c<u.length;c++){var h=u[c];s=h.target,l=h.width;if(s===n)break;r-=l}return r}return m.update=function(e){return P3(e),e},m.nodeId=function(e){return arguments.length?(u="function"==typeof e?e:C3(e),m):u},m.nodeAlign=function(e){return arguments.length?(h="function"==typeof e?e:C3(e),m):h},m.nodeDepth=function(e){return arguments.length?(t=e,m):t},m.nodeSort=function(e){return arguments.length?(n=e,m):n},m.nodeWidth=function(e){return arguments.length?(l=+e,m):l},m.nodePadding=function(t){return arguments.length?(c=e=+t,m):c},m.nodes=function(e){return arguments.length?(p="function"==typeof e?e:C3(e),m):p},m.links=function(e){return arguments.length?(d="function"==typeof e?e:C3(e),m):d},m.linkSort=function(e){return arguments.length?(r=e,m):r},m.size=function(e){return arguments.length?(i=a=0,o=+e[0],s=+e[1],m):[o-i,s-a]},m.extent=function(e){return arguments.length?(i=+e[0][0],o=+e[1][0],a=+e[0][1],s=+e[1][1],m):[[i,a],[o,s]]},m.iterations=function(e){return arguments.length?(f=+e,m):f},m}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="treemap",t}KI(t,e),t.getDefaultOptions=function(){return E3},t.prototype.changeData=function(e){var t=this.options,n=t.colorField,r=t.interactions,i=t.hierarchyConfig;this.updateOption({data:e});var a,o,s=p3({data:e,colorField:n,enableDrillDown:u3(r,"treemap-drill-down"),hierarchyConfig:i});this.chart.changeData(s),a=this.chart,(o=a.interactions["drill-down"])&&o.context.actions.find((function(e){return"drill-down-action"===e.name})).reset()},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return v3}}(nZ);var L3={left:function(e){return e.depth},right:function(e,t){return t-1-e.height},center:function(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?function(e,t){if(lM(e)){for(var n,r=1/0,i=0;i<e.length;i++){var a=e[i],o=oM(t)?t(a):a[t];o<r&&(n=a,r=o)}return n}}(e.sourceLinks,x3)-1:0},justify:b3},R3={nodeId:function(e){return e.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function D3(e,t){var n=function(e){return tN({},R3,e)}(e),r=n.nodeId,i=n.nodeSort,a=n.nodeAlign,o=n.nodeWidth,s=n.nodePadding,l=n.nodeDepth,c=F3().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(l).nodeAlign(function(e){return(wM(e)?L3[e]:oM(e)?e:null)||b3}(a)).extent([[0,0],[1,1]]).nodeId(r)(t);return c.nodes.forEach((function(e){var t=e.x0,n=e.x1,r=e.y0,i=e.y1;e.x=[t,n,n,t],e.y=[r,r,i,i]})),c.links.forEach((function(e){var t=e.source,n=e.target,r=t.x1,i=n.x0;e.x=[r,r,i,i];var a=e.width/2;e.y=[e.y0+a,e.y0-a,e.y1+a,e.y1-a]})),c}function B3(e,t,n){if(!lM(e))return[];var r=[],i=function(e,t,n){var r=[];return e.forEach((function(e){var i=e[t],a=e[n];r.includes(i)||r.push(i),r.includes(a)||r.push(a)})),r}(e,t,n),a=function(e,t,n,r){var i={};return t.forEach((function(e){i[e]={},t.forEach((function(t){i[e][t]=0}))})),e.forEach((function(e){i[e[n]][e[r]]=1})),i}(e,i,t,n),o={};function s(e){o[e]=1,i.forEach((function(t){if(0!=a[e][t])if(1==o[t])r.push(e+"_"+t);else{if(-1==o[t])return;s(t)}})),o[e]=-1}return i.forEach((function(e){o[e]=0})),i.forEach((function(e){-1!=o[e]&&s(e)})),0!==r.length&&console.warn("sankey data contains circle, "+r.length+" records removed.",r),e.filter((function(e){return r.findIndex((function(r){return r===e[t]+"_"+e[n]}))<0}))}function $3(e,t,n){return TQ(e)?e/n:t}function z3(e,t,n){return TQ(e)?e/n:t}function H3(e,t,n){var r,i=e.dataType,a=e.data,o=e.sourceField,s=e.targetField,l=e.weightField,c=e.nodeAlign,u=e.nodeSort,h=e.nodePadding,p=e.nodePaddingRatio,d=e.nodeWidth,f=e.nodeWidthRatio,m=e.nodeDepth,g=e.rawFields,y=void 0===g?[]:g;r=function(e){return"node-link"===e}(i)?a:_Q(B3(a,o,s),o,s,l,y);var v=D3({nodeAlign:c,nodePadding:z3(h,p,n),nodeWidth:$3(d,f,t),nodeSort:u,nodeDepth:m},r),E=v.nodes,x=v.links;return{nodes:E.map((function(e){return QI(QI({},JK(e,JI(["x","y","name"],y))),{isNode:!0})})),edges:x.map((function(e){return QI(QI({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},JK(e,JI(["x","y","value"],y))),{isNode:!1})}))}}function j3(e){var t=e.options.rawFields,n=void 0===t?[]:t;return vQ({},{options:{tooltip:{fields:TM(JI(["name","source","target","value","isNode"],n))},label:{fields:TM(JI(["x","name"],n))}}},e)}function G3(e){var t=e.chart,n=e.options,r=n.color,i=n.nodeStyle,a=n.edgeStyle,o=n.label,s=n.tooltip,l=n.nodeState,c=n.edgeState;t.legend(!1),t.tooltip(s),t.axis(!1),t.coordinate().reflect("y");var u=H3(n,t.width,t.height),h=u.nodes,p=u.edges,d=t.createView({id:"edges"});d.data(p),BZ({chart:d,options:{xField:"x",yField:"y",seriesField:"name",edge:{color:r,style:a,shape:"arc"},tooltip:s,state:c}});var f=t.createView({id:"nodes"});return f.data(h),DZ({chart:f,options:{xField:"x",yField:"y",seriesField:"name",polygon:{color:r,style:i},label:o,tooltip:s,state:l}}),t.interaction("element-active"),t.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),e}function V3(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),JI(t.views[0].geometries,t.views[1].geometries).forEach((function(e){e.animate(n)})),e}function Y3(e){var t=e.chart,n="sankey-node-draggable";return e.options.nodeDraggable?t.interaction(n):t.removeInteraction(n),e}function U3(e){return ZK(j3,G3,xZ,Y3,V3,CZ)(e)}MG("sankey-node-drag",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDragging=!1,t}return KI(t,e),t.prototype.isNodeElement=function(){var e=fN(this.context,"event.target");if(e){var t=e.get("element");return t&&t.getModel().data.isNode}return!1},t.prototype.getNodeView=function(){return lQ(this.context.view,"nodes")},t.prototype.getEdgeView=function(){return lQ(this.context.view,"edges")},t.prototype.getCurrentDatumIdx=function(e){return this.getNodeView().geometries[0].elements.indexOf(e)},t.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:fN(this.context,"event.x"),y:fN(this.context,"event.y")};var e=this.context.event.target.get("element"),t=this.getCurrentDatumIdx(e);if(-1===t)return;this.currentElementIdx=t,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},t.prototype.translate=function(){if(this.isDragging){var e=this.context.view,t={x:fN(this.context,"event.x"),y:fN(this.context,"event.y")},n=t.x-this.prevPoint.x,r=t.y-this.prevPoint.y,i=this.getNodeView(),a=i.geometries[0].elements[this.currentElementIdx];if(a&&a.getModel()){var o=a.getModel().data,s=i.getOptions().data,l=i.getCoordinate(),c={x:n/l.getWidth(),y:r/l.getHeight()},u=QI(QI({},o),{x:o.x.map((function(e){return e+c.x})),y:o.y.map((function(e){return e+c.y}))}),h=JI(s);h[this.currentElementIdx]=u,i.data(h);var p=o.name,d=this.getEdgeView(),f=d.getOptions().data;f.forEach((function(e){e.source===p&&(e.x[0]+=c.x,e.x[1]+=c.x,e.y[0]+=c.y,e.y[1]+=c.y),e.target===p&&(e.x[2]+=c.x,e.x[3]+=c.x,e.y[2]+=c.y,e.y[3]+=c.y)})),d.data(f),this.prevPoint=t,e.render(!0)}}},t.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},t}(_G)),yV("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(e){return e.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="sankey",t}KI(t,e),t.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(e){return e.name},callback:function(e){var t=1===e[1];return{style:{fill:"#545454",textAlign:t?"end":"start"},offsetX:t?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(e){return!fN(e,[0,"data","isNode"])},formatter:function(e){return{name:e.source+" -> "+e.target,value:e.value}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},t.prototype.changeData=function(e){this.updateOption({data:e});var t=H3(this.options,this.chart.width,this.chart.height),n=t.nodes,r=t.edges,i=lQ(this.chart,"nodes"),a=lQ(this.chart,"edges");i.changeData(n),a.changeData(r)},t.prototype.getSchemaAdaptor=function(){return U3},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(nZ);var q3={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(e){return e.id},source:function(e){return e.source},target:function(e){return e.target},sourceWeight:function(e){return e.value||1},targetWeight:function(e){return e.value||1},sortBy:null};function W3(e,t){var n=function(e){return tN({},q3,e)}(e),r={},i=t.nodes,a=t.links;return i.forEach((function(e){var t=n.id(e);r[t]=e})),function(e,t,n){uM(e,(function(e,r){e.inEdges=t.filter((function(e){return""+n.target(e)==""+r})),e.outEdges=t.filter((function(e){return""+n.source(e)==""+r})),e.edges=e.outEdges.concat(e.inEdges),e.frequency=e.edges.length,e.value=0,e.inEdges.forEach((function(t){e.value+=n.targetWeight(t)})),e.outEdges.forEach((function(t){e.value+=n.sourceWeight(t)}))}))}(r,a,n),function(e,t){var n={weight:function(e,t){return t.value-e.value},frequency:function(e,t){return t.frequency-e.frequency},id:function(e,n){return(""+t.id(e)).localeCompare(""+t.id(n))}}[t.sortBy];!n&&oM(t.sortBy)&&(n=t.sortBy),n&&e.sort(n)}(i,n),{nodes:function(e,t){var n=e.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(t.weight){var r=t.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),a=t.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;e.forEach((function(e){o+=e.value})),e.forEach((function(e){e.weight=e.value/o,e.width=e.weight*(1-r),e.height=a})),e.forEach((function(n,r){for(var o=0,s=r-1;s>=0;s--)o+=e[s].width+2*i;var l=n.minX=i+o,c=n.maxX=n.minX+n.width,u=n.minY=t.y-a/2,h=n.maxY=u+a;n.x=[l,c,c,l],n.y=[u,u,h,h]}))}else{var s=1/n;e.forEach((function(e,n){e.x=(n+.5)*s,e.y=t.y}))}return e}(i,n),links:function(e,t,n){if(n.weight){var r={};uM(e,(function(e,t){r[t]=e.value})),t.forEach((function(t){var i=n.source(t),a=n.target(t),o=e[i],s=e[a];if(o&&s){var l=r[i],c=n.sourceWeight(t),u=o.minX+(o.value-l)/o.value*o.width,h=u+c/o.value*o.width;r[i]-=c;var p=r[a],d=n.targetWeight(t),f=s.minX+(s.value-p)/s.value*s.width,m=f+d/s.value*s.width;r[a]-=d;var g=n.y;t.x=[u,h,f,m],t.y=[g,g,g,g],t.source=o,t.target=s}}))}else t.forEach((function(t){var r=e[n.source(t)],i=e[n.target(t)];r&&i&&(t.x=[r.x,i.x],t.y=[r.y,i.y],t.source=r,t.target=i)}));return t}(r,a,n)}}var X3={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(e,t){return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:(e[0]+e[1])/2>.5?-4:4,content:t}}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(e){return!fN(e,[0,"data","isNode"])},formatter:function(e){return{name:e.source+" -> "+e.target,value:e.value}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function K3(e){var t=e.options,n=t.data,r=t.sourceField,i=t.targetField,a=t.weightField,o=t.nodePaddingRatio,s=t.nodeWidthRatio,l=t.rawFields,c=void 0===l?[]:l,u=W3({weight:!0,nodePaddingRatio:o,nodeWidthRatio:s},_Q(n,r,i,a)),h=u.nodes,p=u.links,d=h.map((function(e){return QI(QI({},JK(e,JI(["id","x","y","name"],c))),{isNode:!0})})),f=p.map((function(e){return QI(QI({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},JK(e,JI(["x","y","value"],c))),{isNode:!1})}));return QI(QI({},e),{ext:QI(QI({},e.ext),{chordData:{nodesData:d,edgesData:f}})})}function Q3(e){var t;return e.chart.scale(((t={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}}).name={sync:"color"},t.source={sync:"color"},t)),e}function Z3(e){return e.chart.axis(!1),e}function J3(e){return e.chart.legend(!1),e}function e6(e){var t=e.chart,n=e.options.tooltip;return t.tooltip(n),e}function t6(e){return e.chart.coordinate("polar").reflect("y"),e}function n6(e){var t=e.chart,n=e.options,r=e.ext.chordData.nodesData,i=n.nodeStyle,a=n.label,o=n.tooltip,s=t.createView();return s.data(r),DZ({chart:s,options:{xField:"x",yField:"y",seriesField:"name",polygon:{style:i},label:a,tooltip:o}}),e}function r6(e){var t=e.chart,n=e.options,r=e.ext.chordData.edgesData,i=n.edgeStyle,a=n.tooltip,o=t.createView();return o.data(r),BZ({chart:o,options:{xField:"x",yField:"y",seriesField:"source",edge:{style:i,shape:"arc"},tooltip:a}}),e}function i6(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),uM(sQ(t),(function(e){e.animate(n)})),e}function a6(e){return ZK(CZ,K3,t6,Q3,Z3,J3,e6,r6,n6,xZ,SZ,i6)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="chord",t}KI(t,e),t.getDefaultOptions=function(){return X3},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return a6}}(nZ);var o6={field:"value",as:["x","y","r"],sort:function(e,t){return t.value-e.value}};function s6(e){var t=e.data,n=e.hierarchyConfig,r=e.rawFields,i=void 0===r?[]:r,a=e.enableDrillDown,o=function(e,t){var n,r=(t=tN({},o6,t)).as;if(!lM(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');try{n=n4(t)}catch(uu){console.warn(uu)}var i,a=(i=e,R4().size(t.size).padding(t.padding)(p4(i).sum((function(e){return e[n]})).sort(t.sort))),o=r[0],s=r[1],l=r[2];return a.each((function(e){e[o]=e.x,e[s]=e.y,e[l]=e.r})),r4(a)}(t,QI(QI({},n),{field:"value",as:["x","y","r"]})),s=[];return o.forEach((function(e){for(var t,r=e.data.name,o=QI({},e);o.depth>1;)r=(null===(t=o.parent.data)||void 0===t?void 0:t.name)+" / "+r,o=o.parent;if(a&&e.depth>2)return null;var l=vQ({},e.data,QI(QI(QI({},JK(e.data,i)),{path:r}),e));l.ext=n,l["hierarchy-data-transform-params"]={hierarchyConfig:n,rawFields:i,enableDrillDown:a},s.push(l)})),s}function l6(e,t,n){var r=MQ([e,t]),i=r[0],a=r[1],o=r[2],s=r[3],l=n.width-(s+a),c=n.height-(i+o),u=Math.min(l,c),h=(l-u)/2,p=(c-u)/2;return{finalPadding:[i+p,a+h,o+p,s+h],finalSize:u<0?0:u}}var c6=["x","y","r","name","value","path","depth"],u6={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}};function h6(e){var t=e.chart,n=Math.min(t.viewBBox.width,t.viewBBox.height);return vQ({options:{size:function(e){return e.r*n}}},e)}function p6(e){var t=e.options,n=e.chart,r=n.viewBBox,i=t.padding,a=t.appendPadding,o=t.drilldown,s=a;(null==o?void 0:o.enabled)&&(s=MQ([IQ(n.appendPadding,fN(o,["breadCrumb","position"])),a]));var l=l6(i,s,r).finalPadding;return n.padding=l,n.appendPadding=0,e}function d6(e){var t=e.chart,n=e.options,r=t.padding,i=t.appendPadding,a=n.color,o=n.colorField,s=n.pointStyle,l=n.hierarchyConfig,c=n.sizeField,u=n.rawFields,h=void 0===u?[]:u,p=n.drilldown,d=s6({data:n.data,hierarchyConfig:l,enableDrillDown:null==p?void 0:p.enabled,rawFields:h});t.data(d);var f=l6(r,i,t.viewBBox).finalSize,m=function(e){return e.r*f};return c&&(m=function(e){return e[c]*f}),LZ(vQ({},e,{options:{xField:"x",yField:"y",seriesField:o,sizeField:c,rawFields:JI(c6,h),point:{color:a,style:s,shape:"circle",size:m}}})),e}function f6(e){return ZK(kZ({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(e)}function m6(e){var t=e.chart,n=e.options.tooltip;if(!1===n)t.tooltip(!1);else{var r=n;fN(n,"fields")||(r=vQ({},{customItems:function(e){return e.map((function(e){var n=fN(t.getOptions(),"scales"),r=fN(n,["name","formatter"],(function(e){return e})),i=fN(n,["value","formatter"],(function(e){return e}));return QI(QI({},e),{name:r(e.data.name),value:i(e.data.value)})}))}},r)),t.tooltip(r)}return e}function g6(e){return e.chart.axis(!1),e}function y6(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return(null==t?void 0:t.enabled)?vQ({},e,{interactions:JI(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:s6,enableDrillDown:!0}}])}):e}function v6(e){return xZ({chart:e.chart,options:y6(e.options)}),e}function E6(e){return ZK(yZ("pointStyle"),h6,p6,CZ,f6,d6,g6,vZ,m6,v6,bZ,_Z())(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle-packing",t}KI(t,e),t.getDefaultOptions=function(){return u6},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return E6},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(nZ),function(e){function t(t,n,r,i){var a=e.call(this,t,vQ({},i,n))||this;return a.type="g2-plot",a.defaultOptions=i,a.adaptor=r,a}KI(t,e),t.prototype.getDefaultOptions=function(){return this.defaultOptions},t.prototype.getSchemaAdaptor=function(){return this.adaptor}}(nZ);var x6={line:WZ,pie:WJ,column:CJ,bar:IJ,area:nJ,gauge:I8,"tiny-line":W0,"tiny-column":Q0,"tiny-area":U0,"ring-progress":x9,progress:g9,scatter:r0,histogram:c9,funnel:P2},b6={line:XZ,pie:XJ,column:wJ,bar:NJ,area:rJ,gauge:M8,"tiny-line":X0,"tiny-column":J0,"tiny-area":t9,"ring-progress":C9,progress:y9,scatter:c0,histogram:u9,funnel:F2},C6={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function S6(e,t,n){var r=b6[e];r?(0,x6[e])({chart:t,options:vQ({},r.getDefaultOptions(),fN(C6,e,{}),n)}):console.error("could not find "+e+" plot")}function w6(e){var t=e.chart,n=e.options,r=n.views,i=n.legend;return uM(r,(function(e){var n=e.region,r=e.data,i=e.meta,a=e.axes,o=e.coordinate,s=e.interactions,l=e.annotations,c=e.tooltip,u=e.geometries,h=t.createView({region:n});h.data(r);var p={};a&&uM(a,(function(e,t){p[t]=JK(e,rZ)})),p=vQ({},i,p),h.scale(p),a?uM(a,(function(e,t){h.axis(t,e)})):h.axis(!1),h.coordinate(o),uM(u,(function(e){var t=NZ({chart:h,options:e}).ext,n=e.adjust;n&&t.geometry.adjust(n)})),uM(s,(function(e){!1===e.enable?h.removeInteraction(e.type):h.interaction(e.type,e.cfg)})),uM(l,(function(e){h.annotation()[e.type](QI({},e))})),"boolean"==typeof e.animation?h.animate(!1):(h.animate(!0),uM(h.geometries,(function(t){t.animate(e.animation)}))),c&&(h.interaction("tooltip"),h.tooltip(c))})),i?uM(i,(function(e,n){t.legend(n,e)})):t.legend(!1),t.tooltip(n.tooltip),e}function T6(e){var t=e.chart;return uM(e.options.plots,(function(e){var n=e.type,r=e.region,i=e.options,a=void 0===i?{}:i,o=a.tooltip,s=t.createView(QI({region:r},JK(a,tZ)));o&&s.interaction("tooltip"),S6(n,s,a)})),e}function k6(e){return ZK(bZ,w6,T6,xZ,bZ,CZ,EZ)(e)}MG("association",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KI(t,e),t.prototype.getAssociationItems=function(e,t){var n,r=this.context.event,i=t||{},a=i.linkField,o=i.dim,s=[];if(null===(n=r.data)||void 0===n?void 0:n.data){var l=r.data.data;uM(e,(function(e){var t,n,r=a;if("x"===o?r=e.getXScale().field:"y"===o?r=null===(t=e.getYScales().find((function(e){return e.field===r})))||void 0===t?void 0:t.field:r||(r=null===(n=e.getGroupScales()[0])||void 0===n?void 0:n.field),r){var i=pN(aQ(e),(function(t){var n=!1,i=!1,a=lM(l)?fN(l[0],r):fN(l,r);return function(e,t){var n=e.getModel().data;return lM(n)?n[0][t]:n[t]}(t,r)===a?n=!0:i=!0,{element:t,view:e,active:n,inactive:i}}));s.push.apply(s,i)}}))}return s},t.prototype.showTooltip=function(e){var t=uQ(this.context.view);uM(this.getAssociationItems(t,e),(function(e){if(e.active){var t=e.element.shape.getCanvasBBox();e.view.showTooltip({x:t.minX+t.width/2,y:t.minY+t.height/2})}}))},t.prototype.hideTooltip=function(){uM(uQ(this.context.view),(function(e){e.hideTooltip()}))},t.prototype.active=function(e){var t=cQ(this.context.view);uM(this.getAssociationItems(t,e),(function(e){var t=e.active,n=e.element;t&&n.setState("active",!0)}))},t.prototype.selected=function(e){var t=cQ(this.context.view);uM(this.getAssociationItems(t,e),(function(e){var t=e.active,n=e.element;t&&n.setState("selected",!0)}))},t.prototype.highlight=function(e){var t=cQ(this.context.view);uM(this.getAssociationItems(t,e),(function(e){var t=e.inactive,n=e.element;t&&n.setState("inactive",!0)}))},t.prototype.reset=function(){uM(cQ(this.context.view),(function(e){uM(aQ(e),(function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("selected")&&e.setState("selected",!1),e.hasState("inactive")&&e.setState("inactive",!1)}))}))},t}(_G)),yV("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),yV("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),yV("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),yV("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var _6=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="mix",t}return KI(t,e),t.prototype.getSchemaAdaptor=function(){return k6},t}(nZ);function O6(e){var t=e.chart,n=e.options,r=n.type,i=n.data,a=n.fields,o=n.eachView,s=vN(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return t.data(i),t.facet(r,QI(QI({},s),{fields:a,eachView:function(e,t){var n=o(e,t);if(n.geometries)!function(e,t){var n=t.data,r=t.coordinate,i=t.interactions,a=t.annotations,o=t.animation,s=t.tooltip,l=t.axes,c=t.meta,u=t.geometries;n&&e.data(n);var h={};l&&uM(l,(function(e,t){h[t]=JK(e,rZ)})),h=vQ({},c,h),e.scale(h),r&&e.coordinate(r),!1===l?e.axis(!1):uM(l,(function(t,n){e.axis(n,t)})),uM(u,(function(t){var n=NZ({chart:e,options:t}).ext,r=t.adjust;r&&n.geometry.adjust(r)})),uM(i,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg)})),uM(a,(function(t){e.annotation()[t.type](QI({},t))})),"boolean"==typeof o?e.animate(!1):(e.animate(!0),uM(e.geometries,(function(e){e.animate(o)}))),s?(e.interaction("tooltip"),e.tooltip(s)):!1===s&&e.removeInteraction("tooltip")}(e,n);else{var r=n,i=r.options;i.tooltip&&e.interaction("tooltip"),S6(r.type,e,i)}}})),e}function A6(e){var t=e.chart,n=e.options,r=n.axes,i=n.meta,a=n.tooltip,o=n.coordinate,s=n.theme,l=n.legend,c=n.interactions,u=n.annotations,h={};return r&&uM(r,(function(e,t){h[t]=JK(e,rZ)})),h=vQ({},i,h),t.scale(h),t.coordinate(o),r?uM(r,(function(e,n){t.axis(n,e)})):t.axis(!1),a?(t.interaction("tooltip"),t.tooltip(a)):!1===a&&t.removeInteraction("tooltip"),t.legend(l),s&&t.theme(s),uM(c,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg)})),uM(u,(function(e){t.annotation()[e.type](QI({},e))})),e}function I6(e){return ZK(CZ,O6,A6)(e)}var M6,N6,P6={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="area",t}KI(t,e),t.getDefaultOptions=function(){return P6},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return I6}}(nZ),(N6=M6||(M6={})).DEV="DEV",N6.BETA="BETA",N6.STABLE="STABLE",function(){function e(){}Object.defineProperty(e,"MultiView",{get:function(){var e,t;return e=M6.STABLE,t="MultiView",console.warn(e===M6.DEV?"Plot '"+t+"' is in DEV stage, just give us issues.":e===M6.BETA?"Plot '"+t+"' is in BETA stage, DO NOT use it in production env.":e===M6.STABLE?"Plot '"+t+"' is in STABLE stage, import it by \"import { "+t+" } from '@antv/g2plot'\".":"invalid Stage type."),_6},enumerable:!1,configurable:!0})}(),FQ("en-US",{locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}}),FQ("zh-CN",{locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}});var F6=function(e,t){var n=document.createElement("div");return"tooltip"===t&&(n.className="g2-tooltip"),Y.render(e,n),n},L6=function(e,t){return{}.toString.call(e)==="[object ".concat(t,"]")},R6=function(e){return Object.prototype.toString.call(e).slice(8,-1)},D6=function(e){if(!e)return e;var t=new e.constructor;for(var n in e)e.hasOwnProperty(n)&&(t[n]="Object"===R6(e[n])||"Array"===R6(e[n])?D6(e[n]):e[n]);return t},B6=function(e,t){for(var n=e,r=0;r<t.length;r+=1){if(!(null==n?void 0:n[t[r]])){n=void 0;break}n=n[t[r]]}return n},$6=function(){return($6=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},z6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function H6(e,t){var n=f.exports.useRef(),r=f.exports.useRef(),i=f.exports.useRef(null),a=t.onReady,o=t.onEvent,s=function(e,t,n){var r=B6(e,t);!function(e,t,n){if(!e)return e;var r=e;t.forEach((function(e,i){i<t.length-1?r=r[e]:r[e]=n}))}(e,t,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=L6(r,"Function")?r.apply(void 0,e):r;return L6(i,"String")||L6(i,"Number")||L6(i,"HTMLDivElement")?i:F6(i,n)}))},l=function(){B6(t,["statistic","content","customHtml"])&&s(t,["statistic","content","customHtml"]),B6(t,["statistic","title","customHtml"])&&s(t,["statistic","title","customHtml"]),"object"==typeof t.tooltip&&(B6(t,["tooltip","container"])&&s(t,["tooltip","container"],"tooltip"),B6(t,["tooltip","customContent"])&&s(t,["tooltip","customContent"],"tooltip"))};return f.exports.useEffect((function(){if(n.current&&!hN(r.current,t)){var e=!1;if(r.current){var i=r.current;i.data,i.value,i.percent;var a=z6(i,["data","value","percent"]);t.data,t.value,t.percent;var o=z6(t,["data","value","percent"]);e=hN(a,o)}if(e&&"Mix"!==fN(t,"chartType")){var s="data",c=Object.keys(t);["percent"].forEach((function(e){c.includes(e)&&(s=e)})),n.current.changeData((null==t?void 0:t[s])||[])}else l(),n.current.update(t);r.current=D6(t)}}),[t]),f.exports.useEffect((function(){if(!i.current)return function(){return null};l();var s=new e(i.current,$6({},t));e.__proto__.toDataURL=function(e,t){return function(e,t){var r;return void 0===e&&(e="image/png"),null===(r=n.current)||void 0===r?void 0:r.chart.canvas.cfg.el.toDataURL(e,t)}(e,t)},e.prototype.downloadImage=function(e,t,r){return function(e,t,r){var i;void 0===e&&(e="download"),void 0===t&&(t="image/png");var a=e;-1===e.indexOf(".")&&(a="".concat(e,".").concat(t.split("/")[1]));var o=null===(i=n.current)||void 0===i?void 0:i.chart.canvas.cfg.el.toDataURL(t,r),s=document.createElement("a");return s.href=o,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),s=null,a}(e,t,r)},s.render(),r.current||(r.current=D6(t)),n.current=function(e){if(!e)return e;var t={};for(var n in e)t[n]=e[n];return t}(s),a&&a(s);var c=function(e){o&&o(s,e)};return s.on("*",c),function(){n.current&&(n.current.destroy(),n.current.off("*",c),n.current=void 0)}}),[]),{chart:n,container:i}}var j6=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),G6=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1},t.renderError=function(e){var n=t.props.errorTemplate;return n&&"function"==typeof n?n(e):d.createElement("h5",null,"组件出错了，请核查后重试： ",e.message)},t}return j6(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0,error:e}},t.getDerivedStateFromProps=function(e,t){return t.children!==e.children?{children:e.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):d.createElement(f.exports.Fragment,null,this.props.children)},t}(d.Component),V6=function(){return(V6=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var Y6=function(e){var t=e.animate,n=e.backgroundColor,r=e.backgroundOpacity,i=e.baseUrl,a=e.children,o=e.foregroundColor,s=e.foregroundOpacity,l=e.gradientRatio,c=e.uniqueKey,u=e.interval,h=e.rtl,p=e.speed,d=e.style,m=e.title,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),y=c||Math.random().toString(36).substring(6),v=y+"-diff",E=y+"-animated-diff",x=y+"-aria",b=h?{transform:"scaleX(-1)"}:null,C="0; "+u+"; 1",S=p+"s";return f.exports.createElement("svg",V6({"aria-labelledby":x,role:"img",style:V6(V6({},d),b)},g),m?f.exports.createElement("title",{id:x},m):null,f.exports.createElement("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+i+"#"+v+")",style:{fill:"url("+i+"#"+E+")"}}),f.exports.createElement("defs",{role:"presentation"},f.exports.createElement("clipPath",{id:v},a),f.exports.createElement("linearGradient",{id:E},f.exports.createElement("stop",{offset:"0%",stopColor:n,stopOpacity:r},t&&f.exports.createElement("animate",{attributeName:"offset",values:-l+"; "+-l+"; 1",keyTimes:C,dur:S,repeatCount:"indefinite"})),f.exports.createElement("stop",{offset:"50%",stopColor:o,stopOpacity:s},t&&f.exports.createElement("animate",{attributeName:"offset",values:-l/2+"; "+-l/2+"; "+(1+l/2),keyTimes:C,dur:S,repeatCount:"indefinite"})),f.exports.createElement("stop",{offset:"100%",stopColor:n,stopOpacity:r},t&&f.exports.createElement("animate",{attributeName:"offset",values:"0; 0; "+(1+l),keyTimes:C,dur:S,repeatCount:"indefinite"})))))};Y6.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var U6=function(e){return e.children?f.exports.createElement(Y6,V6({},e)):f.exports.createElement(q6,V6({},e))},q6=function(e){return f.exports.createElement(U6,V6({viewBox:"0 0 476 124"},e),f.exports.createElement("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),f.exports.createElement("circle",{cx:"20",cy:"20",r:"20"}))},W6=function(e){var t=e.loadingTemplate;return d.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},t||d.createElement(U6,{viewBox:"0 0 400 180",width:200,height:90,speed:1},d.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),d.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),d.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),d.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),d.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),d.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),d.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),d.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),d.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),d.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"})))},X6=f.exports.forwardRef((function(e,t){var n=e.chartRef,r=e.style,i=void 0===r?{height:"inherit"}:r,a=e.className,o=e.loading,s=e.loadingTemplate,l=e.errorTemplate,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),u=H6(XJ,c),h=u.chart,p=u.container;return f.exports.useEffect((function(){!function(e,t){e&&(oM(e)?e(t):e.current=t)}(n,h.current)}),[h.current]),f.exports.useImperativeHandle(t,(function(){return{getChart:function(){return h.current}}})),d.createElement(G6,{errorTemplate:l},o&&d.createElement(W6,{loadingTemplate:s}),d.createElement("div",{className:a,style:i,ref:p}))}));function K6(e,t,n){e-=20;const r=wQ(t,n),i=e/2.5;let a=1;e<r&&(a=Math.min(Math.sqrt(Math.abs(Math.pow(i,2)/(Math.pow(r/2,2)+Math.pow(12,2)))),1));return`<div style="${`width:${e}px;`};font-size:${a}em;line-height:${a<1?1:"inherit"};">${t}</div>`}const Q6=e=>{const{data:t,positon:n,hidden:r,labelWithName:i,themeMode:a,donut:o}=e,l={padding:[16,8,16,8],appendPadding:10,data:t,angleField:"value",colorField:"name",radius:.9,innerRadius:o?.6:0,label:{type:"spider",content:e=>`${i?`${e.name}: `:""}${(100*e.percent).toFixed(0)}%`,style:{fontSize:12,textAlign:"center",fillStyle:"dark"===a?"#fff":"#333"}},statistic:{title:{offsetY:16,style:{color:"dark"===a?"#ABADBA":"unset"},customHtml:(e,t,n)=>{const{width:r,height:i}=e.getBoundingClientRect();return K6(Math.sqrt(Math.pow(r/2,2)+Math.pow(i/2,2)),n?n.name:"总计",{fontSize:28})}},content:{offsetY:-16,style:{color:"dark"===a?"#fff":"unset"},customHtml:(e,t,n,r)=>{const{width:i}=e.getBoundingClientRect();let a=n?`${n.value}`:`${null==r?void 0:r.reduce(((e,t)=>e+t.value),0)}`;return a=_.toNumber(a).toFixed(3),K6(i,a,{fontSize:36})}}},interactions:[{type:"element-selected"},{type:"element-active"}],tooltip:{fields:["name","value"],formatter:e=>({name:e.name,value:`${e.value.toFixed(3)}`})},legend:!r&&{position:n}};return d.createElement(X6,s({},l))};function Z6(e){var t,n,r;const{values:i,series:a,themeMode:o}=e,{custom:s,options:l}=i,{calc:c,legengPosition:u,max:h,labelWithName:p,donut:f=!1}=s,m=Tu(a,c,{unit:null==(t=null==l?void 0:l.standardOptions)?void 0:t.util,decimals:null==(n=null==l?void 0:l.standardOptions)?void 0:n.decimals,dateFormat:null==(r=null==l?void 0:l.standardOptions)?void 0:r.dateFormat},null==l?void 0:l.valueMappings).sort(((e,t)=>t.value-e.value)),g=h&&m.length>h?m.slice(0,h).map((e=>({name:e.name,value:e.stat}))).concat({name:"其他",value:m.slice(h).reduce(((e,t)=>t.stat+e),0)}):m.map((e=>({name:e.name,value:e.stat})));return d.createElement("div",{className:"renderer-pie-container"},d.createElement(Q6,{themeMode:o,data:g,positon:"hidden"!==u?u:void 0,hidden:"hidden"===u,labelWithName:p,donut:f}))}var J6=Math.PI/3,e7=[0,J6,2*J6,3*J6,4*J6,5*J6];function t7(e){return e[0]}function n7(e){return e[1]}const r7={fontWeight:"normal",fontSize:"12px",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono"},i7=(e=r7)=>`${e.fontWeight} ${e.fontSize} ${e.fontFamily}`;function a7(e,t=i7()){const n=document.createElement("canvas").getContext("2d");n.font=t;return n.measureText(e).width}function o7(e,t,n,r){return function(e,t,n){let r=a7(e,i7(l(s({},r7),{fontSize:"24px"})));if(r<=(t*=.95)&&24<=n)return 24;for(let i=24;i>=6;i--)if(r=a7(e,i7(l(s({},r7),{fontSize:i+"px"}))),r<t&&i<=n)return Math.ceil(i);return 0}(e,n,r/t)}const s7=be("body").append((function(){return document.createElement("div")})).attr("class","hexbin-tooltip").style("opacity",0);function l7(e,t,{width:n,height:r,fontAutoScale:i=!0,fontSize:a=12,themeMode:o,textMode:s}){const l=Oe().duration(750),{columns:c,rows:u}=function(e,t,n){let r=0,i=0;const a=Math.sqrt(n);return e>t?(r=Math.ceil(e/t*a*.75),r<1?r=1:r>n&&(r=n),i=Math.ceil(n/r),i<1&&(i=1)):(i=Math.ceil(t/e*a*.75),i<1?i=1:i>n&&(i=n),r=Math.ceil(n/i),r<1&&(r=1)),{columns:r,rows:i}}(n,r,t.length),h=Math.floor(Ae([n/((c+.5)*Math.sqrt(3)),r/(1.5*(u+1/3)),n/7])),p=Math.sin(60*Math.PI/180)*h*2,d=function(e,t,n,r){let i=[];for(let a=0,o=0;a<e;a++)for(let e=0;e<t&&o<=n-1;e++,o++)i.push([r*e*1.75,r*a*1.5]);return i}(u,c,t.length,h);let f=(n-p*c)/2+p/2;d.length>=2*c&&(f=(n-p*c-p/2)/2+p/2);const m=(r-function(e,t){let n=0;for(let r=1;r<=e;r++)n+=r===e&&1!==r?1.5:r%2==1?2:1;return n*t}(u,h))/2+h,g=function(){var e,t,n,r=0,i=0,a=1,o=1,s=t7,l=n7;function c(e){var r,i={},a=[],o=e.length;for(r=0;r<o;++r)if(!isNaN(u=+s.call(null,c=e[r],r,e))&&!isNaN(h=+l.call(null,c,r,e))){var c,u,h,p=Math.round(h/=n),d=Math.round(u=u/t-(1&p)/2),f=h-p;if(3*Math.abs(f)>1){var m=u-d,g=d+(u<d?-1:1)/2,y=p+(h<p?-1:1),v=u-g,E=h-y;m*m+f*f>v*v+E*E&&(d=g+(1&p?1:-1)/2,p=y)}var x=d+"-"+p,b=i[x];b?b.push(c):(a.push(b=i[x]=[c]),b.x=(d+(1&p)/2)*t,b.y=p*n)}return a}function u(e){var t=0,n=0;return e7.map((function(r){var i=Math.sin(r)*e,a=-Math.cos(r)*e,o=i-t,s=a-n;return t=i,n=a,[o,s]}))}return c.hexagon=function(t){return"m"+u(null==t?e:+t).join("l")+"z"},c.centers=function(){for(var s=[],l=Math.round(i/n),c=Math.round(r/t),u=l*n;u<o+e;u+=n,++l)for(var h=c*t+(1&l)*t/2;h<a+t/2;h+=t)s.push([h,u]);return s},c.mesh=function(){var t=u(e).slice(0,4).join("l");return c.centers().map((function(e){return"M"+e+"m"+t})).join("")},c.x=function(e){return arguments.length?(s=e,c):s},c.y=function(e){return arguments.length?(l=e,c):l},c.radius=function(r){return arguments.length?(t=2*(e=+r)*Math.sin(J6),n=1.5*e,c):e},c.size=function(e){return arguments.length?(r=i=0,a=+e[0],o=+e[1],c):[a-r,o-i]},c.extent=function(e){return arguments.length?(r=+e[0][0],i=+e[0][1],a=+e[1][0],o=+e[1][1],c):[[r,i],[a,o]]},c.radius(1)}().radius(h),y=f,v=m,E=g(d),x=h,b=.9*p;let C=a,S=a,w=!1,T=0;if(i){let e="",n="";for(let r=0;r<t.length;r++)t[r].name.length>e.length&&(e=t[r].name),_.toString(t[r].value).length>n.length&&(n=_.toString(t[r].value));C=o7(e,2,b,x),S=o7(n,2,b,x),C<6&&(w=!0,T=18,e=e.substring(0,T+2),C=o7(e,2,b,x),C<6&&(T=10,e=e.substring(0,T+2),C=o7(e,2,b,x),C<6&&(T=6,e=e.substring(0,T+2),C=o7(e,2,b,x))))}const k=x/2/2,O=-x/2/2;e.attr("width",n).attr("height",r).attr("transform",`translate(${y},${v})`);const A=e.selectAll(".hexagon").data(E);A.enter().append((function(){return document.createElementNS("http://www.w3.org/2000/svg","path")})).attr("class","hexagon").on("mousemove",(function(n,r){var i,a;const s=null==(i=t[r])?void 0:i.metric,l=`${`<div><strong>${(null==s?void 0:s.__name__)||"value"}: ${null==(a=t[r])?void 0:a.value}</strong></div>`}${_.map(_.omit(s,"__name__"),((e,t)=>`<div>${t}: ${e}</div>`)).join("")}`;s7.style("opacity",.9),s7.html(l).style("left",Ce.pageX+10+"px").style("top",Ce.pageY-28+"px");e.selectAll(".hexagon").nodes()[r].setAttribute("stroke","dark"===o?"#fff":"#2A2D3C")})).on("mouseout",(function(n,r){var i;s7.style("opacity",0);e.selectAll(".hexagon").nodes()[r].setAttribute("stroke",null==(i=t[r])?void 0:i.color)})).attr("stroke",((e,n)=>{var r;return null==(r=t[n])?void 0:r.color})).attr("stroke-width","2px").style("fill",((e,n)=>{var r;return null==(r=t[n])?void 0:r.color})).style("fill-opacity",1).transition(l).attr("d",(function(e){return"M"+e.x+","+e.y+g.hexagon([h-3])})),"valueAndName"!==s&&"name"!==s||A.enter().append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y+("valueAndName"===s?O:0)})).text((function(e,n){var r;let i=null==(r=t[n])?void 0:r.name;return w?(i=i.substring(0,T)+"...",i):i})).attr("text-anchor","middle").attr("alignment-baseline","central").style("pointer-events","none").style("font-size",C+"px").style("fill","black").each((function(e){e.bbox=this.getBBox()})),"valueAndName"!==s&&"value"!==s||A.enter().append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y+("valueAndName"===s?k:0)})).text((function(e,n){var r;return null==(r=t[n])?void 0:r.value})).attr("text-anchor","middle").attr("alignment-baseline","central").style("font-size",S+"px").style("fill","black").style("pointer-events","none").each((function(e){e.bbox=this.getBBox()}))}function c7(e,{width:t,height:n,parentGroupEl:r,themeMode:i,textMode:a}){const o=be(r).attr("width",t).attr("height",n),s=function(e,t,n){let r=e;for(let i=1,a=1/0;i<=e;i+=1){const o=Math.floor(t/i),s=2*o/3,l=Math.abs(t*n-e*o*s);l<a&&(a=l,r=i)}return r}(1,t,n);l7(o,e,{width:Math.floor(t/s),height:n/Math.ceil(1/s),themeMode:i,textMode:a})}const u7=e=>{const{values:t,series:n,themeMode:r}=e,{custom:i={},options:a}=t,{calc:o,colorRange:c=[],reverseColorOrder:u=!1,colorDomainAuto:h,colorDomain:p,textMode:d="valueAndName"}=i,m=f.exports.useRef(null),g=f.exports.useRef(null),y=le(g);return f.exports.useEffect((()=>{var e,t,i;const f=Tu(n,o,{unit:null==(e=null==a?void 0:a.standardOptions)?void 0:e.util,decimals:null==(t=null==a?void 0:a.standardOptions)?void 0:t.decimals,dateFormat:null==(i=null==a?void 0:a.standardOptions)?void 0:i.dateFormat},null==a?void 0:a.valueMappings),g=ge().domain(function(e,t,n){if(!t&&(null==n?void 0:n.length))return[n[0],(n[0]+n[1])/2,n[1]];const r=_.get(_.minBy(e,"stat"),"stat"),i=_.get(_.maxBy(e,"stat"),"stat");return void 0!==r&&void 0!==i?[r,(i+r)/2,i]:[]}(f,h,p)).range(u?_.reverse(_.slice(c)):c);if((null==y?void 0:y.width)&&(null==y?void 0:y.height)){const e={width:null==y?void 0:y.width,height:null==y?void 0:y.height,parentGroupEl:m.current,themeMode:r,textMode:d},t=_.map(f,(e=>l(s({},e),{value:e.text,color:e.color||g(e.stat)||"#3399CC"})));be(m.current).selectAll("*").remove(),t.length&&c7(t,e)}}),[JSON.stringify(n),JSON.stringify(a),null==y?void 0:y.width,null==y?void 0:y.height,o,c,u,h,p]),f.exports.createElement("div",{ref:g,style:{width:"100%",height:"100%"}},f.exports.createElement("svg",{style:{width:"100%",height:"100%"}},f.exports.createElement("g",{ref:m})))};function h7(e){const{item:t,custom:n,themeMode:r,maxValue:i}=e,{baseColor:a="#FF656B",displayMode:o="basic",serieWidth:s=20}=n,l=t.color?t.color:a,c=f.exports.useRef(null),u=le(c),h=f.exports.useRef(null),p=le(h);return d.createElement("div",{className:"renderer-bar-gauge-item",key:t.name},d.createElement(yt,{title:t.name},d.createElement("div",{className:"renderer-bar-gauge-item-name",style:{width:`${s}%`}},t.name)),d.createElement("div",{className:"renderer-bar-gauge-item-value",style:{width:100-s+"%"}},d.createElement("div",{className:"renderer-bar-gauge-item-value-bg",style:{backgroundColor:"dark"===r?"#20222E":"#F6F6F6"}}),d.createElement("div",{ref:c,className:"renderer-bar-gauge-item-value-color-bg",style:{color:"dark"===r?"#fff":"#20222E",borderRight:`2px solid ${l}`,backgroundColor:de(l).alpha("basic"===o?.2:1).rgb().string(),width:t.stat/i*100+"%"}},"basic"===o&&d.createElement("div",{ref:h,className:"renderer-bar-gauge-item-value-text",style:{color:l,right:void 0!==(null==u?void 0:u.width)&&void 0!==(null==p?void 0:p.width)&&(null==u?void 0:u.width)<(null==p?void 0:p.width)+8?-(null==p?void 0:p.width)-8:0}},t.text))))}function p7(e){var t,n,r,i;const{values:a,series:o,themeMode:s}=e,{custom:l,options:c}=a,{calc:u,maxValue:h,sortOrder:p="desc"}=l;let f=Tu(o,u,{unit:null==(t=null==c?void 0:c.standardOptions)?void 0:t.util,decimals:null==(n=null==c?void 0:c.standardOptions)?void 0:n.decimals,dateFormat:null==(r=null==c?void 0:c.standardOptions)?void 0:r.dateFormat},null==c?void 0:c.valueMappings);p&&"none"!==p&&(f=_.orderBy(f,["stat"],[p]));const m=void 0!==h?h:(null==(i=_.maxBy(f,"stat"))?void 0:i.stat)||0;return d.createElement("div",{className:"renderer-bar-gauge-container"},d.createElement("div",{className:"renderer-bar-gauge scroll-container"},_.map(f,(e=>d.createElement(h7,{key:e.id,item:e,custom:l,themeMode:s,maxValue:m})))))}const d7=({content:e,style:t={}})=>d.createElement("div",{className:"markdown-wrapper",style:t},d.createElement(jm,{remarkPlugins:[Yv],children:e,rehypePlugins:[BC]}));f.exports.createContext({}),$i.Common;const f7=(e,t,n)=>{let r=e;for(;r.includes(t);)r=r.replace(t,n);return r};function m7(e,t){const{search:n}=window.location;var r=new URLSearchParams(n);let i=r.get(e);if(r.has("__variable_value_fixed")||i||(i=localStorage.getItem(`dashboard_${t}_${e}`)),null===i)return null;try{i=JSON.parse(i)}catch(uu){}return i||""}const g7=(e,t)=>{const{expression:n,formData:r,limit:i,id:a}=e,{regex:o,getPlaceholder:s}=t;let l=n;const c=l?l.match(new RegExp(o,"g")):[];if(c&&c.length>0)for(let u=0;u<i;u++)if(r[u]){const{name:e,options:t,reg:n,allValue:i}=r[u],o=s(e),h=m7(e,a);if(c.includes(o))if(Array.isArray(h))if(h.includes("all")&&t)l=f7(l,o,i||`(${t.filter((e=>!n||!v7(n)||v7(n).test(e))).join("|")})`);else{const e=1===_.size(h)?h[0]:`(${h.join("|")})`;l=f7(l,o,e)}else"string"==typeof h?l=f7(l,o,"all"===h&&i?i:h):null===h&&(l=f7(l,o,""))}return l},y7=(e,t,n,r)=>{let i=e;return i=g7({expression:i,formData:t,limit:n,id:r},{regex:"\\$[0-9a-zA-Z_]+",getPlaceholder:e=>`$${e}`}),i=g7({expression:i,formData:t,limit:n,id:r},{regex:"\\${[0-9a-zA-Z_]+}",getPlaceholder:e=>"${"+e+"}"}),i};function v7(e){if(!function(e){return!!e&&"/"===e[0]}(e))return new RegExp(`^${e}$`);const t=e.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));if(!t)return!1;try{return new RegExp(t[1],t[2])}catch(uu){return!1}}function E7(e){const[t]=D_("dashboardMeta"),{values:n}=e,{custom:r}=n,{textColor:i,bgColor:a,textSize:o,justifyContent:s,alignItems:l}=r,c=function(e,t,n){return t&&n?y7(e,n,n.length,t):e}(r.content,t.dashboardId,t.variableConfigWithOptions);return d.createElement(d7,{content:c,style:{height:"100%",padding:10,fontSize:o,color:i,backgroundColor:a,border:`1px solid ${de("#fff").alpha(.2).rgb().string()}`,display:"unset"!==s&&"unset"!==l?"flex":"block",justifyContent:s,alignItems:l}})}const x7=[{label:"green / orange",value:["#83c898","#c2c2c2","#fc653f"]},{label:"yellow / green",value:["#f0ee6e","#6ba261","#306d52"]},{label:"warm",value:["#ffeda0","#fc4e2a","#800026"]},{label:"cool",value:["#c7f1ff","#42a1fa","#083294"]},{label:"plasma",value:["#f0f921","#b12a90","#0d0887"]},{label:"viridis",value:["#fde725","#2a788e","#440154"]}],b7={lastNotNull:{name:"最后一个非空值"},last:{name:"最后一个值"},firstNotNull:{name:"第一个非空值"},first:{name:"第一个值"},min:{name:"最小值"},max:{name:"最大值"},avg:{name:"平均值"},sum:{name:"总和"},count:{name:"数量"}},C7=[{color:"#3FC453",value:null,type:"base"},{color:"#FF9919",value:60},{color:"#FF656B",value:80}],S7={timeseries:{drawStyle:"lines",lineInterpolation:"smooth",lineWidth:1,fillOpacity:.5,gradientMode:"none",stack:"off",scaleDistribution:{type:"linear"}},stat:{textMode:"valueAndName",colorMode:"value",calc:"lastNotNull",valueField:"Value",colSpan:1,textSize:{}},pie:{textMode:"valueAndName",colorMode:"value",calc:"lastNotNull",textSize:{},legengPosition:"right"},table:{showHeader:!0,colorMode:"value",calc:"lastNotNull",displayMode:"seriesToRows"},hexbin:{textMode:"valueAndName",calc:"lastNotNull",colorRange:_.join(x7[0].value,","),colorDomainAuto:!0,colorDomain:[],reverseColorOrder:!1},barGauge:{calc:"lastNotNull",baseColor:"#FF656B",displayMode:"basic",serieWidth:20,sortOrder:"desc"},text:{textSize:12,textColor:"#000000",bgColor:"#FFFFFF",justifyContent:"center",alignItems:"center",content:""},gauge:{textMode:"valueAndName",calc:"lastNotNull"}};const w7=window.devicePixelRatio||1;function T7(e){e.style;const t=e.width||120,n=e.height||120,r=e.color||"#73bf69",i=e.bgColor||"#EEEEEE",a=e.value,o=e.formatedValue||a,s=e.valueUnit||"",l=t/2,c=f.exports.useRef(null),u=e.thresholds||{steps:C7},h=(l-10-12*s.length-4)/_.toString(o).length||12;return f.exports.useEffect((()=>{if(c&&c.current){const e=c.current,o=e.getContext("2d");e.width=t*w7,e.height=n*w7*.7,e.style.width=`${t}px`,e.style.height=.7*n+"px",o.translate(t*w7/2,n*w7/2),o.scale(.95*w7,.95*w7);const s=l/2,h=s/10>5?5:s/10;o.beginPath(),Ie().outerRadius(l-h-1).innerRadius(l-s).context(o)({startAngle:.9*Math.PI+Math.PI/2,endAngle:2.1*Math.PI+Math.PI/2}),o.fillStyle=i,o.fill(),o.closePath();const p=(e=>{const{steps:t}=e,n=_.sortBy(t,(e=>Number(e.value)));return _.map(n,(({value:e,color:t,type:r},i)=>{const a=n[i+1];return{start:null!=e?e:"base"===r?0:100,end:a?a.value:100,color:t}}))})(u);_.forEach(p,(e=>{o.beginPath(),Ie().outerRadius(l).innerRadius(l-h).context(o)({startAngle:(.9+e.start/100*(2.1-.9))*Math.PI+Math.PI/2,endAngle:(.9+e.end/100*(2.1-.9))*Math.PI+Math.PI/2}),o.fillStyle=e.color,o.fill(),o.closePath()}));const d=a>100?100:a<0?0:a;o.beginPath(),Ie().outerRadius(l-h-1).innerRadius(l-s).context(o)({startAngle:.9*Math.PI+Math.PI/2,endAngle:(.9+d/100*(2.1-.9))*Math.PI+Math.PI/2}),o.fillStyle=r,o.fill(),o.closePath()}}),[e]),f.exports.useEffect((()=>()=>{if(c&&c.current){const e=c.current;e.getContext("2d").clearRect(0,0,e.width,e.height)}}),[]),d.createElement("div",{style:{width:t,height:.7*n},className:e.className?`d3-charts-solid-gauge ${e.className}`:"d3-charts-solid-gauge"},d.createElement("canvas",{ref:c}),d.createElement("div",{className:"d3-charts-solid-gauge-label",style:{top:t/2-12,color:r}},d.createElement("span",{style:{fontSize:h<0?12:h}},o),d.createElement("span",{className:"d3-charts-solid-gauge-label-unit"},s)))}function k7(e,t,n){const r=Math.ceil(Math.sqrt(n*e/t));return Math.floor(r*t/e)*r<n?t/Math.ceil(r*t/e):e/r}function _7(e){const{eleSize:t,realHeaderFontSize:n,item:r,themeMode:i,thresholds:a}=e,o=(null==t?void 0:t.height)-n,s=(null==t?void 0:t.width)>o?o:null==t?void 0:t.width;return(null==t?void 0:t.width)?d.createElement("div",{className:"renderer-gauge-item-content-chart"},d.createElement(T7,{value:r.stat,formatedValue:r.value,valueUnit:r.unit,color:r.color,bgColor:"dark"===i?"#404456":"#eeeeee",width:s,height:s,thresholds:a})):null}function O7(e){const{eleSize:t,realHeaderFontSize:n,name:r}=e;return(null==t?void 0:t.width)?d.createElement("div",{className:"renderer-gauge-header",style:{width:null==t?void 0:t.width,fontSize:n>24?24:n}},r):null}function A7(e){const t=f.exports.useRef(null),n=le(t),{item:r,textMode:i="valueAndName",style:a}=e,o=(null==n?void 0:n.width)/_.toString(r.name).length||12,c=o>24?24:o;return d.createElement(yt,{title:"valueAndName"===i?r.name:void 0},d.createElement("div",{key:r.name,className:"renderer-gauge-item",ref:t,style:a},d.createElement("div",{className:"renderer-gauge-item-content"},d.createElement(_7,l(s({},e),{eleSize:n,realHeaderFontSize:c})),"valueAndName"===i&&d.createElement(O7,{eleSize:n,realHeaderFontSize:c,name:r.name}))))}function I7(e){var t,n,r;const{values:i,series:a,themeMode:o}=e,{custom:s,options:l}=i,{calc:c,textMode:u}=s,h=Tu(a,c,{unit:null==(t=null==l?void 0:l.standardOptions)?void 0:t.util,decimals:null==(n=null==l?void 0:l.standardOptions)?void 0:n.decimals,dateFormat:null==(r=null==l?void 0:l.standardOptions)?void 0:r.dateFormat},null==l?void 0:l.valueMappings,null==l?void 0:l.thresholds),[p,m]=D_("statFields"),g=f.exports.useRef(null),y=le(g),[v,E]=d.useState();let x=0,b=0;return f.exports.useEffect((()=>{if(m((e=>{const t=_.reduce(e,((e,t)=>_.union(e,_.keys(t.metric))),[]);return _.uniq(t)})(h)),null==y?void 0:y.width){const e=((e,t,n,r)=>{const i=k7(e,t,r),a=k7(t,e,r),o=Math.max(i,a);let s=Math.floor(e/o),l=Math.ceil(r/s);s=Math.ceil(r/l);const c=s-(s*l-r);return{width:e/s-n+n/s,height:t/l-n+n/l,widthOnLastRow:e/c-n+n/c,xCount:s,yCount:l}})(y.width,y.height,8,h.length);E(e)}}),[JSON.stringify(h),null==y?void 0:y.width]),d.createElement("div",{className:"renderer-gauge-container"},d.createElement("div",{className:"renderer-gauge-container-box scroll-container"},d.createElement("div",{ref:g,className:"renderer-gauge-container-box-content"},v&&_.map(h,((e,t)=>{const n=b===v.yCount-1?v.widthOnLastRow:v.width,r=v.height,i=x*n+8*x,a=b*r+8*b;return x++,x===v.xCount&&(x=0,b++),d.createElement(A7,{key:e.id,item:e,idx:t,textMode:u,themeMode:o,thresholds:l.thresholds,style:{position:"absolute",left:i,top:a,width:`${n}px`,height:`${r}px`}})})))))}function M7(e,t){let n=_.map((r=e,Array.from(r.matchAll(/{{([\s0-9a-zA-Z_]+?)}}/g)).map((e=>e.length>0?e[1]:e[0]))),_.trim);var r,i=e;return n.forEach((e=>{const n=new RegExp(`{{\\s?${e}\\s?}}`,"g");i=i.replace(n,t[e]?t[e]:"")})),i}function N7(e,t){const n=[];return _.forEach(t,((t,r)=>{if(r>0){const r=n[n.length-1];r[0]+e<t[0]&&n.push([r[0]+e,null])}n.push(t)})),n}const P7=e=>{let t=e.__name__||"";return _.forEach(_.omit(e,"__name__"),((e,n)=>{t+=` ${n}: ${e}`})),_.trim(t)},F7=(e,t)=>Math.max(Math.floor((t-e)/240),1);async function L7(e){const{dashboardId:t,id:n,time:r,step:i,targets:a,variableConfig:o,spanNulls:s,datasourceName:l}=e;if(!r.start)return;const c=ms(r);let u=I(c.start).unix(),h=I(c.end).unix(),p=i;i||(p=F7(u,h));const d=[];let f=[],m=[],g=[],y=`${n}`;if(a){_.forEach(a,(e=>{if(e.time){if(e.time.unit){const{start:t,end:n}=l_(e.time);u=t,h=n}else{const t=ms(e.time);u=I(t.start).unix(),h=I(t.end).unix()}p=F7(u,h)}e.step&&(p=e.step),u-=u%p,h-=h%p;const n=o?y7(e.expr,o,o.length,t):e.expr;n&&(f.push({end:h,query:n,start:u,step:p}),m.push(e.expr),g.push(e.refId),y+=`-${e.expr}`)}));const e=(await((e,t,n)=>{const r=new AbortController,{signal:i}=r;return t&&kk[t]&&kk[t].abort&&kk[t].abort(),kk[t]=r,ji("/api/n9e/query-range-batch",{method:Li.Post,data:e,signal:i,headers:{"X-Cluster":n}}).finally((()=>{delete kk[t]}))})({queries:f},y,l)).dat||[];for(let t=0;t<(null==e?void 0:e.length);t++){var v={result:e[t],expr:m[t],refId:g[t]};const n=_.find(a,(e=>e.expr===v.expr));_.forEach(v.result,(e=>{d.push({id:_.uniqueId("series_"),refId:v.refId,name:(null==n?void 0:n.legend)?M7(null==n?void 0:n.legend,e.metric):P7(e.metric),metric:e.metric,expr:v.expr,data:s?e.values:N7(p,e.values)})}))}}return d}async function R7(e){const{dashboardId:t,time:n,targets:r,datasourceCate:i,datasourceName:a,variableConfig:o}=e;if(!n.start)return;const s=ms(n);let l=I(s.start).unix(),c=I(s.end).unix(),u=[],h=[],p=[];if(r&&a){if(_.forEach(r,(e=>{const n=e.query||{};_.forEach(null==n?void 0:n.values,(r=>{const i=o?y7(n.filter,o,o.length,t):n.filter;!function(e){var t;if(1===_.size(null==(t=e.query)?void 0:t.values))return"rawData"===_.get(e,["query","values",0,"func"]);return!1}(e)?u.push({index:n.index,filter:i,value:r,group_by:n.group_by,date_field:n.date_field,interval:Iu(n.interval,n.interval_unit),start:l,end:c}):h.push({index:n.index,filter:i,date_field:n.date_field,limit:n.limit,start:l,end:c})}))})),!_.isEmpty(u)){const e=await ka({cate:i,cluster:a,query:u});p=_.map(e.dat,(e=>({id:_.uniqueId("series_"),name:P7(e.metric),metric:e.metric,data:e.values})))}if(!_.isEmpty(h)){const e=await _a({cate:i,cluster:a,query:h});p=_.concat(p,_.map(e.dat,(e=>({id:e._id,name:e._index,metric:e.fields,data:[]}))))}}return p}async function D7(e){const{time:t,targets:n,datasourceCate:r,datasourceName:i}=e;if(!t.start)return;const a=ms(t);let o=I(a.start).unix(),s=I(a.end).unix(),l=[],c=[];if(n&&i){_.forEach(n,(e=>{const t=e.query||{};l.push({index:t.index,filter:t.filter,date_field:t.date_field,limit:t.limit,start:o,end:s})}));const e=await _a({cate:r,cluster:i,query:l});c=_.map(e.dat,(e=>({id:e._id,name:e._index,metric:e.fields,data:[]})))}return c}async function B7(e){const{time:t,targets:n,datasourceCate:r,datasourceName:i}=e;if(!t.start)return;const a=ms(t);let o=I(a.start).unix(),s=I(a.end).unix(),l=[],c=[],u=[];if(n&&i){_.forEach(n,(e=>{const t=e.query||{},n=t.mode;t.keys.valueKey&&(t.keys.valueKey=_.join(t.keys.valueKey," ")),t.keys.labelKey&&(t.keys.labelKey=_.join(t.keys.labelKey," ")),"timeSeries"===n?l.push({project:t.project,logstore:t.logstore,power_sql:t.power_sql,keys:t.keys,query:t.query,lines:10,offset:0,reverse:!1,from:o,to:s}):"raw"===n&&c.push({project:t.project,logstore:t.logstore,power_sql:t.power_sql,query:t.query,lines:500,offset:0,reverse:!1,from:o,to:s})}));const e=await Ku({cate:r,cluster:i,query:l}),t=await Xu({cate:r,cluster:i,query:c});u=_.map(e,(e=>({id:_.uniqueId("series_"),name:P7(e.metric),metric:e.metric,data:e.values})));const a=_.map(t.list,(e=>({id:e.__time__,name:e.__time__,metric:e,data:[]})));return _.concat(u,a)}return u}var $7,z7=new Uint8Array(16);function H7(){if(!$7&&!($7="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $7(z7)}var j7=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function G7(e){return"string"==typeof e&&j7.test(e)}for(var V7=[],Y7=0;Y7<256;++Y7)V7.push((Y7+256).toString(16).substr(1));function U7(e,t,n){var r=(e=e||{}).random||(e.rng||H7)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(V7[e[t+0]]+V7[e[t+1]]+V7[e[t+2]]+V7[e[t+3]]+"-"+V7[e[t+4]]+V7[e[t+5]]+"-"+V7[e[t+6]]+V7[e[t+7]]+"-"+V7[e[t+8]]+V7[e[t+9]]+"-"+V7[e[t+10]]+V7[e[t+11]]+V7[e[t+12]]+V7[e[t+13]]+V7[e[t+14]]+V7[e[t+15]]).toLowerCase();if(!G7(n))throw TypeError("Stringified UUID is invalid");return n}(r)}function q7(e,t){if(t)return t;const n=ms(e);let r=I(n.start).unix(),i=I(n.end).unix();return Math.max(Math.floor((i-r)/240),1)}function W7(e,t,n){return n?y7(t,n,n.length,e):t}var X7=d.memo((function(e){var t;const{themeMode:n,dashboardId:r,id:i,step:a,variableConfig:o,isPreview:c,onCloneClick:u,onShareClick:h,onEditClick:p,onDeleteClick:m}=e,[y,v]=f.exports.useState(e.time),[E,x]=f.exports.useState(!1),b=_.cloneDeep(e.values),C=f.exports.useRef(null),S=f.exports.useRef(null),[w]=Me(C),{series:T,loading:k}=function(e){const{dashboardId:t,datasourceCate:n,time:r,step:i,targets:a,variableConfig:o,inViewPort:c,spanNulls:u,datasourceName:h}=e,[p,d]=f.exports.useState([]),[m,g]=f.exports.useState(!1),y=_.map(o,(e=>m7(e.name,t))),v=f.exports.useRef(!1),E={prometheus:L7,elasticsearch:R7,"elasticsearch-log":D7,"aliyun-sls":B7},x=()=>{n&&(g(!0),E[n](e).then((e=>{d(e)})).finally((()=>{g(!1)})))};return f.exports.useEffect((()=>{c?x():v.current=!1}),[JSON.stringify(a),JSON.stringify(r),i,JSON.stringify(o),JSON.stringify(y),u,h]),f.exports.useEffect((()=>{c&&!v.current&&(v.current=!0,x())}),[c]),f.exports.useEffect((()=>{const e=_.map(p,(e=>{const t=_.find(a,(t=>t.expr===e.expr));return l(s({},e),{name:(null==t?void 0:t.legend)?M7(null==t?void 0:t.legend,e.metric):P7(e.metric)})}));d(e)}),[JSON.stringify(_.map(a,"legend"))]),{series:p,loading:m}}({id:i,dashboardId:r,time:y,step:a,targets:b.targets,variableConfig:o,inViewPort:c||w,datasourceCate:b.datasourceCate||"prometheus",datasourceName:b.datasourceName,spanNulls:null==(t=b.custom)?void 0:t.spanNulls}),O=W7(r,b.name,o),A=W7(r,b.description,o),I=A||!_.isEmpty(b.links);if(f.exports.useEffect((()=>{v(e.time)}),[JSON.stringify(e.time)]),_.isEmpty(b))return null;"string"==typeof _.get(b,"custom.colorRange")&&_.set(b,"custom.colorRange",_.split(_.get(b,"custom.colorRange"),","));const M={values:b,series:T},N={timeseries:()=>d.createElement(_u,l(s({},M),{themeMode:n,time:y})),stat:()=>d.createElement(z_,l(s({},M),{bodyWrapRef:S,themeMode:n})),table:()=>d.createElement(WI,l(s({},M),{themeMode:n})),pie:()=>d.createElement(Z6,l(s({},M),{themeMode:n})),hexbin:()=>d.createElement(u7,l(s({},M),{themeMode:n})),barGauge:()=>d.createElement(p7,l(s({},M),{themeMode:n})),text:()=>d.createElement(E7,s({},M)),gauge:()=>d.createElement(I7,l(s({},M),{themeMode:n}))};return d.createElement("div",{className:g({"renderer-container":!0,"renderer-container-no-title":!b.name}),ref:C},d.createElement("div",{className:"renderer-body-wrap",ref:S},d.createElement("div",{className:"renderer-header graph-header dashboards-panels-item-drag-handle"},d.createElement("div",{className:"renderer-header-desc"},I?d.createElement(yt,{placement:"top",overlayInnerStyle:{width:300},getPopupContainer:()=>C.current,title:d.createElement("div",null,d.createElement(d7,{content:A}),_.map(b.links,((e,t)=>d.createElement("div",{key:t},d.createElement("a",{href:W7(r,e.url,o),target:e.targetBlank?"_blank":"_self"},W7(r,e.title,o))))))},d.createElement("div",{className:"renderer-header-desc"},A?d.createElement(D,null):d.createElement(Ne,null))):null),d.createElement("div",{className:"renderer-header-content"},d.createElement(yt,{title:O,getPopupContainer:()=>C.current},d.createElement("div",{className:"renderer-header-title"},O))),d.createElement("div",{className:"renderer-header-loading"},k?d.createElement(K,{spin:!0}):!c&&d.createElement(kt,{trigger:["click"],placement:"bottomCenter",getPopupContainer:()=>C.current,overlayStyle:{minWidth:"100px"},visible:E,onVisibleChange:e=>{x(e)},overlay:d.createElement(vt,null,d.createElement(vt.Item,{onClick:()=>{x(!0),v(l(s({},y),{refreshFlag:_.uniqueId("refreshFlag_ ")}))},key:"0"},d.createElement(yt,{title:`刷新间隔小于 step(${q7(y,a)}s) 将不会更新数据`,placement:"left"},d.createElement("div",null,d.createElement(K,{style:{marginRight:8}}),"刷新"))),d.createElement(vt.Item,{onClick:()=>{x(!1),p&&p()},key:"1"},d.createElement(R,{style:{marginRight:8}}),"编辑"),d.createElement(vt.Item,{onClick:()=>{x(!1),u&&u()},key:"2"},d.createElement(z,{style:{marginRight:8}}),"克隆"),d.createElement(vt.Item,{onClick:()=>{x(!1),h&&h()},key:"3"},d.createElement(we,{style:{marginRight:8}}),"分享"),d.createElement(vt.Item,{onClick:()=>{x(!1),m&&m()},key:"4"},d.createElement(Pe,{style:{marginRight:8}}),"删除"))},d.createElement(Fe,{className:"renderer-header-more"})))),d.createElement("div",{className:"renderer-body",style:{height:b.name?"calc(100% - 47px)":"100%"}},_.isEmpty(T)&&"text"!==b.type?d.createElement("div",{className:"renderer-body-content-empty"},"暂无数据"):d.createElement(d.Fragment,null,N[b.type]?N[b.type]():d.createElement("div",{className:"unknown-type"},`无效的图表类型 ${b.type}`)))))}));function K7(){var e;const{t:t}=Ur(),{ids:n}=pe(),[r,i]=f.exports.useState([]),[a,o]=f.exports.useState({start:"now-1h",end:"now"}),[c,u]=f.exports.useState(null),[h,p]=f.exports.useState(xk.Line),{clusters:m}=ci((e=>e.common)),[g,y]=f.exports.useState("");f.exports.useEffect((()=>{v()}),[]);const v=()=>{(function(e){return ji(`/api/n9e/share-charts?ids=${e}`,{method:Li.Get})})(n).then((e=>{let t=e.dat.filter((e=>!!e)).map((e=>l(s({},JSON.parse(e.configs)),{ref:d.createRef()})));const n=t[0].curCluster;p(t[0].dataProps.chartType||xk.Line),u(t[0].dataProps.step),o(t[0].dataProps.range),y(n),localStorage.setItem("curCluster",n),i(t)}))},E=d.createElement(vt,{selectedKeys:[g]},m.map((e=>d.createElement(vt.Item,{key:e,onClick:t=>{y(e),localStorage.setItem("curCluster",e),r.forEach((e=>e.ref.current.refresh()))}},e))));return d.createElement("div",{className:"chart-container"},r&&r.length>0&&g?d.createElement(d.Fragment,null,d.createElement("div",{className:"chart-container-header"},d.createElement("div",{className:"left"}),d.createElement("div",{className:"right"},d.createElement(zt,null,d.createElement("div",null,d.createElement("span",null,"集群："),d.createElement(kt,{overlay:E},d.createElement(Ct,null,g," ",d.createElement(N,null)))),d.createElement(Cs,{refreshTooltip:`刷新间隔小于 step(${q7(a,c)}s) 将不会更新数据`,onChange:o,value:a}),d.createElement(mk,{onChange:e=>u(e),initialValue:c}),!dk.valid(null==(e=r[0].dataProps)?void 0:e.version)&&d.createElement(Yt.Group,{options:[{label:d.createElement(S,null),value:xk.Line},{label:d.createElement(Le,null),value:xk.StackArea}],onChange:e=>{e.preventDefault(),p(e.target.value)},value:h,optionType:"button",buttonStyle:"solid"})))),r.map(((e,t)=>{var n,r;if(dk.valid(null==(n=e.dataProps)?void 0:n.version))return d.createElement("div",{style:{height:740,border:"1px solid #efefef"}},d.createElement(X7,{dashboardId:e.id,key:t,time:a,step:c,values:_.merge({},e.dataProps,{options:{legend:{displayMode:"table"}},datasourceName:(null==(r=e.dataProps)?void 0:r.datasourceName)||g}),isPreview:!0}));const i=l(s({},e.dataProps),{range:a,step:c,chartType:h,title:d.createElement(yt,{placement:"bottomLeft",title:()=>{var t;return d.createElement("div",null,null==(t=e.dataProps.promqls)?void 0:t.map((e=>d.createElement("div",null,e.current?e.current:e))))}},d.createElement(Ct,{size:"small",type:"link"},"promql 语句"))});return d.createElement(h_,{ref:e.ref,key:t,data:s({},i),graphConfigInnerVisible:!1,isShowShare:!1,highLevelConfig:e.highLevelConfig||{}})}))):d.createElement("h2",{className:"holder"},d.createElement(Re,{style:{fontSize:"30px"}}),d.createElement("span",null,t("该分享链接无图表数据"))))}const Q7={labelCol:{span:4},wrapperCol:{span:20}},{Option:Z7}=Nt,J7=d.forwardRef(((e,t)=>{const{t:n}=Ur(),{userId:r}=e,[i]=St.useForm(),[a,o]=f.exports.useState(),[u,h]=f.exports.useState(!0),[p,m]=f.exports.useState([]),[g,y]=f.exports.useState([]);f.exports.useImperativeHandle(t,(()=>({form:i}))),f.exports.useEffect((()=>{r?E(r):h(!1),v(),ji("/api/n9e/roles",{method:Li.Get}).then((e=>e&&e.dat)).then((e=>y(e)))}),[]);const v=()=>{Po().then((e=>{m(e)}))},E=e=>{(function(e){return ji(`/api/n9e/user/${e}/profile`,{method:Li.Get}).then((e=>e&&e.dat))})(e).then((e=>{let t=[];e.contacts&&Object.keys(e.contacts).forEach((n=>{let r={key:n,value:e.contacts[n]};t.push(r)})),o(Object.assign({},e,{contacts:t})),h(!1)}))};return u?null:d.createElement(St,l(s({},Q7),{form:i,initialValues:a,preserve:!1}),!r&&d.createElement(St.Item,{label:n("用户名"),name:"username",rules:[{required:!0,message:n("用户名不能为空！")}]},d.createElement(wt,null)),d.createElement(St.Item,{label:n("显示名"),name:"nickname"},d.createElement(wt,null)),!r&&d.createElement(d.Fragment,null,d.createElement(St.Item,{name:"password",label:n("密码"),rules:[{required:!0,message:n("请输入密码!")}],hasFeedback:!0},d.createElement(wt.Password,null)),d.createElement(St.Item,{name:"confirm",label:n("确认密码"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:n("请确认密码!")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("password")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(wt.Password,null))),d.createElement(St.Item,{label:n("角色"),name:"roles",rules:[{required:!0,message:n("角色不能为空！")}]},d.createElement(Nt,{mode:"multiple"},g.map(((e,t)=>d.createElement(Z7,{value:e.name,key:t},d.createElement("div",null,d.createElement("div",null,e.name),d.createElement("div",{style:{color:"#8c8c8c"}},e.note))))))),d.createElement(St.Item,{label:n("邮箱"),name:"email"},d.createElement(wt,null)),d.createElement(St.Item,{label:n("手机"),name:"phone"},d.createElement(wt,null)),d.createElement(St.Item,{label:n("更多联系方式")},d.createElement(St.List,{name:"contacts"},((e,{add:t,remove:r})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:i,name:a,fieldKey:o}=t,u=c(t,["key","name","fieldKey"]);return d.createElement(zt,{key:i,style:{display:"flex"},align:"baseline"},d.createElement(St.Item,l(s({style:{width:"180px"}},u),{name:[a,"key"],fieldKey:[o,"key"],rules:[{required:!0,message:n("联系方式不能为空")}]}),d.createElement(Nt,{suffixIcon:d.createElement(H,null),placeholder:n("请选择联系方式")},p.map(((e,t)=>d.createElement(Z7,{value:e.key,key:t},e.label))))),d.createElement(St.Item,l(s({},u),{style:{width:"170px"},name:[a,"value"],fieldKey:[o,"value"],rules:[{required:!0,message:n("值不能为空")}]}),d.createElement(wt,{placeholder:n("请输入值")})),d.createElement(ie,{className:"control-icon-normal",onClick:()=>r(a)}))})),d.createElement(Z,{className:"control-icon-normal",onClick:()=>t()}))))))})),eee=d.forwardRef(((e,t)=>{const{t:n}=Ur(),{teamId:r}=e,[i]=St.useForm(),[a,o]=f.exports.useState(),[c,u]=f.exports.useState(!0);f.exports.useImperativeHandle(t,(()=>({form:i}))),f.exports.useEffect((()=>{r?h(r):u(!1)}),[]);const h=e=>{Mo(e).then((e=>{o(e.user_group),u(!1)}))};return c?null:d.createElement(St,l(s({},Q7),{form:i,initialValues:a,preserve:!1}),d.createElement(St.Item,{label:n("团队名称"),name:"name",rules:[{required:!0,message:n("团队名称不能为空！")}]},d.createElement(wt,null)),d.createElement(St.Item,{label:n("备注"),name:"note"},d.createElement(wt,null)))}));var tee,nee,ree,iee,aee,oee;(nee=tee||(tee={})).User="用户",nee.Team="团队",(iee=ree||(ree={})).CreateUser="创建用户",iee.CreateTeam="创建团队",iee.CreateBusiness="创建业务组",iee.AddBusinessMember="添加业务组成员",iee.EditBusiness="编辑业务组",iee.EditUser="编辑用户信息",iee.EditTeam="编辑团队信息",iee.Reset="重置密码",iee.Disable="禁用",iee.Undisable="启用",iee.AddUser="添加成员",(oee=aee||(aee={})).Admin="管理员",oee.Standard="普通用户",oee.Guest="游客";const{Option:see}=Nt,lee=d.forwardRef(((e,t)=>{const{t:n}=Ur(),{businessId:r,action:i}=e,[a]=St.useForm(),[o,u]=f.exports.useState([]),[h,p]=f.exports.useState({label_enable:!0,label_value:"",members:[{perm_flag:!0}],name:""}),[m,g]=f.exports.useState(!0),[y,v]=f.exports.useState(!0);f.exports.useImperativeHandle(t,(()=>({form:a}))),f.exports.useEffect((()=>{r&&i===ree.EditBusiness?E(r):g(!1)}),[]);const E=e=>{Io(e).then((e=>{p({name:e.name,label_enable:1===e.label_enable,label_value:e.label_value,members:e.user_groups.map((e=>({perm_flag:"rw"===e.perm_flag,user_group_id:e.user_group.id})))}),g(!1)}))};f.exports.useEffect((()=>{x("")}),[]);const x=e=>{Oo({query:e}).then((e=>{u(e.dat)}))},b=f.exports.useCallback(q.exports.debounce(x,800),[]);return m?null:d.createElement(St,l(s({},Q7),{form:a,initialValues:h,preserve:!1,layout:"horizontal"}),i!==ree.AddBusinessMember&&d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("业务组名称"),name:"name",rules:[{required:!0,message:n("业务组名称不能为空！")}]},d.createElement(wt,null)),d.createElement(St.Item,{label:n("作为标签使用"),name:"label_enable",valuePropName:"checked",tooltip:{title:"系统会自动把业务组的英文标识作为标签附到该业务组下辖监控对象的时序数据上",getPopupContainer:()=>document.body},hidden:!0},d.createElement(Lt,null)),d.createElement(St.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.label_enable!==t.label_enable},(({getFieldValue:e})=>e("label_enable")&&d.createElement(St.Item,{label:n("英文标识"),name:"label_value",rules:[{required:!0}],tooltip:{title:d.createElement("span",null,"尽量用英文，不能与其他业务组标识重复，系统会自动生成 ",d.createElement(Mt,{color:"purple"},"busigroup=",a.getFieldValue("label_value"))," 的标签"),getPopupContainer:()=>document.body}},d.createElement(wt,{onChange:e=>{v(!y)}}))))),(i===ree.CreateBusiness||i===ree.AddBusinessMember)&&d.createElement(St.Item,{label:n("团队"),required:!0},d.createElement(St.List,{name:"members"},((e,{add:t,remove:r})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:i,name:a,fieldKey:u}=t,h=c(t,["key","name","fieldKey"]);return d.createElement(zt,{key:i,style:{display:"flex",marginBottom:8},align:"baseline"},d.createElement(St.Item,l(s({style:{width:450}},h),{name:[a,"user_group_id"],fieldKey:[u,"user_group_id"],rules:[{required:!0,message:n("业务组团队不能为空！")}]}),d.createElement(Nt,{suffixIcon:d.createElement(H,null),style:{width:"100%"},filterOption:!1,onSearch:e=>b(e),showSearch:!0,onBlur:()=>x("")},o.map((e=>d.createElement(see,{key:e.id,value:e.id},e.name))))),d.createElement(St.Item,l(s({},h),{name:[a,"perm_flag"],fieldKey:[u,"perm_flag"],valuePropName:"checked"}),d.createElement(Lt,{checkedChildren:"读写",unCheckedChildren:"只读"})),d.createElement(ie,{onClick:()=>r(a)}))})),d.createElement(St.Item,null,d.createElement(Ct,{type:"dashed",onClick:()=>t(),block:!0,icon:d.createElement(re,null)},"添加团队")))))))})),cee=d.forwardRef(((e,t)=>{const{t:n}=Ur(),[r]=St.useForm();return f.exports.useImperativeHandle(t,(()=>({form:r}))),d.createElement(St,l(s({},Q7),{form:r}),d.createElement(St.Item,{name:"password",label:n("密码"),rules:[{required:!0,message:n("请输入密码!")}],hasFeedback:!0},d.createElement(wt.Password,null)),d.createElement(St.Item,{name:"confirm",label:n("确认密码"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:n("请确认密码!")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("password")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(wt.Password,null)))}));var uee=d.forwardRef((function(e,t){var n=e,{fetchHandle:r,fetchParams:i={},needPagination:a=!0,pageSize:o,feQueryKey:u="query",feFixedKey:h="id",feQueryParams:p=[],fePaging:m=!1,autoFetch:g=!0,initFetch:y=!1,onFetchList:v,paginationProps:E}=n,x=c(n,["fetchHandle","fetchParams","needPagination","pageSize","feQueryKey","feFixedKey","feQueryParams","fePaging","autoFetch","initFetch","onFetchList","paginationProps"]);Ur();const[b,C]=f.exports.useState([]),[S,w]=f.exports.useState([]),[T,k]=f.exports.useState([]),[_,O]=f.exports.useState(!1),[A,I]=f.exports.useState(1),[M,N]=f.exports.useState(!1),[P,F]=f.exports.useState(0),[L,R]=f.exports.useState((()=>o||15)),[D,B]=f.exports.useState({});f.exports.useEffect((()=>{g&&($(),O(!0))}),[]),f.exports.useEffect((()=>{!g&&y&&($(),O(!0))}),[y]),f.exports.useEffect((()=>{if(_)if(m){const e=S.slice((A-1)*L,A*L);k(e),v&&v(e)}else $()}),[A,L]),f.exports.useEffect((()=>{m?(D[h]&&D[h]===i[h]?(z(b),I(1)):1===A?_&&$():I(1),B(i)):1===A?_&&$():I(1)}),[JSON.stringify(i)]);const $=async()=>{N(!0);const{success:e,dat:t}=await r(l(s({},i),{p:A,limit:L}));var n;e&&(!m&&(n=t,Array.isArray(n.list))?(C(t.list||[]),F(t.total),v&&v(t.list||[])):(C(t||[]),z(t||[]))),N(!1)},z=e=>{if(Array.isArray(e)){const t=i[u]||"",n=e.filter((e=>{let n=!1;return""!==t&&Array.isArray(p)&&0!==p.length?(p.forEach((r=>{const i=H(r,e);"string"==typeof i&&(n=n||-1!==i.indexOf(t))})),n):(n=!0,n)}));w(n),F(n.length);const r=n.slice((A-1)*L,A*L);k(r),v&&v(r)}else w([]),F(0),k([]),v&&v([])},H=(e,t)=>{const n=()=>{const n=e.indexOf("."),r=e.slice(0,n);return t[r]?H(e.slice(n+1,e.length),t[r]):""},r=()=>{let n=e.indexOf("[");if(n<=0)return"";let r=e.indexOf("]");const i=e.slice(0,n),a=t[i];if(Array.isArray(a)&&a.length){if(-1!==r){const n=e.match(/\[(\w+)\]/);if(n.length<2)return"";{const i=n[1];return a[i]?r===e.length-1?a[i]:H(e.slice(r+1,e.length),t[i]):""}}return""}return""};return-1!==e.indexOf(".")&&-1!==e.indexOf("[")?e.indexOf(".")<e.indexOf("[")?n():r():-1!==e.indexOf(".")?n():-1!==e.indexOf("[")?r():t[e]||""},j=()=>{$()};return f.exports.useImperativeHandle(t,(()=>({refreshList:j}))),d.createElement(Ft,s({dataSource:m?T:b,pagination:s({showTotal:e=>`Total ${e} items`,current:A,pageSize:L,onChange:I,total:P,showSizeChanger:!0,onShowSizeChange:(e,t)=>{R(t),I(1)}},E),loading:M},x))}));const hee=e=>{const{t:t}=Ur(),{teamId:n,onSelect:r}=e,[i,a]=f.exports.useState(),[o,s]=f.exports.useState([]),[l,c]=f.exports.useState([]),[u,h]=f.exports.useState(""),p=[{title:t("用户名"),dataIndex:"username",ellipsis:!0},{title:t("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:t("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:t("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}];f.exports.useEffect((()=>{m()}),[]);const m=()=>{n&&Mo(n).then((e=>{a(e.user_group)}))};return d.createElement("div",null,d.createElement("div",null,d.createElement("span",null,t("团队名称"),"："),i&&i.name),d.createElement("div",{style:{margin:"20px 0 16px"}},o.length>0&&d.createElement("span",null,t("已选择"),o.length,t("项"),"："),l.map(((e,t)=>d.createElement(Mt,{style:{marginBottom:"4px"},closable:!0,onClose:()=>(e=>{let t=l.filter((t=>t.id!==e.id)),n=t.map((e=>e.id));c(t),s(n)})(e),key:e.id},e.username)))),d.createElement(wt,{className:"searchInput",prefix:d.createElement(P,null),placeholder:t("用户名、邮箱或电话"),onPressEnter:e=>{h(e.target.value)}}),d.createElement(uee,{fetchHandle:_o,columns:p,rowKey:"id",needPagination:!0,pageSize:5,fetchParams:{query:u},rowSelection:{preserveSelectedRowKeys:!0,selectedRowKeys:o,onChange:(e,t)=>{r(e),s(e),c(t)}}}))},pee=e=>{const{t:t}=Ur(),{visible:n,userType:r,onClose:i,action:a,userId:o,teamId:c,onSearch:u,width:h}=e,[p,m]=f.exports.useState(),g=f.exports.useRef(null),y=f.exports.useRef(null),v=f.exports.useRef(null),E="business"===r&&(a===ree.CreateBusiness||a===ree.AddBusinessMember||a===ree.EditBusiness),x=(a===ree.CreateUser||a===ree.EditUser)&&r===tee.User,b=(a===ree.CreateTeam||a===ree.EditTeam)&&r===tee.Team,C=a===ree.Reset,S=a===ree.AddUser,w=async e=>{if(x){let e=g.current.form;const r=await e.validateFields();let c={};r.contacts&&r.contacts.forEach((e=>{c[e.key]=e.value}));let u=l(s({},r),{contacts:c,confirm:void 0});a===ree.CreateUser&&(n=u,ji("/api/n9e/users",{method:Li.Post,data:n}).then((e=>e&&e.dat))).then((e=>{Et.success(t("用户创建成功")),i(!0)})),a===ree.EditUser&&o&&function(e,t){return ji(`/api/n9e/user/${e}/profile`,{method:Li.Put,data:t}).then((e=>e&&e.dat))}(o,u).then((e=>{Et.success(t("用户信息修改成功")),i(!0)}))}var n;if(b){let n=y.current.form;const r=await n.validateFields();let o=s({},r);a===ree.CreateTeam&&function(e){return ji("/api/n9e/user-groups",{method:Li.Post,data:e}).then((e=>e&&e.dat))}(o).then((n=>{Et.success(t("团队创建成功")),i(!0),"search"===e&&u(o.name)})),a===ree.EditTeam&&c&&function(e,t){return ji(`/api/n9e/user-group/${e}`,{method:Li.Put,data:t}).then((e=>e&&e.dat))}(c,o).then((e=>{Et.success(t("团队信息修改成功")),i("updateName")}))}if(C&&o){let e=v.current.form;const n=await e.validateFields();let r=s({},n);(function(e,t){return ji(`/api/n9e/user/${e}/password`,{method:Li.Put,data:t}).then((e=>e&&e.dat))})(o,r).then((e=>{Et.success(t("密码重置成功")),i()}))}if(S&&c){(function(e,t){return ji(`/api/n9e/user-group/${e}/members`,{method:Li.Post,data:t}).then((e=>e&&e.dat))})(c,{ids:p}).then((e=>{Et.success(t("添加成功")),i("updateMember")}))}if(E){let e=y.current.form;const{name:n,members:r,label_enable:o,label_value:s}=await e.validateFields();let l={name:n,label_enable:o?1:0,label_value:s,members:r?r.map((({perm_flag:e,user_group_id:t})=>({user_group_id:t,perm_flag:e?"rw":"ro"}))):void 0};if(a===ree.CreateBusiness&&function(e){return ji("/api/n9e/busi-groups",{method:Li.Post,data:e}).then((e=>e&&e.dat))}(l).then((e=>{Et.success(t("业务组创建成功")),i("create"),u(e)})),a===ree.EditBusiness&&c&&function(e,t){return ji(`/api/n9e/busi-group/${e}`,{method:Li.Put,data:t}).then((e=>e&&e.dat))}(c,l).then((e=>{Et.success(t("业务组信息修改成功")),i("update")})),a===ree.AddBusinessMember&&c){const e=r.map((({perm_flag:e,user_group_id:t})=>({user_group_id:t,perm_flag:e?"rw":"ro",busi_group_id:c})));(function(e,t){return ji(`/api/n9e/busi-group/${e}/members`,{method:Li.Post,data:t}).then((e=>e&&e.dat))})(c,e).then((e=>{Et.success(t("业务组成员添加成功")),i("addMember")}))}}};return d.createElement(Tt,{title:a===ree.CreateUser?t("创建用户"):a===ree.CreateTeam?t("创建团队"):a===ree.CreateBusiness?t("创建业务组"):a===ree.AddBusinessMember?t("添加业务组成员"):a===ree.EditBusiness?t("编辑业务组"):a===ree.EditUser?t("编辑用户信息"):a===ree.EditTeam?t("编辑团队信息"):a===ree.Reset?t("重置密码"):a===ree.Disable?t("禁用"):a===ree.Undisable?t("启用"):a===ree.AddUser?t("添加成员"):void 0,visible:n,width:h||700,onCancel:i,destroyOnClose:!0,footer:[d.createElement(Ct,{key:"back",onClick:i},t("取消")),d.createElement(Ct,{key:"submit",type:"primary",onClick:()=>w()},t("确定")),a===ree.CreateTeam&&d.createElement(Ct,{type:"primary",onClick:()=>w("search")},t("确定并搜索"))]},x&&d.createElement(J7,{ref:g,userId:o}),b&&d.createElement(eee,{ref:y,teamId:c}),E&&d.createElement(lee,{ref:y,businessId:c,action:a}),C&&d.createElement(cee,{ref:v,userId:o}),S&&d.createElement(hee,{teamId:c,onSelect:e=>m(e)}))};const{confirm:dee}=Tt,fee=()=>{const{t:e}=Ur();pe();const[t,n]=f.exports.useState(tee.Team),[r,i]=f.exports.useState(!1),[a,o]=f.exports.useState(),[s,l]=f.exports.useState(""),[c,u]=f.exports.useState(""),[h,p]=f.exports.useState(""),[m,g]=f.exports.useState([]),[y,v]=f.exports.useState([]),[E,x]=f.exports.useState(),[b,C]=f.exports.useState([]),[S,w]=f.exports.useState(!1),[T,k]=f.exports.useState(""),[_,A]=f.exports.useState("");f.exports.useRef(null),ci((e=>e.account));const I=[...[{title:e("用户名"),dataIndex:"username",ellipsis:!0},{title:e("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:e("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:e("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}],{title:e("操作"),width:"100px",render:(t,n)=>d.createElement("a",{style:{color:"red"},onClick:()=>{let t={ids:[n.id]};dee({title:e("是否删除该成员"),onOk:()=>{var n,r;(n=c,r=t,ji(`/api/n9e/user-group/${n}/members`,{method:Li.Delete,data:r}).then((e=>e&&e.dat))).then((t=>{Et.success(e("成员删除成功")),B("updateMember")}))},onCancel:()=>{}})}},e("删除"))}];f.exports.useEffect((()=>{M(!0)}),[]),f.exports.useEffect((()=>{c&&F(c)}),[c]);const M=(e=!1)=>{N("",e)},N=(e,t)=>{Oo({query:e||""}).then((e=>{C(e.dat||[]),(!c||t)&&e.dat.length>0&&u(e.dat[0].id)}))},F=e=>{w(!0),Mo(e).then((e=>{x(e.user_group),g(e.users),v(e.users),w(!1)}))},L=(e,t)=>{if("team"===e)N(t);else if(t){w(!0);let e=y.filter((e=>-1!==e.username.indexOf(t)||-1!==e.nickname.indexOf(t)||-1!==e.id.toString().indexOf(t)||-1!==e.phone.indexOf(t)||-1!==e.email.indexOf(t)));g(e),w(!1)}else F(c)},R=(e,t,n)=>{u(t||""),p(n||""),o(e),i(!0)},B=(e=!1)=>{i(!1),T?L("team",T):"updateMember"!==e&&M("updateName"!==e),!c||"update"!==e&&"updateMember"!==e&&"updateName"!==e||F(c)};return d.createElement(Pa,{title:e("团队管理"),icon:d.createElement(O,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{style:{display:"flex",height:"100%"}},d.createElement("div",{className:"left-tree-area"},d.createElement("div",{className:"sub-title"},e("团队列表"),d.createElement(Ct,{style:{height:"30px"},size:"small",type:"link",onClick:()=>{R(ree.CreateTeam)}},e("新建团队"))),d.createElement("div",{style:{display:"flex",margin:"5px 0px 12px"}},d.createElement(wt,{prefix:d.createElement(P,null),value:T,onChange:e=>{k(e.target.value)},placeholder:e("搜索团队名称"),onPressEnter:e=>{N(e.target.value)},onBlur:e=>{N(e.target.value)}})),d.createElement(Kt,{style:{marginBottom:"12px",flex:1,overflow:"auto"},dataSource:b,size:"small",renderItem:e=>d.createElement(Kt.Item,{key:e.id,className:c===e.id?"is-active":"",onClick:()=>u(e.id)},e.name)})),b.length>0?d.createElement("div",{className:"resource-table-content"},d.createElement(Ot,{className:"team-info"},d.createElement(At,{span:"24",style:{color:"#000",fontSize:"14px",fontWeight:"bold",display:"inline"}},E&&E.name,d.createElement(De,{title:e("刷新"),style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>R(ree.EditTeam,c)}),d.createElement(Pe,{style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>{dee({title:e("是否删除该团队"),onOk:()=>{var t;(t=c,ji(`/api/n9e/user-group/${t}`,{method:Li.Delete}).then((e=>e&&e.dat))).then((t=>{Et.success(e("团队删除成功")),B(!0)}))},onCancel:()=>{}})}})),d.createElement(At,{style:{marginTop:"8px",color:"#666"}},e("备注"),"：",E&&E.note?E.note:"-")),d.createElement(Ot,{justify:"space-between",align:"middle"},d.createElement(At,{span:"12"},d.createElement(wt,{prefix:d.createElement(P,null),value:_,className:"searchInput",onChange:e=>A(e.target.value),placeholder:e("用户名、显示名、邮箱或手机"),onPressEnter:e=>L("member",_)})),d.createElement(Ct,{type:"primary",ghost:!0,onClick:()=>{R(ree.AddUser,c)}},e("添加成员"))),d.createElement(Ft,{rowKey:"id",columns:I,dataSource:m,loading:S})):d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(D,{style:{color:"#1473ff"}})," ",e("提示信息")),d.createElement("p",null,"没有与您相关的团队，请先 ",d.createElement("a",{onClick:()=>R(ree.CreateTeam)},"创建团队")))),d.createElement(pee,{visible:r,action:a,width:500,userType:t,onClose:B,onSearch:e=>{k(e),L("team",e)},userId:s,teamId:c,memberId:h})))},{confirm:mee}=Tt,gee=()=>{const{t:e}=Ur(),[t,n]=f.exports.useState(tee.User),[r,i]=f.exports.useState(!1),[a,o]=f.exports.useState(),[s,l]=f.exports.useState(""),[c,u]=f.exports.useState(""),[h,p]=f.exports.useState("");f.exports.useState([]),f.exports.useState([]);const[m,g]=f.exports.useState("");f.exports.useState("");const y=f.exports.useRef(null);let{profile:v}=ci((e=>e.account));const E=[...[{title:e("用户名"),dataIndex:"username",ellipsis:!0},{title:e("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:e("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:e("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}],{title:e("角色"),dataIndex:"roles",render:(e,t)=>e.join(", ")},{title:e("创建时间"),dataIndex:"create_at",render:e=>I.unix(e).format("YYYY-MM-DD HH:mm:ss"),sorter:(e,t)=>e.create_at-t.create_at},{title:e("操作"),width:"240px",render:(t,n)=>d.createElement(d.Fragment,null,d.createElement(Ct,{className:"oper-name",type:"link",onClick:()=>x(ree.EditUser,n.id)},e("编辑")),d.createElement(Ct,{className:"oper-name",type:"link",onClick:()=>x(ree.Reset,n.id)},e("重置密码")),d.createElement("a",{style:{color:"red",marginLeft:"16px"},onClick:()=>{mee({title:e("是否删除该用户"),onOk:()=>{var t;(t=n.id,ji(`/api/n9e/user/${t}`,{method:Li.Delete}).then((e=>e&&e.dat))).then((t=>{Et.success(e("用户删除成功")),b()}))},onCancel:()=>{}})}},e("删除")))}];v.roles.includes("Admin")||E.pop();const x=(e,n,r)=>{n?t===tee.User?l(n):u(n):t===tee.User?l(""):u(""),p(r||""),o(e),i(!0)},b=()=>{i(!1),y.current.refreshList()};return d.createElement(Pa,{title:e("用户管理"),icon:d.createElement(O,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{className:"user-content"},d.createElement(Ot,{className:"event-table-search"},d.createElement("div",{className:"event-table-search-left"},d.createElement(wt,{className:"searchInput",prefix:d.createElement(P,null),onPressEnter:e=>{let t=e.target.value;g(t)},placeholder:e("用户名、邮箱或手机")})),d.createElement("div",{className:"event-table-search-right"},t===tee.User&&v.roles.includes("Admin")&&d.createElement("div",{className:"user-manage-operate"},d.createElement(Ct,{type:"primary",onClick:()=>x(t===tee.User?ree.CreateUser:e("创建团队")),ghost:!0},e("创建用户"))))),d.createElement(uee,{ref:y,fetchHandle:_o,columns:E,rowKey:"id",needPagination:!0,fetchParams:{query:m},tableLayout:"auto"})),d.createElement(pee,{visible:r,action:a,width:t===tee.User?500:700,userType:t,onClose:b,userId:s,teamId:c,memberId:h})))};const{confirm:yee}=Tt,vee=()=>{const{t:e}=Ur(),t=Fi().get("id"),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState(),[o,s]=f.exports.useState(t||""),[l,c]=f.exports.useState(""),[u,h]=f.exports.useState([]);f.exports.useState(0),f.exports.useState([]);const[p,m]=f.exports.useState(),[g,y]=f.exports.useState([]);f.exports.useState("");const[v,E]=f.exports.useState(!1),[x,b]=f.exports.useState(""),[C,S]=f.exports.useState("");f.exports.useRef(null),ci((e=>e.account));const w=ai(),T=[{title:e("团队名称"),dataIndex:["user_group","name"],ellipsis:!0},{title:e("团队备注"),dataIndex:["user_group","note"],ellipsis:!0,render:(e,t)=>t.user_group.note||"-"},{title:e("权限"),dataIndex:"perm_flag"},{title:e("操作"),width:"100px",render:(t,n)=>d.createElement("a",{style:{color:u.length>1?"red":"#00000040"},onClick:()=>{if(u.length<=1)return;let t=[{user_group_id:n.user_group.id,busi_group_id:o}];yee({title:e("是否删除该团队"),onOk:()=>{(function(e,t){return ji(`/api/n9e/busi-group/${e}/members`,{method:Li.Delete,data:t}).then((e=>e&&e.dat))})(o,t).then((t=>{Et.success(e("团队删除成功")),I("deleteMember")}))},onCancel:()=>{}})}},e("删除"))}];f.exports.useEffect((()=>{o&&_(o)}),[o]),f.exports.useEffect((()=>{k()}),[]);const k=(e,t)=>{Ao({query:void 0===e?x:e,limit:200}).then((e=>{y(e.dat||[]),(!o||t)&&e.dat.length>0&&s(e.dat[0].id)}))},_=e=>{E(!0),Io(e).then((e=>{w({type:"common/saveData",prop:"curBusiItem",data:e}),m(e),h(e.user_groups),E(!1)}))},A=(e,t,n)=>{c(n||""),a(e),r(!0)},I=e=>{r(!1),["create","delete","update"].includes(e)&&((e=>{k(void 0,"delete"===e)})(e),w({type:"common/getBusiGroups"})),o&&["update","addMember","deleteMember"].includes(e)&&_(o)};return d.createElement(Pa,{title:e("业务组管理"),icon:d.createElement(O,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{style:{display:"flex",height:"100%"}},d.createElement("div",{className:"left-tree-area"},d.createElement("div",{className:"sub-title"},e("业务组列表"),d.createElement(Ct,{style:{height:"30px"},size:"small",type:"link",onClick:()=>{A(ree.CreateBusiness)}},e("新建业务组"))),d.createElement("div",{style:{display:"flex",margin:"5px 0px 12px"}},d.createElement(wt,{prefix:d.createElement(P,null),placeholder:e("搜索业务组名称"),onPressEnter:e=>{k(e.target.value)},onBlur:e=>{k(e.target.value)}})),d.createElement(Kt,{style:{marginBottom:"12px",flex:1,overflow:"auto"},dataSource:g,size:"small",renderItem:e=>d.createElement(Kt.Item,{key:e.id,className:o==e.id?"is-active":"",onClick:()=>s(e.id)},e.name)})),g.length>0?d.createElement("div",{className:"resource-table-content"},d.createElement(Ot,{className:"team-info"},d.createElement(At,{span:"24",style:{color:"#000",fontSize:"14px",fontWeight:"bold",display:"inline"}},p&&p.name,d.createElement(De,{title:e("刷新"),style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>A(ree.EditBusiness)}),d.createElement(Pe,{style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>{yee({title:e("是否删除该业务组"),onOk:()=>{(function(e){return ji(`/api/n9e/busi-group/${e}`,{method:Li.Delete}).then((e=>e&&e.dat))})(o).then((t=>{Et.success(e("业务组删除成功")),I("delete")}))},onCancel:()=>{}})}})),d.createElement(At,{style:{marginTop:"8px",color:"#666"}},e("备注"),"：",e("告警规则，告警事件，监控对象，自愈脚本等都归属业务组，是一个在系统里可以自闭环的组织"))),d.createElement(Ot,{justify:"space-between",align:"middle"},d.createElement(At,{span:"12"},d.createElement(wt,{prefix:d.createElement(P,null),value:C,className:"searchInput",onChange:e=>S(e.target.value),placeholder:e("搜索团队名称")})),d.createElement(Ct,{type:"primary",ghost:!0,onClick:()=>{A(ree.AddBusinessMember)}},e("添加团队"))),d.createElement(Ft,{rowKey:"id",columns:T,dataSource:u&&u.length>0?u.filter((e=>e.user_group&&-1!==e.user_group.name.indexOf(C))):[],loading:v})):d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(D,{style:{color:"#1473ff"}})," ",e("提示信息")),d.createElement("p",null,"业务组（监控对象、监控大盘、告警规则、自愈脚本都要归属某个业务组）为空，请先 ",d.createElement("a",{onClick:()=>A(ree.CreateBusiness)},"创建业务组"))))),d.createElement(pee,{visible:n,action:i,userType:"business",onClose:I,teamId:o,onSearch:e=>{s(e)}}))},Eee=[sn.theme({"&":{color:"#abb2bf",backgroundColor:"#282c34"},".cm-content":{caretColor:"#528bff"},"&.cm-focused .cm-cursor":{borderLeftColor:"#528bff"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:"#abb2bf"},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#2c313a"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{backgroundColor:"#282c34",color:"#7d8799",border:"none"},".cm-activeLineGutter":{backgroundColor:"#2c313a"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:"#353a42"},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:"#353a42",borderBottomColor:"#353a42"},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:"#2c313a",color:"#abb2bf"}}},{dark:!0}),ln.define([{tag:cn.keyword,color:"#c678dd"},{tag:[cn.name,cn.deleted,cn.character,cn.propertyName,cn.macroName],color:"#e06c75"},{tag:[cn.function(cn.variableName),cn.labelName],color:"#61afef"},{tag:[cn.color,cn.constant(cn.name),cn.standard(cn.name)],color:"#d19a66"},{tag:[cn.definition(cn.name),cn.separator],color:"#abb2bf"},{tag:[cn.typeName,cn.className,cn.number,cn.changed,cn.annotation,cn.modifier,cn.self,cn.namespace],color:"#e5c07b"},{tag:[cn.operator,cn.operatorKeyword,cn.url,cn.escape,cn.regexp,cn.link,cn.special(cn.string)],color:"#56b6c2"},{tag:[cn.meta,cn.comment],color:"#7d8799"},{tag:cn.strong,fontWeight:"bold"},{tag:cn.emphasis,fontStyle:"italic"},{tag:cn.strikethrough,textDecoration:"line-through"},{tag:cn.link,color:"#7d8799",textDecoration:"underline"},{tag:cn.heading,fontWeight:"bold",color:"#e06c75"},{tag:[cn.atom,cn.bool,cn.special(cn.variableName)],color:"#d19a66"},{tag:[cn.processingInstruction,cn.string,cn.inserted],color:"#98c379"},{tag:cn.invalid,color:"#ffffff"}])];var xee=sn.theme({"&":{backgroundColor:"#fff"}},{dark:!1});var bee={exports:{}},Cee={},See=f.exports,wee=60103;if(Cee.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var Tee=Symbol.for;wee=Tee("react.element"),Cee.Fragment=Tee("react.fragment")}var kee=See.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_ee=Object.prototype.hasOwnProperty,Oee={key:!0,ref:!0,__self:!0,__source:!0};function Aee(e,t,n){var r,i={},a=null,o=null;for(r in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(o=t.ref),t)_ee.call(t,r)&&!Oee.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:wee,type:e,key:a,ref:o,props:i,_owner:kee.current}}Cee.jsx=Aee,Cee.jsxs=Aee,bee.exports=Cee;var Iee=["className","value","selection","extensions","onChange","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root"],Mee=d.forwardRef(((e,t)=>{var{className:n,value:r="",selection:i,extensions:a=[],onChange:o,onUpdate:s,autoFocus:l,theme:c="light",height:u,minHeight:h,maxHeight:p,width:d,minWidth:m,maxWidth:g,basicSetup:y,placeholder:v,indentWithTab:E,editable:x,readOnly:b,root:C}=e,S=Be(e,Iee),w=f.exports.useRef(null),{state:T,view:k,container:_,setContainer:O}=function(e){var{value:t,selection:n,onChange:r,onUpdate:i,extensions:a=[],autoFocus:o,theme:s="light",height:l="",minHeight:c="",maxHeight:u="",placeholder:h="",width:p="",minWidth:d="",maxWidth:m="",editable:g=!0,readOnly:y=!1,indentWithTab:v=!0,basicSetup:E=!0,root:x}=e,[b,C]=f.exports.useState(e.container),[S,w]=f.exports.useState(),[T,k]=f.exports.useState(),_=sn.theme({"&":{height:l,minHeight:c,maxHeight:u,width:p,minWidth:d,maxWidth:m}}),O=[sn.updateListener.of((e=>{if(e.docChanged&&"function"==typeof r){var t=e.state.doc.toString();r(t,e)}})),_];switch(v&&O.unshift(xn.of([Nn])),E&&O.unshift(Pn),h&&O.unshift(_n(h)),s){case"light":O.push(xee);break;case"dark":O.push(Eee);break;default:O.push(s)}return!1===g&&O.push(sn.editable.of(!1)),y&&O.push(pn.readOnly.of(!0)),i&&"function"==typeof i&&O.push(sn.updateListener.of(i)),O=O.concat(a),f.exports.useEffect((()=>{if(b&&!T){var e=pn.create({doc:t,selection:n,extensions:O});if(k(e),!S){var r=new sn({state:e,parent:b,root:x});w(r)}}return()=>{S&&w(void 0)}}),[b,T]),f.exports.useEffect((()=>()=>{S&&(S.destroy(),w(void 0))}),[S]),f.exports.useEffect((()=>{o&&S&&S.focus()}),[o,S]),f.exports.useEffect((()=>{var e=S?S.state.doc.toString():"";S&&t!==e&&S.dispatch({changes:{from:0,to:e.length,insert:t||""}})}),[t,S]),f.exports.useEffect((()=>{S&&S.dispatch({effects:Fn.reconfigure.of(O)})}),[s,a,l,c,u,p,h,d,m,g,v,E]),{state:T,setState:k,view:S,setView:w,container:b,setContainer:C}}({container:w.current,root:C,value:r,autoFocus:l,theme:c,height:u,minHeight:h,maxHeight:p,width:d,minWidth:m,maxWidth:g,basicSetup:y,placeholder:v,indentWithTab:E,editable:x,readOnly:b,selection:i,onChange:o,onUpdate:s,extensions:a});if(f.exports.useImperativeHandle(t,(()=>({editor:_,state:T,view:k})),[_,T,k]),f.exports.useEffect((()=>{O(w.current)}),[]),"string"!=typeof r)throw new Error("value must be typeof string but got "+typeof r);var A="string"==typeof c?"cm-theme-"+c:"cm-theme";return bee.exports.jsx("div",te({ref:w,className:A+(n?" "+n:"")},S))}));Mee.displayName="CodeMirror";const Nee=un.deserialize({version:13,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[[Ln.openedBy,7,"{",12,"["],[Ln.closedBy,8,"}",13,"]"]],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Pee=Dn.define({parser:Nee.configure({props:[Bn.add({Object:$n({except:/^\s*\}/}),Array:$n({except:/^\s*\]/})}),zn.add({"Object Array":Hn}),jn({String:cn.string,Number:cn.number,"True False":cn.bool,PropertyName:cn.propertyName,null:cn.null,",":cn.separator,"[ ]":cn.squareBracket,"{ }":cn.brace})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Fee(){return new Rn(Pee)}function Lee(e,t){return e.localeCompare(t)}function Ree(e,t){let n=[];return n=_.isEmpty(e)?[{title:"Document",dataIndex:"fields",render:e=>d.createElement("dl",{className:"event-logs-row"},_.map(e,((e,t)=>d.createElement(d.Fragment,{key:t},d.createElement("dt",null,t,":")," ",d.createElement("dd",null,_.join(e,","))))))}]:_.map(e,(e=>({title:e,dataIndex:"fields",render:t=>d.createElement("div",{style:{minWidth:8*e.length}},t[e]),sorter:(t,n)=>Lee(_.join(_.get(t,`fields[${e}]`,"")),_.join(_.get(n,`fields[${e}]`,"")))}))),t&&n.unshift({title:"Time",dataIndex:"fields",width:200,render:e=>e[t],sorter:(e,n)=>Lee(_.join(_.get(e,`fields[${t}]`,"")),_.join(_.get(n,`fields[${t}]`,"")))}),n}const Dee={selected:"已选字段",available:"可选字段"},Bee={selected:d.createElement(G,null),available:d.createElement(Z,null)};function $ee(e){const{style:t={},fieldsSearch:n,fields:r,type:i,onSelect:a,onRemove:o}=e,[l,c]=d.useState(!0),u=_.filter(r,(e=>!n||e.indexOf(n)>-1));return!_.isEmpty(u)&&"selected"===i||"available"===i?d.createElement("div",{style:s({},t)},d.createElement("div",{className:"discover-fields-title",onClick:()=>{c(!l)}},d.createElement("span",null,l?d.createElement(N,null):d.createElement(L,null)," ",Dee[i]),d.createElement("span",null,d.createElement(Mt,{color:n?"#6C53B1":""},u.length))),l&&_.map(u,(e=>d.createElement("div",{className:"es-discover-fields-item",key:e,onClick:()=>{"selected"===i&&o?o(e):"available"===i&&a&&a(e)}},d.createElement("span",{className:"es-discover-fields-item-content"},e),d.createElement("span",{className:"es-discover-fields-item-oper"},Bee[i]))))):null}function zee(e){const{fields:t,setFields:n,value:r,onChange:i}=e,[a,o]=f.exports.useState("");return d.createElement("div",{className:"discover-sidebar"},d.createElement("div",{className:"discover-sidebar-title"},d.createElement(wt,{placeholder:"搜索字段",value:a,onChange:e=>{o(e.target.value)},allowClear:!0})),d.createElement("div",{className:"discover-sidebar-content"},d.createElement($ee,{style:{marginBottom:10},fieldsSearch:a,fields:r,type:"selected",onRemove:e=>{i(_.without(r,e)),n(_.sortBy(_.concat(t,e)))}}),d.createElement($ee,{fields:t,fieldsSearch:a,type:"available",onSelect:e=>{i(_.concat(r,e)),n(_.sortBy(_.without(t,e)))}})))}function Hee(e){const{datasourceName:t,form:n}=e,r=new URLSearchParams(E().search),i=[];for(const[s,l]of r)["data_source_id","index_name","timestamp"].includes(s)||i.push(`${s}:"${l}"`);const[a,o]=f.exports.useState([]),[c,u]=f.exports.useState(""),[h,p]=f.exports.useState(!1),[m,g]=f.exports.useState([]),[y,v]=f.exports.useState([]),[x,b]=f.exports.useState(""),[C,S]=f.exports.useState([]),[w,T]=f.exports.useState([]),[k,O]=f.exports.useState(!0),[A,M]=f.exports.useState(1),[P,F]=f.exports.useState("min"),R=f.exports.useRef(0),D=f.exports.useRef(1),B=f.exports.useRef(),$=e=>{if(B.current){const{start:t,end:n}=B.current;(async function(e){const{query:t,datasourceCate:n,datasourceName:r,start:i,end:a,interval:o,intervalUnit:s}=e;let l=[];const c=await ka({cate:n,cluster:r,query:[{index:t.index,filter:t.filter,date_field:t.date_field,interval:Iu(o,s),value:{func:"count"},start:i,end:a}]});return l=_.map(c.dat,(e=>({id:_.uniqueId("series_"),name:P7(e.metric),metric:e.metric,data:e.values}))),l})(l(s({},B.current),{datasourceCate:"elasticsearch",datasourceName:e.datasourceName,query:e.query,interval:A,intervalUnit:P})).then((e=>{b(`${I.unix(t).format("YYYY.MM.DD HH:mm:ss")} - ${I.unix(n).format("YYYY.MM.DD HH:mm:ss")}`),v(e||[])}))}},z=e=>{n.validateFields().then((n=>{const{start:r,end:i}=ms(n.query.range);B.current={start:I(r).unix(),end:I(i).unix()},1===e&&p(!0),function(e){return ji("/api/n9e-plus/logs-query",{method:Li.Post,data:e})}({cate:"elasticsearch",cluster:t||n.datasourceName,query:[l(s({},B.current),{index:n.query.index,filter:n.query.filter,date_field:n.query.date_field,limit:50,page:e})]}).then((t=>{const n=_.map(t.dat.list,(e=>({id:_.uniqueId(),fields:e.fields,json:e._source})));if(R.current=t.dat.total,g(1===e?n:[...m,...n]),1===e){const e=document.querySelectorAll(".event-logs-table .ant-table-body")[0];null==e||e.scrollTo(0,0)}})).finally((()=>{p(!1)})),1===e&&$(n)}))};f.exports.useEffect((()=>{_.isEmpty(t)||Oa({cate:"elasticsearch",cluster:t}).then((e=>{const t=n.getFieldValue(["query","index"]),i=_.map(e.dat,(e=>({value:e})));_.includes(_.map(i,"value"),t)||r.has("data_source_id")||n.setFieldsValue({query:{index:""}}),o(i)}))}),[t,r.get("data_source_id")]),f.exports.useEffect((()=>{if(r.get("data_source_id")){const e=r.get("data_source_id");Promise.resolve({data:[]}).then((t=>{n.setFieldsValue({datasourceName:null==t?void 0:t[Number(e)],query:{index:r.get("index_name"),filter:null==i?void 0:i.join(" and "),date_field:r.get("timestamp")}}),H(r.get("index_name")),z(1)}))}}),[r.get("data_source_id")]),f.exports.useEffect((()=>{$(n.getFieldsValue())}),[A,P]);const{run:H}=ae((e=>{!_.isEmpty(t)&&e&&Aa({cate:"elasticsearch",cluster:t,index:e}).then((e=>{const t=n.getFieldValue(["query","date_field"]);_.includes(e.dat,t)||(_.includes(e.dat,"@timestamp")?n.setFieldsValue({query:{date_field:"@timestamp"}}):n.setFieldsValue({query:{date_field:""}})),S(e.dat)}))}),{wait:500});return d.createElement("div",{className:"es-discover-container"},d.createElement(zt,null,d.createElement(wt.Group,{compact:!0},d.createElement("span",{className:"ant-input-group-addon",style:{width:60,height:32,lineHeight:"32px"}},"索引"," ",d.createElement(yt,{title:d.createElement("div",null,"支持多种配置方式",d.createElement("br",null),"1. 指定单个索引 gb 在 gb 索引中搜索所有的文档",d.createElement("br",null),"2. 指定多个索引 gb,us 在 gb 和 us 索引中搜索所有的文档",d.createElement("br",null),"3. 指定索引前缀 g*,u* 在任何以 g 或者 u 开头的索引中搜索所有的文档",d.createElement("br",null))},d.createElement(ce,null))),d.createElement(St.Item,{name:["query","index"],rules:[{required:!0,message:"请输入索引"}],validateTrigger:"onBlur",style:{width:190}},d.createElement(Ht,{dropdownMatchSelectWidth:!1,style:{minWidth:100},options:_.filter(a,(e=>!c||e.value.includes(c))),onSearch:e=>{u(e)},onChange:e=>{H(e)}}))),d.createElement(wt.Group,{compact:!0},d.createElement("span",{className:"ant-input-group-addon",style:{width:90,height:32,lineHeight:"32px"}},"过滤条件"," ",d.createElement("a",{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax ",target:"_blank"},d.createElement(ce,null))),d.createElement(St.Item,{name:["query","filter"],style:{minWidth:300}},d.createElement(wt,null))),d.createElement("div",{style:{display:"flex"}},d.createElement(zt,null,d.createElement(wt.Group,{compact:!0},d.createElement("span",{className:"ant-input-group-addon",style:{width:90,height:32,lineHeight:"32px"}},"时间字段"," "),d.createElement(St.Item,{name:["query","date_field"],initialValue:"@timestamp",style:{width:"calc(100% - 90px)"}},d.createElement(Nt,{dropdownMatchSelectWidth:!1,style:{width:150},showSearch:!0},_.map(_.sortBy(_.concat(C,w)),(e=>d.createElement(Nt.Option,{key:e,value:e},e)))))),d.createElement(St.Item,{name:["query","range"],initialValue:{start:"now-1h",end:"now"}},d.createElement(Ns,null)),d.createElement(St.Item,null,d.createElement(Ct,{type:"primary",onClick:()=>{z(1)}},"查询"))))),d.createElement(Qt,{spinning:h},_.isEmpty(m)?d.createElement("div",{style:{display:"flex",justifyContent:"center"}},d.createElement(Zt,{image:Zt.PRESENTED_IMAGE_SIMPLE})):d.createElement("div",{className:"es-discover-content"},d.createElement(zee,{fields:C,setFields:S,value:w,onChange:T}),d.createElement("div",{className:"es-discover-main"},d.createElement("div",{className:"es-discover-chart"},d.createElement("div",{className:"es-discover-chart-title"},d.createElement("span",null,x),d.createElement("span",{style:{marginLeft:10}},"间隔:"," ",d.createElement(Gt,{size:"small",value:A,min:1,onBlur:e=>{const t=_.toNumber(e.target.value);t>0&&M(t)},onPressEnter:e=>{const t=_.toNumber(e.target.value);t>0&&M(t)}})," ",d.createElement(Nt,{size:"small",style:{width:70},value:P,onChange:e=>F(e)},d.createElement(Nt.Option,{value:"second"},"秒"),d.createElement(Nt.Option,{value:"min"},"分钟"),d.createElement(Nt.Option,{value:"hour"},"小时")))),d.createElement("div",{className:"es-discover-chart-content"},d.createElement(_u,{series:y,values:{custom:{drawStyle:"bar",lineInterpolation:"smooth"},options:{legend:{displayMode:"hidden"},tooltip:{mode:"all"}}}}))),d.createElement("div",{onScrollCapture:()=>{const e=document.querySelectorAll(".event-logs-table .ant-table-body")[0];if(Math.round(null==e?void 0:e.scrollTop)+(null==e?void 0:e.clientHeight)===(null==e?void 0:e.scrollHeight)){if(m.length>500)return O(!1),!1;z(D.current+1),D.current=D.current+1}}},d.createElement(Ft,{size:"small",className:"event-logs-table",tableLayout:"fixed",rowKey:"id",columns:Ree(w,n.getFieldValue(["query","date_field"])),dataSource:m,expandable:{expandedRowRender:e=>{let t="";try{t=JSON.stringify(e.json,null,4)}catch(uu){console.error(uu),t="无法解析"}return d.createElement(Mee,{value:t,height:"auto",theme:"light",basicSetup:!1,editable:!1,extensions:[Gn.fallback,Fee(),sn.lineWrapping,sn.theme({"&":{backgroundColor:"#F6F6F6 !important"},"&.cm-editor.cm-focused":{outline:"unset"}})]})},expandIcon:({expanded:e,onExpand:t,record:n})=>e?d.createElement(N,{onClick:e=>t(n,e)}):d.createElement(L,{onClick:e=>t(n,e)})},scroll:{x:_.isEmpty(w)?void 0:"max-content",y:k?312:277},pagination:!1,footer:k?void 0:()=>"只能查询您搜索匹配的前 500 个日志，请细化您的过滤条件。"}))))))}const jee=(e,t,n)=>ji(e,{method:Li.Get,params:t,headers:n,silence:!0}).then((e=>e.data));function Gee(e){const{url:t,datasourceId:n,datasourceIdRequired:r,datasourceName:i,promql:a,setQueryStats:o,setErrorContent:s,contentMaxHeight:l,timestamp:c,setTimestamp:u,refreshFlag:h}=e,[p,m]=f.exports.useState(!1),[g,y]=f.exports.useState({resultType:"matrix",result:[]});return f.exports.useEffect((()=>{if(r?n&&a:a){const e=Date.now();m(!0),jee(`${t}/api/v1/query`,{time:c||I().unix(),query:a},r?{"X-Data-Source-Id":n}:{"X-Cluster":i||localStorage.getItem("curCluster")||"DEFAULT",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`}).then((t=>{const{resultType:n}=t;let{result:r}=t,i=!1,a=0;r&&(r.length>1e4&&(i=!0,a=r.length,r=r.slice(1e4)),r.forEach((e=>{e.values&&e.values.length>1e4&&(i=!0,e.values.length>a&&(a=e.values.length),e.values=e.values.slice(1e4))}))),s(i?`Warning：Fetched ${a} metrics, only displaying first 10000`:""),y("scalar"===n||"string"===n?{resultType:n,result:[r]}:{resultType:n,result:r}),o({loadTime:Date.now()-e,resultSeries:r.length})})).catch((e=>{const t=_.get(e,"data.error");s(`Error executing query: ${t}`)})).finally((()=>{m(!1)}))}}),[c,n,i,a,h]),d.createElement("div",{className:"prom-graph-table-container"},d.createElement("div",{className:"prom-graph-table-controls"},d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"Time"),d.createElement(Xt,{value:c?I.unix(c):void 0,onChange:e=>{u(e?e.unix():void 0)},showTime:!0,placeholder:"Evaluation time",getPopupContainer:()=>document.body,disabledDate:e=>e>I()}))),d.createElement(Kt,{className:"prom-graph-table-list",style:{maxHeight:l},size:"small",loading:p,dataSource:g?g.result:[],renderItem:e=>{return d.createElement(Kt.Item,null,d.createElement("div",null,function(e,t){const{metric:n}=t;if("scalar"===e)return"scalar";if("string"===e)return"string";const r=null==n?void 0:n.__name__,i=_.keys(n).filter((e=>"__name__"!==e)).map(((e,t,r)=>d.createElement("span",{key:t},d.createElement("strong",null,e),'="',n[e],'"',t===r.length-1?"":", ")));return d.createElement(d.Fragment,null,r,"{",i,"}")}(null==g?void 0:g.resultType,e)),d.createElement("div",null,(t=null==g?void 0:g.resultType,n=e,"scalar"===t||"string"===t?_.get(n,"[1]")||"-":"vector"===t?_.get(n,"value[1]","-"):"matrix"===t?_.map(_.get(n,"values"),((e,t)=>d.createElement("div",{key:t},_.get(e,"[1]","-")," @",_.get(e,"[0]","-")))):void 0)));var t,n}}))}const Vee=[{label:"none",value:"none"},{label:"bits(SI)",value:"bitsSI"},{label:"bytes(SI)",value:"bytesSI"},{label:"bits(IEC)",value:"bitsIEC"},{label:"bytes(IEC)",value:"bytesIEC"},{label:"百分比(0-100)",value:"percent"},{label:"百分比(0.0-1.0)",value:"percentUnit"},{label:"seconds",value:"seconds"},{label:"milliseconds",value:"milliseconds"},{label:"humanize(seconds)",value:"humantimeSeconds"},{label:"humanize(milliseconds)",value:"humantimeMilliseconds"}];function Yee(e){const{highLevelConfig:t,setHighLevelConfig:n}=e,r=d.createElement(vt,{onClick:e=>{n(l(s({},t),{sharedSortDirection:e.key}))},selectedKeys:[t.sharedSortDirection]},d.createElement(vt.Item,{key:"desc"},"desc"),d.createElement(vt.Item,{key:"asc"},"asc")),i=d.createElement(vt,{onClick:e=>{n(l(s({},t),{unit:e.key}))},selectedKeys:[t.unit]},_.map(Vee,(e=>d.createElement(vt.Item,{key:e.value},e.label))));return d.createElement("div",null,d.createElement(_t,{checked:t.shared,onChange:e=>{n(l(s({},t),{shared:e.target.checked}))}},"Multi Series in Tooltip, order value"),d.createElement(kt,{overlay:r},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},t.sharedSortDirection," ",d.createElement(N,null))),d.createElement("br",null),d.createElement(_t,{checked:t.legend,onChange:e=>{n(l(s({},t),{legend:e.target.checked}))}},"Show Legend"),d.createElement("br",null),"Value format with:"," ",d.createElement(kt,{overlay:i},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},_.get(_.find(Vee,{value:t.unit}),"label")," ",d.createElement(N,null))))}var Uee;!function(e){e.Line="line",e.StackArea="stackArea"}(Uee||(Uee={}));const qee=e=>{const t=(null==e?void 0:e.__name__)||"",n=_.keys(e).filter((e=>"__name__"!==e)).map((t=>`${t}="${e[t]}"`));return`${t}{${_.join(n,",")}}`};function Wee(e){const{url:t,datasourceId:n,datasourceIdRequired:r,datasourceName:i,promql:a,setQueryStats:o,setErrorContent:c,contentMaxHeight:u,range:h,setRange:p,step:m,setStep:g,graphOperates:y,refreshFlag:v}=e,[E,x]=f.exports.useState([]),[b,C]=f.exports.useState({shared:!0,sharedSortDirection:"desc",legend:!0,unit:"none",reverseColorOrder:!1,colorDomainAuto:!0,colorDomain:[],chartheight:300}),[w,T]=f.exports.useState(Uee.Line),k={custom:{drawStyle:"lines",fillOpacity:w===Uee.Line?0:.5,stack:w===Uee.Line?"hidden":"noraml",lineInterpolation:"smooth"},options:{legend:{displayMode:b.legend?"table":"hidden"},tooltip:{mode:b.shared?"all":"single",sort:b.sharedSortDirection},standardOptions:{util:b.unit}}};return f.exports.useEffect((()=>{if(r?n&&a:a){const e=ms(h),r=I(e.start).unix(),s=I(e.end).unix();let l=m;m||(l=Math.max(Math.floor((s-r)/240),1));const u=Date.now();jee(`${t}/api/v1/query_range`,{query:a,start:I(e.start).unix(),end:I(e.end).unix(),step:l},n?{"X-Data-Source-Id":n}:{"X-Cluster":i||localStorage.getItem("curCluster")||"DEFAULT",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`}).then((e=>{const t=_.map(null==e?void 0:e.result,(e=>({id:_.uniqueId("series_"),name:qee(e.metric),metric:e.metric,data:N7(l,e.values)})));o({loadTime:Date.now()-u,resolution:m,resultSeries:t.length}),x(t)})).catch((e=>{const t=_.get(e,"data.error");c(`Error executing query: ${t}`)}))}}),[JSON.stringify(h),m,n,i,a,v]),d.createElement("div",{className:"prom-graph-graph-container"},d.createElement("div",{className:"prom-graph-graph-controls"},d.createElement(zt,null,d.createElement(Ns,{value:h,onChange:p,dateFormat:"YYYY-MM-DD HH:mm:ss"}),d.createElement(Gt,{placeholder:"Res. (s)",value:m,onKeyDown:e=>{"Enter"===e.code&&g(_.toNumber(e.target.value))},onBlur:e=>{g(_.toNumber(e.target.value))}}),d.createElement(Yt.Group,{options:[{label:d.createElement(S,null),value:Uee.Line},{label:d.createElement(Le,null),value:Uee.StackArea}],onChange:e=>{e.preventDefault(),T(e.target.value)},value:w,optionType:"button",buttonStyle:"solid"}),y.enabled&&d.createElement(d.Fragment,null,d.createElement(Dt,{placement:"left",content:d.createElement(Yee,{highLevelConfig:b,setHighLevelConfig:C}),trigger:"click",autoAdjustOverflow:!1,getPopupContainer:()=>document.body},d.createElement(Ct,{icon:d.createElement(R,null)})),d.createElement(Ct,{icon:d.createElement(we,{onClick:()=>{const e=localStorage.getItem("curCluster"),t=l(s({type:"timeseries",version:"2.0.0",name:a,step:m,range:h},k),{targets:[{expr:a}]});(function(e){return ji("/api/n9e/share-charts",{method:Li.Post,data:e})})([{configs:JSON.stringify({curCluster:e,dataProps:t})}]).then((e=>{const t=e.dat;window.open("/chart/"+t)}))}})})))),d.createElement(_u,{inDashboard:!1,values:k,series:E}))}const Xee=e=>{const{loadTime:t,resolution:n,resultSeries:r}=e;return d.createElement("div",{className:"query-stats"},d.createElement("span",null,"Load time: ",t,"ms  ",n&&`Resolution: ${n}s `," Result series: ",r))},Kee=({url:e,datasourceId:t,datasourceIdRequired:n,show:r,updateShow:i,insertAtCursor:a})=>{const[o,s]=f.exports.useState([]),[l,c]=f.exports.useState(o);return f.exports.useEffect((()=>{r&&jee(`${e}/api/v1/label/__name__/values`,{},n?{"X-Data-Source-Id":t}:{}).then((e=>{s(e),c(e)}))}),[r]),d.createElement(Tt,{className:"prom-graph-metrics-explorer-modal",width:540,visible:r,title:"Metrics Explorer",footer:null,onCancel:()=>i(!1),getContainer:!1},d.createElement(wt,{prefix:d.createElement(P,null),onPressEnter:e=>{e.preventDefault();const t=e.currentTarget.value;c(o.filter((e=>e.includes(t))))}}),d.createElement("div",{className:"prom-graph-metrics-explorer-list",onClick:e=>function(e){a(e),i(!1)}(e.target.innerText)},l.map((e=>d.createElement("div",{className:"prom-graph-metrics-explorer-list-item",key:e},e)))))};const Qee=Wt.TabPane;function Zee(e){const{url:t="/api/v1/datasource/prometheus",datasourceId:n,datasourceIdRequired:r,datasourceName:i,promQL:a,contentMaxHeight:o=300,type:l="table",onTypeChange:c,defaultTime:u,onTimeChange:h,graphOperates:p={enabled:!1},globalOperates:g={enabled:!1},headerExtra:y}=e,[v,E]=f.exports.useState(a),[x,b]=f.exports.useState(a),[C,S]=f.exports.useState(null),[w,T]=f.exports.useState(""),[k,O]=f.exports.useState(l),[A,I]=f.exports.useState(),[M,N]=f.exports.useState(_.uniqueId("refreshFlag_")),[P,F]=f.exports.useState({start:"now-1h",end:"now"}),[L,R]=f.exports.useState(),[D,B]=f.exports.useState(!1),[$,z]=f.exports.useState(!0),H=f.exports.useRef(null);return f.exports.useEffect((()=>{"number"==typeof u?"table"==k&&I(u):(null==u?void 0:u.start)&&(null==u?void 0:u.end)&&F(u)}),[u]),f.exports.useEffect((()=>{O(l)}),[l]),f.exports.useEffect((()=>{E(x),b(x)}),[x]),d.createElement("div",{className:"prom-graph-container"},y&&g.enabled?m.exports.createPortal(d.createElement("div",{className:"prom-graph-global-operate",style:{marginTop:5}},d.createElement(_t,{checked:$,onChange:e=>{z(e.target.checked)}},"Enable autocomplete")),y):d.createElement("div",{className:"prom-graph-global-operate"},d.createElement(_t,{checked:$,onChange:e=>{z(e.target.checked)}},"Enable autocomplete")),d.createElement("div",{className:"prom-graph-expression-input"},d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-affix-wrapper"},d.createElement(Vc,{ref:H,url:t,headers:r?{"X-Data-Source-Id":_.toString(n)}:{"X-Cluster":i||localStorage.getItem("curCluster")||"DEFAULT",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},value:v,onChange:E,executeQuery:e=>{b(e)},completeEnabled:$}),d.createElement("span",{className:"ant-input-suffix"},d.createElement($e,{className:"prom-graph-metrics-target",onClick:()=>{B(!0)}}))),d.createElement("span",{className:"ant-input-group-addon",style:{border:0,padding:"0 0 0 10px",background:"none"}},d.createElement(Ct,{onClick:()=>{Hc({range:P,datasourceValue:i||localStorage.getItem("curCluster")||"DEFAULT",value:v,onChange:E})}},"新手模式")),d.createElement("span",{className:"ant-input-group-addon",style:{border:0,padding:"0 0 0 10px",background:"none"}},d.createElement(Ct,{type:"primary",onClick:()=>{N(_.uniqueId("refreshFlag_")),b(v)}},"查询")))),w&&d.createElement(Jt,{style:{marginBottom:16},message:w,type:"error"}),d.createElement(Wt,{destroyInactiveTabPane:!0,tabBarGutter:0,activeKey:k,onChange:e=>{O(e),c&&c(e),T(""),S(null)},type:"card",tabBarExtraContent:C&&d.createElement(Xee,s({},C))},d.createElement(Qee,{tab:"Table",key:"table"},d.createElement(Gee,{url:t,contentMaxHeight:o,datasourceId:n,datasourceIdRequired:r,datasourceName:i,promql:x,setQueryStats:S,setErrorContent:T,timestamp:A,setTimestamp:e=>{I(e)},refreshFlag:M})),d.createElement(Qee,{tab:"Graph",key:"graph"},d.createElement(Wee,{url:t,contentMaxHeight:o,datasourceId:n,datasourceIdRequired:r,datasourceName:i,promql:x,setQueryStats:S,setErrorContent:T,range:P,setRange:e=>{F(e),h&&h(e)},step:L,setStep:R,graphOperates:p,refreshFlag:M}))),d.createElement(Kee,{url:t,datasourceId:n,datasourceIdRequired:r,show:D,updateShow:B,insertAtCursor:e=>{if(null!==H.current){const{from:t,to:n}=H.current.state.selection.ranges[0];H.current.dispatch(H.current.state.update({changes:{from:t,to:n,insert:e}}))}}}))}function Jee(e){const{defaultPromQL:t,headerExtra:n}=e,r=k(),{search:i}=E(),a=xi.parse(i);let o;return"string"==typeof a.start&&"string"==typeof a.end&&(o={start:cs(a.start)?a.start:I.unix(_.toNumber(a.start)),end:cs(a.end)?a.end:I.unix(_.toNumber(a.end))}),d.createElement(Zee,{url:"/api/n9e/prometheus",type:a.mode,onTypeChange:e=>{r.replace({pathname:"/metric/explorer",search:xi.stringify(l(s({},a),{mode:e}))})},defaultTime:o,onTimeChange:e=>{let{start:t,end:n}=e;if(I.isMoment(t)&&I.isMoment(n)){const r=gs(e);t=r.start,n=r.end}r.replace({pathname:"/metric/explorer",search:xi.stringify(l(s({},a),{start:t,end:n}))})},promQL:t,datasourceIdRequired:!1,graphOperates:{enabled:!0},globalOperates:{enabled:!0},headerExtra:n})}function ete(e,t){return e.localeCompare(t)}function tte(e,t){let n=[];return n=_.isEmpty(e)?[{title:"Document",render:e=>d.createElement("dl",{className:"event-logs-row"},_.map(e,((e,t)=>d.createElement(d.Fragment,{key:t},d.createElement("dt",null,t,":")," ",d.createElement("dd",null,e)))))}]:_.map(e,(e=>({title:e,render:t=>t[e],sorter:(t,n)=>ete(_.get(t,e,""),_.get(n,e,""))}))),t&&n.unshift({title:"Time",dataIndex:t,width:200,render:e=>I.unix(e).format("YYYY-MM-DD HH:mm:ss"),sorter:(e,n)=>ete(_.get(e,t,""),_.get(n,t,""))}),n}function nte(e){const{data:t,selectedFields:n,scroll:r}=e,[i,a]=f.exports.useState(!0);return d.createElement(Ft,{size:"small",className:"event-logs-table",tableLayout:"auto",rowKey:e=>_.join(_.map(e,(e=>e)),"-"),columns:tte(n,"__time__"),dataSource:t,expandable:{expandedRowRender:e=>{const t=function(e){const t=[];return _.forEach(e,((e,n)=>{0===n.indexOf("__tag__")&&t.push(n)})),t}(e);return d.createElement("div",{className:"sls-discover-raw-content"},!_.isEmpty(t)&&d.createElement("div",{className:"sls-discover-raw-tags"},_.map(t,(t=>d.createElement(Mt,{color:"purple"},e[t])))),_.map(_.omit(e,t),((e,t)=>d.createElement("dl",{key:t,className:"event-logs-row"},d.createElement("dt",null,t,": "),d.createElement("dd",null,e)))))},expandIcon:({expanded:e,onExpand:t,record:n})=>e?d.createElement(N,{onClick:e=>t(n,e)}):d.createElement(L,{onClick:e=>t(n,e)})},pagination:!1,scroll:r,footer:i?void 0:()=>"只能查询您搜索匹配的前 500 个日志，请细化您的过滤条件。"})}var rte=f.exports.forwardRef((function(e,t){const{form:n}=e,[r,i]=f.exports.useState([]),[a,o]=f.exports.useState([]),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState(!1),[h,p]=f.exports.useState(!0),[m,g]=f.exports.useState([]);return f.exports.useImperativeHandle(t,(()=>({fetchData:(e,t,n)=>{const r=n.query,a={cate:e,cluster:t,query:[{project:r.project,logstore:r.logstore,query:r.query,from:I(ms(r.range).start).unix(),to:I(ms(r.range).end).unix(),lines:500,offset:0,reverse:!1,power_sql:r.power_sql}]};var o;(o=a,ji("/api/n9e-plus/sls-fields",{method:Li.Post,data:o}).then((e=>e.dat))).then((e=>{i(e)})),u(!0),Xu(a).then((e=>{l(e.list)})).finally((()=>{u(!1)})),function(e){return ji("/api/n9e-plus/histogram",{method:Li.Post,data:e}).then((e=>e.dat))}(a).then((e=>{g(_.map(e,(e=>({metric:e.metric,data:e.values}))))}))}}))),d.createElement(Qt,{spinning:c},_.isEmpty(m)?d.createElement("div",{style:{display:"flex",justifyContent:"center"}},d.createElement(Zt,{image:Zt.PRESENTED_IMAGE_SIMPLE})):d.createElement("div",{className:"sls-discover-content"},d.createElement(zee,{fields:r,setFields:i,value:a,onChange:o}),d.createElement("div",{className:"sls-discover-main"},d.createElement("div",{className:"sls-discover-chart"},d.createElement("div",{className:"sls-discover-chart-content"},d.createElement(_u,{series:m,values:{custom:{drawStyle:"bar",lineInterpolation:"smooth"},options:{legend:{displayMode:"hidden"},tooltip:{mode:"all"}}},onClick:(e,t,r,i)=>{const a=_.get(i,"[0][0]"),o=_.get(m,"[0].data");if(a&&o){((e,t)=>{const r=n.getFieldsValue(),i=r.query,a={cate:r.datasourceCate,cluster:r.datasourceName,query:[{project:i.project,logstore:i.logstore,query:i.query,from:e,to:t,lines:500,offset:0,reverse:!1,power_sql:i.power_sql}]};u(!0),Xu(a).then((e=>{l(e.list)})).finally((()=>{u(!1)}))})(a,a+(_.get(o,"[2][0]")-_.get(o,"[1][0]")))}}}))),d.createElement(nte,{data:s,selectedFields:a,scroll:{x:"max-content",y:h?312:277}}))))}));function ite(e){const{span:t=6,prefixName:n=[]}=e,[r,i]=f.exports.useState(!1);return d.createElement("div",null,d.createElement("div",{style:{marginBottom:8}},d.createElement("span",{onClick:()=>{i(!r)},style:{cursor:"pointer"}},r?d.createElement(N,null):d.createElement(L,null)," 辅助配置")),d.createElement("div",{style:{display:r?"block":"none"}},d.createElement(Ot,{gutter:8},d.createElement(At,{span:t},d.createElement(Uc,{label:d.createElement("span",null,"ValueKey"," ",d.createElement(yt,{title:"通过此字段从返回结果中提取的数值。例如 查询条件为 `* | select count(1) as PV` 返回结果为 PV:11，ValueKey 写了 PV，则会根据 PV 提取到 11，作为查询结果的值"},d.createElement(ce,null))),labelWidth:100},d.createElement(St.Item,{name:[...n,"query","keys","valueKey"],style:{width:"100%"}},d.createElement(Nt,{mode:"tags",placeholder:"回车输入多个"})))),d.createElement(At,{span:t},d.createElement(Uc,{label:d.createElement("span",null,"LabelKey"," ",d.createElement(yt,{title:"将此字段以及期对应的 value，作为tag，追加到监控数据的标签中，例如 查询条件为  `* | select count(1) as PV group by host` 返回结果为 `[{PV:11 host:dev01},{PV:10 host:dev02}]`, LabelKey 写了 host, 则第一条返回数据 host=dev01 会作为tag"},d.createElement(ce,null))),labelWidth:100},d.createElement(St.Item,{name:[...n,"query","keys","labelKey"],style:{width:"100%"}},d.createElement(Nt,{mode:"tags",placeholder:"回车输入多个"})))),d.createElement(At,{span:t},d.createElement(Uc,{label:d.createElement("span",null,"TimeKey"," ",d.createElement(yt,{title:"指定哪个字段是时间字段，作为绘制曲线图的x轴坐标"},d.createElement(ce,null))),labelWidth:100},d.createElement(St.Item,{name:[...n,"query","keys","timeKey"],style:{width:"100%"},initialValue:"Time"},d.createElement(wt,null)))),d.createElement(At,{span:t},d.createElement(Uc,{label:d.createElement("span",null,"TimeFormat"," ",d.createElement(yt,{title:"时间的格式，会根据此格式将时间转为时间戳"},d.createElement(ce,null))),labelWidth:105},d.createElement(St.Item,{name:[...n,"query","keys","timeFormat"],style:{width:"100%"},initialValue:"%H:%i:%s"},d.createElement(wt,null)))))))}var ate=f.exports.forwardRef((function(e,t){const[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState([]);return f.exports.useImperativeHandle(t,(()=>({fetchData:(e,t,n)=>{const i=n.query;i.keys.valueKey&&(i.keys.valueKey=_.join(i.keys.valueKey," ")),i.keys.labelKey&&(i.keys.labelKey=_.join(i.keys.labelKey," "));const o={cate:e,cluster:t,query:[{project:i.project,logstore:i.logstore,from:I(ms(i.range).start).unix(),to:I(ms(i.range).end).unix(),lines:500,offset:0,reverse:!1,power_sql:i.power_sql,query:i.query,keys:i.keys}]};r(!0),Ku(o).then((e=>{a(_.map(e,(e=>({name:P7(e.metric),metric:e.metric,data:e.values}))))})).finally((()=>{r(!1)}))}}))),d.createElement(d.Fragment,null,d.createElement(ite,null),_.isEmpty(i)?d.createElement("div",{style:{display:"flex",justifyContent:"center"}},d.createElement(Zt,{image:Zt.PRESENTED_IMAGE_SIMPLE})):d.createElement(Qt,{spinning:n},d.createElement("div",{style:{height:500}},d.createElement(_u,{series:i,values:{custom:{drawStyle:"lines",lineInterpolation:"smooth"},options:{legend:{displayMode:"table"},tooltip:{mode:"all"}}}}))))}));const ote=({mode:e,setMode:t})=>d.createElement(Yt.Group,{value:e,onChange:e=>{t(e.target.value)},buttonStyle:"solid"},d.createElement(Yt.Button,{value:"timeSeries"},"时序值"),d.createElement(Yt.Button,{value:"raw"},"日志原文"));function ste(e){const{datasourceCate:t,datasourceName:n,headerExtra:r,form:i}=e,[a,o]=f.exports.useState("timeSeries"),s=f.exports.useRef(),l=f.exports.useRef();return d.createElement("div",null,r?m.exports.createPortal(d.createElement(ote,{mode:a,setMode:o}),r):d.createElement("div",{style:{marginBottom:10}},d.createElement(ote,{mode:a,setMode:o})),d.createElement(Ot,{gutter:8},d.createElement(At,{flex:"auto"},d.createElement(Ot,{gutter:8},d.createElement(At,{span:12},d.createElement(Qu,{width:"100%",datasourceCate:t,datasourceName:n,prefixName:["query"]})),d.createElement(At,{span:12},d.createElement(St.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>{const r=e(["query","project"]);return d.createElement(Zu,{width:"100%",datasourceCate:t,datasourceName:n,project:r,prefixName:["query"]})}))))),d.createElement(At,{flex:"550px"},d.createElement(zt,{style:{display:"flex"}},d.createElement(St.Item,{name:["query","range"],initialValue:{start:"now-1h",end:"now"}},d.createElement(Ns,{dateFormat:"YYYY-MM-DD HH:mm:ss"})),d.createElement("div",{style:{display:"flex",gap:8}},d.createElement("div",{style:{lineHeight:"32px"}},"SQL增强"),d.createElement(St.Item,{name:["query","power_sql"],valuePropName:"checked"},d.createElement(Lt,null))),d.createElement(St.Item,null,d.createElement(Ct,{type:"primary",onClick:()=>{i.validateFields().then((e=>{lte(e.query),"raw"===a&&s.current&&s.current.fetchData&&s.current.fetchData(t,n,e),"timeSeries"===a&&l.current&&l.current.fetchData&&l.current.fetchData(t,n,e)}))}},"查询")))),d.createElement(At,{span:24},d.createElement(zC,{width:"100%",prefixName:["query"]}))),"timeSeries"===a&&d.createElement(ate,{ref:l}),"raw"===a&&d.createElement(rte,{ref:s,form:i}))}const lte=e=>{let t="";try{t=JSON.stringify(e),localStorage.setItem("explorer_aliyunsls_query",t)}catch(uu){}};function cte(e){let t=new RegExp(`.*?${e}=([^&]*)`),n=(location.search||"").match(t);return n?n[1]:""}const ute=(e,t)=>{const n=localStorage.getItem("curCluster"),r=localStorage.getItem("datasource_es_name"),i=localStorage.getItem("datasource_aliyunsls_name");return"prometheus"===e?n||_.get(t,[e,0]):"elasticsearch"===e?r||_.get(t,[e,0]):"aliyun-sls"===e?i||_.get(t,[e,0]):void 0},hte=({defaultPromQL:e,removePanel:t,datasourceList:n,id:r})=>{const i=new URLSearchParams(E().search),[a]=St.useForm(),o=f.exports.useRef(null),[s,l]=f.exports.useState(i.get("data_source_id")?la.elasticsearch:localStorage.getItem("datasource_cate")||la.prometheus);return f.exports.useEffect((()=>{localStorage.setItem("datasource_cate",s),"aliyun-sls"===s&&(e=>{const t=localStorage.getItem("explorer_aliyunsls_query");let n={};try{n=JSON.parse(t||"{}"),e.setFieldsValue({query:_.omit(n,["range"])})}catch(uu){}})(a)}),[s]),d.createElement(Ut,{bodyStyle:{padding:16},className:"panel"},d.createElement(St,{form:a,initialValues:{datasourceCate:s,datasourceName:ute(s,n)}},d.createElement(zt,{align:"start"},d.createElement(Uc,{label:"数据源类型",labelWidth:84},d.createElement(ia,{var:"VITE_IS_QUERY_ES_DS",children:e=>d.createElement(St.Item,{name:"datasourceCate",noStyle:!0},d.createElement(Nt,{dropdownMatchSelectWidth:!1,style:{minWidth:70},onChange:e=>{"string"==typeof e&&l(e),a.setFieldsValue({datasourceName:ute(e,n)})}},_.map(e?sa.all:sa.normal,(e=>d.createElement(Nt.Option,{key:e.value,value:e.value},e.label)))))})),d.createElement(St.Item,{shouldUpdate:(e,t)=>e.datasourceCate!==t.datasourceCate,noStyle:!0},(({getFieldValue:e})=>{const t=e("datasourceCate");return d.createElement(wt.Group,{compact:!0},d.createElement("span",{className:"ant-input-group-addon",style:{width:"max-content",height:32,lineHeight:"32px"}},"关联数据源"),d.createElement(St.Item,{name:"datasourceName",rules:[{required:"prometheus"!==t,message:"请选择数据源"}]},d.createElement(Nt,{placeholder:"选择数据源",style:{minWidth:70},dropdownMatchSelectWidth:!1,onChange:e=>{((e,t)=>{"prometheus"===e&&localStorage.setItem("curCluster",t),"elasticsearch"===e&&localStorage.setItem("datasource_es_name",t),"aliyun-sls"===e&&localStorage.setItem("datasource_aliyunsls_name",t)})(t,e)}},_.map(n[t],(e=>d.createElement(Nt.Option,{value:e,key:e},e))))))})),d.createElement("div",{ref:o})),d.createElement(St.Item,{shouldUpdate:(e,t)=>e.datasourceCate!==t.datasourceCate||e.datasourceName!==t.datasourceName,noStyle:!0},(({getFieldValue:t})=>{const n=t("datasourceCate"),r=t("datasourceName");return n===la.prometheus?d.createElement(Jee,{defaultPromQL:e,headerExtra:o.current}):n===la.elasticsearch?d.createElement(Hee,{datasourceName:r,form:a}):n===la.aliyunSLS?d.createElement(ste,{datasourceCate:la.aliyunSLS,datasourceName:r,headerExtra:o.current,form:a}):void 0}))),d.createElement("span",{className:"remove-panel-btn",onClick:()=>{t(r)}},d.createElement(G,null)))},pte=()=>{const[e,t]=f.exports.useState([{id:Pi(),defaultPromQL:decodeURIComponent(cte("promql"))}]),[n,r]=f.exports.useState({prometheus:[],elasticsearch:[],"aliyun-sls":[]});function i(n){t(_.filter(e,(e=>e.id!==n)))}return f.exports.useEffect((()=>{(async()=>{const e=await Gi().then((e=>e.dat)),t=await Vi().then((e=>e.dat)),n=await Yi().then((e=>e.dat));r({prometheus:e,elasticsearch:t,"aliyun-sls":n})})().catch((()=>{r({prometheus:[],elasticsearch:[],"aliyun-sls":[]})}))}),[]),d.createElement(d.Fragment,null,e.map((({id:e,defaultPromQL:t=""})=>d.createElement(hte,{key:e,id:e,removePanel:i,defaultPromQL:t,datasourceList:n}))),d.createElement("div",{className:"add-prometheus-panel"},d.createElement(Ct,{size:"large",onClick:function(){t((()=>[...e,{id:Pi()}]))}},d.createElement(re,null),"新增一个查询面板")))},dte=()=>d.createElement(Pa,{title:"即时查询",icon:d.createElement(S,null),hideCluster:!0},d.createElement("div",{className:"prometheus-page"},d.createElement(pte,null))),fte=function(e,t,n){const r=s({},gs(t));return n&&(r["match[]"]=n),ji(`/api/n9e/prometheus/api/v1/label/${e}/values`,{method:Li.Get,params:r}).then((e=>null==e?void 0:e.data))},mte=function(e,t){const n=s({},gs(t));return e&&(n["match[]"]=e),ji("/api/n9e/prometheus/api/v1/labels",{method:Li.Get,params:n}).then((e=>null==e?void 0:e.data))};function gte(e){const{isAggr:t,aggrFunc:n,calcArr:r,metric:i,match:a,offset:o,aggrGroups:s}=e;return`${t?n+"(":""}${r[0]?r[0]+"(":""}${i}${a}${r[1]?`[${r[1]}]`:""}${o?` offset ${o}`:""}${r[0]?")":""}${t?`) by (${_.join(s,", ")})`:""}`}const yte=e=>{let t=e.__name__||"";return _.forEach(_.omit(e,"__name__"),((e,n)=>{t+=` ${n}: ${e}`})),_.trim(t)},vte=e=>{const{metric:t,match:n,calcFunc:r,comparison:i,aggrFunc:a,aggrGroups:o}=e,s=_.split(r,"_"),l=o.length>0;return[gte({isAggr:l,aggrFunc:a,calcArr:s,metric:t,match:n,offset:"",aggrGroups:o}),..._.map(i,(e=>gte({isAggr:l,aggrFunc:a,calcArr:s,metric:t,match:n,offset:e,aggrGroups:o})))]};function Ete(e){const t=_.compact(_.map(e,(e=>e.label&&e.value?`${e.label}${e.oper}"${e.value}"`:"")));return _.join(_.compact(t),",")}function xte(e){const t=_.map(e.dimensionLabels,(e=>_.isEmpty(e.value)?"":`${e.label}=~"${_.join(e.value,"|")}"`)),n=_.join(_.compact(t),",");return n?`{${n}}`:""}const bte={add:"新建快捷视图",edit:"编辑快捷视图"},{TabPane:Cte}=Wt;var Ste=is((function(e){const{t:t}=Ur(),{action:n,visible:r,initialValues:i={},destroy:a,range:o,onOk:l,admin:c}=e,[u]=St.useForm(),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState([]),[y,v]=f.exports.useState(!1),[E,x]=f.exports.useState(!1),[b,C]=f.exports.useState([]),[S,w]=f.exports.useState("form"),T=e=>_.map(e,(e=>d.createElement(Nt.Option,{key:e,value:e},e)));return f.exports.useEffect((()=>{mte("",o).then((e=>{p(e),g(e)}))}),[JSON.stringify(o)]),d.createElement(Tt,{className:"n9e-metric-views-modal",title:d.createElement(Wt,{className:"custom-import-title",activeKey:S,onChange:w},d.createElement(Cte,{tab:bte[n],key:"form"}),"add"===n&&d.createElement(Cte,{tab:"导入快捷视图",key:"import"})),visible:r,onCancel:()=>{a()},onOk:()=>{u.validateFields().then((e=>{let t=_.cloneDeep(e);if("form"===S&&(t.dynamicLabels=_.map(t.dynamicLabels,(e=>({label:e,value:""}))),t.dimensionLabels=_.map(t.dimensionLabels,(e=>({label:e,value:""})))),"import"===S)try{const n=JSON.parse(e.import);t=s({name:e.name,cate:e.cate},n)}catch(uu){return void console.log(uu)}const{name:r,cate:o}=t,c={name:r,cate:o?0:1,configs:JSON.stringify(_.omit(t,["name","cate"]))};"add"===n?function(e){return ji("/api/n9e/metric-views",{method:Li.Post,data:e}).then((e=>null==e?void 0:e.dat))}(c).then((e=>{Et.success("添加成功"),l(e),a()})):"edit"===n&&(c.id=i.id,function(e){return ji("/api/n9e/metric-views",{method:Li.Put,data:e}).then((e=>null==e?void 0:e.dat))}(c).then((()=>{Et.success("修改成功"),l(),a()})))}))}},"form"===S&&d.createElement(St,{layout:"vertical",initialValues:i||{cate:!1},form:u,onValuesChange:(e,t)=>{if(e.filters){const e=Ete(t.filters);mte(""+(e?`{${e}}`:""),o).then((e=>{g(e)}))}}},d.createElement(St.Item,{label:"视图名称",name:"name",rules:[{required:!0}]},d.createElement(wt,null)),c&&d.createElement(St.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Lt,null)),d.createElement(St.List,{name:"filters"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement("div",{style:{paddingBottom:8}},"前置过滤条件"," ",d.createElement(Z,{onClick:()=>{t({oper:"="})}})),e.map((({key:e,name:t})=>d.createElement(zt,{key:e},d.createElement(St.Item,{name:[t,"label"],rules:[{required:!0}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null),allowClear:!0,showSearch:!0,style:{width:170}},T(h))),d.createElement(St.Item,{name:[t,"oper"],rules:[{required:!0}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null),style:{width:60}},d.createElement(Nt.Option,{value:"="},"="),d.createElement(Nt.Option,{value:"!="},"!="),d.createElement(Nt.Option,{value:"=~"},"=~"),d.createElement(Nt.Option,{value:"!~"},"!~"))),d.createElement(St.Item,{name:[t,"value"],rules:[{required:!0}]},d.createElement(wt,{style:{width:200}})),d.createElement(St.Item,null,d.createElement(ie,{onClick:()=>{n(t)}})))))))),d.createElement(St.Item,{label:"动态过滤标签",name:"dynamicLabels"},d.createElement(Nt,{allowClear:!0,showSearch:!0,mode:"multiple"},T(m))),d.createElement(St.Item,{label:"展开维度标签",name:"dimensionLabels",rules:[{required:!0}]},d.createElement(Nt,{allowClear:!0,showSearch:!0,mode:"multiple"},T(m))),d.createElement("div",{style:{textAlign:"right",marginBottom:10}},d.createElement(Ct,{onClick:()=>{const e=u.getFieldsValue();v(!0),x(!0);const t=Ete(e.filters),n=_.compact(_.concat(e.dynamicLabels,e.dimensionLabels)),r=_.map(n,(e=>fte(e,o,t?`{${t}}`:"")));Promise.all(r).then((e=>{const t=_.map(n,((t,n)=>({label:t,values:e[n]})));C(t),x(!1)}))}},"预览")),y&&d.createElement(Ft,{size:"small",rowKey:"label",columns:[{title:"Label Key",dataIndex:"label"},{title:"Label Value 数量",dataIndex:"values",render:e=>e.length},{title:"Label Value 样例",dataIndex:"values",render:e=>d.createElement(yt,{placement:"right",title:d.createElement("div",null,_.map(e,(e=>d.createElement("div",{key:e},e))))},`${_.head(e)}...`)}],dataSource:b,loading:E})),"import"===S&&d.createElement(St,{form:u,preserve:!1,layout:"vertical",initialValues:i||{cate:!1}},d.createElement(St.Item,{label:"视图名称",name:"name",rules:[{required:!0}]},d.createElement(wt,null)),c&&d.createElement(St.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Lt,null)),d.createElement(St.Item,{label:"配置JSON：",name:"import",rules:[{required:!0,message:t("请输入配置"),validateTrigger:"trigger"}]},d.createElement(wt.TextArea,{className:"code-area",placeholder:t("请输入配置"),rows:4}))))}));var wte=is((function(e){const{visible:t,destroy:n,data:r}=e,{t:i}=Ur();let a=r;try{a=JSON.stringify(JSON.parse(r),null,4)}catch(uu){console.log(uu)}return d.createElement(Tt,{title:"导出配置",visible:t,onCancel:()=>{n()},footer:null},d.createElement(d.Fragment,null,d.createElement("div",{style:{marginBottom:10}},d.createElement("a",{onClick:()=>{Ai([r],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>Ii(r,i)},d.createElement(z,null),"复制JSON内容到剪贴板")),d.createElement(wt.TextArea,{value:a,rows:10})))}));function Tte(e){const[t,n]=f.exports.useState([]),[r,i]=f.exports.useState(),[a,o]=f.exports.useState(""),[l,c]=f.exports.useState(_.uniqueId("refreshFlag_")),{profile:u}=ci((e=>e.account));return f.exports.useEffect((()=>{const t=null!==localStorage.getItem("metric-view-id")?Number(localStorage.getItem("metric-view-id")):null;ji("/api/n9e/metric-views",{method:Li.Get}).then((e=>null==e?void 0:e.dat)).then((r=>{let a;if(n(r),a=t&&_.find(r,{id:t})?t:_.get(_.head(r),"id"),a){i(a);const t=_.find(r,{id:a});let n={};try{n=JSON.parse(t.configs),n.id=a,n.refreshFlag=l}catch(uu){console.error(uu)}e.onSelect(s({},n))}}))}),[l]),d.createElement("div",{className:"n9e-metric-views-list"},d.createElement("div",{className:"n9e-metric-views-list-header"},d.createElement("div",{className:"metric-page-title"},"快捷视图列表"),d.createElement("a",null,d.createElement(ze,{onClick:()=>{Ste({admin:u.admin,action:"add",range:e.range,onOk:e=>{localStorage.setItem("metric-view-id",e.id),c(_.uniqueId("refreshFlag_"))}})}}))),d.createElement(wt,{prefix:d.createElement(P,null),value:a,onChange:e=>{o(e.target.value)}}),d.createElement("div",{className:"n9e-metric-views-list-content"},_.isEmpty(t)?"暂无数据":_.map(_.filter(t,(e=>{if(a){let t=!0;try{t=new RegExp(a,"gi").test(e.name)}catch(uu){console.log(uu)}return t}return!0})),(n=>d.createElement("div",{className:g({"n9e-metric-views-list-content-item":!0,active:n.id===r}),key:n.id,onClick:()=>{i(n.id),localStorage.setItem("metric-view-id",n.id);const r=_.find(t,{id:n.id});let a={};try{a=JSON.parse(r.configs),a.id=n.id}catch(uu){console.error(uu)}e.onSelect(s({},a))}},d.createElement("span",{className:"name"},n.name),1===n.cate||u.admin?d.createElement("span",null,0===n.cate&&d.createElement("span",{className:"n9e-metric-views-list-content-item-cate",style:{color:"#ccc"}},"公开"),d.createElement("div",{className:"n9e-metric-views-list-content-item-opes"},d.createElement(De,{onClick:t=>{t.stopPropagation();let r={};try{r=JSON.parse(n.configs),r.dynamicLabels=_.map(r.dynamicLabels,"label"),r.dimensionLabels=_.map(r.dimensionLabels,"label")}catch(a){console.error(a)}const i=s({id:n.id,name:n.name,cate:0===n.cate},r);Ste({admin:u.admin,action:"edit",range:e.range,initialValues:i,onOk:()=>{localStorage.setItem("metric-view-id",n.id),c(_.uniqueId("refreshFlag_"))}})}}),d.createElement(Pe,{onClick:e=>{e.stopPropagation(),Tt.confirm({title:"是否要删除？",onOk:()=>{var e;(e={ids:[n.id]},ji("/api/n9e/metric-views",{method:Li.Delete,data:e}).then((e=>null==e?void 0:e.dat))).then((()=>{Et.success("删除成功"),c(_.uniqueId("refreshFlag_"))}))}})}}),d.createElement(yt,{title:"导出配置",placement:"right"},d.createElement(He,{onClick:()=>{wte({data:n.configs})}})))):d.createElement("span",{style:{color:"#ccc"}},"公开"))))))}function kte(e){const{value:t,range:n,onChange:r}=e,{id:i,refreshFlag:a,filters:o,dynamicLabels:c,dimensionLabels:u}=t,[h,p]=f.exports.useState({}),[m,y]=f.exports.useState({}),[v,E]=f.exports.useState({}),x=Ete(o),b=function(e){const t=_.map(e,(e=>e.value?`${e.label}="${e.value}"`:""));return _.join(_.compact(t),",")}(c),[C,S]=f.exports.useState({filters:!1,dynamicLabels:!0});return f.exports.useEffect((()=>{const e=_.map(c,(e=>fte(e.label,n,x?`{${x}}`:"")));Promise.all(e).then((e=>{const t={};_.forEach(e,((e,n)=>{t[c[n].label]=e})),p(t)}))}),[x]),f.exports.useEffect((()=>{const e=_.join(_.compact(_.concat(x,b)),","),i=_.map(u,(t=>fte(t.label,n,e?`{${e}}`:"")));Promise.all(i).then((e=>{const n={};_.forEach(e,((e,t)=>{n[u[t].label]=e})),y(n),_.every(u,(e=>_.isEmpty(e.value)))&&r(l(s({},t),{dimensionLabels:_.map(u,((e,t)=>0===t?{label:e.label,value:_.slice(n[e.label],0,10)}:e))}))}))}),[x,b,i,a]),d.createElement("div",{className:"n9e-metric-views-labels-values"},!_.isEmpty(x)&&d.createElement("div",{className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title",style:{cursor:"pointer"},onClick:()=>{S(l(s({},C),{filters:!C.filters}))}},"前置过滤条件 ",C.filters?d.createElement(X,null):d.createElement(N,null)),C.filters&&d.createElement("div",{className:"n9e-metric-views-filters"},x||"暂无数据")),!_.isEmpty(c)&&d.createElement("div",{className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title",style:{cursor:"pointer"},onClick:()=>{S(l(s({},C),{dynamicLabels:!C.dynamicLabels}))}},"动态过滤条件 ",C.dynamicLabels?d.createElement(X,null):d.createElement(N,null)),C.dynamicLabels&&d.createElement("div",{className:"n9e-metric-views-dynamicLabels"},_.isEmpty(c)?d.createElement("div",{style:{marginBottom:10}},"暂无数据"):_.map(c,(e=>d.createElement("div",{key:e.label,className:"n9e-metric-views-dynamicLabels-item"},d.createElement("div",{className:"n9e-metric-views-dynamicLabels-item-label"},e.label,":"),d.createElement(Nt,{allowClear:!0,showSearch:!0,style:{width:"100%"},value:e.value,onChange:n=>{const i=_.map(c,(t=>e.label===t.label?l(s({},t),{value:n}):t));r(l(s({},t),{dynamicLabels:i,dimensionLabels:_.map(u,((e,t)=>0===t?{label:e.label,value:[]}:e))}))}},_.map(h[e.label],(e=>d.createElement(Nt.Option,{key:e,value:e},e))))))))),_.map(u,(e=>{const n=m[e.label];return d.createElement("div",{key:e.label,className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title"},d.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",width:220}},d.createElement(yt,{title:e.label,placement:"left"},d.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"calc(100% - 30px)"}},e.label)),d.createElement("a",{style:{fontSize:12,fontWeight:"normal"},onClick:()=>{r(l(s({},t),{dimensionLabels:_.map(u,(t=>t.label===e.label?l(s({},t),{value:v[t.label]?_.filter(n,(e=>_.includes(e,v[t.label]))):n}):t))}))}},"全选"))),d.createElement("div",{className:"n9e-metric-views-dimensionLabel"},d.createElement(wt.Group,{compact:!0},d.createElement(wt,{style:{width:"calc(100% - 32px)"},prefix:d.createElement(P,null),value:v[e.label],onChange:t=>{E(l(s({},v),{[e.label]:t.target.value}))}}),d.createElement(yt,{title:"清空已选的值",placement:"right",getTooltipContainer:()=>document.body},d.createElement(Ct,{icon:d.createElement(je,null),onClick:()=>{r(l(s({},t),{dimensionLabels:_.map(u,(t=>t.label===e.label?l(s({},t),{value:[]}):t))}))}}))),d.createElement("div",{className:"n9e-metric-views-dimensionLabel-content"},_.isEmpty(n)?"暂无数据":d.createElement("div",null,_.map(_.filter(n,(t=>{let n=!0;if(v[e.label])try{n=new RegExp(v[e.label],"gi").test(t)}catch(uu){console.log(uu)}return n})),(n=>d.createElement("div",{key:n,className:g({"n9e-metric-views-dimensionLabel-content-item":!0,active:_.includes(e.value,n)}),onClick:()=>{const i=_.includes(e.value,n)?_.without(e.value,n):_.concat(e.value,n),a=_.map(u,(t=>t.label===e.label?l(s({},t),{value:_.compact(i)}):t));r(l(s({},t),{dimensionLabels:a}))}},n)))))))})))}const _te=()=>d.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1269",width:"1em",height:"1em",fill:"currentColor"},d.createElement("path",{d:"M85.333333 85.333333h85.333334v768h768v85.333334H85.333333V85.333333m512 533.333334L512 768H338.773333l-86.186666-149.333333L338.773333 469.333333H512l85.333333 149.333334m3.413334-341.333334L514.56 426.666667H341.333333L256 277.333333 341.333333 128h173.226667l86.186667 149.333333m305.92 170.666667L820.48 597.333333h-172.373333l-86.186667-149.333333L648.106667 298.666667h172.373333l86.186667 149.333333z",fill:"","p-id":"1270"})),Ote=e=>d.createElement(Ge,s({component:_te},e)),Ate=[{label:"none",value:"none"},{label:"bits(SI)",value:"bitsSI"},{label:"bytes(SI)",value:"bytesSI"},{label:"bits(IEC)",value:"bitsIEC"},{label:"bytes(IEC)",value:"bytesIEC"},{label:"百分比(0-100)",value:"percent"},{label:"百分比(0.0-1.0)",value:"percentUnit"},{label:"seconds",value:"seconds"},{label:"milliseconds",value:"milliseconds"},{label:"humanize(seconds)",value:"humantimeSeconds"},{label:"humanize(milliseconds)",value:"humantimeMilliseconds"}];function Ite(e){const{highLevelConfig:t,setHighLevelConfig:n}=e,r=d.createElement(vt,{onClick:e=>{n(l(s({},t),{sharedSortDirection:e.key}))},selectedKeys:[t.sharedSortDirection]},d.createElement(vt.Item,{key:"desc"},"desc"),d.createElement(vt.Item,{key:"asc"},"asc")),i=d.createElement(vt,{onClick:e=>{n(l(s({},t),{unit:e.key}))},selectedKeys:[t.unit]},_.map(Ate,(e=>d.createElement(vt.Item,{key:e.value},e.label))));return d.createElement("div",null,d.createElement(_t,{checked:t.shared,onChange:e=>{n(l(s({},t),{shared:e.target.checked}))}},"Multi Series in Tooltip, order value"),d.createElement(kt,{overlay:r},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},t.sharedSortDirection," ",d.createElement(N,null))),d.createElement("br",null),d.createElement(_t,{checked:t.legend,onChange:e=>{n(l(s({},t),{legend:e.target.checked}))}},"Show Legend"),d.createElement("br",null),"Value format with:"," ",d.createElement(kt,{overlay:i},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},_.get(_.find(Ate,{value:t.unit}),"label")," ",d.createElement(N,null))))}function Mte(e){const{onClick:t,selectedKeys:n}=e;return d.createElement(vt,{prefixCls:"ant-dropdown-menu",onClick:t,selectedKeys:n,className:"color-scales"},_.map(x7,(e=>d.createElement(vt.Item,{key:e.value,className:"color-scales-menu-item"},d.createElement("span",{className:"color-scales-menu-colors"},_.map(e.value,(e=>d.createElement("span",{key:e,style:{backgroundColor:e}})))),e.label))))}function Nte(e){const{highLevelConfig:t,setHighLevelConfig:n}=e,r=d.createElement(vt,{onClick:e=>{n(l(s({},t),{unit:e.key}))},selectedKeys:[t.unit]},_.map(Ate,(e=>d.createElement(vt.Item,{key:e.value},e.label))));return d.createElement("div",null,d.createElement("div",{style:{marginBottom:5}},"Height:"," ",d.createElement(Gt,{size:"small",value:t.chartheight,onBlur:e=>{n(l(s({},t),{chartheight:_.toNumber(e.target.value)}))}})),d.createElement("div",{style:{marginBottom:5}},"Color:"," ",d.createElement(kt,{overlay:d.createElement(Mte,{onClick:e=>{n(l(s({},t),{colorRange:_.split(e.key,",")}))},selectedKeys:[_.join(t.colorRange,",")]})},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},_.get(_.find(x7,(e=>_.isEqual(e.value,t.colorRange))),"label")," ",d.createElement(N,null)))),d.createElement("div",{style:{marginBottom:5}},"Reverse color order:"," ",d.createElement(Lt,{size:"small",checked:t.reverseColorOrder,onChange:e=>{n(l(s({},t),{reverseColorOrder:e}))}})),d.createElement("div",{style:{marginBottom:5}},"Auto min/max color values:"," ",d.createElement(Lt,{size:"small",checked:t.colorDomainAuto,onChange:e=>{n(l(s({},t),{colorDomainAuto:e,colorDomain:[0,100]}))}})),!t.colorDomainAuto&&d.createElement("div",{style:{marginBottom:5}},d.createElement(Ot,{gutter:8},d.createElement(At,{span:12},d.createElement(Gt,{size:"small",addonBefore:"min",style:{width:110},value:t.colorDomain[0],onChange:e=>{n(l(s({},t),{colorDomain:[e,t.colorDomain[1]]}))}})),d.createElement(At,{span:12},d.createElement(Gt,{size:"small",addonBefore:"max",style:{width:110},value:t.colorDomain[1],onChange:e=>{n(l(s({},t),{colorDomain:[t.colorDomain[0],e]}))}})))),d.createElement("div",null,"Value format with:"," ",d.createElement(kt,{overlay:r},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},_.get(_.find(Ate,{value:t.unit}),"label")," ",d.createElement(N,null)))))}function Pte(e){var t;const{metric:n,match:r,range:i,step:a,onClose:o}=e,c=_.map(_.filter(r.dimensionLabels,(e=>!_.isEmpty(e.value))),"label"),[u,h]=f.exports.useState(_.uniqueId("refreshFlag_")),[p,m]=f.exports.useState(""),[y,v]=f.exports.useState([]),[E,x]=f.exports.useState("avg"),[b,C]=f.exports.useState(c),[w,T]=f.exports.useState([]),[k,O]=f.exports.useState([]),[A,I]=f.exports.useState({shared:!0,sharedSortDirection:"desc",legend:!0,unit:"none",colorRange:x7[0].value,reverseColorOrder:!1,colorDomainAuto:!0,colorDomain:[],chartheight:300}),[M,P]=f.exports.useState("line"),[F,L]=f.exports.useState("last"),D={custom:{drawStyle:"lines",fillOpacity:0,stack:"hidden",lineInterpolation:"smooth"},options:{legend:{displayMode:A.legend?"table":"hidden"},tooltip:{mode:A.shared?"all":"single",sort:A.sharedSortDirection},standardOptions:{util:A.unit}}},B={custom:{calc:F,colorRange:A.colorRange,reverseColorOrder:A.reverseColorOrder,colorDomainAuto:A.colorDomainAuto,colorDomain:A.colorDomain},options:{standardOptions:{util:A.unit}}},$={line:d.createElement(Ite,{highLevelConfig:A,setHighLevelConfig:I}),hexbin:d.createElement(Nte,{highLevelConfig:A,setHighLevelConfig:I})};return f.exports.useEffect((()=>{C(c)}),[JSON.stringify(c)]),f.exports.useEffect((()=>{const e=xte(r);mte(`${n}${e}`,i).then((e=>{T(e)}))}),[u,JSON.stringify(r),JSON.stringify(i)]),f.exports.useEffect((()=>{(function(e){const{metric:t,match:n,range:r,step:i,calcFunc:a,comparison:o,aggrFunc:s,aggrGroups:l}=e;let{start:c,end:u}=gs(r),h=i;i||(h=Math.max(Math.floor((u-c)/240),1));const p=vte({metric:t,match:n,calcFunc:a,comparison:o,aggrFunc:s,aggrGroups:l}),d=_.map(p,(e=>ji("/api/n9e/prometheus/api/v1/query_range",{method:Li.Get,params:{start:c-c%h,end:u-u%h,step:h,query:e}})));return Promise.all(d).then((e=>{const t=[];return _.forEach(["current",...o],((n,r)=>{var i,a;const o=((null==(i=e[r])?void 0:i.data)?null==(a=e[r])?void 0:a.data:e[r]).result||[];_.forEach(o,(e=>{t.push({metric:e.metric,color:e.color,offset:n,name:`${yte(e.metric)}${"current"!==n?` offset ${n}`:""}`,id:_.uniqueId("series_"),data:e.values})}))})),t}))})({metric:n,match:xte(r),range:i,step:a,aggrFunc:E,aggrGroups:b,calcFunc:p,comparison:y}).then((e=>{O(e)}))}),[u,n,JSON.stringify(r),JSON.stringify(i),a,p,y,E,b]),d.createElement(Ut,{size:"small",style:{marginBottom:10},title:n,className:"n9e-metric-views-metrics-graph",extra:d.createElement(zt,null,d.createElement(zt,{size:0,style:{marginRight:10}},d.createElement(S,{className:g({"button-link-icon":!0,active:"line"===M}),onClick:()=>{P("line")}}),d.createElement(Pt,{type:"vertical"}),d.createElement(Ote,{className:g({"button-link-icon":!0,active:"hexbin"===M}),onClick:()=>{P("hexbin")}})),d.createElement(Dt,{placement:"left",content:$[M],trigger:"click",autoAdjustOverflow:!1,getPopupContainer:()=>document.body},d.createElement("a",{className:"a-icon"},d.createElement(R,null))),d.createElement("a",{className:"a-icon"},d.createElement(K,{onClick:()=>{h(_.uniqueId("refreshFlag_"))}})),d.createElement("a",{className:"a-icon"},d.createElement(we,{onClick:()=>{const e=localStorage.getItem("curCluster"),t=l(s({type:"timeseries",version:"2.0.0",name:n,step:a,range:i},D),{targets:_.map(vte({metric:n,match:xte(r),aggrFunc:E,aggrGroups:b,calcFunc:p,comparison:y}),(e=>({expr:e})))});var o;(o=[{configs:JSON.stringify({curCluster:e,dataProps:t})}],ji("/api/n9e/share-charts",{method:Li.Post,data:o})).then((e=>{const t=e.dat;window.open("/chart/"+t)}))}})),d.createElement("a",{className:"a-icon"},d.createElement(G,{onClick:o})))},d.createElement("div",null,d.createElement(zt,{size:"large"},d.createElement("div",null,"计算函数：",d.createElement(kt,{overlay:d.createElement(vt,{onClick:e=>m("clear"===e.key?"":e.key),selectedKeys:[p]},d.createElement(vt.Item,{key:"rate_1m"},"rate_1m"),d.createElement(vt.Item,{key:"rate_5m"},"rate_5m"),d.createElement(vt.Item,{key:"increase_1m"},"increase_1m"),d.createElement(vt.Item,{key:"increase_5m"},"increase_5m"),d.createElement(vt.Divider,null),d.createElement(vt.Item,{key:"clear"},"clear"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},p||"无"," ",d.createElement(N,null)))),d.createElement("div",null,"环比：",y.map((e=>d.createElement(Mt,{key:e,closable:!0,onClose:()=>{v(_.without(y,e))}},e))),d.createElement(kt,{overlay:d.createElement(vt,{style:{maxHeight:"200px",overflowY:"auto"},onClick:e=>{-1===y.indexOf(e.key)?v([...y,e.key]):v(_.without(y,e.key))},selectedKeys:y},d.createElement(vt.Item,{key:"1d"},"1d"),d.createElement(vt.Item,{key:"7d"},"7d"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(Z,null)))),d.createElement("div",null,"聚合函数：",d.createElement(kt,{overlay:d.createElement(vt,{onClick:e=>x(e.key),selectedKeys:[E]},d.createElement(vt.Item,{key:"sum"},"sum"),d.createElement(vt.Item,{key:"avg"},"avg"),d.createElement(vt.Item,{key:"max"},"max"),d.createElement(vt.Item,{key:"min"},"min"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},E," ",d.createElement(N,null)))),E?d.createElement("div",{className:"graph-config-inner-item"},"聚合维度：",b.map((e=>d.createElement(Mt,{key:e,closable:!0,onClose:()=>{C(_.without(b,e))}},e))),d.createElement(kt,{overlay:d.createElement(vt,{style:{maxHeight:"200px",overflowY:"auto"},onClick:e=>{-1===b.indexOf(e.key)?C([...b,e.key]):C(_.without(b,e.key))},selectedKeys:b},_.map(_.filter(w,(e=>"__name__"!==e)),(e=>d.createElement(vt.Item,{key:e},e))))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(Z,null)))):null,"hexbin"===M&&d.createElement("div",null,"取值计算：",d.createElement(kt,{overlay:d.createElement(vt,{onClick:e=>L(e.key),selectedKeys:[F]},_.map(b7,((e,t)=>d.createElement(vt.Item,{key:t},e.name))))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},null==(t=b7[F])?void 0:t.name," ",d.createElement(N,null)))))),d.createElement("div",null,"line"===M&&d.createElement(_u,{inDashboard:!1,values:D,series:k}),"hexbin"===M&&d.createElement("div",{style:{padding:"20px 0 0 0",height:A.chartheight}},d.createElement(u7,{values:B,series:k}))))}function Fte(e){const{range:t,setRange:n,match:r}=e,[i,a]=f.exports.useState(_.uniqueId("refreshFlag_")),[o,c]=f.exports.useState(""),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState({}),[g,y]=f.exports.useState("all"),[v,E]=f.exports.useState([]),[x,b]=f.exports.useState([]),[C,S]=f.exports.useState(),w=xte(r);return f.exports.useEffect((()=>{w&&function(e,t){return ji("/api/n9e/prometheus/api/v1/label/__name__/values",{method:Li.Get,params:l(s({},gs(t)),{"match[]":e})}).then((e=>null==e?void 0:e.data))}(w,t).then((e=>{const t=_.union(e),n=_.union(_.compact(_.map(t,(e=>_.get(_.split(e,"_"),"[0]")))));var r;h(t),E(n),(r=t,ji("/api/n9e/metrics/desc",{method:Li.Post,data:r,silence:!0}).then((e=>null==e?void 0:e.dat))).then((e=>{m(e)}))}))}),[i,w]),f.exports.useEffect((()=>{b([]),y("all"),h([])}),[r.id,w]),d.createElement("div",{className:"n9e-metric-views-metrics"},d.createElement("div",null,d.createElement("div",{className:"n9e-metric-views-metrics-header"},d.createElement("div",{className:"metric-page-title"},"监控指标"),d.createElement(wt,{prefix:d.createElement(P,null),value:o,onChange:e=>{c(e.target.value)},placeholder:"搜索，空格分隔多个关键字",addonAfter:d.createElement(K,{style:{cursor:"pointer"},onClick:()=>{a(_.uniqueId("refreshFlag_"))}})})),d.createElement("div",null,u.length>0?d.createElement(d.Fragment,null,d.createElement(Ut,{size:"small",style:{width:"100%"},tabList:_.map(["all",...v],(e=>({key:e,tab:e}))),activeTabKey:g,onTabChange:y},d.createElement("div",null,((e=[],t)=>{const n=_.filter(e,(e=>{let n=!0;if(n="all"===t||0===e.indexOf(t),n&&o)try{n=new RegExp(o,"gi").test(e)}catch(uu){n=!1}return n}));return d.createElement("div",{className:"tabPane",style:{height:240,overflow:"auto"}},n.length?d.createElement("ul",{className:"n9e-metric-views-metrics-content",style:{border:"none"}},_.map(n,((e,t)=>d.createElement("li",{className:"item",key:t,onClick:()=>{b(_.union(_.concat(e,x)))}},d.createElement("span",null,e),_.find(x,(t=>t===e))?d.createElement("span",{style:{marginLeft:8}},"+1"):null,p[e]?d.createElement(yt,{title:p[e]},d.createElement("span",{className:"desc"},p[e])):null)))):d.createElement("div",{style:{textAlign:"center"}},"No data"))})(u,g))),d.createElement(Ot,{style:{padding:"10px 0"}},d.createElement(At,{span:8},d.createElement(zt,null,d.createElement(Ns,{value:t,onChange:e=>{n(e)}}),d.createElement(mk,{onChange:e=>{S(null===e?void 0:e)},initialValue:C}),d.createElement(Ct,{style:{padding:"4px 8px"},onClick:()=>{n(l(s({},t),{refreshFlag:_.uniqueId("refreshFlag_")}))},icon:d.createElement(K,null)}))),d.createElement(At,{span:16,style:{textAlign:"right"}},d.createElement(Ct,{onClick:()=>{b([])},disabled:!x.length,style:{background:"#fff"}},"清空图表"))),_.map(x,((e,n)=>d.createElement(Pte,{key:e,metric:e,match:r,range:t,step:C,onClose:()=>{const e=[...x];e.splice(n,1),b(e)}})))):d.createElement("div",{style:{marginTop:12}},"暂无指标数据，请选择左侧 Labels"))))}function Lte(){const[e,t]=f.exports.useState(),[n,r]=f.exports.useState({start:"now-1h",end:"now"}),[i,a]=f.exports.useState(_.uniqueId("rerenderFlag_"));return d.createElement(Pa,{title:"快捷视图",icon:d.createElement(S,null),hideCluster:!1,onChangeCluster:()=>{a(_.uniqueId("rerenderFlag_"))}},d.createElement("div",{className:"n9e-metric-views",key:i},d.createElement(Tte,{onSelect:e=>{t(e)},range:n}),e?d.createElement(d.Fragment,null,d.createElement(kte,{range:n,value:e,onChange:e=>{t(e)}}),d.createElement(Fte,{range:n,setRange:r,match:e})):null))}const Rte=function(e){return ji("/api/n9e/metric-descriptions",{method:Li.Get,params:e})};const{confirm:Dte}=Tt,{TextArea:Bte}=wt,$te=()=>{const{t:e}=Ur(),[t]=St.useForm(),n=f.exports.useRef(null),r=f.exports.useRef(null),[i,a]=f.exports.useState(!1),[o,l]=f.exports.useState("create"),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState({}),[m,g]=f.exports.useState(""),y=k(),v={import:e("导入"),edit:e("编辑"),export:e("导出"),create:e("创建")},E=()=>{a(!1)},x=t=>{var r;(r=[t.id],ji("/api/n9e/metric-descriptions",{method:Li.Delete,data:{ids:r}})).then((async t=>{await n.current.refreshList(),Et.success(e("删除指标成功"))}))},[b,C]=f.exports.useState(e("更多操作")),S=t=>{switch(t){case"import":a(!0),l("import");break;case"export":c.length<=0?Et.warning(e("请勾选需要导出的指标")):(a(!0),l("export"),setTimeout((()=>{r.current&&r.current.focus()})))}C(t)},w=(e,t,n,r)=>t.id===h.id?d.createElement(wt,{defaultValue:e,onPressEnter:()=>T("save"),onChange:e=>((e,t,n,r)=>{let i=Object.assign({},t);i[r]=e.target.value,p(i)})(e,t,0,r)}):d.createElement("span",null,e),T=async(t="")=>{if("save"===t){let t=h.id||-1;await function(e,t){return ji(`/api/n9e/metric-description/${e}`,{method:Li.Put,data:t})}(t,{description:h.description,metric:h.metric}),Et.success(e("编辑成功")),n.current.refreshList()}p({})},_=[{title:e("指标名称"),dataIndex:"metric",key:"metric",render:(e,t)=>d.createElement("a",{onClick:()=>{let n={pathname:"/metric/explorer",state:{name:e,description:t.description}};y.push(n)}},e)},{title:e("释义"),dataIndex:"description",width:"40%",key:"description",render:(e,t,n)=>w(e,t,0,"description")},{title:e("操作"),dataIndex:"",key:"operations",width:"15%",render:(t,n)=>d.createElement("div",{className:"operations"},n.id!==h.id?d.createElement("div",null,d.createElement("span",{className:"operation-item edit",onClick:()=>(e=>{p(e)})(n)},e("编辑")),d.createElement("div",{className:"table-operator-area-warning",style:{display:"inline-block",marginLeft:10},onClick:()=>{Dte({title:e("确定删除该指标?"),icon:d.createElement(Ve,null),onOk:()=>{x(n)}})}},e("删除"))):d.createElement("div",null,d.createElement("span",{className:"operation-item edit-save",onClick:()=>T("save")},e("保存")),d.createElement("span",{className:"operation-item edit-cancel",onClick:()=>T("cancel")},e("取消"))))}],O={onChange:(e,t)=>{let n=[];t.map((e=>{n.push(`${e.metric}:${e.description}`)})),u(n)}};return d.createElement(Pa,{title:e("指标释义"),icon:d.createElement(Ye,null)},d.createElement("div",{className:"indicator-index"},d.createElement("div",{className:"indicator-operations"},d.createElement(wt,{className:"searchInput",onPressEnter:e=>{let t=e.target.value;g(t)},prefix:d.createElement(P,null),placeholder:e("指标名称或释义")}),d.createElement("div",{className:"operations"},d.createElement(Ct.Group,null,d.createElement(Ct,{size:"middle",type:"default",icon:d.createElement(Ue,null),onClick:()=>S("import")},e("导入")),d.createElement(Ct,{size:"middle",type:"default",icon:d.createElement(qe,null),onClick:()=>S("export")},e("导出"))))),d.createElement("div",{className:"indicator-main"},d.createElement(uee,{fetchHandle:Rte,ref:n,fetchParams:{query:m},rowSelection:s({},O),rowKey:e=>e.id,columns:_}))),d.createElement(Tt,{title:v[o],destroyOnClose:!0,footer:"export"!==o&&[d.createElement(Ct,{key:"delete",onClick:E},e("取消")),d.createElement(Ct,{key:"submit",type:"primary",onClick:async()=>{try{const i=await t.validateFields();(r=i.metrics||"",ji("/api/n9e/metric-descriptions",{method:Li.Post,data:{data:r}})).then((async t=>{t&&t.success&&(await n.current.refreshList(),a(!1),Et.success(e("创建指标成功")))}))}catch(uu){}var r}},e("确定"))],onCancel:E,visible:i},d.createElement("p",{style:{color:"#999"}},"export"===o?d.createElement("a",{onClick:()=>{Ai(c)}},"Download.txt"):d.createElement("span",null,e("一行一个"))),(()=>{switch(o){case"export":return d.createElement("div",{contentEditable:"true",suppressContentEditableWarning:!0,ref:r,style:{height:"200px",border:"1px solid #d9d9d9",overflow:"auto",padding:"10px"}},c.map(((e,t)=>d.createElement("div",{key:t},e))));case"import":case"create":return d.createElement(St,{name:o+"-dialog",form:t,preserve:!1},d.createElement(St.Item,{name:"metrics",key:"metrics",rules:[{required:!0,message:e("不能为空"),validateTrigger:"trigger"}]},d.createElement(Bte,{placeholder:"name:description",rows:4})))}})()))};const zte=()=>{const{t:e}=Ur();return d.createElement(Pa,{title:e("告警规则"),showBack:!0,hideCluster:!0},d.createElement(JC,null))},Hte=()=>{const{t:e}=Ur(),t=Fi().get("mode"),n=pe(),r=f.exports.useMemo((()=>n.id),[n]),[i,a]=f.exports.useState({});f.exports.useEffect((()=>(o(),()=>{})),[r]);const o=async()=>{const e=await(t=r,ji(`/api/n9e/alert-rule/${t}`,{method:Li.Get}));var t;a(e.dat||{})};return d.createElement(Pa,{title:e("告警规则"),showBack:!0,backPath:"/alert-rules",hideCluster:!0},i.id&&d.createElement(JC,{detail:i,type:t?2:1}))};function jte(e){const{series:t,xThresholds:n}=e,r={custom:{drawStyle:"lines",fillOpacity:0,stack:"hidden",lineInterpolation:"smooth"},options:{legend:{displayMode:"hidden"},tooltip:{mode:"all"},xThresholds:{steps:_.map(n,(e=>({value:e,color:"red"})))}}};return d.createElement("div",{style:{height:200}},d.createElement(_u,{values:r,series:t,onClick:e.onClick}))}const Gte={origin:"#573BA7",upper_bound:"#1A94FF",lower_bound:"#2ACA96",anomaly:"red"};function Vte(e){const{rid:t,uuid:n,promql:r,visible:i,setVisible:a}=e,[o,s]=f.exports.useState({start:"now-1h",end:"now"}),[l,c]=f.exports.useState(15),[u,h]=f.exports.useState([]);return f.exports.useEffect((()=>{const e=ms(o),r=I(e.start).unix(),i=I(e.end).unix();let a=l;l||(a=Math.max(Math.floor((i-r)/240),1)),t&&n&&Ta({rid:t,uuid:n,start:r,end:i,step:a}).then((e=>{const t=_.map(_.filter(e.data,(e=>"predict"!==e.metric.value_type)),(e=>{const t=e.metric.value_type;return{name:`${t}`,data:e.values,color:Gte[t],lineDash:"origin"===t||"anomaly"===t?[]:[4,4]}})),n=[],r=_.cloneDeep(_.find(t,{name:"origin"})),i=_.find(t,{name:"lower_bound"}),a=_.find(t,{name:"upper_bound"});n.push({name:"lower_upper_bound",data:_.map(null==i?void 0:i.data,((e,t)=>a?[...e,null==a?void 0:a.data[t][1]]:[])),color:"#ccc",opacity:.5}),r&&n.push(r),h(n)}))}),[t,n,JSON.stringify(o),l]),d.createElement(en,{title:"曲线详情",width:800,placement:"right",onClose:()=>{a(!1)},visible:i},d.createElement("div",null,d.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},d.createElement(Vc,{readonly:!0,url:"/api/n9e/prometheus",value:r}),d.createElement(zt,null,d.createElement(Cs,{value:o,onChange:s,refreshTooltip:`刷新间隔小于 step(${q7(o,l)}s) 将不会更新数据`}),d.createElement(mk,{value:l,onChange:e=>c(e),initialValue:l}))),d.createElement(jte,{series:u})))}const Yte={total:{border:"#9684C6",bg:"#EBE8F2",text:"总曲线数",title:"所有曲线"},success:{border:"#83D35C",bg:"#E8F4E3",text:"训练成功",title:"训练成功",status:1},fail:{border:"#EE5A52",bg:"#FCE7E6",text:"训练失败",title:"训练失败",status:2},training:{border:"#CCCCCC",bg:"#F4F4F4",text:"训练中",title:"训练中",status:0}};function Ute(){const[e,t]=f.exports.useState({}),[n,r]=f.exports.useState([]),[i,a]=f.exports.useState(""),[o,c]=f.exports.useState({}),[u,h]=f.exports.useState("total"),p=pe();return f.exports.useEffect((()=>{var e;(e=p.id,ji("/api/fc-brain/jobs",{method:Li.Get,params:{id:e}}).then((e=>e.data))).then((e=>{t({total:e.total,success:e.success,fail:e.fail,training:e.training}),r(e.jobs)}))}),[p.id]),d.createElement(Pa,{title:"训练结果",showBack:!0,hideCluster:!0},d.createElement("div",{className:"strategy-jobs-content"},d.createElement("div",{style:{padding:16}},d.createElement(Ot,{gutter:16},_.map(e,((t,n)=>d.createElement(At,{key:n,span:6},d.createElement("div",{style:{border:`1px solid ${Yte[n].border}`,borderRadius:2,background:Yte[n].bg,height:86,display:"flex",gap:16,alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>{h(n)}},d.createElement(tn,{width:60,type:"circle",percent:t/e.total*100,strokeColor:Yte[n].border,strokeWidth:12,trailColor:"#FFFFFF",format:()=>null}),d.createElement("div",null,d.createElement("div",{style:{fontSize:24,color:"#333",fontWeight:500}},t),d.createElement("div",{style:{color:"#666"}},Yte[n].text))))))),d.createElement(Ft,{style:{marginTop:6},rowKey:"uuid",showHeader:!0,title:()=>d.createElement("h3",null,Yte[u].title),dataSource:_.filter(n,(e=>i?e.promql.indexOf(i)>-1:"total"===u||e.status===Yte[u].status)),columns:[{title:d.createElement(zt,null,d.createElement("span",null,"PromQL"),d.createElement(wt,{size:"small",prefix:d.createElement(P,null),value:i,onChange:e=>{a(e.target.value)}})),dataIndex:"promql",key:"promql"},{title:"结果",dataIndex:"train_detail",key:"train_detail"},{title:"操作",render:e=>2===e.status?null:d.createElement("a",{onClick:()=>{c({visible:!0,uuid:e.uuid,promql:e.promql})}},"曲线详情")}],locale:{emptyText:()=>0===e.total||0!==e.total&&0!==e.training?d.createElement("div",{style:{padding:"20px 0"}},d.createElement(We,{style:{fontSize:24}}),d.createElement("div",null,"曲线模型训练中")):d.createElement(Zt,{image:Zt.PRESENTED_IMAGE_SIMPLE})}}))),d.createElement(Vte,l(s({rid:p.id},o),{setVisible:e=>{c(l(s({},o),{visible:e}))}})))}const{confirm:qte}=Tt,Wte=()=>{const{t:e}=Ur(),t=k(),n=ai(),[r,i]=f.exports.useState(""),{curBusiItem:a}=ci((e=>e.common)),[o,s]=f.exports.useState(void 0),[l,c]=f.exports.useState([]),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState([]),[g,y]=f.exports.useState(!1),v=[{title:e("集群"),dataIndex:"cluster",render:e=>{const t=e.split(" ")||[];return t.length&&t.map(((e,t)=>d.createElement(bo,{text:e,key:t})))||d.createElement("div",null)}},{title:e("规则备注"),dataIndex:"note",render:(e,t)=>d.createElement("div",{className:"table-active-text",onClick:()=>{n({type:"shield/setCurShieldData",data:t}),S(t.id)}},e)},{title:e("标签"),dataIndex:"tags",render:e=>d.createElement(d.Fragment,null,e?e.map(((e,t)=>e?d.createElement("div",{key:t,style:{lineHeight:"16px"}},`${e.key} ${e.func} ${"in"===e.func?e.value.split(" ").join(", "):e.value}`):null)):"")},{title:e("屏蔽原因"),dataIndex:"cause",render:(e,t)=>d.createElement(d.Fragment,null,d.createElement(yt,{placement:"topLeft",title:e},d.createElement("div",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"16px"}},e)),"by ",t.create_by)},{title:e("屏蔽时间"),dataIndex:"btime",render:(t,n)=>d.createElement("div",{className:"shield-time"},d.createElement("div",null,e("开始:"),he(1e3*(null==n?void 0:n.btime)).format("YYYY-MM-DD HH:mm:ss")),d.createElement("div",null,e("结束:"),he(1e3*(null==n?void 0:n.etime)).format("YYYY-MM-DD HH:mm:ss")))},{title:e("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Lt,{checked:e===co.Enable,size:"small",onChange:()=>{const{id:e,disabled:n}=t;var r,i;(r={ids:[e],fields:{disabled:n?0:1}},i=a.id,ji(`/api/n9e/busi-group/${i}/alert-mutes/fields`,{method:Li.Put,data:r})).then((()=>{C()}))}})},{title:e("操作"),width:"98px",dataIndex:"operation",render:(r,i)=>d.createElement(d.Fragment,null,d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{n({type:"shield/setCurShieldData",data:i}),(null==a?void 0:a.id)&&t.push(`/alert-mutes/edit/${i.id}?mode=clone`)}},e("克隆")),d.createElement("div",{className:"table-operator-area-warning",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{qte({title:e("确定删除该告警屏蔽?"),icon:d.createElement(Ve,null),onOk:()=>{E(i.id)},onCancel(){}})}},e("删除"))))}];f.exports.useEffect((()=>{b()}),[a]),f.exports.useEffect((()=>{x()}),[r,l,u]);const E=t=>{var n,r;(n={ids:[t]},r=a.id,ji(`/api/n9e/busi-group/${r}/alert-mutes`,{method:Li.Delete,data:n})).then((t=>{C(),t.err?Et.success(t.err):Et.success(e("删除成功"))}))},x=()=>{const e=JSON.parse(JSON.stringify(u)).filter((e=>{const t=e.tags.find((e=>e.key.indexOf(r)>-1||e.value.indexOf(r)>-1||e.func.indexOf(r)>-1));return(e.cause.indexOf(r)>-1||!!t)&&(l&&(null==l?void 0:l.indexOf(e.cluster))>-1||0===(null==l?void 0:l.length))}));m(e||[])},b=async()=>{if(a.id){y(!0);const{success:t,dat:n}=await(e={id:a.id},ji(`/api/n9e/busi-group/${e.id}/alert-mutes`,{method:Li.Get}));t&&(h(n||[]),y(!1))}var e},C=()=>{b()},S=(e,n=!1)=>{(null==a?void 0:a.id)&&t.push(`/alert-mutes/edit/${e}${n?"?mode=clone":""}`)};return d.createElement(Pa,{title:e("屏蔽规则"),icon:d.createElement(G,null),hideCluster:!0},d.createElement("div",{className:"shield-content"},d.createElement(io,{busiGroup:{onChange:e=>{s(e)}}}),(null==a?void 0:a.id)?d.createElement("div",{className:"shield-index"},d.createElement("div",{className:"header"},d.createElement("div",{className:"header-left"},d.createElement(xo,{className:"strategy-table-search-left-refresh",onClick:()=>{C()}}),d.createElement(sS,{onClusterChange:e=>c(e)}),d.createElement(wt,{onPressEnter:e=>{let t=e.target.value;i(t)},className:"searchInput",prefix:d.createElement(P,null),placeholder:e("搜索标签、屏蔽原因")})),d.createElement("div",{className:"header-right"},d.createElement(Ct,{type:"primary",className:"add",ghost:!0,onClick:()=>{t.push("/alert-mutes/add")}},e("新增屏蔽规则")))),d.createElement(Ft,{rowKey:"id",pagination:{total:p.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:vo,defaultPageSize:30},loading:g,dataSource:p,columns:v})):d.createElement(ao,{text:"屏蔽规则"})))},{Option:Xte}=Nt,Kte=({field:e,remove:t,form:n})=>{const{t:r}=Ur(),[i,a]=f.exports.useState(""),[o,s]=f.exports.useState("==");f.exports.useEffect((()=>{const t=n.getFieldValue("tags");l(t[e.name].func)}),[e]);const l=e=>{let t="";"in"===e?t="可以输入多个值，用回车分割":"=~"===e&&(t="请输入正则表达式匹配标签value"),s(e),a(t)};return d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:[10,10],style:{marginBottom:"10px"}},d.createElement(At,{span:5},d.createElement(St.Item,{style:{marginBottom:0},name:[e.name,"key"],fieldKey:[e.name,"key"],rules:[{required:!0,message:r("key不能为空")}]},d.createElement(wt,{placeholder:r("请输入屏蔽事件标签key")}))),d.createElement(At,{span:3},d.createElement(St.Item,{style:{marginBottom:0},name:[e.name,"func"],fieldKey:[e.name,"func"],initialValue:"=="},d.createElement(Nt,{suffixIcon:d.createElement(H,null),onChange:l},d.createElement(Xte,{value:"=="},"=="),d.createElement(Xte,{value:"=~"},"=~"),d.createElement(Xte,{value:"in"},"in"),d.createElement(Xte,{value:"not in"},"not in"),d.createElement(Xte,{value:"!="},"!="),d.createElement(Xte,{value:"!~"},"!~")))),d.createElement(At,{span:15},d.createElement(St.Item,{style:{marginBottom:0},name:[e.name,"value"],fieldKey:[e.name,"value"],rules:[{required:!0,message:r("value不能为空")}]},["not in","in"].includes(o)?d.createElement(Nt,{mode:"tags",open:!1,style:{width:"100%"},placeholder:r(i),tokenSeparators:[" "]}):d.createElement(wt,{className:"ant-input",placeholder:r(i)}))),d.createElement(At,null,d.createElement(ie,{style:{marginTop:"8px"},onClick:()=>t(e.name)}))))},Qte={prometheus:"Prometheus",elasticsearch:"Elasticsearch","aliyun-sls":"阿里云SLS"};function Zte({visible:e,form:t}){const n=e?["prometheus","elasticsearch","aliyun-sls"]:["prometheus"];return d.createElement(St.Item,{label:"数据源类型",name:"cate"},d.createElement(Nt,{suffixIcon:d.createElement(H,null),onChange:()=>{t.setFieldsValue({cluster:[]})}},n.map((e=>d.createElement(Nt.Option,{key:e,value:e},Qte[e])))))}function Jte({form:e,cate:t}){const[n,r]=f.exports.useState([]);return f.exports.useEffect((()=>{"elasticsearch"===t&&Vi().then((({dat:e})=>{r(e)})).catch((()=>{r([])})),"aliyun-sls"===t&&Yi().then((({dat:e})=>{r(e)})).catch((()=>{r([])})),"prometheus"===t&&Gi().then((({dat:e})=>{r(e)})).catch((()=>{r([])}))}),[t]),d.createElement(St.Item,{label:"生效集群",name:"cluster",rules:[{required:!0,message:"生效集群不能为空"}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:t=>{t.includes("$all")&&e.setFieldsValue({cluster:["$all"]})}},d.createElement(Nt.Option,{value:"$all",key:"$all"},"$all"),null==n?void 0:n.map((e=>d.createElement(Nt.Option,{value:e,key:e},e)))))}const{Option:ene}=Nt,{TextArea:tne}=wt,nne=({detail:e={},type:t,tagsObj:n={}})=>{const r=(new Date).getTime(),i=(new Date).getTime()+36e5,{t:a}=Ur(),[o]=St.useForm(null),c=k(),[u,h]=f.exports.useState("1h"),{curBusiItem:p,busiGroups:m}=ci((e=>e.common)),[g,y]=f.exports.useState(m);f.exports.useEffect((()=>{g.length||y(m)}),[JSON.stringify(m)]),f.exports.useEffect((()=>{const e=o.getFieldValue("btime"),t=o.getFieldValue("etime");return t&&e&&(I.duration(t-e).days(),I.duration(t-e).hours(),I.duration(t-e).minutes(),I.duration(t-e).seconds()),p?o.setFieldsValue({busiGroup:p.id}):g.length>0?o.setFieldsValue({busiGroup:g[0].id}):(Et.warning("无可用业务组"),c.push("/alert-mutes")),()=>{}}),[o]),f.exports.useEffect((()=>{var e;if((null==n?void 0:n.tags)&&(null==n?void 0:n.tags.length)>0){const t=null==(e=null==n?void 0:n.tags)?void 0:e.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));o.setFieldsValue({tags:t||[{}],cluster:[n.cluster],busiGroup:n.group_id})}(null==n?void 0:n.cate)&&o.setFieldsValue({cate:null==n?void 0:n.cate})}),[n]),f.exports.useEffect((()=>{v()}),[e]);const v=()=>{const e=o.getFieldValue("btime"),t=o.getFieldValue("etime");if(t&&e){const n=Math.round(I.duration(t-e).asYears()),r=Math.floor(I.duration(t-e).asDays()),i=Math.floor(I.duration(t-e).hours()),a=Math.floor(I.duration(t-e).minutes()),o=Math.floor(I.duration(t-e).seconds());if(n>0){h(""+(n?`${n}y `:""))}else{h(`${r?`${r}d `:""}${i?`${i}h `:""}${a?`${a}m `:""}${o?`${o}s`:""}`)}}},[E,x]=f.exports.useState(!1),b=f.exports.useRef(0),C=f.exports.useMemo((()=>_.debounce((e=>{b.current+=1;const t=b.current;y([]),x(!0),Ui(e).then((e=>{t===b.current&&(y(e.dat||[]),x(!1))}))}),500)),[]),S=d.createElement(St,l(s({form:o},{labelCol:{span:24},wrapperCol:{span:24}}),{layout:"vertical",className:"operate-form",onFinish:n=>{var r;const i=null==(r=null==n?void 0:n.tags)?void 0:r.map((e=>l(s({},e),{value:Array.isArray(e.value)?e.value.join(" "):e.value}))),u=l(s({},n),{cluster:n.cluster.join(" "),btime:I(n.btime).unix(),etime:I(n.etime).unix(),tags:i}),h=o.getFieldValue("busiGroup");var p,d,f;1==t?(p=u,d=h,f=e.id,ji(`/api/n9e/busi-group/${d}/alert-mute/${f}`,{method:Li.Put,data:p})).then((e=>{Et.success(a("编辑告警屏蔽成功")),c.push("/alert-mutes")})):function(e,t){return ji(`/api/n9e/busi-group/${t}/alert-mutes`,{method:Li.Post,data:e})}(u,h).then((e=>{Et.success(a("新建告警屏蔽成功")),c.push("/alert-mutes")}))},initialValues:l(s({},e),{btime:(null==e?void 0:e.btime)?I(1e3*e.btime):I(r),etime:(null==e?void 0:e.etime)?I(1e3*e.etime):I(i),cluster:e.cluster?e.cluster.split(" "):["$all"]})}),d.createElement(Ut,null,d.createElement(St.Item,{label:a("规则备注："),name:"note",rules:[{required:!0,message:a("规则备注不能为空")}]},d.createElement(wt,{placeholder:a("请输入规则备注")})),d.createElement(St.Item,{label:a("业务组："),name:"busiGroup"},d.createElement(Nt,{showSearch:!0,filterOption:!1,suffixIcon:d.createElement(H,null),onSearch:C,notFoundContent:E?d.createElement(Qt,{size:"small"}):null},_.map(g,(e=>d.createElement(ene,{value:e.id,key:e.id},e.name))))),d.createElement(ia,{var:"VITE_IS_ALERT_ES_DS"},(e=>d.createElement(Zte,{form:o,visible:e}))),d.createElement(St.Item,{shouldUpdate:(e,t)=>e.cate!==t.cate,noStyle:!0},(({getFieldValue:e})=>d.createElement(Jte,{form:o,cate:e("cate")}))),d.createElement(Ot,{gutter:10},d.createElement(At,{span:8},d.createElement(St.Item,{label:a("屏蔽开始时间："),name:"btime"},d.createElement(Xt,{showTime:!0,onChange:v}))),d.createElement(At,{span:8},d.createElement(St.Item,{label:a("屏蔽时长：")},d.createElement(Nt,{suffixIcon:d.createElement(H,null),placeholder:a("请选择屏蔽时长"),onChange:e=>{h(e);const t=(new Date).getTime(),n=e.charAt(e.length-1),r=e.substr(0,e.length-1);o.setFieldsValue({btime:I(t),etime:I(t).add({[n]:r})})},value:u},Eo.map(((e,t)=>d.createElement(ene,{key:t,value:e.value},e.value)))))),d.createElement(At,{span:8},d.createElement(St.Item,{label:a("屏蔽结束时间："),name:"etime"},d.createElement(Xt,{showTime:!0,onChange:v})))),d.createElement(Ot,{gutter:[10,10],style:{marginBottom:"8px"}},d.createElement(At,{span:5},a("屏蔽事件标签Key："),d.createElement(yt,{title:a("这里的标签是指告警事件的标签，通过如下标签匹配规则过滤告警事件")},d.createElement(ue,null))),d.createElement(At,{span:3},a("运算符：")),d.createElement(At,{span:16},a("标签Value："))),d.createElement(St.List,{name:"tags",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map(((e,t)=>d.createElement(Kte,{field:e,key:t,remove:n,form:o}))),d.createElement(St.Item,null,d.createElement(Z,{className:"control-icon-normal",onClick:()=>t()}))))),d.createElement(St.Item,{label:a("屏蔽原因"),name:"cause",rules:[{required:!0,message:a("请填写屏蔽原因")}]},d.createElement(tne,{rows:3})),d.createElement(St.Item,s({},{labelCol:{span:0},wrapperCol:{span:24}}),d.createElement(zt,null,d.createElement(Ct,{type:"primary",htmlType:"submit"},a(1===t?"编辑":2===t?"克隆":"创建")),d.createElement(Ct,{onClick:()=>window.history.back()},a("取消"))))));return d.createElement("div",{className:"operate-form-index"},S)},rne=()=>{const{t:e}=Ur();let t=E().state||{};return t&&(t.cate=t.cate||"prometheus"),d.createElement(Pa,{title:e("告警屏蔽"),showBack:!0,hideCluster:!0},d.createElement("div",{className:"shield-add"},d.createElement(nne,{tagsObj:t||void 0})))};const ine=()=>{const{t:e}=Ur(),t=k(),{curShieldData:n}=ci((e=>e.shield));n.id||t.push("/alert-mutes");const r=function(){const{search:e}=E();return d.useMemo((()=>new URLSearchParams(e)),[e])}().get("mode");return d.createElement(Pa,{title:e("告警屏蔽"),showBack:!0,hideCluster:!0},d.createElement("div",{className:"shield-add"},n.id&&d.createElement(nne,{detail:n,type:r?2:1})))},ane=function(e,t){return ji(`/api/n9e/busi-group/${t}/alert-subscribes`,{method:Li.Delete,data:e})};const{confirm:one}=Tt,sne=()=>{const{t:e}=Ur(),t=k(),[n,r]=f.exports.useState(""),{curBusiItem:i}=ci((e=>e.common)),[a,o]=f.exports.useState(void 0),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState(!1),y=[{title:e("集群"),dataIndex:"cluster",render:e=>{const t=e.split(" ")||[];return t.length&&t.map(((e,t)=>d.createElement(bo,{text:e,key:t})))||d.createElement("div",null)}},{title:e("告警规则"),dataIndex:"rule_name",render:e=>d.createElement("div",null,e)},{title:e("订阅标签"),dataIndex:"tags",render:e=>d.createElement(d.Fragment,null,e?e.map(((e,t)=>e?d.createElement("div",{key:t},`${e.key} ${e.func} ${"in"===e.func?e.value.split(" ").join(", "):e.value}`):null)):"")},{title:e("告警接收组"),dataIndex:"user_groups",render:(e,t)=>{var n;return d.createElement(d.Fragment,null,null==(n=t.user_groups)?void 0:n.map((e=>d.createElement(bo,{text:e.name,key:e.id}))))}},{title:e("编辑人"),ellipsis:!0,dataIndex:"update_by"},{title:e("操作"),width:"128px",dataIndex:"operation",render:(n,r)=>d.createElement(d.Fragment,null,d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{(null==i?void 0:i.id)&&t.push(`/alert-subscribes/edit/${r.id}`)}},e("编辑")),d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{(null==i?void 0:i.id)&&t.push(`/alert-subscribes/edit/${r.id}?mode=clone`)}},e("克隆")),d.createElement("div",{className:"table-operator-area-warning",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{one({title:e("确定删除该订阅规则?"),icon:d.createElement(Ve,null),onOk:()=>{v(r.id)},onCancel(){}})}},e("删除"))))}];f.exports.useEffect((()=>{x()}),[i]),f.exports.useEffect((()=>{E()}),[n,s,c]);const v=t=>{ane({ids:[t]},i.id).then((t=>{b(),t.err?Et.success(t.err):Et.success(e("删除成功"))}))},E=()=>{const e=JSON.parse(JSON.stringify(c)).filter((e=>{var t,r,i;const a=null==(t=null==e?void 0:e.tags)?void 0:t.find((e=>e.key.indexOf(n)>-1||e.value.indexOf(n)>-1||e.func.indexOf(n)>-1)),o=null==(r=null==e?void 0:e.user_groups)?void 0:r.find((e=>{var t;return(null==(t=null==e?void 0:e.name)?void 0:t.indexOf(n))>-1}));return((null==(i=null==e?void 0:e.rule_name)?void 0:i.indexOf(n))>-1||!!a||!!o)&&(s&&(null==s?void 0:s.indexOf(e.cluster))>-1||0===(null==s?void 0:s.length))}));p(e||[])},x=async()=>{if(i.id){g(!0);const{success:t,dat:n}=await(e={id:i.id},ji(`/api/n9e/busi-group/${e.id}/alert-subscribes`,{method:Li.Get}));t&&(u(n||[]),g(!1))}var e},b=()=>{x()};return d.createElement(Pa,{title:e("订阅规则"),icon:d.createElement(z,null),hideCluster:!0},d.createElement("div",{className:"shield-content"},d.createElement(io,{busiGroup:{onChange:e=>{o(e)}}}),(null==i?void 0:i.id)?d.createElement("div",{className:"shield-index"},d.createElement("div",{className:"header"},d.createElement("div",{className:"header-left"},d.createElement(xo,{className:"strategy-table-search-left-refresh",onClick:()=>{b()}}),d.createElement(sS,{onClusterChange:e=>l(e)}),d.createElement(wt,{onPressEnter:e=>{let t=e.target.value;r(t)},className:"searchInput",prefix:d.createElement(P,null),placeholder:e("搜索规则、标签、接收组")})),d.createElement("div",{className:"header-right"},d.createElement(Ct,{type:"primary",className:"add",ghost:!0,onClick:()=>{t.push("/alert-subscribes/add")}},e("新增订阅规则")))),d.createElement(Ft,{rowKey:"id",pagination:{total:h.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:vo,defaultPageSize:30},loading:m,dataSource:h,columns:y})):d.createElement(ao,{text:"订阅规则"})))},{Option:lne}=Nt,cne=({visible:e,ruleModalClose:t,subscribe:n})=>{const{t:r}=Ur(),{curBusiItem:i}=ci((e=>e.common)),[a,o]=f.exports.useState([]),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState(i.id),[m,g]=f.exports.useState("");f.exports.useEffect((()=>{p(i.id)}),[i]),f.exports.useEffect((()=>{E()}),[h]),f.exports.useEffect((()=>{y("")}),[]),f.exports.useEffect((()=>{x()}),[m,s]);const y=e=>{console.log(111),Ao({all:1,query:e,limit:200}).then((e=>{o(e.dat||[])}))},v=f.exports.useCallback(q.exports.debounce(y,400),[]),E=async()=>{const{success:e,dat:t}=await da({id:h});e&&l(t||[])},x=()=>{const e=JSON.parse(JSON.stringify(s)).filter((e=>e.name.indexOf(m)>-1||e.append_tags.join(" ").indexOf(m)>-1));u(e||[])},b=[{title:r("集群"),dataIndex:"cluster",render:e=>d.createElement("div",null,e)},{title:r("级别"),dataIndex:"severity",render:e=>d.createElement(Mt,{color:aa[e-1]},"S",e)},{title:r("名称"),dataIndex:"name",render:(e,t)=>d.createElement("div",{className:"table-active-text",onClick:()=>{}},e)},{title:r("告警接收者"),dataIndex:"notify_groups_obj",render:(e,t)=>e.length&&e.map(((e,t)=>d.createElement(bo,{text:e.nickname||e.username||e.name,key:t})))||d.createElement("div",null)},{title:r("附加标签"),dataIndex:"append_tags",render:e=>{const t=e||[];return t.length&&t.map(((e,t)=>d.createElement(bo,{text:e,key:t})))||d.createElement("div",null)}},{title:r("更新时间"),dataIndex:"update_at",render:e=>he(1e3*Number(e)).format("YYYY-MM-DD HH:mm:ss")},{title:r("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Lt,{checked:e===co.Enable,disabled:!0,size:"small",onChange:()=>{}})},{title:r("操作"),dataIndex:"operator",fixed:"right",width:100,render:(e,t)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{C(t)}},r("订阅")))}],C=e=>{n(e)};return d.createElement(d.Fragment,null,d.createElement(Tt,{title:r("订阅告警规则"),footer:"",forceRender:!0,visible:e,onCancel:()=>{t()},width:"80%"},d.createElement("div",null,d.createElement(Nt,{style:{width:"280px"},value:h,onChange:e=>{p(e)},showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>v(e),onBlur:()=>y("")},a.map((e=>d.createElement(lne,{value:e.id,key:e.id},e.name)))),d.createElement(wt,{style:{marginLeft:10,width:"280px"},onPressEnter:e=>{let t=e.target.value;g(t)},prefix:d.createElement(P,null),placeholder:r("规则名称、附加标签")})),d.createElement("div",{className:"rule_modal_table"},d.createElement(Ft,{rowKey:"id",pagination:{total:c.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:vo,defaultPageSize:30},dataSource:c,columns:b}))))},{Option:une}=Nt,hne=({field:e,remove:t,form:n})=>{const{t:r}=Ur(),[i,a]=f.exports.useState(""),[o,s]=f.exports.useState("==");f.exports.useEffect((()=>{const t=n.getFieldValue("tags");l(t[e.name].func)}),[]);const l=e=>{let t="";"in"===e?t="可以输入多个值，用回车分割":"=~"===e&&(t="请输入正则表达式匹配标签value"),s(e),a(t)};return d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:[10,10],style:{marginBottom:"10px"}},d.createElement(At,{span:5},d.createElement(St.Item,{style:{marginBottom:0},name:[e.name,"key"],fieldKey:[e.name,"key"],rules:[{required:!0,message:r("key不能为空")}]},d.createElement(wt,{placeholder:r("请输入订阅事件标签key")}))),d.createElement(At,{span:3},d.createElement(St.Item,{style:{marginBottom:0},name:[e.name,"func"],fieldKey:[e.name,"func"],initialValue:"=="},d.createElement(Nt,{suffixIcon:d.createElement(H,null),onChange:l},d.createElement(une,{value:"=="},"=="),d.createElement(une,{value:"=~"},"=~"),d.createElement(une,{value:"in"},"in"),d.createElement(une,{value:"not in"},"not in"),d.createElement(une,{value:"!="},"!="),d.createElement(une,{value:"!~"},"!~")))),d.createElement(At,{span:15},d.createElement(St.Item,{style:{marginBottom:0},name:[e.name,"value"],fieldKey:[e.name,"value"],rules:[{required:!0,message:r("value不能为空")}]},["not in","in"].includes(o)?d.createElement(Nt,{mode:"tags",open:!1,style:{width:"100%"},placeholder:r(i),tokenSeparators:[" "]}):d.createElement(wt,{className:"ant-input",placeholder:r(i)}))),d.createElement(At,null,d.createElement(ie,{style:{marginTop:"8px"},onClick:()=>t(e.name)}))))},{Option:pne}=Nt,dne=({detail:e={},type:t})=>{var n,r;const{t:i,i18n:a}=Ur(),{clusters:o}=ci((e=>e.common)),[c]=St.useForm(null),u=k(),{curBusiItem:h}=ci((e=>e.common)),[p,m]=f.exports.useState(!1),[g,y]=f.exports.useState(!1),[v,E]=f.exports.useState(),[x,b]=f.exports.useState([]),[C,S]=f.exports.useState(!0),[w,T]=f.exports.useState([]);f.exports.useEffect((()=>{A(),I("")}),[]),f.exports.useEffect((()=>{E({id:e.rule_id||0,name:e.rule_name})}),[e.rule_id]);const O=(e.user_groups?e.user_groups.filter((e=>!w.find((t=>e.id===t.id)))):[]).concat(w).map((e=>d.createElement(pne,{value:String(e.id),key:e.id},e.name))),A=async()=>{const e=await No();b(e||[])},I=async e=>{const t=await Oo({query:e}),n=t.dat||t;T(n||[])},M=f.exports.useCallback(_.debounce(I,800),[]),N=e=>{y(!1),E(e),c.setFieldsValue({rile_id:e.id||0})};return d.createElement(d.Fragment,null,d.createElement("div",{className:"operate-form-index",id:C?"littleAffect":""},d.createElement(St,l(s({form:c},{labelCol:{span:24},wrapperCol:{span:24}}),{layout:"vertical",className:"operate-form",onFinish:n=>{var r;m(!0);const a=null==(r=null==n?void 0:n.tags)?void 0:r.map((e=>l(s({},e),{value:Array.isArray(e.value)?e.value.join(" "):e.value}))),o=l(s({},n),{tags:a,redefine_severity:n.redefine_severity?1:0,redefine_channels:n.redefine_channels?1:0,rule_id:v.id,user_group_ids:n.user_group_ids?n.user_group_ids.join(" "):"",new_channels:n.new_channels?n.new_channels.join(" "):"",cluster:n.cluster.join(" ")});var c,p;1===t?(c=[l(s({},o),{id:e.id})],p=h.id,ji(`/api/n9e/busi-group/${p}/alert-subscribes`,{method:Li.Put,data:c})).then((e=>{Et.success(i("编辑订阅规则成功")),u.push("/alert-subscribes")})).finally((()=>{m(!1)})):function(e,t){return ji(`/api/n9e/busi-group/${t}/alert-subscribes`,{method:Li.Post,data:e})}(o,h.id).then((e=>{Et.success(i("新建订阅规则成功")),u.push("/alert-subscribes")})).finally((()=>{m(!1)}))},onFinishFailed:()=>{m(!1)},initialValues:l(s({},e),{cluster:e.cluster?e.cluster.split(" "):o||["Default"],redefine_severity:!!(null==e?void 0:e.redefine_severity),redefine_channels:!!(null==e?void 0:e.redefine_channels),user_group_ids:(null==e?void 0:e.user_group_ids)?null==(n=null==e?void 0:e.user_group_ids)?void 0:n.split(" "):[],new_channels:null==(r=null==e?void 0:e.new_channels)?void 0:r.split(" ")})}),d.createElement(Ut,null,d.createElement(St.Item,{label:i("生效集群："),name:"cluster",rules:[{required:!0,message:i("生效集群不能为空")}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:e=>{e.includes("$all")&&c.setFieldsValue({cluster:["$all"]})}},d.createElement(pne,{value:"$all",key:"$all"},"$all"),null==o?void 0:o.map(((e,t)=>d.createElement(pne,{value:e,key:t},e))))),d.createElement(St.Item,{label:i("订阅告警规则：")},!!(null==v?void 0:v.id)&&d.createElement(Ct,{type:"primary",ghost:!0,style:{marginRight:"8px"},onClick:()=>{(null==v?void 0:v.id)&&u.push(`/alert-rules/edit/${null==v?void 0:v.id}`)}},null==v?void 0:v.name),d.createElement(De,{style:{cursor:"pointer",fontSize:"18px"},onClick:()=>{y(!0)}}),!!(null==v?void 0:v.id)&&d.createElement(Pe,{style:{cursor:"pointer",fontSize:"18px",marginLeft:5},onClick:()=>N({})})),d.createElement(Ot,{gutter:[10,10],style:{marginBottom:"8px"}},d.createElement(At,{span:5},i("订阅事件标签Key："),d.createElement(yt,{title:i("这里的标签是指告警事件的标签，通过如下标签匹配规则过滤告警事件")},d.createElement(ue,null))),d.createElement(At,{span:3},i("运算符：")),d.createElement(At,{span:16},i("标签Value："))),d.createElement(St.List,{name:"tags",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map(((r,i)=>d.createElement(hne,{field:r,fields:e,key:i,remove:n,add:t,form:c}))),d.createElement(St.Item,null,d.createElement(Z,{className:"control-icon-normal",onClick:()=>t()}))))),d.createElement(St.Item,{label:i("告警级别："),name:"redefine_severity",valuePropName:"checked"},d.createElement(_t,{value:1,style:{lineHeight:"32px"},onChange:e=>{c.setFieldsValue({redefine_severity:e.target.checked?1:0}),S(!C)}},i("重新定义"))),d.createElement(St.Item,{label:i("新的告警级别："),name:"new_severity",initialValue:2,style:{display:c.getFieldValue("redefine_severity")?"block":"none"}},d.createElement(Yt.Group,null,d.createElement(Yt,{key:1,value:1},i("一级报警")),d.createElement(Yt,{key:2,value:2},i("二级报警")),d.createElement(Yt,{key:3,value:3},i("三级报警")))),d.createElement(St.Item,{label:i("通知媒介："),name:"redefine_channels",valuePropName:"checked"},d.createElement(_t,{value:1,style:{lineHeight:"32px"},onChange:e=>{c.setFieldsValue({redefine_channels:e.target.checked?1:0}),S(!C)}},i("重新定义"))),d.createElement(St.Item,{label:i("新的通知媒介："),name:"new_channels",style:{display:c.getFieldValue("redefine_channels")?"block":"none"}},d.createElement(_t.Group,null,x.map((e=>d.createElement(_t,{value:e.key,key:e.label},e.label))))),d.createElement(St.Item,{label:i("订阅告警接收组："),name:"user_group_ids",rules:[{required:!0,message:i("告警接收组不能为空")}]},d.createElement(Nt,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>M(e),onBlur:()=>I("")},O)),d.createElement(St.Item,s({},{labelCol:{span:24},wrapperCol:{span:24}}),d.createElement(Ct,{type:"primary",htmlType:"submit",style:{marginRight:"8px"}},i(1===t?"编辑":2===t?"克隆":"创建")),1===t&&d.createElement(Ct,{danger:!0,style:{marginRight:"8px"},onClick:()=>{Tt.confirm({title:i("是否删除该告警规则?"),onOk:()=>{(null==e?void 0:e.id)&&ane({ids:[e.id]},h.id).then((()=>{Et.success(i("删除成功")),u.push("/alert-subscribes")}))},onCancel(){}})}},i("删除")),d.createElement(Ct,{onClick:()=>window.history.back()},i("取消"))))),d.createElement(cne,{visible:g,ruleModalClose:()=>{y(!1)},subscribe:N})))},fne=()=>{const{t:e}=Ur();return d.createElement(Pa,{title:e("订阅规则"),showBack:!0},d.createElement("div",{className:"shield-add"},d.createElement(dne,null)))};const mne=()=>{const{t:e}=Ur();k(),ci((e=>e.common));const[t,n]=f.exports.useState(),r=function(){const{search:e}=E();return d.useMemo((()=>new URLSearchParams(e)),[e])}().get("mode"),i=pe(),a=f.exports.useMemo((()=>i.id),[i]);f.exports.useEffect((()=>{o()}),[a]);const o=async()=>{const{dat:e}=await(t=a,ji(`/api/n9e/alert-subscribe/${t}`,{method:Li.Get}));var t;const r=e.tags.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));n(l(s({},e),{tags:r}))};return d.createElement(Pa,{title:e("订阅规则"),showBack:!0},d.createElement("div",{className:"shield-add"},(null==t?void 0:t.id)&&d.createElement(dne,{detail:t,type:r?2:1})))};var gne={exports:{}},yne=V(gne.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));t.default=r.default,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){return e&&e.__esModule?e:{default:e}}t.default=c;var a=n(3),o=i(n(4)),s=n(14),l=i(n(15));function c(e){var t=e.activeClassName,n=void 0===t?"":t,i=e.activeIndex,o=void 0===i?-1:i,c=e.activeStyle,u=e.autoEscape,h=e.caseSensitive,p=void 0!==h&&h,d=e.className,f=e.findChunks,m=e.highlightClassName,g=void 0===m?"":m,y=e.highlightStyle,v=void 0===y?{}:y,E=e.highlightTag,x=void 0===E?"mark":E,b=e.sanitize,C=e.searchWords,S=e.textToHighlight,w=e.unhighlightClassName,T=void 0===w?"":w,k=e.unhighlightStyle,_=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightClassName","unhighlightStyle"]),O=(0,a.findAll)({autoEscape:u,caseSensitive:p,findChunks:f,sanitize:b,searchWords:C,textToHighlight:S}),A=x,I=-1,M="",N=void 0,P=(0,l.default)((function(e){var t={};for(var n in e)t[n.toLowerCase()]=e[n];return t}));return(0,s.createElement)("span",r({className:d},_,{children:O.map((function(e,t){var r=S.substr(e.start,e.end-e.start);if(e.highlight){I++;var i=void 0;i="object"==typeof g?p?g[r]:(g=P(g))[r.toLowerCase()]:g;var a=I===+o;M=i+" "+(a?n:""),N=!0===a&&null!=c?Object.assign({},v,c):v;var l={children:r,className:M,key:t,style:N};return"string"!=typeof A&&(l.highlightIndex=I),(0,s.createElement)(A,l)}return(0,s.createElement)("span",{children:r,className:T,key:t,style:k})}))}))}c.propTypes={activeClassName:o.default.string,activeIndex:o.default.number,activeStyle:o.default.object,autoEscape:o.default.bool,className:o.default.string,findChunks:o.default.func,highlightClassName:o.default.oneOfType([o.default.object,o.default.string]),highlightStyle:o.default.object,highlightTag:o.default.oneOfType([o.default.node,o.default.func,o.default.string]),sanitize:o.default.func,searchWords:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.instanceOf(RegExp)])).isRequired,textToHighlight:o.default.string.isRequired,unhighlightClassName:o.default.string,unhighlightStyle:o.default.object},e.exports=t.default},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return r.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return r.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return r.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return r.findChunks}})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=function(e){var t=e.autoEscape,a=e.caseSensitive,o=void 0!==a&&a,s=e.findChunks,l=void 0===s?r:s,c=e.sanitize,u=e.searchWords,h=e.textToHighlight;return i({chunksToHighlight:n({chunks:l({autoEscape:t,caseSensitive:o,sanitize:c,searchWords:u,textToHighlight:h})}),totalLength:h?h.length:0})};var n=t.combineChunks=function(e){var t=e.chunks;return t=t.sort((function(e,t){return e.start-t.start})).reduce((function(e,t){if(0===e.length)return[t];var n=e.pop();if(t.start<=n.end){var r=Math.max(n.end,t.end);e.push({start:n.start,end:r})}else e.push(n,t);return e}),[])},r=function(e){var t=e.autoEscape,n=e.caseSensitive,r=e.sanitize,i=void 0===r?a:r,o=e.searchWords,s=e.textToHighlight;return s=i(s),o.filter((function(e){return e})).reduce((function(e,r){r=i(r),t&&(r=r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));for(var a=new RegExp(r,n?"g":"gi"),o=void 0;o=a.exec(s);){var l=o.index,c=a.lastIndex;c>l&&e.push({start:l,end:c}),o.index==a.lastIndex&&a.lastIndex++}return e}),[])};t.findChunks=r;var i=t.fillInChunks=function(e){var t=e.chunksToHighlight,n=e.totalLength,r=[],i=function(e,t,n){t-e>0&&r.push({start:e,end:t,highlight:n})};if(0===t.length)i(0,n,!1);else{var a=0;t.forEach((function(e){i(a,e.start,!1),i(e.start,e.end,!0),a=e.end})),i(a,n,!1)}return r};function a(e){return e}}])},function(e,t,n){(function(t){e.exports=n(13)()}).call(t,n(5))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(uu){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(uu){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(uu){r=o}}();var l,c=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(uu){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(t){var r=n(7),i=n(8),a=n(9),o=n(10),s=n(11),l=n(12);e.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,c="<<anonymous>>",u={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:d(r.thatReturnsNull),arrayOf:function(e){return d((function(t,n,r,i,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var o=t[n];if(!Array.isArray(o))return new p("Invalid "+i+" `"+a+"` of type `"+g(o)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<o.length;l++){var c=e(o,l,r,i,a+"["+l+"]",s);if(c instanceof Error)return c}return null}))},element:d((function(t,n,r,i,a){var o=t[n];return e(o)?null:new p("Invalid "+i+" `"+a+"` of type `"+g(o)+"` supplied to `"+r+"`, expected a single ReactElement.")})),instanceOf:function(e){return d((function(t,n,r,i,a){if(!(t[n]instanceof e)){var o=e.name||c;return new p("Invalid "+i+" `"+a+"` of type `"+((s=t[n]).constructor&&s.constructor.name?s.constructor.name:c)+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}var s;return null}))},node:d((function(e,t,n,r,i){return m(e[t])?null:new p("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return d((function(t,n,r,i,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var o=t[n],l=g(o);if("object"!==l)return new p("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in o)if(o.hasOwnProperty(c)){var u=e(o,c,r,i,a+"."+c,s);if(u instanceof Error)return u}return null}))},oneOf:function(e){return Array.isArray(e)?d((function(t,n,r,i,a){for(var o=t[n],s=0;s<e.length;s++)if(h(o,e[s]))return null;return new p("Invalid "+i+" `"+a+"` of value `"+o+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")})):r.thatReturnsNull},oneOfType:function(e){if(!Array.isArray(e))return r.thatReturnsNull;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return a(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",v(n),t),r.thatReturnsNull}return d((function(t,n,r,i,a){for(var o=0;o<e.length;o++)if(null==(0,e[o])(t,n,r,i,a,s))return null;return new p("Invalid "+i+" `"+a+"` supplied to `"+r+"`.")}))},shape:function(e){return d((function(t,n,r,i,a){var o=t[n],l=g(o);if("object"!==l)return new p("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var h=u(o,c,r,i,a+"."+c,s);if(h)return h}}return null}))},exact:function(e){return d((function(t,n,r,i,a){var l=t[n],c=g(l);if("object"!==c)return new p("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var u=o({},t[n],e);for(var h in u){var d=e[h];if(!d)return new p("Invalid "+i+" `"+a+"` key `"+h+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=d(l,h,r,i,a+"."+h,s);if(f)return f}return null}))}};function h(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e){this.message=e,this.stack=""}function d(e){function n(n,r,a,o,l,u,h){return o=o||c,u=u||a,h!==s&&t&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),null==r[a]?n?null===r[a]?new p("The "+l+" `"+u+"` is marked as required in `"+o+"`, but its value is `null`."):new p("The "+l+" `"+u+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(r,a,o,l,u)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function f(e){return d((function(t,n,r,i,a,o){var s=t[n];return g(s)!==e?new p("Invalid "+i+" `"+a+"` of type `"+y(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,a=r.call(t);if(r!==t.entries){for(;!(i=a.next()).done;)if(!m(i.value))return!1}else for(;!(i=a.next()).done;){var o=i.value;if(o&&!m(o[1]))return!1}return!0;default:return!1}}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function y(e){if(null==e)return""+e;var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function v(e){var t=y(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return p.prototype=Error.prototype,u.checkPropTypes=l,u.PropTypes=u,u}}).call(t,n(5))},function(e,t){function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){(function(t){e.exports=function(e,t,n,r,i,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}}).call(t,n(5))},function(e,t,n){(function(t){var r=n(7);e.exports=r}).call(t,n(5))},function(e,t){var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var o,s,l=a(e),c=1;c<arguments.length;c++){for(var u in o=Object(arguments[c]))r.call(o,u)&&(l[u]=o[u]);if(n){s=n(o);for(var h=0;h<s.length;h++)i.call(o,s[h])&&(l[s[h]]=o[s[h]])}}return l}},function(e,t){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){(function(t){e.exports=function(e,t,n,r,i){}}).call(t,n(5))},function(e,t,n){var r=n(7),i=n(8),a=n(11);e.exports=function(){function e(e,t,n,r,o,s){s!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t){e.exports=f.exports},function(e,t){var n=function(e,t){return e===t};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=void 0,i=[],a=void 0,o=!1,s=function(e,n){return t(e,i[n])},l=function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];return o&&r===this&&n.length===i.length&&n.every(s)?a:(o=!0,r=this,i=n,a=e.apply(this,n))};return l}}]));function vne(e,t){const[n,r]=f.exports.useState(e);return f.exports.useEffect((()=>{const n=setTimeout((()=>{r(e)}),t);return()=>{clearTimeout(n)}}),[e,t]),n}var Ene={"zh-CN":{back:"返回","table.search.placeholder":"模糊搜索表格内容(多个关键词请用空格分隔。如：key1 key2)","table.sort.ascend":"升序","table.sort.descend":"降序","table.total.prefix":"共","table.total.suffix":"条","table.select.num":"已选择: ","table.filter.search.placeholder":"请输入要搜索的内容","table.filter.search.btn.ok":"搜索","table.filter.search.btn.cancel":"清空","table.filter.header.title":"过滤条件:","table.filter.header.search":":搜索","table.filter.header.filter":":过滤","table.filter.header.btn.clear":"清空","form.item.key.title":"自定义Key","form.item.value.title":"自定义Value","form.detail.nodata":"暂无数据","form.item.key.placeholder":"请输入Key","form.item.value.placeholder":"请输入Value","form.item.add":"增加自定义参数","form.placeholder.prefix":"请输入","form.selectplaceholder.prefix":"请选择","queryform.reset":"重置","queryform.search":"查询","queryform.collapsed":"收起","queryform.expand":"展开","color.placeholder":"请选择颜色"},"en-US":{back:"Back","table.search.placeholder":"Fuzzy search table content (multiple keywords separated by Spaces. Such as: key1 key2)","table.sort.ascend":"Ascend","table.sort.descend":"Descend","table.total.prefix":"Total","table.total.suffix":"Items","table.select.num":"Selected: ","table.filter.search.placeholder":"Please enter keywords","table.filter.search.btn.ok":"Search","table.filter.search.btn.cancel":"Clear","table.filter.header.title":"Filtration Conditions:","table.filter.header.search":": Search","table.filter.header.filter":": Filter","table.filter.header.btn.clear":"Clear","form.item.key.title":"Custom Key","form.item.value.title":"Custom Value","form.detail.nodata":"No Data","form.item.key.placeholder":"Please enter key","form.item.value.placeholder":"Please enter value","form.item.add":"Add Custom Parameters","form.placeholder.prefix":"Please enter","form.selectplaceholder.prefix":"Please select","queryform.reset":"Clear","queryform.search":"Search","queryform.collapsed":"Collapsed","queryform.expand":"Expand","color.placeholder":"Please select color"}};const xne=e=>Ene["zh-CN"][e],bne="object"==typeof window,Cne=(e,t=!1)=>{const[n,r]=f.exports.useState(bne?()=>window.matchMedia(e).matches:t);return f.exports.useEffect((()=>{let t=!0;const n=window.matchMedia(e),i=()=>{t&&r(!!n.matches)};return n.addListener(i),r(n.matches),()=>{t=!1,n.removeListener(i)}}),[e]),n},Sne={xs:"(max-width: 575px)",sm:"(min-width: 576px) and (max-width: 767px)",md:"(min-width: 768px) and (max-width: 991px)",lg:"(min-width: 992px) and (max-width: 1199px)",xl:"(min-width: 1200px) and (max-width: 1599px)",xxl:"(min-width: 1600px)"},wne=()=>{const e=Cne(Sne.md),t=Cne(Sne.lg),n=Cne(Sne.xxl),r=Cne(Sne.xl),i=Cne(Sne.sm),a=Cne(Sne.xs),[o,s]=f.exports.useState((()=>{let e="md";return"undefined"==typeof window||(e=Object.keys(Sne).find((e=>{const t=Sne[e];return!!window.matchMedia(t).matches}))),e})());return f.exports.useEffect((()=>{s(n?"xxl":r?"xl":t?"lg":e?"md":i?"sm":a?"xs":"md")}),[e,t,n,r,i,a]),o};var Tne="undefined"!=typeof Element,kne="function"==typeof Map,_ne="function"==typeof Set,One="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function Ane(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,r,i,a;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!Ane(e[r],t[r]))return!1;return!0}if(kne&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;for(a=e.entries();!(r=a.next()).done;)if(!Ane(r.value[1],t.get(r.value[0])))return!1;return!0}if(_ne&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(One&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(Tne&&e instanceof Element)return!1;for(r=n;0!=r--;)if(("_owner"!==i[r]&&"__v"!==i[r]&&"__o"!==i[r]||!e.$$typeof)&&!Ane(e[i[r]],t[i[r]]))return!1;return!0}return e!=e&&t!=t}const Ine=function(e,t){try{return Ane(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}},Mne=(e,t)=>{((e,t,n)=>{const r=f.exports.useRef(void 0);r.current&&n(t,r.current)||(r.current=t),f.exports.useEffect(e,r.current)})(e,t,Ine)},Nne=St.Item,{Option:Pne}=Nt,Fne={xs:24,sm:24,md:12,lg:12,xl:8,xxl:6},Lne={labelCol:{xs:{span:5},sm:{span:5},md:{span:7},lg:{span:7},xl:{span:8},xxl:{span:8}},wrapperCol:{xs:{span:19},sm:{span:19},md:{span:17},lg:{span:17},xl:{span:16},xxl:{span:16}}},Rne=(e,t)=>{if("number"==typeof e)return e;return s(s({},Fne),e)[t]},Dne=(e,t=8)=>{const n=24/t;return(n-1-e%n)*t},Bne=e=>{const t=`${e.prefixCls||"dantd"}-query-form`,n=xne,{className:r,style:i,colConfig:a,searchText:o,resetText:c,showOptionBtns:u=!0,showCollapseButton:h=!0,defaultCollapse:p=!1,isResetClearAll:m=!1,onChange:y,onSearch:v,onReset:E,getFormInstance:x,columns:b=[],mode:C="full",colMode:S="grid",columnStyleHideNumber:w=1,defaultColStyle:T={width:"300px"}}=e,k=g(t,r),_=g({[`${t}-formitem`]:!0,[`${t}-formitem-full`]:"full"===C}),O=wne(),A=a||Fne,[I,M]=f.exports.useState(Rne(A||8,O)),[P]=St.useForm(),{validateFields:F,getFieldsValue:L,resetFields:R,setFieldsValue:D}=P,[B,$]=f.exports.useState(p),z=L();f.exports.useEffect((()=>{M(Rne(A||8,O))}),[O]),f.exports.useEffect((()=>{x&&x(P)}),[]),Mne((()=>{y&&Object.keys(z).length>0&&y(z,P)}),[z]);const H={6:3,8:2,12:1,24:1}[Rne(A||8,O)]||1;const j=()=>{F().then((e=>{v&&v(e,P)}))},G=()=>{if(m){const e=b.reduce(((e,t)=>t.dataIndex?l(s({},e),{[Array.isArray(t.dataIndex)?t.dataIndex.join("."):t.dataIndex]:void 0}):s({},e)),{});D(e)}else R();setTimeout((()=>{E&&E(L(),P)}))},V=()=>{j()};return d.createElement(Rt,s({},e.antConfig),d.createElement("div",{className:k,style:i},d.createElement(St,{form:P,layout:"inline"},d.createElement(Ot,{gutter:[12,12]},b.map(((e,t)=>{let r=B&&H<=t,i={};return"style"===S&&(i=e.colStyle||T,B&&t>=w&&(r=!0)),i=l(s({},i),{display:r?"none":"block"}),d.createElement(At,s({style:i,key:`query-form-col-${e.dataIndex}-${t}`},A),"input"===e.type&&(e=>{const{initialValue:t,dataIndex:r,title:i,required:a,componentProps:o={},placeholder:c,isInputPressEnterCallSearch:u,formItemLayout:h,rules:p,size:f="default"}=e,m=c||n("form.placeholder.prefix");let g=[];a&&(g=[{required:!0,message:m}]);const y=h||"align"===C?Lne:{};return d.createElement(Nne,l(s({name:r,label:i,className:_},y),{initialValue:t,rules:p||g}),d.createElement(wt,s({"data-testid":"field-input",size:f,maxLength:255,placeholder:m,onPressEnter:u?V:()=>{}},o)))})(e),"select"===e.type&&(e=>{const{initialValue:t,dataIndex:r,title:i,required:a,placeholder:o,selectMode:c="single",rules:u,formItemLayout:h,options:p=[],componentProps:f={},size:m="default"}=e,g=o||d.createElement(d.Fragment,null,n("form.selectplaceholder.prefix")," ",i);let y=[];a&&(y=[{required:!0,message:g}]);const v=h||"align"===C?Lne:{};return d.createElement(Nne,l(s({name:r,label:i,className:_},v),{initialValue:t,rules:u||y}),d.createElement(Nt,s({"data-testid":"select",mode:c,size:m,allowClear:!0,placeholder:g,showSearch:!0,optionFilterProp:"children",style:{width:"100%"}},f),p.map((e=>d.createElement(Pne,{key:`query-form-select-option-${e.value}`,"data-testid":"select-option",value:e.value},e.title)))))})(e),"custom"===e.type&&(e=>{const{initialValue:t,formItemLayout:r,dataIndex:i,title:a,required:o,placeholder:c,rules:u,valuePropName:h="value",component:p}=e,f=c||d.createElement(d.Fragment,null,n("form.placeholder.prefix")," ",a);let m=[];o&&(m=[{required:!0,message:f}]);const g=r||"align"===C?Lne:{};return d.createElement(Nne,l(s({name:i,label:a,className:_},g),{initialValue:t,rules:u||m,valuePropName:h}),p)})(e))})),u&&(()=>{const e=B?b.length<=H?Dne(b.length,I):Dne(H,I):Dne(b.length,I);let r={};return"style"===S&&(r={position:"absolute",width:280,bottom:0,right:0,marginLeft:0}),d.createElement(At,l(s({},A),{offset:e,key:"option",className:`${t}-option`,style:s({},r)}),d.createElement(St.Item,null,d.createElement("span",null,d.createElement(Ct,{onClick:G},c||n("queryform.reset")),d.createElement(Ct,{onClick:j,style:{marginLeft:10},type:"primary",htmlType:"submit"},o||n("queryform.search")),h&&d.createElement("a",{style:{marginLeft:10,display:"inline-block"},onClick:()=>{$(!B)}},n(B?"queryform.expand":"queryform.collapsed"),d.createElement(N,null)))))})()))))},$ne=["10","20","50","100"];function zne(e,t){switch(t.type){case"update":return l(s({},e),{[t.dataIndex]:l(s({},e[t.dataIndex]),{dataIndex:t.dataIndex,type:t.updateType,value:t.value})});case"clear":return s({},t.initialState);default:return e}}function Hne(e,t){switch(t.type){case"update":return s({},t.value);case"clear":return{};default:return e}}var jne=d.forwardRef((function(e,t){const n=`${e.prefixCls||"dantd"}-data-table`,r=e.filterType||"half",i=f.exports.useRef(),a=xne,{fetchOptions:o={},searchParams:c,showFilter:u=!0,showReloadBtn:h=!0,showQueryOptionBtns:p=!0,showQueryCollapseButton:m=!0,isQuerySearchOnChange:y=!0,showBodyBg:v=!1,queryFormProps:E={},url:x,queryMode:b="default",reloadBtnPos:C="right",searchPos:S="full",reloadBtnType:w="icon",queryFormColumns:T,pageParams:k,antProps:O={rowKey:"id"}}=e,A=g(n,e.className),I=g({[`${n}-table-content`]:!0,[`${n}-table-content-noborder`]:e.hideContentBorder}),M=g({[`${n}-body`]:!!T||v,[`${n}-body-compact`]:"compact"===b}),N=g({[`${n}-query`]:!!T,[`${n}-query-compact`]:"compact"===b}),F=f.exports.useMemo((()=>{const t={};return e.columns&&e.columns.length>0&&e.columns.forEach((e=>{e.dataIndex&&(t[e.dataIndex]=l(s({},e),{value:null}))})),t}),[e.columns]),[L,R]=f.exports.useState({}),[D,B]=f.exports.useState(!1),z=f.exports.useRef(!1),H=f.exports.useRef({}),j=f.exports.useRef({}),[G,V]=f.exports.useState([]),[Y,U]=f.exports.useState(!1),[q,W]=f.exports.useReducer(Hne,{}),[X,K]=f.exports.useState(!1),[Q,Z]=f.exports.useState(),ee=e.rowSelection,te=ee?ee.selectedRowKeys&&ee.selectedRowKeys.length:-1,ne={ascend:a("table.sort.ascend"),descend:a("table.sort.descend")},re=!!c,ie=re&&"full"===S,ae="full"===S&&h&&"right"===C,oe=(!re||"full"!==S)&&h&&"right"===C,se=h&&"left"===C,le=c?c.placeholder:a("table.search.placeholder"),[ce,ue]=f.exports.useState(s({current:1,pageSize:10,total:0},k)),[he,pe]=f.exports.useReducer(zne,F),de=vne(Q,300),fe=vne(JSON.stringify(L),300),me=JSON.stringify({pageSize:ce.pageSize,current:ce.current}),ge=JSON.stringify(s(s({},he),q));async function ye(t){let n=x,r=null;if(-1!==n.indexOf("?")){const e=n.split("?");n=e[0],r=xi.parse(e[1],{arrayFormat:"comma"})}let i={[k.curPageName]:t.current,[k.pageSizeName]:t.pageSize};r&&(i=s(s({},r),i)),0===k.startPage&&(i[k.curPageName]-=1),e.columns.forEach((e=>{e.dataIndex&&t[e.dataIndex]&&(i[e.dataIndex]=t[e.dataIndex]),e.apiSearch&&t[e.apiSearch.name]&&(i[e.apiSearch.name]=t[e.apiSearch.name]),e.apiFilter&&t[e.apiFilter.name]&&(i[e.apiFilter.name]=t[e.apiFilter.name]),e.apiSorter&&t[e.apiSorter.name]&&(i[e.apiSorter.name]=t[e.apiSorter.name])})),c&&t[c.apiName]&&(i[c.apiName]=t[c.apiName]),T&&L&&Object.keys(L).length>0&&(i=s(s({},L),i)),e.customQueryCallback&&(i=e.customQueryCallback(s({},i))),n=`${n}?${xi.stringify(i,{arrayFormat:"comma"})}`,e.customFetchUrlCallback&&(n=e.customFetchUrlCallback(n)),U(!0);let a=s({},o);o.method&&"post"===o.method.toLowerCase()&&(a.data=i);const u=ji(n,a);e.rowSelection&&e.rowSelection.onChange&&e.rowSelection.onChange([]),(u.status<200||u.status>=300)&&e.apiErrorCallback?(e.apiErrorCallback(u),U(!1)):u.then((async t=>{let n=t;e.apiCallback&&(n=e.apiCallback(t)),e.apiAsyncCallback&&(n=await e.apiAsyncCallback(t)),V(n.data);const r=l(s({},ce),{total:n.total});ue(r),U(!1)})).catch((()=>{e.apiErrorCallback&&e.apiErrorCallback(u),U(!1)}))}f.exports.useEffect((()=>{if(x&&i.current!==x){ye(Ce()),setTimeout((()=>{i.current=x}))}}),[x]),f.exports.useEffect((()=>{if(!i.current)return;let t=Ce();t[ce.curPageName]=1,c&&de&&de.trim()&&(t[c.apiName]=de.trim()),e.onSearch&&e.onSearch(de?de.trim():de),ye(t)}),[de]),f.exports.useEffect((()=>{if(!i.current)return;if(!T||L&&0===Object.keys(L).length)return;let e=Ce();e[ce.curPageName]=1,ye(e)}),[fe]),f.exports.useEffect((()=>{if(!i.current)return;ye(Ce())}),[ge]),f.exports.useEffect((()=>{if(!i.current||!ce.pageSize)return;if(z.current)return void(z.current=!1);ye(Ce())}),[me]);const ve=f.exports.useCallback(((e,t,n)=>{t&&t(),e&&n&&pe({type:"update",dataIndex:n,updateType:"search",value:e[0]})}),[]),Ee=f.exports.useCallback(((e,t)=>{e&&e([]),t&&pe({type:"update",dataIndex:t})}),[]),xe=()=>{W({type:"clear"}),pe({type:"clear",initialState:F}),K(!1),setTimeout((()=>{Object.values(j.current).forEach((e=>{e&&e.clearFilters&&e.clearFilters([])}))}))},be=()=>{W({type:"clear"}),Te(null,{})},Ce=()=>{let e=s({},ce);return q&&q.order&&(e[q.column.apiSorter.name]=q.column.apiSorter[q.order]),Object.values(he).forEach((t=>{const n=t.dataIndex,r=t.value;if(t.apiFilter&&r){let i=F[n].apiFilter?F[n].apiFilter.name:n;e[i]=r,t.apiFilter.callback&&(e[i]=F[n].apiFilter.callback(r))}if(t.apiSearch&&r){const t=F[n].apiSearch?F[n].apiSearch.name:n;e[t]=Array.isArray(r)?r[0]:r}})),c&&Q&&(e[c.apiName]=Q),(T||L&&Object.keys(L).length>0)&&(e=s(s({},L),e)),e},Se=()=>{ye(Ce())},we=e=>{const t=e.target.value;Z(t),ue(l(s({},ce),{current:1}))},Te=(e,t,n)=>{const r=t||q,i=e||he,a=n||he,o=Object.values(a).some((e=>!("search"!==e.type||!e.value)));let s=!1;s=e?Object.values(i).some((e=>e&&e.length>0)):Object.values(i).some((e=>!!("filter"===e.type&&e.value&&e.value.length>0)));const l=!!r.column;K(o||s||l)},_e=Object.values(he).some((e=>!("search"!==e.type||!e.value))),Oe=Object.values(he).some((e=>!!("filter"===e.type&&e.value&&e.value.length>0)));f.exports.useImperativeHandle(t,(()=>({handleReload:Se,goToFirstPage:()=>{ue(l(s({},ce),{current:1}))}})));const Ae=e=>u?d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("b",{style:{marginTop:4,display:"inline-block"}},a("table.filter.header.title"))),(_e||Oe)&&Object.values(he).map((t=>{if("search"===t.type&&t.value)return d.createElement("div",{key:`search-header-${t.dataIndex}`,className:`${e.headerClsPrefix}-item`},d.createElement(yt,{title:d.createElement("span",null,t.title,":"," ",t.value)},d.createElement(Ct,{size:"small",className:"table-header-item-btn",onClick:()=>(e=>{pe({type:"update",dataIndex:e.dataIndex}),j.current[e.dataIndex]&&j.current[e.dataIndex].clearFilters&&j.current[e.dataIndex].clearFilters([]),Te(null,q,l(s({},he),{[e.dataIndex]:{title:he[e.dataIndex].title,dataIndex:he[e.dataIndex].dataIndex,value:null}}))})(t)},d.createElement("span",{className:"table-header-item-btn-content"},t.title,":"," ",t.value),d.createElement(J,null))));if("filter"===t.type&&t.value&&t.value.length>0){const n=(F[t.dataIndex]?F[t.dataIndex].filters:[]).reduce(((e,t)=>l(s({},e),{[t.value]:[t.text]})),{}),r=t.value.map((e=>n&&n[e]?n[e]:e));return d.createElement("div",{key:`search-header-${t.dataIndex}`,className:`${e.headerClsPrefix}-item`},d.createElement(yt,{title:d.createElement("span",null,t.title,":"," ",r.join(","))},d.createElement(Ct,{size:"small",className:"table-header-item-btn",onClick:()=>(e=>{pe({type:"update",dataIndex:e.dataIndex,value:[]});const t=Object.values(he).map((t=>t.dataIndex===e.dataIndex?{[t.dataIndex]:[]}:{[t.dataIndex]:t.value||[]}));Te(t,q,he)})(t)},d.createElement("span",{className:"table-header-item-btn-content"},t.title,":"," ",r.join(",")),d.createElement(J,null))))}return null})),q.columnKey&&q.column&&d.createElement("div",{className:`${e.headerClsPrefix}-item`},d.createElement(yt,{title:d.createElement("span",null,F[q.columnKey].title,`: ${ne[q.order]}`)},d.createElement(Ct,{size:"small",className:"table-header-item-btn",onClick:be},d.createElement("span",{className:"table-header-item-btn-content"},F[q.columnKey].title,`: ${ne[q.order]}`),d.createElement(J,null)))),d.createElement("div",{className:`${e.headerClsPrefix}-item`},d.createElement(Ct,{size:"small",type:"link","data-testid":"btn-clearall",onClick:xe},a("table.filter.header.btn.clear")))):null,Ie=()=>d.createElement(yt,{placement:"topLeft",title:le},d.createElement(wt,{"data-testid":"search-input",prefix:"right"===C&&d.createElement(P,{style:{color:"rgba(0,0,0,.25)"}}),suffix:"left"===C&&d.createElement(P,{style:{color:"rgba(0,0,0,.25)"}}),allowClear:!0,value:Q,onChange:we,placeholder:le})),Me=()=>{if("icon"===w){const e=g({[`${n}-header-loadbtn`]:!0,[`${n}-header-loadbtn-icon`]:!0,[`${n}-header-loadbtn-right`]:"right"===C,[`${n}-header-loadbtn-left`]:"left"===C});return d.createElement($,{onClick:Se,spin:Y,className:e,type:"reload"})}if("btn"===w){const e=g({[`${n}-header-loadbtn`]:!0,[`${n}-header-loadbtn-btn`]:!0,[`${n}-header-loadbtn-right`]:"right"===C,[`${n}-header-loadbtn-left`]:"left"===C});return d.createElement(Ct,{className:e,loading:Y,icon:d.createElement($,null),"data-testid":"reload-btn",onClick:Se})}};return d.createElement(Rt,s({},e.antConfig),d.createElement("div",{className:A,style:e.style},T&&d.createElement("div",{className:N},d.createElement(Bne,s({onChange:y?e=>{z.current=!0,ue(l(s({},ce),{current:1})),R(e)}:e=>{D||(R(e),B(!0))},onReset:e=>{z.current=!0,ue(l(s({},ce),{current:1})),R(e)},onSearch:e=>{ce.current>1?(z.current=!0,ue(l(s({},ce),{current:1})),R(e)):R(e)},columns:T,showOptionBtns:p,showCollapseButton:m},E))),d.createElement("div",{className:M},!!e.tableTitle&&d.createElement("h3",null," ",e.tableTitle," "),e.customHeader&&d.createElement("div",{"data-testid":"custom-header",className:`${n}-header-custom`},e.customHeader),ie&&d.createElement(Ot,{type:"flex",className:`${n}-header-search`},re?Ie():d.createElement("div",null),ae&&Me()),"flex"===r&&d.createElement("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"10px"}},se&&Me(),e.leftHeader),"none"===r&&"right"!==S&&d.createElement(Ot,{className:`${n}-header-filter`},se&&Me(),d.createElement(At,{"data-testid":"left-header",className:g(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`)},e.leftHeader),oe&&Me()),"none"===r&&re&&"right"===S&&d.createElement(Ot,{className:`${n}-header-filter`},d.createElement(At,{"data-testid":"left-header",className:g(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`),span:14},se&&Me(),e.leftHeader),d.createElement(At,{"data-testid":"right-header",className:`${n}-header-filter-right`,span:10},Ie()),oe&&Me()),"line"===r&&d.createElement(Ot,{className:`${n}-header-filter`},se&&Me(),d.createElement(At,{"data-testid":"right-header",className:`${n}-header-filter-line`,span:24},X&&Ae({headerClsPrefix:`${n}-header-filter-line`})),oe&&Me()),"half"===r&&d.createElement(Ot,{className:`${n}-header-filter`},se&&Me(),d.createElement(At,{"data-testid":"left-header",className:g(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`),span:12},e.leftHeader),d.createElement(At,{"data-testid":"right-header",className:`${n}-header-filter-right`,span:12},X&&Ae({headerClsPrefix:`${n}-header-filter-right`})),oe&&Me()),d.createElement("div",{className:`${n}-table-wrapper`},d.createElement("div",{className:I},d.createElement(Ft,s({loading:Y,columns:e.columns.map((e=>{const t=_.cloneDeep(e);if(t.apiFilter&&(t.filterIcon=()=>d.createElement(ke,null),t.filteredValue=he[e.dataIndex].value),t.apiSorter&&(t.sortOrder=q.columnKey===t.dataIndex&&q.order),t.apiSearch){t.filterIcon=()=>d.createElement(P,null),t.onFilterDropdownVisibleChange=e=>{e&&H.current&&H.current.select&&setTimeout((()=>(H.current&&H.current.select&&H.current.select(),null)))},t.filterDropdown=({setSelectedKeys:e,selectedKeys:n,confirm:r,clearFilters:i})=>(j.current[t.dataIndex]={clearFilters:i},d.createElement("div",{style:{padding:8}},d.createElement(wt,{"data-testid":"filter-search-input",autoFocus:!0,ref:e=>{H.current=e},placeholder:a("table.filter.search.placeholder"),value:n&&n[0],onChange:t=>e?e(t.target.value?[t.target.value]:[]):[],onPressEnter:()=>ve(n,r,t.dataIndex),style:{width:188,marginBottom:8,display:"block"}}),d.createElement(Ct,{type:"primary",onClick:()=>ve(n,r,t.dataIndex),icon:"search",size:"small","data-testid":"search-btn-ok",style:{width:90,marginRight:8}},a("table.filter.search.btn.ok")),d.createElement(Ct,{onClick:()=>Ee(i,t.dataIndex),size:"small",style:{width:90}},a("table.filter.search.btn.cancel"))));let e=[];const n=he[t.dataIndex].value;"string"==typeof n&&(e=[n]),Array.isArray(n)&&"string"==typeof n[0]&&(e=[n[0]]),t.onFilter=(e,n)=>n[t.dataIndex].toString().toLowerCase().includes(e.toLowerCase()),t.render||(t.render=(n,r,i)=>t.searchRender?t.searchRender(n,r,i,d.createElement(yne,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:e,autoEscape:!0,textToHighlight:String(n)})):d.createElement(yne,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:e,autoEscape:!0,textToHighlight:String(n)}))}return t})),dataSource:G,bordered:!1,rowSelection:ee,onChange:(e,t,n)=>{i.current&&(Object.keys(n).length>0&&n.column?W({type:"update",value:l(s({},n),{column:{apiSorter:n.column.apiSorter}})}):W({type:"update",value:{}}),Object.entries(t).forEach((([e,t])=>{F[e].filters&&pe({type:"update",dataIndex:e,updateType:"filter",value:t})})),z.current=!1,ue(e),Te(t,n))},pagination:s(s({showTotal:e=>`${a("table.total.prefix")} ${e} ${a("table.total.suffix")}`,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:$ne},e.pagination),ce)},O)),ee&&void 0!==te&&te>0&&d.createElement("div",{className:`${n}-table-content-select-num`},a("table.select.num"),te))))))}));function Gne(e){const{onRefreshRule:t}=e,[n]=St.useForm(),[r,i]=f.exports.useState(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState(),h=localStorage.getItem("selectedAlertRule"),[p,m]=f.exports.useState(h?Number(h):0),[g,y]=f.exports.useState(""),{profile:v}=ci((e=>e.account));function E(e){e&&(m(e),localStorage.setItem("selectedAlertRule",String(e)))}f.exports.useEffect((()=>{x(!0).then((e=>{if(p&&e&&e.length>0){const n=null==e?void 0:e.find((e=>e.id===p));n?t(n.rule):E(e[0].id)}}))}),[]),f.exports.useEffect((()=>{if(p&&r&&r.length>0){const e=null==r?void 0:r.find((e=>e.id===p));e?t(e.rule):E(r[0].id)}}),[p]);const x=(e=!1)=>ji("/api/n9e/alert-aggr-views",{method:Li.Get}).then((t=>{const n=t.dat.sort(((e,t)=>e.cate-t.cate));return i(n),e&&n.length>0&&!n.find((e=>e.id===p))&&E(n[0].id),n})),b=e=>{Tt.confirm({title:`确定要删除聚合策略 ${e.name} 吗？`,onOk:async()=>{var t;await(t=[e.id],ji("/api/n9e/alert-aggr-views",{method:Li.Delete,data:{ids:t}})),Et.success("删除成功"),x(!0)},onCancel:()=>{}})};return d.createElement("div",{className:"left-area",style:{width:240,background:"#fff"}},d.createElement("div",{className:"event-page-title"},d.createElement("span",null,"聚合规则"),d.createElement("a",{onClick:()=>o(!0)},d.createElement(ze,null))),d.createElement(wt,{style:{margin:"10px 0"},prefix:d.createElement(P,null),value:g,onChange:e=>{y(e.target.value)}}),null==r?void 0:r.filter((e=>e.name.includes(g))).map((e=>d.createElement("div",{className:e.id===p?"card-menu-item is-active":"card-menu-item",onClick:()=>E(e.id),key:e.id},d.createElement("div",{className:"label-area"},d.createElement("div",{className:"title"},e.name)),1===e.cate||v.admin?d.createElement("div",null,0===e.cate&&d.createElement("div",{className:"default-holder"},"公开"),d.createElement("div",{className:"icon-area"},d.createElement(De,{onClick:()=>{u(e),o(!0),n.setFieldsValue(l(s({},e),{cate:0===e.cate})),t(e.rule)}}),d.createElement(Pe,{onClick:t=>{t.stopPropagation(),b(e)}}))):d.createElement("div",{className:"default-holder"},"公开")))),d.createElement(Tt,{title:(c?"编辑":"新增")+"聚合规则",visible:a,onOk:async()=>{await n.validateFields();const e=c?wa:Sa,r=n.getFieldsValue(),i=await e(l(s({},r),{cate:r.cate?0:1}));o(!1),await x(),E(c?c.id:i.dat.id),c&&t(r.rule+" ")},onCancel:()=>{o(!1),u(void 0)},destroyOnClose:!0},d.createElement(St,{form:n,layout:"vertical",preserve:!1,initialValues:{cate:!1}},d.createElement(St.Item,{label:"Name",name:"name",rules:[()=>({validator:(e,t)=>t&&0!==t.length?Promise.resolve():Promise.reject(new Error("请输入聚合规则名称"))})]},d.createElement(wt,null)),d.createElement(St.Item,{name:"id",hidden:!0},d.createElement(wt,null)),d.createElement(St.Item,{label:"Rule",name:"rule",rules:[()=>({validator:(e,t)=>t&&0!==t.length?Promise.resolve():Promise.reject(new Error("请输入Rule"))})]},d.createElement(wt,null)),v.admin&&d.createElement(St.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Lt,null)))))}var Vne=d.forwardRef((function(e,t){const{t:n}=Ur(),{filter:r,header:i}=e,a=f.exports.useRef(null),o=k(),[c,u]=f.exports.useState(4),[h,p]=f.exports.useState(),[m,g]=f.exports.useState(),[y,v]=f.exports.useState(),[E,x]=f.exports.useState([]),[b,C]=f.exports.useState(),[S,w]=f.exports.useState(!1);f.exports.useEffect((()=>{T()}),[r,h]);const T=()=>{var e;h&&(e=l(s({},r),{rule:h.trim()}),ji("/api/n9e/alert-cur-events/card",{method:Li.Get,params:e})).then((e=>{g(e.dat)}))};f.exports.useLayoutEffect((()=>{function e(){var e;const t=null==(e=a.current)?void 0:e.offsetWidth;t&&u(function(e){return e>1500?4:e>1e3?6:e>850?8:12}(t))}const t=q.exports.throttle(e,400);return window.addEventListener("resize",t),e(),()=>window.removeEventListener("resize",t)}),[]);const _=[{title:n("集群"),dataIndex:"cluster",width:120},{title:n("规则标题&事件标签"),dataIndex:"rule_name",render(e,{id:t,tags:n}){const r=n&&n.map((e=>d.createElement(Mt,{color:"purple",key:e},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>o.push(`/alert-cur-events/${t}`)},e)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},r)))}},{title:n("触发时间"),dataIndex:"trigger_time",width:120,render:e=>I(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{title:n("操作"),dataIndex:"operate",width:120,render:(e,t)=>d.createElement(d.Fragment,null,d.createElement(Ct,{size:"small",type:"link",onClick:()=>{o.push("/alert-mutes/add",{group_id:t.group_id,cluster:t.cluster,tags:t.tags?t.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}})):[]})}},"屏蔽"),d.createElement(Ct,{size:"small",type:"link",danger:!0,onClick:()=>qne(void 0,[t.id],(()=>{x(E.filter((e=>e!==t.id))),O(y)}))},"删除"))}],O=e=>{var t;w(!0),v(e),(t=e.event_ids,ji("/api/n9e/alert-cur-events/card/details",{method:Li.Post,data:{ids:t}})).then((e=>{C(e.dat)}))};return f.exports.useImperativeHandle(t,(()=>({reloadCard:T}))),d.createElement("div",{style:{display:"flex",height:"100%"},ref:a},d.createElement(Gne,{onRefreshRule:p}),d.createElement("div",{style:{background:"#fff",flex:1,padding:16}},i,d.createElement(Ot,{gutter:[16,16],style:{marginTop:16}},null==m?void 0:m.map(((e,t)=>d.createElement(At,{span:c,key:t},d.createElement("div",{className:`event-card ${Une[e.severity-1]} ${Une[e.severity-1]}-left-border`,onClick:()=>O(e)},d.createElement("div",{className:"event-card-title"},e.title),d.createElement("div",{className:"event-card-num"},e.total))))))),d.createElement(en,{title:d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},d.createElement("span",null,null==y?void 0:y.title),d.createElement(Ct,{danger:!0,disabled:0===E.length,onClick:()=>qne(void 0,E,(()=>{x([]),O(y)}))},"批量删除")),placement:"right",onClose:()=>{w(!1)},visible:S,width:960},d.createElement(Ft,{rowKey:"id",className:"card-event-drawer",rowClassName:(e,t)=>Une[e.severity-1]+"-left-border",rowSelection:{selectedRowKeys:E,onChange(e,t){x(e.map((e=>Number(e))))}},dataSource:b,columns:_})))}));const{confirm:Yne}=Tt,Une=["red","orange","yellow","green"];function qne(e,t,n=(()=>{})){Yne({title:"删除告警事件",icon:d.createElement(Ve,null),content:"通常只有在确定监控数据永远不再上报的情况下（比如调整了监控数据标签，或者机器下线）才删除告警事件，因为相关告警事件永远无法自动恢复了，您确定要这么做吗？",okText:"确认删除",maskClosable:!0,okButtonProps:{danger:!0},zIndex:1001,onOk:()=>function(e,t){return ji("/api/n9e/alert-cur-events",{method:Li.Delete,data:{ids:t}})}(0,t).then((e=>{Et.success("删除成功"),n()})),onCancel(){}})}const Wne=()=>{const e=k(),{t:t}=Ur(),[n,r]=f.exports.useState("card"),i=ai(),[a,o]=f.exports.useState(),[s,l]=f.exports.useState([]),{hourRange:c,queryContent:u}=ci((e=>e.event)),h=f.exports.useMemo((()=>[{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:2,unit:"days",description:t("天")},{num:3,unit:"days",description:t("天")},{num:7,unit:"days",description:t("天")},{num:14,unit:"days",description:t("天")},{num:30,unit:"days",description:t("天")},{num:60,unit:"days",description:t("天")},{num:90,unit:"days",description:t("天")}]),[]),p=f.exports.useRef({handleReload(){}}),m=f.exports.useRef({reloadCard(){}}),g=f.exports.useRef(!1),[y,v]=f.exports.useState(-1),[E,x]=f.exports.useState([]),[b,C]=f.exports.useState(0);Xe((()=>{"list"===n?p.current.handleReload():m.current.reloadCard()}),b>0?1e3*b:void 0);const S=[{title:t("集群"),dataIndex:"cluster",width:120},{title:t("规则标题&事件标签"),dataIndex:"rule_name",render(t,{id:n,tags:r}){const i=r&&r.map((e=>d.createElement(Mt,{color:"purple",key:e,onClick:t=>{u.includes(e)||(g.current=!0,T("queryContent",u?`${u.trim()} ${e}`:e))}},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>e.push(`/alert-cur-events/${n}`)},t)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},i)))}},{title:t("触发时间"),dataIndex:"trigger_time",width:120,render:e=>I(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{title:t("操作"),dataIndex:"operate",width:120,render:(t,r)=>d.createElement(d.Fragment,null,d.createElement(Ct,{size:"small",type:"link",onClick:()=>{e.push("/alert-mutes/add",{group_id:r.group_id,cluster:r.cluster,tags:r.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}}))})}},"屏蔽"),d.createElement(Ct,{size:"small",type:"link",danger:!0,onClick:()=>qne(0,[r.id],(()=>{x(E.filter((e=>e!==r.id))),"list"===n&&p.current.handleReload()}))},"删除"))}];function T(e,t){i({type:"event/saveData",prop:e,data:t})}function _(){const e=d.createElement(vt,{onClick:e=>{C(e.key)}},[{num:0,unit:"second",description:"off"},{num:5,unit:"seconds",description:"s"},{num:30,unit:"seconds",description:"s"},{num:60,unit:"seconds",description:"s"}].map((({num:e,description:t})=>d.createElement(vt.Item,{key:e},e>0&&d.createElement("span",{className:"num"},e),t))));return d.createElement("div",{className:"table-operate-box",style:{background:"#fff"}},d.createElement("div",{className:"left"},d.createElement(Ct,{icon:d.createElement(Ke,null),onClick:()=>r("card")}),d.createElement(Ct,{icon:d.createElement(Qe,null),onClick:()=>r("list"),style:{marginLeft:8,marginRight:8}}),d.createElement(c_,{showRight:!1,leftList:h,value:c,onChange:e=>{e.num===c.num&&e.unit===c.unit||T("hourRange",e)}}),d.createElement(sS,{onSeverityChange:e=>o(e),onBusiGroupChange:e=>v("number"==typeof e?e:-1),onClusterChange:e=>l(e)}),d.createElement(wt,{className:"search-input",prefix:d.createElement(P,null),placeholder:"模糊搜索规则和标签(多个关键词请用空格分隔)",value:u,onChange:e=>T("queryContent",e.target.value),onPressEnter:e=>"list"===n&&p.current.handleReload()})),d.createElement("div",{className:"right"},"list"===n&&d.createElement(Ct,{danger:!0,style:{marginRight:8},disabled:0===E.length,onClick:()=>qne(0,E,(()=>{x([]),"list"===n&&p.current.handleReload()}))},"批量删除"),d.createElement(xo,{onClick:()=>{"list"===n&&p.current.handleReload(),"card"===n&&m.current.reloadCard()}}),d.createElement(kt,{overlay:e},d.createElement(Ct,{className:"interval-btn",icon:d.createElement(N,null)},b>0?b+"s":"off"))))}return f.exports.useEffect((()=>{g.current&&("list"===n&&p.current.handleReload(),g.current=!1)}),[u]),f.exports.useEffect((()=>{"list"===n&&p.current.handleReload()}),[s,a,c,y,n]),d.createElement(Pa,{icon:d.createElement(w,null),title:t("活跃告警"),hideCluster:!0},d.createElement("div",{className:"event-content cur-events"},d.createElement("div",{className:"table-area",style:{padding:"card"===n?0:void 0}},"card"===n?d.createElement("div",{style:{width:"100%",height:"100%",background:"#eee"}},d.createElement(Vne,{ref:m,header:_(),filter:Object.assign({hours:"hours"!==c.unit?24*c.num:c.num},s.length?{clusters:s.join(",")}:{},a?{severity:a}:{},u?{query:u}:{},{bgid:y})})):d.createElement(jne,{ref:p,antProps:{rowKey:"id",rowClassName:(e,t)=>Une[e.severity-1]+"-left-border",rowSelection:{selectedRowKeys:E,onChange(e,t){x(e.map((e=>Number(e))))}}},url:"/api/n9e/alert-cur-events/list",customQueryCallback:e=>Object.assign(e,{hours:"hours"!==c.unit?24*c.num:c.num},s.length?{clusters:s.join(",")}:{},a?{severity:a}:{},u?{query:u}:{},{bgid:y}),pageParams:{curPageName:"p",pageSizeName:"limit",pageSize:30,pageSizeOptions:["30","100","200","500"]},apiCallback:({dat:{list:e,total:t}})=>({data:e,total:t}),columns:S,reloadBtnType:"btn",reloadBtnPos:"right",showReloadBtn:!0,filterType:"flex",leftHeader:_()}))))},Xne={origin:"#573BA7",upper_bound:"#1A94FF",lower_bound:"#2ACA96",anomaly:"red"},Kne=e=>{let t="";return _.forEach(e,(e=>{const n=_.split(e,"uuid=");n[1]&&(t=n[1])})),t};function Qne({rid:e,tags:t,range:n,step:r}){const[i,a]=f.exports.useState([]);return f.exports.useEffect((()=>{const i=ms(n),o=I(i.start).unix(),s=I(i.end).unix();let l=r;r||(l=Math.max(Math.floor((s-o)/240),1)),Ta({rid:e,uuid:Kne(t),start:o,end:s,step:l}).then((e=>{const t=_.map(_.filter(e.data,(e=>"predict"!==e.metric.value_type)),(e=>{const t=e.metric.value_type;return{name:`${t}`,data:e.values,color:Xne[t],lineDash:"origin"===t||"anomaly"===t?[]:[4,4]}})),n=[],r=_.cloneDeep(_.find(t,{name:"origin"})),i=_.find(t,{name:"lower_bound"}),o=_.find(t,{name:"upper_bound"});n.push({name:"lower_upper_bound",data:_.map(i.data,((e,t)=>[...e,o.data[t][1]])),color:"#ccc",opacity:.5}),n.push(r),a(n)}))}),[e,JSON.stringify(t),JSON.stringify(n),r]),d.createElement("div",null,d.createElement(jte,{series:i}))}const Zne=e=>{let t=e.__name__||"";return _.forEach(_.omit(e,"__name__"),((e,n)=>{t+=` ${n}: ${e}`})),_.trim(t)};function Jne({eventId:e,range:t,triggerTime:n,onClick:r}){const[i,a]=f.exports.useState([]);return f.exports.useEffect((()=>{const n=ms(t),r=I(n.start).unix(),i=I(n.end).unix();Ia({event_id:e,start:r,end:i}).then((e=>{const t=_.map(e.dat,(e=>({id:_.uniqueId("series_"),name:Zne(e.metric),metric:e.metric,data:e.values})));a(t)}))}),[e,JSON.stringify(t)]),d.createElement("div",null,d.createElement(jte,{series:i,xThresholds:[n],onClick:r}))}const ere=e=>{let t=e.__name__||"";return _.forEach(_.omit(e,"__name__"),((e,n)=>{t+=` ${n}: ${e}`})),_.trim(t)};function tre({eventId:e,range:t,triggerTime:n,onClick:r}){const[i,a]=f.exports.useState([]);return f.exports.useEffect((()=>{const n=ms(t),r=I(n.start).unix(),i=I(n.end).unix();Ia({event_id:e,start:r,end:i}).then((e=>{const t=_.map(e.dat,(e=>({id:_.uniqueId("series_"),name:ere(e.metric),metric:e.metric,data:e.values})));a(t)}))}),[e,JSON.stringify(t)]),d.createElement("div",null,d.createElement(jte,{series:i,xThresholds:[n],onClick:r}))}function nre({data:e,triggerTime:t,onClick:n}){const[r,i]=f.exports.useState(),[a,o]=f.exports.useState(15);return f.exports.useEffect((()=>{i({start:I.unix(t).subtract(30,"minutes"),end:I.unix(t).add(30,"minutes")})}),[t]),r?d.createElement("div",null,d.createElement(zt,null,d.createElement(Cs,{value:r,onChange:i,refreshTooltip:"prometheus"===e.cate?`刷新间隔小于 step(${q7(r,a)}s) 将不会更新数据`:void 0}),"prometheus"===e.cate&&d.createElement(mk,{value:a,onChange:e=>o(e),initialValue:a})),e.rule_algo&&d.createElement(Qne,{rid:e.rule_id,tags:e.tags,range:r,step:a}),"elasticsearch"===e.cate&&d.createElement(Jne,{eventId:e.id,range:r,triggerTime:t,onClick:n}),"aliyun-sls"===e.cate&&d.createElement(tre,{eventId:e.id,range:r,triggerTime:t,onClick:n})):null}function rre(e){return function(t){const n=document.createElement("div");function r(){Y.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),Y.render(d.createElement(U,null,d.createElement(e,s({},i))),n),{destroy:r}}}const ire={AliyunSLS:rre((function(e){const{id:t,start:n,end:r,visible:i,destroy:a}=e,[o,s]=f.exports.useState({start:I.unix(n),end:I.unix(r)}),[l,c]=f.exports.useState(10),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState([]),[g,y]=f.exports.useState([]);return f.exports.useEffect((()=>{const e=ms(o),n=I(e.start).unix(),r=I(e.end).unix();Ma({event_id:Number(t),start:n,end:r,limit:l}).then((e=>{let t=[];const n=_.map(e.dat,(e=>{console.log("item",e);const n=_.keys(e);return t=_.union(_.concat(t,n)),e}));h(t),y(n)}))}),[t,JSON.stringify(o),l]),d.createElement(en,{title:"日志详情",width:960,placement:"right",onClose:a,visible:i},d.createElement("div",{style:{marginBottom:10}},d.createElement(zt,null,d.createElement(Ns,{dateFormat:"YYYY-MM-DD HH:mm:ss",value:o,onChange:s}),d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"结果数"),d.createElement(Nt,{value:l,onChange:e=>{c(e)},style:{minWidth:60}},d.createElement(Nt.Option,{value:10},"10"),d.createElement(Nt.Option,{value:20},"20"),d.createElement(Nt.Option,{value:50},"50"),d.createElement(Nt.Option,{value:100},"100"),d.createElement(Nt.Option,{value:500},"500"))),d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"筛选字段"),d.createElement(Nt,{mode:"multiple",value:p,onChange:e=>{m(e)},style:{minWidth:410},maxTagCount:"responsive"},u.map((e=>d.createElement(Nt.Option,{key:e,value:e},e))))))),d.createElement(nte,{data:g,selectedFields:p}))})),Elasticsearch:rre((function(e){const{id:t,start:n,end:r,visible:i,destroy:a}=e,[o,s]=f.exports.useState({start:I.unix(n),end:I.unix(r)}),[l,c]=f.exports.useState(10),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState(),[g,y]=f.exports.useState([]);return f.exports.useEffect((()=>{const e=ms(o),n=I(e.start).unix(),r=I(e.end).unix();Ma({event_id:Number(t),start:n,end:r,limit:l}).then((e=>{let t=[];const n=_.map(e.dat,(e=>{const n=_.keys(e.fields);return t=_.union(_.concat(t,n)),{id:_.uniqueId(),fields:e.fields,json:e._source}}));h(t),y(n)}))}),[t,JSON.stringify(o),l]),d.createElement(en,{title:"日志详情",width:960,placement:"right",onClose:a,visible:i},d.createElement("div",{style:{marginBottom:10}},d.createElement(zt,null,d.createElement(Ns,{dateFormat:"YYYY-MM-DD HH:mm:ss",value:o,onChange:s}),d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"结果数"),d.createElement(Nt,{value:l,onChange:e=>{c(e)},style:{minWidth:60}},d.createElement(Nt.Option,{value:10},"10"),d.createElement(Nt.Option,{value:20},"20"),d.createElement(Nt.Option,{value:50},"50"),d.createElement(Nt.Option,{value:100},"100"),d.createElement(Nt.Option,{value:500},"500"))),d.createElement(wt.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"筛选字段"),d.createElement(Nt,{mode:"multiple",value:p,onChange:e=>{m(e)},style:{minWidth:410},maxTagCount:"responsive"},u.map((e=>d.createElement(Nt.Option,{key:e,value:e},e))))))),d.createElement(Ft,{size:"small",className:"event-logs-table",tableLayout:"fixed",rowKey:"id",columns:_.isEmpty(p)?[{title:"Document",dataIndex:"fields",render:e=>d.createElement("dl",{className:"event-logs-row"},_.map(e,((e,t)=>d.createElement(d.Fragment,{key:t},d.createElement("dt",null,t,":")," ",d.createElement("dd",null,_.join(e,","))))))}]:_.map(p,(e=>({title:e,dataIndex:"fields",render:t=>_.join(t[e],","),sorter:(t,n)=>function(e,t){return e.localeCompare(t)}(_.join(_.get(t,`fields[${e}]`,"")),_.join(_.get(n,`fields[${e}]`,"")))}))),dataSource:g,expandable:{expandedRowRender:e=>{let t="";try{t=JSON.stringify(e.json,null,4)}catch(uu){console.error(uu),t="无法解析"}return d.createElement(Mee,{value:t,height:"auto",theme:"light",basicSetup:!1,editable:!1,extensions:[Gn.fallback,Fee(),sn.lineWrapping,sn.theme({"&":{backgroundColor:"#F6F6F6 !important"},"&.cm-editor.cm-focused":{outline:"unset"}})]})},expandIcon:({expanded:e,onExpand:t,record:n})=>e?d.createElement(N,{onClick:e=>t(n,e)}):d.createElement(L,{onClick:e=>t(n,e)})}}))}))};function are(e){const{eventDetail:t,history:n}=e;return[{label:"PromQL",key:"prom_ql",render:e=>d.createElement(Ot,{className:"promql-row"},d.createElement(At,{span:20},d.createElement(Vc,{value:e,url:"/api/n9e/prometheus",readonly:!0})),d.createElement(At,{span:4},d.createElement(Ct,{className:"run-btn",type:"link",onClick:()=>{n.push({pathname:"/metric/explorer",search:xi.stringify({promql:e,mode:"graph",start:I.unix(t.trigger_time).subtract(30,"minutes").unix(),end:I.unix(t.trigger_time).add(30,"minutes").unix()})})}},d.createElement(Ze,{className:"run-con"}))))}]}const ore={1:"一级告警",2:"二级告警",3:"三级告警"};const{Paragraph:sre}=nn,lre=()=>{const{busiId:e,eventId:t}=pe(),{busiGroups:n}=ci((e=>e.common)),r=k(),i=r.location.pathname.includes("alert-his-events"),[a,o]=f.exports.useState();a&&(a.cate=a.cate||"prometheus");const s=Mu(a),l=[{label:"规则标题",key:"rule_name",render:(e,{rule_id:t})=>d.createElement(B,{to:{pathname:`/alert-rules/edit/${t}`},target:"_blank"},e)},{label:"业务组",key:"group_name",render:(e,{group_id:t})=>d.createElement(Ct,{size:"small",type:"link",className:"rule-link-btn",onClick:()=>{return e=t,void(n.find((t=>t.id===e))?r.push(`/alert-rules?id=${e}`):Et.error("该业务组已删除或无查看权限"));var e}},e)},{label:"规则备注",key:"rule_note"},{label:"所属集群",key:"cluster"},{label:"告警级别",key:"severity",render:e=>d.createElement(Mt,{color:aa[e-1]},"S",e)},{label:"事件状态",key:"is_recovered",render:e=>d.createElement(Mt,{color:e?"green":"red"},e?"Recovered":"Triggered")},{label:"事件标签",key:"tags",render:e=>e?e.map((e=>d.createElement(Mt,{color:"purple",key:e},e))):""},{label:"对象备注",key:"target_note"},{label:"触发时间",key:"trigger_time",render:e=>I(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{label:"触发时值",key:"trigger_value",render:e=>d.createElement("span",null,e,"elasticsearch"===(null==a?void 0:a.cate)&&d.createElement(Ct,{size:"small",style:{marginLeft:16},onClick:()=>{ire.Elasticsearch({id:t,start:a.trigger_time-2*a.prom_eval_interval,end:a.trigger_time+a.prom_eval_interval})}},"日志详情"),"aliyun-sls"===(null==a?void 0:a.cate)&&d.createElement(Ct,{size:"small",style:{marginLeft:16},onClick:()=>{ire.AliyunSLS({id:t,start:a.trigger_time-2*a.prom_eval_interval,end:a.trigger_time+a.prom_eval_interval})}},"日志详情"))},{label:"恢复时间",key:"recover_time",render:e=>I(1e3*(e||0)).format("YYYY-MM-DD HH:mm:ss")},{label:"告警方式",key:"rule_algo",render:e=>e?"智能告警":"阈值告警"},{label:"数据源类型",key:"cate"},..."prometheus"===(null==a?void 0:a.cate)?are({eventDetail:a,history:r}):[!1],..."elasticsearch"===(null==a?void 0:a.cate)?[{label:"数值提取",key:"queries",render:e=>_.map(e,(e=>{var t,n,r;return d.createElement("div",{key:e.ref},d.createElement("span",{className:"pr16"},"名称: ",e.ref),d.createElement("span",{className:"pr16"},"索引: ",e.index),e.query&&d.createElement("span",{className:"pr16"},"查询条件: ",e.query),d.createElement("span",{className:"pr16"},"时间字段: ",e.date_field),d.createElement("span",{className:"pr16"},"间隔: ",e.interval,e.interval_unit),d.createElement("span",{className:"pr16"},"函数: ",null==(t=e.value)?void 0:t.func),"count"!==(null==(n=e.value)?void 0:n.func)&&d.createElement("span",{className:"pr16"},"字段名: ",null==(r=e.value)?void 0:r.field),_.map(e.group_by,(e=>d.createElement("span",{className:"pr16"},"根据 ",e.field," 分组，匹配个数 ",e.size,", 文档最小值 ",e.min_value))))}))},{label:"告警条件",key:"triggers",render:e=>_.map(e,((e,t)=>d.createElement("div",{key:t,style:{backgroundColor:"#fafafa",padding:8}},d.createElement("span",{className:"pr16"},e.exp),d.createElement("span",null,"触发 ",lu[e.severity]))))}]:[!1],..."aliyun-sls"===(null==a?void 0:a.cate)?[{label:"项目",key:"queries",render:e=>_.get(e,"[0].project")},{label:"日志库",key:"queries",render:e=>_.get(e,"[0].logstore")},{label:"查询条件",key:"queries",render:e=>_.get(e,"[0].query")},{label:"告警条件",key:"triggers",render(e){const t=_.get(e,"[0]");return`${null==t?void 0:t.exp} 触发 ${ore[null==t?void 0:t.severity]}`}}]:[!1],{label:"执行频率",key:"prom_eval_interval",render:e=>`${e} 秒`},{label:"持续时长",key:"prom_for_duration",render:e=>`${e} 秒`},{label:"通知媒介",key:"notify_channels",render:e=>e.join(" ")},{label:"告警接收组",key:"notify_groups_obj",render:e=>e?e.map((e=>d.createElement(Mt,{color:"purple"},e.name))):""},{label:"回调地址",key:"callbacks",render:e=>e?e.map((e=>d.createElement(Mt,null,d.createElement(sre,{copyable:!0,style:{margin:0}},e)))):""},{label:"预案链接",key:"runbook_url",render:e=>d.createElement("a",{href:e,target:"_balank"},e)}];return f.exports.useEffect((()=>{(i?function(e,t){return ji(`/api/n9e/alert-his-event/${t}`,{method:Li.Get})}(0,t):function(e,t){return ji(`/api/n9e/alert-cur-event/${t}`,{method:Li.Get})}(0,t)).then((e=>{o(e.dat)}))}),[e,t]),d.createElement(Pa,{title:"告警详情",showBack:!0,backPath:"/alert-his-events",hideCluster:!0},d.createElement("div",{className:"event-detail-container"},d.createElement(Qt,{spinning:!a},d.createElement(Ut,{className:"desc-container",title:"告警事件详情",actions:[d.createElement("div",{className:"action-btns"},d.createElement(zt,null,d.createElement(Ct,{type:"primary",onClick:()=>{r.push("/alert-mutes/add",{group_id:a.group_id,cate:a.cate,cluster:a.cluster,tags:a.tags?a.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}})):[]})}},"屏蔽"),!i&&d.createElement(Ct,{danger:!0,onClick:()=>{a.group_id?qne(a.group_id,[Number(t)],(()=>{r.replace("/alert-cur-events")})):Et.warn("该告警未返回业务组ID")}},"删除")))]},a&&d.createElement("div",null,s.rule_algo||"elasticsearch"===s.cate||"aliyun-sls"===s.cate?d.createElement(nre,{data:s,triggerTime:a.trigger_time,onClick:(e,n)=>{"elasticsearch"===s.cate?ire.Elasticsearch({id:t,start:I(n).unix()-2*a.prom_eval_interval,end:I(n).unix()+a.prom_eval_interval}):"aliyun-sls"===s.cate&&ire.AliyunSLS({id:t,start:I(n).unix()-2*a.prom_eval_interval,end:I(n).unix()+a.prom_eval_interval})}}):null,l.filter((e=>!!e&&(!!s.is_recovered||"recover_time"!==e.key))).map((({label:e,key:t,render:n},r)=>d.createElement("div",{className:"desc-row",key:t+r},d.createElement("div",{className:"desc-label"},e,"："),d.createElement("div",{className:"desc-content"},n?n(s[t],s):s[t])))))))))};function cre({cate:e,onClusterChange:t}){const[n,r]=f.exports.useState([]);return f.exports.useEffect((()=>{"elasticsearch"===e?Vi().then((({dat:e})=>{r(e)})).catch((()=>{r([])})):Gi().then((({dat:e})=>{r(e)})).catch((()=>{r([])}))}),[e]),d.createElement(Nt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:t,placeholder:"集群",style:{minWidth:80,marginLeft:8},dropdownMatchSelectWidth:!1},null==n?void 0:n.map((e=>d.createElement(Nt.Option,{value:e,key:e},e))))}
/**
 * @license MIT
 * doc-path <https://github.com/mrodrig/doc-path>
 * Copyright (c) 2015-present, Michael Rodrigues.
 */function ure(e,t,n){let{dotIndex:r,key:i,remaining:a}=hre(t);if(t.startsWith("__proto__")||t.startsWith("constructor")||t.startsWith("prototype"))return e;if(r>=0){if(!e[i]&&Array.isArray(e))return e.forEach((e=>ure(e,t,n)));e[i]||(e[i]={}),ure(e[i],a,n)}else{if(Array.isArray(e))return e.forEach((e=>ure(e,a,n)));e[i]=n}return e}function hre(e){let t=function(e){for(let t=0;t<e.length;t++){const n=t>0?e[t-1]:"";if("."===e[t]&&"\\"!==n)return t}return-1}(e);return{dotIndex:t,key:e.slice(0,t>=0?t:void 0).replace(/\\./g,"."),remaining:e.slice(t+1)}}var pre={evaluatePath:function e(t,n){if(!t)return null;let{dotIndex:r,key:i,remaining:a}=hre(n);return r>=0&&!t[n]?Array.isArray(t[i])?t[i].map((t=>e(t,a))):e(t[i],a):Array.isArray(t)?t.map((t=>e(t,n))):r>=0&&n!==i&&t[i]?e(t[i],a):-1===r&&t[i]&&!t[n]?t[i]:t[n]},setPath:function(e,t,n){if(!e)throw new Error("No object was provided.");if(!t)throw new Error("No keyPath was provided.");return ure(e,t,n)}};const dre={isNull:function(e){return null===e},isObject:function(e){return"object"==typeof e},unique:function(e){return[...new Set(e)]},flatten:function(e){return[].concat(...e)}};function fre(e,t){return t=xre(t),dre.isObject(e)&&null!==e?gre("",e,t):[]}function mre(e,t){return t=xre(t),e.map((e=>dre.isObject(e)?fre(e,t):[]))}function gre(e,t,n){let r=Object.keys(t).map((r=>{let i=vre(e,yre(r,n));return a=t[r],dre.isObject(a)&&!dre.isNull(a)&&!Array.isArray(a)&&Object.keys(a).length?gre(i,t[r],n):n.expandArrayObjects&&Ere(t[r])?function(e,t,n){let r=mre(e,n);return e.length?e.length&&0===dre.flatten(r).length?[t]:(r=r.map((e=>function(e){return Array.isArray(e)&&!e.length}(e)?[t]:e.map((e=>vre(t,yre(e,n)))))),dre.unique(dre.flatten(r))):n.ignoreEmptyArraysWhenExpanding?[]:[t]}(t[r],i,n):n.ignoreEmptyArrays&&Ere(t[r])&&!t[r].length?[]:i;var a}));return dre.flatten(r)}function yre(e,t){return t.escapeNestedDots?e.replace(/\./g,"\\."):e}function vre(e,t){return e?e+"."+t:t}function Ere(e){return Array.isArray(e)}function xre(e){return s({expandArrayObjects:!1,ignoreEmptyArraysWhenExpanding:!1,escapeNestedDots:!1,ignoreEmptyArrays:!1},e||{})}var bre={errors:{callbackRequired:"A callback is required!",optionsRequired:"Options were not passed and are required.",json2csv:{cannotCallOn:"Cannot call json2csv on ",dataCheckFailure:"Data provided was not an array of documents.",notSameSchema:"Not all documents have the same schema."},csv2json:{cannotCallOn:"Cannot call csv2json on ",dataCheckFailure:"CSV is not a string."}},defaultOptions:{delimiter:{field:",",wrap:'"',eol:"\n"},excelBOM:!1,prependHeader:!0,trimHeaderFields:!1,trimFieldValues:!1,sortHeader:!1,parseCsvNumbers:!1,keys:null,checkSchemaDifferences:!1,expandArrayObjects:!1,unwindArrays:!1,useDateIso8601Format:!1,useLocaleFormat:!1,parseValue:null,wrapBooleans:!1,preventCsvInjection:!1},values:{excelBOM:"\ufeff"}};let Cre=pre,Sre=bre;const wre=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;var Tre={isStringRepresentation:function(e,t){const n=e[0],r=e.length-1,i=e[r];return n===t.delimiter.wrap&&i===t.delimiter.wrap},isDateRepresentation:function(e){return wre.test(e)},computeSchemaDifferences:function(e,t){return Mre(e,t).concat(Mre(t,e))},deepCopy:kre,convert:function(e){let{options:t,callback:n}=function(e,t){if(Ore(e)&&!function(e){return"function"==typeof e}(e))return{options:e,callback:t};return{options:t,callback:e}}(e.callback,e.options);r=t,(r=s(s({},Sre.defaultOptions),r||{})).fieldTitleMap=new Map,r.delimiter.field=r.delimiter.field||Sre.defaultOptions.delimiter.field,r.delimiter.wrap=r.delimiter.wrap||Sre.defaultOptions.delimiter.wrap,r.delimiter.eol=r.delimiter.eol||Sre.defaultOptions.delimiter.eol,t=r;var r;let i=new e.converter(t);(function(e){if(!e.callback)throw new Error(Sre.errors.callbackRequired);if(!e.data)return e.callback(new Error(e.errorMessages.cannotCallOn+e.data+".")),!1;if(!e.dataCheckFn(e.data))return e.callback(new Error(e.errorMessages.dataCheckFailure)),!1;return!0})({data:e.data,callback:n,errorMessages:i.validationMessages,dataCheckFn:i.validationFn})&&i.convert(e.data,n)},isEmptyField:_re,removeEmptyFields:function(e){return e.filter((e=>!_re(e)))},getNCharacters:function(e,t,n){return e.substring(t,t+n)},unwind:function(e,t){const n=[];return e.forEach((e=>{!function(e,t,n){const r=Cre.evaluatePath(t,n);let i=kre(t);Array.isArray(r)&&r.length?r.forEach((r=>{i=kre(t),e.push(Cre.setPath(i,n,r))})):Array.isArray(r)&&0===r.length?(Cre.setPath(i,n,""),e.push(i)):e.push(i)}(n,e,t)})),n},isInvalid:function(e){return e===1/0||e===-1/0},isNumber:function(e){return!isNaN(Number(e))},isString:function(e){return"string"==typeof e},isNull:Are,isError:function(e){return"[object Error]"===Object.prototype.toString.call(e)},isDate:function(e){return e instanceof Date},isUndefined:Ire,isObject:Ore,unique:function(e){return[...new Set(e)]},flatten:function(e){if(e.flat)return e.flat();if(e.length>1e5){let t=[];for(let n=0;n<e.length;n+=1e5)t=t.concat(...e.slice(n,n+1e5));return t}return[].concat(...e)}};function kre(e){return JSON.parse(JSON.stringify(e))}function _re(e){return Ire(e)||Are(e)||""===e}function Ore(e){return"object"==typeof e}function Are(e){return null===e}function Ire(e){return void 0===e}function Mre(e,t){return e.filter((e=>!t.includes(e)))}let Nre=pre,Pre={deepKeys:fre,deepKeysFromList:mre},Fre=bre,Lre=Tre;var Rre={Json2Csv:function(e){const t=new RegExp(e.delimiter.wrap,"g"),n=/\r?\n|\r/,r=e.parseValue&&"function"==typeof e.parseValue?e.parseValue:null,i=e.expandArrayObjects&&!e.unwindArrays,a={expandArrayObjects:i,ignoreEmptyArraysWhenExpanding:i,escapeNestedDots:!0};function o(t){if(e.checkSchemaDifferences)return function(e){let t=e[0],n=e.slice(1);if(function(e,t){return t.reduce(((t,n)=>Lre.computeSchemaDifferences(e,n).length>0?t+1:t),0)}(t,n))return Promise.reject(new Error(Fre.errors.json2csv.notSameSchema));return Promise.resolve(t)}(t);{let e=Lre.unique(Lre.flatten(t));return Promise.resolve(e)}}function s(t){return e.excludeKeys?t.filter((t=>!e.excludeKeys.includes(t))):t}function l(t){return e.sortHeader?"function"==typeof e.sortHeader?t.sort(e.sortHeader):t.sort():t}function c(t){return e.trimHeaderFields&&(t.headerFields=t.headerFields.map((e=>e.split(".").map((e=>e.trim())).join(".")))),t}function u(t){return e.prependHeader&&(t.headerFields=t.headerFields.map((function(e){return v(e)}))),t}function h(t){let n=Object.keys(e.fieldTitleMap);return t.header=t.headerFields.map((function(t){return v(n.includes(t)?e.fieldTitleMap[t]:t)})).join(e.delimiter.field),t}function p(t){return e.keys&&(e.keys=e.keys.map((t=>Lre.isObject(t)&&t.field?(e.fieldTitleMap[t.field]=t.title||t.field,t.field):t))),e.keys&&!e.unwindArrays?Promise.resolve(e.keys).then(s).then(l):function(e){return Promise.resolve(Pre.deepKeysFromList(e,a))}(t).then(o).then(s).then(l)}function d(t,n=!1){if(e.unwindArrays){const r=t.records.length;return t.headerFields.forEach((e=>{t.records=Lre.unwind(t.records,e)})),p(t.records).then((i=>(t.headerFields=i,r!==t.records.length?d(t):n?(e.keys&&(t.headerFields=s(e.keys)),t):d(t,!0))))}return t}function f(t){return t.records=t.records.map((n=>{let i=function(t,n){let r=[];return n.forEach((n=>{let i=Nre.evaluatePath(t,n);!Lre.isUndefined(e.emptyFieldValue)&&Lre.isEmptyField(i)?i=e.emptyFieldValue:e.expandArrayObjects&&Array.isArray(i)&&(i=function(t){let n=Lre.removeEmptyFields(t);if(!t.length||!n.length)return e.emptyFieldValue||"";if(1===n.length)return n[0];return t}(i)),r.push(i)})),r}(n,t.headerFields).map((e=>(e=g(e),e=v(e=y(e=r?r(e,m):m(e))))));return i.join(e.delimiter.field)})).join(e.delimiter.eol),t}function m(t){const n=Lre.isDate(t);return Lre.isNull(t)||Array.isArray(t)||Lre.isObject(t)&&!n?JSON.stringify(t):Lre.isUndefined(t)?"undefined":n&&e.useDateIso8601Format?t.toISOString():e.useLocaleFormat?t.toLocaleString():t.toString()}function g(t){return e.trimFieldValues?Array.isArray(t)?t.map(g):Lre.isString(t)?t.trim():t:t}function y(t){return e.preventCsvInjection?Array.isArray(t)?t.map(y):Lre.isString(t)&&!Lre.isNumber(t)?t.replace(/^[=+\-@\t\r]+/g,""):t:t}function v(r){const i=e.delimiter.wrap;return r.includes(e.delimiter.wrap)&&(r=r.replace(t,i+i)),(r.includes(e.delimiter.field)||r.includes(e.delimiter.wrap)||r.match(n)||e.wrapBooleans&&("true"===r||"false"===r))&&(r=i+r+i),r}function E(t){let n=t.header,r=t.records,i=(e.excelBOM?Fre.values.excelBOM:"")+(e.prependHeader?n+e.delimiter.eol:"")+r;return t.callback(null,i)}return{convert:function(e,t){Lre.isObject(e)&&!e.length&&(e=[e]),p(e).then((n=>({headerFields:n,callback:t,records:e}))).then(d).then(f).then(u).then(c).then(h).then(E).catch(t)},validationFn:Lre.isObject,validationMessages:Fre.errors.json2csv}}};let Dre=pre,Bre=bre,$re=Tre;var zre={Csv2Json:function(e){const t=new RegExp(e.delimiter.wrap+e.delimiter.wrap,"g"),n=new RegExp("^"+Bre.values.excelBOM),r=e.parseValue&&"function"==typeof e.parseValue?e.parseValue:JSON.parse;function i(t){return t=u(t),e.trimHeaderFields?t.split(".").map((e=>e.trim())).join("."):t}function a(t){let n={lines:t},r=n.lines[0];return n.headerFields=r.map(((e,t)=>({value:i(e),index:t}))),e.keys&&(n.headerFields=n.headerFields.filter((t=>e.keys.includes(t.value)))),n}function o(t){return Promise.resolve(function(t){let n,r,i,a,o=[],s=[],l=t.length-1,c=e.delimiter.eol.length,u={insideWrapDelimiter:!1,parsingValue:!0,justParsedDoubleQuote:!1,startIndex:0},h=0;for(;h<t.length;){if(n=t[h],r=h?t[h-1]:"",i=h<l?t[h+1]:"",a=$re.getNCharacters(t,h,c),(a!==e.delimiter.eol||u.insideWrapDelimiter)&&h!==l||r!==e.delimiter.field)if(h===l&&n===e.delimiter.field){let e=t.substring(u.startIndex,h);s.push(e),s.push(""),o.push(s)}else if(h===l||a===e.delimiter.eol&&(!u.insideWrapDelimiter||u.insideWrapDelimiter&&r===e.delimiter.wrap&&!u.justParsedDoubleQuote)){let n=h!==l||r===e.delimiter.wrap?h:void 0;s.push(t.substring(u.startIndex,n)),o.push(s),s=[],u.startIndex=h+c,u.parsingValue=!0,u.insideWrapDelimiter=i===e.delimiter.wrap}else if((r!==e.delimiter.wrap||u.justParsedDoubleQuote&&r===e.delimiter.wrap)&&n===e.delimiter.wrap&&$re.getNCharacters(t,h+1,c)===e.delimiter.eol)u.insideWrapDelimiter=!1,u.parsingValue=!1;else if(n!==e.delimiter.wrap||0!==h&&($re.getNCharacters(t,h-c,c)!==e.delimiter.eol||u.insideWrapDelimiter))if(n===e.delimiter.wrap&&i===e.delimiter.field)s.push(t.substring(u.startIndex,h+1)),u.startIndex=h+2,u.insideWrapDelimiter=!1,u.parsingValue=!1;else if(n!==e.delimiter.wrap||r!==e.delimiter.field||u.insideWrapDelimiter||u.parsingValue)if(n===e.delimiter.wrap&&r===e.delimiter.field&&!u.insideWrapDelimiter&&u.parsingValue)s.push(t.substring(u.startIndex,h-1)),u.insideWrapDelimiter=!0,u.parsingValue=!0,u.startIndex=h;else{if(n===e.delimiter.wrap&&i===e.delimiter.wrap&&h!==u.startIndex){h+=2,u.justParsedDoubleQuote=!0;continue}n===e.delimiter.field&&r!==e.delimiter.wrap&&i!==e.delimiter.wrap&&!u.insideWrapDelimiter&&u.parsingValue?(s.push(t.substring(u.startIndex,h)),u.startIndex=h+1):n!==e.delimiter.field||r!==e.delimiter.wrap||i===e.delimiter.wrap||u.parsingValue||(u.insideWrapDelimiter=!1,u.parsingValue=!0,u.startIndex=h+1)}else u.startIndex=h,u.insideWrapDelimiter=!0,u.parsingValue=!0;else u.insideWrapDelimiter=!0,u.parsingValue=!0,u.startIndex=h;else a===e.delimiter.eol&&u.startIndex===h||n===e.delimiter.field?s.push(""):s.push(t.substr(u.startIndex)),s.push(""),o.push(s),s=[],u.startIndex=h+c,u.parsingValue=!0,u.insideWrapDelimiter=i===e.delimiter.wrap;h++,u.justParsedDoubleQuote=!1}return o}(t))}function s(e){return e.recordLines=e.lines.splice(1),e}function l(t,n){return function(t){let n=function(t){try{if($re.isStringRepresentation(t,e)&&!$re.isDateRepresentation(t))return t;let n=r(t);return Array.isArray(n)?n.map(c):n}catch(n){return n}}(t);$re.isError(n)||$re.isInvalid(n)?"undefined"===t&&(t=void 0):t=n;return t}(t[n.index])}function c(t){return e.trimFieldValues&&!$re.isNull(t)?t.trim():t}function u(t){let n=t[0],r=t.length-1,i=t[r];return n===e.delimiter.wrap&&i===e.delimiter.wrap?t.substr(1,r-1):t}function h(n){return n.json=n.recordLines.reduce(((r,i)=>{i=i.map((n=>n=c(n=function(n){return n.replace(t,e.delimiter.wrap)}(n=u(n)))));let a=function(e,t){return e.reduce(((e,n)=>{let r=l(t,n);try{return Dre.setPath(e,n.value,r)}catch(i){return e}}),{})}(n.headerFields,i);return r.concat(a)}),[]),n}return{convert:function(t,r){var i;(i=t,e.excelBOM?Promise.resolve(i.replace(n,"")):Promise.resolve(i)).then(o).then(a).then(s).then(h).then((e=>r(null,e.json))).catch(r)},validationFn:$re.isString,validationMessages:Bre.errors.csv2json}}};let{Json2Csv:Hre}=Rre,{Csv2Json:jre}=zre,Gre=Tre;var Vre=(e,t,n)=>Yre(Hre,e,t,n);function Yre(e,t,n,r){return Gre.convert({data:t,callback:n,options:r,converter:e})}const Ure=(e,t)=>{(function(e){return ji("/api/n9e/alert-his-events/list",{method:Li.Get,params:e}).then((e=>{var t;return(null==(t=null==e?void 0:e.dat)?void 0:t.list)||[]}))})(e).then((e=>{Vre(e,t)}))},qre=()=>{const{t:e}=Ur(),t=ai(),n=f.exports.useRef({handleReload(){}}),{hisHourRange:r,hisQueryContent:i}=ci((e=>e.event)),[a,o]=f.exports.useState(),[s,l]=f.exports.useState(),[c,u]=f.exports.useState([]),h=f.exports.useRef(!1),[p,m]=f.exports.useState(-1),[g,y]=f.exports.useState(),v=f.exports.useMemo((()=>[{num:6,unit:"hours",description:e("hours")},{num:12,unit:"hours",description:e("hours")},{num:1,unit:"day",description:e("天")},{num:2,unit:"days",description:e("天")},{num:3,unit:"days",description:e("天")},{num:7,unit:"days",description:e("天")},{num:14,unit:"days",description:e("天")},{num:30,unit:"days",description:e("天")},{num:60,unit:"days",description:e("天")},{num:90,unit:"days",description:e("天")}]),[]),E=[{title:e("集群"),dataIndex:"cluster",width:120},{title:e("规则标题&事件标签"),dataIndex:"rule_name",render(e,{id:t,tags:n}){const r=n&&n.map((e=>d.createElement(Mt,{color:"purple",key:e,onClick:t=>{i.includes(e)||(h.current=!0,C("hisQueryContent",i?`${i.trim()} ${e}`:e))}},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement(B,{to:{pathname:`/alert-his-events/${t}`},target:"_blank"},e)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},r)))}},{title:e("计算时间"),dataIndex:"last_eval_time",width:120,render:e=>I(1e3*(e||0)).format("YYYY-MM-DD HH:mm:ss")}],[x,b]=f.exports.useState(!1);function C(e,n){t({type:"event/saveData",prop:e,data:n})}return f.exports.useEffect((()=>{h.current&&(n.current.handleReload(),h.current=!1)}),[i]),f.exports.useEffect((()=>{n.current.handleReload()}),[c,a,r,s,p,g]),d.createElement(Pa,{icon:d.createElement(w,null),title:e("历史告警"),hideCluster:!0},d.createElement("div",{className:"event-content"},d.createElement("div",{className:"table-area"},d.createElement(jne,{ref:n,antProps:{rowKey:"id",rowClassName:(e,t)=>Une[e.is_recovered?3:e.severity-1]+"-left-border"},url:"/api/n9e/alert-his-events/list",customQueryCallback:e=>Object.assign(e,{hours:"hours"!==r.unit?24*r.num:r.num},c.length?{clusters:c.join(",")}:{},void 0!==a?{severity:a}:{},i?{query:i}:{},void 0!==s?{is_recovered:s}:{},{bgid:p},{cate:g}),pageParams:{curPageName:"p",pageSizeName:"limit",pageSize:30,pageSizeOptions:["30","100","200","500"]},apiCallback:({dat:{list:e,total:t}})=>({data:e,total:t}),columns:E,reloadBtnType:"btn",reloadBtnPos:"left",filterType:"flex",leftHeader:d.createElement("div",{className:"table-operate-box"},d.createElement("div",{className:"left"},d.createElement(c_,{showRight:!1,leftList:v,value:r,onChange:e=>{e.num===r.num&&e.unit===r.unit||C("hisHourRange",e)}}),d.createElement(ia,{var:"VITE_IS_ALERT_ES_DS"},d.createElement(Nt,{value:g,onChange:e=>{y(e)},style:{marginLeft:8,width:120},placeholder:"数据源类型",allowClear:!0},d.createElement(Nt.Option,{value:"prometheus"},"Prometheus"),d.createElement(Nt.Option,{value:"elasticsearch"},"Elasticsearch"),d.createElement(Nt.Option,{value:"aliyun-sls"},"阿里云 SLS"))),d.createElement(cre,{cate:g,onClusterChange:e=>u(e)}),d.createElement(sS,{onSeverityChange:e=>o(e),onEventTypeChange:e=>l(e),onBusiGroupChange:e=>m("number"==typeof e?e:-1)}),d.createElement(wt,{className:"search-input",prefix:d.createElement(P,null),placeholder:"模糊搜索规则和标签(多个关键词请用空格分隔)",value:i,onChange:e=>C("hisQueryContent",e.target.value),onPressEnter:e=>n.current.handleReload()}),d.createElement(Ct,{style:{marginLeft:8},loading:x,onClick:()=>{b(!0),Ure(Object.assign({p:1,limit:1e6},{hours:"hours"!==r.unit?24*r.num:r.num},c.length?{clusters:c.join(",")}:{},void 0!==a?{severity:a}:{},i?{query:i}:{},void 0!==s?{is_recovered:s}:{},{bgid:p},{cate:g}),((e,t)=>{e?Et.error("导出失败！"):((e="",t="export.csv")=>{let n=document.body;const r=document.createElement("a");r.href=URL.createObjectURL(new Blob([e],{type:"text/plain"})),r.setAttribute("download",t),n.appendChild(r),r.click(),n.removeChild(r)})(t,`告警事件_${I().format("YYYY-MM-DD_HH-mm-ss")}.csv`),b(!1)}))}},"导出")))}))))};function Wre(e){return Kre(!0,e)}function Xre(e){return Kre(!1,e)}function Kre(e,t){return ji("/api/n9e/targets/tags",{method:e?Li.Post:Li.Delete,data:t})}function Qre(e){return ji("/api/n9e/targets/bgid",{method:Li.Put,data:Object.assign({bgid:0},e)})}function Zre(e){return ji("/api/n9e/targets/note",{method:Li.Put,data:e})}function Jre(e){return ji("/api/n9e/targets",{method:Li.Delete,data:e})}const{confirm:eie}=Tt;var tie,nie;(nie=tie||(tie={})).BindTag="bindTag",nie.UnbindTag="unbindTag",nie.UpdateBusi="updateBusi",nie.RemoveBusi="removeBusi",nie.UpdateNote="updateNote",nie.Delete="delete",nie.None="none";function rie(e){const{t:t,i18n:n}=Ur(),{curBusiId:r,setSelectedIdents:i,selectedRowKeys:a,setSelectedRowKeys:o,refreshFlag:c,setRefreshFlag:u,setOperateType:h}=e,p=f.exports.useRef(!1),[m,g]=f.exports.useState(""),[y,v]=f.exports.useState(""),[E,x]=f.exports.useState([]),b=[{title:"集群",dataIndex:"cluster",width:100,fixed:"left"},{title:d.createElement("span",null,"标识"," ",d.createElement(z,{style:{cursor:"pointer"},onClick:()=>{const e=_.map(C.dataSource,(e=>e.ident)),r=_.join(e,"\n");(function(e){const t=document.createElement("textarea");t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style.left="-9999px";const n=window.pageYOffset||document.documentElement.scrollTop;let r;t.style.top=`${n}px`,t.setAttribute("readonly",""),t.value=e,document.body.appendChild(t),t.select();try{r=document.execCommand("copy")}catch(i){r=!1}return r&&document.body.removeChild(t),r})(r)?"zh"===n.language?Et.success(`复制成功${e.length}条记录`):"en"===n.language&&Et.success(`Successful copy ${e.length} items`):Tt.warning({title:t("host.copy.error"),content:d.createElement(wt.TextArea,{defaultValue:r})})}})),dataIndex:"ident"},{title:"IP地址",dataindex:"ip_address",ellipsis:{showTitle:!1}},{title:"标签",dataIndex:"tags",ellipsis:{showTitle:!1},render(e){const t=e&&e.map((e=>d.createElement(Mt,{color:"purple",key:e,onClick:t=>{y.includes(e)||(p.current=!0,v(y?`${y.trim()} ${e}`:e))}},e)));return e&&d.createElement(yt,{title:t,placement:"topLeft",getPopupContainer:()=>document.body,overlayClassName:"mon-manage-table-tooltip"},t)}},{title:"业务组",dataIndex:"group_obj",render:e=>e?e.name:"未归组"},{title:"状态",width:100,dataIndex:"target_up",sorter:(e,t)=>e.target_up-t.target_up,render:e=>e>0?d.createElement("div",{className:"table-td-fullBG",style:{backgroundColor:"#3FC453"}},"UP"):e<1?d.createElement("div",{className:"table-td-fullBG",style:{backgroundColor:"#FF656B"}},"DOWN"):null},{title:"单核负载",width:100,dataIndex:"load_per_core",sorter:(e,t)=>e.load_per_core-t.load_per_core,render(e){let t="#3FC453";return e>2&&(t="#FF9919"),e>4&&(t="#FF656B"),d.createElement("div",{className:"table-td-fullBG",style:{backgroundColor:t}},_.floor(e,1))}},{title:"内存",width:100,dataIndex:"mem_util",sorter:(e,t)=>e.mem_util-t.mem_util,render(e){let t="#3FC453";return e>70&&(t="#FF9919"),e>85&&(t="#FF656B"),d.createElement("div",{className:"table-td-fullBG",style:{backgroundColor:t}},_.floor(e,1),"%")}},{title:"根分区",width:100,dataIndex:"disk_util",sorter:(e,t)=>e.disk_util-t.disk_util,render(e){if(void 0===e)return"";let t="#3FC453";return e>85&&(t="#FF9919"),e>95&&(t="#FF656B"),d.createElement("div",{className:"table-td-fullBG",style:{backgroundColor:t}},_.floor(e,1),"%")}},{title:"备注",dataIndex:"note",ellipsis:{showTitle:!1},render:e=>d.createElement(yt,{title:e,placement:"topLeft",getPopupContainer:()=>document.body},e)}],{tableProps:C}=Je((({current:e,pageSize:t})=>{const n={query:y,bgid:r,clusters:_.join(E,","),limit:t,p:e};return(i=n,ji("/api/n9e/targets",{method:Li.Get,params:i})).then((e=>({total:e.dat.total,list:e.dat.list})));var i}),{refreshDeps:[JSON.stringify(E),y,r,c],defaultPageSize:30});return d.createElement("div",null,d.createElement("div",{className:"table-operate-box"},d.createElement(zt,null,d.createElement(Ct,{icon:d.createElement($,null),onClick:()=>{u(_.uniqueId("refreshFlag_"))}}),d.createElement(sS,{noLeftPadding:!0,onClusterChange:e=>x(e)}),d.createElement(wt,{className:"search-input",prefix:d.createElement(P,null),placeholder:"模糊搜索表格内容(多个关键词请用空格分隔)",value:m,onChange:e=>g(e.target.value),onPressEnter:()=>{v(m)},onBlur:()=>{v(m)}})),d.createElement(zt,null,d.createElement(kt,{trigger:["click"],overlay:d.createElement(vt,{onClick:({key:e})=>{h(e)}},d.createElement(vt.Item,{key:tie.BindTag},"绑定标签"),d.createElement(vt.Item,{key:tie.UnbindTag},"解绑标签"),d.createElement(vt.Item,{key:tie.UpdateBusi},"修改业务组"),d.createElement(vt.Item,{key:tie.RemoveBusi},"移出业务组"),d.createElement(vt.Item,{key:tie.UpdateNote},"修改备注"),d.createElement(vt.Item,{key:tie.Delete},"批量删除"))},d.createElement(Ct,null,"批量操作 ",d.createElement(N,null))),d.createElement(Ct,{onClick:()=>{const e=JSON.parse(localStorage.getItem("curBusiItem")||"{}");eie({title:`点击确定下载 ${e.name} 的探针`,onOk:()=>{const t=`/target/download/${e.id}`;console.log("download:",t)}})}},"探针下载"))),d.createElement(Ft,l(s({rowKey:"id",columns:b},C),{rowSelection:{type:"checkbox",selectedRowKeys:a,onChange(e,t){o(e),i(t?t.map((({ident:e})=>e)):[])}},pagination:l(s({},C.pagination),{showTotal:e=>`共 ${e} 条`,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:$ne})})))}function iie(e){const{title:t="业务组",renderHeadExtra:n,curBusiId:r,setCurBusiId:i}=e,a=k(),[o,s]=f.exports.useState("1"===localStorage.getItem("leftlist")),[l,c]=f.exports.useState(_.toNumber(localStorage.getItem("leftwidth")||200)),[u,h]=f.exports.useState([]);return f.exports.useEffect((()=>{Ui("").then((e=>{h(e.dat||[])}))}),[]),d.createElement(Ja,{style:{marginRight:o?0:10},size:{width:o?0:l,height:"100%"},enable:{right:!o},onResizeStop:(e,t,n,r)=>{let i=l+r.width;i<200&&(i=200),c(i),localStorage.setItem("leftwidth",i.toString())}},d.createElement("div",{className:o?"left-area collapse":"left-area"},d.createElement("div",{className:"collapse-btn",onClick:()=>{localStorage.setItem("leftlist",o?"0":"1"),s(!o)}},o?d.createElement(L,null):d.createElement(F,null)),d.createElement("div",{className:"left-area-group group-shrink"},n&&n(),d.createElement("div",{className:"left-area-group-title"},t,"业务组"===t&&d.createElement(R,{onClick:()=>a.push("/busi-groups")})),d.createElement(wt,{className:"left-area-group-search",prefix:d.createElement(P,null),onPressEnter:e=>{e.preventDefault();Ui(e.currentTarget.value).then((e=>{h(e.dat||[])}))},placeholder:"请输入业务组名称进行筛选"}),d.createElement("div",{className:"radio-list"},_.map(u,(e=>d.createElement("div",{className:g({"n9e-metric-views-list-content-item":!0,active:e.id==r}),key:e.id,onClick:()=>{e.id!==r&&i&&i(e.id,e)}},d.createElement("span",{className:"name"},e.name))))))))}var aie;!function(e){e.BindTag="bindTag",e.UnbindTag="unbindTag",e.UpdateBusi="updateBusi",e.RemoveBusi="removeBusi",e.UpdateNote="updateNote",e.Delete="delete",e.None="none"}(aie||(aie={}));const{TextArea:oie}=wt,sie=()=>{function e(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function t(t){const{isCorrectFormat:n,isLengthAllowed:r}=e(t.value);return n&&r?d.createElement(Mt,{closable:t.closable,onClose:t.onClose},t.value):d.createElement(yt,{title:n?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Mt,{color:"error",closable:t.closable,onClose:t.onClose,style:{marginTop:"2px"}},t.value))}function n(){return{validator:(t,n)=>n.some((t=>{const{isCorrectFormat:n,isLengthAllowed:r}=e(t);if(!n||!r)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}return{operateTitle:"绑定标签",requestFunc:Wre,isFormItem:!0,render:()=>d.createElement(St.Item,{label:"标签",name:"tags",rules:[{required:!0,message:"请填写至少一项标签！"},n]},d.createElement(Nt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:t}))}},lie=e=>({operateTitle:"解绑标签",requestFunc:Xre,isFormItem:!0,render:()=>d.createElement(St.Item,{label:"标签",name:"tags",rules:[{required:!0,message:"请选择至少一项标签！"}]},d.createElement(Nt,{mode:"multiple",showArrow:!0,placeholder:"请选择要解绑的标签",options:e.map((e=>({label:e,value:e})))}))}),cie=()=>({operateTitle:"移出业务组",requestFunc:Qre,isFormItem:!1,render:()=>d.createElement(Jt,{message:"提示信息：移出所属业务组，该业务组的管理人员将不再有权限操作这些监控对象！您可能需要提前清空这批监控对象的标签和备注信息！",type:"error"})}),uie=()=>({operateTitle:"修改备注",requestFunc:Zre,isFormItem:!0,render:()=>d.createElement(St.Item,{label:"备注信息",name:"note"},d.createElement(wt,{maxLength:64,placeholder:"内容如果为空，表示清空备注信息"}))}),hie=()=>({operateTitle:"批量删除",requestFunc:Jre,isFormItem:!1,render:()=>d.createElement(Jt,{message:"提示信息：该操作会把监控对象从系统内中彻底删除，非常危险，慎重操作！",type:"error"})}),pie=({operateType:e,setOperateType:t,idents:n,reloadList:r})=>{const{busiGroups:i}=ci((e=>e.common)),[a]=St.useForm(),[o,s]=f.exports.useState(!1),[l,c]=f.exports.useState(n),[u,h]=f.exports.useState([]),p=e===aie.UnbindTag?u:i,m={bindTagDetail:sie,unbindTagDetail:lie,updateBusiDetail:e=>({operateTitle:"修改业务组",requestFunc:Qre,isFormItem:!0,render:()=>d.createElement(St.Item,{label:"归属业务组",name:"bgid",rules:[{required:!0,message:"请选择归属业务组！"}]},d.createElement(Nt,{showSearch:!0,style:{width:"100%"},placeholder:"请选择归属业务组",options:x.map((({id:e,name:t})=>({label:t,value:e}))),optionFilterProp:"label",filterOption:!1,onSearch:C,onFocus:()=>{Ui("").then((e=>{b(e.dat||[])}))},onClear:()=>{Ui("").then((e=>{b(e.dat||[])}))}}))}),removeBusiDetail:cie,updateNoteDetail:uie,deleteDetail:hie,noneDetail:()=>({operateTitle:"",requestFunc:()=>Promise.resolve(),isFormItem:!1,render(){}})},{operateTitle:g,requestFunc:y,isFormItem:v,render:E}=m[`${e}Detail`](p),[x,b]=f.exports.useState(i);f.exports.useEffect((()=>{x.length||b(i)}),[i]);const C=f.exports.useCallback(q.exports.debounce((e=>{Ui(e).then((e=>{b(e.dat||[])}))}),800),[]);return f.exports.useEffect((()=>{e!==aie.None&&(c(n),a.setFieldsValue({idents:n.join("\n")}))}),[e,n]),f.exports.useEffect((()=>{var t;e===aie.UnbindTag&&l.length&&(t={idents:l.join(",")},ji("/api/n9e/targets/tags",{method:Li.Get,params:t})).then((({dat:e})=>{const t=a.getFieldValue("tags")||[];a.setFieldsValue({tags:t.filter((t=>e.includes(t)))}),h(e)}))}),[e,l]),d.createElement(Tt,{visible:"none"!==e,title:g,confirmLoading:o,okButtonProps:{danger:e===aie.RemoveBusi||e===aie.Delete},okText:e===aie.RemoveBusi?"移出":e===aie.Delete?"删除":"确定",onOk:function(){a.validateFields().then((e=>{s(!0),e.idents=e.idents.split("\n"),y(e).then((()=>{Et.success(`${g}成功！`),t(aie.None),r(),a.resetFields(),s(!1)})).catch((()=>s(!1)))}))},onCancel:()=>{t(aie.None),a.resetFields()}},d.createElement(St,{form:a,labelCol:{span:4},wrapperCol:{span:20}},d.createElement(St.Item,{label:"监控对象",name:"idents",rules:[{required:!0,message:"请填写监控对象指标"}]},d.createElement(oie,{autoSize:{minRows:3,maxRows:10},placeholder:"请填写监控对象的指标，一行一个",onBlur:function(){const e=a.getFieldValue("idents"),t=e.split(/[ ,\n]+/).filter((e=>e)),n=t.join("\n");e!==n&&a.setFieldsValue({idents:n}),l.sort().join("\n")!==t.sort().join("\n")&&c(t)}})),v&&E()),!v&&E())},die=()=>{const e=ai(),{curBusiItem:t}=ci((e=>e.common)),{t:n}=Ur(),[r,i]=f.exports.useState(aie.None),[a,o]=f.exports.useState((null==t?void 0:t.id)||-1),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState(_.uniqueId("refreshFlag_"));return d.createElement(Pa,{icon:d.createElement(et,null),title:n("对象列表"),hideCluster:!0},d.createElement("div",{className:"object-manage-page-content"},d.createElement(iie,{curBusiId:a,setCurBusiId:(t,n)=>{o(t),e({type:"common/saveData",prop:"curBusiItem",data:n}),localStorage.setItem("curBusiItem",JSON.stringify(n))},renderHeadExtra:()=>d.createElement("div",null,d.createElement("div",{className:"left-area-group-title"},"预留筛选"),d.createElement("div",{className:g({"n9e-metric-views-list-content-item":!0,active:0===a}),onClick:()=>{o(0)}},"未归组对象"),d.createElement("div",{className:g({"n9e-metric-views-list-content-item":!0,active:-1===a}),onClick:()=>{o(-1)}},"全部对象"))}),d.createElement("div",{className:"table-area",style:{height:"100%",overflowY:"auto"}},d.createElement(rie,{curBusiId:a,selectedIdents:c,setSelectedIdents:u,selectedRowKeys:s,setSelectedRowKeys:l,refreshFlag:h,setRefreshFlag:p,setOperateType:i}))),d.createElement(pie,{operateType:r,setOperateType:i,idents:c,reloadList:()=>{p(_.uniqueId("refreshFlag_"))}}))},{Panel:fie}=rn;function mie(){const[e,t]=f.exports.useState({labels:[{label:"",value:"",op:"="}],operations:[]}),[n,r]=f.exports.useState();return d.createElement("div",null,d.createElement(rn,{defaultActiveKey:["1","2"]},d.createElement(fie,{header:"Prom query builder",key:"1"},d.createElement(Ot,{style:{marginBottom:20}},d.createElement(zc,{datasourceValue:"VM1",params:{start:I().subtract(1,"hours").unix(),end:I().unix()},value:e,onChange:e=>{t(e)}}))),d.createElement(fie,{header:"PromQL",key:"2"},d.createElement(jc,{url:"/api/n9e/prometheus",headers:{"X-Cluster":localStorage.getItem("curCluster")||"DEFAULT",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},cluster:localStorage.getItem("curCluster")||"DEFAULT",value:n,onChange:r}))))}function gie(e){return t=>`/api/n9e/busi-group/${t}${e}`}const yie={tasktpls:gie("/task-tpls"),tasktpl:gie("/task-tpl"),tasks:gie("/tasks"),task:gie("/task"),perms:gie("/builtin-perms")};function vie(e){return function(t){const n=document.createElement("div");function r(){Y.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),Y.render(d.createElement(Rt,{locale:"en"===t.language?rs:Wo},d.createElement(e,s({},i))),n),{destroy:r}}}const Eie=St.Item,xie=e=>{const{t:t}=Ur(),[n]=St.useForm(),{visible:r}=e;return d.createElement(Tt,{title:t("tpl.tag.bind.title"),visible:r,onOk:()=>{const{selectedIds:r}=e;n.validateFields().then((n=>{ji(`${yie.tasktpls(e.busiId)}/tags`,{method:"POST",body:JSON.stringify({tags:n.tags,ids:r})}).then((()=>{Et.success(t("tpl.tag.bind.success")),e.onOk(),e.destroy()}))}))},onCancel:()=>{e.destroy()}},d.createElement(St,{form:n},d.createElement(Eie,{label:t("tpl.tag.bind.field"),required:!0,name:"tags",rules:[{required:!0,message:"请选择！"}]},d.createElement(Nt,{mode:"tags",open:!1}))))};xie.defaultProps={visible:!0,onOk:_.noop,destroy:_.noop};var bie=vie(xie);const Cie=St.Item,{Option:Sie}=Nt,wie=e=>{const{t:t}=Ur(),[n]=St.useForm(),{visible:r,uniqueTags:i}=e;return d.createElement(Tt,{title:t("tpl.tag.unbind.title"),visible:r,onOk:()=>{const{selectedIds:r}=e;n.validateFields().then((n=>{ji(`${yie.tasktpl(e.busiId)}s/tags`,{method:"DELETE",body:JSON.stringify({tags:n.tags,ids:r})}).then((()=>{Et.success(t("tpl.tag.unbind.success")),e.onOk(),e.destroy()}))}))},onCancel:()=>{e.destroy()}},d.createElement(St,{form:n},d.createElement(Cie,{label:t("tpl.tag.unbind.field"),required:!0,name:"tags",rules:[{required:!0}]},d.createElement(Nt,{mode:"tags"},_.map(i,(e=>d.createElement(Sie,{key:e,value:e},e)))))))};wie.defaultProps={visible:!0,onOk:_.noop,destroy:_.noop};var Tie=vie(wie);const kie=e=>{const{t:t,i18n:n}=Ur(),r=f.exports.useRef(null),[i,a]=f.exports.useState(""),{curBusiItem:o}=ci((e=>e.common)),c=o.id,[u,h]=f.exports.useState([]),{tableProps:p,refresh:m}=Je((e=>function(e,t,n){return t?ji(`${yie.tasktpls(t)}?limit=${e.pageSize}&p=${e.current}&query=${n}`).then((e=>({list:e.dat.list,total:e.dat.total}))):Promise.resolve({list:[],total:0})}(e,c,i)),{refreshDeps:[c,i]});const g=[{title:"ID",dataIndex:"id"},{title:t("tpl.title"),dataIndex:"title",render:(e,t)=>d.createElement(B,{to:{pathname:`/job-tpls/${t.id}/detail`}},e)},{title:t("tpl.tags"),dataIndex:"tags",render:e=>_.map(e,(e=>d.createElement(Mt,{color:"purple",key:e,onClick:()=>function(e){var t;if(!_.includes(i,e)){const n=i?`${i} ${e}`:e;a(n),null==(t=r.current)||t.setValue(n)}}(e)},e)))},{title:t("tpl.creator"),dataIndex:"create_by",width:100},{title:t("tpl.last_updated"),dataIndex:"update_at",width:160,render:e=>I.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:t("table.operations"),width:220,render:(e,n)=>d.createElement("span",null,d.createElement(B,{to:{pathname:"/job-tpls/add/task",search:`tpl=${n.id}`}},t("task.create")),d.createElement(Pt,{type:"vertical"}),d.createElement(B,{to:{pathname:`/job-tpls/${n.id}/modify`}},t("table.modify")),d.createElement(Pt,{type:"vertical"}),d.createElement(B,{to:{pathname:`/job-tpls/${n.id}/clone`}},t("table.clone")),d.createElement(Pt,{type:"vertical"}),d.createElement(an,{title:d.createElement("div",{style:{width:100}},t("table.delete.sure")),onConfirm:()=>{var e;e=n.id,c&&ji(`${yie.tasktpl(c)}/${e}`,{method:"DELETE"}).then((()=>{Et.success(t("msg.delete.success")),m()}))}},d.createElement("a",{style:{color:"red"}},t("table.delete"))))}];return d.createElement(Pa,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(T,null),t("自愈脚本"))},d.createElement("div",{style:{display:"flex"}},d.createElement(io,null),c?d.createElement("div",{style:{flex:1,padding:20}},d.createElement(Ot,null,d.createElement(At,{span:14,className:"mb10"},d.createElement(wt,{style:{width:200},ref:r,prefix:d.createElement(P,null),defaultValue:i,onPressEnter:e=>{a(e.currentTarget.value)},placeholder:"搜索标题、标签"})),d.createElement(At,{span:10,className:"textAlignRight"},d.createElement(B,{to:{pathname:"/job-tpls/add"}},d.createElement(Ct,{icon:d.createElement(re,null),style:{marginRight:10},type:"primary",ghost:!0},t("tpl.create"))),d.createElement(kt,{overlay:d.createElement(vt,null,d.createElement(vt.Item,null,d.createElement(Ct,{type:"link",disabled:0===u.length,onClick:()=>{_.isEmpty(u)||bie({language:n.language,selectedIds:u,busiId:c,onOk:()=>{m()}})}},t("tpl.tag.bind"))),d.createElement(vt.Item,null,d.createElement(Ct,{type:"link",disabled:0===u.length,onClick:()=>{!function(){if(!_.isEmpty(u)){let e=[];_.each(p.dataSource,(t=>{const n=t.tags;e=_.union(e,n)})),Tie({language:n.language,selectedIds:u,uniqueTags:e,busiId:c,onOk:()=>{m()}})}}()}},t("tpl.tag.unbind"))))},d.createElement(Ct,{icon:d.createElement(N,null)},t("table.batch.operations"))))),d.createElement(Ft,l(s({rowKey:"id",columns:g},p),{rowSelection:{selectedRowKeys:u,onChange:e=>{h(e)}},pagination:l(s({},p.pagination),{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==n.language?`Total ${e} items`:`共 ${e} 条`})}))):d.createElement(ao,{text:"自愈脚本"})))};!function(e,t){ace.define("ace/mode/sh_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,a=t.reservedKeywords="!|{|}|case|do|done|elif|else|esac|fi|for|if|in|then|until|while|&|;|export|local|read|typeset|unset|elif|select|set|function|declare|readonly",o=t.languageConstructs="[|]|alias|bg|bind|break|builtin|cd|command|compgen|complete|continue|dirs|disown|echo|enable|eval|exec|exit|fc|fg|getopts|hash|help|history|jobs|kill|let|logout|popd|printf|pushd|pwd|return|set|shift|shopt|source|suspend|test|times|trap|type|ulimit|umask|unalias|wait",s=function(){var e=this.createKeywordMapper({keyword:a,"support.function.builtin":o,"invalid.deprecated":"debugger"},"identifier");this.$rules={start:[{token:"constant",regex:/\\./},{token:["text","comment"],regex:/(^|\s)(#.*)$/},{token:"string.start",regex:'"',push:[{token:"constant.language.escape",regex:/\\(?:[$`"\\]|$)/},{include:"variables"},{token:"keyword.operator",regex:/`/},{token:"string.end",regex:'"',next:"pop"},{defaultToken:"string"}]},{token:"string",regex:"\\$'",push:[{token:"constant.language.escape",regex:/\\(?:[abeEfnrtv\\'"]|x[a-fA-F\d]{1,2}|u[a-fA-F\d]{4}([a-fA-F\d]{4})?|c.|\d{1,3})/},{token:"string",regex:"'",next:"pop"},{defaultToken:"string"}]},{regex:"<<<",token:"keyword.operator"},{stateName:"heredoc",regex:"(<<-?)(\\s*)(['\"`]?)([\\w\\-]+)(['\"`]?)",onMatch:function(e,t,n){var r="-"==e[2]?"indentedHeredoc":"heredoc",i=e.split(this.splitRegex);return n.push(r,i[4]),[{type:"constant",value:i[1]},{type:"text",value:i[2]},{type:"string",value:i[3]},{type:"support.class",value:i[4]},{type:"string",value:i[5]}]},rules:{heredoc:[{onMatch:function(e,t,n){return e===n[1]?(n.shift(),n.shift(),this.next=n[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^\t+"},{onMatch:function(e,t,n){return e===n[1]?(n.shift(),n.shift(),this.next=n[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(e,t){return"heredoc"===t[0]||"indentedHeredoc"===t[0]?t[0]:e}},{token:["keyword","text","text","text","variable"],regex:/(declare|local|readonly)(\s+)(?:(-[fixar]+)(\s+))?([a-zA-Z_][a-zA-Z0-9_]*\b)/},{token:"variable.language",regex:"(?:\\$(?:SHLVL|\\$|\\!|\\?))"},{token:"variable",regex:"(?:[a-zA-Z_][a-zA-Z0-9_]*(?==))"},{include:"variables"},{token:"support.function",regex:"(?:[a-zA-Z_][a-zA-Z0-9_]*\\s*\\(\\))"},{token:"support.function",regex:"(?:&(?:\\d+))"},{token:"string",start:"'",end:"'"},{token:"constant.numeric",regex:"(?:(?:(?:(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.))|(?:\\d+)))|(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.)))"},{token:"constant.numeric",regex:"(?:(?:[1-9]\\d*)|(?:0))\\b"},{token:e,regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|~|<|>|<=|=>|=|!=|[%&|`]"},{token:"punctuation.operator",regex:";"},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]]"},{token:"paren.rparen",regex:"[\\)\\}]",next:"pop"}],variables:[{token:"variable",regex:/(\$)(\w+)/},{token:["variable","paren.lparen"],regex:/(\$)(\()/,push:"start"},{token:["variable","paren.lparen","keyword.operator","variable","keyword.operator"],regex:/(\$)(\{)([#!]?)(\w+|[*@#?\-$!0_])(:[?+\-=]?|##?|%%?|,,?\/|\^\^?)?/,push:"start"},{token:"variable",regex:/\$[*@#?\-$!0_]/},{token:["variable","paren.lparen"],regex:/(\$)(\{)/,push:"start"}]},this.normalizeRules()};r.inherits(s,i),t.ShHighlightRules=s})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){var r=e("../../lib/oop"),i=e("../../range").Range,a=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(o,a),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var i=this._getFoldWidgetBase(e,t,n);return!i&&this.startRegionRe.test(r)?"start":i},this.getFoldWidgetRange=function(e,t,n,r){var i,a=e.getLine(n);if(this.startRegionRe.test(a))return this.getCommentRegionBlock(e,a,n);if(i=a.match(this.foldingStartMarker)){var o=i.index;if(i[1])return this.openingBracketBlock(e,i[1],n,o);var s=e.getCommentFoldRange(n,o+i[0].length,1);return s&&!s.isMultiLine()&&(r?s=this.getSectionRange(e,n):"all"!=t&&(s=null)),s}if("markbegin"!==t&&(i=a.match(this.foldingStopMarker))){o=i.index+i[0].length;return i[1]?this.closingBracketBlock(e,i[1],n,o):e.getCommentFoldRange(n,o,-1)}},this.getSectionRange=function(e,t){for(var n=e.getLine(t),r=n.search(/\S/),a=t,o=n.length,s=t+=1,l=e.getLength();++t<l;){var c=(n=e.getLine(t)).search(/\S/);if(-1!==c){if(r>c)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=a)break;if(u.isMultiLine())t=u.end.row;else if(r==c)break}s=t}}return new i(a,o,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,n){for(var r=t.search(/\s*$/),a=e.getLength(),o=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<a;){t=e.getLine(n);var c=s.exec(t);if(c&&(c[1]?l--:l++,!l))break}if(n>o)return new i(o,r,n,t.length)}}.call(o.prototype)})),ace.define("ace/mode/sh",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sh_highlight_rules","ace/range","ace/mode/folding/cstyle","ace/mode/behaviour/cstyle"],(function(e,t,n){var r=e("../lib/oop"),i=e("./text").Mode,a=e("./sh_highlight_rules").ShHighlightRules,o=e("../range").Range,s=e("./folding/cstyle").FoldMode,l=e("./behaviour/cstyle").CstyleBehaviour,c=function(){this.HighlightRules=a,this.foldingRules=new s,this.$behaviour=new l};r.inherits(c,i),function(){this.lineCommentStart="#",this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e).tokens;if(i.length&&"comment"==i[i.length-1].type)return r;"start"==e&&(t.match(/^.*[\{\(\[:]\s*$/)&&(r+=n));return r};var e={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(t,n,r){if("\r\n"!==r&&"\r"!==r&&"\n"!==r)return!1;var i=this.getTokenizer().getLineTokens(n.trim(),t).tokens;if(!i)return!1;do{var a=i.pop()}while(a&&("comment"==a.type||"text"==a.type&&a.value.match(/^\s+$/)));return!!a&&("keyword"==a.type&&e[a.value])},this.autoOutdent=function(e,t,n){n+=1;var r=this.$getIndent(t.getLine(n)),i=t.getTabString();r.slice(-i.length)==i&&t.remove(new o(n,r.length-i.length,n,r.length))},this.$id="ace/mode/sh",this.snippetFileId="ace/snippets/sh"}.call(c.prototype),t.Mode=c})),ace.require(["ace/mode/sh"],(function(t){e&&(e.exports=t)}))}({exports:{}});!function(e,t){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/monokai"],(function(t){e&&(e.exports=t)}))}({exports:{}});function _ie(e){return d.createElement(Vn,{placeholder:"Placeholder Text",style:{width:"100%"},height:e.height,mode:"sh",theme:"kuroir",name:"blah2",fontSize:14,showPrintMargin:!1,showGutter:!0,readOnly:e.readOnly,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2},value:e.value,onChange:t=>{e.onChange&&e.onChange(t)}})}!function(e,t){ace.define("ace/theme/kuroir",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!1,t.cssClass="ace-kuroir",t.cssText=".ace-kuroir .ace_gutter {background: #e8e8e8;color: #333;}.ace-kuroir .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-kuroir {background-color: #E8E9E8;color: #363636;}.ace-kuroir .ace_cursor {color: #202020;}.ace-kuroir .ace_marker-layer .ace_selection {background: rgba(245, 170, 0, 0.57);}.ace-kuroir.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #E8E9E8;}.ace-kuroir .ace_marker-layer .ace_step {background: rgb(198, 219, 174);}.ace-kuroir .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(0, 0, 0, 0.29);}.ace-kuroir .ace_marker-layer .ace_active-line {background: rgba(203, 220, 47, 0.22);}.ace-kuroir .ace_gutter-active-line {background-color: rgba(203, 220, 47, 0.22);}.ace-kuroir .ace_marker-layer .ace_selected-word {border: 1px solid rgba(245, 170, 0, 0.57);}.ace-kuroir .ace_invisible {color: #BFBFBF}.ace-kuroir .ace_fold {border-color: #363636;}.ace-kuroir .ace_constant{color:#CD6839;}.ace-kuroir .ace_constant.ace_numeric{color:#9A5925;}.ace-kuroir .ace_support{color:#104E8B;}.ace-kuroir .ace_support.ace_function{color:#005273;}.ace-kuroir .ace_support.ace_constant{color:#CF6A4C;}.ace-kuroir .ace_storage{color:#A52A2A;}.ace-kuroir .ace_invalid.ace_illegal{color:#FD1224;background-color:rgba(255, 6, 0, 0.15);}.ace-kuroir .ace_invalid.ace_deprecated{text-decoration:underline;font-style:italic;color:#FD1732;background-color:#E8E9E8;}.ace-kuroir .ace_string{color:#639300;}.ace-kuroir .ace_string.ace_regexp{color:#417E00;background-color:#C9D4BE;}.ace-kuroir .ace_comment{color:rgba(148, 148, 148, 0.91);background-color:rgba(220, 220, 220, 0.56);}.ace-kuroir .ace_variable{color:#009ACD;}.ace-kuroir .ace_meta.ace_tag{color:#005273;}.ace-kuroir .ace_markup.ace_heading{color:#B8012D;background-color:rgba(191, 97, 51, 0.051);}.ace-kuroir .ace_markup.ace_list{color:#8F5B26;}",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/kuroir"],(function(t){e&&(e.exports=t)}))}({exports:{}}),_ie.defaultProps={readOnly:!1,height:"500px"};const Oie=St.Item,{TextArea:Aie}=wt,Iie=e=>{const{t:t}=Ur(),[n]=St.useForm();f.exports.useEffect((()=>{}));const{initialValues:r,type:i}=e;return d.createElement("div",{className:"job-tpl-form"},d.createElement(St,{onFinish:t=>{e.onSubmit(l(s({},t),{hosts:_.split(t.hosts,"\n")}))},form:n,layout:"vertical"},d.createElement(Oie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Title:"),t("tpl"===i?"tpl.title.tpl.help":"tpl.title.task.help")),name:"title",initialValue:r.title,rules:[{required:!0,message:"必填项！"}]},d.createElement(wt,null)),"tpl"===i?d.createElement(Oie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Tags:"),t("tpl.tags.help")),name:"tags",initialValue:r.tags},d.createElement(Nt,{mode:"tags",open:!1,style:{width:"100%"}})):null,d.createElement(Oie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Account:"),t("tpl.account.help")),name:"account",initialValue:r.account,rules:[{required:!0,message:"必填项！"}]},d.createElement(wt,null)),d.createElement(Oie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Batch:"),t("tpl.batch.help")),name:"batch",initialValue:r.batch,rules:[{required:!0,message:"必填项！"}]},d.createElement(Gt,{min:0})),d.createElement(Oie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Tolerance:"),t("tpl.tolerance.help")),name:"tolerance",initialValue:r.tolerance,rules:[{required:!0,message:"必填项！"}]},d.createElement(Gt,{min:0})),d.createElement(Oie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Timeout:"),t("tpl.timeout.help")),name:"timeout",initialValue:r.timeout},d.createElement(Gt,{min:0})),d.createElement(Oie,{label:d.createElement("span",null,d.createElement("strong",null,"Pause:"),t("tpl.pause.help")),name:"pause",initialValue:r.pause},d.createElement(wt,null)),d.createElement(Oie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Host:"),t("tpl.host.help")),name:"hosts",initialValue:_.join(r.hosts,"\n"),rules:[{required:"tpl"!==i,message:"必填项！"}]},d.createElement(Aie,{autoSize:{minRows:3,maxRows:8}})),d.createElement(Oie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Script:"),t("tpl.script.help")),name:"script",initialValue:r.script,rules:[{required:!0,message:"必填项！"}]},d.createElement(_ie,null)),d.createElement(Oie,{label:d.createElement("span",null,d.createElement("strong",null,"Args:"),t("tpl.args.help")),name:"args",initialValue:r.args},d.createElement(wt,null)),d.createElement(Oie,null,e.footer)))};Iie.defaultProps={type:"tpl",initialValues:{title:"",batch:0,tolerance:0,timeout:30,pause:"",script:"#!/bin/bash\n# e.g.\nexport PATH=/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:~/bin\nss -tln",args:"",tags:void 0,account:"root",hosts:[],treeData:[]},onSubmit:()=>{}};var Mie=tt(Iie);const Nie=e=>{const t=k(),{curBusiItem:n}=ci((e=>e.common)),{t:r}=Ur();return d.createElement(Pa,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(M,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Ut,{title:"创建自愈脚本"},d.createElement(Mie,{onSubmit:t=>{ji(`${yie.tasktpls(n.id)}`,{method:"POST",body:JSON.stringify(t)}).then((()=>{Et.success(r("msg.create.success")),e.history.push({pathname:"/job-tpls"})}))},footer:d.createElement("div",null,d.createElement(Ct,{type:"primary",htmlType:"submit",style:{marginRight:8}},r("form.submit")))}))))},Pie=e=>{const t=k(),n=_.get(e,"match.params.id"),{curBusiItem:r}=ci((e=>e.common)),{t:i}=Ur(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),ji(`${yie.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(Pa,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(M,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Ut,{title:"自愈脚本详情"},d.createElement(Qt,{spinning:a},d.createElement("div",{className:"job-task-table"},d.createElement("div",{className:"ant-table ant-table-default ant-table-bordered"},d.createElement("div",{className:"ant-table-content"},d.createElement("div",{className:"ant-table-body"},d.createElement("table",null,d.createElement("colgroup",null,d.createElement("col",{style:{width:100,minWidth:100}}),d.createElement("col",null)),d.createElement("tbody",{className:"ant-table-tbody"},d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.title")),d.createElement("td",null,c.title)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("tpl.creator")),d.createElement("td",null,c.create_by)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("tpl.last_updated")),d.createElement("td",null,I.unix(c.update_at).format("YYYY-MM-DD HH:mm:ss"))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.control.params")),d.createElement("td",null,i("task.account"),"：",c.account,d.createElement(Pt,{type:"vertical"}),i("task.batch"),"：",c.batch,d.createElement(Pt,{type:"vertical"}),i("task.tolerance"),"：",c.tolerance,d.createElement(Pt,{type:"vertical"}),i("task.timeout"),"：",c.timeout)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,d.createElement("div",{style:{height:"100%"}},i("task.script"))),d.createElement("td",null,d.createElement(_ie,{value:c.script,readOnly:!0,height:"200px"}))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.script.args")),d.createElement("td",null,c.args)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.pause")),d.createElement("td",null,c.pause)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.host.list")),d.createElement("td",null,_.map(c.hosts,(e=>d.createElement("div",{key:e},e))))))))))),d.createElement("div",{style:{marginTop:10}},d.createElement(B,{to:{pathname:`/job-tpls/${n}/modify`}},d.createElement(Ct,{type:"primary",style:{marginRight:10}},i("tpl.modify"))),d.createElement(B,{to:{pathname:"/job-tpls/add/task",search:`tpl=${n}`}},d.createElement(Ct,{type:"primary"},i("tpl.create.task"))))))))},Fie=e=>{const t=k(),n=_.get(e,"match.params.id"),{curBusiItem:r}=ci((e=>e.common)),{t:i}=Ur(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),ji(`${yie.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(Pa,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(M,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Ut,{title:"修改自愈脚本"},d.createElement(Qt,{spinning:a},c.title?d.createElement(Mie,{onSubmit:t=>{ji(`${yie.tasktpl(r.id)}/${n}`,{method:"PUT",body:JSON.stringify(t)}).then((()=>{Et.success(i("msg.modify.success")),e.history.push({pathname:"/job-tpls"})}))},initialValues:c,footer:d.createElement(Ct,{type:"primary",htmlType:"submit"},i("form.submit"))}):null))))},Lie=e=>{const t=k(),n=_.get(e,"match.params.id"),{curBusiItem:r}=ci((e=>e.common)),{t:i}=Ur(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),ji(`${yie.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(Pa,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(M,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Ut,{title:"克隆自愈脚本"},d.createElement(Qt,{spinning:a},c.title?d.createElement(Mie,{onSubmit:t=>{ji(`${yie.tasktpls(r.id)}`,{method:"POST",body:JSON.stringify(t)}).then((()=>{Et.success(i("msg.create.success")),e.history.push({pathname:"/job-tpls"})}))},initialValues:c,footer:d.createElement("div",null,d.createElement(Ct,{type:"primary",htmlType:"submit",style:{marginRight:8}},i("form.submit")))}):null))))};const Rie=e=>{const t=k(),{t:n,i18n:r}=Ur(),[i,a]=f.exports.useState(""),[o,c]=f.exports.useState(!0),[u,h]=f.exports.useState(7),{curBusiItem:p}=ci((e=>e.common)),{tableProps:m}=Je((e=>function(e,t,n,r,i){return t?ji(`${yie.tasks(t)}?limit=${e.pageSize}&p=${e.current}&query=${n}&mine=${r?1:0}&days=${i}`).then((e=>({list:e.dat.list,total:e.dat.total}))):Promise.resolve({list:[],total:0})}(e,p.id,i,o,u)),{refreshDeps:[p.id,i,o,u]}),g=[{title:"ID",dataIndex:"id",width:100},{title:n("task.title"),dataIndex:"title",width:200,render:(e,t)=>d.createElement(B,{to:{pathname:`/job-tasks/${t.id}/result`}},e)},{title:n("table.operations"),width:150,render:(e,t)=>d.createElement("span",null,d.createElement(B,{to:{pathname:"/job-tasks/add",search:`task=${t.id}`}},n("task.clone")),d.createElement(Pt,{type:"vertical"}),d.createElement(B,{to:{pathname:`/job-tasks/${t.id}/detail`}},n("task.meta")))},{title:n("task.creator"),dataIndex:"create_by",width:100},{title:n("task.created"),dataIndex:"create_at",width:160,render:e=>I.unix(e).format("YYYY-MM-DD HH:mm:ss")}];return d.createElement(Pa,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(T,null),n("执行历史"))},d.createElement("div",{style:{display:"flex"}},d.createElement(io,null),p.id?d.createElement("div",{style:{flex:1,padding:10}},d.createElement(Ot,null,d.createElement(At,{span:16,className:"mb10"},d.createElement(wt,{style:{width:200,marginRight:10},prefix:d.createElement(P,null),defaultValue:i,onPressEnter:e=>{a(e.currentTarget.value)},placeholder:"搜索标题"}),d.createElement(Nt,{style:{marginRight:10},value:u,onChange:e=>{h(e)}},d.createElement(Nt.Option,{value:7},n("last.7.days")),d.createElement(Nt.Option,{value:15},n("last.15.days")),d.createElement(Nt.Option,{value:30},n("last.30.days")),d.createElement(Nt.Option,{value:60},n("last.60.days")),d.createElement(Nt.Option,{value:90},n("last.90.days"))),d.createElement(_t,{checked:o,onChange:e=>{c(e.target.checked)}},n("task.only.mine"))),d.createElement(At,{span:8,style:{textAlign:"right"}},d.createElement(Ct,{type:"primary",ghost:!0,onClick:()=>{t.push("/job-tasks/add")}},n("task.temporary.create")))),d.createElement(Ft,l(s({rowKey:"id",columns:g},m),{pagination:l(s({},m.pagination),{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==r.language?`Total ${e} items`:`共 ${e} 条`})}))):d.createElement(ao,{text:n("执行历史")})))},Die=e=>{const t=k(),n=xi.parse(_.get(e,"location.search")),{curBusiItem:r}=ci((e=>e.common)),{t:i}=Ur(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState(),[h,p]=f.exports.useState("");return f.exports.useEffect((()=>{_.isPlainObject(n)&&(void 0!==n.tpl?(o(!0),ji(`${yie.tasktpl(r.id)}/${n.tpl}`,{}).then((e=>{u(l(s({},e.dat.tpl),{hosts:e.dat.hosts}))})).finally((()=>{o(!1)}))):void 0!==n.task&&(o(!0),ji(`${yie.task(r.id)}/${n.task}`,{}).then((e=>{u(l(s({},e.dat.meta),{hosts:_.map(e.dat.hosts,(e=>e.host))}))})).finally((()=>{o(!1)}))))}),[]),d.createElement(Pa,{hideCluster:!0,title:n.tpl?d.createElement(d.Fragment,null,d.createElement(M,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本"):d.createElement(d.Fragment,null,d.createElement(M,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{background:"none"}},d.createElement(Ot,{gutter:20},d.createElement(At,{span:18},d.createElement(Ut,{title:n.tpl?"创建任务":n.task?"克隆任务":"创建临时任务"},d.createElement(Qt,{spinning:a},c||!n.tpl&&!n.task?d.createElement(Mie,{type:"task",initialValues:c,onSubmit:t=>{h&&ji(yie.tasks(r.id),{method:"POST",body:JSON.stringify(l(s({},t),{action:h}))}).then((t=>{Et.success(i("msg.create.success")),e.history.push({pathname:`/job-tasks/${t.dat}/result`})}))},footer:d.createElement("div",null,d.createElement(Ct,{type:"primary",htmlType:"submit",style:{marginRight:10},onClick:()=>{p("pause")}},"保存暂不执行"),d.createElement(Ct,{type:"primary",htmlType:"submit",onClick:()=>{p("start")}},"保存立刻执行"))}):null))),d.createElement(At,{span:6},d.createElement(Jt,{showIcon:!0,message:"提示信息",description:"如果你的角色是管理员，则可以在任意机器执行脚本；否则，只能对有管理权限的业务组下的机器执行脚本",type:"warning"}))))))};const Bie=e=>{const{t:t,i18n:n}=Ur(),r=async(r,i)=>{const{data:a}=e;let o=[];if("all"===i&&(o=_.map(a,(e=>e[r]))),_.isEmpty(o))return void Et.warning(t("host.copy.empty"));const s=_.join(o,"\n");(function(e){const t=document.createElement("textarea");t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style.left="-9999px";const n=window.pageYOffset||document.documentElement.scrollTop;let r;t.style.top=`${n}px`,t.setAttribute("readonly",""),t.value=e,document.body.appendChild(t),t.select();try{r=document.execCommand("copy")}catch(i){r=!1}return r&&document.body.removeChild(t),r})(s)?"zh"===n.language?Et.success(`复制成功${o.length}条记录`):"en"===n.language&&Et.success(`Successful copy ${o.length} items`):Tt.warning({title:t("host.copy.error"),content:d.createElement(wt.TextArea,{defaultValue:s})})},{dataIndex:i}=e;return d.createElement("span",null,"Host",d.createElement(z,{className:"pointer",style:{paddingLeft:5},onClick:()=>r(i,"all")}))};Bie.defaultProps={data:[],selected:[],hasSelected:!0};const $ie=e=>{const t=k(),{curBusiItem:n}=ci((e=>e.common)),{params:r}=e.match,i=r.id,{t:a,i18n:o}=Ur(),[c,u]=f.exports.useState(),[h,p]=f.exports.useState({}),[m,g]=f.exports.useState([]),[y,v]=f.exports.useState(!1),E=()=>(v(!0),ji(`${yie.task(n.id)}/${r.id}`).then((e=>{p(l(s({},e.dat.meta),{action:e.dat.action})),g(e.dat.hosts)})).finally((()=>{v(!1)})));f.exports.useEffect((()=>{E()}),[]);let x=_.cloneDeep(m);c&&(x=_.filter(x,(e=>_.includes(c,e.status))));const b=(e,t)=>{ji(`${yie.task(n.id)}/${i}/host/${e}/action`,{method:"PUT",body:JSON.stringify({action:t})}).then((()=>{E()}))},C=e=>{ji(`${yie.task(n.id)}/${i}/action`,{method:"PUT",body:JSON.stringify({action:e})}).then((()=>{E()}))},S=[{title:d.createElement(Bie,{dataIndex:"host",hasSelected:!1,data:x}),dataIndex:"host"},{title:a("task.status"),dataIndex:"status",filters:(()=>{const e=_.groupBy(m,"status");return _.map(e,((e,t)=>({text:`${t} (${e.length})`,value:t})))})(),onFilter:(e,t)=>t.status===e,render:e=>"success"===e?d.createElement(Mt,{color:"#87d068"},e):"cancelled"===e||"ignored"===e?d.createElement(Mt,{color:"#ec971f"},e):"failed"===e||"killfailed"===e||"timeout"===e?d.createElement(Mt,{color:"#f50"},e):d.createElement(Mt,null,e)},{title:a("task.output"),render:(e,t)=>d.createElement("span",null,d.createElement(B,{to:`/job-task/${n.id}/output/${r.id}/${t.host}/stdout`,target:"_blank"},"stdout"),d.createElement(Pt,{type:"vertical"}),d.createElement("a",{href:`/job-task/${n.id}/output/${r.id}/${t.host}/stderr`,target:"_blank"},"stderr"))}];return h.done||S.push({title:a("table.operations"),render:(e,t)=>d.createElement("span",null,d.createElement("a",{onClick:()=>b(t.host,"ignore")},"ignore"),d.createElement(Pt,{type:"vertical"}),d.createElement("a",{onClick:()=>b(t.host,"redo")},"redo"),d.createElement(Pt,{type:"vertical"}),d.createElement("a",{onClick:()=>b(t.host,"kill")},"kill"))}),d.createElement(Pa,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(M,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10},className:"job-task-result"},d.createElement(Ut,{title:h.title,extra:d.createElement("a",{onClick:()=>{E()}},a("task.refresh"))},d.createElement(Ot,{style:{marginBottom:20}},d.createElement(At,{span:18},d.createElement("div",null,d.createElement("a",{href:`/job-task/${n.id}/output/${i}/stdout`,target:"_blank"},"stdouts"),d.createElement(Pt,{type:"vertical"}),d.createElement("a",{href:`/job-task/${n.id}/output/${i}/stderr`,target:"_blank"},"stderrs"),d.createElement(Pt,{type:"vertical"}),d.createElement(B,{to:{pathname:`/job-tasks/${i}/detail`}},a("task.meta")),d.createElement(Pt,{type:"vertical"}),d.createElement(B,{to:{pathname:"/job-tasks/add",search:`task=${i}`}},a("task.clone")))),d.createElement(At,{span:6,className:"textAlignRight"},h.done?null:d.createElement("span",null,"start"===h.action?d.createElement(Ct,{className:"success-btn",onClick:()=>C("pause")},"Pause"):d.createElement(Ct,{className:"success-btn",onClick:()=>C("start")},"Start"),d.createElement(Ct,{className:"ml10 warning-btn",onClick:()=>C("cancel")},"Cancel"),d.createElement(Ct,{className:"ml10 danger-btn",onClick:()=>C("kill")},"Kill")))),d.createElement(Ft,{rowKey:"host",columns:S,dataSource:m,loading:y,pagination:{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==o.language?`Total ${e} items`:`共 ${e} 条`},onChange:(e,t,n,r)=>{u(t.status)}}))))};const zie=e=>{const t=k(),{curBusiItem:n}=ci((e=>e.common)),{t:r}=Ur(),i=_.get(e,"match.params.id"),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{void 0!==i&&(o(!0),ji(`${yie.task(n.id)}/${i}`).then((e=>{u(l(s({},e.dat.meta),{hosts:_.map(e.dat.hosts,(e=>e.host))}))})).finally((()=>{o(!1)})))}),[i]),d.createElement(Pa,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(M,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10}},d.createElement(Ut,{title:c.title},d.createElement(Qt,{spinning:a},d.createElement("div",{className:"job-task-table"},d.createElement("div",{className:"ant-table ant-table-default ant-table-bordered"},d.createElement("div",{className:"ant-table-content"},d.createElement("div",{className:"ant-table-body"},d.createElement("table",null,d.createElement("colgroup",null,d.createElement("col",{style:{width:100,minWidth:100}}),d.createElement("col",null)),d.createElement("tbody",{className:"ant-table-tbody"},d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.title")),d.createElement("td",null,c.title)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.creator")),d.createElement("td",null,c.creator," @ ",I(c.created).format("YYYY-MM-DD HH:mm:ss"))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.control.params")),d.createElement("td",null,r("task.account"),"：",c.account,d.createElement(Pt,{type:"vertical"}),r("task.batch"),"：",c.batch,d.createElement(Pt,{type:"vertical"}),r("task.tolerance"),"：",c.tolerance,d.createElement(Pt,{type:"vertical"}),r("task.timeout"),"：",c.timeout)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.script")),d.createElement("td",null,d.createElement(_ie,{value:c.script,readOnly:!0,height:"200px"}))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.script.args")),d.createElement("td",null,c.args)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.pause")),d.createElement("td",null,c.pause)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.host.list")),d.createElement("td",null,_.map(c.hosts,(e=>d.createElement("div",{key:e},e))))))))))),d.createElement("div",{style:{marginTop:10}},d.createElement(B,{to:{pathname:"/job-tasks/add",search:`task=${i}`}},d.createElement(Ct,{type:"primary"},r("task.clone.new"))),d.createElement(B,{style:{marginLeft:8},to:{pathname:"/job-tasks"}},d.createElement(Ct,null,"返回")))))))};function Hie(){return f.exports.createElement("svg",{t:1638430671795,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":2334,xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em"},f.exports.createElement("defs",null,f.exports.createElement("style",{type:"text/css"})),f.exports.createElement("path",{d:"M724 839c15.464 0 28 12.536 28 28s-12.536 28-28 28H300c-15.464 0-28-12.536-28-28s12.536-28 28-28h424z m116-709c66.274 0 120 53.726 120 120v402c0 66.274-53.726 120-120 120H184c-66.274 0-120-53.726-120-120V250c0-66.274 53.726-120 120-120h656z m0 56H184c-34.993 0-63.426 28.084-63.991 62.942L120 250v402c0 34.993 28.084 63.426 62.942 63.991L184 716h656c34.993 0 63.426-28.084 63.991-62.942L904 652V250c0-34.993-28.084-63.426-62.942-63.991L840 186zM298 512c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32-17.673 0-32-14.327-32-32 0-17.673 14.327-32 32-32z m433 4c15.464 0 28 12.536 28 28s-12.536 28-28 28H387c-15.464 0-28-12.536-28-28s12.536-28 28-28h344zM298 327c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32-17.673 0-32-14.327-32-32 0-17.673 14.327-32 32-32z m433 4c15.464 0 28 12.536 28 28s-12.536 28-28 28H387c-15.464 0-28-12.536-28-28s12.536-28 28-28h344z","p-id":2335,fill:"currentColor"}))}var jie="5.14.3";function Gie(){const[e,t]=f.exports.useState("");return f.exports.useEffect((()=>{fetch("/api/n9e/version").then((e=>e.text())).then((e=>{t(e)}))}),[]),d.createElement(Pa,{title:d.createElement(d.Fragment,null,d.createElement(Ge,{component:Hie})," 系统版本"),hideCluster:!0},d.createElement("div",null,d.createElement("ul",{style:{padding:"20px 30px"}},d.createElement("li",null,"前端版本：",jie),d.createElement("li",null,"后端版本：",e))))}function Vie(){const[e,t]=f.exports.useState(4701),[n,r]=f.exports.useState(95);return f.exports.useEffect((()=>{fetch("https://api.github.com/repos/ccfos/nightingale").then((e=>{e.json().then((e=>{t(e.stargazers_count)}))})),fetch("https://api.github.com/repos/n9e/fe-v5").then((e=>{e.json().then((e=>{r(e.stargazers_count)}))}))}),[]),d.createElement(Pa,{title:d.createElement(d.Fragment,null,d.createElement(Ge,{component:Hie})," 联系我们"),hideCluster:!0},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{padding:20}},d.createElement("ul",{style:{paddingLeft:10,marginBottom:10}},d.createElement("li",{style:{display:"flex",height:20}},"文档地址：",d.createElement("a",{href:"http://n9e.flashcat.cloud",target:"_blank"},"http://n9e.flashcat.cloud"))),d.createElement("div",{style:{paddingLeft:10,marginBottom:16}},"欢迎大家在github上关注夜莺项目，及时获取项目更新动态，有任何问题，也欢迎提交 issue，当然，如果能直接 PR 就更好了，开源软件，就是需要大家一起参与才能有蓬勃的生命力。"),d.createElement("ul",{style:{paddingLeft:10}},d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"后端代码仓库：",d.createElement("a",{href:"https://github.com/ccfos/nightingale",target:"_blank",style:{marginRight:8}},"https://github.com/ccfos/nightingale"),d.createElement("span",{className:"github-widget"},d.createElement("a",{className:"github-icon",href:"https://github.com/ccfos/nightingale",target:"_blank"},d.createElement(nt,null)," Star"),d.createElement("a",{className:"github-star",href:"https://github.com/ccfos/nightingale/stargazers",target:"_blank"},e))),d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"后端代码仓库：",d.createElement("a",{href:"https://www.gitlink.org.cn/ccfos/nightingale",target:"_blank",style:{marginRight:8}},"https://www.gitlink.org.cn/ccfos/nightingale")),d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"前端代码仓库：",d.createElement("a",{href:"https://github.com/n9e/fe-v5",target:"_blank",style:{marginRight:8}},"https://github.com/n9e/fe-v5"),d.createElement("span",{className:"github-widget"},d.createElement("a",{className:"github-icon",href:"https://github.com/n9e/fe-v5",target:"_blank"},d.createElement(nt,null)," Star"),d.createElement("a",{className:"github-star",href:"https://github.com/n9e/fe-v5/stargazers",target:"_blank"},n)))),d.createElement(on,{style:{border:"1px solid #efefef",height:250},preview:!1,src:"/image/wx_n9e.jpg"}))))}const Yie=function(e,t){return ji(`/api/n9e/busi-group/${e}/dashboards/export`,{method:Li.Post,data:{ids:t}}).then((e=>e.dat))},Uie=function(e,t){return ji(`/api/n9e/dashboard/${e}/migrate`,{method:Li.Put,data:t})},qie="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split("");function Wie(e){if(e)try{return JSON.parse(e)}catch(uu){console.error(uu)}return{}}function Xie(e){let t=_.cloneDeep(e);return dk.valid(t.version)||(t=function(e){var t,n,r,i;let a=_.cloneDeep(e);const o=_.compact([null==a?void 0:a.yplotline1,null==a?void 0:a.yplotline2]),s=["yellow","red"],l=a.link?[a.link]:[];var c;return a={version:"2.0.0",name:a.name,type:"timeseries",layout:a.layout,targets:_.map(a.QL,((e,t)=>({refId:qie[t],expr:null==e?void 0:e.PromQL,legendFormat:null==e?void 0:e.Legend}))),options:{standardOptions:{util:(c=null==(t=null==a?void 0:a.highLevelConfig)?void 0:t.formatUnit,1e3===c?"bytesSI":1024===c?"bytesIEC":"humantime"===c?"humantimeSeconds":void 0)},legend:{displayMode:(null==(n=null==a?void 0:a.highLevelConfig)?void 0:n.legend)?"list":"hidden"},tooltip:{mode:(null==(r=null==a?void 0:a.highLevelConfig)?void 0:r.shared)?"all":"single",sort:null==(i=null==a?void 0:a.highLevelConfig)?void 0:i.sharedSortDirection},thresholds:{style:"line",steps:_.map(o,((e,t)=>({color:s[t],value:e})))}},links:_.map(l,(e=>({title:"链接",url:e}))),custom:S7.timeseries},a}(t)),t}function Kie(e){const t=Wie(e.configs),n=_.sortBy(e.chart_groups,["weight"]),r=[];let i=0,a=0;return _.forEach(n,(e=>{const t=U7();r.push({id:t,type:"row",name:e.name,layout:{h:1,w:24,x:0,y:i,i:t},collapsed:!0}),i+=1,a+=1;const n=e.charts;_.forEach(n,(e=>{const t=U7(),n=Xie(Wie(e.configs)),o=_.floor(150*n.layout.h/40),c=i+n.layout.y;r.push(l(s({},n),{id:t,layout:l(s({},n.layout),{i:t,y:c,h:o})})),a=Math.max(a,c+o)})),i=a})),{name:e.name,tags:_.isArray(e.tags)?_.join(e.tags," "):e.tags,configs:JSON.stringify(l(s({},t),{version:"2.0.0",panels:r}))}}function Qie(){const[e,t]=f.exports.useState([]),[n,r]=f.exports.useState(_.uniqueId("tableKey_")),i=f.exports.useRef({}),[a,o]=f.exports.useState(!1);return f.exports.useEffect((()=>{ji("/api/n9e/dashboards",{method:Li.Get}).then((e=>{t(e.dat)}))}),[]),d.createElement("div",null,d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement(Ct,{type:"primary",onClick:async()=>{_.forEach(e,(e=>{i.current[e.id]="migrating"})),r(_.uniqueId("tableKey_"));try{const t=_.groupBy(e,"group_id");for(const n of _.keys(t)){const a=t[n],s=await Yie(n,_.map(a,"id"));for(const t of s){const n=_.find(_.cloneDeep(e),{name:t.name}),a=_.get(n,"id");await Uie(a,Kie(t)).catch((e=>{throw i.current[a]="failed",r(_.uniqueId("tableKey_")),{id:n,err:e.message}})),i.current[a]="migrated",r(_.uniqueId("tableKey_"))}o(!0)}}catch(t){console.error(t)}},disabled:a},"大盘迁移")),d.createElement(Ft,{key:n,rowKey:"id",pagination:!1,dataSource:e,columns:[{title:"大盘名称",dataIndex:"name",key:"name"},{title:"业务组",dataIndex:"group_id"},{title:"更新时间",dataIndex:"update_at",key:"update_at",render:e=>I.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:"发布人",dataIndex:"update_by",key:"update_by"},{title:"状态",render:e=>i.current[e.id]}]}))}const{TabPane:Zie}=Wt;function Jie(){return d.createElement(Pa,{title:d.createElement(d.Fragment,null,d.createElement(rt,null)," 管理员迁移"),hideCluster:!0},d.createElement("div",null,d.createElement("div",{style:{padding:20}},d.createElement(Wt,{defaultActiveKey:"boards"},d.createElement(Zie,{tab:"大盘迁移",key:"boards"},d.createElement(Qie,null))))))}function eae({id:e,defaultValue:t,clusters:n,onSave:r}){const[i,a]=f.exports.useState(!1),[o,s]=f.exports.useState(t);return d.createElement(Dt,{visible:i,onVisibleChange:e=>{a(e)},destroyTooltipOnHide:!0,content:d.createElement(zt,null,d.createElement(Ht,{style:{minWidth:200},placeholder:"选择集群",options:_.map(n,(e=>({label:e,value:e}))),allowClear:!0,value:o,onChange:e=>{s(e)}}),d.createElement(Ct,{type:"primary",onClick:()=>{(function(e,t){return ji(`/api/n9e/server/${e}`,{method:Li.Put,data:t})})(e,{cluster:o||""}).then((()=>{r(),a(!1)}))}},"保存")),title:"修改集群",trigger:"click"},d.createElement(Ct,{type:"link"},"修改集群"))}function tae(){const{profile:e}=ci((e=>e.account)),[t,n]=f.exports.useState([]),[r,i]=f.exports.useState(!1),[a,o]=f.exports.useState([]),[s]=St.useForm(),[l,c]=f.exports.useState(!1),u=()=>{ji("/api/n9e/servers",{method:Li.Get}).then((e=>{n(e.dat)})).finally((()=>{i(!1)}))};return f.exports.useEffect((()=>{Gi().then((e=>{o(e.dat)})),u()}),[]),d.createElement(Pa,{title:d.createElement(d.Fragment,null,d.createElement(Ge,{component:Hie})," 告警引擎"),hideCluster:!0},d.createElement("div",null,d.createElement("div",{style:{padding:20}},e.admin?d.createElement("div",null,d.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},d.createElement(Ct,{onClick:()=>{c(!0)}},"新增")),d.createElement(Ft,{rowKey:"id",loading:r,dataSource:t,pagination:!1,columns:[{title:"引擎实例",dataIndex:"instance",key:"instance"},{title:"告警集群",dataIndex:"cluster",key:"cluster"},{title:"上次心跳时间",dataIndex:"clock",key:"clock",render:e=>I.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:"操作",width:150,render:e=>d.createElement(zt,null,d.createElement(eae,{id:e.id,defaultValue:e.cluster||void 0,clusters:a,onSave:()=>{u()}}),d.createElement(an,{title:"确认删除？",onConfirm:()=>{var t;(t=[e.id],ji("/api/n9e/servers",{method:Li.Delete,data:{ids:t}})).then((()=>{u()}))}},d.createElement("a",{style:{color:"#f53146"}},"删除")))}]})):d.createElement("div",null,"您没有权限查看"))),d.createElement(Tt,{title:"新增",visible:l,onCancel:()=>{c(!1)},footer:[d.createElement(Ct,{key:"cancel",onClick:()=>{c(!1)}},"取消"),d.createElement(Ct,{key:"ok",type:"primary",onClick:()=>{s.validateFields().then((e=>{(function(e){return ji("/api/n9e/servers",{method:Li.Post,data:e})})(e).then((()=>{c(!1),u()}))}))}},"提交")]},d.createElement(St,{form:s},d.createElement(St.Item,{label:"引擎实例",name:"instance",rules:[{required:!0,message:"请填写引擎实例"}]},d.createElement(wt,null)),d.createElement(St.Item,{label:"告警集群",name:"cluster",rules:[{required:!0,message:"请选择告警集群"}]},d.createElement(Ht,{options:_.map(a,(e=>({label:e,value:e}))),allowClear:!0})))))}const nae={oracle:d.createElement("img",{src:"/logos/oracle_logo.svg",alt:"",className:"prometheus_logo",width:"89",height:"46"}),prometheus:d.createElement("img",{src:"/logos/prometheus_logos.png",alt:"",className:"prometheus_logo",width:"80"}),zabbix:d.createElement("img",{src:"/logos/zabbix_logo.svg",alt:"",className:"prometheus_logo",width:"94"}),mysql:d.createElement("img",{src:"/logos/mysql_logo.svg",alt:"",className:"prometheus_logo",width:"89"}),kafka:d.createElement("img",{src:"/logos/kafka_logo.svg",alt:"",className:"prometheus_logo",width:"37"}),elasticsearch:d.createElement("img",{src:"/logos/elasticSearch.svg",alt:"",className:"prometheus_logo",width:"46"}),"elasticsearch.logging":d.createElement("img",{src:"/logos/elasticSearch.svg",alt:"",className:"prometheus_logo",width:"46"}),"tencent-es.logging":d.createElement("img",{src:"/logos/tencet-es.png",alt:"",className:"prometheus_logo",width:"61"}),"aliyun-es.logging":d.createElement("img",{src:"/logos/aliyun-es.png",alt:"",className:"prometheus_logo",width:"61"}),"aliyun-sls.logging":d.createElement("img",{src:"/logos/aliyun-sls.png",alt:"",className:"prometheus_logo",width:"46"}),"kafka.logging":d.createElement("img",{src:"/logos/kafka_logo--simple.png",alt:"",className:"prometheus_logo",width:"36"}),"zipkin.tracing":d.createElement("img",{src:"/logos/zipkin_logo.png",alt:"",className:"prometheus_logo",width:"39"}),"jaeger.tracing":d.createElement("img",{src:"/logos/jaeger_logo.png",alt:"",className:"prometheus_logo",width:"40"}),"skywalking.tracing":d.createElement("img",{src:"/logos/skywalking_logo.png",alt:"",className:"prometheus_logo",width:"130"}),"standard.change":d.createElement("img",{src:"/logos/custom_logo.svg",alt:"",className:"prometheus_logo",width:"41"}),"standard.alert":d.createElement("img",{src:"/logos/custom_logo.svg",alt:"",className:"prometheus_logo",width:"41"}),"prometheus.alert":d.createElement("img",{src:"/logos/prometheus_logo.svg",alt:"",className:"prometheus_logo",width:"46"}),"zabbix.alert":d.createElement("img",{src:"/logos/zabbix_logo.svg",alt:"",className:"prometheus_logo",width:"94"}),"n9e.alert":d.createElement("img",{src:"/logos/nightingale_logo.svg",alt:"",className:"prometheus_logo",width:"36"}),"open-falcon.alert":d.createElement("img",{src:"/logos/open_falcon_logo.png",alt:"",className:"prometheus_logo",width:"45"}),"tencent-cm.alert":d.createElement("img",{src:"/logos/腾讯云.png",alt:"",className:"prometheus_logo",width:"60"}),"jira.change":d.createElement("img",{src:"/logos/Jira.svg",alt:"",className:"prometheus_logo",width:"120"})};let rae="/api/v1/datasource";const iae=e=>ji(`${rae}/plugin/list`,{method:Li.Post,data:e}).then((e=>e.data.items||e.data)),aae=e=>ji(`${rae}/upsert`,{method:Li.Post,data:e}).then((e=>e.data));function oae(e){const{sourceMap:t,urlPrefix:n="settings"}=e;return d.createElement(Ot,{className:"settings-datasource",gutter:[16,16]},_.map(t,(e=>d.createElement(At,{span:6,key:e.name},d.createElement(B,{to:`/${n}/add/${e.category}/${e.type.includes(".")?_.toLower(e.type).split(".")[0]:_.toLower(e.type)}`},d.createElement("div",{className:"settings-datasource-item"},d.createElement("div",{className:"settings-datasource-item-meta"},d.createElement("div",{style:{height:"45px",lineHeight:"45px"}},"自定义事件"!==e.name&&e.logo),d.createElement("div",{className:"settings-datasource-item-name",style:{height:20,margin:"8px 0"}},e.name)),d.createElement("div",null,d.createElement(Ct,{size:"small",type:"primary",ghost:!0,style:{borderRadius:4}},"添加"))))))))}function sae(e){const{children:t,text:n,values:r,callback:i}=e,[a,o]=f.exports.useState(n),[c,u]=f.exports.useState(!1);return d.createElement("div",{className:"custom-dimension-settings-table-name"},t,d.createElement(Dt,{visible:c,onVisibleChange:e=>{u(e)},content:d.createElement("div",null,d.createElement(wt,{value:a,onChange:e=>o(e.target.value)}),d.createElement(zt,{style:{marginTop:16}},d.createElement(Ct,{type:"primary",onClick:()=>{aae(l(s({},r),{name:a})).then((()=>{Et.success("名称修改成功"),i()})).finally((()=>{u(!1)}))}},"保存"),d.createElement(Ct,{onClick:()=>u(!1)},"取消"))),title:"修改数据源名称",trigger:"click"},d.createElement(De,{onClick:()=>{u(!0)}})))}let lae="/api/v1/datasource";const cae=(e,t)=>{const{logSourceId:n,source:r}=e,[i,a]=f.exports.useState([]),[o,s]=f.exports.useState(!1),[l,c]=f.exports.useState(!1),u=()=>{var e;s(!0),(e=n,ji(`/api/v1/datasource/kafka/offset/lag?id=${e}`,{method:Li.Get})).then((e=>{a(e.data)})).finally((()=>{s(!1),c(!0)}))},h=d.createElement(Ft,{className:"log_popover_table_box",loading:o,rowKey:()=>_.uniqueId("kafkaLag_"),columns:[{title:"GROUP",dataIndex:"group",ellipsis:!0,width:80},{title:"TOPIC",dataIndex:"topic",ellipsis:!0,width:120},{title:"PARTITION",dataIndex:"partition",width:80},{title:"CURRENT_OFFSET",dataIndex:"current_offset",width:125},{title:"LOG_END_OFFSET",dataIndex:"log_end_offset",width:125},{title:"LAG",dataIndex:"lag",ellipsis:!0,width:60},{title:"CLIENT_ID",dataIndex:"client_id",ellipsis:!0}],dataSource:i,pagination:!1,style:{maxWidth:"960px"},size:"small",scroll:{y:240}});return d.createElement(Dt,{placement:"topLeft",content:h,trigger:"click",visible:l,onVisibleChange:e=>{!e&&c(e)}},"TopicManage"!==r?d.createElement(Ct,{type:"link",size:"small",onClick:u,disabled:o},"查看延迟"):d.createElement(yt,{title:"查看消息延迟"},d.createElement(P,{style:{marginRight:"8px"},onClick:u})))},uae=["elasticsearch","tencent-es","aliyun-es"];Sl((()=>d.createElement(it,{style:{cursor:"grab",color:"#999"}})));const hae=$l((e=>d.createElement("tr",s({},e)))),pae=Nl((e=>d.createElement("tbody",s({},e)))),dae=e=>{const{nameClick:t,category:n,pluginList:r,isDrag:i=!1,logName:a,defaultES:o,setDefaultES:u}=e,[h,p]=f.exports.useState([]),[m,g]=f.exports.useState(!1),[y,v]=f.exports.useState(!1),[E,x]=f.exports.useState(0),[b,C]=f.exports.useState({}),[S,w]=f.exports.useState({}),[T,k]=f.exports.useState({current:1,pageSize:10});f.exports.useEffect((()=>{_(a)}),[T,b,S,m]);const _=e=>{var t;v(!0),(t=s(s({p:T.current,limit:T.pageSize,category:n,orderby:"tracing"===n?"updated_at":void 0,name:e||void 0},b),S),ji(`${rae}/list`,{method:Li.Post,data:t}).then((e=>e.data))).then((e=>{(null==o?void 0:o.default_id)&&e.items.forEach((e=>{e.defaultSource=e.id===(null==o?void 0:o.default_id)})),p(e.items||[]),x(e.total)})).finally((()=>{v(!1)}))},O=(e,t)=>{t.stopPropagation(),_(e)},A=[{title:({sortOrder:e,sortColumn:t,filters:n})=>d.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignContent:"center"}},d.createElement(yt,{placement:"top",title:e?"ascend"===e?"点击降序":"取消排序":"点击升序"},d.createElement("div",{style:{lineHeight:"24px",flex:"1"}},"数据源名称")),d.createElement(wt.Search,{size:"small",defaultValue:a,placeholder:"请输入要查询的名称",allowClear:!0,onSearch:O,onClick:e=>e.stopPropagation(),style:{width:170}})),dataIndex:"name",sorter:!0,showSorterTooltip:!1,render:(e,n)=>d.createElement(sae,{values:n,text:e,callback:()=>{g((e=>!e))}},d.createElement("a",{onClick:()=>{t(n)}},d.createElement(d.Fragment,null,e,n.defaultSource&&d.createElement(yt,{placement:"top",title:"该ES集群为日志分析的默认集群"},d.createElement(at,{style:{visibility:"visible"}})))))},{title:"状态",width:300,dataIndex:"status",sorter:!0,filters:[{text:"启用中",value:"enabled"},{text:"停用中",value:"disabled"}],render:e=>"enabled"===e?d.createElement("span",{className:"theme-color"},"启用中"):d.createElement("span",{className:"second-color"},"停用中")},{title:"数据类型",width:300,dataIndex:"plugin_type_name",sorter:!0,filters:null==r?void 0:r.map((e=>({text:e.name,value:e.type})))},{title:"操作",width:300,render:e=>{var t;return d.createElement(zt,null,d.createElement(an,{placement:"topLeft",title:`是否确定${"enabled"===e.status?"停用":"启用"}${e.name}?`,onConfirm:()=>{var t;(t={id:e.id,status:"enabled"===e.status?"disabled":"enabled"},ji(`${rae}/status/update`,{method:Li.Post,data:t}).then((e=>e.data))).then((t=>{Et.success("enabled"===e.status?"停用成功":"启用成功"),g((e=>!e))}))}},d.createElement(Ct,{type:"link",size:"small"},"enabled"===e.status?"停用":"启用")),"disabled"===e.status&&d.createElement(Ct,{type:"link",size:"small",danger:!0,onClick:()=>{Tt.confirm({title:`确定删除${e.name}数据源吗?`,okText:"确认",cancelText:"取消",onOk(){var t;(t=e.id,ji(`${rae}/status/update`,{method:Li.Post,data:{status:"deleted",id:t}}).then((e=>e.data))).then((()=>{Et.success("删除数据源成功"),g((e=>!e))}))}})}},"删除"),"logging"===n&&uae.includes(null==(t=e.plugin_type.split("."))?void 0:t[0])&&d.createElement(d.Fragment,null,d.createElement(an,{placement:"topLeft",title:"是否把该ES集群设置为日志分析的默认集群?",onConfirm:()=>{var t;v(!0),(t={id:e.id},ji("/api/v1/dimensions/theme/datasource/default",{method:Li.Post,data:t}).then((e=>e.data))).then((t=>{"ok"===t&&Et.success("设置默认ES集群成功"),o&&u&&u(l(s({},o),{default_id:e.id})),p((t=>(t.forEach((t=>{t.defaultSource=t.id===e.id})),t))),v(!1)}))},disabled:e.defaultSource},d.createElement(Ct,{type:"link",size:"small",disabled:e.defaultSource},"设为默认"))),"logging"===n&&"kafka"===e.plugin_type_name&&d.createElement(d.Fragment,null,d.createElement(cae,{logSourceId:e.id}),d.createElement(an,{placement:"topLeft",title:"请确认所有使用该数据源的下游均可接收重置, 是否继续重置?",onConfirm:()=>{var t;(t={id:e.id},ji("/api/v1/datasource/kafka/offset/reset",{method:Li.Post,data:t})).then((e=>{Et.success("重置数据源成功")}))},disabled:"enabled"===e.status},d.createElement(yt,{title:"enabled"===e.status?"需先停用数据源, 待后端消费者停掉以后才能执行重置, 且重置后所有使用该数据源的下游都会收到影响":""},d.createElement(Ct,{type:"link",size:"small",disabled:"enabled"===e.status},"重置offset")))))}}],I=({oldIndex:e,newIndex:t})=>{if(e!==t){const n=$s(h.slice(),e,t).filter((e=>!!e));p(n)}},M=d.memo((e=>d.createElement(pae,s({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:I},e)))),N=d.memo((e=>{var t=e,{className:n,style:r}=t,i=c(t,["className","style"]);const a=h.findIndex((e=>e.id===i["data-row-key"]));return d.createElement(hae,s({index:a},i))}));return d.createElement(Ft,{size:"small",className:"datasource-list",rowKey:"id",dataSource:h,columns:A,loading:y,onChange:(e,t,n,{action:r})=>{var i,a;if("paginate"===r&&k({current:e.current,pageSize:e.pageSize}),"filter"===r){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&("plugin_type_name"===n?e.plugin_type=null==(i=t[n])?void 0:i.join():e[n]=null==(a=t[n])?void 0:a.join());C(s({},e))}"sort"===r&&w(n.order?{orderby:"plugin_type_name"===n.field?"plugin_type":n.field,asc:"ascend"===n.order}:{})},components:{body:{wrapper:M,row:N}},pagination:{current:T.current,pageSize:T.pageSize,total:E,pageSizeOptions:["10","20","50"],showTotal:e=>`总共 ${e} 条`}})};function fae(e){const{children:t}=e,[n,r]=f.exports.useState(!1);return d.createElement("div",{className:"code-area"},d.createElement("span",{className:"code-text"},t),d.createElement("span",{className:"copy-btn",onClick:()=>{if(r(!0),f.exports.isValidElement(t)||"string"!=typeof t){if(f.exports.isValidElement(t)&&"string"==typeof t.props.children)Mi(t.props.children,!0);else if(Array.isArray(t)){let e="";t.forEach((t=>{f.exports.isValidElement(t)&&"string"==typeof t.props.children&&(e+=t.props.children+"\n")})),Mi(e,!0)}}else Mi(t,!0)}},n?"复制成功":"复制"))}function mae(e){const{data:t,visible:n,onClose:r,editUrl:i,renderContent:a}=e;return d.createElement(en,{width:584,closeIcon:!1,className:"settings-data-source-detail-drawer",bodyStyle:{padding:"0 15px 15px",background:"#fff"},title:"",placement:"right",onClose:r,visible:n,footer:d.createElement(Ct,{style:{float:"right"}},d.createElement(B,{to:`${i}/${t.plugin_type}/${t.id}`},"编辑"))},d.createElement("div",null,d.createElement("div",{className:"page-title"},"数据源名称"),d.createElement("div",null,t.name),d.createElement("div",{className:"page-title"},"数据源ID"),d.createElement(fae,null,t.id),a(t),t.description&&d.createElement(d.Fragment,null,d.createElement("div",{className:"page-title"},"备注"),d.createElement("div",{className:"flash-cat-block"},t.description))))}function gae(e){const{data:t}=e;return d.createElement("div",null,d.createElement("div",{className:"page-title"},"HTTP"),d.createElement("div",{className:"flash-cat-block"},d.createElement(Ot,{gutter:16},d.createElement(At,{span:24},"URL："),d.createElement(At,{span:24,className:"second-color"},t.settings["prometheus.addr"]))),d.createElement("div",{className:"page-title"},"授权"),d.createElement("div",{className:"flash-cat-block"},d.createElement(Ot,{gutter:16},d.createElement(At,{span:12},"用户名："),d.createElement(At,{span:12},"密码："),d.createElement(At,{span:12,className:"second-color"},t.settings["prometheus.basic"]?t.settings["prometheus.basic"]["prometheus.user"]:"-"),d.createElement(At,{span:12,className:"second-color"},t.settings["prometheus.basic"]?"******":"-"))))}function yae(e){const{visible:t,onClose:n,data:r}=e;return d.createElement(mae,{visible:t,onClose:n,data:r,editUrl:"/help/source/edit/timeseries",renderContent:e=>{switch(e.plugin_type){case"prometheus":return d.createElement(gae,{data:e});default:return d.createElement("div",null,"无效的数据源类型：",e.plugin_type)}}})}function vae(e){const{data:t,visible:n,onClose:r,editUrl:i="/settings/logsource/edit",renderContent:a}=e;return d.createElement(en,{width:584,closeIcon:!1,className:"settings-data-source-detail-drawer",bodyStyle:{padding:"0 15px 15px",background:"#fff"},title:"",placement:"right",onClose:r,visible:n,footer:d.createElement(Ct,{style:{float:"right"}},d.createElement(B,{to:`${i}/${t.plugin_type}/${t.id}`},"编辑"))},d.createElement("div",null,d.createElement("div",{className:"page-title"},"数据源名称"),d.createElement("div",null,t.name),a(t),t.description&&d.createElement(d.Fragment,null,d.createElement("div",{className:"page-title"},"备注"),d.createElement("div",{className:"flash-cat-block"},t.description))))}function Eae(e){var t,n,r,i;const{data:a}=e;return d.createElement("div",null,d.createElement("div",{className:"page-title"},"HTTP"),d.createElement("div",{className:"flash-cat-block"},d.createElement(Ot,{gutter:16},a.settings["es.nodes"].map(((e,t)=>d.createElement(f.exports.Fragment,{key:t},d.createElement(At,{span:4},"URL："),d.createElement(At,{span:20,className:"second-color"},e)))))),d.createElement("div",{className:"page-title"},"授权"),d.createElement("div",{className:"flash-cat-block"},d.createElement(Ot,{gutter:16},d.createElement(At,{span:8},"用户名："),d.createElement(At,{span:8},"密码："),d.createElement(At,{span:8},"跳过TLS检查: "),d.createElement(At,{span:8,className:"second-color"},(null==(t=a.settings["es.basic"])?void 0:t["es.user"])?a.settings["es.basic"]["es.user"]:"-"),d.createElement(At,{span:8,className:"second-color"},(null==(n=a.settings["es.basic"])?void 0:n["es.password"])?"******":"-"),d.createElement(At,{span:8,className:"second-color"},(null==(i=null==(r=a.settings)?void 0:r["es.tls"])?void 0:i["es.tls.skip_tls_verify"])?"是":"否"))),!_.isEmpty(a.settings["es.headers"])&&d.createElement(d.Fragment,null,d.createElement("div",{className:"page-title"},"自定义HTTP标头"),d.createElement("div",{className:"flash-cat-block"},d.createElement(Ot,{gutter:16},Object.keys(a.settings["es.headers"]).map((e=>d.createElement(At,{key:e,span:24},e+" : "+a.settings["es.headers"][e])))))),d.createElement("div",{className:"page-title"},"ES详情"),d.createElement("div",{className:"flash-cat-block"},d.createElement(Ot,{gutter:16},d.createElement(At,{span:8},"版本："),d.createElement(At,{span:8},"最小并发分片请求数："),d.createElement(At,{span:8},"最小时间间隔(s): "),d.createElement(At,{span:8,className:"second-color"},a.settings["es.version"]||"-"),d.createElement(At,{span:8,className:"second-color"},a.settings["es.max_shard"]||"-"),d.createElement(At,{span:8,className:"second-color"},a.settings["es.min_interval"]||"-"),d.createElement(At,{span:24,className:"mt8"},"写配置:"),d.createElement(At,{span:24,className:"second-color"},a.settings["es.enable_write"]?"允许写入":"不允许写入"))))}function xae(e){const{data:t}=e;return d.createElement("div",null,d.createElement("div",{className:"page-title"},"服务入口"),d.createElement("div",{className:"flash-cat-block"},d.createElement(Ot,{gutter:16},d.createElement(At,{span:24},"访问域名（私网域名/公网域名/跨域域名):"),d.createElement(At,{span:24,className:"second-color"},t.settings["sls.endpoint"]))),d.createElement("div",{className:"page-title"},"授权"),d.createElement("div",{className:"flash-cat-block"},d.createElement(Ot,{gutter:16},d.createElement(At,{span:12},"AccessKey ID："),d.createElement(At,{span:12},"AccessKey Secret："),d.createElement(At,{span:12,className:"second-color"},t.settings["sls.access_key_id"]?t.settings["sls.access_key_id"]:"-"),d.createElement(At,{span:12,className:"second-color"},t.settings["sls.access_key_secret"]?t.settings["sls.access_key_secret"]:"-"))))}function bae(e){const{visible:t,onClose:n,data:r}=e;return d.createElement(vae,{visible:t,onClose:n,data:r,editUrl:"/help/source/edit/logging",renderContent:e=>{switch(e.plugin_type){case"elasticsearch":return d.createElement(Eae,{data:e});case"aliyun-sls":return d.createElement(xae,{data:e});default:return d.createElement("div",null,"无效的数据源类型：",e.plugin_type)}}})}function Cae(e){const{data:t,visible:n,onClose:r}=e;return"timeseries"===t.category?d.createElement(yae,{data:t,visible:n,onClose:r}):"logging"===t.category?d.createElement(bae,{data:t,visible:n,onClose:r}):null}function Sae(){const[e,t]=f.exports.useState(),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState();return f.exports.useEffect((()=>{iae({p:1,limit:100}).then((e=>{t(_.map(e,(e=>({name:e.type_name,category:e.category,type:e.type,logo:nae[e.type]}))))}))}),[]),d.createElement(Pa,{title:"数据源管理"},d.createElement("div",{className:"srm"},d.createElement(oae,{sourceMap:e,urlPrefix:"help/source"}),d.createElement("div",{className:"page-title"},"已接入的数据源"),e&&d.createElement(dae,{pluginList:e,nameClick:e=>{r(!0),a(e)}}),n&&d.createElement(Cae,{visible:n,data:i,onClose:()=>{r(!1)}})))}function wae(e){const{crumbs:t}=e;return d.createElement("div",{className:"bread-crumb-container"},t.map((({text:e,link:n,onClick:r},i)=>d.createElement("span",{key:i},n?d.createElement(B,{to:n},e):r?d.createElement("a",{onClick:()=>r()},e):d.createElement("span",{className:"text"},e),i<t.length-1&&d.createElement("span",{className:"text plr3"},"/")))))}function Tae({renderContent:e,backUrl:t="/settings/source/timeseries"}){const n=k(),r=pe(),{action:i}=r,a="edit"===i?r.id:void 0,[o,c]=f.exports.useState("add"===i?r.type:""),[u,h]=f.exports.useState(),[p,m]=f.exports.useState(!1);return f.exports.useEffect((()=>{"edit"===i&&void 0!==a&&(e=>ji(`${rae}/desc`,{method:Li.Post,data:{id:Number(e)}}).then((e=>e.data)))(a).then((e=>{h(e),c(e.plugin_type)}))}),[]),d.createElement(Pa,{title:d.createElement("div",null,o,d.createElement(wae,{crumbs:[{text:"数据源管理",link:t},{text:o}]}))},d.createElement("div",{className:"srm"},"edit"===i&&void 0===u?d.createElement(Qt,{spinning:!0}):e(o,u,(async e=>{if("prometheus"===o){let t=e.settings["prometheus.basic"];!_.isEmpty(t)&&t["prometheus.password"]&&""!==t["prometheus.password"]&&t["prometheus.user"]&&""!==t["prometheus.user"]||(e.settings["prometheus.basic"]=null)}m(!0);let r=null==u?void 0:u.plugin_id;if(!r){const e=await iae({p:1,limit:100,category:"timeseries"});r=_.get(_.find(e,{type:o}),"id")}return aae(l(s({},e),{plugin_id:r,id:null==u?void 0:u.id,is_enable:!u||void 0,is_test:!0})).then((()=>{Et.success("add"===i?"添加成功, 2s 后返回列表":"更新成功, 2s 后返回列表"),setTimeout((()=>{n.push({pathname:t})}),2e3)})).finally((()=>{m(!1)}))}),p)))}const kae=St.Item;function _ae(){return d.createElement("div",null,d.createElement("div",{className:"page-title"},"数据源名称"),d.createElement(kae,{label:"名称",name:"name",rules:[{required:!0},{pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:"请输入字母/数字/下划线，必须以字母开头"},{min:3,message:"最少输入三位"}]},d.createElement(wt,{placeholder:"请输入名称"})))}const Oae=St.Item;function Aae({namePrefix:e,type:t}){const n=["prometheus"],r={prometheus:{addrPlaceholder:"http://localhost:9090",addrLabel:"URL"},zabbix:{addrPlaceholder:"http://127.0.0.1:10051/api_jsonrpc.php",addrLabel:"URL(支持4.4及以上版本)"},es:{addrPlaceholder:"http://localhost:9200",addrLabel:"URL"}};return d.createElement("div",null,d.createElement("div",{className:"page-title"},"HTTP"),d.createElement(Oae,{label:r[t].addrLabel,name:[...e,`${t}.addr`],rules:[{required:!0}],style:{marginBottom:n.includes(t)?"0":"18px"}},d.createElement(wt,{placeholder:r[t].addrPlaceholder})),n.includes(t)&&d.createElement(d.Fragment,null,d.createElement("div",{className:"second-color",style:{paddingLeft:"12px",margin:"0 0 18px"}},d.createElement("div",null,"常见时序数据库配置示例（兼容 Prometheus 查询 API）："),d.createElement("div",null,"1. Prometheus:  http://localhost:9090/"),d.createElement("div",null,"2. Thanos:  http://localhost:19192/"),d.createElement("div",null,"3. VictoriaMetrics:  http://{vmselect}:8481/select/0/prometheus/"),d.createElement("div",null,"4. M3:  http://localhost:7201/"),d.createElement("div",null,"5. SLS:  https://{project}.{sls-enpoint}/prometheus/{project}/{metricstore}/"))),d.createElement(Oae,{label:"超时(单位:ms)",name:[...e,`${t}.timeout`],rules:[{type:"number",min:0}]},d.createElement(Gt,{placeholder:"请输入超时时间",style:{width:"100%"},controls:!1})))}function Iae(e){const{layout:t="horizontal",labelSize:n="default",forceBorder:r=!1,label:i,name:a,valuePropName:o,tooltip:s,rules:l,children:c}=e;return d.createElement("div",{className:g({"settings-source-form-item":!0,"settings-source-form-item-small":"small"===n,"settings-source-form-item-force-border":r}),style:{display:"horizontal"===t?"block":"inline-block"}},d.createElement(St.Item,{label:i,name:a,rules:l,tooltip:s,valuePropName:o},c))}function Mae({namePrefix:e,type:t}){const n=["zabbix"];return d.createElement(St.Item,{noStyle:!0,shouldUpdate:(e,t)=>{var n,r;return(null==(n=e.basic)?void 0:n.enabled)!==(null==(r=t.basic)?void 0:r.enabled)}},(({getFieldValue:r})=>d.createElement("div",null,d.createElement("div",{className:"page-title"},"授权"),d.createElement(Ot,{gutter:16},d.createElement(At,{flex:"1"},d.createElement(St.Item,{label:"用户名",name:[...e,`${t}.user`],rules:[{required:n.includes(t)}]},d.createElement(wt,{placeholder:"请输入用户名",autoComplete:"off"}))),d.createElement(At,{flex:"1"},d.createElement(St.Item,{label:"密码",name:[...e,`${t}.password`],rules:[{required:n.includes(t)}]},d.createElement(wt.Password,{placeholder:"请输入密码",autoComplete:"new-password"}))),d.createElement(At,null,d.createElement("div",{style:{width:"30px"}}))),"es"===t&&d.createElement(d.Fragment,null,d.createElement("span",{className:"mr16"},"跳过TLS检查"),d.createElement(Iae,{layout:"inline",name:["settings","es.tls","es.tls.skip_tls_verify"],valuePropName:"checked",rules:[{required:n.includes(t)}]},d.createElement(Lt,null))))))}function Nae(e){const t=k();return d.createElement("div",{className:"settings-source-form-footer"},d.createElement(zt,null,void 0!==e.id?d.createElement(Ct,{onClick:()=>{t.go(-1)}},"返回"):null,d.createElement(Ct,{type:"primary",htmlType:"submit",loading:e.submitLoading},"测试并保存")))}const Pae=St.Item;function Fae(){return d.createElement("div",null,d.createElement("div",{className:"page-title",style:{marginTop:"8px"}},"备注"),d.createElement(Pae,{name:"description",rules:[]},d.createElement(wt.TextArea,{placeholder:"请输入相关说明",rows:4,showCount:!0,maxLength:500})))}function Lae(e){var t;const[n]=St.useForm(),r=["settings"];return d.createElement(St,{form:n,layout:"vertical",onFinish:e.onFinish,initialValues:_.merge(e.initialValues),className:"settings-source-form"},d.createElement(_ae,null),d.createElement(Aae,{namePrefix:r,type:"prometheus"}),d.createElement(Mae,{namePrefix:[...r,"prometheus.basic"],type:"prometheus"}),d.createElement(Fae,null),d.createElement("div",{className:"mt16"},d.createElement(Nae,{id:null==(t=e.initialValues)?void 0:t.id,submitLoading:e.submitLoading})))}function Rae(){return d.createElement(Tae,{backUrl:"/help/source",renderContent:(e,t,n,r)=>{switch(e){case"prometheus":return d.createElement(Lae,{initialValues:t,onFinish:n,submitLoading:r});default:return d.createElement("div",null,"无效的数据源类型：",e)}}})}const Dae=["elasticsearch","tencent-es","aliyun-es"];function Bae({renderContent:e,backUrl:t="/settings/source/log"}){const n=k(),{action:r,type:i,cate:a,id:o}=pe(),[c,u]=f.exports.useState(),[h,p]=f.exports.useState(!1);return f.exports.useEffect((()=>{void 0!==o&&(e=>ji(`${lae}/desc`,{method:Li.Post,data:{id:Number(e)}}).then((e=>e.data)))(o).then((e=>{u(e)}))}),[]),d.createElement(Pa,{title:d.createElement("div",null,i,d.createElement(wae,{crumbs:[{text:"数据源管理",link:t},{text:i}]}))},d.createElement("div",{className:"srm"},"edit"===r&&void 0===c?d.createElement(Qt,{spinning:!0}):e(i,c,(async e=>{var o;if(Dae.includes(i)){let t={};null==(o=e.settings["es.headers"])||o.forEach((e=>{e.key&&(t[e.key]=e.value)})),e.settings["es.basic"]["es.auth.enable"]=!(!e.settings["es.basic"]["es.user"]||!e.settings["es.basic"]["es.password"]),e.settings["es.headers"]=t}p(!0);let u=null==c?void 0:c.plugin_id;if(!u){const e=await((e="timeseries")=>ji(`${lae}/plugin/list`,{method:Li.Post,data:{p:1,limit:100,category:e}}).then((e=>e.data.items||e.data)))("logging");u=_.get(_.find(e,{type:`${i}.${a}`}),"id")}return(h=l(s({},e),{plugin_id:u,id:null==c?void 0:c.id,is_enable:!c||void 0}),ji(`${lae}/upsert`,{method:Li.Post,data:h}).then((e=>e.data))).then((()=>{Et.success("add"===r?"添加成功, 2s 后返回列表":"更新成功, 2s 后返回列表"),setTimeout((()=>{n.push({pathname:t})}),2e3)})).finally((()=>{p(!1)}));var h}),h)))}function $ae({namePrefix:e,type:t}){return d.createElement("div",null,d.createElement(St.List,{name:[...e,`${t}.headers`],initialValue:[{header:"",value:""}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement("div",{className:"page-title",style:{marginTop:"8px"}},"自定义HTTP标头 ",d.createElement(Z,{style:{marginLeft:"16px",cursor:"pointer",fontSize:"14px"},onClick:()=>t()})),e.map((({key:e,name:t})=>d.createElement(Ot,{gutter:16,align:"middle",key:e},d.createElement(At,{flex:1},d.createElement(St.Item,{label:"Header",name:[t,"key"]},d.createElement(wt,{placeholder:"X-Custom-Header"}))),d.createElement(At,{flex:1},d.createElement(St.Item,{label:"Value",name:[t,"value"]},d.createElement(wt,{placeholder:"Header Value"}))),d.createElement(At,null,d.createElement(ie,{style:{cursor:"pointer",fontSize:"14px",margin:"8px 16px 0 0"},onClick:()=>n(t)})))))))))}const zae=[{lebel:"6.0+",value:"6.0+"},{lebel:"7.0+",value:"7.0+"}];function Hae({namePrefix:e,type:t,max_shard:n}){const[r,i]=f.exports.useState(!0);return d.createElement("div",{style:{marginBottom:"24px"}},d.createElement("div",{className:"page-title",style:{marginTop:"8px"}},"ES详情"),d.createElement(St.Item,{label:"版本",name:[...e,"es.version"],rules:[],initialValue:"7.0+"},d.createElement(Nt,{options:zae,placeholder:"请选择版本",onChange:e=>{i(!["2.x","5.x"].includes(e))}})),r&&d.createElement(St.Item,{label:"最大并发分片请求数",name:[...e,"es.max_shard"],rules:[{type:"number",min:0}],initialValue:5},d.createElement(Gt,{placeholder:"请输入最大并发分片请求数",style:{width:"100%"},controls:!1})),d.createElement(St.Item,{label:d.createElement(d.Fragment,null,d.createElement("span",null,"最小时间间隔(s)"),d.createElement(yt,{title:"按时间间隔自动分组的下限。建议设置为写入频率，例如，如果数据每分钟写入一次，则为1m。"},d.createElement(D,{className:"ml8"}))),name:[...e,"es.min_interval"],rules:[{type:"number",min:0}],initialValue:10},d.createElement(Gt,{placeholder:"请输入最小时间间隔",style:{width:"100%"},controls:!1})))}function jae(){return d.createElement("div",null,d.createElement("div",{className:"page-title"},"写配置"),d.createElement(d.Fragment,null,d.createElement("span",{className:"mr16"},"允许写入"),d.createElement(Iae,{layout:"inline",name:["settings","es.enable_write"],valuePropName:"checked",rules:[]},d.createElement(Lt,null))))}const Gae=St.Item;function Vae({namePrefix:e,type:t}){const n={prometheus:{addrPlaceholder:"http://localhost:9090",addrLabel:"URL"},zabbix:{addrPlaceholder:"http://127.0.0.1:10051/api_jsonrpc.php",addrLabel:"URL(支持4.4及以上版本)"},es:{addrPlaceholder:"http://localhost:9200",addrLabel:"URL"}};return d.createElement("div",null,d.createElement(St.List,{name:[...e,`${t}.nodes`],initialValue:[""]},((e,{add:r,remove:i},{errors:a})=>d.createElement(d.Fragment,null,d.createElement("div",{className:"page-title",style:{marginTop:"8px"}},"HTTP",d.createElement(Z,{style:{marginLeft:"16px",cursor:"pointer",fontSize:"14px"},onClick:()=>r()})),e.map(((r,a)=>d.createElement(Gae,{key:r.key,label:0===a?d.createElement(d.Fragment,null,d.createElement("span",null,"URL")):null},d.createElement(Ot,{gutter:16,align:"middle"},d.createElement(At,{flex:1},d.createElement(Gae,{name:[r.name],rules:[{required:!0,message:"请输入URL"}],noStyle:!0},d.createElement(wt,{placeholder:n[t].addrPlaceholder}))),e.length>1?d.createElement(At,null,d.createElement(ie,{style:{cursor:"pointer",fontSize:"14px",margin:"8px 16px 0 0"},onClick:()=>i(r.name)})):null))))))),d.createElement(Gae,{label:"超时(单位:ms)",name:[...e,`${t}.timeout`],rules:[{type:"number",min:0}]},d.createElement(Gt,{placeholder:"请输入超时时间",style:{width:"100%"},controls:!1})))}function Yae(e){var t;const{initialValues:n,onFinish:r,submitLoading:i}=e,[a]=St.useForm(),o=["settings"];return f.exports.useEffect((()=>{(null==n?void 0:n.settings)&&a.setFieldsValue((e=>{const t=_.cloneDeep(e);if(_.isEmpty(t.settings["es.headers"]))t.settings["es.headers"]=[];else{let e=_.keys(t.settings["es.headers"]).map((e=>({key:e,value:t.settings["es.headers"].el})));t.settings["es.headers"]=e}return t})(n))}),[n]),d.createElement(St,{form:a,layout:"vertical",onFinish:r,className:"settings-source-form"},d.createElement(_ae,null),d.createElement(Vae,{namePrefix:o,type:"es"}),d.createElement(Mae,{namePrefix:[...o,"es.basic"],type:"es"}),d.createElement($ae,{namePrefix:o,type:"es"}),d.createElement(Hae,{namePrefix:o,type:"es",max_shard:null==(t=null==n?void 0:n.settings)?void 0:t["es.max_shard"]}),d.createElement(jae,null),d.createElement(Fae,null),d.createElement("div",{className:"mt16"},d.createElement(Nae,{id:null==n?void 0:n.id,submitLoading:i})))}function Uae({namePrefix:e,type:t}){return d.createElement(d.Fragment,null,d.createElement("div",{className:"page-title"},"授权"),d.createElement(Ot,{gutter:16},d.createElement(At,{flex:"1"},d.createElement(St.Item,{label:"AccessKey ID",name:[...e,`${t}.access_key_id`],rules:[{required:!0}]},d.createElement(wt,{placeholder:"请输入AccessKey ID"}))),d.createElement(At,{flex:"1"},d.createElement(St.Item,{label:"AccessKey Secret",name:[...e,`${t}.access_key_secret`],rules:[{required:!0}]},d.createElement(wt,{placeholder:"请输入AccessKey Secret"}))),d.createElement(At,null,d.createElement("div",{style:{width:"30px"}}))))}const qae=St.Item;function Wae({namePrefix:e,type:t}){return d.createElement("div",null,d.createElement("div",{className:"page-title"},"服务入口"),d.createElement(qae,{label:"访问域名（私网域名/公网域名/跨域域名）",name:[...e,`${t}.endpoint`],rules:[{required:!0,message:"请输入访问域名"}]},d.createElement(wt,{placeholder:"请输入访问域名"})))}function Xae(e){const{initialValues:t,onFinish:n,submitLoading:r}=e,[i]=St.useForm(),a=["settings"];return f.exports.useEffect((()=>{(null==t?void 0:t.settings)&&i.setFieldsValue(t)}),[t]),d.createElement(St,{form:i,layout:"vertical",onFinish:n,className:"settings-source-form"},d.createElement(_ae,null),d.createElement(Wae,{namePrefix:a,type:"sls"}),d.createElement(Uae,{namePrefix:a,type:"sls"}),d.createElement(Fae,null),d.createElement("div",{className:"mt16"},d.createElement(Nae,{id:null==t?void 0:t.id,submitLoading:r})))}function Kae(){return d.createElement(Bae,{backUrl:"/help/source",renderContent:(e,t,n,r)=>{switch(e){case"elasticsearch":return d.createElement(Yae,{initialValues:t,onFinish:n,submitLoading:r});case"aliyun-sls":return d.createElement(Xae,{initialValues:t,onFinish:n,submitLoading:r});default:return d.createElement("div",null,"无效的数据源类型：",e)}}})}function Qae(){const e=pe();return"timeseries"===e.cate?d.createElement(Rae,null):"logging"===e.cate?d.createElement(Kae,null):null}const Zae=function(e,t,n){return ji(`/api/n9e/busi-group/${t}/recording-rules`,{method:n,data:e})},Jae=function(e,t){return ji(`/api/n9e/busi-group/${t}/recording-rules`,{method:Li.Delete,data:{ids:e}})},eoe=function(e,t){return ji(`/api/n9e/busi-group/${t}/recording-rules/fields`,{method:Li.Put,data:e})},{Option:toe}=Nt,noe={labelCol:{span:3},wrapperCol:{span:20}},roe=[{id:2,field:"cluster",name:"集群"},{id:5,field:"prom_eval_interval",name:"执行频率"},{id:4,field:"disabled",name:"启用"},{id:12,field:"append_tags",name:"附加标签"}];function ioe(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function aoe(e){const{isCorrectFormat:t,isLengthAllowed:n}=ioe(e.value);return t&&n?d.createElement(Mt,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(yt,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Mt,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function ooe(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=ioe(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const soe=({isModalVisible:e,editModalFinish:t})=>{const{t:n}=Ur(),[r]=St.useForm(),{clusters:i}=ci((e=>e.common)),[a,o]=f.exports.useState("cluster"),[c,u]=f.exports.useState(!0),h=e=>{e.includes("$all")&&r.setFieldsValue({cluster:["$all"]})};return d.createElement(d.Fragment,null,d.createElement(Tt,{title:n("批量更新"),visible:e,onOk:()=>{r.validateFields().then((async e=>{const n=s({},e);delete n.field,"disabled"===e.field&&(n.disabled=e.enable_status?0:1,delete n.enable_status),"cluster"===e.field&&(n.cluster=e.cluster.join(" ")),Object.keys(n).forEach((e=>{void 0===n[e]&&(n[e]=""),Array.isArray(n[e])&&(n[e]=n[e].join(" "))})),t(!0,n)}))},onCancel:()=>{t(!1)}},d.createElement(St,l(s({},noe),{form:r,className:"strategy-form",layout:"horizontal",initialValues:{prom_eval_interval:15,cluster:i||["Default"],field:"cluster",enable_status:!0}}),d.createElement(St.Item,{label:n("字段："),name:"field",rules:[{required:!1}]},d.createElement(Nt,{style:{width:"100%"},onChange:e=>{o(e)}},roe.map((e=>d.createElement(toe,{key:e.id,value:e.field},e.name))))),(()=>{switch(a){case"note":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"note",rules:[{required:!1}]},d.createElement(wt,{placeholder:n("请输入规则备注")})));case"cluster":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"cluster",rules:[{required:!1,message:n("生效集群不能为空")}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:h},d.createElement(toe,{value:"$all",key:"$all"},"$all"),null==i?void 0:i.map((e=>d.createElement(toe,{value:e,key:e},e))))));case"prom_eval_interval":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),rules:[{required:!1,message:n("执行频率不能为空")}]},d.createElement(zt,null,d.createElement(St.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:15,wrapperCol:{span:10}},d.createElement(Gt,{min:1,onChange:()=>{u(!c)}})),"秒",d.createElement(yt,{title:n(`promql 执行频率，每隔 ${r.getFieldValue("prom_eval_interval")} 秒查询时序库，查到的结果重新命名写回时序库`)},d.createElement(ue,null)))));case"disabled":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:n("改为："),name:"enable_status",valuePropName:"checked"},d.createElement(Lt,null)));case"append_tags":return d.createElement(d.Fragment,null,d.createElement(St.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},ooe]},d.createElement(Nt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:aoe})));default:return null}})())))},{confirm:loe}=Tt,coe=["30","50","100","300"],uoe={id:void 0,group_id:void 0,cluster:void 0,create_at:void 0,create_by:void 0,update_at:void 0,update_by:void 0},hoe=({bgid:e})=>{const[t]=f.exports.useState(),[n,r]=f.exports.useState([]),{t:i}=Ur(),a=k(),[o,l]=f.exports.useState(wo.None),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState(""),{curBusiItem:y}=ci((e=>e.common)),[v,E]=f.exports.useState(""),[x,b]=f.exports.useState(!1),[C,S]=f.exports.useState([]),[w,T]=f.exports.useState([]),[_,O]=f.exports.useState(!1);f.exports.useEffect((()=>{A()}),[e,t]),f.exports.useEffect((()=>{I()}),[v,n,C]);const A=async()=>{if(!e)return;O(!0);const{success:n,dat:r}=await(i=y.id,ji(`/api/n9e/busi-group/${i}/recording-rules`,{method:Li.Get}));var i;n&&(S(r.filter((e=>!t||e.severity===t))||[]),O(!1))},I=()=>{const e=JSON.parse(JSON.stringify(C)).filter((e=>{const t=v.toLowerCase();return(e.name.toLowerCase().indexOf(t)>-1||e.append_tags.join(" ").toLowerCase().indexOf(t)>-1)&&(n&&((e,t)=>{for(let n=0;n<t.length;n++)if(e.includes(t[n]))return!0;return!1})(e.cluster,n)||0===(null==n?void 0:n.length))}));T(e||[])},M=(e,t=!1)=>{(null==y?void 0:y.id)&&a.push(`/recording-rules/edit/${e}${t?"?mode=clone":""}`)},P=()=>{A()},F=[{title:i("集群"),dataIndex:"cluster",render:e=>{const t=e.split(" ")||[];return t.length&&t.map(((e,t)=>d.createElement(bo,{text:e,key:t})))||d.createElement("div",null)}},{title:i("名称"),dataIndex:"name",render:(e,t)=>d.createElement("div",{className:"table-active-text",onClick:()=>{M(t.id)}},e)},{title:i("计算周期"),dataIndex:"prom_eval_interval",render:(e,t)=>e+"s"},{title:i("附加标签"),dataIndex:"append_tags",render:e=>{const t=e||[];return t.length&&t.map(((e,t)=>d.createElement(bo,{text:e,key:t})))||d.createElement("div",null)}},{title:i("更新时间"),dataIndex:"update_at",render:e=>he(1e3*Number(e)).format("YYYY-MM-DD HH:mm:ss")},{title:i("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Lt,{checked:e===co.Enable,size:"small",onChange:()=>{const{id:e,disabled:n}=t;eoe({ids:[e],fields:{disabled:n?0:1}},y.id).then((()=>{P()}))}})},{title:i("操作"),dataIndex:"operator",render:(e,t)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{M(t.id,!0)}},i("克隆")),d.createElement("div",{className:"table-operator-area-warning",onClick:()=>{loe({title:i("是否删除该记录规则?"),onOk:()=>{Jae([t.id],y.id).then((()=>{Et.success(i("删除成功")),P()}))},onCancel(){}})}},i("删除")))}],L=f.exports.useMemo((()=>d.createElement("ul",{className:"ant-dropdown-menu"},d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>l(wo.Import)},d.createElement("span",null,i("导入记录规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{if(h.length){const e=h.map((e=>s(s({},e),uoe)));g(JSON.stringify(e,null,2)),l(wo.Export)}else Et.warning(i("未选择任何规则"))}},d.createElement("span",null,i("导出记录规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{c.length?loe({title:i("是否批量删除记录规则?"),onOk:()=>{Jae(c,y.id).then((()=>{Et.success(i("删除成功")),P()}))},onCancel(){}}):Et.warning(i("未选择任何规则"))}},d.createElement("span",null,i("批量删除规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{i("批量更新规则"),0!=c.length?b(!0):Et.warning(i("请先选择策略"))}},d.createElement("span",null,i("批量更新规则"))))),[c,i]);return d.createElement("div",{className:"strategy-table-content"},d.createElement("div",{className:"strategy-table-search table-handle"},d.createElement("div",{className:"strategy-table-search-left"},d.createElement(xo,{className:"strategy-table-search-left-refresh",onClick:()=>{P()}}),d.createElement(sS,{noLeftPadding:!0,noRightPadding:!1,onClusterChange:e=>r(e)}),d.createElement(oo,{className:"searchInput",placeholder:i("搜索名称或标签"),onSearch:E,allowClear:!0})),d.createElement("div",{className:"strategy-table-search-right"},d.createElement(Ct,{type:"primary",onClick:()=>{(null==y?void 0:y.id)&&a.push(`/recording-rules/add/${y.id}`)},className:"strategy-table-search-right-create"},i("新增记录规则")),d.createElement("div",{className:"table-more-options"},d.createElement(kt,{overlay:L,trigger:["click"]},d.createElement(Ct,{onClick:e=>e.stopPropagation()},i("更多操作"),d.createElement(N,{style:{marginLeft:2}})))))),d.createElement(Ft,{rowKey:"id",pagination:{total:w.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:coe,defaultPageSize:30},loading:_,dataSource:w,rowSelection:{selectedRowKeys:h.map((e=>e.id)),onChange:(e,t)=>{u(e),p(t)}},columns:F}),d.createElement(ko,{status:o,onClose:()=>{l(wo.None)},onSuccess:()=>{A()},onSubmit:async e=>{const{dat:t}=await Zae(e,y.id,"Post");return t||{}},title:i("记录规则"),exportData:m}),x&&d.createElement(soe,{isModalVisible:x,editModalFinish:async(e,t)=>{if(e){const e=await eoe({ids:c,fields:t},y.id);e.err?Et.error(e.err):(Et.success("修改成功！"),P(),b(!1))}else b(!1)}}))},poe=()=>{const{t:e}=Ur(),t=Fi(),n=k(),r=t.get("id");return d.createElement(Pa,{title:e("记录规则"),icon:d.createElement(R,null),hideCluster:!0},d.createElement("div",{className:"strategy-content"},d.createElement(io,{busiGroup:{defaultSelect:r?Number(r):void 0,onChange:e=>{n.push(`/recording-rules?id=${e}`)}}}),r?d.createElement(hoe,{bgid:Number(r)}):d.createElement(ao,{text:"记录规则"})))},{Option:doe}=Nt,foe={labelCol:{span:3},wrapperCol:{span:21}};function moe(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function goe(e){const{isCorrectFormat:t,isLengthAllowed:n}=moe(e.value);return t&&n?d.createElement(Mt,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(yt,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Mt,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function yoe(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=moe(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const voe=({type:e,detail:t={}})=>{const{t:n}=Ur(),r=k(),[i]=St.useForm(),{clusters:a}=ci((e=>e.common)),[o,c]=f.exports.useState({}),[u,h]=f.exports.useState(!0);f.exports.useState(a[0]);const{curBusiItem:p}=ci((e=>e.common)),m=pe(),g=f.exports.useMemo((()=>m.id),[m]);f.exports.useEffect((()=>{const e=s({},t);c(e)}),[JSON.stringify(t)]);return d.createElement("div",{className:"operate_con"},d.createElement(St,l(s({},foe),{form:i,className:"strategy-form",layout:"horizontal",initialValues:l(s({prom_eval_interval:30},t),{cluster:t.cluster?t.cluster.split(" "):a||["Default"]})}),d.createElement(zt,{direction:"vertical",style:{width:"100%"}},d.createElement(Ut,{title:n("基本配置")},d.createElement(St.Item,{required:!0,label:n("指标名称：")},d.createElement(zt,null,d.createElement(St.Item,{style:{marginBottom:0,width:500},name:"name",rules:[{required:!0,message:n("指标名称不能为空")},{pattern:new RegExp(/^[0-9a-zA-Z_:]{1,}$/,"g"),message:"指标名称非法"}]},d.createElement(wt,{placeholder:n("请输入指标名称")})),d.createElement(yt,{title:n("promql周期性计算，会生成新的指标，这里填写新的指标的名字")},d.createElement(ue,null)))),d.createElement(St.Item,{label:n("规则备注："),name:"note",rules:[{required:!1}]},d.createElement(wt,{placeholder:n("请输入规则备注")})),d.createElement(St.Item,{label:n("生效集群"),name:"cluster",rules:[{required:!0,message:n("生效集群不能为空")}]},d.createElement(Nt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:e=>{e.includes("$all")&&i.setFieldsValue({cluster:["$all"]})}},d.createElement(doe,{value:"$all",key:"$all"},"$all"),null==a?void 0:a.map((e=>d.createElement(doe,{value:e,key:e},e))))),d.createElement(St.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.cluster!==t.cluster},(({getFieldValue:e,validateFields:t})=>d.createElement(St.Item,{label:"PromQL",className:"Promeql-content",required:!0},d.createElement(St.Item,{name:"prom_ql",validateTrigger:["onBlur"],trigger:"onChange",rules:[{required:!0,message:n("请输入PromQL")}]},d.createElement(Vc,{url:"/api/n9e/prometheus",headers:{"X-Cluster":i.getFieldValue("cluster").includes("$all")&&a.length>0?a[0]:i.getFieldValue("cluster")[0]||"",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},onChange:e=>{e&&t(["prom_ql"])}}))))),d.createElement(St.Item,{required:!0,label:n("执行频率")},d.createElement(zt,null,d.createElement(St.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:30,wrapperCol:{span:10},rules:[{required:!0,message:n("执行频率不能为空")}]},d.createElement(Gt,{min:1,onChange:()=>{h(!u)}})),"秒",d.createElement(yt,{title:n(`promql 执行频率，每隔 ${i.getFieldValue("prom_eval_interval")} 秒查询时序库，查到的结果重新命名写回时序库`)},d.createElement(ue,null)))),d.createElement(St.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},yoe]},d.createElement(Nt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:goe}))),d.createElement(St.Item,{style:{marginTop:20}},d.createElement(Ct,{type:"primary",onClick:()=>{i.validateFields().then((async t=>{const i=t.cluster.includes("$all")&&a.length>0?a[0]:t.cluster[0]||"",o=await va({query:t.prom_ql},i);if(o.error)return xt.error({message:o.error}),!1;const c=l(s({},t),{cluster:t.cluster.join(" ")});let u,h="Post";if(1===e){u=c,h="Put";const e=await function(e,t,n){return ji(`/api/n9e/busi-group/${t}/recording-rule/${n}`,{method:Li.Put,data:e})}(u,p.id,g);e.err?Et.error(e.error):(Et.success(n("编辑成功！")),r.push("/recording-rules"))}else{u=[c];const{dat:t}=await Zae(u,p.id,h);let i=0;const a=Object.keys(t).map((e=>(t[e]&&i++,t[e])));i?Et.error(n(a)):(Et.success(`${n(2===e?"记录规则克隆成功":"记录规则创建成功")}`),r.push("/recording-rules"))}}))},style:{marginRight:"8px"}},n(1===e?"编辑":2===e?"克隆":"创建")),1===e&&d.createElement(Ct,{danger:!0,style:{marginRight:"8px"},onClick:()=>{Tt.confirm({title:n("是否删除该记录规则?"),onOk:()=>{Jae([t.id],p.id).then((()=>{Et.success(n("删除成功")),r.push("/recording-rules")}))},onCancel(){}})}},n("删除")),d.createElement(Ct,{onClick:()=>{r.push("/recording-rules")}},n("取消"))))))};const Eoe=()=>{const{t:e}=Ur();return d.createElement(Pa,{title:e("记录规则"),showBack:!0,hideCluster:!0},d.createElement(voe,null))},xoe=()=>{const{t:e}=Ur(),t=Fi().get("mode"),n=pe(),r=f.exports.useMemo((()=>n.id),[n]),[i,a]=f.exports.useState({});f.exports.useEffect((()=>(o(),()=>{})),[r]);const o=async()=>{const e=await(t=r,ji(`/api/n9e/recording-rule/${t}`,{method:Li.Get}));var t;a(e.dat||{})};return d.createElement(Pa,{title:e("记录规则"),showBack:!0,hideCluster:!0},i.id&&d.createElement(voe,{detail:i,type:t?2:1}))},boe=function(e){return ji("/api/n9e/grafana-board",{method:Li.Delete,data:{ids:e}})},Coe=function(e){return ji(`/api/n9e/grafana-board/${e}`,{method:Li.Get}).then((e=>e.dat))},Soe=function(e,t){return ji(`/api/n9e/grafana-board/${e}`,{method:Li.Put,data:t}).then((e=>e.dat))};const woe={labelCol:{span:4},wrapperCol:{span:16}},Toe={create:"创建新监控大盘",edit:"编辑监控大盘"};var koe=is((function(e){const{mode:t,initialValues:n={},visible:r,busiId:i,refreshList:a,destroy:o,clusters:c}=e,[u]=St.useForm();return f.exports.useEffect((()=>{n.id&&Coe(n.id).then((e=>{const t=function(e){if(e)try{return JSON.parse(e)}catch(uu){console.error(uu)}return{}}(e.configs);u.setFieldsValue({datasourceValue:t.datasourceValue})}))}),[n.id]),d.createElement(Tt,{title:Toe[t],visible:r,onOk:async()=>{try{const s=await u.validateFields();let l;"edit"===t?(l=await Soe(n.id,{name:s.name,ident:s.ident,tags:_.join(s.tags," "),grafana_id:s.grafana_id,grafana_url:s.grafana_url}),Et.success("编辑大盘成功")):"create"===t&&(l=await(e=i,r={name:s.name,ident:s.ident,tags:_.join(s.tags," "),configs:JSON.stringify({var:[],panels:[],version:"2.0.0"})},ji(`/api/n9e/busi-group/${e}/grafana-boards`,{method:Li.Post,data:r}).then((e=>e.dat))),Et.success("新建大盘成功")),a(),o()}catch(s){Et.error("操作失败")}var e,r},onCancel:()=>{o()},destroyOnClose:!0},d.createElement(St,l(s({},woe),{form:u,preserve:!1,initialValues:n}),d.createElement(St.Item,{label:"大盘名称",name:"name",labelCol:{span:5},wrapperCol:{span:24},rules:[{required:!0,message:"请输入大盘名称"}]},d.createElement(wt,null)),d.createElement(St.Item,{label:"英文标识",name:"ident",labelCol:{span:5},wrapperCol:{span:24},rules:[{pattern:/^[a-zA-Z0-9\-]*$/,message:"请输入英文字母、数字、中划线"}]},d.createElement(wt,null)),d.createElement(St.Item,{labelCol:{span:5},wrapperCol:{span:24},label:"分类标签",name:"tags"},d.createElement(Nt,{mode:"tags",dropdownStyle:{display:"none"},placeholder:"请输入分类标签(请用回车分割)"})),d.createElement(St.Item,{name:"id",hidden:!0},d.createElement(wt,null)),d.createElement(St.Item,{name:"grafana_id",hidden:!0},d.createElement(wt,null)),d.createElement(St.Item,{name:"grafana_url",hidden:!0},d.createElement(wt,null))))}));function _oe(e){const{clusters:t}=ci((e=>e.common)),{busiId:n,selectRowKeys:r,refreshList:i,searchVal:a,onSearchChange:o}=e;return d.createElement(d.Fragment,null,d.createElement("div",{className:"table-handle",style:{padding:0}},d.createElement(zt,null,d.createElement(xo,{onClick:()=>{i()}}),d.createElement("div",{className:"table-handle-search"},d.createElement(wt,{className:"searchInput",value:a,onChange:e=>{o(e.target.value)},prefix:d.createElement(P,null),placeholder:"大盘名称、分类标签"}))),d.createElement("div",{className:"table-handle-buttons"},d.createElement(Ct,{type:"primary",onClick:()=>{koe({mode:"create",busiId:n,refreshList:i,clusters:t})},ghost:!0},"新建大盘"),d.createElement("div",{className:"table-more-options"},d.createElement(kt,{overlay:d.createElement("ul",{className:"ant-dropdown-menu"},d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{r.length?Tt.confirm({title:"是否批量删除大盘?",onOk:async()=>{boe(r).then((()=>{Et.success("批量删除大盘成功")})),setTimeout((()=>{i()}),500)}}):Et.warning("未选择任何大盘")}},d.createElement("span",null,"批量删除大盘"))),trigger:["click"]},d.createElement(Ct,{onClick:e=>e.stopPropagation()},"更多操作",d.createElement(N,{style:{marginLeft:2}})))))))}function Ooe(e){const{clusters:t}=ci((e=>e.common));k(),E();const[n,r]=f.exports.useState(),[i,a]=f.exports.useState([]),[o,c]=f.exports.useState([]),[u,h]=f.exports.useState(_.uniqueId("refreshKey_")),[p,m]=f.exports.useState(""),[g,y]=f.exports.useState(_.toNumber(localStorage.getItem("dashboard-pagesize"))||10);f.exports.useEffect((()=>{var t;e.match.params.busiId&&r(e.match.params.busiId),n&&(t=n,ji(`/api/n9e/busi-group/${t}/grafana-boards`,{method:Li.Get}).then((e=>e.dat))).then((e=>{a(e)}))}),[n,u]);const v=_.filter(i,(e=>!p||(_.includes(e.name.toLowerCase(),p.toLowerCase())||e.tags.toLowerCase().includes(p.toLowerCase()))));return d.createElement(Pa,{title:"监控大盘",icon:d.createElement(ot,null),hideCluster:!0},d.createElement("div",{style:{display:"flex"}},d.createElement(io,{busiGroup:{onChange:e=>r(e)}}),n?d.createElement("div",{className:"dashboards-v2"},d.createElement(_oe,{busiId:n,selectRowKeys:o,refreshList:()=>{h(_.uniqueId("refreshKey_"))},searchVal:p,onSearchChange:m}),d.createElement(Ft,{dataSource:v,columns:[{title:"大盘名称",dataIndex:"name",className:"name-column",render:(e,t)=>d.createElement(B,{target:"_blank",to:`/dashboards/${t.id}`},e)},{title:"分类标签",dataIndex:"tags",className:"tags-column",render:e=>d.createElement(d.Fragment,null,_.map(_.split(e," "),((e,t)=>e?d.createElement(Mt,{color:"blue",key:t,style:{cursor:"pointer"},onClick:()=>{(p.length>0?p.split(" "):[]).includes(e)||m((t=>t?t+" "+e:e))}},e):null)))},{title:"更新时间",width:240,dataIndex:"update_at",render:e=>I.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:"发布人",width:70,dataIndex:"create_by"},{title:"操作",width:120,render:(e,r)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{koe({mode:"edit",initialValues:l(s({},r),{tags:r.tags?_.split(r.tags," "):void 0}),busiId:n,refreshList:()=>{h(_.uniqueId("refreshKey_"))},clusters:t})}},"编辑"),d.createElement("div",{className:"table-operator-area-warning",onClick:async()=>{Tt.confirm({title:`是否删除大盘：${r.name}?`,onOk:async()=>{await boe([r.id]),Et.success("删除大盘成功"),h(_.uniqueId("refreshKey_"))},onCancel(){}})}},"删除"))}],rowKey:"id",rowSelection:{selectedRowKeys:o,onChange:e=>{c(e)}},pagination:{showSizeChanger:!0,pageSize:g,pageSizeOptions:["10","20","50","100"],onShowSizeChange:(e,t)=>{y(t),localStorage.setItem("dashboard-pagesize",t.toString())}}})):d.createElement(ao,{text:"监控大盘"})))}function Aoe(){const[e,t]=f.exports.useState({}),n=f.exports.useRef(),{id:r}=pe(),i=()=>{Coe(r).then((e=>{t(e),n.current=e,document.title=e.name}))};f.exports.useEffect((()=>{i()}),[r]);const a=e=>{"grafana"===e.data.source&&void 0!==n.current&&Soe(r,{name:n.current.name,ident:n.current.ident,tags:n.current.tags,grafana_id:e.data.dashboard.id,grafana_url:e.data.dashboard.url}).then((()=>{i(),console.log(`dashboard ${r} updated`)}))};return pi((()=>(window.addEventListener("message",a,!1),()=>{window.removeEventListener("message",a,!1)}))),e.grafana_id&&0!==e.grafana_id?d.createElement("iframe",{src:`${e.grafana_url}`,style:{width:"100%",height:"100%"}}):d.createElement("iframe",{src:"/grafana/dashboard/new",style:{width:"100%",height:"100%"}})}var Ioe,Moe;function Noe(){const{t:e}=Ur(),[t,n]=f.exports.useState([]),{Search:r}=wt;f.exports.useEffect((()=>{let e;ji("api/n9e/busi-group/overview",{method:Li.Get}).then((t=>(e=t.dat||[],(async e=>{for(const t of e){const e=await ji(`/api/n9e/prometheus/api/v1/series?match[]={busigroup="${t.label}"}`,{method:Li.Get});if("success"===e.status){const n=_.groupBy(e.data,(e=>e.__name__));t.metrics=Object.keys(n).length}else t.metrics=0}return e})(e)))).then((e=>{n(e)}))}),[]);const i=[{title:"业务组",dataIndex:"id",key:"id",render:(e,t)=>d.createElement("a",null,t.name)},{title:"健康状态",dataIndex:"health",key:"health",render(e,t,n){let r="success",i="正常";return 2===e&&(r="error",i="异常"),d.createElement(Mt,{color:r},i)}},{title:"探针数量",dataIndex:"targets",key:"targets"},{title:"指标数量",dataIndex:"metrics",key:"metrics"},{title:"一级告警",dataIndex:"emergency",key:"Emergency"},{title:"二级告警",dataIndex:"warning",key:"Warning"},{title:"三级告警",dataIndex:"notice",key:"Notice"}];return d.createElement(Pa,{title:e("监控总览"),icon:d.createElement(Ke,null)},d.createElement("div",{className:"home-container"},d.createElement("div",{className:"home-toolbar"},d.createElement(r,{placeholder:"请输入关键字",style:{width:300}})),d.createElement("div",{className:"home-content"},d.createElement(Ft,{columns:i,dataSource:t,pagination:{position:["bottomCenter"]}}))))}(Moe=Ioe||(Ioe={}))[Moe.normal=0]="normal",Moe[Moe.warning=1]="warning",Moe[Moe.error=2]="error";let Poe=Ni().reduce(((e,t)=>e.concat(t.routes)),[]);function Foe(e){return d.createElement(lt,{path:e.path,render:t=>d.createElement(e.component,l(s({},t),{routes:e.routes}))})}function Loe(){let{profile:e}=ci((e=>e.account));const t=E(),n=ai();e.id||"/login"==t.pathname||t.pathname.startsWith("/callback")||(t.pathname.startsWith("/dashboards/share/")||n({type:"common/getClusters"}),t.pathname.startsWith("/chart/")||t.pathname.startsWith("/dashboards/share/")||t.pathname.startsWith("/alert-cur-events/")||t.pathname.startsWith("/alert-his-events/")||t.pathname.startsWith("/callback")||(n({type:"account/getProfile"}),n({type:"common/getBusiGroups"})));let r="";if(0===t.pathname.indexOf("/dashboard")){const e=xi.parse(t.search);"fullscreen"===(null==e?void 0:e.viewMode)&&"dark"===(null==e?void 0:e.themeMode)&&(r="theme-dark")}return d.createElement("div",{className:`content ${r}`},d.createElement(st,null,d.createElement(lt,{path:"/demo",component:mie}),d.createElement(lt,{path:"/overview",component:ea}),d.createElement(lt,{path:"/login",component:Ji,exact:!0}),d.createElement(lt,{path:"/callback",component:ta,exact:!0}),d.createElement(lt,{path:"/callback/cas",component:na,exact:!0}),d.createElement(lt,{path:"/callback/oauth",component:ra,exact:!0}),d.createElement(lt,{path:"/metric/explorer",component:dte,exact:!0}),d.createElement(lt,{path:"/object/explorer",component:Lte,exact:!0}),d.createElement(lt,{path:"/busi-groups",component:vee}),d.createElement(lt,{path:"/users",component:gee}),d.createElement(lt,{path:"/user-groups",component:fee}),d.createElement(lt,{path:"/account/profile/:tab",component:yS}),d.createElement(lt,{path:"/chart/:ids",component:K7}),d.createElement(lt,{path:"/indicator",component:$te}),d.createElement(lt,{exact:!0,path:"/alert-rules/add/:group_id",component:zte}),d.createElement(lt,{exact:!0,path:"/alert-rules/edit/:id",component:Hte}),d.createElement(lt,{exact:!0,path:"/alert-rules/:id?",component:pS}),d.createElement(lt,{exact:!0,path:"/alert-rules/brain/:id",component:Ute}),d.createElement(lt,{exact:!0,path:"/alert-mutes",component:Wte}),d.createElement(lt,{exact:!0,path:"/alert-mutes/add/:from?",component:rne}),d.createElement(lt,{exact:!0,path:"/alert-mutes/edit/:id",component:ine}),d.createElement(lt,{exact:!0,path:"/alert-subscribes",component:sne}),d.createElement(lt,{exact:!0,path:"/alert-subscribes/add",component:fne}),d.createElement(lt,{exact:!0,path:"/alert-subscribes/edit/:id",component:mne}),d.createElement(lt,{exact:!0,path:"/recording-rules/:id?",component:poe}),d.createElement(lt,{exact:!0,path:"/recording-rules/add/:group_id",component:Eoe}),d.createElement(lt,{exact:!0,path:"/recording-rules/edit/:id",component:xoe}),d.createElement(lt,{exact:!0,path:"/alert-cur-events",component:Wne}),d.createElement(lt,{exact:!0,path:"/alert-his-events",component:qre}),d.createElement(lt,{exact:!0,path:"/alert-cur-events/:eventId",component:lre}),d.createElement(lt,{exact:!0,path:"/alert-his-events/:eventId",component:lre}),d.createElement(lt,{exact:!0,path:"/targets",component:die}),d.createElement(lt,{exact:!0,path:"/job-tpls",component:kie}),d.createElement(lt,{exact:!0,path:"/job-tpls/add",component:Nie}),d.createElement(lt,{exact:!0,path:"/job-tpls/add/task",component:Die}),d.createElement(lt,{exact:!0,path:"/job-tpls/:id/detail",component:Pie}),d.createElement(lt,{exact:!0,path:"/job-tpls/:id/modify",component:Fie}),d.createElement(lt,{exact:!0,path:"/job-tpls/:id/clone",component:Lie}),d.createElement(lt,{exact:!0,path:"/job-tasks",component:Rie}),d.createElement(lt,{exact:!0,path:"/job-tasks/add",component:Die}),d.createElement(lt,{exact:!0,path:"/job-tasks/:id/result",component:$ie}),d.createElement(lt,{exact:!0,path:"/job-tasks/:id/detail",component:zie}),d.createElement(lt,{exact:!0,path:"/help/version",component:Gie}),d.createElement(lt,{exact:!0,path:"/help/contact",component:Vie}),d.createElement(lt,{exact:!0,path:"/help/migrate",component:Jie}),d.createElement(lt,{exact:!0,path:"/help/servers",component:tae}),d.createElement(lt,{exact:!0,path:"/help/source",component:Sae}),d.createElement(lt,{exact:!0,path:"/help/source/:action/:cate/:type",component:Qae}),d.createElement(lt,{exact:!0,path:"/help/source/:action/:cate/:type/:id",component:Qae}),d.createElement(lt,{exact:!0,path:"/dashboards",component:Ooe}),d.createElement(lt,{exact:!0,path:"/dashboards/:id",component:Aoe}),d.createElement(lt,{exact:!0,path:"/home",component:Noe}),Poe.map(((e,t)=>d.createElement(Foe,s({key:t},e)))),d.createElement(lt,{path:"/",exact:!0},d.createElement(ct,{to:"/metric/explorer"})),d.createElement(lt,{path:"/403",component:Zi}),d.createElement(lt,{path:"/404",component:Qi}),d.createElement(lt,{path:"*",component:Qi})))}function Roe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Doe="function"==typeof Symbol&&Symbol.observable||"@@observable",Boe=function(){return Math.random().toString(36).substring(7).split("").join(".")},$oe={INIT:"@@redux/INIT"+Boe(),REPLACE:"@@redux/REPLACE"+Boe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Boe()}};function zoe(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Hoe(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Roe(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Roe(1));return n(Hoe)(e,t)}if("function"!=typeof e)throw new Error(Roe(2));var i=e,a=t,o=[],s=o,l=!1;function c(){s===o&&(s=o.slice())}function u(){if(l)throw new Error(Roe(3));return a}function h(e){if("function"!=typeof e)throw new Error(Roe(4));if(l)throw new Error(Roe(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(Roe(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function p(e){if(!zoe(e))throw new Error(Roe(7));if(void 0===e.type)throw new Error(Roe(8));if(l)throw new Error(Roe(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!=typeof e)throw new Error(Roe(10));i=e,p({type:$oe.REPLACE})}function f(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Roe(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Doe]=function(){return this},e}return p({type:$oe.INIT}),(r={dispatch:p,subscribe:h,getState:u,replaceReducer:d})[Doe]=f,r}function joe(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:$oe.INIT}))throw new Error(Roe(12));if(void 0===n(void 0,{type:$oe.PROBE_UNKNOWN_ACTION()}))throw new Error(Roe(13))}))}(n)}catch(uu){a=uu}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var l=o[s],c=n[l],u=e[l],h=c(u,t);if(void 0===h)throw t&&t.type,new Error(Roe(14));i[l]=h,r=r||h!==u}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Goe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var Voe=function(e){return"@@redux-saga/"+e},Yoe=Voe("CANCEL_PROMISE"),Uoe=Voe("CHANNEL_END"),qoe=Voe("IO"),Woe=Voe("MATCH"),Xoe=Voe("MULTICAST"),Koe=Voe("SAGA_ACTION"),Qoe=Voe("SELF_CANCELLATION"),Zoe=Voe("TASK"),Joe=Voe("TASK_CANCEL"),ese=Voe("TERMINATE"),tse=Voe("LOCATION"),nse=function(e){return null==e},rse=function(e){return null!=e},ise=function(e){return"function"==typeof e},ase=function(e){return"string"==typeof e},ose=Array.isArray,sse=function(e){return e&&ise(e.then)},lse=function(e){return e&&ise(e.next)&&ise(e.throw)},cse=function e(t){return t&&(ase(t)||pse(t)||ise(t)||ose(t)&&t.every(e))},use=function(e){return e&&ise(e.take)&&ise(e.close)},hse=function(e){return ise(e)&&e.hasOwnProperty("toString")},pse=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};function dse(e,t){var n;void 0===t&&(t=!0);var r=new Promise((function(r){n=setTimeout(r,e,t)}));return r[Yoe]=function(){clearTimeout(n)},r}var fse=function(e){return function(){return e}}(!0),mse=function(){},gse=function(e){return e},yse=function(e,t){te(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function vse(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var Ese=function(e){throw e},xse=function(e){return{value:e,done:!0}};function bse(e,t,n){void 0===t&&(t=Ese),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:xse,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function Cse(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var Sse=function(e){return Array.apply(null,new Array(e))},wse=function(e){return function(t){return e(Object.defineProperty(t,Koe,{value:!0}))}},Tse=function(e){return e===ese},kse=function(e){return e===Joe},_se=function(e){return Tse(e)||kse(e)};function Ose(e,t){var n,r=Object.keys(e),i=r.length,a=0,o=ose(e)?Sse(i):{},s={};return r.forEach((function(e){var r=function(r,s){n||(s||_se(r)?(t.cancel(),t(r,s)):(o[e]=r,++a===i&&(n=!0,t(o))))};r.cancel=mse,s[e]=r})),t.cancel=function(){n||(n=!0,r.forEach((function(e){return s[e].cancel()})))},s}function Ase(e){return{name:e.name||"anonymous",location:Ise(e)}}function Ise(e){return e[tse]}function Mse(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,a=0,o=function(t){n[i]=t,i=(i+1)%e,r++},s=function(){if(0!=r){var t=n[a];return n[a]=null,r--,a=(a+1)%e,t}},l=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var c;if(r<e)o(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=s,a=i=(i+1)%e;break;case 4:c=2*e,n=l(),r=n.length,i=n.length,a=0,n.length=c,e=c,o(s)}},take:s,flush:l}}var Nse=function(e){return Mse(e,3)},Pse=Object.freeze({__proto__:null,TAKE:"TAKE",PUT:"PUT",ALL:"ALL",RACE:"RACE",CALL:"CALL",CPS:"CPS",FORK:"FORK",JOIN:"JOIN",CANCEL:"CANCEL",SELECT:"SELECT",ACTION_CHANNEL:"ACTION_CHANNEL",CANCELLED:"CANCELLED",FLUSH:"FLUSH",GET_CONTEXT:"GET_CONTEXT",SET_CONTEXT:"SET_CONTEXT"}),Fse=function(e,t){var n;return(n={})[qoe]=!0,n.combinator=!1,n.type=e,n.payload=t,n},Lse=function(e){return Fse("FORK",te({},e.payload,{detached:!0}))};function Rse(e,t){return void 0===e&&(e="*"),cse(e)?Fse("TAKE",{pattern:e}):use(n=e)&&n[Xoe]&&rse(t)&&cse(t)?Fse("TAKE",{channel:e,pattern:t}):use(e)?Fse("TAKE",{channel:e}):void 0;var n}function Dse(e,t){return nse(t)&&(t=e,e=void 0),Fse("PUT",{channel:e,action:t})}function Bse(e){var t=Fse("RACE",e);return t.combinator=!0,t}function $se(e,t){var n,r=null;return ise(e)?n=e:(ose(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&ase(n)&&ise(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function zse(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fse("CALL",$se(e,n))}function Hse(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fse("FORK",$se(e,n))}function jse(e){return void 0===e&&(e=Qoe),Fse("CANCEL",e)}function Gse(e,t){return Fse("ACTION_CHANNEL",{pattern:e,buffer:t})}var Vse=zse.bind(null,dse);var Yse=[],Use=0;function qse(e){try{Kse(),e()}finally{Qse()}}function Wse(e){Yse.push(e),Use||(Kse(),Zse())}function Xse(e){try{return Kse(),e()}finally{Zse()}}function Kse(){Use++}function Qse(){Use--}function Zse(){var e;for(Qse();!Use&&void 0!==(e=Yse.shift());)qse(e)}var Jse=function(e){return function(t){return e.some((function(e){return ile(e)(t)}))}},ele=function(e){return function(t){return e(t)}},tle=function(e){return function(t){return t.type===String(e)}},nle=function(e){return function(t){return t.type===e}},rle=function(){return fse};function ile(e){var t="*"===e?rle:ase(e)?tle:ose(e)?Jse:hse(e)?tle:ise(e)?ele:pse(e)?nle:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var ale={type:Uoe},ole=function(e){return e&&e.type===Uoe};function sle(e){var t;void 0===e&&(e=Mse(t,4));var n=!1,r=[];return{take:function(t){n&&e.isEmpty()?t(ale):e.isEmpty()?(r.push(t),t.cancel=function(){vse(r,t)}):t(e.take())},put:function(t){if(!n){if(0===r.length)return e.put(t);r.shift()(t)}},flush:function(t){n&&e.isEmpty()?t(ale):t(e.flush())},close:function(){if(!n){n=!0;var e=r;r=[];for(var t=0,i=e.length;t<i;t++){(0,e[t])(ale)}}}}}function lle(){var e,t,n,r,i,a,o=(t=!1,r=n=[],i=function(){r===n&&(r=n.slice())},a=function(){t=!0;var e=n=r;r=[],e.forEach((function(e){e(ale)}))},(e={})[Xoe]=!0,e.put=function(e){if(!t)if(ole(e))a();else for(var i=n=r,o=0,s=i.length;o<s;o++){var l=i[o];l[Woe](e)&&(l.cancel(),l(e))}},e.take=function(e,n){var a,o;void 0===n&&(n=rle),t?e(ale):(e[Woe]=n,i(),r.push(e),e.cancel=(a=function(){i(),vse(r,e)},o=!1,function(){o||(o=!0,a())}))},e.close=a,e),s=o.put;return o.put=function(e){e[Koe]?s(e):Wse((function(){s(e)}))},o}function cle(e,t){var n=e[Yoe];ise(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var ule,hle=0,ple=function(){return++hle};function dle(e){e.isRunning()&&e.cancel()}var fle=((ule={}).TAKE=function(e,t,n){var r=t.channel,i=void 0===r?e.channel:r,a=t.pattern,o=t.maybe,s=function(e){e instanceof Error?n(e,!0):!ole(e)||o?n(e):n(ese)};try{i.take(s,rse(a)?ile(a):null)}catch(l){return void n(l,!0)}n.cancel=s.cancel},ule.PUT=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;Wse((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(o){return void n(o,!0)}a&&sse(t)?cle(t,n):n(t)}))},ule.ALL=function(e,t,n,r){var i=r.digestEffect,a=hle,o=Object.keys(t);if(0!==o.length){var s=Ose(t,n);o.forEach((function(e){i(t[e],a,s[e],e)}))}else n(ose(t)?[]:{})},ule.RACE=function(e,t,n,r){var i=r.digestEffect,a=hle,o=Object.keys(t),s=ose(t)?Sse(o.length):{},l={},c=!1;o.forEach((function(e){var t=function(t,r){c||(r||_se(t)?(n.cancel(),n(t,r)):(n.cancel(),c=!0,s[e]=t,n(s)))};t.cancel=mse,l[e]=t})),n.cancel=function(){c||(c=!0,o.forEach((function(e){return l[e].cancel()})))},o.forEach((function(e){c||i(t[e],a,l[e],e)}))},ule.CALL=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,s=r.task;try{var l=a.apply(i,o);if(sse(l))return void cle(l,n);if(lse(l))return void Cle(e,l,s.context,hle,Ase(a),!1,n);n(l)}catch(c){n(c,!0)}},ule.CPS=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var o=function(e,t){nse(e)?n(t):n(e,!0)};i.apply(r,a.concat(o)),o.cancel&&(n.cancel=o.cancel)}catch(s){n(s,!0)}},ule.FORK=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,s=t.detached,l=r.task,c=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if(lse(i))return i;var a=!1;return bse((function(e){return a?{value:e,done:!0}:(a=!0,{value:i,done:!sse(i)})}))}catch(o){return bse((function(){throw o}))}}({context:i,fn:a,args:o}),u=function(e,t){return e.isSagaIterator?{name:e.meta.name}:Ase(t)}(c,a);Xse((function(){var t=Cle(e,c,l.context,hle,u,s,void 0);s?n(t):t.isRunning()?(l.queue.addTask(t),n(t)):t.isAborted()?l.queue.abort(t.error()):n(t)}))},ule.JOIN=function(e,t,n,r){var i=r.task,a=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&vse(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(ose(t)){if(0===t.length)return void n([]);var o=Ose(t,n);t.forEach((function(e,t){a(e,o[t])}))}else a(t,n)},ule.CANCEL=function(e,t,n,r){var i=r.task;t===Qoe?dle(i):ose(t)?t.forEach(dle):dle(t),n()},ule.SELECT=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(a){n(a,!0)}},ule.ACTION_CHANNEL=function(e,t,n){var r=t.pattern,i=sle(t.buffer),a=ile(r),o=function t(n){ole(n)||e.channel.take(t,a),i.put(n)},s=i.close;i.close=function(){o.cancel(),s()},e.channel.take(o,a),n(i)},ule.CANCELLED=function(e,t,n,r){n(r.task.isCancelled())},ule.FLUSH=function(e,t,n){t.flush(n)},ule.GET_CONTEXT=function(e,t,n,r){n(r.task.context[t])},ule.SET_CONTEXT=function(e,t,n,r){var i=r.task;yse(i.context,t),n()},ule);function mle(e,t){return e+"?"+t}function gle(e){var t=e.name,n=e.location;return n?t+"  "+mle(n.fileName,n.lineNumber):t}var yle=null,vle=[],Ele=function(){yle=null,vle.length=0},xle=function(){var e,t,n,r,i,a,o,s=vle[0],l=vle.slice(1),c=s.crashedEffect?(e=s.crashedEffect,(t=Ise(e))?t.code+"  "+mle(t.fileName,t.lineNumber):""):null;return["The above error occurred in task "+gle(s.meta)+(c?" \n when executing effect "+c:"")].concat(l.map((function(e){return"    created by "+gle(e.meta)})),[(n=vle,r=function(e){return e.cancelledTasks},i=n,o=(a=[]).concat.apply(a,i.map(r)),o.length?["Tasks cancelled due to error:"].concat(o).join("\n"):"")]).join("\n")};function ble(e,t,n,r,i,a,o){var s;void 0===o&&(o=mse);var l,c,u=0,h=null,p=[],d=Object.create(n),f=function(e,t,n){var r,i=[],a=!1;function o(e){t(),l(),n(e,!0)}function s(t){i.push(t),t.cont=function(s,l){a||(vse(i,t),t.cont=mse,l?o(s):(t===e&&(r=s),i.length||(a=!0,n(r))))}}function l(){a||(a=!0,i.forEach((function(e){e.cont=mse,e.cancel()})),i=[])}return s(e),{addTask:s,cancelAll:l,abort:o,getTasks:function(){return i}}}(t,(function(){p.push.apply(p,f.getTasks().map((function(e){return e.meta.name})))}),m);function m(t,n){if(n){if(u=2,(a={meta:i,cancelledTasks:p}).crashedEffect=yle,vle.push(a),g.isRoot){var r=xle();Ele(),e.onError(t,{sagaStack:r})}c=t,h&&h.reject(t)}else t===Joe?u=1:1!==u&&(u=3),l=t,h&&h.resolve(t);var a;g.cont(t,n),g.joiners.forEach((function(e){e.cb(t,n)})),g.joiners=null}var g=((s={})[Zoe]=!0,s.id=r,s.meta=i,s.isRoot=a,s.context=d,s.joiners=[],s.queue=f,s.cancel=function(){0===u&&(u=1,f.cancelAll(),m(Joe,!1))},s.cont=o,s.end=m,s.setContext=function(e){yse(d,e)},s.toPromise=function(){return h||((e={}).promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),h=e,2===u?h.reject(c):0!==u&&h.resolve(l)),h.promise;var e},s.isRunning=function(){return 0===u},s.isCancelled=function(){return 1===u||0===u&&1===t.status},s.isAborted=function(){return 2===u},s.result=function(){return l},s.error=function(){return c},s);return g}function Cle(e,t,n,r,i,a,o){var s=e.finalizeRunEffect((function(t,n,r){if(sse(t))cle(t,r);else if(lse(t))Cle(e,t,c.context,n,i,!1,r);else if(t&&t[qoe]){(0,fle[t.type])(e,t.payload,r,u)}else r(t)}));h.cancel=mse;var l={meta:i,cancel:function(){0===l.status&&(l.status=1,h(Joe))},status:0},c=ble(e,l,n,r,i,a,o),u={task:c,digestEffect:p};return o&&(o.cancel=c.cancel),h(),c;function h(e,n){try{var i;n?(i=t.throw(e),Ele()):kse(e)?(l.status=1,h.cancel(),i=ise(t.return)?t.return(Joe):{done:!0,value:Joe}):i=Tse(e)?ise(t.return)?t.return():{done:!0}:t.next(e),i.done?(1!==l.status&&(l.status=3),l.cont(i.value)):p(i.value,r,h)}catch(a){if(1===l.status)throw a;l.status=2,l.cont(a,!0)}}function p(t,n,r,i){void 0===i&&(i="");var a,o=ple();function l(n,i){a||(a=!0,r.cancel=mse,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),i&&function(e){yle=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:i,effect:t}),l.cancel=mse,r.cancel=function(){a||(a=!0,l.cancel(),l.cancel=mse,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},s(t,o,l)}}function Sle(e,t){for(var n=e.channel,r=void 0===n?lle():n,i=e.dispatch,a=e.getState,o=e.context,s=void 0===o?{}:o,l=e.sagaMonitor,c=e.effectMiddlewares,u=e.onError,h=void 0===u?Cse:u,p=arguments.length,d=new Array(p>2?p-2:0),f=2;f<p;f++)d[f-2]=arguments[f];var m,g=t.apply(void 0,d),y=ple();if(l&&(l.rootSagaStarted=l.rootSagaStarted||mse,l.effectTriggered=l.effectTriggered||mse,l.effectResolved=l.effectResolved||mse,l.effectRejected=l.effectRejected||mse,l.effectCancelled=l.effectCancelled||mse,l.actionDispatched=l.actionDispatched||mse,l.rootSagaStarted({effectId:y,saga:t,args:d})),c){var v=Goe.apply(void 0,c);m=function(e){return function(t,n,r){return v((function(t){return e(t,n,r)}))(t)}}}else m=gse;var E={channel:r,dispatch:wse(i),getState:a,sagaMonitor:l,onError:h,finalizeRunEffect:m};return Xse((function(){var e=Cle(E,g,s,y,Ase(t),!0,void 0);return l&&l.effectResolved(y,e),e}))}function wle(e){var t,n=void 0===e?{}:e,r=n.context,i=void 0===r?{}:r,a=n.channel,o=void 0===a?lle():a,s=n.sagaMonitor,l=Be(n,["context","channel","sagaMonitor"]);function c(e){var n=e.getState,r=e.dispatch;return t=Sle.bind(null,te({},l,{context:i,channel:o,dispatch:r,getState:n,sagaMonitor:s})),function(e){return function(t){s&&s.actionDispatched&&s.actionDispatched(t);var n=e(t);return o.put(t),n}}}return c.run=function(){return t.apply(void 0,arguments)},c.setContext=function(e){yse(i,e)},c}var Tle=function(e){return{done:!0,value:e}},kle={};function _le(e){return use(e)?"channel":hse(e)?String(e):ise(e)?e.name:String(e)}function Ole(e,t,n){var r,i,a,o=t;function s(t,n){if(o===kle)return Tle(t);if(n&&!i)throw o=kle,n;r&&r(t);var s=n?e[i](n):e[o]();return o=s.nextState,a=s.effect,r=s.stateUpdater,i=s.errorState,o===kle?Tle(t):a}return bse(s,(function(e){return s(null,e)}),n)}function Ale(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o={done:!1,value:Rse(e)},s=function(e){return{done:!1,value:Hse.apply(void 0,[t].concat(r,[e]))}},l=function(e){return a=e};return Ole({q1:function(){return{nextState:"q2",effect:o,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(a)}}},"q1","takeEvery("+_le(e)+", "+t.name+")")}function Ile(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o,s={done:!1,value:Rse(e)},l=function(e){return{done:!1,value:Hse.apply(void 0,[t].concat(r,[e]))}},c=function(e){return{done:!1,value:jse(e)}},u=function(e){return a=e},h=function(e){return o=e};return Ole({q1:function(){return{nextState:"q2",effect:s,stateUpdater:h}},q2:function(){return a?{nextState:"q3",effect:c(a)}:{nextState:"q1",effect:l(o),stateUpdater:u}},q3:function(){return{nextState:"q1",effect:l(o),stateUpdater:u}}},"q1","takeLatest("+_le(e)+", "+t.name+")")}function Mle(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o={done:!1,value:Rse(e)},s=function(e){return{done:!1,value:zse.apply(void 0,[t].concat(r,[e]))}},l=function(e){return a=e};return Ole({q1:function(){return{nextState:"q2",effect:o,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(a)}}},"q1","takeLeading("+_le(e)+", "+t.name+")")}function Nle(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s,l={done:!1,value:Gse(t,Nse(1))},c=function(){return{done:!1,value:Rse(s)}},u=function(e){return{done:!1,value:Hse.apply(void 0,[n].concat(i,[e]))}},h={done:!1,value:Vse(e)},p=function(e){return o=e},d=function(e){return s=e};return Ole({q1:function(){return{nextState:"q2",effect:l,stateUpdater:d}},q2:function(){return{nextState:"q3",effect:c(),stateUpdater:p}},q3:function(){return{nextState:"q4",effect:u(o)}},q4:function(){return{nextState:"q2",effect:h}}},"q1","throttle("+_le(t)+", "+n.name+")")}function Ple(e,t,n){for(var r=e,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s={done:!1,value:zse.apply(void 0,[n].concat(a))},l={done:!1,value:Vse(t)};return Ole({q1:function(){return{nextState:"q2",effect:s,errorState:"q10"}},q2:function(){return{nextState:kle}},q10:function(e){if((r-=1)<=0)throw e;return{nextState:"q1",effect:l}}},"q1","retry("+n.name+")")}function Fle(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s,l={done:!1,value:Rse(t)},c={done:!1,value:Bse({action:Rse(t),debounce:Vse(e)})},u=function(e){return{done:!1,value:Hse.apply(void 0,[n].concat(i,[e]))}},h=function(e){return{done:!1,value:e}},p=function(e){return o=e},d=function(e){return s=e};return Ole({q1:function(){return{nextState:"q2",effect:l,stateUpdater:p}},q2:function(){return{nextState:"q3",effect:c,stateUpdater:d}},q3:function(){return s.debounce?{nextState:"q1",effect:u(o)}:{nextState:"q2",effect:h(s.action),stateUpdater:p}}},"q1","debounce("+_le(t)+", "+n.name+")")}function Lle(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Hse.apply(void 0,[Ale,e,t].concat(r))}var Rle=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",actionChannel:Gse,all:function(e){var t=Fse("ALL",e);return t.combinator=!0,t},apply:function(e,t,n){return void 0===n&&(n=[]),Fse("CALL",$se([e,t],n))},call:zse,cancel:jse,cancelled:function(){return Fse("CANCELLED",{})},cps:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fse("CPS",$se(e,n))},delay:Vse,effectTypes:Pse,flush:function(e){return Fse("FLUSH",e)},fork:Hse,getContext:function(e){return Fse("GET_CONTEXT",e)},join:function(e){return Fse("JOIN",e)},put:Dse,putResolve:function(){var e=Dse.apply(void 0,arguments);return e.payload.resolve=!0,e},race:Bse,select:function(e){void 0===e&&(e=gse);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fse("SELECT",{selector:e,args:n})},setContext:function(e){return Fse("SET_CONTEXT",e)},spawn:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Lse(Hse.apply(void 0,[e].concat(n)))},take:Rse,takeMaybe:function(){var e=Rse.apply(void 0,arguments);return e.payload.maybe=!0,e},debounce:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return Hse.apply(void 0,[Fle,e,t,n].concat(i))},retry:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return zse.apply(void 0,[Ple,e,t,n].concat(i))},takeEvery:Lle,takeLatest:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Hse.apply(void 0,[Ile,e,t].concat(r))},takeLeading:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Hse.apply(void 0,[Mle,e,t].concat(r))},throttle:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return Hse.apply(void 0,[Nle,e,t,n].concat(i))}});const Dle="@@DVA_LOADING/SHOW",Ble="@@DVA_LOADING/HIDE";function $le(e){return()=>t=>n=>{const{type:r}=n;return function(t){if(!t||"string"!=typeof t)return!1;const[n]=t.split("/"),r=e._models.filter((e=>e.namespace===n))[0];if(r&&r.effects&&r.effects[t])return!0;return!1}(r)?new Promise(((e,r)=>{t(s({__dva_resolve:e,__dva_reject:r},n))})):t(n)}}const zle=new class{constructor(e){this.hooks=e.reduce(((e,t)=>(e[t]=[],e)),{})}use(e){const{hooks:t}=this;for(let n in e)t[n].push(e[n])}get(e){return"extraReducers"===e?Object.assign({},...this.hooks[e]):this.hooks[e]}}(["onEffect","extraReducers"]),Hle=new class{constructor(e){this.noop=e=>{},this._models=[],this.store={},this.plugin=e}addModel(e){const t=this.prefixResolve(e);this._models.push(t)}removeModel(){}prefixResolve(e){return e.reducers&&(e.reducers=this.prefix(e.reducers,e.namespace)),e.effects&&(e.effects=this.prefix(e.effects,e.namespace)),e}prefix(e,t){return Object.keys(e).reduce(((n,r)=>(n[t+"/"+r]=e[r],n)),{})}getReducer(){let e={};for(let n of this._models)e[n.namespace]=function(e=n.state,t){let r=n.reducers[t.type];return r?r(e,t):e};let t=this.plugin.get("extraReducers");return joe(s(s({},e),t))}getSagas(){let e=[];const t=this;for(let n of this._models)e.push((function*(){for(const e in n.effects){const r=t.getWatcher(e,n.effects[e],n,t.plugin.get("onEffect"));yield Hse(r)}}));return e}prefixType(e,t){return-1===e.indexOf("/")?t.namespace+"/"+e:e}getWatcher(e,t,n,r){const i=this,a=e=>Dse(l(s({},e),{type:this.prefixType(e.type,n)}));return function*(){yield Lle(e,(function*(o){if(r)for(const i of r)t=i(t,l(s({},Rle),{put:a}),n,e);const{__dva_resolve:c=i.noop}=o||{};try{c(yield t(o,l(s({},Rle),{put:a})))}catch(u){console.error(u)}}))}}start(){let e=this.getReducer(),t=this.getSagas(),n=wle();this.store=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Roe(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Goe.apply(void 0,a)(n.dispatch),ut(ut({},n),{},{dispatch:r})}}}($le(this),n)(Hoe)(e),t.forEach(n.run)}}(zle);Hle.plugin.use(function(){let e={effects:{}};return{onEffect:function(e,{put:t},n,r){const{namespace:i}=n;return function*(...n){try{return yield t({type:Dle,payload:{namespace:i,actionType:r}}),yield e(...n)}finally{yield t({type:Ble,payload:{namespace:i,actionType:r}})}}},extraReducers:{loading(t=e,{type:n,payload:r}){let{actionType:i}=r||{};switch(n){case Dle:return{effects:l(s({},t.effects),{[i]:!0})};case Ble:return{effects:l(s({},t.effects),{[i]:!1})};default:return t}}}}}());const jle={namespace:"common",state:{clusters:[],curClusterItems:JSON.parse(localStorage.getItem("curClusterItems")||"[]"),busiGroups:[],curBusiItem:JSON.parse(localStorage.getItem("curBusiItem")||"{}")},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*getClusters({},{put:e,select:t}){const{curClusterItems:n}=yield t((e=>e.common)),{dat:r}=yield Gi(),i=r||[],a=n.filter((e=>i.includes(e)));yield e({type:"saveData",prop:"curClusterItems",data:a}),localStorage.setItem("curClusterItems",JSON.stringify(a)),i.includes(localStorage.getItem("curCluster"))||localStorage.removeItem("curCluster"),yield e({type:"saveData",prop:"clusters",data:i})},*getBusiGroups({query:e},{put:t,select:n}){const{curBusiItem:r}=yield n((e=>e.common)),{dat:i}=yield Ui(e),a=i||[];r.id&&a.every((e=>e.id!==r.id))&&(yield t({type:"saveData",prop:"curBusiItem",data:{}}),localStorage.removeItem("curBusiItem")),yield t({type:"saveData",prop:"busiGroups",data:a})}}};var Gle,Vle,Yle,Ule,qle,Wle;(Vle=Gle||(Gle={}))[Vle.Need=1]="Need",Vle[Vle.UnNeed=0]="UnNeed",(Ule=Yle||(Yle={})).CmdLine="cmdline",Ule.Name="name",(Wle=qle||(qle={})).TCP="tcp",Wle.UDP="udp";const Xle=function(e,t=1){return ji("/api/n9e/classpaths",{method:Li.Get,params:{query:e,limit:30,p:t}})},Kle=function(e){return ji(`/api/n9e/classpath/${e}/favorites`,{method:Li.Post,data:{id:e}})},Qle=function(e){return ji(`/api/n9e/classpath/${e}/favorites`,{method:Li.Delete,data:{id:e}})},Zle=function(e){return ji(`/api/n9e/classpath/${e}`,{method:Li.Delete})},Jle=function(e){return ji(`/api/n9e/classpath/${e.id}`,{method:Li.Put,data:e})},ece=function(e){return ji(`/api/n9e/resource/${e}`,{method:Li.Get})},tce={namespace:"resource",state:{tableData:[],pageNumber:1,group:{favorite:[],common:[],currentPage:1,commonTotal:0},currentGroup:null,prefix:Gle.UnNeed,resourceData:{resourceDetail:null,resourceDetailLoading:!1}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data}),saveResourceGroupData:(e,{data:t})=>l(s({},e),{group:s(s({},e.group),t)}),saveResourceData:(e,{data:t})=>l(s({},e),{resourceData:s(s({},e.resourceData),t)})},effects:{*updatePrefix({data:e},{put:t}){yield t({type:"saveData",prop:"prefix",data:e})},*chooseGroupItem({data:e},{put:t,select:n}){const{currentGroup:r}=yield n((e=>e.resource));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentGroup",data:e})))},*getResourceItem({id:e},{call:t,put:n}){yield n({type:"saveResourceData",data:{resourceDetailLoading:!0}});const{success:r,dat:i}=yield t(ece,e);r&&(yield n({type:"saveResourceData",data:{resourceDetail:i}})),yield n({type:"saveResourceData",data:{resourceDetailLoading:!1}})},*getGroup({sign:e,data:t=""},{put:n,select:r,call:i}){var a,o,c;const{currentGroup:u}=yield r((e=>e.resource));if("init"===e||"refresh"===e){const[r,i]=yield Promise.all([Xle("",1),ji("/api/n9e/classpaths/favorites",{method:Li.Get})]);if(r.success){const h=(null==(a=null==i?void 0:i.dat)?void 0:a.map((e=>l(s({},e),{isFavorite:!0,isBelongIn:$i.Favorite}))))||[],p=(null==(o=null==r?void 0:r.dat)?void 0:o.list.map((e=>l(s({},e),{isFavorite:!!h.find((t=>t.id===e.id)),isBelongIn:$i.Common}))))||[],d=(null==(c=null==r?void 0:r.dat)?void 0:c.total)||0;if(yield n({type:"saveResourceGroupData",data:{favorite:h,common:p,commonTotal:d,currentPage:1}}),"init"===e&&t&&""!==t){const e=p.find((e=>e.id===Number(t)));yield n({type:"saveData",prop:"currentGroup",data:e})}else if(u){const e=p.find((e=>e.id===u.id));e?yield n({type:"saveData",prop:"currentGroup",data:e}):yield n({type:"saveData",prop:"currentGroup",data:p[0]})}else yield n({type:"saveData",prop:"currentGroup",data:p[0]})}}else if("search"===e){const{group:{favorite:e}}=yield r((e=>e.resource)),{success:a,dat:o}=yield i(Xle,t);if(a){const t=(null==o?void 0:o.total)||0,r=(null==o?void 0:o.list.map((t=>l(s({},t),{isFavorite:!!e.find((e=>e.id===t.id)),isBelongIn:$i.Common}))))||[];yield n({type:"saveResourceGroupData",data:{common:r,commonTotal:t,currentPage:1}}),(u||u.id)&&e.find((e=>e.id===u.id))&&r.find((e=>e.id===u.id))||(yield n({type:"saveData",prop:"currentGroup",data:r[0]}))}}else if("append"===e){const{group:{common:e,favorite:t,currentPage:a}}=yield r((e=>e.resource)),{success:o,dat:c}=yield i(Xle,"",a+1);if(o){const r=(null==c?void 0:c.total)||0,i=(null==c?void 0:c.list.map((e=>l(s({},e),{isFavorite:!!t.find((t=>t.id===e.id)),isBelongIn:$i.Common}))))||[];yield n({type:"saveResourceGroupData",data:{common:e.concat(i),commonTotal:r,currentPage:a+1}})}}},*changeGroupFavorite({id:e,favorType:t},{put:n,call:r}){const i=t===Di.Add?Kle:Qle,{success:a}=yield r(i,e);a&&(yield n({type:"getGroup",sign:"refresh"}))},*deleteGroup({id:e},{call:t,put:n}){const{success:r}=yield t(Zle,e);r&&(yield n({type:"getGroup",sign:"refresh"}))},*updateGroup({id:e,data:t},{call:n,put:r}){const{success:i}=yield n(Jle,l(s({},t),{id:e}));i&&(yield r({type:"getGroup",sign:"refresh"}))}}},nce=function(e){return ji("/api/n9e/self/profile",{method:Li.Put,data:e})},rce=function(){return ji("/api/n9e/self/profile",{method:Li.Get})},ice={namespace:"account",state:{num:0,profile:{nickname:"",role:"",roles:[],username:"",email:"",phone:"",id:0,portrait:"",contacts:{}},csrfToken:""},reducers:{SET_PROFILE:(e,t)=>l(s({},e),{profile:t.profile})},effects:{*login({username:e,password:t},{put:n,call:r,select:i}){const{dat:a,err:o}=yield r(Hi,e,t);yield n({type:"SET_PROFILE",profile:a.user});const{access_token:s,refresh_token:l}=a;return localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",l),yield n({type:"common/getClusters"}),yield n({type:"common/getBusiGroups"}),o},*getProfile({},{put:e,call:t,select:n}){const{dat:r,err:i}=yield t(rce);return yield e({type:"SET_PROFILE",profile:r}),i},*updateProfile({data:e},{put:t,call:n,select:r}){const{dat:i,err:a}=yield n(nce,e);return yield t({type:"SET_PROFILE",profile:e}),a}}},oce={namespace:"strategy",state:{group:{favorite:[],common:[],currentPage:1,commonTotal:0},currentGroup:{id:1}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data}),saveStrategyGroupData:(e,{data:t})=>l(s({},e),{group:s(s({},e.group),t)})},effects:{*chooseGroupItem({data:e},{put:t,select:n}){const{currentGroup:r}=yield n((e=>e.strategy));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentGroup",data:e})))},*getGroup({sign:e,data:t=""},{put:n,select:r,call:i}){var a,o,c;const{currentGroup:u}=yield r((e=>e.strategy));if("init"===e||"refresh"===e){const[r,i]=yield Promise.all([ua("",1),ji("/api/n9e/alert-rule-groups/favorites",{method:Li.Get})]);if(r.success){const h=(null==(a=null==i?void 0:i.dat)?void 0:a.map((e=>l(s({},e),{isFavorite:!0,isBelongIn:$i.Favorite}))))||[],p=(null==(o=null==r?void 0:r.dat)?void 0:o.list.map((e=>l(s({},e),{isFavorite:!!h.find((t=>t.id===e.id)),isBelongIn:$i.Common}))))||[],d=(null==(c=null==r?void 0:r.dat)?void 0:c.total)||0;if(yield n({type:"saveStrategyGroupData",data:{favorite:h,common:p,commonTotal:d,currentPage:1}}),"init"===e&&t&&""!==t){const e=p.find((e=>e.id===Number(t)));yield n({type:"saveData",prop:"currentGroup",data:e})}else if(u){const e=p.find((e=>e.id===u.id));e?yield n({type:"saveData",prop:"currentGroup",data:e}):yield n({type:"saveData",prop:"currentGroup",data:p[0]})}else yield n({type:"saveData",prop:"currentGroup",data:p[0]})}}else if("search"===e){const{group:{favorite:e}}=yield r((e=>e.strategy)),{success:a,dat:o}=yield i(ua,t);if(a){const t=(null==o?void 0:o.total)||0,r=(null==o?void 0:o.list.map((t=>l(s({},t),{isFavorite:!!e.find((e=>e.id===t.id)),isBelongIn:$i.Common}))))||[];yield n({type:"saveStrategyGroupData",data:{common:r,commonTotal:t,currentPage:1}}),(u||u.id)&&e.find((e=>e.id===u.id))&&r.find((e=>e.id===u.id))||(yield n({type:"saveData",prop:"currentGroup",data:r[0]}))}}else if("append"===e){const{group:{common:e,favorite:t,currentPage:a}}=yield r((e=>e.strategy)),{success:o,dat:c}=yield i(ua,"",a+1);if(o){const r=(null==c?void 0:c.total)||0,i=(null==c?void 0:c.list.map((e=>l(s({},e),{isFavorite:!!t.find((t=>t.id===e.id)),isBelongIn:$i.Common}))))||[];yield n({type:"saveStrategyGroupData",data:{common:e.concat(i),commonTotal:r,currentPage:a+1}})}}},*changeGroupFavorite({id:e,favorType:t},{put:n,call:r}){const i=t===Di.Add?fa:ma,{success:a}=yield r(i,e);a&&(yield n({type:"getGroup",sign:"refresh"}))},*deleteGroup({id:e},{call:t,put:n}){const{success:r}=yield t(ha,e);r&&(yield n({type:"getGroup",sign:"refresh"}))},*updateGroup({id:e,data:t},{call:n,put:r}){const{success:i}=yield n(pa,e,t);i&&(yield r({type:"getGroup",sign:"refresh"}))}}},sce={namespace:"shield",state:{curShieldData:{}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*setCurShieldData({data:e},{put:t}){const n=e.tags.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));yield t({type:"saveData",prop:"curShieldData",data:l(s({},e),{tags:n})})}}},lce={namespace:"event",state:{currentEdit:null,alertings:{},severity:void 0,hourRange:{num:6,unit:"hours",description:"hours"},queryContent:"",hisSeverity:void 0,hisEventType:void 0,hisHourRange:{num:6,unit:"hours",description:"hours"},hisQueryContent:""},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*editItem({data:e},{put:t,select:n}){const{currentEdit:r}=yield n((e=>e.event));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentEdit",data:e})))},*refreshAlertings({ids:e},{put:t,call:n}){const{dat:r}=yield n(xa,e);yield t({type:"saveData",prop:"alertings",data:r})}}},cce=Ni();for(let ace of cce)ace.module&&Hle.addModel(ace.module);Hle.addModel(jle),Hle.addModel(tce),Hle.addModel(ice),Hle.addModel(oce),Hle.addModel(sce),Hle.addModel(lce),Hle.start();var uce=Hle.store;class hce extends f.exports.Component{constructor(e){super(e),u(this,"componentDidMount",(()=>{this.fetchData(),document.title="任务输出",document.body.style.backgroundColor="#fff",document.body.style.color="#000"})),u(this,"componentWillMount",(()=>{document.body.style.backgroundColor="#f0f2f5",document.body.style.color="rgba(0, 0, 0, 0.65)"})),this.state={loading:!1,data:[]}}fetchData(){const e=_.get(this.props,"match.params.busiId"),t=_.get(this.props,"match.params.taskId"),n=_.get(this.props,"match.params.outputType");void 0!==t&&void 0!==n&&(this.setState({loading:!0}),ji(`${yie.task(e)}/${t}/${n}`).then((e=>{this.setState({data:e.dat})})).finally((()=>{this.setState({loading:!1})})))}getOutput(){const e=_.get(this.props,"match.params.outputType"),{data:t}=this.state;let n="";return _.each(t,(t=>{n+=`${t.host}\n`,n+=`${t[e]}\n\n`})),n}render(){const{loading:e}=this.state,t=this.getOutput();return d.createElement(Qt,{spinning:e},d.createElement("pre",{style:{fontSize:12,padding:10,height:"100vh"}},t))}}class pce extends f.exports.Component{constructor(e){super(e),u(this,"componentDidMount",(()=>{this.fetchData(),document.title="任务输出",document.body.style.backgroundColor="#fff",document.body.style.color="#000"})),u(this,"componentWillMount",(()=>{document.body.style.backgroundColor="#f0f2f5",document.body.style.color="rgba(0, 0, 0, 0.65)"})),this.state={loading:!1,data:""}}fetchData(){const e=_.get(this.props,"match.params.busiId"),t=_.get(this.props,"match.params.taskId"),n=_.get(this.props,"match.params.host"),r=_.get(this.props,"match.params.outputType");void 0!==t&&void 0!==n&&(this.setState({loading:!0}),ji(`${yie.task(e)}/${t}/host/${n}/${r}`).then((e=>{this.setState({data:e.dat})})).finally((()=>{this.setState({loading:!1})})))}getOutput(){const e=_.get(this.props,"match.params.host"),{data:t}=this.state;let n="";return n+=`${e}\n`,n+=`${t}\n\n`,n}render(){const{loading:e}=this.state,t=this.getOutput();return d.createElement(Qt,{spinning:e},d.createElement("pre",{style:{fontSize:12,padding:10,height:"100vh"}},t))}}function dce(){const{t:e,i18n:t}=Ur();return d.createElement("div",{className:"App"},d.createElement(Rt,{locale:"en"==t.language?rs:Wo},d.createElement(ei,{store:uce},d.createElement(U,null,d.createElement(st,null,d.createElement(lt,{exact:!0,path:"/job-task/:busiId/output/:taskId/:outputType",component:hce}),d.createElement(lt,{exact:!0,path:"/job-task/:busiId/output/:taskId/:host/:outputType",component:pce}),d.createElement(d.Fragment,null,d.createElement(Ki,null),d.createElement(Loe,null)))))))}Y.render(d.createElement(dce,null),document.getElementById("root"));
//# sourceMappingURL=index.47a1bcdc.js.map
