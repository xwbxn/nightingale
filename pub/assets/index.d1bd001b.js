var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&o(e,n,t[n]);return e},l=(e,r)=>t(e,n(r)),c=(e,t)=>{var n={};for(var o in e)i.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&r)for(var o of r(e))t.indexOf(o)<0&&a.call(e,o)&&(n[o]=e[o]);return n},u=(e,t,n)=>(o(e,"symbol"!=typeof t?t+"":t,n),n);import{W as h,J as p,R as d,H as f,aD as m,aT as g,aU as v,aV as y,aW as x,aX as E,aY as b,aZ as C,a_ as T,a$ as w,b0 as S,b1 as k,b2 as _,an as A,b3 as O,ah as I,ag as M,am as N,ak as F,b4 as L,Z as P,a7 as R,b5 as D,b6 as B,aS as z,aH as H,a6 as j,a8 as G,b7 as $,b8 as Y,b9 as U,ba as V,bb as W,bc as X,N as q,bd as K,a2 as Q,be as Z,bf as J,bg as ee,bh as te,bi as ne,bj as re,bk as ie,bl as ae,bm as oe,bn as se,bo as le,bp as ce,bq as ue,br as he,bs as pe,bt as de,bu as fe,bv as me,bw as ge,bx as ve,by as ye,bz as xe,bA as Ee,bB as be,bC as Ce,as as Te,bD as we,bE as Se,ao as ke,aR as _e,aO as Ae,c as Oe,i as Ie,d as Me,a5 as Ne,bF as Fe,bG as Le,bH as Pe,bI as Re,aM as De,bJ as Be,az as ze,bK as He,a9 as je,bL as Ge,bM as $e,bN as Ye,a4 as Ue,bO as Ve,bP as We,bQ as Xe,bR as qe,bS as Ke,bT as Qe,bU as Ze,bV as Je,bW as et,bX as tt,bY as nt,bZ as rt,b_ as it,b$ as at,L as ot,P as st,c0 as lt,c1 as ct}from"./vendor.5128a56b.js";import{_ as ut,a as ht,b as pt,c as dt,d as ft,e as mt,f as gt,g as vt,M as yt,B as xt,R as Et,F as bt,I as Ct,T as Tt,D as wt,C as St,h as kt,i as _t,j as At,k as Ot,l as It,S as Mt,m as Nt,n as Ft,o as Lt,p as Pt,q as Rt,r as Dt,s as Bt,t as zt,A as Ht,u as jt,P as Gt,v as $t,w as Yt,L as Ut,x as Vt,y as Wt,z as Xt,E as qt,G as Kt,H as Qt,J as Zt,K as Jt,N as en}from"./antdChunk.808fb297.js";import{D as tn,r as nn,E as rn,H as an,t as on,P as sn,a as ln,h as cn,b as un,i as hn,c as pn,d as dn,e as fn,f as mn,k as gn,g as vn,j as yn,l as xn,m as En,n as bn,o as Cn,p as Tn,q as wn,s as Sn,u as kn,_ as _n,v as An,w as On,x as In,y as Mn}from"./vendor1.8aed1692.js";import{_ as Nn}from"./vendor2.1b1f6be4.js";var Fn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return P_},get Circle(){return R_},get Ellipse(){return B_},get Image(){return H_},get Line(){return G_},get Marker(){return Y_},get Path(){return J_},get Polygon(){return tA},get Polyline(){return nA},get Rect(){return rA},get Text(){return iA}}),Ln=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return EA},get Circle(){return bA},get Dom(){return CA},get Ellipse(){return TA},get Image(){return wA},get Line(){return SA},get Marker(){return AA},get Path(){return OA},get Polygon(){return IA},get Polyline(){return MA},get Rect(){return NA},get Text(){return RA}});function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}var Rn={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Dn=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pt(this,e),this.init(t,n)}return ut(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Rn,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,Pn({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),Bn=function(){function e(){pt(this,e),this.observers={}}return ut(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var i=[].concat(this.observers[e]);i.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function zn(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Hn(e){return null==e?"":""+e}function jn(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function Gn(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var a="string"!=typeof t?[].concat(t):t.split(".");a.length>1;){if(i())return{};var o=r(a.shift());!e[o]&&n&&(e[o]=new n),e=Object.prototype.hasOwnProperty.call(e,o)?e[o]:{}}return i()?{}:{obj:e,k:r(a.shift())}}function $n(e,t,n){var r=Gn(e,t,Object);r.obj[r.k]=n}function Yn(e,t){var n=Gn(e,t),r=n.obj,i=n.k;if(r)return r[i]}function Un(e,t,n){var r=Yn(e,n);return void 0!==r?r:Yn(t,n)}function Vn(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):Vn(e[r],t[r],n):e[r]=t[r]);return e}function Wn(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Xn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function qn(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return Xn[e]})):e}var Kn="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function Qn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,a=0;a<r.length;++a){if("string"==typeof i[r[a]]&&a+1<r.length)return;if(void 0===i[r[a]]){for(var o=2,s=r.slice(a,a+o).join(n),l=i[s];void 0===l&&r.length>a+o;)o++,l=i[s=r.slice(a,a+o).join(n)];if(void 0===l)return;if("string"==typeof l)return l;if(s&&"string"==typeof l[s])return l[s];var c=r.slice(a+o).join(n);return c?Qn(l,c,n):void 0}i=i[r[a]]}return i}}var Zn=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return pt(this,t),n=dt(this,ft(t).call(this)),Kn&&Bn.call(mt(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return ht(t,Bn),ut(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,o=[e,t];n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split("."));var s=Yn(this.data,o);return s||!a||"string"!=typeof n?s:Qn(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(r=t,t=(o=e.split("."))[1]),this.addNamespaces(t),$n(this.data,o,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(o=e.split("."))[1]),this.addNamespaces(t);var s=Yn(this.data,o)||{};r?Vn(s,n,i):s=Pn({},s,n),$n(this.data,o,s),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Pn({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(),Jn={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var a=this;return e.forEach((function(e){a.processors[e]&&(t=a.processors[e].process(t,n,r,i))})),t}},er={},tr=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pt(this,t),n=dt(this,ft(t).call(this)),Kn&&Bn.call(mt(n)),jn(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,mt(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=Dn.create("translator"),n}return ht(t,Bn),ut(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:i};var o=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),e=o.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,r){var i=this;if("object"!==p(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,o=this.extractFromKey(e[e.length-1],n),s=o.key,l=o.namespaces,c=l[l.length-1],u=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(h){var d=n.nsSeparator||this.options.nsSeparator;return c+d+s}return s}var f=this.resolve(e,n),m=f&&f.res,g=f&&f.usedKey||s,v=f&&f.exactUsedKey||s,y=Object.prototype.toString.apply(m),x=["[object Number]","[object Function]","[object RegExp]"],E=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,C="string"!=typeof m&&"boolean"!=typeof m&&"number"!=typeof m;if(b&&m&&C&&x.indexOf(y)<0&&("string"!=typeof E||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,m,Pn({},n,{ns:l})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(a){var T="[object Array]"===y,w=T?[]:{},S=T?v:g;for(var k in m)if(Object.prototype.hasOwnProperty.call(m,k)){var _="".concat(S).concat(a).concat(k);w[k]=this.translate(_,Pn({},n,{joinArrays:!1,ns:l})),w[k]===_&&(w[k]=m[k])}m=w}}else if(b&&"string"==typeof E&&"[object Array]"===y)(m=m.join(E))&&(m=this.extendTranslation(m,e,n,r));else{var A=!1,O=!1,I=void 0!==n.count&&"string"!=typeof n.count,M=t.hasDefaultValue(n),N=I?this.pluralResolver.getSuffix(u,n.count):"",F=n["defaultValue".concat(N)]||n.defaultValue;!this.isValidLookup(m)&&M&&(A=!0,m=F),this.isValidLookup(m)||(O=!0,m=s);var L=M&&F!==m&&this.options.updateMissing;if(O||A||L){if(this.logger.log(L?"updateKey":"missingKey",u,c,s,L?F:m),a){var P=this.resolve(s,Pn({},n,{keySeparator:!1}));P&&P.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var R=[],D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&D&&D[0])for(var B=0;B<D.length;B++)R.push(D[B]);else"all"===this.options.saveMissingTo?R=this.languageUtils.toResolveHierarchy(n.lng||this.language):R.push(n.lng||this.language);var z=function(e,t,r){i.options.missingKeyHandler?i.options.missingKeyHandler(e,c,t,L?r:m,L,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,c,t,L?r:m,L,n),i.emit("missingKey",e,c,t,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?R.forEach((function(e){i.pluralResolver.getSuffixes(e).forEach((function(t){z([e],s+t,n["defaultValue".concat(t)]||F)}))})):z(R,s,F))}m=this.extendTranslation(m,e,n,f,r),O&&m===s&&this.options.appendNamespaceToMissingKey&&(m="".concat(c,":").concat(s)),O&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(m))}return m}},{key:"extendTranslation",value:function(e,t,n,r,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Pn({},n,{interpolation:Pn({},this.options.interpolation,n.interpolation)}));var o,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var l=e.match(this.interpolator.nestingRegexp);o=l&&l.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=Pn({},this.options.interpolation.defaultVariables,c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),s){var u=e.match(this.interpolator.nestingRegexp);o<(u&&u.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i&&i[0]===r[0]&&!n.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):a.translate.apply(a,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var h=n.postProcess||this.options.postProcess,p="string"==typeof h?[h]:h;return null!=e&&p&&p.length&&!1!==n.applyPostProcessor&&(e=Jn.handle(p,e,t,this.options&&this.options.postProcessPassResolved?Pn({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,a,o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!o.isValidLookup(t)){var l=o.extractFromKey(e,s),c=l.key;n=c;var u=l.namespaces;o.options.fallbackNS&&(u=u.concat(o.options.fallbackNS));var h=void 0!==s.count&&"string"!=typeof s.count,p=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,d=s.lngs?s.lngs:o.languageUtils.toResolveHierarchy(s.lng||o.language,s.fallbackLng);u.forEach((function(e){o.isValidLookup(t)||(a=e,!er["".concat(d[0],"-").concat(e)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(a)&&(er["".concat(d[0],"-").concat(e)]=!0,o.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(n){if(!o.isValidLookup(t)){i=n;var a,l,u=c,d=[u];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(d,c,n,e,s);else h&&(a=o.pluralResolver.getSuffix(n,s.count)),h&&p&&d.push(u+a),p&&d.push(u+="".concat(o.options.contextSeparator).concat(s.context)),h&&d.push(u+=a);for(;l=d.pop();)o.isValidLookup(t)||(r=l,t=o.getResource(n,e,l,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:a}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}();function nr(e){return e.charAt(0).toUpperCase()+e.slice(1)}var rr=function(){function e(t){pt(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Dn.create("languageUtils")}return ut(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=nr(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=nr(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=nr(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],a=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):"string"==typeof e&&a(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&a(n.formatLanguageCode(e))})),i}}]),e}(),ir=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ar={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function or(){var e={};return ir.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:ar[t.fc]}}))})),e}var sr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pt(this,e),this.languageUtils=t,this.options=n,this.logger=Dn.create("pluralResolver"),this.rules=or()}return ut(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var i=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),a=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===a?a="plural":1===a&&(a=""));var o=function(){return n.options.prepend&&a.toString()?n.options.prepend+a.toString():a.toString()};return"v1"===this.options.compatibilityJSON?1===a?"":"number"==typeof a?"_plural_".concat(a.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),lr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pt(this,e),this.logger=Dn.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return ut(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:qn,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Wn(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Wn(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Wn(t.nestingPrefix):t.nestingPrefixEscaped||Wn("$t("),this.nestingSuffix=t.nestingSuffix?Wn(t.nestingSuffix):t.nestingSuffixEscaped||Wn(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,a,o,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(s.formatSeparator)<0){var i=Un(t,l,e);return s.alwaysFormat?s.format(i,void 0,n,Pn({},r,t,{interpolationkey:e})):i}var a=e.split(s.formatSeparator),o=a.shift().trim(),c=a.join(s.formatSeparator).trim();return s.format(Un(t,l,o),c,n,Pn({},r,t,{interpolationkey:o}))};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?c(s.escape(e)):c(e)}}].forEach((function(t){for(o=0;i=t.regex.exec(e);){if(void 0===(a=u(i[1].trim())))if("function"==typeof h){var n=h(e,i,r);a="string"==typeof n?n:""}else{if(p){a=i[0];continue}s.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),a=""}else"string"==typeof a||s.useRawValueToEscape||(a=Hn(a));var l=t.safeValue(a);if(e=e.replace(i[0],l),p?(t.regex.lastIndex+=l.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++o>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Pn({},a);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,o)).replace(/'/g,'"');try{o=JSON.parse(i),t&&(o=Pn({},t,o))}catch(rh){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),rh),"".concat(e).concat(n).concat(i)}return delete o.defaultValue,e}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=u.shift(),l=u,c=!0}if((r=t(s.call(this,n[1].trim(),o),o))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=Hn(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),c&&(r=l.reduce((function(e,t){return i.format(e,t,a.lng,Pn({},a,{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var cr=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return pt(this,t),i=dt(this,ft(t).call(this)),Kn&&Bn.call(mt(i)),i.backend=e,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=a,i.logger=Dn.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,a.backend,a),i}return ht(t,Bn),ut(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,a=[],o=[],s=[],l=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?o.indexOf(s)<0&&o.push(s):(i.state[s]=1,r=!1,o.indexOf(s)<0&&o.push(s),a.indexOf(s)<0&&a.push(s),l.indexOf(t)<0&&l.push(t)))})),r||s.push(e)})),(a.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:r}),{toLoad:a,pending:o,toLoadLanguages:s,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],a=r[1];t&&this.emit("failedLoading",i,a,t),n&&this.store.addResourceBundle(i,a,n),this.state[e]=t?-1:2;var o={};this.queue.forEach((function(n){var r,s,l,c,u,h;r=n.loaded,s=a,c=Gn(r,[i],Object),u=c.obj,h=c.k,u[h]=u[h]||[],l&&(u[h]=u[h].concat(s)),l||u[h].push(s),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){o[e]||(o[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){o[e].indexOf(t)<0&&o[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,l){s&&l&&i<5?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*a,o)}),a):o(s,l)})):o(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var a=this.queueLoad(e,t,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(function(r,o){r&&t.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(i," failed"),r),!r&&o&&t.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(i),o),t.loaded(e,r,o)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,Pn({},a,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}();function ur(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===p(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===p(e[2])||"object"===p(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function hr(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function pr(){}var dr=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(pt(this,t),e=dt(this,ft(t).call(this)),Kn&&Bn.call(mt(e)),e.options=hr(n),e.services={},e.logger=Dn,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),dt(e,mt(e));setTimeout((function(){e.init(n,r)}),0)}return e}return ht(t,Bn),ut(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=Pn({},ur(),this.options,hr(t)),this.format=this.options.interpolation.format,n||(n=pr),!this.options.isClone){this.modules.logger?Dn.init(r(this.modules.logger),this.options):Dn.init(null,this.options);var i=new rr(this.options);this.store=new Zn(this.options.resources,this.options);var a=this.services;a.logger=Dn,a.resourceStore=this.store,a.languageUtils=i,a.pluralResolver=new sr(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new lr(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new cr(r(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(a.languageDetector=r(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=r(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new tr(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var o=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);o.length>0&&"dev"!==o[0]&&(this.options.lng=o[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var c=zn(),u=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pr,r=n,i="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var a=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){a.indexOf(e)<0&&a.push(e)}))};if(i)o(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return o(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(a,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=zn();return e||(e=this.languages),t||(t=this.options.ns),n||(n=pr),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Jn.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=zn();this.emit("languageChanging",e);var i=function(i){e||i||!n.services.languageDetector||(i=[]);var a="string"==typeof i?i:n.services.languageUtils.getBestMatchFromCodes(i);a&&(n.language||(n.language=a,n.languages=n.services.languageUtils.toResolveHierarchy(a)),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(e){!function(e,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,a)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var i;if("object"!==p(r)){for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];i=n.options.overloadTranslationOptionHandler([t,r].concat(o))}else i=Pn({},r);return i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns,n.t(t,i)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],i=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,o);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!o(r,e)||i&&!o(a,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=zn();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=zn();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pr,i=Pn({},this.options,n,{isClone:!0}),a=new t(i),o=["store","services","language"];return o.forEach((function(t){a[t]=e[t]})),a.services=Pn({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new tr(a.services,a.options),a.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e].concat(n))})),a.init(i,r),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),t}());function fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){fr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yr,xr={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},Er=d.createContext();function br(){return xr}var Cr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.usedNamespaces={}}var t,n,r;return t=e,(n=[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}])&&mr(t.prototype,n),r&&mr(t,r),e}();function Tr(){return yr}var wr={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xr=vr(vr({},xr),e)}(e.options.react),function(e){yr=e}(e)}};function Sr(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var kr={};function _r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&kr[t[0]]||("string"==typeof t[0]&&(kr[t[0]]=new Date),Sr.apply(void 0,t))}function Ar(e,t,n){e.loadNamespaces(t,(function(){if(e.isInitialized)n();else{e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),n()}))}}))}function Or(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.languages||!t.languages.length)return _r("i18n.languages were undefined or empty",t.languages),!0;var r=t.languages[0],i=!!t.options&&t.options.fallbackLng,a=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!o(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||(!t.services.backendConnector.backend||!(!o(r,e)||i&&!o(a,e))))}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ir(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach((function(t){fr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.i18n,r=f.exports.useContext(Er)||{},i=r.i18n,a=r.defaultNS,o=n||i||Tr();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Cr),!o){_r("You will need to pass in an i18next instance by using initReactI18next");var s=function(e){return Array.isArray(e)?e[e.length-1]:e},l=[s,{},!1];return l.t=s,l.i18n={},l.ready=!1,l}o.options.react&&void 0!==o.options.react.wait&&_r("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var c=Fr(Fr(Fr({},br()),o.options.react),t),u=c.useSuspense,h=e||a||o.options&&o.options.defaultNS;h="string"==typeof h?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(h);var p=(o.isInitialized||o.initializedStoreOnce)&&h.every((function(e){return Or(e,o,c)}));function d(){return o.getFixedT(null,"fallback"===c.nsMode?h:h[0])}var m=f.exports.useState(d),g=Mr(m,2),v=g[0],y=g[1],x=f.exports.useRef(!0);f.exports.useEffect((function(){var e=c.bindI18n,t=c.bindI18nStore;function n(){x.current&&y(d)}return x.current=!0,p||u||Ar(o,h,(function(){x.current&&y(d)})),e&&o&&o.on(e,n),t&&o&&o.store.on(t,n),function(){x.current=!1,e&&o&&e.split(" ").forEach((function(e){return o.off(e,n)})),t&&o&&t.split(" ").forEach((function(e){return o.store.off(e,n)}))}}),[o,h.join()]);var E=f.exports.useRef(!0);f.exports.useEffect((function(){x.current&&!E.current&&y(d),E.current=!1}),[o]);var b=[v,o,p];if(b.t=v,b.i18n=o,b.ready=p,p)return b;if(!p&&!u)return b;throw new Promise((function(e){Ar(o,h,(function(){e()}))}))}const Pr={en:{translation:{classpath:{single:"Classpath"},strategy:{create:"New",single:"Alert Rule",multiple:"Alert Rules"},personalInfo:"Profile",n9e:"DiDi Nightingale","输入有误":"Incorrect input","修改密码成功":"Changed the password successfully","旧密码":"Old password","请输入旧密码":"Enter the old password","新密码":"New password","请输入新密码":"Enter a new password","再次输入新密码":"Enter a new password again","确认修改":"Update","自定义头像需以http开头":"The custom portrait needs to start at http","自定义头像":"Custom portrait","信息保存成功":"Saved successfully","用户名":"Username","显示名":"Display name","请输入显示名":"Enter a display name","邮箱":"Email","请输入邮箱":"Enter email","手机":"Mobile","请输入手机号":"Enter mobile number","请输入":"Enter ","更多联系方式":"More contacts","联系方式不能为空":"Contact information can not be blank","请选择联系方式":"Select contact","值不能为空":"Value can not be blank","请输入值":"Enter value","更换头像":"Change portrait","头像URL":"Portrait URL","个人中心":"Personal Center","个人信息":"Setting","修改密码":"Change password","秘钥管理":"Token management","Token更新成功":"Token updated successfully","Token创建成功":"Token created successfully","操作":"Action","重新生成":"Regenerate","生成":"Generate","该分享链接无图表数据":"The shared link has no graph data.","任意标签/资源分组":"Any Label / Classpath","必须要有一个变量名":"Var name required","变量名重复":"Duplicate variable name","变量名包含非法字符":"The variable name contains illegal characters","资源分组路径含有非法字符":"The Classpath contains illegal characters","变量名":"Variable name","标签或资源分组":"Label or Classpath","默认值":"Default value","添加大盘变量":"Add dashboard variables","添加变量":"Add variable","完成":"Finish","新建图表":"New chart","标题":"Title","图表名称":"Name required","配置方式":"Mode","指标":"Metrics","请选择指标":"Select metrics","请输入监控指标(输入4个以上字符发起检索)":"Enter a metric(search after 4 char)","资源分组":"Classpaths","请选择资源分组":"Select classpath","前缀匹配":"Prefix","请输入Promql":"Enter PromQL","阈值":"Threshold","下钻链接":"Drill URL","列":" Column","新增图表":"New Chart","一键规整":"Arrange","修改":"Edit","上移":"Move up","下移":"Move down","是否删除分类":"Delete group","删除":"Delete","编辑图表":"Edit Chart","是否删除图表":"Delete the chart","删除图表":"Delete","删除分组成功":"Group deleted successfully","新增图表分组":"New Chart Group","新建分组":"New Chart Group","更新分组名称":"Edit group name","分组名称":"Name","请输入名称":"Please enter the name","克隆大盘成功":"Cloned successfully","新建大盘成功":"Created successfully","大盘名称":"Name","分类标签":"Tags","更新时间":"Update Time","发布人":"Publisher","克隆":"Clone","是否删除大盘":"Sure to delete the dashboard?","删除大盘成功":"Deleted successfully","导入":"Import","未选择任何大盘":"No dashboard chosen","导出":"Export","监控大盘":"Dashboards","新建大盘":"New Dashboard","导入内置大盘":"Import built-in dashboard","更多操作":"More","克隆监控大盘":"Clone dashboard","创建新监控大盘":"New Dashboard","请输入大盘名称":"Enter dashboard name","大盘":"Dashboard","时间":"Time","值":"Value","告警详情":"Event Detail","策略名称:":"Rule name","通知结果":"Notice","已触发":"Triggered","已屏蔽":"Muted","表达式":"Expression","级别":"Level","策略名称":"Rule name","标签":"Tags","通知":"Notification","状态":"Status","发生时间":"When","屏蔽":"Mute","是否忽略告警?":"Sure to ignore the event?","忽略":"Ignore","未恢复告警事件":"Triggered Events","策略名称、标签、资源分组":"Rule name, tag, classpath","告警级别":"Level","告警状态":"Status","是否批量忽略告警?":"Sure to ignore the events?","已忽略告警":"Ignored successfully","批量忽略":"Batch Ignore","滴滴夜莺":"N9E","请输入用户名":"Enter a username","请输入密码":"Enter a password","登录":"Sign in","已选择":"Selected ","项":"","用户名、邮箱或电话":"User name, email or phone number","用户创建成功":"User created successfully","用户信息修改成功":"User Modified","团队创建成功":"Team created successfully","团队信息修改成功":"Team updated successfully","密码重置成功":"Password reset successfully","添加成功":"Added successfully","取消":"Cancel","确认":"Confirm","确认并搜索":"Confirm and search","用户删除成功":"User deleted successfully","团队删除成功":"Team deleted successfully","创建团队":"New Team","成员删除成功":"Deleted member successfully","确定":"OK","确定要删除么？":"Sure to delete it?","密码":"Password","请输入密码!":"Please enter the password!","确认密码":"Confirm password","请确认密码!":"Please confirm the password!","团队名称":"Team Name","团队名称不能为空！":"Team name can not be blank!","备注":"Remark","管理员":"Administrator","普通用户":"Ordinary users","游客":"Visitors","用户名不能为空！":"User name can not be blank!","角色":"Role","角色不能为空！":"Role is required","启用":"Enable","编辑":"Edit","重置密码":"Reset Password","是否删除该用户":"Sure to delete the user?","是否删除该成员":"Sure to delete the member?","禁用成功":"Disabled successfully","启用成功":"Enabled successfully","用户管理":"Users","用户名、邮箱或手机":"User name, email or mobile phone","创建":"Create","创建并关闭":"Create and close","创建用户":"Create User","团队管理":"Team Management","搜索团队名称":"Team name","是否删除该团队":"Sure to delete the team?","成员名、邮箱或手机":"Name, email or mobile","添加成员":"Add Member","选择监控指标添加图表":"Select the metric to add the chart","即时看图":"Explorer","监控指标":"Metric","筛选标签":"Tags","配置":"Configuration","每张图最多展示":"Maximum","条线":"lines per chart","重置":"Reset","分享图表":"Share","资源标识":"Resource ID","资源名称":"Name","资源信息或标签":"Resource information or labels","请选择标签":"Select a tag","删除指标成功":"Deleted successfully","创建指标成功":"Created successfully","请勾选需要导出的指标":"Please check the metrics you need to export","编辑成功":"Edit successfully","指标名称":"Metric","释义":"Description","确定删除该指标?":"Sure to delete this metric?","保存":"Save","指标释义":"Summary","指标名称或释义":"Search","不能为空":"Cannot be blank","已发送":"Sent","近":"Near","day-events":"Day Events","天未恢复的":"Days Events","进入事件管理":"Go to events page","一分钟自动刷新":"One minute refresh","指标TOP":"Metric TOP","个":"","资源总量":"Resources","策略总量":"Rules","大盘总量":"Dashboards","用户总量":"Users","团队总量":"Teams","统计数据":"Statistics","导入规则":"Import Rules","导出规则":"Export rules","请输入导入信息":"Please input import json","是否确定删除资源分组?":"Sure to delete classpath?","分组名称前缀匹配(聚合展示所有相关分组的内容)":"Prefix matching (aggregation displays all relevant grouping content)","count(对符合规则的日志进行计数)":"count(count the matching lines)","histogram(对符合规则的日志抓取出的数字计算统计值)":"histogram","秒":"s","不符合输入规范（格式为key=value）":"format should be 'key=value'","资源":"Resources","看图":"Explorer","端口":"Port","进程":"Process","插件":"Plugin","日志":"Log","端口号":"Port","进程标识":"Process identification","日志路径":"Log path","采集名称":"Collect rule","采集频率":"Step","修改人":"Modifier","修改时间":"Last update","是否删除该采集策略?":"Sure to delete this collection rule?","是否删除该告警规则?":"Sure to delete this alert rule?","删除成功":"Deleted successfully","挂载资源":"Bind Resources","请输入资源标识":"Input resource identifications, one resource per line","请输入资源标识，每行一个":"Input resource identifications, one resource per line","新建资源分组":"New","编辑资源分组":"Edit classpath","刷新":"Refresh","资源分组路径":"Classpath","资源分组路径必填":"Classpath cannot be blank","请填写资源分组路径":"Input classpath","资源分组备注":"Remark","创建进程采集":"New collection","进程采集详情":"Collection rule(Process)","更新":"Update","采集规则成功":" collection rule successfully","进程监控指标":"Metric","所属资源分组":"Classpath","资源分组必填":"Classpath is required","采集名称必填":"Rule name required","请输入采集配置的名称":"Please enter rule name","采集方式":"Method","采集方式必填":"Collection mode is required","命令行":"cmdline","进程名":"name","该项必填":"Required","取 /proc/$pid/cmdline 中的部分子串，可以唯一标识进程即可":"Take some substrings from /proc/$pid/cmdline to uniquely identify the process","取  /proc/$pid/status 中 name 的值":"Take the value of name in /proc/$pid/status","采集频率必填":"Step required","附加标签":"Append tags","格式为key=value回车分隔":"The format is key=value, use Enter to separate","创建端口采集":"New collection","端口采集详情":"Collection rule(Port)","端口监控指标":"Metric","端口协议":"Port Protocol","端口协议必填":"Port protocol required","端口号必填":"Port required","请输入端口号":"Enter port","连接超时":"Connection timeout","连接超时必填":"Connection timeout required","创建插件采集":"New Collection","插件采集详情":"Collection rule(Plugin)","插件采集成功":" collection successfully ","插件路径":"Plugin filepath","插件路径必填":"Plugin filepath required","参数":"Parameters","请输入参数":"Enter parameters","环境变量":"Env variables","变量":"Variable","标准输入(Stdin)":"Standard input (Stdin)","创建日志采集":"New collection","日志采集详情":"Collection rule(Log)","指标名称必填":"Metric required","计算方法":"Calculation method","计算方法必填":"Calculation method required","日志路径必填":"Log path required","匹配正则":"Main regexp","匹配正则必填":"Main regexp required","请输入正则表达式匹配日志关键字，histogram会提取第一个括号内的值":"Enter regexp to match logs, histogram will use first substring value","耗时计算：中的数值会用于计算曲线值流量计数：每匹配到该正则，曲线值+1":"Time-consuming calculation: the values in the calculation are used to calculate the number of curved-value flowmeters: for each match to the regular, the curves are + 1","tagName 填写说明\\r\\n\n              1. 不允许包含host、trigger、include\n              2. 不允许包含如下4个特殊字符\n              tagValue 填写说明\n              1.必须包含括号。括号中的正则内容被用作tagValue的取值，必须可枚举。\n              2.不允许包含如下4个特殊字符=,:@":"TagName  Fill in the instructions \n              1.  No host, no, no, no, no. \n              2.  Not allowed to include the following 4 special characters \n              tagValue  Fill in instructions \n              1. Must contain parentheses. The regular content in parentheses is used as a value for tagValue, and must be enumerated. \n              2. The following 4 special characters are not allowed =,: @","验证":"Verify","请输入一行待监控的完整日志":"Enter a full line of logs to be monitored","通过":"Success","失败":"Failure","屏蔽时间":"Mute time","选择时间":"Choose times","克隆到其他资源分组":"Cloning to other classpath","选择资源分组":"Select classpaths","克隆成功":"Cloned successfully","分组不可为空":"Group can not be blank","是否确认永久删除资源":"Sure to delete the resource ?","无":"None","资源详情":"Basic Information","请选择所属资源分组":"Select the classpaths","彻底删除资源":"Delete","两种情况会有彻底删除资源的需求":"There are two cases to delete resources","资源对应的设备已经下线了，永远都不会有新的监控数据上报了":"The resource has been offline","资源的ident(唯一标识)发生变化，老的ident需要手工清理掉":"The ident of the resource changes","未选择任何规则":"No rules chosen","是否批量删除规则?":"Sure to delete the rules?","组件采集信息":"Component Collection","端口信息":"Port","复制已选项":"Copied successfully","复制":"Copied ","条数据到剪贴板":" records","请先选择资源标识":"Select the resource logo first","是否移除该资源?":"Remove this resource from the classpath?","移除":"Unbind","您未选用任何资源":"No resources chosen","资源管理":"Resources","周期内所有点":"all","在统计周期 $n 秒内（初次上报的指标，统计周期内只有一个值，如要限制点数，可选择happen函数）每个值都 $v":"All the values $v in $n seconds (To limit the number of points, use the happen function)","发生次数":"happen","统计周期 $n 秒内至少有 $m 次值 $v":"There are at least $m times in $n seconds with the value $v","最大值":"max","统计周期 $n 秒内的最大值 $v":"The maximum value $v in $n seconds","最小值":"min","统计周期 $n 秒内的最小值 $v":"The minimum value $v in $n seconds","均值":"avg","统计周期 $n 秒内的均值 $v":"The average value $v in $n seconds","求和":"sum","统计周期 $n 秒内的所有值求和 $v":"The sum value $v in $n seconds","突增突降值":"diff","最新值与其之前 $n 秒内的任意值之差 (区分正负) $v":"(the difference between the latest value and any previous value of $n seconds) divided by the corresponding historical value (positive and negative) $v %","突增突降率":"pdiff","(最新值与其之前 $n 秒的任意值之差)除以对应历史值 (区分正负) $v ％":"(Latest value before  $n  The difference between any value of the second (divided by the corresponding historical value)  (distinguishing between positive and negative)  $v  %","同比变化率":"c_avg_rate_abs","最近 $n 秒平均值相对 $m 天前同周期平均值变化率 $v ％":"The change rate of last $n seconds average relative to $m days average in the same period $v %","同比变化率(区分正负)":"c_avg_rate","同比变化值":"c_avg_abs","最近 $n 秒平均值相对 $m 天前同周期平均值变化值 $v":"The change value of last $n seconds average relative to $m days average in the same period $v","同比变化值(区分正负)":"c_avg","3-sigma离群点检测":"stddev","统计周期 $n 秒内波动值过大，超过了 $m 个标准差范围":"The statistical period fluctuates too much in $n seconds, exceeding $m standard deviation range","新建告警屏蔽":"New mute rule","告警屏蔽":"Mute Rules","请检查":"Please check ","中的空格":" space","新建告警屏蔽成功":"Mute rule created successfully","屏蔽指标":"Mute metric","请输入指标名称":"Input metric","请输入资源标识的正则表达式":"Input a regexp for the resource identification","屏蔽标签":"Mute tags","请输入屏蔽标签(请用回车分割)":"Input mute tags (use Enter to split)","屏蔽原因":"Mute Cause","请填写屏蔽原因":"Enter mute cause","屏蔽标识、资源标识、屏蔽标签、资源分组前缀不能同时为空":"The metric, ID, tags ,Prefix coult not be empty at the same time","暂无":"None","告警策略详情":"Alert Strategy Details","解除成功":"Removed successfully","开始:":"Start:","结束:":"End:","创建人":"Creator","确定解除该告警屏蔽?":"Sure to remove the mute rule?","解除":"Remove","屏蔽策略":"Mute Rules","指标名称、资源标识、标签、屏蔽原因":"Metric, resource id, tag, mute cause","是否确定删除该策略分组?":"Sure to delete the alert group?","名称":"Name","告警接收者":"Recipients","未选择任何采集策略":"No rules selected","是否批量删除告警规则?":"Sure to delete the alert rules?","请输入告警策略名称":"Search rule name","新建告警策略":"New alert rule","导入内置策略":"Import built-in rules","策略":" rules","请输入标签key":"Enter the tag key","请输入标签value":"Enter the tag value","预览":"Preview","请输入指标":"Enter metric","请输入百分比":"Enter percentages","新建策略分组":"New rule group","新建子节点":"New child node","编辑策略组":"Edit rule Group","策略组名称":"Name","策略组名称必填":"Group name required","请填写策略组名称":"Please enter group name","管理团队":"Manage teams","请选择团队":"Select teams","告警策略":"Alert Rules","请输入分钟数":"Enter minutes","秒（告警恢复后持续观察":"Seconds (continued observation after alarm recovery)","秒，未再触发阈值才发送恢复通知）":"Seconds, no more trigger threshold to send recovery notice)","保存成功":"Successfully saved","创建成功":"Created successfully","克隆失败":"Cloning failed","保存失败":"Unable to save","创建失败":"Failed to create","周一":"Monday","周二":"Tuesday","周三":"Wednesday","周四":"Thursday","周五":"Friday","周六":"Saturday","周日":"Sunday","基本配置":"Basic configuration","策略名称不能为空":"Rule name required","请输入策略名称":"Enter the rule name","一级报警":"Level 1","二级报警":"Level 2","三级报警":"Level 3","触发模式":"Trigger mode","统计周期":"Step","触发条件":"Condition","资源过滤":"Resource filter","标签过滤":"Tag filter","执行频率":"Exec interval","请输入Promeql":"Enter Promeql","请输入附加标签，格式为key=value":"Enter an additional tag in a key=value format","生效配置":"Enable configuration","立即启用":"Enable","是":"Yes","否":"No","生效时间":"Time","通知配置":"Notification configuration","静默恢复":"Silent recovery","不发送恢复通知":"Do not send a recovery notice","通知媒介":"Media","报警接收团队":"Notify teams","报警接收人":"Notify users","报警回调":"Callback","通知自己开发的系统（请确认是夜莺服务端可访问的地址）":"Notify your system (make sure n9e-server could access the address)","其他配置":"Other configuration","预案链接":"Runbook","监控看图":"Metrics","策略配置":"Monitors","未恢复告警":"Unrecovered","用户":"Users","团队":"Teams","团队列表":"Team list","新建团队":"New","退出":"Logout","收藏的":"Favorite ","分组":"","所有":"All ","一行一个":"One per line","策略分组":"Rule Groups","新建":"New ","请输入日志路径，支持*通配符":"Please enter logs filepath, support wildcards","1小时":"1 hour","2小时":"2 hours","6小时":"6 hours","12小时":"12 hours","1天":"1 day","2天":"2 days","7天":"1 week","14天":"2 weeks","30天":"30 days","90天":"90 days","永久":"forever","清除":"clear","预览图":"Preview Chart","批量删除":"Delete","修改告警接受者":"Update recipients","修改通知媒介":"Update medias","策略启用控制":"Update status","是否启停":"Enable","修改附加标签":"Update append tags","修改附加标签成功":"Update append tags successfully",append_tags:"Tags","请先选择策略":"Select some rules","不符合输入规范(格式为key=value)":" format should be 'key=value'","编辑用户信息":"Edit user","编辑团队信息":"Edit team","基本信息":"Basic info","预案手册":"Runbook","预警值":"Threshold","维护备注":"Update remark","维护标签":"Update tags","修改备注":"Update remark","修改标签":"Update tags","暂无数据":"None","告警历史":"All Events","全部告警":"All","全量告警历史":"History Alert Events","恢复":"Recovery","告警":"Alert","资源分组前缀":"Classpath Prefix","搜索资源分组前缀":"Search Classpath Prefix","key, value必填":"key,value required","key重复":"Duplicate key","自定义开始时间":"Cumson start time","自定义结束时间":"Cumson end time","最近":"Past ",minute:" minute",minutes:" minutes",hour:" hour",hours:" hours","周":" week","天":" day","月":" month","季度":" quarter","tpl.create":"Create","tpl.tag.bind":"Bind tags","tpl.tag.unbind":"Unbind tags","tpl.tag.bind.title":"Batch bind tags","tpl.tag.bind.success":"Successfully binded","tpl.tag.bind.field":"tags","tpl.tag.unbind.title":"Batch unbind tags","tpl.tag.unbind.field":"tags","tpl.tag.unbind.success":"Successfully unbinded","tpl.node.modify":"Modify node","tpl.node.modify.title":"Batch modify node","tpl.batch.modify.group":"Batch modify group","tpl.title":"Title","tpl.title.tpl.help":"Describe the role of the template","tpl.title.task.help":"Describe the role of the task","tpl.tags":"Tags","tpl.tags.help":"Used for classification","tpl.creator":"Creator","tpl.last_updator":"Last updator","tpl.last_updated":"Last updated","tpl.account.help":"Execute account, use root with caution","tpl.batch.help":"Concurrency, default is 0, indicating full concurrent execution, 1 means sequential execution, 2 means that each time two execute","tpl.tolerance.help":"Tolerate several machines failing, the default is 0, which means no tolerance, once failed, immediately suspend","tpl.timeout.help":"Timeout for stand-alone script execution, in seconds","tpl.pause.help":"Pause after completed, pause multiple hosts, write multiple hosts, separated by commas","tpl.host.help":"List of hosts to be executed","tpl.script.help":"Script content to be executed","tpl.args.help":"Parameters attached to the script, separated by double commas, such as arg1,,arg2,,arg3","tpl.modify":"Modify the template","tpl.create.task":"Create a new task","task.create":"Create task","task.title":"Title","task.done":"Done","task.clone":"Clone","task.meta":"Meta","task.creator":"Creator","task.created":"Created","task.only.mine":"Just mine","task.host":"Host","task.status":"Status","task.output":"Output","task.refresh":"Refresh","task.control.params":"Control params","task.account":"Account","task.batch":"Batch","task.tolerance":"Tolerance","task.timeout":"Timeout","task.script":"Script","task.script.args":"Script params","task.pause":"Pause","task.host.list":"Host list","task.clone.new":"Clone a new task","task.temporary.create":"Create temporary task","groups.instGroups":"Instant groups","groups.crontabGroups":"Crontab groups","perms.hosts":"Hosts","perms.host":"Host","perms.team":"Team","perms.account":"Account","last.7.days":"Last 7 days","last.15.days":"Last 15 days","last.30.days":"Last 30 days","last.60.days":"Last 60 days","last.90.days":"Last 90 days","table.nodata":"No data","table.create":"Create","table.operations":"Operations","table.batch.operations":"Batch Operations","table.detail":"Detail","table.modify":"Modify","table.delete":"Delete","table.delete.batch":"Batch delete","table.clone":"Clone","table.delete.sure":"Are you sure to delete it?","table.delete.there.sure":"Are you sure to delete these?","table.ident":"Ident","table.name":"Name","table.cate":"Cate","table.creator":"Creator","table.lastupdated":"Last updated","table.note":"Note","form.submit":"Submit","form.save":"Save","form.submit.and.save":"Save","form.login":"Login","form.goback":"Go back","msg.submit.success":"Successfully submited","msg.modify.success":"Successfully modified","msg.create.success":"Successfully created","msg.add.success":"Successfully created","msg.delete.success":"Successfully deleted","msg.clone.success":"Successfully cloned","msg.clone.error":"Cloning failed","msg.sort.success":"Successfully sorted"}},zh:{translation:{"新建资源分组":"新建资源分组","端口号":"端口号",classpath:{single:"资源分组"},append_tags:"修改附加标签",strategy:{create:"新建策略分组",single:"告警策略",multiple:"告警策略"},personalInfo:"个人信息","day-events":"天未恢复的",n9e:"滴滴夜莺","周期内所有点":"周期内所有点 - all","发生次数":"发生次数 - happen","最大值":"最大值 - max","最小值":"最小值 - min","均值":"均值 - avg","求和":"求和 - sum","突增突降值":"突增突降值 - diff","突增突降率":"突增突降率 - pdiff","同比变化率":"同比变化率 - c_avg_rate_abs","同比变化率(区分正负)":"同比变化率(区分正负) - c_avg_rate","同比变化值":"同比变化值 - c_avg_abs","同比变化值(区分正负)":"同比变化值(区分正负) - c_avg","3-sigma离群点检测":"3-sigma离群点检测 - stddev",minute:"分钟",minutes:"分钟",hour:"小时",hours:"小时","tpl.create":"创建","tpl.tag.bind":"绑定标签","tpl.tag.unbind":"解绑标签","tpl.tag.bind.title":"批量绑定标签","tpl.tag.bind.field":"待绑定的标签","tpl.tag.bind.success":"批量绑定标签成功","tpl.tag.unbind.title":"批量解绑标签","tpl.tag.unbind.field":"待解绑的标签","tpl.tag.unbind.success":"批量解绑标签成功","tpl.node.modify":"修改节点","tpl.node.modify.title":"批量修改节点","tpl.batch.modify.group":"批量修改所属分组","tpl.title":"标题","tpl.title.tpl.help":"标题，说明这个脚本的作用","tpl.title.task.help":"标题，说明这个任务的作用","tpl.tags":"标签","tpl.tags.help":"标签，用于分类","tpl.creator":"创建人","tpl.last_updator":"更新人","tpl.last_updated":"更新时间","tpl.account.help":"执行账号，慎用root，除非要代表操作系统意志","tpl.batch.help":"并发度，默认是0，表示全并发执行，1表示顺序执行，2表示每次执行2台","tpl.tolerance.help":"容忍几台机器失败，默认是0，表示一台都不容忍，只要失败了，立马暂停","tpl.timeout.help":"单机脚本执行的超时时间，单位是秒","tpl.pause.help":"暂停点，做完某台之后暂停一下，要暂停多台，写多个 host，逗号分隔","tpl.host.help":"要执行的机器列表","tpl.script.help":"要执行的脚本内容","tpl.args.help":"附于脚本之后的参数，多个参数之间用双逗号,,分隔，比如arg1,,arg2,,arg3","tpl.modify":"编辑脚本","tpl.create.task":"创建任务","task.create":"创建任务","task.title":"标题","task.done":"是否完成","task.clone":"克隆任务","task.meta":"元信息","task.creator":"创建人","task.created":"创建时间","task.only.mine":"只看自己","task.host":"Host","task.status":"状态","task.output":"输出","task.refresh":"刷新","task.control.params":"控制参数","task.account":"执行账号","task.batch":"并发度","task.tolerance":"容忍度","task.timeout":"超时时间","task.script":"脚本内容","task.script.args":"脚本参数","task.pause":"暂停点","task.host.list":"机器列表","task.clone.new":"克隆一个新任务","task.temporary.create":"创建临时任务","groups.instGroups":"即时任务","groups.crontabGroups":"定时任务","perms.hosts":"机器","perms.host":"机器","perms.team":"有权限的团队","perms.account":"脚本执行账号","last.7.days":"最近 7 天","last.15.days":"最近 15 天","last.30.days":"最近 30 天","last.60.days":"最近 60 天","last.90.days":"最近 90 天","table.nodata":"暂无数据","table.create":"创建","table.operations":"操作","table.batch.operations":"批量操作","table.detail":"详情","table.modify":"修改","table.delete":"删除","table.delete.batch":"批量删除","table.clone":"克隆","table.delete.sure":"确定要删除吗？","table.delete.there.sure":"确定要删除这些吗?","table.ident":"英文标识","table.name":"显示名","table.cate":"类别","table.creator":"创建者","table.lastupdated":"修改时间","table.note":"备注","form.submit":"提 交","form.save":"保 存","form.submit.and.save":"提交保存","form.login":"登 录","form.goback":"返 回","msg.submit.success":"提交成功","msg.modify.success":"修改成功","msg.create.success":"创建成功","msg.add.success":"添加成功","msg.delete.success":"删除成功","msg.clone.success":"克隆成功","msg.clone.error":"克隆失败","msg.sort.success":"排序成功"}}};dr.use(wr).init({resources:Pr,lng:localStorage.getItem("language")||"zh",interpolation:{escapeValue:!1}});var Rr=d.createContext(null);var Dr=function(e){e()},Br={notify:function(){}};function zr(){var e=Dr,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Hr=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=Br,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=zr())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=Br)},e}(),jr="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?f.exports.useLayoutEffect:f.exports.useEffect;function Gr(e){var t=e.store,n=e.context,r=e.children,i=f.exports.useMemo((function(){var e=new Hr(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),a=f.exports.useMemo((function(){return t.getState()}),[t]);jr((function(){var e=i.subscription;return e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,a]);var o=n||Rr;return d.createElement(o.Provider,{value:i},r)}function $r(){return f.exports.useContext(Rr)}function Yr(e){void 0===e&&(e=Rr);var t=e===Rr?$r:function(){return f.exports.useContext(e)};return function(){return t().store}}var Ur=Yr();function Vr(e){void 0===e&&(e=Rr);var t=e===Rr?Ur:Yr(e);return function(){return t().dispatch}}var Wr=Vr(),Xr=function(e,t){return e===t};function qr(e){void 0===e&&(e=Rr);var t=e===Rr?$r:function(){return f.exports.useContext(e)};return function(e,n){void 0===n&&(n=Xr);var r=t(),i=function(e,t,n,r){var i,a=f.exports.useReducer((function(e){return e+1}),0)[1],o=f.exports.useMemo((function(){return new Hr(n,r)}),[n,r]),s=f.exports.useRef(),l=f.exports.useRef(),c=f.exports.useRef(),u=f.exports.useRef(),h=n.getState();try{if(e!==l.current||h!==c.current||s.current){var p=e(h);i=void 0!==u.current&&t(p,u.current)?u.current:p}else i=u.current}catch(d){throw s.current&&(d.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),d}return jr((function(){l.current=e,c.current=h,u.current=i,s.current=void 0})),jr((function(){function e(){try{var e=n.getState(),r=l.current(e);if(t(r,u.current))return;u.current=r,c.current=e}catch(d){s.current=d}a()}return o.onStateChange=e,o.trySubscribe(),e(),function(){return o.tryUnsubscribe()}}),[n,o]),i}(e,n,r.store,r.subscription);return f.exports.useDebugValue(i),i}}var Kr,Qr,Zr,Jr,ei,ti,ni,ri=qr();Kr=m.exports.unstable_batchedUpdates,Dr=Kr,(Zr=Qr||(Qr={})).Get="Get",Zr.Post="Post",Zr.Put="Put",Zr.Delete="Delete",(ei=Jr||(Jr={}))[ei.Add=0]="Add",ei[ei.Delete=1]="Delete",(ni=ti||(ti={}))[ni.Favorite=0]="Favorite",ni[ni.Common=1]="Common";const ii=function(e,t){return ai("/api/n9e/auth/login",{method:Qr.Post,data:{username:e,password:t}})},ai=g({errorHandler:e=>{throw"AbortError"===e.name||e.silence||gt.error({message:e.message}),e.silence?e:new Error(e.message)},credentials:"include"});function oi(e,t=200){return ai("/api/n9e/busi-groups",{method:Qr.Get,params:Object.assign({limit:t},e?{query:e}:{})})}ai.interceptors.request.use(((e,t)=>{let n=s({},t.headers);return n.Authorization=`Bearer ${localStorage.getItem("access_token")||""}`,n["X-Cluster"]||(n["X-Cluster"]=localStorage.getItem("curCluster")||""),n["X-Language"]="zh",{url:e,options:l(s({},t),{headers:n})}})),ai.interceptors.response.use((async(e,t)=>{const{status:n}=e;if(200===n)return e.clone().json().then((r=>{if(!e.url.includes("/api/v1/")){if(""===r.err||"success"===r.status||""===r.error)return(r.data||r.dat)&&r.dat&&"[object Null]"===Object.prototype.toString.call(r.dat.list)&&(r.dat.list=[]),l(s({},r),{success:!0});throw t.silence?{name:r.err,message:r.err,silence:!0,data:r,response:e}:new Error(r.err)}if(200===n&&!r.error)return l(s({},r),{success:!0});if(r.error){if(e.url.indexOf("/api/n9e/prometheus/api/v1")>-1||e.url.indexOf("/api/v1/datasource/prometheus")>-1)return r;throw new Error(r.error.message,{cause:t.silence})}}));if(500===n&&e.url.includes("/api/v1"))return e.clone().json().then((n=>{if(!n.error)return l(s({},n),{success:!0});if(n.error)throw{name:n.error.name,message:n.error.message,silence:t.silence,data:n,response:e}}));if(401!==n){if(403===n&&e.url.includes("/api/v1"))return e.clone().json().then((e=>{if(location.href="/403",e.error&&e.error.message)throw new Error(e.error.message)}));{const n=e.headers.get("content-type");return-1!==(null==n?void 0:n.indexOf("text/plain; charset=utf-8"))?e.clone().text().then((e=>{throw new Error(e)})):e.clone().json().then((n=>{if(void 0===t.silence&&(e.url.indexOf("/api/n9e/prometheus/api/v1")>-1||e.url.indexOf("/api/v1/datasource/prometheus")>-1))return n;throw e.url.includes("/api/v1")?{name:n.error?n.error.name:JSON.stringify(n),message:n.error?n.error.message:JSON.stringify(n),silence:t.silence,data:n,response:e}:new Error(n.err?n.err:n)}))}}e.url.indexOf("/api/n9e/auth/refresh")>0?location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:""):localStorage.getItem("refresh_token")?ai("/api/n9e/auth/refresh",{method:Qr.Post,data:{refresh_token:localStorage.getItem("refresh_token")}}).then((e=>{if(console.log("401 err",e),e.err)location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:"");else{const{access_token:t,refresh_token:n}=e.dat;localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",n),location.href=`${location.pathname}${location.search}`}})):location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:"")}),{global:!1});const si=function(e,t="download.txt"){const n=document.createElement("a"),r=new Blob([Array.isArray(e)?e.join("\r\n"):e],{type:"text/plain"});n.href=URL.createObjectURL(r),n.download=t,document.body.appendChild(n),n.click()},li=(e,t,n)=>{const r=document.createElement("textarea");r.style.border="0",r.style.padding="0",r.style.margin="0",r.style.position="absolute",r.style.left="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;let a;r.style.top=`${i}px`,r.setAttribute("readonly",""),r.value=e,document.body.appendChild(r),r.select();try{a=document.execCommand("copy"),n&&e.includes(n)?vt.success(`${t("复制")}${e.split("\n").length}${t("条数据到剪贴板")}`):vt.success(t("复制到剪贴板"))}catch(o){vt.error(t("复制失败")),a=!1}return a&&document.body.removeChild(r),a},ci=()=>Object.values({}).map((e=>e.default)),ui=()=>`_${Math.random().toString(36).substr(2,9)}`;function hi(){const{search:e}=v();return d.useMemo((()=>new URLSearchParams(e)),[e])}function pi(){return f.exports.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},f.exports.createElement("title",null,"监控对象"),f.exports.createElement("defs",null,f.exports.createElement("filter",{colorInterpolationFilters:"auto",id:"filter-1"},f.exports.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0 0 0 0 0.400000 0 0 0 0 0.400000 0 0 0 0 0.400000 0 0 0 1.000000 0"}))),f.exports.createElement("g",{id:"页面-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},f.exports.createElement("g",{filter:"url(#filter-1)",id:"监控对象"},f.exports.createElement("g",null,f.exports.createElement("rect",{id:"矩形",fillOpacity:.01,fill:"#FFFFFF",fillRule:"nonzero",x:0,y:0,width:16,height:16}),f.exports.createElement("polygon",{id:"路径",fillOpacity:0,fill:"#FFFFFF",fillRule:"nonzero",points:"16 0 0 0 0 16 16 16"}),f.exports.createElement("path",{d:"M8,1 C11.31372,1 14,3.68628 14,7 C14,10.31372 11.31372,13 8,13 C4.68628,13 2,10.31372 2,7 C2,3.68628 4.68628,1 8,1 Z M8,2 C5.23856475,2 3,4.23856475 3,7 C3,9.76143525 5.23856475,12 8,12 C10.7614353,12 13,9.76143525 13,7 C13,4.23856475 10.7614353,2 8,2 Z",id:"路径",fill:"#666666",fillRule:"nonzero"}),f.exports.createElement("path",{d:"M8,4.5 C6.61929096,4.5 5.5,5.61929096 5.5,7 C5.5,8.38070904 6.61929096,9.5 8,9.5 C9.38070904,9.5 10.5,8.38070904 10.5,7 C10.5,5.61929096 9.38070904,4.5 8,4.5 Z M8,5.5 C8.82842429,5.5 9.5,6.17157571 9.5,7 C9.5,7.82842429 8.82842429,8.5 8,8.5 C7.17157571,8.5 6.5,7.82842429 6.5,7 C6.5,6.17157571 7.17157571,5.5 8,5.5 Z",id:"路径",fill:"#666666",fillRule:"nonzero"}),f.exports.createElement("path",{d:"M9.53456667,11.8333333 L6.4562,11.8333333 C6.26408593,11.8333333 6.08896118,11.9434058 6.00565464,12.116518 L4.88278797,14.4498514 C4.7230417,14.7818064 4.96494081,15.1666667 5.33333333,15.1666667 L10.6666667,15.1666667 C11.0357574,15.1666667 11.2776293,14.7804762 11.1165142,14.4484071 L9.98441415,12.1150738 C9.9008054,11.9427506 9.72610179,11.8333333 9.53456667,11.8333333 Z M9.221,12.833 L9.868,14.166 L6.128,14.166 L6.77,12.833 L9.221,12.833 Z",id:"路径",fill:"#666666",fillRule:"nonzero"}),f.exports.createElement("path",{d:"M12,14.1666667 C12.2761424,14.1666667 12.5,14.3905243 12.5,14.6666667 C12.5,14.9121266 12.3231248,15.116275 12.0898756,15.158611 L12,15.1666667 L4,15.1666667 C3.72385763,15.1666667 3.5,14.942809 3.5,14.6666667 C3.5,14.4212068 3.67687516,14.2170583 3.91012437,14.1747223 L4,14.1666667 L12,14.1666667 Z",id:"路径",fill:"#666666",fillRule:"nonzero"})))))}const di=y({scriptUrl:"/font/iconfont.js"}),{SubMenu:fi}=yt;let mi=ci().reduce(((e,t)=>{const n=t.menu;return n?e=e.concat(n):e}),[]);const gi=(e,t)=>{const n=T.find(e,(e=>T.some(e.children,(e=>-1!==t.indexOf(e.key)))));if(n)return n.key},vi=(e,t)=>{let n;return T.forEach(e,(e=>{T.forEach(e.children,(e=>{-1!==t.indexOf(e.key)&&(n=e.key)}))})),n},yi=()=>{const{t:e,i18n:t}=Lr(),n=[{key:"targets",icon:d.createElement(x,{component:pi}),title:e("监控对象"),children:[{key:"/targets",title:e("对象列表")}]},{key:"monitor",icon:d.createElement(E,null),title:e("监控看图"),children:[{key:"/metric/explorer",title:e("即时查询")},{key:"/object/explorer",title:e("快捷视图")},{key:"/dashboards",title:e("监控大盘")}]},{key:"alarm",icon:d.createElement(di,{type:"icon-gaojingguanli-weixuanzhongyangshi"}),title:e("告警管理"),children:[{key:"/alert-rules",title:e("告警规则")},{key:"/alert-mutes",title:e("屏蔽规则")},{key:"/alert-subscribes",title:e("订阅规则")},{key:"/alert-cur-events",title:e("活跃告警")},{key:"/alert-his-events",title:e("历史告警")}]},{key:"job",icon:d.createElement(b,null),title:e("告警自愈"),children:[{key:"/job-tpls",title:e("自愈脚本")},{key:"/job-tasks",title:e("执行历史")}]},{key:"manage",icon:d.createElement(di,{type:"icon-renyuanzuzhi-weixuanzhongyangshi"}),title:e("人员组织"),children:[{key:"/users",title:e("用户管理")},{key:"/user-groups",title:e("团队管理")},{key:"/busi-groups",title:e("业务组管理")}]},{key:"help",icon:d.createElement(di,{type:"icon-xitongxinxi-weixuanzhongyangshi"}),title:e("系统信息"),children:[{key:"/help/version",title:e("系统版本")},{key:"/help/contact",title:e("联系我们")},{key:"/help/migrate",title:e("管理员迁移")}]}],[r,i]=f.exports.useState(n),a=C(),o=v(),{pathname:s}=o;let{profile:l}=ri((e=>e.account));const[c,u]=f.exports.useState("1"===localStorage.getItem("menuCollapsed")),[h,p]=f.exports.useState([vi(r,s)]),[m,g]=f.exports.useState(c?[]:[gi(r,s)]);return f.exports.useEffect((()=>{p([vi(r,s)]),c||g(T.union([...m,gi(r,s)]))}),[s,c]),f.exports.useEffect((()=>{l.roles.length>0&&(-1===l.roles.indexOf("Admin")?ai("/api/n9e/self/perms",{method:Qr.Get}).then((e=>{const{dat:t}=e,r=[...n];r.forEach((e=>{e.children=e.children.filter((e=>t.includes(e.key)))})),i(r)})):i(n))}),[l.roles]),"/login"===o.pathname||o.pathname.startsWith("/chart/")||"/callback"===o.pathname?null:d.createElement("div",{style:{display:"flex",flexDirection:"column",padding:"10px 0 10px 10px"}},d.createElement("div",{className:"home "+(c?"collapse":"")},d.createElement("div",{className:"name",onClick:()=>a.push("/metric/explorer"),key:"overview"},d.createElement("img",{src:c?"/image/logo.svg":"/image/logo-l(1).svg",alt:"",className:"logo"}))),d.createElement(yt,{className:"left-menu-container",inlineCollapsed:c,openKeys:m,selectedKeys:h,onClick:({key:e})=>{if(o.pathname!==e){if(p([e]),"changeLanguage"===e){let e="en"==t.language?"zh":"en";t.changeLanguage(e),localStorage.setItem("language",e)}e.startsWith("/")&&a.push(e)}},mode:"inline",onOpenChange:e=>{g(e)}},T.map(r,(e=>e.children.length>0&&d.createElement(fi,{key:e.key,icon:e.icon,title:e.title},T.map(e.children,(e=>d.createElement(yt.Item,{key:e.key},e.title)))))),mi.sort(((e,t)=>t.weight-e.weight)).map((e=>e.content))),d.createElement(xt,{type:"text",onClick:()=>{u(!c),localStorage.setItem("menuCollapsed",c?"0":"1")},className:"collapseBtn"},d.createElement(c?w:S)))},xi=()=>{const e=C();return d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},d.createElement(Et,{title:"404",subTitle:"你访问的页面不存在!",extra:d.createElement(xt,{type:"primary",onClick:()=>e.replace("/")},"回到首页")}))},Ei=()=>{const e=C();return d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},d.createElement(Et,{title:"403",subTitle:"你没有权限访问该页面, 请联系管理员!",extra:d.createElement(xt,{type:"primary",onClick:()=>e.go(-2)},"返回上一页")}))};function bi(){const{t:e}=Lr(),[t]=bt.useForm(),n=C(),r=v(),i=r.search&&new URLSearchParams(r.search).get("redirect"),a=Wr(),o=async()=>{try{await t.validateFields(),s()}catch(rh){console.log(e("输入有误"))}},s=async()=>{let{username:e,password:r}=t.getFieldsValue();await a({type:"account/login",username:e,password:r})||n.push(i||"/metric/explorer")};return d.createElement("div",{className:"login-warp"},d.createElement("img",{src:"/image/login-left-top-corner.png",className:"left-top-bg"}),d.createElement("img",{src:"/image/login-right-bottom-corner.png",className:"right-bottom-bg"}),d.createElement("div",{className:"banner integration"},d.createElement("img",{src:"/image/login-dashboard.svg",style:{margin:"0 60px",zIndex:5,width:632}})),d.createElement("div",{className:"login-panel"},d.createElement("div",{className:"login-main  integration"},d.createElement("div",{className:"login-title"},d.createElement("img",{src:"/image/logo-l.svg",style:{width:"120px"}})),d.createElement(bt,{form:t,layout:"vertical",requiredMark:!0},d.createElement(bt.Item,{label:"账户",name:"username",rules:[{required:!0,message:e("请输入用户名")}]},d.createElement(Ct,{placeholder:e("请输入用户名"),prefix:d.createElement(k,{className:"site-form-item-icon"})})),d.createElement(bt.Item,{label:"密码",name:"password",rules:[{required:!0,message:e("请输入密码")}]},d.createElement(Ct,{type:"password",placeholder:e("请输入密码"),onPressEnter:o,prefix:d.createElement(_,{className:"site-form-item-icon"})})),d.createElement(bt.Item,null,d.createElement(xt,{type:"primary",onClick:o},e("登录"))),d.createElement("div",{className:"login-other"},d.createElement("strong",null,"其他登录方式："),d.createElement("a",{onClick:()=>{ai("/api/n9e/auth/redirect",{method:Qr.Get}).then((e=>{e.dat?window.location.href=e.dat:vt.warning("没有配置 OIDC 登录地址！")}))}},"OIDC"))))))}var Ci={},Ti=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),wi=new RegExp("%[a-f0-9]{2}","gi"),Si=new RegExp("(%[a-f0-9]{2})+","gi");function ki(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],ki(n),ki(r))}function _i(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(wi),n=1;n<t.length;n++)t=(e=ki(t,n).join("")).match(wi);return e}}var Ai=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"��","%FF%FE":"��"},r=Si.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var i=_i(r[0]);i!==r[0]&&(n[r[0]]=i)}r=Si.exec(e)}n["%C2"]="�";for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o];e=e.replace(new RegExp(s,"g"),n[s])}return e}(e)}},Oi=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},Ii=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),a=0;a<r.length;a++){var o=r[a],s=e[o];(i?-1!==t.indexOf(o):t(o,s,e))&&(n[o]=s)}return n};function Mi(){const e=v(),t=Ci.parse(e.search),[n,r]=f.exports.useState();return f.exports.useEffect((()=>{var e;(e={code:t.code,state:t.state,redirect:t.redirect||"/"},ai("/api/n9e/auth/callback",{method:Qr.Get,params:e})).then((e=>{""===e.err?e.dat&&e.dat.access_token&&e.dat.refresh_token?(localStorage.setItem("access_token",e.dat.access_token),localStorage.setItem("refresh_token",e.dat.refresh_token),window.location.href=e.dat.redirect):console.log(e.dat):r(e.err)})).catch((e=>{r(e.message)}))}),[]),void 0===n?null:d.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center"}},d.createElement("div",null,d.createElement("h1",null,"第三方登录验证失败"),d.createElement("div",{style:{fontSize:14}},n),d.createElement("div",null,d.createElement("a",{href:"/login"},"返回登录页"))))}!function(e){const t=Ti,n=Ai,r=Oi,i=Ii,a=Symbol("encodeFragmentIdentifier");function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,n){return n.encode?n.strict?t(e):encodeURIComponent(e):e}function l(e,t){return t.decode?n(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"==typeof n&&n.includes(e.arrayFormatSeparator),a="string"==typeof n&&!i&&l(n,e).includes(e.arrayFormatSeparator);n=a?l(n,e):n;const o=i||a?n.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===n?n:l(n,e);r[t]=o};case"bracket-separator":return(t,n,r)=>{const i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(r[t]=n?l(n,e):n);const a=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>l(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],a):r[t]=a};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const a of e.split("&")){if(""===a)continue;let[e,o]=r(t.decode?a.replace(/\+/g," "):a,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:l(o,t),n(l(e,t),o,i)}for(const r of Object.keys(i)){const e=i[r];if("object"==typeof e&&null!==e)for(const n of Object.keys(e))e[n]=p(e[n],t);else i[r]=p(e,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))}e.extract=h,e.parse=d,e.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[",i,"]"].join("")]:[...n,[s(t,e),"[",s(i,e),"]=",s(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[s(n,e),t,s(i,e)].join("")]:[[r,s(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,s(t,e)]:[...n,[s(t,e),"=",s(r,e)].join("")]}}(t),i={};for(const o of Object.keys(e))n(o)||(i[o]=e[o]);const a=Object.keys(i);return!1!==t.sort&&a.sort(t.sort),a.map((n=>{const i=e[n];return void 0===i?"":null===i?s(n,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?s(n,t)+"[]":i.reduce(r(n),[]).join("&"):s(n,t)+"="+s(i,t)})).filter((e=>e.length>0)).join("&")},e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,i]=r(e,"#");return Object.assign({url:n.split("?")[0]||"",query:d(h(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:l(i,t)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0,[a]:!0},n);const r=u(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),l=Object.assign(o,t.query);let c=e.stringify(l,n);c&&(c=`?${c}`);let h=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(t.url);return t.fragmentIdentifier&&(h=`#${n[a]?s(t.fragmentIdentifier,n):t.fragmentIdentifier}`),`${r}${c}${h}`},e.pick=(t,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[a]:!1},r);const{url:o,query:s,fragmentIdentifier:l}=e.parseUrl(t,r);return e.stringifyUrl({url:o,query:i(s,n),fragmentIdentifier:l},r)},e.exclude=(t,n,r)=>{const i=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return e.pick(t,i,r)}}(Ci);function Ni(e){return"function"==typeof e.children?d.createElement("div",null,e.children(!1)):null}const Fi=["red","orange","blue"],Li=function(e,t=1){return ai("/api/n9e/alert-rule-groups",{method:Qr.Get,params:{query:e,p:t,limit:15}})},Pi=function(e){return ai(`/api/n9e/alert-rule-group/${e}`,{method:Qr.Delete})},Ri=function(e){return ai(`/api/n9e/alert-rule-group/${e.id}`,{method:Qr.Put,data:e})},Di=function(e){return ai(`/api/n9e/busi-group/${e.id}/alert-rules`,{method:Qr.Get})},Bi=function(e){return ai(`/api/n9e/alert-rule-group/${e}/favorites`,{method:Qr.Post,data:{id:e}})},zi=function(e){return ai(`/api/n9e/alert-rule-group/${e}/favorites`,{method:Qr.Delete,data:{id:e}})},Hi=function(e,t,n){return ai(`/api/n9e/busi-group/${t}/alert-rules`,{method:n,data:e})},ji=function(e,t){return ai(`/api/n9e/busi-group/${t}/alert-rules`,{method:Qr.Delete,data:{ids:e}})},Gi=function(e,t){return ai(`/api/n9e/busi-group/${t}/alert-rules/fields`,{method:Qr.Put,data:e})};function $i(e){return ai("/api/n9e/busi-groups/alertings",{method:Qr.Get,params:{ids:e.join(",")}})}const Yi=function(){return ai("/api/n9e/alert-rules/builtin/list",{method:Qr.Get})},Ui=function(e,t,n){return ai(`/api/n9e/busi-group/${n}/alert-rules/builtin`,{method:Qr.Post,data:{name:e,cluster:t}})},Vi=function(e){return ai("/api/n9e/alert-aggr-views",{method:Qr.Post,data:e})},Wi=function(e){return ai("/api/n9e/alert-aggr-views",{method:Qr.Put,data:e})},Xi=function(e){return ai("/api/fc-brain/data",{method:Qr.Get,params:e})};function qi(){const[e,t]=f.exports.useState(),[n,r]=f.exports.useState(),[i,a]=f.exports.useState(!1);return f.exports.useEffect((()=>{const e=A().unix();ai("/api/fc-brain/license",{method:Qr.Get}).then((n=>{var i,o,s,l;t(T.round(((null==(i=null==n?void 0:n.data)?void 0:i.expire)-e)/86400)),r(null==(o=null==n?void 0:n.data)?void 0:o.rules_remaining),(null==(s=null==n?void 0:n.data)?void 0:s.show)&&a(!0),window.localStorage.setItem("license_rules_remaining",T.toString(null==(l=null==n?void 0:n.data)?void 0:l.rules_remaining))}))}),[]),e&&i?d.createElement("div",{style:{marginRight:20}},d.createElement(Tt,{title:d.createElement("div",null,d.createElement("div",null,"还剩 ",e," 天到期"),d.createElement("div",null,"还可添加 ",n," 条规则"))},d.createElement("div",{style:{background:"#EBE8F2",borderRadius:16,color:"#6C53B1",fontSize:12,padding:"2px 8px"}},"还剩 ",e," 天到期"))):null}const Ki=({icon:e,title:t,rightArea:n,children:r,customArea:i,showBack:a,onChangeCluster:o,hideCluster:s=!0})=>{const{t:l,i18n:c}=Lr(),u=C(),h=Wr();let{profile:p}=ri((e=>e.account));const{clusters:m}=ri((e=>e.common)),g=localStorage.getItem("curCluster"),[v,y]=f.exports.useState(g||m[0]);!g&&m.length>0&&(y(m[0]),localStorage.setItem("curCluster",m[0]),h({type:"common/saveData",prop:"curCluster",data:m[0]}));const x=d.createElement(yt,null,d.createElement(yt.Item,{onClick:()=>{u.push("/account/profile/info")}},l("个人信息")),d.createElement(yt.Item,{onClick:()=>{ai("/api/n9e/auth/logout",{method:Qr.Post}).then((e=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),h({type:"common/saveData",prop:"clusters",data:[]}),h({type:"common/saveData",prop:"busiGroups",data:[]}),u.push("/login")}))}},l("退出"))),E=d.createElement(yt,{selectedKeys:[v]},m.map((e=>d.createElement(yt.Item,{key:e,onClick:t=>{y(e),o&&o(e),localStorage.setItem("curCluster",e),h({type:"common/saveData",prop:"curCluster",data:e})}},e))));return d.createElement("div",{className:"page-wrapper"},i?d.createElement("div",{className:"page-top-header"},i):d.createElement("div",{className:"page-top-header"},d.createElement("div",{className:"page-header-content"},d.createElement("div",{className:"page-header-title"},a&&d.createElement(O,{onClick:()=>u.goBack(),style:{marginRight:"5px"}}),e,t),d.createElement("div",{className:"page-header-right-area"},{}.VITE_DOC_LINK,!s&&d.createElement("div",{style:{marginRight:20}},"集群：",d.createElement(wt,{overlay:E},d.createElement(xt,null,v," ",d.createElement(I,null)))),d.createElement(Ni,null,d.createElement(qi,null)),d.createElement(wt,{overlay:x,trigger:["click"]},d.createElement("span",{className:"avator"},d.createElement("img",{src:p.portrait||"/image/avatar1.png",alt:""}),d.createElement("span",{className:"display-name"},p.nickname||p.username),d.createElement(I,null)))))),r&&r)};var Qi,Zi=(Qi=function(e,t){return(Qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Qi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ji=function(){return(Ji=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ea={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},ta={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},na={width:"20px",height:"20px",position:"absolute"},ra={top:Ji(Ji({},ea),{top:"-5px"}),right:Ji(Ji({},ta),{left:void 0,right:"-5px"}),bottom:Ji(Ji({},ea),{top:void 0,bottom:"-5px"}),left:Ji(Ji({},ta),{left:"-5px"}),topRight:Ji(Ji({},na),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Ji(Ji({},na),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Ji(Ji({},na),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Ji(Ji({},na),{left:"-10px",top:"-10px",cursor:"nw-resize"})},ia=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return Zi(t,e),t.prototype.render=function(){return f.exports.createElement("div",{className:this.props.className||"",style:Ji(Ji({position:"absolute",userSelect:"none"},ra[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(f.exports.PureComponent),aa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oa=function(){return(oa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},sa={width:"auto",height:"auto"},la=function(e,t,n){return Math.max(Math.min(e,n),t)},ca=function(e,t){return Math.round(e/t)*t},ua=function(e,t){return new RegExp(e,"i").test(t)},ha=function(e){return Boolean(e.touches&&e.touches.length)},pa=function(e,t,n){void 0===n&&(n=0);var r=t.reduce((function(n,r,i){return Math.abs(r-e)<Math.abs(t[n]-e)?i:n}),0),i=Math.abs(t[r]-e);return 0===n||i<n?t[r]:e},da=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},fa=function(e,t,n,r){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%"))return t*(Number(e.replace("%",""))/100);if(e.endsWith("vw"))return n*(Number(e.replace("vw",""))/100);if(e.endsWith("vh"))return r*(Number(e.replace("vh",""))/100)}return e},ma=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],ga=function(e){function t(t){var n=e.call(this,t)||this;return n.ratio=1,n.resizable=null,n.parentLeft=0,n.parentTop=0,n.resizableLeft=0,n.resizableRight=0,n.resizableTop=0,n.resizableBottom=0,n.targetLeft=0,n.targetTop=0,n.appendBase=function(){if(!n.resizable||!n.window)return null;var e=n.parentNode;if(!e)return null;var t=n.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add("__resizable_base__"):t.className+="__resizable_base__",e.appendChild(t),t},n.removeBase=function(e){var t=n.parentNode;t&&t.removeChild(e)},n.ref=function(e){e&&(n.resizable=e)},n.state={isResizing:!1,width:void 0===(n.propsSize&&n.propsSize.width)?"auto":n.propsSize&&n.propsSize.width,height:void 0===(n.propsSize&&n.propsSize.height)?"auto":n.propsSize&&n.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},n.onResizeStart=n.onResizeStart.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n}return aa(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||sa},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,i=this.resizable.style.position;"relative"!==i&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:n,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:r,this.resizable.style.position=i}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,n=function(t){if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&e.propsSize[t].toString().endsWith("%")){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var n=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/n[t]*100+"%"}return da(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?da(t.width):n("width"),height:t&&void 0!==t.height&&!this.state.isResizing?da(t.height):n("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,n=this.parentNode.style.flexWrap;"wrap"!==n&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=n),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==n&&"auto"!==n?e:"auto"},t.prototype.calculateNewMaxFromBoundary=function(e,t){var n,r,i=this.props.boundsByDirection,a=this.state.direction,o=i&&ua("left",a),s=i&&ua("top",a);if("parent"===this.props.bounds){var l=this.parentNode;l&&(n=o?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),r=s?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(n=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,r=s?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(n=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),r=s?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return n&&Number.isFinite(n)&&(e=e&&e<n?e:n),r&&Number.isFinite(r)&&(t=t&&t<r?t:r),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n=this.props.scale||1,r=this.props.resizeRatio||1,i=this.state,a=i.direction,o=i.original,s=this.props,l=s.lockAspectRatio,c=s.lockAspectRatioExtraHeight,u=s.lockAspectRatioExtraWidth,h=o.width,p=o.height,d=c||0,f=u||0;return ua("right",a)&&(h=o.width+(e-o.x)*r/n,l&&(p=(h-f)/this.ratio+d)),ua("left",a)&&(h=o.width-(e-o.x)*r/n,l&&(p=(h-f)/this.ratio+d)),ua("bottom",a)&&(p=o.height+(t-o.y)*r/n,l&&(h=(p-d)*this.ratio+f)),ua("top",a)&&(p=o.height-(t-o.y)*r/n,l&&(h=(p-d)*this.ratio+f)),{newWidth:h,newHeight:p}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,r){var i=this.props,a=i.lockAspectRatio,o=i.lockAspectRatioExtraHeight,s=i.lockAspectRatioExtraWidth,l=void 0===r.width?10:r.width,c=void 0===n.width||n.width<0?e:n.width,u=void 0===r.height?10:r.height,h=void 0===n.height||n.height<0?t:n.height,p=o||0,d=s||0;if(a){var f=(u-p)*this.ratio+d,m=(h-p)*this.ratio+d,g=(l-d)/this.ratio+p,v=(c-d)/this.ratio+p,y=Math.max(l,f),x=Math.min(c,m),E=Math.max(u,g),b=Math.min(h,v);e=la(e,y,x),t=la(t,E,b)}else e=la(e,l,c),t=la(t,u,h);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){if("parent"===this.props.bounds){var e=this.parentNode;if(e){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left,this.targetTop=n.top}if(this.resizable){var r=this.resizable.getBoundingClientRect(),i=r.left,a=r.top,o=r.right,s=r.bottom;this.resizableLeft=i,this.resizableRight=o,this.resizableTop=a,this.resizableBottom=s}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var n,r=0,i=0;if(e.nativeEvent&&function(e){return Boolean((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))}(e.nativeEvent)?(r=e.nativeEvent.clientX,i=e.nativeEvent.clientY):e.nativeEvent&&ha(e.nativeEvent)&&(r=e.nativeEvent.touches[0].clientX,i=e.nativeEvent.touches[0].clientY),this.props.onResizeStart)if(this.resizable)if(!1===this.props.onResizeStart(e,t,this.resizable))return;this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var a=this.window.getComputedStyle(this.resizable);if("auto"!==a.flexBasis){var o=this.parentNode;if(o){var s=this.window.getComputedStyle(o).flexDirection;this.flexDir=s.startsWith("row")?"row":"column",n=a.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var l={original:{x:r,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:oa(oa({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:n};this.setState(l)}},t.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&ha(e))try{e.preventDefault(),e.stopPropagation()}catch(rh){}var n=this.props,r=n.maxWidth,i=n.maxHeight,a=n.minWidth,o=n.minHeight,s=ha(e)?e.touches[0].clientX:e.clientX,l=ha(e)?e.touches[0].clientY:e.clientY,c=this.state,u=c.direction,h=c.original,p=c.width,d=c.height,f=this.getParentSize(),g=function(e,t,n,r,i,a,o){return r=fa(r,e.width,t,n),i=fa(i,e.height,t,n),a=fa(a,e.width,t,n),o=fa(o,e.height,t,n),{maxWidth:void 0===r?void 0:Number(r),maxHeight:void 0===i?void 0:Number(i),minWidth:void 0===a?void 0:Number(a),minHeight:void 0===o?void 0:Number(o)}}(f,this.window.innerWidth,this.window.innerHeight,r,i,a,o);r=g.maxWidth,i=g.maxHeight,a=g.minWidth,o=g.minHeight;var v=this.calculateNewSizeFromDirection(s,l),y=v.newHeight,x=v.newWidth,E=this.calculateNewMaxFromBoundary(r,i);this.props.snap&&this.props.snap.x&&(x=pa(x,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(y=pa(y,this.props.snap.y,this.props.snapGap));var b=this.calculateNewSizeFromAspectRatio(x,y,{width:E.maxWidth,height:E.maxHeight},{width:a,height:o});if(x=b.newWidth,y=b.newHeight,this.props.grid){var C=ca(x,this.props.grid[0]),T=ca(y,this.props.grid[1]),w=this.props.snapGap||0;x=0===w||Math.abs(C-x)<=w?C:x,y=0===w||Math.abs(T-y)<=w?T:y}var S={width:x-h.width,height:y-h.height};if(p&&"string"==typeof p)if(p.endsWith("%"))x=x/f.width*100+"%";else if(p.endsWith("vw")){x=x/this.window.innerWidth*100+"vw"}else if(p.endsWith("vh")){x=x/this.window.innerHeight*100+"vh"}if(d&&"string"==typeof d)if(d.endsWith("%"))y=y/f.height*100+"%";else if(d.endsWith("vw")){y=y/this.window.innerWidth*100+"vw"}else if(d.endsWith("vh")){y=y/this.window.innerHeight*100+"vh"}var k={width:this.createSizeForCssProperty(x,"width"),height:this.createSizeForCssProperty(y,"height")};"row"===this.flexDir?k.flexBasis=k.width:"column"===this.flexDir&&(k.flexBasis=k.height),m.exports.flushSync((function(){t.setState(k)})),this.props.onResize&&this.props.onResize(e,u,this.resizable,S)}},t.prototype.onMouseUp=function(e){var t=this.state,n=t.isResizing,r=t.direction,i=t.original;if(n&&this.resizable){var a={width:this.size.width-i.width,height:this.size.height-i.height};this.props.onResizeStop&&this.props.onResizeStop(e,r,this.resizable,a),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:oa(oa({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(e){this.setState({width:e.width,height:e.height})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,r=t.handleStyles,i=t.handleClasses,a=t.handleWrapperStyle,o=t.handleWrapperClass,s=t.handleComponent;if(!n)return null;var l=Object.keys(n).map((function(t){return!1!==n[t]?f.exports.createElement(ia,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:r&&r[t],className:i&&i[t]},s&&s[t]?s[t]:null):null}));return f.exports.createElement("div",{className:o,style:a},l)},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce((function(t,n){return-1!==ma.indexOf(n)||(t[n]=e.props[n]),t}),{}),n=oa(oa(oa({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return f.exports.createElement(r,oa({ref:this.ref,style:n,className:this.props.className},t),this.state.isResizing&&f.exports.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(f.exports.PureComponent);const va=St.Group,ya=({dataSource:e,fieldNames:t={},allowNotSelect:n=!1,defaultSelect:r,showBadge:i=!1,badgeInfo:a={},onChange:o})=>{const[s,l]=f.exports.useState(r&&"object"==typeof r?r[t.key||"value"]:r);return d.createElement("div",{className:"radio-list"},e.map((e=>d.createElement(kt,{key:e.id},d.createElement(_t,{span:i?20:24},d.createElement("div",{className:P({"n9e-metric-views-list-content-item":!0,active:e.id==s}),key:e.id,onClick:t=>{e.id!==s&&(l(e.id),o&&o(e.id,e))}},d.createElement("span",{className:"name"},e.name))),i&&d.createElement(_t,{span:4},d.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},d.createElement(At,{count:a[e.id]||0})))))))},xa=e=>{const t=Wr(),{clusters:n,curClusterItems:r}=ri((e=>e.common)),[i,a]=f.exports.useState(!1),[o,s]=f.exports.useState(!1);return f.exports.useEffect((()=>{s(n.length===r.length),a(!!r.length&&r.length<n.length),n.length&&e.onChange&&e.onChange(r)}),[n]),{title:d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement("span",null,"集群")),isShow:e.isShow,shrink:{style:{flex:"none",maxHeight:"200px"}},render:()=>d.createElement(va,{options:n,value:r,style:{flexShrink:1,overflow:"auto"},onChange:r=>{var i;t({type:"common/saveData",prop:"curClusterItems",data:i=r}),localStorage.setItem("curClusterItems",JSON.stringify(i)),e.onChange&&e.onChange(i),a(!!r.length&&r.length<n.length),s(r.length===n.length)}})}},Ea=e=>{const t=Wr(),{busiGroups:n,curBusiItem:r}=ri((e=>e.common)),{alertings:i}=ri((e=>e.event)),[a,o]=f.exports.useState(n),s=e.showNotGroupItem;if(!localStorage.getItem("curBusiItem")&&!s&&n.length>0&&(localStorage.setItem("curBusiItem",JSON.stringify(n[0])),t({type:"common/saveData",prop:"curBusiItem",data:n[0]})),e.defaultSelect&&n.length>0&&r.id!==e.defaultSelect){const r=n.find((t=>t.id===e.defaultSelect));r&&(localStorage.setItem("curBusiItem",JSON.stringify(r)),t({type:"common/saveData",prop:"curBusiItem",data:r}))}const l=f.exports.useMemo((()=>e.defaultSelect?{id:e.defaultSelect}:r.id?r:{id:void 0}),[r]);return f.exports.useEffect((()=>{a.length||o(n)}),[n]),f.exports.useEffect((()=>{n.length&&e.onChange&&(s||!s&&l.id)&&e.onChange(l.id,l)}),[n,l]),{title:"业务组",isShow:!0,shrink:!0,render:()=>d.createElement(d.Fragment,null,d.createElement(Ct,{className:"left-area-group-search",prefix:d.createElement(M,null),onPressEnter:e=>{e.preventDefault();const n=e.currentTarget.value;n?oi(n).then((e=>{o(e.dat||[])})):oi("").then((e=>{const n=e.dat||[];o(n),t({type:"common/saveData",prop:"busiGroups",data:n})}))},placeholder:"请输入业务组名称进行筛选"}),!s&&r.id&&0!==a.length||s?d.createElement(ya,{dataSource:s?[{id:0,name:"未归组对象"}].concat(a):a,fieldNames:{key:"id",label:"name",value:"id"},allowNotSelect:s,defaultSelect:l,showBadge:e.showAlertings,badgeInfo:i,onChange:(n,r)=>{n&&(t({type:"common/saveData",prop:"curBusiItem",data:r}),localStorage.setItem("curBusiItem",JSON.stringify(r))),e.onChange&&e.onChange(n,r)}}):d.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",padding:20,marginLeft:-20}},d.createElement("img",{src:"/image/empty.png",width:"64"}),d.createElement("div",{className:"ant-empty-description"},"暂无数据")))}},ba=({clusterGroup:e={},busiGroup:t={},eventLevelGroup:n={},eventTypeGroup:r={}})=>{const i=C(),[a,o]=f.exports.useState("1"===localStorage.getItem("leftlist")),s=[xa(e),Ea(t),{title:"事件级别",isShow:n.isShow,render:()=>d.createElement(ya,{dataSource:[{label:"一级告警",value:1},{label:"二级告警",value:2},{label:"三级告警",value:3}],defaultSelect:n.defaultSelect,allowNotSelect:!0,onChange:null==n?void 0:n.onChange})},{title:"事件类别",isShow:r.isShow,render:()=>d.createElement(ya,{dataSource:[{label:"Triggered",value:0},{label:"Recovered",value:1}],defaultSelect:r.defaultSelect,allowNotSelect:!0,onChange:null==r?void 0:r.onChange})}],[l,c]=f.exports.useState(T.toNumber(localStorage.getItem("leftwidth")||200));return d.createElement(ga,{style:{marginRight:a?0:10},size:{width:a?0:l,height:"100%"},enable:{right:!a},onResizeStop:(e,t,n,r)=>{let i=l+r.width;i<200&&(i=200),c(i),localStorage.setItem("leftwidth",i.toString())}},d.createElement("div",{className:a?"left-area collapse":"left-area"},d.createElement("div",{className:"collapse-btn",onClick:()=>{localStorage.setItem("leftlist",a?"0":"1"),o(!a)}},a?d.createElement(F,null):d.createElement(N,null)),s.map((({title:e,isShow:t,shrink:n=!1,render:r},a)=>t&&d.createElement("div",{key:a,className:"left-area-group "+(n?"group-shrink":""),style:"object"==typeof n?n.style:{}},d.createElement("div",{className:"left-area-group-title"},e,"业务组"===e&&d.createElement(L,{onClick:()=>i.push("/busi-groups")})),r())))))};function Ca(e){const{t:t}=Lr(),{text:n}=e;return d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(R,{style:{color:"#1473ff"}})," ",t("提示信息")),d.createElement("p",null,n,"需要归属某个业务组，请先  ",d.createElement(D,{to:"/busi-groups"},"创建业务组")))}const Ta=e=>{var t=e,{onSearch:n}=t,r=c(t,["onSearch"]);Lr();const[i,a]=f.exports.useState("");return d.createElement(Ct,s({prefix:d.createElement(M,null),value:i,onChange:e=>{a(e.target.value),""===e.target.value&&n&&n("")},onPressEnter:e=>{n&&n(i)}},r))};var wa,Sa,ka,_a,Aa,Oa,Ia,Ma,Na,Fa;(Sa=wa||(wa={}))[Sa.n9e=0]="n9e",Sa[Sa.prometheus=1]="prometheus",(_a=ka||(ka={}))[_a.Enable=0]="Enable",_a[_a.UnEnable=1]="UnEnable",(Oa=Aa||(Aa={}))[Oa.Send=0]="Send",Oa[Oa.UnSend=1]="UnSend",(Ma=Ia||(Ia={}))[Ma.First=1]="First",Ma[Ma.Second=2]="Second",Ma[Ma.Third=3]="Third",(Fa=Na||(Na={}))[Fa.Favorite=0]="Favorite",Fa[Fa.Common=1]="Common";const La=["30","50","100","300"],Pa=[{value:"1h"},{value:"2h"},{value:"3h"},{value:"6h"},{value:"12h"},{value:"1d"},{value:"2d"},{value:"3d"},{value:"5d"},{value:"7d"},{value:"14d"},{value:"30d"},{value:"60d"},{value:"90d"},{value:"forever"}];function Ra(e){Lr();const{onClick:t,className:n}=e,[r,i]=f.exports.useState(!1);return d.createElement(xt,{className:n?n+" reload-icon":"reload-icon",loading:r,onClick:e=>{r||(i(!0),t(),setTimeout((()=>{i(!1)}),1e3))},icon:d.createElement(B,{className:"refresh",spin:r})})}const Da=e=>{var t=e,{text:n}=t,r=c(t,["text"]);return Lr(),Array.from(n).reduce(((e,t)=>e+t.charCodeAt(0)),0),d.createElement(Ot,s({color:"purple"},r),n)};const{Option:Ba}=Mt,{TextArea:za}=Ct;var Ha,ja;function Ga(e){const{t:t}=Lr(),n=f.exports.useRef(null),{status:r,title:i,exportData:a,description:o,onClose:c,onSubmit:u,crossCluster:h=!0,onSuccess:p,label:m,fetchBuiltinFunc:g,submitBuiltinFunc:v,bgid:y}=e,[x]=bt.useForm(),{clusters:E}=ri((e=>e.common)),[b,C]=f.exports.useState([]),[T,w]=f.exports.useState([]),[S,k]=f.exports.useState(),_=[{title:m,dataIndex:"name"},{title:"导入结果",dataIndex:"isTrue",render:e=>e?d.createElement(j,{style:{color:"#389e0d",fontSize:"18px"}}):d.createElement(G,{style:{color:"#d4380d",fontSize:"18px"}})},{title:"错误消息",dataIndex:"msg"}],A=[{title:`${m}名称`,dataIndex:"name"},{title:"操作",dataIndex:"id",render:(e,t)=>d.createElement(xt,{type:"link",onClick:()=>{v&&v(t.name,x.getFieldValue("cluster"),y).then((({dat:e})=>{k(Object.keys(e).map((t=>({name:t,key:t,isTrue:!e[t],msg:e[t]}))))}))}},"导入")}],O=()=>{c(),S&&S.some((e=>e.isTrue))&&p&&p()};f.exports.useEffect((()=>{r!==Ha.BuiltIn&&r!=Ha.Import||g&&g().then((e=>{let t=e.dat.map((e=>({name:e})));w(t),C(t)})),k(void 0)}),[r]);const I=f.exports.isValidElement(i)?i:r===Ha.Export?t("导出")+i:t("导入")+i;return d.createElement(It,{title:I,destroyOnClose:!0,wrapClassName:f.exports.isValidElement(i)?"import-modal-wrapper":void 0,footer:r===Ha.Import&&d.createElement(d.Fragment,null,d.createElement(xt,{key:"delete",onClick:O},t("取消")),S?d.createElement(xt,{type:"primary",onClick:O},t("关闭")):d.createElement(xt,{key:"submit",type:"primary",onClick:async()=>{await x.validateFields();const e=x.getFieldsValue();try{const t=JSON.parse(e.import);if(!Array.isArray(t))return void vt.error(i+"JSON需要时数组");const n=t.map((t=>l(s({},t),{cluster:h?e.cluster:void 0}))),r=await u(n),a=Object.keys(r).map((e=>({name:e,key:e,isTrue:!r[e],msg:r[e]})));k(a)}catch(n){vt.error(t("数据有误:")+n)}}},t("确定"))),onCancel:O,afterClose:()=>k(void 0),visible:"hide"!==r,width:600},d.createElement("div",{style:{color:"#999"}},o&&d.createElement("p",null,o),r===Ha.Export&&d.createElement("p",null,d.createElement("a",{onClick:()=>{si([a],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>li(a,t)},d.createElement(z,null),"复制JSON内容到剪贴板"))),(()=>{switch(r){case Ha.Export:return d.createElement("div",{contentEditable:"true",suppressContentEditableWarning:!0,ref:n,className:"export-dialog code-area"},d.createElement("pre",null,a));case Ha.BuiltIn:return d.createElement(d.Fragment,null,d.createElement(bt,{form:x,preserve:!1,layout:"vertical"},h&&d.createElement(bt.Item,{label:t("生效集群："),name:"cluster",initialValue:E[0]||"Default",rules:[{required:!0,message:t("生效集群不能为空")}]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},null==E?void 0:E.map((e=>d.createElement(Ba,{value:e,key:e},e)))))),d.createElement(Ct,{placeholder:`请输入要查询的${m}名称`,prefix:d.createElement(M,null),style:{marginBottom:"8px"},allowClear:!0,onChange:e=>{let t=e.target.value,n=[];b.forEach((e=>{-1!=e.name.toLowerCase().indexOf(t.toLowerCase())&&n.push(e)})),w(n)}}),d.createElement(Ft,{className:"samll_table",dataSource:T,columns:A,pagination:!(T.length<5)&&{pageSize:5},size:"small"}),S&&d.createElement(d.Fragment,null,d.createElement(Nt,null),d.createElement(Ft,{className:"samll_table",dataSource:S,columns:_,size:"small",pagination:!(S.length<5)&&{pageSize:5}})));case Ha.Import:return d.createElement(d.Fragment,null,d.createElement(bt,{form:x,preserve:!1,layout:"vertical"},h?d.createElement(bt.Item,{label:t("生效集群："),name:"cluster",initialValue:E[0]||"Default",rules:[{required:!0,message:t("生效集群不能为空")}]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},null==E?void 0:E.map((e=>d.createElement(Ba,{value:e,key:e},e))))):null,d.createElement(bt.Item,{label:(f.exports.isValidElement(i)?m:i)+t("JSON："),name:"import",rules:[{required:!0,message:t("请输入")+i,validateTrigger:"trigger"}]},d.createElement(za,{className:"code-area",placeholder:t("请输入")+(f.exports.isValidElement(i)?m:i),rows:4}))),S&&d.createElement(d.Fragment,null,d.createElement(Nt,null),d.createElement(Ft,{className:"samll_table",dataSource:S,columns:_,pagination:!1,size:"small"})))}})())}(ja=Ha||(Ha={})).Import="import",ja.Export="export",ja.BuiltIn="builtin",ja.None="hide";const $a=function(e={}){return ai("/api/n9e/users",{method:Qr.Get,params:e})},Ya=function(e){const t=e?e.limit?e:l(s({},e),{limit:200}):{limit:200};return ai("/api/n9e/user-groups",{method:Qr.Get,params:t})},Ua=function(e={}){return ai("/api/n9e/busi-groups",{method:Qr.Get,params:e})},Va=function(e){return ai(`/api/n9e/busi-group/${e}`,{method:Qr.Get}).then((e=>e&&e.dat))},Wa=function(e){return ai(`/api/n9e/user-group/${e}`,{method:Qr.Get}).then((e=>e&&e.dat))},Xa=function(){return ai("/api/n9e/notify-channels",{method:Qr.Get}).then((e=>e&&e.dat))},qa=function(){return ai("/api/n9e/contact-keys",{method:Qr.Get}).then((e=>e&&e.dat))},Ka=({checked:e,onChange:t,label:n})=>d.createElement(d.Fragment,null,d.createElement(Lt,{checked:e,onChange:t,style:{marginRight:5}}),n),{Option:Qa}=Mt,Za={labelCol:{span:3},wrapperCol:{span:20}},Ja={wrapperCol:{offset:5}},eo=[{id:2,field:"cluster",name:"集群"},{id:3,field:"severity",name:"级别"},{id:5,field:"prom_eval_interval",name:"执行频率"},{id:6,field:"prom_for_duration",name:"持续时长"},{id:4,field:"disabled",name:"启用"},{id:13,field:"enable_time",name:"生效时间"},{id:14,field:"enable_in_bg",name:"仅在本业务组生效"},{id:12,field:"append_tags",name:"附加标签"},{id:7,field:"notify_channels",name:"通知媒介"},{id:8,field:"notify_groups",name:"告警接收组"},{id:9,field:"notify_recovered",name:"启用恢复通知"},{id:10,field:"notify_repeat_step",name:"重复发送频率"},{id:15,field:"recover_duration",name:"留观时长"},{id:16,field:"notify_max_number",name:"最大发送次数"},{id:11,field:"callbacks",name:"回调地址"},{id:0,field:"note",name:"备注"},{id:1,field:"runbook_url",name:"预案链接"}];function to(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function no(e){const{isCorrectFormat:t,isLengthAllowed:n}=to(e.value);return t&&n?d.createElement(Ot,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(Tt,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Ot,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function ro(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=to(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const io=({isModalVisible:e,editModalFinish:t})=>{const{t:n,i18n:r}=Lr(),[i]=bt.useForm(),{clusters:a}=ri((e=>e.common)),[o,c]=f.exports.useState([]),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState("cluster"),[g,v]=f.exports.useState(!0);f.exports.useEffect((()=>(b(),C(""),()=>{})),[]);const y=[n("周日"),n("周一"),n("周二"),n("周三"),n("周四"),n("周五"),n("周六")].map(((e,t)=>d.createElement(Qa,{value:String(t),key:t},`${e}`))),x=o.map((e=>d.createElement(St,{value:e.key,key:e.label},e.label))),E=u.map((e=>d.createElement(Qa,{value:e.id,key:e.id},e.name))),b=async()=>{const e=await Xa();c(e||[])},C=async e=>{const t=await Ya({query:e}),n=t.dat||t;h(n||[])},T=f.exports.useCallback($.exports.debounce(C,800),[]);return d.createElement(d.Fragment,null,d.createElement(It,{title:n("批量更新"),visible:e,onOk:()=>{i.validateFields().then((async e=>{const n=s({},e);switch(e.field){case"enable_time":n.enable_stime=e.enable_time[0].format("HH:mm"),n.enable_etime=e.enable_time[1].format("HH:mm"),delete n.enable_time;break;case"disabled":n.disabled=e.enable_status?0:1,delete n.enable_status;break;case"enable_in_bg":n.enable_in_bg=e.enable_in_bg?1:0;break;case"callbacks":n.callbacks=e.callbacks.map((e=>e.url));break;case"notify_recovered":n.notify_recovered=e.notify_recovered?1:0}delete n.field,Object.keys(n).forEach((e=>{void 0===n[e]&&(n[e]=""),Array.isArray(n[e])&&(n[e]=n[e].join(" "))})),t(!0,n)}))},onCancel:()=>{t(!1)}},d.createElement(bt,l(s({},Za),{form:i,className:"strategy-form",layout:"horizontal",initialValues:{prom_eval_interval:15,disabled:0,enable_status:!0,notify_recovered:1,enable_time:[A("00:00","HH:mm"),A("23:59","HH:mm")],cluster:a[0]||"Default",enable_days_of_week:["1","2","3","4","5","6","0"],field:"cluster"}}),d.createElement(bt.Item,{label:n("字段："),name:"field",rules:[{required:!1}]},d.createElement(Mt,{suffixIcon:d.createElement(H,null),style:{width:"100%"},onChange:e=>{m(e)}},eo.map((e=>d.createElement(Qa,{key:e.id,value:e.field},e.name))))),(()=>{switch(p){case"note":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),name:"note",rules:[{required:!1}]},d.createElement(Ct,{placeholder:n("请输入规则备注")})));case"runbook_url":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),name:"runbook_url"},d.createElement(Ct,null)));case"cluster":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),name:"cluster",rules:[{required:!1,message:n("生效集群不能为空")}]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},null==a?void 0:a.map((e=>d.createElement(Qa,{value:e,key:e},e))))));case"severity":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),name:"severity",initialValue:2,rules:[{required:!1,message:n("告警级别不能为空")}]},d.createElement(Bt.Group,null,d.createElement(Bt,{value:1},n("一级报警")),d.createElement(Bt,{value:2},n("二级报警")),d.createElement(Bt,{value:3},n("三级报警")))));case"disabled":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),name:"enable_status",rules:[{required:!1,message:n("立即启用不能为空")}],valuePropName:"checked"},d.createElement(Lt,null)));case"enable_in_bg":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),name:"enable_in_bg",valuePropName:"checked"},d.createElement(Ka,{label:"根据告警事件中的ident归属关系判断"})));case"prom_eval_interval":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),rules:[{required:!1,message:n("执行频率不能为空")}]},d.createElement(Rt,null,d.createElement(bt.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:15,wrapperCol:{span:10}},d.createElement(Dt,{min:1,onChange:e=>{v(!g)}})),"秒",d.createElement(Tt,{title:n(`每隔${i.getFieldValue("prom_eval_interval")}秒，把PromQL作为查询条件，去查询后端存储，如果查到了数据就表示当次有监控数据触发了规则`)},d.createElement(V,null)))));case"prom_for_duration":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),rules:[{required:!1,message:n("持续时长不能为空")}]},d.createElement(Rt,null,d.createElement(bt.Item,{style:{marginBottom:0},name:"prom_for_duration",initialValue:60,wrapperCol:{span:10}},d.createElement(Dt,{min:0})),"秒",d.createElement(Tt,{title:n("通常持续时长大于执行频率，在持续时长内按照执行频率多次执行PromQL查询，每次都触发才生成告警；如果持续时长置为0，表示只要有一次PromQL查询触发阈值，就生成告警")},d.createElement(V,null)))));case"notify_channels":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),name:"notify_channels"},d.createElement(St.Group,null,x)));case"notify_groups":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),name:"notify_groups"},d.createElement(Mt,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>T(e),onBlur:()=>C("")},E)));case"notify_recovered":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),name:"notify_recovered",valuePropName:"checked"},d.createElement(Lt,null)));case"recover_duration":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为：")},d.createElement(Rt,null,d.createElement(bt.Item,{style:{marginBottom:0},name:"recover_duration",initialValue:0,wrapperCol:{span:10},rules:[{required:!1,message:n("留观时长不能为空")}]},d.createElement(Dt,{min:0,onChange:e=>{v(!g)}})),"秒",d.createElement(Tt,{title:n(`持续${i.getFieldValue("recover_duration")||0}秒没有再次触发阈值才发送恢复通知`)},d.createElement(V,null)))));case"notify_repeat_step":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为：")},d.createElement(Rt,null,d.createElement(bt.Item,{style:{marginBottom:0},name:"notify_repeat_step",initialValue:60,wrapperCol:{span:10},rules:[{required:!1,message:n("重复发送频率不能为空")}]},d.createElement(Dt,{min:0,onChange:e=>{v(!g)}})),"分钟",d.createElement(Tt,{title:n(`如果告警持续未恢复，间隔${i.getFieldValue("notify_repeat_step")}分钟之后重复提醒告警接收组的成员`)},d.createElement(V,null)))));case"notify_max_number":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为：")},d.createElement(Rt,null,d.createElement(bt.Item,{style:{marginBottom:0},name:"notify_max_number",initialValue:0,wrapperCol:{span:10},rules:[{required:!0,message:n("最大发送次数不能为空")}]},d.createElement(Dt,{min:0,precision:0})),d.createElement(Tt,{title:n("如果值为0，则不做最大发送次数的限制")},d.createElement(V,null)))));case"callbacks":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为：")},d.createElement(bt.List,{name:"callbacks",initialValue:[{}]},((e,{add:t,remove:n},{errors:r})=>d.createElement(d.Fragment,null,e.map(((e,t)=>d.createElement(kt,{gutter:[10,0],key:e.key},d.createElement(_t,{span:22},d.createElement(bt.Item,{name:[e.name,"url"]},d.createElement(Ct,null))),d.createElement(_t,{span:1},d.createElement(Y,{className:"control-icon-normal",onClick:()=>n(e.name)}))))),d.createElement(U,{className:"control-icon-normal",onClick:()=>t()}))))));case"append_tags":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},ro]},d.createElement(Mt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:no})));case"enable_time":return d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("改为："),name:"enable_days_of_week",rules:[{required:!1,message:n("生效时间不能为空")}]},d.createElement(Mt,{mode:"tags"},y)),d.createElement(bt.Item,l(s({name:"enable_time"},Ja),{rules:[{required:!1,message:n("生效时间不能为空")}]}),d.createElement(Pt.RangePicker,{format:"HH:mm",onChange:(e,t)=>{i.setFieldsValue({enable_stime:t[0],enable_etime:t[1]})}})));default:return null}})())))};function ao(e){const{onSeverityChange:t,onEventTypeChange:n,onBusiGroupChange:r,onClusterChange:i,noLeftPadding:a,noRightPadding:o=!0}=e,{clusters:s,busiGroups:l}=ri((e=>e.common)),[c,u]=f.exports.useState(l),h=f.exports.useCallback($.exports.debounce((e=>{oi(e).then((e=>{u(e.dat||[])}))}),800),[]);return d.createElement(Rt,{style:{marginLeft:a?0:8,marginRight:o?0:8}},i&&d.createElement(Mt,{mode:"multiple",allowClear:!0,style:{minWidth:80},placeholder:"集群",onChange:i,getPopupContainer:()=>document.body,dropdownMatchSelectWidth:!1},s.map((e=>d.createElement(Mt.Option,{value:e,key:e},e)))),r&&d.createElement(Mt,{allowClear:!0,showSearch:!0,style:{minWidth:120},placeholder:"业务组",dropdownClassName:"overflow-586",filterOption:!1,onSearch:h,getPopupContainer:()=>document.body,onFocus:()=>{oi("").then((e=>{u(e.dat||[])}))},onClear:()=>{oi("").then((e=>{u(e.dat||[])}))},onChange:r},c.map((e=>d.createElement(Mt.Option,{value:e.id,key:e.id},e.name)))),t&&d.createElement(Mt,{suffixIcon:d.createElement(H,null),allowClear:!0,style:{minWidth:80},placeholder:"事件级别",onChange:t,getPopupContainer:()=>document.body},d.createElement(Mt.Option,{value:1},"一级告警"),d.createElement(Mt.Option,{value:2},"二级告警"),d.createElement(Mt.Option,{value:3},"三级告警")),n&&d.createElement(Mt,{suffixIcon:d.createElement(H,null),allowClear:!0,style:{minWidth:80},placeholder:"事件类别",onChange:n,getPopupContainer:()=>document.body},d.createElement(Mt.Option,{value:0},"Triggered"),d.createElement(Mt.Option,{value:1},"Recovered")))}const{confirm:oo}=It,{TabPane:so}=zt,lo={cluster:void 0,create_by:void 0,group_id:void 0,id:void 0,notify_groups_obj:void 0,notify_groups:void 0,notify_users:void 0,create_at:void 0,update_at:void 0,update_by:void 0},co=({bgid:e})=>{const[t,n]=f.exports.useState(),[r,i]=f.exports.useState([]),{t:a,i18n:o}=Lr(),l=C(),[c,u]=f.exports.useState(Ha.None),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState(""),{curBusiItem:x}=ri((e=>e.common)),[E,b]=f.exports.useState(""),[T,w]=f.exports.useState(!1),[S,k]=f.exports.useState([]),[_,A]=f.exports.useState([]),[O,M]=f.exports.useState(!1);f.exports.useEffect((()=>{e&&N()}),[e,t]),f.exports.useEffect((()=>{F()}),[E,r,S]);const N=async()=>{if(!e)return;M(!0);const{success:n,dat:r}=await Di({id:e});n&&(k(r.filter((e=>!t||e.severity===t))||[]),M(!1))},F=()=>{const e=JSON.parse(JSON.stringify(S)).filter((e=>{const t=E.toLowerCase();return(e.name.toLowerCase().indexOf(t)>-1||e.append_tags.join(" ").toLowerCase().indexOf(t)>-1)&&(r&&(null==r?void 0:r.indexOf(e.cluster))>-1||0===(null==r?void 0:r.length))}));A(e||[])},L=(e,t=!1)=>{(null==x?void 0:x.id)&&l.push(`/alert-rules/edit/${e}${t?"?mode=clone":""}`)},P=()=>{N()},R=[{title:a("集群"),dataIndex:"cluster",render:e=>d.createElement("div",null,e)},{title:a("级别"),dataIndex:"severity",render:e=>d.createElement(Ot,{color:Fi[e-1]},"S",e)},{title:a("名称"),dataIndex:"name",render:(e,t)=>d.createElement("div",{className:"table-active-text",onClick:()=>{L(t.id)}},e)},{title:a("告警接收者"),dataIndex:"notify_groups_obj",width:100,render:(e,t)=>e.length&&e.map(((e,t)=>d.createElement(Da,{text:e.nickname||e.username||e.name,key:t})))||d.createElement("div",null)},{title:a("附加标签"),dataIndex:"append_tags",render:e=>{const t=e||[];return t.length&&t.map(((e,t)=>d.createElement(Da,{text:e,key:t})))||d.createElement("div",null)}},{title:a("更新时间"),dataIndex:"update_at",width:120,render:e=>W(1e3*Number(e)).format("YYYY-MM-DD HH:mm:ss")},{title:a("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Lt,{checked:e===ka.Enable,size:"small",onChange:()=>{const{id:e,disabled:n}=t;Gi({ids:[e],fields:{disabled:n?0:1}},x.id).then((()=>{P()}))}})},{title:a("操作"),dataIndex:"operator",width:160,render:(e,t)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{L(t.id,!0)}},a("克隆")),d.createElement("div",{className:"table-operator-area-warning",onClick:()=>{oo({title:a("是否删除该告警规则?"),onOk:()=>{ji([t.id],x.id).then((()=>{vt.success(a("删除成功")),P()}))},onCancel(){}})}},a("删除")),"holtwinters"===t.algorithm&&d.createElement("div",null,d.createElement(D,{to:{pathname:`/alert-rules/brain/${t.id}`}},"训练结果")))}],B=f.exports.useMemo((()=>d.createElement("ul",{className:"ant-dropdown-menu"},d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>u(Ha.BuiltIn)},d.createElement("span",null,a("导入告警规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{if(m.length){const e=m.map((e=>s(s({},e),lo)));y(JSON.stringify(e,null,2)),u(Ha.Export)}else vt.warning(a("未选择任何规则"))}},d.createElement("span",null,a("导出告警规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{h.length?oo({title:a("是否批量删除告警规则?"),onOk:()=>{ji(h,null==x?void 0:x.id).then((()=>{vt.success(a("删除成功")),P()}))},onCancel(){}}):vt.warning(a("未选择任何规则"))}},d.createElement("span",null,a("批量删除规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{a("批量更新规则"),0!=h.length?w(!0):vt.warning(a("请先选择策略"))}},d.createElement("span",null,a("批量更新规则"))))),[h,a]);return d.createElement("div",{className:"strategy-table-content"},d.createElement("div",{className:"strategy-table-search table-handle"},d.createElement("div",{className:"strategy-table-search-left"},d.createElement(Ra,{className:"strategy-table-search-left-refresh",onClick:()=>{P()}}),d.createElement(ao,{noLeftPadding:!0,noRightPadding:!1,onSeverityChange:e=>n(e),onClusterChange:e=>i(e)}),d.createElement(Ta,{className:"searchInput",placeholder:a("搜索名称或标签"),onSearch:b,allowClear:!0})),d.createElement("div",{className:"strategy-table-search-right"},d.createElement(xt,{type:"primary",onClick:()=>{(null==x?void 0:x.id)&&l.push(`/alert-rules/add/${x.id}`)},className:"strategy-table-search-right-create",ghost:!0},a("新增告警规则")),d.createElement("div",{className:"table-more-options"},d.createElement(wt,{overlay:B,trigger:["click"]},d.createElement(xt,{onClick:e=>e.stopPropagation()},a("更多操作"),d.createElement(I,{style:{marginLeft:2}})))))),d.createElement(Ft,{rowKey:"id",pagination:{total:_.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:La,defaultPageSize:30},loading:O,dataSource:_,rowSelection:{selectedRowKeys:m.map((e=>e.id)),onChange:(e,t)=>{p(e),g(t)}},columns:R}),d.createElement(Ga,{bgid:e,status:c,fetchBuiltinFunc:Yi,submitBuiltinFunc:Ui,onClose:()=>{u(Ha.None)},onSuccess:()=>{N()},onSubmit:async e=>{const{dat:t}=await Hi(e,x.id,"Post");return t||{}},label:"告警规则",title:Ha.Export===c?"告警规则":d.createElement(zt,{defaultActiveKey:Ha.BuiltIn,onChange:e=>u(e),className:"custom-import-alert-title"},d.createElement(so,{tab:" 导入内置告警规则",key:Ha.BuiltIn}),d.createElement(so,{tab:"导入告警规则JSON",key:Ha.Import})),exportData:v}),T&&d.createElement(io,{isModalVisible:T,editModalFinish:async(e,t)=>{if(e){const e=await Gi({ids:h,fields:t},x.id);e.err?vt.error(e.err):(vt.success("修改成功！"),P(),w(!1))}else w(!1)}}))};const uo=()=>{const e=hi(),t=C(),n=e.get("id"),{t:r}=Lr();return d.createElement(Ki,{title:r("告警规则"),icon:d.createElement(L,null),hideCluster:!0},d.createElement("div",{className:"strategy-content"},d.createElement(ba,{busiGroup:{defaultSelect:n?Number(n):void 0,onChange:e=>{t.push(`/alert-rules?id=${e}`)}}}),n?d.createElement(co,{bgid:Number(n)}):d.createElement(Ca,{text:"告警规则"})))};function ho(){const{t:e}=Lr(),[t]=bt.useForm(),n=()=>{const{oldpass:n,newpass:r}=t.getFieldsValue();(function(e,t){return ai("/api/n9e/self/password",{method:Qr.Put,data:{oldpass:e,newpass:t}})})(n,r).then((t=>{console.log(t),vt.success(e("修改密码成功"))}))};return d.createElement(bt,{form:t,layout:"vertical",requiredMark:!0},d.createElement(bt.Item,{label:d.createElement("span",null,e("旧密码"),":"),required:!0,name:"oldpass",rules:[{required:!0,message:e("请输入旧密码")}]},d.createElement(Ct,{placeholder:e("请输入旧密码"),type:"password"})),d.createElement(bt.Item,{label:d.createElement("span",null,e("新密码"),":"),required:!0,name:"newpass",hasFeedback:!0,rules:[{required:!0,message:e("请输入新密码")}]},d.createElement(Ct,{placeholder:e("请输入新密码"),type:"password"})),d.createElement(bt.Item,{label:d.createElement("span",null,e("确认密码"),": "),required:!0,name:"newpassagain",hasFeedback:!0,rules:[{required:!0,message:e("再次输入新密码")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("newpass")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(Ct,{placeholder:e("再次输入新密码"),type:"password"})),d.createElement(bt.Item,null,d.createElement(xt,{type:"primary",onClick:async()=>{try{await t.validateFields(),n()}catch(rh){console.log(e("输入有误"))}}},e("确认修改"))))}const{Option:po}=Mt;function fo(){const{t:e}=Lr(),[t]=bt.useForm(),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState([]);let{profile:o}=ri((e=>e.account));const[u,h]=f.exports.useState(o.portrait||"/image/avatar1.png"),[p,m]=f.exports.useState(""),g=Wr();f.exports.useEffect((()=>{const{id:e,nickname:n,email:r,phone:i,contacts:a,portrait:s}=o;t.setFieldsValue({nickname:n,email:r,phone:i,contacts:a}),s.startsWith("http")&&m(s)}),[o]),f.exports.useEffect((()=>{qa().then((e=>{a(e)}))}),[]);const v=async()=>{try{await t.validateFields(),y()}catch(n){console.log(e("输入有误"),n)}},y=()=>{const{nickname:n,email:r,phone:i,moreContacts:a}=t.getFieldsValue();let{contacts:c}=t.getFieldsValue();a&&a.length>0&&a.forEach((e=>{const{key:t,value:n}=e;t&&n&&(c?c[t]=n:c={[t]:n})}));for(let e in c)c[e]||delete c[e];g({type:"account/updateProfile",data:l(s({},o),{portrait:p||u,nickname:n,email:r,phone:i,contacts:c})}),vt.success(e("信息保存成功"))},x=new Array(8).fill(0).map(((e,t)=>t+1));return d.createElement(d.Fragment,null,d.createElement(bt,{form:t,layout:"vertical"},d.createElement(kt,{gutter:16,style:{marginBottom:"24px"}},d.createElement(_t,{span:20},d.createElement(kt,{gutter:16,style:{marginBottom:"24px"}},d.createElement(_t,{span:4},d.createElement("div",null,d.createElement("label",null,e("用户名"),"："),d.createElement("span",null,o.username))),d.createElement(_t,{span:4},d.createElement("div",null,d.createElement("label",null,e("角色"),"："),d.createElement("span",null,o.roles.join(", "))))),d.createElement(bt.Item,{label:d.createElement("span",null,e("显示名"),"："),name:"nickname"},d.createElement(Ct,{placeholder:e("请输入显示名")})),d.createElement(bt.Item,{label:d.createElement("span",null,e("邮箱"),"："),name:"email"},d.createElement(Ct,{placeholder:e("请输入邮箱")})),d.createElement(bt.Item,{label:d.createElement("span",null,e("手机"),"："),name:"phone"},d.createElement(Ct,{placeholder:e("请输入手机号")})),o.contacts&&Object.keys(o.contacts).sort().map(((t,n)=>{let r=i.find((e=>e.key===t));return d.createElement(d.Fragment,null,r?d.createElement(bt.Item,{label:r.label+"：",name:["contacts",t],key:n},d.createElement(Ct,{placeholder:`${e("请输入")}${t}`})):null)})),d.createElement(bt.Item,{label:e("更多联系方式")},d.createElement(bt.List,{name:"moreContacts"},((t,{add:n,remove:r})=>d.createElement(d.Fragment,null,t.map((t=>{var n=t,{key:a,name:o,fieldKey:u}=n,h=c(n,["key","name","fieldKey"]);return d.createElement(Rt,{key:a,style:{display:"flex"},align:"baseline"},d.createElement(bt.Item,l(s({style:{width:"180px"}},h),{name:[o,"key"],fieldKey:[u,"key"],rules:[{required:!0,message:e("联系方式不能为空")}]}),d.createElement(Mt,{suffixIcon:d.createElement(H,null),placeholder:e("请选择联系方式")},i.map(((e,t)=>d.createElement(po,{value:e.key,key:t},e.label))))),d.createElement(bt.Item,l(s({},h),{style:{width:"330px"},name:[o,"value"],fieldKey:[u,"value"],rules:[{required:!0,message:e("值不能为空")}]}),d.createElement(Ct,{placeholder:e("请输入值")})),d.createElement(Y,{className:"control-icon-normal",onClick:()=>r(o)}))})),d.createElement(U,{className:"control-icon-normal",onClick:()=>n()}))))),d.createElement(bt.Item,null,d.createElement(xt,{type:"primary",onClick:v},e("确认修改")))),d.createElement(_t,{span:4},d.createElement("div",{className:"avatar"},d.createElement("img",{src:o.portrait||"/image/avatar1.png"}),d.createElement(xt,{type:"primary",className:"update-avatar",onClick:()=>r(!0)},e("更换头像")))))),d.createElement(It,{title:e("更换头像"),visible:n,onOk:()=>{if(p){if(!p.startsWith("http"))return void vt.error(e("自定义头像需以http开头"));fetch(p,{mode:"no-cors"}).then((e=>{r(!1),v()})).catch((t=>{vt.error(e("自定义头像")+t)}))}else r(!1),v()},onCancel:()=>{r(!1)},wrapClassName:"avatar-modal"},d.createElement("div",{className:"avatar-content"},x.map((e=>d.createElement("div",{key:e,className:`/image/avatar${e}.png`===u?"avatar active":"avatar",onClick:()=>(e=>{h(`/image/avatar${e}.png`)})(e)},d.createElement("img",{src:`/image/avatar${e}.png`}))))),d.createElement(Ct,{addonBefore:d.createElement("span",null,e("头像URL"),":"),onChange:e=>m(e.target.value),value:p})))}const{TabPane:mo}=zt;function go(){const{t:e}=Lr(),{tab:t}=X(),n=C();return d.createElement(Ki,{title:e("个人中心"),hideCluster:!0},d.createElement(zt,{activeKey:t,className:"profile",onChange:e=>{n.push("/account/profile/"+e)}},d.createElement(mo,{tab:e("personalInfo"),key:"info"},d.createElement(fo,null)),d.createElement(mo,{tab:e("修改密码"),key:"pwd"},d.createElement(ho,null))))}const vo=function(e,t){return ai(`/api/n9e/busi-group/${e}/boards`,{method:Qr.Post,data:t}).then((e=>e.dat))},yo=function(e){return ai("/api/n9e/boards",{method:Qr.Delete,data:{ids:e}})},xo=function(e){return ai(`/api/n9e/board/${e}`,{method:Qr.Get}).then((e=>e.dat))},Eo=function(e,t){return ai(`/api/n9e/board/${e}`,{method:Qr.Put,data:t})},bo=function(e,t){return ai(`/api/n9e/board/${e}/configs`,{method:Qr.Put,data:t})},Co=function(e,t){return ai(`/api/n9e/dashboard/${e}/migrate`,{method:Qr.Put,data:t})};function To(e){return function(t){const n=document.createElement("div");function r(){q.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),q.render(d.createElement(e,s({},i)),n),{destroy:r}}}const wo={labelCol:{span:4},wrapperCol:{span:16}},So={crate:"创建新监控大盘",edit:"编辑监控大盘"};var ko=To((function(e){const{mode:t,initialValues:n={},visible:r,busiId:i,refreshList:a,destroy:o}=e,[c]=bt.useForm();return d.createElement(It,{title:So[t],visible:r,onOk:async()=>{const e=await c.validateFields();"edit"===t?(await Eo(n.id,{name:e.name,tags:T.join(e.tags," ")}),vt.success("编辑大盘成功")):"crate"===t&&(await vo(i,{name:e.name,tags:T.join(e.tags," "),configs:JSON.stringify({var:[],panels:[],version:"2.0.0"})}),vt.success("新建大盘成功")),a(),o()},onCancel:()=>{o()},destroyOnClose:!0},d.createElement(bt,l(s({},wo),{form:c,preserve:!1,initialValues:n}),d.createElement(bt.Item,{label:"大盘名称",name:"name",wrapperCol:{span:24},rules:[{required:!0,message:"请输入大盘名称"}]},d.createElement(Ct,null)),d.createElement(bt.Item,{wrapperCol:{span:24},label:"分类标签",name:"tags"},d.createElement(Mt,{mode:"tags",dropdownStyle:{display:"none"},placeholder:"请输入分类标签(请用回车分割)"})),d.createElement(bt.Item,{name:"id",hidden:!0},d.createElement(Ct,null))))})),_o={exports:{}};var Ao={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16};var Oo="object"==typeof process&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=Ao,r=Oo,i=(t=e.exports={}).re=[],a=t.src=[],o=t.t={};let s=0;const l=(e,t,n)=>{const l=s++;r(l,t),o[e]=l,a[l]=t,i[l]=new RegExp(t,n?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${a[o.NUMERICIDENTIFIER]}|${a[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${a[o.NUMERICIDENTIFIERLOOSE]}|${a[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${a[o.PRERELEASEIDENTIFIER]}(?:\\.${a[o.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${a[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[o.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${a[o.BUILDIDENTIFIER]}(?:\\.${a[o.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${a[o.MAINVERSION]}${a[o.PRERELEASE]}?${a[o.BUILD]}?`),l("FULL",`^${a[o.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${a[o.MAINVERSIONLOOSE]}${a[o.PRERELEASELOOSE]}?${a[o.BUILD]}?`),l("LOOSE",`^${a[o.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${a[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${a[o.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:${a[o.PRERELEASE]})?${a[o.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:${a[o.PRERELEASELOOSE]})?${a[o.BUILD]}?)?)?`),l("XRANGE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",a[o.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${a[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${a[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${a[o.LONECARET]}${a[o.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${a[o.LONECARET]}${a[o.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${a[o.GTLT]}\\s*(${a[o.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]}|${a[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${a[o.XRANGEPLAIN]})\\s+-\\s+(${a[o.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${a[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[o.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0.0.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(_o,_o.exports);const Io=["includePrerelease","loose","rtl"];var Mo=e=>e?"object"!=typeof e?{loose:!0}:Io.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};const No=/^[0-9]+$/,Fo=(e,t)=>{const n=No.test(e),r=No.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var Lo={compareIdentifiers:Fo,rcompareIdentifiers:(e,t)=>Fo(t,e)};const Po=Oo,{MAX_LENGTH:Ro,MAX_SAFE_INTEGER:Do}=Ao,{re:Bo,t:zo}=_o.exports,Ho=Mo,{compareIdentifiers:jo}=Lo;class Go{constructor(e,t){if(t=Ho(t),e instanceof Go){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>Ro)throw new TypeError(`version is longer than ${Ro} characters`);Po("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?Bo[zo.LOOSE]:Bo[zo.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Do||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Do||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Do||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<Do)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Po("SemVer.compare",this.version,this.options,e),!(e instanceof Go)){if("string"==typeof e&&e===this.version)return 0;e=new Go(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Go||(e=new Go(e,this.options)),jo(this.major,e.major)||jo(this.minor,e.minor)||jo(this.patch,e.patch)}comparePre(e){if(e instanceof Go||(e=new Go(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(Po("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return jo(n,r)}while(++t)}compareBuild(e){e instanceof Go||(e=new Go(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(Po("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return jo(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var $o=Go;const{MAX_LENGTH:Yo}=Ao,{re:Uo,t:Vo}=_o.exports,Wo=$o,Xo=Mo;var qo=(e,t)=>{if(t=Xo(t),e instanceof Wo)return e;if("string"!=typeof e)return null;if(e.length>Yo)return null;if(!(t.loose?Uo[Vo.LOOSE]:Uo[Vo.FULL]).test(e))return null;try{return new Wo(e,t)}catch(n){return null}};const Ko=qo;var Qo=(e,t)=>{const n=Ko(e,t);return n?n.version:null};const Zo=qo;var Jo=(e,t)=>{const n=Zo(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};const es=$o;var ts=(e,t,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new es(e,n).inc(t,r).version}catch(i){return null}};const ns=$o;var rs=(e,t,n)=>new ns(e,n).compare(new ns(t,n));const is=rs;var as=(e,t,n)=>0===is(e,t,n);const os=qo,ss=as;var ls=(e,t)=>{if(ss(e,t))return null;{const n=os(e),r=os(t),i=n.prerelease.length||r.prerelease.length,a=i?"pre":"",o=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return a+e;return o}};const cs=$o;var us=(e,t)=>new cs(e,t).major;const hs=$o;var ps=(e,t)=>new hs(e,t).minor;const ds=$o;var fs=(e,t)=>new ds(e,t).patch;const ms=qo;var gs=(e,t)=>{const n=ms(e,t);return n&&n.prerelease.length?n.prerelease:null};const vs=rs;var ys=(e,t,n)=>vs(t,e,n);const xs=rs;var Es=(e,t)=>xs(e,t,!0);const bs=$o;var Cs=(e,t,n)=>{const r=new bs(e,n),i=new bs(t,n);return r.compare(i)||r.compareBuild(i)};const Ts=Cs;var ws=(e,t)=>e.sort(((e,n)=>Ts(e,n,t)));const Ss=Cs;var ks=(e,t)=>e.sort(((e,n)=>Ss(n,e,t)));const _s=rs;var As=(e,t,n)=>_s(e,t,n)>0;const Os=rs;var Is=(e,t,n)=>Os(e,t,n)<0;const Ms=rs;var Ns=(e,t,n)=>0!==Ms(e,t,n);const Fs=rs;var Ls=(e,t,n)=>Fs(e,t,n)>=0;const Ps=rs;var Rs=(e,t,n)=>Ps(e,t,n)<=0;const Ds=as,Bs=Ns,zs=As,Hs=Ls,js=Is,Gs=Rs;var $s=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Ds(e,n,r);case"!=":return Bs(e,n,r);case">":return zs(e,n,r);case">=":return Hs(e,n,r);case"<":return js(e,n,r);case"<=":return Gs(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};const Ys=$o,Us=qo,{re:Vs,t:Ws}=_o.exports;var Xs=(e,t)=>{if(e instanceof Ys)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=Vs[Ws.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),Vs[Ws.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;Vs[Ws.COERCERTL].lastIndex=-1}else n=e.match(Vs[Ws.COERCE]);return null===n?null:Us(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};class qs{constructor(e,t){if(t=Zs(t),e instanceof qs)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new qs(e.raw,t);if(e instanceof Js)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!sl(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&ll(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=Qs.get(t);if(n)return n;const r=this.options.loose,i=r?nl[rl.HYPHENRANGELOOSE]:nl[rl.HYPHENRANGE];e=e.replace(i,El(this.options.includePrerelease)),el("hyphen replace",e),e=e.replace(nl[rl.COMPARATORTRIM],il),el("comparator trim",e,nl[rl.COMPARATORTRIM]),e=(e=(e=e.replace(nl[rl.TILDETRIM],al)).replace(nl[rl.CARETTRIM],ol)).split(/\s+/).join(" ");const a=r?nl[rl.COMPARATORLOOSE]:nl[rl.COMPARATOR],o=e.split(" ").map((e=>ul(e,this.options))).join(" ").split(/\s+/).map((e=>xl(e,this.options))).filter(this.options.loose?e=>!!e.match(a):()=>!0).map((e=>new Js(e,this.options)));o.length;const s=new Map;for(const c of o){if(sl(c))return[c];s.set(c.value,c)}s.size>1&&s.has("")&&s.delete("");const l=[...s.values()];return Qs.set(t,l),l}intersects(e,t){if(!(e instanceof qs))throw new TypeError("a Range is required");return this.set.some((n=>cl(n,t)&&e.set.some((e=>cl(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new tl(e,this.options)}catch(t){return!1}for(let n=0;n<this.set.length;n++)if(bl(this.set[n],e,this.options))return!0;return!1}}var Ks=qs;const Qs=new tn({max:1e3}),Zs=Mo,Js=wl,el=Oo,tl=$o,{re:nl,t:rl,comparatorTrimReplace:il,tildeTrimReplace:al,caretTrimReplace:ol}=_o.exports,sl=e=>"<0.0.0-0"===e.value,ll=e=>""===e.value,cl=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},ul=(e,t)=>(el("comp",e,t),e=fl(e,t),el("caret",e),e=pl(e,t),el("tildes",e),e=gl(e,t),el("xrange",e),e=yl(e,t),el("stars",e),e),hl=e=>!e||"x"===e.toLowerCase()||"*"===e,pl=(e,t)=>e.trim().split(/\s+/).map((e=>dl(e,t))).join(" "),dl=(e,t)=>{const n=t.loose?nl[rl.TILDELOOSE]:nl[rl.TILDE];return e.replace(n,((t,n,r,i,a)=>{let o;return el("tilde",e,t,n,r,i,a),hl(n)?o="":hl(r)?o=`>=${n}.0.0 <${+n+1}.0.0-0`:hl(i)?o=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:a?(el("replaceTilde pr",a),o=`>=${n}.${r}.${i}-${a} <${n}.${+r+1}.0-0`):o=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,el("tilde return",o),o}))},fl=(e,t)=>e.trim().split(/\s+/).map((e=>ml(e,t))).join(" "),ml=(e,t)=>{el("caret",e,t);const n=t.loose?nl[rl.CARETLOOSE]:nl[rl.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,a,o)=>{let s;return el("caret",e,t,n,i,a,o),hl(n)?s="":hl(i)?s=`>=${n}.0.0${r} <${+n+1}.0.0-0`:hl(a)?s="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:o?(el("replaceCaret pr",o),s="0"===n?"0"===i?`>=${n}.${i}.${a}-${o} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}-${o} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a}-${o} <${+n+1}.0.0-0`):(el("no pr"),s="0"===n?"0"===i?`>=${n}.${i}.${a}${r} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a} <${+n+1}.0.0-0`),el("caret return",s),s}))},gl=(e,t)=>(el("replaceXRanges",e,t),e.split(/\s+/).map((e=>vl(e,t))).join(" ")),vl=(e,t)=>{e=e.trim();const n=t.loose?nl[rl.XRANGELOOSE]:nl[rl.XRANGE];return e.replace(n,((n,r,i,a,o,s)=>{el("xRange",e,n,r,i,a,o,s);const l=hl(i),c=l||hl(a),u=c||hl(o),h=u;return"="===r&&h&&(r=""),s=t.includePrerelease?"-0":"",l?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(c&&(a=0),o=0,">"===r?(r=">=",c?(i=+i+1,a=0,o=0):(a=+a+1,o=0)):"<="===r&&(r="<",c?i=+i+1:a=+a+1),"<"===r&&(s="-0"),n=`${r+i}.${a}.${o}${s}`):c?n=`>=${i}.0.0${s} <${+i+1}.0.0-0`:u&&(n=`>=${i}.${a}.0${s} <${i}.${+a+1}.0-0`),el("xRange return",n),n}))},yl=(e,t)=>(el("replaceStars",e,t),e.trim().replace(nl[rl.STAR],"")),xl=(e,t)=>(el("replaceGTE0",e,t),e.trim().replace(nl[t.includePrerelease?rl.GTE0PRE:rl.GTE0],"")),El=e=>(t,n,r,i,a,o,s,l,c,u,h,p,d)=>`${n=hl(r)?"":hl(i)?`>=${r}.0.0${e?"-0":""}`:hl(a)?`>=${r}.${i}.0${e?"-0":""}`:o?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=hl(c)?"":hl(u)?`<${+c+1}.0.0-0`:hl(h)?`<${c}.${+u+1}.0-0`:p?`<=${c}.${u}.${h}-${p}`:e?`<${c}.${u}.${+h+1}-0`:`<=${l}`}`.trim(),bl=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(el(e[n].semver),e[n].semver!==Js.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},Cl=Symbol("SemVer ANY");class Tl{static get ANY(){return Cl}constructor(e,t){if(t=Sl(t),e instanceof Tl){if(e.loose===!!t.loose)return e;e=e.value}Ol("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Cl?this.value="":this.value=this.operator+this.semver.version,Ol("comp",this)}parse(e){const t=this.options.loose?kl[_l.COMPARATORLOOSE]:kl[_l.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new Il(n[2],this.options.loose):this.semver=Cl}toString(){return this.value}test(e){if(Ol("Comparator.test",e,this.options.loose),this.semver===Cl||e===Cl)return!0;if("string"==typeof e)try{e=new Il(e,this.options)}catch(t){return!1}return Al(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Tl))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new Ml(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new Ml(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),o=Al(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=Al(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&a||o||s}}var wl=Tl;const Sl=Mo,{re:kl,t:_l}=_o.exports,Al=$s,Ol=Oo,Il=$o,Ml=Ks,Nl=Ks;var Fl=(e,t,n)=>{try{t=new Nl(t,n)}catch(r){return!1}return t.test(e)};const Ll=Ks;var Pl=(e,t)=>new Ll(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));const Rl=$o,Dl=Ks;var Bl=(e,t,n)=>{let r=null,i=null,a=null;try{a=new Dl(t,n)}catch(o){return null}return e.forEach((e=>{a.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new Rl(r,n)))})),r};const zl=$o,Hl=Ks;var jl=(e,t,n)=>{let r=null,i=null,a=null;try{a=new Hl(t,n)}catch(o){return null}return e.forEach((e=>{a.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new zl(r,n)))})),r};const Gl=$o,$l=Ks,Yl=As;var Ul=(e,t)=>{e=new $l(e,t);let n=new Gl("0.0.0");if(e.test(n))return n;if(n=new Gl("0.0.0-0"),e.test(n))return n;n=null;for(let r=0;r<e.set.length;++r){const t=e.set[r];let i=null;t.forEach((e=>{const t=new Gl(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!Yl(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!Yl(n,i)||(n=i)}return n&&e.test(n)?n:null};const Vl=Ks;var Wl=(e,t)=>{try{return new Vl(e,t).range||"*"}catch(n){return null}};const Xl=$o,ql=wl,{ANY:Kl}=ql,Ql=Ks,Zl=Fl,Jl=As,ec=Is,tc=Rs,nc=Ls;var rc=(e,t,n,r)=>{let i,a,o,s,l;switch(e=new Xl(e,r),t=new Ql(t,r),n){case">":i=Jl,a=tc,o=ec,s=">",l=">=";break;case"<":i=ec,a=nc,o=Jl,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Zl(e,t,r))return!1;for(let c=0;c<t.set.length;++c){const n=t.set[c];let u=null,h=null;if(n.forEach((e=>{e.semver===Kl&&(e=new ql(">=0.0.0")),u=u||e,h=h||e,i(e.semver,u.semver,r)?u=e:o(e.semver,h.semver,r)&&(h=e)})),u.operator===s||u.operator===l)return!1;if((!h.operator||h.operator===s)&&a(e,h.semver))return!1;if(h.operator===l&&o(e,h.semver))return!1}return!0};const ic=rc;var ac=(e,t,n)=>ic(e,t,">",n);const oc=rc;var sc=(e,t,n)=>oc(e,t,"<",n);const lc=Ks;var cc=(e,t,n)=>(e=new lc(e,n),t=new lc(t,n),e.intersects(t));const uc=Fl,hc=rs;const pc=Ks,dc=wl,{ANY:fc}=dc,mc=Fl,gc=rs,vc=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===fc){if(1===t.length&&t[0].semver===fc)return!0;e=n.includePrerelease?[new dc(">=0.0.0-0")]:[new dc(">=0.0.0")]}if(1===t.length&&t[0].semver===fc){if(n.includePrerelease)return!0;t=[new dc(">=0.0.0")]}const r=new Set;let i,a,o,s,l,c,u;for(const d of e)">"===d.operator||">="===d.operator?i=yc(i,d,n):"<"===d.operator||"<="===d.operator?a=xc(a,d,n):r.add(d.semver);if(r.size>1)return null;if(i&&a){if(o=gc(i.semver,a.semver,n),o>0)return null;if(0===o&&(">="!==i.operator||"<="!==a.operator))return null}for(const d of r){if(i&&!mc(d,String(i),n))return null;if(a&&!mc(d,String(a),n))return null;for(const e of t)if(!mc(d,String(e),n))return!1;return!0}let h=!(!a||n.includePrerelease||!a.semver.prerelease.length)&&a.semver,p=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;h&&1===h.prerelease.length&&"<"===a.operator&&0===h.prerelease[0]&&(h=!1);for(const d of t){if(u=u||">"===d.operator||">="===d.operator,c=c||"<"===d.operator||"<="===d.operator,i)if(p&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===p.major&&d.semver.minor===p.minor&&d.semver.patch===p.patch&&(p=!1),">"===d.operator||">="===d.operator){if(s=yc(i,d,n),s===d&&s!==i)return!1}else if(">="===i.operator&&!mc(i.semver,String(d),n))return!1;if(a)if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),"<"===d.operator||"<="===d.operator){if(l=xc(a,d,n),l===d&&l!==a)return!1}else if("<="===a.operator&&!mc(a.semver,String(d),n))return!1;if(!d.operator&&(a||i)&&0!==o)return!1}return!(i&&c&&!a&&0!==o)&&(!(a&&u&&!i&&0!==o)&&(!p&&!h))},yc=(e,t,n)=>{if(!e)return t;const r=gc(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},xc=(e,t,n)=>{if(!e)return t;const r=gc(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};var Ec=(e,t,n={})=>{if(e===t)return!0;e=new pc(e,n),t=new pc(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=vc(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0};const bc=_o.exports;var Cc,Tc={re:bc.re,src:bc.src,tokens:bc.t,SEMVER_SPEC_VERSION:Ao.SEMVER_SPEC_VERSION,SemVer:$o,compareIdentifiers:Lo.compareIdentifiers,rcompareIdentifiers:Lo.rcompareIdentifiers,parse:qo,valid:Qo,clean:Jo,inc:ts,diff:ls,major:us,minor:ps,patch:fs,prerelease:gs,compare:rs,rcompare:ys,compareLoose:Es,compareBuild:Cs,sort:ws,rsort:ks,gt:As,lt:Is,eq:as,neq:Ns,gte:Ls,lte:Rs,cmp:$s,coerce:Xs,Comparator:wl,Range:Ks,satisfies:Fl,toComparators:Pl,maxSatisfying:Bl,minSatisfying:jl,minVersion:Ul,validRange:Wl,outside:rc,gtr:ac,ltr:sc,intersects:cc,simplifyRange:(e,t,n)=>{const r=[];let i=null,a=null;const o=e.sort(((e,t)=>hc(e,t,n)));for(const u of o){uc(u,t,n)?(a=u,i||(i=u)):(a&&r.push([i,a]),a=null,i=null)}i&&r.push([i,null]);const s=[];for(const[u,h]of r)u===h?s.push(u):h||u!==o[0]?h?u===o[0]?s.push(`<=${h}`):s.push(`${u} - ${h}`):s.push(`>=${u}`):s.push("*");const l=s.join(" || "),c="string"==typeof t.raw?t.raw:String(t);return l.length<c.length?l:t},subset:Ec},wc=new Uint8Array(16);function Sc(){if(!Cc&&!(Cc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cc(wc)}var kc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _c(e){return"string"==typeof e&&kc.test(e)}for(var Ac=[],Oc=0;Oc<256;++Oc)Ac.push((Oc+256).toString(16).substr(1));function Ic(e,t,n){var r=(e=e||{}).random||(e.rng||Sc)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Ac[e[t+0]]+Ac[e[t+1]]+Ac[e[t+2]]+Ac[e[t+3]]+"-"+Ac[e[t+4]]+Ac[e[t+5]]+"-"+Ac[e[t+6]]+Ac[e[t+7]]+"-"+Ac[e[t+8]]+Ac[e[t+9]]+"-"+Ac[e[t+10]]+Ac[e[t+11]]+Ac[e[t+12]]+Ac[e[t+13]]+Ac[e[t+14]]+Ac[e[t+15]]).toLowerCase();if(!_c(n))throw TypeError("Stringified UUID is invalid");return n}(r)}const Mc=[{label:"green / orange",value:["#83c898","#c2c2c2","#fc653f"]},{label:"yellow / green",value:["#f0ee6e","#6ba261","#306d52"]},{label:"warm",value:["#ffeda0","#fc4e2a","#800026"]},{label:"cool",value:["#c7f1ff","#42a1fa","#083294"]},{label:"plasma",value:["#f0f921","#b12a90","#0d0887"]},{label:"viridis",value:["#fde725","#2a788e","#440154"]}],Nc=[{type:"timeseries",name:"时间序列图"},{type:"stat",name:"指标值"},{type:"table",name:"表格"},{type:"pie",name:"饼图"},{type:"hexbin",name:"蜂窝图"}],Fc={lastNotNull:{name:"最后一个非空值"},last:{name:"最后一个值"},firstNotNull:{name:"第一个非空值"},first:{name:"第一个值"},min:{name:"最小值"},max:{name:"最大值"},avg:{name:"平均值"},sum:{name:"总和"},count:{name:"数量"}},Lc={version:"1.0.0",type:"timeseries",options:{tooltip:{mode:"all",sort:"none"},legend:{displayMode:"hidden"}},custom:{},overrides:[{}]},Pc={timeseries:{drawStyle:"lines",lineInterpolation:"smooth",fillOpacity:.5,stack:"off"},stat:{textMode:"valueAndName",colorMode:"value",calc:"lastNotNull",colSpan:1,textSize:{}},pie:{textMode:"valueAndName",colorMode:"value",calc:"lastNotNull",textSize:{},legengPosition:"right"},table:{showHeader:!0,colorMode:"value",calc:"lastNotNull",displayMode:"seriesToRows"},hexbin:{calc:"lastNotNull",colorRange:T.join(Mc[0].value,","),colorDomainAuto:!0,colorDomain:[],reverseColorOrder:!1}},Rc=["hidden","top","left","right","bottom"],Dc="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split("");function Bc(e){if(e)try{return JSON.parse(e)}catch(rh){console.error(rh)}return{}}function zc(e){let t=T.cloneDeep(e);return Tc.valid(t.version)||(t=function(e){var t,n,r,i;let a=T.cloneDeep(e);const o=T.compact([null==a?void 0:a.yplotline1,null==a?void 0:a.yplotline2]),s=["yellow","red"],l=a.link?[a.link]:[];var c;return a={version:"2.0.0",name:a.name,type:"timeseries",layout:a.layout,targets:T.map(a.QL,((e,t)=>({refId:Dc[t],expr:null==e?void 0:e.PromQL,legendFormat:null==e?void 0:e.Legend}))),options:{standardOptions:{util:(c=null==(t=null==a?void 0:a.highLevelConfig)?void 0:t.formatUnit,1e3===c?"bytesSI":1024===c?"bytesIEC":"humantime"===c?"humantimeSeconds":void 0)},legend:{displayMode:(null==(n=null==a?void 0:a.highLevelConfig)?void 0:n.legend)?"list":"hidden"},tooltip:{mode:(null==(r=null==a?void 0:a.highLevelConfig)?void 0:r.shared)?"all":"single",sort:null==(i=null==a?void 0:a.highLevelConfig)?void 0:i.sharedSortDirection},thresholds:{style:"line",steps:T.map(o,((e,t)=>({color:s[t],value:e})))}},links:T.map(l,(e=>({title:"链接",url:e}))),custom:Pc.timeseries},a}(t)),t}function Hc(e){const t=Bc(e.configs),n=T.sortBy(e.chart_groups,["weight"]),r=[];let i=0,a=0;return T.forEach(n,(e=>{const t=Ic();r.push({id:t,type:"row",name:e.name,layout:{h:1,w:24,x:0,y:i,i:t},collapsed:!0}),i+=1,a+=1;const n=e.charts;T.forEach(n,(e=>{const t=Ic(),n=zc(Bc(e.configs)),o=T.floor(150*n.layout.h/40),c=i+n.layout.y;r.push(l(s({},n),{id:t,layout:l(s({},n.layout),{i:t,y:c,h:o})})),a=Math.max(a,c+o)})),i=a})),{name:e.name,tags:T.isArray(e.tags)?T.join(e.tags," "):e.tags,configs:JSON.stringify(l(s({},t),{version:"2.0.0",panels:r}))}}function jc(e){if(e)try{return JSON.parse(e)}catch(rh){console.error(rh)}return{}}function Gc(e){return T.chain(e).filter((e=>"link"===e.type)).map((e=>({title:e.title,url:e.url,targetBlank:e.targetBlank}))).value()}function $c(e){var t,n,r,i;if("graph"===e.type)return Lc.options;const{fieldConfig:a,options:o}=e,s=null==a?void 0:a.defaults;if(!s)return{};const l={percent:"percent",percentunit:"percentUnit",bytes:"bytesIEC",bits:"bytesIEC",decbytes:"bytesSI",decbits:"bitsSI",s:"seconds",ms:"milliseconds"};return{valueMappings:null==s?void 0:s.mappings,thresholds:{mode:null==(t=s.thresholds)?void 0:t.mode,style:"line",steps:null==(n=s.thresholds)?void 0:n.steps},standardOptions:{util:l[s.unit]?l[s.unit]:"none",min:s.min,max:s.max,decimals:s.decimals},legend:{displayMode:"hidden"===(null==(r=null==o?void 0:o.legend)?void 0:r.displayMode)?"hidden":"list",placement:null==(i=null==o?void 0:o.legend)?void 0:i.placement},tooltip:{mode:"single"===(null==o?void 0:o.tooltip)?"single":"multi"}}}function Yc(e){const t=T.get(e,"fieldConfig.defaults.custom.lineInterpolation"),n=T.get(e,"fieldConfig.defaults.custom.fillOpacity"),r=T.get(e,"fieldConfig.defaults.custom.stacking.mode");return{version:"2.0.0",drawStyle:"barchart"===e.type?"bars":"lines",lineInterpolation:"smooth"===t?"smooth":"linear",fillOpacity:n?n/100:.5,stack:"normal"===r?"normal":"off"}}function Uc(e){return{version:"2.0.0",calc:T.get(e,"options.reduceOptions.calcs[0]"),legengPosition:"hidden"}}function Vc(e){return{version:"2.0.0",textMode:"value",calc:T.get(e,"options.reduceOptions.calcs[0]"),colorMode:"value"}}function Wc(e){const t={graph:{type:"timeseries",fn:Yc},timeseries:{type:"timeseries",fn:Yc},barchart:{type:"timeseries",fn:Yc},piechart:{type:"pie",fn:Uc},gauge:{type:"stat",fn:Vc},singlestat:{type:"stat",fn:Vc},stat:{type:"stat",fn:Vc}};return T.chain(e).filter((e=>!e.targets||T.every(e.targets,(e=>!!e.expr)))).map((e=>{const n=Ic();return"row"===e.type?{version:"2.0.0",id:n,type:"row",name:e.title,collapsed:!e.collapsed,layout:l(s({},e.gridPos),{i:n}),panels:Wc(e.panels)}:{version:"2.0.0",id:n,type:t[e.type]?t[e.type].type:"unknown",name:e.title,description:e.description,links:Gc(e.links),layout:l(s({},e.gridPos),{i:n}),targets:T.chain(e.targets).filter((e=>!0!==e.hide)).map((e=>({refId:e.refId,expr:T.replace(e.expr,"$__rate_interval","5m"),legend:e.legendFormat}))).value(),options:$c(e),custom:t[e.type]?t[e.type].fn(e):{}}})).value()}function Xc(e){return JSON.stringify({name:e.name,tags:e.tags,configs:jc(e.configs)},null,4)}function qc(e){let t=jc(e);return t=T.isArray(t)?T.head(t):t,!function(e){let t=T.cloneDeep(e);const n=T.get(t,"configs");if(!n)return;const r=T.get(n,"version");return r?Tc.valid(r):void 0}(t)?t=Hc(t):t.configs=JSON.stringify(t.configs),t}const Kc=zt.TabPane,Qc=()=>d.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1912",width:"1em",height:"1em",fill:"currentColor"},d.createElement("path",{d:"M511.107677 501.222539c-24.585955 1.376347-37.904285 13.669324-39.952944 36.879955l78.881558 0C548.670178 514.892887 535.693632 502.599909 511.107677 501.222539z","p-id":"1913"}),d.createElement("path",{d:"M771.311931 586.250074c-0.682545 10.926864 7.853875 16.391319 25.610284 16.391319 30.05041-2.048659 46.440705-16.391319 49.172933-43.025932l0-11.268648c-8.878205 5.474688-22.537296 10.244318-40.977273 14.341636C782.581602 566.786791 771.311931 574.640666 771.311931 586.250074z","p-id":"1914"}),d.createElement("path",{d:"M327.734276 505.32088c-22.537296 1.376347-34.147728 14.693654-34.830273 39.952944l0 14.341636c0.682545 25.269523 11.951193 38.58683 33.805944 39.952944 23.903409 0.682545 35.854603-16.038278 35.854603-50.197262C361.882004 521.370415 350.271572 506.697227 327.734276 505.32088z","p-id":"1915"}),d.createElement("path",{d:"M896.519584 304.875662 225.495754 304.875662c-35.270295 0-63.86454 28.593222-63.86454 63.865563l0 227.13509-84.044138 76.517721 0.213871 0.703011c-7.286963 4.436032-12.410658 12.094456-12.410658 21.249977 0 13.96199 11.317767 25.279756 25.279756 25.279756 0.444115 0 0.814552-0.230244 1.25355-0.25378l0.075725 0.25378 133.496433 0 103.557564 0 567.466266 0c35.270295 0 63.86454-28.593222 63.86454-63.86454L960.384124 368.740202C960.3831 333.468884 931.789878 304.875662 896.519584 304.875662zM341.052606 631.325689c-21.171182 0-36.879955-8.195659-47.12325-24.585955l0 20.488637-44.050262 0L249.879094 401.853367l44.050262 0 0 96.296183c10.244318-17.756409 27.318182-26.635637 51.221592-26.635637 40.293705 2.048659 61.124126 27.659967 62.49024 76.831876C407.640164 603.665723 385.443629 631.325689 341.052606 631.325689zM513.156336 631.325689c-54.636365-2.048659-82.978876-27.659967-85.027535-76.831876 2.048659-53.270251 29.025057-80.930217 80.930217-82.978876 55.31891 0 82.978876 27.659967 82.978876 82.978876l0 10.244318L472.179063 564.738132c1.366114 23.220864 15.025205 35.513842 40.977273 36.878932 18.439978 0 30.391171-6.819313 35.854603-20.488637l46.098921 5.121648C582.817905 616.300484 555.499723 631.325689 513.156336 631.325689zM679.114089 631.325689c-31.4155 0.672312-46.782489-14.693654-46.098921-46.098921l0-77.856205-25.610284 0 0-32.781614 25.610284 0 0-51.221592 42.001603-9.219989 0 60.441581 36.879955 0 0 32.781614-36.879955 0 0 68.63724c0 15.719007 6.487761 23.561625 19.464307 23.561625 4.780887 0 9.219989-1.366114 13.317307-4.097318l9.219989 27.659967C708.822714 628.593462 696.187953 631.325689 679.114089 631.325689zM852.242148 627.227348c-4.097318-6.147-6.487761-13.659091-7.17133-22.537296-14.341636 17.062608-36.538171 25.952068-66.587558 26.635637-30.732955-2.048659-47.124274-16.391319-49.172933-43.025932 0-28.000728 19.122523-44.392046 57.367569-49.172933 30.05041-6.147 48.831148-11.268648 56.343239-15.365966 1.366114-15.70775-9.219989-23.209608-31.757285-22.537296-19.122523 0-31.074739 7.17133-35.854603 21.512966l-40.977273-6.147c8.195659-30.05041 33.465183-45.074591 75.807546-45.074591 52.587706-1.366114 77.856205 20.146852 75.807546 64.538899 0 15.025205 0 35.18229 0 60.441581 0 12.292977 2.732228 22.537296 8.195659 30.732955L852.242148 627.228371z","p-id":"1916"})),Zc=e=>d.createElement(x,s({component:Qc},e));var Jc=To((function(e){const{visible:t,destroy:n,busiId:r,type:i,refreshList:a}=e,[o,c]=f.exports.useState(i),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState(""),g=T.filter(u,(e=>!p||T.includes(e.name,p)));return f.exports.useEffect((()=>{ai("/api/n9e/dashboards/builtin/list",{method:Qr.Get}).then((e=>e.dat)).then((e=>{h(T.map(e,(e=>({name:e}))))}))}),[]),d.createElement(It,{className:"dashboard-import-modal",title:d.createElement(zt,{activeKey:o,onChange:e=>c(e),className:"custom-import-alert-title"},d.createElement(Kc,{tab:"导入内置大盘模块",key:"BuiltIn"}),d.createElement(Kc,{tab:"导入大盘JSON",key:"Import"}),d.createElement(Kc,{tab:d.createElement("div",{style:{position:"relative"}},"导入Grafana大盘JSON",d.createElement(Zc,{style:{fontSize:24,position:"absolute",top:-12,color:"#1890ff"}})),key:"ImportGrafana"})),visible:t,onCancel:()=>{a(),n()},footer:null},"BuiltIn"===o?d.createElement(d.Fragment,null,d.createElement(Ct,{prefix:d.createElement(M,null),placeholder:"请输入要查询的大盘名称",value:p,onChange:e=>{m(e.target.value)}}),d.createElement(Ft,{style:{marginTop:10},rowKey:"name",size:"small",dataSource:g,columns:[{title:"大盘名称",dataIndex:"name"},{title:"操作",render:e=>d.createElement("a",{onClick:()=>{var t;(t=e.name,ai(`/api/n9e/builtin-board/${t}`,{method:Qr.Get}).then((e=>e.dat))).then((e=>{vo(r,qc(e)).then((()=>{vt.success("导入成功")}))}))}},"导入")}],pagination:!(g.length<5)&&{pageSize:5}})):null,"Import"===o?d.createElement(bt,{layout:"vertical",onFinish:e=>{const t=qc(e.import);vo(r,l(s({},t),{configs:t.configs})).then((()=>{vt.success("导入成功"),a(),n()}))}},d.createElement(bt.Item,{label:"大盘JSON",name:"import",rules:[{required:!0,message:"请输入大盘JSON"}]},d.createElement(Ct.TextArea,{className:"code-area",placeholder:"请输入大盘 JSON",rows:16})),d.createElement(bt.Item,null,d.createElement(xt,{type:"primary",htmlType:"submit"},"导入"))):null,"ImportGrafana"===o?d.createElement(bt,{layout:"vertical",onFinish:e=>{const t=function(e){var t;return{name:e.title,configs:{version:"2.0.0",links:Gc(e.links),var:(t=e.templating,T.chain(t.list).filter((e=>"query"===e.type)).map((e=>({name:e.name,definition:e.definition||T.get(e,"query.query"),allOption:e.includeAll,multi:e.multi}))).value()),panels:Wc(e.panels)}}}(jc(e.import));vo(r,l(s({},t),{tags:"",configs:JSON.stringify(t.configs)})).then((()=>{vt.success("导入成功"),a(),n()}))}},d.createElement("div",{style:{marginBottom:10}},d.createElement(Ht,{message:"目前只支持导入 v8+ 版本的大盘配置，导入完的图表只支持夜莺目前支持的图表类型和功能",type:"info"})),d.createElement(bt.Item,{label:"大盘JSON",name:"import",rules:[{required:!0,message:"请输入大盘JSON"}]},d.createElement(Ct.TextArea,{className:"code-area",placeholder:"请输入大盘 JSON",rows:16})),d.createElement(bt.Item,null,d.createElement(xt,{type:"primary",htmlType:"submit"},"导入"))):null)}));function eu(e){const{busiId:t,selectRowKeys:n,refreshList:r,searchVal:i,onSearchChange:a}=e;return d.createElement(d.Fragment,null,d.createElement("div",{className:"table-handle"},d.createElement("div",{className:"table-handle-search"},d.createElement(Ct,{className:"searchInput",value:i,onChange:e=>{a(e.target.value)},prefix:d.createElement(M,null),placeholder:"大盘名称、分类标签"})),d.createElement("div",{className:"table-handle-buttons"},d.createElement(xt,{type:"primary",onClick:()=>{ko({mode:"crate",busiId:t,refreshList:r})},ghost:!0},"新建大盘"),d.createElement("div",{className:"table-more-options"},d.createElement(wt,{overlay:d.createElement("ul",{className:"ant-dropdown-menu"},d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{Jc({busiId:t,type:"BuiltIn",refreshList:r})}},d.createElement("span",null,"导入监控大盘")),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{n.length?It.confirm({title:"是否批量删除大盘?",onOk:async()=>{yo(n).then((()=>{vt.success("批量删除大盘成功")})),setTimeout((()=>{r()}),500)}}):vt.warning("未选择任何大盘")}},d.createElement("span",null,"批量删除大盘"))),trigger:["click"]},d.createElement(xt,{onClick:e=>e.stopPropagation()},"更多操作",d.createElement(I,{style:{marginLeft:2}})))))))}var tu=To((function(e){const{visible:t,destroy:n}=e,[r,i]=f.exports.useState(e.data);return d.createElement(It,{title:"导出大盘",visible:t,onCancel:()=>{n()},footer:null},d.createElement("p",null,d.createElement("a",{onClick:()=>{si([r],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>li(r,(e=>e))},d.createElement(z,null),"复制JSON内容到剪贴板")),d.createElement(Ct.TextArea,{value:r,onChange:e=>{i(e.target.value)},rows:15}))}));function nu(){const e=C(),[t,n]=f.exports.useState(),[r,i]=f.exports.useState([]),[a,o]=f.exports.useState([]),[c,u]=f.exports.useState(T.uniqueId("refreshKey_")),[h,p]=f.exports.useState("");f.exports.useEffect((()=>{var e;t&&(e=t,ai(`/api/n9e/busi-group/${e}/boards`,{method:Qr.Get}).then((e=>e.dat))).then((e=>{i(e)}))}),[t,c]);const m=T.filter(r,(e=>!h||(T.includes(e.name,h)||T.includes(e.tags,h))));return d.createElement(Ki,{title:"监控大盘",icon:d.createElement(K,null),hideCluster:!0},d.createElement("div",{style:{display:"flex"}},d.createElement(ba,{busiGroup:{onChange:e=>n(e)}}),t?d.createElement("div",{className:"dashboards-v2"},d.createElement(eu,{busiId:t,selectRowKeys:a,refreshList:()=>{u(T.uniqueId("refreshKey_"))},searchVal:h,onSearchChange:p}),d.createElement(Ft,{dataSource:m,columns:[{title:"大盘名称",dataIndex:"name",className:"name-column",render:(t,n)=>d.createElement("div",{className:"table-active-text",onClick:()=>e.push(`/dashboard/${n.id}`)},t)},{title:"分类标签",dataIndex:"tags",className:"tags-column",render:e=>d.createElement(d.Fragment,null,T.map(T.split(e," "),((e,t)=>e?d.createElement(Ot,{color:"blue",key:t,style:{cursor:"pointer"},onClick:()=>{(h.length>0?h.split(" "):[]).includes(e)||p((t=>t?t+" "+e:e))}},e):null)))},{title:"更新时间",width:120,dataIndex:"update_at",render:e=>A.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:"发布人",width:70,dataIndex:"create_by"},{title:"操作",width:"160px",render:(e,n)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{ko({mode:"edit",initialValues:l(s({},n),{tags:n.tags?T.split(n.tags," "):void 0}),busiId:t,refreshList:()=>{u(T.uniqueId("refreshKey_"))}})}},"编辑"),d.createElement("div",{className:"table-operator-area-normal",onClick:async()=>{It.confirm({title:`是否克隆大盘${n.name}?`,onOk:async()=>{await function(e,t){return ai(`/api/n9e/busi-group/${e}/board/${t}/clone`,{method:Qr.Post})}(t,n.id),vt.success("克隆大盘成功"),u(T.uniqueId("refreshKey_"))},onCancel(){}})}},"克隆"),d.createElement("div",{className:"table-operator-area-normal",onClick:async()=>{const e=await xo(n.id);tu({data:Xc(e)})}},"导出"),d.createElement("div",{className:"table-operator-area-warning",onClick:async()=>{It.confirm({title:`是否删除大盘：${n.name}?`,onOk:async()=>{await yo([n.id]),vt.success("删除大盘成功"),u(T.uniqueId("refreshKey_"))},onCancel(){}})}},"删除"))}],rowKey:"id",rowSelection:{selectedRowKeys:a,onChange:e=>{o(e)}}})):d.createElement(Ca,{text:"监控大盘"})))}const ru=function(e){return ai("/api/n9e/share-charts",{method:Qr.Post,data:e})};function iu(e){return!!(e&&e.start&&e.end)}const au=(e,t="s")=>{const{start:n,end:r}=iu(e)?e:((e,t="s")=>{const{num:n,unit:r}=e;let i="s"===t?A().unix():A().valueOf();return{start:"s"===t?A().subtract(n,r).unix():A().subtract(n,r).valueOf(),end:i}})(e,t);return{start:n,end:r}};function ou(e){const{t:t}=Lr(),n=[{num:5,unit:"minutes",description:t("minute")},{num:15,unit:"minutes",description:t("minutes")},{num:30,unit:"minutes",description:t("minutes")},{num:1,unit:"hour",description:t("hour")},{num:2,unit:"hours",description:t("hours")},{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:1,unit:"week",description:t("周")},{num:1,unit:"month",description:t("月")},{num:1,unit:"quarter",description:t("季度")}],{onChange:r,value:i,unit:a="s",showRight:o=!0,placement:s="bottom",leftList:l=n,nullable:c=!1}=e,[u,h]=f.exports.useState(!1),[p,m]=f.exports.useState(A()),[g,v]=f.exports.useState(A()),[y,x]=f.exports.useState(-1),[E,b]=f.exports.useState("选择时间"),C=f.exports.useRef(!1);f.exports.useEffect((()=>{if(i)if(iu(i))i.start>0&&i.end>0&&S(i);else{const e=l.findIndex((({num:e,unit:t})=>e===(null==i?void 0:i.num)&&t===i.unit));x(-1===e?0:e),k(l[e])}else if(!c){const e=localStorage.getItem("relativeDateIndex")?Number(localStorage.getItem("relativeDateIndex")):3;x(e),k(l[e])}}),[JSON.stringify(i)]);const w=(e,n)=>{if(iu(e)){const{start:t,end:r}=e;return A("s"===n?1e3*t:t).format("YYYY.MM.DD HH:mm:ss")+" 至 "+A("s"===n?1e3*r:r).format("YYYY.MM.DD HH:mm:ss")}{const{num:n,description:r}=e;return`${t("最近")} ${n} ${r}`}},S=e=>{const{start:t,end:n}=e;m(A("s"===a?1e3*t:t)),v(A("s"===a?1e3*n:n)),b(w(e,a))};const k=e=>{T.isEqual(T.omit(i,"refreshFlag"),T.omit(e,"refreshFlag"))||r&&r(e),b(e?w(e,a):"选择时间")},_=d.createElement("div",{className:"time-range-picker-wrapper"},d.createElement("div",{className:"time-range-picker-left"},l.map((({num:e,unit:n,description:r},i)=>d.createElement(xt,{key:i,type:"link",onClick:()=>(e=>{x(e),localStorage.setItem("relativeDateIndex",e),k(l[e]),h(!1)})(i),className:i===y?"active":""},t("最近"),d.createElement("span",{className:"num"},e),r)))),o&&d.createElement("div",{className:"time-range-picker-right"},d.createElement("p",{className:"title"},t("自定义开始时间")),d.createElement(jt,{showTime:!0,onChange:(e,t)=>{m(e)},value:p,disabledDate:function(e){return e&&e>A().endOf("seconds")},onOpenChange:e=>{C.current=e}}),d.createElement("p",{className:"title"},t("自定义结束时间")),d.createElement(jt,{showTime:!0,onChange:(e,t)=>{v(e)},value:g,disabledDate:function(e){return e&&e>A().endOf("seconds")},onOpenChange:e=>{C.current=e}}),d.createElement("div",{className:"footer"},d.createElement(xt,{onClick:()=>h(!1)},t("取消")),d.createElement(xt,{type:"primary",onClick:()=>{h(!1),x(-1),localStorage.setItem("relativeDateIndex",""),k({start:"s"===a?p.unix():p.valueOf(),end:"s"===a?g.unix():g.valueOf()})},disabled:!p||!g||p.endOf("seconds")>=g.endOf("seconds")},t("确定")))));return d.createElement(Gt,{trigger:"click",placement:s,content:_,overlayClassName:"time-range-picker",visible:u,getPopupContainer:()=>document.body,onVisibleChange:e=>(e||!C.current)&&h(e)},d.createElement(xt,{className:P({"time-range-picker-target-nullable":c})},E," ",d.createElement(H,null),c&&d.createElement(Q,{onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),k(void 0)}})))}const su=[15,30,60,120,300].map((e=>({label:e,value:e})));function lu(e){const{onChange:t,value:n,initialValue:r}=e,[i,a]=f.exports.useState(String(r||"")),[o,s]=f.exports.useState(r||null);f.exports.useEffect((()=>{a(String(n||""))}),[n]);const l=()=>{if(!i&&null!==o)return s(null),void(t&&t(null));const e=Number(i);Number.isInteger(e)&&e>0&&e<=Number.MAX_SAFE_INTEGER&&e!==o&&(s(e),t&&t(e))};return d.createElement("div",{className:"resolution"},d.createElement($t,{options:su,value:i,style:{width:72},onChange:e=>{a("number"==typeof e?e:e.replace(/^(0+)|[^\d]+/g,""))},onSelect:e=>{const n=Number(e);n!==o&&(s(n),t&&t(n))},onKeyDown:e=>{13===e.keyCode&&l()},onBlur:l,placeholder:"Res. (s)"}))}const cu=A();Z.string,Z.string,Z.oneOfType([Z.string,Z.number]),Z.oneOfType([Z.string,Z.number]),Z.oneOfType([Z.string,Z.number]),Z.arrayOf(Z.string),Z.array,Z.bool,Z.number,Z.number,Z.number,Z.string,Z.number,Z.number,Z.string,Z.bool,Z.bool,Z.string,Z.string,Z.bool,Z.arrayOf(Z.shape({selectedEndpoint:Z.array,selectedMetric:Z.string,aggrFunc:Z.string,aggrGroup:Z.array,selectedTagkv:Z.array,tagKv:Z.array,counters:Z.array}));const uu={title:"",type:"chart",now:cu.clone().format("x"),start:cu.clone().subtract(36e5,"ms").format("x"),end:cu.clone().format("x"),comparisonOptions:[{label:"1小时",labelEn:"1 hour",value:"3600000"},{label:"2小时",labelEn:"2 hours",value:"7200000"},{label:"1天",labelEn:"1 day",value:"86400000"},{label:"2天",labelEn:"2 days",value:"172800000"},{label:"7天",labelEn:"7 days",value:"604800000"}],threshold:void 0,legend:!1,precision:"origin",shared:!1,sharedSortDirection:"desc"},hu=["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"];function pu(e){const t=[];return T.each(e,((e,n)=>{var r,i;const a=(null==(r=null==e?void 0:e.metric)?void 0:r.ident)||(null==(i=null==e?void 0:e.metric)?void 0:i.__name__),o=function(e,t,n=!1){const{comparison:r}=e;let i;if(n&&!r)i="rgb(67, 150, 30)";else if(86400===r)i="rgb(98, 127, 202)";else if(604800===r)i="rgb(238, 92, 90)";else{i=hu[t%hu.length]}return i}(e,n),s={id:n,name:a,tags:a,metricLabels:e.metric,data:(e.values||[]).map((e=>[1e3*e[0],Number(e[1])]))||[],lineWidth:2,color:o,oldColor:o,comparison:e.offset,legendTitleFormat:e.legendTitleFormat};t.push(s)})),t}var du,fu;Z.arrayOf(Z.shape({ns:Z.string,metric:Z.string,counter:Z.string})),(fu=du||(du={})).Line="line",fu.StackArea="stackArea";const mu="YYYY-MM-DD HH:mm:ss";function gu(e){const{points:t,series:n,formatUnit:r,precision:i,chartType:a}=e,o=window.innerWidth/1.5;let s="";s+=function(e){const{points:t}=e,n=A(t[0].timestamp).format(mu);return`<span style="color: #666">${n}</span><br/>`}(e);const l=1===t.length;return T.each(t,((e,t)=>{s+=function(e,t={},n={},r,i,a){const{legendTitleFormat:o}=n,{color:s,filledNull:l,serieOptions:c={},timestamp:u}=t,h=a===du.StackArea?t[3]:t.value;let p="";c.comparison&&(p+=` offset ${c.comparison}`);const d=(null==c?void 0:c.metricLabels)||{},f=d.__name__||"",m=Object.keys(d).filter((e=>"__name__"!==e)),g=()=>{const e=m.map((e=>`<span>${e}=${d[e]}</span>`)),t=o?yu(o,d):`${f} ${p} {${e}}`;return`<span style="color:${s}">● </span>\n      ${t}：<strong>${v(h)}${l?"(空值填补,仅限看图使用)":""}</strong>\n      <br/>`},v=e=>"short"===i?1024===r||1e3===r?e>1e3?((e,t=2,{withUnit:n=!0,withByte:r=!1,trimZero:i=!1,convertNum:a=1024}={withUnit:!0,withByte:!1,trimZero:!1,convertNum:2024})=>{const o=e?Number(e):0;let s,l="";return o<0?s=0:o<a?s=o.toFixed(t):o<a*a?(s=(o/a).toFixed(t),l="K"):o<a*a*a?(s=(o/a/a).toFixed(t),l="M"):o<a*a*a*a?(s=(o/a/a/a).toFixed(t),l="G"):o<a*a*a*a*a&&(s=(o/a/a/a/a).toFixed(t),l="T"),i&&(s=parseFloat(s)),n&&(s=`${s}${l}`),r&&(s=`${s}B`),s})(e,2,{convertNum:r}):e.toFixed(2):"humantime"===r?A.duration(e,"seconds").humanize():"":e,y=()=>{const e=m.map((e=>`<div><strong>${e}</strong>: ${d[e]}</div>`)),t=o?yu(o,d):`${f} ${p}`;return`<span style="color:${s}">● </span>\n      ${t}: <strong>${v(h)}${l?"(空值填补,仅限看图使用)":""}</strong>\n      <div /><br />\n      <div><strong>Series:</strong></div>\n      ${f?`<div><strong>${f}</strong></div>`:""}\n      ${e.join("")}`};return e?y():g()}(l,e,e.serieOptions,r,i,a)})),`<div style="table-layout: fixed;max-width: ${o}px;word-wrap: break-word;white-space: normal;">${s}</div>`}function vu(e,t){const{threshold:n,yAxisMin:r,yAxisMax:i}=t,a=T.clone(e);return null!=n?a.plotLines=[{value:n,color:"red"}]:delete a.plotLines,t.yAxis&&void 0!==t.yAxis.plotLines&&null!==t.yAxis.plotLines?a.plotLines=t.yAxis.plotLines:delete a.plotLines,null!=r&&null!=i?(a.min=r,a.max=i):(delete a.min,delete a.max),a}function yu(e,t){let n=(r=e,Array.from(r.matchAll(/{{([0-9a-zA-Z\._\-]+?)}}/g)).map((e=>e.length>0?e[1]:e[0])));var r,i=e;return n.forEach((e=>{i=i.replace(`{{${e}}}`,t[e]?t[e]:"")})),i}const xu={},Eu=(e,t)=>{const n=new AbortController,{signal:r}=n;return t&&xu[t]&&xu[t].abort&&xu[t].abort(),xu[t]=n,ai("/api/n9e/prometheus/api/v1/query_range",{method:Qr.Get,params:e,signal:r}).finally((()=>{delete xu[t]}))};class bu extends f.exports.Component{constructor(e){super(e),this.handleInputChange=e=>{this.setState({searchText:e.target.value})},this.handleSearch=()=>{const{searchText:e}=this.state;this.setState({filterDropdownVisible:!1,filterVal:e})},this.handleContextMenu=(e,t)=>{e.preventDefault(),this.setState({currentCounter:t,contextMenuVisiable:!0,contextMenuLeft:e.clientX,contextMenuTop:e.clientY})},this.handleClickCounter=e=>{const{selectedKeys:t,highlightedKeys:n}=this.state,r=T.clone(n);T.includes(r,e.id)?T.remove(r,(t=>t===e.id)):r.push(e.id),this.setState({highlightedKeys:r},(()=>{this.props.onSelectedChange(t,r)}))},this.state={searchText:"",filterVal:"",filterDropdownVisible:!1,contextMenuVisiable:!1,contextMenuTop:0,contextMenuLeft:0,selectedKeys:"normal",highlightedKeys:[]}}componentWillReceiveProps(e){Su(this.props.series,e.series)||this.setState({selectedKeys:"normal",highlightedKeys:[]})}filterData(){const{series:e}=this.props,{filterVal:t}=this.state,n=new RegExp(t,"gi"),r=function(e=[]){const t=T.map(e,(e=>{const{id:t,metric:n,tags:r,data:i,comparison:a,metricLabels:o,legendTitleFormat:s}=e,{last:l,avg:c,max:u,min:h,sum:p}=function(e){let t=0,n=0,r=-1/0,i=1/0,a=0,o=0;if(!T.isArray(e))return{last:t,avg:n,max:r,min:i,sum:a};T.each(e,(e=>{const n=T.get(e,"[0]"),s=T.get(e,"[1]");T.isNumber(n)&&T.isNumber(s)&&(a+=s,r<s&&(r=s),i>s&&(i=s),t=s,o++)})),T.isNumber(a)&&(n=a/o);return{last:t,avg:n,max:r,min:i,sum:a}}(i);return{id:t,metric:n,tags:r,comparison:a,metricLabels:o,last:T.isNumber(l)?l.toFixed(3):null,avg:T.isNumber(c)?c.toFixed(3):null,max:T.isNumber(u)?u.toFixed(3):null,min:T.isNumber(h)?h.toFixed(3):null,sum:T.isNumber(p)?p.toFixed(3):null,color:e.color,legendTitleFormat:s}}));return T.orderBy(t,"counter")}(e);return T.filter(r,(e=>e.tags&&e.tags.match(n)||e.metricLabels&&JSON.stringify(e.metricLabels).match(n)))}render(){const{comparisonOptions:e,onSelectedChange:t,rowSelection:n,renderValue:r=(e=>e)}=this.props,{graphConfig:i}=this.props;if(!i)return null;const a=T.cloneDeep(T.get(i,"sortOrder",{})),{searchText:o,selectedKeys:c,highlightedKeys:u}=this.state,h=u,p=this.filterData(),f=p[0];let m=[{title:d.createElement("span",null," Series(",p.length,") "),dataIndex:"tags",width:240,filterDropdown:d.createElement("div",{className:"custom-filter-dropdown"},d.createElement(Ct,{placeholder:"Input serie name",value:o,onChange:this.handleInputChange,onPressEnter:this.handleSearch}),d.createElement(xt,{type:"primary",onClick:this.handleSearch},"Search")),ellipsis:!0,filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:e=>this.setState({filterDropdownVisible:e}),render:(e,t)=>{const{legendName:n,titleName:r}=function(e,t,n="zh"){const{comparison:r,legendTitleFormat:i}=e;let a,o="";const s=(null==e?void 0:e.metricLabels)||{},l=s.__name__,c=Object.keys(s).filter((e=>"__name__"!==e)).map((e=>`${e}=${s[e]}`));o=i?yu(i,s):`${l||""} ${r?`offset ${r}`:""} {${c}}`;return a=d.createElement("div",null,d.createElement("div",null,l," ",r?`offset ${r}`:""),c.map(((e,t)=>d.createElement("div",{key:t},e)))),{legendName:o,titleName:a}}(t);return d.createElement(Tt,{title:r,getPopupContainer:()=>document.body},d.createElement("span",{onClick:()=>this.handleClickCounter(t),onContextMenu:t=>this.handleContextMenu(t,e),style:{cursor:"pointer",opacity:h.length?T.includes(h,t.id)?1:.5:1}},d.createElement("span",{style:{color:t.color}},"● "),n))}},{title:"Max",dataIndex:"max",className:"alignRight",width:120,defaultSortOrder:"max"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.max-t.max},{title:"Min",dataIndex:"min",className:"alignRight",width:120,defaultSortOrder:"min"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.min-t.min},{title:"Avg",dataIndex:"avg",className:"alignRight",width:120,defaultSortOrder:"avg"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.avg-t.avg},{title:"Sum",dataIndex:"sum",className:"alignRight",width:120,defaultSortOrder:"sum"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.sum-t.sum},{title:"Last",dataIndex:"last",className:"alignRight",width:120,defaultSortOrder:"last"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.last-t.last}];"normal"===c&&T.map(p,(e=>e.id)),!1===T.get(f,"isSameMetric")&&m.unshift({title:"指标",dataIndex:"metric",width:60});let g=650;return this.props.columnsKey&&(m=T.filter(m,(e=>T.includes([...this.props.columnsKey,"metric","tags"],e.dataIndex))),g=150+100*this.props.columnsKey.length),d.createElement("div",{className:"graph-legend",style:l(s({},this.props.style),{height:"100%"})},d.createElement(Ft,{className:"auto-scroll-y",rowKey:({id:e,comparison:t})=>`${e}${t}`,size:"middle",rowSelection:!1,columns:m,dataSource:p,pagination:!1,scroll:{x:g,y:!0},showSorterTooltip:!1}))}}function Cu(e,t){return"normal"===t||T.includes(t,T.get(e,"id"))}function Tu(e,t,n){return t.length&&!T.includes(t,T.get(e,"id"))?J(n).lighten(.5).desaturate(.7).hex():n}function wu(e,t,n,r){return T.includes(t,T.get(e,"id"))?n+r:r}function Su(e,t){const n=T.map(e,(e=>e.id)),r=T.map(t,(e=>e.id));return T.isEqual(n,r)}Mt.Option;class ku extends f.exports.Component{constructor(e){super(e),this.refresh=()=>{const{graphConfig:e}=this.props;if(e){const t=A(),n=Number(t.format("x"))-Number(e.end)+Number(e.start)+"",r=t.format("x");return{now:r,start:n,end:r}}return{}},this.handleComparisonChange=e=>{const{onChange:t,relativeTimeComparison:n,comparisonOptions:r}=this.props;this.setState({curComparison:e}),t(l(s({},this.refresh()),{comparison:e,relativeTimeComparison:n,comparisonOptions:r}))},this.state={customValue:void 0,customType:"hour",errorText:"",curComparison:[]}}render(){const{curComparison:e}=this.state,t=e=>{const t=this.state.curComparison.findIndex((t=>t===e.key));let n;if(-1===t)n=[...this.state.curComparison,e.key],this.setState({curComparison:n});else{let e=[...this.state.curComparison];e.splice(t,1),n=e,this.setState({curComparison:e})}const{onChange:r,relativeTimeComparison:i,comparisonOptions:a}=this.props;r(l(s({},this.refresh()),{comparison:n,relativeTimeComparison:i,comparisonOptions:a}))},n=d.createElement(yt,{onClick:t,selectedKeys:e},d.createElement(yt.Item,{key:"1d"},"1d"),d.createElement(yt.Item,{key:"7d"},"7d"));return d.createElement("div",{className:"graph-config-inner-comparison"},this.state.curComparison.map((e=>d.createElement(Ot,{key:e,closable:!0,onClose:n=>{t({key:e})}},e))),d.createElement(wt,{overlay:n},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(U,null))))}}ku.defaultProps={size:"small",comparison:[],relativeTimeComparison:!1,comparisonOptions:[],graphConfig:null,onChange:T.noop};class _u extends f.exports.Component{constructor(e){super(e),this.handleAggrFuncChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curAggrFunc:e}),n("update",t.id,{changeType:"aggrFuncChange",comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:e,calcFunc:this.state.calcFunc,aggrGroups:this.state.curAggrGroups})},this.handleCalcFuncChange=e=>{const{data:t,onChange:n}=this.props;this.setState({calcFunc:e}),n("update",t.id,{comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:e,aggrGroups:this.state.curAggrGroups})},this.handleComparisonChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curComparisonValue:e}),n("update",t.id,{comparison:e.comparison,relativeTimeComparison:e.relativeTimeComparison,comparisonOptions:e.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:this.state.calcFunc,aggrGroups:this.state.curAggrGroups})},this.handleAggrGroupsChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curAggrGroups:e}),n("update",t.id,{comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:this.state.calcFunc,aggrGroups:e})},this.state={curAggrFunc:"avg",calcFunc:"",curAggrGroups:["ident"],curComparisonValue:{},aggrGroups:[]}}componentDidMount(){this.fetchAggrGroups()}componentDidUpdate(e){const t=(e.data.selectedHosts||[]).map((e=>e.ident)),n=(this.props.data.selectedHosts||[]).map((e=>e.ident));!T.isEqual(t,n)&&this.fetchAggrGroups()}fetchAggrGroups(){const{metric:e,selectedHosts:t}=this.props.data,n=t.map((e=>e.ident));var r;(r={start:Math.round(Number(this.props.data.start)/1e3),end:Math.round(Number(this.props.data.end)/1e3),match:[`${e}{ident=~"${n.join("|")}"}`]},ai("/api/n9e/prometheus/api/v1/labels",{method:Qr.Get,params:r,paramsSerializer:function(e){return Ci.stringify(e,{arrayFormat:"bracket"})}})).then((e=>{this.setState({aggrGroups:e.data})}))}render(){const{data:e,onChange:t}=this.props,{now:n,start:r,end:i,comparison:a}=e,o=d.createElement(yt,{onClick:e=>{this.handleAggrFuncChange(e.key)},selectedKeys:[this.state.curAggrFunc]},d.createElement(yt.Item,{key:"sum"},"sum"),d.createElement(yt.Item,{key:"avg"},"avg"),d.createElement(yt.Item,{key:"max"},"max"),d.createElement(yt.Item,{key:"min"},"min")),s=d.createElement(yt,{onClick:e=>this.handleCalcFuncChange("clear"===e.key?"":e.key),selectedKeys:[this.state.calcFunc]},d.createElement(yt.Item,{key:"rate_1m"},"rate_1m"),d.createElement(yt.Item,{key:"rate_5m"},"rate_5m"),d.createElement(yt.Item,{key:"increase_1m"},"increase_1m"),d.createElement(yt.Item,{key:"increase_5m"},"increase_5m"),d.createElement(yt.Divider,null),d.createElement(yt.Item,{key:"clear"},"clear")),l=d.createElement(yt,{onClick:e=>{const t=this.state.curAggrGroups.findIndex((t=>t===e.key));let n;if(-1===t)n=[...this.state.curAggrGroups,e.key],this.setState({curAggrGroups:n});else{let e=[...this.state.curAggrGroups];e.splice(t,1),n=e,this.setState({curAggrGroups:e})}this.handleAggrGroupsChange(n)},selectedKeys:this.state.curAggrGroups},this.state.aggrGroups.filter((e=>"__name__"!==e)).map((e=>d.createElement(yt.Item,{key:e},e)))),c=e=>{let t=[...this.state.curAggrGroups],n=t.findIndex((t=>t===e));n>=0&&t.splice(n,1),this.handleAggrGroupsChange(t)};return d.createElement("div",{className:"graph-config-inner"},d.createElement("div",{className:"graph-config-inner-item"},"计算函数 ：",d.createElement(wt,{overlay:s},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.calcFunc," ",d.createElement(I,null)))),d.createElement("div",{className:"graph-config-inner-item"},"环比：",d.createElement(ku,{comparison:a,relativeTimeComparison:e.relativeTimeComparison,comparisonOptions:e.comparisonOptions,graphConfig:e,onChange:this.handleComparisonChange}),d.createElement("input",{style:{position:"fixed",left:-1e4},id:`hiddenInput${e.id}`})),d.createElement("div",{className:"graph-config-inner-item"},"聚合函数 ：",d.createElement(wt,{overlay:o},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.curAggrFunc," ",d.createElement(I,null)))),this.state.curAggrFunc?d.createElement("div",{className:"graph-config-inner-item"},d.createElement("span",null,"聚合维度 ："),this.state.curAggrGroups.map((e=>d.createElement(Ot,{key:e,closable:!0,onClose:t=>{c(e)}},e))),d.createElement(wt,{overlay:l,overlayStyle:{maxHeight:400,overflow:"auto"}},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(U,null)))):null)}}_u.defaultProps={};let Au=null;let Ou=null;function Iu(e,t={}){let n=document.createElement(e);return Object.keys(t).forEach((e=>{n[e]=t[e]})),n}function Mu(e,t,n){return(window.getComputedStyle(e,n||null)||{display:"none"})[t]}function Nu(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;for(;t!==document;){if("none"===Mu(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}let Fu=0,Lu=null;function Pu(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Ru.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:n}=e,r=new ResizeObserver((()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==n))&&Bu(e)})),{detached:i,rendered:a}=Nu(e);e.__resize_observer_triggered__=!1===i&&!1===a,e.__resize_observer__=r,r.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){Bu(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(Fu||(n='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(r=document.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(r),Lu=r),function(e){let t=Mu(e,"position");t&&"static"!==t||(e.style.position="relative");e.__resize_old_position__=t,e.__resize_last__={};let n=Iu("div",{className:"resize-triggers"}),r=Iu("div",{className:"resize-expand-trigger"}),i=Iu("div"),a=Iu("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:a},zu(e),e.addEventListener("scroll",Du,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=Nu(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}var n,r;e.__resize_listeners__.push(t),Fu++}function Ru(){let{rendered:e,detached:t}=Nu(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(zu(this),this.addEventListener("scroll",Du,!0)),this.__resize_rendered__=e,Bu(this))}function Du(){var e,t;zu(this),this.__resize_raf__&&(e=this.__resize_raf__,Ou||(Ou=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),Ou(e)),this.__resize_raf__=(t=()=>{let e=function(e){let{width:t,height:n}=e.__resize_last__,{offsetWidth:r,offsetHeight:i}=e;return r!==t||i!==n?{width:r,height:i}:null}(this);e&&(this.__resize_last__=e,Bu(this))},Au||(Au=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),Au(t))}function Bu(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((t=>{t.call(e,e)}))}function zu(e){let{expand:t,expandChild:n,contract:r}=e.__resize_triggers__,{scrollWidth:i,scrollHeight:a}=r,{offsetWidth:o,offsetHeight:s,scrollWidth:l,scrollHeight:c}=t;r.scrollLeft=i,r.scrollTop=a,n.style.width=o+1+"px",n.style.height=s+1+"px",t.scrollLeft=l,t.scrollTop=c}function Hu(e,t){return Math.sqrt(Math.pow(t-e,2))}function ju(e,t){const n=e.length;return t<n?e[t]:ju(e,t-n)}function Gu(e,t){return"X"===t?1e3*e:e}function $u(e,t){const n=e.getBoundingClientRect(),r=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY;return{offsetX:r-n.left,offsetY:i-n.top,clientX:r,clientY:i}}class Yu{constructor(e,t){this.options=e,this.ctx=t}init(){const{chart:{width:e},timestamp:t,xmin:n,xmax:r}=this.options,i=ee().range([0,e]);return i.domain([Gu(r,t),Gu(n,t)]),i}draw(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i,time:a}=n,o=e.ticks(Math.floor(r.width/90)),s=r.height-i.tickpadding-i.labels.fontSize;t.beginPath(),o.forEach((n=>{const r=e(n);r&&(t.moveTo(r,s),t.lineTo(r,s-i.tickLength))})),t.lineWidth=1,t.strokeStyle=i.tickColor,t.stroke(),t.beginPath(),t.moveTo(0,s-i.tickLength),t.lineTo(r.width,s-i.tickLength),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke(),t.textAlign="center",t.textBaseline="bottom",t.fillStyle=i.labels.color,t.font=`${i.labels.fontSize}px Palantino`,o.forEach((n=>{let i="%H:%M";0!==n.getSeconds()&&(i="%H:%M:%S"),0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&(i="%m-%d");let o=n;if(a&&a.timezoneOffset){const e=n.getTimezoneOffset(),t=n.getTime()+60*e*1e3+60*a.timezoneOffset*1e3;o=new Date(t)}e(n)&&t.fillText(te(i)(o),e(n),r.height)}))}drawPlotLines(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i,xAxis:{plotLines:a}}=n,o=r.height-i.tickpadding-i.labels.fontSize;Array.isArray(a)&&a.forEach((n=>{const r=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(r,0),t.lineTo(r,o-i.tickLength),t.strokeStyle=n.color,t.stroke(),t.setLineDash([])}))}}class Uu{constructor(e,t){this.options=e,this.ctx=t,this.tickLength=Math.floor(e.chart.height/50),this.ticks=[]}init(){const{chart:e,xAxis:t}=this.options,n=ne().range([e.height-(t.labels.fontSize+t.tickpadding+t.tickLength),20]);return this.setDomain(n,this.options),n}getRealData(e){const{yAxis:{plotLines:t},ykey:n,fillNull:r}=this.options;return Array.isArray(e)?(Array.isArray(t)&&t.forEach((t=>{"number"==typeof t.value&&e.push({[n]:t.value})})),"number"==typeof r&&e.push({[n]:r}),e):[]}getPlotLinesMaxMin(){const{yAxis:{plotLines:e}}=this.options;let t,n;return Array.isArray(e)&&e.forEach((e=>{(!t||e.value>t)&&(t=e.value),(!n||e.value<n)&&(n=e.value)})),{max:t,min:n}}setDomain(e,{ymin:t,ymax:n}){const{max:r,min:i}=this.getPlotLinesMaxMin();let a=this.tickLength;if(t===n){const e=(n-t)/(this.tickLength-1),r=e/2||n||1;a=0===e?1:this.tickLength,t-=r,n+=r}if(t>n){const e=t;t=n,n=e}void 0!==i&&i<t&&(t=i),void 0!==r&&r>n&&(n=r),this.options.chartType===du.StackArea&&(t=0),e.domain([t,n]),e.nice(a),this.ticks=e.ticks(a)}draw(e){const{ctx:t,options:n}=this,{yAxis:r}=n;t.textAlign="left",t.textBaseline="bottom",t.shadowColor=r.labels.shadowColor,t.shadowBlur=1,t.lineWidth=1,t.fillStyle=r.labels.color,t.font=`${r.labels.fontSize}px Palantino`,this.ticks.forEach((n=>{let r=String(n);if(n>=1e3){r=re(".5s")(n);const e=/[kMGTPEZY]$/;if(e.test(r)){const t=r[r.length-1];r=r.replace(e,""),r=parseFloat(r)+t}}const i=e(n);t.strokeText(r,0,i),t.fillText(r,0,i)}))}drawGridLine(e){const{ctx:t,options:n}=this,{chart:r,yAxis:i}=n;t.beginPath(),this.ticks.forEach((n=>{const i=e(n);t.moveTo(0,i),t.lineTo(r.width,i)})),t.strokeStyle=i.gridLineColor,t.stroke()}drawPlotLines(e){const{ctx:t,options:n}=this,{chart:r,yAxis:i,yAxis:{plotLines:a}}=n;Array.isArray(a)&&a.forEach((n=>{const a=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(0,a),t.lineTo(r.width,a),t.strokeStyle=n.color,t.stroke(),t.setLineDash([]),t.textAlign="right",t.textBaseline="top",t.shadowColor="#fff",t.shadowBlur=1,t.lineWidth=1,t.fillStyle=n.color,t.font=`${i.labels.fontSize}px Palantino`,t.strokeText(String(n.value),r.width-10,a),t.fillText(String(n.value),r.width-10,a)}))}}const Vu=new function(){return new Worker("/assets/worker.f0706a63.js",{type:"module"})};class Wu{constructor(e,t,n,r){this.options=e,this.ctx=t,this.flag=!1,this.init(n,r),this.isMouserover=!1}init(e,t){const{chart:{id:n}}=this.options,r=document.createElement("div");r.id=`${n}-tooltip`,r.className="ts-graph-tooltip",document.getElementById(r.id)||document.body.append(r)}clear(){const{ratio:e,chart:{id:t,containerWidth:n,containerHeight:r}}=this.options,i=document.getElementById(`${t}-tooltip`);this.isMouserover=!1,this.ctx.save(),this.ctx.setTransform(1*e,0,0,1*e,0,0),this.ctx.clearRect(0,0,n,r),this.ctx.restore(),i.style.top="-99999px",i.lastChild&&i.removeChild(i.lastChild)}getNearestPoints(e,t,n,r){const{series:i=[],chart:{id:a,colors:o},tooltip:{shared:c},xkey:u,ykey:h,y0key:p,timestamp:d,fillNull:f}=this.options,m=t.invert(e.offsetX);let g=[];const v={x:m,xkey:u,ykey:h,y0key:p,timestamp:d,fillNull:f};this.flag?(v.id=a,v.flag=this.flag,Vu.postMessage(v)):(v.id=a,v.str=JSON.stringify(i),v.flag=this.flag,Vu.postMessage(v),this.flag=!0),Vu.onmessage=i=>{if(!1===this.isMouserover)return;"[object Array]"===Object.prototype.toString.call(i.data)&&(g=i.data.map((e=>l(s({},e),{x:t(e.timestamp),y:n(e.value),color:e.color||ju(o,e.serieIndex)}))));const a=$.exports.groupBy(g,"x");if($.exports.keys(a).length>1){let t=Number.POSITIVE_INFINITY;for(const n in a)if(Object.prototype.hasOwnProperty.call(a,n)){const r=Hu(e.offsetX,Number(n));r<t&&(t=r,g=a[n])}}if(!c){let t=Number.POSITIVE_INFINITY;g.forEach((n=>{const r=(i={x:e.offsetX,y:e.offsetY},a=n,Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)));var i,a;r<t&&(t=r,g=[n])}))}r(g)}}draw(e,t,n,r){this.isMouserover=!0,this.getNearestPoints(e,t,n,(t=>{this.clear(),t.length&&(this.drawCrosshair(t[0].x),this.drawSymbol(t),this.drawModal(t,e)),r&&"[object Function]"===Object.prototype.toString.call(r)&&r(t)}))}drawModal(e,t){const{chart:{id:n,renderTo:r},tooltip:i,time:a}=this.options,o=r.offsetWidth;let s=r.offsetHeight;const l=document.getElementById(`${n}-tooltip`),c=document.createElement("div"),u=e;s=window.innerHeight/1.5;const h=(s-18-100)/15;let p=!1;if(i.sharedSortDirection&&(e=$.exports.orderBy(e,(e=>e.value),i.sharedSortDirection)),e.length>h&&(e=e.slice(0,h),p=!0),c.className="ts-graph-tooltip-content",l.appendChild(c),"[object Function]"===Object.prototype.toString.call(i.formatter))c.innerHTML=i.formatter([...e],[...u]);else{const t=e[0],n=document.createDocumentFragment(),r=document.createElement("ul"),o=document.createElement("li");let s=new Date(t.timestamp);if(a&&a.timezoneOffset){const e=s.getTimezoneOffset(),t=s.getTime()+60*e*1e3+60*a.timezoneOffset*1e3;s=new Date(t)}const l=document.createTextNode(te("%Y-%m-%d %H:%M:%S")(s));if(o.appendChild(l),o.style.color="#666",r.style.maxWidth=window.innerWidth/1.5+"px",r.appendChild(o),n.appendChild(r),e.forEach((({color:e,name:t,value:n,filledNull:a})=>{const o=document.createElement("li");if(e){const t=document.createElement("span"),n=document.createTextNode("● ");t.style.color=e,t.appendChild(n),o.appendChild(t)}if(t){const e=document.createTextNode(`${t}: `);o.appendChild(e)}if($.exports.isNumber(n)){const e=document.createElement("strong");let t;if("origin"===i.precision)t=n;else if("short"===i.precision){t=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(re(".5s")(n))}else t=i.precision>0?re(",."+i.precision+"f")(n):re(",.3f")(n);t+=a?"(空值填补,仅限看图使用)":"";const r=document.createTextNode(t);e.appendChild(r),o.appendChild(e)}r.appendChild(o)})),p){const e=document.createElement("li"),t=document.createTextNode("......");e.appendChild(t),r.appendChild(e)}c.appendChild(n)}const d=c.offsetWidth,f=c.offsetHeight;l.style.left=t.clientX-d-20+"px",l.style.top=`${t.clientY+20}px`,t.clientX-d-20<0&&(l.style.left=`${t.clientX+20}px`,t.clientX+20+d>o&&(l.style.left="0px")),t.clientY+20+f>s&&(t.clientY-f-20<0?l.style.top="0px":l.style.top=t.clientY-f-20+"px"),l.style.zIndex="9999",l.style.visibility="visible"}drawSymbol(e=[]){const{ctx:t}=this;e.forEach((e=>{const{x:n,y:r,color:i}=e;t.beginPath(),t.arc(n,r,5,0,360,!1),t.lineWidth=1,t.fillStyle=i,t.fill(),t.beginPath(),t.arc(n,r,3,0,360,!1),t.lineWidth=1,t.fillStyle="white",t.fill()}))}drawCrosshair(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i}=n,a=r.height-i.tickpadding-i.labels.fontSize-i.tickLength;t.beginPath(),t.moveTo(e,0),t.lineTo(e,a),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke()}destroy(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-tooltip`);t&&t.parentNode&&t.parentNode.removeChild(t)}}class Xu{constructor(e,t){this.options=e,this.ctx=t}draw(e,t){const{series:n,chart:{colors:r},xkey:i,ykey:a,timestamp:o,fillNull:s,notDisplayedSeries:l}=this.options,{ctx:c}=this,u=ie().x((t=>{const n="X"===o?1e3*t[i]:t[i];return e(new Date(n))})).y((e=>{const n=e[a];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).defined((e=>"number"==typeof e[a]||"number"==typeof s)).context(c);$.exports.sortBy(n,"zIndex").forEach(((e,t)=>{if(!1===e.visible)return;if(l.indexOf(e.name)>-1)return;const n=e.color||ju(r,t);e.color=n,c.beginPath(),c.lineTo(0,0),u(e.data||[]),c.lineJoin="round",c.lineWidth=this.options.line.width,c.strokeStyle=n,c.lineCap="round",c.setLineDash(e.lineDash||[]),c.stroke(),c.closePath()}))}}class qu{constructor(e,t){this.options=e,this.ctx=t}draw(e,t){const{series:n,chart:{colors:r},xkey:i,ykey:a,timestamp:o,fillNull:s,notDisplayedSeries:l}=this.options,{ctx:c}=this,u=ae().x((t=>{const n="X"===o?1e3*t[i]:t[i];return e(new Date(n))})).y0((e=>{const n=e[2];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).y1((e=>{const n=e[1];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).defined((e=>"number"==typeof e[a]||"number"==typeof s)).context(c);$.exports.sortBy(n,"zIndex").reverse().forEach(((e,t)=>{if(!1===e.visible)return;if(l.indexOf(e.name)>-1)return;const n=e.color||ju(r,t);e.color=n,c.beginPath(),c.lineTo(0,0),u(e.data||[]),c.lineJoin="round",c.lineWidth=this.options.line.width,c.strokeStyle=n,c.fillStyle=n+"50",c.lineCap="round",c.stroke(),c.fill(),c.closePath()}))}}class Ku{constructor(e,t,n,r){this.options=e,this.init(n,r),this.reset=t}init(e,t){const{chart:{id:n,containerHeight:r}}=this.options,i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("a"),s=document.createTextNode("Reset zoom");i.id=`${n}-zoom`,i.className="ts-graph-zoom",a.id=`${n}-zoom-marker`,a.className="ts-graph-zoom-marker",a.style.height=`${r}px`,o.id=`${n}-zoom-resetBtn`,o.className="ts-graph-zoom-resetBtn",o.appendChild(s),i.appendChild(a),i.appendChild(o),e.insertBefore(i,t),this.onReset()}onReset(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).addEventListener("click",(e=>{e.stopPropagation(),this.reset(),this.clearResetBtn()}))}onZoom(e,t,n){const{chart:{width:r}}=this.options,i=t.offsetX-e.offsetX;if(i){const a=r/Math.abs(i),o=t.offsetX>e.offsetX?e.offsetX:t.offsetX,s=oe.translate(-o*a,0).scale(a);this.drawResetBtn(),n(s)}}clearMarker(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-zoom-marker`);t.style.display="none",t.style.width="0px",t.style.left="unset",t.style.right="unset"}drawMarker(e,t){const{chart:{marginLeft:n}}=this.options,r=e.offsetX,i=t.offsetX,{chart:{id:a,containerWidth:o}}=this.options,s=document.getElementById(`${a}-zoom-marker`);s.style.display="block",s.style.top="0px",r<i?(s.style.right="unset",s.style.left=`${r+n}px`,s.style.width=i-r+"px"):(s.style.left="unset",s.style.right=o-r-n+"px",s.style.width=r-i+"px")}clearResetBtn(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).style.display="none"}drawResetBtn(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).style.display="block"}}function Qu(e){let t=-1,n=e;for(;n;){if(!("previousSibling"in n)){t=-1;break}n=n.previousSibling,t+=1}return t}class Zu{constructor(e,t,n,r){this.handelLegendItemClick=e=>{const t=e.currentTarget;let n=e.target;for(;n!==t;){if(n&&"ts-graph-legend-item"===n.className){const{series:e}=this.options,t=Qu(n);this.onLegendItemClick(e[t].name)}n.parentNode&&(n=n.parentNode)}},this.options=e,this.init(n,r),this.onLegendItemClick=t}init(e,t){const{chart:{id:n}}=this.options,r=document.createElement("div");r.id=`${n}-legend`,r.className="ts-graph-legend",document.getElementById(r.id)||e.insertBefore(r,t),this.initEvent()}initEvent(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-legend`);t.removeEventListener("click",this.handelLegendItemClick),t.addEventListener("click",this.handelLegendItemClick)}updateOptions(e){this.options=e}draw(){const{chart:{id:e},series:t,legend:n}=this.options,r=document.getElementById(`${e}-legend`);if(n.enabled&&"[object Array]"===Object.prototype.toString.call(t)){r.innerHTML="";const e=document.createDocumentFragment();t.forEach((t=>{const n=document.createElement("span"),r=document.createElement("span"),i=document.createElement("span"),a=document.createElement("span"),o=document.createTextNode(t.name);n.className="ts-graph-legend-item",r.className="ts-graph-legend-item-symbol",i.className="ts-graph-legend-item-symbol-line",i.style.borderColor=t.color,a.className="ts-graph-legend-item-symbol-point",a.style.backgroundColor=t.color,r.appendChild(i),r.appendChild(a),n.appendChild(r),n.appendChild(o),e.appendChild(n)})),r.appendChild(e)}}}class Ju{constructor(e){this.getZoomedSeries=()=>{const{chart:{renderTo:e},series:t,timestamp:n,xkey:r}=this.options,i=e.offsetWidth;return t.map((e=>{if("[object Array]"===Object.prototype.toString.call(e.data)){const t=e.data.filter((e=>{const t="X"===n?1e3*e[r]:e[r],a=this.xScales(new Date(t));return a>=0&&a<=i}));return l(s({},e),{data:t})}return e}))},this.handleResize=()=>{const{chart:e}=this.options,t=e.renderTo.offsetWidth,n=e.renderTo.offsetHeight;this.options.chart.width=t-e.marginLeft-e.marginRight,this.options.chart.height=n-e.marginTop-e.marginBottom,this.options.chart.containerWidth=t,this.options.chart.containerHeight=n,this.container.style.width=`${t}px`,this.container.style.height=`${n}px`,this.retinaScaled(this.backCanvas,"back"),this.retinaScaled(this.frontCanvas,"front"),this.retinaScaled(this.eventCanvas,"event"),this.initScales(),this.draw()},this.handleZoom=e=>{const{ykey:t,yAxis:n}=this.options;let{series:r}=this.options;if(e?(this.transform=e,this.xScales=e.rescaleX(this.xScales),r=this.getZoomedSeries()):(this.transform=void 0,this.xScales=this.xAxis.init()),Array.isArray(r)){let e=n.min||-1/0,i=n.max||1/0;for(const n of r){const r=Array.isArray(n.data)?n.data:[];let a;for(a=0;a<r.length;a++){const n=r[a][t];null!==n&&(e<n&&(e=n),i>n&&(i=n))}}this.yAxis.setDomain(this.yScales,{ymin:e,ymax:i})}this.draw(),this.options.onZoom(this.getZoomedSeries)},this.handleLegendItemClick=e=>{const{notDisplayedSeries:t}=this.options;-1===t.indexOf(e)?t.push(e):(this.options.notDisplayedSeries=t.filter((t=>t!==e)),this.update(this.options))};const t={chartType:du.Line,ratio:window.devicePixelRatio||1,xkey:0,ykey:1,y0key:2,timestamp:"x",chart:{id:$.exports.uniqueId("ts-graph-"),colors:["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"],width:e.chart.renderTo.offsetWidth,height:e.chart.renderTo.offsetHeight||350,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10},xAxis:{lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",labels:{color:"#999",fontSize:11}},yAxis:{lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",gridLineColor:"#efefef",labels:{color:"#999",shadowColor:"#fff",fontSize:11,style:{fontSize:11,color:"#999"}}},line:{width:2},tooltip:{shared:!0},baseSeries:[],series:[],legend:{align:"center",verticalAlign:"top",enabled:!1},fillNull:void 0,onClick:()=>{},onZoom:()=>{}},n=$.exports.merge({},t,e);void 0===e.chart.marginTop&&n.legend.enabled&&(n.chart.marginTop=20),this.handleResize=$.exports.debounce(this.handleResize,300),this.init(n)}init(e){const{chart:t}=e;this.baseSeries=e.series,this.options=e,this.options.notDisplayedSeries=[],this.options.chart.containerWidth=t.width,this.options.chart.containerHeight=t.height,this.options.chart.width=t.width-t.marginLeft-t.marginRight,this.options.chart.height=t.height-t.marginTop-t.marginBottom,this.options.chartType===du.Line?this.initLine():this.initStackArea(),this.createContainer(),this.createCanvas(),this.initEvent(),this.initLegend(),this.initTooltip(),this.initZoom(),this.initSeries(),this.initScales(),this.draw()}clearRect(e){const{chart:{containerWidth:t,containerHeight:n}}=this.options;e.clearRect(0,0,t,n)}draw(){this.clearRect(this.backContext),this.yAxis.drawGridLine(this.yScales),this.chartContent.draw(this.xScales,this.yScales),this.xAxis.draw(this.xScales),this.yAxis.draw(this.yScales),this.xAxis.drawPlotLines(this.xScales),this.yAxis.drawPlotLines(this.yScales),this.legend.draw()}update(e){const t=$.exports.assign({},this.options,e);e.series&&(t.series=e.series),this.options=t,this.initSeries(),this.options.chartType===du.Line?this.initLine():this.initStackArea(),this.initTooltip(),this.initScales(),this.legend.updateOptions(t),this.draw()}getSeries(){return[...this.options.series]}initEvent(){let e,t=!1,n={},r=!1;const i=this,a=$.exports.debounce((e=>{r&&(i.tooltip.draw(e,i.xScales,i.yScales),t&&i.zoom.drawMarker(n,e))}),10),o=$.exports.throttle((()=>{i.tooltip.clear()}),10);se(this.eventCanvas).on("mousemove",(function(){r=!0,a(le)})).on("mouseleave",(function(){e=le,r=!1,o()})).on("mousedown",(function(){t=!0,n=le})).on("mouseup",(function(){le.stopPropagation();const e=le;n&&n.offsetX!==e.offsetX?(i.zoom.clearMarker(),i.zoom.onZoom(n,e,(e=>{i.handleZoom(e)}))):i.options.onClick(le),t=!1,n={}})).on("touchmove",(function(){const e=$u(i.eventCanvas,le);i.tooltip.draw(e,i.xScales,i.yScales),t&&i.zoom.drawMarker(n,e)})).on("touchend",(function(){e=$u(i.eventCanvas,le),r=!1,o()})),window.addEventListener("mouseup",(()=>{if(!$.exports.isEmpty(n)){const r=e;t=!1,i.zoom.clearMarker(),i.zoom.onZoom(n,r,(e=>{i.handleZoom(e)})),n={}}})),Pu(this.options.chart.renderTo,this.handleResize)}retinaScaled(e,t){const{chart:n,ratio:r}=this.options,i=e.getContext("2d"),a="front"===t?n.containerWidth:n.width,o="front"===t?n.containerHeight:n.height,s="front"===t?"0px":`${n.marginLeft}px`,l="front"===t?"0px":`${n.marginTop}px`;e.width=a*r,e.height=o*r,e.style.width=`${a}px`,e.style.height=`${o}px`,e.style.position="absolute",e.style.left=s,e.style.top=l,"front"===t&&i.translate(n.marginLeft*r,n.marginTop*r),i.scale(r,r)}createContainer(){const{chart:e}=this.options,t=document.createElement("div");t.style.position="relative",t.style.width=`${e.containerWidth}px`,t.style.height=`${e.containerHeight}px`,t.style.overflow="hidden",e.renderTo.appendChild(t),this.container=t}createCanvas(){const{chart:{id:e}}=this.options;function t(t){const n=document.createElement("canvas"),r=n.getContext("2d");n.setAttribute("id",`${e}-${t}Canvas`),this.container.appendChild(n),this[`${t}Canvas`]=n,this[`${t}Context`]=r,this.retinaScaled(n,t)}t.call(this,"back"),t.call(this,"front"),t.call(this,"event")}initSeries(){const{chartType:e,fillNull:t,series:n,xkey:r,ykey:i,y0key:a,yAxis:o}=this.options;let c=-1/0,u=1/0,h=o.min,p=o.max;if(Array.isArray(n)){const o=Number(a),d=[],f=Object.values(n),m=f.map((e=>JSON.parse(JSON.stringify(e.data))));m.forEach(((n,a)=>{const g=[...Array.isArray(n)?n:[]],v=[];let y,x=!1;for(y=0;y<g.length;y++){const n=g[y];if(e===du.StackArea)if(0===a)n[o]=0,n[o+1]?n[i]=n[o+1]:n[o+1]=n[i];else{let e=0,t=a;for(;t>0;){if(m[t-1]){const a=m[t-1].find((e=>e[r]===n[0]));if(a){e=a[i];break}}t--}n[o]=e,n[o+1]||(n[o+1]=n[i]),n[i]=e+n[o+1]}const s=n[r],l=n[i];void 0===t?0===y||y===g.length-1||y>0&&y<g.length-1&&"number"==typeof l?(v.push(n),x=!0):x&&(v.push(n),x=!1):v.push(n),c<s&&(c=s),u>s&&(u=s),"number"==typeof l?(("number"!=typeof h||l<h)&&(h=l),("number"!=typeof p||l>p)&&(p=l)):"number"==typeof t&&(t<h&&(h=t),t>p&&(p=t))}d.push(l(s({},f[a]),{data:v}))})),this.baseSeries=d,this.options.xmin=c,this.options.xmax=u,this.options.ymin=h,this.options.ymax=p}}initLine(){this.chartContent=new Xu(Object.assign(this.options,{series:this.baseSeries}),this.backContext)}initStackArea(){this.chartContent=new qu(Object.assign(this.options,{series:this.baseSeries}),this.backContext)}initTooltip(){this.tooltip=new Wu(this.options,this.frontContext,this.container,this.eventCanvas)}initZoom(){this.zoom=new Ku(this.options,this.handleZoom,this.container,this.eventCanvas)}initLegend(){this.legend=new Zu(this.options,this.handleLegendItemClick,this.container,this.eventCanvas)}initScales(){const e=new Yu(this.options,this.backContext),t=new Uu(this.options,this.backContext);this.xAxis=e;let n=e.init();this.transform&&(n=this.transform.rescaleX(n)),this.xScales=n,this.yAxis=t,this.yScales=t.init()}destroy(){this.tooltip.destroy(),se(this.eventCanvas).on("mousemove",null).on("mouseleave",null).on("mousedown",null).on("mouseup",null).on("touchmove",null),se(this.container).remove(),function(e,t){let n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",Du),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--Fu&&Lu&&Lu.parentNode.removeChild(Lu)}}(this.options.chart.renderTo,this.handleResize)}}class eh extends f.exports.Component{componentDidMount(){const e={chartType:this.props.graphConfig.chartType||du.Line,timestamp:"x",chart:{height:this.props.height?this.props.height:void 0,renderTo:this.graphWrapEle},xAxis:this.props.graphConfig.xAxis,yAxis:vu({},this.props.graphConfig),tooltip:this.genChartTooltipOptions(this.props),series:this.props.series,legend:{enabled:!1}};this.chart=new Ju(e)}componentWillReceiveProps(e){if(this.chart){const t={yAxis:vu(this.chart.options.yAxis,e.graphConfig),tooltip:this.genChartTooltipOptions(e),series:e.series,chartType:e.graphConfig.chartType||du.Line};this.chart.update(t)}}genChartTooltipOptions(e){const t=1024===e.graphConfig.formatUnit&&"short"===e.graphConfig.precision;let n={xAxis:e.graphConfig.xAxis,shared:e.graphConfig.shared,sharedSortDirection:e.graphConfig.sharedSortDirection,formatter:t=>gu({formatUnit:e.graphConfig.formatUnit,precision:e.graphConfig.precision,series:this.props.series,points:t,chartWidth:this.graphWrapEle.offsetWidth-40,chartType:e.graphConfig.chartType})};return t&&Object.assign(n,{precision:e.graphConfig.precision}),n}render(){return d.createElement("div",{style:s({},this.props.style),ref:e=>{this.graphWrapEle=e},className:"chart-content"})}}const th={1024:"Ki, Mi, Gi by 1024",1e3:"Ki, Mi, Gi by 1000",humantime:"Human time duration"};class nh extends f.exports.Component{constructor(e){var t,n,r,i,a;super(e),this.headerHeight=35,this.handleLegendRowSelectedChange=(e,t)=>{const{series:n}=this.state,r=this.props.data.chartType,i=[];r===du.StackArea&&t.length&&t.forEach((e=>i.push(n[e])));const a=T.map(n,((i,a)=>{const o=T.get(i,"oldColor",i.color);return l(s({},i),{visible:Cu(i,e),zIndex:wu(i,t,n.length,a),color:r===du.StackArea?o:Tu(i,t,o),oldColor:o})}));this.setState({series:a,chartShowSeries:i.length?i:a,legendHighlightedKeys:t})},this.refresh=()=>{this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)},this.shareChart=()=>{const e=l(s({},this.props.data),{legend:this.state.legend});if(!e.promqls){let t=[];const n={curAggrFunc:this.state.aggrFunc,curAggrGroup:this.state.aggrGroups},r=this.generateQuery(n);r&&t.push(r);const i=this.state.offsets.map((e=>this.generateQuery(l(s({},n),{offset:e})))).filter((e=>e));t=t.concat(i),e.promqls=t}let t={dataProps:e,highLevelConfig:s({},this.state.highLevelConfig),curCluster:localStorage.getItem("curCluster")};delete t.dataProps.ref,ru([{configs:JSON.stringify(t)}]).then((e=>{const t=e.dat;window.open("/chart/"+t)}))},this.resize=()=>{this.chart&&this.chart.resizeHandle&&this.chart.resizeHandle()},this.state={spinning:!1,errorText:"",series:[],chartShowSeries:[],legendHighlightedKeys:[],offsets:this.props.defaultOffsets||[],aggrFunc:this.props.defaultAggrFunc||"avg",aggrGroups:this.props.defaultAggrGroups||["ident"],calcFunc:"",legend:void 0===e.data.legend||e.data.legend,highLevelConfig:{shared:void 0===(null==(t=this.props.highLevelConfig)?void 0:t.shared)||(null==(n=this.props.highLevelConfig)?void 0:n.shared),sharedSortDirection:(null==(r=this.props.highLevelConfig)?void 0:r.sharedSortDirection)||"desc",precision:(null==(i=this.props.highLevelConfig)?void 0:i.precision)||"short",formatUnit:(null==(a=this.props.highLevelConfig)?void 0:a.formatUnit)||1e3},onErrorOccured:this.props.onErrorOccured,onRequestCompleted:this.props.onRequestCompleted}}componentDidMount(){this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)}componentWillReceiveProps(e){if(void 0!==this.props.data.legend&&this.props.data.legend!==e.data.legend&&this.setState({legend:e.data.legend}),"object"==typeof e.highLevelConfig){let t=!1;const n=Object.assign({},this.state.highLevelConfig);for(let r of Object.keys(n))n[r]!==e.highLevelConfig[r]&&(n[r]=e.highLevelConfig[r],t=!0);t&&this.setState({highLevelConfig:n})}}componentDidUpdate(e){const t=(e.data.selectedHosts||[]).map((e=>e.ident)),n=(this.props.data.selectedHosts||[]).map((e=>e.ident));!!T.isEqual(t,n)&&T.isEqualWith(e.data,this.props.data)||this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)}componentWillUnmount(){this.chart&&this.chart.destroy()}afterFetchChartDataOperations(e,t,n){const r=[],{offsets:i,series:a,legendHighlightedKeys:o}=this.state,{legendTitleFormats:s}=this.props.data,l=pu(e.reduce(((e,t,n)=>{var a;if("error"===t.status)return r.push(t),e;const o=null==(a=null==t?void 0:t.data)?void 0:a.result;return i&&o.forEach((e=>{e.offset=i[n]||"",e.legendTitleFormat=s&&s[n]})),e.push(...o),e}),[])),c=Su(a,l);this.setState(Object.assign({spinning:!1,series:l,chartShowSeries:l,legendHighlightedKeys:c?o:[]})),c&&this.handleLegendRowSelectedChange("normal",this.state.legendHighlightedKeys),this.state.onErrorOccured&&this.state.onErrorOccured(r),!r.length&&this.state.onRequestCompleted&&this.state.onRequestCompleted({loadTime:Date.now()-t,resolution:n,resultSeries:l.length})}getGraphConfig(e){return l(s(s(s({},uu),e),this.state.highLevelConfig),{now:e.now?e.now:e.end?e.end:uu.now})}getZoomedSeries(){return this.state.series}generateQuery(e){const{offset:t,curAggrFunc:n,curAggrGroup:r,calcFunc:i=""}=e,[a,o]=i.split("_"),{metric:s,selectedHosts:l}=this.props.data;if(s&&l){const e=t?" offset "+t:"";let c=`${i?a+"(":""}${s}{ident=~"${l.map((e=>e.ident)).join("|")}"}${i?"["+o+"]":""}${e}${i?")":""}`;return n&&r&&r.length>0&&(c=`${n}(${c}) by (${r.join(", ")})`),c}}fetchData(e,{start:t,end:n,step:r}){this.setState({spinning:!0});try{return Eu({start:t-t%r,end:n-n%r,step:r,query:e})}catch(rh){return this.setState({spinning:!1}),Promise.reject()}}renderChart(){const{errorText:e,chartShowSeries:t}=this.state,{height:n,data:r}=this.props,i=this.getGraphConfig(r);return e?d.createElement("div",{className:"graph-errorText"},e):d.createElement(eh,{graphConfig:i,series:t,style:{minHeight:"65%"}})}updateGraphConfig(e){const{aggrFunc:t,aggrGroups:n,comparison:r,calcFunc:i}=e;this.setState({aggrFunc:t,aggrGroups:n,offsets:r,calcFunc:i}),"aggrFuncChange"===e.changeType&&0===n.length||this.updateAllGraphs(t,n,r,i)}updateAllGraphs(e,t,n,r){const i=Date.now();let{promqls:a,range:o,step:c}=this.props.data;const{start:u,end:h}=au(o);c||(c=Math.max(Math.floor((h-u)/240),1));let p={calcFunc:r};if(e&&(p.curAggrFunc=e),t&&t.length>0&&(p.curAggrGroup=t),a){const e=a.map((e=>"string"==typeof e?e:e.current)).filter((e=>e));if(e.length){const t=e.map((e=>this.fetchData(e,{start:u,end:h,step:c})));Promise.all([...t]).then((e=>{this.afterFetchChartDataOperations(e,i,c)}))}}else{const e=this.generateQuery(p);let t=[];n&&(t=n.map((e=>this.generateQuery(l(s({},p),{offset:e})))));const r=t.map((e=>this.fetchData(e,{start:u,end:h,step:c}))),a=this.fetchData(e,{start:u,end:h,step:c});Promise.all([...r,a]).then((e=>{this.afterFetchChartDataOperations(e,i,c)}))}}getContent(){const e=d.createElement(yt,{onClick:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{sharedSortDirection:e.key})})},selectedKeys:[this.state.highLevelConfig.sharedSortDirection]},d.createElement(yt.Item,{key:"desc"},"desc"),d.createElement(yt.Item,{key:"asc"},"asc")),t=d.createElement(yt,{onClick:e=>{const t=isNaN(Number(e.key))?e.key:Number(e.key);this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{formatUnit:t})})},selectedKeys:[String(this.state.highLevelConfig.formatUnit)]},d.createElement(yt.Item,{key:"1000"},"Ki, Mi, Gi by 1000"),d.createElement(yt.Item,{key:"1024"},"Ki, Mi, Gi by 1024"),d.createElement(yt.Item,{key:"humantime"},"Human time duration"));return d.createElement("div",null,d.createElement(St,{checked:this.state.highLevelConfig.shared,onChange:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{shared:e.target.checked})})}},"Multi Series in Tooltip, order value"),d.createElement(wt,{overlay:e},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.highLevelConfig.sharedSortDirection," ",d.createElement(I,null))),d.createElement("br",null),d.createElement(St,{checked:this.state.legend,onChange:e=>{this.setState({legend:e.target.checked})}},"Show Legend"),d.createElement("br",null),d.createElement(St,{checked:"short"===this.state.highLevelConfig.precision,onChange:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{precision:e.target.checked?"short":"origin"})})}},"Value format with:"," "),d.createElement(wt,{overlay:t},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},th[this.state.highLevelConfig.formatUnit]," ",d.createElement(I,null))))}render(){this.state;const{extraRender:e,data:t,showHeader:n=!0}=this.props,{title:r,metric:i}=t,a=this.getGraphConfig(t);return d.createElement("div",{className:this.state.legend?"graph-container graph-container-hasLegend":"graph-container"},n&&d.createElement("div",{className:"graph-header",style:{height:this.headerHeight,lineHeight:`${this.headerHeight}px`}},d.createElement("div",null,r||i),d.createElement("div",{className:"graph-extra"},d.createElement("span",{className:"graph-operationbar-item",key:"info"},d.createElement(Gt,{placement:"left",content:this.getContent(),trigger:"click",autoAdjustOverflow:!1,getPopupContainer:()=>document.body},d.createElement(xt,{className:"",type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(L,null)))),!1===this.props.isShowRefresh?null:d.createElement("span",{className:"graph-operationbar-item",key:"sync"},d.createElement(xt,{type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(ce,{onClick:this.refresh}))),!1===this.props.isShowShare?null:d.createElement("span",{className:"graph-operationbar-item",key:"share"},d.createElement(xt,{type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(ue,{onClick:this.shareChart}))),e&&T.isFunction(e)?e(this):null)),this.props.graphConfigInnerVisible?d.createElement(_u,{data:a,onChange:(...e)=>{this.updateGraphConfig(e[2]||{})}}):null,this.renderChart(),d.createElement(bu,{style:{display:this.state.legend?"block":"none",overflowY:"auto",maxHeight:"35%"},graphConfig:a,series:this.getZoomedSeries(),onSelectedChange:this.handleLegendRowSelectedChange,comparisonOptions:a.comparisonOptions}))}}var rh,ih,ah={exports:{}};window;var oh=he(ah.exports=(rh=nn,ih=$.exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){e.exports=rh},function(e,t){e.exports=ih},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(8),i=n(9),a=n(10),o=n(11);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}var o,s,l;v(e,t,a,{once:!0}),"error"!==t&&(s=i,l={once:!0},"function"==typeof(o=e).on&&v(o,"error",s,l))}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,a,o,s;if(c(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=u(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var c=l.length,u=g(l,c);for(n=0;n<c;++n)a(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(6);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(6);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){},function(e,t,n){n.r(t),n.d(t,"default",(function(){return Q}));var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=n(2),l=n.n(s),c=n(3),u=n.n(c),h=n(0),p=n(1);let d=null,f=null;function m(e,t={}){let n=document.createElement(e);return Object.keys(t).forEach((e=>{n[e]=t[e]})),n}function g(e,t,n){return(window.getComputedStyle(e,n||null)||{display:"none"})[t]}function v(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;for(;t!==document;){if("none"===g(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}let y=0,x=null;function E(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=b.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:n}=e,r=new ResizeObserver((()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==n))&&T(e)})),{detached:i,rendered:a}=v(e);e.__resize_observer_triggered__=!1===i&&!1===a,e.__resize_observer__=r,r.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){T(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(y||(n='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(r=document.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(r),x=r),function(e){let t=g(e,"position");t&&"static"!==t||(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};let n=m("div",{className:"resize-triggers"}),r=m("div",{className:"resize-expand-trigger"}),i=m("div"),a=m("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:a},w(e),e.addEventListener("scroll",C,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=v(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}var n,r;e.__resize_listeners__.push(t),y++}function b(){let{rendered:e,detached:t}=v(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(w(this),this.addEventListener("scroll",C,!0)),this.__resize_rendered__=e,T(this))}function C(){var e,t;w(this),this.__resize_raf__&&(e=this.__resize_raf__,f||(f=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),f(e)),this.__resize_raf__=(t=()=>{let e=function(e){let{width:t,height:n}=e.__resize_last__,{offsetWidth:r,offsetHeight:i}=e;return r!==t||i!==n?{width:r,height:i}:null}(this);e&&(this.__resize_last__=e,T(this))},d||(d=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),d(t))}function T(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((t=>{t.call(e,e)}))}function w(e){let{expand:t,expandChild:n,contract:r}=e.__resize_triggers__,{scrollWidth:i,scrollHeight:a}=r,{offsetWidth:o,offsetHeight:s,scrollWidth:l,scrollHeight:c}=t;r.scrollLeft=i,r.scrollTop=a,n.style.width=o+1+"px",n.style.height=s+1+"px",t.scrollLeft=l,t.scrollTop=c}var S=n(7),k=n.n(S);function _(e,t){var n=e.length;return t<n?e[t]:_(e,t-n)}function A(e,t){return"X"===t?1e3*e:e}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.getBoundingClientRect(),i=t.touches[n].clientX,a=t.touches[n].clientY;return{offsetX:i-r.left,offsetY:a-r.top,clientX:i,clientY:a}}function I(e){var t=String(e);if(e>=1e3){t=h.format(".5s")(e);var n=/[kMGTPEZY]$/;if(n.test(t)){var r=t[t.length-1];t=t.replace(n,""),t=parseFloat(t)+r}}return t}function M(e,t){var n=e;return null!==e&&"function"==typeof t&&(n=t(e)),n}var N=function(){function e(t,n,r){l()(this,e),this.options=void 0,this.ctx=void 0,this.yAxis=void 0,this.options=t,this.ctx=n,this.yAxis=r}return u()(e,[{key:"init",value:function(){var e=this.options,t=e.chart.width,n=e.timestamp,r=e.xmin,i=e.xmax,a=h.scaleTime().range([this.yAxis.tickMaxWidth,t]);return a.domain([A(i,n)+(r===i?1e3:0),A(r,n)-(r===i?1e3:0)]),a}},{key:"draw",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=n.time,o=e.ticks(Math.floor(r.width/90));i.ticks&&(o=i.ticks);var s=r.height-i.tickpadding-i.labels.fontSize;t.beginPath(),o.forEach((function(n){var r=e(n);r&&(t.moveTo(r,s),t.lineTo(r,s-i.tickLength))})),t.lineWidth=1,t.strokeStyle=i.tickColor,t.stroke(),t.closePath(),t.beginPath(),t.moveTo(0,s-i.tickLength),t.lineTo(r.width,s-i.tickLength),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke(),t.closePath(),t.textAlign="center",t.textBaseline="bottom",t.fillStyle=i.labels.color,t.font="".concat(i.labels.fontSize,"px Palantino"),o.forEach((function(n,s){var l="%H:%M";0!==n.getSeconds()&&(l="%H:%M:%S"),0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&(l="%m-%d"),i.labels.timeFormat&&(l=i.labels.timeFormat);var c=n;if(a&&a.timezoneOffset){var u=n.getTimezoneOffset(),p=n.getTime()+60*u*1e3+60*a.timezoneOffset*1e3;c=new Date(p)}if(i.ticks&&i.ticks.length>1){var d=e(n);0===s?d+=l.length*i.labels.fontSize/4+1:s===o.length-1&&(d-=l.length*i.labels.fontSize/4-1),t.fillText(h.timeFormat(l)(c),d,r.height)}else e(n)&&t.fillText(h.timeFormat(l)(c),e(n),r.height)}))}},{key:"drawPlotLines",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=n.xAxis.plotLines,o=r.height-i.tickpadding-i.labels.fontSize;Array.isArray(a)&&a.forEach((function(r){var a=e("X"===n.timestamp?1e3*r.value:r.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(a,0),t.lineTo(a,o-i.tickLength),t.strokeStyle=r.color,t.stroke(),t.setLineDash([])}))}}]),e}(),F=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.tickLength=void 0,this.ticks=void 0,this.tickMaxWidth=void 0,this.options=t;var r=t.yAxis;n.font="".concat(r.labels.fontSize,"px Palantino"),this.ctx=n,this.tickLength=Math.floor(t.chart.height/50),this.ticks=[],this.tickMaxWidth=0}return u()(e,[{key:"init",value:function(){var e=this.options,t=e.chart,n=e.xAxis,r=h.scaleLinear().range([t.height-(n.labels.fontSize+n.tickpadding+n.tickLength),20]);return this.setDomain(r,this.options),r}},{key:"getRealData",value:function(e){var t=this.options,n=t.yAxis.plotLines,r=t.ykey,i=t.fillNull;return Array.isArray(e)?(Array.isArray(n)&&n.forEach((function(t){"number"==typeof t.value&&e.push(o()({},r,t.value))})),"number"==typeof i&&e.push(o()({},r,i)),e):[]}},{key:"getPlotLinesMaxAbs",value:function(){var e,t=this.options.yAxis.plotLines;return Array.isArray(t)&&t.forEach((function(t){(!e||Math.abs(e)<Math.abs(t.value))&&(e=t.value)})),e}},{key:"setDomain",value:function(e,t){var n=t.ymin,r=t.ymax,i=this.options.yAxis,a=this.getPlotLinesMaxAbs(),o=this.tickLength;if(n===r){var s=(r-n)/(this.tickLength-1),l=s/2||r||1;o=0===s?1:this.tickLength,n-=l,r+=l}if(n>r){var c=n;n=r,r=c}a&&(a<n&&(n=a),a>r&&(r=a)),e.domain([n,r]),e.nice(o);var u,h,d,f,m=e.ticks(o),g=(u=m,h=this.ctx,d=i.tickValueFormatter,f=u.map((function(e){var t;return t="function"==typeof d?d(e):I(e),h.measureText(t).width})),Object(p.max)(f)+5);this.ticks=m,this.tickMaxWidth=g}},{key:"draw",value:function(e){var t=this,n=this.ctx,r=this.options,i=r.yAxis,a=r.chart;n.beginPath(),n.fillStyle="#fff",n.fillRect(0,0,this.tickMaxWidth,a.height),n.stroke(),n.closePath(),n.textAlign="right",n.textBaseline="middle",n.strokeStyle=i.labels.color,n.lineWidth=1,n.fillStyle=i.labels.color,this.ticks.forEach((function(r){var a;a="function"==typeof i.tickValueFormatter?i.tickValueFormatter(r):I(r);var o=e(r);n.fillText(a,t.tickMaxWidth-5,o)}))}},{key:"drawGridLine",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.yAxis;t.beginPath(),this.ticks.forEach((function(n){var i=e(n);t.moveTo(0,i),t.lineTo(r.width,i)})),t.strokeStyle=i.gridLineColor,t.stroke(),t.closePath()}},{key:"drawPlotLines",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.yAxis,a=n.yAxis.plotLines;Array.isArray(a)&&a.forEach((function(n){var a=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(0,a),t.lineTo(r.width,a),t.strokeStyle=n.color,t.stroke(),t.setLineDash([]),t.textAlign="right",t.textBaseline="top",t.shadowColor="#fff",t.shadowBlur=1,t.lineWidth=1,t.fillStyle=n.color,t.font="".concat(i.labels.fontSize,"px Palantino"),t.strokeText(String(n.value),r.width-10,a),t.fillText(String(n.value),r.width-10,a)}))}}]),e}();function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t){return"X"===t?1e3*e:e}function D(e){var t,n=e.series,r=e.x,i=e.xkey,a=e.ykey,o=e.ykey2,s=e.oykey,l=e.timestamp,c=e.fillNull,u=(t=function(e,t){return(n=R(e[i],l))<(r=t)?-1:n>r?1:n>=r?0:NaN;var n,r},{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}).left,h=new Date(r).getTime(),d=[];return"[object Array]"!==Object.prototype.toString.call(n)?[]:(n.forEach((function(e,t){if(I=e,M=o,!Object(p.some)(I.data,(function(e){return M&&M in e}))&&!1!==e.visible){var n=e.name,f=e.color,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"[object Function]"===Object.prototype.toString.call(t)&&t(r)&&(n[r]=e[r]);return n}(e,(function(e){return"data"!==e})),g=e.data,v=void 0===g?[]:g;if("[object Array]"===Object.prototype.toString.call(v)&&0!==(v=v.filter((function(e){return"number"==typeof e[a]||"number"==typeof c}))).length){var y,x=u(v,r),E=v[x-1],b=v[x];if(E&&b){var C=R(E[i],l),T=R(b[i],l),w=E[a],S=b[a];null===w&&void 0!==c&&(w=c),null===S&&void 0!==c&&(S=c),y=h-C<T-h?P(P({},E),{},{name:n,color:f,timestamp:C,value:w,origin:E[s],serieIndex:t,serieOptions:m}):P(P({},b),{},{name:n,color:f,timestamp:T,value:S,origin:b[s],serieIndex:t,serieOptions:m}),d.push(y)}else if(E){var k=R(E[i],l),_=E[a];null===_&&void 0!==c&&(_=c),y=P(P({},E),{},{name:n,color:f,timestamp:k,value:_,origin:E[s],serieIndex:t,serieOptions:m}),d.push(y)}else if(b){var A=R(b[i],l),O=b[a];null===O&&void 0!==c&&(O=c),y=P(P({},b),{},{name:n,color:f,timestamp:A,value:O,origin:b[s],serieIndex:t,serieOptions:m}),d.push(y)}}}var I,M})),d)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(){function e(t,n,r,i){l()(this,e),this.options=void 0,this.ctx=void 0,this.flag=void 0,this.container=void 0,this.isMouserover=void 0,this.options=t,this.ctx=n,this.flag=!1,this.container=r,this.init(r,i),this.isMouserover=!1}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart.id,r=document.createElement("div");r.id="".concat(n,"-tooltip"),r.className="ts-graph-tooltip",document.getElementById(r.id)||document.body.append(r)}},{key:"clear",value:function(){var e=this.options,t=e.ratio,n=e.chart,r=n.id,i=n.containerWidth,a=n.containerHeight,o=document.getElementById("".concat(r,"-tooltip"));this.isMouserover=!1,this.ctx.save(),this.ctx.setTransform(1*t,0,0,1*t,0,0),this.ctx.clearRect(0,0,i,a),this.ctx.restore(),o.style.top="-99999px",o.lastChild&&o.removeChild(o.lastChild)}},{key:"getNearestPoints",value:function(e,t,n,r){var i=this.options,a=i.series,o=void 0===a?[]:a,s=i.chart.colors,l=i.tooltip.shared,c=i.xkey,u=i.ykey,h=i.ykey2,d=i.oykey,f=i.timestamp,m=i.fillNull,g=this.container.getBoundingClientRect(),v=e.offsetX||e.clientX-g.left,y=t.invert(v),x=[];if(!1!==this.isMouserover){x=D({x:y,xkey:c,ykey:u,ykey2:h,oykey:d,timestamp:f,series:o,fillNull:m}).map((function(e){return z(z({},e),{},{x:t(e.timestamp),y:n(e.value),color:e.color||_(s,e.serieIndex)})}));var E,b,C=Object(p.groupBy)(x,"x");if(Object(p.keys)(C).length>1){var T=Number.POSITIVE_INFINITY;for(var w in C)if(Object.prototype.hasOwnProperty.call(C,w)){var S=(E=e.offsetX,b=Number(w),Math.sqrt(Math.pow(b-E,2)));S<T&&(T=S,x=C[w])}}if(!l){var k=Number.POSITIVE_INFINITY;x.forEach((function(t){var n,r,i=(n={x:e.offsetX,y:e.offsetY},r=t,Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)));i<k&&(k=i,x=[t])}))}r(x)}}},{key:"draw",value:function(e,t,n){var r=this,i=t.xScales,a=t.yScales,o=t.yAxis;this.isMouserover=!0,this.getNearestPoints(e,i,a,(function(t){if(r.clear(),t.length){if(t[0].x<o.tickMaxWidth)return;r.drawCrosshair(t[0].x),r.drawSymbol(t),r.drawModal(t,e)}n&&"[object Function]"===Object.prototype.toString.call(n)&&n(t)}))}},{key:"drawModal",value:function(e,t){var n=this.options,r=n.chart,a=r.id,o=r.renderTo,s=n.tooltip,l=n.time,c=n.notDisplayedSeries,u=o.offsetWidth,d=o.offsetHeight,f=document.getElementById("".concat(a,"-tooltip")),m=document.createElement("div"),g=e,v=((d=window.innerHeight/1.5)-18-100)/15,y=!1;if(s.sharedSortDirection&&(e=Object(p.orderBy)(e,(function(e){return e.value}),s.sharedSortDirection)),e.length>v&&(e=e.slice(0,v),y=!0),m.className="ts-graph-tooltip-content",f.appendChild(m),"[object Function]"===Object.prototype.toString.call(s.formatter))m.innerHTML=s.formatter(i()(e),i()(g));else{var x=e[0],E=document.createDocumentFragment(),b=document.createElement("ul"),C=document.createElement("li"),T=new Date(x.timestamp);if(l&&l.timezoneOffset){var w=T.getTimezoneOffset(),S=T.getTime()+60*w*1e3+60*l.timezoneOffset*1e3;T=new Date(S)}var k=document.createTextNode(h.timeFormat(s.timeFormat)(T));if(C.appendChild(k),C.style.color="#666",b.style.maxWidth="".concat(window.innerWidth/1.5,"px"),b.appendChild(C),E.appendChild(b),e.forEach((function(e){var t=e.color,n=e.name,r=e.origin,i=e.filledNull;if(!(c.indexOf(n)>-1)){var a=document.createElement("li");if(t){var o=document.createElement("span"),l=document.createTextNode("● ");o.style.color=t,o.appendChild(l),a.appendChild(o)}if(n){var u=document.createTextNode("".concat(n,": "));a.appendChild(u)}var d=r;if(Object(p.isNumber)(d)){var f,m=document.createElement("strong");f="function"==typeof s.pointValueformatter?s.pointValueformatter(d):"origin"===s.precision?d:"short"===s.precision?function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(h.format(".5s")(d)):s.precision>0?h.format(",."+s.precision+"f")(d):h.format(",.3f")(d),f+=i?"(空值填补,仅限看图使用)":"";var g=document.createTextNode(f);m.appendChild(g),a.appendChild(m)}b.appendChild(a)}})),y){var _=document.createElement("li"),A=document.createTextNode("......");_.appendChild(A),b.appendChild(_)}m.appendChild(E)}var O=m.offsetWidth,I=m.offsetHeight,M=this.container.getBoundingClientRect(),N=t.layerX+M.left,F=t.layerY+M.top;f.style.left="".concat(N-O-20,"px"),f.style.top="".concat(F+20,"px"),N-O-20<0&&(f.style.left="".concat(N+20,"px"),N+20+O>u&&(f.style.left="0px")),F+20+I>d&&(f.style.top=F-I-20<0?"0px":"".concat(F-I-20,"px")),f.style.zIndex="9999",f.style.visibility="visible"}},{key:"drawSymbol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.ctx,n=this.options;e.forEach((function(e){var r=e.x,i=e.y,a=e.color,o=e.name;n.notDisplayedSeries.indexOf(o)>-1||(t.beginPath(),t.arc(r,i,5,0,360,!1),t.lineWidth=1,t.fillStyle=a,t.fill(),t.beginPath(),t.arc(r,i,3,0,360,!1),t.lineWidth=1,t.fillStyle="white",t.fill())}))}},{key:"drawCrosshair",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=r.height-i.tickpadding-i.labels.fontSize-i.tickLength;t.beginPath(),t.moveTo(e,0),t.lineTo(e,a),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke()}},{key:"destroy",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-tooltip"));t&&t.parentNode&&t.parentNode.removeChild(t)}}]),e}(),j=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.options=t,this.ctx=n}return u()(e,[{key:"draw",value:function(e,t){var n=this.options,r=n.series,i=n.chart,a=i.colors,o=i.height,s=n.xAxis,l=n.xkey,c=n.ykey,u=n.ykey2,d=n.timestamp,f=n.fillNull,m=n.notDisplayedSeries,g=n.curve,v=this.options.line.width,y=this.options.area.opacity,x=this.ctx,E=function(t){var n="X"===d?1e3*t[l]:t[l];return e(new Date(n))},b=function(e,n){var r=e[n];return"number"!=typeof r||isNaN(r)?"number"==typeof f?t(f):void 0:t(r)},C=function(e){return"number"==typeof e[c]||"number"==typeof f};Object(p.sortBy)(r,"zIndex").forEach((function(e,t){if(!1!==e.visible&&!(m.indexOf(e.name)>-1)){var n=e.color||_(a,t);if(e.color=n,y>0||e.opacity){x.beginPath();var r=h.area().x(E).y0((function(e){return u&&u in e?b(e,c):o-s.tickpadding-s.labels.fontSize-5})).y1((function(e){return b(e,u&&u in e?u:c)})).defined(C).context(x);g.enabled&&"smooth"===g.mode&&r.curve(h.curveMonotoneX),r(e.data||[]),x.fillStyle=n,x.globalAlpha=y||(e.opacity?e.opacity:.5),x.fill(),x.closePath()}if(v>0&&void 0===e.opacity){x.beginPath();var i=h.line().x(E).y((function(e){return b(e,c)})).defined(C).context(x);g.enabled&&"smooth"===g.mode&&i.curve(h.curveMonotoneX),x.lineTo(0,0),i(e.data||[]),x.lineJoin="round",x.lineWidth=v,x.strokeStyle=n,x.lineCap="round",x.globalAlpha=1,x.setLineDash(e.lineDash||[]),x.stroke(),x.closePath()}}}))}}]),e}(),G=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.options=t,this.ctx=n}return u()(e,[{key:"draw",value:function(e,t,n){var r=this.options,i=r.series,a=r.chart,o=a.colors,s=a.height,l=a.width,c=r.xAxis,u=r.timestamp,d=r.xkey,f=r.ykey,m=r.notDisplayedSeries,g=this.ctx,v=this.options.area.opacity;Object(p.sortBy)(i,"zIndex").forEach((function(r,i){if(!1!==r.visible&&!(m.indexOf(r.name)>-1)){var a=r.color||_(o,i);r.color=a,g.fillStyle=a,g.globalAlpha=v;var p=h.scaleBand().domain(r.data.map((function(e){return"X"===u?1e3*e[d]:e[d]}))).range([0,l]).padding(.3),y=(null==n?void 0:n.k)||1;r.data.forEach((function(n){var r="X"===u?1e3*n[d]:n[d];g.fillRect(e(r)-p.bandwidth()*y/2,t(n[f]),p.bandwidth()*y,s-t(n[f])-c.tickpadding-c.labels.fontSize-5)})),g.globalAlpha=1}}))}}]),e}(),$=function(){function e(t,n,r,i){l()(this,e),this.options=void 0,this.reset=void 0,this.options=t,this.init(r,i),this.reset=n}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart,r=n.id,i=n.containerHeight,a=document.getElementById("".concat(r,"-zoom"));a&&a.remove(),a=document.createElement("div");var o=document.createElement("div"),s=document.createElement("a"),l=document.createTextNode("Reset zoom");a.id="".concat(r,"-zoom"),a.className="ts-graph-zoom",o.id="".concat(r,"-zoom-marker"),o.className="ts-graph-zoom-marker",o.style.height="".concat(i,"px"),s.id="".concat(r,"-zoom-resetBtn"),s.className="ts-graph-zoom-resetBtn",s.appendChild(l),a.appendChild(o),a.appendChild(s),e.insertBefore(a,t),this.onReset()}},{key:"onReset",value:function(){var e=this,t=this.options.chart.id;document.getElementById("".concat(t,"-zoom-resetBtn")).addEventListener("click",(function(t){t.stopPropagation(),e.reset(),e.clearResetBtn()}))}},{key:"onZoom",value:function(e,t,n){var r=this.options.chart.width,i=t.offsetX-e.offsetX;if(i){var a=r/Math.abs(i),o=t.offsetX>e.offsetX?e.offsetX:t.offsetX,s=h.zoomIdentity.translate(-o*a,0).scale(a);this.drawResetBtn(),n(s)}}},{key:"clearMarker",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-zoom-marker"));t.style.display="none",t.style.width="0px",t.style.left="unset",t.style.right="unset"}},{key:"drawMarker",value:function(e,t){var n=this.options.chart.marginLeft,r=e.offsetX,i=t.offsetX,a=this.options.chart,o=a.id,s=a.containerWidth,l=document.getElementById("".concat(o,"-zoom-marker"));l.style.display="block",l.style.top="0px",r<i?(l.style.right="unset",l.style.left="".concat(r+n,"px"),l.style.width="".concat(i-r,"px")):(l.style.left="unset",l.style.right="".concat(s-r-n,"px"),l.style.width="".concat(r-i,"px"))}},{key:"clearResetBtn",value:function(){var e=this.options.chart.id;document.getElementById("".concat(e,"-zoom-resetBtn")).style.display="none"}},{key:"drawResetBtn",value:function(){var e=this.options.chart.id;document.getElementById("".concat(e,"-zoom-resetBtn")).style.display="block"}}]),e}(),Y=function(){function e(t,n,r,i){var a=this;l()(this,e),this.options=void 0,this.onLegendItemClick=void 0,this.handelLegendItemClick=function(e){var t=e.currentTarget;if(t){t.classList.contains("ts-graph-legend-item-active")?t.classList.remove("ts-graph-legend-item-active"):t.classList.add("ts-graph-legend-item-active");var n=t.getAttribute("data-serie");n&&a.onLegendItemClick(n)}},this.options=t,this.init(r,i),this.onLegendItemClick=n}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart.id,r=document.createElement("div");r.id="".concat(n,"-legend"),r.className="ts-graph-legend",document.getElementById(r.id)||e.insertBefore(r,t)}},{key:"initEvent",value:function(){var e=this,t=this.options.chart.id;document.getElementById("".concat(t,"-legend")).querySelectorAll(".ts-graph-legend-item").forEach((function(t){t.removeEventListener("click",e.handelLegendItemClick),t.addEventListener("click",e.handelLegendItemClick)}))}},{key:"updateOptions",value:function(e){this.options=e}},{key:"draw",value:function(){var e=this.options,t=e.chart.id,n=e.series,r=e.legend,i=document.getElementById("".concat(t,"-legend"));if(r.enabled){if("[object Array]"===Object.prototype.toString.call(n)){i.innerHTML="";var a=document.createDocumentFragment();n.forEach((function(e){var t=document.createElement("span"),n=document.createElement("span"),r=document.createElement("span"),i=document.createElement("span"),o=document.createTextNode(e.name);t.className="ts-graph-legend-item",t.setAttribute("data-serie",e.name),n.className="ts-graph-legend-item-symbol",r.className="ts-graph-legend-item-symbol-line",r.style.borderColor=e.color,i.className="ts-graph-legend-item-symbol-point",i.style.backgroundColor=e.color,n.appendChild(r),n.appendChild(i),t.appendChild(n),t.appendChild(o),a.appendChild(t)})),i.appendChild(a)}this.initEvent()}}}]),e}(),U=function(){function e(t,n){l()(this,e),this.options=void 0,this.options=t,this.init(n)}return u()(e,[{key:"init",value:function(e){var t=this.options.chart.id,n=document.getElementById("".concat(t,"-shapes"));n&&n.remove(),(n=document.createElement("div")).id="".concat(t,"-shapes"),n.className="ts-graph-shapes",e.appendChild(n),n.addEventListener("mouseover",this.onMouseMove.bind(this)),n.addEventListener("click",this.onClick.bind(this))}},{key:"onMouseMove",value:function(e){var t=this.options,n=t.shapes,r=t.onShapeMouseOver;if("IMG"===e.target.tagName){var i=Object(p.find)(n,{id:e.target.dataset.id});i&&"function"==typeof r&&r(e,i)}}},{key:"onClick",value:function(e){var t=this.options,n=t.shapes,r=t.onShapeClick;if("IMG"===e.target.tagName){var i=Object(p.find)(n,{id:e.target.dataset.id});i&&"function"==typeof r&&r(e,i)}}},{key:"draw",value:function(e,t){var n=this.options,r=n.chart.id,i=n.shapes,a=document.getElementById("".concat(r,"-shapes"));a&&"[object Array]"===Object.prototype.toString.call(i)&&(a.innerHTML="",i.forEach((function(n){var r=document.createElement("img");r.src=n.imgData,r.dataset.id=n.id,r.style.position="absolute",r.onload=function(){r.style.left="".concat(e(n.x)+r.width/2,"px"),r.style.top="".concat(t(n.y)-r.height/2,"px")},a.appendChild(r)})))}},{key:"destroy",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-shapes"));t&&(t.removeEventListener("mouseover",this.onMouseMove),t.removeEventListener("click",this.onClick),t.parentNode&&(t.innerHTML=""))}}]),e}();function V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(12);var K=new k.a,Q=function(){function e(t){var n=this;l()(this,e),this.options=void 0,this.container=void 0,this.frontContext=void 0,this.backContext=void 0,this.eventCanvas=void 0,this.frontCanvas=void 0,this.backCanvas=void 0,this.xAxis=void 0,this.xScales=void 0,this.yAxis=void 0,this.yScales=void 0,this.line=void 0,this.bar=void 0,this.legend=void 0,this.tooltip=void 0,this.zoom=void 0,this.transform=void 0,this.shapes=void 0,this.showTooltip=function(e){n.tooltip.draw(e,n)},this.hideTooltip=function(){n.tooltip.clear()},this.getZoomedSeries=function(){var e=n.options,t=e.chart.renderTo,r=e.series,i=e.timestamp,a=e.xkey,o=t.offsetWidth;return r.map((function(e){if("[object Array]"===Object.prototype.toString.call(e.data)){var t=e.data.filter((function(e){var t="X"===i?1e3*e[a]:e[a],r=n.xScales(new Date(t));return r>=0&&r<=o}));return q(q({},e),{},{data:t})}return e}))},this.handleResize=function(){var e=n.options.chart,t=e.renderTo.offsetWidth,r=e.renderTo.offsetHeight;n.options.chart.width=t-e.marginLeft-e.marginRight,n.options.chart.height=r-e.marginTop-e.marginBottom,n.options.chart.containerWidth=t,n.options.chart.containerHeight=r,n.container.style.width="".concat(t,"px"),n.container.style.height="".concat(r,"px"),n.retinaScaled(n.backCanvas,"back"),n.retinaScaled(n.frontCanvas,"front"),n.retinaScaled(n.eventCanvas,"event"),n.initScales(),n.initZoom(),n.draw(!1)},this.handleZoom=function(e,t){if(n.options.onZoomWithoutDefult){var r;t&&(r=Object(p.sortBy)(t,"offsetX").map((function(e){return n.xScales.invert(e.offsetX)}))),n.options.onZoomWithoutDefult(r)}else{var i=n.options,a=i.ykey,o=i.yAxis,s=i.ykeyFormatter,l=n.options.series;if(e?(n.transform=e,n.xScales=e.rescaleX(n.xScales),l=n.getZoomedSeries()):(n.transform=void 0,n.xScales=n.xAxis.init()),Array.isArray(l)){var c,u=o.min||-1/0,h=o.max||1/0,d=V(l);try{for(d.s();!(c=d.n()).done;){var f=c.value,m=Array.isArray(f.data)?f.data:[],g=void 0;for(g=0;g<m.length;g++){var v=M(m[g][a],s);null!==v&&(u<v&&(u=v),h>v&&(h=v))}}}catch(y){d.e(y)}finally{d.f()}n.yAxis.setDomain(n.yScales,{ymin:u,ymax:h})}n.options.onZoom(n.getZoomedSeries)}n.draw(!1)},this.handleLegendItemClick=function(e){var t=n.options.notDisplayedSeries;-1===t.indexOf(e)?t.push(e):n.options.notDisplayedSeries=t.filter((function(t){return t!==e})),n.draw(!1)};var r={ratio:window.devicePixelRatio||1,xkey:0,ykey:1,ykey2:2,oykey:"__originValue",timestamp:"x",chart:{id:Object(p.uniqueId)("ts-graph-"),colors:["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"],width:t.chart.renderTo.offsetWidth,height:t.chart.renderTo.offsetHeight||350,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10},xAxis:{visible:!0,lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",labels:{color:"#999",fontSize:11}},yAxis:{visible:!0,lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",gridLineColor:"#efefef",labels:{color:"#999",fontSize:11}},type:"line",line:{enable:!0,width:2},area:{opacity:0},bars:{},stack:{enabled:!1},curve:{enabled:!1},tooltip:{shared:!0,cascade:!1,cascadeScope:void 0,timeFormat:"%Y-%m-%d %H:%M:%S"},series:[],legend:{align:"center",verticalAlign:"top",enabled:!1},fillNull:void 0,onClick:function(){},onRightClick:function(){},onZoom:function(){},onShapeMouseOver:function(){},onShapeClick:function(){}},i=Object(p.merge)({},r,t);void 0===t.chart.marginTop&&i.legend.enabled&&(i.chart.marginTop=20),this.handleResize=Object(p.debounce)(this.handleResize,300),this.init(i)}return u()(e,[{key:"init",value:function(e){var t=e.chart;this.options=e,this.options.notDisplayedSeries=[],this.options.chart.containerWidth=t.width,this.options.chart.containerHeight=t.height,this.options.chart.width=t.width-t.marginLeft-t.marginRight,this.options.chart.height=t.height-t.marginTop-t.marginBottom,this.createContainer(),this.createCanvas(),this.initSeries(),this.initScales(),this.initEvent(),"line"===this.options.type&&this.initLine(),"bar"===this.options.type&&this.initBar(),this.initLegend(),this.initTooltip(),this.initZoom(),this.initShapes(),this.draw()}},{key:"clearRect",value:function(e){var t=this.options.chart,n=t.containerWidth,r=t.containerHeight;e.clearRect(0,0,n,r)}},{key:"draw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.transform;this.clearRect(this.backContext),this.options.xAxis.visible&&this.yAxis.drawGridLine(this.yScales),this.options.xAxis.visible&&this.xAxis.draw(this.xScales),"line"===this.options.type&&this.line.draw(this.xScales,this.yScales),"bar"===this.options.type&&this.bar.draw(this.xScales,this.yScales,t),this.xAxis.drawPlotLines(this.xScales),this.yAxis.drawPlotLines(this.yScales),this.options.yAxis.visible&&this.yAxis.draw(this.yScales),e&&this.legend.draw(),this.shapes.draw(this.xScales,this.yScales)}},{key:"update",value:function(e){var t=Object(p.assign)({},this.options,e);e.series&&(t.series=e.series),this.options=t,this.offEvents(),this.initSeries(),this.initScales(),this.initEvent(),"line"===this.options.type&&this.initLine(),"bar"===this.options.type&&this.initBar(),this.initTooltip(),this.initShapes(),this.legend.updateOptions(t),this.draw()}},{key:"getSeries",value:function(){return i()(this.options.series)}},{key:"initEvent",value:function(){var e,t=this.options.tooltip,n=t.cascade,r=t.cascadeScope,i=r?"plotmove:".concat(r):"plotmove",a=r?"plotleave:".concat(r):"plotleave",o=!1,s={},l={},c=!1,u=this,d=Object(p.debounce)((function(e){c&&(u.tooltip.draw(e,u),o&&u.zoom.drawMarker(s,e))}),5),f=Object(p.throttle)((function(){u.tooltip.clear()}),5);h.select(this.eventCanvas).on("mousemove",(function(){c=!0,d(h.event),n&&K.emit(i,h.event)})).on("mouseleave",(function(){e=h.event,c=!1,f(),n&&K.emit(a)})).on("mousedown",(function(){1===h.event.which&&(o=!0,s=h.event)})).on("mouseup",(function(){h.event.stopPropagation();var e=h.event;s&&s.offsetX!==e.offsetX?(u.zoom.clearMarker(),u.zoom.onZoom(s,e,(function(t){u.handleZoom(t,[s,e])}))):u.options.onClick(h.event,u.xScales.invert(h.event.offsetX),u.yScales.invert(h.event.offsetY)),o=!1,s={}})).on("contextmenu",(function(){u.options.onRightClick(h.event,u.xScales.invert(h.event.offsetX),u.yScales.invert(h.event.offsetY)),h.event.preventDefault()})).on("touchstart",(function(){h.event.touches.length>1&&(o=!0)})).on("touchmove",(function(){var e=O(u.eventCanvas,h.event);1===h.event.touches.length&&u.tooltip.draw(e,u),o&&(s=e,l=O(u.eventCanvas,h.event,1),u.zoom.drawMarker(s,l))})).on("touchend",(function(){c=!1,f(),s&&s.offsetX!==l.offsetX?(u.zoom.clearMarker(),u.zoom.onZoom(s,l,(function(e){u.handleZoom(e,[s,l])}))):u.options.onClick(h.event,u.xScales.invert(h.event.offsetX),u.yScales.invert(h.event.offsetY)),o=!1,s={},l={}})),n&&(K.on(i,this.showTooltip),K.on(a,this.hideTooltip)),window.addEventListener("mouseup",(function(){if(!Object(p.isEmpty)(s)){var t=e;o=!1,u.zoom.clearMarker(),u.zoom.onZoom(s,t,(function(e){u.handleZoom(e,[s,t])})),s={}}})),E(this.options.chart.renderTo,this.handleResize)}},{key:"retinaScaled",value:function(e,t){var n=this.options,r=n.chart,i=n.ratio,a=e.getContext("2d"),o="front"===t?r.containerWidth:r.width,s="front"===t?r.containerHeight:r.height,l="front"===t?"0px":"".concat(r.marginLeft,"px"),c="front"===t?"0px":"".concat(r.marginTop,"px");e.width=o*i,e.height=s*i,e.style.width="".concat(o,"px"),e.style.height="".concat(s,"px"),e.style.position="absolute",e.style.left=l,e.style.top=c,"front"===t&&a.translate(r.marginLeft*i,r.marginTop*i),a.scale(i,i)}},{key:"createContainer",value:function(){var e=this.options.chart,t=document.createElement("div");t.style.position="relative",t.style.width="".concat(e.containerWidth,"px"),t.style.height="".concat(e.containerHeight,"px"),t.style.overflow="hidden",t.className="d3-graph-container",e.renderTo.appendChild(t),this.container=t}},{key:"createCanvas",value:function(){var e=this.options.chart.id;function t(t){var n=document.createElement("canvas"),r=n.getContext("2d");n.setAttribute("id","".concat(e,"-").concat(t,"Canvas")),this.container.appendChild(n),this["".concat(t,"Canvas")]=n,this["".concat(t,"Context")]=r,this.retinaScaled(n,t)}t.call(this,"back"),t.call(this,"front"),t.call(this,"event")}},{key:"initSeries",value:function(){var e=this.options,t=e.fillNull,n=e.series,r=e.xkey,i=e.ykey,a=e.ykey2,s=e.ykeyFormatter,l=e.oykey,c=e.yAxis,u=e.stack,h=-1/0,d=1/0,f=c.min,m=c.max;if(Array.isArray(n)){var g=[];n.forEach((function(e,c){var v,y=Array.isArray(e.data)?e.data:[],x=[],E=!1,b=function(){var e,g=y[v][l]?y[v][l]:M(y[v][i],s),b=(e={},o()(e,r,y[v][r]),o()(e,i,g),o()(e,l,g),e);if(a&&a in y[v]&&(b[a]=M(y[v][a],s)),u.enabled){void 0===b[l]&&(b[l]=M(b[i],s));var C=c;if(C>0)for(;C>0;){var T=Array.isArray(n[C-1].data)?n[C-1].data:[],w=Object(p.find)(T,(function(e){return e[r]===b[r]}));if(w){var S=isNaN(b[l])?0:b[l],k=M(w[i],s);k=isNaN(k)?0:k,b[i]=k+S;break}1===C&&(b[i]=b[l]),C--}else b[i]=b[l]}y[v]=b;var _=b[r],A=b[i],O=void 0;a&&a in y[v]&&(O=b[a]),void 0===t?!isNaN(A)&&(0===v||v===y.length-1||v>0&&v<y.length-1&&"number"==typeof A)?(x.push(b),E=!0):E&&(x.push(b),E=!1):x.push(b),h<_&&(h=_),d>_&&(d=_),"number"!=typeof A||isNaN(A)?"number"==typeof t&&(t<f&&(f=t),t>m&&(m=t)):(("number"!=typeof f||A<f)&&(f=A),"number"==typeof O&&O<f&&(f=O),("number"!=typeof m||A>m)&&(m=A),"number"==typeof O&&O>m&&(m=O))};for(v=0;v<y.length;v++)b();g.push(q(q({},e),{},{data:x,zIndex:u.enabled?n.length-c:c}))})),this.options.series=g,this.options.xmin=h,this.options.xmax=d,this.options.ymin=f,this.options.ymax=m}}},{key:"initLine",value:function(){this.line=new j(this.options,this.backContext)}},{key:"initBar",value:function(){this.bar=new G(this.options,this.backContext)}},{key:"initTooltip",value:function(){this.tooltip=new H(this.options,this.frontContext,this.container,this.eventCanvas)}},{key:"initZoom",value:function(){this.zoom=new $(this.options,this.handleZoom,this.container,this.eventCanvas)}},{key:"initLegend",value:function(){this.legend=new Y(this.options,this.handleLegendItemClick,this.container,this.eventCanvas)}},{key:"initScales",value:function(){var e=new F(this.options,this.backContext);this.yAxis=e,this.yScales=e.init();var t=new N(this.options,this.backContext,this.yAxis);this.xAxis=t;var n=t.init();this.transform&&(n=this.transform.rescaleX(n)),this.xScales=n}},{key:"initShapes",value:function(){var e=new U(this.options,this.container);this.shapes=e}},{key:"offEvents",value:function(){var e=this.options.tooltip,t=e.cascade,n=e.cascadeScope,r=n?"plotmove:".concat(n):"plotmove",i=n?"plotleave:".concat(n):"plotleave";h.select(this.eventCanvas).on("mousemove",null).on("mouseleave",null).on("mousedown",null).on("mouseup",null).on("touchmove",null),function(e,t){let n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",C),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--y&&x&&x.parentNode.removeChild(x)}}(this.options.chart.renderTo,this.handleResize),t&&(K.off(r,this.showTooltip),K.off(i,this.hideTooltip))}},{key:"destroy",value:function(){this.shapes.destroy(),this.tooltip.destroy(),this.offEvents(),h.select(this.container).remove()}}]),e}()}])));const sh=["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"],lh=()=>d.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em"},d.createElement("path",{d:"M810.666667 426.666667h-170.666667V128a42.666667 42.666667 0 0 0-42.666667-42.666667H384a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v512a42.666667 42.666667 0 0 0 42.666667 42.666667h640a42.666667 42.666667 0 0 0 42.666666-42.666667V469.333333a42.666667 42.666667 0 0 0-42.666666-42.666666zM341.333333 853.333333H213.333333V426.666667h128v426.666666z m213.333334 0h-128V170.666667h128v682.666666z m213.333333 0h-128v-341.333333h128v341.333333z m170.666667-682.666666h-42.666667V128a42.666667 42.666667 0 1 0-85.333333 0v42.666667h-42.666667a42.666667 42.666667 0 0 0 0 85.333333h42.666667v42.666667a42.666667 42.666667 0 0 0 85.333333 0V256h42.666667a42.666667 42.666667 0 1 0 0-85.333333z",fill:"currentColor"})),ch=e=>d.createElement(x,l(s({component:lh},e),{className:"anticon-addpanel"})),uh={bitsSI:{type:"si",base:"bits"},bytesSI:{type:"si",base:"bytes"},bitsIEC:{type:"iec",base:"bits"},bytesIEC:{type:"iec",base:"bytes"}},hh={type:"iec",base:"bytes",decimals:2},ph=[{exp:0,si:"",iec:"",iecExp:1},{exp:3,si:"k",iec:"Ki",iecExp:10},{exp:6,si:"M",iec:"Mi",iecExp:20},{exp:9,si:"G",iec:"Gi",iecExp:30},{exp:12,si:"T",iec:"Ti",iecExp:40},{exp:15,si:"P",iec:"Pi",iecExp:50},{exp:18,si:"E",iec:"Ei",iecExp:60},{exp:21,si:"Z",iec:"Zi",iecExp:70},{exp:24,si:"Y",iec:"Yi",iecExp:80}],dh={bits:"b",bytes:"B"};function fh(e,t=hh){if(null==e)return;const n=t.base?dh[t.base]:"";if("si"===t.type&&Math.abs(e)<1e3||"iec"===t.type&&Math.abs(e)<1024)return T.round(e,t.decimals)+n;const r="iec"===t.type?2:10,i=e.toExponential().match(/(\d.*\+)(\d{1,2})/);if(i){const a=3*Math.floor(parseInt(T.get(i,"[2]"))/3),o=T.find(ph,{exp:a});if(!o)return NaN;const s=T.get(o,t.type),l=T.get(o,"iec"===t.type?"iecExp":"exp"),c=Math.pow(r,l);return T.round(e/c,t.decimals)+s+n}return T.round(e,t.decimals)}function mh(e,t,n){if("number"!=typeof e)return e;let r=e,i={seconds:"s",milliseconds:"ms"}[t];if(T.forEach([{unit:"year",value:31104e3},{unit:"month",value:2592e3},{unit:"week",value:604800},{unit:"day",value:86400},{unit:"hour",value:3600},{unit:"min",value:60}],(n=>{const a=e/n.value/("milliseconds"===t?1e3:1);if(a>=1)return r=a,i=n.unit,!1})),"milliseconds"===t&&"ms"===i){const e=r/1e3;e>=1&&(r=e,i="s")}return T.round(r,n)+i}const gh=({util:e,decimals:t=3},n)=>{if(null===n||""===n||void 0===n)return"";if("number"!=typeof n&&(n=T.toNumber(n)),e){const r=uh[e];if(r){const{type:e,base:i}=r;return fh(n,{type:e,base:i,decimals:t})}return"none"===e?T.round(n,t):"percent"===e?T.round(n,t)+"%":"percentUnit"===e?T.round(100*n,t)+"%":"humantimeSeconds"===e?A.duration(n,"seconds").humanize():"humantimeMilliseconds"===e?A.duration(n,"milliseconds").humanize():"seconds"===e||"milliseconds"===e?mh(n,e,t):T.round(n,t)}return fh(n,{type:"si",decimals:t})},vh=e=>T.toNumber(T.get(e,1,NaN)),yh=(e,t,n)=>{var r,i,a;const{util:o,decimals:s}=t||{},l=T.find(n,(t=>{const{type:n,match:r}=t;if(null===e||""===e||void 0===e){if("specialValue"===n){if("empty"===(null==r?void 0:r.specialValue))return""===e;if("null"===(null==r?void 0:r.specialValue))return null==e}return!1}return e=T.toNumber(e),"special"===n?e===(null==r?void 0:r.special):"range"===n&&((null==r?void 0:r.from)&&(null==r?void 0:r.to)?e>=(null==r?void 0:r.from)&&e<=(null==r?void 0:r.to):(null==r?void 0:r.from)?e>=(null==r?void 0:r.from):!!(null==r?void 0:r.to)&&e<=(null==r?void 0:r.to))}));return{text:(null==(r=null==l?void 0:l.result)?void 0:r.text)?null==(i=null==l?void 0:l.result)?void 0:i.text:gh({util:o,decimals:s},e),color:null==(a=null==l?void 0:l.result)?void 0:a.color}},xh=(e,t,{util:n,decimals:r},i)=>T.map(e,(e=>{const a={lastNotNull:()=>T.get(T.last(T.filter(e.data,(e=>null!==e[1]))),1),last:()=>T.get(T.last(e.data),1),firstNotNull:()=>T.get(T.first(T.filter(e.data,(e=>null!==e[1]))),1),first:()=>T.get(T.first(e.data),1),min:()=>vh(T.minBy(e.data,(e=>T.toNumber(e[1])))),max:()=>vh(T.maxBy(e.data,(e=>T.toNumber(e[1])))),avg:()=>T.meanBy(e.data,(e=>T.toNumber(e[1]))),sum:()=>T.sumBy(e.data,(e=>T.toNumber(e[1]))),count:()=>T.size(e.data)},o=a[t]?a[t]():NaN;return s({id:e.id,name:e.name,metric:e.metric,fields:l(s({},e.metric),{refId:e.refId}),stat:T.toNumber(o)},yh(o,{util:n,decimals:r},i))})),Eh=(e,{util:t,decimals:n},r)=>T.map(e,((e,i)=>{const a={max:vh(T.maxBy(e.data,(e=>T.toNumber(e[1])))),min:vh(T.minBy(e.data,(e=>T.toNumber(e[1])))),avg:T.meanBy(e.data,(e=>T.toNumber(e[1]))),sum:T.sumBy(e.data,(e=>T.toNumber(e[1]))),last:vh(T.last(e.data))};return{id:e.id,name:e.name,metric:e.metric,offset:e.offset,color:r[i%r.length],disabled:!1===e.visible||void 0,max:gh({util:t,decimals:n},a.max),min:gh({util:t,decimals:n},a.min),avg:gh({util:t,decimals:n},a.avg),sum:gh({util:t,decimals:n},a.sum),last:gh({util:t,decimals:n},a.last)}}));function bh(e){var t,n;const{values:r,series:i,inDashboard:a=!0,chartHeight:o="200px",tableHeight:c="200px"}=e,{custom:u,options:h={}}=r,[p,m]=f.exports.useState(i),[g,v]=f.exports.useState(""),y=f.exports.useRef(null),x=f.exports.useRef(null),E=f.exports.useRef(null),b=pe(E),C=(null==(t=h.legend)?void 0:t.displayMode)||"table",w=(null==(n=h.legend)?void 0:n.placement)||"bottom",S="hidden"!==C,[k,_]=f.exports.useState([]);let A=S?"70%":"100%",O=S?"30%":"0px";return a||(A=o,O=c),"right"===w&&(A="100%",O="100%"),f.exports.useEffect((()=>{var e,t;return y.current&&(x.current&&x.current.destroy(),x.current=new oh({colors:sh,timestamp:"X",xkey:0,ykey:1,ykey2:2,ykeyFormatter:e=>Number(e),chart:{renderTo:y.current,height:y.current.clientHeight},series:[],line:{width:1}})),_(S?Eh(p,{util:null==(e=null==h?void 0:h.standardOptions)?void 0:e.util,decimals:null==(t=null==h?void 0:h.standardOptions)?void 0:t.decimals},sh):[]),()=>{x.current&&"function"==typeof x.current.destroy&&x.current.destroy()}}),[S]),f.exports.useEffect((()=>{m(i)}),[JSON.stringify(i)]),f.exports.useEffect((()=>{var e,t,n,r,i,a,o,c;x.current&&x.current.update({type:"lines"===u.drawStyle?"line":"bar",series:p,area:{opacity:u.fillOpacity},stack:{enabled:"noraml"===u.stack},curve:{enabled:!0,mode:u.lineInterpolation},tooltip:l(s({},x.current.options.tooltip),{shared:"all"===(null==(e=h.tooltip)?void 0:e.mode),sharedSortDirection:"none"!==(null==(t=h.tooltip)?void 0:t.sort)?null==(n=h.tooltip)?void 0:n.sort:void 0,pointValueformatter:e=>{var t,n;return gh({util:null==(t=null==h?void 0:h.standardOptions)?void 0:t.util,decimals:null==(n=null==h?void 0:h.standardOptions)?void 0:n.decimals},e)}}),yAxis:l(s({},x.current.options.yAxis),{min:null==(r=null==h?void 0:h.standardOptions)?void 0:r.min,max:null==(i=null==h?void 0:h.standardOptions)?void 0:i.max,plotLines:null==(a=null==h?void 0:h.thresholds)?void 0:a.steps,tickValueFormatter:e=>{var t,n;return gh({util:null==(t=null==h?void 0:h.standardOptions)?void 0:t.util,decimals:null==(n=null==h?void 0:h.standardOptions)?void 0:n.decimals},e)}})}),_(S?Eh(p,{util:null==(o=null==h?void 0:h.standardOptions)?void 0:o.util,decimals:null==(c=null==h?void 0:h.standardOptions)?void 0:c.decimals},sh):[])}),[JSON.stringify(p),JSON.stringify(u),JSON.stringify(h)]),f.exports.useEffect((()=>{x.current&&x.current.handleResize()}),[w]),d.createElement("div",{className:"renderer-timeseries-container",style:{display:"right"===w?"flex":"block"}},d.createElement("div",{ref:y,style:{height:A,width:"right"===w?"60%":"100%"}}),S&&d.createElement("div",{className:"renderer-timeseries-legend-table",style:{[a?"height":"maxHeight"]:O,overflow:"hidden"},ref:E},"table"===C&&d.createElement(Ft,{rowKey:"id",size:"small",scroll:{x:650,y:(null==b?void 0:b.height)||54},columns:[{title:`Series (${i.length})`,dataIndex:"name",width:150,ellipsis:{showTitle:!1},render:(e,t)=>d.createElement(Tt,{placement:"topLeft",title:d.createElement("div",null,d.createElement("div",null,T.get(t,"metric.__name__")),d.createElement("div",null,t.offset&&"current"!==t.offset?`offfset ${t.offset}`:""),T.map(T.omit(t.metric,"__name__"),((e,t)=>d.createElement("div",{key:t},t,"=",e)))),getTooltipContainer:()=>document.body},d.createElement("span",{className:"renderer-timeseries-legend-color-symbol",style:{backgroundColor:t.color}}),t.offset&&"current"!==t.offset?d.createElement("span",{style:{paddingRight:5}},"offfset ",t.offset):"",d.createElement("span",null,JSON.stringify(t.metric)))},{title:"Max",dataIndex:"max"},{title:"Min",dataIndex:"min"},{title:"Avg",dataIndex:"avg"},{title:"Sum",dataIndex:"sum"},{title:"Last",dataIndex:"last"}],dataSource:k,locale:{emptyText:"暂无数据"},pagination:!1}),"list"===C&&d.createElement("div",{className:"renderer-timeseries-legend-list"},T.map(k,(e=>d.createElement("div",{key:e.id,onClick:()=>{v(g!==e.id?e.id:""),m(T.map(p,(t=>l(s({},t),{visible:g===e.id||e.id===t.id}))))},className:e.disabled?"disabled":""},d.createElement("span",{className:"renderer-timeseries-legend-color-symbol",style:{backgroundColor:e.color}}),e.name))))))}function Ch(e){const t=f.exports.useRef(null),n=pe(t),{item:r,idx:i,colSpan:a,textMode:o,colorMode:s,textSize:l}=e,c=(null==l?void 0:l.title)?null==l?void 0:l.title:(null==n?void 0:n.width)/T.toString(r.name).length||12;let u=(null==l?void 0:l.value)?null==l?void 0:l.value:(null==n?void 0:n.width)/T.toString(r.text).length||12;const h=r.color?r.color:sh[i%sh.length];return u>(null==n?void 0:n.height)-20&&(u=(null==n?void 0:n.height)-20),d.createElement("div",{key:r.name,className:"renderer-stat-item",ref:t,style:{width:100/a+"%",flexBasis:100/a+"%",backgroundColor:"background"===s?h:"transparent"}},d.createElement("div",{className:"renderer-stat-item-content"},"valueAndName"===o&&d.createElement("div",{className:"renderer-stat-header",style:{fontSize:c>100?100:c}},r.name),d.createElement("div",{className:"renderer-stat-value",style:{color:"value"===s?h:"#fff",fontSize:u>100?100:u}},r.text)))}function Th(e){var t,n;const{values:r,series:i}=e,{custom:a,options:o}=r,{calc:s,textMode:l,colorMode:c,colSpan:u,textSize:h}=a,p=xh(i,s,{util:null==(t=null==o?void 0:o.standardOptions)?void 0:t.util,decimals:null==(n=null==o?void 0:o.standardOptions)?void 0:n.decimals},null==o?void 0:o.valueMappings);return d.createElement("div",{className:"renderer-stat-container"},d.createElement("div",{className:"renderer-stat-container-box"},T.map(p,((e,t)=>d.createElement(Ch,{key:e.name,item:e,idx:t,colSpan:u,textMode:l,colorMode:c,textSize:h})))))}const wh=(e,t)=>{let n={};return T.forEach(e,(e=>{var r;(null==(r=null==e?void 0:e.matcher)?void 0:r.value)===t&&(n=null==e?void 0:e.properties)})),n};function Sh(e,t){return"string"==typeof e&&"string"==typeof t?e.localeCompare(t):"number"==typeof e&&"number"==typeof t?e-t:0}const kh=f.exports.createContext({}),_h=(e,t)=>{switch(t.type){case"updateMetric":return l(s({},e),{metric:t.payload});default:return e}},Ah={metric:{}};function Oh(e){const[t,n]=f.exports.useReducer(_h,Ah);return d.createElement(kh.Provider,{value:{state:t,dispatch:n}},e.children)}const Ih=e=>{const t=T.reduce(e,((e,t)=>T.union(e,T.keys(t.metric))),[]);return T.uniq(t)},Mh=(e,t)=>t.sortColumn===e&&t.sortOrder;function Nh(e){const t=f.exports.useRef(null),n=pe(t),{dispatch:r}=f.exports.useContext(kh),{values:i,series:a}=e,{custom:o,options:s,overrides:l}=i,{showHeader:c,calc:u,aggrDimension:h,displayMode:p,columns:m,sortColumn:g,sortOrder:v,colorMode:y="value"}=o,[x,E]=d.useState([]),[b,C]=d.useState({sortColumn:g,sortOrder:v});f.exports.useEffect((()=>{C({sortColumn:g,sortOrder:v})}),[g,v]),f.exports.useEffect((()=>{var e,t;const n=xh(a,u,{util:null==(e=null==s?void 0:s.standardOptions)?void 0:e.util,decimals:null==(t=null==s?void 0:s.standardOptions)?void 0:t.decimals},null==s?void 0:s.valueMappings);r&&r({type:"updateMetric",payload:Ih(n)}),E(n)}),[JSON.stringify(a),u,JSON.stringify(s)]);let w=x,S=[{title:"name",dataIndex:"name",key:"name",sorter:(e,t)=>Sh(e.name,t.name),sortOrder:Mh("name",b),render:e=>d.createElement("div",{className:"renderer-table-td-content"},e)},{title:"value",dataIndex:"text",key:"text",sorter:(e,t)=>e.stat-t.stat,sortOrder:Mh("value",b),className:"renderer-table-td-content-value-container",render:(e,t)=>{let n={text:e,color:t.color||"#000"};const r=wh(l,t.fields.refId);return T.isEmpty(r)||(n=yh(null==t?void 0:t.stat,null==r?void 0:r.standardOptions,null==r?void 0:r.valueMappings)),d.createElement("div",{className:"renderer-table-td-content",style:{color:"background"===y?"#fff":null==n?void 0:n.color,backgroundColor:"background"===y?n.color:"unset"}},n.text)}}];if("labelsOfSeriesToRows"===p){const e=T.isEmpty(m)?T.concat(Ih(x),"value"):m;S=T.map(e,(e=>({title:e,dataIndex:e,key:e,sorter:(t,n)=>"value"===e?t.stat-n.stat:Sh(t.name,n.name),sortOrder:Mh(e,b),className:"value"===e?"renderer-table-td-content-value-container":"",render:(t,n)=>{if("value"===e){const e={text:null==n?void 0:n.text,color:(null==n?void 0:n.color)||"#000"};return d.createElement("div",{className:"renderer-table-td-content",style:{color:"background"===y?"#fff":null==e?void 0:e.color,backgroundColor:"background"===y?e.color:"unset"}},null==e?void 0:e.text)}return T.get(n.metric,e)}})))}if("labelValuesToRows"===p&&h){w=((e,t,n)=>{const r=T.groupBy(e,(e=>e.fields[t]));return T.map(r,((e,r)=>{const i={[t]:r},a=T.groupBy(e,(e=>e.fields[n]));return T.forEach(a,((e,t)=>{i[t]={name:e[0].name,id:e[0].id,stat:e[0].stat,color:e[0].color,text:e[0].text}})),i.groupNames=T.keys(a),i}))})(x,h,"refId");const e=T.reduce(w,((e,t)=>T.union(T.concat(e,t.groupNames))),[]);S=[{title:h,dataIndex:h,key:h,sorter:(e,t)=>Sh(e[h],t[h]),sortOrder:Mh(h,b),render:e=>d.createElement("div",{className:"renderer-table-td-content"},e)}],T.map(e,(e=>{var t;const n=T.find(w,(t=>t[e]));S.push({title:null==(t=n[e])?void 0:t.name,dataIndex:e,key:e,sorter:(t,n)=>T.get(t[e],"stat")-T.get(n[e],"stat"),sortOrder:Mh("value",b),className:"renderer-table-td-content-value-container",render:t=>{let n={text:null==t?void 0:t.text,color:(null==t?void 0:t.color)||"#000"};const r=wh(l,e);return T.isEmpty(r)||(n=yh(null==t?void 0:t.stat,null==r?void 0:r.standardOptions,null==r?void 0:r.valueMappings)),d.createElement("div",{className:"renderer-table-td-content",style:{color:"background"===y?"#fff":null==n?void 0:n.color,backgroundColor:"background"===y?n.color:"unset"}},null==n?void 0:n.text)}})}))}const k=c?40:0,_=T.get(n,"height")-k,A=isNaN(_)?0:_;return d.createElement("div",{className:"renderer-table-container",ref:t},d.createElement("div",{className:"renderer-table-container-box"},d.createElement(Ft,{rowKey:"id",getPopupContainer:()=>document.body,showSorterTooltip:!1,showHeader:c,dataSource:w,columns:S,scroll:{y:A},bordered:!1,pagination:!1,onChange:(e,t,n)=>{C({sortColumn:n.columnKey,sortOrder:n.order})}})))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fh=function(e,t){return(Fh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Lh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Fh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ph=function(){return(Ph=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Rh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Dh(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function Bh(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var zh=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)},Hh=function(e,t){return!!zh(e)&&e.indexOf(t)>-1},jh=function(e,t){if(!zh(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},Gh={}.toString,$h=function(e,t){return Gh.call(e)==="[object "+t+"]"},Yh=function(e){return $h(e,"Function")},Uh=function(e){return null==e},Vh=function(e){return Array.isArray?Array.isArray(e):$h(e,"Array")},Wh=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};function Xh(e,t){if(e)if(Vh(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(Wh(e))for(var i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i))break}var qh=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return Xh(e,(function(n,r){Yh(e)&&"prototype"===r||t.push(r)})),t};function Kh(e,t){var n=qh(t),r=n.length;if(Uh(e))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(t[a]!==e[a]||!(a in e))return!1}return!0}var Qh=function(e){return"object"==typeof e&&null!==e},Zh=function(e){if(!Qh(e)||!$h(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function Jh(e,t){if(!Vh(e))return null;var n;if(Yh(t)&&(n=t),Zh(t)&&(n=function(e){return Kh(e,t)}),n)for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r];return null}function ep(e,t,n){void 0===n&&(n=0);for(var r=n;r<e.length;r++)if(t(e[r],r))return r;return-1}var tp=function(e){if(!Vh(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t},np=function(e){if(Vh(e))return e.reduce((function(e,t){return Math.max(e,t)}),e[0])},rp=function(e){if(Vh(e))return e.reduce((function(e,t){return Math.min(e,t)}),e[0])},ip=function(e){var t=e.filter((function(e){return!isNaN(e)}));if(!t.length)return{min:0,max:0};if(Vh(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=np(t);return{min:rp(t),max:i}},ap=Array.prototype.splice,op=function(e,t,n){if(!Vh(e)&&!Zh(e))return e;var r=n;return Xh(e,(function(e,n){r=t(r,e,n)})),r},sp=function(e,t){var n=[];if(!zh(e))return n;for(var r=-1,i=[],a=e.length;++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return function(e,t){if(!zh(e))return[];for(var n=e?t.length:0,r=n-1;n--;){var i=void 0,a=t[n];n!==r&&a===i||(i=a,ap.call(e,a,1))}}(e,i),n},lp=function(e){return $h(e,"String")};function cp(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];t.has(a)||(n.push(a),t.set(a,!0))}return n}var up=function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i][t];if(!Uh(a)){Vh(a)||(a=[a]);for(var o=0;o<a.length;o++){var s=a[o];r[s]||(n.push(s),r[s]=!0)}}}return n};function hp(e){if(zh(e))return e[0]}function pp(e){if(zh(e)){return e[e.length-1]}}var dp=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},fp=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1},mp=Object.prototype.hasOwnProperty;function gp(e,t){if(!t||!Vh(e))return{};for(var n,r={},i=Yh(t)?t:function(e){return e[t]},a=0;a<e.length;a++){var o=e[a];n=i(o),mp.call(r,n)?r[n].push(o):r[n]=[o]}return r}function vp(e,t){if(!t)return{0:e};if(!Yh(t)){var n=Vh(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",r=0,i=n.length;r<i;r++)t+=e[n[r]]&&e[n[r]].toString();return t}}return gp(e,t)}var yp=function(e,t,n){return e<t?t:e>n?n:e},xp=function(e,t){var n=t.toString(),r=n.indexOf(".");if(-1===r)return Math.round(e);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))},Ep=function(e){return $h(e,"Number")};function bp(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n}var Cp=function(e,t){if(Vh(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var a=e[i],o=Yh(t)?t(a):a[t];o>r&&(n=a,r=o)}return n}},Tp=function(e,t){return(e%t+t)%t},wp=Math.PI/180,Sp=function(e){return wp*e},kp=function(e,t){return e.hasOwnProperty(t)},_p=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return Xh(e,(function(n,r){Yh(e)&&"prototype"===r||t.push(n)})),t},Ap=function(e){return Uh(e)?"":e.toString()},Op=function(e){return Ap(e).toLowerCase()};function Ip(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]})):e}var Mp=function(e){var t=Ap(e);return t.charAt(0).toUpperCase()+t.substring(1)},Np={}.toString,Fp=function(e){return $h(e,"Boolean")},Lp=function(e){return $h(e,"Date")},Pp=Object.prototype,Rp=function(e){return void 0===e},Dp=function(e){return e instanceof Element||e instanceof HTMLDocument};function Bp(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}function zp(e,t,n,r){return t&&Bp(e,t),n&&Bp(e,n),r&&Bp(e,r),e}var Hp=function(e){if("object"!=typeof e||null===e)return e;var t;if(Vh(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"==typeof e[n]&&null!=e[n]?t[n]=Hp(e[n]):t[n]=e[n]}else for(var i in t={},e)"object"==typeof e[i]&&null!=e[i]?t[i]=Hp(e[i]):t[i]=e[i];return t};function jp(e,t,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a)}}var Gp=function(e,t){if(!Yh(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var s=e.apply(this,r);return o.set(a,s),s};return n.cache=new Map,n};function $p(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(t.hasOwnProperty(i)){var a=t[i];null!==a&&Zh(a)?(Zh(e[i])||(e[i]={}),n<r?$p(e[i],a,n+1,r):e[i]=t[i]):Vh(a)?(e[i]=[],e[i]=e[i].concat(a)):void 0!==a&&(e[i]=a)}}var Yp=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)$p(e,t[r]);return e},Up=function(e,t){if(!zh(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},Vp=Object.prototype.hasOwnProperty;function Wp(e){if(Uh(e))return!0;if(zh(e))return!e.length;var t=function(e){return Np.call(e).replace(/^\[object /,"").replace(/]$/,"")}(e);if("Map"===t||"Set"===t)return!e.size;if(function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pp)}(e))return!Object.keys(e).length;for(var n in e)if(Vp.call(e,n))return!1;return!0}var Xp,qp=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(lp(e)||lp(t))return!1;if(zh(e)||zh(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=qp(e[r],t[r]));r++);return n}if(Qh(e)||Qh(t)){var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(n=!0,r=0;r<i.length&&(n=qp(e[i[r]],t[i[r]]));r++);return n}return!1},Kp=function(e,t){if(!zh(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(t(i,r))}return n},Qp=function(e){return e},Zp=function(e,t,n){for(var r=0,i=lp(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return void 0===e||r<i.length?n:e},Jp=function(e,t,n){var r=e,i=lp(t)?t.split("."):t;return i.forEach((function(e,t){t<i.length-1?(Wh(r[e])||(r[e]=Ep(i[t+1])?[]:{}),r=r[e]):r[e]=n})),e},ed=Object.prototype.hasOwnProperty,td=function(e,t){if(null===e||!Zh(e))return{};var n={};return Xh(t,(function(t){ed.call(e,t)&&(n[t]=e[t])})),n},nd=function(e,t){return op(e,(function(e,n,r){return t.includes(r)||(e[r]=n),e}),{})},rd=function(e,t,n){var r,i,a,o,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,o=e.apply(i,a),r||(i=a=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return i=this,a=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,o=e.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(l,u)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c},id={},ad=function(e){return id[e=e||"g"]?id[e]+=1:id[e]=1,e+id[e]},od=function(){};function sd(e){return Uh(e)?0:zh(e)?e.length:Object.keys(e).length}var ld,cd,ud,hd,pd,dd,fd=Gp((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return Xp||(Xp=document.createElement("canvas").getContext("2d")),Xp.font=[a,o,i,n+"px",r].join(" "),Xp.measureText(lp(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Dh([e],_p(t)).join("")})),md=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();(cd=ld||(ld={})).FORE="fore",cd.MID="mid",cd.BG="bg",(hd=ud||(ud={})).TOP="top",hd.TOP_LEFT="top-left",hd.TOP_RIGHT="top-right",hd.RIGHT="right",hd.RIGHT_TOP="right-top",hd.RIGHT_BOTTOM="right-bottom",hd.LEFT="left",hd.LEFT_TOP="left-top",hd.LEFT_BOTTOM="left-bottom",hd.BOTTOM="bottom",hd.BOTTOM_LEFT="bottom-left",hd.BOTTOM_RIGHT="bottom-right",hd.RADIUS="radius",hd.CIRCLE="circle",hd.NONE="none",(dd=pd||(pd={})).AXIS="axis",dd.GRID="grid",dd.LEGEND="legend",dd.TOOLTIP="tooltip",dd.ANNOTATION="annotation",dd.SLIDER="slider",dd.SCROLLBAR="scrollbar",dd.OTHER="other";var gd,vd,yd,xd,Ed,bd,Cd,Td,wd=3,Sd=2,kd=1;(vd=gd||(gd={})).BEFORE_RENDER="beforerender",vd.AFTER_RENDER="afterrender",vd.BEFORE_PAINT="beforepaint",vd.AFTER_PAINT="afterpaint",vd.BEFORE_CHANGE_DATA="beforechangedata",vd.AFTER_CHANGE_DATA="afterchangedata",vd.BEFORE_CLEAR="beforeclear",vd.AFTER_CLEAR="afterclear",vd.BEFORE_DESTROY="beforedestroy",vd.BEFORE_CHANGE_SIZE="beforechangesize",vd.AFTER_CHANGE_SIZE="afterchangesize",(xd=yd||(yd={})).BEFORE_DRAW_ANIMATE="beforeanimate",xd.AFTER_DRAW_ANIMATE="afteranimate",(bd=Ed||(Ed={})).MOUSE_ENTER="plot:mouseenter",bd.MOUSE_DOWN="plot:mousedown",bd.MOUSE_MOVE="plot:mousemove",bd.MOUSE_UP="plot:mouseup",bd.MOUSE_LEAVE="plot:mouseleave",bd.TOUCH_START="plot:touchstart",bd.TOUCH_MOVE="plot:touchmove",bd.TOUCH_END="plot:touchend",bd.TOUCH_CANCEL="plot:touchcancel",bd.CLICK="plot:click",bd.DBLCLICK="plot:dblclick",bd.CONTEXTMENU="plot:contextmenu",bd.LEAVE="plot:leave",bd.ENTER="plot:enter",(Td=Cd||(Cd={})).ACTIVE="active",Td.INACTIVE="inactive",Td.SELECTED="selected",Td.DEFAULT="default";var _d,Ad,Od,Id,Md=["color","shape","size"],Nd={};function Fd(e,t){Nd[e]=t}function Ld(e,t,n){if(e){if("function"==typeof e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if("function"==typeof e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}}}function Pd(e){_d||(_d=document.createElement("table"),Ad=document.createElement("tr"),Od=/^\s*<(\w+|!)[^>]*>/,Id={tr:document.createElement("tbody"),tbody:_d,thead:_d,tfoot:_d,td:Ad,th:Ad,"*":document.createElement("div")});var t=Od.test(e)&&RegExp.$1;t&&t in Id||(t="*");var n=Id[t];e=e.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+e;var r=n.childNodes[0];return n.removeChild(r),r}function Rd(e,t,n){var r;try{r=window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.style[t]}catch(rh){}finally{r=void 0===r?n:r}return r}function Dd(e,t){var n=function(e,t){var n=Rd(e,"height",t);return"auto"===n&&(n=e.offsetHeight),parseFloat(n)}(e,t),r=parseFloat(Rd(e,"borderTopWidth"))||0,i=parseFloat(Rd(e,"paddingTop"))||0,a=parseFloat(Rd(e,"paddingBottom"))||0;return n+r+(parseFloat(Rd(e,"borderBottomWidth"))||0)+i+a+(parseFloat(Rd(e,"marginTop"))||0)+(parseFloat(Rd(e,"marginBottom"))||0)}function Bd(e,t){var n=function(e,t){var n=Rd(e,"width",t);return"auto"===n&&(n=e.offsetWidth),parseFloat(n)}(e,t),r=parseFloat(Rd(e,"borderLeftWidth"))||0,i=parseFloat(Rd(e,"paddingLeft"))||0,a=parseFloat(Rd(e,"paddingRight"))||0,o=parseFloat(Rd(e,"borderRightWidth"))||0,s=parseFloat(Rd(e,"marginRight"))||0;return n+r+o+i+a+(parseFloat(Rd(e,"marginLeft"))||0)+s}function zd(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e}function Hd(e){return"number"==typeof e&&!isNaN(e)}function jd(e,t,n,r){var i=n,a=r;if(t){var o=function(e){var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}(e);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(Hd(i)?i:1,1),height:Math.max(Hd(a)?a:1,1)}}var Gd=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0),this},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],a=this._events["*"]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],s=o.callback;o.once&&(r.splice(a,1),0===r.length&&delete t._events[e],i--,a--),s.apply(t,n)}};o(i),o(a)},e.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}(),$d=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=t.visible,i=void 0===r||r;return n.visible=i,n}return Lh(t,e),t.prototype.show=function(){this.visible||this.changeVisible(!0)},t.prototype.hide=function(){this.visible&&this.changeVisible(!1)},t.prototype.destroy=function(){this.off(),this.destroyed=!0},t.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},t}(Gd),Yd="\t\n\v\f\r   ᠎             　\u2028\u2029",Ud=new RegExp("([a-z])["+Yd+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Yd+"]*,?["+Yd+"]*)+)","ig"),Vd=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Yd+"]*,?["+Yd+"]*","ig"),Wd=function(e){if(!e)return null;if(Vh(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(Ud,(function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(Vd,(function(e,t){t&&o.push(+t)})),"m"===s&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===o.length&&n.push([i,o[0]]),"r"===s)n.push([i].concat(o));else for(;o.length>=t[s]&&(n.push([i].concat(o.splice(0,t[s]))),t[s]););return e})),n},Xd=function(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var a=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4===r?a[3]={x:+e[0],y:+e[1]}:i-2===r&&(a[2]={x:+e[0],y:+e[1]},a[3]={x:+e[2],y:+e[3]}):a[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},qd=function(e,t,n,r,i){var a=[];if(null===i&&null===r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!==i){var o=Math.PI/180,s=e+n*Math.cos(-r*o),l=e+n*Math.cos(-i*o);a=[["M",s,t+n*Math.sin(-r*o)],["A",n,n,0,+(i-r>180),0,l,t+n*Math.sin(-i*o)]]}else a=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return a},Kd=function(e){if(!(e=Wd(e))||!e.length)return[["M",0,0]];var t,n,r=[],i=0,a=0,o=0,s=0,l=0;"M"===e[0][0]&&(o=i=+e[0][1],s=a=+e[0][2],l++,r[0]=["M",i,a]);for(var c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),u=void 0,h=void 0,p=l,d=e.length;p<d;p++){if(r.push(u=[]),(t=(h=e[p])[0])!==t.toUpperCase())switch(u[0]=t.toUpperCase(),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+h[6]+i,u[7]=+h[7]+a;break;case"V":u[1]=+h[1]+a;break;case"H":u[1]=+h[1]+i;break;case"R":for(var f=2,m=(n=[i,a].concat(h.slice(1))).length;f<m;f++)n[f]=+n[f]+i,n[++f]=+n[f]+a;r.pop(),r=r.concat(Xd(n,c));break;case"O":r.pop(),(n=qd(i,a,h[1],h[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(qd(i,a,h[1],h[2],h[3])),u=["U"].concat(r[r.length-1].slice(-2));break;case"M":o=+h[1]+i,s=+h[2]+a;break;default:for(f=1,m=h.length;f<m;f++)u[f]=+h[f]+(f%2?i:a)}else if("R"===t)n=[i,a].concat(h.slice(1)),r.pop(),r=r.concat(Xd(n,c)),u=["R"].concat(h.slice(-2));else if("O"===t)r.pop(),(n=qd(i,a,h[1],h[2])).push(n[0]),r=r.concat(n);else if("U"===t)r.pop(),r=r.concat(qd(i,a,h[1],h[2],h[3])),u=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,v=h.length;g<v;g++)u[g]=h[g];if("O"!==(t=t.toUpperCase()))switch(u[0]){case"Z":i=+o,a=+s;break;case"H":i=u[1];break;case"V":a=u[1];break;case"M":o=u[u.length-2],s=u[u.length-1];break;default:i=u[u.length-2],a=u[u.length-1]}}return r},Qd=function(e,t,n,r){return[e,t,n,r,n,r]},Zd=function(e,t,n,r,i,a){var o=1/3,s=2/3;return[o*e+s*n,o*t+s*r,o*i+s*n,o*a+s*r,i,a]},Jd=function(e,t,n,r,i,a,o,s,l,c){n===r&&(n+=1);var u,h,p,d,f,m=120*Math.PI/180,g=Math.PI/180*(+i||0),v=[],y=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(c)h=c[0],p=c[1],d=c[2],f=c[3];else{e=(u=y(e,t,-g)).x,t=u.y,s=(u=y(s,l,-g)).x,l=u.y,e===s&&t===l&&(s+=1,l+=1);var x=(e-s)/2,E=(t-l)/2,b=x*x/(n*n)+E*E/(r*r);b>1&&(n*=b=Math.sqrt(b),r*=b);var C=n*n,T=r*r,w=(a===o?-1:1)*Math.sqrt(Math.abs((C*T-C*E*E-T*x*x)/(C*E*E+T*x*x)));d=w*n*E/r+(e+s)/2,f=w*-r*x/n+(t+l)/2,h=Math.asin(((t-f)/r).toFixed(9)),p=Math.asin(((l-f)/r).toFixed(9)),h=e<d?Math.PI-h:h,p=s<d?Math.PI-p:p,h<0&&(h=2*Math.PI+h),p<0&&(p=2*Math.PI+p),o&&h>p&&(h-=2*Math.PI),!o&&p>h&&(p-=2*Math.PI)}var S=p-h;if(Math.abs(S)>m){var k=p,_=s,A=l;p=h+m*(o&&p>h?1:-1),s=d+n*Math.cos(p),l=f+r*Math.sin(p),v=Jd(s,l,n,r,i,0,o,_,A,[p,k,d,f])}S=p-h;var O=Math.cos(h),I=Math.sin(h),M=Math.cos(p),N=Math.sin(p),F=Math.tan(S/4),L=4/3*n*F,P=4/3*r*F,R=[e,t],D=[e+L*I,t-P*O],B=[s+L*N,l-P*M],z=[s,l];if(D[0]=2*R[0]-D[0],D[1]=2*R[1]-D[1],c)return[D,B,z].concat(v);for(var H=[],j=0,G=(v=[D,B,z].concat(v).join().split(",")).length;j<G;j++)H[j]=j%2?y(v[j-1],v[j],g).y:y(v[j],v[j+1],g).x;return H},ef=function(e,t){var n,r=Kd(e),i=t&&Kd(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],c="",u="",h=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(Jd.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(Zd(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(Zd(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(Qd(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(Qd(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(Qd(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(Qd(t.x,t.y,t.X,t.Y))}return e},p=function(e,t){if(e[t].length>7){e[t].shift();for(var a=e[t];a.length;)s[t]="A",i&&(l[t]="A"),e.splice(t++,0,["C"].concat(a.splice(0,6)));e.splice(t,1),n=Math.max(r.length,i&&i.length||0)}},d=function(e,t,a,o,s){e&&t&&"M"===e[s][0]&&"M"!==t[s][0]&&(t.splice(s,0,["M",o.x,o.y]),a.bx=0,a.by=0,a.x=e[s][1],a.y=e[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var f=0;f<n;f++){r[f]&&(c=r[f][0]),"C"!==c&&(s[f]=c,f&&(u=s[f-1])),r[f]=h(r[f],a,u),"A"!==s[f]&&"C"===c&&(s[f]="C"),p(r,f),i&&(i[f]&&(c=i[f][0]),"C"!==c&&(l[f]=c,f&&(u=l[f-1])),i[f]=h(i[f],o,u),"A"!==l[f]&&"C"===c&&(l[f]="C"),p(i,f)),d(r,i,a,o,f),d(i,r,o,a,f);var m=r[f],g=i&&i[f],v=m.length,y=i&&g.length;a.x=m[v-2],a.y=m[v-1],a.bx=parseFloat(m[v-4])||a.x,a.by=parseFloat(m[v-3])||a.y,o.bx=i&&(parseFloat(g[y-4])||o.x),o.by=i&&(parseFloat(g[y-3])||o.y),o.x=i&&g[y-2],o.y=i&&g[y-1]}return i?[r,i]:r},tf=/,?([a-z]),?/gi,nf=function(e){return e.join(",").replace(tf,"$1")},rf=function(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n},af=function(e,t,n,r,i,a,o,s,l){null===l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,d=0;d<12;d++){var f=c*u[d]+c,m=rf(f,e,n,i,o),g=rf(f,t,r,a,s),v=m*m+g*g;p+=h[d]*Math.sqrt(v)}return c*p},of=function(e,t,n,r,i,a,o,s){for(var l,c,u,h,p=[],d=[[],[]],f=0;f<2;++f)if(0===f?(c=6*e-12*n+6*i,l=-3*e+9*n-9*i+3*o,u=3*n-3*e):(c=6*t-12*r+6*a,l=-3*t+9*r-9*a+3*s,u=3*r-3*t),Math.abs(l)<1e-12){if(Math.abs(c)<1e-12)continue;(h=-u/c)>0&&h<1&&p.push(h)}else{var m=c*c-4*u*l,g=Math.sqrt(m);if(!(m<0)){var v=(-c+g)/(2*l);v>0&&v<1&&p.push(v);var y=(-c-g)/(2*l);y>0&&y<1&&p.push(y)}}for(var x,E=p.length,b=E;E--;)x=1-(h=p[E]),d[0][E]=x*x*x*e+3*x*x*h*n+3*x*h*h*i+h*h*h*o,d[1][E]=x*x*x*t+3*x*x*h*r+3*x*h*h*a+h*h*h*s;return d[0][b]=e,d[1][b]=t,d[0][b+1]=o,d[1][b+1]=s,d[0].length=d[1].length=b+2,{min:{x:Math.min.apply(0,d[0]),y:Math.min.apply(0,d[1])},max:{x:Math.max.apply(0,d[0]),y:Math.max.apply(0,d[1])}}},sf=function(e,t,n,r,i,a,o,s){if(!(Math.max(e,n)<Math.min(i,o)||Math.min(e,n)>Math.max(i,o)||Math.max(t,r)<Math.min(a,s)||Math.min(t,r)>Math.max(a,s))){var l=(e-n)*(a-s)-(t-r)*(i-o);if(l){var c=((e*r-t*n)*(i-o)-(e-n)*(i*s-a*o))/l,u=((e*r-t*n)*(a-s)-(t-r)*(i*s-a*o))/l,h=+c.toFixed(2),p=+u.toFixed(2);if(!(h<+Math.min(e,n).toFixed(2)||h>+Math.max(e,n).toFixed(2)||h<+Math.min(i,o).toFixed(2)||h>+Math.max(i,o).toFixed(2)||p<+Math.min(t,r).toFixed(2)||p>+Math.max(t,r).toFixed(2)||p<+Math.min(a,s).toFixed(2)||p>+Math.max(a,s).toFixed(2)))return{x:c,y:u}}}},lf=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},cf=function(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return a.parsePathArray=nf,a},uf=function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:cf(e,t,n,r),vb:[e,t,n,r].join(" ")}},hf=function(e,t,n,r,i,a,o,s){Vh(e)||(e=[e,t,n,r,i,a,o,s]);var l=of.apply(null,e);return uf(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},pf=function(e,t,n,r,i,a,o,s,l){var c=1-l,u=Math.pow(c,3),h=Math.pow(c,2),p=l*l,d=p*l,f=e+2*l*(n-e)+p*(i-2*n+e),m=t+2*l*(r-t)+p*(a-2*r+t),g=n+2*l*(i-n)+p*(o-2*i+n),v=r+2*l*(a-r)+p*(s-2*a+r);return{x:u*e+3*h*l*n+3*c*l*l*i+d*o,y:u*t+3*h*l*r+3*c*l*l*a+d*s,m:{x:f,y:m},n:{x:g,y:v},start:{x:c*e+l*n,y:c*t+l*r},end:{x:c*i+l*o,y:c*a+l*s},alpha:90-180*Math.atan2(f-g,m-v)/Math.PI}},df=function(e,t,n){if(!function(e,t){return e=uf(e),t=uf(t),lf(t,e.x,e.y)||lf(t,e.x2,e.y)||lf(t,e.x,e.y2)||lf(t,e.x2,e.y2)||lf(e,t.x,t.y)||lf(e,t.x2,t.y)||lf(e,t.x,t.y2)||lf(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(hf(e),hf(t)))return n?0:[];for(var r=~~(af.apply(0,e)/8),i=~~(af.apply(0,t)/8),a=[],o=[],s={},l=n?0:[],c=0;c<r+1;c++){var u=pf.apply(0,e.concat(c/r));a.push({x:u.x,y:u.y,t:c/r})}for(c=0;c<i+1;c++){u=pf.apply(0,t.concat(c/i));o.push({x:u.x,y:u.y,t:c/i})}for(c=0;c<r;c++)for(var h=0;h<i;h++){var p=a[c],d=a[c+1],f=o[h],m=o[h+1],g=Math.abs(d.x-p.x)<.001?"y":"x",v=Math.abs(m.x-f.x)<.001?"y":"x",y=sf(p.x,p.y,d.x,d.y,f.x,f.y,m.x,m.y);if(y){if(s[y.x.toFixed(4)]===y.y.toFixed(4))continue;s[y.x.toFixed(4)]=y.y.toFixed(4);var x=p.t+Math.abs((y[g]-p[g])/(d[g]-p[g]))*(d.t-p.t),E=f.t+Math.abs((y[v]-f[v])/(m[v]-f[v]))*(m.t-f.t);x>=0&&x<=1&&E>=0&&E<=1&&(n?l+=1:l.push({x:y.x,y:y.y,t1:x,t2:E}))}}return l};function ff(e,t){var n=[],r=[];return e.length&&function e(t,i){if(1===t.length)n.push(t[0]),r.push(t[0]);else{for(var a=[],o=0;o<t.length-1;o++)0===o&&n.push(t[0]),o===t.length-2&&r.push(t[o+1]),a[o]=[(1-i)*t[o][0]+i*t[o+1][0],(1-i)*t[o][1]+i*t[o+1][1]];e(a,i)}}(e,t),{left:n,right:r.reverse()}}var mf=function(e,t,n){if(1===n)return[[].concat(e)];var r=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])r=r.concat(function(e,t,n){var r=[[e[1],e[2]]];n=n||2;var i=[];"A"===t[0]?(r.push(t[6]),r.push(t[7])):"C"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]]),r.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]])):r.push([t[1],t[2]]);for(var a=r,o=1/n,s=0;s<n-1;s++){var l=ff(a,o/(1-o*s));i.push(l.left),a=l.right}return i.push(a),i.map((function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t.concat(e[e.length-1])}))}(e,t,n));else{var i=[].concat(e);"M"===i[0]&&(i[0]="L");for(var a=0;a<=n-1;a++)r.push(i)}return r},gf=function(e,t){if(e.length!==t.length)return!1;var n=!0;return Xh(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function vf(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var yf=function(e,t){var n=function(e,t){var n,r,i=e.length,a=t.length,o=0;if(0===i||0===a)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=a;c++)s[0][c]={min:c};for(l=1;l<=i;l++)for(n=e[l-1],c=1;c<=a;c++){r=t[c-1],o=gf(n,r)?0:1;var u=s[l-1][c].min+1,h=s[l][c-1].min+1,p=s[l-1][c-1].min+o;s[l][c]=vf(u,h,p)}return s}(e,t),r=e.length,i=t.length,a=[],o=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=o;u<=i;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);o=s,n[l][o].type&&a.push({index:l-1,type:n[l][o].type})}for(l=a.length-1;l>=0;l--)o=a[l].index,"add"===a[l].type?e.splice(o,0,[].concat(e[o])):e.splice(o,1)}var h=i-(r=e.length);if(r<i)for(l=0;l<h;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function xf(e,t,n){for(var r,i=[].concat(e),a=1/(n+1),o=Ef(t)[0],s=1;s<=n;s++)a*=s,0===(r=Math.floor(e.length*a))?i.unshift([o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]):i.splice(r,0,[o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]);return i}function Ef(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var bf=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=Ef(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=xf(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=xf(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=xf(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e},Cf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",catmullRomToBezier:Xd,fillPath:function(e,t){if(1===e.length)return e;var n=e.length-1,r=t.length-1,i=n/r,a=[];if(1===e.length&&"M"===e[0][0]){for(var o=0;o<r-n;o++)e.push(e[0]);return e}for(o=0;o<r;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce((function(t,r,i){return i===n?t.concat(e[n]):t.concat(mf(e[i],e[i+1],r))}),[]);return l.unshift(e[0]),"Z"!==t[r]&&"z"!==t[r]||l.push("Z"),l},fillPathByDiff:yf,formatPath:bf,intersection:function(e,t){return function(e,t,n){var r,i,a,o,s,l,c,u,h,p;e=ef(e),t=ef(t);for(var d=n?0:[],f=0,m=e.length;f<m;f++){var g=e[f];if("M"===g[0])r=s=g[1],i=l=g[2];else{"C"===g[0]?(h=[r,i].concat(g.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,s,l,s,l],r=s,i=l);for(var v=0,y=t.length;v<y;v++){var x=t[v];if("M"===x[0])a=c=x[1],o=u=x[2];else{"C"===x[0]?(p=[a,o].concat(x.slice(1)),a=p[6],o=p[7]):(p=[a,o,a,o,c,u,c,u],a=c,o=u);var E=df(h,p,n);if(n)d+=E;else{for(var b=0,C=E.length;b<C;b++)E[b].segment1=f,E[b].segment2=v,E[b].bez1=h,E[b].bez2=p;d=d.concat(E)}}}}}return d}(e,t)},parsePathArray:nf,parsePathString:Wd,pathToAbsolute:Kd,pathToCurve:ef,rectPath:cf}),Tf=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function wf(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var Sf="undefined"!=typeof window&&void 0!==window.document;function kf(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function _f(e){return e.cfg.visible&&e.cfg.capture}var Af=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=zp(r,t),n}return Lh(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(Gd),Of=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},If=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},Mf=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},Nf=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},Ff=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Lf=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Pf=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Rf=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Df=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Bf(e){return e?zf(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Lf:"undefined"!=typeof navigator?zf(navigator.userAgent):"undefined"!=typeof process&&process.version?new Mf(process.version.slice(1)):null}function zf(e){var t=function(e){return""!==e&&Rf.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var a=i.exec(e);return!!a&&[r,a]}),!1)}(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new Ff;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=Of(Of([],i,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-i.length),!0)):i=[];var a=i.join("."),o=function(e){for(var t=0,n=Df.length;t<n;t++){var r=Df[t],i=r[0];if(r[1].exec(e))return i}return null}(e),s=Pf.exec(e);return s&&s[1]?new Nf(n,a,o,s[1]):new If(n,a,o)}var Hf,jf="undefined"!=typeof Float32Array?Float32Array:Array;function Gf(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=n[0],d=n[1],f=n[2],m=n[3],g=n[4],v=n[5],y=n[6],x=n[7],E=n[8];return e[0]=p*r+d*o+f*c,e[1]=p*i+d*s+f*u,e[2]=p*a+d*l+f*h,e[3]=m*r+g*o+v*c,e[4]=m*i+g*s+v*u,e[5]=m*a+g*l+v*h,e[6]=y*r+x*o+E*c,e[7]=y*i+x*s+E*u,e[8]=y*a+x*l+E*h,e}function $f(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function Yf(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Uf(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Vf(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function Wf(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function Xf(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function qf(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function Kf(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function Qf(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function Zf(e,t){return e[0]*t[0]+e[1]*t[1]}function Jf(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),s=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),Hf=new jf(3),jf!=Float32Array&&(Hf[0]=0,Hf[1]=0,Hf[2]=0);var em=Uf;function tm(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1}(r,n),Gf(e,r,t)}function nm(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),Gf(e,r,t)}function rm(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),Gf(e,r,t)}function im(e,t,n){return Gf(e,n,t)}function am(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var a=t[r];switch(a[0]){case"t":tm(n,n,[a[1],a[2]]);break;case"s":rm(n,n,[a[1],a[2]]);break;case"r":nm(n,n,a[1]);break;case"m":im(n,n,a[1])}}return n}function om(e,t,n){var r=Jf(e,t),i=function(e,t){return e[0]*t[1]-t[0]*e[1]}(e,t)>=0;return n?i?2*Math.PI-r:r:i?r:2*Math.PI-r}function sm(e,t){var n=[],r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=t[0],d=t[1],f=t[2],m=t[3],g=t[4],v=t[5],y=t[6],x=t[7],E=t[8];return n[0]=p*r+d*o+f*c,n[1]=p*i+d*s+f*u,n[2]=p*a+d*l+f*h,n[3]=m*r+g*o+v*c,n[4]=m*i+g*s+v*u,n[5]=m*a+g*l+v*h,n[6]=y*r+x*o+E*c,n[7]=y*i+x*s+E*u,n[8]=y*a+x*l+E*h,n}function lm(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}function cm(e){var t=[],n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,t[0]=h*f,t[1]=(-u*r+i*c)*f,t[2]=(s*r-i*o)*f,t[3]=p*f,t[4]=(u*n-i*l)*f,t[5]=(-s*n+i*a)*f,t[6]=d*f,t[7]=(-c*n+r*l)*f,t[8]=(o*n-r*a)*f,t):null}!function(){var e=function(){var e=new jf(2);return jf!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var um=am,hm=["zIndex","capture","visible","type"],pm=["repeat"];function dm(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function fm(e,t){var n={},r=t.attr();return Xh(e,(function(e,t){-1!==pm.indexOf(t)||qp(r[t],e)||(n[t]=e)})),n}function mm(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return Xh(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&Xh(t.toAttrs,(function(t,n){a.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var gm=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return zp(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return Lh(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(Wh(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(wf(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr("matrix")},t.prototype.setMatrix=function(e){this.attr("matrix",e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?sm(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?sm(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?lm(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=cm(t);if(n)return lm(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[Mp(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};Xh(t,(function(e,r){Vh(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)Vh(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return Xh(hm,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,a,o,s,l,c=e[0],u=e[1],h=e[2],p=void 0===h?"easeLinear":h,d=e[3],f=void 0===d?od:d,m=e[4],g=void 0===m?0:m;Yh(c)?(i=c,c={}):Wh(c)&&c.onFrame&&(i=c.onFrame,a=c.repeat),Wh(u)?(u=(l=u).duration,p=l.easing||"easeLinear",g=l.delay||0,a=l.repeat||a||!1,f=l.callback||od,o=l.pauseCallback||od,s=l.resumeCallback||od):(Ep(f)&&(g=f,f=null),Yh(p)?(f=p,p="easeLinear"):p=p||"easeLinear");var v=fm(c,this),y={fromAttrs:dm(v,this),toAttrs:v,duration:u,easing:p,repeat:a,callback:f,pauseCallback:o,resumeCallback:s,delay:g,startTime:n.getTime(),id:ad(),onFrame:i,pathFormatted:!1};r.length>0?r=mm(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),Xh(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return Xh(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return Xh(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var a=function(e){var a=i[e],s=a.get("name");if(s){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&n&&kf(a,n))return"break";Vh(s)?Xh(s,(function(e){r.emitDelegateEvent(a,e,t)})):o.emitDelegateEvent(a,s,t)}},o=this,s=0;s<i.length;s++){if("break"===a(s))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=um(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=um(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=um(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),a=um(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(a),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=um(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(Af),vm={};function ym(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){ym(e,t)}))}}function xm(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){xm(e,t)}))}}var Em,bm,Cm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Xh(o,(function(e){var t=e.getBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=rp(i),t=np(i),n=rp(a),r=np(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Xh(o,(function(e){var t=e.getCanvasBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=rp(i),t=np(i),n=rp(a),r=np(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){Xh(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];Wh(n)?r=n:r.type=n;var i=vm[r.type];i||(i=Mp(r.type),vm[r.type]=i);var a=this.getShapeBase(),o=new a[i](r);return this.add(o),o},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if(Yh(r))n=new r(i||{parent:this});else{var a=r||{},o=this.getGroupBase();n=new o(a)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!_f(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var a=[e,t,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,a=e.length-1;a>=0;a--){var o=e[a];if(_f(o)&&(o.isGroup()?i=o.getShape(t,n,r):o.isHit(t,n)&&(i=o)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),wf(e.getChildren(),t)}(i,e,!1),e.set("parent",this),t&&ym(e,t),r&&xm(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();Xh(t,(function(e,t){return e._INDEX=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return Xh(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return Xh(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(gm),Tm=0,wm=0,Sm=0,km=0,_m=0,Am=0,Om="object"==typeof performance&&performance.now?performance:Date,Im="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mm(){return _m||(Im(Nm),_m=Om.now()+Am)}function Nm(){_m=0}function Fm(){this._call=this._time=this._next=null}function Lm(e,t,n){var r=new Fm;return r.restart(e,t,n),r}function Pm(){_m=(km=Om.now())+Am,Tm=wm=0;try{!function(){Mm(),++Tm;for(var e,t=Em;t;)(e=_m-t._time)>=0&&t._call.call(null,e),t=t._next;--Tm}()}finally{Tm=0,function(){var e,t,n=Em,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Em=t);bm=e,Dm(r)}(),_m=0}}function Rm(){var e=Om.now(),t=e-km;t>1e3&&(Am-=t,km=e)}function Dm(e){Tm||(wm&&(wm=clearTimeout(wm)),e-_m>24?(e<1/0&&(wm=setTimeout(Pm,e-Om.now()-Am)),Sm&&(Sm=clearInterval(Sm))):(Sm||(km=Om.now(),Sm=setInterval(Rm,1e3)),Tm=1,Im(Pm)))}function Bm(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function zm(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Fm.prototype=Lm.prototype={constructor:Fm,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Mm():+n)+(null==t?0:+t),this._next||bm===this||(bm?bm._next=this:Em=this,bm=this),this._call=e,this._time=n,Dm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dm())}};var Hm=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),jm=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),Gm=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),$m=Math.PI,Ym=$m/2;function Um(e){return(1-Math.cos($m*e))/2}function Vm(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function Wm(e){return((e*=2)<=1?Vm(1-e):2-Vm(e-1))/2}function Xm(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var qm=4/11;function Km(e){return(e=+e)<qm?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375}var Qm=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158),Zm=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158),Jm=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),eg=2*Math.PI,tg=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=eg);function i(e){return t*Vm(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*eg)},i.period=function(n){return e(t,n)},i}(1,.3),ng=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=eg);function i(e){return 1-t*Vm(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*eg)},i.period=function(n){return e(t,n)},i}(1,.3),rg=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=eg);function i(e){return((e=2*e-1)<0?t*Vm(-e)*Math.sin((r-e)/n):2-t*Vm(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*eg)},i.period=function(n){return e(t,n)},i}(1,.3),ig=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:function(e){return+e},easeQuad:Bm,easeQuadIn:function(e){return e*e},easeQuadOut:function(e){return e*(2-e)},easeQuadInOut:Bm,easeCubic:zm,easeCubicIn:function(e){return e*e*e},easeCubicOut:function(e){return--e*e*e+1},easeCubicInOut:zm,easePoly:Gm,easePolyIn:Hm,easePolyOut:jm,easePolyInOut:Gm,easeSin:Um,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*Ym)},easeSinOut:function(e){return Math.sin(e*Ym)},easeSinInOut:Um,easeExp:Wm,easeExpIn:function(e){return Vm(1-+e)},easeExpOut:function(e){return 1-Vm(e)},easeExpInOut:Wm,easeCircle:Xm,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCircleInOut:Xm,easeBounce:Km,easeBounceIn:function(e){return 1-Km(1-e)},easeBounceOut:Km,easeBounceInOut:function(e){return((e*=2)<=1?1-Km(1-e):Km(e-1)+1)/2},easeBack:Jm,easeBackIn:Qm,easeBackOut:Zm,easeBackInOut:Jm,easeElastic:ng,easeElasticIn:tg,easeElasticOut:ng,easeElasticInOut:rg});function ag(e){return function(){return e}}function og(e){return 1==(e=+e)?sg:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):ag(isNaN(t)?n:t)}}function sg(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):ag(isNaN(e)?t:e)}var lg=function e(t){var n=og(t);function r(e,t){var r=n((e=de(e)).r,(t=de(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=sg(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function cg(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function ug(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hg(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=yg(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function pg(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function dg(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function fg(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=yg(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var mg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gg=new RegExp(mg.source,"g");function vg(e,t){var n,r,i,a=mg.lastIndex=gg.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=mg.exec(e))&&(r=gg.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:dg(n,r)})),a=gg.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function yg(e,t){var n,r=typeof t;return null==t||"boolean"===r?ag(t):("number"===r?dg:"string"===r?(n=fe(t))?(t=n,lg):vg:t instanceof fe?lg:t instanceof Date?pg:ug(t)?cg:Array.isArray(t)?hg:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?fg:dg)(e,t)}var xg=[1,0,0,0,1,0,0,0,1];function Eg(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var a=t.duration,o=t.easing;if(n=n-i-t.delay,t.repeat)r=n%a/a,r=ig[o](r);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=ig[o](r)}if(t.onFrame){var s=t.onFrame(r);e.attr(s)}else!function(e,t,n){var r={},i=t.fromAttrs,a=t.toAttrs;if(!e.destroyed){var o,s,l,c;for(var u in a)if(!qp(i[u],a[u]))if("path"===u){var h=a[u],p=i[u];h.length>p.length?(h=Wd(a[u]),p=Wd(i[u]),p=yf(p,h),p=bf(p,h),t.fromAttrs.path=p,t.toAttrs.path=h):t.pathFormatted||(h=Wd(a[u]),p=Wd(i[u]),p=bf(p,h),t.fromAttrs.path=p,t.toAttrs.path=h,t.pathFormatted=!0),r[u]=[];for(var d=0;d<h.length;d++){for(var f=h[d],m=p[d],g=[],v=0;v<f.length;v++)Ep(f[v])&&m&&Ep(m[v])?(o=yg(m[v],f[v]),g.push(o(n))):g.push(f[v]);r[u].push(g)}}else if("matrix"===u){var y=(l=i[u]||xg,(ug(c=a[u]||xg)?cg:hg)(l,c))(n);r[u]=y}else["fill","stroke","fillStyle","strokeStyle"].includes(u)&&(s=a[u],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[u]=a[u]:Yh(a[u])||(o=yg(i[u],a[u]),r[u]=o(n));e.attr(r)}}(e,t,r);return!1}var bg=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=Lm((function(i){if(r.current=i,r.animators.length>0){for(var a=r.animators.length-1;a>=0;a--)if((e=r.animators[a]).destroyed)r.removeAnimator(a);else{if(!e.isAnimatePaused())for(var o=(t=e.get("animations")).length-1;o>=0;o--)n=t[o],Eg(e,n,i)&&(t.splice(o,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(a)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),Cg=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Tg(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function wg(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&kf(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var Sg=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");Xh(Cg,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");Xh(Cg,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,a){var o=new Tf(e,t);return o.fromShape=i,o.toShape=a,o.x=n.x,o.y=n.y,o.clientX=n.clientX,o.clientY=n.clientY,o.propagationPath.push(r),o},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],a=!1;if(i)i.call(this,n,r,t);else{var o=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(a=!0,o&&this._emitEvent(e,t,n,o,o,null),this._emitEvent(e,t,n,null,o,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(a||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,a);else{var o=this.mousedownPoint;if(o){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=o.clientX-e.clientX,u=o.clientY-e.clientY;l>120||c*c+u*u>40?s&&s.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,e,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,a){var o=this._getEventObj(e,t,n,r,i,a);if(r){o.shape=r,Tg(r,e,o);for(var s=r.getParent();s;)s.emitDelegation(e,o),o.propagationStopped||wg(s,e,o),o.propagationPath.push(s),s=s.getParent()}else{Tg(this.canvas,e,o)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),kg=Bf(),_g=kg&&"firefox"===kg.name,Ag=function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");lp(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new Sg({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new bg(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");Sf&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");Sf&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(_g&&!Uh(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Uh(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(Cm),Og=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t},t}(Cm),Ig=function(e){function t(t){return e.call(this,t)||this}return Lh(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,a=e.maxY;if(t){var o=lm(t,[e.minX,e.minY]),s=lm(t,[e.maxX,e.minY]),l=lm(t,[e.minX,e.maxY]),c=lm(t,[e.maxX,e.maxY]);n=Math.min(o[0],s[0],l[0],c[0]),i=Math.max(o[0],s[0],l[0],c[0]),r=Math.min(o[1],s[1],l[1],c[1]),a=Math.max(o[1],s[1],l[1],c[1])}var u=this.attrs;if(u.shadowColor){var h=u.shadowBlur,p=void 0===h?0:h,d=u.shadowOffsetX,f=void 0===d?0:d,m=u.shadowOffsetY,g=void 0===m?0:m,v=n-p+f,y=i+p+f,x=r-p+g,E=a+p+g;n=Math.min(n,v),i=Math.max(i,y),r=Math.min(r,x),a=Math.max(a,E)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],a=(i=this.invertFromMatrix(i))[0],o=i[1],s=this._isInBBox(a,o);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(a,o)){if(this.isInShape(a,o))return!0;if(n&&n.isHit(a,o))return!0;if(r&&r.isHit(a,o))return!0}return!1},t}(gm),Mg=new Map;function Ng(e,t){Mg.set(e,t)}function Fg(e){return Mg.get(e)}function Lg(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function Pg(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Rg(e){return Math.min.apply(null,e)}function Dg(e){return Math.max.apply(null,e)}function Bg(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function zg(e,t){return Math.abs(e-t)<.001}function Hg(e,t){var n=Rg(e),r=Rg(t);return{x:n,y:r,width:Dg(e)-n,height:Dg(t)-r}}function jg(e){return(e+2*Math.PI)%(2*Math.PI)}var Gg={box:function(e,t,n,r){return Hg([e,n],[t,r])},length:function(e,t,n,r){return Bg(e,t,n,r)},pointAt:function(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}},pointDistance:function(e,t,n,r,i,a){var o=(n-e)*(i-e)+(r-t)*(a-t);return o<0?Bg(e,t,i,a):o>(n-e)*(n-e)+(r-t)*(r-t)?Bg(n,r,i,a):this.pointToLine(e,t,n,r,i,a)},pointToLine:function(e,t,n,r,i,a){var o=[n-e,r-t];if(function(e,t){return e[0]===t[0]&&e[1]===t[1]}(o,[0,0]))return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t));var s=[-o[1],o[0]];Qf(s,s);var l=[i-e,a-t];return Math.abs(Zf(l,s))},tangentAngle:function(e,t,n,r){return Math.atan2(r-t,n-e)}};function $g(e,t,n,r,i,a){var o,s=1/0,l=[n,r],c=20;a&&a>200&&(c=a/10);for(var u=1/c,h=u/10,p=0;p<=c;p++){var d=p*u,f=[i.apply(null,e.concat([d])),i.apply(null,t.concat([d]))];(y=Bg(l[0],l[1],f[0],f[1]))<s&&(o=d,s=y)}if(0===o)return{x:e[0],y:t[0]};if(1===o){var m=e.length;return{x:e[m-1],y:t[m-1]}}s=1/0;for(p=0;p<32&&!(h<1e-4);p++){var g=o-h,v=o+h,y=(f=[i.apply(null,e.concat([g])),i.apply(null,t.concat([g]))],Bg(l[0],l[1],f[0],f[1]));if(g>=0&&y<s)o=g,s=y;else{var x=[i.apply(null,e.concat([v])),i.apply(null,t.concat([v]))],E=Bg(l[0],l[1],x[0],x[1]);v<=1&&E<s?(o=v,s=E):h*=.5}}return{x:i.apply(null,e.concat([o])),y:i.apply(null,t.concat([o]))}}function Yg(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function Ug(e,t,n){var r=e+n-2*t;if(zg(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function Vg(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function Wg(e,t,n,r,i,a,o){var s=Yg(e,n,i,o),l=Yg(t,r,a,o),c=Gg.pointAt(e,t,n,r,o),u=Gg.pointAt(n,r,i,a,o);return[[e,t,c.x,c.y,s,l],[s,l,u.x,u.y,i,a]]}function Xg(e,t,n,r,i,a,o){if(0===o)return(Bg(e,t,n,r)+Bg(n,r,i,a)+Bg(e,t,i,a))/2;var s=Wg(e,t,n,r,i,a,.5),l=s[0],c=s[1];return l.push(o-1),c.push(o-1),Xg.apply(null,l)+Xg.apply(null,c)}var qg={box:function(e,t,n,r,i,a){var o=Ug(e,n,i)[0],s=Ug(t,r,a)[0],l=[e,i],c=[t,a];return void 0!==o&&l.push(Yg(e,n,i,o)),void 0!==s&&c.push(Yg(t,r,a,s)),Hg(l,c)},length:function(e,t,n,r,i,a){return Xg(e,t,n,r,i,a,3)},nearestPoint:function(e,t,n,r,i,a,o,s){return $g([e,n,i],[t,r,a],o,s,Yg)},pointDistance:function(e,t,n,r,i,a,o,s){var l=this.nearestPoint(e,t,n,r,i,a,o,s);return Bg(l.x,l.y,o,s)},interpolationAt:Yg,pointAt:function(e,t,n,r,i,a,o){return{x:Yg(e,n,i,o),y:Yg(t,r,a,o)}},divide:function(e,t,n,r,i,a,o){return Wg(e,t,n,r,i,a,o)},tangentAngle:function(e,t,n,r,i,a,o){var s=Vg(e,n,i,o),l=Vg(t,r,a,o);return jg(Math.atan2(l,s))}};function Kg(e,t,n,r,i){var a=1-i;return a*a*a*e+3*t*i*a*a+3*n*i*i*a+r*i*i*i}function Qg(e,t,n,r,i){var a=1-i;return 3*(a*a*(t-e)+2*a*i*(n-t)+i*i*(r-n))}function Zg(e,t,n,r){var i,a,o,s=-3*e+9*t-9*n+3*r,l=6*e-12*t+6*n,c=3*t-3*e,u=[];if(zg(s,0))zg(l,0)||(i=-c/l)>=0&&i<=1&&u.push(i);else{var h=l*l-4*s*c;zg(h,0)?u.push(-l/(2*s)):h>0&&(a=(-l-(o=Math.sqrt(h)))/(2*s),(i=(-l+o)/(2*s))>=0&&i<=1&&u.push(i),a>=0&&a<=1&&u.push(a))}return u}function Jg(e,t,n,r,i,a,o,s,l){var c=Kg(e,n,i,o,l),u=Kg(t,r,a,s,l),h=Gg.pointAt(e,t,n,r,l),p=Gg.pointAt(n,r,i,a,l),d=Gg.pointAt(i,a,o,s,l),f=Gg.pointAt(h.x,h.y,p.x,p.y,l),m=Gg.pointAt(p.x,p.y,d.x,d.y,l);return[[e,t,h.x,h.y,f.x,f.y,c,u],[c,u,m.x,m.y,d.x,d.y,o,s]]}function ev(e,t,n,r,i,a,o,s,l){if(0===l)return function(e,t){for(var n=0,r=e.length,i=0;i<r;i++)n+=Bg(e[i],t[i],e[(i+1)%r],t[(i+1)%r]);return n/2}([e,n,i,o],[t,r,a,s]);var c=Jg(e,t,n,r,i,a,o,s,.5),u=c[0],h=c[1];return u.push(l-1),h.push(l-1),ev.apply(null,u)+ev.apply(null,h)}var tv={extrema:Zg,box:function(e,t,n,r,i,a,o,s){for(var l=[e,o],c=[t,s],u=Zg(e,n,i,o),h=Zg(t,r,a,s),p=0;p<u.length;p++)l.push(Kg(e,n,i,o,u[p]));for(p=0;p<h.length;p++)c.push(Kg(t,r,a,s,h[p]));return Hg(l,c)},length:function(e,t,n,r,i,a,o,s){return ev(e,t,n,r,i,a,o,s,3)},nearestPoint:function(e,t,n,r,i,a,o,s,l,c,u){return $g([e,n,i,o],[t,r,a,s],l,c,Kg,u)},pointDistance:function(e,t,n,r,i,a,o,s,l,c,u){var h=this.nearestPoint(e,t,n,r,i,a,o,s,l,c,u);return Bg(h.x,h.y,l,c)},interpolationAt:Kg,pointAt:function(e,t,n,r,i,a,o,s,l){return{x:Kg(e,n,i,o,l),y:Kg(t,r,a,s,l)}},divide:function(e,t,n,r,i,a,o,s,l){return Jg(e,t,n,r,i,a,o,s,l)},tangentAngle:function(e,t,n,r,i,a,o,s,l){var c=Qg(e,n,i,o,l),u=Qg(t,r,a,s,l);return jg(Math.atan2(u,c))}};function nv(e,t,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+e}function rv(e,t,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+t}var iv=function(e,t,n,r,i,a,o){for(var s=function(e,t,n){return Math.atan(-t/e*Math.tan(n))}(n,r,i),l=1/0,c=-1/0,u=[a,o],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var p=s+h;a<o?a<p&&p<o&&u.push(p):o<p&&p<a&&u.push(p)}for(h=0;h<u.length;h++){var d=nv(e,0,n,r,i,u[h]);d<l&&(l=d),d>c&&(c=d)}var f=function(e,t,n){return Math.atan(t/(e*Math.tan(n)))}(n,r,i),m=1/0,g=-1/0,v=[a,o];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var y=f+h;a<o?a<y&&y<o&&v.push(y):o<y&&y<a&&v.push(y)}for(h=0;h<v.length;h++){var x=rv(0,t,n,r,i,v[h]);x<m&&(m=x),x>g&&(g=x)}return{x:l,y:m,width:c-l,height:g-m}};var av=function(e){return function(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=Bg(r[0],r[1],i[0],i[1])}return t}(e)};function ov(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function sv(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=ov(t,n.getCanvasBBox())),r&&(t=ov(t,r.getCanvasBBox())),t}var lv=null;function cv(){if(!lv){var e=document.createElement("canvas");e.width=1,e.height=1,lv=e.getContext("2d")}return lv}function uv(e,t,n){var r=1;return lp(e)&&(r=e.split("\n").length),r>1?t*r+function(e,t){return t?t-e:.14*e}(t,n)*(r-1):t}function hv(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}var pv=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,dv=/[^\s\,]+/gi;function fv(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l,c,u,h=[],p=!!r;if(p){o=r[0],s=r[1];for(var d=0,f=e.length;d<f;d+=1)o=Vf([0,0],o,g=e[d]),s=Wf([0,0],s,g)}d=0;for(var m=e.length;d<m;d+=1){var g=e[d];if(0!==d||n)if(d!==m-1||n){i=e[[d?d-1:m-1,d-1][n?0:1]],a=e[n?(d+1)%m:d+1];var v=[0,0];v=Xf(v=em(v,a,i),v,t);var y=qf(g,i),x=qf(g,a),E=y+x;0!==E&&(y/=E,x/=E);var b=Xf([0,0],v,-y),C=Xf([0,0],v,x);c=Yf([0,0],g,b),l=Vf([0,0],l=Yf([0,0],g,C),Wf([0,0],a,g)),l=Wf([0,0],l,Vf([0,0],a,g)),c=Vf([0,0],c=Yf([0,0],g,b=Xf([0,0],b=em([0,0],l,g),-y/x)),Wf([0,0],i,g)),c=Wf([0,0],c,Vf([0,0],i,g)),l=Yf([0,0],g,C=Xf([0,0],C=em([0,0],g,c),x/y)),p&&(c=Vf([0,0],c=Wf([0,0],c,o),s),l=Vf([0,0],l=Wf([0,0],l,o),s)),h.push(u),h.push(c),u=l}else c=g,h.push(u),h.push(c);else u=g}return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a+=1)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}var mv="\t\n\v\f\r   ᠎             　\u2028\u2029",gv=new RegExp("([a-z])["+mv+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+mv+"]*,?["+mv+"]*)+)","ig"),vv=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+mv+"]*,?["+mv+"]*","ig");function yv(e){if(!e)return null;if(Vh(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(gv,(function(e,r,i){var a=[],o=r.toLowerCase();if(i.replace(vv,(function(e,t){t&&a.push(+t)})),"m"===o&&a.length>2&&(n.push([r].concat(a.splice(0,2))),o="l",r="m"===r?"l":"L"),"o"===o&&1===a.length&&n.push([r,a[0]]),"r"===o)n.push([r].concat(a));else for(;a.length>=t[o]&&(n.push([r].concat(a.splice(0,t[o]))),t[o]););return""})),n}var xv=/[a-z]/;function Ev(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function bv(e){var t=yv(e);if(!t||!t.length)return[["M",0,0]];for(var n=!1,r=0;r<t.length;r++){var i=t[r][0];if(xv.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return t;var a=[],o=0,s=0,l=0,c=0,u=0,h=t[0];"M"!==h[0]&&"m"!==h[0]||(l=o=+h[1],c=s=+h[2],u++,a[0]=["M",o,s]);r=u;for(var p=t.length;r<p;r++){var d=t[r],f=a[r-1],m=[],g=(i=d[0]).toUpperCase();if(i!==g)switch(m[0]=g,g){case"A":m[1]=d[1],m[2]=d[2],m[3]=d[3],m[4]=d[4],m[5]=d[5],m[6]=+d[6]+o,m[7]=+d[7]+s;break;case"V":m[1]=+d[1]+s;break;case"H":m[1]=+d[1]+o;break;case"M":l=+d[1]+o,c=+d[2]+s,m[1]=l,m[2]=c;break;default:for(var v=1,y=d.length;v<y;v++)m[v]=+d[v]+(v%2?o:s)}else m=t[r];switch(g){case"Z":o=+l,s=+c;break;case"H":m=["L",o=m[1],s];break;case"V":m=["L",o,s=m[1]];break;case"T":o=m[1],s=m[2];var x=Ev([f[1],f[2]],[f[3],f[4]]);m=["Q",x[0],x[1],o,s];break;case"S":o=m[m.length-2],s=m[m.length-1];var E=f.length,b=Ev([f[E-4],f[E-3]],[f[E-2],f[E-1]]);m=["C",b[0],b[1],m[1],m[2],o,s];break;case"M":l=m[m.length-2],c=m[m.length-1];break;default:o=m[m.length-2],s=m[m.length-1]}a.push(m)}return a}function Cv(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Tv(e,t){return Cv(e)*Cv(t)?(e[0]*t[0]+e[1]*t[1])/(Cv(e)*Cv(t)):1}function wv(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Tv(e,t))}function Sv(e,t){return e[0]===t[0]&&e[1]===t[1]}function kv(e,t){var n=t[1],r=t[2],i=Tp(Sp(t[3]),2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],c=t[6],u=t[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=h*h/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var f=n*n*(p*p)+r*r*(h*h),m=f?Math.sqrt((n*n*(r*r)-f)/f):1;a===o&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*p/r:0,v=n?m*-r*h/n:0,y=(s+c)/2+Math.cos(i)*g-Math.sin(i)*v,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*v,E=[(h-g)/n,(p-v)/r],b=[(-1*h-g)/n,(-1*p-v)/r],C=wv([1,0],E),T=wv(E,b);return Tv(E,b)<=-1&&(T=Math.PI),Tv(E,b)>=1&&(T=0),0===o&&T>0&&(T-=2*Math.PI),1===o&&T<0&&(T+=2*Math.PI),{cx:y,cy:x,rx:Sv(e,[c,u])?0:n,ry:Sv(e,[c,u])?0:r,startAngle:C,endAngle:C+T,xRotation:i,arcFlag:a,sweepFlag:o}}function _v(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function Av(e){for(var t=[],n=null,r=null,i=null,a=0,o=(e=function(e){var t=e||[];return Vh(t)?t:lp(t)?(Xh(t=t.match(pv),(function(e,n){if((e=e.match(dv))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}Xh(e,(function(t,n){isNaN(t)||(e[n]=+t)})),t[n]=e})),t):void 0}(e)).length,s=0;s<o;s++){var l=e[s];r=e[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var h=kv(n,l);u.arcParams=h}if("Z"===c)n=i,r=e[a+1];else{var p=l.length;n=[l[p-2],l[p-1]]}r&&"Z"===r[0]&&(r=e[a],t[a]&&(t[a].prePoint=n)),u.currentPoint=n,t[a]&&Sv(n,t[a].currentPoint)&&(t[a].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var f=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]];else if("Q"===c){var m=[l[1],l[2]];u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===c){m=_v((y=t[s-1]).currentPoint,f);"Q"===y.command?(u.command="Q",u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]):(u.command="TL",u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]])}else if("C"===c){var g=[l[1],l[2]],v=[l[3],l[4]];u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[g[0]-v[0],g[1]-v[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[v[0]-g[0],v[1]-g[1]])}else if("S"===c){var y;g=_v((y=t[s-1]).currentPoint,f),v=[l[1],l[2]];"C"===y.command?(u.command="C",u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]):(u.command="SQ",u.startTangent=[f[0]-v[0],f[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]])}else if("A"===c){var x=.001,E=u.arcParams||{},b=E.cx,C=void 0===b?0:b,T=E.cy,w=void 0===T?0:T,S=E.rx,k=void 0===S?0:S,_=E.ry,A=void 0===_?0:_,O=E.sweepFlag,I=void 0===O?0:O,M=E.startAngle,N=void 0===M?0:M,F=E.endAngle,L=void 0===F?0:F;0===I&&(x*=-1);var P=k*Math.cos(N-x)+C,R=A*Math.sin(N-x)+w;u.startTangent=[P-i[0],R-i[1]];var D=k*Math.cos(N+L+x)+C,B=A*Math.sin(N+L-x)+w;u.endTangent=[f[0]-D,f[1]-B]}t.push(u)}return t}var Ov=function(e,t,n){return e>=t&&e<=n};function Iv(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function Mv(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function Nv(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(Mv(o,s,[t,n]))return!0;Iv(o[1]-n)>0!=Iv(s[1]-n)>0&&Iv(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Fv(e){for(var t=[],n=e.length,r=0;r<n-1;r++){var i=e[r],a=e[r+1];t.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(t.length>1){var o=e[0],s=e[n-1];t.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return t}function Lv(e,t){var n=!1;return Xh(e,(function(e){if(function(e,t,n,r){var i=n.x-e.x,a=n.y-e.y,o=t.x-e.x,s=t.y-e.y,l=r.x-n.x,c=r.y-n.y,u=o*c-s*l,h=null;if(u*u>.001*(o*o+s*s)*(l*l+c*c)){var p=(i*c-a*l)/u,d=(i*s-a*o)/u;Ov(p,0,1)&&Ov(d,0,1)&&(h={x:e.x+p*o,y:e.y+p*s})}return h}(e.from,e.to,t.from,t.to))return n=!0,!1})),n}function Pv(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function Rv(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||0===Math.sin(l)||bp(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(u-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}Ng("rect",Lg),Ng("image",Lg),Ng("circle",Pg),Ng("marker",Pg),Ng("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}var o=Hg(n,r),s=o.x,l=o.y,c={minX:s,minY:l,maxX:s+o.width,maxY:l+o.height};return{x:(c=sv(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),Ng("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}return Hg(n,r)})),Ng("text",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=hv(t));var l,c=function(e,t){var n=cv(),r=0;return Uh(e)||""===e||(n.save(),n.font=t,lp(e)&&e.includes("\n")?Xh(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width,n.restore()),r}(i,s);if(c){var u=t.textAlign,h=t.textBaseline,p=uv(i,a,o),d={x:n,y:r-p};u&&("end"===u||"right"===u?d.x-=c:"center"===u&&(d.x-=c/2)),h&&("top"===h?d.y+=p:"middle"===h&&(d.y+=p/2)),l={x:d.x,y:d.y,width:c,height:p}}else l={x:n,y:r,width:0,height:0};return l})),Ng("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=(m=e[a]).currentPoint,s=m.params,l=m.prePoint,c=void 0;switch(m.command){case"Q":c=qg.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":c=tv.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var u=m.arcParams;c=iv(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(o[0]),r.push(o[1])}c&&(m.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&i.push(m)}n=n.filter((function(e){return!Number.isNaN(e)})),r=r.filter((function(e){return!Number.isNaN(e)}));var h=rp(n),p=rp(r),d=np(n),f=np(r);if(0===i.length)return{x:h,y:p,width:d-h,height:f-p};for(a=0;a<i.length;a++){var m;(o=(m=i[a]).currentPoint)[0]===h?h-=Rv(m,t).xExtra:o[0]===d&&(d+=Rv(m,t).xExtra),o[1]===p?p-=Rv(m,t).yExtra:o[1]===f&&(f+=Rv(m,t).yExtra)}return{x:h,y:p,width:d-h,height:f-p}}(e.get("segments")||Av(n),r),a=i.x,o=i.y,s={minX:a,minY:o,maxX:a+i.width,maxY:o+i.height};return{x:(s=sv(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Ng("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,a),maxY:Math.max(r,a)};return{x:(o=sv(e,o)).minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}})),Ng("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;return{x:n-i,y:r-a,width:2*i,height:2*a}}));var Dv=function(){function e(e){var t=e.xField,n=e.yField,r=e.adjustNames,i=void 0===r?["x","y"]:r;this.adjustNames=i,this.xField=t,this.yField=n}return e.prototype.isAdjust=function(e){return this.adjustNames.indexOf(e)>=0},e.prototype.getAdjustRange=function(e,t,n){var r,i,a=this.yField,o=n.indexOf(t),s=n.length;return!a&&this.isAdjust("y")?(r=0,i=1):s>1?(r=n[0===o?0:o-1],i=n[o===s-1?s-1:o+1],0!==o?r+=(t-r)/2:r-=(i-t)/2,o!==s-1?i-=(i-t)/2:i+=(t-n[s-2])/2):(r=0===t?0:t-.5,i=0===t?1:t+.5),{pre:r,next:i}},e.prototype.adjustData=function(e,t){var n=this,r=this.getDimValues(t);Xh(e,(function(e,t){Xh(r,(function(r,i){n.adjustDim(i,r,e,t)}))}))},e.prototype.groupData=function(e,t){return Xh(e,(function(e){void 0===e[t]&&(e[t]=0)})),gp(e,t)},e.prototype.adjustDim=function(e,t,n,r){},e.prototype.getDimValues=function(e){var t=this.xField,n=this.yField,r={},i=[];if(t&&this.isAdjust("x")&&i.push(t),n&&this.isAdjust("y")&&i.push(n),i.forEach((function(t){r[t]=up(e,t).sort((function(e,t){return e-t}))})),!n&&this.isAdjust("y")){r.y=[0,1]}return r},e}(),Bv={},zv=function(e){return Bv[e.toLowerCase()]},Hv=function(e,t){if(zv(e))throw new Error("Adjust type '"+e+"' existed.");Bv[e.toLowerCase()]=t},jv=function(e,t){return(jv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Gv(e,t){function n(){this.constructor=e}jv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $v=function(){return($v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Yv=function(e){function t(t){var n=e.call(this,t)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var r=t.marginRatio,i=void 0===r?.5:r,a=t.dodgeRatio,o=void 0===a?.5:a,s=t.dodgeBy,l=t.intervalPadding,c=t.dodgePadding,u=t.xDimensionLength,h=t.groupNum,p=t.defaultSize,d=t.maxColumnWidth,f=t.minColumnWidth,m=t.columnWidthRatio;return n.marginRatio=i,n.dodgeRatio=o,n.dodgeBy=s,n.intervalPadding=l,n.dodgePadding=c,n.xDimensionLegenth=u,n.groupNum=h,n.defaultSize=p,n.maxColumnWidth=d,n.minColumnWidth=f,n.columnWidthRatio=m,n}return Gv(t,e),t.prototype.process=function(e){var t=Hp(e),n=tp(t),r=this.dodgeBy,i=r?function(e,t){if(!t)return[e];var n=vp(e,t),r=[];for(var i in n)r.push(n[i]);return r}(n,r):t;return this.cacheMap={},this.adjustDataArray=i,this.mergeData=n,this.adjustData(i,n),this.adjustDataArray=[],this.mergeData=[],t},t.prototype.adjustDim=function(e,t,n,r){var i=this,a=this.getDistribution(e);return Xh(this.groupData(n,e),(function(n,o){var s;s=1===t.length?{pre:t[0]-1,next:t[0]+1}:i.getAdjustRange(e,parseFloat(o),t),Xh(n,(function(t){var n=t[e],o=a[n],l=o.indexOf(r);t[e]=i.getDodgeOffset(s,l,o.length)}))})),[]},t.prototype.getDodgeOffset=function(e,t,n){var r,i=this,a=i.dodgeRatio,o=i.marginRatio,s=i.intervalPadding,l=i.dodgePadding,c=e.pre,u=e.next,h=u-c;if(!Uh(s)&&Uh(l)&&s>=0)r=c+this.getIntervalOnlyOffset(n,t);else if(!Uh(l)&&Uh(s)&&l>=0){r=c+this.getDodgeOnlyOffset(n,t)}else if(!Uh(s)&&!Uh(l)&&s>=0&&l>=0){r=c+this.getIntervalAndDodgeOffset(n,t)}else{var p=h*a/n,d=o*p;r=(c+u)/2+(.5*(h-n*p-(n-1)*d)+((t+1)*p+t*d)-.5*p-.5*h)}return r},t.prototype.getIntervalOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.intervalPadding,a=n.xDimensionLegenth,o=n.groupNum,s=n.dodgeRatio,l=n.maxColumnWidth,c=n.minColumnWidth,u=n.columnWidthRatio,h=i/a,p=(1-(o-1)*h)/o*s/(e-1),d=((1-h*(o-1))/o-p*(e-1))/e;if(d=Uh(u)?d:1/o/e*u,!Uh(l)){var f=l/a;d=Math.min(d,f)}if(!Uh(c)){var m=c/a;d=Math.max(d,m)}return((.5+t)*(d=r?r/a:d)+t*(p=((1-(o-1)*h)/o-e*d)/(e-1))+.5*h)*o-h/2},t.prototype.getDodgeOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,s=n.marginRatio,l=n.maxColumnWidth,c=n.minColumnWidth,u=n.columnWidthRatio,h=i/a,p=1*s/(o-1),d=((1-p*(o-1))/o-h*(e-1))/e;if(d=u?1/o/e*u:d,!Uh(l)){var f=l/a;d=Math.min(d,f)}if(!Uh(c)){var m=c/a;d=Math.max(d,m)}return((.5+t)*(d=r?r/a:d)+t*h+.5*(p=(1-(d*e+h*(e-1))*o)/(o-1)))*o-p/2},t.prototype.getIntervalAndDodgeOffset=function(e,t){var n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,s=r/a,l=i/a;return((.5+t)*(((1-s*(o-1))/o-l*(e-1))/e)+t*l+.5*s)*o-s/2},t.prototype.getDistribution=function(e){var t=this.adjustDataArray,n=this.cacheMap,r=n[e];return r||(r={},Xh(t,(function(t,n){var i=up(t,e);i.length||i.push(0),Xh(i,(function(e){r[e]||(r[e]=[]),r[e].push(n)}))})),n[e]=r),r},t}(Dv);var Uv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.process=function(e){var t=Hp(e),n=tp(t);return this.adjustData(t,n),t},t.prototype.adjustDim=function(e,t,n){var r=this;return Xh(this.groupData(n,e),(function(n,i){return r.adjustGroup(n,e,parseFloat(i),t)}))},t.prototype.getAdjustOffset=function(e){var t,n=e.pre,r=e.next,i=.05*(r-n);return(r-i-(t=n+i))*Math.random()+t},t.prototype.adjustGroup=function(e,t,n,r){var i=this,a=this.getAdjustRange(t,n,r);return Xh(e,(function(e){e[t]=i.getAdjustOffset(a)})),e},t}(Dv),Vv=md,Wv=function(e){function t(t){var n=e.call(this,t)||this,r=t.adjustNames,i=void 0===r?["y"]:r,a=t.height,o=void 0===a?NaN:a,s=t.size,l=void 0===s?10:s,c=t.reverseOrder,u=void 0!==c&&c;return n.adjustNames=i,n.height=o,n.size=l,n.reverseOrder=u,n}return Gv(t,e),t.prototype.process=function(e){var t=this.yField,n=this.reverseOrder,r=t?this.processStack(e):this.processOneDimStack(e);return n?this.reverse(r):r},t.prototype.reverse=function(e){return e.slice(0).reverse()},t.prototype.processStack=function(e){var t=this,n=t.xField,r=t.yField,i=t.reverseOrder?this.reverse(e):e,a=new Vv,o=new Vv;return i.map((function(e){return e.map((function(e){var t,i=Zp(e,n,0),s=Zp(e,[r]),l=i.toString();if(s=Vh(s)?s[1]:s,!Uh(s)){var c=s>=0?a:o;c.has(l)||c.set(l,0);var u=c.get(l),h=s+u;return c.set(l,h),$v($v({},e),((t={})[r]=[u,h],t))}return e}))}))},t.prototype.processOneDimStack=function(e){var t=this,n=this,r=n.xField,i=n.height,a=n.reverseOrder,o=a?this.reverse(e):e,s=new Vv;return o.map((function(e){return e.map((function(e){var n,a=t.size,o=e[r],l=2*a/i;s.has(o)||s.set(o,l/2);var c=s.get(o);return s.set(o,c+l),$v($v({},e),((n={}).y=c,n))}))}))},t}(Dv),Xv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.process=function(e){var t=tp(e),n=this.xField,r=this.yField,i=this.getXValuesMaxMap(t),a=Math.max.apply(Math,Object.keys(i).map((function(e){return i[e]})));return Kp(e,(function(e){return Kp(e,(function(e){var t,o,s=e[r],l=e[n];if(Vh(s)){var c=(a-i[l])/2;return $v($v({},e),((t={})[r]=Kp(s,(function(e){return c+e})),t))}var u=(a-s)/2;return $v($v({},e),((o={})[r]=[u,s+u],o))}))}))},t.prototype.getXValuesMaxMap=function(e){var t=this,n=this.xField,r=this.yField;return function(e,t){void 0===t&&(t=Qp);var n={};return Wh(e)&&!Uh(e)&&Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n}(gp(e,(function(e){return e[n]})),(function(e){return t.getDimMaxValue(e,r)}))},t.prototype.getDimMaxValue=function(e,t){var n=Kp(e,(function(e){return Zp(e,t,[])})),r=tp(n);return Math.max.apply(Math,r)},t}(Dv);Hv("Dodge",Yv),Hv("Jitter",Uv),Hv("Stack",Wv),Hv("Symmetric",Xv);var qv=function(e,t){return lp(t)?t:e.invert(e.scale(t))},Kv=function(){function e(e){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(e)}return e.prototype.mapping=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.map((function(t,n){return e._toOriginParam(t,e.scales[n])}));return this.callback.apply(this,r)},e.prototype.getLinearValue=function(e){var t=this.values.length-1,n=Math.floor(t*e),r=t*e-n,i=this.values[n];return i+((n===t?i:this.values[n+1])-i)*r},e.prototype.getNames=function(){for(var e=this.scales,t=this.names,n=Math.min(e.length,t.length),r=[],i=0;i<n;i+=1)r.push(t[i]);return r},e.prototype.getFields=function(){return this.scales.map((function(e){return e.field}))},e.prototype.getScale=function(e){return this.scales[this.names.indexOf(e)]},e.prototype.defaultCallback=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this.values:t.map((function(t,n){var r=e.scales[n];return"identity"===r.type?r.values[0]:e._getAttributeValue(r,t)}))},e.prototype._parseCfg=function(e){var t=this,n=e.type,r=void 0===n?"base":n,i=e.names,a=void 0===i?[]:i,o=e.scales,s=void 0===o?[]:o,l=e.values,c=void 0===l?[]:l,u=e.callback;this.type=r,this.scales=s,this.values=c,this.names=a,this.callback=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(u){var r=u.apply(void 0,e);if(!Uh(r))return[r]}return t.defaultCallback.apply(t,e)}},e.prototype._getAttributeValue=function(e,t){if(e.isCategory&&!this.linear){var n=e.translate(t);return this.values[n%this.values.length]}var r=e.scale(t);return this.getLinearValue(r)},e.prototype._toOriginParam=function(e,t){return t.isLinear?e:Vh(e)?e.map((function(e){return qv(t,e)})):qv(t,e)},e}(),Qv=function(e,t){return(Qv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Zv(e,t){function n(){this.constructor=e}Qv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Jv=/rgba?\(([\s.,0-9]+)\)/,ey=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,ty=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ny=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,ry=function(e,t,n,r){return e[r]+(t[r]-e[r])*n};function iy(e){return"#"+sy(e[0])+sy(e[1])+sy(e[2])}var ay,oy=function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]},sy=function(e){var t=Math.round(e).toString(16);return 1===t.length?"0"+t:t},ly=function(e){if("#"===e[0]&&7===e.length)return e;ay||(ay=function(){var e=document.createElement("i");return e.title="Web Colour Picker",e.style.display="none",document.body.appendChild(e),e}()),ay.style.color=e;var t=document.defaultView.getComputedStyle(ay,"").getPropertyValue("color");return t=iy(Jv.exec(t)[1].split(/\s*,\s*/).map((function(e){return Number(e)})))},cy={rgb2arr:oy,gradient:function(e){var t=lp(e)?e.split("-"):e,n=Kp(t,(function(e){return oy(-1===e.indexOf("#")?ly(e):e)}));return function(e){return function(e,t){var n=isNaN(Number(t))||t<0?0:t>1?1:Number(t),r=e.length-1,i=Math.floor(r*n),a=r*n-i,o=e[i],s=i===r?o:e[i+1];return iy([ry(o,s,a,0),ry(o,s,a,1),ry(o,s,a,2)])}(n,e)}},toRGB:Gp(ly),toCSSGradient:function(e){if(/^[r,R,L,l]{1}[\s]*\(/.test(e)){var t,n=void 0;if("l"===e[0]){var r=+(i=ey.exec(e))[1]+90;n=i[2],t="linear-gradient("+r+"deg, "}else if("r"===e[0]){var i;t="radial-gradient(",n=(i=ty.exec(e))[4]}var a=n.match(ny);return Xh(a,(function(e,n){var r=e.split(":");t+=r[1]+" "+100*r[0]+"%",n!==a.length-1&&(t+=", ")})),t+=")"}return e}},uy=function(e){function t(t){var n=e.call(this,t)||this;return n.type="color",n.names=["color"],lp(n.values)&&(n.linear=!0),n.gradient=cy.gradient(n.values),n}return Zv(t,e),t.prototype.getLinearValue=function(e){return this.gradient(e)},t}(Kv),hy=function(e){function t(t){var n=e.call(this,t)||this;return n.type="opacity",n.names=["opacity"],n}return Zv(t,e),t}(Kv),py=function(e){function t(t){var n=e.call(this,t)||this;return n.names=["x","y"],n.type="position",n}return Zv(t,e),t.prototype.mapping=function(e,t){var n=this.scales,r=n[0],i=n[1];return Uh(e)||Uh(t)?[]:[Vh(e)?e.map((function(e){return r.scale(e)})):r.scale(e),Vh(t)?t.map((function(e){return i.scale(e)})):i.scale(t)]},t}(Kv),dy=function(e){function t(t){var n=e.call(this,t)||this;return n.type="shape",n.names=["shape"],n}return Zv(t,e),t.prototype.getLinearValue=function(e){var t=Math.round((this.values.length-1)*e);return this.values[t]},t}(Kv),fy=function(e){function t(t){var n=e.call(this,t)||this;return n.type="size",n.names=["size"],n}return Zv(t,e),t}(Kv),my={};function gy(e,t){my[e]=t}var vy=function(){function e(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return e.prototype.translate=function(e){return e},e.prototype.change=function(e){zp(this.__cfg__,e),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var e=this;return Kp(this.ticks,(function(t,n){return Wh(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}}))},e.prototype.getText=function(e,t){var n=this.formatter,r=n?n(e,t):e;return Uh(r)||!Yh(r.toString)?"":r.toString()},e.prototype.getConfig=function(e){return this.__cfg__[e]},e.prototype.init=function(){zp(this,this.__cfg__),this.setDomain(),Wp(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(lp(e)){var n=my[e];if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else Yh(e)&&(t=e(this));return t},e.prototype.rangeMin=function(){return this.range[0]},e.prototype.rangeMax=function(){return this.range[1]},e.prototype.calcPercent=function(e,t,n){return Ep(e)?(e-t)/(n-t):NaN},e.prototype.calcValue=function(e,t,n){return t+e*(n-t)},e}(),yy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return Lh(t,e),t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var t=this.translateIndexMap.get(e);return void 0===t&&(t=Ep(e)?e:NaN),t},t.prototype.scale=function(e){var t=this.translate(e),n=this.calcPercent(t,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var t=this.max-this.min,n=this.calcPercent(e,this.rangeMin(),this.rangeMax()),r=Math.round(t*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},t.prototype.getText=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t;return Ep(t)&&!this.values.includes(t)&&(i=this.values[i]),e.prototype.getText.apply(this,Bh([i],n,!1))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(Uh(this.getConfig("min"))&&(this.min=0),Uh(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(vy),xy=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Ey="[^\\s]+",by=/\[([^]*?)\]/gm;function Cy(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var Ty=function(e){return function(t,n){var r=n[e].map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase());return r>-1?r:null}};function wy(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];for(var o in a)e[o]=a[o]}return e}var Sy=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ky=["January","February","March","April","May","June","July","August","September","October","November","December"],_y=Cy(ky,3),Ay={dayNamesShort:Cy(Sy,3),dayNames:Sy,monthNamesShort:_y,monthNames:ky,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},Oy=wy({},Ay),Iy=function(e){return Oy=wy(Oy,e)},My=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Ny=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},Fy={D:function(e){return String(e.getDate())},DD:function(e){return Ny(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Ny(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Ny(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return Ny(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Ny(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Ny(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Ny(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Ny(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Ny(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Ny(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Ny(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Ny(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Ny(Math.floor(Math.abs(t)/60),2)+":"+Ny(Math.abs(t)%60,2)}},Ly=function(e){return+e-1},Py=[null,"[1-9]\\d?"],Ry=[null,Ey],Dy=["isPm",Ey,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],By=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?n:-n}return 0}],zy={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+Ey,function(e){return parseInt(e,10)}],M:["month","[1-9]\\d?",Ly],MM:["month","\\d\\d",Ly],YY:["year","\\d\\d",function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+e>68?t-1:t)+e)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond","\\d\\d",function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:Py,dd:Py,ddd:Ry,dddd:Ry,MMM:["month",Ey,Ty("monthNamesShort")],MMMM:["month",Ey,Ty("monthNames")],a:Dy,A:Dy,ZZ:By,Z:By},Hy={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},jy=function(e){return wy(Hy,e)},Gy=function(e,t,n){if(void 0===t&&(t=Hy.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var r=[];t=(t=Hy[t]||t).replace(by,(function(e,t){return r.push(t),"@@@"}));var i=wy(wy({},Oy),n);return(t=t.replace(xy,(function(t){return Fy[t](e,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function $y(e,t,n){if(void 0===n&&(n={}),"string"!=typeof t)throw new Error("Invalid format in fecha parse");if(t=Hy[t]||t,e.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],a=[],o=t.replace(by,(function(e,t){return a.push(My(t)),"@@@"})),s={},l={};o=My(o).replace(xy,(function(e){var t=zy[e],n=t[0],r=t[1],a=t[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,a&&(l[a]=!0),i.push(t),"("+r+")"})),Object.keys(l).forEach((function(e){if(!s[e])throw new Error("Invalid format. "+e+" is required in specified format")})),o=o.replace(/@@@/g,(function(){return a.shift()}));var c=e.match(new RegExp(o,"i"));if(!c)return null;for(var u=wy(wy({},Oy),n),h=1;h<c.length;h++){var p=i[h-1],d=p[0],f=p[2],m=f?f(c[h],u):+c[h];if(null==m)return null;r[d]=m}1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0);for(var g=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond),v=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(h=0,v.length);h<y;h++)if(s[v[h][0]]&&r[v[h][0]]!==g[v[h][1]]())return null;return null==r.timezoneOffset?g:new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond))}var Yy={format:Gy,parse:$y,defaultI18n:Ay,setGlobalDateI18n:Iy,setGlobalDateMasks:jy},Uy=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Yy,assign:wy,format:Gy,parse:$y,defaultI18n:Ay,setGlobalDateI18n:Iy,setGlobalDateMasks:jy});function Vy(e,t){return(Uy.format||Yy.format)(e,t)}function Wy(e){return lp(e)&&(e=e.indexOf("T")>0?new Date(e).getTime():new Date(e.replace(/-/gi,"/")).getTime()),Lp(e)&&(e=e.getTime()),e}var Xy=36e5,qy=24*Xy,Ky=31*qy,Qy=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",Xy],["HH",6*Xy],["HH",12*Xy],["YYYY-MM-DD",qy],["YYYY-MM-DD",4*qy],["YYYY-WW",7*qy],["YYYY-MM",Ky],["YYYY-MM",4*Ky],["YYYY-MM",6*Ky],["YYYY",380*qy]];function Zy(e,t,n){var r,i=(r=function(e){return e[1]},function(e,t,n,i){for(var a=Uh(n)?0:n,o=Uh(i)?e.length:i;a<o;){var s=a+o>>>1;r(e[s])>t?o=s:a=s+1}return a})(Qy,(t-e)/n)-1,a=Qy[i];return i<0?a=Qy[0]:i>=Qy.length&&(a=pp(Qy)),a}var Jy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="timeCat",t}return Lh(t,e),t.prototype.translate=function(e){e=Wy(e);var t=this.values.indexOf(e);return-1===t&&(t=Ep(e)&&e<this.values.length?e:NaN),t},t.prototype.getText=function(e,t){var n=this.translate(e);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,t):Vy(r,this.mask)}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var t=this.values;Xh(t,(function(e,n){t[n]=Wy(e)})),t.sort((function(e,t){return e-t})),e.prototype.setDomain.call(this)},t}(yy),ex=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return Lh(t,e),t.prototype.scale=function(e){if(Uh(e))return NaN;var t=this.rangeMin(),n=this.rangeMax();return this.max===this.min?t:t+this.getScalePercent(e)*(n-t)},t.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,n=hp(t),r=pp(t);n<this.min&&(this.min=n),r>this.max&&(this.max=r),Uh(this.minLimit)||(this.min=n),Uh(this.maxLimit)||(this.max=r)},t.prototype.setDomain=function(){var e=ip(this.values),t=e.min,n=e.max;Uh(this.min)&&(this.min=t),Uh(this.max)&&(this.max=n),this.min>this.max&&(this.min=t,this.max=n)},t.prototype.calculateTicks=function(){var t=this,n=e.prototype.calculateTicks.call(this);return this.nice||(n=jh(n,(function(e){return e>=t.min&&e<=t.max}))),n},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;return(e-n)/(t-n)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(vy),tx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return Lh(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e);return this.min+t*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(ex);function nx(e,t){var n=Math.E;return t>=0?Math.pow(n,Math.log(t)/e):-1*Math.pow(n,Math.log(-t)/e)}function rx(e,t){return 1===e?1:Math.log(t)/Math.log(e)}function ix(e,t,n){Uh(n)&&(n=Math.max.apply(null,e));var r=n;return Xh(e,(function(e){e>0&&e<r&&(r=e)})),r===n&&(r=n/t),r>1&&(r=1),r}var ax=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t}return Lh(t,e),t.prototype.invert=function(e){var t,n=this.base,r=rx(n,this.max),i=this.rangeMin(),a=this.rangeMax()-i,o=this.positiveMin;if(o){if(0===e)return 0;var s=1/(r-(t=rx(n,o/n)))*a;if(e<s)return e/s*o}else t=rx(n,this.min);var l=(e-i)/a*(r-t)+t;return Math.pow(n,l)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){e.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=ix(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;if(e<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),e<i?e/i/(rx(r,t)-rx(r,n)):(rx(r,e)-rx(r,n))/(rx(r,t)-rx(r,n))},t}(ex),ox=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pow",t}return Lh(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e),n=this.exponent,r=nx(n,this.max),i=nx(n,this.min),a=t*(r-i)+i,o=a>=0?1:-1;return Math.pow(a,n)*o},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;var r=this.exponent;return(nx(r,e)-nx(r,n))/(nx(r,t)-nx(r,n))},t}(ex),sx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="time",t}return Lh(t,e),t.prototype.getText=function(e,t){var n=this.translate(e),r=this.formatter;return r?r(n,t):Vy(n,this.mask)},t.prototype.scale=function(t){var n=t;return(lp(n)||Lp(n))&&(n=this.translate(n)),e.prototype.scale.call(this,n)},t.prototype.translate=function(e){return Wy(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,t=this.getConfig("min"),n=this.getConfig("max");if(Uh(t)&&Ep(t)||(this.min=this.translate(this.min)),Uh(n)&&Ep(n)||(this.max=this.translate(this.max)),e&&e.length){var r=[],i=1/0,a=i,o=0;Xh(e,(function(e){var t=Wy(e);if(isNaN(t))throw new TypeError("Invalid Time: "+e+" in time scale!");i>t?(a=i,i=t):a>t&&(a=t),o<t&&(o=t),r.push(t)})),e.length>1&&(this.minTickInterval=a-i),Uh(t)&&(this.min=i),Uh(n)&&(this.max=o)}},t}(tx),lx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantize",t}return Lh(t,e),t.prototype.invert=function(e){var t=this.ticks,n=t.length,r=this.getInvertPercent(e),i=Math.floor(r*(n-1));if(i>=n-1)return pp(t);if(i<0)return hp(t);var a=t[i],o=i/(n-1);return a+(r-o)/((i+1)/(n-1)-o)*(t[i+1]-a)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var t=e.prototype.calculateTicks.call(this);return this.nice||(pp(t)!==this.max&&t.push(this.max),hp(t)!==this.min&&t.unshift(this.min)),t},t.prototype.getScalePercent=function(e){var t=this.ticks;if(e<hp(t))return 0;if(e>pp(t))return 1;var n=0;return Xh(t,(function(t,r){if(!(e>=t))return!1;n=r})),n/(t.length-1)},t}(ex),cx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantile",t}return Lh(t,e),t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(lx),ux={};function hx(e){return ux[e]}function px(e,t){if(hx(e))throw new Error("type '"+e+"' existed.");ux[e]=t}var dx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return Lh(t,e),t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&Ep(e)?e:this.range[0]},t.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},t}(vy);function fx(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}var mx=[1,5,2,2.5,4,3],gx=100*Number.EPSILON;function vx(e,t,n,r,i,a){var o=sd(t),s=Up(t,e),l=0,c=function(e,t){return(e%t+t)%t}(r,a);return(c<gx||a-c<gx)&&r<=0&&i>=0&&(l=1),1-s/(o-1)-n+l}function yx(e,t,n){var r=sd(t);return 1-Up(t,e)/(r-1)-n+1}function xx(e,t,n,r,i,a){var o=(e-1)/(a-i),s=(t-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(o/s,s/o)}function Ex(e,t){return e>=t?2-(e-1)/(t-1):1}function bx(e,t,n,r){var i=t-e;return 1-.5*(Math.pow(t-r,2)+Math.pow(e-n,2))/Math.pow(.1*i,2)}function Cx(e,t,n){var r=t-e;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function Tx(e,t,n,r,i,a){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=mx),void 0===a&&(a=[.25,.2,.5,.05]);var o=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||"number"!=typeof e||"number"!=typeof t||!o)return{min:0,max:0,ticks:[]};if(t-e<1e-15||1===o)return{min:e,max:t,ticks:[e]};for(var s={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var c=0;c<i.length;c+=1){var u=i[c],h=yx(u,i,l);if(a[0]*h+a[1]+a[2]+a[3]<s.score){l=1/0;break}for(var p=2;p<1/0;){var d=Ex(p,o);if(a[0]*h+a[1]+a[2]*d+a[3]<s.score)break;for(var f=(t-e)/(p+1)/l/u,m=Math.ceil(Math.log10(f));m<1/0;){var g=l*u*Math.pow(10,m),v=Cx(e,t,g*(p-1));if(a[0]*h+a[1]*v+a[2]*d+a[3]<s.score)break;var y=Math.floor(t/g)*l-(p-1)*l,x=Math.ceil(e/g)*l;if(y<=x)for(var E=x-y,b=0;b<=E;b+=1){var C=(y+b)*(g/l),T=C+g*(p-1),w=g,S=vx(u,i,l,C,T,w),k=bx(e,t,C,T),_=xx(p,o,e,t,C,T),A=a[0]*S+a[1]*k+a[2]*_+1*a[3];A>s.score&&(!r||C<=e&&T>=t)&&(s.lmin=C,s.lmax=T,s.lstep=w,s.score=A)}m+=1}p+=1}}l+=1}var O=fx(s.lmax),I=fx(s.lmin),M=fx(s.lstep),N=Math.floor(function(e){return Math.round(1e12*e)/1e12}((O-I)/M))+1,F=new Array(N);F[0]=fx(I);for(c=1;c<N;c++)F[c]=fx(F[c-1]+M);return{min:Math.min(e,hp(F)),max:Math.max(t,pp(F)),ticks:F}}function wx(e){var t=e.values,n=e.tickInterval,r=e.tickCount,i=t;if(Ep(n))return jh(i,(function(e,t){return t%n==0}));var a=e.min,o=e.max;if(Uh(a)&&(a=0),Uh(o)&&(o=t.length-1),Ep(r)&&r<o-a){var s=Tx(a,o,r,!1,[1,2,5,3,4,7,6,8,9]).ticks;return jh(s,(function(e){return e>=a&&e<=o})).map((function(e){return t[e]}))}return t.slice(a,o+1)}var Sx=Math.sqrt(50),kx=Math.sqrt(10),_x=Math.sqrt(2),Ax=function(){function e(){this._domain=[0,1]}return e.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},e.prototype.nice=function(e){var t,n;void 0===e&&(e=5);var r,i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o];return l<s&&(s=(t=[l,s])[0],l=t[1],a=(n=[o,a])[0],o=n[1]),(r=Ox(s,l,e))>0?r=Ox(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,e):r<0&&(r=Ox(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,e)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(l/r)*r,this.domain(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(l*r)/r,this.domain(i)),this},e.prototype.ticks=function(e){return void 0===e&&(e=5),function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];(r=t<e)&&(i=e,e=t,t=i);if(0===(o=Ox(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(e-s)/o;r&&a.reverse();return a}(this._domain[0],this._domain[this._domain.length-1],e||5)},e}();function Ox(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Sx?10:a>=kx?5:a>=_x?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Sx?10:a>=kx?5:a>=_x?2:1)}function Ix(e,t,n){return("ceil"===n?Math.ceil(e/t):"floor"===n?Math.floor(e/t):Math.round(e/t))*t}function Mx(e,t,n){var r=Ix(e,n,"floor"),i=Ix(t,n,"ceil");r=xp(r,n),i=xp(i,n);for(var a=[],o=r;o<=i;o+=n){var s=xp(o,n);a.push(s)}return{min:r,max:i,ticks:a}}function Nx(e,t,n){var r,i=e.minLimit,a=e.maxLimit,o=e.min,s=e.max,l=e.tickCount,c=void 0===l?5:l,u=Uh(i)?Uh(t)?o:t:i,h=Uh(a)?Uh(n)?s:n:a;if(u>h&&(h=(r=[u,h])[0],u=r[1]),c<=2)return[u,h];for(var p=(h-u)/(c-1),d=[],f=0;f<c;f++)d.push(u+p*f);return d}function Fx(e,t,n){if(void 0===n&&(n=5),e===t)return{max:t,min:e,ticks:[e]};var r=n<0?0:Math.round(n);if(0===r)return{max:t,min:e,ticks:[]};var i=(t-e)/r,a=Math.pow(10,Math.floor(Math.log10(i))),o=a;2*a-i<1.5*(i-o)&&5*a-i<2.75*(i-(o=2*a))&&10*a-i<1.5*(i-(o=5*a))&&(o=10*a);for(var s=Math.ceil(t/o),l=Math.floor(e/o),c=Math.max(s*o,t),u=Math.min(l*o,e),h=Math.floor((c-u)/o)+1,p=new Array(h),d=0;d<h;d++)p[d]=fx(u+d*o);return{min:u,max:c,ticks:p}}function Lx(e,t){var n=e.length*t;return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function Px(e){return new Date(e).getFullYear()}function Rx(e){return new Date(e,0,1).getTime()}function Dx(e){return new Date(e).getMonth()}function Bx(e,t){return new Date(e,t,1).getTime()}gy("cat",wx),gy("time-cat",(function(e){var t=wx(e),n=pp(e.values);return n!==pp(t)&&t.push(n),t})),gy("wilkinson-extended",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.nice,a=e.tickInterval,o=e.minLimit,s=e.maxLimit,l=Tx(t,n,r,i).ticks;return Uh(o)&&Uh(s)?a?Mx(t,n,a).ticks:l:Nx(e,hp(l),pp(l))})),gy("r-pretty",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.tickInterval,a=e.minLimit,o=e.maxLimit,s=Fx(t,n,r).ticks;return Uh(a)&&Uh(o)?i?Mx(t,n,i).ticks:s:Nx(e,hp(s),pp(s))})),gy("time",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickInterval,a=e.tickCount;if(i)a=Math.ceil((n-t)/i);else{var o=(n-t)/(i=Zy(t,n,a)[1])/a;o>1&&(i*=Math.ceil(o)),r&&i<r&&(i=r)}for(var s=[],l=t;l<n+i;l+=i)s.push(l);return s})),gy("time-pretty",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickCount,a=e.tickInterval,o=[];a||(a=(n-t)/i,r&&a<r&&(a=r));var s=Px(t);if(a>31536e6)for(var l=Px(n),c=Math.ceil(a/31536e6),u=s;u<=l+c;u+=c)o.push(Rx(u));else if(a>Ky){var h=Math.ceil(a/Ky),p=Dx(t),d=function(e,t){var n=Px(e),r=Px(t),i=Dx(e);return 12*(r-n)+(Dx(t)-i)%12}(t,n);for(u=0;u<=d+h;u+=h)o.push(Bx(s,u+p))}else if(a>qy){var f=(x=new Date(t)).getFullYear(),m=x.getMonth(),g=x.getDate(),v=Math.ceil(a/qy),y=function(e,t){return Math.ceil((t-e)/qy)}(t,n);for(u=0;u<y+v;u+=v)o.push(new Date(f,m,g+u).getTime())}else if(a>Xy){f=(x=new Date(t)).getFullYear(),m=x.getMonth(),v=x.getDate();var x,E=x.getHours(),b=Math.ceil(a/Xy),C=function(e,t){return Math.ceil((t-e)/Xy)}(t,n);for(u=0;u<=C+b;u+=b)o.push(new Date(f,m,v,E+u).getTime())}else if(a>6e4){var T=function(e,t){return Math.ceil((t-e)/6e4)}(t,n),w=Math.ceil(a/6e4);for(u=0;u<=T+w;u+=w)o.push(t+6e4*u)}else{var S=a;S<1e3&&(S=1e3);var k=1e3*Math.floor(t/1e3),_=Math.ceil((n-t)/1e3),A=Math.ceil(S/1e3);for(u=0;u<_+A;u+=A)o.push(k+1e3*u)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o})),gy("log",(function(e){var t,n=e.base,r=e.tickCount,i=e.min,a=e.max,o=e.values,s=rx(n,a);if(i>0)t=Math.floor(rx(n,i));else{var l=ix(o,n,a);t=Math.floor(rx(n,l))}for(var c=s-t,u=Math.ceil(c/r),h=[],p=t;p<s+u;p+=u)h.push(Math.pow(n,p));return i<=0&&h.unshift(0),h})),gy("pow",(function(e){var t=e.exponent,n=e.tickCount,r=Math.ceil(nx(t,e.max));return Fx(Math.floor(nx(t,e.min)),r,n).ticks.map((function(e){var n=e>=0?1:-1;return Math.pow(e,t)*n}))})),gy("quantile",(function(e){var t=e.tickCount,n=e.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(e,t){return e-t})),i=[],a=0;a<t;a++){var o=a/(t-1);i.push(Lx(r,o))}return i})),gy("d3-linear",(function(e){var t=e.min,n=e.max,r=e.tickInterval,i=e.minLimit,a=e.maxLimit,o=function(e){var t=e.min,n=e.max,r=e.nice,i=e.tickCount,a=new Ax;return a.domain([t,n]),r&&a.nice(i),a.ticks(i)}(e);return Uh(i)&&Uh(a)?r?Mx(t,n,r).ticks:o:Nx(e,hp(o),pp(o))})),px("cat",yy),px("category",yy),px("identity",dx),px("linear",tx),px("log",ax),px("pow",ox),px("time",sx),px("timeCat",Jy),px("quantize",lx),px("quantile",cx);var zx={},Hx=function(e){return zx[e.toLowerCase()]},jx=function(e,t){if(Hx(e))throw new Error("Attribute type '"+e+"' existed.");zx[e.toLowerCase()]=t};jx("Color",uy),jx("Opacity",hy),jx("Position",py),jx("Shape",dy),jx("Size",fy);var Gx=function(){function e(e){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=e.start,n=e.end,r=e.matrix,i=void 0===r?[1,0,0,0,1,0,0,0,1]:r,a=e.isTransposed,o=void 0!==a&&a;this.start=t,this.end=n,this.matrix=i,this.originalMatrix=Bh([],i),this.isTransposed=o}return e.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},e.prototype.update=function(e){zp(this,e),this.initial()},e.prototype.convertDim=function(e,t){var n,r=this[t],i=r.start,a=r.end;return this.isReflect(t)&&(i=(n=[a,i])[0],a=n[1]),i+e*(a-i)},e.prototype.invertDim=function(e,t){var n,r=this[t],i=r.start,a=r.end;return this.isReflect(t)&&(i=(n=[a,i])[0],a=n[1]),(e-i)/(a-i)},e.prototype.applyMatrix=function(e,t,n){void 0===n&&(n=0);var r=[e,t,n];return $f(r,r,this.matrix),r},e.prototype.invertMatrix=function(e,t,n){void 0===n&&(n=0);var r=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,e[0]=h*f,e[1]=(-u*r+i*c)*f,e[2]=(s*r-i*o)*f,e[3]=p*f,e[4]=(u*n-i*l)*f,e[5]=(-s*n+i*a)*f,e[6]=d*f,e[7]=(-c*n+r*l)*f,e[8]=(o*n-r*a)*f,e):null}([0,0,0,0,0,0,0,0,0],this.matrix),i=[e,t,n];return r&&$f(i,i,r),i},e.prototype.convert=function(e){var t=this.convertPoint(e),n=t.x,r=t.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},e.prototype.invert=function(e){var t=this.invertMatrix(e.x,e.y,1);return this.invertPoint({x:t[0],y:t[1]})},e.prototype.rotate=function(e){var t=this.matrix,n=this.center;return tm(t,t,[-n.x,-n.y]),nm(t,t,e),tm(t,t,[n.x,n.y]),this},e.prototype.reflect=function(e){return"x"===e?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},e.prototype.scale=function(e,t){var n=this.matrix,r=this.center;return tm(n,n,[-r.x,-r.y]),rm(n,n,[e,t]),tm(n,n,[r.x,r.y]),this},e.prototype.translate=function(e,t){var n=this.matrix;return tm(n,n,[e,t]),this},e.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},e.prototype.getCenter=function(){return this.center},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRadius=function(){return this.radius},e.prototype.isReflect=function(e){return"x"===e?this.isReflectX:this.isReflectY},e.prototype.resetMatrix=function(e){this.matrix=e||Bh([],this.originalMatrix)},e}(),$x=function(e){function t(t){var n=e.call(this,t)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return Lh(t,e),t.prototype.initial=function(){e.prototype.initial.call(this);var t=this.start,n=this.end;this.x={start:t.x,end:n.x},this.y={start:t.y,end:n.y}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;return this.isTransposed&&(n=(t=[r,n])[0],r=t[1]),{x:this.convertDim(n,"x"),y:this.convertDim(r,"y")}},t.prototype.invertPoint=function(e){var t,n=this.invertDim(e.x,"x"),r=this.invertDim(e.y,"y");return this.isTransposed&&(n=(t=[r,n])[0],r=t[1]),{x:n,y:r}},t}(Gx),Yx=function(e){function t(t){var n=e.call(this,t)||this;n.isHelix=!0,n.type="helix";var r=t.startAngle,i=void 0===r?1.25*Math.PI:r,a=t.endAngle,o=void 0===a?7.25*Math.PI:a,s=t.innerRadius,l=void 0===s?0:s,c=t.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=l,n.radius=c,n.initial(),n}return Lh(t,e),t.prototype.initial=function(){e.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n*=this.radius),this.d=Math.floor(n*(1-this.innerRadius)/t),this.a=this.d/(2*Math.PI),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+.99*this.d}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;this.isTransposed&&(n=(t=[r,n])[0],r=t[1]);var i=this.convertDim(n,"x"),a=this.a*i,o=this.convertDim(r,"y");return{x:this.center.x+Math.cos(i)*(a+o),y:this.center.y+Math.sin(i)*(a+o)}},t.prototype.invertPoint=function(e){var t,n=this.d+this.y.start,r=Uf([0,0],[e.x,e.y],[this.center.x,this.center.y]),i=om(r,[1,0],!0),a=i*this.a;Kf(r)<a&&(a=Kf(r)),i=2*Math.floor((Kf(r)-a)/n)*Math.PI+i;var o=this.a*i,s=Kf(r)-o;s=bp(s,0)?0:s;var l=this.invertDim(i,"x"),c=this.invertDim(s,"y");return l=bp(l,0)?0:l,c=bp(c,0)?0:c,this.isTransposed&&(l=(t=[c,l])[0],c=t[1]),{x:l,y:c}},t}(Gx),Ux=function(e){function t(t){var n=e.call(this,t)||this;n.isPolar=!0,n.type="polar";var r=t.startAngle,i=void 0===r?-Math.PI/2:r,a=t.endAngle,o=void 0===a?3*Math.PI/2:a,s=t.innerRadius,l=void 0===s?0:s,c=t.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=l,n.radius=c,n.initial(),n}return Lh(t,e),t.prototype.initial=function(){for(e.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=2*Math.PI;var t,n=this.getOneBox(),r=n.maxX-n.minX,i=n.maxY-n.minY,a=Math.abs(n.minX)/r,o=Math.abs(n.minY)/i;this.height/i>this.width/r?(t=this.width/r,this.circleCenter={x:this.center.x-(.5-a)*this.width,y:this.center.y-(.5-o)*t*i}):(t=this.height/i,this.circleCenter={x:this.center.x-(.5-a)*t*r,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=t*this.radius:(this.radius<=0||this.radius>t)&&(this.polarRadius=t):this.polarRadius=t,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},t.prototype.getRadius=function(){return this.polarRadius},t.prototype.convertPoint=function(e){var t,n=this.getCenter(),r=e.x,i=e.y;return this.isTransposed&&(r=(t=[i,r])[0],i=t[1]),r=this.convertDim(r,"x"),i=this.convertDim(i,"y"),{x:n.x+Math.cos(r)*i,y:n.y+Math.sin(r)*i}},t.prototype.invertPoint=function(e){var t,n=this.getCenter(),r=[e.x-n.x,e.y-n.y],i=this.startAngle,a=this.endAngle;this.isReflect("x")&&(i=(t=[a,i])[0],a=t[1]);var o=[1,0,0,0,1,0,0,0,1];nm(o,o,i);var s=[1,0,0];$f(s,s,o);var l=om([s[0],s[1]],r,a<i);bp(l,2*Math.PI)&&(l=0);var c=Kf(r),u=l/(a-i);u=a-i>0?u:-u;var h=this.invertDim(c,"y"),p={x:0,y:0};return p.x=this.isTransposed?h:u,p.y=this.isTransposed?u:h,p},t.prototype.getCenter=function(){return this.circleCenter},t.prototype.getOneBox=function(){var e=this.startAngle,t=this.endAngle;if(Math.abs(t-e)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(e),Math.cos(t)],r=[0,Math.sin(e),Math.sin(t)],i=Math.min(e,t);i<Math.max(e,t);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}},t}(Gx),Vx={},Wx=function(e,t){Vx[e.toLowerCase()]=t};Wx("rect",$x),Wx("cartesian",$x),Wx("polar",Ux),Wx("helix",Yx);var Xx="\t\n\v\f\r   ᠎             　\u2028\u2029",qx=new RegExp("([a-z])["+Xx+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Xx+"]*,?["+Xx+"]*)+)","ig"),Kx=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Xx+"]*,?["+Xx+"]*","ig"),Qx=function(e){if(!e)return null;if(Vh(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(qx,(function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(Kx,(function(e,t){t&&o.push(+t)})),"m"===s&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===o.length&&n.push([i,o[0]]),"r"===s)n.push([i].concat(o));else for(;o.length>=t[s]&&(n.push([i].concat(o.splice(0,t[s]))),t[s]););return e})),n},Zx=function(e,t){if(e.length!==t.length)return!1;var n=!0;return Xh(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function Jx(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var eE=function(e,t){var n=function(e,t){var n,r,i=e.length,a=t.length,o=0;if(0===i||0===a)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=a;c++)s[0][c]={min:c};for(l=1;l<=i;l++)for(n=e[l-1],c=1;c<=a;c++){r=t[c-1],o=Zx(n,r)?0:1;var u=s[l-1][c].min+1,h=s[l][c-1].min+1,p=s[l-1][c-1].min+o;s[l][c]=Jx(u,h,p)}return s}(e,t),r=e.length,i=t.length,a=[],o=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=o;u<=i;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);o=s,n[l][o].type&&a.push({index:l-1,type:n[l][o].type})}for(l=a.length-1;l>=0;l--)o=a[l].index,"add"===a[l].type?e.splice(o,0,[].concat(e[o])):e.splice(o,1)}var h=i-(r=e.length);if(r<i)for(l=0;l<h;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function tE(e,t,n){for(var r,i=[].concat(e),a=1/(n+1),o=nE(t)[0],s=1;s<=n;s++)a*=s,0===(r=Math.floor(e.length*a))?i.unshift([o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]):i.splice(r,0,[o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]);return i}function nE(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var rE=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=nE(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=tE(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=tE(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=tE(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e},iE=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function aE(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var oE="undefined"!=typeof window&&void 0!==window.document;function sE(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function lE(e){return e.cfg.visible&&e.cfg.capture}var cE=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=zp(r,t),n}return Lh(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(Gd);function uE(e,t){var n=[],r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=t[0],d=t[1],f=t[2],m=t[3],g=t[4],v=t[5],y=t[6],x=t[7],E=t[8];return n[0]=p*r+d*o+f*c,n[1]=p*i+d*s+f*u,n[2]=p*a+d*l+f*h,n[3]=m*r+g*o+v*c,n[4]=m*i+g*s+v*u,n[5]=m*a+g*l+v*h,n[6]=y*r+x*o+E*c,n[7]=y*i+x*s+E*u,n[8]=y*a+x*l+E*h,n}function hE(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}var pE=am,dE=["zIndex","capture","visible","type"],fE=["repeat"];function mE(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function gE(e,t){var n={},r=t.attr();return Xh(e,(function(e,t){-1!==fE.indexOf(t)||qp(r[t],e)||(n[t]=e)})),n}function vE(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return Xh(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&Xh(t.toAttrs,(function(t,n){a.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var yE=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return zp(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return Lh(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(Wh(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(aE(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr("matrix")},t.prototype.setMatrix=function(e){this.attr("matrix",e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?uE(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?uE(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?hE(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=function(e){var t=[],n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,t[0]=h*f,t[1]=(-u*r+i*c)*f,t[2]=(s*r-i*o)*f,t[3]=p*f,t[4]=(u*n-i*l)*f,t[5]=(-s*n+i*a)*f,t[6]=d*f,t[7]=(-c*n+r*l)*f,t[8]=(o*n-r*a)*f,t):null}(t);if(n)return hE(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[Mp(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};Xh(t,(function(e,r){Vh(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)Vh(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return Xh(dE,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,a,o,s,l,c=e[0],u=e[1],h=e[2],p=void 0===h?"easeLinear":h,d=e[3],f=void 0===d?od:d,m=e[4],g=void 0===m?0:m;Yh(c)?(i=c,c={}):Wh(c)&&c.onFrame&&(i=c.onFrame,a=c.repeat),Wh(u)?(u=(l=u).duration,p=l.easing||"easeLinear",g=l.delay||0,a=l.repeat||a||!1,f=l.callback||od,o=l.pauseCallback||od,s=l.resumeCallback||od):(Ep(f)&&(g=f,f=null),Yh(p)?(f=p,p="easeLinear"):p=p||"easeLinear");var v=gE(c,this),y={fromAttrs:mE(v,this),toAttrs:v,duration:u,easing:p,repeat:a,callback:f,pauseCallback:o,resumeCallback:s,delay:g,startTime:n.getTime(),id:ad(),onFrame:i,pathFormatted:!1};r.length>0?r=vE(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),Xh(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return Xh(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return Xh(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var a=function(e){var a=i[e],s=a.get("name");if(s){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&n&&sE(a,n))return"break";Vh(s)?Xh(s,(function(e){r.emitDelegateEvent(a,e,t)})):o.emitDelegateEvent(a,s,t)}},o=this,s=0;s<i.length;s++){if("break"===a(s))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=pE(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=pE(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=pE(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),a=pE(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(a),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=pE(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(cE),xE={};function EE(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){EE(e,t)}))}}function bE(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){bE(e,t)}))}}var CE,TE,wE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Xh(o,(function(e){var t=e.getBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=rp(i),t=np(i),n=rp(a),r=np(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Xh(o,(function(e){var t=e.getCanvasBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=rp(i),t=np(i),n=rp(a),r=np(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){Xh(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];Wh(n)?r=n:r.type=n;var i=xE[r.type];i||(i=Mp(r.type),xE[r.type]=i);var a=this.getShapeBase(),o=new a[i](r);return this.add(o),o},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if(Yh(r))n=new r(i||{parent:this});else{var a=r||{},o=this.getGroupBase();n=new o(a)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!lE(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var a=[e,t,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,a=e.length-1;a>=0;a--){var o=e[a];if(lE(o)&&(o.isGroup()?i=o.getShape(t,n,r):o.isHit(t,n)&&(i=o)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),aE(e.getChildren(),t)}(i,e,!1),e.set("parent",this),t&&EE(e,t),r&&bE(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();Xh(t,(function(e,t){return e._INDEX=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return Xh(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return Xh(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(yE),SE=0,kE=0,_E=0,AE=0,OE=0,IE=0,ME="object"==typeof performance&&performance.now?performance:Date,NE="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function FE(){return OE||(NE(LE),OE=ME.now()+IE)}function LE(){OE=0}function PE(){this._call=this._time=this._next=null}function RE(e,t,n){var r=new PE;return r.restart(e,t,n),r}function DE(){OE=(AE=ME.now())+IE,SE=kE=0;try{!function(){FE(),++SE;for(var e,t=CE;t;)(e=OE-t._time)>=0&&t._call.call(null,e),t=t._next;--SE}()}finally{SE=0,function(){var e,t,n=CE,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:CE=t);TE=e,zE(r)}(),OE=0}}function BE(){var e=ME.now(),t=e-AE;t>1e3&&(IE-=t,AE=e)}function zE(e){SE||(kE&&(kE=clearTimeout(kE)),e-OE>24?(e<1/0&&(kE=setTimeout(DE,e-ME.now()-IE)),_E&&(_E=clearInterval(_E))):(_E||(AE=ME.now(),_E=setInterval(BE,1e3)),SE=1,NE(DE)))}function HE(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function jE(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}PE.prototype=RE.prototype={constructor:PE,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?FE():+n)+(null==t?0:+t),this._next||TE===this||(TE?TE._next=this:CE=this,TE=this),this._call=e,this._time=n,zE()},stop:function(){this._call&&(this._call=null,this._time=1/0,zE())}};var GE=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),$E=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),YE=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),UE=Math.PI,VE=UE/2;function WE(e){return(1-Math.cos(UE*e))/2}function XE(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function qE(e){return((e*=2)<=1?XE(1-e):2-XE(e-1))/2}function KE(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var QE=4/11,ZE=7.5625;function JE(e){return(e=+e)<QE?ZE*e*e:e<.7272727272727273?ZE*(e-=.5454545454545454)*e+.75:e<.9090909090909091?ZE*(e-=.8181818181818182)*e+.9375:ZE*(e-=.9545454545454546)*e+.984375}var eb=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158),tb=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158),nb=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),rb=2*Math.PI,ib=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=rb);function i(e){return t*XE(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*rb)},i.period=function(n){return e(t,n)},i}(1,.3),ab=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=rb);function i(e){return 1-t*XE(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*rb)},i.period=function(n){return e(t,n)},i}(1,.3),ob=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=rb);function i(e){return((e=2*e-1)<0?t*XE(-e)*Math.sin((r-e)/n):2-t*XE(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*rb)},i.period=function(n){return e(t,n)},i}(1,.3),sb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:function(e){return+e},easeQuad:HE,easeQuadIn:function(e){return e*e},easeQuadOut:function(e){return e*(2-e)},easeQuadInOut:HE,easeCubic:jE,easeCubicIn:function(e){return e*e*e},easeCubicOut:function(e){return--e*e*e+1},easeCubicInOut:jE,easePoly:YE,easePolyIn:GE,easePolyOut:$E,easePolyInOut:YE,easeSin:WE,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*VE)},easeSinOut:function(e){return Math.sin(e*VE)},easeSinInOut:WE,easeExp:qE,easeExpIn:function(e){return XE(1-+e)},easeExpOut:function(e){return 1-XE(e)},easeExpInOut:qE,easeCircle:KE,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCircleInOut:KE,easeBounce:JE,easeBounceIn:function(e){return 1-JE(1-e)},easeBounceOut:JE,easeBounceInOut:function(e){return((e*=2)<=1?1-JE(1-e):JE(e-1)+1)/2},easeBack:nb,easeBackIn:eb,easeBackOut:tb,easeBackInOut:nb,easeElastic:ab,easeElasticIn:ib,easeElasticOut:ab,easeElasticInOut:ob});function lb(e){return function(){return e}}function cb(e){return 1==(e=+e)?ub:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):lb(isNaN(t)?n:t)}}function ub(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):lb(isNaN(e)?t:e)}var hb=function e(t){var n=cb(t);function r(e,t){var r=n((e=de(e)).r,(t=de(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=ub(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function pb(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function db(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function fb(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=bb(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function mb(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function gb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vb(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=bb(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var yb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xb=new RegExp(yb.source,"g");function Eb(e,t){var n,r,i,a=yb.lastIndex=xb.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=yb.exec(e))&&(r=xb.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:gb(n,r)})),a=xb.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function bb(e,t){var n,r=typeof t;return null==t||"boolean"===r?lb(t):("number"===r?gb:"string"===r?(n=fe(t))?(t=n,hb):Eb:t instanceof fe?hb:t instanceof Date?mb:db(t)?pb:Array.isArray(t)?fb:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?vb:gb)(e,t)}var Cb=[1,0,0,0,1,0,0,0,1];function Tb(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var a=t.duration,o=t.easing;if(n=n-i-t.delay,t.repeat)r=n%a/a,r=sb[o](r);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=sb[o](r)}if(t.onFrame){var s=t.onFrame(r);e.attr(s)}else!function(e,t,n){var r={},i=t.fromAttrs,a=t.toAttrs;if(!e.destroyed){var o,s,l,c;for(var u in a)if(!qp(i[u],a[u]))if("path"===u){var h=a[u],p=i[u];h.length>p.length?(h=Qx(a[u]),p=Qx(i[u]),p=eE(p,h),p=rE(p,h),t.fromAttrs.path=p,t.toAttrs.path=h):t.pathFormatted||(h=Qx(a[u]),p=Qx(i[u]),p=rE(p,h),t.fromAttrs.path=p,t.toAttrs.path=h,t.pathFormatted=!0),r[u]=[];for(var d=0;d<h.length;d++){for(var f=h[d],m=p[d],g=[],v=0;v<f.length;v++)Ep(f[v])&&m&&Ep(m[v])?(o=bb(m[v],f[v]),g.push(o(n))):g.push(f[v]);r[u].push(g)}}else if("matrix"===u){var y=(l=i[u]||Cb,(db(c=a[u]||Cb)?pb:fb)(l,c))(n);r[u]=y}else["fill","stroke","fillStyle","strokeStyle"].includes(u)&&(s=a[u],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[u]=a[u]:Yh(a[u])||(o=bb(i[u],a[u]),r[u]=o(n));e.attr(r)}}(e,t,r);return!1}var wb=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=RE((function(i){if(r.current=i,r.animators.length>0){for(var a=r.animators.length-1;a>=0;a--)if((e=r.animators[a]).destroyed)r.removeAnimator(a);else{if(!e.isAnimatePaused())for(var o=(t=e.get("animations")).length-1;o>=0;o--)n=t[o],Tb(e,n,i)&&(t.splice(o,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(a)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),Sb=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function kb(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function _b(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&sE(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var Ab=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");Xh(Sb,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");Xh(Sb,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,a){var o=new iE(e,t);return o.fromShape=i,o.toShape=a,o.x=n.x,o.y=n.y,o.clientX=n.clientX,o.clientY=n.clientY,o.propagationPath.push(r),o},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],a=!1;if(i)i.call(this,n,r,t);else{var o=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(a=!0,o&&this._emitEvent(e,t,n,o,o,null),this._emitEvent(e,t,n,null,o,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(a||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,a);else{var o=this.mousedownPoint;if(o){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=o.clientX-e.clientX,u=o.clientY-e.clientY;l>120||c*c+u*u>40?s&&s.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,e,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,a){var o=this._getEventObj(e,t,n,r,i,a);if(r){o.shape=r,kb(r,e,o);for(var s=r.getParent();s;)s.emitDelegation(e,o),o.propagationStopped||_b(s,e,o),o.propagationPath.push(s),s=s.getParent()}else{kb(this.canvas,e,o)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),Ob=Bf(),Ib=Ob&&"firefox"===Ob.name;!function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");lp(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new Ab({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new wb(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");oE&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");oE&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(Ib&&!Uh(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Uh(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))}}(wE),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Lh(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t}}(wE),function(e){function t(t){return e.call(this,t)||this}Lh(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,a=e.maxY;if(t){var o=hE(t,[e.minX,e.minY]),s=hE(t,[e.maxX,e.minY]),l=hE(t,[e.minX,e.maxY]),c=hE(t,[e.maxX,e.maxY]);n=Math.min(o[0],s[0],l[0],c[0]),i=Math.max(o[0],s[0],l[0],c[0]),r=Math.min(o[1],s[1],l[1],c[1]),a=Math.max(o[1],s[1],l[1],c[1])}var u=this.attrs;if(u.shadowColor){var h=u.shadowBlur,p=void 0===h?0:h,d=u.shadowOffsetX,f=void 0===d?0:d,m=u.shadowOffsetY,g=void 0===m?0:m,v=n-p+f,y=i+p+f,x=r-p+g,E=a+p+g;n=Math.min(n,v),i=Math.max(i,y),r=Math.min(r,x),a=Math.max(a,E)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],a=(i=this.invertFromMatrix(i))[0],o=i[1],s=this._isInBBox(a,o);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(a,o)){if(this.isInShape(a,o))return!0;if(n&&n.isHit(a,o))return!0;if(r&&r.isHit(a,o))return!0}return!1}}(yE);var Mb=new Map;function Nb(e,t){Mb.set(e,t)}function Fb(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function Lb(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Pb(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function Rb(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=Pb(t,n.getCanvasBBox())),r&&(t=Pb(t,r.getCanvasBBox())),t}var Db=null;function Bb(e,t){var n=function(){if(!Db){var e=document.createElement("canvas");e.width=1,e.height=1,Db=e.getContext("2d")}return Db}(),r=0;if(Uh(e)||""===e)return r;(n.save(),n.font=t,lp(e)&&e.includes("\n"))?Xh(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width;return n.restore(),r}function zb(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||0===Math.sin(l)||bp(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(u-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}function Hb(e,t,n){var r=new iE(t,n);r.target=e,r.propagationPath.push(e),e.emitDelegation(t,r);for(var i=e.getParent();i;)i.emitDelegation(t,r),r.propagationPath.push(i),i=i.getParent()}Nb("rect",Fb),Nb("image",Fb),Nb("circle",Lb),Nb("marker",Lb),Nb("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}var o=Hg(n,r),s=o.x,l=o.y,c={minX:s,minY:l,maxX:s+o.width,maxY:l+o.height};return{x:(c=Rb(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),Nb("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}return Hg(n,r)})),Nb("text",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=function(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}(t));var l,c=Bb(i,s);if(c){var u=t.textAlign,h=t.textBaseline,p=function(e,t,n){var r=1;return lp(e)&&(r=e.split("\n").length),r>1?t*r+function(e,t){return t?t-e:.14*e}(t,n)*(r-1):t}(i,a,o),d={x:n,y:r-p};u&&("end"===u||"right"===u?d.x-=c:"center"===u&&(d.x-=c/2)),h&&("top"===h?d.y+=p:"middle"===h&&(d.y+=p/2)),l={x:d.x,y:d.y,width:c,height:p}}else l={x:n,y:r,width:0,height:0};return l})),Nb("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=(m=e[a]).currentPoint,s=m.params,l=m.prePoint,c=void 0;switch(m.command){case"Q":c=qg.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":c=tv.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var u=m.arcParams;c=iv(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(o[0]),r.push(o[1])}c&&(m.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&i.push(m)}n=n.filter((function(e){return!Number.isNaN(e)})),r=r.filter((function(e){return!Number.isNaN(e)}));var h=rp(n),p=rp(r),d=np(n),f=np(r);if(0===i.length)return{x:h,y:p,width:d-h,height:f-p};for(a=0;a<i.length;a++){var m;(o=(m=i[a]).currentPoint)[0]===h?h-=zb(m,t).xExtra:o[0]===d&&(d+=zb(m,t).xExtra),o[1]===p?p-=zb(m,t).yExtra:o[1]===f&&(f+=zb(m,t).yExtra)}return{x:h,y:p,width:d-h,height:f-p}}(e.get("segments")||Av(n),r),a=i.x,o=i.y,s={minX:a,minY:o,maxX:a+i.width,maxY:o+i.height};return{x:(s=Rb(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Nb("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,a),maxY:Math.max(r,a)};return{x:(o=Rb(e,o)).minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}})),Nb("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;return{x:n-i,y:r-a,width:2*i,height:2*a}}));var jb=[1,0,0,0,1,0,0,0,1];function Gb(e,t,n){return void 0===n&&(n=jb),t?am(n,[["t",-e.x,-e.y],["r",t],["t",e.x,e.y]]):null}function $b(e,t){return e.x||e.y?am(t||jb,[["t",e.x,e.y]]):null}function Yb(e,t){var n=[0,0];return function(e,t,n){var r=t[0],i=t[1];e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7]}(n,t,e),n}function Ub(e,t,n,r){if(t){var i=Gb({x:n,y:r},t,e.getMatrix());e.setMatrix(i)}}function Vb(e,t,n){var r=$b({x:t,y:n});e.attr("matrix",r)}function Wb(e){var t=0,n=0,r=0,i=0;return Ep(e)?t=n=r=i=e:Vh(e)&&(t=e[0],r=Uh(e[1])?e[0]:e[1],i=Uh(e[2])?e[0]:e[2],n=Uh(e[3])?r:e[3]),[t,r,i,n]}function Xb(e){for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t[n])}function qb(e){var t=e.start,n=e.end,r=Math.min(t.x,n.x),i=Math.min(t.y,n.y),a=Math.max(t.x,n.x),o=Math.max(t.y,n.y);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function Kb(e,t,n,r){var i=e+n,a=t+r;return{x:e,y:t,width:n,height:r,minX:e,minY:t,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function Qb(e,t,n){return(1-n)*e+t*n}function Zb(e,t,n){return{x:e.x+Math.cos(n)*t,y:e.y+Math.sin(n)*t}}var Jb=function(e,t,n){return void 0===n&&(n=Math.pow(Number.EPSILON,.5)),[e,t].includes(1/0)?Math.abs(e)===Math.abs(t):Math.abs(e-t)<n};function eC(e){var t,n,r,i,a,o=e.getClip(),s=o&&o.getBBox();if(e.isGroup()){var l=1/0,c=-1/0,u=1/0,h=-1/0,p=e.getChildren();p.length>0?Xh(p,(function(e){if(e.get("visible")){if(e.isGroup()&&0===e.get("children").length)return!0;var t=eC(e),n=e.applyToMatrix([t.minX,t.minY,1]),r=e.applyToMatrix([t.minX,t.maxY,1]),i=e.applyToMatrix([t.maxX,t.minY,1]),a=e.applyToMatrix([t.maxX,t.maxY,1]),o=Math.min(n[0],r[0],i[0],a[0]),s=Math.max(n[0],r[0],i[0],a[0]),p=Math.min(n[1],r[1],i[1],a[1]),d=Math.max(n[1],r[1],i[1],a[1]);o<l&&(l=o),s>c&&(c=s),p<u&&(u=p),d>h&&(h=d)}})):(l=0,c=0,u=0,h=0),t=Kb(l,u,c-l,h-u)}else t=e.getBBox();return s?(n=t,r=s,i=Math.max(n.minX,r.minX),a=Math.max(n.minY,r.minY),Kb(i,a,Math.min(n.maxX,r.maxX)-i,Math.min(n.maxY,r.maxY)-a)):t}function tC(e){return e+"px"}function nC(e,t,n,r){var i,a,o,s,l=r/(i=e,o=(a=t).x-i.x,s=a.y-i.y,Math.sqrt(o*o+s*s)),c=0;return"start"===n?c=0-l:"end"===n&&(c=1+l),{x:Qb(e.x,t.x,c),y:Qb(e.y,t.y,c)}}var rC={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},iC=function(e){function t(t){var n=e.call(this,t)||this;return n.initCfg(),n}return Lh(t,e),t.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},t.prototype.clear=function(){},t.prototype.update=function(e){var t=this,n=this.get("defaultCfg");Xh(e,(function(e,r){var i=e;t.get(r)!==e&&(Wh(e)&&n[r]&&(i=Yp({},n[r],e)),t.set(r,i))})),this.updateInner(e),this.afterUpdate(e)},t.prototype.updateInner=function(e){},t.prototype.afterUpdate=function(e){kp(e,"visible")&&(e.visible?this.show():this.hide()),kp(e,"capture")&&this.setCapture(e.capture)},t.prototype.getLayoutBBox=function(){return this.getBBox()},t.prototype.getLocationType=function(){return this.get("locationType")},t.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},t.prototype.setOffset=function(e,t){this.update({offsetX:e,offsetY:t})},t.prototype.setLocation=function(e){var t=Ph({},e);this.update(t)},t.prototype.getLocation=function(){var e=this,t={},n=this.get("locationType");return Xh(rC[n],(function(n){t[n]=e.get(n)})),t},t.prototype.isList=function(){return!1},t.prototype.isSlider=function(){return!1},t.prototype.init=function(){},t.prototype.initCfg=function(){var e=this;Xh(this.get("defaultCfg"),(function(t,n){var r=e.get(n);if(Wh(r)){var i=Yp({},t,r);e.set(n,i)}}))},t}(cE),aC=["visible","tip","delegateObject"],oC=["container","group","shapesMap","isRegister","isUpdating","destroyed"],sC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},t.prototype.remove=function(){this.clear(),this.get("group").remove()},t.prototype.clear=function(){this.get("group").clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},t.prototype.getChildComponentById=function(e){var t=this.getElementById(e);return t&&t.get("component")},t.prototype.getElementById=function(e){return this.get("shapesMap")[e]},t.prototype.getElementByLocalId=function(e){var t=this.getElementId(e);return this.getElementById(t)},t.prototype.getElementsByName=function(e){var t=[];return Xh(this.get("shapesMap"),(function(n){n.get("name")===e&&t.push(n)})),t},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateInner=function(e){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},t.prototype.render=function(){var e=this.get("offScreenGroup");e||(e=this.offScreenRender());var t=this.get("group");this.updateElements(e,t),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},t.prototype.show=function(){this.get("group").show(),this.set("visible",!0)},t.prototype.hide=function(){this.get("group").hide(),this.set("visible",!1)},t.prototype.setCapture=function(e){this.get("group").set("capture",e),this.set("capture",e)},t.prototype.destroy=function(){this.removeEvent(),this.remove(),e.prototype.destroy.call(this)},t.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},t.prototype.getLayoutBBox=function(){var e=this.get("group"),t=this.getInnerLayoutBBox(),n=e.getTotalMatrix();return n&&(t=function(e,t){var n=Yb(e,[t.minX,t.minY]),r=Yb(e,[t.maxX,t.minY]),i=Yb(e,[t.minX,t.maxY]),a=Yb(e,[t.maxX,t.maxY]),o=Math.min(n[0],r[0],i[0],a[0]),s=Math.max(n[0],r[0],i[0],a[0]),l=Math.min(n[1],r[1],i[1],a[1]),c=Math.max(n[1],r[1],i[1],a[1]);return{x:o,y:l,minX:o,minY:l,maxX:s,maxY:c,width:s-o,height:c-l}}(n,t)),t},t.prototype.on=function(e,t,n){return this.get("group").on(e,t,n),this},t.prototype.off=function(e,t){var n=this.get("group");return n&&n.off(e,t),this},t.prototype.emit=function(e,t){this.get("group").emit(e,t)},t.prototype.init=function(){e.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},t.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},t.prototype.delegateEmit=function(e,t){var n=this.get("group");t.target=n,n.emit(e,t),Hb(n,e,t)},t.prototype.createOffScreenGroup=function(){return new(this.get("group").getGroupBase())({delegateObject:this.getDelegateObject()})},t.prototype.applyOffset=function(){var e=this.get("offsetX"),t=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e,y:t})},t.prototype.initGroup=function(){var e=this.get("container");this.set("group",e.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},t.prototype.offScreenRender=function(){this.clearOffScreenCache();var e=this.createOffScreenGroup();return this.renderInner(e),this.set("offScreenGroup",e),this.set("offScreenBBox",eC(e)),e},t.prototype.addGroup=function(e,t){this.appendDelegateObject(e,t);var n=e.addGroup(t);return this.get("isRegister")&&this.registerElement(n),n},t.prototype.addShape=function(e,t){this.appendDelegateObject(e,t);var n=e.addShape(t);return this.get("isRegister")&&this.registerElement(n),n},t.prototype.addComponent=function(e,t){var n=t.id,r=t.component,i=Rh(t,["id","component"]),a=new r(Ph(Ph({},i),{id:n,container:e,updateAutoRender:this.get("updateAutoRender")}));return a.init(),a.render(),this.get("isRegister")&&this.registerElement(a.get("group")),a},t.prototype.initEvent=function(){},t.prototype.removeEvent=function(){this.get("group").off()},t.prototype.getElementId=function(e){return this.get("id")+"-"+this.get("name")+"-"+e},t.prototype.registerElement=function(e){var t=e.get("id");this.get("shapesMap")[t]=e},t.prototype.unregisterElement=function(e){var t=e.get("id");delete this.get("shapesMap")[t]},t.prototype.moveElementTo=function(e,t){var n=$b(t);e.attr("matrix",n)},t.prototype.addAnimation=function(e,t,n){var r=t.attr("opacity");Uh(r)&&(r=1),t.attr("opacity",0),t.animate({opacity:r},n)},t.prototype.removeAnimation=function(e,t,n){t.animate({opacity:0},n)},t.prototype.updateAnimation=function(e,t,n,r){t.animate(n,r)},t.prototype.updateElements=function(e,t){var n,r=this,i=this.get("animate"),a=this.get("animateOption");Xh(e.getChildren().slice(0),(function(e){var o,s,l=e.get("id"),c=r.getElementById(l),u=e.get("name");if(c)if(e.get("isComponent")){var h=e.get("component"),p=c.get("component"),d=td(h.cfg,(o=qh(h.cfg),void 0===(s=oC)&&(s=[]),jh(o,(function(e){return!Hh(s,e)}))));p.update(d),c.set("update_status","update")}else{var f=r.getReplaceAttrs(c,e);i&&a.update?r.updateAnimation(u,c,f,a.update):c.attr(f),e.isGroup()&&r.updateElements(e,c),Xh(aC,(function(t){c.set(t,e.get(t))})),function(e,t){if(e.getClip()||t.getClip()){var n=t.getClip();if(n){var r={type:n.get("type"),attrs:n.attr()};e.setClip(r)}else e.setClip(null)}}(c,e),n=c,c.set("update_status","update")}else{t.add(e);var m=t.getChildren();if(m.splice(m.length-1,1),n){var g=m.indexOf(n);m.splice(g+1,0,e)}else m.unshift(e);if(r.registerElement(e),e.set("update_status","add"),e.get("isComponent"))(h=e.get("component")).set("container",t);else e.isGroup()&&r.registerNewGroup(e);if(n=e,i){var v=r.get("isInit")?a.appear:a.enter;v&&r.addAnimation(u,e,v)}}}))},t.prototype.clearUpdateStatus=function(e){Xh(e.getChildren(),(function(e){e.set("update_status",null)}))},t.prototype.clearOffScreenCache=function(){var e=this.get("offScreenGroup");e&&e.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},t.prototype.getDelegateObject=function(){var e;return(e={})[this.get("name")]=this,e.component=this,e},t.prototype.appendDelegateObject=function(e,t){var n=e.get("delegateObject");t.delegateObject||(t.delegateObject={}),zp(t.delegateObject,n)},t.prototype.getReplaceAttrs=function(e,t){var n=e.attr(),r=t.attr();return Xh(n,(function(e,t){void 0===r[t]&&(r[t]=void 0)})),r},t.prototype.registerNewGroup=function(e){var t=this;Xh(e.getChildren(),(function(e){t.registerElement(e),e.set("update_status","add"),e.isGroup()&&t.registerNewGroup(e)}))},t.prototype.deleteElements=function(){var e=this,t=this.get("shapesMap"),n=[];Xh(t,(function(e,t){!e.get("update_status")||e.destroyed?n.push([t,e]):e.set("update_status",null)}));var r=this.get("animate"),i=this.get("animateOption");Xh(n,(function(n){var a=n[0],o=n[1];if(!o.destroyed){var s=o.get("name");if(r&&i.leave){var l=zp({callback:function(){e.removeElement(o)}},i.leave);e.removeAnimation(s,o,l)}else e.removeElement(o)}delete t[a]}))},t.prototype.removeElement=function(e){if(e.get("isGroup")){var t=e.get("component");t&&t.destroy()}e.remove()},t}(iC);function lC(e,t){return e.charCodeAt(t)>0&&e.charCodeAt(t)<128?1:2}function cC(e){if(e.length>400)return function(e){for(var t=e.map((function(e){var t=e.attr("text");return Uh(t)?"":""+t})),n=0,r=0,i=0;i<t.length;i+=1){for(var a=0,o=0;o<=t[i].length;o+=1){var s=t[i].charCodeAt(o);a+=s>=19968&&s<=40869?2:1}a>n&&(n=a,r=i)}return e[r].getBBox().width}(e);var t=0;return Xh(e,(function(e){var n=e.getBBox().width;t<n&&(t=n)})),t}function uC(e,t,n,r){var i;void 0===r&&(r="tail");var a=null!==(i=t.attr("text"))&&void 0!==i?i:"";if("tail"===r){var o=function(e,t,n,r){void 0===r&&(r="...");var i,a,o=fd(r,n),s=lp(e)?e:Ap(e),l=t,c=[];if(fd(e,n)<=t)return e;for(;i=s.substr(0,16),!((a=fd(i,n))+o>l&&a>l);)if(c.push(i),l-=a,!(s=s.substr(16)))return c.join("");for(;i=s.substr(0,1),!((a=fd(i,n))+o>l);)if(c.push(i),l-=a,!(s=s.substr(1)))return c.join("");return""+c.join("")+r}(a,n,td(t.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),"…");return a!==o?(t.attr("text",o),t.set("tip",a),!0):(t.set("tip",null),!1)}var s=function(e,t){var n=t.getCanvasBBox();return e?n.width:n.height}(e,t),l=function(e){for(var t=0,n=0;n<e.length;n++)t+=lC(e,n);return t}(a),c=!1;if(n<s){var u=Math.floor(n/s*l)-2,h=void 0;(h=u>=0?function(e,t,n){void 0===n&&(n="tail");var r=e.length,i="";if("tail"===n){for(var a=0,o=0;a<t&&a+lC(e,o)<=t;)i+=e[o],a+=lC(e,o),o++;i+="…"}else if("head"===n){for(a=0,o=r-1;a<t&&a+lC(e,o)<=t;)i+=e[o],a+=lC(e,o),o--;i="…"+i}else{for(var s="",l="",c=(a=0,0),u=r-1;a<t;){var h=lC(e,c),p=!1;h+a<=t&&(s+=e[c],c++,a+=h,p=!0);var d=lC(e,u);if(d+a<=t&&(l=e[u]+l,a+=d,u--,p=!0),!p)break}i=s+"…"+l}return i}(a,u,r):"…")&&(t.attr("text",h),c=!0)}return c?t.set("tip",a):t.set("tip",null),c}function hC(e,t){var n=t.x,r=t.y,i=t.content,a=t.style,o=t.id,s=t.name,l=t.rotate,c=t.maxLength,u=t.autoEllipsis,h=t.isVertical,p=t.ellipsisPosition,d=t.background,f=e.addGroup({id:o+"-group",name:s+"-group",attrs:{x:n,y:r}}),m=f.addShape({type:"text",id:o,name:s,attrs:Ph({x:0,y:0,text:i},a)}),g=Wb(Zp(d,"padding",0));c&&u&&uC(!h,m,c-(g[1]+g[3]),p);if(d){var v=Zp(d,"style",{}),y=m.getCanvasBBox(),x=y.minX,E=y.minY,b=y.width,C=y.height;f.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:Ph({x:x-g[3],y:E-g[0],width:b+g[1]+g[3],height:C+g[0]+g[2]},v)}).toBack()}Vb(f,n,r),Ub(f,l,n,r)}var pC={fontFamily:'\n  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"',textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},dC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:pC.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:pC.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:pC.lineColor,lineWidth:1}}}})},t.prototype.renderInner=function(e){this.renderLine(e),this.get("text")&&this.renderLabel(e)},t.prototype.renderLine=function(e){var t=this.get("start"),n=this.get("end"),r=this.get("style");this.addShape(e,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:Ph({x1:t.x,y1:t.y,x2:n.x,y2:n.y},r)})},t.prototype.getLabelPoint=function(e,t,n){var r;return((r="start"===n?0:"center"===n?.5:lp(n)&&-1!==n.indexOf("%")?parseInt(n,10)/100:Ep(n)?n:1)>1||r<0)&&(r=1),{x:Qb(e.x,t.x,r),y:Qb(e.y,t.y,r)}},t.prototype.renderLabel=function(e){var t=this.get("text"),n=this.get("start"),r=this.get("end"),i=t.position,a=t.content,o=t.style,s=t.offsetX,l=t.offsetY,c=t.autoRotate,u=t.maxLength,h=t.autoEllipsis,p=t.ellipsisPosition,d=t.background,f=t.isVertical,m=void 0!==f&&f,g=this.getLabelPoint(n,r,i),v=g.x+s,y=g.y+l,x={id:this.getElementId("line-text"),name:"annotation-line-text",x:v,y:y,content:a,style:o,maxLength:u,autoEllipsis:h,ellipsisPosition:p,background:d,isVertical:m};if(c){var E=[r.x-n.x,r.y-n.y];x.rotate=Math.atan2(E[1],E[0])}hC(e,x)},t}(sC),fC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:pC.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:pC.fontFamily}}})},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.renderInner=function(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get("content"),a=this.get("style");hC(e,{id:this.getElementId("text"),name:this.get("name")+"-text",x:n,y:r,content:i,style:a,maxLength:this.get("maxLength"),autoEllipsis:this.get("autoEllipsis"),isVertical:this.get("isVertical"),ellipsisPosition:this.get("ellipsisPosition"),background:this.get("background"),rotate:this.get("rotate")})},t.prototype.resetLocation=function(){var e=this.getElementByLocalId("text-group");if(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get("rotate");Vb(e,n,r),Ub(e,i,n,r)}},t}(sC),mC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,style:{stroke:"#999",lineWidth:1}})},t.prototype.renderInner=function(e){this.renderArc(e)},t.prototype.getArcPath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,a=Zb(t,n,r),o=Zb(t,n,i),s=i-r>Math.PI?1:0,l=[["M",a.x,a.y]];if(i-r==2*Math.PI){var c=Zb(t,n,r+Math.PI);l.push(["A",n,n,0,s,1,c.x,c.y]),l.push(["A",n,n,0,s,1,o.x,o.y])}else l.push(["A",n,n,0,s,1,o.x,o.y]);return l},t.prototype.renderArc=function(e){var t=this.getArcPath(),n=this.get("style");this.addShape(e,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:Ph({path:t},n)})},t}(sC),gC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:pC.regionColor,opacity:.4}}})},t.prototype.renderInner=function(e){this.renderRegion(e)},t.prototype.renderRegion=function(e){var t=this.get("start"),n=this.get("end"),r=this.get("style"),i=qb({start:t,end:n});this.addShape(e,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:Ph({x:i.x,y:i.y,width:i.width,height:i.height},r)})},t}(sC),vC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},t.prototype.renderInner=function(e){this.renderImage(e)},t.prototype.getImageAttrs=function(){var e=this.get("start"),t=this.get("end"),n=this.get("style"),r=qb({start:e,end:t}),i=this.get("src");return Ph({x:r.x,y:r.y,img:i,width:r.width,height:r.height},n)},t.prototype.renderImage=function(e){this.addShape(e,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},t}(sC),yC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:pC.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:pC.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:pC.fontFamily}}}})},t.prototype.renderInner=function(e){Zp(this.get("line"),"display")&&this.renderLine(e),Zp(this.get("text"),"display")&&this.renderText(e),Zp(this.get("point"),"display")&&this.renderPoint(e),this.get("autoAdjust")&&this.autoAdjust(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},t.prototype.renderPoint=function(e){var t=this.getShapeAttrs().point;this.addShape(e,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:t})},t.prototype.renderLine=function(e){var t=this.getShapeAttrs().line;this.addShape(e,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:t})},t.prototype.renderText=function(e){var t=this.getShapeAttrs().text,n=t.x,r=t.y,i=t.text,a=Rh(t,["x","y","text"]),o=this.get("text"),s=o.background,l=o.maxLength,c=o.autoEllipsis,u=o.isVertival,h=o.ellipsisPosition;hC(e,{x:n,y:r,id:this.getElementId("text"),name:"annotation-text",content:i,style:a,background:s,maxLength:l,autoEllipsis:c,isVertival:u,ellipsisPosition:h})},t.prototype.autoAdjust=function(e){var t=this.get("direction"),n=this.get("x"),r=this.get("y"),i=Zp(this.get("line"),"length",0),a=this.get("coordinateBBox"),o=e.getBBox(),s=o.minX,l=o.maxX,c=o.minY,u=o.maxY,h=e.findById(this.getElementId("text-group")),p=e.findById(this.getElementId("text")),d=e.findById(this.getElementId("line"));if(a){if(h){if(n+s<=a.minX){var f=a.minX-(n+s);Vb(h,h.attr("x")+f,h.attr("y"))}if(n+l>=a.maxX){f=n+l-a.maxX;Vb(h,h.attr("x")-f,h.attr("y"))}}if("upward"===t&&r+c<=a.minY||"upward"!==t&&r+u>=a.maxY){var m=void 0,g=void 0;"upward"===t&&r+c<=a.minY?(m="top",g=1):(m="bottom",g=-1),p.attr("textBaseline",m),d&&d.attr("path",[["M",0,0],["L",0,i*g]]),Vb(h,h.attr("x"),(i+2)*g)}}},t.prototype.getShapeAttrs=function(){var e=Zp(this.get("line"),"display"),t=Zp(this.get("point"),"style",{}),n=Zp(this.get("line"),"style",{}),r=Zp(this.get("text"),"style",{}),i=this.get("direction"),a=e?Zp(this.get("line"),"length",0):0,o="upward"===i?-1:1;return{point:Ph({x:0,y:0},t),line:Ph({path:[["M",0,0],["L",0,a*o]]},n),text:Ph({x:0,y:(a+2)*o,text:Zp(this.get("text"),"content",""),textBaseline:"upward"===i?"bottom":"top"},r)}},t}(sC),xC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:pC.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:pC.textColor,fontFamily:pC.fontFamily}}}})},t.prototype.renderInner=function(e){var t=Zp(this.get("region"),"style",{});Zp(this.get("text"),"style",{});var n=this.get("lineLength")||0,r=this.get("points");if(r.length){var i=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=Math.min.apply(Math,t),i=Math.min.apply(Math,n),a=Math.max.apply(Math,t),o=Math.max.apply(Math,n);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}(r),a=[];a.push(["M",r[0].x,i.minY-n]),r.forEach((function(e){a.push(["L",e.x,e.y])})),a.push(["L",r[r.length-1].x,r[r.length-1].y-n]),this.addShape(e,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:Ph({path:a},t)}),hC(e,Ph({id:this.getElementId("text"),name:"annotation-text",x:(i.minX+i.maxX)/2,y:i.minY-n},this.get("text")))}},t}(sC),EC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},t.prototype.renderInner=function(e){var t=this,n=this.get("start"),r=this.get("end"),i=this.addGroup(e,{id:this.getElementId("region-filter"),capture:!1});Xh(this.get("shapes"),(function(e,n){var r=e.get("type"),a=Hp(e.attr());t.adjustShapeAttrs(a),t.addShape(i,{id:t.getElementId("shape-"+r+"-"+n),capture:!1,type:r,attrs:a})}));var a=qb({start:n,end:r});i.setClip({type:"rect",attrs:{x:a.minX,y:a.minY,width:a.width,height:a.height}})},t.prototype.adjustShapeAttrs=function(e){var t=this.get("color");e.fill&&(e.fill=e.fillStyle=t),e.stroke=e.strokeStyle=t},t}(sC),bC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"annotation",type:"shape",draw:od})},t.prototype.renderInner=function(e){var t=this.get("render");Yh(t)&&t(e)},t}(sC),CC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.show=function(){this.get("container").style.display="",this.set("visible",!0)},t.prototype.hide=function(){this.get("container").style.display="none",this.set("visible",!1)},t.prototype.setCapture=function(e){var t=e?"auto":"none";this.getContainer().style.pointerEvents=t,this.set("capture",e)},t.prototype.getBBox=function(){var e=this.getContainer();return Kb(parseFloat(e.style.left)||0,parseFloat(e.style.top)||0,e.clientWidth,e.clientHeight)},t.prototype.clear=function(){Xb(this.get("container"))},t.prototype.destroy=function(){this.removeEvent(),this.removeDom(),e.prototype.destroy.call(this)},t.prototype.init=function(){e.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},t.prototype.initCapture=function(){this.setCapture(this.get("capture"))},t.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},t.prototype.initDom=function(){},t.prototype.initContainer=function(){var e=this.get("container");if(Uh(e)){e=this.createDom();var t=this.get("parent");lp(t)&&(t=document.getElementById(t),this.set("parent",t)),t.appendChild(e),this.set("container",e)}else lp(e)&&(e=document.getElementById(e),this.set("container",e));this.get("parent")||this.set("parent",e.parentNode)},t.prototype.resetStyles=function(){var e=this.get("domStyles"),t=this.get("defaultStyles");e=e?Yp({},t,e):t,this.set("domStyles",e)},t.prototype.applyStyles=function(){var e=this.get("domStyles");if(e){var t=this.getContainer();this.applyChildrenStyles(t,e);var n,r=this.get("containerClassName");if(r&&(n=r,t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))))zd(t,e[r])}},t.prototype.applyChildrenStyles=function(e,t){Xh(t,(function(t,n){Xh(e.getElementsByClassName(n),(function(e){zd(e,t)}))}))},t.prototype.applyStyle=function(e,t){zd(t,this.get("domStyles")[e])},t.prototype.createDom=function(){return Pd(this.get("containerTpl"))},t.prototype.initEvent=function(){},t.prototype.removeDom=function(){var e=this.get("container");e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.removeEvent=function(){},t.prototype.updateInner=function(e){kp(e,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},t.prototype.resetPosition=function(){},t}(iC),TC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},t.prototype.render=function(){var e=this.getContainer(),t=this.get("html");Xb(e);var n=Yh(t)?t(e):t;Dp(n)?e.appendChild(n):lp(n)&&e.appendChild(Pd(n)),this.resetPosition()},t.prototype.resetPosition=function(){var e=this.getContainer(),t=this.getLocation(),n=t.x,r=t.y,i=this.get("alignX"),a=this.get("alignY"),o=this.get("offsetX"),s=this.get("offsetY"),l=Bd(e),c=Dd(e),u={x:n,y:r};"middle"===i?u.x-=Math.round(l/2):"right"===i&&(u.x-=Math.round(l)),"middle"===a?u.y-=Math.round(c/2):"bottom"===a&&(u.y-=Math.round(c)),o&&(u.x+=o),s&&(u.y+=s),zd(e,{position:"absolute",left:u.x+"px",top:u.y+"px",zIndex:this.get("zIndex")})},t}(CC),wC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:dC,Text:fC,Arc:mC,Region:gC,Image:vC,DataMarker:yC,DataRegion:xC,RegionFilter:EC,Shape:bC,Html:TC});function SC(e,t,n){var r=t+"Style",i=null;return Xh(n,(function(t,n){e[n]&&t[r]&&(i||(i={}),zp(i,t[r]))})),i}var kC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:pC.lineColor}},tickLine:{style:{lineWidth:1,stroke:pC.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:pC.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:pC.textColor,fontFamily:pC.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:pC.textColor,textBaseline:"middle",fontFamily:pC.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:pC.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},t.prototype.renderInner=function(e){this.get("line")&&this.drawLine(e),this.drawTicks(e),this.get("title")&&this.drawTitle(e)},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("ticks")},t.prototype.setItems=function(e){this.update({ticks:e})},t.prototype.updateItem=function(e,t){zp(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("label-group");e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n,this.updateTickStates(e)},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get("tickStates"),n=[];return Xh(t,(function(t,r){e[r]&&n.push(r)})),n},t.prototype.clearItemsState=function(e){var t=this;Xh(this.getItemsByState(e),(function(n){t.setItemState(n,e,!1)}))},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return jh(n,(function(n){return t.hasState(n,e)}))},t.prototype.getSidePoint=function(e,t){var n=this.getSideVector(t,e);return{x:e.x+n[0],y:e.y+n[1]}},t.prototype.getTextAnchor=function(e){var t;return bp(e[0],0)?t="center":e[0]>0?t="start":e[0]<0&&(t="end"),t},t.prototype.getTextBaseline=function(e){var t;return bp(e[1],0)?t="middle":e[1]>0?t="top":e[1]<0&&(t="bottom"),t},t.prototype.processOverlap=function(e){},t.prototype.drawLine=function(e){var t=this.getLinePath(),n=this.get("line");this.addShape(e,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:zp({path:t},n.style)})},t.prototype.getTickLineItems=function(e){var t=this,n=[],r=this.get("tickLine"),i=r.alignTick,a=r.length,o=1;return e.length>=2&&(o=e[1].value-e[0].value),Xh(e,(function(e){var r=e.point;i||(r=t.getTickPoint(e.value-o/2));var s=t.getSidePoint(r,a);n.push({startPoint:r,tickValue:e.value,endPoint:s,tickId:e.id,id:"tickline-"+e.id})})),n},t.prototype.getSubTickLineItems=function(e){var t=[],n=this.get("subTickLine"),r=n.count,i=e.length;if(i>=2)for(var a=0;a<i-1;a++)for(var o=e[a],s=e[a+1],l=0;l<r;l++){var c=(l+1)/(r+1),u=(1-c)*o.tickValue+c*s.tickValue,h=this.getTickPoint(u),p=this.getSidePoint(h,n.length);t.push({startPoint:h,endPoint:p,tickValue:u,id:"sub-"+o.id+"-"+l})}return t},t.prototype.getTickLineAttrs=function(e,t,n,r){var i=this.get(t).style,a={points:[e.startPoint,e.endPoint]},o=Zp(this.get("theme"),["tickLine","style"],{});i=Yh(i)?zp({},o,i(a,n,r)):i;var s=e.startPoint,l=e.endPoint;return Ph({x1:s.x,y1:s.y,x2:l.x,y2:l.y},i)},t.prototype.drawTick=function(e,t,n,r,i){this.addShape(t,{type:"line",id:this.getElementId(e.id),name:"axis-"+n,attrs:this.getTickLineAttrs(e,n,r,i)})},t.prototype.drawTickLines=function(e){var t=this,n=this.get("ticks"),r=this.get("subTickLine"),i=this.getTickLineItems(n),a=this.addGroup(e,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),o=this.get("tickLine");if(Xh(i,(function(n,r){if(o.displayWithLabel){var s=t.getElementId("label-"+n.tickId);e.findById(s)&&t.drawTick(n,a,"tickLine",r,i)}else t.drawTick(n,a,"tickLine",r,i)})),r){var s=this.getSubTickLineItems(i);Xh(s,(function(e,n){t.drawTick(e,a,"subTickLine",n,s)}))}},t.prototype.processTicks=function(){var e=this;Xh(this.get("ticks"),(function(t){t.point=e.getTickPoint(t.value),Uh(t.id)&&(t.id=t.name)}))},t.prototype.drawTicks=function(e){var t=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(e),this.get("tickLine")&&this.drawTickLines(e),Xh(this.get("ticks"),(function(n){t.applyTickStates(n,e)}))},t.prototype.optimizeTicks=function(){var e=this.get("optimize"),t=this.get("ticks");if(e&&e.enable&&e.threshold>0){var n=sd(t);if(n>e.threshold){var r=Math.ceil(n/e.threshold),i=t.filter((function(e,t){return t%r==0}));this.set("ticks",i),this.set("originalTicks",t)}}},t.prototype.getLabelAttrs=function(e,t,n){var r=this.get("label"),i=r.offset,a=r.offsetX,o=r.offsetY,s=r.rotate,l=r.formatter,c=this.getSidePoint(e.point,i),u=this.getSideVector(i,c),h=l?l(e.name,e,t):e.name,p=r.style;p=Yh(p)?Zp(this.get("theme"),["label","style"],{}):p;var d=zp({x:c.x+a,y:c.y+o,text:h,textAlign:this.getTextAnchor(u),textBaseline:this.getTextBaseline(u)},p);return s&&(d.matrix=Gb(c,s)),d},t.prototype.drawLabels=function(e){var t=this,n=this.get("ticks"),r=this.addGroup(e,{name:"axis-label-group",id:this.getElementId("label-group")});Xh(n,(function(e,i){t.addShape(r,{type:"text",name:"axis-label",id:t.getElementId("label-"+e.id),attrs:t.getLabelAttrs(e,i,n),delegateObject:{tick:e,item:e,index:i}})})),this.processOverlap(r);var i=r.getChildren(),a=Zp(this.get("theme"),["label","style"],{}),o=this.get("label"),s=o.style,l=o.formatter;if(Yh(s)){var c=i.map((function(e){return Zp(e.get("delegateObject"),"tick")}));Xh(i,(function(e,t){var n=e.get("delegateObject").tick,r=l?l(n.name,n,t):n.name,i=zp({},a,s(r,t,c));e.attr(i)}))}},t.prototype.getTitleAttrs=function(){var e=this.get("title"),t=e.style,n=e.position,r=e.offset,i=e.spacing,a=void 0===i?0:i,o=e.autoRotate,s=t.fontSize,l=.5;"start"===n?l=0:"end"===n&&(l=1);var c=this.getTickPoint(l),u=this.getSidePoint(c,r||a+s/2),h=zp({x:u.x,y:u.y,text:e.text},t),p=e.rotate,d=p;if(Uh(p)&&o){d=om(this.getAxisVector(c),[1,0],!0)}if(d){var f=Gb(u,d);h.matrix=f}return h},t.prototype.drawTitle=function(e){this.addShape(e,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},t.prototype.applyTickStates=function(e,t){if(this.getItemStates(e).length){var n=this.get("tickStates"),r=this.getElementId("label-"+e.id),i=t.findById(r);if(i){var a=SC(e,"label",n);a&&i.attr(a)}var o=this.getElementId("tickline-"+e.id),s=t.findById(o);if(s){var l=SC(e,"tickLine",n);l&&s.attr(l)}}},t.prototype.updateTickStates=function(e){var t=this.getItemStates(e),n=this.get("tickStates"),r=this.get("label"),i=this.getElementByLocalId("label-"+e.id),a=this.get("tickLine"),o=this.getElementByLocalId("tickline-"+e.id);if(t.length){if(i){var s=SC(e,"label",n);s&&i.attr(s)}if(o){var l=SC(e,"tickLine",n);l&&o.attr(l)}}else i&&i.attr(r.style),o&&o.attr(a.style)},t}(sC);function _C(e,t,n,r){var i=t.getChildren(),a=!1;return Xh(i,(function(t){var i=uC(e,t,n,r);a=a||i})),a}function AC(e,t,n){return _C(e,t,n,"tail")}var OC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return AC},ellipsisHead:function(e,t,n){return _C(e,t,n,"head")},ellipsisTail:AC,ellipsisMiddle:function(e,t,n){return _C(e,t,n,"middle")}});function IC(e){return(function(e){var t=e.attr("matrix");return t&&1!==t[0]}(e)?function(e){var t=[0,0,0];return $f(t,[1,0,0],e),Math.atan2(t[1],t[0])}(e.attr("matrix")):0)%360}function MC(e,t,n,r){var i=!1,a=IC(t),o=e?Math.abs(n.attr("y")-t.attr("y")):Math.abs(n.attr("x")-t.attr("x")),s=(e?n.attr("y")>t.attr("y"):n.attr("x")>t.attr("x"))?t.getBBox():n.getBBox();if(e){var l=Math.abs(Math.cos(a));i=Jb(l,0,Math.PI/180)?s.width+r>o:s.height/l+r>o}else{l=Math.abs(Math.sin(a));i=Jb(l,0,Math.PI/180)?s.width+r>o:s.height/l+r>o}return i}function NC(e,t,n,r){var i=(null==r?void 0:r.minGap)||0,a=t.getChildren().slice().filter((function(e){return e.get("visible")}));if(!a.length)return!1;var o=!1;n&&a.reverse();for(var s=a.length,l=a[0],c=1;c<s;c++){var u=a[c];u.getBBox(),MC(e,l,u,i)?(u.hide(),o=!0):l=u}return o}function FC(e,t,n){var r=(null==n?void 0:n.minGap)||0,i=t.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],s=o.getBBox(),l=i[1],c=i.length,u=IC(o),h=e?Math.abs(l.attr("y")-o.attr("y")):Math.abs(l.attr("x")-o.attr("x")),p=0;if(e){var d=Math.abs(Math.cos(u));if(Jb(d,0,Math.PI/180))p=(cC(i)+r)/h;else p=(s.height/d+r)/h}else{d=Math.abs(Math.sin(u));if(Jb(d,0,Math.PI/180))p=(cC(i)+r)/h;else p=(s.height/d+r)/h}if(p>1){p=Math.ceil(p);for(var f=0;f<c;f++)f%p!=0&&(i[f].hide(),a=!0)}return a}function LC(e,t,n,r){var i=FC(e,t,r);return NC(e,t,!1)&&(i=!0),i}var PC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return LC},reserveFirst:function(e,t,n,r){return NC(e,t,!1,r)},reserveLast:function(e,t,n,r){return NC(e,t,!0,r)},reserveBoth:function(e,t,n,r){var i=(null==r?void 0:r.minGap)||0,a=t.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,s=a.length,l=a[0],c=a[s-1],u=l,h=1;h<s-1;h++){var p=a[h];p.getBBox(),MC(e,u,p,i)?(p.hide(),o=!0):u=p}return MC(e,u,c,i)&&(u.hide(),o=!0),o},equidistance:LC,equidistanceWithReverseBoth:function(e,t,n,r){var i=t.getChildren().slice(),a=FC(e,t,r);if(i.length>2){var o=i[0],s=i[i.length-1];o.get("visible")||(o.show(),NC(e,t,!1,r)&&(a=!0)),s.get("visible")||(s.show(),NC(e,t,!0,r)&&(a=!0))}return a}});function RC(e,t,n,r){var i=t.getChildren();if(!i.length)return!1;if(!e&&i.length<2)return!1;var a=cC(i),o=!1;e?o=!!n&&a>n:o=a>Math.abs(i[1].attr("x")-i[0].attr("x"));o&&function(e,t){Xh(e,(function(e){var n=Gb({x:e.attr("x"),y:e.attr("y")},t);e.attr("matrix",n)}))}(i,r(n,a));return o}function DC(e,t,n,r){return RC(e,t,n,(function(){return Ep(r)?r:e?pC.verticalAxisRotate:pC.horizontalAxisRotate}))}var BC,zC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return DC},fixedAngle:DC,unfixedAngle:function(e,t,n){return RC(e,t,n,(function(t,n){if(!t)return e?pC.verticalAxisRotate:pC.horizontalAxisRotate;if(e)return-Math.acos(t/n);var r=0;return(t>n||(r=Math.asin(t/n))>Math.PI/4)&&(r=Math.PI/4),r}))}}),HC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",autoHide:PC,autoRotate:zC,autoEllipsis:OC}),jC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getLinePath=function(){var e=this.get("start"),t=this.get("end"),n=[];return n.push(["M",e.x,e.y]),n.push(["L",t.x,t.y]),n},t.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),n=this.get("end"),r=e.prototype.getInnerLayoutBBox.call(this),i=Math.min(t.x,n.x,r.x),a=Math.min(t.y,n.y,r.y),o=Math.max(t.x,n.x,r.maxX),s=Math.max(t.y,n.y,r.maxY);return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},t.prototype.isVertical=function(){var e=this.get("start"),t=this.get("end");return bp(e.x,t.x)},t.prototype.isHorizontal=function(){var e=this.get("start"),t=this.get("end");return bp(e.y,t.y)},t.prototype.getTickPoint=function(e){var t=this.get("start"),n=this.get("end"),r=n.x-t.x,i=n.y-t.y;return{x:t.x+r*e,y:t.y+i*e}},t.prototype.getSideVector=function(e){var t=Qf([0,0],this.getAxisVector()),n=this.get("verticalFactor");return Xf([0,0],[t[1],-1*t[0]],e*n)},t.prototype.getAxisVector=function(){var e=this.get("start"),t=this.get("end");return[t.x-e.x,t.y-e.y]},t.prototype.processOverlap=function(e){var t=this,n=this.isVertical(),r=this.isHorizontal();if(n||r){var i=this.get("label"),a=this.get("title"),o=this.get("verticalLimitLength"),s=i.offset,l=o,c=0,u=0;if(a&&(c=a.style.fontSize,u=a.spacing),l&&(l=l-s-u-c),Xh(this.get("overlapOrder"),(function(n){i[n]&&t.canProcessOverlap(n)&&t.autoProcessOverlap(n,i[n],e,l)})),a&&Uh(a.offset)){var h=e.getCanvasBBox(),p=n?h.width:h.height;a.offset=s+p+u+c/2}}},t.prototype.canProcessOverlap=function(e){var t=this.get("label");return"autoRotate"!==e||Uh(t.rotate)},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,a=this.isVertical(),o=!1,s=HC[e];if(!0===t)this.get("label"),o=s.getDefault()(a,n,r);else if(Yh(t))o=t(a,n,r);else if(Wh(t)){var l=t;s[l.type]&&(o=s[l.type](a,n,r,l.cfg))}else s[t]&&(o=s[t](a,n,r));if("autoRotate"===e){if(o){var c=n.getChildren(),u=this.get("verticalFactor");Xh(c,(function(e){if("center"===e.attr("textAlign")){var t=u>0?"end":"start";e.attr("textAlign",t)}}))}}else if("autoHide"===e){Xh(n.getChildren().slice(0),(function(e){e.get("visible")||(i.get("isRegister")&&i.unregisterElement(e),e.remove())}))}},t}(kC),GC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},t.prototype.getLinePath=function(){var e=this.get("center"),t=e.x,n=e.y,r=this.get("radius"),i=r,a=this.get("startAngle"),o=this.get("endAngle"),s=[];if(Math.abs(o-a)===2*Math.PI)s=[["M",t,n-i],["A",r,i,0,1,1,t,n+i],["A",r,i,0,1,1,t,n-i],["Z"]];else{var l=this.getCirclePoint(a),c=this.getCirclePoint(o),u=Math.abs(o-a)>Math.PI?1:0,h=a>o?0:1;s=[["M",t,n],["L",l.x,l.y],["A",r,i,0,u,h,c.x,c.y],["L",t,n]]}return s},t.prototype.getTickPoint=function(e){var t=this.get("startAngle"),n=t+(this.get("endAngle")-t)*e;return this.getCirclePoint(n)},t.prototype.getSideVector=function(e,t){var n=this.get("center"),r=[t.x-n.x,t.y-n.y];return Xf(r,r,this.get("verticalFactor")*e/Kf(r)),r},t.prototype.getAxisVector=function(e){var t=this.get("center"),n=[e.x-t.x,e.y-t.y];return[n[1],-1*n[0]]},t.prototype.getCirclePoint=function(e,t){var n=this.get("center");return t=t||this.get("radius"),{x:n.x+Math.cos(e)*t,y:n.y+Math.sin(e)*t}},t.prototype.canProcessOverlap=function(e){var t=this.get("label");return"autoRotate"!==e||Uh(t.rotate)},t.prototype.processOverlap=function(e){var t=this,n=this.get("label"),r=this.get("title"),i=this.get("verticalLimitLength"),a=n.offset,o=i,s=0,l=0;if(r&&(s=r.style.fontSize,l=r.spacing),o&&(o=o-a-l-s),Xh(this.get("overlapOrder"),(function(r){n[r]&&t.canProcessOverlap(r)&&t.autoProcessOverlap(r,n[r],e,o)})),r&&Uh(r.offset)){var c=e.getCanvasBBox().height;r.offset=a+c+l+s/2}},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,a=!1,o=HC[e];if(r>0)if(!0===t)a=o.getDefault()(!1,n,r);else if(Yh(t))a=t(!1,n,r);else if(Wh(t)){var s=t;o[s.type]&&(a=o[s.type](!1,n,r,s.cfg))}else o[t]&&(a=o[t](!1,n,r));if("autoRotate"===e){if(a){var l=n.getChildren(),c=this.get("verticalFactor");Xh(l,(function(e){if("center"===e.attr("textAlign")){var t=c>0?"end":"start";e.attr("textAlign",t)}}))}}else if("autoHide"===e){Xh(n.getChildren().slice(0),(function(e){e.get("visible")||(i.get("isRegister")&&i.unregisterElement(e),e.remove())}))}},t}(kC),$C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:pC.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:pC.textColor,textAlign:"center",textBaseline:"middle",fontFamily:pC.fontFamily}},textBackground:{padding:5,style:{stroke:pC.lineColor}}}})},t.prototype.renderInner=function(e){this.get("line")&&this.renderLine(e),this.get("text")&&(this.renderText(e),this.renderBackground(e))},t.prototype.renderText=function(e){var t=this.get("text"),n=t.style,r=t.autoRotate,i=t.content;if(!Uh(i)){var a=this.getTextPoint(),o=null;if(r)o=Gb(a,this.getRotateAngle());this.addShape(e,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:Ph(Ph(Ph({},a),{text:i,matrix:o}),n)})}},t.prototype.renderLine=function(e){var t=this.getLinePath(),n=this.get("line").style;this.addShape(e,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:Ph({path:t},n)})},t.prototype.renderBackground=function(e){var t=this.getElementId("text"),n=e.findById(t),r=this.get("textBackground");if(r&&n){var i=n.getBBox(),a=Wb(r.padding),o=r.style;this.addShape(e,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:Ph({x:i.x-a[3],y:i.y-a[0],width:i.width+a[1]+a[3],height:i.height+a[0]+a[2],matrix:n.attr("matrix")},o)}).toBack()}},t}(sC),YC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text").position,i=Math.atan2(n.y-t.y,n.x-t.x);return"start"===r?i-Math.PI/2:i+Math.PI/2},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text");return nC(t,n,r.position,r.offset)},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.start,n=e.end;return[["M",t.x,t.y],["L",n.x,n.y]]},t}($C),UC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.startAngle,n=e.endAngle;return"start"===this.get("text").position?t+Math.PI/2:n-Math.PI/2},t.prototype.getTextPoint=function(){var e=this.get("text"),t=e.position,n=e.offset,r=this.getLocation(),i=r.center,a=r.radius,o=r.startAngle,s=r.endAngle,l="start"===t?o:s,c=this.getRotateAngle()-Math.PI,u=Zb(i,a,l),h=Math.cos(c)*n,p=Math.sin(c)*n;return{x:u.x+h,y:u.y+p}},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,a=null;if(i-r==2*Math.PI){var o=t.x,s=t.y;a=[["M",o,s-n],["A",n,n,0,1,1,o,s+n],["A",n,n,0,1,1,o,s-n],["Z"]]}else{var l=Zb(t,n,r),c=Zb(t,n,i),u=Math.abs(i-r)>Math.PI?1:0,h=r>i?0:1;a=[["M",l.x,l.y],["A",n,n,0,u,h,c.x,c.y]]}return a},t}($C),VC=((BC={})["g2-crosshair"]={position:"relative"},BC["g2-crosshair-line"]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},BC["g2-crosshair-text"]={position:"absolute",color:pC.textColor,fontFamily:pC.fontFamily},BC),WC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="g2-crosshair"></div>',crosshairTpl:'<div class="g2-crosshair-line"></div>',textTpl:'<span class="g2-crosshair-text">{content}</span>',domStyles:null,containerClassName:"g2-crosshair",defaultStyles:VC,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},t.prototype.render=function(){this.resetText(),this.resetPosition()},t.prototype.initCrossHair=function(){var e=this.getContainer(),t=Pd(this.get("crosshairTpl"));e.appendChild(t),this.applyStyle("g2-crosshair-line",t),this.set("crosshairEl",t)},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text");return nC(t,n,r.position,r.offset)},t.prototype.resetText=function(){var e=this.get("text"),t=this.get("textEl");if(e){var n=e.content;if(!t){var r=this.getContainer();t=Pd(Ip(this.get("textTpl"),e)),r.appendChild(t),this.applyStyle("g2-crosshair-text",t),this.set("textEl",t)}t.innerHTML=n}else t&&t.remove()},t.prototype.isVertical=function(e,t){return e.x===t.x},t.prototype.resetPosition=function(){var e=this.get("crosshairEl");e||(this.initCrossHair(),e=this.get("crosshairEl"));var t=this.get("start"),n=this.get("end"),r=Math.min(t.x,n.x),i=Math.min(t.y,n.y);this.isVertical(t,n)?zd(e,{width:"1px",height:tC(Math.abs(n.y-t.y))}):zd(e,{height:"1px",width:tC(Math.abs(n.x-t.x))}),zd(e,{top:tC(i),left:tC(r)}),this.alignText()},t.prototype.alignText=function(){var e=this.get("textEl");if(e){var t=this.get("text").align,n=e.clientWidth,r=this.getTextPoint();switch(t){case"center":r.x=r.x-n/2;break;case"right":r.x=r.x-n}zd(e,{top:tC(r.y),left:tC(r.x)})}},t.prototype.updateInner=function(t){kp(t,"text")&&this.resetText(),e.prototype.updateInner.call(this,t)},t}(CC),XC=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:YC,Circle:UC,Base:$C,Html:WC}),qC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:pC.lineColor}}}})},t.prototype.getLineType=function(){return(this.get("line")||this.get("defaultCfg").line).type},t.prototype.renderInner=function(e){this.drawGrid(e)},t.prototype.getAlternatePath=function(e,t){var n=this.getGridPath(e),r=t.slice(0).reverse(),i=this.getGridPath(r,!0);return this.get("closed")?n=n.concat(i):(i[0][0]="L",(n=n.concat(i)).push(["Z"])),n},t.prototype.getPathStyle=function(){return this.get("line").style},t.prototype.drawGrid=function(e){var t=this,n=this.get("line"),r=this.get("items"),i=this.get("alternateColor"),a=null;Xh(r,(function(o,s){var l=o.id||s;if(n){var c=t.getPathStyle();c=Yh(c)?c(o,s,r):c;var u=t.getElementId("line-"+l),h=t.getGridPath(o.points);t.addShape(e,{type:"path",name:"grid-line",id:u,attrs:zp({path:h},c)})}if(i&&s>0){var p=t.getElementId("region-"+l),d=s%2==0;if(lp(i))d&&t.drawAlternateRegion(p,e,a.points,o.points,i);else{var f=d?i[1]:i[0];t.drawAlternateRegion(p,e,a.points,o.points,f)}}a=o}))},t.prototype.drawAlternateRegion=function(e,t,n,r,i){var a=this.getAlternatePath(n,r);this.addShape(t,{type:"path",id:e,name:"grid-region",attrs:{path:a,fill:i}})},t}(sC);var KC,QC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{type:"circle",center:null,closed:!0})},t.prototype.getGridPath=function(e,t){var n,r,i,a,o,s,l=this.getLineType(),c=this.get("closed"),u=[];if(e.length)if("circle"===l){var h=this.get("center"),p=e[0],d=(n=h.x,r=h.y,i=p.x,a=p.y,o=i-n,s=a-r,Math.sqrt(o*o+s*s)),f=t?0:1;c?(u.push(["M",h.x,h.y-d]),u.push(["A",d,d,0,0,f,h.x,h.y+d]),u.push(["A",d,d,0,0,f,h.x,h.y-d]),u.push(["Z"])):Xh(e,(function(e,t){0===t?u.push(["M",e.x,e.y]):u.push(["A",d,d,0,0,f,e.x,e.y])}))}else Xh(e,(function(e,t){0===t?u.push(["M",e.x,e.y]):u.push(["L",e.x,e.y])})),c&&u.push(["Z"]);return u},t}(qC),ZC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{type:"line"})},t.prototype.getGridPath=function(e){var t=[];return Xh(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},t}(qC),JC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},t.prototype.getLayoutBBox=function(){var t=e.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),r=this.get("maxHeight"),i=t.width,a=t.height;return n&&(i=Math.min(i,n)),r&&(a=Math.min(a,r)),Kb(t.minX,t.minY,i,a)},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.resetLocation=function(){var e=this.get("x"),t=this.get("y"),n=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e+n,y:t+r})},t.prototype.applyOffset=function(){this.resetLocation()},t.prototype.getDrawPoint=function(){return this.get("currentPoint")},t.prototype.setDrawPoint=function(e){return this.set("currentPoint",e)},t.prototype.renderInner=function(e){this.resetDraw(),this.get("title")&&this.drawTitle(e),this.drawLegendContent(e),this.get("background")&&this.drawBackground(e)},t.prototype.drawBackground=function(e){var t=this.get("background"),n=e.getBBox(),r=Wb(t.padding),i=Ph({x:0,y:0,width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},t.style);this.addShape(e,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:i}).toBack()},t.prototype.drawTitle=function(e){var t=this.get("currentPoint"),n=this.get("title"),r=n.spacing,i=n.style,a=n.text,o=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:Ph({text:a,x:t.x,y:t.y},i)}).getBBox();this.set("currentPoint",{x:t.x,y:o.maxY+r})},t.prototype.resetDraw=function(){var e=this.get("background"),t={x:0,y:0};if(e){var n=Wb(e.padding);t.x=n[3],t.y=n[0]}this.set("currentPoint",t)},t}(sC),eT={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},tT={fill:pC.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:pC.fontFamily,fontWeight:"normal",lineHeight:12},nT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:n},100):e.attr({matrix:n})}},t.onNavigationAfter=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:n},100):e.attr({matrix:n})}},t}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:pC.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:pC.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:eT,itemName:{spacing:16,style:tT},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:tT},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:pC.uncheckedColor},markerStyle:{fill:pC.uncheckedColor,stroke:pC.uncheckedColor}},inactive:{nameStyle:{fill:pC.uncheckedColor},markerStyle:{opacity:.2}}}}})},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("items")},t.prototype.setItems=function(e){this.update({items:e})},t.prototype.updateItem=function(e,t){zp(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("item-group");e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n;var r=this.getElementByLocalId("item-"+e.id);if(r){var i=this.getItems().indexOf(e),a=this.createOffScreenGroup(),o=this.drawItem(e,i,this.getItemHeight(),a);this.updateElements(o,r),this.clearUpdateStatus(r)}},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get("itemStates"),n=[];return Xh(t,(function(t,r){e[r]&&n.push(r)})),n},t.prototype.clearItemsState=function(e){var t=this;Xh(this.getItemsByState(e),(function(n){t.setItemState(n,e,!1)}))},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return jh(n,(function(n){return t.hasState(n,e)}))},t.prototype.drawLegendContent=function(e){this.processItems(),this.drawItems(e)},t.prototype.processItems=function(){Xh(this.get("items"),(function(e){e.id||(e.id=e.name)}))},t.prototype.drawItems=function(e){var t=this,n=this.addGroup(e,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),r=this.addGroup(n,{id:this.getElementId("item-group"),name:"legend-item-group"}),i=this.getItemHeight(),a=this.get("itemWidth"),o=this.get("itemSpacing"),s=this.get("itemMarginBottom"),l=this.get("currentPoint"),c=l.x,u=l.y,h=this.get("layout"),p=this.get("items"),d=!1,f=0,m=this.get("maxWidth"),g=this.get("maxHeight");Xh(p,(function(e,n){var p=t.drawItem(e,n,i,r),v=p.getBBox(),y=a||v.width;y>f&&(f=y),"horizontal"===h?(m&&m<l.x+y-c&&(d=!0,l.x=c,l.y+=i+s),t.moveElementTo(p,l),l.x+=y+o):(g&&g<l.y+i+s-u&&(d=!0,l.x+=f+o,l.y=u,f=0),t.moveElementTo(p,l),l.y+=i+s)})),d&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=c,this.startY=u,this.adjustNavigation(e,r))},t.prototype.getItemHeight=function(){var e=this.get("itemHeight");if(!e){var t=(this.get("itemName")||{}).style;if(Yh(t)){var n=this.getItems();n.forEach((function(r,i){var a=Ph(Ph({},tT),t(r,i,n)).fontSize;e<a&&(e=a)}))}else t&&(e=t.fontSize)}return e},t.prototype.drawMarker=function(e,t,n,r){var i=Ph(Ph(Ph({x:0,y:r/2},t.style),{symbol:Zp(n.marker,"symbol","circle")}),Zp(n.marker,"style",{})),a=this.addShape(e,{type:"marker",id:this.getElementId("item-"+n.id+"-marker"),name:"legend-item-marker",attrs:i}),o=a.getBBox();a.attr("x",o.width/2);var s=a.attr(),l=s.stroke,c=s.fill;return l&&a.set("isStroke",!0),c&&a.set("isFill",!0),a},t.prototype.drawItemText=function(e,t,n,r,i,a,o){var s=n.formatter,l=n.style,c=Ph(Ph({x:a,y:i/2,text:s?s(r[t],r,o):r[t]},tT),Yh(l)?l(r,o,this.getItems()):l);return this.addShape(e,{type:"text",id:this.getElementId("item-"+r.id+"-"+t),name:"legend-item-"+t,attrs:c})},t.prototype.drawItem=function(e,t,n,r){var i="item-"+e.id,a=this.addGroup(r,{name:"legend-item-container",id:this.getElementId("item-container-"+i),delegateObject:{item:e,index:t}}),o=this.addGroup(a,{name:"legend-item",id:this.getElementId(i),delegateObject:{item:e,index:t}}),s=this.get("marker"),l=this.get("itemName"),c=this.get("itemValue"),u=this.get("itemBackground"),h=this.getLimitItemWidth(),p=0;if(s){var d=this.drawMarker(o,s,e,n),f=s.spacing,m=Zp(e,["marker","spacing"]);Ep(m)&&(f=m),p=d.getBBox().maxX+f}if(l){var g=this.drawItemText(o,"name",l,e,n,p,t);h&&uC(!0,g,yp(h-p,0,h)),p=g.getBBox().maxX+l.spacing}if(c){var v=this.drawItemText(o,"value",c,e,n,p,t);h&&(c.alignRight?(v.attr({textAlign:"right",x:h}),uC(!0,v,yp(h-p,0,h),"head")):uC(!0,v,yp(h-p,0,h)))}if(u){var y=o.getBBox();this.addShape(o,{type:"rect",name:"legend-item-background",id:this.getElementId(i+"-background"),attrs:Ph({x:0,y:0,width:y.width,height:n},u.style)}).toBack()}return this.applyItemStates(e,o),o},t.prototype.adjustNavigation=function(e,t){var n=this,r=this.startX,i=this.startY,a=this.get("layout"),o=t.findAll((function(e){return"legend-item"===e.get("name")})),s=this.get("maxWidth"),l=this.get("maxHeight"),c=this.get("itemWidth"),u=this.get("itemSpacing"),h=this.getItemHeight(),p=Yp({},eT,this.get("pageNavigator")),d=this.drawNavigation(e,a,"00/00",p),f=d.getBBox(),m={x:r,y:i},g=1,v=0,y=0,x=0,E=this.get("itemMarginBottom");if("horizontal"===a){var b=this.get("maxRow")||1,C=h+(1===b?0:E);this.pageHeight=C*b,Xh(o,(function(e){var t=e.getBBox(),i=c||t.width;(v&&v<m.x+i+u||s<m.x+i+u+f.width)&&(1===g&&(v=m.x+u,n.pageWidth=v,n.moveElementTo(d,{x:s-u-f.width-f.minX,y:m.y+h/2-f.height/2-f.minY})),g+=1,m.x=r,m.y+=C),n.moveElementTo(e,m),e.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:i+u,height:h}}),m.x+=i+u}))}else{Xh(o,(function(e){var t=e.getBBox();t.width>y&&(y=t.width)})),x=y,y+=u,s&&(y=Math.min(s,y),x=Math.min(s,x)),this.pageWidth=y,this.pageHeight=l-Math.max(f.height,h+E);var T=Math.floor(this.pageHeight/(h+E));Xh(o,(function(e,t){0!==t&&t%T==0&&(g+=1,m.x+=y,m.y=i),n.moveElementTo(e,m),e.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:y,height:h}}),m.y+=h+E})),this.totalPagesCnt=g,this.moveElementTo(d,{x:r+x/2-f.width/2-f.minX,y:l-f.height-f.minY})}this.pageHeight&&this.pageWidth&&t.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),"horizontal"===a&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(g/this.get("maxRow")):this.totalPagesCnt=g,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(d),t.attr("matrix",this.getCurrentNavigationMatrix())},t.prototype.drawNavigation=function(e,t,n,r){var i={x:0,y:0},a=this.addGroup(e,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),o=Zp(r.marker,"style",{}),s=o.size,l=void 0===s?12:s,c=Rh(o,["size"]),u=this.drawArrow(a,i,"navigation-arrow-left","horizontal"===t?"up":"left",l,c);u.on("click",this.onNavigationBack);var h=u.getBBox();i.x+=h.width+2;var p=this.addShape(a,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:Ph({x:i.x,y:i.y+l/2,text:n,textBaseline:"middle"},Zp(r.text,"style"))}).getBBox();return i.x+=p.width+2,this.drawArrow(a,i,"navigation-arrow-right","horizontal"===t?"down":"right",l,c).on("click",this.onNavigationAfter),a},t.prototype.updateNavigation=function(e){var t=Yp({},eT,this.get("pageNavigator")).marker.style,n=t.fill,r=t.opacity,i=t.inactiveFill,a=t.inactiveOpacity,o=this.currentPageIndex+"/"+this.totalPagesCnt,s=e?e.getChildren()[1]:this.getElementByLocalId("navigation-text"),l=e?e.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),c=e?e.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),u=s.getBBox();s.attr("text",o);var h=s.getBBox();s.attr("x",s.attr("x")-(h.width-u.width)/2),l.attr("opacity",1===this.currentPageIndex?a:r),l.attr("fill",1===this.currentPageIndex?i:n),l.attr("cursor",1===this.currentPageIndex?"not-allowed":"pointer"),c.attr("opacity",this.currentPageIndex===this.totalPagesCnt?a:r),c.attr("fill",this.currentPageIndex===this.totalPagesCnt?i:n),c.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},t.prototype.drawArrow=function(e,t,n,r,i,a){var o=t.x,s=t.y,l={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},c=this.addShape(e,{type:"path",id:this.getElementId(n),name:n,attrs:Ph({path:[["M",o+i/2,s],["L",o,s+i],["L",o+i,s+i],["Z"]],cursor:"pointer"},a)});return c.attr("matrix",Gb({x:o+i/2,y:s+i/2},l[r])),c},t.prototype.getCurrentNavigationMatrix=function(){var e=this,t=e.currentPageIndex,n=e.pageWidth,r=e.pageHeight;return $b("horizontal"===this.get("layout")?{x:0,y:r*(1-t)}:{x:n*(1-t),y:0})},t.prototype.applyItemStates=function(e,t){if(this.getItemStates(e).length>0){var n=t.getChildren(),r=this.get("itemStates");Xh(n,(function(t){var n=t.get("name").split("-")[2],i=SC(e,n,r);i&&(t.attr(i),"marker"!==n||t.get("isStroke")&&t.get("isFill")||(t.get("isStroke")&&t.attr("fill",null),t.get("isFill")&&t.attr("stroke",null)))}))}},t.prototype.getLimitItemWidth=function(){var e=this.get("itemWidth"),t=this.get("maxItemWidth");return t?e&&(t=e<=t?e:t):e&&(t=e),t},t}(JC),rT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:pC.textColor,textBaseline:"middle",fontFamily:pC.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:pC.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},t.prototype.isSlider=function(){return!0},t.prototype.getValue=function(){return this.getCurrentValue()},t.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},t.prototype.setRange=function(e,t){this.update({min:e,max:t})},t.prototype.setValue=function(e){var t=this.getValue();this.set("value",e);var n=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(n),this.delegateEmit("valuechanged",{originValue:t,value:e})},t.prototype.initEvent=function(){var e=this.get("group");this.bindSliderEvent(e),this.bindRailEvent(e),this.bindTrackEvent(e)},t.prototype.drawLegendContent=function(e){this.drawRail(e),this.drawLabels(e),this.fixedElements(e),this.resetTrack(e),this.resetTrackClip(e),this.get("slidable")&&this.resetHandlers(e)},t.prototype.bindSliderEvent=function(e){this.bindHandlersEvent(e)},t.prototype.bindHandlersEvent=function(e){var t=this;e.on("legend-handler-min:drag",(function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[1];r<n&&(r=n),t.setValue([n,r])})),e.on("legend-handler-max:drag",(function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[0];r>n&&(r=n),t.setValue([r,n])}))},t.prototype.bindRailEvent=function(e){},t.prototype.bindTrackEvent=function(e){var t=this,n=null;e.on("legend-track:dragstart",(function(e){n={x:e.x,y:e.y}})),e.on("legend-track:drag",(function(e){if(n){var r=t.getValueByCanvasPoint(n.x,n.y),i=t.getValueByCanvasPoint(e.x,e.y),a=t.getCurrentValue(),o=a[1]-a[0],s=t.getRange(),l=i-r;l<0?a[0]+l>s.min?t.setValue([a[0]+l,a[1]+l]):t.setValue([s.min,s.min+o]):l>0&&(l>0&&a[1]+l<s.max?t.setValue([a[0]+l,a[1]+l]):t.setValue([s.max-o,s.max])),n={x:e.x,y:e.y}}})),e.on("legend-track:dragend",(function(e){n=null}))},t.prototype.drawLabels=function(e){this.drawLabel("min",e),this.drawLabel("max",e)},t.prototype.drawLabel=function(e,t){var n=this.get("label"),r=n.style,i=n.align,a=n.formatter,o=this.get(e),s=this.getLabelAlignAttrs(e,i),l="label-"+e;this.addShape(t,{type:"text",id:this.getElementId(l),name:"legend-label-"+e,attrs:Ph(Ph({x:0,y:0,text:Yh(a)?a(o):o},r),s)})},t.prototype.getLabelAlignAttrs=function(e,t){var n="center",r="middle";return this.isVertical()?(n="start",r="rail"!==t?"min"===e?"top":"bottom":"top"):"rail"!==t?(r="top",n="min"===e?"start":"end"):(n="start",r="middle"),{textAlign:n,textBaseline:r}},t.prototype.getRailPath=function(e,t,n,r){var i=this.get("rail"),a=i.size,o=i.defaultLength,s=i.type,l=this.isVertical(),c=n,u=r;c||(c=l?a:o),u||(u=l?o:a);var h=[];return"color"===s?(h.push(["M",e,t]),h.push(["L",e+c,t]),h.push(["L",e+c,t+u]),h.push(["L",e,t+u]),h.push(["Z"])):(h.push(["M",e+c,t]),h.push(["L",e+c,t+u]),h.push(["L",e,t+u]),h.push(["Z"])),h},t.prototype.drawRail=function(e){var t=this.get("rail").style;this.addShape(e,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:Ph({path:this.getRailPath(0,0)},t)})},t.prototype.getTrackColor=function(e){var t,n=e.length;if(!n)return null;if(1===n)return e[0];t=this.isVertical()?"l(90)":"l(0)";for(var r=0;r<n;r++){t+=" "+r/(n-1)+":"+e[r]}return t},t.prototype.getTrackPath=function(e){var t=this.getRailShape(e).attr("path");return Hp(t)},t.prototype.getClipTrackAttrs=function(e){var t,n,r,i,a=this.getCurrentValue(),o=a[0],s=a[1],l=this.getRailBBox(e),c=this.getPointByValue(o,e),u=this.getPointByValue(s,e);return this.isVertical()?(t=l.minX,n=c.y,r=l.width,i=u.y-c.y):(t=c.x,n=l.minY,r=u.x-c.x,i=l.height),{x:t,y:n,width:r,height:i}},t.prototype.getTrackAttrs=function(e){var t=this.get("track"),n=this.get("colors");return zp({path:this.getTrackPath(e),fill:this.getTrackColor(n)},t.style)},t.prototype.resetTrackClip=function(e){var t=e||this.get("group"),n=this.getElementId("track"),r=t.findById(n),i=r.getClip(),a=this.getClipTrackAttrs(e);i?i.attr(a):r.setClip({type:"rect",attrs:a})},t.prototype.resetTrack=function(e){var t=this.getElementId("track"),n=e.findById(t),r=this.getTrackAttrs(e);n?n.attr(r):this.addShape(e,{type:"path",id:t,draggable:this.get("slidable"),name:"legend-track",attrs:r})},t.prototype.getPointByValue=function(e,t){var n=this.getRange(),r=n.min,i=(e-r)/(n.max-r),a=this.getRailBBox(t),o={x:0,y:0};return this.isVertical()?(o.x=a.minX+a.width/2,o.y=Qb(a.minY,a.maxY,i)):(o.x=Qb(a.minX,a.maxX,i),o.y=a.minY+a.height/2),o},t.prototype.getRailShape=function(e){return(e||this.get("group")).findById(this.getElementId("rail"))},t.prototype.getRailBBox=function(e){return this.getRailShape(e).getBBox()},t.prototype.getRailCanvasBBox=function(){return this.get("group").findById(this.getElementId("rail")).getCanvasBBox()},t.prototype.isVertical=function(){return"vertical"===this.get("layout")},t.prototype.getValueByCanvasPoint=function(e,t){var n=this.getRange(),r=n.min,i=n.max,a=this.getRailCanvasBBox(),o=this.isVertical(),s=this.get("step"),l=Qb(r,i,o?(t-a.minY)/a.height:(e-a.minX)/a.width);s&&(l=r+Math.round((l-r)/s)*s);return l>i&&(l=i),l<r&&(l=r),l},t.prototype.getCurrentValue=function(){var e=this.get("value");if(!e){var t=this.get("values");return t?[Math.max(Math.min.apply(Math,Dh(t,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,Dh(t,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return e},t.prototype.resetHandlers=function(e){var t=this.getCurrentValue(),n=t[0],r=t[1];this.resetHandler(e,"min",n),this.resetHandler(e,"max",r)},t.prototype.getHandlerPath=function(e,t){var n=this.isVertical(),r=[],i=e.size,a=t.x,o=t.y,s=1.4*i,l=i/2,c=i/6;if(n){var u=a+.4*s;r.push(["M",a,o]),r.push(["L",u,o+l]),r.push(["L",a+s,o+l]),r.push(["L",a+s,o-l]),r.push(["L",u,o-l]),r.push(["Z"]),r.push(["M",u,o+c]),r.push(["L",a+s-2,o+c]),r.push(["M",u,o-c]),r.push(["L",a+s-2,o-c])}else{var h=o+.4*s;r.push(["M",a,o]),r.push(["L",a-l,h]),r.push(["L",a-l,o+s]),r.push(["L",a+l,o+s]),r.push(["L",a+l,h]),r.push(["Z"]),r.push(["M",a-c,h]),r.push(["L",a-c,o+s-2]),r.push(["M",a+c,h]),r.push(["L",a+c,o+s-2])}return r},t.prototype.resetHandler=function(e,t,n){var r=this.getPointByValue(n,e),i=this.get("handler"),a=this.getHandlerPath(i,r),o=this.getElementId("handler-"+t),s=e.findById(o),l=this.isVertical();s?s.attr("path",a):this.addShape(e,{type:"path",name:"legend-handler-"+t,draggable:!0,id:o,attrs:Ph(Ph({path:a},i.style),{cursor:l?"ns-resize":"ew-resize"})})},t.prototype.fixedElements=function(e){var t=e.findById(this.getElementId("rail")),n=e.findById(this.getElementId("label-min")),r=e.findById(this.getElementId("label-max")),i=this.getDrawPoint();this.isVertical()?this.fixedVertail(n,r,t,i):this.fixedHorizontal(n,r,t,i)},t.prototype.fitRailLength=function(e,t,n,r){var i=this.isVertical()?"height":"width",a=this.get("label"),o=a.align,s=a.spacing,l=this.get("max"+Mp(i));if(l){var c=("rail"===o?n[i]+e[i]+t[i]+2*s:n[i])-l;c>0&&this.changeRailLength(r,i,n[i]-c)}},t.prototype.changeRailLength=function(e,t,n){var r,i=e.getBBox();r="height"===t?this.getRailPath(i.x,i.y,i.width,n):this.getRailPath(i.x,i.y,n,i.height),e.attr("path",r)},t.prototype.changeRailPosition=function(e,t,n){var r=e.getBBox(),i=this.getRailPath(t,n,r.width,r.height);e.attr("path",i)},t.prototype.fixedHorizontal=function(e,t,n,r){var i=this.get("label"),a=i.align,o=i.spacing,s=n.getBBox(),l=e.getBBox(),c=t.getBBox(),u=s.height;this.fitRailLength(l,c,s,n),s=n.getBBox(),"rail"===a?(e.attr({x:r.x,y:r.y+u/2}),this.changeRailPosition(n,r.x+l.width+o,r.y),t.attr({x:r.x+l.width+s.width+2*o,y:r.y+u/2})):"top"===a?(e.attr({x:r.x,y:r.y}),t.attr({x:r.x+s.width,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+o)):(this.changeRailPosition(n,r.x,r.y),e.attr({x:r.x,y:r.y+s.height+o}),t.attr({x:r.x+s.width,y:r.y+s.height+o}))},t.prototype.fixedVertail=function(e,t,n,r){var i=this.get("label"),a=i.align,o=i.spacing,s=n.getBBox(),l=e.getBBox(),c=t.getBBox();if(this.fitRailLength(l,c,s,n),s=n.getBBox(),"rail"===a)e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+o),t.attr({x:r.x,y:r.y+l.height+s.height+2*o});else if("right"===a)e.attr({x:r.x+s.width+o,y:r.y}),this.changeRailPosition(n,r.x,r.y),t.attr({x:r.x+s.width+o,y:r.y+s.height});else{var u=Math.max(l.width,c.width);e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x+u+o,r.y),t.attr({x:r.x,y:r.y+s.height})}},t}(JC),iT="g2-tooltip-title",aT="g2-tooltip-list",oT="g2-tooltip-crosshair-x",sT="g2-tooltip-crosshair-y",lT=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CONTAINER_CLASS:"g2-tooltip",TITLE_CLASS:iT,LIST_CLASS:aT,LIST_ITEM_CLASS:"g2-tooltip-list-item",MARKER_CLASS:"g2-tooltip-marker",VALUE_CLASS:"g2-tooltip-value",NAME_CLASS:"g2-tooltip-name",CROSSHAIR_X:oT,CROSSHAIR_Y:sT}),cT=((KC={})["g2-tooltip"]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:pC.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},KC[""+iT]={marginBottom:"4px"},KC[""+aT]={margin:"0px",listStyleType:"none",padding:"0px"},KC["g2-tooltip-list-item"]={listStyleType:"none",marginBottom:"4px"},KC["g2-tooltip-marker"]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},KC["g2-tooltip-value"]={display:"inline-block",float:"right",marginLeft:"30px"},KC[""+oT]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},KC[""+sT]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},KC);var uT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="g2-tooltip"><div class="'+iT+'"></div><ul class="'+aT+'"></ul></div>',itemTpl:'<li class="g2-tooltip-list-item" data-index={index}>\n          <span class="g2-tooltip-marker" style="background:{color}"></span>\n          <span class="g2-tooltip-name">{name}</span>:\n          <span class="g2-tooltip-value">{value}</span>\n        </li>',xCrosshairTpl:'<div class="'+oT+'"></div>',yCrosshairTpl:'<div class="'+sT+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:"g2-tooltip",crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:cT})},t.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},t.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},t.prototype.show=function(){var e=this.getContainer();e&&!this.destroyed&&(this.set("visible",!0),zd(e,{visibility:"visible"}),this.setCrossHairsVisible(!0))},t.prototype.hide=function(){var e=this.getContainer();e&&!this.destroyed&&(this.set("visible",!1),zd(e,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},t.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetPosition()},t.prototype.setCrossHairsVisible=function(e){var t=e?"":"none",n=this.get("xCrosshairDom"),r=this.get("yCrosshairDom");n&&zd(n,{display:t}),r&&zd(r,{display:t})},t.prototype.initContainer=function(){if(e.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},t.prototype.updateInner=function(t){var n,r;this.get("customContent")?this.renderCustomContent():(n=t,r=!1,Xh(["title","showTitle"],(function(e){if(kp(n,e))return r=!0,!1})),r&&this.resetTitle(),kp(t,"items")&&this.renderItems()),e.prototype.updateInner.call(this,t)},t.prototype.initDom=function(){this.cacheDoms()},t.prototype.removeDom=function(){e.prototype.removeDom.call(this),this.clearCrosshairs()},t.prototype.resetPosition=function(){var e,t=this.get("x"),n=this.get("y"),r=this.get("offset"),i=this.getOffset(),a=i.offsetX,o=i.offsetY,s=this.get("position"),l=this.get("region"),c=this.getContainer(),u=this.getBBox(),h=u.width,p=u.height;l&&(e=qb(l));var d=function(e,t,n,r,i,a,o){var s=function(e,t,n,r,i,a){var o=e,s=t;switch(a){case"left":o=e-r-n,s=t-i/2;break;case"right":o=e+n,s=t-i/2;break;case"top":o=e-r/2,s=t-i-n;break;case"bottom":o=e-r/2,s=t+n;break;default:o=e+n,s=t-i-n}return{x:o,y:s}}(e,t,n,r,i,a);if(o){var l=function(e,t,n,r,i){return{left:e<i.x,right:e+n>i.x+i.width,top:t<i.y,bottom:t+r>i.y+i.height}}(s.x,s.y,r,i,o);"auto"===a?(l.right&&(s.x=Math.max(0,e-r-n)),l.top&&(s.y=Math.max(0,t-i-n))):"top"===a||"bottom"===a?(l.left&&(s.x=o.x),l.right&&(s.x=o.x+o.width-r),"top"===a&&l.top&&(s.y=t+n),"bottom"===a&&l.bottom&&(s.y=t-i-n)):(l.top&&(s.y=o.y),l.bottom&&(s.y=o.y+o.height-i),"left"===a&&l.left&&(s.x=e+n),"right"===a&&l.right&&(s.x=e-r-n))}return s}(t,n,r,h,p,s,e);zd(c,{left:tC(d.x+a),top:tC(d.y+o)}),this.resetCrosshairs()},t.prototype.renderCustomContent=function(){var e=this.getHtmlContentNode(),t=this.get("parent"),n=this.get("container");n&&n.parentNode===t?t.replaceChild(e,n):t.appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()},t.prototype.getHtmlContentNode=function(){var e,t=this.get("customContent");if(t){var n=t(this.get("title"),this.get("items"));e=Dp(n)?n:Pd(n)}return e},t.prototype.cacheDoms=function(){var e=this.getContainer(),t=e.getElementsByClassName(iT)[0],n=e.getElementsByClassName(aT)[0];this.set("titleDom",t),this.set("listDom",n)},t.prototype.resetTitle=function(){var e=this.get("title");this.get("showTitle")&&e?this.setTitle(e):this.setTitle("")},t.prototype.setTitle=function(e){var t=this.get("titleDom");t&&(t.innerText=e)},t.prototype.resetCrosshairs=function(){var e=this.get("crosshairsRegion"),t=this.get("crosshairs");if(e&&t){var n=qb(e),r=this.get("xCrosshairDom"),i=this.get("yCrosshairDom");"x"===t?(this.resetCrosshair("x",n),i&&(i.remove(),this.set("yCrosshairDom",null))):"y"===t?(this.resetCrosshair("y",n),r&&(r.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",n),this.resetCrosshair("y",n)),this.setCrossHairsVisible(this.get("visible"))}else this.clearCrosshairs()},t.prototype.resetCrosshair=function(e,t){var n=this.checkCrosshair(e),r=this.get(e);zd(n,"x"===e?{left:tC(r),top:tC(t.y),height:tC(t.height)}:{top:tC(r),left:tC(t.x),width:tC(t.width)})},t.prototype.checkCrosshair=function(e){var t=e+"CrosshairDom",n=e+"CrosshairTpl",r="CROSSHAIR_"+e.toUpperCase(),i=lT[r],a=this.get(t),o=this.get("parent");return a||(a=Pd(this.get(n)),this.applyStyle(i,a),o.appendChild(a),this.set(t,a)),a},t.prototype.renderItems=function(){this.clearItemDoms();var e=this.get("items"),t=this.get("itemTpl"),n=this.get("listDom");n&&(Xh(e,(function(e){var r=cy.toCSSGradient(e.color),i=Ph(Ph({},e),{color:r}),a=Pd(Ip(t,i));n.appendChild(a)})),this.applyChildrenStyles(n,this.get("domStyles")))},t.prototype.clearItemDoms=function(){this.get("listDom")&&Xb(this.get("listDom"))},t.prototype.clearCrosshairs=function(){var e=this.get("xCrosshairDom"),t=this.get("yCrosshairDom");e&&e.remove(),t&&t.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},t}(CC),hT={opacity:0},pT={stroke:"#C5C5C5",strokeOpacity:.85},dT={fill:"#CACED4",opacity:.85};function fT(e){return function(e){return Kp(e,(function(e,t){return[0===t?"M":"L",e[0],e[1]]}))}(e)}function mT(e,t,n,r){void 0===r&&(r=!0);var i=new tx({values:e}),a=new yy({values:Kp(e,(function(e,t){return t}))}),o=Kp(e,(function(e,r){return[a.scale(r)*t,n-i.scale(e)*n]}));return r?function(e){if(e.length<=2)return fT(e);var t=[];Xh(e,(function(e){qp(e,t.slice(t.length-2))||t.push(e[0],e[1])}));var n=fv(t,!1),r=hp(e),i=r[0],a=r[1];return n.unshift(["M",i,a]),n}(o):fT(o)}function gT(e,t,n,r){var i=Dh(e),a=function(e,t){var n=new tx({values:e}),r=Math.max(0,n.min);return t-n.scale(r)*t}(r,n);return i.push(["L",t,a]),i.push(["L",0,a]),i.push(["Z"]),i}var vT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:hT,lineStyle:pT,areaStyle:dT})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.data,a=t.smooth,o=t.isArea,s=t.backgroundStyle,l=t.lineStyle,c=t.areaStyle;this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:Ph({x:0,y:0,width:n,height:r},s)});var u=mT(i,n,r,a);if(this.addShape(e,{id:this.getElementId("line"),type:"path",attrs:Ph({path:u},l)}),o){var h=gT(u,n,r,i);this.addShape(e,{id:this.getElementId("area"),type:"path",attrs:Ph({path:h},c)})}},t.prototype.applyOffset=function(){var e=this.cfg,t=e.x,n=e.y;this.moveElementTo(this.get("group"),{x:t,y:n})},t}(sC),yT={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},xT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"handler",x:0,y:0,width:10,height:24,style:yT})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.style,a=i.fill,o=i.stroke,s=i.radius,l=i.opacity,c=i.cursor;this.addShape(e,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:n,height:r,fill:a,stroke:o,radius:s,opacity:l,cursor:c}});var u=1/3*n,h=2/3*n,p=1/4*r,d=3/4*r;this.addShape(e,{id:this.getElementId("line-left"),type:"line",attrs:{x1:u,y1:p,x2:u,y2:d,stroke:o,cursor:c}}),this.addShape(e,{id:this.getElementId("line-right"),type:"line",attrs:{x1:h,y1:p,x2:h,y2:d,stroke:o,cursor:c}})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.bindEvents=function(){var e=this;this.get("group").on("mouseenter",(function(){var t=e.get("style").highLightFill;e.getElementByLocalId("background").attr("fill",t),e.draw()})),this.get("group").on("mouseleave",(function(){var t=e.get("style").fill;e.getElementByLocalId("background").attr("fill",t),e.draw()}))},t.prototype.draw=function(){var e=this.get("container").get("canvas");e&&e.draw()},t}(sC),ET={fill:"#416180",opacity:.05},bT={fill:"#5B8FF9",opacity:.15,cursor:"move"},CT={width:10,height:24},TT={textBaseline:"middle",fill:"#000",opacity:.45},wT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){return function(n){t.currentTarget=e;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),t.prevX=Zp(r,"touches.0.pageX",r.pageX),t.prevY=Zp(r,"touches.0.pageY",r.pageY);var i=t.getContainerDOM();i.addEventListener("mousemove",t.onMouseMove),i.addEventListener("mouseup",t.onMouseUp),i.addEventListener("mouseleave",t.onMouseUp),i.addEventListener("touchmove",t.onMouseMove),i.addEventListener("touchend",t.onMouseUp),i.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(e){var n=t.cfg.width,r=[t.get("start"),t.get("end")];e.stopPropagation(),e.preventDefault();var i=Zp(e,"touches.0.pageX",e.pageX),a=Zp(e,"touches.0.pageY",e.pageY),o=i-t.prevX,s=t.adjustOffsetRange(o/n);t.updateStartEnd(s),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=i,t.prevY=a,t.draw(),t.emit("sliderchange",[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:r,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var e=t.getContainerDOM();e&&(e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseup",t.onMouseUp),e.removeEventListener("mouseleave",t.onMouseUp),e.removeEventListener("touchmove",t.onMouseMove),e.removeEventListener("touchend",t.onMouseUp),e.removeEventListener("touchcancel",t.onMouseUp))},t}return Lh(t,e),t.prototype.setRange=function(e,t){this.set("minLimit",e),this.set("maxLimit",t);var n=this.get("start"),r=this.get("end"),i=yp(n,e,t),a=yp(r,e,t);this.get("isInit")||n===i&&r===a||this.setValue([i,a])},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var t=this.getRange();if(Vh(e)&&2===e.length){var n=[this.get("start"),this.get("end")];this.update({start:yp(e[0],t.min,t.max),end:yp(e[1],t.min,t.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:n,value:e})}},t.prototype.getValue=function(){return[this.get("start"),this.get("end")]},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:ET,foregroundStyle:bT,handlerStyle:CT,textStyle:TT}})},t.prototype.update=function(t){var n=t.start,r=t.end,i=Ph({},t);Uh(n)||(i.start=yp(n,0,1)),Uh(r)||(i.end=yp(r,0,1)),e.prototype.update.call(this,i),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},t.prototype.init=function(){this.set("start",yp(this.get("start"),0,1)),this.set("end",yp(this.get("end"),0,1)),e.prototype.init.call(this)},t.prototype.render=function(){e.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},t.prototype.renderInner=function(e){var t=this.cfg;t.start,t.end;var n=t.width,r=t.height,i=t.trendCfg,a=void 0===i?{}:i,o=t.minText,s=t.maxText,l=t.backgroundStyle,c=void 0===l?{}:l,u=t.foregroundStyle,h=void 0===u?{}:u,p=t.textStyle,d=void 0===p?{}:p,f=Yp({},yT,this.cfg.handlerStyle);sd(Zp(a,"data"))&&(this.trend=this.addComponent(e,Ph({component:vT,id:this.getElementId("trend"),x:0,y:0,width:n,height:r},a))),this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:Ph({x:0,y:0,width:n,height:r},c)}),this.addShape(e,{id:this.getElementId("minText"),type:"text",attrs:Ph({y:r/2,textAlign:"right",text:o,silent:!1},d)}),this.addShape(e,{id:this.getElementId("maxText"),type:"text",attrs:Ph({y:r/2,textAlign:"left",text:s,silent:!1},d)}),this.addShape(e,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:Ph({y:0,height:r},h)});var m=Zp(f,"width",10),g=Zp(f,"height",24);this.minHandler=this.addComponent(e,{component:xT,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(r-g)/2,width:m,height:g,cursor:"ew-resize",style:f}),this.maxHandler=this.addComponent(e,{component:xT,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(r-g)/2,width:m,height:g,cursor:"ew-resize",style:f})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.updateUI=function(e,t,n){var r=this.cfg,i=r.start,a=r.end,o=r.width,s=r.minText,l=r.maxText,c=r.handlerStyle,u=r.height,h=i*o,p=a*o;this.trend&&(this.trend.update({width:o,height:u}),this.get("updateAutoRender")||this.trend.render()),e.attr("x",h),e.attr("width",p-h);var d=Zp(c,"width",10);t.attr("text",s),n.attr("text",l);var f=this._dodgeText([h,p],t,n),m=f[0],g=f[1];this.minHandler&&(this.minHandler.update({x:h-d/2}),this.get("updateAutoRender")||this.minHandler.render()),Xh(m,(function(e,n){return t.attr(n,e)})),this.maxHandler&&(this.maxHandler.update({x:p-d/2}),this.get("updateAutoRender")||this.maxHandler.render()),Xh(g,(function(e,t){return n.attr(t,e)}))},t.prototype.bindEvents=function(){var e=this.get("group");e.on("handler-min:mousedown",this.onMouseDown("minHandler")),e.on("handler-min:touchstart",this.onMouseDown("minHandler")),e.on("handler-max:mousedown",this.onMouseDown("maxHandler")),e.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var t=e.findById(this.getElementId("foreground"));t.on("mousedown",this.onMouseDown("foreground")),t.on("touchstart",this.onMouseDown("foreground"))},t.prototype.adjustOffsetRange=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case"minHandler":var i=0-n,a=1-n;return Math.min(a,Math.max(i,e));case"maxHandler":i=0-r,a=1-r;return Math.min(a,Math.max(i,e));case"foreground":i=0-n,a=1-r;return Math.min(a,Math.max(i,e))}},t.prototype.updateStartEnd=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case"minHandler":n+=e;break;case"maxHandler":r+=e;break;case"foreground":n+=e,r+=e}this.set("start",n),this.set("end",r)},t.prototype._dodgeText=function(e,t,n){var r,i,a=this.cfg,o=a.handlerStyle,s=a.width,l=Zp(o,"width",10),c=e[0],u=e[1],h=!1;c>u&&(c=(r=[u,c])[0],u=r[1],t=(i=[n,t])[0],n=i[1],h=!0);var p=t.getBBox(),d=n.getBBox(),f=p.width>c-2?{x:c+l/2+2,textAlign:"left"}:{x:c-l/2-2,textAlign:"right"},m=d.width>s-u-2?{x:u-l/2-2,textAlign:"right"}:{x:u+l/2+2,textAlign:"left"};return h?[m,f]:[f,m]},t.prototype.draw=function(){var e=this.get("container"),t=e&&e.get("canvas");t&&t.draw()},t.prototype.getContainerDOM=function(){var e=this.get("container"),t=e&&e.get("canvas");return t&&t.get("container")},t}(sC),ST={default:{trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},hover:{thumbColor:"rgba(0,0,0,0.2)"}},kT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clearEvents=od,t.onStartEvent=function(e){return function(n){t.isMobile=e,n.originalEvent.preventDefault();var r=e?Zp(n.originalEvent,"touches.0.clientX"):n.clientX,i=e?Zp(n.originalEvent,"touches.0.clientY"):n.clientY;t.startPos=t.cfg.isHorizontal?r:i,t.bindLaterEvent()}},t.bindLaterEvent=function(){var e=t.getContainerDOM(),n=[];n=t.isMobile?[Ld(e,"touchmove",t.onMouseMove),Ld(e,"touchend",t.onMouseUp),Ld(e,"touchcancel",t.onMouseUp)]:[Ld(e,"mousemove",t.onMouseMove),Ld(e,"mouseup",t.onMouseUp),Ld(e,"mouseleave",t.onMouseUp)],t.clearEvents=function(){n.forEach((function(e){e.remove()}))}},t.onMouseMove=function(e){var n=t.cfg,r=n.isHorizontal,i=n.thumbOffset;e.preventDefault();var a=t.isMobile?Zp(e,"touches.0.clientX"):e.clientX,o=t.isMobile?Zp(e,"touches.0.clientY"):e.clientY,s=r?a:o,l=s-t.startPos;t.startPos=s,t.updateThumbOffset(i+l)},t.onMouseUp=function(e){e.preventDefault(),t.clearEvents()},t.onTrackClick=function(e){var n=t.cfg,r=n.isHorizontal,i=n.x,a=n.y,o=n.thumbLen,s=t.getContainerDOM().getBoundingClientRect(),l=e.clientX,c=e.clientY,u=r?l-s.left-i-o/2:c-s.top-a-o/2,h=t.validateRange(u);t.updateThumbOffset(h)},t.onThumbMouseOver=function(){var e=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t.onThumbMouseOut=function(){var e=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t}return Lh(t,e),t.prototype.setRange=function(e,t){this.set("minLimit",e),this.set("maxLimit",t);var n=this.getValue(),r=yp(n,e,t);n===r||this.get("isInit")||this.setValue(r)},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var t=this.getRange(),n=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*yp(e,t.min,t.max)}),this.delegateEmit("valuechange",{originalValue:n,value:this.getValue()})},t.prototype.getValue=function(){return yp(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Ph(Ph({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:ST})},t.prototype.renderInner=function(e){this.renderTrackShape(e),this.renderThumbShape(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.renderTrackShape=function(e){var t=this.cfg,n=t.trackLen,r=t.theme,i=Yp({},ST,void 0===r?{default:{}}:r).default,a=i.lineCap,o=i.trackColor,s=i.size,l=Zp(this.cfg,"size",s),c=this.get("isHorizontal")?{x1:0+l/2,y1:l/2,x2:n-l/2,y2:l/2,lineWidth:l,stroke:o,lineCap:a}:{x1:l/2,y1:0+l/2,x2:l/2,y2:n-l/2,lineWidth:l,stroke:o,lineCap:a};return this.addShape(e,{id:this.getElementId("track"),name:"track",type:"line",attrs:c})},t.prototype.renderThumbShape=function(e){var t=this.cfg,n=t.thumbOffset,r=t.thumbLen,i=t.theme,a=Yp({},ST,i).default,o=a.size,s=a.lineCap,l=a.thumbColor,c=Zp(this.cfg,"size",o),u=this.get("isHorizontal")?{x1:n+c/2,y1:c/2,x2:n+r-c/2,y2:c/2,lineWidth:c,stroke:l,lineCap:s,cursor:"default"}:{x1:c/2,y1:n+c/2,x2:c/2,y2:n+r-c/2,lineWidth:c,stroke:l,lineCap:s,cursor:"default"};return this.addShape(e,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:u})},t.prototype.bindEvents=function(){var e=this.get("group");e.on("mousedown",this.onStartEvent(!1)),e.on("mouseup",this.onMouseUp),e.on("touchstart",this.onStartEvent(!0)),e.on("touchend",this.onMouseUp),e.findById(this.getElementId("track")).on("click",this.onTrackClick);var t=e.findById(this.getElementId("thumb"));t.on("mouseover",this.onThumbMouseOver),t.on("mouseout",this.onThumbMouseOut)},t.prototype.getContainerDOM=function(){var e=this.get("container"),t=e&&e.get("canvas");return t&&t.get("container")},t.prototype.validateRange=function(e){var t=this.cfg,n=t.thumbLen,r=t.trackLen,i=e;return e+n>r?i=r-n:e+n<n&&(i=0),i},t.prototype.draw=function(){var e=this.get("container"),t=e&&e.get("canvas");t&&t.draw()},t.prototype.updateThumbOffset=function(e){var t=this.cfg,n=t.thumbOffset,r=t.isHorizontal,i=t.thumbLen,a=t.size,o=this.validateRange(e);if(o!==n){var s=this.getElementByLocalId("thumb");r?s.attr({x1:o+a/2,x2:o+i-a/2}):s.attr({y1:o+a/2,y2:o+i-a/2}),this.emitOffsetChange(o)}},t.prototype.emitOffsetChange=function(e){var t=this.cfg,n=t.thumbOffset,r=t.trackLen,i=t.thumbLen;this.cfg.thumbOffset=e,this.emit("scrollchange",{thumbOffset:e,ratio:yp(e/(r-i),0,1)}),this.delegateEmit("valuechange",{originalValue:n,value:e})},t}(sC),_T=jC,AT=GC,OT=ZC,IT=QC,MT=nT,NT=rT,FT=uT;function LT(e){return 1===Array.from(new Set(e)).length}function PT(e){return(rp(e)+np(e))/2}function RT(e,t,n,r){return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function DT(e,t,n,r,i,a){void 0===a&&(a=0);var o=RT(e,t,n,r),s=RT(e,t,n,i),l=RT(e,t,a,r),c=RT(e,t,a,i);if(i-r==2*Math.PI){var u=RT(e,t,n,r+Math.PI),h=RT(e,t,a,r+Math.PI),p=[["M",o.x,o.y],["A",n,n,0,1,1,u.x,u.y],["A",n,n,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(p.push(["A",a,a,0,1,0,h.x,h.y]),p.push(["A",a,a,0,1,0,c.x,c.y])),p.push(["M",o.x,o.y]),p.push(["Z"]),p}var d=i-r<=Math.PI?0:1,f=[["M",o.x,o.y],["A",n,n,0,d,1,s.x,s.y],["L",c.x,c.y]];return a&&f.push(["A",a,a,0,d,0,l.x,l.y]),f.push(["L",o.x,o.y]),f.push(["Z"]),f}function BT(e,t,n,r,i){var a=RT(e,t,n,r),o=RT(e,t,n,i);if(bp(i-r,2*Math.PI)){var s=RT(e,t,n,r+Math.PI);return[["M",a.x,a.y],["A",n,n,0,1,1,s.x,s.y],["A",n,n,0,1,1,a.x,a.y],["A",n,n,0,1,0,s.x,s.y],["A",n,n,0,1,0,a.x,a.y],["Z"]]}var l=i-r<=Math.PI?0:1;return[["M",a.x,a.y],["A",n,n,0,l,1,o.x,o.y]]}function zT(e,t){var n,r,i=function(e){if(Wp(e))return null;var t=e[0].x,n=e[0].x,r=e[0].y,i=e[0].y;return Xh(e,(function(e){t=t>e.x?e.x:t,n=n<e.x?e.x:n,r=r>e.y?e.y:r,i=i<e.y?e.y:i})),{minX:t,maxX:n,minY:r,maxY:i,centerX:(t+n)/2,centerY:(r+i)/2}}(e.points),a=t.startAngle,o=t.endAngle-a;return t.isTransposed?(n=i.maxY*o,r=i.minY*o):(n=i.maxX*o,r=i.minX*o),{startAngle:r+=a,endAngle:n+=a}}function HT(e,t){var n=e.attr(),r=t.attr();return Xh(n,(function(e,t){void 0===r[t]&&(r[t]=void 0)})),r}function jT(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}function GT(e,t){return"object"==typeof e&&t.forEach((function(t){delete e[t]})),e}function $T(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=new Map);for(var r=0,i=e;r<i.length;r++){var a=i[r];n.has(a)||(t.push(a),n.set(a,!0))}return t}var YT=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=e,this.y=t,this.height=r,this.width=n}return e.fromRange=function(t,n,r,i){return new e(t,n,r-t,i-n)},e.fromObject=function(t){return new e(t.minX,t.minY,t.width,t.height)},Object.defineProperty(e.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},e.prototype.contains=function(e){return e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return Xh(e,(function(e){n.x=Math.min(e.x,n.x),n.y=Math.min(e.y,n.y),n.width=Math.max(e.maxX,n.maxX)-n.x,n.height=Math.max(e.maxY,n.maxY)-n.y})),n},e.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return Xh(e,(function(e){n.x=Math.max(e.x,n.x),n.y=Math.max(e.y,n.y),n.width=Math.min(e.maxX,n.maxX)-n.x,n.height=Math.min(e.maxY,n.maxY)-n.y})),n},e.prototype.cut=function(t,n){var r=t.width,i=t.height;switch(n){case ud.TOP:case ud.TOP_LEFT:case ud.TOP_RIGHT:return e.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case ud.RIGHT:case ud.RIGHT_TOP:case ud.RIGHT_BOTTOM:return e.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case ud.BOTTOM:case ud.BOTTOM_LEFT:case ud.BOTTOM_RIGHT:return e.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case ud.LEFT:case ud.LEFT_TOP:case ud.LEFT_BOTTOM:return e.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},e.prototype.shrink=function(t){var n=t[0],r=t[1],i=t[2],a=t[3];return new e(this.x+a,this.y+n,this.width-a-r,this.height-n-i)},e.prototype.expand=function(t){var n=t[0],r=t[1],i=t[2],a=t[3];return new e(this.x-a,this.y-n,this.width+a+r,this.height+n+i)},e.prototype.exceed=function(e){return[Math.max(-this.minY+e.minY,0),Math.max(this.maxX-e.maxX,0),Math.max(this.maxY-e.maxY,0),Math.max(-this.minX+e.minX,0)]},e.prototype.collide=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},e.prototype.size=function(){return this.width*this.height},e.prototype.isPointIn=function(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY},e}();function UT(e){if(e.isPolar&&!e.isTransposed)return(e.endAngle-e.startAngle)*e.getRadius();var t=e.convert({x:0,y:0}),n=e.convert({x:1,y:0});return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function VT(e,t){var n=e.getCenter();return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function WT(e,t){var n=!1;if(e)if("theta"===e.type){var r=e.start,i=e.end;n=jT(t.x,r.x,i.x)&&jT(t.y,r.y,i.y)}else{var a=e.invert(t);n=jT(a.x,0,1)&&jT(a.y,0,1)}return n}function XT(e,t){var n=e.getCenter();return Math.atan2(t.y-n.y,t.x-n.x)}function qT(e,t){void 0===t&&(t=0);var n,r=e.start,i=e.end,a=e.getWidth(),o=e.getHeight();if(e.isPolar){var s=e.startAngle,l=e.endAngle,c=e.getCenter(),u=e.getRadius();return{type:"path",startState:{path:DT(c.x,c.y,u+t,s,s)},endState:function(e){var n=(l-s)*e+s;return{path:DT(c.x,c.y,u+t,s,n)}},attrs:{path:DT(c.x,c.y,u+t,s,l)}}}return n=e.isTransposed?{height:o+2*t}:{width:a+2*t},{type:"rect",startState:{x:r.x-t,y:i.y-t,width:e.isTransposed?a+2*t:0,height:e.isTransposed?0:o+2*t},endState:n,attrs:{x:r.x-t,y:i.y-t,width:a+2*t,height:o+2*t}}}var KT=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function QT(e,t,n){var r=t||[];if(Ep(e)||Uh(function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r][t];if(!Uh(i)){n=Vh(i)?i[0]:i;break}}return n}(r,e))&&Wp(n))return new(hx("identity"))({field:e.toString(),values:[e]});var i=up(r,e);return new(hx(Zp(n,"type",function(e){var t="linear";return KT.test(e)?t="timeCat":lp(e)&&(t="cat"),t}(i[0]))))(Ph({field:e,values:i},n))}function ZT(e){return e.alias||e.field}function JT(e,t,n){var r,i=e.values.length;if(1===i)r=[.5,1];else{var a=0;r=function(e){if(e.isPolar){var t=e.startAngle;return e.endAngle-t==2*Math.PI}return!1}(t)?t.isTransposed?[(a=1/i*Zp(n,"widthRatio.multiplePie",1/1.3))/2,1-a/2]:[0,1-1/i]:[a=1/i/2,1-a]}return r}function ew(e,t){var n={start:{x:0,y:0},end:{x:0,y:0}};e.isRect?n=function(e){var t,n;switch(e){case ud.TOP:t={x:0,y:1},n={x:1,y:1};break;case ud.RIGHT:t={x:1,y:0},n={x:1,y:1};break;case ud.BOTTOM:t={x:0,y:0},n={x:1,y:0};break;case ud.LEFT:t={x:0,y:0},n={x:0,y:1};break;default:t=n={x:0,y:0}}return{start:t,end:n}}(t):e.isPolar&&(n=function(e){var t,n;return e.isTransposed?(t={x:0,y:0},n={x:1,y:0}):(t={x:0,y:0},n={x:0,y:1}),{start:t,end:n}}(e));var r=n.start,i=n.end;return{start:e.convert(r),end:e.convert(i)}}function tw(e){var t=e.start,n=e.end;return t.x===n.x}function nw(e,t){var n=e.start,r=e.end;return tw(e)?(n.y-r.y)*(t.x-n.x)>0?1:-1:(r.x-n.x)*(n.y-t.y)>0?-1:1}function rw(e,t){var n=Zp(e,["components","axis"],{});return Yp({},Zp(n,["common"],{}),Yp({},Zp(n,[t],{})))}function iw(e,t,n){var r=Zp(e,["components","axis"],{});return Yp({},Zp(r,["common","title"],{}),Yp({},Zp(r,[t,"title"],{})),n)}function aw(e){var t=e.x,n=e.y,r=e.circleCenter,i=n.start>n.end,a=e.isTransposed?e.convert({x:i?0:1,y:0}):e.convert({x:0,y:i?0:1}),o=[a.x-r.x,a.y-r.y],s=[1,0],l=a.y>r.y?Jf(o,s):-1*Jf(o,s),c=l+(t.end-t.start);return{center:r,radius:Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2)),startAngle:l,endAngle:c}}function ow(e,t){return Fp(e)?!1!==e&&{}:Zp(e,[t])}function sw(e,t){return Zp(e,"position",t)}function lw(e,t){return Zp(t,["title","text"],ZT(e))}var cw=function(){function e(e,t){this.destroyed=!1,this.facets=[],this.view=e,this.cfg=Yp({},this.getDefaultCfg(),t)}return e.prototype.init=function(){this.container||(this.container=this.createContainer());var e=this.view.getData();this.facets=this.generateFacets(e)},e.prototype.render=function(){this.renderViews()},e.prototype.update=function(){},e.prototype.clear=function(){this.clearFacetViews()},e.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},e.prototype.facetToView=function(e){var t=e.region,n=e.data,r=e.padding,i=void 0===r?this.cfg.padding:r,a=this.view.createView({region:t,padding:i});a.data(n||[]),e.view=a,this.beforeEachView(a,e);var o=this.cfg.eachView;return o&&o(a,e),this.afterEachView(a,e),a},e.prototype.createContainer=function(){return this.view.getLayer(ld.FORE).addGroup()},e.prototype.renderViews=function(){this.createFacetViews()},e.prototype.createFacetViews=function(){var e=this;return this.facets.map((function(t){return e.facetToView(t)}))},e.prototype.clearFacetViews=function(){var e=this;Xh(this.facets,(function(t){t.view&&(e.view.removeView(t.view),t.view=void 0)}))},e.prototype.parseSpacing=function(){var e=this.view.viewBBox,t=e.width,n=e.height;return this.cfg.spacing.map((function(e,r){return Ep(e)?e/(0===r?t:n):parseFloat(e)/100}))},e.prototype.getFieldValues=function(e,t){var n=[],r={};return Xh(e,(function(e){var i=e[t];Uh(i)||r[i]||(n.push(i),r[i]=!0)})),n},e.prototype.getRegion=function(e,t,n,r){var i=this.parseSpacing(),a=i[0],o=i[1],s=(1+a)/(0===t?1:t)-a,l=(1+o)/(0===e?1:e)-o,c={x:(s+a)*n,y:(l+o)*r};return{start:c,end:{x:c.x+s,y:c.y+l}}},e.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},e.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:"#666",fontFamily:this.view.getTheme().fontFamily}}},e.prototype.processAxis=function(e,t){var n=e.getOptions(),r=n.coordinate,i=e.geometries;if("rect"===Zp(r,"type","rect")&&i.length){Uh(n.axes)&&(n.axes={});var a=n.axes,o=i[0].getXYFields(),s=o[0],l=o[1],c=ow(a,s),u=ow(a,l);!1!==c&&(n.axes[s]=this.getXAxisOption(s,a,c,t)),!1!==u&&(n.axes[l]=this.getYAxisOption(l,a,u,t))}},e.prototype.getFacetDataFilter=function(e){return function(t){return dp(e,(function(e){var n=e.field,r=e.value;return!(!Uh(r)&&n)||t[n]===r}))}},e}(),uw={},hw=function(e,t){uw[Op(e)]=t},pw=function(){function e(e,t){this.context=e,this.cfg=t,e.addAction(this)}return e.prototype.applyCfg=function(e){zp(this,e)},e.prototype.init=function(){this.applyCfg(this.cfg)},e.prototype.destroy=function(){this.context.removeAction(this),this.context=null},e}(),dw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.execute=function(){this.callback&&this.callback(this.context)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.callback=null},t}(pw),fw={};function mw(e){var t=fw[e];return Zp(t,"ActionClass")}function gw(e,t,n){fw[e]={ActionClass:t,cfg:n}}function vw(e,t){var n=new dw(t);return n.callback=e,n.name="callback",n}function yw(e,t){for(var n=[e[0]],r=1,i=e.length;r<i;r+=2){var a=t.convert({x:e[r],y:e[r+1]});n.push(a.x,a.y)}return n}function xw(e,t){var n=t.isTransposed,r=e[1],i=e[6],a=e[7],o=t.convert({x:i,y:a});return["A",r,r,0,0,n?0:1,o.x,o.y]}function Ew(e,t,n){for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l,c,u,h=[],p=!!r;if(p){o=r[0],s=r[1];for(var d=0,f=e.length;d<f;d++)o=Vf([0,0],o,g=e[d]),s=Wf([0,0],s,g)}d=0;for(var m=e.length;d<m;d++){var g=e[d];if(0!==d||n)if(d!==m-1||n){i=e[n?d?d-1:m-1:d-1],a=e[n?(d+1)%m:d+1];var v=[0,0];v=Xf(v=em(v,a,i),v,t);var y=qf(g,i),x=qf(g,a),E=y+x;0!==E&&(y/=E,x/=E);var b=Xf([0,0],v,-y),C=Xf([0,0],v,x);c=Yf([0,0],g,b),l=Vf([0,0],l=Yf([0,0],g,C),Wf([0,0],a,g)),l=Wf([0,0],l,Vf([0,0],a,g)),c=Vf([0,0],c=Yf([0,0],g,b=Xf([0,0],b=em([0,0],l,g),-y/x)),Wf([0,0],i,g)),c=Wf([0,0],c,Vf([0,0],i,g)),l=Yf([0,0],g,C=Xf([0,0],C=em([0,0],g,c),x/y)),p&&(c=Vf([0,0],c=Wf([0,0],c,o),s),l=Vf([0,0],l=Wf([0,0],l,o),s)),h.push(u),h.push(c),u=l}else c=g,h.push(u),h.push(c);else u=g}return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a++)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}function bw(e,t){return function(e,t){var n=[];if(e.length){n.push(["M",e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var a=e[r];n.push(["L",a.x,a.y])}t&&n.push(["Z"])}return n}(e,t)}function Cw(e,t,n){var r=[],i=e[0],a=null;if(e.length<=2)return bw(e,t);for(var o=0,s=e.length;o<s;o++){var l=e[o];a&&a.x===l.x&&a.y===l.y||(r.push(l.x),r.push(l.y),a=l)}var c=Ew(r,t,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}function Tw(e,t){var n,r,i,a=[];return Xh(t,(function(o,s){switch(o[0].toLowerCase()){case"m":case"c":case"q":a.push(yw(o,e));break;case"l":n=t[s-1],r=o,i=e.isTransposed,(i?n[n.length-2]===r[1]:n[n.length-1]===r[2])?a=a.concat(function(e,t,n){var r=n.isTransposed,i=n.startAngle,a=n.endAngle,o="a"===e[0].toLowerCase()?{x:e[6],y:e[7]}:{x:e[1],y:e[2]},s={x:t[1],y:t[2]},l=[],c=r?"y":"x",u=Math.abs(s[c]-o[c])*(a-i),h=s[c]>=o[c]?1:0,p=u>Math.PI?1:0,d=n.convert(s),f=VT(n,d);if(f>=.5)if(u===2*Math.PI){var m={x:(s.x+o.x)/2,y:(s.y+o.y)/2},g=n.convert(m);l.push(["A",f,f,0,p,h,g.x,g.y]),l.push(["A",f,f,0,p,h,d.x,d.y])}else l.push(["A",f,f,0,p,h,d.x,d.y]);return l}(n,r,e)):a.push(yw(o,e));break;case"a":a.push(xw(o,e));break;case"z":default:a.push(o)}})),function(e){Xh(e,(function(t,n){if("a"===t[0].toLowerCase()){var r=e[n-1],i=e[n+1];i&&"a"===i[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&i&&"l"===i[0].toLowerCase()&&(i[0]="M")}}))}(a),a}function ww(e,t){var n=e.event.target.getCanvasBBox();return n.width>=t||n.height>=t?n:null}function Sw(e){var t,n=e.event.target;return n&&(t=n.get("element")),t}function kw(e){var t,n=e.event.target;return n&&(t=n.get("delegateObject")),t}function _w(e){var t=e.event.gEvent;return!(t&&t.fromShape&&t.toShape&&t.fromShape.get("element")===t.toShape.get("element"))}function Aw(e){return e&&e.component&&e.component.isList()}function Ow(e){return e&&e.component&&e.component.isSlider()}function Iw(e){var t=e.event.target;return t&&"mask"===t.get("name")}function Mw(e,t){var n,r,i,a;if("path"===e.event.target.get("type")){var o=function(e,t){var n=e.event.target,r=n.getCanvasBBox();return r.width>=t||r.height>=t?n.attr("path"):null}(e,t);if(!o)return;return n=e.view,r=o,i=Fw(n),a=Dw(r),i.filter((function(e){var t,n,r=e.shape;if("path"===r.get("type"))t=Dw(r.attr("path"));else{var i=r.getCanvasBBox();t=[[(n=i).minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY]]}return function(e,t){if(e.length<2||t.length<2)return!1;var n,r,i=Pv(e),a=Pv(t);if(n=i,(r=a).minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)return!1;var o=!1;if(Xh(t,(function(t){if(Nv(e,t[0],t[1]))return o=!0,!1})),o)return!0;if(Xh(e,(function(e){if(Nv(t,e[0],e[1]))return o=!0,!1})),o)return!0;var s=Fv(e),l=Fv(t),c=!1;return Xh(l,(function(e){if(Lv(s,e))return c=!0,!1})),c}(a,t)}))}var s=ww(e,t);return s?Rw(e.view,s):null}function Nw(e,t,n){var r=ww(e,n);if(!r)return null;var i=e.view,a=Gw(i,t,{x:r.x,y:r.y}),o=Gw(i,t,{x:r.maxX,y:r.maxY});return Rw(t,{minX:a.x,minY:a.y,maxX:o.x,maxY:o.y})}function Fw(e){var t=e.geometries,n=[];return Xh(t,(function(e){var t=e.elements;n=n.concat(t)})),e.views&&e.views.length&&Xh(e.views,(function(e){n=n.concat(Fw(e))})),n}function Lw(e,t){var n=e.geometries,r=[];return Xh(n,(function(e){var n=e.getElementsBy((function(e){return e.hasState(t)}));r=r.concat(n)})),r}function Pw(e,t){var n=e.getModel().data;return Vh(n)?n[0][t]:n[t]}function Rw(e,t){var n=Fw(e),r=[];return Xh(n,(function(e){var n=e.shape.getCanvasBBox();(function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)})(t,n)&&r.push(e)})),r}function Dw(e){var t=[];return Xh(e,(function(e){if("A"!==e[0])for(var n=1;n<e.length;n+=2)t.push([e[n],e[n+1]]);else{var r=e.length;t.push([e[r-2],e[r-1]])}})),t}function Bw(e){return e.getComponents().map((function(e){return e.component}))}function zw(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function Hw(e,t){return e.x<=t.x&&e.maxX>=t.x&&e.y<=t.y&&e.maxY>t.y}function jw(e){var t=e.parent,n=null;return t&&(n=t.views.filter((function(t){return t!==e}))),n}function Gw(e,t,n){var r=function(e,t){return e.getCoordinate().invert(t)}(e,n);return t.getCoordinate().convert(r)}function $w(e,t,n,r){var i=!1;return Xh(e,(function(e){if(e[n]===t[n]&&e[r]===t[r])return i=!0,!1})),i}function Yw(e,t){var n=e.getScaleByField(t);return!n&&e.views&&Xh(e.views,(function(e){if(n=Yw(e,t))return!1})),n}var Uw=function(){function e(e){this.actions=[],this.event=null,this.cacheMap={},this.view=e}return e.prototype.cache=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length)return this.cacheMap[e[0]];2===e.length&&(this.cacheMap[e[0]]=e[1])},e.prototype.getAction=function(e){return this.actions.find((function(t){return t.name===e}))},e.prototype.addAction=function(e){this.actions.push(e)},e.prototype.removeAction=function(e){var t=this.actions,n=this.actions.indexOf(e);n>=0&&t.splice(n,1)},e.prototype.getCurrentPoint=function(){var e=this.event;return e?e.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(e.clientX,e.clientY):{x:e.x,y:e.y}:null},e.prototype.getCurrentShape=function(){return Zp(this.event,["gEvent","shape"])},e.prototype.isInPlot=function(){var e=this.getCurrentPoint();return!!e&&this.view.isPointInPlot(e)},e.prototype.isInShape=function(e){var t=this.getCurrentShape();return!!t&&t.get("name")===e},e.prototype.isInComponent=function(e){var t=Bw(this.view),n=this.getCurrentPoint();return!!n&&!!t.find((function(t){var r=t.getBBox();return e?t.get("name")===e&&Hw(r,n):Hw(r,n)}))},e.prototype.destroy=function(){Xh(this.actions.slice(),(function(e){e.destroy()})),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},e}(),Vw=function(){function e(e,t){this.view=e,this.cfg=t}return e.prototype.init=function(){this.initEvents()},e.prototype.initEvents=function(){},e.prototype.clearEvents=function(){},e.prototype.destroy=function(){this.clearEvents()},e}();function Ww(e,t,n){var r=e.split(":"),i=r[0],a=t.getAction(i)||function(e,t){var n=fw[e],r=null;return n&&((r=new(0,n.ActionClass)(t,n.cfg)).name=e,r.init()),r}(i,t);if(!a)throw new Error("There is no action named ".concat(i));return{action:a,methodName:r[1],arg:n}}function Xw(e){var t=e.action,n=e.methodName,r=e.arg;if(!t[n])throw new Error("Action(".concat(t.name,") doesn't have a method called ").concat(n));t[n](r)}var qw="start",Kw="showEnable",Qw="end",Zw="rollback",Jw="processing",eS=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.callbackCaches={},r.emitCaches={},r.steps=n,r}return Lh(t,e),t.prototype.init=function(){this.initContext(),e.prototype.init.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},t.prototype.initEvents=function(){var e=this;Xh(this.steps,(function(t,n){Xh(t,(function(t){var r=e.getActionCallback(n,t);r&&e.bindEvent(t.trigger,r)}))}))},t.prototype.clearEvents=function(){var e=this;Xh(this.steps,(function(t,n){Xh(t,(function(t){var r=e.getActionCallback(n,t);r&&e.offEvent(t.trigger,r)}))}))},t.prototype.initContext=function(){var e=this.view,t=new Uw(e);this.context=t,Xh(this.steps,(function(e){Xh(e,(function(e){if(Yh(e.action))e.actionObject={action:vw(e.action,t),methodName:"execute"};else if(lp(e.action))e.actionObject=Ww(e.action,t,e.arg);else if(Vh(e.action)){var n=e.action,r=Vh(e.arg)?e.arg:[e.arg];e.actionObject=[],Xh(n,(function(n,i){e.actionObject.push(Ww(n,t,r[i]))}))}}))}))},t.prototype.isAllowStep=function(e){var t=this.currentStepName,n=this.steps;if(t===e)return!0;if(e===Kw)return!0;if(e===Jw)return t===qw;if(e===qw)return t!==Jw;if(e===Qw)return t===Jw||t===qw;if(e===Zw){if(n[Qw])return t===Qw;if(t===qw)return!0}return!1},t.prototype.isAllowExecute=function(e,t){if(this.isAllowStep(e)){var n=this.getKey(e,t);return(!t.once||!this.emitCaches[n])&&(!t.isEnable||t.isEnable(this.context))}return!1},t.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},t.prototype.afterExecute=function(e,t){e!==Kw&&this.currentStepName!==e&&this.enterStep(e);var n=this.getKey(e,t);this.emitCaches[n]=!0},t.prototype.getKey=function(e,t){return e+t.trigger+t.action},t.prototype.getActionCallback=function(e,t){var n=this,r=this.context,i=this.callbackCaches,a=t.actionObject;if(t.action&&a){var o=this.getKey(e,t);if(!i[o]){var s=function(i){r.event=i,n.isAllowExecute(e,t)?(Vh(a)?Xh(a,(function(e){r.event=i,Xw(e)})):(r.event=i,Xw(a)),n.afterExecute(e,t),t.callback&&(r.event=i,t.callback(r))):r.event=null};t.debounce?i[o]=jp(s,t.debounce.wait,t.debounce.immediate):t.throttle?i[o]=rd(s,t.throttle.wait,{leading:t.throttle.leading,trailing:t.throttle.trailing}):i[o]=s}return i[o]}return null},t.prototype.bindEvent=function(e,t){var n=e.split(":");"window"===n[0]?window.addEventListener(n[1],t):"document"===n[0]?document.addEventListener(n[1],t):this.view.on(e,t)},t.prototype.offEvent=function(e,t){var n=e.split(":");"window"===n[0]?window.removeEventListener(n[1],t):"document"===n[0]?document.removeEventListener(n[1],t):this.view.off(e,t)},t}(Vw),tS={};function nS(e,t){tS[Op(e)]=t}function rS(e,t,n){var r=function(e){return tS[Op(e)]}(e);if(!r)return null;if(Zh(r)){var i=zp(Hp(r),n);return new eS(t,i)}return new r(t,n)}function iS(e){var t,n={point:{default:{fill:e.pointFillColor,r:e.pointSize,stroke:e.pointBorderColor,lineWidth:e.pointBorder,fillOpacity:e.pointFillOpacity},active:{stroke:e.pointActiveBorderColor,lineWidth:e.pointActiveBorder},selected:{stroke:e.pointSelectedBorderColor,lineWidth:e.pointSelectedBorder},inactive:{fillOpacity:e.pointInactiveFillOpacity,strokeOpacity:e.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:e.hollowPointFillColor,lineWidth:e.hollowPointBorder,stroke:e.hollowPointBorderColor,strokeOpacity:e.hollowPointBorderOpacity,r:e.hollowPointSize},active:{stroke:e.hollowPointActiveBorderColor,strokeOpacity:e.hollowPointActiveBorderOpacity},selected:{lineWidth:e.hollowPointSelectedBorder,stroke:e.hollowPointSelectedBorderColor,strokeOpacity:e.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:e.hollowPointInactiveBorderOpacity}},area:{default:{fill:e.areaFillColor,fillOpacity:e.areaFillOpacity,stroke:null},active:{fillOpacity:e.areaActiveFillOpacity},selected:{fillOpacity:e.areaSelectedFillOpacity},inactive:{fillOpacity:e.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:e.hollowAreaBorderColor,lineWidth:e.hollowAreaBorder,strokeOpacity:e.hollowAreaBorderOpacity},active:{fill:null,lineWidth:e.hollowAreaActiveBorder},selected:{fill:null,lineWidth:e.hollowAreaSelectedBorder},inactive:{strokeOpacity:e.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:e.intervalFillColor,fillOpacity:e.intervalFillOpacity},active:{stroke:e.intervalActiveBorderColor,lineWidth:e.intervalActiveBorder},selected:{stroke:e.intervalSelectedBorderColor,lineWidth:e.intervalSelectedBorder},inactive:{fillOpacity:e.intervalInactiveFillOpacity,strokeOpacity:e.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:e.hollowIntervalFillColor,stroke:e.hollowIntervalBorderColor,lineWidth:e.hollowIntervalBorder,strokeOpacity:e.hollowIntervalBorderOpacity},active:{stroke:e.hollowIntervalActiveBorderColor,lineWidth:e.hollowIntervalActiveBorder,strokeOpacity:e.hollowIntervalActiveBorderOpacity},selected:{stroke:e.hollowIntervalSelectedBorderColor,lineWidth:e.hollowIntervalSelectedBorder,strokeOpacity:e.hollowIntervalSelectedBorderOpacity},inactive:{stroke:e.hollowIntervalInactiveBorderColor,lineWidth:e.hollowIntervalInactiveBorder,strokeOpacity:e.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:e.lineBorderColor,lineWidth:e.lineBorder,strokeOpacity:e.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:e.lineActiveBorder},selected:{lineWidth:e.lineSelectedBorder},inactive:{strokeOpacity:e.lineInactiveBorderOpacity}}},r=function(e){return{title:{autoRotate:!0,position:"center",spacing:e.axisTitleSpacing,style:{fill:e.axisTitleTextFillColor,fontSize:e.axisTitleTextFontSize,lineHeight:e.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:e.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:e.axisLabelOffset,style:{fill:e.axisLabelFillColor,fontSize:e.axisLabelFontSize,lineHeight:e.axisLabelLineHeight,fontFamily:e.fontFamily}},line:{style:{lineWidth:e.axisLineBorder,stroke:e.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:e.axisGridBorderColor,lineWidth:e.axisGridBorder,lineDash:e.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:e.axisTickLineBorder,stroke:e.axisTickLineBorderColor},alignTick:!0,length:e.axisTickLineLength},subTickLine:null,animate:!0}}(e),i=function(e){return{title:null,marker:{symbol:"circle",spacing:e.legendMarkerSpacing,style:{r:e.legendCircleMarkerSize,fill:e.legendMarkerColor}},itemName:{spacing:5,style:{fill:e.legendItemNameFillColor,fontFamily:e.fontFamily,fontSize:e.legendItemNameFontSize,lineHeight:e.legendItemNameLineHeight,fontWeight:e.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:e.legendPageNavigatorMarkerSize,inactiveFill:e.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:e.legendPageNavigatorMarkerInactiveFillOpacity,fill:e.legendPageNavigatorMarkerFillColor,opacity:e.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:e.legendPageNavigatorTextFillColor,fontSize:e.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:e.legendItemSpacing,itemMarginBottom:e.legendItemMarginBottom,padding:e.legendPadding}}(e);return{background:e.backgroundColor,defaultColor:e.brandColor,subColor:e.subColor,semanticRed:e.paletteSemanticRed,semanticGreen:e.paletteSemanticGreen,padding:"auto",fontFamily:e.fontFamily,columnWidthRatio:.5,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:e.paletteQualitative10,colors20:e.paletteQualitative20,sequenceColors:e.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:function(e){var t=e.geometry.coordinate;if(t.isPolar&&t.isTransposed){var r=zT(e.getModel(),t),i=(r.startAngle+r.endAngle)/2;return{matrix:am(null,[["t",7.5*Math.cos(i),7.5*Math.sin(i)]])}}return n.interval.selected}}},"hollow-rect":{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},line:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},tick:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},funnel:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}},pyramid:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},line:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},dot:{default:{style:Ph(Ph({},n.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:Ph(Ph({},n.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:Ph(Ph({},n.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:Ph(Ph({},n.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:Ph(Ph({},n.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:Ph(Ph({},n.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:Ph(Ph({},n.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:Ph(Ph({},n.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hvh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},polygon:{polygon:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},point:{circle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},square:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},bowtie:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},diamond:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},hexagon:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},triangle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"triangle-down":{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"hollow-circle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-square":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-bowtie":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-diamond":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-hexagon":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle-down":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},cross:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},tick:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},plus:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},hyphen:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},line:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}}},area:{area:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},smooth:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},line:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"smooth-line":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}},schema:{candle:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},box:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}}},edge:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},arc:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},violin:{violin:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hollow:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"hollow-smooth":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}}},components:{axis:{common:r,top:{position:"top",grid:null,title:null,verticalLimitLength:.5},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:.5},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:Yp({},r.grid,{line:{type:"line"}})},radius:{title:null,grid:Yp({},r.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:e.legendVerticalPadding},left:{layout:"vertical",padding:e.legendVerticalPadding},top:{layout:"horizontal",padding:e.legendHorizontalPadding},bottom:{layout:"horizontal",padding:e.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:e.sliderRailHeight,defaultLength:e.sliderRailWidth,style:{fill:e.sliderRailFillColor,stroke:e.sliderRailBorderColor,lineWidth:e.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:e.sliderLabelTextFillColor,fontSize:e.sliderLabelTextFontSize,lineHeight:e.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:e.fontFamily}},handler:{size:e.sliderHandlerWidth,style:{fill:e.sliderHandlerFillColor,stroke:e.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:e.tooltipCrosshairsBorderColor,lineWidth:e.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(t={},t["".concat("g2-tooltip")]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:e.tooltipContainerFillColor,opacity:e.tooltipContainerFillOpacity,boxShadow:e.tooltipContainerShadow,borderRadius:"".concat(e.tooltipContainerBorderRadius,"px"),color:e.tooltipTextFillColor,fontSize:"".concat(e.tooltipTextFontSize,"px"),fontFamily:e.fontFamily,lineHeight:"".concat(e.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},t["".concat(iT)]={marginBottom:"12px",marginTop:"12px"},t["".concat(aT)]={margin:0,listStyleType:"none",padding:0},t["".concat("g2-tooltip-list-item")]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},t["".concat("g2-tooltip-marker")]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t["".concat("g2-tooltip-value")]={display:"inline-block",float:"right",marginLeft:"30px"},t)},annotation:{arc:{style:{stroke:e.annotationArcBorderColor,lineWidth:e.annotationArcBorder},animate:!0},line:{style:{stroke:e.annotationLineBorderColor,lineDash:e.annotationLineDash,lineWidth:e.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textAlign:"start",fontFamily:e.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:e.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:e.annotationRegionBorder,stroke:e.annotationRegionBorderColor,fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:e.brandColor,lineWidth:2}},line:{style:{stroke:e.annotationLineBorderColor,lineWidth:e.annotationLineBorder},length:e.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:e.cSliderBackgroundFillColor,opacity:e.cSliderBackgroundFillOpacity},foregroundStyle:{fill:e.cSliderForegroundFillColor,opacity:e.cSliderForegroundFillOpacity},handlerStyle:{width:e.cSliderHandlerWidth,height:e.cSliderHandlerHeight,fill:e.cSliderHandlerFillColor,opacity:e.cSliderHandlerFillOpacity,stroke:e.cSliderHandlerBorderColor,lineWidth:e.cSliderHandlerBorder,radius:e.cSliderHandlerBorderRadius,highLightFill:e.cSliderHandlerHighlightFillColor},textStyle:{fill:e.cSliderTextFillColor,opacity:e.cSliderTextFillOpacity,fontSize:e.cSliderTextFontSize,lineHeight:e.cSliderTextLineHeight,fontWeight:e.cSliderTextFontWeight,stroke:e.cSliderTextBorderColor,lineWidth:e.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:e.scrollbarTrackFillColor,thumbColor:e.scrollbarThumbFillColor}},hover:{style:{thumbColor:e.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:e.labelFillColor,fontSize:e.labelFontSize,fontFamily:e.fontFamily,stroke:e.labelBorderColor,lineWidth:e.labelBorder},fillColorDark:e.labelFillColorDark,fillColorLight:e.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:e.innerLabelFillColor,fontSize:e.innerLabelFontSize,fontFamily:e.fontFamily,stroke:e.innerLabelBorderColor,lineWidth:e.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:e.overflowLabelFillColor,fontSize:e.overflowLabelFontSize,fontFamily:e.fontFamily,stroke:e.overflowLabelBorderColor,lineWidth:e.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:e.labelLineBorder}},autoRotate:!0}}}var aS="#000",oS="#595959",sS="#8C8C8C",lS="#BFBFBF",cS="#D9D9D9",uS="#F0F0F0",hS="#FFFFFF",pS=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],dS=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],fS=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],mS=function(e){void 0===e&&(e={});var t=e.backgroundColor,n=void 0===t?"transparent":t,r=e.subColor,i=void 0===r?"rgba(0,0,0,0.05)":r,a=e.paletteQualitative10,o=void 0===a?pS:a,s=e.paletteQualitative20,l=void 0===s?dS:s,c=e.paletteSemanticRed,u=void 0===c?"#F4664A":c,h=e.paletteSemanticGreen,p=void 0===h?"#30BF78":h,d=e.paletteSemanticYellow,f=void 0===d?"#FAAD14":d,m=e.paletteSequence,g=void 0===m?fS:m,v=e.fontFamily,y=void 0===v?'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"':v,x=e.brandColor,E=void 0===x?o[0]:x;return{backgroundColor:n,brandColor:E,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:u,paletteSemanticGreen:p,paletteSemanticYellow:f,paletteSequence:g,fontFamily:y,axisLineBorderColor:lS,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:oS,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:lS,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:cS,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:sS,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:cS,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:sS,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:E,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:oS,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:aS,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:aS,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:sS,legendPageNavigatorTextFontSize:12,sliderRailFillColor:cS,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:sS,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:uS,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:lS,annotationArcBorderColor:cS,annotationArcBorder:1,annotationLineBorderColor:lS,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:oS,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:aS,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:lS,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:oS,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:oS,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:hS,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:oS,overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:hS,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:lS,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:E,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:hS,pointBorderOpacity:1,pointActiveBorderColor:aS,pointSelectedBorder:2,pointSelectedBorderColor:aS,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:E,hollowPointBorderOpacity:.95,hollowPointFillColor:hS,hollowPointActiveBorder:1,hollowPointActiveBorderColor:aS,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:aS,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:E,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:E,areaFillOpacity:.25,areaActiveFillColor:E,areaActiveFillOpacity:.5,areaSelectedFillColor:E,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:E,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:aS,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:aS,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:E,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:aS,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:aS,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:E,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:hS,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:aS,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:aS,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}};function gS(e){var t=e.styleSheet,n=void 0===t?{}:t,r=Rh(e,["styleSheet"]),i=mS(n);return Yp({},iS(i),r)}mS();var vS={default:gS({})};function yS(e){return Zp(vS,Op(e),vS.default)}function xS(e,t,n){return bp(n.translate(e),n.translate(t))}function ES(e,t,n){var r=n.coordinate,i=n.getYScale(),a=i.field,o=r.invert(t),s=i.invert(o.y);return Jh(e,(function(e){var t=e._origin;return t[a][0]<=s&&t[a][1]>=s}))||e[e.length-1]}var bS=Gp((function(e){if(e.isCategory)return 1;for(var t=e.values,n=t.length,r=e.translate(t[0]),i=r,a=0;a<n;a++){var o=t[a],s=e.translate(o);s<r&&(r=s),s>i&&(i=s)}return(i-r)/(n-1)}));function CS(e){for(var t,n=0,r=function(e){var t=_p(e.attributes);return jh(t,(function(e){return Hh(Md,e.type)}))}(e);n<r.length;n++){var i=r[n],a=i.getScale(i.type);if(a&&a.isLinear){t=a;break}}var o=e.getXScale(),s=e.getYScale();return t||s||o}function TS(e,t,n){if(0===t.length)return null;var r=n.type,i=n.getXScale(),a=n.getYScale(),o=i.field,s=a.field,l=null;if("heatmap"===r||"point"===r){for(var c=n.coordinate.invert(e),u=i.invert(c.x),h=a.invert(c.y),p=1/0,d=0;d<t.length;d++){var f=t[d],m=f._origin,g=Math.pow(m[o]-u,2)+Math.pow(m[s]-h,2);g<p&&(p=g,l=f)}return l}var v=t[0],y=t[t.length-1],x=function(e,t){var n=t.coordinate,r=t.getXScale(),i=r.range,a=i[i.length-1],o=i[0],s=n.invert(e).x;return n.isPolar&&s>(1+a)/2&&(s=o),r.translate(r.invert(s))}(e,n),E=v._origin[o],b=v._origin[s],C=y._origin[o],T=a.isLinear&&Vh(b);if(Vh(E)){for(d=0;d<t.length;d++){m=(O=t[d])._origin;if(i.translate(m[o][0])<=x&&i.translate(m[o][1])>=x){if(!T){l=O;break}Vh(l)||(l=[]),l.push(O)}}Vh(l)&&(l=ES(l,e,n))}else{var w=void 0;if(i.isLinear||"timeCat"===i.type){if((x>i.translate(C)||x<i.translate(E))&&(x>i.max||x<i.min))return null;for(var S=0,k=t.length-1,_=void 0;S<=k;){var A=t[_=Math.floor((S+k)/2)]._origin[o];if(xS(A,x,i))return t[_];i.translate(A)<=i.translate(x)?(S=_+1,y=t[_],w=t[_+1]):(0===k&&(y=t[0]),k=_-1)}}else{for(d=0;d<t.length;d++){var O;if(xS((m=(O=t[d])._origin)[o],x,i)){if(!T){l=O;break}Vh(l)||(l=[]),l.push(O)}else i.translate(m[o])<=x&&(y=O,w=t[d+1])}Vh(l)&&(l=ES(l,e,n))}y&&w&&Math.abs(i.translate(y._origin[o])-x)>Math.abs(i.translate(w._origin[o])-x)&&(y=w)}var I=bS(n.getXScale());return!l&&Math.abs(i.translate(y._origin[o])-x)<=I/2&&(l=y),l}function wS(e,t,n,r){void 0===n&&(n=""),void 0===r&&(r=!1);var i,a=e._origin,o=function(e,t,n){var r=t.getAttribute("position").getFields(),i=t.scales,a=Yh(n)||!n?r[0]:n,o=i[a],s=o?o.getText(e[a]):e[a]||a;return Yh(n)?n(s,e):s}(a,t,n),s=t.tooltipOption,l=t.theme.defaultColor,c=[];function u(t,n){if(r||!Uh(n)&&""!==n){var i={title:o,data:a,mappingData:e,name:t,value:n,color:e.color||l,marker:!0};c.push(i)}}if(Wh(s)){var h=s.fields,p=s.callback;if(p){var d=h.map((function(t){return e._origin[t]})),f=p.apply(void 0,d),m=Ph({data:e._origin,mappingData:e,title:o,color:e.color||l,marker:!0},f);c.push(m)}else for(var g=t.scales,v=0,y=h;v<y.length;v++){var x=y[v];if(!Uh(a[x])){var E=g[x];u(ZT(E),i=E.getText(a[x]))}}}else{var b=CS(t);i=function(e,t){var n=e[t.field];return Vh(n)?n.map((function(e){return t.getText(e)})).join("-"):t.getText(n)}(a,b),u(function(e,t){var n,r=t.getGroupScales();if(r.length&&(n=r[0]),n){var i=n.field;return n.getText(e[i])}return ZT(CS(t))}(a,t),i)}return c}function SS(e,t,n,r){var i=r.showNil,a=[],o=e.dataArray;if(!Wp(o)){e.sort(o);for(var s=0,l=o;s<l.length;s++){var c=TS(t,l[s],e);if(c){var u=e.getElementId(c),h=e.elementsMap[u];if("heatmap"===e.type||h.visible){var p=wS(c,e,n,i);p.length&&a.push(p)}}}}return a}function kS(e,t,n,r){var i=r.showNil,a=[],o=e.container.getShape(t.x,t.y);if(o&&o.get("visible")&&o.get("origin")){var s=wS(o.get("origin").mappingData,e,n,i);s.length&&a.push(s)}return a}function _S(e,t,n){for(var r=[],i=e.geometries,a=n.shared,o=n.title,s=n.reversed,l=0,c=i;l<c.length;l++){var u=c[l];if(u.visible&&!1!==u.tooltipOption){var h=u.type,p=void 0;(p=["point","edge","polygon"].includes(h)?kS(u,t,o,n):["area","line","path","heatmap"].includes(h)||!1!==a?SS(u,t,o,n):kS(u,t,o,n)).length&&(s&&p.reverse(),r.push(p))}}return r}function AS(e){void 0===e&&(e=0);var t=Vh(e)?e:[e];switch(t.length){case 0:t=[0,0,0,0];break;case 1:t=new Array(4).fill(t[0]);break;case 2:t=Bh(Bh([],t,!0),t,!0);break;case 3:t=Bh(Bh([],t,!0),[t[1]],!1);break;default:t=t.slice(0,4)}return t}var OS={};function IS(e,t){OS[e]=t}var MS=function(){function e(e){this.option=this.wrapperOption(e)}return e.prototype.update=function(e){return this.option=this.wrapperOption(e),this},e.prototype.hasAction=function(e){var t=this.option.actions;return fp(t,(function(t){return t[0]===e}))},e.prototype.create=function(e,t){var n=this.option,r=n.type,i=n.cfg,a="theta"===r,o=Ph({start:e,end:t},i),s=function(e){return Vx[e.toLowerCase()]}(a?"polar":r);return this.coordinate=new s(o),this.coordinate.type=r,a&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},e.prototype.adjust=function(e,t){return this.coordinate.update({start:e,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},e.prototype.rotate=function(e){return this.option.actions.push(["rotate",e]),this},e.prototype.reflect=function(e){return this.option.actions.push(["reflect",e]),this},e.prototype.scale=function(e,t){return this.option.actions.push(["scale",e,t]),this},e.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},e.prototype.getOption=function(){return this.option},e.prototype.getCoordinate=function(){return this.coordinate},e.prototype.wrapperOption=function(e){return Ph({type:"rect",actions:[],cfg:{}},e)},e.prototype.execActions=function(e){var t=this;Xh(this.option.actions,(function(n){var r,i=n[0],a=n.slice(1);(!!Uh(e)||e.includes(i))&&(r=t.coordinate)[i].apply(r,a)}))},e}(),NS=function(){function e(e,t,n){this.view=e,this.gEvent=t,this.data=n,this.type=t.type}return e.fromData=function(t,n,r){return new e(t,new Tf(n,{}),r)},Object.defineProperty(e.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},e.prototype.clone=function(){return new e(this.view,this.gEvent,this.data)},e}();function FS(e){var t=e.getController("axis"),n=e.getController("legend"),r=e.getController("annotation");[t,e.getController("slider"),e.getController("scrollbar"),n,r].forEach((function(e){e&&e.layout()}))}var LS=function(){function e(){this.scales=new Map,this.syncScales=new Map}return e.prototype.createScale=function(e,t,n,r){var i=n,a=this.getScaleMeta(r);if(0===t.length&&a){var o=a.scale,s={type:o.type};o.isCategory&&(s.values=o.values),i=Yp(s,a.scaleDef,n)}var l=QT(e,t,i);return this.cacheScale(l,n,r),l},e.prototype.sync=function(e,t){var n=this;this.syncScales.forEach((function(r,i){var a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=[];Xh(r,(function(e){var t=n.getScale(e);o=Ep(t.max)?Math.max(o,t.max):o,a=Ep(t.min)?Math.min(a,t.min):a,Xh(t.values,(function(e){s.includes(e)||s.push(e)}))})),Xh(r,(function(r){var i=n.getScale(r);if(i.isContinuous)i.change({min:a,max:o,values:s});else if(i.isCategory){var l=i.range,c=n.getScaleMeta(r);s&&!Zp(c,["scaleDef","range"])&&(l=JT(Yp({},i,{values:s}),e,t)),i.change({values:s,range:l})}}))}))},e.prototype.cacheScale=function(e,t,n){var r=this.getScaleMeta(n);r&&r.scale.type===e.type?(!function(e,t){if("identity"!==e.type&&"identity"!==t.type){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);e.change(n)}}(r.scale,e),r.scaleDef=t):(r={key:n,scale:e,scaleDef:t},this.scales.set(n,r));var i=this.getSyncKey(r);if(r.syncKey=i,this.removeFromSyncScales(n),i){var a=this.syncScales.get(i);a||(a=[],this.syncScales.set(i,a)),a.push(n)}},e.prototype.getScale=function(e){var t=this.getScaleMeta(e);if(!t){var n=pp(e.split("-")),r=this.syncScales.get(n);r&&r.length&&(t=this.getScaleMeta(r[0]))}return t&&t.scale},e.prototype.deleteScale=function(e){var t=this.getScaleMeta(e);if(t){var n=t.syncKey,r=this.syncScales.get(n);if(r&&r.length){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}}this.scales.delete(e)},e.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},e.prototype.removeFromSyncScales=function(e){var t=this;this.syncScales.forEach((function(n,r){var i=n.indexOf(e);if(-1!==i)return n.splice(i,1),0===n.length&&t.syncScales.delete(r),!1}))},e.prototype.getSyncKey=function(e){var t=e.scale,n=e.scaleDef,r=t.field,i=Zp(n,["sync"]);return!0===i?r:!1===i?void 0:i},e.prototype.getScaleMeta=function(e){return this.scales.get(e)},e}(),PS=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=e,this.right=t,this.bottom=n,this.left=r}return e.instance=function(t,n,r,i){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),new e(t,n,r,i)},e.prototype.max=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return this.top=Math.max(this.top,t),this.right=Math.max(this.right,n),this.bottom=Math.max(this.bottom,r),this.left=Math.max(this.left,i),this},e.prototype.shrink=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return this.top+=t,this.right+=n,this.bottom+=r,this.left+=i,this},e.prototype.inc=function(e,t){var n=e.width,r=e.height;switch(t){case ud.TOP:case ud.TOP_LEFT:case ud.TOP_RIGHT:this.top+=r;break;case ud.RIGHT:case ud.RIGHT_TOP:case ud.RIGHT_BOTTOM:this.right+=n;break;case ud.BOTTOM:case ud.BOTTOM_LEFT:case ud.BOTTOM_RIGHT:this.bottom+=r;break;case ud.LEFT:case ud.LEFT_TOP:case ud.LEFT_BOTTOM:this.left+=n}return this},e.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},e.prototype.clone=function(){return new(e.bind.apply(e,Bh([void 0],this.getPadding(),!1)))},e}();function RS(e){var t=e.padding;if(!function(e){return!Ep(e)&&!Vh(e)}(t))return new(PS.bind.apply(PS,Bh([void 0],AS(t),!1)));var n=e.viewBBox,r=new PS,i=[],a=[],o=[];return Xh(e.getComponents(),(function(e){var t=e.type;t===pd.AXIS?i.push(e):[pd.LEGEND,pd.SLIDER,pd.SCROLLBAR].includes(t)?a.push(e):t!==pd.GRID&&t!==pd.TOOLTIP&&o.push(e)})),Xh(i,(function(e){var t=e.component.getLayoutBBox(),i=new YT(t.x,t.y,t.width,t.height).exceed(n);r.max(i)})),Xh(a,(function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),a=t.get("padding"),o=new YT(i.x,i.y,i.width,i.height).expand(a);r.inc(o,n)})),Xh(o,(function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),a=new YT(i.x,i.y,i.width,i.height);r.inc(a,n)})),r}function DS(e,t,n){var r=n.instance();t.forEach((function(e){e.autoPadding=r.max(e.autoPadding.getPadding())}))}var BS=function(e){function t(t){var n=e.call(this,{visible:t.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=Object.keys(OS),n.scalePool=new LS,n.layoutFunc=FS,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(e){var t=e.name;if(!t.includes(":")){var r=n.createViewEvent(e);n.doPlotEvent(r),n.emit(t,r)}},n.onDelegateEvents=function(e){var t=e.name;if(t.includes(":")){var r=n.createViewEvent(e);n.emit(t,r)}};var r=t.id,i=void 0===r?ad("view"):r,a=t.parent,o=t.canvas,s=t.backgroundGroup,l=t.middleGroup,c=t.foregroundGroup,u=t.region,h=void 0===u?{start:{x:0,y:0},end:{x:1,y:1}}:u,p=t.padding,d=t.appendPadding,f=t.theme,m=t.options,g=t.limitInPlot,v=t.syncViewPadding;return n.parent=a,n.canvas=o,n.backgroundGroup=s,n.middleGroup=l,n.foregroundGroup=c,n.region=h,n.padding=p,n.appendPadding=d,n.options=Ph(Ph({},n.options),m),n.limitInPlot=g,n.id=i,n.syncViewPadding=v,n.themeObject=Wh(f)?Yp({},yS("default"),gS(f)):yS(f),n.init(),n}return Lh(t,e),t.prototype.setLayout=function(e){this.layoutFunc=e},t.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},t.prototype.render=function(e,t){void 0===e&&(e=!1),this.emit(gd.BEFORE_RENDER,NS.fromData(this,gd.BEFORE_RENDER,t)),this.paint(e),this.emit(gd.AFTER_RENDER,NS.fromData(this,gd.AFTER_RENDER,t)),!1===this.visible&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this;this.emit(gd.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var t=this.geometries,n=0;n<t.length;n++)t[n].clear(),t[n].container.remove(!0),t[n].labelsContainer.remove(!0);this.geometries=[];var r=this.controllers;for(n=0;n<r.length;n++)"annotation"===r[n].name?r[n].clear(!0):r[n].clear();this.createdScaleKeys.forEach((function(t,n){e.getRootView().scalePool.deleteScale(n)})),this.createdScaleKeys.clear();var i=this.views;for(n=0;n<i.length;n++)i[n].clear();this.emit(gd.AFTER_CLEAR)},t.prototype.destroy=function(){this.emit(gd.BEFORE_DESTROY),Xh(this.interactions,(function(e){e&&e.destroy()})),this.clear();for(var t=this.controllers,n=0,r=t.length;n<r;n++){t[n].destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.geometries,r=0,i=n.length;r<i;r++){n[r].changeVisible(t)}var a=this.controllers;for(r=0,i=a.length;r<i;r++){a[r].changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},t.prototype.data=function(e){return Jp(this.options,"data",e),this.isDataChanged=!0,this},t.prototype.source=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(e)},t.prototype.filter=function(e,t){return Yh(t)?(Jp(this.options,["filters",e],t),this):(!t&&Zp(this.options,["filters",e])&&delete this.options.filters[e],this)},t.prototype.axis=function(e,t){return Fp(e)?Jp(this.options,["axes"],e):Jp(this.options,["axes",e],t),this},t.prototype.legend=function(e,t){return Fp(e)?Jp(this.options,["legends"],e):lp(e)?(Jp(this.options,["legends",e],t),Zh(t)&&(null==t?void 0:t.selected)&&Jp(this.options,["filters",e],(function(e){var n;return null===(n=null==t?void 0:t.selected[e])||void 0===n||n}))):Jp(this.options,["legends"],e),this},t.prototype.scale=function(e,t){var n=this;return lp(e)?Jp(this.options,["scales",e],t):Wh(e)&&Xh(e,(function(e,t){Jp(n.options,["scales",t],e)})),this},t.prototype.tooltip=function(e){return Jp(this.options,"tooltip",e),this},t.prototype.annotation=function(){return this.getController("annotation")},t.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},t.prototype.coordinate=function(e,t){return lp(e)?Jp(this.options,"coordinate",{type:e,cfg:t}):Jp(this.options,"coordinate",e),this.coordinateController.update(this.options.coordinate),this.coordinateController},t.prototype.coord=function(e,t){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(e,t)},t.prototype.facet=function(e,t){this.facetInstance&&this.facetInstance.destroy();var n=function(e){return uw[Op(e)]}(e);if(!n)throw new Error("facet '".concat(e,"' is not exist!"));return this.facetInstance=new n(this,Ph(Ph({},t),{type:e})),this},t.prototype.animate=function(e){return Jp(this.options,"animate",e),this},t.prototype.updateOptions=function(e){return this.clear(),zp(this.options,e),this.views.forEach((function(e){return e.destroy()})),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},t.prototype.option=function(e,n){if(t.prototype[e])throw new Error("Can't use built in variable name \"".concat(e,'", please change another one.'));return Jp(this.options,e,n),this},t.prototype.theme=function(e){return this.themeObject=Wh(e)?Yp({},this.themeObject,gS(e)):yS(e),this},t.prototype.interaction=function(e,t){var n=this.interactions[e];n&&n.destroy();var r=rS(e,this,t);return r&&(r.init(),this.interactions[e]=r),this},t.prototype.removeInteraction=function(e){var t=this.interactions[e];t&&(t.destroy(),this.interactions[e]=void 0)},t.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(gd.BEFORE_CHANGE_DATA,NS.fromData(this,gd.BEFORE_CHANGE_DATA,null)),this.data(e),this.paint(!0);for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].changeData(e)}this.emit(gd.AFTER_CHANGE_DATA,NS.fromData(this,gd.AFTER_CHANGE_DATA,null))},t.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:Hp(this.options.scales),axes:Hp(this.options.axes),coordinate:Hp(this.coordinateController.getOption()),tooltip:Hp(this.options.tooltip),legends:Hp(this.options.legends),animate:this.options.animate,visible:this.visible},r=new t(Ph(Ph({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:kd}),middleGroup:this.middleGroup.addGroup({zIndex:Sd}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:wd}),theme:this.themeObject,padding:this.padding},e),{options:Ph(Ph({},n),Zp(e,"options",{}))}));return this.views.push(r),r},t.prototype.view=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(e)},t.prototype.removeView=function(e){var t=sp(this.views,(function(t){return t===e}))[0];return t&&t.destroy(),t},t.prototype.getCoordinate=function(){return this.coordinateInstance},t.prototype.getTheme=function(){return this.themeObject},t.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},t.prototype.getYScales=function(){var e={},t=[];return this.geometries.forEach((function(n){var r=n.getYScale(),i=r.field;e[i]||(e[i]=!0,t.push(r))})),t},t.prototype.getScalesByDim=function(e){for(var t=this.geometries,n={},r=0,i=t.length;r<i;r++){var a=t[r],o="x"===e?a.getXScale():a.getYScale();o&&!n[o.field]&&(n[o.field]=o)}return n},t.prototype.getScale=function(e,t){var n=t||this.getScaleKey(e);return this.getRootView().scalePool.getScale(n)},t.prototype.getScaleByField=function(e,t){return this.getScale(e,t)},t.prototype.getOptions=function(){return this.options},t.prototype.getData=function(){return this.filteredData},t.prototype.getOriginalData=function(){return this.options.data},t.prototype.getPadding=function(){return this.autoPadding.getPadding()},t.prototype.getGeometries=function(){return this.geometries},t.prototype.getElements=function(){return op(this.geometries,(function(e,t){return e.concat(t.getElements())}),[])},t.prototype.getElementsBy=function(e){return this.getElements().filter((function(t){return e(t)}))},t.prototype.getLayer=function(e){return e===ld.BG?this.backgroundGroup:e===ld.MID?this.middleGroup:(ld.FORE,this.foregroundGroup)},t.prototype.isPointInPlot=function(e){return WT(this.getCoordinate(),e)},t.prototype.getLegendAttributes=function(){return tp(this.geometries.map((function(e){return e.getGroupAttributes()})))},t.prototype.getGroupScales=function(){var e=this.geometries.map((function(e){return e.getGroupScales()}));return $T(tp(e))},t.prototype.getCanvas=function(){return this.getRootView().canvas},t.prototype.getRootView=function(){for(var e=this;e.parent;)e=e.parent;return e},t.prototype.getXY=function(e){var t,n,r=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y");if(Xh(e,(function(e,r){i[r]&&(t=i[r].scale(e)),a[r]&&(n=a[r].scale(e))})),!Uh(t)&&!Uh(n))return r.convert({x:t,y:n})},t.prototype.getController=function(e){return Jh(this.controllers,(function(t){return t.name===e}))},t.prototype.showTooltip=function(e){var t=this.getController("tooltip");return t&&t.showTooltip(e),this},t.prototype.hideTooltip=function(){var e=this.getController("tooltip");return e&&e.hideTooltip(),this},t.prototype.lockTooltip=function(){var e=this.getController("tooltip");return e&&e.lockTooltip(),this},t.prototype.unlockTooltip=function(){var e=this.getController("tooltip");return e&&e.unlockTooltip(),this},t.prototype.isTooltipLocked=function(){var e=this.getController("tooltip");return e&&e.isTooltipLocked()},t.prototype.getTooltipItems=function(e){var t=this.getController("tooltip");return t?t.getTooltipItems(e):[]},t.prototype.getSnapRecords=function(e){for(var t=this.geometries,n=[],r=0,i=t.length;r<i;r++){var a=t[r],o=a.dataArray;a.sort(o);for(var s=void 0,l=0,c=o.length;l<c;l++){(s=TS(e,o[l],a))&&n.push(s)}}var u=this.views;for(r=0,i=u.length;r<i;r++){var h=u[r].getSnapRecords(e);n=n.concat(h)}return n},t.prototype.getComponents=function(){for(var e=[],t=this.controllers,n=0,r=t.length;n<r;n++){var i=t[n];e=e.concat(i.getComponents())}return e},t.prototype.filterData=function(e){var t=this.options.filters;return 0===sd(t)?e:jh(e,(function(e,n){return Object.keys(t).every((function(r){return(0,t[r])(e[r],e,n)}))}))},t.prototype.filterFieldData=function(e,t){var n=this.options.filters,r=Zp(n,e);return Rp(r)?t:t.filter((function(t,n){return r(t[e],t,n)}))},t.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),t=e.start,n=e.end,r=this.coordinateBBox.bl,i=this.coordinateBBox.tr;qp(t,r)&&qp(n,i)?this.isCoordinateChanged=!1:(this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(r,i))},t.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(gd.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(gd.AFTER_PAINT),this.isDataChanged=!1},t.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=Zp(this.themeObject,"background");if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var t=this.viewBBox,n=t.x,r=t.y,i=t.width,a=t.height;this.backgroundStyleRectShape.attr({fill:e,x:n,y:r,width:i,height:a})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},t.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=RS(this).shrink(AS(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].renderPaddingRecursive(e)}},t.prototype.renderLayoutRecursive=function(e){var t=!0===this.syncViewPadding?DS:Yh(this.syncViewPadding)?this.syncViewPadding:void 0;t&&(t(this,this.views,PS),this.views.forEach((function(e){e.coordinateBBox=e.viewBBox.shrink(e.autoPadding.getPadding()),e.adjustCoordinate()}))),this.doLayout();for(var n=this.views,r=0,i=n.length;r<i;r++){n[r].renderLayoutRecursive(e)}},t.prototype.renderPaintRecursive=function(e){var t=this.middleGroup;if(this.limitInPlot){var n=qT(this.coordinateInstance),r=n.type,i=n.attrs;t.setClip({type:r,attrs:i})}else t.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var a=this.views,o=0,s=a.length;o<s;o++){a[o].renderPaintRecursive(e)}},t.prototype.createScale=function(e,t,n,r){var i=Zp(this.options.scales,[e]),a=Ph(Ph({},i),n);return this.parent?this.parent.createScale(e,t,a,r):this.scalePool.createScale(e,t,a,r)},t.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].renderDataRecursive(e)}},t.prototype.calculateViewBBox=function(){var e,t,n,r;if(this.parent){var i=this.parent.coordinateBBox;e=i.x,t=i.y,n=i.width,r=i.height}else e=0,t=0,n=this.canvas.get("width"),r=this.canvas.get("height");var a=this.region,o=a.start,s=a.end,l=new YT(e+n*o.x,t+r*o.y,n*(s.x-o.x),r*(s.y-o.y));this.viewBBox&&this.viewBBox.isEqual(l)||(this.viewBBox=new YT(e+n*o.x,t+r*o.y,n*(s.x-o.x),r*(s.y-o.y))),this.coordinateBBox=this.viewBBox},t.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},t.prototype.initComponentController=function(){for(var e=this.usedControllers,t=0,n=e.length;t<n;t++){var r=e[t],i=OS[r];i&&this.controllers.push(new i(this))}},t.prototype.createViewEvent=function(e){var t=e.shape,n=e.name,r=t?t.get("origin"):null,i=new NS(this,e,r);return i.type=n,i},t.prototype.doPlotEvent=function(e){var t=e.type,n={x:e.x,y:e.y};if(["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"].includes(t)){var r=this.isPointInPlot(n),i=e.clone();if(r){var a="plot:".concat(t);i.type=a,this.emit(a,i),"mouseleave"!==t&&"touchend"!==t||(this.isPreMouseInPlot=!1)}"mousemove"===t||"touchmove"===t?(this.isPreMouseInPlot&&!r?("mousemove"===t&&(i.type=Ed.MOUSE_LEAVE,this.emit(Ed.MOUSE_LEAVE,i)),i.type=Ed.LEAVE,this.emit(Ed.LEAVE,i)):!this.isPreMouseInPlot&&r&&("mousemove"===t&&(i.type=Ed.MOUSE_ENTER,this.emit(Ed.MOUSE_ENTER,i)),i.type=Ed.ENTER,this.emit(Ed.ENTER,i)),this.isPreMouseInPlot=r):"mouseleave"!==t&&"touchend"!==t||this.isPreMouseInPlot&&("mouseleave"===t&&(i.type=Ed.MOUSE_LEAVE,this.emit(Ed.MOUSE_LEAVE,i)),i.type=Ed.LEAVE,this.emit(Ed.LEAVE,i),this.isPreMouseInPlot=!1)}},t.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},t.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var t=this.getCoordinate(),n=Zp(this.options,"scales",{}),r=this.geometries,i=0,a=r.length;i<a;i++){var o=r[i];o.scales=this.getGeometryScales();var s={coordinate:t,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?o.update(s):o.init(s)}this.adjustScales()},t.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),t=this.getGroupedFields(),n=this.getOptions(),r=n.data,i=n.scales,a=void 0===i?{}:i,o=this.filteredData,s=0,l=e.length;s<l;s++){var c=e[s],u=a[c],h=this.getScaleKey(c);this.createScale(c,t.includes(c)?r:o,u,h),this.createdScaleKeys.set(h,!0)}},t.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},t.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),t={},n=0;n<e.length;n++){var r=e[n];t[r]=this.getScaleByField(r)}return t},t.prototype.getScaleFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){$T(n[r].getScaleFields(),e,t)}return e},t.prototype.getGroupedFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){$T(n[r].getGroupFields(),e,t)}return e},t.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},t.prototype.adjustCategoryScaleRange=function(){var e=this,t=Bh([this.getXScale()],this.getYScales(),!0).filter((function(e){return!!e})),n=this.getCoordinate(),r=this.options.scales;Xh(t,(function(t){var i=t.field,a=t.values,o=t.isCategory,s=t.isIdentity;(o||s)&&a&&!Zp(r,[i,"range"])&&(t.range=JT(t,n,e.theme))}))},t.prototype.initComponents=function(e){for(var t=this.controllers,n=0;n<t.length;n++){var r=t[n];e?r.update():(r.clear(),r.render())}},t.prototype.doLayout=function(){this.layoutFunc(this)},t.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,t=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,t)},t.prototype.paintGeometries=function(e){for(var t=this.options.animate,n=this.getCoordinate(),r={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},i=this.geometries,a=0;a<i.length;a++){var o=i[a];o.coordinate=n,o.canvasRegion=r,t||o.animate(!1),o.paint(e)}},t.prototype.renderComponents=function(e){for(var t=0;t<this.getComponents().length;t++){this.getComponents()[t].component.render()}},t.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},t.prototype.initOptions=function(){var e=this,t=this.options,n=t.geometries,r=void 0===n?[]:n,i=t.interactions,a=void 0===i?[]:i,o=t.views,s=void 0===o?[]:o,l=t.annotations,c=void 0===l?[]:l,u=t.coordinate,h=t.events,p=t.facets;this.coordinateController?u&&this.coordinateController.update(u):this.coordinateController=new MS(u);for(var d=0;d<r.length;d++){var f=r[d];this.createGeometry(f)}for(var m=0;m<a.length;m++){var g=a[m],v=g.type,y=g.cfg;this.interaction(v,y)}for(var x=0;x<s.length;x++){var E=s[x];this.createView(E)}for(var b=this.getController("annotation"),C=0;C<c.length;C++){var T=c[C];b.annotation(T)}h&&Xh(h,(function(t,n){e.on(n,t)})),p&&Xh(p,(function(t){var n=t.type,r=Rh(t,["type"]);e.facet(n,r)}))},t.prototype.createGeometry=function(e){var t=e.type,n=e.cfg,r=void 0===n?{}:n;if(this[t]){var i=this[t](r);Xh(e,(function(e,t){Yh(i[t])&&i[t](e)}))}},t.prototype.getScaleKey=function(e){return"".concat(this.id,"-").concat(e)},t}($d);function zS(e,t){BS.prototype[e.toLowerCase()]=function(e){void 0===e&&(e={});var n=Ph({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),r=new t(n);return this.geometries.push(r),r}}var HS=function(e){function t(t){var n=this,r=t.container,i=t.width,a=t.height,o=t.autoFit,s=void 0!==o&&o,l=t.padding,c=t.appendPadding,u=t.renderer,h=void 0===u?"canvas":u,p=t.pixelRatio,d=t.localRefresh,f=void 0===d||d,m=t.visible,g=void 0===m||m,v=t.supportCSSTransform,y=void 0!==v&&v,x=t.defaultInteractions,E=void 0===x?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:x,b=t.options,C=t.limitInPlot,T=t.theme,w=t.syncViewPadding,S=lp(r)?document.getElementById(r):r,k=Pd('<div style="position:relative;"></div>');S.appendChild(k);var _=jd(S,s,i,a),A=new(function(e){var t=Nd[e];if(!t)throw new Error("G engine '".concat(e,"' is not exist, please register it at first."));return t}(h).Canvas)(Ph({container:k,pixelRatio:p,localRefresh:f,supportCSSTransform:y},_));return(n=e.call(this,{parent:null,canvas:A,backgroundGroup:A.addGroup({zIndex:kd}),middleGroup:A.addGroup({zIndex:Sd}),foregroundGroup:A.addGroup({zIndex:wd}),padding:l,appendPadding:c,visible:g,options:b,limitInPlot:C,theme:T,syncViewPadding:w})||this).onResize=jp((function(){n.forceFit()}),300),n.ele=S,n.canvas=A,n.width=_.width,n.height=_.height,n.autoFit=s,n.localRefresh=f,n.renderer=h,n.wrapperElement=k,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(E),n}return Lh(t,e),t.prototype.initDefaultInteractions=function(e){var t=this;Xh(e,(function(e){t.interaction(e)}))},t.prototype.aria=function(e){var t="aria-label";!1===e?this.ele.removeAttribute(t):this.ele.setAttribute(t,e.label)},t.prototype.changeSize=function(e,t){return this.width===e&&this.height===t||(this.emit(gd.BEFORE_CHANGE_SIZE),this.width=e,this.height=t,this.canvas.changeSize(e,t),this.render(!0),this.emit(gd.AFTER_CHANGE_SIZE)),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.aria(!1)},t.prototype.destroy=function(){var t,n;e.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),t=this.wrapperElement,(n=t.parentNode)&&n.removeChild(t),this.wrapperElement=null},t.prototype.changeVisible=function(t){return e.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},t.prototype.forceFit=function(){if(!this.destroyed){var e=jd(this.ele,!0,this.width,this.height),t=e.width,n=e.height;this.changeSize(t,n)}},t.prototype.updateCanvasStyle=function(){zd(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},t.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},t.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},t}(BS),jS=function(){function e(e){this.visible=!0,this.components=[],this.view=e}return e.prototype.clear=function(e){Xh(this.components,(function(e){e.component.destroy()})),this.components=[]},e.prototype.destroy=function(){this.clear()},e.prototype.getComponents=function(){return this.components},e.prototype.changeVisible=function(e){this.visible!==e&&(this.components.forEach((function(t){e?t.component.show():t.component.hide()})),this.visible=e)},e}();var GS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isLocked=!1,t}return Lh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.isVisible=function(){return!1!==this.view.getOptions().tooltip},t.prototype.render=function(){},t.prototype.showTooltip=function(e){if(this.point=e,this.isVisible()){var t=this.view,n=this.getTooltipItems(e);if(n.length){var r=this.getTitle(n),i={x:n[0].x,y:n[0].y};t.emit("tooltip:show",NS.fromData(t,"tooltip:show",Ph({items:n,title:r},e)));var a=this.getTooltipCfg(),o=a.follow,s=a.showMarkers,l=a.showCrosshairs,c=a.showContent,u=a.marker,h=this.items,p=this.title;if(qp(p,r)&&qp(h,n)?(this.tooltip&&o&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()):(t.emit("tooltip:change",NS.fromData(t,"tooltip:change",Ph({items:n,title:r},e))),(Yh(c)?c(n):c)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(zp({},a,{items:this.getItemsAfterProcess(n),title:r},o?e:{})),this.tooltip.show()),s&&this.renderTooltipMarkers(n,u)),this.items=n,this.title=r,l){var d=Zp(a,["crosshairs","follow"],!1);this.renderCrosshairs(d?e:i,a)}}else this.hideTooltip()}},t.prototype.hideTooltip=function(){if(this.getTooltipCfg().follow){var e=this.tooltipMarkersGroup;e&&e.hide();var t=this.xCrosshair,n=this.yCrosshair;t&&t.hide(),n&&n.hide();var r=this.tooltip;r&&r.hide(),this.view.emit("tooltip:hide",NS.fromData(this.view,"tooltip:hide",{})),this.point=null}else this.point=null},t.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},t.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},t.prototype.isTooltipLocked=function(){return this.isLocked},t.prototype.clear=function(){var e=this,t=e.tooltip,n=e.xCrosshair,r=e.yCrosshair,i=e.tooltipMarkersGroup;t&&(t.hide(),t.clear()),n&&n.clear(),r&&r.clear(),i&&i.clear(),(null==t?void 0:t.get("customContent"))&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},t.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},t.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},t.prototype.changeVisible=function(e){if(this.visible!==e){var t=this,n=t.tooltip,r=t.tooltipMarkersGroup,i=t.xCrosshair,a=t.yCrosshair;e?(n&&n.show(),r&&r.show(),i&&i.show(),a&&a.show()):(n&&n.hide(),r&&r.hide(),i&&i.hide(),a&&a.hide()),this.visible=e}},t.prototype.getTooltipItems=function(e){var t=this.findItemsFromView(this.view,e);if(t.length){for(var n=0,r=t=tp(t);n<r.length;n++)for(var i=0,a=r[n];i<a.length;i++){var o=a[i],s=o.mappingData,l=s.x,c=s.y;o.x=Vh(l)?l[l.length-1]:l,o.y=Vh(c)?c[c.length-1]:c}if(!1===this.getTooltipCfg().shared&&t.length>1){for(var u=t[0],h=Math.abs(e.y-u[0].y),p=0,d=t;p<d.length;p++){var f=d[p],m=Math.abs(e.y-f[0].y);m<=h&&(u=f,h=m)}t=[u]}return function(e){for(var t=[],n=function(n){var r=e[n];Jh(t,(function(e){return e.color===r.color&&e.name===r.name&&e.value===r.value&&e.title===r.title}))||t.push(r)},r=0;r<e.length;r++)n(r);return t}(tp(t))}return[]},t.prototype.layout=function(){},t.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}})}},t.prototype.isCursorEntered=function(e){if(this.tooltip){var t=this.tooltip.getContainer(),n=this.tooltip.get("capture");if(t&&n){var r=t.getBoundingClientRect(),i=r.x,a=r.y,o=r.width,s=r.height;return new YT(i,a,o,s).isPointIn(e)}}return!1},t.prototype.getTooltipCfg=function(){var e=this.view,t=e.getOptions().tooltip,n=this.processCustomContent(t),r=e.getTheme(),i=Zp(r,["components","tooltip"],{}),a=Zp(n,"enterable",i.enterable);return Yp({},i,n,{capture:!(!a&&!this.isLocked)})},t.prototype.processCustomContent=function(e){if(Fp(e)||!Zp(e,"customContent"))return e;var t=e.customContent;return Ph(Ph({},e),{customContent:function(e,n){var r=t(e,n)||"";return lp(r)?'<div class="g2-tooltip">'+r+"</div>":r}})},t.prototype.getTitle=function(e){var t=e[0].title||e[0].name;return this.title=t,t},t.prototype.renderTooltip=function(){var e=this.view.getCanvas(),t={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},n=this.getTooltipCfg(),r=new FT(Ph(Ph({parent:e.get("el").parentNode,region:t},n),{visible:!1,crosshairs:null}));r.init(),this.tooltip=r},t.prototype.renderTooltipMarkers=function(e,t){for(var n=this.getTooltipMarkersGroup(),r=0,i=e;r<i.length;r++){var a=i[r],o=a.x,s=a.y,l=Ph(Ph({fill:a.color,symbol:"circle",shadowColor:a.color},t),{x:o,y:s});n.addShape("marker",{attrs:l})}},t.prototype.renderCrosshairs=function(e,t){var n=Zp(t,["crosshairs","type"],"x");"x"===n?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,t)):"y"===n?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,t)):"xy"===n&&(this.renderXCrosshairs(e,t),this.renderYCrosshairs(e,t))},t.prototype.renderXCrosshairs=function(e,t){var n=this.getViewWithGeometry(this.view).getCoordinate();if(WT(n,e)){var r,i;if(n.isRect)n.isTransposed?(r={x:n.start.x,y:e.y},i={x:n.end.x,y:e.y}):(r={x:e.x,y:n.end.y},i={x:e.x,y:n.start.y});else{var a=XT(n,e),o=n.getCenter(),s=n.getRadius();i=RT(o.x,o.y,s,a),r=o}var l=Yp({start:r,end:i,container:this.getTooltipCrosshairsGroup()},Zp(t,"crosshairs",{}),this.getCrosshairsText("x",e,t));delete l.type;var c=this.xCrosshair;c?c.update(l):(c=new YC(l)).init(),c.render(),c.show(),this.xCrosshair=c}},t.prototype.renderYCrosshairs=function(e,t){var n=this.getViewWithGeometry(this.view).getCoordinate();if(WT(n,e)){var r,i;if(n.isRect){var a=void 0,o=void 0;n.isTransposed?(a={x:e.x,y:n.end.y},o={x:e.x,y:n.start.y}):(a={x:n.start.x,y:e.y},o={x:n.end.x,y:e.y}),r={start:a,end:o},i="Line"}else r={center:n.getCenter(),radius:VT(n,e),startAngle:n.startAngle,endAngle:n.endAngle},i="Circle";delete(r=Yp({container:this.getTooltipCrosshairsGroup()},r,Zp(t,"crosshairs",{}),this.getCrosshairsText("y",e,t))).type;var s=this.yCrosshair;s?n.isRect&&"circle"===s.get("type")||!n.isRect&&"line"===s.get("type")?(s=new XC[i](r)).init():s.update(r):(s=new XC[i](r)).init(),s.render(),s.show(),this.yCrosshair=s}},t.prototype.getCrosshairsText=function(e,t,n){var r=Zp(n,["crosshairs","text"]),i=Zp(n,["crosshairs","follow"]),a=this.items;if(r){var o=this.getViewWithGeometry(this.view),s=a[0],l=o.getXScale(),c=o.getYScales()[0],u=void 0,h=void 0;if(i){var p=this.view.getCoordinate().invert(t);u=l.invert(p.x),h=c.invert(p.y)}else u=s.data[l.field],h=s.data[c.field];var d="x"===e?u:h;return Yh(r)?r=r(e,d,a,t):r.content=d,{text:r}}},t.prototype.getGuideGroup=function(){if(!this.guideGroup){var e=this.view.foregroundGroup;this.guideGroup=e.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},t.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):((e=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"})).toFront(),this.tooltipMarkersGroup=e),e},t.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||((e=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1})).toBack(),this.tooltipCrosshairsGroup=e),e},t.prototype.findItemsFromView=function(e,t){if(!1===e.getOptions().tooltip)return[];for(var n=_S(e,t,this.getTooltipCfg()),r=0,i=e.views;r<i.length;r++){var a=i[r];n=n.concat(this.findItemsFromView(a,t))}return n},t.prototype.getViewWithGeometry=function(e){var t=this;return e.geometries.length?e:Jh(e.views,(function(e){return t.getViewWithGeometry(e)}))},t.prototype.getItemsAfterProcess=function(e){var t=this.getTooltipCfg().customItems;return(t||function(e){return e})(e)},t}(jS),$S={};function YS(e){return $S[e.toLowerCase()]}function US(e,t){$S[e.toLowerCase()]=t}var VS={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},WS={interval:function(e){return{enter:{animation:e.isRect?e.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:e.isPolar&&e.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},XS={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(e){var t;return e.isRect?t=e.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",e.isPolar&&e.isTransposed&&(t="wave-in")),{animation:t}},schema:function(e){return{animation:e.isRect?e.isTransposed?"grow-in-x":"grow-in-y":"grow-in-xy"}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function qS(e,t,n){var r=WS[e];return r&&(Yh(r)&&(r=r(t)),r=Yp({},VS,r),n)?r[n]:r}function KS(e,t,n){var r=Zp(e.get("origin"),"data","_origin"),i=t.animation,a=function(e,t){return{delay:Yh(e.delay)?e.delay(t):e.delay,easing:Yh(e.easing)?e.easing(t):e.easing,duration:Yh(e.duration)?e.duration(t):e.duration,callback:e.callback,repeat:e.repeat}}(t,r);if(i){var o=YS(i);o&&o(e,a,n)}else e.animate(n.toAttrs,a)}var QS=function(e){function t(t){var n=e.call(this,t)||this;n.states=[];var r=t.shapeFactory,i=t.container,a=t.offscreenGroup,o=t.elementIndex,s=t.visible,l=void 0===s||s;return n.shapeFactory=r,n.container=i,n.offscreenGroup=a,n.visible=l,n.elementIndex=o,n}return Lh(t,e),t.prototype.draw=function(e,t){void 0===t&&(t=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,t),!1===this.visible&&this.changeVisible(!1)},t.prototype.update=function(e){var t=this.shapeFactory,n=this.shape;if(n){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(n,e);var r=this.getOffscreenGroup(),i=t.drawShape(this.shapeType,e,r);i.cfg.data=this.data,i.cfg.origin=e,i.cfg.element=this,this.syncShapeStyle(n,i,this.getStates(),this.getAnimateCfg("update"))}},t.prototype.destroy=function(){var t=this.shapeFactory,n=this.shape;if(n){var r=this.getAnimateCfg("leave");r?KS(n,r,{coordinate:t.coordinate,toAttrs:Ph({},n.attr())}):n.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach((function(e){e.show()}))):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach((function(e){e.hide()})))},t.prototype.setState=function(e,t){var n=this,r=n.states,i=n.shapeFactory,a=n.model,o=n.shape,s=n.shapeType,l=r.indexOf(e);if(t){if(l>-1)return;r.push(e),"active"!==e&&"selected"!==e||null==o||o.toFront()}else{if(-1===l)return;r.splice(l,1),"active"!==e&&"selected"!==e||(this.geometry.zIndexReversed?o.setZIndex(this.geometry.elements.length-this.elementIndex):o.setZIndex(this.elementIndex))}var c=i.drawShape(s,a,this.getOffscreenGroup());r.length?this.syncShapeStyle(o,c,r,null):this.syncShapeStyle(o,c,["reset"],null),c.remove(!0);var u={state:e,stateStatus:t,element:this,target:this.container};this.container.emit("statechange",u),Hb(this.shape,"statechange",u)},t.prototype.clearStates=function(){var e=this;Xh(this.states,(function(t){e.setState(t,!1)})),this.states=[]},t.prototype.hasState=function(e){return this.states.includes(e)},t.prototype.getStates=function(){return this.states},t.prototype.getData=function(){return this.data},t.prototype.getModel=function(){return this.model},t.prototype.getBBox=function(){var e=this.shape,t=this.labelShape,n={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return e&&(n=e.getCanvasBBox()),t&&t.forEach((function(e){var t=e.getCanvasBBox();n.x=Math.min(t.x,n.x),n.y=Math.min(t.y,n.y),n.minX=Math.min(t.minX,n.minX),n.minY=Math.min(t.minY,n.minY),n.maxX=Math.max(t.maxX,n.maxX),n.maxY=Math.max(t.maxY,n.maxY)})),n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n},t.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,t=e.shapeType,n=e.geometry,r=e.shapeFactory,i=n.stateOption,a=r.defaultShapeType,o=r.theme[t]||r.theme[a];this.statesStyle=Yp({},o,i)}return this.statesStyle},t.prototype.getStateStyle=function(e,t){var n=this.getStatesStyle(),r=Zp(n,[e,"style"],{}),i=r[t]||r;return Yh(i)?i(this):i},t.prototype.getAnimateCfg=function(e){var t=this,n=this.animate;if(n){var r=n[e];return r?Ph(Ph({},r),{callback:function(){var e;Yh(r.callback)&&r.callback(),null===(e=t.geometry)||void 0===e||e.emit(yd.AFTER_DRAW_ANIMATE)}}):r}return null},t.prototype.drawShape=function(e,t){var n;void 0===t&&(t=!1);var r=this,i=r.shapeFactory,a=r.container,o=r.shapeType;if(this.shape=i.drawShape(o,e,a),this.shape){this.setShapeInfo(this.shape,e);var s=this.shape.cfg.name;s?lp(s)&&(this.shape.cfg.name=["element",s]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var l=t?"enter":"appear",c=this.getAnimateCfg(l);c&&(null===(n=this.geometry)||void 0===n||n.emit(yd.BEFORE_DRAW_ANIMATE),KS(this.shape,c,{coordinate:i.coordinate,toAttrs:Ph({},this.shape.attr())}))}},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.setShapeInfo=function(e,t){var n=this;(e.cfg.origin=t,e.cfg.element=this,e.isGroup())&&e.get("children").forEach((function(e){n.setShapeInfo(e,t)}))},t.prototype.syncShapeStyle=function(e,t,n,r,i){var a,o=this;if(void 0===n&&(n=[]),void 0===i&&(i=0),e&&t){var s=e.get("clipShape"),l=t.get("clipShape");if(this.syncShapeStyle(s,l,n,r),e.isGroup())for(var c=e.get("children"),u=t.get("children"),h=0;h<c.length;h++)this.syncShapeStyle(c[h],u[h],n,r,i+h);else{if(!Wp(n)&&!qp(n,["reset"])){var p=e.get("name");Vh(p)&&(p=p[1]),Xh(n,(function(e){if("element-background"!==t.get("name")){var n=o.getStateStyle(e,p||i);t.attr(n)}}))}var d=HT(e,t);this.animate?r?(null===(a=this.geometry)||void 0===a||a.emit(yd.BEFORE_DRAW_ANIMATE),KS(e,r,{coordinate:this.shapeFactory.coordinate,toAttrs:d,shapeModel:this.model})):Wp(n)?e.attr(d):(e.stopAnimate(),e.animate(d,{duration:300})):e.attr(d)}}},t.prototype.getShapeType=function(e){var t=Zp(e,"shape");return Vh(t)?t[0]:t},t}($d),ZS={},JS={};function ek(e,t){ZS[e.toLowerCase()]=t}function tk(e,t){JS[e.toLowerCase()]=t}var nk={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(e,t){var n=this.getShape(e);return n.getPoints?n.getPoints(t):this.getDefaultPoints(t)},getShape:function(e){var t=this[e]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(e){return Zp(e,[this.defaultShapeType,"default","style"],{})},getMarker:function(e,t){var n=this.getShape(e);if(!n.getMarker){var r=this.defaultShapeType;n=this.getShape(r)}var i=this.theme,a=Zp(i,[e,"default"],{}),o=n.getMarker(t);return Yp({},a,o)},drawShape:function(e,t,n){return this.getShape(e).draw(t,n)}},rk={coordinate:null,parsePath:function(e){var t=this.coordinate,n=yv(e);return n=t.isPolar?Tw(t,n):function(e,t){var n=[];return Xh(t,(function(t){switch(t[0].toLowerCase()){case"m":case"l":case"c":n.push(yw(t,e));break;case"a":n.push(xw(t,e));break;case"z":default:n.push(t)}})),n}(t,n)},parsePoint:function(e){return this.coordinate.convert(e)},parsePoints:function(e){var t=this.coordinate;return e.map((function(e){return t.convert(e)}))},draw:function(e,t){}},ik={};function ak(e,t){var n=Mp(e),r=Ph(Ph(Ph({},nk),t),{geometryType:e});return ik[n]=r,r}function ok(e,t,n){var r=Mp(e),i=ik[r],a=Ph(Ph({},rk),n);return i[t]=a,a}function sk(e){var t=Mp(e);return ik[t]}function lk(e,t){return fp(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],(function(n){return!qp(e[n],t[n])}))}function ck(e){return Vh(e)?e:e.split("*")}function uk(e,t){for(var n=[],r=[],i=[],a=new Map,o=0;o<t.length;o++){var s=t[o];e[s]?r.push(s):n.push(s),a.set(s,!0)}return Object.keys(e).forEach((function(e){a.has(e)||i.push(e)})),{added:n,updated:r,removed:i}}var hk=function(e){function t(t){var n=e.call(this,t)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var r=t.container,i=t.labelsContainer,a=t.coordinate,o=t.data,s=t.sortable,l=void 0!==s&&s,c=t.visible,u=void 0===c||c,h=t.theme,p=t.scales,d=void 0===p?{}:p,f=t.scaleDefs,m=void 0===f?{}:f,g=t.intervalPadding,v=t.dodgePadding,y=t.maxColumnWidth,x=t.minColumnWidth,E=t.columnWidthRatio,b=t.roseWidthRatio,C=t.multiplePieWidthRatio,T=t.zIndexReversed;return n.container=r,n.labelsContainer=i,n.coordinate=a,n.data=o,n.sortable=l,n.visible=u,n.userTheme=h,n.scales=d,n.scaleDefs=m,n.intervalPadding=g,n.dodgePadding=v,n.maxColumnWidth=y,n.minColumnWidth=x,n.columnWidthRatio=E,n.roseWidthRatio=b,n.multiplePieWidthRatio=C,n.zIndexReversed=T,n}return Lh(t,e),t.prototype.position=function(e){var t=e;Zh(e)||(t={fields:ck(e)});var n=Zp(t,"fields");return 1===n.length&&(n.unshift("1"),Jp(t,"fields",n)),Jp(this.attributeOption,"position",t),this},t.prototype.color=function(e,t){return this.createAttrOption("color",e,t),this},t.prototype.shape=function(e,t){return this.createAttrOption("shape",e,t),this},t.prototype.size=function(e,t){return this.createAttrOption("size",e,t),this},t.prototype.adjust=function(e){var t=e;return(lp(e)||Zh(e))&&(t=[e]),Xh(t,(function(e,n){Wh(e)||(t[n]={type:e})})),this.adjustOption=t,this},t.prototype.style=function(e,t){if(lp(e)){var n=ck(e);this.styleOption={fields:n,callback:t}}else{var r=e,i=(n=r.fields,r.callback),a=r.cfg;this.styleOption=n||i||a?e:{cfg:e}}return this},t.prototype.tooltip=function(e,t){if(lp(e)){var n=ck(e);this.tooltipOption={fields:n,callback:t}}else this.tooltipOption=e;return this},t.prototype.animate=function(e){return this.animateOption=e,this},t.prototype.label=function(e,t,n){if(lp(e)){var r={},i=ck(e);r.fields=i,Yh(t)?r.callback=t:Zh(t)&&(r.cfg=t),n&&(r.cfg=n),this.labelOption=r}else this.labelOption=e;return this},t.prototype.state=function(e){return this.stateOption=e,this},t.prototype.customInfo=function(e){return this.customOption=e,this},t.prototype.init=function(e){void 0===e&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},t.prototype.update=function(e){void 0===e&&(e={});var t=e.data,n=e.isDataChanged,r=e.isCoordinateChanged,i=this.attributeOption,a=this.lastAttributeOption;qp(i,a)?!t||!n&&qp(t,this.data)?this.setCfg(e):(this.setCfg(e),this.initAttributes(),this.processData(t)):this.init(e),this.adjustScale(),this.isCoordinateChanged=r},t.prototype.paint=function(e){void 0===e&&(e=!1),this.animateOption&&(this.animateOption=Yp({},qS(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[],this.getOffscreenGroup().clear();var t=this.beforeMappingData,n=this.beforeMapping(t);this.dataArray=new Array(n.length);for(var r=0;r<n.length;r++){var i=n[r];this.dataArray[r]=this.mapping(i)}if(this.updateElements(this.dataArray,e),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(e)){var a=this.container,o=this.type,s=this.coordinate,l=Zp(this.animateOption,"appear"),c=this.getYScale(),u=s.convert({x:0,y:c.scale(this.getYMinValue())});!function(e,t,n,r,i){if(XS[n]){var a=XS[n](r),o=YS(Zp(a,"animation",""));if(o){var s=Ph(Ph(Ph({},VS.appear),a),t);e.stopAnimate(),o(e,s,{coordinate:r,minYPoint:i,toAttrs:null})}}}(a,l,o,s,u)}this.labelOption&&this.renderLabels(tp(this.dataArray),e),this.lastAttributeOption=Ph({},this.attributeOption),!1===this.visible&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this,t=e.container,n=e.geometryLabel,r=e.offscreenGroup;t&&t.clear(),n&&n.clear(),r&&r.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},t.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,e.prototype.destroy.call(this)},t.prototype.getGroupScales=function(){return this.groupScales},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},t.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},t.prototype.getGroupAttributes=function(){var e=[];return Xh(this.attributes,(function(t){Md.includes(t.type)&&e.push(t)})),e},t.prototype.getDefaultValue=function(e){var t,n=this.getAttribute(e);return n&&Wp(n.scales)&&(t=n.values[0]),t},t.prototype.getAttributeValues=function(e,t){for(var n=[],r=e.scales,i=0,a=r.length;i<a;i++){var o=r[i],s=o.field;o.isIdentity?n.push(o.values):n.push(t[s])}return e.mapping.apply(e,n)},t.prototype.getAdjust=function(e){return this.adjusts[e]},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.getData=function(){return this.data},t.prototype.getShapeMarker=function(e,t){return this.getShapeFactory().getMarker(e,t)},t.prototype.getElementsBy=function(e){return this.elements.filter((function(t){return e(t)}))},t.prototype.getElements=function(){return this.elements},t.prototype.getElementId=function(e){var t=(e=Vh(e)?e[0]:e)._origin;if(this.idFields.length){for(var n=t[this.idFields[0]],r=1;r<this.idFields.length;r++)n+="-"+t[this.idFields[r]];return n}var i,a,o=this.type,s=this.getXScale(),l=this.getYScale(),c=s.field||"x",u=t[l.field||"y"];i="identity"===s.type?s.values[0]:t[c],a="interval"===o||"schema"===o?"".concat(i):"line"===o||"area"===o||"path"===o?o:"".concat(i,"-").concat(u);var h=this.groupScales;Wp(h)&&(h=Zp(this.getAttribute("color"),"scales",[]));r=0;for(var p=h.length;r<p;r++){var d=h[r].field;a="".concat(a,"-").concat(t[d])}var f=this.getAdjust("dodge");if(f){var m=f.dodgeBy;m&&(a="".concat(a,"-").concat(t[m]))}return this.getAdjust("jitter")&&(a="".concat(a,"-").concat(e.x,"-").concat(e.y)),a},t.prototype.getScaleFields=function(){var e=[],t=new Map,n=this,r=n.attributeOption,i=n.labelOption,a=n.tooltipOption;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s.fields?$T(s.fields,e,t):s.values&&$T(s.values,e,t)}return i&&i.fields&&$T(i.fields,e,t),Wh(a)&&a.fields&&$T(a.fields,e,t),e},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.elements,r=0,i=n.length;r<i;r++){n[r].changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},t.prototype.getFields=function(){var e=new Map,t=[];return Object.values(this.attributeOption).forEach((function(n){((null==n?void 0:n.fields)||[]).forEach((function(n){e.has(n)||t.push(n),e.set(n,!0)}))}),[]),t},t.prototype.getGroupFields=function(){for(var e=[],t=new Map,n=0,r=Md.length;n<r;n++){var i=Md[n],a=this.attributeOption[i];a&&a.fields&&$T(a.fields,e,t)}return e},t.prototype.getXYFields=function(){var e=this.attributeOption.position.fields;return[e[0],e[1]]},t.prototype.getXField=function(){return Zp(this.getXYFields(),[0])},t.prototype.getYField=function(){return Zp(this.getXYFields(),[1])},t.prototype.getShapes=function(){return this.elements.map((function(e){return e.shape}))},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.sort=function(e){if(!this.hasSorted)for(var t=this.getXScale(),n=t.field,r=0;r<e.length;r++){e[r].sort((function(e,r){return t.translate(e._origin[n])-t.translate(r._origin[n])}))}this.hasSorted=!0},t.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust("stack")&&this.updateStackRange(e,this.beforeMappingData)},t.prototype.getShapeFactory=function(){var e=this.shapeType;if(sk(e))return this.shapeFactory||(this.shapeFactory=Hp(sk(e))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},t.prototype.createShapePointsCfg=function(e){var t=this.getXScale(),n=this.getYScale();return{x:this.normalizeValues(e[t.field],t),y:n?this.normalizeValues(e[n.field],n):e.y?e.y:.1,y0:n?n.scale(this.getYMinValue()):void 0}},t.prototype.createElement=function(e,t,n){void 0===n&&(n=!1);var r=this.container,i=this.getDrawCfg(e),a=this.getShapeFactory(),o=new QS({shapeFactory:a,container:r,offscreenGroup:this.getOffscreenGroup(),elementIndex:t});return o.animate=this.animateOption,o.geometry=this,o.draw(i,n),o},t.prototype.getDrawCfg=function(e){var t=e._origin,n={mappingData:e,data:t,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},r=e.shape;!r&&this.getShapeFactory()&&(r=this.getShapeFactory().defaultShapeType),n.shape=r;var i=this.theme.geometries[this.shapeType];n.defaultStyle=Zp(i,[r,"default"],{}).style,!n.defaultStyle&&this.getShapeFactory()&&(n.defaultStyle=this.getShapeFactory().getDefaultStyle(i));var a=this.styleOption;return a&&(n.style=this.getStyleCfg(a,t)),this.generatePoints&&(n.points=e.points,n.nextPoints=e.nextPoints),n},t.prototype.updateElements=function(e,t){void 0===t&&(t=!1);for(var n=new Map,r=[],i=new Map,a=0,o=0;o<e.length;o++)for(var s=e[o],l=0;l<s.length;l++){var c=s[l],u=this.getElementId(c),h=n.has(u)?"".concat(u,"-").concat(o,"-").concat(l):u;r.push(h),n.set(h,c),i.set(h,a),a++}this.elements=new Array(a);for(var p=uk(this.lastElementsMap,r),d=p.added,f=p.updated,m=p.removed,g=0,v=d;g<v.length;g++){u=v[g],c=n.get(u),o=i.get(u);var y=this.createElement(c,o,t);this.elements[o]=y,this.elementsMap[u]=y,y.shape&&y.shape.setZIndex(this.zIndexReversed?this.elements.length-o:o)}for(var x=0,E=f;x<E.length;x++){u=E[x],y=this.lastElementsMap[u],c=n.get(u);var b=this.getDrawCfg(c),C=y.getModel();o=i.get(u);(this.isCoordinateChanged||lk(b,C))&&(y.animate=this.animateOption,y.update(b)),this.elements[o]=y,this.elementsMap[u]=y,y.shape&&y.shape.setZIndex(this.zIndexReversed?this.elements.length-o:o)}for(var T=0,w=m;T<w.length;T++){u=w[T];(y=this.lastElementsMap[u]).animate=this.animateOption,y.destroy()}},t.prototype.getLabelType=function(){var e=this,t=e.labelOption,n=e.coordinate,r=e.type,i=n.type,a=n.isTransposed,o=Zp(t,["cfg","type"]);return o||(o="polar"===i?a?"pie":"polar":"theta"===i?"pie":"interval"===r||"polygon"===r?"interval":"base"),o},t.prototype.getYMinValue=function(){var e=this.getYScale(),t=e.min,n=e.max;return t>=0?t:n<=0?n:0},t.prototype.createAttrOption=function(e,t,n){if(Uh(t)||Wh(t))Wh(t)&&qp(Object.keys(t),["values"])?Jp(this.attributeOption,e,{fields:t.values}):Jp(this.attributeOption,e,t);else{var r={};Ep(t)?r.values=[t]:r.fields=ck(t),n&&(Yh(n)?r.callback=n:r.values=n),Jp(this.attributeOption,e,r)}},t.prototype.initAttributes=function(){var e=this,t=this,n=t.attributes,r=t.attributeOption,i=t.theme,a=t.shapeType;this.groupScales=[];var o={},s=function(t){if(r.hasOwnProperty(t)){var s=r[t];if(!s)return{value:void 0};var l=Ph({},s),c=l.callback,u=l.values,h=l.fields,p=(void 0===h?[]:h).map((function(n){var r=e.scales[n];return r.isCategory&&!o[n]&&Md.includes(t)&&(e.groupScales.push(r),o[n]=!0),r}));l.scales=p,"position"!==t&&1===p.length&&"identity"===p[0].type?l.values=p[0].values:c||u||("size"===t?l.values=i.sizes:"shape"===t?l.values=i.shapes[a]||[]:"color"===t&&(p.length?l.values=p[0].values.length<=10?i.colors10:i.colors20:l.values=i.colors10));var d=Hx(t);n[t]=new d(l)}};for(var l in r){var c=s(l);if("object"==typeof c)return c.value}},t.prototype.processData=function(e){this.hasSorted=!1;for(var t=this.getAttribute("position").scales.filter((function(e){return e.isCategory})),n=this.groupData(e),r=[],i=0,a=n.length;i<a;i++){for(var o=n[i],s=[],l=0,c=o.length;l<c;l++){var u=o[l],h={};for(var p in u)h[p]=u[p];h._origin=u;for(var d=0,f=t;d<f.length;d++){var m=f[d],g=m.field;h[g]=m.translate(h[g])}s.push(h)}r.push(s)}var v=this.adjustData(r);return this.beforeMappingData=v,v},t.prototype.adjustData=function(e){var t=this.adjustOption,n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.theme,o=this.maxColumnWidth||a.maxColumnWidth,s=this.minColumnWidth||a.minColumnWidth,l=this.columnWidthRatio||a.columnWidthRatio,c=e;if(t){var u=this.getXScale(),h=this.getYScale(),p=u.field,d=h?h.field:null,f=UT(this.coordinate),m=u.values.length,g=this.getAttribute("size"),v=void 0;g&&(v=g.values[0]);for(var y=0,x=t.length;y<x;y++){var E=t[y],b=Ph({xField:p,yField:d,intervalPadding:r,dodgePadding:i,xDimensionLength:f,groupNum:m,defaultSize:v,maxColumnWidth:o,minColumnWidth:s,columnWidthRatio:l},E),C=E.type;if("dodge"===C){var T=[];if(u.isCategory||"identity"===u.type)T.push("x");else{if(h)throw new Error("dodge is not support linear attribute, please use category attribute!");T.push("y")}b.adjustNames=T,b.dodgeRatio=l}else if("stack"===C){var w=this.coordinate;if(!h){b.height=w.getHeight();var S=this.getDefaultValue("size")||3;b.size=S}!w.isTransposed&&Uh(b.reverseOrder)&&(b.reverseOrder=!0)}var k=new(zv(C))(b);c=k.process(c),this.adjusts[C]=k}}return c},t.prototype.groupData=function(e){for(var t=this.getGroupScales(),n=this.scaleDefs,r={},i=[],a=0;a<t.length;a++){var o=t[a].field;i.push(o),Zp(n,[o,"values"])&&(r[o]=n[o].values)}return function(e,t,n){if(void 0===n&&(n={}),!t)return[e];var r=vp(e,t),i=[];if(1===t.length&&n[t[0]])for(var a=0,o=n[t[0]];a<o.length;a++){var s=o[a],l=r["_".concat(s)];l&&i.push(l)}else for(var c in r)if(r.hasOwnProperty(c)){var u=r[c];i.push(u)}return i}(e,i,r)},t.prototype.updateStackRange=function(e,t){for(var n=tp(t),r=e.field,i=e.min,a=e.max,o=0;o<n.length;o++){var s=n[o],l=Math.min.apply(null,s[r]),c=Math.max.apply(null,s[r]);l<i&&(i=l),c>a&&(a=c)}var u=this.scaleDefs,h={};i<e.min&&!Zp(u,[r,"min"])&&(h.min=i),a>e.max&&!Zp(u,[r,"max"])&&(h.max=a),e.change(h)},t.prototype.beforeMapping=function(e){var t=e;if(this.sortable&&this.sort(t),this.generatePoints)for(var n=0,r=t.length;n<r;n++){var i=t[n];this.generateShapePoints(i);var a=t[n+1];a&&(this.generateShapePoints(a),i[0].nextPoints=a[0].points)}return t},t.prototype.generateShapePoints=function(e){for(var t=this.getShapeFactory(),n=this.getAttribute("shape"),r=0;r<e.length;r++){var i=e[r],a=this.createShapePointsCfg(i),o=n?this.getAttributeValues(n,i):null,s=t.getShapePoints(o,a);i.points=s}},t.prototype.normalizeValues=function(e,t){var n=[];if(Vh(e))for(var r=0;r<e.length;r++){var i=e[r];n.push(t.scale(i))}else n=t.scale(e);return n},t.prototype.mapping=function(e){for(var t=this.attributes,n=[],r=0;r<e.length;r++){var i=e[r],a={_origin:i._origin,points:i.points,nextPoints:i.nextPoints};for(var o in t)if(t.hasOwnProperty(o)){var s=t[o],l=s.names,c=this.getAttributeValues(s,i);if(l.length>1)for(var u=0;u<c.length;u+=1){var h=c[u];a[l[u]]=Vh(h)&&1===h.length?h[0]:h}else a[l[0]]=1===c.length?c[0]:c}this.convertPoint(a),n.push(a)}return n},t.prototype.convertPoint=function(e){var t,n,r,i=e.x,a=e.y,o=this.coordinate;if(Vh(i)&&Vh(a)){t=[],n=[];for(var s=0,l=0,c=i.length,u=a.length;s<c&&l<u;s+=1,l+=1)r=o.convert({x:i[s],y:a[l]}),t.push(r.x),n.push(r.y)}else if(Vh(a)){n=[];for(var h=0;h<a.length;h++){var p=a[h];r=o.convert({x:i,y:p}),t&&t!==r.x?(Vh(t)||(t=[t]),t.push(r.x)):t=r.x,n.push(r.y)}}else if(Vh(i)){t=[];for(h=0;h<i.length;h++){var d=i[h];r=o.convert({x:d,y:a}),n&&n!==r.y?(Vh(n)||(n=[n]),n.push(r.y)):n=r.y,t.push(r.x)}}else{var f=o.convert({x:i,y:a});t=f.x,n=f.y}e.x=t,e.y=n},t.prototype.getStyleCfg=function(e,t){var n=e.fields,r=void 0===n?[]:n,i=e.callback,a=e.cfg;if(a)return a;var o=r.map((function(e){return t[e]}));return i.apply(void 0,o)},t.prototype.setCfg=function(e){var t=this,n=e.coordinate,r=e.data,i=e.theme,a=e.scaleDefs;n&&(this.coordinate=n),r&&(this.data=r),a&&(this.scaleDefs=a,this.idFields=[],Xh(a,(function(e,n){e&&e.key&&t.idFields.push(n)}))),i&&(this.theme=this.userTheme?Yp({},i,this.userTheme):i)},t.prototype.renderLabels=function(e,t){void 0===t&&(t=!1);var n=this.geometryLabel;if(!n){var r=this.getLabelType();n=new(0,ZS[r.toLowerCase()])(this),this.geometryLabel=n}n.render(e,t);var i=n.labelsRenderer.shapesMap;Xh(this.elementsMap,(function(e,t){var n=function(e,t){var n=[];return Xh(t,(function(t,r){r.split(" ")[0]===e&&n.push(t)})),n}(t,i);if(n.length){e.labelShape=n;for(var r=0;r<n.length;r++)for(var a=n[r].getChildren(),o=0;o<a.length;o++){var s=a[o];s.cfg.name=["element","label"],s.cfg.element=e}}}))},t.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(void 0===Zp(this.animateOption,"appear")||Zp(this.animateOption,"appear")&&void 0===Zp(this.animateOption,["appear","animation"]))},t}($d),pk=am;function dk(e,t,n){var r=pk(e.getMatrix(),[["t",t,n]]);e.setMatrix(r)}function fk(e,t){var n=function(e,t){var n=e.attr(),r=n.x,i=n.y;return pk(e.getMatrix(),[["t",-r,-i],["r",t],["t",r,i]])}(e,t);e.setMatrix(n)}function mk(e){return e.find((function(e){return"text"===e.get("type")}))}function gk(e,t,n){void 0===n&&(n=[0,0,0,0]);var r=e.getChildren()[0];if(r){var i=r.clone();(null==t?void 0:t.rotate)&&fk(i,-t.rotate);var a=i.getCanvasBBox(),o=a.x,s=a.y,l=a.width,c=a.height;i.destroy();var u=n;return Uh(u)?u=[2,2,2,2]:Ep(u)&&(u=new Array(4).fill(u)),{x:o-u[3],y:s-u[0],width:l+u[1]+u[3],height:c+u[0]+u[2],rotation:(null==t?void 0:t.rotate)||0}}}function vk(e,t){var n=e.getBBox();return fp(t,(function(e){var t,r,i,a=e.getBBox();return t=n,r=a,void 0===(i=2)&&(i=0),Math.max(0,Math.min(t.x+t.width+i,r.x+r.width+i)-Math.max(t.x-i,r.x-i))*Math.max(0,Math.min(t.y+t.height+i,r.y+r.height+i)-Math.max(t.y-i,r.y-i))>0}))}function yk(e,t,n){var r=n.data,i=n.origin,a=n.animateCfg,o=n.coordinate,s=Zp(a,"update");e.set("data",r),e.set("origin",i),e.set("animateCfg",a),e.set("coordinate",o),e.set("visible",t.get("visible")),e.getChildren().forEach((function(l,c){var u=t.getChildByIndex(c);if(u){l.set("data",r),l.set("origin",i),l.set("animateCfg",a),l.set("coordinate",o);var h=HT(l,u);s?KS(l,s,{toAttrs:h,coordinate:o}):l.attr(h),u.isGroup()&&yk(l,u,n)}else e.removeChild(l),l.remove(!0)})),Xh(t.getChildren(),(function(t,n){n>=e.getCount()&&(t.destroyed||e.add(t))}))}var xk=function(){function e(e){this.shapesMap={},this.lastShapesMap={};var t=e.layout,n=e.container;this.layout=t,this.container=n}return e.prototype.render=function(e,t,n){var r=this;void 0===n&&(n=!1),this.shapesMap={};var i=this.container,a=this.createOffscreenGroup();if(e.length){for(var o=0,s=e;o<s.length;o++){var l=s[o];l&&this.renderLabel(l,a)}this.doLayout(e,t),this.renderLabelLine(e),this.renderLabelBackground(e),this.adjustLabel(e)}var c=this.lastShapesMap,u=this.shapesMap;Xh(u,(function(e,t){if(e.destroyed)delete u[t];else{if(c[t]){var a=e.get("data"),o=e.get("origin"),s=e.get("coordinate"),l=e.get("animateCfg"),h=c[t];yk(h,u[t],{data:a,origin:o,animateCfg:l,coordinate:s}),r.shapesMap[t]=h}else{i.add(e);var p=Zp(e.get("animateCfg"),n?"enter":"appear");p&&KS(e,p,{toAttrs:Ph({},e.attr()),coordinate:e.get("coordinate")})}delete c[t]}})),Xh(c,(function(e){var t=Zp(e.get("animateCfg"),"leave");t?KS(e,t,{toAttrs:null,coordinate:e.get("coordinate")}):e.remove(!0)})),this.lastShapesMap=u,a.destroy()},e.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},e.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},e.prototype.renderLabel=function(e,t){var n,r,i=e.id,a=e.elementId,o=e.data,s=e.mappingData,l=e.coordinate,c=e.animate,u=e.content,h={id:i,elementId:a,data:o,origin:Ph(Ph({},s),{data:s._origin}),coordinate:l},p=t.addGroup(Ph({name:"label",animateCfg:!1!==this.animate&&null!==c&&!1!==c&&Yp({},this.animate,c)},h));if(u.isGroup&&u.isGroup()||u.isShape&&u.isShape()){var d=u.getCanvasBBox(),f=d.width,m=d.height,g=Zp(e,"textAlign","left"),v=e.x;"center"===g?v-=f/2:"right"!==g&&"end"!==g||(v-=f),dk(u,v,e.y-m/2),n=u,p.add(u)}else{var y=Zp(e,["style","fill"]);n=p.addShape("text",Ph({attrs:Ph(Ph({x:e.x,y:e.y,textAlign:e.textAlign,textBaseline:Zp(e,"textBaseline","middle"),text:e.content},e.style),{fill:(r=y,null===r?e.color:y)})},h))}e.rotate&&fk(n,e.rotate),this.shapesMap[i]=p},e.prototype.doLayout=function(e,t){var n=this;this.layout&&Xh(Vh(this.layout)?this.layout:[this.layout],(function(r){var i,a=(i=Zp(r,"type",""),JS[i.toLowerCase()]);if(a){var o=[],s=[];Xh(n.shapesMap,(function(e,n){o.push(e),s.push(t[e.get("elementId")])})),a(e,o,s,n.region,r.cfg)}}))},e.prototype.renderLabelLine=function(e){var t=this;Xh(e,(function(e){var n=Zp(e,"coordinate");if(e&&n){var r=n.getCenter(),i=n.getRadius();if(e.labelLine){var a=Zp(e,"labelLine",{}),o=e.id,s=a.path;if(!s){var l=RT(r.x,r.y,i,e.angle);s=[["M",l.x,l.y],["L",e.x,e.y]]}var c=t.shapesMap[o];c.destroyed||c.addShape("path",{capture:!1,attrs:Ph({path:s,stroke:e.color?e.color:Zp(e,["style","fill"],"#000"),fill:null},a.style),id:o,origin:e.mappingData,data:e.data,coordinate:e.coordinate})}}}))},e.prototype.renderLabelBackground=function(e){var t=this;Xh(e,(function(e){var n=Zp(e,"coordinate"),r=Zp(e,"background");if(r&&n){var i=e.id,a=t.shapesMap[i];if(!a.destroyed){var o=a.getChildren()[0];if(o){var s=gk(a,e,r.padding),l=s.rotation,c=Rh(s,["rotation"]),u=a.addShape("rect",{attrs:Ph(Ph({},c),r.style||{}),id:i,origin:e.mappingData,data:e.data,coordinate:e.coordinate});if(u.setZIndex(-1),l){var h=o.getMatrix();u.setMatrix(h)}}}}}))},e.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},e.prototype.adjustLabel=function(e){var t=this;Xh(e,(function(e){if(e){var n=e.id,r=t.shapesMap[n];if(!r.destroyed)Xh(r.findAll((function(e){return"path"!==e.get("type")})),(function(t){t&&(e.offsetX&&t.attr("x",t.attr("x")+e.offsetX),e.offsetY&&t.attr("y",t.attr("y")+e.offsetY))}))}}))},e}();function Ek(e){var t=0;return Xh(e,(function(e){t+=e})),t/e.length}var bk=function(){function e(e){this.geometry=e}return e.prototype.getLabelItems=function(e){var t=this,n=[],r=this.getLabelCfgs(e);return Xh(e,(function(e,i){var a=r[i];if(!a||Uh(e.x)||Uh(e.y))n.push(null);else{var o=Vh(a.content)?a.content:[a.content];a.content=o;var s=o.length;Xh(o,(function(r,i){if(Uh(r)||""===r)n.push(null);else{var o=Ph(Ph({},a),t.getLabelPoint(a,e,i));o.textAlign||(o.textAlign=t.getLabelAlign(o,i,s)),o.offset<=0&&(o.labelLine=null),n.push(o)}}))}})),n},e.prototype.render=function(e,t){void 0===t&&(t=!1);var n=this.getLabelItems(e),r=this.getLabelsRenderer(),i=this.getGeometryShapes();r.render(n,i,t)},e.prototype.clear=function(){var e=this.labelsRenderer;e&&e.clear()},e.prototype.destroy=function(){var e=this.labelsRenderer;e&&e.destroy(),this.labelsRenderer=null},e.prototype.getCoordinate=function(){return this.geometry.coordinate},e.prototype.getDefaultLabelCfg=function(e,t){var n=this.geometry,r=n.type,i=n.theme;return"polygon"===r||"interval"===r&&"middle"===t||e<0&&!["line","point","path"].includes(r)?Zp(i,"innerLabels",{}):Zp(i,"labels",{})},e.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.type,i=t.theme;return"polygon"===r||e.offset<0&&!["line","point","path"].includes(r)?Yp({},n,i.innerLabels,e):Yp({},n,i.labels,e)},e.prototype.setLabelPosition=function(e,t,n,r){},e.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=this.getOffsetVector(e);return t.isTransposed?n[0]:n[1]},e.prototype.getLabelOffsetPoint=function(e,t,n){var r=e.offset,i=this.getCoordinate().isTransposed,a=i?"x":"y",o=i?1:-1,s={x:0,y:0};return s[a]=t>0||1===n?r*o:r*o*-1,s},e.prototype.getLabelPoint=function(e,t,n){var r=this.getCoordinate(),i=e.content.length;function a(t,n,r){void 0===r&&(r=!1);var i=t;return Vh(i)&&(i=1===e.content.length?r?Ek(i):i.length<=2?i[t.length-1]:Ek(i):i[n]),i}var o={content:e.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},s=Vh(t.shape)?t.shape[0]:t.shape,l="funnel"===s||"pyramid"===s;if("polygon"===this.geometry.type){var c=function(e,t){if(Ep(e)&&Ep(t))return[e,t];if(t=t,LT(e=e)||LT(t))return[PT(e),PT(t)];for(var n,r,i=-1,a=0,o=0,s=e.length-1,l=0;++i<e.length;)n=s,s=i,l+=r=e[n]*t[s]-e[s]*t[n],a+=(e[n]+e[s])*r,o+=(t[n]+t[s])*r;return[a/(l*=3),o/l]}(t.x,t.y);o.x=c[0],o.y=c[1]}else"interval"!==this.geometry.type||l?(o.x=a(t.x,n),o.y=a(t.y,n)):(o.x=a(t.x,n,!0),o.y=a(t.y,n));if(l){var u=Zp(t,"nextPoints"),h=Zp(t,"points");if(u){var p=r.convert(h[1]),d=r.convert(u[1]);o.x=(p.x+d.x)/2,o.y=(p.y+d.y)/2}else if("pyramid"===s){p=r.convert(h[1]),d=r.convert(h[2]);o.x=(p.x+d.x)/2,o.y=(p.y+d.y)/2}}e.position&&this.setLabelPosition(o,t,n,e.position);var f=this.getLabelOffsetPoint(e,n,i);return o.start={x:o.x,y:o.y},o.x+=f.x,o.y+=f.y,o.color=t.color,o},e.prototype.getLabelAlign=function(e,t,n){var r="center";if(this.getCoordinate().isTransposed){var i=e.offset;r=i<0?"right":0===i?"center":"left",n>1&&0===t&&("right"===r?r="left":"left"===r&&(r="right"))}return r},e.prototype.getLabelId=function(e){var t=this.geometry,n=t.type,r=t.getXScale(),i=t.getYScale(),a=e._origin,o=t.getElementId(e);return"line"===n||"area"===n?o+=" ".concat(a[r.field]):"path"===n&&(o+=" ".concat(a[r.field],"-").concat(a[i.field])),o},e.prototype.getLabelsRenderer=function(){var e=this.geometry,t=e.labelsContainer,n=e.labelOption,r=e.canvasRegion,i=e.animateOption,a=this.geometry.coordinate,o=this.labelsRenderer;return o||(o=new xk({container:t,layout:Zp(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=o),o.region=r,o.animate=!!i&&qS("label",a),o},e.prototype.getLabelCfgs=function(e){var t=this,n=this.geometry,r=n.labelOption,i=n.scales,a=n.coordinate,o=r,s=o.fields,l=o.callback,c=o.cfg,u=s.map((function(e){return i[e]})),h=[];return Xh(e,(function(e,n){var r,i=e._origin,o=t.getLabelText(i,u);if(l){var p=s.map((function(e){return i[e]}));if(r=l.apply(void 0,p),Uh(r))return void h.push(null)}var d=Ph(Ph({id:t.getLabelId(e),elementId:t.geometry.getElementId(e),data:i,mappingData:e,coordinate:a},c),r);Yh(d.position)&&(d.position=d.position(i,e,n));var f=t.getLabelOffset(d.offset||0),m=t.getDefaultLabelCfg(f,d.position);(d=Yp({},m,d)).offset=t.getLabelOffset(d.offset||0);var g=d.content;Yh(g)?d.content=g(i,e,n):Rp(g)&&(d.content=o[0]),h.push(d)})),h},e.prototype.getLabelText=function(e,t){var n=[];return Xh(t,(function(t){var r=e[t.field];r=Vh(r)?r.map((function(e){return t.getText(e)})):t.getText(r),Uh(r)||""===r?n.push(null):n.push(r)})),n},e.prototype.getOffsetVector=function(e){void 0===e&&(e=0);var t=this.getCoordinate(),n=0;return Ep(e)&&(n=e),t.isTransposed?t.applyMatrix(n,0):t.applyMatrix(0,n)},e.prototype.getGeometryShapes=function(){var e=this.geometry,t={};return Xh(e.elementsMap,(function(e,n){t[n]=e.shape})),Xh(e.getOffscreenGroup().getChildren(),(function(n){var r=e.getElementId(n.get("origin").mappingData);t[r]=n})),t},e}();function Ck(e,t,n){if(!e)return n;var r;if(e.callback&&e.callback.length>1){var i=Array(e.callback.length-1).fill("");r=e.mapping.apply(e,Bh([t],i,!1)).join("")}else r=e.mapping(t).join("");return r||n}var Tk={hexagon:function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},bowtie:function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},cross:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},tick:function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},plus:function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},hyphen:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},line:function(e,t,n){return[["M",e,t-n],["L",e,t+n]]}},wk=["line","cross","tick","plus","hyphen"];function Sk(e){var t=e.symbol;lp(t)&&Tk[t]&&(e.symbol=Tk[t])}function kk(e){return e.startsWith(ud.LEFT)||e.startsWith(ud.RIGHT)?"vertical":"horizontal"}function _k(e,t,n,r,i){var a=n.getScale(n.type);if(a.isCategory){var o=a.field,s=t.getAttribute("color"),l=t.getAttribute("shape"),c=e.getTheme().defaultColor,u=t.coordinate.isPolar;return a.getTicks().map((function(n,h){var p,d=n.text,f=n.value,m=d,g=a.invert(f),v=0===e.filterFieldData(o,[(p={},p[o]=g,p)]).length;Xh(e.views,(function(e){var t;e.filterFieldData(o,[(t={},t[o]=g,t)]).length||(v=!0)}));var y,x,E=Ck(s,g,c),b=Ck(l,g,"point"),C=t.getShapeMarker(b,{color:E,isInPolar:u}),T=i;return Yh(T)&&(T=T(m,h,Ph({name:m,value:g},Yp({},r,C)))),function(e,t){var n=e.symbol;if(lp(n)&&-1!==wk.indexOf(n)){var r=Zp(e,"style",{}),i=Zp(r,"lineWidth",1),a=r.stroke||r.fill||t;e.style=Yp({},e.style,{lineWidth:i,stroke:a,fill:null})}}(C=Yp({},r,C,GT(Ph({},T),["style"])),E),T&&T.style&&(C.style=(y=C.style,x=T.style,Yh(x)?x(y):Yp({},y,x))),Sk(C),{id:g,name:m,value:g,marker:C,unchecked:v}}))}return[]}function Ak(e,t){var n=Zp(e,["components","legend"],{});return Yp({},Zp(n,["common"],{}),Yp({},Zp(n,[t],{})))}function Ok(e){return!e&&(null==e||isNaN(e))}function Ik(e){if(Vh(e))return Ok(e[1].y);var t=e.y;return Vh(t)?Ok(t[0]):Ok(t)}function Mk(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!0),!e.length||1===e.length&&!n)return[];if(t){for(var r=[],i=0,a=e.length;i<a;i++){Ik(l=e[i])||r.push(l)}return[r]}var o=[],s=[];for(i=0,a=e.length;i<a;i++){var l;Ik(l=e[i])?s.length&&((1!==s.length||n)&&o.push(s),s=[]):s.push(l)}return s.length&&o.push(s),o}function Nk(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=0===n?"M":"L";t.push([i,r.x,r.y])}}var a=e[0];return a&&(t.push(["L",a.x,a.y]),t.push(["z"])),t}function Fk(e){for(var t=e.length/2,n=[],r=[],i=0;i<e.length;i++)i<t?n.push(e[i]):r.push(e[i]);var a=Cw(n,!1),o=Cw(r,!1);r.length&&a.push(["L",r[0].x,r[0].y]),o.shift();var s=a.concat(o);return n.length&&s.push(["L",n[0].x,n[0].y]),s.push(["z"]),s}function Lk(e,t,n,r){void 0===r&&(r="");var i=e.style,a=void 0===i?{}:i,o=e.defaultStyle,s=e.color,l=e.size,c=Ph(Ph({},o),a);return s&&(t&&(a.stroke||(c.stroke=s)),n&&(a.fill||(c.fill=s))),r&&Uh(a[r])&&!Uh(l)&&(c[r]=l),c}function Pk(e){return Yp({},{fill:"#CCD6EC",fillOpacity:.3},Zp(e,["background","style"]))}function Rk(e){var t=e.x;return(Vh(e.y)?e.y:[e.y]).map((function(e,n){return{x:Vh(t)?t[n]:t,y:e}}))}var Dk={line:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},dot:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},dash:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},smooth:function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},hv:function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},vh:function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},hvh:function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]},vhv:function(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}};function Bk(e,t){var n=e.color;return{symbol:Dk[t],style:{lineWidth:2,r:6,stroke:n}}}function zk(e,t,n,r,i){return 1===e.length?[["M",e[0].x,e[0].y-i.lineWidth/2],["L",e[0].x,e[0].y],["L",e[0].x,e[0].y+i.lineWidth/2]]:(n?(t&&e.length&&e.push({x:e[0].x,y:e[0].y}),a=Cw(e,!1,r)):(a=bw(e,!1),t&&a.push(["Z"])),a);var a}function Hk(e,t,n,r,i,a){if(e.length){var o=e[0];return Vh(o.y)?function(e,t,n,r,i,a){var o=[],s=[];Xh(e,(function(e){var t=Rk(e);o.push(t[1]),s.push(t[0])}));var l=zk(o,t,r,i,a),c=zk(s,t,r,i,a);return n?l:l.concat(c)}(e,t,n,r,i,a):zk(e,t,r,i,a)}return[]}ak("line",{defaultShapeType:"line"}),Xh(["line","dot","dash","smooth"],(function(e){ok("line",e,{draw:function(t,n){var r,i="smooth"===e;if(i){var a=this.coordinate,o=a.start,s=a.end;r=[[o.x,s.y],[s.x,o.y]]}var l=function(e,t,n){for(var r=e.isStack,i=e.connectNulls,a=e.isInCircle,o=e.showSinglePoint,s=Lk(e,!0,!1,"lineWidth"),l=Mk(e.points,i,o),c=[],u=0,h=l.length;u<h;u++){var p=l[u];c=c.concat(Hk(p,a,r,t,n,s))}return s.path=c,s}(t,i,r);return n.addShape({type:"path",attrs:l,name:"line",capture:!i})},getMarker:function(t){return Bk(t,e)}})}));var jk={getLegendItems:_k,translate:dk,rotate:fk,zoom:function(e,t){var n=e.getBBox(),r=(n.minX+n.maxX)/2,i=(n.minY+n.maxY)/2;e.applyToMatrix([r,i,1]);var a=pk(e.getMatrix(),[["t",-r,-i],["s",t,t],["t",r,i]]);e.setMatrix(a)},transform:pk,getAngle:zT,getSectorPath:DT,polarToCartesian:RT,getDelegationObject:kw,getTooltipItems:wS,getMappingValue:Ck,getPath:Hk,getPathPoints:Mk},Gk="#000",$k="#BFBFBF",Yk="#F0F0F0",Uk="#FFFFFF",Vk="#A6A6A6",Wk="#737373",Xk="#404040",qk="#262626",Kk=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Qk=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Zk=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],Jk=function(e){void 0===e&&(e={});var t=e.backgroundColor,n=void 0===t?"#141414":t,r=e.subColor,i=void 0===r?"rgba(255,255,255,0.05)":r,a=e.paletteQualitative10,o=void 0===a?Kk:a,s=e.paletteQualitative20,l=void 0===s?Qk:s,c=e.paletteSemanticRed,u=void 0===c?"#F4664A":c,h=e.paletteSemanticGreen,p=void 0===h?"#30BF78":h,d=e.paletteSemanticYellow,f=void 0===d?"#FAAD14":d,m=e.paletteSequence,g=void 0===m?Zk:m,v=e.fontFamily,y=void 0===v?'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"':v,x=e.brandColor;return{backgroundColor:n,brandColor:void 0===x?o[0]:x,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:u,paletteSemanticGreen:p,paletteSemanticYellow:f,paletteSequence:g,fontFamily:y,axisLineBorderColor:Xk,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Vk,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:Xk,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:qk,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Wk,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:qk,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Wk,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Kk[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Vk,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Wk,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Wk,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Vk,legendPageNavigatorTextFontSize:12,sliderRailFillColor:qk,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Wk,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Yk,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:$k,annotationArcBorderColor:qk,annotationArcBorder:1,annotationLineBorderColor:Xk,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Vk,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Uk,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Xk,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:Vk,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Vk,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Gk,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Vk,overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Gk,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Xk,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:Kk[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Gk,pointBorderOpacity:1,pointActiveBorderColor:Uk,pointSelectedBorder:2,pointSelectedBorderColor:Uk,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Kk[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Gk,hollowPointActiveBorder:1,hollowPointActiveBorderColor:Uk,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Uk,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Kk[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Kk[0],areaFillOpacity:.25,areaActiveFillColor:Kk[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Kk[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Kk[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Uk,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Uk,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Kk[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Uk,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Uk,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Kk[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Gk,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Uk,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Uk,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}}();function e_(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function t_(e,t,n,r,i,a){return i>=e&&i<=e+n&&a>=t&&a<=t+r}function n_(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function r_(e,t){return e[0]===t[0]&&e[1]===t[1]}var i_=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,a_=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,o_=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s_=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function l_(e,t){Xh(e.match(s_),(function(e){var n=e.split(":");t.addColorStop(n[0],n[1])}))}function c_(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(lp(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(e,t,n){var r,i,a=i_.exec(n),o=parseFloat(a[1])%360*(Math.PI/180),s=a[2],l=t.getBBox();o>=0&&o<.5*Math.PI?(r={x:l.minX,y:l.minY},i={x:l.maxX,y:l.maxY}):.5*Math.PI<=o&&o<Math.PI?(r={x:l.maxX,y:l.minY},i={x:l.minX,y:l.maxY}):Math.PI<=o&&o<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},i={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},i={x:l.maxX,y:l.minY});var c=Math.tan(o),u=c*c,h=(i.x-r.x+c*(i.y-r.y))/(u+1)+r.x,p=c*(i.x-r.x+c*(i.y-r.y))/(u+1)+r.y,d=e.createLinearGradient(r.x,r.y,h,p);return l_(s,d),d}(e,t,n);if("r"===n[0])return function(e,t,n){var r=a_.exec(n),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(0===o){var l=s.match(s_);return l[l.length-1].split(":")[1]}var c=t.getBBox(),u=c.maxX-c.minX,h=c.maxY-c.minY,p=Math.sqrt(u*u+h*h)/2,d=e.createRadialGradient(c.minX+u*i,c.minY+h*a,0,c.minX+u/2,c.minY+h/2,o*p);return l_(s,d),d}(e,t,n);if("p"===n[0])return function(e,t,n){if(t.get("patternSource")&&t.get("patternSource")===n)return t.get("pattern");var r,i,a=o_.exec(n),o=a[1],s=a[2];function l(){r=e.createPattern(i,o),t.set("pattern",r),t.set("patternSource",n)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}(e,t,n)}return n}return n instanceof CanvasPattern?n:void 0}function u_(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function h_(e,t){return u_(e)*u_(t)?(e[0]*t[0]+e[1]*t[1])/(u_(e)*u_(t)):1}function p_(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(h_(e,t))}function d_(e,t){var n=t[1],r=t[2],i=Tp(Sp(t[3]),2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],c=t[6],u=t[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=h*h/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var f=n*n*(p*p)+r*r*(h*h),m=f?Math.sqrt((n*n*(r*r)-f)/f):1;a===o&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*p/r:0,v=n?m*-r*h/n:0,y=(s+c)/2+Math.cos(i)*g-Math.sin(i)*v,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*v,E=[(h-g)/n,(p-v)/r],b=[(-1*h-g)/n,(-1*p-v)/r],C=p_([1,0],E),T=p_(E,b);return h_(E,b)<=-1&&(T=Math.PI),h_(E,b)>=1&&(T=0),0===o&&T>0&&(T-=2*Math.PI),1===o&&T<0&&(T+=2*Math.PI),{cx:y,cy:x,rx:r_(e,[c,u])?0:n,ry:r_(e,[c,u])?0:r,startAngle:C,endAngle:C+T,xRotation:i,arcFlag:a,sweepFlag:o}}var f_=Math.sin,m_=Math.cos,g_=Math.atan2,v_=Math.PI;function y_(e,t,n,r,i,a,o){var s=t.stroke,l=t.lineWidth,c=g_(r-a,n-i),u=new J_({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*m_(v_/6)+","+10*f_(v_/6)+" L0,0 L"+10*m_(v_/6)+",-"+10*f_(v_/6),stroke:s,lineWidth:l}});u.translate(i,a),u.rotateAtPoint(i,a,c),e.set(o?"startArrowShape":"endArrowShape",u)}function x_(e,t,n,r,i,a,o){var s=t.startArrow,l=t.endArrow,c=t.stroke,u=t.lineWidth,h=o?s:l,p=h.d,d=h.fill,f=h.stroke,m=h.lineWidth,g=Rh(h,["d","fill","stroke","lineWidth"]),v=g_(r-a,n-i);p&&(i-=m_(v)*p,a-=f_(v)*p);var y=new J_({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:Ph(Ph({},g),{stroke:f||c,lineWidth:m||u,fill:d})});y.translate(i,a),y.rotateAtPoint(i,a,v),e.set(o?"startArrowShape":"endArrowShape",y)}function E_(e,t,n,r,i){var a=g_(r-t,n-e);return{dx:m_(a)*i,dy:f_(a)*i}}function b_(e,t,n,r,i,a){"object"==typeof t.startArrow?x_(e,t,n,r,i,a,!0):t.startArrow?y_(e,t,n,r,i,a,!0):e.set("startArrowShape",null)}function C_(e,t,n,r,i,a){"object"==typeof t.endArrow?x_(e,t,n,r,i,a,!1):t.endArrow?y_(e,t,n,r,i,a,!1):e.set("startArrowShape",null)}var T_={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function w_(e,t){var n=t.attr();for(var r in n){var i=n[r],a=T_[r]?T_[r]:r;"matrix"===a&&i?e.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===a&&e.setLineDash?Vh(i)&&e.setLineDash(i):("strokeStyle"===a||"fillStyle"===a?i=c_(e,t,i):"globalAlpha"===a&&(i*=e.globalAlpha),e[a]=i)}}function S_(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];i.cfg.visible?i.draw(e,n):i.skipDraw()}}function k_(e,t,n){var r=e.get("refreshElements");Xh(r,(function(t){if(t!==e)for(var n=t.cfg.parent;n&&n!==e&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===e?O_(t):__(t,n)}function __(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&O_(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&__(r.cfg.children,t);else{var i=I_(r,t);r.cfg.refresh=i,i&&r.isGroup()&&__(r.cfg.children,t)}}}function A_(e){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&A_(n.cfg.children)}}function O_(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.refresh=!0,r.isGroup()&&O_(r.get("children"))}}function I_(e,t){var n=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&n&&n_(n,t)}function M_(e,t,n,r){var i=n.path,a=n.startArrow,o=n.endArrow;if(i){var s=[0,0],l=[0,0],c={dx:0,dy:0};t.beginPath();for(var u=0;u<i.length;u++){var h=i[u],p=h[0];if(0===u&&a&&a.d)c=E_((d=e.getStartTangent())[0][0],d[0][1],d[1][0],d[1][1],a.d);else if(u===i.length-2&&"Z"===i[u+1][0]&&o&&o.d){if("Z"===i[u+1][0])c=E_((d=e.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d)}else if(u===i.length-1&&o&&o.d){var d;if("Z"!==i[0])c=E_((d=e.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d)}var f=c.dx,m=c.dy;switch(p){case"M":t.moveTo(h[1]-f,h[2]-m),l=[h[1],h[2]];break;case"L":t.lineTo(h[1]-f,h[2]-m);break;case"Q":t.quadraticCurveTo(h[1],h[2],h[3]-f,h[4]-m);break;case"C":t.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-f,h[6]-m);break;case"A":var g=void 0;r?(g=r[u])||(g=d_(s,h),r[u]=g):g=d_(s,h);var v=g.cx,y=g.cy,x=g.rx,E=g.ry,b=g.startAngle,C=g.endAngle,T=g.xRotation,w=g.sweepFlag;if(t.ellipse)t.ellipse(v,y,x,E,T,b,C,1-w);else{var S=x>E?x:E,k=x>E?1:x/E,_=x>E?E/x:1;t.translate(v,y),t.rotate(T),t.scale(k,_),t.arc(0,0,S,b,C,1-w),t.scale(1/k,1/_),t.rotate(-T),t.translate(-v,-y)}break;case"Z":t.closePath()}if("Z"===p)s=l;else{var A=h.length;s=[h[A-2],h[A-1]]}}}}function N_(e,t){var n=e.get("canvas");n&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(n.refreshElement(e,t,n),n.get("autoDraw")&&n.draw())))}function F_(e){var t,n,r;if(e.destroyed)t=e._cacheCanvasBBox;else{var i=e.get("cacheCanvasBBox"),a=i&&!(!i.width||!i.height),o=e.getCanvasBBox(),s=o&&!(!o.width||!o.height);a&&s?(r=o,t=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):a?t=i:s&&(t=o)}return t}var L_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.onCanvasChange=function(e){N_(this,e)},t.prototype.getShapeBase=function(){return Fn},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),w_(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],n=[];Xh(e,(function(e){var r=e.cfg.cacheCanvasBBox;r&&e.cfg.isInView&&(t.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(t.length){var i=rp(t),a=np(t),o=rp(n),s=np(n);r={minX:i,minY:o,x:i,y:o,maxX:a,maxY:s,width:a-i,height:s-o};var l=this.cfg.canvas;if(l){var c=l.getViewRange();this.set("isInView",n_(r,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},t.prototype.draw=function(e,t){var n=this.cfg.children,r=!t||this.cfg.refresh;n.length&&r&&(e.save(),w_(e,this),this._applyClip(e,this.getClip()),S_(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(Og),P_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return Fn},t.prototype.getGroupBase=function(){return L_},t.prototype.onCanvasChange=function(e){N_(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),n=Fg(e)(this),r=t/2,i=n.x-r,a=n.y-r,o=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:a,minY:a,width:n.width+t,height:n.height+t,maxX:o,maxY:s}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),w_(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!n_(t,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),w_(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),n=n_(t,e);this.set("isInView",n),n?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,a=t.fillOpacity;this.isFill()&&(Uh(a)||1===a?this.fill(e):(e.globalAlpha=a,this.fill(e),e.globalAlpha=r)),this.isStroke()&&n>0&&(Uh(i)||1===i||(e.globalAlpha=i),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(Ig),R_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=a.x,s=a.y,l=a.r,c=i/2,u=e_(o,s,e,t);return r&&n?u<=l+c:r?u<=l:!!n&&(u>=l-c&&u<=l+c)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.r;e.beginPath(),e.arc(n,r,i,0,2*Math.PI,!1),e.closePath()},t}(P_);function D_(e,t,n,r){return e/(n*n)+t/(r*r)}var B_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=i/2,s=a.x,l=a.y,c=a.rx,u=a.ry,h=(e-s)*(e-s),p=(t-l)*(t-l);return r&&n?D_(h,p,c+o,u+o)<=1:r?D_(h,p,c,u)<=1:!!n&&(D_(h,p,c-o,u-o)>=1&&D_(h,p,c+o,u+o)<=1)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(n,r,i,a,0,0,2*Math.PI,!1);else{var o=i>a?i:a,s=i>a?1:i/a,l=i>a?a/i:1;e.save(),e.translate(n,r),e.scale(s,l),e.arc(0,0,o,0,2*Math.PI),e.restore(),e.closePath()}},t}(P_);function z_(e){return e instanceof HTMLElement&&lp(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}var H_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var t=this,n=this.attrs;if(lp(e)){var r=new Image;r.onload=function(){if(t.destroyed)return!1;t.attr("img",r),t.set("loading",!1),t._afterLoading();var e=t.get("callback");e&&e.call(t)},r.crossOrigin="Anonymous",r.src=e,this.set("loading",!0)}else e instanceof Image?(n.width||(n.width=e.width),n.height||(n.height=e.height)):z_(e)&&(n.width||(n.width=Number(e.getAttribute("width"))),n.height||(n.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"img"===t&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",e);var t=this.attr(),n=t.x,r=t.y,i=t.width,a=t.height,o=t.sx,s=t.sy,l=t.swidth,c=t.sheight,u=t.img;(u instanceof Image||z_(u))&&(Uh(o)||Uh(s)||Uh(l)||Uh(c)?e.drawImage(u,n,r,i,a):e.drawImage(u,o,s,l,c,n,r,i,a))},t}(P_);function j_(e,t,n,r,i,a,o){var s=Math.min(e,n),l=Math.max(e,n),c=Math.min(t,r),u=Math.max(t,r),h=i/2;return a>=s-h&&a<=l+h&&o>=c-h&&o<=u+h&&Gg.pointToLine(e,t,n,r,a,o)<=i/2}var G_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=e.startArrow,o=e.endArrow;a&&b_(this,e,r,i,t,n),o&&C_(this,e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){if(!n||!i)return!1;var a=this.attr();return j_(a.x1,a.y1,a.x2,a.y2,i,e,t)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o=t.startArrow,s=t.endArrow,l={dx:0,dy:0},c={dx:0,dy:0};o&&o.d&&(l=E_(n,r,i,a,t.startArrow.d)),s&&s.d&&(c=E_(n,r,i,a,t.endArrow.d)),e.beginPath(),e.moveTo(n+l.dx,r+l.dy),e.lineTo(i-c.dx,a-c.dy)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Gg.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2;return Gg.pointAt(n,r,i,a,e)},t}(P_),$_={circle:function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},Y_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return Uh(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e,n,r=this.attr(),i=r.x,a=r.y,o=r.symbol||"circle",s=this._getR(r);if(Yh(o))n=bv(n=(e=o)(i,a,s));else{if(!(e=t.Symbols[o]))return console.warn(o+" marker is not supported."),null;n=e(i,a,s)}return n},t.prototype.createPath=function(e){M_(this,e,{path:this._getPath()},this.get("paramsCache"))},t.Symbols=$_,t}(P_);function U_(e,t,n){var r=cv();return e.createPath(r),r.isPointInPath(t,n)}function V_(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function W_(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function X_(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(W_(o,s,[t,n]))return!0;V_(o[1]-n)>0!=V_(s[1]-n)>0&&V_(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function q_(e,t,n,r,i,a,o,s){var l=(Math.atan2(s-t,o-e)+2*Math.PI)%(2*Math.PI);if(l<r||l>i)return!1;var c={x:e+n*Math.cos(l),y:t+n*Math.sin(l)};return e_(c.x,c.y,o,s)<=a/2}var K_=am;var Q_=Ph({hasArc:function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break}}return t},extractPolygons:function(e){for(var t=e.length,n=[],r=[],i=[],a=0;a<t;a++){var o=e[a],s=o[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([o[1],o[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(e,t,n,r,i){for(var a=!1,o=t/2,s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,u=l.params,h=l.prePoint,p=l.box;if(!p||t_(p.x-o,p.y-o,p.width+t,p.height+t,n,r)){switch(l.command){case"L":case"Z":a=j_(h[0],h[1],c[0],c[1],t,n,r);break;case"Q":a=qg.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],n,r)<=t/2;break;case"C":a=tv.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i)<=t/2;break;case"A":var d=l.arcParams,f=d.cx,m=d.cy,g=d.rx,v=d.ry,y=d.startAngle,x=d.endAngle,E=d.xRotation,b=[n,r,1],C=g>v?g:v;$f(b,b,K_(null,[["t",-f,-m],["r",-E],["s",1/(g>v?1:g/v),1/(g>v?v/g:1)]])),a=q_(0,0,C,y,x,t,b[0],b[1])}if(a)break}}return a}},Cf);function Z_(e,t,n){for(var r=!1,i=0;i<e.length;i++){if(r=X_(e[i],t,n))break}return r}var J_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"path"===t&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=bv(e);var t=Q_.hasArc(e);this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=Av(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e,t=this.attr(),n=t.startArrow,r=t.endArrow;n&&b_(this,t,(e=this.getStartTangent())[0][0],e[0][1],e[1][0],e[1][1]);r&&C_(this,t,(e=this.getEndTangent())[0][0],e[0][1],e[1][0],e[1][1])},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.getSegments(),o=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=Q_.isPointInStroke(a,i,e,t,l)}if(!s&&r)if(o)s=U_(this,e,t);else{var c=this.attr("path"),u=Q_.extractPolygons(c);s=Z_(u.polygons,e,t)||Z_(u.polylines,e,t)}return s},t.prototype.createPath=function(e){M_(this,e,this.attr(),this.get("paramsCache"))},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return Uh(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var t,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;Xh(r,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)}));var a=i[n];if(Uh(a)||Uh(n))return null;var o=a.length,s=i[n+1];return tv.pointAt(a[o-2],a[o-1],s[1],s[2],s[3],s[4],s[5],s[6],t)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",Q_.pathToCurve(e))},t.prototype._setTcache=function(){var e,t,n,r,i=0,a=0,o=[],s=this.get("curve");s&&(Xh(s,(function(e,t){n=s[t+1],r=e.length,n&&(i+=tv.length(e[r-2],e[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?(Xh(s,(function(l,c){n=s[c+1],r=l.length,n&&((e=[])[0]=a/i,t=tv.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),a+=t||0,e[1]=a/i,o.push(e))})),this.set("tCache",o)):this.set("tCache",[]))},t.prototype.getStartTangent=function(){var e,t=this.getSegments();if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e},t.prototype.getEndTangent=function(){var e,t=this.getSegments(),n=t.length;if(n>1){var r=t[n-2].currentPoint,i=t[n-1].currentPoint,a=t[n-1].endTangent;e=[],a?(e.push([i[0]-a[0],i[1]-a[1]]),e.push([i[0],i[1]])):(e.push([r[0],r[1]]),e.push([i[0],i[1]]))}return e},t}(P_);function eA(e,t,n,r,i){var a=e.length;if(a<2)return!1;for(var o=0;o<a-1;o++){if(j_(e[o][0],e[o][1],e[o+1][0],e[o+1][1],t,n,r))return!0}if(i){var s=e[0],l=e[a-1];if(j_(s[0],s[1],l[0],l[1],t,n,r))return!0}return!1}var tA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr().points,o=!1;return n&&(o=eA(a,i,e,t,!0)),!o&&r&&(o=X_(a,e,t)),o},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];0===n?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},t}(P_),nA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,i=t.endArrow,a=n.length,o=n[0][0],s=n[0][1],l=n[a-1][0],c=n[a-1][1];r&&b_(this,e,n[1][0],n[1][1],o,s),i&&C_(this,e,n[a-2][0],n[a-2][1],l,c)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!(!n||!i)&&eA(this.attr().points,i,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,i=t.endArrow,a=n.length;if(!(n.length<2)){var o,s=n[0][0],l=n[0][1],c=n[a-1][0],u=n[a-1][1];if(r&&r.d)s+=(o=E_(s,l,n[1][0],n[1][1],r.d)).dx,l+=o.dy;if(i&&i.d)c-=(o=E_(n[a-2][0],n[a-2][1],c,u,i.d)).dx,u-=o.dy;e.beginPath(),e.moveTo(s,l);for(var h=0;h<a-1;h++){var p=n[h];e.lineTo(p[0],p[1])}e.lineTo(c,u)}},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return Uh(t)?(this.set("totalLength",av(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),Xh(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),Gg.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,a=[];Xh(e,(function(o,s){e[s+1]&&((n=[])[0]=i/t,r=Gg.length(o[0],o[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,a.push(n))})),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(P_);var rA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=a.x,s=a.y,l=a.width,c=a.height,u=a.radius;if(u){var h=!1;return n&&(h=function(e,t,n,r,i,a,o,s){return j_(e+i,t,e+n-i,t,a,o,s)||j_(e+n,t+i,e+n,t+r-i,a,o,s)||j_(e+n-i,t+r,e+i,t+r,a,o,s)||j_(e,t+r-i,e,t+i,a,o,s)||q_(e+n-i,t+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||q_(e+n-i,t+r-i,i,0,.5*Math.PI,a,o,s)||q_(e+i,t+r-i,i,.5*Math.PI,Math.PI,a,o,s)||q_(e+i,t+i,i,Math.PI,1.5*Math.PI,a,o,s)}(o,s,l,c,u,i,e,t)),!h&&r&&(h=U_(this,e,t)),h}var p=i/2;return r&&n?t_(o-p,s-p,l+p,c+p,e,t):r?t_(o,s,l,c,e,t):n?function(e,t,n,r,i,a,o){var s=i/2;return t_(e-s,t-s,n,i,a,o)||t_(e+n-s,t-s,i,r,a,o)||t_(e+s,t+r-s,n,i,a,o)||t_(e-s,t+s,i,r,a,o)}(o,s,l,c,i,e,t):void 0},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.width,a=t.height,o=t.radius;if(e.beginPath(),0===o)e.rect(n,r,i,a);else{var s=function(e){var t=0,n=0,r=0,i=0;return Vh(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,[t,n,r,i]}(o),l=s[0],c=s[1],u=s[2],h=s[3];e.moveTo(n+l,r),e.lineTo(n+i-c,r),0!==c&&e.arc(n+i-c,r+c,c,-Math.PI/2,0),e.lineTo(n+i,r+a-u),0!==u&&e.arc(n+i-u,r+a-u,u,0,Math.PI/2),e.lineTo(n+h,r+a),0!==h&&e.arc(n+h,r+a-h,h,Math.PI/2,Math.PI),e.lineTo(n,r+l),0!==l&&e.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),e.closePath()}},t}(P_),iA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=hv(e)},t.prototype._setText=function(e){var t=null;lp(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,n=1*e.fontSize;return t?t-n:.14*n},t.prototype._drawTextArr=function(e,t,n){var r,i=this.attrs,a=i.textBaseline,o=i.x,s=i.y,l=1*i.fontSize,c=this._getSpaceingY(),u=uv(i.text,i.fontSize,i.lineHeight);Xh(t,(function(t,i){r=s+i*(c+l)-u+l,"middle"===a&&(r+=u-l-(u-l)/2),"top"===a&&(r+=u-l),Uh(t)||(n?e.fillText(t,o,r):e.strokeText(t,o,r))}))},t.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,i=n.y,a=this.get("textArr");if(a)this._drawTextArr(e,a,t);else{var o=n.text;Uh(o)||(t?e.fillText(o,r,i):e.strokeText(o,r,i))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,a=t.fillOpacity;this.isStroke()&&n>0&&(Uh(i)||1===i||(e.globalAlpha=r),this.stroke(e)),this.isFill()&&(Uh(a)||1===a?this.fill(e):(e.globalAlpha=a,this.fill(e),e.globalAlpha=r)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(P_);function aA(e,t,n){var r,i,a=e.getTotalMatrix();if(a){var o=(r=[t,n,1],(i=a)?lm(cm(i),r):r);return[o[0],o[1]]}return[t,n]}function oA(e,t,n){if(e.isCanvas&&e.isCanvas())return!0;if(!_f(e)||!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var r=aA(e,t,n),i=r[0],a=r[1];if(e.isClipped(i,a))return!1}var o=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=o.minX&&t<=o.maxX&&n>=o.minY&&n<=o.maxY}function sA(e,t,n){if(!oA(e,t,n))return null;for(var r=null,i=e.getChildren(),a=i.length-1;a>=0;a--){var o=i[a];if(o.isGroup())r=sA(o,t,n);else if(oA(o,t,n)){var s=o,l=aA(o,t,n),c=l[0],u=l[1];s.isInShape(c,u)&&(r=o)}if(r)break}return r}var lA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return Fn},t.prototype.getGroupBase=function(){return L_},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},t.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get("context"),i=this.get("el"),a=this.getPixelRatio();i.width=a*t,i.height=a*n,a>1&&r.scale(a,a)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(t,n){return this.get("quickHit")?sA(this,t,n):e.prototype.getShape.call(this,t,n,null)},t.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),n=this.getViewRange();t.length&&t[0]===this?e=n:(e=function(e){if(!e.length)return null;var t=[],n=[],r=[],i=[];return Xh(e,(function(e){var a=F_(e);a&&(t.push(a.minX),n.push(a.minY),r.push(a.maxX),i.push(a.maxY))})),{minX:rp(t),minY:rp(n),maxX:np(r),maxY:np(i)}}(t))&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView")&&(e=function(e,t){return e&&t&&n_(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}(e,n)));return e},t.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},t.prototype._clearFrame=function(){var e,t=this.get("drawFrame");t&&(e=t,(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),n=this.getChildren();e.clearRect(0,0,t.width,t.height),w_(e,this),S_(e,n),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),w_(e,this),k_(this,n,r),S_(e,n,r),e.restore()):t.length&&A_(t),Xh(t,(function(e){e.get("hasChanged")&&e.set("hasChanged",!1)})),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e,t=this,n=this.get("drawFrame");n||(e=function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)},n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e),this.set("drawFrame",n))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(Ag),cA=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:Fn,version:"0.5.12",Canvas:lA,Group:L_,getArcParams:d_,Event:Tf,Base:Af,AbstractCanvas:Ag,AbstractGroup:Og,AbstractShape:Ig,getBBoxMethod:Fg,getTextHeight:uv,assembleFont:hv,isAllowCapture:_f,multiplyVec2:lm,invert:cm,getOffScreenContext:cv,PathUtil:Cf}),uA={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},hA={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function pA(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function dA(e){var t=uA[e.type],n=e.getParent();if(!t)throw new Error("the type "+e.type+" is not supported by svg");var r=pA(t);if(e.get("id")&&(r.id=e.get("id")),e.set("el",r),e.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function fA(e,t){var n,r=e.get("el"),i=(n=r.children,zh(n)?Array.prototype.slice.call(n):[]).sort(t),a=document.createDocumentFragment();i.forEach((function(e){a.appendChild(e)})),r.appendChild(a)}function mA(e){var t=e.attr().matrix;if(t){for(var n=e.cfg.el,r=[],i=0;i<9;i+=3)r.push(t[i]+","+t[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",t)}}function gA(e,t){var n=e.getClip(),r=e.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){dA(n),n.createPath(t);var i=t.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function vA(e,t){t.forEach((function(t){t.draw(e)}))}function yA(e,t){var n=e.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=e.getParent(),a=i?i.getChildren():[n],o=e.get("el");if("remove"===t)if(e.get("isClipShape")){var s=o&&o.parentNode,l=s&&s.parentNode;s&&l&&l.removeChild(s)}else o&&o.parentNode&&o.parentNode.removeChild(o);else if("show"===t)o.setAttribute("visibility","visible");else if("hide"===t)o.setAttribute("visibility","hidden");else if("zIndex"===t)!function(e,t){var n=e.parentNode,r=Array.from(n.childNodes).filter((function(e){return 1===e.nodeType&&"defs"!==e.nodeName.toLowerCase()})),i=r[t],a=r.indexOf(e);if(i){if(a>t)n.insertBefore(e,i);else if(a<t){var o=r[t+1];o?n.insertBefore(e,o):n.appendChild(e)}}else n.appendChild(e)}(o,a.indexOf(e));else if("sort"===t){var c=e.get("children");c&&c.length&&fA(e,(function(e,t){return c.indexOf(e)-c.indexOf(t)?1:0}))}else"clear"===t?o&&(o.innerHTML=""):"matrix"===t?mA(e):"clip"===t?gA(e,r):"attr"===t||"add"===t&&e.draw(r)}}var xA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=pA("g");this.set("el",e);var t=this.getParent();if(t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(e)}return e},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,t)}},t.prototype.onCanvasChange=function(e){yA(this,e)},t.prototype.getShapeBase=function(){return Ln},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var t=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),gA(this,e),this.createPath(e),t.length&&vA(e,t))},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Xh(t||n,(function(e,t){hA[t]&&r.setAttribute(hA[t],e)})),mA(this)},t}(Og),EA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,t)}},t.prototype.getShapeBase=function(){return Ln},t.prototype.getGroupBase=function(){return xA},t.prototype.onCanvasChange=function(e){yA(this,e)},t.prototype.calculateBBox=function(){var e=this.get("el"),t=null;if(e)t=e.getBBox();else{var n=Fg(this.get("type"));n&&(t=n(this))}if(t){var r=t.x,i=t.y,a=t.width,o=t.height,s=this.getHitLineWidth(),l=s/2,c=r-l,u=i-l;return{x:c,y:u,minX:c,minY:u,maxX:r+a+l,maxY:i+o+l,width:a+s,height:o+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),t=e.fill,n=e.fillStyle;return(t||n||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),t=e.stroke,n=e.strokeStyle;return(t||n)&&this.canStroke},t.prototype.draw=function(e,t){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||dA(this),gA(this,e),this.createPath(e,t),this.shadow(e,t),this.strokeAndFill(e,t),this.transform(t))},t.prototype.createPath=function(e,t){},t.prototype.strokeAndFill=function(e,t){var n=t||this.attr(),r=n.fill,i=n.fillStyle,a=n.stroke,o=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,c=n.lineWidth,u=this.get("el");this.canFill&&(t?"fill"in n?this._setColor(e,"fill",r):"fillStyle"in n&&this._setColor(e,"fill",i):this._setColor(e,"fill",r||i),s&&u.setAttribute(hA.fillOpacity,s)),this.canStroke&&c>0&&(t?"stroke"in n?this._setColor(e,"stroke",a):"strokeStyle"in n&&this._setColor(e,"stroke",o):this._setColor(e,"stroke",a||o),l&&u.setAttribute(hA.strokeOpacity,l),c&&u.setAttribute(hA.lineWidth,c))},t.prototype._setColor=function(e,t,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=e.find("gradient",n))||(i=e.addGradient(n)),r.setAttribute(hA[t],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=e.find("pattern",n))||(i=e.addPattern(n)),r.setAttribute(hA[t],"url(#"+i+")")}else r.setAttribute(hA[t],n);else r.setAttribute(hA[t],"none")},t.prototype.shadow=function(e,t){var n=this.attr(),r=t||n,i=r.shadowOffsetX,a=r.shadowOffsetY,o=r.shadowBlur,s=r.shadowColor;(i||a||o||s)&&function(e,t){var n=e.cfg.el,r=e.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var a=t.find("filter",i);a||(a=t.addShadow(i)),n.setAttribute("filter","url(#"+a+")")}else n.removeAttribute("filter")}(this,e)},t.prototype.transform=function(e){var t=this.attr();(e||t).matrix&&mA(this)},t.prototype.isInShape=function(e,t){return this.isPointInPath(e,t)},t.prototype.isPointInPath=function(e,t){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=e+r.left,a=t+r.top,o=document.elementFromPoint(i,a);return!(!o||!o.isEqualNode(n))},t.prototype.getHitLineWidth=function(){var e=this.attrs,t=e.lineWidth,n=e.lineAppendWidth;return this.isStroke()?t+n:0},t}(Ig),bA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x:0,y:0,r:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Xh(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):hA[t]&&r.setAttribute(hA[t],e)}))},t}(EA),CA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return Lh(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");if(Xh(t||n,(function(e,t){hA[t]&&r.setAttribute(hA[t],e)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var a=r.childNodes,o=a.length-1;o>=0;o--)r.removeChild(a[o]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},t}(EA),TA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Xh(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):hA[t]&&r.setAttribute(hA[t],e)}))},t}(EA),wA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");Xh(t||r,(function(e,t){"img"===t?n._setImage(r.img):hA[t]&&i.setAttribute(hA[t],e)}))},t.prototype.setAttr=function(e,t){this.attrs[e]=t,"img"===e&&this._setImage(t)},t.prototype._setImage=function(e){var t=this.attr(),n=this.get("el");if(lp(e))n.setAttribute("href",e);else if(e instanceof window.Image)t.width||(n.setAttribute("width",e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",e.height),this.attr("height",e.height)),n.setAttribute("href",e.src);else if(e instanceof HTMLElement&&lp(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())n.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+e.width),r.setAttribute("height",""+e.height),r.getContext("2d").putImageData(e,0,0),t.width||(n.setAttribute("width",""+e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",""+e.height),this.attr("height",e.height)),n.setAttribute("href",r.toDataURL())}},t}(EA),SA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Xh(t||n,(function(t,i){if("startArrow"===i||"endArrow"===i)if(t){var a=Wh(t)?e.addArrow(n,hA[i]):e.getDefaultArrow(n,hA[i]);r.setAttribute(hA[i],"url(#"+a+")")}else r.removeAttribute(hA[i]);else hA[i]&&r.setAttribute(hA[i],t)}))},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Gg.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2;return Gg.pointAt(n,r,i,a,e)},t}(EA),kA={circle:function(e,t,n){return[["M",e,t],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["z"]]},triangleDown:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},_A={get:function(e){return kA[e]},register:function(e,t){kA[e]=t},remove:function(e){delete kA[e]},getAll:function(){return kA}},AA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return Lh(t,e),t.prototype.createPath=function(e){this.get("el").setAttribute("d",this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return Vh(e)?e.map((function(e){return e.join(" ")})).join(""):e},t.prototype._getPath=function(){var e,t=this.attr(),n=t.x,r=t.y,i=t.r||t.radius,a=t.symbol||"circle";return(e=Yh(a)?a:_A.get(a))?e(n,r,i):(console.warn(e+" symbol is not exist."),null)},t.symbolsFactory=_A,t}(EA),OA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");Xh(t||r,(function(t,a){if("path"===a&&Vh(t))i.setAttribute("d",n._formatPath(t));else if("startArrow"===a||"endArrow"===a)if(t){var o=Wh(t)?e.addArrow(r,hA[a]):e.getDefaultArrow(r,hA[a]);i.setAttribute(hA[a],"url(#"+o+")")}else i.removeAttribute(hA[a]);else hA[a]&&i.setAttribute(hA[a],t)}))},t.prototype._formatPath=function(e){var t=e.map((function(e){return e.join(" ")})).join("");return~t.indexOf("NaN")?"":t},t.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var t=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=t?t.getPointAtLength(e*n):null;return r?{x:r.x,y:r.y}:null},t}(EA),IA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return Lh(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Xh(t||n,(function(e,t){"points"===t&&Vh(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):hA[t]&&r.setAttribute(hA[t],e)}))},t}(EA),MA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Xh(t||n,(function(e,t){"points"===t&&Vh(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):hA[t]&&r.setAttribute(hA[t],e)}))},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return Uh(t)?(this.set("totalLength",av(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),Xh(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),Gg.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,a=[];Xh(e,(function(o,s){e[s+1]&&((n=[])[0]=i/t,r=Gg.length(o[0],o[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,a.push(n))})),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(EA);var NA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el"),a=!1,o=["x","y","width","height","radius"];Xh(t||r,(function(e,t){-1===o.indexOf(t)||a?-1===o.indexOf(t)&&hA[t]&&i.setAttribute(hA[t],e):(i.setAttribute("d",n._assembleRect(r)),a=!0)}))},t.prototype._assembleRect=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=e.radius;if(!a)return"M "+t+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var o=function(e){var t=0,n=0,r=0,i=0;return Vh(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}(a);return Vh(a)?1===a.length?o.r1=o.r2=o.r3=o.r4=a[0]:2===a.length?(o.r1=o.r3=a[0],o.r2=o.r4=a[1]):3===a.length?(o.r1=a[0],o.r2=o.r4=a[1],o.r3=a[2]):(o.r1=a[0],o.r2=a[1],o.r3=a[2],o.r4=a[3]):o.r1=o.r2=o.r3=o.r4=a,[["M "+(t+o.r1)+","+n],["l "+(r-o.r1-o.r2)+",0"],["a "+o.r2+","+o.r2+",0,0,1,"+o.r2+","+o.r2],["l 0,"+(i-o.r2-o.r3)],["a "+o.r3+","+o.r3+",0,0,1,"+-o.r3+","+o.r3],["l "+(o.r3+o.r4-r)+",0"],["a "+o.r4+","+o.r4+",0,0,1,"+-o.r4+","+-o.r4],["l 0,"+(o.r4+o.r1-i)],["a "+o.r1+","+o.r1+",0,0,1,"+o.r1+","+-o.r1],["z"]].join(" ")},t}(EA),FA={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},LA={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},PA={left:"left",start:"left",center:"middle",right:"end",end:"end"},RA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return Lh(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ph(Ph({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");this._setFont(),Xh(t||r,(function(e,t){"text"===t?n._setText(""+e):"matrix"===t&&e?mA(n):hA[t]&&i.setAttribute(hA[t],e)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},t.prototype._setFont=function(){var e=this.get("el"),t=this.attr(),n=t.textBaseline,r=t.textAlign,i=Bf();i&&"firefox"===i.name?e.setAttribute("dominant-baseline",LA[n]||"alphabetic"):e.setAttribute("alignment-baseline",FA[n]||"baseline"),e.setAttribute("text-anchor",PA[r]||"left")},t.prototype._setText=function(e){var t=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,a=void 0===i?"bottom":i;if(e)if(~e.indexOf("\n")){var o=e.split("\n"),s=o.length-1,l="";Xh(o,(function(e,t){0===t?"alphabetic"===a?l+='<tspan x="'+r+'" dy="'+-s+'em">'+e+"</tspan>":"top"===a?l+='<tspan x="'+r+'" dy="0.9em">'+e+"</tspan>":"middle"===a?l+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+e+"</tspan>":"bottom"===a?l+='<tspan x="'+r+'" dy="-'+(s+.3)+'em">'+e+"</tspan>":"hanging"===a&&(l+='<tspan x="'+r+'" dy="'+(-(s-1)-.3)+'em">'+e+"</tspan>"):l+='<tspan x="'+r+'" dy="1em">'+e+"</tspan>"})),t.innerHTML=l}else t.innerHTML=e;else t.innerHTML=""},t}(EA),DA=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,BA=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,zA=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function HA(e){var t=e.match(zA);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),Xh(t,(function(e){e=e.split(":"),n+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'})),n}var jA=function(){function e(e){this.cfg={};var t,n,r,i,a,o,s,l=null,c=ad("gradient_");return"l"===e.toLowerCase()[0]?function(e,t){var n,r,i=DA.exec(e),a=Tp(Sp(parseFloat(i[1])),2*Math.PI),o=i[2];a>=0&&a<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=a&&a<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=a&&a<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(a),l=s*s,c=(r.x-n.x+s*(r.y-n.y))/(l+1)+n.x,u=s*(r.x-n.x+s*(r.y-n.y))/(l+1)+n.y;t.setAttribute("x1",n.x),t.setAttribute("y1",n.y),t.setAttribute("x2",c),t.setAttribute("y2",u),t.innerHTML=HA(o)}(e,l=pA("linearGradient")):(l=pA("radialGradient"),t=e,n=l,r=BA.exec(t),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4],n.setAttribute("cx",i),n.setAttribute("cy",a),n.setAttribute("r",o),n.innerHTML=HA(s)),l.setAttribute("id",c),this.el=l,this.id=c,this.cfg=e,this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),GA={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},$A={x:"-40%",y:"-40%",width:"200%",height:"200%"},YA=function(){function e(e){this.type="filter",this.cfg={},this.type="filter";var t=pA("filter");return Xh($A,(function(e,n){t.setAttribute(n,e)})),this.el=t,this.id=ad("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return e.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,r=this.cfg;return Xh(Object.keys(r),(function(e){if(r[e]!==t[e])return n=!1,!1})),n},e.prototype.update=function(e,t){var n=this.cfg;return n[GA[e]]=t,this._parseShadow(n,this.el),this},e.prototype._parseShadow=function(e,t){var n='<feDropShadow\n      dx="'+(e.dx||0)+'"\n      dy="'+(e.dy||0)+'"\n      stdDeviation="'+(e.blur?e.blur/10:0)+'"\n      flood-color="'+(e.color?e.color:"#000")+'"\n      flood-opacity="'+(e.opacity?e.opacity:1)+'"\n      />';t.innerHTML=n},e}(),UA=function(){function e(e,t){this.cfg={};var n=pA("marker"),r=ad("marker_");n.setAttribute("id",r);var i=pA("path");i.setAttribute("stroke",e.stroke||"none"),i.setAttribute("fill",e.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var a=e["marker-start"===t?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",!0===a?this._setDefaultPath(t,i):(this.cfg=a,this._setMarker(e.lineWidth,i)),this}return e.prototype.match=function(){return!1},e.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},e.prototype._setMarker=function(e,t){var n=this.el,r=this.cfg.path,i=this.cfg.d;Vh(r)&&(r=r.map((function(e){return e.join(" ")})).join("")),t.setAttribute("d",r),n.appendChild(t),i&&n.setAttribute("refX",""+i/e)},e.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},e}(),VA=function(){function e(e){this.type="clip",this.cfg={};var t=pA("clipPath");this.el=t,this.id=ad("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return e.prototype.match=function(){return!1},e.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},e}(),WA=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,XA=function(){function e(e){this.cfg={};var t=pA("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=pA("image");t.appendChild(n);var r=ad("pattern_");t.id=r,this.el=t,this.id=r,this.cfg=e;var i=WA.exec(e)[2];n.setAttribute("href",i);var a=new Image;function o(){t.setAttribute("width",""+a.width),t.setAttribute("height",""+a.height)}return i.match(/^data:/i)||(a.crossOrigin="Anonymous"),a.src=i,a.complete?o():(a.onload=o,a.src=a.src),this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),qA=function(){function e(e){var t=pA("defs"),n=ad("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return e.prototype.find=function(e,t){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(e,t)){r=n[i].id;break}return r},e.prototype.findById=function(e){for(var t=this.children,n=null,r=0;r<t.length;r++)if(t[r].id===e){n=t[r];break}return n},e.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},e.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new UA(e,t);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},e.prototype.addGradient=function(e){var t=new jA(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addArrow=function(e,t){var n=new UA(e,t);return this.el.appendChild(n.el),this.add(n),n.id},e.prototype.addShadow=function(e){var t=new YA(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addPattern=function(e){var t=new XA(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addClip=function(e){var t=new VA(e);return this.el.appendChild(t.el),this.add(t),t.id},e}(),KA=function(e){function t(t){return e.call(this,Ph(Ph({},t),{autoDraw:!0,renderer:"svg"}))||this}return Lh(t,e),t.prototype.getShapeBase=function(){return Ln},t.prototype.getGroupBase=function(){return xA},t.prototype.getShape=function(e,t,n){var r=n.target||n.srcElement;if(!uA[r.tagName]){for(var i=r.parentNode;i&&!uA[i.tagName];)i=i.parentNode;r=i}return this.find((function(e){return e.get("el")===r}))},t.prototype.createDom=function(){var e=pA("svg"),t=new qA(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",t),e},t.prototype.onCanvasChange=function(e){var t=this.get("context"),n=this.get("el");if("sort"===e){var r=this.get("children");r&&r.length&&fA(this,(function(e,t){return r.indexOf(e)-r.indexOf(t)?1:0}))}else if("clear"===e){if(n){n.innerHTML="";var i=t.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===e?mA(this):"clip"===e?gA(this,t):"changeSize"===e&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},t.prototype.draw=function(){var e=this.get("context"),t=this.getChildren();gA(this,e),t.length&&vA(e,t)},t}(Ag),QA=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:Ln,version:"0.5.6",Canvas:KA,Group:xA,Event:Tf,Base:Af,AbstractCanvas:Ag,AbstractGroup:Og,AbstractShape:Ig,getBBoxMethod:Fg,getTextHeight:uv,assembleFont:hv,isAllowCapture:_f,multiplyVec2:lm,invert:cm,getOffScreenContext:cv,PathUtil:Cf}),ZA=function(e){function t(t){var n=e.call(this,t)||this;n.type="path",n.shapeType="line";var r=t.connectNulls,i=void 0!==r&&r,a=t.showSinglePoint,o=void 0===a||a;return n.connectNulls=i,n.showSinglePoint=o,n}return Lh(t,e),t.prototype.updateElements=function(e,t){void 0===t&&(t=!1);for(var n=new Map,r=new Map,i=[],a=0,o=0;o<e.length;o++){var s=e[o],l=this.getElementId(s);i.push(l),n.set(l,s),r.set(l,a),a++}this.elements=new Array(a);for(var c=uk(this.lastElementsMap,i),u=c.added,h=c.updated,p=c.removed,d=0,f=u;d<f.length;d++){l=f[d],s=n.get(l);var m=this.getShapeFactory(),g=this.getShapeInfo(s);o=r.get(l);(x=new QS({shapeFactory:m,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:o})).geometry=this,x.animate=this.animateOption,x.draw(g,t),this.elementsMap[l]=x,this.elements[o]=x}for(var v=0,y=h;v<y.length;v++){l=y[v],s=n.get(l);var x=this.lastElementsMap[l],E=(o=r.get(l),g=this.getShapeInfo(s),x.getModel());(this.isCoordinateChanged||lk(E,g))&&(x.animate=this.animateOption,x.update(g)),this.elementsMap[l]=x,this.elements[o]=x}for(var b=0,C=p;b<C.length;b++){l=C[b];(x=this.lastElementsMap[l]).animate=this.animateOption,x.destroy()}},t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push({x:a.x,y:a.y}),n.push(a._origin)}return{points:t,data:n}},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=this.getPointsAndData(e),r=n.points,i=n.data;return t.mappingData=e,t.data=i,t.isStack=!!this.getAdjust("stack"),t.points=r,t.connectNulls=this.connectNulls,t.showSinglePoint=this.showSinglePoint,t},t}(hk);function JA(e,t,n,r,i){var a=[];if(e.length){for(var o=[],s=[],l=0,c=e.length;l<c;l++){var u=e[l];o.push(u[1]),s.push(u[0])}s=s.reverse(),Xh([o,s],(function(e,l){var c=[],u=r.parsePoints(e),h=u[0];1===o.length&&1===s.length?c=0===l?[["M",h.x-.5,h.y],["L",h.x+.5,h.y]]:[["L",h.x+.5,h.y],["L",h.x-.5,h.y]]:(t&&u.push({x:h.x,y:h.y}),c=n?Cw(u,!1,i):bw(u,!1),l>0&&(c[0][0]="L")),a=a.concat(c)})),a.push(["Z"])}return a}function eO(e,t,n,r,i){for(var a=Lk(e,t,!t,"lineWidth"),o=e.connectNulls,s=e.isInCircle,l=Mk(e.points,o,e.showSinglePoint),c=[],u=0,h=l.length;u<h;u++){var p=l[u];c=c.concat(JA(p,s,n,r,i))}return a.path=c,a}function tO(e){var t=e.start,n=e.end;return[[t.x,n.y],[n.x,t.y]]}ak("area",{defaultShapeType:"area",getDefaultPoints:function(e){var t=e.x,n=e.y0;return(Vh(e.y)?e.y:[n,e.y]).map((function(e){return{x:t,y:e}}))}}),ok("area","area",{draw:function(e,t){var n=eO(e,!1,!1,this);return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,fill:e.color}}}});var nO=function(e){function t(t){var n=e.call(this,t)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var r=t.startOnZero,i=void 0===r||r,a=t.sortable,o=void 0!==a&&a,s=t.showSinglePoint,l=void 0!==s&&s;return n.startOnZero=i,n.sortable=o,n.showSinglePoint=l,n}return Lh(t,e),t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push(a.points),n.push(a._origin)}return{points:t,data:n}},t.prototype.getYMinValue=function(){return this.startOnZero?e.prototype.getYMinValue.call(this):this.getYScale().min},t}(ZA);ak("edge",{defaultShapeType:"line",getDefaultPoints:function(e){return Rk(e)}}),ok("edge","line",{draw:function(e,t){var n=Lk(e,!0,!1,"lineWidth"),r=bw(this.parsePoints(e.points),this.coordinate.isPolar);return t.addShape("path",{attrs:Ph(Ph({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});var rO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return Lh(t,e),t}(hk),iO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return Lh(t,e),t.prototype.updateElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=this.prepareRange(r),a=this.prepareSize(),o=Zp(this.styleOption,["cfg","shadowBlur"]);Ep(o)||(o=a/2),this.prepareGreyScaleBlurredCircle(a,o),this.drawWithRange(r,i,a,o)}},t.prototype.color=function(e,t){return this.createAttrOption("color",e,"function"!=typeof t?t:""),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},t.prototype.prepareRange=function(e){var t=this.getAttribute("color").getFields()[0],n=1/0,r=-1/0;return e.forEach((function(e){var i=e._origin[t];i>r&&(r=i),i<n&&(n=i)})),n===r&&(n=r-1),[n,r]},t.prototype.prepareSize=function(){var e=this.getDefaultValue("size");return Ep(e)||(e=this.getDefaultSize()),e},t.prototype.prepareGreyScaleBlurredCircle=function(e,t){var n=this.getGrayScaleBlurredCanvas(),r=e+t,i=n.getContext("2d");n.width=n.height=2*r,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=t,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,e,0,2*Math.PI,!0),i.closePath(),i.fill()},t.prototype.drawWithRange=function(e,t,n,r){var i=this.coordinate,a=i.start,o=i.end,s=this.coordinate.getWidth(),l=this.coordinate.getHeight(),c=this.getAttribute("color").getFields()[0];this.clearShadowCanvasCtx();var u=this.getShadowCanvasCtx();t&&(e=e.filter((function(e){return e._origin[c]<=t[1]&&e._origin[c]>=t[0]})));for(var h=this.scales[c],p=0,d=e;p<d.length;p++){var f=d[p],m=this.getDrawCfg(f),g=m.x,v=m.y,y=h.scale(f._origin[c]);this.drawGrayScaleBlurredCircle(g-a.x,v-o.y,n+r,y,u)}var x=u.getImageData(0,0,s,l);this.clearShadowCanvasCtx(),this.colorize(x),u.putImageData(x,0,0);var E=this.getImageShape();E.attr("x",a.x),E.attr("y",o.y),E.attr("width",s),E.attr("height",l),E.attr("img",u.canvas),E.set("origin",this.getShapeInfo(e))},t.prototype.getDefaultSize=function(){var e=this.getAttribute("position"),t=this.coordinate;return Math.min(t.getWidth()/(4*e.scales[0].ticks.length),t.getHeight()/(4*e.scales[1].ticks.length))},t.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},t.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement("canvas"),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext("2d")},t.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},t.prototype.drawGrayScaleBlurredCircle=function(e,t,n,r,i){var a=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(a,e-n,t-n)},t.prototype.colorize=function(e){for(var t=this.getAttribute("color"),n=e.data,r=this.paletteCache,i=3;i<n.length;i+=4){var a=n[i];if(Ep(a)){var o=r[a]?r[a]:cy.rgb2arr(t.gradient(a/256));n[i-3]=o[0],n[i-2]=o[1],n[i-1]=o[2],n[i]=a}}},t.prototype.getImageShape=function(){var e=this.imageShape;return e||(e=this.container.addShape({type:"image",attrs:{}}),this.imageShape=e,e)},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=e.map((function(e){return e._origin}));return Ph(Ph({},t),{mappingData:e,data:n})},t}(hk);function aO(e){var t,n,r,i,a=e.x,o=e.y,s=e.y0,l=e.size;Vh(o)?(t=o[0],n=o[1]):(t=s,n=o),Vh(a)?(r=a[0],i=a[1]):(r=a-l/2,i=a+l/2);var c=[{x:r,y:t},{x:r,y:n}];return c.push({x:i,y:n},{x:i,y:t}),c}function oO(e,t){void 0===t&&(t=!0);var n=[],r=e[0];n.push(["M",r.x,r.y]);for(var i=1,a=e.length;i<a;i++)n.push(["L",e[i].x,e[i].y]);return t&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}function sO(e,t){var n=0,r=0,i=0,a=0;return Vh(e)?1===e.length?n=r=i=a=e[0]:2===e.length?(n=i=e[0],r=a=e[1]):3===e.length?(n=e[0],r=a=e[1],i=e[2]):(n=e[0],r=e[1],i=e[2],a=e[3]):n=r=i=a=e,n+r>t&&(r=t-(n=n?t/(1+r/n):0)),i+a>t&&(a=t-(i=i?t/(1+a/i):0)),[n||0,r||0,i||0,a||0]}function lO(e,t,n){var r=[];if(n.isRect){var i=n.isTransposed?{x:n.start.x,y:t[0].y}:{x:t[0].x,y:n.start.y},a=n.isTransposed?{x:n.end.x,y:t[2].y}:{x:t[3].x,y:n.end.y},o=Zp(e,["background","style","radius"]);if(o){var s=n.isTransposed?Math.abs(t[0].y-t[2].y):t[2].x-t[1].x,l=n.isTransposed?n.getWidth():n.getHeight(),c=sO(o,Math.min(s,l)),u=c[0],h=c[1],p=c[2],d=c[3];r.push(["M",i.x,a.y+u]),0!==u&&r.push(["A",u,u,0,0,1,i.x+u,a.y]),r.push(["L",a.x-h,a.y]),0!==h&&r.push(["A",h,h,0,0,1,a.x,a.y+h]),r.push(["L",a.x,i.y-p]),0!==p&&r.push(["A",p,p,0,0,1,a.x-p,i.y]),r.push(["L",i.x+d,i.y]),0!==d&&r.push(["A",d,d,0,0,1,i.x,i.y-d])}else r.push(["M",i.x,i.y]),r.push(["L",a.x,i.y]),r.push(["L",a.x,a.y]),r.push(["L",i.x,a.y]),r.push(["L",i.x,i.y]);r.push(["z"])}if(n.isPolar){var f=n.getCenter(),m=zT(e,n),g=m.startAngle,v=m.endAngle;if("theta"===n.type||n.isTransposed){var y=function(e){return Math.pow(e,2)};u=Math.sqrt(y(f.x-t[0].x)+y(f.y-t[0].y)),h=Math.sqrt(y(f.x-t[2].x)+y(f.y-t[2].y));r=DT(f.x,f.y,u,n.startAngle,n.endAngle,h)}else r=DT(f.x,f.y,n.getRadius(),g,v)}return r}function cO(e,t,n){var r=[];return Uh(t)?n?r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",(e[2].x+e[3].x)/2,(e[2].y+e[3].y)/2],["Z"]):r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[3].x,e[3].y],["Z"]):r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",t[1].x,t[1].y],["L",t[0].x,t[0].y],["Z"]),r}function uO(e,t){return[t,e]}function hO(e){var t=e.theme,n=e.coordinate,r=e.getXScale(),i=r.values,a=e.beforeMappingData,o=i.length,s=UT(e.coordinate),l=e.intervalPadding,c=e.dodgePadding,u=e.maxColumnWidth||t.maxColumnWidth,h=e.minColumnWidth||t.minColumnWidth,p=e.columnWidthRatio||t.columnWidthRatio,d=e.multiplePieWidthRatio||t.multiplePieWidthRatio,f=e.roseWidthRatio||t.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var m=function(e,t){var n=e.length,r=e;lp(r[0])&&(r=e.map((function(e){return t.translate(e)})));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}(i,r);o=(r.max-r.min)/m,i.length>o&&(o=i.length)}var g=r.range,v=1/o,y=1;(n.isPolar?y=n.isTransposed&&o>1?d:f:(r.isLinear&&(v*=g[1]-g[0]),y=p),!Uh(l)&&l>=0)?v=(1-(o-1)*(l/s))/o:v*=y;if(e.getAdjust("dodge")){var x=function(e,t){if(t){var n=tp(e);return up(n,t).length}return e.length}(a,e.getAdjust("dodge").dodgeBy);if(!Uh(c)&&c>=0)v=(v-c/s*(x-1))/x;else!Uh(l)&&l>=0?(v*=y,v/=x):v/=x;v=v>=0?v:0}if(!Uh(u)&&u>=0){var E=u/s;v>E&&(v=E)}if(!Uh(h)&&h>=0){var b=h/s;v<b&&(v=b)}return v}ak("interval",{defaultShapeType:"rect",getDefaultPoints:function(e){return aO(e)}}),ok("interval","rect",{draw:function(e,t){var n,r=Lk(e,!1,!0),i=t,a=null==e?void 0:e.background;if(a){i=t.addGroup();var o=Pk(e),s=lO(e,this.parsePoints(e.points),this.coordinate);i.addShape("path",{attrs:Ph(Ph({},o),{path:s}),zIndex:-1,name:"element-background"})}n=r.radius&&this.coordinate.isRect?function(e,t,n){var r,i,a,o,s,l,c,u=Bh([],e,!0),h=u[0],p=u[1],d=u[2],f=u[3],m="number"==typeof n?Array(4).fill(n):n,g=m[0],v=m[1],y=m[2],x=m[3];t.isTransposed&&(p=(r=uO(p,f))[0],f=r[1],g=(i=[x,g,v,y])[0],v=i[1],y=i[2],x=i[3]),t.isReflect("y")&&(h=(a=uO(h,p))[0],p=a[1],d=(o=uO(d,f))[0],f=o[1]),t.isReflect("x")&&(h=(s=uO(h,f))[0],f=s[1],p=(l=uO(p,d))[0],d=l[1]);var E=[],b=function(e){return Math.abs(e)};return g=(c=sO([g,v,y,x],Math.min(b(f.x-h.x),b(p.y-h.y))).map((function(e){return b(e)})))[0],v=c[1],y=c[2],x=c[3],h.y<p.y?(E.push(["M",f.x,f.y+y]),0!==y&&E.push(["A",y,y,0,0,0,f.x-y,f.y]),E.push(["L",h.x+x,h.y]),0!==x&&E.push(["A",x,x,0,0,0,h.x,h.y+x]),E.push(["L",p.x,p.y-g]),0!==g&&E.push(["A",g,g,0,0,0,p.x+g,p.y]),E.push(["L",d.x-v,d.y]),0!==v&&E.push(["A",v,v,0,0,0,d.x,d.y-v]),E.push(["L",f.x,f.y+y]),E.push(["z"])):f.x<h.x?(E.push(["M",d.x+v,d.y]),0!==v&&E.push(["A",v,v,0,0,0,d.x,d.y+v]),E.push(["L",f.x,f.y-y]),0!==y&&E.push(["A",y,y,0,0,0,f.x+y,f.y]),E.push(["L",h.x-x,h.y]),0!==x&&E.push(["A",x,x,0,0,0,h.x,h.y-x]),E.push(["L",p.x,p.y+g]),0!==g&&E.push(["A",g,g,0,0,0,p.x-g,p.y]),E.push(["L",d.x+v,d.y]),E.push(["z"])):(E.push(["M",p.x,p.y+g]),0!==g&&E.push(["A",g,g,0,0,1,p.x+g,p.y]),E.push(["L",d.x-v,d.y]),0!==v&&E.push(["A",v,v,0,0,1,d.x,d.y+v]),E.push(["L",f.x,f.y-y]),0!==y&&E.push(["A",y,y,0,0,1,f.x-y,f.y]),E.push(["L",h.x+x,h.y]),0!==x&&E.push(["A",x,x,0,0,1,h.x,h.y-x]),E.push(["L",p.x,p.y+g]),E.push(["z"])),E}(this.parsePoints(e.points),this.coordinate,r.radius):this.parsePath(function(e,t,n){var r=n.getWidth(),i=n.getHeight(),a="rect"===n.type,o=[],s=(e[2].x-e[1].x)/2,l=n.isTransposed?s*i/r:s*r/i;return"round"===t?(a?(o.push(["M",e[0].x,e[0].y+l]),o.push(["L",e[1].x,e[1].y-l]),o.push(["A",s,s,0,0,1,e[2].x,e[2].y-l]),o.push(["L",e[3].x,e[3].y+l]),o.push(["A",s,s,0,0,1,e[0].x,e[0].y+l])):(o.push(["M",e[0].x,e[0].y]),o.push(["L",e[1].x,e[1].y]),o.push(["A",s,s,0,0,1,e[2].x,e[2].y]),o.push(["L",e[3].x,e[3].y]),o.push(["A",s,s,0,0,1,e[0].x,e[0].y])),o.push(["z"])):o=oO(e),o}(e.points,r.lineCap,this.coordinate));var l=i.addShape("path",{attrs:Ph(Ph({},r),{path:n}),name:"interval"});return a?i:l},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});var pO=function(e){function t(t){var n=e.call(this,t)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var r=t.background;return n.background=r,n}return Lh(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=UT(this.coordinate)):(this.defaultSize||(this.defaultSize=hO(this)),n=this.defaultSize);return r.size=n,r},t.prototype.adjustScale=function(){e.prototype.adjustScale.call(this);var t,n,r=this.getYScale();if("theta"===this.coordinate.type)r.change({nice:!1,min:0,max:(t=r,n=t.values.filter((function(e){return!Uh(e)&&!isNaN(e)})),Math.max.apply(Math,Bh(Bh([],n,!1),[Uh(t.max)?-1/0:t.max],!1)))});else{var i=this.scaleDefs,a=r.field,o=r.min,s=r.max;"time"!==r.type&&(o>0&&!Zp(i,[a,"min"])&&r.change({min:0}),s<=0&&!Zp(i,[a,"max"])&&r.change({max:0}))}},t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return n.background=this.background,n},t}(hk),dO=function(e){function t(t){var n=e.call(this,t)||this;n.type="line";var r=t.sortable,i=void 0!==r&&r;return n.sortable=i,n}return Lh(t,e),t}(ZA),fO=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"];function mO(e,t,n,r,i){var a=Lk(t,i,!i,"r"),o=e.parsePoints(t.points),s=o[0];if(t.isStack)s=o[1];else if(o.length>1){for(var l=n.addGroup(),c=0,u=o;c<u.length;c++){var h=u[c];l.addShape({type:"marker",attrs:Ph(Ph(Ph({},a),{symbol:Tk[r]||r}),h)})}return l}return n.addShape({type:"marker",attrs:Ph(Ph(Ph({},a),{symbol:Tk[r]||r}),s)})}ak("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(e){return Rk(e)}}),Xh(fO,(function(e){ok("point","hollow-".concat(e),{draw:function(t,n){return mO(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:Tk[e]||e,style:{r:4.5,stroke:n,fill:null}}}})}));var gO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return Lh(t,e),t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return Ph(Ph({},n),{isStack:!!this.getAdjust("stack")})},t}(hk);ak("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(e){var t=[];return Xh(e.x,(function(n,r){var i=e.y[r];t.push({x:n,y:i})})),t}}),ok("polygon","polygon",{draw:function(e,t){if(!Wp(e.points)){var n=Lk(e,!0,!0),r=this.parsePath(function(e){for(var t=e[0],n=1,r=[["M",t.x,t.y]];n<e.length;){var i=e[n];i.x===e[n-1].x&&i.y===e[n-1].y||(r.push(["L",i.x,i.y]),i.x===t.x&&i.y===t.y&&n<e.length-1&&(t=e[n+1],r.push(["Z"]),r.push(["M",t.x,t.y]),n++)),n++}return qp(pp(r),t)||r.push(["L",t.x,t.y]),r.push(["Z"]),r}(e.points));return t.addShape("path",{attrs:Ph(Ph({},n),{path:r}),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}});var vO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return Lh(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=r.x,a=r.y;if(!Vh(i)||!Vh(a)){var o=this.getXScale(),s=this.getYScale(),l=.5/o.values.length,c=.5/s.values.length;o.isCategory&&s.isCategory?(i=[i-l,i-l,i+l,i+l],a=[a-c,a+c,a+c,a-c]):Vh(i)?(i=[(n=i)[0],n[0],n[1],n[1]],a=[a-c/2,a+c/2,a+c/2,a-c/2]):Vh(a)&&(a=[(n=a)[0],n[1],n[1],n[0]],i=[i-l/2,i-l/2,i+l/2,i+l/2]),r.x=i,r.y=a}return r},t}(hk);ak("schema",{defaultShapeType:""});var yO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return Lh(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=UT(this.coordinate)):(this.defaultSize||(this.defaultSize=hO(this)),n=this.defaultSize);return r.size=n,r},t}(hk);ak("violin",{defaultShapeType:"violin",getDefaultPoints:function(e){var t=e.size/2,n=[],r=function(e){if(!Vh(e))return[];var t=np(e);return Kp(e,(function(e){return e/t}))}(e._size);return Xh(e.y,(function(i,a){var o=r[a]*t,s=0===a,l=a===e.y.length-1;n.push({isMin:s,isMax:l,x:e.x-o,y:i}),n.unshift({isMin:s,isMax:l,x:e.x+o,y:i})})),n}}),ok("violin","violin",{draw:function(e,t){var n=Lk(e,!0,!0),r=this.parsePath(Nk(e.points));return t.addShape("path",{attrs:Ph(Ph({},n),{path:r}),name:"violin"})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:e.color}}}});var xO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return Lh(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=UT(this.coordinate)):(this.defaultSize||(this.defaultSize=hO(this)),n=this.defaultSize);return r.size=n,r._size=Zp(t._origin,[this._sizeField]),r},t.prototype.initAttributes=function(){var t=this.attributeOption,n=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete t.size,e.prototype.initAttributes.call(this)},t}(hk);function EO(e,t){return["C",1*e.x/2+1*t.x/2,e.y,1*e.x/2+1*t.x/2,t.y,t.x,t.y]}function bO(e,t){var n=[];n.push({x:t.x,y:t.y}),n.push(e);var r=["Q"];return Xh(n,(function(e){r.push(e.x,e.y)})),r}ok("area","line",{draw:function(e,t){var n=eO(e,!0,!1,this);return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,stroke:e.color,fill:null}}}}),ok("area","smooth",{draw:function(e,t){var n=eO(e,!1,!0,this,tO(this.coordinate));return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,fill:e.color}}}}),ok("area","smooth-line",{draw:function(e,t){var n=eO(e,!0,!0,this,tO(this.coordinate));return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,stroke:e.color,fill:null}}}}),ok("edge","arc",{draw:function(e,t){var n,r=Lk(e,!0,!1,"lineWidth"),i=e.points,a=i.length>2?"weight":"normal";if(e.isInCircle){var o={x:0,y:1};return"normal"===a?n=function(e,t,n){var r=bO(t,n),i=[["M",e.x,e.y]];return i.push(r),i}(i[0],i[1],o):(r.fill=r.stroke,n=function(e,t){var n=bO(e[1],t),r=bO(e[3],t),i=[["M",e[0].x,e[0].y]];return i.push(r),i.push(["L",e[3].x,e[3].y]),i.push(["L",e[2].x,e[2].y]),i.push(n),i.push(["L",e[1].x,e[1].y]),i.push(["L",e[0].x,e[0].y]),i.push(["Z"]),i}(i,o)),n=this.parsePath(n),t.addShape("path",{attrs:Ph(Ph({},r),{path:n})})}if("normal"===a)return n=BT(((i=this.parsePoints(i))[1].x+i[0].x)/2,i[0].y,Math.abs(i[1].x-i[0].x)/2,Math.PI,2*Math.PI),t.addShape("path",{attrs:Ph(Ph({},r),{path:n})});var s=EO(i[1],i[3]),l=EO(i[2],i[0]);return n=[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],s,["L",i[3].x,i[3].y],["L",i[2].x,i[2].y],l,["Z"]],n=this.parsePath(n),r.fill=r.stroke,t.addShape("path",{attrs:Ph(Ph({},r),{path:n})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),ok("edge","smooth",{draw:function(e,t){var n=Lk(e,!0,!1,"lineWidth"),r=e.points,i=this.parsePath(function(e,t){var n=EO(e,t),r=[["M",e.x,e.y]];return r.push(n),r}(r[0],r[1]));return t.addShape("path",{attrs:Ph(Ph({},n),{path:i})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});ok("edge","vhv",{draw:function(e,t){var n=Lk(e,!0,!1,"lineWidth"),r=e.points,i=this.parsePath(function(e,t){var n=[];n.push({x:e.x,y:.6666666666666667*e.y+.3333333333333333*t.y}),n.push({x:t.x,y:.6666666666666667*e.y+.3333333333333333*t.y}),n.push(t);var r=[["M",e.x,e.y]];return Xh(n,(function(e){r.push(["L",e.x,e.y])})),r}(r[0],r[1]));return t.addShape("path",{attrs:Ph(Ph({},n),{path:i})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),ok("interval","funnel",{getPoints:function(e){return e.size=2*e.size,aO(e)},draw:function(e,t){var n=Lk(e,!1,!0),r=this.parsePath(cO(e.points,e.nextPoints,!1));return t.addShape("path",{attrs:Ph(Ph({},n),{path:r}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),ok("interval","hollow-rect",{draw:function(e,t){var n=Lk(e,!0,!1),r=t,i=null==e?void 0:e.background;if(i){r=t.addGroup();var a=Pk(e),o=lO(e,this.parsePoints(e.points),this.coordinate);r.addShape("path",{attrs:Ph(Ph({},a),{path:o}),zIndex:-1,name:"element-background"})}var s=this.parsePath(oO(e.points)),l=r.addShape("path",{attrs:Ph(Ph({},n),{path:s}),name:"interval"});return i?r:l},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}}),ok("interval","line",{getPoints:function(e){return n=(t=e).x,r=t.y,i=t.y0,Vh(r)?r.map((function(e,t){return{x:Vh(n)?n[t]:n,y:e}})):[{x:n,y:i},{x:n,y:r}];var t,n,r,i},draw:function(e,t){var n=Lk(e,!0,!1,"lineWidth"),r=GT(Ph({},n),["fill"]),i=this.parsePath(oO(e.points,!1));return t.addShape("path",{attrs:Ph(Ph({},r),{path:i}),name:"interval"})},getMarker:function(e){return{symbol:function(e,t,n){return[["M",e,t-n],["L",e,t+n]]},style:{r:5,stroke:e.color}}}}),ok("interval","pyramid",{getPoints:function(e){return e.size=2*e.size,aO(e)},draw:function(e,t){var n=Lk(e,!1,!0),r=this.parsePath(cO(e.points,e.nextPoints,!0));return t.addShape("path",{attrs:Ph(Ph({},n),{path:r}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),ok("interval","tick",{getPoints:function(e){return function(e){var t,n,r=e.x,i=e.y,a=e.y0,o=e.size;Vh(i)?(t=i[0],n=i[1]):(t=a,n=i);var s=r+o/2,l=r-o/2;return[{x:r,y:t},{x:r,y:n},{x:l,y:t},{x:s,y:t},{x:l,y:n},{x:s,y:n}]}(e)},draw:function(e,t){var n,r=Lk(e,!0,!1),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y]]);return t.addShape("path",{attrs:Ph(Ph({},r),{path:i}),name:"interval"})},getMarker:function(e){return{symbol:function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},style:{r:5,stroke:e.color}}}});function CO(e,t){var n=Mk(e.points,e.connectNulls,e.showSinglePoint),r=[];return Xh(n,(function(e){var n=function(e,t){var n=[];return Xh(e,(function(r,i){var a=e[i+1];if(n.push(r),a){var o=function(e,t,n){var r,i=e.x,a=e.y,o=t.x,s=t.y;switch(n){case"hv":r=[{x:o,y:a}];break;case"vh":r=[{x:i,y:s}];break;case"hvh":var l=(o+i)/2;r=[{x:l,y:a},{x:l,y:s}];break;case"vhv":var c=(a+s)/2;r=[{x:i,y:c},{x:o,y:c}]}return r}(r,a,t);n=n.concat(o)}})),n}(e,t);r=r.concat(function(e){return e.map((function(e,t){return 0===t?["M",e.x,e.y]:["L",e.x,e.y]}))}(n))})),Ph(Ph({},Lk(e,!0,!1,"lineWidth")),{path:r})}function TO(e){var t=Vh(e)?e:[e],n=t[0],r=t[t.length-1],i=t.length>1?t[1]:n;return{min:n,max:r,min1:i,max1:t.length>3?t[3]:r,median:t.length>2?t[2]:i}}function wO(e,t,n){var r,i=n/2;if(Vh(t)){var a=TO(t),o=a.min,s=a.max,l=a.median,c=a.min1,u=e-i,h=e+i;r=[[u,s],[h,s],[e,s],[e,p=a.max1],[u,c],[u,p],[h,p],[h,c],[e,c],[e,o],[u,o],[h,o],[u,l],[h,l]]}else{t=Uh(t)?.5:t;var p,d=TO(e),f=(o=d.min,s=d.max,l=d.median,t-i),m=t+i;r=[[o,f],[o,m],[o,t],[c=d.min1,t],[c,f],[c,m],[p=d.max1,m],[p,f],[p,t],[s,t],[s,f],[s,m],[l,f],[l,m]]}return r.map((function(e){return{x:e[0],y:e[1]}}))}function SO(e){var t=(Vh(e)?e:[e]).sort((function(e,t){return t-e}));return function(e,t,n){if(lp(e))return e.padEnd(t,n);if(Vh(e)){var r=e.length;if(r<t)for(var i=t-r,a=0;a<i;a++)e.push(n)}return e}(t,4,t[t.length-1])}function kO(e,t,n){var r=SO(t);return[{x:e,y:r[0]},{x:e,y:r[1]},{x:e-n/2,y:r[2]},{x:e-n/2,y:r[1]},{x:e+n/2,y:r[1]},{x:e+n/2,y:r[2]},{x:e,y:r[2]},{x:e,y:r[3]}]}function _O(e,t){var n=Math.abs(e[0].x-e[2].x),r=Math.abs(e[0].y-e[2].y),i=Math.min(n,r);return t&&(i=yp(t,0,Math.min(n,r))),i/=2,{x:(e[0].x+e[2].x)/2-i,y:(e[0].y+e[2].y)/2-i,width:2*i,height:2*i}}Xh(["hv","vh","hvh","vhv"],(function(e){ok("line",e,{draw:function(t,n){var r=CO(t,e);return n.addShape({type:"path",attrs:r,name:"line"})},getMarker:function(t){return Bk(t,e)}})})),Xh(["cross","tick","plus","hyphen","line"],(function(e){ok("point",e,{draw:function(t,n){return mO(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:Tk[e],style:{r:4.5,stroke:n,fill:null}}}})})),ok("point","image",{draw:function(e,t){var n=Lk(e,!1,!1,"r").r,r=this.parsePoints(e.points),i=r[0];if(e.isStack)i=r[1];else if(r.length>1){for(var a=t.addGroup(),o=0,s=r;o<s.length;o++){var l=s[o];a.addShape("image",{attrs:{x:l.x-n/2,y:l.y-n,width:n,height:n,img:e.shape[1]}})}return a}return t.addShape("image",{attrs:{x:i.x-n/2,y:i.y-n,width:n,height:n,img:e.shape[1]}})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),Xh(fO,(function(e){ok("point",e,{draw:function(t,n){return mO(this,t,n,e,!1)},getMarker:function(t){var n=t.color;return{symbol:Tk[e]||e,style:{r:4.5,fill:n}}}})})),ok("schema","box",{getPoints:function(e){return wO(e.x,e.y,e.size)},draw:function(e,t){var n,r=Lk(e,!0,!1),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y],["L",n[6].x,n[6].y],["L",n[7].x,n[7].y],["L",n[4].x,n[4].y],["Z"],["M",n[8].x,n[8].y],["L",n[9].x,n[9].y],["M",n[10].x,n[10].y],["L",n[11].x,n[11].y],["M",n[12].x,n[12].y],["L",n[13].x,n[13].y]]);return t.addShape("path",{attrs:Ph(Ph({},r),{path:i,name:"schema"})})},getMarker:function(e){return{symbol:function(e,t,n){var r=wO(e,[t-6,t-3,t,t+3,t+6],n);return[["M",r[0].x+1,r[0].y],["L",r[1].x-1,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x+1,r[10].y],["L",r[11].x-1,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]},style:{r:6,lineWidth:1,stroke:e.color}}}}),ok("schema","candle",{getPoints:function(e){return kO(e.x,e.y,e.size)},draw:function(e,t){var n,r=Lk(e,!0,!0),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[4].x,n[4].y],["L",n[5].x,n[5].y],["Z"],["M",n[6].x,n[6].y],["L",n[7].x,n[7].y]]);return t.addShape("path",{attrs:Ph(Ph({},r),{path:i,name:"schema"})})},getMarker:function(e){var t=e.color;return{symbol:function(e,t,n){var r=kO(e,[t+7.5,t+3,t-3,t-7.5],n);return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}}),ok("polygon","square",{draw:function(e,t){if(!Wp(e.points)){var n=Lk(e,!0,!0),r=this.parsePoints(e.points);return t.addShape("rect",{attrs:Ph(Ph({},n),_O(r,e.size)),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),ok("violin","smooth",{draw:function(e,t){var n=Lk(e,!0,!0),r=this.parsePath(Fk(e.points));return t.addShape("path",{attrs:Ph(Ph({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{stroke:null,r:4,fill:e.color}}}}),ok("violin","hollow",{draw:function(e,t){var n=Lk(e,!0,!1),r=this.parsePath(Nk(e.points));return t.addShape("path",{attrs:Ph(Ph({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:null,stroke:e.color}}}}),ok("violin","hollow-smooth",{draw:function(e,t){var n=Lk(e,!0,!1),r=this.parsePath(Fk(e.points));return t.addShape("path",{attrs:Ph(Ph({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:null,stroke:e.color}}}});var AO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getLabelValueDir=function(e){var t=e.points;return t[0].y<=t[2].y?1:-1},t.prototype.getLabelOffsetPoint=function(t,n,r,i){var a,o=e.prototype.getLabelOffsetPoint.call(this,t,n,r),s=this.getCoordinate(),l=s.isTransposed?"x":"y",c=this.getLabelValueDir(t.mappingData);return o=Ph(Ph({},o),((a={})[l]=o[l]*c,a)),s.isReflect("x")&&(o=Ph(Ph({},o),{x:-1*o.x})),s.isReflect("y")&&(o=Ph(Ph({},o),{y:-1*o.y})),o},t.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.theme;return Yp({},n,r.labels,"middle"===e.position?{offset:0}:{},e)},t.prototype.setLabelPosition=function(e,t,n,r){var i,a,o,s,l=this.getCoordinate(),c=l.isTransposed,u=t.points,h=l.convert(u[0]),p=l.convert(u[2]),d=this.getLabelValueDir(t),f=Vh(t.shape)?t.shape[0]:t.shape;if("funnel"===f||"pyramid"===f){var m=Zp(t,"nextPoints"),g=Zp(t,"points");if(m){var v=l.convert(g[0]),y=l.convert(g[1]),x=l.convert(m[0]),E=l.convert(m[1]);c?(i=Math.min(x.y,v.y),o=Math.max(x.y,v.y),a=(y.x+E.x)/2,s=(v.x+x.x)/2):(i=Math.min((y.y+E.y)/2,(v.y+x.y)/2),o=Math.max((y.y+E.y)/2,(v.y+x.y)/2),a=E.x,s=v.x)}else i=Math.min(p.y,h.y),o=Math.max(p.y,h.y),a=p.x,s=h.x}else i=Math.min(p.y,h.y),o=Math.max(p.y,h.y),a=p.x,s=h.x;switch(r){case"right":e.x=a,e.y=(i+o)/2,e.textAlign=Zp(e,"textAlign",d>0?"left":"right");break;case"left":e.x=s,e.y=(i+o)/2,e.textAlign=Zp(e,"textAlign",d>0?"left":"right");break;case"bottom":c&&(e.x=(a+s)/2),e.y=o,e.textAlign=Zp(e,"textAlign","center"),e.textBaseline=Zp(e,"textBaseline",d>0?"bottom":"top");break;case"middle":c&&(e.x=(a+s)/2),e.y=(i+o)/2,e.textAlign=Zp(e,"textAlign","center"),e.textBaseline=Zp(e,"textBaseline","middle");break;case"top":c&&(e.x=(a+s)/2),e.y=i,e.textAlign=Zp(e,"textAlign","center"),e.textBaseline=Zp(e,"textBaseline",d>0?"bottom":"top")}},t}(bk),OO=Math.PI/2,IO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=0;if(Ep(e))n=e;else if(lp(e)&&-1!==e.indexOf("%")){var r=t.getRadius();t.innerRadius>0&&(r*=1-t.innerRadius),n=.01*parseFloat(e)*r}return n},t.prototype.getLabelItems=function(t){var n=e.prototype.getLabelItems.call(this,t),r=this.geometry.getYScale();return Kp(n,(function(e){if(e&&r){var t=r.scale(Zp(e.data,r.field));return Ph(Ph({},e),{percent:t})}return e}))},t.prototype.getLabelAlign=function(e){var t,n=this.getCoordinate();if(e.labelEmit)t=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?"left":"right";else if(n.isTransposed){var r=n.getCenter(),i=e.offset;t=Math.abs(e.x-r.x)<1?"center":e.angle>Math.PI||e.angle<=0?i>0?"left":"right":i>0?"right":"left"}else t="center";return t},t.prototype.getLabelPoint=function(e,t,n){var r,i=1,a=e.content[n];this.isToMiddle(t)?r=this.getMiddlePoint(t.points):(1===e.content.length&&0===n?n=1:0===n&&(i=-1),r=this.getArcPoint(t,n));var o=e.offset*i,s=this.getPointAngle(r),l=e.labelEmit,c=this.getCirclePoint(s,o,r,l);return 0===c.r?c.content="":(c.content=a,c.angle=s,c.color=t.color),c.rotate=e.autoRotate?this.getLabelRotate(s,o,l):e.rotate,c.start={x:r.x,y:r.y},c},t.prototype.getArcPoint=function(e,t){return void 0===t&&(t=0),Vh(e.x)||Vh(e.y)?{x:Vh(e.x)?e.x[t]:e.x,y:Vh(e.y)?e.y[t]:e.y}:{x:e.x,y:e.y}},t.prototype.getPointAngle=function(e){return XT(this.getCoordinate(),e)},t.prototype.getCirclePoint=function(e,t,n,r){var i=this.getCoordinate(),a=i.getCenter(),o=VT(i,n);if(0===o)return Ph(Ph({},a),{r:o});var s=e;i.isTransposed&&o>t&&!r?s=e+2*Math.asin(t/(2*o)):o+=t;return{x:a.x+o*Math.cos(s),y:a.y+o*Math.sin(s),r:o}},t.prototype.getLabelRotate=function(e,t,n){var r=e+OO;return n&&(r-=OO),r&&(r>OO?r-=Math.PI:r<-OO&&(r+=Math.PI)),r},t.prototype.getMiddlePoint=function(e){var t=this.getCoordinate(),n=e.length,r={x:0,y:0};return Xh(e,(function(e){r.x+=e.x,r.y+=e.y})),r.x/=n,r.y/=n,r=t.convert(r)},t.prototype.isToMiddle=function(e){return e.x.length>2},t}(bk),MO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return Lh(t,e),t.prototype.getDefaultLabelCfg=function(t,n){var r=e.prototype.getDefaultLabelCfg.call(this,t,n);return Yp({},r,Zp(this.geometry.theme,"pieLabels",{}))},t.prototype.getLabelOffset=function(t){return e.prototype.getLabelOffset.call(this,t)||0},t.prototype.getLabelRotate=function(e,t,n){var r;return t<0&&((r=e)>Math.PI/2&&(r-=Math.PI),r<-Math.PI/2&&(r+=Math.PI)),r},t.prototype.getLabelAlign=function(e){var t,n=this.getCoordinate().getCenter();return t=e.angle<=Math.PI/2&&e.x>=n.x?"left":"right",e.offset<=0&&(t="right"===t?"left":"right"),t},t.prototype.getArcPoint=function(e){return e},t.prototype.getPointAngle=function(e){var t,n=this.getCoordinate(),r={x:Vh(e.x)?e.x[0]:e.x,y:e.y[0]},i={x:Vh(e.x)?e.x[1]:e.x,y:e.y[1]},a=XT(n,r);if(e.points&&e.points[0].y===e.points[1].y)t=a;else{var o=XT(n,i);a>=o&&(o+=2*Math.PI),t=a+(o-a)/2}return t},t.prototype.getCirclePoint=function(e,t){var n=this.getCoordinate(),r=n.getCenter(),i=n.getRadius()+t;return Ph(Ph({},RT(r.x,r.y,i,e)),{angle:e,r:i})},t}(IO);function NO(e,t,n){var r=e.filter((function(e){return!e.invisible}));r.sort((function(e,t){return e.y-t.y}));var i,a=!0,o=n.minY,s=n.maxY,l=Math.abs(o-s),c=0,u=Number.MIN_VALUE,h=r.map((function(e){return e.y>c&&(c=e.y),e.y<u&&(u=e.y),{content:e.content,size:t,targets:[e.y-o],pos:null}}));for(u-=o,c-o>l&&(l=c-o);a;)for(h.forEach((function(e){var t=(Math.min.apply(u,e.targets)+Math.max.apply(u,e.targets))/2;e.pos=Math.min(Math.max(u,t-e.size/2),l-e.size),e.pos=Math.max(0,e.pos)})),a=!1,i=h.length;i--;)if(i>0){var p=h[i-1],d=h[i];p.pos+p.size>d.pos&&(p.size+=d.size,p.targets=p.targets.concat(d.targets),p.pos+p.size>l&&(p.pos=l-p.size),h.splice(i,1),a=!0)}i=0,h.forEach((function(e){var n=o+t/2;e.targets.forEach((function(){r[i].y=e.pos+n,n+=t,i++}))}))}var FO=function(){function e(e){void 0===e&&(e={}),this.bitmap={};var t=e.xGap,n=void 0===t?1:t,r=e.yGap,i=void 0===r?8:r;this.xGap=n,this.yGap=i}return e.prototype.hasGap=function(e){for(var t=!0,n=this.bitmap,r=Math.round(e.minX),i=Math.round(e.maxX),a=Math.round(e.minY),o=Math.round(e.maxY),s=r;s<=i;s+=1)if(n[s]){if(s===r||s===i){for(var l=a;l<=o;l++)if(n[s][l]){t=!1;break}}else if(n[s][a]||n[s][o]){t=!1;break}}else n[s]={};return t},e.prototype.fillGap=function(e){for(var t=this.bitmap,n=Math.round(e.minX),r=Math.round(e.maxX),i=Math.round(e.minY),a=Math.round(e.maxY),o=n;o<=r;o+=1)t[o]||(t[o]={});for(o=n;o<=r;o+=this.xGap){for(var s=i;s<=a;s+=this.yGap)t[o][s]=!0;t[o][a]=!0}if(1!==this.yGap)for(o=i;o<=a;o+=1)t[n][o]=!0,t[r][o]=!0;if(1!==this.xGap)for(o=n;o<=r;o+=1)t[o][i]=!0,t[o][a]=!0},e.prototype.destroy=function(){this.bitmap={}},e}();function LO(e,t,n,r){var i=e.getCanvasBBox(),a=i.width,o=i.height,s={x:t,y:n,textAlign:"center"};switch(r){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=2*o+2;break;case 6:s.y+=2*o+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right"}return e.attr(s),e.getCanvasBBox()}var PO=Zf;function RO(e){if(e.length>4)return[];var t=function(e,t){return[t.x-e.x,t.y-e.y]};return[t(e[0],e[1]),t(e[1],e[2])]}function DO(e,t,n){void 0===t&&(t=0),void 0===n&&(n={x:0,y:0});var r=e.x,i=e.y;return{x:(r-n.x)*Math.cos(-t)+(i-n.y)*Math.sin(-t)+n.x,y:(n.x-r)*Math.sin(-t)+(i-n.y)*Math.cos(-t)+n.y}}function BO(e){var t=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=e.rotation;return n?[DO(t[0],n,t[0]),DO(t[1],n,t[0]),DO(t[2],n,t[0]),DO(t[3],n,t[0])]:t}function zO(e,t){if(e.length>4)return{min:0,max:0};var n=[];return e.forEach((function(e){n.push(PO([e.x,e.y],t))})),{min:Math.min.apply(Math,n),max:Math.max.apply(Math,n)}}function HO(e,t){return e.max>t.min&&e.min<t.max}function jO(e){return Ep(e)&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0}function GO(e){return Object.values(e).every(jO)}function $O(e,t){if(!GO(e)||!GO(t))return!1;if(!e.rotation&&!t.rotation)return function(e,t,n){return void 0===n&&(n=0),!(t.x>e.x+e.width+n||t.x+t.width<e.x-n||t.y>e.y+e.height+n||t.y+t.height<e.y-n)}(e,t);for(var n=BO(e),r=BO(t),i=Bh(Bh([],RO(n),!0),RO(r),!0),a=0;a<i.length;a++){var o=i[a];if(!HO(zO(n,o),zO(r,o)))return!1}return!0}var YO,UO={"#5B8FF9":!0};function VO(e,t,n){return!!e.getAdjust("stack")||t.every((function(t,r){var i=n[r];return function(e,t,n){var r=e.coordinate,i=mk(t),a=YT.fromObject(i.getCanvasBBox()),o=YT.fromObject(n.getBBox());return r.isTransposed?o.height>=a.height:o.width>=a.width}(e,t,i)}))}function WO(e,t,n){return e.some((function(e){return n(e,t)}))}function XO(e,t){return WO(e,t,(function(e,t){var n,r,i,a=mk(e),o=mk(t);return n=a.getCanvasBBox(),r=o.getCanvasBBox(),void 0===(i=2)&&(i=0),Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}function qO(e,t,n){return e.some((function(e){return n(e,t)}))}function KO(e,t){return qO(e,t,(function(e,t){var n,r,i,a=mk(e),o=mk(t);return n=a.getCanvasBBox(),r=o.getCanvasBBox(),void 0===(i=2)&&(i=0),Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}var QO=Gp((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant,s=(YO||(YO=document.createElement("canvas").getContext("2d")),YO);return s.font=[a,o,i,"".concat(n,"px"),r].join(" "),s.measureText(lp(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Bh([e],_p(t),!0).join("")}));function ZO(e,t,n,r,i){var a,o,s=n.start,l=n.end,c=n.getWidth(),u=n.getHeight();"y"===i?(a=s.x+c/2,o=r.y<s.y?r.y:s.y):"x"===i?(a=r.x>s.x?r.x:s.x,o=s.y+u/2):"xy"===i&&(n.isPolar?(a=n.getCenter().x,o=n.getCenter().y):(a=(s.x+l.x)/2,o=(s.y+l.y)/2));var h=function(e,t,n){var r,i=t[0],a=t[1];return e.applyToMatrix([i,a,1]),"x"===n?(e.setMatrix(am(e.getMatrix(),[["t",-i,-a],["s",.01,1],["t",i,a]])),r=am(e.getMatrix(),[["t",-i,-a],["s",100,1],["t",i,a]])):"y"===n?(e.setMatrix(am(e.getMatrix(),[["t",-i,-a],["s",1,.01],["t",i,a]])),r=am(e.getMatrix(),[["t",-i,-a],["s",1,100],["t",i,a]])):"xy"===n&&(e.setMatrix(am(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])),r=am(e.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])),r}(e,[a,o],i);e.animate({matrix:h},t)}function JO(e,t){var n,r=d_(e,t),i=r.startAngle,a=r.endAngle;return!bp(i,.5*-Math.PI)&&i<.5*-Math.PI&&(i+=2*Math.PI),!bp(a,.5*-Math.PI)&&a<.5*-Math.PI&&(a+=2*Math.PI),0===t[5]&&(i=(n=[a,i])[0],a=n[1]),bp(i,1.5*Math.PI)&&(i=-.5*Math.PI),bp(a,-.5*Math.PI)&&(a=1.5*Math.PI),{startAngle:i,endAngle:a}}function eI(e){var t;return"M"===e[0]||"L"===e[0]?t=[e[1],e[2]]:"a"!==e[0]&&"A"!==e[0]&&"C"!==e[0]||(t=[e[e.length-2],e[e.length-1]]),t}function tI(e){var t,n,r,i=e.filter((function(e){return"A"===e[0]||"a"===e[0]}));if(0===i.length)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var a=i[0],o=i.length>1?i[1]:i[0],s=e.indexOf(a),l=e.indexOf(o),c=eI(e[s-1]),u=eI(e[l-1]),h=JO(c,a),p=h.startAngle,d=h.endAngle,f=JO(u,o),m=f.startAngle,g=f.endAngle;bp(p,m)&&bp(d,g)?(n=p,r=d):(n=Math.min(p,m),r=Math.max(d,g));var v=a[1],y=i[i.length-1][1];return v<y?(v=(t=[y,v])[0],y=t[1]):v===y&&(y=0),{startAngle:n,endAngle:r,radius:v,innerRadius:y}}function nI(e,t,n){if(e.isGroup())Xh(e.getChildren(),(function(e){nI(e,t,n)}));else{var r=e.getBBox(),i=(r.minX+r.maxX)/2,a=(r.minY+r.maxY)/2;if(e.applyToMatrix([i,a,1]),"zoomIn"===n){var o=am(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);e.setMatrix(o),e.animate({matrix:am(e.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},t)}else e.animate({matrix:am(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},Ph(Ph({},t),{callback:function(){e.remove(!0)}}))}}function rI(e){return[ud.TOP,ud.BOTTOM].includes(e)?{offsetX:0,offsetY:e===ud.TOP?-8:8,style:{textAlign:"center",textBaseline:e===ud.TOP?"bottom":"top"}}:[ud.LEFT,ud.RIGHT].includes(e)?{offsetX:e===ud.LEFT?-8:8,offsetY:0,style:{textAlign:e===ud.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function iI(e,t,n){return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}var aI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){return Yp({},e.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.getRegion=function(e,t){var n=2*Math.PI/e,r=-1*Math.PI/2+n*t,i=.5/(1+1/Math.sin(n/2)),a=iI({x:.5,y:.5},.5-i,r),o=5*Math.PI/4,s=1*Math.PI/4;return{start:iI(a,i,o),end:iI(a,i,s)}},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg,r=n.fields,i=n.type,a=r[0];if(!a)throw new Error("No `fields` specified!");var o=this.getFieldValues(e,a),s=o.length,l=[];return o.forEach((function(n,r){var c=[{field:a,value:n,values:o}],u=jh(e,t.getFacetDataFilter(c)),h={type:i,data:u,region:t.getRegion(s,r),columnValue:n,columnField:a,columnIndex:r,columnValuesLength:s,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};l.push(h)})),l},t.prototype.getXAxisOption=function(e,t,n,r){return n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;Xh(this.facets,(function(t){var n=t.columnValue,r=t.view,i=Zp(e.cfg.title,"formatter"),a=Yp({position:["50%","0%"],content:i?i(n):n},rI(ud.TOP),e.cfg.title);r.annotation().text(a)}))},t}(cw),oI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){return Yp({},e.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg.fields,r=this.cfg.cols,i=n[0];if(!i)throw new Error("No `fields` specified!");var a=this.getFieldValues(e,i),o=a.length;r=r||o;var s=this.getPageCount(o,r),l=[];return a.forEach((function(n,c){var u=t.getRowCol(c,r),h=u.row,p=u.col,d=[{field:i,value:n,values:a}],f=jh(e,t.getFacetDataFilter(d)),m={type:t.cfg.type,data:f,region:t.getRegion(s,r,p,h),columnValue:n,rowValue:n,columnField:i,rowField:null,columnIndex:p,rowIndex:h,columnValuesLength:r,rowValuesLength:s,total:o};l.push(m)})),l},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1&&r.columnValuesLength*r.rowIndex+r.columnIndex+1+r.columnValuesLength<=r.total?Ph(Ph({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?Ph(Ph({},n),{title:null,label:null}):n},t.prototype.renderTitle=function(){var e=this;Xh(this.facets,(function(t){var n=t.columnValue,r=t.view,i=Zp(e.cfg.title,"formatter"),a=Yp({position:["50%","0%"],content:i?i(n):n},rI(ud.TOP),e.cfg.title);r.annotation().text(a)}))},t.prototype.getPageCount=function(e,t){return Math.floor((e+t-1)/t)},t.prototype.getRowCol=function(e,t){return{row:Math.floor(e/t),col:e%t}},t}(cw),sI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){return Yp({},e.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:Ph({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:Ph({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){for(var t=this.cfg,n=t.fields,r=t.type,i=n.length,a=i,o=[],s=0;s<a;s++)for(var l=n[s],c=0;c<i;c++){var u=n[c],h={type:r,data:e,region:this.getRegion(i,a,s,c),columnValue:l,rowValue:u,columnField:l,rowField:u,columnIndex:s,rowIndex:c,columnValuesLength:a,rowValuesLength:i};o.push(h)}return o},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?Ph(Ph({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?Ph(Ph({},n),{title:null,label:null}):n},t.prototype.renderTitle=function(){var e=this;Xh(this.facets,(function(t,n){var r=t.columnIndex,i=t.rowIndex,a=t.columnValuesLength;t.rowValuesLength;var o=t.columnValue,s=t.rowValue,l=t.view;if(0===i){var c=Zp(e.cfg.columnTitle,"formatter"),u=Yp({position:["50%","0%"],content:c?c(o):o},rI(ud.TOP),e.cfg.columnTitle);l.annotation().text(u)}if(r===a-1){c=Zp(e.cfg.rowTitle,"formatter"),u=Yp({position:["100%","50%"],content:c?c(s):s},rI(ud.RIGHT),e.cfg.rowTitle);l.annotation().text(u)}}))},t}(cw),lI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getDefaultCfg=function(){return Yp({},e.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this),transpose:!1})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.beforeEachView=function(e,t){this.cfg.transpose?t.columnIndex%2==0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():t.rowIndex%2!=0&&e.coordinate().reflect("y")},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.generateFacets=function(e){var t,n,r=this,i=this.cfg.fields[0],a=[],o=1,s=1,l=[""],c=[""];return this.cfg.transpose?(t=i,l=this.getFieldValues(e,t).slice(0,2),o=l.length):(n=i,c=this.getFieldValues(e,n).slice(0,2),s=c.length),l.forEach((function(i,u){c.forEach((function(h,p){var d=[{field:t,value:i,values:l},{field:n,value:h,values:c}],f=jh(e,r.getFacetDataFilter(d)),m={type:r.cfg.type,data:f,region:r.getRegion(s,o,u,p),columnValue:i,rowValue:h,columnField:t,rowField:n,columnIndex:u,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(m)}))})),a},t.prototype.getXAxisOption=function(e,t,n,r){return 1===r.columnIndex||1===r.rowIndex?Ph(Ph({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;Xh(this.facets,(function(t,n){var r=t.columnValue,i=t.rowValue,a=t.view,o=Zp(e.cfg.title,"formatter");if(e.cfg.transpose){var s=Yp({position:["50%","0%"],content:o?o(r):r},rI(ud.TOP),e.cfg.title);a.annotation().text(s)}else{s=Yp({position:["100%","50%"],content:o?o(i):i},rI(ud.RIGHT),e.cfg.title);a.annotation().text(s)}}))},t}(cw),cI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.getDefaultCfg=function(){return Yp({},e.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:Ph({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:Ph({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.generateFacets=function(e){var t=this,n=this.cfg.fields,r=n[0],i=n[1],a=[],o=1,s=1,l=[""],c=[""];return r&&(l=this.getFieldValues(e,r),o=l.length),i&&(c=this.getFieldValues(e,i),s=c.length),l.forEach((function(n,u){c.forEach((function(h,p){var d=[{field:r,value:n,values:l},{field:i,value:h,values:c}],f=jh(e,t.getFacetDataFilter(d)),m={type:t.cfg.type,data:f,region:t.getRegion(s,o,u,p),columnValue:n,rowValue:h,columnField:r,rowField:i,columnIndex:u,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(m)}))})),a},t.prototype.renderTitle=function(){var e=this;Xh(this.facets,(function(t,n){var r=t.columnIndex,i=t.rowIndex,a=t.columnValuesLength,o=t.columnValue,s=t.rowValue,l=t.view;if(0===i){var c=Zp(e.cfg.columnTitle,"formatter"),u=Yp({position:["50%","0%"],content:c?c(o):o},rI(ud.TOP),e.cfg.columnTitle);l.annotation().text(u)}if(r===a-1){c=Zp(e.cfg.rowTitle,"formatter"),u=Yp({position:["100%","50%"],content:c?c(s):s},rI(ud.RIGHT),e.cfg.rowTitle);l.annotation().text(u)}}))},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?Ph(Ph({},n),{title:null,label:null}):r.columnIndex!==Math.floor((r.columnValuesLength-1)/2)?Ph(Ph({},n),{title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?Ph(Ph({},n),{title:null,label:null}):r.rowIndex!==Math.floor((r.rowValuesLength-1)/2)?Ph(Ph({},n),{title:null}):n},t}(cw),uI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return Lh(t,e),t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.init=function(){e.prototype.init.call(this),this.view.on(gd.AFTER_RENDER,this.afterChartRender)},t.prototype.getDefaultCfg=function(){return Yp({},e.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.generateFacets=function(e){if(!this.cfg.fields.length)throw new Error("Please specify for the fields for rootFacet!");var t=[],n={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return t.push(n),n.children=this.getChildFacets(e,1,t),this.setRegion(t),t},t.prototype.setRegion=function(e){var t=this;this.forceColIndex(e),e.forEach((function(e){e.region=t.getRegion(e.rowValuesLength,e.columnValuesLength,e.columnIndex,e.rowIndex)}))},t.prototype.getRegion=function(e,t,n,r){var i=1/t,a=1/e,o={x:i*n,y:a*r};return{start:o,end:{x:o.x+i,y:o.y+2*a/3}}},t.prototype.forceColIndex=function(e){var t=this,n=[],r=0;e.forEach((function(e){t.isLeaf(e)&&(n.push(e),e.columnIndex=r,r++)})),n.forEach((function(e){e.columnValuesLength=n.length}));for(var i=this.cfg.fields.length-1;i>=0;i--)for(var a=0,o=this.getFacetsByLevel(e,i);a<o.length;a++){var s=o[a];this.isLeaf(s)||(s.originColIndex=s.columnIndex,s.columnIndex=this.getRegionIndex(s.children),s.columnValuesLength=n.length)}},t.prototype.getFacetsByLevel=function(e,t){var n=[];return e.forEach((function(e){e.rowIndex===t&&n.push(e)})),n},t.prototype.getRegionIndex=function(e){var t=e[0];return(e[e.length-1].columnIndex-t.columnIndex)/2+t.columnIndex},t.prototype.isLeaf=function(e){return!e.children||!e.children.length},t.prototype.getRows=function(){return this.cfg.fields.length+1},t.prototype.getChildFacets=function(e,t,n){var r=this,i=this.cfg.fields;if(!(i.length<t)){var a=[],o=i[t-1],s=this.getFieldValues(e,o);return s.forEach((function(i,l){var c=[{field:o,value:i,values:s}],u=e.filter(r.getFacetDataFilter(c));if(u.length){var h={type:r.cfg.type,data:u,region:null,columnValue:i,rowValue:"",columnField:o,rowField:"",columnIndex:l,rowValuesLength:r.getRows(),columnValuesLength:1,rowIndex:t,children:r.getChildFacets(u,t+1,n)};a.push(h),n.push(h)}})),a}},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.renderTitle=function(){var e=this;Xh(this.facets,(function(t){var n=t.columnValue,r=t.view,i=Zp(e.cfg.title,"formatter"),a=Yp({position:["50%","0%"],content:i?i(n):n},rI(ud.TOP),e.cfg.title);r.annotation().text(a)}))},t.prototype.drawLines=function(e){var t=this;e.forEach((function(e){if(!t.isLeaf(e)){var n=e.children;t.addFacetLines(e,n)}}))},t.prototype.addFacetLines=function(e,t){var n=this,r=e.view.coordinateBBox,i={x:r.x+r.width/2,y:r.y+r.height};t.forEach((function(e){var t=e.view.coordinateBBox,r={x:t.bl.x+(t.tr.x-t.bl.x)/2,y:t.tr.y},a={x:i.x,y:i.y+(r.y-i.y)/2},o={x:r.x,y:a.y};n.drawLine([i,a,o,r])}))},t.prototype.getPath=function(e){var t=[];return this.cfg.line.smooth?(t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach((function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},t.prototype.drawLine=function(e){var t=this.getPath(e),n=this.cfg.line.style;this.container.addShape("path",{attrs:zp({path:t},n)})},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?Ph(Ph({},n),{title:null,label:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.originColIndex&&0!==r.columnIndex?Ph(Ph({},n),{title:null,label:null}):n},t}(cw);function hI(e){var t=Bh([],e,!0);t.sort((function(e,t){return e-t}));var n=t.length;return 0===n?0:n%2==1?t[(n-1)/2]:(t[n/2]+t[n/2-1])/2}function pI(e,t){if(!t)return null;var n,r,i;switch(e){case"start":return 0;case"center":return.5;case"end":return 1;case"median":n=t.isCategory?hI(t.values.map((function(e,t){return t}))):hI(t.values);break;case"mean":n=t.isCategory?(t.values.length-1)/2:(r=t.values,i=op(r,(function(e,t){return e+(isNaN(t)||!Ep(t)?0:t)}),0),0===r.length?0:i/r.length);break;case"min":n=t.isCategory?0:t[e];break;case"max":n=t.isCategory?t.values.length-1:t[e];break;default:n=e}return t.scale(n)}var dI=["regionFilter","shape"],fI=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(ld.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(ld.BG).addGroup(),n.option=[],n}return Lh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.layout=function(){this.update()},t.prototype.render=function(){},t.prototype.update=function(){var e=this;this.onAfterRender((function(){var t=new Map;Xh(e.option,(function(n){if(Hh(dI,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}})),e.cache=e.syncCache(t)}));var t=new Map;Xh(this.option,(function(n){if(!Hh(dI,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}})),this.cache=this.syncCache(t)},t.prototype.clear=function(t){void 0===t&&(t=!1),e.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},t.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},t.prototype.clearComponents=function(){this.getComponents().forEach((function(e){e.component.destroy()})),this.cache.clear()},t.prototype.onAfterRender=function(e){this.view.getOptions().animate?this.view.geometries.forEach((function(t){t.animateOption&&t.once(yd.AFTER_DRAW_ANIMATE,(function(){e()}))})):this.view.getRootView().once(gd.AFTER_RENDER,(function(){e()}))},t.prototype.createAnnotation=function(e){var t=e.type,n=wC[Mp(t)];if(n){var r=this.getAnnotationTheme(t),i=this.getAnnotationCfg(t,e,r);return{component:new n(i),layer:this.isTop(i)?ld.FORE:ld.BG,direction:ud.NONE,type:pd.ANNOTATION,extra:e}}},t.prototype.annotation=function(e){this.option.push(e)},t.prototype.arc=function(e){return this.annotation(Ph({type:"arc"},e)),this},t.prototype.image=function(e){return this.annotation(Ph({type:"image"},e)),this},t.prototype.line=function(e){return this.annotation(Ph({type:"line"},e)),this},t.prototype.region=function(e){return this.annotation(Ph({type:"region"},e)),this},t.prototype.text=function(e){return this.annotation(Ph({type:"text"},e)),this},t.prototype.dataMarker=function(e){return this.annotation(Ph({type:"dataMarker"},e)),this},t.prototype.dataRegion=function(e){this.annotation(Ph({type:"dataRegion"},e))},t.prototype.regionFilter=function(e){this.annotation(Ph({type:"regionFilter"},e))},t.prototype.shape=function(e){this.annotation(Ph({type:"shape"},e))},t.prototype.html=function(e){this.annotation(Ph({type:"html"},e))},t.prototype.parsePosition=function(e){var t=this.view.getXScale(),n=this.view.getScalesByDim("y"),r=Yh(e)?e.call(null,t,n):e,i=0,a=0;if(Vh(r)){var o=r[0],s=r[1];if(lp(o)&&-1!==o.indexOf("%")&&!isNaN(o.slice(0,-1)))return this.parsePercentPosition(r);i=pI(o,t),a=pI(s,Object.values(n)[0])}else if(!Uh(r))for(var l=0,c=qh(r);l<c.length;l++){var u=c[l],h=r[u];u===t.field&&(i=pI(h,t)),n[u]&&(a=pI(h,n[u]))}return this.view.getCoordinate().convert({x:i,y:a})},t.prototype.getRegionPoints=function(e,t){var n,r=this,i=this.view.getXScale(),a=this.view.getScalesByDim("y"),o=Object.values(a)[0],s=i.field,l=this.view.getData(),c=Vh(e)?e[0]:e[s],u=Vh(t)?t[0]:t[s],h=[];return Xh(l,(function(e,t){if(e[s]===c&&(n=t),t>=n){var i=r.parsePosition([e[s],e[o.field]]);i&&h.push(i)}if(e[s]===u)return!1})),h},t.prototype.parsePercentPosition=function(e){var t=parseFloat(e[0])/100,n=parseFloat(e[1])/100,r=this.view.getCoordinate(),i=r.start,a=r.end,o=Math.min(i.x,a.x),s=Math.min(i.y,a.y);return{x:r.getWidth()*t+o,y:r.getHeight()*n+s}},t.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),t=e.start,n=e.end,r=e.getWidth(),i=e.getHeight(),a={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)};return{x:a.x,y:a.y,minX:a.x,minY:a.y,maxX:a.x+r,maxY:a.y+i,width:r,height:i}},t.prototype.getAnnotationCfg=function(e,t,n){var r=this,i=this.view.getCoordinate(),a=this.view.getCanvas(),o={};if(Uh(t))return null;if("arc"===e){var s=t,l=s.start,c=s.end,u=Rh(s,["start","end"]),h=this.parsePosition(l),p=this.parsePosition(c),d=XT(i,h),f=XT(i,p);d>f&&(f=2*Math.PI+f),o=Ph(Ph({},u),{center:i.getCenter(),radius:VT(i,h),startAngle:d,endAngle:f})}else if("image"===e){var m=t;l=m.start,c=m.end,u=Rh(m,["start","end"]);o=Ph(Ph({},u),{start:this.parsePosition(l),end:this.parsePosition(c),src:t.src})}else if("line"===e){var g=t;l=g.start,c=g.end,u=Rh(g,["start","end"]);o=Ph(Ph({},u),{start:this.parsePosition(l),end:this.parsePosition(c),text:Zp(t,"text",null)})}else if("region"===e){var v=t;l=v.start,c=v.end,u=Rh(v,["start","end"]);o=Ph(Ph({},u),{start:this.parsePosition(l),end:this.parsePosition(c)})}else if("text"===e){var y=this.view.getData(),x=t,E=x.position,b=x.content,C=(u=Rh(x,["position","content"]),b);Yh(b)&&(C=b(y)),o=Ph(Ph(Ph({},this.parsePosition(E)),u),{content:C})}else if("dataMarker"===e){var T=t,w=(E=T.position,T.point),S=T.line,k=T.text,_=T.autoAdjust,A=T.direction;u=Rh(T,["position","point","line","text","autoAdjust","direction"]);o=Ph(Ph(Ph({},u),this.parsePosition(E)),{coordinateBBox:this.getCoordinateBBox(),point:w,line:S,text:k,autoAdjust:_,direction:A})}else if("dataRegion"===e){var O=t,I=(l=O.start,c=O.end,O.region),M=(k=O.text,O.lineLength);u=Rh(O,["start","end","region","text","lineLength"]);o=Ph(Ph({},u),{points:this.getRegionPoints(l,c),region:I,text:k,lineLength:M})}else if("regionFilter"===e){var N=t,F=(l=N.start,c=N.end,N.apply),L=N.color,P=(u=Rh(N,["start","end","apply","color"]),this.view.geometries),R=[],D=function(e){e&&(e.isGroup()?e.getChildren().forEach((function(e){return D(e)})):R.push(e))};Xh(P,(function(e){F?Hh(F,e.type)&&Xh(e.elements,(function(e){D(e.shape)})):Xh(e.elements,(function(e){D(e.shape)}))})),o=Ph(Ph({},u),{color:L,shapes:R,start:this.parsePosition(l),end:this.parsePosition(c)})}else if("shape"===e){var B=t,z=B.render,H=Rh(B,["render"]);o=Ph(Ph({},H),{render:function(e){if(Yh(t.render))return z(e,r.view,{parsePosition:r.parsePosition.bind(r)})}})}else if("html"===e){var j=t,G=j.html;E=j.position,H=Rh(j,["html","position"]);o=Ph(Ph(Ph({},H),this.parsePosition(E)),{parent:a.get("el").parentNode,html:function(e){return Yh(G)?G(e,r.view):G}})}var $=Yp({},n,Ph(Ph({},o),{top:t.top,style:t.style,offsetX:t.offsetX,offsetY:t.offsetY}));return"html"!==e&&($.container=this.getComponentContainer($)),$.animate=this.view.getOptions().animate&&$.animate&&Zp(t,"animate",$.animate),$.animateOption=Yp({},VS,$.animateOption,t.animateOption),$},t.prototype.isTop=function(e){return Zp(e,"top",!0)},t.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},t.prototype.getAnnotationTheme=function(e){return Zp(this.view.getTheme(),["components","annotation",e],{})},t.prototype.updateOrCreate=function(e){var t=this.cache.get(this.getCacheKey(e));if(t){var n=e.type,r=this.getAnnotationTheme(n),i=this.getAnnotationCfg(n,e,r);GT(i,["container"]),t.component.update(i),Hh(dI,e.type)&&t.component.render()}else(t=this.createAnnotation(e))&&(t.component.init(),Hh(dI,e.type)&&t.component.render());return t},t.prototype.syncCache=function(e){var t=this,n=new Map(this.cache);return e.forEach((function(e,t){n.set(t,e)})),n.forEach((function(e,r){Jh(t.option,(function(e){return r===t.getCacheKey(e)}))||(e.component.destroy(),n.delete(r))})),n},t.prototype.getCacheKey=function(e){return e},t}(jS);function mI(e,t){var n=Yp({},Zp(e,["components","axis","common"]),Zp(e,["components","axis",t]));return Zp(n,["grid"],{})}function gI(e,t,n,r){var i=[],a=t.getTicks();return e.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce((function(t,a,o){var s=a.value;if(r)i.push({points:[e.convert("y"===n?{x:0,y:s}:{x:s,y:0}),e.convert("y"===n?{x:1,y:s}:{x:s,y:1})]});else if(o){var l=(t.value+s)/2;i.push({points:[e.convert("y"===n?{x:0,y:l}:{x:l,y:0}),e.convert("y"===n?{x:1,y:l}:{x:l,y:1})]})}return a}),a[0]),i}function vI(e,t,n,r,i){var a=t.values.length,o=[],s=n.getTicks();return s.reduce((function(t,n){var s=t?t.value:n.value,l=n.value,c=(s+l)/2;return"x"===i?o.push({points:[e.convert({x:r?l:c,y:0}),e.convert({x:r?l:c,y:1})]}):o.push({points:Kp(Array(a+1),(function(t,n){return e.convert({x:n/a,y:r?l:c})}))}),n}),s[0]),o}function yI(e,t){var n=Zp(t,"grid");if(null===n)return!1;var r=Zp(e,"grid");return!(void 0===n&&null===r)}var xI=["container"],EI=Ph(Ph({},VS),{appear:null}),bI=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(ld.BG).addGroup(),n.gridForeContainer=n.view.getLayer(ld.FORE).addGroup(),n.axisContainer=n.view.getLayer(ld.BG).addGroup(),n.axisForeContainer=n.view.getLayer(ld.FORE).addGroup(),n}return Lh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this,t=this.view.getCoordinate();Xh(this.getComponents(),(function(n){var r,i=n.component,a=n.direction,o=n.type,s=n.extra,l=s.dim,c=s.scale,u=s.alignTick;if(o===pd.AXIS)t.isPolar?"x"===l?r=t.isTransposed?ew(t,a):aw(t):"y"===l&&(r=t.isTransposed?aw(t):ew(t,a)):r=ew(t,a);else if(o===pd.GRID)if(t.isPolar){r={items:t.isTransposed?"x"===l?vI(t,e.view.getYScales()[0],c,u,l):gI(t,c,l,u):"x"===l?gI(t,c,l,u):vI(t,e.view.getXScale(),c,u,l),center:e.view.getCoordinate().getCenter()}}else r={items:gI(t,c,l,u)};i.update(r)}))},t.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var t=new Map;this.cache.forEach((function(n,r){e.has(r)?t.set(r,n):n.component.destroy()})),this.cache=t},t.prototype.clear=function(){e.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},t.prototype.updateXAxes=function(e){var t=this.view.getXScale();if(t&&!t.isIdentity){var n=ow(this.option,t.field);if(!1!==n){var r=sw(n,ud.BOTTOM),i=ld.BG,a="x",o=this.view.getCoordinate(),s=this.getId("axis",t.field),l=this.getId("grid",t.field);if(o.isRect){if(c=this.cache.get(s))GT(h=this.getLineAxisCfg(t,n,r),xI),c.component.update(h),e.set(s,c);else c=this.createLineAxis(t,n,i,r,a),this.cache.set(s,c),e.set(s,c);if(u=this.cache.get(l))GT(h=this.getLineGridCfg(t,n,r,a),xI),u.component.update(h),e.set(l,u);else(u=this.createLineGrid(t,n,i,r,a))&&(this.cache.set(l,u),e.set(l,u))}else if(o.isPolar){var c,u;if(c=this.cache.get(s)){GT(h=o.isTransposed?this.getLineAxisCfg(t,n,ud.RADIUS):this.getCircleAxisCfg(t,n,r),xI),c.component.update(h),e.set(s,c)}else{if(o.isTransposed){if(Rp(n))return;c=this.createLineAxis(t,n,i,ud.RADIUS,a)}else c=this.createCircleAxis(t,n,i,r,a);this.cache.set(s,c),e.set(s,c)}if(u=this.cache.get(l)){var h;GT(h=o.isTransposed?this.getCircleGridCfg(t,n,ud.RADIUS,a):this.getLineGridCfg(t,n,ud.CIRCLE,a),xI),u.component.update(h),e.set(l,u)}else{if(o.isTransposed){if(Rp(n))return;u=this.createCircleGrid(t,n,i,ud.RADIUS,a)}else u=this.createLineGrid(t,n,i,ud.CIRCLE,a);u&&(this.cache.set(l,u),e.set(l,u))}}}}},t.prototype.updateYAxes=function(e){var t=this;Xh(this.view.getYScales(),(function(n,r){if(n&&!n.isIdentity){var i=n.field,a=ow(t.option,i);if(!1!==a){var o=ld.BG,s="y",l=t.getId("axis",i),c=t.getId("grid",i),u=t.view.getCoordinate();if(u.isRect){var h=sw(a,0===r?ud.LEFT:ud.RIGHT);if(p=t.cache.get(l))GT(f=t.getLineAxisCfg(n,a,h),xI),p.component.update(f),e.set(l,p);else p=t.createLineAxis(n,a,o,h,s),t.cache.set(l,p),e.set(l,p);if(d=t.cache.get(c))GT(f=t.getLineGridCfg(n,a,h,s),xI),d.component.update(f),e.set(c,d);else(d=t.createLineGrid(n,a,o,h,s))&&(t.cache.set(c,d),e.set(c,d))}else if(u.isPolar){var p,d;if(p=t.cache.get(l)){GT(f=u.isTransposed?t.getCircleAxisCfg(n,a,ud.CIRCLE):t.getLineAxisCfg(n,a,ud.RADIUS),xI),p.component.update(f),e.set(l,p)}else{if(u.isTransposed){if(Rp(a))return;p=t.createCircleAxis(n,a,o,ud.CIRCLE,s)}else p=t.createLineAxis(n,a,o,ud.RADIUS,s);t.cache.set(l,p),e.set(l,p)}if(d=t.cache.get(c)){var f;GT(f=u.isTransposed?t.getLineGridCfg(n,a,ud.CIRCLE,s):t.getCircleGridCfg(n,a,ud.RADIUS,s),xI),d.component.update(f),e.set(c,d)}else{if(u.isTransposed){if(Rp(a))return;d=t.createLineGrid(n,a,o,ud.CIRCLE,s)}else d=t.createCircleGrid(n,a,o,ud.RADIUS,s);d&&(t.cache.set(c,d),e.set(c,d))}}}}}))},t.prototype.createLineAxis=function(e,t,n,r,i){var a={component:new _T(this.getLineAxisCfg(e,t,r)),layer:n,direction:r===ud.RADIUS?ud.NONE:r,type:pd.AXIS,extra:{dim:i,scale:e}};return a.component.set("field",e.field),a.component.init(),a},t.prototype.createLineGrid=function(e,t,n,r,i){var a=this.getLineGridCfg(e,t,r,i);if(a){var o={component:new OT(a),layer:n,direction:ud.NONE,type:pd.GRID,extra:{dim:i,scale:e,alignTick:Zp(a,"alignTick",!0)}};return o.component.init(),o}},t.prototype.createCircleAxis=function(e,t,n,r,i){var a={component:new AT(this.getCircleAxisCfg(e,t,r)),layer:n,direction:r,type:pd.AXIS,extra:{dim:i,scale:e}};return a.component.set("field",e.field),a.component.init(),a},t.prototype.createCircleGrid=function(e,t,n,r,i){var a=this.getCircleGridCfg(e,t,r,i);if(a){var o={component:new IT(a),layer:n,direction:ud.NONE,type:pd.GRID,extra:{dim:i,scale:e,alignTick:Zp(a,"alignTick",!0)}};return o.component.init(),o}},t.prototype.getLineAxisCfg=function(e,t,n){var r=Zp(t,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=ew(i,n),o=lw(e,t),s=rw(this.view.getTheme(),n),l=Zp(t,["title"])?Yp({title:{style:{text:o}}},{title:iw(this.view.getTheme(),n,t.title)},t):t,c=Yp(Ph(Ph({container:r},a),{ticks:e.getTicks().map((function(e){return{id:"".concat(e.tickValue),name:e.text,value:e.value}})),verticalFactor:i.isPolar?-1*nw(a,i.getCenter()):nw(a,i.getCenter()),theme:s}),s,l),u=this.getAnimateCfg(c),h=u.animate,p=u.animateOption;c.animateOption=p,c.animate=h;var d=tw(a),f=Zp(c,"verticalLimitLength",d?1/3:.5);if(f<=1){var m=this.view.getCanvas().get("width"),g=this.view.getCanvas().get("height");c.verticalLimitLength=f*(d?m:g)}return c},t.prototype.getLineGridCfg=function(e,t,n,r){if(yI(rw(this.view.getTheme(),n),t)){var i=mI(this.view.getTheme(),n),a=Yp({container:Zp(t,["top"])?this.gridForeContainer:this.gridContainer},i,Zp(t,"grid"),this.getAnimateCfg(t));return a.items=gI(this.view.getCoordinate(),e,r,Zp(a,"alignTick",!0)),a}},t.prototype.getCircleAxisCfg=function(e,t,n){var r=Zp(t,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=e.getTicks().map((function(e){return{id:"".concat(e.tickValue),name:e.text,value:e.value}}));e.isCategory||Math.abs(i.endAngle-i.startAngle)!==2*Math.PI||a.pop();var o=lw(e,t),s=rw(this.view.getTheme(),ud.CIRCLE),l=Zp(t,["title"])?Yp({title:{style:{text:o}}},{title:iw(this.view.getTheme(),n,t.title)},t):t,c=Yp(Ph(Ph({container:r},aw(this.view.getCoordinate())),{ticks:a,verticalFactor:1,theme:s}),s,l),u=this.getAnimateCfg(c),h=u.animate,p=u.animateOption;return c.animate=h,c.animateOption=p,c},t.prototype.getCircleGridCfg=function(e,t,n,r){if(yI(rw(this.view.getTheme(),n),t)){var i=mI(this.view.getTheme(),ud.RADIUS),a=Yp({container:Zp(t,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},i,Zp(t,"grid"),this.getAnimateCfg(t)),o=Zp(a,"alignTick",!0),s="x"===r?this.view.getYScales()[0]:this.view.getXScale();return a.items=vI(this.view.getCoordinate(),s,e,o,r),a}},t.prototype.getId=function(e,t){var n=this.view.getCoordinate();return"".concat(e,"-").concat(t,"-").concat(n.type)},t.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&Zp(e,"animate"),animateOption:e&&e.animateOption?Yp({},EI,e.animateOption):EI}},t}(jS);function CI(e,t,n){return n===ud.TOP?[e.minX+e.width/2-t.width/2,e.minY]:n===ud.BOTTOM?[e.minX+e.width/2-t.width/2,e.maxY-t.height]:n===ud.LEFT?[e.minX,e.minY+e.height/2-t.height/2]:n===ud.RIGHT?[e.maxX-t.width,e.minY+e.height/2-t.height/2]:n===ud.TOP_LEFT||n===ud.LEFT_TOP?[e.tl.x,e.tl.y]:n===ud.TOP_RIGHT||n===ud.RIGHT_TOP?[e.tr.x-t.width,e.tr.y]:n===ud.BOTTOM_LEFT||n===ud.LEFT_BOTTOM?[e.bl.x,e.bl.y-t.height]:n===ud.BOTTOM_RIGHT||n===ud.RIGHT_BOTTOM?[e.br.x-t.width,e.br.y-t.height]:[0,0]}function TI(e,t){return Fp(e)?!1!==e&&{}:Zp(e,[t],e)}function wI(e){return Zp(e,"position",ud.BOTTOM)}var SI=function(e){function t(t){var n=e.call(this,t)||this;return n.container=n.view.getLayer(ld.FORE).addGroup(),n}return Lh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,Xh(this.components,(function(t){var n=t.component,r=t.direction,i=kk(r),a=n.get("maxWidthRatio"),o=n.get("maxHeightRatio"),s=e.getCategoryLegendSizeCfg(i,a,o),l=n.get("maxWidth"),c=n.get("maxHeight");n.update({maxWidth:Math.min(s.maxWidth,l||0),maxHeight:Math.min(s.maxHeight,c||0)});var u=n.get("padding"),h=n.getLayoutBBox(),p=new YT(h.x,h.y,h.width,h.height).expand(u),d=CI(e.view.viewBBox,p,r),f=d[0],m=d[1],g=CI(e.layoutBBox,p,r),v=g[0],y=g[1],x=0,E=0;r.startsWith("top")||r.startsWith("bottom")?(x=f,E=y):(x=v,E=m),n.setLocation({x:x+u[3],y:E+u[0]}),e.layoutBBox=e.layoutBBox.cut(p,r)}))},t.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var t={};if(Zp(this.option,"custom")){var n="global-custom",r=this.getComponentById(n);if(r){var i=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);GT(i,["container"]),r.component.update(i),t[n]=!0}else{var a=this.createCustomLegend(void 0,void 0,void 0,this.option);if(a){a.init();var o=ld.FORE,s=wI(this.option);this.components.push({id:n,component:a,layer:o,direction:s,type:pd.LEGEND,extra:void 0}),t[n]=!0}}}else this.loopLegends((function(n,r,i){var a=e.getId(i.field),o=e.getComponentById(a);if(o){var s=void 0,l=TI(e.option,i.field);!1!==l&&(Zp(l,"custom")?s=e.getCategoryCfg(n,r,i,l,!0):i.isLinear?s=e.getContinuousCfg(n,r,i,l):i.isCategory&&(s=e.getCategoryCfg(n,r,i,l))),s&&(GT(s,["container"]),o.direction=wI(l),o.component.update(s),t[a]=!0)}else{var c=e.createFieldLegend(n,r,i);c&&(c.component.init(),e.components.push(c),t[a]=!0)}}));var l=[];Xh(this.getComponents(),(function(e){t[e.id]?l.push(e):e.component.destroy()})),this.components=l},t.prototype.clear=function(){e.prototype.clear.call(this),this.container.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.container.remove(!0)},t.prototype.getGeometries=function(e){var t=this,n=e.geometries;return Xh(e.views,(function(e){n=n.concat(t.getGeometries(e))})),n},t.prototype.loopLegends=function(e){if(this.view.getRootView()===this.view){var t=this.getGeometries(this.view),n={};Xh(t,(function(t){Xh(t.getGroupAttributes(),(function(r){var i=r.getScale(r.type);i&&"identity"!==i.type&&!n[i.field]&&(e(t,r,i),n[i.field]=!0)}))}))}},t.prototype.createFieldLegend=function(e,t,n){var r,i=TI(this.option,n.field),a=ld.FORE,o=wI(i);if(!1!==i&&(Zp(i,"custom")?r=this.createCustomLegend(e,t,n,i):n.isLinear?r=this.createContinuousLegend(e,t,n,i):n.isCategory&&(r=this.createCategoryLegend(e,t,n,i))),r)return r.set("field",n.field),{id:this.getId(n.field),component:r,layer:a,direction:o,type:pd.LEGEND,extra:{scale:n}}},t.prototype.createCustomLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r,!0);return new MT(i)},t.prototype.createContinuousLegend=function(e,t,n,r){var i=this.getContinuousCfg(e,t,n,GT(r,["value"]));return new NT(i)},t.prototype.createCategoryLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r);return new MT(i)},t.prototype.getContinuousCfg=function(e,t,n,r){var i=n.getTicks(),a=Jh(i,(function(e){return 0===e.value})),o=Jh(i,(function(e){return 1===e.value})),s=i.map((function(e){var r=e.value,i=e.tickValue,a=t.mapping(n.invert(r)).join("");return{value:i,attrValue:a,color:a,scaleValue:r}}));a||s.push({value:n.min,attrValue:t.mapping(n.invert(0)).join(""),color:t.mapping(n.invert(0)).join(""),scaleValue:0}),o||s.push({value:n.max,attrValue:t.mapping(n.invert(1)).join(""),color:t.mapping(n.invert(1)).join(""),scaleValue:1}),s.sort((function(e,t){return e.value-t.value}));var l={min:hp(s).value,max:pp(s).value,colors:[],rail:{type:t.type},track:{}};"size"===t.type&&(l.track={style:{fill:"size"===t.type?this.view.getTheme().defaultColor:void 0}}),"color"===t.type&&(l.colors=s.map((function(e){return e.attrValue})));var c=this.container,u=kk(wI(r)),h=Zp(r,"title");return h&&(h=Yp({text:ZT(n)},h)),l.container=c,l.layout=u,l.title=h,l.animateOption=VS,this.mergeLegendCfg(l,r,"continuous")},t.prototype.getCategoryCfg=function(e,t,n,r,i){var a=this.container,o=Zp(r,"position",ud.BOTTOM),s=Ak(this.view.getTheme(),o),l=Zp(s,["marker"]),c=Zp(r,"marker"),u=kk(o),h=Zp(s,["pageNavigator"]),p=Zp(r,"pageNavigator"),d=i?function(e,t,n){return n.map((function(n,r){var i=t;Yh(i)&&(i=i(n.name,r,Yp({},e,n)));var a=Yh(n.marker)?n.marker(n.name,r,Yp({},e,n)):n.marker,o=Yp({},e,i,a);return Sk(o),n.marker=o,n}))}(l,c,r.items):_k(this.view,e,t,l,c),f=Zp(r,"title");f&&(f=Yp({text:n?ZT(n):""},f));var m=Zp(r,"maxWidthRatio"),g=Zp(r,"maxHeightRatio"),v=this.getCategoryLegendSizeCfg(u,m,g);v.container=a,v.layout=u,v.items=d,v.title=f,v.animateOption=VS,v.pageNavigator=Yp({},h,p);var y=this.mergeLegendCfg(v,r,o);y.reversed&&y.items.reverse();var x=Zp(y,"maxItemWidth");return x&&x<=1&&(y.maxItemWidth=this.view.viewBBox.width*x),y},t.prototype.mergeLegendCfg=function(e,t,n){var r=n.split("-")[0],i=Ak(this.view.getTheme(),r);return Yp({},i,e,t)},t.prototype.getId=function(e){return"".concat(this.name,"-").concat(e)},t.prototype.getComponentById=function(e){return Jh(this.components,(function(t){return t.id===e}))},t.prototype.getCategoryLegendSizeCfg=function(e,t,n){void 0===t&&(t=.25),void 0===n&&(n=.25);var r=this.view.viewBBox,i=r.width,a=r.height;return"vertical"===e?{maxWidth:i*t,maxHeight:a}:{maxWidth:i,maxHeight:a*n}},t}(jS),kI=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeFn=od,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=e[0],r=e[1];n.start=t,n.end=r,n.changeViewData(t,r)},n.container=n.view.getLayer(ld.FORE).addGroup(),n.onChangeFn=rd(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(gd.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(gd.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Lh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(gd.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(gd.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),t=e.start,n=e.end;Uh(this.start)&&(this.start=t,this.end=n);var r=this.view.getOptions().data;this.option&&!Wp(r)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout((function(){e.view.destroyed||e.changeViewData(e.start,e.end)}),0)),this.slider){var t=this.view.coordinateBBox.width,n=this.slider.component.get("padding"),r=n[0];n[1],n[2];var i=n[3],a=this.slider.component.getLayoutBBox(),o=new YT(a.x,a.y,Math.min(a.width,t),a.height).expand(n),s=this.getMinMaxText(this.start,this.end),l=s.minText,c=s.maxText,u=CI(this.view.viewBBox,o,ud.BOTTOM);u[0];var h=u[1],p=CI(this.view.coordinateBBox,o,ud.BOTTOM),d=p[0];p[1],this.slider.component.update(Ph(Ph({},this.getSliderCfg()),{x:d+i,y:h+r,width:this.width,start:this.start,end:this.end,minText:l,maxText:c})),this.view.viewBBox=this.view.viewBBox.cut(o,ud.BOTTOM)}},t.prototype.update=function(){this.render()},t.prototype.createSlider=function(){var e=this.getSliderCfg(),t=new wT(Ph({container:this.container},e));return t.init(),{component:t,layer:ld.FORE,direction:ud.BOTTOM,type:pd.SLIDER}},t.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var t=this.getMinMaxText(this.start,this.end),n=t.minText,r=t.maxText;e=Ph(Ph({},e),{width:this.width,start:this.start,end:this.end,minText:n,maxText:r})}return this.slider.component.update(e),this.slider},t.prototype.measureSlider=function(){var e=this.getSliderCfg().width;this.width=e},t.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(Wh(this.option)){var t=Ph({data:this.getData()},Zp(this.option,"trendCfg",{}));e=Yp({},e,this.getThemeOptions(),this.option),e=Ph(Ph({},e),{trendCfg:t})}return e.start=yp(Math.min(Uh(e.start)?0:e.start,Uh(e.end)?1:e.end),0,1),e.end=yp(Math.max(Uh(e.start)?0:e.start,Uh(e.end)?1:e.end),0,1),e},t.prototype.getData=function(){var e=this.view.getOptions().data,t=this.view.getYScales()[0],n=this.view.getGroupScales();if(n.length){var r=n[0],i=r.field,a=r.ticks;return e.reduce((function(e,n){return n[i]===a[0]&&e.push(n[t.field]),e}),[])}return e.map((function(e){return e[t.field]||0}))},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return Zp(e,["components","slider","common"],{})},t.prototype.getMinMaxText=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=up(n,r.field),a=sd(n);if(!r||!a)return{};var o=sd(i),s=Math.floor(e*(o-1)),l=Math.floor(t*(o-1)),c=Zp(i,[s]),u=Zp(i,[l]),h=this.getSliderCfg().formatter;return h&&(c=h(c,n[s],s),u=h(u,n[l],l)),{minText:c,maxText:u}},t.prototype.changeViewData=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=sd(n);if(r&&i){var a=up(n,r.field),o=sd(a),s=Math.floor(e*(o-1)),l=Math.floor(t*(o-1));this.view.filter(r.field,(function(e,t){var n=a.indexOf(e);return!(n>-1)||jT(n,s,l)})),this.view.render(!0)}},t.prototype.getComponents=function(){return this.slider?[this.slider]:[]},t.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},t}(jS),_I=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeFn=od,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=e.ratio,r=n.getValidScrollbarCfg().animate;n.ratio=yp(t,0,1);var i=n.view.getOptions().animate;r||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(i)},n.container=n.view.getLayer(ld.FORE).addGroup(),n.onChangeFn=rd(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(gd.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(gd.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Lh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(gd.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(gd.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout((function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)}))),this.scrollbar){var t=this.view.coordinateBBox.width,n=this.scrollbar.component.get("padding"),r=this.scrollbar.component.getLayoutBBox(),i=new YT(r.x,r.y,Math.min(r.width,t),r.height).expand(n),a=this.getScrollbarComponentCfg(),o=void 0,s=void 0;if(a.isHorizontal){var l=CI(this.view.viewBBox,i,ud.BOTTOM);l[0];var c=l[1],u=CI(this.view.coordinateBBox,i,ud.BOTTOM),h=u[0];u[1],o=h,s=c}else{var p=CI(this.view.viewBBox,i,ud.RIGHT);p[0];c=p[1];var d=CI(this.view.viewBBox,i,ud.RIGHT);h=d[0];d[1],o=h,s=c}o+=n[3],s+=n[0],this.trackLen?this.scrollbar.component.update(Ph(Ph({},a),{x:o,y:s,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(Ph(Ph({},a),{x:o,y:s})),this.view.viewBBox=this.view.viewBBox.cut(i,a.isHorizontal?ud.BOTTOM:ud.RIGHT)}},t.prototype.update=function(){this.render()},t.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},t.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},t.prototype.setValue=function(e){this.onValueChange({ratio:e})},t.prototype.getValue=function(){return this.ratio},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return Zp(e,["components","scrollbar","common"],{})},t.prototype.getScrollbarTheme=function(e){var t=Zp(this.view.getTheme(),["components","scrollbar"]),n=e||{},r=n.thumbHighlightColor,i=Rh(n,["thumbHighlightColor"]);return{default:Yp({},Zp(t,["default","style"],{}),i),hover:Yp({},Zp(t,["hover","style"],{}),{thumbColor:r})}},t.prototype.measureScrollbar=function(){var e=this.view.getXScale(),t=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var n=this.getScrollbarComponentCfg(),r=n.trackLen,i=n.thumbLen;this.trackLen=r,this.thumbLen=i,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=t},t.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*yp(this.ratio,0,1));return[e,Math.min(e+this.step-1,this.cnt-1)]},t.prototype.changeViewData=function(e,t){var n=this,r=e[0],i=e[1],a="vertical"!==this.getValidScrollbarCfg().type,o=up(this.data,this.xScaleCfg.field),s=a?o:o.reverse();this.yScalesCfg.forEach((function(e){n.view.scale(e.field,{formatter:e.formatter,type:e.type,min:e.min,max:e.max})})),this.view.filter(this.xScaleCfg.field,(function(e){var t=s.indexOf(e);return!(t>-1)||jT(t,r,i)})),this.view.render(!0)},t.prototype.createScrollbar=function(){var e="vertical"!==this.getValidScrollbarCfg().type,t=new kT(Ph(Ph({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return t.init(),{component:t,layer:ld.FORE,direction:e?ud.BOTTOM:ud.RIGHT,type:pd.SCROLLBAR}},t.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),t=this.trackLen?Ph(Ph({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):Ph({},e);return this.scrollbar.component.update(t),this.scrollbar},t.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,t=this.getValidScrollbarCfg(),n=t.type,r=t.categorySize,i="vertical"!==n;return Math.floor((i?e.width:e.height)/r)},t.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),t=this.getScrollbarData();return sd(up(t,e.field))},t.prototype.getScrollbarComponentCfg=function(){var e=this.view,t=e.coordinateBBox,n=e.viewBBox,r=this.getValidScrollbarCfg(),i=r.type,a=r.padding,o=r.width,s=r.height,l=r.style,c="vertical"!==i,u=a[0],h=a[1],p=a[2],d=a[3],f=c?{x:t.minX+d,y:n.maxY-s-p}:{x:n.maxX-o-h,y:t.minY+u},m=this.getStep(),g=this.getCnt(),v=c?t.width-d-h:t.height-u-p,y=Math.max(v*yp(m/g,0,1),20);return Ph(Ph({},this.getThemeOptions()),{x:f.x,y:f.y,size:c?s:o,isHorizontal:c,trackLen:v,thumbLen:y,thumbOffset:0,theme:this.getScrollbarTheme(l)})},t.prototype.getValidScrollbarCfg=function(){var e={type:"horizontal",categorySize:32,width:8,height:8,padding:[0,0,0,0],animate:!0,style:{}};return Wh(this.option)&&(e=Ph(Ph({},e),this.option)),Wh(this.option)&&this.option.padding||(e.padding=(e.type,[0,0,0,0])),e},t.prototype.getScrollbarData=function(){var e=this.view.getCoordinate(),t=this.getValidScrollbarCfg(),n=this.view.getOptions().data||[];return e.isReflect("y")&&"vertical"===t.type&&(n=Bh([],n,!0).reverse()),n},t}(jS),AI={fill:"#CCD6EC",opacity:.3};function OI(e,t,n){var r=function(e,t,n){for(var r=_S(e,t,n),i=0,a=e.views;i<a.length;i++){var o=a[i];r=r.concat(_S(o,t,n))}return r}(e,t,n);if(r.length){for(var i=0,a=r=tp(r);i<a.length;i++)for(var o=0,s=a[i];o<s.length;o++){var l=s[o],c=l.mappingData,u=c.x,h=c.y;l.x=Vh(u)?u[u.length-1]:u,l.y=Vh(h)?h[h.length-1]:h}if(!1===n.shared&&r.length>1){for(var p=r[0],d=Math.abs(t.y-p[0].y),f=0,m=r;f<m.length;f++){var g=m[f],v=Math.abs(t.y-g[0].y);v<=d&&(p=g,d=v)}r=[p]}return cp(tp(r))}return[]}var II=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.show=function(e){var t=this.context.view,n=this.context.event,r=t.getController("tooltip").getTooltipCfg(),i=OI(t,{x:n.x,y:n.y},r);if(!qp(i,this.items)&&(this.items=i,i.length)){var a=t.getXScale().field,o=i[0].data[a],s=[];if(Xh(t.geometries,(function(e){if("interval"===e.type||"schema"===e.type){var t=e.getElementsBy((function(e){return e.getData()[a]===o}));s=s.concat(t)}})),s.length){var l=t.getCoordinate(),c=s[0].shape.getCanvasBBox(),u=s[0].shape.getCanvasBBox(),h=c;Xh(s,(function(e){var t=e.shape.getCanvasBBox();l.isTransposed?(t.minY<c.minY&&(c=t),t.maxY>u.maxY&&(u=t)):(t.minX<c.minX&&(c=t),t.maxX>u.maxX&&(u=t)),h.x=Math.min(t.minX,h.minX),h.y=Math.min(t.minY,h.minY),h.width=Math.max(t.maxX,h.maxX)-h.x,h.height=Math.max(t.maxY,h.maxY)-h.y}));var p=t.backgroundGroup,d=t.coordinateBBox,f=void 0;if(l.isRect){var m=t.getXScale(),g=e||{},v=g.appendRatio,y=g.appendWidth;Uh(y)&&(v=Uh(v)?m.isLinear?0:.25:v,y=l.isTransposed?v*u.height:v*c.width);var x=void 0,E=void 0,b=void 0,C=void 0;l.isTransposed?(x=d.minX,E=Math.min(u.minY,c.minY)-y,b=d.width,C=h.height+2*y):(x=Math.min(c.minX,u.minX)-y,E=d.minY,b=h.width+2*y,C=d.height),f=[["M",x,E],["L",x+b,E],["L",x+b,E+C],["L",x,E+C],["Z"]]}else{var T=hp(s),w=pp(s),S=zT(T.getModel(),l).startAngle,k=zT(w.getModel(),l).endAngle,_=l.getCenter(),A=l.getRadius(),O=l.innerRadius*A;f=DT(_.x,_.y,A,S,k,O)}if(this.regionPath)this.regionPath.attr("path",f),this.regionPath.show();else{var I=Zp(e,"style",AI);this.regionPath=p.addShape({type:"path",name:"active-region",capture:!1,attrs:Ph(Ph({},I),{path:f})})}}}},t.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},t.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),e.prototype.destroy.call(this)},t}(pw),MI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return Lh(t,e),t.prototype.show=function(){var e=this.context,t=e.event,n=e.view;if(!n.isTooltipLocked()){var r=this.timeStamp,i=+new Date;if(i-r>Zp(e.view.getOptions(),"tooltip.showDelay",16)){var a=this.location,o={x:t.x,y:t.y};a&&qp(a,o)||this.showTooltip(n,o),this.timeStamp=i,this.location=o}}},t.prototype.hide=function(){var e=this.context.view,t=e.getController("tooltip"),n=this.context.event,r=n.clientX,i=n.clientY;t.isCursorEntered({x:r,y:i})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},t.prototype.showTooltip=function(e,t){e.showTooltip(t)},t.prototype.hideTooltip=function(e){e.hideTooltip()},t}(pw),NI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.showTooltip=function(e,t){Xh(jw(e),(function(n){var r=Gw(e,n,t);n.showTooltip(r)}))},t.prototype.hideTooltip=function(e){Xh(jw(e),(function(e){e.hideTooltip()}))},t}(MI),FI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return Lh(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.show=function(){var e=this.context.event,t=this.timeStamp,n=+new Date;if(n-t>16){var r=this.location,i={x:e.x,y:e.y};r&&qp(r,i)||this.showTooltip(i),this.timeStamp=n,this.location=i}},t.prototype.hide=function(){this.hideTooltip(),this.location=null},t.prototype.showTooltip=function(e){var t=this.context.event.target;if(t&&t.get("tip")){this.tooltip||this.renderTooltip();var n=t.get("tip");this.tooltip.update(Ph({title:n},e)),this.tooltip.show()}},t.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,t=this.context.view,n=t.canvas,r={start:{x:0,y:0},end:{x:n.get("width"),y:n.get("height")}},i=t.getTheme(),a=Zp(i,["components","tooltip","domStyles"],{}),o=new FT({parent:n.get("el").parentNode,region:r,visible:!1,crosshairs:null,domStyles:Ph({},Yp({},a,(e={},e["g2-tooltip"]={"max-width":"50%"},e[iT]={"word-break":"break-all"},e)))});o.init(),o.setCapture(!1),this.tooltip=o},t}(pw),LI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="",t}return Lh(t,e),t.prototype.hasState=function(e){return e.hasState(this.stateName)},t.prototype.setElementState=function(e,t){e.setState(this.stateName,t)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},t.prototype.clearViewState=function(e){var t=this;Xh(Lw(e,this.stateName),(function(e){t.setElementState(e,!1)}))},t}(pw);function PI(e){return Zp(e.get("delegateObject"),"item")}var RI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return Lh(t,e),t.prototype.isItemIgnore=function(e,t){return!!this.ignoreListItemStates.filter((function(n){return t.hasState(e,n)})).length},t.prototype.setStateByComponent=function(e,t,n){var r=this.context.view,i=e.get("field"),a=Fw(r);this.setElementsStateByItem(a,i,t,n)},t.prototype.setStateByElement=function(e,t){this.setElementState(e,t)},t.prototype.isMathItem=function(e,t,n){var r=Yw(this.context.view,t),i=Pw(e,t);return!Uh(i)&&n.name===r.getText(i)},t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;Xh(e,(function(e){i.isMathItem(e,t,n)&&e.setState(i.stateName,r)}))},t.prototype.setStateEnable=function(e){var t=Sw(this.context);if(t)_w(this.context)&&this.setStateByElement(t,e);else{var n=kw(this.context);if(Aw(n)){var r=n.item,i=n.component;if(r&&i&&!this.isItemIgnore(r,i)){var a=this.context.event.gEvent;if(a&&a.fromShape&&a.toShape&&PI(a.fromShape)===PI(a.toShape))return;this.setStateByComponent(i,r,e)}}}},t.prototype.toggle=function(){var e=Sw(this.context);if(e){var t=e.hasState(this.stateName);this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(LI),DI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Lh(t,e),t.prototype.active=function(){this.setState()},t}(RI),BI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={},t}return Lh(t,e),t.prototype.getColorScale=function(e,t){var n=t.geometry.getAttribute("color");return n?e.getScaleByField(n.getFields()[0]):null},t.prototype.getLinkPath=function(e,t){var n=this.context.view.getCoordinate().isTransposed,r=e.shape.getCanvasBBox(),i=t.shape.getCanvasBBox();return n?[["M",r.minX,r.minY],["L",i.minX,i.maxY],["L",i.maxX,i.maxY],["L",r.maxX,r.minY],["Z"]]:[["M",r.maxX,r.minY],["L",i.minX,i.minY],["L",i.minX,i.maxY],["L",r.maxX,r.maxY],["Z"]]},t.prototype.addLinkShape=function(e,t,n,r){var i={opacity:.4,fill:t.shape.attr("fill")};e.addShape({type:"path",attrs:Ph(Ph({},Yp({},i,Yh(r)?r(i,t):r)),{path:this.getLinkPath(t,n)})})},t.prototype.linkByElement=function(e,t){var n=this,r=this.context.view,i=this.getColorScale(r,e);if(i){var a=Pw(e,i.field);if(!this.cache[a]){var o=function(e,t,n){return Fw(e).filter((function(e){return Pw(e,t)===n}))}(r,i.field,a),s=this.linkGroup.addGroup();this.cache[a]=s;var l=o.length;Xh(o,(function(e,r){if(r<l-1){var i=o[r+1];n.addLinkShape(s,e,i,t)}}))}}},t.prototype.removeLink=function(e){var t=this.getColorScale(this.context.view,e);if(t){var n=Pw(e,t.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},t.prototype.link=function(e){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var n=Sw(t);n&&this.linkByElement(n,null==e?void 0:e.style)},t.prototype.unlink=function(){var e=Sw(this.context);e&&this.removeLink(e)},t.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},t}(pw),zI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return Lh(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},t.prototype.getIntersectElements=function(){var e=null;if(Iw(this.context))e=Mw(this.context,10);else{var t=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!t||!n)return;var r={minX:Math.min(t.x,n.x),minY:Math.min(t.y,n.y),maxX:Math.max(t.x,n.x),maxY:Math.max(t.y,n.y)};e=Rw(this.context.view,r)}return e},t.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var t=Fw(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,e):this.setElementsState(n,e,t):this.clear()}},t.prototype.setSiblingsStateByRecord=function(e,t){var n=this,r=this.context.view,i=jw(r),a=e.map((function(e){return e.getModel().data})),o=r.getXScale().field,s=r.getYScales()[0].field;Xh(i,(function(e){var r=Fw(e),i=r.filter((function(e){var t=e.getModel().data;return $w(a,t,o,s)}));n.setElementsState(i,t,r)}))},t.prototype.setSiblingsState=function(e){var t=this,n=jw(this.context.view);Iw(this.context)&&Xh(n,(function(n){var r=Fw(n),i=Nw(t.context,n,10);i&&i.length?t.setElementsState(i,e,r):t.clearViewState(n)}))},t.prototype.setElementsState=function(e,t,n){var r=this;Xh(n,(function(n){e.includes(n)?r.setElementState(n,t):r.setElementState(n,!1)}))},t.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},t.prototype.clear=function(){var e=this,t=this.context.view;this.effectSiblings?Xh(jw(t),(function(t){e.clearViewState(t)})):this.clearViewState(t)},t}(LI),HI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Lh(t,e),t.prototype.active=function(){this.setState()},t}(zI),jI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.setStateEnable=function(e){var t=Sw(this.context);if(t){if(!_w(this.context))return;e?(this.clear(),this.setElementState(t,!0)):this.hasState(t)&&this.setElementState(t,!1)}},t.prototype.toggle=function(){var e=Sw(this.context);if(e){var t=this.hasState(e);t||this.clear(),this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(LI),GI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Lh(t,e),t.prototype.active=function(){this.setState()},t}(jI);function $I(e){Xh(Fw(e),(function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("inactive")&&e.setState("inactive",!1)}))}function YI(e,t,n){Xh(e,(function(e){t(e)?(e.hasState("inactive")&&e.setState("inactive",!1),e.setState("active",n)):(e.hasState("active")&&e.setState("active",!1),e.setState("inactive",n))}))}var UI,VI,WI=Cd.INACTIVE,XI=Cd.ACTIVE,qI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName=XI,t}return Lh(t,e),t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;this.setHighlightBy(e,(function(e){return i.isMathItem(e,t,n)}),r)},t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(WI)&&e.setState(WI,!1),e.setState(XI,!0)):e.hasState(XI)||e.setState(WI,!0)},t.prototype.setHighlightBy=function(e,t,n){var r=this;if(n)Xh(e,(function(e){r.setElementHighlight(e,t)}));else{var i=Lw(this.context.view,XI),a=!0;Xh(i,(function(e){if(!t(e))return a=!1,!1})),a?this.clear():Xh(e,(function(e){t(e)&&(e.hasState(XI)&&e.setState(XI,!1),e.setState(WI,!0))}))}},t.prototype.setElementState=function(e,t){var n=Fw(this.context.view);this.setHighlightBy(n,(function(t){return e===t}),t)},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){$I(this.context.view)},t}(RI),KI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=e.geometry.getAttribute("color");if(r){var i=n.getScaleByField(r.getFields()[0]),a=Pw(e,i.field),o=Fw(n),s=o.filter((function(e){return Pw(e,i.field)===a}));this.setHighlightBy(o,(function(e){return s.includes(e)}),t)}},t}(qI),QI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(WI)&&e.setState(WI,!1),e.setState(XI,!0)):(e.setState(WI,!0),e.hasState(XI)&&e.setState(XI,!1))},t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=n.getXScale(),i=Pw(e,r.field),a=Fw(n),o=a.filter((function(e){return Pw(e,r.field)===i}));this.setHighlightBy(a,(function(e){return o.includes(e)}),t)},t.prototype.toggle=function(){var e=Sw(this.context);if(e){var t=e.hasState(this.stateName);this.setStateByElement(e,!t)}},t}(qI);(VI=UI||(UI={})).BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",VI.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",VI.BEFORE_CLEAR="element-range-highlight:beforeclear",VI.AFTER_CLEAR="element-range-highlight:afterclear";var ZI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Lh(t,e),t.prototype.clearViewState=function(e){$I(e)},t.prototype.highlight=function(){var e=this.context,t=e.view,n={view:t,event:e.event,highlightElements:this.getIntersectElements()};t.emit(UI.BEFORE_HIGHLIGHT,NS.fromData(t,UI.BEFORE_HIGHLIGHT,n)),this.setState(),t.emit(UI.AFTER_HIGHLIGHT,NS.fromData(t,UI.AFTER_HIGHLIGHT,n))},t.prototype.clear=function(){var t=this.context.view;t.emit(UI.BEFORE_CLEAR,NS.fromData(t,UI.BEFORE_CLEAR,{})),e.prototype.clear.call(this),t.emit(UI.AFTER_CLEAR,NS.fromData(t,UI.AFTER_CLEAR,{}))},t.prototype.setElementsState=function(e,t,n){YI(n,(function(t){return e.indexOf(t)>=0}),t)},t}(zI),JI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Lh(t,e),t.prototype.highlight=function(){this.setState()},t.prototype.setElementState=function(e,t){YI(Fw(this.context.view),(function(t){return e===t}),t)},t.prototype.clear=function(){$I(this.context.view)},t}(jI),eM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Lh(t,e),t.prototype.selected=function(){this.setState()},t}(zI),tM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Lh(t,e),t.prototype.selected=function(){this.setState()},t}(RI),nM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Lh(t,e),t.prototype.selected=function(){this.setState()},t}(jI),rM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return Lh(t,e),t.prototype.getTriggerListInfo=function(){var e=kw(this.context),t=null;return Aw(e)&&(t={item:e.item,list:e.component}),t},t.prototype.getAllowComponents=function(){var e=this,t=Bw(this.context.view),n=[];return Xh(t,(function(t){t.isList()&&e.allowSetStateByElement(t)&&n.push(t)})),n},t.prototype.hasState=function(e,t){return e.hasState(t,this.stateName)},t.prototype.clearAllComponentsState=function(){var e=this;Xh(this.getAllowComponents(),(function(t){t.clearItemsState(e.stateName)}))},t.prototype.allowSetStateByElement=function(e){var t=e.get("field");if(!t)return!1;if(this.cfg&&this.cfg.componentNames){var n=e.get("name");if(-1===this.cfg.componentNames.indexOf(n))return!1}var r=Yw(this.context.view,t);return r&&r.isCategory},t.prototype.allowSetStateByItem=function(e,t){var n=this.ignoreItemStates;return!n.length||0===n.filter((function(n){return t.hasState(e,n)})).length},t.prototype.setStateByElement=function(e,t,n){var r=e.get("field"),i=Yw(this.context.view,r),a=Pw(t,r),o=i.getText(a);this.setItemsState(e,o,n)},t.prototype.setStateEnable=function(e){var t=this,n=Sw(this.context);if(n){Xh(this.getAllowComponents(),(function(r){t.setStateByElement(r,n,e)}))}else{var r=kw(this.context);if(Aw(r)){var i=r.item,a=r.component;this.allowSetStateByElement(a)&&this.allowSetStateByItem(i,a)&&this.setItemState(a,i,e)}}},t.prototype.setItemsState=function(e,t,n){var r=this;Xh(e.getItems(),(function(i){i.name===t&&r.setItemState(e,i,n)}))},t.prototype.setItemState=function(e,t,n){e.setItemState(t,this.stateName,n)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.reset=function(){this.setStateEnable(!1)},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item,r=this.hasState(t,n);this.setItemState(t,n,!r)}},t.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},t}(pw),iM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Lh(t,e),t.prototype.active=function(){this.setState()},t}(rM);var aM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t.ignoreItemStates=["unchecked"],t}return Lh(t,e),t.prototype.setItemsState=function(e,t,n){this.setHighlightBy(e,(function(e){return e.name===t}),n)},t.prototype.setItemState=function(e,t,n){e.getItems(),this.setHighlightBy(e,(function(e){return e===t}),n)},t.prototype.setHighlightBy=function(e,t,n){var r=e.getItems();if(n)Xh(r,(function(n){t(n)?(e.hasState(n,"inactive")&&e.setItemState(n,"inactive",!1),e.setItemState(n,"active",!0)):e.hasState(n,"active")||e.setItemState(n,"inactive",!0)}));else{var i=e.getItemsByState("active"),a=!0;Xh(i,(function(e){if(!t(e))return a=!1,!1})),a?this.clear():Xh(r,(function(n){t(n)&&(e.hasState(n,"active")&&e.setItemState(n,"active",!1),e.setItemState(n,"inactive",!0))}))}},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e,t=this.getTriggerListInfo();t?Xh((e=t.list).getItems(),(function(t){e.hasState(t,"active")&&e.setItemState(t,"active",!1),e.hasState(t,"inactive")&&e.setItemState(t,"inactive",!1)})):Xh(this.getAllowComponents(),(function(e){e.clearItemsState("active"),e.clearItemsState("inactive")}))},t}(rM),oM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Lh(t,e),t.prototype.selected=function(){this.setState()},t}(rM),sM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="unchecked",t}return Lh(t,e),t.prototype.unchecked=function(){this.setState()},t}(rM),lM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="checked",t}return Lh(t,e),t.prototype.setItemState=function(e,t,n){this.setCheckedBy(e,(function(e){return e===t}),n)},t.prototype.setCheckedBy=function(e,t,n){var r=e.getItems();n&&Xh(r,(function(n){t(n)?(e.hasState(n,"unchecked")&&e.setItemState(n,"unchecked",!1),e.setItemState(n,"checked",!0)):e.hasState(n,"checked")||e.setItemState(n,"unchecked",!0)}))},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item;!fp(t.getItems(),(function(e){return t.hasState(e,"unchecked")}))||t.hasState(n,"unchecked")?this.setItemState(t,n,!0):this.reset()}},t.prototype.checked=function(){this.setState()},t.prototype.reset=function(){Xh(this.getAllowComponents(),(function(e){e.clearItemsState("checked"),e.clearItemsState("unchecked")}))},t}(rM),cM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return Lh(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.emitEvent=function(e){var t="mask:".concat(e),n=this.context.view,r=this.context.event;n.emit(t,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},t.prototype.createMask=function(){var e=this.context.view,t=this.getMaskAttrs();return e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:Ph({fill:"#C5D4EB",opacity:.3},t)})},t.prototype.getMaskPath=function(){return[]},t.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},t.prototype.start=function(e){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(null==e?void 0:e.maskStyle),this.emitEvent("start")},t.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},t.prototype.move=function(){if(this.moving&&this.maskShape){var e=this.getCurrentPoint(),t=this.preMovePoint,n=e.x-t.x,r=e.y-t.y;Xh(this.points,(function(e){e.x+=n,e.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e}},t.prototype.updateMask=function(e){var t=Yp({},this.getMaskAttrs(),e);this.maskShape.attr(t)},t.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},t.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},t.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},t.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},t.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,e.prototype.destroy.call(this)},t}(pw),uM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="circle",t}return Lh(t,e),t.prototype.getMaskAttrs=function(){var e=this.points,t=pp(this.points),n=0,r=0,i=0;if(e.length){var a=e[0];n=zw(a,t)/2,r=(t.x+a.x)/2,i=(t.y+a.y)/2}return{x:r,y:i,r:n}},t}(cM),hM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="rect",t}return Lh(t,e),t.prototype.getRegion=function(){var e=this.points;return{start:hp(e),end:pp(e)}},t.prototype.getMaskAttrs=function(){var e=this.getRegion(),t=e.start,n=e.end;return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),width:Math.abs(n.x-t.x),height:Math.abs(n.y-t.y)}},t}(cM);function pM(e){e.x=yp(e.x,0,1),e.y=yp(e.y,0,1)}var dM,fM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return Lh(t,e),t.prototype.getRegion=function(){var e=null,t=null,n=this.points,r=this.dim,i=this.context.view.getCoordinate(),a=i.invert(hp(n)),o=i.invert(pp(n));return this.inPlot&&(pM(a),pM(o)),"x"===r?(e=i.convert({x:a.x,y:0}),t=i.convert({x:o.x,y:1})):(e=i.convert({x:0,y:a.y}),t=i.convert({x:1,y:o.y})),{start:e,end:t}},t}(hM),mM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getMaskPath=function(){var e=this.points,t=[];return e.length&&(Xh(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t.push(["L",e[0].x,e[0].y])),t},t.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},t.prototype.addPoint=function(){this.resize()},t}(cM),gM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getMaskPath=function(){return function(e,t){if(e.length<=2)return bw(e,!1);var n=e[0],r=[];Xh(e,(function(e){r.push(e.x),r.push(e.y)}));var i=Ew(r,t,null);return i.unshift(["M",n.x,n.y]),i}(this.points,!0)},t}(mM),vM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.setCursor=function(e){this.context.view.getCanvas().setCursor(e)},t.prototype.default=function(){this.setCursor("default")},t.prototype.pointer=function(){this.setCursor("pointer")},t.prototype.move=function(){this.setCursor("move")},t.prototype.crosshair=function(){this.setCursor("crosshair")},t.prototype.wait=function(){this.setCursor("wait")},t.prototype.help=function(){this.setCursor("help")},t.prototype.text=function(){this.setCursor("text")},t.prototype.eResize=function(){this.setCursor("e-resize")},t.prototype.wResize=function(){this.setCursor("w-resize")},t.prototype.nResize=function(){this.setCursor("n-resize")},t.prototype.sResize=function(){this.setCursor("s-resize")},t.prototype.neResize=function(){this.setCursor("ne-resize")},t.prototype.nwResize=function(){this.setCursor("nw-resize")},t.prototype.seResize=function(){this.setCursor("se-resize")},t.prototype.swResize=function(){this.setCursor("sw-resize")},t.prototype.nsResize=function(){this.setCursor("ns-resize")},t.prototype.ewResize=function(){this.setCursor("ew-resize")},t}(pw),yM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.filterView=function(e,t,n){var r=this;e.getScaleByField(t)&&e.filter(t,n),e.views&&e.views.length&&Xh(e.views,(function(e){r.filterView(e,t,n)}))},t.prototype.filter=function(){var e=kw(this.context);if(e){var t=this.context.view,n=e.component,r=n.get("field");if(Aw(e)){if(r){var i=n.getItemsByState("unchecked"),a=Yw(t,r),o=i.map((function(e){return e.name}));o.length?this.filterView(t,r,(function(e){var t=a.getText(e);return!o.includes(t)})):this.filterView(t,r,null),t.render(!0)}}else if(Ow(e)){var s=n.getValue(),l=s[0],c=s[1];this.filterView(t,r,(function(e){return e>=l&&e<=c})),t.render(!0)}}},t}(pw);function xM(e,t,n,r){var i=Math.min(n[t],r[t]),a=Math.max(n[t],r[t]),o=e.range,s=o[0],l=o[1];if(i<s&&(i=s),a>l&&(a=l),i===l&&a===l)return null;var c=e.invert(i),u=e.invert(a);if(e.isCategory){var h=e.values.indexOf(c),p=e.values.indexOf(u),d=e.values.slice(h,p+1);return function(e){return d.includes(e)}}return function(e){return e>=c&&e<=u}}!function(e){e.FILTER="brush-filter-processing",e.RESET="brush-filter-reset",e.BEFORE_FILTER="brush-filter:beforefilter",e.AFTER_FILTER="brush-filter:afterfilter",e.BEFORE_RESET="brush-filter:beforereset",e.AFTER_RESET="brush-filter:afterreset"}(dM||(dM={}));var EM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return Lh(t,e),t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},t.prototype.filter=function(){var e,t;if(Iw(this.context)){var n=this.context.event.target.getCanvasBBox();e={x:n.x,y:n.y},t={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;e=this.startPoint,t=this.context.getCurrentPoint()}if(!(Math.abs(e.x-t.x)<5||Math.abs(e.x-t.y)<5)){var r=this.context,i=r.view,a={view:i,event:r.event,dims:this.dims};i.emit(dM.BEFORE_FILTER,NS.fromData(i,dM.BEFORE_FILTER,a));var o=i.getCoordinate(),s=o.invert(t),l=o.invert(e);if(this.hasDim("x")){var c=i.getXScale(),u=xM(c,"x",s,l);this.filterView(i,c.field,u)}if(this.hasDim("y")){var h=i.getYScales()[0];u=xM(h,"y",s,l);this.filterView(i,h.field,u)}this.reRender(i,{source:dM.FILTER}),i.emit(dM.AFTER_FILTER,NS.fromData(i,dM.AFTER_FILTER,a))}},t.prototype.end=function(){this.isStarted=!1},t.prototype.reset=function(){var e=this.context.view;if(e.emit(dM.BEFORE_RESET,NS.fromData(e,dM.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var t=e.getXScale();this.filterView(e,t.field,null)}if(this.hasDim("y")){var n=e.getYScales()[0];this.filterView(e,n.field,null)}this.reRender(e,{source:dM.RESET}),e.emit(dM.AFTER_RESET,NS.fromData(e,dM.AFTER_RESET,{}))},t.prototype.filterView=function(e,t,n){e.filter(t,n)},t.prototype.reRender=function(e,t){e.render(!0,t)},t}(pw),bM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.filterView=function(e,t,n){Xh(jw(e),(function(e){e.filter(t,n)}))},t.prototype.reRender=function(e){Xh(jw(e),(function(e){e.render(!0)}))},t}(EM),CM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.filter=function(){var e=kw(this.context),t=this.context.view,n=Fw(t);if(Iw(this.context)){var r=Mw(this.context,10);r&&Xh(n,(function(e){r.includes(e)?e.show():e.hide()}))}else if(e){var i=e.component,a=i.get("field");if(Aw(e)){if(a){var o=i.getItemsByState("unchecked"),s=Yw(t,a),l=o.map((function(e){return e.name}));Xh(n,(function(e){var t=Pw(e,a),n=s.getText(t);l.indexOf(n)>=0?e.hide():e.show()}))}}else if(Ow(e)){var c=i.getValue(),u=c[0],h=c[1];Xh(n,(function(e){var t=Pw(e,a);t>=u&&t<=h?e.show():e.hide()}))}}},t.prototype.clear=function(){Xh(Fw(this.context.view),(function(e){e.show()}))},t.prototype.reset=function(){this.clear()},t}(pw),TM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.byRecord=!1,t}return Lh(t,e),t.prototype.filter=function(){Iw(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},t.prototype.filterByRecord=function(){var e=this.context.view,t=Mw(this.context,10);if(t){var n=e.getXScale().field,r=e.getYScales()[0].field,i=t.map((function(e){return e.getModel().data}));Xh(jw(e),(function(e){Xh(Fw(e),(function(e){var t=e.getModel().data;$w(i,t,n,r)?e.show():e.hide()}))}))}},t.prototype.filterByBBox=function(){var e=this;Xh(jw(this.context.view),(function(t){var n=Nw(e.context,t,10),r=Fw(t);n&&Xh(r,(function(e){n.includes(e)?e.show():e.hide()}))}))},t.prototype.reset=function(){Xh(jw(this.context.view),(function(e){Xh(Fw(e),(function(e){e.show()}))}))},t}(pw),wM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return Lh(t,e),t.prototype.getButtonCfg=function(){return Yp(this.buttonCfg,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=t.addShape({type:"text",name:"button-text",attrs:Ph({text:e.text},e.textStyle)}).getBBox(),r=AS(e.padding),i=t.addShape({type:"rect",name:"button-rect",attrs:Ph({x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},e.style)});i.toBack(),t.on("mouseenter",(function(){i.attr(e.activeStyle)})),t.on("mouseleave",(function(){i.attr(e.style)})),this.buttonGroup=t},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=am(null,[["t",e.x-n.width-10,e.y+n.height+5]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(pw),SM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return Lh(t,e),t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},t.prototype.drag=function(){if(this.startPoint){var e=this.context.getCurrentPoint(),t=this.context.view,n=this.context.event;this.dragStart?t.emit("drag",{target:n.target,x:n.x,y:n.y}):zw(e,this.startPoint)>4&&(t.emit("dragstart",{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},t.prototype.end=function(){if(this.dragStart){var e=this.context.view,t=this.context.event;e.emit("dragend",{target:t.target,x:t.x,y:t.y})}this.starting=!1,this.dragStart=!1},t}(pw),kM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return Lh(t,e),t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},t.prototype.move=function(){if(this.starting){var e=this.startPoint,t=this.context.getCurrentPoint();if(zw(e,t)>5&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,r=am(this.startMatrix,[["t",t.x-e.x,t.y-e.y]]);n.backgroundGroup.setMatrix(r),n.foregroundGroup.setMatrix(r),n.middleGroup.setMatrix(r)}}},t.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},t.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},t}(pw),_M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return Lh(t,e),t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.getScale=function(e){var t=this.context.view;return"x"===e?t.getXScale():t.getYScales()[0]},t.prototype.resetDim=function(e){var t=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var n=this.getScale(e);t.scale(n.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},t.prototype.reset=function(){this.resetDim("x"),this.resetDim("y"),this.context.view.render(!0)},t}(pw),AM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return Lh(t,e),t.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0,Xh(this.dims,(function(t){var n=e.getScale(t),r=n.min,i=n.max,a=n.values;e.startCache[t]={min:r,max:i,values:a}}))},t.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},t.prototype.translate=function(){var e=this;if(this.starting){var t=this.startPoint,n=this.context.view.getCoordinate(),r=this.context.getCurrentPoint(),i=n.invert(t),a=n.invert(r),o=a.x-i.x,s=a.y-i.y,l=this.context.view;Xh(this.dims,(function(t){e.translateDim(t,{x:-1*o,y:-1*s})})),l.render(!0)}},t.prototype.translateDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.translateLinear(e,n,t)}},t.prototype.translateLinear=function(e,t,n){var r=this.context.view,i=this.startCache[e],a=i.min,o=i.max,s=o-a,l=n[e]*s;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:a,max:o}),r.scale(t.field,{nice:!1,min:a+l,max:o+l})},t.prototype.reset=function(){e.prototype.reset.call(this),this.startPoint=null,this.starting=!1},t}(_M),OM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zoomRatio=.05,t}return Lh(t,e),t.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},t.prototype.zoom=function(e){var t=this;Xh(this.dims,(function(n){t.zoomDim(n,e)})),this.context.view.render(!0)},t.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},t.prototype.zoomDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.zoomLinear(e,n,t)}},t.prototype.zoomLinear=function(e,t,n){var r=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:t.min,max:t.max});var i=this.cacheScaleDefs[e],a=i.max-i.min,o=t.min,s=t.max,l=n*a,c=o-l,u=s+l,h=(u-c)/a;u>c&&h<100&&h>.01&&r.scale(t.field,{nice:!1,min:o-l,max:s+l})},t}(_M);var IM,MM,NM,FM,LM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.scroll=function(e){var t=this.context,n=t.view,r=t.event;if(n.getOptions().scrollbar){var i=(null==e?void 0:e.wheelDelta)||1,a=n.getController("scrollbar"),o=n.getXScale(),s=n.getOptions().data,l=sd(up(s,o.field)),c=sd(o.values),u=a.getValue(),h=Math.floor((l-c)*u)+(function(e){return e.gEvent.originalEvent.deltaY>0}(r)?i:-i),p=yp(h/(l-c)+i/(l-c)/1e4,0,1);a.setValue(p)}},t}(pw);function PM(e){return e.isInPlot()}function RM(e){return e.gEvent.preventDefault(),e.gEvent.originalEvent.deltaY>0}function DM(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.reduce((function(e,t){return t(e)}),t)}}function BM(e,t){var n={};return null!==e&&"object"==typeof e&&t.forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n}function zM(e,t){return t?op(t,(function(e,t,n){return e.replace(new RegExp("{\\s*"+n+"\\s*}","g"),t)}),e):e}IM="dark",MM=iS(Jk),vS[Op(IM)]=gS(MM),Fd("canvas",cA),Fd("svg",QA),zS("Polygon",vO),zS("Interval",pO),zS("Schema",yO),zS("Path",ZA),zS("Point",gO),zS("Line",dO),zS("Area",nO),zS("Edge",rO),zS("Heatmap",iO),zS("Violin",xO),ek("base",bk),ek("interval",AO),ek("pie",MO),ek("polar",IO),tk("overlap",(function(e,t,n,r){var i=new FO;Xh(t,(function(e){for(var t=e.find((function(e){return"text"===e.get("type")})),n=t.attr(),r=n.x,a=n.y,o=!1,s=0;s<=8;s++){var l=LO(t,r,a,s);if(i.hasGap(l)){i.fillGap(l),o=!0;break}}o||e.remove(!0)})),i.destroy()})),tk("distribute",(function(e,t,n,r){if(e.length&&t.length){var i=e[0]?e[0].offset:0,a=t[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=2*(o+i)+28,c={start:a.start,end:a.end},u=[[],[]];e.forEach((function(e){e&&("right"===e.textAlign?u[0].push(e):u[1].push(e))})),u.forEach((function(e,n){var r=l/14;e.length>r&&(e.sort((function(e,t){return t["..percent"]-e["..percent"]})),e.splice(r,e.length-r)),e.sort((function(e,t){return e.y-t.y})),function(e,t,n,r,i,a){var o,s=!0,l=r.start,c=r.end,u=Math.min(l.y,c.y),h=Math.abs(l.y-c.y),p=0,d=Number.MIN_VALUE,f=t.map((function(e){return e.y>p&&(p=e.y),e.y<d&&(d=e.y),{size:n,targets:[e.y-u]}}));for(d-=u,p-u>h&&(h=p-u);s;)for(f.forEach((function(e){var t=(Math.min.apply(d,e.targets)+Math.max.apply(d,e.targets))/2;e.pos=Math.min(Math.max(d,t-e.size/2),h-e.size)})),s=!1,o=f.length;o--;)if(o>0){var m=f[o-1],g=f[o];m.pos+m.size>g.pos&&(m.size+=g.size,m.targets=m.targets.concat(g.targets),m.pos+m.size>h&&(m.pos=h-m.size),f.splice(o,1),s=!0)}o=0,f.forEach((function(e){var r=u+n/2;e.targets.forEach((function(){t[o].y=e.pos+r,r+=n,o++}))}));for(var v={},y=0,x=e;y<x.length;y++){var E=x[y];v[E.get("id")]=E}t.forEach((function(e){var t=e.r*e.r,n=Math.pow(Math.abs(e.y-i.y),2);if(t<n)e.x=i.x;else{var r=Math.sqrt(t-n);e.x=a?i.x+r:i.x-r}var o=v[e.id];o.attr("x",e.x),o.attr("y",e.y);var s=Jh(o.getChildren(),(function(e){return"text"===e.get("type")}));s&&(s.attr("y",e.y),s.attr("x",e.x))}))}(t,e,14,c,s,n)}))}Xh(e,(function(e){if(e&&e.labelLine){var t=e.offset,n=e.angle,r=RT(s.x,s.y,o,n),i=RT(s.x,s.y,o+t/2,n),a=e.x+Zp(e,"offsetX",0),l=e.y+Zp(e,"offsetY",0),c={x:a-4*Math.cos(n),y:l-4*Math.sin(n)};Wh(e.labelLine)||(e.labelLine={}),e.labelLine.path=["M ".concat(r.x),"".concat(r.y," Q").concat(i.x),"".concat(i.y," ").concat(c.x),c.y].join(",")}}))}})),tk("fixed-overlap",(function(e,t,n,r){var i=new FO;Xh(t,(function(e){(function(e,t,n){void 0===n&&(n=100);var r,i=e.attr(),a=i.x,o=i.y,s=e.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),c=1,u=0,h=0;if(t.hasGap(s))return t.fillGap(s),!0;for(var p,d,f=!1,m=0,g={};Math.min(Math.abs(u),Math.abs(h))<l&&m<n;)if(p=c+=-1,d=void 0,h=~~(r=[(d=.1*p)*Math.cos(d),d*Math.sin(d)])[1],((u=~~r[0])||h)&&!g["".concat(u,"-").concat(h)]&&(e.attr({x:a+u,y:o+h}),u+h<0&&e.attr("textAlign","right"),m++,t.hasGap(e.getCanvasBBox()))){t.fillGap(e.getCanvasBBox()),f=!0,g["".concat(u,"-").concat(h)]=!0;break}return f})(e.find((function(e){return"text"===e.get("type")})),i)||e.remove(!0)})),i.destroy()})),tk("hide-overlap",(function(e,t,n,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i].get("visible"))for(var o=i+1;o<t.length;o++){var s=t[o];if(a&&s&&a!==s&&s.get("visible"))$O(gk(a,e[i],Zp(e[i],"background.padding")),gk(s,e[o],Zp(e[o],"background.padding")))&&t[o].set("visible",!1)}}})),tk("limit-in-shape",(function(e,t,n,r){Xh(t,(function(e,t){var r=e.getCanvasBBox(),i=n[t].getBBox();(r.minX<i.minX||r.minY<i.minY||r.maxX>i.maxX||r.maxY>i.maxY)&&e.remove(!0)}))})),tk("limit-in-canvas",(function(e,t,n,r){Xh(t,(function(e){var t=r.minX,n=r.minY,i=r.maxX,a=r.maxY,o=e.getCanvasBBox(),s=o.minX,l=o.minY,c=o.maxX,u=o.maxY,h=o.x,p=o.y,d=o.width,f=o.height,m=h,g=p;(s<t||c<t)&&(m=t),(l<n||u<n)&&(g=n),s>i?m=i-d:c>i&&(m-=c-i),l>a?g=a-f:u>a&&(g-=u-a),m===h&&g===p||dk(e,m-h,g-p)}))})),tk("limit-in-plot",(function(e,t,n,r,i){if(!(t.length<=0)){var a=(null==i?void 0:i.direction)||["top","right","bottom","left"],o=(null==i?void 0:i.action)||"translate",s=(null==i?void 0:i.margin)||0,l=t[0].get("coordinate");if(l){var c=function(e,t){void 0===t&&(t=0);var n=e.start,r=e.end,i=e.getWidth(),a=e.getHeight(),o=Math.min(n.x,r.x),s=Math.min(n.y,r.y);return YT.fromRange(o-t,s-t,o+i+t,s+a+t)}(l,s),u=c.minX,h=c.minY,p=c.maxX,d=c.maxY;Xh(t,(function(e){var t=e.getCanvasBBox(),n=t.minX,r=t.minY,i=t.maxX,s=t.maxY,l=t.x,c=t.y,f=t.width,m=t.height,g=l,v=c;if(a.indexOf("left")>=0&&(n<u||i<u)&&(g=u),a.indexOf("top")>=0&&(r<h||s<h)&&(v=h),a.indexOf("right")>=0&&(n>p?g=p-f:i>p&&(g-=i-p)),a.indexOf("bottom")>=0&&(r>d?v=d-m:s>d&&(v-=s-d)),g!==l||v!==c){var y=g-l;if("translate"===o)dk(e,y,v-c);else if("ellipsis"===o){e.findAll((function(e){return"text"===e.get("type")})).forEach((function(e){var t=td(e.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),n=e.getCanvasBBox(),r=function(e,t,n){var r,i=QO("...",n);r=lp(e)?e:Ap(e);var a,o,s=t,l=[];if(QO(e,n)<=t)return e;for(;a=r.substr(0,16),!((o=QO(a,n))+i>s&&o>s);)if(l.push(a),s-=o,!(r=r.substr(16)))return l.join("");for(;a=r.substr(0,1),!((o=QO(a,n))+i>s);)if(l.push(a),s-=o,!(r=r.substr(1)))return l.join("");return"".concat(l.join(""),"...")}(e.attr("text"),n.width-Math.abs(y),t);e.attr("text",r)}))}else e.hide()}}))}}})),tk("pie-outer",(function(e,t,n,r){var i=jh(e,(function(e){return!Uh(e)})),a=t[0]&&t[0].get("coordinate");if(a){for(var o=a.getCenter(),s=a.getRadius(),l={},c=0,u=t;c<u.length;c++){var h=u[c];l[h.get("id")]=h}var p=Zp(i[0],"labelHeight",14),d=Zp(i[0],"offset",0);if(!(d<=0)){var f="right",m=gp(i,(function(e){return e.x<o.x?"left":f})),g=a.start,v=a.end,y=Math.min(2*(s+d+p),a.getHeight()),x=y/2,E={minX:g.x,maxX:v.x,minY:o.y-x,maxY:o.y+x};Xh(m,(function(e,t){var n=Math.floor(y/p);e.length>n&&(e.sort((function(e,t){return t.percent-e.percent})),Xh(e,(function(e,t){t+1>n&&(l[e.id].set("visible",!1),e.invisible=!0)}))),NO(e,p,E)})),Xh(m,(function(e,t){Xh(e,(function(e){var n=t===f,r=l[e.id].getChildByIndex(0);if(r){var i=s+d,c=e.y-o.y,u=Math.pow(i,2),h=Math.pow(c,2),p=u-h>0?u-h:0,m=Math.sqrt(p),g=Math.abs(Math.cos(e.angle)*i);e.x=n?o.x+Math.max(m,g):o.x-Math.max(m,g)}r&&(r.attr("y",e.y),r.attr("x",e.x)),function(e,t){var n=t.getCenter(),r=t.getRadius();if(e&&e.labelLine){var i=e.angle,a=e.offset,o=RT(n.x,n.y,r,i),s=e.x+Zp(e,"offsetX",0)*(Math.cos(i)>0?1:-1),l=e.y+Zp(e,"offsetY",0)*(Math.sin(i)>0?1:-1),c={x:s-4*Math.cos(i),y:l-4*Math.sin(i)},u=e.labelLine.smooth,h=[],p=c.x-n.x,d=c.y-n.y,f=Math.atan(d/p);if(p<0&&(f+=Math.PI),!1===u){Wh(e.labelLine)||(e.labelLine={});var m=0;(i<0&&i>-Math.PI/2||i>1.5*Math.PI)&&c.y>o.y&&(m=1),i>=0&&i<Math.PI/2&&c.y>o.y&&(m=1),i>=Math.PI/2&&i<Math.PI&&o.y>c.y&&(m=1),(i<-Math.PI/2||i>=Math.PI&&i<1.5*Math.PI)&&o.y>c.y&&(m=1);var g=a/2>4?4:Math.max(a/2-1,0),v=RT(n.x,n.y,r+g,i),y=RT(n.x,n.y,r+a/2,f);h.push("M ".concat(o.x," ").concat(o.y)),h.push("L ".concat(v.x," ").concat(v.y)),h.push("A ".concat(n.x," ").concat(n.y," 0 ").concat(0," ").concat(m," ").concat(y.x," ").concat(y.y)),h.push("L ".concat(c.x," ").concat(c.y))}else{v=RT(n.x,n.y,r+(a/2>4?4:Math.max(a/2-1,0)),i);var x=o.x<n.x?1:-1;h.push("M ".concat(c.x," ").concat(c.y));var E=(o.y-n.y)/(o.x-n.x),b=(c.y-n.y)/(c.x-n.x);Math.abs(E-b)>Math.pow(Math.E,-16)&&h.push.apply(h,["C",c.x+4*x,c.y,2*v.x-o.x,2*v.y-o.y,o.x,o.y]),h.push("L ".concat(o.x," ").concat(o.y))}e.labelLine.path=h.join(" ")}}(e,a)}))}))}}})),tk("adjust-color",(function(e,t,n){if(0!==n.length){var r=n[0].get("element").geometry.theme,i=r.labels||{},a=i.fillColorLight,o=i.fillColorDark;n.forEach((function(e,n){var i=t[n].find((function(e){return"text"===e.get("type")})),s=YT.fromObject(e.getBBox()),l=YT.fromObject(i.getCanvasBBox()),c=!s.contains(l),u=function(e){var t=cy.toRGB(e).toUpperCase();if(UO[t])return UO[t];var n=cy.rgb2arr(t);return(299*n[0]+587*n[1]+114*n[2])/1e3<128}(e.attr("fill"));c?i.attr(r.overflowLabels.style):u?a&&i.attr("fill",a):o&&i.attr("fill",o)}))}})),tk("interval-adjust-position",(function(e,t,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),a=null==i?void 0:i.geometry;if(a&&"interval"===a.type)VO(a,t,n)&&n.forEach((function(e,n){var r=t[n];!function(e,t,n){var r=e.coordinate,i=YT.fromObject(n.getBBox()),a=mk(t);r.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:"center"}):a.attr({y:i.minY+i.height/2,textBaseline:"middle"})}(a,r,e)}))}})),tk("interval-hide-overlap",(function(e,t,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),a=null==i?void 0:i.geometry;if(a&&"interval"===a.type){var o,s=function(e){var t=[],n=Math.max(Math.floor(e.length/500),1);return Xh(e,(function(e,r){r%n==0?t.push(e):e.set("visible",!1)})),t}(t),l=a.getXYFields()[0],c=[],u=[],h=gp(s,(function(e){return e.get("data")[l]})),p=cp(Kp(s,(function(e){return e.get("data")[l]})));s.forEach((function(e){e.set("visible",!0)}));var d=function(e){e&&(e.length&&u.push(e.pop()),u.push.apply(u,e))};for(sd(p)>0&&(o=p.shift(),d(h[o])),sd(p)>0&&(o=p.pop(),d(h[o])),Xh(p.reverse(),(function(e){d(h[e])}));u.length>0;){var f=u.shift();f.get("visible")&&(vk(f,c)?f.set("visible",!1):c.push(f))}}}})),tk("point-adjust-position",(function(e,t,n,r,i){var a,o;if(0!==n.length){var s=null===(a=n[0])||void 0===a?void 0:a.get("element"),l=null==s?void 0:s.geometry;if(l&&"point"===l.type){var c=l.getXYFields(),u=c[0],h=c[1],p=gp(t,(function(e){return e.get("data")[u]})),d=[],f=i&&i.offset||(null===(o=e[0])||void 0===o?void 0:o.offset)||12;Kp(qh(p).reverse(),(function(e){for(var t=function(e,t){var n=e.getXYFields()[1],r=[],i=t.sort((function(e,t){return e.get("data")[n]-e.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}(l,p[e]);t.length;){var n=t.shift(),r=mk(n);if(WO(d,n,(function(e,t){return e.get("data")[u]===t.get("data")[u]&&e.get("data")[h]===t.get("data")[h]})))r.set("visible",!1);else{var i=!1;XO(d,n)&&(r.attr("y",r.attr("y")+2*f),i=XO(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),tk("pie-spider",(function(e,t,n,r){var i=t[0]&&t[0].get("coordinate");if(i){for(var a=i.getCenter(),o=i.getRadius(),s={},l=0,c=t;l<c.length;l++){var u=c[l];s[u.get("id")]=u}var h=Zp(e[0],"labelHeight",14),p=Math.max(Zp(e[0],"offset",0),4);Xh(e,(function(e){if(Zp(s,[e.id])){var t=e.x>a.x||e.x===a.x&&e.y>a.y,n=Uh(e.offsetX)?4:e.offsetX,r=RT(a.x,a.y,o+4,e.angle),i=p+n;e.x=a.x+(t?1:-1)*(o+i),e.y=r.y}}));var d=i.start,f=i.end,m="right",g=gp(e,(function(e){return e.x<a.x?"left":m})),v=2*(o+p)+h;Xh(g,(function(e){var t=e.length*h;t>v&&(v=Math.min(t,Math.abs(d.y-f.y)))}));var y={minX:d.x,maxX:f.x,minY:a.y-v/2,maxY:a.y+v/2};Xh(g,(function(e,t){var n=v/h;e.length>n&&(e.sort((function(e,t){return t.percent-e.percent})),Xh(e,(function(e,t){t>n&&(s[e.id].set("visible",!1),e.invisible=!0)}))),NO(e,h,y)}));var x=y.minY,E=y.maxY;Xh(g,(function(e,t){var n=t===m;Xh(e,(function(e){var t=Zp(s,e&&[e.id]);if(t)if(e.y<x||e.y>E)t.set("visible",!1);else{var r=t.getChildByIndex(0),a=r.getCanvasBBox(),o=n?a.x:a.maxX,l=a.y+a.height/2;dk(r,e.x-o,e.y-l),e.labelLine&&function(e,t,n){var r,i=t.getCenter(),a=t.getRadius(),o={x:e.x-(n?4:-4),y:e.y},s=RT(i.x,i.y,a+4,e.angle),l={x:o.x,y:o.y},c={x:s.x,y:s.y},u=RT(i.x,i.y,a,e.angle);if(o.y!==s.y){var h=n?4:-4;l.y=o.y,e.angle<0&&e.angle>=-Math.PI/2&&(l.x=Math.max(s.x,o.x-h),o.y<s.y?c.y=l.y:(c.y=s.y,c.x=Math.max(c.x,l.x-h))),e.angle>0&&e.angle<Math.PI/2&&(l.x=Math.max(s.x,o.x-h),o.y>s.y?c.y=l.y:(c.y=s.y,c.x=Math.max(c.x,l.x-h))),e.angle>Math.PI/2&&(l.x=Math.min(s.x,o.x-h),o.y>s.y?c.y=l.y:(c.y=s.y,c.x=Math.min(c.x,l.x-h))),e.angle<-Math.PI/2&&(l.x=Math.min(s.x,o.x-h),o.y<s.y?c.y=l.y:(c.y=s.y,c.x=Math.min(c.x,l.x-h)))}r=["M ".concat(o.x,",").concat(o.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(c.x,",").concat(c.y),"L ".concat(s.x,",").concat(s.y),"L ".concat(u.x,",").concat(u.y)].join(" "),e.labelLine=Yp({},e.labelLine,{path:r})}(e,i,n)}}))}))}})),tk("path-adjust-position",(function(e,t,n,r,i){var a,o;if(0!==n.length){var s=null===(a=n[0])||void 0===a?void 0:a.get("element"),l=null==s?void 0:s.geometry;if(l&&!(["path","line","area"].indexOf(l.type)<0)){var c=l.getXYFields(),u=c[0],h=c[1],p=gp(t,(function(e){return e.get("data")[u]})),d=[],f=i&&i.offset||(null===(o=e[0])||void 0===o?void 0:o.offset)||12;Kp(qh(p).reverse(),(function(e){for(var t=function(e,t){var n=e.getXYFields()[1],r=[],i=t.sort((function(e,t){return e.get("data")[n]-e.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}(l,p[e]);t.length;){var n=t.shift(),r=mk(n);if(qO(d,n,(function(e,t){return e.get("data")[u]===t.get("data")[u]&&e.get("data")[h]===t.get("data")[h]})))r.set("visible",!1);else{var i=!1;KO(d,n)&&(r.attr("y",r.attr("y")+2*f),i=KO(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),US("fade-in",(function(e,t,n){var r={fillOpacity:Uh(e.attr("fillOpacity"))?1:e.attr("fillOpacity"),strokeOpacity:Uh(e.attr("strokeOpacity"))?1:e.attr("strokeOpacity"),opacity:Uh(e.attr("opacity"))?1:e.attr("opacity")};e.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),e.animate(r,t)})),US("fade-out",(function(e,t,n){var r=t.easing,i=t.duration,a=t.delay;e.animate({fillOpacity:0,strokeOpacity:0,opacity:0},i,r,(function(){e.remove(!0)}),a)})),US("grow-in-x",(function(e,t,n){ZO(e,t,n.coordinate,n.minYPoint,"x")})),US("grow-in-xy",(function(e,t,n){ZO(e,t,n.coordinate,n.minYPoint,"xy")})),US("grow-in-y",(function(e,t,n){ZO(e,t,n.coordinate,n.minYPoint,"y")})),US("scale-in-x",(function(e,t,n){var r=e.getBBox(),i=e.get("origin").mappingData.points,a=i[0].y-i[1].y>0?r.maxX:r.minX,o=(r.minY+r.maxY)/2;e.applyToMatrix([a,o,1]);var s=am(e.getMatrix(),[["t",-a,-o],["s",.01,1],["t",a,o]]);e.setMatrix(s),e.animate({matrix:am(e.getMatrix(),[["t",-a,-o],["s",100,1],["t",a,o]])},t)})),US("scale-in-y",(function(e,t,n){var r=e.getBBox(),i=e.get("origin").mappingData,a=(r.minX+r.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?r.maxY:r.minY;e.applyToMatrix([a,s,1]);var l=am(e.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);e.setMatrix(l),e.animate({matrix:am(e.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},t)})),US("wave-in",(function(e,t,n){var r=qT(n.coordinate,20),i=r.type,a=r.startState,o=r.endState,s=e.setClip({type:i,attrs:a});s.animate(o,Ph(Ph({},t),{callback:function(){e&&!e.get("destroyed")&&e.set("clipShape",null),s.remove(!0)}}))})),US("zoom-in",(function(e,t,n){nI(e,t,"zoomIn")})),US("zoom-out",(function(e,t,n){nI(e,t,"zoomOut")})),US("position-update",(function(e,t,n){var r=n.toAttrs,i=r.x,a=r.y;delete r.x,delete r.y,e.attr(r),e.animate({x:i,y:a},t)})),US("sector-path-update",(function(e,t,n){var r=n.toAttrs,i=n.coordinate,a=r.path||[],o=a.map((function(e){return e[0]}));if(!(a.length<1)){var s=tI(a),l=s.startAngle,c=s.endAngle,u=s.radius,h=s.innerRadius,p=tI(e.attr("path")),d=p.startAngle,f=p.endAngle,m=i.getCenter(),g=l-d,v=c-f;0!==g||0!==v?e.animate((function(e){var t=d+e*g,n=f+e*v;return Ph(Ph({},r),{path:qp(o,["M","A","A","Z"])?BT(m.x,m.y,u,t,n):DT(m.x,m.y,u,t,n,h)})}),Ph(Ph({},t),{callback:function(){e.attr("path",a)}})):e.attr("path",a)}})),US("path-in",(function(e,t,n){var r=e.getTotalLength();e.attr("lineDash",[r]),e.animate((function(e){return{lineDashOffset:(1-e)*r}}),t)})),hw("rect",cI),hw("mirror",lI),hw("list",oI),hw("matrix",sI),hw("circle",aI),hw("tree",uI),IS("axis",bI),IS("legend",SI),IS("tooltip",GS),IS("annotation",fI),IS("slider",kI),IS("scrollbar",_I),gw("tooltip",MI),gw("sibling-tooltip",NI),gw("ellipsis-text",FI),gw("element-active",DI),gw("element-single-active",GI),gw("element-range-active",HI),gw("element-highlight",qI),gw("element-highlight-by-x",QI),gw("element-highlight-by-color",KI),gw("element-single-highlight",JI),gw("element-range-highlight",ZI),gw("element-sibling-highlight",ZI,{effectSiblings:!0,effectByRecord:!0}),gw("element-selected",tM),gw("element-single-selected",nM),gw("element-range-selected",eM),gw("element-link-by-color",BI),gw("active-region",II),gw("list-active",iM),gw("list-selected",oM),gw("list-highlight",aM),gw("list-unchecked",sM),gw("list-checked",lM),gw("legend-item-highlight",aM,{componentNames:["legend"]}),gw("axis-label-highlight",aM,{componentNames:["axis"]}),gw("rect-mask",hM),gw("x-rect-mask",fM,{dim:"x"}),gw("y-rect-mask",fM,{dim:"y"}),gw("circle-mask",uM),gw("path-mask",mM),gw("smooth-path-mask",gM),gw("cursor",vM),gw("data-filter",yM),gw("brush",EM),gw("brush-x",EM,{dims:["x"]}),gw("brush-y",EM,{dims:["y"]}),gw("sibling-filter",bM),gw("sibling-x-filter",bM),gw("sibling-y-filter",bM),gw("element-filter",CM),gw("element-sibling-filter",TM),gw("element-sibling-filter-record",TM,{byRecord:!0}),gw("view-drag",SM),gw("view-move",kM),gw("scale-translate",AM),gw("scale-zoom",OM),gw("reset-button",wM,{name:"reset-button",text:"reset"}),gw("mousewheel-scroll",LM),nS("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),nS("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),nS("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),nS("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),nS("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),nS("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),nS("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),nS("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),nS("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),nS("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),nS("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),nS("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),nS("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:PM,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:PM,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:PM,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),nS("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),nS("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:PM,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:PM,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:PM,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),nS("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:PM,action:"path-mask:start"},{trigger:"mousedown",isEnable:PM,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),nS("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),nS("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),nS("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),nS("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),nS("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),nS("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),nS("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(e){return RM(e.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(e){return!RM(e.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),nS("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),nS("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]}),(FM=NM||(NM={})).ERROR="error",FM.WARN="warn",FM.INFO="log";function HM(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=0;return"AntV/G2Plot: "+e.replace(/%s/g,(function(){return""+t[r++]}))}function jM(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t||console[e](HM.apply(void 0,Dh([n],r)))}function GM(e){if(!e)return{width:0,height:0};var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function $M(e,t){return VM(e).find((function(e){return e.type===t}))}function YM(e){return op(e.geometries,(function(e,t){return e.concat(t.elements)}),[])}function UM(e){return Zp(e,["views","length"],0)<=0?YM(e):op(e.views,(function(e,t){return e.concat(UM(t))}),YM(e))}function VM(e){return Zp(e,["views","length"],0)<=0?e.geometries:op(e.views,(function(e,t){return e.concat(t.geometries)}),e.geometries)}function WM(e,t){return e.views.find((function(e){return e.id===t}))}function XM(e){var t=e.parent;return t?t.views:[]}function qM(e){return XM(e).filter((function(t){return t!==e}))}function KM(e){if(!$h(e,"Object"))return e;var t=Ph({},e);return t.formatter&&!t.content&&(t.content=t.formatter),t}function QM(e,t,n){for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l=[],c=!!r;if(c){o=[1/0,1/0],s=[-1/0,-1/0];for(var u=0,h=e.length;u<h;u++)o=Vf([0,0],o,d=e[u]),s=Wf([0,0],s,d);o=Vf([0,0],o,r[0]),s=Wf([0,0],s,r[1])}u=0;for(var p=e.length;u<p;u++){var d=e[u];if(n)i=e[u?u-1:p-1],a=e[(u+1)%p];else{if(0===u||u===p-1){l.push(d);continue}i=e[u-1],a=e[u+1]}var f=[0,0];f=Xf(f=em(f,a,i),f,t);var m=qf(d,i),g=qf(d,a),v=m+g;0!==v&&(m/=v,g/=v);var y=Xf([0,0],f,-m),x=Xf([0,0],f,g),E=Yf([0,0],d,y),b=Yf([0,0],d,x);c&&(E=Vf([0,0],E=Wf([0,0],E,o),s),b=Vf([0,0],b=Wf([0,0],b,o),s)),l.push(E),l.push(b)}return n&&l.push(l.shift()),l}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a++)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}var ZM={}.toString,JM=function(e,t){return ZM.call(e)==="[object "+t+"]"},eN=function(e){return JM(e,"Array")},tN=function(e){if(!function(e){return"object"==typeof e&&null!==e}(e)||!JM(e,"Object"))return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},nN=function(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];a?tN(a)?(tN(e[i])||(e[i]={}),n<r?nN(e[i],a,n+1,r):e[i]=t[i]):eN(a)?(e[i]=[],e[i]=e[i].concat(a)):e[i]=a:e[i]=a}},rN=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)nN(e,t[r]);return e};function iN(e){return e?e.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g).map((function(e){return e.toLowerCase()})).join("-"):e}function aN(e){var t={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];Zp(e,"fill")&&(t.color=e.fill);var r=BM(e,n),i=r.shadowColor,a=r.shadowBlur,o=void 0===a?0:a,s=r.shadowOffsetX,l=void 0===s?0:s,c=r.shadowOffsetY,u=void 0===c?0:c;t["text-shadow"]=""+[i,l+"px",u+"px",o+"px"].join(" ");var h=BM(e,n),p=h.stroke,d=h.lineWidth,f=void 0===d?0:d;return t["-webkit-text-stroke"]=""+[f+"px",p].join(" "),Xh(e,(function(e,r){["fontSize"].includes(r)&&Ep(e)?t[iN(r)]=e+"px":r&&!n.includes(r)&&(t[iN(r)]=""+e)})),t}function oN(e,t){e.style["pointer-events"]="none",Xh(t,(function(t,n){n&&t&&(e.style[n]=t)}))}var sN,lN=function(e,t,n){var r=t.statistic,i=t.plotType,a=r.title,o=r.content;[a,o].forEach((function(t,r){if(t){var s="";s=0===r?o?"translate(-50%, -100%)":"translate(-50%, -50%)":a?"translate(-50%, 0)":"translate(-50%, -50%)";var l=Yh(t.style)?t.style(n):t.style;e.annotation().html(Ph({position:["50%","50%"],html:function(e,r){var a=r.getCoordinate(),o=0;if("pie"===i||"ring-progress"===i)o=a.getRadius()*a.innerRadius*2;else if("liquid"===i){var c=Zp(r.geometries,[0,"elements",0,"shape"]);if(c)o=c.find((function(e){return"wrap"===e.get("name")})).getCanvasBBox().width}else o||(o=a.getWidth());oN(e,Ph({width:o+"px",transform:s},aN(l)));var u=r.getData();if(t.customHtml)return t.customHtml(e,r,n,u);var h=t.content;return t.formatter&&(h=t.formatter(n,u)),h?lp(h)?h:""+h:"<div></div>"},key:(0===r?"top":"bottom")+"-statistic"},BM(t,["offsetX","offsetY","rotate","style","formatter"])))}}))};function cN(e){return"number"==typeof e&&!isNaN(e)}function uN(e,t){if(!e)return{};var n=e.filter((function(e){var n=Zp(e,[t]);return Ep(n)&&!isNaN(n)})),r=n.every((function(e){return Zp(e,[t])>=0})),i=n.every((function(e){return Zp(e,[t])<=0}));return r?{min:0}:i?{max:0}:{}}function hN(e,t,n,r,i){if(void 0===i&&(i=[]),!Array.isArray(e))return{nodes:[],links:[]};var a=[],o={},s=-1;return e.forEach((function(e){var l=e[t],c=e[n],u=e[r],h=BM(e,i);o[l]||(o[l]=Ph({id:++s,name:l},h)),o[c]||(o[c]=Ph({id:++s,name:c},h)),a.push(Ph({source:o[l].id,target:o[c].id,value:u},h))})),{nodes:Object.values(o).sort((function(e,t){return e.id-t.id})),links:a}}function pN(e,t){var n=jh(e,(function(e){var n=e[t];return null===n||"number"==typeof n&&!isNaN(n)}));return jM(NM.WARN,n.length===e.length,"illegal data existed in chart data."),n}function dN(e){if(Ep(e))return[e,e,e,e];if(Vh(e)){var t=e.length;if(1===t)return[e[0],e[0],e[0],e[0]];if(2===t)return[e[0],e[1],e[0],e[1]];if(3===t)return[e[0],e[1],e[2],e[1]];if(4===t)return e}return[0,0,0,0]}function fN(e,t,n){void 0===t&&(t="bottom"),void 0===n&&(n=25);var r=dN(e),i=[t.startsWith("top")?n:0,t.startsWith("right")?n:0,t.startsWith("bottom")?n:0,t.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function mN(e){var t=e.map((function(e){return dN(e)})),n=[0,0,0,0];return t.length>0&&(n=n.map((function(e,n){return t.forEach((function(r,i){e+=t[i][n]})),e}))),n}Gp((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=void 0===r?"sans-serif":r,a=t.fontWeight,o=t.fontStyle,s=t.fontVariant,l=(sN||(sN=document.createElement("canvas").getContext("2d")),sN);return l.font=[o,a,s,n+"px",i].join(" "),l.measureText(lp(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Dh([e],_p(t)).join("")}));var gN="en-US",vN={};function yN(e,t){vN[e]=t}function xN(e){return{get:function(t,n){return zM(Zp(vN[e],t)||Zp(vN[gN],t)||Zp(vN["en-US"],t)||t,n)}}}var EN={},bN={},CN={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=1;e.default=function(){return"".concat(t++)}}(CN);var TN={},wN={},SN={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){e.apply(r,a)}),t)}}}(SN);var kN={};Object.defineProperty(kN,"__esModule",{value:!0}),kN.SensorTabIndex=kN.SensorClassName=kN.SizeSensorId=void 0;kN.SizeSensorId="size-sensor-id";kN.SensorClassName="size-sensor-object";kN.SensorTabIndex="-1",Object.defineProperty(wN,"__esModule",{value:!0}),wN.createSensor=void 0;var _N,AN=(_N=SN)&&_N.__esModule?_N:{default:_N},ON=kN;wN.createSensor=function(e){var t=void 0,n=[],r=(0,AN.default)((function(){n.forEach((function(t){t(e)}))})),i=function(){t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",r),t.parentNode.removeChild(t),t=void 0,n=[])};return{element:e,bind:function(i){t||(t=function(){"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=document.createElement("object");return t.onload=function(){t.contentDocument.defaultView.addEventListener("resize",r),r()},t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex="-1",t.style.opacity="0",t.setAttribute("class",ON.SensorClassName),t.setAttribute("tabindex",ON.SensorTabIndex),t.type="text/html",e.appendChild(t),t.data="about:blank",t}()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}};var IN={};Object.defineProperty(IN,"__esModule",{value:!0}),IN.createSensor=void 0;var MN=function(e){return e&&e.__esModule?e:{default:e}}(SN);IN.createSensor=function(e){var t=void 0,n=[],r=(0,MN.default)((function(){n.forEach((function(t){t(e)}))})),i=function(){t.disconnect(),n=[],t=void 0};return{element:e,bind:function(i){var a;t||((a=new ResizeObserver(r)).observe(e),r(),t=a),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}},Object.defineProperty(TN,"__esModule",{value:!0}),TN.createSensor=void 0;var NN=wN,FN="undefined"!=typeof ResizeObserver?IN.createSensor:NN.createSensor;TN.createSensor=FN,Object.defineProperty(bN,"__esModule",{value:!0}),bN.removeSensor=bN.getSensor=void 0;var LN=function(e){return e&&e.__esModule?e:{default:e}}(CN),PN=TN,RN=kN;var DN={};bN.getSensor=function(e){var t=e.getAttribute(RN.SizeSensorId);if(t&&DN[t])return DN[t];var n=(0,LN.default)();e.setAttribute(RN.SizeSensorId,n);var r=(0,PN.createSensor)(e);return DN[n]=r,r};bN.removeSensor=function(e){var t=e.element.getAttribute(RN.SizeSensorId);e.element.removeAttribute(RN.SizeSensorId),e.destroy(),t&&DN[t]&&delete DN[t]},Object.defineProperty(EN,"__esModule",{value:!0}),EN.ver=EN.clear=zN=EN.bind=void 0;var BN=bN,zN=EN.bind=function(e,t){var n=(0,BN.getSensor)(e);return n.bind(t),function(){n.unbind(t)}};EN.clear=function(e){var t=(0,BN.getSensor)(e);(0,BN.removeSensor)(t)};EN.ver="1.0.1";var HN=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],jN=function(e){function t(t,n){var r=e.call(this)||this;return r.container="string"==typeof t?document.getElementById(t):t,r.options=rN({},r.getDefaultOptions(),n),r.createG2(),r.bindEvents(),r}return Lh(t,e),t.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},t.prototype.createG2=function(){var e=this.options,t=e.width,n=e.height,r=e.defaultInteractions;this.chart=new HS(Ph(Ph(Ph(Ph({container:this.container,autoFit:!1},this.getChartSize(t,n)),{localRefresh:!1}),BM(this.options,HN)),{defaultInteractions:r})),this.container.setAttribute("data-chart-source-type","G2Plot")},t.prototype.getChartSize=function(e,t){var n=GM(this.container);return{width:e||n.width||400,height:t||n.height||400}},t.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",(function(t){(null==t?void 0:t.type)&&e.emit(t.type,t)}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},t.prototype.update=function(e){this.updateOption(e),this.render()},t.prototype.updateOption=function(e){this.options=rN({},this.options,e)},t.prototype.setState=function(e,t,n){void 0===n&&(n=!0),Xh(UM(this.chart),(function(r){t(r.getData())&&r.setState(e,n)}))},t.prototype.getStates=function(){var e=UM(this.chart),t=[];return Xh(e,(function(e){var n=e.getData();Xh(e.getStates(),(function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})}))})),t},t.prototype.changeData=function(e){this.update({data:e})},t.prototype.changeSize=function(e,t){this.chart.changeSize(e,t)},t.prototype.addAnnotations=function(e){var t=Dh(e),n=this.chart.getController("annotation"),r=n.getComponents().map((function(e){return e.extra}));n.clear(!0);for(var i=function(e){var i=r[e],a=t.findIndex((function(e){return e.id&&e.id===i.id}));-1!==a&&(i=rN({},i,t[a]),t.splice(a,1)),n.annotation(i)},a=0;a<r.length;a++)i(a);t.forEach((function(e){return n.annotation(e)})),this.chart.render(!0)},t.prototype.removeAnnotations=function(e){var t=this.chart.getController("annotation"),n=t.getComponents().map((function(e){return e.extra}));t.clear(!0);for(var r=function(r){var i=n[r];e.find((function(e){return e.id&&e.id===i.id}))||t.annotation(i)},i=0;i<n.length;i++)r(i);this.chart.render(!0)},t.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute("data-chart-source-type")},t.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor(),t=this.options,n=t.padding,r=t.appendPadding;this.chart.padding=n,this.chart.appendPadding=r,e({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var e=this;if(!this.unbind){var t=this.options.autoFit;(void 0===t||t)&&(this.unbind=zN(this.container,(function(){var t=GM(e.container),n=t.width,r=t.height;n===e.chart.width&&r===e.chart.height||e.triggerResize()})))}},t.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},t}(Gd),GN=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];function $N(){return"object"==typeof window?null===window||void 0===window?void 0:window.devicePixelRatio:2}function YN(e,t){void 0===t&&(t=e);var n=document.createElement("canvas"),r=$N();return n.width=e*r,n.height=t*r,n.style.width=e+"px",n.style.height=t+"px",n.getContext("2d").scale(r,r),n}function UN(e,t,n,r){void 0===r&&(r=n);var i=t.backgroundColor,a=t.opacity;e.globalAlpha=a,e.fillStyle=i,e.beginPath(),e.fillRect(0,0,n,r),e.closePath()}function VN(e,t,n){var r=e+t;return n?2*r:r}function WN(e,t){return t?[[e*(1/4),e*(1/4)],[e*(3/4),e*(3/4)]]:[[.5*e,.5*e]]}function XN(e,t){var n=t*Math.PI/180;return{a:Math.cos(n)*(1/e),b:Math.sin(n)*(1/e),c:-Math.sin(n)*(1/e),d:Math.cos(n)*(1/e),e:0,f:0}}var qN={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function KN(e,t,n,r){var i=t.size,a=t.fill,o=t.lineWidth,s=t.stroke,l=t.fillOpacity;e.beginPath(),e.globalAlpha=l,e.fillStyle=a,e.strokeStyle=s,e.lineWidth=o,e.arc(n,r,i/2,0,2*Math.PI,!1),e.fill(),o&&e.stroke(),e.closePath()}var QN={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function ZN(e){var t=rN({},QN,e),n=t.spacing,r=t.rotation,i=t.lineWidth,a=n+i||1,o=n+i||1,s="\n            M 0 0 L "+a+" 0\n            M 0 "+o+" L "+a+" "+o+"\n            ",l=YN(a,o),c=l.getContext("2d");UN(c,t,a,o),function(e,t,n){var r=t.stroke,i=t.lineWidth,a=t.strokeOpacity,o=new Path2D(n);e.globalAlpha=a,e.lineCap="square",e.strokeStyle=i?r:"transparent",e.lineWidth=i,e.stroke(o)}(c,t,s);var u=c.createPattern(l,"repeat");if(u){var h=XN($N(),r);u.setTransform(h)}return u}var JN={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function eF(e,t,n,r){var i=t.stroke,a=t.size,o=t.fill,s=t.lineWidth,l=t.fillOpacity;e.globalAlpha=l,e.strokeStyle=i,e.lineWidth=s,e.fillStyle=o,e.strokeRect(n-a/2,r-a/2,a,a),e.fillRect(n-a/2,r-a/2,a,a)}function tF(e){var t,n=e.type,r=e.cfg;switch(n){case"dot":t=function(e){var t=rN({},qN,e),n=t.size,r=t.padding,i=t.isStagger,a=t.rotation,o=VN(n,r,i),s=WN(o,i),l=YN(o,o),c=l.getContext("2d");UN(c,t,o);for(var u=0,h=s;u<h.length;u++){var p=h[u];KN(c,t,p[0],p[1])}var d=c.createPattern(l,"repeat");if(d){var f=XN($N(),a);d.setTransform(f)}return d}(r);break;case"line":t=ZN(r);break;case"square":t=function(e){var t=rN({},JN,e),n=t.size,r=t.padding,i=t.isStagger,a=t.rotation,o=VN(n,r,i),s=WN(o,i),l=YN(o,o),c=l.getContext("2d");UN(c,t,o);for(var u=0,h=s;u<h.length;u++){var p=h[u];eF(c,t,p[0],p[1])}var d=c.createPattern(l,"repeat");if(d){var f=XN($N(),a);d.setTransform(f)}return d}(r)}return t}function nF(e){var t=this;return function(n){var r,i=n.options,a=n.chart,o=i.pattern;if(!o)return n;return rN({},n,{options:(r={},r[e]=function(n){for(var r,s,l,c=[],u=1;u<arguments.length;u++)c[u-1]=arguments[u];var h=a.getTheme().defaultColor,p=h,d=null===(s=null===(r=a.geometries)||void 0===r?void 0:r[0])||void 0===s?void 0:s.getAttribute("color");if(d){var f=d.getFields()[0],m=Zp(n,f);p=jk.getMappingValue(d,m,(null===(l=d.values)||void 0===l?void 0:l[0])||h)}var g=o;"function"==typeof o&&(g=o.call(t,n,p)),g instanceof CanvasPattern==!1&&(g=tF(rN({},{cfg:{backgroundColor:p}},g)));var v=i[e];return Ph(Ph({},"function"==typeof v?v.call.apply(v,Dh([t,n],c)):v||{}),{fill:g||p})},r)})}}function rF(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.seriesField;return!1===r?t.legend(!1):(i||a)&&t.legend(i||a,r),e}function iF(e){var t=e.chart,n=e.options.tooltip;return void 0!==n&&t.tooltip(n),e}function aF(e){var t=e.chart;return Xh(e.options.interactions,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg||{})})),e}function oF(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),Xh(t.geometries,(function(e){e.animate(n)})),e}function sF(e){var t=e.chart,n=e.options.theme;return n&&t.theme(n),e}function lF(e){var t=e.chart,n=e.options.state;return n&&Xh(t.geometries,(function(e){e.state(n)})),e}function cF(e){var t=e.chart,n=e.options.slider;return t.option("slider",n),e}function uF(e){var t=e.chart,n=e.options.scrollbar;return t.option("scrollbar",n),e}function hF(e,t){return function(n){var r=n.chart,i=n.options,a={};return Xh(e,(function(e,t){a[t]=BM(e,GN)})),a=rN({},t,i.meta,a),r.scale(a),n}}function pF(e){return function(t){var n=t.chart,r=t.options,i=n.getController("annotation");return Xh(Dh(r.annotations||[],e||[]),(function(e){i.annotation(e)})),t}}function dF(e){var t=e.chart,n=e.options,r=n.yAxis,i=n.limitInPlot,a=i;return Wh(r)&&Uh(i)&&(a=!!Object.values(BM(r,["min","max","minLimit","maxLimit"])).some((function(e){return!Uh(e)}))),t.limitInPlot=a,e}function fF(e,t){if(!1===e)return{fields:!1};var n=Zp(e,"fields"),r=Zp(e,"formatter");return r&&!n&&(n=t),{fields:n,formatter:r}}function mF(e,t){var n=e.type,r=e.xField,i=e.yField,a=e.colorField,o=e.shapeField,s=e.sizeField,l=e.styleField,c=e.rawFields,u=void 0===c?[]:c,h=[];if("color"===t)h=Dh([a||r],u);else if("shape"===t)h=Dh([o||r],u);else if("size"===t)h=Dh([s||r],u);else{h=Dh([r,i,a,o,s,l],u);var p=["x","y","color","shape","size","style"].indexOf(t),d=h[p];h.splice(p,1),h.unshift(d)}var f=cp(h.filter((function(e){return!!e}))),m="line"===n&&[r,i].includes(f.join("*"))?"":f.join("*");return{mappingFields:f,tileMappingField:m}}function gF(e,t){if(t)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return e.forEach((function(e,t){i[e]=n[t]})),delete i[void 0],t(i)}}function vF(e){var t=e.chart,n=e.options,r=n.type,i=n.args,a=n.mapping,o=n.xField,s=n.yField,l=n.colorField,c=n.shapeField,u=n.sizeField,h=n.tooltipFields,p=n.label,d=n.state,f=n.customInfo;if(!a)return e;var m=a.color,g=a.shape,v=a.size,y=a.style,x=a.tooltip,E=t[r](i).position(o+"*"+s);if(lp(m))l?E.color(l,m):E.color(m);else if(Yh(m)){var b=mF(n,"color"),C=b.mappingFields,T=b.tileMappingField;E.color(T,gF(C,m))}else l&&E.color(l,m);if(lp(g))c?E.shape(c,[g]):E.shape(g);else if(Yh(g)){var w=mF(n,"shape");C=w.mappingFields,T=w.tileMappingField;E.shape(T,gF(C,g))}else c&&E.shape(c,g);if(Ep(v))u?E.size(u,v):E.size(v);else if(Yh(v)){var S=mF(n,"size");C=S.mappingFields,T=S.tileMappingField;E.size(T,gF(C,v))}else u&&E.size(u,v);if(Yh(y)){var k=mF(n,"style");C=k.mappingFields,T=k.tileMappingField;E.style(T,gF(C,y))}else Wh(y)&&E.style(y);if(!1===h?E.tooltip(!1):Wp(h)||E.tooltip(h.join("*"),gF(h,x)),!1===p)E.label(!1);else if(p){var _=p.callback,A=p.fields,O=Rh(p,["callback","fields"]);E.label({fields:A||[s],callback:_,cfg:KM(O)})}return d&&E.state(d),f&&E.customInfo(f),[o,s].filter((function(e){return e!==l})).forEach((function(e){t.legend(e,!1)})),Ph(Ph({},e),{ext:{geometry:E}})}function yF(e){var t=e.options,n=t.area,r=t.xField,i=t.yField,a=t.seriesField,o=t.smooth,s=fF(t.tooltip,[r,i,a]),l=s.fields,c=s.formatter;return n?vF(rN({},e,{options:{type:"area",colorField:a,tooltipFields:l,mapping:Ph({shape:o?"smooth":"area",tooltip:c},n)}})):e}function xF(e){var t=e.options,n=t.line,r=t.stepType,i=t.xField,a=t.yField,o=t.seriesField,s=t.smooth,l=t.connectNulls,c=fF(t.tooltip,[i,a,o]),u=c.fields,h=c.formatter;return n?vF(rN({},e,{options:{type:"line",colorField:o,tooltipFields:u,mapping:Yp({shape:r||(s?"smooth":"line"),tooltip:h},n),args:{connectNulls:l}}})):e}function EF(e){var t=e.options,n=t.point,r=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=t.shapeField,l=fF(t.tooltip,[r,i,a,o,s]),c=l.fields,u=l.formatter;return n?vF(rN({},e,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:c,mapping:Ph({tooltip:u},n)}})):e}function bF(e){var t=e.options,n=t.xField,r=t.yField,i=t.interval,a=t.seriesField,o=t.tooltip,s=t.minColumnWidth,l=t.maxColumnWidth,c=t.columnBackground,u=t.dodgePadding,h=t.intervalPadding,p=fF(o,[n,r,a]),d=p.fields,f=p.formatter,m=(i?vF(rN({},e,{options:{type:"interval",colorField:a,tooltipFields:d,mapping:Ph({tooltip:f},i),args:{dodgePadding:u,intervalPadding:h,minColumnWidth:s,maxColumnWidth:l,background:c}}})):e).ext;return function(e){var t=e.chart,n=e.options,r=e.ext,i=n.seriesField,a=n.isGroup,o=n.isStack,s=n.marginRatio,l=n.widthRatio,c=n.groupField,u=n.theme,h=[];return i&&(a&&h.push({type:"dodge",dodgeBy:c||i,marginRatio:s}),o&&h.push({type:"stack",marginRatio:s})),h.length&&(null==r?void 0:r.geometry)&&(null==r?void 0:r.geometry).adjust(h),Uh(l)||t.theme(rN({},Wh(u)?u:yS(u),{columnWidthRatio:l})),e}(Ph(Ph({},e),{ext:m}))}function CF(e){var t=e.options,n=t.polygon,r=t.xField,i=t.yField,a=t.seriesField,o=fF(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?vF(rN({},e,{options:{type:"polygon",colorField:a,tooltipFields:s,mapping:Ph({tooltip:l},n)}})):e}function TF(e){var t=e.options,n=t.edge,r=t.xField,i=t.yField,a=t.seriesField,o=fF(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?vF(rN({},e,{options:{type:"edge",colorField:a,tooltipFields:s,mapping:Ph({tooltip:l},n)}})):e}function wF(e){var t=e.options,n=t.schema,r=t.xField,i=t.yField,a=t.seriesField,o=fF(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?vF(rN({},e,{options:{type:"schema",colorField:a,tooltipFields:s,mapping:Ph({tooltip:l},n)}})):e}var SF=rN({},jN.getDefaultOptions(),{syncViewPadding:!0,tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1});function kF(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.lineStyle,o=n.lineShape,s=n.point,l=n.area,c=n.yField,u=n.seriesField,h=null==s?void 0:s.state;t.data(r);var p=rN({},e,{options:{shapeField:u,line:{color:i,style:a,shape:o},point:s&&Ph({color:i,shape:"circle"},s),area:l&&Ph({color:i},l),label:void 0}}),d=rN({},p,{options:{tooltip:!1,state:h}});xF(p),yF(d);var f=rN({},p,{options:{tooltip:!1,state:h}});if(s){var m=t.createView({id:"point-view"});m.axis(!1),m.tooltip(!1),m.legend(!1),m.data(r.filter((function(e){return!Uh(e[c])}))),EF(Ph(Ph({},f),{chart:m}))}return e}function _F(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,c=r.seriesField,u=((t={})[o]={type:"cat",sync:!0,values:cp(l.map((function(e){return e[o]})))},t[s]=Ph(Ph({},uN(l,s)),{sync:!0}),t);return c&&(u[c]={sync:!0}),DM(hF(((n={})[o]=i,n[s]=a,n),u))(e)}function AF(e){var t=e.chart,n=e.options.reflect;if(n){var r=n;Vh(r)||(r=[r]);var i=r.map((function(e){return["reflect",e]}));t.coordinate({type:"rect",actions:i})}return e}function OF(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function IF(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):!1===r&&t.legend(!1),e}function MF(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=$M(t,"line");if(r){var o=r.callback,s=Rh(r,["callback"]);a.label({fields:[i],callback:o,cfg:Ph({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},KM(s))})}else a.label(!1);return e}function NF(e){var t=e.chart,n=e.options.isStack,r=VM(t);return n&&Xh(r,(function(e){e.adjust("stack")})),e}function FF(e){return DM(kF,_F,NF,sF,AF,OF,IF,iF,MF,cF,aF,oF,pF(),dF)(e)}gw("marker-active",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.active=function(){var e=this.getView(),t=this.context.event;if(t.data){var n=t.data.items,r=$M(e,"point");r&&Xh(r.elements,(function(e){var t=-1!==ep(n,(function(t){return t.data===e.data}));e.setState("active",t)}))}},t.prototype.reset=function(){var e=$M(this.getView(),"point");e&&Xh(e.elements,(function(e){e.setState("active",!1)}))},t.prototype.getView=function(){return this.context.view},t}(pw)),nS("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var LF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t}return Lh(t,e),t.getDefaultOptions=function(){return SF},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.yField;_F({chart:t,options:n}),this.chart.changeData(e);var i=WM(this.chart,"point-view");i&&i.changeData(e.filter((function(e){return!Uh(e[r])})))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return FF},t}(jN);function PF(e,t,n,r){var i=op(e,(function(e,r){var i=r[n],a=e.has(i)?e.get(i):0,o=r[t];return a=cN(o)?a+o:a,e.set(i,a),e}),new Map);return Kp(e,(function(e){var a,o=e[t],s=e[n],l=cN(o)?o/i.get(s):0;return Ph(Ph({},e),((a={})[r]=l,a))}))}function RF(e,t,n,r,i){return i?PF(e,t,n,r):e}var DF=rN({},jN.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}});function BF(e){var t=e.chart,n=e.options,r=n.data,i=n.areaStyle,a=n.color,o=n.point,s=n.line,l=n.isPercent,c=n.xField,u=n.yField,h=n.tooltip,p=n.seriesField,d=n.startOnZero,f=null==o?void 0:o.state,m=RF(r,u,c,u,l);t.data(m);var g=l?Ph({formatter:function(e){return{name:e[p]||e[c],value:(100*Number(e[u])).toFixed(2)+"%"}}},h):h,v=rN({},e,{options:{area:{color:a,style:i},line:s&&Ph({color:a},s),point:o&&Ph({color:a},o),tooltip:g,label:void 0,args:{startOnZero:d}}}),y=rN({options:{line:{size:2}}},v,{options:{sizeField:p,tooltip:!1}});yF(v),xF(y);var x=rN({},v,{options:{tooltip:!1,state:f}});if(o){var E=t.createView({id:"point-view"});E.axis(!1),E.tooltip(!1),E.legend(!1),E.data(r.filter((function(e){return!Uh(e[u])}))),EF(Ph(Ph({},x),{chart:E}))}return e}function zF(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=$M(t,"area");if(r){var o=r.callback,s=Rh(r,["callback"]);a.label({fields:[i],callback:o,cfg:Ph({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},KM(s))})}else a.label(!1);return e}function HF(e){var t=e.chart,n=e.options,r=n.isStack,i=n.isPercent,a=n.seriesField;(i||r)&&a&&Xh(VM(t),(function(e){e.adjust("stack")}));return e}function jF(e){return DM(sF,nF("areaStyle"),BF,_F,HF,OF,IF,iF,zF,cF,pF(),aF,oF,dF)(e)}var GF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="area",t}return Lh(t,e),t.getDefaultOptions=function(){return DF},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.isPercent,i=n.xField,a=n.yField;_F({chart:t,options:n});var o=RF(e,a,i,a,r);this.chart.changeData(o);var s=WM(this.chart,"point-view");s&&s.changeData(e.filter((function(e){return!Uh(e[a])})))},t.prototype.getSchemaAdaptor=function(){return jF},t}(jN);function $F(e,t){return Ep(e)&&Ep(t)?e===t?"100%":0===e?"∞":0===t?"-∞":(100*t/e).toFixed(2)+"%":"-"}function YF(e,t){return rN({size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:!1!==e.arrow&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:!1!==e.text&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:$F}},e)}function UF(e,t){return Kp(t.getModel().points,(function(t){return e.convertPoint(t)}))}function VF(e,t,n){!function(e,t,n){var r=e.view,i=e.geometry,a=e.group,o=e.options,s=e.horizontal,l=o.offset,c=o.size,u=o.arrow,h=r.getCoordinate(),p=UF(h,t)[3],d=UF(h,n)[0],f=d.y-p.y,m=d.x-p.x;if("boolean"!=typeof u){var g,v=u.headSize,y=o.spacing;s?(m-v)/2<y?(y=Math.max(1,(m-v)/2),g=[[p.x+y,p.y-l],[p.x+y,p.y-l-c],[d.x-y,d.y-l-c/2]]):g=[[p.x+y,p.y-l],[p.x+y,p.y-l-c],[d.x-y-v,d.y-l-c],[d.x-y,d.y-l-c/2],[d.x-y-v,d.y-l]]:(f-v)/2<y?(y=Math.max(1,(f-v)/2),g=[[p.x+l,p.y+y],[p.x+l+c,p.y+y],[d.x+l+c/2,d.y-y]]):g=[[p.x+l,p.y+y],[p.x+l+c,p.y+y],[d.x+l+c,d.y-y-v],[d.x+l+c/2,d.y-y],[d.x+l,d.y-y-v]],a.addShape("polygon",{id:r.id+"-conversion-tag-arrow-"+i.getElementId(t.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:t,nextElement:n},attrs:Ph(Ph({},u.style||{}),{points:g})})}}(e,t,n),function(e,t,n){var r,i,a,o=e.view,s=e.geometry,l=e.group,c=e.options,u=e.field,h=e.horizontal,p=c.offset,d=c.size;if("boolean"!=typeof c.text){var f=o.getCoordinate(),m=(null===(r=c.text)||void 0===r?void 0:r.formatter)&&(null===(i=c.text)||void 0===i?void 0:i.formatter(t.getData()[u],n.getData()[u])),g=UF(f,t)[h?3:0],v=UF(f,n)[h?0:3],y=l.addShape("text",{id:o.id+"-conversion-tag-text-"+s.getElementId(t.getModel().mappingData),name:"conversion-tag-text",origin:{element:t,nextElement:n},attrs:Ph(Ph({},(null===(a=c.text)||void 0===a?void 0:a.style)||{}),{text:m,x:h?(g.x+v.x)/2:g.x+p+d/2,y:h?g.y-p-d/2:(g.y+v.y)/2})});if(h){var x=v.x-g.x,E=y.getBBox().width;if(E>x){var b=E/m.length,C=Math.max(1,Math.ceil(x/b)-1),T=m.slice(0,C)+"...";y.attr("text",T)}}}}(e,t,n)}var WF={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},XF=function(e,t){return"hover"===e?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:t}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:t}]}]};nS(WF.hover,{start:XF(WF.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),nS(WF.click,{start:XF(WF.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});var qF={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}};function KF(e){return e.isInPlot()}function QF(e,t,n){var r=t||"rect";switch(e){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:KF,action:["brush:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:KF,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:KF,action:["brush:filter","brush:end",r+"-mask:end",r+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:KF,action:["brush-x:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:KF,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:KF,action:["brush-x:filter","brush-x:end",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:KF,action:["brush-y:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:KF,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:KF,action:["brush-y:filter","brush-y:end",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};default:return{}}}gw("brush-reset-button",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=Ph({name:"button"},qF),t}return Lh(t,e),t.prototype.getButtonCfg=function(){var e=this.context.view,t=Zp(e,["interactions","filter-action","cfg","buttonConfig"]);return rN(this.buttonCfg,t,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=this.drawText(t);this.drawBackground(t,n.getBBox()),this.buttonGroup=t},t.prototype.drawText=function(e){var t,n=this.getButtonCfg();return e.addShape({type:"text",name:"button-text",attrs:Ph({text:n.text},null===(t=n.textStyle)||void 0===t?void 0:t.default)})},t.prototype.drawBackground=function(e,t){var n,r=this.getButtonCfg(),i=dN(r.padding),a=e.addShape({type:"rect",name:"button-rect",attrs:Ph({x:t.x-i[3],y:t.y-i[0],width:t.width+i[1]+i[3],height:t.height+i[0]+i[2]},null===(n=r.buttonStyle)||void 0===n?void 0:n.default)});return a.toBack(),e.on("mouseenter",(function(){var e;a.attr(null===(e=r.buttonStyle)||void 0===e?void 0:e.active)})),e.on("mouseleave",(function(){var e;a.attr(null===(e=r.buttonStyle)||void 0===e?void 0:e.default)})),a},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=jk.transform(null,[["t",e.x-n.width-10,e.y+n.height+5]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(pw),{name:"brush-reset-button"}),nS("filter-action",{}),nS("brush",QF("brush")),nS("brush-highlight",QF("brush-highlight")),nS("brush-x",QF("brush-x","x-rect")),nS("brush-y",QF("brush-y","y-rect")),nS("brush-x-highlight",QF("brush-x-highlight","x-rect")),nS("brush-y-highlight",QF("brush-y-highlight","y-rect"));var ZF=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function JF(e){var t=e.options,n=t.brush,r=jh(t.interactions||[],(function(e){return-1===ZF.indexOf(e.type)}));return(null==n?void 0:n.enabled)&&(ZF.forEach((function(e){var t,i=!1;switch(n.type){case"x-rect":i=e===("highlight"===n.action?"brush-x-highlight":"brush-x");break;case"y-rect":i=e===("highlight"===n.action?"brush-y-highlight":"brush-y");break;default:i=e===("highlight"===n.action?"brush-highlight":"brush")}var a={type:e,enable:i};((null===(t=n.mask)||void 0===t?void 0:t.style)||n.type)&&(a.cfg=QF(e,n.type,n.mask)),r.push(a)})),"highlight"!==(null==n?void 0:n.action)&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),rN({},e,{options:{interactions:r}})}function eL(e){var t=e.options,n=t.legend,r=t.seriesField,i=t.isStack;return r?!1!==n&&(n=Ph({position:i?"right-top":"top-left"},n)):n=!1,e.options.legend=n,e}function tL(e){var t=e.chart,n=e.options,r=n.data,i=n.columnStyle,a=n.color,o=n.columnWidthRatio,s=n.isPercent,l=n.isGroup,c=n.isStack,u=n.xField,h=n.yField,p=n.seriesField,d=n.groupField,f=n.tooltip,m=n.shape,g=s&&l&&c?function(e,t,n,r){var i=op(e,(function(e,r){var i=op(n,(function(e,t){return""+e+r[t]}),""),a=e.has(i)?e.get(i):0,o=r[t];return a=cN(o)?a+o:a,e.set(i,a),e}),new Map);return Kp(e,(function(e){var a,o=e[t],s=op(n,(function(t,n){return""+t+e[n]}),""),l=cN(o)?o/i.get(s):0;return Ph(Ph({},e),((a={})[r]=l,a))}))}(r,h,[u,d],h):RF(r,h,u,h,s),v=[];c&&p&&!l?g.forEach((function(e){var t=v.find((function(t){return t[u]===e[u]&&t[p]===e[p]}));t?t[h]+=e[h]||0:v.push(Ph({},e))})):v=g,t.data(v);var y=s?Ph({formatter:function(e){return{name:l&&c?e[p]+" - "+e[d]:e[p]||e[u],value:(100*Number(e[h])).toFixed(2)+"%"}}},f):f,x=rN({},e,{options:{data:v,widthRatio:o,tooltip:y,interval:{shape:m,style:i,color:a}}});return bF(x),x}function nL(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,c=r.isPercent?{max:1,min:0,minLimit:0,maxLimit:1}:{};return DM(hF(((t={})[o]=i,t[s]=a,t),((n={})[o]={type:"cat"},n[s]=Ph(Ph({},uN(l,s)),c),n)))(e)}function rL(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function iL(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):!1===r&&t.legend(!1),e}function aL(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=n.isRange,o=$M(t,"interval");if(r){var s=r.callback,l=Rh(r,["callback"]);o.label({fields:[i],callback:s,cfg:Ph({layout:(null==l?void 0:l.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},KM(a?Ph({content:function(e){var t;return null===(t=e[i])||void 0===t?void 0:t.join("-")}},l):l))})}else o.label(!1);return e}function oL(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.isGroup,a=n.isStack,o=n.groupField,s=n.data,l=n.xField,c=n.yField,u=n.seriesField;if(!1===r)t.tooltip(!1);else{var h=r;if(i&&a){var p=(null==h?void 0:h.formatter)||function(e){return{name:e[u]+" - "+e[o],value:e[c]}};h=Ph(Ph({},h),{customItems:function(e){var t=[];return Xh(e,(function(e){jh(s,(function(t){return Kh(t,BM(e.data,[l,u]))})).forEach((function(n){t.push(Ph(Ph(Ph({},e),{value:n[c],data:n,mappingData:{_origin:n}}),p(n)))}))})),t}})}t.tooltip(h)}return e}function sL(e,t){void 0===t&&(t=!1);var n,r,i,a,o=e.options,s=o.seriesField;return DM(eL,sF,nF("columnStyle"),lF,tL,nL,rL,iL,oL,cF,uF,aL,JF,aF,oF,pF(),(r=o.yField,void 0===(i=!t)&&(i=!0),void 0===(a=!!s)&&(a=!1),function(e){var t=e.options,n=e.chart,o=t.conversionTag,s=t.theme;return o&&!a&&(n.theme(rN({},Wh(s)?s:yS(s),{columnWidthRatio:1/3})),n.annotation().shape({render:function(e,t){var a=e.addGroup({id:n.id+"-conversion-tag-group",name:"conversion-tag-group"}),s=Jh(n.geometries,(function(e){return"interval"===e.type})),l={view:t,geometry:s,group:a,field:r,horizontal:i,options:YF(o,i)},c=s.elements;Xh(c,(function(e,t){t>0&&VF(l,c[t-1],e)}))}})),e}),(void 0===(n=!o.isStack)&&(n=!1),function(e){var t=e.chart,r=e.options.connectedArea,i=function(){t.removeInteraction(WF.hover),t.removeInteraction(WF.click)};if(!n&&r){var a=r.trigger||"hover";i(),t.interaction(WF[a],{start:XF(a,r.style)})}else i();return e}),dF)(e)}var lL=rN({},jN.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),cL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="column",t}return Lh(t,e),t.getDefaultOptions=function(){return lL},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.yField,r=t.xField,i=t.isPercent;nL({chart:this.chart,options:this.options}),this.chart.changeData(RF(e,n,r,n,i))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return sL},t}(jN);function uL(e){var t=e.options,n=t.xField,r=t.yField,i=t.xAxis,a=t.yAxis,o={left:"bottom",right:"top",top:"left",bottom:"right"},s=!1!==a&&Ph({position:o[(null==a?void 0:a.position)||"left"]},a),l=!1!==i&&Ph({position:o[(null==i?void 0:i.position)||"bottom"]},i);return Ph(Ph({},e),{options:Ph(Ph({},t),{xField:r,yField:n,xAxis:s,yAxis:l})})}function hL(e){var t=e.options.label;return t&&!t.position&&(t.position="left",t.layout||(t.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),rN({},e,{options:{label:t}})}function pL(e){var t=e.options,n=t.seriesField,r=t.isStack,i=t.legend;return n?!1!==i&&(i=Ph({position:r?"top-left":"right-top"},i||{})):i=!1,rN({},e,{options:{legend:i}})}function dL(e){return e.chart.coordinate({actions:[["transpose"],["reflect","y"]]}),e}function fL(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.barWidthRatio,a=n.minBarWidth,o=n.maxBarWidth,s=n.barBackground;return sL({chart:t,options:Ph(Ph({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:s})},!0)}function mL(e){return DM(uL,hL,pL,iF,dL,fL)(e)}var gL=rN({},jN.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),vL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bar",t}return Lh(t,e),t.getDefaultOptions=function(){return gL},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.xField,i=n.yField,a=n.isPercent;nL({chart:t,options:Ph(Ph({},n),{xField:i,yField:r})}),t.changeData(RF(e,r,i,r,a))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return mL},t}(jN),yL=rN({},jN.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function xL(e,t){var n;switch(e){case"inner":return n="-30%",lp(t)&&t.endsWith("%")?.01*parseFloat(t)>0?n:t:t<0?t:n;case"outer":return n=12,lp(t)&&t.endsWith("%")?.01*parseFloat(t)<0?n:t:t>0?t:n;default:return t}}function EL(e,t){return dp(pN(e,t),(function(e){return 0===e[t]}))}var bL=[1,0,0,0,1,0,0,0,1];function CL(e,t){var n=Dh(t||bL);return jk.transform(n,e)}var TL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getActiveElements=function(){var e=jk.getDelegationObject(this.context);if(e){var t=this.context.view,n=e.component,r=e.item,i=n.get("field");if(i)return t.geometries[0].elements.filter((function(e){return e.getModel().data[i]===r.value}))}return[]},t.prototype.getActiveElementLabels=function(){var e=this.context.view,t=this.getActiveElements();return e.geometries[0].labelsContainer.getChildren().filter((function(e){return t.find((function(t){return qp(t.getData(),e.get("data"))}))}))},t.prototype.transfrom=function(e){void 0===e&&(e=7.5);var t=this.getActiveElements(),n=this.getActiveElementLabels();t.forEach((function(t,r){var i=n[r],a=t.geometry.coordinate;if(a.isPolar&&a.isTransposed){var o=jk.getAngle(t.getModel(),a),s=(o.startAngle+o.endAngle)/2,l=e,c=l*Math.cos(s),u=l*Math.sin(s);t.shape.setMatrix(CL([["t",c,u]])),i.setMatrix(CL([["t",c,u]]))}}))},t.prototype.active=function(){this.transfrom()},t.prototype.reset=function(){this.transfrom(0)},t}(pw);var wL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getAnnotations=function(e){return(e||this.context.view).getController("annotation").option},t.prototype.getInitialAnnotation=function(){return this.initialAnnotation},t.prototype.init=function(){var e=this,t=this.context.view;t.removeInteraction("tooltip"),t.on("afterchangesize",(function(){var n=e.getAnnotations(t);e.initialAnnotation=n}))},t.prototype.change=function(e){var t=this.context,n=t.view,r=t.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var i=Zp(r,["data","data"]);if(r.type.match("legend-item")){var a=jk.getDelegationObject(this.context),o=n.getGroupedFields()[0];if(a&&o){var s=a.item;i=n.getData().find((function(e){return e[o]===s.value}))}}if(i){var l=Zp(e,"annotations",[]),c=Zp(e,"statistic",{});n.getController("annotation").clear(!0),Xh(l,(function(e){"object"==typeof e&&n.annotation()[e.type](e)})),lN(n,{statistic:c,plotType:"pie"},i),n.render(!0)}var u,h,p,d=(u=this.context,(p=u.event.target)&&(h=p.get("element")),h);d&&d.shape.toFront()},t.prototype.reset=function(){var e=this.context.view;e.getController("annotation").clear(!0),Xh(this.getInitialAnnotation(),(function(t){e.annotation()[t.type](t)})),e.render(!0)},t}(pw);function SL(e){var t=e.chart,n=e.options,r=n.data,i=n.angleField,a=n.colorField,o=n.color,s=n.pieStyle,l=pN(r,i);if(EL(l,i)){var c="$$percentage$$";l=l.map((function(e){var t;return Ph(Ph({},e),((t={}).$$percentage$$=1/l.length,t))})),t.data(l),bF(rN({},e,{options:{xField:"1",yField:c,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}}))}else{t.data(l),bF(rN({},e,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}}))}return e}function kL(e){var t,n=e.chart,r=e.options,i=r.meta,a=r.colorField,o=rN({},i);return n.scale(o,((t={})[a]={type:"cat"},t)),e}function _L(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),e}function AL(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,a=n.angleField,o=t.geometries[0];if(r){var s=r.callback,l=KM(Rh(r,["callback"]));if(l.content){var c=l.content;l.content=function(e,n,r){var o=e[i],s=e[a],l=t.getScaleByField(a),u=null==l?void 0:l.scale(s);return Yh(c)?c(Ph(Ph({},e),{percent:u}),n,r):lp(c)?zM(c,{value:s,name:o,percentage:Ep(u)&&!Uh(s)?(100*u).toFixed(2)+"%":null}):c}}var u=l.type?{inner:"",outer:"pie-outer",spider:"pie-spider"}[l.type]:"pie-outer",h=l.layout?Vh(l.layout)?l.layout:[l.layout]:[];l.layout=(u?[{type:u}]:[]).concat(h),o.label({fields:i?[a,i]:[a],callback:s,cfg:Ph(Ph({},l),{offset:xL(l.type,l.offset),type:"pie"})})}else o.label(!1);return e}function OL(e){var t=e.innerRadius,n=e.statistic,r=e.angleField,i=e.colorField,a=e.meta,o=xN(e.locale);if(t&&n){var s=rN({},yL.statistic,n),l=s.title,c=s.content;return!1!==l&&(l=rN({},{formatter:function(e){return e?e[i]:Uh(l.content)?o.get(["statistic","total"]):l.content}},l)),!1!==c&&(c=rN({},{formatter:function(e,t){var n=e?e[r]:function(e,t){var n=null;return Xh(e,(function(e){"number"==typeof e[t]&&(n+=e[t])})),n}(t,r),i=Zp(a,[r,"formatter"])||function(e){return e};return e||Uh(c.content)?i(n):c.content}},c)),rN({},{statistic:{title:l,content:c}},e)}return e}function IL(e){var t=e.chart,n=OL(e.options),r=n.innerRadius,i=n.statistic;return t.getController("annotation").clear(!0),DM(pF())(e),r&&i&&lN(t,{statistic:i,plotType:"pie"}),e}function ML(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.colorField,a=n.angleField,o=n.data;if(!1===r)t.tooltip(r);else if(t.tooltip(rN({},r,{shared:!1})),EL(o,a)){var s=Zp(r,"fields"),l=Zp(r,"formatter");Wp(Zp(r,"fields"))&&(s=[i,a],l=l||function(e){return{name:e[i],value:Ap(e[a])}}),t.geometries[0].tooltip(s.join("*"),gF(s,l))}return e}function NL(e){var t=e.chart,n=OL(e.options),r=n.interactions,i=n.statistic,a=n.annotations;return Xh(r,(function(e){var n,r;if(!1===e.enable)t.removeInteraction(e.type);else if("pie-statistic-active"===e.type){var o=[];(null===(n=e.cfg)||void 0===n?void 0:n.start)||(o=[{trigger:"element:mouseenter",action:"pie-statistic:change",arg:{statistic:i,annotations:a}}]),Xh(null===(r=e.cfg)||void 0===r?void 0:r.start,(function(e){o.push(Ph(Ph({},e),{arg:{statistic:i,annotations:a}}))})),t.interaction(e.type,rN({},e.cfg,{start:o}))}else t.interaction(e.type,e.cfg||{})})),e}function FL(e){return DM(nF("pieStyle"),SL,kL,sF,_L,rF,ML,AL,lF,IL,NL,oF)(e)}gw("pie-statistic",wL),nS("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),gw("pie-legend",TL),nS("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var LL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pie",t}return Lh(t,e),t.getDefaultOptions=function(){return yL},t.prototype.changeData=function(e){this.chart.emit(gd.BEFORE_CHANGE_DATA,NS.fromData(this.chart,gd.BEFORE_CHANGE_DATA,null));var t=this.options,n=this.options.angleField,r=pN(t.data,n),i=pN(e,n);EL(r,n)||EL(i,n)?this.update({data:e}):(this.updateOption({data:e}),this.chart.data(i),IL({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(gd.AFTER_CHANGE_DATA,NS.fromData(this.chart,gd.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return FL},t}(jN);function PL(e){var t=e.chart,n=e.options,r=n.data,i=n.sectorStyle,a=n.color;return t.data(r),DM(bF)(rN({},e,{options:{marginRatio:1,interval:{style:i,color:a}}})),e}function RL(e){var t=e.chart,n=e.options,r=n.label,i=n.xField,a=$M(t,"interval");if(!1===r)a.label(!1);else if(Wh(r)){var o=r.callback,s=r.fields,l=Rh(r,["callback","fields"]),c=l.offset,u=l.layout;(void 0===c||c>=0)&&(u=u?Vh(u)?u:[u]:[],l.layout=jh(u,(function(e){return"limit-in-shape"!==e.type})),l.layout.length||delete l.layout),a.label({fields:s||[i],callback:o,cfg:KM(l)})}else jM(NM.WARN,null===r,"the label option must be an Object."),a.label({fields:[i]});return e}function DL(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return!1===r?t.legend(!1):i&&t.legend(i,r),e}function BL(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),e}function zL(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return DM(hF(((t={})[a]=r,t[o]=i,t)))(e)}function HL(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r?t.axis(a,r):t.axis(a,!1),i?t.axis(o,i):t.axis(o,!1),e}function jL(e){DM(nF("sectorStyle"),PL,zL,RL,BL,HL,DL,iF,aF,oF,sF,pF(),lF)(e)}var GL=rN({},jN.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right"},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rose",t}Lh(t,e),t.getDefaultOptions=function(){return GL},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return jL}}(jN);var $L={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function YL(e,t){return function(e,t){var n=function(){var e=[256,256],t=XL,n=KL,r=qL,i=QL,a=ZL,o=rP,s=Math.random,l=[],c=1/0,u=WL,h=qL,p=aP,d={};function f(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=VL/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function m(t,n,r){for(var i,a,l,c=n.x,u=n.y,h=Math.sqrt(e[0]*e[0]+e[1]*e[1]),p=o(e),d=s()<.5?1:-1,f=-d;(i=p(f+=d))&&(a=~~i[0],l=~~i[1],!(Math.min(Math.abs(a),Math.abs(l))>=h));)if(n.x=c+a,n.y=u+l,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1])&&(!r||!eP(n,t,e[0]))&&(!r||nP(n,r))){for(var m=n.sprite,g=n.width>>5,v=e[0]>>5,y=n.x-(g<<4),x=127&y,E=32-x,b=n.y1-n.y0,C=void 0,T=(n.y+n.y0)*v+(y>>5),w=0;w<b;w++){C=0;for(var S=0;S<=g;S++)t[T+S]|=C<<E|(S<g?(C=m[w*g+S])>>>x:0);T+=v}return delete n.sprite,!0}return!1}return d.start=function(){var o=e[0],g=e[1],v=f(p()),y=d.board?d.board:iP((e[0]>>5)*e[1]),x=l.length,E=[],b=l.map((function(e,o,s){return e.text=u.call(this,e,o,s),e.font=t.call(this,e,o,s),e.style=h.call(this,e,o,s),e.weight=r.call(this,e,o,s),e.rotate=i.call(this,e,o,s),e.size=~~n.call(this,e,o,s),e.padding=a.call(this,e,o,s),e})).sort((function(e,t){return t.size-e.size})),C=-1,T=d.board?[{x:0,y:0},{x:o,y:g}]:null;function w(){for(var t=Date.now();Date.now()-t<c&&++C<x;){var n=b[C];n.x=o*(s()+.5)>>1,n.y=g*(s()+.5)>>1,JL(v,n,b,C),n.hasText&&m(y,n,T)&&(E.push(n),T?d.hasImage||tP(T,n):T=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}d._tags=E,d._bounds=T}return w(),d},d.createMask=function(t){var n=document.createElement("canvas"),r=e[0],i=e[1];if(r&&i){var a=r>>5,o=iP((r>>5)*i);n.width=r,n.height=i;var s=n.getContext("2d");s.drawImage(t,0,0,t.width,t.height,0,0,r,i);for(var l=s.getImageData(0,0,r,i).data,c=0;c<i;c++)for(var u=0;u<r;u++){var h=a*c+(u>>5),p=c*r+u<<2,f=l[p]>=250&&l[p+1]>=250&&l[p+2]>=250?1<<31-u%32:0;o[h]|=f}d.board=o,d.hasImage=!0}},d.timeInterval=function(e){c=null==e?1/0:e},d.words=function(e){l=e},d.size=function(t){e=[+t[0],+t[1]]},d.font=function(e){t=oP(e)},d.fontWeight=function(e){r=oP(e)},d.rotate=function(e){i=oP(e)},d.spiral=function(e){o=sP[e]||e},d.fontSize=function(e){n=oP(e)},d.padding=function(e){a=oP(e)},d.random=function(e){s=oP(e)},d}();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach((function(e){Uh(t[e])||n[e](t[e])})),n.words(e),t.imageMask&&n.createMask(t.imageMask);var r=n.start()._tags;r.forEach((function(e){e.x+=t.size[0]/2,e.y+=t.size[1]/2}));var i=t.size,a=i[0],o=i[1];return r.push({text:"",value:0,x:0,y:0,opacity:0}),r.push({text:"",value:0,x:a,y:o,opacity:0}),r}(e,t=zp({},$L,t))}var UL=Math.PI/180,VL=2048;function WL(e){return e.text}function XL(){return"serif"}function qL(){return"normal"}function KL(e){return e.value}function QL(){return 90*~~(2*Math.random())}function ZL(){return 1}function JL(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,2048/a,VL/a);var o=0,s=0,l=0,c=n.length;for(--r;++r<c;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font;var u=i.measureText(t.text+"m").width*a,h=t.size<<1;if(t.rotate){var p=Math.sin(t.rotate*UL),d=Math.cos(t.rotate*UL),f=u*d,m=u*p,g=h*d,v=h*p;u=Math.max(Math.abs(f+v),Math.abs(f-v))+31>>5<<5,h=~~Math.max(Math.abs(m+g),Math.abs(m-g))}else u=u+31>>5<<5;if(h>l&&(l=h),o+u>=2048&&(o=0,s+=l,l=0),s+h>=VL)break;i.translate((o+(u>>1))/a,(s+(h>>1))/a),t.rotate&&i.rotate(t.rotate*UL),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=h,t.xoff=o,t.yoff=s,t.x1=u>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=u}for(var y=i.getImageData(0,0,2048/a,VL/a).data,x=[];--r>=0;)if((t=n[r]).hasText){for(var E=(u=t.width)>>5,b=(h=t.y1-t.y0,0);b<h*E;b++)x[b]=0;if(null==(o=t.xoff))return;s=t.yoff;for(var C=0,T=-1,w=0;w<h;w++){for(b=0;b<u;b++){var S=E*w+(b>>5),k=y[2048*(s+w)+(o+b)<<2]?1<<31-b%32:0;x[S]|=k,C|=k}C?T=w:(t.y0++,h--,w--,s++)}t.y1=t.y0+T,t.sprite=x.slice(0,(t.y1-t.y0)*E)}}}function eP(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,l=32-s,c=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),h=0;h<c;h++){r=0;for(var p=0;p<=a;p++)if((r<<l|(p<a?(r=i[h*a+p])>>>s:0))&t[u+p])return!0;u+=n}return!1}function tP(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function nP(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function rP(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function iP(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function aP(){return document.createElement("canvas")}function oP(e){return Yh(e)?e:function(){return e}}var sP={archimedean:rP,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};function lP(e){var t=e.options,n=e.chart,r=n,i=r.width,a=r.height,o=r.padding,s=r.appendPadding,l=r.ele,c=t.data,u=t.imageMask,h=t.wordField,p=t.weightField,d=t.colorField,f=t.wordStyle,m=t.timeInterval,g=t.random,v=t.spiral,y=t.autoFit,x=void 0===y||y,E=t.placementStrategy;if(!c||!c.length)return[];var b,C=f.fontFamily,T=f.fontWeight,w=f.padding,S=f.fontSize,k=function(e,t){return e.map((function(e){return e[t]})).filter((function(e){return"number"==typeof e&&!isNaN(e)}))}(c,p),_=[(b=k,Math.min.apply(Math,b)),pP(k)],A=c.map((function(e){return{text:e[h],value:e[p],color:e[d],datum:e}})),O={imageMask:u,font:C,fontSize:uP(S,_),fontWeight:T,size:cP({width:i,height:a,padding:o,appendPadding:s,autoFit:x,container:l}),padding:w,timeInterval:m,random:g,spiral:v,rotate:hP(t)};if(Yh(E)){var I=A.map((function(e,t,r){return Ph(Ph(Ph({},e),{hasText:!!e.text,font:oP(O.font)(e,t,r),weight:oP(O.fontWeight)(e,t,r),rotate:oP(O.rotate)(e,t,r),size:oP(O.fontSize)(e,t,r),style:"normal"}),E.call(n,e,t,r))}));return I.push({text:"",value:0,x:0,y:0,opacity:0}),I.push({text:"",value:0,x:O.size[0],y:O.size[1],opacity:0}),I}return YL(A,O)}function cP(e){var t=e.width,n=e.height,r=e.container,i=e.autoFit,a=e.padding,o=e.appendPadding;if(i){var s=GM(r);t=s.width,n=s.height}t=t||400,n=n||400;var l=function(e){var t=dN(e.padding),n=dN(e.appendPadding),r=t[0]+n[0],i=t[1]+n[1],a=t[2]+n[2],o=t[3]+n[3];return[r,i,a,o]}({padding:a,appendPadding:o}),c=l[0],u=l[1],h=l[2];return[t-(l[3]+u),n-(c+h)]}function uP(e,t){if(Yh(e))return e;if(Vh(e)){var n=e[0],r=e[1];if(!t)return function(){return(r+n)/2};var i=t[0],a=t[1];return a===i?function(){return(r+n)/2}:function(e){var t=e.value;return(r-n)/(a-i)*(t-i)+n}}return function(){return e}}function hP(e){var t=function(e){var t=e.wordStyle.rotationSteps;t<1&&(jM(NM.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),t=1);return{rotation:e.wordStyle.rotation,rotationSteps:t}}(e),n=t.rotation,r=t.rotationSteps;if(!Vh(n))return n;var i=n[0],a=n[1],o=1===r?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function pP(e){return Math.max.apply(Math,e)}var dP=rN({},jN.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(e){return{name:e.text,value:e.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}});function fP(e){var t=e.chart,n=e.options,r=n.colorField,i=n.color,a=lP(e);return t.data(a),EF(rN({},e,{options:{xField:"x",yField:"y",seriesField:r&&"color",rawFields:Yh(i)&&Dh(Zp(n,"rawFields",[]),["datum"]),point:{color:i,shape:"word-cloud"}}})).ext.geometry.label(!1),t.coordinate().reflect("y"),t.axis(!1),e}function mP(e){return DM(hF({x:{nice:!1},y:{nice:!1}}))(e)}function gP(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField;return!1===r?t.legend(!1):i&&t.legend("color",r),e}function vP(e){DM(fP,mP,iF,gP,aF,oF,sF,lF)(e)}function yP(e){return{fontSize:e.data.size,text:e.data.text,textAlign:"center",fontFamily:e.data.font,fontWeight:e.data.weight,fill:e.color||e.defaultStyle.stroke,textBaseline:"alphabetic"}}function xP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function EP(e,t,n,r){e=e.filter((function(e,r){var i=t(e,r),a=n(e,r);return null!=i&&isFinite(i)&&null!=a&&isFinite(a)})),r&&e.sort((function(e,n){return t(e)-t(n)}));for(var i,a,o,s=e.length,l=new Float64Array(s),c=new Float64Array(s),u=0,h=0,p=0;p<s;)o=e[p],l[p]=i=+t(o,p,e),c[p]=a=+n(o,p,e),u+=(i-u)/++p,h+=(a-h)/p;for(var d=0;d<s;++d)l[d]-=u,c[d]-=h;return[l,c,u,h]}function bP(e,t,n,r){for(var i=0,a=0,o=e.length;a<o;a++){var s=e[a],l=+t(s,a,e),c=+n(s,a,e);null!=l&&isFinite(l)&&null!=c&&isFinite(c)&&r(l,c,i++)}}function CP(e,t,n,r,i){var a=0,o=0;return bP(e,t,n,(function(e,t){var n=t-i(e),s=t-r;a+=n*n,o+=s*s})),1-a/o}function TP(e){return 180*Math.atan2(e[1][1]-e[0][1],e[1][0]-e[0][0])/Math.PI}function wP(e,t,n){for(var r=Math.log(t-e)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),a=[s(e),s(t)],o=0;l(a)&&o<1e4;);return a;function s(e){return[e,n(e)]}function l(e){o++;for(var t,n=e.length,r=!1,a=0;a<n-1;a++){var l=e[a],c=e[a+1],u=[((t=[l,c])[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2],h=s(u[0]),p=TP([l,u]),d=TP([l,h]);Math.abs(p-d)>i&&(e.splice(a+1,0,h),r=!0)}return r}}function SP(e,t,n,r){var i=r-e*e,a=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-a*e,a]}function kP(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=e?+e[0]:1/0,u=e?+e[1]:-1/0;bP(r,t,n,(function(t,n){++i,a+=(t-a)/i,o+=(n-o)/i,s+=(t*n-s)/i,l+=(t*t-l)/i,e||(t<c&&(c=t),t>u&&(u=t))}));var h=xP(SP(a,o,s,l),2),p=h[0],d=h[1],f=function(e){return d*e+p},m=[[c,f(c)],[u,f(u)]];return m.a=d,m.b=p,m.predict=f,m.rSquared=CP(r,t,n,o,f),m}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r}function _P(e){e.sort((function(e,t){return e-t}));var t=e.length/2;return t%1==0?(e[t-1]+e[t])/2:e[Math.floor(t)]}ok("point","word-cloud",{draw:function(e,t){var n=e.x,r=e.y,i=t.addShape("text",{attrs:Ph(Ph({},yP(e)),{x:n,y:r})}),a=e.data.rotate;return"number"==typeof a&&jk.rotate(i,a*Math.PI/180),i}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="word-cloud",t}Lh(t,e),t.getDefaultOptions=function(){return dP},t.prototype.changeData=function(e){this.updateOption({data:e}),this.options.imageMask?this.render():this.chart.changeData(lP({chart:this.chart,options:this.options}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){var t=this;return new Promise((function(n){var r=t.options.imageMask;if(!r)return e.prototype.render.call(t),void n();var i,a=function(r){t.options=Ph(Ph({},t.options),{imageMask:r||null}),e.prototype.render.call(t),n()};(i=r,new Promise((function(e,t){if(i instanceof HTMLImageElement)e(i);else{if(lp(i)){var n=new Image;return n.crossOrigin="anonymous",n.src=i,n.onload=function(){e(n)},void(n.onerror=function(){jM(NM.ERROR,!1,"image %s load failed !!!",i),t()})}jM(NM.WARN,void 0===i,"The type of imageMask option must be String or HTMLImageElement."),t()}}))).then(a).catch(a)}))},t.prototype.getSchemaAdaptor=function(){return vP},t.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout((function(){e.prototype.triggerResize.call(t)})))}}(jN);function AP(e){return(e=1-e*e*e)*e*e}function OP(e,t,n){var r=e[t],i=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>i&&e[a]-r<=r-e[i];)n[0]=++i,n[1]=a,++a}function IP(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i,a,o,s,l=xP(EP(r,t,n),4),c=l[0],u=l[1],h=l[2],p=l[3],d=c.length,f=0,m=0,g=0,v=0,y=0;for(i=0;i<d;)a=c[i],o=u[i++],f+=((s=a*a)-f)/i,m+=(s*a-m)/i,g+=(s*s-g)/i,v+=(a*o-v)/i,y+=(s*o-y)/i;var x=0,E=0,b=e?+e[0]:1/0,C=e?+e[1]:-1/0;bP(r,t,n,(function(t,n){E++,x+=(n-x)/E,e||(t<b&&(b=t),t>C&&(C=t))}));var T=g-f*f,w=f*T-m*m,S=(y*f-v*m)/w,k=(v*T-y*m)/w,_=-S*f,A=function(e){return S*(e-=h)*e+k*e+_+p},O=wP(b,C,A);return O.a=S,O.b=k-2*S*h,O.c=_-k*h+S*h*h+p,O.predict=A,O.rSquared=CP(r,t,n,x,A),O}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r}var MP={exp:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0;bP(r,t,n,(function(t,n){var r=Math.log(n),p=t*n;++i,a+=(n-a)/i,s+=(p-s)/i,c+=(t*p-c)/i,o+=(n*r-o)/i,l+=(p*r-l)/i,e||(t<u&&(u=t),t>h&&(h=t))}));var p=xP(SP(s/a,o/a,l/a,c/a),2),d=p[0],f=p[1];d=Math.exp(d);var m=function(e){return d*Math.exp(f*e)},g=wP(u,h,m);return g.a=d,g.b=f,g.predict=m,g.rSquared=CP(r,t,n,a,m),g}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},linear:kP,loess:function(){var e=function(e){return e[0]},t=function(e){return e[1]},n=.3;function r(r){for(var i=xP(EP(r,e,t,!0),4),a=i[0],o=i[1],s=i[2],l=i[3],c=a.length,u=Math.max(2,~~(n*c)),h=new Float64Array(c),p=new Float64Array(c),d=new Float64Array(c).fill(1),f=-1;++f<=2;){for(var m=[0,u-1],g=0;g<c;++g){for(var v=a[g],y=m[0],x=m[1],E=v-a[y]>a[x]-v?y:x,b=0,C=0,T=0,w=0,S=0,k=1/Math.abs(a[E]-v||1),_=y;_<=x;++_){var A=a[_],O=o[_],I=AP(Math.abs(v-A)*k)*d[_],M=A*I;b+=I,C+=M,T+=O*I,w+=O*M,S+=A*M}var N=xP(SP(C/b,T/b,w/b,S/b),2),F=N[0],L=N[1];h[g]=F+L*v,p[g]=Math.abs(o[g]-h[g]),OP(a,g+1,m)}if(2===f)break;var P=_P(p);if(Math.abs(P)<1e-12)break;for(var R,D,B=0;B<c;++B)R=p[B]/(6*P),d[B]=R>=1?1e-12:(D=1-R*R)*D}return function(e,t,n,r){for(var i,a=e.length,o=[],s=0,l=0,c=[];s<a;++s)i=e[s]+n,c[0]===i?c[1]+=(t[s]-c[1])/++l:(l=0,c[1]+=r,c=[i,t[s]],o.push(c));return c[1]+=r,o}(a,h,s,l)}return r.bandwidth=function(e){return arguments.length?(n=e,r):n},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(e){return arguments.length?(t=e,r):t},r},log:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]},r=Math.E;function i(i){var a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0,p=Math.log(r);bP(i,t,n,(function(t,n){var r=Math.log(t)/p;++a,o+=(r-o)/a,s+=(n-s)/a,l+=(r*n-l)/a,c+=(r*r-c)/a,e||(t<u&&(u=t),t>h&&(h=t))}));var d=xP(SP(o,s,l,c),2),f=d[0],m=d[1],g=function(e){return m*Math.log(e)/p+f},v=wP(u,h,g);return v.a=m,v.b=f,v.predict=g,v.rSquared=CP(i,t,n,s,g),v}return i.domain=function(t){return arguments.length?(e=t,i):e},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.base=function(e){return arguments.length?(r=e,i):r},i},poly:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]},r=3;function i(i){if(1===r){var a=kP().x(t).y(n).domain(e)(i);return a.coefficients=[a.b,a.a],delete a.a,delete a.b,a}if(2===r){var o=IP().x(t).y(n).domain(e)(i);return o.coefficients=[o.c,o.b,o.a],delete o.a,delete o.b,delete o.c,o}var s,l,c,u,h,p=xP(EP(i,t,n),4),d=p[0],f=p[1],m=p[2],g=p[3],v=d.length,y=[],x=[],E=r+1,b=0,C=0,T=e?+e[0]:1/0,w=e?+e[1]:-1/0;for(bP(i,t,n,(function(t,n){++C,b+=(n-b)/C,e||(t<T&&(T=t),t>w&&(w=t))})),s=0;s<E;++s){for(c=0,u=0;c<v;++c)u+=Math.pow(d[c],s)*f[c];for(y.push(u),h=new Float64Array(E),l=0;l<E;++l){for(c=0,u=0;c<v;++c)u+=Math.pow(d[c],s+l);h[l]=u}x.push(h)}x.push(y);var S=function(e){var t,n,r,i,a,o=e.length-1,s=[];for(t=0;t<o;++t){for(i=t,n=t+1;n<o;++n)Math.abs(e[t][n])>Math.abs(e[t][i])&&(i=n);for(r=t;r<o+1;++r)a=e[r][t],e[r][t]=e[r][i],e[r][i]=a;for(n=t+1;n<o;++n)for(r=o;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=o-1;n>=0;--n){for(a=0,r=n+1;r<o;++r)a+=e[r][n]*s[r];s[n]=(e[o][n]-a)/e[n][n]}return s}(x),k=function(e){e-=m;var t=g+S[0]+S[1]*e+S[2]*e*e;for(s=3;s<E;++s)t+=S[s]*Math.pow(e,s);return t},_=wP(T,w,k);return _.coefficients=function(e,t,n,r){var i,a,o,s,l=Array(e);for(i=0;i<e;++i)l[i]=0;for(i=e-1;i>=0;--i)for(o=t[i],s=1,l[i]+=o,a=1;a<=i;++a)s*=(i+1-a)/a,l[i-a]+=o*Math.pow(n,a)*s;return l[0]+=r,l}(E,S,-m,g),_.predict=k,_.rSquared=CP(i,t,n,b,k),_}return i.domain=function(t){return arguments.length?(e=t,i):e},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.order=function(e){return arguments.length?(r=e,i):r},i},pow:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0;bP(r,t,n,(function(t,n){var r=Math.log(t),p=Math.log(n);++i,a+=(r-a)/i,o+=(p-o)/i,s+=(r*p-s)/i,l+=(r*r-l)/i,c+=(n-c)/i,e||(t<u&&(u=t),t>h&&(h=t))}));var p=xP(SP(a,o,s,l),2),d=p[0],f=p[1];d=Math.exp(d);var m=function(e){return d*Math.pow(e,f)},g=wP(u,h,m);return g.a=d,g.b=f,g.predict=m,g.rSquared=CP(r,t,n,c,m),g}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},quad:IP};var NP=function(e,t){var n=t.view,r=t.options,i=r.xField,a=r.yField,o=n.getScaleByField(i),s=n.getScaleByField(a);return function(e,t,n){var r=[],i=e[0],a=null;if(e.length<=2)return function(e,t){var n=[];if(e.length){n.push(["M",e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var a=e[r];n.push(["L",a.x,a.y])}t&&n.push(["Z"])}return n}(e,t);for(var o=0,s=e.length;o<s;o++){var l=e[o];a&&a.x===l.x&&a.y===l.y||(r.push(l.x),r.push(l.y),a=l)}var c=QM(r,t,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}(e.map((function(e){return n.getCoordinate().convert({x:o.scale(e[0]),y:s.scale(e[1])})})),!1)};function FP(e){var t=e.data,n=void 0===t?[]:t,r=e.xField,i=e.yField;if(n.length){for(var a=!0,o=!0,s=n[0],l=void 0,c=1;c<n.length&&(l=n[c],s[r]!==l[r]&&(a=!1),s[i]!==l[i]&&(o=!1),a||o);c++)s=l;var u=[];a&&u.push(r),o&&u.push(i);var h=BM(function(e){var t,n=e.meta,r=void 0===n?{}:n,i=e.xField,a=e.yField,o=e.data,s=o[0][i],l=o[0][a],c=s>0,u=l>0;function h(e,t){var n=Zp(r,[e]);function i(e){return Zp(n,e)}var a={};return"x"===t?(Ep(s)&&(Ep(i("min"))||(a.min=c?0:2*s),Ep(i("max"))||(a.max=c?2*s:0)),a):(Ep(l)&&(Ep(i("min"))||(a.min=u?0:2*l),Ep(i("max"))||(a.max=u?2*l:0)),a)}return Ph(Ph({},r),((t={})[i]=Ph(Ph({},r[i]),h(i,"x")),t[a]=Ph(Ph({},r[a]),h(a,"y")),t))}(e),u);return rN({},e,{meta:h})}return e}function LP(e){var t=e.chart,n=e.options,r=n.data,i=n.type,a=n.color,o=n.shape,s=n.pointStyle,l=n.shapeField,c=n.colorField,u=n.xField,h=n.yField,p=n.sizeField,d=n.size,f=n.tooltip;p&&(d||(d=[2,8]),Ep(d)&&(d=[d,d])),f&&!f.fields&&(f=Ph(Ph({},f),{fields:[u,h,c,p,l]})),t.data(r),EF(rN({},e,{options:{seriesField:c,point:{color:a,shape:o,size:d,style:s},tooltip:f}}));var m=$M(t,"point");return i&&m.adjust(i),e}function PP(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=FP(n);return DM(hF(((t={})[a]=r,t[o]=i,t)))(rN({},e,{options:s}))}function RP(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return t.axis(a,r),t.axis(o,i),e}function DP(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.shapeField,o=n.sizeField,s=n.shapeLegend,l=n.sizeLegend,c=!1!==r;return i&&t.legend(i,!!c&&r),a&&(s?t.legend(a,s):t.legend(a,!1!==s&&r)),o&&t.legend(o,l||!1),c||s||l||t.legend(!1),e}function BP(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=$M(t,"point");if(r){var o=r.callback,s=Rh(r,["callback"]);a.label({fields:[i],callback:o,cfg:KM(s)})}else a.label(!1);return e}function zP(e){var t=e.options.quadrant,n=[];if(t){var r=t.xBaseline,i=void 0===r?0:r,a=t.yBaseline,o=void 0===a?0:a,s=t.labels,l=t.regionStyle,c=t.lineStyle,u=function(e,t){var n=10;return{regionStyle:[{position:{start:[e,"max"],end:["max",t]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[e,t]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",t],end:[e,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[e,t],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",t],offsetX:-10,offsetY:-10,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:n,offsetY:-10,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",t],offsetX:-10,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]}}(i,o);new Array(4).join(",").split(",").forEach((function(e,t){n.push(Ph(Ph({type:"region",top:!1},u.regionStyle[t].position),{style:rN({},u.regionStyle[t].style,null==l?void 0:l[t])}),Ph({type:"text",top:!0},rN({},u.labelStyle[t],null==s?void 0:s[t])))})),n.push({type:"line",top:!1,start:["min",o],end:["max",o],style:rN({},u.lineStyle,c)},{type:"line",top:!1,start:[i,"min"],end:[i,"max"],style:rN({},u.lineStyle,c)})}return DM(pF(n))(e)}function HP(e){var t=e.options,n=e.chart,r=t.regressionLine;if(r){var i=r.style,a=r.top,o=void 0!==a&&a,s={stroke:"#9ba29a",lineWidth:2,opacity:.5};n.annotation().shape({top:o,render:function(e,r){var a=e.addGroup({id:n.id+"-regression-line",name:"regression-line-group"}),o=function(e){var t,n=e.options,r=n.xField,i=n.yField,a=n.data,o=n.regressionLine,s=o.type,l=void 0===s?"linear":s,c=o.algorithm;return t=c?Vh(c)?c:c(a):MP[l]().x((function(e){return e[r]})).y((function(e){return e[i]}))(a),NP(t,e)}({view:r,options:t});a.addShape("path",{name:"regression-line",attrs:Ph(Ph({path:o},s),i)})}})}return e}function jP(e){var t=e.chart,n=e.options.tooltip;return n?t.tooltip(n):!1===n&&t.tooltip(!1),e}function GP(e){return DM(LP,PP,RP,DP,jP,BP,JF,aF,zP,oF,sF,HP)(e)}var $P=rN({},jN.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});nS("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var YP,UP,VP,WP,XP=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="scatter",r.on(gd.BEFORE_RENDER,(function(e){var t,n,i=r,a=i.options,o=i.chart;if((null===(t=e.data)||void 0===t?void 0:t.source)===dM.FILTER){var s=r.chart.filterData(r.chart.getData());PP({chart:o,options:Ph(Ph({},a),{data:s})})}(null===(n=e.data)||void 0===n?void 0:n.source)===dM.RESET&&PP({chart:o,options:a})})),r}return Lh(t,e),t.getDefaultOptions=function(){return $P},t.prototype.changeData=function(e){this.updateOption(FP(rN({},this.options,{data:e})));var t=this.options;PP({chart:this.chart,options:t}),this.chart.changeData(e)},t.prototype.getSchemaAdaptor=function(){return GP},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t}(jN);function qP(e){var t=e.chart,n=e.options,r=n.data,i=n.lineStyle,a=n.color,o=n.point,s=n.area;t.data(r);var l=rN({},e,{options:{line:{style:i,color:a},point:o?Ph({color:a},o):o,area:s?Ph({color:a},s):s,label:void 0}}),c=rN({},l,{options:{tooltip:!1}}),u=(null==o?void 0:o.state)||n.state,h=rN({},l,{options:{tooltip:!1,state:u}});return xF(l),EF(h),yF(c),e}function KP(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return DM(hF(((t={})[a]=r,t[o]=i,t)))(e)}function QP(e){var t=e.chart,n=e.options,r=n.radius,i=n.startAngle,a=n.endAngle;return t.coordinate("polar",{radius:r,startAngle:i,endAngle:a}),e}function ZP(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis,a=n.yField,o=n.yAxis;return t.axis(r,i),t.axis(a,o),e}function JP(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=$M(t,"line");if(r){var o=r.callback,s=Rh(r,["callback"]);a.label({fields:[i],callback:o,cfg:KM(s)})}else a.label(!1);return e}function eR(e){return DM(qP,KP,sF,QP,ZP,rF,iF,JP,aF,oF,pF())(e)}IS("radar-tooltip",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),t.prototype.getTooltipItems=function(t){var n=this.getTooltipCfg(),r=n.shared,i=n.title,a=e.prototype.getTooltipItems.call(this,t);if(a.length>0){var o=this.view.geometries[0],s=o.dataArray,l=a[0].name,c=[];return s.forEach((function(e){e.forEach((function(e){var t=jk.getTooltipItems(e,o)[0];if(!r&&t&&t.name===l){var n=Uh(i)?l:i;c.push(Ph(Ph({},t),{name:t.title,title:n}))}else if(r&&t){n=Uh(i)?t.name||l:i;c.push(Ph(Ph({},t),{name:t.title,title:n}))}}))})),c}return[]},t}(GS)),gw("radar-tooltip",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.init=function(){this.context.view.removeInteraction("tooltip")},t.prototype.show=function(){var e=this.context.event;this.getTooltipController().showTooltip({x:e.x,y:e.y})},t.prototype.hide=function(){this.getTooltipController().hideTooltip()},t.prototype.getTooltipController=function(){return this.context.view.getController("radar-tooltip")},t}(pw)),nS("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="radar",t}Lh(t,e),t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return rN({},e.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},t.prototype.getSchemaAdaptor=function(){return eR}}(jN),(UP=YP||(YP={})).Left="Left",UP.Right="Right",(WP=VP||(VP={})).Line="line",WP.Column="column";var tR={nice:!0,label:{autoHide:!0,autoRotate:!1}},nR=Ph(Ph({},tR),{position:"left"}),rR=Ph(Ph({},tR),{position:"right",grid:null});function iR(e){return Zp(e,"geometry")===VP.Line}function aR(e){return Zp(e,"geometry")===VP.Column}function oR(e,t,n){return aR(n)?rN({},{geometry:VP.Column,label:n.label&&n.isRange?{content:function(e){var n;return null===(n=e[t])||void 0===n?void 0:n.join("-")}}:void 0},n):Ph({geometry:VP.Line},n)}function sR(e,t){var n=e[0],r=e[1];return Vh(t)?[t[0],t[1]]:[Zp(t,n),Zp(t,r)]}function lR(e,t){return t===YP.Left?!1!==e&&rN({},nR,e):t===YP.Right?!1!==e&&rN({},rR,e):e}function cR(e){var t=e.view,n=e.geometryOption,r=e.yField,i=e.legend,a=Zp(i,"marker"),o=$M(t,iR(n)?"line":"interval");if(!n.seriesField){var s=Zp(t,"options.scales."+r+".alias")||r,l=o.getAttribute("color"),c=t.getTheme().defaultColor;return l&&(c=jk.getMappingValue(l,s,Zp(l,["values",0],c))),[{value:r,name:s,marker:(Yh(a)?a:!Wp(a)&&rN({},{style:{stroke:c,fill:c}},a))||(iR(n)?{symbol:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},style:{lineWidth:2,r:6,stroke:c}}:{symbol:"square",style:{fill:c}}),isGeometry:!0,viewId:t.id}]}var u=o.getGroupAttributes();return op(u,(function(e,n){var r=jk.getLegendItems(t,o,n,t.getTheme(),a);return e.concat(r)}),[])}var uR=function(e,t){var n=t[0],r=t[1],i=e.getOptions().data,a=e.getXScale(),o=sd(i);if(a&&o){var s=up(i,a.field),l=sd(s),c=Math.floor(n*(l-1)),u=Math.floor(r*(l-1));e.filter(a.field,(function(e){var t=s.indexOf(e);return!(t>-1)||function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}(t,c,u)})),e.render(!0)}};function hR(e){var t,n=e.options,r=n.geometryOptions,i=void 0===r?[]:r,a=n.xField,o=n.yField,s=dp(i,(function(e){var t=e.geometry;return t===VP.Line||void 0===t}));return rN({},{options:{geometryOptions:[],meta:(t={},t[a]={type:"cat",sync:!0,range:s?[0,1]:void 0},t),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},e,{options:{yAxis:sR(o,n.yAxis),geometryOptions:[oR(0,o[0],i[0]),oR(0,o[1],i[1])],annotations:sR(o,n.annotations)}})}function pR(e){var t,n,r=e.chart,i=e.options.geometryOptions,a={line:0,column:1};return[{type:null===(t=i[0])||void 0===t?void 0:t.geometry,id:"left-axes-view"},{type:null===(n=i[1])||void 0===n?void 0:n.geometry,id:"right-axes-view"}].sort((function(e,t){return-a[e.type]+a[t.type]})).forEach((function(e){return r.createView({id:e.id})})),e}function dR(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.geometryOptions,o=n.data,s=n.tooltip;return[Ph(Ph({},a[0]),{id:"left-axes-view",data:o[0],yField:i[0]}),Ph(Ph({},a[1]),{id:"right-axes-view",data:o[1],yField:i[1]})].forEach((function(e){var n=e.id,i=e.data,a=e.yField,o=aR(e)&&e.isPercent,l=o?PF(i,a,r,a):i,c=WM(t,n).data(l),u=o?Ph({formatter:function(t){return{name:t[e.seriesField]||a,value:(100*Number(t[a])).toFixed(2)+"%"}}},s):s;!function(e){var t=e.options,n=e.chart,r=t.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,s=r.groupField,l=r.isGroup,c=["xField","yField"];if(iR(r)){xF(rN({},e,{options:Ph(Ph(Ph({},BM(t,c)),r),{line:{color:r.color,style:r.lineStyle}})})),EF(rN({},e,{options:Ph(Ph(Ph({},BM(t,c)),r),{point:r.point&&Ph({color:a,shape:"circle"},r.point)})}));var u=[];l&&u.push({type:"dodge",dodgeBy:s||o,customOffset:0}),i&&u.push({type:"stack"}),u.length&&Xh(n.geometries,(function(e){e.adjust(u)}))}aR(r)&&sL(rN({},e,{options:Ph(Ph(Ph({},BM(t,c)),r),{widthRatio:r.columnWidthRatio,interval:Ph(Ph({},BM(r,["color"])),{style:r.columnStyle})})}))}({chart:c,options:{xField:r,yField:a,tooltip:u,geometryOption:e}})})),e}function fR(e){var t,n=e.chart,r=e.options.geometryOptions,i=(null===(t=n.getTheme())||void 0===t?void 0:t.colors10)||[],a=0;return n.once("beforepaint",(function(){Xh(r,(function(e,t){var r=WM(n,0===t?"left-axes-view":"right-axes-view");if(!e.color){var o=r.getGroupScales(),s=Zp(o,[0,"values","length"],1),l=i.slice(a,a+s).concat(0===t?[]:i);r.geometries.forEach((function(t){e.seriesField?t.color(e.seriesField,l):t.color(l[0])})),a+=s}})),n.render(!0)})),e}function mR(e){var t,n,r=e.chart,i=e.options,a=i.xAxis,o=i.yAxis,s=i.xField,l=i.yField;return hF(((t={})[s]=a,t[l[0]]=o[0],t))(rN({},e,{chart:WM(r,"left-axes-view")})),hF(((n={})[s]=a,n[l[1]]=o[1],n))(rN({},e,{chart:WM(r,"right-axes-view")})),e}function gR(e){var t=e.chart,n=e.options,r=WM(t,"left-axes-view"),i=WM(t,"right-axes-view"),a=n.xField,o=n.yField,s=n.xAxis,l=n.yAxis;return t.axis(a,!1),t.axis(o[0],!1),t.axis(o[1],!1),r.axis(a,s),r.axis(o[0],lR(l[0],YP.Left)),i.axis(a,!1),i.axis(o[1],lR(l[1],YP.Right)),e}function vR(e){var t=e.chart,n=e.options.tooltip,r=WM(t,"left-axes-view"),i=WM(t,"right-axes-view");return t.tooltip(n),r.tooltip({shared:!0}),i.tooltip({shared:!0}),e}function yR(e){var t=e.chart;return aF(rN({},e,{chart:WM(t,"left-axes-view")})),aF(rN({},e,{chart:WM(t,"right-axes-view")})),e}function xR(e){var t=e.chart,n=e.options.annotations,r=Zp(n,[0]),i=Zp(n,[1]);return pF(r)(rN({},e,{chart:WM(t,"left-axes-view"),options:{annotations:r}})),pF(i)(rN({},e,{chart:WM(t,"right-axes-view"),options:{annotations:i}})),e}function ER(e){var t=e.chart;return sF(rN({},e,{chart:WM(t,"left-axes-view")})),sF(rN({},e,{chart:WM(t,"right-axes-view")})),sF(e),e}function bR(e){var t=e.chart;return oF(rN({},e,{chart:WM(t,"left-axes-view")})),oF(rN({},e,{chart:WM(t,"right-axes-view")})),e}function CR(e){var t=e.chart,n=e.options.yAxis;return dF(rN({},e,{chart:WM(t,"left-axes-view"),options:{yAxis:n[0]}})),dF(rN({},e,{chart:WM(t,"right-axes-view"),options:{yAxis:n[1]}})),e}function TR(e){var t=e.chart,n=e.options,r=n.legend,i=n.geometryOptions,a=n.yField,o=n.data,s=WM(t,"left-axes-view"),l=WM(t,"right-axes-view");if(!1===r)t.legend(!1);else if(Wh(r)&&!0===r.custom)t.legend(r);else{var c=Zp(i,[0,"legend"],r),u=Zp(i,[1,"legend"],r);t.once("beforepaint",(function(){var e=o[0].length?cR({view:s,geometryOption:i[0],yField:a[0],legend:c}):[],n=o[1].length?cR({view:l,geometryOption:i[1],yField:a[1],legend:u}):[];t.legend(rN({},r,{custom:!0,items:e.concat(n)}))})),i[0].seriesField&&s.legend(i[0].seriesField,c),i[1].seriesField&&l.legend(i[1].seriesField,u),t.on("legend-item:click",(function(e){var n=Zp(e,"gEvent.delegateObject",{});if(n&&n.item){var r=n.item,i=r.value,o=r.isGeometry,s=r.viewId;if(o){if(ep(a,(function(e){return e===i}))>-1)Xh(Zp(WM(t,s),"geometries"),(function(e){e.changeVisible(!n.item.unchecked)}))}else{var l=Zp(t.getController("legend"),"option.items",[]);Xh(t.views,(function(e){Xh(e.getGroupScales(),(function(t){t.values&&t.values.indexOf(i)>-1&&e.filter(t.field,(function(e){return!Jh(l,(function(t){return t.value===e})).unchecked}))})),t.render(!0)}))}}}))}return e}function wR(e){var t=e.chart,n=e.options.slider,r=WM(t,"left-axes-view"),i=WM(t,"right-axes-view");return n&&(r.option("slider",n),r.on("slider:valuechanged",(function(e){var t=e.event,n=t.value,r=t.originValue;qp(n,r)||uR(i,n)})),t.once("afterpaint",(function(){if(!Fp(n)){var e=n.start,t=n.end;(e||t)&&uR(i,[e,t])}}))),e}function SR(e){return DM(hR,pR,ER,dR,mR,gR,CR,vR,yR,xR,bR,fR,TR,wR)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dual-axes",t}Lh(t,e),t.prototype.getDefaultOptions=function(){return rN({},e.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},t.prototype.getSchemaAdaptor=function(){return SR}}(jN);var kR={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return""+Zp(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},_R={appendPadding:2,tooltip:Ph({},kR),animation:{}};function AR(e){return Kp(e||[],(function(e,t){return{x:""+t,y:e}}))}function OR(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.areaStyle,o=n.point,s=n.line,l=null==o?void 0:o.state,c=AR(r);t.data(c);var u=rN({},e,{options:{xField:"x",yField:"y",area:{color:i,style:a},line:s,point:o}}),h=rN({},u,{options:{tooltip:!1}}),p=rN({},u,{options:{tooltip:!1,state:l}});return yF(u),xF(h),EF(p),t.axis(!1),t.legend(!1),e}function IR(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=AR(r.data);return DM(hF(((t={}).x=i,t.y=a,t),((n={}).x={type:"cat"},n.y=uN(o,"y"),n)))(e)}function MR(e){return DM(nF("areaStyle"),OR,IR,iF,sF,oF,pF())(e)}function NR(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.lineStyle,o=n.point,s=null==o?void 0:o.state,l=AR(r);t.data(l);var c=rN({},e,{options:{xField:"x",yField:"y",line:{color:i,style:a},point:o}}),u=rN({},c,{options:{tooltip:!1,state:s}});return xF(c),EF(u),t.axis(!1),t.legend(!1),e}function FR(e){return DM(NR,IR,sF,iF,oF,pF())(e)}var LR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-line",t}return Lh(t,e),t.getDefaultOptions=function(){return _R},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;IR({chart:t,options:this.options}),t.changeData(AR(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return FR},t}(jN);function PR(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.columnStyle,o=n.columnWidthRatio,s=AR(r);return t.data(s),bF(rN({},e,{options:{xField:"x",yField:"y",widthRatio:o,interval:{style:a,color:i}}})),t.axis(!1),t.legend(!1),t.interaction("element-active"),e}function RR(e){return DM(sF,nF("columnStyle"),PR,IR,iF,oF,pF())(e)}var DR={appendPadding:2,tooltip:Ph({},{showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return""+Zp(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}}),animation:{}},BR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-column",t}return Lh(t,e),t.getDefaultOptions=function(){return DR},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;IR({chart:t,options:this.options}),t.changeData(AR(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return RR},t}(jN),zR={appendPadding:2,tooltip:Ph({},kR),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},HR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-area",t}return Lh(t,e),t.getDefaultOptions=function(){return zR},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;IR({chart:t,options:this.options}),t.changeData(AR(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return MR},t}(jN);function jR(e,t,n){if(1===n)return[0,t];var r=Math.floor(e/t);return[t*r,t*(r+1)]}function GR(e,t,n,r,i){var a=Hp(e);!function(e,t){var n;if(Yh(t))n=function(e,n){return t(e)-t(n)};else{var r=[];lp(t)?r.push(t):Vh(t)&&(r=t),n=function(e,t){for(var n=0;n<r.length;n+=1){var i=r[n];if(e[i]>t[i])return 1;if(e[i]<t[i])return-1}return 0}}e.sort(n)}(a,t);var o=up(a,t),s=ip(o),l=s.max-s.min,c=n;if(!n&&r&&(c=r>1?l/(r-1):s.max),!n&&!r){var u=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}(o);c=l/u}var h={},p=gp(a,i);Wp(p)?Xh(a,(function(e){var n=jR(e[t],c,r),i=n[0]+"-"+n[1];kp(h,i)||(h[i]={range:n,count:0}),h[i].count+=1})):Object.keys(p).forEach((function(e){Xh(p[e],(function(n){var a=jR(n[t],c,r),o=a[0]+"-"+a[1]+"-"+e;kp(h,o)||(h[o]={range:a,count:0},h[o][i]=e),h[o].count+=1}))}));var d=[];return Xh(h,(function(e){d.push(e)})),d}var $R=rN({},jN.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function YR(e){var t=e.chart,n=e.options,r=n.data,i=n.binField,a=n.binNumber,o=n.binWidth,s=n.color,l=n.stackField,c=n.legend,u=n.columnStyle,h=GR(r,i,o,a,l);return t.data(h),bF(rN({},e,{options:{xField:"range",yField:"count",seriesField:l,isStack:!0,interval:{color:s,style:u}}})),c&&l&&t.legend(l,c),e}function UR(e){var t,n=e.options,r=n.xAxis,i=n.yAxis;return DM(hF(((t={}).range=r,t.count=i,t)))(e)}function VR(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis;return!1===r?t.axis("range",!1):t.axis("range",r),!1===i?t.axis("count",!1):t.axis("count",i),e}function WR(e){var t=e.chart,n=e.options.label,r=$M(t,"interval");if(n){var i=n.callback,a=Rh(n,["callback"]);r.label({fields:["count"],callback:i,cfg:KM(a)})}else r.label(!1);return e}function XR(e){return DM(sF,nF("columnStyle"),YR,UR,VR,lF,WR,iF,aF,oF)(e)}var qR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="histogram",t}return Lh(t,e),t.getDefaultOptions=function(){return $R},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.binField,r=t.binNumber,i=t.binWidth,a=t.stackField;this.chart.changeData(GR(e,n,i,r,a))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return XR},t}(jN),KR=["#FAAD14","#E8EDF3"],QR={percent:.2,color:KR,animation:{}};function ZR(e){var t=yp(cN(e)?e:0,0,1);return[{type:"current",percent:t},{type:"target",percent:1-t}]}function JR(e){var t=e.chart,n=e.options,r=n.percent,i=n.progressStyle,a=n.color,o=n.barWidthRatio;return t.data(ZR(r)),bF(rN({},e,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:o,interval:{style:i,color:lp(a)?[a,KR[1]]:a},args:{zIndexReversed:!0}}})),t.tooltip(!1),t.axis(!1),t.legend(!1),e}function eD(e){return e.chart.coordinate("rect").transpose(),e}function tD(e){return DM(JR,hF({}),eD,oF,sF,pF())(e)}var nD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="process",t}return Lh(t,e),t.getDefaultOptions=function(){return QR},t.prototype.changeData=function(e){this.updateOption({percent:e}),this.chart.changeData(ZR(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return tD},t}(jN);function rD(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius;return t.coordinate("theta",{innerRadius:r,radius:i}),e}function iD(e,t){var n=e.chart,r=e.options,i=r.innerRadius,a=r.statistic,o=r.percent,s=r.meta;if(n.getController("annotation").clear(!0),i&&a){var l=Zp(s,["percent","formatter"])||function(e){return(100*e).toFixed(2)+"%"},c=a.content;c&&(c=rN({},c,{content:Uh(c.content)?l(o):c.content})),lN(n,{statistic:Ph(Ph({},a),{content:c}),plotType:"ring-progress"},{percent:o})}return t&&n.render(!0),e}function aD(e){return DM(JR,hF({}),rD,iD,oF,sF,pF())(e)}var oD={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},sD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ring-process",t}return Lh(t,e),t.getDefaultOptions=function(){return oD},t.prototype.changeData=function(e){this.chart.emit(gd.BEFORE_CHANGE_DATA,NS.fromData(this.chart,gd.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(ZR(e)),iD({chart:this.chart,options:this.options},!0),this.chart.emit(gd.AFTER_CHANGE_DATA,NS.fromData(this.chart,gd.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return aD},t}(jN);function lD(e){var t=e.chart,n=e.options,r=n.data,i=n.type,a=n.xField,o=n.yField,s=n.colorField,l=n.sizeField,c=n.sizeRatio,u=n.shape,h=n.color,p=n.tooltip,d=n.heatmapStyle;t.data(r);var f="polygon";"density"===i&&(f="heatmap");var m=fF(p,[a,o,s]),g=m.fields,v=m.formatter,y=1;return(c||0===c)&&(u||l?c<0||c>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):y=c:console.warn("sizeRatio is not in effect: Must define shape or sizeField first")),vF(rN({},e,{options:{type:f,colorField:s,tooltipFields:g,shapeField:l||"",label:void 0,mapping:{tooltip:v,shape:u&&(l?function(e){var t=r.map((function(e){return e[l]})),n=Math.min.apply(Math,t),i=Math.max.apply(Math,t);return[u,(Zp(e,l)-n)/(i-n),y]}:function(){return[u,1,y]}),color:h||s&&t.getTheme().sequenceColors.join("-"),style:d}}})),e}function cD(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return DM(hF(((t={})[a]=r,t[o]=i,t)))(e)}function uD(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function hD(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.sizeField,o=n.sizeLegend,s=!1!==r;return i&&t.legend(i,!!s&&r),a&&t.legend(a,void 0===o?r:o),s||o||t.legend(!1),e}function pD(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,a=$M(t,"density"===n.type?"heatmap":"polygon");if(r){if(i){var o=r.callback,s=Rh(r,["callback"]);a.label({fields:[i],callback:o,cfg:KM(s)})}}else a.label(!1);return e}function dD(e){var t=e.chart,n=e.options,r=n.coordinate,i=n.reflect;return r&&t.coordinate({type:r.type||"rect",cfg:r.cfg}),i&&t.coordinate().reflect(i),e}function fD(e){return DM(sF,nF("heatmapStyle"),cD,dD,lD,uD,hD,iF,pD,pF(),aF,oF,lF)(e)}var mD,gD=rN({},jN.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});ok("polygon","circle",{draw:function(e,t){var n,r,i=e.x,a=e.y,o=this.parsePoints(e.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l)/2,u=Number(e.shape[1]),h=Number(e.shape[2]),p=c*Math.sqrt(h)*Math.sqrt(u),d=(null===(n=e.style)||void 0===n?void 0:n.fill)||e.color||(null===(r=e.defaultStyle)||void 0===r?void 0:r.fill);return t.addShape("circle",{attrs:Ph(Ph(Ph({x:i,y:a,r:p},e.defaultStyle),e.style),{fill:d})})}}),ok("polygon","square",{draw:function(e,t){var n,r,i=e.x,a=e.y,o=this.parsePoints(e.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l),u=Number(e.shape[1]),h=Number(e.shape[2]),p=c*Math.sqrt(h)*Math.sqrt(u),d=(null===(n=e.style)||void 0===n?void 0:n.fill)||e.color||(null===(r=e.defaultStyle)||void 0===r?void 0:r.fill);return t.addShape("rect",{attrs:Ph(Ph(Ph({x:i-p/2,y:a-p/2,width:p,height:p},e.defaultStyle),e.style),{fill:d})})}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t}Lh(t,e),t.getDefaultOptions=function(){return gD},t.prototype.getSchemaAdaptor=function(){return fD},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(jN);var vD=rN({},jN.getDefaultOptions(),{meta:(mD={},mD.$$range$$={min:0,alias:"low-q1-median-q3-high"},mD),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),yD=function(e,t){var n=e;if(Array.isArray(t)){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4];n=Kp(e,(function(e){return e.$$range$$=[e[r],e[i],e[a],e[o],e[s]],e}))}return n};function xD(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.groupField,o=n.color,s=n.tooltip,l=n.boxStyle;t.data(yD(n.data,i));var c=Vh(i)?"$$range$$":i,u=i?Vh(i)?i:[i]:[],h=s;!1!==h&&(h=rN({},{fields:Vh(i)?i:[]},h));var p=wF(rN({},e,{options:{xField:r,yField:c,seriesField:a,tooltip:h,rawFields:u,label:!1,schema:{shape:"box",color:o,style:l}}})).ext;return a&&p.geometry.adjust("dodge"),e}function ED(e){var t=e.chart,n=e.options,r=n.xField,i=n.data,a=n.outliersField,o=n.outliersStyle,s=n.padding,l=n.label;if(!a)return e;var c=t.createView({padding:s,id:"outliers_view"}),u=i.reduce((function(e,t){return t[a].forEach((function(n){var r;return e.push(Ph(Ph({},t),((r={})[a]=n,r)))})),e}),[]);return c.data(u),EF({chart:c,options:{xField:r,yField:a,point:{shape:"circle",style:o},label:l}}),c.axis(!1),e}function bD(e){var t,n,r=e.chart,i=e.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=i.outliersField,h=Array.isArray(c)?"$$range$$":c,p={};if(u){var d="$$y_outliers$$";(t={})[u]={sync:d,nice:!0},t[h]={sync:d,nice:!0},p=t}var f=rN(p,a,((n={})[l]=BM(o,GN),n[h]=BM(s,GN),n));return r.scale(f),e}function CD(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=Array.isArray(o)?"$$range$$":o;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis("$$range$$",!1):t.axis(s,i),e}function TD(e){var t=e.chart,n=e.options,r=n.legend,i=n.groupField;return i?r?t.legend(i,r):t.legend(i,{position:"bottom"}):t.legend(!1),e}function wD(e){return DM(xD,ED,bD,CD,TD,iF,aF,oF,sF)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="box",t}Lh(t,e),t.getDefaultOptions=function(){return vD},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField,n=this.chart.views.find((function(e){return"outliers_view"===e.id}));n&&n.data(e),this.chart.changeData(yD(e,t))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return wD}}(jN);var SD,kD,_D={exports:{}},AD={exports:{}};kD=(SD=AD).exports,SD.exports.isNumber=function(e){return"number"==typeof e},SD.exports.findMin=function(e){if(0===e.length)return 1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.min(t,e[n]);return t},SD.exports.findMax=function(e){if(0===e.length)return-1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.max(t,e[n]);return t},SD.exports.findMinMulti=function(e){for(var t=kD.findMin(e[0]),n=1;n<e.length;n++)t=Math.min(t,kD.findMin(e[n]));return t},SD.exports.findMaxMulti=function(e){for(var t=kD.findMax(e[0]),n=1;n<e.length;n++)t=Math.max(t,kD.findMax(e[n]));return t},SD.exports.inside=function(e,t,n){return e<=n&&n<=t},function(e){var t=Math.log(2),n=e.exports,r=AD.exports;function i(e){return 1-Math.abs(e)}e.exports.getUnifiedMinMax=function(e,t){return n.getUnifiedMinMaxMulti([e],t)},e.exports.getUnifiedMinMaxMulti=function(e,t){t=t||{};var n=!1,i=!1,a=r.isNumber(t.width)?t.width:2,o=r.isNumber(t.size)?t.size:50,s=r.isNumber(t.min)?t.min:(n=!0,r.findMinMulti(e)),l=r.isNumber(t.max)?t.max:(i=!0,r.findMaxMulti(e)),c=(l-s)/(o-1);return n&&(s-=2*a*c),i&&(l+=2*a*c),{min:s,max:l}},e.exports.create=function(e,t){if(t=t||{},!e||0===e.length)return[];var a=r.isNumber(t.size)?t.size:50,o=r.isNumber(t.width)?t.width:2,s=n.getUnifiedMinMax(e,{size:a,width:o,min:t.min,max:t.max}),l=s.min,c=s.max-l,u=c/(a-1);if(0===c)return[{x:l,y:1}];for(var h=[],p=0;p<a;p++)h.push({x:l+p*u,y:0});var d=function(e,t){for(var n={},r=0,i=-t;i<=t;i++)r+=e(i/t),n[i]=r;return n}(i,o),f=d[o],m=d[o-1]-d[o-2],g=0;e.forEach((function(e){var t=function(e){return Math.floor((e-l)/u)}(e);if(!(t+o<0||t-o>=h.length)){var n=Math.max(t-o,0),i=t,a=Math.min(t+o,h.length-1),s=n-(t-o),c=t+o-a,p=d[-o-1+s]||0,v=d[-o-1+c]||0,y=f/(f-p-v);s>0&&(g+=y*(s-1)*m);var x=Math.max(0,t-o+1);r.inside(0,h.length-1,x)&&(h[x].y+=1*y*m),r.inside(0,h.length-1,i+1)&&(h[i+1].y-=2*y*m),r.inside(0,h.length-1,a+1)&&(h[a+1].y+=1*y*m)}}));var v=g,y=0,x=0;return h.forEach((function(e){y+=e.y,v+=y,e.y=v,x+=v})),x>0&&h.forEach((function(e){e.y/=x})),h},e.exports.getExpectedValueFromPdf=function(e){if(e&&0!==e.length){var t=0;return e.forEach((function(e){t+=e.x*e.y})),t}},e.exports.getXWithLeftTailArea=function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=0;i<e.length&&(r=i,!((n+=e[i].y)>=t));i++);return e[r].x}},e.exports.getPerplexity=function(e){if(e&&0!==e.length){var n=0;return e.forEach((function(e){var t=Math.log(e.y);isFinite(t)&&(n+=e.y*t)})),n=-n/t,Math.pow(2,n)}}}(_D);var OD=_D.exports;function ID(e,t){var n=e.length*t;if(0===e.length)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function MD(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ND(e,t,n,r){for(n=n||0,r=r||e.length-1;r>n;){if(r-n>600){var i=r-n+1,a=t-n+1,o=Math.log(i),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(l*=-1),ND(e,t,Math.max(n,Math.floor(t-a*s/i+l)),Math.min(r,Math.floor(t+(i-a)*s/i+l)))}var c=e[t],u=n,h=r;for(MD(e,n,t),e[r]>c&&MD(e,n,r);u<h;){for(MD(e,u,h),u++,h--;e[u]<c;)u++;for(;e[h]>c;)h--}e[n]===c?MD(e,n,h):MD(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function FD(e,t){var n=e.slice();if(Array.isArray(t)){!function(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(RD(e.length,t[r]));n.push(e.length-1),n.sort(PD);var i=[0,n.length-1];for(;i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);LD(e,n[s],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,s,s,a)}}}(n,t);for(var r=[],i=0;i<t.length;i++)r[i]=ID(n,t[i]);return r}return LD(n,RD(n.length,t),0,n.length-1),ID(n,t)}function LD(e,t,n,r){t%1==0?ND(e,t,n,r):(ND(e,t=Math.floor(t),n,r),ND(e,t+1,t+1,r))}function PD(e,t){return e-t}function RD(e,t){var n=e*t;return 1===t?e-1:0===t?0:n%1!=0?Math.ceil(n)-1:e%2==0?n-.5:n}var DD=function(e){return{low:rp(e),high:np(e),q1:FD(e,.25),q3:FD(e,.75),median:FD(e,[.5]),minMax:[rp(e),np(e)],quantile:[FD(e,.25),FD(e,.75)]}},BD=function(e,t){var n=OD.create(e,t);return{violinSize:n.map((function(e){return e.y})),violinY:n.map((function(e){return e.x}))}},zD=function(e){var t=e.xField,n=e.yField,r=e.seriesField,i=e.data,a=e.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var s=gp(i,t);return Object.keys(s).map((function(e){var t=s[e].map((function(e){return e[n]}));return Ph(Ph({x:e},BD(t,o)),DD(t))}))}var l=[],c=gp(i,r);return Object.keys(c).forEach((function(e){var i=gp(c[e],t);return Object.keys(i).forEach((function(t){var a,s=i[t].map((function(e){return e[n]}));l.push(Ph(Ph(((a={x:t})[r]=e,a),BD(s,o)),DD(s)))}))})),l},HD=rN({},jN.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),jD=["low","high","q1","q3","median"],GD=[{type:"dodge",marginRatio:1/32}];function $D(e){var t=e.chart,n=e.options;return t.data(zD(n)),e}function YD(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,a=n.shape,o=void 0===a?"violin":a,s=n.violinStyle,l=n.tooltip,c=n.state,u=t.createView({id:"violin_view"});return function(e){var t=e.options,n=t.violin,r=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=fF(t.tooltip,[r,i,a,o]),l=s.fields,c=s.formatter;n&&vF(rN({},e,{options:{type:"violin",colorField:a,tooltipFields:l,mapping:Ph({tooltip:c},n)}}))}({chart:u,options:{xField:"x",yField:"violinY",seriesField:r||"x",sizeField:"violinSize",tooltip:Ph({fields:jD},l),violin:{style:s,color:i,shape:o},state:c}}),u.geometries[0].adjust(GD),e}function UD(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,a=n.tooltip,o=n.box;if(!1===o)return e;var s=t.createView({id:"min_max_view"});bF({chart:s,options:{xField:"x",yField:"minMax",seriesField:r||"x",tooltip:Ph({fields:jD},a),state:"object"==typeof o?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(GD);var l=t.createView({id:"quantile_view"});bF({chart:l,options:{xField:"x",yField:"quantile",seriesField:r||"x",tooltip:Ph({fields:jD},a),state:"object"==typeof o?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(GD);var c=t.createView({id:"median_view"});return EF({chart:c,options:{xField:"x",yField:"median",seriesField:r||"x",tooltip:Ph({fields:jD},a),state:"object"==typeof o?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),c.geometries[0].adjust(GD),l.axis(!1),s.axis(!1),c.axis(!1),c.legend(!1),s.legend(!1),l.legend(!1),e}function VD(e){var t,n=e.chart,r=e.options,i=r.meta,a=r.xAxis,o=r.yAxis,s=rN({},i,((t={}).x=Ph(Ph({sync:!0},BM(a,GN)),{type:"cat"}),t.violinY=Ph({sync:!0},BM(o,GN)),t.minMax=Ph({sync:"violinY"},BM(o,GN)),t.quantile=Ph({sync:"violinY"},BM(o,GN)),t.median=Ph({sync:"violinY"},BM(o,GN)),t));return n.scale(s),e}function WD(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=WM(t,"violin_view");return!1===r?a.axis("x",!1):a.axis("x",r),!1===i?a.axis("violinY",!1):a.axis("violinY",i),t.axis(!1),e}function XD(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField,a=n.shape;if(!1===r)t.legend(!1);else{var o=i||"x",s=nd(r,["selected"]);a&&a.startsWith("hollow")||Zp(s,["marker","style","lineWidth"])||Jp(s,["marker","style","lineWidth"],0),t.legend(o,s),Zp(r,"selected")&&Xh(t.views,(function(e){return e.legend(o,r)}))}return e}function qD(e){var t=WM(e.chart,"violin_view");return pF()(Ph(Ph({},e),{chart:t})),e}function KD(e){var t=e.chart,n=e.options.animation;return Xh(t.views,(function(e){"boolean"==typeof n?e.animate(n):e.animate(!0),Xh(e.geometries,(function(e){e.animate(n)}))})),e}function QD(e){return DM(sF,$D,YD,UD,VD,iF,WD,XD,aF,qD,KD)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="violin",t}Lh(t,e),t.getDefaultOptions=function(){return HD},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(zD(this.options))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return QD}}(jN);var ZD={normal:function(e){return e},multiply:function(e,t){return e*t/255},screen:function(e,t){return 255*(1-(1-e/255)*(1-t/255))},overlay:function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},darken:function(e,t){return e>t?t:e},lighten:function(e,t){return e>t?e:t},dodge:function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e},burn:function(e,t){return 255===t?255:0===e?0:255*(1-Math.min(1,(1-t/255)/(e/255)))}};function JD(e,t,n){void 0===n&&(n="normal");var r,i=(r=function(e){if(!ZD[e])throw new Error("unknown blend mode "+e);return ZD[e]}(n),function(e,t){var n=[];return n[0]=r(e[0],t[0]),n[1]=r(e[1],t[1]),n[2]=r(e[2],t[2]),n})(eB(e),eB(t)),a=eB(e),o=a[0],s=a[1],l=a[2],c=a[3],u=eB(t),h=u[0],p=u[1],d=u[2],f=u[3],m=Number((c+f*(1-c)).toFixed(2));return"rgba("+Math.round((c*(1-f)*(o/255)+c*f*(i[0]/255)+(1-c)*f*(h/255))/m*255)+", "+Math.round((c*(1-f)*(s/255)+c*f*(i[1]/255)+(1-c)*f*(p/255))/m*255)+", "+Math.round((c*(1-f)*(l/255)+c*f*(i[2]/255)+(1-c)*f*(d/255))/m*255)+", "+m+")"}function eB(e){var t,n=e.replace("/s+/g","");return"string"!=typeof n||n.startsWith("rgba")||n.startsWith("#")?(n.startsWith("rgba")&&(t=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(t=cy.rgb2arr(n).concat([1])),t.map((function(e,t){return 3===t?Number(e):0|e}))):cy.rgb2arr(cy.toRGB(n)).concat([1])}function tB(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function nB(e,t){return tB(e).map((function(){return tB(t)}))}function rB(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function iB(e){return Math.sqrt(rB(e,e))}function aB(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function oB(e,t,n,r,i){for(var a=0;a<e.length;++a)e[a]=t*n[a]+r*i[a]}function sB(e,t,n){var r,i=(n=n||{}).maxIterations||200*t.length,a=n.nonZeroDelta||1.05,o=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,l=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,u=void 0!==n.chi?n.chi:2,h=void 0!==n.psi?n.psi:-.5,p=void 0!==n.sigma?n.sigma:.5,d=t.length,f=new Array(d+1);f[0]=t,f[0].fx=e(t),f[0].id=0;for(var m=0;m<d;++m){var g=t.slice();g[m]=g[m]?g[m]*a:o,f[m+1]=g,f[m+1].fx=e(g),f[m+1].id=m+1}function v(e){for(var t=0;t<e.length;t++)f[d][t]=e[t];f[d].fx=e.fx}for(var y=function(e,t){return e.fx-t.fx},x=t.slice(),E=t.slice(),b=t.slice(),C=t.slice(),T=0;T<i;++T){if(f.sort(y),n.history){var w=f.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));w.sort((function(e,t){return e.id-t.id})),n.history.push({x:f[0].slice(),fx:f[0].fx,simplex:w})}for(r=0,m=0;m<d;++m)r=Math.max(r,Math.abs(f[0][m]-f[1][m]));if(Math.abs(f[0].fx-f[d].fx)<s&&r<l)break;for(m=0;m<d;++m){x[m]=0;for(var S=0;S<d;++S)x[m]+=f[S][m];x[m]/=d}var k=f[d];if(oB(E,1+c,x,-c,k),E.fx=e(E),E.fx<f[0].fx)oB(C,1+u,x,-u,k),C.fx=e(C),C.fx<E.fx?v(C):v(E);else if(E.fx>=f[d-1].fx){var _=!1;if(E.fx>k.fx?(oB(b,1+h,x,-h,k),b.fx=e(b),b.fx<k.fx?v(b):_=!0):(oB(b,1-h*c,x,h*c,k),b.fx=e(b),b.fx<E.fx?v(b):_=!0),_){if(p>=1)break;for(m=1;m<f.length;++m)oB(f[m],1-p,f[0],p,f[m]),f[m].fx=e(f[m])}}else v(E)}return f.sort(y),{fx:f[0].fx,x:f[0]}}function lB(e,t,n,r,i,a,o){var s=n.fx,l=rB(n.fxprime,t),c=s,u=s,h=l,p=0;function d(u,p,d){for(var f=0;f<16;++f)if(i=(u+p)/2,oB(r.x,1,n.x,i,t),c=r.fx=e(r.x,r.fxprime),h=rB(r.fxprime,t),c>s+a*i*l||c>=d)p=i;else{if(Math.abs(h)<=-o*l)return i;h*(p-u)>=0&&(p=u),u=i,d=c}return 0}i=i||1,a=a||1e-6,o=o||.1;for(var f=0;f<10;++f){if(oB(r.x,1,n.x,i,t),c=r.fx=e(r.x,r.fxprime),h=rB(r.fxprime,t),c>s+a*i*l||f&&c>=u)return d(p,i,u);if(Math.abs(h)<=-o*l)return i;if(h>=0)return d(i,p,c);u=c,p=i,i*=2}return i}function cB(e,t,n){var r,i,a,o={x:t.slice(),fx:0,fxprime:t.slice()},s={x:t.slice(),fx:0,fxprime:t.slice()},l=t.slice(),c=1;a=(n=n||{}).maxIterations||20*t.length,o.fx=e(o.x,o.fxprime),aB(r=o.fxprime.slice(),o.fxprime,-1);for(var u=0;u<a;++u){if(c=lB(e,r,o,s,c),n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:c}),c){oB(l,1,s.fxprime,-1,o.fxprime);var h=rB(o.fxprime,o.fxprime);oB(r,Math.max(0,rB(l,s.fxprime)/h),r,-1,s.fxprime),i=o,o=s,s=i}else aB(r,o.fxprime,-1);if(iB(o.fxprime)<=1e-5)break}return n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:c}),o}function uB(e,t){var n,r=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var i=fB(e[n],e[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],t.push(o)}return t}(e),i=r.filter((function(t){return function(e,t){for(var n=0;n<t.length;++n)if(pB(e,t[n])>t[n].radius+1e-10)return!1;return!0}(t,e)})),a=0,o=0,s=[];if(i.length>1){var l=mB(i);for(n=0;n<i.length;++n){var c=i[n];c.angle=Math.atan2(c.x-l.x,c.y-l.y)}i.sort((function(e,t){return t.angle-e.angle}));var u=i[i.length-1];for(n=0;n<i.length;++n){var h=i[n];o+=(u.x+h.x)*(h.y-u.y);for(var p={x:(h.x+u.x)/2,y:(h.y+u.y)/2},d=null,f=0;f<h.parentIndex.length;++f)if(u.parentIndex.indexOf(h.parentIndex[f])>-1){var m=e[h.parentIndex[f]],g=Math.atan2(h.x-m.x,h.y-m.y),v=Math.atan2(u.x-m.x,u.y-m.y),y=v-g;y<0&&(y+=2*Math.PI);var x=v-y/2,E=pB(p,{x:m.x+m.radius*Math.sin(x),y:m.y+m.radius*Math.cos(x)});E>2*m.radius&&(E=2*m.radius),(null===d||d.width>E)&&(d={circle:m,width:E,p1:h,p2:u})}null!==d&&(s.push(d),a+=hB(d.circle.radius,d.width),u=h)}}else{var b=e[0];for(n=1;n<e.length;++n)e[n].radius<b.radius&&(b=e[n]);var C=!1;for(n=0;n<e.length;++n)if(pB(e[n],b)>Math.abs(b.radius-e[n].radius)){C=!0;break}C?a=o=0:(a=b.radius*b.radius*Math.PI,s.push({circle:b,p1:{x:b.x,y:b.y+b.radius},p2:{x:b.x-1e-10,y:b.y+b.radius},width:2*b.radius}))}return o/=2,t&&(t.area=a+o,t.arcArea=a,t.polygonArea=o,t.arcs=s,t.innerPoints=i,t.intersectionPoints=r),a+o}function hB(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function pB(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function dB(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=t-(n*n-e*e+t*t)/(2*n);return hB(e,e-(n*n-t*t+e*e)/(2*n))+hB(t,r)}function fB(e,t){var n=pB(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),s=e.x+a*(t.x-e.x)/n,l=e.y+a*(t.y-e.y)/n,c=-(t.y-e.y)*(o/n),u=-(t.x-e.x)*(o/n);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function mB(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function gB(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+1e-10?Math.abs(e-t):function(e,t,n,r){var i=(r=r||{}).maxIterations||100,a=r.tolerance||1e-10,o=e(t),s=e(n),l=n-t;if(o*s>0)throw"Initial bisect points must have opposite signs";if(0===o)return t;if(0===s)return n;for(var c=0;c<i;++c){var u=t+(l/=2),h=e(u);if(h*o>=0&&(t=u),Math.abs(l)<a||0===h)return u}return t+l}((function(r){return dB(e,t,r)-n}),0,e+t)}function vB(e,t){var n=function(e,t){for(var n,r=t&&t.lossFunction?t.lossFunction:yB,i={},a={},o=0;o<e.length;++o){var s=e[o];1==s.sets.length&&(n=s.sets[0],i[n]={x:1e10,y:1e10,rowid:Object.keys(i).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},a[n]=[])}e=e.filter((function(e){return 2==e.sets.length}));for(o=0;o<e.length;++o){var l=e[o],c=l.hasOwnProperty("weight")?l.weight:1,u=l.sets[0],h=l.sets[1];l.size+1e-10>=Math.min(i[u].size,i[h].size)&&(c=0),a[u].push({set:h,size:l.size,weight:c}),a[h].push({set:u,size:l.size,weight:c})}var p=[];for(n in a)if(a.hasOwnProperty(n)){var d=0;for(o=0;o<a[n].length;++o)d+=a[n][o].size*a[n][o].weight;p.push({set:n,size:d})}function f(e,t){return t.size-e.size}p.sort(f);var m={};function g(e){return e.set in m}function v(e,t){i[t].x=e.x,i[t].y=e.y,m[t]=!0}v({x:0,y:0},p[0].set);for(o=1;o<p.length;++o){var y=p[o].set,x=a[y].filter(g);if(n=i[y],x.sort(f),0===x.length)throw"ERROR: missing pairwise overlap information";for(var E=[],b=0;b<x.length;++b){var C=i[x[b].set],T=gB(n.radius,C.radius,x[b].size);E.push({x:C.x+T,y:C.y}),E.push({x:C.x-T,y:C.y}),E.push({y:C.y+T,x:C.x}),E.push({y:C.y-T,x:C.x});for(var w=b+1;w<x.length;++w)for(var S=i[x[w].set],k=gB(n.radius,S.radius,x[w].size),_=fB({x:C.x,y:C.y,radius:T},{x:S.x,y:S.y,radius:k}),A=0;A<_.length;++A)E.push(_[A])}var O=1e50,I=E[0];for(b=0;b<E.length;++b){i[y].x=E[b].x,i[y].y=E[b].y;var M=r(i,e);M<O&&(O=M,I=E[b])}v(I,y)}return i}(e,t),r=t.lossFunction||yB;if(e.length>=8){var i=function(e,t){var n,r=(t=t||{}).restarts||10,i=[],a={};for(n=0;n<e.length;++n){var o=e[n];1==o.sets.length&&(a[o.sets[0]]=i.length,i.push(o))}var s=function(e,t,n){var r=nB(t.length,t.length),i=nB(t.length,t.length);return e.filter((function(e){return 2==e.sets.length})).map((function(e){var a=n[e.sets[0]],o=n[e.sets[1]],s=gB(Math.sqrt(t[a].size/Math.PI),Math.sqrt(t[o].size/Math.PI),e.size);r[a][o]=r[o][a]=s;var l=0;e.size+1e-10>=Math.min(t[a].size,t[o].size)?l=1:e.size<=1e-10&&(l=-1),i[a][o]=i[o][a]=l})),{distances:r,constraints:i}}(e,i,a),l=s.distances,c=s.constraints,u=iB(l.map(iB))/l.length;l=l.map((function(e){return e.map((function(e){return e/u}))}));var h,p,d=function(e,t){return function(e,t,n,r){var i,a=0;for(i=0;i<t.length;++i)t[i]=0;for(i=0;i<n.length;++i)for(var o=e[2*i],s=e[2*i+1],l=i+1;l<n.length;++l){var c=e[2*l],u=e[2*l+1],h=n[i][l],p=r[i][l],d=(c-o)*(c-o)+(u-s)*(u-s),f=Math.sqrt(d),m=d-h*h;p>0&&f<=h||p<0&&f>=h||(a+=2*m*m,t[2*i]+=4*m*(o-c),t[2*i+1]+=4*m*(s-u),t[2*l]+=4*m*(c-o),t[2*l+1]+=4*m*(u-s))}return a}(e,t,l,c)};for(n=0;n<r;++n){p=cB(d,tB(2*l.length).map(Math.random),t),(!h||p.fx<h.fx)&&(h=p)}var f=h.x,m={};for(n=0;n<i.length;++n){var g=i[n];m[g.sets[0]]={x:f[2*n]*u,y:f[2*n+1]*u,radius:Math.sqrt(g.size/Math.PI)}}if(t.history)for(n=0;n<t.history.length;++n)aB(t.history[n].x,u);return m}(e,t);r(i,e)+1e-8<r(n,e)&&(n=i)}return n}function yB(e,t){var n=0;for(var r=0;r<t.length;++r){var i=t[r],a=void 0;if(1!=i.sets.length){if(2==i.sets.length){var o=e[i.sets[0]],s=e[i.sets[1]];a=dB(o.radius,s.radius,pB(o,s))}else a=uB(i.sets.map((function(t){return e[t]})));n+=(i.hasOwnProperty("weight")?i.weight:1)*(a-i.size)*(a-i.size)}}return n}function xB(e,t,n,r){var i=[],a=[];for(var o in e)e.hasOwnProperty(o)&&(a.push(o),i.push(e[o]));t-=2*r,n-=2*r;var s=function(e){var t=function(t){return{max:Math.max.apply(null,e.map((function(e){return e[t]+e.radius}))),min:Math.min.apply(null,e.map((function(e){return e[t]-e.radius})))}};return{xRange:t("x"),yRange:t("y")}}(i),l=s.xRange,c=s.yRange;if(l.max==l.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),e;for(var u=t/(l.max-l.min),h=n/(c.max-c.min),p=Math.min(h,u),d=(t-(l.max-l.min)*p)/2,f=(n-(c.max-c.min)*p)/2,m={},g=0;g<i.length;++g){var v=i[g];m[a[g]]={radius:p*v.radius,x:r+d+(v.x-l.min)*p,y:r+f+(v.y-c.min)*p}}return m}function EB(e,t,n){var r,i,a=t[0].radius-pB(t[0],e);for(r=1;r<t.length;++r)(i=t[r].radius-pB(t[r],e))<=a&&(a=i);for(r=0;r<n.length;++r)(i=pB(n[r],e)-n[r].radius)<=a&&(a=i);return a}function bB(e,t){var n,r=[];for(n=0;n<e.length;++n){var i=e[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var a=r[0],o=EB(r[0],e,t);for(n=1;n<r.length;++n){var s=EB(r[n],e,t);s>=o&&(a=r[n],o=s)}var l=sB((function(n){return-1*EB({x:n[0],y:n[1]},e,t)}),[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:l[0],y:l[1]},u=!0;for(n=0;n<e.length;++n)if(pB(c,e[n])>e[n].radius){u=!1;break}for(n=0;n<t.length;++n)if(pB(c,t[n])<t[n].radius){u=!1;break}if(!u)if(1==e.length)c={x:e[0].x,y:e[0].y};else{var h={};uB(e,h),c=0===h.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==h.arcs.length?{x:h.arcs[0].circle.x,y:h.arcs[0].circle.y}:t.length?bB(e,[]):mB(h.arcs.map((function(e){return e.p1})))}return c}function CB(e,t){for(var n={},r=function(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var i=0;i<n.length;i++)for(var a=e[n[i]],o=i+1;o<n.length;++o){var s=e[n[o]],l=pB(a,s);l+s.radius<=a.radius+1e-10?t[n[o]].push(n[i]):l+a.radius<=s.radius+1e-10&&t[n[i]].push(n[o])}return t}(e),i=0;i<t.length;++i){for(var a=t[i].sets,o={},s={},l=0;l<a.length;++l){o[a[l]]=!0;for(var c=r[a[l]],u=0;u<c.length;++u)s[c[u]]=!0}var h=[],p=[];for(var d in e)d in o?h.push(e[d]):d in s||p.push(e[d]);var f=bB(h,p);n[a]=f,f.disjoint&&t[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return n}var TB={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(e){return{name:e.id,value:e.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]},wB=Gp((function(e,t,n,r){var i=new Map,a=e.length;return t.forEach((function(t,o){if(1===t[r].length)i.set(t.id,e[(o+a)%a]);else{var s=t[r].map((function(e){return i.get(e)}));i.set(t.id,s.slice(1).reduce((function(e,t){return JD(e,t,n)}),s[0]))}})),i}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return JSON.stringify(e)}));function SB(e,t,n,r){void 0===r&&(r=0);var i=e.data,a=e.setsField,o=e.sizeField;if(0===i.length)return jM(NM.WARN,!1,"warn: %s","数据不能为空"),[];var s=i.map((function(e){var t;return Ph(Ph({},e),((t={sets:e[a]||[],size:e[o]}).path="",t.id="",t))}));s.sort((function(e,t){return e.sets.length-t.sets.length}));var l=xB(function(e,t){(t=t||{}).maxIterations=t.maxIterations||500;var n,r=t.initialLayout||vB,i=t.lossFunction||yB,a=r(e=function(e){e=e.slice();var t,n,r,i,a=[],o={};for(t=0;t<e.length;++t){var s=e[t];1==s.sets.length?a.push(s.sets[0]):2==s.sets.length&&(o[[r=s.sets[0],i=s.sets[1]]]=!0,o[[i,r]]=!0)}for(a.sort((function(e,t){return e>t?1:-1})),t=0;t<a.length;++t)for(r=a[t],n=t+1;n<a.length;++n)[r,i=a[n]]in o||e.push({sets:[r,i],size:0});return e}(e),t),o=[],s=[];for(n in a)a.hasOwnProperty(n)&&(o.push(a[n].x),o.push(a[n].y),s.push(n));for(var l=sB((function(t){for(var n={},r=0;r<s.length;++r){var o=s[r];n[o]={x:t[2*r],y:t[2*r+1],radius:a[o].radius}}return i(n,e)}),o,t).x,c=0;c<s.length;++c)n=s[c],a[n].x=l[2*c],a[n].y=l[2*c+1];return a}(s),t,n,r),c=CB(l,s);return s.forEach((function(e){var t=e.sets,n=t.join(",");e.id=n;var r=function(e){var t={};uB(e,t);var n=t.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return function(e,t,n){var r=[],i=e-n,a=t;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var o=n[a],s=o.circle.radius,l=o.width>s;i.push("\nA",s,s,0,l?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}(t.map((function(e){return l[e]})));/[zZ]$/.test(r)||(r+=" Z"),e.path=r,zp(e,c[n]||{x:0,y:0})})),s}function kB(e){e&&e.geometries[0].elements.forEach((function(e){e.shape.toFront()}))}ok("schema","venn",{draw:function(e,t){var n=yv(e.data.path),r=function(e){return rN({},e.defaultStyle,{fill:e.color},e.style)}(e),i=t.addGroup({name:"venn-shape"});i.addShape("path",{attrs:Ph(Ph({},r),{path:n}),name:"venn-path"});var a=e.customInfo,o=a.offsetX,s=a.offsetY,l=jk.transform(null,[["t",o,s]]);return i.setMatrix(l),i},getMarker:function(e){var t=e.color;return{symbol:"circle",style:{lineWidth:0,stroke:t,fill:t,r:4}}}}),ek("venn",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getLabelPoint=function(e,t,n){var r=e.data,i=r.x,a=r.y,o=e.customLabelInfo,s=o.offsetX,l=o.offsetY;return{content:e.content[n],x:i+s,y:a+l}},t}(bk));var _B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.syncElementsPos=function(){kB(this.context.view)},t.prototype.active=function(){e.prototype.active.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(mw("element-active")),AB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.syncElementsPos=function(){kB(this.context.view)},t.prototype.highlight=function(){e.prototype.highlight.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.clear=function(){e.prototype.clear.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(mw("element-highlight")),OB=mw("element-selected"),IB=mw("element-single-selected"),MB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.syncElementsPos=function(){kB(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(OB),NB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.syncElementsPos=function(){kB(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(IB);gw("venn-element-active",_B),gw("venn-element-highlight",AB),gw("venn-element-selected",MB),gw("venn-element-single-selected",NB),nS("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),nS("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),nS("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),nS("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),nS("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),nS("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});function FB(e,t,n){var r=e.chart,i=e.options,a=i.blendMode,o=i.setsField,s=r.getTheme(),l=s.colors10,c=s.colors20,u=n;Vh(u)||(u=t.filter((function(e){return 1===e[o].length})).length<=10?l:c);var h=wB(u,t,a,o);return function(e){return h.get(e)||u[0]}}function LB(e){var t=e.chart,n=e.options,r=n.legend,i=n.appendPadding,a=n.padding,o=dN(i);return!1!==r&&(o=fN(i,Zp(r,"position"),40)),t.appendPadding=mN([o,a]),e}function PB(e){var t=e.options.data;t||(jM(NM.WARN,!1,"warn: %s","数据不能为空"),t=[]);var n=t.filter((function(e){return 1===e.sets.length})).map((function(e){return e.sets[0]})),r=t.filter((function(e){var t=e.sets;return function(e,t){for(var n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0}(n,t)}));return qp(r,t)||jM(NM.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),Yp({},e,{options:{data:r}})}function RB(e){var t=e.chart,n=e.options,r=n.pointStyle,i=n.setsField,a=n.sizeField,o=dN(t.appendPadding),s=o[0],l=o[1],c=o[2],u=o[3],h={offsetX:u,offsetY:s},p=t.viewBBox,d=p.width,f=p.height,m=SB(n,Math.max(d-(l+u),0),Math.max(f-(s+c),0),0);t.data(m);var g=wF(rN({},e,{options:{xField:"x",yField:"y",sizeField:a,seriesField:"id",rawFields:[i,a],schema:{shape:"venn",style:r}}})).ext.geometry;g.customInfo(h);var v=function(e,t){var n=e.options.color;if("function"!=typeof n){var r=FB(e,t,"string"==typeof n?[n]:n);return function(e){return r(e.id)}}return n}(e,m);return"function"==typeof v&&g.color("id",(function(t){var n=m.find((function(e){return e.id===t})),r=FB(e,m)(t);return v(n,r)})),e}function DB(e){var t=e.chart,n=e.options.label,r=dN(t.appendPadding),i=r[0],a={offsetX:r[3],offsetY:i},o=$M(t,"schema");if(n){var s=n.callback,l=Rh(n,["callback"]);o.label({fields:["id"],callback:s,cfg:Yp({},KM(l),{type:"venn",customLabelInfo:a})})}else o.label(!1);return e}function BB(e){var t=e.chart,n=e.options,r=n.legend,i=n.sizeField;return t.legend("id",r),t.legend(i,!1),e}function zB(e){return e.chart.axis(!1),e}function HB(e){var t=e.options,n=e.chart,r=t.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};aF(rN({},e,{options:{interactions:r.map((function(e){return Ph(Ph({},e),{type:i[e.type]||e.type})}))}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),e}function jB(e){return DM(LB,sF,PB,RB,DB,hF({}),BB,zB,iF,HB,oF)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="venn",t}Lh(t,e),t.getDefaultOptions=function(){return TB},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return jB},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(jN);var GB,$B="$$stock-range$$",YB=rN({},jN.getDefaultOptions(),{tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(e,t,n){var r;if("x"===e){var i=n[0];r=i?i.title:t}else r=t;return{position:"y"===e?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function UB(e,t){return Kp(e,(function(e){if(Vh(t)){var n=t[0],r=t[1],i=t[2],a=t[3];e.trend=e[n]<=e[r]?"up":"down",e[$B]=[e[n],e[r],e[i],e[a]]}return e}))}function VB(e){var t=e.chart,n=e.options,r=n.yField,i=n.data,a=n.risingFill,o=n.fallingFill,s=n.tooltip,l=n.stockStyle;t.data(UB(i,r));var c=s;return!1!==c&&(c=rN({},{fields:r},c)),wF(rN({},e,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:$B,seriesField:"trend",rawFields:r,tooltip:c}})),e}function WB(e){var t,n,r=e.chart,i=e.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=((t={})[l]={type:"timeCat",tickCount:6},t.trend={values:["up","down"]},t),u=rN(c,a,((n={})[l]=BM(o,GN),n[$B]=BM(s,GN),n));return r.scale(u),e}function XB(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis($B,!1):t.axis($B,i),e}function qB(e){var t=e.chart,n=e.options.tooltip;return!1!==n?t.tooltip(n):t.tooltip(!1),e}function KB(e){var t=e.chart,n=e.options.legend;return n?t.legend("trend",n):!1===n&&t.legend(!1),e}function QB(e){DM(sF,VB,WB,XB,qB,KB,aF,oF,pF(),cF)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="stock",t}Lh(t,e),t.getDefaultOptions=function(){return YB},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return QB},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField;this.chart.changeData(UB(e,t))}}(jN);var ZB={appendPadding:[0,80],minSize:0,maxSize:1,meta:(GB={},GB.$$mappingValue$$={min:0,max:1,nice:!1},GB),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}};function JB(e,t,n){var r=n.yField,i=n.maxSize,a=n.minSize,o=Zp(Cp(t,r),[r]),s=Ep(i)?i:1,l=Ep(a)?a:0;return Kp(e,(function(t,n){var i=(t[r]||0)/o;return t.$$percentage$$=i,t.$$mappingValue$$=(s-l)*i+l,t.$$conversion$$=[Zp(e,[n-1,r]),t[r]],t}))}function ez(e){return function(t){var n=t.chart,r=t.options.conversionTag,i=n.getOptions().data;if(r){var a=r.formatter;i.forEach((function(t,o){if(!(o<=0||Number.isNaN(t.$$mappingValue$$))){var s=e(t,o,i,{top:!0,text:{content:Yh(a)?a(t,i):a,offsetX:r.offsetX,offsetY:r.offsetY,position:"end",autoRotate:!1,style:Ph({textAlign:"start",textBaseline:"middle"},r.style)}});n.annotation().line(s)}}))}return t}}function tz(e){var t=e.chart,n=e.options,r=n.data,i=void 0===r?[]:r,a=JB(i,i,{yField:n.yField,maxSize:n.maxSize,minSize:n.minSize});return t.data(a),e}function nz(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,l=n.shape,c=void 0===l?"funnel":l,u=n.funnelStyle,h=n.state,p=fF(o,[r,i]),d=p.fields,f=p.formatter;return vF({chart:t,options:{type:"interval",xField:r,yField:"$$mappingValue$$",colorField:r,tooltipFields:Vh(d)&&d.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:c,tooltip:f,color:a,style:u},label:s,state:h}}),$M(e.chart,"interval").adjust("symmetric"),e}function rz(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),e}function iz(e){var t=e.options.maxSize;return ez((function(e,n,r,i){var a=t-(t-e.$$mappingValue$$)/2;return Ph(Ph({},i),{start:[n-.5,a],end:[n-.5,a+.05]})}))(e),e}function az(e){return DM(tz,nz,rz,iz)(e)}function oz(e){var t,n=e.chart,r=e.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return n.data(a),n.scale(((t={})[o]={sync:!0},t)),e}function sz(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.color,s=n.compareField,l=n.isTransposed,c=n.tooltip,u=n.maxSize,h=n.minSize,p=n.label,d=n.funnelStyle,f=n.state;return t.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],eachView:function(e,t){var n=l?t.rowIndex:t.columnIndex;l||e.coordinate({type:"rect",actions:[["transpose"],["scale",0===n?-1:1,-1]]});var m=JB(t.data,r,{yField:a,maxSize:u,minSize:h});e.data(m);var g=fF(c,[i,a,s]),v=g.fields,y=g.formatter,x=l?{offset:0===n?10:-23,position:0===n?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:0===n?"end":"start"}};vF({chart:e,options:{type:"interval",xField:i,yField:"$$mappingValue$$",colorField:i,tooltipFields:Vh(v)&&v.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:"funnel",tooltip:y,color:o,style:d},label:!1!==p&&rN({},x,p),state:f}})}}),e}function lz(e){var t=e.chart,n=e.options,r=n.conversionTag,i=n.isTransposed;return t.once("beforepaint",(function(){t.views.forEach((function(e,t){ez((function(e,n,a,o){var s=0===t?-1:1;return rN({},o,{start:[n-.5,e.$$mappingValue$$],end:[n-.5,e.$$mappingValue$$+.05],text:i?{style:{textAlign:"start"}}:{offsetX:!1!==r?s*r.offsetX:0,style:{textAlign:0===t?"end":"start"}}})}))(rN({},{chart:e,options:n}))}))})),e}function cz(e){var t,n=e.chart,r=e.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return n.data(a),n.scale(((t={})[o]={sync:!0},t)),e}function uz(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.isTransposed;return t.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],eachView:function(t,n){az(rN({},e,{chart:t,options:{data:n.data}}))}}),e}function hz(e){var t=e.chart,n=e.options,r=n.data,i=void 0===r?[]:r,a=n.yField,o=op(i,(function(e,t){return e+(t[a]||0)}),0),s=Cp(i,a)[a],l=Kp(i,(function(e,t){var n=[],r=[];if(e.$$totalPercentage$$=(e[a]||0)/o,t){var l=i[t-1].$$x$$,c=i[t-1].$$y$$;n[0]=l[3],r[0]=c[3],n[1]=l[2],r[1]=c[2]}else n[0]=-.5,r[0]=1,n[1]=.5,r[1]=1;return r[2]=r[1]-e.$$totalPercentage$$,n[2]=(r[2]+1)/4,r[3]=r[2],n[3]=-n[2],e.$$x$$=n,e.$$y$$=r,e.$$percentage$$=(e[a]||0)/s,e.$$conversion$$=[Zp(i,[t-1,a]),e[a]],e}));return t.data(l),e}function pz(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,l=n.funnelStyle,c=n.state,u=fF(o,[r,i]),h=u.fields,p=u.formatter;return vF({chart:t,options:{type:"polygon",xField:"$$x$$",yField:"$$y$$",colorField:r,tooltipFields:Vh(h)&&h.concat(["$$percentage$$","$$conversion$$"]),label:s,state:c,mapping:{tooltip:p,color:a,style:l}}}),e}function dz(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),e}function fz(e){return ez((function(e,t,n,r){return Ph(Ph({},r),{start:[e.$$x$$[1],e.$$y$$[1]],end:[e.$$x$$[1]+.05,e.$$y$$[1]]})}))(e),e}function mz(e){var t,n=e.options,r=n.compareField,i=n.xField,a=n.yField,o=n.locale,s=n.funnelStyle,l=n.data,c=xN(o);return(r||s)&&(t=function(e){return rN({},r&&{lineWidth:1,stroke:"#fff"},Yh(s)?s(e):s)}),rN({options:{label:r?{fields:[i,a,r,"$$percentage$$","$$conversion$$"],formatter:function(e){return""+e[a]}}:{fields:[i,a,"$$percentage$$","$$conversion$$"],offset:0,position:"middle",formatter:function(e){return e[i]+" "+e[a]}},tooltip:{title:i,formatter:function(e){return{name:e[i],value:e[a]}}},conversionTag:{formatter:function(e){return c.get(["conversionTag","label"])+": "+$F.apply(void 0,e.$$conversion$$)}}}},e,{options:{funnelStyle:t,data:Hp(l)}})}function gz(e){var t=e.options,n=t.compareField,r=t.dynamicHeight;return t.seriesField?function(e){return DM(cz,uz)(e)}(e):n?function(e){return DM(oz,sz,lz)(e)}(e):r?function(e){return DM(hz,pz,dz,fz)(e)}(e):az(e)}function vz(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return DM(hF(((t={})[a]=r,t[o]=i,t)))(e)}function yz(e){return e.chart.axis(!1),e}function xz(e){var t=e.chart,n=e.options.legend;return!1===n?t.legend(!1):t.legend(n),e}function Ez(e){return DM(mz,gz,vz,yz,iF,aF,xz,oF,sF,pF())(e)}var bz=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="funnel",t}return Lh(t,e),t.getDefaultOptions=function(){return ZB},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ez},t.prototype.setState=function(e,t,n){void 0===n&&(n=!0),Xh(UM(this.chart),(function(r){t(r.getData())&&r.setState(e,n)}))},t.prototype.getStates=function(){var e=UM(this.chart),t=[];return Xh(e,(function(e){var n=e.getData();Xh(e.getStates(),(function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})}))})),t},t.CONVERSATION_FIELD="$$conversion$$",t.PERCENT_FIELD="$$percentage$$",t.TOTAL_PERCENT_FIELD="$$totalPercentage$$",t}(jN);function Cz(e){return[{percent:e,type:"liquid"}]}function Tz(e){var t=e.chart,n=e.options,r=n.percent,i=n.liquidStyle,a=n.radius,o=n.outline,s=n.wave,l=n.shape;t.scale({percent:{min:0,max:1}}),t.data(Cz(r));var c=n.color||t.getTheme().defaultColor,u=bF(rN({},e,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:c,style:i,shape:"liquid-fill-gauge"}}})).ext.geometry,h={radius:a,outline:o,wave:s,shape:l,background:t.getTheme().background};return u.customInfo(h),t.legend(!1),t.axis(!1),t.tooltip(!1),e}function wz(e,t){var n=e.chart,r=e.options,i=r.statistic,a=r.percent,o=r.meta;n.getController("annotation").clear(!0);var s=Zp(o,["percent","formatter"])||function(e){return(100*e).toFixed(2)+"%"},l=i.content;return l&&(l=rN({},l,{content:Uh(l.content)?s(a):l.content})),lN(n,{statistic:Ph(Ph({},i),{content:l}),plotType:"liquid"},{percent:a}),t&&n.render(!0),e}function Sz(e){return DM(sF,nF("liquidStyle"),Tz,wz,hF({}),oF,aF)(e)}var kz={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"};function _z(e,t,n){return e+(t-e)*n}function Az(e,t,n,r){return 0===t?[[e+.5*n/Math.PI/2,r/2],[e+.5*n/Math.PI,r],[e+n/4,r]]:1===t?[[e+.5*n/Math.PI/2*(Math.PI-2),r],[e+.5*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:2===t?[[e+.5*n/Math.PI/2,-r/2],[e+.5*n/Math.PI,-r],[e+n/4,-r]]:[[e+.5*n/Math.PI/2*(Math.PI-2),-r],[e+.5*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function Oz(e,t,n,r,i,a,o){for(var s=4*Math.ceil(2*e/n*4),l=[],c=r;c<2*-Math.PI;)c+=2*Math.PI;for(;c>0;)c-=2*Math.PI;var u=a-e+(c=c/Math.PI/2*n)-2*e;l.push(["M",u,t]);for(var h=0,p=0;p<s;++p){var d=Az(p*n/4,p%4,n,i);l.push(["C",d[0][0]+u,-d[0][1]+t,d[1][0]+u,-d[1][1]+t,d[2][0]+u,-d[2][1]+t]),p===s-1&&(h=d[2][0])}return l.push(["L",h+u,o+e]),l.push(["L",u,o+e]),l.push(["Z"]),l}function Iz(e,t,n,r){var i=2*n/3,a=Math.max(i,r),o=i/2,s=e,l=o+t-a/2,c=Math.asin(o/(.85*(a-o))),u=Math.sin(c)*o,h=Math.cos(c)*o,p=s-h,d=l+u,f=e,m=l+o/Math.sin(c);return"\n      M "+p+" "+d+"\n      A "+o+" "+o+" 0 1 1 "+(p+2*h)+" "+d+"\n      Q "+f+" "+m+" "+e+" "+(t+a/2)+"\n      Q "+f+" "+m+" "+p+" "+d+"\n      Z \n    "}function Mz(e,t,n,r){var i=n/2,a=r/2;return"\n      M "+e+" "+(t-a)+" \n      a "+i+" "+a+" 0 1 0 0 "+2*a+"\n      a "+i+" "+a+" 0 1 0 0 "+2*-a+"\n      Z\n    "}function Nz(e,t,n,r){var i=r/2,a=n/2;return"\n      M "+e+" "+(t-i)+"\n      L "+(e+a)+" "+t+"\n      L "+e+" "+(t+i)+"\n      L "+(e-a)+" "+t+"\n      Z\n    "}function Fz(e,t,n,r){var i=r/2,a=n/2;return"\n      M "+e+" "+(t-i)+"\n      L "+(e+a)+" "+(t+i)+"\n      L "+(e-a)+" "+(t+i)+"\n      Z\n    "}function Lz(e,t,n,r){var i=r/2,a=n/2*.618;return"\n      M "+(e-a)+" "+(t-i)+"\n      L "+(e+a)+" "+(t-i)+"\n      L "+(e+a)+" "+(t+i)+"\n      L "+(e-a)+" "+(t+i)+"\n      Z\n    "}function Pz(e){var t=e.data,n=e.xField,r=e.measureField,i=e.rangeField,a=e.targetField,o=e.layout,s=[],l=[];t.forEach((function(e,t){var o;e[i].sort((function(e,t){return e-t})),e[i].forEach((function(r,a){var o,l=0===a?r:e[i][a]-e[i][a-1];s.push(((o={rKey:i+"_"+a})[n]=n?e[n]:String(t),o[i]=l,o))})),e[r].forEach((function(i,a){var o;s.push(((o={mKey:e[r].length>1?r+"_"+a:""+r})[n]=n?e[n]:String(t),o[r]=i,o))})),s.push(((o={tKey:""+a})[n]=n?e[n]:String(t),o[a]=e[a],o)),l.push(e[i],e[r],e[a])}));var c=Math.min.apply(Math,l.flat(1/0)),u=Math.max.apply(Math,l.flat(1/0));return c=c>0?0:c,"vertical"===o&&s.reverse(),{min:c,max:u,ds:s}}function Rz(e){var t=e.chart,n=e.options,r=n.bulletStyle,i=n.targetField,a=n.rangeField,o=n.measureField,s=n.xField,l=n.color,c=n.layout,u=n.size,h=n.label,p=Pz(n),d=p.min,f=p.max,m=p.ds;return t.data(m),bF(rN({},e,{options:{xField:s,yField:a,seriesField:"rKey",isStack:!0,label:Zp(h,"range"),interval:{color:Zp(l,"range"),style:Zp(r,"range"),size:Zp(u,"range")}}})),t.geometries[0].tooltip(!1),bF(rN({},e,{options:{xField:s,yField:o,seriesField:"mKey",isStack:!0,label:Zp(h,"measure"),interval:{color:Zp(l,"measure"),style:Zp(r,"measure"),size:Zp(u,"measure")}}})),EF(rN({},e,{options:{xField:s,yField:i,seriesField:"tKey",label:Zp(h,"target"),point:{color:Zp(l,"target"),style:Zp(r,"target"),size:Yh(Zp(u,"target"))?function(e){return Zp(u,"target")(e)/2}:Zp(u,"target")/2,shape:"horizontal"===c?"line":"hyphen"}}})),"horizontal"===c&&t.coordinate().transpose(),Ph(Ph({},e),{ext:{data:{min:d,max:f}}})}function Dz(e){var t,n,r=e.options,i=e.ext,a=r.xAxis,o=r.yAxis,s=r.targetField,l=r.rangeField,c=r.measureField,u=r.xField,h=i.data;return DM(hF(((t={})[u]=a,t[c]=o,t),((n={})[c]={min:null==h?void 0:h.min,max:null==h?void 0:h.max,sync:!0},n[s]={sync:""+c},n[l]={sync:""+c},n)))(e)}function Bz(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.measureField,s=n.rangeField,l=n.targetField;return t.axis(""+s,!1),t.axis(""+l,!1),!1===r?t.axis(""+a,!1):t.axis(""+a,r),!1===i?t.axis(""+o,!1):t.axis(""+o,i),e}function zz(e){var t=e.chart,n=e.options.legend;return t.removeInteraction("legend-filter"),t.legend(n),t.legend("rKey",!1),t.legend("mKey",!1),t.legend("tKey",!1),e}function Hz(e){var t=e.chart,n=e.options,r=n.label,i=n.measureField,a=n.targetField,o=n.rangeField,s=t.geometries,l=s[0],c=s[1],u=s[2];return Zp(r,"range")?l.label(""+o,Ph({layout:[{type:"limit-in-plot"}]},KM(r.range))):l.label(!1),Zp(r,"measure")?c.label(""+i,Ph({layout:[{type:"limit-in-plot"}]},KM(r.measure))):c.label(!1),Zp(r,"target")?u.label(""+a,Ph({layout:[{type:"limit-in-plot"}]},KM(r.target))):u.label(!1),e}function jz(e){DM(Rz,Dz,Bz,zz,sF,Hz,iF,aF,oF)(e)}ok("interval","liquid-fill-gauge",{draw:function(e,t){var n=e.customInfo,r=n,i=r.radius,a=r.shape,o=r.background,s=n.outline,l=n.wave,c=s.border,u=s.distance,h=l.count,p=l.length,d=op(e.points,(function(e,t){return Math.min(e,t.x)}),1/0),f=this.parsePoint({x:.5,y:.5}),m=this.parsePoint({x:d,y:.5}),g=f.x-m.x,v=Math.min(g,m.y*i),y=function(e){var t=Ph({opacity:1},e.style);return e.color&&!t.fill&&(t.fill=e.color),t}(e),x=function(e){var t=zp({},{fill:"#fff",fillOpacity:0,lineWidth:4},e.style);return e.color&&!t.stroke&&(t.stroke=e.color),Ep(e.opacity)&&(t.opacity=t.strokeOpacity=e.opacity),t}(zp({},e,s)),E=v-c/2,b={pin:Iz,circle:Mz,diamond:Nz,triangle:Fz,rect:Lz},C=("function"==typeof a?a:b[a]||b.circle)(f.x,f.y,2*E,2*E),T=t.addGroup({name:"waves"}),w=T.setClip({type:"path",attrs:{path:C}});return function(e,t,n,r,i,a,o,s,l){for(var c=i.fill,u=i.opacity,h=o.getBBox(),p=h.maxX-h.minX,d=h.maxY-h.minY,f=0;f<r;f++){var m=r<=1?0:f/(r-1),g=a.addShape("path",{name:"waterwave-path",attrs:{path:Oz(s,h.minY+d*n,l,0,p/32,e,t),fill:c,opacity:_z(.2,.9,m)*u}});try{var v=CL([["t",l,0]]);g.stopAnimate(),g.animate({matrix:v},{duration:_z(2500,5e3,m),repeat:!0})}catch(rh){console.warn("off-screen group animate error!")}}}(f.x,f.y,1-e.points[1].y,h,y,T,w,2*v,p),t.addShape("path",{name:"distance",attrs:{path:C,fill:"transparent",lineWidth:c+2*u,stroke:"transparent"===o?"#fff":o}}),t.addShape("path",{name:"wrap",attrs:zp(x,{path:C,fill:"transparent",lineWidth:c})}),t}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="liquid",t}Lh(t,e),t.getDefaultOptions=function(){return kz},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.chart.emit(gd.BEFORE_CHANGE_DATA,NS.fromData(this.chart,gd.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(Cz(e)),wz({chart:this.chart,options:this.options},!0),this.chart.emit(gd.AFTER_CHANGE_DATA,NS.fromData(this.chart,gd.AFTER_CHANGE_DATA,null))},t.prototype.getSchemaAdaptor=function(){return Sz}}(jN);var Gz=rN({},jN.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bullet",t}Lh(t,e),t.getDefaultOptions=function(){return Gz},t.prototype.changeData=function(e){this.updateOption({data:e});var t=Pz(this.options),n=t.min,r=t.max,i=t.ds;Dz({options:this.options,ext:{data:{min:n,max:r}},chart:this.chart}),this.chart.changeData(i)},t.prototype.getSchemaAdaptor=function(){return jz},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(jN);function $z(e,t){var n=e.field,r=e.fields;if(lp(n))return n;if(Vh(n))return console.warn("Invalid field: it must be a string!"),n[0];if(console.warn("Invalid field: it must be a string! will try to get fields instead."),lp(r))return r;if(Vh(r)&&r.length)return r[0];if(t)return t;throw new TypeError("Invalid field: it must be a string!")}function Yz(e){var t,n,r=[];e&&e.each?e.each((function(e){var i,a;e.parent!==t?(t=e.parent,n=0):n+=1;var o=jh(((null===(i=e.ancestors)||void 0===i?void 0:i.call(e))||[]).map((function(e){return r.find((function(t){return t.name===e.name}))||e})),(function(t){var n=t.depth;return n>0&&n<e.depth}));e.nodeAncestor=o,e.childNodeCount=(null===(a=e.children)||void 0===a?void 0:a.length)||0,e.nodeIndex=n,r.push(e)})):e&&e.eachNode&&e.eachNode((function(e){r.push(e)}));return r}var Uz=["path","nodeIndex","nodeAncestor","childNodeCount","name","depth","height"],Vz=rN({},jN.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),Wz={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},Xz=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=Wz,t}return Lh(t,e),t.prototype.click=function(){var e=Zp(this.context,["event","data","data"]);if(!e)return!1;this.drill(e),this.drawBreadCrumb()},t.prototype.resetPosition=function(){if(this.breadCrumbGroup){var e=this.context.view.getCoordinate(),t=this.breadCrumbGroup,n=t.getBBox(),r=this.getButtonCfg().position,i={x:e.start.x,y:e.end.y-(n.height+10)};e.isPolar&&(i={x:0,y:0}),"bottom-left"===r&&(i={x:e.start.x,y:e.start.y});var a=jk.transform(null,[["t",i.x+0,i.y+n.height+5]]);t.setMatrix(a)}},t.prototype.back=function(){sd(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},t.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},t.prototype.drill=function(e){var t=this.context.view,n=Zp(t,["interactions","drill-down","cfg","transformData"],(function(e){return e})),r=n(Ph({data:e.data},e["hierarchy-data-transform-params"]));t.changeData(r);for(var i=[],a=e;a;){var o=a.data;i.unshift({id:o.name+"_"+a.height+"_"+a.depth,name:o.name,children:n(Ph({data:o},e["hierarchy-data-transform-params"]))}),a=a.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(i)},t.prototype.backTo=function(e){if(e&&!(e.length<=0)){var t=this.context.view,n=pp(e).children;t.changeData(n),e.length>1?(this.historyCache=e,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},t.prototype.getButtonCfg=function(){var e=this.context.view,t=Zp(e,["interactions","drill-down","cfg","drillDownConfig"]);return rN(this.breadCrumbCfg,null==t?void 0:t.breadCrumb,this.cfg)},t.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},t.prototype.drawBreadCrumbGroup=function(){var e=this,t=this.getButtonCfg(),n=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:"drilldown-bread-crumb"});var r=0;n.forEach((function(i,a){var o=e.breadCrumbGroup.addShape({type:"text",id:i.id,name:"drilldown-bread-crumb_"+i.name+"_text",attrs:Ph(Ph({text:0!==a||Uh(t.rootText)?i.name:t.rootText},t.textStyle),{x:r,y:0})}),s=o.getBBox();if(r+=s.width+4,o.on("click",(function(t){var r,i=t.target.get("id");if(i!==(null===(r=pp(n))||void 0===r?void 0:r.id)){var a=n.slice(0,n.findIndex((function(e){return e.id===i}))+1);e.backTo(a)}})),o.on("mouseenter",(function(e){var r;e.target.get("id")!==(null===(r=pp(n))||void 0===r?void 0:r.id)?o.attr(t.activeTextStyle):o.attr({cursor:"default"})})),o.on("mouseleave",(function(){o.attr(t.textStyle)})),a<n.length-1){var l=e.breadCrumbGroup.addShape({type:"text",name:t.name+"_"+i.name+"_divider",attrs:Ph(Ph({text:t.dividerText},t.textStyle),{x:r,y:0})}).getBBox();r+=l.width+4}}))},t.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},t.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),e.prototype.destroy.call(this)},t}(pw);function qz(e,t){return e.parent===t.parent?1:2}function Kz(e,t){return e+t.x}function Qz(e,t){return Math.max(e,t.y)}function Zz(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Jz(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=tH)):void 0===t&&(t=eH);for(var n,r,i,a,o,s=new iH(e),l=[s];n=l.pop();)if((i=t(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)l.push(r=i[a]=new iH(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(rH)}function eH(e){return e.children}function tH(e){return Array.isArray(e)?e[1]:null}function nH(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function rH(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function iH(e){this.data=e,this.depth=this.height=0,this.parent=null}function aH(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,a=[];r<i;)t=e[r],n&&lH(n,t)?++r:(n=uH(a=oH(a,t)),r=0);return n}function oH(e,t){var n,r;if(cH(t,e))return[t];for(n=0;n<e.length;++n)if(sH(t,e[n])&&cH(hH(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(sH(hH(e[n],e[r]),t)&&sH(hH(e[n],t),e[r])&&sH(hH(e[r],t),e[n])&&cH(pH(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function sH(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function lH(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function cH(e,t){for(var n=0;n<t.length;++n)if(!lH(e,t[n]))return!1;return!0}function uH(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return hH(e[0],e[1]);case 3:return pH(e[0],e[1],e[2])}var t}function hH(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,s=t.r,l=a-n,c=o-r,u=s-i,h=Math.sqrt(l*l+c*c);return{x:(n+a+l/h*u)/2,y:(r+o+c/h*u)/2,r:(h+i+s)/2}}function pH(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,s=t.y,l=t.r,c=n.x,u=n.y,h=n.r,p=r-o,d=r-c,f=i-s,m=i-u,g=l-a,v=h-a,y=r*r+i*i-a*a,x=y-o*o-s*s+l*l,E=y-c*c-u*u+h*h,b=d*f-p*m,C=(f*E-m*x)/(2*b)-r,T=(m*g-f*v)/b,w=(d*x-p*E)/(2*b)-i,S=(p*v-d*g)/b,k=T*T+S*S-1,_=2*(a+C*T+w*S),A=C*C+w*w-a*a,O=-(k?(_+Math.sqrt(_*_-4*k*A))/(2*k):A/_);return{x:r+C+T*O,y:i+w+S*O,r:O}}function dH(e,t,n){var r,i,a,o,s=e.x-t.x,l=e.y-t.y,c=s*s+l*l;c?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*s-a*l,n.y=e.y-r*l+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*s-a*l,n.y=t.y+r*l+a*s)):(n.x=t.x+n.r,n.y=t.y)}function fH(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function mH(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function gH(e){this._=e,this.next=null,this.previous=null}function vH(e){if(!(a=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,a,o,s,l,c,u,h,p;if((n=e[0]).x=0,n.y=0,!(a>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;dH(r,n,i=e[2]),n=new gH(n),r=new gH(r),i=new gH(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<a;++l){dH(n._,r._,i=e[l]),i=new gH(i),c=r.next,u=n.previous,h=r._.r,p=n._.r;do{if(h<=p){if(fH(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}h+=c._.r,c=c.next}else{if(fH(u._,i._)){(n=u).next=r,r.previous=n,--l;continue e}p+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=mH(n);(i=i.next)!==r;)(s=mH(i))<o&&(n=i,o=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=aH(n),l=0;l<a;++l)(n=e[l]).x-=i.x,n.y-=i.y;return i.r}function yH(e){return null==e?null:xH(e)}function xH(e){if("function"!=typeof e)throw new Error;return e}function EH(){return 0}function bH(e){return function(){return e}}function CH(e){return Math.sqrt(e.value)}function TH(){var e=null,t=1,n=1,r=EH;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(wH(e)).eachAfter(SH(r,.5)).eachBefore(kH(1)):i.eachBefore(wH(CH)).eachAfter(SH(EH,1)).eachAfter(SH(r,i.r/Math.min(t,n))).eachBefore(kH(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=yH(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:bH(+e),i):r},i}function wH(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function SH(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,s=e(n)*t||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=vH(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function kH(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function _H(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function AH(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,c=e.value&&(r-t)/e.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}function OH(){var e=1,t=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(function(e,t){return function(r){r.children&&AH(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(t,a)),r&&i.eachBefore(_H),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}iH.prototype=Jz.prototype={constructor:iH,count:function(){return this.eachAfter(Zz)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,a=this,o=[a],s=[],l=-1;a=o.pop();)if(s.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=s.pop();)e.call(t,a,++l,this);return this},eachBefore:function(e,t){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(e.call(t,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return Jz(this).eachBefore(nH)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,a=[i];do{for(e=a.reverse(),a=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n])}while(a.length)}};var IH={depth:-1},MH={};function NH(e){return e.id}function FH(e){return e.parentId}function LH(e,t){return e.parent===t.parent?1:2}function PH(e){var t=e.children;return t?t[0]:e.t}function RH(e){var t=e.children;return t?t[t.length-1]:e.t}function DH(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function BH(e,t,n){return e.a.parent===t.parent?e.a:n}function zH(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function HH(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,c=e.value&&(i-n)/e.value;++s<l;)(a=o[s]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}zH.prototype=Object.create(iH.prototype);var jH=(1+Math.sqrt(5))/2;function GH(e,t,n,r,i,a){for(var o,s,l,c,u,h,p,d,f,m,g,v=[],y=t.children,x=0,E=0,b=y.length,C=t.value;x<b;){l=i-n,c=a-r;do{u=y[E++].value}while(!u&&E<b);for(h=p=u,g=u*u*(m=Math.max(c/l,l/c)/(C*e)),f=Math.max(p/g,g/h);E<b;++E){if(u+=s=y[E].value,s<h&&(h=s),s>p&&(p=s),g=u*u*m,(d=Math.max(p/g,g/h))>f){u-=s;break}f=d}v.push(o={value:u,dice:l<c,children:y.slice(x,E)}),o.dice?AH(o,n,r,i,C?r+=c*u/C:a):HH(o,n,r,C?n+=l*u/C:i,a),C-=u,x=E}return v}var $H=function e(t){function n(e,n,r,i,a){GH(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(jH);function YH(){var e=$H,t=!1,n=1,r=1,i=[0],a=EH,o=EH,s=EH,l=EH,c=EH;function u(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(h),i=[0],t&&e.eachBefore(_H),e}function h(t){var n=i[t.depth],r=t.x0+n,u=t.y0+n,h=t.x1-n,p=t.y1-n;h<r&&(r=h=(r+h)/2),p<u&&(u=p=(u+p)/2),t.x0=r,t.y0=u,t.x1=h,t.y1=p,t.children&&(n=i[t.depth+1]=a(t)/2,r+=c(t)-n,u+=o(t)-n,(h-=s(t)-n)<r&&(r=h=(r+h)/2),(p-=l(t)-n)<u&&(u=p=(u+p)/2),e(t,r,u,h,p))}return u.round=function(e){return arguments.length?(t=!!e,u):t},u.size=function(e){return arguments.length?(n=+e[0],r=+e[1],u):[n,r]},u.tile=function(t){return arguments.length?(e=xH(t),u):e},u.padding=function(e){return arguments.length?u.paddingInner(e).paddingOuter(e):u.paddingInner()},u.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:bH(+e),u):a},u.paddingOuter=function(e){return arguments.length?u.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):u.paddingTop()},u.paddingTop=function(e){return arguments.length?(o="function"==typeof e?e:bH(+e),u):o},u.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:bH(+e),u):s},u.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:bH(+e),u):l},u.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:bH(+e),u):c},u}var UH=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,s,l,c,u,h=-1,p=o.length,d=e.value;++h<p;){for(l=(s=o[h]).children,c=s.value=0,u=l.length;c<u;++c)s.value+=l[c].value;s.dice?AH(s,n,r,i,d?r+=(a-r)*s.value/d:a):HH(s,n,r,d?n+=(i-n)*s.value/d:i,a),d-=s.value}else e._squarify=o=GH(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(jH),VH=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",cluster:function(){var e=qz,t=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(Kz,0)/e.length}(n),t.y=function(e){return 1+e.reduce(Qz,0)}(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),l=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),c=s.x-e(s,l)/2,u=l.x+e(l,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-c)/(u-c)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},hierarchy:Jz,pack:TH,packSiblings:function(e){return vH(e),e},packEnclose:aH,partition:OH,stratify:function(){var e=NH,t=FH;function n(n){var r,i,a,o,s,l,c,u=Array.from(n),h=u.length,p=new Map;for(i=0;i<h;++i)r=u[i],s=u[i]=new iH(r),null!=(l=e(r,i,n))&&(l+="")&&(c=s.id=l,p.set(c,p.has(c)?MH:s)),null!=(l=t(r,i,n))&&(l+="")&&(s.parent=l);for(i=0;i<h;++i)if(l=(s=u[i]).parent){if(!(o=p.get(l)))throw new Error("missing: "+l);if(o===MH)throw new Error("ambiguous: "+l);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=IH,a.eachBefore((function(e){e.depth=e.parent.depth+1,--h})).eachBefore(rH),a.parent=null,h>0)throw new Error("cycle");return a}return n.id=function(t){return arguments.length?(e=xH(t),n):e},n.parentId=function(e){return arguments.length?(t=xH(e),n):t},n},tree:function(){var e=LH,t=1,n=1,r=null;function i(i){var l=function(e){for(var t,n,r,i,a,o=new zH(e,0),s=[o];t=s.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=t.children[i]=new zH(r[i],i)),n.parent=t;return(o.parent=new zH(null,0)).children=[o],o}(i);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),r)i.eachBefore(s);else{var c=i,u=i,h=i;i.eachBefore((function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>h.depth&&(h=e)}));var p=c===u?1:e(c,u)/2,d=p-c.x,f=t/(u.x+p+d),m=n/(h.depth||1);i.eachBefore((function(e){e.x=(e.x+d)*f,e.y=e.depth*m}))}return i}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,a=t,o=t,s=n,l=a.parent.children[0],c=a.m,u=o.m,h=s.m,p=l.m;s=RH(s),a=PH(a),s&&a;)l=PH(l),(o=RH(o)).a=t,(i=s.z+h-a.z-c+e(s._,a._))>0&&(DH(BH(s,t,r),t,i),c+=i,u+=i),h+=s.m,c+=a.m,p+=l.m,u+=o.m;s&&!RH(o)&&(o.t=s,o.m+=h-u),a&&!PH(l)&&(l.t=a,l.m+=c-p,r=t)}return r}(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},treemap:YH,treemapBinary:function(e,t,n,r,i){var a,o,s=e.children,l=s.length,c=new Array(l+1);for(c[0]=o=a=0;a<l;++a)c[a+1]=o+=s[a].value;!function e(t,n,r,i,a,o,l){if(t>=n-1){var u=s[t];return u.x0=i,u.y0=a,u.x1=o,void(u.y1=l)}var h=c[t],p=r/2+h,d=t+1,f=n-1;for(;d<f;){var m=d+f>>>1;c[m]<p?d=m+1:f=m}p-c[d-1]<c[d]-p&&t+1<d&&--d;var g=c[d]-h,v=r-g;if(o-i>l-a){var y=r?(i*v+o*g)/r:o;e(t,d,g,i,a,y,l),e(d,n,v,y,a,o,l)}else{var x=r?(a*v+l*g)/r:l;e(t,d,g,i,a,o,x),e(d,n,v,i,x,o,l)}}(0,l,e.value,t,n,r,i)},treemapDice:AH,treemapSlice:HH,treemapSliceDice:function(e,t,n,r,i){(1&e.depth?HH:AH)(e,t,n,r,i)},treemapSquarify:$H,treemapResquarify:UH}),WH={field:"value",size:[1,1],round:!1,padding:0,sort:function(e,t){return t.value-e.value},as:["x","y"],ignoreParentValue:!0};function XH(e,t){var n,r=(t=zp({},WH,t)).as;if(!Vh(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=$z(t)}catch(rh){console.warn(rh)}var i,a=(i=e,OH().size(t.size).round(t.round).padding(t.padding)(Jz(i).sum((function(e){return sd(e.children)?t.ignoreParentValue?0:e[n]-op(e.children,(function(e,t){return e+t[n]}),0):e[n]})).sort(t.sort))),o=r[0],s=r[1];return a.each((function(e){var t,n;e[o]=[e.x0,e.x1,e.x1,e.x0],e[s]=[e.y1,e.y1,e.y0,e.y0],e.name=e.name||(null===(t=e.data)||void 0===t?void 0:t.name)||(null===(n=e.data)||void 0===n?void 0:n.label),e.data.name=e.name,["x0","x1","y0","y1"].forEach((function(t){-1===r.indexOf(t)&&delete e[t]}))})),Yz(a)}var qH,KH={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(e,t){return t.value-e.value},ratio:.5*(1+Math.sqrt(5))};function QH(e,t){var n,r=(t=zp({},KH,t)).as;if(!Vh(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=$z(t)}catch(rh){console.warn(rh)}var i,a,o,s=(i=t.tile,a=t.ratio,"treemapSquarify"===i?VH[i].ratio(a):VH[i]),l=(o=e,YH().tile(s).size(t.size).round(t.round).padding(t.padding).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(Jz(o).sum((function(e){return t.ignoreParentValue&&e.children?0:e[n]})).sort(t.sort))),c=r[0],u=r[1];return l.each((function(e){e[c]=[e.x0,e.x1,e.x1,e.x0],e[u]=[e.y1,e.y1,e.y0,e.y0],["x0","x1","y0","y1"].forEach((function(t){-1===r.indexOf(t)&&delete e[t]}))})),Yz(l)}function ZH(e){var t=e.data,n=e.colorField,r=e.rawFields,i=e.hierarchyConfig,a=void 0===i?{}:i,o=a.activeDepth,s={partition:XH,treemap:QH},l=e.seriesField,c=e.type||"partition",u=s[c](t,Ph(Ph({field:l||"value"},nd(a,["activeDepth"])),{type:"hierarchy."+c,as:["x","y"]})),h=[];return u.forEach((function(e){var t,i,s,c,u,p;if(0===e.depth)return null;if(o>0&&e.depth>o)return null;for(var d=e.data.name,f=Ph({},e);f.depth>1;)d=(null===(i=f.parent.data)||void 0===i?void 0:i.name)+" / "+d,f=f.parent;var m=Ph(Ph(Ph({},BM(e.data,Dh(r||[],[a.field]))),((t={}).path=d,t["ancestor-node"]=f.data.name,t)),e);l&&(m[l]=e.data[l]||(null===(c=null===(s=e.parent)||void 0===s?void 0:s.data)||void 0===c?void 0:c[l])),n&&(m[n]=e.data[n]||(null===(p=null===(u=e.parent)||void 0===u?void 0:u.data)||void 0===p?void 0:p[n])),m.ext=a,m["hierarchy-data-transform-params"]={hierarchyConfig:a,colorField:n,rawFields:r},h.push(m)})),h}function JH(e){var t,n=e.chart,r=e.options,i=r.color,a=r.colorField,o=void 0===a?"ancestor-node":a,s=r.sunburstStyle,l=r.rawFields,c=void 0===l?[]:l,u=ZH(r);return n.data(u),s&&(t=function(e){return rN({},{fillOpacity:Math.pow(.85,e.depth)},Yh(s)?s(e):s)}),CF(rN({},e,{options:{xField:"x",yField:"y",seriesField:o,rawFields:cp(Dh(Uz,c)),polygon:{color:i,style:t}}})),e}function ej(e){return e.chart.axis(!1),e}function tj(e){var t=e.chart,n=e.options.label,r=$M(t,"polygon");if(n){var i=n.fields,a=void 0===i?["name"]:i,o=n.callback,s=Rh(n,["fields","callback"]);r.label({fields:a,callback:o,cfg:KM(s)})}else r.label(!1);return e}function nj(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius,a=n.reflect,o=t.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),e}function rj(e){var t,n=e.options,r=n.hierarchyConfig,i=n.meta;return DM(hF({},((t={}).value=Zp(i,Zp(r,["field"],"value")),t)))(e)}function ij(e){var t=e.chart,n=e.options.tooltip;if(!1===n)t.tooltip(!1);else{var r=n;Zp(n,"fields")||(r=rN({},{customItems:function(e){return e.map((function(e){var n=Zp(t.getOptions(),"scales"),r=Zp(n,["path","formatter"],(function(e){return e})),i=Zp(n,["value","formatter"],(function(e){return e}));return Ph(Ph({},e),{name:r(e.data.path),value:i(e.data.value)})}))}},r)),t.tooltip(r)}return e}function aj(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return(null==t?void 0:t.enabled)?rN({},e,{interactions:Dh(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:ZH}}])}):e}function oj(e){var t=e.chart,n=e.options,r=n.drilldown;return aF({chart:t,options:aj(n)}),(null==r?void 0:r.enabled)&&(t.appendPadding=fN(t.appendPadding,Zp(r,["breadCrumb","position"]))),e}function sj(e){return DM(sF,nF("sunburstStyle"),JH,ej,rj,rF,nj,ij,tj,oj,oF,pF())(e)}function lj(e){var t=Zp(e,["event","data","data"],{});return Vh(t.children)&&t.children.length>0}function cj(e){var t=e.view.getCoordinate(),n=t.innerRadius;if(n){var r=e.event,i=r.x,a=r.y,o=t.center,s=o.x,l=o.y,c=t.getRadius()*n;return Math.sqrt(Math.pow(s-i,2)+Math.pow(l-a,2))<c}return!1}gw("drill-down-action",Xz),nS("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:lj},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:cj}],start:[{trigger:"element:click",isEnable:lj,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:cj,action:["drill-down-action:back"]}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="sunburst",t}Lh(t,e),t.getDefaultOptions=function(){return Vz},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return sj},t.SUNBURST_ANCESTOR_FIELD="ancestor-node",t.SUNBURST_PATH_FIELD="path",t.NODE_ANCESTORS_FIELD="nodeAncestor"}(jN);var uj={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(qH={},qH.range={sync:"v"},qH.percent={sync:"v",tickCount:5,tickInterval:.2},qH),animation:!1};function hj(e){var t;return[(t={},t.percent=yp(e,0,1),t)]}function pj(e,t){var n=Zp(t,["ticks"],[]);return function(e,t){return e.map((function(n,r){var i;return(i={}).range=n-(e[r-1]||0),i.type=""+r,i.percent=t,i})).filter((function(e){return!!e.range}))}(sd(n)?n:[0,yp(e,0,1),1],e)}function dj(e){var t=e.chart,n=e.options,r=n.percent,i=n.range,a=n.radius,o=n.innerRadius,s=n.startAngle,l=n.endAngle,c=n.axis,u=n.indicator,h=n.gaugeStyle,p=n.type,d=n.meter,f=i.color,m=i.width;if(u){var g=hj(r),v=t.createView({id:"indicator-view"});v.data(g),v.point().position("percent*1").shape(u.shape||"gauge-indicator").customInfo({defaultColor:t.getTheme().defaultColor,indicator:u}),v.coordinate("polar",{startAngle:s,endAngle:l,radius:o*a}),v.axis("percent",c),v.scale("percent",BM(c,GN))}var y=pj(r,n.range),x=t.createView({id:"range-view"});return x.data(y),bF({chart:x,options:{xField:"1",yField:"range",seriesField:"type",rawFields:["percent"],isStack:!0,interval:{color:lp(f)?[f,"#f0f0f0"]:f,style:h,shape:"meter"===p?"meter-gauge":null},args:{zIndexReversed:!0},minColumnWidth:m,maxColumnWidth:m}}).ext.geometry.customInfo({meter:d}),x.coordinate("polar",{innerRadius:o,radius:a,startAngle:s,endAngle:l}).transpose(),e}function fj(e){var t;return DM(hF(((t={range:{min:0,max:1,maxLimit:1,minLimit:0}}).percent={},t)))(e)}function mj(e,t){var n=e.chart,r=e.options,i=r.statistic,a=r.percent;if(n.getController("annotation").clear(!0),i){var o=i.content,s=void 0;o&&(s=rN({},{content:(100*a).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),function(e,t,n){var r=t.statistic;[r.title,r.content].forEach((function(t){if(t){var r=Yh(t.style)?t.style(n):t.style;e.annotation().html(Ph({position:["50%","100%"],html:function(e,i){var a=i.getCoordinate(),o=i.views[0].getCoordinate(),s=o.getCenter(),l=o.getRadius(),c=Math.max(Math.sin(o.startAngle),Math.sin(o.endAngle))*l,u=s.y+c-a.y.start-parseFloat(Zp(r,"fontSize",0)),h=a.getRadius()*a.innerRadius*2;oN(e,Ph({width:h+"px",transform:"translate(-50%, "+u+"px)"},aN(r)));var p=i.getData();if(t.customHtml)return t.customHtml(e,i,n,p);var d=t.content;return t.formatter&&(d=t.formatter(n,p)),d?lp(d)?d:""+d:"<div></div>"}},BM(t,["offsetX","offsetY","rotate","style","formatter"])))}}))}(n,{statistic:Ph(Ph({},i),{content:s})},{percent:a})}return t&&n.render(!0),e}function gj(e){var t=e.chart;return t.legend(!1),t.tooltip(!1),e}function vj(e){return DM(sF,oF,dj,fj,mj,aF,pF(),gj)(e)}ok("point","gauge-indicator",{draw:function(e,t){var n=e.customInfo,r=n.indicator,i=n.defaultColor,a=r,o=a.pointer,s=a.pin,l=t.addGroup(),c=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:Ph({x1:c.x,y1:c.y,x2:e.x,y2:e.y,stroke:i},o.style)}),s&&l.addShape("circle",{name:"pin",attrs:Ph({x:c.x,y:c.y,stroke:i},s.style)}),l}}),ok("interval","meter-gauge",{draw:function(e,t){var n=e.customInfo.meter,r=void 0===n?{}:n,i=r.steps,a=void 0===i?50:i,o=r.stepRatio,s=void 0===o?.5:o;a=a<1?1:a,s=yp(s,0,1);var l=this.coordinate,c=l.startAngle,u=l.endAngle,h=0;s>0&&s<1&&(h=(u-c)/a/(s/(1-s)+1-1/a));for(var p=h/(1-s)*s,d=t.addGroup(),f=this.coordinate.getCenter(),m=this.coordinate.getRadius(),g=jk.getAngle(e,this.coordinate),v=g.startAngle,y=g.endAngle,x=v;x<y;){var E=void 0,b=(x-c)%(p+h);E=b<p?x+(p-b):(x+=p+h-b)+p;var C=jk.getSectorPath(f.x,f.y,m,x,Math.min(E,y),m*this.coordinate.innerRadius);d.addShape("path",{name:"meter-gauge",attrs:{path:C,fill:e.color,stroke:e.color,lineWidth:.5}}),x=E+h}return d}});var yj=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="gauge",t}return Lh(t,e),t.getDefaultOptions=function(){return uj},t.prototype.changeData=function(e){this.chart.emit(gd.BEFORE_CHANGE_DATA,NS.fromData(this.chart,gd.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e});var t=this.chart.views.find((function(e){return"indicator-view"===e.id}));t&&t.data(hj(e));var n=this.chart.views.find((function(e){return"range-view"===e.id}));n&&n.data(pj(e,this.options.range)),mj({chart:this.chart,options:this.options},!0),this.chart.emit(gd.AFTER_CHANGE_DATA,NS.fromData(this.chart,gd.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return vj},t}(jN),xj="$$yField$$",Ej={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function bj(e,t,n,r){return function(e,t,n,r,i){var a,o=[];if(op(e,(function(e,t){var i;jM(NM.WARN,Ep(t[n]),t[n]+" is not a valid number");var a=Rp(t[n])?null:t[n];return o.push(Ph(Ph({},t),((i={})[r]=[e,e+a],i))),e+a}),0),o.length&&i){var s=Zp(o,[[e.length-1],r,[1]]);o.push(((a={})[t]=i.label,a[n]=s,a[r]=[0,s],a))}return o}(e,t,n,xj,r).map((function(t,n){var r;return Wh(t)?Ph(Ph({},t),((r={}).$$absoluteField$$=t.$$yField$$[1],r.$$diffField$$=t.$$yField$$[1]-t.$$yField$$[0],r.$$isTotal$$=n===e.length,r)):t}))}function Cj(e){var t=e.options,n=t.locale,r=t.total,i=xN(n).get(["waterfall","total"]);return r&&"string"!=typeof r.label&&i&&(e.options.total.label=i),e}function Tj(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.total,s=n.leaderLine,l=n.columnWidthRatio,c=n.waterfallStyle,u=n.risingFill,h=n.fallingFill,p=n.color;return t.data(bj(r,i,a,o)),bF(rN({},e,{options:{xField:i,yField:xj,seriesField:i,rawFields:[a,"$$diffField$$","$$isTotal$$",xj],widthRatio:l,interval:{style:c,shape:"waterfall",color:p||function(e){return Zp(e,["$$isTotal$$"])?Zp(o,["style","fill"],""):Zp(e,[xj,1])-Zp(e,[xj,0])>0?u:h}}}})).ext.geometry.customInfo({leaderLine:s}),e}function wj(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.meta,c=rN({},{alias:s},Zp(l,s));return DM(hF(((t={})[o]=i,t[s]=a,t.$$yField$$=a,t),rN({},l,((n={}).$$yField$$=c,n.$$diffField$$=c,n.$$absoluteField$$=c,n))))(e)}function Sj(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?(t.axis(o,!1),t.axis(xj,!1)):(t.axis(o,i),t.axis(xj,i)),e}function kj(e){var t=e.chart,n=e.options,r=n.legend,i=n.total,a=n.risingFill,o=n.fallingFill,s=xN(n.locale);if(!1===r)t.legend(!1);else{var l=[{name:s.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:s.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&l.push({name:i.label||"",value:"total",marker:{symbol:"square",style:rN({},{r:5},Zp(i,"style"))}}),t.legend(rN({},{custom:!0,position:"top",items:l},r)),t.removeInteraction("legend-filter")}return e}function _j(e){var t=e.chart,n=e.options,r=n.label,i=n.labelMode,a=n.xField,o=$M(t,"interval");if(r){var s=r.callback,l=Rh(r,["callback"]);o.label({fields:"absolute"===i?["$$absoluteField$$",a]:["$$diffField$$",a],callback:s,cfg:KM(l)})}else o.label(!1);return e}function Aj(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.xField,a=n.yField;if(!1!==r){t.tooltip(Ph({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=t.geometries[0];(null==r?void 0:r.formatter)?o.tooltip(i+"*"+a,r.formatter):o.tooltip(a)}else t.tooltip(!1);return e}function Oj(e){return DM(Cj,sF,Tj,wj,Sj,kj,Aj,_j,lF,aF,oF,pF())(e)}function Ij(e,t,n){var r=n.map((function(e){return e[t]})).filter((function(e){return void 0!==e})),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(e)%360;return a?360*i/a:i}function Mj(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.color,a=n.tooltip,o=n.colorField,s=n.type,l=n.xField,c=n.yField,u=pN(n.data,c);return t.data(u),bF(rN({},e,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:"line"===s?"line":"intervel"},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}})),"line"===s&&EF({chart:t,options:{xField:l,yField:c,seriesField:o,point:{shape:"circle",color:i}}}),e}function Nj(e){var t,n=e.options,r=n.yField,i=n.xField,a=n.data,o=n.isStack,s=n.isGroup,l=n.colorField,c=n.maxAngle,u=pN(o&&!s&&l?function(e,t,n){var r=[];return e.forEach((function(e){var i=r.find((function(n){return n[t]===e[t]}));i?i[n]+=e[n]||null:r.push(Ph({},e))})),r}(a,i,r):a,r);return DM(hF(((t={})[r]={min:0,max:Ij(c,r,u)},t)))(e)}function Fj(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),e}function Lj(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis;return t.axis(r,i),e}function Pj(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=$M(t,"interval");if(r){var o=r.callback,s=Rh(r,["callback"]);a.label({fields:[i],callback:o,cfg:Ph(Ph({},KM(s)),{type:"polar"})})}else a.label(!1);return e}function Rj(e){return DM(nF("barStyle"),Mj,Nj,Lj,Fj,aF,oF,sF,iF,rF,pF(),Pj)(e)}ok("interval","waterfall",{draw:function(e,t){var n=e.customInfo,r=e.points,i=e.nextPoints,a=t.addGroup(),o=this.parsePath(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=0===n?"M":"L";t.push([i,r.x,r.y])}}var a=e[0];return t.push(["L",a.x,a.y]),t.push(["z"]),t}(r)),s=function(e){return rN({},e.defaultStyle,e.style,{fill:e.color})}(e);a.addShape("path",{attrs:Ph(Ph({},s),{path:o})});var l=Zp(n,"leaderLine");if(l&&i){var c=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(c[1]=["L",i[1].x,i[1].y]),c=this.parsePath(c),a.addShape("path",{attrs:Ph({path:c},l.style||{})})}return a}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="waterfall",t}Lh(t,e),t.getDefaultOptions=function(){return Ej},t.prototype.changeData=function(e){var t=this.options,n=t.xField,r=t.yField,i=t.total;this.updateOption({data:e}),this.chart.changeData(bj(e,n,r,i))},t.prototype.getSchemaAdaptor=function(){return Oj},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(jN);var Dj=rN({},jN.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="radial-bar",t}Lh(t,e),t.getDefaultOptions=function(){return Dj},t.prototype.changeData=function(e){this.updateOption({data:e}),Nj({chart:this.chart,options:this.options}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Rj}}(jN);function Bj(e,t,n,r,i){var a=[];t.forEach((function(t){r.forEach((function(r){var i,o=((i={})[e]=r[e],i[n]=t,i[t]=r[t],i);a.push(o)}))}));var o=Object.values(gp(a,n)),s=o[0],l=void 0===s?[]:s,c=o[1],u=void 0===c?[]:c;return i?[l.reverse(),u.reverse()]:[l,u]}function zj(e){return"vertical"!==e}function Hj(e,t,n){var r=t[0],i=t[1],a=r.autoPadding,o=i.autoPadding,s=e.__axisPosition,l=s.layout,c=s.position;if(zj(l)&&"top"===c&&(r.autoPadding=n.instance(a.top,0,a.bottom,a.left),i.autoPadding=n.instance(o.top,a.left,o.bottom,0)),zj(l)&&"bottom"===c&&(r.autoPadding=n.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=n.instance(o.top,o.right,o.bottom,a.right/2+5)),!zj(l)&&"bottom"===c){var u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,a.bottom/2+5,u),i.autoPadding=n.instance(a.bottom/2+5,o.right,o.bottom,u)}if(!zj(l)&&"top"===c){u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,0,u),i.autoPadding=n.instance(0,o.right,a.top,u)}}function jj(e){var t,n,r=e.chart,i=e.options,a=i.data,o=i.xField,s=i.yField,l=i.color,c=i.barStyle,u=i.widthRatio,h=i.legend,p=i.layout,d=Bj(o,s,"series-field-key",a,zj(p));h?r.legend("series-field-key",h):!1===h&&r.legend(!1);var f=d[0],m=d[1];return zj(p)?((t=r.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:"first-axes-view"})).coordinate().transpose().reflect("x"),(n=r.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().transpose(),t.data(f),n.data(m)):(t=r.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:"first-axes-view"}),(n=r.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().reflect("y"),t.data(f),n.data(m)),bF(rN({},e,{chart:t,options:{widthRatio:u,xField:o,yField:s[0],seriesField:"series-field-key",interval:{color:l,style:c}}})),bF(rN({},e,{chart:n,options:{xField:o,yField:s[1],seriesField:"series-field-key",widthRatio:u,interval:{color:l,style:c}}})),e}function Gj(e){var t,n,r,i=e.options,a=e.chart,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=WM(a,"first-axes-view"),h=WM(a,"second-axes-view"),p={};return qh((null==i?void 0:i.meta)||{}).map((function(e){Zp(null==i?void 0:i.meta,[e,"alias"])&&(p[e]=i.meta[e].alias)})),a.scale(((t={})["series-field-key"]={sync:!0,formatter:function(e){return Zp(p,e,e)}},t)),hF(((n={})[l]=o,n[c[0]]=s[c[0]],n))(rN({},e,{chart:u})),hF(((r={})[l]=o,r[c[1]]=s[c[1]],r))(rN({},e,{chart:h})),e}function $j(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=n.layout,l=WM(t,"first-axes-view"),c=WM(t,"second-axes-view");return"bottom"===(null==r?void 0:r.position)?c.axis(a,Ph(Ph({},r),{label:{formatter:function(){return""}}})):c.axis(a,!1),!1===r?l.axis(a,!1):l.axis(a,Ph({position:zj(s)?"top":"bottom"},r)),!1===i?(l.axis(o[0],!1),c.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),c.axis(o[1],i[o[1]])),t.__axisPosition={position:l.getOptions().axes[a].position,layout:s},e}function Yj(e){var t=e.chart;return aF(rN({},e,{chart:WM(t,"first-axes-view")})),aF(rN({},e,{chart:WM(t,"second-axes-view")})),e}function Uj(e){var t=e.chart,n=e.options,r=n.yField,i=n.yAxis;return dF(rN({},e,{chart:WM(t,"first-axes-view"),options:{yAxis:i[r[0]]}})),dF(rN({},e,{chart:WM(t,"second-axes-view"),options:{yAxis:i[r[1]]}})),e}function Vj(e){var t=e.chart;return sF(rN({},e,{chart:WM(t,"first-axes-view")})),sF(rN({},e,{chart:WM(t,"second-axes-view")})),e}function Wj(e){var t=e.chart;return oF(rN({},e,{chart:WM(t,"first-axes-view")})),oF(rN({},e,{chart:WM(t,"second-axes-view")})),e}function Xj(e){var t,n,r=this,i=e.chart,a=e.options,o=a.label,s=a.yField,l=a.layout,c=WM(i,"first-axes-view"),u=WM(i,"second-axes-view"),h=$M(c,"interval"),p=$M(u,"interval");if(o){var d=o.callback,f=Rh(o,["callback"]);f.position||(f.position="middle"),void 0===f.offset&&(f.offset=2);var m=Ph({},f);if(zj(l)){var g=(null===(t=m.style)||void 0===t?void 0:t.textAlign)||("middle"===f.position?"center":"left");f.style=rN({},f.style,{textAlign:g});m.style=rN({},m.style,{textAlign:{left:"right",right:"left",center:"center"}[g]})}else{var v={top:"bottom",bottom:"top",middle:"middle"};"string"==typeof f.position?f.position=v[f.position]:"function"==typeof f.position&&(f.position=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return v[f.position.apply(r,e)]});var y=(null===(n=m.style)||void 0===n?void 0:n.textBaseline)||"bottom";m.style=rN({},m.style,{textBaseline:y});f.style=rN({},f.style,{textBaseline:{top:"bottom",bottom:"top",middle:"middle"}[y]})}h.label({fields:[s[0]],callback:d,cfg:KM(m)}),p.label({fields:[s[1]],callback:d,cfg:KM(f)})}else h.label(!1),p.label(!1);return e}function qj(e){return DM(jj,Gj,$j,Uj,Vj,Xj,iF,Yj,Wj)(e)}function Kj(e,t){if(Vh(e))return e.find((function(e){return e.type===t}))}function Qj(e,t){var n=Kj(e,t);return n&&!1!==n.enable}function Zj(e){var t=e.interactions,n=e.drilldown;return Zp(n,"enabled")||Qj(t,"treemap-drill-down")}function Jj(e){var t=e.data,n=e.colorField,r=e.enableDrillDown,i=e.hierarchyConfig,a=QH(t,Ph(Ph({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach((function(e){if(0===e.depth)return null;if(r&&1!==e.depth)return null;if(!r&&e.children)return null;var a=e.ancestors().map((function(e){return{data:e.data,height:e.height,value:e.value}})),s=r&&Vh(t.path)?a.concat(t.path.slice(1)):a,l=Object.assign({},e.data,Ph({x:e.x,y:e.y,depth:e.depth,value:e.value,path:s},e));if(!e.data[n]&&e.parent){var c=e.ancestors().find((function(e){return e.data[n]}));l[n]=null==c?void 0:c.data[n]}else l[n]=e.data[n];l["hierarchy-data-transform-params"]={hierarchyConfig:i,colorField:n,enableDrillDown:r},o.push(l)})),o}function eG(e){var t=e.options.colorField;return rN({options:{rawFields:["value"],tooltip:{fields:["name","value",t,"path"],formatter:function(e){return{name:e.name,value:e.value}}}}},e)}function tG(e){var t=e.chart,n=e.options,r=n.color,i=n.colorField,a=n.rectStyle,o=n.hierarchyConfig,s=n.rawFields,l=Jj({data:n.data,colorField:n.colorField,enableDrillDown:Zj(n),hierarchyConfig:o});return t.data(l),CF(rN({},e,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:r,style:a}}})),t.coordinate().reflect("y"),e}function nG(e){return e.chart.axis(!1),e}function rG(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return Zj(e)?rN({},e,{interactions:Dh(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:Jj}}])}):e}function iG(e){var t=e.chart,n=e.options,r=n.interactions,i=n.drilldown;aF({chart:t,options:rG(n)});var a=Kj(r,"view-zoom");return a&&(!1!==a.enable?t.getCanvas().on("mousewheel",(function(e){e.preventDefault()})):t.getCanvas().off("mousewheel")),Zj(n)&&(t.appendPadding=fN(t.appendPadding,Zp(i,["breadCrumb","position"]))),e}function aG(e){return DM(eG,sF,nF("rectStyle"),tG,nG,rF,iF,iG,oF,pF())(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bidirectional-bar",t}Lh(t,e),t.getDefaultOptions=function(){return rN({},e.getDefaultOptions.call(this),{syncViewPadding:Hj})},t.prototype.changeData=function(e){void 0===e&&(e=[]),this.chart.emit(gd.BEFORE_CHANGE_DATA,NS.fromData(this.chart,gd.BEFORE_CHANGE_DATA,null)),this.updateOption({data:e});var t=this.options,n=Bj(t.xField,t.yField,"series-field-key",e,zj(t.layout)),r=n[0],i=n[1],a=WM(this.chart,"first-axes-view"),o=WM(this.chart,"second-axes-view");a.data(r),o.data(i),this.chart.render(!0),this.chart.emit(gd.AFTER_CHANGE_DATA,NS.fromData(this.chart,gd.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return qj},t.SERIES_FIELD_KEY="series-field-key"}(jN);var oG={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};function sG(e){return e.target.depth}function lG(e,t){return e.sourceLinks.length?e.depth:t-1}function cG(e){return function(){return e}}function uG(e,t){for(var n=0,r=0;r<e.length;r++)n+=t(e[r]);return n}function hG(e,t){for(var n=-1/0,r=0;r<e.length;r++)n=Math.max(t(e[r]),n);return n}function pG(e,t){return fG(e.source,t.source)||e.index-t.index}function dG(e,t){return fG(e.target,t.target)||e.index-t.index}function fG(e,t){return e.y0-t.y0}function mG(e){return e.value}function gG(e){return e.index}function vG(e){return e.nodes}function yG(e){return e.links}function xG(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function EG(e){for(var t=0,n=e.nodes;t<n.length;t++){for(var r=n[t],i=r.y0,a=i,o=0,s=r.sourceLinks;o<s.length;o++){(u=s[o]).y0=i+u.width/2,i+=u.width}for(var l=0,c=r.targetLinks;l<c.length;l++){var u;(u=c[l]).y1=a+u.width/2,a+=u.width}}}function bG(){var e,t,n,r,i=0,a=0,o=1,s=1,l=24,c=8,u=gG,h=lG,p=vG,d=yG,f=6;function m(m){var y={nodes:p(m),links:d(m)};return function(e){var t=e.nodes,n=e.links;t.forEach((function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]}));var i=new Map(t.map((function(e){return[u(e),e]})));if(n.forEach((function(e,t){e.index=t;var n=e.source,r=e.target;"object"!=typeof n&&(n=e.source=xG(i,n)),"object"!=typeof r&&(r=e.target=xG(i,r)),n.sourceLinks.push(e),r.targetLinks.push(e)})),null!=r)for(var a=0,o=t;a<o.length;a++){var s=o[a],l=s.sourceLinks,c=s.targetLinks;l.sort(r),c.sort(r)}}(y),function(e){for(var t=e.nodes,n=0,r=t;n<r.length;n++){var i=r[n];i.value=void 0===i.fixedValue?Math.max(uG(i.sourceLinks,mG),uG(i.targetLinks,mG)):i.fixedValue}}(y),function(e){var n=e.nodes,r=n.length,i=new Set(n),a=new Set,o=0;for(;i.size;){if(i.forEach((function(e){e.depth=o;for(var t=0,n=e.sourceLinks;t<n.length;t++){var r=n[t].target;a.add(r)}})),++o>r)throw new Error("circular link");i=a,a=new Set}if(t)for(var s=Math.max(hG(n,(function(e){return e.depth}))+1,0),l=void 0,c=0;c<n.length;c++)(l=n[c]).depth=t.call(null,l,s)}(y),function(e){var t=e.nodes,n=t.length,r=new Set(t),i=new Set,a=0;for(;r.size;){if(r.forEach((function(e){e.height=a;for(var t=0,n=e.targetLinks;t<n.length;t++){var r=n[t].source;i.add(r)}})),++a>n)throw new Error("circular link");r=i,i=new Set}}(y),function(t){var r=function(e){for(var t=e.nodes,r=Math.max(hG(t,(function(e){return e.depth}))+1,0),a=(o-i-l)/(r-1),s=new Array(r).fill(0).map((function(){return[]})),c=0,u=t;c<u.length;c++){var p=u[c],d=Math.max(0,Math.min(r-1,Math.floor(h.call(null,p,r))));p.layer=d,p.x0=i+d*a,p.x1=p.x0+l,s[d]?s[d].push(p):s[d]=[p]}if(n)for(var f=0,m=s;f<m.length;f++){m[f].sort(n)}return s}(t);e=Math.min(c,(s-a)/(hG(r,(function(e){return e.length}))-1)),function(t){for(var n=function(e,t){for(var n=1/0,r=0;r<e.length;r++)n=Math.min(t(e[r]),n);return n}(t,(function(t){return(s-a-(t.length-1)*e)/uG(t,mG)})),r=0,i=t;r<i.length;r++){for(var o=i[r],l=a,c=0,u=o;c<u.length;c++){(m=u[c]).y0=l,m.y1=l+m.value*n,l=m.y1+e;for(var h=0,p=m.sourceLinks;h<p.length;h++){var d=p[h];d.width=d.value*n}}l=(s-l+e)/(o.length+1);for(var f=0;f<o.length;++f){var m;(m=o[f]).y0+=l*(f+1),m.y1+=l*(f+1)}C(o)}}(r);for(var u=0;u<f;++u){var p=Math.pow(.99,u),d=Math.max(1-p,(u+1)/f);v(r,p,d),g(r,p,d)}}(y),EG(y),y}function g(e,t,r){for(var i=1,a=e.length;i<a;++i){for(var o=e[i],s=0,l=o;s<l.length;s++){for(var c=l[s],u=0,h=0,p=0,d=c.targetLinks;p<d.length;p++){var f=d[p],m=f.source,g=f.value*(c.layer-m.layer);u+=T(m,c)*g,h+=g}if(h>0){var v=(u/h-c.y0)*t;c.y0+=v,c.y1+=v,b(c)}}void 0===n&&o.sort(fG),o.length&&y(o,r)}}function v(e,t,r){for(var i=e.length-2;i>=0;--i){for(var a=e[i],o=0,s=a;o<s.length;o++){for(var l=s[o],c=0,u=0,h=0,p=l.sourceLinks;h<p.length;h++){var d=p[h],f=d.target,m=d.value*(f.layer-l.layer);c+=w(l,f)*m,u+=m}if(u>0){var g=(c/u-l.y0)*t;l.y0+=g,l.y1+=g,b(l)}}void 0===n&&a.sort(fG),a.length&&y(a,r)}}function y(t,n){var r=t.length>>1,i=t[r];E(t,i.y0-e,r-1,n),x(t,i.y1+e,r+1,n),E(t,s,t.length-1,n),x(t,a,0,n)}function x(t,n,r,i){for(;r<t.length;++r){var a=t[r],o=(n-a.y0)*i;o>1e-6&&(a.y0+=o,a.y1+=o),n=a.y1+e}}function E(t,n,r,i){for(;r>=0;--r){var a=t[r],o=(a.y1-n)*i;o>1e-6&&(a.y0-=o,a.y1-=o),n=a.y0-e}}function b(e){var t=e.sourceLinks,n=e.targetLinks;if(void 0===r){for(var i=0,a=n;i<a.length;i++){a[i].source.sourceLinks.sort(dG)}for(var o=0,s=t;o<s.length;o++){s[o].target.targetLinks.sort(pG)}}}function C(e){if(void 0===r)for(var t=0,n=e;t<n.length;t++){var i=n[t],a=i.sourceLinks,o=i.targetLinks;a.sort(dG),o.sort(pG)}}function T(t,n){for(var r=t.y0-(t.sourceLinks.length-1)*e/2,i=0,a=t.sourceLinks;i<a.length;i++){var o=a[i],s=o.target,l=o.width;if(s===n)break;r+=l+e}for(var c=0,u=n.targetLinks;c<u.length;c++){var h=u[c];s=h.source,l=h.width;if(s===t)break;r-=l}return r}function w(t,n){for(var r=n.y0-(n.targetLinks.length-1)*e/2,i=0,a=n.targetLinks;i<a.length;i++){var o=a[i],s=o.source,l=o.width;if(s===t)break;r+=l+e}for(var c=0,u=t.sourceLinks;c<u.length;c++){var h=u[c];s=h.target,l=h.width;if(s===n)break;r-=l}return r}return m.update=function(e){return EG(e),e},m.nodeId=function(e){return arguments.length?(u="function"==typeof e?e:cG(e),m):u},m.nodeAlign=function(e){return arguments.length?(h="function"==typeof e?e:cG(e),m):h},m.nodeDepth=function(e){return arguments.length?(t=e,m):t},m.nodeSort=function(e){return arguments.length?(n=e,m):n},m.nodeWidth=function(e){return arguments.length?(l=+e,m):l},m.nodePadding=function(t){return arguments.length?(c=e=+t,m):c},m.nodes=function(e){return arguments.length?(p="function"==typeof e?e:cG(e),m):p},m.links=function(e){return arguments.length?(d="function"==typeof e?e:cG(e),m):d},m.linkSort=function(e){return arguments.length?(r=e,m):r},m.size=function(e){return arguments.length?(i=a=0,o=+e[0],s=+e[1],m):[o-i,s-a]},m.extent=function(e){return arguments.length?(i=+e[0][0],o=+e[1][0],a=+e[0][1],s=+e[1][1],m):[[i,a],[o,s]]},m.iterations=function(e){return arguments.length?(f=+e,m):f},m}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="treemap",t}Lh(t,e),t.getDefaultOptions=function(){return oG},t.prototype.changeData=function(e){var t=this.options,n=t.colorField,r=t.interactions,i=t.hierarchyConfig;this.updateOption({data:e});var a,o,s=Jj({data:e,colorField:n,enableDrillDown:Qj(r,"treemap-drill-down"),hierarchyConfig:i});this.chart.changeData(s),a=this.chart,(o=a.interactions["drill-down"])&&o.context.actions.find((function(e){return"drill-down-action"===e.name})).reset()},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return aG}}(jN);var CG={left:function(e){return e.depth},right:function(e,t){return t-1-e.height},center:function(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?function(e,t){if(Vh(e)){for(var n,r=1/0,i=0;i<e.length;i++){var a=e[i],o=Yh(t)?t(a):a[t];o<r&&(n=a,r=o)}return n}}(e.sourceLinks,sG)-1:0},justify:lG},TG={nodeId:function(e){return e.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function wG(e,t){var n=function(e){return zp({},TG,e)}(e),r=n.nodeId,i=n.nodeSort,a=n.nodeAlign,o=n.nodeWidth,s=n.nodePadding,l=n.nodeDepth,c=bG().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(l).nodeAlign(function(e){return(lp(e)?CG[e]:Yh(e)?e:null)||lG}(a)).extent([[0,0],[1,1]]).nodeId(r)(t);return c.nodes.forEach((function(e){var t=e.x0,n=e.x1,r=e.y0,i=e.y1;e.x=[t,n,n,t],e.y=[r,r,i,i]})),c.links.forEach((function(e){var t=e.source,n=e.target,r=t.x1,i=n.x0;e.x=[r,r,i,i];var a=e.width/2;e.y=[e.y0+a,e.y0-a,e.y1+a,e.y1-a]})),c}function SG(e,t,n){if(!Vh(e))return[];var r=[],i=function(e,t,n){var r=[];return e.forEach((function(e){var i=e[t],a=e[n];r.includes(i)||r.push(i),r.includes(a)||r.push(a)})),r}(e,t,n),a=function(e,t,n,r){var i={};return t.forEach((function(e){i[e]={},t.forEach((function(t){i[e][t]=0}))})),e.forEach((function(e){i[e[n]][e[r]]=1})),i}(e,i,t,n),o={};function s(e){o[e]=1,i.forEach((function(t){if(0!=a[e][t])if(1==o[t])r.push(e+"_"+t);else{if(-1==o[t])return;s(t)}})),o[e]=-1}return i.forEach((function(e){o[e]=0})),i.forEach((function(e){-1!=o[e]&&s(e)})),0!==r.length&&console.warn("sankey data contains circle, "+r.length+" records removed.",r),e.filter((function(e){return r.findIndex((function(r){return r===e[t]+"_"+e[n]}))<0}))}function kG(e,t,n){return cN(e)?e/n:t}function _G(e,t,n){return cN(e)?e/n:t}function AG(e,t,n){var r,i=e.dataType,a=e.data,o=e.sourceField,s=e.targetField,l=e.weightField,c=e.nodeAlign,u=e.nodeSort,h=e.nodePadding,p=e.nodePaddingRatio,d=e.nodeWidth,f=e.nodeWidthRatio,m=e.nodeDepth,g=e.rawFields,v=void 0===g?[]:g;r=function(e){return"node-link"===e}(i)?a:hN(SG(a,o,s),o,s,l,v);var y=wG({nodeAlign:c,nodePadding:_G(h,p,n),nodeWidth:kG(d,f,t),nodeSort:u,nodeDepth:m},r),x=y.nodes,E=y.links;return{nodes:x.map((function(e){return Ph(Ph({},BM(e,Dh(["x","y","name"],v))),{isNode:!0})})),edges:E.map((function(e){return Ph(Ph({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},BM(e,Dh(["x","y","value"],v))),{isNode:!1})}))}}function OG(e){var t=e.options.rawFields,n=void 0===t?[]:t;return rN({},{options:{tooltip:{fields:cp(Dh(["name","source","target","value","isNode"],n))},label:{fields:cp(Dh(["x","name"],n))}}},e)}function IG(e){var t=e.chart,n=e.options,r=n.color,i=n.nodeStyle,a=n.edgeStyle,o=n.label,s=n.tooltip,l=n.nodeState,c=n.edgeState;t.legend(!1),t.tooltip(s),t.axis(!1),t.coordinate().reflect("y");var u=AG(n,t.width,t.height),h=u.nodes,p=u.edges,d=t.createView({id:"edges"});d.data(p),TF({chart:d,options:{xField:"x",yField:"y",seriesField:"name",edge:{color:r,style:a,shape:"arc"},tooltip:s,state:c}});var f=t.createView({id:"nodes"});return f.data(h),CF({chart:f,options:{xField:"x",yField:"y",seriesField:"name",polygon:{color:r,style:i},label:o,tooltip:s,state:l}}),t.interaction("element-active"),t.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),e}function MG(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),Dh(t.views[0].geometries,t.views[1].geometries).forEach((function(e){e.animate(n)})),e}function NG(e){var t=e.chart,n="sankey-node-draggable";return e.options.nodeDraggable?t.interaction(n):t.removeInteraction(n),e}function FG(e){return DM(OG,IG,aF,NG,MG,sF)(e)}gw("sankey-node-drag",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDragging=!1,t}return Lh(t,e),t.prototype.isNodeElement=function(){var e=Zp(this.context,"event.target");if(e){var t=e.get("element");return t&&t.getModel().data.isNode}return!1},t.prototype.getNodeView=function(){return WM(this.context.view,"nodes")},t.prototype.getEdgeView=function(){return WM(this.context.view,"edges")},t.prototype.getCurrentDatumIdx=function(e){return this.getNodeView().geometries[0].elements.indexOf(e)},t.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:Zp(this.context,"event.x"),y:Zp(this.context,"event.y")};var e=this.context.event.target.get("element"),t=this.getCurrentDatumIdx(e);if(-1===t)return;this.currentElementIdx=t,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},t.prototype.translate=function(){if(this.isDragging){var e=this.context.view,t={x:Zp(this.context,"event.x"),y:Zp(this.context,"event.y")},n=t.x-this.prevPoint.x,r=t.y-this.prevPoint.y,i=this.getNodeView(),a=i.geometries[0].elements[this.currentElementIdx];if(a&&a.getModel()){var o=a.getModel().data,s=i.getOptions().data,l=i.getCoordinate(),c={x:n/l.getWidth(),y:r/l.getHeight()},u=Ph(Ph({},o),{x:o.x.map((function(e){return e+c.x})),y:o.y.map((function(e){return e+c.y}))}),h=Dh(s);h[this.currentElementIdx]=u,i.data(h);var p=o.name,d=this.getEdgeView(),f=d.getOptions().data;f.forEach((function(e){e.source===p&&(e.x[0]+=c.x,e.x[1]+=c.x,e.y[0]+=c.y,e.y[1]+=c.y),e.target===p&&(e.x[2]+=c.x,e.x[3]+=c.x,e.y[2]+=c.y,e.y[3]+=c.y)})),d.data(f),this.prevPoint=t,e.render(!0)}}},t.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},t}(pw)),nS("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(e){return e.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="sankey",t}Lh(t,e),t.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(e){return e.name},callback:function(e){var t=1===e[1];return{style:{fill:"#545454",textAlign:t?"end":"start"},offsetX:t?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(e){return!Zp(e,[0,"data","isNode"])},formatter:function(e){return{name:e.source+" -> "+e.target,value:e.value}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},t.prototype.changeData=function(e){this.updateOption({data:e});var t=AG(this.options,this.chart.width,this.chart.height),n=t.nodes,r=t.edges,i=WM(this.chart,"nodes"),a=WM(this.chart,"edges");i.changeData(n),a.changeData(r)},t.prototype.getSchemaAdaptor=function(){return FG},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(jN);var LG={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(e){return e.id},source:function(e){return e.source},target:function(e){return e.target},sourceWeight:function(e){return e.value||1},targetWeight:function(e){return e.value||1},sortBy:null};function PG(e,t){var n=function(e){return zp({},LG,e)}(e),r={},i=t.nodes,a=t.links;return i.forEach((function(e){var t=n.id(e);r[t]=e})),function(e,t,n){Xh(e,(function(e,r){e.inEdges=t.filter((function(e){return""+n.target(e)==""+r})),e.outEdges=t.filter((function(e){return""+n.source(e)==""+r})),e.edges=e.outEdges.concat(e.inEdges),e.frequency=e.edges.length,e.value=0,e.inEdges.forEach((function(t){e.value+=n.targetWeight(t)})),e.outEdges.forEach((function(t){e.value+=n.sourceWeight(t)}))}))}(r,a,n),function(e,t){var n={weight:function(e,t){return t.value-e.value},frequency:function(e,t){return t.frequency-e.frequency},id:function(e,n){return(""+t.id(e)).localeCompare(""+t.id(n))}}[t.sortBy];!n&&Yh(t.sortBy)&&(n=t.sortBy),n&&e.sort(n)}(i,n),{nodes:function(e,t){var n=e.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(t.weight){var r=t.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),a=t.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;e.forEach((function(e){o+=e.value})),e.forEach((function(e){e.weight=e.value/o,e.width=e.weight*(1-r),e.height=a})),e.forEach((function(n,r){for(var o=0,s=r-1;s>=0;s--)o+=e[s].width+2*i;var l=n.minX=i+o,c=n.maxX=n.minX+n.width,u=n.minY=t.y-a/2,h=n.maxY=u+a;n.x=[l,c,c,l],n.y=[u,u,h,h]}))}else{var s=1/n;e.forEach((function(e,n){e.x=(n+.5)*s,e.y=t.y}))}return e}(i,n),links:function(e,t,n){if(n.weight){var r={};Xh(e,(function(e,t){r[t]=e.value})),t.forEach((function(t){var i=n.source(t),a=n.target(t),o=e[i],s=e[a];if(o&&s){var l=r[i],c=n.sourceWeight(t),u=o.minX+(o.value-l)/o.value*o.width,h=u+c/o.value*o.width;r[i]-=c;var p=r[a],d=n.targetWeight(t),f=s.minX+(s.value-p)/s.value*s.width,m=f+d/s.value*s.width;r[a]-=d;var g=n.y;t.x=[u,h,f,m],t.y=[g,g,g,g],t.source=o,t.target=s}}))}else t.forEach((function(t){var r=e[n.source(t)],i=e[n.target(t)];r&&i&&(t.x=[r.x,i.x],t.y=[r.y,i.y],t.source=r,t.target=i)}));return t}(r,a,n)}}var RG={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(e,t){return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:(e[0]+e[1])/2>.5?-4:4,content:t}}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(e){return!Zp(e,[0,"data","isNode"])},formatter:function(e){return{name:e.source+" -> "+e.target,value:e.value}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function DG(e){var t=e.options,n=t.data,r=t.sourceField,i=t.targetField,a=t.weightField,o=t.nodePaddingRatio,s=t.nodeWidthRatio,l=t.rawFields,c=void 0===l?[]:l,u=PG({weight:!0,nodePaddingRatio:o,nodeWidthRatio:s},hN(n,r,i,a)),h=u.nodes,p=u.links,d=h.map((function(e){return Ph(Ph({},BM(e,Dh(["id","x","y","name"],c))),{isNode:!0})})),f=p.map((function(e){return Ph(Ph({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},BM(e,Dh(["x","y","value"],c))),{isNode:!1})}));return Ph(Ph({},e),{ext:Ph(Ph({},e.ext),{chordData:{nodesData:d,edgesData:f}})})}function BG(e){var t;return e.chart.scale(((t={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}}).name={sync:"color"},t.source={sync:"color"},t)),e}function zG(e){return e.chart.axis(!1),e}function HG(e){return e.chart.legend(!1),e}function jG(e){var t=e.chart,n=e.options.tooltip;return t.tooltip(n),e}function GG(e){return e.chart.coordinate("polar").reflect("y"),e}function $G(e){var t=e.chart,n=e.options,r=e.ext.chordData.nodesData,i=n.nodeStyle,a=n.label,o=n.tooltip,s=t.createView();return s.data(r),CF({chart:s,options:{xField:"x",yField:"y",seriesField:"name",polygon:{style:i},label:a,tooltip:o}}),e}function YG(e){var t=e.chart,n=e.options,r=e.ext.chordData.edgesData,i=n.edgeStyle,a=n.tooltip,o=t.createView();return o.data(r),TF({chart:o,options:{xField:"x",yField:"y",seriesField:"source",edge:{style:i,shape:"arc"},tooltip:a}}),e}function UG(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),Xh(VM(t),(function(e){e.animate(n)})),e}function VG(e){return DM(sF,DG,GG,BG,zG,HG,jG,YG,$G,aF,lF,UG)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="chord",t}Lh(t,e),t.getDefaultOptions=function(){return RG},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return VG}}(jN);var WG={field:"value",as:["x","y","r"],sort:function(e,t){return t.value-e.value}};function XG(e){var t=e.data,n=e.hierarchyConfig,r=e.rawFields,i=void 0===r?[]:r,a=e.enableDrillDown,o=function(e,t){var n,r=(t=zp({},WG,t)).as;if(!Vh(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');try{n=$z(t)}catch(rh){console.warn(rh)}var i,a=(i=e,TH().size(t.size).padding(t.padding)(Jz(i).sum((function(e){return e[n]})).sort(t.sort))),o=r[0],s=r[1],l=r[2];return a.each((function(e){e[o]=e.x,e[s]=e.y,e[l]=e.r})),Yz(a)}(t,Ph(Ph({},n),{field:"value",as:["x","y","r"]})),s=[];return o.forEach((function(e){for(var t,r=e.data.name,o=Ph({},e);o.depth>1;)r=(null===(t=o.parent.data)||void 0===t?void 0:t.name)+" / "+r,o=o.parent;if(a&&e.depth>2)return null;var l=rN({},e.data,Ph(Ph(Ph({},BM(e.data,i)),{path:r}),e));l.ext=n,l["hierarchy-data-transform-params"]={hierarchyConfig:n,rawFields:i,enableDrillDown:a},s.push(l)})),s}function qG(e,t,n){var r=mN([e,t]),i=r[0],a=r[1],o=r[2],s=r[3],l=n.width-(s+a),c=n.height-(i+o),u=Math.min(l,c),h=(l-u)/2,p=(c-u)/2;return{finalPadding:[i+p,a+h,o+p,s+h],finalSize:u<0?0:u}}var KG=["x","y","r","name","value","path","depth"],QG={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}};function ZG(e){var t=e.chart,n=Math.min(t.viewBBox.width,t.viewBBox.height);return rN({options:{size:function(e){return e.r*n}}},e)}function JG(e){var t=e.options,n=e.chart,r=n.viewBBox,i=t.padding,a=t.appendPadding,o=t.drilldown,s=a;(null==o?void 0:o.enabled)&&(s=mN([fN(n.appendPadding,Zp(o,["breadCrumb","position"])),a]));var l=qG(i,s,r).finalPadding;return n.padding=l,n.appendPadding=0,e}function e$(e){var t=e.chart,n=e.options,r=t.padding,i=t.appendPadding,a=n.color,o=n.colorField,s=n.pointStyle,l=n.hierarchyConfig,c=n.sizeField,u=n.rawFields,h=void 0===u?[]:u,p=n.drilldown,d=XG({data:n.data,hierarchyConfig:l,enableDrillDown:null==p?void 0:p.enabled,rawFields:h});t.data(d);var f=qG(r,i,t.viewBBox).finalSize,m=function(e){return e.r*f};return c&&(m=function(e){return e[c]*f}),EF(rN({},e,{options:{xField:"x",yField:"y",seriesField:o,sizeField:c,rawFields:Dh(KG,h),point:{color:a,style:s,shape:"circle",size:m}}})),e}function t$(e){return DM(hF({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(e)}function n$(e){var t=e.chart,n=e.options.tooltip;if(!1===n)t.tooltip(!1);else{var r=n;Zp(n,"fields")||(r=rN({},{customItems:function(e){return e.map((function(e){var n=Zp(t.getOptions(),"scales"),r=Zp(n,["name","formatter"],(function(e){return e})),i=Zp(n,["value","formatter"],(function(e){return e}));return Ph(Ph({},e),{name:r(e.data.name),value:i(e.data.value)})}))}},r)),t.tooltip(r)}return e}function r$(e){return e.chart.axis(!1),e}function i$(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return(null==t?void 0:t.enabled)?rN({},e,{interactions:Dh(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:XG,enableDrillDown:!0}}])}):e}function a$(e){return aF({chart:e.chart,options:i$(e.options)}),e}function o$(e){return DM(nF("pointStyle"),ZG,JG,sF,t$,e$,r$,rF,n$,a$,oF,pF())(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle-packing",t}Lh(t,e),t.getDefaultOptions=function(){return QG},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return o$},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(jN),function(e){function t(t,n,r,i){var a=e.call(this,t,rN({},i,n))||this;return a.type="g2-plot",a.defaultOptions=i,a.adaptor=r,a}Lh(t,e),t.prototype.getDefaultOptions=function(){return this.defaultOptions},t.prototype.getSchemaAdaptor=function(){return this.adaptor}}(jN);var s$={line:FF,pie:FL,column:sL,bar:mL,area:jF,gauge:vj,"tiny-line":FR,"tiny-column":RR,"tiny-area":MR,"ring-progress":aD,progress:tD,scatter:GP,histogram:XR,funnel:Ez},l$={line:LF,pie:LL,column:cL,bar:vL,area:GF,gauge:yj,"tiny-line":LR,"tiny-column":BR,"tiny-area":HR,"ring-progress":sD,progress:nD,scatter:XP,histogram:qR,funnel:bz},c$={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function u$(e,t,n){var r=l$[e];r?(0,s$[e])({chart:t,options:rN({},r.getDefaultOptions(),Zp(c$,e,{}),n)}):console.error("could not find "+e+" plot")}function h$(e){var t=e.chart,n=e.options,r=n.views,i=n.legend;return Xh(r,(function(e){var n=e.region,r=e.data,i=e.meta,a=e.axes,o=e.coordinate,s=e.interactions,l=e.annotations,c=e.tooltip,u=e.geometries,h=t.createView({region:n});h.data(r);var p={};a&&Xh(a,(function(e,t){p[t]=BM(e,GN)})),p=rN({},i,p),h.scale(p),a?Xh(a,(function(e,t){h.axis(t,e)})):h.axis(!1),h.coordinate(o),Xh(u,(function(e){var t=vF({chart:h,options:e}).ext,n=e.adjust;n&&t.geometry.adjust(n)})),Xh(s,(function(e){!1===e.enable?h.removeInteraction(e.type):h.interaction(e.type,e.cfg)})),Xh(l,(function(e){h.annotation()[e.type](Ph({},e))})),"boolean"==typeof e.animation?h.animate(!1):(h.animate(!0),Xh(h.geometries,(function(t){t.animate(e.animation)}))),c&&(h.interaction("tooltip"),h.tooltip(c))})),i?Xh(i,(function(e,n){t.legend(n,e)})):t.legend(!1),t.tooltip(n.tooltip),e}function p$(e){var t=e.chart;return Xh(e.options.plots,(function(e){var n=e.type,r=e.region,i=e.options,a=void 0===i?{}:i,o=a.tooltip,s=t.createView(Ph({region:r},BM(a,HN)));o&&s.interaction("tooltip"),u$(n,s,a)})),e}function d$(e){return DM(oF,h$,p$,aF,oF,sF,iF)(e)}gw("association",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),t.prototype.getAssociationItems=function(e,t){var n,r=this.context.event,i=t||{},a=i.linkField,o=i.dim,s=[];if(null===(n=r.data)||void 0===n?void 0:n.data){var l=r.data.data;Xh(e,(function(e){var t,n,r=a;if("x"===o?r=e.getXScale().field:"y"===o?r=null===(t=e.getYScales().find((function(e){return e.field===r})))||void 0===t?void 0:t.field:r||(r=null===(n=e.getGroupScales()[0])||void 0===n?void 0:n.field),r){var i=Kp(YM(e),(function(t){var n=!1,i=!1,a=Vh(l)?Zp(l[0],r):Zp(l,r);return function(e,t){var n=e.getModel().data;return Vh(n)?n[0][t]:n[t]}(t,r)===a?n=!0:i=!0,{element:t,view:e,active:n,inactive:i}}));s.push.apply(s,i)}}))}return s},t.prototype.showTooltip=function(e){var t=qM(this.context.view);Xh(this.getAssociationItems(t,e),(function(e){if(e.active){var t=e.element.shape.getCanvasBBox();e.view.showTooltip({x:t.minX+t.width/2,y:t.minY+t.height/2})}}))},t.prototype.hideTooltip=function(){Xh(qM(this.context.view),(function(e){e.hideTooltip()}))},t.prototype.active=function(e){var t=XM(this.context.view);Xh(this.getAssociationItems(t,e),(function(e){var t=e.active,n=e.element;t&&n.setState("active",!0)}))},t.prototype.selected=function(e){var t=XM(this.context.view);Xh(this.getAssociationItems(t,e),(function(e){var t=e.active,n=e.element;t&&n.setState("selected",!0)}))},t.prototype.highlight=function(e){var t=XM(this.context.view);Xh(this.getAssociationItems(t,e),(function(e){var t=e.inactive,n=e.element;t&&n.setState("inactive",!0)}))},t.prototype.reset=function(){Xh(XM(this.context.view),(function(e){Xh(YM(e),(function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("selected")&&e.setState("selected",!1),e.hasState("inactive")&&e.setState("inactive",!1)}))}))},t}(pw)),nS("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),nS("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),nS("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),nS("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var f$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="mix",t}return Lh(t,e),t.prototype.getSchemaAdaptor=function(){return d$},t}(jN);function m$(e){var t=e.chart,n=e.options,r=n.type,i=n.data,a=n.fields,o=n.eachView,s=nd(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return t.data(i),t.facet(r,Ph(Ph({},s),{fields:a,eachView:function(e,t){var n=o(e,t);if(n.geometries)!function(e,t){var n=t.data,r=t.coordinate,i=t.interactions,a=t.annotations,o=t.animation,s=t.tooltip,l=t.axes,c=t.meta,u=t.geometries;n&&e.data(n);var h={};l&&Xh(l,(function(e,t){h[t]=BM(e,GN)})),h=rN({},c,h),e.scale(h),r&&e.coordinate(r),!1===l?e.axis(!1):Xh(l,(function(t,n){e.axis(n,t)})),Xh(u,(function(t){var n=vF({chart:e,options:t}).ext,r=t.adjust;r&&n.geometry.adjust(r)})),Xh(i,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg)})),Xh(a,(function(t){e.annotation()[t.type](Ph({},t))})),"boolean"==typeof o?e.animate(!1):(e.animate(!0),Xh(e.geometries,(function(e){e.animate(o)}))),s?(e.interaction("tooltip"),e.tooltip(s)):!1===s&&e.removeInteraction("tooltip")}(e,n);else{var r=n,i=r.options;i.tooltip&&e.interaction("tooltip"),u$(r.type,e,i)}}})),e}function g$(e){var t=e.chart,n=e.options,r=n.axes,i=n.meta,a=n.tooltip,o=n.coordinate,s=n.theme,l=n.legend,c=n.interactions,u=n.annotations,h={};return r&&Xh(r,(function(e,t){h[t]=BM(e,GN)})),h=rN({},i,h),t.scale(h),t.coordinate(o),r?Xh(r,(function(e,n){t.axis(n,e)})):t.axis(!1),a?(t.interaction("tooltip"),t.tooltip(a)):!1===a&&t.removeInteraction("tooltip"),t.legend(l),s&&t.theme(s),Xh(c,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg)})),Xh(u,(function(e){t.annotation()[e.type](Ph({},e))})),e}function v$(e){return DM(sF,m$,g$)(e)}var y$,x$,E$={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="area",t}Lh(t,e),t.getDefaultOptions=function(){return E$},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return v$}}(jN),(x$=y$||(y$={})).DEV="DEV",x$.BETA="BETA",x$.STABLE="STABLE",function(){function e(){}Object.defineProperty(e,"MultiView",{get:function(){var e,t;return e=y$.STABLE,t="MultiView",console.warn(e===y$.DEV?"Plot '"+t+"' is in DEV stage, just give us issues.":e===y$.BETA?"Plot '"+t+"' is in BETA stage, DO NOT use it in production env.":e===y$.STABLE?"Plot '"+t+"' is in STABLE stage, import it by \"import { "+t+" } from '@antv/g2plot'\".":"invalid Stage type."),f$},enumerable:!1,configurable:!0})}(),yN("en-US",{locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}}),yN("zh-CN",{locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}});var b$=function(e,t){var n=document.createElement("div");return"tooltip"===t&&(n.className="g2-tooltip"),q.render(e,n),n},C$=function(e,t){return{}.toString.call(e)==="[object ".concat(t,"]")},T$=function(e){return Object.prototype.toString.call(e).slice(8,-1)},w$=function(e){if(!e)return e;var t=new e.constructor;for(var n in e)e.hasOwnProperty(n)&&(t[n]="Object"===T$(e[n])||"Array"===T$(e[n])?w$(e[n]):e[n]);return t},S$=function(e,t){for(var n=e,r=0;r<t.length;r+=1){if(!(null==n?void 0:n[t[r]])){n=void 0;break}n=n[t[r]]}return n},k$=function(){return(k$=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function A$(e,t){var n=f.exports.useRef(),r=f.exports.useRef(),i=f.exports.useRef(null),a=t.onReady,o=t.onEvent,s=function(e,t,n){var r=S$(e,t);!function(e,t,n){if(!e)return e;var r=e;t.forEach((function(e,i){i<t.length-1?r=r[e]:r[e]=n}))}(e,t,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=C$(r,"Function")?r.apply(void 0,e):r;return C$(i,"String")||C$(i,"Number")||C$(i,"HTMLDivElement")?i:b$(i,n)}))},l=function(){S$(t,["statistic","content","customHtml"])&&s(t,["statistic","content","customHtml"]),S$(t,["statistic","title","customHtml"])&&s(t,["statistic","title","customHtml"]),"object"==typeof t.tooltip&&(S$(t,["tooltip","container"])&&s(t,["tooltip","container"],"tooltip"),S$(t,["tooltip","customContent"])&&s(t,["tooltip","customContent"],"tooltip"))};return f.exports.useEffect((function(){if(n.current&&!qp(r.current,t)){var e=!1;if(r.current){var i=r.current;i.data,i.value,i.percent;var a=_$(i,["data","value","percent"]);t.data,t.value,t.percent;var o=_$(t,["data","value","percent"]);e=qp(a,o)}if(e&&"Mix"!==Zp(t,"chartType")){var s="data",c=Object.keys(t);["percent"].forEach((function(e){c.includes(e)&&(s=e)})),n.current.changeData((null==t?void 0:t[s])||[])}else l(),n.current.update(t);r.current=w$(t)}}),[t]),f.exports.useEffect((function(){if(!i.current)return function(){return null};l();var s=new e(i.current,k$({},t));e.__proto__.toDataURL=function(e,t){return function(e,t){var r;return void 0===e&&(e="image/png"),null===(r=n.current)||void 0===r?void 0:r.chart.canvas.cfg.el.toDataURL(e,t)}(e,t)},e.prototype.downloadImage=function(e,t,r){return function(e,t,r){var i;void 0===e&&(e="download"),void 0===t&&(t="image/png");var a=e;-1===e.indexOf(".")&&(a="".concat(e,".").concat(t.split("/")[1]));var o=null===(i=n.current)||void 0===i?void 0:i.chart.canvas.cfg.el.toDataURL(t,r),s=document.createElement("a");return s.href=o,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),s=null,a}(e,t,r)},s.render(),r.current||(r.current=w$(t)),n.current=function(e){if(!e)return e;var t={};for(var n in e)t[n]=e[n];return t}(s),a&&a(s);var c=function(e){o&&o(s,e)};return s.on("*",c),function(){n.current&&(n.current.destroy(),n.current.off("*",c),n.current=void 0)}}),[]),{chart:n,container:i}}var O$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),I$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1},t.renderError=function(e){var n=t.props.errorTemplate;return n&&"function"==typeof n?n(e):d.createElement("h5",null,"组件出错了，请核查后重试： ",e.message)},t}return O$(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0,error:e}},t.getDerivedStateFromProps=function(e,t){return t.children!==e.children?{children:e.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):d.createElement(f.exports.Fragment,null,this.props.children)},t}(d.Component),M$=function(){return(M$=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var N$=function(e){var t=e.animate,n=e.backgroundColor,r=e.backgroundOpacity,i=e.baseUrl,a=e.children,o=e.foregroundColor,s=e.foregroundOpacity,l=e.gradientRatio,c=e.uniqueKey,u=e.interval,h=e.rtl,p=e.speed,d=e.style,m=e.title,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),v=c||Math.random().toString(36).substring(6),y=v+"-diff",x=v+"-animated-diff",E=v+"-aria",b=h?{transform:"scaleX(-1)"}:null,C="0; "+u+"; 1",T=p+"s";return f.exports.createElement("svg",M$({"aria-labelledby":E,role:"img",style:M$(M$({},d),b)},g),m?f.exports.createElement("title",{id:E},m):null,f.exports.createElement("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+i+"#"+y+")",style:{fill:"url("+i+"#"+x+")"}}),f.exports.createElement("defs",{role:"presentation"},f.exports.createElement("clipPath",{id:y},a),f.exports.createElement("linearGradient",{id:x},f.exports.createElement("stop",{offset:"0%",stopColor:n,stopOpacity:r},t&&f.exports.createElement("animate",{attributeName:"offset",values:-l+"; "+-l+"; 1",keyTimes:C,dur:T,repeatCount:"indefinite"})),f.exports.createElement("stop",{offset:"50%",stopColor:o,stopOpacity:s},t&&f.exports.createElement("animate",{attributeName:"offset",values:-l/2+"; "+-l/2+"; "+(1+l/2),keyTimes:C,dur:T,repeatCount:"indefinite"})),f.exports.createElement("stop",{offset:"100%",stopColor:n,stopOpacity:r},t&&f.exports.createElement("animate",{attributeName:"offset",values:"0; 0; "+(1+l),keyTimes:C,dur:T,repeatCount:"indefinite"})))))};N$.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var F$=function(e){return e.children?f.exports.createElement(N$,M$({},e)):f.exports.createElement(L$,M$({},e))},L$=function(e){return f.exports.createElement(F$,M$({viewBox:"0 0 476 124"},e),f.exports.createElement("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),f.exports.createElement("circle",{cx:"20",cy:"20",r:"20"}))},P$=function(e){var t=e.loadingTemplate;return d.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},t||d.createElement(F$,{viewBox:"0 0 400 180",width:200,height:90,speed:1},d.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),d.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),d.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),d.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),d.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),d.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),d.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),d.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),d.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),d.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"})))},R$=f.exports.forwardRef((function(e,t){var n=e.chartRef,r=e.style,i=void 0===r?{height:"inherit"}:r,a=e.className,o=e.loading,s=e.loadingTemplate,l=e.errorTemplate,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),u=A$(LL,c),h=u.chart,p=u.container;return f.exports.useEffect((function(){!function(e,t){e&&(Yh(e)?e(t):e.current=t)}(n,h.current)}),[h.current]),f.exports.useImperativeHandle(t,(function(){return{getChart:function(){return h.current}}})),d.createElement(I$,{errorTemplate:l},o&&d.createElement(P$,{loadingTemplate:s}),d.createElement("div",{className:a,style:i,ref:p}))}));const D$=e=>{const{data:t,positon:n,hidden:r,labelWithName:i}=e,a={padding:[16,8,16,8],appendPadding:10,data:t,angleField:"value",colorField:"name",radius:.9,label:{type:"spider",content:e=>`${i?`${e.name}: `:""}${(100*e.percent).toFixed(0)}%`,style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}],tooltip:{fields:["name","value"],formatter:e=>({name:e.name,value:`${e.value.toFixed(3)}`})},legend:!r&&{position:n}};return d.createElement(R$,s({},a))};function B$(e){var t,n;const{values:r,series:i}=e,{custom:a,options:o}=r,{calc:s,legengPosition:l,max:c,labelWithName:u}=a,h=xh(i,s,{util:null==(t=null==o?void 0:o.standardOptions)?void 0:t.util,decimals:null==(n=null==o?void 0:o.standardOptions)?void 0:n.decimals},null==o?void 0:o.valueMappings).sort(((e,t)=>t.value-e.value)),p=c&&h.length>c?h.slice(0,c).map((e=>({name:e.name,value:e.stat}))).concat({name:"其他",value:h.slice(c).reduce(((e,t)=>t.stat+e),0)}):h.map((e=>({name:e.name,value:e.stat})));return d.createElement("div",{className:"renderer-pie-container"},d.createElement(D$,{data:p,positon:"hidden"!==l?l:void 0,hidden:"hidden"===l,labelWithName:u}))}var z$=Math.PI/3,H$=[0,z$,2*z$,3*z$,4*z$,5*z$];function j$(e){return e[0]}function G$(e){return e[1]}const $$={fontWeight:"normal",fontSize:"12px",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono"},Y$=(e=$$)=>`${e.fontWeight} ${e.fontSize} ${e.fontFamily}`;function U$(e,t=Y$()){const n=document.createElement("canvas").getContext("2d");n.font=t;return n.measureText(e).width}function V$(e,t,n,r){return function(e,t,n){let r=U$(e,Y$(l(s({},$$),{fontSize:"24px"})));if(r<=(t*=.95)&&24<=n)return 24;for(let i=24;i>=6;i--)if(r=U$(e,Y$(l(s({},$$),{fontSize:i+"px"}))),r<t&&i<=n)return Math.ceil(i);return 0}(e,n,r/t)}const W$=se("body").append((function(){return document.createElement("div")})).attr("class","hexbin-tooltip").style("opacity",0);function X$(e,t,{width:n,height:r,fontAutoScale:i=!0,fontSize:a=12}){const o=me().duration(750),{columns:s,rows:l}=function(e,t,n){let r=0,i=0;const a=Math.sqrt(n);return e>t?(r=Math.ceil(e/t*a*.75),r<1?r=1:r>n&&(r=n),i=Math.ceil(n/r),i<1&&(i=1)):(i=Math.ceil(t/e*a*.75),i<1?i=1:i>n&&(i=n),r=Math.ceil(n/i),r<1&&(r=1)),{columns:r,rows:i}}(n,r,t.length),c=Math.floor(ge([n/((s+.5)*Math.sqrt(3)),r/(1.5*(l+1/3)),n/7])),u=Math.sin(60*Math.PI/180)*c*2,h=function(e,t,n,r){let i=[];for(let a=0,o=0;a<e;a++)for(let e=0;e<t&&o<=n-1;e++,o++)i.push([r*e*1.75,r*a*1.5]);return i}(l,s,t.length,c);let p=(n-u*s)/2+u/2;h.length>=2*s&&(p=(n-u*s-u/2)/2+u/2);const d=(r-2*c*l)/2+c,f=function(){var e,t,n,r=0,i=0,a=1,o=1,s=j$,l=G$;function c(e){var r,i={},a=[],o=e.length;for(r=0;r<o;++r)if(!isNaN(u=+s.call(null,c=e[r],r,e))&&!isNaN(h=+l.call(null,c,r,e))){var c,u,h,p=Math.round(h/=n),d=Math.round(u=u/t-(1&p)/2),f=h-p;if(3*Math.abs(f)>1){var m=u-d,g=d+(u<d?-1:1)/2,v=p+(h<p?-1:1),y=u-g,x=h-v;m*m+f*f>y*y+x*x&&(d=g+(1&p?1:-1)/2,p=v)}var E=d+"-"+p,b=i[E];b?b.push(c):(a.push(b=i[E]=[c]),b.x=(d+(1&p)/2)*t,b.y=p*n)}return a}function u(e){var t=0,n=0;return H$.map((function(r){var i=Math.sin(r)*e,a=-Math.cos(r)*e,o=i-t,s=a-n;return t=i,n=a,[o,s]}))}return c.hexagon=function(t){return"m"+u(null==t?e:+t).join("l")+"z"},c.centers=function(){for(var s=[],l=Math.round(i/n),c=Math.round(r/t),u=l*n;u<o+e;u+=n,++l)for(var h=c*t+(1&l)*t/2;h<a+t/2;h+=t)s.push([h,u]);return s},c.mesh=function(){var t=u(e).slice(0,4).join("l");return c.centers().map((function(e){return"M"+e+"m"+t})).join("")},c.x=function(e){return arguments.length?(s=e,c):s},c.y=function(e){return arguments.length?(l=e,c):l},c.radius=function(r){return arguments.length?(t=2*(e=+r)*Math.sin(z$),n=1.5*e,c):e},c.size=function(e){return arguments.length?(r=i=0,a=+e[0],o=+e[1],c):[a-r,o-i]},c.extent=function(e){return arguments.length?(r=+e[0][0],i=+e[0][1],a=+e[1][0],o=+e[1][1],c):[[r,i],[a,o]]},c.radius(1)}().radius(c),m=p,g=d,v=f(h),y=c,x=.9*u;let E=a,b=a,C=!1,w=0;if(i){let e="",n="";for(let r=0;r<t.length;r++)t[r].name.length>e.length&&(e=t[r].name),T.toString(t[r].value).length>n.length&&(n=T.toString(t[r].value));E=V$(e,2,x,y),b=V$(n,2,x,y),E<6&&(C=!0,w=18,e=e.substring(0,w+2),E=V$(e,2,x,y),E<6&&(w=10,e=e.substring(0,w+2),E=V$(e,2,x,y),E<6&&(w=6,e=e.substring(0,w+2),E=V$(e,2,x,y)))),b>E&&(b=E)}const S=y/2/2+b/2,k=-y/2/2+E/2;e.attr("width",n).attr("height",r).attr("transform",`translate(${m},${g})`);const _=e.selectAll(".hexagon").data(v),A=_.exit().remove();return _.enter().append((function(){return document.createElementNS("http://www.w3.org/2000/svg","path")})).attr("class","hexagon").on("mousemove",(function(e,n){var r,i;const a=null==(r=t[n])?void 0:r.metric,o=`${`<div><strong>${(null==a?void 0:a.__name__)||"value"}: ${null==(i=t[n])?void 0:i.value}</strong></div>`}${T.map(T.omit(a,"__name__"),((e,t)=>`<div>${t}: ${e}</div>`)).join("")}`;W$.style("opacity",.9),W$.html(o).style("left",le.pageX+10+"px").style("top",le.pageY-28+"px")})).on("mouseout",(function(){W$.style("opacity",0)})).attr("stroke","white").attr("stroke-width","1px").style("fill",((e,n)=>{var r;return null==(r=t[n])?void 0:r.color})).style("fill-opacity",1).transition(o).attr("d",(function(e){return"M"+e.x+","+e.y+f.hexagon()})),_.enter().append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y+k})).text((function(e,n){var r;let i=null==(r=t[n])?void 0:r.name;return C?(i=i.substring(0,w)+"...",i):i})).attr("text-anchor","middle").attr("alignment-baseline","central").style("pointer-events","none").style("font-size",E+"px").style("fill","white").each((function(e){e.bbox=this.getBBox()})),E&&_.enter().insert("rect","text").attr("x",(function(e){return e.bbox.x-4})).attr("y",(function(e){return e.bbox.y-4})).attr("rx",2).attr("ry",2).attr("width",(function(e){return e.bbox.width+8})).attr("height",(function(e){return e.bbox.height+8})).attr("fill-opacity","0.2").style("fill","#000").style("pointer-events","none"),_.enter().append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y+S})).text((function(e,n){var r;return null==(r=t[n])?void 0:r.value})).attr("text-anchor","middle").attr("alignment-baseline","central").style("font-size",b+"px").style("fill","white").style("pointer-events","none").each((function(e){e.bbox=this.getBBox()})),b&&_.enter().insert("rect","text").attr("x",(function(e){return e.bbox.x-4})).attr("y",(function(e){return e.bbox.y-4})).attr("rx",2).attr("ry",2).attr("width",(function(e){return e.bbox.width+8})).attr("height",(function(e){return e.bbox.height+8})).attr("fill-opacity","0.2").style("fill","#000").style("pointer-events","none"),[...A.nodes()]}function q$(e,{width:t,height:n,parentGroupEl:r}){const i=se(r).attr("width",t).attr("height",n),a=function(e,t,n){let r=e;for(let i=1,a=1/0;i<=e;i+=1){const o=Math.floor(t/i),s=2*o/3,l=Math.abs(t*n-e*o*s);l<a&&(a=l,r=i)}return r}(1,t,n);X$(i,e,{width:Math.floor(t/a),height:n/Math.ceil(1/a)})}const K$=e=>{const{values:t,series:n}=e,{custom:r={},options:i}=t,{calc:a,colorRange:o=[],reverseColorOrder:c=!1,colorDomainAuto:u,colorDomain:h}=r,p=f.exports.useRef(null),d=f.exports.useRef(null),m=pe(d);return f.exports.useEffect((()=>{var e,t;const r=xh(n,a,{util:null==(e=null==i?void 0:i.standardOptions)?void 0:e.util,decimals:null==(t=null==i?void 0:i.standardOptions)?void 0:t.decimals},null==i?void 0:i.valueMappings),d=ne().domain(function(e,t,n){if(!t&&(null==n?void 0:n.length))return[n[0],(n[0]+n[1])/2,n[1]];const r=T.get(T.minBy(e,"stat"),"stat"),i=T.get(T.maxBy(e,"stat"),"stat");return void 0!==r&&void 0!==i?[r,(i+r)/2,i]:[]}(r,u,h)).range(c?T.reverse(T.slice(o)):o);if((null==m?void 0:m.width)&&(null==m?void 0:m.height)){const e={width:null==m?void 0:m.width,height:null==m?void 0:m.height,parentGroupEl:p.current},t=T.map(r,(e=>l(s({},e),{value:e.text,color:e.color||d(e.stat)||"#3399CC"})));se(p.current).selectAll("*").remove(),t.length&&q$(t,e)}}),[JSON.stringify(n),JSON.stringify(i),null==m?void 0:m.width,null==m?void 0:m.height,a,o,c,u,h]),f.exports.createElement("div",{ref:d,style:{width:"100%",height:"100%"}},f.exports.createElement("svg",{style:{width:"100%",height:"100%"}},f.exports.createElement("g",{ref:p})))},Q$=["http","https","mailto","tel"];function Z$(e){return e&&"object"==typeof e?"position"in e||"type"in e?eY(e.position):"start"in e||"end"in e?eY(e):"line"in e||"column"in e?J$(e):"":""}function J$(e){return tY(e&&e.line)+":"+tY(e&&e.column)}function eY(e){return J$(e&&e.start)+"-"+J$(e&&e.end)}function tY(e){return e&&"number"==typeof e?e:1}class nY extends Error{constructor(e,t,n){const r=[null,null];let i={start:{line:null,column:null},end:{line:null,column:null}};if(super(),"string"==typeof t&&(n=t,t=void 0),"string"==typeof n){const e=n.indexOf(":");-1===e?r[1]=n:(r[0]=n.slice(0,e),r[1]=n.slice(e+1))}t&&("type"in t||"position"in t?t.position&&(i=t.position):"start"in t||"end"in t?i=t:("line"in t||"column"in t)&&(i.start=t)),this.name=Z$(t)||"1:1",this.message="object"==typeof e?e.message:e,this.stack="object"==typeof e?e.stack:"",this.reason=this.message,this.fatal,this.line=i.start.line,this.column=i.start.column,this.source=r[0],this.ruleId=r[1],this.position=i,this.actual,this.expected,this.file,this.url,this.note}}nY.prototype.file="",nY.prototype.name="",nY.prototype.reason="",nY.prototype.message="",nY.prototype.stack="",nY.prototype.fatal=null,nY.prototype.column=null,nY.prototype.line=null,nY.prototype.source=null,nY.prototype.ruleId=null,nY.prototype.position=null;const rY={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');iY(e);let n,r=0,i=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.charCodeAt(a)){if(n){r=a+1;break}}else i<0&&(n=!0,i=a+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let o=-1,s=t.length-1;for(;a--;)if(47===e.charCodeAt(a)){if(n){r=a+1;break}}else o<0&&(n=!0,o=a+1),s>-1&&(e.charCodeAt(a)===t.charCodeAt(s--)?s<0&&(i=a):(s=-1,i=o));r===i?i=o:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(iY(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.charCodeAt(0)?"/":".":1===n&&47===e.charCodeAt(0)?"//":e.slice(0,n)},extname:function(e){iY(e);let t,n=e.length,r=-1,i=0,a=-1,o=0;for(;n--;){const s=e.charCodeAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?a<0?a=n:1!==o&&(o=1):a>-1&&(o=-1);else if(t){i=n+1;break}}if(a<0||r<0||0===o||1===o&&a===r-1&&a===i+1)return"";return e.slice(a,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)iY(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){iY(e);const t=47===e.charCodeAt(0);let n=function(e,t){let n,r,i="",a=0,o=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(o===l-1||1===s);else if(o!==l-1&&2===s){if(i.length<2||2!==a||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){if(r=i.lastIndexOf("/"),r!==i.length-1){r<0?(i="",a=0):(i=i.slice(0,r),a=i.length-1-i.lastIndexOf("/")),o=l,s=0;continue}}else if(i.length>0){i="",a=0,o=l,s=0;continue}t&&(i=i.length>0?i+"/..":"..",a=2)}else i.length>0?i+="/"+e.slice(o+1,l):i=e.slice(o+1,l),a=l-o-1;o=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.charCodeAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function iY(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const aY={cwd:function(){return"/"}};function oY(e){return null!==e&&"object"==typeof e&&e.href&&e.origin}function sY(e){if("string"==typeof e)e=new URL(e);else if(!oY(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.charCodeAt(n)&&50===t.charCodeAt(n+1)){const e=t.charCodeAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const lY=["history","path","basename","stem","extname","dirname"];class cY{constructor(e){let t;t=e?"string"==typeof e||function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)?{value:e}:oY(e)?{path:e}:e:{},this.data={},this.messages=[],this.history=[],this.cwd=aY.cwd(),this.value,this.stored,this.result,this.map;let n,r=-1;for(;++r<lY.length;){const e=lY[r];e in t&&void 0!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)lY.includes(n)||(this[n]=t[n])}get path(){return this.history[this.history.length-1]}set path(e){oY(e)&&(e=sY(e)),hY(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return"string"==typeof this.path?rY.dirname(this.path):void 0}set dirname(e){pY(this.basename,"dirname"),this.path=rY.join(e||"",this.basename)}get basename(){return"string"==typeof this.path?rY.basename(this.path):void 0}set basename(e){hY(e,"basename"),uY(e,"basename"),this.path=rY.join(this.dirname||"",e)}get extname(){return"string"==typeof this.path?rY.extname(this.path):void 0}set extname(e){if(uY(e,"extname"),pY(this.dirname,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=rY.join(this.dirname,this.stem+(e||""))}get stem(){return"string"==typeof this.path?rY.basename(this.path,this.extname):void 0}set stem(e){hY(e,"stem"),uY(e,"stem"),this.path=rY.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e)}message(e,t,n){const r=new nY(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=null,r}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}}function uY(e,t){if(e&&e.includes(rY.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+rY.sep+"`")}function hY(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function pY(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function dY(e){if(e)throw e}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var fY=Object.prototype.hasOwnProperty,mY=Object.prototype.toString,gY=Object.defineProperty,vY=Object.getOwnPropertyDescriptor,yY=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===mY.call(e)},xY=function(e){if(!e||"[object Object]"!==mY.call(e))return!1;var t,n=fY.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&fY.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||fY.call(e,t)},EY=function(e,t){gY&&"__proto__"===t.name?gY(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},bY=function(e,t){if("__proto__"===t){if(!fY.call(e,t))return;if(vY)return vY(e,t).value}return e[t]},CY=function e(){var t,n,r,i,a,o,s=arguments[0],l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),(null==s||"object"!=typeof s&&"function"!=typeof s)&&(s={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)r=bY(s,n),s!==(i=bY(t,n))&&(u&&i&&(xY(i)||(a=yY(i)))?(a?(a=!1,o=r&&yY(r)?r:[]):o=r&&xY(r)?r:{},EY(s,{name:n,newValue:e(u,o,i)})):void 0!==i&&EY(s,{name:n,newValue:i}));return s};function TY(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function wY(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function i(a,...o){const s=e[++n];let l=-1;if(a)r(a);else{for(;++l<t.length;)null!==o[l]&&void 0!==o[l]||(o[l]=t[l]);t=o,s?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let s;r&&t.push(i);try{s=e.apply(this,t)}catch(a){const t=a;if(r&&n)throw t;return i(t)}r||(s instanceof Promise?s.then(o,i):s instanceof Error?i(s):o(s))}function i(e,...r){n||(n=!0,t(e,...r))}function o(e){i(null,e)}}(s,i)(...o):r(null,...o)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const SY=function e(){const t=wY(),n=[];let r,i={},a=-1;return o.data=function(e,t){if("string"==typeof e)return 2===arguments.length?(IY("data",r),i[e]=t,o):kY.call(i,e)&&i[e]||null;if(e)return IY("data",r),i=e,o;return i},o.Parser=void 0,o.Compiler=void 0,o.freeze=function(){if(r)return o;for(;++a<n.length;){const[e,...r]=n[a];if(!1===r[0])continue;!0===r[0]&&(r[0]=void 0);const i=e.call(o,...r);"function"==typeof i&&t.use(i)}return r=!0,a=Number.POSITIVE_INFINITY,o},o.attachers=n,o.use=function(e,...t){let a;if(IY("use",r),null==e);else if("function"==typeof e)u(e,...t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?c(e):l(e)}a&&(i.settings=Object.assign(i.settings||{},a));return o;function s(e){if("function"==typeof e)u(e);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;u(t,...n)}else l(e)}}function l(e){c(e.plugins),e.settings&&(a=Object.assign(a||{},e.settings))}function c(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function u(e,t){let r,i=-1;for(;++i<n.length;)if(n[i][0]===e){r=n[i];break}r?(TY(r[1])&&TY(t)&&(t=CY(!0,r[1],t)),r[1]=t):n.push([...arguments])}},o.parse=function(e){o.freeze();const t=FY(e),n=o.Parser;if(AY("parse",n),_Y(n,"parse"))return new n(String(t),t).parse();return n(String(t),t)},o.stringify=function(e,t){o.freeze();const n=FY(t),r=o.Compiler;if(OY("stringify",r),MY(e),_Y(r,"compile"))return new r(e,n).compile();return r(e,n)},o.run=function(e,n,r){MY(e),o.freeze(),r||"function"!=typeof n||(r=n,n=void 0);if(!r)return new Promise(i);function i(i,a){function o(t,n,o){n=n||e,t?a(t):i?i(n):r(null,n,o)}t.run(e,FY(n),o)}i(null,r)},o.runSync=function(e,t){let n,r;return o.run(e,t,i),NY("runSync","run",r),n;function i(e,t){dY(e),n=t,r=!0}},o.process=function(e,t){if(o.freeze(),AY("process",o.Parser),OY("process",o.Compiler),!t)return new Promise(n);function n(n,r){const i=FY(e);function a(e,i){e||!i?r(e):n?n(i):t(null,i)}o.run(o.parse(i),i,((e,t,n)=>{if(!e&&t&&n){const r=o.stringify(t,n);null==r||(!function(e){return"string"==typeof e||function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)}(r)?n.result=r:n.value=r),a(e,n)}else a(e)}))}n(null,t)},o.processSync=function(e){let t;o.freeze(),AY("processSync",o.Parser),OY("processSync",o.Compiler);const n=FY(e);return o.process(n,r),NY("processSync","process",t),n;function r(e){t=!0,dY(e)}},o;function o(){const t=e();let r=-1;for(;++r<n.length;)t.use(...n[r]);return t.data(CY(!0,{},i)),t}}().freeze(),kY={}.hasOwnProperty;function _Y(e,t){return"function"==typeof e&&e.prototype&&(function(e){let t;for(t in e)if(kY.call(e,t))return!0;return!1}(e.prototype)||t in e.prototype)}function AY(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `Parser`")}function OY(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `Compiler`")}function IY(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function MY(e){if(!TY(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function NY(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function FY(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new cY(e)}function LY(e,t){return e&&"object"==typeof e&&(e.value||(t?e.alt:"")||"children"in e&&PY(e.children,t)||Array.isArray(e)&&PY(e,t))||""}function PY(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=LY(e[r],t);return n.join("")}function RY(e,t,n,r){const i=e.length;let a,o=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),[].splice.apply(e,a);else for(n&&[].splice.apply(e,[t,n]);o<r.length;)a=r.slice(o,o+1e4),a.unshift(t,0),[].splice.apply(e,a),o+=1e4,t+=1e4}function DY(e,t){return e.length>0?(RY(e,e.length,0,t),e):t}const BY={}.hasOwnProperty;function zY(e,t){let n;for(n in t){const r=(BY.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;for(a in i){BY.call(r,a)||(r[a]=[]);const e=i[a];HY(r[a],Array.isArray(e)?e:e?[e]:[])}}}function HY(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);RY(e,0,0,r)}const jY=JY(/[A-Za-z]/),GY=JY(/\d/),$Y=JY(/[\dA-Fa-f]/),YY=JY(/[\dA-Za-z]/),UY=JY(/[!-/:-@[-`{-~]/),VY=JY(/[#-'*+\--9=?A-Z^-~]/);function WY(e){return null!==e&&(e<32||127===e)}function XY(e){return null!==e&&(e<0||32===e)}function qY(e){return null!==e&&e<-2}function KY(e){return-2===e||-1===e||32===e}const QY=JY(/\s/),ZY=JY(/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/);function JY(e){return function(t){return null!==t&&e.test(String.fromCharCode(t))}}function eU(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return function(r){if(KY(r))return e.enter(n),o(r);return t(r)};function o(r){return KY(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}}const tU={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),eU(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):qY(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const nU={tokenize:function(e){const t=this,n=[];let r,i,a,o=0;return s;function s(r){if(o<n.length){const i=n[o];return t.containerState=i[1],e.attempt(i[0].continuation,l,c)(r)}return c(r)}function l(e){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let i,a=n;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){i=t.events[a][1].end;break}v(o);let s=n;for(;s<t.events.length;)t.events[s][1].end=Object.assign({},i),s++;return RY(t.events,a+1,0,t.events.slice(n)),t.events.length=s,c(e)}return s(e)}function c(i){if(o===n.length){if(!r)return p(i);if(r.currentConstruct&&r.currentConstruct.concrete)return f(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(rU,u,h)(i)}function u(e){return r&&y(),v(o),p(e)}function h(e){return t.parser.lazy[t.now().line]=o!==n.length,a=t.now().offset,f(e)}function p(n){return t.containerState={},e.attempt(rU,d,f)(n)}function d(e){return o++,n.push([t.currentConstruct,t.containerState]),p(e)}function f(n){return null===n?(r&&y(),v(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:r}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),v(0),void e.consume(n)):qY(n)?(e.consume(n),g(e.exit("chunkFlow")),o=0,t.interrupt=void 0,s):(e.consume(n),m)}function g(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<a&&(!r.events[e][1].end||r.events[e][1].end.offset>a))return;const n=t.events.length;let i,s,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){s=t.events[l][1].end;break}i=!0}for(v(o),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},s),e++;RY(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function v(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},rU={tokenize:function(e,t,n){return eU(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function iU(e){return null===e||XY(e)||QY(e)?1:ZY(e)?2:void 0}function aU(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const oU={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=iU(r);let a;return function(t){return e.enter("attentionSequence"),a=t,o(t)};function o(s){if(s===a)return e.consume(s),o;const l=e.exit("attentionSequence"),c=iU(s),u=!c||2===c&&i||n.includes(s),h=!i||2===i&&c||n.includes(r);return l._open=Boolean(42===a?u:u&&(i||!h)),l._close=Boolean(42===a?h:h&&(c||!u)),t(s)}},resolveAll:function(e,t){let n,r,i,a,o,s,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const h=Object.assign({},e[n][1].end),p=Object.assign({},e[u][1].start);sU(h,-s),sU(p,s),a={type:s>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},e[n][1].end)},o={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:p},i={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},e[n][1].end=Object.assign({},a.start),e[u][1].start=Object.assign({},o.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=DY(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=DY(l,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",i,t]]),l=DY(l,aU(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=DY(l,[["exit",i,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=DY(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,RY(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function sU(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const lU={name:"autolink",tokenize:function(e,t,n){let r=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return jY(t)?(e.consume(t),a):VY(t)?l(t):n(t)}function a(e){return 43===e||45===e||46===e||YY(e)?o(e):l(e)}function o(t){return 58===t?(e.consume(t),s):(43===t||45===t||46===t||YY(t))&&r++<32?(e.consume(t),o):l(t)}function s(t){return 62===t?(e.exit("autolinkProtocol"),p(t)):null===t||32===t||60===t||WY(t)?n(t):(e.consume(t),s)}function l(t){return 64===t?(e.consume(t),r=0,c):VY(t)?(e.consume(t),l):n(t)}function c(e){return YY(e)?u(e):n(e)}function u(t){return 46===t?(e.consume(t),r=0,c):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",p(t)):h(t)}function h(t){return(45===t||YY(t))&&r++<63?(e.consume(t),45===t?h:u):n(t)}function p(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}};const cU={tokenize:function(e,t,n){return eU(e,(function(e){return null===e||qY(e)?t(e):n(e)}),"linePrefix")},partial:!0};const uU={name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return KY(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return eU(e,e.attempt(uU,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},exit:function(e){e.exit("blockQuote")}};const hU={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return UY(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const pU=document.createElement("i");function dU(e){const t="&"+e+";";pU.innerHTML=t;const n=pU.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const fU={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,a,o=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,a=YY,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=$Y,c):(e.enter("characterReferenceValue"),i=7,a=GY,c(t))}function c(s){let l;return 59===s&&o?(l=e.exit("characterReferenceValue"),a!==YY||dU(r.sliceSerialize(l))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)):a(s)&&o++<i?(e.consume(s),c):n(s)}}};const mU={name:"codeFenced",tokenize:function(e,t,n){const r=this,i={tokenize:function(e,t,n){let r=0;return eU(e,i,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function i(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),a(t)}function a(t){return t===l?(e.consume(t),r++,a):r<c?n(t):(e.exit("codeFencedFenceSequence"),eU(e,o,"whitespace")(t))}function o(r){return null===r||qY(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},a={tokenize:function(e,t,n){const r=this;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a}function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},o=this.events[this.events.length-1],s=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0;let l,c=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=t,u(t)};function u(t){return t===l?(e.consume(t),c++,u):(e.exit("codeFencedFenceSequence"),c<3?n(t):eU(e,h,"whitespace")(t))}function h(t){return null===t||qY(t)?m(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||XY(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),eU(e,d,"whitespace")(t)):96===t&&t===l?n(t):(e.consume(t),p)}function d(t){return null===t||qY(t)?m(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||qY(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(t)):96===t&&t===l?n(t):(e.consume(t),f)}function m(n){return e.exit("codeFencedFence"),r.interrupt?t(n):g(n)}function g(t){return null===t?y(t):qY(t)?e.attempt(a,e.attempt(i,y,s?eU(e,g,"linePrefix",s+1):g),y)(t):(e.enter("codeFlowValue"),v(t))}function v(t){return null===t||qY(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),v)}function y(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const gU={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),eU(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?a(e):n(e)}function a(t){return null===t?s(t):qY(t)?e.attempt(vU,a,s)(t):(e.enter("codeFlowValue"),o(t))}function o(t){return null===t||qY(t)?(e.exit("codeFlowValue"),a(t)):(e.consume(t),o)}function s(n){return e.exit("codeIndented"),t(n)}}},vU={tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):qY(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):eU(e,a,"linePrefix",5)(t)}function a(e){const a=r.events[r.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):qY(e)?i(e):n(e)}},partial:!0};const yU={name:"codeText",tokenize:function(e,t,n){let r,i,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),o(t)};function o(t){return 96===t?(e.consume(t),a++,o):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):96===t?(i=e.enter("codeTextSequence"),r=0,c(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):qY(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||qY(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}},resolve:function(e){let t,n,r=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};function xU(e){const t={};let n,r,i,a,o,s,l,c=-1;for(;++c<e.length;){for(;c in t;)c=t[c];if(n=e[c],c&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[c-1][1].type&&(s=n[1]._tokenizer.events,i=0,i<s.length&&"lineEndingBlank"===s[i][1].type&&(i+=2),i<s.length&&"content"===s[i][1].type))for(;++i<s.length&&"content"!==s[i][1].type;)"chunkText"===s[i][1].type&&(s[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,EU(e,c)),c=t[c],l=!0);else if(n[1]._container){for(i=c,r=void 0;i--&&(a=e[i],"lineEnding"===a[1].type||"lineEndingBlank"===a[1].type);)"enter"===a[0]&&(r&&(e[r][1].type="lineEndingBlank"),a[1].type="lineEnding",r=i);r&&(n[1].end=Object.assign({},e[r][1].start),o=e.slice(r,c),o.unshift(n),RY(e,r,c-r+1,o))}}return!l}function EU(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const a=[],o=n._tokenizer||r.parser[n.contentType](n.start),s=o.events,l=[],c={};let u,h,p=-1,d=n,f=0,m=0;const g=[m];for(;d;){for(;e[++i][1]!==d;);a.push(i),d._tokenizer||(u=r.sliceStream(d),d.next||u.push(null),h&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=n;++p<s.length;)"exit"===s[p][0]&&"enter"===s[p-1][0]&&s[p][1].type===s[p-1][1].type&&s[p][1].start.line!==s[p][1].end.line&&(m=p+1,g.push(m),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):g.pop(),p=g.length;p--;){const t=s.slice(g[p],g[p+1]),n=a.pop();l.unshift([n,n+t.length-1]),RY(e,n,2,t)}for(p=-1;++p<l.length;)c[f+l[p][0]]=f+l[p][1],f+=l[p][1]-l[p][0]-1;return c}const bU={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):qY(t)?e.check(CU,a,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return xU(e),e}},CU={tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),eU(e,i,"linePrefix")};function i(i){if(null===i||qY(i))return n(i);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}},partial:!0};function TU(e,t,n,r,i,a,o,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(a),e.consume(t),e.exit(a),h;if(null===t||41===t||WY(t))return n(t);return e.enter(r),e.enter(o),e.enter(s),e.enter("chunkString",{contentType:"string"}),f(t)};function h(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return 62===t?(e.exit("chunkString"),e.exit(s),h(t)):null===t||60===t||qY(t)?n(t):(e.consume(t),92===t?d:p)}function d(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function f(i){return 40===i?++u>c?n(i):(e.consume(i),f):41===i?u--?(e.consume(i),f):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):null===i||XY(i)?u?n(i):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):WY(i)?n(i):(e.consume(i),92===i?m:f)}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function wU(e,t,n,r,i,a){const o=this;let s,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(a),c};function c(h){return null===h||91===h||93===h&&!s||94===h&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs||l>999?n(h):93===h?(e.exit(a),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):qY(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(t){return null===t||91===t||93===t||qY(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),s=s||!KY(t),92===t?h:u)}function h(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function SU(e,t,n,r,i,a){let o;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),o=40===t?41:t,s};function s(n){return n===o?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(a),l(n))}function l(t){return t===o?(e.exit(a),s(o)):null===t?n(t):qY(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),eU(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===o||null===t||qY(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===o||92===t?(e.consume(t),c):c(t)}}function kU(e,t){let n;return function r(i){if(qY(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(KY(i))return eU(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}function _U(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const AU={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),wU.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function a(t){return i=_U(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),kU(e,TU(e,e.attempt(OU,eU(e,o,"whitespace"),eU(e,o,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function o(a){return null===a||qY(a)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(a)):n(a)}}},OU={tokenize:function(e,t,n){return function(t){return XY(t)?kU(e,r)(t):n(t)};function r(t){return 34===t||39===t||40===t?SU(e,eU(e,i,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function i(e){return null===e||qY(e)?t(e):n(e)}},partial:!0};const IU={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return qY(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}};const MU={name:"headingAtx",tokenize:function(e,t,n){const r=this;let i=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),a(t)};function a(s){return 35===s&&i++<6?(e.consume(s),a):null===s||XY(s)?(e.exit("atxHeadingSequence"),r.interrupt?t(s):o(s)):n(s)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),s(n)):null===n||qY(n)?(e.exit("atxHeading"),t(n)):KY(n)?eU(e,o,"whitespace")(n):(e.enter("atxHeadingText"),l(n))}function s(t){return 35===t?(e.consume(t),s):(e.exit("atxHeadingSequence"),o(t))}function l(t){return null===t||35===t||XY(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),l)}},resolve:function(e,t){let n,r,i=e.length-2,a=3;"whitespace"===e[a][1].type&&(a+=2);i-2>a&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(a===i-1||i-4>a&&"whitespace"===e[i-2][1].type)&&(i-=a+1===i?2:4);i>a&&(n={type:"atxHeadingText",start:e[a][1].start,end:e[i][1].end},r={type:"chunkText",start:e[a][1].start,end:e[i][1].end,contentType:"text"},RY(e,a,i-a+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};const NU=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],FU=["pre","script","style","textarea"],LU={name:"htmlFlow",tokenize:function(e,t,n){const r=this;let i,a,o,s,l;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c};function c(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),d):63===s?(e.consume(s),i=3,r.interrupt?t:L):jY(s)?(e.consume(s),o=String.fromCharCode(s),a=!0,f):n(s)}function u(a){return 45===a?(e.consume(a),i=2,h):91===a?(e.consume(a),i=5,o="CDATA[",s=0,p):jY(a)?(e.consume(a),i=4,r.interrupt?t:L):n(a)}function h(i){return 45===i?(e.consume(i),r.interrupt?t:L):n(i)}function p(i){return i===o.charCodeAt(s++)?(e.consume(i),s===o.length?r.interrupt?t:k:p):n(i)}function d(t){return jY(t)?(e.consume(t),o=String.fromCharCode(t),f):n(t)}function f(s){return null===s||47===s||62===s||XY(s)?47!==s&&a&&FU.includes(o.toLowerCase())?(i=1,r.interrupt?t(s):k(s)):NU.includes(o.toLowerCase())?(i=6,47===s?(e.consume(s),m):r.interrupt?t(s):k(s)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):a?v(s):g(s)):45===s||YY(s)?(e.consume(s),o+=String.fromCharCode(s),f):n(s)}function m(i){return 62===i?(e.consume(i),r.interrupt?t:k):n(i)}function g(t){return KY(t)?(e.consume(t),g):w(t)}function v(t){return 47===t?(e.consume(t),w):58===t||95===t||jY(t)?(e.consume(t),y):KY(t)?(e.consume(t),v):w(t)}function y(t){return 45===t||46===t||58===t||95===t||YY(t)?(e.consume(t),y):x(t)}function x(t){return 61===t?(e.consume(t),E):KY(t)?(e.consume(t),x):v(t)}function E(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,b):KY(t)?(e.consume(t),E):(l=null,C(t))}function b(t){return null===t||qY(t)?n(t):t===l?(e.consume(t),T):(e.consume(t),b)}function C(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||XY(t)?x(t):(e.consume(t),C)}function T(e){return 47===e||62===e||KY(e)?v(e):n(e)}function w(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return KY(t)?(e.consume(t),S):null===t||qY(t)?k(t):n(t)}function k(t){return 45===t&&2===i?(e.consume(t),I):60===t&&1===i?(e.consume(t),M):62===t&&4===i?(e.consume(t),P):63===t&&3===i?(e.consume(t),L):93===t&&5===i?(e.consume(t),F):!qY(t)||6!==i&&7!==i?null===t||qY(t)?_(t):(e.consume(t),k):e.check(PU,P,_)(t)}function _(t){return e.exit("htmlFlowData"),A(t)}function A(t){return null===t?R(t):qY(t)?e.attempt({tokenize:O,partial:!0},A,R)(t):(e.enter("htmlFlowData"),k(t))}function O(e,t,n){return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}function I(t){return 45===t?(e.consume(t),L):k(t)}function M(t){return 47===t?(e.consume(t),o="",N):k(t)}function N(t){return 62===t&&FU.includes(o.toLowerCase())?(e.consume(t),P):jY(t)&&o.length<8?(e.consume(t),o+=String.fromCharCode(t),N):k(t)}function F(t){return 93===t?(e.consume(t),L):k(t)}function L(t){return 62===t?(e.consume(t),P):45===t&&2===i?(e.consume(t),L):k(t)}function P(t){return null===t||qY(t)?(e.exit("htmlFlowData"),R(t)):(e.consume(t),P)}function R(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},PU={tokenize:function(e,t,n){return function(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(cU,t,n)}},partial:!0};const RU={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,a,o,s;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l};function l(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),C):63===t?(e.consume(t),E):jY(t)?(e.consume(t),S):n(t)}function c(t){return 45===t?(e.consume(t),u):91===t?(e.consume(t),a="CDATA[",o=0,m):jY(t)?(e.consume(t),x):n(t)}function u(t){return 45===t?(e.consume(t),h):n(t)}function h(t){return null===t||62===t?n(t):45===t?(e.consume(t),p):d(t)}function p(e){return null===e||62===e?n(e):d(e)}function d(t){return null===t?n(t):45===t?(e.consume(t),f):qY(t)?(s=d,F(t)):(e.consume(t),d)}function f(t){return 45===t?(e.consume(t),P):d(t)}function m(t){return t===a.charCodeAt(o++)?(e.consume(t),o===a.length?g:m):n(t)}function g(t){return null===t?n(t):93===t?(e.consume(t),v):qY(t)?(s=g,F(t)):(e.consume(t),g)}function v(t){return 93===t?(e.consume(t),y):g(t)}function y(t){return 62===t?P(t):93===t?(e.consume(t),y):g(t)}function x(t){return null===t||62===t?P(t):qY(t)?(s=x,F(t)):(e.consume(t),x)}function E(t){return null===t?n(t):63===t?(e.consume(t),b):qY(t)?(s=E,F(t)):(e.consume(t),E)}function b(e){return 62===e?P(e):E(e)}function C(t){return jY(t)?(e.consume(t),T):n(t)}function T(t){return 45===t||YY(t)?(e.consume(t),T):w(t)}function w(t){return qY(t)?(s=w,F(t)):KY(t)?(e.consume(t),w):P(t)}function S(t){return 45===t||YY(t)?(e.consume(t),S):47===t||62===t||XY(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),P):58===t||95===t||jY(t)?(e.consume(t),_):qY(t)?(s=k,F(t)):KY(t)?(e.consume(t),k):P(t)}function _(t){return 45===t||46===t||58===t||95===t||YY(t)?(e.consume(t),_):A(t)}function A(t){return 61===t?(e.consume(t),O):qY(t)?(s=A,F(t)):KY(t)?(e.consume(t),A):k(t)}function O(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,I):qY(t)?(s=O,F(t)):KY(t)?(e.consume(t),O):(e.consume(t),i=void 0,N)}function I(t){return t===i?(e.consume(t),M):null===t?n(t):qY(t)?(s=I,F(t)):(e.consume(t),I)}function M(e){return 62===e||47===e||XY(e)?k(e):n(e)}function N(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||XY(t)?k(t):(e.consume(t),N)}function F(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),eU(e,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function L(t){return e.enter("htmlTextData"),s(t)}function P(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}}};const DU={name:"labelEnd",tokenize:function(e,t,n){const r=this;let i,a,o=r.events.length;for(;o--;)if(("labelImage"===r.events[o][1].type||"labelLink"===r.events[o][1].type)&&!r.events[o][1]._balanced){i=r.events[o][1];break}return function(t){if(!i)return n(t);return i._inactive?l(t):(a=r.parser.defined.includes(_U(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s)};function s(n){return 40===n?e.attempt(BU,t,a?t:l)(n):91===n?e.attempt(zU,t,a?e.attempt(HU,t,l):l)(n):a?t(n):l(n)}function l(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,i,a,o=e.length,s=0;for(;o--;)if(n=e[o][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[o][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[o][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=o,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=o);const l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[i-2][1].start)};return a=[["enter",l,t],["enter",c,t]],a=DY(a,e.slice(r+1,r+s+3)),a=DY(a,[["enter",u,t]]),a=DY(a,aU(t.parser.constructs.insideSpan.null,e.slice(r+s+4,i-3),t)),a=DY(a,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),a=DY(a,e.slice(i+1)),a=DY(a,[["exit",l,t]]),RY(e,r,e.length,a),e},resolveAll:function(e){let t,n=-1;for(;++n<e.length;)t=e[n][1],"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},BU={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),kU(e,r)};function r(t){return 41===t?o(t):TU(e,i,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return XY(t)?kU(e,a)(t):o(t)}function a(t){return 34===t||39===t||40===t?SU(e,kU(e,o),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):o(t)}function o(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},zU={tokenize:function(e,t,n){const r=this;return function(t){return wU.call(r,e,i,n,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(_U(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}}},HU={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const jU={name:"labelStartImage",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:DU.resolveAll};const GU={name:"labelStartLink",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:DU.resolveAll};const $U={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),eU(e,t,"linePrefix")}}};const YU={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),r=t,a(t)};function a(s){return s===r?(e.enter("thematicBreakSequence"),o(s)):KY(s)?eU(e,a,"whitespace")(s):i<3||null!==s&&!qY(s)?n(s):(e.exit("thematicBreak"),t(s))}function o(t){return t===r?(e.consume(t),i++,o):(e.exit("thematicBreakSequence"),a(t))}}};const UU={name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,o=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:GY(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(YU,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return GY(t)&&++o<10?(e.consume(t),s):(!r.interrupt||o<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(cU,r.interrupt?n:c,e.attempt(VU,h,u))}function c(e){return r.containerState.initialBlankLine=!0,a++,h(e)}function u(t){return KY(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),h):n(t)}function h(n){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(cU,i,a);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,eU(e,t,"listItemIndent",r.containerState.size+1)(n)}function a(n){return r.containerState.furtherBlankLines||!KY(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(WU,t,o)(n))}function o(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,eU(e,e.attempt(UU,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},VU={tokenize:function(e,t,n){const r=this;return eU(e,(function(e){const i=r.events[r.events.length-1];return!KY(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},WU={tokenize:function(e,t,n){const r=this;return eU(e,(function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};const XU={name:"setextUnderline",tokenize:function(e,t,n){const r=this;let i,a,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){a="paragraph"===r.events[o][1].type;break}return function(t){if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),i=t,s(t);return n(t)};function s(t){return t===i?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),eU(e,l,"lineSuffix")(t))}function l(r){return null===r||qY(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,i,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),i||"definition"!==e[a][1].type||(i=a);const o={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=o;return e.push(["exit",o,t]),e}};const qU={tokenize:function(e){const t=this,n=e.attempt(cU,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,eU(e,e.attempt(this.parser.constructs.flow,r,e.attempt(bU,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const KU={resolveAll:eV()},QU=JU("string"),ZU=JU("text");function JU(e){return{tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,a,o);return a;function a(e){return l(e)?i(e):o(e)}function o(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:eV("text"===e?tV:void 0)}}function eV(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function tV(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let a,o=i.length,s=-1,l=0;for(;o--;){const e=i[o];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)a=!0,l++;else if(-1!==e){o++;break}}if(l){const i={type:n===e.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+o,_bufferIndex:o?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}function nV(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},a=[];let o=[],s=[];const l={consume:function(e){qY(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,y()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=p(),c.events.push(["enter",n,c]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=p(),c.events.push(["exit",t,c]),t},attempt:g((function(e,t){v(e,t.from)})),check:g(m),interrupt:g(m,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if("string"==typeof a)o=a;else switch(a){case-5:o="\r";break;case-4:o="\n";break;case-3:o="\r\n";break;case-2:o=t?" ":"\t";break;case-1:if(!t&&i)continue;o=" ";break;default:o=String.fromCharCode(a)}i=-2===a,r.push(o)}return r.join("")}(h(e),t)},now:p,defineSkip:function(e){i[e.line]=e.column,y()},write:function(e){if(o=DY(o,e),d(),null!==o[o.length-1])return[];return v(t,0),c.events=aU(a,c.events,c),c.events}};let u=t.tokenize.call(c,l);return t.resolveAll&&a.push(t),c;function h(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;n===i?o=[e[n].slice(r,a)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),a>0&&o.push(e[i].slice(0,a)));return o}(o,e)}function p(){return Object.assign({},r)}function d(){let e;for(;r._index<o.length;){const t=o[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)f(t.charCodeAt(r._bufferIndex));else f(t)}}function f(e){u=u(e)}function m(e,t){t.restore()}function g(e,t){return function(n,i,a){let o,u,h,d;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function f(e){return o=e,u=0,0===e.length?a:m(e[u])}function m(e){return function(n){d=function(){const e=p(),t=c.previous,n=c.currentConstruct,i=c.events.length,a=Array.from(s);return{restore:o,from:i};function o(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=i,s=a,y()}}(),h=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return v();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,v)(n)}}function g(t){return e(h,d),i}function v(e){return d.restore(),++u<o.length?m(o[u]):a}}}function v(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&RY(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function y(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}const rV={42:UU,43:UU,45:UU,48:UU,49:UU,50:UU,51:UU,52:UU,53:UU,54:UU,55:UU,56:UU,57:UU,62:uU},iV={91:AU},aV={[-2]:gU,[-1]:gU,32:gU},oV={35:MU,42:YU,45:[XU,YU],60:LU,61:XU,95:YU,96:mU,126:mU},sV={38:fU,92:hU},lV={[-5]:$U,[-4]:$U,[-3]:$U,33:jU,38:fU,42:oU,60:[lU,RU],91:GU,92:[IU,hU],93:DU,95:oU,96:yU},cV={null:[oU,KU]};var uV=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",document:rV,contentInitial:iV,flowInitial:aV,flow:oV,string:sV,text:lV,insideSpan:cV,attentionMarkers:{null:[42,95]},disable:{null:[]}});function hV(e={}){const t={defined:[],lazy:{},constructs:function(e){const t={};let n=-1;for(;++n<e.length;)zY(t,e[n]);return t}([uV].concat(e.extensions||[])),content:n(tU),document:n(nU),flow:n(qU),string:n(QU),text:n(ZU)};return t;function n(e){return function(n){return nV(t,e,n)}}}const pV=/[\0\t\n\r]/g;function dV(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535==(65535&n)||65534==(65535&n)||n>1114111?"�":String.fromCharCode(n)}const fV=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function mV(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return dV(n.slice(t?2:1),t?16:10)}return dU(n)||e}const gV={}.hasOwnProperty,vV=function(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e={}){const t=yV({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(re),autolinkProtocol:A,autolinkEmail:A,atxHeading:l(J),blockQuote:l(X),characterEscape:A,characterReference:A,codeFenced:l(q),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(q,c),codeText:l(K,c),codeTextData:A,data:A,codeFlowValue:A,definition:l(Q),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l(Z),hardBreakEscape:l(ee),hardBreakTrailing:l(ee),htmlFlow:l(te,c),htmlFlowData:A,htmlText:l(te,c),htmlTextData:A,image:l(ne),label:c,link:l(re),listItem:l(ae),listItemValue:m,listOrdered:l(ie,f),listUnordered:l(ie),paragraph:l(oe),reference:G,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(J),strong:l(se),thematicBreak:l(ce)},exit:{atxHeading:h(),atxHeadingSequence:w,autolink:h(),autolinkEmail:W,autolinkProtocol:V,blockQuote:h(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:Y,characterReferenceMarkerNumeric:Y,characterReferenceValue:U,codeFenced:h(x),codeFencedFence:y,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:O,codeIndented:h(E),codeText:h(L),codeTextData:O,data:O,definition:h(),definitionDestinationString:T,definitionLabelString:b,definitionTitleString:C,emphasis:h(),hardBreakEscape:h(M),hardBreakTrailing:h(M),htmlFlow:h(N),htmlFlowData:O,htmlText:h(F),htmlTextData:O,image:h(R),label:B,labelText:D,lineEnding:I,link:h(P),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:$,resourceDestinationString:z,resourceTitleString:H,resource:j,setextHeading:h(_),setextHeadingLineSequence:k,setextHeadingText:S,strong:h(),thematicBreak:h()}},e.mdastExtensions||[]),n={};return r;function r(e){let n={type:"root",children:[]};const r=[],l=[],h={stack:[n],tokenStack:r,config:t,enter:u,exit:p,buffer:c,resume:d,setData:a,getData:o};let f=-1;for(;++f<e.length;)if("listOrdered"===e[f][1].type||"listUnordered"===e[f][1].type)if("enter"===e[f][0])l.push(f);else{f=i(e,l.pop(),f)}for(f=-1;++f<e.length;){const n=t[e[f][0]];gV.call(n,e[f][1].type)&&n[e[f][1].type].call(Object.assign({sliceSerialize:e[f][2].sliceSerialize},h),e[f][1])}if(r.length>0){const e=r[r.length-1];(e[1]||EV).call(h,void 0,e[0])}for(n.position={start:s(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:s(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},f=-1;++f<t.transforms.length;)n=t.transforms[f](n)||n;return n}function i(e,t,n){let r,i,a,o,s=t-1,l=-1,c=!1;for(;++s<=n;){const t=e[s];if("listUnordered"===t[1].type||"listOrdered"===t[1].type||"blockQuote"===t[1].type?("enter"===t[0]?l++:l--,o=void 0):"lineEndingBlank"===t[1].type?"enter"===t[0]&&(!r||o||l||a||(a=s),o=void 0):"linePrefix"===t[1].type||"listItemValue"===t[1].type||"listItemMarker"===t[1].type||"listItemPrefix"===t[1].type||"listItemPrefixWhitespace"===t[1].type||(o=void 0),!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let o=s;for(i=void 0;o--;){const t=e[o];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=o}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}a&&(!i||a<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",r,t[2]]),s++,n++}"listItemPrefix"===t[1].type&&(r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start)},e.splice(s,0,["enter",r,t[2]]),s++,n++,a=void 0,o=!0)}}return e[t][1]._spread=c,n}function a(e,t){n[e]=t}function o(e){return n[e]}function s(e){return{line:e.line,column:e.column,offset:e.offset}}function l(e,t){return n;function n(n){u.call(this,e(n),n),t&&t.call(this,n)}}function c(){this.stack.push({type:"fragment",children:[]})}function u(e,t,n){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:s(t.start)},e}function h(e){return t;function t(t){e&&e.call(this,t),p.call(this,t)}}function p(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+Z$({start:e.start,end:e.end})+"): it’s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||EV).call(this,e,r[0])}return n.position.end=s(e.end),n}function d(){return function(e,t){var{includeImageAlt:n=!0}=t||{};return LY(e,n)}(this.stack.pop())}function f(){a("expectingFirstListItemValue",!0)}function m(e){if(o("expectingFirstListItemValue")){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),a("expectingFirstListItemValue")}}function g(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function v(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function y(){o("flowCodeInside")||(this.buffer(),a("flowCodeInside",!0))}function x(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),a("flowCodeInside")}function E(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function b(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=_U(this.sliceSerialize(e)).toLowerCase()}function C(){const e=this.resume();this.stack[this.stack.length-1].title=e}function T(){const e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function S(){a("setextHeadingSlurpLineEnding",!0)}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function _(){a("setextHeadingSlurpLineEnding")}function A(e){const t=this.stack[this.stack.length-1];let n=t.children[t.children.length-1];n&&"text"===n.type||(n=le(),n.position={start:s(e.start)},t.children.push(n)),this.stack.push(n)}function O(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=s(e.end)}function I(e){const n=this.stack[this.stack.length-1];if(o("atHardBreak")){return n.children[n.children.length-1].position.end=s(e.end),void a("atHardBreak")}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(n.type)&&(A.call(this,e),O.call(this,e))}function M(){a("atHardBreak",!0)}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function F(){const e=this.resume();this.stack[this.stack.length-1].value=e}function L(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.stack[this.stack.length-1];o("inReference")?(e.type+="Reference",e.referenceType=o("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),a("referenceType")}function R(){const e=this.stack[this.stack.length-1];o("inReference")?(e.type+="Reference",e.referenceType=o("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),a("referenceType")}function D(e){const t=this.stack[this.stack.length-2],n=this.sliceSerialize(e);t.label=function(e){return e.replace(fV,mV)}(n),t.identifier=_U(n).toLowerCase()}function B(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];a("inReference",!0),"link"===n.type?n.children=e.children:n.alt=t}function z(){const e=this.resume();this.stack[this.stack.length-1].url=e}function H(){const e=this.resume();this.stack[this.stack.length-1].title=e}function j(){a("inReference")}function G(){a("referenceType","collapsed")}function $(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=_U(this.sliceSerialize(e)).toLowerCase(),a("referenceType","full")}function Y(e){a("characterReferenceType",e.type)}function U(e){const t=this.sliceSerialize(e),n=o("characterReferenceType");let r;n?(r=dV(t,"characterReferenceMarkerNumeric"===n?10:16),a("characterReferenceType")):r=dU(t);const i=this.stack.pop();i.value+=r,i.position.end=s(e.end)}function V(e){O.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){O.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function X(){return{type:"blockquote",children:[]}}function q(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Z(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:void 0,children:[]}}function ee(){return{type:"break"}}function te(){return{type:"html",value:""}}function ne(){return{type:"image",title:null,url:"",alt:null}}function re(){return{type:"link",title:null,url:"",children:[]}}function ie(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ae(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function oe(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function le(){return{type:"text",value:""}}function ce(){return{type:"thematicBreak"}}}(n)(function(e){for(;!xU(e););return e}(hV(n).document().write(function(){let e,t=1,n="",r=!0;return function(i,a,o){const s=[];let l,c,u,h,p;for(i=n+i.toString(a),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(pV.lastIndex=u,l=pV.exec(i),h=l&&void 0!==l.index?l.index:i.length,p=i.charCodeAt(h),!l){n=i.slice(u);break}if(10===p&&u===h&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),u<h&&(s.push(i.slice(u,h)),t+=h-u),p){case 0:s.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),s.push(-2);t++<c;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}u=h+1}return o&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))};function yV(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?yV(e,r):xV(e,r)}return e}function xV(e,t){let n;for(n in t)if(gV.call(t,n)){const r="canContainEols"===n||"transforms"===n,i=(gV.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),a=t[n];a&&(r?e[n]=[...i,...a]:Object.assign(i,a))}}function EV(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Z$({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Z$({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Z$({start:t.start,end:t.end})+") is still open")}function bV(e){Object.assign(this,{Parser:t=>{const n=this.data("settings");return vV(t,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var CV=function(e,t,n){var r={type:String(e)};return null!=n||"string"!=typeof t&&!Array.isArray(t)?Object.assign(r,t):n=t,Array.isArray(n)?r.children=n:null!=n&&(r.value=String(n)),r};const TV={}.hasOwnProperty;function wV(e,t){const n=t.data||{};return"value"in t&&!(TV.call(n,"hName")||TV.call(n,"hProperties")||TV.call(n,"hChildren"))?e.augment(t,CV("text",t.value)):e(t,"div",_V(e,t))}function SV(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return i=TV.call(e.handlers,r)?e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?kV:e.unknownHandler,("function"==typeof i?i:wV)(e,t,n)}function kV(e,t){return"children"in t?l(s({},t),{children:_V(e,t)}):t}function _V(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const a=SV(e,r[i],t);if(a){if(i&&"break"===r[i-1].type&&(Array.isArray(a)||"text"!==a.type||(a.value=a.value.replace(/^\s+/,"")),!Array.isArray(a)&&"element"===a.type)){const e=a.children[0];e&&"text"===e.type&&(e.value=e.value.replace(/^\s+/,""))}Array.isArray(a)?n.push(...a):n.push(a)}}}return n}const AV=function(e){if(null==e)return IV;if("string"==typeof e)return function(e){return OV(t);function t(t){return t&&t.type===e}}(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=AV(e[n]);return OV(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].call(this,...e))return!0;return!1}}(e):function(e){return OV(t);function t(t){let n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return OV(e);throw new Error("Expected function, string, or object as test")};function OV(e){return function(...t){return Boolean(e.call(this,...t))}}function IV(){return!0}const MV=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null);const i=AV(t),a=r?-1:1;!function e(o,s,l){const c="object"==typeof o&&null!==o?o:{};let u;"string"==typeof c.type&&(u="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0,Object.defineProperty(h,"name",{value:"node ("+c.type+(u?"<"+u+">":"")+")"}));return h;function h(){let c,u,h,p=[];if((!t||i(o,s,l[l.length-1]||null))&&(p=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)),false===p[0]))return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+a,h=l.concat(o);u>-1&&u<o.children.length;){if(c=e(o.children[u],u,h)(),false===c[0])return c;u="number"==typeof c[1]?c[1]:u+a}return p}}(e,null,[])()};const NV=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),MV(e,t,(function(e,t){const r=t[t.length-1];return n(e,r?r.children.indexOf(e):null,r)}),r)};var FV=PV("start"),LV=PV("end");function PV(e){return function(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}const RV=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null);var i=AV(t),a=r?-1:1;!function e(o,s,l){var c,u="object"==typeof o&&null!==o?o:{};"string"==typeof u.type&&(c="string"==typeof u.tagName?u.tagName:"string"==typeof u.name?u.name:void 0,Object.defineProperty(h,"name",{value:"node ("+u.type+(c?"<"+c+">":"")+")"}));return h;function h(){var c,u,h,p=[];if((!t||i(o,s,l[l.length-1]||null))&&false===(p=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)))[0])return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+a,h=l.concat(o);u>-1&&u<o.children.length;){if(false===(c=e(o.children[u],u,h)())[0])return c;u="number"==typeof c[1]?c[1]:u+a}return p}}(e,null,[])()};const DV={}.hasOwnProperty;function BV(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");var n,r,i;return r=function(e){const n=zV(e.identifier);n&&!DV.call(t,n)&&(t[n]=e)},"function"==typeof(n="definition")&&"function"!=typeof r&&(i=r,r=n,n=null),RV(e,n,(function(e,t){var n=t[t.length-1];return r(e,n?n.children.indexOf(e):null,n)}),i),function(e){const n=zV(e);return n&&DV.call(t,n)?t[n]:null}}function zV(e){return String(e||"").toUpperCase()}function HV(e,t){return e(t,"hr")}function jV(e,t){const n=[];let r=-1;for(t&&n.push(CV("text","\n"));++r<e.length;)r&&n.push(CV("text","\n")),n.push(e[r]);return t&&e.length>0&&n.push(CV("text","\n")),n}function GV(e,t){const n={},r=t.ordered?"ol":"ul",i=_V(e,t);let a=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++a<i.length;){const e=i[a];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,jV(i,!0))}function $V(e,t){const n=e.footnoteOrder,r=String(t.identifier),i=n.indexOf(r),a=String(-1===i?n.push(r):i+1);return e(t,"a",{href:"#fn"+a,className:["footnote-ref"],id:"fnref"+a,role:"doc-noteref"},[e(t.position,"sup",[CV("text",a)])])}var YV={};function UV(e,t,n){var r,i,a,o,s,l="";for("string"!=typeof t&&(n=t,t=UV.defaultChars),void 0===n&&(n=!0),s=function(e){var t,n,r=YV[e];if(r)return r;for(r=YV[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}(t),r=0,i=e.length;r<i;r++)if(a=e.charCodeAt(r),n&&37===a&&r+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3)))l+=e.slice(r,r+3),r+=2;else if(a<128)l+=s[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&r+1<i&&(o=e.charCodeAt(r+1))>=56320&&o<=57343){l+=encodeURIComponent(e[r]+e[r+1]),r++;continue}l+="%EF%BF%BD"}else l+=encodeURIComponent(e[r]);return l}UV.defaultChars=";/?:@&=+$,-_.!~*'()#",UV.componentChars="-_.!~*'()";var VV=UV;function WV(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return CV("text","!["+t.alt+r);const i=_V(e,t),a=i[0];a&&"text"===a.type?a.value="["+a.value:i.unshift(CV("text","["));const o=i[i.length-1];return o&&"text"===o.type?o.value+=r:i.push(CV("text",r)),i}function XV(e){const t=e.spread;return null==t?e.children.length>1:t}const qV={blockquote:function(e,t){return e(t,"blockquote",jV(_V(e,t),!0))},break:function(e,t){return[e(t,"br"),CV("text","\n")]},code:function(e,t){const n=t.value?t.value+"\n":"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const a=e(t,"code",i,[CV("text",n)]);return t.meta&&(a.data={meta:t.meta}),e(t.position,"pre",[a])},delete:function(e,t){return e(t,"del",_V(e,t))},emphasis:function(e,t){return e(t,"em",_V(e,t))},footnoteReference:$V,footnote:function(e,t){const n=e.footnoteById,r=e.footnoteOrder;let i=1;for(;i in n;)i++;const a=String(i);return r.push(a),n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},$V(e,{type:"footnoteReference",identifier:a,position:t.position})},heading:function(e,t){return e(t,"h"+t.depth,_V(e,t))},html:function(e,t){return e.dangerous?e.augment(t,CV("raw",t.value)):null},imageReference:function(e,t){const n=e.definition(t.identifier);if(!n)return WV(e,t);const r={src:VV(n.url||""),alt:t.alt};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"img",r)},image:function(e,t){const n={src:VV(t.url),alt:t.alt};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"img",n)},inlineCode:function(e,t){return e(t,"code",[CV("text",t.value.replace(/\r?\n|\r/g," "))])},linkReference:function(e,t){const n=e.definition(t.identifier);if(!n)return WV(e,t);const r={href:VV(n.url||"")};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"a",r,_V(e,t))},link:function(e,t){const n={href:VV(t.url)};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"a",n,_V(e,t))},listItem:function(e,t,n){const r=_V(e,t),i=n?function(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=XV(n[r]);return Boolean(t)}(n):XV(t),a={},o=[];if("boolean"==typeof t.checked){let n;r[0]&&"element"===r[0].type&&"p"===r[0].tagName?n=r[0]:(n=e(null,"p",[]),r.unshift(n)),n.children.length>0&&n.children.unshift(CV("text"," ")),n.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&o.push(CV("text","\n")),"element"!==e.type||"p"!==e.tagName||i?o.push(e):o.push(...e.children)}const l=r[r.length-1];return!l||!i&&"tagName"in l&&"p"===l.tagName||o.push(CV("text","\n")),e(t,"li",a,o)},list:GV,paragraph:function(e,t){return e(t,"p",_V(e,t))},root:function(e,t){return e.augment(t,CV("root",jV(_V(e,t))))},strong:function(e,t){return e(t,"strong",_V(e,t))},table:function(e,t){const n=t.children;let r=-1;const i=t.align||[],a=[];for(;++r<n.length;){const o=n[r].children,s=0===r?"th":"td";let l=t.align?i.length:o.length;const c=[];for(;l--;){const t=o[l];c[l]=e(t,s,{align:i[l]},t?_V(e,t):[])}a[r]=e(n[r],"tr",jV(c,!0))}return e(t,"table",jV([e(a[0].position,"thead",jV([a[0]],!0))].concat(a[1]?e({start:FV(a[1]),end:LV(a[a.length-1])},"tbody",jV(a.slice(1),!0)):[]),!0))},text:function(e,t){return e.augment(t,CV("text",String(t.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))},thematicBreak:HV,toml:KV,yaml:KV,definition:KV,footnoteDefinition:KV};function KV(){return null}const QV={}.hasOwnProperty;function ZV(e,t){const n=function(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.definition=BV(e),o.footnoteById=i,o.footnoteOrder=[],o.augment=a,o.handlers=s(s({},qV),n.handlers),o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,NV(e,"footnoteDefinition",(e=>{const t=String(e.identifier).toUpperCase();QV.call(i,t)||(i[t]=e)})),o;function a(e,t){if(e&&"data"in e&&e.data){const n=e.data;n.hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=s(s({},t.properties),n.hProperties)),"children"in t&&t.children&&n.hChildren&&(t.children=n.hChildren)}if(e){const r="type"in e?e:{position:e};(n=r)&&n.position&&n.position.start&&n.position.start.line&&n.position.start.column&&n.position.end&&n.position.end.line&&n.position.end.column&&(t.position={start:FV(r),end:LV(r)})}var n;return t}function o(e,t,n,r){return Array.isArray(n)&&(r=n,n={}),a(e,{type:"element",tagName:t,properties:n||{},children:r||[]})}}(e,t),r=SV(n,e,null),i=function(e){const t=e.footnoteById,n=e.footnoteOrder;let r=-1;const i=[];for(;++r<n.length;){const e=t[n[r].toUpperCase()];if(!e)continue;const a=String(r+1),o=[...e.children],s={type:"link",url:"#fnref"+a,data:{hProperties:{className:["footnote-back"],role:"doc-backlink"}},children:[{type:"text",value:"↩"}]},l=o[o.length-1];l&&"paragraph"===l.type?l.children.push(s):o.push(s),i.push({type:"listItem",data:{hProperties:{id:"fn"+a,role:"doc-endnote"}},children:o,position:e.position})}return 0===i.length?null:e(null,"section",{className:["footnotes"],role:"doc-endnotes"},jV([HV(e),GV(e,{type:"list",ordered:!0,children:i})],!0))}(n);return i&&r.children.push(CV("text","\n"),i),Array.isArray(r)?{type:"root",children:r}:r}const JV=function(e,t){return e&&"run"in e?function(e,t){return(n,r,i)=>{e.run(ZV(n,t),r,(e=>{i(e)}))}}(e,t):function(e){return t=>ZV(t,e)}(e)};class eW{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function tW(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new eW(n,r,t)}function nW(e){return e.toLowerCase()}eW.prototype.property={},eW.prototype.normal={},eW.prototype.space=null;class rW{constructor(e,t){this.property=e,this.attribute=t}}rW.prototype.space=null,rW.prototype.boolean=!1,rW.prototype.booleanish=!1,rW.prototype.overloadedBoolean=!1,rW.prototype.number=!1,rW.prototype.commaSeparated=!1,rW.prototype.spaceSeparated=!1,rW.prototype.commaOrSpaceSeparated=!1,rW.prototype.mustUseProperty=!1,rW.prototype.defined=!1;let iW=0;const aW=pW(),oW=pW(),sW=pW(),lW=pW(),cW=pW(),uW=pW(),hW=pW();function pW(){return 2**++iW}var dW=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",boolean:aW,booleanish:oW,overloadedBoolean:sW,number:lW,spaceSeparated:cW,commaSeparated:uW,commaOrSpaceSeparated:hW});const fW=Object.keys(dW);class mW extends rW{constructor(e,t,n,r){let i=-1;if(super(e,t),gW(this,"space",r),"number"==typeof n)for(;++i<fW.length;){const e=fW[i];gW(this,fW[i],(n&dW[e])===dW[e])}}}function gW(e,t,n){n&&(e[t]=n)}mW.prototype.defined=!0;const vW={}.hasOwnProperty;function yW(e){const t={},n={};let r;for(r in e.properties)if(vW.call(e.properties,r)){const i=e.properties[r],a=new mW(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[nW(r)]=r,n[nW(a.attribute)]=r}return new eW(t,n,e.space)}const xW=yW({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),EW=yW({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function bW(e,t){return t in e?e[t]:t}function CW(e,t){return bW(e,t.toLowerCase())}const TW=yW({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:CW,properties:{xmlns:null,xmlnsXLink:null}}),wW=yW({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:oW,ariaAutoComplete:null,ariaBusy:oW,ariaChecked:oW,ariaColCount:lW,ariaColIndex:lW,ariaColSpan:lW,ariaControls:cW,ariaCurrent:null,ariaDescribedBy:cW,ariaDetails:null,ariaDisabled:oW,ariaDropEffect:cW,ariaErrorMessage:null,ariaExpanded:oW,ariaFlowTo:cW,ariaGrabbed:oW,ariaHasPopup:null,ariaHidden:oW,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:cW,ariaLevel:lW,ariaLive:null,ariaModal:oW,ariaMultiLine:oW,ariaMultiSelectable:oW,ariaOrientation:null,ariaOwns:cW,ariaPlaceholder:null,ariaPosInSet:lW,ariaPressed:oW,ariaReadOnly:oW,ariaRelevant:null,ariaRequired:oW,ariaRoleDescription:cW,ariaRowCount:lW,ariaRowIndex:lW,ariaRowSpan:lW,ariaSelected:oW,ariaSetSize:lW,ariaSort:null,ariaValueMax:lW,ariaValueMin:lW,ariaValueNow:lW,ariaValueText:null,role:null}}),SW=yW({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:CW,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:uW,acceptCharset:cW,accessKey:cW,action:null,allow:null,allowFullScreen:aW,allowPaymentRequest:aW,allowUserMedia:aW,alt:null,as:null,async:aW,autoCapitalize:null,autoComplete:cW,autoFocus:aW,autoPlay:aW,capture:aW,charSet:null,checked:aW,cite:null,className:cW,cols:lW,colSpan:null,content:null,contentEditable:oW,controls:aW,controlsList:cW,coords:lW|uW,crossOrigin:null,data:null,dateTime:null,decoding:null,default:aW,defer:aW,dir:null,dirName:null,disabled:aW,download:sW,draggable:oW,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:aW,formTarget:null,headers:cW,height:lW,hidden:aW,high:lW,href:null,hrefLang:null,htmlFor:cW,httpEquiv:cW,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:aW,itemId:null,itemProp:cW,itemRef:cW,itemScope:aW,itemType:cW,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:aW,low:lW,manifest:null,max:null,maxLength:lW,media:null,method:null,min:null,minLength:lW,multiple:aW,muted:aW,name:null,nonce:null,noModule:aW,noValidate:aW,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:aW,optimum:lW,pattern:null,ping:cW,placeholder:null,playsInline:aW,poster:null,preload:null,readOnly:aW,referrerPolicy:null,rel:cW,required:aW,reversed:aW,rows:lW,rowSpan:lW,sandbox:cW,scope:null,scoped:aW,seamless:aW,selected:aW,shape:null,size:lW,sizes:null,slot:null,span:lW,spellCheck:oW,src:null,srcDoc:null,srcLang:null,srcSet:null,start:lW,step:null,style:null,tabIndex:lW,target:null,title:null,translate:null,type:null,typeMustMatch:aW,useMap:null,value:oW,width:lW,wrap:null,align:null,aLink:null,archive:cW,axis:null,background:null,bgColor:null,border:lW,borderColor:null,bottomMargin:lW,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:aW,declare:aW,event:null,face:null,frame:null,frameBorder:null,hSpace:lW,leftMargin:lW,link:null,longDesc:null,lowSrc:null,marginHeight:lW,marginWidth:lW,noResize:aW,noHref:aW,noShade:aW,noWrap:aW,object:null,profile:null,prompt:null,rev:null,rightMargin:lW,rules:null,scheme:null,scrolling:oW,standby:null,summary:null,text:null,topMargin:lW,valueType:null,version:null,vAlign:null,vLink:null,vSpace:lW,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:aW,disableRemotePlayback:aW,prefix:null,property:null,results:lW,security:null,unselectable:null}}),kW=yW({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:bW,properties:{about:hW,accentHeight:lW,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:lW,amplitude:lW,arabicForm:null,ascent:lW,attributeName:null,attributeType:null,azimuth:lW,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:lW,by:null,calcMode:null,capHeight:lW,className:cW,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:lW,diffuseConstant:lW,direction:null,display:null,dur:null,divisor:lW,dominantBaseline:null,download:aW,dx:null,dy:null,edgeMode:null,editable:null,elevation:lW,enableBackground:null,end:null,event:null,exponent:lW,externalResourcesRequired:null,fill:null,fillOpacity:lW,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:uW,g2:uW,glyphName:uW,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:lW,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:lW,horizOriginX:lW,horizOriginY:lW,id:null,ideographic:lW,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:lW,k:lW,k1:lW,k2:lW,k3:lW,k4:lW,kernelMatrix:hW,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:lW,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:lW,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:lW,overlineThickness:lW,paintOrder:null,panose1:null,path:null,pathLength:lW,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:cW,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:lW,pointsAtY:lW,pointsAtZ:lW,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:hW,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:hW,rev:hW,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:hW,requiredFeatures:hW,requiredFonts:hW,requiredFormats:hW,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:lW,specularExponent:lW,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:lW,strikethroughThickness:lW,string:null,stroke:null,strokeDashArray:hW,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:lW,strokeOpacity:lW,strokeWidth:null,style:null,surfaceScale:lW,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:hW,tabIndex:lW,tableValues:null,target:null,targetX:lW,targetY:lW,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:hW,to:null,transform:null,u1:null,u2:null,underlinePosition:lW,underlineThickness:lW,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:lW,values:null,vAlphabetic:lW,vMathematical:lW,vectorEffect:null,vHanging:lW,vIdeographic:lW,version:null,vertAdvY:lW,vertOriginX:lW,vertOriginY:lW,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:lW,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),_W=/^data[-\w.:]+$/i,AW=/-[a-z]/g,OW=/[A-Z]/g;function IW(e,t){const n=nW(t);let r=t,i=rW;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&_W.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(AW,NW);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!AW.test(e)){let n=e.replace(OW,MW);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=mW}return new i(r,t)}function MW(e){return"-"+e.toLowerCase()}function NW(e){return e.charAt(1).toUpperCase()}const FW={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},LW=tW([EW,xW,TW,wW,SW],"html"),PW=tW([EW,xW,TW,wW,kW],"svg");function RW(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{NV(t,"element",((t,n,r)=>{const i=r;let a;if(e.allowedElements?a=!e.allowedElements.includes(t.tagName):e.disallowedElements&&(a=e.disallowedElements.includes(t.tagName)),!a&&e.allowElement&&"number"==typeof n&&(a=!e.allowElement(t,n,i)),a&&"number"==typeof n)return e.unwrapDisallowed&&t.children?i.children.splice(n,1,...t.children):i.children.splice(n,1),n}))}}var DW={exports:{}},BW={},zW=60103,HW=60106,jW=60107,GW=60108,$W=60114,YW=60109,UW=60110,VW=60112,WW=60113,XW=60120,qW=60115,KW=60116,QW=60121,ZW=60122,JW=60117,eX=60129,tX=60131;if("function"==typeof Symbol&&Symbol.for){var nX=Symbol.for;zW=nX("react.element"),HW=nX("react.portal"),jW=nX("react.fragment"),GW=nX("react.strict_mode"),$W=nX("react.profiler"),YW=nX("react.provider"),UW=nX("react.context"),VW=nX("react.forward_ref"),WW=nX("react.suspense"),XW=nX("react.suspense_list"),qW=nX("react.memo"),KW=nX("react.lazy"),QW=nX("react.block"),ZW=nX("react.server.block"),JW=nX("react.fundamental"),eX=nX("react.debug_trace_mode"),tX=nX("react.legacy_hidden")}function rX(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case zW:switch(e=e.type){case jW:case $W:case GW:case WW:case XW:return e;default:switch(e=e&&e.$$typeof){case UW:case VW:case KW:case qW:case YW:return e;default:return t}}case HW:return t}}}var iX=YW,aX=zW,oX=VW,sX=jW,lX=KW,cX=qW,uX=HW,hX=$W,pX=GW,dX=WW;BW.ContextConsumer=UW,BW.ContextProvider=iX,BW.Element=aX,BW.ForwardRef=oX,BW.Fragment=sX,BW.Lazy=lX,BW.Memo=cX,BW.Portal=uX,BW.Profiler=hX,BW.StrictMode=pX,BW.Suspense=dX,BW.isAsyncMode=function(){return!1},BW.isConcurrentMode=function(){return!1},BW.isContextConsumer=function(e){return rX(e)===UW},BW.isContextProvider=function(e){return rX(e)===YW},BW.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===zW},BW.isForwardRef=function(e){return rX(e)===VW},BW.isFragment=function(e){return rX(e)===jW},BW.isLazy=function(e){return rX(e)===KW},BW.isMemo=function(e){return rX(e)===qW},BW.isPortal=function(e){return rX(e)===HW},BW.isProfiler=function(e){return rX(e)===$W},BW.isStrictMode=function(e){return rX(e)===GW},BW.isSuspense=function(e){return rX(e)===WW},BW.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===jW||e===$W||e===eX||e===GW||e===WW||e===XW||e===tX||"object"==typeof e&&null!==e&&(e.$$typeof===KW||e.$$typeof===qW||e.$$typeof===YW||e.$$typeof===UW||e.$$typeof===VW||e.$$typeof===JW||e.$$typeof===QW||e[0]===ZW)},BW.typeOf=rX,DW.exports=BW;var fX=DW.exports;function mX(e){var t=e&&"object"==typeof e&&"text"===e.type?e.value||"":e;return"string"==typeof t&&""===t.replace(/[ \t\n\f\r]/g,"")}function gX(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function vX(e){return e.join(" ").trim()}function yX(e){for(var t,n,r=[],i=String(e||""),a=i.indexOf(","),o=0;!t;)-1===a&&(a=i.length,t=!0),!(n=i.slice(o,a).trim())&&t||r.push(n),o=a+1,a=i.indexOf(",",o);return r}function xX(e,t){var n=t||{};return""===e[e.length-1]&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}var EX=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,bX=/\n/g,CX=/^\s*/,TX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,wX=/^:\s*/,SX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,kX=/^[;\s]*/,_X=/^\s+|\s+$/g;function AX(e){return e?e.replace(_X,""):""}var OX=function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(e){var t=e.match(bX);t&&(n+=t.length);var i=e.lastIndexOf("\n");r=~i?e.length-i:r+e.length}function a(){var e={line:n,column:r};return function(t){return t.position=new o(e),c(),t}}function o(e){this.start=e,this.end={line:n,column:r},this.source=t.source}function s(i){var a=new Error(t.source+":"+n+":"+r+": "+i);if(a.reason=i,a.filename=t.source,a.line=n,a.column=r,a.source=e,!t.silent)throw a}function l(t){var n=t.exec(e);if(n){var r=n[0];return i(r),e=e.slice(r.length),n}}function c(){l(CX)}function u(e){var t;for(e=e||[];t=h();)!1!==t&&e.push(t);return e}function h(){var t=a();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;""!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return s("End of comment missing");var o=e.slice(2,n-2);return r+=2,i(o),e=e.slice(n),r+=2,t({type:"comment",comment:o})}}function p(){var e=a(),t=l(TX);if(t){if(h(),!l(wX))return s("property missing ':'");var n=l(SX),r=e({type:"declaration",property:AX(t[0].replace(EX,"")),value:n?AX(n[0].replace(EX,"")):""});return l(kX),r}}return o.prototype.content=e,c(),function(){var e,t=[];for(u(t);e=p();)!1!==e&&(t.push(e),u(t));return t}()};var IX=function(e,t){var n,r=null;if(!e||"string"!=typeof e)return r;for(var i,a,o=OX(e),s="function"==typeof t,l=0,c=o.length;l<c;l++)i=(n=o[l]).property,a=n.value,s?t(i,a,n):a&&(r||(r={}),r[i]=a);return r};const MX={}.hasOwnProperty,NX=new Set(["table","thead","tbody","tfoot","tr"]);function FX(e,t){const n=[];let r,i=-1;for(;++i<t.children.length;)r=t.children[i],"element"===r.type?n.push(LX(e,r,i,t)):"text"===r.type?"element"===t.type&&NX.has(t.tagName)&&mX(r)||n.push(r.value):"raw"!==r.type||e.options.skipHtml||n.push(r.value);return n}function LX(e,t,n,r){const i=e.options,a=e.schema,o=t.tagName,s={};let l,c=a;if("html"===a.space&&"svg"===o&&(c=PW,e.schema=c),t.properties)for(l in t.properties)MX.call(t.properties,l)&&RX(s,l,t.properties[l],e);"ol"!==o&&"ul"!==o||e.listDepth++;const u=FX(e,t);"ol"!==o&&"ul"!==o||e.listDepth--,e.schema=a;const h=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},p=i.components&&MX.call(i.components,o)?i.components[o]:o,f="string"==typeof p||p===d.Fragment;if(!fX.isValidElementType(p))throw new TypeError(`Component for name \`${o}\` not defined or is not renderable`);if(s.key=[o,h.start.line,h.start.column,n].join("-"),"a"===o&&i.linkTarget&&(s.target="function"==typeof i.linkTarget?i.linkTarget(String(s.href||""),t.children,"string"==typeof s.title?s.title:null):i.linkTarget),"a"===o&&i.transformLinkUri&&(s.href=i.transformLinkUri(String(s.href||""),t.children,"string"==typeof s.title?s.title:null)),f||"code"!==o||"element"!==r.type||"pre"===r.tagName||(s.inline=!0),f||"h1"!==o&&"h2"!==o&&"h3"!==o&&"h4"!==o&&"h5"!==o&&"h6"!==o||(s.level=Number.parseInt(o.charAt(1),10)),"img"===o&&i.transformImageUri&&(s.src=i.transformImageUri(String(s.src||""),String(s.alt||""),"string"==typeof s.title?s.title:null)),!f&&"li"===o&&"element"===r.type){const e=function(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if("element"===n.type&&"input"===n.tagName)return n}return null}(t);s.checked=e&&e.properties?Boolean(e.properties.checked):null,s.index=PX(r,t),s.ordered="ol"===r.tagName}var m;return f||"ol"!==o&&"ul"!==o||(s.ordered="ol"===o,s.depth=e.listDepth),"td"!==o&&"th"!==o||(s.align&&(s.style||(s.style={}),s.style.textAlign=s.align,delete s.align),f||(s.isHeader="th"===o)),f||"tr"!==o||"element"!==r.type||(s.isHeader=Boolean("thead"===r.tagName)),i.sourcePos&&(s["data-sourcepos"]=[(m=h).start.line,":",m.start.column,"-",m.end.line,":",m.end.column].map((e=>String(e))).join("")),!f&&i.rawSourcePos&&(s.sourcePosition=t.position),!f&&i.includeElementIndex&&(s.index=PX(r,t),s.siblingCount=PX(r)),f||(s.node=t),u.length>0?d.createElement(p,s,u):d.createElement(p,s)}function PX(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)"element"===e.children[n].type&&r++;return r}function RX(e,t,n,r){const i=IW(r.schema,t);let a=n;null!=a&&a==a&&(Array.isArray(a)&&(a=i.commaSeparated?xX(a):vX(a)),"style"===i.property&&"string"==typeof a&&(a=function(e){const t={};try{IX(e,n)}catch(rh){}return t;function n(e,n){const r="-ms-"===e.slice(0,4)?`ms-${e.slice(4)}`:e;t[r.replace(/-([a-z])/g,DX)]=n}}(a)),i.space&&i.property?e[MX.call(FW,i.property)?FW[i.property]:i.property]=a:i.attribute&&(e[i.attribute]=a))}function DX(e,t){return t.toUpperCase()}const BX={}.hasOwnProperty,zX={renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function HX(e){for(const a in zX)if(BX.call(zX,a)&&BX.call(e,a)){const e=zX[a];console.warn(`[react-markdown] Warning: please ${e.to?`use \`${e.to}\` instead of`:"remove"} \`${a}\` (see <https://github.com/remarkjs/react-markdown/blob/main/changelog.md#${e.id}> for more info)`),delete zX[a]}const t=SY().use(bV).use(e.remarkPlugins||e.plugins||[]).use(JV,{allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(RW,e),n=new cY;"string"==typeof e.children?n.value=e.children:void 0!==e.children&&null!==e.children&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if("root"!==r.type)throw new TypeError("Expected a `root` node");let i=d.createElement(d.Fragment,{},FX({options:e,schema:LW,listDepth:0},r));return e.className&&(i=d.createElement("div",{className:e.className},i)),i}HX.defaultProps={transformLinkUri:function(e){const t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;const r=t.indexOf(":");if(-1===r)return t;let i=-1;for(;++i<Q$.length;){const e=Q$[i];if(r===e.length&&t.slice(0,e.length).toLowerCase()===e)return t}return i=t.indexOf("?"),-1!==i&&r>i?t:(i=t.indexOf("#"),-1!==i&&r>i?t:"javascript:void(0)")}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */},HX.propTypes={children:Z.string,className:Z.string,allowElement:Z.func,allowedElements:Z.arrayOf(Z.string),disallowedElements:Z.arrayOf(Z.string),unwrapDisallowed:Z.bool,remarkPlugins:Z.arrayOf(Z.oneOfType([Z.object,Z.func,Z.arrayOf(Z.oneOfType([Z.object,Z.func]))])),rehypePlugins:Z.arrayOf(Z.oneOfType([Z.object,Z.func,Z.arrayOf(Z.oneOfType([Z.object,Z.func]))])),sourcePos:Z.bool,rawSourcePos:Z.bool,skipHtml:Z.bool,includeElementIndex:Z.bool,transformLinkUri:Z.oneOfType([Z.func,Z.bool]),linkTarget:Z.oneOfType([Z.func,Z.string]),transformImageUri:Z.func,components:Z.object};var jX=[].splice;var GX={}.hasOwnProperty,$X=function(e,t,n,r){var i,a=e.length,o=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),jX.apply(e,i);else for(n&&jX.apply(e,[t,n]);o<r.length;)(i=r.slice(o,o+1e4)).unshift(t,0),jX.apply(e,i),o+=1e4,t+=1e4},YX=function(e){return null==e?[]:"length"in e?e:[e]};function UX(e,t){var n,r,i,a;for(n in t)for(a in r=GX.call(e,n)?e[n]:e[n]={},i=t[n])r[a]=VX(YX(i[a]),GX.call(r,a)?r[a]:[])}function VX(e,t){for(var n=-1,r=[];++n<e.length;)("after"===e[n].add?t:r).push(e[n]);return $X(t,0,0,r),t}var WX=function(e){for(var t={},n=-1;++n<e.length;)UX(t,e[n]);return t},XX={},qX=String.fromCharCode;var KX=function(e){return function(t){return e.test(qX(t))}},QX=KX(/[A-Za-z]/),ZX=KX(/[\dA-Za-z]/);var JX=function(e){return e<32||127===e};var eq=function(e){return e<-2},tq=KX(/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/),nq=KX(/\s/),rq=QX,iq=ZX,aq=JX,oq=eq,sq=tq,lq=nq,cq={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return 87===t||t-32==87?(e.consume(t),i):n(t)}function i(t){return 87===t||t-32==87?(e.consume(t),a):n(t)}function a(t){return 46===t?(e.consume(t),o):n(t)}function o(e){return null===e||oq(e)?n(e):t(e)}},partial:!0},uq={tokenize:function(e,t,n){var r,i;return a;function a(t){return 38===t?e.check(dq,s,o)(t):46===t||95===t?e.check(pq,s,o)(t):aq(t)||lq(t)||45!==t&&sq(t)?s(t):(e.consume(t),a)}function o(t){return 46===t?(i=r,r=void 0,e.consume(t),a):(95===t&&(r=!0),e.consume(t),a)}function s(e){return i||r?n(e):t(e)}},partial:!0},hq={tokenize:function(e,t){var n=0;return r;function r(o){return 38===o?e.check(dq,t,i)(o):(40===o&&n++,41===o?e.check(pq,a,i)(o):Eq(o)?t(o):xq(o)?e.check(pq,t,i)(o):(e.consume(o),r))}function i(t){return e.consume(t),r}function a(e){return--n<0?t(e):i(e)}},partial:!0},pq={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(i){return xq(i)?(e.consume(i),r):Eq(i)?t(i):n(i)}},partial:!0},dq={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return rq(t)?(e.consume(t),r):59===t?(e.consume(t),i):n(t)}function i(e){return Eq(e)?t(e):n(e)}},partial:!0},fq={tokenize:function(e,t,n){var r=this;return function(t){if(87!==t&&t-32!=87||!Cq(r.previous)||Sq(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(cq,e.attempt(uq,e.attempt(hq,i),n),n)(t)};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:Cq},mq={tokenize:function(e,t,n){var r=this;return function(t){if(72!==t&&t-32!=72||!Tq(r.previous)||Sq(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(t),i};function i(t){return 84===t||t-32==84?(e.consume(t),a):n(t)}function a(t){return 84===t||t-32==84?(e.consume(t),o):n(t)}function o(t){return 80===t||t-32==80?(e.consume(t),s):n(t)}function s(t){return 83===t||t-32==83?(e.consume(t),l):l(t)}function l(t){return 58===t?(e.consume(t),c):n(t)}function c(t){return 47===t?(e.consume(t),u):n(t)}function u(t){return 47===t?(e.consume(t),h):n(t)}function h(t){return aq(t)||lq(t)||sq(t)?n(t):e.attempt(uq,e.attempt(hq,p),n)(t)}function p(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:Tq},gq={tokenize:function(e,t,n){var r,i=this;return function(t){if(!bq(t)||!wq(i.previous)||Sq(i.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return bq(t)?(e.consume(t),a):64===t?(e.consume(t),o):n(t)}function o(t){return 46===t?e.check(pq,u,s)(t):45===t||95===t?e.check(pq,n,l)(t):iq(t)?(e.consume(t),o):u(t)}function s(t){return e.consume(t),r=!0,o}function l(t){return e.consume(t),c}function c(t){return 46===t?e.check(pq,n,s)(t):o(t)}function u(i){return r?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(i)):n(i)}},previous:wq},vq={};XX.text=vq;for(var yq=48;yq<123;)vq[yq]=gq,58===++yq?yq=65:91===yq&&(yq=97);function xq(e){return 33===e||34===e||39===e||41===e||42===e||44===e||46===e||58===e||59===e||60===e||63===e||95===e||126===e}function Eq(e){return null===e||e<0||32===e||60===e}function bq(e){return 43===e||45===e||46===e||95===e||iq(e)}function Cq(e){return null===e||e<0||32===e||40===e||42===e||95===e||126===e}function Tq(e){return null===e||!rq(e)}function wq(e){return 47!==e&&Tq(e)}function Sq(e){for(var t=e.length;t--;)if(("labelLink"===e[t][1].type||"labelImage"===e[t][1].type)&&!e[t][1]._balanced)return!0}vq[43]=gq,vq[45]=gq,vq[46]=gq,vq[95]=gq,vq[72]=[gq,mq],vq[104]=[gq,mq],vq[87]=[gq,fq],vq[119]=[gq,fq];var kq=XX;var _q=function(e){return e<0||32===e},Aq=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Oq=String.fromCharCode;var Iq=function(e){return function(t){return e.test(Oq(t))}},Mq=Iq(Aq),Nq=Iq(/\s/),Fq=_q,Lq=Mq,Pq=Nq;var Rq=function(e){return null===e||Fq(e)||Pq(e)?1:Lq(e)?2:void 0},Dq=[].splice;var Bq=function(e,t,n,r){var i,a=e.length,o=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),Dq.apply(e,i);else for(n&&Dq.apply(e,[t,n]);o<r.length;)(i=r.slice(o,o+1e4)).unshift(t,0),Dq.apply(e,i),o+=1e4,t+=1e4};var zq=function(e,t,n){for(var r,i=[],a=-1;++a<e.length;)(r=e[a].resolveAll)&&i.indexOf(r)<0&&(t=r(t,n),i.push(r));return t},Hq=Object.assign;var jq=function(e){var t=(e||{}).singleTilde,n={tokenize:function(e,n,r){var i=this.previous,a=this.events,o=0;return s;function s(t){return 126!==t||126===i&&"characterEscape"!==a[a.length-1][1].type?r(t):(e.enter("strikethroughSequenceTemporary"),l(t))}function l(a){var s,c,u=Gq(i);return 126===a?o>1?r(a):(e.consume(a),o++,l):o<2&&!t?r(a):(s=e.exit("strikethroughSequenceTemporary"),c=Gq(a),s._open=!c||2===c&&u,s._close=!u||2===u&&c,n(a))}},resolveAll:function(e,t){var n,r,i,a,o=-1;for(;++o<e.length;)if("enter"===e[o][0]&&"strikethroughSequenceTemporary"===e[o][1].type&&e[o][1]._close)for(i=o;i--;)if("exit"===e[i][0]&&"strikethroughSequenceTemporary"===e[i][1].type&&e[i][1]._open&&e[o][1].end.offset-e[o][1].start.offset==e[i][1].end.offset-e[i][1].start.offset){e[o][1].type="strikethroughSequence",e[i][1].type="strikethroughSequence",n={type:"strikethrough",start:Uq(e[i][1].start),end:Uq(e[o][1].end)},r={type:"strikethroughText",start:Uq(e[i][1].end),end:Uq(e[o][1].start)},a=[["enter",n,t],["enter",e[i][1],t],["exit",e[i][1],t],["enter",r,t]],$q(a,a.length,0,Yq(t.parser.constructs.insideSpan.null,e.slice(i+1,o),t)),$q(a,a.length,0,[["exit",r,t],["enter",e[o][1],t],["exit",e[o][1],t],["exit",n,t]]),$q(e,i-1,o-i+3,a),o=i+a.length-2;break}return function(e){var t=-1,n=e.length;for(;++t<n;)"strikethroughSequenceTemporary"===e[t][1].type&&(e[t][1].type="data");return e}(e)}};null==t&&(t=!0);return{text:{126:n},insideSpan:{null:n}}},Gq=Rq,$q=Bq,Yq=zq,Uq=function(e){return Hq({},e)};var Vq={};var Wq=function(e){return-2===e||-1===e||32===e};var Xq=function(e,t,n,r){var i=r?r-1:1/0,a=0;return function(r){if(Wq(r))return e.enter(n),o(r);return t(r)};function o(r){return Wq(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}};Vq.flow={null:{tokenize:function(e,t,n){var r,i,a=[],o=0;return function(t){if(null===t||-5===t||-4===t||-3===t)return n(t);if(e.enter("table")._align=a,e.enter("tableHead"),e.enter("tableRow"),124===t)return s(t);return o++,e.enter("temporaryTableCellContent"),u(t)};function s(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,l}function l(t){return null===t||-5===t||-4===t||-3===t?function(t){if(null===t)return n(t);return e.exit("tableRow"),e.exit("tableHead"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.check(Kq,n,qq(e,p,"linePrefix",4))}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),c):(r&&(r=void 0,o++),124===t?s(t):(e.enter("temporaryTableCellContent"),u(t)))}function c(t){return-2===t||-1===t||32===t?(e.consume(t),c):(e.exit("whitespace"),l(t))}function u(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),l(t)):(e.consume(t),92===t?h:u)}function h(t){return 92===t||124===t?(e.consume(t),u):u(t)}function p(t){return null===t||t<0||32===t?n(t):(e.enter("tableDelimiterRow"),d(t))}function d(t){return null===t||-5===t||-4===t||-3===t?y(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),f):45===t?(e.enter("tableDelimiterFiller"),e.consume(t),i=!0,a.push(null),m):58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),a.push("left"),g):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),d):n(t)}function f(t){return-2===t||-1===t||32===t?(e.consume(t),f):(e.exit("whitespace"),d(t))}function m(t){return 45===t?(e.consume(t),m):(e.exit("tableDelimiterFiller"),58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),a[a.length-1]="left"===a[a.length-1]?"center":"right",v):d(t))}function g(t){return 45===t?(e.enter("tableDelimiterFiller"),e.consume(t),i=!0,m):n(t)}function v(t){return null===t||-5===t||-4===t||-3===t?y(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),f):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),d):n(t)}function y(t){return e.exit("tableDelimiterRow"),i&&o===a.length?null===t?x(t):e.check(Qq,x,E)(t):n(t)}function x(n){return e.exit("table"),t(n)}function E(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),qq(e,b,"linePrefix",4)}function b(t){return e.enter("tableBody"),C(t)}function C(t){return e.enter("tableRow"),124===t?T(t):(e.enter("temporaryTableCellContent"),k(t))}function T(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),w}function w(t){return null===t||-5===t||-4===t||-3===t?function(t){if(e.exit("tableRow"),null===t)return A(t);return e.check(Qq,A,O)(t)}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),S):124===t?T(t):(e.enter("temporaryTableCellContent"),k(t))}function S(t){return-2===t||-1===t||32===t?(e.consume(t),S):(e.exit("whitespace"),w(t))}function k(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),w(t)):(e.consume(t),92===t?_:k)}function _(t){return 92===t||124===t?(e.consume(t),k):k(t)}function A(t){return e.exit("tableBody"),x(t)}function O(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),qq(e,C,"linePrefix",4)}},resolve:function(e,t){var n,r,i,a,o,s,l,c,u,h,p=e.length,d=-1;for(;++d<p;)n=e[d][1],a&&("temporaryTableCellContent"===n.type&&(c=c||d,u=d),"tableCellDivider"!==n.type&&"tableRow"!==n.type||!u||(s={type:"tableContent",start:e[c][1].start,end:e[u][1].end},l={type:"chunkText",start:s.start,end:s.end,contentType:"text"},e.splice(c,u-c+1,["enter",s,t],["enter",l,t],["exit",l,t],["exit",s,t]),d-=u-c-3,p=e.length,c=void 0,u=void 0)),"exit"===e[d][0]&&h&&h+1<d&&("tableCellDivider"===n.type||"tableRow"===n.type&&(h+3<d||"whitespace"!==e[h][1].type))&&(o={type:i?"tableDelimiter":r?"tableHeader":"tableData",start:e[h][1].start,end:e[d][1].end},e.splice(d+("tableCellDivider"===n.type?1:0),0,["exit",o,t]),e.splice(h,0,["enter",o,t]),d+=2,p=e.length,h=d+1),"tableRow"===n.type&&(a="enter"===e[d][0])&&(h=d+1),"tableDelimiterRow"===n.type&&(i="enter"===e[d][0])&&(h=d+1),"tableHead"===n.type&&(r="enter"===e[d][0]);return e},interruptible:!0}};var qq=Xq,Kq={tokenize:function(e,t,n){return function(t){if(45!==t)return n(t);return e.enter("setextUnderline"),r(t)};function r(t){return 45===t?(e.consume(t),r):i(t)}function i(r){return-2===r||-1===r||32===r?(e.consume(r),i):null===r||-5===r||-4===r||-3===r?t(r):n(r)}},partial:!0},Qq={tokenize:function(e,t,n){var r=0;return function(t){return e.enter("check"),e.consume(t),i};function i(a){return-1===a||32===a?(e.consume(a),4===++r?t:i):null===a||a<0?t(a):n(a)}},partial:!0};var Zq=Vq,Jq={};var eK=function(e){return-2===e||-1===e||32===e};var tK=function(e){for(var t=-1,n=0;++t<e.length;)n+="string"==typeof e[t]?e[t].length:1;return n};var nK=function(e){return e<0||32===e},rK=function(e,t,n,r){var i=r?r-1:1/0,a=0;return function(r){if(eK(r))return e.enter(n),o(r);return t(r)};function o(r){return eK(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}},iK=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?tK(n[2].sliceStream(n[1])):0},aK={tokenize:function(e,t,n){var r=this;return function(t){if(91!==t||null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i};function i(t){return-2===t||32===t?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),a):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),a):n(t)}function a(r){return 93===r?(e.enter("taskListCheckMarker"),e.consume(r),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:oK},t,n)):n(r)}}};function oK(e,t,n){var r=this;return rK(e,(function(e){return iK(r.events,"whitespace")&&null!==e&&!nK(e)?t(e):n(e)}),"whitespace")}Jq.text={91:aK};var sK=WX,lK=kq,cK=jq,uK=Zq,hK=Jq;var pK=function(e){return sK([lK,cK(e),uK,hK])},dK={},fK=function(e,t){var n,r=String(e),i=0;if("string"!=typeof t)throw new Error("Expected character");n=r.indexOf(t);for(;-1!==n;)i++,n=r.indexOf(t,n+t.length);return i};function mK(e){if(null==e)return gK;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=mK(e[n]);return r;function r(){for(var e=-1;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function gK(){return!0}var vK=EK,yK=mK,xK=function(e){return e};function EK(e,t,n,r){var i,a;"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),a=yK(t),i=r?-1:1,function e(o,s,l){var c,u="object"==typeof o&&null!==o?o:{};"string"==typeof u.type&&(c="string"==typeof u.tagName?u.tagName:"string"==typeof u.name?u.name:void 0,h.displayName="node ("+xK(u.type+(c?"<"+c+">":""))+")");return h;function h(){var c,u,h=l.concat(o),p=[];if((!t||a(o,s,l[l.length-1]||null))&&false===(p=function(e){if(null!==e&&"object"==typeof e&&"length"in e)return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)))[0])return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+i;u>-1&&u<o.children.length;){if(false===(c=e(o.children[u],u,h)())[0])return c;u="number"==typeof c[1]?c[1]:u+i}return p}}(e,null,[])()}function bK(e){if(null==e)return CK;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=bK(e[n]);return r;function r(){for(var e=-1;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function CK(){return!0}EK.CONTINUE=true,EK.SKIP="skip",EK.EXIT=false;var TK=function(e,t,n,r){var i,a;"string"==typeof t||t&&"function"==typeof t.exec?a=[[t,n]]:(a=t,r=n);return AK(e,i=r||{},function e(t){var n=t[0];return r;function r(r,a){var o,s,l,c,u=n[0],h=n[1],p=[],d=0,f=a.children.indexOf(r);for(u.lastIndex=0,s=u.exec(r.value);s&&(o=s.index,!1!==(c=h.apply(null,[].concat(s,{index:s.index,input:s.input})))&&(d!==o&&p.push({type:"text",value:r.value.slice(d,o)}),"string"==typeof c&&c.length>0&&(c={type:"text",value:c}),c&&(p=[].concat(p,c)),d=o+s[0].length),u.global);)s=u.exec(r.value);if(void 0===o?(p=[r],f--):(d<r.value.length&&p.push({type:"text",value:r.value.slice(d)}),p.unshift(f,1),_K.apply(a.children,p)),t.length>1)for(l=e(t.slice(1)),o=-1;++o<p.length;)"text"===(r=p[o]).type?l(r,a):AK(r,i,l);return f+p.length+1}}(function(e){var t,n,r=[];if("object"!=typeof e)throw new Error("Expected array or object as schema");if("length"in e)for(n=-1;++n<e.length;)r.push([OK(e[n][0]),IK(e[n][1])]);else for(t in e)r.push([OK(t),IK(e[t])]);return r}(a))),e},wK=vK,SK=bK,kK=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},_K=[].splice;function AK(e,t,n){var r=SK(t.ignore||[]);return wK(e,"text",(function(e,t){var i,a,o=-1;for(;++o<t.length;){if(i=t[o],r(i,a?a.children.indexOf(i):void 0,a))return;a=i}return n(e,a)})),[]}function OK(e){return"string"==typeof e?new RegExp(kK(e),"g"):e}function IK(e){return"function"==typeof e?e:function(){return e}}var MK=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,NK=String.fromCharCode;var FK=function(e){return function(t){return e.test(NK(t))}},LK=FK(MK),PK=FK(/\s/),RK=fK,DK=TK,BK=LK,zK=PK;function HK(e){this.config.enter.autolinkProtocol.call(this,e)}function jK(e,t,n,r,i){var a,o,s="";return!!$K(i)&&(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!!function(e){var t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n)&&(!!(a=function(e){var t,n,r,i=/[!"&'),.:;<>?\]}]+$/.exec(e);if(i)for(e=e.slice(0,i.index),t=(i=i[0]).indexOf(")"),n=RK(e,"("),r=RK(e,")");-1!==t&&n>r;)e+=i.slice(0,t+1),t=(i=i.slice(t+1)).indexOf(")"),r++;return[e,i]}(n+r))[0]&&(o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]},a[1]&&(o=[o,{type:"text",value:a[1]}]),o)))}function GK(e,t,n,r){return!(!$K(r,!0)||/[_-]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function $K(e,t){var n=e.input.charCodeAt(e.index-1);return(n!=n||zK(n)||BK(n))&&(!t||47!==n)}dK.transforms=[function(e){DK(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/i,jK],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/,GK]],{ignore:["link","linkReference"]})}],dK.enter={literalAutolink:function(e){this.enter({type:"link",title:null,url:"",children:[]},e)},literalAutolinkEmail:HK,literalAutolinkHttp:HK,literalAutolinkWww:HK},dK.exit={literalAutolink:function(e){this.exit(e)},literalAutolinkEmail:function(e){this.config.exit.autolinkEmail.call(this,e)},literalAutolinkHttp:function(e){this.config.exit.autolinkProtocol.call(this,e)},literalAutolinkWww:function(e){this.config.exit.data.call(this,e),this.stack[this.stack.length-1].url="http://"+this.sliceSerialize(e)}};var YK={};YK.canContainEols=["delete"],YK.enter={strikethrough:function(e){this.enter({type:"delete",children:[]},e)}},YK.exit={strikethrough:function(e){this.exit(e)}};var UK={};function VK(e){this.exit(e)}function WK(e){this.enter({type:"tableCell",children:[]},e)}function XK(e,t){return"|"===t?t:e}UK.enter={table:function(e){this.enter({type:"table",align:e._align,children:[]},e),this.setData("inTable",!0)},tableData:WK,tableHeader:WK,tableRow:function(e){this.enter({type:"tableRow",children:[]},e)}},UK.exit={codeText:function(e){var t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,XK));this.stack[this.stack.length-1].value=t,this.exit(e)},table:function(e){this.exit(e),this.setData("inTable")},tableData:VK,tableHeader:VK,tableRow:VK};var qK={};function KK(e){this.stack[this.stack.length-2].checked="taskListCheckValueChecked"===e.type}qK.exit={taskListCheckValueChecked:KK,taskListCheckValueUnchecked:KK,paragraph:function(e){var t,n=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1],i=n.children,a=r.children[0],o=-1;if(n&&"listItem"===n.type&&"boolean"==typeof n.checked&&a&&"text"===a.type){for(;++o<i.length;)if("paragraph"===i[o].type){t=i[o];break}t===r&&(a.value=a.value.slice(1),0===a.value.length?r.children.shift():(a.position.start.column++,a.position.start.offset++,r.position.start=Object.assign({},a.position.start)))}this.exit(e)}};var QK={}.hasOwnProperty,ZK=function(e){var t={transforms:[],canContainEols:[]},n=e.length,r=-1;for(;++r<n;)JK(t,e[r]);return t}([dK,YK,UK,qK]);function JK(e,t){var n,r,i;for(n in t)r=QK.call(e,n)?e[n]:e[n]={},i=t[n],"canContainEols"===n||"transforms"===n?e[n]=[].concat(r,i):Object.assign(r,i)}var eQ={},tQ=["autolink","link","image","label"];eQ.unsafe=[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:"phrasing",notInConstruct:tQ},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:"phrasing",notInConstruct:tQ},{character:":",before:"[ps]",after:"\\/",inConstruct:"phrasing",notInConstruct:tQ}];var nQ={},rQ=function(e,t,n){var r,i,a,o=e.children||[],s=[],l=-1,c=n.before;for(;++l<o.length;)a=o[l],l+1<o.length?((i=t.handle.handlers[o[l+1].type])&&i.peek&&(i=i.peek),r=i?i(o[l+1],e,t,{before:"",after:""}).charAt(0):""):r=n.after,s.length>0&&("\r"===c||"\n"===c)&&"html"===a.type&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),c=" "),s.push(t.handle(a,e,t,{before:c,after:r})),c=s[s.length-1].slice(-1);return s.join("")};var iQ=rQ;function aQ(e,t,n){var r=n.enter("emphasis"),i=iQ(e,n,{before:"~",after:"~"});return r(),"~~"+i+"~~"}nQ.unsafe=[{character:"~",inConstruct:"phrasing"}],nQ.handlers={delete:aQ},aQ.peek=function(){return"~"};var oQ=function(e){var t,n;e._compiled||(t=e.before?"(?:"+e.before+")":"",n=e.after?"(?:"+e.after+")":"",e.atBreak&&(t="[\\r\\n][\\t ]*"+t),e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(n||""),"g"));return e._compiled};var sQ=cQ;cQ.peek=function(){return"`"}
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */;var lQ=oQ;function cQ(e,t,n){for(var r,i,a,o,s=e.value||"",l="`",c=-1;new RegExp("(^|[^`])"+l+"([^`]|$)").test(s);)l+="`";for(/[^ \r\n]/.test(s)&&(/[ \r\n`]/.test(s.charAt(0))||/[ \r\n`]/.test(s.charAt(s.length-1)))&&(s=" "+s+" ");++c<n.unsafe.length;)if((r=n.unsafe[c]).atBreak)for(i=lQ(r);a=i.exec(s);)o=a.index,10===s.charCodeAt(o)&&13===s.charCodeAt(o-1)&&o--,s=s.slice(0,o)+" "+s.slice(a.index+1);return l+s+l}var uQ,hQ="",pQ=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(uQ!==e||void 0===uQ)uQ=e,hQ="";else if(hQ.length>=n)return hQ.substr(0,n);for(;n>hQ.length&&t>1;)1&t&&(hQ+=e),t>>=1,e+=e;return hQ=(hQ+=e).substr(0,n)};var dQ=pQ,fQ=function(e,t){var n,r,i,a,o,s,l,c,u,h,p,d=t||{},f=!1!==d.padding,m=!1!==d.delimiterStart,g=!1!==d.delimiterEnd,v=(d.align||[]).concat(),y=!1!==d.alignDelimiters,x=[],E=d.stringLength||yQ,b=-1,C=e.length,T=[],w=[],S=[],k=[],_=[],A=0;for(;++b<C;){for(n=e[b],r=-1,i=n.length,S=[],k=[],i>A&&(A=i);++r<i;)s=vQ(n[r]),!0===y&&(o=E(s),k[r]=o,(void 0===(a=_[r])||o>a)&&(_[r]=o)),S.push(s);T[b]=S,w[b]=k}if(r=-1,i=A,"object"==typeof v&&"length"in v)for(;++r<i;)x[r]=xQ(v[r]);else for(p=xQ(v);++r<i;)x[r]=p;r=-1,i=A,S=[],k=[];for(;++r<i;)p=x[r],u="",h="",108===p?u=":":p===gQ?h=":":99===p&&(u=":",h=":"),o=y?Math.max(1,_[r]-u.length-h.length):1,s=u+dQ("-",o)+h,!0===y&&((o=u.length+o+h.length)>_[r]&&(_[r]=o),k[r]=o),S[r]=s;T.splice(1,0,S),w.splice(1,0,k),b=-1,C=T.length,l=[];for(;++b<C;){for(S=T[b],k=w[b],r=-1,i=A,c=[];++r<i;)s=S[r]||"",u="",h="",!0===y&&(o=_[r]-(k[r]||0),(p=x[r])===gQ?u=dQ(" ",o):99===p?o%2==0?(u=dQ(" ",o/2),h=u):(u=dQ(" ",o/2+.5),h=dQ(" ",o/2-.5)):h=dQ(" ",o)),!0===m&&0===r&&c.push("|"),!0!==f||!1===y&&""===s||!0!==m&&0===r||c.push(" "),!0===y&&c.push(u),c.push(s),!0===y&&c.push(h),!0===f&&c.push(" "),!0!==g&&r===i-1||c.push("|");c=c.join(""),!1===g&&(c=c.replace(mQ,"")),l.push(c)}return l.join("\n")},mQ=/ +$/,gQ=114;function vQ(e){return null==e?"":String(e)}function yQ(e){return e.length}function xQ(e){var t="string"==typeof e?e.charCodeAt(0):0;return 76===t||108===t?108:82===t||t===gQ?gQ:67===t||99===t?99:0}var EQ=rQ,bQ=sQ,CQ=fQ,TQ=function(e){var t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:function(e,t,n){return s(function(e,t){var n=e.children,r=-1,i=n.length,a=[],o=t.enter("table");for(;++r<i;)a[r]=l(n[r],t);return o(),a}(e,n),e.align)},tableRow:function(e,t,n){var r=s([l(e,n)]);return r.slice(0,r.indexOf("\n"))},tableCell:o,inlineCode:function(e,t,n){var r=bQ(e,t,n);-1!==n.stack.indexOf("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r}}};function o(e,t,n){var r=n.enter("tableCell"),i=EQ(e,n,{before:a,after:a});return r(),i}function s(e,t){return CQ(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function l(e,t){for(var n=e.children,r=-1,i=n.length,a=[],s=t.enter("tableRow");++r<i;)a[r]=o(n[r],0,t);return s(),a}};var wQ={};var SQ=function(e,t){var n,r=e.children||[],i=[],a=-1;for(;++a<r.length;)n=r[a],i.push(t.handle(n,e,t,{before:"\n",after:"\n"})),a+1<r.length&&i.push(o(n,r[a+1]));return i.join("");function o(n,r){for(var i,a=-1;++a<t.join.length&&!0!==(i=t.join[a](n,r,e,t))&&1!==i;){if("number"==typeof i)return kQ("\n",1+Number(i));if(!1===i)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}},kQ=pQ;var _Q=function(e,t){var n,r=[],i=0,a=0;for(;n=AQ.exec(e);)o(e.slice(i,n.index)),r.push(n[0]),i=n.index+n[0].length,a++;return o(e.slice(i)),r.join("");function o(e){r.push(t(e,a,!e))}},AQ=/\r?\n|\r/g;var OQ=function(e,t,n){var r,i,a,o=MQ(n),s=NQ(n);t&&t.ordered&&(o=(t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+".");r=o.length+1,("tab"===s||"mixed"===s&&(t&&t.spread||e.spread))&&(r=4*Math.ceil(r/4));return a=n.enter("listItem"),i=LQ(FQ(e,n),(function(e,t,n){if(t)return(n?"":IQ(" ",r))+e;return(n?o:o+IQ(" ",r-o.length))+e})),a(),i},IQ=pQ,MQ=function(e){var t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t},NQ=function(e){var t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t},FQ=SQ,LQ=_Q;var PQ=OQ;wQ.unsafe=[{atBreak:!0,character:"-",after:"[:|-]"}],wQ.handlers={listItem:function(e,t,n){var r=PQ(e,t,n),i=e.children[0];"boolean"==typeof e.checked&&i&&"paragraph"===i.type&&(r=r.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(t){return t+"["+(e.checked?"x":" ")+"] "})));return r}};var RQ=eQ,DQ=nQ,BQ=TQ,zQ=wQ,HQ=function e(t,n){var r,i=-1;if(n.extensions)for(;++i<n.extensions.length;)e(t,n.extensions[i]);for(r in n)"extensions"===r||("unsafe"===r||"join"===r?t[r]=t[r].concat(n[r]||[]):"handlers"===r?t[r]=Object.assign(t[r],n[r]||{}):t.options[r]=n[r]);return t};var jQ,GQ=pK,$Q=ZK,YQ=function(e){var t=HQ({handlers:{},join:[],unsafe:[],options:{}},{extensions:[RQ,DQ,BQ(e),zQ]});return Object.assign(t.options,{handlers:t.handlers,join:t.join,unsafe:t.unsafe})},UQ=function(e){var t=this.data();!jQ&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(jQ=!0,console.warn("[remark-gfm] Warning: please upgrade to remark 13 to use this plugin"));function n(e,n){t[e]?t[e].push(n):t[e]=[n]}n("micromarkExtensions",GQ(e)),n("fromMarkdownExtensions",$Q),n("toMarkdownExtensions",YQ(e))};var VQ={};const WQ=[65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111];VQ.REPLACEMENT_CHARACTER="�",VQ.CODE_POINTS={EOF:-1,NULL:0,TABULATION:9,CARRIAGE_RETURN:13,LINE_FEED:10,FORM_FEED:12,SPACE:32,EXCLAMATION_MARK:33,QUOTATION_MARK:34,NUMBER_SIGN:35,AMPERSAND:38,APOSTROPHE:39,HYPHEN_MINUS:45,SOLIDUS:47,DIGIT_0:48,DIGIT_9:57,SEMICOLON:59,LESS_THAN_SIGN:60,EQUALS_SIGN:61,GREATER_THAN_SIGN:62,QUESTION_MARK:63,LATIN_CAPITAL_A:65,LATIN_CAPITAL_F:70,LATIN_CAPITAL_X:88,LATIN_CAPITAL_Z:90,RIGHT_SQUARE_BRACKET:93,GRAVE_ACCENT:96,LATIN_SMALL_A:97,LATIN_SMALL_F:102,LATIN_SMALL_X:120,LATIN_SMALL_Z:122,REPLACEMENT_CHARACTER:65533},VQ.CODE_POINT_SEQUENCES={DASH_DASH_STRING:[45,45],DOCTYPE_STRING:[68,79,67,84,89,80,69],CDATA_START_STRING:[91,67,68,65,84,65,91],SCRIPT_STRING:[115,99,114,105,112,116],PUBLIC_STRING:[80,85,66,76,73,67],SYSTEM_STRING:[83,89,83,84,69,77]},VQ.isSurrogate=function(e){return e>=55296&&e<=57343},VQ.isSurrogatePair=function(e){return e>=56320&&e<=57343},VQ.getSurrogatePairCodePoint=function(e,t){return 1024*(e-55296)+9216+t},VQ.isControlCodePoint=function(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159},VQ.isUndefinedCodePoint=function(e){return e>=64976&&e<=65007||WQ.indexOf(e)>-1};var XQ={controlCharacterInInputStream:"control-character-in-input-stream",noncharacterInInputStream:"noncharacter-in-input-stream",surrogateInInputStream:"surrogate-in-input-stream",nonVoidHtmlElementStartTagWithTrailingSolidus:"non-void-html-element-start-tag-with-trailing-solidus",endTagWithAttributes:"end-tag-with-attributes",endTagWithTrailingSolidus:"end-tag-with-trailing-solidus",unexpectedSolidusInTag:"unexpected-solidus-in-tag",unexpectedNullCharacter:"unexpected-null-character",unexpectedQuestionMarkInsteadOfTagName:"unexpected-question-mark-instead-of-tag-name",invalidFirstCharacterOfTagName:"invalid-first-character-of-tag-name",unexpectedEqualsSignBeforeAttributeName:"unexpected-equals-sign-before-attribute-name",missingEndTagName:"missing-end-tag-name",unexpectedCharacterInAttributeName:"unexpected-character-in-attribute-name",unknownNamedCharacterReference:"unknown-named-character-reference",missingSemicolonAfterCharacterReference:"missing-semicolon-after-character-reference",unexpectedCharacterAfterDoctypeSystemIdentifier:"unexpected-character-after-doctype-system-identifier",unexpectedCharacterInUnquotedAttributeValue:"unexpected-character-in-unquoted-attribute-value",eofBeforeTagName:"eof-before-tag-name",eofInTag:"eof-in-tag",missingAttributeValue:"missing-attribute-value",missingWhitespaceBetweenAttributes:"missing-whitespace-between-attributes",missingWhitespaceAfterDoctypePublicKeyword:"missing-whitespace-after-doctype-public-keyword",missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:"missing-whitespace-between-doctype-public-and-system-identifiers",missingWhitespaceAfterDoctypeSystemKeyword:"missing-whitespace-after-doctype-system-keyword",missingQuoteBeforeDoctypePublicIdentifier:"missing-quote-before-doctype-public-identifier",missingQuoteBeforeDoctypeSystemIdentifier:"missing-quote-before-doctype-system-identifier",missingDoctypePublicIdentifier:"missing-doctype-public-identifier",missingDoctypeSystemIdentifier:"missing-doctype-system-identifier",abruptDoctypePublicIdentifier:"abrupt-doctype-public-identifier",abruptDoctypeSystemIdentifier:"abrupt-doctype-system-identifier",cdataInHtmlContent:"cdata-in-html-content",incorrectlyOpenedComment:"incorrectly-opened-comment",eofInScriptHtmlCommentLikeText:"eof-in-script-html-comment-like-text",eofInDoctype:"eof-in-doctype",nestedComment:"nested-comment",abruptClosingOfEmptyComment:"abrupt-closing-of-empty-comment",eofInComment:"eof-in-comment",incorrectlyClosedComment:"incorrectly-closed-comment",eofInCdata:"eof-in-cdata",absenceOfDigitsInNumericCharacterReference:"absence-of-digits-in-numeric-character-reference",nullCharacterReference:"null-character-reference",surrogateCharacterReference:"surrogate-character-reference",characterReferenceOutsideUnicodeRange:"character-reference-outside-unicode-range",controlCharacterReference:"control-character-reference",noncharacterCharacterReference:"noncharacter-character-reference",missingWhitespaceBeforeDoctypeName:"missing-whitespace-before-doctype-name",missingDoctypeName:"missing-doctype-name",invalidCharacterSequenceAfterDoctypeName:"invalid-character-sequence-after-doctype-name",duplicateAttribute:"duplicate-attribute",nonConformingDoctype:"non-conforming-doctype",missingDoctype:"missing-doctype",misplacedDoctype:"misplaced-doctype",endTagWithoutMatchingOpenElement:"end-tag-without-matching-open-element",closingOfElementWithOpenChildElements:"closing-of-element-with-open-child-elements",disallowedContentInNoscriptInHead:"disallowed-content-in-noscript-in-head",openElementsLeftAfterEof:"open-elements-left-after-eof",abandonedHeadElementChild:"abandoned-head-element-child",misplacedStartTagForHeadElement:"misplaced-start-tag-for-head-element",nestedNoscriptInHead:"nested-noscript-in-head",eofInElementThatCanContainOnlyText:"eof-in-element-that-can-contain-only-text"};const qQ=VQ,KQ=XQ,QQ=qQ.CODE_POINTS;var ZQ=class{constructor(){this.html=null,this.pos=-1,this.lastGapPos=-1,this.lastCharPos=-1,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536}_err(){}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.lastCharPos){const t=this.html.charCodeAt(this.pos+1);if(qQ.isSurrogatePair(t))return this.pos++,this._addGap(),qQ.getSurrogatePairCodePoint(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,QQ.EOF;return this._err(KQ.surrogateInInputStream),e}dropParsedChunk(){this.pos>this.bufferWaterline&&(this.lastCharPos-=this.pos,this.html=this.html.substring(this.pos),this.pos=0,this.lastGapPos=-1,this.gapStack=[])}write(e,t){this.html?this.html+=e:this.html=e,this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1,this.html.length),this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1}advance(){if(this.pos++,this.pos>this.lastCharPos)return this.endOfChunkHit=!this.lastChunkWritten,QQ.EOF;let e=this.html.charCodeAt(this.pos);if(this.skipNextNewLine&&e===QQ.LINE_FEED)return this.skipNextNewLine=!1,this._addGap(),this.advance();if(e===QQ.CARRIAGE_RETURN)return this.skipNextNewLine=!0,QQ.LINE_FEED;this.skipNextNewLine=!1,qQ.isSurrogate(e)&&(e=this._processSurrogate(e));return e>31&&e<127||e===QQ.LINE_FEED||e===QQ.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e}_checkForProblematicCharacters(e){qQ.isControlCodePoint(e)?this._err(KQ.controlCharacterInInputStream):qQ.isUndefinedCodePoint(e)&&this._err(KQ.noncharacterInInputStream)}retreat(){this.pos===this.lastGapPos&&(this.lastGapPos=this.gapStack.pop(),this.pos--),this.pos--}},JQ=new Uint16Array([4,52,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,106,303,412,810,1432,1701,1796,1987,2114,2360,2420,2484,3170,3251,4140,4393,4575,4610,5106,5512,5728,6117,6274,6315,6345,6427,6516,7002,7910,8733,9323,9870,10170,10631,10893,11318,11386,11467,12773,13092,14474,14922,15448,15542,16419,17666,18166,18611,19004,19095,19298,19397,4,16,69,77,97,98,99,102,103,108,109,110,111,112,114,115,116,117,140,150,158,169,176,194,199,210,216,222,226,242,256,266,283,294,108,105,103,5,198,1,59,148,1,198,80,5,38,1,59,156,1,38,99,117,116,101,5,193,1,59,167,1,193,114,101,118,101,59,1,258,4,2,105,121,182,191,114,99,5,194,1,59,189,1,194,59,1,1040,114,59,3,55349,56580,114,97,118,101,5,192,1,59,208,1,192,112,104,97,59,1,913,97,99,114,59,1,256,100,59,1,10835,4,2,103,112,232,237,111,110,59,1,260,102,59,3,55349,56632,112,108,121,70,117,110,99,116,105,111,110,59,1,8289,105,110,103,5,197,1,59,264,1,197,4,2,99,115,272,277,114,59,3,55349,56476,105,103,110,59,1,8788,105,108,100,101,5,195,1,59,292,1,195,109,108,5,196,1,59,301,1,196,4,8,97,99,101,102,111,114,115,117,321,350,354,383,388,394,400,405,4,2,99,114,327,336,107,115,108,97,115,104,59,1,8726,4,2,118,119,342,345,59,1,10983,101,100,59,1,8966,121,59,1,1041,4,3,99,114,116,362,369,379,97,117,115,101,59,1,8757,110,111,117,108,108,105,115,59,1,8492,97,59,1,914,114,59,3,55349,56581,112,102,59,3,55349,56633,101,118,101,59,1,728,99,114,59,1,8492,109,112,101,113,59,1,8782,4,14,72,79,97,99,100,101,102,104,105,108,111,114,115,117,442,447,456,504,542,547,569,573,577,616,678,784,790,796,99,121,59,1,1063,80,89,5,169,1,59,454,1,169,4,3,99,112,121,464,470,497,117,116,101,59,1,262,4,2,59,105,476,478,1,8914,116,97,108,68,105,102,102,101,114,101,110,116,105,97,108,68,59,1,8517,108,101,121,115,59,1,8493,4,4,97,101,105,111,514,520,530,535,114,111,110,59,1,268,100,105,108,5,199,1,59,528,1,199,114,99,59,1,264,110,105,110,116,59,1,8752,111,116,59,1,266,4,2,100,110,553,560,105,108,108,97,59,1,184,116,101,114,68,111,116,59,1,183,114,59,1,8493,105,59,1,935,114,99,108,101,4,4,68,77,80,84,591,596,603,609,111,116,59,1,8857,105,110,117,115,59,1,8854,108,117,115,59,1,8853,105,109,101,115,59,1,8855,111,4,2,99,115,623,646,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8754,101,67,117,114,108,121,4,2,68,81,658,671,111,117,98,108,101,81,117,111,116,101,59,1,8221,117,111,116,101,59,1,8217,4,4,108,110,112,117,688,701,736,753,111,110,4,2,59,101,696,698,1,8759,59,1,10868,4,3,103,105,116,709,717,722,114,117,101,110,116,59,1,8801,110,116,59,1,8751,111,117,114,73,110,116,101,103,114,97,108,59,1,8750,4,2,102,114,742,745,59,1,8450,111,100,117,99,116,59,1,8720,110,116,101,114,67,108,111,99,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8755,111,115,115,59,1,10799,99,114,59,3,55349,56478,112,4,2,59,67,803,805,1,8915,97,112,59,1,8781,4,11,68,74,83,90,97,99,101,102,105,111,115,834,850,855,860,865,888,903,916,921,1011,1415,4,2,59,111,840,842,1,8517,116,114,97,104,100,59,1,10513,99,121,59,1,1026,99,121,59,1,1029,99,121,59,1,1039,4,3,103,114,115,873,879,883,103,101,114,59,1,8225,114,59,1,8609,104,118,59,1,10980,4,2,97,121,894,900,114,111,110,59,1,270,59,1,1044,108,4,2,59,116,910,912,1,8711,97,59,1,916,114,59,3,55349,56583,4,2,97,102,927,998,4,2,99,109,933,992,114,105,116,105,99,97,108,4,4,65,68,71,84,950,957,978,985,99,117,116,101,59,1,180,111,4,2,116,117,964,967,59,1,729,98,108,101,65,99,117,116,101,59,1,733,114,97,118,101,59,1,96,105,108,100,101,59,1,732,111,110,100,59,1,8900,102,101,114,101,110,116,105,97,108,68,59,1,8518,4,4,112,116,117,119,1021,1026,1048,1249,102,59,3,55349,56635,4,3,59,68,69,1034,1036,1041,1,168,111,116,59,1,8412,113,117,97,108,59,1,8784,98,108,101,4,6,67,68,76,82,85,86,1065,1082,1101,1189,1211,1236,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8751,111,4,2,116,119,1089,1092,59,1,168,110,65,114,114,111,119,59,1,8659,4,2,101,111,1107,1141,102,116,4,3,65,82,84,1117,1124,1136,114,114,111,119,59,1,8656,105,103,104,116,65,114,114,111,119,59,1,8660,101,101,59,1,10980,110,103,4,2,76,82,1149,1177,101,102,116,4,2,65,82,1158,1165,114,114,111,119,59,1,10232,105,103,104,116,65,114,114,111,119,59,1,10234,105,103,104,116,65,114,114,111,119,59,1,10233,105,103,104,116,4,2,65,84,1199,1206,114,114,111,119,59,1,8658,101,101,59,1,8872,112,4,2,65,68,1218,1225,114,114,111,119,59,1,8657,111,119,110,65,114,114,111,119,59,1,8661,101,114,116,105,99,97,108,66,97,114,59,1,8741,110,4,6,65,66,76,82,84,97,1264,1292,1299,1352,1391,1408,114,114,111,119,4,3,59,66,85,1276,1278,1283,1,8595,97,114,59,1,10515,112,65,114,114,111,119,59,1,8693,114,101,118,101,59,1,785,101,102,116,4,3,82,84,86,1310,1323,1334,105,103,104,116,86,101,99,116,111,114,59,1,10576,101,101,86,101,99,116,111,114,59,1,10590,101,99,116,111,114,4,2,59,66,1345,1347,1,8637,97,114,59,1,10582,105,103,104,116,4,2,84,86,1362,1373,101,101,86,101,99,116,111,114,59,1,10591,101,99,116,111,114,4,2,59,66,1384,1386,1,8641,97,114,59,1,10583,101,101,4,2,59,65,1399,1401,1,8868,114,114,111,119,59,1,8615,114,114,111,119,59,1,8659,4,2,99,116,1421,1426,114,59,3,55349,56479,114,111,107,59,1,272,4,16,78,84,97,99,100,102,103,108,109,111,112,113,115,116,117,120,1466,1470,1478,1489,1515,1520,1525,1536,1544,1593,1609,1617,1650,1664,1668,1677,71,59,1,330,72,5,208,1,59,1476,1,208,99,117,116,101,5,201,1,59,1487,1,201,4,3,97,105,121,1497,1503,1512,114,111,110,59,1,282,114,99,5,202,1,59,1510,1,202,59,1,1069,111,116,59,1,278,114,59,3,55349,56584,114,97,118,101,5,200,1,59,1534,1,200,101,109,101,110,116,59,1,8712,4,2,97,112,1550,1555,99,114,59,1,274,116,121,4,2,83,86,1563,1576,109,97,108,108,83,113,117,97,114,101,59,1,9723,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9643,4,2,103,112,1599,1604,111,110,59,1,280,102,59,3,55349,56636,115,105,108,111,110,59,1,917,117,4,2,97,105,1624,1640,108,4,2,59,84,1631,1633,1,10869,105,108,100,101,59,1,8770,108,105,98,114,105,117,109,59,1,8652,4,2,99,105,1656,1660,114,59,1,8496,109,59,1,10867,97,59,1,919,109,108,5,203,1,59,1675,1,203,4,2,105,112,1683,1689,115,116,115,59,1,8707,111,110,101,110,116,105,97,108,69,59,1,8519,4,5,99,102,105,111,115,1713,1717,1722,1762,1791,121,59,1,1060,114,59,3,55349,56585,108,108,101,100,4,2,83,86,1732,1745,109,97,108,108,83,113,117,97,114,101,59,1,9724,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9642,4,3,112,114,117,1770,1775,1781,102,59,3,55349,56637,65,108,108,59,1,8704,114,105,101,114,116,114,102,59,1,8497,99,114,59,1,8497,4,12,74,84,97,98,99,100,102,103,111,114,115,116,1822,1827,1834,1848,1855,1877,1882,1887,1890,1896,1978,1984,99,121,59,1,1027,5,62,1,59,1832,1,62,109,109,97,4,2,59,100,1843,1845,1,915,59,1,988,114,101,118,101,59,1,286,4,3,101,105,121,1863,1869,1874,100,105,108,59,1,290,114,99,59,1,284,59,1,1043,111,116,59,1,288,114,59,3,55349,56586,59,1,8921,112,102,59,3,55349,56638,101,97,116,101,114,4,6,69,70,71,76,83,84,1915,1933,1944,1953,1959,1971,113,117,97,108,4,2,59,76,1925,1927,1,8805,101,115,115,59,1,8923,117,108,108,69,113,117,97,108,59,1,8807,114,101,97,116,101,114,59,1,10914,101,115,115,59,1,8823,108,97,110,116,69,113,117,97,108,59,1,10878,105,108,100,101,59,1,8819,99,114,59,3,55349,56482,59,1,8811,4,8,65,97,99,102,105,111,115,117,2005,2012,2026,2032,2036,2049,2073,2089,82,68,99,121,59,1,1066,4,2,99,116,2018,2023,101,107,59,1,711,59,1,94,105,114,99,59,1,292,114,59,1,8460,108,98,101,114,116,83,112,97,99,101,59,1,8459,4,2,112,114,2055,2059,102,59,1,8461,105,122,111,110,116,97,108,76,105,110,101,59,1,9472,4,2,99,116,2079,2083,114,59,1,8459,114,111,107,59,1,294,109,112,4,2,68,69,2097,2107,111,119,110,72,117,109,112,59,1,8782,113,117,97,108,59,1,8783,4,14,69,74,79,97,99,100,102,103,109,110,111,115,116,117,2144,2149,2155,2160,2171,2189,2194,2198,2209,2245,2307,2329,2334,2341,99,121,59,1,1045,108,105,103,59,1,306,99,121,59,1,1025,99,117,116,101,5,205,1,59,2169,1,205,4,2,105,121,2177,2186,114,99,5,206,1,59,2184,1,206,59,1,1048,111,116,59,1,304,114,59,1,8465,114,97,118,101,5,204,1,59,2207,1,204,4,3,59,97,112,2217,2219,2238,1,8465,4,2,99,103,2225,2229,114,59,1,298,105,110,97,114,121,73,59,1,8520,108,105,101,115,59,1,8658,4,2,116,118,2251,2281,4,2,59,101,2257,2259,1,8748,4,2,103,114,2265,2271,114,97,108,59,1,8747,115,101,99,116,105,111,110,59,1,8898,105,115,105,98,108,101,4,2,67,84,2293,2300,111,109,109,97,59,1,8291,105,109,101,115,59,1,8290,4,3,103,112,116,2315,2320,2325,111,110,59,1,302,102,59,3,55349,56640,97,59,1,921,99,114,59,1,8464,105,108,100,101,59,1,296,4,2,107,109,2347,2352,99,121,59,1,1030,108,5,207,1,59,2358,1,207,4,5,99,102,111,115,117,2372,2386,2391,2397,2414,4,2,105,121,2378,2383,114,99,59,1,308,59,1,1049,114,59,3,55349,56589,112,102,59,3,55349,56641,4,2,99,101,2403,2408,114,59,3,55349,56485,114,99,121,59,1,1032,107,99,121,59,1,1028,4,7,72,74,97,99,102,111,115,2436,2441,2446,2452,2467,2472,2478,99,121,59,1,1061,99,121,59,1,1036,112,112,97,59,1,922,4,2,101,121,2458,2464,100,105,108,59,1,310,59,1,1050,114,59,3,55349,56590,112,102,59,3,55349,56642,99,114,59,3,55349,56486,4,11,74,84,97,99,101,102,108,109,111,115,116,2508,2513,2520,2562,2585,2981,2986,3004,3011,3146,3167,99,121,59,1,1033,5,60,1,59,2518,1,60,4,5,99,109,110,112,114,2532,2538,2544,2548,2558,117,116,101,59,1,313,98,100,97,59,1,923,103,59,1,10218,108,97,99,101,116,114,102,59,1,8466,114,59,1,8606,4,3,97,101,121,2570,2576,2582,114,111,110,59,1,317,100,105,108,59,1,315,59,1,1051,4,2,102,115,2591,2907,116,4,10,65,67,68,70,82,84,85,86,97,114,2614,2663,2672,2728,2735,2760,2820,2870,2888,2895,4,2,110,114,2620,2633,103,108,101,66,114,97,99,107,101,116,59,1,10216,114,111,119,4,3,59,66,82,2644,2646,2651,1,8592,97,114,59,1,8676,105,103,104,116,65,114,114,111,119,59,1,8646,101,105,108,105,110,103,59,1,8968,111,4,2,117,119,2679,2692,98,108,101,66,114,97,99,107,101,116,59,1,10214,110,4,2,84,86,2699,2710,101,101,86,101,99,116,111,114,59,1,10593,101,99,116,111,114,4,2,59,66,2721,2723,1,8643,97,114,59,1,10585,108,111,111,114,59,1,8970,105,103,104,116,4,2,65,86,2745,2752,114,114,111,119,59,1,8596,101,99,116,111,114,59,1,10574,4,2,101,114,2766,2792,101,4,3,59,65,86,2775,2777,2784,1,8867,114,114,111,119,59,1,8612,101,99,116,111,114,59,1,10586,105,97,110,103,108,101,4,3,59,66,69,2806,2808,2813,1,8882,97,114,59,1,10703,113,117,97,108,59,1,8884,112,4,3,68,84,86,2829,2841,2852,111,119,110,86,101,99,116,111,114,59,1,10577,101,101,86,101,99,116,111,114,59,1,10592,101,99,116,111,114,4,2,59,66,2863,2865,1,8639,97,114,59,1,10584,101,99,116,111,114,4,2,59,66,2881,2883,1,8636,97,114,59,1,10578,114,114,111,119,59,1,8656,105,103,104,116,97,114,114,111,119,59,1,8660,115,4,6,69,70,71,76,83,84,2922,2936,2947,2956,2962,2974,113,117,97,108,71,114,101,97,116,101,114,59,1,8922,117,108,108,69,113,117,97,108,59,1,8806,114,101,97,116,101,114,59,1,8822,101,115,115,59,1,10913,108,97,110,116,69,113,117,97,108,59,1,10877,105,108,100,101,59,1,8818,114,59,3,55349,56591,4,2,59,101,2992,2994,1,8920,102,116,97,114,114,111,119,59,1,8666,105,100,111,116,59,1,319,4,3,110,112,119,3019,3110,3115,103,4,4,76,82,108,114,3030,3058,3070,3098,101,102,116,4,2,65,82,3039,3046,114,114,111,119,59,1,10229,105,103,104,116,65,114,114,111,119,59,1,10231,105,103,104,116,65,114,114,111,119,59,1,10230,101,102,116,4,2,97,114,3079,3086,114,114,111,119,59,1,10232,105,103,104,116,97,114,114,111,119,59,1,10234,105,103,104,116,97,114,114,111,119,59,1,10233,102,59,3,55349,56643,101,114,4,2,76,82,3123,3134,101,102,116,65,114,114,111,119,59,1,8601,105,103,104,116,65,114,114,111,119,59,1,8600,4,3,99,104,116,3154,3158,3161,114,59,1,8466,59,1,8624,114,111,107,59,1,321,59,1,8810,4,8,97,99,101,102,105,111,115,117,3188,3192,3196,3222,3227,3237,3243,3248,112,59,1,10501,121,59,1,1052,4,2,100,108,3202,3213,105,117,109,83,112,97,99,101,59,1,8287,108,105,110,116,114,102,59,1,8499,114,59,3,55349,56592,110,117,115,80,108,117,115,59,1,8723,112,102,59,3,55349,56644,99,114,59,1,8499,59,1,924,4,9,74,97,99,101,102,111,115,116,117,3271,3276,3283,3306,3422,3427,4120,4126,4137,99,121,59,1,1034,99,117,116,101,59,1,323,4,3,97,101,121,3291,3297,3303,114,111,110,59,1,327,100,105,108,59,1,325,59,1,1053,4,3,103,115,119,3314,3380,3415,97,116,105,118,101,4,3,77,84,86,3327,3340,3365,101,100,105,117,109,83,112,97,99,101,59,1,8203,104,105,4,2,99,110,3348,3357,107,83,112,97,99,101,59,1,8203,83,112,97,99,101,59,1,8203,101,114,121,84,104,105,110,83,112,97,99,101,59,1,8203,116,101,100,4,2,71,76,3389,3405,114,101,97,116,101,114,71,114,101,97,116,101,114,59,1,8811,101,115,115,76,101,115,115,59,1,8810,76,105,110,101,59,1,10,114,59,3,55349,56593,4,4,66,110,112,116,3437,3444,3460,3464,114,101,97,107,59,1,8288,66,114,101,97,107,105,110,103,83,112,97,99,101,59,1,160,102,59,1,8469,4,13,59,67,68,69,71,72,76,78,80,82,83,84,86,3492,3494,3517,3536,3578,3657,3685,3784,3823,3860,3915,4066,4107,1,10988,4,2,111,117,3500,3510,110,103,114,117,101,110,116,59,1,8802,112,67,97,112,59,1,8813,111,117,98,108,101,86,101,114,116,105,99,97,108,66,97,114,59,1,8742,4,3,108,113,120,3544,3552,3571,101,109,101,110,116,59,1,8713,117,97,108,4,2,59,84,3561,3563,1,8800,105,108,100,101,59,3,8770,824,105,115,116,115,59,1,8708,114,101,97,116,101,114,4,7,59,69,70,71,76,83,84,3600,3602,3609,3621,3631,3637,3650,1,8815,113,117,97,108,59,1,8817,117,108,108,69,113,117,97,108,59,3,8807,824,114,101,97,116,101,114,59,3,8811,824,101,115,115,59,1,8825,108,97,110,116,69,113,117,97,108,59,3,10878,824,105,108,100,101,59,1,8821,117,109,112,4,2,68,69,3666,3677,111,119,110,72,117,109,112,59,3,8782,824,113,117,97,108,59,3,8783,824,101,4,2,102,115,3692,3724,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3709,3711,3717,1,8938,97,114,59,3,10703,824,113,117,97,108,59,1,8940,115,4,6,59,69,71,76,83,84,3739,3741,3748,3757,3764,3777,1,8814,113,117,97,108,59,1,8816,114,101,97,116,101,114,59,1,8824,101,115,115,59,3,8810,824,108,97,110,116,69,113,117,97,108,59,3,10877,824,105,108,100,101,59,1,8820,101,115,116,101,100,4,2,71,76,3795,3812,114,101,97,116,101,114,71,114,101,97,116,101,114,59,3,10914,824,101,115,115,76,101,115,115,59,3,10913,824,114,101,99,101,100,101,115,4,3,59,69,83,3838,3840,3848,1,8832,113,117,97,108,59,3,10927,824,108,97,110,116,69,113,117,97,108,59,1,8928,4,2,101,105,3866,3881,118,101,114,115,101,69,108,101,109,101,110,116,59,1,8716,103,104,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3900,3902,3908,1,8939,97,114,59,3,10704,824,113,117,97,108,59,1,8941,4,2,113,117,3921,3973,117,97,114,101,83,117,4,2,98,112,3933,3952,115,101,116,4,2,59,69,3942,3945,3,8847,824,113,117,97,108,59,1,8930,101,114,115,101,116,4,2,59,69,3963,3966,3,8848,824,113,117,97,108,59,1,8931,4,3,98,99,112,3981,4e3,4045,115,101,116,4,2,59,69,3990,3993,3,8834,8402,113,117,97,108,59,1,8840,99,101,101,100,115,4,4,59,69,83,84,4015,4017,4025,4037,1,8833,113,117,97,108,59,3,10928,824,108,97,110,116,69,113,117,97,108,59,1,8929,105,108,100,101,59,3,8831,824,101,114,115,101,116,4,2,59,69,4056,4059,3,8835,8402,113,117,97,108,59,1,8841,105,108,100,101,4,4,59,69,70,84,4080,4082,4089,4100,1,8769,113,117,97,108,59,1,8772,117,108,108,69,113,117,97,108,59,1,8775,105,108,100,101,59,1,8777,101,114,116,105,99,97,108,66,97,114,59,1,8740,99,114,59,3,55349,56489,105,108,100,101,5,209,1,59,4135,1,209,59,1,925,4,14,69,97,99,100,102,103,109,111,112,114,115,116,117,118,4170,4176,4187,4205,4212,4217,4228,4253,4259,4292,4295,4316,4337,4346,108,105,103,59,1,338,99,117,116,101,5,211,1,59,4185,1,211,4,2,105,121,4193,4202,114,99,5,212,1,59,4200,1,212,59,1,1054,98,108,97,99,59,1,336,114,59,3,55349,56594,114,97,118,101,5,210,1,59,4226,1,210,4,3,97,101,105,4236,4241,4246,99,114,59,1,332,103,97,59,1,937,99,114,111,110,59,1,927,112,102,59,3,55349,56646,101,110,67,117,114,108,121,4,2,68,81,4272,4285,111,117,98,108,101,81,117,111,116,101,59,1,8220,117,111,116,101,59,1,8216,59,1,10836,4,2,99,108,4301,4306,114,59,3,55349,56490,97,115,104,5,216,1,59,4314,1,216,105,4,2,108,109,4323,4332,100,101,5,213,1,59,4330,1,213,101,115,59,1,10807,109,108,5,214,1,59,4344,1,214,101,114,4,2,66,80,4354,4380,4,2,97,114,4360,4364,114,59,1,8254,97,99,4,2,101,107,4372,4375,59,1,9182,101,116,59,1,9140,97,114,101,110,116,104,101,115,105,115,59,1,9180,4,9,97,99,102,104,105,108,111,114,115,4413,4422,4426,4431,4435,4438,4448,4471,4561,114,116,105,97,108,68,59,1,8706,121,59,1,1055,114,59,3,55349,56595,105,59,1,934,59,1,928,117,115,77,105,110,117,115,59,1,177,4,2,105,112,4454,4467,110,99,97,114,101,112,108,97,110,101,59,1,8460,102,59,1,8473,4,4,59,101,105,111,4481,4483,4526,4531,1,10939,99,101,100,101,115,4,4,59,69,83,84,4498,4500,4507,4519,1,8826,113,117,97,108,59,1,10927,108,97,110,116,69,113,117,97,108,59,1,8828,105,108,100,101,59,1,8830,109,101,59,1,8243,4,2,100,112,4537,4543,117,99,116,59,1,8719,111,114,116,105,111,110,4,2,59,97,4555,4557,1,8759,108,59,1,8733,4,2,99,105,4567,4572,114,59,3,55349,56491,59,1,936,4,4,85,102,111,115,4585,4594,4599,4604,79,84,5,34,1,59,4592,1,34,114,59,3,55349,56596,112,102,59,1,8474,99,114,59,3,55349,56492,4,12,66,69,97,99,101,102,104,105,111,114,115,117,4636,4642,4650,4681,4704,4763,4767,4771,5047,5069,5081,5094,97,114,114,59,1,10512,71,5,174,1,59,4648,1,174,4,3,99,110,114,4658,4664,4668,117,116,101,59,1,340,103,59,1,10219,114,4,2,59,116,4675,4677,1,8608,108,59,1,10518,4,3,97,101,121,4689,4695,4701,114,111,110,59,1,344,100,105,108,59,1,342,59,1,1056,4,2,59,118,4710,4712,1,8476,101,114,115,101,4,2,69,85,4722,4748,4,2,108,113,4728,4736,101,109,101,110,116,59,1,8715,117,105,108,105,98,114,105,117,109,59,1,8651,112,69,113,117,105,108,105,98,114,105,117,109,59,1,10607,114,59,1,8476,111,59,1,929,103,104,116,4,8,65,67,68,70,84,85,86,97,4792,4840,4849,4905,4912,4972,5022,5040,4,2,110,114,4798,4811,103,108,101,66,114,97,99,107,101,116,59,1,10217,114,111,119,4,3,59,66,76,4822,4824,4829,1,8594,97,114,59,1,8677,101,102,116,65,114,114,111,119,59,1,8644,101,105,108,105,110,103,59,1,8969,111,4,2,117,119,4856,4869,98,108,101,66,114,97,99,107,101,116,59,1,10215,110,4,2,84,86,4876,4887,101,101,86,101,99,116,111,114,59,1,10589,101,99,116,111,114,4,2,59,66,4898,4900,1,8642,97,114,59,1,10581,108,111,111,114,59,1,8971,4,2,101,114,4918,4944,101,4,3,59,65,86,4927,4929,4936,1,8866,114,114,111,119,59,1,8614,101,99,116,111,114,59,1,10587,105,97,110,103,108,101,4,3,59,66,69,4958,4960,4965,1,8883,97,114,59,1,10704,113,117,97,108,59,1,8885,112,4,3,68,84,86,4981,4993,5004,111,119,110,86,101,99,116,111,114,59,1,10575,101,101,86,101,99,116,111,114,59,1,10588,101,99,116,111,114,4,2,59,66,5015,5017,1,8638,97,114,59,1,10580,101,99,116,111,114,4,2,59,66,5033,5035,1,8640,97,114,59,1,10579,114,114,111,119,59,1,8658,4,2,112,117,5053,5057,102,59,1,8477,110,100,73,109,112,108,105,101,115,59,1,10608,105,103,104,116,97,114,114,111,119,59,1,8667,4,2,99,104,5087,5091,114,59,1,8475,59,1,8625,108,101,68,101,108,97,121,101,100,59,1,10740,4,13,72,79,97,99,102,104,105,109,111,113,115,116,117,5134,5150,5157,5164,5198,5203,5259,5265,5277,5283,5374,5380,5385,4,2,67,99,5140,5146,72,99,121,59,1,1065,121,59,1,1064,70,84,99,121,59,1,1068,99,117,116,101,59,1,346,4,5,59,97,101,105,121,5176,5178,5184,5190,5195,1,10940,114,111,110,59,1,352,100,105,108,59,1,350,114,99,59,1,348,59,1,1057,114,59,3,55349,56598,111,114,116,4,4,68,76,82,85,5216,5227,5238,5250,111,119,110,65,114,114,111,119,59,1,8595,101,102,116,65,114,114,111,119,59,1,8592,105,103,104,116,65,114,114,111,119,59,1,8594,112,65,114,114,111,119,59,1,8593,103,109,97,59,1,931,97,108,108,67,105,114,99,108,101,59,1,8728,112,102,59,3,55349,56650,4,2,114,117,5289,5293,116,59,1,8730,97,114,101,4,4,59,73,83,85,5306,5308,5322,5367,1,9633,110,116,101,114,115,101,99,116,105,111,110,59,1,8851,117,4,2,98,112,5329,5347,115,101,116,4,2,59,69,5338,5340,1,8847,113,117,97,108,59,1,8849,101,114,115,101,116,4,2,59,69,5358,5360,1,8848,113,117,97,108,59,1,8850,110,105,111,110,59,1,8852,99,114,59,3,55349,56494,97,114,59,1,8902,4,4,98,99,109,112,5395,5420,5475,5478,4,2,59,115,5401,5403,1,8912,101,116,4,2,59,69,5411,5413,1,8912,113,117,97,108,59,1,8838,4,2,99,104,5426,5468,101,101,100,115,4,4,59,69,83,84,5440,5442,5449,5461,1,8827,113,117,97,108,59,1,10928,108,97,110,116,69,113,117,97,108,59,1,8829,105,108,100,101,59,1,8831,84,104,97,116,59,1,8715,59,1,8721,4,3,59,101,115,5486,5488,5507,1,8913,114,115,101,116,4,2,59,69,5498,5500,1,8835,113,117,97,108,59,1,8839,101,116,59,1,8913,4,11,72,82,83,97,99,102,104,105,111,114,115,5536,5546,5552,5567,5579,5602,5607,5655,5695,5701,5711,79,82,78,5,222,1,59,5544,1,222,65,68,69,59,1,8482,4,2,72,99,5558,5563,99,121,59,1,1035,121,59,1,1062,4,2,98,117,5573,5576,59,1,9,59,1,932,4,3,97,101,121,5587,5593,5599,114,111,110,59,1,356,100,105,108,59,1,354,59,1,1058,114,59,3,55349,56599,4,2,101,105,5613,5631,4,2,114,116,5619,5627,101,102,111,114,101,59,1,8756,97,59,1,920,4,2,99,110,5637,5647,107,83,112,97,99,101,59,3,8287,8202,83,112,97,99,101,59,1,8201,108,100,101,4,4,59,69,70,84,5668,5670,5677,5688,1,8764,113,117,97,108,59,1,8771,117,108,108,69,113,117,97,108,59,1,8773,105,108,100,101,59,1,8776,112,102,59,3,55349,56651,105,112,108,101,68,111,116,59,1,8411,4,2,99,116,5717,5722,114,59,3,55349,56495,114,111,107,59,1,358,4,14,97,98,99,100,102,103,109,110,111,112,114,115,116,117,5758,5789,5805,5823,5830,5835,5846,5852,5921,5937,6089,6095,6101,6108,4,2,99,114,5764,5774,117,116,101,5,218,1,59,5772,1,218,114,4,2,59,111,5781,5783,1,8607,99,105,114,59,1,10569,114,4,2,99,101,5796,5800,121,59,1,1038,118,101,59,1,364,4,2,105,121,5811,5820,114,99,5,219,1,59,5818,1,219,59,1,1059,98,108,97,99,59,1,368,114,59,3,55349,56600,114,97,118,101,5,217,1,59,5844,1,217,97,99,114,59,1,362,4,2,100,105,5858,5905,101,114,4,2,66,80,5866,5892,4,2,97,114,5872,5876,114,59,1,95,97,99,4,2,101,107,5884,5887,59,1,9183,101,116,59,1,9141,97,114,101,110,116,104,101,115,105,115,59,1,9181,111,110,4,2,59,80,5913,5915,1,8899,108,117,115,59,1,8846,4,2,103,112,5927,5932,111,110,59,1,370,102,59,3,55349,56652,4,8,65,68,69,84,97,100,112,115,5955,5985,5996,6009,6026,6033,6044,6075,114,114,111,119,4,3,59,66,68,5967,5969,5974,1,8593,97,114,59,1,10514,111,119,110,65,114,114,111,119,59,1,8645,111,119,110,65,114,114,111,119,59,1,8597,113,117,105,108,105,98,114,105,117,109,59,1,10606,101,101,4,2,59,65,6017,6019,1,8869,114,114,111,119,59,1,8613,114,114,111,119,59,1,8657,111,119,110,97,114,114,111,119,59,1,8661,101,114,4,2,76,82,6052,6063,101,102,116,65,114,114,111,119,59,1,8598,105,103,104,116,65,114,114,111,119,59,1,8599,105,4,2,59,108,6082,6084,1,978,111,110,59,1,933,105,110,103,59,1,366,99,114,59,3,55349,56496,105,108,100,101,59,1,360,109,108,5,220,1,59,6115,1,220,4,9,68,98,99,100,101,102,111,115,118,6137,6143,6148,6152,6166,6250,6255,6261,6267,97,115,104,59,1,8875,97,114,59,1,10987,121,59,1,1042,97,115,104,4,2,59,108,6161,6163,1,8873,59,1,10982,4,2,101,114,6172,6175,59,1,8897,4,3,98,116,121,6183,6188,6238,97,114,59,1,8214,4,2,59,105,6194,6196,1,8214,99,97,108,4,4,66,76,83,84,6209,6214,6220,6231,97,114,59,1,8739,105,110,101,59,1,124,101,112,97,114,97,116,111,114,59,1,10072,105,108,100,101,59,1,8768,84,104,105,110,83,112,97,99,101,59,1,8202,114,59,3,55349,56601,112,102,59,3,55349,56653,99,114,59,3,55349,56497,100,97,115,104,59,1,8874,4,5,99,101,102,111,115,6286,6292,6298,6303,6309,105,114,99,59,1,372,100,103,101,59,1,8896,114,59,3,55349,56602,112,102,59,3,55349,56654,99,114,59,3,55349,56498,4,4,102,105,111,115,6325,6330,6333,6339,114,59,3,55349,56603,59,1,926,112,102,59,3,55349,56655,99,114,59,3,55349,56499,4,9,65,73,85,97,99,102,111,115,117,6365,6370,6375,6380,6391,6405,6410,6416,6422,99,121,59,1,1071,99,121,59,1,1031,99,121,59,1,1070,99,117,116,101,5,221,1,59,6389,1,221,4,2,105,121,6397,6402,114,99,59,1,374,59,1,1067,114,59,3,55349,56604,112,102,59,3,55349,56656,99,114,59,3,55349,56500,109,108,59,1,376,4,8,72,97,99,100,101,102,111,115,6445,6450,6457,6472,6477,6501,6505,6510,99,121,59,1,1046,99,117,116,101,59,1,377,4,2,97,121,6463,6469,114,111,110,59,1,381,59,1,1047,111,116,59,1,379,4,2,114,116,6483,6497,111,87,105,100,116,104,83,112,97,99,101,59,1,8203,97,59,1,918,114,59,1,8488,112,102,59,1,8484,99,114,59,3,55349,56501,4,16,97,98,99,101,102,103,108,109,110,111,112,114,115,116,117,119,6550,6561,6568,6612,6622,6634,6645,6672,6699,6854,6870,6923,6933,6963,6974,6983,99,117,116,101,5,225,1,59,6559,1,225,114,101,118,101,59,1,259,4,6,59,69,100,105,117,121,6582,6584,6588,6591,6600,6609,1,8766,59,3,8766,819,59,1,8767,114,99,5,226,1,59,6598,1,226,116,101,5,180,1,59,6607,1,180,59,1,1072,108,105,103,5,230,1,59,6620,1,230,4,2,59,114,6628,6630,1,8289,59,3,55349,56606,114,97,118,101,5,224,1,59,6643,1,224,4,2,101,112,6651,6667,4,2,102,112,6657,6663,115,121,109,59,1,8501,104,59,1,8501,104,97,59,1,945,4,2,97,112,6678,6692,4,2,99,108,6684,6688,114,59,1,257,103,59,1,10815,5,38,1,59,6697,1,38,4,2,100,103,6705,6737,4,5,59,97,100,115,118,6717,6719,6724,6727,6734,1,8743,110,100,59,1,10837,59,1,10844,108,111,112,101,59,1,10840,59,1,10842,4,7,59,101,108,109,114,115,122,6753,6755,6758,6762,6814,6835,6848,1,8736,59,1,10660,101,59,1,8736,115,100,4,2,59,97,6770,6772,1,8737,4,8,97,98,99,100,101,102,103,104,6790,6793,6796,6799,6802,6805,6808,6811,59,1,10664,59,1,10665,59,1,10666,59,1,10667,59,1,10668,59,1,10669,59,1,10670,59,1,10671,116,4,2,59,118,6821,6823,1,8735,98,4,2,59,100,6830,6832,1,8894,59,1,10653,4,2,112,116,6841,6845,104,59,1,8738,59,1,197,97,114,114,59,1,9084,4,2,103,112,6860,6865,111,110,59,1,261,102,59,3,55349,56658,4,7,59,69,97,101,105,111,112,6886,6888,6891,6897,6900,6904,6908,1,8776,59,1,10864,99,105,114,59,1,10863,59,1,8778,100,59,1,8779,115,59,1,39,114,111,120,4,2,59,101,6917,6919,1,8776,113,59,1,8778,105,110,103,5,229,1,59,6931,1,229,4,3,99,116,121,6941,6946,6949,114,59,3,55349,56502,59,1,42,109,112,4,2,59,101,6957,6959,1,8776,113,59,1,8781,105,108,100,101,5,227,1,59,6972,1,227,109,108,5,228,1,59,6981,1,228,4,2,99,105,6989,6997,111,110,105,110,116,59,1,8755,110,116,59,1,10769,4,16,78,97,98,99,100,101,102,105,107,108,110,111,112,114,115,117,7036,7041,7119,7135,7149,7155,7219,7224,7347,7354,7463,7489,7786,7793,7814,7866,111,116,59,1,10989,4,2,99,114,7047,7094,107,4,4,99,101,112,115,7058,7064,7073,7080,111,110,103,59,1,8780,112,115,105,108,111,110,59,1,1014,114,105,109,101,59,1,8245,105,109,4,2,59,101,7088,7090,1,8765,113,59,1,8909,4,2,118,119,7100,7105,101,101,59,1,8893,101,100,4,2,59,103,7113,7115,1,8965,101,59,1,8965,114,107,4,2,59,116,7127,7129,1,9141,98,114,107,59,1,9142,4,2,111,121,7141,7146,110,103,59,1,8780,59,1,1073,113,117,111,59,1,8222,4,5,99,109,112,114,116,7167,7181,7188,7193,7199,97,117,115,4,2,59,101,7176,7178,1,8757,59,1,8757,112,116,121,118,59,1,10672,115,105,59,1,1014,110,111,117,59,1,8492,4,3,97,104,119,7207,7210,7213,59,1,946,59,1,8502,101,101,110,59,1,8812,114,59,3,55349,56607,103,4,7,99,111,115,116,117,118,119,7241,7262,7288,7305,7328,7335,7340,4,3,97,105,117,7249,7253,7258,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,4,3,100,112,116,7270,7275,7281,111,116,59,1,10752,108,117,115,59,1,10753,105,109,101,115,59,1,10754,4,2,113,116,7294,7300,99,117,112,59,1,10758,97,114,59,1,9733,114,105,97,110,103,108,101,4,2,100,117,7318,7324,111,119,110,59,1,9661,112,59,1,9651,112,108,117,115,59,1,10756,101,101,59,1,8897,101,100,103,101,59,1,8896,97,114,111,119,59,1,10509,4,3,97,107,111,7362,7436,7458,4,2,99,110,7368,7432,107,4,3,108,115,116,7377,7386,7394,111,122,101,110,103,101,59,1,10731,113,117,97,114,101,59,1,9642,114,105,97,110,103,108,101,4,4,59,100,108,114,7411,7413,7419,7425,1,9652,111,119,110,59,1,9662,101,102,116,59,1,9666,105,103,104,116,59,1,9656,107,59,1,9251,4,2,49,51,7442,7454,4,2,50,52,7448,7451,59,1,9618,59,1,9617,52,59,1,9619,99,107,59,1,9608,4,2,101,111,7469,7485,4,2,59,113,7475,7478,3,61,8421,117,105,118,59,3,8801,8421,116,59,1,8976,4,4,112,116,119,120,7499,7504,7517,7523,102,59,3,55349,56659,4,2,59,116,7510,7512,1,8869,111,109,59,1,8869,116,105,101,59,1,8904,4,12,68,72,85,86,98,100,104,109,112,116,117,118,7549,7571,7597,7619,7655,7660,7682,7708,7715,7721,7728,7750,4,4,76,82,108,114,7559,7562,7565,7568,59,1,9559,59,1,9556,59,1,9558,59,1,9555,4,5,59,68,85,100,117,7583,7585,7588,7591,7594,1,9552,59,1,9574,59,1,9577,59,1,9572,59,1,9575,4,4,76,82,108,114,7607,7610,7613,7616,59,1,9565,59,1,9562,59,1,9564,59,1,9561,4,7,59,72,76,82,104,108,114,7635,7637,7640,7643,7646,7649,7652,1,9553,59,1,9580,59,1,9571,59,1,9568,59,1,9579,59,1,9570,59,1,9567,111,120,59,1,10697,4,4,76,82,108,114,7670,7673,7676,7679,59,1,9557,59,1,9554,59,1,9488,59,1,9484,4,5,59,68,85,100,117,7694,7696,7699,7702,7705,1,9472,59,1,9573,59,1,9576,59,1,9516,59,1,9524,105,110,117,115,59,1,8863,108,117,115,59,1,8862,105,109,101,115,59,1,8864,4,4,76,82,108,114,7738,7741,7744,7747,59,1,9563,59,1,9560,59,1,9496,59,1,9492,4,7,59,72,76,82,104,108,114,7766,7768,7771,7774,7777,7780,7783,1,9474,59,1,9578,59,1,9569,59,1,9566,59,1,9532,59,1,9508,59,1,9500,114,105,109,101,59,1,8245,4,2,101,118,7799,7804,118,101,59,1,728,98,97,114,5,166,1,59,7812,1,166,4,4,99,101,105,111,7824,7829,7834,7846,114,59,3,55349,56503,109,105,59,1,8271,109,4,2,59,101,7841,7843,1,8765,59,1,8909,108,4,3,59,98,104,7855,7857,7860,1,92,59,1,10693,115,117,98,59,1,10184,4,2,108,109,7872,7885,108,4,2,59,101,7879,7881,1,8226,116,59,1,8226,112,4,3,59,69,101,7894,7896,7899,1,8782,59,1,10926,4,2,59,113,7905,7907,1,8783,59,1,8783,4,15,97,99,100,101,102,104,105,108,111,114,115,116,117,119,121,7942,8021,8075,8080,8121,8126,8157,8279,8295,8430,8446,8485,8491,8707,8726,4,3,99,112,114,7950,7956,8007,117,116,101,59,1,263,4,6,59,97,98,99,100,115,7970,7972,7977,7984,7998,8003,1,8745,110,100,59,1,10820,114,99,117,112,59,1,10825,4,2,97,117,7990,7994,112,59,1,10827,112,59,1,10823,111,116,59,1,10816,59,3,8745,65024,4,2,101,111,8013,8017,116,59,1,8257,110,59,1,711,4,4,97,101,105,117,8031,8046,8056,8061,4,2,112,114,8037,8041,115,59,1,10829,111,110,59,1,269,100,105,108,5,231,1,59,8054,1,231,114,99,59,1,265,112,115,4,2,59,115,8069,8071,1,10828,109,59,1,10832,111,116,59,1,267,4,3,100,109,110,8088,8097,8104,105,108,5,184,1,59,8095,1,184,112,116,121,118,59,1,10674,116,5,162,2,59,101,8112,8114,1,162,114,100,111,116,59,1,183,114,59,3,55349,56608,4,3,99,101,105,8134,8138,8154,121,59,1,1095,99,107,4,2,59,109,8146,8148,1,10003,97,114,107,59,1,10003,59,1,967,114,4,7,59,69,99,101,102,109,115,8174,8176,8179,8258,8261,8268,8273,1,9675,59,1,10691,4,3,59,101,108,8187,8189,8193,1,710,113,59,1,8791,101,4,2,97,100,8200,8223,114,114,111,119,4,2,108,114,8210,8216,101,102,116,59,1,8634,105,103,104,116,59,1,8635,4,5,82,83,97,99,100,8235,8238,8241,8246,8252,59,1,174,59,1,9416,115,116,59,1,8859,105,114,99,59,1,8858,97,115,104,59,1,8861,59,1,8791,110,105,110,116,59,1,10768,105,100,59,1,10991,99,105,114,59,1,10690,117,98,115,4,2,59,117,8288,8290,1,9827,105,116,59,1,9827,4,4,108,109,110,112,8305,8326,8376,8400,111,110,4,2,59,101,8313,8315,1,58,4,2,59,113,8321,8323,1,8788,59,1,8788,4,2,109,112,8332,8344,97,4,2,59,116,8339,8341,1,44,59,1,64,4,3,59,102,108,8352,8354,8358,1,8705,110,59,1,8728,101,4,2,109,120,8365,8371,101,110,116,59,1,8705,101,115,59,1,8450,4,2,103,105,8382,8395,4,2,59,100,8388,8390,1,8773,111,116,59,1,10861,110,116,59,1,8750,4,3,102,114,121,8408,8412,8417,59,3,55349,56660,111,100,59,1,8720,5,169,2,59,115,8424,8426,1,169,114,59,1,8471,4,2,97,111,8436,8441,114,114,59,1,8629,115,115,59,1,10007,4,2,99,117,8452,8457,114,59,3,55349,56504,4,2,98,112,8463,8474,4,2,59,101,8469,8471,1,10959,59,1,10961,4,2,59,101,8480,8482,1,10960,59,1,10962,100,111,116,59,1,8943,4,7,100,101,108,112,114,118,119,8507,8522,8536,8550,8600,8697,8702,97,114,114,4,2,108,114,8516,8519,59,1,10552,59,1,10549,4,2,112,115,8528,8532,114,59,1,8926,99,59,1,8927,97,114,114,4,2,59,112,8545,8547,1,8630,59,1,10557,4,6,59,98,99,100,111,115,8564,8566,8573,8587,8592,8596,1,8746,114,99,97,112,59,1,10824,4,2,97,117,8579,8583,112,59,1,10822,112,59,1,10826,111,116,59,1,8845,114,59,1,10821,59,3,8746,65024,4,4,97,108,114,118,8610,8623,8663,8672,114,114,4,2,59,109,8618,8620,1,8631,59,1,10556,121,4,3,101,118,119,8632,8651,8656,113,4,2,112,115,8639,8645,114,101,99,59,1,8926,117,99,99,59,1,8927,101,101,59,1,8910,101,100,103,101,59,1,8911,101,110,5,164,1,59,8670,1,164,101,97,114,114,111,119,4,2,108,114,8684,8690,101,102,116,59,1,8630,105,103,104,116,59,1,8631,101,101,59,1,8910,101,100,59,1,8911,4,2,99,105,8713,8721,111,110,105,110,116,59,1,8754,110,116,59,1,8753,108,99,116,121,59,1,9005,4,19,65,72,97,98,99,100,101,102,104,105,106,108,111,114,115,116,117,119,122,8773,8778,8783,8821,8839,8854,8887,8914,8930,8944,9036,9041,9058,9197,9227,9258,9281,9297,9305,114,114,59,1,8659,97,114,59,1,10597,4,4,103,108,114,115,8793,8799,8805,8809,103,101,114,59,1,8224,101,116,104,59,1,8504,114,59,1,8595,104,4,2,59,118,8816,8818,1,8208,59,1,8867,4,2,107,108,8827,8834,97,114,111,119,59,1,10511,97,99,59,1,733,4,2,97,121,8845,8851,114,111,110,59,1,271,59,1,1076,4,3,59,97,111,8862,8864,8880,1,8518,4,2,103,114,8870,8876,103,101,114,59,1,8225,114,59,1,8650,116,115,101,113,59,1,10871,4,3,103,108,109,8895,8902,8907,5,176,1,59,8900,1,176,116,97,59,1,948,112,116,121,118,59,1,10673,4,2,105,114,8920,8926,115,104,116,59,1,10623,59,3,55349,56609,97,114,4,2,108,114,8938,8941,59,1,8643,59,1,8642,4,5,97,101,103,115,118,8956,8986,8989,8996,9001,109,4,3,59,111,115,8965,8967,8983,1,8900,110,100,4,2,59,115,8975,8977,1,8900,117,105,116,59,1,9830,59,1,9830,59,1,168,97,109,109,97,59,1,989,105,110,59,1,8946,4,3,59,105,111,9009,9011,9031,1,247,100,101,5,247,2,59,111,9020,9022,1,247,110,116,105,109,101,115,59,1,8903,110,120,59,1,8903,99,121,59,1,1106,99,4,2,111,114,9048,9053,114,110,59,1,8990,111,112,59,1,8973,4,5,108,112,116,117,119,9070,9076,9081,9130,9144,108,97,114,59,1,36,102,59,3,55349,56661,4,5,59,101,109,112,115,9093,9095,9109,9116,9122,1,729,113,4,2,59,100,9102,9104,1,8784,111,116,59,1,8785,105,110,117,115,59,1,8760,108,117,115,59,1,8724,113,117,97,114,101,59,1,8865,98,108,101,98,97,114,119,101,100,103,101,59,1,8966,110,4,3,97,100,104,9153,9160,9172,114,114,111,119,59,1,8595,111,119,110,97,114,114,111,119,115,59,1,8650,97,114,112,111,111,110,4,2,108,114,9184,9190,101,102,116,59,1,8643,105,103,104,116,59,1,8642,4,2,98,99,9203,9211,107,97,114,111,119,59,1,10512,4,2,111,114,9217,9222,114,110,59,1,8991,111,112,59,1,8972,4,3,99,111,116,9235,9248,9252,4,2,114,121,9241,9245,59,3,55349,56505,59,1,1109,108,59,1,10742,114,111,107,59,1,273,4,2,100,114,9264,9269,111,116,59,1,8945,105,4,2,59,102,9276,9278,1,9663,59,1,9662,4,2,97,104,9287,9292,114,114,59,1,8693,97,114,59,1,10607,97,110,103,108,101,59,1,10662,4,2,99,105,9311,9315,121,59,1,1119,103,114,97,114,114,59,1,10239,4,18,68,97,99,100,101,102,103,108,109,110,111,112,113,114,115,116,117,120,9361,9376,9398,9439,9444,9447,9462,9495,9531,9585,9598,9614,9659,9755,9771,9792,9808,9826,4,2,68,111,9367,9372,111,116,59,1,10871,116,59,1,8785,4,2,99,115,9382,9392,117,116,101,5,233,1,59,9390,1,233,116,101,114,59,1,10862,4,4,97,105,111,121,9408,9414,9430,9436,114,111,110,59,1,283,114,4,2,59,99,9421,9423,1,8790,5,234,1,59,9428,1,234,108,111,110,59,1,8789,59,1,1101,111,116,59,1,279,59,1,8519,4,2,68,114,9453,9458,111,116,59,1,8786,59,3,55349,56610,4,3,59,114,115,9470,9472,9482,1,10906,97,118,101,5,232,1,59,9480,1,232,4,2,59,100,9488,9490,1,10902,111,116,59,1,10904,4,4,59,105,108,115,9505,9507,9515,9518,1,10905,110,116,101,114,115,59,1,9191,59,1,8467,4,2,59,100,9524,9526,1,10901,111,116,59,1,10903,4,3,97,112,115,9539,9544,9564,99,114,59,1,275,116,121,4,3,59,115,118,9554,9556,9561,1,8709,101,116,59,1,8709,59,1,8709,112,4,2,49,59,9571,9583,4,2,51,52,9577,9580,59,1,8196,59,1,8197,1,8195,4,2,103,115,9591,9594,59,1,331,112,59,1,8194,4,2,103,112,9604,9609,111,110,59,1,281,102,59,3,55349,56662,4,3,97,108,115,9622,9635,9640,114,4,2,59,115,9629,9631,1,8917,108,59,1,10723,117,115,59,1,10865,105,4,3,59,108,118,9649,9651,9656,1,949,111,110,59,1,949,59,1,1013,4,4,99,115,117,118,9669,9686,9716,9747,4,2,105,111,9675,9680,114,99,59,1,8790,108,111,110,59,1,8789,4,2,105,108,9692,9696,109,59,1,8770,97,110,116,4,2,103,108,9705,9710,116,114,59,1,10902,101,115,115,59,1,10901,4,3,97,101,105,9724,9729,9734,108,115,59,1,61,115,116,59,1,8799,118,4,2,59,68,9741,9743,1,8801,68,59,1,10872,112,97,114,115,108,59,1,10725,4,2,68,97,9761,9766,111,116,59,1,8787,114,114,59,1,10609,4,3,99,100,105,9779,9783,9788,114,59,1,8495,111,116,59,1,8784,109,59,1,8770,4,2,97,104,9798,9801,59,1,951,5,240,1,59,9806,1,240,4,2,109,114,9814,9822,108,5,235,1,59,9820,1,235,111,59,1,8364,4,3,99,105,112,9834,9838,9843,108,59,1,33,115,116,59,1,8707,4,2,101,111,9849,9859,99,116,97,116,105,111,110,59,1,8496,110,101,110,116,105,97,108,101,59,1,8519,4,12,97,99,101,102,105,106,108,110,111,112,114,115,9896,9910,9914,9921,9954,9960,9967,9989,9994,10027,10036,10164,108,108,105,110,103,100,111,116,115,101,113,59,1,8786,121,59,1,1092,109,97,108,101,59,1,9792,4,3,105,108,114,9929,9935,9950,108,105,103,59,1,64259,4,2,105,108,9941,9945,103,59,1,64256,105,103,59,1,64260,59,3,55349,56611,108,105,103,59,1,64257,108,105,103,59,3,102,106,4,3,97,108,116,9975,9979,9984,116,59,1,9837,105,103,59,1,64258,110,115,59,1,9649,111,102,59,1,402,4,2,112,114,1e4,10005,102,59,3,55349,56663,4,2,97,107,10011,10016,108,108,59,1,8704,4,2,59,118,10022,10024,1,8916,59,1,10969,97,114,116,105,110,116,59,1,10765,4,2,97,111,10042,10159,4,2,99,115,10048,10155,4,6,49,50,51,52,53,55,10062,10102,10114,10135,10139,10151,4,6,50,51,52,53,54,56,10076,10083,10086,10093,10096,10099,5,189,1,59,10081,1,189,59,1,8531,5,188,1,59,10091,1,188,59,1,8533,59,1,8537,59,1,8539,4,2,51,53,10108,10111,59,1,8532,59,1,8534,4,3,52,53,56,10122,10129,10132,5,190,1,59,10127,1,190,59,1,8535,59,1,8540,53,59,1,8536,4,2,54,56,10145,10148,59,1,8538,59,1,8541,56,59,1,8542,108,59,1,8260,119,110,59,1,8994,99,114,59,3,55349,56507,4,17,69,97,98,99,100,101,102,103,105,106,108,110,111,114,115,116,118,10206,10217,10247,10254,10268,10273,10358,10363,10374,10380,10385,10406,10458,10464,10470,10497,10610,4,2,59,108,10212,10214,1,8807,59,1,10892,4,3,99,109,112,10225,10231,10244,117,116,101,59,1,501,109,97,4,2,59,100,10239,10241,1,947,59,1,989,59,1,10886,114,101,118,101,59,1,287,4,2,105,121,10260,10265,114,99,59,1,285,59,1,1075,111,116,59,1,289,4,4,59,108,113,115,10283,10285,10288,10308,1,8805,59,1,8923,4,3,59,113,115,10296,10298,10301,1,8805,59,1,8807,108,97,110,116,59,1,10878,4,4,59,99,100,108,10318,10320,10324,10345,1,10878,99,59,1,10921,111,116,4,2,59,111,10332,10334,1,10880,4,2,59,108,10340,10342,1,10882,59,1,10884,4,2,59,101,10351,10354,3,8923,65024,115,59,1,10900,114,59,3,55349,56612,4,2,59,103,10369,10371,1,8811,59,1,8921,109,101,108,59,1,8503,99,121,59,1,1107,4,4,59,69,97,106,10395,10397,10400,10403,1,8823,59,1,10898,59,1,10917,59,1,10916,4,4,69,97,101,115,10416,10419,10434,10453,59,1,8809,112,4,2,59,112,10426,10428,1,10890,114,111,120,59,1,10890,4,2,59,113,10440,10442,1,10888,4,2,59,113,10448,10450,1,10888,59,1,8809,105,109,59,1,8935,112,102,59,3,55349,56664,97,118,101,59,1,96,4,2,99,105,10476,10480,114,59,1,8458,109,4,3,59,101,108,10489,10491,10494,1,8819,59,1,10894,59,1,10896,5,62,6,59,99,100,108,113,114,10512,10514,10527,10532,10538,10545,1,62,4,2,99,105,10520,10523,59,1,10919,114,59,1,10874,111,116,59,1,8919,80,97,114,59,1,10645,117,101,115,116,59,1,10876,4,5,97,100,101,108,115,10557,10574,10579,10599,10605,4,2,112,114,10563,10570,112,114,111,120,59,1,10886,114,59,1,10616,111,116,59,1,8919,113,4,2,108,113,10586,10592,101,115,115,59,1,8923,108,101,115,115,59,1,10892,101,115,115,59,1,8823,105,109,59,1,8819,4,2,101,110,10616,10626,114,116,110,101,113,113,59,3,8809,65024,69,59,3,8809,65024,4,10,65,97,98,99,101,102,107,111,115,121,10653,10658,10713,10718,10724,10760,10765,10786,10850,10875,114,114,59,1,8660,4,4,105,108,109,114,10668,10674,10678,10684,114,115,112,59,1,8202,102,59,1,189,105,108,116,59,1,8459,4,2,100,114,10690,10695,99,121,59,1,1098,4,3,59,99,119,10703,10705,10710,1,8596,105,114,59,1,10568,59,1,8621,97,114,59,1,8463,105,114,99,59,1,293,4,3,97,108,114,10732,10748,10754,114,116,115,4,2,59,117,10741,10743,1,9829,105,116,59,1,9829,108,105,112,59,1,8230,99,111,110,59,1,8889,114,59,3,55349,56613,115,4,2,101,119,10772,10779,97,114,111,119,59,1,10533,97,114,111,119,59,1,10534,4,5,97,109,111,112,114,10798,10803,10809,10839,10844,114,114,59,1,8703,116,104,116,59,1,8763,107,4,2,108,114,10816,10827,101,102,116,97,114,114,111,119,59,1,8617,105,103,104,116,97,114,114,111,119,59,1,8618,102,59,3,55349,56665,98,97,114,59,1,8213,4,3,99,108,116,10858,10863,10869,114,59,3,55349,56509,97,115,104,59,1,8463,114,111,107,59,1,295,4,2,98,112,10881,10887,117,108,108,59,1,8259,104,101,110,59,1,8208,4,15,97,99,101,102,103,105,106,109,110,111,112,113,115,116,117,10925,10936,10958,10977,10990,11001,11039,11045,11101,11192,11220,11226,11237,11285,11299,99,117,116,101,5,237,1,59,10934,1,237,4,3,59,105,121,10944,10946,10955,1,8291,114,99,5,238,1,59,10953,1,238,59,1,1080,4,2,99,120,10964,10968,121,59,1,1077,99,108,5,161,1,59,10975,1,161,4,2,102,114,10983,10986,59,1,8660,59,3,55349,56614,114,97,118,101,5,236,1,59,10999,1,236,4,4,59,105,110,111,11011,11013,11028,11034,1,8520,4,2,105,110,11019,11024,110,116,59,1,10764,116,59,1,8749,102,105,110,59,1,10716,116,97,59,1,8489,108,105,103,59,1,307,4,3,97,111,112,11053,11092,11096,4,3,99,103,116,11061,11065,11088,114,59,1,299,4,3,101,108,112,11073,11076,11082,59,1,8465,105,110,101,59,1,8464,97,114,116,59,1,8465,104,59,1,305,102,59,1,8887,101,100,59,1,437,4,5,59,99,102,111,116,11113,11115,11121,11136,11142,1,8712,97,114,101,59,1,8453,105,110,4,2,59,116,11129,11131,1,8734,105,101,59,1,10717,100,111,116,59,1,305,4,5,59,99,101,108,112,11154,11156,11161,11179,11186,1,8747,97,108,59,1,8890,4,2,103,114,11167,11173,101,114,115,59,1,8484,99,97,108,59,1,8890,97,114,104,107,59,1,10775,114,111,100,59,1,10812,4,4,99,103,112,116,11202,11206,11211,11216,121,59,1,1105,111,110,59,1,303,102,59,3,55349,56666,97,59,1,953,114,111,100,59,1,10812,117,101,115,116,5,191,1,59,11235,1,191,4,2,99,105,11243,11248,114,59,3,55349,56510,110,4,5,59,69,100,115,118,11261,11263,11266,11271,11282,1,8712,59,1,8953,111,116,59,1,8949,4,2,59,118,11277,11279,1,8948,59,1,8947,59,1,8712,4,2,59,105,11291,11293,1,8290,108,100,101,59,1,297,4,2,107,109,11305,11310,99,121,59,1,1110,108,5,239,1,59,11316,1,239,4,6,99,102,109,111,115,117,11332,11346,11351,11357,11363,11380,4,2,105,121,11338,11343,114,99,59,1,309,59,1,1081,114,59,3,55349,56615,97,116,104,59,1,567,112,102,59,3,55349,56667,4,2,99,101,11369,11374,114,59,3,55349,56511,114,99,121,59,1,1112,107,99,121,59,1,1108,4,8,97,99,102,103,104,106,111,115,11404,11418,11433,11438,11445,11450,11455,11461,112,112,97,4,2,59,118,11413,11415,1,954,59,1,1008,4,2,101,121,11424,11430,100,105,108,59,1,311,59,1,1082,114,59,3,55349,56616,114,101,101,110,59,1,312,99,121,59,1,1093,99,121,59,1,1116,112,102,59,3,55349,56668,99,114,59,3,55349,56512,4,23,65,66,69,72,97,98,99,100,101,102,103,104,106,108,109,110,111,112,114,115,116,117,118,11515,11538,11544,11555,11560,11721,11780,11818,11868,12136,12160,12171,12203,12208,12246,12275,12327,12509,12523,12569,12641,12732,12752,4,3,97,114,116,11523,11528,11532,114,114,59,1,8666,114,59,1,8656,97,105,108,59,1,10523,97,114,114,59,1,10510,4,2,59,103,11550,11552,1,8806,59,1,10891,97,114,59,1,10594,4,9,99,101,103,109,110,112,113,114,116,11580,11586,11594,11600,11606,11624,11627,11636,11694,117,116,101,59,1,314,109,112,116,121,118,59,1,10676,114,97,110,59,1,8466,98,100,97,59,1,955,103,4,3,59,100,108,11615,11617,11620,1,10216,59,1,10641,101,59,1,10216,59,1,10885,117,111,5,171,1,59,11634,1,171,114,4,8,59,98,102,104,108,112,115,116,11655,11657,11669,11673,11677,11681,11685,11690,1,8592,4,2,59,102,11663,11665,1,8676,115,59,1,10527,115,59,1,10525,107,59,1,8617,112,59,1,8619,108,59,1,10553,105,109,59,1,10611,108,59,1,8610,4,3,59,97,101,11702,11704,11709,1,10923,105,108,59,1,10521,4,2,59,115,11715,11717,1,10925,59,3,10925,65024,4,3,97,98,114,11729,11734,11739,114,114,59,1,10508,114,107,59,1,10098,4,2,97,107,11745,11758,99,4,2,101,107,11752,11755,59,1,123,59,1,91,4,2,101,115,11764,11767,59,1,10635,108,4,2,100,117,11774,11777,59,1,10639,59,1,10637,4,4,97,101,117,121,11790,11796,11811,11815,114,111,110,59,1,318,4,2,100,105,11802,11807,105,108,59,1,316,108,59,1,8968,98,59,1,123,59,1,1083,4,4,99,113,114,115,11828,11832,11845,11864,97,59,1,10550,117,111,4,2,59,114,11840,11842,1,8220,59,1,8222,4,2,100,117,11851,11857,104,97,114,59,1,10599,115,104,97,114,59,1,10571,104,59,1,8626,4,5,59,102,103,113,115,11880,11882,12008,12011,12031,1,8804,116,4,5,97,104,108,114,116,11895,11913,11935,11947,11996,114,114,111,119,4,2,59,116,11905,11907,1,8592,97,105,108,59,1,8610,97,114,112,111,111,110,4,2,100,117,11925,11931,111,119,110,59,1,8637,112,59,1,8636,101,102,116,97,114,114,111,119,115,59,1,8647,105,103,104,116,4,3,97,104,115,11959,11974,11984,114,114,111,119,4,2,59,115,11969,11971,1,8596,59,1,8646,97,114,112,111,111,110,115,59,1,8651,113,117,105,103,97,114,114,111,119,59,1,8621,104,114,101,101,116,105,109,101,115,59,1,8907,59,1,8922,4,3,59,113,115,12019,12021,12024,1,8804,59,1,8806,108,97,110,116,59,1,10877,4,5,59,99,100,103,115,12043,12045,12049,12070,12083,1,10877,99,59,1,10920,111,116,4,2,59,111,12057,12059,1,10879,4,2,59,114,12065,12067,1,10881,59,1,10883,4,2,59,101,12076,12079,3,8922,65024,115,59,1,10899,4,5,97,100,101,103,115,12095,12103,12108,12126,12131,112,112,114,111,120,59,1,10885,111,116,59,1,8918,113,4,2,103,113,12115,12120,116,114,59,1,8922,103,116,114,59,1,10891,116,114,59,1,8822,105,109,59,1,8818,4,3,105,108,114,12144,12150,12156,115,104,116,59,1,10620,111,111,114,59,1,8970,59,3,55349,56617,4,2,59,69,12166,12168,1,8822,59,1,10897,4,2,97,98,12177,12198,114,4,2,100,117,12184,12187,59,1,8637,4,2,59,108,12193,12195,1,8636,59,1,10602,108,107,59,1,9604,99,121,59,1,1113,4,5,59,97,99,104,116,12220,12222,12227,12235,12241,1,8810,114,114,59,1,8647,111,114,110,101,114,59,1,8990,97,114,100,59,1,10603,114,105,59,1,9722,4,2,105,111,12252,12258,100,111,116,59,1,320,117,115,116,4,2,59,97,12267,12269,1,9136,99,104,101,59,1,9136,4,4,69,97,101,115,12285,12288,12303,12322,59,1,8808,112,4,2,59,112,12295,12297,1,10889,114,111,120,59,1,10889,4,2,59,113,12309,12311,1,10887,4,2,59,113,12317,12319,1,10887,59,1,8808,105,109,59,1,8934,4,8,97,98,110,111,112,116,119,122,12345,12359,12364,12421,12446,12467,12474,12490,4,2,110,114,12351,12355,103,59,1,10220,114,59,1,8701,114,107,59,1,10214,103,4,3,108,109,114,12373,12401,12409,101,102,116,4,2,97,114,12382,12389,114,114,111,119,59,1,10229,105,103,104,116,97,114,114,111,119,59,1,10231,97,112,115,116,111,59,1,10236,105,103,104,116,97,114,114,111,119,59,1,10230,112,97,114,114,111,119,4,2,108,114,12433,12439,101,102,116,59,1,8619,105,103,104,116,59,1,8620,4,3,97,102,108,12454,12458,12462,114,59,1,10629,59,3,55349,56669,117,115,59,1,10797,105,109,101,115,59,1,10804,4,2,97,98,12480,12485,115,116,59,1,8727,97,114,59,1,95,4,3,59,101,102,12498,12500,12506,1,9674,110,103,101,59,1,9674,59,1,10731,97,114,4,2,59,108,12517,12519,1,40,116,59,1,10643,4,5,97,99,104,109,116,12535,12540,12548,12561,12564,114,114,59,1,8646,111,114,110,101,114,59,1,8991,97,114,4,2,59,100,12556,12558,1,8651,59,1,10605,59,1,8206,114,105,59,1,8895,4,6,97,99,104,105,113,116,12583,12589,12594,12597,12614,12635,113,117,111,59,1,8249,114,59,3,55349,56513,59,1,8624,109,4,3,59,101,103,12606,12608,12611,1,8818,59,1,10893,59,1,10895,4,2,98,117,12620,12623,59,1,91,111,4,2,59,114,12630,12632,1,8216,59,1,8218,114,111,107,59,1,322,5,60,8,59,99,100,104,105,108,113,114,12660,12662,12675,12680,12686,12692,12698,12705,1,60,4,2,99,105,12668,12671,59,1,10918,114,59,1,10873,111,116,59,1,8918,114,101,101,59,1,8907,109,101,115,59,1,8905,97,114,114,59,1,10614,117,101,115,116,59,1,10875,4,2,80,105,12711,12716,97,114,59,1,10646,4,3,59,101,102,12724,12726,12729,1,9667,59,1,8884,59,1,9666,114,4,2,100,117,12739,12746,115,104,97,114,59,1,10570,104,97,114,59,1,10598,4,2,101,110,12758,12768,114,116,110,101,113,113,59,3,8808,65024,69,59,3,8808,65024,4,14,68,97,99,100,101,102,104,105,108,110,111,112,115,117,12803,12809,12893,12908,12914,12928,12933,12937,13011,13025,13032,13049,13052,13069,68,111,116,59,1,8762,4,4,99,108,112,114,12819,12827,12849,12887,114,5,175,1,59,12825,1,175,4,2,101,116,12833,12836,59,1,9794,4,2,59,101,12842,12844,1,10016,115,101,59,1,10016,4,2,59,115,12855,12857,1,8614,116,111,4,4,59,100,108,117,12869,12871,12877,12883,1,8614,111,119,110,59,1,8615,101,102,116,59,1,8612,112,59,1,8613,107,101,114,59,1,9646,4,2,111,121,12899,12905,109,109,97,59,1,10793,59,1,1084,97,115,104,59,1,8212,97,115,117,114,101,100,97,110,103,108,101,59,1,8737,114,59,3,55349,56618,111,59,1,8487,4,3,99,100,110,12945,12954,12985,114,111,5,181,1,59,12952,1,181,4,4,59,97,99,100,12964,12966,12971,12976,1,8739,115,116,59,1,42,105,114,59,1,10992,111,116,5,183,1,59,12983,1,183,117,115,4,3,59,98,100,12995,12997,13e3,1,8722,59,1,8863,4,2,59,117,13006,13008,1,8760,59,1,10794,4,2,99,100,13017,13021,112,59,1,10971,114,59,1,8230,112,108,117,115,59,1,8723,4,2,100,112,13038,13044,101,108,115,59,1,8871,102,59,3,55349,56670,59,1,8723,4,2,99,116,13058,13063,114,59,3,55349,56514,112,111,115,59,1,8766,4,3,59,108,109,13077,13079,13087,1,956,116,105,109,97,112,59,1,8888,97,112,59,1,8888,4,24,71,76,82,86,97,98,99,100,101,102,103,104,105,106,108,109,111,112,114,115,116,117,118,119,13142,13165,13217,13229,13247,13330,13359,13414,13420,13508,13513,13579,13602,13626,13631,13762,13767,13855,13936,13995,14214,14285,14312,14432,4,2,103,116,13148,13152,59,3,8921,824,4,2,59,118,13158,13161,3,8811,8402,59,3,8811,824,4,3,101,108,116,13173,13200,13204,102,116,4,2,97,114,13181,13188,114,114,111,119,59,1,8653,105,103,104,116,97,114,114,111,119,59,1,8654,59,3,8920,824,4,2,59,118,13210,13213,3,8810,8402,59,3,8810,824,105,103,104,116,97,114,114,111,119,59,1,8655,4,2,68,100,13235,13241,97,115,104,59,1,8879,97,115,104,59,1,8878,4,5,98,99,110,112,116,13259,13264,13270,13275,13308,108,97,59,1,8711,117,116,101,59,1,324,103,59,3,8736,8402,4,5,59,69,105,111,112,13287,13289,13293,13298,13302,1,8777,59,3,10864,824,100,59,3,8779,824,115,59,1,329,114,111,120,59,1,8777,117,114,4,2,59,97,13316,13318,1,9838,108,4,2,59,115,13325,13327,1,9838,59,1,8469,4,2,115,117,13336,13344,112,5,160,1,59,13342,1,160,109,112,4,2,59,101,13352,13355,3,8782,824,59,3,8783,824,4,5,97,101,111,117,121,13371,13385,13391,13407,13411,4,2,112,114,13377,13380,59,1,10819,111,110,59,1,328,100,105,108,59,1,326,110,103,4,2,59,100,13399,13401,1,8775,111,116,59,3,10861,824,112,59,1,10818,59,1,1085,97,115,104,59,1,8211,4,7,59,65,97,100,113,115,120,13436,13438,13443,13466,13472,13478,13494,1,8800,114,114,59,1,8663,114,4,2,104,114,13450,13454,107,59,1,10532,4,2,59,111,13460,13462,1,8599,119,59,1,8599,111,116,59,3,8784,824,117,105,118,59,1,8802,4,2,101,105,13484,13489,97,114,59,1,10536,109,59,3,8770,824,105,115,116,4,2,59,115,13503,13505,1,8708,59,1,8708,114,59,3,55349,56619,4,4,69,101,115,116,13523,13527,13563,13568,59,3,8807,824,4,3,59,113,115,13535,13537,13559,1,8817,4,3,59,113,115,13545,13547,13551,1,8817,59,3,8807,824,108,97,110,116,59,3,10878,824,59,3,10878,824,105,109,59,1,8821,4,2,59,114,13574,13576,1,8815,59,1,8815,4,3,65,97,112,13587,13592,13597,114,114,59,1,8654,114,114,59,1,8622,97,114,59,1,10994,4,3,59,115,118,13610,13612,13623,1,8715,4,2,59,100,13618,13620,1,8956,59,1,8954,59,1,8715,99,121,59,1,1114,4,7,65,69,97,100,101,115,116,13647,13652,13656,13661,13665,13737,13742,114,114,59,1,8653,59,3,8806,824,114,114,59,1,8602,114,59,1,8229,4,4,59,102,113,115,13675,13677,13703,13725,1,8816,116,4,2,97,114,13684,13691,114,114,111,119,59,1,8602,105,103,104,116,97,114,114,111,119,59,1,8622,4,3,59,113,115,13711,13713,13717,1,8816,59,3,8806,824,108,97,110,116,59,3,10877,824,4,2,59,115,13731,13734,3,10877,824,59,1,8814,105,109,59,1,8820,4,2,59,114,13748,13750,1,8814,105,4,2,59,101,13757,13759,1,8938,59,1,8940,105,100,59,1,8740,4,2,112,116,13773,13778,102,59,3,55349,56671,5,172,3,59,105,110,13787,13789,13829,1,172,110,4,4,59,69,100,118,13800,13802,13806,13812,1,8713,59,3,8953,824,111,116,59,3,8949,824,4,3,97,98,99,13820,13823,13826,59,1,8713,59,1,8951,59,1,8950,105,4,2,59,118,13836,13838,1,8716,4,3,97,98,99,13846,13849,13852,59,1,8716,59,1,8958,59,1,8957,4,3,97,111,114,13863,13892,13899,114,4,4,59,97,115,116,13874,13876,13883,13888,1,8742,108,108,101,108,59,1,8742,108,59,3,11005,8421,59,3,8706,824,108,105,110,116,59,1,10772,4,3,59,99,101,13907,13909,13914,1,8832,117,101,59,1,8928,4,2,59,99,13920,13923,3,10927,824,4,2,59,101,13929,13931,1,8832,113,59,3,10927,824,4,4,65,97,105,116,13946,13951,13971,13982,114,114,59,1,8655,114,114,4,3,59,99,119,13961,13963,13967,1,8603,59,3,10547,824,59,3,8605,824,103,104,116,97,114,114,111,119,59,1,8603,114,105,4,2,59,101,13990,13992,1,8939,59,1,8941,4,7,99,104,105,109,112,113,117,14011,14036,14060,14080,14085,14090,14106,4,4,59,99,101,114,14021,14023,14028,14032,1,8833,117,101,59,1,8929,59,3,10928,824,59,3,55349,56515,111,114,116,4,2,109,112,14045,14050,105,100,59,1,8740,97,114,97,108,108,101,108,59,1,8742,109,4,2,59,101,14067,14069,1,8769,4,2,59,113,14075,14077,1,8772,59,1,8772,105,100,59,1,8740,97,114,59,1,8742,115,117,4,2,98,112,14098,14102,101,59,1,8930,101,59,1,8931,4,3,98,99,112,14114,14157,14171,4,4,59,69,101,115,14124,14126,14130,14133,1,8836,59,3,10949,824,59,1,8840,101,116,4,2,59,101,14141,14144,3,8834,8402,113,4,2,59,113,14151,14153,1,8840,59,3,10949,824,99,4,2,59,101,14164,14166,1,8833,113,59,3,10928,824,4,4,59,69,101,115,14181,14183,14187,14190,1,8837,59,3,10950,824,59,1,8841,101,116,4,2,59,101,14198,14201,3,8835,8402,113,4,2,59,113,14208,14210,1,8841,59,3,10950,824,4,4,103,105,108,114,14224,14228,14238,14242,108,59,1,8825,108,100,101,5,241,1,59,14236,1,241,103,59,1,8824,105,97,110,103,108,101,4,2,108,114,14254,14269,101,102,116,4,2,59,101,14263,14265,1,8938,113,59,1,8940,105,103,104,116,4,2,59,101,14279,14281,1,8939,113,59,1,8941,4,2,59,109,14291,14293,1,957,4,3,59,101,115,14301,14303,14308,1,35,114,111,59,1,8470,112,59,1,8199,4,9,68,72,97,100,103,105,108,114,115,14332,14338,14344,14349,14355,14369,14376,14408,14426,97,115,104,59,1,8877,97,114,114,59,1,10500,112,59,3,8781,8402,97,115,104,59,1,8876,4,2,101,116,14361,14365,59,3,8805,8402,59,3,62,8402,110,102,105,110,59,1,10718,4,3,65,101,116,14384,14389,14393,114,114,59,1,10498,59,3,8804,8402,4,2,59,114,14399,14402,3,60,8402,105,101,59,3,8884,8402,4,2,65,116,14414,14419,114,114,59,1,10499,114,105,101,59,3,8885,8402,105,109,59,3,8764,8402,4,3,65,97,110,14440,14445,14468,114,114,59,1,8662,114,4,2,104,114,14452,14456,107,59,1,10531,4,2,59,111,14462,14464,1,8598,119,59,1,8598,101,97,114,59,1,10535,4,18,83,97,99,100,101,102,103,104,105,108,109,111,112,114,115,116,117,118,14512,14515,14535,14560,14597,14603,14618,14643,14657,14662,14701,14741,14747,14769,14851,14877,14907,14916,59,1,9416,4,2,99,115,14521,14531,117,116,101,5,243,1,59,14529,1,243,116,59,1,8859,4,2,105,121,14541,14557,114,4,2,59,99,14548,14550,1,8858,5,244,1,59,14555,1,244,59,1,1086,4,5,97,98,105,111,115,14572,14577,14583,14587,14591,115,104,59,1,8861,108,97,99,59,1,337,118,59,1,10808,116,59,1,8857,111,108,100,59,1,10684,108,105,103,59,1,339,4,2,99,114,14609,14614,105,114,59,1,10687,59,3,55349,56620,4,3,111,114,116,14626,14630,14640,110,59,1,731,97,118,101,5,242,1,59,14638,1,242,59,1,10689,4,2,98,109,14649,14654,97,114,59,1,10677,59,1,937,110,116,59,1,8750,4,4,97,99,105,116,14672,14677,14693,14698,114,114,59,1,8634,4,2,105,114,14683,14687,114,59,1,10686,111,115,115,59,1,10683,110,101,59,1,8254,59,1,10688,4,3,97,101,105,14709,14714,14719,99,114,59,1,333,103,97,59,1,969,4,3,99,100,110,14727,14733,14736,114,111,110,59,1,959,59,1,10678,117,115,59,1,8854,112,102,59,3,55349,56672,4,3,97,101,108,14755,14759,14764,114,59,1,10679,114,112,59,1,10681,117,115,59,1,8853,4,7,59,97,100,105,111,115,118,14785,14787,14792,14831,14837,14841,14848,1,8744,114,114,59,1,8635,4,4,59,101,102,109,14802,14804,14817,14824,1,10845,114,4,2,59,111,14811,14813,1,8500,102,59,1,8500,5,170,1,59,14822,1,170,5,186,1,59,14829,1,186,103,111,102,59,1,8886,114,59,1,10838,108,111,112,101,59,1,10839,59,1,10843,4,3,99,108,111,14859,14863,14873,114,59,1,8500,97,115,104,5,248,1,59,14871,1,248,108,59,1,8856,105,4,2,108,109,14884,14893,100,101,5,245,1,59,14891,1,245,101,115,4,2,59,97,14901,14903,1,8855,115,59,1,10806,109,108,5,246,1,59,14914,1,246,98,97,114,59,1,9021,4,12,97,99,101,102,104,105,108,109,111,114,115,117,14948,14992,14996,15033,15038,15068,15090,15189,15192,15222,15427,15441,114,4,4,59,97,115,116,14959,14961,14976,14989,1,8741,5,182,2,59,108,14968,14970,1,182,108,101,108,59,1,8741,4,2,105,108,14982,14986,109,59,1,10995,59,1,11005,59,1,8706,121,59,1,1087,114,4,5,99,105,109,112,116,15009,15014,15019,15024,15027,110,116,59,1,37,111,100,59,1,46,105,108,59,1,8240,59,1,8869,101,110,107,59,1,8241,114,59,3,55349,56621,4,3,105,109,111,15046,15057,15063,4,2,59,118,15052,15054,1,966,59,1,981,109,97,116,59,1,8499,110,101,59,1,9742,4,3,59,116,118,15076,15078,15087,1,960,99,104,102,111,114,107,59,1,8916,59,1,982,4,2,97,117,15096,15119,110,4,2,99,107,15103,15115,107,4,2,59,104,15110,15112,1,8463,59,1,8462,118,59,1,8463,115,4,9,59,97,98,99,100,101,109,115,116,15140,15142,15148,15151,15156,15168,15171,15179,15184,1,43,99,105,114,59,1,10787,59,1,8862,105,114,59,1,10786,4,2,111,117,15162,15165,59,1,8724,59,1,10789,59,1,10866,110,5,177,1,59,15177,1,177,105,109,59,1,10790,119,111,59,1,10791,59,1,177,4,3,105,112,117,15200,15208,15213,110,116,105,110,116,59,1,10773,102,59,3,55349,56673,110,100,5,163,1,59,15220,1,163,4,10,59,69,97,99,101,105,110,111,115,117,15244,15246,15249,15253,15258,15334,15347,15367,15416,15421,1,8826,59,1,10931,112,59,1,10935,117,101,59,1,8828,4,2,59,99,15264,15266,1,10927,4,6,59,97,99,101,110,115,15280,15282,15290,15299,15303,15329,1,8826,112,112,114,111,120,59,1,10935,117,114,108,121,101,113,59,1,8828,113,59,1,10927,4,3,97,101,115,15311,15319,15324,112,112,114,111,120,59,1,10937,113,113,59,1,10933,105,109,59,1,8936,105,109,59,1,8830,109,101,4,2,59,115,15342,15344,1,8242,59,1,8473,4,3,69,97,115,15355,15358,15362,59,1,10933,112,59,1,10937,105,109,59,1,8936,4,3,100,102,112,15375,15378,15404,59,1,8719,4,3,97,108,115,15386,15392,15398,108,97,114,59,1,9006,105,110,101,59,1,8978,117,114,102,59,1,8979,4,2,59,116,15410,15412,1,8733,111,59,1,8733,105,109,59,1,8830,114,101,108,59,1,8880,4,2,99,105,15433,15438,114,59,3,55349,56517,59,1,968,110,99,115,112,59,1,8200,4,6,102,105,111,112,115,117,15462,15467,15472,15478,15485,15491,114,59,3,55349,56622,110,116,59,1,10764,112,102,59,3,55349,56674,114,105,109,101,59,1,8279,99,114,59,3,55349,56518,4,3,97,101,111,15499,15520,15534,116,4,2,101,105,15506,15515,114,110,105,111,110,115,59,1,8461,110,116,59,1,10774,115,116,4,2,59,101,15528,15530,1,63,113,59,1,8799,116,5,34,1,59,15540,1,34,4,21,65,66,72,97,98,99,100,101,102,104,105,108,109,110,111,112,114,115,116,117,120,15586,15609,15615,15620,15796,15855,15893,15931,15977,16001,16039,16183,16204,16222,16228,16285,16312,16318,16363,16408,16416,4,3,97,114,116,15594,15599,15603,114,114,59,1,8667,114,59,1,8658,97,105,108,59,1,10524,97,114,114,59,1,10511,97,114,59,1,10596,4,7,99,100,101,110,113,114,116,15636,15651,15656,15664,15687,15696,15770,4,2,101,117,15642,15646,59,3,8765,817,116,101,59,1,341,105,99,59,1,8730,109,112,116,121,118,59,1,10675,103,4,4,59,100,101,108,15675,15677,15680,15683,1,10217,59,1,10642,59,1,10661,101,59,1,10217,117,111,5,187,1,59,15694,1,187,114,4,11,59,97,98,99,102,104,108,112,115,116,119,15721,15723,15727,15739,15742,15746,15750,15754,15758,15763,15767,1,8594,112,59,1,10613,4,2,59,102,15733,15735,1,8677,115,59,1,10528,59,1,10547,115,59,1,10526,107,59,1,8618,112,59,1,8620,108,59,1,10565,105,109,59,1,10612,108,59,1,8611,59,1,8605,4,2,97,105,15776,15781,105,108,59,1,10522,111,4,2,59,110,15788,15790,1,8758,97,108,115,59,1,8474,4,3,97,98,114,15804,15809,15814,114,114,59,1,10509,114,107,59,1,10099,4,2,97,107,15820,15833,99,4,2,101,107,15827,15830,59,1,125,59,1,93,4,2,101,115,15839,15842,59,1,10636,108,4,2,100,117,15849,15852,59,1,10638,59,1,10640,4,4,97,101,117,121,15865,15871,15886,15890,114,111,110,59,1,345,4,2,100,105,15877,15882,105,108,59,1,343,108,59,1,8969,98,59,1,125,59,1,1088,4,4,99,108,113,115,15903,15907,15914,15927,97,59,1,10551,100,104,97,114,59,1,10601,117,111,4,2,59,114,15922,15924,1,8221,59,1,8221,104,59,1,8627,4,3,97,99,103,15939,15966,15970,108,4,4,59,105,112,115,15950,15952,15957,15963,1,8476,110,101,59,1,8475,97,114,116,59,1,8476,59,1,8477,116,59,1,9645,5,174,1,59,15975,1,174,4,3,105,108,114,15985,15991,15997,115,104,116,59,1,10621,111,111,114,59,1,8971,59,3,55349,56623,4,2,97,111,16007,16028,114,4,2,100,117,16014,16017,59,1,8641,4,2,59,108,16023,16025,1,8640,59,1,10604,4,2,59,118,16034,16036,1,961,59,1,1009,4,3,103,110,115,16047,16167,16171,104,116,4,6,97,104,108,114,115,116,16063,16081,16103,16130,16143,16155,114,114,111,119,4,2,59,116,16073,16075,1,8594,97,105,108,59,1,8611,97,114,112,111,111,110,4,2,100,117,16093,16099,111,119,110,59,1,8641,112,59,1,8640,101,102,116,4,2,97,104,16112,16120,114,114,111,119,115,59,1,8644,97,114,112,111,111,110,115,59,1,8652,105,103,104,116,97,114,114,111,119,115,59,1,8649,113,117,105,103,97,114,114,111,119,59,1,8605,104,114,101,101,116,105,109,101,115,59,1,8908,103,59,1,730,105,110,103,100,111,116,115,101,113,59,1,8787,4,3,97,104,109,16191,16196,16201,114,114,59,1,8644,97,114,59,1,8652,59,1,8207,111,117,115,116,4,2,59,97,16214,16216,1,9137,99,104,101,59,1,9137,109,105,100,59,1,10990,4,4,97,98,112,116,16238,16252,16257,16278,4,2,110,114,16244,16248,103,59,1,10221,114,59,1,8702,114,107,59,1,10215,4,3,97,102,108,16265,16269,16273,114,59,1,10630,59,3,55349,56675,117,115,59,1,10798,105,109,101,115,59,1,10805,4,2,97,112,16291,16304,114,4,2,59,103,16298,16300,1,41,116,59,1,10644,111,108,105,110,116,59,1,10770,97,114,114,59,1,8649,4,4,97,99,104,113,16328,16334,16339,16342,113,117,111,59,1,8250,114,59,3,55349,56519,59,1,8625,4,2,98,117,16348,16351,59,1,93,111,4,2,59,114,16358,16360,1,8217,59,1,8217,4,3,104,105,114,16371,16377,16383,114,101,101,59,1,8908,109,101,115,59,1,8906,105,4,4,59,101,102,108,16394,16396,16399,16402,1,9657,59,1,8885,59,1,9656,116,114,105,59,1,10702,108,117,104,97,114,59,1,10600,59,1,8478,4,19,97,98,99,100,101,102,104,105,108,109,111,112,113,114,115,116,117,119,122,16459,16466,16472,16572,16590,16672,16687,16746,16844,16850,16924,16963,16988,17115,17121,17154,17206,17614,17656,99,117,116,101,59,1,347,113,117,111,59,1,8218,4,10,59,69,97,99,101,105,110,112,115,121,16494,16496,16499,16513,16518,16531,16536,16556,16564,16569,1,8827,59,1,10932,4,2,112,114,16505,16508,59,1,10936,111,110,59,1,353,117,101,59,1,8829,4,2,59,100,16524,16526,1,10928,105,108,59,1,351,114,99,59,1,349,4,3,69,97,115,16544,16547,16551,59,1,10934,112,59,1,10938,105,109,59,1,8937,111,108,105,110,116,59,1,10771,105,109,59,1,8831,59,1,1089,111,116,4,3,59,98,101,16582,16584,16587,1,8901,59,1,8865,59,1,10854,4,7,65,97,99,109,115,116,120,16606,16611,16634,16642,16646,16652,16668,114,114,59,1,8664,114,4,2,104,114,16618,16622,107,59,1,10533,4,2,59,111,16628,16630,1,8600,119,59,1,8600,116,5,167,1,59,16640,1,167,105,59,1,59,119,97,114,59,1,10537,109,4,2,105,110,16659,16665,110,117,115,59,1,8726,59,1,8726,116,59,1,10038,114,4,2,59,111,16679,16682,3,55349,56624,119,110,59,1,8994,4,4,97,99,111,121,16697,16702,16716,16739,114,112,59,1,9839,4,2,104,121,16708,16713,99,121,59,1,1097,59,1,1096,114,116,4,2,109,112,16724,16729,105,100,59,1,8739,97,114,97,108,108,101,108,59,1,8741,5,173,1,59,16744,1,173,4,2,103,109,16752,16770,109,97,4,3,59,102,118,16762,16764,16767,1,963,59,1,962,59,1,962,4,8,59,100,101,103,108,110,112,114,16788,16790,16795,16806,16817,16828,16832,16838,1,8764,111,116,59,1,10858,4,2,59,113,16801,16803,1,8771,59,1,8771,4,2,59,69,16812,16814,1,10910,59,1,10912,4,2,59,69,16823,16825,1,10909,59,1,10911,101,59,1,8774,108,117,115,59,1,10788,97,114,114,59,1,10610,97,114,114,59,1,8592,4,4,97,101,105,116,16860,16883,16891,16904,4,2,108,115,16866,16878,108,115,101,116,109,105,110,117,115,59,1,8726,104,112,59,1,10803,112,97,114,115,108,59,1,10724,4,2,100,108,16897,16900,59,1,8739,101,59,1,8995,4,2,59,101,16910,16912,1,10922,4,2,59,115,16918,16920,1,10924,59,3,10924,65024,4,3,102,108,112,16932,16938,16958,116,99,121,59,1,1100,4,2,59,98,16944,16946,1,47,4,2,59,97,16952,16954,1,10692,114,59,1,9023,102,59,3,55349,56676,97,4,2,100,114,16970,16985,101,115,4,2,59,117,16978,16980,1,9824,105,116,59,1,9824,59,1,8741,4,3,99,115,117,16996,17028,17089,4,2,97,117,17002,17015,112,4,2,59,115,17009,17011,1,8851,59,3,8851,65024,112,4,2,59,115,17022,17024,1,8852,59,3,8852,65024,117,4,2,98,112,17035,17062,4,3,59,101,115,17043,17045,17048,1,8847,59,1,8849,101,116,4,2,59,101,17056,17058,1,8847,113,59,1,8849,4,3,59,101,115,17070,17072,17075,1,8848,59,1,8850,101,116,4,2,59,101,17083,17085,1,8848,113,59,1,8850,4,3,59,97,102,17097,17099,17112,1,9633,114,4,2,101,102,17106,17109,59,1,9633,59,1,9642,59,1,9642,97,114,114,59,1,8594,4,4,99,101,109,116,17131,17136,17142,17148,114,59,3,55349,56520,116,109,110,59,1,8726,105,108,101,59,1,8995,97,114,102,59,1,8902,4,2,97,114,17160,17172,114,4,2,59,102,17167,17169,1,9734,59,1,9733,4,2,97,110,17178,17202,105,103,104,116,4,2,101,112,17188,17197,112,115,105,108,111,110,59,1,1013,104,105,59,1,981,115,59,1,175,4,5,98,99,109,110,112,17218,17351,17420,17423,17427,4,9,59,69,100,101,109,110,112,114,115,17238,17240,17243,17248,17261,17267,17279,17285,17291,1,8834,59,1,10949,111,116,59,1,10941,4,2,59,100,17254,17256,1,8838,111,116,59,1,10947,117,108,116,59,1,10945,4,2,69,101,17273,17276,59,1,10955,59,1,8842,108,117,115,59,1,10943,97,114,114,59,1,10617,4,3,101,105,117,17299,17335,17339,116,4,3,59,101,110,17308,17310,17322,1,8834,113,4,2,59,113,17317,17319,1,8838,59,1,10949,101,113,4,2,59,113,17330,17332,1,8842,59,1,10955,109,59,1,10951,4,2,98,112,17345,17348,59,1,10965,59,1,10963,99,4,6,59,97,99,101,110,115,17366,17368,17376,17385,17389,17415,1,8827,112,112,114,111,120,59,1,10936,117,114,108,121,101,113,59,1,8829,113,59,1,10928,4,3,97,101,115,17397,17405,17410,112,112,114,111,120,59,1,10938,113,113,59,1,10934,105,109,59,1,8937,105,109,59,1,8831,59,1,8721,103,59,1,9834,4,13,49,50,51,59,69,100,101,104,108,109,110,112,115,17455,17462,17469,17476,17478,17481,17496,17509,17524,17530,17536,17548,17554,5,185,1,59,17460,1,185,5,178,1,59,17467,1,178,5,179,1,59,17474,1,179,1,8835,59,1,10950,4,2,111,115,17487,17491,116,59,1,10942,117,98,59,1,10968,4,2,59,100,17502,17504,1,8839,111,116,59,1,10948,115,4,2,111,117,17516,17520,108,59,1,10185,98,59,1,10967,97,114,114,59,1,10619,117,108,116,59,1,10946,4,2,69,101,17542,17545,59,1,10956,59,1,8843,108,117,115,59,1,10944,4,3,101,105,117,17562,17598,17602,116,4,3,59,101,110,17571,17573,17585,1,8835,113,4,2,59,113,17580,17582,1,8839,59,1,10950,101,113,4,2,59,113,17593,17595,1,8843,59,1,10956,109,59,1,10952,4,2,98,112,17608,17611,59,1,10964,59,1,10966,4,3,65,97,110,17622,17627,17650,114,114,59,1,8665,114,4,2,104,114,17634,17638,107,59,1,10534,4,2,59,111,17644,17646,1,8601,119,59,1,8601,119,97,114,59,1,10538,108,105,103,5,223,1,59,17664,1,223,4,13,97,98,99,100,101,102,104,105,111,112,114,115,119,17694,17709,17714,17737,17742,17749,17754,17860,17905,17957,17964,18090,18122,4,2,114,117,17700,17706,103,101,116,59,1,8982,59,1,964,114,107,59,1,9140,4,3,97,101,121,17722,17728,17734,114,111,110,59,1,357,100,105,108,59,1,355,59,1,1090,111,116,59,1,8411,108,114,101,99,59,1,8981,114,59,3,55349,56625,4,4,101,105,107,111,17764,17805,17836,17851,4,2,114,116,17770,17786,101,4,2,52,102,17777,17780,59,1,8756,111,114,101,59,1,8756,97,4,3,59,115,118,17795,17797,17802,1,952,121,109,59,1,977,59,1,977,4,2,99,110,17811,17831,107,4,2,97,115,17818,17826,112,112,114,111,120,59,1,8776,105,109,59,1,8764,115,112,59,1,8201,4,2,97,115,17842,17846,112,59,1,8776,105,109,59,1,8764,114,110,5,254,1,59,17858,1,254,4,3,108,109,110,17868,17873,17901,100,101,59,1,732,101,115,5,215,3,59,98,100,17884,17886,17898,1,215,4,2,59,97,17892,17894,1,8864,114,59,1,10801,59,1,10800,116,59,1,8749,4,3,101,112,115,17913,17917,17953,97,59,1,10536,4,4,59,98,99,102,17927,17929,17934,17939,1,8868,111,116,59,1,9014,105,114,59,1,10993,4,2,59,111,17945,17948,3,55349,56677,114,107,59,1,10970,97,59,1,10537,114,105,109,101,59,1,8244,4,3,97,105,112,17972,17977,18082,100,101,59,1,8482,4,7,97,100,101,109,112,115,116,17993,18051,18056,18059,18066,18072,18076,110,103,108,101,4,5,59,100,108,113,114,18009,18011,18017,18032,18035,1,9653,111,119,110,59,1,9663,101,102,116,4,2,59,101,18026,18028,1,9667,113,59,1,8884,59,1,8796,105,103,104,116,4,2,59,101,18045,18047,1,9657,113,59,1,8885,111,116,59,1,9708,59,1,8796,105,110,117,115,59,1,10810,108,117,115,59,1,10809,98,59,1,10701,105,109,101,59,1,10811,101,122,105,117,109,59,1,9186,4,3,99,104,116,18098,18111,18116,4,2,114,121,18104,18108,59,3,55349,56521,59,1,1094,99,121,59,1,1115,114,111,107,59,1,359,4,2,105,111,18128,18133,120,116,59,1,8812,104,101,97,100,4,2,108,114,18143,18154,101,102,116,97,114,114,111,119,59,1,8606,105,103,104,116,97,114,114,111,119,59,1,8608,4,18,65,72,97,98,99,100,102,103,104,108,109,111,112,114,115,116,117,119,18204,18209,18214,18234,18250,18268,18292,18308,18319,18343,18379,18397,18413,18504,18547,18553,18584,18603,114,114,59,1,8657,97,114,59,1,10595,4,2,99,114,18220,18230,117,116,101,5,250,1,59,18228,1,250,114,59,1,8593,114,4,2,99,101,18241,18245,121,59,1,1118,118,101,59,1,365,4,2,105,121,18256,18265,114,99,5,251,1,59,18263,1,251,59,1,1091,4,3,97,98,104,18276,18281,18287,114,114,59,1,8645,108,97,99,59,1,369,97,114,59,1,10606,4,2,105,114,18298,18304,115,104,116,59,1,10622,59,3,55349,56626,114,97,118,101,5,249,1,59,18317,1,249,4,2,97,98,18325,18338,114,4,2,108,114,18332,18335,59,1,8639,59,1,8638,108,107,59,1,9600,4,2,99,116,18349,18374,4,2,111,114,18355,18369,114,110,4,2,59,101,18363,18365,1,8988,114,59,1,8988,111,112,59,1,8975,114,105,59,1,9720,4,2,97,108,18385,18390,99,114,59,1,363,5,168,1,59,18395,1,168,4,2,103,112,18403,18408,111,110,59,1,371,102,59,3,55349,56678,4,6,97,100,104,108,115,117,18427,18434,18445,18470,18475,18494,114,114,111,119,59,1,8593,111,119,110,97,114,114,111,119,59,1,8597,97,114,112,111,111,110,4,2,108,114,18457,18463,101,102,116,59,1,8639,105,103,104,116,59,1,8638,117,115,59,1,8846,105,4,3,59,104,108,18484,18486,18489,1,965,59,1,978,111,110,59,1,965,112,97,114,114,111,119,115,59,1,8648,4,3,99,105,116,18512,18537,18542,4,2,111,114,18518,18532,114,110,4,2,59,101,18526,18528,1,8989,114,59,1,8989,111,112,59,1,8974,110,103,59,1,367,114,105,59,1,9721,99,114,59,3,55349,56522,4,3,100,105,114,18561,18566,18572,111,116,59,1,8944,108,100,101,59,1,361,105,4,2,59,102,18579,18581,1,9653,59,1,9652,4,2,97,109,18590,18595,114,114,59,1,8648,108,5,252,1,59,18601,1,252,97,110,103,108,101,59,1,10663,4,15,65,66,68,97,99,100,101,102,108,110,111,112,114,115,122,18643,18648,18661,18667,18847,18851,18857,18904,18909,18915,18931,18937,18943,18949,18996,114,114,59,1,8661,97,114,4,2,59,118,18656,18658,1,10984,59,1,10985,97,115,104,59,1,8872,4,2,110,114,18673,18679,103,114,116,59,1,10652,4,7,101,107,110,112,114,115,116,18695,18704,18711,18720,18742,18754,18810,112,115,105,108,111,110,59,1,1013,97,112,112,97,59,1,1008,111,116,104,105,110,103,59,1,8709,4,3,104,105,114,18728,18732,18735,105,59,1,981,59,1,982,111,112,116,111,59,1,8733,4,2,59,104,18748,18750,1,8597,111,59,1,1009,4,2,105,117,18760,18766,103,109,97,59,1,962,4,2,98,112,18772,18791,115,101,116,110,101,113,4,2,59,113,18784,18787,3,8842,65024,59,3,10955,65024,115,101,116,110,101,113,4,2,59,113,18803,18806,3,8843,65024,59,3,10956,65024,4,2,104,114,18816,18822,101,116,97,59,1,977,105,97,110,103,108,101,4,2,108,114,18834,18840,101,102,116,59,1,8882,105,103,104,116,59,1,8883,121,59,1,1074,97,115,104,59,1,8866,4,3,101,108,114,18865,18884,18890,4,3,59,98,101,18873,18875,18880,1,8744,97,114,59,1,8891,113,59,1,8794,108,105,112,59,1,8942,4,2,98,116,18896,18901,97,114,59,1,124,59,1,124,114,59,3,55349,56627,116,114,105,59,1,8882,115,117,4,2,98,112,18923,18927,59,3,8834,8402,59,3,8835,8402,112,102,59,3,55349,56679,114,111,112,59,1,8733,116,114,105,59,1,8883,4,2,99,117,18955,18960,114,59,3,55349,56523,4,2,98,112,18966,18981,110,4,2,69,101,18973,18977,59,3,10955,65024,59,3,8842,65024,110,4,2,69,101,18988,18992,59,3,10956,65024,59,3,8843,65024,105,103,122,97,103,59,1,10650,4,7,99,101,102,111,112,114,115,19020,19026,19061,19066,19072,19075,19089,105,114,99,59,1,373,4,2,100,105,19032,19055,4,2,98,103,19038,19043,97,114,59,1,10847,101,4,2,59,113,19050,19052,1,8743,59,1,8793,101,114,112,59,1,8472,114,59,3,55349,56628,112,102,59,3,55349,56680,59,1,8472,4,2,59,101,19081,19083,1,8768,97,116,104,59,1,8768,99,114,59,3,55349,56524,4,14,99,100,102,104,105,108,109,110,111,114,115,117,118,119,19125,19146,19152,19157,19173,19176,19192,19197,19202,19236,19252,19269,19286,19291,4,3,97,105,117,19133,19137,19142,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,116,114,105,59,1,9661,114,59,3,55349,56629,4,2,65,97,19163,19168,114,114,59,1,10234,114,114,59,1,10231,59,1,958,4,2,65,97,19182,19187,114,114,59,1,10232,114,114,59,1,10229,97,112,59,1,10236,105,115,59,1,8955,4,3,100,112,116,19210,19215,19230,111,116,59,1,10752,4,2,102,108,19221,19225,59,3,55349,56681,117,115,59,1,10753,105,109,101,59,1,10754,4,2,65,97,19242,19247,114,114,59,1,10233,114,114,59,1,10230,4,2,99,113,19258,19263,114,59,3,55349,56525,99,117,112,59,1,10758,4,2,112,116,19275,19281,108,117,115,59,1,10756,114,105,59,1,9651,101,101,59,1,8897,101,100,103,101,59,1,8896,4,8,97,99,101,102,105,111,115,117,19316,19335,19349,19357,19362,19367,19373,19379,99,4,2,117,121,19323,19332,116,101,5,253,1,59,19330,1,253,59,1,1103,4,2,105,121,19341,19346,114,99,59,1,375,59,1,1099,110,5,165,1,59,19355,1,165,114,59,3,55349,56630,99,121,59,1,1111,112,102,59,3,55349,56682,99,114,59,3,55349,56526,4,2,99,109,19385,19389,121,59,1,1102,108,5,255,1,59,19395,1,255,4,10,97,99,100,101,102,104,105,111,115,119,19419,19426,19441,19446,19462,19467,19472,19480,19486,19492,99,117,116,101,59,1,378,4,2,97,121,19432,19438,114,111,110,59,1,382,59,1,1079,111,116,59,1,380,4,2,101,116,19452,19458,116,114,102,59,1,8488,97,59,1,950,114,59,3,55349,56631,99,121,59,1,1078,103,114,97,114,114,59,1,8669,112,102,59,3,55349,56683,99,114,59,3,55349,56527,4,2,106,110,19498,19501,59,1,8205,106,59,1,8204]);const eZ=ZQ,tZ=VQ,nZ=JQ,rZ=XQ,iZ=tZ.CODE_POINTS,aZ=tZ.CODE_POINT_SEQUENCES,oZ={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},sZ="DATA_STATE";function lZ(e){return e===iZ.SPACE||e===iZ.LINE_FEED||e===iZ.TABULATION||e===iZ.FORM_FEED}function cZ(e){return e>=iZ.DIGIT_0&&e<=iZ.DIGIT_9}function uZ(e){return e>=iZ.LATIN_CAPITAL_A&&e<=iZ.LATIN_CAPITAL_Z}function hZ(e){return e>=iZ.LATIN_SMALL_A&&e<=iZ.LATIN_SMALL_Z}function pZ(e){return hZ(e)||uZ(e)}function dZ(e){return pZ(e)||cZ(e)}function fZ(e){return e>=iZ.LATIN_CAPITAL_A&&e<=iZ.LATIN_CAPITAL_F}function mZ(e){return e>=iZ.LATIN_SMALL_A&&e<=iZ.LATIN_SMALL_F}function gZ(e){return e+32}function vZ(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(e>>>10&1023|55296)+String.fromCharCode(56320|1023&e))}function yZ(e){return String.fromCharCode(gZ(e))}function xZ(e,t){const n=nZ[++e];let r=++e,i=r+n-1;for(;r<=i;){const e=r+i>>>1,a=nZ[e];if(a<t)r=e+1;else{if(!(a>t))return nZ[e+n];i=e-1}}return-1}class EZ{constructor(){this.preprocessor=new eZ,this.tokenQueue=[],this.allowCDATA=!1,this.state=sZ,this.returnState="",this.charRefCode=-1,this.tempBuff=[],this.lastStartTagName="",this.consumedAfterSnapshot=-1,this.active=!1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr=null}_err(){}_errOnNextCodePoint(e){this._consume(),this._err(e),this._unconsume()}getNextToken(){for(;!this.tokenQueue.length&&this.active;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this[this.state](e)}return this.tokenQueue.shift()}write(e,t){this.active=!0,this.preprocessor.write(e,t)}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e)}_ensureHibernation(){if(this.preprocessor.endOfChunkHit){for(;this.consumedAfterSnapshot>0;this.consumedAfterSnapshot--)this.preprocessor.retreat();return this.active=!1,this.tokenQueue.push({type:EZ.HIBERNATION_TOKEN}),!0}return!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(){this.consumedAfterSnapshot--,this.preprocessor.retreat()}_reconsumeInState(e){this.state=e,this._unconsume()}_consumeSequenceIfMatch(e,t,n){let r=0,i=!0;const a=e.length;let o,s=0,l=t;for(;s<a;s++){if(s>0&&(l=this._consume(),r++),l===iZ.EOF){i=!1;break}if(o=e[s],l!==o&&(n||l!==gZ(o))){i=!1;break}}if(!i)for(;r--;)this._unconsume();return i}_isTempBufferEqualToScriptString(){if(this.tempBuff.length!==aZ.SCRIPT_STRING.length)return!1;for(let e=0;e<this.tempBuff.length;e++)if(this.tempBuff[e]!==aZ.SCRIPT_STRING[e])return!1;return!0}_createStartTagToken(){this.currentToken={type:EZ.START_TAG_TOKEN,tagName:"",selfClosing:!1,ackSelfClosing:!1,attrs:[]}}_createEndTagToken(){this.currentToken={type:EZ.END_TAG_TOKEN,tagName:"",selfClosing:!1,attrs:[]}}_createCommentToken(){this.currentToken={type:EZ.COMMENT_TOKEN,data:""}}_createDoctypeToken(e){this.currentToken={type:EZ.DOCTYPE_TOKEN,name:e,forceQuirks:!1,publicId:null,systemId:null}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t}}_createEOFToken(){this.currentToken={type:EZ.EOF_TOKEN}}_createAttr(e){this.currentAttr={name:e,value:""}}_leaveAttrName(e){null===EZ.getTokenAttr(this.currentToken,this.currentAttr.name)?this.currentToken.attrs.push(this.currentAttr):this._err(rZ.duplicateAttribute),this.state=e}_leaveAttrValue(e){this.state=e}_emitCurrentToken(){this._emitCurrentCharacterToken();const e=this.currentToken;this.currentToken=null,e.type===EZ.START_TAG_TOKEN?this.lastStartTagName=e.tagName:e.type===EZ.END_TAG_TOKEN&&(e.attrs.length>0&&this._err(rZ.endTagWithAttributes),e.selfClosing&&this._err(rZ.endTagWithTrailingSolidus)),this.tokenQueue.push(e)}_emitCurrentCharacterToken(){this.currentCharacterToken&&(this.tokenQueue.push(this.currentCharacterToken),this.currentCharacterToken=null)}_emitEOFToken(){this._createEOFToken(),this._emitCurrentToken()}_appendCharToCurrentCharacterToken(e,t){this.currentCharacterToken&&this.currentCharacterToken.type!==e&&this._emitCurrentCharacterToken(),this.currentCharacterToken?this.currentCharacterToken.chars+=t:this._createCharacterToken(e,t)}_emitCodePoint(e){let t=EZ.CHARACTER_TOKEN;lZ(e)?t=EZ.WHITESPACE_CHARACTER_TOKEN:e===iZ.NULL&&(t=EZ.NULL_CHARACTER_TOKEN),this._appendCharToCurrentCharacterToken(t,vZ(e))}_emitSeveralCodePoints(e){for(let t=0;t<e.length;t++)this._emitCodePoint(e[t])}_emitChars(e){this._appendCharToCurrentCharacterToken(EZ.CHARACTER_TOKEN,e)}_matchNamedCharacterReference(e){let t=null,n=1,r=xZ(0,e);for(this.tempBuff.push(e);r>-1;){const e=nZ[r],i=e<7;i&&1&e&&(t=2&e?[nZ[++r],nZ[++r]]:[nZ[++r]],n=0);const a=this._consume();if(this.tempBuff.push(a),n++,a===iZ.EOF)break;r=i?4&e?xZ(r,a):-1:a===e?++r:-1}for(;n--;)this.tempBuff.pop(),this._unconsume();return t}_isCharacterReferenceInAttribute(){return"ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE"===this.returnState||"ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE"===this.returnState||"ATTRIBUTE_VALUE_UNQUOTED_STATE"===this.returnState}_isCharacterReferenceAttributeQuirk(e){if(!e&&this._isCharacterReferenceInAttribute()){const e=this._consume();return this._unconsume(),e===iZ.EQUALS_SIGN||dZ(e)}return!1}_flushCodePointsConsumedAsCharacterReference(){if(this._isCharacterReferenceInAttribute())for(let e=0;e<this.tempBuff.length;e++)this.currentAttr.value+=vZ(this.tempBuff[e]);else this._emitSeveralCodePoints(this.tempBuff);this.tempBuff=[]}[sZ](e){this.preprocessor.dropParsedChunk(),e===iZ.LESS_THAN_SIGN?this.state="TAG_OPEN_STATE":e===iZ.AMPERSAND?(this.returnState=sZ,this.state="CHARACTER_REFERENCE_STATE"):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this._emitCodePoint(e)):e===iZ.EOF?this._emitEOFToken():this._emitCodePoint(e)}RCDATA_STATE(e){this.preprocessor.dropParsedChunk(),e===iZ.AMPERSAND?(this.returnState="RCDATA_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===iZ.LESS_THAN_SIGN?this.state="RCDATA_LESS_THAN_SIGN_STATE":e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this._emitChars(tZ.REPLACEMENT_CHARACTER)):e===iZ.EOF?this._emitEOFToken():this._emitCodePoint(e)}RAWTEXT_STATE(e){this.preprocessor.dropParsedChunk(),e===iZ.LESS_THAN_SIGN?this.state="RAWTEXT_LESS_THAN_SIGN_STATE":e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this._emitChars(tZ.REPLACEMENT_CHARACTER)):e===iZ.EOF?this._emitEOFToken():this._emitCodePoint(e)}SCRIPT_DATA_STATE(e){this.preprocessor.dropParsedChunk(),e===iZ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_LESS_THAN_SIGN_STATE":e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this._emitChars(tZ.REPLACEMENT_CHARACTER)):e===iZ.EOF?this._emitEOFToken():this._emitCodePoint(e)}PLAINTEXT_STATE(e){this.preprocessor.dropParsedChunk(),e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this._emitChars(tZ.REPLACEMENT_CHARACTER)):e===iZ.EOF?this._emitEOFToken():this._emitCodePoint(e)}TAG_OPEN_STATE(e){e===iZ.EXCLAMATION_MARK?this.state="MARKUP_DECLARATION_OPEN_STATE":e===iZ.SOLIDUS?this.state="END_TAG_OPEN_STATE":pZ(e)?(this._createStartTagToken(),this._reconsumeInState("TAG_NAME_STATE")):e===iZ.QUESTION_MARK?(this._err(rZ.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE")):e===iZ.EOF?(this._err(rZ.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken()):(this._err(rZ.invalidFirstCharacterOfTagName),this._emitChars("<"),this._reconsumeInState(sZ))}END_TAG_OPEN_STATE(e){pZ(e)?(this._createEndTagToken(),this._reconsumeInState("TAG_NAME_STATE")):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.missingEndTagName),this.state=sZ):e===iZ.EOF?(this._err(rZ.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken()):(this._err(rZ.invalidFirstCharacterOfTagName),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE"))}TAG_NAME_STATE(e){lZ(e)?this.state="BEFORE_ATTRIBUTE_NAME_STATE":e===iZ.SOLIDUS?this.state="SELF_CLOSING_START_TAG_STATE":e===iZ.GREATER_THAN_SIGN?(this.state=sZ,this._emitCurrentToken()):uZ(e)?this.currentToken.tagName+=yZ(e):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentToken.tagName+=tZ.REPLACEMENT_CHARACTER):e===iZ.EOF?(this._err(rZ.eofInTag),this._emitEOFToken()):this.currentToken.tagName+=vZ(e)}RCDATA_LESS_THAN_SIGN_STATE(e){e===iZ.SOLIDUS?(this.tempBuff=[],this.state="RCDATA_END_TAG_OPEN_STATE"):(this._emitChars("<"),this._reconsumeInState("RCDATA_STATE"))}RCDATA_END_TAG_OPEN_STATE(e){pZ(e)?(this._createEndTagToken(),this._reconsumeInState("RCDATA_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("RCDATA_STATE"))}RCDATA_END_TAG_NAME_STATE(e){if(uZ(e))this.currentToken.tagName+=yZ(e),this.tempBuff.push(e);else if(hZ(e))this.currentToken.tagName+=vZ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(lZ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===iZ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===iZ.GREATER_THAN_SIGN)return this.state=sZ,void this._emitCurrentToken()}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("RCDATA_STATE")}}RAWTEXT_LESS_THAN_SIGN_STATE(e){e===iZ.SOLIDUS?(this.tempBuff=[],this.state="RAWTEXT_END_TAG_OPEN_STATE"):(this._emitChars("<"),this._reconsumeInState("RAWTEXT_STATE"))}RAWTEXT_END_TAG_OPEN_STATE(e){pZ(e)?(this._createEndTagToken(),this._reconsumeInState("RAWTEXT_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("RAWTEXT_STATE"))}RAWTEXT_END_TAG_NAME_STATE(e){if(uZ(e))this.currentToken.tagName+=yZ(e),this.tempBuff.push(e);else if(hZ(e))this.currentToken.tagName+=vZ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(lZ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===iZ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===iZ.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=sZ)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("RAWTEXT_STATE")}}SCRIPT_DATA_LESS_THAN_SIGN_STATE(e){e===iZ.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_END_TAG_OPEN_STATE"):e===iZ.EXCLAMATION_MARK?(this.state="SCRIPT_DATA_ESCAPE_START_STATE",this._emitChars("<!")):(this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_STATE"))}SCRIPT_DATA_END_TAG_OPEN_STATE(e){pZ(e)?(this._createEndTagToken(),this._reconsumeInState("SCRIPT_DATA_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("SCRIPT_DATA_STATE"))}SCRIPT_DATA_END_TAG_NAME_STATE(e){if(uZ(e))this.currentToken.tagName+=yZ(e),this.tempBuff.push(e);else if(hZ(e))this.currentToken.tagName+=vZ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(lZ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===iZ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===iZ.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=sZ)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("SCRIPT_DATA_STATE")}}SCRIPT_DATA_ESCAPE_START_STATE(e){e===iZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPE_START_DASH_STATE",this._emitChars("-")):this._reconsumeInState("SCRIPT_DATA_STATE")}SCRIPT_DATA_ESCAPE_START_DASH_STATE(e){e===iZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):this._reconsumeInState("SCRIPT_DATA_STATE")}SCRIPT_DATA_ESCAPED_STATE(e){e===iZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_STATE",this._emitChars("-")):e===iZ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this._emitChars(tZ.REPLACEMENT_CHARACTER)):e===iZ.EOF?(this._err(rZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}SCRIPT_DATA_ESCAPED_DASH_STATE(e){e===iZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):e===iZ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitChars(tZ.REPLACEMENT_CHARACTER)):e===iZ.EOF?(this._err(rZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_ESCAPED_DASH_DASH_STATE(e){e===iZ.HYPHEN_MINUS?this._emitChars("-"):e===iZ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===iZ.GREATER_THAN_SIGN?(this.state="SCRIPT_DATA_STATE",this._emitChars(">")):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitChars(tZ.REPLACEMENT_CHARACTER)):e===iZ.EOF?(this._err(rZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE(e){e===iZ.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE"):pZ(e)?(this.tempBuff=[],this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE")):(this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE"))}SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE(e){pZ(e)?(this._createEndTagToken(),this._reconsumeInState("SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE"))}SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE(e){if(uZ(e))this.currentToken.tagName+=yZ(e),this.tempBuff.push(e);else if(hZ(e))this.currentToken.tagName+=vZ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(lZ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===iZ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===iZ.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=sZ)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE")}}SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE(e){lZ(e)||e===iZ.SOLIDUS||e===iZ.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?"SCRIPT_DATA_DOUBLE_ESCAPED_STATE":"SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e)):uZ(e)?(this.tempBuff.push(gZ(e)),this._emitCodePoint(e)):hZ(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE")}SCRIPT_DATA_DOUBLE_ESCAPED_STATE(e){e===iZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE",this._emitChars("-")):e===iZ.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this._emitChars(tZ.REPLACEMENT_CHARACTER)):e===iZ.EOF?(this._err(rZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE(e){e===iZ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):e===iZ.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitChars(tZ.REPLACEMENT_CHARACTER)):e===iZ.EOF?(this._err(rZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE(e){e===iZ.HYPHEN_MINUS?this._emitChars("-"):e===iZ.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===iZ.GREATER_THAN_SIGN?(this.state="SCRIPT_DATA_STATE",this._emitChars(">")):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitChars(tZ.REPLACEMENT_CHARACTER)):e===iZ.EOF?(this._err(rZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE(e){e===iZ.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE",this._emitChars("/")):this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPED_STATE")}SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE(e){lZ(e)||e===iZ.SOLIDUS||e===iZ.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?"SCRIPT_DATA_ESCAPED_STATE":"SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e)):uZ(e)?(this.tempBuff.push(gZ(e)),this._emitCodePoint(e)):hZ(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPED_STATE")}BEFORE_ATTRIBUTE_NAME_STATE(e){lZ(e)||(e===iZ.SOLIDUS||e===iZ.GREATER_THAN_SIGN||e===iZ.EOF?this._reconsumeInState("AFTER_ATTRIBUTE_NAME_STATE"):e===iZ.EQUALS_SIGN?(this._err(rZ.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state="ATTRIBUTE_NAME_STATE"):(this._createAttr(""),this._reconsumeInState("ATTRIBUTE_NAME_STATE")))}ATTRIBUTE_NAME_STATE(e){lZ(e)||e===iZ.SOLIDUS||e===iZ.GREATER_THAN_SIGN||e===iZ.EOF?(this._leaveAttrName("AFTER_ATTRIBUTE_NAME_STATE"),this._unconsume()):e===iZ.EQUALS_SIGN?this._leaveAttrName("BEFORE_ATTRIBUTE_VALUE_STATE"):uZ(e)?this.currentAttr.name+=yZ(e):e===iZ.QUOTATION_MARK||e===iZ.APOSTROPHE||e===iZ.LESS_THAN_SIGN?(this._err(rZ.unexpectedCharacterInAttributeName),this.currentAttr.name+=vZ(e)):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentAttr.name+=tZ.REPLACEMENT_CHARACTER):this.currentAttr.name+=vZ(e)}AFTER_ATTRIBUTE_NAME_STATE(e){lZ(e)||(e===iZ.SOLIDUS?this.state="SELF_CLOSING_START_TAG_STATE":e===iZ.EQUALS_SIGN?this.state="BEFORE_ATTRIBUTE_VALUE_STATE":e===iZ.GREATER_THAN_SIGN?(this.state=sZ,this._emitCurrentToken()):e===iZ.EOF?(this._err(rZ.eofInTag),this._emitEOFToken()):(this._createAttr(""),this._reconsumeInState("ATTRIBUTE_NAME_STATE")))}BEFORE_ATTRIBUTE_VALUE_STATE(e){lZ(e)||(e===iZ.QUOTATION_MARK?this.state="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE":e===iZ.APOSTROPHE?this.state="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE":e===iZ.GREATER_THAN_SIGN?(this._err(rZ.missingAttributeValue),this.state=sZ,this._emitCurrentToken()):this._reconsumeInState("ATTRIBUTE_VALUE_UNQUOTED_STATE"))}ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE(e){e===iZ.QUOTATION_MARK?this.state="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE":e===iZ.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentAttr.value+=tZ.REPLACEMENT_CHARACTER):e===iZ.EOF?(this._err(rZ.eofInTag),this._emitEOFToken()):this.currentAttr.value+=vZ(e)}ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE(e){e===iZ.APOSTROPHE?this.state="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE":e===iZ.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentAttr.value+=tZ.REPLACEMENT_CHARACTER):e===iZ.EOF?(this._err(rZ.eofInTag),this._emitEOFToken()):this.currentAttr.value+=vZ(e)}ATTRIBUTE_VALUE_UNQUOTED_STATE(e){lZ(e)?this._leaveAttrValue("BEFORE_ATTRIBUTE_NAME_STATE"):e===iZ.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_UNQUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===iZ.GREATER_THAN_SIGN?(this._leaveAttrValue(sZ),this._emitCurrentToken()):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentAttr.value+=tZ.REPLACEMENT_CHARACTER):e===iZ.QUOTATION_MARK||e===iZ.APOSTROPHE||e===iZ.LESS_THAN_SIGN||e===iZ.EQUALS_SIGN||e===iZ.GRAVE_ACCENT?(this._err(rZ.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=vZ(e)):e===iZ.EOF?(this._err(rZ.eofInTag),this._emitEOFToken()):this.currentAttr.value+=vZ(e)}AFTER_ATTRIBUTE_VALUE_QUOTED_STATE(e){lZ(e)?this._leaveAttrValue("BEFORE_ATTRIBUTE_NAME_STATE"):e===iZ.SOLIDUS?this._leaveAttrValue("SELF_CLOSING_START_TAG_STATE"):e===iZ.GREATER_THAN_SIGN?(this._leaveAttrValue(sZ),this._emitCurrentToken()):e===iZ.EOF?(this._err(rZ.eofInTag),this._emitEOFToken()):(this._err(rZ.missingWhitespaceBetweenAttributes),this._reconsumeInState("BEFORE_ATTRIBUTE_NAME_STATE"))}SELF_CLOSING_START_TAG_STATE(e){e===iZ.GREATER_THAN_SIGN?(this.currentToken.selfClosing=!0,this.state=sZ,this._emitCurrentToken()):e===iZ.EOF?(this._err(rZ.eofInTag),this._emitEOFToken()):(this._err(rZ.unexpectedSolidusInTag),this._reconsumeInState("BEFORE_ATTRIBUTE_NAME_STATE"))}BOGUS_COMMENT_STATE(e){e===iZ.GREATER_THAN_SIGN?(this.state=sZ,this._emitCurrentToken()):e===iZ.EOF?(this._emitCurrentToken(),this._emitEOFToken()):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentToken.data+=tZ.REPLACEMENT_CHARACTER):this.currentToken.data+=vZ(e)}MARKUP_DECLARATION_OPEN_STATE(e){this._consumeSequenceIfMatch(aZ.DASH_DASH_STRING,e,!0)?(this._createCommentToken(),this.state="COMMENT_START_STATE"):this._consumeSequenceIfMatch(aZ.DOCTYPE_STRING,e,!1)?this.state="DOCTYPE_STATE":this._consumeSequenceIfMatch(aZ.CDATA_START_STRING,e,!0)?this.allowCDATA?this.state="CDATA_SECTION_STATE":(this._err(rZ.cdataInHtmlContent),this._createCommentToken(),this.currentToken.data="[CDATA[",this.state="BOGUS_COMMENT_STATE"):this._ensureHibernation()||(this._err(rZ.incorrectlyOpenedComment),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE"))}COMMENT_START_STATE(e){e===iZ.HYPHEN_MINUS?this.state="COMMENT_START_DASH_STATE":e===iZ.GREATER_THAN_SIGN?(this._err(rZ.abruptClosingOfEmptyComment),this.state=sZ,this._emitCurrentToken()):this._reconsumeInState("COMMENT_STATE")}COMMENT_START_DASH_STATE(e){e===iZ.HYPHEN_MINUS?this.state="COMMENT_END_STATE":e===iZ.GREATER_THAN_SIGN?(this._err(rZ.abruptClosingOfEmptyComment),this.state=sZ,this._emitCurrentToken()):e===iZ.EOF?(this._err(rZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState("COMMENT_STATE"))}COMMENT_STATE(e){e===iZ.HYPHEN_MINUS?this.state="COMMENT_END_DASH_STATE":e===iZ.LESS_THAN_SIGN?(this.currentToken.data+="<",this.state="COMMENT_LESS_THAN_SIGN_STATE"):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentToken.data+=tZ.REPLACEMENT_CHARACTER):e===iZ.EOF?(this._err(rZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.data+=vZ(e)}COMMENT_LESS_THAN_SIGN_STATE(e){e===iZ.EXCLAMATION_MARK?(this.currentToken.data+="!",this.state="COMMENT_LESS_THAN_SIGN_BANG_STATE"):e===iZ.LESS_THAN_SIGN?this.currentToken.data+="!":this._reconsumeInState("COMMENT_STATE")}COMMENT_LESS_THAN_SIGN_BANG_STATE(e){e===iZ.HYPHEN_MINUS?this.state="COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE":this._reconsumeInState("COMMENT_STATE")}COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE(e){e===iZ.HYPHEN_MINUS?this.state="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE":this._reconsumeInState("COMMENT_END_DASH_STATE")}COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE(e){e!==iZ.GREATER_THAN_SIGN&&e!==iZ.EOF&&this._err(rZ.nestedComment),this._reconsumeInState("COMMENT_END_STATE")}COMMENT_END_DASH_STATE(e){e===iZ.HYPHEN_MINUS?this.state="COMMENT_END_STATE":e===iZ.EOF?(this._err(rZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState("COMMENT_STATE"))}COMMENT_END_STATE(e){e===iZ.GREATER_THAN_SIGN?(this.state=sZ,this._emitCurrentToken()):e===iZ.EXCLAMATION_MARK?this.state="COMMENT_END_BANG_STATE":e===iZ.HYPHEN_MINUS?this.currentToken.data+="-":e===iZ.EOF?(this._err(rZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--",this._reconsumeInState("COMMENT_STATE"))}COMMENT_END_BANG_STATE(e){e===iZ.HYPHEN_MINUS?(this.currentToken.data+="--!",this.state="COMMENT_END_DASH_STATE"):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.incorrectlyClosedComment),this.state=sZ,this._emitCurrentToken()):e===iZ.EOF?(this._err(rZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--!",this._reconsumeInState("COMMENT_STATE"))}DOCTYPE_STATE(e){lZ(e)?this.state="BEFORE_DOCTYPE_NAME_STATE":e===iZ.GREATER_THAN_SIGN?this._reconsumeInState("BEFORE_DOCTYPE_NAME_STATE"):e===iZ.EOF?(this._err(rZ.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rZ.missingWhitespaceBeforeDoctypeName),this._reconsumeInState("BEFORE_DOCTYPE_NAME_STATE"))}BEFORE_DOCTYPE_NAME_STATE(e){lZ(e)||(uZ(e)?(this._createDoctypeToken(yZ(e)),this.state="DOCTYPE_NAME_STATE"):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this._createDoctypeToken(tZ.REPLACEMENT_CHARACTER),this.state="DOCTYPE_NAME_STATE"):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.missingDoctypeName),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=sZ):e===iZ.EOF?(this._err(rZ.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._createDoctypeToken(vZ(e)),this.state="DOCTYPE_NAME_STATE"))}DOCTYPE_NAME_STATE(e){lZ(e)?this.state="AFTER_DOCTYPE_NAME_STATE":e===iZ.GREATER_THAN_SIGN?(this.state=sZ,this._emitCurrentToken()):uZ(e)?this.currentToken.name+=yZ(e):e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentToken.name+=tZ.REPLACEMENT_CHARACTER):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.name+=vZ(e)}AFTER_DOCTYPE_NAME_STATE(e){lZ(e)||(e===iZ.GREATER_THAN_SIGN?(this.state=sZ,this._emitCurrentToken()):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this._consumeSequenceIfMatch(aZ.PUBLIC_STRING,e,!1)?this.state="AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE":this._consumeSequenceIfMatch(aZ.SYSTEM_STRING,e,!1)?this.state="AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE":this._ensureHibernation()||(this._err(rZ.invalidCharacterSequenceAfterDoctypeName),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE(e){lZ(e)?this.state="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===iZ.QUOTATION_MARK?(this._err(rZ.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iZ.APOSTROPHE?(this._err(rZ.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=sZ,this._emitCurrentToken()):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rZ.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE(e){lZ(e)||(e===iZ.QUOTATION_MARK?(this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iZ.APOSTROPHE?(this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=sZ,this._emitCurrentToken()):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rZ.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE(e){e===iZ.QUOTATION_MARK?this.state="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentToken.publicId+=tZ.REPLACEMENT_CHARACTER):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=sZ):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=vZ(e)}DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE(e){e===iZ.APOSTROPHE?this.state="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentToken.publicId+=tZ.REPLACEMENT_CHARACTER):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=sZ):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=vZ(e)}AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE(e){lZ(e)?this.state="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE":e===iZ.GREATER_THAN_SIGN?(this.state=sZ,this._emitCurrentToken()):e===iZ.QUOTATION_MARK?(this._err(rZ.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iZ.APOSTROPHE?(this._err(rZ.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE(e){lZ(e)||(e===iZ.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=sZ):e===iZ.QUOTATION_MARK?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iZ.APOSTROPHE?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE(e){lZ(e)?this.state="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===iZ.QUOTATION_MARK?(this._err(rZ.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iZ.APOSTROPHE?(this._err(rZ.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=sZ,this._emitCurrentToken()):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE(e){lZ(e)||(e===iZ.QUOTATION_MARK?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===iZ.APOSTROPHE?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=sZ,this._emitCurrentToken()):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE(e){e===iZ.QUOTATION_MARK?this.state="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentToken.systemId+=tZ.REPLACEMENT_CHARACTER):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=sZ):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=vZ(e)}DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE(e){e===iZ.APOSTROPHE?this.state="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===iZ.NULL?(this._err(rZ.unexpectedNullCharacter),this.currentToken.systemId+=tZ.REPLACEMENT_CHARACTER):e===iZ.GREATER_THAN_SIGN?(this._err(rZ.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=sZ):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=vZ(e)}AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE(e){lZ(e)||(e===iZ.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=sZ):e===iZ.EOF?(this._err(rZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(rZ.unexpectedCharacterAfterDoctypeSystemIdentifier),this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}BOGUS_DOCTYPE_STATE(e){e===iZ.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=sZ):e===iZ.NULL?this._err(rZ.unexpectedNullCharacter):e===iZ.EOF&&(this._emitCurrentToken(),this._emitEOFToken())}CDATA_SECTION_STATE(e){e===iZ.RIGHT_SQUARE_BRACKET?this.state="CDATA_SECTION_BRACKET_STATE":e===iZ.EOF?(this._err(rZ.eofInCdata),this._emitEOFToken()):this._emitCodePoint(e)}CDATA_SECTION_BRACKET_STATE(e){e===iZ.RIGHT_SQUARE_BRACKET?this.state="CDATA_SECTION_END_STATE":(this._emitChars("]"),this._reconsumeInState("CDATA_SECTION_STATE"))}CDATA_SECTION_END_STATE(e){e===iZ.GREATER_THAN_SIGN?this.state=sZ:e===iZ.RIGHT_SQUARE_BRACKET?this._emitChars("]"):(this._emitChars("]]"),this._reconsumeInState("CDATA_SECTION_STATE"))}CHARACTER_REFERENCE_STATE(e){this.tempBuff=[iZ.AMPERSAND],e===iZ.NUMBER_SIGN?(this.tempBuff.push(e),this.state="NUMERIC_CHARACTER_REFERENCE_STATE"):dZ(e)?this._reconsumeInState("NAMED_CHARACTER_REFERENCE_STATE"):(this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}NAMED_CHARACTER_REFERENCE_STATE(e){const t=this._matchNamedCharacterReference(e);if(this._ensureHibernation())this.tempBuff=[iZ.AMPERSAND];else if(t){const e=this.tempBuff[this.tempBuff.length-1]===iZ.SEMICOLON;this._isCharacterReferenceAttributeQuirk(e)||(e||this._errOnNextCodePoint(rZ.missingSemicolonAfterCharacterReference),this.tempBuff=t),this._flushCodePointsConsumedAsCharacterReference(),this.state=this.returnState}else this._flushCodePointsConsumedAsCharacterReference(),this.state="AMBIGUOS_AMPERSAND_STATE"}AMBIGUOS_AMPERSAND_STATE(e){dZ(e)?this._isCharacterReferenceInAttribute()?this.currentAttr.value+=vZ(e):this._emitCodePoint(e):(e===iZ.SEMICOLON&&this._err(rZ.unknownNamedCharacterReference),this._reconsumeInState(this.returnState))}NUMERIC_CHARACTER_REFERENCE_STATE(e){this.charRefCode=0,e===iZ.LATIN_SMALL_X||e===iZ.LATIN_CAPITAL_X?(this.tempBuff.push(e),this.state="HEXADEMICAL_CHARACTER_REFERENCE_START_STATE"):this._reconsumeInState("DECIMAL_CHARACTER_REFERENCE_START_STATE")}HEXADEMICAL_CHARACTER_REFERENCE_START_STATE(e){!function(e){return cZ(e)||fZ(e)||mZ(e)}(e)?(this._err(rZ.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)):this._reconsumeInState("HEXADEMICAL_CHARACTER_REFERENCE_STATE")}DECIMAL_CHARACTER_REFERENCE_START_STATE(e){cZ(e)?this._reconsumeInState("DECIMAL_CHARACTER_REFERENCE_STATE"):(this._err(rZ.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}HEXADEMICAL_CHARACTER_REFERENCE_STATE(e){fZ(e)?this.charRefCode=16*this.charRefCode+e-55:mZ(e)?this.charRefCode=16*this.charRefCode+e-87:cZ(e)?this.charRefCode=16*this.charRefCode+e-48:e===iZ.SEMICOLON?this.state="NUMERIC_CHARACTER_REFERENCE_END_STATE":(this._err(rZ.missingSemicolonAfterCharacterReference),this._reconsumeInState("NUMERIC_CHARACTER_REFERENCE_END_STATE"))}DECIMAL_CHARACTER_REFERENCE_STATE(e){cZ(e)?this.charRefCode=10*this.charRefCode+e-48:e===iZ.SEMICOLON?this.state="NUMERIC_CHARACTER_REFERENCE_END_STATE":(this._err(rZ.missingSemicolonAfterCharacterReference),this._reconsumeInState("NUMERIC_CHARACTER_REFERENCE_END_STATE"))}NUMERIC_CHARACTER_REFERENCE_END_STATE(){if(this.charRefCode===iZ.NULL)this._err(rZ.nullCharacterReference),this.charRefCode=iZ.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(rZ.characterReferenceOutsideUnicodeRange),this.charRefCode=iZ.REPLACEMENT_CHARACTER;else if(tZ.isSurrogate(this.charRefCode))this._err(rZ.surrogateCharacterReference),this.charRefCode=iZ.REPLACEMENT_CHARACTER;else if(tZ.isUndefinedCodePoint(this.charRefCode))this._err(rZ.noncharacterCharacterReference);else if(tZ.isControlCodePoint(this.charRefCode)||this.charRefCode===iZ.CARRIAGE_RETURN){this._err(rZ.controlCharacterReference);const e=oZ[this.charRefCode];e&&(this.charRefCode=e)}this.tempBuff=[this.charRefCode],this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)}}EZ.CHARACTER_TOKEN="CHARACTER_TOKEN",EZ.NULL_CHARACTER_TOKEN="NULL_CHARACTER_TOKEN",EZ.WHITESPACE_CHARACTER_TOKEN="WHITESPACE_CHARACTER_TOKEN",EZ.START_TAG_TOKEN="START_TAG_TOKEN",EZ.END_TAG_TOKEN="END_TAG_TOKEN",EZ.COMMENT_TOKEN="COMMENT_TOKEN",EZ.DOCTYPE_TOKEN="DOCTYPE_TOKEN",EZ.EOF_TOKEN="EOF_TOKEN",EZ.HIBERNATION_TOKEN="HIBERNATION_TOKEN",EZ.MODE={DATA:sZ,RCDATA:"RCDATA_STATE",RAWTEXT:"RAWTEXT_STATE",SCRIPT_DATA:"SCRIPT_DATA_STATE",PLAINTEXT:"PLAINTEXT_STATE"},EZ.getTokenAttr=function(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null};var bZ=EZ,CZ={};const TZ=CZ.NAMESPACES={HTML:"http://www.w3.org/1999/xhtml",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"};CZ.ATTRS={TYPE:"type",ACTION:"action",ENCODING:"encoding",PROMPT:"prompt",NAME:"name",COLOR:"color",FACE:"face",SIZE:"size"},CZ.DOCUMENT_MODE={NO_QUIRKS:"no-quirks",QUIRKS:"quirks",LIMITED_QUIRKS:"limited-quirks"};const wZ=CZ.TAG_NAMES={A:"a",ADDRESS:"address",ANNOTATION_XML:"annotation-xml",APPLET:"applet",AREA:"area",ARTICLE:"article",ASIDE:"aside",B:"b",BASE:"base",BASEFONT:"basefont",BGSOUND:"bgsound",BIG:"big",BLOCKQUOTE:"blockquote",BODY:"body",BR:"br",BUTTON:"button",CAPTION:"caption",CENTER:"center",CODE:"code",COL:"col",COLGROUP:"colgroup",DD:"dd",DESC:"desc",DETAILS:"details",DIALOG:"dialog",DIR:"dir",DIV:"div",DL:"dl",DT:"dt",EM:"em",EMBED:"embed",FIELDSET:"fieldset",FIGCAPTION:"figcaption",FIGURE:"figure",FONT:"font",FOOTER:"footer",FOREIGN_OBJECT:"foreignObject",FORM:"form",FRAME:"frame",FRAMESET:"frameset",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HEAD:"head",HEADER:"header",HGROUP:"hgroup",HR:"hr",HTML:"html",I:"i",IMG:"img",IMAGE:"image",INPUT:"input",IFRAME:"iframe",KEYGEN:"keygen",LABEL:"label",LI:"li",LINK:"link",LISTING:"listing",MAIN:"main",MALIGNMARK:"malignmark",MARQUEE:"marquee",MATH:"math",MENU:"menu",META:"meta",MGLYPH:"mglyph",MI:"mi",MO:"mo",MN:"mn",MS:"ms",MTEXT:"mtext",NAV:"nav",NOBR:"nobr",NOFRAMES:"noframes",NOEMBED:"noembed",NOSCRIPT:"noscript",OBJECT:"object",OL:"ol",OPTGROUP:"optgroup",OPTION:"option",P:"p",PARAM:"param",PLAINTEXT:"plaintext",PRE:"pre",RB:"rb",RP:"rp",RT:"rt",RTC:"rtc",RUBY:"ruby",S:"s",SCRIPT:"script",SECTION:"section",SELECT:"select",SOURCE:"source",SMALL:"small",SPAN:"span",STRIKE:"strike",STRONG:"strong",STYLE:"style",SUB:"sub",SUMMARY:"summary",SUP:"sup",TABLE:"table",TBODY:"tbody",TEMPLATE:"template",TEXTAREA:"textarea",TFOOT:"tfoot",TD:"td",TH:"th",THEAD:"thead",TITLE:"title",TR:"tr",TRACK:"track",TT:"tt",U:"u",UL:"ul",SVG:"svg",VAR:"var",WBR:"wbr",XMP:"xmp"};CZ.SPECIAL_ELEMENTS={[TZ.HTML]:{[wZ.ADDRESS]:!0,[wZ.APPLET]:!0,[wZ.AREA]:!0,[wZ.ARTICLE]:!0,[wZ.ASIDE]:!0,[wZ.BASE]:!0,[wZ.BASEFONT]:!0,[wZ.BGSOUND]:!0,[wZ.BLOCKQUOTE]:!0,[wZ.BODY]:!0,[wZ.BR]:!0,[wZ.BUTTON]:!0,[wZ.CAPTION]:!0,[wZ.CENTER]:!0,[wZ.COL]:!0,[wZ.COLGROUP]:!0,[wZ.DD]:!0,[wZ.DETAILS]:!0,[wZ.DIR]:!0,[wZ.DIV]:!0,[wZ.DL]:!0,[wZ.DT]:!0,[wZ.EMBED]:!0,[wZ.FIELDSET]:!0,[wZ.FIGCAPTION]:!0,[wZ.FIGURE]:!0,[wZ.FOOTER]:!0,[wZ.FORM]:!0,[wZ.FRAME]:!0,[wZ.FRAMESET]:!0,[wZ.H1]:!0,[wZ.H2]:!0,[wZ.H3]:!0,[wZ.H4]:!0,[wZ.H5]:!0,[wZ.H6]:!0,[wZ.HEAD]:!0,[wZ.HEADER]:!0,[wZ.HGROUP]:!0,[wZ.HR]:!0,[wZ.HTML]:!0,[wZ.IFRAME]:!0,[wZ.IMG]:!0,[wZ.INPUT]:!0,[wZ.LI]:!0,[wZ.LINK]:!0,[wZ.LISTING]:!0,[wZ.MAIN]:!0,[wZ.MARQUEE]:!0,[wZ.MENU]:!0,[wZ.META]:!0,[wZ.NAV]:!0,[wZ.NOEMBED]:!0,[wZ.NOFRAMES]:!0,[wZ.NOSCRIPT]:!0,[wZ.OBJECT]:!0,[wZ.OL]:!0,[wZ.P]:!0,[wZ.PARAM]:!0,[wZ.PLAINTEXT]:!0,[wZ.PRE]:!0,[wZ.SCRIPT]:!0,[wZ.SECTION]:!0,[wZ.SELECT]:!0,[wZ.SOURCE]:!0,[wZ.STYLE]:!0,[wZ.SUMMARY]:!0,[wZ.TABLE]:!0,[wZ.TBODY]:!0,[wZ.TD]:!0,[wZ.TEMPLATE]:!0,[wZ.TEXTAREA]:!0,[wZ.TFOOT]:!0,[wZ.TH]:!0,[wZ.THEAD]:!0,[wZ.TITLE]:!0,[wZ.TR]:!0,[wZ.TRACK]:!0,[wZ.UL]:!0,[wZ.WBR]:!0,[wZ.XMP]:!0},[TZ.MATHML]:{[wZ.MI]:!0,[wZ.MO]:!0,[wZ.MN]:!0,[wZ.MS]:!0,[wZ.MTEXT]:!0,[wZ.ANNOTATION_XML]:!0},[TZ.SVG]:{[wZ.TITLE]:!0,[wZ.FOREIGN_OBJECT]:!0,[wZ.DESC]:!0}};const SZ=CZ,kZ=SZ.TAG_NAMES,_Z=SZ.NAMESPACES;function AZ(e){switch(e.length){case 1:return e===kZ.P;case 2:return e===kZ.RB||e===kZ.RP||e===kZ.RT||e===kZ.DD||e===kZ.DT||e===kZ.LI;case 3:return e===kZ.RTC;case 6:return e===kZ.OPTION;case 8:return e===kZ.OPTGROUP}return!1}function OZ(e){switch(e.length){case 1:return e===kZ.P;case 2:return e===kZ.RB||e===kZ.RP||e===kZ.RT||e===kZ.DD||e===kZ.DT||e===kZ.LI||e===kZ.TD||e===kZ.TH||e===kZ.TR;case 3:return e===kZ.RTC;case 5:return e===kZ.TBODY||e===kZ.TFOOT||e===kZ.THEAD;case 6:return e===kZ.OPTION;case 7:return e===kZ.CAPTION;case 8:return e===kZ.OPTGROUP||e===kZ.COLGROUP}return!1}function IZ(e,t){switch(e.length){case 2:if(e===kZ.TD||e===kZ.TH)return t===_Z.HTML;if(e===kZ.MI||e===kZ.MO||e===kZ.MN||e===kZ.MS)return t===_Z.MATHML;break;case 4:if(e===kZ.HTML)return t===_Z.HTML;if(e===kZ.DESC)return t===_Z.SVG;break;case 5:if(e===kZ.TABLE)return t===_Z.HTML;if(e===kZ.MTEXT)return t===_Z.MATHML;if(e===kZ.TITLE)return t===_Z.SVG;break;case 6:return(e===kZ.APPLET||e===kZ.OBJECT)&&t===_Z.HTML;case 7:return(e===kZ.CAPTION||e===kZ.MARQUEE)&&t===_Z.HTML;case 8:return e===kZ.TEMPLATE&&t===_Z.HTML;case 13:return e===kZ.FOREIGN_OBJECT&&t===_Z.SVG;case 14:return e===kZ.ANNOTATION_XML&&t===_Z.MATHML}return!1}var MZ=class{constructor(e,t){this.stackTop=-1,this.items=[],this.current=e,this.currentTagName=null,this.currentTmplContent=null,this.tmplCount=0,this.treeAdapter=t}_indexOf(e){let t=-1;for(let n=this.stackTop;n>=0;n--)if(this.items[n]===e){t=n;break}return t}_isInTemplate(){return this.currentTagName===kZ.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===_Z.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagName=this.current&&this.treeAdapter.getTagName(this.current),this.currentTmplContent=this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):null}push(e){this.items[++this.stackTop]=e,this._updateCurrentElement(),this._isInTemplate()&&this.tmplCount++}pop(){this.stackTop--,this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this._updateCurrentElement()}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&this._updateCurrentElement()}insertAfter(e,t){const n=this._indexOf(e)+1;this.items.splice(n,0,t),n===++this.stackTop&&this._updateCurrentElement()}popUntilTagNamePopped(e){for(;this.stackTop>-1;){const t=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),t===e&&n===_Z.HTML)break}}popUntilElementPopped(e){for(;this.stackTop>-1;){const t=this.current;if(this.pop(),t===e)break}}popUntilNumberedHeaderPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===kZ.H1||e===kZ.H2||e===kZ.H3||e===kZ.H4||e===kZ.H5||e===kZ.H6&&t===_Z.HTML)break}}popUntilTableCellPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===kZ.TD||e===kZ.TH&&t===_Z.HTML)break}}popAllUpToHtmlElement(){this.stackTop=0,this._updateCurrentElement()}clearBackToTableContext(){for(;this.currentTagName!==kZ.TABLE&&this.currentTagName!==kZ.TEMPLATE&&this.currentTagName!==kZ.HTML||this.treeAdapter.getNamespaceURI(this.current)!==_Z.HTML;)this.pop()}clearBackToTableBodyContext(){for(;this.currentTagName!==kZ.TBODY&&this.currentTagName!==kZ.TFOOT&&this.currentTagName!==kZ.THEAD&&this.currentTagName!==kZ.TEMPLATE&&this.currentTagName!==kZ.HTML||this.treeAdapter.getNamespaceURI(this.current)!==_Z.HTML;)this.pop()}clearBackToTableRowContext(){for(;this.currentTagName!==kZ.TR&&this.currentTagName!==kZ.TEMPLATE&&this.currentTagName!==kZ.HTML||this.treeAdapter.getNamespaceURI(this.current)!==_Z.HTML;)this.pop()}remove(e){for(let t=this.stackTop;t>=0;t--)if(this.items[t]===e){this.items.splice(t,1),this.stackTop--,this._updateCurrentElement();break}}tryPeekProperlyNestedBodyElement(){const e=this.items[1];return e&&this.treeAdapter.getTagName(e)===kZ.BODY?e:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){let t=this._indexOf(e);return--t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.currentTagName===kZ.HTML}hasInScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===_Z.HTML)return!0;if(IZ(n,r))return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]),n=this.treeAdapter.getNamespaceURI(this.items[e]);if((t===kZ.H1||t===kZ.H2||t===kZ.H3||t===kZ.H4||t===kZ.H5||t===kZ.H6)&&n===_Z.HTML)return!0;if(IZ(t,n))return!1}return!0}hasInListItemScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===_Z.HTML)return!0;if((n===kZ.UL||n===kZ.OL)&&r===_Z.HTML||IZ(n,r))return!1}return!0}hasInButtonScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===_Z.HTML)return!0;if(n===kZ.BUTTON&&r===_Z.HTML||IZ(n,r))return!1}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===_Z.HTML){if(n===e)return!0;if(n===kZ.TABLE||n===kZ.TEMPLATE||n===kZ.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]);if(this.treeAdapter.getNamespaceURI(this.items[e])===_Z.HTML){if(t===kZ.TBODY||t===kZ.THEAD||t===kZ.TFOOT)return!0;if(t===kZ.TABLE||t===kZ.HTML)return!1}}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===_Z.HTML){if(n===e)return!0;if(n!==kZ.OPTION&&n!==kZ.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;AZ(this.currentTagName);)this.pop()}generateImpliedEndTagsThoroughly(){for(;OZ(this.currentTagName);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;AZ(this.currentTagName)&&this.currentTagName!==e;)this.pop()}};class NZ{constructor(e){this.length=0,this.entries=[],this.treeAdapter=e,this.bookmark=null}_getNoahArkConditionCandidates(e){const t=[];if(this.length>=3){const n=this.treeAdapter.getAttrList(e).length,r=this.treeAdapter.getTagName(e),i=this.treeAdapter.getNamespaceURI(e);for(let e=this.length-1;e>=0;e--){const a=this.entries[e];if(a.type===NZ.MARKER_ENTRY)break;const o=a.element,s=this.treeAdapter.getAttrList(o);this.treeAdapter.getTagName(o)===r&&this.treeAdapter.getNamespaceURI(o)===i&&s.length===n&&t.push({idx:e,attrs:s})}}return t.length<3?[]:t}_ensureNoahArkCondition(e){const t=this._getNoahArkConditionCandidates(e);let n=t.length;if(n){const r=this.treeAdapter.getAttrList(e),i=r.length,a=Object.create(null);for(let e=0;e<i;e++){const t=r[e];a[t.name]=t.value}for(let e=0;e<i;e++)for(let r=0;r<n;r++){const i=t[r].attrs[e];if(a[i.name]!==i.value&&(t.splice(r,1),n--),t.length<3)return}for(let e=n-1;e>=2;e--)this.entries.splice(t[e].idx,1),this.length--}}insertMarker(){this.entries.push({type:NZ.MARKER_ENTRY}),this.length++}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.push({type:NZ.ELEMENT_ENTRY,element:e,token:t}),this.length++}insertElementAfterBookmark(e,t){let n=this.length-1;for(;n>=0&&this.entries[n]!==this.bookmark;n--);this.entries.splice(n+1,0,{type:NZ.ELEMENT_ENTRY,element:e,token:t}),this.length++}removeEntry(e){for(let t=this.length-1;t>=0;t--)if(this.entries[t]===e){this.entries.splice(t,1),this.length--;break}}clearToLastMarker(){for(;this.length;){const e=this.entries.pop();if(this.length--,e.type===NZ.MARKER_ENTRY)break}}getElementEntryInScopeWithTagName(e){for(let t=this.length-1;t>=0;t--){const n=this.entries[t];if(n.type===NZ.MARKER_ENTRY)return null;if(this.treeAdapter.getTagName(n.element)===e)return n}return null}getElementEntry(e){for(let t=this.length-1;t>=0;t--){const n=this.entries[t];if(n.type===NZ.ELEMENT_ENTRY&&n.element===e)return n}return null}}NZ.MARKER_ENTRY="MARKER_ENTRY",NZ.ELEMENT_ENTRY="ELEMENT_ENTRY";var FZ=NZ;class LZ{constructor(e){const t={},n=this._getOverriddenMethods(this,t);for(const r of Object.keys(n))"function"==typeof n[r]&&(t[r]=e[r],e[r]=n[r])}_getOverriddenMethods(){throw new Error("Not implemented")}}LZ.install=function(e,t,n){e.__mixins||(e.__mixins=[]);for(let i=0;i<e.__mixins.length;i++)if(e.__mixins[i].constructor===t)return e.__mixins[i];const r=new t(e,n);return e.__mixins.push(r),r};var PZ=LZ;const RZ=PZ;var DZ=class extends RZ{constructor(e){super(e),this.preprocessor=e,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.offset=0,this.col=0,this.line=1}_getOverriddenMethods(e,t){return{advance(){const n=this.pos+1,r=this.html[n];return e.isEol&&(e.isEol=!1,e.line++,e.lineStartPos=n),("\n"===r||"\r"===r&&"\n"!==this.html[n+1])&&(e.isEol=!0),e.col=n-e.lineStartPos+1,e.offset=e.droppedBufferSize+n,t.advance.call(this)},retreat(){t.retreat.call(this),e.isEol=!1,e.col=this.pos-e.lineStartPos+1},dropParsedChunk(){const n=this.pos;t.dropParsedChunk.call(this);const r=n-this.pos;e.lineStartPos-=r,e.droppedBufferSize+=r,e.offset=e.droppedBufferSize+this.pos}}}};const BZ=PZ,zZ=bZ,HZ=DZ;var jZ=class extends BZ{constructor(e){super(e),this.tokenizer=e,this.posTracker=BZ.install(e.preprocessor,HZ),this.currentAttrLocation=null,this.ctLoc=null}_getCurrentLocation(){return{startLine:this.posTracker.line,startCol:this.posTracker.col,startOffset:this.posTracker.offset,endLine:-1,endCol:-1,endOffset:-1}}_attachCurrentAttrLocationInfo(){this.currentAttrLocation.endLine=this.posTracker.line,this.currentAttrLocation.endCol=this.posTracker.col,this.currentAttrLocation.endOffset=this.posTracker.offset;const e=this.tokenizer.currentToken,t=this.tokenizer.currentAttr;e.location.attrs||(e.location.attrs=Object.create(null)),e.location.attrs[t.name]=this.currentAttrLocation}_getOverriddenMethods(e,t){const n={_createStartTagToken(){t._createStartTagToken.call(this),this.currentToken.location=e.ctLoc},_createEndTagToken(){t._createEndTagToken.call(this),this.currentToken.location=e.ctLoc},_createCommentToken(){t._createCommentToken.call(this),this.currentToken.location=e.ctLoc},_createDoctypeToken(n){t._createDoctypeToken.call(this,n),this.currentToken.location=e.ctLoc},_createCharacterToken(n,r){t._createCharacterToken.call(this,n,r),this.currentCharacterToken.location=e.ctLoc},_createEOFToken(){t._createEOFToken.call(this),this.currentToken.location=e._getCurrentLocation()},_createAttr(n){t._createAttr.call(this,n),e.currentAttrLocation=e._getCurrentLocation()},_leaveAttrName(n){t._leaveAttrName.call(this,n),e._attachCurrentAttrLocationInfo()},_leaveAttrValue(n){t._leaveAttrValue.call(this,n),e._attachCurrentAttrLocationInfo()},_emitCurrentToken(){const n=this.currentToken.location;this.currentCharacterToken&&(this.currentCharacterToken.location.endLine=n.startLine,this.currentCharacterToken.location.endCol=n.startCol,this.currentCharacterToken.location.endOffset=n.startOffset),this.currentToken.type===zZ.EOF_TOKEN?(n.endLine=n.startLine,n.endCol=n.startCol,n.endOffset=n.startOffset):(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col+1,n.endOffset=e.posTracker.offset+1),t._emitCurrentToken.call(this)},_emitCurrentCharacterToken(){const n=this.currentCharacterToken&&this.currentCharacterToken.location;n&&-1===n.endOffset&&(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col,n.endOffset=e.posTracker.offset),t._emitCurrentCharacterToken.call(this)}};return Object.keys(zZ.MODE).forEach((r=>{const i=zZ.MODE[r];n[i]=function(n){e.ctLoc=e._getCurrentLocation(),t[i].call(this,n)}})),n}};const GZ=PZ;const $Z=PZ,YZ=bZ,UZ=jZ,VZ=class extends GZ{constructor(e,t){super(e),this.onItemPop=t.onItemPop}_getOverriddenMethods(e,t){return{pop(){e.onItemPop(this.current),t.pop.call(this)},popAllUpToHtmlElement(){for(let t=this.stackTop;t>0;t--)e.onItemPop(this.items[t]);t.popAllUpToHtmlElement.call(this)},remove(n){e.onItemPop(this.current),t.remove.call(this,n)}}}},WZ=CZ.TAG_NAMES;var XZ=class extends $Z{constructor(e){super(e),this.parser=e,this.treeAdapter=this.parser.treeAdapter,this.posTracker=null,this.lastStartTagToken=null,this.lastFosterParentingLocation=null,this.currentToken=null}_setStartLocation(e){let t=null;this.lastStartTagToken&&(t=Object.assign({},this.lastStartTagToken.location),t.startTag=this.lastStartTagToken.location),this.treeAdapter.setNodeSourceCodeLocation(e,t)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),i={};t.type===YZ.END_TAG_TOKEN&&r===t.tagName?(i.endTag=Object.assign({},n),i.endLine=n.endLine,i.endCol=n.endCol,i.endOffset=n.endOffset):(i.endLine=n.startLine,i.endCol=n.startCol,i.endOffset=n.startOffset),this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}_getOverriddenMethods(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),e.lastStartTagToken=null,e.lastFosterParentingLocation=null,e.currentToken=null;const i=$Z.install(this.tokenizer,UZ);e.posTracker=i.posTracker,$Z.install(this.openElements,VZ,{onItemPop:function(t){e._setEndLocation(t,e.currentToken)}})},_runParsingLoop(n){t._runParsingLoop.call(this,n);for(let t=this.openElements.stackTop;t>=0;t--)e._setEndLocation(this.openElements.items[t],e.currentToken)},_processTokenInForeignContent(n){e.currentToken=n,t._processTokenInForeignContent.call(this,n)},_processToken(n){e.currentToken=n,t._processToken.call(this,n);if(n.type===YZ.END_TAG_TOKEN&&(n.tagName===WZ.HTML||n.tagName===WZ.BODY&&this.openElements.hasInScope(WZ.BODY)))for(let t=this.openElements.stackTop;t>=0;t--){const r=this.openElements.items[t];if(this.treeAdapter.getTagName(r)===n.tagName){e._setEndLocation(r,n);break}}},_setDocumentType(e){t._setDocumentType.call(this,e);const n=this.treeAdapter.getChildNodes(this.document),r=n.length;for(let t=0;t<r;t++){const r=n[t];if(this.treeAdapter.isDocumentTypeNode(r)){this.treeAdapter.setNodeSourceCodeLocation(r,e.location);break}}},_attachElementToTree(n){e._setStartLocation(n),e.lastStartTagToken=null,t._attachElementToTree.call(this,n)},_appendElement(n,r){e.lastStartTagToken=n,t._appendElement.call(this,n,r)},_insertElement(n,r){e.lastStartTagToken=n,t._insertElement.call(this,n,r)},_insertTemplate(n){e.lastStartTagToken=n,t._insertTemplate.call(this,n);const r=this.treeAdapter.getTemplateContent(this.openElements.current);this.treeAdapter.setNodeSourceCodeLocation(r,null)},_insertFakeRootElement(){t._insertFakeRootElement.call(this),this.treeAdapter.setNodeSourceCodeLocation(this.openElements.current,null)},_appendCommentNode(e,n){t._appendCommentNode.call(this,e,n);const r=this.treeAdapter.getChildNodes(n),i=r[r.length-1];this.treeAdapter.setNodeSourceCodeLocation(i,e.location)},_findFosterParentingLocation(){return e.lastFosterParentingLocation=t._findFosterParentingLocation.call(this),e.lastFosterParentingLocation},_insertCharacters(n){t._insertCharacters.call(this,n);const r=this._shouldFosterParentOnInsertion(),i=r&&e.lastFosterParentingLocation.parent||this.openElements.currentTmplContent||this.openElements.current,a=this.treeAdapter.getChildNodes(i),o=r&&e.lastFosterParentingLocation.beforeElement?a.indexOf(e.lastFosterParentingLocation.beforeElement)-1:a.length-1,s=a[o];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:e,endCol:t,endOffset:r}=n.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:e,endCol:t,endOffset:r})}else this.treeAdapter.setNodeSourceCodeLocation(s,n.location)}}}};const qZ=PZ;var KZ=class extends qZ{constructor(e,t){super(e),this.posTracker=null,this.onParseError=t.onParseError}_setErrorLocation(e){e.startLine=e.endLine=this.posTracker.line,e.startCol=e.endCol=this.posTracker.col,e.startOffset=e.endOffset=this.posTracker.offset}_reportError(e){const t={code:e,startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1};this._setErrorLocation(t),this.onParseError(t)}_getOverriddenMethods(e){return{_err(t){e._reportError(t)}}}};const QZ=KZ,ZZ=DZ,JZ=PZ;const eJ=KZ,tJ=class extends QZ{constructor(e,t){super(e,t),this.posTracker=JZ.install(e,ZZ),this.lastErrOffset=-1}_reportError(e){this.lastErrOffset!==this.posTracker.offset&&(this.lastErrOffset=this.posTracker.offset,super._reportError(e))}},nJ=PZ;const rJ=KZ,iJ=class extends eJ{constructor(e,t){super(e,t);const n=nJ.install(e.preprocessor,tJ,t);this.posTracker=n.posTracker}},aJ=jZ,oJ=PZ;var sJ=class extends rJ{constructor(e,t){super(e,t),this.opts=t,this.ctLoc=null,this.locBeforeToken=!1}_setErrorLocation(e){this.ctLoc&&(e.startLine=this.ctLoc.startLine,e.startCol=this.ctLoc.startCol,e.startOffset=this.ctLoc.startOffset,e.endLine=this.locBeforeToken?this.ctLoc.startLine:this.ctLoc.endLine,e.endCol=this.locBeforeToken?this.ctLoc.startCol:this.ctLoc.endCol,e.endOffset=this.locBeforeToken?this.ctLoc.startOffset:this.ctLoc.endOffset)}_getOverriddenMethods(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),oJ.install(this.tokenizer,iJ,e.opts),oJ.install(this.tokenizer,aJ)},_processInputToken(n){e.ctLoc=n.location,t._processInputToken.call(this,n)},_err(t,n){e.locBeforeToken=n&&n.beforeToken,e._reportError(t)}}}},lJ={};const{DOCUMENT_MODE:cJ}=CZ;lJ.createDocument=function(){return{nodeName:"#document",mode:cJ.NO_QUIRKS,childNodes:[]}},lJ.createDocumentFragment=function(){return{nodeName:"#document-fragment",childNodes:[]}},lJ.createElement=function(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},lJ.createCommentNode=function(e){return{nodeName:"#comment",data:e,parentNode:null}};const uJ=function(e){return{nodeName:"#text",value:e,parentNode:null}},hJ=lJ.appendChild=function(e,t){e.childNodes.push(t),t.parentNode=e},pJ=lJ.insertBefore=function(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e};lJ.setTemplateContent=function(e,t){e.content=t},lJ.getTemplateContent=function(e){return e.content},lJ.setDocumentType=function(e,t,n,r){let i=null;for(let a=0;a<e.childNodes.length;a++)if("#documentType"===e.childNodes[a].nodeName){i=e.childNodes[a];break}i?(i.name=t,i.publicId=n,i.systemId=r):hJ(e,{nodeName:"#documentType",name:t,publicId:n,systemId:r})},lJ.setDocumentMode=function(e,t){e.mode=t},lJ.getDocumentMode=function(e){return e.mode},lJ.detachNode=function(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},lJ.insertText=function(e,t){if(e.childNodes.length){const n=e.childNodes[e.childNodes.length-1];if("#text"===n.nodeName)return void(n.value+=t)}hJ(e,uJ(t))},lJ.insertTextBefore=function(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&"#text"===r.nodeName?r.value+=t:pJ(e,uJ(t),n)},lJ.adoptAttributes=function(e,t){const n=[];for(let r=0;r<e.attrs.length;r++)n.push(e.attrs[r].name);for(let r=0;r<t.length;r++)-1===n.indexOf(t[r].name)&&e.attrs.push(t[r])},lJ.getFirstChild=function(e){return e.childNodes[0]},lJ.getChildNodes=function(e){return e.childNodes},lJ.getParentNode=function(e){return e.parentNode},lJ.getAttrList=function(e){return e.attrs},lJ.getTagName=function(e){return e.tagName},lJ.getNamespaceURI=function(e){return e.namespaceURI},lJ.getTextNodeContent=function(e){return e.value},lJ.getCommentNodeContent=function(e){return e.data},lJ.getDocumentTypeNodeName=function(e){return e.name},lJ.getDocumentTypeNodePublicId=function(e){return e.publicId},lJ.getDocumentTypeNodeSystemId=function(e){return e.systemId},lJ.isTextNode=function(e){return"#text"===e.nodeName},lJ.isCommentNode=function(e){return"#comment"===e.nodeName},lJ.isDocumentTypeNode=function(e){return"#documentType"===e.nodeName},lJ.isElementNode=function(e){return!!e.tagName},lJ.setNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=t},lJ.getNodeSourceCodeLocation=function(e){return e.sourceCodeLocation},lJ.updateNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=Object.assign(e.sourceCodeLocation,t)};var dJ={};const{DOCUMENT_MODE:fJ}=CZ,mJ=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],gJ=mJ.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]),vJ=["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"],yJ=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],xJ=yJ.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]);function EJ(e){const t=-1!==e.indexOf('"')?"'":'"';return t+e+t}function bJ(e,t){for(let n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return!0;return!1}dJ.isConforming=function(e){return"html"===e.name&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)},dJ.getDocumentMode=function(e){if("html"!==e.name)return fJ.QUIRKS;const t=e.systemId;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return fJ.QUIRKS;let n=e.publicId;if(null!==n){if(n=n.toLowerCase(),vJ.indexOf(n)>-1)return fJ.QUIRKS;let e=null===t?gJ:mJ;if(bJ(n,e))return fJ.QUIRKS;if(e=null===t?yJ:xJ,bJ(n,e))return fJ.LIMITED_QUIRKS}return fJ.NO_QUIRKS},dJ.serializeContent=function(e,t,n){let r="!DOCTYPE ";return e&&(r+=e),t?r+=" PUBLIC "+EJ(t):n&&(r+=" SYSTEM"),null!==n&&(r+=" "+EJ(n)),r};var CJ={};const TJ=bZ,wJ=CZ,SJ=wJ.TAG_NAMES,kJ=wJ.NAMESPACES,_J=wJ.ATTRS,AJ="text/html",OJ="application/xhtml+xml",IJ={attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},MJ={"xlink:actuate":{prefix:"xlink",name:"actuate",namespace:kJ.XLINK},"xlink:arcrole":{prefix:"xlink",name:"arcrole",namespace:kJ.XLINK},"xlink:href":{prefix:"xlink",name:"href",namespace:kJ.XLINK},"xlink:role":{prefix:"xlink",name:"role",namespace:kJ.XLINK},"xlink:show":{prefix:"xlink",name:"show",namespace:kJ.XLINK},"xlink:title":{prefix:"xlink",name:"title",namespace:kJ.XLINK},"xlink:type":{prefix:"xlink",name:"type",namespace:kJ.XLINK},"xml:base":{prefix:"xml",name:"base",namespace:kJ.XML},"xml:lang":{prefix:"xml",name:"lang",namespace:kJ.XML},"xml:space":{prefix:"xml",name:"space",namespace:kJ.XML},xmlns:{prefix:"",name:"xmlns",namespace:kJ.XMLNS},"xmlns:xlink":{prefix:"xmlns",name:"xlink",namespace:kJ.XMLNS}},NJ=CJ.SVG_TAG_NAMES_ADJUSTMENT_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},FJ={[SJ.B]:!0,[SJ.BIG]:!0,[SJ.BLOCKQUOTE]:!0,[SJ.BODY]:!0,[SJ.BR]:!0,[SJ.CENTER]:!0,[SJ.CODE]:!0,[SJ.DD]:!0,[SJ.DIV]:!0,[SJ.DL]:!0,[SJ.DT]:!0,[SJ.EM]:!0,[SJ.EMBED]:!0,[SJ.H1]:!0,[SJ.H2]:!0,[SJ.H3]:!0,[SJ.H4]:!0,[SJ.H5]:!0,[SJ.H6]:!0,[SJ.HEAD]:!0,[SJ.HR]:!0,[SJ.I]:!0,[SJ.IMG]:!0,[SJ.LI]:!0,[SJ.LISTING]:!0,[SJ.MENU]:!0,[SJ.META]:!0,[SJ.NOBR]:!0,[SJ.OL]:!0,[SJ.P]:!0,[SJ.PRE]:!0,[SJ.RUBY]:!0,[SJ.S]:!0,[SJ.SMALL]:!0,[SJ.SPAN]:!0,[SJ.STRONG]:!0,[SJ.STRIKE]:!0,[SJ.SUB]:!0,[SJ.SUP]:!0,[SJ.TABLE]:!0,[SJ.TT]:!0,[SJ.U]:!0,[SJ.UL]:!0,[SJ.VAR]:!0};CJ.causesExit=function(e){const t=e.tagName;return!!(t===SJ.FONT&&(null!==TJ.getTokenAttr(e,_J.COLOR)||null!==TJ.getTokenAttr(e,_J.SIZE)||null!==TJ.getTokenAttr(e,_J.FACE)))||FJ[t]},CJ.adjustTokenMathMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}},CJ.adjustTokenSVGAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=IJ[e.attrs[t].name];n&&(e.attrs[t].name=n)}},CJ.adjustTokenXMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=MJ[e.attrs[t].name];n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}},CJ.adjustTokenSVGTagName=function(e){const t=NJ[e.tagName];t&&(e.tagName=t)},CJ.isIntegrationPoint=function(e,t,n,r){return!(r&&r!==kJ.HTML||!function(e,t,n){if(t===kJ.MATHML&&e===SJ.ANNOTATION_XML)for(let r=0;r<n.length;r++)if(n[r].name===_J.ENCODING){const e=n[r].value.toLowerCase();return e===AJ||e===OJ}return t===kJ.SVG&&(e===SJ.FOREIGN_OBJECT||e===SJ.DESC||e===SJ.TITLE)}(e,t,n))||!(r&&r!==kJ.MATHML||!function(e,t){return t===kJ.MATHML&&(e===SJ.MI||e===SJ.MO||e===SJ.MN||e===SJ.MS||e===SJ.MTEXT)}(e,t))};const LJ=bZ,PJ=MZ,RJ=FZ,DJ=XZ,BJ=sJ,zJ=PZ,HJ=lJ,jJ=function(e,t){return[e,t=t||Object.create(null)].reduce(((e,t)=>(Object.keys(t).forEach((n=>{e[n]=t[n]})),e)),Object.create(null))},GJ=dJ,$J=CJ,YJ=XQ,UJ=VQ,VJ=CZ,WJ=VJ.TAG_NAMES,XJ=VJ.NAMESPACES,qJ=VJ.ATTRS,KJ={scriptingEnabled:!0,sourceCodeLocationInfo:!1,onParseError:null,treeAdapter:HJ},QJ="IN_TABLE_MODE",ZJ={[WJ.TR]:"IN_ROW_MODE",[WJ.TBODY]:"IN_TABLE_BODY_MODE",[WJ.THEAD]:"IN_TABLE_BODY_MODE",[WJ.TFOOT]:"IN_TABLE_BODY_MODE",[WJ.CAPTION]:"IN_CAPTION_MODE",[WJ.COLGROUP]:"IN_COLUMN_GROUP_MODE",[WJ.TABLE]:QJ,[WJ.BODY]:"IN_BODY_MODE",[WJ.FRAMESET]:"IN_FRAMESET_MODE"},JJ={[WJ.CAPTION]:QJ,[WJ.COLGROUP]:QJ,[WJ.TBODY]:QJ,[WJ.TFOOT]:QJ,[WJ.THEAD]:QJ,[WJ.COL]:"IN_COLUMN_GROUP_MODE",[WJ.TR]:"IN_TABLE_BODY_MODE",[WJ.TD]:"IN_ROW_MODE",[WJ.TH]:"IN_ROW_MODE"},e1={INITIAL_MODE:{[LJ.CHARACTER_TOKEN]:m1,[LJ.NULL_CHARACTER_TOKEN]:m1,[LJ.WHITESPACE_CHARACTER_TOKEN]:c1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:function(e,t){e._setDocumentType(t);const n=t.forceQuirks?VJ.DOCUMENT_MODE.QUIRKS:GJ.getDocumentMode(t);GJ.isConforming(t)||e._err(YJ.nonConformingDoctype);e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode="BEFORE_HTML_MODE"},[LJ.START_TAG_TOKEN]:m1,[LJ.END_TAG_TOKEN]:m1,[LJ.EOF_TOKEN]:m1},BEFORE_HTML_MODE:{[LJ.CHARACTER_TOKEN]:g1,[LJ.NULL_CHARACTER_TOKEN]:g1,[LJ.WHITESPACE_CHARACTER_TOKEN]:c1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){t.tagName===WJ.HTML?(e._insertElement(t,XJ.HTML),e.insertionMode="BEFORE_HEAD_MODE"):g1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n!==WJ.HTML&&n!==WJ.HEAD&&n!==WJ.BODY&&n!==WJ.BR||g1(e,t)},[LJ.EOF_TOKEN]:g1},BEFORE_HEAD_MODE:{[LJ.CHARACTER_TOKEN]:v1,[LJ.NULL_CHARACTER_TOKEN]:v1,[LJ.WHITESPACE_CHARACTER_TOKEN]:c1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:u1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.HTML?P1(e,t):n===WJ.HEAD?(e._insertElement(t,XJ.HTML),e.headElement=e.openElements.current,e.insertionMode="IN_HEAD_MODE"):v1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.HEAD||n===WJ.BODY||n===WJ.HTML||n===WJ.BR?v1(e,t):e._err(YJ.endTagWithoutMatchingOpenElement)},[LJ.EOF_TOKEN]:v1},IN_HEAD_MODE:{[LJ.CHARACTER_TOKEN]:E1,[LJ.NULL_CHARACTER_TOKEN]:E1,[LJ.WHITESPACE_CHARACTER_TOKEN]:d1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:u1,[LJ.START_TAG_TOKEN]:y1,[LJ.END_TAG_TOKEN]:x1,[LJ.EOF_TOKEN]:E1},IN_HEAD_NO_SCRIPT_MODE:{[LJ.CHARACTER_TOKEN]:b1,[LJ.NULL_CHARACTER_TOKEN]:b1,[LJ.WHITESPACE_CHARACTER_TOKEN]:d1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:u1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.HTML?P1(e,t):n===WJ.BASEFONT||n===WJ.BGSOUND||n===WJ.HEAD||n===WJ.LINK||n===WJ.META||n===WJ.NOFRAMES||n===WJ.STYLE?y1(e,t):n===WJ.NOSCRIPT?e._err(YJ.nestedNoscriptInHead):b1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.NOSCRIPT?(e.openElements.pop(),e.insertionMode="IN_HEAD_MODE"):n===WJ.BR?b1(e,t):e._err(YJ.endTagWithoutMatchingOpenElement)},[LJ.EOF_TOKEN]:b1},AFTER_HEAD_MODE:{[LJ.CHARACTER_TOKEN]:C1,[LJ.NULL_CHARACTER_TOKEN]:C1,[LJ.WHITESPACE_CHARACTER_TOKEN]:d1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:u1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.HTML?P1(e,t):n===WJ.BODY?(e._insertElement(t,XJ.HTML),e.framesetOk=!1,e.insertionMode="IN_BODY_MODE"):n===WJ.FRAMESET?(e._insertElement(t,XJ.HTML),e.insertionMode="IN_FRAMESET_MODE"):n===WJ.BASE||n===WJ.BASEFONT||n===WJ.BGSOUND||n===WJ.LINK||n===WJ.META||n===WJ.NOFRAMES||n===WJ.SCRIPT||n===WJ.STYLE||n===WJ.TEMPLATE||n===WJ.TITLE?(e._err(YJ.abandonedHeadElementChild),e.openElements.push(e.headElement),y1(e,t),e.openElements.remove(e.headElement)):n===WJ.HEAD?e._err(YJ.misplacedStartTagForHeadElement):C1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.BODY||n===WJ.HTML||n===WJ.BR?C1(e,t):n===WJ.TEMPLATE?x1(e,t):e._err(YJ.endTagWithoutMatchingOpenElement)},[LJ.EOF_TOKEN]:C1},IN_BODY_MODE:{[LJ.CHARACTER_TOKEN]:w1,[LJ.NULL_CHARACTER_TOKEN]:c1,[LJ.WHITESPACE_CHARACTER_TOKEN]:T1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:P1,[LJ.END_TAG_TOKEN]:z1,[LJ.EOF_TOKEN]:H1},TEXT_MODE:{[LJ.CHARACTER_TOKEN]:d1,[LJ.NULL_CHARACTER_TOKEN]:d1,[LJ.WHITESPACE_CHARACTER_TOKEN]:d1,[LJ.COMMENT_TOKEN]:c1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:c1,[LJ.END_TAG_TOKEN]:function(e,t){t.tagName===WJ.SCRIPT&&(e.pendingScript=e.openElements.current);e.openElements.pop(),e.insertionMode=e.originalInsertionMode},[LJ.EOF_TOKEN]:function(e,t){e._err(YJ.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e._processToken(t)}},[QJ]:{[LJ.CHARACTER_TOKEN]:j1,[LJ.NULL_CHARACTER_TOKEN]:j1,[LJ.WHITESPACE_CHARACTER_TOKEN]:j1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:G1,[LJ.END_TAG_TOKEN]:$1,[LJ.EOF_TOKEN]:H1},IN_TABLE_TEXT_MODE:{[LJ.CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0},[LJ.NULL_CHARACTER_TOKEN]:c1,[LJ.WHITESPACE_CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t)},[LJ.COMMENT_TOKEN]:U1,[LJ.DOCTYPE_TOKEN]:U1,[LJ.START_TAG_TOKEN]:U1,[LJ.END_TAG_TOKEN]:U1,[LJ.EOF_TOKEN]:U1},IN_CAPTION_MODE:{[LJ.CHARACTER_TOKEN]:w1,[LJ.NULL_CHARACTER_TOKEN]:c1,[LJ.WHITESPACE_CHARACTER_TOKEN]:T1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.CAPTION||n===WJ.COL||n===WJ.COLGROUP||n===WJ.TBODY||n===WJ.TD||n===WJ.TFOOT||n===WJ.TH||n===WJ.THEAD||n===WJ.TR?e.openElements.hasInTableScope(WJ.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(WJ.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=QJ,e._processToken(t)):P1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.CAPTION||n===WJ.TABLE?e.openElements.hasInTableScope(WJ.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(WJ.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=QJ,n===WJ.TABLE&&e._processToken(t)):n!==WJ.BODY&&n!==WJ.COL&&n!==WJ.COLGROUP&&n!==WJ.HTML&&n!==WJ.TBODY&&n!==WJ.TD&&n!==WJ.TFOOT&&n!==WJ.TH&&n!==WJ.THEAD&&n!==WJ.TR&&z1(e,t)},[LJ.EOF_TOKEN]:H1},IN_COLUMN_GROUP_MODE:{[LJ.CHARACTER_TOKEN]:V1,[LJ.NULL_CHARACTER_TOKEN]:V1,[LJ.WHITESPACE_CHARACTER_TOKEN]:d1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.HTML?P1(e,t):n===WJ.COL?(e._appendElement(t,XJ.HTML),t.ackSelfClosing=!0):n===WJ.TEMPLATE?y1(e,t):V1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.COLGROUP?e.openElements.currentTagName===WJ.COLGROUP&&(e.openElements.pop(),e.insertionMode=QJ):n===WJ.TEMPLATE?x1(e,t):n!==WJ.COL&&V1(e,t)},[LJ.EOF_TOKEN]:H1},IN_TABLE_BODY_MODE:{[LJ.CHARACTER_TOKEN]:j1,[LJ.NULL_CHARACTER_TOKEN]:j1,[LJ.WHITESPACE_CHARACTER_TOKEN]:j1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.TR?(e.openElements.clearBackToTableBodyContext(),e._insertElement(t,XJ.HTML),e.insertionMode="IN_ROW_MODE"):n===WJ.TH||n===WJ.TD?(e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(WJ.TR),e.insertionMode="IN_ROW_MODE",e._processToken(t)):n===WJ.CAPTION||n===WJ.COL||n===WJ.COLGROUP||n===WJ.TBODY||n===WJ.TFOOT||n===WJ.THEAD?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=QJ,e._processToken(t)):G1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.TBODY||n===WJ.TFOOT||n===WJ.THEAD?e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=QJ):n===WJ.TABLE?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=QJ,e._processToken(t)):(n!==WJ.BODY&&n!==WJ.CAPTION&&n!==WJ.COL&&n!==WJ.COLGROUP||n!==WJ.HTML&&n!==WJ.TD&&n!==WJ.TH&&n!==WJ.TR)&&$1(e,t)},[LJ.EOF_TOKEN]:H1},IN_ROW_MODE:{[LJ.CHARACTER_TOKEN]:j1,[LJ.NULL_CHARACTER_TOKEN]:j1,[LJ.WHITESPACE_CHARACTER_TOKEN]:j1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.TH||n===WJ.TD?(e.openElements.clearBackToTableRowContext(),e._insertElement(t,XJ.HTML),e.insertionMode="IN_CELL_MODE",e.activeFormattingElements.insertMarker()):n===WJ.CAPTION||n===WJ.COL||n===WJ.COLGROUP||n===WJ.TBODY||n===WJ.TFOOT||n===WJ.THEAD||n===WJ.TR?e.openElements.hasInTableScope(WJ.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):G1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.TR?e.openElements.hasInTableScope(WJ.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE"):n===WJ.TABLE?e.openElements.hasInTableScope(WJ.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):n===WJ.TBODY||n===WJ.TFOOT||n===WJ.THEAD?(e.openElements.hasInTableScope(n)||e.openElements.hasInTableScope(WJ.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):(n!==WJ.BODY&&n!==WJ.CAPTION&&n!==WJ.COL&&n!==WJ.COLGROUP||n!==WJ.HTML&&n!==WJ.TD&&n!==WJ.TH)&&$1(e,t)},[LJ.EOF_TOKEN]:H1},IN_CELL_MODE:{[LJ.CHARACTER_TOKEN]:w1,[LJ.NULL_CHARACTER_TOKEN]:c1,[LJ.WHITESPACE_CHARACTER_TOKEN]:T1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.CAPTION||n===WJ.COL||n===WJ.COLGROUP||n===WJ.TBODY||n===WJ.TD||n===WJ.TFOOT||n===WJ.TH||n===WJ.THEAD||n===WJ.TR?(e.openElements.hasInTableScope(WJ.TD)||e.openElements.hasInTableScope(WJ.TH))&&(e._closeTableCell(),e._processToken(t)):P1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.TD||n===WJ.TH?e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode="IN_ROW_MODE"):n===WJ.TABLE||n===WJ.TBODY||n===WJ.TFOOT||n===WJ.THEAD||n===WJ.TR?e.openElements.hasInTableScope(n)&&(e._closeTableCell(),e._processToken(t)):n!==WJ.BODY&&n!==WJ.CAPTION&&n!==WJ.COL&&n!==WJ.COLGROUP&&n!==WJ.HTML&&z1(e,t)},[LJ.EOF_TOKEN]:H1},IN_SELECT_MODE:{[LJ.CHARACTER_TOKEN]:d1,[LJ.NULL_CHARACTER_TOKEN]:c1,[LJ.WHITESPACE_CHARACTER_TOKEN]:d1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:W1,[LJ.END_TAG_TOKEN]:X1,[LJ.EOF_TOKEN]:H1},IN_SELECT_IN_TABLE_MODE:{[LJ.CHARACTER_TOKEN]:d1,[LJ.NULL_CHARACTER_TOKEN]:c1,[LJ.WHITESPACE_CHARACTER_TOKEN]:d1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.CAPTION||n===WJ.TABLE||n===WJ.TBODY||n===WJ.TFOOT||n===WJ.THEAD||n===WJ.TR||n===WJ.TD||n===WJ.TH?(e.openElements.popUntilTagNamePopped(WJ.SELECT),e._resetInsertionMode(),e._processToken(t)):W1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.CAPTION||n===WJ.TABLE||n===WJ.TBODY||n===WJ.TFOOT||n===WJ.THEAD||n===WJ.TR||n===WJ.TD||n===WJ.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(WJ.SELECT),e._resetInsertionMode(),e._processToken(t)):X1(e,t)},[LJ.EOF_TOKEN]:H1},IN_TEMPLATE_MODE:{[LJ.CHARACTER_TOKEN]:w1,[LJ.NULL_CHARACTER_TOKEN]:c1,[LJ.WHITESPACE_CHARACTER_TOKEN]:T1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;if(n===WJ.BASE||n===WJ.BASEFONT||n===WJ.BGSOUND||n===WJ.LINK||n===WJ.META||n===WJ.NOFRAMES||n===WJ.SCRIPT||n===WJ.STYLE||n===WJ.TEMPLATE||n===WJ.TITLE)y1(e,t);else{const r=JJ[n]||"IN_BODY_MODE";e._popTmplInsertionMode(),e._pushTmplInsertionMode(r),e.insertionMode=r,e._processToken(t)}},[LJ.END_TAG_TOKEN]:function(e,t){t.tagName===WJ.TEMPLATE&&x1(e,t)},[LJ.EOF_TOKEN]:q1},AFTER_BODY_MODE:{[LJ.CHARACTER_TOKEN]:K1,[LJ.NULL_CHARACTER_TOKEN]:K1,[LJ.WHITESPACE_CHARACTER_TOKEN]:T1,[LJ.COMMENT_TOKEN]:function(e,t){e._appendCommentNode(t,e.openElements.items[0])},[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){t.tagName===WJ.HTML?P1(e,t):K1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){t.tagName===WJ.HTML?e.fragmentContext||(e.insertionMode="AFTER_AFTER_BODY_MODE"):K1(e,t)},[LJ.EOF_TOKEN]:f1},IN_FRAMESET_MODE:{[LJ.CHARACTER_TOKEN]:c1,[LJ.NULL_CHARACTER_TOKEN]:c1,[LJ.WHITESPACE_CHARACTER_TOKEN]:d1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.HTML?P1(e,t):n===WJ.FRAMESET?e._insertElement(t,XJ.HTML):n===WJ.FRAME?(e._appendElement(t,XJ.HTML),t.ackSelfClosing=!0):n===WJ.NOFRAMES&&y1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){t.tagName!==WJ.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagName===WJ.FRAMESET||(e.insertionMode="AFTER_FRAMESET_MODE"))},[LJ.EOF_TOKEN]:f1},AFTER_FRAMESET_MODE:{[LJ.CHARACTER_TOKEN]:c1,[LJ.NULL_CHARACTER_TOKEN]:c1,[LJ.WHITESPACE_CHARACTER_TOKEN]:d1,[LJ.COMMENT_TOKEN]:h1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.HTML?P1(e,t):n===WJ.NOFRAMES&&y1(e,t)},[LJ.END_TAG_TOKEN]:function(e,t){t.tagName===WJ.HTML&&(e.insertionMode="AFTER_AFTER_FRAMESET_MODE")},[LJ.EOF_TOKEN]:f1},AFTER_AFTER_BODY_MODE:{[LJ.CHARACTER_TOKEN]:Q1,[LJ.NULL_CHARACTER_TOKEN]:Q1,[LJ.WHITESPACE_CHARACTER_TOKEN]:T1,[LJ.COMMENT_TOKEN]:p1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){t.tagName===WJ.HTML?P1(e,t):Q1(e,t)},[LJ.END_TAG_TOKEN]:Q1,[LJ.EOF_TOKEN]:f1},AFTER_AFTER_FRAMESET_MODE:{[LJ.CHARACTER_TOKEN]:c1,[LJ.NULL_CHARACTER_TOKEN]:c1,[LJ.WHITESPACE_CHARACTER_TOKEN]:T1,[LJ.COMMENT_TOKEN]:p1,[LJ.DOCTYPE_TOKEN]:c1,[LJ.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===WJ.HTML?P1(e,t):n===WJ.NOFRAMES&&y1(e,t)},[LJ.END_TAG_TOKEN]:c1,[LJ.EOF_TOKEN]:f1}};var t1=class{constructor(e){this.options=jJ(KJ,e),this.treeAdapter=this.options.treeAdapter,this.pendingScript=null,this.options.sourceCodeLocationInfo&&zJ.install(this,DJ),this.options.onParseError&&zJ.install(this,BJ,{onParseError:this.options.onParseError})}parse(e){const t=this.treeAdapter.createDocument();return this._bootstrap(t,null),this.tokenizer.write(e,!0),this._runParsingLoop(null),t}parseFragment(e,t){t||(t=this.treeAdapter.createElement(WJ.TEMPLATE,XJ.HTML,[]));const n=this.treeAdapter.createElement("documentmock",XJ.HTML,[]);this._bootstrap(n,t),this.treeAdapter.getTagName(t)===WJ.TEMPLATE&&this._pushTmplInsertionMode("IN_TEMPLATE_MODE"),this._initTokenizerForFragmentParsing(),this._insertFakeRootElement(),this._resetInsertionMode(),this._findFormInFragmentContext(),this.tokenizer.write(e,!0),this._runParsingLoop(null);const r=this.treeAdapter.getFirstChild(n),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(r,i),i}_bootstrap(e,t){this.tokenizer=new LJ(this.options),this.stopped=!1,this.insertionMode="INITIAL_MODE",this.originalInsertionMode="",this.document=e,this.fragmentContext=t,this.headElement=null,this.formElement=null,this.openElements=new PJ(this.document,this.treeAdapter),this.activeFormattingElements=new RJ(this.treeAdapter),this.tmplInsertionModeStack=[],this.tmplInsertionModeStackTop=-1,this.currentTmplInsertionMode=null,this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1}_err(){}_runParsingLoop(e){for(;!this.stopped;){this._setupTokenizerCDATAMode();const t=this.tokenizer.getNextToken();if(t.type===LJ.HIBERNATION_TOKEN)break;if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.type===LJ.WHITESPACE_CHARACTER_TOKEN&&"\n"===t.chars[0])){if(1===t.chars.length)continue;t.chars=t.chars.substr(1)}if(this._processInputToken(t),e&&this.pendingScript)break}}runParsingLoopForCurrentChunk(e,t){if(this._runParsingLoop(t),t&&this.pendingScript){const e=this.pendingScript;return this.pendingScript=null,void t(e)}e&&e()}_setupTokenizerCDATAMode(){const e=this._getAdjustedCurrentElement();this.tokenizer.allowCDATA=e&&e!==this.document&&this.treeAdapter.getNamespaceURI(e)!==XJ.HTML&&!this._isIntegrationPoint(e)}_switchToTextParsing(e,t){this._insertElement(e,XJ.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode="TEXT_MODE"}switchToPlaintextParsing(){this.insertionMode="TEXT_MODE",this.originalInsertionMode="IN_BODY_MODE",this.tokenizer.state=LJ.MODE.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;do{if(this.treeAdapter.getTagName(e)===WJ.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}while(e)}_initTokenizerForFragmentParsing(){if(this.treeAdapter.getNamespaceURI(this.fragmentContext)===XJ.HTML){const e=this.treeAdapter.getTagName(this.fragmentContext);e===WJ.TITLE||e===WJ.TEXTAREA?this.tokenizer.state=LJ.MODE.RCDATA:e===WJ.STYLE||e===WJ.XMP||e===WJ.IFRAME||e===WJ.NOEMBED||e===WJ.NOFRAMES||e===WJ.NOSCRIPT?this.tokenizer.state=LJ.MODE.RAWTEXT:e===WJ.SCRIPT?this.tokenizer.state=LJ.MODE.SCRIPT_DATA:e===WJ.PLAINTEXT&&(this.tokenizer.state=LJ.MODE.PLAINTEXT)}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",r=e.systemId||"";this.treeAdapter.setDocumentType(this.document,t,n,r)}_attachElementToTree(e){if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n),this.openElements.push(n)}_insertFakeElement(e){const t=this.treeAdapter.createElement(e,XJ.HTML,[]);this._attachElementToTree(t),this.openElements.push(t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,XJ.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t),this.openElements.push(t)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(WJ.HTML,XJ.HTML,[]);this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n)}_insertCharacters(e){if(this._shouldFosterParentOnInsertion())this._fosterParentText(e.chars);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.insertText(t,e.chars)}}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_shouldProcessTokenInForeignContent(e){const t=this._getAdjustedCurrentElement();if(!t||t===this.document)return!1;const n=this.treeAdapter.getNamespaceURI(t);if(n===XJ.HTML)return!1;if(this.treeAdapter.getTagName(t)===WJ.ANNOTATION_XML&&n===XJ.MATHML&&e.type===LJ.START_TAG_TOKEN&&e.tagName===WJ.SVG)return!1;const r=e.type===LJ.CHARACTER_TOKEN||e.type===LJ.NULL_CHARACTER_TOKEN||e.type===LJ.WHITESPACE_CHARACTER_TOKEN;return(!(e.type===LJ.START_TAG_TOKEN&&e.tagName!==WJ.MGLYPH&&e.tagName!==WJ.MALIGNMARK)&&!r||!this._isIntegrationPoint(t,XJ.MATHML))&&((e.type!==LJ.START_TAG_TOKEN&&!r||!this._isIntegrationPoint(t,XJ.HTML))&&e.type!==LJ.EOF_TOKEN)}_processToken(e){e1[this.insertionMode][e.type](this,e)}_processTokenInBodyMode(e){e1.IN_BODY_MODE[e.type](this,e)}_processTokenInForeignContent(e){e.type===LJ.CHARACTER_TOKEN?function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e):e.type===LJ.NULL_CHARACTER_TOKEN?function(e,t){t.chars=UJ.REPLACEMENT_CHARACTER,e._insertCharacters(t)}(this,e):e.type===LJ.WHITESPACE_CHARACTER_TOKEN?d1(this,e):e.type===LJ.COMMENT_TOKEN?h1(this,e):e.type===LJ.START_TAG_TOKEN?function(e,t){if($J.causesExit(t)&&!e.fragmentContext){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==XJ.HTML&&!e._isIntegrationPoint(e.openElements.current);)e.openElements.pop();e._processToken(t)}else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===XJ.MATHML?$J.adjustTokenMathMLAttrs(t):r===XJ.SVG&&($J.adjustTokenSVGTagName(t),$J.adjustTokenSVGAttrs(t)),$J.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):e.type===LJ.END_TAG_TOKEN&&function(e,t){for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===XJ.HTML){e._processToken(t);break}if(e.treeAdapter.getTagName(r).toLowerCase()===t.tagName){e.openElements.popUntilElementPopped(r);break}}}(this,e)}_processInputToken(e){this._shouldProcessTokenInForeignContent(e)?this._processTokenInForeignContent(e):this._processToken(e),e.type===LJ.START_TAG_TOKEN&&e.selfClosing&&!e.ackSelfClosing&&this._err(YJ.nonVoidHtmlElementStartTagWithTrailingSolidus)}_isIntegrationPoint(e,t){const n=this.treeAdapter.getTagName(e),r=this.treeAdapter.getNamespaceURI(e),i=this.treeAdapter.getAttrList(e);return $J.isIntegrationPoint(n,r,i,t)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.length;if(e){let t=e,n=null;do{if(t--,n=this.activeFormattingElements.entries[t],n.type===RJ.MARKER_ENTRY||this.openElements.contains(n.element)){t++;break}}while(t>0);for(let r=t;r<e;r++)n=this.activeFormattingElements.entries[r],this._insertElement(n.token,this.treeAdapter.getNamespaceURI(n.element)),n.element=this.openElements.current}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode="IN_ROW_MODE"}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(WJ.P),this.openElements.popUntilTagNamePopped(WJ.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop,t=!1;e>=0;e--){let n=this.openElements.items[e];0===e&&(t=!0,this.fragmentContext&&(n=this.fragmentContext));const r=this.treeAdapter.getTagName(n),i=ZJ[r];if(i){this.insertionMode=i;break}if(!(t||r!==WJ.TD&&r!==WJ.TH)){this.insertionMode="IN_CELL_MODE";break}if(!t&&r===WJ.HEAD){this.insertionMode="IN_HEAD_MODE";break}if(r===WJ.SELECT){this._resetInsertionModeForSelect(e);break}if(r===WJ.TEMPLATE){this.insertionMode=this.currentTmplInsertionMode;break}if(r===WJ.HTML){this.insertionMode=this.headElement?"AFTER_HEAD_MODE":"BEFORE_HEAD_MODE";break}if(t){this.insertionMode="IN_BODY_MODE";break}}}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.items[t],n=this.treeAdapter.getTagName(e);if(n===WJ.TEMPLATE)break;if(n===WJ.TABLE)return void(this.insertionMode="IN_SELECT_IN_TABLE_MODE")}this.insertionMode="IN_SELECT_MODE"}_pushTmplInsertionMode(e){this.tmplInsertionModeStack.push(e),this.tmplInsertionModeStackTop++,this.currentTmplInsertionMode=e}_popTmplInsertionMode(){this.tmplInsertionModeStack.pop(),this.tmplInsertionModeStackTop--,this.currentTmplInsertionMode=this.tmplInsertionModeStack[this.tmplInsertionModeStackTop]}_isElementCausesFosterParenting(e){const t=this.treeAdapter.getTagName(e);return t===WJ.TABLE||t===WJ.TBODY||t===WJ.TFOOT||t===WJ.THEAD||t===WJ.TR}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.current)}_findFosterParentingLocation(){const e={parent:null,beforeElement:null};for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t],r=this.treeAdapter.getTagName(n),i=this.treeAdapter.getNamespaceURI(n);if(r===WJ.TEMPLATE&&i===XJ.HTML){e.parent=this.treeAdapter.getTemplateContent(n);break}if(r===WJ.TABLE){e.parent=this.treeAdapter.getParentNode(n),e.parent?e.beforeElement=n:e.parent=this.openElements.items[t-1];break}}return e.parent||(e.parent=this.openElements.items[0]),e}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_fosterParentText(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertTextBefore(t.parent,e,t.beforeElement):this.treeAdapter.insertText(t.parent,e)}_isSpecialElement(e){const t=this.treeAdapter.getTagName(e),n=this.treeAdapter.getNamespaceURI(e);return VJ.SPECIAL_ELEMENTS[n][t]}};function n1(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagName)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):B1(e,t),n}function r1(e,t){let n=null;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i)&&(n=i)}return n||(e.openElements.popUntilElementPopped(t.element),e.activeFormattingElements.removeEntry(t)),n}function i1(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let a=0,o=i;o!==n;a++,o=i){i=e.openElements.getCommonAncestor(o);const n=e.activeFormattingElements.getElementEntry(o),s=n&&a>=3;!n||s?(s&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(o)):(o=a1(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function a1(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function o1(e,t,n){if(e._isElementCausesFosterParenting(t))e._fosterParentElement(n);else{const r=e.treeAdapter.getTagName(t),i=e.treeAdapter.getNamespaceURI(t);r===WJ.TEMPLATE&&i===XJ.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function s1(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),i=n.token,a=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,n.token),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,a)}function l1(e,t){let n;for(let r=0;r<8&&(n=n1(e,t),n);r++){const t=r1(e,n);if(!t)break;e.activeFormattingElements.bookmark=n;const r=i1(e,t,n.element),i=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(r),o1(e,i,r),s1(e,t,n)}}function c1(){}function u1(e){e._err(YJ.misplacedDoctype)}function h1(e,t){e._appendCommentNode(t,e.openElements.currentTmplContent||e.openElements.current)}function p1(e,t){e._appendCommentNode(t,e.document)}function d1(e,t){e._insertCharacters(t)}function f1(e){e.stopped=!0}function m1(e,t){e._err(YJ.missingDoctype,{beforeToken:!0}),e.treeAdapter.setDocumentMode(e.document,VJ.DOCUMENT_MODE.QUIRKS),e.insertionMode="BEFORE_HTML_MODE",e._processToken(t)}function g1(e,t){e._insertFakeRootElement(),e.insertionMode="BEFORE_HEAD_MODE",e._processToken(t)}function v1(e,t){e._insertFakeElement(WJ.HEAD),e.headElement=e.openElements.current,e.insertionMode="IN_HEAD_MODE",e._processToken(t)}function y1(e,t){const n=t.tagName;n===WJ.HTML?P1(e,t):n===WJ.BASE||n===WJ.BASEFONT||n===WJ.BGSOUND||n===WJ.LINK||n===WJ.META?(e._appendElement(t,XJ.HTML),t.ackSelfClosing=!0):n===WJ.TITLE?e._switchToTextParsing(t,LJ.MODE.RCDATA):n===WJ.NOSCRIPT?e.options.scriptingEnabled?e._switchToTextParsing(t,LJ.MODE.RAWTEXT):(e._insertElement(t,XJ.HTML),e.insertionMode="IN_HEAD_NO_SCRIPT_MODE"):n===WJ.NOFRAMES||n===WJ.STYLE?e._switchToTextParsing(t,LJ.MODE.RAWTEXT):n===WJ.SCRIPT?e._switchToTextParsing(t,LJ.MODE.SCRIPT_DATA):n===WJ.TEMPLATE?(e._insertTemplate(t,XJ.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode="IN_TEMPLATE_MODE",e._pushTmplInsertionMode("IN_TEMPLATE_MODE")):n===WJ.HEAD?e._err(YJ.misplacedStartTagForHeadElement):E1(e,t)}function x1(e,t){const n=t.tagName;n===WJ.HEAD?(e.openElements.pop(),e.insertionMode="AFTER_HEAD_MODE"):n===WJ.BODY||n===WJ.BR||n===WJ.HTML?E1(e,t):n===WJ.TEMPLATE&&e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagName!==WJ.TEMPLATE&&e._err(YJ.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(WJ.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode()):e._err(YJ.endTagWithoutMatchingOpenElement)}function E1(e,t){e.openElements.pop(),e.insertionMode="AFTER_HEAD_MODE",e._processToken(t)}function b1(e,t){const n=t.type===LJ.EOF_TOKEN?YJ.openElementsLeftAfterEof:YJ.disallowedContentInNoscriptInHead;e._err(n),e.openElements.pop(),e.insertionMode="IN_HEAD_MODE",e._processToken(t)}function C1(e,t){e._insertFakeElement(WJ.BODY),e.insertionMode="IN_BODY_MODE",e._processToken(t)}function T1(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function w1(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function S1(e,t){e.openElements.hasInButtonScope(WJ.P)&&e._closePElement(),e._insertElement(t,XJ.HTML)}function k1(e,t){e.openElements.hasInButtonScope(WJ.P)&&e._closePElement(),e._insertElement(t,XJ.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function _1(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,XJ.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function A1(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,XJ.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function O1(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,XJ.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function I1(e,t){e._appendElement(t,XJ.HTML),t.ackSelfClosing=!0}function M1(e,t){e._switchToTextParsing(t,LJ.MODE.RAWTEXT)}function N1(e,t){e.openElements.currentTagName===WJ.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,XJ.HTML)}function F1(e,t){e.openElements.hasInScope(WJ.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,XJ.HTML)}function L1(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,XJ.HTML)}function P1(e,t){const n=t.tagName;switch(n.length){case 1:n===WJ.I||n===WJ.S||n===WJ.B||n===WJ.U?_1(e,t):n===WJ.P?S1(e,t):n===WJ.A?function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(WJ.A);n&&(l1(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,XJ.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):L1(e,t);break;case 2:n===WJ.DL||n===WJ.OL||n===WJ.UL?S1(e,t):n===WJ.H1||n===WJ.H2||n===WJ.H3||n===WJ.H4||n===WJ.H5||n===WJ.H6?function(e,t){e.openElements.hasInButtonScope(WJ.P)&&e._closePElement();const n=e.openElements.currentTagName;n!==WJ.H1&&n!==WJ.H2&&n!==WJ.H3&&n!==WJ.H4&&n!==WJ.H5&&n!==WJ.H6||e.openElements.pop(),e._insertElement(t,XJ.HTML)}(e,t):n===WJ.LI||n===WJ.DD||n===WJ.DT?function(e,t){e.framesetOk=!1;const n=t.tagName;for(let r=e.openElements.stackTop;r>=0;r--){const t=e.openElements.items[r],i=e.treeAdapter.getTagName(t);let a=null;if(n===WJ.LI&&i===WJ.LI?a=WJ.LI:n!==WJ.DD&&n!==WJ.DT||i!==WJ.DD&&i!==WJ.DT||(a=i),a){e.openElements.generateImpliedEndTagsWithExclusion(a),e.openElements.popUntilTagNamePopped(a);break}if(i!==WJ.ADDRESS&&i!==WJ.DIV&&i!==WJ.P&&e._isSpecialElement(t))break}e.openElements.hasInButtonScope(WJ.P)&&e._closePElement(),e._insertElement(t,XJ.HTML)}(e,t):n===WJ.EM||n===WJ.TT?_1(e,t):n===WJ.BR?O1(e,t):n===WJ.HR?function(e,t){e.openElements.hasInButtonScope(WJ.P)&&e._closePElement(),e._appendElement(t,XJ.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t):n===WJ.RB?F1(e,t):n===WJ.RT||n===WJ.RP?function(e,t){e.openElements.hasInScope(WJ.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(WJ.RTC),e._insertElement(t,XJ.HTML)}(e,t):n!==WJ.TH&&n!==WJ.TD&&n!==WJ.TR&&L1(e,t);break;case 3:n===WJ.DIV||n===WJ.DIR||n===WJ.NAV?S1(e,t):n===WJ.PRE?k1(e,t):n===WJ.BIG?_1(e,t):n===WJ.IMG||n===WJ.WBR?O1(e,t):n===WJ.XMP?function(e,t){e.openElements.hasInButtonScope(WJ.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,LJ.MODE.RAWTEXT)}(e,t):n===WJ.SVG?function(e,t){e._reconstructActiveFormattingElements(),$J.adjustTokenSVGAttrs(t),$J.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,XJ.SVG):e._insertElement(t,XJ.SVG),t.ackSelfClosing=!0}(e,t):n===WJ.RTC?F1(e,t):n!==WJ.COL&&L1(e,t);break;case 4:n===WJ.HTML?function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t):n===WJ.BASE||n===WJ.LINK||n===WJ.META?y1(e,t):n===WJ.BODY?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t):n===WJ.MAIN||n===WJ.MENU?S1(e,t):n===WJ.FORM?function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(WJ.P)&&e._closePElement(),e._insertElement(t,XJ.HTML),n||(e.formElement=e.openElements.current))}(e,t):n===WJ.CODE||n===WJ.FONT?_1(e,t):n===WJ.NOBR?function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(WJ.NOBR)&&(l1(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,XJ.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):n===WJ.AREA?O1(e,t):n===WJ.MATH?function(e,t){e._reconstructActiveFormattingElements(),$J.adjustTokenMathMLAttrs(t),$J.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,XJ.MATHML):e._insertElement(t,XJ.MATHML),t.ackSelfClosing=!0}(e,t):n===WJ.MENU?function(e,t){e.openElements.hasInButtonScope(WJ.P)&&e._closePElement(),e._insertElement(t,XJ.HTML)}(e,t):n!==WJ.HEAD&&L1(e,t);break;case 5:n===WJ.STYLE||n===WJ.TITLE?y1(e,t):n===WJ.ASIDE?S1(e,t):n===WJ.SMALL?_1(e,t):n===WJ.TABLE?function(e,t){e.treeAdapter.getDocumentMode(e.document)!==VJ.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(WJ.P)&&e._closePElement(),e._insertElement(t,XJ.HTML),e.framesetOk=!1,e.insertionMode=QJ}(e,t):n===WJ.EMBED?O1(e,t):n===WJ.INPUT?function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,XJ.HTML);const n=LJ.getTokenAttr(t,qJ.TYPE);n&&"hidden"===n.toLowerCase()||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t):n===WJ.PARAM||n===WJ.TRACK?I1(e,t):n===WJ.IMAGE?function(e,t){t.tagName=WJ.IMG,O1(e,t)}(e,t):n!==WJ.FRAME&&n!==WJ.TBODY&&n!==WJ.TFOOT&&n!==WJ.THEAD&&L1(e,t);break;case 6:n===WJ.SCRIPT?y1(e,t):n===WJ.CENTER||n===WJ.FIGURE||n===WJ.FOOTER||n===WJ.HEADER||n===WJ.HGROUP||n===WJ.DIALOG?S1(e,t):n===WJ.BUTTON?function(e,t){e.openElements.hasInScope(WJ.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(WJ.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,XJ.HTML),e.framesetOk=!1}(e,t):n===WJ.STRIKE||n===WJ.STRONG?_1(e,t):n===WJ.APPLET||n===WJ.OBJECT?A1(e,t):n===WJ.KEYGEN?O1(e,t):n===WJ.SOURCE?I1(e,t):n===WJ.IFRAME?function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,LJ.MODE.RAWTEXT)}(e,t):n===WJ.SELECT?function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,XJ.HTML),e.framesetOk=!1,e.insertionMode===QJ||"IN_CAPTION_MODE"===e.insertionMode||"IN_TABLE_BODY_MODE"===e.insertionMode||"IN_ROW_MODE"===e.insertionMode||"IN_CELL_MODE"===e.insertionMode?e.insertionMode="IN_SELECT_IN_TABLE_MODE":e.insertionMode="IN_SELECT_MODE"}(e,t):n===WJ.OPTION?N1(e,t):L1(e,t);break;case 7:n===WJ.BGSOUND?y1(e,t):n===WJ.DETAILS||n===WJ.ADDRESS||n===WJ.ARTICLE||n===WJ.SECTION||n===WJ.SUMMARY?S1(e,t):n===WJ.LISTING?k1(e,t):n===WJ.MARQUEE?A1(e,t):n===WJ.NOEMBED?M1(e,t):n!==WJ.CAPTION&&L1(e,t);break;case 8:n===WJ.BASEFONT?y1(e,t):n===WJ.FRAMESET?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,XJ.HTML),e.insertionMode="IN_FRAMESET_MODE")}(e,t):n===WJ.FIELDSET?S1(e,t):n===WJ.TEXTAREA?function(e,t){e._insertElement(t,XJ.HTML),e.skipNextNewLine=!0,e.tokenizer.state=LJ.MODE.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode="TEXT_MODE"}(e,t):n===WJ.TEMPLATE?y1(e,t):n===WJ.NOSCRIPT?e.options.scriptingEnabled?M1(e,t):L1(e,t):n===WJ.OPTGROUP?N1(e,t):n!==WJ.COLGROUP&&L1(e,t);break;case 9:n===WJ.PLAINTEXT?function(e,t){e.openElements.hasInButtonScope(WJ.P)&&e._closePElement(),e._insertElement(t,XJ.HTML),e.tokenizer.state=LJ.MODE.PLAINTEXT}(e,t):L1(e,t);break;case 10:n===WJ.BLOCKQUOTE||n===WJ.FIGCAPTION?S1(e,t):L1(e,t);break;default:L1(e,t)}}function R1(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function D1(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function B1(e,t){const n=t.tagName;for(let r=e.openElements.stackTop;r>0;r--){const t=e.openElements.items[r];if(e.treeAdapter.getTagName(t)===n){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilElementPopped(t);break}if(e._isSpecialElement(t))break}}function z1(e,t){const n=t.tagName;switch(n.length){case 1:n===WJ.A||n===WJ.B||n===WJ.I||n===WJ.S||n===WJ.U?l1(e,t):n===WJ.P?function(e){e.openElements.hasInButtonScope(WJ.P)||e._insertFakeElement(WJ.P),e._closePElement()}(e):B1(e,t);break;case 2:n===WJ.DL||n===WJ.UL||n===WJ.OL?R1(e,t):n===WJ.LI?function(e){e.openElements.hasInListItemScope(WJ.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(WJ.LI),e.openElements.popUntilTagNamePopped(WJ.LI))}(e):n===WJ.DD||n===WJ.DT?function(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t):n===WJ.H1||n===WJ.H2||n===WJ.H3||n===WJ.H4||n===WJ.H5||n===WJ.H6?function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e):n===WJ.BR?function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(WJ.BR),e.openElements.pop(),e.framesetOk=!1}(e):n===WJ.EM||n===WJ.TT?l1(e,t):B1(e,t);break;case 3:n===WJ.BIG?l1(e,t):n===WJ.DIR||n===WJ.DIV||n===WJ.NAV||n===WJ.PRE?R1(e,t):B1(e,t);break;case 4:n===WJ.BODY?function(e){e.openElements.hasInScope(WJ.BODY)&&(e.insertionMode="AFTER_BODY_MODE")}(e):n===WJ.HTML?function(e,t){e.openElements.hasInScope(WJ.BODY)&&(e.insertionMode="AFTER_BODY_MODE",e._processToken(t))}(e,t):n===WJ.FORM?function(e){const t=e.openElements.tmplCount>0,n=e.formElement;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(WJ.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(WJ.FORM):e.openElements.remove(n))}(e):n===WJ.CODE||n===WJ.FONT||n===WJ.NOBR?l1(e,t):n===WJ.MAIN||n===WJ.MENU?R1(e,t):B1(e,t);break;case 5:n===WJ.ASIDE?R1(e,t):n===WJ.SMALL?l1(e,t):B1(e,t);break;case 6:n===WJ.CENTER||n===WJ.FIGURE||n===WJ.FOOTER||n===WJ.HEADER||n===WJ.HGROUP||n===WJ.DIALOG?R1(e,t):n===WJ.APPLET||n===WJ.OBJECT?D1(e,t):n===WJ.STRIKE||n===WJ.STRONG?l1(e,t):B1(e,t);break;case 7:n===WJ.ADDRESS||n===WJ.ARTICLE||n===WJ.DETAILS||n===WJ.SECTION||n===WJ.SUMMARY||n===WJ.LISTING?R1(e,t):n===WJ.MARQUEE?D1(e,t):B1(e,t);break;case 8:n===WJ.FIELDSET?R1(e,t):n===WJ.TEMPLATE?x1(e,t):B1(e,t);break;case 10:n===WJ.BLOCKQUOTE||n===WJ.FIGCAPTION?R1(e,t):B1(e,t);break;default:B1(e,t)}}function H1(e,t){e.tmplInsertionModeStackTop>-1?q1(e,t):e.stopped=!0}function j1(e,t){const n=e.openElements.currentTagName;n===WJ.TABLE||n===WJ.TBODY||n===WJ.TFOOT||n===WJ.THEAD||n===WJ.TR?(e.pendingCharacterTokens=[],e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode="IN_TABLE_TEXT_MODE",e._processToken(t)):Y1(e,t)}function G1(e,t){const n=t.tagName;switch(n.length){case 2:n===WJ.TD||n===WJ.TH||n===WJ.TR?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(WJ.TBODY),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)}(e,t):Y1(e,t);break;case 3:n===WJ.COL?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(WJ.COLGROUP),e.insertionMode="IN_COLUMN_GROUP_MODE",e._processToken(t)}(e,t):Y1(e,t);break;case 4:n===WJ.FORM?function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,XJ.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t):Y1(e,t);break;case 5:n===WJ.TABLE?function(e,t){e.openElements.hasInTableScope(WJ.TABLE)&&(e.openElements.popUntilTagNamePopped(WJ.TABLE),e._resetInsertionMode(),e._processToken(t))}(e,t):n===WJ.STYLE?y1(e,t):n===WJ.TBODY||n===WJ.TFOOT||n===WJ.THEAD?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,XJ.HTML),e.insertionMode="IN_TABLE_BODY_MODE"}(e,t):n===WJ.INPUT?function(e,t){const n=LJ.getTokenAttr(t,qJ.TYPE);n&&"hidden"===n.toLowerCase()?e._appendElement(t,XJ.HTML):Y1(e,t),t.ackSelfClosing=!0}(e,t):Y1(e,t);break;case 6:n===WJ.SCRIPT?y1(e,t):Y1(e,t);break;case 7:n===WJ.CAPTION?function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,XJ.HTML),e.insertionMode="IN_CAPTION_MODE"}(e,t):Y1(e,t);break;case 8:n===WJ.COLGROUP?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,XJ.HTML),e.insertionMode="IN_COLUMN_GROUP_MODE"}(e,t):n===WJ.TEMPLATE?y1(e,t):Y1(e,t);break;default:Y1(e,t)}}function $1(e,t){const n=t.tagName;n===WJ.TABLE?e.openElements.hasInTableScope(WJ.TABLE)&&(e.openElements.popUntilTagNamePopped(WJ.TABLE),e._resetInsertionMode()):n===WJ.TEMPLATE?x1(e,t):n!==WJ.BODY&&n!==WJ.CAPTION&&n!==WJ.COL&&n!==WJ.COLGROUP&&n!==WJ.HTML&&n!==WJ.TBODY&&n!==WJ.TD&&n!==WJ.TFOOT&&n!==WJ.TH&&n!==WJ.THEAD&&n!==WJ.TR&&Y1(e,t)}function Y1(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,e._processTokenInBodyMode(t),e.fosterParentingEnabled=n}function U1(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Y1(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}function V1(e,t){e.openElements.currentTagName===WJ.COLGROUP&&(e.openElements.pop(),e.insertionMode=QJ,e._processToken(t))}function W1(e,t){const n=t.tagName;n===WJ.HTML?P1(e,t):n===WJ.OPTION?(e.openElements.currentTagName===WJ.OPTION&&e.openElements.pop(),e._insertElement(t,XJ.HTML)):n===WJ.OPTGROUP?(e.openElements.currentTagName===WJ.OPTION&&e.openElements.pop(),e.openElements.currentTagName===WJ.OPTGROUP&&e.openElements.pop(),e._insertElement(t,XJ.HTML)):n===WJ.INPUT||n===WJ.KEYGEN||n===WJ.TEXTAREA||n===WJ.SELECT?e.openElements.hasInSelectScope(WJ.SELECT)&&(e.openElements.popUntilTagNamePopped(WJ.SELECT),e._resetInsertionMode(),n!==WJ.SELECT&&e._processToken(t)):n!==WJ.SCRIPT&&n!==WJ.TEMPLATE||y1(e,t)}function X1(e,t){const n=t.tagName;if(n===WJ.OPTGROUP){const t=e.openElements.items[e.openElements.stackTop-1],n=t&&e.treeAdapter.getTagName(t);e.openElements.currentTagName===WJ.OPTION&&n===WJ.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagName===WJ.OPTGROUP&&e.openElements.pop()}else n===WJ.OPTION?e.openElements.currentTagName===WJ.OPTION&&e.openElements.pop():n===WJ.SELECT&&e.openElements.hasInSelectScope(WJ.SELECT)?(e.openElements.popUntilTagNamePopped(WJ.SELECT),e._resetInsertionMode()):n===WJ.TEMPLATE&&x1(e,t)}function q1(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(WJ.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode(),e._processToken(t)):e.stopped=!0}function K1(e,t){e.insertionMode="IN_BODY_MODE",e._processToken(t)}function Q1(e,t){e.insertionMode="IN_BODY_MODE",e._processToken(t)}var Z1=/[#.]/g;const J1=new Set(["menu","submit","reset","button"]),e0={}.hasOwnProperty;function t0(e,t,n){const r=n&&function(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}(n);return function(n,i,...a){let o,s=-1;if(null==n)o={type:"root",children:[]},a.unshift(i);else if(o=function(e,t="div"){for(var n,r,i,a=e||"",o={},s=0;s<a.length;)Z1.lastIndex=s,i=Z1.exec(a),(n=a.slice(s,i?i.index:a.length))&&(r?"#"===r?o.id=n:Array.isArray(o.className)?o.className.push(n):o.className=[n]:t=n,s+=n.length),i&&(r=i[0],s++);return{type:"element",tagName:t,properties:o,children:[]}}(n,t),o.tagName=o.tagName.toLowerCase(),r&&e0.call(r,o.tagName)&&(o.tagName=r[o.tagName]),function(e,t){if(null==e||"object"!=typeof e||Array.isArray(e))return!1;if("input"===t||!e.type||"string"!=typeof e.type)return!0;if("children"in e&&Array.isArray(e.children))return!1;if("button"===t)return J1.has(e.type.toLowerCase());return!("value"in e)}(i,o.tagName)){let t;for(t in i)e0.call(i,t)&&n0(e,o.properties,t,i[t])}else a.unshift(i);for(;++s<a.length;)r0(o.children,a[s]);return"element"===o.type&&"template"===o.tagName&&(o.content={type:"root",children:o.children},o.children=[]),o}}function n0(e,t,n,r){const i=IW(e,n);let a,o=-1;if(null!=r){if("number"==typeof r){if(Number.isNaN(r))return;a=r}else a="boolean"==typeof r?r:"string"==typeof r?i.spaceSeparated?gX(r):i.commaSeparated?yX(r):i.commaOrSpaceSeparated?gX(yX(r).join(" ")):i0(i,i.property,r):Array.isArray(r)?r.concat():"style"===i.property?function(e){const t=[];let n;for(n in e)e0.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}(r):String(r);if(Array.isArray(a)){const e=[];for(;++o<a.length;)e[o]=i0(i,i.property,a[o]);a=e}"className"===i.property&&Array.isArray(t.className)&&(a=t.className.concat(a)),t[i.property]=a}}function r0(e,t){let n=-1;if(null==t);else if("string"==typeof t||"number"==typeof t)e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)r0(e,t[n]);else{if("object"!=typeof t||!("type"in t))throw new Error("Expected node, nodes, or string, got `"+t+"`");"root"===t.type?r0(e,t.children):e.push(t)}}function i0(e,t,n){if("string"==typeof n){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(""===n||nW(n)===nW(t)))return!0}return n}const a0=t0(LW,"div"),o0=t0(PW,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]);const s0={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},l0={}.hasOwnProperty,c0={"#document":h0,"#document-fragment":h0,"#text":function(e,t){return{type:"text",value:t.value}},"#comment":function(e,t){return{type:"comment",value:t.data}},"#documentType":function(){return{type:"doctype"}}};function u0(e,t){const n=e.schema,r=l0.call(c0,t.nodeName)?c0[t.nodeName]:p0;let i;"tagName"in t&&(e.schema=t.namespaceURI===s0.svg?PW:LW),"childNodes"in t&&(i=function(e,t){let n=-1;const r=[];for(;++n<t.length;)r[n]=u0(e,t[n]);return r}(e,t.childNodes));const a=r(e,t,i);if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const n=function(e,t,n){const r=d0(n);if("element"===t.type){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const r={};let i;for(i in n.attrs)l0.call(n.attrs,i)&&(r[IW(e.schema,i).property]=d0(n.attrs[i]));t.data={position:{opening:d0(n.startTag),closing:n.endTag?d0(n.endTag):null,properties:r}}}}return r}(e,a,t.sourceCodeLocation);n&&(e.location=!0,a.position=n)}return e.schema=n,a}function h0(e,t,n){const r={type:"root",children:n,data:{quirksMode:"quirks"===t.mode||"limited-quirks"===t.mode}};if(e.file&&e.location){const t=String(e.file),n=function(e){for(var t=String(e),n=[],r=/\r?\n|\r/g;r.test(t);)n.push(r.lastIndex);return n.push(t.length+1),{toPoint:function(e){var t=-1;if(e>-1&&e<n[n.length-1])for(;++t<n.length;)if(n[t]>e)return{line:t+1,column:e-(n[t-1]||0)+1,offset:e};return{line:void 0,column:void 0,offset:void 0}},toOffset:function(e){var t,r=e&&e.line,i=e&&e.column;return"number"!=typeof r||"number"!=typeof i||Number.isNaN(r)||Number.isNaN(i)||!(r-1 in n)||(t=(n[r-2]||0)+i-1||0),t>-1&&t<n[n.length-1]?t:-1}}}(t);r.position={start:n.toPoint(0),end:n.toPoint(t.length)}}return r}function p0(e,t,n){const r="svg"===e.schema.space?o0:a0;let i=-1;const a={};for(;++i<t.attrs.length;){const e=t.attrs[i];a[(e.prefix?e.prefix+":":"")+e.name]=e.value}const o=r(t.tagName,a,n);if("template"===o.tagName&&"content"in t){const n=t.sourceCodeLocation,r=n&&n.startTag&&d0(n.startTag),i=n&&n.endTag&&d0(n.endTag),a=u0(e,t.content);r&&i&&e.file&&(a.position={start:r.end,end:i.start}),o.content=a}return o}function d0(e){const t=f0({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=f0({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:null}function f0(e){return e.line&&e.column?e:null}const m0=s0,g0=FW,v0={}.hasOwnProperty,y0=AV("root"),x0=AV("element"),E0=AV("text");function b0(e,t,n){if("function"!=typeof e)throw new TypeError("h is not a function");const r=function(e){const t=e("div",{});return Boolean(t&&("_owner"in t||"_store"in t)&&(void 0===t.key||null===t.key))}(e),i=function(e){const t=e("div",{});return Boolean(t&&t.context&&t.context._isVue)}(e),a=function(e){return"VirtualNode"===e("div",{}).type}(e);let o,s;if("string"==typeof n||"boolean"==typeof n?(o=n,n={}):(n||(n={}),o=n.prefix),y0(t))s=1===t.children.length&&x0(t.children[0])?t.children[0]:{type:"element",tagName:"div",properties:{},children:t.children};else{if(!x0(t))throw new Error("Expected root or element, not `"+(t&&t.type||t)+"`");s=t}return C0(e,s,{schema:"svg"===n.space?PW:LW,prefix:null==o?r||i||a?"h-":null:"string"==typeof o?o:o?"h-":null,key:0,react:r,vue:i,vdom:a,hyperscript:w0(e)})}function C0(e,t,n){const r=n.schema;let i=r,a=t.tagName;const o={},s=[];let l,c=-1;for(l in"html"===r.space&&"svg"===a.toLowerCase()&&(i=PW,n.schema=i),t.properties)t.properties&&v0.call(t.properties,l)&&T0(o,l,t.properties[l],n,a);if(n.vdom&&("html"===i.space?a=a.toUpperCase():i.space&&(o.namespace=m0[i.space])),n.prefix&&(n.key++,o.key=n.prefix+n.key),t.children)for(;++c<t.children.length;){const r=t.children[c];x0(r)?s.push(C0(e,r,n)):E0(r)&&s.push(r.value)}return n.schema=r,s.length>0?e.call(t,a,o,s):e.call(t,a,o)}function T0(e,t,n,r,i){const a=IW(r.schema,t);let o;null==n||"number"==typeof n&&Number.isNaN(n)||!1===n&&(r.vue||r.vdom||r.hyperscript)||!n&&a.boolean&&(r.vue||r.vdom||r.hyperscript)||(Array.isArray(n)&&(n=a.commaSeparated?xX(n):vX(n)),a.boolean&&r.hyperscript&&(n=""),"style"===a.property&&"string"==typeof n&&(r.react||r.vue||r.vdom)&&(n=function(e,t){const n={};try{IX(e,((e,t)=>{"-ms-"===e.slice(0,4)&&(e="ms-"+e.slice(4)),n[e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))]=t}))}catch(r){throw r.message=t+"[style]"+r.message.slice("undefined".length),r}return n}(n,i)),r.vue?"style"!==a.property&&(o="attrs"):a.mustUseProperty||(r.vdom?"style"!==a.property&&(o="attributes"):r.hyperscript&&(o="attrs")),o?e[o]=Object.assign(e[o]||{},{[a.attribute]:n}):a.space&&r.react?e[g0[a.property]||a.property]=n:e[a.attribute]=n)}function w0(e){return"context"in e&&"cleanup"in e}var S0={}.hasOwnProperty;function k0(e,t){var n=t||{};function r(t){var n=r.invalid,i=r.handlers;if(t&&S0.call(t,e)&&(n=S0.call(i,t[e])?i[t[e]]:r.unknown),n)return n.apply(this,arguments)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}var _0={}.hasOwnProperty,A0=k0("type",{handlers:{root:function(e,t){var n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=O0(e.children,n,t),I0(e,n)},element:function(e,t){var n=t.space;return b0((function(n,r){var i,a,o,s,l,c=[];for(o in r)_0.call(r,o)&&!1!==r[o]&&((i=IW(t,o)).boolean&&!r[o]||(a={name:o,value:!0===r[o]?"":String(r[o])},i.space&&"html"!==i.space&&"svg"!==i.space&&((s=o.indexOf(":"))<0?a.prefix="":(a.name=o.slice(s+1),a.prefix=o.slice(0,s)),a.namespace=s0[i.space]),c.push(a)));"html"===t.space&&"svg"===e.tagName&&(t=PW);(l=I0(e,{nodeName:n,tagName:n,attrs:c,namespaceURI:s0[t.space],childNodes:[],parentNode:void 0})).childNodes=O0(e.children,l,t),"template"===n&&(l.content=function(e,t){var n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=O0(e.children,n,t),I0(e,n)}(e.content,t));return l}),Object.assign({},e,{children:[]}),{space:n})},text:function(e){return I0(e,{nodeName:"#text",value:e.value,parentNode:void 0})},comment:function(e){return I0(e,{nodeName:"#comment",data:e.value,parentNode:void 0})},doctype:function(e){return I0(e,{nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:void 0})}}});function O0(e,t,n){var r,i=-1,a=[];if(e)for(;++i<e.length;)(r=A0(e[i],n)).parentNode=t,a.push(r);return a}function I0(e,t){var n=e.position;return n&&n.start&&n.end&&(t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset}),t}const M0=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"],N0={sourceCodeLocationInfo:!0,scriptingEnabled:!1},F0=function(e,t,n){let r=-1;const i=new t1(N0),a=k0("type",{handlers:{root:function(e){f(e.children)},element:function(e){v(),i._processToken(L0(e),s0.html),f(e.children),M0.includes(e.tagName)||(v(),i._processToken(function(e){const t=Object.assign(D0(e));return t.startTag=Object.assign({},t),{type:"END_TAG_TOKEN",tagName:e.tagName,attrs:[],location:t}}(e)))},text:function(e){v(),i._processToken({type:"CHARACTER_TOKEN",chars:e.value,location:D0(e)})},comment:m,doctype:function(e){v(),i._processToken({type:"DOCTYPE_TOKEN",name:"html",forceQuirks:!1,publicId:"",systemId:"",location:D0(e)})},raw:function(e){const t=FV(e),n=t.line||1,r=t.column||1,a=t.offset||0;if(!u)throw new Error("Expected `preprocessor`");if(!c)throw new Error("Expected `tokenizer`");if(!h)throw new Error("Expected `posTracker`");if(!p)throw new Error("Expected `locationTracker`");u.html=void 0,u.pos=-1,u.lastGapPos=-1,u.lastCharPos=-1,u.gapStack=[],u.skipNextNewLine=!1,u.lastChunkWritten=!1,u.endOfChunkHit=!1,h.isEol=!1,h.lineStartPos=1-r,h.droppedBufferSize=a,h.offset=0,h.col=1,h.line=n,p.currentAttrLocation=void 0,p.ctLoc=D0(e),c.write(e.value),i._runParsingLoop(null),("NAMED_CHARACTER_REFERENCE_STATE"===c.state||"NUMERIC_CHARACTER_REFERENCE_END_STATE"===c.state)&&(u.lastChunkWritten=!0,c[c.state](c._consume()));const o=c.currentCharacterToken;o&&(o.location.endLine=h.line,o.location.endCol=h.col+1,o.location.endOffset=h.offset+1,i._processToken(o))}},unknown:R0});let o,c,u,h,p;if(function(e){return Boolean(e&&!("message"in e&&"messages"in e))}(t)&&(n=t,t=void 0),n&&n.passThrough)for(;++r<n.passThrough.length;)a.handlers[n.passThrough[r]]=g;const d=function(e,t={}){let n,r;return function(e){return"messages"in e}(t)?(r=t,n={}):(r=t.file,n=t),u0({schema:"svg"===n.space?PW:LW,file:r,verbose:n.verbose,location:!1},e)}(function(e){const t="root"===e.type?e.children[0]:e;return Boolean(t&&("doctype"===t.type||"element"===t.type&&"html"===t.tagName))}(e)?function(){const t=i.treeAdapter.createDocument();if(i._bootstrap(t,void 0),c=i.tokenizer,!c)throw new Error("Expected `tokenizer`");return u=c.preprocessor,p=c.__mixins[0],h=p.posTracker,a(e),t}():function(){const t={nodeName:"template",tagName:"template",attrs:[],namespaceURI:s0.html,childNodes:[]},n={nodeName:"documentmock",tagName:"documentmock",attrs:[],namespaceURI:s0.html,childNodes:[]},r={nodeName:"#document-fragment",childNodes:[]};if(i._bootstrap(n,t),i._pushTmplInsertionMode("IN_TEMPLATE_MODE"),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),c=i.tokenizer,!c)throw new Error("Expected `tokenizer`");return u=c.preprocessor,p=c.__mixins[0],h=p.posTracker,a(e),i._adoptNodes(n.childNodes[0],r),r}(),t);return o&&NV(d,"comment",((e,t,n)=>{const r=e;if(r.value.stitch&&null!==n&&null!==t)return n.children[t]=r.value.stitch,t})),"root"!==e.type&&"root"===d.type&&1===d.children.length?d.children[0]:d;function f(e){let t=-1;if(e)for(;++t<e.length;)a(e[t])}function m(e){v(),i._processToken({type:"COMMENT_TOKEN",data:e.value,location:D0(e)})}function g(e){let r;o=!0,r="children"in e?l(s({},e),{children:F0({type:"root",children:e.children},t,n).children}):s({},e),m({type:"comment",value:{stitch:r}})}function v(){if(!c)throw new Error("Expected `tokenizer`");c.tokenQueue=[],c.state="DATA_STATE",c.returnState="",c.charRefCode=-1,c.tempBuff=[],c.lastStartTagName="",c.consumedAfterSnapshot=-1,c.active=!1,c.currentCharacterToken=void 0,c.currentToken=void 0,c.currentAttr=void 0}};function L0(e){const t=Object.assign(D0(e));return t.startTag=Object.assign({},t),{type:"START_TAG_TOKEN",tagName:e.tagName,selfClosing:!1,attrs:P0(e),location:t}}function P0(e){return(t={tagName:e.tagName,type:"element",properties:e.properties,children:[]},A0(t,"svg"===n?PW:LW)).attrs;var t,n}function R0(e){throw new Error("Cannot compile `"+e.type+"` node")}function D0(e){const t=FV(e),n=LV(e);return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function B0(e={}){return(t,n)=>F0(t,n,e)}const z0=({content:e})=>d.createElement("div",{className:"markdown-wrapper"},d.createElement(HX,{remarkPlugins:[UQ],children:e,rehypePlugins:[B0]}));f.exports.createContext({}),ti.Common;const H0=(e,t)=>{const{start:n,end:r}=au(t);if("label_names()"===e)return(i={start:n,end:r},ai("/api/n9e/prometheus/api/v1/labels",{method:Qr.Get,params:s({},i)})).then((e=>e.data));if(e.startsWith("label_values(")){if(e.includes(",")){let t=e.substring("label_values(".length,e.length-1).split(",");const i=t.pop();return function(e){return ai("/api/n9e/prometheus/api/v1/series",{method:Qr.Get,params:s({},e)})}({"match[]":t.join(", ").trim(),start:n,end:r}).then((e=>Array.from(new Set(e.data.map((e=>e[i.trim()]))))))}return function(e,t){return ai(`/api/n9e/prometheus/api/v1/label/${e}/values`,{method:Qr.Get,params:s({},t)})}(e.substring("label_values(".length,e.length-1),{start:n,end:r}).then((e=>e.data))}if(e.startsWith("metrics(")){const t=e.substring("metrics(".length,e.length-1);return function(e={}){return ai("/api/n9e/prometheus/api/v1/label/__name__/values",{method:Qr.Get,params:s({},e)})}({start:n,end:r}).then((e=>e.data.filter((e=>e.includes(t)))))}if(e.startsWith("query_result(")){return function(e){return ai("/api/n9e/prometheus/api/v1/query",{method:Qr.Get,params:s({},e)})}({query:e.substring("query_result(".length,e.length-1),start:n,end:r}).then((e=>e.data.result.map((({metric:e,value:t})=>`${e.__name__||""} {${Object.keys(e).filter((e=>"__name__"!==e)).map((t=>`${t}="${e[t]}"`))}} ${t.join(" ")}`))))}var i;return Promise.resolve(e.length>0?e.split(",").map((e=>e.trim())):"")},j0=(e,t,n)=>{let r=e;for(;r.includes(t);)r=r.replace(t,n);return r};function G0(e,t,n,r=!1){void 0!==t&&(localStorage.setItem(`dashboard_${n}_${e}`,JSON.stringify(t)),r&&function(e,t){const{protocol:n,host:r,pathname:i,search:a}=window.location;var o=new URLSearchParams(a);o.set(e,t);var s=`${n}//${r}${i}?${o.toString()}`;window.history.replaceState({path:s},"",s)}(e,JSON.stringify(t)))}function $0(e,t){const{search:n}=window.location;const r=new URLSearchParams(n).get(e)||localStorage.getItem(`dashboard_${t}_${e}`);return null===r?null:r?JSON.parse(r):""}const Y0=(e,t,n,r)=>{var i=e;const a=i?i.match(/\$[0-9a-zA-Z_]+/g):[];if(a&&a.length>0)for(let o=0;o<n;o++)if(t[o]){const{name:e,options:n,reg:s}=t[o],l=$0(e,r);a.includes("$"+e)&&l&&(Array.isArray(l)?i=l.includes("all")&&n?j0(i,"$"+e,`(${n.filter((e=>!s||!U0(s)||U0(s).test(e))).join("|")})`):j0(i,"$"+e,`(${l.join("|")})`):"string"==typeof l&&(i=j0(i,"$"+e,l)))}return i};function U0(e){if(!function(e){return!!e&&"/"===e[0]}(e))return new RegExp(`^${e}$`);const t=e.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));return!!t&&new RegExp(t[1],t[2])}function V0(e,t){let n=T.map((r=e,Array.from(r.matchAll(/{{([\s0-9a-zA-Z_]+?)}}/g)).map((e=>e.length>0?e[1]:e[0]))),T.trim);var r,i=e;return n.forEach((e=>{const n=new RegExp(`{{\\s?${e}\\s?}}`,"g");i=i.replace(n,t[e]?t[e]:"")})),i}function W0(e,t){const n=[];return T.forEach(t,((t,r)=>{if(r>0){const r=n[n.length-1];r[0]+e<t[0]&&n.push([r[0]+e,null])}n.push(t)})),n}const X0=(e,t)=>{let n=e.__name__||"";return T.forEach(T.omit(e,"__name__"),((e,t)=>{n+=` ${t}: ${e}`})),T.trim(n)};var q0=d.memo((function(e){const{dashboardId:t,id:n,time:r,step:i,type:a,variableConfig:o,isPreview:c,onCloneClick:u,onShareClick:h,onEditClick:p,onDeleteClick:m}=e,g=T.cloneDeep(e.values),v=f.exports.useRef(null),[y]=ve(v),{series:x,loading:E}=function(e){const{id:t,dashboardId:n,time:r,step:i,targets:a,variableConfig:o,inViewPort:c}=e,[u,h]=f.exports.useState([]),[p,d]=f.exports.useState(!1),m=T.map(o,(e=>$0(e.name,n))),g=f.exports.useRef(!1),[v,y]=f.exports.useState({}),x=()=>{if(!v.start)return;const e=[],r=[];let{start:i,end:s,step:l}=v;T.forEach(a,(e=>{if(e.time){const{start:t,end:n}=au(e.time);i=t,s=n}e.step&&(l=e.step);const a=o?Y0(e.expr,o,o.length,n):e.expr,c=`${t}-${e.expr}`;a&&r.push(Eu({start:i,end:s,step:l,query:a},c).then((t=>{var n;return{result:null==(n=null==t?void 0:t.data)?void 0:n.result,expr:e.expr,refId:e.refId}})))})),d(!0),Promise.all(r).then((t=>{T.forEach(t,(t=>{const n=T.find(a,(e=>e.expr===t.expr));T.forEach(t.result,(r=>{e.push({id:T.uniqueId("series_"),refId:t.refId,name:(null==n?void 0:n.legend)?V0(null==n?void 0:n.legend,r.metric):X0(r.metric,t.expr),metric:r.metric,expr:t.expr,data:W0(l,r.values)})}))})),h(e)})).finally((()=>{d(!1)}))};return f.exports.useEffect((()=>{let{start:e,end:t}=au(r),n=i;i||(n=Math.max(Math.floor((t-e)/240),1)),e-=e%n,t-=t%n,y({start:e,end:t,step:n})}),[JSON.stringify(r)]),f.exports.useEffect((()=>{c?x():g.current=!1}),[JSON.stringify(T.map(a,"expr")),JSON.stringify(v),i,JSON.stringify(o),JSON.stringify(m)]),f.exports.useEffect((()=>{c&&!g.current&&(g.current=!0,x())}),[c]),f.exports.useEffect((()=>{const e=T.map(u,(e=>{const t=T.find(a,(t=>t.expr===e.expr));return l(s({},e),{name:(null==t?void 0:t.legend)?V0(null==t?void 0:t.legend,e.metric):X0(e.metric,e.expr)})}));h(e)}),[JSON.stringify(T.map(a,"legend"))]),{series:u,loading:p}}({id:n,dashboardId:t,time:r,step:i,targets:g.targets,variableConfig:o,inViewPort:c||y}),b=g.description||!T.isEmpty(g.links);if(T.isEmpty(g))return null;"string"==typeof T.get(g,"custom.colorRange")&&T.set(g,"custom.colorRange",T.split(T.get(g,"custom.colorRange"),","));const C={values:g,series:x},w={timeseries:()=>d.createElement(bh,s({},C)),stat:()=>d.createElement(Th,s({},C)),table:()=>d.createElement(Nh,s({},C)),pie:()=>d.createElement(B$,s({},C)),hexbin:()=>d.createElement(K$,s({},C))};return d.createElement("div",{className:"renderer-container",ref:v},d.createElement("div",{className:"renderer-header graph-header dashboards-panels-item-drag-handle"},b?d.createElement(Tt,{placement:"rightTop",overlayInnerStyle:{width:300},title:d.createElement("div",null,d.createElement(z0,{content:g.description}),d.createElement("div",null,T.map(g.links,((e,t)=>d.createElement("div",{key:t,style:{marginTop:8}},d.createElement("a",{href:e.url,target:e.targetBlank?"_blank":"_self"},e.title))))))},d.createElement("div",{className:"renderer-header-desc"},d.createElement("span",{className:"renderer-header-info-corner-inner"}),g.description?d.createElement(ye,null):d.createElement(xe,null))):null,d.createElement("div",{className:"renderer-header-content"},c?d.createElement("div",{className:"renderer-header-title"},g.name):d.createElement(wt,{trigger:["click"],placement:"bottomCenter",overlayStyle:{minWidth:"100px"},overlay:d.createElement(yt,null,c?null:d.createElement(d.Fragment,null,d.createElement(yt.Item,{onClick:p,key:"0"},d.createElement(L,{style:{marginRight:8}}),"编辑"),d.createElement(yt.Item,{onClick:u,key:"1"},d.createElement(z,{style:{marginRight:8}}),"克隆"),d.createElement(yt.Item,{onClick:h,key:"2"},d.createElement(ue,{style:{marginRight:8}}),"分享"),d.createElement(yt.Item,{onClick:m,key:"3"},d.createElement(Ee,{style:{marginRight:8}}),"删除")))},d.createElement("div",{className:"renderer-header-title"},g.name,d.createElement(I,{className:"renderer-header-arrow"})))),d.createElement("div",{className:"renderer-header-loading"},E&&d.createElement(ce,{spin:!0}))),d.createElement("div",{className:"renderer-body",style:{height:"calc(100% - 36px)"}},w[a]?w[a]():d.createElement("div",{className:"unknown-type"},`无效的图表类型 ${a}`)))}));function K0(){var e;const{t:t}=Lr(),{ids:n}=X(),[r,i]=f.exports.useState([]),[a,o]=f.exports.useState({num:1,unit:"hour",description:t("小时")}),[c,u]=f.exports.useState(null),[h,p]=f.exports.useState(du.Line),{clusters:m}=ri((e=>e.common)),[g,v]=f.exports.useState("");f.exports.useEffect((()=>{y()}),[]);const y=()=>{(function(e){return ai(`/api/n9e/share-charts?ids=${e}`,{method:Qr.Get})})(n).then((e=>{let t=e.dat.filter((e=>!!e)).map((e=>l(s({},JSON.parse(e.configs)),{ref:d.createRef()})));const n=t[0].curCluster;p(t[0].dataProps.chartType||du.Line),u(t[0].dataProps.step),o(t[0].dataProps.range),v(n),localStorage.setItem("curCluster",n),i(t)}))},x=d.createElement(yt,{selectedKeys:[g]},m.map((e=>d.createElement(yt.Item,{key:e,onClick:t=>{v(e),localStorage.setItem("curCluster",e),r.forEach((e=>e.ref.current.refresh()))}},e))));return d.createElement("div",{className:"chart-container"},r&&r.length>0&&g?d.createElement(d.Fragment,null,d.createElement("div",{className:"chart-container-header"},d.createElement("div",{className:"left"}),d.createElement("div",{className:"right"},d.createElement(Rt,null,d.createElement("div",null,d.createElement("span",null,"集群："),d.createElement(wt,{overlay:x},d.createElement(xt,null,g," ",d.createElement(I,null)))),d.createElement(ou,{onChange:e=>{(iu(e)?T.isEqual(e,a):e.num===a.num&&e.unit===a.unit)||o(e)},value:r[0].dataProps.range}),d.createElement(lu,{onChange:e=>u(e),initialValue:c}),!Tc.valid(null==(e=r[0].dataProps)?void 0:e.version)&&d.createElement(Bt.Group,{options:[{label:d.createElement(E,null),value:du.Line},{label:d.createElement(be,null),value:du.StackArea}],onChange:e=>{e.preventDefault(),p(e.target.value)},value:h,optionType:"button",buttonStyle:"solid"})))),r.map(((e,t)=>{var n,r;if(Tc.valid(null==(n=e.dataProps)?void 0:n.version))return d.createElement("div",{style:{height:400,border:"1px solid #efefef"}},d.createElement(q0,{dashboardId:e.id,key:t,time:a,step:c,type:null==(r=e.dataProps)?void 0:r.type,values:e.dataProps,isPreview:!0}));const i=l(s({},e.dataProps),{range:a,step:c,chartType:h,title:d.createElement(Tt,{placement:"bottomLeft",title:()=>{var t;return d.createElement("div",null,null==(t=e.dataProps.promqls)?void 0:t.map((e=>d.createElement("div",null,e.current?e.current:e))))}},d.createElement(xt,{size:"small",type:"link"},"promql 语句"))});return d.createElement(nh,{ref:e.ref,key:t,data:s({},i),graphConfigInnerVisible:!1,isShowShare:!1,highLevelConfig:e.highLevelConfig||{}})}))):d.createElement("h2",{className:"holder"},d.createElement(Ce,{style:{fontSize:"30px"}}),d.createElement("span",null,t("该分享链接无图表数据"))))}function Q0(e){const{id:t,expression:n,onChange:r}=e,{name:i,multi:a,allOption:o,options:s,type:l}=n,[c,u]=f.exports.useState($0(i,t));return f.exports.useEffect((()=>{u($0(i,t))}),[JSON.stringify($0(i,t))]),d.createElement("div",{className:"tag-content-close-item"},d.createElement("div",{className:"tag-content-close-item-tagName"},i),"query"===l?d.createElement(Mt,{mode:a?"tags":void 0,style:{width:"180px"},onChange:e=>{let n=e;if(a&&o&&n.includes("all"))n=["all"];else if(a&&!o){let e=n.indexOf("all");-1!==e&&n.splice(e,1)}G0(i,n,t,!0),u(n),r()},defaultActiveFirstOption:!1,showSearch:!0,value:c,dropdownClassName:"overflow-586"},o&&d.createElement(Mt.Option,{key:"all",value:"all"},"all"),s&&s.map((e=>d.createElement(Mt.Option,{key:e,value:e},e)))):d.createElement(Ct,{value:c,onBlur:e=>{let n=e.target.value;G0(i,n,t,!0),r()},onKeyDown:e=>{if("Enter"===e.code){let n=e.target.value;G0(i,n,t,!0),r()}},onChange:e=>{let t=e.target.value;u(t)}}))}function Z0(e){const{visible:t,onChange:n,value:r,range:i,id:a}=e,{t:o}=Lr(),[u]=bt.useForm(),h=e=>{const t=u.getFieldValue(["var",e,"reg"]),n=u.getFieldValue(["var",e,"definition"]);if((!t||new RegExp("^/(.*?)/(g?i?m?y?)$").test(t))&&n){const o=u.getFieldsValue();var r=Y0(n,o,e,a);H0(r,i).then((n=>{const r=n.filter((e=>!t||!U0(t)||U0(t).test(e)));r.length>0&&G0(o.var[e].name,r[0],a)}))}};return d.createElement(It,{title:o("大盘变量"),width:950,visible:t,onOk:async()=>{await u.validateFields();const e=u.getFieldsValue();n(e.var)},onCancel:()=>{n()},wrapClassName:"variable-modal"},d.createElement(bt,{autoComplete:"off",preserve:!1,form:u,initialValues:{var:r}},d.createElement(kt,{gutter:[6,6],className:"tag-header"},d.createElement(_t,{span:3},o("类型")),d.createElement(_t,{span:4},o("变量名")),d.createElement(_t,{span:5},o("变量定义"),d.createElement(Te,{style:{marginLeft:5},onClick:()=>window.open("https://grafana.com/docs/grafana/latest/datasources/prometheus/#query-variable","_blank")})),d.createElement(_t,{span:4},o("筛值正则")),d.createElement(_t,{span:2},o("Multi")),d.createElement(_t,{span:2},o("All Option")),d.createElement(_t,{span:4},o("操作"))),d.createElement(bt.List,{name:"var"},((e,{add:t,remove:n,move:r})=>d.createElement(d.Fragment,null,e.map((i=>{var a=i,{key:p,name:f,fieldKey:m}=a,g=c(a,["key","name","fieldKey"]);return d.createElement(kt,{gutter:[6,6],className:"tag-content-item",key:p},d.createElement(_t,{span:3},d.createElement(bt.Item,l(s({},g),{name:[f,"type"],fieldKey:[m,"type"],rules:[{required:!0,message:o("请选择变量类型")}]}),d.createElement(Mt,{style:{width:"100%"}},d.createElement(Mt.Option,{value:"query"},"Query"),d.createElement(Mt.Option,{value:"textbox"},"Text box")))),d.createElement(_t,{span:4},d.createElement(bt.Item,l(s({},g),{name:[f,"name"],fieldKey:[m,"name"],rules:[{required:!0,message:o("请输入变量名")},{pattern:/^[0-9a-zA-Z_]+$/,message:o("仅支持数字和字符下划线")}]}),d.createElement(Ct,null))),d.createElement(_t,{span:5},d.createElement(bt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>"query"===e(["var",m,"type"])?d.createElement(bt.Item,l(s({},g),{name:[f,"definition"],fieldKey:[m,"definition"],rules:[{required:!0,message:o("请输入变量定义")},{validator:(e,t)=>/^\s*label_values.+,\s*\$.+/.test(t)?Promise.reject(new Error("label_values表达式的label不允许使用变量")):Promise.resolve()}]}),d.createElement(Ct,{onBlur:e=>h(f)})):d.createElement(bt.Item,l(s({},g),{name:[f,"defaultValue"],fieldKey:[m,"defaultValue"]}),d.createElement(Ct,{onBlur:e=>h(f),placeholder:"默认值"}))))),d.createElement(_t,{span:4},d.createElement(bt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>"query"===e(["var",m,"type"])?d.createElement(bt.Item,l(s({},g),{name:[f,"reg"],fieldKey:[m,"reg"],rules:[{pattern:new RegExp("^/(.*?)/(g?i?m?y?)$"),message:o("格式不对")}]}),d.createElement(Ct,{placeholder:"/*.hna/",onBlur:e=>h(f)})):null))),d.createElement(_t,{span:2},d.createElement(bt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>"query"===e(["var",m,"type"])?d.createElement(bt.Item,l(s({},g),{name:[f,"multi"],fieldKey:[m,"multi"],valuePropName:"checked"}),d.createElement(Lt,null)):null))),d.createElement(_t,{span:2},d.createElement(bt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>"query"===e(["var",m,"type"])&&u.getFieldValue(["var",f,"multi"])?d.createElement(bt.Item,l(s({},g),{name:[f,"allOption"],fieldKey:[m,"allOption"],valuePropName:"checked"}),d.createElement(Lt,null)):null))),d.createElement(_t,{span:4},d.createElement(xt,{type:"link",size:"small",onClick:()=>r(f,f+1),disabled:f===e.length-1},d.createElement(we,null)),d.createElement(xt,{type:"link",size:"small",onClick:()=>r(f,f-1),disabled:0===f},d.createElement(Se,null)),d.createElement(xt,{type:"link",size:"small",onClick:()=>{const e=u.getFieldValue(["var",f]);t(l(s({},e),{name:"copy_of_"+e.name}))}},d.createElement(z,null)),d.createElement(xt,{type:"link",size:"small",onClick:()=>n(f)},d.createElement(Ee,null))))})),d.createElement(bt.Item,null,d.createElement(xt,{type:"dashed",onClick:()=>t(),block:!0,icon:d.createElement(ke,null)},o("新增变量"))))))))}var J0=d.memo((function(e){const{id:t,cluster:n,editable:r=!0,range:i,onChange:a,onOpenFire:o}=e,[c,u]=f.exports.useState(!1),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState(T.uniqueId("refreshFlag_")),v=T.map(e.value,(e=>l(s({},e),{type:e.type||"query"})));return f.exports.useEffect((()=>{if(v){const e=[];try{(async()=>{for(let n=0;n<v.length;n++){const r=T.cloneDeep(v[n]);if("query"===r.type&&r.definition){const a=n>0?Y0(r.definition,e,n,t):r.definition,o=await H0(a,i),s=T.filter(o,(e=>!!e&&(!r.reg||!U0(r.reg)||U0(r.reg).test(e))));e[n]=r,e[n].fullDefinition=a,e[n].options=s;if(null===$0(r.name,t)){const e=null==s?void 0:s[0],n=r.multi?e?[e]:[]:e;G0(r.name,n,t,!0)}}else if("textbox"===r.type){e[n]=r;null===$0(r.name,t)&&G0(r.name,r.defaultValue,t,!0)}}p(e),a(v,!1,e)})()}catch(rh){console.log(rh)}}}),[JSON.stringify(v),n,m]),d.createElement("div",{className:"tag-area"},d.createElement("div",{className:P("tag-content","tag-content-close")},T.map(h,(e=>d.createElement(Q0,{key:e.name,id:t,expression:e,onChange:()=>{g(T.uniqueId("refreshFlag_"))}}))),r&&d.createElement(_e,{className:"icon",onClick:()=>{u(!0),o&&o()}}),(!h||0===(null==h?void 0:h.length))&&r&&d.createElement("div",{className:"add-variable-tips",onClick:()=>{u(!0),o&&o()}},"添加大盘变量")),d.createElement(Z0,{visible:c,onChange:e=>{e&&(a(e,!0),p(e)),u(!1)},value:v,range:i,id:t}))}));function e9(e){return function(t){const n=document.createElement("div");function r(){q.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),q.render(d.createElement(e,s({},i)),n),{destroy:r}}}var t9=e9((function(e){const{visible:t,initialValues:n}=e,[r]=bt.useForm();return d.createElement(It,{width:800,title:"大盘链接设置",style:{top:10,padding:0},visible:t,closable:!1,onOk:()=>{r.validateFields().then((t=>{e.onOk(t.links),e.destroy()}))},onCancel:()=>{e.destroy()},bodyStyle:{padding:"10px 24px 24px 24px"}},d.createElement(bt,{layout:"vertical",initialValues:{links:n},form:r},d.createElement(bt.List,{name:"links"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(Rt,{key:r,style:{alignItems:"flex-start"}},d.createElement(bt.Item,l(s({},a),{name:[i,"title"],rules:[{required:!0,message:"链接名称"}]}),d.createElement(Ct,{placeholder:"链接名称",style:{width:192}})),d.createElement(bt.Item,l(s({},a),{name:[i,"url"],rules:[{required:!0,message:"链接地址"}]}),d.createElement(Ct,{style:{width:460},placeholder:"链接地址"})),d.createElement(Tt,{title:"是否新窗口打开"},d.createElement(bt.Item,l(s({},a),{name:[i,"targetBlank"],valuePropName:"checked"}),d.createElement(Lt,null))),d.createElement(xt,{icon:d.createElement(Ee,null),onClick:()=>{n(i)}}))})),d.createElement(xt,{type:"dashed",style:{width:"100%",marginBottom:10},onClick:()=>{t({})}},d.createElement(ke,null)," 新增链接"))))))}));function n9(e){const{editable:t=!0,value:n}=e;return d.createElement(Rt,{align:"baseline"},d.createElement(wt,{overlay:d.createElement(yt,null,T.isEmpty(n)?d.createElement("div",{style:{textAlign:"center"}},"暂无数据"):T.map(n,((e,t)=>d.createElement(yt.Item,{key:t},d.createElement("a",{href:e.url,target:e.targetBlank?"_blank":"_self"},e.title)))))},d.createElement(xt,null,"大盘链接 ",d.createElement(I,null))),t&&d.createElement(_e,{style:{fontSize:18},className:"icon",onClick:()=>{t9({initialValues:n,onOk:t=>{e.onChange(t)}})}}))}function r9(e){return T.map(e,(e=>l(s({},e.layout),{i:T.toString(e.layout.i),isResizable:"row"!==e.type})))}function i9(e){return e.sort(((e,t)=>e.layout.y===t.layout.y?e.layout.x-t.layout.x:e.layout.y-t.layout.y))}function a9(e,t){return T.map(e,(e=>{const n=s({},e),r=T.find(t,{i:n.layout.i});return r&&(n.layout=T.pick(r,["h","w","x","y","i","isResizable"])),n}))}function o9(e,t){return T.findIndex(e,{id:t})}function s9(e,t){const n=[];for(let r=o9(e,t)+1;r<e.length;r++){const t=e[r];if("row"===t.type)break;n.push(t)}return n}function l9(e,t){var n;let r=T.cloneDeep(e);const i=o9(r,t.id),a=t.panels;if(a&&a.length>0){const e=(null!=(n=a[0].layout.y)?n:t.layout.y)-(t.layout.y+t.layout.h);let o=i+1,s=t.layout.y;for(const n of a)null!=n.layout.y||(n.layout.y=t.layout.y),n.layout.y-=e,r.splice(o,0,n),o+=1,s=Math.max(s,n.layout.y+n.layout.h);const l=s-t.layout.y-1;for(let t=o;t<r.length;t++)r[t].layout.y+=l;r=T.unionBy(r,"id");T.find(r,{id:t.id}).panels=[]}return r}function c9(e,t){let n=T.cloneDeep(e);const r=s9(n,t.id);if(r.length>0){n=T.filter(n,(e=>!T.find(r,{id:e.id})));T.find(n,{id:t.id}).panels=r}return n}function u9(e,t){return T.map(e,(e=>e.id===t.id?t:e))}function h9(e,t,n){const r="row"===n?24:12,i="row"===n?1:4,a=T.maxBy(e,(e=>e.layout.y+e.layout.h)),o=l(s({},t),{layout:{x:0,y:a?a.layout.y+a.layout.h:0,w:r,h:i,i:t.id}});return T.concat([...e],o)}function p9(e,t,n){const r=function(e,t){let n;for(let r=o9(e,t)+1;r<e.length;r++){const t=e[r];if("row"===t.type){n=t;break}}return n}(e,t);let i;(null==r?void 0:r.id)&&(i=o9(e,null==r?void 0:r.id));const a=function(e,t){const n=s9(e,t),r=T.find(e,{id:t});let i=r.layout.y+r.layout.h;return T.forEach(n,(e=>{e.layout.y+e.layout.h>i&&(i=e.layout.y+e.layout.h)})),i}(e,t),o=l(s({},n),{layout:{x:0,y:a,w:12,h:4,i:n.id}}),c=T.map(e,((e,t)=>t>=i?l(s({},e),{layout:l(s({},e.layout),{y:e.layout.y+4})}):e));return T.concat(o,c)}function d9(e,t){const n=jc(e);return n.panels=t,JSON.stringify(n)}function f9(e){const{name:t,row:n,onToggle:r,onAddClick:i,onEditClick:a,onDeleteClick:o}=e,[c,u]=f.exports.useState(!1),[h,p]=f.exports.useState(),[m,g]=f.exports.useState(!1);return d.createElement("div",{className:"dashboards-panels-row"},d.createElement("div",{className:"dashboards-panels-row-name",onClick:()=>{r()}},n.collapsed?d.createElement(I,null):d.createElement(F,null),d.createElement("span",{style:{paddingLeft:6}},t)),d.createElement(Rt,null,d.createElement(ch,{onClick:()=>{i()}}),d.createElement(L,{onClick:()=>{u(!0),p(t)}}),d.createElement(Ee,{onClick:()=>{g(!0)}}),!1===n.collapsed&&d.createElement(Ae,{className:"dashboards-panels-item-drag-handle"})),d.createElement(It,{title:"编辑分组",visible:c,onCancel:()=>{u(!1)},onOk:()=>{a(l(s({},n),{name:h})),u(!1)}},d.createElement("div",null,"分组名称",d.createElement(Ct,{value:h,onChange:e=>{p(e.target.value)},onPressEnter:()=>{a(l(s({},n),{name:h})),u(!1)}}))),d.createElement(It,{closable:!1,visible:m,onCancel:()=>{g(!1)},footer:[d.createElement(xt,{key:"cancel",onClick:()=>{g(!1)}},"取消"),d.createElement(xt,{key:"ok",type:"primary",onClick:()=>{o("self"),g(!1)}},"仅删除分组"),d.createElement(xt,{key:"all",type:"primary",danger:!0,onClick:()=>{o("withPanels"),g(!1)}},"删除分组和图表")]},d.createElement("div",null,d.createElement("h3",{style:{fontSize:16}},d.createElement(R,{style:{color:"#faad14",marginRight:10,fontSize:22,position:"relative",top:4}})," 删除分组"),d.createElement("div",{style:{marginLeft:38,fontSize:14}},"确定删除该分组吗？"))))}const m9=rn.theme({".cm-content":{padding:0},"&.cm-editor.cm-focused":{outline:"unset"},".cm-scroller":{overflow:"hidden",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono;",lineHeight:"unset"},".cm-matchingBracket":{color:"#000",backgroundColor:"#dedede",fontWeight:"bold",outline:"1px dashed transparent"},".cm-nonmatchingBracket":{borderColor:"red"},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{maxHeight:"350px",fontFamily:'"DejaVu Sans Mono", monospace',maxWidth:"unset"},"& > ul > li":{padding:"2px 1em 2px 3px",overflowY:"hidden"},"& > ul > li[aria-selected]":{backgroundColor:"#a7d0f2",color:"unset"},minWidth:"30%"},".cm-completionDetail":{float:"right",color:"#999"},".cm-tooltip.cm-completionInfo":{marginTop:"-11px",padding:"10px",fontFamily:"'Open Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;",border:"none",minWidth:"250px",maxWidth:"min-content"},".cm-completionInfo.cm-completionInfo-right":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",left:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginLeft:"12px"},".cm-completionInfo.cm-completionInfo-left":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",right:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginRight:"12px"},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold",color:"#0066bf"},".cm-selectionMatch":{backgroundColor:"#e6f3ff"},".cm-diagnostic":{"&.cm-diagnostic-error":{borderLeft:"3px solid #e65013"}},".cm-completionIcon":{boxSizing:"content-box",fontSize:"16px",lineHeight:"1",marginRight:"10px",verticalAlign:"top","&:after":{content:"'\\ea88'"},fontFamily:"codicon",paddingRight:"0",opacity:"1",color:"#007acc"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\ea8c'"},color:"#652d90"},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\eb5f'"},color:"#007acc"},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\eb62'"},color:"#616161"},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'\\ea95'"},color:"#ee9d28"}});rn.theme({".cm-tooltip":{backgroundColor:"#f8f8f8",borderColor:"rgba(52, 79, 113, 0.2)"},".cm-tooltip.cm-tooltip-autocomplete":{"& li:hover":{backgroundColor:"#ddd"},"& > ul > li[aria-selected]":{backgroundColor:"#d6ebff",color:"unset"}},".cm-tooltip.cm-completionInfo":{backgroundColor:"#d6ebff"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#d6ebff"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#d6ebff"}},".cm-line":{"&::selection":{backgroundColor:"#add6ff"},"& > span::selection":{backgroundColor:"#add6ff"}}},{dark:!1}),rn.theme({".cm-content":{caretColor:"#fff"},".cm-tooltip.cm-completionInfo":{backgroundColor:"#333338"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#333338"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#333338"}},".cm-line":{"&::selection":{backgroundColor:"#767676"},"& > span::selection":{backgroundColor:"#767676"}}},{dark:!0});const g9=an.define([{tag:on.name,color:"#000"},{tag:on.number,color:"#09885a"},{tag:on.string,color:"#a31515"},{tag:on.keyword,color:"#008080"},{tag:on.function(on.variableName),color:"#008080"},{tag:on.labelName,color:"#800000"},{tag:on.operator},{tag:on.modifier,color:"#008080"},{tag:on.paren},{tag:on.squareBracket},{tag:on.brace},{tag:on.invalid,color:"red"},{tag:on.comment,color:"#888",fontStyle:"italic"}]),v9=new sn;var y9=d.forwardRef((({url:e,headers:t,value:n,onChange:r,executeQuery:i,readonly:a=!1,validateTrigger:o=["onChange","onBlur"]},l)=>{const c=f.exports.useRef(null),u=f.exports.useRef(null),h=f.exports.useRef(i),p=f.exports.useRef(n||""),m={Authorization:`Bearer ${localStorage.getItem("access_token")||""}`};return f.exports.useEffect((()=>{h.current=i,v9.activateCompletion(!0).activateLinter(!0).setComplete({remote:{url:e,fetchFn:(e,n={})=>{var r;const i=null==(r=n.body)?void 0:r.toString();return fetch(e+(i?`?${i}`:""),{method:"Get",headers:new Headers(t?s(s({},m),t):m)})}}});if(null===u.current){if(!c.current)throw new Error("expected CodeMirror container element to exist");const e=ln.create({doc:n,extensions:[m9,cn(),un(),ln.allowMultipleSelections.of(!0),hn(),pn(),dn(),fn(),mn(),g9,rn.lineWrapping,gn.of([...vn,...yn,...xn,...En,...bn,...Cn]),Tn("Expression (press Shift+Enter for newlines)"),v9.asExtension(),rn.editable.of(!a),gn.of([{key:"Escape",run:e=>(e.contentDOM.blur(),!1)}]),wn.override(gn.of([{key:"Enter",run:e=>("function"==typeof h.current&&h.current(p.current),!0)},{key:"Shift-Enter",run:Sn}])),rn.updateListener.of((e=>{if("function"==typeof r){const t=e.state.doc.toString();t!==p.current&&(p.current=t,T.includes(o,"onChange")&&r(t))}}))]}),t=new rn({state:e,parent:c.current});u.current=t,l&&(l.current=t),t.focus()}}),[r,JSON.stringify(t)]),f.exports.useEffect((()=>{if(p.current!==n){const e=p.current;p.current=n||"";const t=u.current;if(null===t)return;t.dispatch(t.state.update({changes:{from:0,to:(null==e?void 0:e.length)||0,insert:n}}))}}),[n]),d.createElement("div",{className:P({"ant-input":!0,readonly:a,"promql-input":!0}),onBlur:()=>{"function"==typeof r&&p.current!==n&&r(p.current)},onKeyDown:e=>{"Enter"===e.code&&"function"==typeof r&&p.current!==n&&r(p.current)}},d.createElement("div",{className:"input-content",ref:c}))}));function x9(e){return d.createElement("div",{className:"n9e-collapse"},e.children)}const E9=function(e){const[t,n]=f.exports.useState(e.isActive||!0);return d.createElement("div",{className:P({"n9e-collapse-item":!0,"n9e-collapse-item-active":t,"n9e-collapse-item-inner":e.isInner})},d.createElement("div",{className:"n9e-collapse-header",onClick:()=>{n(!t)}},t?d.createElement(I,{className:"n9e-collapse-arrow"}):d.createElement(F,{className:"n9e-collapse-arrow"}),e.header,d.createElement("div",{className:"n9e-collapse-extra",onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},e.extra)),d.createElement("div",{className:P({"n9e-collapse-content":!0,"n9e-collapse-content-hidden":!t})},d.createElement("div",{className:"n9e-collapse-content-box"},e.children)))};function b9(){const e=["options","tooltip"];return d.createElement(E9,{header:"Tooltip"},d.createElement(kt,{gutter:10},d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"模式",name:[...e,"mode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"single"},"single"),d.createElement(Bt.Button,{value:"all"},"all")))),d.createElement(_t,{span:12},d.createElement(bt.Item,{noStyle:!0,shouldUpdate:(t,n)=>T.get(t,[...e,"mode"])!==T.get(n,[...e,"mode"])},(({getFieldValue:t})=>"all"===t([...e,"mode"])?d.createElement(bt.Item,{label:"排序",name:[...e,"sort"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"none"},"none"),d.createElement(Bt.Button,{value:"asc"},"asc"),d.createElement(Bt.Button,{value:"desc"},"desc"))):null)))))}function C9(){const e=["options","legend"];return d.createElement(E9,{header:"Legend"},d.createElement(kt,null,d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"显示模式",name:[...e,"displayMode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"table"},"表格"),d.createElement(Bt.Button,{value:"list"},"列表"),d.createElement(Bt.Button,{value:"hidden"},"关闭")))),d.createElement(_t,{span:12},d.createElement(bt.Item,{noStyle:!0,shouldUpdate:(t,n)=>T.get(t,[...e,"displayMode"])!==T.get(n,[...e,"displayMode"])},(({getFieldValue:t})=>"list"===t([...e,"displayMode"])?d.createElement(bt.Item,{label:"位置",name:[...e,"placement"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"bottom"},"bottom"),d.createElement(Bt.Button,{value:"right"},"right"))):null)))))}function T9(){const e=["custom"];return d.createElement(E9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:"绘制模式",name:[...e,"drawStyle"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"lines"},"lines"),d.createElement(Bt.Button,{value:"bars"},"bars"))),d.createElement(bt.Item,{noStyle:!0,shouldUpdate:(t,n)=>T.get(t,[...e,"drawStyle"])!==T.get(n,[...e,"drawStyle"])},(({getFieldValue:t})=>{const n=t([...e,"drawStyle"]);return"lines"===n||"bars"===n?d.createElement(d.Fragment,null,"lines"===n?d.createElement(bt.Item,{label:"线插值",name:[...e,"lineInterpolation"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"linear"},"linear"),d.createElement(Bt.Button,{value:"smooth"},"smooth"))):null,d.createElement(bt.Item,{label:"透明度",name:[...e,"fillOpacity"]},d.createElement(Yt,{min:0,max:1,step:.01}))):null})),d.createElement(bt.Item,{label:"堆叠",name:[...e,"stack"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"noraml"},"开启"),d.createElement(Bt.Button,{value:"off"},"关闭")))))}const{Option:w9,OptGroup:S9}=Mt;function k9(e){const{preNamePrefix:t=[],namePrefix:n=["options","standardOptions"]}=e;return d.createElement(E9,{header:"高级设置"},d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:d.createElement("div",null,"单位"," ",d.createElement(Tt,{overlayInnerStyle:{width:500},getTooltipContainer:()=>document.body,title:d.createElement("div",null,d.createElement("div",null,"默认会做 SI Prefixes 处理，如不想默认的处理可选择 none 关闭"),d.createElement("div",null,"Data(SI): 基数为 1000, 单位为 B、kB、MB、GB、TB、PB、EB、ZB、YB"),d.createElement("div",null,"Data(IEC): 基数为 1024, 单位为 B、KiB、MiB、GiB、TiB、PiB、EiB、ZiB、YiB"),d.createElement("div",null,"bits: b"),d.createElement("div",null,"bytes: B"))},d.createElement(R,null))),name:[...n,"util"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null),placeholder:"auto",allowClear:!0},d.createElement(w9,{value:"none"},"none"),d.createElement(S9,{label:"Data(SI)"},d.createElement(w9,{value:"bitsSI"},"bits(SI)"),d.createElement(w9,{value:"bytesSI"},"bytes(SI)")),d.createElement(S9,{label:"Data(IEC)"},d.createElement(w9,{value:"bitsIEC"},"bits(IEC)"),d.createElement(w9,{value:"bytesIEC"},"bytes(IEC)")),d.createElement(S9,{label:"百分比"},d.createElement(w9,{value:"percent"},"百分比(0-100)"),d.createElement(w9,{value:"percentUnit"},"百分比(0.0-1.0)")),d.createElement(S9,{label:"时间"},d.createElement(w9,{value:"seconds"},"seconds"),d.createElement(w9,{value:"milliseconds"},"milliseconds"),d.createElement(w9,{value:"humantimeSeconds"},"humanize(seconds)"),d.createElement(w9,{value:"humantimeMilliseconds"},"humanize(milliseconds)")))),d.createElement(kt,{gutter:10},d.createElement(_t,{span:8},d.createElement(bt.Item,{label:"最小值",name:[...n,"min"]},d.createElement(Dt,{placeholder:"auto",style:{width:"100%"}}))),d.createElement(_t,{span:8},d.createElement(bt.Item,{label:"最大值",name:[...n,"max"]},d.createElement(Dt,{placeholder:"auto",style:{width:"100%"}}))),d.createElement(_t,{span:8},d.createElement(bt.Item,{label:"小数点",name:[...n,"decimals"]},d.createElement(Dt,{placeholder:"auto",style:{width:"100%"}}))))))}var _9={},A9={},O9=Oe,I9=Ie,M9=Me;var N9=function(e){return"string"==typeof e||!I9(e)&&M9(e)&&"[object String]"==O9(e)},F9=kn;var L9=_n,P9=function(e){return"function"==typeof e?e:F9};var R9=function(e,t){return e&&L9(e,P9(t))};Object.defineProperty(A9,"__esModule",{value:!0}),A9.flattenNames=void 0;var D9=j9(N9),B9=j9(R9),z9=j9(An),H9=j9(On);function j9(e){return e&&e.__esModule?e:{default:e}}var G9=A9.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,H9.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,z9.default)(t)?(0,B9.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,D9.default)(t)&&n.push(t)})),n};A9.default=G9;var $9={},Y9=In;var U9=function(e){return Y9(e,5)};Object.defineProperty($9,"__esModule",{value:!0}),$9.mergeClasses=void 0;var V9=q9(R9),W9=q9(U9),X9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function q9(e){return e&&e.__esModule?e:{default:e}}var K9=$9.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,W9.default)(e.default)||{};return t.map((function(t){var r=e[t];return r&&(0,V9.default)(r,(function(e,t){n[t]||(n[t]={}),n[t]=X9({},n[t],r[t])})),t})),n};$9.default=K9;var Q9={};Object.defineProperty(Q9,"__esModule",{value:!0}),Q9.autoprefix=void 0;var Z9=function(e){return e&&e.__esModule?e:{default:e}}(R9),J9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var e5={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},t5=Q9.autoprefix=function(e){var t={};return(0,Z9.default)(e,(function(e,n){var r={};(0,Z9.default)(e,(function(e,t){var n=e5[t];n?r=J9({},r,n(e)):r[t]=e})),t[n]=r})),t};Q9.default=t5;var n5={};Object.defineProperty(n5,"__esModule",{value:!0}),n5.hover=void 0;var r5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i5=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);function a5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l5=n5.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,a;a5(this,r);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return i=a=o5(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return i5.default.createElement(t,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},i5.default.createElement(e,r5({},a.props,a.state)))},o5(a,i)}return s5(r,i5.default.Component),r}()};n5.default=l5;var c5={};Object.defineProperty(c5,"__esModule",{value:!0}),c5.active=void 0;var u5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h5=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);function p5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m5=c5.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,a;p5(this,r);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return i=a=d5(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return h5.default.createElement(t,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},h5.default.createElement(e,u5({},a.props,a.state)))},d5(a,i)}return f5(r,h5.default.Component),r}()};c5.default=m5;var g5={};Object.defineProperty(g5,"__esModule",{value:!0});g5.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n},Object.defineProperty(_9,"__esModule",{value:!0}),_9.ReactCSS=_9.loop=_9.handleActive=w5=_9.handleHover=_9.hover=void 0;var v5=T5(A9),y5=T5($9),x5=T5(Q9),E5=T5(n5),b5=T5(c5),C5=T5(g5);function T5(e){return e&&e.__esModule?e:{default:e}}_9.hover=E5.default;var w5=_9.handleHover=E5.default;_9.handleActive=b5.default,_9.loop=C5.default;var S5=_9.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=(0,v5.default)(n),a=(0,y5.default)(e,i);return(0,x5.default)(a)},k5=_9.default=S5,_5=function(e,t,n,r,i){var a=i.clientWidth,o=i.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h=void 0;if(h=u<0?0:u>o?1:Math.round(100*u/o)/100,t.a!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}else{var p=void 0;if(r!==(p=c<0?0:c>a?1:Math.round(100*c/a)/100))return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}return null},A5={},O5=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":"");if(A5[i])return A5[i];var a=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var a=i.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,i.width,i.height),a.fillStyle=t,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),i.toDataURL()):null}(e,t,n,r);return A5[i]=a,a},I5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M5=function(e){var t=e.white,n=e.grey,r=e.size,i=e.renderers,a=e.borderRadius,o=e.boxShadow,s=e.children,l=k5({default:{grid:{borderRadius:a,boxShadow:o,absolute:"0px 0px 0px 0px",background:"url("+O5(t,n,r,i.canvas)+") center left"}}});return f.exports.isValidElement(s)?d.cloneElement(s,I5({},s.props,{style:I5({},s.props.style,l.grid)})):d.createElement("div",{style:l.grid})};M5.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var N5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F5=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function L5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var R5=function(e){function t(){var e,n,r;L5(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=P5(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=_5(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},P5(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),F5(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=k5({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:N5({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return d.createElement("div",{style:n.alpha},d.createElement("div",{style:n.checkboard},d.createElement(M5,{renderers:this.props.renderers})),d.createElement("div",{style:n.gradient}),d.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.createElement("div",{style:n.pointer},this.props.pointer?d.createElement(this.props.pointer,this.props):d.createElement("div",{style:n.slider}))))}}]),t}(),D5=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var B5=[38,40],z5=1,H5=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,B5.indexOf(t)>-1)){var i=n.getArrowOffset(),a=38===e.keyCode?r+i:r-i;n.setUpdatedValue(a,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+z5++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),D5(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=k5({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return d.createElement("div",{style:t.wrap},d.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?d.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(),j5=function(e,t,n,r){var i=r.clientWidth,a=r.clientHeight,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(c<0)u=359;else if(c>a)u=0;else{u=360*(-100*c/a+100)/100}if(n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h=void 0;if(l<0)h=0;else if(l>i)h=359;else{h=360*(100*l/i)/100}if(n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},G5=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function $5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var U5=function(e){function t(){var e,n,r;$5(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=Y5(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=j5(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},Y5(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),G5(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=k5({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return d.createElement("div",{style:r.hue},d.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),d.createElement("div",{style:r.pointer},this.props.pointer?d.createElement(this.props.pointer,this.props):d.createElement("div",{style:r.slider}))))}}]),t}();function V5(e,t){return e===t||e!=e&&t!=t}function W5(e,t){for(var n=e.length;n--;)if(V5(e[n][0],t))return n;return-1}var X5=Array.prototype.splice;function q5(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}q5.prototype.clear=function(){this.__data__=[],this.size=0},q5.prototype.delete=function(e){var t=this.__data__,n=W5(t,e);return!(n<0)&&(n==t.length-1?t.pop():X5.call(t,n,1),--this.size,!0)},q5.prototype.get=function(e){var t=this.__data__,n=W5(t,e);return n<0?void 0:t[n][1]},q5.prototype.has=function(e){return W5(this.__data__,e)>-1},q5.prototype.set=function(e,t){var n=this.__data__,r=W5(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var K5="object"==typeof global&&global&&global.Object===Object&&global,Q5="object"==typeof self&&self&&self.Object===Object&&self,Z5=K5||Q5||Function("return this")(),J5=Z5.Symbol,e2=Object.prototype,t2=e2.hasOwnProperty,n2=e2.toString,r2=J5?J5.toStringTag:void 0;var i2=Object.prototype.toString;var a2=J5?J5.toStringTag:void 0;function o2(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a2&&a2 in Object(e)?function(e){var t=t2.call(e,r2),n=e[r2];try{e[r2]=void 0;var r=!0}catch(rh){}var i=n2.call(e);return r&&(t?e[r2]=n:delete e[r2]),i}(e):function(e){return i2.call(e)}(e)}function s2(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function l2(e){if(!s2(e))return!1;var t=o2(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var c2,u2=Z5["__core-js_shared__"],h2=(c2=/[^.]+$/.exec(u2&&u2.keys&&u2.keys.IE_PROTO||""))?"Symbol(src)_1."+c2:"";var p2=Function.prototype.toString;function d2(e){if(null!=e){try{return p2.call(e)}catch(rh){}try{return e+""}catch(rh){}}return""}var f2=/^\[object .+?Constructor\]$/,m2=Function.prototype,g2=Object.prototype,v2=m2.toString,y2=g2.hasOwnProperty,x2=RegExp("^"+v2.call(y2).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E2(e){return!(!s2(e)||(t=e,h2&&h2 in t))&&(l2(e)?x2:f2).test(d2(e));var t}function b2(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return E2(n)?n:void 0}var C2=b2(Z5,"Map"),T2=b2(Object,"create");var w2=Object.prototype.hasOwnProperty;var S2=Object.prototype.hasOwnProperty;function k2(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _2(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function A2(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}k2.prototype.clear=function(){this.__data__=T2?T2(null):{},this.size=0},k2.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},k2.prototype.get=function(e){var t=this.__data__;if(T2){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return w2.call(t,e)?t[e]:void 0},k2.prototype.has=function(e){var t=this.__data__;return T2?void 0!==t[e]:S2.call(t,e)},k2.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=T2&&void 0===t?"__lodash_hash_undefined__":t,this},A2.prototype.clear=function(){this.size=0,this.__data__={hash:new k2,map:new(C2||q5),string:new k2}},A2.prototype.delete=function(e){var t=_2(this,e).delete(e);return this.size-=t?1:0,t},A2.prototype.get=function(e){return _2(this,e).get(e)},A2.prototype.has=function(e){return _2(this,e).has(e)},A2.prototype.set=function(e,t){var n=_2(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function O2(e){var t=this.__data__=new q5(e);this.size=t.size}O2.prototype.clear=function(){this.__data__=new q5,this.size=0},O2.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},O2.prototype.get=function(e){return this.__data__.get(e)},O2.prototype.has=function(e){return this.__data__.has(e)},O2.prototype.set=function(e,t){var n=this.__data__;if(n instanceof q5){var r=n.__data__;if(!C2||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new A2(r)}return n.set(e,t),this.size=n.size,this};var I2=function(){try{var e=b2(Object,"defineProperty");return e({},"",{}),e}catch(rh){}}();function M2(e,t,n){"__proto__"==t&&I2?I2(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function N2(e,t,n){(void 0!==n&&!V5(e[t],n)||void 0===n&&!(t in e))&&M2(e,t,n)}var F2,L2=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),o=a.length;o--;){var s=a[F2?o:++r];if(!1===t(i[s],s,i))break}return e},P2="object"==typeof exports&&exports&&!exports.nodeType&&exports,R2=P2&&"object"==typeof module&&module&&!module.nodeType&&module,D2=R2&&R2.exports===P2?Z5.Buffer:void 0,B2=D2?D2.allocUnsafe:void 0;var z2=Z5.Uint8Array;function H2(e,t){var n,r,i=t?(n=e.buffer,r=new n.constructor(n.byteLength),new z2(r).set(new z2(n)),r):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var j2=Object.create,G2=function(){function e(){}return function(t){if(!s2(t))return{};if(j2)return j2(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function $2(e,t){return function(n){return e(t(n))}}var Y2=$2(Object.getPrototypeOf,Object),U2=Object.prototype;function V2(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||U2)}function W2(e){return null!=e&&"object"==typeof e}function X2(e){return W2(e)&&"[object Arguments]"==o2(e)}var q2=Object.prototype,K2=q2.hasOwnProperty,Q2=q2.propertyIsEnumerable,Z2=X2(function(){return arguments}())?X2:function(e){return W2(e)&&K2.call(e,"callee")&&!Q2.call(e,"callee")},J2=Array.isArray;function e4(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function t4(e){return null!=e&&e4(e.length)&&!l2(e)}var n4="object"==typeof exports&&exports&&!exports.nodeType&&exports,r4=n4&&"object"==typeof module&&module&&!module.nodeType&&module,i4=r4&&r4.exports===n4?Z5.Buffer:void 0,a4=(i4?i4.isBuffer:void 0)||function(){return!1},o4=Function.prototype,s4=Object.prototype,l4=o4.toString,c4=s4.hasOwnProperty,u4=l4.call(Object);var h4={};h4["[object Float32Array]"]=h4["[object Float64Array]"]=h4["[object Int8Array]"]=h4["[object Int16Array]"]=h4["[object Int32Array]"]=h4["[object Uint8Array]"]=h4["[object Uint8ClampedArray]"]=h4["[object Uint16Array]"]=h4["[object Uint32Array]"]=!0,h4["[object Arguments]"]=h4["[object Array]"]=h4["[object ArrayBuffer]"]=h4["[object Boolean]"]=h4["[object DataView]"]=h4["[object Date]"]=h4["[object Error]"]=h4["[object Function]"]=h4["[object Map]"]=h4["[object Number]"]=h4["[object Object]"]=h4["[object RegExp]"]=h4["[object Set]"]=h4["[object String]"]=h4["[object WeakMap]"]=!1;var p4,d4="object"==typeof exports&&exports&&!exports.nodeType&&exports,f4=d4&&"object"==typeof module&&module&&!module.nodeType&&module,m4=f4&&f4.exports===d4&&K5.process,g4=function(){try{var e=f4&&f4.require&&f4.require("util").types;return e||m4&&m4.binding&&m4.binding("util")}catch(rh){}}(),v4=g4&&g4.isTypedArray,y4=v4?(p4=v4,function(e){return p4(e)}):function(e){return W2(e)&&e4(e.length)&&!!h4[o2(e)]};function x4(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var E4=Object.prototype.hasOwnProperty;function b4(e,t,n){var r=e[t];E4.call(e,t)&&V5(r,n)&&(void 0!==n||t in e)||M2(e,t,n)}var C4=/^(?:0|[1-9]\d*)$/;function T4(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&C4.test(e))&&e>-1&&e%1==0&&e<t}var w4=Object.prototype.hasOwnProperty;function S4(e,t){var n=J2(e),r=!n&&Z2(e),i=!n&&!r&&a4(e),a=!n&&!r&&!i&&y4(e),o=n||r||i||a,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!w4.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||T4(c,l))||s.push(c);return s}var k4=Object.prototype.hasOwnProperty;function _4(e){if(!s2(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=V2(e),n=[];for(var r in e)("constructor"!=r||!t&&k4.call(e,r))&&n.push(r);return n}function A4(e){return t4(e)?S4(e,!0):_4(e)}function O4(e){return function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?M2(n,s,l):b4(n,s,l)}return n}(e,A4(e))}function I4(e,t,n,r,i,a,o){var s=x4(e,n),l=x4(t,n),c=o.get(l);if(c)N2(e,n,c);else{var u=a?a(s,l,n+"",e,t,o):void 0,h=void 0===u;if(h){var p=J2(l),d=!p&&a4(l),f=!p&&!d&&y4(l);u=l,p||d||f?J2(s)?u=s:!function(e){return W2(e)&&t4(e)}(s)?d?(h=!1,u=function(e,t){if(t)return e.slice();var n=e.length,r=B2?B2(n):new e.constructor(n);return e.copy(r),r}(l,!0)):f?(h=!1,u=H2(l,!0)):u=[]:u=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):function(e){if(!W2(e)||"[object Object]"!=o2(e))return!1;var t=Y2(e);if(null===t)return!0;var n=c4.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l4.call(n)==u4}(l)||Z2(l)?(u=s,Z2(s)?u=O4(s):s2(s)&&!l2(s)||(u=function(e){return"function"!=typeof e.constructor||V2(e)?{}:G2(Y2(e))}(l))):h=!1}h&&(o.set(l,u),i(u,l,r,a,o),o.delete(l)),N2(e,n,u)}}function M4(e,t,n,r,i){e!==t&&L2(t,(function(a,o){if(i||(i=new O2),s2(a))I4(e,t,o,n,M4,r,i);else{var s=r?r(x4(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),N2(e,o,s)}}),A4)}function N4(e){return e}function F4(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var L4=Math.max;function P4(e){return function(){return e}}var R4=I2?function(e,t){return I2(e,"toString",{configurable:!0,enumerable:!1,value:P4(t),writable:!0})}:N4,D4=Date.now;var B4=function(e){var t=0,n=0;return function(){var r=D4(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(R4);function z4(e,t){return B4(function(e,t,n){return t=L4(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=L4(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),F4(e,this,s)}}(e,t,N4),e+"")}var H4,j4=(H4=function(e,t,n){M4(e,t,n)},z4((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=H4.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!s2(n))return!1;var r=typeof t;return!!("number"==r?t4(n)&&T4(t,n.length):"string"==r&&t in n)&&V5(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&H4(e,o,n,i)}return e}))),G4=function(e){var t=e.zDepth,n=e.radius,r=e.background,i=e.children,a=e.styles,o=k5(j4({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},void 0===a?{}:a),{"zDepth-1":1===t});return d.createElement("div",{style:o.wrap},d.createElement("div",{style:o.bg}),d.createElement("div",{style:o.content},i))};G4.propTypes={background:Z.string,zDepth:Z.oneOf([0,1,2,3,4,5]),radius:Z.number,styles:Z.object},G4.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var $4=function(){return Z5.Date.now()},Y4=/\s/;var U4=/^\s+/;function V4(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Y4.test(e.charAt(t)););return t}(e)+1).replace(U4,""):e}function W4(e){return"symbol"==typeof e||W2(e)&&"[object Symbol]"==o2(e)}var X4=/^[-+]0x[0-9a-f]+$/i,q4=/^0b[01]+$/i,K4=/^0o[0-7]+$/i,Q4=parseInt;function Z4(e){if("number"==typeof e)return e;if(W4(e))return NaN;if(s2(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s2(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=V4(e);var n=q4.test(e);return n||K4.test(e)?Q4(e.slice(2),n?2:8):X4.test(e)?NaN:+e}var J4=Math.max,e8=Math.min;function t8(e,t,n){var r,i,a,o,s,l,c=0,u=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function f(e){return c=e,s=setTimeout(g,t),u?d(e):o}function m(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=a}function g(){var e=$4();if(m(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-l);return h?e8(n,a-(e-c)):n}(e))}function v(e){return s=void 0,p&&r?d(e):(r=i=void 0,o)}function y(){var e=$4(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return f(l);if(h)return clearTimeout(s),s=setTimeout(g,t),d(l)}return void 0===s&&(s=setTimeout(g,t)),o}return t=Z4(t)||0,s2(n)&&(u=!!n.leading,a=(h="maxWait"in n)?J4(Z4(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?o:v($4())},y}var n8=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r8=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,a=r.height,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),c<0?c=0:c>a&&(c=a);var u=l/i,h=1-c/a;return{h:t.h,s:u,v:h,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return s2(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),t8(e,t,{leading:r,maxWait:t,trailing:i})}((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),n8(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,i=t.black,a=t.pointer,o=t.circle,s=k5({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:i,pointer:a,circle:o}},{custom:!!this.props.style});return d.createElement("div",{style:s.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),d.createElement("div",{style:s.white,className:"saturation-white"},d.createElement("div",{style:s.black,className:"saturation-black"}),d.createElement("div",{style:s.pointer},this.props.pointer?d.createElement(this.props.pointer,this.props):d.createElement("div",{style:s.circle}))))}}]),t}();function i8(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var a8=$2(Object.keys,Object),o8=Object.prototype.hasOwnProperty;function s8(e){return t4(e)?S4(e):function(e){if(!V2(e))return a8(e);var t=[];for(var n in Object(e))o8.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var l8=function(e,t){return function(n,r){if(null==n)return n;if(!t4(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}((function(e,t){return e&&L2(e,t,s8)}));function c8(e,t){return(J2(e)?i8:l8)(e,function(e){return"function"==typeof e?e:N4}(t))}var u8={exports:{}};!function(e){!function(t){var n=/^\s+/,r=/\s+$/,i=0,a=t.round,o=t.min,s=t.max,l=t.random;function c(e,l){if(l=l||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,l);var u=function(e){var i={r:0,g:0,b:0},a=1,l=null,c=null,u=null,h=!1,p=!1;"string"==typeof e&&(e=function(e){e=e.replace(n,"").replace(r,"").toLowerCase();var t,i=!1;if(_[e])e=_[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=H.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=H.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=H.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=H.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=H.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=H.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=H.hex8.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),a:R(t[4]),format:i?"name":"hex8"};if(t=H.hex6.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),format:i?"name":"hex"};if(t=H.hex4.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),a:R(t[4]+""+t[4]),format:i?"name":"hex8"};if(t=H.hex3.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),format:i?"name":"hex"};return!1}(e));"object"==typeof e&&(j(e.r)&&j(e.g)&&j(e.b)?(d=e.r,f=e.g,m=e.b,i={r:255*I(d,255),g:255*I(f,255),b:255*I(m,255)},h=!0,p="%"===String(e.r).substr(-1)?"prgb":"rgb"):j(e.h)&&j(e.s)&&j(e.v)?(l=L(e.s),c=L(e.v),i=function(e,n,r){e=6*I(e,360),n=I(n,100),r=I(r,100);var i=t.floor(e),a=e-i,o=r*(1-n),s=r*(1-a*n),l=r*(1-(1-a)*n),c=i%6;return{r:255*[r,s,o,o,l,r][c],g:255*[l,r,r,s,o,o][c],b:255*[o,o,l,r,r,s][c]}}(e.h,l,c),h=!0,p="hsv"):j(e.h)&&j(e.s)&&j(e.l)&&(l=L(e.s),u=L(e.l),i=function(e,t,n){var r,i,a;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=I(e,360),t=I(t,100),n=I(n,100),0===t)r=i=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=o(l,s,e+1/3),i=o(l,s,e),a=o(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,l,u),h=!0,p="hsl"),e.hasOwnProperty("a")&&(a=e.a));var d,f,m;return a=O(a),{ok:h,format:e.format||p,r:o(255,s(i.r,0)),g:o(255,s(i.g,0)),b:o(255,s(i.b,0)),a:a}}(e);this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=a(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=u.ok,this._tc_id=i++}function u(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,a=s(e,t,n),l=o(e,t,n),c=(a+l)/2;if(a==l)r=i=0;else{var u=a-l;switch(i=c>.5?u/(2-a-l):u/(a+l),a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,l:c}}function h(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,a=s(e,t,n),l=o(e,t,n),c=a,u=a-l;if(i=0===a?0:u/a,a==l)r=0;else{switch(a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,v:c}}function p(e,t,n,r){var i=[F(a(e).toString(16)),F(a(t).toString(16)),F(a(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(e,t,n,r){return[F(P(r)),F(a(e).toString(16)),F(a(t).toString(16)),F(a(n).toString(16))].join("")}function f(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=M(n.s),c(n)}function m(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=M(n.s),c(n)}function g(e){return c(e).desaturate(100)}function v(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=M(n.l),c(n)}function y(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=s(0,o(255,n.r-a(-t/100*255))),n.g=s(0,o(255,n.g-a(-t/100*255))),n.b=s(0,o(255,n.b-a(-t/100*255))),c(n)}function x(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=M(n.l),c(n)}function E(e,t){var n=c(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,c(n)}function b(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function C(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function T(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function w(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function S(e,t,n){t=t||6,n=n||30;var r=c(e).toHsl(),i=360/n,a=[c(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(c(r));return a}function k(e,t){t=t||6;for(var n=c(e).toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/t;t--;)o.push(c({h:r,s:i,v:a})),a=(a+s)%1;return o}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,r,i=this.toRgb();return e=i.r/255,n=i.g/255,r=i.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=O(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),r=a(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),r=a(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return p(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[F(a(e).toString(16)),F(a(t).toString(16)),F(a(n).toString(16)),F(P(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*I(this._r,255))+"%",g:a(100*I(this._g,255))+"%",b:a(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*I(this._r,255))+"%, "+a(100*I(this._g,255))+"%, "+a(100*I(this._b,255))+"%)":"rgba("+a(100*I(this._r,255))+"%, "+a(100*I(this._g,255))+"%, "+a(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+d(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=c(e);n="#"+d(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(E,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:L(e[r]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(e,t,n){n=0===n?0:n||50;var r=c(e).toRgb(),i=c(t).toRgb(),a=n/100;return c({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},c.readability=function(e,n){var r=c(e),i=c(n);return(t.max(r.getLuminance(),i.getLuminance())+.05)/(t.min(r.getLuminance(),i.getLuminance())+.05)},c.isReadable=function(e,t,n){var r,i,a=c.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},c.mostReadable=function(e,t,n){var r,i,a,o,s=null,l=0;i=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var u=0;u<t.length;u++)(r=c.readability(e,t[u]))>l&&(l=r,s=c(t[u]));return c.isReadable(e,s,{level:a,size:o})||!i?s:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var _=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(_);function O(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function I(e,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=o(n,s(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function M(e){return o(1,s(0,e))}function N(e){return parseInt(e,16)}function F(e){return 1==e.length?"0"+e:""+e}function L(e){return e<=1&&(e=100*e+"%"),e}function P(e){return t.round(255*parseFloat(e)).toString(16)}function R(e){return N(e)/255}var D,B,z,H=(B="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",z="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+B),rgba:new RegExp("rgba"+z),hsl:new RegExp("hsl"+B),hsla:new RegExp("hsla"+z),hsv:new RegExp("hsv"+B),hsva:new RegExp("hsva"+z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function j(e){return!!H.CSS_UNIT.exec(e)}e.exports?e.exports=c:window.tinycolor=c}(Math)}(u8);var h8=u8.exports,p8=function(e){var t=0,n=0;return c8(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e},d8=function(e,t){var n=e.hex?h8(e.hex):h8(e),r=n.toHsl(),i=n.toHsv(),a=n.toRgb(),o=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===o&&0===a.a?"transparent":"#"+o,rgb:a,hsv:i,oldHue:e.h||t||r.h,source:e.source}},f8=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&h8(e).isValid()},m8=function(e){if(!e)return"#fff";var t=d8(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},g8=function(e,t){var n=e.replace("°","");return h8(t+" ("+n+")")._ok},v8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y8=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var x8=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(p8(e)){var r=d8(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(p8(e)){var r=d8(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=v8({},d8(e.color,0)),t.debounce=t8((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,f.exports.PureComponent||f.exports.Component),y8(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),d.createElement(e,v8({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return v8({},d8(e.color,t.oldHue))}}]),n}();return t.propTypes=v8({},e.propTypes),t.defaultProps=v8({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},E8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b8=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function C8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T8(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w8(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k8=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;C8(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n=T8(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(a))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},T8(n,t)}return w8(r,d.Component),b8(r,[{key:"render",value:function(){return d.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},d.createElement(e,E8({},this.props,this.state)))}}]),r}()}((function(e){var t=e.color,n=e.style,r=e.onClick,i=void 0===r?function(){}:r,a=e.onHover,o=e.title,s=void 0===o?t:o,l=e.children,c=e.focus,u=e.focusStyle,h="transparent"===t,p=k5({default:{swatch:S8({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,c?void 0===u?{}:u:{})}}),f={};return a&&(f.onMouseOver=function(e){return a(t,e)}),d.createElement("div",S8({style:p.swatch,onClick:function(e){return i(t,e)},title:s,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&i(t,e)}},f),l,h&&d.createElement(M5,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))})),_8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A8=function(e){var t=e.rgb,n=e.hsl,r=e.width,i=e.height,a=e.onChange,o=e.direction,s=e.style,l=e.renderers,c=e.pointer,u=e.className,h=void 0===u?"":u,p=k5({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:s}}});return d.createElement("div",{style:p.picker,className:"alpha-picker "+h},d.createElement(R5,_8({},p.alpha,{rgb:t,hsl:n,pointer:c,renderers:l,onChange:a,direction:o})))};function O8(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}A8.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=k5({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return d.createElement("div",{style:n.picker})}},x8(A8);function I8(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new A2;++t<n;)this.add(e[t])}function M8(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}I8.prototype.add=I8.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},I8.prototype.has=function(e){return this.__data__.has(e)};function N8(e,t,n,r,i,a){var o=1&n,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var h=-1,p=!0,d=2&n?new I8:void 0;for(a.set(e,t),a.set(t,e);++h<s;){var f=e[h],m=t[h];if(r)var g=o?r(m,f,h,t,e,a):r(f,m,h,e,t,a);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!M8(t,(function(e,t){if(o=t,!d.has(o)&&(f===e||i(f,e,n,r,a)))return d.push(t);var o}))){p=!1;break}}else if(f!==m&&!i(f,m,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function F8(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function L8(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var P8=J5?J5.prototype:void 0,R8=P8?P8.valueOf:void 0;var D8=Object.prototype.propertyIsEnumerable,B8=Object.getOwnPropertySymbols,z8=B8?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(B8(e),(function(t){return D8.call(e,t)})))}:function(){return[]};function H8(e){return function(e,t,n){var r=t(e);return J2(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,s8,z8)}var j8=Object.prototype.hasOwnProperty;var G8=b2(Z5,"DataView"),$8=b2(Z5,"Promise"),Y8=b2(Z5,"Set"),U8=b2(Z5,"WeakMap"),V8=d2(G8),W8=d2(C2),X8=d2($8),q8=d2(Y8),K8=d2(U8),Q8=o2;(G8&&"[object DataView]"!=Q8(new G8(new ArrayBuffer(1)))||C2&&"[object Map]"!=Q8(new C2)||$8&&"[object Promise]"!=Q8($8.resolve())||Y8&&"[object Set]"!=Q8(new Y8)||U8&&"[object WeakMap]"!=Q8(new U8))&&(Q8=function(e){var t=o2(e),n="[object Object]"==t?e.constructor:void 0,r=n?d2(n):"";if(r)switch(r){case V8:return"[object DataView]";case W8:return"[object Map]";case X8:return"[object Promise]";case q8:return"[object Set]";case K8:return"[object WeakMap]"}return t});var Z8=Q8,J8="[object Object]",e6=Object.prototype.hasOwnProperty;function t6(e,t,n,r,i,a){var o=J2(e),s=J2(t),l=o?"[object Array]":Z8(e),c=s?"[object Array]":Z8(t),u=(l="[object Arguments]"==l?J8:l)==J8,h=(c="[object Arguments]"==c?J8:c)==J8,p=l==c;if(p&&a4(e)){if(!a4(t))return!1;o=!0,u=!1}if(p&&!u)return a||(a=new O2),o||y4(e)?N8(e,t,n,r,i,a):function(e,t,n,r,i,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new z2(e),new z2(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return V5(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=F8;case"[object Set]":var l=1&r;if(s||(s=L8),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=N8(s(e),s(t),r,i,a,o);return o.delete(e),u;case"[object Symbol]":if(R8)return R8.call(e)==R8.call(t)}return!1}(e,t,l,n,r,i,a);if(!(1&n)){var d=u&&e6.call(e,"__wrapped__"),f=h&&e6.call(t,"__wrapped__");if(d||f){var m=d?e.value():e,g=f?t.value():t;return a||(a=new O2),i(m,g,n,r,a)}}return!!p&&(a||(a=new O2),function(e,t,n,r,i,a){var o=1&n,s=H8(e),l=s.length;if(l!=H8(t).length&&!o)return!1;for(var c=l;c--;){var u=s[c];if(!(o?u in t:j8.call(t,u)))return!1}var h=a.get(e),p=a.get(t);if(h&&p)return h==t&&p==e;var d=!0;a.set(e,t),a.set(t,e);for(var f=o;++c<l;){var m=e[u=s[c]],g=t[u];if(r)var v=o?r(g,m,u,t,e,a):r(m,g,u,e,t,a);if(!(void 0===v?m===g||i(m,g,n,r,a):v)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var y=e.constructor,x=t.constructor;y==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x||(d=!1)}return a.delete(e),a.delete(t),d}(e,t,n,r,i,a))}function n6(e,t,n,r,i){return e===t||(null==e||null==t||!W2(e)&&!W2(t)?e!=e&&t!=t:t6(e,t,n,r,n6,i))}function r6(e){return e==e&&!s2(e)}function i6(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function a6(e){var t=function(e){for(var t=s8(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,r6(i)]}return t}(e);return 1==t.length&&t[0][2]?i6(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=n[i])[0],c=e[l],u=s[1];if(o&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new O2;if(r)var p=r(c,u,l,e,t,h);if(!(void 0===p?n6(u,c,3,r,h):p))return!1}}return!0}(n,e,t)}}var o6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s6=/^\w*$/;function l6(e,t){if(J2(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!W4(e))||(s6.test(e)||!o6.test(e)||null!=t&&e in Object(t))}function c6(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(c6.Cache||A2),n}c6.Cache=A2;var u6=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h6=/\\(\\)?/g,p6=function(e){var t=c6(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(u6,(function(e,n,r,i){t.push(r?i.replace(h6,"$1"):n||e)})),t})),d6=J5?J5.prototype:void 0,f6=d6?d6.toString:void 0;function m6(e){if("string"==typeof e)return e;if(J2(e))return O8(e,m6)+"";if(W4(e))return f6?f6.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function g6(e,t){return J2(e)?e:l6(e,t)?[e]:p6(function(e){return null==e?"":m6(e)}(e))}function v6(e){if("string"==typeof e||W4(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function y6(e,t){for(var n=0,r=(t=g6(t,e)).length;null!=e&&n<r;)e=e[v6(t[n++])];return n&&n==r?e:void 0}function x6(e,t){return null!=e&&t in Object(e)}function E6(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=g6(t,e)).length,a=!1;++r<i;){var o=v6(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&e4(i)&&T4(o,i)&&(J2(e)||Z2(e))}(e,t,x6)}function b6(e,t){return l6(e)&&r6(t)?i6(v6(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:y6(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?E6(n,e):n6(t,r,3)}}function C6(e){return l6(e)?(t=v6(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return y6(t,e)}}(e);var t}function T6(e,t){var n=-1,r=t4(e)?Array(e.length):[];return l8(e,(function(e,i,a){r[++n]=t(e,i,a)})),r}function w6(e,t){return(J2(e)?O8:T6)(e,function(e){return"function"==typeof e?e:null==e?N4:"object"==typeof e?J2(e)?b6(e[0],e[1]):a6(e):C6(e)}(t))}var S6=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,i=k5({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return d.createElement("div",{style:i.swatches},w6(t,(function(e){return d.createElement(k8,{key:e,color:e,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),d.createElement("div",{style:i.clear}))},k6=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,a=e.width,o=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h="transparent"===r,p=function(e,n){f8(e)&&t({hex:e,source:"hex"},n)},f=k5(j4({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:m8(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},l),{"hide-triangle":"hide"===o});return d.createElement("div",{style:f.card,className:"block-picker "+u},d.createElement("div",{style:f.triangle}),d.createElement("div",{style:f.head},h&&d.createElement(M5,{borderRadius:"6px 6px 0 0"}),d.createElement("div",{style:f.label},r)),d.createElement("div",{style:f.body},d.createElement(S6,{colors:i,onClick:p,onSwatchHover:n}),d.createElement(H5,{style:{input:f.input},value:r,onChange:p})))};k6.propTypes={width:Z.oneOfType([Z.string,Z.number]),colors:Z.arrayOf(Z.string),triangle:Z.oneOf(["top","hide"]),styles:Z.object},k6.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},x8(k6);var _6="#ffcdd2",A6="#e57373",O6="#f44336",I6="#d32f2f",M6="#b71c1c",N6="#f8bbd0",F6="#f06292",L6="#e91e63",P6="#c2185b",R6="#880e4f",D6="#e1bee7",B6="#ba68c8",z6="#9c27b0",H6="#7b1fa2",j6="#4a148c",G6="#d1c4e9",$6="#9575cd",Y6="#673ab7",U6="#512da8",V6="#311b92",W6="#c5cae9",X6="#7986cb",q6="#3f51b5",K6="#303f9f",Q6="#1a237e",Z6="#bbdefb",J6="#64b5f6",e3="#2196f3",t3="#1976d2",n3="#0d47a1",r3="#b3e5fc",i3="#4fc3f7",a3="#03a9f4",o3="#0288d1",s3="#01579b",l3="#b2ebf2",c3="#4dd0e1",u3="#00bcd4",h3="#0097a7",p3="#006064",d3="#b2dfdb",f3="#4db6ac",m3="#009688",g3="#00796b",v3="#004d40",y3="#c8e6c9",x3="#81c784",E3="#4caf50",b3="#388e3c",C3="#dcedc8",T3="#aed581",w3="#8bc34a",S3="#689f38",k3="#33691e",_3="#f0f4c3",A3="#dce775",O3="#cddc39",I3="#afb42b",M3="#827717",N3="#fff9c4",F3="#fff176",L3="#ffeb3b",P3="#fbc02d",R3="#f57f17",D3="#ffecb3",B3="#ffd54f",z3="#ffc107",H3="#ffa000",j3="#ff6f00",G3="#ffe0b2",$3="#ffb74d",Y3="#ff9800",U3="#f57c00",V3="#e65100",W3="#ffccbc",X3="#ff8a65",q3="#ff5722",K3="#e64a19",Q3="#bf360c",Z3="#d7ccc8",J3="#a1887f",e7="#795548",t7="#5d4037",n7="#3e2723",r7="#cfd8dc",i7="#90a4ae",a7="#607d8b",o7="#455a64",s7="#263238",l7=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,i=e.hover,a=e.active,o=e.circleSize,s=e.circleSpacing,l=k5({default:{swatch:{width:o,height:o,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:a});return d.createElement("div",{style:l.swatch},d.createElement(k8,{style:l.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+t}}))};l7.defaultProps={circleSize:28,circleSpacing:14};var c7=w5(l7),u7=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,i=e.colors,a=e.hex,o=e.circleSize,s=e.styles,l=void 0===s?{}:s,c=e.circleSpacing,u=e.className,h=void 0===u?"":u,p=k5(j4({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},l)),f=function(e,t){return n({hex:e,source:"hex"},t)};return d.createElement("div",{style:p.card,className:"circle-picker "+h},w6(i,(function(e){return d.createElement(c7,{key:e,color:e,onClick:f,onSwatchHover:r,active:a===e.toLowerCase(),circleSize:o,circleSpacing:c})})))};function h7(e){return void 0===e}u7.propTypes={width:Z.oneOfType([Z.string,Z.number]),circleSize:Z.number,circleSpacing:Z.number,styles:Z.object},u7.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[O6,L6,z6,Y6,q6,e3,a3,u3,m3,E3,w3,O3,L3,z3,Y3,q3,e7,a7],styles:{}},x8(u7);var p7={};Object.defineProperty(p7,"__esModule",{value:!0});var d7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f7=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);var m7=p7.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,a=e.height,o=void 0===a?24:a,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return f7.default.createElement("svg",d7({viewBox:"0 0 24 24",style:d7({fill:n,width:i,height:o},l)},c),f7.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},g7=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var v7=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?f8(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(h7(e.s)?n.props.hsl.s:e.s),l:Number(h7(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),g7(t,[{key:"render",value:function(){var e=this,t=k5({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=d.createElement("div",{style:t.fields,className:"flexbox-fix"},d.createElement("div",{style:t.field},d.createElement(H5,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=d.createElement("div",{style:t.fields,className:"flexbox-fix"},d.createElement("div",{style:t.field},d.createElement(H5,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(H5,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(H5,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),d.createElement("div",{style:t.alpha},d.createElement(H5,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=d.createElement("div",{style:t.fields,className:"flexbox-fix"},d.createElement("div",{style:t.field},d.createElement(H5,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(H5,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(H5,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),d.createElement("div",{style:t.alpha},d.createElement(H5,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),d.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,d.createElement("div",{style:t.toggle},d.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},d.createElement(m7,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}();v7.defaultProps={view:"hex"};var y7=function(){var e=k5({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return d.createElement("div",{style:e.picker})},x7=function(){var e=k5({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return d.createElement("div",{style:e.picker})},E7=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,i=e.rgb,a=e.hsl,o=e.hsv,s=e.hex,l=e.renderers,c=e.styles,u=void 0===c?{}:c,h=e.className,p=void 0===h?"":h,f=e.defaultView,m=k5(j4({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:r});return d.createElement("div",{style:m.picker,className:"chrome-picker "+p},d.createElement("div",{style:m.saturation},d.createElement(r8,{style:m.Saturation,hsl:a,hsv:o,pointer:x7,onChange:n})),d.createElement("div",{style:m.body},d.createElement("div",{style:m.controls,className:"flexbox-fix"},d.createElement("div",{style:m.color},d.createElement("div",{style:m.swatch},d.createElement("div",{style:m.active}),d.createElement(M5,{renderers:l}))),d.createElement("div",{style:m.toggles},d.createElement("div",{style:m.hue},d.createElement(U5,{style:m.Hue,hsl:a,pointer:y7,onChange:n})),d.createElement("div",{style:m.alpha},d.createElement(R5,{style:m.Alpha,rgb:i,hsl:a,pointer:y7,renderers:l,onChange:n})))),d.createElement(v7,{rgb:i,hsl:a,hex:s,view:f,onChange:n,disableAlpha:r})))};E7.propTypes={width:Z.oneOfType([Z.string,Z.number]),disableAlpha:Z.bool,styles:Z.object,defaultView:Z.oneOf(["hex","rgb","hsl"])},E7.defaultProps={width:225,disableAlpha:!1,styles:{}},x8(E7);var b7=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,a=e.active,o=k5({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:m8(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return d.createElement(k8,{style:o.color,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},d.createElement("div",{style:o.dot}))},C7=function(e){var t=e.hex,n=e.rgb,r=e.onChange,i=k5({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return d.createElement("div",{style:i.fields,className:"flexbox-fix"},d.createElement("div",{style:i.active}),d.createElement(H5,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:a}),d.createElement(H5,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:a}),d.createElement(H5,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:a}),d.createElement(H5,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:a}))},T7=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,i=e.hex,a=e.rgb,o=e.styles,s=void 0===o?{}:o,l=e.className,c=void 0===l?"":l,u=k5(j4({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},s)),h=function(e,n){e.hex?f8(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return d.createElement(G4,{style:u.Compact,styles:s},d.createElement("div",{style:u.compact,className:"compact-picker "+c},d.createElement("div",null,w6(r,(function(e){return d.createElement(b7,{key:e,color:e,active:e.toLowerCase()===i,onClick:h,onSwatchHover:n})})),d.createElement("div",{style:u.clear})),d.createElement(C7,{hex:i,rgb:a,onChange:h})))};T7.propTypes={colors:Z.arrayOf(Z.string),styles:Z.object},T7.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},x8(T7);var w7=w5((function(e){var t=e.hover,n=e.color,r=e.onClick,i=e.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=k5({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:t});return d.createElement("div",{style:o.swatch},d.createElement(k8,{color:n,onClick:r,onHover:i,focusStyle:a}))})),S7=function(e){var t=e.width,n=e.colors,r=e.onChange,i=e.onSwatchHover,a=e.triangle,o=e.styles,s=void 0===o?{}:o,l=e.className,c=void 0===l?"":l,u=k5(j4({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},s),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a,"bottom-left-triangle":"bottom-left"===a,"bottom-right-triangle":"bottom-right"===a}),h=function(e,t){return r({hex:e,source:"hex"},t)};return d.createElement("div",{style:u.card,className:"github-picker "+c},d.createElement("div",{style:u.triangleShadow}),d.createElement("div",{style:u.triangle}),w6(n,(function(e){return d.createElement(w7,{color:e,key:e,onClick:h,onSwatchHover:i})})))};S7.propTypes={width:Z.oneOfType([Z.string,Z.number]),colors:Z.arrayOf(Z.string),triangle:Z.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Z.object},S7.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},x8(S7);var k7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_7=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.hsl,a=e.direction,o=e.pointer,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=k5(j4({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},l));return d.createElement("div",{style:h.picker,className:"hue-picker "+u},d.createElement(U5,k7({},h.hue,{hsl:i,pointer:o,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:a})))};_7.propTypes={styles:Z.object},_7.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=k5({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return d.createElement("div",{style:n.picker})},styles:{}},x8(_7);x8((function(e){var t=e.onChange,n=e.hex,r=e.rgb,i=e.styles,a=void 0===i?{}:i,o=e.className,s=void 0===o?"":o,l=k5(j4({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),c=function(e,n){e.hex?f8(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return d.createElement(G4,{styles:a},d.createElement("div",{style:l.material,className:"material-picker "+s},d.createElement(H5,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:n,onChange:c}),d.createElement("div",{style:l.split,className:"flexbox-fix"},d.createElement("div",{style:l.third},d.createElement(H5,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:r.r,onChange:c})),d.createElement("div",{style:l.third},d.createElement(H5,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:r.g,onChange:c})),d.createElement("div",{style:l.third},d.createElement(H5,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:r.b,onChange:c})))))}));var A7=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,i=e.hex,a=k5({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(e,i){e["#"]?f8(e["#"])&&t({hex:e["#"],source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},i):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},i)};return d.createElement("div",{style:a.fields},d.createElement(H5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(r.h),onChange:o}),d.createElement(H5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:o}),d.createElement(H5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:o}),d.createElement("div",{style:a.divider}),d.createElement(H5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:n.r,onChange:o}),d.createElement(H5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:n.g,onChange:o}),d.createElement(H5,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:n.b,onChange:o}),d.createElement("div",{style:a.divider}),d.createElement(H5,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:i.replace("#",""),onChange:o}),d.createElement("div",{style:a.fieldSymbols},d.createElement("div",{style:a.symbol},"°"),d.createElement("div",{style:a.symbol},"%"),d.createElement("div",{style:a.symbol},"%")))},O7=function(e){var t=e.hsl,n=k5({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return d.createElement("div",{style:n.picker})},I7=function(){var e=k5({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return d.createElement("div",{style:e.pointer},d.createElement("div",{style:e.left},d.createElement("div",{style:e.leftInside})),d.createElement("div",{style:e.right},d.createElement("div",{style:e.rightInside})))},M7=function(e){var t=e.onClick,n=e.label,r=e.children,i=e.active,a=k5({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return d.createElement("div",{style:a.button,onClick:t},n||r)},N7=function(e){var t=e.rgb,n=e.currentColor,r=k5({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return d.createElement("div",null,d.createElement("div",{style:r.label},"new"),d.createElement("div",{style:r.swatches},d.createElement("div",{style:r.new}),d.createElement("div",{style:r.current})),d.createElement("div",{style:r.label},"current"))},F7=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var L7=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),F7(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,i=void 0===r?"":r,a=k5(j4({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return d.createElement("div",{style:a.picker,className:"photoshop-picker "+i},d.createElement("div",{style:a.head},this.props.header),d.createElement("div",{style:a.body,className:"flexbox-fix"},d.createElement("div",{style:a.saturation},d.createElement(r8,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:O7,onChange:this.props.onChange})),d.createElement("div",{style:a.hue},d.createElement(U5,{direction:"vertical",hsl:this.props.hsl,pointer:I7,onChange:this.props.onChange})),d.createElement("div",{style:a.controls},d.createElement("div",{style:a.top,className:"flexbox-fix"},d.createElement("div",{style:a.previews},d.createElement(N7,{rgb:this.props.rgb,currentColor:this.state.currentColor})),d.createElement("div",{style:a.actions},d.createElement(M7,{label:"OK",onClick:this.props.onAccept,active:!0}),d.createElement(M7,{label:"Cancel",onClick:this.props.onCancel}),d.createElement(A7,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}();L7.propTypes={header:Z.string,styles:Z.object},L7.defaultProps={header:"Color Picker",styles:{}},x8(L7);var P7=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,a=e.disableAlpha,o=k5({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),s=function(e,i){e.hex?f8(e.hex)&&t({hex:e.hex,source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},i):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},i))};return d.createElement("div",{style:o.fields,className:"flexbox-fix"},d.createElement("div",{style:o.double},d.createElement(H5,{style:{input:o.input,label:o.label},label:"hex",value:i.replace("#",""),onChange:s})),d.createElement("div",{style:o.single},d.createElement(H5,{style:{input:o.input,label:o.label},label:"r",value:n.r,onChange:s,dragLabel:"true",dragMax:"255"})),d.createElement("div",{style:o.single},d.createElement(H5,{style:{input:o.input,label:o.label},label:"g",value:n.g,onChange:s,dragLabel:"true",dragMax:"255"})),d.createElement("div",{style:o.single},d.createElement(H5,{style:{input:o.input,label:o.label},label:"b",value:n.b,onChange:s,dragLabel:"true",dragMax:"255"})),d.createElement("div",{style:o.alpha},d.createElement(H5,{style:{input:o.input,label:o.label},label:"a",value:Math.round(100*n.a),onChange:s,dragLabel:"true",dragMax:"100"})))},R7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D7=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,a=k5({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),o=function(e,t){r({hex:e,source:"hex"},t)};return d.createElement("div",{style:a.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return d.createElement("div",{key:n,style:a.swatchWrap},d.createElement(k8,R7({},t,{style:a.swatch,onClick:o,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};D7.propTypes={colors:Z.arrayOf(Z.oneOfType([Z.string,Z.shape({color:Z.string,title:Z.string})])).isRequired};var B7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z7=function(e){var t=e.width,n=e.rgb,r=e.hex,i=e.hsv,a=e.hsl,o=e.onChange,s=e.onSwatchHover,l=e.disableAlpha,c=e.presetColors,u=e.renderers,h=e.styles,p=void 0===h?{}:h,f=e.className,m=void 0===f?"":f,g=k5(j4({default:B7({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:l});return d.createElement("div",{style:g.picker,className:"sketch-picker "+m},d.createElement("div",{style:g.saturation},d.createElement(r8,{style:g.Saturation,hsl:a,hsv:i,onChange:o})),d.createElement("div",{style:g.controls,className:"flexbox-fix"},d.createElement("div",{style:g.sliders},d.createElement("div",{style:g.hue},d.createElement(U5,{style:g.Hue,hsl:a,onChange:o})),d.createElement("div",{style:g.alpha},d.createElement(R5,{style:g.Alpha,rgb:n,hsl:a,renderers:u,onChange:o}))),d.createElement("div",{style:g.color},d.createElement(M5,null),d.createElement("div",{style:g.activeColor}))),d.createElement(P7,{rgb:n,hsl:a,hex:r,onChange:o,disableAlpha:l}),d.createElement(D7,{colors:c,onClick:o,onSwatchHover:s}))};z7.propTypes={disableAlpha:Z.bool,width:Z.oneOfType([Z.string,Z.number]),styles:Z.object},z7.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};var H7=x8(z7),j7=function(e){var t=e.hsl,n=e.offset,r=e.onClick,i=void 0===r?function(){}:r,a=e.active,o=e.first,s=e.last,l=k5({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:o,last:s});return d.createElement("div",{style:l.swatch,onClick:function(e){return i({h:t.h,s:.5,l:n,source:"hsl"},e)}})},G7=function(e){var t=e.onClick,n=e.hsl,r=k5({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return d.createElement("div",{style:r.swatches},d.createElement("div",{style:r.swatch},d.createElement(j7,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:t,first:!0})),d.createElement("div",{style:r.swatch},d.createElement(j7,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:t})),d.createElement("div",{style:r.swatch},d.createElement(j7,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:t})),d.createElement("div",{style:r.swatch},d.createElement(j7,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:t})),d.createElement("div",{style:r.swatch},d.createElement(j7,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:t,last:!0})),d.createElement("div",{style:r.clear}))},$7=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,i=e.styles,a=void 0===i?{}:i,o=e.className,s=void 0===o?"":o,l=k5(j4({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return d.createElement("div",{style:l.wrap||{},className:"slider-picker "+s},d.createElement("div",{style:l.hue},d.createElement(U5,{style:l.Hue,hsl:t,pointer:r,onChange:n})),d.createElement("div",{style:l.swatches},d.createElement(G7,{hsl:t,onClick:n})))};$7.propTypes={styles:Z.object},$7.defaultProps={pointer:function(){var e=k5({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return d.createElement("div",{style:e.picker})},styles:{}},x8($7);var Y7={};Object.defineProperty(Y7,"__esModule",{value:!0});var U7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V7=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);var W7=Y7.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,a=e.height,o=void 0===a?24:a,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return V7.default.createElement("svg",U7({viewBox:"0 0 24 24",style:U7({fill:n,width:i,height:o},l)},c),V7.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},X7=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,a=e.first,o=e.last,s=e.active,l=k5({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:m8(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:o,active:s,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return d.createElement(k8,{color:t,style:l.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},d.createElement("div",{style:l.check},d.createElement(W7,null)))},q7=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,i=e.active,a=k5({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return d.createElement("div",{style:a.group},w6(r,(function(e,a){return d.createElement(X7,{key:e,color:e,active:e.toLowerCase()===i,first:0===a,last:a===r.length-1,onClick:t,onSwatchHover:n})})))},K7=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.onSwatchHover,a=e.colors,o=e.hex,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=k5(j4({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},l)),p=function(e,t){return r({hex:e,source:"hex"},t)};return d.createElement("div",{style:h.picker,className:"swatches-picker "+u},d.createElement(G4,null,d.createElement("div",{style:h.overflow},d.createElement("div",{style:h.body},w6(a,(function(e){return d.createElement(q7,{key:e.toString(),group:e,active:o,onClick:p,onSwatchHover:i})})),d.createElement("div",{style:h.clear})))))};K7.propTypes={width:Z.oneOfType([Z.string,Z.number]),height:Z.oneOfType([Z.string,Z.number]),colors:Z.arrayOf(Z.arrayOf(Z.string)),styles:Z.object},K7.defaultProps={width:320,height:240,colors:[[M6,I6,O6,A6,_6],[R6,P6,L6,F6,N6],[j6,H6,z6,B6,D6],[V6,U6,Y6,$6,G6],[Q6,K6,q6,X6,W6],[n3,t3,e3,J6,Z6],[s3,o3,a3,i3,r3],[p3,h3,u3,c3,l3],[v3,g3,m3,f3,d3],["#194D33",b3,E3,x3,y3],[k3,S3,w3,T3,C3],[M3,I3,O3,A3,_3],[R3,P3,L3,F3,N3],[j3,H3,z3,B3,D3],[V3,U3,Y3,$3,G3],[Q3,K3,q3,X3,W3],[n7,t7,e7,J3,Z3],[s7,o7,a7,i7,r7],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},x8(K7);var Q7=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,a=e.width,o=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=k5(j4({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},l),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o}),p=function(e,n){f8(e)&&t({hex:e,source:"hex"},n)};return d.createElement("div",{style:h.card,className:"twitter-picker "+u},d.createElement("div",{style:h.triangleShadow}),d.createElement("div",{style:h.triangle}),d.createElement("div",{style:h.body},w6(i,(function(e,t){return d.createElement(k8,{key:t,color:e,hex:e,style:h.swatch,onClick:p,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),d.createElement("div",{style:h.hash},"#"),d.createElement(H5,{label:null,style:{input:h.input},value:r.replace("#",""),onChange:p}),d.createElement("div",{style:h.clear})))};Q7.propTypes={width:Z.oneOfType([Z.string,Z.number]),triangle:Z.oneOf(["hide","top-left","top-right"]),colors:Z.arrayOf(Z.string),styles:Z.object},Q7.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},x8(Q7);var Z7=function(e){var t=k5({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return d.createElement("div",{style:t.picker})};Z7.propTypes={hsl:Z.shape({h:Z.number,s:Z.number,l:Z.number,a:Z.number})},Z7.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var J7=function(e){var t=k5({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return d.createElement("div",{style:t.picker})};J7.propTypes={hsl:Z.shape({h:Z.number,s:Z.number,l:Z.number,a:Z.number})},J7.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var eee=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,a=e.hsv,o=function(e,n){if(e.hex)f8(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");g8(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var i=e.hsv.split(",");g8(e.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("°",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},n))}else if(e.hsl){var a=e.hsl.split(",");g8(e.hsl,"hsl")&&(a[2]=a[2].replace("%",""),a[1]=a[1].replace("%",""),a[0]=a[0].replace("°",""),1==u[1]?u[1]=.01:1==u[2]&&(u[2]=.01),t({h:Number(a[0]),s:Number(a[1]),v:Number(a[2]),source:"hsl"},n))}},s=k5({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),l=n.r+", "+n.g+", "+n.b,c=Math.round(r.h)+"°, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",u=Math.round(a.h)+"°, "+Math.round(100*a.s)+"%, "+Math.round(100*a.v)+"%";return d.createElement("div",{style:s.wrap,className:"flexbox-fix"},d.createElement("div",{style:s.fields},d.createElement("div",{style:s.double},d.createElement(H5,{style:{input:s.input,label:s.label},label:"hex",value:i,onChange:o})),d.createElement("div",{style:s.column},d.createElement("div",{style:s.single},d.createElement(H5,{style:{input:s.input2,label:s.label2},label:"rgb",value:l,onChange:o})),d.createElement("div",{style:s.single},d.createElement(H5,{style:{input:s.input2,label:s.label2},label:"hsv",value:u,onChange:o})),d.createElement("div",{style:s.single},d.createElement(H5,{style:{input:s.input2,label:s.label2},label:"hsl",value:c,onChange:o})))))},tee=function(e){var t=e.width,n=e.onChange,r=e.rgb,i=e.hsl,a=e.hsv,o=e.hex,s=e.header,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p=k5(j4({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return d.createElement("div",{style:p.picker,className:"google-picker "+h},d.createElement("div",{style:p.head},s),d.createElement("div",{style:p.swatch}),d.createElement("div",{style:p.saturation},d.createElement(r8,{hsl:i,hsv:a,pointer:Z7,onChange:n})),d.createElement("div",{style:p.body},d.createElement("div",{style:p.controls,className:"flexbox-fix"},d.createElement("div",{style:p.hue},d.createElement(U5,{style:p.Hue,hsl:i,radius:"4px",pointer:J7,onChange:n}))),d.createElement(eee,{rgb:r,hsl:i,hex:o,hsv:a,onChange:n})))};tee.propTypes={width:Z.oneOfType([Z.string,Z.number]),styles:Z.object,header:Z.string},tee.defaultProps={width:652,styles:{},header:"Color picker"},x8(tee);function nee(e){const{value:t="#000",onChange:n}=e,[r,i]=f.exports.useState(!1),a=f.exports.useRef(null);var o,s;return o=a,s=()=>{i(!1)},f.exports.useEffect((()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&s(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[o,s]),d.createElement(Gt,{trigger:"click",placement:"left",visible:r,overlayClassName:"color-picker-popover",content:d.createElement("div",{ref:a,onMouseLeave:()=>{i(!1)}},d.createElement(H7,{color:t,onChange:e=>{n&&n(e.hex)}}))},d.createElement("div",{style:{background:t,width:32,height:32,borderRadius:2,cursor:"pointer"},onClick:()=>{i(!r)}}))}function ree(){return d.createElement(E9,{header:"阈值"},d.createElement(bt.List,{name:["options","thresholds","steps"]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement(xt,{style:{width:"100%",marginBottom:10},onClick:()=>{t({value:0})}},"添加"),e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(Ct.Group,{key:r,compact:!0,style:{marginBottom:5}},d.createElement(bt.Item,l(s({noStyle:!0},a),{name:[i,"color"]}),d.createElement(nee,null)),d.createElement(bt.Item,l(s({noStyle:!0},a),{name:[i,"value"]}),d.createElement(Dt,{style:{width:430}})),d.createElement(xt,{style:{width:50},icon:d.createElement(Ee,null),onClick:()=>{n(i)}}))}))))))}function iee(){return d.createElement(d.Fragment,null,d.createElement(b9,null),d.createElement(C9,null),d.createElement(T9,null),d.createElement(k9,null),d.createElement(ree,null))}const aee=[1,2,3,4,5,6,7,8,9,10];function oee(){const e=["custom"];return d.createElement(E9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(kt,{gutter:10},d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"显示内容",name:[...e,"textMode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"valueAndName"},"名称和值"),d.createElement(Bt.Button,{value:"value"},"值")))),d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"颜色模式",name:[...e,"colorMode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"value"},"值"),d.createElement(Bt.Button,{value:"background"},"背景"))))),d.createElement(kt,{gutter:10},d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"取值计算",name:[...e,"calc"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},T.map(Fc,((e,t)=>d.createElement(Mt.Option,{key:t,value:t},e.name)))))),d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"每行最多显示",name:[...e,"colSpan"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},T.map(aee,(e=>d.createElement(Mt.Option,{key:e,value:e},e))))))),d.createElement(kt,{gutter:10},d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"标题字体大小",name:[...e,"textSize","title"]},d.createElement(Dt,{placeholder:"auto",style:{width:"100%"},min:12,max:100}))),d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"值字体大小",name:[...e,"textSize","value"]},d.createElement(Dt,{placeholder:"auto",style:{width:"100%"},min:12,max:100}))))))}function see(e){const{preNamePrefix:t=[],namePrefix:n=["options","valueMappings"]}=e;return d.createElement(E9,{header:"值映射"},d.createElement(bt.List,{name:n},((e,{add:r,remove:i})=>d.createElement(d.Fragment,null,d.createElement(xt,{style:{width:"100%",marginBottom:10},onClick:()=>{r({type:"special"})}},"添加"),T.isEmpty(e)?null:d.createElement(kt,{gutter:10},d.createElement(_t,{flex:"290px"},d.createElement(Tt,{overlayInnerStyle:{width:300},title:d.createElement("div",null,d.createElement("div",null,"范围值说明: from >= value <= to"),d.createElement("div",null,"范围值默认值: from=-Infinity; to=Infinity "),d.createElement("div",null,"特殊值Null说明: 匹配值为 null 或 undefined 或 no data"))},"条件 ",d.createElement(R,null))),d.createElement(_t,{flex:"210"},"显示文字"),d.createElement(_t,{flex:"45"},"颜色"),d.createElement(_t,{flex:"50"},"操作")),e.map((e=>{var r=e,{key:a,name:o}=r,u=c(r,["key","name"]);return d.createElement(kt,{key:a,gutter:10,style:{marginBottom:10}},d.createElement(_t,{flex:"290px"},d.createElement(kt,{gutter:10},d.createElement(_t,{flex:"80px"},d.createElement(bt.Item,l(s({noStyle:!0},u),{name:[o,"type"]}),d.createElement(Mt,{suffixIcon:d.createElement(H,null),style:{width:80}},d.createElement(Mt.Option,{value:"special"},"固定值"),d.createElement(Mt.Option,{value:"range"},"范围值"),d.createElement(Mt.Option,{value:"specialValue"},"特殊值")))),d.createElement(_t,{flex:"1"},d.createElement(bt.Item,l(s({noStyle:!0},u),{shouldUpdate:!0}),(({getFieldValue:e})=>{const r=e([...t,...n,o,"type"]);return"special"===r?d.createElement(bt.Item,l(s({noStyle:!0},u),{name:[o,"match","special"]}),d.createElement(Dt,{style:{width:"100%"}})):"range"===r?d.createElement(kt,{gutter:10},d.createElement(_t,{span:12},d.createElement(bt.Item,l(s({noStyle:!0},u),{name:[o,"match","from"]}),d.createElement(Dt,{placeholder:"from"}))),d.createElement(_t,{span:12},d.createElement(bt.Item,l(s({noStyle:!0},u),{name:[o,"match","to"]}),d.createElement(Dt,{placeholder:"to"})))):"specialValue"===r?d.createElement(bt.Item,l(s({noStyle:!0},u),{name:[o,"match","specialValue"]}),d.createElement(Mt,{suffixIcon:d.createElement(H,null),style:{width:"100%"}},d.createElement(Mt.Option,{value:"null"},"Null"),d.createElement(Mt.Option,{value:"empty"},"Empty string"))):null}))))),d.createElement(_t,{flex:"210"},d.createElement(bt.Item,l(s({noStyle:!0},u),{name:[o,"result","text"]}),d.createElement(Ct,{placeholder:"可选"}))),d.createElement(_t,{flex:"45"},d.createElement(bt.Item,l(s({noStyle:!0},u),{name:[o,"result","color"]}),d.createElement(nee,null))),d.createElement(_t,{flex:"50"},d.createElement(xt,{onClick:()=>{i(o)},icon:d.createElement(Ee,null)})))}))))))}function lee(){return d.createElement(d.Fragment,null,d.createElement(oee,null),d.createElement(see,null),d.createElement(k9,null))}function cee({chartForm:e}){const t=["custom"],{state:n}=f.exports.useContext(kh);return d.createElement(E9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(kt,{gutter:10},d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"显示表头",name:[...t,"showHeader"],valuePropName:"checked"},d.createElement(Lt,{size:"small"}))),d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"颜色模式",name:[...t,"colorMode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"value"},"值"),d.createElement(Bt.Button,{value:"background"},"背景"))))),d.createElement(bt.Item,{label:"取值计算",name:[...t,"calc"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},T.map(Fc,((e,t)=>d.createElement(Mt.Option,{key:t,value:t},e.name))))),d.createElement(kt,{gutter:10},d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"显示模式",name:[...t,"displayMode"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},d.createElement(Mt.Option,{value:"seriesToRows"},"每行展示 serie 的值"),d.createElement(Mt.Option,{value:"labelsOfSeriesToRows"},"每行展示 labels 的值"),d.createElement(Mt.Option,{value:"labelValuesToRows"},"每行展示指定聚合维度的值")))),d.createElement(bt.Item,{noStyle:!0,shouldUpdate:(e,n)=>T.get(e,[...t,"displayMode"])!==T.get(n,[...t,"displayMode"])},(({getFieldValue:e})=>"labelsOfSeriesToRows"===e([...t,"displayMode"])?d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"显示列",name:[...t,"columns"]},d.createElement(Mt,{mode:"multiple",placeholder:"默认全选",suffixIcon:d.createElement(H,null)},T.map(T.concat(n.metric,"value"),(e=>d.createElement(Mt.Option,{key:e,value:e},e)))))):"labelValuesToRows"===e([...t,"displayMode"])?d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"显示维度",name:[...t,"aggrDimension"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},T.map(n.metric,(e=>d.createElement(Mt.Option,{key:e,value:e},e)))))):null))),d.createElement(kt,{gutter:10},d.createElement(_t,{span:12},d.createElement(bt.Item,{noStyle:!0,shouldUpdate:!0},(({getFieldValue:r})=>{const i=r([...t,"displayMode"]),a=r([...t,"columns"])?r([...t,"columns"]):T.concat(n.metric,"value"),o=r([...t,"aggrDimension"]);let s=[];return"seriesToRows"===i?s=["name","value"]:"labelsOfSeriesToRows"===i?s=a:"labelValuesToRows"===i&&(s=[o||"name","value"]),d.createElement(bt.Item,{label:"默认排序列",name:[...t,"sortColumn"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null),allowClear:!0,onChange:()=>{if(!e.getFieldValue([...t,"sortOrder"])){const t=e.getFieldValue("custom");T.set(t,"sortOrder","ascend"),e.setFieldsValue({custom:t})}}},T.map(s,(e=>d.createElement(Mt.Option,{key:e,value:e},e)))))}))),d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"默认排序顺序",name:[...t,"sortOrder"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null),allowClear:!0},d.createElement(Mt.Option,{value:"ascend"},"asc"),d.createElement(Mt.Option,{value:"descend"},"desc")))))))}function uee({targets:e}){const t=["overrides"];return d.createElement(bt.List,{name:t},((n,{add:r,remove:i})=>n.map((a=>{var o=a,{key:u,name:h}=o,p=c(o,["key","name"]);return d.createElement(E9,{key:u,isInner:!0,header:"override",extra:d.createElement(Rt,null,d.createElement(U,{onClick:()=>{r({type:"special"})}}),n.length>1&&d.createElement(Y,{onClick:()=>{i(h)}}))},d.createElement(bt.Item,l(s({label:"查询条件名称"},p),{name:[h,"matcher","value"]}),d.createElement(Mt,{suffixIcon:d.createElement(H,null),allowClear:!0},T.map(e,(e=>d.createElement(Mt.Option,{key:e.refId,value:e.refId},e.refId))))),d.createElement(see,{preNamePrefix:t,namePrefix:[h,"properties","valueMappings"]}),d.createElement(k9,{preNamePrefix:t,namePrefix:[h,"properties","standardOptions"]}))}))))}function hee({targets:e,chartForm:t}){return d.createElement(d.Fragment,null,d.createElement(cee,{chartForm:t}),d.createElement(see,null),d.createElement(k9,null),d.createElement(uee,{targets:e}))}function pee(){const e=["custom"];return d.createElement(E9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(kt,{gutter:10},d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"取值计算",name:[...e,"calc"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},T.map(Fc,((e,t)=>d.createElement(Mt.Option,{key:t,value:t},e.name)))))),d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"图例位置",name:[...e,"legengPosition"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},Rc.map((e=>d.createElement(Mt.Option,{key:e,value:e},e)))))),d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"最多展示块数",name:[...e,"max"],tooltip:"超过的块数则合并展示为其他"},d.createElement(Dt,{style:{width:"100%"}}))),d.createElement(_t,{span:12},d.createElement(bt.Item,{label:"label是否包含名称",name:[...e,"labelWithName"],valuePropName:"checked"},d.createElement(Lt,null))))))}function dee(){return d.createElement(d.Fragment,null,d.createElement(pee,null))}function fee(){const e=["custom"];return d.createElement(E9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(kt,{gutter:10},d.createElement(_t,{span:10},d.createElement(bt.Item,{label:"取值计算",name:[...e,"calc"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},T.map(Fc,((e,t)=>d.createElement(Mt.Option,{key:t,value:t},e.name)))))),d.createElement(_t,{span:10},d.createElement(bt.Item,{label:"颜色",name:[...e,"colorRange"]},d.createElement(Mt,{suffixIcon:d.createElement(H,null),dropdownClassName:"color-scales",optionLabelProp:"label"},T.map(Mc,(e=>d.createElement(Mt.Option,{key:e.value,label:e.label,value:T.join(e.value,",")},d.createElement("span",{className:"color-scales-menu-colors"},T.map(e.value,(e=>d.createElement("span",{key:e,style:{backgroundColor:e}})))),e.label)))))),d.createElement(_t,{span:4},d.createElement(bt.Item,{label:"反转颜色",name:[...e,"reverseColorOrder"],valuePropName:"checked"},d.createElement(Lt,null)))),d.createElement(kt,{gutter:10},d.createElement(_t,{span:8},d.createElement(bt.Item,{label:"自动 min/max 值",tooltip:"默认自动从 series 里面取 min max 值",name:[...e,"colorDomainAuto"],valuePropName:"checked"},d.createElement(Lt,null))),d.createElement(bt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:t})=>{if(!t([...e,"colorDomainAuto"]))return d.createElement(d.Fragment,null,d.createElement(_t,{span:8},d.createElement(bt.Item,{label:"min",name:[...e,"colorDomain",0]},d.createElement(Dt,{style:{width:"100%"}}))),d.createElement(_t,{span:8},d.createElement(bt.Item,{label:"max",name:[...e,"colorDomain",1]},d.createElement(Dt,{style:{width:"100%"}}))))})))))}function mee(){return d.createElement(d.Fragment,null,d.createElement(fee,null),d.createElement(k9,null))}function gee({type:e,targets:t,chartForm:n}){return{timeseries:d.createElement(iee,null),stat:d.createElement(lee,null),table:d.createElement(hee,{targets:t,chartForm:n}),pie:d.createElement(dee,null),hexbin:d.createElement(mee,null)}[e]||`无效的图表类型 ${e}`}const vee="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split(""),yee=e=>{for(let t=0;t<vee.length;t++){const n=vee[t];if(!T.includes(e,n))return n}return"Z"},xee="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split("");function Eee(e){const{chartForm:t,setChangedFlag:n,initialValues:r,type:i,cluster:a,render:o,range:u,id:h}=e,[p,m]=f.exports.useState(e.variableConfigWithOptions);return Lc.custom=Pc[T.get(r,"type")||Lc.type],f.exports.useEffect((()=>{m(e.variableConfigWithOptions)}),[JSON.stringify(e.variableConfigWithOptions)]),d.createElement(bt,{layout:"vertical",form:t,initialValues:T.merge({},Lc,r),onValuesChange:()=>{n(T.uniqueId("xxx_"))}},d.createElement("div",{style:{height:"calc(100vh - 173px)"}},d.createElement(kt,{gutter:20,style:{flexWrap:"nowrap",height:"100%"}},d.createElement(_t,{flex:1,style:{minWidth:100}},d.createElement("div",{style:{marginBottom:10}},o(p)),d.createElement("div",{style:{height:"calc(100% - 310px)",overflowY:"auto"}},d.createElement("div",{style:{marginBottom:10}},d.createElement(J0,{onChange:(e,t,n)=>{m(n||[])},value:p,editable:!1,cluster:a,range:u,id:h})),d.createElement(bt.List,{name:"targets"},((e,{add:n,remove:r},{errors:i})=>d.createElement(d.Fragment,null,d.createElement(x9,null,T.map(e,(({name:t},n)=>d.createElement(E9,{header:d.createElement(bt.Item,{noStyle:!0,shouldUpdate:!0},(({getFieldValue:e})=>e(["targets",t,"refId"])||xee[n])),key:n,extra:d.createElement("div",null,e.length>1?d.createElement(Ee,{style:{marginLeft:10},onClick:()=>{r(t)}}):null)},d.createElement(bt.Item,{noStyle:!0,name:[t,"refId"]},d.createElement("div",null)),d.createElement("div",{style:{display:"flex",alignItems:"center"}},d.createElement(bt.Item,{label:"PromQL",name:[t,"expr"],validateTrigger:["onBlur"],rules:[{required:!0,message:"请输入PromQL"}],style:{flex:1}},d.createElement(y9,{validateTrigger:["onBlur"],url:"/api/n9e/prometheus",headers:{"X-Cluster":localStorage.getItem("curCluster")||"DEFAULT",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`}}))),d.createElement(kt,{gutter:10},d.createElement(_t,{flex:"auto"},d.createElement(bt.Item,{label:"Legend",name:[t,"legend"],tooltip:{getPopupContainer:()=>document.body,title:"Controls the name of the time series, using name or pattern. For example {{hostname}} will be replaced with label value for the label hostname."}},d.createElement(Ct,null))),d.createElement(_t,{flex:"116px"},d.createElement(bt.Item,{label:"时间选择",name:[t,"time"],tooltip:{getPopupContainer:()=>document.body,title:"可指定时间范围，默认为大盘全局时间范围"}},d.createElement(ou,{nullable:!0}))),d.createElement(_t,{flex:"72px"},d.createElement(bt.Item,{label:"Step",name:[t,"step"],tooltip:{getPopupContainer:()=>document.body,title:"可指定 step，默认为大盘全局 step"}},d.createElement(lu,null))))))),d.createElement(bt.ErrorList,{errors:i})),d.createElement(xt,{style:{width:"100%",marginTop:10},onClick:()=>{n({expr:"",refId:yee(T.map(t.getFieldValue("targets"),"refId"))})}},"+ add query")))))),d.createElement(_t,{flex:"600px",style:{overflowY:"auto"}},d.createElement(x9,null,d.createElement(E9,{header:"面板配置"},d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:"标题",name:"name",rules:[{required:!0,message:"图表名称"}]},d.createElement(Ct,null)),d.createElement(bt.Item,{label:"下钻链接"},d.createElement(bt.List,{name:"links"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement(xt,{style:{width:"100%",marginBottom:10},onClick:()=>{t({})}},"添加"),e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(Rt,{key:r,style:{alignItems:"flex-start"}},d.createElement(bt.Item,l(s({},a),{name:[i,"title"],rules:[{required:!0,message:"链接名称"}]}),d.createElement(Ct,{placeholder:"链接名称"})),d.createElement(bt.Item,l(s({},a),{name:[i,"url"],rules:[{required:!0,message:"链接地址"}]}),d.createElement(Ct,{style:{width:260},placeholder:"链接地址"})),d.createElement(Tt,{title:"是否新窗口打开"},d.createElement(bt.Item,l(s({},a),{name:[i,"targetBlank"],valuePropName:"checked"}),d.createElement(Lt,null))),d.createElement(xt,{icon:d.createElement(Ee,null),onClick:()=>{n(i)}}))}))))),d.createElement(bt.Item,{label:"备注",name:"description"},d.createElement(Ct.TextArea,{placeholder:"支持 markdown"}))))),d.createElement(bt.Item,{shouldUpdate:(e,t)=>!T.isEqual(e.targets,t.targets)},(({getFieldValue:e})=>d.createElement(gee,{type:i,targets:e("targets"),chartForm:t}))))))))}var bee=e9((function(e){var t;const{t:n}=Lr(),{visible:r,variableConfigWithOptions:i,cluster:a,id:o}=e,s=T.cloneDeep(e.initialValues),[l]=bt.useForm(),[c,u]=f.exports.useState({description:"小时",num:1,unit:"hour"}),h=T.get(s,"type")||Lc.type,[p,m]=f.exports.useState(h),[g,v]=f.exports.useState(null),[y,x]=f.exports.useState(T.uniqueId("xxx_")),[E,b]=f.exports.useState(l.getFieldsValue());return"hexbin"===s.type&&(null==(t=null==s?void 0:s.custom)?void 0:t.colorRange)&&T.isArray(s.custom.colorRange)&&T.set(s,"custom.colorRange",T.join(s.custom.colorRange,",")),f.exports.useEffect((()=>{b(l.getFieldsValue())}),[y]),d.createElement(It,{width:"100%",title:d.createElement("div",{style:{display:"flex",alignItems:"center"}},d.createElement("div",null,n(s?"编辑图表":"新建图表")),d.createElement(Rt,{style:{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"center",fontSize:12,lineHeight:"20px"}},d.createElement(Mt,{dropdownMatchSelectWidth:!1,value:p,onChange:e=>{m(e),l.setFieldsValue({custom:Pc[e]}),setTimeout((()=>{x(T.uniqueId("xxx_"))}),100)}},T.map(Nc,(e=>d.createElement(Mt.Option,{value:e.type,key:e.type},e.name)))),d.createElement(ou,{onChange:e=>u(e)}),d.createElement(lu,{onChange:e=>v(e),initialValue:g}),d.createElement(Ne,{style:{fontSize:18},onClick:()=>{e.destroy()}}))),style:{top:10,padding:0},visible:r,closable:!1,footer:[d.createElement(xt,{key:"cancel",onClick:()=>{e.destroy()}},"取消"),d.createElement(xt,{key:"ok",type:"primary",onClick:()=>{(async()=>{l.validateFields().then((async t=>{"hexbin"===p&&T.set(t,"custom.colorRange",T.split(t.custom.colorRange,","));let n=Object.assign(t,{version:"2.0.0",type:p,layout:null==s?void 0:s.layout});s&&s.id?n.id=s.id:n.id=Ic(),e.onOK(n),e.destroy()}))})()}},"确认")],onCancel:()=>{e.destroy()},bodyStyle:{padding:"10px 24px 24px 24px"}},d.createElement(Oh,null,d.createElement(Eee,{chartForm:l,setChangedFlag:x,initialValues:s,type:p,variableConfigWithOptions:i,cluster:a,range:c,id:o,render:e=>d.createElement("div",{style:{height:300}},d.createElement(q0,{dashboardId:o,time:c,step:g,type:p,values:E,variableConfig:e,isPreview:!0}))})))}));const Cee=Fe.exports.WidthProvider(Le);var Tee=d.memo((function(e){const{curCluster:t,dashboard:n,range:r,step:i,variableConfig:a,panels:o,setPanels:c,onShareClick:u,onUpdated:h}=e,p=f.exports.useRef(!1),m=f.exports.useRef(!1);return d.createElement("div",{className:"dashboards-panels"},d.createElement(Cee,s({layout:r9(o),onLayoutChange:e=>{if(p.current){const t=i9(a9(o,e));T.isEqual(o,t)||(c(t),m.current&&(m.current=!1,bo(n.id,{configs:d9(n.configs,t)}).then((()=>{h()}))))}p.current=!0},onDragStop:e=>{const t=i9(a9(o,e));T.isEqual(o,t)||bo(n.id,{configs:d9(n.configs,t)}).then((()=>{h()}))},onResizeStop:e=>{const t=i9(a9(o,e));T.isEqual(o,t)||bo(n.id,{configs:d9(n.configs,t)}).then((()=>{h()}))}},{rowHeight:40,cols:24,useCSSTransforms:!1,draggableHandle:".dashboards-panels-item-drag-handle"}),T.map(o,(e=>d.createElement("div",{key:e.layout.i,"data-id":e.layout.i},"row"!==e.type?Tc.valid(e.version)?d.createElement(q0,{dashboardId:T.toString(n.id),id:e.id,time:r,step:i,type:e.type,values:e,variableConfig:a,onCloneClick:()=>{const t=function(e,t){return T.concat(e,t)}(o,l(s({},e),{id:Ic(),layout:l(s({},e.layout),{i:Ic()})}));c(t),m.current=!0},onShareClick:()=>{u(e)},onEditClick:()=>{bee({visible:!0,variableConfigWithOptions:a,cluster:t,id:e.id,initialValues:l(s({},e),{id:e.id}),onOK:e=>{const t=u9(o,e);c(t),bo(n.id,{configs:d9(n.configs,t)}).then((()=>{h()}))}})},onDeleteClick:()=>{It.confirm({title:`是否删除图表：${e.name}`,onOk:async()=>{const t=T.filter(o,(t=>t.id!==e.id));m.current=!0,c(t),bo(n.id,{configs:d9(n.configs,t)}).then((()=>{h()}))}})}}):d.createElement("div",{className:"dashboards-panels-item-invalid"},d.createElement("div",null,d.createElement("div",null,"无效的图表配置"),d.createElement("a",{onClick:()=>{const t=T.filter(o,(t=>t.id!==e.id));m.current=!0,c(t),bo(n.id,{configs:d9(n.configs,t)}).then((()=>{h()}))}},"删除"))):d.createElement(f9,{name:e.name,row:e,onToggle:()=>{const t=function(e,t,n){let r=T.cloneDeep(t);return r=e?l9(r,n):c9(r,n),T.find(r,{id:n.id}).collapsed=e,r}(!e.collapsed,o,T.cloneDeep(e));c(t),bo(n.id,{configs:d9(n.configs,t)}).then((()=>{h()}))},onAddClick:()=>{bee({visible:!0,variableConfigWithOptions:a,cluster:t,id:e.id,initialValues:{type:"timeseries",targets:[{refId:"A",expr:""}]},onOK:t=>{const r=p9(o,e.id,t);c(r),bo(n.id,{configs:d9(n.configs,r)}).then((()=>{h()}))}})},onEditClick:e=>{const t=u9(o,e);c(t),bo(n.id,{configs:d9(n.configs,t)}).then((()=>{h()}))},onDeleteClick:t=>{let r=T.cloneDeep(o);"self"===t?(r=l9(r,e),r=T.filter(r,(t=>t.id!==e.id))):(r=c9(r,e),r=T.filter(r,(t=>t.id!==e.id))),m.current=!0,c(r),bo(n.id,{configs:d9(n.configs,r)}).then((()=>{h()}))}}))))))}));const wee={0:"off",5:"5s",10:"10s",20:"20s",30:"30s",60:"1m",120:"2m",180:"3m",300:"5m",600:"10m"},See=T.toNumber(window.localStorage.getItem("refresh-interval-seconds"));var kee=d.forwardRef((function(e,t){const{range:n,step:r}=e,[i,a]=f.exports.useState(See),o=f.exports.useRef();let{start:s,end:l}=au(n),c=r;return r||(c=Math.max(Math.floor((l-s)/240),1)),f.exports.useEffect((()=>{o.current&&clearInterval(o.current),i&&(o.current=setInterval((()=>{e.onRefresh()}),1e3*i))}),[i]),f.exports.useEffect((()=>()=>{o.current&&clearInterval(o.current)}),[]),f.exports.useImperativeHandle(t,(()=>({closeRefresh(){a(0),window.localStorage.setItem("refresh-interval-seconds","0")}}))),d.createElement("div",{className:"refresh-container"},d.createElement(Tt,{title:`刷新间隔小于 step(${c}s) 将不会更新数据`},d.createElement(xt,{className:"refresh-btn",icon:d.createElement(ce,null),onClick:e.onRefresh})),d.createElement(wt,{trigger:["click"],overlay:d.createElement(yt,{onClick:e=>{a(T.toNumber(e.key)),window.localStorage.setItem("refresh-interval-seconds",T.toString(e.key))}},T.map(wee,((e,t)=>d.createElement(yt.Item,{key:t},e))))},d.createElement(xt,null,wee[i]," ",d.createElement(I,null))))}));function _ee(e){const{curCluster:t,clusters:n,setCurCluster:r,dashboard:i,setDashboard:a,refresh:o,range:c,setRange:u,step:h,setStep:p,refreshRef:m,onAddPanel:g}=e,{id:v,name:y}=i,x=C(),[E,b]=f.exports.useState(!1),w=f.exports.useRef(null),S=async e=>{Eo(v,l(s({},i),{name:e})).then((()=>{a(l(s({},i),{name:e})),b(!1)}))},{run:k}=Pe((()=>{if("start"in c&&c.start&&c.end){const e=c.end-c.start,t=A().unix();u({end:t,start:t-e})}else if("unit"in c&&c.unit){const e=T.uniqueId("refreshFlag_");u(l(s({},c),{refreshFlag:e}))}o(!1)}),{wait:1e3});return d.createElement("div",{className:"dashboard-detail-header"},d.createElement("div",{className:"dashboard-detail-header-left"},d.createElement(O,{className:"back",onClick:()=>x.push("/dashboards")}),E?d.createElement(Ct,{ref:w,defaultValue:y,onPressEnter:e=>{S(e.target.value)}}):d.createElement("div",{className:"title"},i.name),E?d.createElement(d.Fragment,null,d.createElement(xt,{size:"small",style:{marginRight:5,marginLeft:5},onClick:()=>b(!1)},"取消"),d.createElement(xt,{size:"small",type:"primary",onClick:()=>{S(w.current.state.value)}},"保存")):d.createElement(_e,{className:"edit",onClick:()=>{b(!E)}})),d.createElement("div",{className:"dashboard-detail-header-right"},d.createElement(Rt,null,d.createElement("div",null,d.createElement(wt,{trigger:["click"],overlay:d.createElement(yt,null,T.map([{type:"row",name:"分组"},...Nc],(e=>d.createElement(yt.Item,{key:e.type,onClick:()=>{g(e.type)}},e.name))))},d.createElement(xt,{type:"primary",icon:d.createElement(ch,null)},"添加图表"))),d.createElement("div",{style:{display:"flex",alignItems:"center"}},"集群：",d.createElement(wt,{overlay:d.createElement(yt,{selectedKeys:[t]},n.map((e=>d.createElement(yt.Item,{key:e,onClick:t=>{r(e),localStorage.setItem("curCluster",e),o(!0)}},e))))},d.createElement(xt,null,t," ",d.createElement(I,null)))),d.createElement(ou,{value:c,onChange:e=>{u(e)}}),d.createElement(lu,{onChange:e=>p(e),initialValue:h}),d.createElement(kee,{range:c,step:h,onRefresh:k,ref:m}))))}function Aee(){const e=localStorage.getItem("curCluster"),{id:t}=X(),n=f.exports.useRef(),{clusters:r}=ri((e=>e.common)),[i,a]=f.exports.useState(e||r[0]),[o,c]=f.exports.useState({create_by:"",favorite:0,id:0,name:"",tags:"",update_at:0,update_by:""}),[u,h]=f.exports.useState(),[p,m]=f.exports.useState(),[g,v]=f.exports.useState(),[y,x]=f.exports.useState([]),[E,b]=f.exports.useState({unit:"hour",num:1,description:""}),[C,w]=f.exports.useState(null),S=()=>{xo(t).then((e=>{if(c(e),e.configs){const t=jc(e.configs),n=t.var?t:l(s({},t),{var:[]});h(T.map(n.var,(e=>T.omit(e,"options")))),v(t.links),x(i9(t.panels))}}))},k=(e,t)=>{bo(e,t).then((()=>{S()}))};return f.exports.useEffect((()=>{S()}),[t]),d.createElement(Ki,{customArea:d.createElement(_ee,{curCluster:i,clusters:r,setCurCluster:a,dashboard:o,setDashboard:c,refresh:e=>{e&&S()},range:E,setRange:b,step:C,setStep:w,refreshRef:n,onAddPanel:e=>{if("row"===e){const e=h9(y,{type:"row",id:Ic(),name:"分组",collapsed:!0},"row");x(e),k(o.id,{configs:d9(o.configs,e)})}else bee({visible:!0,variableConfigWithOptions:p,cluster:i,id:t,initialValues:{type:e,targets:[{refId:"A",expr:""}],custom:Pc[e]},onOK:e=>{const t=h9(y,e,"chart");x(t),k(o.id,{configs:d9(o.configs,t)})}})}})},d.createElement("div",null,d.createElement("div",{className:"dashboard-detail-content"},d.createElement("div",{className:"dashboard-detail-content-header"},d.createElement("div",{className:"variable-area"},d.createElement(J0,{onChange:(e,n,r)=>{const i=jc(o.configs);i.var=e,n&&k(t,{configs:JSON.stringify(i)}),r&&m(r)},value:u,cluster:i,range:E,id:t,onOpenFire:()=>{var e;null==(e=n.current)||e.closeRefresh()}})),d.createElement(n9,{value:g,onChange:e=>{const n=jc(o.configs);n.links=e,k(t,{configs:JSON.stringify(n)}),v(e)}})),p&&d.createElement(Tee,{panels:y,setPanels:x,curCluster:i,dashboard:o,range:E,step:C,variableConfig:p,onShareClick:e=>{const n={dataProps:l(s({},e),{targets:T.map(e.targets,(e=>{const n=p?Y0(e.expr,p,p.length,t):e.expr;return l(s({},e),{expr:n})})),step:C,range:E}),curCluster:localStorage.getItem("curCluster")};ru([{configs:JSON.stringify(n)}]).then((e=>{const t=e.dat;window.open("/chart/"+t)}))},onUpdated:()=>{S()}}))))}const Oee={labelCol:{span:4},wrapperCol:{span:20}},{Option:Iee}=Mt,Mee=d.forwardRef(((e,t)=>{const{t:n}=Lr(),{userId:r}=e,[i]=bt.useForm(),[a,o]=f.exports.useState(),[u,h]=f.exports.useState(!0),[p,m]=f.exports.useState([]),[g,v]=f.exports.useState([]);f.exports.useImperativeHandle(t,(()=>({form:i}))),f.exports.useEffect((()=>{r?x(r):h(!1),y(),ai("/api/n9e/roles",{method:Qr.Get}).then((e=>e&&e.dat)).then((e=>v(e)))}),[]);const y=()=>{qa().then((e=>{m(e)}))},x=e=>{(function(e){return ai(`/api/n9e/user/${e}/profile`,{method:Qr.Get}).then((e=>e&&e.dat))})(e).then((e=>{let t=[];e.contacts&&Object.keys(e.contacts).forEach((n=>{let r={key:n,value:e.contacts[n]};t.push(r)})),o(Object.assign({},e,{contacts:t})),h(!1)}))};return u?null:d.createElement(bt,l(s({},Oee),{form:i,initialValues:a,preserve:!1}),!r&&d.createElement(bt.Item,{label:n("用户名"),name:"username",rules:[{required:!0,message:n("用户名不能为空！")}]},d.createElement(Ct,null)),d.createElement(bt.Item,{label:n("显示名"),name:"nickname"},d.createElement(Ct,null)),!r&&d.createElement(d.Fragment,null,d.createElement(bt.Item,{name:"password",label:n("密码"),rules:[{required:!0,message:n("请输入密码!")}],hasFeedback:!0},d.createElement(Ct.Password,null)),d.createElement(bt.Item,{name:"confirm",label:n("确认密码"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:n("请确认密码!")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("password")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(Ct.Password,null))),d.createElement(bt.Item,{label:n("角色"),name:"roles",rules:[{required:!0,message:n("角色不能为空！")}]},d.createElement(Mt,{mode:"multiple"},g.map(((e,t)=>d.createElement(Iee,{value:e.name,key:t},d.createElement("div",null,d.createElement("div",null,e.name),d.createElement("div",{style:{color:"#8c8c8c"}},e.note))))))),d.createElement(bt.Item,{label:n("邮箱"),name:"email"},d.createElement(Ct,null)),d.createElement(bt.Item,{label:n("手机"),name:"phone"},d.createElement(Ct,null)),d.createElement(bt.Item,{label:n("更多联系方式")},d.createElement(bt.List,{name:"contacts"},((e,{add:t,remove:r})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:i,name:a,fieldKey:o}=t,u=c(t,["key","name","fieldKey"]);return d.createElement(Rt,{key:i,style:{display:"flex"},align:"baseline"},d.createElement(bt.Item,l(s({style:{width:"180px"}},u),{name:[a,"key"],fieldKey:[o,"key"],rules:[{required:!0,message:n("联系方式不能为空")}]}),d.createElement(Mt,{suffixIcon:d.createElement(H,null),placeholder:n("请选择联系方式")},p.map(((e,t)=>d.createElement(Iee,{value:e.key,key:t},e.label))))),d.createElement(bt.Item,l(s({},u),{style:{width:"170px"},name:[a,"value"],fieldKey:[o,"value"],rules:[{required:!0,message:n("值不能为空")}]}),d.createElement(Ct,{placeholder:n("请输入值")})),d.createElement(Y,{className:"control-icon-normal",onClick:()=>r(a)}))})),d.createElement(U,{className:"control-icon-normal",onClick:()=>t()}))))))})),Nee=d.forwardRef(((e,t)=>{const{t:n}=Lr(),{teamId:r}=e,[i]=bt.useForm(),[a,o]=f.exports.useState(),[c,u]=f.exports.useState(!0);f.exports.useImperativeHandle(t,(()=>({form:i}))),f.exports.useEffect((()=>{r?h(r):u(!1)}),[]);const h=e=>{Wa(e).then((e=>{o(e.user_group),u(!1)}))};return c?null:d.createElement(bt,l(s({},Oee),{form:i,initialValues:a,preserve:!1}),d.createElement(bt.Item,{label:n("团队名称"),name:"name",rules:[{required:!0,message:n("团队名称不能为空！")}]},d.createElement(Ct,null)),d.createElement(bt.Item,{label:n("备注"),name:"note"},d.createElement(Ct,null)))}));var Fee,Lee,Pee,Ree,Dee,Bee;(Lee=Fee||(Fee={})).User="用户",Lee.Team="团队",(Ree=Pee||(Pee={})).CreateUser="创建用户",Ree.CreateTeam="创建团队",Ree.CreateBusiness="创建业务组",Ree.AddBusinessMember="添加业务组成员",Ree.EditBusiness="编辑业务组",Ree.EditUser="编辑用户信息",Ree.EditTeam="编辑团队信息",Ree.Reset="重置密码",Ree.Disable="禁用",Ree.Undisable="启用",Ree.AddUser="添加成员",(Bee=Dee||(Dee={})).Admin="管理员",Bee.Standard="普通用户",Bee.Guest="游客";const{Option:zee}=Mt,Hee=d.forwardRef(((e,t)=>{const{t:n}=Lr(),{businessId:r,action:i}=e,[a]=bt.useForm(),[o,u]=f.exports.useState([]),[h,p]=f.exports.useState({label_enable:!1,label_value:"",members:[{perm_flag:!0}],name:""}),[m,g]=f.exports.useState(!0),[v,y]=f.exports.useState(!0);f.exports.useImperativeHandle(t,(()=>({form:a}))),f.exports.useEffect((()=>{r&&i===Pee.EditBusiness?x(r):g(!1)}),[]);const x=e=>{Va(e).then((e=>{p({name:e.name,label_enable:1===e.label_enable,label_value:e.label_value,members:e.user_groups.map((e=>({perm_flag:"rw"===e.perm_flag,user_group_id:e.user_group.id})))}),g(!1)}))};f.exports.useEffect((()=>{E("")}),[]);const E=e=>{Ya({query:e}).then((e=>{u(e.dat)}))},b=f.exports.useCallback($.exports.debounce(E,800),[]);return m?null:d.createElement(bt,l(s({},Oee),{form:a,initialValues:h,preserve:!1,layout:"horizontal"}),i!==Pee.AddBusinessMember&&d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:n("业务组名称"),name:"name",rules:[{required:!0,message:n("业务组名称不能为空！")}]},d.createElement(Ct,null)),d.createElement(bt.Item,{label:n("作为标签使用"),name:"label_enable",valuePropName:"checked",tooltip:{title:"系统会自动把业务组的英文标识作为标签附到该业务组下辖监控对象的时序数据上",getPopupContainer:()=>document.body}},d.createElement(Lt,null)),d.createElement(bt.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.label_enable!==t.label_enable},(({getFieldValue:e})=>e("label_enable")&&d.createElement(bt.Item,{label:n("英文标识"),name:"label_value",rules:[{required:!0}],tooltip:{title:d.createElement("span",null,"尽量用英文，不能与其他业务组标识重复，系统会自动生成 ",d.createElement(Ot,{color:"purple"},"busigroup=",a.getFieldValue("label_value"))," 的标签"),getPopupContainer:()=>document.body}},d.createElement(Ct,{onChange:e=>{y(!v)}}))))),(i===Pee.CreateBusiness||i===Pee.AddBusinessMember)&&d.createElement(bt.Item,{label:n("团队"),required:!0},d.createElement(bt.List,{name:"members"},((e,{add:t,remove:r})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:i,name:a,fieldKey:u}=t,h=c(t,["key","name","fieldKey"]);return d.createElement(Rt,{key:i,style:{display:"flex",marginBottom:8},align:"baseline"},d.createElement(bt.Item,l(s({style:{width:450}},h),{name:[a,"user_group_id"],fieldKey:[u,"user_group_id"],rules:[{required:!0,message:n("业务组团队不能为空！")}]}),d.createElement(Mt,{suffixIcon:d.createElement(H,null),style:{width:"100%"},filterOption:!1,onSearch:e=>b(e),showSearch:!0,onBlur:()=>E("")},o.map((e=>d.createElement(zee,{key:e.id,value:e.id},e.name))))),d.createElement(bt.Item,l(s({},h),{name:[a,"perm_flag"],fieldKey:[u,"perm_flag"],valuePropName:"checked"}),d.createElement(Lt,{checkedChildren:"读写",unCheckedChildren:"只读"})),d.createElement(Y,{onClick:()=>r(a)}))})),d.createElement(bt.Item,null,d.createElement(xt,{type:"dashed",onClick:()=>t(),block:!0,icon:d.createElement(ke,null)},"添加团队")))))))})),jee=d.forwardRef(((e,t)=>{const{t:n}=Lr(),[r]=bt.useForm();return f.exports.useImperativeHandle(t,(()=>({form:r}))),d.createElement(bt,l(s({},Oee),{form:r}),d.createElement(bt.Item,{name:"password",label:n("密码"),rules:[{required:!0,message:n("请输入密码!")}],hasFeedback:!0},d.createElement(Ct.Password,null)),d.createElement(bt.Item,{name:"confirm",label:n("确认密码"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:n("请确认密码!")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("password")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(Ct.Password,null)))}));var Gee=d.forwardRef((function(e,t){var n=e,{fetchHandle:r,fetchParams:i={},needPagination:a=!0,pageSize:o,feQueryKey:u="query",feFixedKey:h="id",feQueryParams:p=[],fePaging:m=!1,autoFetch:g=!0,initFetch:v=!1,onFetchList:y,paginationProps:x}=n,E=c(n,["fetchHandle","fetchParams","needPagination","pageSize","feQueryKey","feFixedKey","feQueryParams","fePaging","autoFetch","initFetch","onFetchList","paginationProps"]);Lr();const[b,C]=f.exports.useState([]),[T,w]=f.exports.useState([]),[S,k]=f.exports.useState([]),[_,A]=f.exports.useState(!1),[O,I]=f.exports.useState(1),[M,N]=f.exports.useState(!1),[F,L]=f.exports.useState(0),[P,R]=f.exports.useState((()=>o||15)),[D,B]=f.exports.useState({});f.exports.useEffect((()=>{g&&(z(),A(!0))}),[]),f.exports.useEffect((()=>{!g&&v&&(z(),A(!0))}),[v]),f.exports.useEffect((()=>{if(_)if(m){const e=T.slice((O-1)*P,O*P);k(e),y&&y(e)}else z()}),[O,P]),f.exports.useEffect((()=>{m?(D[h]&&D[h]===i[h]?(H(b),I(1)):1===O?_&&z():I(1),B(i)):1===O?_&&z():I(1)}),[JSON.stringify(i)]);const z=async()=>{N(!0);const{success:e,dat:t}=await r(l(s({},i),{p:O,limit:P}));var n;e&&(!m&&(n=t,Array.isArray(n.list))?(C(t.list||[]),L(t.total),y&&y(t.list||[])):(C(t||[]),H(t||[]))),N(!1)},H=e=>{if(Array.isArray(e)){const t=i[u]||"",n=e.filter((e=>{let n=!1;return""!==t&&Array.isArray(p)&&0!==p.length?(p.forEach((r=>{const i=j(r,e);"string"==typeof i&&(n=n||-1!==i.indexOf(t))})),n):(n=!0,n)}));w(n),L(n.length);const r=n.slice((O-1)*P,O*P);k(r),y&&y(r)}else w([]),L(0),k([]),y&&y([])},j=(e,t)=>{const n=()=>{const n=e.indexOf("."),r=e.slice(0,n);return t[r]?j(e.slice(n+1,e.length),t[r]):""},r=()=>{let n=e.indexOf("[");if(n<=0)return"";let r=e.indexOf("]");const i=e.slice(0,n),a=t[i];if(Array.isArray(a)&&a.length){if(-1!==r){const n=e.match(/\[(\w+)\]/);if(n.length<2)return"";{const i=n[1];return a[i]?r===e.length-1?a[i]:j(e.slice(r+1,e.length),t[i]):""}}return""}return""};return-1!==e.indexOf(".")&&-1!==e.indexOf("[")?e.indexOf(".")<e.indexOf("[")?n():r():-1!==e.indexOf(".")?n():-1!==e.indexOf("[")?r():t[e]||""},G=()=>{z()};return f.exports.useImperativeHandle(t,(()=>({refreshList:G}))),d.createElement(Ft,s({dataSource:m?S:b,pagination:s({showTotal:e=>`Total ${e} items`,current:O,pageSize:P,onChange:I,total:F,showSizeChanger:!0,onShowSizeChange:(e,t)=>{R(t),I(1)}},x),loading:M},E))}));const $ee=e=>{const{t:t}=Lr(),{teamId:n,onSelect:r}=e,[i,a]=f.exports.useState(),[o,s]=f.exports.useState([]),[l,c]=f.exports.useState([]),[u,h]=f.exports.useState(""),p=[{title:t("用户名"),dataIndex:"username",ellipsis:!0},{title:t("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:t("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:t("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}];f.exports.useEffect((()=>{m()}),[]);const m=()=>{n&&Wa(n).then((e=>{a(e.user_group)}))};return d.createElement("div",null,d.createElement("div",null,d.createElement("span",null,t("团队名称"),"："),i&&i.name),d.createElement("div",{style:{margin:"20px 0 16px"}},o.length>0&&d.createElement("span",null,t("已选择"),o.length,t("项"),"："),l.map(((e,t)=>d.createElement(Ot,{style:{marginBottom:"4px"},closable:!0,onClose:()=>(e=>{let t=l.filter((t=>t.id!==e.id)),n=t.map((e=>e.id));c(t),s(n)})(e),key:e.id},e.username)))),d.createElement(Ct,{className:"searchInput",prefix:d.createElement(M,null),placeholder:t("用户名、邮箱或电话"),onPressEnter:e=>{h(e.target.value)}}),d.createElement(Gee,{fetchHandle:$a,columns:p,rowKey:"id",needPagination:!0,pageSize:5,fetchParams:{query:u},rowSelection:{preserveSelectedRowKeys:!0,selectedRowKeys:o,onChange:(e,t)=>{r(e),s(e),c(t)}}}))},Yee=e=>{const{t:t}=Lr(),{visible:n,userType:r,onClose:i,action:a,userId:o,teamId:c,onSearch:u,width:h}=e,[p,m]=f.exports.useState(),g=f.exports.useRef(null),v=f.exports.useRef(null),y=f.exports.useRef(null),x="business"===r&&(a===Pee.CreateBusiness||a===Pee.AddBusinessMember||a===Pee.EditBusiness),E=(a===Pee.CreateUser||a===Pee.EditUser)&&r===Fee.User,b=(a===Pee.CreateTeam||a===Pee.EditTeam)&&r===Fee.Team,C=a===Pee.Reset,T=a===Pee.AddUser,w=async e=>{if(E){let e=g.current.form;const r=await e.validateFields();let c={};r.contacts&&r.contacts.forEach((e=>{c[e.key]=e.value}));let u=l(s({},r),{contacts:c,confirm:void 0});a===Pee.CreateUser&&(n=u,ai("/api/n9e/users",{method:Qr.Post,data:n}).then((e=>e&&e.dat))).then((e=>{vt.success(t("用户创建成功")),i(!0)})),a===Pee.EditUser&&o&&function(e,t){return ai(`/api/n9e/user/${e}/profile`,{method:Qr.Put,data:t}).then((e=>e&&e.dat))}(o,u).then((e=>{vt.success(t("用户信息修改成功")),i(!0)}))}var n;if(b){let n=v.current.form;const r=await n.validateFields();let o=s({},r);a===Pee.CreateTeam&&function(e){return ai("/api/n9e/user-groups",{method:Qr.Post,data:e}).then((e=>e&&e.dat))}(o).then((n=>{vt.success(t("团队创建成功")),i(!0),"search"===e&&u(o.name)})),a===Pee.EditTeam&&c&&function(e,t){return ai(`/api/n9e/user-group/${e}`,{method:Qr.Put,data:t}).then((e=>e&&e.dat))}(c,o).then((e=>{vt.success(t("团队信息修改成功")),i("updateName")}))}if(C&&o){let e=y.current.form;const n=await e.validateFields();let r=s({},n);(function(e,t){return ai(`/api/n9e/user/${e}/password`,{method:Qr.Put,data:t}).then((e=>e&&e.dat))})(o,r).then((e=>{vt.success(t("密码重置成功")),i()}))}if(T&&c){(function(e,t){return ai(`/api/n9e/user-group/${e}/members`,{method:Qr.Post,data:t}).then((e=>e&&e.dat))})(c,{ids:p}).then((e=>{vt.success(t("添加成功")),i("updateMember")}))}if(x){let e=v.current.form;const{name:n,members:r,label_enable:o,label_value:s}=await e.validateFields();let l={name:n,label_enable:o?1:0,label_value:s,members:r?r.map((({perm_flag:e,user_group_id:t})=>({user_group_id:t,perm_flag:e?"rw":"ro"}))):void 0};if(a===Pee.CreateBusiness&&function(e){return ai("/api/n9e/busi-groups",{method:Qr.Post,data:e}).then((e=>e&&e.dat))}(l).then((e=>{vt.success(t("业务组创建成功")),i("create"),u(e)})),a===Pee.EditBusiness&&c&&function(e,t){return ai(`/api/n9e/busi-group/${e}`,{method:Qr.Put,data:t}).then((e=>e&&e.dat))}(c,l).then((e=>{vt.success(t("业务组信息修改成功")),i("update")})),a===Pee.AddBusinessMember&&c){const e=r.map((({perm_flag:e,user_group_id:t})=>({user_group_id:t,perm_flag:e?"rw":"ro",busi_group_id:c})));(function(e,t){return ai(`/api/n9e/busi-group/${e}/members`,{method:Qr.Post,data:t}).then((e=>e&&e.dat))})(c,e).then((e=>{vt.success(t("业务组成员添加成功")),i("addMember")}))}}};return d.createElement(It,{title:a===Pee.CreateUser?t("创建用户"):a===Pee.CreateTeam?t("创建团队"):a===Pee.CreateBusiness?t("创建业务组"):a===Pee.AddBusinessMember?t("添加业务组成员"):a===Pee.EditBusiness?t("编辑业务组"):a===Pee.EditUser?t("编辑用户信息"):a===Pee.EditTeam?t("编辑团队信息"):a===Pee.Reset?t("重置密码"):a===Pee.Disable?t("禁用"):a===Pee.Undisable?t("启用"):a===Pee.AddUser?t("添加成员"):void 0,visible:n,width:h||700,onCancel:i,destroyOnClose:!0,footer:[d.createElement(xt,{key:"back",onClick:i},t("取消")),d.createElement(xt,{key:"submit",type:"primary",onClick:()=>w()},t("确定")),a===Pee.CreateTeam&&d.createElement(xt,{type:"primary",onClick:()=>w("search")},t("确定并搜索"))]},E&&d.createElement(Mee,{ref:g,userId:o}),b&&d.createElement(Nee,{ref:v,teamId:c}),x&&d.createElement(Hee,{ref:v,businessId:c,action:a}),C&&d.createElement(jee,{ref:y,userId:o}),T&&d.createElement($ee,{teamId:c,onSelect:e=>m(e)}))};const{confirm:Uee}=It,Vee=()=>{const{t:e}=Lr();X();const[t,n]=f.exports.useState(Fee.Team),[r,i]=f.exports.useState(!1),[a,o]=f.exports.useState(),[s,l]=f.exports.useState(""),[c,u]=f.exports.useState(""),[h,p]=f.exports.useState(""),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState([]),[x,E]=f.exports.useState(),[b,C]=f.exports.useState([]),[T,w]=f.exports.useState(!1),[S,_]=f.exports.useState(""),[A,O]=f.exports.useState("");f.exports.useRef(null),ri((e=>e.account));const I=[...[{title:e("用户名"),dataIndex:"username",ellipsis:!0},{title:e("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:e("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:e("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}],{title:e("操作"),width:"100px",render:(t,n)=>d.createElement("a",{style:{color:"red"},onClick:()=>{let t={ids:[n.id]};Uee({title:e("是否删除该成员"),onOk:()=>{var n,r;(n=c,r=t,ai(`/api/n9e/user-group/${n}/members`,{method:Qr.Delete,data:r}).then((e=>e&&e.dat))).then((t=>{vt.success(e("成员删除成功")),B("updateMember")}))},onCancel:()=>{}})}},e("删除"))}];f.exports.useEffect((()=>{N(!0)}),[]),f.exports.useEffect((()=>{c&&L(c)}),[c]);const N=(e=!1)=>{F("",e)},F=(e,t)=>{Ya({query:e||""}).then((e=>{C(e.dat||[]),(!c||t)&&e.dat.length>0&&u(e.dat[0].id)}))},L=e=>{w(!0),Wa(e).then((e=>{E(e.user_group),g(e.users),y(e.users),w(!1)}))},P=(e,t)=>{if("team"===e)F(t);else if(t){w(!0);let e=v.filter((e=>-1!==e.username.indexOf(t)||-1!==e.nickname.indexOf(t)||-1!==e.id.toString().indexOf(t)||-1!==e.phone.indexOf(t)||-1!==e.email.indexOf(t)));g(e),w(!1)}else L(c)},D=(e,t,n)=>{u(t||""),p(n||""),o(e),i(!0)},B=(e=!1)=>{i(!1),S?P("team",S):"updateMember"!==e&&N("updateName"!==e),!c||"update"!==e&&"updateMember"!==e&&"updateName"!==e||L(c)};return d.createElement(Ki,{title:e("团队管理"),icon:d.createElement(k,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{style:{display:"flex",height:"100%"}},d.createElement("div",{className:"left-tree-area"},d.createElement("div",{className:"sub-title"},e("团队列表"),d.createElement(xt,{style:{height:"30px"},size:"small",type:"link",onClick:()=>{D(Pee.CreateTeam)}},e("新建团队"))),d.createElement("div",{style:{display:"flex",margin:"5px 0px 12px"}},d.createElement(Ct,{prefix:d.createElement(M,null),value:S,onChange:e=>{_(e.target.value)},placeholder:e("搜索团队名称"),onPressEnter:e=>{F(e.target.value)},onBlur:e=>{F(e.target.value)}})),d.createElement(Ut,{style:{marginBottom:"12px",flex:1,overflow:"auto"},dataSource:b,size:"small",renderItem:e=>d.createElement(Ut.Item,{key:e.id,className:c===e.id?"is-active":"",onClick:()=>u(e.id)},e.name)})),b.length>0?d.createElement("div",{className:"resource-table-content"},d.createElement(kt,{className:"team-info"},d.createElement(_t,{span:"24",style:{color:"#000",fontSize:"14px",fontWeight:"bold",display:"inline"}},x&&x.name,d.createElement(_e,{title:e("刷新"),style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>D(Pee.EditTeam,c)}),d.createElement(Ee,{style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>{Uee({title:e("是否删除该团队"),onOk:()=>{var t;(t=c,ai(`/api/n9e/user-group/${t}`,{method:Qr.Delete}).then((e=>e&&e.dat))).then((t=>{vt.success(e("团队删除成功")),B(!0)}))},onCancel:()=>{}})}})),d.createElement(_t,{style:{marginTop:"8px",color:"#666"}},e("备注"),"：",x&&x.note?x.note:"-")),d.createElement(kt,{justify:"space-between",align:"middle"},d.createElement(_t,{span:"12"},d.createElement(Ct,{prefix:d.createElement(M,null),value:A,className:"searchInput",onChange:e=>O(e.target.value),placeholder:e("用户名、显示名、邮箱或手机"),onPressEnter:e=>P("member",A)})),d.createElement(xt,{type:"primary",ghost:!0,onClick:()=>{D(Pee.AddUser,c)}},e("添加成员"))),d.createElement(Ft,{rowKey:"id",columns:I,dataSource:m,loading:T})):d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(R,{style:{color:"#1473ff"}})," ",e("提示信息")),d.createElement("p",null,"没有与您相关的团队，请先 ",d.createElement("a",{onClick:()=>D(Pee.CreateTeam)},"创建团队")))),d.createElement(Yee,{visible:r,action:a,width:500,userType:t,onClose:B,onSearch:e=>{_(e),P("team",e)},userId:s,teamId:c,memberId:h})))},{confirm:Wee}=It,Xee=()=>{const{t:e}=Lr(),[t,n]=f.exports.useState(Fee.User),[r,i]=f.exports.useState(!1),[a,o]=f.exports.useState(),[s,l]=f.exports.useState(""),[c,u]=f.exports.useState(""),[h,p]=f.exports.useState("");f.exports.useState([]),f.exports.useState([]);const[m,g]=f.exports.useState("");f.exports.useState("");const v=f.exports.useRef(null);let{profile:y}=ri((e=>e.account));const x=[...[{title:e("用户名"),dataIndex:"username",ellipsis:!0},{title:e("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:e("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:e("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}],{title:e("角色"),dataIndex:"roles",render:(e,t)=>e.join(", ")},{title:e("操作"),width:"240px",render:(t,n)=>d.createElement(d.Fragment,null,d.createElement(xt,{className:"oper-name",type:"link",onClick:()=>E(Pee.EditUser,n.id)},e("编辑")),d.createElement(xt,{className:"oper-name",type:"link",onClick:()=>E(Pee.Reset,n.id)},e("重置密码")),d.createElement("a",{style:{color:"red",marginLeft:"16px"},onClick:()=>{Wee({title:e("是否删除该用户"),onOk:()=>{var t;(t=n.id,ai(`/api/n9e/user/${t}`,{method:Qr.Delete}).then((e=>e&&e.dat))).then((t=>{vt.success(e("用户删除成功")),b()}))},onCancel:()=>{}})}},e("删除")))}];y.roles.includes("Admin")||x.pop();const E=(e,n,r)=>{n?t===Fee.User?l(n):u(n):t===Fee.User?l(""):u(""),p(r||""),o(e),i(!0)},b=()=>{i(!1),v.current.refreshList()};return d.createElement(Ki,{title:e("用户管理"),icon:d.createElement(k,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{className:"user-content"},d.createElement(kt,{className:"event-table-search"},d.createElement("div",{className:"event-table-search-left"},d.createElement(Ct,{className:"searchInput",prefix:d.createElement(M,null),onPressEnter:e=>{let t=e.target.value;g(t)},placeholder:e("用户名、邮箱或手机")})),d.createElement("div",{className:"event-table-search-right"},t===Fee.User&&y.roles.includes("Admin")&&d.createElement("div",{className:"user-manage-operate"},d.createElement(xt,{type:"primary",onClick:()=>E(t===Fee.User?Pee.CreateUser:e("创建团队")),ghost:!0},e("创建用户"))))),d.createElement(Gee,{ref:v,fetchHandle:$a,columns:x,rowKey:"id",needPagination:!0,fetchParams:{query:m}})),d.createElement(Yee,{visible:r,action:a,width:t===Fee.User?500:700,userType:t,onClose:b,userId:s,teamId:c,memberId:h})))};const{confirm:qee}=It,Kee=()=>{const{t:e}=Lr(),t=hi().get("id"),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState(),[o,s]=f.exports.useState(t||""),[l,c]=f.exports.useState(""),[u,h]=f.exports.useState([]);f.exports.useState(0),f.exports.useState([]);const[p,m]=f.exports.useState(),[g,v]=f.exports.useState([]);f.exports.useState("");const[y,x]=f.exports.useState(!1),[E,b]=f.exports.useState(""),[C,T]=f.exports.useState("");f.exports.useRef(null),ri((e=>e.account));const w=Wr(),S=[{title:e("团队名称"),dataIndex:["user_group","name"],ellipsis:!0},{title:e("团队备注"),dataIndex:["user_group","note"],ellipsis:!0,render:(e,t)=>t.user_group.note||"-"},{title:e("权限"),dataIndex:"perm_flag"},{title:e("操作"),width:"100px",render:(t,n)=>d.createElement("a",{style:{color:u.length>1?"red":"#00000040"},onClick:()=>{if(u.length<=1)return;let t=[{user_group_id:n.user_group.id,busi_group_id:o}];qee({title:e("是否删除该团队"),onOk:()=>{(function(e,t){return ai(`/api/n9e/busi-group/${e}/members`,{method:Qr.Delete,data:t}).then((e=>e&&e.dat))})(o,t).then((t=>{vt.success(e("团队删除成功")),I("deleteMember")}))},onCancel:()=>{}})}},e("删除"))}];f.exports.useEffect((()=>{o&&A(o)}),[o]),f.exports.useEffect((()=>{_()}),[]);const _=(e,t)=>{Ua({query:void 0===e?E:e,limit:200}).then((e=>{v(e.dat||[]),(!o||t)&&e.dat.length>0&&s(e.dat[0].id)}))},A=e=>{x(!0),Va(e).then((e=>{w({type:"common/saveData",prop:"curBusiItem",data:e}),m(e),h(e.user_groups),x(!1)}))},O=(e,t,n)=>{c(n||""),a(e),r(!0)},I=e=>{r(!1),["create","delete","update"].includes(e)&&((e=>{_(void 0,"delete"===e)})(e),w({type:"common/getBusiGroups"})),o&&["update","addMember","deleteMember"].includes(e)&&A(o)};return d.createElement(Ki,{title:e("业务组管理"),icon:d.createElement(k,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{style:{display:"flex",height:"100%"}},d.createElement("div",{className:"left-tree-area"},d.createElement("div",{className:"sub-title"},e("业务组列表"),d.createElement(xt,{style:{height:"30px"},size:"small",type:"link",onClick:()=>{O(Pee.CreateBusiness)}},e("新建业务组"))),d.createElement("div",{style:{display:"flex",margin:"5px 0px 12px"}},d.createElement(Ct,{prefix:d.createElement(M,null),placeholder:e("搜索业务组名称"),onPressEnter:e=>{_(e.target.value)},onBlur:e=>{_(e.target.value)}})),d.createElement(Ut,{style:{marginBottom:"12px",flex:1,overflow:"auto"},dataSource:g,size:"small",renderItem:e=>d.createElement(Ut.Item,{key:e.id,className:o==e.id?"is-active":"",onClick:()=>s(e.id)},e.name)})),g.length>0?d.createElement("div",{className:"resource-table-content"},d.createElement(kt,{className:"team-info"},d.createElement(_t,{span:"24",style:{color:"#000",fontSize:"14px",fontWeight:"bold",display:"inline"}},p&&p.name,d.createElement(_e,{title:e("刷新"),style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>O(Pee.EditBusiness)}),d.createElement(Ee,{style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>{qee({title:e("是否删除该业务组"),onOk:()=>{(function(e){return ai(`/api/n9e/busi-group/${e}`,{method:Qr.Delete}).then((e=>e&&e.dat))})(o).then((t=>{vt.success(e("业务组删除成功")),I("delete")}))},onCancel:()=>{}})}})),d.createElement(_t,{style:{marginTop:"8px",color:"#666"}},e("备注"),"：",e("告警规则，告警事件，监控对象，自愈脚本等都归属业务组，是一个在系统里可以自闭环的组织"))),d.createElement(kt,{justify:"space-between",align:"middle"},d.createElement(_t,{span:"12"},d.createElement(Ct,{prefix:d.createElement(M,null),value:C,className:"searchInput",onChange:e=>T(e.target.value),placeholder:e("搜索团队名称")})),d.createElement(xt,{type:"primary",ghost:!0,onClick:()=>{O(Pee.AddBusinessMember)}},e("添加团队"))),d.createElement(Ft,{rowKey:"id",columns:S,dataSource:u&&u.length>0?u.filter((e=>e.user_group&&-1!==e.user_group.name.indexOf(C))):[],loading:y})):d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(R,{style:{color:"#1473ff"}})," ",e("提示信息")),d.createElement("p",null,"业务组（监控对象、监控大盘、告警规则、自愈脚本都要归属某个业务组）为空，请先 ",d.createElement("a",{onClick:()=>O(Pee.CreateBusiness)},"创建业务组"))))),d.createElement(Yee,{visible:n,action:i,userType:"business",onClose:I,teamId:o,onSearch:e=>{s(e)}}))};const Qee=rn.theme({"&":{"&.cm-focused":{outline:"none",outline_fallback:"none"},"&.cm-editor.cm-focused":{outline:"none"}},".cm-scroller":{overflow:"hidden",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono;"},".cm-placeholder":{},".cm-matchingBracket":{color:"#000",backgroundColor:"#dedede",fontWeight:"bold",outline:"1px dashed transparent"},".cm-nonmatchingBracket":{borderColor:"red"},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{maxHeight:"350px",fontFamily:'"DejaVu Sans Mono", monospace',maxWidth:"unset"},"& > ul > li":{padding:"2px 1em 2px 3px"},minWidth:"30%"},".cm-completionDetail":{float:"right",color:"#999"},".cm-tooltip.cm-completionInfo":{marginTop:"-11px",padding:"10px",fontFamily:"'Open Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;",border:"none",minWidth:"250px",maxWidth:"min-content"},".cm-completionInfo.cm-completionInfo-right":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",left:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginLeft:"12px"},".cm-completionInfo.cm-completionInfo-left":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",right:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginRight:"12px"},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold",color:"#0066bf"},".cm-selectionMatch":{backgroundColor:"#e6f3ff"},".cm-diagnostic":{"&.cm-diagnostic-error":{borderLeft:"3px solid #e65013"}},".cm-completionIcon":{boxSizing:"content-box",fontSize:"16px",lineHeight:"1",marginRight:"10px",verticalAlign:"top","&:after":{content:"'\\ea88'"},fontFamily:"codicon",paddingRight:"0",opacity:"1",color:"#007acc"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\ea8c'"},color:"#652d90"},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\eb5f'"},color:"#007acc"},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\eb62'"},color:"#616161"},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'\\ea95'"},color:"#ee9d28"}});rn.theme({".cm-tooltip":{backgroundColor:"#f8f8f8",borderColor:"rgba(52, 79, 113, 0.2)"},".cm-tooltip.cm-tooltip-autocomplete":{"& li:hover":{backgroundColor:"#ddd"},"& > ul > li[aria-selected]":{backgroundColor:"#d6ebff",color:"unset"}},".cm-tooltip.cm-completionInfo":{backgroundColor:"#d6ebff"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#d6ebff"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#d6ebff"}},".cm-line":{"&::selection":{backgroundColor:"#add6ff"},"& > span::selection":{backgroundColor:"#add6ff"}}},{dark:!1}),rn.theme({".cm-content":{caretColor:"#fff"},".cm-tooltip.cm-completionInfo":{backgroundColor:"#333338"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#333338"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#333338"}},".cm-line":{"&::selection":{backgroundColor:"#767676"},"& > span::selection":{backgroundColor:"#767676"}}},{dark:!0});const Zee=an.define([{tag:on.name,color:"#000"},{tag:on.number,color:"#09885a"},{tag:on.string,color:"#a31515"},{tag:on.keyword,color:"#008080"},{tag:on.function(on.variableName),color:"#008080"},{tag:on.labelName,color:"#800000"},{tag:on.operator},{tag:on.modifier,color:"#008080"},{tag:on.paren},{tag:on.squareBracket},{tag:on.brace},{tag:on.invalid,color:"red"},{tag:on.comment,color:"#888",fontStyle:"italic"}]),Jee=({show:e,updateShow:t,metrics:n,insertAtCursor:r})=>{const[i,a]=f.exports.useState(n);return f.exports.useEffect((()=>{a(n)}),[n]),d.createElement(It,{className:"metrics-explorer-modal",width:540,visible:e,title:"Metrics Explorer",footer:null,onCancel:()=>t(!1)},d.createElement(Ct,{className:"left-area-group-search",prefix:d.createElement(M,null),onPressEnter:e=>{e.preventDefault();const t=e.currentTarget.value;a(n.filter((e=>e.includes(t))))}}),d.createElement("div",{className:"metric-list",onClick:e=>function(e){r(e),t(!1)}(e.target.innerText)},i.map((e=>d.createElement("div",{className:"metric-list-item",key:e},e)))))},ete=new sn,tte=({value:e,onExpressionChange:t,queryHistory:n,metricNames:r,isLoading:i,executeQuery:a})=>{function o(e,t={}){return fetch(e,s({method:"Get",headers:new Headers({"X-Cluster":localStorage.getItem("curCluster")||"",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`})},t))}const l=f.exports.useRef(null),c=f.exports.useRef(null),u=f.exports.useRef(a),[h,p]=f.exports.useState(!1);f.exports.useEffect((()=>{u.current=a,ete.activateCompletion(!0).activateLinter(!0).setComplete({remote:{url:"/api/n9e/prometheus",fetchFn:o,cache:{initialMetricList:r}}});if(null===c.current){if(!l.current)throw new Error("expected CodeMirror container element to exist");const n=ln.create({doc:e,extensions:[Qee,cn(),un(),ln.allowMultipleSelections.of(!0),hn(),pn(),dn(),fn(),mn(),Zee,rn.lineWrapping,gn.of([...vn,...yn,...xn,...En,...bn,...Cn]),Tn("Expression (press Shift+Enter for newlines)"),ete.asExtension(),gn.of([{key:"Escape",run:e=>(e.contentDOM.blur(),!1)}]),wn.override(gn.of([{key:"Enter",run:e=>(u.current(),!0)},{key:"Shift-Enter",run:Sn}])),rn.updateListener.of((e=>{t(e.state.doc.toString())}))]}),r=new rn({state:n,parent:l.current});c.current=r,r.focus()}}),[a,t,n,localStorage.getItem("curCluster")]);return d.createElement(d.Fragment,null,d.createElement("div",{className:"prometheus-input-box"},d.createElement("div",{className:"input-prefix"},d.createElement("span",null,"PromQL: ")),d.createElement("div",{className:"input"},d.createElement("div",{className:"input-content",ref:l})),d.createElement("div",{className:"suffix"},d.createElement(xt,{size:"large",className:"metrics",icon:d.createElement(Re,null),onClick:()=>p(!0)}),d.createElement(xt,{size:"large",type:"primary",className:"execute",onClick:a},"Execute"))),d.createElement(Jee,{show:h,updateShow:p,metrics:r,insertAtCursor:e=>{const t=c.current;if(null===t)return;const{from:n,to:r}=t.state.selection.ranges[0];t.dispatch(t.state.update({changes:{from:n,to:r,insert:e}}))}}))},nte=e=>{const{loadTime:t,resolution:n,resultSeries:r}=e;return d.createElement("div",{className:"query-stats"},d.createElement("span",null,"Load time: ",t,"ms  ",n&&`Resolution: ${n}s `," Result series: ",r))};var rte,ite;(ite=rte||(rte={})).Graph="graph",ite.Table="table";const{TabPane:ate}=zt;const ote=({metrics:e,defaultPromQL:t,removePanel:n})=>{const{t:r}=Lr(),{clusters:i}=ri((e=>e.common)),a=f.exports.useRef(rte.Table),o=f.exports.useRef(null),l=f.exports.useRef(t),c=f.exports.useRef(null),u=f.exports.useRef(null),[h,p]=f.exports.useState(null),[m,g]=f.exports.useState(du.Line),[v,y]=f.exports.useState({type:rte.Table,range:{num:1,unit:"hour",description:r("小时")},endTime:null,resolution:null,stacked:!1,showExemplars:!1}),[x,b]=f.exports.useState(""),[C,w]=f.exports.useState(!1),[S,k]=f.exports.useState(null);function _(e){y((t=>s(s({},t),e)))}function O(e=!0){const t=l.current;if(!e||""===t||0===i.length)return;if(a.current===rte.Graph)return p(null),void(o.current&&o.current.refresh());u.current&&(u.current(),u.current=null);const n=new AbortController;u.current=()=>n.abort(),w(!0),p(null);const r=Date.now(),c=function(e=v.endTime){return null===e?A().unix():e}(),h=new URLSearchParams({query:t});h.append("time",c.toString()),function(e,t,n){return ai(`/api/n9e/prometheus/api/v1/${e}`,s({method:Qr.Get,params:t},n))}("query",h,{cache:"no-store",credentials:"same-origin",signal:n.signal}).then((e=>{if(u.current=null,w(!1),a.current!==rte.Graph)if(e.hasOwnProperty("status")&&"success"===e.status){var t=!1,n=1e4,i=0;let{resultType:a,result:o}=e.data;o&&(o.length>n&&(t=!0,i=o.length,o=o.slice(n)),o.forEach((e=>{e.values&&e.values.length>n&&(t=!0,e.values.length>i&&(i=e.values.length),e.values=e.values.slice(n))}))),b(t?`Warning：Fetched ${i} metrics, only displaying first 10000`:""),k("scalar"===a||"string"===a?{resultType:a,result:[o]}:{resultType:a,result:o}),p({loadTime:Date.now()-r,resultSeries:e.data.result.length})}else k(null),b((null==e?void 0:e.error)||"")})).catch((e=>{w(!1)}))}return f.exports.useEffect((()=>{v.type===rte.Table&&O()}),[v.endTime,i]),f.exports.useEffect((()=>{v.type===rte.Table&&O()}),[v.type,i]),d.createElement("div",{className:"panel"},d.createElement(tte,{queryHistory:["abs(go_gc_duration_seconds)"],value:l.current,onExpressionChange:function(e){l.current=e},metricNames:e,isLoading:C,executeQuery:O}),x&&d.createElement(Ht,{className:"error-alert",message:x,type:"error"}),!C&&!x&&h&&d.createElement(nte,s({},h)),d.createElement(zt,{className:"panel-tab-box",type:"card",activeKey:v.type,onChange:function(e){v.type!==e&&(e===rte.Graph&&c.current!==v.endTime?null===v.endTime?_({range:{num:1,unit:"hour",description:"hour"}}):_({range:{start:v.endTime-3600,end:v.endTime}}):c.current=v.endTime,a.current=e,_({type:e}),p(null))}},d.createElement(ate,{tab:"Table",key:"table"},d.createElement("div",{className:"table-timestamp"},"Timestamp:"," ",d.createElement(jt,{placeholder:"Evaluation time",showTime:!0,showNow:!1,disabledDate:e=>e>A(),value:v.endTime?A(1e3*v.endTime):null,onChange:function(e){_({endTime:e?null==e?void 0:e.unix():null})}})),d.createElement(Ut,{className:"table-list",size:"small",bordered:!0,loading:C,dataSource:S?S.result:[],renderItem:e=>{const{metric:t,value:n,values:r}=e;return d.createElement(Ut.Item,null,d.createElement("div",{className:"list-item-content"},d.createElement("div",{className:"left"},function(e,t){if("scalar"===e)return"scalar";if("string"===e)return"string";const n=null==t?void 0:t.__name__,r=T.keys(t).filter((e=>"__name__"!==e)).map(((e,n,r)=>d.createElement("span",{key:n},d.createElement("span",{className:"bold-text"},e),'="',t[e],'"',n===r.length-1?"":", ")));return d.createElement(d.Fragment,null,n,"{",r,"}")}(null==S?void 0:S.resultType,t)),"scalar"===(null==S?void 0:S.resultType)||"string"===(null==S?void 0:S.resultType)?e[1]:d.createElement("div",null,n&&n.length>1&&d.createElement("div",{className:"right"},n[1]||"-"),r&&r.length>0&&d.createElement("div",{className:"right"},r.map((e=>d.createElement(d.Fragment,null,e&&e.length>1&&d.createElement("span",{style:{display:"inline-block"}},e[1]," @",e[0]),d.createElement("br",null))))))))}})),d.createElement(ate,{tab:"Graph",key:"graph"},d.createElement("div",{className:"graph-operate-box"},d.createElement("div",{className:"left"},d.createElement(Rt,null,d.createElement(ou,{placement:"bottomRight",value:v.range,onChange:function(e){const t=v.range;if(iu(e)?!T.isEqual(t,e):e.num!==t.num||e.unit!==t.unit){_({endTime:e.hasOwnProperty("unit")?null:e.end,range:e})}}}),d.createElement(lu,{onChange:e=>_({resolution:e}),initialValue:v.resolution}),d.createElement(Bt.Group,{options:[{label:d.createElement(E,null),value:du.Line},{label:d.createElement(be,null),value:du.StackArea}],onChange:e=>{e.preventDefault(),g(e.target.value)},value:m,optionType:"button",buttonStyle:"solid"})))),d.createElement("div",null,v.type===rte.Graph&&d.createElement(nh,{ref:o,showHeader:!0,isShowRefresh:!1,data:{step:v.resolution,range:v.range,promqls:[l],chartType:m},onErrorOccured:function(e){if(e.length){const t=e[0].error;b(t)}else b("")},onRequestCompleted:function(e){a.current===rte.Graph&&p(e)}})))),d.createElement("span",{className:"remove-panel-btn",onClick:n},d.createElement(G,null)))};function ste(e){let t=new RegExp(`.*?${e}=([^&]*)`),n=(location.search||"").match(t);return n?n[1]:""}const lte=({metrics:e})=>{const[t,n]=f.exports.useState([{id:ui(),defaultPromQL:decodeURIComponent(ste("promql"))}]);return d.createElement(d.Fragment,null,t.map((({id:r,defaultPromQL:i=""})=>d.createElement(ote,{key:r,metrics:e,defaultPromQL:i,removePanel:()=>function(e){n(t.reduce(((t,n)=>n.id!==e?[...t,s({},n)]:t),[]))}(r)}))),d.createElement("div",{className:"add-prometheus-panel"},d.createElement(xt,{size:"large",onClick:function(){n((e=>[...t,{id:ui()}]))}},d.createElement(ke,null),"新增一个查询面板")))},cte=()=>{const[e,t]=f.exports.useState([]),{clusters:n}=ri((e=>e.common)),[r,i]=f.exports.useState(T.uniqueId("rerenderFlag_"));return f.exports.useEffect((()=>{n.length&&function(e={}){return ai("/api/n9e/prometheus/api/v1/label/__name__/values",{method:Qr.Get,params:e,paramsSerializer:function(e){return Ci.stringify(e,{arrayFormat:"bracket"})}})}().then((e=>{t(e.data||[])})).catch((()=>{t([])}))}),[n,r]),d.createElement(Ki,{title:"即时查询",icon:d.createElement(E,null),hideCluster:!1,onChangeCluster:()=>{i(T.uniqueId("rerenderFlag_"))}},d.createElement("div",{className:"prometheus-page",key:r},d.createElement(lte,{metrics:e})))},ute=function(e,t,n){const r=s({},au(t));return n&&(r["match[]"]=n),ai(`/api/n9e/prometheus/api/v1/label/${e}/values`,{method:Qr.Get,params:r}).then((e=>null==e?void 0:e.data))},hte=function(e,t){const n=s({},au(t));return e&&(n["match[]"]=e),ai("/api/n9e/prometheus/api/v1/labels",{method:Qr.Get,params:n}).then((e=>null==e?void 0:e.data))};function pte(e){const{isAggr:t,aggrFunc:n,calcArr:r,metric:i,match:a,offset:o,aggrGroups:s}=e;return`${t?n+"(":""}${r[0]?r[0]+"(":""}${i}${a}${r[1]?`[${r[1]}]`:""}${o?` offset ${o}`:""}${r[0]?")":""}${t?`) by (${T.join(s,", ")})`:""}`}const dte=e=>{let t=e.__name__||"";return T.forEach(T.omit(e,"__name__"),((e,n)=>{t+=` ${n}: ${e}`})),T.trim(t)},fte=e=>{const{metric:t,match:n,calcFunc:r,comparison:i,aggrFunc:a,aggrGroups:o}=e,s=T.split(r,"_"),l=o.length>0;return[pte({isAggr:l,aggrFunc:a,calcArr:s,metric:t,match:n,offset:"",aggrGroups:o}),...T.map(i,(e=>pte({isAggr:l,aggrFunc:a,calcArr:s,metric:t,match:n,offset:e,aggrGroups:o})))]};function mte(e){const t=T.compact(T.map(e,(e=>e.label&&e.value?`${e.label}${e.oper}"${e.value}"`:"")));return T.join(T.compact(t),",")}function gte(e){const t=T.map(e.dimensionLabels,(e=>T.isEmpty(e.value)?"":`${e.label}=~"${T.join(e.value,"|")}"`)),n=T.join(T.compact(t),",");return n?`{${n}}`:""}const vte={add:"新建快捷视图",edit:"编辑快捷视图"},{TabPane:yte}=zt;var xte=To((function(e){const{t:t}=Lr(),{action:n,visible:r,initialValues:i,destroy:a,range:o,onOk:l,admin:c}=e,[u]=bt.useForm(),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState(!1),[x,E]=f.exports.useState(!1),[b,C]=f.exports.useState([]),[w,S]=f.exports.useState("form"),k=e=>T.map(e,(e=>d.createElement(Mt.Option,{key:e,value:e},e)));return f.exports.useEffect((()=>{hte("",o).then((e=>{p(e),g(e)}))}),[JSON.stringify(o)]),d.createElement(It,{className:"n9e-metric-views-modal",title:d.createElement(zt,{className:"custom-import-title",activeKey:w,onChange:S},d.createElement(yte,{tab:vte[n],key:"form"}),"add"===n&&d.createElement(yte,{tab:"导入快捷视图",key:"import"})),visible:r,onCancel:()=>{a()},onOk:()=>{u.validateFields().then((e=>{let t=T.cloneDeep(e);if("form"===w&&(t.dynamicLabels=T.map(t.dynamicLabels,(e=>({label:e,value:""}))),t.dimensionLabels=T.map(t.dimensionLabels,(e=>({label:e,value:""})))),"import"===w)try{const n=JSON.parse(e.import);t=s({name:e.name,cate:e.cate},n)}catch(rh){return void console.log(rh)}const{name:r,cate:o}=t,c={name:r,cate:o?0:1,configs:JSON.stringify(T.omit(t,["name","cate"]))};"add"===n?function(e){return ai("/api/n9e/metric-views",{method:Qr.Post,data:e}).then((e=>null==e?void 0:e.dat))}(c).then((e=>{vt.success("添加成功"),l(e),a()})):"edit"===n&&(c.id=i.id,function(e){return ai("/api/n9e/metric-views",{method:Qr.Put,data:e}).then((e=>null==e?void 0:e.dat))}(c).then((()=>{vt.success("修改成功"),l(),a()})))}))}},"form"===w&&d.createElement(bt,{layout:"vertical",initialValues:i||{cate:!1},form:u,onValuesChange:(e,t)=>{if(e.filters){const e=mte(t.filters);hte(""+(e?`{${e}}`:""),o).then((e=>{g(e)}))}}},d.createElement(bt.Item,{label:"视图名称",name:"name",rules:[{required:!0}]},d.createElement(Ct,null)),c&&d.createElement(bt.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Lt,null)),d.createElement(bt.List,{name:"filters"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement("div",{style:{paddingBottom:8}},"前置过滤条件"," ",d.createElement(U,{onClick:()=>{t({oper:"="})}})),e.map((({key:e,name:t})=>d.createElement(Rt,{key:e},d.createElement(bt.Item,{name:[t,"label"],rules:[{required:!0}]},d.createElement(Mt,{suffixIcon:d.createElement(H,null),allowClear:!0,showSearch:!0,style:{width:170}},k(h))),d.createElement(bt.Item,{name:[t,"oper"],rules:[{required:!0}]},d.createElement(Mt,{suffixIcon:d.createElement(H,null),style:{width:60}},d.createElement(Mt.Option,{value:"="},"="),d.createElement(Mt.Option,{value:"!="},"!="),d.createElement(Mt.Option,{value:"=~"},"=~"),d.createElement(Mt.Option,{value:"!~"},"!~"))),d.createElement(bt.Item,{name:[t,"value"],rules:[{required:!0}]},d.createElement(Ct,{style:{width:200}})),d.createElement(bt.Item,null,d.createElement(Y,{onClick:()=>{n(t)}})))))))),d.createElement(bt.Item,{label:"动态过滤标签",name:"dynamicLabels"},d.createElement(Mt,{allowClear:!0,showSearch:!0,mode:"multiple"},k(m))),d.createElement(bt.Item,{label:"展开维度标签",name:"dimensionLabels",rules:[{required:!0}]},d.createElement(Mt,{allowClear:!0,showSearch:!0,mode:"multiple"},k(m))),d.createElement("div",{style:{textAlign:"right",marginBottom:10}},d.createElement(xt,{onClick:()=>{const e=u.getFieldsValue();y(!0),E(!0);const t=mte(e.filters),n=T.compact(T.concat(e.dynamicLabels,e.dimensionLabels)),r=T.map(n,(e=>ute(e,o,t?`{${t}}`:"")));Promise.all(r).then((e=>{const t=T.map(n,((t,n)=>({label:t,values:e[n]})));C(t),E(!1)}))}},"预览")),v&&d.createElement(Ft,{size:"small",rowKey:"label",columns:[{title:"Lable Key",dataIndex:"label"},{title:"Lable Value 数量",dataIndex:"values",render:e=>e.length},{title:"Lable Value 样例",dataIndex:"values",render:e=>d.createElement(Tt,{placement:"right",title:d.createElement("div",null,T.map(e,(e=>d.createElement("div",{key:e},e))))},`${T.head(e)}...`)}],dataSource:b,loading:x})),"import"===w&&d.createElement(bt,{form:u,preserve:!1,layout:"vertical",initialValues:i||{cate:!1}},d.createElement(bt.Item,{label:"视图名称",name:"name",rules:[{required:!0}]},d.createElement(Ct,null)),c&&d.createElement(bt.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Lt,null)),d.createElement(bt.Item,{label:"配置JSON：",name:"import",rules:[{required:!0,message:t("请输入配置"),validateTrigger:"trigger"}]},d.createElement(Ct.TextArea,{className:"code-area",placeholder:t("请输入配置"),rows:4}))))}));var Ete=To((function(e){const{visible:t,destroy:n,data:r}=e,{t:i}=Lr();let a=r;try{a=JSON.stringify(JSON.parse(r),null,4)}catch(rh){console.log(rh)}return d.createElement(It,{title:"导出配置",visible:t,onCancel:()=>{n()},footer:null},d.createElement(d.Fragment,null,d.createElement("div",{style:{marginBottom:10}},d.createElement("a",{onClick:()=>{si([r],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>li(r,i)},d.createElement(z,null),"复制JSON内容到剪贴板")),d.createElement(Ct.TextArea,{value:a,rows:10})))}));function bte(e){const[t,n]=f.exports.useState([]),[r,i]=f.exports.useState(),[a,o]=f.exports.useState(""),[l,c]=f.exports.useState(T.uniqueId("refreshFlag_")),{profile:u}=ri((e=>e.account));return f.exports.useEffect((()=>{const t=null!==localStorage.getItem("metric-view-id")?Number(localStorage.getItem("metric-view-id")):null;ai("/api/n9e/metric-views",{method:Qr.Get}).then((e=>null==e?void 0:e.dat)).then((r=>{let a;if(n(r),a=t&&T.find(r,{id:t})?t:T.get(T.head(r),"id"),a){i(a);const t=T.find(r,{id:a});let n={};try{n=JSON.parse(t.configs),n.id=a,n.refreshFlag=l}catch(rh){console.error(rh)}e.onSelect(s({},n))}}))}),[l]),d.createElement("div",{className:"n9e-metric-views-list"},d.createElement("div",{className:"n9e-metric-views-list-header"},d.createElement("div",{className:"metric-page-title"},"快捷视图列表"),d.createElement("a",null,d.createElement(De,{onClick:()=>{xte({admin:u.admin,action:"add",visible:!0,range:e.range,onOk:e=>{localStorage.setItem("metric-view-id",e.id),c(T.uniqueId("refreshFlag_"))}})}}))),d.createElement(Ct,{prefix:d.createElement(M,null),value:a,onChange:e=>{o(e.target.value)}}),d.createElement("div",{className:"n9e-metric-views-list-content"},T.isEmpty(t)?"暂无数据":T.map(T.filter(t,(e=>{if(a){let t=!0;try{t=new RegExp(a,"gi").test(e.name)}catch(rh){console.log(rh)}return t}return!0})),(n=>d.createElement("div",{className:P({"n9e-metric-views-list-content-item":!0,active:n.id===r}),key:n.id,onClick:()=>{i(n.id),localStorage.setItem("metric-view-id",n.id);const r=T.find(t,{id:n.id});let a={};try{a=JSON.parse(r.configs),a.id=n.id}catch(rh){console.error(rh)}e.onSelect(s({},a))}},d.createElement("span",{className:"name"},n.name),1===n.cate||u.admin?d.createElement("span",null,0===n.cate&&d.createElement("span",{className:"n9e-metric-views-list-content-item-cate",style:{color:"#ccc"}},"公开"),d.createElement("div",{className:"n9e-metric-views-list-content-item-opes"},d.createElement(_e,{onClick:t=>{t.stopPropagation();let r={};try{r=JSON.parse(n.configs),r.dynamicLabels=T.map(r.dynamicLabels,"label"),r.dimensionLabels=T.map(r.dimensionLabels,"label")}catch(a){console.error(a)}const i=s({id:n.id,name:n.name,cate:0===n.cate},r);xte({admin:u.admin,action:"edit",visible:!0,range:e.range,initialValues:i,onOk:()=>{localStorage.setItem("metric-view-id",n.id),c(T.uniqueId("refreshFlag_"))}})}}),d.createElement(Ee,{onClick:e=>{e.stopPropagation(),It.confirm({title:"是否要删除？",onOk:()=>{var e;(e={ids:[n.id]},ai("/api/n9e/metric-views",{method:Qr.Delete,data:e}).then((e=>null==e?void 0:e.dat))).then((()=>{vt.success("删除成功"),c(T.uniqueId("refreshFlag_"))}))}})}}),d.createElement(Tt,{title:"导出配置",placement:"right"},d.createElement(Be,{onClick:()=>{Ete({visible:!0,data:n.configs})}})))):d.createElement("span",{style:{color:"#ccc"}},"公开"))))))}function Cte(e){const{value:t,range:n,onChange:r}=e,{id:i,refreshFlag:a,filters:o,dynamicLabels:c,dimensionLabels:u}=t,[h,p]=f.exports.useState({}),[m,g]=f.exports.useState({}),[v,y]=f.exports.useState({}),x=mte(o),E=function(e){const t=T.map(e,(e=>e.value?`${e.label}="${e.value}"`:""));return T.join(T.compact(t),",")}(c),[b,C]=f.exports.useState({filters:!1,dynamicLabels:!0});return f.exports.useEffect((()=>{const e=T.map(c,(e=>ute(e.label,n,x?`{${x}}`:"")));Promise.all(e).then((e=>{const t={};T.forEach(e,((e,n)=>{t[c[n].label]=e})),p(t)}))}),[x]),f.exports.useEffect((()=>{const e=T.join(T.compact(T.concat(x,E)),","),i=T.map(u,(t=>ute(t.label,n,e?`{${e}}`:"")));Promise.all(i).then((e=>{const n={};T.forEach(e,((e,t)=>{n[u[t].label]=e})),g(n),T.every(u,(e=>T.isEmpty(e.value)))&&r(l(s({},t),{dimensionLabels:T.map(u,((e,t)=>0===t?{label:e.label,value:T.slice(n[e.label],0,10)}:e))}))}))}),[x,E,i,a]),d.createElement("div",{className:"n9e-metric-views-labels-values"},!T.isEmpty(x)&&d.createElement("div",{className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title",style:{cursor:"pointer"},onClick:()=>{C(l(s({},b),{filters:!b.filters}))}},"前置过滤条件 ",b.filters?d.createElement(ze,null):d.createElement(I,null)),b.filters&&d.createElement("div",{className:"n9e-metric-views-filters"},x||"暂无数据")),!T.isEmpty(c)&&d.createElement("div",{className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title",style:{cursor:"pointer"},onClick:()=>{C(l(s({},b),{dynamicLabels:!b.dynamicLabels}))}},"动态过滤条件 ",b.dynamicLabels?d.createElement(ze,null):d.createElement(I,null)),b.dynamicLabels&&d.createElement("div",{className:"n9e-metric-views-dynamicLabels"},T.isEmpty(c)?d.createElement("div",{style:{marginBottom:10}},"暂无数据"):T.map(c,(e=>d.createElement("div",{key:e.label,className:"n9e-metric-views-dynamicLabels-item"},d.createElement("div",{className:"n9e-metric-views-dynamicLabels-item-label"},e.label,":"),d.createElement(Mt,{allowClear:!0,showSearch:!0,style:{width:"100%"},value:e.value,onChange:n=>{const i=T.map(c,(t=>e.label===t.label?l(s({},t),{value:n}):t));r(l(s({},t),{dynamicLabels:i,dimensionLabels:T.map(u,((e,t)=>0===t?{label:e.label,value:[]}:e))}))}},T.map(h[e.label],(e=>d.createElement(Mt.Option,{key:e,value:e},e))))))))),T.map(u,(e=>{const n=m[e.label];return d.createElement("div",{key:e.label,className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title"},d.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",width:220}},d.createElement(Tt,{title:e.label,placement:"left"},d.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"calc(100% - 30px)"}},e.label)),d.createElement("a",{style:{fontSize:12,fontWeight:"normal"},onClick:()=>{r(l(s({},t),{dimensionLabels:T.map(u,(t=>t.label===e.label?l(s({},t),{value:n}):t))}))}},"全选"))),d.createElement("div",{className:"n9e-metric-views-dimensionLabel"},d.createElement(Ct.Group,{compact:!0},d.createElement(Ct,{style:{width:"calc(100% - 32px)"},prefix:d.createElement(M,null),value:v[e.label],onChange:t=>{y(l(s({},v),{[e.label]:t.target.value}))}}),d.createElement(Tt,{title:"清空已选的值",placement:"right",getTooltipContainer:()=>document.body},d.createElement(xt,{icon:d.createElement(He,null),onClick:()=>{r(l(s({},t),{dimensionLabels:T.map(u,(t=>t.label===e.label?l(s({},t),{value:[]}):t))}))}}))),d.createElement("div",{className:"n9e-metric-views-dimensionLabel-content"},T.isEmpty(n)?"暂无数据":d.createElement("div",null,T.map(T.filter(n,(t=>{let n=!0;if(v[e.label])try{n=new RegExp(v[e.label],"gi").test(t)}catch(rh){console.log(rh)}return n})),(n=>d.createElement("div",{key:n,className:P({"n9e-metric-views-dimensionLabel-content-item":!0,active:T.includes(e.value,n)}),onClick:()=>{const i=T.includes(e.value,n)?T.without(e.value,n):T.concat(e.value,n),a=T.map(u,(t=>t.label===e.label?l(s({},t),{value:T.compact(i)}):l(s({},t),{value:[]})));r(l(s({},t),{dimensionLabels:a}))}},n)))))))})))}const Tte=()=>d.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1269",width:"1em",height:"1em",fill:"currentColor"},d.createElement("path",{d:"M85.333333 85.333333h85.333334v768h768v85.333334H85.333333V85.333333m512 533.333334L512 768H338.773333l-86.186666-149.333333L338.773333 469.333333H512l85.333333 149.333334m3.413334-341.333334L514.56 426.666667H341.333333L256 277.333333 341.333333 128h173.226667l86.186667 149.333333m305.92 170.666667L820.48 597.333333h-172.373333l-86.186667-149.333333L648.106667 298.666667h172.373333l86.186667 149.333333z",fill:"","p-id":"1270"})),wte=e=>d.createElement(x,s({component:Tte},e)),Ste=[{label:"none",value:"none"},{label:"bits(SI)",value:"bitsSI"},{label:"bytes(SI)",value:"bytesSI"},{label:"bits(IEC)",value:"bitsIEC"},{label:"bytes(IEC)",value:"bytesIEC"},{label:"百分比(0-100)",value:"percent"},{label:"百分比(0.0-1.0)",value:"percentUnit"},{label:"seconds",value:"seconds"},{label:"milliseconds",value:"milliseconds"},{label:"humanize(seconds)",value:"humantimeSeconds"},{label:"humanize(milliseconds)",value:"humantimeMilliseconds"}];function kte(e){const{highLevelConfig:t,setHighLevelConfig:n}=e,r=d.createElement(yt,{onClick:e=>{n(l(s({},t),{sharedSortDirection:e.key}))},selectedKeys:[t.sharedSortDirection]},d.createElement(yt.Item,{key:"desc"},"desc"),d.createElement(yt.Item,{key:"asc"},"asc")),i=d.createElement(yt,{onClick:e=>{n(l(s({},t),{util:e.key}))},selectedKeys:[t.util]},T.map(Ste,(e=>d.createElement(yt.Item,{key:e.value},e.label))));return d.createElement("div",null,d.createElement(St,{checked:t.shared,onChange:e=>{n(l(s({},t),{shared:e.target.checked}))}},"Multi Series in Tooltip, order value"),d.createElement(wt,{overlay:r},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},t.sharedSortDirection," ",d.createElement(I,null))),d.createElement("br",null),d.createElement(St,{checked:t.legend,onChange:e=>{n(l(s({},t),{legend:e.target.checked}))}},"Show Legend"),d.createElement("br",null),"Value format with:"," ",d.createElement(wt,{overlay:i},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},T.get(T.find(Ste,{value:t.util}),"label")," ",d.createElement(I,null))))}function _te(e){const{onClick:t,selectedKeys:n}=e;return d.createElement(yt,{prefixCls:"ant-dropdown-menu",onClick:t,selectedKeys:n,className:"color-scales"},T.map(Mc,(e=>d.createElement(yt.Item,{key:e.value,className:"color-scales-menu-item"},d.createElement("span",{className:"color-scales-menu-colors"},T.map(e.value,(e=>d.createElement("span",{key:e,style:{backgroundColor:e}})))),e.label))))}function Ate(e){const{highLevelConfig:t,setHighLevelConfig:n}=e,r=d.createElement(yt,{onClick:e=>{n(l(s({},t),{util:e.key}))},selectedKeys:[t.util]},T.map(Ste,(e=>d.createElement(yt.Item,{key:e.value},e.label))));return d.createElement("div",null,d.createElement("div",{style:{marginBottom:5}},"Height:"," ",d.createElement(Dt,{size:"small",value:t.chartheight,onBlur:e=>{n(l(s({},t),{chartheight:T.toNumber(e.target.value)}))}})),d.createElement("div",{style:{marginBottom:5}},"Color:"," ",d.createElement(wt,{overlay:d.createElement(_te,{onClick:e=>{n(l(s({},t),{colorRange:T.split(e.key,",")}))},selectedKeys:[T.join(t.colorRange,",")]})},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},T.get(T.find(Mc,(e=>T.isEqual(e.value,t.colorRange))),"label")," ",d.createElement(I,null)))),d.createElement("div",{style:{marginBottom:5}},"Reverse color order:"," ",d.createElement(Lt,{size:"small",checked:t.reverseColorOrder,onChange:e=>{n(l(s({},t),{reverseColorOrder:e}))}})),d.createElement("div",{style:{marginBottom:5}},"Auto min/max color values:"," ",d.createElement(Lt,{size:"small",checked:t.colorDomainAuto,onChange:e=>{n(l(s({},t),{colorDomainAuto:e,colorDomain:[0,100]}))}})),!t.colorDomainAuto&&d.createElement("div",{style:{marginBottom:5}},d.createElement(kt,{gutter:8},d.createElement(_t,{span:12},d.createElement(Dt,{size:"small",addonBefore:"min",style:{width:110},value:t.colorDomain[0],onChange:e=>{n(l(s({},t),{colorDomain:[e,t.colorDomain[1]]}))}})),d.createElement(_t,{span:12},d.createElement(Dt,{size:"small",addonBefore:"max",style:{width:110},value:t.colorDomain[1],onChange:e=>{n(l(s({},t),{colorDomain:[t.colorDomain[0],e]}))}})))),d.createElement("div",null,"Value format with:"," ",d.createElement(wt,{overlay:r},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},T.get(T.find(Ste,{value:t.util}),"label")," ",d.createElement(I,null)))))}function Ote(e){var t;const{metric:n,match:r,range:i,step:a,onClose:o}=e,c=T.map(T.filter(r.dimensionLabels,(e=>!T.isEmpty(e.value))),"label"),[u,h]=f.exports.useState(T.uniqueId("refreshFlag_")),[p,m]=f.exports.useState(""),[g,v]=f.exports.useState([]),[y,x]=f.exports.useState("avg"),[b,C]=f.exports.useState(c),[w,S]=f.exports.useState([]),[k,_]=f.exports.useState([]),[A,O]=f.exports.useState({shared:!0,sharedSortDirection:"desc",legend:!0,util:"none",colorRange:Mc[0].value,reverseColorOrder:!1,colorDomainAuto:!0,colorDomain:[],chartheight:300}),[M,N]=f.exports.useState("line"),[F,R]=f.exports.useState("last"),D={custom:{drawStyle:"lines",fillOpacity:0,stack:"hidden",lineInterpolation:"smooth"},options:{legend:{displayMode:A.legend?"table":"hidden"},tooltip:{mode:A.shared?"all":"single",sort:A.sharedSortDirection},standardOptions:{util:A.util}}},B={custom:{calc:F,colorRange:A.colorRange,reverseColorOrder:A.reverseColorOrder,colorDomainAuto:A.colorDomainAuto,colorDomain:A.colorDomain},options:{standardOptions:{util:A.util}}},z={line:d.createElement(kte,{highLevelConfig:A,setHighLevelConfig:O}),hexbin:d.createElement(Ate,{highLevelConfig:A,setHighLevelConfig:O})};return f.exports.useEffect((()=>{C(c)}),[JSON.stringify(c)]),f.exports.useEffect((()=>{const e=gte(r);hte(`${n}${e}`,i).then((e=>{S(e)}))}),[u,JSON.stringify(r),JSON.stringify(i)]),f.exports.useEffect((()=>{(function(e){const{metric:t,match:n,range:r,step:i,calcFunc:a,comparison:o,aggrFunc:s,aggrGroups:l}=e;let{start:c,end:u}=au(r),h=i;i||(h=Math.max(Math.floor((u-c)/240),1));const p=fte({metric:t,match:n,calcFunc:a,comparison:o,aggrFunc:s,aggrGroups:l}),d=T.map(p,(e=>ai("/api/n9e/prometheus/api/v1/query_range",{method:Qr.Get,params:{start:c-c%h,end:u-u%h,step:h,query:e}})));return Promise.all(d).then((e=>{const t=[];return T.forEach(["current",...o],((n,r)=>{var i,a;const o=((null==(i=e[r])?void 0:i.data)?null==(a=e[r])?void 0:a.data:e[r]).result||[];T.forEach(o,(e=>{t.push({metric:e.metric,color:e.color,offset:n,name:`${dte(e.metric)}${"current"!==n?` offset ${n}`:""}`,id:T.uniqueId("series_"),data:e.values})}))})),t}))})({metric:n,match:gte(r),range:i,step:a,aggrFunc:y,aggrGroups:b,calcFunc:p,comparison:g}).then((e=>{_(e)}))}),[u,n,JSON.stringify(r),JSON.stringify(i),a,p,g,y,b]),d.createElement(Vt,{size:"small",style:{marginBottom:10},title:n,className:"n9e-metric-views-metrics-graph",extra:d.createElement(Rt,null,d.createElement(Rt,{size:0,style:{marginRight:10}},d.createElement(E,{className:P({"button-link-icon":!0,active:"line"===M}),onClick:()=>{N("line")}}),d.createElement(Nt,{type:"vertical"}),d.createElement(wte,{className:P({"button-link-icon":!0,active:"hexbin"===M}),onClick:()=>{N("hexbin")}})),d.createElement(Gt,{placement:"left",content:z[M],trigger:"click",autoAdjustOverflow:!1,getPopupContainer:()=>document.body},d.createElement("a",{className:"a-icon"},d.createElement(L,null))),d.createElement("a",{className:"a-icon"},d.createElement(ce,{onClick:()=>{h(T.uniqueId("refreshFlag_"))}})),d.createElement("a",{className:"a-icon"},d.createElement(ue,{onClick:()=>{const e=localStorage.getItem("curCluster"),t=l(s({type:"timeseries",version:"2.0.0",name:n,step:a,range:i},D),{targets:T.map(fte({metric:n,match:gte(r),aggrFunc:y,aggrGroups:b,calcFunc:p,comparison:g}),(e=>({expr:e})))});var o;(o=[{configs:JSON.stringify({curCluster:e,dataProps:t})}],ai("/api/n9e/share-charts",{method:Qr.Post,data:o})).then((e=>{const t=e.dat;window.open("/chart/"+t)}))}})),d.createElement("a",{className:"a-icon"},d.createElement(G,{onClick:o})))},d.createElement("div",null,d.createElement(Rt,{size:"large"},d.createElement("div",null,"计算函数：",d.createElement(wt,{overlay:d.createElement(yt,{onClick:e=>m("clear"===e.key?"":e.key),selectedKeys:[p]},d.createElement(yt.Item,{key:"rate_1m"},"rate_1m"),d.createElement(yt.Item,{key:"rate_5m"},"rate_5m"),d.createElement(yt.Item,{key:"increase_1m"},"increase_1m"),d.createElement(yt.Item,{key:"increase_5m"},"increase_5m"),d.createElement(yt.Divider,null),d.createElement(yt.Item,{key:"clear"},"clear"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},p||"无"," ",d.createElement(I,null)))),d.createElement("div",null,"环比：",g.map((e=>d.createElement(Ot,{key:e,closable:!0,onClose:()=>{v(T.without(g,e))}},e))),d.createElement(wt,{overlay:d.createElement(yt,{style:{maxHeight:"200px",overflowY:"auto"},onClick:e=>{-1===g.indexOf(e.key)?v([...g,e.key]):v(T.without(g,e.key))},selectedKeys:g},d.createElement(yt.Item,{key:"1d"},"1d"),d.createElement(yt.Item,{key:"7d"},"7d"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(U,null)))),d.createElement("div",null,"聚合函数：",d.createElement(wt,{overlay:d.createElement(yt,{onClick:e=>x(e.key),selectedKeys:[y]},d.createElement(yt.Item,{key:"sum"},"sum"),d.createElement(yt.Item,{key:"avg"},"avg"),d.createElement(yt.Item,{key:"max"},"max"),d.createElement(yt.Item,{key:"min"},"min"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},y," ",d.createElement(I,null)))),y?d.createElement("div",{className:"graph-config-inner-item"},"聚合维度：",b.map((e=>d.createElement(Ot,{key:e,closable:!0,onClose:()=>{C(T.without(b,e))}},e))),d.createElement(wt,{overlay:d.createElement(yt,{style:{maxHeight:"200px",overflowY:"auto"},onClick:e=>{-1===b.indexOf(e.key)?C([...b,e.key]):C(T.without(b,e.key))},selectedKeys:b},T.map(T.filter(w,(e=>"__name__"!==e)),(e=>d.createElement(yt.Item,{key:e},e))))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement(U,null)))):null,"hexbin"===M&&d.createElement("div",null,"取值计算：",d.createElement(wt,{overlay:d.createElement(yt,{onClick:e=>R(e.key),selectedKeys:[F]},T.map(Fc,((e,t)=>d.createElement(yt.Item,{key:t},e.name))))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},null==(t=Fc[F])?void 0:t.name," ",d.createElement(I,null)))))),d.createElement("div",null,"line"===M&&d.createElement(bh,{inDashboard:!1,values:D,series:k}),"hexbin"===M&&d.createElement("div",{style:{padding:"20px 0 0 0",height:A.chartheight}},d.createElement(K$,{values:B,series:k}))))}function Ite(e){const{range:t,setRange:n,match:r}=e,[i,a]=f.exports.useState(T.uniqueId("refreshFlag_")),[o,c]=f.exports.useState(""),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState({}),[g,v]=f.exports.useState("all"),[y,x]=f.exports.useState([]),[E,b]=f.exports.useState([]),[C,w]=f.exports.useState(),S=gte(r);return f.exports.useEffect((()=>{S&&function(e,t){return ai("/api/n9e/prometheus/api/v1/label/__name__/values",{method:Qr.Get,params:l(s({},au(t)),{"match[]":e})}).then((e=>null==e?void 0:e.data))}(S,t).then((e=>{const t=T.union(e),n=T.union(T.compact(T.map(t,(e=>T.get(T.split(e,"_"),"[0]")))));var r;h(t),x(n),(r=t,ai("/api/n9e/metrics/desc",{method:Qr.Post,data:r,silence:!0}).then((e=>null==e?void 0:e.dat))).then((e=>{m(e)}))}))}),[i,S]),f.exports.useEffect((()=>{b([]),v("all"),h([])}),[r.id,S]),d.createElement("div",{className:"n9e-metric-views-metrics"},d.createElement("div",null,d.createElement("div",{className:"n9e-metric-views-metrics-header"},d.createElement("div",{className:"metric-page-title"},"监控指标"),d.createElement(Ct,{prefix:d.createElement(M,null),value:o,onChange:e=>{c(e.target.value)},placeholder:"搜索，空格分隔多个关键字",addonAfter:d.createElement(ce,{style:{cursor:"pointer"},onClick:()=>{a(T.uniqueId("refreshFlag_"))}})})),d.createElement("div",null,u.length>0?d.createElement(d.Fragment,null,d.createElement(Vt,{size:"small",style:{width:"100%"},tabList:T.map(["all",...y],(e=>({key:e,tab:e}))),activeTabKey:g,onTabChange:v},d.createElement("div",null,((e=[],t)=>{const n=T.filter(e,(e=>{let n=!0;if(n="all"===t||0===e.indexOf(t),n&&o)try{n=new RegExp(o,"gi").test(e)}catch(rh){n=!1}return n}));return d.createElement("div",{className:"tabPane",style:{height:240,overflow:"auto"}},n.length?d.createElement("ul",{className:"n9e-metric-views-metrics-content",style:{border:"none"}},T.map(n,((e,t)=>d.createElement("li",{className:"item",key:t,onClick:()=>{b(T.union(T.concat(e,E)))}},d.createElement("span",null,e),T.find(E,(t=>t===e))?d.createElement("span",{style:{marginLeft:8}},"+1"):null,p[e]?d.createElement(Tt,{title:p[e]},d.createElement("span",{className:"desc"},p[e])):null)))):d.createElement("div",{style:{textAlign:"center"}},"No data"))})(u,g))),d.createElement(kt,{style:{padding:"10px 0"}},d.createElement(_t,{span:8},d.createElement(Rt,null,d.createElement(ou,{value:t,onChange:e=>{n(e)}}),d.createElement(lu,{onChange:e=>{w(null===e?void 0:e)},initialValue:C}),d.createElement(xt,{style:{padding:"4px 8px"},onClick:()=>{n(l(s({},t),{refreshFlag:T.uniqueId("refreshFlag_")}))},icon:d.createElement(ce,null)}))),d.createElement(_t,{span:16,style:{textAlign:"right"}},d.createElement(xt,{onClick:()=>{b([])},disabled:!E.length,style:{background:"#fff"}},"清空图表"))),T.map(E,((e,n)=>d.createElement(Ote,{key:e,metric:e,match:r,range:t,step:C,onClose:()=>{const e=[...E];e.splice(n,1),b(e)}})))):d.createElement("div",{style:{marginTop:12}},"暂无指标数据，请选择左侧 Lables"))))}function Mte(){const[e,t]=f.exports.useState(),[n,r]=f.exports.useState({num:1,unit:"hour",description:"hour"}),[i,a]=f.exports.useState(T.uniqueId("rerenderFlag_"));return d.createElement(Ki,{title:"快捷视图",icon:d.createElement(E,null),hideCluster:!1,onChangeCluster:()=>{a(T.uniqueId("rerenderFlag_"))}},d.createElement("div",{className:"n9e-metric-views",key:i},d.createElement(bte,{onSelect:e=>{t(e)},range:n}),e?d.createElement(d.Fragment,null,d.createElement(Cte,{range:n,value:e,onChange:e=>{t(e)}}),d.createElement(Ite,{range:n,setRange:r,match:e})):null))}const Nte=function(e){return ai("/api/n9e/metric-descriptions",{method:Qr.Get,params:e})};const{confirm:Fte}=It,{TextArea:Lte}=Ct,Pte=()=>{const{t:e}=Lr(),[t]=bt.useForm(),n=f.exports.useRef(null),r=f.exports.useRef(null),[i,a]=f.exports.useState(!1),[o,l]=f.exports.useState("create"),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState({}),[m,g]=f.exports.useState(""),v=C(),y={import:e("导入"),edit:e("编辑"),export:e("导出"),create:e("创建")},x=()=>{a(!1)},E=t=>{var r;(r=[t.id],ai("/api/n9e/metric-descriptions",{method:Qr.Delete,data:{ids:r}})).then((async t=>{await n.current.refreshList(),vt.success(e("删除指标成功"))}))},[b,T]=f.exports.useState(e("更多操作")),w=t=>{switch(t){case"import":a(!0),l("import");break;case"export":c.length<=0?vt.warning(e("请勾选需要导出的指标")):(a(!0),l("export"),setTimeout((()=>{r.current&&r.current.focus()})))}T(t)},S=(e,t,n,r)=>t.id===h.id?d.createElement(Ct,{defaultValue:e,onPressEnter:()=>k("save"),onChange:e=>((e,t,n,r)=>{let i=Object.assign({},t);i[r]=e.target.value,p(i)})(e,t,0,r)}):d.createElement("span",null,e),k=async(t="")=>{if("save"===t){let t=h.id||-1;await function(e,t){return ai(`/api/n9e/metric-description/${e}`,{method:Qr.Put,data:t})}(t,{description:h.description,metric:h.metric}),vt.success(e("编辑成功")),n.current.refreshList()}p({})},_=[{title:e("指标名称"),dataIndex:"metric",key:"metric",render:(e,t)=>d.createElement("a",{onClick:()=>{let n={pathname:"/metric/explorer",state:{name:e,description:t.description}};v.push(n)}},e)},{title:e("释义"),dataIndex:"description",width:"40%",key:"description",render:(e,t,n)=>S(e,t,0,"description")},{title:e("操作"),dataIndex:"",key:"operations",width:"15%",render:(t,n)=>d.createElement("div",{className:"operations"},n.id!==h.id?d.createElement("div",null,d.createElement("span",{className:"operation-item edit",onClick:()=>(e=>{p(e)})(n)},e("编辑")),d.createElement("div",{className:"table-operator-area-warning",style:{display:"inline-block",marginLeft:10},onClick:()=>{Fte({title:e("确定删除该指标?"),icon:d.createElement(je,null),onOk:()=>{E(n)}})}},e("删除"))):d.createElement("div",null,d.createElement("span",{className:"operation-item edit-save",onClick:()=>k("save")},e("保存")),d.createElement("span",{className:"operation-item edit-cancel",onClick:()=>k("cancel")},e("取消"))))}],A={onChange:(e,t)=>{let n=[];t.map((e=>{n.push(`${e.metric}:${e.description}`)})),u(n)}};return d.createElement(Ki,{title:e("指标释义"),icon:d.createElement(Ge,null)},d.createElement("div",{className:"indicator-index"},d.createElement("div",{className:"indicator-operations"},d.createElement(Ct,{className:"searchInput",onPressEnter:e=>{let t=e.target.value;g(t)},prefix:d.createElement(M,null),placeholder:e("指标名称或释义")}),d.createElement("div",{className:"operations"},d.createElement(xt.Group,null,d.createElement(xt,{size:"middle",type:"default",icon:d.createElement($e,null),onClick:()=>w("import")},e("导入")),d.createElement(xt,{size:"middle",type:"default",icon:d.createElement(Ye,null),onClick:()=>w("export")},e("导出"))))),d.createElement("div",{className:"indicator-main"},d.createElement(Gee,{fetchHandle:Nte,ref:n,fetchParams:{query:m},rowSelection:s({},A),rowKey:e=>e.id,columns:_}))),d.createElement(It,{title:y[o],destroyOnClose:!0,footer:"export"!==o&&[d.createElement(xt,{key:"delete",onClick:x},e("取消")),d.createElement(xt,{key:"submit",type:"primary",onClick:async()=>{try{const i=await t.validateFields();(r=i.metrics||"",ai("/api/n9e/metric-descriptions",{method:Qr.Post,data:{data:r}})).then((async t=>{t&&t.success&&(await n.current.refreshList(),a(!1),vt.success(e("创建指标成功")))}))}catch(rh){}var r}},e("确定"))],onCancel:x,visible:i},d.createElement("p",{style:{color:"#999"}},"export"===o?d.createElement("a",{onClick:()=>{si(c)}},"Download.txt"):d.createElement("span",null,e("一行一个"))),(()=>{switch(o){case"export":return d.createElement("div",{contentEditable:"true",suppressContentEditableWarning:!0,ref:r,style:{height:"200px",border:"1px solid #d9d9d9",overflow:"auto",padding:"10px"}},c.map(((e,t)=>d.createElement("div",{key:t},e))));case"import":case"create":return d.createElement(bt,{name:o+"-dialog",form:t,preserve:!1},d.createElement(bt.Item,{name:"metrics",key:"metrics",rules:[{required:!0,message:e("不能为空"),validateTrigger:"trigger"}]},d.createElement(Lte,{placeholder:"name:description",rows:4})))}})()))};function Rte(e){const{form:t}=e,[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState({});return f.exports.useEffect((()=>{ai("/api/fc-brain/params",{method:Qr.Get}).then((e=>e.data)).then((e=>{a(e)}))}),[]),d.createElement(d.Fragment,null,d.createElement(bt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:"告警方式"},d.createElement(Bt.Group,{buttonStyle:"solid",value:"holtwinters"===e("algorithm")?"abnormalDetection":"threshold",onChange:e=>{"abnormalDetection"===e.target.value?t.setFieldsValue({algorithm:"holtwinters",algo_params:null==i?void 0:i.holtwinters}):t.setFieldsValue({algorithm:"",algo_params:void 0})}},d.createElement(Bt.Button,{value:"threshold"},"阈值告警"),d.createElement(Bt.Button,{value:"abnormalDetection"},"智能告警"))),"holtwinters"===e("algorithm")&&d.createElement(d.Fragment,null,d.createElement(bt.Item,{label:"使用算法",name:"algorithm",style:{display:"none"}},d.createElement(Mt,null,d.createElement(Mt.Option,{value:"holtwinters"},"holtwinters"))),d.createElement(bt.Item,{label:"高级配置"},d.createElement("div",{style:{height:32,lineHeight:"32px",userSelect:"none"}},d.createElement("a",{onClick:()=>r(!n)},n?"收起":"展开")),d.createElement("div",{style:{display:n?"block":"none"}},d.createElement("div",null,"季节性周期时间为：",d.createElement(bt.Item,{noStyle:!0,name:["algo_params","seasonal_duration"]},d.createElement(Mt,{style:{width:100}},d.createElement(Mt.Option,{value:3600},"小时"),d.createElement(Mt.Option,{value:86400},"天"),d.createElement(Mt.Option,{value:604800},"周"),d.createElement(Mt.Option,{value:2592e3},"月")))," "),d.createElement("div",{style:{display:"flex",alignItems:"baseline",marginTop:16}},d.createElement("div",{style:{marginRight:16}},"偏离"),d.createElement("div",{style:{display:"flex",gap:20}},d.createElement("div",{style:{marginBottom:16}},d.createElement(bt.Item,{noStyle:!0,name:["algo_params","upper_bound"],valuePropName:"checked",getValueFromEvent:e=>e.target.checked?1:0},d.createElement(St,null,"上界")),d.createElement(bt.Item,{noStyle:!0,name:["algo_params","upper_times_num"]},d.createElement(Dt,null))," ","倍误差"),d.createElement("div",null,d.createElement(bt.Item,{noStyle:!0,name:["algo_params","lower_bound"],valuePropName:"checked",getValueFromEvent:e=>e.target.checked?1:0},d.createElement(St,null,"下界")),d.createElement(bt.Item,{noStyle:!0,name:["algo_params","lower_times_num"]},d.createElement(Dt,null))," ","倍误差"))),d.createElement("div",null,d.createElement(bt.List,{name:["algo_params","compares"]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement("div",{style:{marginBottom:10}},"同环比"," ",d.createElement(U,{onClick:()=>{t({operator:1,offset:86400,bound_type:0})}})),e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(Rt,{key:r,style:{display:"flex",marginBottom:8},align:"baseline"},d.createElement(bt.Item,l(s({},a),{name:[i,"operator"]}),d.createElement(Mt,null,d.createElement(Mt.Option,{value:1},"且"),d.createElement(Mt.Option,{value:0},"或"))),d.createElement("span",null,"相比"),d.createElement(bt.Item,l(s({},a),{name:[i,"offset"]}),d.createElement(Mt,null,d.createElement(Mt.Option,{value:86400},"1"),d.createElement(Mt.Option,{value:172800},"2"),d.createElement(Mt.Option,{value:259200},"3"),d.createElement(Mt.Option,{value:345600},"4"),d.createElement(Mt.Option,{value:432e3},"5"),d.createElement(Mt.Option,{value:518400},"6"),d.createElement(Mt.Option,{value:604800},"7"))),d.createElement("span",null,"天前同时期"),d.createElement(bt.Item,l(s({},a),{name:[i,"bound_type"]}),d.createElement(Mt,null,d.createElement(Mt.Option,{value:0},"偏离"),d.createElement(Mt.Option,{value:1},"上升"),d.createElement(Mt.Option,{value:2},"下降"))),d.createElement(bt.Item,l(s({},a),{name:[i,"value"]}),d.createElement(Dt,null))," %",d.createElement(Y,{onClick:()=>n(i)}))})))))))))))))}const{Option:Dte}=Mt,Bte={labelCol:{span:3},wrapperCol:{span:21}},zte={wrapperCol:{offset:3}};function Hte(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function jte(e){const{isCorrectFormat:t,isLengthAllowed:n}=Hte(e.value);return t&&n?d.createElement(Ot,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(Tt,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Ot,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function Gte(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=Hte(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const $te=({type:e,detail:t={}})=>{const{t:n,i18n:r}=Lr(),i=C(),[a]=bt.useForm(),{clusters:o}=ri((e=>e.common)),{curBusiItem:c}=ri((e=>e.common)),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState([]),[g,v]=f.exports.useState({});f.exports.useState(!0);const[y,x]=f.exports.useState(!0);f.exports.useEffect((()=>(S(),k(""),()=>{})),[]),f.exports.useEffect((()=>{const n=l(s({},t),{enable_time:(null==t?void 0:t.enable_stime)?[t.enable_stime,t.enable_etime]:[],enable_status:void 0===(null==t?void 0:t.disabled)||!(null==t?void 0:t.disabled)});if(v(n),1==e){const e=(t.notify_groups_obj?t.notify_groups_obj.filter((e=>!p.find((t=>e.id===t.id)))):[]).concat(p);m(e)}}),[JSON.stringify(t)]);const E=[n("周日"),n("周一"),n("周二"),n("周三"),n("周四"),n("周五"),n("周六")].map(((e,t)=>d.createElement(Dte,{value:String(t),key:t},`${e}`))),b=u.map((e=>d.createElement(St,{value:e.key,key:e.label},e.label))),w=p.map((e=>d.createElement(Dte,{value:String(e.id),key:e.id},e.name))),S=async()=>{const e=await Xa();h(e||[])},k=async e=>{const n=await Ya({query:e}),r=n.dat||n,i=(t.notify_groups_obj?t.notify_groups_obj.filter((e=>!r.find((t=>e.id===t.id)))):[]).concat(r);m(i||[])},_=f.exports.useCallback($.exports.debounce(k,800),[]);return d.createElement("div",{className:"operate_con"},d.createElement(bt,l(s({},Bte),{form:a,className:"strategy-form",layout:"vertical",initialValues:l(s({prom_eval_interval:15,prom_for_duration:60,severity:2,disabled:0,cluster:o[0]||"Default",enable_days_of_week:["1","2","3","4","5","6","0"]},t),{enable_in_bg:1===(null==t?void 0:t.enable_in_bg),enable_time:(null==t?void 0:t.enable_stime)?[A(t.enable_stime,"HH:mm"),A(t.enable_etime,"HH:mm")]:[A("00:00","HH:mm"),A("23:59","HH:mm")],enable_status:void 0===(null==t?void 0:t.disabled)||!(null==t?void 0:t.disabled),notify_recovered:1===(null==t?void 0:t.notify_recovered)||void 0===(null==t?void 0:t.notify_recovered),recover_duration:(null==t?void 0:t.recover_duration)||0,callbacks:(null==t?void 0:t.callbacks)?t.callbacks.map((e=>({url:e}))):[{}]})}),d.createElement(Rt,{direction:"vertical",style:{width:"100%"}},d.createElement(Vt,{title:n("基本配置")},d.createElement(bt.Item,{label:n("规则标题："),name:"name",rules:[{required:!0,message:n("规则标题不能为空")}]},d.createElement(Ct,{placeholder:n("请输入规则标题")})),d.createElement(bt.Item,{label:n("规则备注："),name:"note",rules:[{required:!1}]},d.createElement(Ct,{placeholder:n("请输入规则备注")})),d.createElement(bt.Item,{label:n("告警级别"),name:"severity",rules:[{required:!0,message:n("告警级别不能为空")}]},d.createElement(Bt.Group,null,d.createElement(Bt,{value:1},n("一级报警")),d.createElement(Bt,{value:2},n("二级报警")),d.createElement(Bt,{value:3},n("三级报警")))),d.createElement(bt.Item,{label:n("生效集群"),name:"cluster",rules:[{required:!0,message:n("生效集群不能为空")}]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},null==o?void 0:o.map((e=>d.createElement(Dte,{value:e,key:e},e))))),d.createElement(Ni,null,d.createElement(Rte,{form:a})),d.createElement(bt.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.cluster!==t.cluster},(()=>d.createElement(bt.Item,{label:"PromQL",className:"Promeql-content",required:!0,style:{marginBottom:0}},d.createElement(Ni,null,(e=>d.createElement(Ct.Group,{compact:!0},d.createElement(bt.Item,{style:{width:e?"calc(100% - 80px)":"100%"},name:"prom_ql",validateTrigger:["onBlur"],trigger:"onChange",rules:[{required:!0,message:n("请输入PromQL")}]},d.createElement(y9,{url:"/api/n9e/prometheus",headers:{"X-Cluster":a.getFieldValue("cluster"),Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},onChange:()=>{x(!1)}})),e&&d.createElement(xt,{onClick:()=>{const e=a.getFieldsValue();var t;e.prom_ql&&(x(!0),(t={cluster:e.cluster,algorithm:e.algorithm,algo_params:e.algo_params,prom_ql:e.prom_ql,prom_eval_interval:e.prom_eval_interval},ai("/api/fc-brain/promql-check",{method:Qr.Post,data:t,silence:!0}).then((e=>e.data))).then((()=>{vt.success("校验通过")})).catch((e=>{vt.error(d.createElement("div",null,"校验失败",d.createElement("div",null,e.data.error)))})))}},"指标校验"))))))),d.createElement(bt.Item,{required:!0,label:n("执行频率")},d.createElement(Rt,null,d.createElement(bt.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:15,wrapperCol:{span:24},rules:[{required:!0,message:n("执行频率不能为空")}]},d.createElement(Dt,{min:1})),"秒",d.createElement(Tt,{title:n(`每隔${a.getFieldValue("prom_eval_interval")}秒，把PromQL作为查询条件，去查询后端存储，如果查到了数据就表示当次有监控数据触发了规则`)},d.createElement(V,null)))),d.createElement(bt.Item,{required:!0,label:n("持续时长"),rules:[{required:!0,message:n("持续时长不能为空")}]},d.createElement(Rt,null,d.createElement(bt.Item,{style:{marginBottom:0},name:"prom_for_duration",wrapperCol:{span:10}},d.createElement(Dt,{min:0})),"秒",d.createElement(Tt,{title:n("通常持续时长大于执行频率，在持续时长内按照执行频率多次执行PromQL查询，每次都触发才生成告警；如果持续时长置为0，表示只要有一次PromQL查询触发阈值，就生成告警")},d.createElement(V,null)))),d.createElement(bt.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},Gte]},d.createElement(Mt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:jte})),d.createElement(bt.Item,{label:n("预案链接"),name:"runbook_url"},d.createElement(Ct,null))),d.createElement(Vt,{title:n("生效配置")},d.createElement(bt.Item,{label:n("立即启用"),name:"enable_status",rules:[{required:!0,message:n("立即启用不能为空")}],valuePropName:"checked"},d.createElement(Lt,null)),d.createElement(bt.Item,{label:n("生效时间"),name:"enable_days_of_week",rules:[{required:!0,message:n("生效时间不能为空")}]},d.createElement(Mt,{mode:"tags"},E)),d.createElement(bt.Item,l(s({name:"enable_time"},zte),{rules:[{required:!0,message:n("生效时间不能为空")}]}),d.createElement(Pt.RangePicker,{format:"HH:mm",onChange:(e,t)=>{a.setFieldsValue({enable_stime:t[0],enable_etime:t[1]})}})),d.createElement(bt.Item,{label:n("仅在本业务组生效"),name:"enable_in_bg",valuePropName:"checked"},d.createElement(Ka,{label:"根据告警事件中的ident归属关系判断"}))),d.createElement(Vt,{title:n("通知配置")},d.createElement(bt.Item,{label:n("通知媒介"),name:"notify_channels"},d.createElement(St.Group,null,b)),d.createElement(bt.Item,{label:n("告警接收组"),name:"notify_groups"},d.createElement(Mt,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>_(e),onBlur:()=>k("")},w)),d.createElement(bt.Item,{label:n("启用恢复通知")},d.createElement(Rt,null,d.createElement(bt.Item,{name:"notify_recovered",valuePropName:"checked",style:{marginBottom:0}},d.createElement(Lt,null)),d.createElement(Tt,{title:n("告警恢复时也发送通知")},d.createElement(V,null)))),d.createElement(bt.Item,{label:n("留观时长"),required:!0},d.createElement(Rt,null,d.createElement(bt.Item,{style:{marginBottom:0},name:"recover_duration",initialValue:0,wrapperCol:{span:10}},d.createElement(Dt,{min:0})),"秒",d.createElement(Tt,{title:n(`持续${a.getFieldValue("recover_duration")}秒没有再次触发阈值才发送恢复通知`)},d.createElement(V,null)))),d.createElement(bt.Item,{label:n("重复发送频率"),required:!0},d.createElement(Rt,null,d.createElement(bt.Item,{style:{marginBottom:0},name:"notify_repeat_step",initialValue:60,wrapperCol:{span:10},rules:[{required:!0,message:n("重复发送频率不能为空")}]},d.createElement(Dt,{min:0})),"分钟",d.createElement(Tt,{title:n(`如果告警持续未恢复，间隔${a.getFieldValue("notify_repeat_step")}分钟之后重复提醒告警接收组的成员`)},d.createElement(V,null)))),d.createElement(bt.Item,{label:n("最大发送次数"),required:!0},d.createElement(Rt,null,d.createElement(bt.Item,{style:{marginBottom:0},name:"notify_max_number",initialValue:0,wrapperCol:{span:10},rules:[{required:!0,message:n("最大发送次数不能为空")}]},d.createElement(Dt,{min:0,precision:0})),d.createElement(Tt,{title:n("如果值为0，则不做最大发送次数的限制")},d.createElement(V,null)))),d.createElement(bt.Item,{label:n("回调地址")},d.createElement(bt.List,{name:"callbacks",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map((e=>d.createElement(kt,{gutter:[10,0],key:e.key},d.createElement(_t,{span:22},d.createElement(bt.Item,{name:[e.name,"url"],fieldKey:[e.fieldKey,"url"]},d.createElement(Ct,null))),d.createElement(_t,{span:1},d.createElement(Y,{className:"control-icon-normal",onClick:()=>n(e.name)}))))),d.createElement(U,{className:"control-icon-normal",onClick:()=>t()})))))),d.createElement(bt.Item,{style:{marginTop:20}},d.createElement(xt,{type:"primary",onClick:()=>{a.validateFields().then((async r=>{if(!y&&"holtwinters"===r.algorithm)return void vt.warning("请先校验指标");const a=await function(e,t){return ai("/api/n9e/prometheus/api/v1/query",{method:Qr.Get,params:e,headers:{"X-Cluster":t}})}({query:r.prom_ql},r.cluster);if(a.error)return gt.error({message:a.error}),!1;const o=r.callbacks.map((e=>e.url)),u=l(s({},r),{enable_stime:r.enable_time[0].format("HH:mm"),enable_etime:r.enable_time[1].format("HH:mm"),disabled:r.enable_status?0:1,notify_recovered:r.notify_recovered?1:0,enable_in_bg:r.enable_in_bg?1:0,callbacks:o});let h,p="Post";if(1===e){h=u,p="Put";const e=await function(e,t,n){return ai(`/api/n9e/busi-group/${t}/alert-rule/${n}`,{method:Qr.Put,data:e})}(h,c.id,t.id);e.err?vt.error(e.error):(vt.success(n("编辑成功！")),i.push("/alert-rules"))}else{0===T.toNumber(window.localStorage.getItem("license_rules_remaining"))&&"holtwinters"===u.algorithm&&vt.error("可添加的智能告警规则数量已达上限，请联系客服"),h=[u];const{dat:t}=await Hi(h,c.id,p);let r=0;const a=Object.keys(t).map((e=>(t[e]&&r++,t[e])));r?vt.error(n(a)):(vt.success(`${n(2===e?"告警规则克隆成功":"告警规则创建成功")}`),i.push("/alert-rules"))}}))},style:{marginRight:"8px"}},n(1===e?"编辑":2===e?"克隆":"创建")),1===e&&d.createElement(xt,{danger:!0,style:{marginRight:"8px"},onClick:()=>{It.confirm({title:n("是否删除该告警规则?"),onOk:()=>{ji([t.id],c.id).then((()=>{vt.success(n("删除成功")),i.push("/alert-rules")}))},onCancel(){}})}},n("删除")),d.createElement(xt,{onClick:()=>{i.push("/alert-rules")}},n("取消"))))))};const Yte=()=>{const{t:e}=Lr();return d.createElement(Ki,{title:e("告警规则"),showBack:!0,hideCluster:!0},d.createElement($te,null))},Ute=()=>{const{t:e}=Lr(),t=hi().get("mode"),n=X(),r=f.exports.useMemo((()=>n.id),[n]),[i,a]=f.exports.useState({});f.exports.useEffect((()=>(o(),()=>{})),[r]);const o=async()=>{const e=await(t=r,ai(`/api/n9e/alert-rule/${t}`,{method:Qr.Get}));var t;a(e.dat||{})};return d.createElement(Ki,{title:e("告警规则"),showBack:!0,hideCluster:!0},i.id&&d.createElement($te,{detail:i,type:t?2:1}))};function Vte(e){const{series:t}=e;return d.createElement("div",{style:{height:200}},d.createElement(bh,{values:{custom:{drawStyle:"lines",fillOpacity:0,stack:"hidden",lineInterpolation:"smooth"},options:{legend:{displayMode:"hidden"},tooltip:{mode:"all"}}},series:t}))}const Wte={origin:"#573BA7",upper_bound:"#1A94FF",lower_bound:"#2ACA96",anomaly:"red"};function Xte(e){const{rid:t,uuid:n,promql:r,visible:i,setVisible:a}=e,[o,s]=f.exports.useState({num:1,unit:"hour",description:""}),[l,c]=f.exports.useState(15),[u,h]=f.exports.useState([]);return f.exports.useEffect((()=>{let{start:e,end:r}=au(o),i=l;l||(i=Math.max(Math.floor((r-e)/240),1)),t&&n&&Xi({rid:t,uuid:n,start:e,end:r,step:i}).then((e=>{const t=T.map(T.filter(e.data,(e=>"predict"!==e.metric.value_type)),(e=>{const t=e.metric.value_type;return{name:`${t}`,data:e.values,color:Wte[t],lineDash:"origin"===t||"anomaly"===t?[]:[4,4]}})),n=[],r=T.cloneDeep(T.find(t,{name:"origin"})),i=T.find(t,{name:"lower_bound"}),a=T.find(t,{name:"upper_bound"});n.push({name:"lower_upper_bound",data:T.map(null==i?void 0:i.data,((e,t)=>a?[...e,null==a?void 0:a.data[t][1]]:[])),color:"#ddd",opacity:.5}),r&&n.push(r),h(n)}))}),[t,n,JSON.stringify(o),l]),d.createElement(Wt,{title:"曲线详情",width:800,placement:"right",onClose:()=>{a(!1)},visible:i},d.createElement("div",null,d.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},d.createElement(y9,{readonly:!0,url:"/api/n9e/prometheus",value:r}),d.createElement(Rt,null,d.createElement(ou,{value:o,onChange:s}),d.createElement(lu,{value:l,onChange:e=>c(e),initialValue:l}))),d.createElement(Vte,{series:u})))}const qte={total:{border:"#9684C6",bg:"#EBE8F2",text:"总曲线数",title:"所有曲线"},success:{border:"#83D35C",bg:"#E8F4E3",text:"训练成功",title:"训练成功",status:1},fail:{border:"#EE5A52",bg:"#FCE7E6",text:"训练失败",title:"训练失败",status:2},training:{border:"#CCCCCC",bg:"#F4F4F4",text:"训练中",title:"训练中",status:0}};function Kte(){const[e,t]=f.exports.useState({}),[n,r]=f.exports.useState([]),[i,a]=f.exports.useState(""),[o,c]=f.exports.useState({}),[u,h]=f.exports.useState("total"),p=X();return f.exports.useEffect((()=>{var e;(e=p.id,ai("/api/fc-brain/jobs",{method:Qr.Get,params:{id:e}}).then((e=>e.data))).then((e=>{t({total:e.total,success:e.success,fail:e.fail,training:e.training}),r(e.jobs)}))}),[p.id]),d.createElement(Ki,{title:"训练结果",showBack:!0,hideCluster:!0},d.createElement("div",{className:"strategy-jobs-content"},d.createElement("div",{style:{padding:16}},d.createElement(kt,{gutter:16},T.map(e,((t,n)=>d.createElement(_t,{key:n,span:6},d.createElement("div",{style:{border:`1px solid ${qte[n].border}`,borderRadius:2,background:qte[n].bg,height:86,display:"flex",gap:16,alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>{h(n)}},d.createElement(Xt,{width:60,type:"circle",percent:t/e.total*100,strokeColor:qte[n].border,strokeWidth:12,trailColor:"#FFFFFF",format:e=>null}),d.createElement("div",null,d.createElement("div",{style:{fontSize:24,color:"#333",fontWeight:500}},t),d.createElement("div",{style:{color:"#666"}},qte[n].text))))))),d.createElement(Ft,{style:{marginTop:6},rowKey:"uuid",showHeader:!0,title:()=>d.createElement("h3",null,qte[u].title),dataSource:T.filter(n,(e=>i?e.promql.indexOf(i)>-1:"total"===u||e.status===qte[u].status)),columns:[{title:d.createElement(Rt,null,d.createElement("span",null,"PromQL"),d.createElement(Ct,{size:"small",prefix:d.createElement(M,null),value:i,onChange:e=>{a(e.target.value)}})),dataIndex:"promql",key:"promql"},{title:"结果",dataIndex:"train_detail",key:"train_detail"},{title:"操作",render:e=>d.createElement("a",{onClick:()=>{c({visible:!0,uuid:e.uuid,promql:e.promql})}},"曲线详情")}],locale:{emptyText:d.createElement("div",{style:{padding:"20px 0"}},d.createElement(Ue,{style:{fontSize:24}}),d.createElement("div",null,"曲线模型训练中"))}}))),d.createElement(Xte,l(s({rid:p.id},o),{setVisible:e=>{c(l(s({},o),{visible:e}))}})))}const{confirm:Qte}=It,Zte=()=>{const{t:e}=Lr(),t=C(),n=Wr(),[r,i]=f.exports.useState(""),{curBusiItem:a}=ri((e=>e.common)),[o,s]=f.exports.useState(void 0),[l,c]=f.exports.useState([]),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState([]),[g,v]=f.exports.useState(!1),y=[{title:e("集群"),dataIndex:"cluster",render:e=>d.createElement("div",null,e)},{title:e("标签"),dataIndex:"tags",render:e=>d.createElement(d.Fragment,null,e?e.map(((e,t)=>e?d.createElement("div",{key:t,style:{lineHeight:"16px"}},`${e.key} ${e.func} ${"in"===e.func?e.value.split(" ").join(", "):e.value}`):null)):"")},{title:e("屏蔽原因"),dataIndex:"cause",render:(e,t)=>d.createElement(d.Fragment,null,d.createElement(Tt,{placement:"topLeft",title:e},d.createElement("div",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"16px"}},e)),"by ",t.create_by)},{title:e("屏蔽时间"),dataIndex:"btime",render:(t,n)=>d.createElement("div",{className:"shield-time"},d.createElement("div",null,e("开始:"),W(1e3*(null==n?void 0:n.btime)).format("YYYY-MM-DD HH:mm:ss")),d.createElement("div",null,e("结束:"),W(1e3*(null==n?void 0:n.etime)).format("YYYY-MM-DD HH:mm:ss")))},{title:e("操作"),width:"98px",dataIndex:"operation",render:(r,i)=>d.createElement(d.Fragment,null,d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{n({type:"shield/setCurShieldData",data:i}),(null==a?void 0:a.id)&&t.push(`/alert-mutes/edit/${i.id}?mode=clone`)}},e("克隆")),d.createElement("div",{className:"table-operator-area-warning",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{Qte({title:e("确定删除该告警屏蔽?"),icon:d.createElement(je,null),onOk:()=>{x(i.id)},onCancel(){}})}},e("删除"))))}];f.exports.useEffect((()=>{b()}),[a]),f.exports.useEffect((()=>{E()}),[r,l,u]);const x=t=>{var n,r;(n={ids:[t]},r=a.id,ai(`/api/n9e/busi-group/${r}/alert-mutes`,{method:Qr.Delete,data:n})).then((t=>{T(),t.err?vt.success(t.err):vt.success(e("删除成功"))}))},E=()=>{const e=JSON.parse(JSON.stringify(u)).filter((e=>{const t=e.tags.find((e=>e.key.indexOf(r)>-1||e.value.indexOf(r)>-1||e.func.indexOf(r)>-1));return(e.cause.indexOf(r)>-1||!!t)&&(l&&(null==l?void 0:l.indexOf(e.cluster))>-1||0===(null==l?void 0:l.length))}));m(e||[])},b=async()=>{if(a.id){v(!0);const{success:t,dat:n}=await(e={id:a.id},ai(`/api/n9e/busi-group/${e.id}/alert-mutes`,{method:Qr.Get}));t&&(h(n||[]),v(!1))}var e},T=()=>{b()};return d.createElement(Ki,{title:e("屏蔽规则"),icon:d.createElement(G,null),hideCluster:!0},d.createElement("div",{className:"shield-content"},d.createElement(ba,{busiGroup:{onChange:e=>{s(e)}}}),(null==a?void 0:a.id)?d.createElement("div",{className:"shield-index"},d.createElement("div",{className:"header"},d.createElement("div",{className:"header-left"},d.createElement(Ra,{className:"strategy-table-search-left-refresh",onClick:()=>{T()}}),d.createElement(ao,{onClusterChange:e=>c(e)}),d.createElement(Ct,{onPressEnter:e=>{let t=e.target.value;i(t)},className:"searchInput",prefix:d.createElement(M,null),placeholder:e("搜索标签、屏蔽原因")})),d.createElement("div",{className:"header-right"},d.createElement(xt,{type:"primary",className:"add",ghost:!0,onClick:()=>{t.push("/alert-mutes/add")}},e("新增屏蔽规则")))),d.createElement(Ft,{rowKey:"id",pagination:{total:p.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:La,defaultPageSize:30},loading:g,dataSource:p,columns:y})):d.createElement(Ca,{text:"屏蔽规则"})))},{Option:Jte}=Mt,ene=({field:e,remove:t,form:n})=>{const{t:r}=Lr(),[i,a]=f.exports.useState(""),[o,s]=f.exports.useState("==");f.exports.useEffect((()=>{const t=n.getFieldValue("tags");l(t[e.name].func)}),[e]);const l=e=>{let t="";"in"===e?t="可以输入多个值，用回车分割":"=~"===e&&(t="请输入正则表达式匹配标签value"),s(e),a(t)};return d.createElement(d.Fragment,null,d.createElement(kt,{gutter:[10,10],style:{marginBottom:"10px"}},d.createElement(_t,{span:5},d.createElement(bt.Item,{style:{marginBottom:0},name:[e.name,"key"],fieldKey:[e.name,"key"],rules:[{required:!0,message:r("key不能为空")}]},d.createElement(Ct,{placeholder:r("请输入屏蔽事件标签key")}))),d.createElement(_t,{span:3},d.createElement(bt.Item,{style:{marginBottom:0},name:[e.name,"func"],fieldKey:[e.name,"func"],initialValue:"=="},d.createElement(Mt,{suffixIcon:d.createElement(H,null),onChange:l},d.createElement(Jte,{value:"=="},"=="),d.createElement(Jte,{value:"=~"},"=~"),d.createElement(Jte,{value:"in"},"in")))),d.createElement(_t,{span:15},d.createElement(bt.Item,{style:{marginBottom:0},name:[e.name,"value"],fieldKey:[e.name,"value"],rules:[{required:!0,message:r("value不能为空")}]},"in"==o?d.createElement(Mt,{mode:"tags",open:!1,style:{width:"100%"},placeholder:r(i),tokenSeparators:[" "]}):d.createElement(Ct,{className:"ant-input",placeholder:r(i)}))),d.createElement(_t,null,d.createElement(Y,{style:{marginTop:"8px"},onClick:()=>t(e.name)}))))},{Option:tne}=Mt,{TextArea:nne}=Ct,rne=({detail:e={},type:t,tagsObj:n={}})=>{const r=(new Date).getTime(),i=(new Date).getTime()+36e5,{t:a,i18n:o}=Lr(),{clusters:c}=ri((e=>e.common)),[u]=bt.useForm(null),h=C(),[p,m]=f.exports.useState(!1),[g,v]=f.exports.useState("1h"),{curBusiItem:y,busiGroups:x}=ri((e=>e.common)),[E,b]=f.exports.useState(x);f.exports.useEffect((()=>{E.length||b(x)}),[JSON.stringify(x)]),f.exports.useEffect((()=>{const e=u.getFieldValue("btime"),t=u.getFieldValue("etime");return t&&e&&(A.duration(t-e).days(),A.duration(t-e).hours(),A.duration(t-e).minutes(),A.duration(t-e).seconds()),y?u.setFieldsValue({busiGroup:y.id}):E.length>0?u.setFieldsValue({busiGroup:E[0].id}):(vt.warning("无可用业务组"),h.push("/alert-mutes")),()=>{}}),[u]),f.exports.useEffect((()=>{var e;if((null==n?void 0:n.tags)&&(null==n?void 0:n.tags.length)>0){const t=null==(e=null==n?void 0:n.tags)?void 0:e.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));u.setFieldsValue({tags:t||[{}],cluster:n.cluster})}}),[n]);const w=()=>{const e=u.getFieldValue("btime"),t=u.getFieldValue("etime");if(t&&e){const n=Math.floor(A.duration(t-e).asDays()),r=Math.floor(A.duration(t-e).hours()),i=Math.floor(A.duration(t-e).minutes()),a=Math.floor(A.duration(t-e).seconds());v(`${n?`${n}d `:""}${r?`${r}h `:""}${i?`${i}m `:""}${a?`${a}s`:""}`)}},[S,k]=f.exports.useState(!1),_=f.exports.useRef(0),O=f.exports.useMemo((()=>T.debounce((e=>{_.current+=1;const t=_.current;b([]),k(!0),oi(e).then((e=>{t===_.current&&(b(e.dat||[]),k(!1))}))}),500)),[]),I=d.createElement(bt,l(s({form:u},{labelCol:{span:24},wrapperCol:{span:24}}),{layout:"vertical",className:"operate-form",onFinish:e=>{var t;m(!0);const n=null==(t=null==e?void 0:e.tags)?void 0:t.map((e=>l(s({},e),{value:Array.isArray(e.value)?e.value.join(" "):e.value}))),r=l(s({},e),{btime:A(e.btime).unix(),etime:A(e.etime).unix(),tags:n}),i=u.getFieldValue("busiGroup");var o,c;(o=r,c=i,ai(`/api/n9e/busi-group/${c}/alert-mutes`,{method:Qr.Post,data:o})).then((e=>{vt.success(a("新建告警屏蔽成功")),h.push("/alert-mutes")})).finally((()=>{m(!1)}))},onFinishFailed:()=>{m(!1)},initialValues:l(s({},e),{btime:(null==e?void 0:e.btime)?A(1e3*e.btime):A(r),etime:(null==e?void 0:e.etime)?A(1e3*e.etime):A(i),cluster:c[0]||"Default"})}),d.createElement(Vt,null,d.createElement(bt.Item,{label:a("业务组："),name:"busiGroup"},d.createElement(Mt,{showSearch:!0,filterOption:!1,suffixIcon:d.createElement(H,null),onSearch:O,notFoundContent:S?d.createElement(qt,{size:"small"}):null},T.map(E,(e=>d.createElement(tne,{value:e.id,key:e.id},e.name))))),d.createElement(bt.Item,{label:a("生效集群："),name:"cluster",rules:[{required:!0,message:a("生效集群不能为空")}]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},null==c?void 0:c.map((e=>d.createElement(tne,{value:e,key:e},e))))),d.createElement(kt,{gutter:10},d.createElement(_t,{span:8},d.createElement(bt.Item,{label:a("屏蔽开始时间："),name:"btime"},d.createElement(jt,{showTime:!0,onChange:w}))),d.createElement(_t,{span:8},d.createElement(bt.Item,{label:a("屏蔽时长：")},d.createElement(Mt,{suffixIcon:d.createElement(H,null),placeholder:a("请选择屏蔽时长"),onChange:e=>{v(e);const t=(new Date).getTime();if("forever"===e){const e=6048e9;return void u.setFieldsValue({btime:A(t),etime:A(t).add({seconds:e})})}const n=e.charAt(e.length-1),r=e.substr(0,e.length-1);u.setFieldsValue({btime:A(t),etime:A(t).add({[n]:r})})},value:g},Pa.map(((e,t)=>d.createElement(tne,{key:t,value:e.value},e.value)))))),d.createElement(_t,{span:8},d.createElement(bt.Item,{label:a("屏蔽结束时间："),name:"etime"},d.createElement(jt,{showTime:!0,onChange:w})))),d.createElement(kt,{gutter:[10,10],style:{marginBottom:"8px"}},d.createElement(_t,{span:5},a("屏蔽事件标签Key："),d.createElement(Tt,{title:a("这里的标签是指告警事件的标签，通过如下标签匹配规则过滤告警事件")},d.createElement(V,null))),d.createElement(_t,{span:3},a("运算符：")),d.createElement(_t,{span:16},a("标签Value："))),d.createElement(bt.List,{name:"tags",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map(((e,t)=>d.createElement(ene,{field:e,key:t,remove:n,form:u}))),d.createElement(bt.Item,null,d.createElement(U,{className:"control-icon-normal",onClick:()=>t()}))))),d.createElement(bt.Item,{label:a("屏蔽原因"),name:"cause",rules:[{required:!0,message:a("请填写屏蔽原因")}]},d.createElement(nne,{rows:3})),d.createElement(bt.Item,s({},{labelCol:{span:0},wrapperCol:{span:24}}),d.createElement(kt,{gutter:[10,10]},d.createElement(_t,{span:1},d.createElement(xt,{type:"primary",htmlType:"submit"},a(2===t?"克隆":"创建"))),d.createElement(_t,{span:1,style:{marginLeft:40}},d.createElement(xt,{onClick:()=>window.history.back()},a("取消")))))));return d.createElement("div",{className:"operate-form-index"},I)},ine=()=>{const{t:e}=Lr(),t=v(),[n,r]=f.exports.useState(t.state);return d.createElement(Ki,{title:e("告警屏蔽"),showBack:!0,hideCluster:!0},d.createElement("div",{className:"shield-add"},d.createElement(rne,{tagsObj:n||void 0})))};const ane=()=>{const{t:e}=Lr(),t=C();ri((e=>e.common));const{curShieldData:n}=ri((e=>e.shield));n.id||t.push("/alert-mutes");const r=function(){const{search:e}=v();return d.useMemo((()=>new URLSearchParams(e)),[e])}().get("mode"),i=X();return f.exports.useMemo((()=>i.id),[i]),d.createElement(Ki,{title:e("告警屏蔽"),showBack:!0,hideCluster:!0},d.createElement("div",{className:"shield-add"},n.id&&d.createElement(rne,{detail:n,type:r?2:1})))},one=function(e,t){return ai(`/api/n9e/busi-group/${t}/alert-subscribes`,{method:Qr.Delete,data:e})};const{confirm:sne}=It,lne=()=>{const{t:e}=Lr(),t=C(),[n,r]=f.exports.useState(""),{curBusiItem:i}=ri((e=>e.common)),[a,o]=f.exports.useState(void 0),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState(!1),v=[{title:e("集群"),dataIndex:"cluster",render:e=>d.createElement("div",null,e)},{title:e("告警规则"),dataIndex:"rule_name",render:e=>d.createElement("div",null,e)},{title:e("订阅标签"),dataIndex:"tags",render:e=>d.createElement(d.Fragment,null,e?e.map(((e,t)=>e?d.createElement("div",{key:t},`${e.key} ${e.func} ${"in"===e.func?e.value.split(" ").join(", "):e.value}`):null)):"")},{title:e("告警接收组"),dataIndex:"user_groups",render:(e,t)=>{var n;return d.createElement(d.Fragment,null,null==(n=t.user_groups)?void 0:n.map((e=>d.createElement(Da,{text:e.name,key:e.id}))))}},{title:e("编辑人"),ellipsis:!0,dataIndex:"update_by"},{title:e("操作"),width:"128px",dataIndex:"operation",render:(n,r)=>d.createElement(d.Fragment,null,d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{(null==i?void 0:i.id)&&t.push(`/alert-subscribes/edit/${r.id}`)}},e("编辑")),d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{(null==i?void 0:i.id)&&t.push(`/alert-subscribes/edit/${r.id}?mode=clone`)}},e("克隆")),d.createElement("div",{className:"table-operator-area-warning",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{sne({title:e("确定删除该订阅规则?"),icon:d.createElement(je,null),onOk:()=>{y(r.id)},onCancel(){}})}},e("删除"))))}];f.exports.useEffect((()=>{E()}),[i]),f.exports.useEffect((()=>{x()}),[n,s,c]);const y=t=>{one({ids:[t]},i.id).then((t=>{b(),t.err?vt.success(t.err):vt.success(e("删除成功"))}))},x=()=>{const e=JSON.parse(JSON.stringify(c)).filter((e=>{var t,r,i;const a=null==(t=null==e?void 0:e.tags)?void 0:t.find((e=>e.key.indexOf(n)>-1||e.value.indexOf(n)>-1||e.func.indexOf(n)>-1)),o=null==(r=null==e?void 0:e.user_groups)?void 0:r.find((e=>{var t;return(null==(t=null==e?void 0:e.name)?void 0:t.indexOf(n))>-1}));return((null==(i=null==e?void 0:e.rule_name)?void 0:i.indexOf(n))>-1||!!a||!!o)&&(s&&(null==s?void 0:s.indexOf(e.cluster))>-1||0===(null==s?void 0:s.length))}));p(e||[])},E=async()=>{if(i.id){g(!0);const{success:t,dat:n}=await(e={id:i.id},ai(`/api/n9e/busi-group/${e.id}/alert-subscribes`,{method:Qr.Get}));t&&(u(n||[]),g(!1))}var e},b=()=>{E()};return d.createElement(Ki,{title:e("订阅规则"),icon:d.createElement(z,null),hideCluster:!0},d.createElement("div",{className:"shield-content"},d.createElement(ba,{busiGroup:{onChange:e=>{o(e)}}}),(null==i?void 0:i.id)?d.createElement("div",{className:"shield-index"},d.createElement("div",{className:"header"},d.createElement("div",{className:"header-left"},d.createElement(Ra,{className:"strategy-table-search-left-refresh",onClick:()=>{b()}}),d.createElement(ao,{onClusterChange:e=>l(e)}),d.createElement(Ct,{onPressEnter:e=>{let t=e.target.value;r(t)},className:"searchInput",prefix:d.createElement(M,null),placeholder:e("搜索规则、标签、接收组")})),d.createElement("div",{className:"header-right"},d.createElement(xt,{type:"primary",className:"add",ghost:!0,onClick:()=>{t.push("/alert-subscribes/add")}},e("新增订阅规则")))),d.createElement(Ft,{rowKey:"id",pagination:{total:h.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:La,defaultPageSize:30},loading:m,dataSource:h,columns:v})):d.createElement(Ca,{text:"订阅规则"})))},{Option:cne}=Mt,une=({visible:e,ruleModalClose:t,subscribe:n})=>{const{t:r}=Lr(),{curBusiItem:i}=ri((e=>e.common)),[a,o]=f.exports.useState([]),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState(i.id),[m,g]=f.exports.useState("");f.exports.useEffect((()=>{p(i.id)}),[i]),f.exports.useEffect((()=>{x()}),[h]),f.exports.useEffect((()=>{v("")}),[]),f.exports.useEffect((()=>{E()}),[m,s]);const v=e=>{console.log(111),Ua({all:1,query:e,limit:200}).then((e=>{o(e.dat||[])}))},y=f.exports.useCallback($.exports.debounce(v,400),[]),x=async()=>{const{success:e,dat:t}=await Di({id:h});e&&l(t||[])},E=()=>{const e=JSON.parse(JSON.stringify(s)).filter((e=>e.name.indexOf(m)>-1||e.append_tags.join(" ").indexOf(m)>-1));u(e||[])},b=[{title:r("集群"),dataIndex:"cluster",render:e=>d.createElement("div",null,e)},{title:r("级别"),dataIndex:"severity",render:e=>d.createElement(Ot,{color:Fi[e-1]},"S",e)},{title:r("名称"),dataIndex:"name",render:(e,t)=>d.createElement("div",{className:"table-active-text",onClick:()=>{}},e)},{title:r("告警接收者"),dataIndex:"notify_groups_obj",render:(e,t)=>e.length&&e.map(((e,t)=>d.createElement(Da,{text:e.nickname||e.username||e.name,key:t})))||d.createElement("div",null)},{title:r("附加标签"),dataIndex:"append_tags",render:e=>{const t=e||[];return t.length&&t.map(((e,t)=>d.createElement(Da,{text:e,key:t})))||d.createElement("div",null)}},{title:r("更新时间"),dataIndex:"update_at",render:e=>W(1e3*Number(e)).format("YYYY-MM-DD HH:mm:ss")},{title:r("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Lt,{checked:e===ka.Enable,disabled:!0,size:"small",onChange:()=>{}})},{title:r("操作"),dataIndex:"operator",fixed:"right",width:100,render:(e,t)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{C(t)}},r("订阅")))}],C=e=>{n(e)};return d.createElement(d.Fragment,null,d.createElement(It,{title:r("订阅告警规则"),footer:"",forceRender:!0,visible:e,onCancel:()=>{t()},width:"80%"},d.createElement("div",null,d.createElement(Mt,{style:{width:"280px"},value:h,onChange:e=>{p(e)},showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>y(e),onBlur:()=>v("")},a.map((e=>d.createElement(cne,{value:e.id,key:e.id},e.name)))),d.createElement(Ct,{style:{marginLeft:10,width:"280px"},onPressEnter:e=>{let t=e.target.value;g(t)},prefix:d.createElement(M,null),placeholder:r("规则名称、附加标签")})),d.createElement("div",{className:"rule_modal_table"},d.createElement(Ft,{rowKey:"id",pagination:{total:c.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:La,defaultPageSize:30},dataSource:c,columns:b}))))},{Option:hne}=Mt,pne=({field:e,remove:t,form:n})=>{const{t:r}=Lr(),[i,a]=f.exports.useState(""),[o,s]=f.exports.useState("==");f.exports.useEffect((()=>{const t=n.getFieldValue("tags");l(t[e.name].func)}),[]);const l=e=>{let t="";"in"===e?t="可以输入多个值，用回车分割":"=~"===e&&(t="请输入正则表达式匹配标签value"),s(e),a(t)};return d.createElement(d.Fragment,null,d.createElement(kt,{gutter:[10,10],style:{marginBottom:"10px"}},d.createElement(_t,{span:5},d.createElement(bt.Item,{style:{marginBottom:0},name:[e.name,"key"],fieldKey:[e.name,"key"],rules:[{required:!0,message:r("key不能为空")}]},d.createElement(Ct,{placeholder:r("请输入订阅事件标签key")}))),d.createElement(_t,{span:3},d.createElement(bt.Item,{style:{marginBottom:0},name:[e.name,"func"],fieldKey:[e.name,"func"],initialValue:"=="},d.createElement(Mt,{suffixIcon:d.createElement(H,null),onChange:l},d.createElement(hne,{value:"=="},"=="),d.createElement(hne,{value:"=~"},"=~"),d.createElement(hne,{value:"in"},"in")))),d.createElement(_t,{span:15},d.createElement(bt.Item,{style:{marginBottom:0},name:[e.name,"value"],fieldKey:[e.name,"value"],rules:[{required:!0,message:r("value不能为空")}]},"in"==o?d.createElement(Mt,{mode:"tags",open:!1,style:{width:"100%"},placeholder:r(i),tokenSeparators:[" "]}):d.createElement(Ct,{className:"ant-input",placeholder:r(i)}))),d.createElement(_t,null,d.createElement(Y,{style:{marginTop:"8px"},onClick:()=>t(e.name)}))))},{Option:dne}=Mt,fne=({detail:e={},type:t})=>{var n,r;const{t:i,i18n:a}=Lr(),{clusters:o}=ri((e=>e.common)),[c]=bt.useForm(null),u=C(),{curBusiItem:h}=ri((e=>e.common)),[p,m]=f.exports.useState(!1),[g,v]=f.exports.useState(!1),[y,x]=f.exports.useState(),[E,b]=f.exports.useState([]),[w,S]=f.exports.useState(!0),[k,_]=f.exports.useState([]);f.exports.useEffect((()=>{O(),I("")}),[]),f.exports.useEffect((()=>{x({id:e.rule_id||0,name:e.rule_name})}),[e.rule_id]);const A=(e.user_groups?e.user_groups.filter((e=>!k.find((t=>e.id===t.id)))):[]).concat(k).map((e=>d.createElement(dne,{value:String(e.id),key:e.id},e.name))),O=async()=>{const e=await Xa();b(e||[])},I=async e=>{const t=await Ya({query:e}),n=t.dat||t;_(n||[])},M=f.exports.useCallback(T.debounce(I,800),[]),N=e=>{v(!1),x(e),c.setFieldsValue({rile_id:e.id||0})};return d.createElement(d.Fragment,null,d.createElement("div",{className:"operate-form-index",id:w?"littleAffect":""},d.createElement(bt,l(s({form:c},{labelCol:{span:24},wrapperCol:{span:24}}),{layout:"vertical",className:"operate-form",onFinish:n=>{var r;m(!0);const a=null==(r=null==n?void 0:n.tags)?void 0:r.map((e=>l(s({},e),{value:Array.isArray(e.value)?e.value.join(" "):e.value}))),o=l(s({},n),{tags:a,redefine_severity:n.redefine_severity?1:0,redefine_channels:n.redefine_channels?1:0,rule_id:y.id,user_group_ids:n.user_group_ids?n.user_group_ids.join(" "):"",new_channels:n.new_channels?n.new_channels.join(" "):""});var c,p;1===t?(c=[l(s({},o),{id:e.id})],p=h.id,ai(`/api/n9e/busi-group/${p}/alert-subscribes`,{method:Qr.Put,data:c})).then((e=>{vt.success(i("编辑订阅规则成功")),u.push("/alert-subscribes")})).finally((()=>{m(!1)})):function(e,t){return ai(`/api/n9e/busi-group/${t}/alert-subscribes`,{method:Qr.Post,data:e})}(o,h.id).then((e=>{vt.success(i("新建订阅规则成功")),u.push("/alert-subscribes")})).finally((()=>{m(!1)}))},onFinishFailed:()=>{m(!1)},initialValues:l(s({},e),{cluster:o[0]||"Default",redefine_severity:!!(null==e?void 0:e.redefine_severity),redefine_channels:!!(null==e?void 0:e.redefine_channels),user_group_ids:(null==e?void 0:e.user_group_ids)?null==(n=null==e?void 0:e.user_group_ids)?void 0:n.split(" "):[],new_channels:null==(r=null==e?void 0:e.new_channels)?void 0:r.split(" ")})}),d.createElement(Vt,null,d.createElement(bt.Item,{label:i("生效集群："),name:"cluster",rules:[{required:!0,message:i("生效集群不能为空")}]},d.createElement(Mt,{suffixIcon:d.createElement(H,null)},null==o?void 0:o.map(((e,t)=>d.createElement(dne,{value:e,key:t},e))))),d.createElement(bt.Item,{label:i("订阅告警规则：")},!!(null==y?void 0:y.id)&&d.createElement(xt,{type:"primary",ghost:!0,style:{marginRight:"8px"},onClick:()=>{(null==y?void 0:y.id)&&u.push(`/alert-rules/edit/${null==y?void 0:y.id}`)}},null==y?void 0:y.name),d.createElement(_e,{style:{cursor:"pointer",fontSize:"18px"},onClick:()=>{v(!0)}}),!!(null==y?void 0:y.id)&&d.createElement(Ee,{style:{cursor:"pointer",fontSize:"18px",marginLeft:5},onClick:()=>N({})})),d.createElement(kt,{gutter:[10,10],style:{marginBottom:"8px"}},d.createElement(_t,{span:5},i("订阅事件标签Key："),d.createElement(Tt,{title:i("这里的标签是指告警事件的标签，通过如下标签匹配规则过滤告警事件")},d.createElement(V,null))),d.createElement(_t,{span:3},i("运算符：")),d.createElement(_t,{span:16},i("标签Value："))),d.createElement(bt.List,{name:"tags",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map(((r,i)=>d.createElement(pne,{field:r,fields:e,key:i,remove:n,add:t,form:c}))),d.createElement(bt.Item,null,d.createElement(U,{className:"control-icon-normal",onClick:()=>t()}))))),d.createElement(bt.Item,{label:i("告警级别："),name:"redefine_severity",valuePropName:"checked"},d.createElement(St,{value:1,style:{lineHeight:"32px"},onChange:e=>{c.setFieldsValue({redefine_severity:e.target.checked?1:0}),S(!w)}},i("重新定义"))),d.createElement(bt.Item,{label:i("新的告警级别："),name:"new_severity",initialValue:2,style:{display:c.getFieldValue("redefine_severity")?"block":"none"}},d.createElement(Bt.Group,null,d.createElement(Bt,{key:1,value:1},i("一级报警")),d.createElement(Bt,{key:2,value:2},i("二级报警")),d.createElement(Bt,{key:3,value:3},i("三级报警")))),d.createElement(bt.Item,{label:i("通知媒介："),name:"redefine_channels",valuePropName:"checked"},d.createElement(St,{value:1,style:{lineHeight:"32px"},onChange:e=>{c.setFieldsValue({redefine_channels:e.target.checked?1:0}),S(!w)}},i("重新定义"))),d.createElement(bt.Item,{label:i("新的通知媒介："),name:"new_channels",style:{display:c.getFieldValue("redefine_channels")?"block":"none"}},d.createElement(St.Group,null,E.map((e=>d.createElement(St,{value:e.key,key:e.label},e.label))))),d.createElement(bt.Item,{label:i("订阅告警接收组："),name:"user_group_ids",rules:[{required:!0,message:i("告警接收组不能为空")}]},d.createElement(Mt,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>M(e),onBlur:()=>I("")},A)),d.createElement(bt.Item,s({},{labelCol:{span:24},wrapperCol:{span:24}}),d.createElement(xt,{type:"primary",htmlType:"submit",style:{marginRight:"8px"}},i(1===t?"编辑":2===t?"克隆":"创建")),1===t&&d.createElement(xt,{danger:!0,style:{marginRight:"8px"},onClick:()=>{It.confirm({title:i("是否删除该告警规则?"),onOk:()=>{(null==e?void 0:e.id)&&one({ids:[e.id]},h.id).then((()=>{vt.success(i("删除成功")),u.push("/alert-subscribes")}))},onCancel(){}})}},i("删除")),d.createElement(xt,{onClick:()=>window.history.back()},i("取消"))))),d.createElement(une,{visible:g,ruleModalClose:()=>{v(!1)},subscribe:N})))},mne=()=>{const{t:e}=Lr();return d.createElement(Ki,{title:e("订阅规则"),showBack:!0},d.createElement("div",{className:"shield-add"},d.createElement(fne,null)))};const gne=()=>{const{t:e}=Lr();C(),ri((e=>e.common));const[t,n]=f.exports.useState(),r=function(){const{search:e}=v();return d.useMemo((()=>new URLSearchParams(e)),[e])}().get("mode"),i=X(),a=f.exports.useMemo((()=>i.id),[i]);f.exports.useEffect((()=>{o()}),[a]);const o=async()=>{const{dat:e}=await(t=a,ai(`/api/n9e/alert-subscribe/${t}`,{method:Qr.Get}));var t;const r=e.tags.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));n(l(s({},e),{tags:r}))};return d.createElement(Ki,{title:e("订阅规则"),showBack:!0},d.createElement("div",{className:"shield-add"},(null==t?void 0:t.id)&&d.createElement(fne,{detail:t,type:r?2:1})))};var vne={exports:{}},yne=he(vne.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));t.default=r.default,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){return e&&e.__esModule?e:{default:e}}t.default=c;var a=n(3),o=i(n(4)),s=n(14),l=i(n(15));function c(e){var t=e.activeClassName,n=void 0===t?"":t,i=e.activeIndex,o=void 0===i?-1:i,c=e.activeStyle,u=e.autoEscape,h=e.caseSensitive,p=void 0!==h&&h,d=e.className,f=e.findChunks,m=e.highlightClassName,g=void 0===m?"":m,v=e.highlightStyle,y=void 0===v?{}:v,x=e.highlightTag,E=void 0===x?"mark":x,b=e.sanitize,C=e.searchWords,T=e.textToHighlight,w=e.unhighlightClassName,S=void 0===w?"":w,k=e.unhighlightStyle,_=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightClassName","unhighlightStyle"]),A=(0,a.findAll)({autoEscape:u,caseSensitive:p,findChunks:f,sanitize:b,searchWords:C,textToHighlight:T}),O=E,I=-1,M="",N=void 0,F=(0,l.default)((function(e){var t={};for(var n in e)t[n.toLowerCase()]=e[n];return t}));return(0,s.createElement)("span",r({className:d},_,{children:A.map((function(e,t){var r=T.substr(e.start,e.end-e.start);if(e.highlight){I++;var i=void 0;i="object"==typeof g?p?g[r]:(g=F(g))[r.toLowerCase()]:g;var a=I===+o;M=i+" "+(a?n:""),N=!0===a&&null!=c?Object.assign({},y,c):y;var l={children:r,className:M,key:t,style:N};return"string"!=typeof O&&(l.highlightIndex=I),(0,s.createElement)(O,l)}return(0,s.createElement)("span",{children:r,className:S,key:t,style:k})}))}))}c.propTypes={activeClassName:o.default.string,activeIndex:o.default.number,activeStyle:o.default.object,autoEscape:o.default.bool,className:o.default.string,findChunks:o.default.func,highlightClassName:o.default.oneOfType([o.default.object,o.default.string]),highlightStyle:o.default.object,highlightTag:o.default.oneOfType([o.default.node,o.default.func,o.default.string]),sanitize:o.default.func,searchWords:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.instanceOf(RegExp)])).isRequired,textToHighlight:o.default.string.isRequired,unhighlightClassName:o.default.string,unhighlightStyle:o.default.object},e.exports=t.default},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return r.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return r.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return r.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return r.findChunks}})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=function(e){var t=e.autoEscape,a=e.caseSensitive,o=void 0!==a&&a,s=e.findChunks,l=void 0===s?r:s,c=e.sanitize,u=e.searchWords,h=e.textToHighlight;return i({chunksToHighlight:n({chunks:l({autoEscape:t,caseSensitive:o,sanitize:c,searchWords:u,textToHighlight:h})}),totalLength:h?h.length:0})};var n=t.combineChunks=function(e){var t=e.chunks;return t=t.sort((function(e,t){return e.start-t.start})).reduce((function(e,t){if(0===e.length)return[t];var n=e.pop();if(t.start<=n.end){var r=Math.max(n.end,t.end);e.push({start:n.start,end:r})}else e.push(n,t);return e}),[])},r=function(e){var t=e.autoEscape,n=e.caseSensitive,r=e.sanitize,i=void 0===r?a:r,o=e.searchWords,s=e.textToHighlight;return s=i(s),o.filter((function(e){return e})).reduce((function(e,r){r=i(r),t&&(r=r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));for(var a=new RegExp(r,n?"g":"gi"),o=void 0;o=a.exec(s);){var l=o.index,c=a.lastIndex;c>l&&e.push({start:l,end:c}),o.index==a.lastIndex&&a.lastIndex++}return e}),[])};t.findChunks=r;var i=t.fillInChunks=function(e){var t=e.chunksToHighlight,n=e.totalLength,r=[],i=function(e,t,n){t-e>0&&r.push({start:e,end:t,highlight:n})};if(0===t.length)i(0,n,!1);else{var a=0;t.forEach((function(e){i(a,e.start,!1),i(e.start,e.end,!0),a=e.end})),i(a,n,!1)}return r};function a(e){return e}}])},function(e,t,n){(function(t){e.exports=n(13)()}).call(t,n(5))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(rh){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(rh){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(rh){r=o}}();var l,c=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(rh){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(t){var r=n(7),i=n(8),a=n(9),o=n(10),s=n(11),l=n(12);e.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,c="<<anonymous>>",u={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:d(r.thatReturnsNull),arrayOf:function(e){return d((function(t,n,r,i,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var o=t[n];if(!Array.isArray(o))return new p("Invalid "+i+" `"+a+"` of type `"+g(o)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<o.length;l++){var c=e(o,l,r,i,a+"["+l+"]",s);if(c instanceof Error)return c}return null}))},element:d((function(t,n,r,i,a){var o=t[n];return e(o)?null:new p("Invalid "+i+" `"+a+"` of type `"+g(o)+"` supplied to `"+r+"`, expected a single ReactElement.")})),instanceOf:function(e){return d((function(t,n,r,i,a){if(!(t[n]instanceof e)){var o=e.name||c;return new p("Invalid "+i+" `"+a+"` of type `"+((s=t[n]).constructor&&s.constructor.name?s.constructor.name:c)+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}var s;return null}))},node:d((function(e,t,n,r,i){return m(e[t])?null:new p("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return d((function(t,n,r,i,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var o=t[n],l=g(o);if("object"!==l)return new p("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in o)if(o.hasOwnProperty(c)){var u=e(o,c,r,i,a+"."+c,s);if(u instanceof Error)return u}return null}))},oneOf:function(e){return Array.isArray(e)?d((function(t,n,r,i,a){for(var o=t[n],s=0;s<e.length;s++)if(h(o,e[s]))return null;return new p("Invalid "+i+" `"+a+"` of value `"+o+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")})):r.thatReturnsNull},oneOfType:function(e){if(!Array.isArray(e))return r.thatReturnsNull;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return a(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",y(n),t),r.thatReturnsNull}return d((function(t,n,r,i,a){for(var o=0;o<e.length;o++)if(null==(0,e[o])(t,n,r,i,a,s))return null;return new p("Invalid "+i+" `"+a+"` supplied to `"+r+"`.")}))},shape:function(e){return d((function(t,n,r,i,a){var o=t[n],l=g(o);if("object"!==l)return new p("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var h=u(o,c,r,i,a+"."+c,s);if(h)return h}}return null}))},exact:function(e){return d((function(t,n,r,i,a){var l=t[n],c=g(l);if("object"!==c)return new p("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var u=o({},t[n],e);for(var h in u){var d=e[h];if(!d)return new p("Invalid "+i+" `"+a+"` key `"+h+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=d(l,h,r,i,a+"."+h,s);if(f)return f}return null}))}};function h(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e){this.message=e,this.stack=""}function d(e){function n(n,r,a,o,l,u,h){return o=o||c,u=u||a,h!==s&&t&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),null==r[a]?n?null===r[a]?new p("The "+l+" `"+u+"` is marked as required in `"+o+"`, but its value is `null`."):new p("The "+l+" `"+u+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(r,a,o,l,u)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function f(e){return d((function(t,n,r,i,a,o){var s=t[n];return g(s)!==e?new p("Invalid "+i+" `"+a+"` of type `"+v(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,a=r.call(t);if(r!==t.entries){for(;!(i=a.next()).done;)if(!m(i.value))return!1}else for(;!(i=a.next()).done;){var o=i.value;if(o&&!m(o[1]))return!1}return!0;default:return!1}}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function v(e){if(null==e)return""+e;var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function y(e){var t=v(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return p.prototype=Error.prototype,u.checkPropTypes=l,u.PropTypes=u,u}}).call(t,n(5))},function(e,t){function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){(function(t){e.exports=function(e,t,n,r,i,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}}).call(t,n(5))},function(e,t,n){(function(t){var r=n(7);e.exports=r}).call(t,n(5))},function(e,t){var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var o,s,l=a(e),c=1;c<arguments.length;c++){for(var u in o=Object(arguments[c]))r.call(o,u)&&(l[u]=o[u]);if(n){s=n(o);for(var h=0;h<s.length;h++)i.call(o,s[h])&&(l[s[h]]=o[s[h]])}}return l}},function(e,t){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){(function(t){e.exports=function(e,t,n,r,i){}}).call(t,n(5))},function(e,t,n){var r=n(7),i=n(8),a=n(11);e.exports=function(){function e(e,t,n,r,o,s){s!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t){e.exports=f.exports},function(e,t){var n=function(e,t){return e===t};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=void 0,i=[],a=void 0,o=!1,s=function(e,n){return t(e,i[n])},l=function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];return o&&r===this&&n.length===i.length&&n.every(s)?a:(o=!0,r=this,i=n,a=e.apply(this,n))};return l}}]));function xne(e,t){const[n,r]=f.exports.useState(e);return f.exports.useEffect((()=>{const n=setTimeout((()=>{r(e)}),t);return()=>{clearTimeout(n)}}),[e,t]),n}var Ene={"zh-CN":{back:"返回","table.search.placeholder":"模糊搜索表格内容(多个关键词请用空格分隔。如：key1 key2)","table.sort.ascend":"升序","table.sort.descend":"降序","table.total.prefix":"共","table.total.suffix":"条","table.select.num":"已选择: ","table.filter.search.placeholder":"请输入要搜索的内容","table.filter.search.btn.ok":"搜索","table.filter.search.btn.cancel":"清空","table.filter.header.title":"过滤条件:","table.filter.header.search":":搜索","table.filter.header.filter":":过滤","table.filter.header.btn.clear":"清空","form.item.key.title":"自定义Key","form.item.value.title":"自定义Value","form.detail.nodata":"暂无数据","form.item.key.placeholder":"请输入Key","form.item.value.placeholder":"请输入Value","form.item.add":"增加自定义参数","form.placeholder.prefix":"请输入","form.selectplaceholder.prefix":"请选择","queryform.reset":"重置","queryform.search":"查询","queryform.collapsed":"收起","queryform.expand":"展开","color.placeholder":"请选择颜色"},"en-US":{back:"Back","table.search.placeholder":"Fuzzy search table content (multiple keywords separated by Spaces. Such as: key1 key2)","table.sort.ascend":"Ascend","table.sort.descend":"Descend","table.total.prefix":"Total","table.total.suffix":"Items","table.select.num":"Selected: ","table.filter.search.placeholder":"Please enter keywords","table.filter.search.btn.ok":"Search","table.filter.search.btn.cancel":"Clear","table.filter.header.title":"Filtration Conditions:","table.filter.header.search":": Search","table.filter.header.filter":": Filter","table.filter.header.btn.clear":"Clear","form.item.key.title":"Custom Key","form.item.value.title":"Custom Value","form.detail.nodata":"No Data","form.item.key.placeholder":"Please enter key","form.item.value.placeholder":"Please enter value","form.item.add":"Add Custom Parameters","form.placeholder.prefix":"Please enter","form.selectplaceholder.prefix":"Please select","queryform.reset":"Clear","queryform.search":"Search","queryform.collapsed":"Collapsed","queryform.expand":"Expand","color.placeholder":"Please select color"}};const bne=e=>Ene["zh-CN"][e],Cne="object"==typeof window,Tne=(e,t=!1)=>{const[n,r]=f.exports.useState(Cne?()=>window.matchMedia(e).matches:t);return f.exports.useEffect((()=>{let t=!0;const n=window.matchMedia(e),i=()=>{t&&r(!!n.matches)};return n.addListener(i),r(n.matches),()=>{t=!1,n.removeListener(i)}}),[e]),n},wne={xs:"(max-width: 575px)",sm:"(min-width: 576px) and (max-width: 767px)",md:"(min-width: 768px) and (max-width: 991px)",lg:"(min-width: 992px) and (max-width: 1199px)",xl:"(min-width: 1200px) and (max-width: 1599px)",xxl:"(min-width: 1600px)"},Sne=()=>{const e=Tne(wne.md),t=Tne(wne.lg),n=Tne(wne.xxl),r=Tne(wne.xl),i=Tne(wne.sm),a=Tne(wne.xs),[o,s]=f.exports.useState((()=>{let e="md";return"undefined"==typeof window||(e=Object.keys(wne).find((e=>{const t=wne[e];return!!window.matchMedia(t).matches}))),e})());return f.exports.useEffect((()=>{s(n?"xxl":r?"xl":t?"lg":e?"md":i?"sm":a?"xs":"md")}),[e,t,n,r,i,a]),o};var kne="undefined"!=typeof Element,_ne="function"==typeof Map,Ane="function"==typeof Set,One="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function Ine(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,r,i,a;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!Ine(e[r],t[r]))return!1;return!0}if(_ne&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;for(a=e.entries();!(r=a.next()).done;)if(!Ine(r.value[1],t.get(r.value[0])))return!1;return!0}if(Ane&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(One&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(kne&&e instanceof Element)return!1;for(r=n;0!=r--;)if(("_owner"!==i[r]&&"__v"!==i[r]&&"__o"!==i[r]||!e.$$typeof)&&!Ine(e[i[r]],t[i[r]]))return!1;return!0}return e!=e&&t!=t}const Mne=function(e,t){try{return Ine(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}},Nne=(e,t)=>{((e,t,n)=>{const r=f.exports.useRef(void 0);r.current&&n(t,r.current)||(r.current=t),f.exports.useEffect(e,r.current)})(e,t,Mne)},Fne=bt.Item,{Option:Lne}=Mt,Pne={xs:24,sm:24,md:12,lg:12,xl:8,xxl:6},Rne={labelCol:{xs:{span:5},sm:{span:5},md:{span:7},lg:{span:7},xl:{span:8},xxl:{span:8}},wrapperCol:{xs:{span:19},sm:{span:19},md:{span:17},lg:{span:17},xl:{span:16},xxl:{span:16}}},Dne=(e,t)=>{if("number"==typeof e)return e;return s(s({},Pne),e)[t]},Bne=(e,t=8)=>{const n=24/t;return(n-1-e%n)*t},zne=e=>{const t=`${e.prefixCls||"dantd"}-query-form`,n=bne,{className:r,style:i,colConfig:a,searchText:o,resetText:c,showOptionBtns:u=!0,showCollapseButton:h=!0,defaultCollapse:p=!1,isResetClearAll:m=!1,onChange:g,onSearch:v,onReset:y,getFormInstance:x,columns:E=[],mode:b="full",colMode:C="grid",columnStyleHideNumber:T=1,defaultColStyle:w={width:"300px"}}=e,S=P(t,r),k=P({[`${t}-formitem`]:!0,[`${t}-formitem-full`]:"full"===b}),_=Sne(),A=a||Pne,[O,M]=f.exports.useState(Dne(A||8,_)),[N]=bt.useForm(),{validateFields:F,getFieldsValue:L,resetFields:R,setFieldsValue:D}=N,[B,z]=f.exports.useState(p),H=L();f.exports.useEffect((()=>{M(Dne(A||8,_))}),[_]),f.exports.useEffect((()=>{x&&x(N)}),[]),Nne((()=>{g&&Object.keys(H).length>0&&g(H,N)}),[H]);const j={6:3,8:2,12:1,24:1}[Dne(A||8,_)]||1;const G=()=>{F().then((e=>{v&&v(e,N)}))},$=()=>{if(m){const e=E.reduce(((e,t)=>t.dataIndex?l(s({},e),{[Array.isArray(t.dataIndex)?t.dataIndex.join("."):t.dataIndex]:void 0}):s({},e)),{});D(e)}else R();setTimeout((()=>{y&&y(L(),N)}))},Y=()=>{G()};return d.createElement(Kt,s({},e.antConfig),d.createElement("div",{className:S,style:i},d.createElement(bt,{form:N,layout:"inline"},d.createElement(kt,{gutter:[12,12]},E.map(((e,t)=>{let r=B&&j<=t,i={};return"style"===C&&(i=e.colStyle||w,B&&t>=T&&(r=!0)),i=l(s({},i),{display:r?"none":"block"}),d.createElement(_t,s({style:i,key:`query-form-col-${e.dataIndex}-${t}`},A),"input"===e.type&&(e=>{const{initialValue:t,dataIndex:r,title:i,required:a,componentProps:o={},placeholder:c,isInputPressEnterCallSearch:u,formItemLayout:h,rules:p,size:f="default"}=e,m=c||n("form.placeholder.prefix");let g=[];a&&(g=[{required:!0,message:m}]);const v=h||"align"===b?Rne:{};return d.createElement(Fne,l(s({name:r,label:i,className:k},v),{initialValue:t,rules:p||g}),d.createElement(Ct,s({"data-testid":"field-input",size:f,maxLength:255,placeholder:m,onPressEnter:u?Y:()=>{}},o)))})(e),"select"===e.type&&(e=>{const{initialValue:t,dataIndex:r,title:i,required:a,placeholder:o,selectMode:c="single",rules:u,formItemLayout:h,options:p=[],componentProps:f={},size:m="default"}=e,g=o||d.createElement(d.Fragment,null,n("form.selectplaceholder.prefix")," ",i);let v=[];a&&(v=[{required:!0,message:g}]);const y=h||"align"===b?Rne:{};return d.createElement(Fne,l(s({name:r,label:i,className:k},y),{initialValue:t,rules:u||v}),d.createElement(Mt,s({"data-testid":"select",mode:c,size:m,allowClear:!0,placeholder:g,showSearch:!0,optionFilterProp:"children",style:{width:"100%"}},f),p.map((e=>d.createElement(Lne,{key:`query-form-select-option-${e.value}`,"data-testid":"select-option",value:e.value},e.title)))))})(e),"custom"===e.type&&(e=>{const{initialValue:t,formItemLayout:r,dataIndex:i,title:a,required:o,placeholder:c,rules:u,valuePropName:h="value",component:p}=e,f=c||d.createElement(d.Fragment,null,n("form.placeholder.prefix")," ",a);let m=[];o&&(m=[{required:!0,message:f}]);const g=r||"align"===b?Rne:{};return d.createElement(Fne,l(s({name:i,label:a,className:k},g),{initialValue:t,rules:u||m,valuePropName:h}),p)})(e))})),u&&(()=>{const e=B?E.length<=j?Bne(E.length,O):Bne(j,O):Bne(E.length,O);let r={};return"style"===C&&(r={position:"absolute",width:280,bottom:0,right:0,marginLeft:0}),d.createElement(_t,l(s({},A),{offset:e,key:"option",className:`${t}-option`,style:s({},r)}),d.createElement(bt.Item,null,d.createElement("span",null,d.createElement(xt,{onClick:$},c||n("queryform.reset")),d.createElement(xt,{onClick:G,style:{marginLeft:10},type:"primary",htmlType:"submit"},o||n("queryform.search")),h&&d.createElement("a",{style:{marginLeft:10,display:"inline-block"},onClick:()=>{z(!B)}},n(B?"queryform.expand":"queryform.collapsed"),d.createElement(I,null)))))})()))))},Hne=["10","20","50","100"];function jne(e,t){switch(t.type){case"update":return l(s({},e),{[t.dataIndex]:l(s({},e[t.dataIndex]),{dataIndex:t.dataIndex,type:t.updateType,value:t.value})});case"clear":return s({},t.initialState);default:return e}}function Gne(e,t){switch(t.type){case"update":return s({},t.value);case"clear":return{};default:return e}}var $ne=d.forwardRef((function(e,t){const n=`${e.prefixCls||"dantd"}-data-table`,r=e.filterType||"half",i=f.exports.useRef(),a=bne,{fetchOptions:o={},searchParams:c,showFilter:u=!0,showReloadBtn:h=!0,showQueryOptionBtns:p=!0,showQueryCollapseButton:m=!0,isQuerySearchOnChange:g=!0,showBodyBg:v=!1,queryFormProps:y={},url:x,queryMode:E="default",reloadBtnPos:b="right",searchPos:C="full",reloadBtnType:w="icon",queryFormColumns:S,pageParams:k,antProps:_={rowKey:"id"}}=e,A=P(n,e.className),O=P({[`${n}-table-content`]:!0,[`${n}-table-content-noborder`]:e.hideContentBorder}),I=P({[`${n}-body`]:!!S||v,[`${n}-body-compact`]:"compact"===E}),N=P({[`${n}-query`]:!!S,[`${n}-query-compact`]:"compact"===E}),F=f.exports.useMemo((()=>{const t={};return e.columns&&e.columns.length>0&&e.columns.forEach((e=>{e.dataIndex&&(t[e.dataIndex]=l(s({},e),{value:null}))})),t}),[e.columns]),[L,R]=f.exports.useState({}),[D,z]=f.exports.useState(!1),H=f.exports.useRef(!1),j=f.exports.useRef({}),G=f.exports.useRef({}),[$,Y]=f.exports.useState([]),[U,V]=f.exports.useState(!1),[W,X]=f.exports.useReducer(Gne,{}),[q,K]=f.exports.useState(!1),[Q,Z]=f.exports.useState(),J=e.rowSelection,ee=J?J.selectedRowKeys&&J.selectedRowKeys.length:-1,te={ascend:a("table.sort.ascend"),descend:a("table.sort.descend")},ne=!!c,re=ne&&"full"===C,ie="full"===C&&h&&"right"===b,ae=(!ne||"full"!==C)&&h&&"right"===b,oe=h&&"left"===b,se=c?c.placeholder:a("table.search.placeholder"),[le,ce]=f.exports.useState(s({current:1,pageSize:10,total:0},k)),[ue,he]=f.exports.useReducer(jne,F),pe=xne(Q,300),de=xne(JSON.stringify(L),300),fe=JSON.stringify({pageSize:le.pageSize,current:le.current}),me=JSON.stringify(s(s({},ue),W));async function ge(t){let n=x,r=null;if(-1!==n.indexOf("?")){const e=n.split("?");n=e[0],r=Ci.parse(e[1],{arrayFormat:"comma"})}let i={[k.curPageName]:t.current,[k.pageSizeName]:t.pageSize};r&&(i=s(s({},r),i)),0===k.startPage&&(i[k.curPageName]-=1),e.columns.forEach((e=>{e.dataIndex&&t[e.dataIndex]&&(i[e.dataIndex]=t[e.dataIndex]),e.apiSearch&&t[e.apiSearch.name]&&(i[e.apiSearch.name]=t[e.apiSearch.name]),e.apiFilter&&t[e.apiFilter.name]&&(i[e.apiFilter.name]=t[e.apiFilter.name]),e.apiSorter&&t[e.apiSorter.name]&&(i[e.apiSorter.name]=t[e.apiSorter.name])})),c&&t[c.apiName]&&(i[c.apiName]=t[c.apiName]),S&&L&&Object.keys(L).length>0&&(i=s(s({},L),i)),e.customQueryCallback&&(i=e.customQueryCallback(s({},i))),n=`${n}?${Ci.stringify(i,{arrayFormat:"comma"})}`,e.customFetchUrlCallback&&(n=e.customFetchUrlCallback(n)),V(!0);let a=s({},o);o.method&&"post"===o.method.toLowerCase()&&(a.data=i);const u=ai(n,a);e.rowSelection&&e.rowSelection.onChange&&e.rowSelection.onChange([]),(u.status<200||u.status>=300)&&e.apiErrorCallback?(e.apiErrorCallback(u),V(!1)):u.then((async t=>{let n=t;e.apiCallback&&(n=e.apiCallback(t)),e.apiAsyncCallback&&(n=await e.apiAsyncCallback(t)),Y(n.data);const r=l(s({},le),{total:n.total});ce(r),V(!1)})).catch((()=>{e.apiErrorCallback&&e.apiErrorCallback(u),V(!1)}))}f.exports.useEffect((()=>{if(x&&i.current!==x){ge(be()),setTimeout((()=>{i.current=x}))}}),[x]),f.exports.useEffect((()=>{if(!i.current)return;let t=be();t[le.curPageName]=1,c&&pe&&pe.trim()&&(t[c.apiName]=pe.trim()),e.onSearch&&e.onSearch(pe?pe.trim():pe),ge(t)}),[pe]),f.exports.useEffect((()=>{if(!i.current)return;if(!S||L&&0===Object.keys(L).length)return;let e=be();e[le.curPageName]=1,ge(e)}),[de]),f.exports.useEffect((()=>{if(!i.current)return;ge(be())}),[me]),f.exports.useEffect((()=>{if(!i.current||!le.pageSize)return;if(H.current)return void(H.current=!1);ge(be())}),[fe]);const ve=f.exports.useCallback(((e,t,n)=>{t&&t(),e&&n&&he({type:"update",dataIndex:n,updateType:"search",value:e[0]})}),[]),ye=f.exports.useCallback(((e,t)=>{e&&e([]),t&&he({type:"update",dataIndex:t})}),[]),xe=()=>{X({type:"clear"}),he({type:"clear",initialState:F}),K(!1),setTimeout((()=>{Object.values(G.current).forEach((e=>{e&&e.clearFilters&&e.clearFilters([])}))}))},Ee=()=>{X({type:"clear"}),we(null,{})},be=()=>{let e=s({},le);return W&&W.order&&(e[W.column.apiSorter.name]=W.column.apiSorter[W.order]),Object.values(ue).forEach((t=>{const n=t.dataIndex,r=t.value;if(t.apiFilter&&r){let i=F[n].apiFilter?F[n].apiFilter.name:n;e[i]=r,t.apiFilter.callback&&(e[i]=F[n].apiFilter.callback(r))}if(t.apiSearch&&r){const t=F[n].apiSearch?F[n].apiSearch.name:n;e[t]=Array.isArray(r)?r[0]:r}})),c&&Q&&(e[c.apiName]=Q),(S||L&&Object.keys(L).length>0)&&(e=s(s({},L),e)),e},Ce=()=>{ge(be())},Te=e=>{const t=e.target.value;Z(t),ce(l(s({},le),{current:1}))},we=(e,t,n)=>{const r=t||W,i=e||ue,a=n||ue,o=Object.values(a).some((e=>!("search"!==e.type||!e.value)));let s=!1;s=e?Object.values(i).some((e=>e&&e.length>0)):Object.values(i).some((e=>!!("filter"===e.type&&e.value&&e.value.length>0)));const l=!!r.column;K(o||s||l)},Se=Object.values(ue).some((e=>!("search"!==e.type||!e.value))),ke=Object.values(ue).some((e=>!!("filter"===e.type&&e.value&&e.value.length>0)));f.exports.useImperativeHandle(t,(()=>({handleReload:Ce,goToFirstPage:()=>{ce(l(s({},le),{current:1}))}})));const _e=e=>u?d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("b",{style:{marginTop:4,display:"inline-block"}},a("table.filter.header.title"))),(Se||ke)&&Object.values(ue).map((t=>{if("search"===t.type&&t.value)return d.createElement("div",{key:`search-header-${t.dataIndex}`,className:`${e.headerClsPrefix}-item`},d.createElement(Tt,{title:d.createElement("span",null,t.title,":"," ",t.value)},d.createElement(xt,{size:"small",className:"table-header-item-btn",onClick:()=>(e=>{he({type:"update",dataIndex:e.dataIndex}),G.current[e.dataIndex]&&G.current[e.dataIndex].clearFilters&&G.current[e.dataIndex].clearFilters([]),we(null,W,l(s({},ue),{[e.dataIndex]:{title:ue[e.dataIndex].title,dataIndex:ue[e.dataIndex].dataIndex,value:null}}))})(t)},d.createElement("span",{className:"table-header-item-btn-content"},t.title,":"," ",t.value),d.createElement(Ne,null))));if("filter"===t.type&&t.value&&t.value.length>0){const n=(F[t.dataIndex]?F[t.dataIndex].filters:[]).reduce(((e,t)=>l(s({},e),{[t.value]:[t.text]})),{}),r=t.value.map((e=>n&&n[e]?n[e]:e));return d.createElement("div",{key:`search-header-${t.dataIndex}`,className:`${e.headerClsPrefix}-item`},d.createElement(Tt,{title:d.createElement("span",null,t.title,":"," ",r.join(","))},d.createElement(xt,{size:"small",className:"table-header-item-btn",onClick:()=>(e=>{he({type:"update",dataIndex:e.dataIndex,value:[]});const t=Object.values(ue).map((t=>t.dataIndex===e.dataIndex?{[t.dataIndex]:[]}:{[t.dataIndex]:t.value||[]}));we(t,W,ue)})(t)},d.createElement("span",{className:"table-header-item-btn-content"},t.title,":"," ",r.join(",")),d.createElement(Ne,null))))}return null})),W.columnKey&&W.column&&d.createElement("div",{className:`${e.headerClsPrefix}-item`},d.createElement(Tt,{title:d.createElement("span",null,F[W.columnKey].title,`: ${te[W.order]}`)},d.createElement(xt,{size:"small",className:"table-header-item-btn",onClick:Ee},d.createElement("span",{className:"table-header-item-btn-content"},F[W.columnKey].title,`: ${te[W.order]}`),d.createElement(Ne,null)))),d.createElement("div",{className:`${e.headerClsPrefix}-item`},d.createElement(xt,{size:"small",type:"link","data-testid":"btn-clearall",onClick:xe},a("table.filter.header.btn.clear")))):null,Ae=()=>d.createElement(Tt,{placement:"topLeft",title:se},d.createElement(Ct,{"data-testid":"search-input",prefix:"right"===b&&d.createElement(M,{style:{color:"rgba(0,0,0,.25)"}}),suffix:"left"===b&&d.createElement(M,{style:{color:"rgba(0,0,0,.25)"}}),allowClear:!0,value:Q,onChange:Te,placeholder:se})),Oe=()=>{if("icon"===w){const e=P({[`${n}-header-loadbtn`]:!0,[`${n}-header-loadbtn-icon`]:!0,[`${n}-header-loadbtn-right`]:"right"===b,[`${n}-header-loadbtn-left`]:"left"===b});return d.createElement(B,{onClick:Ce,spin:U,className:e,type:"reload"})}if("btn"===w){const e=P({[`${n}-header-loadbtn`]:!0,[`${n}-header-loadbtn-btn`]:!0,[`${n}-header-loadbtn-right`]:"right"===b,[`${n}-header-loadbtn-left`]:"left"===b});return d.createElement(xt,{className:e,loading:U,icon:d.createElement(B,null),"data-testid":"reload-btn",onClick:Ce})}};return d.createElement(Kt,s({},e.antConfig),d.createElement("div",{className:A,style:e.style},S&&d.createElement("div",{className:N},d.createElement(zne,s({onChange:g?e=>{H.current=!0,ce(l(s({},le),{current:1})),R(e)}:e=>{D||(R(e),z(!0))},onReset:e=>{H.current=!0,ce(l(s({},le),{current:1})),R(e)},onSearch:e=>{le.current>1?(H.current=!0,ce(l(s({},le),{current:1})),R(e)):R(e)},columns:S,showOptionBtns:p,showCollapseButton:m},y))),d.createElement("div",{className:I},!!e.tableTitle&&d.createElement("h3",null," ",e.tableTitle," "),e.customHeader&&d.createElement("div",{"data-testid":"custom-header",className:`${n}-header-custom`},e.customHeader),re&&d.createElement(kt,{type:"flex",className:`${n}-header-search`},ne?Ae():d.createElement("div",null),ie&&Oe()),"flex"===r&&d.createElement("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"10px"}},oe&&Oe(),e.leftHeader),"none"===r&&"right"!==C&&d.createElement(kt,{className:`${n}-header-filter`},oe&&Oe(),d.createElement(_t,{"data-testid":"left-header",className:P(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`)},e.leftHeader),ae&&Oe()),"none"===r&&ne&&"right"===C&&d.createElement(kt,{className:`${n}-header-filter`},d.createElement(_t,{"data-testid":"left-header",className:P(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`),span:14},oe&&Oe(),e.leftHeader),d.createElement(_t,{"data-testid":"right-header",className:`${n}-header-filter-right`,span:10},Ae()),ae&&Oe()),"line"===r&&d.createElement(kt,{className:`${n}-header-filter`},oe&&Oe(),d.createElement(_t,{"data-testid":"right-header",className:`${n}-header-filter-line`,span:24},q&&_e({headerClsPrefix:`${n}-header-filter-line`})),ae&&Oe()),"half"===r&&d.createElement(kt,{className:`${n}-header-filter`},oe&&Oe(),d.createElement(_t,{"data-testid":"left-header",className:P(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`),span:12},e.leftHeader),d.createElement(_t,{"data-testid":"right-header",className:`${n}-header-filter-right`,span:12},q&&_e({headerClsPrefix:`${n}-header-filter-right`})),ae&&Oe()),d.createElement("div",{className:`${n}-table-wrapper`},d.createElement("div",{className:O},d.createElement(Ft,s({loading:U,columns:e.columns.map((e=>{const t=T.cloneDeep(e);if(t.apiFilter&&(t.filterIcon=()=>d.createElement(Ve,null),t.filteredValue=ue[e.dataIndex].value),t.apiSorter&&(t.sortOrder=W.columnKey===t.dataIndex&&W.order),t.apiSearch){t.filterIcon=()=>d.createElement(M,null),t.onFilterDropdownVisibleChange=e=>{e&&j.current&&j.current.select&&setTimeout((()=>(j.current&&j.current.select&&j.current.select(),null)))},t.filterDropdown=({setSelectedKeys:e,selectedKeys:n,confirm:r,clearFilters:i})=>(G.current[t.dataIndex]={clearFilters:i},d.createElement("div",{style:{padding:8}},d.createElement(Ct,{"data-testid":"filter-search-input",autoFocus:!0,ref:e=>{j.current=e},placeholder:a("table.filter.search.placeholder"),value:n&&n[0],onChange:t=>e?e(t.target.value?[t.target.value]:[]):[],onPressEnter:()=>ve(n,r,t.dataIndex),style:{width:188,marginBottom:8,display:"block"}}),d.createElement(xt,{type:"primary",onClick:()=>ve(n,r,t.dataIndex),icon:"search",size:"small","data-testid":"search-btn-ok",style:{width:90,marginRight:8}},a("table.filter.search.btn.ok")),d.createElement(xt,{onClick:()=>ye(i,t.dataIndex),size:"small",style:{width:90}},a("table.filter.search.btn.cancel"))));let e=[];const n=ue[t.dataIndex].value;"string"==typeof n&&(e=[n]),Array.isArray(n)&&"string"==typeof n[0]&&(e=[n[0]]),t.onFilter=(e,n)=>n[t.dataIndex].toString().toLowerCase().includes(e.toLowerCase()),t.render||(t.render=(n,r,i)=>t.searchRender?t.searchRender(n,r,i,d.createElement(yne,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:e,autoEscape:!0,textToHighlight:String(n)})):d.createElement(yne,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:e,autoEscape:!0,textToHighlight:String(n)}))}return t})),dataSource:$,bordered:!1,rowSelection:J,onChange:(e,t,n)=>{i.current&&(Object.keys(n).length>0&&n.column?X({type:"update",value:l(s({},n),{column:{apiSorter:n.column.apiSorter}})}):X({type:"update",value:{}}),Object.entries(t).forEach((([e,t])=>{F[e].filters&&he({type:"update",dataIndex:e,updateType:"filter",value:t})})),H.current=!1,ce(e),we(t,n))},pagination:s(s({showTotal:e=>`${a("table.total.prefix")} ${e} ${a("table.total.suffix")}`,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:Hne},e.pagination),le)},_)),J&&void 0!==ee&&ee>0&&d.createElement("div",{className:`${n}-table-content-select-num`},a("table.select.num"),ee))))))}));function Yne(e){const{onRefreshRule:t}=e,[n]=bt.useForm(),[r,i]=f.exports.useState(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState(),h=localStorage.getItem("selectedAlertRule"),[p,m]=f.exports.useState(h?Number(h):0),[g,v]=f.exports.useState(""),{profile:y}=ri((e=>e.account));function x(e){e&&(m(e),localStorage.setItem("selectedAlertRule",String(e)))}f.exports.useEffect((()=>{E(!0).then((e=>{if(p&&e&&e.length>0){const n=null==e?void 0:e.find((e=>e.id===p));n?t(n.rule):x(e[0].id)}}))}),[]),f.exports.useEffect((()=>{if(p&&r&&r.length>0){const e=null==r?void 0:r.find((e=>e.id===p));e?t(e.rule):x(r[0].id)}}),[p]);const E=(e=!1)=>ai("/api/n9e/alert-aggr-views",{method:Qr.Get}).then((t=>{const n=t.dat.sort(((e,t)=>e.cate-t.cate));return i(n),e&&n.length>0&&!n.find((e=>e.id===p))&&x(n[0].id),n})),b=e=>{It.confirm({title:`确定要删除聚合策略 ${e.name} 吗？`,onOk:async()=>{var t;await(t=[e.id],ai("/api/n9e/alert-aggr-views",{method:Qr.Delete,data:{ids:t}})),vt.success("删除成功"),E(!0)},onCancel:()=>{}})};return d.createElement("div",{className:"left-area",style:{width:240,background:"#fff"}},d.createElement("div",{className:"event-page-title"},d.createElement("span",null,"聚合规则"),d.createElement("a",{onClick:()=>o(!0)},d.createElement(De,null))),d.createElement(Ct,{style:{margin:"10px 0"},prefix:d.createElement(M,null),value:g,onChange:e=>{v(e.target.value)}}),null==r?void 0:r.filter((e=>e.name.includes(g))).map((e=>d.createElement("div",{className:e.id===p?"card-menu-item is-active":"card-menu-item",onClick:()=>x(e.id),key:e.id},d.createElement("div",{className:"label-area"},d.createElement("div",{className:"title"},e.name)),1===e.cate||y.admin?d.createElement("div",null,0===e.cate&&d.createElement("div",{className:"default-holder"},"公开"),d.createElement("div",{className:"icon-area"},d.createElement(_e,{onClick:()=>{u(e),o(!0),n.setFieldsValue(l(s({},e),{cate:0===e.cate})),t(e.rule)}}),d.createElement(Ee,{onClick:t=>{t.stopPropagation(),b(e)}}))):d.createElement("div",{className:"default-holder"},"公开")))),d.createElement(It,{title:(c?"编辑":"新增")+"聚合规则",visible:a,onOk:async()=>{await n.validateFields();const e=c?Wi:Vi,t=n.getFieldsValue(),r=await e(l(s({},t),{cate:t.cate?0:1}));o(!1),await E(),x(c?c.id:r.dat.id)},onCancel:()=>{o(!1),u(void 0)},destroyOnClose:!0},d.createElement(bt,{form:n,layout:"vertical",preserve:!1,initialValues:{cate:!1}},d.createElement(bt.Item,{label:"Name",name:"name",rules:[({getFieldValue:e})=>({validator:(e,t)=>t&&0!==t.length?Promise.resolve():Promise.reject(new Error("请输入聚合规则名称"))})]},d.createElement(Ct,null)),d.createElement(bt.Item,{name:"id",hidden:!0},d.createElement(Ct,null)),d.createElement(bt.Item,{label:"Rule",name:"rule",rules:[({getFieldValue:e})=>({validator:(e,t)=>t&&0!==t.length?Promise.resolve():Promise.reject(new Error("请输入Rule"))})]},d.createElement(Ct,null)),y.admin&&d.createElement(bt.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Lt,null)))))}var Une=d.forwardRef((function(e,t){const{t:n}=Lr(),{filter:r,header:i}=e,a=f.exports.useRef(null),o=C(),[c,u]=f.exports.useState(4),[h,p]=f.exports.useState(),[m,g]=f.exports.useState(),[v,y]=f.exports.useState(),[x,E]=f.exports.useState([]),[b,T]=f.exports.useState(),[w,S]=f.exports.useState(!1);f.exports.useEffect((()=>{k()}),[r,h]);const k=()=>{var e;h&&(e=l(s({},r),{rule:h}),ai("/api/n9e/alert-cur-events/card",{method:Qr.Get,params:e})).then((e=>{g(e.dat)}))};f.exports.useLayoutEffect((()=>{function e(){var e;const t=null==(e=a.current)?void 0:e.offsetWidth;t&&u(function(e){return e>1500?4:e>1e3?6:e>850?8:12}(t))}const t=$.exports.throttle(e,400);return window.addEventListener("resize",t),e(),()=>window.removeEventListener("resize",t)}),[]);const _=[{title:n("集群"),dataIndex:"cluster",width:120},{title:n("规则标题&事件标签"),dataIndex:"rule_name",render(e,{id:t,tags:n}){const r=n&&n.map((e=>d.createElement(Ot,{color:"purple",key:e},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>o.push(`/alert-cur-events/${t}`)},e)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},r)))}},{title:n("触发时间"),dataIndex:"trigger_time",width:120,render:e=>A(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{title:n("操作"),dataIndex:"operate",width:120,render:(e,t)=>d.createElement(d.Fragment,null,d.createElement(xt,{size:"small",type:"link",onClick:()=>{o.push("/alert-mutes/add",{cluster:t.cluster,tags:t.tags?t.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}})):[]})}},"屏蔽"),d.createElement(xt,{size:"small",type:"link",danger:!0,onClick:()=>Xne(void 0,[t.id],(()=>{E(x.filter((e=>e!==t.id))),O(v)}))},"删除"))}],O=e=>{var t;S(!0),y(e),(t=e.event_ids,ai("/api/n9e/alert-cur-events/card/details",{method:Qr.Post,data:{ids:t}})).then((e=>{T(e.dat)}))};return f.exports.useImperativeHandle(t,(()=>({reloadCard:k}))),d.createElement("div",{style:{display:"flex",height:"100%"},ref:a},d.createElement(Yne,{onRefreshRule:p}),d.createElement("div",{style:{background:"#fff",flex:1,padding:16}},i,d.createElement(kt,{gutter:[16,16],style:{marginTop:16}},null==m?void 0:m.map(((e,t)=>d.createElement(_t,{span:c,key:t},d.createElement("div",{className:`event-card ${Wne[e.severity-1]} ${Wne[e.severity-1]}-left-border`,onClick:()=>O(e)},d.createElement("div",{className:"event-card-title"},e.title),d.createElement("div",{className:"event-card-num"},e.total))))))),d.createElement(Wt,{title:d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},d.createElement("span",null,null==v?void 0:v.title),d.createElement(xt,{danger:!0,disabled:0===x.length,onClick:()=>Xne(void 0,x,(()=>{E([]),O(v)}))},"批量删除")),placement:"right",onClose:()=>{S(!1)},visible:w,width:960},d.createElement(Ft,{rowKey:"id",className:"card-event-drawer",rowClassName:(e,t)=>Wne[e.severity-1]+"-left-border",rowSelection:{selectedRowKeys:x,onChange(e,t){E(e.map((e=>Number(e))))}},dataSource:b,columns:_})))}));const{confirm:Vne}=It,Wne=["red","orange","yellow","green"];function Xne(e,t,n=(()=>{})){Vne({title:"删除告警事件",icon:d.createElement(je,null),content:"通常只有在确定监控数据永远不再上报的情况下（比如调整了监控数据标签，或者机器下线）才删除告警事件，因为相关告警事件永远无法自动恢复了，您确定要这么做吗？",okText:"确认删除",maskClosable:!0,okButtonProps:{danger:!0},zIndex:1001,onOk:()=>function(e,t){return ai("/api/n9e/alert-cur-events",{method:Qr.Delete,data:{ids:t}})}(0,t).then((e=>{vt.success("删除成功"),n()})),onCancel(){}})}const qne=()=>{const e=C(),{t:t}=Lr(),[n,r]=f.exports.useState("card"),i=Wr(),[a,o]=f.exports.useState(),[s,l]=f.exports.useState([]),{hourRange:c,queryContent:u}=ri((e=>e.event)),h=f.exports.useMemo((()=>[{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:2,unit:"days",description:t("天")},{num:3,unit:"days",description:t("天")},{num:7,unit:"days",description:t("天")},{num:14,unit:"days",description:t("天")},{num:30,unit:"days",description:t("天")},{num:60,unit:"days",description:t("天")},{num:90,unit:"days",description:t("天")}]),[]),p=f.exports.useRef({handleReload(){}}),m=f.exports.useRef({reloadCard(){}}),g=f.exports.useRef(!1),[v,y]=f.exports.useState(-1),[x,E]=f.exports.useState([]),[b,T]=f.exports.useState(0);We((()=>{"list"===n?p.current.handleReload():m.current.reloadCard()}),b>0?1e3*b:void 0);const w=[{title:t("集群"),dataIndex:"cluster",width:120},{title:t("规则标题&事件标签"),dataIndex:"rule_name",render(t,{id:n,tags:r}){const i=r&&r.map((e=>d.createElement(Ot,{color:"purple",key:e,onClick:t=>{u.includes(e)||(g.current=!0,S("queryContent",u?`${u.trim()} ${e}`:e))}},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>e.push(`/alert-cur-events/${n}`)},t)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},i)))}},{title:t("触发时间"),dataIndex:"trigger_time",width:120,render:e=>A(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{title:t("操作"),dataIndex:"operate",width:120,render:(t,r)=>d.createElement(d.Fragment,null,d.createElement(xt,{size:"small",type:"link",onClick:()=>{e.push("/alert-mutes/add",{cluster:r.cluster,tags:r.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}}))})}},"屏蔽"),d.createElement(xt,{size:"small",type:"link",danger:!0,onClick:()=>Xne(0,[r.id],(()=>{E(x.filter((e=>e!==r.id))),"list"===n&&p.current.handleReload()}))},"删除"))}];function S(e,t){i({type:"event/saveData",prop:e,data:t})}function k(){const e=d.createElement(yt,{onClick:e=>{T(e.key)}},[{num:0,unit:"second",description:"off"},{num:5,unit:"seconds",description:"s"},{num:30,unit:"seconds",description:"s"},{num:60,unit:"seconds",description:"s"}].map((({num:e,description:t})=>d.createElement(yt.Item,{key:e},e>0&&d.createElement("span",{className:"num"},e),t))));return d.createElement("div",{className:"table-operate-box",style:{background:"#fff"}},d.createElement("div",{className:"left"},d.createElement(xt,{icon:d.createElement(qe,null),onClick:()=>r("card")}),d.createElement(xt,{icon:d.createElement(Ke,null),onClick:()=>r("list"),style:{marginLeft:8,marginRight:8}}),d.createElement(ou,{showRight:!1,leftList:h,value:c,onChange:e=>{e.num===c.num&&e.unit===c.unit||S("hourRange",e)}}),d.createElement(ao,{onSeverityChange:e=>o(e),onBusiGroupChange:e=>y("number"==typeof e?e:-1),onClusterChange:e=>l(e)}),d.createElement(Ct,{className:"search-input",prefix:d.createElement(M,null),placeholder:"模糊搜索规则和标签(多个关键词请用空格分隔)",value:u,onChange:e=>S("queryContent",e.target.value),onPressEnter:e=>"list"===n&&p.current.handleReload()})),d.createElement("div",{className:"right"},"list"===n&&d.createElement(xt,{danger:!0,style:{marginRight:8},disabled:0===x.length,onClick:()=>Xne(0,x,(()=>{E([]),"list"===n&&p.current.handleReload()}))},"批量删除"),d.createElement(Ra,{onClick:()=>{"list"===n&&p.current.handleReload(),"card"===n&&m.current.reloadCard()}}),d.createElement(wt,{overlay:e},d.createElement(xt,{className:"interval-btn",icon:d.createElement(I,null)},b>0?b+"s":"off"))))}return f.exports.useEffect((()=>{g.current&&("list"===n&&p.current.handleReload(),g.current=!1)}),[u]),f.exports.useEffect((()=>{"list"===n&&p.current.handleReload()}),[s,a,c,v,n]),d.createElement(Ki,{icon:d.createElement(Xe,null),title:t("活跃告警"),hideCluster:!0},d.createElement("div",{className:"event-content cur-events"},d.createElement("div",{className:"table-area",style:{padding:"card"===n?0:void 0}},"card"===n?d.createElement("div",{style:{width:"100%",height:"100%",background:"#eee"}},d.createElement(Une,{ref:m,header:k(),filter:Object.assign({hours:"hours"!==c.unit?24*c.num:c.num},s.length?{clusters:s.join(",")}:{},a?{severity:a}:{},u?{query:u}:{},{bgid:v})})):d.createElement($ne,{ref:p,antProps:{rowKey:"id",rowClassName:(e,t)=>Wne[e.severity-1]+"-left-border",rowSelection:{selectedRowKeys:x,onChange(e,t){E(e.map((e=>Number(e))))}}},url:"/api/n9e/alert-cur-events/list",customQueryCallback:e=>Object.assign(e,{hours:"hours"!==c.unit?24*c.num:c.num},s.length?{clusters:s.join(",")}:{},a?{severity:a}:{},u?{query:u}:{},{bgid:v}),pageParams:{curPageName:"p",pageSizeName:"limit",pageSize:30,pageSizeOptions:["30","100","200","500"]},apiCallback:({dat:{list:e,total:t}})=>({data:e,total:t}),columns:w,reloadBtnType:"btn",reloadBtnPos:"right",showReloadBtn:!0,filterType:"flex",leftHeader:k()}))))};const{Paragraph:Kne}=Qt,Qne=e=>{let t="";return T.forEach(e,(e=>{const n=T.split(e,"uuid=");n[1]&&(t=n[1])})),t},Zne={origin:"#573BA7",upper_bound:"#1A94FF",lower_bound:"#2ACA96",anomaly:"red"},Jne=()=>{const{busiId:e,eventId:t}=X(),{busiGroups:n}=ri((e=>e.common));f.exports.useEffect((()=>{}),[n]);const r=C(),[i,a]=f.exports.useState(r.location.pathname.includes("alert-his-events")),[o,s]=f.exports.useState(),[l,c]=f.exports.useState([{label:"规则标题",key:"rule_name",render:(e,{rule_id:t})=>d.createElement(xt,{size:"small",type:"link",className:"rule-link-btn",onClick:()=>{r.push(`/alert-rules/edit/${t}`)}},e)},{label:"业务组",key:"group_name",render:(e,{group_id:t})=>d.createElement(xt,{size:"small",type:"link",className:"rule-link-btn",onClick:()=>{return e=t,void(n.find((t=>t.id===e))?r.push(`/alert-rules?id=${e}`):vt.error("该业务组已删除或无查看权限"));var e}},e)},{label:"规则备注",key:"rule_note"},{label:"所属集群",key:"cluster"},{label:"告警级别",key:"severity",render:e=>d.createElement(Ot,{color:Fi[e-1]},"S",e)},{label:"事件状态",key:"is_recovered",render:e=>d.createElement(Ot,{color:e?"green":"red"},e?"Recovered":"Triggered")},{label:"事件标签",key:"tags",render:e=>e?e.map((e=>d.createElement(Ot,{color:"purple",key:e},e))):""},{label:"对象备注",key:"target_note"},{label:"触发时间",key:"trigger_time",render:e=>A(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{label:"触发时值",key:"trigger_value"},{label:"恢复时间",key:"recover_time",render:e=>A(1e3*(e||0)).format("YYYY-MM-DD HH:mm:ss")},{label:"告警方式",key:"rule_algo",render:e=>e?"智能告警":"阈值告警"},{label:"PromQL",key:"prom_ql",render:e=>d.createElement(kt,{className:"promql-row"},d.createElement(_t,{span:20},d.createElement(y9,{value:e,url:"/api/n9e/prometheus",readonly:!0})),d.createElement(_t,{span:4},d.createElement(xt,{className:"run-btn",type:"link",onClick:()=>{window.open(`${location.origin}/metric/explorer?promql=${encodeURIComponent(e)}`)}},d.createElement(Qe,{className:"run-con"}))))},{label:"执行频率",key:"prom_eval_interval",render:e=>`${e} 秒`},{label:"持续时长",key:"prom_for_duration",render:e=>`${e} 秒`},{label:"通知媒介",key:"notify_channels",render:e=>e.join(" ")},{label:"告警接收组",key:"notify_groups_obj",render:e=>e?e.map((e=>d.createElement(Ot,{color:"purple"},e.name))):""},{label:"回调地址",key:"callbacks",render:e=>e?e.map((e=>d.createElement(Ot,null,d.createElement(Kne,{copyable:!0,style:{margin:0}},e)))):""},{label:"预案链接",key:"runbook_url",render:e=>d.createElement("a",{href:e,target:"_balank"},e)}]),[u,h]=f.exports.useState({num:1,unit:"hour",description:""}),[p,m]=f.exports.useState(15),[g,v]=f.exports.useState([]);return f.exports.useEffect((()=>{(i?function(e,t){return ai(`/api/n9e/alert-his-event/${t}`,{method:Qr.Get})}(0,t):function(e,t){return ai(`/api/n9e/alert-cur-event/${t}`,{method:Qr.Get})}(0,t)).then((e=>{s(e.dat)}))}),[e,t]),f.exports.useEffect((()=>{if(o&&o.rule_algo){let{start:e,end:t}=au(u),n=p;p||(n=Math.max(Math.floor((t-e)/240),1)),Xi({rid:o.rule_id,uuid:Qne(o.tags),start:e,end:t,step:n}).then((e=>{const t=T.map(T.filter(e.data,(e=>"predict"!==e.metric.value_type)),(e=>{const t=e.metric.value_type;return{name:`${t}`,data:e.values,color:Zne[t],lineDash:"origin"===t||"anomaly"===t?[]:[4,4]}})),n=[],r=T.cloneDeep(T.find(t,{name:"origin"})),i=T.find(t,{name:"lower_bound"}),a=T.find(t,{name:"upper_bound"});n.push({name:"lower_upper_bound",data:T.map(i.data,((e,t)=>[...e,a.data[t][1]])),color:"#ddd",opacity:.5}),n.push(r),v(n)}))}}),[JSON.stringify(o),JSON.stringify(u),p]),d.createElement(Ki,{title:"告警详情",showBack:!0,hideCluster:!0},d.createElement("div",{className:"event-detail-container"},d.createElement(qt,{spinning:!o},d.createElement(Vt,{className:"desc-container",title:"告警事件详情",actions:[d.createElement("div",{className:"action-btns"},d.createElement(Rt,null,d.createElement(xt,{type:"primary",onClick:()=>{r.push("/alert-mutes/add",{cluster:o.cluster,tags:o.tags?o.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}})):[]})}},"屏蔽"),!i&&d.createElement(xt,{danger:!0,onClick:()=>{o.group_id?Xne(o.group_id,[Number(t)],(()=>{r.replace("/alert-cur-events")})):vt.warn("该告警未返回业务组ID")}},"删除")))]},o&&d.createElement("div",null,o.rule_algo&&d.createElement("div",null,d.createElement(Rt,null,d.createElement(ou,{value:u,onChange:h}),d.createElement(lu,{value:p,onChange:e=>m(e),initialValue:p})),d.createElement(Vte,{series:g})),l.filter((e=>!!o.is_recovered||"recover_time"!==e.key)).map((({label:e,key:t,render:n},r)=>d.createElement("div",{className:"desc-row",key:t+r},d.createElement("div",{className:"desc-label"},e,"："),d.createElement("div",{className:"desc-content"},n?n(o[t],o):o[t])))))))))},ere=()=>{const e=C(),{t:t}=Lr(),n=Wr(),r=f.exports.useRef({handleReload(){}}),{hisHourRange:i,hisQueryContent:a}=ri((e=>e.event)),[o,s]=f.exports.useState(),[l,c]=f.exports.useState(),[u,h]=f.exports.useState([]),p=f.exports.useRef(!1),[m,g]=f.exports.useState(-1),v=f.exports.useMemo((()=>[{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:2,unit:"days",description:t("天")},{num:3,unit:"days",description:t("天")},{num:7,unit:"days",description:t("天")},{num:14,unit:"days",description:t("天")},{num:30,unit:"days",description:t("天")},{num:60,unit:"days",description:t("天")},{num:90,unit:"days",description:t("天")}]),[]),y=[{title:t("集群"),dataIndex:"cluster",width:120},{title:t("规则标题&事件标签"),dataIndex:"rule_name",render(t,{id:n,tags:r}){const i=r&&r.map((e=>d.createElement(Ot,{color:"purple",key:e,onClick:t=>{a.includes(e)||(p.current=!0,x("hisQueryContent",a?`${a.trim()} ${e}`:e))}},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>e.push(`/alert-his-events/${n}`)},t)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},i)))}},{title:t("计算时间"),dataIndex:"last_eval_time",width:120,render:e=>A(1e3*(e||0)).format("YYYY-MM-DD HH:mm:ss")}];function x(e,t){n({type:"event/saveData",prop:e,data:t})}return f.exports.useEffect((()=>{p.current&&(r.current.handleReload(),p.current=!1)}),[a]),f.exports.useEffect((()=>{r.current.handleReload()}),[u,o,i,l,m]),d.createElement(Ki,{icon:d.createElement(Xe,null),title:t("历史告警"),hideCluster:!0},d.createElement("div",{className:"event-content"},d.createElement("div",{className:"table-area"},d.createElement($ne,{ref:r,antProps:{rowKey:"id",rowClassName:(e,t)=>Wne[e.is_recovered?3:e.severity-1]+"-left-border"},url:"/api/n9e/alert-his-events/list",customQueryCallback:e=>Object.assign(e,{hours:"hours"!==i.unit?24*i.num:i.num},u.length?{clusters:u.join(",")}:{},void 0!==o?{severity:o}:{},a?{query:a}:{},void 0!==l?{is_recovered:l}:{},{bgid:m}),pageParams:{curPageName:"p",pageSizeName:"limit",pageSize:30,pageSizeOptions:["30","100","200","500"]},apiCallback:({dat:{list:e,total:t}})=>({data:e,total:t}),columns:y,reloadBtnType:"btn",reloadBtnPos:"left",filterType:"flex",leftHeader:d.createElement("div",{className:"table-operate-box"},d.createElement("div",{className:"left"},d.createElement(ou,{showRight:!1,leftList:v,value:i,onChange:e=>{e.num===i.num&&e.unit===i.unit||x("hisHourRange",e)}}),d.createElement(ao,{onSeverityChange:e=>s(e),onEventTypeChange:e=>c(e),onBusiGroupChange:e=>g("number"==typeof e?e:-1),onClusterChange:e=>h(e)}),d.createElement(Ct,{className:"search-input",prefix:d.createElement(M,null),placeholder:"模糊搜索规则和标签(多个关键词请用空格分隔)",value:a,onChange:e=>x("hisQueryContent",e.target.value),onPressEnter:e=>r.current.handleReload()})))}))))};var tre,nre;function rre(e){return are(!0,e)}function ire(e){return are(!1,e)}function are(e,t){return ai("/api/n9e/targets/tags",{method:e?Qr.Post:Qr.Delete,data:t})}function ore(e){return ai("/api/n9e/targets/bgid",{method:Qr.Put,data:Object.assign({bgid:0},e)})}function sre(e){return ai("/api/n9e/targets/note",{method:Qr.Put,data:e})}function lre(e){return ai("/api/n9e/targets",{method:Qr.Delete,data:e})}(nre=tre||(tre={})).BindTag="bindTag",nre.UnbindTag="unbindTag",nre.UpdateBusi="updateBusi",nre.RemoveBusi="removeBusi",nre.UpdateNote="updateNote",nre.Delete="delete",nre.None="none";const{TextArea:cre}=Ct,ure=()=>{function e(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function t(t){const{isCorrectFormat:n,isLengthAllowed:r}=e(t.value);return n&&r?d.createElement(Ot,{closable:t.closable,onClose:t.onClose},t.value):d.createElement(Tt,{title:n?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Ot,{color:"error",closable:t.closable,onClose:t.onClose,style:{marginTop:"2px"}},t.value))}function n(){return{validator:(t,n)=>n.some((t=>{const{isCorrectFormat:n,isLengthAllowed:r}=e(t);if(!n||!r)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}return{operateTitle:"绑定标签",requestFunc:rre,isFormItem:!0,render:()=>d.createElement(bt.Item,{label:"标签",name:"tags",rules:[{required:!0,message:"请填写至少一项标签！"},n]},d.createElement(Mt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:t}))}},hre=e=>({operateTitle:"解绑标签",requestFunc:ire,isFormItem:!0,render:()=>d.createElement(bt.Item,{label:"标签",name:"tags",rules:[{required:!0,message:"请选择至少一项标签！"}]},d.createElement(Mt,{mode:"multiple",showArrow:!0,placeholder:"请选择要解绑的标签",options:e.map((e=>({label:e,value:e})))}))}),pre=()=>({operateTitle:"移出业务组",requestFunc:ore,isFormItem:!1,render:()=>d.createElement(Ht,{message:"提示信息：移出所属业务组，该业务组的管理人员将不再有权限操作这些监控对象！您可能需要提前清空这批监控对象的标签和备注信息！",type:"error"})}),dre=()=>({operateTitle:"修改备注",requestFunc:sre,isFormItem:!0,render:()=>d.createElement(bt.Item,{label:"备注信息",name:"note"},d.createElement(Ct,{maxLength:64,placeholder:"内容如果为空，表示清空备注信息"}))}),fre=()=>({operateTitle:"批量删除",requestFunc:lre,isFormItem:!1,render:()=>d.createElement(Ht,{message:"提示信息：该操作会把监控对象从系统内中彻底删除，非常危险，慎重操作！",type:"error"})}),mre=({operateType:e,setOperateType:t,idents:n,reloadList:r})=>{const{busiGroups:i}=ri((e=>e.common)),[a]=bt.useForm(),[o,s]=f.exports.useState(!1),[l,c]=f.exports.useState(n),[u,h]=f.exports.useState([]),p=e===tre.UnbindTag?u:i,m={bindTagDetail:ure,unbindTagDetail:hre,updateBusiDetail:e=>({operateTitle:"修改业务组",requestFunc:ore,isFormItem:!0,render:()=>d.createElement(bt.Item,{label:"归属业务组",name:"bgid",rules:[{required:!0,message:"请选择归属业务组！"}]},d.createElement(Mt,{showSearch:!0,style:{width:"100%"},placeholder:"请选择归属业务组",options:E.map((({id:e,name:t})=>({label:t,value:e}))),optionFilterProp:"label",filterOption:!1,onSearch:C,onFocus:()=>{oi("").then((e=>{b(e.dat||[])}))},onClear:()=>{oi("").then((e=>{b(e.dat||[])}))}}))}),removeBusiDetail:pre,updateNoteDetail:dre,deleteDetail:fre,noneDetail:()=>({operateTitle:"",requestFunc:()=>Promise.resolve(),isFormItem:!1,render(){}})},{operateTitle:g,requestFunc:v,isFormItem:y,render:x}=m[`${e}Detail`](p),[E,b]=f.exports.useState(i);f.exports.useEffect((()=>{E.length||b(i)}),[i]);const C=f.exports.useCallback($.exports.debounce((e=>{oi(e).then((e=>{b(e.dat||[])}))}),800),[]);return f.exports.useEffect((()=>{e!==tre.None&&(c(n),a.setFieldsValue({idents:n.join("\n")}))}),[e,n]),f.exports.useEffect((()=>{var t;e===tre.UnbindTag&&l.length&&(t={idents:l.join(",")},ai("/api/n9e/targets/tags",{method:Qr.Get,params:t})).then((({dat:e})=>{const t=a.getFieldValue("tags")||[];a.setFieldsValue({tags:t.filter((t=>e.includes(t)))}),h(e)}))}),[e,l]),d.createElement(It,{visible:"none"!==e,title:g,confirmLoading:o,okButtonProps:{danger:e===tre.RemoveBusi||e===tre.Delete},okText:e===tre.RemoveBusi?"移出":e===tre.Delete?"删除":"确定",onOk:function(){a.validateFields().then((e=>{s(!0),e.idents=e.idents.split("\n"),v(e).then((()=>{vt.success(`${g}成功！`),t(tre.None),r(),a.resetFields(),s(!1)})).catch((()=>s(!1)))}))},onCancel:()=>{t(tre.None),a.resetFields()}},d.createElement(bt,{form:a,labelCol:{span:4},wrapperCol:{span:20}},d.createElement(bt.Item,{label:"监控对象",name:"idents",rules:[{required:!0,message:"请填写监控对象指标"}]},d.createElement(cre,{autoSize:{minRows:3,maxRows:10},placeholder:"请填写监控对象的指标，一行一个",onBlur:function(){const e=a.getFieldValue("idents"),t=e.split(/[ ,\n]+/).filter((e=>e)),n=t.join("\n");e!==n&&a.setFieldsValue({idents:n}),l.sort().join("\n")!==t.sort().join("\n")&&c(t)}})),y&&x()),!y&&x())},gre=()=>{const{t:e}=Lr(),t=f.exports.useRef({handleReload(){}}),n=f.exports.useRef(!1),[r,i]=f.exports.useState(""),[a,o]=f.exports.useState(tre.None),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState(-2),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState([]),v=[{title:"集群",dataIndex:"cluster",width:100,fixed:"left"},{title:"标识",dataIndex:"ident",width:140},{title:"标签",dataIndex:"tags",ellipsis:{showTitle:!1},render(e){const t=e&&e.map((e=>d.createElement(Ot,{color:"purple",key:e,onClick:t=>{r.includes(e)||(n.current=!0,i(r?`${r.trim()} ${e}`:e))}},e)));return e&&d.createElement(Tt,{title:t,placement:"topLeft",getPopupContainer:()=>document.body,overlayClassName:"mon-manage-table-tooltip"},t)}},{title:"业务组",dataIndex:"group_obj",render:e=>e?e.name:"未归组"},{title:"备注",dataIndex:"note",ellipsis:{showTitle:!1},render:e=>d.createElement(Tt,{title:e,placement:"topLeft",getPopupContainer:()=>document.body},e)}];return f.exports.useEffect((()=>{t.current.handleReload()}),[c,s]),f.exports.useEffect((()=>{n.current&&(t.current.handleReload(),n.current=!1)}),[r]),d.createElement(Ki,{icon:d.createElement(Ze,null),title:e("对象列表"),hideCluster:!0},d.createElement("div",{className:"object-manage-page-content"},d.createElement(ba,{busiGroup:{showNotGroupItem:!0,onChange(e){u("number"==typeof e?e:-1),p([]),g([])}}}),d.createElement("div",{className:"table-area"},-2!==c&&d.createElement($ne,{ref:t,antProps:{rowKey:"id",rowSelection:{selectedRowKeys:h,onChange(e,t){p(e),g(t?t.map((({ident:e})=>e)):[])}}},url:"/api/n9e/targets",customQueryCallback:e=>Object.assign(e,r?{query:r}:{},-1!==c?{bgid:c}:{},s.length?{clusters:s.join(",")}:{}),pageParams:{curPageName:"p",pageSizeName:"limit",pageSize:30,pageSizeOptions:["30","100","200","500"]},apiCallback:({dat:{list:e,total:t}})=>({data:e,total:t}),columns:v,reloadBtnType:"btn",reloadBtnPos:"left",filterType:"flex",leftHeader:d.createElement("div",{className:"table-operate-box"},d.createElement(Rt,null,d.createElement(ao,{noLeftPadding:!0,onClusterChange:e=>l(e)}),d.createElement(Ct,{className:"search-input",prefix:d.createElement(M,null),placeholder:"模糊搜索表格内容(多个关键词请用空格分隔)",value:r,onChange:e=>i(e.target.value),onPressEnter:e=>t.current.handleReload()})),d.createElement(wt,{trigger:["click"],overlay:d.createElement(yt,{onClick:({key:e})=>{o(e)}},d.createElement(yt.Item,{key:tre.BindTag},"绑定标签"),d.createElement(yt.Item,{key:tre.UnbindTag},"解绑标签"),d.createElement(yt.Item,{key:tre.UpdateBusi},"修改业务组"),d.createElement(yt.Item,{key:tre.RemoveBusi},"移出业务组"),d.createElement(yt.Item,{key:tre.UpdateNote},"修改备注"),d.createElement(yt.Item,{key:tre.Delete},"批量删除"))},d.createElement(xt,null,"批量操作 ",d.createElement(I,null))))}))),d.createElement(mre,{operateType:a,setOperateType:o,idents:m,reloadList:t.current.handleReload}))};function vre(e){const{onChange:t,value:n,className:r,style:i={},editable:a=!0,xCluster:o}=e,[l,c]=f.exports.useState(),u=f.exports.useRef(null);const h=(new sn).setComplete({remote:{fetchFn:function(e,t={}){return fetch(e,s({method:"Get",headers:new Headers({"X-Cluster":o,Authorization:`Bearer ${localStorage.getItem("access_token")||""}`})},t))},url:"/api/n9e/prometheus"}});return f.exports.useEffect((()=>{const e=new rn({state:ln.create({doc:n,extensions:[Qee,Mn,h.asExtension(),rn.updateListener.of((e=>{null==t||t(e.state.doc.toString())})),rn.editable.of(a)]}),parent:u.current});c(e)}),[]),d.createElement("div",{ref:u,className:r,style:Object.assign({fontSize:12},i)})}const{Panel:yre}=Zt;function xre(){const[e,t]=f.exports.useState("Default");return d.createElement("div",null,d.createElement(Zt,{defaultActiveKey:"3"},d.createElement(yre,{header:"PromqlEditor",key:"1"},d.createElement(kt,{style:{marginBottom:20}},d.createElement("p",null,"PromqlEditor 的自动闭合及联想功能不支持动态切换集群，xCluster变化后自己销毁并重新初始化组件"),d.createElement(vre,{style:{width:"100%"},xCluster:e}))),d.createElement(yre,{header:"G2PieChart",key:"2"},d.createElement(kt,null,d.createElement(ao,null))),d.createElement(yre,{header:"Honeycomb",key:"3"},d.createElement(kt,null,d.createElement("div",{style:{height:500,width:"100%"}})))))}function Ere(e){return t=>`/api/n9e/busi-group/${t}${e}`}const bre={tasktpls:Ere("/task-tpls"),tasktpl:Ere("/task-tpl"),tasks:Ere("/tasks"),task:Ere("/task"),perms:Ere("/builtin-perms")};var Cre={},Tre={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0}(Tre);var wre={};Object.defineProperty(wre,"__esModule",{value:!0}),wre.default=void 0;wre.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};var Sre={},kre={exports:{}};!function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(kre);var _re={};Object.defineProperty(_re,"__esModule",{value:!0}),_re.default=void 0;var Are={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};_re.default=Are;var Ore={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};e.default=t}(Ore),function(e){var t=Tre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(kre.exports),r=t(_re),i=t(Ore),a={lang:(0,n.default)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},r.default),timePickerLocale:(0,n.default)({},i.default)};a.lang.ok="确定";var o=a;e.default=o}(Sre);var Ire={};!function(e){var t=Tre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Sre).default;e.default=n}(Ire),function(e){var t=Tre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(wre),r=t(Sre),i=t(Ore),a=t(Ire),o="${label}不是一个有效的${type}",s={locale:"zh-cn",Pagination:n.default,DatePicker:r.default,TimePicker:i.default,Calendar:a.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};e.default=s}(Cre);var Mre=he(Cre),Nre={},Fre={},Lre={};Object.defineProperty(Lre,"__esModule",{value:!0}),Lre.default=void 0;Lre.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var Pre={},Rre={};Object.defineProperty(Rre,"__esModule",{value:!0}),Rre.default=void 0;var Dre={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};Rre.default=Dre;var Bre={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};e.default=t}(Bre),function(e){var t=Tre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(kre.exports),r=t(Rre),i=t(Bre),a={lang:(0,n.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},r.default),timePickerLocale:(0,n.default)({},i.default)};e.default=a}(Pre);var zre={};!function(e){var t=Tre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Pre).default;e.default=n}(zre),function(e){var t=Tre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Lre),r=t(Pre),i=t(Bre),a=t(zre),o="${label} is not a valid ${type}",s={locale:"en",Pagination:n.default,DatePicker:r.default,TimePicker:i.default,Calendar:a.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e.default=s}(Fre),function(e){var t=Tre.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Fre).default;e.default=n}(Nre);var Hre=he(Nre);function jre(e){return function(t){const n=document.createElement("div");function r(){q.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),q.render(d.createElement(Kt,{locale:"en"===t.language?Hre:Mre},d.createElement(e,s({},i))),n),{destroy:r}}}const Gre=bt.Item,$re=e=>{const{t:t}=Lr(),[n]=bt.useForm(),{visible:r}=e;return d.createElement(It,{title:t("tpl.tag.bind.title"),visible:r,onOk:()=>{const{selectedIds:r}=e;n.validateFields().then((n=>{ai(`${bre.tasktpls(e.busiId)}/tags`,{method:"POST",body:JSON.stringify({tags:n.tags,ids:r})}).then((()=>{vt.success(t("tpl.tag.bind.success")),e.onOk(),e.destroy()}))}))},onCancel:()=>{e.destroy()}},d.createElement(bt,{form:n},d.createElement(Gre,{label:t("tpl.tag.bind.field"),required:!0,name:"tags",rules:[{required:!0,message:"请选择！"}]},d.createElement(Mt,{mode:"tags",open:!1}))))};$re.defaultProps={visible:!0,onOk:T.noop,destroy:T.noop};var Yre=jre($re);const Ure=bt.Item,{Option:Vre}=Mt,Wre=e=>{const{t:t}=Lr(),[n]=bt.useForm(),{visible:r,uniqueTags:i}=e;return d.createElement(It,{title:t("tpl.tag.unbind.title"),visible:r,onOk:()=>{const{selectedIds:r}=e;n.validateFields().then((n=>{ai(`${bre.tasktpl(e.busiId)}s/tags`,{method:"DELETE",body:JSON.stringify({tags:n.tags,ids:r})}).then((()=>{vt.success(t("tpl.tag.unbind.success")),e.onOk(),e.destroy()}))}))},onCancel:()=>{e.destroy()}},d.createElement(bt,{form:n},d.createElement(Ure,{label:t("tpl.tag.unbind.field"),required:!0,name:"tags",rules:[{required:!0}]},d.createElement(Mt,{mode:"tags"},T.map(i,(e=>d.createElement(Vre,{key:e,value:e},e)))))))};Wre.defaultProps={visible:!0,onOk:T.noop,destroy:T.noop};var Xre=jre(Wre);const qre=e=>{const{t:t,i18n:n}=Lr(),r=f.exports.useRef(null),[i,a]=f.exports.useState(""),{curBusiItem:o}=ri((e=>e.common)),c=o.id,[u,h]=f.exports.useState([]),{tableProps:p,refresh:m}=Je((e=>function(e,t,n){return t?ai(`${bre.tasktpls(t)}?limit=${e.pageSize}&p=${e.current}&query=${n}`).then((e=>({list:e.dat.list,total:e.dat.total}))):Promise.resolve({list:[],total:0})}(e,c,i)),{refreshDeps:[c,i]});const g=[{title:"ID",dataIndex:"id"},{title:t("tpl.title"),dataIndex:"title",render:(e,t)=>d.createElement(D,{to:{pathname:`/job-tpls/${t.id}/detail`}},e)},{title:t("tpl.tags"),dataIndex:"tags",render:e=>T.map(e,(e=>d.createElement(Ot,{color:"purple",key:e,onClick:()=>function(e){var t;if(!T.includes(i,e)){const n=i?`${i} ${e}`:e;a(n),null==(t=r.current)||t.setValue(n)}}(e)},e)))},{title:t("tpl.creator"),dataIndex:"create_by",width:100},{title:t("tpl.last_updated"),dataIndex:"update_at",width:160,render:e=>A.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:t("table.operations"),width:220,render:(e,n)=>d.createElement("span",null,d.createElement(D,{to:{pathname:"/job-tpls/add/task",search:`tpl=${n.id}`}},t("task.create")),d.createElement(Nt,{type:"vertical"}),d.createElement(D,{to:{pathname:`/job-tpls/${n.id}/modify`}},t("table.modify")),d.createElement(Nt,{type:"vertical"}),d.createElement(D,{to:{pathname:`/job-tpls/${n.id}/clone`}},t("table.clone")),d.createElement(Nt,{type:"vertical"}),d.createElement(Jt,{title:d.createElement("div",{style:{width:100}},t("table.delete.sure")),onConfirm:()=>{var e;e=n.id,c&&ai(`${bre.tasktpl(c)}/${e}`,{method:"DELETE"}).then((()=>{vt.success(t("msg.delete.success")),m()}))}},d.createElement("a",{style:{color:"red"}},t("table.delete"))))}];return d.createElement(Ki,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(b,null),t("自愈脚本"))},d.createElement("div",{style:{display:"flex"}},d.createElement(ba,null),c?d.createElement("div",{style:{flex:1,padding:20}},d.createElement(kt,null,d.createElement(_t,{span:14,className:"mb10"},d.createElement(Ct,{style:{width:200},ref:r,prefix:d.createElement(M,null),defaultValue:i,onPressEnter:e=>{a(e.currentTarget.value)},placeholder:"搜索标题、标签"})),d.createElement(_t,{span:10,className:"textAlignRight"},d.createElement(D,{to:{pathname:"/job-tpls/add"}},d.createElement(xt,{icon:d.createElement(ke,null),style:{marginRight:10},type:"primary",ghost:!0},t("tpl.create"))),d.createElement(wt,{overlay:d.createElement(yt,null,d.createElement(yt.Item,null,d.createElement(xt,{type:"link",disabled:0===u.length,onClick:()=>{T.isEmpty(u)||Yre({language:n.language,selectedIds:u,busiId:c,onOk:()=>{m()}})}},t("tpl.tag.bind"))),d.createElement(yt.Item,null,d.createElement(xt,{type:"link",disabled:0===u.length,onClick:()=>{!function(){if(!T.isEmpty(u)){let e=[];T.each(p.dataSource,(t=>{const n=t.tags;e=T.union(e,n)})),Xre({language:n.language,selectedIds:u,uniqueTags:e,busiId:c,onOk:()=>{m()}})}}()}},t("tpl.tag.unbind"))))},d.createElement(xt,{icon:d.createElement(I,null)},t("table.batch.operations"))))),d.createElement(Ft,l(s({rowKey:"id",columns:g},p),{rowSelection:{selectedRowKeys:u,onChange:e=>{h(e)}},pagination:l(s({},p.pagination),{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==n.language?`Total ${e} items`:`共 ${e} 条`})}))):d.createElement(Ca,{text:"自愈脚本"})))};!function(e,t){ace.define("ace/mode/sh_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,a=t.reservedKeywords="!|{|}|case|do|done|elif|else|esac|fi|for|if|in|then|until|while|&|;|export|local|read|typeset|unset|elif|select|set|function|declare|readonly",o=t.languageConstructs="[|]|alias|bg|bind|break|builtin|cd|command|compgen|complete|continue|dirs|disown|echo|enable|eval|exec|exit|fc|fg|getopts|hash|help|history|jobs|kill|let|logout|popd|printf|pushd|pwd|return|set|shift|shopt|source|suspend|test|times|trap|type|ulimit|umask|unalias|wait",s=function(){var e=this.createKeywordMapper({keyword:a,"support.function.builtin":o,"invalid.deprecated":"debugger"},"identifier");this.$rules={start:[{token:"constant",regex:/\\./},{token:["text","comment"],regex:/(^|\s)(#.*)$/},{token:"string.start",regex:'"',push:[{token:"constant.language.escape",regex:/\\(?:[$`"\\]|$)/},{include:"variables"},{token:"keyword.operator",regex:/`/},{token:"string.end",regex:'"',next:"pop"},{defaultToken:"string"}]},{token:"string",regex:"\\$'",push:[{token:"constant.language.escape",regex:/\\(?:[abeEfnrtv\\'"]|x[a-fA-F\d]{1,2}|u[a-fA-F\d]{4}([a-fA-F\d]{4})?|c.|\d{1,3})/},{token:"string",regex:"'",next:"pop"},{defaultToken:"string"}]},{regex:"<<<",token:"keyword.operator"},{stateName:"heredoc",regex:"(<<-?)(\\s*)(['\"`]?)([\\w\\-]+)(['\"`]?)",onMatch:function(e,t,n){var r="-"==e[2]?"indentedHeredoc":"heredoc",i=e.split(this.splitRegex);return n.push(r,i[4]),[{type:"constant",value:i[1]},{type:"text",value:i[2]},{type:"string",value:i[3]},{type:"support.class",value:i[4]},{type:"string",value:i[5]}]},rules:{heredoc:[{onMatch:function(e,t,n){return e===n[1]?(n.shift(),n.shift(),this.next=n[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^\t+"},{onMatch:function(e,t,n){return e===n[1]?(n.shift(),n.shift(),this.next=n[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(e,t){return"heredoc"===t[0]||"indentedHeredoc"===t[0]?t[0]:e}},{token:["keyword","text","text","text","variable"],regex:/(declare|local|readonly)(\s+)(?:(-[fixar]+)(\s+))?([a-zA-Z_][a-zA-Z0-9_]*\b)/},{token:"variable.language",regex:"(?:\\$(?:SHLVL|\\$|\\!|\\?))"},{token:"variable",regex:"(?:[a-zA-Z_][a-zA-Z0-9_]*(?==))"},{include:"variables"},{token:"support.function",regex:"(?:[a-zA-Z_][a-zA-Z0-9_]*\\s*\\(\\))"},{token:"support.function",regex:"(?:&(?:\\d+))"},{token:"string",start:"'",end:"'"},{token:"constant.numeric",regex:"(?:(?:(?:(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.))|(?:\\d+)))|(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.)))"},{token:"constant.numeric",regex:"(?:(?:[1-9]\\d*)|(?:0))\\b"},{token:e,regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|~|<|>|<=|=>|=|!=|[%&|`]"},{token:"punctuation.operator",regex:";"},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]]"},{token:"paren.rparen",regex:"[\\)\\}]",next:"pop"}],variables:[{token:"variable",regex:/(\$)(\w+)/},{token:["variable","paren.lparen"],regex:/(\$)(\()/,push:"start"},{token:["variable","paren.lparen","keyword.operator","variable","keyword.operator"],regex:/(\$)(\{)([#!]?)(\w+|[*@#?\-$!0_])(:[?+\-=]?|##?|%%?|,,?\/|\^\^?)?/,push:"start"},{token:"variable",regex:/\$[*@#?\-$!0_]/},{token:["variable","paren.lparen"],regex:/(\$)(\{)/,push:"start"}]},this.normalizeRules()};r.inherits(s,i),t.ShHighlightRules=s})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){var r=e("../../lib/oop"),i=e("../../range").Range,a=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(o,a),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var i=this._getFoldWidgetBase(e,t,n);return!i&&this.startRegionRe.test(r)?"start":i},this.getFoldWidgetRange=function(e,t,n,r){var i,a=e.getLine(n);if(this.startRegionRe.test(a))return this.getCommentRegionBlock(e,a,n);if(i=a.match(this.foldingStartMarker)){var o=i.index;if(i[1])return this.openingBracketBlock(e,i[1],n,o);var s=e.getCommentFoldRange(n,o+i[0].length,1);return s&&!s.isMultiLine()&&(r?s=this.getSectionRange(e,n):"all"!=t&&(s=null)),s}if("markbegin"!==t&&(i=a.match(this.foldingStopMarker))){o=i.index+i[0].length;return i[1]?this.closingBracketBlock(e,i[1],n,o):e.getCommentFoldRange(n,o,-1)}},this.getSectionRange=function(e,t){for(var n=e.getLine(t),r=n.search(/\S/),a=t,o=n.length,s=t+=1,l=e.getLength();++t<l;){var c=(n=e.getLine(t)).search(/\S/);if(-1!==c){if(r>c)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=a)break;if(u.isMultiLine())t=u.end.row;else if(r==c)break}s=t}}return new i(a,o,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,n){for(var r=t.search(/\s*$/),a=e.getLength(),o=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<a;){t=e.getLine(n);var c=s.exec(t);if(c&&(c[1]?l--:l++,!l))break}if(n>o)return new i(o,r,n,t.length)}}.call(o.prototype)})),ace.define("ace/mode/sh",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sh_highlight_rules","ace/range","ace/mode/folding/cstyle","ace/mode/behaviour/cstyle"],(function(e,t,n){var r=e("../lib/oop"),i=e("./text").Mode,a=e("./sh_highlight_rules").ShHighlightRules,o=e("../range").Range,s=e("./folding/cstyle").FoldMode,l=e("./behaviour/cstyle").CstyleBehaviour,c=function(){this.HighlightRules=a,this.foldingRules=new s,this.$behaviour=new l};r.inherits(c,i),function(){this.lineCommentStart="#",this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e).tokens;if(i.length&&"comment"==i[i.length-1].type)return r;"start"==e&&(t.match(/^.*[\{\(\[:]\s*$/)&&(r+=n));return r};var e={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(t,n,r){if("\r\n"!==r&&"\r"!==r&&"\n"!==r)return!1;var i=this.getTokenizer().getLineTokens(n.trim(),t).tokens;if(!i)return!1;do{var a=i.pop()}while(a&&("comment"==a.type||"text"==a.type&&a.value.match(/^\s+$/)));return!!a&&("keyword"==a.type&&e[a.value])},this.autoOutdent=function(e,t,n){n+=1;var r=this.$getIndent(t.getLine(n)),i=t.getTabString();r.slice(-i.length)==i&&t.remove(new o(n,r.length-i.length,n,r.length))},this.$id="ace/mode/sh",this.snippetFileId="ace/snippets/sh"}.call(c.prototype),t.Mode=c})),ace.require(["ace/mode/sh"],(function(t){e&&(e.exports=t)}))}({exports:{}});!function(e,t){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/monokai"],(function(t){e&&(e.exports=t)}))}({exports:{}});function Kre(e){return d.createElement(Nn,{placeholder:"Placeholder Text",style:{width:"100%"},height:e.height,mode:"sh",theme:"kuroir",name:"blah2",fontSize:14,showPrintMargin:!1,showGutter:!0,readOnly:e.readOnly,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2},value:e.value,onChange:t=>{e.onChange&&e.onChange(t)}})}!function(e,t){ace.define("ace/theme/kuroir",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!1,t.cssClass="ace-kuroir",t.cssText=".ace-kuroir .ace_gutter {background: #e8e8e8;color: #333;}.ace-kuroir .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-kuroir {background-color: #E8E9E8;color: #363636;}.ace-kuroir .ace_cursor {color: #202020;}.ace-kuroir .ace_marker-layer .ace_selection {background: rgba(245, 170, 0, 0.57);}.ace-kuroir.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #E8E9E8;}.ace-kuroir .ace_marker-layer .ace_step {background: rgb(198, 219, 174);}.ace-kuroir .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(0, 0, 0, 0.29);}.ace-kuroir .ace_marker-layer .ace_active-line {background: rgba(203, 220, 47, 0.22);}.ace-kuroir .ace_gutter-active-line {background-color: rgba(203, 220, 47, 0.22);}.ace-kuroir .ace_marker-layer .ace_selected-word {border: 1px solid rgba(245, 170, 0, 0.57);}.ace-kuroir .ace_invisible {color: #BFBFBF}.ace-kuroir .ace_fold {border-color: #363636;}.ace-kuroir .ace_constant{color:#CD6839;}.ace-kuroir .ace_constant.ace_numeric{color:#9A5925;}.ace-kuroir .ace_support{color:#104E8B;}.ace-kuroir .ace_support.ace_function{color:#005273;}.ace-kuroir .ace_support.ace_constant{color:#CF6A4C;}.ace-kuroir .ace_storage{color:#A52A2A;}.ace-kuroir .ace_invalid.ace_illegal{color:#FD1224;background-color:rgba(255, 6, 0, 0.15);}.ace-kuroir .ace_invalid.ace_deprecated{text-decoration:underline;font-style:italic;color:#FD1732;background-color:#E8E9E8;}.ace-kuroir .ace_string{color:#639300;}.ace-kuroir .ace_string.ace_regexp{color:#417E00;background-color:#C9D4BE;}.ace-kuroir .ace_comment{color:rgba(148, 148, 148, 0.91);background-color:rgba(220, 220, 220, 0.56);}.ace-kuroir .ace_variable{color:#009ACD;}.ace-kuroir .ace_meta.ace_tag{color:#005273;}.ace-kuroir .ace_markup.ace_heading{color:#B8012D;background-color:rgba(191, 97, 51, 0.051);}.ace-kuroir .ace_markup.ace_list{color:#8F5B26;}",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/kuroir"],(function(t){e&&(e.exports=t)}))}({exports:{}}),Kre.defaultProps={readOnly:!1,height:"500px"};const Qre=bt.Item,{TextArea:Zre}=Ct,Jre=e=>{const{t:t}=Lr(),[n]=bt.useForm();f.exports.useEffect((()=>{}));const{initialValues:r,type:i}=e;return d.createElement("div",{className:"job-tpl-form"},d.createElement(bt,{onFinish:t=>{e.onSubmit(l(s({},t),{hosts:T.split(t.hosts,"\n")}))},form:n,layout:"vertical"},d.createElement(Qre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Title:"),t("tpl"===i?"tpl.title.tpl.help":"tpl.title.task.help")),name:"title",initialValue:r.title,rules:[{required:!0,message:"必填项！"}]},d.createElement(Ct,null)),"tpl"===i?d.createElement(Qre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Tags:"),t("tpl.tags.help")),name:"tags",initialValue:r.tags},d.createElement(Mt,{mode:"tags",open:!1,style:{width:"100%"}})):null,d.createElement(Qre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Account:"),t("tpl.account.help")),name:"account",initialValue:r.account,rules:[{required:!0,message:"必填项！"}]},d.createElement(Ct,null)),d.createElement(Qre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Batch:"),t("tpl.batch.help")),name:"batch",initialValue:r.batch,rules:[{required:!0,message:"必填项！"}]},d.createElement(Dt,{min:0})),d.createElement(Qre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Tolerance:"),t("tpl.tolerance.help")),name:"tolerance",initialValue:r.tolerance,rules:[{required:!0,message:"必填项！"}]},d.createElement(Dt,{min:0})),d.createElement(Qre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Timeout:"),t("tpl.timeout.help")),name:"timeout",initialValue:r.timeout},d.createElement(Dt,{min:0})),d.createElement(Qre,{label:d.createElement("span",null,d.createElement("strong",null,"Pause:"),t("tpl.pause.help")),name:"pause",initialValue:r.pause},d.createElement(Ct,null)),d.createElement(Qre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Host:"),t("tpl.host.help")),name:"hosts",initialValue:T.join(r.hosts,"\n"),rules:[{required:"tpl"!==i,message:"必填项！"}]},d.createElement(Zre,{autoSize:{minRows:3,maxRows:8}})),d.createElement(Qre,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Script:"),t("tpl.script.help")),name:"script",initialValue:r.script,rules:[{required:!0,message:"必填项！"}]},d.createElement(Kre,null)),d.createElement(Qre,{label:d.createElement("span",null,d.createElement("strong",null,"Args:"),t("tpl.args.help")),name:"args",initialValue:r.args},d.createElement(Ct,null)),d.createElement(Qre,null,e.footer)))};Jre.defaultProps={type:"tpl",initialValues:{title:"",batch:0,tolerance:0,timeout:30,pause:"",script:"#!/bin/bash\n# e.g.\nexport PATH=/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:~/bin\nss -tln",args:"",tags:void 0,account:"root",hosts:[],treeData:[]},onSubmit:()=>{}};var eie=et(Jre);const tie=e=>{const t=C(),{curBusiItem:n}=ri((e=>e.common)),{t:r}=Lr();return d.createElement(Ki,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Vt,{title:"创建自愈脚本"},d.createElement(eie,{onSubmit:t=>{ai(`${bre.tasktpls(n.id)}`,{method:"POST",body:JSON.stringify(t)}).then((()=>{vt.success(r("msg.create.success")),e.history.push({pathname:"/job-tpls"})}))},footer:d.createElement("div",null,d.createElement(xt,{type:"primary",htmlType:"submit",style:{marginRight:8}},r("form.submit")))}))))},nie=e=>{const t=C(),n=T.get(e,"match.params.id"),{curBusiItem:r}=ri((e=>e.common)),{t:i}=Lr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),ai(`${bre.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(Ki,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Vt,{title:"自愈脚本详情"},d.createElement(qt,{spinning:a},d.createElement("div",{className:"job-task-table"},d.createElement("div",{className:"ant-table ant-table-default ant-table-bordered"},d.createElement("div",{className:"ant-table-content"},d.createElement("div",{className:"ant-table-body"},d.createElement("table",null,d.createElement("colgroup",null,d.createElement("col",{style:{width:100,minWidth:100}}),d.createElement("col",null)),d.createElement("tbody",{className:"ant-table-tbody"},d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.title")),d.createElement("td",null,c.title)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("tpl.creator")),d.createElement("td",null,c.create_by)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("tpl.last_updated")),d.createElement("td",null,A.unix(c.update_at).format("YYYY-MM-DD HH:mm:ss"))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.control.params")),d.createElement("td",null,i("task.account"),"：",c.account,d.createElement(Nt,{type:"vertical"}),i("task.batch"),"：",c.batch,d.createElement(Nt,{type:"vertical"}),i("task.tolerance"),"：",c.tolerance,d.createElement(Nt,{type:"vertical"}),i("task.timeout"),"：",c.timeout)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,d.createElement("div",{style:{height:"100%"}},i("task.script"))),d.createElement("td",null,d.createElement(Kre,{value:c.script,readOnly:!0,height:"200px"}))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.script.args")),d.createElement("td",null,c.args)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.pause")),d.createElement("td",null,c.pause)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.host.list")),d.createElement("td",null,T.map(c.hosts,(e=>d.createElement("div",{key:e},e))))))))))),d.createElement("div",{style:{marginTop:10}},d.createElement(D,{to:{pathname:`/job-tpls/${n}/modify`}},d.createElement(xt,{type:"primary",style:{marginRight:10}},i("tpl.modify"))),d.createElement(D,{to:{pathname:"/job-tpls/add/task",search:`tpl=${n}`}},d.createElement(xt,{type:"primary"},i("tpl.create.task"))))))))},rie=e=>{const t=C(),n=T.get(e,"match.params.id"),{curBusiItem:r}=ri((e=>e.common)),{t:i}=Lr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),ai(`${bre.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(Ki,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Vt,{title:"修改自愈脚本"},d.createElement(qt,{spinning:a},c.title?d.createElement(eie,{onSubmit:t=>{ai(`${bre.tasktpl(r.id)}/${n}`,{method:"PUT",body:JSON.stringify(t)}).then((()=>{vt.success(i("msg.modify.success")),e.history.push({pathname:"/job-tpls"})}))},initialValues:c,footer:d.createElement(xt,{type:"primary",htmlType:"submit"},i("form.submit"))}):null))))},iie=e=>{const t=C(),n=T.get(e,"match.params.id"),{curBusiItem:r}=ri((e=>e.common)),{t:i}=Lr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),ai(`${bre.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(Ki,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(Vt,{title:"克隆自愈脚本"},d.createElement(qt,{spinning:a},c.title?d.createElement(eie,{onSubmit:t=>{ai(`${bre.tasktpls(r.id)}`,{method:"POST",body:JSON.stringify(t)}).then((()=>{vt.success(i("msg.create.success")),e.history.push({pathname:"/job-tpls"})}))},initialValues:c,footer:d.createElement("div",null,d.createElement(xt,{type:"primary",htmlType:"submit",style:{marginRight:8}},i("form.submit")))}):null))))};const aie=e=>{const t=C(),{t:n,i18n:r}=Lr(),[i,a]=f.exports.useState(""),[o,c]=f.exports.useState(!0),[u,h]=f.exports.useState(7),{curBusiItem:p}=ri((e=>e.common)),{tableProps:m}=Je((e=>function(e,t,n,r,i){return t?ai(`${bre.tasks(t)}?limit=${e.pageSize}&p=${e.current}&query=${n}&mine=${r?1:0}&days=${i}`).then((e=>({list:e.dat.list,total:e.dat.total}))):Promise.resolve({list:[],total:0})}(e,p.id,i,o,u)),{refreshDeps:[p.id,i,o,u]}),g=[{title:"ID",dataIndex:"id",width:100},{title:n("task.title"),dataIndex:"title",width:200,render:(e,t)=>d.createElement(D,{to:{pathname:`/job-tasks/${t.id}/result`}},e)},{title:n("table.operations"),width:150,render:(e,t)=>d.createElement("span",null,d.createElement(D,{to:{pathname:"/job-tasks/add",search:`task=${t.id}`}},n("task.clone")),d.createElement(Nt,{type:"vertical"}),d.createElement(D,{to:{pathname:`/job-tasks/${t.id}/detail`}},n("task.meta")))},{title:n("task.creator"),dataIndex:"create_by",width:100},{title:n("task.created"),dataIndex:"create_at",width:160,render:e=>A.unix(e).format("YYYY-MM-DD HH:mm:ss")}];return d.createElement(Ki,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(b,null),n("执行历史"))},d.createElement("div",{style:{display:"flex"}},d.createElement(ba,null),p.id?d.createElement("div",{style:{flex:1,padding:10}},d.createElement(kt,null,d.createElement(_t,{span:16,className:"mb10"},d.createElement(Ct,{style:{width:200,marginRight:10},prefix:d.createElement(M,null),defaultValue:i,onPressEnter:e=>{a(e.currentTarget.value)},placeholder:"搜索标题"}),d.createElement(Mt,{style:{marginRight:10},value:u,onChange:e=>{h(e)}},d.createElement(Mt.Option,{value:7},n("last.7.days")),d.createElement(Mt.Option,{value:15},n("last.15.days")),d.createElement(Mt.Option,{value:30},n("last.30.days")),d.createElement(Mt.Option,{value:60},n("last.60.days")),d.createElement(Mt.Option,{value:90},n("last.90.days"))),d.createElement(St,{checked:o,onChange:e=>{c(e.target.checked)}},n("task.only.mine"))),d.createElement(_t,{span:8,style:{textAlign:"right"}},d.createElement(xt,{type:"primary",ghost:!0,onClick:()=>{t.push("/job-tasks/add")}},n("task.temporary.create")))),d.createElement(Ft,l(s({rowKey:"id",columns:g},m),{pagination:l(s({},m.pagination),{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==r.language?`Total ${e} items`:`共 ${e} 条`})}))):d.createElement(Ca,{text:n("执行历史")})))},oie=e=>{const t=C(),n=Ci.parse(T.get(e,"location.search")),{curBusiItem:r}=ri((e=>e.common)),{t:i}=Lr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState(),[h,p]=f.exports.useState("");return f.exports.useEffect((()=>{T.isPlainObject(n)&&(void 0!==n.tpl?(o(!0),ai(`${bre.tasktpl(r.id)}/${n.tpl}`,{}).then((e=>{u(l(s({},e.dat.tpl),{hosts:e.dat.hosts}))})).finally((()=>{o(!1)}))):void 0!==n.task&&(o(!0),ai(`${bre.task(r.id)}/${n.task}`,{}).then((e=>{u(l(s({},e.dat.meta),{hosts:T.map(e.dat.hosts,(e=>e.host))}))})).finally((()=>{o(!1)}))))}),[]),d.createElement(Ki,{hideCluster:!0,title:n.tpl?d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本"):d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{background:"none"}},d.createElement(kt,{gutter:20},d.createElement(_t,{span:18},d.createElement(Vt,{title:n.tpl?"创建任务":n.task?"克隆任务":"创建临时任务"},d.createElement(qt,{spinning:a},c||!n.tpl&&!n.task?d.createElement(eie,{type:"task",initialValues:c,onSubmit:t=>{h&&ai(bre.tasks(r.id),{method:"POST",body:JSON.stringify(l(s({},t),{action:h}))}).then((t=>{vt.success(i("msg.create.success")),e.history.push({pathname:`/job-tasks/${t.dat}/result`})}))},footer:d.createElement("div",null,d.createElement(xt,{type:"primary",htmlType:"submit",style:{marginRight:10},onClick:()=>{p("pause")}},"保存暂不执行"),d.createElement(xt,{type:"primary",htmlType:"submit",onClick:()=>{p("start")}},"保存立刻执行"))}):null))),d.createElement(_t,{span:6},d.createElement(Ht,{showIcon:!0,message:"提示信息",description:"如果你的角色是管理员，则可以在任意机器执行脚本；否则，只能对有管理权限的业务组下的机器执行脚本",type:"warning"}))))))};const sie=e=>{const{t:t,i18n:n}=Lr(),r=async(r,i)=>{const{data:a}=e;let o=[];if("all"===i&&(o=T.map(a,(e=>e[r]))),T.isEmpty(o))return void vt.warning(t("host.copy.empty"));const s=T.join(o,"\n");(function(e){const t=document.createElement("textarea");t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style.left="-9999px";const n=window.pageYOffset||document.documentElement.scrollTop;let r;t.style.top=`${n}px`,t.setAttribute("readonly",""),t.value=e,document.body.appendChild(t),t.select();try{r=document.execCommand("copy")}catch(i){r=!1}return r&&document.body.removeChild(t),r})(s)?"zh"===n.language?vt.success(`复制成功${o.length}条记录`):"en"===n.language&&vt.success(`Successful copy ${o.length} items`):It.warning({title:t("host.copy.error"),content:d.createElement(Ct.TextArea,{defaultValue:s})})},{dataIndex:i}=e;return d.createElement("span",null,"Host",d.createElement(z,{className:"pointer",style:{paddingLeft:5},onClick:()=>r(i,"all")}))};sie.defaultProps={data:[],selected:[],hasSelected:!0};const lie=e=>{const t=C(),{curBusiItem:n}=ri((e=>e.common)),{params:r}=e.match,i=r.id,{t:a,i18n:o}=Lr(),[c,u]=f.exports.useState(),[h,p]=f.exports.useState({}),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState(!1),x=()=>(y(!0),ai(`${bre.task(n.id)}/${r.id}`).then((e=>{p(l(s({},e.dat.meta),{action:e.dat.action})),g(e.dat.hosts)})).finally((()=>{y(!1)})));f.exports.useEffect((()=>{x()}),[]);let E=T.cloneDeep(m);c&&(E=T.filter(E,(e=>T.includes(c,e.status))));const b=(e,t)=>{ai(`${bre.task(n.id)}/${i}/host/${e}/action`,{method:"PUT",body:JSON.stringify({action:t})}).then((()=>{x()}))},w=e=>{ai(`${bre.task(n.id)}/${i}/action`,{method:"PUT",body:JSON.stringify({action:e})}).then((()=>{x()}))},S=[{title:d.createElement(sie,{dataIndex:"host",hasSelected:!1,data:E}),dataIndex:"host"},{title:a("task.status"),dataIndex:"status",filters:(()=>{const e=T.groupBy(m,"status");return T.map(e,((e,t)=>({text:`${t} (${e.length})`,value:t})))})(),onFilter:(e,t)=>t.status===e,render:e=>"success"===e?d.createElement(Ot,{color:"#87d068"},e):"cancelled"===e||"ignored"===e?d.createElement(Ot,{color:"#ec971f"},e):"failed"===e||"killfailed"===e||"timeout"===e?d.createElement(Ot,{color:"#f50"},e):d.createElement(Ot,null,e)},{title:a("task.output"),render:(e,t)=>d.createElement("span",null,d.createElement(D,{to:`/job-task/${n.id}/output/${r.id}/${t.host}/stdout`,target:"_blank"},"stdout"),d.createElement(Nt,{type:"vertical"}),d.createElement("a",{href:`/job-task/${n.id}/output/${r.id}/${t.host}/stderr`,target:"_blank"},"stderr"))}];return h.done||S.push({title:a("table.operations"),render:(e,t)=>d.createElement("span",null,d.createElement("a",{onClick:()=>b(t.host,"ignore")},"ignore"),d.createElement(Nt,{type:"vertical"}),d.createElement("a",{onClick:()=>b(t.host,"redo")},"redo"),d.createElement(Nt,{type:"vertical"}),d.createElement("a",{onClick:()=>b(t.host,"kill")},"kill"))}),d.createElement(Ki,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10},className:"job-task-result"},d.createElement(Vt,{title:h.title,extra:d.createElement("a",{onClick:()=>{x()}},a("task.refresh"))},d.createElement(kt,{style:{marginBottom:20}},d.createElement(_t,{span:18},d.createElement("div",null,d.createElement("a",{href:`/job-task/${n.id}/output/${i}/stdout`,target:"_blank"},"stdouts"),d.createElement(Nt,{type:"vertical"}),d.createElement("a",{href:`/job-task/${n.id}/output/${i}/stderr`,target:"_blank"},"stderrs"),d.createElement(Nt,{type:"vertical"}),d.createElement(D,{to:{pathname:`/job-tasks/${i}/detail`}},a("task.meta")),d.createElement(Nt,{type:"vertical"}),d.createElement(D,{to:{pathname:"/job-tasks/add",search:`task=${i}`}},a("task.clone")))),d.createElement(_t,{span:6,className:"textAlignRight"},h.done?null:d.createElement("span",null,"start"===h.action?d.createElement(xt,{className:"success-btn",onClick:()=>w("pause")},"Pause"):d.createElement(xt,{className:"success-btn",onClick:()=>w("start")},"Start"),d.createElement(xt,{className:"ml10 warning-btn",onClick:()=>w("cancel")},"Cancel"),d.createElement(xt,{className:"ml10 danger-btn",onClick:()=>w("kill")},"Kill")))),d.createElement(Ft,{rowKey:"host",columns:S,dataSource:m,loading:v,pagination:{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==o.language?`Total ${e} items`:`共 ${e} 条`},onChange:(e,t,n,r)=>{u(t.status)}}))))};const cie=e=>{const t=C(),{curBusiItem:n}=ri((e=>e.common)),{t:r}=Lr(),i=T.get(e,"match.params.id"),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{void 0!==i&&(o(!0),ai(`${bre.task(n.id)}/${i}`).then((e=>{u(l(s({},e.dat.meta),{hosts:T.map(e.dat.hosts,(e=>e.host))}))})).finally((()=>{o(!1)})))}),[i]),d.createElement(Ki,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10}},d.createElement(Vt,{title:c.title},d.createElement(qt,{spinning:a},d.createElement("div",{className:"job-task-table"},d.createElement("div",{className:"ant-table ant-table-default ant-table-bordered"},d.createElement("div",{className:"ant-table-content"},d.createElement("div",{className:"ant-table-body"},d.createElement("table",null,d.createElement("colgroup",null,d.createElement("col",{style:{width:100,minWidth:100}}),d.createElement("col",null)),d.createElement("tbody",{className:"ant-table-tbody"},d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.title")),d.createElement("td",null,c.title)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.creator")),d.createElement("td",null,c.creator," @ ",A(c.created).format("YYYY-MM-DD HH:mm:ss"))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.control.params")),d.createElement("td",null,r("task.account"),"：",c.account,d.createElement(Nt,{type:"vertical"}),r("task.batch"),"：",c.batch,d.createElement(Nt,{type:"vertical"}),r("task.tolerance"),"：",c.tolerance,d.createElement(Nt,{type:"vertical"}),r("task.timeout"),"：",c.timeout)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.script")),d.createElement("td",null,d.createElement(Kre,{value:c.script,readOnly:!0,height:"200px"}))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.script.args")),d.createElement("td",null,c.args)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.pause")),d.createElement("td",null,c.pause)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.host.list")),d.createElement("td",null,T.map(c.hosts,(e=>d.createElement("div",{key:e},e))))))))))),d.createElement("div",{style:{marginTop:10}},d.createElement(D,{to:{pathname:"/job-tasks/add",search:`task=${i}`}},d.createElement(xt,{type:"primary"},r("task.clone.new"))),d.createElement(D,{style:{marginLeft:8},to:{pathname:"/job-tasks"}},d.createElement(xt,null,"返回")))))))};function uie(){return f.exports.createElement("svg",{t:1638430671795,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":2334,xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em"},f.exports.createElement("defs",null,f.exports.createElement("style",{type:"text/css"})),f.exports.createElement("path",{d:"M724 839c15.464 0 28 12.536 28 28s-12.536 28-28 28H300c-15.464 0-28-12.536-28-28s12.536-28 28-28h424z m116-709c66.274 0 120 53.726 120 120v402c0 66.274-53.726 120-120 120H184c-66.274 0-120-53.726-120-120V250c0-66.274 53.726-120 120-120h656z m0 56H184c-34.993 0-63.426 28.084-63.991 62.942L120 250v402c0 34.993 28.084 63.426 62.942 63.991L184 716h656c34.993 0 63.426-28.084 63.991-62.942L904 652V250c0-34.993-28.084-63.426-62.942-63.991L840 186zM298 512c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32-17.673 0-32-14.327-32-32 0-17.673 14.327-32 32-32z m433 4c15.464 0 28 12.536 28 28s-12.536 28-28 28H387c-15.464 0-28-12.536-28-28s12.536-28 28-28h344zM298 327c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32-17.673 0-32-14.327-32-32 0-17.673 14.327-32 32-32z m433 4c15.464 0 28 12.536 28 28s-12.536 28-28 28H387c-15.464 0-28-12.536-28-28s12.536-28 28-28h344z","p-id":2335,fill:"currentColor"}))}var hie="5.6.0";function pie(){const[e,t]=f.exports.useState("");return f.exports.useEffect((()=>{fetch("/api/n9e/version").then((e=>e.text())).then((e=>{t(e)}))}),[]),d.createElement(Ki,{title:d.createElement(d.Fragment,null,d.createElement(x,{component:uie})," 系统版本"),hideCluster:!0},d.createElement("div",{style:{padding:10}},d.createElement("ul",{style:{padding:"20px 30px"}},d.createElement("li",null,"前端版本：",hie),d.createElement("li",null,"后端版本：",e))))}function die(){const[e,t]=f.exports.useState(4701),[n,r]=f.exports.useState(95);return f.exports.useEffect((()=>{fetch("https://api.github.com/repos/ccfos/nightingale").then((e=>{e.json().then((e=>{t(e.stargazers_count)}))})),fetch("https://api.github.com/repos/n9e/fe-v5").then((e=>{e.json().then((e=>{r(e.stargazers_count)}))}))}),[]),d.createElement(Ki,{title:d.createElement(d.Fragment,null,d.createElement(x,{component:uie})," 联系我们"),hideCluster:!0},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{padding:20}},d.createElement("ul",{style:{paddingLeft:10,marginBottom:10}},d.createElement("li",{style:{display:"flex",height:20}},"文档地址：",d.createElement("a",{href:"https://n9e.github.io/",target:"_blank"},"https://n9e.github.io/"))),d.createElement("div",{style:{paddingLeft:10,marginBottom:16}},"欢迎大家在github上关注夜莺项目，及时获取项目更新动态，有任何问题，也欢迎提交 issue，当然，如果能直接 PR 就更好了，开源软件，就是需要大家一起参与才能有蓬勃的生命力。"),d.createElement("ul",{style:{paddingLeft:10}},d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"后端代码仓库：",d.createElement("a",{href:"https://github.com/ccfos/nightingale",target:"_blank",style:{marginRight:8}},"https://github.com/ccfos/nightingale"),d.createElement("span",{className:"github-widget"},d.createElement("a",{className:"github-icon",href:"https://github.com/ccfos/nightingale",target:"_blank"},d.createElement(tt,null)," Star"),d.createElement("a",{className:"github-star",href:"https://github.com/ccfos/nightingale/stargazers",target:"_blank"},e))),d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"后端代码仓库：",d.createElement("a",{href:"https://www.gitlink.org.cn/ccfos/nightingale",target:"_blank",style:{marginRight:8}},"https://www.gitlink.org.cn/ccfos/nightingale")),d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"前端代码仓库：",d.createElement("a",{href:"https://github.com/n9e/fe-v5",target:"_blank",style:{marginRight:8}},"https://github.com/n9e/fe-v5"),d.createElement("span",{className:"github-widget"},d.createElement("a",{className:"github-icon",href:"https://github.com/n9e/fe-v5",target:"_blank"},d.createElement(tt,null)," Star"),d.createElement("a",{className:"github-star",href:"https://github.com/n9e/fe-v5/stargazers",target:"_blank"},n)))),d.createElement(en,{style:{border:"1px solid #efefef",height:250},preview:!1,src:"/image/wx_n9e.jpg"}))))}function fie(){const{busiGroups:e,curBusiItem:t}=ri((e=>e.common)),[n,r]=f.exports.useState(),[i,a]=f.exports.useState(e),[o,s]=f.exports.useState([]),[l,c]=f.exports.useState(T.uniqueId("tableKey_")),u=f.exports.useRef({}),[h,p]=f.exports.useState(!1),m=e=>{oi(e).then((e=>{a(e.dat||[])}))},g=f.exports.useCallback(T.debounce(m,800),[]);return f.exports.useEffect((()=>{r(T.get(t,"id"))}),[t]),f.exports.useEffect((()=>{a(e)}),[JSON.stringify(e)]),f.exports.useEffect((()=>{var e;n&&(e=T.toNumber(n),ai(`/api/n9e/busi-group/${e}/dashboards?`,{method:Qr.Get})).then((e=>{s(e.dat)}))}),[n]),d.createElement("div",null,d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement(Mt,{allowClear:!0,showSearch:!0,style:{minWidth:120},placeholder:"业务组",dropdownClassName:"overflow-586",filterOption:!1,onSearch:g,getPopupContainer:()=>document.body,onFocus:()=>{m("")},onClear:()=>{m("")},value:n,onChange:e=>{r(e)}},i.map((e=>d.createElement(Mt.Option,{value:e.id,key:e.id},e.name)))),d.createElement(xt,{type:"primary",onClick:async()=>{if(n){T.forEach(o,(e=>{u.current[e.id]="migrating"}));try{const e=await function(e,t){return ai(`/api/n9e/busi-group/${e}/dashboards/export`,{method:Qr.Post,data:{ids:t}}).then((e=>e.dat))}(n,T.map(o,"id"));for(const t of e){const e=T.get(T.find(o,{name:t.name}),"id");await Co(e,Hc(t)),u.current[e]="migrated",c(T.uniqueId("tableKey_"))}p(!0)}catch(e){console.error(e)}}},disabled:h},"大盘迁移")),d.createElement(Ft,{key:l,rowKey:"id",pagination:!1,dataSource:o,columns:[{title:"大盘名称",dataIndex:"name",key:"name"},{title:"更新时间",dataIndex:"update_at",key:"update_at",render:e=>A.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:"发布人",dataIndex:"update_by",key:"update_by"},{title:"状态",render:e=>u.current[e.id]}]}))}const{TabPane:mie}=zt;function gie(){return d.createElement(Ki,{title:d.createElement(d.Fragment,null,d.createElement(nt,null)," 管理员迁移"),hideCluster:!0},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{padding:20}},d.createElement(zt,{defaultActiveKey:"boards"},d.createElement(mie,{tab:"大盘迁移",key:"boards"},d.createElement(fie,null))))))}let vie=ci().reduce(((e,t)=>e.concat(t.routes)),[]);function yie(e){return d.createElement(it,{path:e.path,render:t=>d.createElement(e.component,l(s({},t),{routes:e.routes}))})}function xie(){let{profile:e}=ri((e=>e.account));const t=v(),n=Wr();return e.id||"/login"==t.pathname||t.pathname.startsWith("/callback")||(n({type:"common/getClusters"}),t.pathname.startsWith("/chart/")||t.pathname.startsWith("/alert-cur-events/")||t.pathname.startsWith("/alert-his-events/")||t.pathname.startsWith("/callback")||(n({type:"account/getProfile"}),n({type:"common/getBusiGroups"}))),d.createElement("div",{className:"content"},d.createElement(rt,null,d.createElement(it,{path:"/demo",component:xre}),d.createElement(it,{path:"/login",component:bi,exact:!0}),d.createElement(it,{path:"/callback",component:Mi,exact:!0}),d.createElement(it,{path:"/metric/explorer",component:cte,exact:!0}),d.createElement(it,{path:"/object/explorer",component:Mte,exact:!0}),d.createElement(it,{path:"/busi-groups",component:Kee}),d.createElement(it,{path:"/users",component:Xee}),d.createElement(it,{path:"/user-groups",component:Vee}),d.createElement(it,{path:"/account/profile/:tab",component:go}),d.createElement(it,{path:"/dashboard/:id",exact:!0,component:Aee}),d.createElement(it,{path:"/dashboards",component:nu}),d.createElement(it,{path:"/chart/:ids",component:K0}),d.createElement(it,{path:"/indicator",component:Pte}),d.createElement(it,{exact:!0,path:"/alert-rules/add/:group_id",component:Yte}),d.createElement(it,{exact:!0,path:"/alert-rules/edit/:id",component:Ute}),d.createElement(it,{exact:!0,path:"/alert-rules/:id?",component:uo}),d.createElement(it,{exact:!0,path:"/alert-rules/brain/:id",component:Kte}),d.createElement(it,{exact:!0,path:"/alert-mutes",component:Zte}),d.createElement(it,{exact:!0,path:"/alert-mutes/add/:from?",component:ine}),d.createElement(it,{exact:!0,path:"/alert-mutes/edit/:id",component:ane}),d.createElement(it,{exact:!0,path:"/alert-subscribes",component:lne}),d.createElement(it,{exact:!0,path:"/alert-subscribes/add",component:mne}),d.createElement(it,{exact:!0,path:"/alert-subscribes/edit/:id",component:gne}),d.createElement(it,{exact:!0,path:"/alert-cur-events",component:qne}),d.createElement(it,{exact:!0,path:"/alert-his-events",component:ere}),d.createElement(it,{exact:!0,path:"/alert-cur-events/:eventId",component:Jne}),d.createElement(it,{exact:!0,path:"/alert-his-events/:eventId",component:Jne}),d.createElement(it,{exact:!0,path:"/targets",component:gre}),d.createElement(it,{exact:!0,path:"/job-tpls",component:qre}),d.createElement(it,{exact:!0,path:"/job-tpls/add",component:tie}),d.createElement(it,{exact:!0,path:"/job-tpls/add/task",component:oie}),d.createElement(it,{exact:!0,path:"/job-tpls/:id/detail",component:nie}),d.createElement(it,{exact:!0,path:"/job-tpls/:id/modify",component:rie}),d.createElement(it,{exact:!0,path:"/job-tpls/:id/clone",component:iie}),d.createElement(it,{exact:!0,path:"/job-tasks",component:aie}),d.createElement(it,{exact:!0,path:"/job-tasks/add",component:oie}),d.createElement(it,{exact:!0,path:"/job-tasks/:id/result",component:lie}),d.createElement(it,{exact:!0,path:"/job-tasks/:id/detail",component:cie}),d.createElement(it,{exact:!0,path:"/help/version",component:pie}),d.createElement(it,{exact:!0,path:"/help/contact",component:die}),d.createElement(it,{exact:!0,path:"/help/migrate",component:gie}),vie.map(((e,t)=>d.createElement(yie,s({key:t},e)))),d.createElement(it,{path:"/",exact:!0},d.createElement(at,{to:"/metric/explorer"})),d.createElement(it,{path:"/403",component:Ei}),d.createElement(it,{path:"/404",component:xi}),d.createElement(it,{path:"*",component:xi})))}function Eie(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var bie="function"==typeof Symbol&&Symbol.observable||"@@observable",Cie=function(){return Math.random().toString(36).substring(7).split("").join(".")},Tie={INIT:"@@redux/INIT"+Cie(),REPLACE:"@@redux/REPLACE"+Cie(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Cie()}};function wie(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Sie(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Eie(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Eie(1));return n(Sie)(e,t)}if("function"!=typeof e)throw new Error(Eie(2));var i=e,a=t,o=[],s=o,l=!1;function c(){s===o&&(s=o.slice())}function u(){if(l)throw new Error(Eie(3));return a}function h(e){if("function"!=typeof e)throw new Error(Eie(4));if(l)throw new Error(Eie(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(Eie(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function p(e){if(!wie(e))throw new Error(Eie(7));if(void 0===e.type)throw new Error(Eie(8));if(l)throw new Error(Eie(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!=typeof e)throw new Error(Eie(10));i=e,p({type:Tie.REPLACE})}function f(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Eie(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[bie]=function(){return this},e}return p({type:Tie.INIT}),(r={dispatch:p,subscribe:h,getState:u,replaceReducer:d})[bie]=f,r}function kie(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Tie.INIT}))throw new Error(Eie(12));if(void 0===n(void 0,{type:Tie.PROBE_UNKNOWN_ACTION()}))throw new Error(Eie(13))}))}(n)}catch(rh){a=rh}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var l=o[s],c=n[l],u=e[l],h=c(u,t);if(void 0===h)throw t&&t.type,new Error(Eie(14));i[l]=h,r=r||h!==u}return(r=r||o.length!==Object.keys(e).length)?i:e}}function _ie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var Aie=function(e){return"@@redux-saga/"+e},Oie=Aie("CANCEL_PROMISE"),Iie=Aie("CHANNEL_END"),Mie=Aie("IO"),Nie=Aie("MATCH"),Fie=Aie("MULTICAST"),Lie=Aie("SAGA_ACTION"),Pie=Aie("SELF_CANCELLATION"),Rie=Aie("TASK"),Die=Aie("TASK_CANCEL"),Bie=Aie("TERMINATE"),zie=Aie("LOCATION"),Hie=function(e){return null==e},jie=function(e){return null!=e},Gie=function(e){return"function"==typeof e},$ie=function(e){return"string"==typeof e},Yie=Array.isArray,Uie=function(e){return e&&Gie(e.then)},Vie=function(e){return e&&Gie(e.next)&&Gie(e.throw)},Wie=function e(t){return t&&($ie(t)||Kie(t)||Gie(t)||Yie(t)&&t.every(e))},Xie=function(e){return e&&Gie(e.take)&&Gie(e.close)},qie=function(e){return Gie(e)&&e.hasOwnProperty("toString")},Kie=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};function Qie(e,t){var n;void 0===t&&(t=!0);var r=new Promise((function(r){n=setTimeout(r,e,t)}));return r[Oie]=function(){clearTimeout(n)},r}var Zie=function(e){return function(){return e}}(!0),Jie=function(){},eae=function(e){return e},tae=function(e,t){st(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function nae(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var rae=function(e){throw e},iae=function(e){return{value:e,done:!0}};function aae(e,t,n){void 0===t&&(t=rae),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:iae,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function oae(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var sae=function(e){return Array.apply(null,new Array(e))},lae=function(e){return function(t){return e(Object.defineProperty(t,Lie,{value:!0}))}},cae=function(e){return e===Bie},uae=function(e){return e===Die},hae=function(e){return cae(e)||uae(e)};function pae(e,t){var n,r=Object.keys(e),i=r.length,a=0,o=Yie(e)?sae(i):{},s={};return r.forEach((function(e){var r=function(r,s){n||(s||hae(r)?(t.cancel(),t(r,s)):(o[e]=r,++a===i&&(n=!0,t(o))))};r.cancel=Jie,s[e]=r})),t.cancel=function(){n||(n=!0,r.forEach((function(e){return s[e].cancel()})))},s}function dae(e){return{name:e.name||"anonymous",location:fae(e)}}function fae(e){return e[zie]}function mae(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,a=0,o=function(t){n[i]=t,i=(i+1)%e,r++},s=function(){if(0!=r){var t=n[a];return n[a]=null,r--,a=(a+1)%e,t}},l=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var c;if(r<e)o(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=s,a=i=(i+1)%e;break;case 4:c=2*e,n=l(),r=n.length,i=n.length,a=0,n.length=c,e=c,o(s)}},take:s,flush:l}}var gae=function(e){return mae(e,3)},vae=Object.freeze({__proto__:null,TAKE:"TAKE",PUT:"PUT",ALL:"ALL",RACE:"RACE",CALL:"CALL",CPS:"CPS",FORK:"FORK",JOIN:"JOIN",CANCEL:"CANCEL",SELECT:"SELECT",ACTION_CHANNEL:"ACTION_CHANNEL",CANCELLED:"CANCELLED",FLUSH:"FLUSH",GET_CONTEXT:"GET_CONTEXT",SET_CONTEXT:"SET_CONTEXT"}),yae=function(e,t){var n;return(n={})[Mie]=!0,n.combinator=!1,n.type=e,n.payload=t,n},xae=function(e){return yae("FORK",st({},e.payload,{detached:!0}))};function Eae(e,t){return void 0===e&&(e="*"),Wie(e)?yae("TAKE",{pattern:e}):Xie(n=e)&&n[Fie]&&jie(t)&&Wie(t)?yae("TAKE",{channel:e,pattern:t}):Xie(e)?yae("TAKE",{channel:e}):void 0;var n}function bae(e,t){return Hie(t)&&(t=e,e=void 0),yae("PUT",{channel:e,action:t})}function Cae(e){var t=yae("RACE",e);return t.combinator=!0,t}function Tae(e,t){var n,r=null;return Gie(e)?n=e:(Yie(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&$ie(n)&&Gie(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function wae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yae("CALL",Tae(e,n))}function Sae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yae("FORK",Tae(e,n))}function kae(e){return void 0===e&&(e=Pie),yae("CANCEL",e)}function _ae(e,t){return yae("ACTION_CHANNEL",{pattern:e,buffer:t})}var Aae=wae.bind(null,Qie);var Oae=[],Iae=0;function Mae(e){try{Lae(),e()}finally{Pae()}}function Nae(e){Oae.push(e),Iae||(Lae(),Rae())}function Fae(e){try{return Lae(),e()}finally{Rae()}}function Lae(){Iae++}function Pae(){Iae--}function Rae(){var e;for(Pae();!Iae&&void 0!==(e=Oae.shift());)Mae(e)}var Dae=function(e){return function(t){return e.some((function(e){return Gae(e)(t)}))}},Bae=function(e){return function(t){return e(t)}},zae=function(e){return function(t){return t.type===String(e)}},Hae=function(e){return function(t){return t.type===e}},jae=function(){return Zie};function Gae(e){var t="*"===e?jae:$ie(e)?zae:Yie(e)?Dae:qie(e)?zae:Gie(e)?Bae:Kie(e)?Hae:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var $ae={type:Iie},Yae=function(e){return e&&e.type===Iie};function Uae(e){var t;void 0===e&&(e=mae(t,4));var n=!1,r=[];return{take:function(t){n&&e.isEmpty()?t($ae):e.isEmpty()?(r.push(t),t.cancel=function(){nae(r,t)}):t(e.take())},put:function(t){if(!n){if(0===r.length)return e.put(t);r.shift()(t)}},flush:function(t){n&&e.isEmpty()?t($ae):t(e.flush())},close:function(){if(!n){n=!0;var e=r;r=[];for(var t=0,i=e.length;t<i;t++){(0,e[t])($ae)}}}}}function Vae(){var e,t,n,r,i,a,o=(t=!1,r=n=[],i=function(){r===n&&(r=n.slice())},a=function(){t=!0;var e=n=r;r=[],e.forEach((function(e){e($ae)}))},(e={})[Fie]=!0,e.put=function(e){if(!t)if(Yae(e))a();else for(var i=n=r,o=0,s=i.length;o<s;o++){var l=i[o];l[Nie](e)&&(l.cancel(),l(e))}},e.take=function(e,n){var a,o;void 0===n&&(n=jae),t?e($ae):(e[Nie]=n,i(),r.push(e),e.cancel=(a=function(){i(),nae(r,e)},o=!1,function(){o||(o=!0,a())}))},e.close=a,e),s=o.put;return o.put=function(e){e[Lie]?s(e):Nae((function(){s(e)}))},o}function Wae(e,t){var n=e[Oie];Gie(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var Xae,qae=0,Kae=function(){return++qae};function Qae(e){e.isRunning()&&e.cancel()}var Zae=((Xae={}).TAKE=function(e,t,n){var r=t.channel,i=void 0===r?e.channel:r,a=t.pattern,o=t.maybe,s=function(e){e instanceof Error?n(e,!0):!Yae(e)||o?n(e):n(Bie)};try{i.take(s,jie(a)?Gae(a):null)}catch(l){return void n(l,!0)}n.cancel=s.cancel},Xae.PUT=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;Nae((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(o){return void n(o,!0)}a&&Uie(t)?Wae(t,n):n(t)}))},Xae.ALL=function(e,t,n,r){var i=r.digestEffect,a=qae,o=Object.keys(t);if(0!==o.length){var s=pae(t,n);o.forEach((function(e){i(t[e],a,s[e],e)}))}else n(Yie(t)?[]:{})},Xae.RACE=function(e,t,n,r){var i=r.digestEffect,a=qae,o=Object.keys(t),s=Yie(t)?sae(o.length):{},l={},c=!1;o.forEach((function(e){var t=function(t,r){c||(r||hae(t)?(n.cancel(),n(t,r)):(n.cancel(),c=!0,s[e]=t,n(s)))};t.cancel=Jie,l[e]=t})),n.cancel=function(){c||(c=!0,o.forEach((function(e){return l[e].cancel()})))},o.forEach((function(e){c||i(t[e],a,l[e],e)}))},Xae.CALL=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,s=r.task;try{var l=a.apply(i,o);if(Uie(l))return void Wae(l,n);if(Vie(l))return void ooe(e,l,s.context,qae,dae(a),!1,n);n(l)}catch(c){n(c,!0)}},Xae.CPS=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var o=function(e,t){Hie(e)?n(t):n(e,!0)};i.apply(r,a.concat(o)),o.cancel&&(n.cancel=o.cancel)}catch(s){n(s,!0)}},Xae.FORK=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,s=t.detached,l=r.task,c=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if(Vie(i))return i;var a=!1;return aae((function(e){return a?{value:e,done:!0}:(a=!0,{value:i,done:!Uie(i)})}))}catch(o){return aae((function(){throw o}))}}({context:i,fn:a,args:o}),u=function(e,t){return e.isSagaIterator?{name:e.meta.name}:dae(t)}(c,a);Fae((function(){var t=ooe(e,c,l.context,qae,u,s,void 0);s?n(t):t.isRunning()?(l.queue.addTask(t),n(t)):t.isAborted()?l.queue.abort(t.error()):n(t)}))},Xae.JOIN=function(e,t,n,r){var i=r.task,a=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&nae(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(Yie(t)){if(0===t.length)return void n([]);var o=pae(t,n);t.forEach((function(e,t){a(e,o[t])}))}else a(t,n)},Xae.CANCEL=function(e,t,n,r){var i=r.task;t===Pie?Qae(i):Yie(t)?t.forEach(Qae):Qae(t),n()},Xae.SELECT=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(a){n(a,!0)}},Xae.ACTION_CHANNEL=function(e,t,n){var r=t.pattern,i=Uae(t.buffer),a=Gae(r),o=function t(n){Yae(n)||e.channel.take(t,a),i.put(n)},s=i.close;i.close=function(){o.cancel(),s()},e.channel.take(o,a),n(i)},Xae.CANCELLED=function(e,t,n,r){n(r.task.isCancelled())},Xae.FLUSH=function(e,t,n){t.flush(n)},Xae.GET_CONTEXT=function(e,t,n,r){n(r.task.context[t])},Xae.SET_CONTEXT=function(e,t,n,r){var i=r.task;tae(i.context,t),n()},Xae);function Jae(e,t){return e+"?"+t}function eoe(e){var t=e.name,n=e.location;return n?t+"  "+Jae(n.fileName,n.lineNumber):t}var toe=null,noe=[],roe=function(){toe=null,noe.length=0},ioe=function(){var e,t,n,r,i,a,o,s=noe[0],l=noe.slice(1),c=s.crashedEffect?(e=s.crashedEffect,(t=fae(e))?t.code+"  "+Jae(t.fileName,t.lineNumber):""):null;return["The above error occurred in task "+eoe(s.meta)+(c?" \n when executing effect "+c:"")].concat(l.map((function(e){return"    created by "+eoe(e.meta)})),[(n=noe,r=function(e){return e.cancelledTasks},i=n,o=(a=[]).concat.apply(a,i.map(r)),o.length?["Tasks cancelled due to error:"].concat(o).join("\n"):"")]).join("\n")};function aoe(e,t,n,r,i,a,o){var s;void 0===o&&(o=Jie);var l,c,u=0,h=null,p=[],d=Object.create(n),f=function(e,t,n){var r,i=[],a=!1;function o(e){t(),l(),n(e,!0)}function s(t){i.push(t),t.cont=function(s,l){a||(nae(i,t),t.cont=Jie,l?o(s):(t===e&&(r=s),i.length||(a=!0,n(r))))}}function l(){a||(a=!0,i.forEach((function(e){e.cont=Jie,e.cancel()})),i=[])}return s(e),{addTask:s,cancelAll:l,abort:o,getTasks:function(){return i}}}(t,(function(){p.push.apply(p,f.getTasks().map((function(e){return e.meta.name})))}),m);function m(t,n){if(n){if(u=2,(a={meta:i,cancelledTasks:p}).crashedEffect=toe,noe.push(a),g.isRoot){var r=ioe();roe(),e.onError(t,{sagaStack:r})}c=t,h&&h.reject(t)}else t===Die?u=1:1!==u&&(u=3),l=t,h&&h.resolve(t);var a;g.cont(t,n),g.joiners.forEach((function(e){e.cb(t,n)})),g.joiners=null}var g=((s={})[Rie]=!0,s.id=r,s.meta=i,s.isRoot=a,s.context=d,s.joiners=[],s.queue=f,s.cancel=function(){0===u&&(u=1,f.cancelAll(),m(Die,!1))},s.cont=o,s.end=m,s.setContext=function(e){tae(d,e)},s.toPromise=function(){return h||((e={}).promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),h=e,2===u?h.reject(c):0!==u&&h.resolve(l)),h.promise;var e},s.isRunning=function(){return 0===u},s.isCancelled=function(){return 1===u||0===u&&1===t.status},s.isAborted=function(){return 2===u},s.result=function(){return l},s.error=function(){return c},s);return g}function ooe(e,t,n,r,i,a,o){var s=e.finalizeRunEffect((function(t,n,r){if(Uie(t))Wae(t,r);else if(Vie(t))ooe(e,t,c.context,n,i,!1,r);else if(t&&t[Mie]){(0,Zae[t.type])(e,t.payload,r,u)}else r(t)}));h.cancel=Jie;var l={meta:i,cancel:function(){0===l.status&&(l.status=1,h(Die))},status:0},c=aoe(e,l,n,r,i,a,o),u={task:c,digestEffect:p};return o&&(o.cancel=c.cancel),h(),c;function h(e,n){try{var i;n?(i=t.throw(e),roe()):uae(e)?(l.status=1,h.cancel(),i=Gie(t.return)?t.return(Die):{done:!0,value:Die}):i=cae(e)?Gie(t.return)?t.return():{done:!0}:t.next(e),i.done?(1!==l.status&&(l.status=3),l.cont(i.value)):p(i.value,r,h)}catch(a){if(1===l.status)throw a;l.status=2,l.cont(a,!0)}}function p(t,n,r,i){void 0===i&&(i="");var a,o=Kae();function l(n,i){a||(a=!0,r.cancel=Jie,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),i&&function(e){toe=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:i,effect:t}),l.cancel=Jie,r.cancel=function(){a||(a=!0,l.cancel(),l.cancel=Jie,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},s(t,o,l)}}function soe(e,t){for(var n=e.channel,r=void 0===n?Vae():n,i=e.dispatch,a=e.getState,o=e.context,s=void 0===o?{}:o,l=e.sagaMonitor,c=e.effectMiddlewares,u=e.onError,h=void 0===u?oae:u,p=arguments.length,d=new Array(p>2?p-2:0),f=2;f<p;f++)d[f-2]=arguments[f];var m,g=t.apply(void 0,d),v=Kae();if(l&&(l.rootSagaStarted=l.rootSagaStarted||Jie,l.effectTriggered=l.effectTriggered||Jie,l.effectResolved=l.effectResolved||Jie,l.effectRejected=l.effectRejected||Jie,l.effectCancelled=l.effectCancelled||Jie,l.actionDispatched=l.actionDispatched||Jie,l.rootSagaStarted({effectId:v,saga:t,args:d})),c){var y=_ie.apply(void 0,c);m=function(e){return function(t,n,r){return y((function(t){return e(t,n,r)}))(t)}}}else m=eae;var x={channel:r,dispatch:lae(i),getState:a,sagaMonitor:l,onError:h,finalizeRunEffect:m};return Fae((function(){var e=ooe(x,g,s,v,dae(t),!0,void 0);return l&&l.effectResolved(v,e),e}))}function loe(e){var t,n=void 0===e?{}:e,r=n.context,i=void 0===r?{}:r,a=n.channel,o=void 0===a?Vae():a,s=n.sagaMonitor,l=lt(n,["context","channel","sagaMonitor"]);function c(e){var n=e.getState,r=e.dispatch;return t=soe.bind(null,st({},l,{context:i,channel:o,dispatch:r,getState:n,sagaMonitor:s})),function(e){return function(t){s&&s.actionDispatched&&s.actionDispatched(t);var n=e(t);return o.put(t),n}}}return c.run=function(){return t.apply(void 0,arguments)},c.setContext=function(e){tae(i,e)},c}var coe=function(e){return{done:!0,value:e}},uoe={};function hoe(e){return Xie(e)?"channel":qie(e)?String(e):Gie(e)?e.name:String(e)}function poe(e,t,n){var r,i,a,o=t;function s(t,n){if(o===uoe)return coe(t);if(n&&!i)throw o=uoe,n;r&&r(t);var s=n?e[i](n):e[o]();return o=s.nextState,a=s.effect,r=s.stateUpdater,i=s.errorState,o===uoe?coe(t):a}return aae(s,(function(e){return s(null,e)}),n)}function doe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o={done:!1,value:Eae(e)},s=function(e){return{done:!1,value:Sae.apply(void 0,[t].concat(r,[e]))}},l=function(e){return a=e};return poe({q1:function(){return{nextState:"q2",effect:o,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(a)}}},"q1","takeEvery("+hoe(e)+", "+t.name+")")}function foe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o,s={done:!1,value:Eae(e)},l=function(e){return{done:!1,value:Sae.apply(void 0,[t].concat(r,[e]))}},c=function(e){return{done:!1,value:kae(e)}},u=function(e){return a=e},h=function(e){return o=e};return poe({q1:function(){return{nextState:"q2",effect:s,stateUpdater:h}},q2:function(){return a?{nextState:"q3",effect:c(a)}:{nextState:"q1",effect:l(o),stateUpdater:u}},q3:function(){return{nextState:"q1",effect:l(o),stateUpdater:u}}},"q1","takeLatest("+hoe(e)+", "+t.name+")")}function moe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o={done:!1,value:Eae(e)},s=function(e){return{done:!1,value:wae.apply(void 0,[t].concat(r,[e]))}},l=function(e){return a=e};return poe({q1:function(){return{nextState:"q2",effect:o,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(a)}}},"q1","takeLeading("+hoe(e)+", "+t.name+")")}function goe(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s,l={done:!1,value:_ae(t,gae(1))},c=function(){return{done:!1,value:Eae(s)}},u=function(e){return{done:!1,value:Sae.apply(void 0,[n].concat(i,[e]))}},h={done:!1,value:Aae(e)},p=function(e){return o=e},d=function(e){return s=e};return poe({q1:function(){return{nextState:"q2",effect:l,stateUpdater:d}},q2:function(){return{nextState:"q3",effect:c(),stateUpdater:p}},q3:function(){return{nextState:"q4",effect:u(o)}},q4:function(){return{nextState:"q2",effect:h}}},"q1","throttle("+hoe(t)+", "+n.name+")")}function voe(e,t,n){for(var r=e,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s={done:!1,value:wae.apply(void 0,[n].concat(a))},l={done:!1,value:Aae(t)};return poe({q1:function(){return{nextState:"q2",effect:s,errorState:"q10"}},q2:function(){return{nextState:uoe}},q10:function(e){if((r-=1)<=0)throw e;return{nextState:"q1",effect:l}}},"q1","retry("+n.name+")")}function yoe(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s,l={done:!1,value:Eae(t)},c={done:!1,value:Cae({action:Eae(t),debounce:Aae(e)})},u=function(e){return{done:!1,value:Sae.apply(void 0,[n].concat(i,[e]))}},h=function(e){return{done:!1,value:e}},p=function(e){return o=e},d=function(e){return s=e};return poe({q1:function(){return{nextState:"q2",effect:l,stateUpdater:p}},q2:function(){return{nextState:"q3",effect:c,stateUpdater:d}},q3:function(){return s.debounce?{nextState:"q1",effect:u(o)}:{nextState:"q2",effect:h(s.action),stateUpdater:p}}},"q1","debounce("+hoe(t)+", "+n.name+")")}function xoe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Sae.apply(void 0,[doe,e,t].concat(r))}var Eoe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",actionChannel:_ae,all:function(e){var t=yae("ALL",e);return t.combinator=!0,t},apply:function(e,t,n){return void 0===n&&(n=[]),yae("CALL",Tae([e,t],n))},call:wae,cancel:kae,cancelled:function(){return yae("CANCELLED",{})},cps:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yae("CPS",Tae(e,n))},delay:Aae,effectTypes:vae,flush:function(e){return yae("FLUSH",e)},fork:Sae,getContext:function(e){return yae("GET_CONTEXT",e)},join:function(e){return yae("JOIN",e)},put:bae,putResolve:function(){var e=bae.apply(void 0,arguments);return e.payload.resolve=!0,e},race:Cae,select:function(e){void 0===e&&(e=eae);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yae("SELECT",{selector:e,args:n})},setContext:function(e){return yae("SET_CONTEXT",e)},spawn:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xae(Sae.apply(void 0,[e].concat(n)))},take:Eae,takeMaybe:function(){var e=Eae.apply(void 0,arguments);return e.payload.maybe=!0,e},debounce:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return Sae.apply(void 0,[yoe,e,t,n].concat(i))},retry:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return wae.apply(void 0,[voe,e,t,n].concat(i))},takeEvery:xoe,takeLatest:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Sae.apply(void 0,[foe,e,t].concat(r))},takeLeading:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Sae.apply(void 0,[moe,e,t].concat(r))},throttle:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return Sae.apply(void 0,[goe,e,t,n].concat(i))}});const boe="@@DVA_LOADING/SHOW",Coe="@@DVA_LOADING/HIDE";function Toe(e){return()=>t=>n=>{const{type:r}=n;return function(t){if(!t||"string"!=typeof t)return!1;const[n]=t.split("/"),r=e._models.filter((e=>e.namespace===n))[0];if(r&&r.effects&&r.effects[t])return!0;return!1}(r)?new Promise(((e,r)=>{t(s({__dva_resolve:e,__dva_reject:r},n))})):t(n)}}const woe=new class{constructor(e){this.hooks=e.reduce(((e,t)=>(e[t]=[],e)),{})}use(e){const{hooks:t}=this;for(let n in e)t[n].push(e[n])}get(e){return"extraReducers"===e?Object.assign({},...this.hooks[e]):this.hooks[e]}}(["onEffect","extraReducers"]),Soe=new class{constructor(e){this.noop=e=>{},this._models=[],this.store={},this.plugin=e}addModel(e){const t=this.prefixResolve(e);this._models.push(t)}removeModel(){}prefixResolve(e){return e.reducers&&(e.reducers=this.prefix(e.reducers,e.namespace)),e.effects&&(e.effects=this.prefix(e.effects,e.namespace)),e}prefix(e,t){return Object.keys(e).reduce(((n,r)=>(n[t+"/"+r]=e[r],n)),{})}getReducer(){let e={};for(let n of this._models)e[n.namespace]=function(e=n.state,t){let r=n.reducers[t.type];return r?r(e,t):e};let t=this.plugin.get("extraReducers");return kie(s(s({},e),t))}getSagas(){let e=[];const t=this;for(let n of this._models)e.push((function*(){for(const e in n.effects){const r=t.getWatcher(e,n.effects[e],n,t.plugin.get("onEffect"));yield Sae(r)}}));return e}prefixType(e,t){return-1===e.indexOf("/")?t.namespace+"/"+e:e}getWatcher(e,t,n,r){const i=this,a=e=>bae(l(s({},e),{type:this.prefixType(e.type,n)}));return function*(){yield xoe(e,(function*(o){if(r)for(const i of r)t=i(t,l(s({},Eoe),{put:a}),n,e);const{__dva_resolve:c=i.noop}=o||{};try{c(yield t(o,l(s({},Eoe),{put:a})))}catch(u){console.error(u)}}))}}start(){let e=this.getReducer(),t=this.getSagas(),n=loe();this.store=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Eie(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=_ie.apply(void 0,a)(n.dispatch),ot(ot({},n),{},{dispatch:r})}}}(Toe(this),n)(Sie)(e),t.forEach(n.run)}}(woe);Soe.plugin.use(function(){let e={effects:{}};return{onEffect:function(e,{put:t},n,r){const{namespace:i}=n;return function*(...n){try{return yield t({type:boe,payload:{namespace:i,actionType:r}}),yield e(...n)}finally{yield t({type:Coe,payload:{namespace:i,actionType:r}})}}},extraReducers:{loading(t=e,{type:n,payload:r}){let{actionType:i}=r||{};switch(n){case boe:return{effects:l(s({},t.effects),{[i]:!0})};case Coe:return{effects:l(s({},t.effects),{[i]:!1})};default:return t}}}}}());const koe={namespace:"common",state:{clusters:[],curClusterItems:JSON.parse(localStorage.getItem("curClusterItems")||"[]"),busiGroups:[],curBusiItem:JSON.parse(localStorage.getItem("curBusiItem")||"{}")},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*getClusters({},{put:e,select:t}){const{curClusterItems:n}=yield t((e=>e.common)),{dat:r}=yield ai("/api/n9e/clusters",{method:Qr.Get}),i=r||[],a=n.filter((e=>i.includes(e)));yield e({type:"saveData",prop:"curClusterItems",data:a}),localStorage.setItem("curClusterItems",JSON.stringify(a)),i.includes(localStorage.getItem("curCluster"))||localStorage.removeItem("curCluster"),yield e({type:"saveData",prop:"clusters",data:i})},*getBusiGroups({query:e},{put:t,select:n}){const{curBusiItem:r}=yield n((e=>e.common)),{dat:i}=yield oi(e),a=i||[];r.id&&a.every((e=>e.id!==r.id))&&(yield t({type:"saveData",prop:"curBusiItem",data:{}}),localStorage.removeItem("curBusiItem")),yield t({type:"saveData",prop:"busiGroups",data:a})}}};var _oe,Aoe,Ooe,Ioe,Moe,Noe;(Aoe=_oe||(_oe={}))[Aoe.Need=1]="Need",Aoe[Aoe.UnNeed=0]="UnNeed",(Ioe=Ooe||(Ooe={})).CmdLine="cmdline",Ioe.Name="name",(Noe=Moe||(Moe={})).TCP="tcp",Noe.UDP="udp";const Foe=function(e,t=1){return ai("/api/n9e/classpaths",{method:Qr.Get,params:{query:e,limit:30,p:t}})},Loe=function(e){return ai(`/api/n9e/classpath/${e}/favorites`,{method:Qr.Post,data:{id:e}})},Poe=function(e){return ai(`/api/n9e/classpath/${e}/favorites`,{method:Qr.Delete,data:{id:e}})},Roe=function(e){return ai(`/api/n9e/classpath/${e}`,{method:Qr.Delete})},Doe=function(e){return ai(`/api/n9e/classpath/${e.id}`,{method:Qr.Put,data:e})},Boe=function(e){return ai(`/api/n9e/resource/${e}`,{method:Qr.Get})},zoe={namespace:"resource",state:{tableData:[],pageNumber:1,group:{favorite:[],common:[],currentPage:1,commonTotal:0},currentGroup:null,prefix:_oe.UnNeed,resourceData:{resourceDetail:null,resourceDetailLoading:!1}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data}),saveResourceGroupData:(e,{data:t})=>l(s({},e),{group:s(s({},e.group),t)}),saveResourceData:(e,{data:t})=>l(s({},e),{resourceData:s(s({},e.resourceData),t)})},effects:{*updatePrefix({data:e},{put:t}){yield t({type:"saveData",prop:"prefix",data:e})},*chooseGroupItem({data:e},{put:t,select:n}){const{currentGroup:r}=yield n((e=>e.resource));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentGroup",data:e})))},*getResourceItem({id:e},{call:t,put:n}){yield n({type:"saveResourceData",data:{resourceDetailLoading:!0}});const{success:r,dat:i}=yield t(Boe,e);r&&(yield n({type:"saveResourceData",data:{resourceDetail:i}})),yield n({type:"saveResourceData",data:{resourceDetailLoading:!1}})},*getGroup({sign:e,data:t=""},{put:n,select:r,call:i}){var a,o,c;const{currentGroup:u}=yield r((e=>e.resource));if("init"===e||"refresh"===e){const[r,i]=yield Promise.all([Foe("",1),ai("/api/n9e/classpaths/favorites",{method:Qr.Get})]);if(r.success){const h=(null==(a=null==i?void 0:i.dat)?void 0:a.map((e=>l(s({},e),{isFavorite:!0,isBelongIn:ti.Favorite}))))||[],p=(null==(o=null==r?void 0:r.dat)?void 0:o.list.map((e=>l(s({},e),{isFavorite:!!h.find((t=>t.id===e.id)),isBelongIn:ti.Common}))))||[],d=(null==(c=null==r?void 0:r.dat)?void 0:c.total)||0;if(yield n({type:"saveResourceGroupData",data:{favorite:h,common:p,commonTotal:d,currentPage:1}}),"init"===e&&t&&""!==t){const e=p.find((e=>e.id===Number(t)));yield n({type:"saveData",prop:"currentGroup",data:e})}else if(u){const e=p.find((e=>e.id===u.id));e?yield n({type:"saveData",prop:"currentGroup",data:e}):yield n({type:"saveData",prop:"currentGroup",data:p[0]})}else yield n({type:"saveData",prop:"currentGroup",data:p[0]})}}else if("search"===e){const{group:{favorite:e}}=yield r((e=>e.resource)),{success:a,dat:o}=yield i(Foe,t);if(a){const t=(null==o?void 0:o.total)||0,r=(null==o?void 0:o.list.map((t=>l(s({},t),{isFavorite:!!e.find((e=>e.id===t.id)),isBelongIn:ti.Common}))))||[];yield n({type:"saveResourceGroupData",data:{common:r,commonTotal:t,currentPage:1}}),(u||u.id)&&e.find((e=>e.id===u.id))&&r.find((e=>e.id===u.id))||(yield n({type:"saveData",prop:"currentGroup",data:r[0]}))}}else if("append"===e){const{group:{common:e,favorite:t,currentPage:a}}=yield r((e=>e.resource)),{success:o,dat:c}=yield i(Foe,"",a+1);if(o){const r=(null==c?void 0:c.total)||0,i=(null==c?void 0:c.list.map((e=>l(s({},e),{isFavorite:!!t.find((t=>t.id===e.id)),isBelongIn:ti.Common}))))||[];yield n({type:"saveResourceGroupData",data:{common:e.concat(i),commonTotal:r,currentPage:a+1}})}}},*changeGroupFavorite({id:e,favorType:t},{put:n,call:r}){const i=t===Jr.Add?Loe:Poe,{success:a}=yield r(i,e);a&&(yield n({type:"getGroup",sign:"refresh"}))},*deleteGroup({id:e},{call:t,put:n}){const{success:r}=yield t(Roe,e);r&&(yield n({type:"getGroup",sign:"refresh"}))},*updateGroup({id:e,data:t},{call:n,put:r}){const{success:i}=yield n(Doe,l(s({},t),{id:e}));i&&(yield r({type:"getGroup",sign:"refresh"}))}}},Hoe=function(e){return ai("/api/n9e/self/profile",{method:Qr.Put,data:e})},joe=function(){return ai("/api/n9e/self/profile",{method:Qr.Get})},Goe={namespace:"account",state:{num:0,profile:{nickname:"",role:"",roles:[],username:"",email:"",phone:"",id:0,portrait:"",contacts:{}},csrfToken:""},reducers:{SET_PROFILE:(e,t)=>l(s({},e),{profile:t.profile})},effects:{*login({username:e,password:t},{put:n,call:r,select:i}){const{dat:a,err:o}=yield r(ii,e,t);yield n({type:"SET_PROFILE",profile:a.user});const{access_token:s,refresh_token:l}=a;return localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",l),yield n({type:"common/getClusters"}),yield n({type:"common/getBusiGroups"}),o},*getProfile({},{put:e,call:t,select:n}){const{dat:r,err:i}=yield t(joe);return yield e({type:"SET_PROFILE",profile:r}),i},*updateProfile({data:e},{put:t,call:n,select:r}){const{dat:i,err:a}=yield n(Hoe,e);return yield t({type:"SET_PROFILE",profile:e}),a}}},$oe={namespace:"strategy",state:{group:{favorite:[],common:[],currentPage:1,commonTotal:0},currentGroup:{id:1}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data}),saveStrategyGroupData:(e,{data:t})=>l(s({},e),{group:s(s({},e.group),t)})},effects:{*chooseGroupItem({data:e},{put:t,select:n}){const{currentGroup:r}=yield n((e=>e.strategy));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentGroup",data:e})))},*getGroup({sign:e,data:t=""},{put:n,select:r,call:i}){var a,o,c;const{currentGroup:u}=yield r((e=>e.strategy));if("init"===e||"refresh"===e){const[r,i]=yield Promise.all([Li("",1),ai("/api/n9e/alert-rule-groups/favorites",{method:Qr.Get})]);if(r.success){const h=(null==(a=null==i?void 0:i.dat)?void 0:a.map((e=>l(s({},e),{isFavorite:!0,isBelongIn:ti.Favorite}))))||[],p=(null==(o=null==r?void 0:r.dat)?void 0:o.list.map((e=>l(s({},e),{isFavorite:!!h.find((t=>t.id===e.id)),isBelongIn:ti.Common}))))||[],d=(null==(c=null==r?void 0:r.dat)?void 0:c.total)||0;if(yield n({type:"saveStrategyGroupData",data:{favorite:h,common:p,commonTotal:d,currentPage:1}}),"init"===e&&t&&""!==t){const e=p.find((e=>e.id===Number(t)));yield n({type:"saveData",prop:"currentGroup",data:e})}else if(u){const e=p.find((e=>e.id===u.id));e?yield n({type:"saveData",prop:"currentGroup",data:e}):yield n({type:"saveData",prop:"currentGroup",data:p[0]})}else yield n({type:"saveData",prop:"currentGroup",data:p[0]})}}else if("search"===e){const{group:{favorite:e}}=yield r((e=>e.strategy)),{success:a,dat:o}=yield i(Li,t);if(a){const t=(null==o?void 0:o.total)||0,r=(null==o?void 0:o.list.map((t=>l(s({},t),{isFavorite:!!e.find((e=>e.id===t.id)),isBelongIn:ti.Common}))))||[];yield n({type:"saveStrategyGroupData",data:{common:r,commonTotal:t,currentPage:1}}),(u||u.id)&&e.find((e=>e.id===u.id))&&r.find((e=>e.id===u.id))||(yield n({type:"saveData",prop:"currentGroup",data:r[0]}))}}else if("append"===e){const{group:{common:e,favorite:t,currentPage:a}}=yield r((e=>e.strategy)),{success:o,dat:c}=yield i(Li,"",a+1);if(o){const r=(null==c?void 0:c.total)||0,i=(null==c?void 0:c.list.map((e=>l(s({},e),{isFavorite:!!t.find((t=>t.id===e.id)),isBelongIn:ti.Common}))))||[];yield n({type:"saveStrategyGroupData",data:{common:e.concat(i),commonTotal:r,currentPage:a+1}})}}},*changeGroupFavorite({id:e,favorType:t},{put:n,call:r}){const i=t===Jr.Add?Bi:zi,{success:a}=yield r(i,e);a&&(yield n({type:"getGroup",sign:"refresh"}))},*deleteGroup({id:e},{call:t,put:n}){const{success:r}=yield t(Pi,e);r&&(yield n({type:"getGroup",sign:"refresh"}))},*updateGroup({id:e,data:t},{call:n,put:r}){const{success:i}=yield n(Ri,e,t);i&&(yield r({type:"getGroup",sign:"refresh"}))}}},Yoe={namespace:"shield",state:{curShieldData:{}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*setCurShieldData({data:e},{put:t}){const n=e.tags.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));yield t({type:"saveData",prop:"curShieldData",data:l(s({},e),{tags:n})})}}},Uoe={namespace:"event",state:{currentEdit:null,alertings:{},severity:void 0,hourRange:{num:6,unit:"hours",description:"hours"},queryContent:"",hisSeverity:void 0,hisEventType:void 0,hisHourRange:{num:6,unit:"hours",description:"hours"},hisQueryContent:""},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*editItem({data:e},{put:t,select:n}){const{currentEdit:r}=yield n((e=>e.event));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentEdit",data:e})))},*refreshAlertings({ids:e},{put:t,call:n}){const{dat:r}=yield n($i,e);yield t({type:"saveData",prop:"alertings",data:r})}}},Voe=ci();for(let Qoe of Voe)Qoe.module&&Soe.addModel(Qoe.module);Soe.addModel(koe),Soe.addModel(zoe),Soe.addModel(Goe),Soe.addModel($oe),Soe.addModel(Yoe),Soe.addModel(Uoe),Soe.start();var Woe=Soe.store;class Xoe extends f.exports.Component{constructor(e){super(e),u(this,"componentDidMount",(()=>{this.fetchData(),document.title="任务输出",document.body.style.backgroundColor="#fff",document.body.style.color="#000"})),u(this,"componentWillMount",(()=>{document.body.style.backgroundColor="#f0f2f5",document.body.style.color="rgba(0, 0, 0, 0.65)"})),this.state={loading:!1,data:[]}}fetchData(){const e=T.get(this.props,"match.params.busiId"),t=T.get(this.props,"match.params.taskId"),n=T.get(this.props,"match.params.outputType");void 0!==t&&void 0!==n&&(this.setState({loading:!0}),ai(`${bre.task(e)}/${t}/${n}`).then((e=>{this.setState({data:e.dat})})).finally((()=>{this.setState({loading:!1})})))}getOutput(){const e=T.get(this.props,"match.params.outputType"),{data:t}=this.state;let n="";return T.each(t,(t=>{n+=`${t.host}\n`,n+=`${t[e]}\n\n`})),n}render(){const{loading:e}=this.state,t=this.getOutput();return d.createElement(qt,{spinning:e},d.createElement("pre",{style:{fontSize:12,padding:10,height:"100vh"}},t))}}class qoe extends f.exports.Component{constructor(e){super(e),u(this,"componentDidMount",(()=>{this.fetchData(),document.title="任务输出",document.body.style.backgroundColor="#fff",document.body.style.color="#000"})),u(this,"componentWillMount",(()=>{document.body.style.backgroundColor="#f0f2f5",document.body.style.color="rgba(0, 0, 0, 0.65)"})),this.state={loading:!1,data:""}}fetchData(){const e=T.get(this.props,"match.params.busiId"),t=T.get(this.props,"match.params.taskId"),n=T.get(this.props,"match.params.host"),r=T.get(this.props,"match.params.outputType");void 0!==t&&void 0!==n&&(this.setState({loading:!0}),ai(`${bre.task(e)}/${t}/host/${n}/${r}`).then((e=>{this.setState({data:e.dat})})).finally((()=>{this.setState({loading:!1})})))}getOutput(){const e=T.get(this.props,"match.params.host"),{data:t}=this.state;let n="";return n+=`${e}\n`,n+=`${t}\n\n`,n}render(){const{loading:e}=this.state,t=this.getOutput();return d.createElement(qt,{spinning:e},d.createElement("pre",{style:{fontSize:12,padding:10,height:"100vh"}},t))}}function Koe(){const{t:e,i18n:t}=Lr();return d.createElement("div",{className:"App"},d.createElement(Kt,{locale:"en"==t.language?Hre:Mre,renderEmpty:()=>d.createElement("div",{style:{padding:20}},d.createElement("img",{src:"/image/empty.png",width:"64"}),d.createElement("div",{className:"ant-empty-description"},e("暂无数据")))},d.createElement(Gr,{store:Woe},d.createElement(ct,null,d.createElement(rt,null,d.createElement(it,{exact:!0,path:"/job-task/:busiId/output/:taskId/:outputType",component:Xoe}),d.createElement(it,{exact:!0,path:"/job-task/:busiId/output/:taskId/:host/:outputType",component:qoe}),d.createElement(d.Fragment,null,d.createElement(yi,null),d.createElement(xie,null)))))))}q.render(d.createElement(Koe,null),document.getElementById("root"));
//# sourceMappingURL=index.d1bd001b.js.map
