var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&o(e,n,t[n]);return e},l=(e,r)=>t(e,n(r)),c=(e,t)=>{var n={};for(var o in e)i.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&r)for(var o of r(e))t.indexOf(o)<0&&a.call(e,o)&&(n[o]=e[o]);return n},u=(e,t,n)=>(o(e,"symbol"!=typeof t?t+"":t,n),n);import{W as h,J as p,R as d,H as f,aD as m,aT as g,aU as v,aV as y,aW as x,aX as E,aY as b,aZ as C,a_ as w,a$ as T,b0 as S,b1 as k,b2 as _,an as A,b3 as O,ah as I,ag as M,am as N,ak as F,b4 as L,Z as P,a7 as R,b5 as D,b6 as B,aS as z,aH as H,a6 as j,a8 as G,b7 as $,b8 as Y,b9 as U,ba as V,bb as W,bc as X,N as q,aq as K,az as Q,bd as Z,be as J,bf as ee,bg as te,bh as ne,bi as re,bj as ie,bk as ae,bl as oe,bm as se,bn as le,bo as ce,bp as ue,a2 as he,bq as pe,br as de,bs as fe,bt as me,bu as ge,bv as ve,bw as ye,bx as xe,by as Ee,bz as be,bA as Ce,bB as we,bC as Te,bD as Se,bE as ke,as as _e,bF as Ae,bG as Oe,ao as Ie,aR as Me,bH as Ne,bI as Fe,aO as Le,c as Pe,i as Re,d as De,a5 as Be,bJ as ze,bK as He,bL as je,bM as Ge,aM as $e,bN as Ye,bO as Ue,a9 as Ve,bP as We,bQ as Xe,bR as qe,a4 as Ke,bS as Qe,bT as Ze,bU as Je,bV as et,bW as tt,bX as nt,bY as rt,bZ as it,b_ as at,b$ as ot,c0 as st,c1 as lt,c2 as ct,L as ut,P as ht,c3 as pt}from"./vendor.bcb7c281.js";import{_ as dt,a as ft,b as mt,c as gt,d as vt,e as yt,f as xt,g as Et,M as bt,B as Ct,R as wt,F as Tt,I as St,T as kt,D as _t,C as At,h as Ot,i as It,j as Mt,k as Nt,l as Ft,S as Lt,m as Pt,n as Rt,o as Dt,p as Bt,q as zt,r as Ht,s as jt,t as Gt,u as $t,P as Yt,v as Ut,w as Vt,A as Wt,x as Xt,y as qt,z as Kt,L as Qt,E as Zt,G as Jt,H as en,J as tn,K as nn,N as rn,O as an,Q as on,U as sn}from"./antdChunk.4a0fcd3a.js";import{E as ln,H as cn,t as un,P as hn,a as pn,h as dn,b as fn,i as mn,c as gn,d as vn,e as yn,f as xn,k as En,g as bn,j as Cn,l as wn,m as Tn,n as Sn,o as kn,p as _n,q as An,r as On,D as In,s as Mn,u as Nn,_ as Fn,v as Ln,w as Pn,x as Rn,y as Dn}from"./vendor1.1a88144c.js";import{_ as Bn}from"./vendor2.c8170346.js";var zn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return _A},get Circle(){return AA},get Ellipse(){return IA},get Image(){return NA},get Line(){return LA},get Marker(){return RA},get Path(){return UA},get Polygon(){return WA},get Polyline(){return XA},get Rect(){return qA},get Text(){return KA}}),Hn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return pO},get Circle(){return dO},get Dom(){return fO},get Ellipse(){return mO},get Image(){return gO},get Line(){return vO},get Marker(){return EO},get Path(){return bO},get Polygon(){return CO},get Polyline(){return wO},get Rect(){return TO},get Text(){return AO}});function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}var Gn={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},$n=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mt(this,e),this.init(t,n)}return dt(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Gn,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,jn({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),Yn=function(){function e(){mt(this,e),this.observers={}}return dt(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var i=[].concat(this.observers[e]);i.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Un(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Vn(e){return null==e?"":""+e}function Wn(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function Xn(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var a="string"!=typeof t?[].concat(t):t.split(".");a.length>1;){if(i())return{};var o=r(a.shift());!e[o]&&n&&(e[o]=new n),e=Object.prototype.hasOwnProperty.call(e,o)?e[o]:{}}return i()?{}:{obj:e,k:r(a.shift())}}function qn(e,t,n){var r=Xn(e,t,Object);r.obj[r.k]=n}function Kn(e,t){var n=Xn(e,t),r=n.obj,i=n.k;if(r)return r[i]}function Qn(e,t,n){var r=Kn(e,n);return void 0!==r?r:Kn(t,n)}function Zn(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):Zn(e[r],t[r],n):e[r]=t[r]);return e}function Jn(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var er={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function tr(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return er[e]})):e}var nr="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function rr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,a=0;a<r.length;++a){if("string"==typeof i[r[a]]&&a+1<r.length)return;if(void 0===i[r[a]]){for(var o=2,s=r.slice(a,a+o).join(n),l=i[s];void 0===l&&r.length>a+o;)o++,l=i[s=r.slice(a,a+o).join(n)];if(void 0===l)return;if("string"==typeof l)return l;if(s&&"string"==typeof l[s])return l[s];var c=r.slice(a+o).join(n);return c?rr(l,c,n):void 0}i=i[r[a]]}return i}}var ir=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return mt(this,t),n=gt(this,vt(t).call(this)),nr&&Yn.call(yt(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return ft(t,Yn),dt(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,o=[e,t];n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split("."));var s=Kn(this.data,o);return s||!a||"string"!=typeof n?s:rr(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(r=t,t=(o=e.split("."))[1]),this.addNamespaces(t),qn(this.data,o,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(o=e.split("."))[1]),this.addNamespaces(t);var s=Kn(this.data,o)||{};r?Zn(s,n,i):s=jn({},s,n),qn(this.data,o,s),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?jn({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(),ar={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var a=this;return e.forEach((function(e){a.processors[e]&&(t=a.processors[e].process(t,n,r,i))})),t}},or={},sr=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mt(this,t),n=gt(this,vt(t).call(this)),nr&&Yn.call(yt(n)),Wn(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,yt(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=$n.create("translator"),n}return ft(t,Yn),dt(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:i};var o=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),e=o.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,r){var i=this;if("object"!==p(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,o=this.extractFromKey(e[e.length-1],n),s=o.key,l=o.namespaces,c=l[l.length-1],u=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(h){var d=n.nsSeparator||this.options.nsSeparator;return c+d+s}return s}var f=this.resolve(e,n),m=f&&f.res,g=f&&f.usedKey||s,v=f&&f.exactUsedKey||s,y=Object.prototype.toString.apply(m),x=["[object Number]","[object Function]","[object RegExp]"],E=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,C="string"!=typeof m&&"boolean"!=typeof m&&"number"!=typeof m;if(b&&m&&C&&x.indexOf(y)<0&&("string"!=typeof E||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,m,jn({},n,{ns:l})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(a){var w="[object Array]"===y,T=w?[]:{},S=w?v:g;for(var k in m)if(Object.prototype.hasOwnProperty.call(m,k)){var _="".concat(S).concat(a).concat(k);T[k]=this.translate(_,jn({},n,{joinArrays:!1,ns:l})),T[k]===_&&(T[k]=m[k])}m=T}}else if(b&&"string"==typeof E&&"[object Array]"===y)(m=m.join(E))&&(m=this.extendTranslation(m,e,n,r));else{var A=!1,O=!1,I=void 0!==n.count&&"string"!=typeof n.count,M=t.hasDefaultValue(n),N=I?this.pluralResolver.getSuffix(u,n.count):"",F=n["defaultValue".concat(N)]||n.defaultValue;!this.isValidLookup(m)&&M&&(A=!0,m=F),this.isValidLookup(m)||(O=!0,m=s);var L=M&&F!==m&&this.options.updateMissing;if(O||A||L){if(this.logger.log(L?"updateKey":"missingKey",u,c,s,L?F:m),a){var P=this.resolve(s,jn({},n,{keySeparator:!1}));P&&P.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var R=[],D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&D&&D[0])for(var B=0;B<D.length;B++)R.push(D[B]);else"all"===this.options.saveMissingTo?R=this.languageUtils.toResolveHierarchy(n.lng||this.language):R.push(n.lng||this.language);var z=function(e,t,r){i.options.missingKeyHandler?i.options.missingKeyHandler(e,c,t,L?r:m,L,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,c,t,L?r:m,L,n),i.emit("missingKey",e,c,t,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?R.forEach((function(e){i.pluralResolver.getSuffixes(e).forEach((function(t){z([e],s+t,n["defaultValue".concat(t)]||F)}))})):z(R,s,F))}m=this.extendTranslation(m,e,n,f,r),O&&m===s&&this.options.appendNamespaceToMissingKey&&(m="".concat(c,":").concat(s)),O&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(m))}return m}},{key:"extendTranslation",value:function(e,t,n,r,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(jn({},n,{interpolation:jn({},this.options.interpolation,n.interpolation)}));var o,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var l=e.match(this.interpolator.nestingRegexp);o=l&&l.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=jn({},this.options.interpolation.defaultVariables,c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),s){var u=e.match(this.interpolator.nestingRegexp);o<(u&&u.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i&&i[0]===r[0]&&!n.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):a.translate.apply(a,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var h=n.postProcess||this.options.postProcess,p="string"==typeof h?[h]:h;return null!=e&&p&&p.length&&!1!==n.applyPostProcessor&&(e=ar.handle(p,e,t,this.options&&this.options.postProcessPassResolved?jn({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,a,o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!o.isValidLookup(t)){var l=o.extractFromKey(e,s),c=l.key;n=c;var u=l.namespaces;o.options.fallbackNS&&(u=u.concat(o.options.fallbackNS));var h=void 0!==s.count&&"string"!=typeof s.count,p=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,d=s.lngs?s.lngs:o.languageUtils.toResolveHierarchy(s.lng||o.language,s.fallbackLng);u.forEach((function(e){o.isValidLookup(t)||(a=e,!or["".concat(d[0],"-").concat(e)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(a)&&(or["".concat(d[0],"-").concat(e)]=!0,o.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(n){if(!o.isValidLookup(t)){i=n;var a,l,u=c,d=[u];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(d,c,n,e,s);else h&&(a=o.pluralResolver.getSuffix(n,s.count)),h&&p&&d.push(u+a),p&&d.push(u+="".concat(o.options.contextSeparator).concat(s.context)),h&&d.push(u+=a);for(;l=d.pop();)o.isValidLookup(t)||(r=l,t=o.getResource(n,e,l,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:a}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}();function lr(e){return e.charAt(0).toUpperCase()+e.slice(1)}var cr=function(){function e(t){mt(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=$n.create("languageUtils")}return dt(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=lr(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=lr(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=lr(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],a=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):"string"==typeof e&&a(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&a(n.formatLanguageCode(e))})),i}}]),e}(),ur=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],hr={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function pr(){var e={};return ur.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:hr[t.fc]}}))})),e}var dr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mt(this,e),this.languageUtils=t,this.options=n,this.logger=$n.create("pluralResolver"),this.rules=pr()}return dt(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var i=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),a=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===a?a="plural":1===a&&(a=""));var o=function(){return n.options.prepend&&a.toString()?n.options.prepend+a.toString():a.toString()};return"v1"===this.options.compatibilityJSON?1===a?"":"number"==typeof a?"_plural_".concat(a.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),fr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};mt(this,e),this.logger=$n.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return dt(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:tr,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Jn(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Jn(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Jn(t.nestingPrefix):t.nestingPrefixEscaped||Jn("$t("),this.nestingSuffix=t.nestingSuffix?Jn(t.nestingSuffix):t.nestingSuffixEscaped||Jn(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,a,o,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(s.formatSeparator)<0){var i=Qn(t,l,e);return s.alwaysFormat?s.format(i,void 0,n,jn({},r,t,{interpolationkey:e})):i}var a=e.split(s.formatSeparator),o=a.shift().trim(),c=a.join(s.formatSeparator).trim();return s.format(Qn(t,l,o),c,n,jn({},r,t,{interpolationkey:o}))};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?c(s.escape(e)):c(e)}}].forEach((function(t){for(o=0;i=t.regex.exec(e);){if(void 0===(a=u(i[1].trim())))if("function"==typeof h){var n=h(e,i,r);a="string"==typeof n?n:""}else{if(p){a=i[0];continue}s.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),a=""}else"string"==typeof a||s.useRawValueToEscape||(a=Vn(a));var l=t.safeValue(a);if(e=e.replace(i[0],l),p?(t.regex.lastIndex+=l.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++o>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=jn({},a);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,o)).replace(/'/g,'"');try{o=JSON.parse(i),t&&(o=jn({},t,o))}catch(Wh){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),Wh),"".concat(e).concat(n).concat(i)}return delete o.defaultValue,e}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=u.shift(),l=u,c=!0}if((r=t(s.call(this,n[1].trim(),o),o))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=Vn(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),c&&(r=l.reduce((function(e,t){return i.format(e,t,a.lng,jn({},a,{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var mr=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return mt(this,t),i=gt(this,vt(t).call(this)),nr&&Yn.call(yt(i)),i.backend=e,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=a,i.logger=$n.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,a.backend,a),i}return ft(t,Yn),dt(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,a=[],o=[],s=[],l=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?o.indexOf(s)<0&&o.push(s):(i.state[s]=1,r=!1,o.indexOf(s)<0&&o.push(s),a.indexOf(s)<0&&a.push(s),l.indexOf(t)<0&&l.push(t)))})),r||s.push(e)})),(a.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:r}),{toLoad:a,pending:o,toLoadLanguages:s,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],a=r[1];t&&this.emit("failedLoading",i,a,t),n&&this.store.addResourceBundle(i,a,n),this.state[e]=t?-1:2;var o={};this.queue.forEach((function(n){var r,s,l,c,u,h;r=n.loaded,s=a,c=Xn(r,[i],Object),u=c.obj,h=c.k,u[h]=u[h]||[],l&&(u[h]=u[h].concat(s)),l||u[h].push(s),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){o[e]||(o[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){o[e].indexOf(t)<0&&o[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,l){s&&l&&i<5?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*a,o)}),a):o(s,l)})):o(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var a=this.queueLoad(e,t,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(function(r,o){r&&t.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(i," failed"),r),!r&&o&&t.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(i),o),t.loaded(e,r,o)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,jn({},a,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}();function gr(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===p(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===p(e[2])||"object"===p(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function vr(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function yr(){}var xr=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(mt(this,t),e=gt(this,vt(t).call(this)),nr&&Yn.call(yt(e)),e.options=vr(n),e.services={},e.logger=$n,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),gt(e,yt(e));setTimeout((function(){e.init(n,r)}),0)}return e}return ft(t,Yn),dt(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=jn({},gr(),this.options,vr(t)),this.format=this.options.interpolation.format,n||(n=yr),!this.options.isClone){this.modules.logger?$n.init(r(this.modules.logger),this.options):$n.init(null,this.options);var i=new cr(this.options);this.store=new ir(this.options.resources,this.options);var a=this.services;a.logger=$n,a.resourceStore=this.store,a.languageUtils=i,a.pluralResolver=new dr(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new fr(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new mr(r(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(a.languageDetector=r(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=r(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new sr(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var o=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);o.length>0&&"dev"!==o[0]&&(this.options.lng=o[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var c=Un(),u=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr,r=n,i="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var a=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){a.indexOf(e)<0&&a.push(e)}))};if(i)o(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return o(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(a,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=Un();return e||(e=this.languages),t||(t=this.options.ns),n||(n=yr),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&ar.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=Un();this.emit("languageChanging",e);var i=function(i){e||i||!n.services.languageDetector||(i=[]);var a="string"==typeof i?i:n.services.languageUtils.getBestMatchFromCodes(i);a&&(n.language||(n.language=a,n.languages=n.services.languageUtils.toResolveHierarchy(a)),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(e){!function(e,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,a)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var i;if("object"!==p(r)){for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];i=n.options.overloadTranslationOptionHandler([t,r].concat(o))}else i=jn({},r);return i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns,n.t(t,i)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],i=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,o);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!o(r,e)||i&&!o(a,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=Un();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Un();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr,i=jn({},this.options,n,{isClone:!0}),a=new t(i),o=["store","services","language"];return o.forEach((function(t){a[t]=e[t]})),a.services=jn({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new sr(a.services,a.options),a.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e].concat(n))})),a.init(i,r),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),t}());function Er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(n),!0).forEach((function(t){Er(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tr,Sr={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},kr=d.createContext();function _r(){return Sr}var Ar=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.usedNamespaces={}}var t,n,r;return t=e,(n=[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}])&&br(t.prototype,n),r&&br(t,r),e}();function Or(){return Tr}var Ir={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Sr=wr(wr({},Sr),e)}(e.options.react),function(e){Tr=e}(e)}};function Mr(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var Nr={};function Fr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&Nr[t[0]]||("string"==typeof t[0]&&(Nr[t[0]]=new Date),Mr.apply(void 0,t))}function Lr(e,t,n){e.loadNamespaces(t,(function(){if(e.isInitialized)n();else{e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),n()}))}}))}function Pr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.languages||!t.languages.length)return Fr("i18n.languages were undefined or empty",t.languages),!0;var r=t.languages[0],i=!!t.options&&t.options.fallbackLng,a=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!o(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||(!t.services.backendConnector.backend||!(!o(r,e)||i&&!o(a,e))))}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){Er(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.i18n,r=f.exports.useContext(kr)||{},i=r.i18n,a=r.defaultNS,o=n||i||Or();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Ar),!o){Fr("You will need to pass in an i18next instance by using initReactI18next");var s=function(e){return Array.isArray(e)?e[e.length-1]:e},l=[s,{},!1];return l.t=s,l.i18n={},l.ready=!1,l}o.options.react&&void 0!==o.options.react.wait&&Fr("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var c=zr(zr(zr({},_r()),o.options.react),t),u=c.useSuspense,h=e||a||o.options&&o.options.defaultNS;h="string"==typeof h?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(h);var p=(o.isInitialized||o.initializedStoreOnce)&&h.every((function(e){return Pr(e,o,c)}));function d(){return o.getFixedT(null,"fallback"===c.nsMode?h:h[0])}var m=f.exports.useState(d),g=Dr(m,2),v=g[0],y=g[1],x=f.exports.useRef(!0);f.exports.useEffect((function(){var e=c.bindI18n,t=c.bindI18nStore;function n(){x.current&&y(d)}return x.current=!0,p||u||Lr(o,h,(function(){x.current&&y(d)})),e&&o&&o.on(e,n),t&&o&&o.store.on(t,n),function(){x.current=!1,e&&o&&e.split(" ").forEach((function(e){return o.off(e,n)})),t&&o&&t.split(" ").forEach((function(e){return o.store.off(e,n)}))}}),[o,h.join()]);var E=f.exports.useRef(!0);f.exports.useEffect((function(){x.current&&!E.current&&y(d),E.current=!1}),[o]);var b=[v,o,p];if(b.t=v,b.i18n=o,b.ready=p,p)return b;if(!p&&!u)return b;throw new Promise((function(e){Lr(o,h,(function(){e()}))}))}const jr={en:{translation:{classpath:{single:"Classpath"},strategy:{create:"New",single:"Alert Rule",multiple:"Alert Rules"},personalInfo:"Profile",n9e:"DiDi Nightingale","输入有误":"Incorrect input","修改密码成功":"Changed the password successfully","旧密码":"Old password","请输入旧密码":"Enter the old password","新密码":"New password","请输入新密码":"Enter a new password","再次输入新密码":"Enter a new password again","确认修改":"Update","自定义头像需以http开头":"The custom portrait needs to start at http","自定义头像":"Custom portrait","信息保存成功":"Saved successfully","用户名":"Username","显示名":"Display name","请输入显示名":"Enter a display name","邮箱":"Email","请输入邮箱":"Enter email","手机":"Mobile","请输入手机号":"Enter mobile number","请输入":"Enter ","更多联系方式":"More contacts","联系方式不能为空":"Contact information can not be blank","请选择联系方式":"Select contact","值不能为空":"Value can not be blank","请输入值":"Enter value","更换头像":"Change portrait","头像URL":"Portrait URL","个人中心":"Personal Center","个人信息":"Setting","修改密码":"Change password","秘钥管理":"Token management","Token更新成功":"Token updated successfully","Token创建成功":"Token created successfully","操作":"Action","重新生成":"Regenerate","生成":"Generate","该分享链接无图表数据":"The shared link has no graph data.","任意标签/资源分组":"Any Label / Classpath","必须要有一个变量名":"Var name required","变量名重复":"Duplicate variable name","变量名包含非法字符":"The variable name contains illegal characters","资源分组路径含有非法字符":"The Classpath contains illegal characters","变量名":"Variable name","标签或资源分组":"Label or Classpath","默认值":"Default value","添加大盘变量":"Add dashboard variables","添加变量":"Add variable","完成":"Finish","新建图表":"New chart","标题":"Title","图表名称":"Name required","配置方式":"Mode","指标":"Metrics","请选择指标":"Select metrics","请输入监控指标(输入4个以上字符发起检索)":"Enter a metric(search after 4 char)","资源分组":"Classpaths","请选择资源分组":"Select classpath","前缀匹配":"Prefix","请输入Promql":"Enter PromQL","阈值":"Threshold","下钻链接":"Drill URL","列":" Column","新增图表":"New Chart","一键规整":"Arrange","修改":"Edit","上移":"Move up","下移":"Move down","是否删除分类":"Delete group","删除":"Delete","编辑图表":"Edit Chart","是否删除图表":"Delete the chart","删除图表":"Delete","删除分组成功":"Group deleted successfully","新增图表分组":"New Chart Group","新建分组":"New Chart Group","更新分组名称":"Edit group name","分组名称":"Name","请输入名称":"Please enter the name","克隆大盘成功":"Cloned successfully","新建大盘成功":"Created successfully","大盘名称":"Name","分类标签":"Tags","更新时间":"Update Time","发布人":"Publisher","克隆":"Clone","是否删除大盘":"Sure to delete the dashboard?","删除大盘成功":"Deleted successfully","导入":"Import","未选择任何大盘":"No dashboard chosen","导出":"Export","监控大盘":"Dashboards","新建大盘":"New Dashboard","导入内置大盘":"Import built-in dashboard","更多操作":"More","克隆监控大盘":"Clone dashboard","创建新监控大盘":"New Dashboard","请输入大盘名称":"Enter dashboard name","大盘":"Dashboard","时间":"Time","值":"Value","告警详情":"Event Detail","策略名称:":"Rule name","通知结果":"Notice","已触发":"Triggered","已屏蔽":"Muted","表达式":"Expression","级别":"Level","策略名称":"Rule name","标签":"Tags","通知":"Notification","状态":"Status","发生时间":"When","屏蔽":"Mute","是否忽略告警?":"Sure to ignore the event?","忽略":"Ignore","未恢复告警事件":"Triggered Events","策略名称、标签、资源分组":"Rule name, tag, classpath","告警级别":"Level","告警状态":"Status","是否批量忽略告警?":"Sure to ignore the events?","已忽略告警":"Ignored successfully","批量忽略":"Batch Ignore","滴滴夜莺":"N9E","请输入用户名":"Enter a username","请输入密码":"Enter a password","登录":"Sign in","已选择":"Selected ","项":"","用户名、邮箱或电话":"User name, email or phone number","用户创建成功":"User created successfully","用户信息修改成功":"User Modified","团队创建成功":"Team created successfully","团队信息修改成功":"Team updated successfully","密码重置成功":"Password reset successfully","添加成功":"Added successfully","取消":"Cancel","确认":"Confirm","确认并搜索":"Confirm and search","用户删除成功":"User deleted successfully","团队删除成功":"Team deleted successfully","创建团队":"New Team","成员删除成功":"Deleted member successfully","确定":"OK","确定要删除么？":"Sure to delete it?","密码":"Password","请输入密码!":"Please enter the password!","确认密码":"Confirm password","请确认密码!":"Please confirm the password!","团队名称":"Team Name","团队名称不能为空！":"Team name can not be blank!","备注":"Remark","管理员":"Administrator","普通用户":"Ordinary users","游客":"Visitors","用户名不能为空！":"User name can not be blank!","角色":"Role","角色不能为空！":"Role is required","启用":"Enable","编辑":"Edit","重置密码":"Reset Password","是否删除该用户":"Sure to delete the user?","是否删除该成员":"Sure to delete the member?","禁用成功":"Disabled successfully","启用成功":"Enabled successfully","用户管理":"Users","用户名、邮箱或手机":"User name, email or mobile phone","创建":"Create","创建并关闭":"Create and close","创建用户":"Create User","团队管理":"Team Management","搜索团队名称":"Team name","是否删除该团队":"Sure to delete the team?","成员名、邮箱或手机":"Name, email or mobile","添加成员":"Add Member","选择监控指标添加图表":"Select the metric to add the chart","即时看图":"Explorer","监控指标":"Metric","筛选标签":"Tags","配置":"Configuration","每张图最多展示":"Maximum","条线":"lines per chart","重置":"Reset","分享图表":"Share","资源标识":"Resource ID","资源名称":"Name","资源信息或标签":"Resource information or labels","请选择标签":"Select a tag","删除指标成功":"Deleted successfully","创建指标成功":"Created successfully","请勾选需要导出的指标":"Please check the metrics you need to export","编辑成功":"Edit successfully","指标名称":"Metric","释义":"Description","确定删除该指标?":"Sure to delete this metric?","保存":"Save","指标释义":"Summary","指标名称或释义":"Search","不能为空":"Cannot be blank","已发送":"Sent","近":"Near","day-events":"Day Events","天未恢复的":"Days Events","进入事件管理":"Go to events page","一分钟自动刷新":"One minute refresh","指标TOP":"Metric TOP","个":"","资源总量":"Resources","策略总量":"Rules","大盘总量":"Dashboards","用户总量":"Users","团队总量":"Teams","统计数据":"Statistics","导入规则":"Import Rules","导出规则":"Export rules","请输入导入信息":"Please input import json","是否确定删除资源分组?":"Sure to delete classpath?","分组名称前缀匹配(聚合展示所有相关分组的内容)":"Prefix matching (aggregation displays all relevant grouping content)","count(对符合规则的日志进行计数)":"count(count the matching lines)","histogram(对符合规则的日志抓取出的数字计算统计值)":"histogram","秒":"s","不符合输入规范（格式为key=value）":"format should be 'key=value'","资源":"Resources","看图":"Explorer","端口":"Port","进程":"Process","插件":"Plugin","日志":"Log","端口号":"Port","进程标识":"Process identification","日志路径":"Log path","采集名称":"Collect rule","采集频率":"Step","修改人":"Modifier","修改时间":"Last update","是否删除该采集策略?":"Sure to delete this collection rule?","是否删除该告警规则?":"Sure to delete this alert rule?","删除成功":"Deleted successfully","挂载资源":"Bind Resources","请输入资源标识":"Input resource identifications, one resource per line","请输入资源标识，每行一个":"Input resource identifications, one resource per line","新建资源分组":"New","编辑资源分组":"Edit classpath","刷新":"Refresh","资源分组路径":"Classpath","资源分组路径必填":"Classpath cannot be blank","请填写资源分组路径":"Input classpath","资源分组备注":"Remark","创建进程采集":"New collection","进程采集详情":"Collection rule(Process)","更新":"Update","采集规则成功":" collection rule successfully","进程监控指标":"Metric","所属资源分组":"Classpath","资源分组必填":"Classpath is required","采集名称必填":"Rule name required","请输入采集配置的名称":"Please enter rule name","采集方式":"Method","采集方式必填":"Collection mode is required","命令行":"cmdline","进程名":"name","该项必填":"Required","取 /proc/$pid/cmdline 中的部分子串，可以唯一标识进程即可":"Take some substrings from /proc/$pid/cmdline to uniquely identify the process","取  /proc/$pid/status 中 name 的值":"Take the value of name in /proc/$pid/status","采集频率必填":"Step required","附加标签":"Append tags","格式为key=value回车分隔":"The format is key=value, use Enter to separate","创建端口采集":"New collection","端口采集详情":"Collection rule(Port)","端口监控指标":"Metric","端口协议":"Port Protocol","端口协议必填":"Port protocol required","端口号必填":"Port required","请输入端口号":"Enter port","连接超时":"Connection timeout","连接超时必填":"Connection timeout required","创建插件采集":"New Collection","插件采集详情":"Collection rule(Plugin)","插件采集成功":" collection successfully ","插件路径":"Plugin filepath","插件路径必填":"Plugin filepath required","参数":"Parameters","请输入参数":"Enter parameters","环境变量":"Env variables","变量":"Variable","标准输入(Stdin)":"Standard input (Stdin)","创建日志采集":"New collection","日志采集详情":"Collection rule(Log)","指标名称必填":"Metric required","计算方法":"Calculation method","计算方法必填":"Calculation method required","日志路径必填":"Log path required","匹配正则":"Main regexp","匹配正则必填":"Main regexp required","请输入正则表达式匹配日志关键字，histogram会提取第一个括号内的值":"Enter regexp to match logs, histogram will use first substring value","耗时计算：中的数值会用于计算曲线值流量计数：每匹配到该正则，曲线值+1":"Time-consuming calculation: the values in the calculation are used to calculate the number of curved-value flowmeters: for each match to the regular, the curves are + 1","tagName 填写说明\\r\\n\n              1. 不允许包含host、trigger、include\n              2. 不允许包含如下4个特殊字符\n              tagValue 填写说明\n              1.必须包含括号。括号中的正则内容被用作tagValue的取值，必须可枚举。\n              2.不允许包含如下4个特殊字符=,:@":"TagName  Fill in the instructions \n              1.  No host, no, no, no, no. \n              2.  Not allowed to include the following 4 special characters \n              tagValue  Fill in instructions \n              1. Must contain parentheses. The regular content in parentheses is used as a value for tagValue, and must be enumerated. \n              2. The following 4 special characters are not allowed =,: @","验证":"Verify","请输入一行待监控的完整日志":"Enter a full line of logs to be monitored","通过":"Success","失败":"Failure","屏蔽时间":"Mute time","选择时间":"Choose times","克隆到其他资源分组":"Cloning to other classpath","选择资源分组":"Select classpaths","克隆成功":"Cloned successfully","分组不可为空":"Group can not be blank","是否确认永久删除资源":"Sure to delete the resource ?","无":"None","资源详情":"Basic Information","请选择所属资源分组":"Select the classpaths","彻底删除资源":"Delete","两种情况会有彻底删除资源的需求":"There are two cases to delete resources","资源对应的设备已经下线了，永远都不会有新的监控数据上报了":"The resource has been offline","资源的ident(唯一标识)发生变化，老的ident需要手工清理掉":"The ident of the resource changes","未选择任何规则":"No rules chosen","是否批量删除规则?":"Sure to delete the rules?","组件采集信息":"Component Collection","端口信息":"Port","复制已选项":"Copied successfully","复制":"Copied ","条数据到剪贴板":" records","请先选择资源标识":"Select the resource logo first","是否移除该资源?":"Remove this resource from the classpath?","移除":"Unbind","您未选用任何资源":"No resources chosen","资源管理":"Resources","周期内所有点":"all","在统计周期 $n 秒内（初次上报的指标，统计周期内只有一个值，如要限制点数，可选择happen函数）每个值都 $v":"All the values $v in $n seconds (To limit the number of points, use the happen function)","发生次数":"happen","统计周期 $n 秒内至少有 $m 次值 $v":"There are at least $m times in $n seconds with the value $v","最大值":"max","统计周期 $n 秒内的最大值 $v":"The maximum value $v in $n seconds","最小值":"min","统计周期 $n 秒内的最小值 $v":"The minimum value $v in $n seconds","均值":"avg","统计周期 $n 秒内的均值 $v":"The average value $v in $n seconds","求和":"sum","统计周期 $n 秒内的所有值求和 $v":"The sum value $v in $n seconds","突增突降值":"diff","最新值与其之前 $n 秒内的任意值之差 (区分正负) $v":"(the difference between the latest value and any previous value of $n seconds) divided by the corresponding historical value (positive and negative) $v %","突增突降率":"pdiff","(最新值与其之前 $n 秒的任意值之差)除以对应历史值 (区分正负) $v ％":"(Latest value before  $n  The difference between any value of the second (divided by the corresponding historical value)  (distinguishing between positive and negative)  $v  %","同比变化率":"c_avg_rate_abs","最近 $n 秒平均值相对 $m 天前同周期平均值变化率 $v ％":"The change rate of last $n seconds average relative to $m days average in the same period $v %","同比变化率(区分正负)":"c_avg_rate","同比变化值":"c_avg_abs","最近 $n 秒平均值相对 $m 天前同周期平均值变化值 $v":"The change value of last $n seconds average relative to $m days average in the same period $v","同比变化值(区分正负)":"c_avg","3-sigma离群点检测":"stddev","统计周期 $n 秒内波动值过大，超过了 $m 个标准差范围":"The statistical period fluctuates too much in $n seconds, exceeding $m standard deviation range","新建告警屏蔽":"New mute rule","告警屏蔽":"Mute Rules","请检查":"Please check ","中的空格":" space","新建告警屏蔽成功":"Mute rule created successfully","屏蔽指标":"Mute metric","请输入指标名称":"Input metric","请输入资源标识的正则表达式":"Input a regexp for the resource identification","屏蔽标签":"Mute tags","请输入屏蔽标签(请用回车分割)":"Input mute tags (use Enter to split)","屏蔽原因":"Mute Cause","请填写屏蔽原因":"Enter mute cause","屏蔽标识、资源标识、屏蔽标签、资源分组前缀不能同时为空":"The metric, ID, tags ,Prefix coult not be empty at the same time","暂无":"None","告警策略详情":"Alert Strategy Details","解除成功":"Removed successfully","开始:":"Start:","结束:":"End:","创建人":"Creator","确定解除该告警屏蔽?":"Sure to remove the mute rule?","解除":"Remove","屏蔽策略":"Mute Rules","指标名称、资源标识、标签、屏蔽原因":"Metric, resource id, tag, mute cause","是否确定删除该策略分组?":"Sure to delete the alert group?","名称":"Name","告警接收者":"Recipients","未选择任何采集策略":"No rules selected","是否批量删除告警规则?":"Sure to delete the alert rules?","请输入告警策略名称":"Search rule name","新建告警策略":"New alert rule","导入内置策略":"Import built-in rules","策略":" rules","请输入标签key":"Enter the tag key","请输入标签value":"Enter the tag value","预览":"Preview","请输入指标":"Enter metric","请输入百分比":"Enter percentages","新建策略分组":"New rule group","新建子节点":"New child node","编辑策略组":"Edit rule Group","策略组名称":"Name","策略组名称必填":"Group name required","请填写策略组名称":"Please enter group name","管理团队":"Manage teams","请选择团队":"Select teams","告警策略":"Alert Rules","请输入分钟数":"Enter minutes","秒（告警恢复后持续观察":"Seconds (continued observation after alarm recovery)","秒，未再触发阈值才发送恢复通知）":"Seconds, no more trigger threshold to send recovery notice)","保存成功":"Successfully saved","创建成功":"Created successfully","克隆失败":"Cloning failed","保存失败":"Unable to save","创建失败":"Failed to create","周一":"Monday","周二":"Tuesday","周三":"Wednesday","周四":"Thursday","周五":"Friday","周六":"Saturday","周日":"Sunday","基本配置":"Basic configuration","策略名称不能为空":"Rule name required","请输入策略名称":"Enter the rule name","一级报警":"Level 1","二级报警":"Level 2","三级报警":"Level 3","触发模式":"Trigger mode","统计周期":"Step","触发条件":"Condition","资源过滤":"Resource filter","标签过滤":"Tag filter","执行频率":"Exec interval","请输入Promeql":"Enter Promeql","请输入附加标签，格式为key=value":"Enter an additional tag in a key=value format","生效配置":"Enable configuration","立即启用":"Enable","是":"Yes","否":"No","生效时间":"Time","通知配置":"Notification configuration","静默恢复":"Silent recovery","不发送恢复通知":"Do not send a recovery notice","通知媒介":"Media","报警接收团队":"Notify teams","报警接收人":"Notify users","报警回调":"Callback","通知自己开发的系统（请确认是夜莺服务端可访问的地址）":"Notify your system (make sure n9e-server could access the address)","其他配置":"Other configuration","预案链接":"Runbook","监控看图":"Metrics","策略配置":"Monitors","未恢复告警":"Unrecovered","用户":"Users","团队":"Teams","团队列表":"Team list","新建团队":"New","退出":"Logout","收藏的":"Favorite ","分组":"","所有":"All ","一行一个":"One per line","策略分组":"Rule Groups","新建":"New ","请输入日志路径，支持*通配符":"Please enter logs filepath, support wildcards","1小时":"1 hour","2小时":"2 hours","6小时":"6 hours","12小时":"12 hours","1天":"1 day","2天":"2 days","7天":"1 week","14天":"2 weeks","30天":"30 days","90天":"90 days","永久":"forever","清除":"clear","预览图":"Preview Chart","批量删除":"Delete","修改告警接受者":"Update recipients","修改通知媒介":"Update medias","策略启用控制":"Update status","是否启停":"Enable","修改附加标签":"Update append tags","修改附加标签成功":"Update append tags successfully",append_tags:"Tags","请先选择策略":"Select some rules","不符合输入规范(格式为key=value)":" format should be 'key=value'","编辑用户信息":"Edit user","编辑团队信息":"Edit team","基本信息":"Basic info","预案手册":"Runbook","预警值":"Threshold","维护备注":"Update remark","维护标签":"Update tags","修改备注":"Update remark","修改标签":"Update tags","暂无数据":"None","告警历史":"All Events","全部告警":"All","全量告警历史":"History Alert Events","恢复":"Recovery","告警":"Alert","资源分组前缀":"Classpath Prefix","搜索资源分组前缀":"Search Classpath Prefix","key, value必填":"key,value required","key重复":"Duplicate key","自定义开始时间":"Cumson start time","自定义结束时间":"Cumson end time","最近":"Past ",minute:" minute",minutes:" minutes",hour:" hour",hours:" hours","周":" week","天":" day","月":" month","季度":" quarter","tpl.create":"Create","tpl.tag.bind":"Bind tags","tpl.tag.unbind":"Unbind tags","tpl.tag.bind.title":"Batch bind tags","tpl.tag.bind.success":"Successfully binded","tpl.tag.bind.field":"tags","tpl.tag.unbind.title":"Batch unbind tags","tpl.tag.unbind.field":"tags","tpl.tag.unbind.success":"Successfully unbinded","tpl.node.modify":"Modify node","tpl.node.modify.title":"Batch modify node","tpl.batch.modify.group":"Batch modify group","tpl.title":"Title","tpl.title.tpl.help":"Describe the role of the template","tpl.title.task.help":"Describe the role of the task","tpl.tags":"Tags","tpl.tags.help":"Used for classification","tpl.creator":"Creator","tpl.last_updator":"Last updator","tpl.last_updated":"Last updated","tpl.account.help":"Execute account, use root with caution","tpl.batch.help":"Concurrency, default is 0, indicating full concurrent execution, 1 means sequential execution, 2 means that each time two execute","tpl.tolerance.help":"Tolerate several machines failing, the default is 0, which means no tolerance, once failed, immediately suspend","tpl.timeout.help":"Timeout for stand-alone script execution, in seconds","tpl.pause.help":"Pause after completed, pause multiple hosts, write multiple hosts, separated by commas","tpl.host.help":"List of hosts to be executed","tpl.script.help":"Script content to be executed","tpl.args.help":"Parameters attached to the script, separated by double commas, such as arg1,,arg2,,arg3","tpl.modify":"Modify the template","tpl.create.task":"Create a new task","task.create":"Create task","task.title":"Title","task.done":"Done","task.clone":"Clone","task.meta":"Meta","task.creator":"Creator","task.created":"Created","task.only.mine":"Just mine","task.host":"Host","task.status":"Status","task.output":"Output","task.refresh":"Refresh","task.control.params":"Control params","task.account":"Account","task.batch":"Batch","task.tolerance":"Tolerance","task.timeout":"Timeout","task.script":"Script","task.script.args":"Script params","task.pause":"Pause","task.host.list":"Host list","task.clone.new":"Clone a new task","task.temporary.create":"Create temporary task","groups.instGroups":"Instant groups","groups.crontabGroups":"Crontab groups","perms.hosts":"Hosts","perms.host":"Host","perms.team":"Team","perms.account":"Account","last.7.days":"Last 7 days","last.15.days":"Last 15 days","last.30.days":"Last 30 days","last.60.days":"Last 60 days","last.90.days":"Last 90 days","table.nodata":"No data","table.create":"Create","table.operations":"Operations","table.batch.operations":"Batch Operations","table.detail":"Detail","table.modify":"Modify","table.delete":"Delete","table.delete.batch":"Batch delete","table.clone":"Clone","table.delete.sure":"Are you sure to delete it?","table.delete.there.sure":"Are you sure to delete these?","table.ident":"Ident","table.name":"Name","table.cate":"Cate","table.creator":"Creator","table.lastupdated":"Last updated","table.note":"Note","form.submit":"Submit","form.save":"Save","form.submit.and.save":"Save","form.login":"Login","form.goback":"Go back","msg.submit.success":"Successfully submited","msg.modify.success":"Successfully modified","msg.create.success":"Successfully created","msg.add.success":"Successfully created","msg.delete.success":"Successfully deleted","msg.clone.success":"Successfully cloned","msg.clone.error":"Cloning failed","msg.sort.success":"Successfully sorted"}},zh:{translation:{"新建资源分组":"新建资源分组","端口号":"端口号",classpath:{single:"资源分组"},append_tags:"修改附加标签",strategy:{create:"新建策略分组",single:"告警策略",multiple:"告警策略"},personalInfo:"个人信息","day-events":"天未恢复的",n9e:"滴滴夜莺","周期内所有点":"周期内所有点 - all","发生次数":"发生次数 - happen","最大值":"最大值 - max","最小值":"最小值 - min","均值":"均值 - avg","求和":"求和 - sum","突增突降值":"突增突降值 - diff","突增突降率":"突增突降率 - pdiff","同比变化率":"同比变化率 - c_avg_rate_abs","同比变化率(区分正负)":"同比变化率(区分正负) - c_avg_rate","同比变化值":"同比变化值 - c_avg_abs","同比变化值(区分正负)":"同比变化值(区分正负) - c_avg","3-sigma离群点检测":"3-sigma离群点检测 - stddev",minute:"分钟",minutes:"分钟",hour:"小时",hours:"小时","tpl.create":"创建","tpl.tag.bind":"绑定标签","tpl.tag.unbind":"解绑标签","tpl.tag.bind.title":"批量绑定标签","tpl.tag.bind.field":"待绑定的标签","tpl.tag.bind.success":"批量绑定标签成功","tpl.tag.unbind.title":"批量解绑标签","tpl.tag.unbind.field":"待解绑的标签","tpl.tag.unbind.success":"批量解绑标签成功","tpl.node.modify":"修改节点","tpl.node.modify.title":"批量修改节点","tpl.batch.modify.group":"批量修改所属分组","tpl.title":"标题","tpl.title.tpl.help":"标题，说明这个脚本的作用","tpl.title.task.help":"标题，说明这个任务的作用","tpl.tags":"标签","tpl.tags.help":"标签，用于分类","tpl.creator":"创建人","tpl.last_updator":"更新人","tpl.last_updated":"更新时间","tpl.account.help":"执行账号，慎用root，除非要代表操作系统意志","tpl.batch.help":"并发度，默认是0，表示全并发执行，1表示顺序执行，2表示每次执行2台","tpl.tolerance.help":"容忍几台机器失败，默认是0，表示一台都不容忍，只要失败了，立马暂停","tpl.timeout.help":"单机脚本执行的超时时间，单位是秒","tpl.pause.help":"暂停点，做完某台之后暂停一下，要暂停多台，写多个 host，逗号分隔","tpl.host.help":"要执行的机器列表","tpl.script.help":"要执行的脚本内容","tpl.args.help":"附于脚本之后的参数，多个参数之间用双逗号,,分隔，比如arg1,,arg2,,arg3","tpl.modify":"编辑脚本","tpl.create.task":"创建任务","task.create":"创建任务","task.title":"标题","task.done":"是否完成","task.clone":"克隆任务","task.meta":"元信息","task.creator":"创建人","task.created":"创建时间","task.only.mine":"只看自己","task.host":"Host","task.status":"状态","task.output":"输出","task.refresh":"刷新","task.control.params":"控制参数","task.account":"执行账号","task.batch":"并发度","task.tolerance":"容忍度","task.timeout":"超时时间","task.script":"脚本内容","task.script.args":"脚本参数","task.pause":"暂停点","task.host.list":"机器列表","task.clone.new":"克隆一个新任务","task.temporary.create":"创建临时任务","groups.instGroups":"即时任务","groups.crontabGroups":"定时任务","perms.hosts":"机器","perms.host":"机器","perms.team":"有权限的团队","perms.account":"脚本执行账号","last.7.days":"最近 7 天","last.15.days":"最近 15 天","last.30.days":"最近 30 天","last.60.days":"最近 60 天","last.90.days":"最近 90 天","table.nodata":"暂无数据","table.create":"创建","table.operations":"操作","table.batch.operations":"批量操作","table.detail":"详情","table.modify":"修改","table.delete":"删除","table.delete.batch":"批量删除","table.clone":"克隆","table.delete.sure":"确定要删除吗？","table.delete.there.sure":"确定要删除这些吗?","table.ident":"英文标识","table.name":"显示名","table.cate":"类别","table.creator":"创建者","table.lastupdated":"修改时间","table.note":"备注","form.submit":"提 交","form.save":"保 存","form.submit.and.save":"提交保存","form.login":"登 录","form.goback":"返 回","msg.submit.success":"提交成功","msg.modify.success":"修改成功","msg.create.success":"创建成功","msg.add.success":"添加成功","msg.delete.success":"删除成功","msg.clone.success":"克隆成功","msg.clone.error":"克隆失败","msg.sort.success":"排序成功"}}};xr.use(Ir).init({resources:jr,lng:localStorage.getItem("language")||"zh",interpolation:{escapeValue:!1}});var Gr=d.createContext(null);var $r=function(e){e()},Yr={notify:function(){}};function Ur(){var e=$r,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Vr=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=Yr,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=Ur())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=Yr)},e}(),Wr="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?f.exports.useLayoutEffect:f.exports.useEffect;function Xr(e){var t=e.store,n=e.context,r=e.children,i=f.exports.useMemo((function(){var e=new Vr(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),a=f.exports.useMemo((function(){return t.getState()}),[t]);Wr((function(){var e=i.subscription;return e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,a]);var o=n||Gr;return d.createElement(o.Provider,{value:i},r)}function qr(){return f.exports.useContext(Gr)}function Kr(e){void 0===e&&(e=Gr);var t=e===Gr?qr:function(){return f.exports.useContext(e)};return function(){return t().store}}var Qr=Kr();function Zr(e){void 0===e&&(e=Gr);var t=e===Gr?Qr:Kr(e);return function(){return t().dispatch}}var Jr=Zr(),ei=function(e,t){return e===t};function ti(e){void 0===e&&(e=Gr);var t=e===Gr?qr:function(){return f.exports.useContext(e)};return function(e,n){void 0===n&&(n=ei);var r=t(),i=function(e,t,n,r){var i,a=f.exports.useReducer((function(e){return e+1}),0)[1],o=f.exports.useMemo((function(){return new Vr(n,r)}),[n,r]),s=f.exports.useRef(),l=f.exports.useRef(),c=f.exports.useRef(),u=f.exports.useRef(),h=n.getState();try{if(e!==l.current||h!==c.current||s.current){var p=e(h);i=void 0!==u.current&&t(p,u.current)?u.current:p}else i=u.current}catch(d){throw s.current&&(d.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),d}return Wr((function(){l.current=e,c.current=h,u.current=i,s.current=void 0})),Wr((function(){function e(){try{var e=n.getState(),r=l.current(e);if(t(r,u.current))return;u.current=r,c.current=e}catch(d){s.current=d}a()}return o.onStateChange=e,o.trySubscribe(),e(),function(){return o.tryUnsubscribe()}}),[n,o]),i}(e,n,r.store,r.subscription);return f.exports.useDebugValue(i),i}}var ni,ri=ti();ni=m.exports.unstable_batchedUpdates,$r=ni;var ii={},ai=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),oi=new RegExp("%[a-f0-9]{2}","gi"),si=new RegExp("(%[a-f0-9]{2})+","gi");function li(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],li(n),li(r))}function ci(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(oi),n=1;n<t.length;n++)t=(e=li(t,n).join("")).match(oi);return e}}var ui=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"��","%FF%FE":"��"},r=si.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var i=ci(r[0]);i!==r[0]&&(n[r[0]]=i)}r=si.exec(e)}n["%C2"]="�";for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o];e=e.replace(new RegExp(s,"g"),n[s])}return e}(e)}},hi=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},pi=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),a=0;a<r.length;a++){var o=r[a],s=e[o];(i?-1!==t.indexOf(o):t(o,s,e))&&(n[o]=s)}return n};!function(e){const t=ai,n=ui,r=hi,i=pi,a=Symbol("encodeFragmentIdentifier");function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,n){return n.encode?n.strict?t(e):encodeURIComponent(e):e}function l(e,t){return t.decode?n(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"==typeof n&&n.includes(e.arrayFormatSeparator),a="string"==typeof n&&!i&&l(n,e).includes(e.arrayFormatSeparator);n=a?l(n,e):n;const o=i||a?n.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===n?n:l(n,e);r[t]=o};case"bracket-separator":return(t,n,r)=>{const i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(r[t]=n?l(n,e):n);const a=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>l(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],a):r[t]=a};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const a of e.split("&")){if(""===a)continue;let[e,o]=r(t.decode?a.replace(/\+/g," "):a,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:l(o,t),n(l(e,t),o,i)}for(const r of Object.keys(i)){const e=i[r];if("object"==typeof e&&null!==e)for(const n of Object.keys(e))e[n]=p(e[n],t);else i[r]=p(e,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))}e.extract=h,e.parse=d,e.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[",i,"]"].join("")]:[...n,[s(t,e),"[",s(i,e),"]=",s(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[s(n,e),t,s(i,e)].join("")]:[[r,s(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,s(t,e)]:[...n,[s(t,e),"=",s(r,e)].join("")]}}(t),i={};for(const o of Object.keys(e))n(o)||(i[o]=e[o]);const a=Object.keys(i);return!1!==t.sort&&a.sort(t.sort),a.map((n=>{const i=e[n];return void 0===i?"":null===i?s(n,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?s(n,t)+"[]":i.reduce(r(n),[]).join("&"):s(n,t)+"="+s(i,t)})).filter((e=>e.length>0)).join("&")},e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,i]=r(e,"#");return Object.assign({url:n.split("?")[0]||"",query:d(h(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:l(i,t)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0,[a]:!0},n);const r=u(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),l=Object.assign(o,t.query);let c=e.stringify(l,n);c&&(c=`?${c}`);let h=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(t.url);return t.fragmentIdentifier&&(h=`#${n[a]?s(t.fragmentIdentifier,n):t.fragmentIdentifier}`),`${r}${c}${h}`},e.pick=(t,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[a]:!1},r);const{url:o,query:s,fragmentIdentifier:l}=e.parseUrl(t,r);return e.stringifyUrl({url:o,query:i(s,n),fragmentIdentifier:l},r)},e.exclude=(t,n,r)=>{const i=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return e.pick(t,i,r)}}(ii);const di=function(e,t="download.txt"){const n=document.createElement("a"),r=new Blob([Array.isArray(e)?e.join("\r\n"):e],{type:"text/plain"});n.href=URL.createObjectURL(r),n.download=t,document.body.appendChild(n),n.click()},fi=(e,t,n)=>{const r=document.createElement("textarea");r.style.border="0",r.style.padding="0",r.style.margin="0",r.style.position="absolute",r.style.left="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;let a;r.style.top=`${i}px`,r.setAttribute("readonly",""),r.value=e,document.body.appendChild(r),r.select();try{a=document.execCommand("copy"),n&&e.includes(n)?xt.success(`${t("复制")}${e.split("\n").length}${t("条数据到剪贴板")}`):xt.success(t("复制到剪贴板"))}catch(o){xt.error(t("复制失败")),a=!1}return a&&document.body.removeChild(r),a},mi=()=>Object.values({}).map((e=>e.default)),gi=()=>`_${Math.random().toString(36).substr(2,9)}`;function vi(){const{search:e}=g();return d.useMemo((()=>new URLSearchParams(e)),[e])}var yi,xi,Ei,bi,Ci,wi;(xi=yi||(yi={})).Get="Get",xi.Post="Post",xi.Put="Put",xi.Delete="Delete",(bi=Ei||(Ei={}))[bi.Add=0]="Add",bi[bi.Delete=1]="Delete",(wi=Ci||(Ci={}))[wi.Favorite=0]="Favorite",wi[wi.Common=1]="Common";const Ti=function(e,t){return Si("/api/n9e/auth/login",{method:yi.Post,data:{username:e,password:t}})},Si=v({errorHandler:e=>{throw"AbortError"===e.name||e.silence||Et.error({message:e.message}),e.silence?e:new Error(e.message)},credentials:"include"});function ki(e,t=200){return Si("/api/n9e/busi-groups",{method:yi.Get,params:Object.assign({limit:t},e?{query:e}:{})})}function _i(){return f.exports.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},f.exports.createElement("title",null,"监控对象"),f.exports.createElement("defs",null,f.exports.createElement("filter",{colorInterpolationFilters:"auto",id:"filter-1"},f.exports.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0 0 0 0 0.400000 0 0 0 0 0.400000 0 0 0 0 0.400000 0 0 0 1.000000 0"}))),f.exports.createElement("g",{id:"页面-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},f.exports.createElement("g",{filter:"url(#filter-1)",id:"监控对象"},f.exports.createElement("g",null,f.exports.createElement("rect",{id:"矩形",fillOpacity:.01,fill:"#FFFFFF",fillRule:"nonzero",x:0,y:0,width:16,height:16}),f.exports.createElement("polygon",{id:"路径",fillOpacity:0,fill:"#FFFFFF",fillRule:"nonzero",points:"16 0 0 0 0 16 16 16"}),f.exports.createElement("path",{d:"M8,1 C11.31372,1 14,3.68628 14,7 C14,10.31372 11.31372,13 8,13 C4.68628,13 2,10.31372 2,7 C2,3.68628 4.68628,1 8,1 Z M8,2 C5.23856475,2 3,4.23856475 3,7 C3,9.76143525 5.23856475,12 8,12 C10.7614353,12 13,9.76143525 13,7 C13,4.23856475 10.7614353,2 8,2 Z",id:"路径",fill:"#666666",fillRule:"nonzero"}),f.exports.createElement("path",{d:"M8,4.5 C6.61929096,4.5 5.5,5.61929096 5.5,7 C5.5,8.38070904 6.61929096,9.5 8,9.5 C9.38070904,9.5 10.5,8.38070904 10.5,7 C10.5,5.61929096 9.38070904,4.5 8,4.5 Z M8,5.5 C8.82842429,5.5 9.5,6.17157571 9.5,7 C9.5,7.82842429 8.82842429,8.5 8,8.5 C7.17157571,8.5 6.5,7.82842429 6.5,7 C6.5,6.17157571 7.17157571,5.5 8,5.5 Z",id:"路径",fill:"#666666",fillRule:"nonzero"}),f.exports.createElement("path",{d:"M9.53456667,11.8333333 L6.4562,11.8333333 C6.26408593,11.8333333 6.08896118,11.9434058 6.00565464,12.116518 L4.88278797,14.4498514 C4.7230417,14.7818064 4.96494081,15.1666667 5.33333333,15.1666667 L10.6666667,15.1666667 C11.0357574,15.1666667 11.2776293,14.7804762 11.1165142,14.4484071 L9.98441415,12.1150738 C9.9008054,11.9427506 9.72610179,11.8333333 9.53456667,11.8333333 Z M9.221,12.833 L9.868,14.166 L6.128,14.166 L6.77,12.833 L9.221,12.833 Z",id:"路径",fill:"#666666",fillRule:"nonzero"}),f.exports.createElement("path",{d:"M12,14.1666667 C12.2761424,14.1666667 12.5,14.3905243 12.5,14.6666667 C12.5,14.9121266 12.3231248,15.116275 12.0898756,15.158611 L12,15.1666667 L4,15.1666667 C3.72385763,15.1666667 3.5,14.942809 3.5,14.6666667 C3.5,14.4212068 3.67687516,14.2170583 3.91012437,14.1747223 L4,14.1666667 L12,14.1666667 Z",id:"路径",fill:"#666666",fillRule:"nonzero"})))))}Si.interceptors.request.use(((e,t)=>{let n=s({},t.headers);return n.Authorization=`Bearer ${localStorage.getItem("access_token")||""}`,n["X-Cluster"]||(n["X-Cluster"]=localStorage.getItem("curCluster")||""),n["X-Language"]="zh",{url:e,options:l(s({},t),{headers:n})}})),Si.interceptors.response.use((async(e,t)=>{const{status:n}=e;if(200===n)return e.clone().json().then((r=>{if(!e.url.includes("/api/v1/")&&!e.url.includes("/api/v2")){if(""===r.err||"success"===r.status||""===r.error)return(r.data||r.dat)&&r.dat&&"[object Null]"===Object.prototype.toString.call(r.dat.list)&&(r.dat.list=[]),l(s({},r),{success:!0});throw t.silence?{name:r.err,message:r.err,silence:!0,data:r,response:e}:new Error(r.err)}if(200===n&&!r.error)return l(s({},r),{success:!0});if(r.error){if(e.url.indexOf("/api/n9e/prometheus/api/v1")>-1||e.url.indexOf("/api/v1/datasource/prometheus")>-1)return r;throw new Error(r.error.message,{cause:t.silence})}}));if(500===n&&(e.url.includes("/api/v1")||e.url.includes("/api/v2")))return e.clone().json().then((n=>{if(!n.error)return l(s({},n),{success:!0});if(n.error)throw{name:n.error.name,message:n.error.message,silence:t.silence,data:n,response:e}}));if(401!==n){if(403===n&&(e.url.includes("/api/v1")||e.url.includes("/api/v2")))return e.clone().json().then((e=>{if(location.href="/403",e.error&&e.error.message)throw new Error(e.error.message)}));{const n=e.headers.get("content-type");return-1!==(null==n?void 0:n.indexOf("text/plain; charset=utf-8"))?e.clone().text().then((e=>{throw new Error(e)})):e.clone().json().then((n=>{if(void 0===t.silence&&(e.url.indexOf("/api/n9e/prometheus/api/v1")>-1||e.url.indexOf("/api/v1/datasource/prometheus")>-1))return n;throw e.url.includes("/api/v1")||e.url.includes("/api/v2")?{name:n.error?n.error.name:JSON.stringify(n),message:n.error?n.error.message:JSON.stringify(n),silence:t.silence,data:n,response:e}:new Error(n.err?n.err:n)}))}}e.url.indexOf("/api/n9e/auth/refresh")>0?location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:""):localStorage.getItem("refresh_token")?Si("/api/n9e/auth/refresh",{method:yi.Post,data:{refresh_token:localStorage.getItem("refresh_token")}}).then((e=>{if(console.log("401 err",e),e.err)location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:"");else{const{access_token:t,refresh_token:n}=e.dat;localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",n),location.href=`${location.pathname}${location.search}`}})):location.href="/login"+("/"!=location.pathname?"?redirect="+location.pathname+location.search:"")}),{global:!1});const Ai=y({scriptUrl:"/font/iconfont.js"});const{SubMenu:Oi}=bt;let Ii=mi().reduce(((e,t)=>{const n=t.menu;return n?e=e.concat(n):e}),[]);const Mi=(e,t)=>{const n=w.find(e,(e=>w.some(e.children,(e=>-1!==t.indexOf(e.key)))));if(n)return n.key},Ni=(e,t)=>{let n;return w.forEach(e,(e=>{w.forEach(e.children,(e=>{-1!==t.indexOf(e.key)&&(n=e.key)}))})),n},Fi=()=>{const{t:e,i18n:t}=Hr(),n=[{key:"targets",icon:d.createElement(x,{component:_i}),title:e("监控对象"),children:[{key:"/targets",title:e("对象列表")}]},{key:"monitor",icon:d.createElement(E,null),title:e("监控看图"),children:[{key:"/metric/explorer",title:e("即时查询")},{key:"/object/explorer",title:e("快捷视图")},{key:"/dashboards",title:e("监控大盘")}]},{key:"alarm",icon:d.createElement(Ai,{type:"icon-gaojingguanli-weixuanzhongyangshi"}),title:e("告警管理"),children:[{key:"/alert-rules",title:e("告警规则")},{key:"/recording-rules",title:e("记录规则")},{key:"/alert-mutes",title:e("屏蔽规则")},{key:"/alert-subscribes",title:e("订阅规则")},{key:"/alert-cur-events",title:e("活跃告警")},{key:"/alert-his-events",title:e("历史告警")}]},{key:"job",icon:d.createElement(b,null),title:e("告警自愈"),children:[{key:"/job-tpls",title:e("自愈脚本")},{key:"/job-tasks",title:e("执行历史")}]},{key:"manage",icon:d.createElement(Ai,{type:"icon-renyuanzuzhi-weixuanzhongyangshi"}),title:e("人员组织"),children:[{key:"/users",title:e("用户管理")},{key:"/user-groups",title:e("团队管理")},{key:"/busi-groups",title:e("业务组管理")}]},{key:"help",icon:d.createElement(Ai,{type:"icon-xitongxinxi-weixuanzhongyangshi"}),title:e("系统信息"),children:[{key:"/help/version",title:e("系统版本")},{key:"/help/contact",title:e("联系我们")},{key:"/help/migrate",title:e("管理员迁移")}]}],[r,i]=f.exports.useState(n),a=C(),o=g(),{pathname:s}=o;let{profile:l}=ri((e=>e.account));const[c,u]=f.exports.useState("1"===localStorage.getItem("menuCollapsed")),[h,p]=f.exports.useState([Ni(r,s)]),[m,v]=f.exports.useState(c?[]:[Mi(r,s)]);return f.exports.useEffect((()=>{p([Ni(r,s)]),c||v(w.union([...m,Mi(r,s)]))}),[s,c]),f.exports.useEffect((()=>{l.roles.length>0&&(-1===l.roles.indexOf("Admin")?Si("/api/n9e/self/perms",{method:yi.Get}).then((e=>{const{dat:t}=e,r=[...n];r.forEach((e=>{e.children=e.children.filter((e=>t.includes(e.key)))})),i(r)})):i(n))}),[l.roles]),(()=>{if("/login"===o.pathname||o.pathname.startsWith("/chart/")||"/callback"===o.pathname)return!0;if(0===o.pathname.indexOf("/dashboard")){const e=ii.parse(o.search);return"fullscreen"===(null==e?void 0:e.viewMode)}return!1})()?null:d.createElement("div",{style:{display:"flex",flexDirection:"column",padding:"10px 0 10px 10px"}},d.createElement("div",{className:"home "+(c?"collapse":"")},d.createElement("div",{className:"name",onClick:()=>a.push("/metric/explorer"),key:"overview"},d.createElement("img",{src:c?"/image/logo.svg":"/image/logo-l(1).svg",alt:"",className:"logo"}))),d.createElement(bt,{className:"left-menu-container",inlineCollapsed:c,openKeys:m,selectedKeys:h,onClick:({key:e})=>{if(o.pathname!==e){if(p([e]),"changeLanguage"===e){let e="en"==t.language?"zh":"en";t.changeLanguage(e),localStorage.setItem("language",e)}e.startsWith("/")&&a.push(e)}},mode:"inline",onOpenChange:e=>{v(e)}},w.map(r,(e=>e.children.length>0&&d.createElement(Oi,{key:e.key,icon:e.icon,title:e.title},w.map(e.children,(e=>d.createElement(bt.Item,{key:e.key},e.title)))))),Ii.sort(((e,t)=>t.weight-e.weight)).map((e=>e.content))),d.createElement(Ct,{type:"text",onClick:()=>{u(!c),localStorage.setItem("menuCollapsed",c?"0":"1"),setTimeout((()=>{window.dispatchEvent(new Event("resize"))}),500)},className:"collapseBtn"},d.createElement(c?T:S)))},Li=()=>{const e=C();return d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},d.createElement(wt,{title:"404",subTitle:"你访问的页面不存在!",extra:d.createElement(Ct,{type:"primary",onClick:()=>e.replace("/")},"回到首页")}))},Pi=()=>{const e=C();return d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},d.createElement(wt,{title:"403",subTitle:"你没有权限访问该页面, 请联系管理员!",extra:d.createElement(Ct,{type:"primary",onClick:()=>e.go(-2)},"返回上一页")}))};function Ri(){const{t:e}=Hr(),[t]=Tt.useForm(),n=C(),r=g(),i=r.search&&new URLSearchParams(r.search).get("redirect"),a=Jr(),o=async()=>{try{await t.validateFields(),s()}catch(Wh){console.log(e("输入有误"))}},s=async()=>{let{username:e,password:r}=t.getFieldsValue();await a({type:"account/login",username:e,password:r})||n.push(i||"/metric/explorer")};return d.createElement("div",{className:"login-warp"},d.createElement("img",{src:"/image/login-left-top-corner.png",className:"left-top-bg"}),d.createElement("img",{src:"/image/login-right-bottom-corner.png",className:"right-bottom-bg"}),d.createElement("div",{className:"banner integration"},d.createElement("img",{src:"/image/login-dashboard.svg",style:{margin:"0 60px",zIndex:5,width:632}})),d.createElement("div",{className:"login-panel"},d.createElement("div",{className:"login-main  integration"},d.createElement("div",{className:"login-title"},d.createElement("img",{src:"/image/logo-l.svg",style:{width:"120px"}})),d.createElement(Tt,{form:t,layout:"vertical",requiredMark:!0},d.createElement(Tt.Item,{label:"账户",name:"username",rules:[{required:!0,message:e("请输入用户名")}]},d.createElement(St,{placeholder:e("请输入用户名"),prefix:d.createElement(k,{className:"site-form-item-icon"})})),d.createElement(Tt.Item,{label:"密码",name:"password",rules:[{required:!0,message:e("请输入密码")}]},d.createElement(St,{type:"password",placeholder:e("请输入密码"),onPressEnter:o,prefix:d.createElement(_,{className:"site-form-item-icon"})})),d.createElement(Tt.Item,null,d.createElement(Ct,{type:"primary",onClick:o},e("登录"))),d.createElement("div",{className:"login-other"},d.createElement("strong",null,"其他登录方式："),d.createElement("a",{onClick:()=>{Si("/api/n9e/auth/redirect",{method:yi.Get}).then((e=>{e.dat?window.location.href=e.dat:xt.warning("没有配置 OIDC 登录地址！")}))}},"OIDC"))))))}function Di(){return d.createElement("div",{className:"login-warp"})}function Bi(){const e=g(),t=ii.parse(e.search),[n,r]=f.exports.useState();return f.exports.useEffect((()=>{var e;(e={code:t.code,state:t.state,redirect:t.redirect||"/"},Si("/api/n9e/auth/callback",{method:yi.Get,params:e})).then((e=>{""===e.err?e.dat&&e.dat.access_token&&e.dat.refresh_token?(localStorage.setItem("access_token",e.dat.access_token),localStorage.setItem("refresh_token",e.dat.refresh_token),window.location.href=e.dat.redirect):console.log(e.dat):r(e.err)})).catch((e=>{r(e.message)}))}),[]),void 0===n?null:d.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center"}},d.createElement("div",null,d.createElement("h1",null,"第三方登录验证失败"),d.createElement("div",{style:{fontSize:14}},n),d.createElement("div",null,d.createElement("a",{href:"/login"},"返回登录页"))))}function zi(e){return"function"==typeof e.children?d.createElement("div",null,e.children(!1)):null}const Hi=["red","orange","blue"],ji=function(e,t=1){return Si("/api/n9e/alert-rule-groups",{method:yi.Get,params:{query:e,p:t,limit:15}})},Gi=function(e){return Si(`/api/n9e/alert-rule-group/${e}`,{method:yi.Delete})},$i=function(e){return Si(`/api/n9e/alert-rule-group/${e.id}`,{method:yi.Put,data:e})},Yi=function(e){return Si(`/api/n9e/busi-group/${e.id}/alert-rules`,{method:yi.Get})},Ui=function(e){return Si(`/api/n9e/alert-rule-group/${e}/favorites`,{method:yi.Post,data:{id:e}})},Vi=function(e){return Si(`/api/n9e/alert-rule-group/${e}/favorites`,{method:yi.Delete,data:{id:e}})},Wi=function(e,t,n){return Si(`/api/n9e/busi-group/${t}/alert-rules`,{method:n,data:e})},Xi=function(e,t){return Si(`/api/n9e/busi-group/${t}/alert-rules`,{method:yi.Delete,data:{ids:e}})},qi=function(e,t){return Si("/api/n9e/prometheus/api/v1/query",{method:yi.Get,params:e,headers:{"X-Cluster":t}})},Ki=function(e,t){return Si(`/api/n9e/busi-group/${t}/alert-rules/fields`,{method:yi.Put,data:e})};function Qi(e){return Si("/api/n9e/busi-groups/alertings",{method:yi.Get,params:{ids:e.join(",")}})}const Zi=function(){return Si("/api/n9e/alert-rules/builtin/list",{method:yi.Get})},Ji=function(e,t,n){return Si(`/api/n9e/busi-group/${n}/alert-rules/builtin`,{method:yi.Post,data:{name:e,cluster:t}})},ea=function(e){return Si("/api/n9e/alert-aggr-views",{method:yi.Post,data:e})},ta=function(e){return Si("/api/n9e/alert-aggr-views",{method:yi.Put,data:e})},na=function(e){return Si("/api/fc-brain/data",{method:yi.Get,params:e})};function ra(){const[e,t]=f.exports.useState(),[n,r]=f.exports.useState(),[i,a]=f.exports.useState(!1);return f.exports.useEffect((()=>{const e=A().unix();Si("/api/fc-brain/license",{method:yi.Get}).then((n=>{var i,o,s,l;t(w.round(((null==(i=null==n?void 0:n.data)?void 0:i.expire)-e)/86400)),r(null==(o=null==n?void 0:n.data)?void 0:o.rules_remaining),(null==(s=null==n?void 0:n.data)?void 0:s.show)&&a(!0),window.localStorage.setItem("license_rules_remaining",w.toString(null==(l=null==n?void 0:n.data)?void 0:l.rules_remaining))}))}),[]),e&&i?d.createElement("div",{style:{marginRight:20}},d.createElement(kt,{title:d.createElement("div",null,d.createElement("div",null,"还剩 ",e," 天到期"),d.createElement("div",null,"还可添加 ",n," 条规则"))},d.createElement("div",{style:{background:"#EBE8F2",borderRadius:16,color:"#6C53B1",fontSize:12,padding:"2px 8px"}},"还剩 ",e," 天到期"))):null}const ia=({icon:e,title:t,rightArea:n,introIcon:r,children:i,customArea:a,showBack:o,onChangeCluster:s,hideCluster:l=!0})=>{const{t:c,i18n:u}=Hr(),h=C(),p=Jr();let{profile:m}=ri((e=>e.account));const{clusters:g}=ri((e=>e.common)),v=localStorage.getItem("curCluster"),[y,x]=f.exports.useState(v||g[0]);!v&&g.length>0&&(x(g[0]),localStorage.setItem("curCluster",g[0]),p({type:"common/saveData",prop:"curCluster",data:g[0]}));const E=d.createElement(bt,null,d.createElement(bt.Item,{onClick:()=>{h.push("/account/profile/info")}},c("个人信息")),d.createElement(bt.Item,{onClick:()=>{Si("/api/n9e/auth/logout",{method:yi.Post}).then((e=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),p({type:"common/saveData",prop:"clusters",data:[]}),p({type:"common/saveData",prop:"busiGroups",data:[]}),h.push("/login")}))}},c("退出"))),b=d.createElement(bt,{selectedKeys:[y]},g.map((e=>d.createElement(bt.Item,{key:e,onClick:t=>{x(e),s&&s(e),localStorage.setItem("curCluster",e),p({type:"common/saveData",prop:"curCluster",data:e})}},e))));return d.createElement("div",{className:"page-wrapper"},a?d.createElement("div",{className:"page-top-header"},a):d.createElement("div",{className:"page-top-header"},d.createElement("div",{className:"page-header-content"},d.createElement("div",{className:"page-header-title"},o&&d.createElement(O,{onClick:()=>h.goBack(),style:{marginRight:"5px"}}),e,t),d.createElement("div",{className:"page-header-right-area"},r,"demo.flashcat.cloud"!==window.location.hostname&&{}.VITE_DOC_LINK&&d.createElement("a",{href:{}.VITE_DOC_LINK,target:"_blank",style:{marginRight:20}},"文档"),!l&&d.createElement("div",{style:{marginRight:20}},"集群：",d.createElement(_t,{overlay:b},d.createElement(Ct,null,y," ",d.createElement(I,null)))),d.createElement(zi,null,d.createElement(ra,null)),d.createElement(_t,{overlay:E,trigger:["click"]},d.createElement("span",{className:"avator"},d.createElement("img",{src:m.portrait||"/image/avatar1.png",alt:""}),d.createElement("span",{className:"display-name"},m.nickname||m.username),d.createElement(I,null)))))),i&&i)};var aa,oa=(aa=function(e,t){return(aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}aa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),sa=function(){return(sa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},la={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},ca={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},ua={width:"20px",height:"20px",position:"absolute"},ha={top:sa(sa({},la),{top:"-5px"}),right:sa(sa({},ca),{left:void 0,right:"-5px"}),bottom:sa(sa({},la),{top:void 0,bottom:"-5px"}),left:sa(sa({},ca),{left:"-5px"}),topRight:sa(sa({},ua),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:sa(sa({},ua),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:sa(sa({},ua),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:sa(sa({},ua),{left:"-10px",top:"-10px",cursor:"nw-resize"})},pa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return oa(t,e),t.prototype.render=function(){return f.exports.createElement("div",{className:this.props.className||"",style:sa(sa({position:"absolute",userSelect:"none"},ha[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(f.exports.PureComponent),da=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fa=function(){return(fa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ma={width:"auto",height:"auto"},ga=function(e,t,n){return Math.max(Math.min(e,n),t)},va=function(e,t){return Math.round(e/t)*t},ya=function(e,t){return new RegExp(e,"i").test(t)},xa=function(e){return Boolean(e.touches&&e.touches.length)},Ea=function(e,t,n){void 0===n&&(n=0);var r=t.reduce((function(n,r,i){return Math.abs(r-e)<Math.abs(t[n]-e)?i:n}),0),i=Math.abs(t[r]-e);return 0===n||i<n?t[r]:e},ba=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},Ca=function(e,t,n,r){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%"))return t*(Number(e.replace("%",""))/100);if(e.endsWith("vw"))return n*(Number(e.replace("vw",""))/100);if(e.endsWith("vh"))return r*(Number(e.replace("vh",""))/100)}return e},wa=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Ta=function(e){function t(t){var n=e.call(this,t)||this;return n.ratio=1,n.resizable=null,n.parentLeft=0,n.parentTop=0,n.resizableLeft=0,n.resizableRight=0,n.resizableTop=0,n.resizableBottom=0,n.targetLeft=0,n.targetTop=0,n.appendBase=function(){if(!n.resizable||!n.window)return null;var e=n.parentNode;if(!e)return null;var t=n.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add("__resizable_base__"):t.className+="__resizable_base__",e.appendChild(t),t},n.removeBase=function(e){var t=n.parentNode;t&&t.removeChild(e)},n.ref=function(e){e&&(n.resizable=e)},n.state={isResizing:!1,width:void 0===(n.propsSize&&n.propsSize.width)?"auto":n.propsSize&&n.propsSize.width,height:void 0===(n.propsSize&&n.propsSize.height)?"auto":n.propsSize&&n.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},n.onResizeStart=n.onResizeStart.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n}return da(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||ma},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,i=this.resizable.style.position;"relative"!==i&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:n,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:r,this.resizable.style.position=i}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,n=function(t){if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&e.propsSize[t].toString().endsWith("%")){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var n=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/n[t]*100+"%"}return ba(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?ba(t.width):n("width"),height:t&&void 0!==t.height&&!this.state.isResizing?ba(t.height):n("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,n=this.parentNode.style.flexWrap;"wrap"!==n&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=n),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==n&&"auto"!==n?e:"auto"},t.prototype.calculateNewMaxFromBoundary=function(e,t){var n,r,i=this.props.boundsByDirection,a=this.state.direction,o=i&&ya("left",a),s=i&&ya("top",a);if("parent"===this.props.bounds){var l=this.parentNode;l&&(n=o?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),r=s?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(n=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,r=s?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(n=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),r=s?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return n&&Number.isFinite(n)&&(e=e&&e<n?e:n),r&&Number.isFinite(r)&&(t=t&&t<r?t:r),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n=this.props.scale||1,r=this.props.resizeRatio||1,i=this.state,a=i.direction,o=i.original,s=this.props,l=s.lockAspectRatio,c=s.lockAspectRatioExtraHeight,u=s.lockAspectRatioExtraWidth,h=o.width,p=o.height,d=c||0,f=u||0;return ya("right",a)&&(h=o.width+(e-o.x)*r/n,l&&(p=(h-f)/this.ratio+d)),ya("left",a)&&(h=o.width-(e-o.x)*r/n,l&&(p=(h-f)/this.ratio+d)),ya("bottom",a)&&(p=o.height+(t-o.y)*r/n,l&&(h=(p-d)*this.ratio+f)),ya("top",a)&&(p=o.height-(t-o.y)*r/n,l&&(h=(p-d)*this.ratio+f)),{newWidth:h,newHeight:p}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,r){var i=this.props,a=i.lockAspectRatio,o=i.lockAspectRatioExtraHeight,s=i.lockAspectRatioExtraWidth,l=void 0===r.width?10:r.width,c=void 0===n.width||n.width<0?e:n.width,u=void 0===r.height?10:r.height,h=void 0===n.height||n.height<0?t:n.height,p=o||0,d=s||0;if(a){var f=(u-p)*this.ratio+d,m=(h-p)*this.ratio+d,g=(l-d)/this.ratio+p,v=(c-d)/this.ratio+p,y=Math.max(l,f),x=Math.min(c,m),E=Math.max(u,g),b=Math.min(h,v);e=ga(e,y,x),t=ga(t,E,b)}else e=ga(e,l,c),t=ga(t,u,h);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){if("parent"===this.props.bounds){var e=this.parentNode;if(e){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left,this.targetTop=n.top}if(this.resizable){var r=this.resizable.getBoundingClientRect(),i=r.left,a=r.top,o=r.right,s=r.bottom;this.resizableLeft=i,this.resizableRight=o,this.resizableTop=a,this.resizableBottom=s}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var n,r=0,i=0;if(e.nativeEvent&&function(e){return Boolean((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))}(e.nativeEvent)?(r=e.nativeEvent.clientX,i=e.nativeEvent.clientY):e.nativeEvent&&xa(e.nativeEvent)&&(r=e.nativeEvent.touches[0].clientX,i=e.nativeEvent.touches[0].clientY),this.props.onResizeStart)if(this.resizable)if(!1===this.props.onResizeStart(e,t,this.resizable))return;this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var a=this.window.getComputedStyle(this.resizable);if("auto"!==a.flexBasis){var o=this.parentNode;if(o){var s=this.window.getComputedStyle(o).flexDirection;this.flexDir=s.startsWith("row")?"row":"column",n=a.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var l={original:{x:r,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:fa(fa({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:n};this.setState(l)}},t.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&xa(e))try{e.preventDefault(),e.stopPropagation()}catch(Wh){}var n=this.props,r=n.maxWidth,i=n.maxHeight,a=n.minWidth,o=n.minHeight,s=xa(e)?e.touches[0].clientX:e.clientX,l=xa(e)?e.touches[0].clientY:e.clientY,c=this.state,u=c.direction,h=c.original,p=c.width,d=c.height,f=this.getParentSize(),g=function(e,t,n,r,i,a,o){return r=Ca(r,e.width,t,n),i=Ca(i,e.height,t,n),a=Ca(a,e.width,t,n),o=Ca(o,e.height,t,n),{maxWidth:void 0===r?void 0:Number(r),maxHeight:void 0===i?void 0:Number(i),minWidth:void 0===a?void 0:Number(a),minHeight:void 0===o?void 0:Number(o)}}(f,this.window.innerWidth,this.window.innerHeight,r,i,a,o);r=g.maxWidth,i=g.maxHeight,a=g.minWidth,o=g.minHeight;var v=this.calculateNewSizeFromDirection(s,l),y=v.newHeight,x=v.newWidth,E=this.calculateNewMaxFromBoundary(r,i);this.props.snap&&this.props.snap.x&&(x=Ea(x,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(y=Ea(y,this.props.snap.y,this.props.snapGap));var b=this.calculateNewSizeFromAspectRatio(x,y,{width:E.maxWidth,height:E.maxHeight},{width:a,height:o});if(x=b.newWidth,y=b.newHeight,this.props.grid){var C=va(x,this.props.grid[0]),w=va(y,this.props.grid[1]),T=this.props.snapGap||0;x=0===T||Math.abs(C-x)<=T?C:x,y=0===T||Math.abs(w-y)<=T?w:y}var S={width:x-h.width,height:y-h.height};if(p&&"string"==typeof p)if(p.endsWith("%"))x=x/f.width*100+"%";else if(p.endsWith("vw")){x=x/this.window.innerWidth*100+"vw"}else if(p.endsWith("vh")){x=x/this.window.innerHeight*100+"vh"}if(d&&"string"==typeof d)if(d.endsWith("%"))y=y/f.height*100+"%";else if(d.endsWith("vw")){y=y/this.window.innerWidth*100+"vw"}else if(d.endsWith("vh")){y=y/this.window.innerHeight*100+"vh"}var k={width:this.createSizeForCssProperty(x,"width"),height:this.createSizeForCssProperty(y,"height")};"row"===this.flexDir?k.flexBasis=k.width:"column"===this.flexDir&&(k.flexBasis=k.height),m.exports.flushSync((function(){t.setState(k)})),this.props.onResize&&this.props.onResize(e,u,this.resizable,S)}},t.prototype.onMouseUp=function(e){var t=this.state,n=t.isResizing,r=t.direction,i=t.original;if(n&&this.resizable){var a={width:this.size.width-i.width,height:this.size.height-i.height};this.props.onResizeStop&&this.props.onResizeStop(e,r,this.resizable,a),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:fa(fa({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(e){this.setState({width:e.width,height:e.height})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,r=t.handleStyles,i=t.handleClasses,a=t.handleWrapperStyle,o=t.handleWrapperClass,s=t.handleComponent;if(!n)return null;var l=Object.keys(n).map((function(t){return!1!==n[t]?f.exports.createElement(pa,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:r&&r[t],className:i&&i[t]},s&&s[t]?s[t]:null):null}));return f.exports.createElement("div",{className:o,style:a},l)},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce((function(t,n){return-1!==wa.indexOf(n)||(t[n]=e.props[n]),t}),{}),n=fa(fa(fa({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return f.exports.createElement(r,fa({ref:this.ref,style:n,className:this.props.className},t),this.state.isResizing&&f.exports.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(f.exports.PureComponent);const Sa=At.Group,ka=({dataSource:e,fieldNames:t={},allowNotSelect:n=!1,defaultSelect:r,showBadge:i=!1,badgeInfo:a={},onChange:o})=>{const[s,l]=f.exports.useState(r&&"object"==typeof r?r[t.key||"value"]:r);return d.createElement("div",{className:"radio-list"},e.map((e=>d.createElement(Ot,{key:e.id},d.createElement(It,{span:i?20:24},d.createElement("div",{className:P({"n9e-metric-views-list-content-item":!0,active:e.id==s}),key:e.id,onClick:t=>{e.id!==s&&(l(e.id),o&&o(e.id,e))}},d.createElement("span",{className:"name"},e.name))),i&&d.createElement(It,{span:4},d.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},d.createElement(Mt,{count:a[e.id]||0})))))))},_a=e=>{const t=Jr(),{clusters:n,curClusterItems:r}=ri((e=>e.common)),[i,a]=f.exports.useState(!1),[o,s]=f.exports.useState(!1);return f.exports.useEffect((()=>{s(n.length===r.length),a(!!r.length&&r.length<n.length),n.length&&e.onChange&&e.onChange(r)}),[n]),{title:d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement("span",null,"集群")),isShow:e.isShow,shrink:{style:{flex:"none",maxHeight:"200px"}},render:()=>d.createElement(Sa,{options:n,value:r,style:{flexShrink:1,overflow:"auto"},onChange:r=>{var i;t({type:"common/saveData",prop:"curClusterItems",data:i=r}),localStorage.setItem("curClusterItems",JSON.stringify(i)),e.onChange&&e.onChange(i),a(!!r.length&&r.length<n.length),s(r.length===n.length)}})}},Aa=e=>{const t=Jr(),{busiGroups:n,curBusiItem:r}=ri((e=>e.common)),{alertings:i}=ri((e=>e.event)),[a,o]=f.exports.useState(n),s=e.showNotGroupItem;if(!localStorage.getItem("curBusiItem")&&!s&&n.length>0&&(localStorage.setItem("curBusiItem",JSON.stringify(n[0])),t({type:"common/saveData",prop:"curBusiItem",data:n[0]})),e.defaultSelect&&n.length>0&&r.id!==e.defaultSelect){const r=n.find((t=>t.id===e.defaultSelect));r&&(localStorage.setItem("curBusiItem",JSON.stringify(r)),t({type:"common/saveData",prop:"curBusiItem",data:r}))}const l=f.exports.useMemo((()=>e.defaultSelect?{id:e.defaultSelect}:r.id?r:{id:void 0}),[r]);return f.exports.useEffect((()=>{a.length||o(n)}),[n]),f.exports.useEffect((()=>{n.length&&e.onChange&&(s||!s&&l.id)&&e.onChange(l.id,l)}),[n,l]),{title:"业务组",isShow:!0,shrink:!0,render:()=>d.createElement(d.Fragment,null,d.createElement(St,{className:"left-area-group-search",prefix:d.createElement(M,null),onPressEnter:e=>{e.preventDefault();const n=e.currentTarget.value;n?ki(n).then((e=>{o(e.dat||[])})):ki("").then((e=>{const n=e.dat||[];o(n),t({type:"common/saveData",prop:"busiGroups",data:n})}))},placeholder:"请输入业务组名称进行筛选"}),!s&&r.id&&0!==a.length||s?d.createElement(ka,{dataSource:s?[{id:0,name:"未归组对象"}].concat(a):a,fieldNames:{key:"id",label:"name",value:"id"},allowNotSelect:s,defaultSelect:l,showBadge:e.showAlertings,badgeInfo:i,onChange:(n,r)=>{n&&(t({type:"common/saveData",prop:"curBusiItem",data:r}),localStorage.setItem("curBusiItem",JSON.stringify(r))),e.onChange&&e.onChange(n,r)}}):d.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",padding:20,marginLeft:-20}},d.createElement("img",{src:"/image/empty.png",width:"64"}),d.createElement("div",{className:"ant-empty-description"},"暂无数据")))}},Oa=({clusterGroup:e={},busiGroup:t={},eventLevelGroup:n={},eventTypeGroup:r={}})=>{const i=C(),[a,o]=f.exports.useState("1"===localStorage.getItem("leftlist")),s=[_a(e),Aa(t),{title:"事件级别",isShow:n.isShow,render:()=>d.createElement(ka,{dataSource:[{label:"一级告警",value:1},{label:"二级告警",value:2},{label:"三级告警",value:3}],defaultSelect:n.defaultSelect,allowNotSelect:!0,onChange:null==n?void 0:n.onChange})},{title:"事件类别",isShow:r.isShow,render:()=>d.createElement(ka,{dataSource:[{label:"Triggered",value:0},{label:"Recovered",value:1}],defaultSelect:r.defaultSelect,allowNotSelect:!0,onChange:null==r?void 0:r.onChange})}],[l,c]=f.exports.useState(w.toNumber(localStorage.getItem("leftwidth")||200));return d.createElement(Ta,{style:{marginRight:a?0:10},size:{width:a?0:l,height:"100%"},enable:{right:!a},onResizeStop:(e,t,n,r)=>{let i=l+r.width;i<200&&(i=200),c(i),localStorage.setItem("leftwidth",i.toString())}},d.createElement("div",{className:a?"left-area collapse":"left-area"},d.createElement("div",{className:"collapse-btn",onClick:()=>{localStorage.setItem("leftlist",a?"0":"1"),o(!a)}},a?d.createElement(F,null):d.createElement(N,null)),s.map((({title:e,isShow:t,shrink:n=!1,render:r},a)=>t&&d.createElement("div",{key:a,className:"left-area-group "+(n?"group-shrink":""),style:"object"==typeof n?n.style:{}},d.createElement("div",{className:"left-area-group-title"},e,"业务组"===e&&d.createElement(L,{onClick:()=>i.push("/busi-groups")})),r())))))};function Ia(e){const{t:t}=Hr(),{text:n}=e;return d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(R,{style:{color:"#1473ff"}})," ",t("提示信息")),d.createElement("p",null,n,"需要归属某个业务组，请先  ",d.createElement(D,{to:"/busi-groups"},"创建业务组")))}const Ma=e=>{var t=e,{onSearch:n}=t,r=c(t,["onSearch"]);Hr();const[i,a]=f.exports.useState("");return d.createElement(St,s({prefix:d.createElement(M,null),value:i,onChange:e=>{a(e.target.value),""===e.target.value&&n&&n("")},onPressEnter:e=>{n&&n(i)}},r))};var Na,Fa,La,Pa,Ra,Da,Ba,za,Ha,ja;(Fa=Na||(Na={}))[Fa.n9e=0]="n9e",Fa[Fa.prometheus=1]="prometheus",(Pa=La||(La={}))[Pa.Enable=0]="Enable",Pa[Pa.UnEnable=1]="UnEnable",(Da=Ra||(Ra={}))[Da.Send=0]="Send",Da[Da.UnSend=1]="UnSend",(za=Ba||(Ba={}))[za.First=1]="First",za[za.Second=2]="Second",za[za.Third=3]="Third",(ja=Ha||(Ha={}))[ja.Favorite=0]="Favorite",ja[ja.Common=1]="Common";const Ga=["30","50","100","300"],$a=[{value:"1h"},{value:"2h"},{value:"3h"},{value:"6h"},{value:"12h"},{value:"1d"},{value:"2d"},{value:"3d"},{value:"5d"},{value:"7d"},{value:"14d"},{value:"30d"},{value:"60d"},{value:"90d"},{value:"forever"}];function Ya(e){Hr();const{onClick:t,className:n}=e,[r,i]=f.exports.useState(!1);return d.createElement(Ct,{className:n?n+" reload-icon":"reload-icon",loading:r,onClick:e=>{r||(i(!0),t(),setTimeout((()=>{i(!1)}),1e3))},icon:d.createElement(B,{className:"refresh",spin:r})})}const Ua=e=>{var t=e,{text:n}=t,r=c(t,["text"]);return Hr(),Array.from(n).reduce(((e,t)=>e+t.charCodeAt(0)),0),d.createElement(Nt,s({color:"purple"},r),n)};const{Option:Va}=Lt,{TextArea:Wa}=St;var Xa,qa;function Ka(e){const{t:t}=Hr(),n=f.exports.useRef(null),{status:r,title:i,exportData:a,description:o,onClose:c,onSubmit:u,crossCluster:h=!0,onSuccess:p,label:m,fetchBuiltinFunc:g,submitBuiltinFunc:v,bgid:y}=e,[x]=Tt.useForm(),{clusters:E}=ri((e=>e.common)),[b,C]=f.exports.useState([]),[w,T]=f.exports.useState([]),[S,k]=f.exports.useState(),_=[{title:m,dataIndex:"name"},{title:"导入结果",dataIndex:"isTrue",render:e=>e?d.createElement(j,{style:{color:"#389e0d",fontSize:"18px"}}):d.createElement(G,{style:{color:"#d4380d",fontSize:"18px"}})},{title:"错误消息",dataIndex:"msg"}],A=[{title:`${m}名称`,dataIndex:"name"},{title:"操作",dataIndex:"id",render:(e,t)=>d.createElement(Ct,{type:"link",onClick:()=>{v&&v(t.name,x.getFieldValue("cluster"),y).then((({dat:e})=>{k(Object.keys(e).map((t=>({name:t,key:t,isTrue:!e[t],msg:e[t]}))))}))}},"导入")}],O=()=>{c(),S&&S.some((e=>e.isTrue))&&p&&p()};f.exports.useEffect((()=>{r!==Xa.BuiltIn&&r!=Xa.Import||g&&g().then((e=>{let t=e.dat.map((e=>({name:e})));T(t),C(t)})),k(void 0)}),[r]);const I=f.exports.isValidElement(i)?i:r===Xa.Export?t("导出")+i:t("导入")+i;return d.createElement(Ft,{title:I,destroyOnClose:!0,wrapClassName:f.exports.isValidElement(i)?"import-modal-wrapper":void 0,footer:r===Xa.Import&&d.createElement(d.Fragment,null,d.createElement(Ct,{key:"delete",onClick:O},t("取消")),S?d.createElement(Ct,{type:"primary",onClick:O},t("关闭")):d.createElement(Ct,{key:"submit",type:"primary",onClick:async()=>{await x.validateFields();const e=x.getFieldsValue();try{const t=JSON.parse(e.import);if(!Array.isArray(t))return void xt.error(i+"JSON需要时数组");const n=t.map((t=>l(s({},t),{cluster:h?e.cluster:void 0}))),r=await u(n),a=Object.keys(r).map((e=>({name:e,key:e,isTrue:!r[e],msg:r[e]})));k(a)}catch(n){xt.error(t("数据有误:")+n)}}},t("确定"))),onCancel:O,afterClose:()=>k(void 0),visible:"hide"!==r,width:600},d.createElement("div",{style:{color:"#999"}},o&&d.createElement("p",null,o),r===Xa.Export&&d.createElement("p",null,d.createElement("a",{onClick:()=>{di([a],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>fi(a,t)},d.createElement(z,null),"复制JSON内容到剪贴板"))),(()=>{switch(r){case Xa.Export:return d.createElement("div",{contentEditable:"true",suppressContentEditableWarning:!0,ref:n,className:"export-dialog code-area"},d.createElement("pre",null,a));case Xa.BuiltIn:return d.createElement(d.Fragment,null,d.createElement(Tt,{form:x,preserve:!1,layout:"vertical"},h&&d.createElement(Tt.Item,{label:t("生效集群："),name:"cluster",initialValue:E[0]||"Default",rules:[{required:!0,message:t("生效集群不能为空")}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},null==E?void 0:E.map((e=>d.createElement(Va,{value:e,key:e},e)))))),d.createElement(St,{placeholder:`请输入要查询的${m}名称`,prefix:d.createElement(M,null),style:{marginBottom:"8px"},allowClear:!0,onChange:e=>{let t=e.target.value,n=[];b.forEach((e=>{-1!=e.name.toLowerCase().indexOf(t.toLowerCase())&&n.push(e)})),T(n)}}),d.createElement(Rt,{className:"samll_table",dataSource:w,columns:A,pagination:!(w.length<5)&&{pageSize:5},size:"small"}),S&&d.createElement(d.Fragment,null,d.createElement(Pt,null),d.createElement(Rt,{className:"samll_table",dataSource:S,columns:_,size:"small",pagination:!(S.length<5)&&{pageSize:5}})));case Xa.Import:return d.createElement(d.Fragment,null,d.createElement(Tt,{form:x,preserve:!1,layout:"vertical"},h?d.createElement(Tt.Item,{label:t("生效集群："),name:"cluster",initialValue:E[0]||"Default",rules:[{required:!0,message:t("生效集群不能为空")}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},null==E?void 0:E.map((e=>d.createElement(Va,{value:e,key:e},e))))):null,d.createElement(Tt.Item,{label:(f.exports.isValidElement(i)?m:i)+t("JSON："),name:"import",rules:[{required:!0,message:t("请输入")+i,validateTrigger:"trigger"}]},d.createElement(Wa,{className:"code-area",placeholder:t("请输入")+(f.exports.isValidElement(i)?m:i),rows:4}))),S&&d.createElement(d.Fragment,null,d.createElement(Pt,null),d.createElement(Rt,{className:"samll_table",dataSource:S,columns:_,pagination:!1,size:"small"})))}})())}(qa=Xa||(Xa={})).Import="import",qa.Export="export",qa.BuiltIn="builtin",qa.None="hide";const Qa=function(e={}){return Si("/api/n9e/users",{method:yi.Get,params:e})},Za=function(e){const t=e?e.limit?e:l(s({},e),{limit:200}):{limit:200};return Si("/api/n9e/user-groups",{method:yi.Get,params:t})},Ja=function(e={}){return Si("/api/n9e/busi-groups",{method:yi.Get,params:e})},eo=function(e){return Si(`/api/n9e/busi-group/${e}`,{method:yi.Get}).then((e=>e&&e.dat))},to=function(e){return Si(`/api/n9e/user-group/${e}`,{method:yi.Get}).then((e=>e&&e.dat))},no=function(){return Si("/api/n9e/notify-channels",{method:yi.Get}).then((e=>e&&e.dat))},ro=function(){return Si("/api/n9e/contact-keys",{method:yi.Get}).then((e=>e&&e.dat))},io=({checked:e,onChange:t,label:n})=>d.createElement(d.Fragment,null,d.createElement(Dt,{checked:e,onChange:t,style:{marginRight:5}}),n),ao=ln.theme({".cm-content":{padding:0},"&.cm-editor.cm-focused":{outline:"unset"},".cm-scroller":{overflow:"hidden",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono;",lineHeight:"unset"},".cm-matchingBracket":{color:"#000",backgroundColor:"#dedede",fontWeight:"bold",outline:"1px dashed transparent"},".cm-nonmatchingBracket":{borderColor:"red"},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{maxHeight:"350px",fontFamily:'"DejaVu Sans Mono", monospace',maxWidth:"unset"},"& > ul > li":{padding:"2px 1em 2px 3px",overflowY:"hidden"},"& > ul > li[aria-selected]":{backgroundColor:"#a7d0f2",color:"unset"},minWidth:"30%"},".cm-completionDetail":{float:"right",color:"#999"},".cm-tooltip.cm-completionInfo":{marginTop:"-11px",padding:"10px",fontFamily:"'Open Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;",border:"none",minWidth:"250px",maxWidth:"min-content"},".cm-completionInfo.cm-completionInfo-right":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",left:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginLeft:"12px"},".cm-completionInfo.cm-completionInfo-left":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",right:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginRight:"12px"},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold",color:"#0066bf"},".cm-selectionMatch":{backgroundColor:"#e6f3ff"},".cm-diagnostic":{"&.cm-diagnostic-error":{borderLeft:"3px solid #e65013"}},".cm-completionIcon":{boxSizing:"content-box",fontSize:"16px",lineHeight:"1",marginRight:"10px",verticalAlign:"top","&:after":{content:"'\\ea88'"},fontFamily:"codicon",paddingRight:"0",opacity:"1",color:"#007acc"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\ea8c'"},color:"#652d90"},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\eb5f'"},color:"#007acc"},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\eb62'"},color:"#616161"},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'\\ea95'"},color:"#ee9d28"}});ln.theme({".cm-tooltip":{backgroundColor:"#f8f8f8",borderColor:"rgba(52, 79, 113, 0.2)"},".cm-tooltip.cm-tooltip-autocomplete":{"& li:hover":{backgroundColor:"#ddd"},"& > ul > li[aria-selected]":{backgroundColor:"#d6ebff",color:"unset"}},".cm-tooltip.cm-completionInfo":{backgroundColor:"#d6ebff"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#d6ebff"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#d6ebff"}},".cm-line":{"&::selection":{backgroundColor:"#add6ff"},"& > span::selection":{backgroundColor:"#add6ff"}}},{dark:!1}),ln.theme({".cm-content":{caretColor:"#fff"},".cm-tooltip.cm-completionInfo":{backgroundColor:"#333338"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#333338"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#333338"}},".cm-line":{"&::selection":{backgroundColor:"#767676"},"& > span::selection":{backgroundColor:"#767676"}}},{dark:!0});const oo=cn.define([{tag:un.name,color:"#000"},{tag:un.number,color:"#09885a"},{tag:un.string,color:"#a31515"},{tag:un.keyword,color:"#008080"},{tag:un.function(un.variableName),color:"#008080"},{tag:un.labelName,color:"#800000"},{tag:un.operator},{tag:un.modifier,color:"#008080"},{tag:un.paren},{tag:un.squareBracket},{tag:un.brace},{tag:un.invalid,color:"red"},{tag:un.comment,color:"#888",fontStyle:"italic"}]),so=new hn;var lo=d.forwardRef((({url:e,headers:t,value:n,onChange:r,executeQuery:i,readonly:a=!1,validateTrigger:o=["onChange","onBlur"],completeEnabled:l=!0},c)=>{const u=f.exports.useRef(null),h=f.exports.useRef(null),p=f.exports.useRef(i),m=f.exports.useRef(n||""),g={Authorization:`Bearer ${localStorage.getItem("access_token")||""}`};return f.exports.useEffect((()=>{p.current=i,so.activateCompletion(!0).activateLinter(!0).setComplete(l?{remote:{url:e,fetchFn:(e,n={})=>{var r;const i=null==(r=n.body)?void 0:r.toString();return fetch(e+(i?`?${i}`:""),{method:"Get",headers:new Headers(t?s(s({},g),t):g)})}}}:void 0);if(null===h.current){if(!u.current)throw new Error("expected CodeMirror container element to exist");const e=pn.create({doc:n,extensions:[ao,dn(),fn(),pn.allowMultipleSelections.of(!0),mn(),gn(),vn(),yn(),xn(),oo,ln.lineWrapping,En.of([...bn,...Cn,...wn,...Tn,...Sn,...kn]),_n("Input promql to query. Press Shift+Enter for newlines"),so.asExtension(),ln.editable.of(!a),En.of([{key:"Escape",run:e=>(e.contentDOM.blur(),!1)}]),An.override(En.of([{key:"Enter",run:e=>("function"==typeof p.current&&p.current(m.current),!0)},{key:"Shift-Enter",run:On}])),ln.updateListener.of((e=>{if("function"==typeof r){const t=e.state.doc.toString();t!==m.current&&(m.current=t,w.includes(o,"onChange")&&r(t))}}))]}),t=new ln({state:e,parent:u.current});h.current=t,c&&(c.current=t),t.focus()}}),[r,JSON.stringify(t),l]),f.exports.useEffect((()=>{if(m.current!==n){const e=m.current;m.current=n||"";const t=h.current;if(null===t)return;t.dispatch(t.state.update({changes:{from:0,to:(null==e?void 0:e.length)||0,insert:n}}))}}),[n]),d.createElement("div",{className:P({"ant-input":!0,readonly:a,"promql-input":!0}),onBlur:()=>{"function"==typeof r&&m.current!==n&&r(m.current)},onKeyDown:e=>{"Enter"===e.code&&"function"==typeof r&&m.current!==n&&r(m.current)}},d.createElement("div",{className:"input-content",ref:u}))}));function co(e){const{form:t}=e,[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState({});return f.exports.useEffect((()=>{Si("/api/fc-brain/params",{method:yi.Get}).then((e=>e.data)).then((e=>{a(e)}))}),[]),d.createElement(d.Fragment,null,d.createElement(Tt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:"告警方式"},d.createElement(Bt.Group,{buttonStyle:"solid",value:"holtwinters"===e("algorithm")?"abnormalDetection":"threshold",onChange:e=>{"abnormalDetection"===e.target.value?t.setFieldsValue({algorithm:"holtwinters",algo_params:null==i?void 0:i.holtwinters}):t.setFieldsValue({algorithm:"",algo_params:void 0})}},d.createElement(Bt.Button,{value:"threshold"},"阈值告警"),d.createElement(Bt.Button,{value:"abnormalDetection"},"智能告警"))),"holtwinters"===e("algorithm")&&d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:"使用算法",name:"algorithm",style:{display:"none"}},d.createElement(Lt,null,d.createElement(Lt.Option,{value:"holtwinters"},"holtwinters"))),d.createElement(Tt.Item,{label:"高级配置"},d.createElement("div",{style:{height:32,lineHeight:"32px",userSelect:"none"}},d.createElement("a",{onClick:()=>r(!n)},n?"收起":"展开")),d.createElement("div",{style:{display:n?"block":"none"}},d.createElement("div",null,"季节性周期时间为：",d.createElement(Tt.Item,{noStyle:!0,name:["algo_params","seasonal_duration"]},d.createElement(Lt,{style:{width:100}},d.createElement(Lt.Option,{value:3600},"小时"),d.createElement(Lt.Option,{value:86400},"天"),d.createElement(Lt.Option,{value:604800},"周"),d.createElement(Lt.Option,{value:2592e3},"月")))," "),d.createElement("div",{style:{display:"flex",alignItems:"baseline",marginTop:16}},d.createElement("div",{style:{marginRight:16}},"偏离"),d.createElement("div",{style:{display:"flex",gap:20}},d.createElement("div",{style:{marginBottom:16}},d.createElement(Tt.Item,{noStyle:!0,name:["algo_params","upper_bound"],valuePropName:"checked",getValueFromEvent:e=>e.target.checked?1:0},d.createElement(At,null,"上界")),d.createElement(Tt.Item,{noStyle:!0,name:["algo_params","upper_times_num"]},d.createElement(zt,null))," ","倍误差"),d.createElement("div",null,d.createElement(Tt.Item,{noStyle:!0,name:["algo_params","lower_bound"],valuePropName:"checked",getValueFromEvent:e=>e.target.checked?1:0},d.createElement(At,null,"下界")),d.createElement(Tt.Item,{noStyle:!0,name:["algo_params","lower_times_num"]},d.createElement(zt,null))," ","倍误差"))),d.createElement("div",null,d.createElement(Tt.List,{name:["algo_params","compares"]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement("div",{style:{marginBottom:10}},"同环比"," ",d.createElement($,{onClick:()=>{t({operator:1,offset:86400,bound_type:0})}})),e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(Ht,{key:r,style:{display:"flex",marginBottom:8},align:"baseline"},d.createElement(Tt.Item,l(s({},a),{name:[i,"operator"]}),d.createElement(Lt,null,d.createElement(Lt.Option,{value:1},"且"),d.createElement(Lt.Option,{value:0},"或"))),d.createElement("span",null,"相比"),d.createElement(Tt.Item,l(s({},a),{name:[i,"offset"]}),d.createElement(Lt,null,d.createElement(Lt.Option,{value:86400},"1"),d.createElement(Lt.Option,{value:172800},"2"),d.createElement(Lt.Option,{value:259200},"3"),d.createElement(Lt.Option,{value:345600},"4"),d.createElement(Lt.Option,{value:432e3},"5"),d.createElement(Lt.Option,{value:518400},"6"),d.createElement(Lt.Option,{value:604800},"7"))),d.createElement("span",null,"天前同时期"),d.createElement(Tt.Item,l(s({},a),{name:[i,"bound_type"]}),d.createElement(Lt,null,d.createElement(Lt.Option,{value:0},"偏离"),d.createElement(Lt.Option,{value:1},"上升"),d.createElement(Lt.Option,{value:2},"下降"))),d.createElement(Tt.Item,l(s({},a),{name:[i,"value"]}),d.createElement(zt,null))," %",d.createElement(Y,{onClick:()=>n(i)}))})))))))))))))}const{Option:uo}=Lt,ho={labelCol:{span:3},wrapperCol:{span:24}};function po(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function fo(e){const{isCorrectFormat:t,isLengthAllowed:n}=po(e.value);return t&&n?d.createElement(Nt,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(kt,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Nt,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function mo(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=po(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const go=({type:e,detail:t={}})=>{const{t:n,i18n:r}=Hr(),i=C(),[a]=Tt.useForm(),{clusters:o}=ri((e=>e.common)),{curBusiItem:c}=ri((e=>e.common)),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState([]),[g,v]=f.exports.useState({});f.exports.useState(!0);const[y,x]=f.exports.useState(!0);f.exports.useEffect((()=>(S(),k(""),()=>{})),[]),f.exports.useEffect((()=>{const n=l(s({},t),{enable_time:(null==t?void 0:t.enable_stime)?[t.enable_stime,t.enable_etime]:[],enable_status:void 0===(null==t?void 0:t.disabled)||!(null==t?void 0:t.disabled)});if(v(n),1==e){const e=(t.notify_groups_obj?t.notify_groups_obj.filter((e=>!p.find((t=>e.id===t.id)))):[]).concat(p);m(e)}}),[JSON.stringify(t)]);const E=[n("周日"),n("周一"),n("周二"),n("周三"),n("周四"),n("周五"),n("周六")].map(((e,t)=>d.createElement(uo,{value:String(t),key:t},`${e}`))),b=u.map((e=>d.createElement(At,{value:e.key,key:e.label},e.label))),T=p.map((e=>d.createElement(uo,{value:String(e.id),key:e.id},e.name))),S=async()=>{const e=await no();h(e||[])},k=async e=>{const n=await Za({query:e}),r=n.dat||n,i=(t.notify_groups_obj?t.notify_groups_obj.filter((e=>!r.find((t=>e.id===t.id)))):[]).concat(r);m(i||[])},_=f.exports.useCallback(U.exports.debounce(k,800),[]);return d.createElement("div",{className:"operate_con"},d.createElement(Tt,l(s({},ho),{form:a,className:"strategy-form",layout:"vertical",initialValues:l(s({prom_eval_interval:15,prom_for_duration:60,severity:2,disabled:0,enable_days_of_week:["1","2","3","4","5","6","0"]},t),{cluster:t.cluster?t.cluster.split(" "):o||["Default"],enable_in_bg:1===(null==t?void 0:t.enable_in_bg),enable_time:(null==t?void 0:t.enable_stime)?[A(t.enable_stime,"HH:mm"),A(t.enable_etime,"HH:mm")]:[A("00:00","HH:mm"),A("23:59","HH:mm")],enable_status:void 0===(null==t?void 0:t.disabled)||!(null==t?void 0:t.disabled),notify_recovered:1===(null==t?void 0:t.notify_recovered)||void 0===(null==t?void 0:t.notify_recovered),recover_duration:(null==t?void 0:t.recover_duration)||0,callbacks:(null==t?void 0:t.callbacks)?t.callbacks.map((e=>({url:e}))):[{}]})}),d.createElement(Ht,{direction:"vertical",style:{width:"100%"}},d.createElement(jt,{title:n("基本配置")},d.createElement(Tt.Item,{label:n("规则标题："),name:"name",rules:[{required:!0,message:n("规则标题不能为空")}]},d.createElement(St,{placeholder:n("请输入规则标题")})),d.createElement(Tt.Item,{label:n("规则备注："),name:"note",rules:[{required:!1}]},d.createElement(St,{placeholder:n("请输入规则备注")})),d.createElement(Tt.Item,{label:n("告警级别"),name:"severity",rules:[{required:!0,message:n("告警级别不能为空")}]},d.createElement(Bt.Group,null,d.createElement(Bt,{value:1},n("一级报警")),d.createElement(Bt,{value:2},n("二级报警")),d.createElement(Bt,{value:3},n("三级报警")))),d.createElement(Tt.Item,{label:n("生效集群"),name:"cluster",rules:[{required:!0,message:n("生效集群不能为空")}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:e=>{e.includes("$all")&&a.setFieldsValue({cluster:["$all"]})}},d.createElement(uo,{value:"$all",key:"$all"},"$all"),null==o?void 0:o.map((e=>d.createElement(uo,{value:e,key:e},e))))),d.createElement(zi,null,d.createElement(co,{form:a})),d.createElement(Tt.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.cluster!==t.cluster},(({getFieldValue:e})=>d.createElement(Tt.Item,{label:"PromQL",className:"Promeql-content",required:!0,style:{marginBottom:0}},d.createElement(zi,null,(t=>{const r=a.getFieldValue("cluster").includes("$all")&&o.length>0?o[0]:a.getFieldValue("cluster")[0]||"";return d.createElement(St.Group,{compact:!0},d.createElement(Tt.Item,{style:{width:t&&"holtwinters"===e("algorithm")?"calc(100% - 80px)":"100%"},name:"prom_ql",validateTrigger:["onBlur"],trigger:"onChange",rules:[{required:!0,message:n("请输入PromQL")}]},d.createElement(lo,{url:"/api/n9e/prometheus",headers:{"X-Cluster":r,Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},onChange:()=>{x(!1)}})),t&&"holtwinters"===e("algorithm")&&d.createElement(Ct,{onClick:()=>{const e=a.getFieldsValue();var t;e.prom_ql&&(x(!0),(t={cluster:w.join(e.cluster,""),algorithm:e.algorithm,algo_params:e.algo_params,prom_ql:e.prom_ql,prom_eval_interval:e.prom_eval_interval},Si("/api/fc-brain/promql-check",{method:yi.Post,data:t,silence:!0}).then((e=>e.data))).then((()=>{xt.success("校验通过")})).catch((e=>{xt.error(d.createElement("div",null,"校验失败",d.createElement("div",null,e.data.error)))})))}},"指标校验"))}))))),d.createElement(Tt.Item,{required:!0,label:n("执行频率")},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:15,wrapperCol:{span:24},rules:[{required:!0,message:n("执行频率不能为空")}]},d.createElement(zt,{min:1})),"秒",d.createElement(kt,{title:n(`每隔${a.getFieldValue("prom_eval_interval")}秒，把PromQL作为查询条件，去查询后端存储，如果查到了数据就表示当次有监控数据触发了规则`)},d.createElement(V,null)))),d.createElement(Tt.Item,{required:!0,label:n("持续时长"),rules:[{required:!0,message:n("持续时长不能为空")}]},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"prom_for_duration",wrapperCol:{span:10}},d.createElement(zt,{min:0})),"秒",d.createElement(kt,{title:n("通常持续时长大于执行频率，在持续时长内按照执行频率多次执行PromQL查询，每次都触发才生成告警；如果持续时长置为0，表示只要有一次PromQL查询触发阈值，就生成告警")},d.createElement(V,null)))),d.createElement(Tt.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},mo]},d.createElement(Lt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:fo})),d.createElement(Tt.Item,{label:n("预案链接"),name:"runbook_url"},d.createElement(St,null))),d.createElement(jt,{title:n("生效配置")},d.createElement(Tt.Item,{label:n("立即启用"),name:"enable_status",rules:[{required:!0,message:n("立即启用不能为空")}],valuePropName:"checked"},d.createElement(Dt,null)),d.createElement(Tt.Item,{label:n("生效时间"),name:"enable_days_of_week",rules:[{required:!0,message:n("生效时间不能为空")}]},d.createElement(Lt,{mode:"tags"},E)),d.createElement(Tt.Item,{name:"enable_time",rules:[{required:!0,message:n("生效时间不能为空")}]},d.createElement(Gt.RangePicker,{format:"HH:mm",onChange:(e,t)=>{a.setFieldsValue({enable_stime:t[0],enable_etime:t[1]})}})),d.createElement(Tt.Item,{label:n("仅在本业务组生效"),name:"enable_in_bg",valuePropName:"checked"},d.createElement(io,{label:"根据告警事件中的ident归属关系判断"}))),d.createElement(jt,{title:n("通知配置")},d.createElement(Tt.Item,{label:n("通知媒介"),name:"notify_channels"},d.createElement(At.Group,null,b)),d.createElement(Tt.Item,{label:n("告警接收组"),name:"notify_groups"},d.createElement(Lt,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>_(e),onBlur:()=>k("")},T)),d.createElement(Tt.Item,{label:n("启用恢复通知")},d.createElement(Ht,null,d.createElement(Tt.Item,{name:"notify_recovered",valuePropName:"checked",style:{marginBottom:0}},d.createElement(Dt,null)),d.createElement(kt,{title:n("告警恢复时也发送通知")},d.createElement(V,null)))),d.createElement(Tt.Item,{label:n("留观时长"),required:!0},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"recover_duration",initialValue:0,wrapperCol:{span:10}},d.createElement(zt,{min:0})),"秒",d.createElement(kt,{title:n(`持续${a.getFieldValue("recover_duration")}秒没有再次触发阈值才发送恢复通知`)},d.createElement(V,null)))),d.createElement(Tt.Item,{label:n("重复发送频率"),required:!0},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"notify_repeat_step",initialValue:60,wrapperCol:{span:10},rules:[{required:!0,message:n("重复发送频率不能为空")}]},d.createElement(zt,{min:0})),"分钟",d.createElement(kt,{title:n(`如果告警持续未恢复，间隔${a.getFieldValue("notify_repeat_step")}分钟之后重复提醒告警接收组的成员`)},d.createElement(V,null)))),d.createElement(Tt.Item,{label:n("最大发送次数"),required:!0},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"notify_max_number",initialValue:0,wrapperCol:{span:10},rules:[{required:!0,message:n("最大发送次数不能为空")}]},d.createElement(zt,{min:0,precision:0})),d.createElement(kt,{title:n("如果值为0，则不做最大发送次数的限制")},d.createElement(V,null)))),d.createElement(Tt.Item,{label:n("回调地址")},d.createElement(Tt.List,{name:"callbacks",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map((e=>d.createElement(Ot,{gutter:[10,0],key:e.key},d.createElement(It,{span:22},d.createElement(Tt.Item,{name:[e.name,"url"],fieldKey:[e.fieldKey,"url"]},d.createElement(St,null))),d.createElement(It,{span:1},d.createElement(Y,{className:"control-icon-normal",onClick:()=>n(e.name)}))))),d.createElement($,{className:"control-icon-normal",onClick:()=>t()})))))),d.createElement(Tt.Item,{style:{marginTop:20}},d.createElement(Ct,{type:"primary",onClick:()=>{a.validateFields().then((async r=>{if(!y&&"holtwinters"===r.algorithm)return void xt.warning("请先校验指标");const a=r.cluster.includes("$all")&&o.length>0?o[0]:r.cluster[0]||"",u=await qi({query:r.prom_ql},a);if(u.error)return Et.error({message:u.error}),!1;const h=r.callbacks.map((e=>e.url)),p=l(s({},r),{enable_stime:r.enable_time[0].format("HH:mm"),enable_etime:r.enable_time[1].format("HH:mm"),disabled:r.enable_status?0:1,notify_recovered:r.notify_recovered?1:0,enable_in_bg:r.enable_in_bg?1:0,callbacks:h,cluster:r.cluster.join(" ")});let d,f="Post";if(1===e){d=p,f="Put";const e=await function(e,t,n){return Si(`/api/n9e/busi-group/${t}/alert-rule/${n}`,{method:yi.Put,data:e})}(d,c.id,t.id);e.err?xt.error(e.error):(xt.success(n("编辑成功！")),i.push("/alert-rules"))}else{0===w.toNumber(window.localStorage.getItem("license_rules_remaining"))&&"holtwinters"===p.algorithm&&xt.error("可添加的智能告警规则数量已达上限，请联系客服"),d=[p];const{dat:t}=await Wi(d,c.id,f);let r=0;const a=Object.keys(t).map((e=>(t[e]&&r++,t[e])));r?xt.error(n(a)):(xt.success(`${n(2===e?"告警规则克隆成功":"告警规则创建成功")}`),i.push("/alert-rules"))}}))},style:{marginRight:"8px"}},n(1===e?"编辑":2===e?"克隆":"创建")),1===e&&d.createElement(Ct,{danger:!0,style:{marginRight:"8px"},onClick:()=>{Ft.confirm({title:n("是否删除该告警规则?"),onOk:()=>{Xi([t.id],c.id).then((()=>{xt.success(n("删除成功")),i.push("/alert-rules")}))},onCancel(){}})}},n("删除")),d.createElement(Ct,{onClick:()=>{i.push("/alert-rules")}},n("取消"))))))},{Option:vo}=Lt,yo={labelCol:{span:3},wrapperCol:{span:20}},xo={wrapperCol:{offset:5}},Eo=[{id:2,field:"cluster",name:"集群"},{id:3,field:"severity",name:"级别"},{id:5,field:"prom_eval_interval",name:"执行频率"},{id:6,field:"prom_for_duration",name:"持续时长"},{id:4,field:"disabled",name:"启用"},{id:13,field:"enable_time",name:"生效时间"},{id:14,field:"enable_in_bg",name:"仅在本业务组生效"},{id:12,field:"append_tags",name:"附加标签"},{id:7,field:"notify_channels",name:"通知媒介"},{id:8,field:"notify_groups",name:"告警接收组"},{id:9,field:"notify_recovered",name:"启用恢复通知"},{id:10,field:"notify_repeat_step",name:"重复发送频率"},{id:15,field:"recover_duration",name:"留观时长"},{id:16,field:"notify_max_number",name:"最大发送次数"},{id:11,field:"callbacks",name:"回调地址"},{id:0,field:"note",name:"备注"},{id:1,field:"runbook_url",name:"预案链接"}];function bo(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function Co(e){const{isCorrectFormat:t,isLengthAllowed:n}=bo(e.value);return t&&n?d.createElement(Nt,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(kt,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Nt,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function wo(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=bo(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const To=({isModalVisible:e,editModalFinish:t})=>{const{t:n,i18n:r}=Hr(),[i]=Tt.useForm(),{clusters:a}=ri((e=>e.common)),[o,c]=f.exports.useState([]),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState("cluster"),[g,v]=f.exports.useState(!0);f.exports.useEffect((()=>(b(),C(""),()=>{})),[]);const y=[n("周日"),n("周一"),n("周二"),n("周三"),n("周四"),n("周五"),n("周六")].map(((e,t)=>d.createElement(vo,{value:String(t),key:t},`${e}`))),x=o.map((e=>d.createElement(At,{value:e.key,key:e.label},e.label))),E=u.map((e=>d.createElement(vo,{value:e.id,key:e.id},e.name))),b=async()=>{const e=await no();c(e||[])},C=async e=>{const t=await Za({query:e}),n=t.dat||t;h(n||[])},w=f.exports.useCallback(U.exports.debounce(C,800),[]),T=e=>{e.includes("$all")&&i.setFieldsValue({cluster:["$all"]})};return d.createElement(d.Fragment,null,d.createElement(Ft,{title:n("批量更新"),visible:e,onOk:()=>{i.validateFields().then((async e=>{const n=s({},e);switch(e.field){case"enable_time":n.enable_stime=e.enable_time[0].format("HH:mm"),n.enable_etime=e.enable_time[1].format("HH:mm"),delete n.enable_time;break;case"disabled":n.disabled=e.enable_status?0:1,delete n.enable_status;break;case"enable_in_bg":n.enable_in_bg=e.enable_in_bg?1:0;break;case"callbacks":n.callbacks=e.callbacks.map((e=>e.url));break;case"cluster":n.cluster=e.cluster.join(" ");break;case"notify_recovered":n.notify_recovered=e.notify_recovered?1:0}delete n.field,Object.keys(n).forEach((e=>{void 0===n[e]&&(n[e]=""),Array.isArray(n[e])&&(n[e]=n[e].join(" "))})),t(!0,n)}))},onCancel:()=>{t(!1)}},d.createElement(Tt,l(s({},yo),{form:i,className:"strategy-form",layout:"horizontal",initialValues:{prom_eval_interval:15,disabled:0,enable_status:!0,notify_recovered:1,enable_time:[A("00:00","HH:mm"),A("23:59","HH:mm")],cluster:a||["Default"],enable_days_of_week:["1","2","3","4","5","6","0"],field:"cluster"}}),d.createElement(Tt.Item,{label:n("字段："),name:"field",rules:[{required:!1}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),style:{width:"100%"},onChange:e=>{m(e)}},Eo.map((e=>d.createElement(vo,{key:e.id,value:e.field},e.name))))),(()=>{switch(p){case"note":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"note",rules:[{required:!1}]},d.createElement(St,{placeholder:n("请输入规则备注")})));case"runbook_url":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"runbook_url"},d.createElement(St,null)));case"cluster":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"cluster",rules:[{required:!1,message:n("生效集群不能为空")}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:T},d.createElement(vo,{value:"$all",key:"$all"},"$all"),null==a?void 0:a.map((e=>d.createElement(vo,{value:e,key:e},e))))));case"severity":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"severity",initialValue:2,rules:[{required:!1,message:n("告警级别不能为空")}]},d.createElement(Bt.Group,null,d.createElement(Bt,{value:1},n("一级报警")),d.createElement(Bt,{value:2},n("二级报警")),d.createElement(Bt,{value:3},n("三级报警")))));case"disabled":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"enable_status",rules:[{required:!1,message:n("立即启用不能为空")}],valuePropName:"checked"},d.createElement(Dt,null)));case"enable_in_bg":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"enable_in_bg",valuePropName:"checked"},d.createElement(io,{label:"根据告警事件中的ident归属关系判断"})));case"prom_eval_interval":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),rules:[{required:!1,message:n("执行频率不能为空")}]},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:15,wrapperCol:{span:10}},d.createElement(zt,{min:1,onChange:e=>{v(!g)}})),"秒",d.createElement(kt,{title:n(`每隔${i.getFieldValue("prom_eval_interval")}秒，把PromQL作为查询条件，去查询后端存储，如果查到了数据就表示当次有监控数据触发了规则`)},d.createElement(V,null)))));case"prom_for_duration":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),rules:[{required:!1,message:n("持续时长不能为空")}]},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"prom_for_duration",initialValue:60,wrapperCol:{span:10}},d.createElement(zt,{min:0})),"秒",d.createElement(kt,{title:n("通常持续时长大于执行频率，在持续时长内按照执行频率多次执行PromQL查询，每次都触发才生成告警；如果持续时长置为0，表示只要有一次PromQL查询触发阈值，就生成告警")},d.createElement(V,null)))));case"notify_channels":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"notify_channels"},d.createElement(At.Group,null,x)));case"notify_groups":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"notify_groups"},d.createElement(Lt,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>w(e),onBlur:()=>C("")},E)));case"notify_recovered":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"notify_recovered",valuePropName:"checked"},d.createElement(Dt,null)));case"recover_duration":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为：")},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"recover_duration",initialValue:0,wrapperCol:{span:10},rules:[{required:!1,message:n("留观时长不能为空")}]},d.createElement(zt,{min:0,onChange:e=>{v(!g)}})),"秒",d.createElement(kt,{title:n(`持续${i.getFieldValue("recover_duration")||0}秒没有再次触发阈值才发送恢复通知`)},d.createElement(V,null)))));case"notify_repeat_step":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为：")},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"notify_repeat_step",initialValue:60,wrapperCol:{span:10},rules:[{required:!1,message:n("重复发送频率不能为空")}]},d.createElement(zt,{min:0,onChange:e=>{v(!g)}})),"分钟",d.createElement(kt,{title:n(`如果告警持续未恢复，间隔${i.getFieldValue("notify_repeat_step")}分钟之后重复提醒告警接收组的成员`)},d.createElement(V,null)))));case"notify_max_number":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为：")},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"notify_max_number",initialValue:0,wrapperCol:{span:10},rules:[{required:!0,message:n("最大发送次数不能为空")}]},d.createElement(zt,{min:0,precision:0})),d.createElement(kt,{title:n("如果值为0，则不做最大发送次数的限制")},d.createElement(V,null)))));case"callbacks":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为：")},d.createElement(Tt.List,{name:"callbacks",initialValue:[{}]},((e,{add:t,remove:n},{errors:r})=>d.createElement(d.Fragment,null,e.map(((e,t)=>d.createElement(Ot,{gutter:[10,0],key:e.key},d.createElement(It,{span:22},d.createElement(Tt.Item,{name:[e.name,"url"]},d.createElement(St,null))),d.createElement(It,{span:1},d.createElement(Y,{className:"control-icon-normal",onClick:()=>n(e.name)}))))),d.createElement($,{className:"control-icon-normal",onClick:()=>t()}))))));case"append_tags":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},wo]},d.createElement(Lt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:Co})));case"enable_time":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"enable_days_of_week",rules:[{required:!1,message:n("生效时间不能为空")}]},d.createElement(Lt,{mode:"tags"},y)),d.createElement(Tt.Item,l(s({name:"enable_time"},xo),{rules:[{required:!1,message:n("生效时间不能为空")}]}),d.createElement(Gt.RangePicker,{format:"HH:mm",onChange:(e,t)=>{i.setFieldsValue({enable_stime:t[0],enable_etime:t[1]})}})));default:return null}})())))};function So(e){const{onSeverityChange:t,onEventTypeChange:n,onBusiGroupChange:r,onClusterChange:i,noLeftPadding:a,noRightPadding:o=!0}=e,{clusters:s,busiGroups:l}=ri((e=>e.common)),[c,u]=f.exports.useState(l),h=f.exports.useCallback(U.exports.debounce((e=>{ki(e).then((e=>{u(e.dat||[])}))}),800),[]);return d.createElement(Ht,{style:{marginLeft:a?0:8,marginRight:o?0:8}},i&&d.createElement(Lt,{mode:"multiple",allowClear:!0,style:{minWidth:80},placeholder:"集群",onChange:i,getPopupContainer:()=>document.body,dropdownMatchSelectWidth:!1},s.map((e=>d.createElement(Lt.Option,{value:e,key:e},e)))),r&&d.createElement(Lt,{allowClear:!0,showSearch:!0,style:{minWidth:120},placeholder:"业务组",dropdownClassName:"overflow-586",filterOption:!1,onSearch:h,getPopupContainer:()=>document.body,onFocus:()=>{ki("").then((e=>{u(e.dat||[])}))},onClear:()=>{ki("").then((e=>{u(e.dat||[])}))},onChange:r},c.map((e=>d.createElement(Lt.Option,{value:e.id,key:e.id},e.name)))),t&&d.createElement(Lt,{suffixIcon:d.createElement(H,null),allowClear:!0,style:{minWidth:80},placeholder:"事件级别",onChange:t,getPopupContainer:()=>document.body},d.createElement(Lt.Option,{value:1},"一级告警"),d.createElement(Lt.Option,{value:2},"二级告警"),d.createElement(Lt.Option,{value:3},"三级告警")),n&&d.createElement(Lt,{suffixIcon:d.createElement(H,null),allowClear:!0,style:{minWidth:80},placeholder:"事件类别",onChange:n,getPopupContainer:()=>document.body},d.createElement(Lt.Option,{value:0},"Triggered"),d.createElement(Lt.Option,{value:1},"Recovered")))}const{confirm:ko}=Ft,{TabPane:_o}=$t,Ao={cluster:void 0,create_by:void 0,group_id:void 0,id:void 0,notify_groups_obj:void 0,notify_groups:void 0,notify_users:void 0,create_at:void 0,update_at:void 0,update_by:void 0},Oo=({bgid:e})=>{const[t,n]=f.exports.useState(),[r,i]=f.exports.useState([]),{t:a,i18n:o}=Hr(),l=C(),[c,u]=f.exports.useState(Xa.None),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState(""),{curBusiItem:x}=ri((e=>e.common)),[E,b]=f.exports.useState(""),[w,T]=f.exports.useState(!1),[S,k]=f.exports.useState([]),[_,A]=f.exports.useState([]),[O,M]=f.exports.useState(!1);f.exports.useEffect((()=>{e&&N()}),[e,t]),f.exports.useEffect((()=>{F()}),[E,r,S]);const N=async()=>{if(!e)return;M(!0);const{success:n,dat:r}=await Yi({id:e});n&&(k(r.filter((e=>!t||e.severity===t))||[]),M(!1))},F=()=>{const e=JSON.parse(JSON.stringify(S)).filter((e=>{const t=E.toLowerCase();return(e.name.toLowerCase().indexOf(t)>-1||e.append_tags.join(" ").toLowerCase().indexOf(t)>-1)&&(r&&(null==r?void 0:r.indexOf(e.cluster))>-1||0===(null==r?void 0:r.length))}));A(e||[])},L=(e,t=!1)=>{(null==x?void 0:x.id)&&l.push(`/alert-rules/edit/${e}${t?"?mode=clone":""}`)},P=()=>{N()},R=[{title:a("集群"),dataIndex:"cluster",render:e=>{const t=e.split(" ")||[];return t.length&&t.map(((e,t)=>d.createElement(Ua,{text:e,key:t})))||d.createElement("div",null)}},{title:a("级别"),dataIndex:"severity",render:e=>d.createElement(Nt,{color:Hi[e-1]},"S",e)},{title:a("名称"),dataIndex:"name",render:(e,t)=>d.createElement("div",{className:"table-active-text",onClick:()=>{L(t.id)}},e)},{title:a("告警接收者"),dataIndex:"notify_groups_obj",width:100,render:(e,t)=>e.length&&e.map(((e,t)=>d.createElement(Ua,{text:e.nickname||e.username||e.name,key:t})))||d.createElement("div",null)},{title:a("附加标签"),dataIndex:"append_tags",render:e=>{const t=e||[];return t.length&&t.map(((e,t)=>d.createElement(Ua,{text:e,key:t})))||d.createElement("div",null)}},{title:a("更新时间"),dataIndex:"update_at",width:120,render:e=>W(1e3*Number(e)).format("YYYY-MM-DD HH:mm:ss")},{title:a("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Dt,{checked:e===La.Enable,size:"small",onChange:()=>{const{id:e,disabled:n}=t;Ki({ids:[e],fields:{disabled:n?0:1}},x.id).then((()=>{P()}))}})},{title:a("操作"),dataIndex:"operator",width:160,render:(e,t)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{L(t.id,!0)}},a("克隆")),d.createElement("div",{className:"table-operator-area-warning",onClick:()=>{ko({title:a("是否删除该告警规则?"),onOk:()=>{Xi([t.id],x.id).then((()=>{xt.success(a("删除成功")),P()}))},onCancel(){}})}},a("删除")),"holtwinters"===t.algorithm&&d.createElement("div",null,d.createElement(D,{to:{pathname:`/alert-rules/brain/${t.id}`}},"训练结果")))}],B=f.exports.useMemo((()=>d.createElement("ul",{className:"ant-dropdown-menu"},d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>u(Xa.BuiltIn)},d.createElement("span",null,a("导入告警规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{if(m.length){const e=m.map((e=>s(s({},e),Ao)));y(JSON.stringify(e,null,2)),u(Xa.Export)}else xt.warning(a("未选择任何规则"))}},d.createElement("span",null,a("导出告警规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{h.length?ko({title:a("是否批量删除告警规则?"),onOk:()=>{Xi(h,null==x?void 0:x.id).then((()=>{xt.success(a("删除成功")),P()}))},onCancel(){}}):xt.warning(a("未选择任何规则"))}},d.createElement("span",null,a("批量删除规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{a("批量更新规则"),0!=h.length?T(!0):xt.warning(a("请先选择策略"))}},d.createElement("span",null,a("批量更新规则"))))),[h,a]);return d.createElement("div",{className:"strategy-table-content"},d.createElement("div",{className:"strategy-table-search table-handle"},d.createElement("div",{className:"strategy-table-search-left"},d.createElement(Ya,{className:"strategy-table-search-left-refresh",onClick:()=>{P()}}),d.createElement(So,{noLeftPadding:!0,noRightPadding:!1,onSeverityChange:e=>n(e),onClusterChange:e=>i(e)}),d.createElement(Ma,{className:"searchInput",placeholder:a("搜索名称或标签"),onSearch:b,allowClear:!0})),d.createElement("div",{className:"strategy-table-search-right"},d.createElement(Ct,{type:"primary",onClick:()=>{(null==x?void 0:x.id)&&l.push(`/alert-rules/add/${x.id}`)},className:"strategy-table-search-right-create",ghost:!0},a("新增告警规则")),d.createElement("div",{className:"table-more-options"},d.createElement(_t,{overlay:B,trigger:["click"]},d.createElement(Ct,{onClick:e=>e.stopPropagation()},a("更多操作"),d.createElement(I,{style:{marginLeft:2}})))))),d.createElement(Rt,{rowKey:"id",pagination:{total:_.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:Ga,defaultPageSize:30},loading:O,dataSource:_,rowSelection:{selectedRowKeys:m.map((e=>e.id)),onChange:(e,t)=>{p(e),g(t)}},columns:R}),d.createElement(Ka,{bgid:e,status:c,fetchBuiltinFunc:Zi,submitBuiltinFunc:Ji,onClose:()=>{u(Xa.None)},onSuccess:()=>{N()},onSubmit:async e=>{const{dat:t}=await Wi(e,x.id,"Post");return t||{}},label:"告警规则",title:Xa.Export===c?"告警规则":d.createElement($t,{defaultActiveKey:Xa.BuiltIn,onChange:e=>u(e),className:"custom-import-alert-title"},d.createElement(_o,{tab:" 导入内置告警规则",key:Xa.BuiltIn}),d.createElement(_o,{tab:"导入告警规则JSON",key:Xa.Import})),exportData:v}),w&&d.createElement(To,{isModalVisible:w,editModalFinish:async(e,t)=>{if(e){const e=await Ki({ids:h,fields:t},x.id);e.err?xt.error(e.err):(xt.success("修改成功！"),P(),T(!1))}else T(!1)}}))};const Io=()=>{const e=vi(),t=C(),n=e.get("id"),{t:r}=Hr();return d.createElement(ia,{title:r("告警规则"),icon:d.createElement(L,null),hideCluster:!0},d.createElement("div",{className:"strategy-content"},d.createElement(Oa,{busiGroup:{defaultSelect:n?Number(n):void 0,onChange:e=>{t.push(`/alert-rules?id=${e}`)}}}),n?d.createElement(Oo,{bgid:Number(n)}):d.createElement(Ia,{text:"告警规则"})))};function Mo(){const{t:e}=Hr(),[t]=Tt.useForm(),n=()=>{const{oldpass:n,newpass:r}=t.getFieldsValue();(function(e,t){return Si("/api/n9e/self/password",{method:yi.Put,data:{oldpass:e,newpass:t}})})(n,r).then((t=>{console.log(t),xt.success(e("修改密码成功"))}))};return d.createElement(Tt,{form:t,layout:"vertical",requiredMark:!0},d.createElement(Tt.Item,{label:d.createElement("span",null,e("旧密码"),":"),required:!0,name:"oldpass",rules:[{required:!0,message:e("请输入旧密码")}]},d.createElement(St,{placeholder:e("请输入旧密码"),type:"password"})),d.createElement(Tt.Item,{label:d.createElement("span",null,e("新密码"),":"),required:!0,name:"newpass",hasFeedback:!0,rules:[{required:!0,message:e("请输入新密码")}]},d.createElement(St,{placeholder:e("请输入新密码"),type:"password"})),d.createElement(Tt.Item,{label:d.createElement("span",null,e("确认密码"),": "),required:!0,name:"newpassagain",hasFeedback:!0,rules:[{required:!0,message:e("再次输入新密码")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("newpass")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(St,{placeholder:e("再次输入新密码"),type:"password"})),d.createElement(Tt.Item,null,d.createElement(Ct,{type:"primary",onClick:async()=>{try{await t.validateFields(),n()}catch(Wh){console.log(e("输入有误"))}}},e("确认修改"))))}const{Option:No}=Lt;function Fo(){const{t:e}=Hr(),[t]=Tt.useForm(),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState([]);let{profile:o}=ri((e=>e.account));const[u,h]=f.exports.useState(o.portrait||"/image/avatar1.png"),[p,m]=f.exports.useState(""),g=Jr();f.exports.useEffect((()=>{const{id:e,nickname:n,email:r,phone:i,contacts:a,portrait:s}=o;t.setFieldsValue({nickname:n,email:r,phone:i,contacts:a}),s.startsWith("http")&&m(s)}),[o]),f.exports.useEffect((()=>{ro().then((e=>{a(e)}))}),[]);const v=async()=>{try{await t.validateFields(),y()}catch(n){console.log(e("输入有误"),n)}},y=()=>{const{nickname:n,email:r,phone:i,moreContacts:a}=t.getFieldsValue();let{contacts:c}=t.getFieldsValue();a&&a.length>0&&a.forEach((e=>{const{key:t,value:n}=e;t&&n&&(c?c[t]=n:c={[t]:n})}));for(let e in c)c[e]||delete c[e];g({type:"account/updateProfile",data:l(s({},o),{portrait:p||u,nickname:n,email:r,phone:i,contacts:c})}),xt.success(e("信息保存成功"))},x=new Array(8).fill(0).map(((e,t)=>t+1));return d.createElement(d.Fragment,null,d.createElement(Tt,{form:t,layout:"vertical"},d.createElement(Ot,{gutter:16,style:{marginBottom:"24px"}},d.createElement(It,{span:20},d.createElement(Ot,{gutter:16,style:{marginBottom:"24px"}},d.createElement(It,{span:4},d.createElement("div",null,d.createElement("label",null,e("用户名"),"："),d.createElement("span",null,o.username))),d.createElement(It,{span:4},d.createElement("div",null,d.createElement("label",null,e("角色"),"："),d.createElement("span",null,o.roles.join(", "))))),d.createElement(Tt.Item,{label:d.createElement("span",null,e("显示名"),"："),name:"nickname"},d.createElement(St,{placeholder:e("请输入显示名")})),d.createElement(Tt.Item,{label:d.createElement("span",null,e("邮箱"),"："),name:"email"},d.createElement(St,{placeholder:e("请输入邮箱")})),d.createElement(Tt.Item,{label:d.createElement("span",null,e("手机"),"："),name:"phone"},d.createElement(St,{placeholder:e("请输入手机号")})),o.contacts&&Object.keys(o.contacts).sort().map(((t,n)=>{let r=i.find((e=>e.key===t));return d.createElement(d.Fragment,null,r?d.createElement(Tt.Item,{label:r.label+"：",name:["contacts",t],key:n},d.createElement(St,{placeholder:`${e("请输入")}${t}`})):null)})),d.createElement(Tt.Item,{label:e("更多联系方式")},d.createElement(Tt.List,{name:"moreContacts"},((t,{add:n,remove:r})=>d.createElement(d.Fragment,null,t.map((t=>{var n=t,{key:a,name:o,fieldKey:u}=n,h=c(n,["key","name","fieldKey"]);return d.createElement(Ht,{key:a,style:{display:"flex"},align:"baseline"},d.createElement(Tt.Item,l(s({style:{width:"180px"}},h),{name:[o,"key"],fieldKey:[u,"key"],rules:[{required:!0,message:e("联系方式不能为空")}]}),d.createElement(Lt,{suffixIcon:d.createElement(H,null),placeholder:e("请选择联系方式")},i.map(((e,t)=>d.createElement(No,{value:e.key,key:t},e.label))))),d.createElement(Tt.Item,l(s({},h),{style:{width:"330px"},name:[o,"value"],fieldKey:[u,"value"],rules:[{required:!0,message:e("值不能为空")}]}),d.createElement(St,{placeholder:e("请输入值")})),d.createElement(Y,{className:"control-icon-normal",onClick:()=>r(o)}))})),d.createElement($,{className:"control-icon-normal",onClick:()=>n()}))))),d.createElement(Tt.Item,null,d.createElement(Ct,{type:"primary",onClick:v},e("确认修改")))),d.createElement(It,{span:4},d.createElement("div",{className:"avatar"},d.createElement("img",{src:o.portrait||"/image/avatar1.png"}),d.createElement(Ct,{type:"primary",className:"update-avatar",onClick:()=>r(!0)},e("更换头像")))))),d.createElement(Ft,{title:e("更换头像"),visible:n,onOk:()=>{if(p){if(!p.startsWith("http"))return void xt.error(e("自定义头像需以http开头"));fetch(p,{mode:"no-cors"}).then((e=>{r(!1),v()})).catch((t=>{xt.error(e("自定义头像")+t)}))}else r(!1),v()},onCancel:()=>{r(!1)},wrapClassName:"avatar-modal"},d.createElement("div",{className:"avatar-content"},x.map((e=>d.createElement("div",{key:e,className:`/image/avatar${e}.png`===u?"avatar active":"avatar",onClick:()=>(e=>{h(`/image/avatar${e}.png`)})(e)},d.createElement("img",{src:`/image/avatar${e}.png`}))))),d.createElement(St,{addonBefore:d.createElement("span",null,e("头像URL"),":"),onChange:e=>m(e.target.value),value:p})))}const{TabPane:Lo}=$t;function Po(){const{t:e}=Hr(),{tab:t}=X(),n=C();return d.createElement(ia,{title:e("个人中心"),hideCluster:!0},d.createElement($t,{activeKey:t,className:"profile",onChange:e=>{n.push("/account/profile/"+e)}},d.createElement(Lo,{tab:e("personalInfo"),key:"info"},d.createElement(Fo,null)),d.createElement(Lo,{tab:e("修改密码"),key:"pwd"},d.createElement(Mo,null))))}const Ro=function(e,t){return Si(`/api/n9e/busi-group/${e}/boards`,{method:yi.Post,data:t}).then((e=>e.dat))},Do=function(e){return Si("/api/n9e/boards",{method:yi.Delete,data:{ids:e}})},Bo=function(e,t){return Si(`/api/n9e/busi-group/${e}/dashboards/export`,{method:yi.Post,data:{ids:t}}).then((e=>e.dat))},zo=function(e){return Si(`/api/n9e/board/${e}`,{method:yi.Get}).then((e=>e.dat))},Ho=function(e,t){return Si(`/api/n9e/board/${e}`,{method:yi.Put,data:t})},jo=function(e,t){return Si(`/api/n9e/board/${e}/configs`,{method:yi.Put,data:t})},Go=function(e,t){return Si(`/api/n9e/dashboard/${e}/migrate`,{method:yi.Put,data:t})};function $o(e){return function(t){const n=document.createElement("div");function r(){q.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),q.render(d.createElement(e,s({},i)),n),{destroy:r}}}const Yo={labelCol:{span:4},wrapperCol:{span:16}},Uo={crate:"创建新监控大盘",edit:"编辑监控大盘"};var Vo=$o((function(e){const{mode:t,initialValues:n={},visible:r,busiId:i,refreshList:a,destroy:o}=e,[c]=Tt.useForm();return d.createElement(Ft,{title:Uo[t],visible:r,onOk:async()=>{const e=await c.validateFields();"edit"===t?(await Ho(n.id,{name:e.name,tags:w.join(e.tags," ")}),xt.success("编辑大盘成功")):"crate"===t&&(await Ro(i,{name:e.name,tags:w.join(e.tags," "),configs:JSON.stringify({var:[],panels:[],version:"2.0.0"})}),xt.success("新建大盘成功")),a(),o()},onCancel:()=>{o()},destroyOnClose:!0},d.createElement(Tt,l(s({},Yo),{form:c,preserve:!1,initialValues:n}),d.createElement(Tt.Item,{label:"大盘名称",name:"name",wrapperCol:{span:24},rules:[{required:!0,message:"请输入大盘名称"}]},d.createElement(St,null)),d.createElement(Tt.Item,{wrapperCol:{span:24},label:"分类标签",name:"tags"},d.createElement(Lt,{mode:"tags",dropdownStyle:{display:"none"},placeholder:"请输入分类标签(请用回车分割)"})),d.createElement(Tt.Item,{name:"id",hidden:!0},d.createElement(St,null))))})),Wo={exports:{}};var Xo={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16};var qo="object"==typeof process&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=Xo,r=qo,i=(t=e.exports={}).re=[],a=t.src=[],o=t.t={};let s=0;const l=(e,t,n)=>{const l=s++;r(l,t),o[e]=l,a[l]=t,i[l]=new RegExp(t,n?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${a[o.NUMERICIDENTIFIER]}|${a[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${a[o.NUMERICIDENTIFIERLOOSE]}|${a[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${a[o.PRERELEASEIDENTIFIER]}(?:\\.${a[o.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${a[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[o.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${a[o.BUILDIDENTIFIER]}(?:\\.${a[o.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${a[o.MAINVERSION]}${a[o.PRERELEASE]}?${a[o.BUILD]}?`),l("FULL",`^${a[o.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${a[o.MAINVERSIONLOOSE]}${a[o.PRERELEASELOOSE]}?${a[o.BUILD]}?`),l("LOOSE",`^${a[o.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${a[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${a[o.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:${a[o.PRERELEASE]})?${a[o.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:${a[o.PRERELEASELOOSE]})?${a[o.BUILD]}?)?)?`),l("XRANGE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",a[o.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${a[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${a[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${a[o.LONECARET]}${a[o.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${a[o.LONECARET]}${a[o.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${a[o.GTLT]}\\s*(${a[o.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]}|${a[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${a[o.XRANGEPLAIN]})\\s+-\\s+(${a[o.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${a[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[o.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0.0.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(Wo,Wo.exports);const Ko=["includePrerelease","loose","rtl"];var Qo=e=>e?"object"!=typeof e?{loose:!0}:Ko.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};const Zo=/^[0-9]+$/,Jo=(e,t)=>{const n=Zo.test(e),r=Zo.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var es={compareIdentifiers:Jo,rcompareIdentifiers:(e,t)=>Jo(t,e)};const ts=qo,{MAX_LENGTH:ns,MAX_SAFE_INTEGER:rs}=Xo,{re:is,t:as}=Wo.exports,os=Qo,{compareIdentifiers:ss}=es;class ls{constructor(e,t){if(t=os(t),e instanceof ls){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>ns)throw new TypeError(`version is longer than ${ns} characters`);ts("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?is[as.LOOSE]:is[as.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>rs||this.major<0)throw new TypeError("Invalid major version");if(this.minor>rs||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>rs||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<rs)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ts("SemVer.compare",this.version,this.options,e),!(e instanceof ls)){if("string"==typeof e&&e===this.version)return 0;e=new ls(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ls||(e=new ls(e,this.options)),ss(this.major,e.major)||ss(this.minor,e.minor)||ss(this.patch,e.patch)}comparePre(e){if(e instanceof ls||(e=new ls(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(ts("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return ss(n,r)}while(++t)}compareBuild(e){e instanceof ls||(e=new ls(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(ts("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return ss(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var cs=ls;const{MAX_LENGTH:us}=Xo,{re:hs,t:ps}=Wo.exports,ds=cs,fs=Qo;var ms=(e,t)=>{if(t=fs(t),e instanceof ds)return e;if("string"!=typeof e)return null;if(e.length>us)return null;if(!(t.loose?hs[ps.LOOSE]:hs[ps.FULL]).test(e))return null;try{return new ds(e,t)}catch(n){return null}};const gs=ms;var vs=(e,t)=>{const n=gs(e,t);return n?n.version:null};const ys=ms;var xs=(e,t)=>{const n=ys(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};const Es=cs;var bs=(e,t,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new Es(e,n).inc(t,r).version}catch(i){return null}};const Cs=cs;var ws=(e,t,n)=>new Cs(e,n).compare(new Cs(t,n));const Ts=ws;var Ss=(e,t,n)=>0===Ts(e,t,n);const ks=ms,_s=Ss;var As=(e,t)=>{if(_s(e,t))return null;{const n=ks(e),r=ks(t),i=n.prerelease.length||r.prerelease.length,a=i?"pre":"",o=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return a+e;return o}};const Os=cs;var Is=(e,t)=>new Os(e,t).major;const Ms=cs;var Ns=(e,t)=>new Ms(e,t).minor;const Fs=cs;var Ls=(e,t)=>new Fs(e,t).patch;const Ps=ms;var Rs=(e,t)=>{const n=Ps(e,t);return n&&n.prerelease.length?n.prerelease:null};const Ds=ws;var Bs=(e,t,n)=>Ds(t,e,n);const zs=ws;var Hs=(e,t)=>zs(e,t,!0);const js=cs;var Gs=(e,t,n)=>{const r=new js(e,n),i=new js(t,n);return r.compare(i)||r.compareBuild(i)};const $s=Gs;var Ys=(e,t)=>e.sort(((e,n)=>$s(e,n,t)));const Us=Gs;var Vs=(e,t)=>e.sort(((e,n)=>Us(n,e,t)));const Ws=ws;var Xs=(e,t,n)=>Ws(e,t,n)>0;const qs=ws;var Ks=(e,t,n)=>qs(e,t,n)<0;const Qs=ws;var Zs=(e,t,n)=>0!==Qs(e,t,n);const Js=ws;var el=(e,t,n)=>Js(e,t,n)>=0;const tl=ws;var nl=(e,t,n)=>tl(e,t,n)<=0;const rl=Ss,il=Zs,al=Xs,ol=el,sl=Ks,ll=nl;var cl=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return rl(e,n,r);case"!=":return il(e,n,r);case">":return al(e,n,r);case">=":return ol(e,n,r);case"<":return sl(e,n,r);case"<=":return ll(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};const ul=cs,hl=ms,{re:pl,t:dl}=Wo.exports;var fl=(e,t)=>{if(e instanceof ul)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=pl[dl.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),pl[dl.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;pl[dl.COERCERTL].lastIndex=-1}else n=e.match(pl[dl.COERCE]);return null===n?null:hl(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};class ml{constructor(e,t){if(t=yl(t),e instanceof ml)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ml(e.raw,t);if(e instanceof xl)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!_l(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&Al(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=vl.get(t);if(n)return n;const r=this.options.loose,i=r?Cl[wl.HYPHENRANGELOOSE]:Cl[wl.HYPHENRANGE];e=e.replace(i,Hl(this.options.includePrerelease)),El("hyphen replace",e),e=e.replace(Cl[wl.COMPARATORTRIM],Tl),El("comparator trim",e,Cl[wl.COMPARATORTRIM]),e=(e=(e=e.replace(Cl[wl.TILDETRIM],Sl)).replace(Cl[wl.CARETTRIM],kl)).split(/\s+/).join(" ");const a=r?Cl[wl.COMPARATORLOOSE]:Cl[wl.COMPARATOR],o=e.split(" ").map((e=>Il(e,this.options))).join(" ").split(/\s+/).map((e=>zl(e,this.options))).filter(this.options.loose?e=>!!e.match(a):()=>!0).map((e=>new xl(e,this.options)));o.length;const s=new Map;for(const c of o){if(_l(c))return[c];s.set(c.value,c)}s.size>1&&s.has("")&&s.delete("");const l=[...s.values()];return vl.set(t,l),l}intersects(e,t){if(!(e instanceof ml))throw new TypeError("a Range is required");return this.set.some((n=>Ol(n,t)&&e.set.some((e=>Ol(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new bl(e,this.options)}catch(t){return!1}for(let n=0;n<this.set.length;n++)if(jl(this.set[n],e,this.options))return!0;return!1}}var gl=ml;const vl=new In({max:1e3}),yl=Qo,xl=Yl,El=qo,bl=cs,{re:Cl,t:wl,comparatorTrimReplace:Tl,tildeTrimReplace:Sl,caretTrimReplace:kl}=Wo.exports,_l=e=>"<0.0.0-0"===e.value,Al=e=>""===e.value,Ol=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},Il=(e,t)=>(El("comp",e,t),e=Ll(e,t),El("caret",e),e=Nl(e,t),El("tildes",e),e=Rl(e,t),El("xrange",e),e=Bl(e,t),El("stars",e),e),Ml=e=>!e||"x"===e.toLowerCase()||"*"===e,Nl=(e,t)=>e.trim().split(/\s+/).map((e=>Fl(e,t))).join(" "),Fl=(e,t)=>{const n=t.loose?Cl[wl.TILDELOOSE]:Cl[wl.TILDE];return e.replace(n,((t,n,r,i,a)=>{let o;return El("tilde",e,t,n,r,i,a),Ml(n)?o="":Ml(r)?o=`>=${n}.0.0 <${+n+1}.0.0-0`:Ml(i)?o=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:a?(El("replaceTilde pr",a),o=`>=${n}.${r}.${i}-${a} <${n}.${+r+1}.0-0`):o=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,El("tilde return",o),o}))},Ll=(e,t)=>e.trim().split(/\s+/).map((e=>Pl(e,t))).join(" "),Pl=(e,t)=>{El("caret",e,t);const n=t.loose?Cl[wl.CARETLOOSE]:Cl[wl.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,a,o)=>{let s;return El("caret",e,t,n,i,a,o),Ml(n)?s="":Ml(i)?s=`>=${n}.0.0${r} <${+n+1}.0.0-0`:Ml(a)?s="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:o?(El("replaceCaret pr",o),s="0"===n?"0"===i?`>=${n}.${i}.${a}-${o} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}-${o} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a}-${o} <${+n+1}.0.0-0`):(El("no pr"),s="0"===n?"0"===i?`>=${n}.${i}.${a}${r} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a} <${+n+1}.0.0-0`),El("caret return",s),s}))},Rl=(e,t)=>(El("replaceXRanges",e,t),e.split(/\s+/).map((e=>Dl(e,t))).join(" ")),Dl=(e,t)=>{e=e.trim();const n=t.loose?Cl[wl.XRANGELOOSE]:Cl[wl.XRANGE];return e.replace(n,((n,r,i,a,o,s)=>{El("xRange",e,n,r,i,a,o,s);const l=Ml(i),c=l||Ml(a),u=c||Ml(o),h=u;return"="===r&&h&&(r=""),s=t.includePrerelease?"-0":"",l?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(c&&(a=0),o=0,">"===r?(r=">=",c?(i=+i+1,a=0,o=0):(a=+a+1,o=0)):"<="===r&&(r="<",c?i=+i+1:a=+a+1),"<"===r&&(s="-0"),n=`${r+i}.${a}.${o}${s}`):c?n=`>=${i}.0.0${s} <${+i+1}.0.0-0`:u&&(n=`>=${i}.${a}.0${s} <${i}.${+a+1}.0-0`),El("xRange return",n),n}))},Bl=(e,t)=>(El("replaceStars",e,t),e.trim().replace(Cl[wl.STAR],"")),zl=(e,t)=>(El("replaceGTE0",e,t),e.trim().replace(Cl[t.includePrerelease?wl.GTE0PRE:wl.GTE0],"")),Hl=e=>(t,n,r,i,a,o,s,l,c,u,h,p,d)=>`${n=Ml(r)?"":Ml(i)?`>=${r}.0.0${e?"-0":""}`:Ml(a)?`>=${r}.${i}.0${e?"-0":""}`:o?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=Ml(c)?"":Ml(u)?`<${+c+1}.0.0-0`:Ml(h)?`<${c}.${+u+1}.0-0`:p?`<=${c}.${u}.${h}-${p}`:e?`<${c}.${u}.${+h+1}-0`:`<=${l}`}`.trim(),jl=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(El(e[n].semver),e[n].semver!==xl.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},Gl=Symbol("SemVer ANY");class $l{static get ANY(){return Gl}constructor(e,t){if(t=Ul(t),e instanceof $l){if(e.loose===!!t.loose)return e;e=e.value}ql("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Gl?this.value="":this.value=this.operator+this.semver.version,ql("comp",this)}parse(e){const t=this.options.loose?Vl[Wl.COMPARATORLOOSE]:Vl[Wl.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new Kl(n[2],this.options.loose):this.semver=Gl}toString(){return this.value}test(e){if(ql("Comparator.test",e,this.options.loose),this.semver===Gl||e===Gl)return!0;if("string"==typeof e)try{e=new Kl(e,this.options)}catch(t){return!1}return Xl(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof $l))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new Ql(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new Ql(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),o=Xl(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=Xl(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&a||o||s}}var Yl=$l;const Ul=Qo,{re:Vl,t:Wl}=Wo.exports,Xl=cl,ql=qo,Kl=cs,Ql=gl,Zl=gl;var Jl=(e,t,n)=>{try{t=new Zl(t,n)}catch(r){return!1}return t.test(e)};const ec=gl;var tc=(e,t)=>new ec(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));const nc=cs,rc=gl;var ic=(e,t,n)=>{let r=null,i=null,a=null;try{a=new rc(t,n)}catch(o){return null}return e.forEach((e=>{a.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new nc(r,n)))})),r};const ac=cs,oc=gl;var sc=(e,t,n)=>{let r=null,i=null,a=null;try{a=new oc(t,n)}catch(o){return null}return e.forEach((e=>{a.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new ac(r,n)))})),r};const lc=cs,cc=gl,uc=Xs;var hc=(e,t)=>{e=new cc(e,t);let n=new lc("0.0.0");if(e.test(n))return n;if(n=new lc("0.0.0-0"),e.test(n))return n;n=null;for(let r=0;r<e.set.length;++r){const t=e.set[r];let i=null;t.forEach((e=>{const t=new lc(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!uc(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!uc(n,i)||(n=i)}return n&&e.test(n)?n:null};const pc=gl;var dc=(e,t)=>{try{return new pc(e,t).range||"*"}catch(n){return null}};const fc=cs,mc=Yl,{ANY:gc}=mc,vc=gl,yc=Jl,xc=Xs,Ec=Ks,bc=nl,Cc=el;var wc=(e,t,n,r)=>{let i,a,o,s,l;switch(e=new fc(e,r),t=new vc(t,r),n){case">":i=xc,a=bc,o=Ec,s=">",l=">=";break;case"<":i=Ec,a=Cc,o=xc,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yc(e,t,r))return!1;for(let c=0;c<t.set.length;++c){const n=t.set[c];let u=null,h=null;if(n.forEach((e=>{e.semver===gc&&(e=new mc(">=0.0.0")),u=u||e,h=h||e,i(e.semver,u.semver,r)?u=e:o(e.semver,h.semver,r)&&(h=e)})),u.operator===s||u.operator===l)return!1;if((!h.operator||h.operator===s)&&a(e,h.semver))return!1;if(h.operator===l&&o(e,h.semver))return!1}return!0};const Tc=wc;var Sc=(e,t,n)=>Tc(e,t,">",n);const kc=wc;var _c=(e,t,n)=>kc(e,t,"<",n);const Ac=gl;var Oc=(e,t,n)=>(e=new Ac(e,n),t=new Ac(t,n),e.intersects(t));const Ic=Jl,Mc=ws;const Nc=gl,Fc=Yl,{ANY:Lc}=Fc,Pc=Jl,Rc=ws,Dc=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===Lc){if(1===t.length&&t[0].semver===Lc)return!0;e=n.includePrerelease?[new Fc(">=0.0.0-0")]:[new Fc(">=0.0.0")]}if(1===t.length&&t[0].semver===Lc){if(n.includePrerelease)return!0;t=[new Fc(">=0.0.0")]}const r=new Set;let i,a,o,s,l,c,u;for(const d of e)">"===d.operator||">="===d.operator?i=Bc(i,d,n):"<"===d.operator||"<="===d.operator?a=zc(a,d,n):r.add(d.semver);if(r.size>1)return null;if(i&&a){if(o=Rc(i.semver,a.semver,n),o>0)return null;if(0===o&&(">="!==i.operator||"<="!==a.operator))return null}for(const d of r){if(i&&!Pc(d,String(i),n))return null;if(a&&!Pc(d,String(a),n))return null;for(const e of t)if(!Pc(d,String(e),n))return!1;return!0}let h=!(!a||n.includePrerelease||!a.semver.prerelease.length)&&a.semver,p=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;h&&1===h.prerelease.length&&"<"===a.operator&&0===h.prerelease[0]&&(h=!1);for(const d of t){if(u=u||">"===d.operator||">="===d.operator,c=c||"<"===d.operator||"<="===d.operator,i)if(p&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===p.major&&d.semver.minor===p.minor&&d.semver.patch===p.patch&&(p=!1),">"===d.operator||">="===d.operator){if(s=Bc(i,d,n),s===d&&s!==i)return!1}else if(">="===i.operator&&!Pc(i.semver,String(d),n))return!1;if(a)if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),"<"===d.operator||"<="===d.operator){if(l=zc(a,d,n),l===d&&l!==a)return!1}else if("<="===a.operator&&!Pc(a.semver,String(d),n))return!1;if(!d.operator&&(a||i)&&0!==o)return!1}return!(i&&c&&!a&&0!==o)&&(!(a&&u&&!i&&0!==o)&&(!p&&!h))},Bc=(e,t,n)=>{if(!e)return t;const r=Rc(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},zc=(e,t,n)=>{if(!e)return t;const r=Rc(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};var Hc=(e,t,n={})=>{if(e===t)return!0;e=new Nc(e,n),t=new Nc(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=Dc(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0};const jc=Wo.exports;var Gc,$c={re:jc.re,src:jc.src,tokens:jc.t,SEMVER_SPEC_VERSION:Xo.SEMVER_SPEC_VERSION,SemVer:cs,compareIdentifiers:es.compareIdentifiers,rcompareIdentifiers:es.rcompareIdentifiers,parse:ms,valid:vs,clean:xs,inc:bs,diff:As,major:Is,minor:Ns,patch:Ls,prerelease:Rs,compare:ws,rcompare:Bs,compareLoose:Hs,compareBuild:Gs,sort:Ys,rsort:Vs,gt:Xs,lt:Ks,eq:Ss,neq:Zs,gte:el,lte:nl,cmp:cl,coerce:fl,Comparator:Yl,Range:gl,satisfies:Jl,toComparators:tc,maxSatisfying:ic,minSatisfying:sc,minVersion:hc,validRange:dc,outside:wc,gtr:Sc,ltr:_c,intersects:Oc,simplifyRange:(e,t,n)=>{const r=[];let i=null,a=null;const o=e.sort(((e,t)=>Mc(e,t,n)));for(const u of o){Ic(u,t,n)?(a=u,i||(i=u)):(a&&r.push([i,a]),a=null,i=null)}i&&r.push([i,null]);const s=[];for(const[u,h]of r)u===h?s.push(u):h||u!==o[0]?h?u===o[0]?s.push(`<=${h}`):s.push(`${u} - ${h}`):s.push(`>=${u}`):s.push("*");const l=s.join(" || "),c="string"==typeof t.raw?t.raw:String(t);return l.length<c.length?l:t},subset:Hc},Yc=new Uint8Array(16);function Uc(){if(!Gc&&!(Gc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gc(Yc)}var Vc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Wc(e){return"string"==typeof e&&Vc.test(e)}for(var Xc=[],qc=0;qc<256;++qc)Xc.push((qc+256).toString(16).substr(1));function Kc(e,t,n){var r=(e=e||{}).random||(e.rng||Uc)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Xc[e[t+0]]+Xc[e[t+1]]+Xc[e[t+2]]+Xc[e[t+3]]+"-"+Xc[e[t+4]]+Xc[e[t+5]]+"-"+Xc[e[t+6]]+Xc[e[t+7]]+"-"+Xc[e[t+8]]+Xc[e[t+9]]+"-"+Xc[e[t+10]]+Xc[e[t+11]]+Xc[e[t+12]]+Xc[e[t+13]]+Xc[e[t+14]]+Xc[e[t+15]]).toLowerCase();if(!Wc(n))throw TypeError("Stringified UUID is invalid");return n}(r)}const Qc=[{label:"green / orange",value:["#83c898","#c2c2c2","#fc653f"]},{label:"yellow / green",value:["#f0ee6e","#6ba261","#306d52"]},{label:"warm",value:["#ffeda0","#fc4e2a","#800026"]},{label:"cool",value:["#c7f1ff","#42a1fa","#083294"]},{label:"plasma",value:["#f0f921","#b12a90","#0d0887"]},{label:"viridis",value:["#fde725","#2a788e","#440154"]}],Zc=[{type:"timeseries",name:"时间序列图"},{type:"stat",name:"指标值"},{type:"table",name:"表格"},{type:"pie",name:"饼图"},{type:"hexbin",name:"蜂窝图"},{type:"barGauge",name:"排行榜"},{type:"text",name:"文字卡片"}],Jc={lastNotNull:{name:"最后一个非空值"},last:{name:"最后一个值"},firstNotNull:{name:"第一个非空值"},first:{name:"第一个值"},min:{name:"最小值"},max:{name:"最大值"},avg:{name:"平均值"},sum:{name:"总和"},count:{name:"数量"}},eu={version:"1.0.0",type:"timeseries",options:{tooltip:{mode:"all",sort:"none"},legend:{displayMode:"hidden"}},custom:{},overrides:[{}]},tu={timeseries:{drawStyle:"lines",lineInterpolation:"smooth",lineWidth:1,fillOpacity:.5,gradientMode:"none",stack:"off"},stat:{textMode:"valueAndName",colorMode:"value",calc:"lastNotNull",colSpan:1,textSize:{}},pie:{textMode:"valueAndName",colorMode:"value",calc:"lastNotNull",textSize:{},legengPosition:"right"},table:{showHeader:!0,colorMode:"value",calc:"lastNotNull",displayMode:"seriesToRows"},hexbin:{calc:"lastNotNull",colorRange:w.join(Qc[0].value,","),colorDomainAuto:!0,colorDomain:[],reverseColorOrder:!1},barGauge:{calc:"lastNotNull",baseColor:"#FF656B",displayMode:"basic",serieWidth:20,sortOrder:"desc"},text:{textSize:12,textColor:"#000000",bgColor:"#FFFFFF",justifyContent:"center",alignItems:"center",content:""}},nu=["hidden","top","left","right","bottom"],ru="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split("");function iu(e){if(e)try{return JSON.parse(e)}catch(Wh){console.error(Wh)}return{}}function au(e){let t=w.cloneDeep(e);return $c.valid(t.version)||(t=function(e){var t,n,r,i;let a=w.cloneDeep(e);const o=w.compact([null==a?void 0:a.yplotline1,null==a?void 0:a.yplotline2]),s=["yellow","red"],l=a.link?[a.link]:[];var c;return a={version:"2.0.0",name:a.name,type:"timeseries",layout:a.layout,targets:w.map(a.QL,((e,t)=>({refId:ru[t],expr:null==e?void 0:e.PromQL,legendFormat:null==e?void 0:e.Legend}))),options:{standardOptions:{util:(c=null==(t=null==a?void 0:a.highLevelConfig)?void 0:t.formatUnit,1e3===c?"bytesSI":1024===c?"bytesIEC":"humantime"===c?"humantimeSeconds":void 0)},legend:{displayMode:(null==(n=null==a?void 0:a.highLevelConfig)?void 0:n.legend)?"list":"hidden"},tooltip:{mode:(null==(r=null==a?void 0:a.highLevelConfig)?void 0:r.shared)?"all":"single",sort:null==(i=null==a?void 0:a.highLevelConfig)?void 0:i.sharedSortDirection},thresholds:{style:"line",steps:w.map(o,((e,t)=>({color:s[t],value:e})))}},links:w.map(l,(e=>({title:"链接",url:e}))),custom:tu.timeseries},a}(t)),t}function ou(e){const t=iu(e.configs),n=w.sortBy(e.chart_groups,["weight"]),r=[];let i=0,a=0;return w.forEach(n,(e=>{const t=Kc();r.push({id:t,type:"row",name:e.name,layout:{h:1,w:24,x:0,y:i,i:t},collapsed:!0}),i+=1,a+=1;const n=e.charts;w.forEach(n,(e=>{const t=Kc(),n=au(iu(e.configs)),o=w.floor(150*n.layout.h/40),c=i+n.layout.y;r.push(l(s({},n),{id:t,layout:l(s({},n.layout),{i:t,y:c,h:o})})),a=Math.max(a,c+o)})),i=a})),{name:e.name,tags:w.isArray(e.tags)?w.join(e.tags," "):e.tags,configs:JSON.stringify(l(s({},t),{version:"2.0.0",panels:r}))}}var su={};Object.defineProperty(su,"__esModule",{value:!0});var lu=su.default=void 0,cu={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};lu=su.default=cu;const uu={s:{display:"second",displayZh:"秒"},m:{display:"minute",displayZh:"分钟"},h:{display:"hour",displayZh:"小时"},d:{display:"day",displayZh:"天"},w:{display:"week",displayZh:"周"},M:{display:"month",displayZh:"月"},y:{display:"year",displayZh:"年"}},hu=[{start:"now-5m",end:"now",display:"Last 5 minutes",displayZh:"最近 5 分钟"},{start:"now-15m",end:"now",display:"Last 15 minutes",displayZh:"最近 15 分钟"},{start:"now-30m",end:"now",display:"Last 30 minutes",displayZh:"最近 30 分钟"},{start:"now-1h",end:"now",display:"Last 1 hour",displayZh:"最近 1 小时"},{start:"now-3h",end:"now",display:"Last 3 hours",displayZh:"最近 3 小时"},{start:"now-6h",end:"now",display:"Last 6 hours",displayZh:"最近 6 小时"},{start:"now-12h",end:"now",display:"Last 12 hours",displayZh:"最近 12 小时"},{start:"now-24h",end:"now",display:"Last 24 hours",displayZh:"最近 24 小时"},{start:"now-2d",end:"now",display:"Last 2 days",displayZh:"最近 2 天"},{start:"now-7d",end:"now",display:"Last 7 days",displayZh:"最近 7 天"},{start:"now-30d",end:"now",display:"Last 30 days",displayZh:"最近 30 天"},{start:"now-90d",end:"now",display:"Last 90 days",displayZh:"最近 90 天"},{start:"now-1d/d",end:"now-1d/d",display:"Yesterday",displayZh:"昨天"},{start:"now-2d/d",end:"now-2d/d",display:"Day before yesterday",displayZh:"前天"},{start:"now-7d/d",end:"now-7d/d",display:"This day last week",displayZh:"上周今天"},{start:"now-1w/w",end:"now-1w/w",display:"Previous week",displayZh:"上周"},{start:"now-1M/M",end:"now-1M/M",display:"Previous month",displayZh:"上个月"},{start:"now/d",end:"now/d",display:"Today",displayZh:"今天"},{start:"now/d",end:"now",display:"Today so far",displayZh:"今天到现在"},{start:"now/w",end:"now/w",display:"This week",displayZh:"本周"},{start:"now/w",end:"now",display:"This week so far",displayZh:"本周到现在"},{start:"now/M",end:"now/M",display:"This month",displayZh:"本月"},{start:"now/M",end:"now",display:"This month so far",displayZh:"本月到现在"}],pu={months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_")},du=["y","M","w","d","h","m","s","Q"];function fu(e){return!!e&&!("string"!=typeof e||"now"!==e.substring(0,3)&&!e.includes("||"))}function mu(e,t){if(e){if("string"!=typeof e)return A.isMoment(e)?e:U.exports.isDate(e)?A(e):void 0;{let n,r,i,a="";return"now"===e.substring(0,3)?(n=A(),a=e.substring("now".length)):(r=e.indexOf("||"),-1===r?(i=e,a=""):(i=e.substring(0,r),a=e.substring(r+2)),n=A(i,A.ISO_8601)),a.length?function(e,t,n){const r=e.replace(/\s/g,""),i=t;let a=0;const o=r.length;for(;a<o;){const e=r.charAt(a++);let t,o,s;if("/"===e)t=0;else if("+"===e)t=1;else{if("-"!==e)return;t=2}if(isNaN(parseInt(r.charAt(a),10)))o=1;else if(2===r.length)o=parseInt(r.charAt(a),10);else{const e=a;for(;!isNaN(parseInt(r.charAt(a),10));)if(a++,a>10)return;o=parseInt(r.substring(e,a),10)}if(0===t&&1!==o)return;if(s=r.charAt(a++),!U.exports.includes(du,s))return;0===t?n?i.endOf(s):i.startOf(s):1===t?i.add(o,s):2===t&&i.subtract(o,s)}return i}(a,n,t):n}}}function gu(e){const t=mu(e);return!!t&&(!!A.isMoment(t)&&t.isValid())}const vu={};function yu(e,t){const n=vu[e.start.toString()+" ~ "+e.end.toString()];if(n)return n.displayZh;if(A.isMoment(e.start)&&A.isMoment(e.end))return A(e.start).format(t)+" ~ "+A(e.end).format(t);if(A.isMoment(e.start)){return mu(e.end)?A(e.start).format(t)+" ~ "+e.end:""}if(A.isMoment(e.end)){return mu(e.start)?e.start+" ~ "+A(e.end).format(t):""}if("now"===e.end.toString()){return function(e){const t=0!==e.indexOf("+");-1===e.indexOf("now")&&(e=(t?"now-":"now")+e);let n=vu[e+" ~ now"];if(n)return n;n=t?{start:e,end:"now"}:{start:"now",end:e};const r=/^now([-+])(\d+)(\w)/.exec(e);if(r){const e=r[3],i=parseInt(r[2],10),a=uu[e];a&&(n.displayZh=t?"最近 ":"接下来 ",n.displayZh+=i+" "+a.displayZh,n.section=a.section)}else n.displayZh=n.start+" ~ "+n.end,n.invalid=!0;return n}(e.start).displayZh}return e.start.toString()+" ~ "+e.end.toString()}w.forEach(hu,(e=>{vu[e.start+" ~ "+e.end]=e}));const xu=(e,t)=>A.isMoment(e)?e.format(t):e,Eu=e=>({start:mu(e.start),end:mu(e.end,!0)}),bu=e=>{const t=Eu(e);return{start:A(t.start).unix(),end:A(t.end).unix()}};A.locale("zh-cn",pu);const Cu=()=>{const e=localStorage.getItem("flashcat-timeRangePicker-absolute-history");if(e)try{return w.unionWith(JSON.parse(e),w.isEqual)}catch(Wh){return console.log(Wh),[]}return[]},wu=(e,t)=>{const n=Cu(),r=w.cloneDeep(e);r.start=xu(r.start,t),r.end=xu(r.end,t);const i=w.unionWith([r,...n],w.isEqual).slice(0,4);try{const e=JSON.stringify(i);localStorage.setItem("flashcat-timeRangePicker-absolute-history",e)}catch(Wh){console.log(Wh)}};function Tu(e){const t=Cu(),{value:n,onChange:r=(()=>{}),dateFormat:i="YYYY-MM-DD HH:mm",placeholder:a="请选择时间",allowClear:o=!1,onClear:c=(()=>{}),extraFooter:u}=e,[h,p]=f.exports.useState(!1),[m,g]=f.exports.useState(),[v,y]=f.exports.useState(""),[x,E]=f.exports.useState(""),[b,C]=f.exports.useState({start:void 0,end:void 0}),T=e=>{const t={start:"开始时间",end:"结束时间"},n=A(m?m[e]:void 0,!0);return d.createElement("div",{className:"mb10"},d.createElement("span",null,t[e]),d.createElement(St.Group,{compact:!0,style:{marginTop:4}},d.createElement(Yt,{title:`选择${t[e]}`,placement:"leftTop",trigger:"click",overlayClassName:"flashcat-timeRangePicker-single-popover",getPopupContainer:()=>document.body,content:d.createElement(Ut,{prefixCls:"ant-picker",generateConfig:Vt,locale:lu,showTime:{defaultValue:"start"===e?A().startOf("day"):A().endOf("day"),showSecond:!1},disabledDate:t=>"start"===e?t&&t.valueOf()>A(null==m?void 0:m.end,!0).valueOf():t&&t.valueOf()<A(null==m?void 0:m.start,!0).valueOf(),value:n.isValid()?n:void 0,onChange:t=>{const n=l(s({},m||{}),{[e]:t});"start"!==e||A.isMoment(n.end)||(n.end=A(n.start).endOf("day")),"end"!==e||A.isMoment(n.start)||(n.start=A(n.end).startOf("day")),g(n),wu(n,i)}})},d.createElement(Ct,{danger:"invalid"===b[e],icon:d.createElement(K,null)})),d.createElement(St,{style:{width:"calc(100% - 32px)"},className:"invalid"===b[e]?"ant-input-status-error":"",value:m?xu(m[e],i):void 0,onChange:t=>{const n=t.target.value;if(C(l(s({},b),{[e]:gu(n)?void 0:"invalid"})),gu(n)){const t=l(s({},m||{}),{[e]:fu(n)?n:A(n)});g(t)}else g(l(s({},m||{}),{[e]:n}))},onBlur:t=>{const n=t.target.value,r="start"===e?"end":"start";m&&!fu(n)&&A.isMoment(m[r])&&wu(l(s({},m),{[e]:n}),i)}})),d.createElement("div",{className:"flashcat-timeRangePicker-single-status"},"invalid"===b[e]?"时间格式错误":void 0))};return f.exports.useEffect((()=>{n&&(g(n),y(yu(n,i)))}),[JSON.stringify(n),h]),d.createElement(d.Fragment,null,d.createElement(Yt,{overlayClassName:"flashcat-timeRangePicker-container",content:d.createElement(d.Fragment,null,d.createElement("div",{className:"flashcat-timeRangePicker"},d.createElement(Ot,null,d.createElement(It,{span:15},d.createElement("div",{className:"flashcat-timeRangePicker-left"},T("start"),T("end"),d.createElement("div",{className:"flashcat-timeRangePicker-absolute-history"},d.createElement("span",null,"最近使用的时间范围"),d.createElement("ul",{style:{marginTop:8}},w.map(t,((e,t)=>d.createElement("li",{key:e.start+e.end+t,onClick:()=>{const t={start:fu(e.start)?e.start:A(e.start),end:fu(e.end)?e.end:A(e.end)};g(t),r(t),wu(t,i),p(!1)}},yu(e,i)))))))),d.createElement(It,{span:9},d.createElement("div",{className:"flashcat-timeRangePicker-ranges"},d.createElement(St,{placeholder:"搜索快捷选项",prefix:d.createElement(M,null),value:x,onChange:e=>{E(e.target.value)}}),d.createElement("ul",null,w.map(w.filter(hu,(e=>e.displayZh.indexOf(x)>-1)),(e=>d.createElement("li",{key:e.display,className:P({active:e.start===(null==m?void 0:m.start)&&e.end===(null==m?void 0:m.end)}),onClick:()=>{const t={start:e.start,end:e.end};g(t),r(t),p(!1),wu(t,i)}},e.displayZh)))))))),d.createElement("div",{className:"flashcat-timeRangePicker-footer"},d.createElement(Ct,{type:"primary",onClick:()=>{"invalid"!==b.start&&"invalid"!==b.end&&(r(m),p(!1))}},"确定"),u&&u(p))),trigger:"click",placement:"bottomRight",visible:h,onVisibleChange:e=>{p(e)}},d.createElement(Ct,{style:e.style,className:P({"flashcat-timeRangePicker-target":!0,"flashcat-timeRangePicker-target-allowClear":o&&v}),onClick:()=>{p(!h)}},e.label||v||a,!e.label&&d.createElement("span",{className:"flashcat-timeRangePicker-target-icon"},h?d.createElement(Q,null):d.createElement(I,null),d.createElement(G,{onClick:e=>{e.nativeEvent.stopImmediatePropagation(),e.stopPropagation(),g(void 0),y(""),c()}})))))}const Su={0:"off",5:"5s",10:"10s",20:"20s",30:"30s",60:"1m",120:"2m",180:"3m",300:"5m",600:"10m"};var ku=d.forwardRef((function(e,t){const n=e.localKey?w.toNumber(window.localStorage.getItem(e.localKey)):0,[r,i]=f.exports.useState(n),[a,o]=f.exports.useState(!1),s=f.exports.useRef();return f.exports.useEffect((()=>{s.current&&clearInterval(s.current),r&&(s.current=setInterval((()=>{e.onRefresh()}),1e3*r))}),[r,e.onRefresh]),f.exports.useEffect((()=>()=>{s.current&&clearInterval(s.current)}),[]),f.exports.useImperativeHandle(t,(()=>({closeRefresh(){i(0),e.localKey&&window.localStorage.setItem(e.localKey,"0")}}))),d.createElement("div",{className:"auto-refresh-container"},d.createElement(kt,{title:e.tooltip},d.createElement(Ct,{className:"refresh-btn",icon:d.createElement(Z,null),onClick:e.onRefresh})),d.createElement(_t,{trigger:["click"],visible:a,onVisibleChange:e=>{o(e)},overlay:d.createElement(bt,{onClick:t=>{i(w.toNumber(t.key)),e.localKey&&window.localStorage.setItem(e.localKey,t.key),o(!1)}},w.map(Su,((e,t)=>d.createElement(bt.Item,{key:t},e))))},d.createElement(Ct,{onClick:()=>{o(!a)},style:{display:"flex",alignItems:"center"}},Su[r]," ",a?d.createElement(Q,null):d.createElement(I,{style:{fontSize:12}}))))}));function _u(e){const{value:t,onChange:n,style:r,refreshTooltip:i,dateFormat:a="YYYY-MM-DD HH:mm",localKey:o}=e;return d.createElement(Ht,{style:r},d.createElement(ku,{localKey:o&&`${o}_refresh`,tooltip:i,onRefresh:()=>{t&&n&&n(l(s({},t),{refreshFlag:w.uniqueId("refreshFlag_ ")}))}}),d.createElement(Tu,l(s({},w.omit(e,["style"])),{onChange:e=>{o&&localStorage.setItem(o,JSON.stringify({start:xu(e.start,a),end:xu(e.end,a)})),n&&n(e)}})))}function Au(e){const{localKey:t,dateFormat:n="YYYY-MM-DD HH:mm",onChange:r}=e;return d.createElement(Tu,l(s({},e),{onChange:e=>{t&&localStorage.setItem(t,JSON.stringify({start:xu(e.start,n),end:xu(e.end,n)})),r&&r(e)}}))}function Ou(e){if(e)try{return JSON.parse(e)}catch(Wh){console.error(Wh)}return{}}function Iu(e,t){if(t)return t;const n=Eu(e);let r=A(n.start).unix(),i=A(n.end).unix();return Math.max(Math.floor((i-r)/240),1)}function Mu(e){return w.chain(e).filter((e=>"link"===e.type)).map((e=>({title:e.title,url:e.url,targetBlank:e.targetBlank}))).value()}function Nu(e){var t,n,r,i;if("graph"===e.type)return eu.options;const{fieldConfig:a,options:o}=e,s=null==a?void 0:a.defaults;if(!s)return{};const l={percent:"percent",percentunit:"percentUnit",bytes:"bytesIEC",bits:"bytesIEC",decbytes:"bytesSI",decbits:"bitsSI",s:"seconds",ms:"milliseconds"};return{valueMappings:null==s?void 0:s.mappings,thresholds:{mode:null==(t=s.thresholds)?void 0:t.mode,style:"line",steps:w.filter(null==(n=s.thresholds)?void 0:n.steps,(e=>null!==e.value))},standardOptions:{util:l[s.unit]?l[s.unit]:"none",min:s.min,max:s.max,decimals:s.decimals},legend:{displayMode:"hidden"===(null==(r=null==o?void 0:o.legend)?void 0:r.displayMode)?"hidden":"list",placement:null==(i=null==o?void 0:o.legend)?void 0:i.placement},tooltip:{mode:"single"===(null==o?void 0:o.tooltip)?"single":"multi"}}}function Fu(e){const t=w.get(e,"fieldConfig.defaults.custom.lineInterpolation"),n=w.get(e,"fieldConfig.defaults.custom.fillOpacity"),r=w.get(e,"fieldConfig.defaults.custom.stacking.mode");return{version:"2.0.0",drawStyle:"barchart"===e.type?"bars":"lines",lineInterpolation:"smooth"===t?"smooth":"linear",fillOpacity:n?n/100:.5,stack:"normal"===r?"normal":"off"}}function Lu(e){return{version:"2.0.0",calc:w.get(e,"options.reduceOptions.calcs[0]"),legengPosition:"hidden"}}function Pu(e){return{version:"2.0.0",textMode:"value",calc:w.get(e,"options.reduceOptions.calcs[0]"),colorMode:"value"}}function Ru(e){return{version:"2.0.0",calc:w.get(e,"options.reduceOptions.calcs[0]")}}function Du(e){return{version:"2.0.0",content:w.get(e,"options.content")}}function Bu(e){const t={graph:{type:"timeseries",fn:Fu},timeseries:{type:"timeseries",fn:Fu},barchart:{type:"timeseries",fn:Fu},piechart:{type:"pie",fn:Lu},gauge:{type:"stat",fn:Pu},singlestat:{type:"stat",fn:Pu},stat:{type:"stat",fn:Pu},bargauge:{type:"barGauge",fn:Ru},text:{type:"text",fn:Du}};return w.chain(e).filter((e=>!e.targets||w.every(e.targets,(e=>!!e.expr)))).map((e=>{const n=Kc();return"row"===e.type?{version:"2.0.0",id:n,type:"row",name:e.title,collapsed:!e.collapsed,layout:l(s({},e.gridPos),{i:n}),panels:Bu(e.panels)}:{version:"2.0.0",id:n,type:t[e.type]?t[e.type].type:"unknown",name:e.title,description:e.description,links:Mu(e.links),layout:l(s({},e.gridPos),{i:n}),targets:w.chain(e.targets).filter((e=>!0!==e.hide)).map((e=>({refId:e.refId,expr:w.replace(w.replace(e.expr,"$__rate_interval","5m"),"$__interval","5m"),legend:e.legendFormat}))).value(),options:Nu(e),custom:t[e.type]?t[e.type].fn(e):{}}})).value()}function zu(e){return JSON.stringify({name:e.name,tags:e.tags,configs:Ou(e.configs)},null,4)}function Hu(e){let t=Ou(e);return t=w.isArray(t)?w.head(t):t,!function(e){let t=w.cloneDeep(e);const n=w.get(t,"configs");if(!n)return;let r=w.get(n,"version");if(!r){if(!w.get(n,"panels"))return;r="2.0.0"}return $c.valid(r)}(t)?t=ou(t):t.configs=JSON.stringify(t.configs),t}const ju=$t.TabPane,Gu=()=>d.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1912",width:"1em",height:"1em",fill:"currentColor"},d.createElement("path",{d:"M511.107677 501.222539c-24.585955 1.376347-37.904285 13.669324-39.952944 36.879955l78.881558 0C548.670178 514.892887 535.693632 502.599909 511.107677 501.222539z","p-id":"1913"}),d.createElement("path",{d:"M771.311931 586.250074c-0.682545 10.926864 7.853875 16.391319 25.610284 16.391319 30.05041-2.048659 46.440705-16.391319 49.172933-43.025932l0-11.268648c-8.878205 5.474688-22.537296 10.244318-40.977273 14.341636C782.581602 566.786791 771.311931 574.640666 771.311931 586.250074z","p-id":"1914"}),d.createElement("path",{d:"M327.734276 505.32088c-22.537296 1.376347-34.147728 14.693654-34.830273 39.952944l0 14.341636c0.682545 25.269523 11.951193 38.58683 33.805944 39.952944 23.903409 0.682545 35.854603-16.038278 35.854603-50.197262C361.882004 521.370415 350.271572 506.697227 327.734276 505.32088z","p-id":"1915"}),d.createElement("path",{d:"M896.519584 304.875662 225.495754 304.875662c-35.270295 0-63.86454 28.593222-63.86454 63.865563l0 227.13509-84.044138 76.517721 0.213871 0.703011c-7.286963 4.436032-12.410658 12.094456-12.410658 21.249977 0 13.96199 11.317767 25.279756 25.279756 25.279756 0.444115 0 0.814552-0.230244 1.25355-0.25378l0.075725 0.25378 133.496433 0 103.557564 0 567.466266 0c35.270295 0 63.86454-28.593222 63.86454-63.86454L960.384124 368.740202C960.3831 333.468884 931.789878 304.875662 896.519584 304.875662zM341.052606 631.325689c-21.171182 0-36.879955-8.195659-47.12325-24.585955l0 20.488637-44.050262 0L249.879094 401.853367l44.050262 0 0 96.296183c10.244318-17.756409 27.318182-26.635637 51.221592-26.635637 40.293705 2.048659 61.124126 27.659967 62.49024 76.831876C407.640164 603.665723 385.443629 631.325689 341.052606 631.325689zM513.156336 631.325689c-54.636365-2.048659-82.978876-27.659967-85.027535-76.831876 2.048659-53.270251 29.025057-80.930217 80.930217-82.978876 55.31891 0 82.978876 27.659967 82.978876 82.978876l0 10.244318L472.179063 564.738132c1.366114 23.220864 15.025205 35.513842 40.977273 36.878932 18.439978 0 30.391171-6.819313 35.854603-20.488637l46.098921 5.121648C582.817905 616.300484 555.499723 631.325689 513.156336 631.325689zM679.114089 631.325689c-31.4155 0.672312-46.782489-14.693654-46.098921-46.098921l0-77.856205-25.610284 0 0-32.781614 25.610284 0 0-51.221592 42.001603-9.219989 0 60.441581 36.879955 0 0 32.781614-36.879955 0 0 68.63724c0 15.719007 6.487761 23.561625 19.464307 23.561625 4.780887 0 9.219989-1.366114 13.317307-4.097318l9.219989 27.659967C708.822714 628.593462 696.187953 631.325689 679.114089 631.325689zM852.242148 627.227348c-4.097318-6.147-6.487761-13.659091-7.17133-22.537296-14.341636 17.062608-36.538171 25.952068-66.587558 26.635637-30.732955-2.048659-47.124274-16.391319-49.172933-43.025932 0-28.000728 19.122523-44.392046 57.367569-49.172933 30.05041-6.147 48.831148-11.268648 56.343239-15.365966 1.366114-15.70775-9.219989-23.209608-31.757285-22.537296-19.122523 0-31.074739 7.17133-35.854603 21.512966l-40.977273-6.147c8.195659-30.05041 33.465183-45.074591 75.807546-45.074591 52.587706-1.366114 77.856205 20.146852 75.807546 64.538899 0 15.025205 0 35.18229 0 60.441581 0 12.292977 2.732228 22.537296 8.195659 30.732955L852.242148 627.228371z","p-id":"1916"})),$u=e=>d.createElement(x,s({component:Gu},e));var Yu=$o((function(e){const{visible:t,destroy:n,busiId:r,type:i,refreshList:a}=e,[o,c]=f.exports.useState(i),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState(""),g=w.filter(u,(e=>!p||w.includes(e.name,p)));return f.exports.useEffect((()=>{Si("/api/n9e/dashboards/builtin/list",{method:yi.Get}).then((e=>e.dat)).then((e=>{h(w.map(e,(e=>({name:e}))))}))}),[]),d.createElement(Ft,{className:"dashboard-import-modal",title:d.createElement($t,{activeKey:o,onChange:e=>c(e),className:"custom-import-alert-title"},d.createElement(ju,{tab:"导入内置大盘模块",key:"BuiltIn"}),d.createElement(ju,{tab:"导入大盘JSON",key:"Import"}),d.createElement(ju,{tab:d.createElement("div",{style:{position:"relative"}},"导入Grafana大盘JSON",d.createElement($u,{style:{fontSize:24,position:"absolute",top:-12,color:"#1890ff"}})),key:"ImportGrafana"})),visible:t,onCancel:()=>{a(),n()},footer:null},"BuiltIn"===o?d.createElement(d.Fragment,null,d.createElement(St,{prefix:d.createElement(M,null),placeholder:"请输入要查询的大盘名称",value:p,onChange:e=>{m(e.target.value)}}),d.createElement(Rt,{style:{marginTop:10},rowKey:"name",size:"small",dataSource:g,columns:[{title:"大盘名称",dataIndex:"name"},{title:"操作",render:e=>d.createElement("a",{onClick:()=>{var t;(t=e.name,Si(`/api/n9e/builtin-board/${t}`,{method:yi.Get}).then((e=>e.dat))).then((e=>{Ro(r,Hu(e)).then((()=>{xt.success("导入成功")}))}))}},"导入")}],pagination:!(g.length<5)&&{pageSize:5}})):null,"Import"===o?d.createElement(Tt,{layout:"vertical",onFinish:e=>{const t=Hu(e.import);Ro(r,l(s({},t),{configs:t.configs})).then((()=>{xt.success("导入成功"),a(),n()}))}},d.createElement(Tt.Item,{label:"大盘JSON",name:"import",rules:[{required:!0,message:"请输入大盘JSON"}]},d.createElement(St.TextArea,{className:"code-area",placeholder:"请输入大盘 JSON",rows:16})),d.createElement(Tt.Item,null,d.createElement(Ct,{type:"primary",htmlType:"submit"},"导入"))):null,"ImportGrafana"===o?d.createElement(Tt,{layout:"vertical",onFinish:e=>{const t=function(e){var t;return{name:e.title,configs:{version:"2.0.0",links:Mu(e.links),var:(t=e.templating,w.chain(t.list).filter((e=>"query"===e.type||"custom"===e.type||"textbox"===e.type)).map((e=>"query"===e.type?{type:"query",name:e.name,definition:e.definition||w.get(e,"query.query"),allOption:e.includeAll,multi:e.multi}:"custom"===e.type?{type:"query",name:e.name,definition:e.query,allValue:e.allValue,allOption:e.includeAll,multi:e.multi}:{type:"textbox",name:e.name,defaultValue:e.query})).value()),panels:Bu(e.panels)}}}(Ou(e.import));Ro(r,l(s({},t),{tags:"",configs:JSON.stringify(t.configs)})).then((()=>{xt.success("导入成功"),a(),n()}))}},d.createElement("div",{style:{marginBottom:10}},d.createElement(Wt,{message:"目前只支持导入 v8+ 版本的大盘配置，导入完的图表只支持夜莺目前支持的图表类型和功能",type:"info"})),d.createElement(Tt.Item,{label:"大盘JSON",name:"import",rules:[{required:!0,message:"请输入大盘JSON"}]},d.createElement(St.TextArea,{className:"code-area",placeholder:"请输入大盘 JSON",rows:16})),d.createElement(Tt.Item,null,d.createElement(Ct,{type:"primary",htmlType:"submit"},"导入"))):null)}));function Uu(e){const{busiId:t,selectRowKeys:n,refreshList:r,searchVal:i,onSearchChange:a}=e;return d.createElement(d.Fragment,null,d.createElement("div",{className:"table-handle"},d.createElement("div",{className:"table-handle-search"},d.createElement(St,{className:"searchInput",value:i,onChange:e=>{a(e.target.value)},prefix:d.createElement(M,null),placeholder:"大盘名称、分类标签"})),d.createElement("div",{className:"table-handle-buttons"},d.createElement(Ct,{type:"primary",onClick:()=>{Vo({mode:"crate",busiId:t,refreshList:r})},ghost:!0},"新建大盘"),d.createElement("div",{className:"table-more-options"},d.createElement(_t,{overlay:d.createElement("ul",{className:"ant-dropdown-menu"},d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{Yu({busiId:t,type:"BuiltIn",refreshList:r})}},d.createElement("span",null,"导入监控大盘")),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{n.length?Ft.confirm({title:"是否批量删除大盘?",onOk:async()=>{Do(n).then((()=>{xt.success("批量删除大盘成功")})),setTimeout((()=>{r()}),500)}}):xt.warning("未选择任何大盘")}},d.createElement("span",null,"批量删除大盘"))),trigger:["click"]},d.createElement(Ct,{onClick:e=>e.stopPropagation()},"更多操作",d.createElement(I,{style:{marginLeft:2}})))))))}var Vu=$o((function(e){const{visible:t,destroy:n}=e,[r,i]=f.exports.useState(e.data);return d.createElement(Ft,{title:"导出大盘",visible:t,onCancel:()=>{n()},footer:null},d.createElement("p",null,d.createElement("a",{onClick:()=>{di([r],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>fi(r,(e=>e))},d.createElement(z,null),"复制JSON内容到剪贴板")),d.createElement(St.TextArea,{value:r,onChange:e=>{i(e.target.value)},rows:15}))}));function Wu(){const e=C(),[t,n]=f.exports.useState(),[r,i]=f.exports.useState([]),[a,o]=f.exports.useState([]),[c,u]=f.exports.useState(w.uniqueId("refreshKey_")),[h,p]=f.exports.useState("");f.exports.useEffect((()=>{var e;t&&(e=t,Si(`/api/n9e/busi-group/${e}/boards`,{method:yi.Get}).then((e=>e.dat))).then((e=>{i(e)}))}),[t,c]);const m=w.filter(r,(e=>!h||(w.includes(e.name.toLowerCase(),h.toLowerCase())||e.tags.toLowerCase().includes(h.toLowerCase()))));return d.createElement(ia,{title:"监控大盘",icon:d.createElement(J,null),hideCluster:!0},d.createElement("div",{style:{display:"flex"}},d.createElement(Oa,{busiGroup:{onChange:e=>n(e)}}),t?d.createElement("div",{className:"dashboards-v2"},d.createElement(Uu,{busiId:t,selectRowKeys:a,refreshList:()=>{u(w.uniqueId("refreshKey_"))},searchVal:h,onSearchChange:p}),d.createElement(Rt,{dataSource:m,columns:[{title:"大盘名称",dataIndex:"name",className:"name-column",render:(t,n)=>d.createElement("div",{className:"table-active-text",onClick:()=>e.push(`/dashboards/${n.id}`)},t)},{title:"分类标签",dataIndex:"tags",className:"tags-column",render:e=>d.createElement(d.Fragment,null,w.map(w.split(e," "),((e,t)=>e?d.createElement(Nt,{color:"blue",key:t,style:{cursor:"pointer"},onClick:()=>{(h.length>0?h.split(" "):[]).includes(e)||p((t=>t?t+" "+e:e))}},e):null)))},{title:"更新时间",width:120,dataIndex:"update_at",render:e=>A.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:"发布人",width:70,dataIndex:"create_by"},{title:"操作",width:"160px",render:(e,n)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{Vo({mode:"edit",initialValues:l(s({},n),{tags:n.tags?w.split(n.tags," "):void 0}),busiId:t,refreshList:()=>{u(w.uniqueId("refreshKey_"))}})}},"编辑"),d.createElement("div",{className:"table-operator-area-normal",onClick:async()=>{Ft.confirm({title:`是否克隆大盘${n.name}?`,onOk:async()=>{await function(e,t){return Si(`/api/n9e/busi-group/${e}/board/${t}/clone`,{method:yi.Post})}(t,n.id),xt.success("克隆大盘成功"),u(w.uniqueId("refreshKey_"))},onCancel(){}})}},"克隆"),d.createElement("div",{className:"table-operator-area-normal",onClick:async()=>{const e=await zo(n.id);Vu({data:zu(e)})}},"导出"),d.createElement("div",{className:"table-operator-area-warning",onClick:async()=>{Ft.confirm({title:`是否删除大盘：${n.name}?`,onOk:async()=>{await Do([n.id]),xt.success("删除大盘成功"),u(w.uniqueId("refreshKey_"))},onCancel(){}})}},"删除"))}],rowKey:"id",rowSelection:{selectedRowKeys:a,onChange:e=>{o(e)}}})):d.createElement(Ia,{text:"监控大盘"})))}const Xu=function(e){return Si("/api/n9e/share-charts",{method:yi.Post,data:e})};const qu=[15,30,60,120,300].map((e=>({label:e,value:e})));function Ku(e){const{onChange:t,value:n,initialValue:r}=e,[i,a]=f.exports.useState(String(r||"")),[o,s]=f.exports.useState(r||null);f.exports.useEffect((()=>{a(String(n||""))}),[n]);const l=()=>{if(!i&&null!==o)return s(null),void(t&&t(null));const e=Number(i);Number.isInteger(e)&&e>0&&e<=Number.MAX_SAFE_INTEGER&&e!==o&&(s(e),t&&t(e))};return d.createElement("div",{className:"resolution"},d.createElement(Xt,{options:qu,value:i,style:{width:72},onChange:e=>{a("number"==typeof e?e:e.replace(/^(0+)|[^\d]+/g,""))},onSelect:e=>{const n=Number(e);n!==o&&(s(n),t&&t(n))},onKeyDown:e=>{13===e.keyCode&&l()},onBlur:l,placeholder:"Res. (s)"}))}const Qu=A();ee.string,ee.string,ee.oneOfType([ee.string,ee.number]),ee.oneOfType([ee.string,ee.number]),ee.oneOfType([ee.string,ee.number]),ee.arrayOf(ee.string),ee.array,ee.bool,ee.number,ee.number,ee.number,ee.string,ee.number,ee.number,ee.string,ee.bool,ee.bool,ee.string,ee.string,ee.bool,ee.arrayOf(ee.shape({selectedEndpoint:ee.array,selectedMetric:ee.string,aggrFunc:ee.string,aggrGroup:ee.array,selectedTagkv:ee.array,tagKv:ee.array,counters:ee.array}));const Zu={title:"",type:"chart",now:Qu.clone().format("x"),start:Qu.clone().subtract(36e5,"ms").format("x"),end:Qu.clone().format("x"),comparisonOptions:[{label:"1小时",labelEn:"1 hour",value:"3600000"},{label:"2小时",labelEn:"2 hours",value:"7200000"},{label:"1天",labelEn:"1 day",value:"86400000"},{label:"2天",labelEn:"2 days",value:"172800000"},{label:"7天",labelEn:"7 days",value:"604800000"}],threshold:void 0,legend:!1,precision:"origin",shared:!1,sharedSortDirection:"desc"},Ju=["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"];function eh(e){const t=[];return w.each(e,((e,n)=>{var r,i;const a=(null==(r=null==e?void 0:e.metric)?void 0:r.ident)||(null==(i=null==e?void 0:e.metric)?void 0:i.__name__),o=function(e,t,n=!1){const{comparison:r}=e;let i;if(n&&!r)i="rgb(67, 150, 30)";else if(86400===r)i="rgb(98, 127, 202)";else if(604800===r)i="rgb(238, 92, 90)";else{i=Ju[t%Ju.length]}return i}(e,n),s={id:n,name:a,tags:a,metricLabels:e.metric,data:(e.values||[]).map((e=>[1e3*e[0],Number(e[1])]))||[],lineWidth:2,color:o,oldColor:o,comparison:e.offset,legendTitleFormat:e.legendTitleFormat};t.push(s)})),t}var th,nh;ee.arrayOf(ee.shape({ns:ee.string,metric:ee.string,counter:ee.string})),(nh=th||(th={})).Line="line",nh.StackArea="stackArea";const rh="YYYY-MM-DD HH:mm:ss";function ih(e){const{points:t,series:n,formatUnit:r,precision:i,chartType:a}=e,o=window.innerWidth/1.5;let s="";s+=function(e){const{points:t}=e,n=A(t[0].timestamp).format(rh);return`<span style="color: #666">${n}</span><br/>`}(e);const l=1===t.length;return w.each(t,((e,t)=>{s+=function(e,t={},n={},r,i,a){const{legendTitleFormat:o}=n,{color:s,filledNull:l,serieOptions:c={},timestamp:u}=t,h=a===th.StackArea?t[3]:t.value;let p="";c.comparison&&(p+=` offset ${c.comparison}`);const d=(null==c?void 0:c.metricLabels)||{},f=d.__name__||"",m=Object.keys(d).filter((e=>"__name__"!==e)),g=()=>{const e=m.map((e=>`<span>${e}=${d[e]}</span>`)),t=o?oh(o,d):`${f} ${p} {${e}}`;return`<span style="color:${s}">● </span>\n      ${t}：<strong>${v(h)}${l?"(空值填补,仅限看图使用)":""}</strong>\n      <br/>`},v=e=>"short"===i?1024===r||1e3===r?e>1e3?((e,t=2,{withUnit:n=!0,withByte:r=!1,trimZero:i=!1,convertNum:a=1024}={withUnit:!0,withByte:!1,trimZero:!1,convertNum:2024})=>{const o=e?Number(e):0;let s,l="";return o<0?s=0:o<a?s=o.toFixed(t):o<a*a?(s=(o/a).toFixed(t),l="K"):o<a*a*a?(s=(o/a/a).toFixed(t),l="M"):o<a*a*a*a?(s=(o/a/a/a).toFixed(t),l="G"):o<a*a*a*a*a&&(s=(o/a/a/a/a).toFixed(t),l="T"),i&&(s=parseFloat(s)),n&&(s=`${s}${l}`),r&&(s=`${s}B`),s})(e,2,{convertNum:r}):e.toFixed(2):"humantime"===r?A.duration(e,"seconds").humanize():"":e,y=()=>{const e=m.map((e=>`<div><strong>${e}</strong>: ${d[e]}</div>`)),t=o?oh(o,d):`${f} ${p}`;return`<span style="color:${s}">● </span>\n      ${t}: <strong>${v(h)}${l?"(空值填补,仅限看图使用)":""}</strong>\n      <div /><br />\n      <div><strong>Series:</strong></div>\n      ${f?`<div><strong>${f}</strong></div>`:""}\n      ${e.join("")}`};return e?y():g()}(l,e,e.serieOptions,r,i,a)})),`<div style="table-layout: fixed;max-width: ${o}px;word-wrap: break-word;white-space: normal;">${s}</div>`}function ah(e,t){const{threshold:n,yAxisMin:r,yAxisMax:i}=t,a=w.clone(e);return null!=n?a.plotLines=[{value:n,color:"red"}]:delete a.plotLines,t.yAxis&&void 0!==t.yAxis.plotLines&&null!==t.yAxis.plotLines?a.plotLines=t.yAxis.plotLines:delete a.plotLines,null!=r&&null!=i?(a.min=r,a.max=i):(delete a.min,delete a.max),a}function oh(e,t){let n=(r=e,Array.from(r.matchAll(/{{([0-9a-zA-Z\._\-]+?)}}/g)).map((e=>e.length>0?e[1]:e[0])));var r,i=e;return n.forEach((e=>{i=i.replace(`{{${e}}}`,t[e]?t[e]:"")})),i}const sh={};class lh extends f.exports.Component{constructor(e){super(e),this.handleInputChange=e=>{this.setState({searchText:e.target.value})},this.handleSearch=()=>{const{searchText:e}=this.state;this.setState({filterDropdownVisible:!1,filterVal:e})},this.handleContextMenu=(e,t)=>{e.preventDefault(),this.setState({currentCounter:t,contextMenuVisiable:!0,contextMenuLeft:e.clientX,contextMenuTop:e.clientY})},this.handleClickCounter=e=>{const{selectedKeys:t,highlightedKeys:n}=this.state,r=w.clone(n);w.includes(r,e.id)?w.remove(r,(t=>t===e.id)):r.push(e.id),this.setState({highlightedKeys:r},(()=>{this.props.onSelectedChange(t,r)}))},this.state={searchText:"",filterVal:"",filterDropdownVisible:!1,contextMenuVisiable:!1,contextMenuTop:0,contextMenuLeft:0,selectedKeys:"normal",highlightedKeys:[]}}componentWillReceiveProps(e){ph(this.props.series,e.series)||this.setState({selectedKeys:"normal",highlightedKeys:[]})}filterData(){const{series:e}=this.props,{filterVal:t}=this.state,n=new RegExp(t,"gi"),r=function(e=[]){const t=w.map(e,(e=>{const{id:t,metric:n,tags:r,data:i,comparison:a,metricLabels:o,legendTitleFormat:s}=e,{last:l,avg:c,max:u,min:h,sum:p}=function(e){let t=0,n=0,r=-1/0,i=1/0,a=0,o=0;if(!w.isArray(e))return{last:t,avg:n,max:r,min:i,sum:a};w.each(e,(e=>{const n=w.get(e,"[0]"),s=w.get(e,"[1]");w.isNumber(n)&&w.isNumber(s)&&(a+=s,r<s&&(r=s),i>s&&(i=s),t=s,o++)})),w.isNumber(a)&&(n=a/o);return{last:t,avg:n,max:r,min:i,sum:a}}(i);return{id:t,metric:n,tags:r,comparison:a,metricLabels:o,last:w.isNumber(l)?l.toFixed(3):null,avg:w.isNumber(c)?c.toFixed(3):null,max:w.isNumber(u)?u.toFixed(3):null,min:w.isNumber(h)?h.toFixed(3):null,sum:w.isNumber(p)?p.toFixed(3):null,color:e.color,legendTitleFormat:s}}));return w.orderBy(t,"counter")}(e);return w.filter(r,(e=>e.tags&&e.tags.match(n)||e.metricLabels&&JSON.stringify(e.metricLabels).match(n)))}render(){const{comparisonOptions:e,onSelectedChange:t,rowSelection:n,renderValue:r=(e=>e)}=this.props,{graphConfig:i}=this.props;if(!i)return null;const a=w.cloneDeep(w.get(i,"sortOrder",{})),{searchText:o,selectedKeys:c,highlightedKeys:u}=this.state,h=u,p=this.filterData(),f=p[0];let m=[{title:d.createElement("span",null," Series(",p.length,") "),dataIndex:"tags",width:240,filterDropdown:d.createElement("div",{className:"custom-filter-dropdown"},d.createElement(St,{placeholder:"Input serie name",value:o,onChange:this.handleInputChange,onPressEnter:this.handleSearch}),d.createElement(Ct,{type:"primary",onClick:this.handleSearch},"Search")),ellipsis:!0,filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:e=>this.setState({filterDropdownVisible:e}),render:(e,t)=>{const{legendName:n,titleName:r}=function(e,t,n="zh"){const{comparison:r,legendTitleFormat:i}=e;let a,o="";const s=(null==e?void 0:e.metricLabels)||{},l=s.__name__,c=Object.keys(s).filter((e=>"__name__"!==e)).map((e=>`${e}=${s[e]}`));o=i?oh(i,s):`${l||""} ${r?`offset ${r}`:""} {${c}}`;return a=d.createElement("div",null,d.createElement("div",null,l," ",r?`offset ${r}`:""),c.map(((e,t)=>d.createElement("div",{key:t},e)))),{legendName:o,titleName:a}}(t);return d.createElement(kt,{title:r,getPopupContainer:()=>document.body},d.createElement("span",{onClick:()=>this.handleClickCounter(t),onContextMenu:t=>this.handleContextMenu(t,e),style:{cursor:"pointer",opacity:h.length?w.includes(h,t.id)?1:.5:1}},d.createElement("span",{style:{color:t.color}},"● "),n))}},{title:"Max",dataIndex:"max",className:"alignRight",width:120,defaultSortOrder:"max"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.max-t.max},{title:"Min",dataIndex:"min",className:"alignRight",width:120,defaultSortOrder:"min"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.min-t.min},{title:"Avg",dataIndex:"avg",className:"alignRight",width:120,defaultSortOrder:"avg"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.avg-t.avg},{title:"Sum",dataIndex:"sum",className:"alignRight",width:120,defaultSortOrder:"sum"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.sum-t.sum},{title:"Last",dataIndex:"last",className:"alignRight",width:120,defaultSortOrder:"last"===a.columnKey?a.order:void 0,render:e=>d.createElement("span",{style:{paddingRight:10}},null!==e?r(e):"null"),sorter:(e,t)=>e.last-t.last}];"normal"===c&&w.map(p,(e=>e.id)),!1===w.get(f,"isSameMetric")&&m.unshift({title:"指标",dataIndex:"metric",width:60});let g=650;return this.props.columnsKey&&(m=w.filter(m,(e=>w.includes([...this.props.columnsKey,"metric","tags"],e.dataIndex))),g=150+100*this.props.columnsKey.length),d.createElement("div",{className:"graph-legend",style:l(s({},this.props.style),{height:"100%"})},d.createElement(Rt,{className:"auto-scroll-y",rowKey:({id:e,comparison:t})=>`${e}${t}`,size:"middle",rowSelection:!1,columns:m,dataSource:p,pagination:!1,scroll:{x:g,y:!0},showSorterTooltip:!1}))}}function ch(e,t){return"normal"===t||w.includes(t,w.get(e,"id"))}function uh(e,t,n){return t.length&&!w.includes(t,w.get(e,"id"))?te(n).lighten(.5).desaturate(.7).hex():n}function hh(e,t,n,r){return w.includes(t,w.get(e,"id"))?n+r:r}function ph(e,t){const n=w.map(e,(e=>e.id)),r=w.map(t,(e=>e.id));return w.isEqual(n,r)}Lt.Option;class dh extends f.exports.Component{constructor(e){super(e),this.refresh=()=>{const{graphConfig:e}=this.props;if(e){const t=A(),n=Number(t.format("x"))-Number(e.end)+Number(e.start)+"",r=t.format("x");return{now:r,start:n,end:r}}return{}},this.handleComparisonChange=e=>{const{onChange:t,relativeTimeComparison:n,comparisonOptions:r}=this.props;this.setState({curComparison:e}),t(l(s({},this.refresh()),{comparison:e,relativeTimeComparison:n,comparisonOptions:r}))},this.state={customValue:void 0,customType:"hour",errorText:"",curComparison:[]}}render(){const{curComparison:e}=this.state,t=e=>{const t=this.state.curComparison.findIndex((t=>t===e.key));let n;if(-1===t)n=[...this.state.curComparison,e.key],this.setState({curComparison:n});else{let e=[...this.state.curComparison];e.splice(t,1),n=e,this.setState({curComparison:e})}const{onChange:r,relativeTimeComparison:i,comparisonOptions:a}=this.props;r(l(s({},this.refresh()),{comparison:n,relativeTimeComparison:i,comparisonOptions:a}))},n=d.createElement(bt,{onClick:t,selectedKeys:e},d.createElement(bt.Item,{key:"1d"},"1d"),d.createElement(bt.Item,{key:"7d"},"7d"));return d.createElement("div",{className:"graph-config-inner-comparison"},this.state.curComparison.map((e=>d.createElement(Nt,{key:e,closable:!0,onClose:n=>{t({key:e})}},e))),d.createElement(_t,{overlay:n},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement($,null))))}}dh.defaultProps={size:"small",comparison:[],relativeTimeComparison:!1,comparisonOptions:[],graphConfig:null,onChange:w.noop};class fh extends f.exports.Component{constructor(e){super(e),this.handleAggrFuncChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curAggrFunc:e}),n("update",t.id,{changeType:"aggrFuncChange",comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:e,calcFunc:this.state.calcFunc,aggrGroups:this.state.curAggrGroups})},this.handleCalcFuncChange=e=>{const{data:t,onChange:n}=this.props;this.setState({calcFunc:e}),n("update",t.id,{comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:e,aggrGroups:this.state.curAggrGroups})},this.handleComparisonChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curComparisonValue:e}),n("update",t.id,{comparison:e.comparison,relativeTimeComparison:e.relativeTimeComparison,comparisonOptions:e.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:this.state.calcFunc,aggrGroups:this.state.curAggrGroups})},this.handleAggrGroupsChange=e=>{const{data:t,onChange:n}=this.props;this.setState({curAggrGroups:e}),n("update",t.id,{comparison:this.state.curComparisonValue.comparison,relativeTimeComparison:this.state.curComparisonValue.relativeTimeComparison,comparisonOptions:this.state.curComparisonValue.comparisonOptions,aggrFunc:this.state.curAggrFunc,calcFunc:this.state.calcFunc,aggrGroups:e})},this.state={curAggrFunc:"avg",calcFunc:"",curAggrGroups:["ident"],curComparisonValue:{},aggrGroups:[]}}componentDidMount(){this.fetchAggrGroups()}componentDidUpdate(e){const t=(e.data.selectedHosts||[]).map((e=>e.ident)),n=(this.props.data.selectedHosts||[]).map((e=>e.ident));!w.isEqual(t,n)&&this.fetchAggrGroups()}fetchAggrGroups(){const{metric:e,selectedHosts:t}=this.props.data,n=t.map((e=>e.ident));var r;(r={start:Math.round(Number(this.props.data.start)/1e3),end:Math.round(Number(this.props.data.end)/1e3),match:[`${e}{ident=~"${n.join("|")}"}`]},Si("/api/n9e/prometheus/api/v1/labels",{method:yi.Get,params:r,paramsSerializer:function(e){return ii.stringify(e,{arrayFormat:"bracket"})}})).then((e=>{this.setState({aggrGroups:e.data})}))}render(){const{data:e,onChange:t}=this.props,{now:n,start:r,end:i,comparison:a}=e,o=d.createElement(bt,{onClick:e=>{this.handleAggrFuncChange(e.key)},selectedKeys:[this.state.curAggrFunc]},d.createElement(bt.Item,{key:"sum"},"sum"),d.createElement(bt.Item,{key:"avg"},"avg"),d.createElement(bt.Item,{key:"max"},"max"),d.createElement(bt.Item,{key:"min"},"min")),s=d.createElement(bt,{onClick:e=>this.handleCalcFuncChange("clear"===e.key?"":e.key),selectedKeys:[this.state.calcFunc]},d.createElement(bt.Item,{key:"rate_1m"},"rate_1m"),d.createElement(bt.Item,{key:"rate_5m"},"rate_5m"),d.createElement(bt.Item,{key:"increase_1m"},"increase_1m"),d.createElement(bt.Item,{key:"increase_5m"},"increase_5m"),d.createElement(bt.Divider,null),d.createElement(bt.Item,{key:"clear"},"clear")),l=d.createElement(bt,{onClick:e=>{const t=this.state.curAggrGroups.findIndex((t=>t===e.key));let n;if(-1===t)n=[...this.state.curAggrGroups,e.key],this.setState({curAggrGroups:n});else{let e=[...this.state.curAggrGroups];e.splice(t,1),n=e,this.setState({curAggrGroups:e})}this.handleAggrGroupsChange(n)},selectedKeys:this.state.curAggrGroups},this.state.aggrGroups.filter((e=>"__name__"!==e)).map((e=>d.createElement(bt.Item,{key:e},e)))),c=e=>{let t=[...this.state.curAggrGroups],n=t.findIndex((t=>t===e));n>=0&&t.splice(n,1),this.handleAggrGroupsChange(t)};return d.createElement("div",{className:"graph-config-inner"},d.createElement("div",{className:"graph-config-inner-item"},"计算函数 ：",d.createElement(_t,{overlay:s},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.calcFunc," ",d.createElement(I,null)))),d.createElement("div",{className:"graph-config-inner-item"},"环比：",d.createElement(dh,{comparison:a,relativeTimeComparison:e.relativeTimeComparison,comparisonOptions:e.comparisonOptions,graphConfig:e,onChange:this.handleComparisonChange}),d.createElement("input",{style:{position:"fixed",left:-1e4},id:`hiddenInput${e.id}`})),d.createElement("div",{className:"graph-config-inner-item"},"聚合函数 ：",d.createElement(_t,{overlay:o},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.curAggrFunc," ",d.createElement(I,null)))),this.state.curAggrFunc?d.createElement("div",{className:"graph-config-inner-item"},d.createElement("span",null,"聚合维度 ："),this.state.curAggrGroups.map((e=>d.createElement(Nt,{key:e,closable:!0,onClose:t=>{c(e)}},e))),d.createElement(_t,{overlay:l,overlayStyle:{maxHeight:400,overflow:"auto"}},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement($,null)))):null)}}fh.defaultProps={};let mh=null;let gh=null;function vh(e,t={}){let n=document.createElement(e);return Object.keys(t).forEach((e=>{n[e]=t[e]})),n}function yh(e,t,n){return(window.getComputedStyle(e,n||null)||{display:"none"})[t]}function xh(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;for(;t!==document;){if("none"===yh(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}let Eh=0,bh=null;function Ch(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=wh.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:n}=e,r=new ResizeObserver((()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==n))&&Sh(e)})),{detached:i,rendered:a}=xh(e);e.__resize_observer_triggered__=!1===i&&!1===a,e.__resize_observer__=r,r.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){Sh(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(Eh||(n='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(r=document.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(r),bh=r),function(e){let t=yh(e,"position");t&&"static"!==t||(e.style.position="relative");e.__resize_old_position__=t,e.__resize_last__={};let n=vh("div",{className:"resize-triggers"}),r=vh("div",{className:"resize-expand-trigger"}),i=vh("div"),a=vh("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:a},kh(e),e.addEventListener("scroll",Th,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=xh(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}var n,r;e.__resize_listeners__.push(t),Eh++}function wh(){let{rendered:e,detached:t}=xh(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(kh(this),this.addEventListener("scroll",Th,!0)),this.__resize_rendered__=e,Sh(this))}function Th(){var e,t;kh(this),this.__resize_raf__&&(e=this.__resize_raf__,gh||(gh=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),gh(e)),this.__resize_raf__=(t=()=>{let e=function(e){let{width:t,height:n}=e.__resize_last__,{offsetWidth:r,offsetHeight:i}=e;return r!==t||i!==n?{width:r,height:i}:null}(this);e&&(this.__resize_last__=e,Sh(this))},mh||(mh=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),mh(t))}function Sh(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((t=>{t.call(e,e)}))}function kh(e){let{expand:t,expandChild:n,contract:r}=e.__resize_triggers__,{scrollWidth:i,scrollHeight:a}=r,{offsetWidth:o,offsetHeight:s,scrollWidth:l,scrollHeight:c}=t;r.scrollLeft=i,r.scrollTop=a,n.style.width=o+1+"px",n.style.height=s+1+"px",t.scrollLeft=l,t.scrollTop=c}function _h(e,t){return Math.sqrt(Math.pow(t-e,2))}function Ah(e,t){const n=e.length;return t<n?e[t]:Ah(e,t-n)}function Oh(e,t){return"X"===t?1e3*e:e}function Ih(e,t){const n=e.getBoundingClientRect(),r=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY;return{offsetX:r-n.left,offsetY:i-n.top,clientX:r,clientY:i}}class Mh{constructor(e,t){this.options=e,this.ctx=t}init(){const{chart:{width:e},timestamp:t,xmin:n,xmax:r}=this.options,i=ne().range([0,e]);return i.domain([Oh(r,t),Oh(n,t)]),i}draw(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i,time:a}=n,o=e.ticks(Math.floor(r.width/90)),s=r.height-i.tickpadding-i.labels.fontSize;t.beginPath(),o.forEach((n=>{const r=e(n);r&&(t.moveTo(r,s),t.lineTo(r,s-i.tickLength))})),t.lineWidth=1,t.strokeStyle=i.tickColor,t.stroke(),t.beginPath(),t.moveTo(0,s-i.tickLength),t.lineTo(r.width,s-i.tickLength),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke(),t.textAlign="center",t.textBaseline="bottom",t.fillStyle=i.labels.color,t.font=`${i.labels.fontSize}px Palantino`,o.forEach((n=>{let i="%H:%M";0!==n.getSeconds()&&(i="%H:%M:%S"),0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&(i="%m-%d");let o=n;if(a&&a.timezoneOffset){const e=n.getTimezoneOffset(),t=n.getTime()+60*e*1e3+60*a.timezoneOffset*1e3;o=new Date(t)}e(n)&&t.fillText(re(i)(o),e(n),r.height)}))}drawPlotLines(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i,xAxis:{plotLines:a}}=n,o=r.height-i.tickpadding-i.labels.fontSize;Array.isArray(a)&&a.forEach((n=>{const r=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(r,0),t.lineTo(r,o-i.tickLength),t.strokeStyle=n.color,t.stroke(),t.setLineDash([])}))}}class Nh{constructor(e,t){this.options=e,this.ctx=t,this.tickLength=Math.floor(e.chart.height/50),this.ticks=[]}init(){const{chart:e,xAxis:t}=this.options,n=ie().range([e.height-(t.labels.fontSize+t.tickpadding+t.tickLength),20]);return this.setDomain(n,this.options),n}getRealData(e){const{yAxis:{plotLines:t},ykey:n,fillNull:r}=this.options;return Array.isArray(e)?(Array.isArray(t)&&t.forEach((t=>{"number"==typeof t.value&&e.push({[n]:t.value})})),"number"==typeof r&&e.push({[n]:r}),e):[]}getPlotLinesMaxMin(){const{yAxis:{plotLines:e}}=this.options;let t,n;return Array.isArray(e)&&e.forEach((e=>{(!t||e.value>t)&&(t=e.value),(!n||e.value<n)&&(n=e.value)})),{max:t,min:n}}setDomain(e,{ymin:t,ymax:n}){const{max:r,min:i}=this.getPlotLinesMaxMin();let a=this.tickLength;if(t===n){const e=(n-t)/(this.tickLength-1),r=e/2||n||1;a=0===e?1:this.tickLength,t-=r,n+=r}if(t>n){const e=t;t=n,n=e}void 0!==i&&i<t&&(t=i),void 0!==r&&r>n&&(n=r),this.options.chartType===th.StackArea&&(t=0),e.domain([t,n]),e.nice(a),this.ticks=e.ticks(a)}draw(e){const{ctx:t,options:n}=this,{yAxis:r}=n;t.textAlign="left",t.textBaseline="bottom",t.shadowColor=r.labels.shadowColor,t.shadowBlur=1,t.lineWidth=1,t.fillStyle=r.labels.color,t.font=`${r.labels.fontSize}px Palantino`,this.ticks.forEach((n=>{let r=String(n);if(n>=1e3){r=ae(".5s")(n);const e=/[kMGTPEZY]$/;if(e.test(r)){const t=r[r.length-1];r=r.replace(e,""),r=parseFloat(r)+t}}const i=e(n);t.strokeText(r,0,i),t.fillText(r,0,i)}))}drawGridLine(e){const{ctx:t,options:n}=this,{chart:r,yAxis:i}=n;t.beginPath(),this.ticks.forEach((n=>{const i=e(n);t.moveTo(0,i),t.lineTo(r.width,i)})),t.strokeStyle=i.gridLineColor,t.stroke()}drawPlotLines(e){const{ctx:t,options:n}=this,{chart:r,yAxis:i,yAxis:{plotLines:a}}=n;Array.isArray(a)&&a.forEach((n=>{const a=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(0,a),t.lineTo(r.width,a),t.strokeStyle=n.color,t.stroke(),t.setLineDash([]),t.textAlign="right",t.textBaseline="top",t.shadowColor="#fff",t.shadowBlur=1,t.lineWidth=1,t.fillStyle=n.color,t.font=`${i.labels.fontSize}px Palantino`,t.strokeText(String(n.value),r.width-10,a),t.fillText(String(n.value),r.width-10,a)}))}}const Fh=new function(){return new Worker("/assets/worker.f0706a63.js",{type:"module"})};class Lh{constructor(e,t,n,r){this.options=e,this.ctx=t,this.flag=!1,this.init(n,r),this.isMouserover=!1}init(e,t){const{chart:{id:n}}=this.options,r=document.createElement("div");r.id=`${n}-tooltip`,r.className="ts-graph-tooltip",document.getElementById(r.id)||document.body.append(r)}clear(){const{ratio:e,chart:{id:t,containerWidth:n,containerHeight:r}}=this.options,i=document.getElementById(`${t}-tooltip`);this.isMouserover=!1,this.ctx.save(),this.ctx.setTransform(1*e,0,0,1*e,0,0),this.ctx.clearRect(0,0,n,r),this.ctx.restore(),i.style.top="-99999px",i.lastChild&&i.removeChild(i.lastChild)}getNearestPoints(e,t,n,r){const{series:i=[],chart:{id:a,colors:o},tooltip:{shared:c},xkey:u,ykey:h,y0key:p,timestamp:d,fillNull:f}=this.options,m=t.invert(e.offsetX);let g=[];const v={x:m,xkey:u,ykey:h,y0key:p,timestamp:d,fillNull:f};this.flag?(v.id=a,v.flag=this.flag,Fh.postMessage(v)):(v.id=a,v.str=JSON.stringify(i),v.flag=this.flag,Fh.postMessage(v),this.flag=!0),Fh.onmessage=i=>{if(!1===this.isMouserover)return;"[object Array]"===Object.prototype.toString.call(i.data)&&(g=i.data.map((e=>l(s({},e),{x:t(e.timestamp),y:n(e.value),color:e.color||Ah(o,e.serieIndex)}))));const a=U.exports.groupBy(g,"x");if(U.exports.keys(a).length>1){let t=Number.POSITIVE_INFINITY;for(const n in a)if(Object.prototype.hasOwnProperty.call(a,n)){const r=_h(e.offsetX,Number(n));r<t&&(t=r,g=a[n])}}if(!c){let t=Number.POSITIVE_INFINITY;g.forEach((n=>{const r=(i={x:e.offsetX,y:e.offsetY},a=n,Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)));var i,a;r<t&&(t=r,g=[n])}))}r(g)}}draw(e,t,n,r){this.isMouserover=!0,this.getNearestPoints(e,t,n,(t=>{this.clear(),t.length&&(this.drawCrosshair(t[0].x),this.drawSymbol(t),this.drawModal(t,e)),r&&"[object Function]"===Object.prototype.toString.call(r)&&r(t)}))}drawModal(e,t){const{chart:{id:n,renderTo:r},tooltip:i,time:a}=this.options,o=r.offsetWidth;let s=r.offsetHeight;const l=document.getElementById(`${n}-tooltip`),c=document.createElement("div"),u=e;s=window.innerHeight/1.5;const h=(s-18-100)/15;let p=!1;if(i.sharedSortDirection&&(e=U.exports.orderBy(e,(e=>e.value),i.sharedSortDirection)),e.length>h&&(e=e.slice(0,h),p=!0),c.className="ts-graph-tooltip-content",l.appendChild(c),"[object Function]"===Object.prototype.toString.call(i.formatter))c.innerHTML=i.formatter([...e],[...u]);else{const t=e[0],n=document.createDocumentFragment(),r=document.createElement("ul"),o=document.createElement("li");let s=new Date(t.timestamp);if(a&&a.timezoneOffset){const e=s.getTimezoneOffset(),t=s.getTime()+60*e*1e3+60*a.timezoneOffset*1e3;s=new Date(t)}const l=document.createTextNode(re("%Y-%m-%d %H:%M:%S")(s));if(o.appendChild(l),o.style.color="#666",r.style.maxWidth=window.innerWidth/1.5+"px",r.appendChild(o),n.appendChild(r),e.forEach((({color:e,name:t,value:n,filledNull:a})=>{const o=document.createElement("li");if(e){const t=document.createElement("span"),n=document.createTextNode("● ");t.style.color=e,t.appendChild(n),o.appendChild(t)}if(t){const e=document.createTextNode(`${t}: `);o.appendChild(e)}if(U.exports.isNumber(n)){const e=document.createElement("strong");let t;if("origin"===i.precision)t=n;else if("short"===i.precision){t=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(ae(".5s")(n))}else t=i.precision>0?ae(",."+i.precision+"f")(n):ae(",.3f")(n);t+=a?"(空值填补,仅限看图使用)":"";const r=document.createTextNode(t);e.appendChild(r),o.appendChild(e)}r.appendChild(o)})),p){const e=document.createElement("li"),t=document.createTextNode("......");e.appendChild(t),r.appendChild(e)}c.appendChild(n)}const d=c.offsetWidth,f=c.offsetHeight;l.style.left=t.clientX-d-20+"px",l.style.top=`${t.clientY+20}px`,t.clientX-d-20<0&&(l.style.left=`${t.clientX+20}px`,t.clientX+20+d>o&&(l.style.left="0px")),t.clientY+20+f>s&&(t.clientY-f-20<0?l.style.top="0px":l.style.top=t.clientY-f-20+"px"),l.style.zIndex="9999",l.style.visibility="visible"}drawSymbol(e=[]){const{ctx:t}=this;e.forEach((e=>{const{x:n,y:r,color:i}=e;t.beginPath(),t.arc(n,r,5,0,360,!1),t.lineWidth=1,t.fillStyle=i,t.fill(),t.beginPath(),t.arc(n,r,3,0,360,!1),t.lineWidth=1,t.fillStyle="white",t.fill()}))}drawCrosshair(e){const{ctx:t,options:n}=this,{chart:r,xAxis:i}=n,a=r.height-i.tickpadding-i.labels.fontSize-i.tickLength;t.beginPath(),t.moveTo(e,0),t.lineTo(e,a),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke()}destroy(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-tooltip`);t&&t.parentNode&&t.parentNode.removeChild(t)}}class Ph{constructor(e,t){this.options=e,this.ctx=t}draw(e,t){const{series:n,chart:{colors:r},xkey:i,ykey:a,timestamp:o,fillNull:s,notDisplayedSeries:l}=this.options,{ctx:c}=this,u=oe().x((t=>{const n="X"===o?1e3*t[i]:t[i];return e(new Date(n))})).y((e=>{const n=e[a];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).defined((e=>"number"==typeof e[a]||"number"==typeof s)).context(c);U.exports.sortBy(n,"zIndex").forEach(((e,t)=>{if(!1===e.visible)return;if(l.indexOf(e.name)>-1)return;const n=e.color||Ah(r,t);e.color=n,c.beginPath(),c.lineTo(0,0),u(e.data||[]),c.lineJoin="round",c.lineWidth=this.options.line.width,c.strokeStyle=n,c.lineCap="round",c.setLineDash(e.lineDash||[]),c.stroke(),c.closePath()}))}}class Rh{constructor(e,t){this.options=e,this.ctx=t}draw(e,t){const{series:n,chart:{colors:r},xkey:i,ykey:a,timestamp:o,fillNull:s,notDisplayedSeries:l}=this.options,{ctx:c}=this,u=se().x((t=>{const n="X"===o?1e3*t[i]:t[i];return e(new Date(n))})).y0((e=>{const n=e[2];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).y1((e=>{const n=e[1];return"number"==typeof n?t(n):"number"==typeof s?t(s):void 0})).defined((e=>"number"==typeof e[a]||"number"==typeof s)).context(c);U.exports.sortBy(n,"zIndex").reverse().forEach(((e,t)=>{if(!1===e.visible)return;if(l.indexOf(e.name)>-1)return;const n=e.color||Ah(r,t);e.color=n,c.beginPath(),c.lineTo(0,0),u(e.data||[]),c.lineJoin="round",c.lineWidth=this.options.line.width,c.strokeStyle=n,c.fillStyle=n+"50",c.lineCap="round",c.stroke(),c.fill(),c.closePath()}))}}class Dh{constructor(e,t,n,r){this.options=e,this.init(n,r),this.reset=t}init(e,t){const{chart:{id:n,containerHeight:r}}=this.options,i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("a"),s=document.createTextNode("Reset zoom");i.id=`${n}-zoom`,i.className="ts-graph-zoom",a.id=`${n}-zoom-marker`,a.className="ts-graph-zoom-marker",a.style.height=`${r}px`,o.id=`${n}-zoom-resetBtn`,o.className="ts-graph-zoom-resetBtn",o.appendChild(s),i.appendChild(a),i.appendChild(o),e.insertBefore(i,t),this.onReset()}onReset(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).addEventListener("click",(e=>{e.stopPropagation(),this.reset(),this.clearResetBtn()}))}onZoom(e,t,n){const{chart:{width:r}}=this.options,i=t.offsetX-e.offsetX;if(i){const a=r/Math.abs(i),o=t.offsetX>e.offsetX?e.offsetX:t.offsetX,s=le.translate(-o*a,0).scale(a);this.drawResetBtn(),n(s)}}clearMarker(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-zoom-marker`);t.style.display="none",t.style.width="0px",t.style.left="unset",t.style.right="unset"}drawMarker(e,t){const{chart:{marginLeft:n}}=this.options,r=e.offsetX,i=t.offsetX,{chart:{id:a,containerWidth:o}}=this.options,s=document.getElementById(`${a}-zoom-marker`);s.style.display="block",s.style.top="0px",r<i?(s.style.right="unset",s.style.left=`${r+n}px`,s.style.width=i-r+"px"):(s.style.left="unset",s.style.right=o-r-n+"px",s.style.width=r-i+"px")}clearResetBtn(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).style.display="none"}drawResetBtn(){const{chart:{id:e}}=this.options;document.getElementById(`${e}-zoom-resetBtn`).style.display="block"}}function Bh(e){let t=-1,n=e;for(;n;){if(!("previousSibling"in n)){t=-1;break}n=n.previousSibling,t+=1}return t}class zh{constructor(e,t,n,r){this.handelLegendItemClick=e=>{const t=e.currentTarget;let n=e.target;for(;n!==t;){if(n&&"ts-graph-legend-item"===n.className){const{series:e}=this.options,t=Bh(n);this.onLegendItemClick(e[t].name)}n.parentNode&&(n=n.parentNode)}},this.options=e,this.init(n,r),this.onLegendItemClick=t}init(e,t){const{chart:{id:n}}=this.options,r=document.createElement("div");r.id=`${n}-legend`,r.className="ts-graph-legend",document.getElementById(r.id)||e.insertBefore(r,t),this.initEvent()}initEvent(){const{chart:{id:e}}=this.options,t=document.getElementById(`${e}-legend`);t.removeEventListener("click",this.handelLegendItemClick),t.addEventListener("click",this.handelLegendItemClick)}updateOptions(e){this.options=e}draw(){const{chart:{id:e},series:t,legend:n}=this.options,r=document.getElementById(`${e}-legend`);if(n.enabled&&"[object Array]"===Object.prototype.toString.call(t)){r.innerHTML="";const e=document.createDocumentFragment();t.forEach((t=>{const n=document.createElement("span"),r=document.createElement("span"),i=document.createElement("span"),a=document.createElement("span"),o=document.createTextNode(t.name);n.className="ts-graph-legend-item",r.className="ts-graph-legend-item-symbol",i.className="ts-graph-legend-item-symbol-line",i.style.borderColor=t.color,a.className="ts-graph-legend-item-symbol-point",a.style.backgroundColor=t.color,r.appendChild(i),r.appendChild(a),n.appendChild(r),n.appendChild(o),e.appendChild(n)})),r.appendChild(e)}}}class Hh{constructor(e){this.getZoomedSeries=()=>{const{chart:{renderTo:e},series:t,timestamp:n,xkey:r}=this.options,i=e.offsetWidth;return t.map((e=>{if("[object Array]"===Object.prototype.toString.call(e.data)){const t=e.data.filter((e=>{const t="X"===n?1e3*e[r]:e[r],a=this.xScales(new Date(t));return a>=0&&a<=i}));return l(s({},e),{data:t})}return e}))},this.handleResize=()=>{const{chart:e}=this.options,t=e.renderTo.offsetWidth,n=e.renderTo.offsetHeight;this.options.chart.width=t-e.marginLeft-e.marginRight,this.options.chart.height=n-e.marginTop-e.marginBottom,this.options.chart.containerWidth=t,this.options.chart.containerHeight=n,this.container.style.width=`${t}px`,this.container.style.height=`${n}px`,this.retinaScaled(this.backCanvas,"back"),this.retinaScaled(this.frontCanvas,"front"),this.retinaScaled(this.eventCanvas,"event"),this.initScales(),this.draw()},this.handleZoom=e=>{const{ykey:t,yAxis:n}=this.options;let{series:r}=this.options;if(e?(this.transform=e,this.xScales=e.rescaleX(this.xScales),r=this.getZoomedSeries()):(this.transform=void 0,this.xScales=this.xAxis.init()),Array.isArray(r)){let e=n.min||-1/0,i=n.max||1/0;for(const n of r){const r=Array.isArray(n.data)?n.data:[];let a;for(a=0;a<r.length;a++){const n=r[a][t];null!==n&&(e<n&&(e=n),i>n&&(i=n))}}this.yAxis.setDomain(this.yScales,{ymin:e,ymax:i})}this.draw(),this.options.onZoom(this.getZoomedSeries)},this.handleLegendItemClick=e=>{const{notDisplayedSeries:t}=this.options;-1===t.indexOf(e)?t.push(e):(this.options.notDisplayedSeries=t.filter((t=>t!==e)),this.update(this.options))};const t={chartType:th.Line,ratio:window.devicePixelRatio||1,xkey:0,ykey:1,y0key:2,timestamp:"x",chart:{id:U.exports.uniqueId("ts-graph-"),colors:["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"],width:e.chart.renderTo.offsetWidth,height:e.chart.renderTo.offsetHeight||350,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10},xAxis:{lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",labels:{color:"#999",fontSize:11}},yAxis:{lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",gridLineColor:"#efefef",labels:{color:"#999",shadowColor:"#fff",fontSize:11,style:{fontSize:11,color:"#999"}}},line:{width:2},tooltip:{shared:!0},baseSeries:[],series:[],legend:{align:"center",verticalAlign:"top",enabled:!1},fillNull:void 0,onClick:()=>{},onZoom:()=>{}},n=U.exports.merge({},t,e);void 0===e.chart.marginTop&&n.legend.enabled&&(n.chart.marginTop=20),this.handleResize=U.exports.debounce(this.handleResize,300),this.init(n)}init(e){const{chart:t}=e;this.baseSeries=e.series,this.options=e,this.options.notDisplayedSeries=[],this.options.chart.containerWidth=t.width,this.options.chart.containerHeight=t.height,this.options.chart.width=t.width-t.marginLeft-t.marginRight,this.options.chart.height=t.height-t.marginTop-t.marginBottom,this.options.chartType===th.Line?this.initLine():this.initStackArea(),this.createContainer(),this.createCanvas(),this.initEvent(),this.initLegend(),this.initTooltip(),this.initZoom(),this.initSeries(),this.initScales(),this.draw()}clearRect(e){const{chart:{containerWidth:t,containerHeight:n}}=this.options;e.clearRect(0,0,t,n)}draw(){this.clearRect(this.backContext),this.yAxis.drawGridLine(this.yScales),this.chartContent.draw(this.xScales,this.yScales),this.xAxis.draw(this.xScales),this.yAxis.draw(this.yScales),this.xAxis.drawPlotLines(this.xScales),this.yAxis.drawPlotLines(this.yScales),this.legend.draw()}update(e){const t=U.exports.assign({},this.options,e);e.series&&(t.series=e.series),this.options=t,this.initSeries(),this.options.chartType===th.Line?this.initLine():this.initStackArea(),this.initTooltip(),this.initScales(),this.legend.updateOptions(t),this.draw()}getSeries(){return[...this.options.series]}initEvent(){let e,t=!1,n={},r=!1;const i=this,a=U.exports.debounce((e=>{r&&(i.tooltip.draw(e,i.xScales,i.yScales),t&&i.zoom.drawMarker(n,e))}),10),o=U.exports.throttle((()=>{i.tooltip.clear()}),10);ce(this.eventCanvas).on("mousemove",(function(){r=!0,a(ue)})).on("mouseleave",(function(){e=ue,r=!1,o()})).on("mousedown",(function(){t=!0,n=ue})).on("mouseup",(function(){ue.stopPropagation();const e=ue;n&&n.offsetX!==e.offsetX?(i.zoom.clearMarker(),i.zoom.onZoom(n,e,(e=>{i.handleZoom(e)}))):i.options.onClick(ue),t=!1,n={}})).on("touchmove",(function(){const e=Ih(i.eventCanvas,ue);i.tooltip.draw(e,i.xScales,i.yScales),t&&i.zoom.drawMarker(n,e)})).on("touchend",(function(){e=Ih(i.eventCanvas,ue),r=!1,o()})),window.addEventListener("mouseup",(()=>{if(!U.exports.isEmpty(n)){const r=e;t=!1,i.zoom.clearMarker(),i.zoom.onZoom(n,r,(e=>{i.handleZoom(e)})),n={}}})),Ch(this.options.chart.renderTo,this.handleResize)}retinaScaled(e,t){const{chart:n,ratio:r}=this.options,i=e.getContext("2d"),a="front"===t?n.containerWidth:n.width,o="front"===t?n.containerHeight:n.height,s="front"===t?"0px":`${n.marginLeft}px`,l="front"===t?"0px":`${n.marginTop}px`;e.width=a*r,e.height=o*r,e.style.width=`${a}px`,e.style.height=`${o}px`,e.style.position="absolute",e.style.left=s,e.style.top=l,"front"===t&&i.translate(n.marginLeft*r,n.marginTop*r),i.scale(r,r)}createContainer(){const{chart:e}=this.options,t=document.createElement("div");t.style.position="relative",t.style.width=`${e.containerWidth}px`,t.style.height=`${e.containerHeight}px`,t.style.overflow="hidden",e.renderTo.appendChild(t),this.container=t}createCanvas(){const{chart:{id:e}}=this.options;function t(t){const n=document.createElement("canvas"),r=n.getContext("2d");n.setAttribute("id",`${e}-${t}Canvas`),this.container.appendChild(n),this[`${t}Canvas`]=n,this[`${t}Context`]=r,this.retinaScaled(n,t)}t.call(this,"back"),t.call(this,"front"),t.call(this,"event")}initSeries(){const{chartType:e,fillNull:t,series:n,xkey:r,ykey:i,y0key:a,yAxis:o}=this.options;let c=-1/0,u=1/0,h=o.min,p=o.max;if(Array.isArray(n)){const o=Number(a),d=[],f=Object.values(n),m=f.map((e=>JSON.parse(JSON.stringify(e.data))));m.forEach(((n,a)=>{const g=[...Array.isArray(n)?n:[]],v=[];let y,x=!1;for(y=0;y<g.length;y++){const n=g[y];if(e===th.StackArea)if(0===a)n[o]=0,n[o+1]?n[i]=n[o+1]:n[o+1]=n[i];else{let e=0,t=a;for(;t>0;){if(m[t-1]){const a=m[t-1].find((e=>e[r]===n[0]));if(a){e=a[i];break}}t--}n[o]=e,n[o+1]||(n[o+1]=n[i]),n[i]=e+n[o+1]}const s=n[r],l=n[i];void 0===t?0===y||y===g.length-1||y>0&&y<g.length-1&&"number"==typeof l?(v.push(n),x=!0):x&&(v.push(n),x=!1):v.push(n),c<s&&(c=s),u>s&&(u=s),"number"==typeof l?(("number"!=typeof h||l<h)&&(h=l),("number"!=typeof p||l>p)&&(p=l)):"number"==typeof t&&(t<h&&(h=t),t>p&&(p=t))}d.push(l(s({},f[a]),{data:v}))})),this.baseSeries=d,this.options.xmin=c,this.options.xmax=u,this.options.ymin=h,this.options.ymax=p}}initLine(){this.chartContent=new Ph(Object.assign(this.options,{series:this.baseSeries}),this.backContext)}initStackArea(){this.chartContent=new Rh(Object.assign(this.options,{series:this.baseSeries}),this.backContext)}initTooltip(){this.tooltip=new Lh(this.options,this.frontContext,this.container,this.eventCanvas)}initZoom(){this.zoom=new Dh(this.options,this.handleZoom,this.container,this.eventCanvas)}initLegend(){this.legend=new zh(this.options,this.handleLegendItemClick,this.container,this.eventCanvas)}initScales(){const e=new Mh(this.options,this.backContext),t=new Nh(this.options,this.backContext);this.xAxis=e;let n=e.init();this.transform&&(n=this.transform.rescaleX(n)),this.xScales=n,this.yAxis=t,this.yScales=t.init()}destroy(){this.tooltip.destroy(),ce(this.eventCanvas).on("mousemove",null).on("mouseleave",null).on("mousedown",null).on("mouseup",null).on("touchmove",null),ce(this.container).remove(),function(e,t){let n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",Th),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--Eh&&bh&&bh.parentNode.removeChild(bh)}}(this.options.chart.renderTo,this.handleResize)}}class jh extends f.exports.Component{componentDidMount(){const e={chartType:this.props.graphConfig.chartType||th.Line,timestamp:"x",chart:{height:this.props.height?this.props.height:void 0,renderTo:this.graphWrapEle},xAxis:this.props.graphConfig.xAxis,yAxis:ah({},this.props.graphConfig),tooltip:this.genChartTooltipOptions(this.props),series:this.props.series,legend:{enabled:!1}};this.chart=new Hh(e)}componentWillReceiveProps(e){if(this.chart){const t={yAxis:ah(this.chart.options.yAxis,e.graphConfig),tooltip:this.genChartTooltipOptions(e),series:e.series,chartType:e.graphConfig.chartType||th.Line};this.chart.update(t)}}genChartTooltipOptions(e){const t=1024===e.graphConfig.formatUnit&&"short"===e.graphConfig.precision;let n={xAxis:e.graphConfig.xAxis,shared:e.graphConfig.shared,sharedSortDirection:e.graphConfig.sharedSortDirection,formatter:t=>ih({formatUnit:e.graphConfig.formatUnit,precision:e.graphConfig.precision,series:this.props.series,points:t,chartWidth:this.graphWrapEle.offsetWidth-40,chartType:e.graphConfig.chartType})};return t&&Object.assign(n,{precision:e.graphConfig.precision}),n}render(){return d.createElement("div",{style:s({},this.props.style),ref:e=>{this.graphWrapEle=e},className:"chart-content"})}}function Gh(e){return!!(e&&e.start&&e.end)}const $h=(e,t="s")=>{const{start:n,end:r}=Gh(e)?e:((e,t="s")=>{const{num:n,unit:r}=e;let i="s"===t?A().unix():A().valueOf();return{start:"s"===t?A().subtract(n,r).unix():A().subtract(n,r).valueOf(),end:i}})(e,t);return{start:n,end:r}};function Yh(e){const{t:t}=Hr(),n=[{num:5,unit:"minutes",description:t("minute")},{num:15,unit:"minutes",description:t("minutes")},{num:30,unit:"minutes",description:t("minutes")},{num:1,unit:"hour",description:t("hour")},{num:2,unit:"hours",description:t("hours")},{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:1,unit:"week",description:t("周")},{num:1,unit:"month",description:t("月")},{num:1,unit:"quarter",description:t("季度")}],{onChange:r,value:i,unit:a="s",showRight:o=!0,placement:s="bottom",leftList:l=n,nullable:c=!1}=e,[u,h]=f.exports.useState(!1),[p,m]=f.exports.useState(A()),[g,v]=f.exports.useState(A()),[y,x]=f.exports.useState(-1),[E,b]=f.exports.useState("选择时间"),C=f.exports.useRef(!1);f.exports.useEffect((()=>{if(i)if(Gh(i))i.start>0&&i.end>0&&S(i);else{const e=l.findIndex((({num:e,unit:t})=>e===(null==i?void 0:i.num)&&t===i.unit));x(-1===e?0:e),k(l[e])}else if(!c){const e=localStorage.getItem("relativeDateIndex")?Number(localStorage.getItem("relativeDateIndex")):3;x(e),k(l[e])}}),[JSON.stringify(i)]);const T=(e,n)=>{if(Gh(e)){const{start:t,end:r}=e;return A("s"===n?1e3*t:t).format("YYYY.MM.DD HH:mm:ss")+" 至 "+A("s"===n?1e3*r:r).format("YYYY.MM.DD HH:mm:ss")}{const{num:n,description:r}=e;return`${t("最近")} ${n} ${r}`}},S=e=>{const{start:t,end:n}=e;m(A("s"===a?1e3*t:t)),v(A("s"===a?1e3*n:n)),b(T(e,a))};const k=e=>{w.isEqual(w.omit(i,"refreshFlag"),w.omit(e,"refreshFlag"))||r&&r(e),b(e?T(e,a):"选择时间")},_=d.createElement("div",{className:"time-range-picker-wrapper"},d.createElement("div",{className:"time-range-picker-left"},l.map((({num:e,unit:n,description:r},i)=>d.createElement(Ct,{key:i,type:"link",onClick:()=>(e=>{x(e),localStorage.setItem("relativeDateIndex",e),k(l[e]),h(!1)})(i),className:i===y?"active":""},t("最近"),d.createElement("span",{className:"num"},e),r)))),o&&d.createElement("div",{className:"time-range-picker-right"},d.createElement("p",{className:"title"},t("自定义开始时间")),d.createElement(qt,{showTime:!0,onChange:(e,t)=>{m(e)},value:p,disabledDate:function(e){return e&&e>A().endOf("seconds")},onOpenChange:e=>{C.current=e}}),d.createElement("p",{className:"title"},t("自定义结束时间")),d.createElement(qt,{showTime:!0,onChange:(e,t)=>{v(e)},value:g,disabledDate:function(e){return e&&e>A().endOf("seconds")},onOpenChange:e=>{C.current=e}}),d.createElement("div",{className:"footer"},d.createElement(Ct,{onClick:()=>h(!1)},t("取消")),d.createElement(Ct,{type:"primary",onClick:()=>{h(!1),x(-1),localStorage.setItem("relativeDateIndex",""),k({start:"s"===a?p.unix():p.valueOf(),end:"s"===a?g.unix():g.valueOf()})},disabled:!p||!g||p.endOf("seconds")>=g.endOf("seconds")},t("确定")))));return d.createElement(Yt,{trigger:"click",placement:s,content:_,overlayClassName:"time-range-picker",visible:u,getPopupContainer:()=>document.body,onVisibleChange:e=>(e||!C.current)&&h(e)},d.createElement(Ct,{className:P({"time-range-picker-target-nullable":c})},E," ",d.createElement(H,null),c&&d.createElement(he,{onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),k(void 0)}})))}const Uh={1024:"Ki, Mi, Gi by 1024",1e3:"Ki, Mi, Gi by 1000",humantime:"Human time duration"};class Vh extends f.exports.Component{constructor(e){var t,n,r,i,a;super(e),this.headerHeight=35,this.handleLegendRowSelectedChange=(e,t)=>{const{series:n}=this.state,r=this.props.data.chartType,i=[];r===th.StackArea&&t.length&&t.forEach((e=>i.push(n[e])));const a=w.map(n,((i,a)=>{const o=w.get(i,"oldColor",i.color);return l(s({},i),{visible:ch(i,e),zIndex:hh(i,t,n.length,a),color:r===th.StackArea?o:uh(i,t,o),oldColor:o})}));this.setState({series:a,chartShowSeries:i.length?i:a,legendHighlightedKeys:t})},this.refresh=()=>{this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)},this.shareChart=()=>{const e=l(s({},this.props.data),{legend:this.state.legend});if(!e.promqls){let t=[];const n={curAggrFunc:this.state.aggrFunc,curAggrGroup:this.state.aggrGroups},r=this.generateQuery(n);r&&t.push(r);const i=this.state.offsets.map((e=>this.generateQuery(l(s({},n),{offset:e})))).filter((e=>e));t=t.concat(i),e.promqls=t}let t={dataProps:e,highLevelConfig:s({},this.state.highLevelConfig),curCluster:localStorage.getItem("curCluster")};delete t.dataProps.ref,Xu([{configs:JSON.stringify(t)}]).then((e=>{const t=e.dat;window.open("/chart/"+t)}))},this.resize=()=>{this.chart&&this.chart.resizeHandle&&this.chart.resizeHandle()},this.state={spinning:!1,errorText:"",series:[],chartShowSeries:[],legendHighlightedKeys:[],offsets:this.props.defaultOffsets||[],aggrFunc:this.props.defaultAggrFunc||"avg",aggrGroups:this.props.defaultAggrGroups||["ident"],calcFunc:"",legend:void 0===e.data.legend||e.data.legend,highLevelConfig:{shared:void 0===(null==(t=this.props.highLevelConfig)?void 0:t.shared)||(null==(n=this.props.highLevelConfig)?void 0:n.shared),sharedSortDirection:(null==(r=this.props.highLevelConfig)?void 0:r.sharedSortDirection)||"desc",precision:(null==(i=this.props.highLevelConfig)?void 0:i.precision)||"short",formatUnit:(null==(a=this.props.highLevelConfig)?void 0:a.formatUnit)||1e3},onErrorOccured:this.props.onErrorOccured,onRequestCompleted:this.props.onRequestCompleted}}componentDidMount(){this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)}componentWillReceiveProps(e){if(void 0!==this.props.data.legend&&this.props.data.legend!==e.data.legend&&this.setState({legend:e.data.legend}),"object"==typeof e.highLevelConfig){let t=!1;const n=Object.assign({},this.state.highLevelConfig);for(let r of Object.keys(n))n[r]!==e.highLevelConfig[r]&&(n[r]=e.highLevelConfig[r],t=!0);t&&this.setState({highLevelConfig:n})}}componentDidUpdate(e){const t=(e.data.selectedHosts||[]).map((e=>e.ident)),n=(this.props.data.selectedHosts||[]).map((e=>e.ident));!!w.isEqual(t,n)&&w.isEqualWith(e.data,this.props.data)||this.updateAllGraphs(this.state.aggrFunc,this.state.aggrGroups,this.state.offsets,this.state.calcFunc)}componentWillUnmount(){this.chart&&this.chart.destroy()}afterFetchChartDataOperations(e,t,n){const r=[],{offsets:i,series:a,legendHighlightedKeys:o}=this.state,{legendTitleFormats:s}=this.props.data,l=eh(e.reduce(((e,t,n)=>{var a;if("error"===t.status)return r.push(t),e;const o=null==(a=null==t?void 0:t.data)?void 0:a.result;return i&&o.forEach((e=>{e.offset=i[n]||"",e.legendTitleFormat=s&&s[n]})),e.push(...o),e}),[])),c=ph(a,l);this.setState(Object.assign({spinning:!1,series:l,chartShowSeries:l,legendHighlightedKeys:c?o:[]})),c&&this.handleLegendRowSelectedChange("normal",this.state.legendHighlightedKeys),this.state.onErrorOccured&&this.state.onErrorOccured(r),!r.length&&this.state.onRequestCompleted&&this.state.onRequestCompleted({loadTime:Date.now()-t,resolution:n,resultSeries:l.length})}getGraphConfig(e){return l(s(s(s({},Zu),e),this.state.highLevelConfig),{now:e.now?e.now:e.end?e.end:Zu.now})}getZoomedSeries(){return this.state.series}generateQuery(e){const{offset:t,curAggrFunc:n,curAggrGroup:r,calcFunc:i=""}=e,[a,o]=i.split("_"),{metric:s,selectedHosts:l}=this.props.data;if(s&&l){const e=t?" offset "+t:"";let c=`${i?a+"(":""}${s}{ident=~"${l.map((e=>e.ident)).join("|")}"}${i?"["+o+"]":""}${e}${i?")":""}`;return n&&r&&r.length>0&&(c=`${n}(${c}) by (${r.join(", ")})`),c}}fetchData(e,{start:t,end:n,step:r}){this.setState({spinning:!0});try{return((e,t)=>{const n=new AbortController,{signal:r}=n;return t&&sh[t]&&sh[t].abort&&sh[t].abort(),sh[t]=n,Si("/api/n9e/prometheus/api/v1/query_range",{method:yi.Post,body:ii.stringify(e),headers:{"Content-Type":"application/x-www-form-urlencoded"},signal:r}).finally((()=>{delete sh[t]}))})({start:t-t%r,end:n-n%r,step:r,query:e})}catch(Wh){return this.setState({spinning:!1}),Promise.reject()}}renderChart(){const{errorText:e,chartShowSeries:t}=this.state,{height:n,data:r}=this.props,i=this.getGraphConfig(r);return e?d.createElement("div",{className:"graph-errorText"},e):d.createElement(jh,{graphConfig:i,series:t,style:{minHeight:"65%"}})}updateGraphConfig(e){const{aggrFunc:t,aggrGroups:n,comparison:r,calcFunc:i}=e;this.setState({aggrFunc:t,aggrGroups:n,offsets:r,calcFunc:i}),"aggrFuncChange"===e.changeType&&0===n.length||this.updateAllGraphs(t,n,r,i)}updateAllGraphs(e,t,n,r){const i=Date.now();let{promqls:a,range:o,step:c}=this.props.data;const{start:u,end:h}=$h(o);c||(c=Math.max(Math.floor((h-u)/240),1));let p={calcFunc:r};if(e&&(p.curAggrFunc=e),t&&t.length>0&&(p.curAggrGroup=t),a){const e=a.map((e=>"string"==typeof e?e:e.current)).filter((e=>e));if(e.length){const t=e.map((e=>this.fetchData(e,{start:u,end:h,step:c})));Promise.all([...t]).then((e=>{this.afterFetchChartDataOperations(e,i,c)}))}}else{const e=this.generateQuery(p);let t=[];n&&(t=n.map((e=>this.generateQuery(l(s({},p),{offset:e})))));const r=t.map((e=>this.fetchData(e,{start:u,end:h,step:c}))),a=this.fetchData(e,{start:u,end:h,step:c});Promise.all([...r,a]).then((e=>{this.afterFetchChartDataOperations(e,i,c)}))}}getContent(){const e=d.createElement(bt,{onClick:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{sharedSortDirection:e.key})})},selectedKeys:[this.state.highLevelConfig.sharedSortDirection]},d.createElement(bt.Item,{key:"desc"},"desc"),d.createElement(bt.Item,{key:"asc"},"asc")),t=d.createElement(bt,{onClick:e=>{const t=isNaN(Number(e.key))?e.key:Number(e.key);this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{formatUnit:t})})},selectedKeys:[String(this.state.highLevelConfig.formatUnit)]},d.createElement(bt.Item,{key:"1000"},"Ki, Mi, Gi by 1000"),d.createElement(bt.Item,{key:"1024"},"Ki, Mi, Gi by 1024"),d.createElement(bt.Item,{key:"humantime"},"Human time duration"));return d.createElement("div",null,d.createElement(At,{checked:this.state.highLevelConfig.shared,onChange:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{shared:e.target.checked})})}},"Multi Series in Tooltip, order value"),d.createElement(_t,{overlay:e},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},this.state.highLevelConfig.sharedSortDirection," ",d.createElement(I,null))),d.createElement("br",null),d.createElement(At,{checked:this.state.legend,onChange:e=>{this.setState({legend:e.target.checked})}},"Show Legend"),d.createElement("br",null),d.createElement(At,{checked:"short"===this.state.highLevelConfig.precision,onChange:e=>{this.setState({highLevelConfig:l(s({},this.state.highLevelConfig),{precision:e.target.checked?"short":"origin"})})}},"Value format with:"," "),d.createElement(_t,{overlay:t},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},Uh[this.state.highLevelConfig.formatUnit]," ",d.createElement(I,null))))}render(){this.state;const{extraRender:e,data:t,showHeader:n=!0}=this.props,{title:r,metric:i}=t,a=this.getGraphConfig(t);return d.createElement("div",{className:this.state.legend?"graph-container graph-container-hasLegend":"graph-container"},n&&d.createElement("div",{className:"graph-header",style:{height:this.headerHeight,lineHeight:`${this.headerHeight}px`}},d.createElement("div",null,r||i),d.createElement("div",{className:"graph-extra"},d.createElement("span",{className:"graph-operationbar-item",key:"info"},d.createElement(Yt,{placement:"left",content:this.getContent(),trigger:"click",autoAdjustOverflow:!1,getPopupContainer:()=>document.body},d.createElement(Ct,{className:"",type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(L,null)))),!1===this.props.isShowRefresh?null:d.createElement("span",{className:"graph-operationbar-item",key:"sync"},d.createElement(Ct,{type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(Z,{onClick:this.refresh}))),!1===this.props.isShowShare?null:d.createElement("span",{className:"graph-operationbar-item",key:"share"},d.createElement(Ct,{type:"link",size:"small",onClick:e=>e.preventDefault()},d.createElement(pe,{onClick:this.shareChart}))),e&&w.isFunction(e)?e(this):null)),this.props.graphConfigInnerVisible?d.createElement(fh,{data:a,onChange:(...e)=>{this.updateGraphConfig(e[2]||{})}}):null,this.renderChart(),d.createElement(lh,{style:{display:this.state.legend?"block":"none",overflowY:"auto",maxHeight:"35%"},graphConfig:a,series:this.getZoomedSeries(),onSelectedChange:this.handleLegendRowSelectedChange,comparisonOptions:a.comparisonOptions}))}}var Wh,Xh,qh={exports:{}};window;var Kh=de(qh.exports=(Wh=Mn,Xh=U.exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){e.exports=Wh},function(e,t){e.exports=Xh},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(8),i=n(9),a=n(10),o=n(11);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}var o,s,l;v(e,t,a,{once:!0}),"error"!==t&&(s=i,l={once:!0},"function"==typeof(o=e).on&&v(o,"error",s,l))}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,a,o,s;if(c(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=u(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var c=l.length,u=g(l,c);for(n=0;n<c;++n)a(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(6);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(6);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){},function(e,t,n){n.r(t),n.d(t,"default",(function(){return Q}));var r=n(5),i=n.n(r),a=n(4),o=n.n(a),s=n(2),l=n.n(s),c=n(3),u=n.n(c),h=n(0),p=n(1);let d=null,f=null;function m(e,t={}){let n=document.createElement(e);return Object.keys(t).forEach((e=>{n[e]=t[e]})),n}function g(e,t,n){return(window.getComputedStyle(e,n||null)||{display:"none"})[t]}function v(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;for(;t!==document;){if("none"===g(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}let y=0,x=null;function E(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=b.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:n}=e,r=new ResizeObserver((()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==n))&&w(e)})),{detached:i,rendered:a}=v(e);e.__resize_observer_triggered__=!1===i&&!1===a,e.__resize_observer__=r,r.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){w(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(y||(n='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(r=document.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(r),x=r),function(e){let t=g(e,"position");t&&"static"!==t||(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};let n=m("div",{className:"resize-triggers"}),r=m("div",{className:"resize-expand-trigger"}),i=m("div"),a=m("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:a},T(e),e.addEventListener("scroll",C,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=v(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}var n,r;e.__resize_listeners__.push(t),y++}function b(){let{rendered:e,detached:t}=v(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(T(this),this.addEventListener("scroll",C,!0)),this.__resize_rendered__=e,w(this))}function C(){var e,t;T(this),this.__resize_raf__&&(e=this.__resize_raf__,f||(f=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),f(e)),this.__resize_raf__=(t=()=>{let e=function(e){let{width:t,height:n}=e.__resize_last__,{offsetWidth:r,offsetHeight:i}=e;return r!==t||i!==n?{width:r,height:i}:null}(this);e&&(this.__resize_last__=e,w(this))},d||(d=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),d(t))}function w(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((t=>{t.call(e,e)}))}function T(e){let{expand:t,expandChild:n,contract:r}=e.__resize_triggers__,{scrollWidth:i,scrollHeight:a}=r,{offsetWidth:o,offsetHeight:s,scrollWidth:l,scrollHeight:c}=t;r.scrollLeft=i,r.scrollTop=a,n.style.width=o+1+"px",n.style.height=s+1+"px",t.scrollLeft=l,t.scrollTop=c}var S=n(7),k=n.n(S);function _(e,t){var n=e.length;return t<n?e[t]:_(e,t-n)}function A(e,t){return"X"===t?1e3*e:e}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.getBoundingClientRect(),i=t.touches[n].clientX,a=t.touches[n].clientY;return{offsetX:i-r.left,offsetY:a-r.top,clientX:i,clientY:a}}function I(e){var t=String(e);if(e>=1e3){t=h.format(".5s")(e);var n=/[kMGTPEZY]$/;if(n.test(t)){var r=t[t.length-1];t=t.replace(n,""),t=parseFloat(t)+r}}return t}function M(e,t){var n=e;return null!==e&&"function"==typeof t&&(n=t(e)),n}var N=function(){function e(t,n,r){l()(this,e),this.options=void 0,this.ctx=void 0,this.yAxis=void 0,this.options=t,this.ctx=n,this.yAxis=r}return u()(e,[{key:"init",value:function(){var e=this.options,t=e.chart.width,n=e.timestamp,r=e.xmin,i=e.xmax,a=h.scaleTime().range([this.yAxis.tickMaxWidth,t]);return a.domain([A(i,n)+(r===i?1e3:0),A(r,n)-(r===i?1e3:0)]),a}},{key:"draw",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=n.time,o=e.ticks(Math.floor(r.width/90));i.ticks&&(o=i.ticks);var s=r.height-i.tickpadding-i.labels.fontSize;t.beginPath(),o.forEach((function(n){var r=e(n);r&&(t.moveTo(r,s),t.lineTo(r,s-i.tickLength))})),t.lineWidth=1,t.strokeStyle=i.tickColor,t.stroke(),t.closePath(),t.beginPath(),t.moveTo(0,s-i.tickLength),t.lineTo(r.width,s-i.tickLength),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke(),t.closePath(),t.textAlign="center",t.textBaseline="bottom",t.fillStyle=i.labels.color,t.font="".concat(i.labels.fontSize,"px Palantino"),o.forEach((function(n,s){var l="%H:%M";0!==n.getSeconds()&&(l="%H:%M:%S"),0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&(l="%m-%d"),i.labels.timeFormat&&(l=i.labels.timeFormat);var c=n;if(a&&a.timezoneOffset){var u=n.getTimezoneOffset(),p=n.getTime()+60*u*1e3+60*a.timezoneOffset*1e3;c=new Date(p)}if(i.ticks&&i.ticks.length>1){var d=e(n);0===s?d+=l.length*i.labels.fontSize/4+1:s===o.length-1&&(d-=l.length*i.labels.fontSize/4-1),t.fillText(h.timeFormat(l)(c),d,r.height)}else e(n)&&t.fillText(h.timeFormat(l)(c),e(n),r.height)}))}},{key:"drawPlotLines",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=n.xAxis.plotLines,o=r.height-i.tickpadding-i.labels.fontSize;Array.isArray(a)&&a.forEach((function(r){var a=e("X"===n.timestamp?1e3*r.value:r.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(a,0),t.lineTo(a,o-i.tickLength),t.strokeStyle=r.color,t.stroke(),t.setLineDash([])}))}}]),e}(),F=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.tickLength=void 0,this.ticks=void 0,this.tickMaxWidth=void 0,this.options=t;var r=t.yAxis;n.font="".concat(r.labels.fontSize,"px Palantino"),this.ctx=n,this.tickLength=Math.floor(t.chart.height/50),this.ticks=[],this.tickMaxWidth=0}return u()(e,[{key:"init",value:function(){var e=this.options,t=e.chart,n=e.xAxis,r=h.scaleLinear().range([t.height-(n.labels.fontSize+n.tickpadding+n.tickLength),20]);return this.setDomain(r,this.options),r}},{key:"getRealData",value:function(e){var t=this.options,n=t.yAxis.plotLines,r=t.ykey,i=t.fillNull;return Array.isArray(e)?(Array.isArray(n)&&n.forEach((function(t){"number"==typeof t.value&&e.push(o()({},r,t.value))})),"number"==typeof i&&e.push(o()({},r,i)),e):[]}},{key:"getPlotLinesMaxAbs",value:function(){var e,t=this.options.yAxis.plotLines;return Array.isArray(t)&&t.forEach((function(t){(!e||Math.abs(e)<Math.abs(t.value))&&(e=t.value)})),e}},{key:"setDomain",value:function(e,t){var n=t.ymin,r=t.ymax,i=this.options.yAxis,a=this.getPlotLinesMaxAbs(),o=this.tickLength;if(n===r){var s=(r-n)/(this.tickLength-1),l=s/2||r||1;o=0===s?1:this.tickLength,n-=l,r+=l}if(n>r){var c=n;n=r,r=c}a&&(a<n&&(n=a),a>r&&(r=a)),e.domain([n,r]),e.nice(o);var u,h,d,f,m=e.ticks(o),g=(u=m,h=this.ctx,d=i.tickValueFormatter,f=u.map((function(e){var t;return t="function"==typeof d?d(e):I(e),h.measureText(t).width})),Object(p.max)(f)+5);this.ticks=m,this.tickMaxWidth=g}},{key:"draw",value:function(e){var t=this,n=this.ctx,r=this.options,i=r.yAxis,a=r.chart;n.beginPath(),n.fillStyle="#fff",n.fillRect(0,0,this.tickMaxWidth,a.height),n.stroke(),n.closePath(),n.textAlign="right",n.textBaseline="middle",n.strokeStyle=i.labels.color,n.lineWidth=1,n.fillStyle=i.labels.color,this.ticks.forEach((function(r){var a;a="function"==typeof i.tickValueFormatter?i.tickValueFormatter(r):I(r);var o=e(r);n.fillText(a,t.tickMaxWidth-5,o)}))}},{key:"drawGridLine",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.yAxis;t.beginPath(),this.ticks.forEach((function(n){var i=e(n);t.moveTo(0,i),t.lineTo(r.width,i)})),t.strokeStyle=i.gridLineColor,t.stroke(),t.closePath()}},{key:"drawPlotLines",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.yAxis,a=n.yAxis.plotLines;Array.isArray(a)&&a.forEach((function(n){var a=e(n.value);t.setLineDash([5,3]),t.beginPath(),t.moveTo(0,a),t.lineTo(r.width,a),t.strokeStyle=n.color,t.stroke(),t.setLineDash([]),t.textAlign="right",t.textBaseline="top",t.shadowColor="#fff",t.shadowBlur=1,t.lineWidth=1,t.fillStyle=n.color,t.font="".concat(i.labels.fontSize,"px Palantino"),t.strokeText(String(n.value),r.width-10,a),t.fillText(String(n.value),r.width-10,a)}))}}]),e}();function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t){return"X"===t?1e3*e:e}function D(e){var t,n=e.series,r=e.x,i=e.xkey,a=e.ykey,o=e.ykey2,s=e.oykey,l=e.timestamp,c=e.fillNull,u=(t=function(e,t){return(n=R(e[i],l))<(r=t)?-1:n>r?1:n>=r?0:NaN;var n,r},{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}).left,h=new Date(r).getTime(),d=[];return"[object Array]"!==Object.prototype.toString.call(n)?[]:(n.forEach((function(e,t){if(I=e,M=o,!Object(p.some)(I.data,(function(e){return M&&M in e}))&&!1!==e.visible){var n=e.name,f=e.color,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"[object Function]"===Object.prototype.toString.call(t)&&t(r)&&(n[r]=e[r]);return n}(e,(function(e){return"data"!==e})),g=e.data,v=void 0===g?[]:g;if("[object Array]"===Object.prototype.toString.call(v)&&0!==(v=v.filter((function(e){return"number"==typeof e[a]||"number"==typeof c}))).length){var y,x=u(v,r),E=v[x-1],b=v[x];if(E&&b){var C=R(E[i],l),w=R(b[i],l),T=E[a],S=b[a];null===T&&void 0!==c&&(T=c),null===S&&void 0!==c&&(S=c),y=h-C<w-h?P(P({},E),{},{name:n,color:f,timestamp:C,value:T,origin:E[s],serieIndex:t,serieOptions:m}):P(P({},b),{},{name:n,color:f,timestamp:w,value:S,origin:b[s],serieIndex:t,serieOptions:m}),d.push(y)}else if(E){var k=R(E[i],l),_=E[a];null===_&&void 0!==c&&(_=c),y=P(P({},E),{},{name:n,color:f,timestamp:k,value:_,origin:E[s],serieIndex:t,serieOptions:m}),d.push(y)}else if(b){var A=R(b[i],l),O=b[a];null===O&&void 0!==c&&(O=c),y=P(P({},b),{},{name:n,color:f,timestamp:A,value:O,origin:b[s],serieIndex:t,serieOptions:m}),d.push(y)}}}var I,M})),d)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(){function e(t,n,r,i){l()(this,e),this.options=void 0,this.ctx=void 0,this.flag=void 0,this.container=void 0,this.isMouserover=void 0,this.options=t,this.ctx=n,this.flag=!1,this.container=r,this.init(r,i),this.isMouserover=!1}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart.id,r=document.createElement("div");r.id="".concat(n,"-tooltip"),r.className="ts-graph-tooltip",document.getElementById(r.id)||document.body.append(r)}},{key:"clear",value:function(){var e=this.options,t=e.ratio,n=e.chart,r=n.id,i=n.containerWidth,a=n.containerHeight,o=document.getElementById("".concat(r,"-tooltip"));this.isMouserover=!1,this.ctx.save(),this.ctx.setTransform(1*t,0,0,1*t,0,0),this.ctx.clearRect(0,0,i,a),this.ctx.restore(),o.style.top="-99999px",o.lastChild&&o.removeChild(o.lastChild)}},{key:"getNearestPoints",value:function(e,t,n,r){var i=this.options,a=i.series,o=void 0===a?[]:a,s=i.chart.colors,l=i.tooltip.shared,c=i.xkey,u=i.ykey,h=i.ykey2,d=i.oykey,f=i.timestamp,m=i.fillNull,g=this.container.getBoundingClientRect(),v=e.offsetX||e.clientX-g.left,y=t.invert(v),x=[];if(!1!==this.isMouserover){x=D({x:y,xkey:c,ykey:u,ykey2:h,oykey:d,timestamp:f,series:o,fillNull:m}).map((function(e){return z(z({},e),{},{x:t(e.timestamp),y:n(e.value),color:e.color||_(s,e.serieIndex)})}));var E,b,C=Object(p.groupBy)(x,"x");if(Object(p.keys)(C).length>1){var w=Number.POSITIVE_INFINITY;for(var T in C)if(Object.prototype.hasOwnProperty.call(C,T)){var S=(E=e.offsetX,b=Number(T),Math.sqrt(Math.pow(b-E,2)));S<w&&(w=S,x=C[T])}}if(!l){var k=Number.POSITIVE_INFINITY;x.forEach((function(t){var n,r,i=(n={x:e.offsetX,y:e.offsetY},r=t,Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)));i<k&&(k=i,x=[t])}))}r(x)}}},{key:"draw",value:function(e,t,n){var r=this,i=t.xScales,a=t.yScales,o=t.yAxis;this.isMouserover=!0,this.getNearestPoints(e,i,a,(function(t){if(r.clear(),t.length){if(t[0].x<o.tickMaxWidth)return;r.drawCrosshair(t[0].x),r.drawSymbol(t),r.drawModal(t,e)}n&&"[object Function]"===Object.prototype.toString.call(n)&&n(t)}))}},{key:"drawModal",value:function(e,t){var n=this.options,r=n.chart,a=r.id,o=r.renderTo,s=n.tooltip,l=n.time,c=n.notDisplayedSeries,u=o.offsetWidth,d=o.offsetHeight,f=document.getElementById("".concat(a,"-tooltip")),m=document.createElement("div"),g=e,v=((d=window.innerHeight/1.5)-18-100)/15,y=!1;if(s.sharedSortDirection&&(e=Object(p.orderBy)(e,(function(e){return e.value}),s.sharedSortDirection)),e.length>v&&(e=e.slice(0,v),y=!0),m.className="ts-graph-tooltip-content",f.appendChild(m),"[object Function]"===Object.prototype.toString.call(s.formatter))m.innerHTML=s.formatter(i()(e),i()(g));else{var x=e[0],E=document.createDocumentFragment(),b=document.createElement("ul"),C=document.createElement("li"),w=new Date(x.timestamp);if(l&&l.timezoneOffset){var T=w.getTimezoneOffset(),S=w.getTime()+60*T*1e3+60*l.timezoneOffset*1e3;w=new Date(S)}var k=document.createTextNode(h.timeFormat(s.timeFormat)(w));if(C.appendChild(k),C.style.color="#666",b.style.maxWidth="".concat(window.innerWidth/1.5,"px"),b.appendChild(C),E.appendChild(b),e.forEach((function(e){var t=e.color,n=e.name,r=e.origin,i=e.filledNull;if(!(c.indexOf(n)>-1)){var a=document.createElement("li");if(t){var o=document.createElement("span"),l=document.createTextNode("● ");o.style.color=t,o.appendChild(l),a.appendChild(o)}if(n){var u=document.createTextNode("".concat(n,": "));a.appendChild(u)}var d=r;if(Object(p.isNumber)(d)){var f,m=document.createElement("strong");f="function"==typeof s.pointValueformatter?s.pointValueformatter(d):"origin"===s.precision?d:"short"===s.precision?function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(h.format(".5s")(d)):s.precision>0?h.format(",."+s.precision+"f")(d):h.format(",.3f")(d),f+=i?"(空值填补,仅限看图使用)":"";var g=document.createTextNode(f);m.appendChild(g),a.appendChild(m)}b.appendChild(a)}})),y){var _=document.createElement("li"),A=document.createTextNode("......");_.appendChild(A),b.appendChild(_)}m.appendChild(E)}var O=m.offsetWidth,I=m.offsetHeight,M=this.container.getBoundingClientRect(),N=t.layerX+M.left,F=t.layerY+M.top;f.style.left="".concat(N-O-20,"px"),f.style.top="".concat(F+20,"px"),N-O-20<0&&(f.style.left="".concat(N+20,"px"),N+20+O>u&&(f.style.left="0px")),F+20+I>d&&(f.style.top=F-I-20<0?"0px":"".concat(F-I-20,"px")),f.style.zIndex="9999",f.style.visibility="visible"}},{key:"drawSymbol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.ctx,n=this.options;e.forEach((function(e){var r=e.x,i=e.y,a=e.color,o=e.name;n.notDisplayedSeries.indexOf(o)>-1||(t.beginPath(),t.arc(r,i,5,0,360,!1),t.lineWidth=1,t.fillStyle=a,t.fill(),t.beginPath(),t.arc(r,i,3,0,360,!1),t.lineWidth=1,t.fillStyle="white",t.fill())}))}},{key:"drawCrosshair",value:function(e){var t=this.ctx,n=this.options,r=n.chart,i=n.xAxis,a=r.height-i.tickpadding-i.labels.fontSize-i.tickLength;t.beginPath(),t.moveTo(e,0),t.lineTo(e,a),t.lineWidth=1,t.strokeStyle=i.lineColor,t.stroke()}},{key:"destroy",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-tooltip"));t&&t.parentNode&&t.parentNode.removeChild(t)}}]),e}(),j=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.options=t,this.ctx=n}return u()(e,[{key:"draw",value:function(e,t){var n=this.options,r=n.series,i=n.chart,a=i.colors,o=i.height,s=n.xAxis,l=n.xkey,c=n.ykey,u=n.ykey2,d=n.timestamp,f=n.fillNull,m=n.notDisplayedSeries,g=n.curve,v=this.options.line.width,y=this.options.area.opacity,x=this.ctx,E=function(t){var n="X"===d?1e3*t[l]:t[l];return e(new Date(n))},b=function(e,n){var r=e[n];return"number"!=typeof r||isNaN(r)?"number"==typeof f?t(f):void 0:t(r)},C=function(e){return"number"==typeof e[c]||"number"==typeof f};Object(p.sortBy)(r,"zIndex").forEach((function(e,t){if(!1!==e.visible&&!(m.indexOf(e.name)>-1)){var n=e.color||_(a,t);if(e.color=n,y>0||e.opacity){x.beginPath();var r=h.area().x(E).y0((function(e){return u&&u in e?b(e,c):o-s.tickpadding-s.labels.fontSize-5})).y1((function(e){return b(e,u&&u in e?u:c)})).defined(C).context(x);g.enabled&&"smooth"===g.mode&&r.curve(h.curveMonotoneX),r(e.data||[]),x.fillStyle=n,x.globalAlpha=y||(e.opacity?e.opacity:.5),x.fill(),x.closePath()}if(v>0&&void 0===e.opacity){x.beginPath();var i=h.line().x(E).y((function(e){return b(e,c)})).defined(C).context(x);g.enabled&&"smooth"===g.mode&&i.curve(h.curveMonotoneX),x.lineTo(0,0),i(e.data||[]),x.lineJoin="round",x.lineWidth=v,x.strokeStyle=n,x.lineCap="round",x.globalAlpha=1,x.setLineDash(e.lineDash||[]),x.stroke(),x.closePath()}}}))}}]),e}(),G=function(){function e(t,n){l()(this,e),this.options=void 0,this.ctx=void 0,this.options=t,this.ctx=n}return u()(e,[{key:"draw",value:function(e,t,n){var r=this.options,i=r.series,a=r.chart,o=a.colors,s=a.height,l=a.width,c=r.xAxis,u=r.timestamp,d=r.xkey,f=r.ykey,m=r.notDisplayedSeries,g=this.ctx,v=this.options.area.opacity;Object(p.sortBy)(i,"zIndex").forEach((function(r,i){if(!1!==r.visible&&!(m.indexOf(r.name)>-1)){var a=r.color||_(o,i);r.color=a,g.fillStyle=a,g.globalAlpha=v;var p=h.scaleBand().domain(r.data.map((function(e){return"X"===u?1e3*e[d]:e[d]}))).range([0,l]).padding(.3),y=(null==n?void 0:n.k)||1;r.data.forEach((function(n){var r="X"===u?1e3*n[d]:n[d];g.fillRect(e(r)-p.bandwidth()*y/2,t(n[f]),p.bandwidth()*y,s-t(n[f])-c.tickpadding-c.labels.fontSize-5)})),g.globalAlpha=1}}))}}]),e}(),$=function(){function e(t,n,r,i){l()(this,e),this.options=void 0,this.reset=void 0,this.options=t,this.init(r,i),this.reset=n}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart,r=n.id,i=n.containerHeight,a=document.getElementById("".concat(r,"-zoom"));a&&a.remove(),a=document.createElement("div");var o=document.createElement("div"),s=document.createElement("a"),l=document.createTextNode("Reset zoom");a.id="".concat(r,"-zoom"),a.className="ts-graph-zoom",o.id="".concat(r,"-zoom-marker"),o.className="ts-graph-zoom-marker",o.style.height="".concat(i,"px"),s.id="".concat(r,"-zoom-resetBtn"),s.className="ts-graph-zoom-resetBtn",s.appendChild(l),a.appendChild(o),a.appendChild(s),e.insertBefore(a,t),this.onReset()}},{key:"onReset",value:function(){var e=this,t=this.options.chart.id;document.getElementById("".concat(t,"-zoom-resetBtn")).addEventListener("click",(function(t){t.stopPropagation(),e.reset(),e.clearResetBtn()}))}},{key:"onZoom",value:function(e,t,n){var r=this.options.chart.width,i=t.offsetX-e.offsetX;if(i){var a=r/Math.abs(i),o=t.offsetX>e.offsetX?e.offsetX:t.offsetX,s=h.zoomIdentity.translate(-o*a,0).scale(a);this.drawResetBtn(),n(s)}}},{key:"clearMarker",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-zoom-marker"));t.style.display="none",t.style.width="0px",t.style.left="unset",t.style.right="unset"}},{key:"drawMarker",value:function(e,t){var n=this.options.chart.marginLeft,r=e.offsetX,i=t.offsetX,a=this.options.chart,o=a.id,s=a.containerWidth,l=document.getElementById("".concat(o,"-zoom-marker"));l.style.display="block",l.style.top="0px",r<i?(l.style.right="unset",l.style.left="".concat(r+n,"px"),l.style.width="".concat(i-r,"px")):(l.style.left="unset",l.style.right="".concat(s-r-n,"px"),l.style.width="".concat(r-i,"px"))}},{key:"clearResetBtn",value:function(){var e=this.options.chart.id;document.getElementById("".concat(e,"-zoom-resetBtn")).style.display="none"}},{key:"drawResetBtn",value:function(){var e=this.options.chart.id;document.getElementById("".concat(e,"-zoom-resetBtn")).style.display="block"}}]),e}(),Y=function(){function e(t,n,r,i){var a=this;l()(this,e),this.options=void 0,this.onLegendItemClick=void 0,this.handelLegendItemClick=function(e){var t=e.currentTarget;if(t){t.classList.contains("ts-graph-legend-item-active")?t.classList.remove("ts-graph-legend-item-active"):t.classList.add("ts-graph-legend-item-active");var n=t.getAttribute("data-serie");n&&a.onLegendItemClick(n)}},this.options=t,this.init(r,i),this.onLegendItemClick=n}return u()(e,[{key:"init",value:function(e,t){var n=this.options.chart.id,r=document.createElement("div");r.id="".concat(n,"-legend"),r.className="ts-graph-legend",document.getElementById(r.id)||e.insertBefore(r,t)}},{key:"initEvent",value:function(){var e=this,t=this.options.chart.id;document.getElementById("".concat(t,"-legend")).querySelectorAll(".ts-graph-legend-item").forEach((function(t){t.removeEventListener("click",e.handelLegendItemClick),t.addEventListener("click",e.handelLegendItemClick)}))}},{key:"updateOptions",value:function(e){this.options=e}},{key:"draw",value:function(){var e=this.options,t=e.chart.id,n=e.series,r=e.legend,i=document.getElementById("".concat(t,"-legend"));if(r.enabled){if("[object Array]"===Object.prototype.toString.call(n)){i.innerHTML="";var a=document.createDocumentFragment();n.forEach((function(e){var t=document.createElement("span"),n=document.createElement("span"),r=document.createElement("span"),i=document.createElement("span"),o=document.createTextNode(e.name);t.className="ts-graph-legend-item",t.setAttribute("data-serie",e.name),n.className="ts-graph-legend-item-symbol",r.className="ts-graph-legend-item-symbol-line",r.style.borderColor=e.color,i.className="ts-graph-legend-item-symbol-point",i.style.backgroundColor=e.color,n.appendChild(r),n.appendChild(i),t.appendChild(n),t.appendChild(o),a.appendChild(t)})),i.appendChild(a)}this.initEvent()}}}]),e}(),U=function(){function e(t,n){l()(this,e),this.options=void 0,this.options=t,this.init(n)}return u()(e,[{key:"init",value:function(e){var t=this.options.chart.id,n=document.getElementById("".concat(t,"-shapes"));n&&n.remove(),(n=document.createElement("div")).id="".concat(t,"-shapes"),n.className="ts-graph-shapes",e.appendChild(n),n.addEventListener("mouseover",this.onMouseMove.bind(this)),n.addEventListener("click",this.onClick.bind(this))}},{key:"onMouseMove",value:function(e){var t=this.options,n=t.shapes,r=t.onShapeMouseOver;if("IMG"===e.target.tagName){var i=Object(p.find)(n,{id:e.target.dataset.id});i&&"function"==typeof r&&r(e,i)}}},{key:"onClick",value:function(e){var t=this.options,n=t.shapes,r=t.onShapeClick;if("IMG"===e.target.tagName){var i=Object(p.find)(n,{id:e.target.dataset.id});i&&"function"==typeof r&&r(e,i)}}},{key:"draw",value:function(e,t){var n=this.options,r=n.chart.id,i=n.shapes,a=document.getElementById("".concat(r,"-shapes"));a&&"[object Array]"===Object.prototype.toString.call(i)&&(a.innerHTML="",i.forEach((function(n){var r=document.createElement("img");r.src=n.imgData,r.dataset.id=n.id,r.style.position="absolute",r.onload=function(){r.style.left="".concat(e(n.x)+r.width/2,"px"),r.style.top="".concat(t(n.y)-r.height/2,"px")},a.appendChild(r)})))}},{key:"destroy",value:function(){var e=this.options.chart.id,t=document.getElementById("".concat(e,"-shapes"));t&&(t.removeEventListener("mouseover",this.onMouseMove),t.removeEventListener("click",this.onClick),t.parentNode&&(t.innerHTML=""))}}]),e}();function V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(12);var K=new k.a,Q=function(){function e(t){var n=this;l()(this,e),this.options=void 0,this.container=void 0,this.frontContext=void 0,this.backContext=void 0,this.eventCanvas=void 0,this.frontCanvas=void 0,this.backCanvas=void 0,this.xAxis=void 0,this.xScales=void 0,this.yAxis=void 0,this.yScales=void 0,this.line=void 0,this.bar=void 0,this.legend=void 0,this.tooltip=void 0,this.zoom=void 0,this.transform=void 0,this.shapes=void 0,this.showTooltip=function(e){n.tooltip.draw(e,n)},this.hideTooltip=function(){n.tooltip.clear()},this.getZoomedSeries=function(){var e=n.options,t=e.chart.renderTo,r=e.series,i=e.timestamp,a=e.xkey,o=t.offsetWidth;return r.map((function(e){if("[object Array]"===Object.prototype.toString.call(e.data)){var t=e.data.filter((function(e){var t="X"===i?1e3*e[a]:e[a],r=n.xScales(new Date(t));return r>=0&&r<=o}));return q(q({},e),{},{data:t})}return e}))},this.handleResize=function(){var e=n.options.chart,t=e.renderTo.offsetWidth,r=e.renderTo.offsetHeight;n.options.chart.width=t-e.marginLeft-e.marginRight,n.options.chart.height=r-e.marginTop-e.marginBottom,n.options.chart.containerWidth=t,n.options.chart.containerHeight=r,n.container.style.width="".concat(t,"px"),n.container.style.height="".concat(r,"px"),n.retinaScaled(n.backCanvas,"back"),n.retinaScaled(n.frontCanvas,"front"),n.retinaScaled(n.eventCanvas,"event"),n.initScales(),n.initZoom(),n.draw(!1)},this.handleZoom=function(e,t){if(n.options.onZoomWithoutDefult){var r;t&&(r=Object(p.sortBy)(t,"offsetX").map((function(e){return n.xScales.invert(e.offsetX)}))),n.options.onZoomWithoutDefult(r)}else{var i=n.options,a=i.ykey,o=i.yAxis,s=i.ykeyFormatter,l=n.options.series;if(e?(n.transform=e,n.xScales=e.rescaleX(n.xScales),l=n.getZoomedSeries()):(n.transform=void 0,n.xScales=n.xAxis.init()),Array.isArray(l)){var c,u=o.min||-1/0,h=o.max||1/0,d=V(l);try{for(d.s();!(c=d.n()).done;){var f=c.value,m=Array.isArray(f.data)?f.data:[],g=void 0;for(g=0;g<m.length;g++){var v=M(m[g][a],s);null!==v&&(u<v&&(u=v),h>v&&(h=v))}}}catch(y){d.e(y)}finally{d.f()}n.yAxis.setDomain(n.yScales,{ymin:u,ymax:h})}n.options.onZoom(n.getZoomedSeries)}n.draw(!1)},this.handleLegendItemClick=function(e){var t=n.options.notDisplayedSeries;-1===t.indexOf(e)?t.push(e):n.options.notDisplayedSeries=t.filter((function(t){return t!==e})),n.draw(!1)};var r={ratio:window.devicePixelRatio||1,xkey:0,ykey:1,ykey2:2,oykey:"__originValue",timestamp:"x",chart:{id:Object(p.uniqueId)("ts-graph-"),colors:["#3399CC","#CC9933","#9966CC","#66CC66","#CC3333","#99CCCC","#CCCC66","#CC99CC","#99CC99","#CC6666","#336699","#996633","#993399","#339966","#993333"],width:t.chart.renderTo.offsetWidth,height:t.chart.renderTo.offsetHeight||350,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10},xAxis:{visible:!0,lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",labels:{color:"#999",fontSize:11}},yAxis:{visible:!0,lineColor:"#ccc",lineWidth:1,tickLength:5,tickpadding:5,tickColor:"#ccc",gridLineColor:"#efefef",labels:{color:"#999",fontSize:11}},type:"line",line:{enable:!0,width:2},area:{opacity:0},bars:{},stack:{enabled:!1},curve:{enabled:!1},tooltip:{shared:!0,cascade:!1,cascadeScope:void 0,timeFormat:"%Y-%m-%d %H:%M:%S"},series:[],legend:{align:"center",verticalAlign:"top",enabled:!1},fillNull:void 0,onClick:function(){},onRightClick:function(){},onZoom:function(){},onShapeMouseOver:function(){},onShapeClick:function(){}},i=Object(p.merge)({},r,t);void 0===t.chart.marginTop&&i.legend.enabled&&(i.chart.marginTop=20),this.handleResize=Object(p.debounce)(this.handleResize,300),this.init(i)}return u()(e,[{key:"init",value:function(e){var t=e.chart;this.options=e,this.options.notDisplayedSeries=[],this.options.chart.containerWidth=t.width,this.options.chart.containerHeight=t.height,this.options.chart.width=t.width-t.marginLeft-t.marginRight,this.options.chart.height=t.height-t.marginTop-t.marginBottom,this.createContainer(),this.createCanvas(),this.initSeries(),this.initScales(),this.initEvent(),"line"===this.options.type&&this.initLine(),"bar"===this.options.type&&this.initBar(),this.initLegend(),this.initTooltip(),this.initZoom(),this.initShapes(),this.draw()}},{key:"clearRect",value:function(e){var t=this.options.chart,n=t.containerWidth,r=t.containerHeight;e.clearRect(0,0,n,r)}},{key:"draw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.transform;this.clearRect(this.backContext),this.options.xAxis.visible&&this.yAxis.drawGridLine(this.yScales),this.options.xAxis.visible&&this.xAxis.draw(this.xScales),"line"===this.options.type&&this.line.draw(this.xScales,this.yScales),"bar"===this.options.type&&this.bar.draw(this.xScales,this.yScales,t),this.xAxis.drawPlotLines(this.xScales),this.yAxis.drawPlotLines(this.yScales),this.options.yAxis.visible&&this.yAxis.draw(this.yScales),e&&this.legend.draw(),this.shapes.draw(this.xScales,this.yScales)}},{key:"update",value:function(e){var t=Object(p.assign)({},this.options,e);e.series&&(t.series=e.series),this.options=t,this.offEvents(),this.initSeries(),this.initScales(),this.initEvent(),"line"===this.options.type&&this.initLine(),"bar"===this.options.type&&this.initBar(),this.initTooltip(),this.initShapes(),this.legend.updateOptions(t),this.draw()}},{key:"getSeries",value:function(){return i()(this.options.series)}},{key:"initEvent",value:function(){var e,t=this.options.tooltip,n=t.cascade,r=t.cascadeScope,i=r?"plotmove:".concat(r):"plotmove",a=r?"plotleave:".concat(r):"plotleave",o=!1,s={},l={},c=!1,u=this,d=Object(p.debounce)((function(e){c&&(u.tooltip.draw(e,u),o&&u.zoom.drawMarker(s,e))}),5),f=Object(p.throttle)((function(){u.tooltip.clear()}),5);h.select(this.eventCanvas).on("mousemove",(function(){c=!0,d(h.event),n&&K.emit(i,h.event)})).on("mouseleave",(function(){e=h.event,c=!1,f(),n&&K.emit(a)})).on("mousedown",(function(){1===h.event.which&&(o=!0,s=h.event)})).on("mouseup",(function(){h.event.stopPropagation();var e=h.event;s&&s.offsetX!==e.offsetX?(u.zoom.clearMarker(),u.zoom.onZoom(s,e,(function(t){u.handleZoom(t,[s,e])}))):u.options.onClick(h.event,u.xScales.invert(h.event.offsetX),u.yScales.invert(h.event.offsetY)),o=!1,s={}})).on("contextmenu",(function(){u.options.onRightClick(h.event,u.xScales.invert(h.event.offsetX),u.yScales.invert(h.event.offsetY)),h.event.preventDefault()})).on("touchstart",(function(){h.event.touches.length>1&&(o=!0)})).on("touchmove",(function(){var e=O(u.eventCanvas,h.event);1===h.event.touches.length&&u.tooltip.draw(e,u),o&&(s=e,l=O(u.eventCanvas,h.event,1),u.zoom.drawMarker(s,l))})).on("touchend",(function(){c=!1,f(),s&&s.offsetX!==l.offsetX?(u.zoom.clearMarker(),u.zoom.onZoom(s,l,(function(e){u.handleZoom(e,[s,l])}))):u.options.onClick(h.event,u.xScales.invert(h.event.offsetX),u.yScales.invert(h.event.offsetY)),o=!1,s={},l={}})),n&&(K.on(i,this.showTooltip),K.on(a,this.hideTooltip)),window.addEventListener("mouseup",(function(){if(!Object(p.isEmpty)(s)){var t=e;o=!1,u.zoom.clearMarker(),u.zoom.onZoom(s,t,(function(e){u.handleZoom(e,[s,t])})),s={}}})),E(this.options.chart.renderTo,this.handleResize)}},{key:"retinaScaled",value:function(e,t){var n=this.options,r=n.chart,i=n.ratio,a=e.getContext("2d"),o="front"===t?r.containerWidth:r.width,s="front"===t?r.containerHeight:r.height,l="front"===t?"0px":"".concat(r.marginLeft,"px"),c="front"===t?"0px":"".concat(r.marginTop,"px");e.width=o*i,e.height=s*i,e.style.width="".concat(o,"px"),e.style.height="".concat(s,"px"),e.style.position="absolute",e.style.left=l,e.style.top=c,"front"===t&&a.translate(r.marginLeft*i,r.marginTop*i),a.scale(i,i)}},{key:"createContainer",value:function(){var e=this.options.chart,t=document.createElement("div");t.style.position="relative",t.style.width="".concat(e.containerWidth,"px"),t.style.height="".concat(e.containerHeight,"px"),t.style.overflow="hidden",t.className="d3-graph-container",e.renderTo.appendChild(t),this.container=t}},{key:"createCanvas",value:function(){var e=this.options.chart.id;function t(t){var n=document.createElement("canvas"),r=n.getContext("2d");n.setAttribute("id","".concat(e,"-").concat(t,"Canvas")),this.container.appendChild(n),this["".concat(t,"Canvas")]=n,this["".concat(t,"Context")]=r,this.retinaScaled(n,t)}t.call(this,"back"),t.call(this,"front"),t.call(this,"event")}},{key:"initSeries",value:function(){var e=this.options,t=e.fillNull,n=e.series,r=e.xkey,i=e.ykey,a=e.ykey2,s=e.ykeyFormatter,l=e.oykey,c=e.yAxis,u=e.stack,h=-1/0,d=1/0,f=c.min,m=c.max;if(Array.isArray(n)){var g=[];n.forEach((function(e,c){var v,y=Array.isArray(e.data)?e.data:[],x=[],E=!1,b=function(){var e,g=y[v][l]?y[v][l]:M(y[v][i],s),b=(e={},o()(e,r,y[v][r]),o()(e,i,g),o()(e,l,g),e);if(a&&a in y[v]&&(b[a]=M(y[v][a],s)),u.enabled){void 0===b[l]&&(b[l]=M(b[i],s));var C=c;if(C>0)for(;C>0;){var w=Array.isArray(n[C-1].data)?n[C-1].data:[],T=Object(p.find)(w,(function(e){return e[r]===b[r]}));if(T){var S=isNaN(b[l])?0:b[l],k=M(T[i],s);k=isNaN(k)?0:k,b[i]=k+S;break}1===C&&(b[i]=b[l]),C--}else b[i]=b[l]}y[v]=b;var _=b[r],A=b[i],O=void 0;a&&a in y[v]&&(O=b[a]),void 0===t?!isNaN(A)&&(0===v||v===y.length-1||v>0&&v<y.length-1&&"number"==typeof A)?(x.push(b),E=!0):E&&(x.push(b),E=!1):x.push(b),h<_&&(h=_),d>_&&(d=_),"number"!=typeof A||isNaN(A)?"number"==typeof t&&(t<f&&(f=t),t>m&&(m=t)):(("number"!=typeof f||A<f)&&(f=A),"number"==typeof O&&O<f&&(f=O),("number"!=typeof m||A>m)&&(m=A),"number"==typeof O&&O>m&&(m=O))};for(v=0;v<y.length;v++)b();g.push(q(q({},e),{},{data:x,zIndex:u.enabled?n.length-c:c}))})),this.options.series=g,this.options.xmin=h,this.options.xmax=d,this.options.ymin=f,this.options.ymax=m}}},{key:"initLine",value:function(){this.line=new j(this.options,this.backContext)}},{key:"initBar",value:function(){this.bar=new G(this.options,this.backContext)}},{key:"initTooltip",value:function(){this.tooltip=new H(this.options,this.frontContext,this.container,this.eventCanvas)}},{key:"initZoom",value:function(){this.zoom=new $(this.options,this.handleZoom,this.container,this.eventCanvas)}},{key:"initLegend",value:function(){this.legend=new Y(this.options,this.handleLegendItemClick,this.container,this.eventCanvas)}},{key:"initScales",value:function(){var e=new F(this.options,this.backContext);this.yAxis=e,this.yScales=e.init();var t=new N(this.options,this.backContext,this.yAxis);this.xAxis=t;var n=t.init();this.transform&&(n=this.transform.rescaleX(n)),this.xScales=n}},{key:"initShapes",value:function(){var e=new U(this.options,this.container);this.shapes=e}},{key:"offEvents",value:function(){var e=this.options.tooltip,t=e.cascade,n=e.cascadeScope,r=n?"plotmove:".concat(n):"plotmove",i=n?"plotleave:".concat(n):"plotleave";h.select(this.eventCanvas).on("mousemove",null).on("mouseleave",null).on("mousedown",null).on("mouseup",null).on("touchmove",null),function(e,t){let n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",C),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--y&&x&&x.parentNode.removeChild(x)}}(this.options.chart.renderTo,this.handleResize),t&&(K.off(r,this.showTooltip),K.off(i,this.hideTooltip))}},{key:"destroy",value:function(){this.shapes.destroy(),this.tooltip.destroy(),this.offEvents(),h.select(this.container).remove()}}]),e}()}])));const Qh=["#634CD9","#3FC453","#FF6A00","#FF656B"],Zh=["#9B5CE6","#2E85FF","#55BCAC","#FAB34F","#49DBFF","#E65CCB"],Jh=()=>d.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em"},d.createElement("path",{d:"M810.666667 426.666667h-170.666667V128a42.666667 42.666667 0 0 0-42.666667-42.666667H384a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v512a42.666667 42.666667 0 0 0 42.666667 42.666667h640a42.666667 42.666667 0 0 0 42.666666-42.666667V469.333333a42.666667 42.666667 0 0 0-42.666666-42.666666zM341.333333 853.333333H213.333333V426.666667h128v426.666666z m213.333334 0h-128V170.666667h128v682.666666z m213.333333 0h-128v-341.333333h128v341.333333z m170.666667-682.666666h-42.666667V128a42.666667 42.666667 0 1 0-85.333333 0v42.666667h-42.666667a42.666667 42.666667 0 0 0 0 85.333333h42.666667v42.666667a42.666667 42.666667 0 0 0 85.333333 0V256h42.666667a42.666667 42.666667 0 1 0 0-85.333333z",fill:"currentColor"})),ep=e=>d.createElement(x,l(s({component:Jh},e),{className:"anticon-addpanel"})),tp={bitsSI:{type:"si",base:"bits"},bytesSI:{type:"si",base:"bytes"},bitsIEC:{type:"iec",base:"bits"},bytesIEC:{type:"iec",base:"bytes"}},np={type:"iec",base:"bytes",decimals:2},rp=[{exp:0,si:"",iec:"",iecExp:1},{exp:3,si:"k",iec:"Ki",iecExp:10},{exp:6,si:"M",iec:"Mi",iecExp:20},{exp:9,si:"G",iec:"Gi",iecExp:30},{exp:12,si:"T",iec:"Ti",iecExp:40},{exp:15,si:"P",iec:"Pi",iecExp:50},{exp:18,si:"E",iec:"Ei",iecExp:60},{exp:21,si:"Z",iec:"Zi",iecExp:70},{exp:24,si:"Y",iec:"Yi",iecExp:80}],ip={bits:"b",bytes:"B"};function ap(e,t=np){if(null==e)return{value:"",unit:"",text:""};const n=t.base?ip[t.base]:"";if("si"===t.type&&Math.abs(e)<1e3||"iec"===t.type&&Math.abs(e)<1024)return{value:w.round(e,t.decimals),unit:n,text:w.round(e,t.decimals)+n};const r="iec"===t.type?2:10,i=e.toExponential().match(/(\d.*\+)(\d{1,2})/);if(i){const a=3*Math.floor(parseInt(w.get(i,"[2]"))/3),o=w.find(rp,{exp:a});if(!o)return{value:NaN,unit:"",text:NaN};const s=w.get(o,t.type),l=w.get(o,"iec"===t.type?"iecExp":"exp"),c=Math.pow(r,l),u=w.round(e/c,t.decimals);return{value:u,unit:s+n,text:u+s+n}}return{value:w.round(e,t.decimals),unit:"",text:w.round(e,t.decimals)}}function op(e,t,n){if("number"!=typeof e)return{value:e,unit:"",text:e};let r=e,i={seconds:"s",milliseconds:"ms"}[t];if(w.forEach([{unit:"year",value:31104e3},{unit:"month",value:2592e3},{unit:"week",value:604800},{unit:"day",value:86400},{unit:"hour",value:3600},{unit:"min",value:60}],(n=>{const a=e/n.value/("milliseconds"===t?1e3:1);if(a>=1)return r=a,i=n.unit,!1})),"milliseconds"===t&&"ms"===i){const e=r/1e3;e>=1&&(r=e,i="s")}return{value:w.round(r,n),unit:i,text:w.round(r,n)+i}}const sp=({unit:e,decimals:t=3},n)=>{if(null===n||""===n||void 0===n)return{value:"",unit:"",text:""};if("number"!=typeof n&&(n=w.toNumber(n)),e){const r=tp[e];if(r){const{type:e,base:i}=r;return ap(n,{type:e,base:i,decimals:t})}return"none"===e?{value:w.round(n,t),unit:"",text:w.round(n,t)}:"percent"===e?{value:w.round(n,t),unit:"%",text:w.round(n,t)+"%"}:"percentUnit"===e?{value:w.round(100*n,t),unit:"%",text:w.round(100*n,t)+"%"}:"humantimeSeconds"===e?{value:A.duration(n,"seconds").humanize(),unit:"",text:A.duration(n,"seconds").humanize()}:"humantimeMilliseconds"===e?{value:A.duration(n,"milliseconds").humanize(),unit:"",text:A.duration(n,"milliseconds").humanize()}:"seconds"===e||"milliseconds"===e?op(n,e,t):{value:w.round(n,t),unit:"",text:w.round(n,t)}}return ap(n,{type:"si",decimals:t})},lp=e=>w.toNumber(w.get(e,1,NaN)),cp=(e,t,n)=>{var r,i,a;const{unit:o,decimals:s}=t||{},l=w.find(n,(t=>{const{type:n,match:r}=t;if(null===e||""===e||void 0===e){if("specialValue"===n){if("empty"===(null==r?void 0:r.specialValue))return""===e;if("null"===(null==r?void 0:r.specialValue))return null==e}return!1}return e=w.toNumber(e),"special"===n?e===(null==r?void 0:r.special):"range"===n&&((null==r?void 0:r.from)&&(null==r?void 0:r.to)?e>=(null==r?void 0:r.from)&&e<=(null==r?void 0:r.to):(null==r?void 0:r.from)?e>=(null==r?void 0:r.from):!!(null==r?void 0:r.to)&&e<=(null==r?void 0:r.to))})),c=sp({unit:o,decimals:s},e),u=(null==(r=null==l?void 0:l.result)?void 0:r.text)?null==(i=null==l?void 0:l.result)?void 0:i.text:c.value;return{value:u,unit:c.unit,color:null==(a=null==l?void 0:l.result)?void 0:a.color,text:u+c.unit}},up=(e,t,{unit:n,decimals:r},i)=>w.map(e,(e=>{const a={lastNotNull:()=>w.get(w.last(w.filter(e.data,(e=>null!==e[1]))),1),last:()=>w.get(w.last(e.data),1),firstNotNull:()=>w.get(w.first(w.filter(e.data,(e=>null!==e[1]))),1),first:()=>w.get(w.first(e.data),1),min:()=>lp(w.minBy(e.data,(e=>w.toNumber(e[1])))),max:()=>lp(w.maxBy(e.data,(e=>w.toNumber(e[1])))),avg:()=>w.meanBy(e.data,(e=>w.toNumber(e[1]))),sum:()=>w.sumBy(e.data,(e=>w.toNumber(e[1]))),count:()=>w.size(e.data)},o=a[t]?a[t]():NaN;return s({id:e.id,name:e.name,metric:e.metric,fields:l(s({},e.metric),{refId:e.refId}),stat:w.toNumber(o)},cp(o,{unit:n,decimals:r},i))})),hp=(e,{unit:t,decimals:n},r)=>w.map(e,((e,i)=>{const a={max:lp(w.maxBy(e.data,(e=>w.toNumber(e[1])))),min:lp(w.minBy(e.data,(e=>w.toNumber(e[1])))),avg:w.meanBy(e.data,(e=>w.toNumber(e[1]))),sum:w.sumBy(e.data,(e=>w.toNumber(e[1]))),last:lp(w.last(e.data))};return{id:e.id,name:e.name,metric:e.metric,offset:e.offset,color:r[i%r.length],disabled:!1===e.visible||void 0,max:sp({unit:t,decimals:n},a.max),min:sp({unit:t,decimals:n},a.min),avg:sp({unit:t,decimals:n},a.avg),sum:sp({unit:t,decimals:n},a.sum),last:sp({unit:t,decimals:n},a.last)}}));function pp(e){var t,n;const{values:r,series:i,inDashboard:a=!0,chartHeight:o="200px",tableHeight:c="200px",themeMode:u=""}=e,{custom:h,options:p={}}=r,{lineWidth:m=1,gradientMode:g="none"}=h,[v,y]=f.exports.useState(i),[x,E]=f.exports.useState(""),b=f.exports.useRef(null),C=f.exports.useRef(null),T=f.exports.useRef(null),S=fe(T),k=(null==(t=p.legend)?void 0:t.displayMode)||"table",_=(null==(n=p.legend)?void 0:n.placement)||"bottom",A="hidden"!==k,[O,I]=f.exports.useState([]),[M,N]=f.exports.useState(!1);let F=A?"70%":"100%",L=A?"30%":"0px";return a||(F=o,L=c),"right"===_&&(F="100%",L="100%"),f.exports.useEffect((()=>{var e,t;return b.current&&(C.current&&C.current.destroy(),C.current=new Kh({timestamp:"X",xkey:0,ykey:1,ykey2:2,ykeyFormatter:e=>Number(e),chart:{renderTo:b.current,height:b.current.clientHeight,colors:Zh},series:[]})),I(A?hp(v,{unit:null==(e=null==p?void 0:p.standardOptions)?void 0:e.util,decimals:null==(t=null==p?void 0:p.standardOptions)?void 0:t.decimals},Zh):[]),()=>{C.current&&"function"==typeof C.current.destroy&&C.current.destroy()}}),[A]),f.exports.useEffect((()=>{y(i)}),[JSON.stringify(i)]),f.exports.useEffect((()=>{var e,t,n,r,i,a,o,c;C.current&&C.current.update({type:"lines"===h.drawStyle?"line":"bar",series:v,line:{width:m},area:l(s({},C.current.options.area),{opacity:h.fillOpacity,gradientMode:g,gradientOpacityStopColor:"dark"===u?"rgba(0,0,0,0)":"rgba(255,255,255,0)"}),stack:{enabled:"noraml"===h.stack},curve:{enabled:!0,mode:h.lineInterpolation},tooltip:l(s({},C.current.options.tooltip),{shared:"all"===(null==(e=p.tooltip)?void 0:e.mode),sharedSortDirection:"none"!==(null==(t=p.tooltip)?void 0:t.sort)?null==(n=p.tooltip)?void 0:n.sort:void 0,pointValueformatter:e=>{var t,n;return sp({unit:null==(t=null==p?void 0:p.standardOptions)?void 0:t.util,decimals:null==(n=null==p?void 0:p.standardOptions)?void 0:n.decimals},e).text}}),xAxis:l(s({},C.current.options.xAxis),{lineColor:"dark"===u?"rgba(255,255,255,0.2)":"#ccc",tickColor:"dark"===u?"rgba(255,255,255,0.2)":"#ccc"}),yAxis:l(s({},C.current.options.yAxis),{min:null==(r=null==p?void 0:p.standardOptions)?void 0:r.min,max:null==(i=null==p?void 0:p.standardOptions)?void 0:i.max,plotLines:w.map(null==(a=null==p?void 0:p.thresholds)?void 0:a.steps,(e=>l(s({},e),{shadowColor:"dark"===u?"rgba(255,255,255,0.2)":"#fff"}))),backgroundColor:"dark"===u?"#2A2D3C":"#fff",gridLineColor:"dark"===u?"rgba(255,255,255,0.05)":"#efefef",tickValueFormatter:e=>{var t,n;return sp({unit:null==(t=null==p?void 0:p.standardOptions)?void 0:t.util,decimals:null==(n=null==p?void 0:p.standardOptions)?void 0:n.decimals},e).text}})}),I(A?hp(v,{unit:null==(o=null==p?void 0:p.standardOptions)?void 0:o.util,decimals:null==(c=null==p?void 0:p.standardOptions)?void 0:c.decimals},Zh):[])}),[JSON.stringify(v),JSON.stringify(h),JSON.stringify(p),u]),f.exports.useEffect((()=>{C.current&&C.current.handleResize()}),[_]),d.createElement("div",{className:"renderer-timeseries-container",style:{display:"right"===_?"flex":"block"}},d.createElement("div",{ref:b,style:{height:F,width:"right"===_?M?0:"60%":"100%"}}),A&&d.createElement("div",{className:"renderer-timeseries-legend-table",style:{[a?"height":"maxHeight"]:L,width:"right"===_?M?"100%":"40%":"100%",overflow:"hidden"},ref:T},"table"===k&&d.createElement(Rt,{rowKey:"id",size:"small",className:"scroll-container-table",scroll:{x:650,y:(null==S?void 0:S.height)||54},columns:[{title:`Series (${i.length})`,dataIndex:"name",width:150,ellipsis:{showTitle:!1},render:(e,t)=>d.createElement(kt,{placement:"topLeft",title:d.createElement("div",null,d.createElement("div",null,w.get(t,"metric.__name__")),d.createElement("div",null,t.offset&&"current"!==t.offset?`offfset ${t.offset}`:""),w.map(w.omit(t.metric,"__name__"),((e,t)=>d.createElement("div",{key:t},t,"=",e)))),getTooltipContainer:()=>document.body},d.createElement("span",{className:"renderer-timeseries-legend-color-symbol",style:{backgroundColor:t.color}}),t.offset&&"current"!==t.offset?d.createElement("span",{style:{paddingRight:5}},"offfset ",t.offset):"",d.createElement("span",null,JSON.stringify(t.metric)))},{title:"Max",dataIndex:"max",sorter:(e,t)=>e.max.value-t.max.value,render:e=>e.text},{title:"Min",dataIndex:"min",sorter:(e,t)=>e.min.value-t.min.value,render:e=>e.text},{title:"Avg",dataIndex:"avg",sorter:(e,t)=>e.avg.value-t.avg.value,render:e=>e.text},{title:"Sum",dataIndex:"sum",sorter:(e,t)=>e.sum.value-t.sum.value,render:e=>e.text},{title:"Last",dataIndex:"last",sorter:(e,t)=>e.last.value-t.last.value,render:e=>e.text}],dataSource:O,locale:{emptyText:"暂无数据"},pagination:!1,rowClassName:e=>e.disabled?"disabled":"",onRow:e=>({onClick:()=>{E(x!==e.id?e.id:""),y(w.map(v,(t=>l(s({},t),{visible:x===e.id||e.id===t.id}))))}})}),"list"===k&&!w.isEmpty(O)&&d.createElement("div",{className:"renderer-timeseries-legend-container"},d.createElement("div",{className:P({"renderer-timeseries-legend-list":!0,"renderer-timeseries-legend-list-placement-right":"right"===_,"scroll-container":!0})},w.map(O,(e=>d.createElement("div",{key:e.id,onClick:()=>{E(x!==e.id?e.id:""),y(w.map(v,(t=>l(s({},t),{visible:x===e.id||e.id===t.id}))))},className:e.disabled?"disabled":""},d.createElement("span",{className:"renderer-timeseries-legend-color-symbol",style:{backgroundColor:e.color}}),e.name)))),"right"===_&&d.createElement("div",{className:"renderer-timeseries-legend-toggle",onClick:()=>{N(!M)}},M?d.createElement(me,null):d.createElement(ge,null)))))}const dp=(e,t,n,r)=>"value"===t?e:"#fff";function fp(e){const t=f.exports.useRef(null),n=fe(t),{item:r,idx:i,colSpan:a,textMode:o,colorMode:s,textSize:l,isFullSizeBackground:c,themeMode:u}=e,h=(null==l?void 0:l.title)?null==l?void 0:l.title:(null==n?void 0:n.width)/w.toString(r.name).length||12;let p=(null==l?void 0:l.value)?null==l?void 0:l.value:((null==n?void 0:n.width)-12*r.unit.length-4)/w.toString(r.value).length||12;const m=r.color?r.color:Qh[i%Qh.length],g="background"===s?m:"transparent";return p>(null==n?void 0:n.height)-20&&(p=(null==n?void 0:n.height)-20),d.createElement("div",{key:r.name,className:"renderer-stat-item",ref:t,style:{width:100/a+"%",flexBasis:100/a+"%",backgroundColor:c?"transparent":g}},d.createElement("div",{className:"renderer-stat-item-content"},"valueAndName"===o&&d.createElement("div",{className:"renderer-stat-header",style:{fontSize:h>100?100:h}},r.name),d.createElement("div",{className:"renderer-stat-value",style:{color:dp(m,s),fontSize:p>100?100:p}},r.value,d.createElement("span",{style:{fontSize:12,paddingLeft:4}},r.unit))))}function mp(e){var t,n;const{values:r,series:i,containerRef:a,themeMode:o}=e,{custom:s,options:l}=r,{calc:c,textMode:u,colorMode:h,colSpan:p,textSize:m}=s,g=up(i,c,{unit:null==(t=null==l?void 0:l.standardOptions)?void 0:t.util,decimals:null==(n=null==l?void 0:l.standardOptions)?void 0:n.decimals},null==l?void 0:l.valueMappings),[v,y]=f.exports.useState(!1);return f.exports.useEffect((()=>{if(1===g.length&&"background"===h&&a.current){const e=w.head(g),t=e.color?e.color:Qh[0],n=ve(t);a.current.style.border="1px solid "+(n+""),a.current.style.backgroundColor=n+"",a.current.style.color="#fff",y(!0)}else y(!1)}),[JSON.stringify(g),h]),d.createElement("div",{className:"renderer-stat-container"},d.createElement("div",{className:"renderer-stat-container-box scroll-container"},w.map(g,((e,t)=>d.createElement(fp,{key:e.name,item:e,idx:t,colSpan:p,textMode:u,colorMode:h,textSize:m,isFullSizeBackground:v,themeMode:o})))))}const gp=(e,t)=>{let n={};return w.forEach(e,(e=>{var r;(null==(r=null==e?void 0:e.matcher)?void 0:r.value)===t&&(n=null==e?void 0:e.properties)})),n};function vp(e,t){return"string"==typeof e&&"string"==typeof t?e.localeCompare(t):"number"==typeof e&&"number"==typeof t?e-t:0}const yp=f.exports.createContext({}),xp=(e,t)=>{switch(t.type){case"updateMetric":return l(s({},e),{metric:t.payload});default:return e}},Ep={metric:{}};function bp(e){const[t,n]=f.exports.useReducer(xp,Ep);return d.createElement(yp.Provider,{value:{state:t,dispatch:n}},e.children)}const Cp=e=>{const t=w.reduce(e,((e,t)=>w.union(e,w.keys(t.metric))),[]);return w.uniq(t)},wp=(e,t)=>t.sortColumn===e&&t.sortOrder;function Tp(e){const t=f.exports.useRef(null),n=fe(t),{dispatch:r}=f.exports.useContext(yp),{values:i,series:a,themeMode:o}=e,{custom:s,options:l,overrides:c}=i,{showHeader:u,calc:h,aggrDimension:p,displayMode:m,columns:g,sortColumn:v,sortOrder:y,colorMode:x="value"}=s,[E,b]=d.useState([]),[C,T]=d.useState({sortColumn:v,sortOrder:y});f.exports.useEffect((()=>{T({sortColumn:v,sortOrder:y})}),[v,y]),f.exports.useEffect((()=>{var e,t;const n=up(a,h,{unit:null==(e=null==l?void 0:l.standardOptions)?void 0:e.util,decimals:null==(t=null==l?void 0:l.standardOptions)?void 0:t.decimals},null==l?void 0:l.valueMappings);r&&r({type:"updateMetric",payload:Cp(n)}),b(n)}),[JSON.stringify(a),h,JSON.stringify(l)]);let S=E,k=[{title:"name",dataIndex:"name",key:"name",sorter:(e,t)=>vp(e.name,t.name),sortOrder:wp("name",C),render:e=>d.createElement("div",{className:"renderer-table-td-content"},e)},{title:"value",dataIndex:"text",key:"text",sorter:(e,t)=>e.stat-t.stat,sortOrder:wp("value",C),className:"renderer-table-td-content-value-container",render:(e,t)=>{let n={value:e,unit:"",color:t.color||("dark"===o?"#fff":"#000")};const r=gp(c,t.fields.refId);return w.isEmpty(r)||(n=cp(null==t?void 0:t.stat,null==r?void 0:r.standardOptions,null==r?void 0:r.valueMappings)),d.createElement("div",{className:"renderer-table-td-content",style:{color:"background"===x?"#fff":null==n?void 0:n.color,backgroundColor:"background"===x?n.color:"unset"}},n.value,n.unit)}}];if("labelsOfSeriesToRows"===m){const e=w.isEmpty(g)?w.concat(Cp(E),"value"):g;k=w.map(e,(e=>({title:e,dataIndex:e,key:e,sorter:(t,n)=>"value"===e?t.stat-n.stat:vp(t.name,n.name),sortOrder:wp(e,C),className:"value"===e?"renderer-table-td-content-value-container":"",render:(t,n)=>{if("value"===e){const e={value:null==n?void 0:n.value,unit:null==n?void 0:n.unit,color:n.color||("dark"===o?"#fff":"#000")};return d.createElement("div",{className:"renderer-table-td-content",style:{color:"background"===x?"#fff":null==e?void 0:e.color,backgroundColor:"background"===x?e.color:"unset"}},null==e?void 0:e.value,null==e?void 0:e.unit)}return w.get(n.metric,e)}})))}if("labelValuesToRows"===m&&p){S=((e,t,n)=>{const r=w.groupBy(e,(e=>e.fields[t]));return w.map(r,((e,r)=>{const i={[t]:r},a=w.groupBy(e,(e=>e.fields[n]));return w.forEach(a,((e,t)=>{i[t]={name:e[0].name,id:e[0].id,stat:e[0].stat,color:e[0].color,text:e[0].text}})),i.groupNames=w.keys(a),i}))})(E,p,"refId");const e=w.reduce(S,((e,t)=>w.union(w.concat(e,t.groupNames))),[]);k=[{title:p,dataIndex:p,key:p,sorter:(e,t)=>vp(e[p],t[p]),sortOrder:wp(p,C),render:e=>d.createElement("div",{className:"renderer-table-td-content"},e)}],w.map(e,(e=>{var t;const n=w.find(S,(t=>t[e]));k.push({title:null==(t=n[e])?void 0:t.name,dataIndex:e,key:e,sorter:(t,n)=>w.get(t[e],"stat")-w.get(n[e],"stat"),sortOrder:wp("value",C),className:"renderer-table-td-content-value-container",render:t=>{let n={value:null==t?void 0:t.text,unit:"",color:(null==t?void 0:t.color)||("dark"===o?"#fff":"#000")};const r=gp(c,e);return w.isEmpty(r)||(n=cp(null==t?void 0:t.stat,null==r?void 0:r.standardOptions,null==r?void 0:r.valueMappings)),d.createElement("div",{className:"renderer-table-td-content",style:{color:"background"===x?"#fff":null==n?void 0:n.color,backgroundColor:"background"===x?null==n?void 0:n.color:"unset"}},null==n?void 0:n.value,null==n?void 0:n.unit)}})}))}const _=u?40:0,A=w.get(n,"height")-_,O=isNaN(A)?0:A;return d.createElement("div",{className:"renderer-table-container",ref:t},d.createElement("div",{className:"renderer-table-container-box"},d.createElement(Rt,{rowKey:"id",getPopupContainer:()=>document.body,showSorterTooltip:!1,showHeader:u,dataSource:S,columns:k,scroll:{y:O},bordered:!1,pagination:!1,onChange:(e,t,n)=>{T({sortColumn:n.columnKey,sortOrder:n.order})}})))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sp=function(e,t){return(Sp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function kp(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Sp(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var _p=function(){return(_p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Ap(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Op(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function Ip(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var Mp=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)},Np=function(e,t){return!!Mp(e)&&e.indexOf(t)>-1},Fp=function(e,t){if(!Mp(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},Lp={}.toString,Pp=function(e,t){return Lp.call(e)==="[object "+t+"]"},Rp=function(e){return Pp(e,"Function")},Dp=function(e){return null==e},Bp=function(e){return Array.isArray?Array.isArray(e):Pp(e,"Array")},zp=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};function Hp(e,t){if(e)if(Bp(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(zp(e))for(var i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i))break}var jp=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return Hp(e,(function(n,r){Rp(e)&&"prototype"===r||t.push(r)})),t};function Gp(e,t){var n=jp(t),r=n.length;if(Dp(e))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(t[a]!==e[a]||!(a in e))return!1}return!0}var $p=function(e){return"object"==typeof e&&null!==e},Yp=function(e){if(!$p(e)||!Pp(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function Up(e,t){if(!Bp(e))return null;var n;if(Rp(t)&&(n=t),Yp(t)&&(n=function(e){return Gp(e,t)}),n)for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r];return null}function Vp(e,t,n){void 0===n&&(n=0);for(var r=n;r<e.length;r++)if(t(e[r],r))return r;return-1}var Wp=function(e){if(!Bp(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t},Xp=function(e){if(Bp(e))return e.reduce((function(e,t){return Math.max(e,t)}),e[0])},qp=function(e){if(Bp(e))return e.reduce((function(e,t){return Math.min(e,t)}),e[0])},Kp=function(e){var t=e.filter((function(e){return!isNaN(e)}));if(!t.length)return{min:0,max:0};if(Bp(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=Xp(t);return{min:qp(t),max:i}},Qp=Array.prototype.splice,Zp=function(e,t,n){if(!Bp(e)&&!Yp(e))return e;var r=n;return Hp(e,(function(e,n){r=t(r,e,n)})),r},Jp=function(e,t){var n=[];if(!Mp(e))return n;for(var r=-1,i=[],a=e.length;++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return function(e,t){if(!Mp(e))return[];for(var n=e?t.length:0,r=n-1;n--;){var i=void 0,a=t[n];n!==r&&a===i||(i=a,Qp.call(e,a,1))}}(e,i),n},ed=function(e){return Pp(e,"String")};function td(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];t.has(a)||(n.push(a),t.set(a,!0))}return n}var nd=function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i][t];if(!Dp(a)){Bp(a)||(a=[a]);for(var o=0;o<a.length;o++){var s=a[o];r[s]||(n.push(s),r[s]=!0)}}}return n};function rd(e){if(Mp(e))return e[0]}function id(e){if(Mp(e)){return e[e.length-1]}}var ad=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},od=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1},sd=Object.prototype.hasOwnProperty;function ld(e,t){if(!t||!Bp(e))return{};for(var n,r={},i=Rp(t)?t:function(e){return e[t]},a=0;a<e.length;a++){var o=e[a];n=i(o),sd.call(r,n)?r[n].push(o):r[n]=[o]}return r}function cd(e,t){if(!t)return{0:e};if(!Rp(t)){var n=Bp(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",r=0,i=n.length;r<i;r++)t+=e[n[r]]&&e[n[r]].toString();return t}}return ld(e,t)}var ud=function(e,t,n){return e<t?t:e>n?n:e},hd=function(e,t){var n=t.toString(),r=n.indexOf(".");if(-1===r)return Math.round(e);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))},pd=function(e){return Pp(e,"Number")};function dd(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n}var fd=function(e,t){if(Bp(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var a=e[i],o=Rp(t)?t(a):a[t];o>r&&(n=a,r=o)}return n}},md=function(e,t){return(e%t+t)%t},gd=Math.PI/180,vd=function(e){return gd*e},yd=function(e,t){return e.hasOwnProperty(t)},xd=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return Hp(e,(function(n,r){Rp(e)&&"prototype"===r||t.push(n)})),t},Ed=function(e){return Dp(e)?"":e.toString()},bd=function(e){return Ed(e).toLowerCase()};function Cd(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]})):e}var wd=function(e){var t=Ed(e);return t.charAt(0).toUpperCase()+t.substring(1)},Td={}.toString,Sd=function(e){return Pp(e,"Boolean")},kd=function(e){return Pp(e,"Date")},_d=Object.prototype,Ad=function(e){return void 0===e},Od=function(e){return e instanceof Element||e instanceof HTMLDocument};function Id(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}function Md(e,t,n,r){return t&&Id(e,t),n&&Id(e,n),r&&Id(e,r),e}var Nd=function(e){if("object"!=typeof e||null===e)return e;var t;if(Bp(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"==typeof e[n]&&null!=e[n]?t[n]=Nd(e[n]):t[n]=e[n]}else for(var i in t={},e)"object"==typeof e[i]&&null!=e[i]?t[i]=Nd(e[i]):t[i]=e[i];return t};function Fd(e,t,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a)}}var Ld=function(e,t){if(!Rp(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var s=e.apply(this,r);return o.set(a,s),s};return n.cache=new Map,n};function Pd(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(t.hasOwnProperty(i)){var a=t[i];null!==a&&Yp(a)?(Yp(e[i])||(e[i]={}),n<r?Pd(e[i],a,n+1,r):e[i]=t[i]):Bp(a)?(e[i]=[],e[i]=e[i].concat(a)):void 0!==a&&(e[i]=a)}}var Rd=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)Pd(e,t[r]);return e},Dd=function(e,t){if(!Mp(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},Bd=Object.prototype.hasOwnProperty;function zd(e){if(Dp(e))return!0;if(Mp(e))return!e.length;var t=function(e){return Td.call(e).replace(/^\[object /,"").replace(/]$/,"")}(e);if("Map"===t||"Set"===t)return!e.size;if(function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_d)}(e))return!Object.keys(e).length;for(var n in e)if(Bd.call(e,n))return!1;return!0}var Hd,jd=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(ed(e)||ed(t))return!1;if(Mp(e)||Mp(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=jd(e[r],t[r]));r++);return n}if($p(e)||$p(t)){var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(n=!0,r=0;r<i.length&&(n=jd(e[i[r]],t[i[r]]));r++);return n}return!1},Gd=function(e,t){if(!Mp(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(t(i,r))}return n},$d=function(e){return e},Yd=function(e,t,n){for(var r=0,i=ed(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return void 0===e||r<i.length?n:e},Ud=function(e,t,n){var r=e,i=ed(t)?t.split("."):t;return i.forEach((function(e,t){t<i.length-1?(zp(r[e])||(r[e]=pd(i[t+1])?[]:{}),r=r[e]):r[e]=n})),e},Vd=Object.prototype.hasOwnProperty,Wd=function(e,t){if(null===e||!Yp(e))return{};var n={};return Hp(t,(function(t){Vd.call(e,t)&&(n[t]=e[t])})),n},Xd=function(e,t){return Zp(e,(function(e,n,r){return t.includes(r)||(e[r]=n),e}),{})},qd=function(e,t,n){var r,i,a,o,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,o=e.apply(i,a),r||(i=a=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return i=this,a=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,o=e.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(l,u)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c},Kd={},Qd=function(e){return Kd[e=e||"g"]?Kd[e]+=1:Kd[e]=1,e+Kd[e]},Zd=function(){};function Jd(e){return Dp(e)?0:Mp(e)?e.length:Object.keys(e).length}var ef,tf,nf,rf,af,of,sf=Ld((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return Hd||(Hd=document.createElement("canvas").getContext("2d")),Hd.font=[a,o,i,n+"px",r].join(" "),Hd.measureText(ed(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Op([e],xd(t)).join("")})),lf=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();(tf=ef||(ef={})).FORE="fore",tf.MID="mid",tf.BG="bg",(rf=nf||(nf={})).TOP="top",rf.TOP_LEFT="top-left",rf.TOP_RIGHT="top-right",rf.RIGHT="right",rf.RIGHT_TOP="right-top",rf.RIGHT_BOTTOM="right-bottom",rf.LEFT="left",rf.LEFT_TOP="left-top",rf.LEFT_BOTTOM="left-bottom",rf.BOTTOM="bottom",rf.BOTTOM_LEFT="bottom-left",rf.BOTTOM_RIGHT="bottom-right",rf.RADIUS="radius",rf.CIRCLE="circle",rf.NONE="none",(of=af||(af={})).AXIS="axis",of.GRID="grid",of.LEGEND="legend",of.TOOLTIP="tooltip",of.ANNOTATION="annotation",of.SLIDER="slider",of.SCROLLBAR="scrollbar",of.OTHER="other";var cf,uf,hf,pf,df,ff,mf,gf,vf=3,yf=2,xf=1;(uf=cf||(cf={})).BEFORE_RENDER="beforerender",uf.AFTER_RENDER="afterrender",uf.BEFORE_PAINT="beforepaint",uf.AFTER_PAINT="afterpaint",uf.BEFORE_CHANGE_DATA="beforechangedata",uf.AFTER_CHANGE_DATA="afterchangedata",uf.BEFORE_CLEAR="beforeclear",uf.AFTER_CLEAR="afterclear",uf.BEFORE_DESTROY="beforedestroy",uf.BEFORE_CHANGE_SIZE="beforechangesize",uf.AFTER_CHANGE_SIZE="afterchangesize",(pf=hf||(hf={})).BEFORE_DRAW_ANIMATE="beforeanimate",pf.AFTER_DRAW_ANIMATE="afteranimate",(ff=df||(df={})).MOUSE_ENTER="plot:mouseenter",ff.MOUSE_DOWN="plot:mousedown",ff.MOUSE_MOVE="plot:mousemove",ff.MOUSE_UP="plot:mouseup",ff.MOUSE_LEAVE="plot:mouseleave",ff.TOUCH_START="plot:touchstart",ff.TOUCH_MOVE="plot:touchmove",ff.TOUCH_END="plot:touchend",ff.TOUCH_CANCEL="plot:touchcancel",ff.CLICK="plot:click",ff.DBLCLICK="plot:dblclick",ff.CONTEXTMENU="plot:contextmenu",ff.LEAVE="plot:leave",ff.ENTER="plot:enter",(gf=mf||(mf={})).ACTIVE="active",gf.INACTIVE="inactive",gf.SELECTED="selected",gf.DEFAULT="default";var Ef,bf,Cf,wf,Tf=["color","shape","size"],Sf={};function kf(e,t){Sf[e]=t}function _f(e,t,n){if(e){if("function"==typeof e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if("function"==typeof e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}}}function Af(e){Ef||(Ef=document.createElement("table"),bf=document.createElement("tr"),Cf=/^\s*<(\w+|!)[^>]*>/,wf={tr:document.createElement("tbody"),tbody:Ef,thead:Ef,tfoot:Ef,td:bf,th:bf,"*":document.createElement("div")});var t=Cf.test(e)&&RegExp.$1;t&&t in wf||(t="*");var n=wf[t];e=e.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+e;var r=n.childNodes[0];return n.removeChild(r),r}function Of(e,t,n){var r;try{r=window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.style[t]}catch(Wh){}finally{r=void 0===r?n:r}return r}function If(e,t){var n=function(e,t){var n=Of(e,"height",t);return"auto"===n&&(n=e.offsetHeight),parseFloat(n)}(e,t),r=parseFloat(Of(e,"borderTopWidth"))||0,i=parseFloat(Of(e,"paddingTop"))||0,a=parseFloat(Of(e,"paddingBottom"))||0;return n+r+(parseFloat(Of(e,"borderBottomWidth"))||0)+i+a+(parseFloat(Of(e,"marginTop"))||0)+(parseFloat(Of(e,"marginBottom"))||0)}function Mf(e,t){var n=function(e,t){var n=Of(e,"width",t);return"auto"===n&&(n=e.offsetWidth),parseFloat(n)}(e,t),r=parseFloat(Of(e,"borderLeftWidth"))||0,i=parseFloat(Of(e,"paddingLeft"))||0,a=parseFloat(Of(e,"paddingRight"))||0,o=parseFloat(Of(e,"borderRightWidth"))||0,s=parseFloat(Of(e,"marginRight"))||0;return n+r+o+i+a+(parseFloat(Of(e,"marginLeft"))||0)+s}function Nf(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e}function Ff(e){return"number"==typeof e&&!isNaN(e)}function Lf(e,t,n,r){var i=n,a=r;if(t){var o=function(e){var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}(e);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(Ff(i)?i:1,1),height:Math.max(Ff(a)?a:1,1)}}var Pf=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0),this},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],a=this._events["*"]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],s=o.callback;o.once&&(r.splice(a,1),0===r.length&&delete t._events[e],i--,a--),s.apply(t,n)}};o(i),o(a)},e.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}(),Rf=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=t.visible,i=void 0===r||r;return n.visible=i,n}return kp(t,e),t.prototype.show=function(){this.visible||this.changeVisible(!0)},t.prototype.hide=function(){this.visible&&this.changeVisible(!1)},t.prototype.destroy=function(){this.off(),this.destroyed=!0},t.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},t}(Pf),Df="\t\n\v\f\r   ᠎             　\u2028\u2029",Bf=new RegExp("([a-z])["+Df+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Df+"]*,?["+Df+"]*)+)","ig"),zf=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Df+"]*,?["+Df+"]*","ig"),Hf=function(e){if(!e)return null;if(Bp(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(Bf,(function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(zf,(function(e,t){t&&o.push(+t)})),"m"===s&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===o.length&&n.push([i,o[0]]),"r"===s)n.push([i].concat(o));else for(;o.length>=t[s]&&(n.push([i].concat(o.splice(0,t[s]))),t[s]););return e})),n},jf=function(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var a=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4===r?a[3]={x:+e[0],y:+e[1]}:i-2===r&&(a[2]={x:+e[0],y:+e[1]},a[3]={x:+e[2],y:+e[3]}):a[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},Gf=function(e,t,n,r,i){var a=[];if(null===i&&null===r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!==i){var o=Math.PI/180,s=e+n*Math.cos(-r*o),l=e+n*Math.cos(-i*o);a=[["M",s,t+n*Math.sin(-r*o)],["A",n,n,0,+(i-r>180),0,l,t+n*Math.sin(-i*o)]]}else a=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return a},$f=function(e){if(!(e=Hf(e))||!e.length)return[["M",0,0]];var t,n,r=[],i=0,a=0,o=0,s=0,l=0;"M"===e[0][0]&&(o=i=+e[0][1],s=a=+e[0][2],l++,r[0]=["M",i,a]);for(var c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),u=void 0,h=void 0,p=l,d=e.length;p<d;p++){if(r.push(u=[]),(t=(h=e[p])[0])!==t.toUpperCase())switch(u[0]=t.toUpperCase(),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+h[6]+i,u[7]=+h[7]+a;break;case"V":u[1]=+h[1]+a;break;case"H":u[1]=+h[1]+i;break;case"R":for(var f=2,m=(n=[i,a].concat(h.slice(1))).length;f<m;f++)n[f]=+n[f]+i,n[++f]=+n[f]+a;r.pop(),r=r.concat(jf(n,c));break;case"O":r.pop(),(n=Gf(i,a,h[1],h[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(Gf(i,a,h[1],h[2],h[3])),u=["U"].concat(r[r.length-1].slice(-2));break;case"M":o=+h[1]+i,s=+h[2]+a;break;default:for(f=1,m=h.length;f<m;f++)u[f]=+h[f]+(f%2?i:a)}else if("R"===t)n=[i,a].concat(h.slice(1)),r.pop(),r=r.concat(jf(n,c)),u=["R"].concat(h.slice(-2));else if("O"===t)r.pop(),(n=Gf(i,a,h[1],h[2])).push(n[0]),r=r.concat(n);else if("U"===t)r.pop(),r=r.concat(Gf(i,a,h[1],h[2],h[3])),u=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,v=h.length;g<v;g++)u[g]=h[g];if("O"!==(t=t.toUpperCase()))switch(u[0]){case"Z":i=+o,a=+s;break;case"H":i=u[1];break;case"V":a=u[1];break;case"M":o=u[u.length-2],s=u[u.length-1];break;default:i=u[u.length-2],a=u[u.length-1]}}return r},Yf=function(e,t,n,r){return[e,t,n,r,n,r]},Uf=function(e,t,n,r,i,a){var o=1/3,s=2/3;return[o*e+s*n,o*t+s*r,o*i+s*n,o*a+s*r,i,a]},Vf=function(e,t,n,r,i,a,o,s,l,c){n===r&&(n+=1);var u,h,p,d,f,m=120*Math.PI/180,g=Math.PI/180*(+i||0),v=[],y=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(c)h=c[0],p=c[1],d=c[2],f=c[3];else{e=(u=y(e,t,-g)).x,t=u.y,s=(u=y(s,l,-g)).x,l=u.y,e===s&&t===l&&(s+=1,l+=1);var x=(e-s)/2,E=(t-l)/2,b=x*x/(n*n)+E*E/(r*r);b>1&&(n*=b=Math.sqrt(b),r*=b);var C=n*n,w=r*r,T=(a===o?-1:1)*Math.sqrt(Math.abs((C*w-C*E*E-w*x*x)/(C*E*E+w*x*x)));d=T*n*E/r+(e+s)/2,f=T*-r*x/n+(t+l)/2,h=Math.asin(((t-f)/r).toFixed(9)),p=Math.asin(((l-f)/r).toFixed(9)),h=e<d?Math.PI-h:h,p=s<d?Math.PI-p:p,h<0&&(h=2*Math.PI+h),p<0&&(p=2*Math.PI+p),o&&h>p&&(h-=2*Math.PI),!o&&p>h&&(p-=2*Math.PI)}var S=p-h;if(Math.abs(S)>m){var k=p,_=s,A=l;p=h+m*(o&&p>h?1:-1),s=d+n*Math.cos(p),l=f+r*Math.sin(p),v=Vf(s,l,n,r,i,0,o,_,A,[p,k,d,f])}S=p-h;var O=Math.cos(h),I=Math.sin(h),M=Math.cos(p),N=Math.sin(p),F=Math.tan(S/4),L=4/3*n*F,P=4/3*r*F,R=[e,t],D=[e+L*I,t-P*O],B=[s+L*N,l-P*M],z=[s,l];if(D[0]=2*R[0]-D[0],D[1]=2*R[1]-D[1],c)return[D,B,z].concat(v);for(var H=[],j=0,G=(v=[D,B,z].concat(v).join().split(",")).length;j<G;j++)H[j]=j%2?y(v[j-1],v[j],g).y:y(v[j],v[j+1],g).x;return H},Wf=function(e,t){var n,r=$f(e),i=t&&$f(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],c="",u="",h=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(Vf.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(Uf(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(Uf(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(Yf(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(Yf(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(Yf(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(Yf(t.x,t.y,t.X,t.Y))}return e},p=function(e,t){if(e[t].length>7){e[t].shift();for(var a=e[t];a.length;)s[t]="A",i&&(l[t]="A"),e.splice(t++,0,["C"].concat(a.splice(0,6)));e.splice(t,1),n=Math.max(r.length,i&&i.length||0)}},d=function(e,t,a,o,s){e&&t&&"M"===e[s][0]&&"M"!==t[s][0]&&(t.splice(s,0,["M",o.x,o.y]),a.bx=0,a.by=0,a.x=e[s][1],a.y=e[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var f=0;f<n;f++){r[f]&&(c=r[f][0]),"C"!==c&&(s[f]=c,f&&(u=s[f-1])),r[f]=h(r[f],a,u),"A"!==s[f]&&"C"===c&&(s[f]="C"),p(r,f),i&&(i[f]&&(c=i[f][0]),"C"!==c&&(l[f]=c,f&&(u=l[f-1])),i[f]=h(i[f],o,u),"A"!==l[f]&&"C"===c&&(l[f]="C"),p(i,f)),d(r,i,a,o,f),d(i,r,o,a,f);var m=r[f],g=i&&i[f],v=m.length,y=i&&g.length;a.x=m[v-2],a.y=m[v-1],a.bx=parseFloat(m[v-4])||a.x,a.by=parseFloat(m[v-3])||a.y,o.bx=i&&(parseFloat(g[y-4])||o.x),o.by=i&&(parseFloat(g[y-3])||o.y),o.x=i&&g[y-2],o.y=i&&g[y-1]}return i?[r,i]:r},Xf=/,?([a-z]),?/gi,qf=function(e){return e.join(",").replace(Xf,"$1")},Kf=function(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n},Qf=function(e,t,n,r,i,a,o,s,l){null===l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,d=0;d<12;d++){var f=c*u[d]+c,m=Kf(f,e,n,i,o),g=Kf(f,t,r,a,s),v=m*m+g*g;p+=h[d]*Math.sqrt(v)}return c*p},Zf=function(e,t,n,r,i,a,o,s){for(var l,c,u,h,p=[],d=[[],[]],f=0;f<2;++f)if(0===f?(c=6*e-12*n+6*i,l=-3*e+9*n-9*i+3*o,u=3*n-3*e):(c=6*t-12*r+6*a,l=-3*t+9*r-9*a+3*s,u=3*r-3*t),Math.abs(l)<1e-12){if(Math.abs(c)<1e-12)continue;(h=-u/c)>0&&h<1&&p.push(h)}else{var m=c*c-4*u*l,g=Math.sqrt(m);if(!(m<0)){var v=(-c+g)/(2*l);v>0&&v<1&&p.push(v);var y=(-c-g)/(2*l);y>0&&y<1&&p.push(y)}}for(var x,E=p.length,b=E;E--;)x=1-(h=p[E]),d[0][E]=x*x*x*e+3*x*x*h*n+3*x*h*h*i+h*h*h*o,d[1][E]=x*x*x*t+3*x*x*h*r+3*x*h*h*a+h*h*h*s;return d[0][b]=e,d[1][b]=t,d[0][b+1]=o,d[1][b+1]=s,d[0].length=d[1].length=b+2,{min:{x:Math.min.apply(0,d[0]),y:Math.min.apply(0,d[1])},max:{x:Math.max.apply(0,d[0]),y:Math.max.apply(0,d[1])}}},Jf=function(e,t,n,r,i,a,o,s){if(!(Math.max(e,n)<Math.min(i,o)||Math.min(e,n)>Math.max(i,o)||Math.max(t,r)<Math.min(a,s)||Math.min(t,r)>Math.max(a,s))){var l=(e-n)*(a-s)-(t-r)*(i-o);if(l){var c=((e*r-t*n)*(i-o)-(e-n)*(i*s-a*o))/l,u=((e*r-t*n)*(a-s)-(t-r)*(i*s-a*o))/l,h=+c.toFixed(2),p=+u.toFixed(2);if(!(h<+Math.min(e,n).toFixed(2)||h>+Math.max(e,n).toFixed(2)||h<+Math.min(i,o).toFixed(2)||h>+Math.max(i,o).toFixed(2)||p<+Math.min(t,r).toFixed(2)||p>+Math.max(t,r).toFixed(2)||p<+Math.min(a,s).toFixed(2)||p>+Math.max(a,s).toFixed(2)))return{x:c,y:u}}}},em=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},tm=function(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return a.parsePathArray=qf,a},nm=function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:tm(e,t,n,r),vb:[e,t,n,r].join(" ")}},rm=function(e,t,n,r,i,a,o,s){Bp(e)||(e=[e,t,n,r,i,a,o,s]);var l=Zf.apply(null,e);return nm(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},im=function(e,t,n,r,i,a,o,s,l){var c=1-l,u=Math.pow(c,3),h=Math.pow(c,2),p=l*l,d=p*l,f=e+2*l*(n-e)+p*(i-2*n+e),m=t+2*l*(r-t)+p*(a-2*r+t),g=n+2*l*(i-n)+p*(o-2*i+n),v=r+2*l*(a-r)+p*(s-2*a+r);return{x:u*e+3*h*l*n+3*c*l*l*i+d*o,y:u*t+3*h*l*r+3*c*l*l*a+d*s,m:{x:f,y:m},n:{x:g,y:v},start:{x:c*e+l*n,y:c*t+l*r},end:{x:c*i+l*o,y:c*a+l*s},alpha:90-180*Math.atan2(f-g,m-v)/Math.PI}},am=function(e,t,n){if(!function(e,t){return e=nm(e),t=nm(t),em(t,e.x,e.y)||em(t,e.x2,e.y)||em(t,e.x,e.y2)||em(t,e.x2,e.y2)||em(e,t.x,t.y)||em(e,t.x2,t.y)||em(e,t.x,t.y2)||em(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(rm(e),rm(t)))return n?0:[];for(var r=~~(Qf.apply(0,e)/8),i=~~(Qf.apply(0,t)/8),a=[],o=[],s={},l=n?0:[],c=0;c<r+1;c++){var u=im.apply(0,e.concat(c/r));a.push({x:u.x,y:u.y,t:c/r})}for(c=0;c<i+1;c++){u=im.apply(0,t.concat(c/i));o.push({x:u.x,y:u.y,t:c/i})}for(c=0;c<r;c++)for(var h=0;h<i;h++){var p=a[c],d=a[c+1],f=o[h],m=o[h+1],g=Math.abs(d.x-p.x)<.001?"y":"x",v=Math.abs(m.x-f.x)<.001?"y":"x",y=Jf(p.x,p.y,d.x,d.y,f.x,f.y,m.x,m.y);if(y){if(s[y.x.toFixed(4)]===y.y.toFixed(4))continue;s[y.x.toFixed(4)]=y.y.toFixed(4);var x=p.t+Math.abs((y[g]-p[g])/(d[g]-p[g]))*(d.t-p.t),E=f.t+Math.abs((y[v]-f[v])/(m[v]-f[v]))*(m.t-f.t);x>=0&&x<=1&&E>=0&&E<=1&&(n?l+=1:l.push({x:y.x,y:y.y,t1:x,t2:E}))}}return l};function om(e,t){var n=[],r=[];return e.length&&function e(t,i){if(1===t.length)n.push(t[0]),r.push(t[0]);else{for(var a=[],o=0;o<t.length-1;o++)0===o&&n.push(t[0]),o===t.length-2&&r.push(t[o+1]),a[o]=[(1-i)*t[o][0]+i*t[o+1][0],(1-i)*t[o][1]+i*t[o+1][1]];e(a,i)}}(e,t),{left:n,right:r.reverse()}}var sm=function(e,t,n){if(1===n)return[[].concat(e)];var r=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])r=r.concat(function(e,t,n){var r=[[e[1],e[2]]];n=n||2;var i=[];"A"===t[0]?(r.push(t[6]),r.push(t[7])):"C"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]]),r.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]])):r.push([t[1],t[2]]);for(var a=r,o=1/n,s=0;s<n-1;s++){var l=om(a,o/(1-o*s));i.push(l.left),a=l.right}return i.push(a),i.map((function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t.concat(e[e.length-1])}))}(e,t,n));else{var i=[].concat(e);"M"===i[0]&&(i[0]="L");for(var a=0;a<=n-1;a++)r.push(i)}return r},lm=function(e,t){if(e.length!==t.length)return!1;var n=!0;return Hp(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function cm(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var um=function(e,t){var n=function(e,t){var n,r,i=e.length,a=t.length,o=0;if(0===i||0===a)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=a;c++)s[0][c]={min:c};for(l=1;l<=i;l++)for(n=e[l-1],c=1;c<=a;c++){r=t[c-1],o=lm(n,r)?0:1;var u=s[l-1][c].min+1,h=s[l][c-1].min+1,p=s[l-1][c-1].min+o;s[l][c]=cm(u,h,p)}return s}(e,t),r=e.length,i=t.length,a=[],o=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=o;u<=i;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);o=s,n[l][o].type&&a.push({index:l-1,type:n[l][o].type})}for(l=a.length-1;l>=0;l--)o=a[l].index,"add"===a[l].type?e.splice(o,0,[].concat(e[o])):e.splice(o,1)}var h=i-(r=e.length);if(r<i)for(l=0;l<h;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function hm(e,t,n){for(var r,i=[].concat(e),a=1/(n+1),o=pm(t)[0],s=1;s<=n;s++)a*=s,0===(r=Math.floor(e.length*a))?i.unshift([o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]):i.splice(r,0,[o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]);return i}function pm(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var dm=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=pm(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=hm(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=hm(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=hm(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e},fm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",catmullRomToBezier:jf,fillPath:function(e,t){if(1===e.length)return e;var n=e.length-1,r=t.length-1,i=n/r,a=[];if(1===e.length&&"M"===e[0][0]){for(var o=0;o<r-n;o++)e.push(e[0]);return e}for(o=0;o<r;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce((function(t,r,i){return i===n?t.concat(e[n]):t.concat(sm(e[i],e[i+1],r))}),[]);return l.unshift(e[0]),"Z"!==t[r]&&"z"!==t[r]||l.push("Z"),l},fillPathByDiff:um,formatPath:dm,intersection:function(e,t){return function(e,t,n){var r,i,a,o,s,l,c,u,h,p;e=Wf(e),t=Wf(t);for(var d=n?0:[],f=0,m=e.length;f<m;f++){var g=e[f];if("M"===g[0])r=s=g[1],i=l=g[2];else{"C"===g[0]?(h=[r,i].concat(g.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,s,l,s,l],r=s,i=l);for(var v=0,y=t.length;v<y;v++){var x=t[v];if("M"===x[0])a=c=x[1],o=u=x[2];else{"C"===x[0]?(p=[a,o].concat(x.slice(1)),a=p[6],o=p[7]):(p=[a,o,a,o,c,u,c,u],a=c,o=u);var E=am(h,p,n);if(n)d+=E;else{for(var b=0,C=E.length;b<C;b++)E[b].segment1=f,E[b].segment2=v,E[b].bez1=h,E[b].bez2=p;d=d.concat(E)}}}}}return d}(e,t)},parsePathArray:qf,parsePathString:Hf,pathToAbsolute:$f,pathToCurve:Wf,rectPath:tm}),mm=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function gm(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var vm="undefined"!=typeof window&&void 0!==window.document;function ym(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function xm(e){return e.cfg.visible&&e.cfg.capture}var Em=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=Md(r,t),n}return kp(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(Pf),bm=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Cm=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},wm=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},Tm=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},Sm=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},km=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},_m=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Am=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Om=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Im(e){return e?Mm(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new km:"undefined"!=typeof navigator?Mm(navigator.userAgent):"undefined"!=typeof process&&process.version?new wm(process.version.slice(1)):null}function Mm(e){var t=function(e){return""!==e&&Am.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var a=i.exec(e);return!!a&&[r,a]}),!1)}(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new Sm;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=bm(bm([],i,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-i.length),!0)):i=[];var a=i.join("."),o=function(e){for(var t=0,n=Om.length;t<n;t++){var r=Om[t],i=r[0];if(r[1].exec(e))return i}return null}(e),s=_m.exec(e);return s&&s[1]?new Tm(n,a,o,s[1]):new Cm(n,a,o)}var Nm,Fm="undefined"!=typeof Float32Array?Float32Array:Array;function Lm(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=n[0],d=n[1],f=n[2],m=n[3],g=n[4],v=n[5],y=n[6],x=n[7],E=n[8];return e[0]=p*r+d*o+f*c,e[1]=p*i+d*s+f*u,e[2]=p*a+d*l+f*h,e[3]=m*r+g*o+v*c,e[4]=m*i+g*s+v*u,e[5]=m*a+g*l+v*h,e[6]=y*r+x*o+E*c,e[7]=y*i+x*s+E*u,e[8]=y*a+x*l+E*h,e}function Pm(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function Rm(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Dm(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Bm(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function zm(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function Hm(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function jm(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function Gm(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function $m(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function Ym(e,t){return e[0]*t[0]+e[1]*t[1]}function Um(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),s=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),Nm=new Fm(3),Fm!=Float32Array&&(Nm[0]=0,Nm[1]=0,Nm[2]=0);var Vm=Dm;function Wm(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1}(r,n),Lm(e,r,t)}function Xm(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),Lm(e,r,t)}function qm(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),Lm(e,r,t)}function Km(e,t,n){return Lm(e,n,t)}function Qm(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var a=t[r];switch(a[0]){case"t":Wm(n,n,[a[1],a[2]]);break;case"s":qm(n,n,[a[1],a[2]]);break;case"r":Xm(n,n,a[1]);break;case"m":Km(n,n,a[1])}}return n}function Zm(e,t,n){var r=Um(e,t),i=function(e,t){return e[0]*t[1]-t[0]*e[1]}(e,t)>=0;return n?i?2*Math.PI-r:r:i?r:2*Math.PI-r}function Jm(e,t){var n=[],r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=t[0],d=t[1],f=t[2],m=t[3],g=t[4],v=t[5],y=t[6],x=t[7],E=t[8];return n[0]=p*r+d*o+f*c,n[1]=p*i+d*s+f*u,n[2]=p*a+d*l+f*h,n[3]=m*r+g*o+v*c,n[4]=m*i+g*s+v*u,n[5]=m*a+g*l+v*h,n[6]=y*r+x*o+E*c,n[7]=y*i+x*s+E*u,n[8]=y*a+x*l+E*h,n}function eg(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}function tg(e){var t=[],n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,t[0]=h*f,t[1]=(-u*r+i*c)*f,t[2]=(s*r-i*o)*f,t[3]=p*f,t[4]=(u*n-i*l)*f,t[5]=(-s*n+i*a)*f,t[6]=d*f,t[7]=(-c*n+r*l)*f,t[8]=(o*n-r*a)*f,t):null}!function(){var e=function(){var e=new Fm(2);return Fm!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var ng=Qm,rg=["zIndex","capture","visible","type"],ig=["repeat"];function ag(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function og(e,t){var n={},r=t.attr();return Hp(e,(function(e,t){-1!==ig.indexOf(t)||jd(r[t],e)||(n[t]=e)})),n}function sg(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return Hp(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&Hp(t.toAttrs,(function(t,n){a.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var lg=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return Md(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return kp(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(zp(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(gm(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr("matrix")},t.prototype.setMatrix=function(e){this.attr("matrix",e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?Jm(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?Jm(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?eg(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=tg(t);if(n)return eg(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[wd(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};Hp(t,(function(e,r){Bp(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)Bp(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return Hp(rg,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,a,o,s,l,c=e[0],u=e[1],h=e[2],p=void 0===h?"easeLinear":h,d=e[3],f=void 0===d?Zd:d,m=e[4],g=void 0===m?0:m;Rp(c)?(i=c,c={}):zp(c)&&c.onFrame&&(i=c.onFrame,a=c.repeat),zp(u)?(u=(l=u).duration,p=l.easing||"easeLinear",g=l.delay||0,a=l.repeat||a||!1,f=l.callback||Zd,o=l.pauseCallback||Zd,s=l.resumeCallback||Zd):(pd(f)&&(g=f,f=null),Rp(p)?(f=p,p="easeLinear"):p=p||"easeLinear");var v=og(c,this),y={fromAttrs:ag(v,this),toAttrs:v,duration:u,easing:p,repeat:a,callback:f,pauseCallback:o,resumeCallback:s,delay:g,startTime:n.getTime(),id:Qd(),onFrame:i,pathFormatted:!1};r.length>0?r=sg(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),Hp(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return Hp(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return Hp(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var a=function(e){var a=i[e],s=a.get("name");if(s){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&n&&ym(a,n))return"break";Bp(s)?Hp(s,(function(e){r.emitDelegateEvent(a,e,t)})):o.emitDelegateEvent(a,s,t)}},o=this,s=0;s<i.length;s++){if("break"===a(s))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=ng(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=ng(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=ng(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),a=ng(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(a),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=ng(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(Em),cg={};function ug(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){ug(e,t)}))}}function hg(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){hg(e,t)}))}}var pg,dg,fg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Hp(o,(function(e){var t=e.getBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=qp(i),t=Xp(i),n=qp(a),r=Xp(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Hp(o,(function(e){var t=e.getCanvasBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=qp(i),t=Xp(i),n=qp(a),r=Xp(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){Hp(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];zp(n)?r=n:r.type=n;var i=cg[r.type];i||(i=wd(r.type),cg[r.type]=i);var a=this.getShapeBase(),o=new a[i](r);return this.add(o),o},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if(Rp(r))n=new r(i||{parent:this});else{var a=r||{},o=this.getGroupBase();n=new o(a)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!xm(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var a=[e,t,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,a=e.length-1;a>=0;a--){var o=e[a];if(xm(o)&&(o.isGroup()?i=o.getShape(t,n,r):o.isHit(t,n)&&(i=o)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),gm(e.getChildren(),t)}(i,e,!1),e.set("parent",this),t&&ug(e,t),r&&hg(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();Hp(t,(function(e,t){return e._INDEX=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return Hp(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return Hp(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(lg),mg=0,gg=0,vg=0,yg=0,xg=0,Eg=0,bg="object"==typeof performance&&performance.now?performance:Date,Cg="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wg(){return xg||(Cg(Tg),xg=bg.now()+Eg)}function Tg(){xg=0}function Sg(){this._call=this._time=this._next=null}function kg(e,t,n){var r=new Sg;return r.restart(e,t,n),r}function _g(){xg=(yg=bg.now())+Eg,mg=gg=0;try{!function(){wg(),++mg;for(var e,t=pg;t;)(e=xg-t._time)>=0&&t._call.call(null,e),t=t._next;--mg}()}finally{mg=0,function(){var e,t,n=pg,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:pg=t);dg=e,Og(r)}(),xg=0}}function Ag(){var e=bg.now(),t=e-yg;t>1e3&&(Eg-=t,yg=e)}function Og(e){mg||(gg&&(gg=clearTimeout(gg)),e-xg>24?(e<1/0&&(gg=setTimeout(_g,e-bg.now()-Eg)),vg&&(vg=clearInterval(vg))):(vg||(yg=bg.now(),vg=setInterval(Ag,1e3)),mg=1,Cg(_g)))}function Ig(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Mg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Sg.prototype=kg.prototype={constructor:Sg,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?wg():+n)+(null==t?0:+t),this._next||dg===this||(dg?dg._next=this:pg=this,dg=this),this._call=e,this._time=n,Og()},stop:function(){this._call&&(this._call=null,this._time=1/0,Og())}};var Ng=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),Fg=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),Lg=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Pg=Math.PI,Rg=Pg/2;function Dg(e){return(1-Math.cos(Pg*e))/2}function Bg(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function zg(e){return((e*=2)<=1?Bg(1-e):2-Bg(e-1))/2}function Hg(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var jg=4/11;function Gg(e){return(e=+e)<jg?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375}var $g=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158),Yg=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158),Ug=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),Vg=2*Math.PI,Wg=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Vg);function i(e){return t*Bg(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*Vg)},i.period=function(n){return e(t,n)},i}(1,.3),Xg=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Vg);function i(e){return 1-t*Bg(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*Vg)},i.period=function(n){return e(t,n)},i}(1,.3),qg=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Vg);function i(e){return((e=2*e-1)<0?t*Bg(-e)*Math.sin((r-e)/n):2-t*Bg(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*Vg)},i.period=function(n){return e(t,n)},i}(1,.3),Kg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:function(e){return+e},easeQuad:Ig,easeQuadIn:function(e){return e*e},easeQuadOut:function(e){return e*(2-e)},easeQuadInOut:Ig,easeCubic:Mg,easeCubicIn:function(e){return e*e*e},easeCubicOut:function(e){return--e*e*e+1},easeCubicInOut:Mg,easePoly:Lg,easePolyIn:Ng,easePolyOut:Fg,easePolyInOut:Lg,easeSin:Dg,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*Rg)},easeSinOut:function(e){return Math.sin(e*Rg)},easeSinInOut:Dg,easeExp:zg,easeExpIn:function(e){return Bg(1-+e)},easeExpOut:function(e){return 1-Bg(e)},easeExpInOut:zg,easeCircle:Hg,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCircleInOut:Hg,easeBounce:Gg,easeBounceIn:function(e){return 1-Gg(1-e)},easeBounceOut:Gg,easeBounceInOut:function(e){return((e*=2)<=1?1-Gg(1-e):Gg(e-1)+1)/2},easeBack:Ug,easeBackIn:$g,easeBackOut:Yg,easeBackInOut:Ug,easeElastic:Xg,easeElasticIn:Wg,easeElasticOut:Xg,easeElasticInOut:qg});function Qg(e){return function(){return e}}function Zg(e){return 1==(e=+e)?Jg:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Qg(isNaN(t)?n:t)}}function Jg(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Qg(isNaN(e)?t:e)}var ev=function e(t){var n=Zg(t);function r(e,t){var r=n((e=ye(e)).r,(t=ye(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=Jg(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function tv(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function nv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function rv(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=uv(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function iv(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function av(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ov(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=uv(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var sv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lv=new RegExp(sv.source,"g");function cv(e,t){var n,r,i,a=sv.lastIndex=lv.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=sv.exec(e))&&(r=lv.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:av(n,r)})),a=lv.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function uv(e,t){var n,r=typeof t;return null==t||"boolean"===r?Qg(t):("number"===r?av:"string"===r?(n=ve(t))?(t=n,ev):cv:t instanceof ve?ev:t instanceof Date?iv:nv(t)?tv:Array.isArray(t)?rv:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?ov:av)(e,t)}var hv=[1,0,0,0,1,0,0,0,1];function pv(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var a=t.duration,o=t.easing;if(n=n-i-t.delay,t.repeat)r=n%a/a,r=Kg[o](r);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=Kg[o](r)}if(t.onFrame){var s=t.onFrame(r);e.attr(s)}else!function(e,t,n){var r={},i=t.fromAttrs,a=t.toAttrs;if(!e.destroyed){var o,s,l,c;for(var u in a)if(!jd(i[u],a[u]))if("path"===u){var h=a[u],p=i[u];h.length>p.length?(h=Hf(a[u]),p=Hf(i[u]),p=um(p,h),p=dm(p,h),t.fromAttrs.path=p,t.toAttrs.path=h):t.pathFormatted||(h=Hf(a[u]),p=Hf(i[u]),p=dm(p,h),t.fromAttrs.path=p,t.toAttrs.path=h,t.pathFormatted=!0),r[u]=[];for(var d=0;d<h.length;d++){for(var f=h[d],m=p[d],g=[],v=0;v<f.length;v++)pd(f[v])&&m&&pd(m[v])?(o=uv(m[v],f[v]),g.push(o(n))):g.push(f[v]);r[u].push(g)}}else if("matrix"===u){var y=(l=i[u]||hv,(nv(c=a[u]||hv)?tv:rv)(l,c))(n);r[u]=y}else["fill","stroke","fillStyle","strokeStyle"].includes(u)&&(s=a[u],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[u]=a[u]:Rp(a[u])||(o=uv(i[u],a[u]),r[u]=o(n));e.attr(r)}}(e,t,r);return!1}var dv=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=kg((function(i){if(r.current=i,r.animators.length>0){for(var a=r.animators.length-1;a>=0;a--)if((e=r.animators[a]).destroyed)r.removeAnimator(a);else{if(!e.isAnimatePaused())for(var o=(t=e.get("animations")).length-1;o>=0;o--)n=t[o],pv(e,n,i)&&(t.splice(o,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(a)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),fv=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function mv(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function gv(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&ym(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var vv=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");Hp(fv,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");Hp(fv,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,a){var o=new mm(e,t);return o.fromShape=i,o.toShape=a,o.x=n.x,o.y=n.y,o.clientX=n.clientX,o.clientY=n.clientY,o.propagationPath.push(r),o},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],a=!1;if(i)i.call(this,n,r,t);else{var o=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(a=!0,o&&this._emitEvent(e,t,n,o,o,null),this._emitEvent(e,t,n,null,o,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(a||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,a);else{var o=this.mousedownPoint;if(o){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=o.clientX-e.clientX,u=o.clientY-e.clientY;l>120||c*c+u*u>40?s&&s.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,e,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,a){var o=this._getEventObj(e,t,n,r,i,a);if(r){o.shape=r,mv(r,e,o);for(var s=r.getParent();s;)s.emitDelegation(e,o),o.propagationStopped||gv(s,e,o),o.propagationPath.push(s),s=s.getParent()}else{mv(this.canvas,e,o)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),yv=Im(),xv=yv&&"firefox"===yv.name,Ev=function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");ed(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new vv({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new dv(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");vm&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");vm&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(xv&&!Dp(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Dp(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(fg),bv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t},t}(fg),Cv=function(e){function t(t){return e.call(this,t)||this}return kp(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,a=e.maxY;if(t){var o=eg(t,[e.minX,e.minY]),s=eg(t,[e.maxX,e.minY]),l=eg(t,[e.minX,e.maxY]),c=eg(t,[e.maxX,e.maxY]);n=Math.min(o[0],s[0],l[0],c[0]),i=Math.max(o[0],s[0],l[0],c[0]),r=Math.min(o[1],s[1],l[1],c[1]),a=Math.max(o[1],s[1],l[1],c[1])}var u=this.attrs;if(u.shadowColor){var h=u.shadowBlur,p=void 0===h?0:h,d=u.shadowOffsetX,f=void 0===d?0:d,m=u.shadowOffsetY,g=void 0===m?0:m,v=n-p+f,y=i+p+f,x=r-p+g,E=a+p+g;n=Math.min(n,v),i=Math.max(i,y),r=Math.min(r,x),a=Math.max(a,E)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],a=(i=this.invertFromMatrix(i))[0],o=i[1],s=this._isInBBox(a,o);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(a,o)){if(this.isInShape(a,o))return!0;if(n&&n.isHit(a,o))return!0;if(r&&r.isHit(a,o))return!0}return!1},t}(lg),wv=new Map;function Tv(e,t){wv.set(e,t)}function Sv(e){return wv.get(e)}function kv(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function _v(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Av(e){return Math.min.apply(null,e)}function Ov(e){return Math.max.apply(null,e)}function Iv(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function Mv(e,t){return Math.abs(e-t)<.001}function Nv(e,t){var n=Av(e),r=Av(t);return{x:n,y:r,width:Ov(e)-n,height:Ov(t)-r}}function Fv(e){return(e+2*Math.PI)%(2*Math.PI)}var Lv={box:function(e,t,n,r){return Nv([e,n],[t,r])},length:function(e,t,n,r){return Iv(e,t,n,r)},pointAt:function(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}},pointDistance:function(e,t,n,r,i,a){var o=(n-e)*(i-e)+(r-t)*(a-t);return o<0?Iv(e,t,i,a):o>(n-e)*(n-e)+(r-t)*(r-t)?Iv(n,r,i,a):this.pointToLine(e,t,n,r,i,a)},pointToLine:function(e,t,n,r,i,a){var o=[n-e,r-t];if(function(e,t){return e[0]===t[0]&&e[1]===t[1]}(o,[0,0]))return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t));var s=[-o[1],o[0]];$m(s,s);var l=[i-e,a-t];return Math.abs(Ym(l,s))},tangentAngle:function(e,t,n,r){return Math.atan2(r-t,n-e)}};function Pv(e,t,n,r,i,a){var o,s=1/0,l=[n,r],c=20;a&&a>200&&(c=a/10);for(var u=1/c,h=u/10,p=0;p<=c;p++){var d=p*u,f=[i.apply(null,e.concat([d])),i.apply(null,t.concat([d]))];(y=Iv(l[0],l[1],f[0],f[1]))<s&&(o=d,s=y)}if(0===o)return{x:e[0],y:t[0]};if(1===o){var m=e.length;return{x:e[m-1],y:t[m-1]}}s=1/0;for(p=0;p<32&&!(h<1e-4);p++){var g=o-h,v=o+h,y=(f=[i.apply(null,e.concat([g])),i.apply(null,t.concat([g]))],Iv(l[0],l[1],f[0],f[1]));if(g>=0&&y<s)o=g,s=y;else{var x=[i.apply(null,e.concat([v])),i.apply(null,t.concat([v]))],E=Iv(l[0],l[1],x[0],x[1]);v<=1&&E<s?(o=v,s=E):h*=.5}}return{x:i.apply(null,e.concat([o])),y:i.apply(null,t.concat([o]))}}function Rv(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function Dv(e,t,n){var r=e+n-2*t;if(Mv(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function Bv(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function zv(e,t,n,r,i,a,o){var s=Rv(e,n,i,o),l=Rv(t,r,a,o),c=Lv.pointAt(e,t,n,r,o),u=Lv.pointAt(n,r,i,a,o);return[[e,t,c.x,c.y,s,l],[s,l,u.x,u.y,i,a]]}function Hv(e,t,n,r,i,a,o){if(0===o)return(Iv(e,t,n,r)+Iv(n,r,i,a)+Iv(e,t,i,a))/2;var s=zv(e,t,n,r,i,a,.5),l=s[0],c=s[1];return l.push(o-1),c.push(o-1),Hv.apply(null,l)+Hv.apply(null,c)}var jv={box:function(e,t,n,r,i,a){var o=Dv(e,n,i)[0],s=Dv(t,r,a)[0],l=[e,i],c=[t,a];return void 0!==o&&l.push(Rv(e,n,i,o)),void 0!==s&&c.push(Rv(t,r,a,s)),Nv(l,c)},length:function(e,t,n,r,i,a){return Hv(e,t,n,r,i,a,3)},nearestPoint:function(e,t,n,r,i,a,o,s){return Pv([e,n,i],[t,r,a],o,s,Rv)},pointDistance:function(e,t,n,r,i,a,o,s){var l=this.nearestPoint(e,t,n,r,i,a,o,s);return Iv(l.x,l.y,o,s)},interpolationAt:Rv,pointAt:function(e,t,n,r,i,a,o){return{x:Rv(e,n,i,o),y:Rv(t,r,a,o)}},divide:function(e,t,n,r,i,a,o){return zv(e,t,n,r,i,a,o)},tangentAngle:function(e,t,n,r,i,a,o){var s=Bv(e,n,i,o),l=Bv(t,r,a,o);return Fv(Math.atan2(l,s))}};function Gv(e,t,n,r,i){var a=1-i;return a*a*a*e+3*t*i*a*a+3*n*i*i*a+r*i*i*i}function $v(e,t,n,r,i){var a=1-i;return 3*(a*a*(t-e)+2*a*i*(n-t)+i*i*(r-n))}function Yv(e,t,n,r){var i,a,o,s=-3*e+9*t-9*n+3*r,l=6*e-12*t+6*n,c=3*t-3*e,u=[];if(Mv(s,0))Mv(l,0)||(i=-c/l)>=0&&i<=1&&u.push(i);else{var h=l*l-4*s*c;Mv(h,0)?u.push(-l/(2*s)):h>0&&(a=(-l-(o=Math.sqrt(h)))/(2*s),(i=(-l+o)/(2*s))>=0&&i<=1&&u.push(i),a>=0&&a<=1&&u.push(a))}return u}function Uv(e,t,n,r,i,a,o,s,l){var c=Gv(e,n,i,o,l),u=Gv(t,r,a,s,l),h=Lv.pointAt(e,t,n,r,l),p=Lv.pointAt(n,r,i,a,l),d=Lv.pointAt(i,a,o,s,l),f=Lv.pointAt(h.x,h.y,p.x,p.y,l),m=Lv.pointAt(p.x,p.y,d.x,d.y,l);return[[e,t,h.x,h.y,f.x,f.y,c,u],[c,u,m.x,m.y,d.x,d.y,o,s]]}function Vv(e,t,n,r,i,a,o,s,l){if(0===l)return function(e,t){for(var n=0,r=e.length,i=0;i<r;i++)n+=Iv(e[i],t[i],e[(i+1)%r],t[(i+1)%r]);return n/2}([e,n,i,o],[t,r,a,s]);var c=Uv(e,t,n,r,i,a,o,s,.5),u=c[0],h=c[1];return u.push(l-1),h.push(l-1),Vv.apply(null,u)+Vv.apply(null,h)}var Wv={extrema:Yv,box:function(e,t,n,r,i,a,o,s){for(var l=[e,o],c=[t,s],u=Yv(e,n,i,o),h=Yv(t,r,a,s),p=0;p<u.length;p++)l.push(Gv(e,n,i,o,u[p]));for(p=0;p<h.length;p++)c.push(Gv(t,r,a,s,h[p]));return Nv(l,c)},length:function(e,t,n,r,i,a,o,s){return Vv(e,t,n,r,i,a,o,s,3)},nearestPoint:function(e,t,n,r,i,a,o,s,l,c,u){return Pv([e,n,i,o],[t,r,a,s],l,c,Gv,u)},pointDistance:function(e,t,n,r,i,a,o,s,l,c,u){var h=this.nearestPoint(e,t,n,r,i,a,o,s,l,c,u);return Iv(h.x,h.y,l,c)},interpolationAt:Gv,pointAt:function(e,t,n,r,i,a,o,s,l){return{x:Gv(e,n,i,o,l),y:Gv(t,r,a,s,l)}},divide:function(e,t,n,r,i,a,o,s,l){return Uv(e,t,n,r,i,a,o,s,l)},tangentAngle:function(e,t,n,r,i,a,o,s,l){var c=$v(e,n,i,o,l),u=$v(t,r,a,s,l);return Fv(Math.atan2(u,c))}};function Xv(e,t,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+e}function qv(e,t,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+t}var Kv=function(e,t,n,r,i,a,o){for(var s=function(e,t,n){return Math.atan(-t/e*Math.tan(n))}(n,r,i),l=1/0,c=-1/0,u=[a,o],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var p=s+h;a<o?a<p&&p<o&&u.push(p):o<p&&p<a&&u.push(p)}for(h=0;h<u.length;h++){var d=Xv(e,0,n,r,i,u[h]);d<l&&(l=d),d>c&&(c=d)}var f=function(e,t,n){return Math.atan(t/(e*Math.tan(n)))}(n,r,i),m=1/0,g=-1/0,v=[a,o];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var y=f+h;a<o?a<y&&y<o&&v.push(y):o<y&&y<a&&v.push(y)}for(h=0;h<v.length;h++){var x=qv(0,t,n,r,i,v[h]);x<m&&(m=x),x>g&&(g=x)}return{x:l,y:m,width:c-l,height:g-m}};var Qv=function(e){return function(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=Iv(r[0],r[1],i[0],i[1])}return t}(e)};function Zv(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function Jv(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=Zv(t,n.getCanvasBBox())),r&&(t=Zv(t,r.getCanvasBBox())),t}var ey=null;function ty(){if(!ey){var e=document.createElement("canvas");e.width=1,e.height=1,ey=e.getContext("2d")}return ey}function ny(e,t,n){var r=1;return ed(e)&&(r=e.split("\n").length),r>1?t*r+function(e,t){return t?t-e:.14*e}(t,n)*(r-1):t}function ry(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}var iy=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,ay=/[^\s\,]+/gi;function oy(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l,c,u,h=[],p=!!r;if(p){o=r[0],s=r[1];for(var d=0,f=e.length;d<f;d+=1)o=Bm([0,0],o,g=e[d]),s=zm([0,0],s,g)}d=0;for(var m=e.length;d<m;d+=1){var g=e[d];if(0!==d||n)if(d!==m-1||n){i=e[[d?d-1:m-1,d-1][n?0:1]],a=e[n?(d+1)%m:d+1];var v=[0,0];v=Hm(v=Vm(v,a,i),v,t);var y=jm(g,i),x=jm(g,a),E=y+x;0!==E&&(y/=E,x/=E);var b=Hm([0,0],v,-y),C=Hm([0,0],v,x);c=Rm([0,0],g,b),l=Bm([0,0],l=Rm([0,0],g,C),zm([0,0],a,g)),l=zm([0,0],l,Bm([0,0],a,g)),c=Bm([0,0],c=Rm([0,0],g,b=Hm([0,0],b=Vm([0,0],l,g),-y/x)),zm([0,0],i,g)),c=zm([0,0],c,Bm([0,0],i,g)),l=Rm([0,0],g,C=Hm([0,0],C=Vm([0,0],g,c),x/y)),p&&(c=Bm([0,0],c=zm([0,0],c,o),s),l=Bm([0,0],l=zm([0,0],l,o),s)),h.push(u),h.push(c),u=l}else c=g,h.push(u),h.push(c);else u=g}return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a+=1)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}var sy="\t\n\v\f\r   ᠎             　\u2028\u2029",ly=new RegExp("([a-z])["+sy+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+sy+"]*,?["+sy+"]*)+)","ig"),cy=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+sy+"]*,?["+sy+"]*","ig");function uy(e){if(!e)return null;if(Bp(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(ly,(function(e,r,i){var a=[],o=r.toLowerCase();if(i.replace(cy,(function(e,t){t&&a.push(+t)})),"m"===o&&a.length>2&&(n.push([r].concat(a.splice(0,2))),o="l",r="m"===r?"l":"L"),"o"===o&&1===a.length&&n.push([r,a[0]]),"r"===o)n.push([r].concat(a));else for(;a.length>=t[o]&&(n.push([r].concat(a.splice(0,t[o]))),t[o]););return""})),n}var hy=/[a-z]/;function py(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function dy(e){var t=uy(e);if(!t||!t.length)return[["M",0,0]];for(var n=!1,r=0;r<t.length;r++){var i=t[r][0];if(hy.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return t;var a=[],o=0,s=0,l=0,c=0,u=0,h=t[0];"M"!==h[0]&&"m"!==h[0]||(l=o=+h[1],c=s=+h[2],u++,a[0]=["M",o,s]);r=u;for(var p=t.length;r<p;r++){var d=t[r],f=a[r-1],m=[],g=(i=d[0]).toUpperCase();if(i!==g)switch(m[0]=g,g){case"A":m[1]=d[1],m[2]=d[2],m[3]=d[3],m[4]=d[4],m[5]=d[5],m[6]=+d[6]+o,m[7]=+d[7]+s;break;case"V":m[1]=+d[1]+s;break;case"H":m[1]=+d[1]+o;break;case"M":l=+d[1]+o,c=+d[2]+s,m[1]=l,m[2]=c;break;default:for(var v=1,y=d.length;v<y;v++)m[v]=+d[v]+(v%2?o:s)}else m=t[r];switch(g){case"Z":o=+l,s=+c;break;case"H":m=["L",o=m[1],s];break;case"V":m=["L",o,s=m[1]];break;case"T":o=m[1],s=m[2];var x=py([f[1],f[2]],[f[3],f[4]]);m=["Q",x[0],x[1],o,s];break;case"S":o=m[m.length-2],s=m[m.length-1];var E=f.length,b=py([f[E-4],f[E-3]],[f[E-2],f[E-1]]);m=["C",b[0],b[1],m[1],m[2],o,s];break;case"M":l=m[m.length-2],c=m[m.length-1];break;default:o=m[m.length-2],s=m[m.length-1]}a.push(m)}return a}function fy(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function my(e,t){return fy(e)*fy(t)?(e[0]*t[0]+e[1]*t[1])/(fy(e)*fy(t)):1}function gy(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(my(e,t))}function vy(e,t){return e[0]===t[0]&&e[1]===t[1]}function yy(e,t){var n=t[1],r=t[2],i=md(vd(t[3]),2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],c=t[6],u=t[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=h*h/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var f=n*n*(p*p)+r*r*(h*h),m=f?Math.sqrt((n*n*(r*r)-f)/f):1;a===o&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*p/r:0,v=n?m*-r*h/n:0,y=(s+c)/2+Math.cos(i)*g-Math.sin(i)*v,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*v,E=[(h-g)/n,(p-v)/r],b=[(-1*h-g)/n,(-1*p-v)/r],C=gy([1,0],E),w=gy(E,b);return my(E,b)<=-1&&(w=Math.PI),my(E,b)>=1&&(w=0),0===o&&w>0&&(w-=2*Math.PI),1===o&&w<0&&(w+=2*Math.PI),{cx:y,cy:x,rx:vy(e,[c,u])?0:n,ry:vy(e,[c,u])?0:r,startAngle:C,endAngle:C+w,xRotation:i,arcFlag:a,sweepFlag:o}}function xy(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function Ey(e){for(var t=[],n=null,r=null,i=null,a=0,o=(e=function(e){var t=e||[];return Bp(t)?t:ed(t)?(Hp(t=t.match(iy),(function(e,n){if((e=e.match(ay))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}Hp(e,(function(t,n){isNaN(t)||(e[n]=+t)})),t[n]=e})),t):void 0}(e)).length,s=0;s<o;s++){var l=e[s];r=e[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var h=yy(n,l);u.arcParams=h}if("Z"===c)n=i,r=e[a+1];else{var p=l.length;n=[l[p-2],l[p-1]]}r&&"Z"===r[0]&&(r=e[a],t[a]&&(t[a].prePoint=n)),u.currentPoint=n,t[a]&&vy(n,t[a].currentPoint)&&(t[a].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var f=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]];else if("Q"===c){var m=[l[1],l[2]];u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===c){m=xy((y=t[s-1]).currentPoint,f);"Q"===y.command?(u.command="Q",u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]):(u.command="TL",u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]])}else if("C"===c){var g=[l[1],l[2]],v=[l[3],l[4]];u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[g[0]-v[0],g[1]-v[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[v[0]-g[0],v[1]-g[1]])}else if("S"===c){var y;g=xy((y=t[s-1]).currentPoint,f),v=[l[1],l[2]];"C"===y.command?(u.command="C",u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]):(u.command="SQ",u.startTangent=[f[0]-v[0],f[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]])}else if("A"===c){var x=.001,E=u.arcParams||{},b=E.cx,C=void 0===b?0:b,w=E.cy,T=void 0===w?0:w,S=E.rx,k=void 0===S?0:S,_=E.ry,A=void 0===_?0:_,O=E.sweepFlag,I=void 0===O?0:O,M=E.startAngle,N=void 0===M?0:M,F=E.endAngle,L=void 0===F?0:F;0===I&&(x*=-1);var P=k*Math.cos(N-x)+C,R=A*Math.sin(N-x)+T;u.startTangent=[P-i[0],R-i[1]];var D=k*Math.cos(N+L+x)+C,B=A*Math.sin(N+L-x)+T;u.endTangent=[f[0]-D,f[1]-B]}t.push(u)}return t}var by=function(e,t,n){return e>=t&&e<=n};function Cy(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function wy(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function Ty(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(wy(o,s,[t,n]))return!0;Cy(o[1]-n)>0!=Cy(s[1]-n)>0&&Cy(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Sy(e){for(var t=[],n=e.length,r=0;r<n-1;r++){var i=e[r],a=e[r+1];t.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(t.length>1){var o=e[0],s=e[n-1];t.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return t}function ky(e,t){var n=!1;return Hp(e,(function(e){if(function(e,t,n,r){var i=n.x-e.x,a=n.y-e.y,o=t.x-e.x,s=t.y-e.y,l=r.x-n.x,c=r.y-n.y,u=o*c-s*l,h=null;if(u*u>.001*(o*o+s*s)*(l*l+c*c)){var p=(i*c-a*l)/u,d=(i*s-a*o)/u;by(p,0,1)&&by(d,0,1)&&(h={x:e.x+p*o,y:e.y+p*s})}return h}(e.from,e.to,t.from,t.to))return n=!0,!1})),n}function _y(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function Ay(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||0===Math.sin(l)||dd(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(u-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}Tv("rect",kv),Tv("image",kv),Tv("circle",_v),Tv("marker",_v),Tv("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}var o=Nv(n,r),s=o.x,l=o.y,c={minX:s,minY:l,maxX:s+o.width,maxY:l+o.height};return{x:(c=Jv(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),Tv("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}return Nv(n,r)})),Tv("text",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=ry(t));var l,c=function(e,t){var n=ty(),r=0;return Dp(e)||""===e||(n.save(),n.font=t,ed(e)&&e.includes("\n")?Hp(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width,n.restore()),r}(i,s);if(c){var u=t.textAlign,h=t.textBaseline,p=ny(i,a,o),d={x:n,y:r-p};u&&("end"===u||"right"===u?d.x-=c:"center"===u&&(d.x-=c/2)),h&&("top"===h?d.y+=p:"middle"===h&&(d.y+=p/2)),l={x:d.x,y:d.y,width:c,height:p}}else l={x:n,y:r,width:0,height:0};return l})),Tv("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=(m=e[a]).currentPoint,s=m.params,l=m.prePoint,c=void 0;switch(m.command){case"Q":c=jv.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":c=Wv.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var u=m.arcParams;c=Kv(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(o[0]),r.push(o[1])}c&&(m.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&i.push(m)}n=n.filter((function(e){return!Number.isNaN(e)})),r=r.filter((function(e){return!Number.isNaN(e)}));var h=qp(n),p=qp(r),d=Xp(n),f=Xp(r);if(0===i.length)return{x:h,y:p,width:d-h,height:f-p};for(a=0;a<i.length;a++){var m;(o=(m=i[a]).currentPoint)[0]===h?h-=Ay(m,t).xExtra:o[0]===d&&(d+=Ay(m,t).xExtra),o[1]===p?p-=Ay(m,t).yExtra:o[1]===f&&(f+=Ay(m,t).yExtra)}return{x:h,y:p,width:d-h,height:f-p}}(e.get("segments")||Ey(n),r),a=i.x,o=i.y,s={minX:a,minY:o,maxX:a+i.width,maxY:o+i.height};return{x:(s=Jv(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Tv("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,a),maxY:Math.max(r,a)};return{x:(o=Jv(e,o)).minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}})),Tv("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;return{x:n-i,y:r-a,width:2*i,height:2*a}}));var Oy=function(){function e(e){var t=e.xField,n=e.yField,r=e.adjustNames,i=void 0===r?["x","y"]:r;this.adjustNames=i,this.xField=t,this.yField=n}return e.prototype.isAdjust=function(e){return this.adjustNames.indexOf(e)>=0},e.prototype.getAdjustRange=function(e,t,n){var r,i,a=this.yField,o=n.indexOf(t),s=n.length;return!a&&this.isAdjust("y")?(r=0,i=1):s>1?(r=n[0===o?0:o-1],i=n[o===s-1?s-1:o+1],0!==o?r+=(t-r)/2:r-=(i-t)/2,o!==s-1?i-=(i-t)/2:i+=(t-n[s-2])/2):(r=0===t?0:t-.5,i=0===t?1:t+.5),{pre:r,next:i}},e.prototype.adjustData=function(e,t){var n=this,r=this.getDimValues(t);Hp(e,(function(e,t){Hp(r,(function(r,i){n.adjustDim(i,r,e,t)}))}))},e.prototype.groupData=function(e,t){return Hp(e,(function(e){void 0===e[t]&&(e[t]=0)})),ld(e,t)},e.prototype.adjustDim=function(e,t,n,r){},e.prototype.getDimValues=function(e){var t=this.xField,n=this.yField,r={},i=[];if(t&&this.isAdjust("x")&&i.push(t),n&&this.isAdjust("y")&&i.push(n),i.forEach((function(t){r[t]=nd(e,t).sort((function(e,t){return e-t}))})),!n&&this.isAdjust("y")){r.y=[0,1]}return r},e}(),Iy={},My=function(e){return Iy[e.toLowerCase()]},Ny=function(e,t){if(My(e))throw new Error("Adjust type '"+e+"' existed.");Iy[e.toLowerCase()]=t},Fy=function(e,t){return(Fy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Ly(e,t){function n(){this.constructor=e}Fy(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Py=function(){return(Py=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ry=function(e){function t(t){var n=e.call(this,t)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var r=t.marginRatio,i=void 0===r?.5:r,a=t.dodgeRatio,o=void 0===a?.5:a,s=t.dodgeBy,l=t.intervalPadding,c=t.dodgePadding,u=t.xDimensionLength,h=t.groupNum,p=t.defaultSize,d=t.maxColumnWidth,f=t.minColumnWidth,m=t.columnWidthRatio;return n.marginRatio=i,n.dodgeRatio=o,n.dodgeBy=s,n.intervalPadding=l,n.dodgePadding=c,n.xDimensionLegenth=u,n.groupNum=h,n.defaultSize=p,n.maxColumnWidth=d,n.minColumnWidth=f,n.columnWidthRatio=m,n}return Ly(t,e),t.prototype.process=function(e){var t=Nd(e),n=Wp(t),r=this.dodgeBy,i=r?function(e,t){if(!t)return[e];var n=cd(e,t),r=[];for(var i in n)r.push(n[i]);return r}(n,r):t;return this.cacheMap={},this.adjustDataArray=i,this.mergeData=n,this.adjustData(i,n),this.adjustDataArray=[],this.mergeData=[],t},t.prototype.adjustDim=function(e,t,n,r){var i=this,a=this.getDistribution(e);return Hp(this.groupData(n,e),(function(n,o){var s;s=1===t.length?{pre:t[0]-1,next:t[0]+1}:i.getAdjustRange(e,parseFloat(o),t),Hp(n,(function(t){var n=t[e],o=a[n],l=o.indexOf(r);t[e]=i.getDodgeOffset(s,l,o.length)}))})),[]},t.prototype.getDodgeOffset=function(e,t,n){var r,i=this,a=i.dodgeRatio,o=i.marginRatio,s=i.intervalPadding,l=i.dodgePadding,c=e.pre,u=e.next,h=u-c;if(!Dp(s)&&Dp(l)&&s>=0)r=c+this.getIntervalOnlyOffset(n,t);else if(!Dp(l)&&Dp(s)&&l>=0){r=c+this.getDodgeOnlyOffset(n,t)}else if(!Dp(s)&&!Dp(l)&&s>=0&&l>=0){r=c+this.getIntervalAndDodgeOffset(n,t)}else{var p=h*a/n,d=o*p;r=(c+u)/2+(.5*(h-n*p-(n-1)*d)+((t+1)*p+t*d)-.5*p-.5*h)}return r},t.prototype.getIntervalOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.intervalPadding,a=n.xDimensionLegenth,o=n.groupNum,s=n.dodgeRatio,l=n.maxColumnWidth,c=n.minColumnWidth,u=n.columnWidthRatio,h=i/a,p=(1-(o-1)*h)/o*s/(e-1),d=((1-h*(o-1))/o-p*(e-1))/e;if(d=Dp(u)?d:1/o/e*u,!Dp(l)){var f=l/a;d=Math.min(d,f)}if(!Dp(c)){var m=c/a;d=Math.max(d,m)}return((.5+t)*(d=r?r/a:d)+t*(p=((1-(o-1)*h)/o-e*d)/(e-1))+.5*h)*o-h/2},t.prototype.getDodgeOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,s=n.marginRatio,l=n.maxColumnWidth,c=n.minColumnWidth,u=n.columnWidthRatio,h=i/a,p=1*s/(o-1),d=((1-p*(o-1))/o-h*(e-1))/e;if(d=u?1/o/e*u:d,!Dp(l)){var f=l/a;d=Math.min(d,f)}if(!Dp(c)){var m=c/a;d=Math.max(d,m)}return((.5+t)*(d=r?r/a:d)+t*h+.5*(p=(1-(d*e+h*(e-1))*o)/(o-1)))*o-p/2},t.prototype.getIntervalAndDodgeOffset=function(e,t){var n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,s=r/a,l=i/a;return((.5+t)*(((1-s*(o-1))/o-l*(e-1))/e)+t*l+.5*s)*o-s/2},t.prototype.getDistribution=function(e){var t=this.adjustDataArray,n=this.cacheMap,r=n[e];return r||(r={},Hp(t,(function(t,n){var i=nd(t,e);i.length||i.push(0),Hp(i,(function(e){r[e]||(r[e]=[]),r[e].push(n)}))})),n[e]=r),r},t}(Oy);var Dy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ly(t,e),t.prototype.process=function(e){var t=Nd(e),n=Wp(t);return this.adjustData(t,n),t},t.prototype.adjustDim=function(e,t,n){var r=this;return Hp(this.groupData(n,e),(function(n,i){return r.adjustGroup(n,e,parseFloat(i),t)}))},t.prototype.getAdjustOffset=function(e){var t,n=e.pre,r=e.next,i=.05*(r-n);return(r-i-(t=n+i))*Math.random()+t},t.prototype.adjustGroup=function(e,t,n,r){var i=this,a=this.getAdjustRange(t,n,r);return Hp(e,(function(e){e[t]=i.getAdjustOffset(a)})),e},t}(Oy),By=lf,zy=function(e){function t(t){var n=e.call(this,t)||this,r=t.adjustNames,i=void 0===r?["y"]:r,a=t.height,o=void 0===a?NaN:a,s=t.size,l=void 0===s?10:s,c=t.reverseOrder,u=void 0!==c&&c;return n.adjustNames=i,n.height=o,n.size=l,n.reverseOrder=u,n}return Ly(t,e),t.prototype.process=function(e){var t=this.yField,n=this.reverseOrder,r=t?this.processStack(e):this.processOneDimStack(e);return n?this.reverse(r):r},t.prototype.reverse=function(e){return e.slice(0).reverse()},t.prototype.processStack=function(e){var t=this,n=t.xField,r=t.yField,i=t.reverseOrder?this.reverse(e):e,a=new By,o=new By;return i.map((function(e){return e.map((function(e){var t,i=Yd(e,n,0),s=Yd(e,[r]),l=i.toString();if(s=Bp(s)?s[1]:s,!Dp(s)){var c=s>=0?a:o;c.has(l)||c.set(l,0);var u=c.get(l),h=s+u;return c.set(l,h),Py(Py({},e),((t={})[r]=[u,h],t))}return e}))}))},t.prototype.processOneDimStack=function(e){var t=this,n=this,r=n.xField,i=n.height,a=n.reverseOrder,o=a?this.reverse(e):e,s=new By;return o.map((function(e){return e.map((function(e){var n,a=t.size,o=e[r],l=2*a/i;s.has(o)||s.set(o,l/2);var c=s.get(o);return s.set(o,c+l),Py(Py({},e),((n={}).y=c,n))}))}))},t}(Oy),Hy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ly(t,e),t.prototype.process=function(e){var t=Wp(e),n=this.xField,r=this.yField,i=this.getXValuesMaxMap(t),a=Math.max.apply(Math,Object.keys(i).map((function(e){return i[e]})));return Gd(e,(function(e){return Gd(e,(function(e){var t,o,s=e[r],l=e[n];if(Bp(s)){var c=(a-i[l])/2;return Py(Py({},e),((t={})[r]=Gd(s,(function(e){return c+e})),t))}var u=(a-s)/2;return Py(Py({},e),((o={})[r]=[u,s+u],o))}))}))},t.prototype.getXValuesMaxMap=function(e){var t=this,n=this.xField,r=this.yField;return function(e,t){void 0===t&&(t=$d);var n={};return zp(e)&&!Dp(e)&&Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n}(ld(e,(function(e){return e[n]})),(function(e){return t.getDimMaxValue(e,r)}))},t.prototype.getDimMaxValue=function(e,t){var n=Gd(e,(function(e){return Yd(e,t,[])})),r=Wp(n);return Math.max.apply(Math,r)},t}(Oy);Ny("Dodge",Ry),Ny("Jitter",Dy),Ny("Stack",zy),Ny("Symmetric",Hy);var jy=function(e,t){return ed(t)?t:e.invert(e.scale(t))},Gy=function(){function e(e){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(e)}return e.prototype.mapping=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.map((function(t,n){return e._toOriginParam(t,e.scales[n])}));return this.callback.apply(this,r)},e.prototype.getLinearValue=function(e){var t=this.values.length-1,n=Math.floor(t*e),r=t*e-n,i=this.values[n];return i+((n===t?i:this.values[n+1])-i)*r},e.prototype.getNames=function(){for(var e=this.scales,t=this.names,n=Math.min(e.length,t.length),r=[],i=0;i<n;i+=1)r.push(t[i]);return r},e.prototype.getFields=function(){return this.scales.map((function(e){return e.field}))},e.prototype.getScale=function(e){return this.scales[this.names.indexOf(e)]},e.prototype.defaultCallback=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this.values:t.map((function(t,n){var r=e.scales[n];return"identity"===r.type?r.values[0]:e._getAttributeValue(r,t)}))},e.prototype._parseCfg=function(e){var t=this,n=e.type,r=void 0===n?"base":n,i=e.names,a=void 0===i?[]:i,o=e.scales,s=void 0===o?[]:o,l=e.values,c=void 0===l?[]:l,u=e.callback;this.type=r,this.scales=s,this.values=c,this.names=a,this.callback=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(u){var r=u.apply(void 0,e);if(!Dp(r))return[r]}return t.defaultCallback.apply(t,e)}},e.prototype._getAttributeValue=function(e,t){if(e.isCategory&&!this.linear){var n=e.translate(t);return this.values[n%this.values.length]}var r=e.scale(t);return this.getLinearValue(r)},e.prototype._toOriginParam=function(e,t){return t.isLinear?e:Bp(e)?e.map((function(e){return jy(t,e)})):jy(t,e)},e}(),$y=function(e,t){return($y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Yy(e,t){function n(){this.constructor=e}$y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Uy=/rgba?\(([\s.,0-9]+)\)/,Vy=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Wy=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Xy=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,qy=function(e,t,n,r){return e[r]+(t[r]-e[r])*n};function Ky(e){return"#"+Jy(e[0])+Jy(e[1])+Jy(e[2])}var Qy,Zy=function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]},Jy=function(e){var t=Math.round(e).toString(16);return 1===t.length?"0"+t:t},ex=function(e){if("#"===e[0]&&7===e.length)return e;Qy||(Qy=function(){var e=document.createElement("i");return e.title="Web Colour Picker",e.style.display="none",document.body.appendChild(e),e}()),Qy.style.color=e;var t=document.defaultView.getComputedStyle(Qy,"").getPropertyValue("color");return t=Ky(Uy.exec(t)[1].split(/\s*,\s*/).map((function(e){return Number(e)})))},tx={rgb2arr:Zy,gradient:function(e){var t=ed(e)?e.split("-"):e,n=Gd(t,(function(e){return Zy(-1===e.indexOf("#")?ex(e):e)}));return function(e){return function(e,t){var n=isNaN(Number(t))||t<0?0:t>1?1:Number(t),r=e.length-1,i=Math.floor(r*n),a=r*n-i,o=e[i],s=i===r?o:e[i+1];return Ky([qy(o,s,a,0),qy(o,s,a,1),qy(o,s,a,2)])}(n,e)}},toRGB:Ld(ex),toCSSGradient:function(e){if(/^[r,R,L,l]{1}[\s]*\(/.test(e)){var t,n=void 0;if("l"===e[0]){var r=+(i=Vy.exec(e))[1]+90;n=i[2],t="linear-gradient("+r+"deg, "}else if("r"===e[0]){var i;t="radial-gradient(",n=(i=Wy.exec(e))[4]}var a=n.match(Xy);return Hp(a,(function(e,n){var r=e.split(":");t+=r[1]+" "+100*r[0]+"%",n!==a.length-1&&(t+=", ")})),t+=")"}return e}},nx=function(e){function t(t){var n=e.call(this,t)||this;return n.type="color",n.names=["color"],ed(n.values)&&(n.linear=!0),n.gradient=tx.gradient(n.values),n}return Yy(t,e),t.prototype.getLinearValue=function(e){return this.gradient(e)},t}(Gy),rx=function(e){function t(t){var n=e.call(this,t)||this;return n.type="opacity",n.names=["opacity"],n}return Yy(t,e),t}(Gy),ix=function(e){function t(t){var n=e.call(this,t)||this;return n.names=["x","y"],n.type="position",n}return Yy(t,e),t.prototype.mapping=function(e,t){var n=this.scales,r=n[0],i=n[1];return Dp(e)||Dp(t)?[]:[Bp(e)?e.map((function(e){return r.scale(e)})):r.scale(e),Bp(t)?t.map((function(e){return i.scale(e)})):i.scale(t)]},t}(Gy),ax=function(e){function t(t){var n=e.call(this,t)||this;return n.type="shape",n.names=["shape"],n}return Yy(t,e),t.prototype.getLinearValue=function(e){var t=Math.round((this.values.length-1)*e);return this.values[t]},t}(Gy),ox=function(e){function t(t){var n=e.call(this,t)||this;return n.type="size",n.names=["size"],n}return Yy(t,e),t}(Gy),sx={};function lx(e,t){sx[e]=t}var cx=function(){function e(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return e.prototype.translate=function(e){return e},e.prototype.change=function(e){Md(this.__cfg__,e),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var e=this;return Gd(this.ticks,(function(t,n){return zp(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}}))},e.prototype.getText=function(e,t){var n=this.formatter,r=n?n(e,t):e;return Dp(r)||!Rp(r.toString)?"":r.toString()},e.prototype.getConfig=function(e){return this.__cfg__[e]},e.prototype.init=function(){Md(this,this.__cfg__),this.setDomain(),zd(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(ed(e)){var n=sx[e];if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else Rp(e)&&(t=e(this));return t},e.prototype.rangeMin=function(){return this.range[0]},e.prototype.rangeMax=function(){return this.range[1]},e.prototype.calcPercent=function(e,t,n){return pd(e)?(e-t)/(n-t):NaN},e.prototype.calcValue=function(e,t,n){return t+e*(n-t)},e}(),ux=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return kp(t,e),t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var t=this.translateIndexMap.get(e);return void 0===t&&(t=pd(e)?e:NaN),t},t.prototype.scale=function(e){var t=this.translate(e),n=this.calcPercent(t,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var t=this.max-this.min,n=this.calcPercent(e,this.rangeMin(),this.rangeMax()),r=Math.round(t*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},t.prototype.getText=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t;return pd(t)&&!this.values.includes(t)&&(i=this.values[i]),e.prototype.getText.apply(this,Ip([i],n,!1))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(Dp(this.getConfig("min"))&&(this.min=0),Dp(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(cx),hx=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,px="[^\\s]+",dx=/\[([^]*?)\]/gm;function fx(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var mx=function(e){return function(t,n){var r=n[e].map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase());return r>-1?r:null}};function gx(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];for(var o in a)e[o]=a[o]}return e}var vx=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],yx=["January","February","March","April","May","June","July","August","September","October","November","December"],xx=fx(yx,3),Ex={dayNamesShort:fx(vx,3),dayNames:vx,monthNamesShort:xx,monthNames:yx,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},bx=gx({},Ex),Cx=function(e){return bx=gx(bx,e)},wx=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Tx=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},Sx={D:function(e){return String(e.getDate())},DD:function(e){return Tx(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Tx(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Tx(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return Tx(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Tx(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Tx(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Tx(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Tx(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Tx(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Tx(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Tx(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Tx(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Tx(Math.floor(Math.abs(t)/60),2)+":"+Tx(Math.abs(t)%60,2)}},kx=function(e){return+e-1},_x=[null,"[1-9]\\d?"],Ax=[null,px],Ox=["isPm",px,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],Ix=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?n:-n}return 0}],Mx={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+px,function(e){return parseInt(e,10)}],M:["month","[1-9]\\d?",kx],MM:["month","\\d\\d",kx],YY:["year","\\d\\d",function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+e>68?t-1:t)+e)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond","\\d\\d",function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:_x,dd:_x,ddd:Ax,dddd:Ax,MMM:["month",px,mx("monthNamesShort")],MMMM:["month",px,mx("monthNames")],a:Ox,A:Ox,ZZ:Ix,Z:Ix},Nx={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Fx=function(e){return gx(Nx,e)},Lx=function(e,t,n){if(void 0===t&&(t=Nx.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var r=[];t=(t=Nx[t]||t).replace(dx,(function(e,t){return r.push(t),"@@@"}));var i=gx(gx({},bx),n);return(t=t.replace(hx,(function(t){return Sx[t](e,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function Px(e,t,n){if(void 0===n&&(n={}),"string"!=typeof t)throw new Error("Invalid format in fecha parse");if(t=Nx[t]||t,e.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],a=[],o=t.replace(dx,(function(e,t){return a.push(wx(t)),"@@@"})),s={},l={};o=wx(o).replace(hx,(function(e){var t=Mx[e],n=t[0],r=t[1],a=t[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,a&&(l[a]=!0),i.push(t),"("+r+")"})),Object.keys(l).forEach((function(e){if(!s[e])throw new Error("Invalid format. "+e+" is required in specified format")})),o=o.replace(/@@@/g,(function(){return a.shift()}));var c=e.match(new RegExp(o,"i"));if(!c)return null;for(var u=gx(gx({},bx),n),h=1;h<c.length;h++){var p=i[h-1],d=p[0],f=p[2],m=f?f(c[h],u):+c[h];if(null==m)return null;r[d]=m}1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0);for(var g=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond),v=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(h=0,v.length);h<y;h++)if(s[v[h][0]]&&r[v[h][0]]!==g[v[h][1]]())return null;return null==r.timezoneOffset?g:new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond))}var Rx={format:Lx,parse:Px,defaultI18n:Ex,setGlobalDateI18n:Cx,setGlobalDateMasks:Fx},Dx=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Rx,assign:gx,format:Lx,parse:Px,defaultI18n:Ex,setGlobalDateI18n:Cx,setGlobalDateMasks:Fx});function Bx(e,t){return(Dx.format||Rx.format)(e,t)}function zx(e){return ed(e)&&(e=e.indexOf("T")>0?new Date(e).getTime():new Date(e.replace(/-/gi,"/")).getTime()),kd(e)&&(e=e.getTime()),e}var Hx=36e5,jx=24*Hx,Gx=31*jx,$x=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",Hx],["HH",6*Hx],["HH",12*Hx],["YYYY-MM-DD",jx],["YYYY-MM-DD",4*jx],["YYYY-WW",7*jx],["YYYY-MM",Gx],["YYYY-MM",4*Gx],["YYYY-MM",6*Gx],["YYYY",380*jx]];function Yx(e,t,n){var r,i=(r=function(e){return e[1]},function(e,t,n,i){for(var a=Dp(n)?0:n,o=Dp(i)?e.length:i;a<o;){var s=a+o>>>1;r(e[s])>t?o=s:a=s+1}return a})($x,(t-e)/n)-1,a=$x[i];return i<0?a=$x[0]:i>=$x.length&&(a=id($x)),a}var Ux=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="timeCat",t}return kp(t,e),t.prototype.translate=function(e){e=zx(e);var t=this.values.indexOf(e);return-1===t&&(t=pd(e)&&e<this.values.length?e:NaN),t},t.prototype.getText=function(e,t){var n=this.translate(e);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,t):Bx(r,this.mask)}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var t=this.values;Hp(t,(function(e,n){t[n]=zx(e)})),t.sort((function(e,t){return e-t})),e.prototype.setDomain.call(this)},t}(ux),Vx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return kp(t,e),t.prototype.scale=function(e){if(Dp(e))return NaN;var t=this.rangeMin(),n=this.rangeMax();return this.max===this.min?t:t+this.getScalePercent(e)*(n-t)},t.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,n=rd(t),r=id(t);n<this.min&&(this.min=n),r>this.max&&(this.max=r),Dp(this.minLimit)||(this.min=n),Dp(this.maxLimit)||(this.max=r)},t.prototype.setDomain=function(){var e=Kp(this.values),t=e.min,n=e.max;Dp(this.min)&&(this.min=t),Dp(this.max)&&(this.max=n),this.min>this.max&&(this.min=t,this.max=n)},t.prototype.calculateTicks=function(){var t=this,n=e.prototype.calculateTicks.call(this);return this.nice||(n=Fp(n,(function(e){return e>=t.min&&e<=t.max}))),n},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;return(e-n)/(t-n)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(cx),Wx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return kp(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e);return this.min+t*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(Vx);function Xx(e,t){var n=Math.E;return t>=0?Math.pow(n,Math.log(t)/e):-1*Math.pow(n,Math.log(-t)/e)}function qx(e,t){return 1===e?1:Math.log(t)/Math.log(e)}function Kx(e,t,n){Dp(n)&&(n=Math.max.apply(null,e));var r=n;return Hp(e,(function(e){e>0&&e<r&&(r=e)})),r===n&&(r=n/t),r>1&&(r=1),r}var Qx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t}return kp(t,e),t.prototype.invert=function(e){var t,n=this.base,r=qx(n,this.max),i=this.rangeMin(),a=this.rangeMax()-i,o=this.positiveMin;if(o){if(0===e)return 0;var s=1/(r-(t=qx(n,o/n)))*a;if(e<s)return e/s*o}else t=qx(n,this.min);var l=(e-i)/a*(r-t)+t;return Math.pow(n,l)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){e.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=Kx(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;if(e<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),e<i?e/i/(qx(r,t)-qx(r,n)):(qx(r,e)-qx(r,n))/(qx(r,t)-qx(r,n))},t}(Vx),Zx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pow",t}return kp(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e),n=this.exponent,r=Xx(n,this.max),i=Xx(n,this.min),a=t*(r-i)+i,o=a>=0?1:-1;return Math.pow(a,n)*o},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;var r=this.exponent;return(Xx(r,e)-Xx(r,n))/(Xx(r,t)-Xx(r,n))},t}(Vx),Jx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="time",t}return kp(t,e),t.prototype.getText=function(e,t){var n=this.translate(e),r=this.formatter;return r?r(n,t):Bx(n,this.mask)},t.prototype.scale=function(t){var n=t;return(ed(n)||kd(n))&&(n=this.translate(n)),e.prototype.scale.call(this,n)},t.prototype.translate=function(e){return zx(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,t=this.getConfig("min"),n=this.getConfig("max");if(Dp(t)&&pd(t)||(this.min=this.translate(this.min)),Dp(n)&&pd(n)||(this.max=this.translate(this.max)),e&&e.length){var r=[],i=1/0,a=i,o=0;Hp(e,(function(e){var t=zx(e);if(isNaN(t))throw new TypeError("Invalid Time: "+e+" in time scale!");i>t?(a=i,i=t):a>t&&(a=t),o<t&&(o=t),r.push(t)})),e.length>1&&(this.minTickInterval=a-i),Dp(t)&&(this.min=i),Dp(n)&&(this.max=o)}},t}(Wx),eE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantize",t}return kp(t,e),t.prototype.invert=function(e){var t=this.ticks,n=t.length,r=this.getInvertPercent(e),i=Math.floor(r*(n-1));if(i>=n-1)return id(t);if(i<0)return rd(t);var a=t[i],o=i/(n-1);return a+(r-o)/((i+1)/(n-1)-o)*(t[i+1]-a)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var t=e.prototype.calculateTicks.call(this);return this.nice||(id(t)!==this.max&&t.push(this.max),rd(t)!==this.min&&t.unshift(this.min)),t},t.prototype.getScalePercent=function(e){var t=this.ticks;if(e<rd(t))return 0;if(e>id(t))return 1;var n=0;return Hp(t,(function(t,r){if(!(e>=t))return!1;n=r})),n/(t.length-1)},t}(Vx),tE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantile",t}return kp(t,e),t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(eE),nE={};function rE(e){return nE[e]}function iE(e,t){if(rE(e))throw new Error("type '"+e+"' existed.");nE[e]=t}var aE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return kp(t,e),t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&pd(e)?e:this.range[0]},t.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},t}(cx);function oE(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}var sE=[1,5,2,2.5,4,3],lE=100*Number.EPSILON;function cE(e,t,n,r,i,a){var o=Jd(t),s=Dd(t,e),l=0,c=function(e,t){return(e%t+t)%t}(r,a);return(c<lE||a-c<lE)&&r<=0&&i>=0&&(l=1),1-s/(o-1)-n+l}function uE(e,t,n){var r=Jd(t);return 1-Dd(t,e)/(r-1)-n+1}function hE(e,t,n,r,i,a){var o=(e-1)/(a-i),s=(t-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(o/s,s/o)}function pE(e,t){return e>=t?2-(e-1)/(t-1):1}function dE(e,t,n,r){var i=t-e;return 1-.5*(Math.pow(t-r,2)+Math.pow(e-n,2))/Math.pow(.1*i,2)}function fE(e,t,n){var r=t-e;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function mE(e,t,n,r,i,a){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=sE),void 0===a&&(a=[.25,.2,.5,.05]);var o=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||"number"!=typeof e||"number"!=typeof t||!o)return{min:0,max:0,ticks:[]};if(t-e<1e-15||1===o)return{min:e,max:t,ticks:[e]};for(var s={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var c=0;c<i.length;c+=1){var u=i[c],h=uE(u,i,l);if(a[0]*h+a[1]+a[2]+a[3]<s.score){l=1/0;break}for(var p=2;p<1/0;){var d=pE(p,o);if(a[0]*h+a[1]+a[2]*d+a[3]<s.score)break;for(var f=(t-e)/(p+1)/l/u,m=Math.ceil(Math.log10(f));m<1/0;){var g=l*u*Math.pow(10,m),v=fE(e,t,g*(p-1));if(a[0]*h+a[1]*v+a[2]*d+a[3]<s.score)break;var y=Math.floor(t/g)*l-(p-1)*l,x=Math.ceil(e/g)*l;if(y<=x)for(var E=x-y,b=0;b<=E;b+=1){var C=(y+b)*(g/l),w=C+g*(p-1),T=g,S=cE(u,i,l,C,w,T),k=dE(e,t,C,w),_=hE(p,o,e,t,C,w),A=a[0]*S+a[1]*k+a[2]*_+1*a[3];A>s.score&&(!r||C<=e&&w>=t)&&(s.lmin=C,s.lmax=w,s.lstep=T,s.score=A)}m+=1}p+=1}}l+=1}var O=oE(s.lmax),I=oE(s.lmin),M=oE(s.lstep),N=Math.floor(function(e){return Math.round(1e12*e)/1e12}((O-I)/M))+1,F=new Array(N);F[0]=oE(I);for(c=1;c<N;c++)F[c]=oE(F[c-1]+M);return{min:Math.min(e,rd(F)),max:Math.max(t,id(F)),ticks:F}}function gE(e){var t=e.values,n=e.tickInterval,r=e.tickCount,i=t;if(pd(n))return Fp(i,(function(e,t){return t%n==0}));var a=e.min,o=e.max;if(Dp(a)&&(a=0),Dp(o)&&(o=t.length-1),pd(r)&&r<o-a){var s=mE(a,o,r,!1,[1,2,5,3,4,7,6,8,9]).ticks;return Fp(s,(function(e){return e>=a&&e<=o})).map((function(e){return t[e]}))}return t.slice(a,o+1)}var vE=Math.sqrt(50),yE=Math.sqrt(10),xE=Math.sqrt(2),EE=function(){function e(){this._domain=[0,1]}return e.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},e.prototype.nice=function(e){var t,n;void 0===e&&(e=5);var r,i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o];return l<s&&(s=(t=[l,s])[0],l=t[1],a=(n=[o,a])[0],o=n[1]),(r=bE(s,l,e))>0?r=bE(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,e):r<0&&(r=bE(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,e)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(l/r)*r,this.domain(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(l*r)/r,this.domain(i)),this},e.prototype.ticks=function(e){return void 0===e&&(e=5),function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];(r=t<e)&&(i=e,e=t,t=i);if(0===(o=bE(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(e-s)/o;r&&a.reverse();return a}(this._domain[0],this._domain[this._domain.length-1],e||5)},e}();function bE(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=vE?10:a>=yE?5:a>=xE?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=vE?10:a>=yE?5:a>=xE?2:1)}function CE(e,t,n){return("ceil"===n?Math.ceil(e/t):"floor"===n?Math.floor(e/t):Math.round(e/t))*t}function wE(e,t,n){var r=CE(e,n,"floor"),i=CE(t,n,"ceil");r=hd(r,n),i=hd(i,n);for(var a=[],o=r;o<=i;o+=n){var s=hd(o,n);a.push(s)}return{min:r,max:i,ticks:a}}function TE(e,t,n){var r,i=e.minLimit,a=e.maxLimit,o=e.min,s=e.max,l=e.tickCount,c=void 0===l?5:l,u=Dp(i)?Dp(t)?o:t:i,h=Dp(a)?Dp(n)?s:n:a;if(u>h&&(h=(r=[u,h])[0],u=r[1]),c<=2)return[u,h];for(var p=(h-u)/(c-1),d=[],f=0;f<c;f++)d.push(u+p*f);return d}function SE(e,t,n){if(void 0===n&&(n=5),e===t)return{max:t,min:e,ticks:[e]};var r=n<0?0:Math.round(n);if(0===r)return{max:t,min:e,ticks:[]};var i=(t-e)/r,a=Math.pow(10,Math.floor(Math.log10(i))),o=a;2*a-i<1.5*(i-o)&&5*a-i<2.75*(i-(o=2*a))&&10*a-i<1.5*(i-(o=5*a))&&(o=10*a);for(var s=Math.ceil(t/o),l=Math.floor(e/o),c=Math.max(s*o,t),u=Math.min(l*o,e),h=Math.floor((c-u)/o)+1,p=new Array(h),d=0;d<h;d++)p[d]=oE(u+d*o);return{min:u,max:c,ticks:p}}function kE(e,t){var n=e.length*t;return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function _E(e){return new Date(e).getFullYear()}function AE(e){return new Date(e,0,1).getTime()}function OE(e){return new Date(e).getMonth()}function IE(e,t){return new Date(e,t,1).getTime()}lx("cat",gE),lx("time-cat",(function(e){var t=gE(e),n=id(e.values);return n!==id(t)&&t.push(n),t})),lx("wilkinson-extended",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.nice,a=e.tickInterval,o=e.minLimit,s=e.maxLimit,l=mE(t,n,r,i).ticks;return Dp(o)&&Dp(s)?a?wE(t,n,a).ticks:l:TE(e,rd(l),id(l))})),lx("r-pretty",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.tickInterval,a=e.minLimit,o=e.maxLimit,s=SE(t,n,r).ticks;return Dp(a)&&Dp(o)?i?wE(t,n,i).ticks:s:TE(e,rd(s),id(s))})),lx("time",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickInterval,a=e.tickCount;if(i)a=Math.ceil((n-t)/i);else{var o=(n-t)/(i=Yx(t,n,a)[1])/a;o>1&&(i*=Math.ceil(o)),r&&i<r&&(i=r)}for(var s=[],l=t;l<n+i;l+=i)s.push(l);return s})),lx("time-pretty",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickCount,a=e.tickInterval,o=[];a||(a=(n-t)/i,r&&a<r&&(a=r));var s=_E(t);if(a>31536e6)for(var l=_E(n),c=Math.ceil(a/31536e6),u=s;u<=l+c;u+=c)o.push(AE(u));else if(a>Gx){var h=Math.ceil(a/Gx),p=OE(t),d=function(e,t){var n=_E(e),r=_E(t),i=OE(e);return 12*(r-n)+(OE(t)-i)%12}(t,n);for(u=0;u<=d+h;u+=h)o.push(IE(s,u+p))}else if(a>jx){var f=(x=new Date(t)).getFullYear(),m=x.getMonth(),g=x.getDate(),v=Math.ceil(a/jx),y=function(e,t){return Math.ceil((t-e)/jx)}(t,n);for(u=0;u<y+v;u+=v)o.push(new Date(f,m,g+u).getTime())}else if(a>Hx){f=(x=new Date(t)).getFullYear(),m=x.getMonth(),v=x.getDate();var x,E=x.getHours(),b=Math.ceil(a/Hx),C=function(e,t){return Math.ceil((t-e)/Hx)}(t,n);for(u=0;u<=C+b;u+=b)o.push(new Date(f,m,v,E+u).getTime())}else if(a>6e4){var w=function(e,t){return Math.ceil((t-e)/6e4)}(t,n),T=Math.ceil(a/6e4);for(u=0;u<=w+T;u+=T)o.push(t+6e4*u)}else{var S=a;S<1e3&&(S=1e3);var k=1e3*Math.floor(t/1e3),_=Math.ceil((n-t)/1e3),A=Math.ceil(S/1e3);for(u=0;u<_+A;u+=A)o.push(k+1e3*u)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o})),lx("log",(function(e){var t,n=e.base,r=e.tickCount,i=e.min,a=e.max,o=e.values,s=qx(n,a);if(i>0)t=Math.floor(qx(n,i));else{var l=Kx(o,n,a);t=Math.floor(qx(n,l))}for(var c=s-t,u=Math.ceil(c/r),h=[],p=t;p<s+u;p+=u)h.push(Math.pow(n,p));return i<=0&&h.unshift(0),h})),lx("pow",(function(e){var t=e.exponent,n=e.tickCount,r=Math.ceil(Xx(t,e.max));return SE(Math.floor(Xx(t,e.min)),r,n).ticks.map((function(e){var n=e>=0?1:-1;return Math.pow(e,t)*n}))})),lx("quantile",(function(e){var t=e.tickCount,n=e.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(e,t){return e-t})),i=[],a=0;a<t;a++){var o=a/(t-1);i.push(kE(r,o))}return i})),lx("d3-linear",(function(e){var t=e.min,n=e.max,r=e.tickInterval,i=e.minLimit,a=e.maxLimit,o=function(e){var t=e.min,n=e.max,r=e.nice,i=e.tickCount,a=new EE;return a.domain([t,n]),r&&a.nice(i),a.ticks(i)}(e);return Dp(i)&&Dp(a)?r?wE(t,n,r).ticks:o:TE(e,rd(o),id(o))})),iE("cat",ux),iE("category",ux),iE("identity",aE),iE("linear",Wx),iE("log",Qx),iE("pow",Zx),iE("time",Jx),iE("timeCat",Ux),iE("quantize",eE),iE("quantile",tE);var ME={},NE=function(e){return ME[e.toLowerCase()]},FE=function(e,t){if(NE(e))throw new Error("Attribute type '"+e+"' existed.");ME[e.toLowerCase()]=t};FE("Color",nx),FE("Opacity",rx),FE("Position",ix),FE("Shape",ax),FE("Size",ox);var LE=function(){function e(e){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=e.start,n=e.end,r=e.matrix,i=void 0===r?[1,0,0,0,1,0,0,0,1]:r,a=e.isTransposed,o=void 0!==a&&a;this.start=t,this.end=n,this.matrix=i,this.originalMatrix=Ip([],i),this.isTransposed=o}return e.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},e.prototype.update=function(e){Md(this,e),this.initial()},e.prototype.convertDim=function(e,t){var n,r=this[t],i=r.start,a=r.end;return this.isReflect(t)&&(i=(n=[a,i])[0],a=n[1]),i+e*(a-i)},e.prototype.invertDim=function(e,t){var n,r=this[t],i=r.start,a=r.end;return this.isReflect(t)&&(i=(n=[a,i])[0],a=n[1]),(e-i)/(a-i)},e.prototype.applyMatrix=function(e,t,n){void 0===n&&(n=0);var r=[e,t,n];return Pm(r,r,this.matrix),r},e.prototype.invertMatrix=function(e,t,n){void 0===n&&(n=0);var r=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,e[0]=h*f,e[1]=(-u*r+i*c)*f,e[2]=(s*r-i*o)*f,e[3]=p*f,e[4]=(u*n-i*l)*f,e[5]=(-s*n+i*a)*f,e[6]=d*f,e[7]=(-c*n+r*l)*f,e[8]=(o*n-r*a)*f,e):null}([0,0,0,0,0,0,0,0,0],this.matrix),i=[e,t,n];return r&&Pm(i,i,r),i},e.prototype.convert=function(e){var t=this.convertPoint(e),n=t.x,r=t.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},e.prototype.invert=function(e){var t=this.invertMatrix(e.x,e.y,1);return this.invertPoint({x:t[0],y:t[1]})},e.prototype.rotate=function(e){var t=this.matrix,n=this.center;return Wm(t,t,[-n.x,-n.y]),Xm(t,t,e),Wm(t,t,[n.x,n.y]),this},e.prototype.reflect=function(e){return"x"===e?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},e.prototype.scale=function(e,t){var n=this.matrix,r=this.center;return Wm(n,n,[-r.x,-r.y]),qm(n,n,[e,t]),Wm(n,n,[r.x,r.y]),this},e.prototype.translate=function(e,t){var n=this.matrix;return Wm(n,n,[e,t]),this},e.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},e.prototype.getCenter=function(){return this.center},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRadius=function(){return this.radius},e.prototype.isReflect=function(e){return"x"===e?this.isReflectX:this.isReflectY},e.prototype.resetMatrix=function(e){this.matrix=e||Ip([],this.originalMatrix)},e}(),PE=function(e){function t(t){var n=e.call(this,t)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return kp(t,e),t.prototype.initial=function(){e.prototype.initial.call(this);var t=this.start,n=this.end;this.x={start:t.x,end:n.x},this.y={start:t.y,end:n.y}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;return this.isTransposed&&(n=(t=[r,n])[0],r=t[1]),{x:this.convertDim(n,"x"),y:this.convertDim(r,"y")}},t.prototype.invertPoint=function(e){var t,n=this.invertDim(e.x,"x"),r=this.invertDim(e.y,"y");return this.isTransposed&&(n=(t=[r,n])[0],r=t[1]),{x:n,y:r}},t}(LE),RE=function(e){function t(t){var n=e.call(this,t)||this;n.isHelix=!0,n.type="helix";var r=t.startAngle,i=void 0===r?1.25*Math.PI:r,a=t.endAngle,o=void 0===a?7.25*Math.PI:a,s=t.innerRadius,l=void 0===s?0:s,c=t.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=l,n.radius=c,n.initial(),n}return kp(t,e),t.prototype.initial=function(){e.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n*=this.radius),this.d=Math.floor(n*(1-this.innerRadius)/t),this.a=this.d/(2*Math.PI),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+.99*this.d}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;this.isTransposed&&(n=(t=[r,n])[0],r=t[1]);var i=this.convertDim(n,"x"),a=this.a*i,o=this.convertDim(r,"y");return{x:this.center.x+Math.cos(i)*(a+o),y:this.center.y+Math.sin(i)*(a+o)}},t.prototype.invertPoint=function(e){var t,n=this.d+this.y.start,r=Dm([0,0],[e.x,e.y],[this.center.x,this.center.y]),i=Zm(r,[1,0],!0),a=i*this.a;Gm(r)<a&&(a=Gm(r)),i=2*Math.floor((Gm(r)-a)/n)*Math.PI+i;var o=this.a*i,s=Gm(r)-o;s=dd(s,0)?0:s;var l=this.invertDim(i,"x"),c=this.invertDim(s,"y");return l=dd(l,0)?0:l,c=dd(c,0)?0:c,this.isTransposed&&(l=(t=[c,l])[0],c=t[1]),{x:l,y:c}},t}(LE),DE=function(e){function t(t){var n=e.call(this,t)||this;n.isPolar=!0,n.type="polar";var r=t.startAngle,i=void 0===r?-Math.PI/2:r,a=t.endAngle,o=void 0===a?3*Math.PI/2:a,s=t.innerRadius,l=void 0===s?0:s,c=t.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=l,n.radius=c,n.initial(),n}return kp(t,e),t.prototype.initial=function(){for(e.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=2*Math.PI;var t,n=this.getOneBox(),r=n.maxX-n.minX,i=n.maxY-n.minY,a=Math.abs(n.minX)/r,o=Math.abs(n.minY)/i;this.height/i>this.width/r?(t=this.width/r,this.circleCenter={x:this.center.x-(.5-a)*this.width,y:this.center.y-(.5-o)*t*i}):(t=this.height/i,this.circleCenter={x:this.center.x-(.5-a)*t*r,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=t*this.radius:(this.radius<=0||this.radius>t)&&(this.polarRadius=t):this.polarRadius=t,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},t.prototype.getRadius=function(){return this.polarRadius},t.prototype.convertPoint=function(e){var t,n=this.getCenter(),r=e.x,i=e.y;return this.isTransposed&&(r=(t=[i,r])[0],i=t[1]),r=this.convertDim(r,"x"),i=this.convertDim(i,"y"),{x:n.x+Math.cos(r)*i,y:n.y+Math.sin(r)*i}},t.prototype.invertPoint=function(e){var t,n=this.getCenter(),r=[e.x-n.x,e.y-n.y],i=this.startAngle,a=this.endAngle;this.isReflect("x")&&(i=(t=[a,i])[0],a=t[1]);var o=[1,0,0,0,1,0,0,0,1];Xm(o,o,i);var s=[1,0,0];Pm(s,s,o);var l=Zm([s[0],s[1]],r,a<i);dd(l,2*Math.PI)&&(l=0);var c=Gm(r),u=l/(a-i);u=a-i>0?u:-u;var h=this.invertDim(c,"y"),p={x:0,y:0};return p.x=this.isTransposed?h:u,p.y=this.isTransposed?u:h,p},t.prototype.getCenter=function(){return this.circleCenter},t.prototype.getOneBox=function(){var e=this.startAngle,t=this.endAngle;if(Math.abs(t-e)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(e),Math.cos(t)],r=[0,Math.sin(e),Math.sin(t)],i=Math.min(e,t);i<Math.max(e,t);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}},t}(LE),BE={},zE=function(e,t){BE[e.toLowerCase()]=t};zE("rect",PE),zE("cartesian",PE),zE("polar",DE),zE("helix",RE);var HE="\t\n\v\f\r   ᠎             　\u2028\u2029",jE=new RegExp("([a-z])["+HE+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+HE+"]*,?["+HE+"]*)+)","ig"),GE=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+HE+"]*,?["+HE+"]*","ig"),$E=function(e){if(!e)return null;if(Bp(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(jE,(function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(GE,(function(e,t){t&&o.push(+t)})),"m"===s&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===o.length&&n.push([i,o[0]]),"r"===s)n.push([i].concat(o));else for(;o.length>=t[s]&&(n.push([i].concat(o.splice(0,t[s]))),t[s]););return e})),n},YE=function(e,t){if(e.length!==t.length)return!1;var n=!0;return Hp(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function UE(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var VE=function(e,t){var n=function(e,t){var n,r,i=e.length,a=t.length,o=0;if(0===i||0===a)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=a;c++)s[0][c]={min:c};for(l=1;l<=i;l++)for(n=e[l-1],c=1;c<=a;c++){r=t[c-1],o=YE(n,r)?0:1;var u=s[l-1][c].min+1,h=s[l][c-1].min+1,p=s[l-1][c-1].min+o;s[l][c]=UE(u,h,p)}return s}(e,t),r=e.length,i=t.length,a=[],o=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=o;u<=i;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);o=s,n[l][o].type&&a.push({index:l-1,type:n[l][o].type})}for(l=a.length-1;l>=0;l--)o=a[l].index,"add"===a[l].type?e.splice(o,0,[].concat(e[o])):e.splice(o,1)}var h=i-(r=e.length);if(r<i)for(l=0;l<h;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function WE(e,t,n){for(var r,i=[].concat(e),a=1/(n+1),o=XE(t)[0],s=1;s<=n;s++)a*=s,0===(r=Math.floor(e.length*a))?i.unshift([o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]):i.splice(r,0,[o[0]*a+e[r][0]*(1-a),o[1]*a+e[r][1]*(1-a)]);return i}function XE(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var qE=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=XE(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=WE(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=WE(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=WE(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e},KE=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function QE(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var ZE="undefined"!=typeof window&&void 0!==window.document;function JE(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function eb(e){return e.cfg.visible&&e.cfg.capture}var tb=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=Md(r,t),n}return kp(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(Pf);function nb(e,t){var n=[],r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=t[0],d=t[1],f=t[2],m=t[3],g=t[4],v=t[5],y=t[6],x=t[7],E=t[8];return n[0]=p*r+d*o+f*c,n[1]=p*i+d*s+f*u,n[2]=p*a+d*l+f*h,n[3]=m*r+g*o+v*c,n[4]=m*i+g*s+v*u,n[5]=m*a+g*l+v*h,n[6]=y*r+x*o+E*c,n[7]=y*i+x*s+E*u,n[8]=y*a+x*l+E*h,n}function rb(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}var ib=Qm,ab=["zIndex","capture","visible","type"],ob=["repeat"];function sb(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function lb(e,t){var n={},r=t.attr();return Hp(e,(function(e,t){-1!==ob.indexOf(t)||jd(r[t],e)||(n[t]=e)})),n}function cb(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return Hp(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&Hp(t.toAttrs,(function(t,n){a.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var ub=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return Md(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return kp(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(zp(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(QE(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr("matrix")},t.prototype.setMatrix=function(e){this.attr("matrix",e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?nb(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?nb(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?rb(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=function(e){var t=[],n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*o-s*c,p=-u*a+s*l,d=c*a-o*l,f=n*h+r*p+i*d;return f?(f=1/f,t[0]=h*f,t[1]=(-u*r+i*c)*f,t[2]=(s*r-i*o)*f,t[3]=p*f,t[4]=(u*n-i*l)*f,t[5]=(-s*n+i*a)*f,t[6]=d*f,t[7]=(-c*n+r*l)*f,t[8]=(o*n-r*a)*f,t):null}(t);if(n)return rb(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[wd(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};Hp(t,(function(e,r){Bp(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)Bp(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return Hp(ab,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,a,o,s,l,c=e[0],u=e[1],h=e[2],p=void 0===h?"easeLinear":h,d=e[3],f=void 0===d?Zd:d,m=e[4],g=void 0===m?0:m;Rp(c)?(i=c,c={}):zp(c)&&c.onFrame&&(i=c.onFrame,a=c.repeat),zp(u)?(u=(l=u).duration,p=l.easing||"easeLinear",g=l.delay||0,a=l.repeat||a||!1,f=l.callback||Zd,o=l.pauseCallback||Zd,s=l.resumeCallback||Zd):(pd(f)&&(g=f,f=null),Rp(p)?(f=p,p="easeLinear"):p=p||"easeLinear");var v=lb(c,this),y={fromAttrs:sb(v,this),toAttrs:v,duration:u,easing:p,repeat:a,callback:f,pauseCallback:o,resumeCallback:s,delay:g,startTime:n.getTime(),id:Qd(),onFrame:i,pathFormatted:!1};r.length>0?r=cb(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),Hp(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return Hp(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return Hp(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var a=function(e){var a=i[e],s=a.get("name");if(s){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&n&&JE(a,n))return"break";Bp(s)?Hp(s,(function(e){r.emitDelegateEvent(a,e,t)})):o.emitDelegateEvent(a,s,t)}},o=this,s=0;s<i.length;s++){if("break"===a(s))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=ib(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=ib(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=ib(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),a=ib(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(a),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=ib(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(tb),hb={};function pb(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){pb(e,t)}))}}function db(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){db(e,t)}))}}var fb,mb,gb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Hp(o,(function(e){var t=e.getBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=qp(i),t=Xp(i),n=qp(a),r=Xp(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],a=[],o=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return o.length>0?(Hp(o,(function(e){var t=e.getCanvasBBox();i.push(t.minX,t.maxX),a.push(t.minY,t.maxY)})),e=qp(i),t=Xp(i),n=qp(a),r=Xp(a)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){Hp(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];zp(n)?r=n:r.type=n;var i=hb[r.type];i||(i=wd(r.type),hb[r.type]=i);var a=this.getShapeBase(),o=new a[i](r);return this.add(o),o},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if(Rp(r))n=new r(i||{parent:this});else{var a=r||{},o=this.getGroupBase();n=new o(a)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!eb(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var a=[e,t,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,a=e.length-1;a>=0;a--){var o=e[a];if(eb(o)&&(o.isGroup()?i=o.getShape(t,n,r):o.isHit(t,n)&&(i=o)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),QE(e.getChildren(),t)}(i,e,!1),e.set("parent",this),t&&pb(e,t),r&&db(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();Hp(t,(function(e,t){return e._INDEX=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return Hp(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return Hp(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(ub),vb=0,yb=0,xb=0,Eb=0,bb=0,Cb=0,wb="object"==typeof performance&&performance.now?performance:Date,Tb="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Sb(){return bb||(Tb(kb),bb=wb.now()+Cb)}function kb(){bb=0}function _b(){this._call=this._time=this._next=null}function Ab(e,t,n){var r=new _b;return r.restart(e,t,n),r}function Ob(){bb=(Eb=wb.now())+Cb,vb=yb=0;try{!function(){Sb(),++vb;for(var e,t=fb;t;)(e=bb-t._time)>=0&&t._call.call(null,e),t=t._next;--vb}()}finally{vb=0,function(){var e,t,n=fb,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:fb=t);mb=e,Mb(r)}(),bb=0}}function Ib(){var e=wb.now(),t=e-Eb;t>1e3&&(Cb-=t,Eb=e)}function Mb(e){vb||(yb&&(yb=clearTimeout(yb)),e-bb>24?(e<1/0&&(yb=setTimeout(Ob,e-wb.now()-Cb)),xb&&(xb=clearInterval(xb))):(xb||(Eb=wb.now(),xb=setInterval(Ib,1e3)),vb=1,Tb(Ob)))}function Nb(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Fb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}_b.prototype=Ab.prototype={constructor:_b,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Sb():+n)+(null==t?0:+t),this._next||mb===this||(mb?mb._next=this:fb=this,mb=this),this._call=e,this._time=n,Mb()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mb())}};var Lb=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),Pb=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),Rb=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Db=Math.PI,Bb=Db/2;function zb(e){return(1-Math.cos(Db*e))/2}function Hb(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function jb(e){return((e*=2)<=1?Hb(1-e):2-Hb(e-1))/2}function Gb(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var $b=4/11,Yb=7.5625;function Ub(e){return(e=+e)<$b?Yb*e*e:e<.7272727272727273?Yb*(e-=.5454545454545454)*e+.75:e<.9090909090909091?Yb*(e-=.8181818181818182)*e+.9375:Yb*(e-=.9545454545454546)*e+.984375}var Vb=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158),Wb=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158),Xb=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),qb=2*Math.PI,Kb=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=qb);function i(e){return t*Hb(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*qb)},i.period=function(n){return e(t,n)},i}(1,.3),Qb=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=qb);function i(e){return 1-t*Hb(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*qb)},i.period=function(n){return e(t,n)},i}(1,.3),Zb=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=qb);function i(e){return((e=2*e-1)<0?t*Hb(-e)*Math.sin((r-e)/n):2-t*Hb(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*qb)},i.period=function(n){return e(t,n)},i}(1,.3),Jb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:function(e){return+e},easeQuad:Nb,easeQuadIn:function(e){return e*e},easeQuadOut:function(e){return e*(2-e)},easeQuadInOut:Nb,easeCubic:Fb,easeCubicIn:function(e){return e*e*e},easeCubicOut:function(e){return--e*e*e+1},easeCubicInOut:Fb,easePoly:Rb,easePolyIn:Lb,easePolyOut:Pb,easePolyInOut:Rb,easeSin:zb,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*Bb)},easeSinOut:function(e){return Math.sin(e*Bb)},easeSinInOut:zb,easeExp:jb,easeExpIn:function(e){return Hb(1-+e)},easeExpOut:function(e){return 1-Hb(e)},easeExpInOut:jb,easeCircle:Gb,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCircleInOut:Gb,easeBounce:Ub,easeBounceIn:function(e){return 1-Ub(1-e)},easeBounceOut:Ub,easeBounceInOut:function(e){return((e*=2)<=1?1-Ub(1-e):Ub(e-1)+1)/2},easeBack:Xb,easeBackIn:Vb,easeBackOut:Wb,easeBackInOut:Xb,easeElastic:Qb,easeElasticIn:Kb,easeElasticOut:Qb,easeElasticInOut:Zb});function eC(e){return function(){return e}}function tC(e){return 1==(e=+e)?nC:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):eC(isNaN(t)?n:t)}}function nC(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):eC(isNaN(e)?t:e)}var rC=function e(t){var n=tC(t);function r(e,t){var r=n((e=ye(e)).r,(t=ye(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=nC(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function iC(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function aC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function oC(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=dC(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function sC(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function lC(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function cC(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=dC(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var uC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hC=new RegExp(uC.source,"g");function pC(e,t){var n,r,i,a=uC.lastIndex=hC.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=uC.exec(e))&&(r=hC.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:lC(n,r)})),a=hC.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function dC(e,t){var n,r=typeof t;return null==t||"boolean"===r?eC(t):("number"===r?lC:"string"===r?(n=ve(t))?(t=n,rC):pC:t instanceof ve?rC:t instanceof Date?sC:aC(t)?iC:Array.isArray(t)?oC:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?cC:lC)(e,t)}var fC=[1,0,0,0,1,0,0,0,1];function mC(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var a=t.duration,o=t.easing;if(n=n-i-t.delay,t.repeat)r=n%a/a,r=Jb[o](r);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=Jb[o](r)}if(t.onFrame){var s=t.onFrame(r);e.attr(s)}else!function(e,t,n){var r={},i=t.fromAttrs,a=t.toAttrs;if(!e.destroyed){var o,s,l,c;for(var u in a)if(!jd(i[u],a[u]))if("path"===u){var h=a[u],p=i[u];h.length>p.length?(h=$E(a[u]),p=$E(i[u]),p=VE(p,h),p=qE(p,h),t.fromAttrs.path=p,t.toAttrs.path=h):t.pathFormatted||(h=$E(a[u]),p=$E(i[u]),p=qE(p,h),t.fromAttrs.path=p,t.toAttrs.path=h,t.pathFormatted=!0),r[u]=[];for(var d=0;d<h.length;d++){for(var f=h[d],m=p[d],g=[],v=0;v<f.length;v++)pd(f[v])&&m&&pd(m[v])?(o=dC(m[v],f[v]),g.push(o(n))):g.push(f[v]);r[u].push(g)}}else if("matrix"===u){var y=(l=i[u]||fC,(aC(c=a[u]||fC)?iC:oC)(l,c))(n);r[u]=y}else["fill","stroke","fillStyle","strokeStyle"].includes(u)&&(s=a[u],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[u]=a[u]:Rp(a[u])||(o=dC(i[u],a[u]),r[u]=o(n));e.attr(r)}}(e,t,r);return!1}var gC=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=Ab((function(i){if(r.current=i,r.animators.length>0){for(var a=r.animators.length-1;a>=0;a--)if((e=r.animators[a]).destroyed)r.removeAnimator(a);else{if(!e.isAnimatePaused())for(var o=(t=e.get("animations")).length-1;o>=0;o--)n=t[o],mC(e,n,i)&&(t.splice(o,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(a)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),vC=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function yC(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function xC(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&JE(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var EC=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");Hp(vC,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");Hp(vC,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,a){var o=new KE(e,t);return o.fromShape=i,o.toShape=a,o.x=n.x,o.y=n.y,o.clientX=n.clientX,o.clientY=n.clientY,o.propagationPath.push(r),o},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],a=!1;if(i)i.call(this,n,r,t);else{var o=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(a=!0,o&&this._emitEvent(e,t,n,o,o,null),this._emitEvent(e,t,n,null,o,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(a||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,a);else{var o=this.mousedownPoint;if(o){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=o.clientX-e.clientX,u=o.clientY-e.clientY;l>120||c*c+u*u>40?s&&s.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,e,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,a){var o=this._getEventObj(e,t,n,r,i,a);if(r){o.shape=r,yC(r,e,o);for(var s=r.getParent();s;)s.emitDelegation(e,o),o.propagationStopped||xC(s,e,o),o.propagationPath.push(s),s=s.getParent()}else{yC(this.canvas,e,o)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),bC=Im(),CC=bC&&"firefox"===bC.name;!function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");ed(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new EC({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new gC(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");ZE&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");ZE&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(CC&&!Dp(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Dp(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))}}(gb),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}kp(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t}}(gb),function(e){function t(t){return e.call(this,t)||this}kp(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,a=e.maxY;if(t){var o=rb(t,[e.minX,e.minY]),s=rb(t,[e.maxX,e.minY]),l=rb(t,[e.minX,e.maxY]),c=rb(t,[e.maxX,e.maxY]);n=Math.min(o[0],s[0],l[0],c[0]),i=Math.max(o[0],s[0],l[0],c[0]),r=Math.min(o[1],s[1],l[1],c[1]),a=Math.max(o[1],s[1],l[1],c[1])}var u=this.attrs;if(u.shadowColor){var h=u.shadowBlur,p=void 0===h?0:h,d=u.shadowOffsetX,f=void 0===d?0:d,m=u.shadowOffsetY,g=void 0===m?0:m,v=n-p+f,y=i+p+f,x=r-p+g,E=a+p+g;n=Math.min(n,v),i=Math.max(i,y),r=Math.min(r,x),a=Math.max(a,E)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],a=(i=this.invertFromMatrix(i))[0],o=i[1],s=this._isInBBox(a,o);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(a,o)){if(this.isInShape(a,o))return!0;if(n&&n.isHit(a,o))return!0;if(r&&r.isHit(a,o))return!0}return!1}}(ub);var wC=new Map;function TC(e,t){wC.set(e,t)}function SC(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function kC(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function _C(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function AC(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=_C(t,n.getCanvasBBox())),r&&(t=_C(t,r.getCanvasBBox())),t}var OC=null;function IC(e,t){var n=function(){if(!OC){var e=document.createElement("canvas");e.width=1,e.height=1,OC=e.getContext("2d")}return OC}(),r=0;if(Dp(e)||""===e)return r;(n.save(),n.font=t,ed(e)&&e.includes("\n"))?Hp(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width;return n.restore(),r}function MC(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||0===Math.sin(l)||dd(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(u-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}function NC(e,t,n){var r=new KE(t,n);r.target=e,r.propagationPath.push(e),e.emitDelegation(t,r);for(var i=e.getParent();i;)i.emitDelegation(t,r),r.propagationPath.push(i),i=i.getParent()}TC("rect",SC),TC("image",SC),TC("circle",kC),TC("marker",kC),TC("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}var o=Nv(n,r),s=o.x,l=o.y,c={minX:s,minY:l,maxX:s+o.width,maxY:l+o.height};return{x:(c=AC(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),TC("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var a=t[i];n.push(a[0]),r.push(a[1])}return Nv(n,r)})),TC("text",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=function(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}(t));var l,c=IC(i,s);if(c){var u=t.textAlign,h=t.textBaseline,p=function(e,t,n){var r=1;return ed(e)&&(r=e.split("\n").length),r>1?t*r+function(e,t){return t?t-e:.14*e}(t,n)*(r-1):t}(i,a,o),d={x:n,y:r-p};u&&("end"===u||"right"===u?d.x-=c:"center"===u&&(d.x-=c/2)),h&&("top"===h?d.y+=p:"middle"===h&&(d.y+=p/2)),l={x:d.x,y:d.y,width:c,height:p}}else l={x:n,y:r,width:0,height:0};return l})),TC("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=(m=e[a]).currentPoint,s=m.params,l=m.prePoint,c=void 0;switch(m.command){case"Q":c=jv.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":c=Wv.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var u=m.arcParams;c=Kv(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(o[0]),r.push(o[1])}c&&(m.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&i.push(m)}n=n.filter((function(e){return!Number.isNaN(e)})),r=r.filter((function(e){return!Number.isNaN(e)}));var h=qp(n),p=qp(r),d=Xp(n),f=Xp(r);if(0===i.length)return{x:h,y:p,width:d-h,height:f-p};for(a=0;a<i.length;a++){var m;(o=(m=i[a]).currentPoint)[0]===h?h-=MC(m,t).xExtra:o[0]===d&&(d+=MC(m,t).xExtra),o[1]===p?p-=MC(m,t).yExtra:o[1]===f&&(f+=MC(m,t).yExtra)}return{x:h,y:p,width:d-h,height:f-p}}(e.get("segments")||Ey(n),r),a=i.x,o=i.y,s={minX:a,minY:o,maxX:a+i.width,maxY:o+i.height};return{x:(s=AC(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),TC("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,a),maxY:Math.max(r,a)};return{x:(o=AC(e,o)).minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}})),TC("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;return{x:n-i,y:r-a,width:2*i,height:2*a}}));var FC=[1,0,0,0,1,0,0,0,1];function LC(e,t,n){return void 0===n&&(n=FC),t?Qm(n,[["t",-e.x,-e.y],["r",t],["t",e.x,e.y]]):null}function PC(e,t){return e.x||e.y?Qm(t||FC,[["t",e.x,e.y]]):null}function RC(e,t){var n=[0,0];return function(e,t,n){var r=t[0],i=t[1];e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7]}(n,t,e),n}function DC(e,t,n,r){if(t){var i=LC({x:n,y:r},t,e.getMatrix());e.setMatrix(i)}}function BC(e,t,n){var r=PC({x:t,y:n});e.attr("matrix",r)}function zC(e){var t=0,n=0,r=0,i=0;return pd(e)?t=n=r=i=e:Bp(e)&&(t=e[0],r=Dp(e[1])?e[0]:e[1],i=Dp(e[2])?e[0]:e[2],n=Dp(e[3])?r:e[3]),[t,r,i,n]}function HC(e){for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t[n])}function jC(e){var t=e.start,n=e.end,r=Math.min(t.x,n.x),i=Math.min(t.y,n.y),a=Math.max(t.x,n.x),o=Math.max(t.y,n.y);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function GC(e,t,n,r){var i=e+n,a=t+r;return{x:e,y:t,width:n,height:r,minX:e,minY:t,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function $C(e,t,n){return(1-n)*e+t*n}function YC(e,t,n){return{x:e.x+Math.cos(n)*t,y:e.y+Math.sin(n)*t}}var UC=function(e,t,n){return void 0===n&&(n=Math.pow(Number.EPSILON,.5)),[e,t].includes(1/0)?Math.abs(e)===Math.abs(t):Math.abs(e-t)<n};function VC(e){var t,n,r,i,a,o=e.getClip(),s=o&&o.getBBox();if(e.isGroup()){var l=1/0,c=-1/0,u=1/0,h=-1/0,p=e.getChildren();p.length>0?Hp(p,(function(e){if(e.get("visible")){if(e.isGroup()&&0===e.get("children").length)return!0;var t=VC(e),n=e.applyToMatrix([t.minX,t.minY,1]),r=e.applyToMatrix([t.minX,t.maxY,1]),i=e.applyToMatrix([t.maxX,t.minY,1]),a=e.applyToMatrix([t.maxX,t.maxY,1]),o=Math.min(n[0],r[0],i[0],a[0]),s=Math.max(n[0],r[0],i[0],a[0]),p=Math.min(n[1],r[1],i[1],a[1]),d=Math.max(n[1],r[1],i[1],a[1]);o<l&&(l=o),s>c&&(c=s),p<u&&(u=p),d>h&&(h=d)}})):(l=0,c=0,u=0,h=0),t=GC(l,u,c-l,h-u)}else t=e.getBBox();return s?(n=t,r=s,i=Math.max(n.minX,r.minX),a=Math.max(n.minY,r.minY),GC(i,a,Math.min(n.maxX,r.maxX)-i,Math.min(n.maxY,r.maxY)-a)):t}function WC(e){return e+"px"}function XC(e,t,n,r){var i,a,o,s,l=r/(i=e,o=(a=t).x-i.x,s=a.y-i.y,Math.sqrt(o*o+s*s)),c=0;return"start"===n?c=0-l:"end"===n&&(c=1+l),{x:$C(e.x,t.x,c),y:$C(e.y,t.y,c)}}var qC={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},KC=function(e){function t(t){var n=e.call(this,t)||this;return n.initCfg(),n}return kp(t,e),t.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},t.prototype.clear=function(){},t.prototype.update=function(e){var t=this,n=this.get("defaultCfg");Hp(e,(function(e,r){var i=e;t.get(r)!==e&&(zp(e)&&n[r]&&(i=Rd({},n[r],e)),t.set(r,i))})),this.updateInner(e),this.afterUpdate(e)},t.prototype.updateInner=function(e){},t.prototype.afterUpdate=function(e){yd(e,"visible")&&(e.visible?this.show():this.hide()),yd(e,"capture")&&this.setCapture(e.capture)},t.prototype.getLayoutBBox=function(){return this.getBBox()},t.prototype.getLocationType=function(){return this.get("locationType")},t.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},t.prototype.setOffset=function(e,t){this.update({offsetX:e,offsetY:t})},t.prototype.setLocation=function(e){var t=_p({},e);this.update(t)},t.prototype.getLocation=function(){var e=this,t={},n=this.get("locationType");return Hp(qC[n],(function(n){t[n]=e.get(n)})),t},t.prototype.isList=function(){return!1},t.prototype.isSlider=function(){return!1},t.prototype.init=function(){},t.prototype.initCfg=function(){var e=this;Hp(this.get("defaultCfg"),(function(t,n){var r=e.get(n);if(zp(r)){var i=Rd({},t,r);e.set(n,i)}}))},t}(tb),QC=["visible","tip","delegateObject"],ZC=["container","group","shapesMap","isRegister","isUpdating","destroyed"],JC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},t.prototype.remove=function(){this.clear(),this.get("group").remove()},t.prototype.clear=function(){this.get("group").clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},t.prototype.getChildComponentById=function(e){var t=this.getElementById(e);return t&&t.get("component")},t.prototype.getElementById=function(e){return this.get("shapesMap")[e]},t.prototype.getElementByLocalId=function(e){var t=this.getElementId(e);return this.getElementById(t)},t.prototype.getElementsByName=function(e){var t=[];return Hp(this.get("shapesMap"),(function(n){n.get("name")===e&&t.push(n)})),t},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateInner=function(e){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},t.prototype.render=function(){var e=this.get("offScreenGroup");e||(e=this.offScreenRender());var t=this.get("group");this.updateElements(e,t),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},t.prototype.show=function(){this.get("group").show(),this.set("visible",!0)},t.prototype.hide=function(){this.get("group").hide(),this.set("visible",!1)},t.prototype.setCapture=function(e){this.get("group").set("capture",e),this.set("capture",e)},t.prototype.destroy=function(){this.removeEvent(),this.remove(),e.prototype.destroy.call(this)},t.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},t.prototype.getLayoutBBox=function(){var e=this.get("group"),t=this.getInnerLayoutBBox(),n=e.getTotalMatrix();return n&&(t=function(e,t){var n=RC(e,[t.minX,t.minY]),r=RC(e,[t.maxX,t.minY]),i=RC(e,[t.minX,t.maxY]),a=RC(e,[t.maxX,t.maxY]),o=Math.min(n[0],r[0],i[0],a[0]),s=Math.max(n[0],r[0],i[0],a[0]),l=Math.min(n[1],r[1],i[1],a[1]),c=Math.max(n[1],r[1],i[1],a[1]);return{x:o,y:l,minX:o,minY:l,maxX:s,maxY:c,width:s-o,height:c-l}}(n,t)),t},t.prototype.on=function(e,t,n){return this.get("group").on(e,t,n),this},t.prototype.off=function(e,t){var n=this.get("group");return n&&n.off(e,t),this},t.prototype.emit=function(e,t){this.get("group").emit(e,t)},t.prototype.init=function(){e.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},t.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},t.prototype.delegateEmit=function(e,t){var n=this.get("group");t.target=n,n.emit(e,t),NC(n,e,t)},t.prototype.createOffScreenGroup=function(){return new(this.get("group").getGroupBase())({delegateObject:this.getDelegateObject()})},t.prototype.applyOffset=function(){var e=this.get("offsetX"),t=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e,y:t})},t.prototype.initGroup=function(){var e=this.get("container");this.set("group",e.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},t.prototype.offScreenRender=function(){this.clearOffScreenCache();var e=this.createOffScreenGroup();return this.renderInner(e),this.set("offScreenGroup",e),this.set("offScreenBBox",VC(e)),e},t.prototype.addGroup=function(e,t){this.appendDelegateObject(e,t);var n=e.addGroup(t);return this.get("isRegister")&&this.registerElement(n),n},t.prototype.addShape=function(e,t){this.appendDelegateObject(e,t);var n=e.addShape(t);return this.get("isRegister")&&this.registerElement(n),n},t.prototype.addComponent=function(e,t){var n=t.id,r=t.component,i=Ap(t,["id","component"]),a=new r(_p(_p({},i),{id:n,container:e,updateAutoRender:this.get("updateAutoRender")}));return a.init(),a.render(),this.get("isRegister")&&this.registerElement(a.get("group")),a},t.prototype.initEvent=function(){},t.prototype.removeEvent=function(){this.get("group").off()},t.prototype.getElementId=function(e){return this.get("id")+"-"+this.get("name")+"-"+e},t.prototype.registerElement=function(e){var t=e.get("id");this.get("shapesMap")[t]=e},t.prototype.unregisterElement=function(e){var t=e.get("id");delete this.get("shapesMap")[t]},t.prototype.moveElementTo=function(e,t){var n=PC(t);e.attr("matrix",n)},t.prototype.addAnimation=function(e,t,n){var r=t.attr("opacity");Dp(r)&&(r=1),t.attr("opacity",0),t.animate({opacity:r},n)},t.prototype.removeAnimation=function(e,t,n){t.animate({opacity:0},n)},t.prototype.updateAnimation=function(e,t,n,r){t.animate(n,r)},t.prototype.updateElements=function(e,t){var n,r=this,i=this.get("animate"),a=this.get("animateOption");Hp(e.getChildren().slice(0),(function(e){var o,s,l=e.get("id"),c=r.getElementById(l),u=e.get("name");if(c)if(e.get("isComponent")){var h=e.get("component"),p=c.get("component"),d=Wd(h.cfg,(o=jp(h.cfg),void 0===(s=ZC)&&(s=[]),Fp(o,(function(e){return!Np(s,e)}))));p.update(d),c.set("update_status","update")}else{var f=r.getReplaceAttrs(c,e);i&&a.update?r.updateAnimation(u,c,f,a.update):c.attr(f),e.isGroup()&&r.updateElements(e,c),Hp(QC,(function(t){c.set(t,e.get(t))})),function(e,t){if(e.getClip()||t.getClip()){var n=t.getClip();if(n){var r={type:n.get("type"),attrs:n.attr()};e.setClip(r)}else e.setClip(null)}}(c,e),n=c,c.set("update_status","update")}else{t.add(e);var m=t.getChildren();if(m.splice(m.length-1,1),n){var g=m.indexOf(n);m.splice(g+1,0,e)}else m.unshift(e);if(r.registerElement(e),e.set("update_status","add"),e.get("isComponent"))(h=e.get("component")).set("container",t);else e.isGroup()&&r.registerNewGroup(e);if(n=e,i){var v=r.get("isInit")?a.appear:a.enter;v&&r.addAnimation(u,e,v)}}}))},t.prototype.clearUpdateStatus=function(e){Hp(e.getChildren(),(function(e){e.set("update_status",null)}))},t.prototype.clearOffScreenCache=function(){var e=this.get("offScreenGroup");e&&e.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},t.prototype.getDelegateObject=function(){var e;return(e={})[this.get("name")]=this,e.component=this,e},t.prototype.appendDelegateObject=function(e,t){var n=e.get("delegateObject");t.delegateObject||(t.delegateObject={}),Md(t.delegateObject,n)},t.prototype.getReplaceAttrs=function(e,t){var n=e.attr(),r=t.attr();return Hp(n,(function(e,t){void 0===r[t]&&(r[t]=void 0)})),r},t.prototype.registerNewGroup=function(e){var t=this;Hp(e.getChildren(),(function(e){t.registerElement(e),e.set("update_status","add"),e.isGroup()&&t.registerNewGroup(e)}))},t.prototype.deleteElements=function(){var e=this,t=this.get("shapesMap"),n=[];Hp(t,(function(e,t){!e.get("update_status")||e.destroyed?n.push([t,e]):e.set("update_status",null)}));var r=this.get("animate"),i=this.get("animateOption");Hp(n,(function(n){var a=n[0],o=n[1];if(!o.destroyed){var s=o.get("name");if(r&&i.leave){var l=Md({callback:function(){e.removeElement(o)}},i.leave);e.removeAnimation(s,o,l)}else e.removeElement(o)}delete t[a]}))},t.prototype.removeElement=function(e){if(e.get("isGroup")){var t=e.get("component");t&&t.destroy()}e.remove()},t}(KC);function ew(e,t){return e.charCodeAt(t)>0&&e.charCodeAt(t)<128?1:2}function tw(e){if(e.length>400)return function(e){for(var t=e.map((function(e){var t=e.attr("text");return Dp(t)?"":""+t})),n=0,r=0,i=0;i<t.length;i+=1){for(var a=0,o=0;o<=t[i].length;o+=1){var s=t[i].charCodeAt(o);a+=s>=19968&&s<=40869?2:1}a>n&&(n=a,r=i)}return e[r].getBBox().width}(e);var t=0;return Hp(e,(function(e){var n=e.getBBox().width;t<n&&(t=n)})),t}function nw(e,t,n,r){var i;void 0===r&&(r="tail");var a=null!==(i=t.attr("text"))&&void 0!==i?i:"";if("tail"===r){var o=function(e,t,n,r){void 0===r&&(r="...");var i,a,o=sf(r,n),s=ed(e)?e:Ed(e),l=t,c=[];if(sf(e,n)<=t)return e;for(;i=s.substr(0,16),!((a=sf(i,n))+o>l&&a>l);)if(c.push(i),l-=a,!(s=s.substr(16)))return c.join("");for(;i=s.substr(0,1),!((a=sf(i,n))+o>l);)if(c.push(i),l-=a,!(s=s.substr(1)))return c.join("");return""+c.join("")+r}(a,n,Wd(t.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),"…");return a!==o?(t.attr("text",o),t.set("tip",a),!0):(t.set("tip",null),!1)}var s=function(e,t){var n=t.getCanvasBBox();return e?n.width:n.height}(e,t),l=function(e){for(var t=0,n=0;n<e.length;n++)t+=ew(e,n);return t}(a),c=!1;if(n<s){var u=Math.floor(n/s*l)-2,h=void 0;(h=u>=0?function(e,t,n){void 0===n&&(n="tail");var r=e.length,i="";if("tail"===n){for(var a=0,o=0;a<t&&a+ew(e,o)<=t;)i+=e[o],a+=ew(e,o),o++;i+="…"}else if("head"===n){for(a=0,o=r-1;a<t&&a+ew(e,o)<=t;)i+=e[o],a+=ew(e,o),o--;i="…"+i}else{for(var s="",l="",c=(a=0,0),u=r-1;a<t;){var h=ew(e,c),p=!1;h+a<=t&&(s+=e[c],c++,a+=h,p=!0);var d=ew(e,u);if(d+a<=t&&(l=e[u]+l,a+=d,u--,p=!0),!p)break}i=s+"…"+l}return i}(a,u,r):"…")&&(t.attr("text",h),c=!0)}return c?t.set("tip",a):t.set("tip",null),c}function rw(e,t){var n=t.x,r=t.y,i=t.content,a=t.style,o=t.id,s=t.name,l=t.rotate,c=t.maxLength,u=t.autoEllipsis,h=t.isVertical,p=t.ellipsisPosition,d=t.background,f=e.addGroup({id:o+"-group",name:s+"-group",attrs:{x:n,y:r}}),m=f.addShape({type:"text",id:o,name:s,attrs:_p({x:0,y:0,text:i},a)}),g=zC(Yd(d,"padding",0));c&&u&&nw(!h,m,c-(g[1]+g[3]),p);if(d){var v=Yd(d,"style",{}),y=m.getCanvasBBox(),x=y.minX,E=y.minY,b=y.width,C=y.height;f.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:_p({x:x-g[3],y:E-g[0],width:b+g[1]+g[3],height:C+g[0]+g[2]},v)}).toBack()}BC(f,n,r),DC(f,l,n,r)}var iw={fontFamily:'\n  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"',textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},aw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:iw.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:iw.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:iw.lineColor,lineWidth:1}}}})},t.prototype.renderInner=function(e){this.renderLine(e),this.get("text")&&this.renderLabel(e)},t.prototype.renderLine=function(e){var t=this.get("start"),n=this.get("end"),r=this.get("style");this.addShape(e,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:_p({x1:t.x,y1:t.y,x2:n.x,y2:n.y},r)})},t.prototype.getLabelPoint=function(e,t,n){var r;return((r="start"===n?0:"center"===n?.5:ed(n)&&-1!==n.indexOf("%")?parseInt(n,10)/100:pd(n)?n:1)>1||r<0)&&(r=1),{x:$C(e.x,t.x,r),y:$C(e.y,t.y,r)}},t.prototype.renderLabel=function(e){var t=this.get("text"),n=this.get("start"),r=this.get("end"),i=t.position,a=t.content,o=t.style,s=t.offsetX,l=t.offsetY,c=t.autoRotate,u=t.maxLength,h=t.autoEllipsis,p=t.ellipsisPosition,d=t.background,f=t.isVertical,m=void 0!==f&&f,g=this.getLabelPoint(n,r,i),v=g.x+s,y=g.y+l,x={id:this.getElementId("line-text"),name:"annotation-line-text",x:v,y:y,content:a,style:o,maxLength:u,autoEllipsis:h,ellipsisPosition:p,background:d,isVertical:m};if(c){var E=[r.x-n.x,r.y-n.y];x.rotate=Math.atan2(E[1],E[0])}rw(e,x)},t}(JC),ow=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:iw.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:iw.fontFamily}}})},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.renderInner=function(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get("content"),a=this.get("style");rw(e,{id:this.getElementId("text"),name:this.get("name")+"-text",x:n,y:r,content:i,style:a,maxLength:this.get("maxLength"),autoEllipsis:this.get("autoEllipsis"),isVertical:this.get("isVertical"),ellipsisPosition:this.get("ellipsisPosition"),background:this.get("background"),rotate:this.get("rotate")})},t.prototype.resetLocation=function(){var e=this.getElementByLocalId("text-group");if(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get("rotate");BC(e,n,r),DC(e,i,n,r)}},t}(JC),sw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,style:{stroke:"#999",lineWidth:1}})},t.prototype.renderInner=function(e){this.renderArc(e)},t.prototype.getArcPath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,a=YC(t,n,r),o=YC(t,n,i),s=i-r>Math.PI?1:0,l=[["M",a.x,a.y]];if(i-r==2*Math.PI){var c=YC(t,n,r+Math.PI);l.push(["A",n,n,0,s,1,c.x,c.y]),l.push(["A",n,n,0,s,1,o.x,o.y])}else l.push(["A",n,n,0,s,1,o.x,o.y]);return l},t.prototype.renderArc=function(e){var t=this.getArcPath(),n=this.get("style");this.addShape(e,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:_p({path:t},n)})},t}(JC),lw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:iw.regionColor,opacity:.4}}})},t.prototype.renderInner=function(e){this.renderRegion(e)},t.prototype.renderRegion=function(e){var t=this.get("start"),n=this.get("end"),r=this.get("style"),i=jC({start:t,end:n});this.addShape(e,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:_p({x:i.x,y:i.y,width:i.width,height:i.height},r)})},t}(JC),cw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},t.prototype.renderInner=function(e){this.renderImage(e)},t.prototype.getImageAttrs=function(){var e=this.get("start"),t=this.get("end"),n=this.get("style"),r=jC({start:e,end:t}),i=this.get("src");return _p({x:r.x,y:r.y,img:i,width:r.width,height:r.height},n)},t.prototype.renderImage=function(e){this.addShape(e,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},t}(JC),uw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:iw.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:iw.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:iw.fontFamily}}}})},t.prototype.renderInner=function(e){Yd(this.get("line"),"display")&&this.renderLine(e),Yd(this.get("text"),"display")&&this.renderText(e),Yd(this.get("point"),"display")&&this.renderPoint(e),this.get("autoAdjust")&&this.autoAdjust(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},t.prototype.renderPoint=function(e){var t=this.getShapeAttrs().point;this.addShape(e,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:t})},t.prototype.renderLine=function(e){var t=this.getShapeAttrs().line;this.addShape(e,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:t})},t.prototype.renderText=function(e){var t=this.getShapeAttrs().text,n=t.x,r=t.y,i=t.text,a=Ap(t,["x","y","text"]),o=this.get("text"),s=o.background,l=o.maxLength,c=o.autoEllipsis,u=o.isVertival,h=o.ellipsisPosition;rw(e,{x:n,y:r,id:this.getElementId("text"),name:"annotation-text",content:i,style:a,background:s,maxLength:l,autoEllipsis:c,isVertival:u,ellipsisPosition:h})},t.prototype.autoAdjust=function(e){var t=this.get("direction"),n=this.get("x"),r=this.get("y"),i=Yd(this.get("line"),"length",0),a=this.get("coordinateBBox"),o=e.getBBox(),s=o.minX,l=o.maxX,c=o.minY,u=o.maxY,h=e.findById(this.getElementId("text-group")),p=e.findById(this.getElementId("text")),d=e.findById(this.getElementId("line"));if(a){if(h){if(n+s<=a.minX){var f=a.minX-(n+s);BC(h,h.attr("x")+f,h.attr("y"))}if(n+l>=a.maxX){f=n+l-a.maxX;BC(h,h.attr("x")-f,h.attr("y"))}}if("upward"===t&&r+c<=a.minY||"upward"!==t&&r+u>=a.maxY){var m=void 0,g=void 0;"upward"===t&&r+c<=a.minY?(m="top",g=1):(m="bottom",g=-1),p.attr("textBaseline",m),d&&d.attr("path",[["M",0,0],["L",0,i*g]]),BC(h,h.attr("x"),(i+2)*g)}}},t.prototype.getShapeAttrs=function(){var e=Yd(this.get("line"),"display"),t=Yd(this.get("point"),"style",{}),n=Yd(this.get("line"),"style",{}),r=Yd(this.get("text"),"style",{}),i=this.get("direction"),a=e?Yd(this.get("line"),"length",0):0,o="upward"===i?-1:1;return{point:_p({x:0,y:0},t),line:_p({path:[["M",0,0],["L",0,a*o]]},n),text:_p({x:0,y:(a+2)*o,text:Yd(this.get("text"),"content",""),textBaseline:"upward"===i?"bottom":"top"},r)}},t}(JC),hw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:iw.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:iw.textColor,fontFamily:iw.fontFamily}}}})},t.prototype.renderInner=function(e){var t=Yd(this.get("region"),"style",{});Yd(this.get("text"),"style",{});var n=this.get("lineLength")||0,r=this.get("points");if(r.length){var i=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=Math.min.apply(Math,t),i=Math.min.apply(Math,n),a=Math.max.apply(Math,t),o=Math.max.apply(Math,n);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}(r),a=[];a.push(["M",r[0].x,i.minY-n]),r.forEach((function(e){a.push(["L",e.x,e.y])})),a.push(["L",r[r.length-1].x,r[r.length-1].y-n]),this.addShape(e,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:_p({path:a},t)}),rw(e,_p({id:this.getElementId("text"),name:"annotation-text",x:(i.minX+i.maxX)/2,y:i.minY-n},this.get("text")))}},t}(JC),pw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},t.prototype.renderInner=function(e){var t=this,n=this.get("start"),r=this.get("end"),i=this.addGroup(e,{id:this.getElementId("region-filter"),capture:!1});Hp(this.get("shapes"),(function(e,n){var r=e.get("type"),a=Nd(e.attr());t.adjustShapeAttrs(a),t.addShape(i,{id:t.getElementId("shape-"+r+"-"+n),capture:!1,type:r,attrs:a})}));var a=jC({start:n,end:r});i.setClip({type:"rect",attrs:{x:a.minX,y:a.minY,width:a.width,height:a.height}})},t.prototype.adjustShapeAttrs=function(e){var t=this.get("color");e.fill&&(e.fill=e.fillStyle=t),e.stroke=e.strokeStyle=t},t}(JC),dw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"annotation",type:"shape",draw:Zd})},t.prototype.renderInner=function(e){var t=this.get("render");Rp(t)&&t(e)},t}(JC),fw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.show=function(){this.get("container").style.display="",this.set("visible",!0)},t.prototype.hide=function(){this.get("container").style.display="none",this.set("visible",!1)},t.prototype.setCapture=function(e){var t=e?"auto":"none";this.getContainer().style.pointerEvents=t,this.set("capture",e)},t.prototype.getBBox=function(){var e=this.getContainer();return GC(parseFloat(e.style.left)||0,parseFloat(e.style.top)||0,e.clientWidth,e.clientHeight)},t.prototype.clear=function(){HC(this.get("container"))},t.prototype.destroy=function(){this.removeEvent(),this.removeDom(),e.prototype.destroy.call(this)},t.prototype.init=function(){e.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},t.prototype.initCapture=function(){this.setCapture(this.get("capture"))},t.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},t.prototype.initDom=function(){},t.prototype.initContainer=function(){var e=this.get("container");if(Dp(e)){e=this.createDom();var t=this.get("parent");ed(t)&&(t=document.getElementById(t),this.set("parent",t)),t.appendChild(e),this.set("container",e)}else ed(e)&&(e=document.getElementById(e),this.set("container",e));this.get("parent")||this.set("parent",e.parentNode)},t.prototype.resetStyles=function(){var e=this.get("domStyles"),t=this.get("defaultStyles");e=e?Rd({},t,e):t,this.set("domStyles",e)},t.prototype.applyStyles=function(){var e=this.get("domStyles");if(e){var t=this.getContainer();this.applyChildrenStyles(t,e);var n,r=this.get("containerClassName");if(r&&(n=r,t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))))Nf(t,e[r])}},t.prototype.applyChildrenStyles=function(e,t){Hp(t,(function(t,n){Hp(e.getElementsByClassName(n),(function(e){Nf(e,t)}))}))},t.prototype.applyStyle=function(e,t){Nf(t,this.get("domStyles")[e])},t.prototype.createDom=function(){return Af(this.get("containerTpl"))},t.prototype.initEvent=function(){},t.prototype.removeDom=function(){var e=this.get("container");e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.removeEvent=function(){},t.prototype.updateInner=function(e){yd(e,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},t.prototype.resetPosition=function(){},t}(KC),mw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},t.prototype.render=function(){var e=this.getContainer(),t=this.get("html");HC(e);var n=Rp(t)?t(e):t;Od(n)?e.appendChild(n):ed(n)&&e.appendChild(Af(n)),this.resetPosition()},t.prototype.resetPosition=function(){var e=this.getContainer(),t=this.getLocation(),n=t.x,r=t.y,i=this.get("alignX"),a=this.get("alignY"),o=this.get("offsetX"),s=this.get("offsetY"),l=Mf(e),c=If(e),u={x:n,y:r};"middle"===i?u.x-=Math.round(l/2):"right"===i&&(u.x-=Math.round(l)),"middle"===a?u.y-=Math.round(c/2):"bottom"===a&&(u.y-=Math.round(c)),o&&(u.x+=o),s&&(u.y+=s),Nf(e,{position:"absolute",left:u.x+"px",top:u.y+"px",zIndex:this.get("zIndex")})},t}(fw),gw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:aw,Text:ow,Arc:sw,Region:lw,Image:cw,DataMarker:uw,DataRegion:hw,RegionFilter:pw,Shape:dw,Html:mw});function vw(e,t,n){var r=t+"Style",i=null;return Hp(n,(function(t,n){e[n]&&t[r]&&(i||(i={}),Md(i,t[r]))})),i}var yw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:iw.lineColor}},tickLine:{style:{lineWidth:1,stroke:iw.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:iw.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:iw.textColor,fontFamily:iw.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:iw.textColor,textBaseline:"middle",fontFamily:iw.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:iw.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},t.prototype.renderInner=function(e){this.get("line")&&this.drawLine(e),this.drawTicks(e),this.get("title")&&this.drawTitle(e)},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("ticks")},t.prototype.setItems=function(e){this.update({ticks:e})},t.prototype.updateItem=function(e,t){Md(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("label-group");e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n,this.updateTickStates(e)},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get("tickStates"),n=[];return Hp(t,(function(t,r){e[r]&&n.push(r)})),n},t.prototype.clearItemsState=function(e){var t=this;Hp(this.getItemsByState(e),(function(n){t.setItemState(n,e,!1)}))},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return Fp(n,(function(n){return t.hasState(n,e)}))},t.prototype.getSidePoint=function(e,t){var n=this.getSideVector(t,e);return{x:e.x+n[0],y:e.y+n[1]}},t.prototype.getTextAnchor=function(e){var t;return dd(e[0],0)?t="center":e[0]>0?t="start":e[0]<0&&(t="end"),t},t.prototype.getTextBaseline=function(e){var t;return dd(e[1],0)?t="middle":e[1]>0?t="top":e[1]<0&&(t="bottom"),t},t.prototype.processOverlap=function(e){},t.prototype.drawLine=function(e){var t=this.getLinePath(),n=this.get("line");this.addShape(e,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:Md({path:t},n.style)})},t.prototype.getTickLineItems=function(e){var t=this,n=[],r=this.get("tickLine"),i=r.alignTick,a=r.length,o=1;return e.length>=2&&(o=e[1].value-e[0].value),Hp(e,(function(e){var r=e.point;i||(r=t.getTickPoint(e.value-o/2));var s=t.getSidePoint(r,a);n.push({startPoint:r,tickValue:e.value,endPoint:s,tickId:e.id,id:"tickline-"+e.id})})),n},t.prototype.getSubTickLineItems=function(e){var t=[],n=this.get("subTickLine"),r=n.count,i=e.length;if(i>=2)for(var a=0;a<i-1;a++)for(var o=e[a],s=e[a+1],l=0;l<r;l++){var c=(l+1)/(r+1),u=(1-c)*o.tickValue+c*s.tickValue,h=this.getTickPoint(u),p=this.getSidePoint(h,n.length);t.push({startPoint:h,endPoint:p,tickValue:u,id:"sub-"+o.id+"-"+l})}return t},t.prototype.getTickLineAttrs=function(e,t,n,r){var i=this.get(t).style,a={points:[e.startPoint,e.endPoint]},o=Yd(this.get("theme"),["tickLine","style"],{});i=Rp(i)?Md({},o,i(a,n,r)):i;var s=e.startPoint,l=e.endPoint;return _p({x1:s.x,y1:s.y,x2:l.x,y2:l.y},i)},t.prototype.drawTick=function(e,t,n,r,i){this.addShape(t,{type:"line",id:this.getElementId(e.id),name:"axis-"+n,attrs:this.getTickLineAttrs(e,n,r,i)})},t.prototype.drawTickLines=function(e){var t=this,n=this.get("ticks"),r=this.get("subTickLine"),i=this.getTickLineItems(n),a=this.addGroup(e,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),o=this.get("tickLine");if(Hp(i,(function(n,r){if(o.displayWithLabel){var s=t.getElementId("label-"+n.tickId);e.findById(s)&&t.drawTick(n,a,"tickLine",r,i)}else t.drawTick(n,a,"tickLine",r,i)})),r){var s=this.getSubTickLineItems(i);Hp(s,(function(e,n){t.drawTick(e,a,"subTickLine",n,s)}))}},t.prototype.processTicks=function(){var e=this;Hp(this.get("ticks"),(function(t){t.point=e.getTickPoint(t.value),Dp(t.id)&&(t.id=t.name)}))},t.prototype.drawTicks=function(e){var t=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(e),this.get("tickLine")&&this.drawTickLines(e),Hp(this.get("ticks"),(function(n){t.applyTickStates(n,e)}))},t.prototype.optimizeTicks=function(){var e=this.get("optimize"),t=this.get("ticks");if(e&&e.enable&&e.threshold>0){var n=Jd(t);if(n>e.threshold){var r=Math.ceil(n/e.threshold),i=t.filter((function(e,t){return t%r==0}));this.set("ticks",i),this.set("originalTicks",t)}}},t.prototype.getLabelAttrs=function(e,t,n){var r=this.get("label"),i=r.offset,a=r.offsetX,o=r.offsetY,s=r.rotate,l=r.formatter,c=this.getSidePoint(e.point,i),u=this.getSideVector(i,c),h=l?l(e.name,e,t):e.name,p=r.style;p=Rp(p)?Yd(this.get("theme"),["label","style"],{}):p;var d=Md({x:c.x+a,y:c.y+o,text:h,textAlign:this.getTextAnchor(u),textBaseline:this.getTextBaseline(u)},p);return s&&(d.matrix=LC(c,s)),d},t.prototype.drawLabels=function(e){var t=this,n=this.get("ticks"),r=this.addGroup(e,{name:"axis-label-group",id:this.getElementId("label-group")});Hp(n,(function(e,i){t.addShape(r,{type:"text",name:"axis-label",id:t.getElementId("label-"+e.id),attrs:t.getLabelAttrs(e,i,n),delegateObject:{tick:e,item:e,index:i}})})),this.processOverlap(r);var i=r.getChildren(),a=Yd(this.get("theme"),["label","style"],{}),o=this.get("label"),s=o.style,l=o.formatter;if(Rp(s)){var c=i.map((function(e){return Yd(e.get("delegateObject"),"tick")}));Hp(i,(function(e,t){var n=e.get("delegateObject").tick,r=l?l(n.name,n,t):n.name,i=Md({},a,s(r,t,c));e.attr(i)}))}},t.prototype.getTitleAttrs=function(){var e=this.get("title"),t=e.style,n=e.position,r=e.offset,i=e.spacing,a=void 0===i?0:i,o=e.autoRotate,s=t.fontSize,l=.5;"start"===n?l=0:"end"===n&&(l=1);var c=this.getTickPoint(l),u=this.getSidePoint(c,r||a+s/2),h=Md({x:u.x,y:u.y,text:e.text},t),p=e.rotate,d=p;if(Dp(p)&&o){d=Zm(this.getAxisVector(c),[1,0],!0)}if(d){var f=LC(u,d);h.matrix=f}return h},t.prototype.drawTitle=function(e){this.addShape(e,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},t.prototype.applyTickStates=function(e,t){if(this.getItemStates(e).length){var n=this.get("tickStates"),r=this.getElementId("label-"+e.id),i=t.findById(r);if(i){var a=vw(e,"label",n);a&&i.attr(a)}var o=this.getElementId("tickline-"+e.id),s=t.findById(o);if(s){var l=vw(e,"tickLine",n);l&&s.attr(l)}}},t.prototype.updateTickStates=function(e){var t=this.getItemStates(e),n=this.get("tickStates"),r=this.get("label"),i=this.getElementByLocalId("label-"+e.id),a=this.get("tickLine"),o=this.getElementByLocalId("tickline-"+e.id);if(t.length){if(i){var s=vw(e,"label",n);s&&i.attr(s)}if(o){var l=vw(e,"tickLine",n);l&&o.attr(l)}}else i&&i.attr(r.style),o&&o.attr(a.style)},t}(JC);function xw(e,t,n,r){var i=t.getChildren(),a=!1;return Hp(i,(function(t){var i=nw(e,t,n,r);a=a||i})),a}function Ew(e,t,n){return xw(e,t,n,"tail")}var bw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return Ew},ellipsisHead:function(e,t,n){return xw(e,t,n,"head")},ellipsisTail:Ew,ellipsisMiddle:function(e,t,n){return xw(e,t,n,"middle")}});function Cw(e){return(function(e){var t=e.attr("matrix");return t&&1!==t[0]}(e)?function(e){var t=[0,0,0];return Pm(t,[1,0,0],e),Math.atan2(t[1],t[0])}(e.attr("matrix")):0)%360}function ww(e,t,n,r){var i=!1,a=Cw(t),o=e?Math.abs(n.attr("y")-t.attr("y")):Math.abs(n.attr("x")-t.attr("x")),s=(e?n.attr("y")>t.attr("y"):n.attr("x")>t.attr("x"))?t.getBBox():n.getBBox();if(e){var l=Math.abs(Math.cos(a));i=UC(l,0,Math.PI/180)?s.width+r>o:s.height/l+r>o}else{l=Math.abs(Math.sin(a));i=UC(l,0,Math.PI/180)?s.width+r>o:s.height/l+r>o}return i}function Tw(e,t,n,r){var i=(null==r?void 0:r.minGap)||0,a=t.getChildren().slice().filter((function(e){return e.get("visible")}));if(!a.length)return!1;var o=!1;n&&a.reverse();for(var s=a.length,l=a[0],c=1;c<s;c++){var u=a[c];u.getBBox(),ww(e,l,u,i)?(u.hide(),o=!0):l=u}return o}function Sw(e,t,n){var r=(null==n?void 0:n.minGap)||0,i=t.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],s=o.getBBox(),l=i[1],c=i.length,u=Cw(o),h=e?Math.abs(l.attr("y")-o.attr("y")):Math.abs(l.attr("x")-o.attr("x")),p=0;if(e){var d=Math.abs(Math.cos(u));if(UC(d,0,Math.PI/180))p=(tw(i)+r)/h;else p=(s.height/d+r)/h}else{d=Math.abs(Math.sin(u));if(UC(d,0,Math.PI/180))p=(tw(i)+r)/h;else p=(s.height/d+r)/h}if(p>1){p=Math.ceil(p);for(var f=0;f<c;f++)f%p!=0&&(i[f].hide(),a=!0)}return a}function kw(e,t,n,r){var i=Sw(e,t,r);return Tw(e,t,!1)&&(i=!0),i}var _w=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return kw},reserveFirst:function(e,t,n,r){return Tw(e,t,!1,r)},reserveLast:function(e,t,n,r){return Tw(e,t,!0,r)},reserveBoth:function(e,t,n,r){var i=(null==r?void 0:r.minGap)||0,a=t.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,s=a.length,l=a[0],c=a[s-1],u=l,h=1;h<s-1;h++){var p=a[h];p.getBBox(),ww(e,u,p,i)?(p.hide(),o=!0):u=p}return ww(e,u,c,i)&&(u.hide(),o=!0),o},equidistance:kw,equidistanceWithReverseBoth:function(e,t,n,r){var i=t.getChildren().slice(),a=Sw(e,t,r);if(i.length>2){var o=i[0],s=i[i.length-1];o.get("visible")||(o.show(),Tw(e,t,!1,r)&&(a=!0)),s.get("visible")||(s.show(),Tw(e,t,!0,r)&&(a=!0))}return a}});function Aw(e,t,n,r){var i=t.getChildren();if(!i.length)return!1;if(!e&&i.length<2)return!1;var a=tw(i),o=!1;e?o=!!n&&a>n:o=a>Math.abs(i[1].attr("x")-i[0].attr("x"));o&&function(e,t){Hp(e,(function(e){var n=LC({x:e.attr("x"),y:e.attr("y")},t);e.attr("matrix",n)}))}(i,r(n,a));return o}function Ow(e,t,n,r){return Aw(e,t,n,(function(){return pd(r)?r:e?iw.verticalAxisRotate:iw.horizontalAxisRotate}))}var Iw,Mw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return Ow},fixedAngle:Ow,unfixedAngle:function(e,t,n){return Aw(e,t,n,(function(t,n){if(!t)return e?iw.verticalAxisRotate:iw.horizontalAxisRotate;if(e)return-Math.acos(t/n);var r=0;return(t>n||(r=Math.asin(t/n))>Math.PI/4)&&(r=Math.PI/4),r}))}}),Nw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",autoHide:_w,autoRotate:Mw,autoEllipsis:bw}),Fw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getLinePath=function(){var e=this.get("start"),t=this.get("end"),n=[];return n.push(["M",e.x,e.y]),n.push(["L",t.x,t.y]),n},t.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),n=this.get("end"),r=e.prototype.getInnerLayoutBBox.call(this),i=Math.min(t.x,n.x,r.x),a=Math.min(t.y,n.y,r.y),o=Math.max(t.x,n.x,r.maxX),s=Math.max(t.y,n.y,r.maxY);return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},t.prototype.isVertical=function(){var e=this.get("start"),t=this.get("end");return dd(e.x,t.x)},t.prototype.isHorizontal=function(){var e=this.get("start"),t=this.get("end");return dd(e.y,t.y)},t.prototype.getTickPoint=function(e){var t=this.get("start"),n=this.get("end"),r=n.x-t.x,i=n.y-t.y;return{x:t.x+r*e,y:t.y+i*e}},t.prototype.getSideVector=function(e){var t=$m([0,0],this.getAxisVector()),n=this.get("verticalFactor");return Hm([0,0],[t[1],-1*t[0]],e*n)},t.prototype.getAxisVector=function(){var e=this.get("start"),t=this.get("end");return[t.x-e.x,t.y-e.y]},t.prototype.processOverlap=function(e){var t=this,n=this.isVertical(),r=this.isHorizontal();if(n||r){var i=this.get("label"),a=this.get("title"),o=this.get("verticalLimitLength"),s=i.offset,l=o,c=0,u=0;if(a&&(c=a.style.fontSize,u=a.spacing),l&&(l=l-s-u-c),Hp(this.get("overlapOrder"),(function(n){i[n]&&t.canProcessOverlap(n)&&t.autoProcessOverlap(n,i[n],e,l)})),a&&Dp(a.offset)){var h=e.getCanvasBBox(),p=n?h.width:h.height;a.offset=s+p+u+c/2}}},t.prototype.canProcessOverlap=function(e){var t=this.get("label");return"autoRotate"!==e||Dp(t.rotate)},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,a=this.isVertical(),o=!1,s=Nw[e];if(!0===t)this.get("label"),o=s.getDefault()(a,n,r);else if(Rp(t))o=t(a,n,r);else if(zp(t)){var l=t;s[l.type]&&(o=s[l.type](a,n,r,l.cfg))}else s[t]&&(o=s[t](a,n,r));if("autoRotate"===e){if(o){var c=n.getChildren(),u=this.get("verticalFactor");Hp(c,(function(e){if("center"===e.attr("textAlign")){var t=u>0?"end":"start";e.attr("textAlign",t)}}))}}else if("autoHide"===e){Hp(n.getChildren().slice(0),(function(e){e.get("visible")||(i.get("isRegister")&&i.unregisterElement(e),e.remove())}))}},t}(yw),Lw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},t.prototype.getLinePath=function(){var e=this.get("center"),t=e.x,n=e.y,r=this.get("radius"),i=r,a=this.get("startAngle"),o=this.get("endAngle"),s=[];if(Math.abs(o-a)===2*Math.PI)s=[["M",t,n-i],["A",r,i,0,1,1,t,n+i],["A",r,i,0,1,1,t,n-i],["Z"]];else{var l=this.getCirclePoint(a),c=this.getCirclePoint(o),u=Math.abs(o-a)>Math.PI?1:0,h=a>o?0:1;s=[["M",t,n],["L",l.x,l.y],["A",r,i,0,u,h,c.x,c.y],["L",t,n]]}return s},t.prototype.getTickPoint=function(e){var t=this.get("startAngle"),n=t+(this.get("endAngle")-t)*e;return this.getCirclePoint(n)},t.prototype.getSideVector=function(e,t){var n=this.get("center"),r=[t.x-n.x,t.y-n.y];return Hm(r,r,this.get("verticalFactor")*e/Gm(r)),r},t.prototype.getAxisVector=function(e){var t=this.get("center"),n=[e.x-t.x,e.y-t.y];return[n[1],-1*n[0]]},t.prototype.getCirclePoint=function(e,t){var n=this.get("center");return t=t||this.get("radius"),{x:n.x+Math.cos(e)*t,y:n.y+Math.sin(e)*t}},t.prototype.canProcessOverlap=function(e){var t=this.get("label");return"autoRotate"!==e||Dp(t.rotate)},t.prototype.processOverlap=function(e){var t=this,n=this.get("label"),r=this.get("title"),i=this.get("verticalLimitLength"),a=n.offset,o=i,s=0,l=0;if(r&&(s=r.style.fontSize,l=r.spacing),o&&(o=o-a-l-s),Hp(this.get("overlapOrder"),(function(r){n[r]&&t.canProcessOverlap(r)&&t.autoProcessOverlap(r,n[r],e,o)})),r&&Dp(r.offset)){var c=e.getCanvasBBox().height;r.offset=a+c+l+s/2}},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,a=!1,o=Nw[e];if(r>0)if(!0===t)a=o.getDefault()(!1,n,r);else if(Rp(t))a=t(!1,n,r);else if(zp(t)){var s=t;o[s.type]&&(a=o[s.type](!1,n,r,s.cfg))}else o[t]&&(a=o[t](!1,n,r));if("autoRotate"===e){if(a){var l=n.getChildren(),c=this.get("verticalFactor");Hp(l,(function(e){if("center"===e.attr("textAlign")){var t=c>0?"end":"start";e.attr("textAlign",t)}}))}}else if("autoHide"===e){Hp(n.getChildren().slice(0),(function(e){e.get("visible")||(i.get("isRegister")&&i.unregisterElement(e),e.remove())}))}},t}(yw),Pw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:iw.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:iw.textColor,textAlign:"center",textBaseline:"middle",fontFamily:iw.fontFamily}},textBackground:{padding:5,style:{stroke:iw.lineColor}}}})},t.prototype.renderInner=function(e){this.get("line")&&this.renderLine(e),this.get("text")&&(this.renderText(e),this.renderBackground(e))},t.prototype.renderText=function(e){var t=this.get("text"),n=t.style,r=t.autoRotate,i=t.content;if(!Dp(i)){var a=this.getTextPoint(),o=null;if(r)o=LC(a,this.getRotateAngle());this.addShape(e,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:_p(_p(_p({},a),{text:i,matrix:o}),n)})}},t.prototype.renderLine=function(e){var t=this.getLinePath(),n=this.get("line").style;this.addShape(e,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:_p({path:t},n)})},t.prototype.renderBackground=function(e){var t=this.getElementId("text"),n=e.findById(t),r=this.get("textBackground");if(r&&n){var i=n.getBBox(),a=zC(r.padding),o=r.style;this.addShape(e,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:_p({x:i.x-a[3],y:i.y-a[0],width:i.width+a[1]+a[3],height:i.height+a[0]+a[2],matrix:n.attr("matrix")},o)}).toBack()}},t}(JC),Rw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text").position,i=Math.atan2(n.y-t.y,n.x-t.x);return"start"===r?i-Math.PI/2:i+Math.PI/2},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text");return XC(t,n,r.position,r.offset)},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.start,n=e.end;return[["M",t.x,t.y],["L",n.x,n.y]]},t}(Pw),Dw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.startAngle,n=e.endAngle;return"start"===this.get("text").position?t+Math.PI/2:n-Math.PI/2},t.prototype.getTextPoint=function(){var e=this.get("text"),t=e.position,n=e.offset,r=this.getLocation(),i=r.center,a=r.radius,o=r.startAngle,s=r.endAngle,l="start"===t?o:s,c=this.getRotateAngle()-Math.PI,u=YC(i,a,l),h=Math.cos(c)*n,p=Math.sin(c)*n;return{x:u.x+h,y:u.y+p}},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,a=null;if(i-r==2*Math.PI){var o=t.x,s=t.y;a=[["M",o,s-n],["A",n,n,0,1,1,o,s+n],["A",n,n,0,1,1,o,s-n],["Z"]]}else{var l=YC(t,n,r),c=YC(t,n,i),u=Math.abs(i-r)>Math.PI?1:0,h=r>i?0:1;a=[["M",l.x,l.y],["A",n,n,0,u,h,c.x,c.y]]}return a},t}(Pw),Bw=((Iw={})["g2-crosshair"]={position:"relative"},Iw["g2-crosshair-line"]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},Iw["g2-crosshair-text"]={position:"absolute",color:iw.textColor,fontFamily:iw.fontFamily},Iw),zw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="g2-crosshair"></div>',crosshairTpl:'<div class="g2-crosshair-line"></div>',textTpl:'<span class="g2-crosshair-text">{content}</span>',domStyles:null,containerClassName:"g2-crosshair",defaultStyles:Bw,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},t.prototype.render=function(){this.resetText(),this.resetPosition()},t.prototype.initCrossHair=function(){var e=this.getContainer(),t=Af(this.get("crosshairTpl"));e.appendChild(t),this.applyStyle("g2-crosshair-line",t),this.set("crosshairEl",t)},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text");return XC(t,n,r.position,r.offset)},t.prototype.resetText=function(){var e=this.get("text"),t=this.get("textEl");if(e){var n=e.content;if(!t){var r=this.getContainer();t=Af(Cd(this.get("textTpl"),e)),r.appendChild(t),this.applyStyle("g2-crosshair-text",t),this.set("textEl",t)}t.innerHTML=n}else t&&t.remove()},t.prototype.isVertical=function(e,t){return e.x===t.x},t.prototype.resetPosition=function(){var e=this.get("crosshairEl");e||(this.initCrossHair(),e=this.get("crosshairEl"));var t=this.get("start"),n=this.get("end"),r=Math.min(t.x,n.x),i=Math.min(t.y,n.y);this.isVertical(t,n)?Nf(e,{width:"1px",height:WC(Math.abs(n.y-t.y))}):Nf(e,{height:"1px",width:WC(Math.abs(n.x-t.x))}),Nf(e,{top:WC(i),left:WC(r)}),this.alignText()},t.prototype.alignText=function(){var e=this.get("textEl");if(e){var t=this.get("text").align,n=e.clientWidth,r=this.getTextPoint();switch(t){case"center":r.x=r.x-n/2;break;case"right":r.x=r.x-n}Nf(e,{top:WC(r.y),left:WC(r.x)})}},t.prototype.updateInner=function(t){yd(t,"text")&&this.resetText(),e.prototype.updateInner.call(this,t)},t}(fw),Hw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:Rw,Circle:Dw,Base:Pw,Html:zw}),jw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:iw.lineColor}}}})},t.prototype.getLineType=function(){return(this.get("line")||this.get("defaultCfg").line).type},t.prototype.renderInner=function(e){this.drawGrid(e)},t.prototype.getAlternatePath=function(e,t){var n=this.getGridPath(e),r=t.slice(0).reverse(),i=this.getGridPath(r,!0);return this.get("closed")?n=n.concat(i):(i[0][0]="L",(n=n.concat(i)).push(["Z"])),n},t.prototype.getPathStyle=function(){return this.get("line").style},t.prototype.drawGrid=function(e){var t=this,n=this.get("line"),r=this.get("items"),i=this.get("alternateColor"),a=null;Hp(r,(function(o,s){var l=o.id||s;if(n){var c=t.getPathStyle();c=Rp(c)?c(o,s,r):c;var u=t.getElementId("line-"+l),h=t.getGridPath(o.points);t.addShape(e,{type:"path",name:"grid-line",id:u,attrs:Md({path:h},c)})}if(i&&s>0){var p=t.getElementId("region-"+l),d=s%2==0;if(ed(i))d&&t.drawAlternateRegion(p,e,a.points,o.points,i);else{var f=d?i[1]:i[0];t.drawAlternateRegion(p,e,a.points,o.points,f)}}a=o}))},t.prototype.drawAlternateRegion=function(e,t,n,r,i){var a=this.getAlternatePath(n,r);this.addShape(t,{type:"path",id:e,name:"grid-region",attrs:{path:a,fill:i}})},t}(JC);var Gw,$w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{type:"circle",center:null,closed:!0})},t.prototype.getGridPath=function(e,t){var n,r,i,a,o,s,l=this.getLineType(),c=this.get("closed"),u=[];if(e.length)if("circle"===l){var h=this.get("center"),p=e[0],d=(n=h.x,r=h.y,i=p.x,a=p.y,o=i-n,s=a-r,Math.sqrt(o*o+s*s)),f=t?0:1;c?(u.push(["M",h.x,h.y-d]),u.push(["A",d,d,0,0,f,h.x,h.y+d]),u.push(["A",d,d,0,0,f,h.x,h.y-d]),u.push(["Z"])):Hp(e,(function(e,t){0===t?u.push(["M",e.x,e.y]):u.push(["A",d,d,0,0,f,e.x,e.y])}))}else Hp(e,(function(e,t){0===t?u.push(["M",e.x,e.y]):u.push(["L",e.x,e.y])})),c&&u.push(["Z"]);return u},t}(jw),Yw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{type:"line"})},t.prototype.getGridPath=function(e){var t=[];return Hp(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},t}(jw),Uw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},t.prototype.getLayoutBBox=function(){var t=e.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),r=this.get("maxHeight"),i=t.width,a=t.height;return n&&(i=Math.min(i,n)),r&&(a=Math.min(a,r)),GC(t.minX,t.minY,i,a)},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.resetLocation=function(){var e=this.get("x"),t=this.get("y"),n=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e+n,y:t+r})},t.prototype.applyOffset=function(){this.resetLocation()},t.prototype.getDrawPoint=function(){return this.get("currentPoint")},t.prototype.setDrawPoint=function(e){return this.set("currentPoint",e)},t.prototype.renderInner=function(e){this.resetDraw(),this.get("title")&&this.drawTitle(e),this.drawLegendContent(e),this.get("background")&&this.drawBackground(e)},t.prototype.drawBackground=function(e){var t=this.get("background"),n=e.getBBox(),r=zC(t.padding),i=_p({x:0,y:0,width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},t.style);this.addShape(e,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:i}).toBack()},t.prototype.drawTitle=function(e){var t=this.get("currentPoint"),n=this.get("title"),r=n.spacing,i=n.style,a=n.text,o=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:_p({text:a,x:t.x,y:t.y},i)}).getBBox();this.set("currentPoint",{x:t.x,y:o.maxY+r})},t.prototype.resetDraw=function(){var e=this.get("background"),t={x:0,y:0};if(e){var n=zC(e.padding);t.x=n[3],t.y=n[0]}this.set("currentPoint",t)},t}(JC),Vw={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},Ww={fill:iw.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:iw.fontFamily,fontWeight:"normal",lineHeight:12},Xw=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:n},100):e.attr({matrix:n})}},t.onNavigationAfter=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:n},100):e.attr({matrix:n})}},t}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:iw.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:iw.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:Vw,itemName:{spacing:16,style:Ww},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:Ww},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:iw.uncheckedColor},markerStyle:{fill:iw.uncheckedColor,stroke:iw.uncheckedColor}},inactive:{nameStyle:{fill:iw.uncheckedColor},markerStyle:{opacity:.2}}}}})},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("items")},t.prototype.setItems=function(e){this.update({items:e})},t.prototype.updateItem=function(e,t){Md(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("item-group");e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n;var r=this.getElementByLocalId("item-"+e.id);if(r){var i=this.getItems().indexOf(e),a=this.createOffScreenGroup(),o=this.drawItem(e,i,this.getItemHeight(),a);this.updateElements(o,r),this.clearUpdateStatus(r)}},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get("itemStates"),n=[];return Hp(t,(function(t,r){e[r]&&n.push(r)})),n},t.prototype.clearItemsState=function(e){var t=this;Hp(this.getItemsByState(e),(function(n){t.setItemState(n,e,!1)}))},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return Fp(n,(function(n){return t.hasState(n,e)}))},t.prototype.drawLegendContent=function(e){this.processItems(),this.drawItems(e)},t.prototype.processItems=function(){Hp(this.get("items"),(function(e){e.id||(e.id=e.name)}))},t.prototype.drawItems=function(e){var t=this,n=this.addGroup(e,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),r=this.addGroup(n,{id:this.getElementId("item-group"),name:"legend-item-group"}),i=this.getItemHeight(),a=this.get("itemWidth"),o=this.get("itemSpacing"),s=this.get("itemMarginBottom"),l=this.get("currentPoint"),c=l.x,u=l.y,h=this.get("layout"),p=this.get("items"),d=!1,f=0,m=this.get("maxWidth"),g=this.get("maxHeight");Hp(p,(function(e,n){var p=t.drawItem(e,n,i,r),v=p.getBBox(),y=a||v.width;y>f&&(f=y),"horizontal"===h?(m&&m<l.x+y-c&&(d=!0,l.x=c,l.y+=i+s),t.moveElementTo(p,l),l.x+=y+o):(g&&g<l.y+i+s-u&&(d=!0,l.x+=f+o,l.y=u,f=0),t.moveElementTo(p,l),l.y+=i+s)})),d&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=c,this.startY=u,this.adjustNavigation(e,r))},t.prototype.getItemHeight=function(){var e=this.get("itemHeight");if(!e){var t=(this.get("itemName")||{}).style;if(Rp(t)){var n=this.getItems();n.forEach((function(r,i){var a=_p(_p({},Ww),t(r,i,n)).fontSize;e<a&&(e=a)}))}else t&&(e=t.fontSize)}return e},t.prototype.drawMarker=function(e,t,n,r){var i=_p(_p(_p({x:0,y:r/2},t.style),{symbol:Yd(n.marker,"symbol","circle")}),Yd(n.marker,"style",{})),a=this.addShape(e,{type:"marker",id:this.getElementId("item-"+n.id+"-marker"),name:"legend-item-marker",attrs:i}),o=a.getBBox();a.attr("x",o.width/2);var s=a.attr(),l=s.stroke,c=s.fill;return l&&a.set("isStroke",!0),c&&a.set("isFill",!0),a},t.prototype.drawItemText=function(e,t,n,r,i,a,o){var s=n.formatter,l=n.style,c=_p(_p({x:a,y:i/2,text:s?s(r[t],r,o):r[t]},Ww),Rp(l)?l(r,o,this.getItems()):l);return this.addShape(e,{type:"text",id:this.getElementId("item-"+r.id+"-"+t),name:"legend-item-"+t,attrs:c})},t.prototype.drawItem=function(e,t,n,r){var i="item-"+e.id,a=this.addGroup(r,{name:"legend-item-container",id:this.getElementId("item-container-"+i),delegateObject:{item:e,index:t}}),o=this.addGroup(a,{name:"legend-item",id:this.getElementId(i),delegateObject:{item:e,index:t}}),s=this.get("marker"),l=this.get("itemName"),c=this.get("itemValue"),u=this.get("itemBackground"),h=this.getLimitItemWidth(),p=0;if(s){var d=this.drawMarker(o,s,e,n),f=s.spacing,m=Yd(e,["marker","spacing"]);pd(m)&&(f=m),p=d.getBBox().maxX+f}if(l){var g=this.drawItemText(o,"name",l,e,n,p,t);h&&nw(!0,g,ud(h-p,0,h)),p=g.getBBox().maxX+l.spacing}if(c){var v=this.drawItemText(o,"value",c,e,n,p,t);h&&(c.alignRight?(v.attr({textAlign:"right",x:h}),nw(!0,v,ud(h-p,0,h),"head")):nw(!0,v,ud(h-p,0,h)))}if(u){var y=o.getBBox();this.addShape(o,{type:"rect",name:"legend-item-background",id:this.getElementId(i+"-background"),attrs:_p({x:0,y:0,width:y.width,height:n},u.style)}).toBack()}return this.applyItemStates(e,o),o},t.prototype.adjustNavigation=function(e,t){var n=this,r=this.startX,i=this.startY,a=this.get("layout"),o=t.findAll((function(e){return"legend-item"===e.get("name")})),s=this.get("maxWidth"),l=this.get("maxHeight"),c=this.get("itemWidth"),u=this.get("itemSpacing"),h=this.getItemHeight(),p=Rd({},Vw,this.get("pageNavigator")),d=this.drawNavigation(e,a,"00/00",p),f=d.getBBox(),m={x:r,y:i},g=1,v=0,y=0,x=0,E=this.get("itemMarginBottom");if("horizontal"===a){var b=this.get("maxRow")||1,C=h+(1===b?0:E);this.pageHeight=C*b,Hp(o,(function(e){var t=e.getBBox(),i=c||t.width;(v&&v<m.x+i+u||s<m.x+i+u+f.width)&&(1===g&&(v=m.x+u,n.pageWidth=v,n.moveElementTo(d,{x:s-u-f.width-f.minX,y:m.y+h/2-f.height/2-f.minY})),g+=1,m.x=r,m.y+=C),n.moveElementTo(e,m),e.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:i+u,height:h}}),m.x+=i+u}))}else{Hp(o,(function(e){var t=e.getBBox();t.width>y&&(y=t.width)})),x=y,y+=u,s&&(y=Math.min(s,y),x=Math.min(s,x)),this.pageWidth=y,this.pageHeight=l-Math.max(f.height,h+E);var w=Math.floor(this.pageHeight/(h+E));Hp(o,(function(e,t){0!==t&&t%w==0&&(g+=1,m.x+=y,m.y=i),n.moveElementTo(e,m),e.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:y,height:h}}),m.y+=h+E})),this.totalPagesCnt=g,this.moveElementTo(d,{x:r+x/2-f.width/2-f.minX,y:l-f.height-f.minY})}this.pageHeight&&this.pageWidth&&t.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),"horizontal"===a&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(g/this.get("maxRow")):this.totalPagesCnt=g,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(d),t.attr("matrix",this.getCurrentNavigationMatrix())},t.prototype.drawNavigation=function(e,t,n,r){var i={x:0,y:0},a=this.addGroup(e,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),o=Yd(r.marker,"style",{}),s=o.size,l=void 0===s?12:s,c=Ap(o,["size"]),u=this.drawArrow(a,i,"navigation-arrow-left","horizontal"===t?"up":"left",l,c);u.on("click",this.onNavigationBack);var h=u.getBBox();i.x+=h.width+2;var p=this.addShape(a,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:_p({x:i.x,y:i.y+l/2,text:n,textBaseline:"middle"},Yd(r.text,"style"))}).getBBox();return i.x+=p.width+2,this.drawArrow(a,i,"navigation-arrow-right","horizontal"===t?"down":"right",l,c).on("click",this.onNavigationAfter),a},t.prototype.updateNavigation=function(e){var t=Rd({},Vw,this.get("pageNavigator")).marker.style,n=t.fill,r=t.opacity,i=t.inactiveFill,a=t.inactiveOpacity,o=this.currentPageIndex+"/"+this.totalPagesCnt,s=e?e.getChildren()[1]:this.getElementByLocalId("navigation-text"),l=e?e.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),c=e?e.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),u=s.getBBox();s.attr("text",o);var h=s.getBBox();s.attr("x",s.attr("x")-(h.width-u.width)/2),l.attr("opacity",1===this.currentPageIndex?a:r),l.attr("fill",1===this.currentPageIndex?i:n),l.attr("cursor",1===this.currentPageIndex?"not-allowed":"pointer"),c.attr("opacity",this.currentPageIndex===this.totalPagesCnt?a:r),c.attr("fill",this.currentPageIndex===this.totalPagesCnt?i:n),c.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},t.prototype.drawArrow=function(e,t,n,r,i,a){var o=t.x,s=t.y,l={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},c=this.addShape(e,{type:"path",id:this.getElementId(n),name:n,attrs:_p({path:[["M",o+i/2,s],["L",o,s+i],["L",o+i,s+i],["Z"]],cursor:"pointer"},a)});return c.attr("matrix",LC({x:o+i/2,y:s+i/2},l[r])),c},t.prototype.getCurrentNavigationMatrix=function(){var e=this,t=e.currentPageIndex,n=e.pageWidth,r=e.pageHeight;return PC("horizontal"===this.get("layout")?{x:0,y:r*(1-t)}:{x:n*(1-t),y:0})},t.prototype.applyItemStates=function(e,t){if(this.getItemStates(e).length>0){var n=t.getChildren(),r=this.get("itemStates");Hp(n,(function(t){var n=t.get("name").split("-")[2],i=vw(e,n,r);i&&(t.attr(i),"marker"!==n||t.get("isStroke")&&t.get("isFill")||(t.get("isStroke")&&t.attr("fill",null),t.get("isFill")&&t.attr("stroke",null)))}))}},t.prototype.getLimitItemWidth=function(){var e=this.get("itemWidth"),t=this.get("maxItemWidth");return t?e&&(t=e<=t?e:t):e&&(t=e),t},t}(Uw),qw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:iw.textColor,textBaseline:"middle",fontFamily:iw.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:iw.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},t.prototype.isSlider=function(){return!0},t.prototype.getValue=function(){return this.getCurrentValue()},t.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},t.prototype.setRange=function(e,t){this.update({min:e,max:t})},t.prototype.setValue=function(e){var t=this.getValue();this.set("value",e);var n=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(n),this.delegateEmit("valuechanged",{originValue:t,value:e})},t.prototype.initEvent=function(){var e=this.get("group");this.bindSliderEvent(e),this.bindRailEvent(e),this.bindTrackEvent(e)},t.prototype.drawLegendContent=function(e){this.drawRail(e),this.drawLabels(e),this.fixedElements(e),this.resetTrack(e),this.resetTrackClip(e),this.get("slidable")&&this.resetHandlers(e)},t.prototype.bindSliderEvent=function(e){this.bindHandlersEvent(e)},t.prototype.bindHandlersEvent=function(e){var t=this;e.on("legend-handler-min:drag",(function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[1];r<n&&(r=n),t.setValue([n,r])})),e.on("legend-handler-max:drag",(function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[0];r>n&&(r=n),t.setValue([r,n])}))},t.prototype.bindRailEvent=function(e){},t.prototype.bindTrackEvent=function(e){var t=this,n=null;e.on("legend-track:dragstart",(function(e){n={x:e.x,y:e.y}})),e.on("legend-track:drag",(function(e){if(n){var r=t.getValueByCanvasPoint(n.x,n.y),i=t.getValueByCanvasPoint(e.x,e.y),a=t.getCurrentValue(),o=a[1]-a[0],s=t.getRange(),l=i-r;l<0?a[0]+l>s.min?t.setValue([a[0]+l,a[1]+l]):t.setValue([s.min,s.min+o]):l>0&&(l>0&&a[1]+l<s.max?t.setValue([a[0]+l,a[1]+l]):t.setValue([s.max-o,s.max])),n={x:e.x,y:e.y}}})),e.on("legend-track:dragend",(function(e){n=null}))},t.prototype.drawLabels=function(e){this.drawLabel("min",e),this.drawLabel("max",e)},t.prototype.drawLabel=function(e,t){var n=this.get("label"),r=n.style,i=n.align,a=n.formatter,o=this.get(e),s=this.getLabelAlignAttrs(e,i),l="label-"+e;this.addShape(t,{type:"text",id:this.getElementId(l),name:"legend-label-"+e,attrs:_p(_p({x:0,y:0,text:Rp(a)?a(o):o},r),s)})},t.prototype.getLabelAlignAttrs=function(e,t){var n="center",r="middle";return this.isVertical()?(n="start",r="rail"!==t?"min"===e?"top":"bottom":"top"):"rail"!==t?(r="top",n="min"===e?"start":"end"):(n="start",r="middle"),{textAlign:n,textBaseline:r}},t.prototype.getRailPath=function(e,t,n,r){var i=this.get("rail"),a=i.size,o=i.defaultLength,s=i.type,l=this.isVertical(),c=n,u=r;c||(c=l?a:o),u||(u=l?o:a);var h=[];return"color"===s?(h.push(["M",e,t]),h.push(["L",e+c,t]),h.push(["L",e+c,t+u]),h.push(["L",e,t+u]),h.push(["Z"])):(h.push(["M",e+c,t]),h.push(["L",e+c,t+u]),h.push(["L",e,t+u]),h.push(["Z"])),h},t.prototype.drawRail=function(e){var t=this.get("rail").style;this.addShape(e,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:_p({path:this.getRailPath(0,0)},t)})},t.prototype.getTrackColor=function(e){var t,n=e.length;if(!n)return null;if(1===n)return e[0];t=this.isVertical()?"l(90)":"l(0)";for(var r=0;r<n;r++){t+=" "+r/(n-1)+":"+e[r]}return t},t.prototype.getTrackPath=function(e){var t=this.getRailShape(e).attr("path");return Nd(t)},t.prototype.getClipTrackAttrs=function(e){var t,n,r,i,a=this.getCurrentValue(),o=a[0],s=a[1],l=this.getRailBBox(e),c=this.getPointByValue(o,e),u=this.getPointByValue(s,e);return this.isVertical()?(t=l.minX,n=c.y,r=l.width,i=u.y-c.y):(t=c.x,n=l.minY,r=u.x-c.x,i=l.height),{x:t,y:n,width:r,height:i}},t.prototype.getTrackAttrs=function(e){var t=this.get("track"),n=this.get("colors");return Md({path:this.getTrackPath(e),fill:this.getTrackColor(n)},t.style)},t.prototype.resetTrackClip=function(e){var t=e||this.get("group"),n=this.getElementId("track"),r=t.findById(n),i=r.getClip(),a=this.getClipTrackAttrs(e);i?i.attr(a):r.setClip({type:"rect",attrs:a})},t.prototype.resetTrack=function(e){var t=this.getElementId("track"),n=e.findById(t),r=this.getTrackAttrs(e);n?n.attr(r):this.addShape(e,{type:"path",id:t,draggable:this.get("slidable"),name:"legend-track",attrs:r})},t.prototype.getPointByValue=function(e,t){var n=this.getRange(),r=n.min,i=(e-r)/(n.max-r),a=this.getRailBBox(t),o={x:0,y:0};return this.isVertical()?(o.x=a.minX+a.width/2,o.y=$C(a.minY,a.maxY,i)):(o.x=$C(a.minX,a.maxX,i),o.y=a.minY+a.height/2),o},t.prototype.getRailShape=function(e){return(e||this.get("group")).findById(this.getElementId("rail"))},t.prototype.getRailBBox=function(e){return this.getRailShape(e).getBBox()},t.prototype.getRailCanvasBBox=function(){return this.get("group").findById(this.getElementId("rail")).getCanvasBBox()},t.prototype.isVertical=function(){return"vertical"===this.get("layout")},t.prototype.getValueByCanvasPoint=function(e,t){var n=this.getRange(),r=n.min,i=n.max,a=this.getRailCanvasBBox(),o=this.isVertical(),s=this.get("step"),l=$C(r,i,o?(t-a.minY)/a.height:(e-a.minX)/a.width);s&&(l=r+Math.round((l-r)/s)*s);return l>i&&(l=i),l<r&&(l=r),l},t.prototype.getCurrentValue=function(){var e=this.get("value");if(!e){var t=this.get("values");return t?[Math.max(Math.min.apply(Math,Op(t,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,Op(t,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return e},t.prototype.resetHandlers=function(e){var t=this.getCurrentValue(),n=t[0],r=t[1];this.resetHandler(e,"min",n),this.resetHandler(e,"max",r)},t.prototype.getHandlerPath=function(e,t){var n=this.isVertical(),r=[],i=e.size,a=t.x,o=t.y,s=1.4*i,l=i/2,c=i/6;if(n){var u=a+.4*s;r.push(["M",a,o]),r.push(["L",u,o+l]),r.push(["L",a+s,o+l]),r.push(["L",a+s,o-l]),r.push(["L",u,o-l]),r.push(["Z"]),r.push(["M",u,o+c]),r.push(["L",a+s-2,o+c]),r.push(["M",u,o-c]),r.push(["L",a+s-2,o-c])}else{var h=o+.4*s;r.push(["M",a,o]),r.push(["L",a-l,h]),r.push(["L",a-l,o+s]),r.push(["L",a+l,o+s]),r.push(["L",a+l,h]),r.push(["Z"]),r.push(["M",a-c,h]),r.push(["L",a-c,o+s-2]),r.push(["M",a+c,h]),r.push(["L",a+c,o+s-2])}return r},t.prototype.resetHandler=function(e,t,n){var r=this.getPointByValue(n,e),i=this.get("handler"),a=this.getHandlerPath(i,r),o=this.getElementId("handler-"+t),s=e.findById(o),l=this.isVertical();s?s.attr("path",a):this.addShape(e,{type:"path",name:"legend-handler-"+t,draggable:!0,id:o,attrs:_p(_p({path:a},i.style),{cursor:l?"ns-resize":"ew-resize"})})},t.prototype.fixedElements=function(e){var t=e.findById(this.getElementId("rail")),n=e.findById(this.getElementId("label-min")),r=e.findById(this.getElementId("label-max")),i=this.getDrawPoint();this.isVertical()?this.fixedVertail(n,r,t,i):this.fixedHorizontal(n,r,t,i)},t.prototype.fitRailLength=function(e,t,n,r){var i=this.isVertical()?"height":"width",a=this.get("label"),o=a.align,s=a.spacing,l=this.get("max"+wd(i));if(l){var c=("rail"===o?n[i]+e[i]+t[i]+2*s:n[i])-l;c>0&&this.changeRailLength(r,i,n[i]-c)}},t.prototype.changeRailLength=function(e,t,n){var r,i=e.getBBox();r="height"===t?this.getRailPath(i.x,i.y,i.width,n):this.getRailPath(i.x,i.y,n,i.height),e.attr("path",r)},t.prototype.changeRailPosition=function(e,t,n){var r=e.getBBox(),i=this.getRailPath(t,n,r.width,r.height);e.attr("path",i)},t.prototype.fixedHorizontal=function(e,t,n,r){var i=this.get("label"),a=i.align,o=i.spacing,s=n.getBBox(),l=e.getBBox(),c=t.getBBox(),u=s.height;this.fitRailLength(l,c,s,n),s=n.getBBox(),"rail"===a?(e.attr({x:r.x,y:r.y+u/2}),this.changeRailPosition(n,r.x+l.width+o,r.y),t.attr({x:r.x+l.width+s.width+2*o,y:r.y+u/2})):"top"===a?(e.attr({x:r.x,y:r.y}),t.attr({x:r.x+s.width,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+o)):(this.changeRailPosition(n,r.x,r.y),e.attr({x:r.x,y:r.y+s.height+o}),t.attr({x:r.x+s.width,y:r.y+s.height+o}))},t.prototype.fixedVertail=function(e,t,n,r){var i=this.get("label"),a=i.align,o=i.spacing,s=n.getBBox(),l=e.getBBox(),c=t.getBBox();if(this.fitRailLength(l,c,s,n),s=n.getBBox(),"rail"===a)e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+o),t.attr({x:r.x,y:r.y+l.height+s.height+2*o});else if("right"===a)e.attr({x:r.x+s.width+o,y:r.y}),this.changeRailPosition(n,r.x,r.y),t.attr({x:r.x+s.width+o,y:r.y+s.height});else{var u=Math.max(l.width,c.width);e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x+u+o,r.y),t.attr({x:r.x,y:r.y+s.height})}},t}(Uw),Kw="g2-tooltip-title",Qw="g2-tooltip-list",Zw="g2-tooltip-crosshair-x",Jw="g2-tooltip-crosshair-y",eT=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CONTAINER_CLASS:"g2-tooltip",TITLE_CLASS:Kw,LIST_CLASS:Qw,LIST_ITEM_CLASS:"g2-tooltip-list-item",MARKER_CLASS:"g2-tooltip-marker",VALUE_CLASS:"g2-tooltip-value",NAME_CLASS:"g2-tooltip-name",CROSSHAIR_X:Zw,CROSSHAIR_Y:Jw}),tT=((Gw={})["g2-tooltip"]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:iw.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},Gw[""+Kw]={marginBottom:"4px"},Gw[""+Qw]={margin:"0px",listStyleType:"none",padding:"0px"},Gw["g2-tooltip-list-item"]={listStyleType:"none",marginBottom:"4px"},Gw["g2-tooltip-marker"]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},Gw["g2-tooltip-value"]={display:"inline-block",float:"right",marginLeft:"30px"},Gw[""+Zw]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Gw[""+Jw]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Gw);var nT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="g2-tooltip"><div class="'+Kw+'"></div><ul class="'+Qw+'"></ul></div>',itemTpl:'<li class="g2-tooltip-list-item" data-index={index}>\n          <span class="g2-tooltip-marker" style="background:{color}"></span>\n          <span class="g2-tooltip-name">{name}</span>:\n          <span class="g2-tooltip-value">{value}</span>\n        </li>',xCrosshairTpl:'<div class="'+Zw+'"></div>',yCrosshairTpl:'<div class="'+Jw+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:"g2-tooltip",crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:tT})},t.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},t.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},t.prototype.show=function(){var e=this.getContainer();e&&!this.destroyed&&(this.set("visible",!0),Nf(e,{visibility:"visible"}),this.setCrossHairsVisible(!0))},t.prototype.hide=function(){var e=this.getContainer();e&&!this.destroyed&&(this.set("visible",!1),Nf(e,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},t.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetPosition()},t.prototype.setCrossHairsVisible=function(e){var t=e?"":"none",n=this.get("xCrosshairDom"),r=this.get("yCrosshairDom");n&&Nf(n,{display:t}),r&&Nf(r,{display:t})},t.prototype.initContainer=function(){if(e.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},t.prototype.updateInner=function(t){var n,r;this.get("customContent")?this.renderCustomContent():(n=t,r=!1,Hp(["title","showTitle"],(function(e){if(yd(n,e))return r=!0,!1})),r&&this.resetTitle(),yd(t,"items")&&this.renderItems()),e.prototype.updateInner.call(this,t)},t.prototype.initDom=function(){this.cacheDoms()},t.prototype.removeDom=function(){e.prototype.removeDom.call(this),this.clearCrosshairs()},t.prototype.resetPosition=function(){var e,t=this.get("x"),n=this.get("y"),r=this.get("offset"),i=this.getOffset(),a=i.offsetX,o=i.offsetY,s=this.get("position"),l=this.get("region"),c=this.getContainer(),u=this.getBBox(),h=u.width,p=u.height;l&&(e=jC(l));var d=function(e,t,n,r,i,a,o){var s=function(e,t,n,r,i,a){var o=e,s=t;switch(a){case"left":o=e-r-n,s=t-i/2;break;case"right":o=e+n,s=t-i/2;break;case"top":o=e-r/2,s=t-i-n;break;case"bottom":o=e-r/2,s=t+n;break;default:o=e+n,s=t-i-n}return{x:o,y:s}}(e,t,n,r,i,a);if(o){var l=function(e,t,n,r,i){return{left:e<i.x,right:e+n>i.x+i.width,top:t<i.y,bottom:t+r>i.y+i.height}}(s.x,s.y,r,i,o);"auto"===a?(l.right&&(s.x=Math.max(0,e-r-n)),l.top&&(s.y=Math.max(0,t-i-n))):"top"===a||"bottom"===a?(l.left&&(s.x=o.x),l.right&&(s.x=o.x+o.width-r),"top"===a&&l.top&&(s.y=t+n),"bottom"===a&&l.bottom&&(s.y=t-i-n)):(l.top&&(s.y=o.y),l.bottom&&(s.y=o.y+o.height-i),"left"===a&&l.left&&(s.x=e+n),"right"===a&&l.right&&(s.x=e-r-n))}return s}(t,n,r,h,p,s,e);Nf(c,{left:WC(d.x+a),top:WC(d.y+o)}),this.resetCrosshairs()},t.prototype.renderCustomContent=function(){var e=this.getHtmlContentNode(),t=this.get("parent"),n=this.get("container");n&&n.parentNode===t?t.replaceChild(e,n):t.appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()},t.prototype.getHtmlContentNode=function(){var e,t=this.get("customContent");if(t){var n=t(this.get("title"),this.get("items"));e=Od(n)?n:Af(n)}return e},t.prototype.cacheDoms=function(){var e=this.getContainer(),t=e.getElementsByClassName(Kw)[0],n=e.getElementsByClassName(Qw)[0];this.set("titleDom",t),this.set("listDom",n)},t.prototype.resetTitle=function(){var e=this.get("title");this.get("showTitle")&&e?this.setTitle(e):this.setTitle("")},t.prototype.setTitle=function(e){var t=this.get("titleDom");t&&(t.innerText=e)},t.prototype.resetCrosshairs=function(){var e=this.get("crosshairsRegion"),t=this.get("crosshairs");if(e&&t){var n=jC(e),r=this.get("xCrosshairDom"),i=this.get("yCrosshairDom");"x"===t?(this.resetCrosshair("x",n),i&&(i.remove(),this.set("yCrosshairDom",null))):"y"===t?(this.resetCrosshair("y",n),r&&(r.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",n),this.resetCrosshair("y",n)),this.setCrossHairsVisible(this.get("visible"))}else this.clearCrosshairs()},t.prototype.resetCrosshair=function(e,t){var n=this.checkCrosshair(e),r=this.get(e);Nf(n,"x"===e?{left:WC(r),top:WC(t.y),height:WC(t.height)}:{top:WC(r),left:WC(t.x),width:WC(t.width)})},t.prototype.checkCrosshair=function(e){var t=e+"CrosshairDom",n=e+"CrosshairTpl",r="CROSSHAIR_"+e.toUpperCase(),i=eT[r],a=this.get(t),o=this.get("parent");return a||(a=Af(this.get(n)),this.applyStyle(i,a),o.appendChild(a),this.set(t,a)),a},t.prototype.renderItems=function(){this.clearItemDoms();var e=this.get("items"),t=this.get("itemTpl"),n=this.get("listDom");n&&(Hp(e,(function(e){var r=tx.toCSSGradient(e.color),i=_p(_p({},e),{color:r}),a=Af(Cd(t,i));n.appendChild(a)})),this.applyChildrenStyles(n,this.get("domStyles")))},t.prototype.clearItemDoms=function(){this.get("listDom")&&HC(this.get("listDom"))},t.prototype.clearCrosshairs=function(){var e=this.get("xCrosshairDom"),t=this.get("yCrosshairDom");e&&e.remove(),t&&t.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},t}(fw),rT={opacity:0},iT={stroke:"#C5C5C5",strokeOpacity:.85},aT={fill:"#CACED4",opacity:.85};function oT(e){return function(e){return Gd(e,(function(e,t){return[0===t?"M":"L",e[0],e[1]]}))}(e)}function sT(e,t,n,r){void 0===r&&(r=!0);var i=new Wx({values:e}),a=new ux({values:Gd(e,(function(e,t){return t}))}),o=Gd(e,(function(e,r){return[a.scale(r)*t,n-i.scale(e)*n]}));return r?function(e){if(e.length<=2)return oT(e);var t=[];Hp(e,(function(e){jd(e,t.slice(t.length-2))||t.push(e[0],e[1])}));var n=oy(t,!1),r=rd(e),i=r[0],a=r[1];return n.unshift(["M",i,a]),n}(o):oT(o)}function lT(e,t,n,r){var i=Op(e),a=function(e,t){var n=new Wx({values:e}),r=Math.max(0,n.min);return t-n.scale(r)*t}(r,n);return i.push(["L",t,a]),i.push(["L",0,a]),i.push(["Z"]),i}var cT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:rT,lineStyle:iT,areaStyle:aT})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.data,a=t.smooth,o=t.isArea,s=t.backgroundStyle,l=t.lineStyle,c=t.areaStyle;this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:_p({x:0,y:0,width:n,height:r},s)});var u=sT(i,n,r,a);if(this.addShape(e,{id:this.getElementId("line"),type:"path",attrs:_p({path:u},l)}),o){var h=lT(u,n,r,i);this.addShape(e,{id:this.getElementId("area"),type:"path",attrs:_p({path:h},c)})}},t.prototype.applyOffset=function(){var e=this.cfg,t=e.x,n=e.y;this.moveElementTo(this.get("group"),{x:t,y:n})},t}(JC),uT={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},hT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"handler",x:0,y:0,width:10,height:24,style:uT})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.style,a=i.fill,o=i.stroke,s=i.radius,l=i.opacity,c=i.cursor;this.addShape(e,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:n,height:r,fill:a,stroke:o,radius:s,opacity:l,cursor:c}});var u=1/3*n,h=2/3*n,p=1/4*r,d=3/4*r;this.addShape(e,{id:this.getElementId("line-left"),type:"line",attrs:{x1:u,y1:p,x2:u,y2:d,stroke:o,cursor:c}}),this.addShape(e,{id:this.getElementId("line-right"),type:"line",attrs:{x1:h,y1:p,x2:h,y2:d,stroke:o,cursor:c}})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.bindEvents=function(){var e=this;this.get("group").on("mouseenter",(function(){var t=e.get("style").highLightFill;e.getElementByLocalId("background").attr("fill",t),e.draw()})),this.get("group").on("mouseleave",(function(){var t=e.get("style").fill;e.getElementByLocalId("background").attr("fill",t),e.draw()}))},t.prototype.draw=function(){var e=this.get("container").get("canvas");e&&e.draw()},t}(JC),pT={fill:"#416180",opacity:.05},dT={fill:"#5B8FF9",opacity:.15,cursor:"move"},fT={width:10,height:24},mT={textBaseline:"middle",fill:"#000",opacity:.45},gT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){return function(n){t.currentTarget=e;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),t.prevX=Yd(r,"touches.0.pageX",r.pageX),t.prevY=Yd(r,"touches.0.pageY",r.pageY);var i=t.getContainerDOM();i.addEventListener("mousemove",t.onMouseMove),i.addEventListener("mouseup",t.onMouseUp),i.addEventListener("mouseleave",t.onMouseUp),i.addEventListener("touchmove",t.onMouseMove),i.addEventListener("touchend",t.onMouseUp),i.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(e){var n=t.cfg.width,r=[t.get("start"),t.get("end")];e.stopPropagation(),e.preventDefault();var i=Yd(e,"touches.0.pageX",e.pageX),a=Yd(e,"touches.0.pageY",e.pageY),o=i-t.prevX,s=t.adjustOffsetRange(o/n);t.updateStartEnd(s),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=i,t.prevY=a,t.draw(),t.emit("sliderchange",[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:r,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var e=t.getContainerDOM();e&&(e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseup",t.onMouseUp),e.removeEventListener("mouseleave",t.onMouseUp),e.removeEventListener("touchmove",t.onMouseMove),e.removeEventListener("touchend",t.onMouseUp),e.removeEventListener("touchcancel",t.onMouseUp))},t}return kp(t,e),t.prototype.setRange=function(e,t){this.set("minLimit",e),this.set("maxLimit",t);var n=this.get("start"),r=this.get("end"),i=ud(n,e,t),a=ud(r,e,t);this.get("isInit")||n===i&&r===a||this.setValue([i,a])},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var t=this.getRange();if(Bp(e)&&2===e.length){var n=[this.get("start"),this.get("end")];this.update({start:ud(e[0],t.min,t.max),end:ud(e[1],t.min,t.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:n,value:e})}},t.prototype.getValue=function(){return[this.get("start"),this.get("end")]},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:pT,foregroundStyle:dT,handlerStyle:fT,textStyle:mT}})},t.prototype.update=function(t){var n=t.start,r=t.end,i=_p({},t);Dp(n)||(i.start=ud(n,0,1)),Dp(r)||(i.end=ud(r,0,1)),e.prototype.update.call(this,i),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},t.prototype.init=function(){this.set("start",ud(this.get("start"),0,1)),this.set("end",ud(this.get("end"),0,1)),e.prototype.init.call(this)},t.prototype.render=function(){e.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},t.prototype.renderInner=function(e){var t=this.cfg;t.start,t.end;var n=t.width,r=t.height,i=t.trendCfg,a=void 0===i?{}:i,o=t.minText,s=t.maxText,l=t.backgroundStyle,c=void 0===l?{}:l,u=t.foregroundStyle,h=void 0===u?{}:u,p=t.textStyle,d=void 0===p?{}:p,f=Rd({},uT,this.cfg.handlerStyle);Jd(Yd(a,"data"))&&(this.trend=this.addComponent(e,_p({component:cT,id:this.getElementId("trend"),x:0,y:0,width:n,height:r},a))),this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:_p({x:0,y:0,width:n,height:r},c)}),this.addShape(e,{id:this.getElementId("minText"),type:"text",attrs:_p({y:r/2,textAlign:"right",text:o,silent:!1},d)}),this.addShape(e,{id:this.getElementId("maxText"),type:"text",attrs:_p({y:r/2,textAlign:"left",text:s,silent:!1},d)}),this.addShape(e,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:_p({y:0,height:r},h)});var m=Yd(f,"width",10),g=Yd(f,"height",24);this.minHandler=this.addComponent(e,{component:hT,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(r-g)/2,width:m,height:g,cursor:"ew-resize",style:f}),this.maxHandler=this.addComponent(e,{component:hT,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(r-g)/2,width:m,height:g,cursor:"ew-resize",style:f})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.updateUI=function(e,t,n){var r=this.cfg,i=r.start,a=r.end,o=r.width,s=r.minText,l=r.maxText,c=r.handlerStyle,u=r.height,h=i*o,p=a*o;this.trend&&(this.trend.update({width:o,height:u}),this.get("updateAutoRender")||this.trend.render()),e.attr("x",h),e.attr("width",p-h);var d=Yd(c,"width",10);t.attr("text",s),n.attr("text",l);var f=this._dodgeText([h,p],t,n),m=f[0],g=f[1];this.minHandler&&(this.minHandler.update({x:h-d/2}),this.get("updateAutoRender")||this.minHandler.render()),Hp(m,(function(e,n){return t.attr(n,e)})),this.maxHandler&&(this.maxHandler.update({x:p-d/2}),this.get("updateAutoRender")||this.maxHandler.render()),Hp(g,(function(e,t){return n.attr(t,e)}))},t.prototype.bindEvents=function(){var e=this.get("group");e.on("handler-min:mousedown",this.onMouseDown("minHandler")),e.on("handler-min:touchstart",this.onMouseDown("minHandler")),e.on("handler-max:mousedown",this.onMouseDown("maxHandler")),e.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var t=e.findById(this.getElementId("foreground"));t.on("mousedown",this.onMouseDown("foreground")),t.on("touchstart",this.onMouseDown("foreground"))},t.prototype.adjustOffsetRange=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case"minHandler":var i=0-n,a=1-n;return Math.min(a,Math.max(i,e));case"maxHandler":i=0-r,a=1-r;return Math.min(a,Math.max(i,e));case"foreground":i=0-n,a=1-r;return Math.min(a,Math.max(i,e))}},t.prototype.updateStartEnd=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case"minHandler":n+=e;break;case"maxHandler":r+=e;break;case"foreground":n+=e,r+=e}this.set("start",n),this.set("end",r)},t.prototype._dodgeText=function(e,t,n){var r,i,a=this.cfg,o=a.handlerStyle,s=a.width,l=Yd(o,"width",10),c=e[0],u=e[1],h=!1;c>u&&(c=(r=[u,c])[0],u=r[1],t=(i=[n,t])[0],n=i[1],h=!0);var p=t.getBBox(),d=n.getBBox(),f=p.width>c-2?{x:c+l/2+2,textAlign:"left"}:{x:c-l/2-2,textAlign:"right"},m=d.width>s-u-2?{x:u-l/2-2,textAlign:"right"}:{x:u+l/2+2,textAlign:"left"};return h?[m,f]:[f,m]},t.prototype.draw=function(){var e=this.get("container"),t=e&&e.get("canvas");t&&t.draw()},t.prototype.getContainerDOM=function(){var e=this.get("container"),t=e&&e.get("canvas");return t&&t.get("container")},t}(JC),vT={default:{trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},hover:{thumbColor:"rgba(0,0,0,0.2)"}},yT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clearEvents=Zd,t.onStartEvent=function(e){return function(n){t.isMobile=e,n.originalEvent.preventDefault();var r=e?Yd(n.originalEvent,"touches.0.clientX"):n.clientX,i=e?Yd(n.originalEvent,"touches.0.clientY"):n.clientY;t.startPos=t.cfg.isHorizontal?r:i,t.bindLaterEvent()}},t.bindLaterEvent=function(){var e=t.getContainerDOM(),n=[];n=t.isMobile?[_f(e,"touchmove",t.onMouseMove),_f(e,"touchend",t.onMouseUp),_f(e,"touchcancel",t.onMouseUp)]:[_f(e,"mousemove",t.onMouseMove),_f(e,"mouseup",t.onMouseUp),_f(e,"mouseleave",t.onMouseUp)],t.clearEvents=function(){n.forEach((function(e){e.remove()}))}},t.onMouseMove=function(e){var n=t.cfg,r=n.isHorizontal,i=n.thumbOffset;e.preventDefault();var a=t.isMobile?Yd(e,"touches.0.clientX"):e.clientX,o=t.isMobile?Yd(e,"touches.0.clientY"):e.clientY,s=r?a:o,l=s-t.startPos;t.startPos=s,t.updateThumbOffset(i+l)},t.onMouseUp=function(e){e.preventDefault(),t.clearEvents()},t.onTrackClick=function(e){var n=t.cfg,r=n.isHorizontal,i=n.x,a=n.y,o=n.thumbLen,s=t.getContainerDOM().getBoundingClientRect(),l=e.clientX,c=e.clientY,u=r?l-s.left-i-o/2:c-s.top-a-o/2,h=t.validateRange(u);t.updateThumbOffset(h)},t.onThumbMouseOver=function(){var e=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t.onThumbMouseOut=function(){var e=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t}return kp(t,e),t.prototype.setRange=function(e,t){this.set("minLimit",e),this.set("maxLimit",t);var n=this.getValue(),r=ud(n,e,t);n===r||this.get("isInit")||this.setValue(r)},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var t=this.getRange(),n=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*ud(e,t.min,t.max)}),this.delegateEmit("valuechange",{originalValue:n,value:this.getValue()})},t.prototype.getValue=function(){return ud(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return _p(_p({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:vT})},t.prototype.renderInner=function(e){this.renderTrackShape(e),this.renderThumbShape(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.renderTrackShape=function(e){var t=this.cfg,n=t.trackLen,r=t.theme,i=Rd({},vT,void 0===r?{default:{}}:r).default,a=i.lineCap,o=i.trackColor,s=i.size,l=Yd(this.cfg,"size",s),c=this.get("isHorizontal")?{x1:0+l/2,y1:l/2,x2:n-l/2,y2:l/2,lineWidth:l,stroke:o,lineCap:a}:{x1:l/2,y1:0+l/2,x2:l/2,y2:n-l/2,lineWidth:l,stroke:o,lineCap:a};return this.addShape(e,{id:this.getElementId("track"),name:"track",type:"line",attrs:c})},t.prototype.renderThumbShape=function(e){var t=this.cfg,n=t.thumbOffset,r=t.thumbLen,i=t.theme,a=Rd({},vT,i).default,o=a.size,s=a.lineCap,l=a.thumbColor,c=Yd(this.cfg,"size",o),u=this.get("isHorizontal")?{x1:n+c/2,y1:c/2,x2:n+r-c/2,y2:c/2,lineWidth:c,stroke:l,lineCap:s,cursor:"default"}:{x1:c/2,y1:n+c/2,x2:c/2,y2:n+r-c/2,lineWidth:c,stroke:l,lineCap:s,cursor:"default"};return this.addShape(e,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:u})},t.prototype.bindEvents=function(){var e=this.get("group");e.on("mousedown",this.onStartEvent(!1)),e.on("mouseup",this.onMouseUp),e.on("touchstart",this.onStartEvent(!0)),e.on("touchend",this.onMouseUp),e.findById(this.getElementId("track")).on("click",this.onTrackClick);var t=e.findById(this.getElementId("thumb"));t.on("mouseover",this.onThumbMouseOver),t.on("mouseout",this.onThumbMouseOut)},t.prototype.getContainerDOM=function(){var e=this.get("container"),t=e&&e.get("canvas");return t&&t.get("container")},t.prototype.validateRange=function(e){var t=this.cfg,n=t.thumbLen,r=t.trackLen,i=e;return e+n>r?i=r-n:e+n<n&&(i=0),i},t.prototype.draw=function(){var e=this.get("container"),t=e&&e.get("canvas");t&&t.draw()},t.prototype.updateThumbOffset=function(e){var t=this.cfg,n=t.thumbOffset,r=t.isHorizontal,i=t.thumbLen,a=t.size,o=this.validateRange(e);if(o!==n){var s=this.getElementByLocalId("thumb");r?s.attr({x1:o+a/2,x2:o+i-a/2}):s.attr({y1:o+a/2,y2:o+i-a/2}),this.emitOffsetChange(o)}},t.prototype.emitOffsetChange=function(e){var t=this.cfg,n=t.thumbOffset,r=t.trackLen,i=t.thumbLen;this.cfg.thumbOffset=e,this.emit("scrollchange",{thumbOffset:e,ratio:ud(e/(r-i),0,1)}),this.delegateEmit("valuechange",{originalValue:n,value:e})},t}(JC),xT=Fw,ET=Lw,bT=Yw,CT=$w,wT=Xw,TT=qw,ST=nT;function kT(e){return 1===Array.from(new Set(e)).length}function _T(e){return(qp(e)+Xp(e))/2}function AT(e,t,n,r){return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function OT(e,t,n,r,i,a){void 0===a&&(a=0);var o=AT(e,t,n,r),s=AT(e,t,n,i),l=AT(e,t,a,r),c=AT(e,t,a,i);if(i-r==2*Math.PI){var u=AT(e,t,n,r+Math.PI),h=AT(e,t,a,r+Math.PI),p=[["M",o.x,o.y],["A",n,n,0,1,1,u.x,u.y],["A",n,n,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(p.push(["A",a,a,0,1,0,h.x,h.y]),p.push(["A",a,a,0,1,0,c.x,c.y])),p.push(["M",o.x,o.y]),p.push(["Z"]),p}var d=i-r<=Math.PI?0:1,f=[["M",o.x,o.y],["A",n,n,0,d,1,s.x,s.y],["L",c.x,c.y]];return a&&f.push(["A",a,a,0,d,0,l.x,l.y]),f.push(["L",o.x,o.y]),f.push(["Z"]),f}function IT(e,t,n,r,i){var a=AT(e,t,n,r),o=AT(e,t,n,i);if(dd(i-r,2*Math.PI)){var s=AT(e,t,n,r+Math.PI);return[["M",a.x,a.y],["A",n,n,0,1,1,s.x,s.y],["A",n,n,0,1,1,a.x,a.y],["A",n,n,0,1,0,s.x,s.y],["A",n,n,0,1,0,a.x,a.y],["Z"]]}var l=i-r<=Math.PI?0:1;return[["M",a.x,a.y],["A",n,n,0,l,1,o.x,o.y]]}function MT(e,t){var n,r,i=function(e){if(zd(e))return null;var t=e[0].x,n=e[0].x,r=e[0].y,i=e[0].y;return Hp(e,(function(e){t=t>e.x?e.x:t,n=n<e.x?e.x:n,r=r>e.y?e.y:r,i=i<e.y?e.y:i})),{minX:t,maxX:n,minY:r,maxY:i,centerX:(t+n)/2,centerY:(r+i)/2}}(e.points),a=t.startAngle,o=t.endAngle-a;return t.isTransposed?(n=i.maxY*o,r=i.minY*o):(n=i.maxX*o,r=i.minX*o),{startAngle:r+=a,endAngle:n+=a}}function NT(e,t){var n=e.attr(),r=t.attr();return Hp(n,(function(e,t){void 0===r[t]&&(r[t]=void 0)})),r}function FT(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}function LT(e,t){return"object"==typeof e&&t.forEach((function(t){delete e[t]})),e}function PT(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=new Map);for(var r=0,i=e;r<i.length;r++){var a=i[r];n.has(a)||(t.push(a),n.set(a,!0))}return t}var RT=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=e,this.y=t,this.height=r,this.width=n}return e.fromRange=function(t,n,r,i){return new e(t,n,r-t,i-n)},e.fromObject=function(t){return new e(t.minX,t.minY,t.width,t.height)},Object.defineProperty(e.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},e.prototype.contains=function(e){return e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return Hp(e,(function(e){n.x=Math.min(e.x,n.x),n.y=Math.min(e.y,n.y),n.width=Math.max(e.maxX,n.maxX)-n.x,n.height=Math.max(e.maxY,n.maxY)-n.y})),n},e.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return Hp(e,(function(e){n.x=Math.max(e.x,n.x),n.y=Math.max(e.y,n.y),n.width=Math.min(e.maxX,n.maxX)-n.x,n.height=Math.min(e.maxY,n.maxY)-n.y})),n},e.prototype.cut=function(t,n){var r=t.width,i=t.height;switch(n){case nf.TOP:case nf.TOP_LEFT:case nf.TOP_RIGHT:return e.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case nf.RIGHT:case nf.RIGHT_TOP:case nf.RIGHT_BOTTOM:return e.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case nf.BOTTOM:case nf.BOTTOM_LEFT:case nf.BOTTOM_RIGHT:return e.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case nf.LEFT:case nf.LEFT_TOP:case nf.LEFT_BOTTOM:return e.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},e.prototype.shrink=function(t){var n=t[0],r=t[1],i=t[2],a=t[3];return new e(this.x+a,this.y+n,this.width-a-r,this.height-n-i)},e.prototype.expand=function(t){var n=t[0],r=t[1],i=t[2],a=t[3];return new e(this.x-a,this.y-n,this.width+a+r,this.height+n+i)},e.prototype.exceed=function(e){return[Math.max(-this.minY+e.minY,0),Math.max(this.maxX-e.maxX,0),Math.max(this.maxY-e.maxY,0),Math.max(-this.minX+e.minX,0)]},e.prototype.collide=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},e.prototype.size=function(){return this.width*this.height},e.prototype.isPointIn=function(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY},e}();function DT(e){if(e.isPolar&&!e.isTransposed)return(e.endAngle-e.startAngle)*e.getRadius();var t=e.convert({x:0,y:0}),n=e.convert({x:1,y:0});return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function BT(e,t){var n=e.getCenter();return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function zT(e,t){var n=!1;if(e)if("theta"===e.type){var r=e.start,i=e.end;n=FT(t.x,r.x,i.x)&&FT(t.y,r.y,i.y)}else{var a=e.invert(t);n=FT(a.x,0,1)&&FT(a.y,0,1)}return n}function HT(e,t){var n=e.getCenter();return Math.atan2(t.y-n.y,t.x-n.x)}function jT(e,t){void 0===t&&(t=0);var n,r=e.start,i=e.end,a=e.getWidth(),o=e.getHeight();if(e.isPolar){var s=e.startAngle,l=e.endAngle,c=e.getCenter(),u=e.getRadius();return{type:"path",startState:{path:OT(c.x,c.y,u+t,s,s)},endState:function(e){var n=(l-s)*e+s;return{path:OT(c.x,c.y,u+t,s,n)}},attrs:{path:OT(c.x,c.y,u+t,s,l)}}}return n=e.isTransposed?{height:o+2*t}:{width:a+2*t},{type:"rect",startState:{x:r.x-t,y:i.y-t,width:e.isTransposed?a+2*t:0,height:e.isTransposed?0:o+2*t},endState:n,attrs:{x:r.x-t,y:i.y-t,width:a+2*t,height:o+2*t}}}var GT=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function $T(e,t,n){var r=t||[];if(pd(e)||Dp(function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r][t];if(!Dp(i)){n=Bp(i)?i[0]:i;break}}return n}(r,e))&&zd(n))return new(rE("identity"))({field:e.toString(),values:[e]});var i=nd(r,e);return new(rE(Yd(n,"type",function(e){var t="linear";return GT.test(e)?t="timeCat":ed(e)&&(t="cat"),t}(i[0]))))(_p({field:e,values:i},n))}function YT(e){return e.alias||e.field}function UT(e,t,n){var r,i=e.values.length;if(1===i)r=[.5,1];else{var a=0;r=function(e){if(e.isPolar){var t=e.startAngle;return e.endAngle-t==2*Math.PI}return!1}(t)?t.isTransposed?[(a=1/i*Yd(n,"widthRatio.multiplePie",1/1.3))/2,1-a/2]:[0,1-1/i]:[a=1/i/2,1-a]}return r}function VT(e,t){var n={start:{x:0,y:0},end:{x:0,y:0}};e.isRect?n=function(e){var t,n;switch(e){case nf.TOP:t={x:0,y:1},n={x:1,y:1};break;case nf.RIGHT:t={x:1,y:0},n={x:1,y:1};break;case nf.BOTTOM:t={x:0,y:0},n={x:1,y:0};break;case nf.LEFT:t={x:0,y:0},n={x:0,y:1};break;default:t=n={x:0,y:0}}return{start:t,end:n}}(t):e.isPolar&&(n=function(e){var t,n;return e.isTransposed?(t={x:0,y:0},n={x:1,y:0}):(t={x:0,y:0},n={x:0,y:1}),{start:t,end:n}}(e));var r=n.start,i=n.end;return{start:e.convert(r),end:e.convert(i)}}function WT(e){var t=e.start,n=e.end;return t.x===n.x}function XT(e,t){var n=e.start,r=e.end;return WT(e)?(n.y-r.y)*(t.x-n.x)>0?1:-1:(r.x-n.x)*(n.y-t.y)>0?-1:1}function qT(e,t){var n=Yd(e,["components","axis"],{});return Rd({},Yd(n,["common"],{}),Rd({},Yd(n,[t],{})))}function KT(e,t,n){var r=Yd(e,["components","axis"],{});return Rd({},Yd(r,["common","title"],{}),Rd({},Yd(r,[t,"title"],{})),n)}function QT(e){var t=e.x,n=e.y,r=e.circleCenter,i=n.start>n.end,a=e.isTransposed?e.convert({x:i?0:1,y:0}):e.convert({x:0,y:i?0:1}),o=[a.x-r.x,a.y-r.y],s=[1,0],l=a.y>r.y?Um(o,s):-1*Um(o,s),c=l+(t.end-t.start);return{center:r,radius:Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2)),startAngle:l,endAngle:c}}function ZT(e,t){return Sd(e)?!1!==e&&{}:Yd(e,[t])}function JT(e,t){return Yd(e,"position",t)}function eS(e,t){return Yd(t,["title","text"],YT(e))}var tS=function(){function e(e,t){this.destroyed=!1,this.facets=[],this.view=e,this.cfg=Rd({},this.getDefaultCfg(),t)}return e.prototype.init=function(){this.container||(this.container=this.createContainer());var e=this.view.getData();this.facets=this.generateFacets(e)},e.prototype.render=function(){this.renderViews()},e.prototype.update=function(){},e.prototype.clear=function(){this.clearFacetViews()},e.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},e.prototype.facetToView=function(e){var t=e.region,n=e.data,r=e.padding,i=void 0===r?this.cfg.padding:r,a=this.view.createView({region:t,padding:i});a.data(n||[]),e.view=a,this.beforeEachView(a,e);var o=this.cfg.eachView;return o&&o(a,e),this.afterEachView(a,e),a},e.prototype.createContainer=function(){return this.view.getLayer(ef.FORE).addGroup()},e.prototype.renderViews=function(){this.createFacetViews()},e.prototype.createFacetViews=function(){var e=this;return this.facets.map((function(t){return e.facetToView(t)}))},e.prototype.clearFacetViews=function(){var e=this;Hp(this.facets,(function(t){t.view&&(e.view.removeView(t.view),t.view=void 0)}))},e.prototype.parseSpacing=function(){var e=this.view.viewBBox,t=e.width,n=e.height;return this.cfg.spacing.map((function(e,r){return pd(e)?e/(0===r?t:n):parseFloat(e)/100}))},e.prototype.getFieldValues=function(e,t){var n=[],r={};return Hp(e,(function(e){var i=e[t];Dp(i)||r[i]||(n.push(i),r[i]=!0)})),n},e.prototype.getRegion=function(e,t,n,r){var i=this.parseSpacing(),a=i[0],o=i[1],s=(1+a)/(0===t?1:t)-a,l=(1+o)/(0===e?1:e)-o,c={x:(s+a)*n,y:(l+o)*r};return{start:c,end:{x:c.x+s,y:c.y+l}}},e.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},e.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:"#666",fontFamily:this.view.getTheme().fontFamily}}},e.prototype.processAxis=function(e,t){var n=e.getOptions(),r=n.coordinate,i=e.geometries;if("rect"===Yd(r,"type","rect")&&i.length){Dp(n.axes)&&(n.axes={});var a=n.axes,o=i[0].getXYFields(),s=o[0],l=o[1],c=ZT(a,s),u=ZT(a,l);!1!==c&&(n.axes[s]=this.getXAxisOption(s,a,c,t)),!1!==u&&(n.axes[l]=this.getYAxisOption(l,a,u,t))}},e.prototype.getFacetDataFilter=function(e){return function(t){return ad(e,(function(e){var n=e.field,r=e.value;return!(!Dp(r)&&n)||t[n]===r}))}},e}(),nS={},rS=function(e,t){nS[bd(e)]=t},iS=function(){function e(e,t){this.context=e,this.cfg=t,e.addAction(this)}return e.prototype.applyCfg=function(e){Md(this,e)},e.prototype.init=function(){this.applyCfg(this.cfg)},e.prototype.destroy=function(){this.context.removeAction(this),this.context=null},e}(),aS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.execute=function(){this.callback&&this.callback(this.context)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.callback=null},t}(iS),oS={};function sS(e){var t=oS[e];return Yd(t,"ActionClass")}function lS(e,t,n){oS[e]={ActionClass:t,cfg:n}}function cS(e,t){var n=new aS(t);return n.callback=e,n.name="callback",n}function uS(e,t){for(var n=[e[0]],r=1,i=e.length;r<i;r+=2){var a=t.convert({x:e[r],y:e[r+1]});n.push(a.x,a.y)}return n}function hS(e,t){var n=t.isTransposed,r=e[1],i=e[6],a=e[7],o=t.convert({x:i,y:a});return["A",r,r,0,0,n?0:1,o.x,o.y]}function pS(e,t,n){for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l,c,u,h=[],p=!!r;if(p){o=r[0],s=r[1];for(var d=0,f=e.length;d<f;d++)o=Bm([0,0],o,g=e[d]),s=zm([0,0],s,g)}d=0;for(var m=e.length;d<m;d++){var g=e[d];if(0!==d||n)if(d!==m-1||n){i=e[n?d?d-1:m-1:d-1],a=e[n?(d+1)%m:d+1];var v=[0,0];v=Hm(v=Vm(v,a,i),v,t);var y=jm(g,i),x=jm(g,a),E=y+x;0!==E&&(y/=E,x/=E);var b=Hm([0,0],v,-y),C=Hm([0,0],v,x);c=Rm([0,0],g,b),l=Bm([0,0],l=Rm([0,0],g,C),zm([0,0],a,g)),l=zm([0,0],l,Bm([0,0],a,g)),c=Bm([0,0],c=Rm([0,0],g,b=Hm([0,0],b=Vm([0,0],l,g),-y/x)),zm([0,0],i,g)),c=zm([0,0],c,Bm([0,0],i,g)),l=Rm([0,0],g,C=Hm([0,0],C=Vm([0,0],g,c),x/y)),p&&(c=Bm([0,0],c=zm([0,0],c,o),s),l=Bm([0,0],l=zm([0,0],l,o),s)),h.push(u),h.push(c),u=l}else c=g,h.push(u),h.push(c);else u=g}return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a++)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}function dS(e,t){return function(e,t){var n=[];if(e.length){n.push(["M",e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var a=e[r];n.push(["L",a.x,a.y])}t&&n.push(["Z"])}return n}(e,t)}function fS(e,t,n){var r=[],i=e[0],a=null;if(e.length<=2)return dS(e,t);for(var o=0,s=e.length;o<s;o++){var l=e[o];a&&a.x===l.x&&a.y===l.y||(r.push(l.x),r.push(l.y),a=l)}var c=pS(r,t,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}function mS(e,t){var n,r,i,a=[];return Hp(t,(function(o,s){switch(o[0].toLowerCase()){case"m":case"c":case"q":a.push(uS(o,e));break;case"l":n=t[s-1],r=o,i=e.isTransposed,(i?n[n.length-2]===r[1]:n[n.length-1]===r[2])?a=a.concat(function(e,t,n){var r=n.isTransposed,i=n.startAngle,a=n.endAngle,o="a"===e[0].toLowerCase()?{x:e[6],y:e[7]}:{x:e[1],y:e[2]},s={x:t[1],y:t[2]},l=[],c=r?"y":"x",u=Math.abs(s[c]-o[c])*(a-i),h=s[c]>=o[c]?1:0,p=u>Math.PI?1:0,d=n.convert(s),f=BT(n,d);if(f>=.5)if(u===2*Math.PI){var m={x:(s.x+o.x)/2,y:(s.y+o.y)/2},g=n.convert(m);l.push(["A",f,f,0,p,h,g.x,g.y]),l.push(["A",f,f,0,p,h,d.x,d.y])}else l.push(["A",f,f,0,p,h,d.x,d.y]);return l}(n,r,e)):a.push(uS(o,e));break;case"a":a.push(hS(o,e));break;case"z":default:a.push(o)}})),function(e){Hp(e,(function(t,n){if("a"===t[0].toLowerCase()){var r=e[n-1],i=e[n+1];i&&"a"===i[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&i&&"l"===i[0].toLowerCase()&&(i[0]="M")}}))}(a),a}function gS(e,t){var n=e.event.target.getCanvasBBox();return n.width>=t||n.height>=t?n:null}function vS(e){var t,n=e.event.target;return n&&(t=n.get("element")),t}function yS(e){var t,n=e.event.target;return n&&(t=n.get("delegateObject")),t}function xS(e){var t=e.event.gEvent;return!(t&&t.fromShape&&t.toShape&&t.fromShape.get("element")===t.toShape.get("element"))}function ES(e){return e&&e.component&&e.component.isList()}function bS(e){return e&&e.component&&e.component.isSlider()}function CS(e){var t=e.event.target;return t&&"mask"===t.get("name")}function wS(e,t){var n,r,i,a;if("path"===e.event.target.get("type")){var o=function(e,t){var n=e.event.target,r=n.getCanvasBBox();return r.width>=t||r.height>=t?n.attr("path"):null}(e,t);if(!o)return;return n=e.view,r=o,i=SS(n),a=OS(r),i.filter((function(e){var t,n,r=e.shape;if("path"===r.get("type"))t=OS(r.attr("path"));else{var i=r.getCanvasBBox();t=[[(n=i).minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY]]}return function(e,t){if(e.length<2||t.length<2)return!1;var n,r,i=_y(e),a=_y(t);if(n=i,(r=a).minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)return!1;var o=!1;if(Hp(t,(function(t){if(Ty(e,t[0],t[1]))return o=!0,!1})),o)return!0;if(Hp(e,(function(e){if(Ty(t,e[0],e[1]))return o=!0,!1})),o)return!0;var s=Sy(e),l=Sy(t),c=!1;return Hp(l,(function(e){if(ky(s,e))return c=!0,!1})),c}(a,t)}))}var s=gS(e,t);return s?AS(e.view,s):null}function TS(e,t,n){var r=gS(e,n);if(!r)return null;var i=e.view,a=LS(i,t,{x:r.x,y:r.y}),o=LS(i,t,{x:r.maxX,y:r.maxY});return AS(t,{minX:a.x,minY:a.y,maxX:o.x,maxY:o.y})}function SS(e){var t=e.geometries,n=[];return Hp(t,(function(e){var t=e.elements;n=n.concat(t)})),e.views&&e.views.length&&Hp(e.views,(function(e){n=n.concat(SS(e))})),n}function kS(e,t){var n=e.geometries,r=[];return Hp(n,(function(e){var n=e.getElementsBy((function(e){return e.hasState(t)}));r=r.concat(n)})),r}function _S(e,t){var n=e.getModel().data;return Bp(n)?n[0][t]:n[t]}function AS(e,t){var n=SS(e),r=[];return Hp(n,(function(e){var n=e.shape.getCanvasBBox();(function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)})(t,n)&&r.push(e)})),r}function OS(e){var t=[];return Hp(e,(function(e){if("A"!==e[0])for(var n=1;n<e.length;n+=2)t.push([e[n],e[n+1]]);else{var r=e.length;t.push([e[r-2],e[r-1]])}})),t}function IS(e){return e.getComponents().map((function(e){return e.component}))}function MS(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function NS(e,t){return e.x<=t.x&&e.maxX>=t.x&&e.y<=t.y&&e.maxY>t.y}function FS(e){var t=e.parent,n=null;return t&&(n=t.views.filter((function(t){return t!==e}))),n}function LS(e,t,n){var r=function(e,t){return e.getCoordinate().invert(t)}(e,n);return t.getCoordinate().convert(r)}function PS(e,t,n,r){var i=!1;return Hp(e,(function(e){if(e[n]===t[n]&&e[r]===t[r])return i=!0,!1})),i}function RS(e,t){var n=e.getScaleByField(t);return!n&&e.views&&Hp(e.views,(function(e){if(n=RS(e,t))return!1})),n}var DS=function(){function e(e){this.actions=[],this.event=null,this.cacheMap={},this.view=e}return e.prototype.cache=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length)return this.cacheMap[e[0]];2===e.length&&(this.cacheMap[e[0]]=e[1])},e.prototype.getAction=function(e){return this.actions.find((function(t){return t.name===e}))},e.prototype.addAction=function(e){this.actions.push(e)},e.prototype.removeAction=function(e){var t=this.actions,n=this.actions.indexOf(e);n>=0&&t.splice(n,1)},e.prototype.getCurrentPoint=function(){var e=this.event;return e?e.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(e.clientX,e.clientY):{x:e.x,y:e.y}:null},e.prototype.getCurrentShape=function(){return Yd(this.event,["gEvent","shape"])},e.prototype.isInPlot=function(){var e=this.getCurrentPoint();return!!e&&this.view.isPointInPlot(e)},e.prototype.isInShape=function(e){var t=this.getCurrentShape();return!!t&&t.get("name")===e},e.prototype.isInComponent=function(e){var t=IS(this.view),n=this.getCurrentPoint();return!!n&&!!t.find((function(t){var r=t.getBBox();return e?t.get("name")===e&&NS(r,n):NS(r,n)}))},e.prototype.destroy=function(){Hp(this.actions.slice(),(function(e){e.destroy()})),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},e}(),BS=function(){function e(e,t){this.view=e,this.cfg=t}return e.prototype.init=function(){this.initEvents()},e.prototype.initEvents=function(){},e.prototype.clearEvents=function(){},e.prototype.destroy=function(){this.clearEvents()},e}();function zS(e,t,n){var r=e.split(":"),i=r[0],a=t.getAction(i)||function(e,t){var n=oS[e],r=null;return n&&((r=new(0,n.ActionClass)(t,n.cfg)).name=e,r.init()),r}(i,t);if(!a)throw new Error("There is no action named ".concat(i));return{action:a,methodName:r[1],arg:n}}function HS(e){var t=e.action,n=e.methodName,r=e.arg;if(!t[n])throw new Error("Action(".concat(t.name,") doesn't have a method called ").concat(n));t[n](r)}var jS="start",GS="showEnable",$S="end",YS="rollback",US="processing",VS=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.callbackCaches={},r.emitCaches={},r.steps=n,r}return kp(t,e),t.prototype.init=function(){this.initContext(),e.prototype.init.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},t.prototype.initEvents=function(){var e=this;Hp(this.steps,(function(t,n){Hp(t,(function(t){var r=e.getActionCallback(n,t);r&&e.bindEvent(t.trigger,r)}))}))},t.prototype.clearEvents=function(){var e=this;Hp(this.steps,(function(t,n){Hp(t,(function(t){var r=e.getActionCallback(n,t);r&&e.offEvent(t.trigger,r)}))}))},t.prototype.initContext=function(){var e=this.view,t=new DS(e);this.context=t,Hp(this.steps,(function(e){Hp(e,(function(e){if(Rp(e.action))e.actionObject={action:cS(e.action,t),methodName:"execute"};else if(ed(e.action))e.actionObject=zS(e.action,t,e.arg);else if(Bp(e.action)){var n=e.action,r=Bp(e.arg)?e.arg:[e.arg];e.actionObject=[],Hp(n,(function(n,i){e.actionObject.push(zS(n,t,r[i]))}))}}))}))},t.prototype.isAllowStep=function(e){var t=this.currentStepName,n=this.steps;if(t===e)return!0;if(e===GS)return!0;if(e===US)return t===jS;if(e===jS)return t!==US;if(e===$S)return t===US||t===jS;if(e===YS){if(n[$S])return t===$S;if(t===jS)return!0}return!1},t.prototype.isAllowExecute=function(e,t){if(this.isAllowStep(e)){var n=this.getKey(e,t);return(!t.once||!this.emitCaches[n])&&(!t.isEnable||t.isEnable(this.context))}return!1},t.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},t.prototype.afterExecute=function(e,t){e!==GS&&this.currentStepName!==e&&this.enterStep(e);var n=this.getKey(e,t);this.emitCaches[n]=!0},t.prototype.getKey=function(e,t){return e+t.trigger+t.action},t.prototype.getActionCallback=function(e,t){var n=this,r=this.context,i=this.callbackCaches,a=t.actionObject;if(t.action&&a){var o=this.getKey(e,t);if(!i[o]){var s=function(i){r.event=i,n.isAllowExecute(e,t)?(Bp(a)?Hp(a,(function(e){r.event=i,HS(e)})):(r.event=i,HS(a)),n.afterExecute(e,t),t.callback&&(r.event=i,t.callback(r))):r.event=null};t.debounce?i[o]=Fd(s,t.debounce.wait,t.debounce.immediate):t.throttle?i[o]=qd(s,t.throttle.wait,{leading:t.throttle.leading,trailing:t.throttle.trailing}):i[o]=s}return i[o]}return null},t.prototype.bindEvent=function(e,t){var n=e.split(":");"window"===n[0]?window.addEventListener(n[1],t):"document"===n[0]?document.addEventListener(n[1],t):this.view.on(e,t)},t.prototype.offEvent=function(e,t){var n=e.split(":");"window"===n[0]?window.removeEventListener(n[1],t):"document"===n[0]?document.removeEventListener(n[1],t):this.view.off(e,t)},t}(BS),WS={};function XS(e,t){WS[bd(e)]=t}function qS(e,t,n){var r=function(e){return WS[bd(e)]}(e);if(!r)return null;if(Yp(r)){var i=Md(Nd(r),n);return new VS(t,i)}return new r(t,n)}function KS(e){var t,n={point:{default:{fill:e.pointFillColor,r:e.pointSize,stroke:e.pointBorderColor,lineWidth:e.pointBorder,fillOpacity:e.pointFillOpacity},active:{stroke:e.pointActiveBorderColor,lineWidth:e.pointActiveBorder},selected:{stroke:e.pointSelectedBorderColor,lineWidth:e.pointSelectedBorder},inactive:{fillOpacity:e.pointInactiveFillOpacity,strokeOpacity:e.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:e.hollowPointFillColor,lineWidth:e.hollowPointBorder,stroke:e.hollowPointBorderColor,strokeOpacity:e.hollowPointBorderOpacity,r:e.hollowPointSize},active:{stroke:e.hollowPointActiveBorderColor,strokeOpacity:e.hollowPointActiveBorderOpacity},selected:{lineWidth:e.hollowPointSelectedBorder,stroke:e.hollowPointSelectedBorderColor,strokeOpacity:e.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:e.hollowPointInactiveBorderOpacity}},area:{default:{fill:e.areaFillColor,fillOpacity:e.areaFillOpacity,stroke:null},active:{fillOpacity:e.areaActiveFillOpacity},selected:{fillOpacity:e.areaSelectedFillOpacity},inactive:{fillOpacity:e.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:e.hollowAreaBorderColor,lineWidth:e.hollowAreaBorder,strokeOpacity:e.hollowAreaBorderOpacity},active:{fill:null,lineWidth:e.hollowAreaActiveBorder},selected:{fill:null,lineWidth:e.hollowAreaSelectedBorder},inactive:{strokeOpacity:e.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:e.intervalFillColor,fillOpacity:e.intervalFillOpacity},active:{stroke:e.intervalActiveBorderColor,lineWidth:e.intervalActiveBorder},selected:{stroke:e.intervalSelectedBorderColor,lineWidth:e.intervalSelectedBorder},inactive:{fillOpacity:e.intervalInactiveFillOpacity,strokeOpacity:e.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:e.hollowIntervalFillColor,stroke:e.hollowIntervalBorderColor,lineWidth:e.hollowIntervalBorder,strokeOpacity:e.hollowIntervalBorderOpacity},active:{stroke:e.hollowIntervalActiveBorderColor,lineWidth:e.hollowIntervalActiveBorder,strokeOpacity:e.hollowIntervalActiveBorderOpacity},selected:{stroke:e.hollowIntervalSelectedBorderColor,lineWidth:e.hollowIntervalSelectedBorder,strokeOpacity:e.hollowIntervalSelectedBorderOpacity},inactive:{stroke:e.hollowIntervalInactiveBorderColor,lineWidth:e.hollowIntervalInactiveBorder,strokeOpacity:e.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:e.lineBorderColor,lineWidth:e.lineBorder,strokeOpacity:e.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:e.lineActiveBorder},selected:{lineWidth:e.lineSelectedBorder},inactive:{strokeOpacity:e.lineInactiveBorderOpacity}}},r=function(e){return{title:{autoRotate:!0,position:"center",spacing:e.axisTitleSpacing,style:{fill:e.axisTitleTextFillColor,fontSize:e.axisTitleTextFontSize,lineHeight:e.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:e.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:e.axisLabelOffset,style:{fill:e.axisLabelFillColor,fontSize:e.axisLabelFontSize,lineHeight:e.axisLabelLineHeight,fontFamily:e.fontFamily}},line:{style:{lineWidth:e.axisLineBorder,stroke:e.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:e.axisGridBorderColor,lineWidth:e.axisGridBorder,lineDash:e.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:e.axisTickLineBorder,stroke:e.axisTickLineBorderColor},alignTick:!0,length:e.axisTickLineLength},subTickLine:null,animate:!0}}(e),i=function(e){return{title:null,marker:{symbol:"circle",spacing:e.legendMarkerSpacing,style:{r:e.legendCircleMarkerSize,fill:e.legendMarkerColor}},itemName:{spacing:5,style:{fill:e.legendItemNameFillColor,fontFamily:e.fontFamily,fontSize:e.legendItemNameFontSize,lineHeight:e.legendItemNameLineHeight,fontWeight:e.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:e.legendPageNavigatorMarkerSize,inactiveFill:e.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:e.legendPageNavigatorMarkerInactiveFillOpacity,fill:e.legendPageNavigatorMarkerFillColor,opacity:e.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:e.legendPageNavigatorTextFillColor,fontSize:e.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:e.legendItemSpacing,itemMarginBottom:e.legendItemMarginBottom,padding:e.legendPadding}}(e);return{background:e.backgroundColor,defaultColor:e.brandColor,subColor:e.subColor,semanticRed:e.paletteSemanticRed,semanticGreen:e.paletteSemanticGreen,padding:"auto",fontFamily:e.fontFamily,columnWidthRatio:.5,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:e.paletteQualitative10,colors20:e.paletteQualitative20,sequenceColors:e.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:function(e){var t=e.geometry.coordinate;if(t.isPolar&&t.isTransposed){var r=MT(e.getModel(),t),i=(r.startAngle+r.endAngle)/2;return{matrix:Qm(null,[["t",7.5*Math.cos(i),7.5*Math.sin(i)]])}}return n.interval.selected}}},"hollow-rect":{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},line:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},tick:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},funnel:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}},pyramid:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},line:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},dot:{default:{style:_p(_p({},n.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:_p(_p({},n.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:_p(_p({},n.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:_p(_p({},n.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:_p(_p({},n.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:_p(_p({},n.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:_p(_p({},n.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:_p(_p({},n.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hvh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},polygon:{polygon:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},point:{circle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},square:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},bowtie:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},diamond:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},hexagon:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},triangle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"triangle-down":{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"hollow-circle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-square":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-bowtie":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-diamond":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-hexagon":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle-down":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},cross:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},tick:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},plus:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},hyphen:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},line:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}}},area:{area:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},smooth:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},line:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"smooth-line":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}},schema:{candle:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},box:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}}},edge:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},arc:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},violin:{violin:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hollow:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"hollow-smooth":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}}},components:{axis:{common:r,top:{position:"top",grid:null,title:null,verticalLimitLength:.5},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:.5},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:Rd({},r.grid,{line:{type:"line"}})},radius:{title:null,grid:Rd({},r.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:e.legendVerticalPadding},left:{layout:"vertical",padding:e.legendVerticalPadding},top:{layout:"horizontal",padding:e.legendHorizontalPadding},bottom:{layout:"horizontal",padding:e.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:e.sliderRailHeight,defaultLength:e.sliderRailWidth,style:{fill:e.sliderRailFillColor,stroke:e.sliderRailBorderColor,lineWidth:e.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:e.sliderLabelTextFillColor,fontSize:e.sliderLabelTextFontSize,lineHeight:e.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:e.fontFamily}},handler:{size:e.sliderHandlerWidth,style:{fill:e.sliderHandlerFillColor,stroke:e.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:e.tooltipCrosshairsBorderColor,lineWidth:e.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(t={},t["".concat("g2-tooltip")]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:e.tooltipContainerFillColor,opacity:e.tooltipContainerFillOpacity,boxShadow:e.tooltipContainerShadow,borderRadius:"".concat(e.tooltipContainerBorderRadius,"px"),color:e.tooltipTextFillColor,fontSize:"".concat(e.tooltipTextFontSize,"px"),fontFamily:e.fontFamily,lineHeight:"".concat(e.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},t["".concat(Kw)]={marginBottom:"12px",marginTop:"12px"},t["".concat(Qw)]={margin:0,listStyleType:"none",padding:0},t["".concat("g2-tooltip-list-item")]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},t["".concat("g2-tooltip-marker")]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t["".concat("g2-tooltip-value")]={display:"inline-block",float:"right",marginLeft:"30px"},t)},annotation:{arc:{style:{stroke:e.annotationArcBorderColor,lineWidth:e.annotationArcBorder},animate:!0},line:{style:{stroke:e.annotationLineBorderColor,lineDash:e.annotationLineDash,lineWidth:e.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textAlign:"start",fontFamily:e.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:e.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:e.annotationRegionBorder,stroke:e.annotationRegionBorderColor,fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:e.brandColor,lineWidth:2}},line:{style:{stroke:e.annotationLineBorderColor,lineWidth:e.annotationLineBorder},length:e.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:e.cSliderBackgroundFillColor,opacity:e.cSliderBackgroundFillOpacity},foregroundStyle:{fill:e.cSliderForegroundFillColor,opacity:e.cSliderForegroundFillOpacity},handlerStyle:{width:e.cSliderHandlerWidth,height:e.cSliderHandlerHeight,fill:e.cSliderHandlerFillColor,opacity:e.cSliderHandlerFillOpacity,stroke:e.cSliderHandlerBorderColor,lineWidth:e.cSliderHandlerBorder,radius:e.cSliderHandlerBorderRadius,highLightFill:e.cSliderHandlerHighlightFillColor},textStyle:{fill:e.cSliderTextFillColor,opacity:e.cSliderTextFillOpacity,fontSize:e.cSliderTextFontSize,lineHeight:e.cSliderTextLineHeight,fontWeight:e.cSliderTextFontWeight,stroke:e.cSliderTextBorderColor,lineWidth:e.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:e.scrollbarTrackFillColor,thumbColor:e.scrollbarThumbFillColor}},hover:{style:{thumbColor:e.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:e.labelFillColor,fontSize:e.labelFontSize,fontFamily:e.fontFamily,stroke:e.labelBorderColor,lineWidth:e.labelBorder},fillColorDark:e.labelFillColorDark,fillColorLight:e.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:e.innerLabelFillColor,fontSize:e.innerLabelFontSize,fontFamily:e.fontFamily,stroke:e.innerLabelBorderColor,lineWidth:e.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:e.overflowLabelFillColor,fontSize:e.overflowLabelFontSize,fontFamily:e.fontFamily,stroke:e.overflowLabelBorderColor,lineWidth:e.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:e.labelLineBorder}},autoRotate:!0}}}var QS="#000",ZS="#595959",JS="#8C8C8C",ek="#BFBFBF",tk="#D9D9D9",nk="#F0F0F0",rk="#FFFFFF",ik=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],ak=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],ok=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],sk=function(e){void 0===e&&(e={});var t=e.backgroundColor,n=void 0===t?"transparent":t,r=e.subColor,i=void 0===r?"rgba(0,0,0,0.05)":r,a=e.paletteQualitative10,o=void 0===a?ik:a,s=e.paletteQualitative20,l=void 0===s?ak:s,c=e.paletteSemanticRed,u=void 0===c?"#F4664A":c,h=e.paletteSemanticGreen,p=void 0===h?"#30BF78":h,d=e.paletteSemanticYellow,f=void 0===d?"#FAAD14":d,m=e.paletteSequence,g=void 0===m?ok:m,v=e.fontFamily,y=void 0===v?'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"':v,x=e.brandColor,E=void 0===x?o[0]:x;return{backgroundColor:n,brandColor:E,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:u,paletteSemanticGreen:p,paletteSemanticYellow:f,paletteSequence:g,fontFamily:y,axisLineBorderColor:ek,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:ZS,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:ek,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:tk,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:JS,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:tk,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:JS,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:E,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:ZS,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:QS,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:QS,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:JS,legendPageNavigatorTextFontSize:12,sliderRailFillColor:tk,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:JS,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:nk,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:ek,annotationArcBorderColor:tk,annotationArcBorder:1,annotationLineBorderColor:ek,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:ZS,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:QS,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:ek,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:ZS,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:ZS,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:rk,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:ZS,overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:rk,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:ek,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:E,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:rk,pointBorderOpacity:1,pointActiveBorderColor:QS,pointSelectedBorder:2,pointSelectedBorderColor:QS,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:E,hollowPointBorderOpacity:.95,hollowPointFillColor:rk,hollowPointActiveBorder:1,hollowPointActiveBorderColor:QS,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:QS,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:E,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:E,areaFillOpacity:.25,areaActiveFillColor:E,areaActiveFillOpacity:.5,areaSelectedFillColor:E,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:E,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:QS,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:QS,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:E,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:QS,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:QS,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:E,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:rk,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:QS,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:QS,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}};function lk(e){var t=e.styleSheet,n=void 0===t?{}:t,r=Ap(e,["styleSheet"]),i=sk(n);return Rd({},KS(i),r)}sk();var ck={default:lk({})};function uk(e){return Yd(ck,bd(e),ck.default)}function hk(e,t,n){return dd(n.translate(e),n.translate(t))}function pk(e,t,n){var r=n.coordinate,i=n.getYScale(),a=i.field,o=r.invert(t),s=i.invert(o.y);return Up(e,(function(e){var t=e._origin;return t[a][0]<=s&&t[a][1]>=s}))||e[e.length-1]}var dk=Ld((function(e){if(e.isCategory)return 1;for(var t=e.values,n=t.length,r=e.translate(t[0]),i=r,a=0;a<n;a++){var o=t[a],s=e.translate(o);s<r&&(r=s),s>i&&(i=s)}return(i-r)/(n-1)}));function fk(e){for(var t,n=0,r=function(e){var t=xd(e.attributes);return Fp(t,(function(e){return Np(Tf,e.type)}))}(e);n<r.length;n++){var i=r[n],a=i.getScale(i.type);if(a&&a.isLinear){t=a;break}}var o=e.getXScale(),s=e.getYScale();return t||s||o}function mk(e,t,n){if(0===t.length)return null;var r=n.type,i=n.getXScale(),a=n.getYScale(),o=i.field,s=a.field,l=null;if("heatmap"===r||"point"===r){for(var c=n.coordinate.invert(e),u=i.invert(c.x),h=a.invert(c.y),p=1/0,d=0;d<t.length;d++){var f=t[d],m=f._origin,g=Math.pow(m[o]-u,2)+Math.pow(m[s]-h,2);g<p&&(p=g,l=f)}return l}var v=t[0],y=t[t.length-1],x=function(e,t){var n=t.coordinate,r=t.getXScale(),i=r.range,a=i[i.length-1],o=i[0],s=n.invert(e).x;return n.isPolar&&s>(1+a)/2&&(s=o),r.translate(r.invert(s))}(e,n),E=v._origin[o],b=v._origin[s],C=y._origin[o],w=a.isLinear&&Bp(b);if(Bp(E)){for(d=0;d<t.length;d++){m=(O=t[d])._origin;if(i.translate(m[o][0])<=x&&i.translate(m[o][1])>=x){if(!w){l=O;break}Bp(l)||(l=[]),l.push(O)}}Bp(l)&&(l=pk(l,e,n))}else{var T=void 0;if(i.isLinear||"timeCat"===i.type){if((x>i.translate(C)||x<i.translate(E))&&(x>i.max||x<i.min))return null;for(var S=0,k=t.length-1,_=void 0;S<=k;){var A=t[_=Math.floor((S+k)/2)]._origin[o];if(hk(A,x,i))return t[_];i.translate(A)<=i.translate(x)?(S=_+1,y=t[_],T=t[_+1]):(0===k&&(y=t[0]),k=_-1)}}else{for(d=0;d<t.length;d++){var O;if(hk((m=(O=t[d])._origin)[o],x,i)){if(!w){l=O;break}Bp(l)||(l=[]),l.push(O)}else i.translate(m[o])<=x&&(y=O,T=t[d+1])}Bp(l)&&(l=pk(l,e,n))}y&&T&&Math.abs(i.translate(y._origin[o])-x)>Math.abs(i.translate(T._origin[o])-x)&&(y=T)}var I=dk(n.getXScale());return!l&&Math.abs(i.translate(y._origin[o])-x)<=I/2&&(l=y),l}function gk(e,t,n,r){void 0===n&&(n=""),void 0===r&&(r=!1);var i,a=e._origin,o=function(e,t,n){var r=t.getAttribute("position").getFields(),i=t.scales,a=Rp(n)||!n?r[0]:n,o=i[a],s=o?o.getText(e[a]):e[a]||a;return Rp(n)?n(s,e):s}(a,t,n),s=t.tooltipOption,l=t.theme.defaultColor,c=[];function u(t,n){if(r||!Dp(n)&&""!==n){var i={title:o,data:a,mappingData:e,name:t,value:n,color:e.color||l,marker:!0};c.push(i)}}if(zp(s)){var h=s.fields,p=s.callback;if(p){var d=h.map((function(t){return e._origin[t]})),f=p.apply(void 0,d),m=_p({data:e._origin,mappingData:e,title:o,color:e.color||l,marker:!0},f);c.push(m)}else for(var g=t.scales,v=0,y=h;v<y.length;v++){var x=y[v];if(!Dp(a[x])){var E=g[x];u(YT(E),i=E.getText(a[x]))}}}else{var b=fk(t);i=function(e,t){var n=e[t.field];return Bp(n)?n.map((function(e){return t.getText(e)})).join("-"):t.getText(n)}(a,b),u(function(e,t){var n,r=t.getGroupScales();if(r.length&&(n=r[0]),n){var i=n.field;return n.getText(e[i])}return YT(fk(t))}(a,t),i)}return c}function vk(e,t,n,r){var i=r.showNil,a=[],o=e.dataArray;if(!zd(o)){e.sort(o);for(var s=0,l=o;s<l.length;s++){var c=mk(t,l[s],e);if(c){var u=e.getElementId(c),h=e.elementsMap[u];if("heatmap"===e.type||h.visible){var p=gk(c,e,n,i);p.length&&a.push(p)}}}}return a}function yk(e,t,n,r){var i=r.showNil,a=[],o=e.container.getShape(t.x,t.y);if(o&&o.get("visible")&&o.get("origin")){var s=gk(o.get("origin").mappingData,e,n,i);s.length&&a.push(s)}return a}function xk(e,t,n){for(var r=[],i=e.geometries,a=n.shared,o=n.title,s=n.reversed,l=0,c=i;l<c.length;l++){var u=c[l];if(u.visible&&!1!==u.tooltipOption){var h=u.type,p=void 0;(p=["point","edge","polygon"].includes(h)?yk(u,t,o,n):["area","line","path","heatmap"].includes(h)||!1!==a?vk(u,t,o,n):yk(u,t,o,n)).length&&(s&&p.reverse(),r.push(p))}}return r}function Ek(e){void 0===e&&(e=0);var t=Bp(e)?e:[e];switch(t.length){case 0:t=[0,0,0,0];break;case 1:t=new Array(4).fill(t[0]);break;case 2:t=Ip(Ip([],t,!0),t,!0);break;case 3:t=Ip(Ip([],t,!0),[t[1]],!1);break;default:t=t.slice(0,4)}return t}var bk={};function Ck(e,t){bk[e]=t}var wk=function(){function e(e){this.option=this.wrapperOption(e)}return e.prototype.update=function(e){return this.option=this.wrapperOption(e),this},e.prototype.hasAction=function(e){var t=this.option.actions;return od(t,(function(t){return t[0]===e}))},e.prototype.create=function(e,t){var n=this.option,r=n.type,i=n.cfg,a="theta"===r,o=_p({start:e,end:t},i),s=function(e){return BE[e.toLowerCase()]}(a?"polar":r);return this.coordinate=new s(o),this.coordinate.type=r,a&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},e.prototype.adjust=function(e,t){return this.coordinate.update({start:e,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},e.prototype.rotate=function(e){return this.option.actions.push(["rotate",e]),this},e.prototype.reflect=function(e){return this.option.actions.push(["reflect",e]),this},e.prototype.scale=function(e,t){return this.option.actions.push(["scale",e,t]),this},e.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},e.prototype.getOption=function(){return this.option},e.prototype.getCoordinate=function(){return this.coordinate},e.prototype.wrapperOption=function(e){return _p({type:"rect",actions:[],cfg:{}},e)},e.prototype.execActions=function(e){var t=this;Hp(this.option.actions,(function(n){var r,i=n[0],a=n.slice(1);(!!Dp(e)||e.includes(i))&&(r=t.coordinate)[i].apply(r,a)}))},e}(),Tk=function(){function e(e,t,n){this.view=e,this.gEvent=t,this.data=n,this.type=t.type}return e.fromData=function(t,n,r){return new e(t,new mm(n,{}),r)},Object.defineProperty(e.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},e.prototype.clone=function(){return new e(this.view,this.gEvent,this.data)},e}();function Sk(e){var t=e.getController("axis"),n=e.getController("legend"),r=e.getController("annotation");[t,e.getController("slider"),e.getController("scrollbar"),n,r].forEach((function(e){e&&e.layout()}))}var kk=function(){function e(){this.scales=new Map,this.syncScales=new Map}return e.prototype.createScale=function(e,t,n,r){var i=n,a=this.getScaleMeta(r);if(0===t.length&&a){var o=a.scale,s={type:o.type};o.isCategory&&(s.values=o.values),i=Rd(s,a.scaleDef,n)}var l=$T(e,t,i);return this.cacheScale(l,n,r),l},e.prototype.sync=function(e,t){var n=this;this.syncScales.forEach((function(r,i){var a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=[];Hp(r,(function(e){var t=n.getScale(e);o=pd(t.max)?Math.max(o,t.max):o,a=pd(t.min)?Math.min(a,t.min):a,Hp(t.values,(function(e){s.includes(e)||s.push(e)}))})),Hp(r,(function(r){var i=n.getScale(r);if(i.isContinuous)i.change({min:a,max:o,values:s});else if(i.isCategory){var l=i.range,c=n.getScaleMeta(r);s&&!Yd(c,["scaleDef","range"])&&(l=UT(Rd({},i,{values:s}),e,t)),i.change({values:s,range:l})}}))}))},e.prototype.cacheScale=function(e,t,n){var r=this.getScaleMeta(n);r&&r.scale.type===e.type?(!function(e,t){if("identity"!==e.type&&"identity"!==t.type){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);e.change(n)}}(r.scale,e),r.scaleDef=t):(r={key:n,scale:e,scaleDef:t},this.scales.set(n,r));var i=this.getSyncKey(r);if(r.syncKey=i,this.removeFromSyncScales(n),i){var a=this.syncScales.get(i);a||(a=[],this.syncScales.set(i,a)),a.push(n)}},e.prototype.getScale=function(e){var t=this.getScaleMeta(e);if(!t){var n=id(e.split("-")),r=this.syncScales.get(n);r&&r.length&&(t=this.getScaleMeta(r[0]))}return t&&t.scale},e.prototype.deleteScale=function(e){var t=this.getScaleMeta(e);if(t){var n=t.syncKey,r=this.syncScales.get(n);if(r&&r.length){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}}this.scales.delete(e)},e.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},e.prototype.removeFromSyncScales=function(e){var t=this;this.syncScales.forEach((function(n,r){var i=n.indexOf(e);if(-1!==i)return n.splice(i,1),0===n.length&&t.syncScales.delete(r),!1}))},e.prototype.getSyncKey=function(e){var t=e.scale,n=e.scaleDef,r=t.field,i=Yd(n,["sync"]);return!0===i?r:!1===i?void 0:i},e.prototype.getScaleMeta=function(e){return this.scales.get(e)},e}(),_k=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=e,this.right=t,this.bottom=n,this.left=r}return e.instance=function(t,n,r,i){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),new e(t,n,r,i)},e.prototype.max=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return this.top=Math.max(this.top,t),this.right=Math.max(this.right,n),this.bottom=Math.max(this.bottom,r),this.left=Math.max(this.left,i),this},e.prototype.shrink=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return this.top+=t,this.right+=n,this.bottom+=r,this.left+=i,this},e.prototype.inc=function(e,t){var n=e.width,r=e.height;switch(t){case nf.TOP:case nf.TOP_LEFT:case nf.TOP_RIGHT:this.top+=r;break;case nf.RIGHT:case nf.RIGHT_TOP:case nf.RIGHT_BOTTOM:this.right+=n;break;case nf.BOTTOM:case nf.BOTTOM_LEFT:case nf.BOTTOM_RIGHT:this.bottom+=r;break;case nf.LEFT:case nf.LEFT_TOP:case nf.LEFT_BOTTOM:this.left+=n}return this},e.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},e.prototype.clone=function(){return new(e.bind.apply(e,Ip([void 0],this.getPadding(),!1)))},e}();function Ak(e){var t=e.padding;if(!function(e){return!pd(e)&&!Bp(e)}(t))return new(_k.bind.apply(_k,Ip([void 0],Ek(t),!1)));var n=e.viewBBox,r=new _k,i=[],a=[],o=[];return Hp(e.getComponents(),(function(e){var t=e.type;t===af.AXIS?i.push(e):[af.LEGEND,af.SLIDER,af.SCROLLBAR].includes(t)?a.push(e):t!==af.GRID&&t!==af.TOOLTIP&&o.push(e)})),Hp(i,(function(e){var t=e.component.getLayoutBBox(),i=new RT(t.x,t.y,t.width,t.height).exceed(n);r.max(i)})),Hp(a,(function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),a=t.get("padding"),o=new RT(i.x,i.y,i.width,i.height).expand(a);r.inc(o,n)})),Hp(o,(function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),a=new RT(i.x,i.y,i.width,i.height);r.inc(a,n)})),r}function Ok(e,t,n){var r=n.instance();t.forEach((function(e){e.autoPadding=r.max(e.autoPadding.getPadding())}))}var Ik=function(e){function t(t){var n=e.call(this,{visible:t.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=Object.keys(bk),n.scalePool=new kk,n.layoutFunc=Sk,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(e){var t=e.name;if(!t.includes(":")){var r=n.createViewEvent(e);n.doPlotEvent(r),n.emit(t,r)}},n.onDelegateEvents=function(e){var t=e.name;if(t.includes(":")){var r=n.createViewEvent(e);n.emit(t,r)}};var r=t.id,i=void 0===r?Qd("view"):r,a=t.parent,o=t.canvas,s=t.backgroundGroup,l=t.middleGroup,c=t.foregroundGroup,u=t.region,h=void 0===u?{start:{x:0,y:0},end:{x:1,y:1}}:u,p=t.padding,d=t.appendPadding,f=t.theme,m=t.options,g=t.limitInPlot,v=t.syncViewPadding;return n.parent=a,n.canvas=o,n.backgroundGroup=s,n.middleGroup=l,n.foregroundGroup=c,n.region=h,n.padding=p,n.appendPadding=d,n.options=_p(_p({},n.options),m),n.limitInPlot=g,n.id=i,n.syncViewPadding=v,n.themeObject=zp(f)?Rd({},uk("default"),lk(f)):uk(f),n.init(),n}return kp(t,e),t.prototype.setLayout=function(e){this.layoutFunc=e},t.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},t.prototype.render=function(e,t){void 0===e&&(e=!1),this.emit(cf.BEFORE_RENDER,Tk.fromData(this,cf.BEFORE_RENDER,t)),this.paint(e),this.emit(cf.AFTER_RENDER,Tk.fromData(this,cf.AFTER_RENDER,t)),!1===this.visible&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this;this.emit(cf.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var t=this.geometries,n=0;n<t.length;n++)t[n].clear(),t[n].container.remove(!0),t[n].labelsContainer.remove(!0);this.geometries=[];var r=this.controllers;for(n=0;n<r.length;n++)"annotation"===r[n].name?r[n].clear(!0):r[n].clear();this.createdScaleKeys.forEach((function(t,n){e.getRootView().scalePool.deleteScale(n)})),this.createdScaleKeys.clear();var i=this.views;for(n=0;n<i.length;n++)i[n].clear();this.emit(cf.AFTER_CLEAR)},t.prototype.destroy=function(){this.emit(cf.BEFORE_DESTROY),Hp(this.interactions,(function(e){e&&e.destroy()})),this.clear();for(var t=this.controllers,n=0,r=t.length;n<r;n++){t[n].destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.geometries,r=0,i=n.length;r<i;r++){n[r].changeVisible(t)}var a=this.controllers;for(r=0,i=a.length;r<i;r++){a[r].changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},t.prototype.data=function(e){return Ud(this.options,"data",e),this.isDataChanged=!0,this},t.prototype.source=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(e)},t.prototype.filter=function(e,t){return Rp(t)?(Ud(this.options,["filters",e],t),this):(!t&&Yd(this.options,["filters",e])&&delete this.options.filters[e],this)},t.prototype.axis=function(e,t){return Sd(e)?Ud(this.options,["axes"],e):Ud(this.options,["axes",e],t),this},t.prototype.legend=function(e,t){return Sd(e)?Ud(this.options,["legends"],e):ed(e)?(Ud(this.options,["legends",e],t),Yp(t)&&(null==t?void 0:t.selected)&&Ud(this.options,["filters",e],(function(e){var n;return null===(n=null==t?void 0:t.selected[e])||void 0===n||n}))):Ud(this.options,["legends"],e),this},t.prototype.scale=function(e,t){var n=this;return ed(e)?Ud(this.options,["scales",e],t):zp(e)&&Hp(e,(function(e,t){Ud(n.options,["scales",t],e)})),this},t.prototype.tooltip=function(e){return Ud(this.options,"tooltip",e),this},t.prototype.annotation=function(){return this.getController("annotation")},t.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},t.prototype.coordinate=function(e,t){return ed(e)?Ud(this.options,"coordinate",{type:e,cfg:t}):Ud(this.options,"coordinate",e),this.coordinateController.update(this.options.coordinate),this.coordinateController},t.prototype.coord=function(e,t){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(e,t)},t.prototype.facet=function(e,t){this.facetInstance&&this.facetInstance.destroy();var n=function(e){return nS[bd(e)]}(e);if(!n)throw new Error("facet '".concat(e,"' is not exist!"));return this.facetInstance=new n(this,_p(_p({},t),{type:e})),this},t.prototype.animate=function(e){return Ud(this.options,"animate",e),this},t.prototype.updateOptions=function(e){return this.clear(),Md(this.options,e),this.views.forEach((function(e){return e.destroy()})),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},t.prototype.option=function(e,n){if(t.prototype[e])throw new Error("Can't use built in variable name \"".concat(e,'", please change another one.'));return Ud(this.options,e,n),this},t.prototype.theme=function(e){return this.themeObject=zp(e)?Rd({},this.themeObject,lk(e)):uk(e),this},t.prototype.interaction=function(e,t){var n=this.interactions[e];n&&n.destroy();var r=qS(e,this,t);return r&&(r.init(),this.interactions[e]=r),this},t.prototype.removeInteraction=function(e){var t=this.interactions[e];t&&(t.destroy(),this.interactions[e]=void 0)},t.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(cf.BEFORE_CHANGE_DATA,Tk.fromData(this,cf.BEFORE_CHANGE_DATA,null)),this.data(e),this.paint(!0);for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].changeData(e)}this.emit(cf.AFTER_CHANGE_DATA,Tk.fromData(this,cf.AFTER_CHANGE_DATA,null))},t.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:Nd(this.options.scales),axes:Nd(this.options.axes),coordinate:Nd(this.coordinateController.getOption()),tooltip:Nd(this.options.tooltip),legends:Nd(this.options.legends),animate:this.options.animate,visible:this.visible},r=new t(_p(_p({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:xf}),middleGroup:this.middleGroup.addGroup({zIndex:yf}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:vf}),theme:this.themeObject,padding:this.padding},e),{options:_p(_p({},n),Yd(e,"options",{}))}));return this.views.push(r),r},t.prototype.view=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(e)},t.prototype.removeView=function(e){var t=Jp(this.views,(function(t){return t===e}))[0];return t&&t.destroy(),t},t.prototype.getCoordinate=function(){return this.coordinateInstance},t.prototype.getTheme=function(){return this.themeObject},t.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},t.prototype.getYScales=function(){var e={},t=[];return this.geometries.forEach((function(n){var r=n.getYScale(),i=r.field;e[i]||(e[i]=!0,t.push(r))})),t},t.prototype.getScalesByDim=function(e){for(var t=this.geometries,n={},r=0,i=t.length;r<i;r++){var a=t[r],o="x"===e?a.getXScale():a.getYScale();o&&!n[o.field]&&(n[o.field]=o)}return n},t.prototype.getScale=function(e,t){var n=t||this.getScaleKey(e);return this.getRootView().scalePool.getScale(n)},t.prototype.getScaleByField=function(e,t){return this.getScale(e,t)},t.prototype.getOptions=function(){return this.options},t.prototype.getData=function(){return this.filteredData},t.prototype.getOriginalData=function(){return this.options.data},t.prototype.getPadding=function(){return this.autoPadding.getPadding()},t.prototype.getGeometries=function(){return this.geometries},t.prototype.getElements=function(){return Zp(this.geometries,(function(e,t){return e.concat(t.getElements())}),[])},t.prototype.getElementsBy=function(e){return this.getElements().filter((function(t){return e(t)}))},t.prototype.getLayer=function(e){return e===ef.BG?this.backgroundGroup:e===ef.MID?this.middleGroup:(ef.FORE,this.foregroundGroup)},t.prototype.isPointInPlot=function(e){return zT(this.getCoordinate(),e)},t.prototype.getLegendAttributes=function(){return Wp(this.geometries.map((function(e){return e.getGroupAttributes()})))},t.prototype.getGroupScales=function(){var e=this.geometries.map((function(e){return e.getGroupScales()}));return PT(Wp(e))},t.prototype.getCanvas=function(){return this.getRootView().canvas},t.prototype.getRootView=function(){for(var e=this;e.parent;)e=e.parent;return e},t.prototype.getXY=function(e){var t,n,r=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y");if(Hp(e,(function(e,r){i[r]&&(t=i[r].scale(e)),a[r]&&(n=a[r].scale(e))})),!Dp(t)&&!Dp(n))return r.convert({x:t,y:n})},t.prototype.getController=function(e){return Up(this.controllers,(function(t){return t.name===e}))},t.prototype.showTooltip=function(e){var t=this.getController("tooltip");return t&&t.showTooltip(e),this},t.prototype.hideTooltip=function(){var e=this.getController("tooltip");return e&&e.hideTooltip(),this},t.prototype.lockTooltip=function(){var e=this.getController("tooltip");return e&&e.lockTooltip(),this},t.prototype.unlockTooltip=function(){var e=this.getController("tooltip");return e&&e.unlockTooltip(),this},t.prototype.isTooltipLocked=function(){var e=this.getController("tooltip");return e&&e.isTooltipLocked()},t.prototype.getTooltipItems=function(e){var t=this.getController("tooltip");return t?t.getTooltipItems(e):[]},t.prototype.getSnapRecords=function(e){for(var t=this.geometries,n=[],r=0,i=t.length;r<i;r++){var a=t[r],o=a.dataArray;a.sort(o);for(var s=void 0,l=0,c=o.length;l<c;l++){(s=mk(e,o[l],a))&&n.push(s)}}var u=this.views;for(r=0,i=u.length;r<i;r++){var h=u[r].getSnapRecords(e);n=n.concat(h)}return n},t.prototype.getComponents=function(){for(var e=[],t=this.controllers,n=0,r=t.length;n<r;n++){var i=t[n];e=e.concat(i.getComponents())}return e},t.prototype.filterData=function(e){var t=this.options.filters;return 0===Jd(t)?e:Fp(e,(function(e,n){return Object.keys(t).every((function(r){return(0,t[r])(e[r],e,n)}))}))},t.prototype.filterFieldData=function(e,t){var n=this.options.filters,r=Yd(n,e);return Ad(r)?t:t.filter((function(t,n){return r(t[e],t,n)}))},t.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),t=e.start,n=e.end,r=this.coordinateBBox.bl,i=this.coordinateBBox.tr;jd(t,r)&&jd(n,i)?this.isCoordinateChanged=!1:(this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(r,i))},t.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(cf.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(cf.AFTER_PAINT),this.isDataChanged=!1},t.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=Yd(this.themeObject,"background");if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var t=this.viewBBox,n=t.x,r=t.y,i=t.width,a=t.height;this.backgroundStyleRectShape.attr({fill:e,x:n,y:r,width:i,height:a})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},t.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=Ak(this).shrink(Ek(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].renderPaddingRecursive(e)}},t.prototype.renderLayoutRecursive=function(e){var t=!0===this.syncViewPadding?Ok:Rp(this.syncViewPadding)?this.syncViewPadding:void 0;t&&(t(this,this.views,_k),this.views.forEach((function(e){e.coordinateBBox=e.viewBBox.shrink(e.autoPadding.getPadding()),e.adjustCoordinate()}))),this.doLayout();for(var n=this.views,r=0,i=n.length;r<i;r++){n[r].renderLayoutRecursive(e)}},t.prototype.renderPaintRecursive=function(e){var t=this.middleGroup;if(this.limitInPlot){var n=jT(this.coordinateInstance),r=n.type,i=n.attrs;t.setClip({type:r,attrs:i})}else t.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var a=this.views,o=0,s=a.length;o<s;o++){a[o].renderPaintRecursive(e)}},t.prototype.createScale=function(e,t,n,r){var i=Yd(this.options.scales,[e]),a=_p(_p({},i),n);return this.parent?this.parent.createScale(e,t,a,r):this.scalePool.createScale(e,t,a,r)},t.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].renderDataRecursive(e)}},t.prototype.calculateViewBBox=function(){var e,t,n,r;if(this.parent){var i=this.parent.coordinateBBox;e=i.x,t=i.y,n=i.width,r=i.height}else e=0,t=0,n=this.canvas.get("width"),r=this.canvas.get("height");var a=this.region,o=a.start,s=a.end,l=new RT(e+n*o.x,t+r*o.y,n*(s.x-o.x),r*(s.y-o.y));this.viewBBox&&this.viewBBox.isEqual(l)||(this.viewBBox=new RT(e+n*o.x,t+r*o.y,n*(s.x-o.x),r*(s.y-o.y))),this.coordinateBBox=this.viewBBox},t.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},t.prototype.initComponentController=function(){for(var e=this.usedControllers,t=0,n=e.length;t<n;t++){var r=e[t],i=bk[r];i&&this.controllers.push(new i(this))}},t.prototype.createViewEvent=function(e){var t=e.shape,n=e.name,r=t?t.get("origin"):null,i=new Tk(this,e,r);return i.type=n,i},t.prototype.doPlotEvent=function(e){var t=e.type,n={x:e.x,y:e.y};if(["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"].includes(t)){var r=this.isPointInPlot(n),i=e.clone();if(r){var a="plot:".concat(t);i.type=a,this.emit(a,i),"mouseleave"!==t&&"touchend"!==t||(this.isPreMouseInPlot=!1)}"mousemove"===t||"touchmove"===t?(this.isPreMouseInPlot&&!r?("mousemove"===t&&(i.type=df.MOUSE_LEAVE,this.emit(df.MOUSE_LEAVE,i)),i.type=df.LEAVE,this.emit(df.LEAVE,i)):!this.isPreMouseInPlot&&r&&("mousemove"===t&&(i.type=df.MOUSE_ENTER,this.emit(df.MOUSE_ENTER,i)),i.type=df.ENTER,this.emit(df.ENTER,i)),this.isPreMouseInPlot=r):"mouseleave"!==t&&"touchend"!==t||this.isPreMouseInPlot&&("mouseleave"===t&&(i.type=df.MOUSE_LEAVE,this.emit(df.MOUSE_LEAVE,i)),i.type=df.LEAVE,this.emit(df.LEAVE,i),this.isPreMouseInPlot=!1)}},t.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},t.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var t=this.getCoordinate(),n=Yd(this.options,"scales",{}),r=this.geometries,i=0,a=r.length;i<a;i++){var o=r[i];o.scales=this.getGeometryScales();var s={coordinate:t,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?o.update(s):o.init(s)}this.adjustScales()},t.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),t=this.getGroupedFields(),n=this.getOptions(),r=n.data,i=n.scales,a=void 0===i?{}:i,o=this.filteredData,s=0,l=e.length;s<l;s++){var c=e[s],u=a[c],h=this.getScaleKey(c);this.createScale(c,t.includes(c)?r:o,u,h),this.createdScaleKeys.set(h,!0)}},t.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},t.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),t={},n=0;n<e.length;n++){var r=e[n];t[r]=this.getScaleByField(r)}return t},t.prototype.getScaleFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){PT(n[r].getScaleFields(),e,t)}return e},t.prototype.getGroupedFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){PT(n[r].getGroupFields(),e,t)}return e},t.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},t.prototype.adjustCategoryScaleRange=function(){var e=this,t=Ip([this.getXScale()],this.getYScales(),!0).filter((function(e){return!!e})),n=this.getCoordinate(),r=this.options.scales;Hp(t,(function(t){var i=t.field,a=t.values,o=t.isCategory,s=t.isIdentity;(o||s)&&a&&!Yd(r,[i,"range"])&&(t.range=UT(t,n,e.theme))}))},t.prototype.initComponents=function(e){for(var t=this.controllers,n=0;n<t.length;n++){var r=t[n];e?r.update():(r.clear(),r.render())}},t.prototype.doLayout=function(){this.layoutFunc(this)},t.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,t=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,t)},t.prototype.paintGeometries=function(e){for(var t=this.options.animate,n=this.getCoordinate(),r={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},i=this.geometries,a=0;a<i.length;a++){var o=i[a];o.coordinate=n,o.canvasRegion=r,t||o.animate(!1),o.paint(e)}},t.prototype.renderComponents=function(e){for(var t=0;t<this.getComponents().length;t++){this.getComponents()[t].component.render()}},t.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},t.prototype.initOptions=function(){var e=this,t=this.options,n=t.geometries,r=void 0===n?[]:n,i=t.interactions,a=void 0===i?[]:i,o=t.views,s=void 0===o?[]:o,l=t.annotations,c=void 0===l?[]:l,u=t.coordinate,h=t.events,p=t.facets;this.coordinateController?u&&this.coordinateController.update(u):this.coordinateController=new wk(u);for(var d=0;d<r.length;d++){var f=r[d];this.createGeometry(f)}for(var m=0;m<a.length;m++){var g=a[m],v=g.type,y=g.cfg;this.interaction(v,y)}for(var x=0;x<s.length;x++){var E=s[x];this.createView(E)}for(var b=this.getController("annotation"),C=0;C<c.length;C++){var w=c[C];b.annotation(w)}h&&Hp(h,(function(t,n){e.on(n,t)})),p&&Hp(p,(function(t){var n=t.type,r=Ap(t,["type"]);e.facet(n,r)}))},t.prototype.createGeometry=function(e){var t=e.type,n=e.cfg,r=void 0===n?{}:n;if(this[t]){var i=this[t](r);Hp(e,(function(e,t){Rp(i[t])&&i[t](e)}))}},t.prototype.getScaleKey=function(e){return"".concat(this.id,"-").concat(e)},t}(Rf);function Mk(e,t){Ik.prototype[e.toLowerCase()]=function(e){void 0===e&&(e={});var n=_p({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),r=new t(n);return this.geometries.push(r),r}}var Nk=function(e){function t(t){var n=this,r=t.container,i=t.width,a=t.height,o=t.autoFit,s=void 0!==o&&o,l=t.padding,c=t.appendPadding,u=t.renderer,h=void 0===u?"canvas":u,p=t.pixelRatio,d=t.localRefresh,f=void 0===d||d,m=t.visible,g=void 0===m||m,v=t.supportCSSTransform,y=void 0!==v&&v,x=t.defaultInteractions,E=void 0===x?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:x,b=t.options,C=t.limitInPlot,w=t.theme,T=t.syncViewPadding,S=ed(r)?document.getElementById(r):r,k=Af('<div style="position:relative;"></div>');S.appendChild(k);var _=Lf(S,s,i,a),A=new(function(e){var t=Sf[e];if(!t)throw new Error("G engine '".concat(e,"' is not exist, please register it at first."));return t}(h).Canvas)(_p({container:k,pixelRatio:p,localRefresh:f,supportCSSTransform:y},_));return(n=e.call(this,{parent:null,canvas:A,backgroundGroup:A.addGroup({zIndex:xf}),middleGroup:A.addGroup({zIndex:yf}),foregroundGroup:A.addGroup({zIndex:vf}),padding:l,appendPadding:c,visible:g,options:b,limitInPlot:C,theme:w,syncViewPadding:T})||this).onResize=Fd((function(){n.forceFit()}),300),n.ele=S,n.canvas=A,n.width=_.width,n.height=_.height,n.autoFit=s,n.localRefresh=f,n.renderer=h,n.wrapperElement=k,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(E),n}return kp(t,e),t.prototype.initDefaultInteractions=function(e){var t=this;Hp(e,(function(e){t.interaction(e)}))},t.prototype.aria=function(e){var t="aria-label";!1===e?this.ele.removeAttribute(t):this.ele.setAttribute(t,e.label)},t.prototype.changeSize=function(e,t){return this.width===e&&this.height===t||(this.emit(cf.BEFORE_CHANGE_SIZE),this.width=e,this.height=t,this.canvas.changeSize(e,t),this.render(!0),this.emit(cf.AFTER_CHANGE_SIZE)),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.aria(!1)},t.prototype.destroy=function(){var t,n;e.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),t=this.wrapperElement,(n=t.parentNode)&&n.removeChild(t),this.wrapperElement=null},t.prototype.changeVisible=function(t){return e.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},t.prototype.forceFit=function(){if(!this.destroyed){var e=Lf(this.ele,!0,this.width,this.height),t=e.width,n=e.height;this.changeSize(t,n)}},t.prototype.updateCanvasStyle=function(){Nf(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},t.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},t.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},t}(Ik),Fk=function(){function e(e){this.visible=!0,this.components=[],this.view=e}return e.prototype.clear=function(e){Hp(this.components,(function(e){e.component.destroy()})),this.components=[]},e.prototype.destroy=function(){this.clear()},e.prototype.getComponents=function(){return this.components},e.prototype.changeVisible=function(e){this.visible!==e&&(this.components.forEach((function(t){e?t.component.show():t.component.hide()})),this.visible=e)},e}();var Lk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isLocked=!1,t}return kp(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.isVisible=function(){return!1!==this.view.getOptions().tooltip},t.prototype.render=function(){},t.prototype.showTooltip=function(e){if(this.point=e,this.isVisible()){var t=this.view,n=this.getTooltipItems(e);if(n.length){var r=this.getTitle(n),i={x:n[0].x,y:n[0].y};t.emit("tooltip:show",Tk.fromData(t,"tooltip:show",_p({items:n,title:r},e)));var a=this.getTooltipCfg(),o=a.follow,s=a.showMarkers,l=a.showCrosshairs,c=a.showContent,u=a.marker,h=this.items,p=this.title;if(jd(p,r)&&jd(h,n)?(this.tooltip&&o&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()):(t.emit("tooltip:change",Tk.fromData(t,"tooltip:change",_p({items:n,title:r},e))),(Rp(c)?c(n):c)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Md({},a,{items:this.getItemsAfterProcess(n),title:r},o?e:{})),this.tooltip.show()),s&&this.renderTooltipMarkers(n,u)),this.items=n,this.title=r,l){var d=Yd(a,["crosshairs","follow"],!1);this.renderCrosshairs(d?e:i,a)}}else this.hideTooltip()}},t.prototype.hideTooltip=function(){if(this.getTooltipCfg().follow){var e=this.tooltipMarkersGroup;e&&e.hide();var t=this.xCrosshair,n=this.yCrosshair;t&&t.hide(),n&&n.hide();var r=this.tooltip;r&&r.hide(),this.view.emit("tooltip:hide",Tk.fromData(this.view,"tooltip:hide",{})),this.point=null}else this.point=null},t.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},t.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},t.prototype.isTooltipLocked=function(){return this.isLocked},t.prototype.clear=function(){var e=this,t=e.tooltip,n=e.xCrosshair,r=e.yCrosshair,i=e.tooltipMarkersGroup;t&&(t.hide(),t.clear()),n&&n.clear(),r&&r.clear(),i&&i.clear(),(null==t?void 0:t.get("customContent"))&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},t.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},t.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},t.prototype.changeVisible=function(e){if(this.visible!==e){var t=this,n=t.tooltip,r=t.tooltipMarkersGroup,i=t.xCrosshair,a=t.yCrosshair;e?(n&&n.show(),r&&r.show(),i&&i.show(),a&&a.show()):(n&&n.hide(),r&&r.hide(),i&&i.hide(),a&&a.hide()),this.visible=e}},t.prototype.getTooltipItems=function(e){var t=this.findItemsFromView(this.view,e);if(t.length){for(var n=0,r=t=Wp(t);n<r.length;n++)for(var i=0,a=r[n];i<a.length;i++){var o=a[i],s=o.mappingData,l=s.x,c=s.y;o.x=Bp(l)?l[l.length-1]:l,o.y=Bp(c)?c[c.length-1]:c}if(!1===this.getTooltipCfg().shared&&t.length>1){for(var u=t[0],h=Math.abs(e.y-u[0].y),p=0,d=t;p<d.length;p++){var f=d[p],m=Math.abs(e.y-f[0].y);m<=h&&(u=f,h=m)}t=[u]}return function(e){for(var t=[],n=function(n){var r=e[n];Up(t,(function(e){return e.color===r.color&&e.name===r.name&&e.value===r.value&&e.title===r.title}))||t.push(r)},r=0;r<e.length;r++)n(r);return t}(Wp(t))}return[]},t.prototype.layout=function(){},t.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}})}},t.prototype.isCursorEntered=function(e){if(this.tooltip){var t=this.tooltip.getContainer(),n=this.tooltip.get("capture");if(t&&n){var r=t.getBoundingClientRect(),i=r.x,a=r.y,o=r.width,s=r.height;return new RT(i,a,o,s).isPointIn(e)}}return!1},t.prototype.getTooltipCfg=function(){var e=this.view,t=e.getOptions().tooltip,n=this.processCustomContent(t),r=e.getTheme(),i=Yd(r,["components","tooltip"],{}),a=Yd(n,"enterable",i.enterable);return Rd({},i,n,{capture:!(!a&&!this.isLocked)})},t.prototype.processCustomContent=function(e){if(Sd(e)||!Yd(e,"customContent"))return e;var t=e.customContent;return _p(_p({},e),{customContent:function(e,n){var r=t(e,n)||"";return ed(r)?'<div class="g2-tooltip">'+r+"</div>":r}})},t.prototype.getTitle=function(e){var t=e[0].title||e[0].name;return this.title=t,t},t.prototype.renderTooltip=function(){var e=this.view.getCanvas(),t={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},n=this.getTooltipCfg(),r=new ST(_p(_p({parent:e.get("el").parentNode,region:t},n),{visible:!1,crosshairs:null}));r.init(),this.tooltip=r},t.prototype.renderTooltipMarkers=function(e,t){for(var n=this.getTooltipMarkersGroup(),r=0,i=e;r<i.length;r++){var a=i[r],o=a.x,s=a.y,l=_p(_p({fill:a.color,symbol:"circle",shadowColor:a.color},t),{x:o,y:s});n.addShape("marker",{attrs:l})}},t.prototype.renderCrosshairs=function(e,t){var n=Yd(t,["crosshairs","type"],"x");"x"===n?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,t)):"y"===n?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,t)):"xy"===n&&(this.renderXCrosshairs(e,t),this.renderYCrosshairs(e,t))},t.prototype.renderXCrosshairs=function(e,t){var n=this.getViewWithGeometry(this.view).getCoordinate();if(zT(n,e)){var r,i;if(n.isRect)n.isTransposed?(r={x:n.start.x,y:e.y},i={x:n.end.x,y:e.y}):(r={x:e.x,y:n.end.y},i={x:e.x,y:n.start.y});else{var a=HT(n,e),o=n.getCenter(),s=n.getRadius();i=AT(o.x,o.y,s,a),r=o}var l=Rd({start:r,end:i,container:this.getTooltipCrosshairsGroup()},Yd(t,"crosshairs",{}),this.getCrosshairsText("x",e,t));delete l.type;var c=this.xCrosshair;c?c.update(l):(c=new Rw(l)).init(),c.render(),c.show(),this.xCrosshair=c}},t.prototype.renderYCrosshairs=function(e,t){var n=this.getViewWithGeometry(this.view).getCoordinate();if(zT(n,e)){var r,i;if(n.isRect){var a=void 0,o=void 0;n.isTransposed?(a={x:e.x,y:n.end.y},o={x:e.x,y:n.start.y}):(a={x:n.start.x,y:e.y},o={x:n.end.x,y:e.y}),r={start:a,end:o},i="Line"}else r={center:n.getCenter(),radius:BT(n,e),startAngle:n.startAngle,endAngle:n.endAngle},i="Circle";delete(r=Rd({container:this.getTooltipCrosshairsGroup()},r,Yd(t,"crosshairs",{}),this.getCrosshairsText("y",e,t))).type;var s=this.yCrosshair;s?n.isRect&&"circle"===s.get("type")||!n.isRect&&"line"===s.get("type")?(s=new Hw[i](r)).init():s.update(r):(s=new Hw[i](r)).init(),s.render(),s.show(),this.yCrosshair=s}},t.prototype.getCrosshairsText=function(e,t,n){var r=Yd(n,["crosshairs","text"]),i=Yd(n,["crosshairs","follow"]),a=this.items;if(r){var o=this.getViewWithGeometry(this.view),s=a[0],l=o.getXScale(),c=o.getYScales()[0],u=void 0,h=void 0;if(i){var p=this.view.getCoordinate().invert(t);u=l.invert(p.x),h=c.invert(p.y)}else u=s.data[l.field],h=s.data[c.field];var d="x"===e?u:h;return Rp(r)?r=r(e,d,a,t):r.content=d,{text:r}}},t.prototype.getGuideGroup=function(){if(!this.guideGroup){var e=this.view.foregroundGroup;this.guideGroup=e.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},t.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):((e=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"})).toFront(),this.tooltipMarkersGroup=e),e},t.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||((e=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1})).toBack(),this.tooltipCrosshairsGroup=e),e},t.prototype.findItemsFromView=function(e,t){if(!1===e.getOptions().tooltip)return[];for(var n=xk(e,t,this.getTooltipCfg()),r=0,i=e.views;r<i.length;r++){var a=i[r];n=n.concat(this.findItemsFromView(a,t))}return n},t.prototype.getViewWithGeometry=function(e){var t=this;return e.geometries.length?e:Up(e.views,(function(e){return t.getViewWithGeometry(e)}))},t.prototype.getItemsAfterProcess=function(e){var t=this.getTooltipCfg().customItems;return(t||function(e){return e})(e)},t}(Fk),Pk={};function Rk(e){return Pk[e.toLowerCase()]}function Dk(e,t){Pk[e.toLowerCase()]=t}var Bk={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},zk={interval:function(e){return{enter:{animation:e.isRect?e.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:e.isPolar&&e.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},Hk={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(e){var t;return e.isRect?t=e.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",e.isPolar&&e.isTransposed&&(t="wave-in")),{animation:t}},schema:function(e){return{animation:e.isRect?e.isTransposed?"grow-in-x":"grow-in-y":"grow-in-xy"}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function jk(e,t,n){var r=zk[e];return r&&(Rp(r)&&(r=r(t)),r=Rd({},Bk,r),n)?r[n]:r}function Gk(e,t,n){var r=Yd(e.get("origin"),"data","_origin"),i=t.animation,a=function(e,t){return{delay:Rp(e.delay)?e.delay(t):e.delay,easing:Rp(e.easing)?e.easing(t):e.easing,duration:Rp(e.duration)?e.duration(t):e.duration,callback:e.callback,repeat:e.repeat}}(t,r);if(i){var o=Rk(i);o&&o(e,a,n)}else e.animate(n.toAttrs,a)}var $k=function(e){function t(t){var n=e.call(this,t)||this;n.states=[];var r=t.shapeFactory,i=t.container,a=t.offscreenGroup,o=t.elementIndex,s=t.visible,l=void 0===s||s;return n.shapeFactory=r,n.container=i,n.offscreenGroup=a,n.visible=l,n.elementIndex=o,n}return kp(t,e),t.prototype.draw=function(e,t){void 0===t&&(t=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,t),!1===this.visible&&this.changeVisible(!1)},t.prototype.update=function(e){var t=this.shapeFactory,n=this.shape;if(n){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(n,e);var r=this.getOffscreenGroup(),i=t.drawShape(this.shapeType,e,r);i.cfg.data=this.data,i.cfg.origin=e,i.cfg.element=this,this.syncShapeStyle(n,i,this.getStates(),this.getAnimateCfg("update"))}},t.prototype.destroy=function(){var t=this.shapeFactory,n=this.shape;if(n){var r=this.getAnimateCfg("leave");r?Gk(n,r,{coordinate:t.coordinate,toAttrs:_p({},n.attr())}):n.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach((function(e){e.show()}))):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach((function(e){e.hide()})))},t.prototype.setState=function(e,t){var n=this,r=n.states,i=n.shapeFactory,a=n.model,o=n.shape,s=n.shapeType,l=r.indexOf(e);if(t){if(l>-1)return;r.push(e),"active"!==e&&"selected"!==e||null==o||o.toFront()}else{if(-1===l)return;r.splice(l,1),"active"!==e&&"selected"!==e||(this.geometry.zIndexReversed?o.setZIndex(this.geometry.elements.length-this.elementIndex):o.setZIndex(this.elementIndex))}var c=i.drawShape(s,a,this.getOffscreenGroup());r.length?this.syncShapeStyle(o,c,r,null):this.syncShapeStyle(o,c,["reset"],null),c.remove(!0);var u={state:e,stateStatus:t,element:this,target:this.container};this.container.emit("statechange",u),NC(this.shape,"statechange",u)},t.prototype.clearStates=function(){var e=this;Hp(this.states,(function(t){e.setState(t,!1)})),this.states=[]},t.prototype.hasState=function(e){return this.states.includes(e)},t.prototype.getStates=function(){return this.states},t.prototype.getData=function(){return this.data},t.prototype.getModel=function(){return this.model},t.prototype.getBBox=function(){var e=this.shape,t=this.labelShape,n={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return e&&(n=e.getCanvasBBox()),t&&t.forEach((function(e){var t=e.getCanvasBBox();n.x=Math.min(t.x,n.x),n.y=Math.min(t.y,n.y),n.minX=Math.min(t.minX,n.minX),n.minY=Math.min(t.minY,n.minY),n.maxX=Math.max(t.maxX,n.maxX),n.maxY=Math.max(t.maxY,n.maxY)})),n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n},t.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,t=e.shapeType,n=e.geometry,r=e.shapeFactory,i=n.stateOption,a=r.defaultShapeType,o=r.theme[t]||r.theme[a];this.statesStyle=Rd({},o,i)}return this.statesStyle},t.prototype.getStateStyle=function(e,t){var n=this.getStatesStyle(),r=Yd(n,[e,"style"],{}),i=r[t]||r;return Rp(i)?i(this):i},t.prototype.getAnimateCfg=function(e){var t=this,n=this.animate;if(n){var r=n[e];return r?_p(_p({},r),{callback:function(){var e;Rp(r.callback)&&r.callback(),null===(e=t.geometry)||void 0===e||e.emit(hf.AFTER_DRAW_ANIMATE)}}):r}return null},t.prototype.drawShape=function(e,t){var n;void 0===t&&(t=!1);var r=this,i=r.shapeFactory,a=r.container,o=r.shapeType;if(this.shape=i.drawShape(o,e,a),this.shape){this.setShapeInfo(this.shape,e);var s=this.shape.cfg.name;s?ed(s)&&(this.shape.cfg.name=["element",s]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var l=t?"enter":"appear",c=this.getAnimateCfg(l);c&&(null===(n=this.geometry)||void 0===n||n.emit(hf.BEFORE_DRAW_ANIMATE),Gk(this.shape,c,{coordinate:i.coordinate,toAttrs:_p({},this.shape.attr())}))}},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.setShapeInfo=function(e,t){var n=this;(e.cfg.origin=t,e.cfg.element=this,e.isGroup())&&e.get("children").forEach((function(e){n.setShapeInfo(e,t)}))},t.prototype.syncShapeStyle=function(e,t,n,r,i){var a,o=this;if(void 0===n&&(n=[]),void 0===i&&(i=0),e&&t){var s=e.get("clipShape"),l=t.get("clipShape");if(this.syncShapeStyle(s,l,n,r),e.isGroup())for(var c=e.get("children"),u=t.get("children"),h=0;h<c.length;h++)this.syncShapeStyle(c[h],u[h],n,r,i+h);else{if(!zd(n)&&!jd(n,["reset"])){var p=e.get("name");Bp(p)&&(p=p[1]),Hp(n,(function(e){if("element-background"!==t.get("name")){var n=o.getStateStyle(e,p||i);t.attr(n)}}))}var d=NT(e,t);this.animate?r?(null===(a=this.geometry)||void 0===a||a.emit(hf.BEFORE_DRAW_ANIMATE),Gk(e,r,{coordinate:this.shapeFactory.coordinate,toAttrs:d,shapeModel:this.model})):zd(n)?e.attr(d):(e.stopAnimate(),e.animate(d,{duration:300})):e.attr(d)}}},t.prototype.getShapeType=function(e){var t=Yd(e,"shape");return Bp(t)?t[0]:t},t}(Rf),Yk={},Uk={};function Vk(e,t){Yk[e.toLowerCase()]=t}function Wk(e,t){Uk[e.toLowerCase()]=t}var Xk={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(e,t){var n=this.getShape(e);return n.getPoints?n.getPoints(t):this.getDefaultPoints(t)},getShape:function(e){var t=this[e]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(e){return Yd(e,[this.defaultShapeType,"default","style"],{})},getMarker:function(e,t){var n=this.getShape(e);if(!n.getMarker){var r=this.defaultShapeType;n=this.getShape(r)}var i=this.theme,a=Yd(i,[e,"default"],{}),o=n.getMarker(t);return Rd({},a,o)},drawShape:function(e,t,n){return this.getShape(e).draw(t,n)}},qk={coordinate:null,parsePath:function(e){var t=this.coordinate,n=uy(e);return n=t.isPolar?mS(t,n):function(e,t){var n=[];return Hp(t,(function(t){switch(t[0].toLowerCase()){case"m":case"l":case"c":n.push(uS(t,e));break;case"a":n.push(hS(t,e));break;case"z":default:n.push(t)}})),n}(t,n)},parsePoint:function(e){return this.coordinate.convert(e)},parsePoints:function(e){var t=this.coordinate;return e.map((function(e){return t.convert(e)}))},draw:function(e,t){}},Kk={};function Qk(e,t){var n=wd(e),r=_p(_p(_p({},Xk),t),{geometryType:e});return Kk[n]=r,r}function Zk(e,t,n){var r=wd(e),i=Kk[r],a=_p(_p({},qk),n);return i[t]=a,a}function Jk(e){var t=wd(e);return Kk[t]}function e_(e,t){return od(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],(function(n){return!jd(e[n],t[n])}))}function t_(e){return Bp(e)?e:e.split("*")}function n_(e,t){for(var n=[],r=[],i=[],a=new Map,o=0;o<t.length;o++){var s=t[o];e[s]?r.push(s):n.push(s),a.set(s,!0)}return Object.keys(e).forEach((function(e){a.has(e)||i.push(e)})),{added:n,updated:r,removed:i}}var r_=function(e){function t(t){var n=e.call(this,t)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var r=t.container,i=t.labelsContainer,a=t.coordinate,o=t.data,s=t.sortable,l=void 0!==s&&s,c=t.visible,u=void 0===c||c,h=t.theme,p=t.scales,d=void 0===p?{}:p,f=t.scaleDefs,m=void 0===f?{}:f,g=t.intervalPadding,v=t.dodgePadding,y=t.maxColumnWidth,x=t.minColumnWidth,E=t.columnWidthRatio,b=t.roseWidthRatio,C=t.multiplePieWidthRatio,w=t.zIndexReversed;return n.container=r,n.labelsContainer=i,n.coordinate=a,n.data=o,n.sortable=l,n.visible=u,n.userTheme=h,n.scales=d,n.scaleDefs=m,n.intervalPadding=g,n.dodgePadding=v,n.maxColumnWidth=y,n.minColumnWidth=x,n.columnWidthRatio=E,n.roseWidthRatio=b,n.multiplePieWidthRatio=C,n.zIndexReversed=w,n}return kp(t,e),t.prototype.position=function(e){var t=e;Yp(e)||(t={fields:t_(e)});var n=Yd(t,"fields");return 1===n.length&&(n.unshift("1"),Ud(t,"fields",n)),Ud(this.attributeOption,"position",t),this},t.prototype.color=function(e,t){return this.createAttrOption("color",e,t),this},t.prototype.shape=function(e,t){return this.createAttrOption("shape",e,t),this},t.prototype.size=function(e,t){return this.createAttrOption("size",e,t),this},t.prototype.adjust=function(e){var t=e;return(ed(e)||Yp(e))&&(t=[e]),Hp(t,(function(e,n){zp(e)||(t[n]={type:e})})),this.adjustOption=t,this},t.prototype.style=function(e,t){if(ed(e)){var n=t_(e);this.styleOption={fields:n,callback:t}}else{var r=e,i=(n=r.fields,r.callback),a=r.cfg;this.styleOption=n||i||a?e:{cfg:e}}return this},t.prototype.tooltip=function(e,t){if(ed(e)){var n=t_(e);this.tooltipOption={fields:n,callback:t}}else this.tooltipOption=e;return this},t.prototype.animate=function(e){return this.animateOption=e,this},t.prototype.label=function(e,t,n){if(ed(e)){var r={},i=t_(e);r.fields=i,Rp(t)?r.callback=t:Yp(t)&&(r.cfg=t),n&&(r.cfg=n),this.labelOption=r}else this.labelOption=e;return this},t.prototype.state=function(e){return this.stateOption=e,this},t.prototype.customInfo=function(e){return this.customOption=e,this},t.prototype.init=function(e){void 0===e&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},t.prototype.update=function(e){void 0===e&&(e={});var t=e.data,n=e.isDataChanged,r=e.isCoordinateChanged,i=this.attributeOption,a=this.lastAttributeOption;jd(i,a)?!t||!n&&jd(t,this.data)?this.setCfg(e):(this.setCfg(e),this.initAttributes(),this.processData(t)):this.init(e),this.adjustScale(),this.isCoordinateChanged=r},t.prototype.paint=function(e){void 0===e&&(e=!1),this.animateOption&&(this.animateOption=Rd({},jk(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[],this.getOffscreenGroup().clear();var t=this.beforeMappingData,n=this.beforeMapping(t);this.dataArray=new Array(n.length);for(var r=0;r<n.length;r++){var i=n[r];this.dataArray[r]=this.mapping(i)}if(this.updateElements(this.dataArray,e),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(e)){var a=this.container,o=this.type,s=this.coordinate,l=Yd(this.animateOption,"appear"),c=this.getYScale(),u=s.convert({x:0,y:c.scale(this.getYMinValue())});!function(e,t,n,r,i){if(Hk[n]){var a=Hk[n](r),o=Rk(Yd(a,"animation",""));if(o){var s=_p(_p(_p({},Bk.appear),a),t);e.stopAnimate(),o(e,s,{coordinate:r,minYPoint:i,toAttrs:null})}}}(a,l,o,s,u)}this.labelOption&&this.renderLabels(Wp(this.dataArray),e),this.lastAttributeOption=_p({},this.attributeOption),!1===this.visible&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this,t=e.container,n=e.geometryLabel,r=e.offscreenGroup;t&&t.clear(),n&&n.clear(),r&&r.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},t.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,e.prototype.destroy.call(this)},t.prototype.getGroupScales=function(){return this.groupScales},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},t.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},t.prototype.getGroupAttributes=function(){var e=[];return Hp(this.attributes,(function(t){Tf.includes(t.type)&&e.push(t)})),e},t.prototype.getDefaultValue=function(e){var t,n=this.getAttribute(e);return n&&zd(n.scales)&&(t=n.values[0]),t},t.prototype.getAttributeValues=function(e,t){for(var n=[],r=e.scales,i=0,a=r.length;i<a;i++){var o=r[i],s=o.field;o.isIdentity?n.push(o.values):n.push(t[s])}return e.mapping.apply(e,n)},t.prototype.getAdjust=function(e){return this.adjusts[e]},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.getData=function(){return this.data},t.prototype.getShapeMarker=function(e,t){return this.getShapeFactory().getMarker(e,t)},t.prototype.getElementsBy=function(e){return this.elements.filter((function(t){return e(t)}))},t.prototype.getElements=function(){return this.elements},t.prototype.getElementId=function(e){var t=(e=Bp(e)?e[0]:e)._origin;if(this.idFields.length){for(var n=t[this.idFields[0]],r=1;r<this.idFields.length;r++)n+="-"+t[this.idFields[r]];return n}var i,a,o=this.type,s=this.getXScale(),l=this.getYScale(),c=s.field||"x",u=t[l.field||"y"];i="identity"===s.type?s.values[0]:t[c],a="interval"===o||"schema"===o?"".concat(i):"line"===o||"area"===o||"path"===o?o:"".concat(i,"-").concat(u);var h=this.groupScales;zd(h)&&(h=Yd(this.getAttribute("color"),"scales",[]));r=0;for(var p=h.length;r<p;r++){var d=h[r].field;a="".concat(a,"-").concat(t[d])}var f=this.getAdjust("dodge");if(f){var m=f.dodgeBy;m&&(a="".concat(a,"-").concat(t[m]))}return this.getAdjust("jitter")&&(a="".concat(a,"-").concat(e.x,"-").concat(e.y)),a},t.prototype.getScaleFields=function(){var e=[],t=new Map,n=this,r=n.attributeOption,i=n.labelOption,a=n.tooltipOption;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s.fields?PT(s.fields,e,t):s.values&&PT(s.values,e,t)}return i&&i.fields&&PT(i.fields,e,t),zp(a)&&a.fields&&PT(a.fields,e,t),e},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.elements,r=0,i=n.length;r<i;r++){n[r].changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},t.prototype.getFields=function(){var e=new Map,t=[];return Object.values(this.attributeOption).forEach((function(n){((null==n?void 0:n.fields)||[]).forEach((function(n){e.has(n)||t.push(n),e.set(n,!0)}))}),[]),t},t.prototype.getGroupFields=function(){for(var e=[],t=new Map,n=0,r=Tf.length;n<r;n++){var i=Tf[n],a=this.attributeOption[i];a&&a.fields&&PT(a.fields,e,t)}return e},t.prototype.getXYFields=function(){var e=this.attributeOption.position.fields;return[e[0],e[1]]},t.prototype.getXField=function(){return Yd(this.getXYFields(),[0])},t.prototype.getYField=function(){return Yd(this.getXYFields(),[1])},t.prototype.getShapes=function(){return this.elements.map((function(e){return e.shape}))},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.sort=function(e){if(!this.hasSorted)for(var t=this.getXScale(),n=t.field,r=0;r<e.length;r++){e[r].sort((function(e,r){return t.translate(e._origin[n])-t.translate(r._origin[n])}))}this.hasSorted=!0},t.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust("stack")&&this.updateStackRange(e,this.beforeMappingData)},t.prototype.getShapeFactory=function(){var e=this.shapeType;if(Jk(e))return this.shapeFactory||(this.shapeFactory=Nd(Jk(e))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},t.prototype.createShapePointsCfg=function(e){var t=this.getXScale(),n=this.getYScale();return{x:this.normalizeValues(e[t.field],t),y:n?this.normalizeValues(e[n.field],n):e.y?e.y:.1,y0:n?n.scale(this.getYMinValue()):void 0}},t.prototype.createElement=function(e,t,n){void 0===n&&(n=!1);var r=this.container,i=this.getDrawCfg(e),a=this.getShapeFactory(),o=new $k({shapeFactory:a,container:r,offscreenGroup:this.getOffscreenGroup(),elementIndex:t});return o.animate=this.animateOption,o.geometry=this,o.draw(i,n),o},t.prototype.getDrawCfg=function(e){var t=e._origin,n={mappingData:e,data:t,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},r=e.shape;!r&&this.getShapeFactory()&&(r=this.getShapeFactory().defaultShapeType),n.shape=r;var i=this.theme.geometries[this.shapeType];n.defaultStyle=Yd(i,[r,"default"],{}).style,!n.defaultStyle&&this.getShapeFactory()&&(n.defaultStyle=this.getShapeFactory().getDefaultStyle(i));var a=this.styleOption;return a&&(n.style=this.getStyleCfg(a,t)),this.generatePoints&&(n.points=e.points,n.nextPoints=e.nextPoints),n},t.prototype.updateElements=function(e,t){void 0===t&&(t=!1);for(var n=new Map,r=[],i=new Map,a=0,o=0;o<e.length;o++)for(var s=e[o],l=0;l<s.length;l++){var c=s[l],u=this.getElementId(c),h=n.has(u)?"".concat(u,"-").concat(o,"-").concat(l):u;r.push(h),n.set(h,c),i.set(h,a),a++}this.elements=new Array(a);for(var p=n_(this.lastElementsMap,r),d=p.added,f=p.updated,m=p.removed,g=0,v=d;g<v.length;g++){u=v[g],c=n.get(u),o=i.get(u);var y=this.createElement(c,o,t);this.elements[o]=y,this.elementsMap[u]=y,y.shape&&y.shape.setZIndex(this.zIndexReversed?this.elements.length-o:o)}for(var x=0,E=f;x<E.length;x++){u=E[x],y=this.lastElementsMap[u],c=n.get(u);var b=this.getDrawCfg(c),C=y.getModel();o=i.get(u);(this.isCoordinateChanged||e_(b,C))&&(y.animate=this.animateOption,y.update(b)),this.elements[o]=y,this.elementsMap[u]=y,y.shape&&y.shape.setZIndex(this.zIndexReversed?this.elements.length-o:o)}for(var w=0,T=m;w<T.length;w++){u=T[w];(y=this.lastElementsMap[u]).animate=this.animateOption,y.destroy()}},t.prototype.getLabelType=function(){var e=this,t=e.labelOption,n=e.coordinate,r=e.type,i=n.type,a=n.isTransposed,o=Yd(t,["cfg","type"]);return o||(o="polar"===i?a?"pie":"polar":"theta"===i?"pie":"interval"===r||"polygon"===r?"interval":"base"),o},t.prototype.getYMinValue=function(){var e=this.getYScale(),t=e.min,n=e.max;return t>=0?t:n<=0?n:0},t.prototype.createAttrOption=function(e,t,n){if(Dp(t)||zp(t))zp(t)&&jd(Object.keys(t),["values"])?Ud(this.attributeOption,e,{fields:t.values}):Ud(this.attributeOption,e,t);else{var r={};pd(t)?r.values=[t]:r.fields=t_(t),n&&(Rp(n)?r.callback=n:r.values=n),Ud(this.attributeOption,e,r)}},t.prototype.initAttributes=function(){var e=this,t=this,n=t.attributes,r=t.attributeOption,i=t.theme,a=t.shapeType;this.groupScales=[];var o={},s=function(t){if(r.hasOwnProperty(t)){var s=r[t];if(!s)return{value:void 0};var l=_p({},s),c=l.callback,u=l.values,h=l.fields,p=(void 0===h?[]:h).map((function(n){var r=e.scales[n];return r.isCategory&&!o[n]&&Tf.includes(t)&&(e.groupScales.push(r),o[n]=!0),r}));l.scales=p,"position"!==t&&1===p.length&&"identity"===p[0].type?l.values=p[0].values:c||u||("size"===t?l.values=i.sizes:"shape"===t?l.values=i.shapes[a]||[]:"color"===t&&(p.length?l.values=p[0].values.length<=10?i.colors10:i.colors20:l.values=i.colors10));var d=NE(t);n[t]=new d(l)}};for(var l in r){var c=s(l);if("object"==typeof c)return c.value}},t.prototype.processData=function(e){this.hasSorted=!1;for(var t=this.getAttribute("position").scales.filter((function(e){return e.isCategory})),n=this.groupData(e),r=[],i=0,a=n.length;i<a;i++){for(var o=n[i],s=[],l=0,c=o.length;l<c;l++){var u=o[l],h={};for(var p in u)h[p]=u[p];h._origin=u;for(var d=0,f=t;d<f.length;d++){var m=f[d],g=m.field;h[g]=m.translate(h[g])}s.push(h)}r.push(s)}var v=this.adjustData(r);return this.beforeMappingData=v,v},t.prototype.adjustData=function(e){var t=this.adjustOption,n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.theme,o=this.maxColumnWidth||a.maxColumnWidth,s=this.minColumnWidth||a.minColumnWidth,l=this.columnWidthRatio||a.columnWidthRatio,c=e;if(t){var u=this.getXScale(),h=this.getYScale(),p=u.field,d=h?h.field:null,f=DT(this.coordinate),m=u.values.length,g=this.getAttribute("size"),v=void 0;g&&(v=g.values[0]);for(var y=0,x=t.length;y<x;y++){var E=t[y],b=_p({xField:p,yField:d,intervalPadding:r,dodgePadding:i,xDimensionLength:f,groupNum:m,defaultSize:v,maxColumnWidth:o,minColumnWidth:s,columnWidthRatio:l},E),C=E.type;if("dodge"===C){var w=[];if(u.isCategory||"identity"===u.type)w.push("x");else{if(h)throw new Error("dodge is not support linear attribute, please use category attribute!");w.push("y")}b.adjustNames=w,b.dodgeRatio=l}else if("stack"===C){var T=this.coordinate;if(!h){b.height=T.getHeight();var S=this.getDefaultValue("size")||3;b.size=S}!T.isTransposed&&Dp(b.reverseOrder)&&(b.reverseOrder=!0)}var k=new(My(C))(b);c=k.process(c),this.adjusts[C]=k}}return c},t.prototype.groupData=function(e){for(var t=this.getGroupScales(),n=this.scaleDefs,r={},i=[],a=0;a<t.length;a++){var o=t[a].field;i.push(o),Yd(n,[o,"values"])&&(r[o]=n[o].values)}return function(e,t,n){if(void 0===n&&(n={}),!t)return[e];var r=cd(e,t),i=[];if(1===t.length&&n[t[0]])for(var a=0,o=n[t[0]];a<o.length;a++){var s=o[a],l=r["_".concat(s)];l&&i.push(l)}else for(var c in r)if(r.hasOwnProperty(c)){var u=r[c];i.push(u)}return i}(e,i,r)},t.prototype.updateStackRange=function(e,t){for(var n=Wp(t),r=e.field,i=e.min,a=e.max,o=0;o<n.length;o++){var s=n[o],l=Math.min.apply(null,s[r]),c=Math.max.apply(null,s[r]);l<i&&(i=l),c>a&&(a=c)}var u=this.scaleDefs,h={};i<e.min&&!Yd(u,[r,"min"])&&(h.min=i),a>e.max&&!Yd(u,[r,"max"])&&(h.max=a),e.change(h)},t.prototype.beforeMapping=function(e){var t=e;if(this.sortable&&this.sort(t),this.generatePoints)for(var n=0,r=t.length;n<r;n++){var i=t[n];this.generateShapePoints(i);var a=t[n+1];a&&(this.generateShapePoints(a),i[0].nextPoints=a[0].points)}return t},t.prototype.generateShapePoints=function(e){for(var t=this.getShapeFactory(),n=this.getAttribute("shape"),r=0;r<e.length;r++){var i=e[r],a=this.createShapePointsCfg(i),o=n?this.getAttributeValues(n,i):null,s=t.getShapePoints(o,a);i.points=s}},t.prototype.normalizeValues=function(e,t){var n=[];if(Bp(e))for(var r=0;r<e.length;r++){var i=e[r];n.push(t.scale(i))}else n=t.scale(e);return n},t.prototype.mapping=function(e){for(var t=this.attributes,n=[],r=0;r<e.length;r++){var i=e[r],a={_origin:i._origin,points:i.points,nextPoints:i.nextPoints};for(var o in t)if(t.hasOwnProperty(o)){var s=t[o],l=s.names,c=this.getAttributeValues(s,i);if(l.length>1)for(var u=0;u<c.length;u+=1){var h=c[u];a[l[u]]=Bp(h)&&1===h.length?h[0]:h}else a[l[0]]=1===c.length?c[0]:c}this.convertPoint(a),n.push(a)}return n},t.prototype.convertPoint=function(e){var t,n,r,i=e.x,a=e.y,o=this.coordinate;if(Bp(i)&&Bp(a)){t=[],n=[];for(var s=0,l=0,c=i.length,u=a.length;s<c&&l<u;s+=1,l+=1)r=o.convert({x:i[s],y:a[l]}),t.push(r.x),n.push(r.y)}else if(Bp(a)){n=[];for(var h=0;h<a.length;h++){var p=a[h];r=o.convert({x:i,y:p}),t&&t!==r.x?(Bp(t)||(t=[t]),t.push(r.x)):t=r.x,n.push(r.y)}}else if(Bp(i)){t=[];for(h=0;h<i.length;h++){var d=i[h];r=o.convert({x:d,y:a}),n&&n!==r.y?(Bp(n)||(n=[n]),n.push(r.y)):n=r.y,t.push(r.x)}}else{var f=o.convert({x:i,y:a});t=f.x,n=f.y}e.x=t,e.y=n},t.prototype.getStyleCfg=function(e,t){var n=e.fields,r=void 0===n?[]:n,i=e.callback,a=e.cfg;if(a)return a;var o=r.map((function(e){return t[e]}));return i.apply(void 0,o)},t.prototype.setCfg=function(e){var t=this,n=e.coordinate,r=e.data,i=e.theme,a=e.scaleDefs;n&&(this.coordinate=n),r&&(this.data=r),a&&(this.scaleDefs=a,this.idFields=[],Hp(a,(function(e,n){e&&e.key&&t.idFields.push(n)}))),i&&(this.theme=this.userTheme?Rd({},i,this.userTheme):i)},t.prototype.renderLabels=function(e,t){void 0===t&&(t=!1);var n=this.geometryLabel;if(!n){var r=this.getLabelType();n=new(0,Yk[r.toLowerCase()])(this),this.geometryLabel=n}n.render(e,t);var i=n.labelsRenderer.shapesMap;Hp(this.elementsMap,(function(e,t){var n=function(e,t){var n=[];return Hp(t,(function(t,r){r.split(" ")[0]===e&&n.push(t)})),n}(t,i);if(n.length){e.labelShape=n;for(var r=0;r<n.length;r++)for(var a=n[r].getChildren(),o=0;o<a.length;o++){var s=a[o];s.cfg.name=["element","label"],s.cfg.element=e}}}))},t.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(void 0===Yd(this.animateOption,"appear")||Yd(this.animateOption,"appear")&&void 0===Yd(this.animateOption,["appear","animation"]))},t}(Rf),i_=Qm;function a_(e,t,n){var r=i_(e.getMatrix(),[["t",t,n]]);e.setMatrix(r)}function o_(e,t){var n=function(e,t){var n=e.attr(),r=n.x,i=n.y;return i_(e.getMatrix(),[["t",-r,-i],["r",t],["t",r,i]])}(e,t);e.setMatrix(n)}function s_(e){return e.find((function(e){return"text"===e.get("type")}))}function l_(e,t,n){void 0===n&&(n=[0,0,0,0]);var r=e.getChildren()[0];if(r){var i=r.clone();(null==t?void 0:t.rotate)&&o_(i,-t.rotate);var a=i.getCanvasBBox(),o=a.x,s=a.y,l=a.width,c=a.height;i.destroy();var u=n;return Dp(u)?u=[2,2,2,2]:pd(u)&&(u=new Array(4).fill(u)),{x:o-u[3],y:s-u[0],width:l+u[1]+u[3],height:c+u[0]+u[2],rotation:(null==t?void 0:t.rotate)||0}}}function c_(e,t){var n=e.getBBox();return od(t,(function(e){var t,r,i,a=e.getBBox();return t=n,r=a,void 0===(i=2)&&(i=0),Math.max(0,Math.min(t.x+t.width+i,r.x+r.width+i)-Math.max(t.x-i,r.x-i))*Math.max(0,Math.min(t.y+t.height+i,r.y+r.height+i)-Math.max(t.y-i,r.y-i))>0}))}function u_(e,t,n){var r=n.data,i=n.origin,a=n.animateCfg,o=n.coordinate,s=Yd(a,"update");e.set("data",r),e.set("origin",i),e.set("animateCfg",a),e.set("coordinate",o),e.set("visible",t.get("visible")),e.getChildren().forEach((function(l,c){var u=t.getChildByIndex(c);if(u){l.set("data",r),l.set("origin",i),l.set("animateCfg",a),l.set("coordinate",o);var h=NT(l,u);s?Gk(l,s,{toAttrs:h,coordinate:o}):l.attr(h),u.isGroup()&&u_(l,u,n)}else e.removeChild(l),l.remove(!0)})),Hp(t.getChildren(),(function(t,n){n>=e.getCount()&&(t.destroyed||e.add(t))}))}var h_=function(){function e(e){this.shapesMap={},this.lastShapesMap={};var t=e.layout,n=e.container;this.layout=t,this.container=n}return e.prototype.render=function(e,t,n){var r=this;void 0===n&&(n=!1),this.shapesMap={};var i=this.container,a=this.createOffscreenGroup();if(e.length){for(var o=0,s=e;o<s.length;o++){var l=s[o];l&&this.renderLabel(l,a)}this.doLayout(e,t),this.renderLabelLine(e),this.renderLabelBackground(e),this.adjustLabel(e)}var c=this.lastShapesMap,u=this.shapesMap;Hp(u,(function(e,t){if(e.destroyed)delete u[t];else{if(c[t]){var a=e.get("data"),o=e.get("origin"),s=e.get("coordinate"),l=e.get("animateCfg"),h=c[t];u_(h,u[t],{data:a,origin:o,animateCfg:l,coordinate:s}),r.shapesMap[t]=h}else{i.add(e);var p=Yd(e.get("animateCfg"),n?"enter":"appear");p&&Gk(e,p,{toAttrs:_p({},e.attr()),coordinate:e.get("coordinate")})}delete c[t]}})),Hp(c,(function(e){var t=Yd(e.get("animateCfg"),"leave");t?Gk(e,t,{toAttrs:null,coordinate:e.get("coordinate")}):e.remove(!0)})),this.lastShapesMap=u,a.destroy()},e.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},e.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},e.prototype.renderLabel=function(e,t){var n,r,i=e.id,a=e.elementId,o=e.data,s=e.mappingData,l=e.coordinate,c=e.animate,u=e.content,h={id:i,elementId:a,data:o,origin:_p(_p({},s),{data:s._origin}),coordinate:l},p=t.addGroup(_p({name:"label",animateCfg:!1!==this.animate&&null!==c&&!1!==c&&Rd({},this.animate,c)},h));if(u.isGroup&&u.isGroup()||u.isShape&&u.isShape()){var d=u.getCanvasBBox(),f=d.width,m=d.height,g=Yd(e,"textAlign","left"),v=e.x;"center"===g?v-=f/2:"right"!==g&&"end"!==g||(v-=f),a_(u,v,e.y-m/2),n=u,p.add(u)}else{var y=Yd(e,["style","fill"]);n=p.addShape("text",_p({attrs:_p(_p({x:e.x,y:e.y,textAlign:e.textAlign,textBaseline:Yd(e,"textBaseline","middle"),text:e.content},e.style),{fill:(r=y,null===r?e.color:y)})},h))}e.rotate&&o_(n,e.rotate),this.shapesMap[i]=p},e.prototype.doLayout=function(e,t){var n=this;this.layout&&Hp(Bp(this.layout)?this.layout:[this.layout],(function(r){var i,a=(i=Yd(r,"type",""),Uk[i.toLowerCase()]);if(a){var o=[],s=[];Hp(n.shapesMap,(function(e,n){o.push(e),s.push(t[e.get("elementId")])})),a(e,o,s,n.region,r.cfg)}}))},e.prototype.renderLabelLine=function(e){var t=this;Hp(e,(function(e){var n=Yd(e,"coordinate");if(e&&n){var r=n.getCenter(),i=n.getRadius();if(e.labelLine){var a=Yd(e,"labelLine",{}),o=e.id,s=a.path;if(!s){var l=AT(r.x,r.y,i,e.angle);s=[["M",l.x,l.y],["L",e.x,e.y]]}var c=t.shapesMap[o];c.destroyed||c.addShape("path",{capture:!1,attrs:_p({path:s,stroke:e.color?e.color:Yd(e,["style","fill"],"#000"),fill:null},a.style),id:o,origin:e.mappingData,data:e.data,coordinate:e.coordinate})}}}))},e.prototype.renderLabelBackground=function(e){var t=this;Hp(e,(function(e){var n=Yd(e,"coordinate"),r=Yd(e,"background");if(r&&n){var i=e.id,a=t.shapesMap[i];if(!a.destroyed){var o=a.getChildren()[0];if(o){var s=l_(a,e,r.padding),l=s.rotation,c=Ap(s,["rotation"]),u=a.addShape("rect",{attrs:_p(_p({},c),r.style||{}),id:i,origin:e.mappingData,data:e.data,coordinate:e.coordinate});if(u.setZIndex(-1),l){var h=o.getMatrix();u.setMatrix(h)}}}}}))},e.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},e.prototype.adjustLabel=function(e){var t=this;Hp(e,(function(e){if(e){var n=e.id,r=t.shapesMap[n];if(!r.destroyed)Hp(r.findAll((function(e){return"path"!==e.get("type")})),(function(t){t&&(e.offsetX&&t.attr("x",t.attr("x")+e.offsetX),e.offsetY&&t.attr("y",t.attr("y")+e.offsetY))}))}}))},e}();function p_(e){var t=0;return Hp(e,(function(e){t+=e})),t/e.length}var d_=function(){function e(e){this.geometry=e}return e.prototype.getLabelItems=function(e){var t=this,n=[],r=this.getLabelCfgs(e);return Hp(e,(function(e,i){var a=r[i];if(!a||Dp(e.x)||Dp(e.y))n.push(null);else{var o=Bp(a.content)?a.content:[a.content];a.content=o;var s=o.length;Hp(o,(function(r,i){if(Dp(r)||""===r)n.push(null);else{var o=_p(_p({},a),t.getLabelPoint(a,e,i));o.textAlign||(o.textAlign=t.getLabelAlign(o,i,s)),o.offset<=0&&(o.labelLine=null),n.push(o)}}))}})),n},e.prototype.render=function(e,t){void 0===t&&(t=!1);var n=this.getLabelItems(e),r=this.getLabelsRenderer(),i=this.getGeometryShapes();r.render(n,i,t)},e.prototype.clear=function(){var e=this.labelsRenderer;e&&e.clear()},e.prototype.destroy=function(){var e=this.labelsRenderer;e&&e.destroy(),this.labelsRenderer=null},e.prototype.getCoordinate=function(){return this.geometry.coordinate},e.prototype.getDefaultLabelCfg=function(e,t){var n=this.geometry,r=n.type,i=n.theme;return"polygon"===r||"interval"===r&&"middle"===t||e<0&&!["line","point","path"].includes(r)?Yd(i,"innerLabels",{}):Yd(i,"labels",{})},e.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.type,i=t.theme;return"polygon"===r||e.offset<0&&!["line","point","path"].includes(r)?Rd({},n,i.innerLabels,e):Rd({},n,i.labels,e)},e.prototype.setLabelPosition=function(e,t,n,r){},e.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=this.getOffsetVector(e);return t.isTransposed?n[0]:n[1]},e.prototype.getLabelOffsetPoint=function(e,t,n){var r=e.offset,i=this.getCoordinate().isTransposed,a=i?"x":"y",o=i?1:-1,s={x:0,y:0};return s[a]=t>0||1===n?r*o:r*o*-1,s},e.prototype.getLabelPoint=function(e,t,n){var r=this.getCoordinate(),i=e.content.length;function a(t,n,r){void 0===r&&(r=!1);var i=t;return Bp(i)&&(i=1===e.content.length?r?p_(i):i.length<=2?i[t.length-1]:p_(i):i[n]),i}var o={content:e.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},s=Bp(t.shape)?t.shape[0]:t.shape,l="funnel"===s||"pyramid"===s;if("polygon"===this.geometry.type){var c=function(e,t){if(pd(e)&&pd(t))return[e,t];if(t=t,kT(e=e)||kT(t))return[_T(e),_T(t)];for(var n,r,i=-1,a=0,o=0,s=e.length-1,l=0;++i<e.length;)n=s,s=i,l+=r=e[n]*t[s]-e[s]*t[n],a+=(e[n]+e[s])*r,o+=(t[n]+t[s])*r;return[a/(l*=3),o/l]}(t.x,t.y);o.x=c[0],o.y=c[1]}else"interval"!==this.geometry.type||l?(o.x=a(t.x,n),o.y=a(t.y,n)):(o.x=a(t.x,n,!0),o.y=a(t.y,n));if(l){var u=Yd(t,"nextPoints"),h=Yd(t,"points");if(u){var p=r.convert(h[1]),d=r.convert(u[1]);o.x=(p.x+d.x)/2,o.y=(p.y+d.y)/2}else if("pyramid"===s){p=r.convert(h[1]),d=r.convert(h[2]);o.x=(p.x+d.x)/2,o.y=(p.y+d.y)/2}}e.position&&this.setLabelPosition(o,t,n,e.position);var f=this.getLabelOffsetPoint(e,n,i);return o.start={x:o.x,y:o.y},o.x+=f.x,o.y+=f.y,o.color=t.color,o},e.prototype.getLabelAlign=function(e,t,n){var r="center";if(this.getCoordinate().isTransposed){var i=e.offset;r=i<0?"right":0===i?"center":"left",n>1&&0===t&&("right"===r?r="left":"left"===r&&(r="right"))}return r},e.prototype.getLabelId=function(e){var t=this.geometry,n=t.type,r=t.getXScale(),i=t.getYScale(),a=e._origin,o=t.getElementId(e);return"line"===n||"area"===n?o+=" ".concat(a[r.field]):"path"===n&&(o+=" ".concat(a[r.field],"-").concat(a[i.field])),o},e.prototype.getLabelsRenderer=function(){var e=this.geometry,t=e.labelsContainer,n=e.labelOption,r=e.canvasRegion,i=e.animateOption,a=this.geometry.coordinate,o=this.labelsRenderer;return o||(o=new h_({container:t,layout:Yd(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=o),o.region=r,o.animate=!!i&&jk("label",a),o},e.prototype.getLabelCfgs=function(e){var t=this,n=this.geometry,r=n.labelOption,i=n.scales,a=n.coordinate,o=r,s=o.fields,l=o.callback,c=o.cfg,u=s.map((function(e){return i[e]})),h=[];return Hp(e,(function(e,n){var r,i=e._origin,o=t.getLabelText(i,u);if(l){var p=s.map((function(e){return i[e]}));if(r=l.apply(void 0,p),Dp(r))return void h.push(null)}var d=_p(_p({id:t.getLabelId(e),elementId:t.geometry.getElementId(e),data:i,mappingData:e,coordinate:a},c),r);Rp(d.position)&&(d.position=d.position(i,e,n));var f=t.getLabelOffset(d.offset||0),m=t.getDefaultLabelCfg(f,d.position);(d=Rd({},m,d)).offset=t.getLabelOffset(d.offset||0);var g=d.content;Rp(g)?d.content=g(i,e,n):Ad(g)&&(d.content=o[0]),h.push(d)})),h},e.prototype.getLabelText=function(e,t){var n=[];return Hp(t,(function(t){var r=e[t.field];r=Bp(r)?r.map((function(e){return t.getText(e)})):t.getText(r),Dp(r)||""===r?n.push(null):n.push(r)})),n},e.prototype.getOffsetVector=function(e){void 0===e&&(e=0);var t=this.getCoordinate(),n=0;return pd(e)&&(n=e),t.isTransposed?t.applyMatrix(n,0):t.applyMatrix(0,n)},e.prototype.getGeometryShapes=function(){var e=this.geometry,t={};return Hp(e.elementsMap,(function(e,n){t[n]=e.shape})),Hp(e.getOffscreenGroup().getChildren(),(function(n){var r=e.getElementId(n.get("origin").mappingData);t[r]=n})),t},e}();function f_(e,t,n){if(!e)return n;var r;if(e.callback&&e.callback.length>1){var i=Array(e.callback.length-1).fill("");r=e.mapping.apply(e,Ip([t],i,!1)).join("")}else r=e.mapping(t).join("");return r||n}var m_={hexagon:function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},bowtie:function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},cross:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},tick:function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},plus:function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},hyphen:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},line:function(e,t,n){return[["M",e,t-n],["L",e,t+n]]}},g_=["line","cross","tick","plus","hyphen"];function v_(e){var t=e.symbol;ed(t)&&m_[t]&&(e.symbol=m_[t])}function y_(e){return e.startsWith(nf.LEFT)||e.startsWith(nf.RIGHT)?"vertical":"horizontal"}function x_(e,t,n,r,i){var a=n.getScale(n.type);if(a.isCategory){var o=a.field,s=t.getAttribute("color"),l=t.getAttribute("shape"),c=e.getTheme().defaultColor,u=t.coordinate.isPolar;return a.getTicks().map((function(n,h){var p,d=n.text,f=n.value,m=d,g=a.invert(f),v=0===e.filterFieldData(o,[(p={},p[o]=g,p)]).length;Hp(e.views,(function(e){var t;e.filterFieldData(o,[(t={},t[o]=g,t)]).length||(v=!0)}));var y,x,E=f_(s,g,c),b=f_(l,g,"point"),C=t.getShapeMarker(b,{color:E,isInPolar:u}),w=i;return Rp(w)&&(w=w(m,h,_p({name:m,value:g},Rd({},r,C)))),function(e,t){var n=e.symbol;if(ed(n)&&-1!==g_.indexOf(n)){var r=Yd(e,"style",{}),i=Yd(r,"lineWidth",1),a=r.stroke||r.fill||t;e.style=Rd({},e.style,{lineWidth:i,stroke:a,fill:null})}}(C=Rd({},r,C,LT(_p({},w),["style"])),E),w&&w.style&&(C.style=(y=C.style,x=w.style,Rp(x)?x(y):Rd({},y,x))),v_(C),{id:g,name:m,value:g,marker:C,unchecked:v}}))}return[]}function E_(e,t){var n=Yd(e,["components","legend"],{});return Rd({},Yd(n,["common"],{}),Rd({},Yd(n,[t],{})))}function b_(e){return!e&&(null==e||isNaN(e))}function C_(e){if(Bp(e))return b_(e[1].y);var t=e.y;return Bp(t)?b_(t[0]):b_(t)}function w_(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!0),!e.length||1===e.length&&!n)return[];if(t){for(var r=[],i=0,a=e.length;i<a;i++){C_(l=e[i])||r.push(l)}return[r]}var o=[],s=[];for(i=0,a=e.length;i<a;i++){var l;C_(l=e[i])?s.length&&((1!==s.length||n)&&o.push(s),s=[]):s.push(l)}return s.length&&o.push(s),o}function T_(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=0===n?"M":"L";t.push([i,r.x,r.y])}}var a=e[0];return a&&(t.push(["L",a.x,a.y]),t.push(["z"])),t}function S_(e){for(var t=e.length/2,n=[],r=[],i=0;i<e.length;i++)i<t?n.push(e[i]):r.push(e[i]);var a=fS(n,!1),o=fS(r,!1);r.length&&a.push(["L",r[0].x,r[0].y]),o.shift();var s=a.concat(o);return n.length&&s.push(["L",n[0].x,n[0].y]),s.push(["z"]),s}function k_(e,t,n,r){void 0===r&&(r="");var i=e.style,a=void 0===i?{}:i,o=e.defaultStyle,s=e.color,l=e.size,c=_p(_p({},o),a);return s&&(t&&(a.stroke||(c.stroke=s)),n&&(a.fill||(c.fill=s))),r&&Dp(a[r])&&!Dp(l)&&(c[r]=l),c}function __(e){return Rd({},{fill:"#CCD6EC",fillOpacity:.3},Yd(e,["background","style"]))}function A_(e){var t=e.x;return(Bp(e.y)?e.y:[e.y]).map((function(e,n){return{x:Bp(t)?t[n]:t,y:e}}))}var O_={line:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},dot:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},dash:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},smooth:function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},hv:function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},vh:function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},hvh:function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]},vhv:function(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}};function I_(e,t){var n=e.color;return{symbol:O_[t],style:{lineWidth:2,r:6,stroke:n}}}function M_(e,t,n,r,i){return 1===e.length?[["M",e[0].x,e[0].y-i.lineWidth/2],["L",e[0].x,e[0].y],["L",e[0].x,e[0].y+i.lineWidth/2]]:(n?(t&&e.length&&e.push({x:e[0].x,y:e[0].y}),a=fS(e,!1,r)):(a=dS(e,!1),t&&a.push(["Z"])),a);var a}function N_(e,t,n,r,i,a){if(e.length){var o=e[0];return Bp(o.y)?function(e,t,n,r,i,a){var o=[],s=[];Hp(e,(function(e){var t=A_(e);o.push(t[1]),s.push(t[0])}));var l=M_(o,t,r,i,a),c=M_(s,t,r,i,a);return n?l:l.concat(c)}(e,t,n,r,i,a):M_(e,t,r,i,a)}return[]}Qk("line",{defaultShapeType:"line"}),Hp(["line","dot","dash","smooth"],(function(e){Zk("line",e,{draw:function(t,n){var r,i="smooth"===e;if(i){var a=this.coordinate,o=a.start,s=a.end;r=[[o.x,s.y],[s.x,o.y]]}var l=function(e,t,n){for(var r=e.isStack,i=e.connectNulls,a=e.isInCircle,o=e.showSinglePoint,s=k_(e,!0,!1,"lineWidth"),l=w_(e.points,i,o),c=[],u=0,h=l.length;u<h;u++){var p=l[u];c=c.concat(N_(p,a,r,t,n,s))}return s.path=c,s}(t,i,r);return n.addShape({type:"path",attrs:l,name:"line",capture:!i})},getMarker:function(t){return I_(t,e)}})}));var F_={getLegendItems:x_,translate:a_,rotate:o_,zoom:function(e,t){var n=e.getBBox(),r=(n.minX+n.maxX)/2,i=(n.minY+n.maxY)/2;e.applyToMatrix([r,i,1]);var a=i_(e.getMatrix(),[["t",-r,-i],["s",t,t],["t",r,i]]);e.setMatrix(a)},transform:i_,getAngle:MT,getSectorPath:OT,polarToCartesian:AT,getDelegationObject:yS,getTooltipItems:gk,getMappingValue:f_,getPath:N_,getPathPoints:w_},L_="#000",P_="#BFBFBF",R_="#F0F0F0",D_="#FFFFFF",B_="#A6A6A6",z_="#737373",H_="#404040",j_="#262626",G_=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],$_=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Y_=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],U_=function(e){void 0===e&&(e={});var t=e.backgroundColor,n=void 0===t?"#141414":t,r=e.subColor,i=void 0===r?"rgba(255,255,255,0.05)":r,a=e.paletteQualitative10,o=void 0===a?G_:a,s=e.paletteQualitative20,l=void 0===s?$_:s,c=e.paletteSemanticRed,u=void 0===c?"#F4664A":c,h=e.paletteSemanticGreen,p=void 0===h?"#30BF78":h,d=e.paletteSemanticYellow,f=void 0===d?"#FAAD14":d,m=e.paletteSequence,g=void 0===m?Y_:m,v=e.fontFamily,y=void 0===v?'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"':v,x=e.brandColor;return{backgroundColor:n,brandColor:void 0===x?o[0]:x,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:u,paletteSemanticGreen:p,paletteSemanticYellow:f,paletteSequence:g,fontFamily:y,axisLineBorderColor:H_,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:B_,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:H_,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:j_,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:z_,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:j_,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:z_,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:G_[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:B_,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:z_,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:z_,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:B_,legendPageNavigatorTextFontSize:12,sliderRailFillColor:j_,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:z_,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:R_,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:P_,annotationArcBorderColor:j_,annotationArcBorder:1,annotationLineBorderColor:H_,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:B_,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:D_,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:H_,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:B_,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:B_,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:L_,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:B_,overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:L_,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:H_,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:G_[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:L_,pointBorderOpacity:1,pointActiveBorderColor:D_,pointSelectedBorder:2,pointSelectedBorderColor:D_,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:G_[0],hollowPointBorderOpacity:.95,hollowPointFillColor:L_,hollowPointActiveBorder:1,hollowPointActiveBorderColor:D_,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:D_,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:G_[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:G_[0],areaFillOpacity:.25,areaActiveFillColor:G_[0],areaActiveFillOpacity:.5,areaSelectedFillColor:G_[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:G_[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:D_,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:D_,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:G_[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:D_,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:D_,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:G_[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:L_,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:D_,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:D_,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}}();function V_(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function W_(e,t,n,r,i,a){return i>=e&&i<=e+n&&a>=t&&a<=t+r}function X_(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function q_(e,t){return e[0]===t[0]&&e[1]===t[1]}var K_=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Q_=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Z_=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,J_=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function eA(e,t){Hp(e.match(J_),(function(e){var n=e.split(":");t.addColorStop(n[0],n[1])}))}function tA(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(ed(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(e,t,n){var r,i,a=K_.exec(n),o=parseFloat(a[1])%360*(Math.PI/180),s=a[2],l=t.getBBox();o>=0&&o<.5*Math.PI?(r={x:l.minX,y:l.minY},i={x:l.maxX,y:l.maxY}):.5*Math.PI<=o&&o<Math.PI?(r={x:l.maxX,y:l.minY},i={x:l.minX,y:l.maxY}):Math.PI<=o&&o<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},i={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},i={x:l.maxX,y:l.minY});var c=Math.tan(o),u=c*c,h=(i.x-r.x+c*(i.y-r.y))/(u+1)+r.x,p=c*(i.x-r.x+c*(i.y-r.y))/(u+1)+r.y,d=e.createLinearGradient(r.x,r.y,h,p);return eA(s,d),d}(e,t,n);if("r"===n[0])return function(e,t,n){var r=Q_.exec(n),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(0===o){var l=s.match(J_);return l[l.length-1].split(":")[1]}var c=t.getBBox(),u=c.maxX-c.minX,h=c.maxY-c.minY,p=Math.sqrt(u*u+h*h)/2,d=e.createRadialGradient(c.minX+u*i,c.minY+h*a,0,c.minX+u/2,c.minY+h/2,o*p);return eA(s,d),d}(e,t,n);if("p"===n[0])return function(e,t,n){if(t.get("patternSource")&&t.get("patternSource")===n)return t.get("pattern");var r,i,a=Z_.exec(n),o=a[1],s=a[2];function l(){r=e.createPattern(i,o),t.set("pattern",r),t.set("patternSource",n)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}(e,t,n)}return n}return n instanceof CanvasPattern?n:void 0}function nA(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function rA(e,t){return nA(e)*nA(t)?(e[0]*t[0]+e[1]*t[1])/(nA(e)*nA(t)):1}function iA(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(rA(e,t))}function aA(e,t){var n=t[1],r=t[2],i=md(vd(t[3]),2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],c=t[6],u=t[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=h*h/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var f=n*n*(p*p)+r*r*(h*h),m=f?Math.sqrt((n*n*(r*r)-f)/f):1;a===o&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*p/r:0,v=n?m*-r*h/n:0,y=(s+c)/2+Math.cos(i)*g-Math.sin(i)*v,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*v,E=[(h-g)/n,(p-v)/r],b=[(-1*h-g)/n,(-1*p-v)/r],C=iA([1,0],E),w=iA(E,b);return rA(E,b)<=-1&&(w=Math.PI),rA(E,b)>=1&&(w=0),0===o&&w>0&&(w-=2*Math.PI),1===o&&w<0&&(w+=2*Math.PI),{cx:y,cy:x,rx:q_(e,[c,u])?0:n,ry:q_(e,[c,u])?0:r,startAngle:C,endAngle:C+w,xRotation:i,arcFlag:a,sweepFlag:o}}var oA=Math.sin,sA=Math.cos,lA=Math.atan2,cA=Math.PI;function uA(e,t,n,r,i,a,o){var s=t.stroke,l=t.lineWidth,c=lA(r-a,n-i),u=new UA({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*sA(cA/6)+","+10*oA(cA/6)+" L0,0 L"+10*sA(cA/6)+",-"+10*oA(cA/6),stroke:s,lineWidth:l}});u.translate(i,a),u.rotateAtPoint(i,a,c),e.set(o?"startArrowShape":"endArrowShape",u)}function hA(e,t,n,r,i,a,o){var s=t.startArrow,l=t.endArrow,c=t.stroke,u=t.lineWidth,h=o?s:l,p=h.d,d=h.fill,f=h.stroke,m=h.lineWidth,g=Ap(h,["d","fill","stroke","lineWidth"]),v=lA(r-a,n-i);p&&(i-=sA(v)*p,a-=oA(v)*p);var y=new UA({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:_p(_p({},g),{stroke:f||c,lineWidth:m||u,fill:d})});y.translate(i,a),y.rotateAtPoint(i,a,v),e.set(o?"startArrowShape":"endArrowShape",y)}function pA(e,t,n,r,i){var a=lA(r-t,n-e);return{dx:sA(a)*i,dy:oA(a)*i}}function dA(e,t,n,r,i,a){"object"==typeof t.startArrow?hA(e,t,n,r,i,a,!0):t.startArrow?uA(e,t,n,r,i,a,!0):e.set("startArrowShape",null)}function fA(e,t,n,r,i,a){"object"==typeof t.endArrow?hA(e,t,n,r,i,a,!1):t.endArrow?uA(e,t,n,r,i,a,!1):e.set("startArrowShape",null)}var mA={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function gA(e,t){var n=t.attr();for(var r in n){var i=n[r],a=mA[r]?mA[r]:r;"matrix"===a&&i?e.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===a&&e.setLineDash?Bp(i)&&e.setLineDash(i):("strokeStyle"===a||"fillStyle"===a?i=tA(e,t,i):"globalAlpha"===a&&(i*=e.globalAlpha),e[a]=i)}}function vA(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];i.cfg.visible?i.draw(e,n):i.skipDraw()}}function yA(e,t,n){var r=e.get("refreshElements");Hp(r,(function(t){if(t!==e)for(var n=t.cfg.parent;n&&n!==e&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===e?bA(t):xA(t,n)}function xA(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&bA(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&xA(r.cfg.children,t);else{var i=CA(r,t);r.cfg.refresh=i,i&&r.isGroup()&&xA(r.cfg.children,t)}}}function EA(e){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&EA(n.cfg.children)}}function bA(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.refresh=!0,r.isGroup()&&bA(r.get("children"))}}function CA(e,t){var n=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&n&&X_(n,t)}function wA(e,t,n,r){var i=n.path,a=n.startArrow,o=n.endArrow;if(i){var s=[0,0],l=[0,0],c={dx:0,dy:0};t.beginPath();for(var u=0;u<i.length;u++){var h=i[u],p=h[0];if(0===u&&a&&a.d)c=pA((d=e.getStartTangent())[0][0],d[0][1],d[1][0],d[1][1],a.d);else if(u===i.length-2&&"Z"===i[u+1][0]&&o&&o.d){if("Z"===i[u+1][0])c=pA((d=e.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d)}else if(u===i.length-1&&o&&o.d){var d;if("Z"!==i[0])c=pA((d=e.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d)}var f=c.dx,m=c.dy;switch(p){case"M":t.moveTo(h[1]-f,h[2]-m),l=[h[1],h[2]];break;case"L":t.lineTo(h[1]-f,h[2]-m);break;case"Q":t.quadraticCurveTo(h[1],h[2],h[3]-f,h[4]-m);break;case"C":t.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-f,h[6]-m);break;case"A":var g=void 0;r?(g=r[u])||(g=aA(s,h),r[u]=g):g=aA(s,h);var v=g.cx,y=g.cy,x=g.rx,E=g.ry,b=g.startAngle,C=g.endAngle,w=g.xRotation,T=g.sweepFlag;if(t.ellipse)t.ellipse(v,y,x,E,w,b,C,1-T);else{var S=x>E?x:E,k=x>E?1:x/E,_=x>E?E/x:1;t.translate(v,y),t.rotate(w),t.scale(k,_),t.arc(0,0,S,b,C,1-T),t.scale(1/k,1/_),t.rotate(-w),t.translate(-v,-y)}break;case"Z":t.closePath()}if("Z"===p)s=l;else{var A=h.length;s=[h[A-2],h[A-1]]}}}}function TA(e,t){var n=e.get("canvas");n&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(n.refreshElement(e,t,n),n.get("autoDraw")&&n.draw())))}function SA(e){var t,n,r;if(e.destroyed)t=e._cacheCanvasBBox;else{var i=e.get("cacheCanvasBBox"),a=i&&!(!i.width||!i.height),o=e.getCanvasBBox(),s=o&&!(!o.width||!o.height);a&&s?(r=o,t=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):a?t=i:s&&(t=o)}return t}var kA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.onCanvasChange=function(e){TA(this,e)},t.prototype.getShapeBase=function(){return zn},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),gA(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],n=[];Hp(e,(function(e){var r=e.cfg.cacheCanvasBBox;r&&e.cfg.isInView&&(t.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(t.length){var i=qp(t),a=Xp(t),o=qp(n),s=Xp(n);r={minX:i,minY:o,x:i,y:o,maxX:a,maxY:s,width:a-i,height:s-o};var l=this.cfg.canvas;if(l){var c=l.getViewRange();this.set("isInView",X_(r,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},t.prototype.draw=function(e,t){var n=this.cfg.children,r=!t||this.cfg.refresh;n.length&&r&&(e.save(),gA(e,this),this._applyClip(e,this.getClip()),vA(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(bv),_A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return zn},t.prototype.getGroupBase=function(){return kA},t.prototype.onCanvasChange=function(e){TA(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),n=Sv(e)(this),r=t/2,i=n.x-r,a=n.y-r,o=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:a,minY:a,width:n.width+t,height:n.height+t,maxX:o,maxY:s}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),gA(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!X_(t,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),gA(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),n=X_(t,e);this.set("isInView",n),n?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,a=t.fillOpacity;this.isFill()&&(Dp(a)||1===a?this.fill(e):(e.globalAlpha=a,this.fill(e),e.globalAlpha=r)),this.isStroke()&&n>0&&(Dp(i)||1===i||(e.globalAlpha=i),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(Cv),AA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=a.x,s=a.y,l=a.r,c=i/2,u=V_(o,s,e,t);return r&&n?u<=l+c:r?u<=l:!!n&&(u>=l-c&&u<=l+c)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.r;e.beginPath(),e.arc(n,r,i,0,2*Math.PI,!1),e.closePath()},t}(_A);function OA(e,t,n,r){return e/(n*n)+t/(r*r)}var IA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=i/2,s=a.x,l=a.y,c=a.rx,u=a.ry,h=(e-s)*(e-s),p=(t-l)*(t-l);return r&&n?OA(h,p,c+o,u+o)<=1:r?OA(h,p,c,u)<=1:!!n&&(OA(h,p,c-o,u-o)>=1&&OA(h,p,c+o,u+o)<=1)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.rx,a=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(n,r,i,a,0,0,2*Math.PI,!1);else{var o=i>a?i:a,s=i>a?1:i/a,l=i>a?a/i:1;e.save(),e.translate(n,r),e.scale(s,l),e.arc(0,0,o,0,2*Math.PI),e.restore(),e.closePath()}},t}(_A);function MA(e){return e instanceof HTMLElement&&ed(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}var NA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var t=this,n=this.attrs;if(ed(e)){var r=new Image;r.onload=function(){if(t.destroyed)return!1;t.attr("img",r),t.set("loading",!1),t._afterLoading();var e=t.get("callback");e&&e.call(t)},r.crossOrigin="Anonymous",r.src=e,this.set("loading",!0)}else e instanceof Image?(n.width||(n.width=e.width),n.height||(n.height=e.height)):MA(e)&&(n.width||(n.width=Number(e.getAttribute("width"))),n.height||(n.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"img"===t&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",e);var t=this.attr(),n=t.x,r=t.y,i=t.width,a=t.height,o=t.sx,s=t.sy,l=t.swidth,c=t.sheight,u=t.img;(u instanceof Image||MA(u))&&(Dp(o)||Dp(s)||Dp(l)||Dp(c)?e.drawImage(u,n,r,i,a):e.drawImage(u,o,s,l,c,n,r,i,a))},t}(_A);function FA(e,t,n,r,i,a,o){var s=Math.min(e,n),l=Math.max(e,n),c=Math.min(t,r),u=Math.max(t,r),h=i/2;return a>=s-h&&a<=l+h&&o>=c-h&&o<=u+h&&Lv.pointToLine(e,t,n,r,a,o)<=i/2}var LA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=e.startArrow,o=e.endArrow;a&&dA(this,e,r,i,t,n),o&&fA(this,e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){if(!n||!i)return!1;var a=this.attr();return FA(a.x1,a.y1,a.x2,a.y2,i,e,t)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2,o=t.startArrow,s=t.endArrow,l={dx:0,dy:0},c={dx:0,dy:0};o&&o.d&&(l=pA(n,r,i,a,t.startArrow.d)),s&&s.d&&(c=pA(n,r,i,a,t.endArrow.d)),e.beginPath(),e.moveTo(n+l.dx,r+l.dy),e.lineTo(i-c.dx,a-c.dy)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Lv.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2;return Lv.pointAt(n,r,i,a,e)},t}(_A),PA={circle:function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},RA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return Dp(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e,n,r=this.attr(),i=r.x,a=r.y,o=r.symbol||"circle",s=this._getR(r);if(Rp(o))n=dy(n=(e=o)(i,a,s));else{if(!(e=t.Symbols[o]))return console.warn(o+" marker is not supported."),null;n=e(i,a,s)}return n},t.prototype.createPath=function(e){wA(this,e,{path:this._getPath()},this.get("paramsCache"))},t.Symbols=PA,t}(_A);function DA(e,t,n){var r=ty();return e.createPath(r),r.isPointInPath(t,n)}function BA(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function zA(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function HA(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(zA(o,s,[t,n]))return!0;BA(o[1]-n)>0!=BA(s[1]-n)>0&&BA(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function jA(e,t,n,r,i,a,o,s){var l=(Math.atan2(s-t,o-e)+2*Math.PI)%(2*Math.PI);if(l<r||l>i)return!1;var c={x:e+n*Math.cos(l),y:t+n*Math.sin(l)};return V_(c.x,c.y,o,s)<=a/2}var GA=Qm;var $A=_p({hasArc:function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break}}return t},extractPolygons:function(e){for(var t=e.length,n=[],r=[],i=[],a=0;a<t;a++){var o=e[a],s=o[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([o[1],o[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(e,t,n,r,i){for(var a=!1,o=t/2,s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,u=l.params,h=l.prePoint,p=l.box;if(!p||W_(p.x-o,p.y-o,p.width+t,p.height+t,n,r)){switch(l.command){case"L":case"Z":a=FA(h[0],h[1],c[0],c[1],t,n,r);break;case"Q":a=jv.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],n,r)<=t/2;break;case"C":a=Wv.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i)<=t/2;break;case"A":var d=l.arcParams,f=d.cx,m=d.cy,g=d.rx,v=d.ry,y=d.startAngle,x=d.endAngle,E=d.xRotation,b=[n,r,1],C=g>v?g:v;Pm(b,b,GA(null,[["t",-f,-m],["r",-E],["s",1/(g>v?1:g/v),1/(g>v?v/g:1)]])),a=jA(0,0,C,y,x,t,b[0],b[1])}if(a)break}}return a}},fm);function YA(e,t,n){for(var r=!1,i=0;i<e.length;i++){if(r=HA(e[i],t,n))break}return r}var UA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"path"===t&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=dy(e);var t=$A.hasArc(e);this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=Ey(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e,t=this.attr(),n=t.startArrow,r=t.endArrow;n&&dA(this,t,(e=this.getStartTangent())[0][0],e[0][1],e[1][0],e[1][1]);r&&fA(this,t,(e=this.getEndTangent())[0][0],e[0][1],e[1][0],e[1][1])},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.getSegments(),o=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=$A.isPointInStroke(a,i,e,t,l)}if(!s&&r)if(o)s=DA(this,e,t);else{var c=this.attr("path"),u=$A.extractPolygons(c);s=YA(u.polygons,e,t)||YA(u.polylines,e,t)}return s},t.prototype.createPath=function(e){wA(this,e,this.attr(),this.get("paramsCache"))},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return Dp(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var t,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;Hp(r,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)}));var a=i[n];if(Dp(a)||Dp(n))return null;var o=a.length,s=i[n+1];return Wv.pointAt(a[o-2],a[o-1],s[1],s[2],s[3],s[4],s[5],s[6],t)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",$A.pathToCurve(e))},t.prototype._setTcache=function(){var e,t,n,r,i=0,a=0,o=[],s=this.get("curve");s&&(Hp(s,(function(e,t){n=s[t+1],r=e.length,n&&(i+=Wv.length(e[r-2],e[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?(Hp(s,(function(l,c){n=s[c+1],r=l.length,n&&((e=[])[0]=a/i,t=Wv.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),a+=t||0,e[1]=a/i,o.push(e))})),this.set("tCache",o)):this.set("tCache",[]))},t.prototype.getStartTangent=function(){var e,t=this.getSegments();if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e},t.prototype.getEndTangent=function(){var e,t=this.getSegments(),n=t.length;if(n>1){var r=t[n-2].currentPoint,i=t[n-1].currentPoint,a=t[n-1].endTangent;e=[],a?(e.push([i[0]-a[0],i[1]-a[1]]),e.push([i[0],i[1]])):(e.push([r[0],r[1]]),e.push([i[0],i[1]]))}return e},t}(_A);function VA(e,t,n,r,i){var a=e.length;if(a<2)return!1;for(var o=0;o<a-1;o++){if(FA(e[o][0],e[o][1],e[o+1][0],e[o+1][1],t,n,r))return!0}if(i){var s=e[0],l=e[a-1];if(FA(s[0],s[1],l[0],l[1],t,n,r))return!0}return!1}var WA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr().points,o=!1;return n&&(o=VA(a,i,e,t,!0)),!o&&r&&(o=HA(a,e,t)),o},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];0===n?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},t}(_A),XA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,i=t.endArrow,a=n.length,o=n[0][0],s=n[0][1],l=n[a-1][0],c=n[a-1][1];r&&dA(this,e,n[1][0],n[1][1],o,s),i&&fA(this,e,n[a-2][0],n[a-2][1],l,c)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!(!n||!i)&&VA(this.attr().points,i,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,i=t.endArrow,a=n.length;if(!(n.length<2)){var o,s=n[0][0],l=n[0][1],c=n[a-1][0],u=n[a-1][1];if(r&&r.d)s+=(o=pA(s,l,n[1][0],n[1][1],r.d)).dx,l+=o.dy;if(i&&i.d)c-=(o=pA(n[a-2][0],n[a-2][1],c,u,i.d)).dx,u-=o.dy;e.beginPath(),e.moveTo(s,l);for(var h=0;h<a-1;h++){var p=n[h];e.lineTo(p[0],p[1])}e.lineTo(c,u)}},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return Dp(t)?(this.set("totalLength",Qv(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),Hp(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),Lv.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,a=[];Hp(e,(function(o,s){e[s+1]&&((n=[])[0]=i/t,r=Lv.length(o[0],o[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,a.push(n))})),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(_A);var qA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var a=this.attr(),o=a.x,s=a.y,l=a.width,c=a.height,u=a.radius;if(u){var h=!1;return n&&(h=function(e,t,n,r,i,a,o,s){return FA(e+i,t,e+n-i,t,a,o,s)||FA(e+n,t+i,e+n,t+r-i,a,o,s)||FA(e+n-i,t+r,e+i,t+r,a,o,s)||FA(e,t+r-i,e,t+i,a,o,s)||jA(e+n-i,t+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||jA(e+n-i,t+r-i,i,0,.5*Math.PI,a,o,s)||jA(e+i,t+r-i,i,.5*Math.PI,Math.PI,a,o,s)||jA(e+i,t+i,i,Math.PI,1.5*Math.PI,a,o,s)}(o,s,l,c,u,i,e,t)),!h&&r&&(h=DA(this,e,t)),h}var p=i/2;return r&&n?W_(o-p,s-p,l+p,c+p,e,t):r?W_(o,s,l,c,e,t):n?function(e,t,n,r,i,a,o){var s=i/2;return W_(e-s,t-s,n,i,a,o)||W_(e+n-s,t-s,i,r,a,o)||W_(e+s,t+r-s,n,i,a,o)||W_(e-s,t+s,i,r,a,o)}(o,s,l,c,i,e,t):void 0},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.width,a=t.height,o=t.radius;if(e.beginPath(),0===o)e.rect(n,r,i,a);else{var s=function(e){var t=0,n=0,r=0,i=0;return Bp(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,[t,n,r,i]}(o),l=s[0],c=s[1],u=s[2],h=s[3];e.moveTo(n+l,r),e.lineTo(n+i-c,r),0!==c&&e.arc(n+i-c,r+c,c,-Math.PI/2,0),e.lineTo(n+i,r+a-u),0!==u&&e.arc(n+i-u,r+a-u,u,0,Math.PI/2),e.lineTo(n+h,r+a),0!==h&&e.arc(n+h,r+a-h,h,Math.PI/2,Math.PI),e.lineTo(n,r+l),0!==l&&e.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),e.closePath()}},t}(_A),KA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=ry(e)},t.prototype._setText=function(e){var t=null;ed(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,n=1*e.fontSize;return t?t-n:.14*n},t.prototype._drawTextArr=function(e,t,n){var r,i=this.attrs,a=i.textBaseline,o=i.x,s=i.y,l=1*i.fontSize,c=this._getSpaceingY(),u=ny(i.text,i.fontSize,i.lineHeight);Hp(t,(function(t,i){r=s+i*(c+l)-u+l,"middle"===a&&(r+=u-l-(u-l)/2),"top"===a&&(r+=u-l),Dp(t)||(n?e.fillText(t,o,r):e.strokeText(t,o,r))}))},t.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,i=n.y,a=this.get("textArr");if(a)this._drawTextArr(e,a,t);else{var o=n.text;Dp(o)||(t?e.fillText(o,r,i):e.strokeText(o,r,i))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,a=t.fillOpacity;this.isStroke()&&n>0&&(Dp(i)||1===i||(e.globalAlpha=r),this.stroke(e)),this.isFill()&&(Dp(a)||1===a?this.fill(e):(e.globalAlpha=a,this.fill(e),e.globalAlpha=r)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(_A);function QA(e,t,n){var r,i,a=e.getTotalMatrix();if(a){var o=(r=[t,n,1],(i=a)?eg(tg(i),r):r);return[o[0],o[1]]}return[t,n]}function ZA(e,t,n){if(e.isCanvas&&e.isCanvas())return!0;if(!xm(e)||!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var r=QA(e,t,n),i=r[0],a=r[1];if(e.isClipped(i,a))return!1}var o=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=o.minX&&t<=o.maxX&&n>=o.minY&&n<=o.maxY}function JA(e,t,n){if(!ZA(e,t,n))return null;for(var r=null,i=e.getChildren(),a=i.length-1;a>=0;a--){var o=i[a];if(o.isGroup())r=JA(o,t,n);else if(ZA(o,t,n)){var s=o,l=QA(o,t,n),c=l[0],u=l[1];s.isInShape(c,u)&&(r=o)}if(r)break}return r}var eO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return zn},t.prototype.getGroupBase=function(){return kA},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},t.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get("context"),i=this.get("el"),a=this.getPixelRatio();i.width=a*t,i.height=a*n,a>1&&r.scale(a,a)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(t,n){return this.get("quickHit")?JA(this,t,n):e.prototype.getShape.call(this,t,n,null)},t.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),n=this.getViewRange();t.length&&t[0]===this?e=n:(e=function(e){if(!e.length)return null;var t=[],n=[],r=[],i=[];return Hp(e,(function(e){var a=SA(e);a&&(t.push(a.minX),n.push(a.minY),r.push(a.maxX),i.push(a.maxY))})),{minX:qp(t),minY:qp(n),maxX:Xp(r),maxY:Xp(i)}}(t))&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView")&&(e=function(e,t){return e&&t&&X_(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}(e,n)));return e},t.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},t.prototype._clearFrame=function(){var e,t=this.get("drawFrame");t&&(e=t,(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),n=this.getChildren();e.clearRect(0,0,t.width,t.height),gA(e,this),vA(e,n),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),gA(e,this),yA(this,n,r),vA(e,n,r),e.restore()):t.length&&EA(t),Hp(t,(function(e){e.get("hasChanged")&&e.set("hasChanged",!1)})),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e,t=this,n=this.get("drawFrame");n||(e=function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)},n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e),this.set("drawFrame",n))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(Ev),tO=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:zn,version:"0.5.12",Canvas:eO,Group:kA,getArcParams:aA,Event:mm,Base:Em,AbstractCanvas:Ev,AbstractGroup:bv,AbstractShape:Cv,getBBoxMethod:Sv,getTextHeight:ny,assembleFont:ry,isAllowCapture:xm,multiplyVec2:eg,invert:tg,getOffScreenContext:ty,PathUtil:fm}),nO={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},rO={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function iO(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function aO(e){var t=nO[e.type],n=e.getParent();if(!t)throw new Error("the type "+e.type+" is not supported by svg");var r=iO(t);if(e.get("id")&&(r.id=e.get("id")),e.set("el",r),e.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function oO(e,t){var n,r=e.get("el"),i=(n=r.children,Mp(n)?Array.prototype.slice.call(n):[]).sort(t),a=document.createDocumentFragment();i.forEach((function(e){a.appendChild(e)})),r.appendChild(a)}function sO(e){var t=e.attr().matrix;if(t){for(var n=e.cfg.el,r=[],i=0;i<9;i+=3)r.push(t[i]+","+t[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",t)}}function lO(e,t){var n=e.getClip(),r=e.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){aO(n),n.createPath(t);var i=t.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function cO(e,t){t.forEach((function(t){t.draw(e)}))}function uO(e,t){var n=e.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=e.getParent(),a=i?i.getChildren():[n],o=e.get("el");if("remove"===t)if(e.get("isClipShape")){var s=o&&o.parentNode,l=s&&s.parentNode;s&&l&&l.removeChild(s)}else o&&o.parentNode&&o.parentNode.removeChild(o);else if("show"===t)o.setAttribute("visibility","visible");else if("hide"===t)o.setAttribute("visibility","hidden");else if("zIndex"===t)!function(e,t){var n=e.parentNode,r=Array.from(n.childNodes).filter((function(e){return 1===e.nodeType&&"defs"!==e.nodeName.toLowerCase()})),i=r[t],a=r.indexOf(e);if(i){if(a>t)n.insertBefore(e,i);else if(a<t){var o=r[t+1];o?n.insertBefore(e,o):n.appendChild(e)}}else n.appendChild(e)}(o,a.indexOf(e));else if("sort"===t){var c=e.get("children");c&&c.length&&oO(e,(function(e,t){return c.indexOf(e)-c.indexOf(t)?1:0}))}else"clear"===t?o&&(o.innerHTML=""):"matrix"===t?sO(e):"clip"===t?lO(e,r):"attr"===t||"add"===t&&e.draw(r)}}var hO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=iO("g");this.set("el",e);var t=this.getParent();if(t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(e)}return e},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,t)}},t.prototype.onCanvasChange=function(e){uO(this,e)},t.prototype.getShapeBase=function(){return Hn},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var t=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),lO(this,e),this.createPath(e),t.length&&cO(e,t))},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hp(t||n,(function(e,t){rO[t]&&r.setAttribute(rO[t],e)})),sO(this)},t}(bv),pO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,t)}},t.prototype.getShapeBase=function(){return Hn},t.prototype.getGroupBase=function(){return hO},t.prototype.onCanvasChange=function(e){uO(this,e)},t.prototype.calculateBBox=function(){var e=this.get("el"),t=null;if(e)t=e.getBBox();else{var n=Sv(this.get("type"));n&&(t=n(this))}if(t){var r=t.x,i=t.y,a=t.width,o=t.height,s=this.getHitLineWidth(),l=s/2,c=r-l,u=i-l;return{x:c,y:u,minX:c,minY:u,maxX:r+a+l,maxY:i+o+l,width:a+s,height:o+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),t=e.fill,n=e.fillStyle;return(t||n||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),t=e.stroke,n=e.strokeStyle;return(t||n)&&this.canStroke},t.prototype.draw=function(e,t){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||aO(this),lO(this,e),this.createPath(e,t),this.shadow(e,t),this.strokeAndFill(e,t),this.transform(t))},t.prototype.createPath=function(e,t){},t.prototype.strokeAndFill=function(e,t){var n=t||this.attr(),r=n.fill,i=n.fillStyle,a=n.stroke,o=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,c=n.lineWidth,u=this.get("el");this.canFill&&(t?"fill"in n?this._setColor(e,"fill",r):"fillStyle"in n&&this._setColor(e,"fill",i):this._setColor(e,"fill",r||i),s&&u.setAttribute(rO.fillOpacity,s)),this.canStroke&&c>0&&(t?"stroke"in n?this._setColor(e,"stroke",a):"strokeStyle"in n&&this._setColor(e,"stroke",o):this._setColor(e,"stroke",a||o),l&&u.setAttribute(rO.strokeOpacity,l),c&&u.setAttribute(rO.lineWidth,c))},t.prototype._setColor=function(e,t,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=e.find("gradient",n))||(i=e.addGradient(n)),r.setAttribute(rO[t],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=e.find("pattern",n))||(i=e.addPattern(n)),r.setAttribute(rO[t],"url(#"+i+")")}else r.setAttribute(rO[t],n);else r.setAttribute(rO[t],"none")},t.prototype.shadow=function(e,t){var n=this.attr(),r=t||n,i=r.shadowOffsetX,a=r.shadowOffsetY,o=r.shadowBlur,s=r.shadowColor;(i||a||o||s)&&function(e,t){var n=e.cfg.el,r=e.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var a=t.find("filter",i);a||(a=t.addShadow(i)),n.setAttribute("filter","url(#"+a+")")}else n.removeAttribute("filter")}(this,e)},t.prototype.transform=function(e){var t=this.attr();(e||t).matrix&&sO(this)},t.prototype.isInShape=function(e,t){return this.isPointInPath(e,t)},t.prototype.isPointInPath=function(e,t){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=e+r.left,a=t+r.top,o=document.elementFromPoint(i,a);return!(!o||!o.isEqualNode(n))},t.prototype.getHitLineWidth=function(){var e=this.attrs,t=e.lineWidth,n=e.lineAppendWidth;return this.isStroke()?t+n:0},t}(Cv),dO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x:0,y:0,r:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hp(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):rO[t]&&r.setAttribute(rO[t],e)}))},t}(pO),fO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return kp(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");if(Hp(t||n,(function(e,t){rO[t]&&r.setAttribute(rO[t],e)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var a=r.childNodes,o=a.length-1;o>=0;o--)r.removeChild(a[o]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},t}(pO),mO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hp(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):rO[t]&&r.setAttribute(rO[t],e)}))},t}(pO),gO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");Hp(t||r,(function(e,t){"img"===t?n._setImage(r.img):rO[t]&&i.setAttribute(rO[t],e)}))},t.prototype.setAttr=function(e,t){this.attrs[e]=t,"img"===e&&this._setImage(t)},t.prototype._setImage=function(e){var t=this.attr(),n=this.get("el");if(ed(e))n.setAttribute("href",e);else if(e instanceof window.Image)t.width||(n.setAttribute("width",e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",e.height),this.attr("height",e.height)),n.setAttribute("href",e.src);else if(e instanceof HTMLElement&&ed(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())n.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+e.width),r.setAttribute("height",""+e.height),r.getContext("2d").putImageData(e,0,0),t.width||(n.setAttribute("width",""+e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",""+e.height),this.attr("height",e.height)),n.setAttribute("href",r.toDataURL())}},t}(pO),vO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hp(t||n,(function(t,i){if("startArrow"===i||"endArrow"===i)if(t){var a=zp(t)?e.addArrow(n,rO[i]):e.getDefaultArrow(n,rO[i]);r.setAttribute(rO[i],"url(#"+a+")")}else r.removeAttribute(rO[i]);else rO[i]&&r.setAttribute(rO[i],t)}))},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Lv.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,a=t.y2;return Lv.pointAt(n,r,i,a,e)},t}(pO),yO={circle:function(e,t,n){return[["M",e,t],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["z"]]},triangleDown:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},xO={get:function(e){return yO[e]},register:function(e,t){yO[e]=t},remove:function(e){delete yO[e]},getAll:function(){return yO}},EO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return kp(t,e),t.prototype.createPath=function(e){this.get("el").setAttribute("d",this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return Bp(e)?e.map((function(e){return e.join(" ")})).join(""):e},t.prototype._getPath=function(){var e,t=this.attr(),n=t.x,r=t.y,i=t.r||t.radius,a=t.symbol||"circle";return(e=Rp(a)?a:xO.get(a))?e(n,r,i):(console.warn(e+" symbol is not exist."),null)},t.symbolsFactory=xO,t}(pO),bO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");Hp(t||r,(function(t,a){if("path"===a&&Bp(t))i.setAttribute("d",n._formatPath(t));else if("startArrow"===a||"endArrow"===a)if(t){var o=zp(t)?e.addArrow(r,rO[a]):e.getDefaultArrow(r,rO[a]);i.setAttribute(rO[a],"url(#"+o+")")}else i.removeAttribute(rO[a]);else rO[a]&&i.setAttribute(rO[a],t)}))},t.prototype._formatPath=function(e){var t=e.map((function(e){return e.join(" ")})).join("");return~t.indexOf("NaN")?"":t},t.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var t=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=t?t.getPointAtLength(e*n):null;return r?{x:r.x,y:r.y}:null},t}(pO),CO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return kp(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hp(t||n,(function(e,t){"points"===t&&Bp(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):rO[t]&&r.setAttribute(rO[t],e)}))},t}(pO),wO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hp(t||n,(function(e,t){"points"===t&&Bp(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):rO[t]&&r.setAttribute(rO[t],e)}))},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return Dp(t)?(this.set("totalLength",Qv(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),Hp(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),Lv.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,a=[];Hp(e,(function(o,s){e[s+1]&&((n=[])[0]=i/t,r=Lv.length(o[0],o[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,a.push(n))})),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(pO);var TO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el"),a=!1,o=["x","y","width","height","radius"];Hp(t||r,(function(e,t){-1===o.indexOf(t)||a?-1===o.indexOf(t)&&rO[t]&&i.setAttribute(rO[t],e):(i.setAttribute("d",n._assembleRect(r)),a=!0)}))},t.prototype._assembleRect=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=e.radius;if(!a)return"M "+t+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var o=function(e){var t=0,n=0,r=0,i=0;return Bp(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}(a);return Bp(a)?1===a.length?o.r1=o.r2=o.r3=o.r4=a[0]:2===a.length?(o.r1=o.r3=a[0],o.r2=o.r4=a[1]):3===a.length?(o.r1=a[0],o.r2=o.r4=a[1],o.r3=a[2]):(o.r1=a[0],o.r2=a[1],o.r3=a[2],o.r4=a[3]):o.r1=o.r2=o.r3=o.r4=a,[["M "+(t+o.r1)+","+n],["l "+(r-o.r1-o.r2)+",0"],["a "+o.r2+","+o.r2+",0,0,1,"+o.r2+","+o.r2],["l 0,"+(i-o.r2-o.r3)],["a "+o.r3+","+o.r3+",0,0,1,"+-o.r3+","+o.r3],["l "+(o.r3+o.r4-r)+",0"],["a "+o.r4+","+o.r4+",0,0,1,"+-o.r4+","+-o.r4],["l 0,"+(o.r4+o.r1-i)],["a "+o.r1+","+o.r1+",0,0,1,"+o.r1+","+-o.r1],["z"]].join(" ")},t}(pO),SO={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},kO={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},_O={left:"left",start:"left",center:"middle",right:"end",end:"end"},AO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return kp(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return _p(_p({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");this._setFont(),Hp(t||r,(function(e,t){"text"===t?n._setText(""+e):"matrix"===t&&e?sO(n):rO[t]&&i.setAttribute(rO[t],e)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},t.prototype._setFont=function(){var e=this.get("el"),t=this.attr(),n=t.textBaseline,r=t.textAlign,i=Im();i&&"firefox"===i.name?e.setAttribute("dominant-baseline",kO[n]||"alphabetic"):e.setAttribute("alignment-baseline",SO[n]||"baseline"),e.setAttribute("text-anchor",_O[r]||"left")},t.prototype._setText=function(e){var t=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,a=void 0===i?"bottom":i;if(e)if(~e.indexOf("\n")){var o=e.split("\n"),s=o.length-1,l="";Hp(o,(function(e,t){0===t?"alphabetic"===a?l+='<tspan x="'+r+'" dy="'+-s+'em">'+e+"</tspan>":"top"===a?l+='<tspan x="'+r+'" dy="0.9em">'+e+"</tspan>":"middle"===a?l+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+e+"</tspan>":"bottom"===a?l+='<tspan x="'+r+'" dy="-'+(s+.3)+'em">'+e+"</tspan>":"hanging"===a&&(l+='<tspan x="'+r+'" dy="'+(-(s-1)-.3)+'em">'+e+"</tspan>"):l+='<tspan x="'+r+'" dy="1em">'+e+"</tspan>"})),t.innerHTML=l}else t.innerHTML=e;else t.innerHTML=""},t}(pO),OO=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,IO=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,MO=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function NO(e){var t=e.match(MO);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),Hp(t,(function(e){e=e.split(":"),n+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'})),n}var FO=function(){function e(e){this.cfg={};var t,n,r,i,a,o,s,l=null,c=Qd("gradient_");return"l"===e.toLowerCase()[0]?function(e,t){var n,r,i=OO.exec(e),a=md(vd(parseFloat(i[1])),2*Math.PI),o=i[2];a>=0&&a<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=a&&a<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=a&&a<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(a),l=s*s,c=(r.x-n.x+s*(r.y-n.y))/(l+1)+n.x,u=s*(r.x-n.x+s*(r.y-n.y))/(l+1)+n.y;t.setAttribute("x1",n.x),t.setAttribute("y1",n.y),t.setAttribute("x2",c),t.setAttribute("y2",u),t.innerHTML=NO(o)}(e,l=iO("linearGradient")):(l=iO("radialGradient"),t=e,n=l,r=IO.exec(t),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4],n.setAttribute("cx",i),n.setAttribute("cy",a),n.setAttribute("r",o),n.innerHTML=NO(s)),l.setAttribute("id",c),this.el=l,this.id=c,this.cfg=e,this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),LO={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},PO={x:"-40%",y:"-40%",width:"200%",height:"200%"},RO=function(){function e(e){this.type="filter",this.cfg={},this.type="filter";var t=iO("filter");return Hp(PO,(function(e,n){t.setAttribute(n,e)})),this.el=t,this.id=Qd("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return e.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,r=this.cfg;return Hp(Object.keys(r),(function(e){if(r[e]!==t[e])return n=!1,!1})),n},e.prototype.update=function(e,t){var n=this.cfg;return n[LO[e]]=t,this._parseShadow(n,this.el),this},e.prototype._parseShadow=function(e,t){var n='<feDropShadow\n      dx="'+(e.dx||0)+'"\n      dy="'+(e.dy||0)+'"\n      stdDeviation="'+(e.blur?e.blur/10:0)+'"\n      flood-color="'+(e.color?e.color:"#000")+'"\n      flood-opacity="'+(e.opacity?e.opacity:1)+'"\n      />';t.innerHTML=n},e}(),DO=function(){function e(e,t){this.cfg={};var n=iO("marker"),r=Qd("marker_");n.setAttribute("id",r);var i=iO("path");i.setAttribute("stroke",e.stroke||"none"),i.setAttribute("fill",e.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var a=e["marker-start"===t?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",!0===a?this._setDefaultPath(t,i):(this.cfg=a,this._setMarker(e.lineWidth,i)),this}return e.prototype.match=function(){return!1},e.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},e.prototype._setMarker=function(e,t){var n=this.el,r=this.cfg.path,i=this.cfg.d;Bp(r)&&(r=r.map((function(e){return e.join(" ")})).join("")),t.setAttribute("d",r),n.appendChild(t),i&&n.setAttribute("refX",""+i/e)},e.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},e}(),BO=function(){function e(e){this.type="clip",this.cfg={};var t=iO("clipPath");this.el=t,this.id=Qd("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return e.prototype.match=function(){return!1},e.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},e}(),zO=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,HO=function(){function e(e){this.cfg={};var t=iO("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=iO("image");t.appendChild(n);var r=Qd("pattern_");t.id=r,this.el=t,this.id=r,this.cfg=e;var i=zO.exec(e)[2];n.setAttribute("href",i);var a=new Image;function o(){t.setAttribute("width",""+a.width),t.setAttribute("height",""+a.height)}return i.match(/^data:/i)||(a.crossOrigin="Anonymous"),a.src=i,a.complete?o():(a.onload=o,a.src=a.src),this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),jO=function(){function e(e){var t=iO("defs"),n=Qd("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return e.prototype.find=function(e,t){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(e,t)){r=n[i].id;break}return r},e.prototype.findById=function(e){for(var t=this.children,n=null,r=0;r<t.length;r++)if(t[r].id===e){n=t[r];break}return n},e.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},e.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new DO(e,t);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},e.prototype.addGradient=function(e){var t=new FO(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addArrow=function(e,t){var n=new DO(e,t);return this.el.appendChild(n.el),this.add(n),n.id},e.prototype.addShadow=function(e){var t=new RO(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addPattern=function(e){var t=new HO(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addClip=function(e){var t=new BO(e);return this.el.appendChild(t.el),this.add(t),t.id},e}(),GO=function(e){function t(t){return e.call(this,_p(_p({},t),{autoDraw:!0,renderer:"svg"}))||this}return kp(t,e),t.prototype.getShapeBase=function(){return Hn},t.prototype.getGroupBase=function(){return hO},t.prototype.getShape=function(e,t,n){var r=n.target||n.srcElement;if(!nO[r.tagName]){for(var i=r.parentNode;i&&!nO[i.tagName];)i=i.parentNode;r=i}return this.find((function(e){return e.get("el")===r}))},t.prototype.createDom=function(){var e=iO("svg"),t=new jO(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",t),e},t.prototype.onCanvasChange=function(e){var t=this.get("context"),n=this.get("el");if("sort"===e){var r=this.get("children");r&&r.length&&oO(this,(function(e,t){return r.indexOf(e)-r.indexOf(t)?1:0}))}else if("clear"===e){if(n){n.innerHTML="";var i=t.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===e?sO(this):"clip"===e?lO(this,t):"changeSize"===e&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},t.prototype.draw=function(){var e=this.get("context"),t=this.getChildren();lO(this,e),t.length&&cO(e,t)},t}(Ev),$O=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:Hn,version:"0.5.6",Canvas:GO,Group:hO,Event:mm,Base:Em,AbstractCanvas:Ev,AbstractGroup:bv,AbstractShape:Cv,getBBoxMethod:Sv,getTextHeight:ny,assembleFont:ry,isAllowCapture:xm,multiplyVec2:eg,invert:tg,getOffScreenContext:ty,PathUtil:fm}),YO=function(e){function t(t){var n=e.call(this,t)||this;n.type="path",n.shapeType="line";var r=t.connectNulls,i=void 0!==r&&r,a=t.showSinglePoint,o=void 0===a||a;return n.connectNulls=i,n.showSinglePoint=o,n}return kp(t,e),t.prototype.updateElements=function(e,t){void 0===t&&(t=!1);for(var n=new Map,r=new Map,i=[],a=0,o=0;o<e.length;o++){var s=e[o],l=this.getElementId(s);i.push(l),n.set(l,s),r.set(l,a),a++}this.elements=new Array(a);for(var c=n_(this.lastElementsMap,i),u=c.added,h=c.updated,p=c.removed,d=0,f=u;d<f.length;d++){l=f[d],s=n.get(l);var m=this.getShapeFactory(),g=this.getShapeInfo(s);o=r.get(l);(x=new $k({shapeFactory:m,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:o})).geometry=this,x.animate=this.animateOption,x.draw(g,t),this.elementsMap[l]=x,this.elements[o]=x}for(var v=0,y=h;v<y.length;v++){l=y[v],s=n.get(l);var x=this.lastElementsMap[l],E=(o=r.get(l),g=this.getShapeInfo(s),x.getModel());(this.isCoordinateChanged||e_(E,g))&&(x.animate=this.animateOption,x.update(g)),this.elementsMap[l]=x,this.elements[o]=x}for(var b=0,C=p;b<C.length;b++){l=C[b];(x=this.lastElementsMap[l]).animate=this.animateOption,x.destroy()}},t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push({x:a.x,y:a.y}),n.push(a._origin)}return{points:t,data:n}},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=this.getPointsAndData(e),r=n.points,i=n.data;return t.mappingData=e,t.data=i,t.isStack=!!this.getAdjust("stack"),t.points=r,t.connectNulls=this.connectNulls,t.showSinglePoint=this.showSinglePoint,t},t}(r_);function UO(e,t,n,r,i){var a=[];if(e.length){for(var o=[],s=[],l=0,c=e.length;l<c;l++){var u=e[l];o.push(u[1]),s.push(u[0])}s=s.reverse(),Hp([o,s],(function(e,l){var c=[],u=r.parsePoints(e),h=u[0];1===o.length&&1===s.length?c=0===l?[["M",h.x-.5,h.y],["L",h.x+.5,h.y]]:[["L",h.x+.5,h.y],["L",h.x-.5,h.y]]:(t&&u.push({x:h.x,y:h.y}),c=n?fS(u,!1,i):dS(u,!1),l>0&&(c[0][0]="L")),a=a.concat(c)})),a.push(["Z"])}return a}function VO(e,t,n,r,i){for(var a=k_(e,t,!t,"lineWidth"),o=e.connectNulls,s=e.isInCircle,l=w_(e.points,o,e.showSinglePoint),c=[],u=0,h=l.length;u<h;u++){var p=l[u];c=c.concat(UO(p,s,n,r,i))}return a.path=c,a}function WO(e){var t=e.start,n=e.end;return[[t.x,n.y],[n.x,t.y]]}Qk("area",{defaultShapeType:"area",getDefaultPoints:function(e){var t=e.x,n=e.y0;return(Bp(e.y)?e.y:[n,e.y]).map((function(e){return{x:t,y:e}}))}}),Zk("area","area",{draw:function(e,t){var n=VO(e,!1,!1,this);return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,fill:e.color}}}});var XO=function(e){function t(t){var n=e.call(this,t)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var r=t.startOnZero,i=void 0===r||r,a=t.sortable,o=void 0!==a&&a,s=t.showSinglePoint,l=void 0!==s&&s;return n.startOnZero=i,n.sortable=o,n.showSinglePoint=l,n}return kp(t,e),t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push(a.points),n.push(a._origin)}return{points:t,data:n}},t.prototype.getYMinValue=function(){return this.startOnZero?e.prototype.getYMinValue.call(this):this.getYScale().min},t}(YO);Qk("edge",{defaultShapeType:"line",getDefaultPoints:function(e){return A_(e)}}),Zk("edge","line",{draw:function(e,t){var n=k_(e,!0,!1,"lineWidth"),r=dS(this.parsePoints(e.points),this.coordinate.isPolar);return t.addShape("path",{attrs:_p(_p({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});var qO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return kp(t,e),t}(r_),KO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return kp(t,e),t.prototype.updateElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=this.prepareRange(r),a=this.prepareSize(),o=Yd(this.styleOption,["cfg","shadowBlur"]);pd(o)||(o=a/2),this.prepareGreyScaleBlurredCircle(a,o),this.drawWithRange(r,i,a,o)}},t.prototype.color=function(e,t){return this.createAttrOption("color",e,"function"!=typeof t?t:""),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},t.prototype.prepareRange=function(e){var t=this.getAttribute("color").getFields()[0],n=1/0,r=-1/0;return e.forEach((function(e){var i=e._origin[t];i>r&&(r=i),i<n&&(n=i)})),n===r&&(n=r-1),[n,r]},t.prototype.prepareSize=function(){var e=this.getDefaultValue("size");return pd(e)||(e=this.getDefaultSize()),e},t.prototype.prepareGreyScaleBlurredCircle=function(e,t){var n=this.getGrayScaleBlurredCanvas(),r=e+t,i=n.getContext("2d");n.width=n.height=2*r,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=t,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,e,0,2*Math.PI,!0),i.closePath(),i.fill()},t.prototype.drawWithRange=function(e,t,n,r){var i=this.coordinate,a=i.start,o=i.end,s=this.coordinate.getWidth(),l=this.coordinate.getHeight(),c=this.getAttribute("color").getFields()[0];this.clearShadowCanvasCtx();var u=this.getShadowCanvasCtx();t&&(e=e.filter((function(e){return e._origin[c]<=t[1]&&e._origin[c]>=t[0]})));for(var h=this.scales[c],p=0,d=e;p<d.length;p++){var f=d[p],m=this.getDrawCfg(f),g=m.x,v=m.y,y=h.scale(f._origin[c]);this.drawGrayScaleBlurredCircle(g-a.x,v-o.y,n+r,y,u)}var x=u.getImageData(0,0,s,l);this.clearShadowCanvasCtx(),this.colorize(x),u.putImageData(x,0,0);var E=this.getImageShape();E.attr("x",a.x),E.attr("y",o.y),E.attr("width",s),E.attr("height",l),E.attr("img",u.canvas),E.set("origin",this.getShapeInfo(e))},t.prototype.getDefaultSize=function(){var e=this.getAttribute("position"),t=this.coordinate;return Math.min(t.getWidth()/(4*e.scales[0].ticks.length),t.getHeight()/(4*e.scales[1].ticks.length))},t.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},t.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement("canvas"),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext("2d")},t.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},t.prototype.drawGrayScaleBlurredCircle=function(e,t,n,r,i){var a=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(a,e-n,t-n)},t.prototype.colorize=function(e){for(var t=this.getAttribute("color"),n=e.data,r=this.paletteCache,i=3;i<n.length;i+=4){var a=n[i];if(pd(a)){var o=r[a]?r[a]:tx.rgb2arr(t.gradient(a/256));n[i-3]=o[0],n[i-2]=o[1],n[i-1]=o[2],n[i]=a}}},t.prototype.getImageShape=function(){var e=this.imageShape;return e||(e=this.container.addShape({type:"image",attrs:{}}),this.imageShape=e,e)},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=e.map((function(e){return e._origin}));return _p(_p({},t),{mappingData:e,data:n})},t}(r_);function QO(e){var t,n,r,i,a=e.x,o=e.y,s=e.y0,l=e.size;Bp(o)?(t=o[0],n=o[1]):(t=s,n=o),Bp(a)?(r=a[0],i=a[1]):(r=a-l/2,i=a+l/2);var c=[{x:r,y:t},{x:r,y:n}];return c.push({x:i,y:n},{x:i,y:t}),c}function ZO(e,t){void 0===t&&(t=!0);var n=[],r=e[0];n.push(["M",r.x,r.y]);for(var i=1,a=e.length;i<a;i++)n.push(["L",e[i].x,e[i].y]);return t&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}function JO(e,t){var n=0,r=0,i=0,a=0;return Bp(e)?1===e.length?n=r=i=a=e[0]:2===e.length?(n=i=e[0],r=a=e[1]):3===e.length?(n=e[0],r=a=e[1],i=e[2]):(n=e[0],r=e[1],i=e[2],a=e[3]):n=r=i=a=e,n+r>t&&(r=t-(n=n?t/(1+r/n):0)),i+a>t&&(a=t-(i=i?t/(1+a/i):0)),[n||0,r||0,i||0,a||0]}function eI(e,t,n){var r=[];if(n.isRect){var i=n.isTransposed?{x:n.start.x,y:t[0].y}:{x:t[0].x,y:n.start.y},a=n.isTransposed?{x:n.end.x,y:t[2].y}:{x:t[3].x,y:n.end.y},o=Yd(e,["background","style","radius"]);if(o){var s=n.isTransposed?Math.abs(t[0].y-t[2].y):t[2].x-t[1].x,l=n.isTransposed?n.getWidth():n.getHeight(),c=JO(o,Math.min(s,l)),u=c[0],h=c[1],p=c[2],d=c[3];r.push(["M",i.x,a.y+u]),0!==u&&r.push(["A",u,u,0,0,1,i.x+u,a.y]),r.push(["L",a.x-h,a.y]),0!==h&&r.push(["A",h,h,0,0,1,a.x,a.y+h]),r.push(["L",a.x,i.y-p]),0!==p&&r.push(["A",p,p,0,0,1,a.x-p,i.y]),r.push(["L",i.x+d,i.y]),0!==d&&r.push(["A",d,d,0,0,1,i.x,i.y-d])}else r.push(["M",i.x,i.y]),r.push(["L",a.x,i.y]),r.push(["L",a.x,a.y]),r.push(["L",i.x,a.y]),r.push(["L",i.x,i.y]);r.push(["z"])}if(n.isPolar){var f=n.getCenter(),m=MT(e,n),g=m.startAngle,v=m.endAngle;if("theta"===n.type||n.isTransposed){var y=function(e){return Math.pow(e,2)};u=Math.sqrt(y(f.x-t[0].x)+y(f.y-t[0].y)),h=Math.sqrt(y(f.x-t[2].x)+y(f.y-t[2].y));r=OT(f.x,f.y,u,n.startAngle,n.endAngle,h)}else r=OT(f.x,f.y,n.getRadius(),g,v)}return r}function tI(e,t,n){var r=[];return Dp(t)?n?r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",(e[2].x+e[3].x)/2,(e[2].y+e[3].y)/2],["Z"]):r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[3].x,e[3].y],["Z"]):r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",t[1].x,t[1].y],["L",t[0].x,t[0].y],["Z"]),r}function nI(e,t){return[t,e]}function rI(e){var t=e.theme,n=e.coordinate,r=e.getXScale(),i=r.values,a=e.beforeMappingData,o=i.length,s=DT(e.coordinate),l=e.intervalPadding,c=e.dodgePadding,u=e.maxColumnWidth||t.maxColumnWidth,h=e.minColumnWidth||t.minColumnWidth,p=e.columnWidthRatio||t.columnWidthRatio,d=e.multiplePieWidthRatio||t.multiplePieWidthRatio,f=e.roseWidthRatio||t.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var m=function(e,t){var n=e.length,r=e;ed(r[0])&&(r=e.map((function(e){return t.translate(e)})));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}(i,r);o=(r.max-r.min)/m,i.length>o&&(o=i.length)}var g=r.range,v=1/o,y=1;(n.isPolar?y=n.isTransposed&&o>1?d:f:(r.isLinear&&(v*=g[1]-g[0]),y=p),!Dp(l)&&l>=0)?v=(1-(o-1)*(l/s))/o:v*=y;if(e.getAdjust("dodge")){var x=function(e,t){if(t){var n=Wp(e);return nd(n,t).length}return e.length}(a,e.getAdjust("dodge").dodgeBy);if(!Dp(c)&&c>=0)v=(v-c/s*(x-1))/x;else!Dp(l)&&l>=0?(v*=y,v/=x):v/=x;v=v>=0?v:0}if(!Dp(u)&&u>=0){var E=u/s;v>E&&(v=E)}if(!Dp(h)&&h>=0){var b=h/s;v<b&&(v=b)}return v}Qk("interval",{defaultShapeType:"rect",getDefaultPoints:function(e){return QO(e)}}),Zk("interval","rect",{draw:function(e,t){var n,r=k_(e,!1,!0),i=t,a=null==e?void 0:e.background;if(a){i=t.addGroup();var o=__(e),s=eI(e,this.parsePoints(e.points),this.coordinate);i.addShape("path",{attrs:_p(_p({},o),{path:s}),zIndex:-1,name:"element-background"})}n=r.radius&&this.coordinate.isRect?function(e,t,n){var r,i,a,o,s,l,c,u=Ip([],e,!0),h=u[0],p=u[1],d=u[2],f=u[3],m="number"==typeof n?Array(4).fill(n):n,g=m[0],v=m[1],y=m[2],x=m[3];t.isTransposed&&(p=(r=nI(p,f))[0],f=r[1],g=(i=[x,g,v,y])[0],v=i[1],y=i[2],x=i[3]),t.isReflect("y")&&(h=(a=nI(h,p))[0],p=a[1],d=(o=nI(d,f))[0],f=o[1]),t.isReflect("x")&&(h=(s=nI(h,f))[0],f=s[1],p=(l=nI(p,d))[0],d=l[1]);var E=[],b=function(e){return Math.abs(e)};return g=(c=JO([g,v,y,x],Math.min(b(f.x-h.x),b(p.y-h.y))).map((function(e){return b(e)})))[0],v=c[1],y=c[2],x=c[3],h.y<p.y?(E.push(["M",f.x,f.y+y]),0!==y&&E.push(["A",y,y,0,0,0,f.x-y,f.y]),E.push(["L",h.x+x,h.y]),0!==x&&E.push(["A",x,x,0,0,0,h.x,h.y+x]),E.push(["L",p.x,p.y-g]),0!==g&&E.push(["A",g,g,0,0,0,p.x+g,p.y]),E.push(["L",d.x-v,d.y]),0!==v&&E.push(["A",v,v,0,0,0,d.x,d.y-v]),E.push(["L",f.x,f.y+y]),E.push(["z"])):f.x<h.x?(E.push(["M",d.x+v,d.y]),0!==v&&E.push(["A",v,v,0,0,0,d.x,d.y+v]),E.push(["L",f.x,f.y-y]),0!==y&&E.push(["A",y,y,0,0,0,f.x+y,f.y]),E.push(["L",h.x-x,h.y]),0!==x&&E.push(["A",x,x,0,0,0,h.x,h.y-x]),E.push(["L",p.x,p.y+g]),0!==g&&E.push(["A",g,g,0,0,0,p.x-g,p.y]),E.push(["L",d.x+v,d.y]),E.push(["z"])):(E.push(["M",p.x,p.y+g]),0!==g&&E.push(["A",g,g,0,0,1,p.x+g,p.y]),E.push(["L",d.x-v,d.y]),0!==v&&E.push(["A",v,v,0,0,1,d.x,d.y+v]),E.push(["L",f.x,f.y-y]),0!==y&&E.push(["A",y,y,0,0,1,f.x-y,f.y]),E.push(["L",h.x+x,h.y]),0!==x&&E.push(["A",x,x,0,0,1,h.x,h.y-x]),E.push(["L",p.x,p.y+g]),E.push(["z"])),E}(this.parsePoints(e.points),this.coordinate,r.radius):this.parsePath(function(e,t,n){var r=n.getWidth(),i=n.getHeight(),a="rect"===n.type,o=[],s=(e[2].x-e[1].x)/2,l=n.isTransposed?s*i/r:s*r/i;return"round"===t?(a?(o.push(["M",e[0].x,e[0].y+l]),o.push(["L",e[1].x,e[1].y-l]),o.push(["A",s,s,0,0,1,e[2].x,e[2].y-l]),o.push(["L",e[3].x,e[3].y+l]),o.push(["A",s,s,0,0,1,e[0].x,e[0].y+l])):(o.push(["M",e[0].x,e[0].y]),o.push(["L",e[1].x,e[1].y]),o.push(["A",s,s,0,0,1,e[2].x,e[2].y]),o.push(["L",e[3].x,e[3].y]),o.push(["A",s,s,0,0,1,e[0].x,e[0].y])),o.push(["z"])):o=ZO(e),o}(e.points,r.lineCap,this.coordinate));var l=i.addShape("path",{attrs:_p(_p({},r),{path:n}),name:"interval"});return a?i:l},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});var iI=function(e){function t(t){var n=e.call(this,t)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var r=t.background;return n.background=r,n}return kp(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=DT(this.coordinate)):(this.defaultSize||(this.defaultSize=rI(this)),n=this.defaultSize);return r.size=n,r},t.prototype.adjustScale=function(){e.prototype.adjustScale.call(this);var t,n,r=this.getYScale();if("theta"===this.coordinate.type)r.change({nice:!1,min:0,max:(t=r,n=t.values.filter((function(e){return!Dp(e)&&!isNaN(e)})),Math.max.apply(Math,Ip(Ip([],n,!1),[Dp(t.max)?-1/0:t.max],!1)))});else{var i=this.scaleDefs,a=r.field,o=r.min,s=r.max;"time"!==r.type&&(o>0&&!Yd(i,[a,"min"])&&r.change({min:0}),s<=0&&!Yd(i,[a,"max"])&&r.change({max:0}))}},t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return n.background=this.background,n},t}(r_),aI=function(e){function t(t){var n=e.call(this,t)||this;n.type="line";var r=t.sortable,i=void 0!==r&&r;return n.sortable=i,n}return kp(t,e),t}(YO),oI=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"];function sI(e,t,n,r,i){var a=k_(t,i,!i,"r"),o=e.parsePoints(t.points),s=o[0];if(t.isStack)s=o[1];else if(o.length>1){for(var l=n.addGroup(),c=0,u=o;c<u.length;c++){var h=u[c];l.addShape({type:"marker",attrs:_p(_p(_p({},a),{symbol:m_[r]||r}),h)})}return l}return n.addShape({type:"marker",attrs:_p(_p(_p({},a),{symbol:m_[r]||r}),s)})}Qk("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(e){return A_(e)}}),Hp(oI,(function(e){Zk("point","hollow-".concat(e),{draw:function(t,n){return sI(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:m_[e]||e,style:{r:4.5,stroke:n,fill:null}}}})}));var lI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return kp(t,e),t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return _p(_p({},n),{isStack:!!this.getAdjust("stack")})},t}(r_);Qk("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(e){var t=[];return Hp(e.x,(function(n,r){var i=e.y[r];t.push({x:n,y:i})})),t}}),Zk("polygon","polygon",{draw:function(e,t){if(!zd(e.points)){var n=k_(e,!0,!0),r=this.parsePath(function(e){for(var t=e[0],n=1,r=[["M",t.x,t.y]];n<e.length;){var i=e[n];i.x===e[n-1].x&&i.y===e[n-1].y||(r.push(["L",i.x,i.y]),i.x===t.x&&i.y===t.y&&n<e.length-1&&(t=e[n+1],r.push(["Z"]),r.push(["M",t.x,t.y]),n++)),n++}return jd(id(r),t)||r.push(["L",t.x,t.y]),r.push(["Z"]),r}(e.points));return t.addShape("path",{attrs:_p(_p({},n),{path:r}),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}});var cI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return kp(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=r.x,a=r.y;if(!Bp(i)||!Bp(a)){var o=this.getXScale(),s=this.getYScale(),l=.5/o.values.length,c=.5/s.values.length;o.isCategory&&s.isCategory?(i=[i-l,i-l,i+l,i+l],a=[a-c,a+c,a+c,a-c]):Bp(i)?(i=[(n=i)[0],n[0],n[1],n[1]],a=[a-c/2,a+c/2,a+c/2,a-c/2]):Bp(a)&&(a=[(n=a)[0],n[1],n[1],n[0]],i=[i-l/2,i-l/2,i+l/2,i+l/2]),r.x=i,r.y=a}return r},t}(r_);Qk("schema",{defaultShapeType:""});var uI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return kp(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=DT(this.coordinate)):(this.defaultSize||(this.defaultSize=rI(this)),n=this.defaultSize);return r.size=n,r},t}(r_);Qk("violin",{defaultShapeType:"violin",getDefaultPoints:function(e){var t=e.size/2,n=[],r=function(e){if(!Bp(e))return[];var t=Xp(e);return Gd(e,(function(e){return e/t}))}(e._size);return Hp(e.y,(function(i,a){var o=r[a]*t,s=0===a,l=a===e.y.length-1;n.push({isMin:s,isMax:l,x:e.x-o,y:i}),n.unshift({isMin:s,isMax:l,x:e.x+o,y:i})})),n}}),Zk("violin","violin",{draw:function(e,t){var n=k_(e,!0,!0),r=this.parsePath(T_(e.points));return t.addShape("path",{attrs:_p(_p({},n),{path:r}),name:"violin"})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:e.color}}}});var hI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return kp(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=DT(this.coordinate)):(this.defaultSize||(this.defaultSize=rI(this)),n=this.defaultSize);return r.size=n,r._size=Yd(t._origin,[this._sizeField]),r},t.prototype.initAttributes=function(){var t=this.attributeOption,n=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete t.size,e.prototype.initAttributes.call(this)},t}(r_);function pI(e,t){return["C",1*e.x/2+1*t.x/2,e.y,1*e.x/2+1*t.x/2,t.y,t.x,t.y]}function dI(e,t){var n=[];n.push({x:t.x,y:t.y}),n.push(e);var r=["Q"];return Hp(n,(function(e){r.push(e.x,e.y)})),r}Zk("area","line",{draw:function(e,t){var n=VO(e,!0,!1,this);return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,stroke:e.color,fill:null}}}}),Zk("area","smooth",{draw:function(e,t){var n=VO(e,!1,!0,this,WO(this.coordinate));return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,fill:e.color}}}}),Zk("area","smooth-line",{draw:function(e,t){var n=VO(e,!0,!0,this,WO(this.coordinate));return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,stroke:e.color,fill:null}}}}),Zk("edge","arc",{draw:function(e,t){var n,r=k_(e,!0,!1,"lineWidth"),i=e.points,a=i.length>2?"weight":"normal";if(e.isInCircle){var o={x:0,y:1};return"normal"===a?n=function(e,t,n){var r=dI(t,n),i=[["M",e.x,e.y]];return i.push(r),i}(i[0],i[1],o):(r.fill=r.stroke,n=function(e,t){var n=dI(e[1],t),r=dI(e[3],t),i=[["M",e[0].x,e[0].y]];return i.push(r),i.push(["L",e[3].x,e[3].y]),i.push(["L",e[2].x,e[2].y]),i.push(n),i.push(["L",e[1].x,e[1].y]),i.push(["L",e[0].x,e[0].y]),i.push(["Z"]),i}(i,o)),n=this.parsePath(n),t.addShape("path",{attrs:_p(_p({},r),{path:n})})}if("normal"===a)return n=IT(((i=this.parsePoints(i))[1].x+i[0].x)/2,i[0].y,Math.abs(i[1].x-i[0].x)/2,Math.PI,2*Math.PI),t.addShape("path",{attrs:_p(_p({},r),{path:n})});var s=pI(i[1],i[3]),l=pI(i[2],i[0]);return n=[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],s,["L",i[3].x,i[3].y],["L",i[2].x,i[2].y],l,["Z"]],n=this.parsePath(n),r.fill=r.stroke,t.addShape("path",{attrs:_p(_p({},r),{path:n})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),Zk("edge","smooth",{draw:function(e,t){var n=k_(e,!0,!1,"lineWidth"),r=e.points,i=this.parsePath(function(e,t){var n=pI(e,t),r=[["M",e.x,e.y]];return r.push(n),r}(r[0],r[1]));return t.addShape("path",{attrs:_p(_p({},n),{path:i})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});Zk("edge","vhv",{draw:function(e,t){var n=k_(e,!0,!1,"lineWidth"),r=e.points,i=this.parsePath(function(e,t){var n=[];n.push({x:e.x,y:.6666666666666667*e.y+.3333333333333333*t.y}),n.push({x:t.x,y:.6666666666666667*e.y+.3333333333333333*t.y}),n.push(t);var r=[["M",e.x,e.y]];return Hp(n,(function(e){r.push(["L",e.x,e.y])})),r}(r[0],r[1]));return t.addShape("path",{attrs:_p(_p({},n),{path:i})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),Zk("interval","funnel",{getPoints:function(e){return e.size=2*e.size,QO(e)},draw:function(e,t){var n=k_(e,!1,!0),r=this.parsePath(tI(e.points,e.nextPoints,!1));return t.addShape("path",{attrs:_p(_p({},n),{path:r}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),Zk("interval","hollow-rect",{draw:function(e,t){var n=k_(e,!0,!1),r=t,i=null==e?void 0:e.background;if(i){r=t.addGroup();var a=__(e),o=eI(e,this.parsePoints(e.points),this.coordinate);r.addShape("path",{attrs:_p(_p({},a),{path:o}),zIndex:-1,name:"element-background"})}var s=this.parsePath(ZO(e.points)),l=r.addShape("path",{attrs:_p(_p({},n),{path:s}),name:"interval"});return i?r:l},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}}),Zk("interval","line",{getPoints:function(e){return n=(t=e).x,r=t.y,i=t.y0,Bp(r)?r.map((function(e,t){return{x:Bp(n)?n[t]:n,y:e}})):[{x:n,y:i},{x:n,y:r}];var t,n,r,i},draw:function(e,t){var n=k_(e,!0,!1,"lineWidth"),r=LT(_p({},n),["fill"]),i=this.parsePath(ZO(e.points,!1));return t.addShape("path",{attrs:_p(_p({},r),{path:i}),name:"interval"})},getMarker:function(e){return{symbol:function(e,t,n){return[["M",e,t-n],["L",e,t+n]]},style:{r:5,stroke:e.color}}}}),Zk("interval","pyramid",{getPoints:function(e){return e.size=2*e.size,QO(e)},draw:function(e,t){var n=k_(e,!1,!0),r=this.parsePath(tI(e.points,e.nextPoints,!0));return t.addShape("path",{attrs:_p(_p({},n),{path:r}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),Zk("interval","tick",{getPoints:function(e){return function(e){var t,n,r=e.x,i=e.y,a=e.y0,o=e.size;Bp(i)?(t=i[0],n=i[1]):(t=a,n=i);var s=r+o/2,l=r-o/2;return[{x:r,y:t},{x:r,y:n},{x:l,y:t},{x:s,y:t},{x:l,y:n},{x:s,y:n}]}(e)},draw:function(e,t){var n,r=k_(e,!0,!1),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y]]);return t.addShape("path",{attrs:_p(_p({},r),{path:i}),name:"interval"})},getMarker:function(e){return{symbol:function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},style:{r:5,stroke:e.color}}}});function fI(e,t){var n=w_(e.points,e.connectNulls,e.showSinglePoint),r=[];return Hp(n,(function(e){var n=function(e,t){var n=[];return Hp(e,(function(r,i){var a=e[i+1];if(n.push(r),a){var o=function(e,t,n){var r,i=e.x,a=e.y,o=t.x,s=t.y;switch(n){case"hv":r=[{x:o,y:a}];break;case"vh":r=[{x:i,y:s}];break;case"hvh":var l=(o+i)/2;r=[{x:l,y:a},{x:l,y:s}];break;case"vhv":var c=(a+s)/2;r=[{x:i,y:c},{x:o,y:c}]}return r}(r,a,t);n=n.concat(o)}})),n}(e,t);r=r.concat(function(e){return e.map((function(e,t){return 0===t?["M",e.x,e.y]:["L",e.x,e.y]}))}(n))})),_p(_p({},k_(e,!0,!1,"lineWidth")),{path:r})}function mI(e){var t=Bp(e)?e:[e],n=t[0],r=t[t.length-1],i=t.length>1?t[1]:n;return{min:n,max:r,min1:i,max1:t.length>3?t[3]:r,median:t.length>2?t[2]:i}}function gI(e,t,n){var r,i=n/2;if(Bp(t)){var a=mI(t),o=a.min,s=a.max,l=a.median,c=a.min1,u=e-i,h=e+i;r=[[u,s],[h,s],[e,s],[e,p=a.max1],[u,c],[u,p],[h,p],[h,c],[e,c],[e,o],[u,o],[h,o],[u,l],[h,l]]}else{t=Dp(t)?.5:t;var p,d=mI(e),f=(o=d.min,s=d.max,l=d.median,t-i),m=t+i;r=[[o,f],[o,m],[o,t],[c=d.min1,t],[c,f],[c,m],[p=d.max1,m],[p,f],[p,t],[s,t],[s,f],[s,m],[l,f],[l,m]]}return r.map((function(e){return{x:e[0],y:e[1]}}))}function vI(e){var t=(Bp(e)?e:[e]).sort((function(e,t){return t-e}));return function(e,t,n){if(ed(e))return e.padEnd(t,n);if(Bp(e)){var r=e.length;if(r<t)for(var i=t-r,a=0;a<i;a++)e.push(n)}return e}(t,4,t[t.length-1])}function yI(e,t,n){var r=vI(t);return[{x:e,y:r[0]},{x:e,y:r[1]},{x:e-n/2,y:r[2]},{x:e-n/2,y:r[1]},{x:e+n/2,y:r[1]},{x:e+n/2,y:r[2]},{x:e,y:r[2]},{x:e,y:r[3]}]}function xI(e,t){var n=Math.abs(e[0].x-e[2].x),r=Math.abs(e[0].y-e[2].y),i=Math.min(n,r);return t&&(i=ud(t,0,Math.min(n,r))),i/=2,{x:(e[0].x+e[2].x)/2-i,y:(e[0].y+e[2].y)/2-i,width:2*i,height:2*i}}Hp(["hv","vh","hvh","vhv"],(function(e){Zk("line",e,{draw:function(t,n){var r=fI(t,e);return n.addShape({type:"path",attrs:r,name:"line"})},getMarker:function(t){return I_(t,e)}})})),Hp(["cross","tick","plus","hyphen","line"],(function(e){Zk("point",e,{draw:function(t,n){return sI(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:m_[e],style:{r:4.5,stroke:n,fill:null}}}})})),Zk("point","image",{draw:function(e,t){var n=k_(e,!1,!1,"r").r,r=this.parsePoints(e.points),i=r[0];if(e.isStack)i=r[1];else if(r.length>1){for(var a=t.addGroup(),o=0,s=r;o<s.length;o++){var l=s[o];a.addShape("image",{attrs:{x:l.x-n/2,y:l.y-n,width:n,height:n,img:e.shape[1]}})}return a}return t.addShape("image",{attrs:{x:i.x-n/2,y:i.y-n,width:n,height:n,img:e.shape[1]}})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),Hp(oI,(function(e){Zk("point",e,{draw:function(t,n){return sI(this,t,n,e,!1)},getMarker:function(t){var n=t.color;return{symbol:m_[e]||e,style:{r:4.5,fill:n}}}})})),Zk("schema","box",{getPoints:function(e){return gI(e.x,e.y,e.size)},draw:function(e,t){var n,r=k_(e,!0,!1),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y],["L",n[6].x,n[6].y],["L",n[7].x,n[7].y],["L",n[4].x,n[4].y],["Z"],["M",n[8].x,n[8].y],["L",n[9].x,n[9].y],["M",n[10].x,n[10].y],["L",n[11].x,n[11].y],["M",n[12].x,n[12].y],["L",n[13].x,n[13].y]]);return t.addShape("path",{attrs:_p(_p({},r),{path:i,name:"schema"})})},getMarker:function(e){return{symbol:function(e,t,n){var r=gI(e,[t-6,t-3,t,t+3,t+6],n);return[["M",r[0].x+1,r[0].y],["L",r[1].x-1,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x+1,r[10].y],["L",r[11].x-1,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]},style:{r:6,lineWidth:1,stroke:e.color}}}}),Zk("schema","candle",{getPoints:function(e){return yI(e.x,e.y,e.size)},draw:function(e,t){var n,r=k_(e,!0,!0),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[4].x,n[4].y],["L",n[5].x,n[5].y],["Z"],["M",n[6].x,n[6].y],["L",n[7].x,n[7].y]]);return t.addShape("path",{attrs:_p(_p({},r),{path:i,name:"schema"})})},getMarker:function(e){var t=e.color;return{symbol:function(e,t,n){var r=yI(e,[t+7.5,t+3,t-3,t-7.5],n);return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}}),Zk("polygon","square",{draw:function(e,t){if(!zd(e.points)){var n=k_(e,!0,!0),r=this.parsePoints(e.points);return t.addShape("rect",{attrs:_p(_p({},n),xI(r,e.size)),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),Zk("violin","smooth",{draw:function(e,t){var n=k_(e,!0,!0),r=this.parsePath(S_(e.points));return t.addShape("path",{attrs:_p(_p({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{stroke:null,r:4,fill:e.color}}}}),Zk("violin","hollow",{draw:function(e,t){var n=k_(e,!0,!1),r=this.parsePath(T_(e.points));return t.addShape("path",{attrs:_p(_p({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:null,stroke:e.color}}}}),Zk("violin","hollow-smooth",{draw:function(e,t){var n=k_(e,!0,!1),r=this.parsePath(S_(e.points));return t.addShape("path",{attrs:_p(_p({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:null,stroke:e.color}}}});var EI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getLabelValueDir=function(e){var t=e.points;return t[0].y<=t[2].y?1:-1},t.prototype.getLabelOffsetPoint=function(t,n,r,i){var a,o=e.prototype.getLabelOffsetPoint.call(this,t,n,r),s=this.getCoordinate(),l=s.isTransposed?"x":"y",c=this.getLabelValueDir(t.mappingData);return o=_p(_p({},o),((a={})[l]=o[l]*c,a)),s.isReflect("x")&&(o=_p(_p({},o),{x:-1*o.x})),s.isReflect("y")&&(o=_p(_p({},o),{y:-1*o.y})),o},t.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.theme;return Rd({},n,r.labels,"middle"===e.position?{offset:0}:{},e)},t.prototype.setLabelPosition=function(e,t,n,r){var i,a,o,s,l=this.getCoordinate(),c=l.isTransposed,u=t.points,h=l.convert(u[0]),p=l.convert(u[2]),d=this.getLabelValueDir(t),f=Bp(t.shape)?t.shape[0]:t.shape;if("funnel"===f||"pyramid"===f){var m=Yd(t,"nextPoints"),g=Yd(t,"points");if(m){var v=l.convert(g[0]),y=l.convert(g[1]),x=l.convert(m[0]),E=l.convert(m[1]);c?(i=Math.min(x.y,v.y),o=Math.max(x.y,v.y),a=(y.x+E.x)/2,s=(v.x+x.x)/2):(i=Math.min((y.y+E.y)/2,(v.y+x.y)/2),o=Math.max((y.y+E.y)/2,(v.y+x.y)/2),a=E.x,s=v.x)}else i=Math.min(p.y,h.y),o=Math.max(p.y,h.y),a=p.x,s=h.x}else i=Math.min(p.y,h.y),o=Math.max(p.y,h.y),a=p.x,s=h.x;switch(r){case"right":e.x=a,e.y=(i+o)/2,e.textAlign=Yd(e,"textAlign",d>0?"left":"right");break;case"left":e.x=s,e.y=(i+o)/2,e.textAlign=Yd(e,"textAlign",d>0?"left":"right");break;case"bottom":c&&(e.x=(a+s)/2),e.y=o,e.textAlign=Yd(e,"textAlign","center"),e.textBaseline=Yd(e,"textBaseline",d>0?"bottom":"top");break;case"middle":c&&(e.x=(a+s)/2),e.y=(i+o)/2,e.textAlign=Yd(e,"textAlign","center"),e.textBaseline=Yd(e,"textBaseline","middle");break;case"top":c&&(e.x=(a+s)/2),e.y=i,e.textAlign=Yd(e,"textAlign","center"),e.textBaseline=Yd(e,"textBaseline",d>0?"bottom":"top")}},t}(d_),bI=Math.PI/2,CI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=0;if(pd(e))n=e;else if(ed(e)&&-1!==e.indexOf("%")){var r=t.getRadius();t.innerRadius>0&&(r*=1-t.innerRadius),n=.01*parseFloat(e)*r}return n},t.prototype.getLabelItems=function(t){var n=e.prototype.getLabelItems.call(this,t),r=this.geometry.getYScale();return Gd(n,(function(e){if(e&&r){var t=r.scale(Yd(e.data,r.field));return _p(_p({},e),{percent:t})}return e}))},t.prototype.getLabelAlign=function(e){var t,n=this.getCoordinate();if(e.labelEmit)t=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?"left":"right";else if(n.isTransposed){var r=n.getCenter(),i=e.offset;t=Math.abs(e.x-r.x)<1?"center":e.angle>Math.PI||e.angle<=0?i>0?"left":"right":i>0?"right":"left"}else t="center";return t},t.prototype.getLabelPoint=function(e,t,n){var r,i=1,a=e.content[n];this.isToMiddle(t)?r=this.getMiddlePoint(t.points):(1===e.content.length&&0===n?n=1:0===n&&(i=-1),r=this.getArcPoint(t,n));var o=e.offset*i,s=this.getPointAngle(r),l=e.labelEmit,c=this.getCirclePoint(s,o,r,l);return 0===c.r?c.content="":(c.content=a,c.angle=s,c.color=t.color),c.rotate=e.autoRotate?this.getLabelRotate(s,o,l):e.rotate,c.start={x:r.x,y:r.y},c},t.prototype.getArcPoint=function(e,t){return void 0===t&&(t=0),Bp(e.x)||Bp(e.y)?{x:Bp(e.x)?e.x[t]:e.x,y:Bp(e.y)?e.y[t]:e.y}:{x:e.x,y:e.y}},t.prototype.getPointAngle=function(e){return HT(this.getCoordinate(),e)},t.prototype.getCirclePoint=function(e,t,n,r){var i=this.getCoordinate(),a=i.getCenter(),o=BT(i,n);if(0===o)return _p(_p({},a),{r:o});var s=e;i.isTransposed&&o>t&&!r?s=e+2*Math.asin(t/(2*o)):o+=t;return{x:a.x+o*Math.cos(s),y:a.y+o*Math.sin(s),r:o}},t.prototype.getLabelRotate=function(e,t,n){var r=e+bI;return n&&(r-=bI),r&&(r>bI?r-=Math.PI:r<-bI&&(r+=Math.PI)),r},t.prototype.getMiddlePoint=function(e){var t=this.getCoordinate(),n=e.length,r={x:0,y:0};return Hp(e,(function(e){r.x+=e.x,r.y+=e.y})),r.x/=n,r.y/=n,r=t.convert(r)},t.prototype.isToMiddle=function(e){return e.x.length>2},t}(d_),wI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return kp(t,e),t.prototype.getDefaultLabelCfg=function(t,n){var r=e.prototype.getDefaultLabelCfg.call(this,t,n);return Rd({},r,Yd(this.geometry.theme,"pieLabels",{}))},t.prototype.getLabelOffset=function(t){return e.prototype.getLabelOffset.call(this,t)||0},t.prototype.getLabelRotate=function(e,t,n){var r;return t<0&&((r=e)>Math.PI/2&&(r-=Math.PI),r<-Math.PI/2&&(r+=Math.PI)),r},t.prototype.getLabelAlign=function(e){var t,n=this.getCoordinate().getCenter();return t=e.angle<=Math.PI/2&&e.x>=n.x?"left":"right",e.offset<=0&&(t="right"===t?"left":"right"),t},t.prototype.getArcPoint=function(e){return e},t.prototype.getPointAngle=function(e){var t,n=this.getCoordinate(),r={x:Bp(e.x)?e.x[0]:e.x,y:e.y[0]},i={x:Bp(e.x)?e.x[1]:e.x,y:e.y[1]},a=HT(n,r);if(e.points&&e.points[0].y===e.points[1].y)t=a;else{var o=HT(n,i);a>=o&&(o+=2*Math.PI),t=a+(o-a)/2}return t},t.prototype.getCirclePoint=function(e,t){var n=this.getCoordinate(),r=n.getCenter(),i=n.getRadius()+t;return _p(_p({},AT(r.x,r.y,i,e)),{angle:e,r:i})},t}(CI);function TI(e,t,n){var r=e.filter((function(e){return!e.invisible}));r.sort((function(e,t){return e.y-t.y}));var i,a=!0,o=n.minY,s=n.maxY,l=Math.abs(o-s),c=0,u=Number.MIN_VALUE,h=r.map((function(e){return e.y>c&&(c=e.y),e.y<u&&(u=e.y),{content:e.content,size:t,targets:[e.y-o],pos:null}}));for(u-=o,c-o>l&&(l=c-o);a;)for(h.forEach((function(e){var t=(Math.min.apply(u,e.targets)+Math.max.apply(u,e.targets))/2;e.pos=Math.min(Math.max(u,t-e.size/2),l-e.size),e.pos=Math.max(0,e.pos)})),a=!1,i=h.length;i--;)if(i>0){var p=h[i-1],d=h[i];p.pos+p.size>d.pos&&(p.size+=d.size,p.targets=p.targets.concat(d.targets),p.pos+p.size>l&&(p.pos=l-p.size),h.splice(i,1),a=!0)}i=0,h.forEach((function(e){var n=o+t/2;e.targets.forEach((function(){r[i].y=e.pos+n,n+=t,i++}))}))}var SI=function(){function e(e){void 0===e&&(e={}),this.bitmap={};var t=e.xGap,n=void 0===t?1:t,r=e.yGap,i=void 0===r?8:r;this.xGap=n,this.yGap=i}return e.prototype.hasGap=function(e){for(var t=!0,n=this.bitmap,r=Math.round(e.minX),i=Math.round(e.maxX),a=Math.round(e.minY),o=Math.round(e.maxY),s=r;s<=i;s+=1)if(n[s]){if(s===r||s===i){for(var l=a;l<=o;l++)if(n[s][l]){t=!1;break}}else if(n[s][a]||n[s][o]){t=!1;break}}else n[s]={};return t},e.prototype.fillGap=function(e){for(var t=this.bitmap,n=Math.round(e.minX),r=Math.round(e.maxX),i=Math.round(e.minY),a=Math.round(e.maxY),o=n;o<=r;o+=1)t[o]||(t[o]={});for(o=n;o<=r;o+=this.xGap){for(var s=i;s<=a;s+=this.yGap)t[o][s]=!0;t[o][a]=!0}if(1!==this.yGap)for(o=i;o<=a;o+=1)t[n][o]=!0,t[r][o]=!0;if(1!==this.xGap)for(o=n;o<=r;o+=1)t[o][i]=!0,t[o][a]=!0},e.prototype.destroy=function(){this.bitmap={}},e}();function kI(e,t,n,r){var i=e.getCanvasBBox(),a=i.width,o=i.height,s={x:t,y:n,textAlign:"center"};switch(r){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=2*o+2;break;case 6:s.y+=2*o+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right"}return e.attr(s),e.getCanvasBBox()}var _I=Ym;function AI(e){if(e.length>4)return[];var t=function(e,t){return[t.x-e.x,t.y-e.y]};return[t(e[0],e[1]),t(e[1],e[2])]}function OI(e,t,n){void 0===t&&(t=0),void 0===n&&(n={x:0,y:0});var r=e.x,i=e.y;return{x:(r-n.x)*Math.cos(-t)+(i-n.y)*Math.sin(-t)+n.x,y:(n.x-r)*Math.sin(-t)+(i-n.y)*Math.cos(-t)+n.y}}function II(e){var t=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=e.rotation;return n?[OI(t[0],n,t[0]),OI(t[1],n,t[0]),OI(t[2],n,t[0]),OI(t[3],n,t[0])]:t}function MI(e,t){if(e.length>4)return{min:0,max:0};var n=[];return e.forEach((function(e){n.push(_I([e.x,e.y],t))})),{min:Math.min.apply(Math,n),max:Math.max.apply(Math,n)}}function NI(e,t){return e.max>t.min&&e.min<t.max}function FI(e){return pd(e)&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0}function LI(e){return Object.values(e).every(FI)}function PI(e,t){if(!LI(e)||!LI(t))return!1;if(!e.rotation&&!t.rotation)return function(e,t,n){return void 0===n&&(n=0),!(t.x>e.x+e.width+n||t.x+t.width<e.x-n||t.y>e.y+e.height+n||t.y+t.height<e.y-n)}(e,t);for(var n=II(e),r=II(t),i=Ip(Ip([],AI(n),!0),AI(r),!0),a=0;a<i.length;a++){var o=i[a];if(!NI(MI(n,o),MI(r,o)))return!1}return!0}var RI,DI={"#5B8FF9":!0};function BI(e,t,n){return!!e.getAdjust("stack")||t.every((function(t,r){var i=n[r];return function(e,t,n){var r=e.coordinate,i=s_(t),a=RT.fromObject(i.getCanvasBBox()),o=RT.fromObject(n.getBBox());return r.isTransposed?o.height>=a.height:o.width>=a.width}(e,t,i)}))}function zI(e,t,n){return e.some((function(e){return n(e,t)}))}function HI(e,t){return zI(e,t,(function(e,t){var n,r,i,a=s_(e),o=s_(t);return n=a.getCanvasBBox(),r=o.getCanvasBBox(),void 0===(i=2)&&(i=0),Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}function jI(e,t,n){return e.some((function(e){return n(e,t)}))}function GI(e,t){return jI(e,t,(function(e,t){var n,r,i,a=s_(e),o=s_(t);return n=a.getCanvasBBox(),r=o.getCanvasBBox(),void 0===(i=2)&&(i=0),Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}var $I=Ld((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant,s=(RI||(RI=document.createElement("canvas").getContext("2d")),RI);return s.font=[a,o,i,"".concat(n,"px"),r].join(" "),s.measureText(ed(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Ip([e],xd(t),!0).join("")}));function YI(e,t,n,r,i){var a,o,s=n.start,l=n.end,c=n.getWidth(),u=n.getHeight();"y"===i?(a=s.x+c/2,o=r.y<s.y?r.y:s.y):"x"===i?(a=r.x>s.x?r.x:s.x,o=s.y+u/2):"xy"===i&&(n.isPolar?(a=n.getCenter().x,o=n.getCenter().y):(a=(s.x+l.x)/2,o=(s.y+l.y)/2));var h=function(e,t,n){var r,i=t[0],a=t[1];return e.applyToMatrix([i,a,1]),"x"===n?(e.setMatrix(Qm(e.getMatrix(),[["t",-i,-a],["s",.01,1],["t",i,a]])),r=Qm(e.getMatrix(),[["t",-i,-a],["s",100,1],["t",i,a]])):"y"===n?(e.setMatrix(Qm(e.getMatrix(),[["t",-i,-a],["s",1,.01],["t",i,a]])),r=Qm(e.getMatrix(),[["t",-i,-a],["s",1,100],["t",i,a]])):"xy"===n&&(e.setMatrix(Qm(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])),r=Qm(e.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])),r}(e,[a,o],i);e.animate({matrix:h},t)}function UI(e,t){var n,r=aA(e,t),i=r.startAngle,a=r.endAngle;return!dd(i,.5*-Math.PI)&&i<.5*-Math.PI&&(i+=2*Math.PI),!dd(a,.5*-Math.PI)&&a<.5*-Math.PI&&(a+=2*Math.PI),0===t[5]&&(i=(n=[a,i])[0],a=n[1]),dd(i,1.5*Math.PI)&&(i=-.5*Math.PI),dd(a,-.5*Math.PI)&&(a=1.5*Math.PI),{startAngle:i,endAngle:a}}function VI(e){var t;return"M"===e[0]||"L"===e[0]?t=[e[1],e[2]]:"a"!==e[0]&&"A"!==e[0]&&"C"!==e[0]||(t=[e[e.length-2],e[e.length-1]]),t}function WI(e){var t,n,r,i=e.filter((function(e){return"A"===e[0]||"a"===e[0]}));if(0===i.length)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var a=i[0],o=i.length>1?i[1]:i[0],s=e.indexOf(a),l=e.indexOf(o),c=VI(e[s-1]),u=VI(e[l-1]),h=UI(c,a),p=h.startAngle,d=h.endAngle,f=UI(u,o),m=f.startAngle,g=f.endAngle;dd(p,m)&&dd(d,g)?(n=p,r=d):(n=Math.min(p,m),r=Math.max(d,g));var v=a[1],y=i[i.length-1][1];return v<y?(v=(t=[y,v])[0],y=t[1]):v===y&&(y=0),{startAngle:n,endAngle:r,radius:v,innerRadius:y}}function XI(e,t,n){if(e.isGroup())Hp(e.getChildren(),(function(e){XI(e,t,n)}));else{var r=e.getBBox(),i=(r.minX+r.maxX)/2,a=(r.minY+r.maxY)/2;if(e.applyToMatrix([i,a,1]),"zoomIn"===n){var o=Qm(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);e.setMatrix(o),e.animate({matrix:Qm(e.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},t)}else e.animate({matrix:Qm(e.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},_p(_p({},t),{callback:function(){e.remove(!0)}}))}}function qI(e){return[nf.TOP,nf.BOTTOM].includes(e)?{offsetX:0,offsetY:e===nf.TOP?-8:8,style:{textAlign:"center",textBaseline:e===nf.TOP?"bottom":"top"}}:[nf.LEFT,nf.RIGHT].includes(e)?{offsetX:e===nf.LEFT?-8:8,offsetY:0,style:{textAlign:e===nf.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function KI(e,t,n){return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}var QI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){return Rd({},e.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.getRegion=function(e,t){var n=2*Math.PI/e,r=-1*Math.PI/2+n*t,i=.5/(1+1/Math.sin(n/2)),a=KI({x:.5,y:.5},.5-i,r),o=5*Math.PI/4,s=1*Math.PI/4;return{start:KI(a,i,o),end:KI(a,i,s)}},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg,r=n.fields,i=n.type,a=r[0];if(!a)throw new Error("No `fields` specified!");var o=this.getFieldValues(e,a),s=o.length,l=[];return o.forEach((function(n,r){var c=[{field:a,value:n,values:o}],u=Fp(e,t.getFacetDataFilter(c)),h={type:i,data:u,region:t.getRegion(s,r),columnValue:n,columnField:a,columnIndex:r,columnValuesLength:s,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};l.push(h)})),l},t.prototype.getXAxisOption=function(e,t,n,r){return n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;Hp(this.facets,(function(t){var n=t.columnValue,r=t.view,i=Yd(e.cfg.title,"formatter"),a=Rd({position:["50%","0%"],content:i?i(n):n},qI(nf.TOP),e.cfg.title);r.annotation().text(a)}))},t}(tS),ZI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){return Rd({},e.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg.fields,r=this.cfg.cols,i=n[0];if(!i)throw new Error("No `fields` specified!");var a=this.getFieldValues(e,i),o=a.length;r=r||o;var s=this.getPageCount(o,r),l=[];return a.forEach((function(n,c){var u=t.getRowCol(c,r),h=u.row,p=u.col,d=[{field:i,value:n,values:a}],f=Fp(e,t.getFacetDataFilter(d)),m={type:t.cfg.type,data:f,region:t.getRegion(s,r,p,h),columnValue:n,rowValue:n,columnField:i,rowField:null,columnIndex:p,rowIndex:h,columnValuesLength:r,rowValuesLength:s,total:o};l.push(m)})),l},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1&&r.columnValuesLength*r.rowIndex+r.columnIndex+1+r.columnValuesLength<=r.total?_p(_p({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?_p(_p({},n),{title:null,label:null}):n},t.prototype.renderTitle=function(){var e=this;Hp(this.facets,(function(t){var n=t.columnValue,r=t.view,i=Yd(e.cfg.title,"formatter"),a=Rd({position:["50%","0%"],content:i?i(n):n},qI(nf.TOP),e.cfg.title);r.annotation().text(a)}))},t.prototype.getPageCount=function(e,t){return Math.floor((e+t-1)/t)},t.prototype.getRowCol=function(e,t){return{row:Math.floor(e/t),col:e%t}},t}(tS),JI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){return Rd({},e.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:_p({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:_p({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){for(var t=this.cfg,n=t.fields,r=t.type,i=n.length,a=i,o=[],s=0;s<a;s++)for(var l=n[s],c=0;c<i;c++){var u=n[c],h={type:r,data:e,region:this.getRegion(i,a,s,c),columnValue:l,rowValue:u,columnField:l,rowField:u,columnIndex:s,rowIndex:c,columnValuesLength:a,rowValuesLength:i};o.push(h)}return o},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?_p(_p({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?_p(_p({},n),{title:null,label:null}):n},t.prototype.renderTitle=function(){var e=this;Hp(this.facets,(function(t,n){var r=t.columnIndex,i=t.rowIndex,a=t.columnValuesLength;t.rowValuesLength;var o=t.columnValue,s=t.rowValue,l=t.view;if(0===i){var c=Yd(e.cfg.columnTitle,"formatter"),u=Rd({position:["50%","0%"],content:c?c(o):o},qI(nf.TOP),e.cfg.columnTitle);l.annotation().text(u)}if(r===a-1){c=Yd(e.cfg.rowTitle,"formatter"),u=Rd({position:["100%","50%"],content:c?c(s):s},qI(nf.RIGHT),e.cfg.rowTitle);l.annotation().text(u)}}))},t}(tS),eM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getDefaultCfg=function(){return Rd({},e.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this),transpose:!1})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.beforeEachView=function(e,t){this.cfg.transpose?t.columnIndex%2==0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():t.rowIndex%2!=0&&e.coordinate().reflect("y")},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.generateFacets=function(e){var t,n,r=this,i=this.cfg.fields[0],a=[],o=1,s=1,l=[""],c=[""];return this.cfg.transpose?(t=i,l=this.getFieldValues(e,t).slice(0,2),o=l.length):(n=i,c=this.getFieldValues(e,n).slice(0,2),s=c.length),l.forEach((function(i,u){c.forEach((function(h,p){var d=[{field:t,value:i,values:l},{field:n,value:h,values:c}],f=Fp(e,r.getFacetDataFilter(d)),m={type:r.cfg.type,data:f,region:r.getRegion(s,o,u,p),columnValue:i,rowValue:h,columnField:t,rowField:n,columnIndex:u,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(m)}))})),a},t.prototype.getXAxisOption=function(e,t,n,r){return 1===r.columnIndex||1===r.rowIndex?_p(_p({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;Hp(this.facets,(function(t,n){var r=t.columnValue,i=t.rowValue,a=t.view,o=Yd(e.cfg.title,"formatter");if(e.cfg.transpose){var s=Rd({position:["50%","0%"],content:o?o(r):r},qI(nf.TOP),e.cfg.title);a.annotation().text(s)}else{s=Rd({position:["100%","50%"],content:o?o(i):i},qI(nf.RIGHT),e.cfg.title);a.annotation().text(s)}}))},t}(tS),tM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.getDefaultCfg=function(){return Rd({},e.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:_p({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:_p({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.generateFacets=function(e){var t=this,n=this.cfg.fields,r=n[0],i=n[1],a=[],o=1,s=1,l=[""],c=[""];return r&&(l=this.getFieldValues(e,r),o=l.length),i&&(c=this.getFieldValues(e,i),s=c.length),l.forEach((function(n,u){c.forEach((function(h,p){var d=[{field:r,value:n,values:l},{field:i,value:h,values:c}],f=Fp(e,t.getFacetDataFilter(d)),m={type:t.cfg.type,data:f,region:t.getRegion(s,o,u,p),columnValue:n,rowValue:h,columnField:r,rowField:i,columnIndex:u,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(m)}))})),a},t.prototype.renderTitle=function(){var e=this;Hp(this.facets,(function(t,n){var r=t.columnIndex,i=t.rowIndex,a=t.columnValuesLength,o=t.columnValue,s=t.rowValue,l=t.view;if(0===i){var c=Yd(e.cfg.columnTitle,"formatter"),u=Rd({position:["50%","0%"],content:c?c(o):o},qI(nf.TOP),e.cfg.columnTitle);l.annotation().text(u)}if(r===a-1){c=Yd(e.cfg.rowTitle,"formatter"),u=Rd({position:["100%","50%"],content:c?c(s):s},qI(nf.RIGHT),e.cfg.rowTitle);l.annotation().text(u)}}))},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?_p(_p({},n),{title:null,label:null}):r.columnIndex!==Math.floor((r.columnValuesLength-1)/2)?_p(_p({},n),{title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?_p(_p({},n),{title:null,label:null}):r.rowIndex!==Math.floor((r.rowValuesLength-1)/2)?_p(_p({},n),{title:null}):n},t}(tS),nM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return kp(t,e),t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.init=function(){e.prototype.init.call(this),this.view.on(cf.AFTER_RENDER,this.afterChartRender)},t.prototype.getDefaultCfg=function(){return Rd({},e.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.generateFacets=function(e){if(!this.cfg.fields.length)throw new Error("Please specify for the fields for rootFacet!");var t=[],n={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return t.push(n),n.children=this.getChildFacets(e,1,t),this.setRegion(t),t},t.prototype.setRegion=function(e){var t=this;this.forceColIndex(e),e.forEach((function(e){e.region=t.getRegion(e.rowValuesLength,e.columnValuesLength,e.columnIndex,e.rowIndex)}))},t.prototype.getRegion=function(e,t,n,r){var i=1/t,a=1/e,o={x:i*n,y:a*r};return{start:o,end:{x:o.x+i,y:o.y+2*a/3}}},t.prototype.forceColIndex=function(e){var t=this,n=[],r=0;e.forEach((function(e){t.isLeaf(e)&&(n.push(e),e.columnIndex=r,r++)})),n.forEach((function(e){e.columnValuesLength=n.length}));for(var i=this.cfg.fields.length-1;i>=0;i--)for(var a=0,o=this.getFacetsByLevel(e,i);a<o.length;a++){var s=o[a];this.isLeaf(s)||(s.originColIndex=s.columnIndex,s.columnIndex=this.getRegionIndex(s.children),s.columnValuesLength=n.length)}},t.prototype.getFacetsByLevel=function(e,t){var n=[];return e.forEach((function(e){e.rowIndex===t&&n.push(e)})),n},t.prototype.getRegionIndex=function(e){var t=e[0];return(e[e.length-1].columnIndex-t.columnIndex)/2+t.columnIndex},t.prototype.isLeaf=function(e){return!e.children||!e.children.length},t.prototype.getRows=function(){return this.cfg.fields.length+1},t.prototype.getChildFacets=function(e,t,n){var r=this,i=this.cfg.fields;if(!(i.length<t)){var a=[],o=i[t-1],s=this.getFieldValues(e,o);return s.forEach((function(i,l){var c=[{field:o,value:i,values:s}],u=e.filter(r.getFacetDataFilter(c));if(u.length){var h={type:r.cfg.type,data:u,region:null,columnValue:i,rowValue:"",columnField:o,rowField:"",columnIndex:l,rowValuesLength:r.getRows(),columnValuesLength:1,rowIndex:t,children:r.getChildFacets(u,t+1,n)};a.push(h),n.push(h)}})),a}},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.renderTitle=function(){var e=this;Hp(this.facets,(function(t){var n=t.columnValue,r=t.view,i=Yd(e.cfg.title,"formatter"),a=Rd({position:["50%","0%"],content:i?i(n):n},qI(nf.TOP),e.cfg.title);r.annotation().text(a)}))},t.prototype.drawLines=function(e){var t=this;e.forEach((function(e){if(!t.isLeaf(e)){var n=e.children;t.addFacetLines(e,n)}}))},t.prototype.addFacetLines=function(e,t){var n=this,r=e.view.coordinateBBox,i={x:r.x+r.width/2,y:r.y+r.height};t.forEach((function(e){var t=e.view.coordinateBBox,r={x:t.bl.x+(t.tr.x-t.bl.x)/2,y:t.tr.y},a={x:i.x,y:i.y+(r.y-i.y)/2},o={x:r.x,y:a.y};n.drawLine([i,a,o,r])}))},t.prototype.getPath=function(e){var t=[];return this.cfg.line.smooth?(t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach((function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},t.prototype.drawLine=function(e){var t=this.getPath(e),n=this.cfg.line.style;this.container.addShape("path",{attrs:Md({path:t},n)})},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?_p(_p({},n),{title:null,label:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.originColIndex&&0!==r.columnIndex?_p(_p({},n),{title:null,label:null}):n},t}(tS);function rM(e){var t=Ip([],e,!0);t.sort((function(e,t){return e-t}));var n=t.length;return 0===n?0:n%2==1?t[(n-1)/2]:(t[n/2]+t[n/2-1])/2}function iM(e,t){if(!t)return null;var n,r,i;switch(e){case"start":return 0;case"center":return.5;case"end":return 1;case"median":n=t.isCategory?rM(t.values.map((function(e,t){return t}))):rM(t.values);break;case"mean":n=t.isCategory?(t.values.length-1)/2:(r=t.values,i=Zp(r,(function(e,t){return e+(isNaN(t)||!pd(t)?0:t)}),0),0===r.length?0:i/r.length);break;case"min":n=t.isCategory?0:t[e];break;case"max":n=t.isCategory?t.values.length-1:t[e];break;default:n=e}return t.scale(n)}var aM=["regionFilter","shape"],oM=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(ef.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(ef.BG).addGroup(),n.option=[],n}return kp(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.layout=function(){this.update()},t.prototype.render=function(){},t.prototype.update=function(){var e=this;this.onAfterRender((function(){var t=new Map;Hp(e.option,(function(n){if(Np(aM,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}})),e.cache=e.syncCache(t)}));var t=new Map;Hp(this.option,(function(n){if(!Np(aM,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}})),this.cache=this.syncCache(t)},t.prototype.clear=function(t){void 0===t&&(t=!1),e.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},t.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},t.prototype.clearComponents=function(){this.getComponents().forEach((function(e){e.component.destroy()})),this.cache.clear()},t.prototype.onAfterRender=function(e){this.view.getOptions().animate?this.view.geometries.forEach((function(t){t.animateOption&&t.once(hf.AFTER_DRAW_ANIMATE,(function(){e()}))})):this.view.getRootView().once(cf.AFTER_RENDER,(function(){e()}))},t.prototype.createAnnotation=function(e){var t=e.type,n=gw[wd(t)];if(n){var r=this.getAnnotationTheme(t),i=this.getAnnotationCfg(t,e,r);return{component:new n(i),layer:this.isTop(i)?ef.FORE:ef.BG,direction:nf.NONE,type:af.ANNOTATION,extra:e}}},t.prototype.annotation=function(e){this.option.push(e)},t.prototype.arc=function(e){return this.annotation(_p({type:"arc"},e)),this},t.prototype.image=function(e){return this.annotation(_p({type:"image"},e)),this},t.prototype.line=function(e){return this.annotation(_p({type:"line"},e)),this},t.prototype.region=function(e){return this.annotation(_p({type:"region"},e)),this},t.prototype.text=function(e){return this.annotation(_p({type:"text"},e)),this},t.prototype.dataMarker=function(e){return this.annotation(_p({type:"dataMarker"},e)),this},t.prototype.dataRegion=function(e){this.annotation(_p({type:"dataRegion"},e))},t.prototype.regionFilter=function(e){this.annotation(_p({type:"regionFilter"},e))},t.prototype.shape=function(e){this.annotation(_p({type:"shape"},e))},t.prototype.html=function(e){this.annotation(_p({type:"html"},e))},t.prototype.parsePosition=function(e){var t=this.view.getXScale(),n=this.view.getScalesByDim("y"),r=Rp(e)?e.call(null,t,n):e,i=0,a=0;if(Bp(r)){var o=r[0],s=r[1];if(ed(o)&&-1!==o.indexOf("%")&&!isNaN(o.slice(0,-1)))return this.parsePercentPosition(r);i=iM(o,t),a=iM(s,Object.values(n)[0])}else if(!Dp(r))for(var l=0,c=jp(r);l<c.length;l++){var u=c[l],h=r[u];u===t.field&&(i=iM(h,t)),n[u]&&(a=iM(h,n[u]))}return this.view.getCoordinate().convert({x:i,y:a})},t.prototype.getRegionPoints=function(e,t){var n,r=this,i=this.view.getXScale(),a=this.view.getScalesByDim("y"),o=Object.values(a)[0],s=i.field,l=this.view.getData(),c=Bp(e)?e[0]:e[s],u=Bp(t)?t[0]:t[s],h=[];return Hp(l,(function(e,t){if(e[s]===c&&(n=t),t>=n){var i=r.parsePosition([e[s],e[o.field]]);i&&h.push(i)}if(e[s]===u)return!1})),h},t.prototype.parsePercentPosition=function(e){var t=parseFloat(e[0])/100,n=parseFloat(e[1])/100,r=this.view.getCoordinate(),i=r.start,a=r.end,o=Math.min(i.x,a.x),s=Math.min(i.y,a.y);return{x:r.getWidth()*t+o,y:r.getHeight()*n+s}},t.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),t=e.start,n=e.end,r=e.getWidth(),i=e.getHeight(),a={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)};return{x:a.x,y:a.y,minX:a.x,minY:a.y,maxX:a.x+r,maxY:a.y+i,width:r,height:i}},t.prototype.getAnnotationCfg=function(e,t,n){var r=this,i=this.view.getCoordinate(),a=this.view.getCanvas(),o={};if(Dp(t))return null;if("arc"===e){var s=t,l=s.start,c=s.end,u=Ap(s,["start","end"]),h=this.parsePosition(l),p=this.parsePosition(c),d=HT(i,h),f=HT(i,p);d>f&&(f=2*Math.PI+f),o=_p(_p({},u),{center:i.getCenter(),radius:BT(i,h),startAngle:d,endAngle:f})}else if("image"===e){var m=t;l=m.start,c=m.end,u=Ap(m,["start","end"]);o=_p(_p({},u),{start:this.parsePosition(l),end:this.parsePosition(c),src:t.src})}else if("line"===e){var g=t;l=g.start,c=g.end,u=Ap(g,["start","end"]);o=_p(_p({},u),{start:this.parsePosition(l),end:this.parsePosition(c),text:Yd(t,"text",null)})}else if("region"===e){var v=t;l=v.start,c=v.end,u=Ap(v,["start","end"]);o=_p(_p({},u),{start:this.parsePosition(l),end:this.parsePosition(c)})}else if("text"===e){var y=this.view.getData(),x=t,E=x.position,b=x.content,C=(u=Ap(x,["position","content"]),b);Rp(b)&&(C=b(y)),o=_p(_p(_p({},this.parsePosition(E)),u),{content:C})}else if("dataMarker"===e){var w=t,T=(E=w.position,w.point),S=w.line,k=w.text,_=w.autoAdjust,A=w.direction;u=Ap(w,["position","point","line","text","autoAdjust","direction"]);o=_p(_p(_p({},u),this.parsePosition(E)),{coordinateBBox:this.getCoordinateBBox(),point:T,line:S,text:k,autoAdjust:_,direction:A})}else if("dataRegion"===e){var O=t,I=(l=O.start,c=O.end,O.region),M=(k=O.text,O.lineLength);u=Ap(O,["start","end","region","text","lineLength"]);o=_p(_p({},u),{points:this.getRegionPoints(l,c),region:I,text:k,lineLength:M})}else if("regionFilter"===e){var N=t,F=(l=N.start,c=N.end,N.apply),L=N.color,P=(u=Ap(N,["start","end","apply","color"]),this.view.geometries),R=[],D=function(e){e&&(e.isGroup()?e.getChildren().forEach((function(e){return D(e)})):R.push(e))};Hp(P,(function(e){F?Np(F,e.type)&&Hp(e.elements,(function(e){D(e.shape)})):Hp(e.elements,(function(e){D(e.shape)}))})),o=_p(_p({},u),{color:L,shapes:R,start:this.parsePosition(l),end:this.parsePosition(c)})}else if("shape"===e){var B=t,z=B.render,H=Ap(B,["render"]);o=_p(_p({},H),{render:function(e){if(Rp(t.render))return z(e,r.view,{parsePosition:r.parsePosition.bind(r)})}})}else if("html"===e){var j=t,G=j.html;E=j.position,H=Ap(j,["html","position"]);o=_p(_p(_p({},H),this.parsePosition(E)),{parent:a.get("el").parentNode,html:function(e){return Rp(G)?G(e,r.view):G}})}var $=Rd({},n,_p(_p({},o),{top:t.top,style:t.style,offsetX:t.offsetX,offsetY:t.offsetY}));return"html"!==e&&($.container=this.getComponentContainer($)),$.animate=this.view.getOptions().animate&&$.animate&&Yd(t,"animate",$.animate),$.animateOption=Rd({},Bk,$.animateOption,t.animateOption),$},t.prototype.isTop=function(e){return Yd(e,"top",!0)},t.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},t.prototype.getAnnotationTheme=function(e){return Yd(this.view.getTheme(),["components","annotation",e],{})},t.prototype.updateOrCreate=function(e){var t=this.cache.get(this.getCacheKey(e));if(t){var n=e.type,r=this.getAnnotationTheme(n),i=this.getAnnotationCfg(n,e,r);LT(i,["container"]),t.component.update(i),Np(aM,e.type)&&t.component.render()}else(t=this.createAnnotation(e))&&(t.component.init(),Np(aM,e.type)&&t.component.render());return t},t.prototype.syncCache=function(e){var t=this,n=new Map(this.cache);return e.forEach((function(e,t){n.set(t,e)})),n.forEach((function(e,r){Up(t.option,(function(e){return r===t.getCacheKey(e)}))||(e.component.destroy(),n.delete(r))})),n},t.prototype.getCacheKey=function(e){return e},t}(Fk);function sM(e,t){var n=Rd({},Yd(e,["components","axis","common"]),Yd(e,["components","axis",t]));return Yd(n,["grid"],{})}function lM(e,t,n,r){var i=[],a=t.getTicks();return e.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce((function(t,a,o){var s=a.value;if(r)i.push({points:[e.convert("y"===n?{x:0,y:s}:{x:s,y:0}),e.convert("y"===n?{x:1,y:s}:{x:s,y:1})]});else if(o){var l=(t.value+s)/2;i.push({points:[e.convert("y"===n?{x:0,y:l}:{x:l,y:0}),e.convert("y"===n?{x:1,y:l}:{x:l,y:1})]})}return a}),a[0]),i}function cM(e,t,n,r,i){var a=t.values.length,o=[],s=n.getTicks();return s.reduce((function(t,n){var s=t?t.value:n.value,l=n.value,c=(s+l)/2;return"x"===i?o.push({points:[e.convert({x:r?l:c,y:0}),e.convert({x:r?l:c,y:1})]}):o.push({points:Gd(Array(a+1),(function(t,n){return e.convert({x:n/a,y:r?l:c})}))}),n}),s[0]),o}function uM(e,t){var n=Yd(t,"grid");if(null===n)return!1;var r=Yd(e,"grid");return!(void 0===n&&null===r)}var hM=["container"],pM=_p(_p({},Bk),{appear:null}),dM=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(ef.BG).addGroup(),n.gridForeContainer=n.view.getLayer(ef.FORE).addGroup(),n.axisContainer=n.view.getLayer(ef.BG).addGroup(),n.axisForeContainer=n.view.getLayer(ef.FORE).addGroup(),n}return kp(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this,t=this.view.getCoordinate();Hp(this.getComponents(),(function(n){var r,i=n.component,a=n.direction,o=n.type,s=n.extra,l=s.dim,c=s.scale,u=s.alignTick;if(o===af.AXIS)t.isPolar?"x"===l?r=t.isTransposed?VT(t,a):QT(t):"y"===l&&(r=t.isTransposed?QT(t):VT(t,a)):r=VT(t,a);else if(o===af.GRID)if(t.isPolar){r={items:t.isTransposed?"x"===l?cM(t,e.view.getYScales()[0],c,u,l):lM(t,c,l,u):"x"===l?lM(t,c,l,u):cM(t,e.view.getXScale(),c,u,l),center:e.view.getCoordinate().getCenter()}}else r={items:lM(t,c,l,u)};i.update(r)}))},t.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var t=new Map;this.cache.forEach((function(n,r){e.has(r)?t.set(r,n):n.component.destroy()})),this.cache=t},t.prototype.clear=function(){e.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},t.prototype.updateXAxes=function(e){var t=this.view.getXScale();if(t&&!t.isIdentity){var n=ZT(this.option,t.field);if(!1!==n){var r=JT(n,nf.BOTTOM),i=ef.BG,a="x",o=this.view.getCoordinate(),s=this.getId("axis",t.field),l=this.getId("grid",t.field);if(o.isRect){if(c=this.cache.get(s))LT(h=this.getLineAxisCfg(t,n,r),hM),c.component.update(h),e.set(s,c);else c=this.createLineAxis(t,n,i,r,a),this.cache.set(s,c),e.set(s,c);if(u=this.cache.get(l))LT(h=this.getLineGridCfg(t,n,r,a),hM),u.component.update(h),e.set(l,u);else(u=this.createLineGrid(t,n,i,r,a))&&(this.cache.set(l,u),e.set(l,u))}else if(o.isPolar){var c,u;if(c=this.cache.get(s)){LT(h=o.isTransposed?this.getLineAxisCfg(t,n,nf.RADIUS):this.getCircleAxisCfg(t,n,r),hM),c.component.update(h),e.set(s,c)}else{if(o.isTransposed){if(Ad(n))return;c=this.createLineAxis(t,n,i,nf.RADIUS,a)}else c=this.createCircleAxis(t,n,i,r,a);this.cache.set(s,c),e.set(s,c)}if(u=this.cache.get(l)){var h;LT(h=o.isTransposed?this.getCircleGridCfg(t,n,nf.RADIUS,a):this.getLineGridCfg(t,n,nf.CIRCLE,a),hM),u.component.update(h),e.set(l,u)}else{if(o.isTransposed){if(Ad(n))return;u=this.createCircleGrid(t,n,i,nf.RADIUS,a)}else u=this.createLineGrid(t,n,i,nf.CIRCLE,a);u&&(this.cache.set(l,u),e.set(l,u))}}}}},t.prototype.updateYAxes=function(e){var t=this;Hp(this.view.getYScales(),(function(n,r){if(n&&!n.isIdentity){var i=n.field,a=ZT(t.option,i);if(!1!==a){var o=ef.BG,s="y",l=t.getId("axis",i),c=t.getId("grid",i),u=t.view.getCoordinate();if(u.isRect){var h=JT(a,0===r?nf.LEFT:nf.RIGHT);if(p=t.cache.get(l))LT(f=t.getLineAxisCfg(n,a,h),hM),p.component.update(f),e.set(l,p);else p=t.createLineAxis(n,a,o,h,s),t.cache.set(l,p),e.set(l,p);if(d=t.cache.get(c))LT(f=t.getLineGridCfg(n,a,h,s),hM),d.component.update(f),e.set(c,d);else(d=t.createLineGrid(n,a,o,h,s))&&(t.cache.set(c,d),e.set(c,d))}else if(u.isPolar){var p,d;if(p=t.cache.get(l)){LT(f=u.isTransposed?t.getCircleAxisCfg(n,a,nf.CIRCLE):t.getLineAxisCfg(n,a,nf.RADIUS),hM),p.component.update(f),e.set(l,p)}else{if(u.isTransposed){if(Ad(a))return;p=t.createCircleAxis(n,a,o,nf.CIRCLE,s)}else p=t.createLineAxis(n,a,o,nf.RADIUS,s);t.cache.set(l,p),e.set(l,p)}if(d=t.cache.get(c)){var f;LT(f=u.isTransposed?t.getLineGridCfg(n,a,nf.CIRCLE,s):t.getCircleGridCfg(n,a,nf.RADIUS,s),hM),d.component.update(f),e.set(c,d)}else{if(u.isTransposed){if(Ad(a))return;d=t.createLineGrid(n,a,o,nf.CIRCLE,s)}else d=t.createCircleGrid(n,a,o,nf.RADIUS,s);d&&(t.cache.set(c,d),e.set(c,d))}}}}}))},t.prototype.createLineAxis=function(e,t,n,r,i){var a={component:new xT(this.getLineAxisCfg(e,t,r)),layer:n,direction:r===nf.RADIUS?nf.NONE:r,type:af.AXIS,extra:{dim:i,scale:e}};return a.component.set("field",e.field),a.component.init(),a},t.prototype.createLineGrid=function(e,t,n,r,i){var a=this.getLineGridCfg(e,t,r,i);if(a){var o={component:new bT(a),layer:n,direction:nf.NONE,type:af.GRID,extra:{dim:i,scale:e,alignTick:Yd(a,"alignTick",!0)}};return o.component.init(),o}},t.prototype.createCircleAxis=function(e,t,n,r,i){var a={component:new ET(this.getCircleAxisCfg(e,t,r)),layer:n,direction:r,type:af.AXIS,extra:{dim:i,scale:e}};return a.component.set("field",e.field),a.component.init(),a},t.prototype.createCircleGrid=function(e,t,n,r,i){var a=this.getCircleGridCfg(e,t,r,i);if(a){var o={component:new CT(a),layer:n,direction:nf.NONE,type:af.GRID,extra:{dim:i,scale:e,alignTick:Yd(a,"alignTick",!0)}};return o.component.init(),o}},t.prototype.getLineAxisCfg=function(e,t,n){var r=Yd(t,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=VT(i,n),o=eS(e,t),s=qT(this.view.getTheme(),n),l=Yd(t,["title"])?Rd({title:{style:{text:o}}},{title:KT(this.view.getTheme(),n,t.title)},t):t,c=Rd(_p(_p({container:r},a),{ticks:e.getTicks().map((function(e){return{id:"".concat(e.tickValue),name:e.text,value:e.value}})),verticalFactor:i.isPolar?-1*XT(a,i.getCenter()):XT(a,i.getCenter()),theme:s}),s,l),u=this.getAnimateCfg(c),h=u.animate,p=u.animateOption;c.animateOption=p,c.animate=h;var d=WT(a),f=Yd(c,"verticalLimitLength",d?1/3:.5);if(f<=1){var m=this.view.getCanvas().get("width"),g=this.view.getCanvas().get("height");c.verticalLimitLength=f*(d?m:g)}return c},t.prototype.getLineGridCfg=function(e,t,n,r){if(uM(qT(this.view.getTheme(),n),t)){var i=sM(this.view.getTheme(),n),a=Rd({container:Yd(t,["top"])?this.gridForeContainer:this.gridContainer},i,Yd(t,"grid"),this.getAnimateCfg(t));return a.items=lM(this.view.getCoordinate(),e,r,Yd(a,"alignTick",!0)),a}},t.prototype.getCircleAxisCfg=function(e,t,n){var r=Yd(t,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=e.getTicks().map((function(e){return{id:"".concat(e.tickValue),name:e.text,value:e.value}}));e.isCategory||Math.abs(i.endAngle-i.startAngle)!==2*Math.PI||a.pop();var o=eS(e,t),s=qT(this.view.getTheme(),nf.CIRCLE),l=Yd(t,["title"])?Rd({title:{style:{text:o}}},{title:KT(this.view.getTheme(),n,t.title)},t):t,c=Rd(_p(_p({container:r},QT(this.view.getCoordinate())),{ticks:a,verticalFactor:1,theme:s}),s,l),u=this.getAnimateCfg(c),h=u.animate,p=u.animateOption;return c.animate=h,c.animateOption=p,c},t.prototype.getCircleGridCfg=function(e,t,n,r){if(uM(qT(this.view.getTheme(),n),t)){var i=sM(this.view.getTheme(),nf.RADIUS),a=Rd({container:Yd(t,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},i,Yd(t,"grid"),this.getAnimateCfg(t)),o=Yd(a,"alignTick",!0),s="x"===r?this.view.getYScales()[0]:this.view.getXScale();return a.items=cM(this.view.getCoordinate(),s,e,o,r),a}},t.prototype.getId=function(e,t){var n=this.view.getCoordinate();return"".concat(e,"-").concat(t,"-").concat(n.type)},t.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&Yd(e,"animate"),animateOption:e&&e.animateOption?Rd({},pM,e.animateOption):pM}},t}(Fk);function fM(e,t,n){return n===nf.TOP?[e.minX+e.width/2-t.width/2,e.minY]:n===nf.BOTTOM?[e.minX+e.width/2-t.width/2,e.maxY-t.height]:n===nf.LEFT?[e.minX,e.minY+e.height/2-t.height/2]:n===nf.RIGHT?[e.maxX-t.width,e.minY+e.height/2-t.height/2]:n===nf.TOP_LEFT||n===nf.LEFT_TOP?[e.tl.x,e.tl.y]:n===nf.TOP_RIGHT||n===nf.RIGHT_TOP?[e.tr.x-t.width,e.tr.y]:n===nf.BOTTOM_LEFT||n===nf.LEFT_BOTTOM?[e.bl.x,e.bl.y-t.height]:n===nf.BOTTOM_RIGHT||n===nf.RIGHT_BOTTOM?[e.br.x-t.width,e.br.y-t.height]:[0,0]}function mM(e,t){return Sd(e)?!1!==e&&{}:Yd(e,[t],e)}function gM(e){return Yd(e,"position",nf.BOTTOM)}var vM=function(e){function t(t){var n=e.call(this,t)||this;return n.container=n.view.getLayer(ef.FORE).addGroup(),n}return kp(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,Hp(this.components,(function(t){var n=t.component,r=t.direction,i=y_(r),a=n.get("maxWidthRatio"),o=n.get("maxHeightRatio"),s=e.getCategoryLegendSizeCfg(i,a,o),l=n.get("maxWidth"),c=n.get("maxHeight");n.update({maxWidth:Math.min(s.maxWidth,l||0),maxHeight:Math.min(s.maxHeight,c||0)});var u=n.get("padding"),h=n.getLayoutBBox(),p=new RT(h.x,h.y,h.width,h.height).expand(u),d=fM(e.view.viewBBox,p,r),f=d[0],m=d[1],g=fM(e.layoutBBox,p,r),v=g[0],y=g[1],x=0,E=0;r.startsWith("top")||r.startsWith("bottom")?(x=f,E=y):(x=v,E=m),n.setLocation({x:x+u[3],y:E+u[0]}),e.layoutBBox=e.layoutBBox.cut(p,r)}))},t.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var t={};if(Yd(this.option,"custom")){var n="global-custom",r=this.getComponentById(n);if(r){var i=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);LT(i,["container"]),r.component.update(i),t[n]=!0}else{var a=this.createCustomLegend(void 0,void 0,void 0,this.option);if(a){a.init();var o=ef.FORE,s=gM(this.option);this.components.push({id:n,component:a,layer:o,direction:s,type:af.LEGEND,extra:void 0}),t[n]=!0}}}else this.loopLegends((function(n,r,i){var a=e.getId(i.field),o=e.getComponentById(a);if(o){var s=void 0,l=mM(e.option,i.field);!1!==l&&(Yd(l,"custom")?s=e.getCategoryCfg(n,r,i,l,!0):i.isLinear?s=e.getContinuousCfg(n,r,i,l):i.isCategory&&(s=e.getCategoryCfg(n,r,i,l))),s&&(LT(s,["container"]),o.direction=gM(l),o.component.update(s),t[a]=!0)}else{var c=e.createFieldLegend(n,r,i);c&&(c.component.init(),e.components.push(c),t[a]=!0)}}));var l=[];Hp(this.getComponents(),(function(e){t[e.id]?l.push(e):e.component.destroy()})),this.components=l},t.prototype.clear=function(){e.prototype.clear.call(this),this.container.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.container.remove(!0)},t.prototype.getGeometries=function(e){var t=this,n=e.geometries;return Hp(e.views,(function(e){n=n.concat(t.getGeometries(e))})),n},t.prototype.loopLegends=function(e){if(this.view.getRootView()===this.view){var t=this.getGeometries(this.view),n={};Hp(t,(function(t){Hp(t.getGroupAttributes(),(function(r){var i=r.getScale(r.type);i&&"identity"!==i.type&&!n[i.field]&&(e(t,r,i),n[i.field]=!0)}))}))}},t.prototype.createFieldLegend=function(e,t,n){var r,i=mM(this.option,n.field),a=ef.FORE,o=gM(i);if(!1!==i&&(Yd(i,"custom")?r=this.createCustomLegend(e,t,n,i):n.isLinear?r=this.createContinuousLegend(e,t,n,i):n.isCategory&&(r=this.createCategoryLegend(e,t,n,i))),r)return r.set("field",n.field),{id:this.getId(n.field),component:r,layer:a,direction:o,type:af.LEGEND,extra:{scale:n}}},t.prototype.createCustomLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r,!0);return new wT(i)},t.prototype.createContinuousLegend=function(e,t,n,r){var i=this.getContinuousCfg(e,t,n,LT(r,["value"]));return new TT(i)},t.prototype.createCategoryLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r);return new wT(i)},t.prototype.getContinuousCfg=function(e,t,n,r){var i=n.getTicks(),a=Up(i,(function(e){return 0===e.value})),o=Up(i,(function(e){return 1===e.value})),s=i.map((function(e){var r=e.value,i=e.tickValue,a=t.mapping(n.invert(r)).join("");return{value:i,attrValue:a,color:a,scaleValue:r}}));a||s.push({value:n.min,attrValue:t.mapping(n.invert(0)).join(""),color:t.mapping(n.invert(0)).join(""),scaleValue:0}),o||s.push({value:n.max,attrValue:t.mapping(n.invert(1)).join(""),color:t.mapping(n.invert(1)).join(""),scaleValue:1}),s.sort((function(e,t){return e.value-t.value}));var l={min:rd(s).value,max:id(s).value,colors:[],rail:{type:t.type},track:{}};"size"===t.type&&(l.track={style:{fill:"size"===t.type?this.view.getTheme().defaultColor:void 0}}),"color"===t.type&&(l.colors=s.map((function(e){return e.attrValue})));var c=this.container,u=y_(gM(r)),h=Yd(r,"title");return h&&(h=Rd({text:YT(n)},h)),l.container=c,l.layout=u,l.title=h,l.animateOption=Bk,this.mergeLegendCfg(l,r,"continuous")},t.prototype.getCategoryCfg=function(e,t,n,r,i){var a=this.container,o=Yd(r,"position",nf.BOTTOM),s=E_(this.view.getTheme(),o),l=Yd(s,["marker"]),c=Yd(r,"marker"),u=y_(o),h=Yd(s,["pageNavigator"]),p=Yd(r,"pageNavigator"),d=i?function(e,t,n){return n.map((function(n,r){var i=t;Rp(i)&&(i=i(n.name,r,Rd({},e,n)));var a=Rp(n.marker)?n.marker(n.name,r,Rd({},e,n)):n.marker,o=Rd({},e,i,a);return v_(o),n.marker=o,n}))}(l,c,r.items):x_(this.view,e,t,l,c),f=Yd(r,"title");f&&(f=Rd({text:n?YT(n):""},f));var m=Yd(r,"maxWidthRatio"),g=Yd(r,"maxHeightRatio"),v=this.getCategoryLegendSizeCfg(u,m,g);v.container=a,v.layout=u,v.items=d,v.title=f,v.animateOption=Bk,v.pageNavigator=Rd({},h,p);var y=this.mergeLegendCfg(v,r,o);y.reversed&&y.items.reverse();var x=Yd(y,"maxItemWidth");return x&&x<=1&&(y.maxItemWidth=this.view.viewBBox.width*x),y},t.prototype.mergeLegendCfg=function(e,t,n){var r=n.split("-")[0],i=E_(this.view.getTheme(),r);return Rd({},i,e,t)},t.prototype.getId=function(e){return"".concat(this.name,"-").concat(e)},t.prototype.getComponentById=function(e){return Up(this.components,(function(t){return t.id===e}))},t.prototype.getCategoryLegendSizeCfg=function(e,t,n){void 0===t&&(t=.25),void 0===n&&(n=.25);var r=this.view.viewBBox,i=r.width,a=r.height;return"vertical"===e?{maxWidth:i*t,maxHeight:a}:{maxWidth:i,maxHeight:a*n}},t}(Fk),yM=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeFn=Zd,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=e[0],r=e[1];n.start=t,n.end=r,n.changeViewData(t,r)},n.container=n.view.getLayer(ef.FORE).addGroup(),n.onChangeFn=qd(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(cf.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(cf.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return kp(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(cf.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(cf.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),t=e.start,n=e.end;Dp(this.start)&&(this.start=t,this.end=n);var r=this.view.getOptions().data;this.option&&!zd(r)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout((function(){e.view.destroyed||e.changeViewData(e.start,e.end)}),0)),this.slider){var t=this.view.coordinateBBox.width,n=this.slider.component.get("padding"),r=n[0];n[1],n[2];var i=n[3],a=this.slider.component.getLayoutBBox(),o=new RT(a.x,a.y,Math.min(a.width,t),a.height).expand(n),s=this.getMinMaxText(this.start,this.end),l=s.minText,c=s.maxText,u=fM(this.view.viewBBox,o,nf.BOTTOM);u[0];var h=u[1],p=fM(this.view.coordinateBBox,o,nf.BOTTOM),d=p[0];p[1],this.slider.component.update(_p(_p({},this.getSliderCfg()),{x:d+i,y:h+r,width:this.width,start:this.start,end:this.end,minText:l,maxText:c})),this.view.viewBBox=this.view.viewBBox.cut(o,nf.BOTTOM)}},t.prototype.update=function(){this.render()},t.prototype.createSlider=function(){var e=this.getSliderCfg(),t=new gT(_p({container:this.container},e));return t.init(),{component:t,layer:ef.FORE,direction:nf.BOTTOM,type:af.SLIDER}},t.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var t=this.getMinMaxText(this.start,this.end),n=t.minText,r=t.maxText;e=_p(_p({},e),{width:this.width,start:this.start,end:this.end,minText:n,maxText:r})}return this.slider.component.update(e),this.slider},t.prototype.measureSlider=function(){var e=this.getSliderCfg().width;this.width=e},t.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(zp(this.option)){var t=_p({data:this.getData()},Yd(this.option,"trendCfg",{}));e=Rd({},e,this.getThemeOptions(),this.option),e=_p(_p({},e),{trendCfg:t})}return e.start=ud(Math.min(Dp(e.start)?0:e.start,Dp(e.end)?1:e.end),0,1),e.end=ud(Math.max(Dp(e.start)?0:e.start,Dp(e.end)?1:e.end),0,1),e},t.prototype.getData=function(){var e=this.view.getOptions().data,t=this.view.getYScales()[0],n=this.view.getGroupScales();if(n.length){var r=n[0],i=r.field,a=r.ticks;return e.reduce((function(e,n){return n[i]===a[0]&&e.push(n[t.field]),e}),[])}return e.map((function(e){return e[t.field]||0}))},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return Yd(e,["components","slider","common"],{})},t.prototype.getMinMaxText=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=nd(n,r.field),a=Jd(n);if(!r||!a)return{};var o=Jd(i),s=Math.floor(e*(o-1)),l=Math.floor(t*(o-1)),c=Yd(i,[s]),u=Yd(i,[l]),h=this.getSliderCfg().formatter;return h&&(c=h(c,n[s],s),u=h(u,n[l],l)),{minText:c,maxText:u}},t.prototype.changeViewData=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=Jd(n);if(r&&i){var a=nd(n,r.field),o=Jd(a),s=Math.floor(e*(o-1)),l=Math.floor(t*(o-1));this.view.filter(r.field,(function(e,t){var n=a.indexOf(e);return!(n>-1)||FT(n,s,l)})),this.view.render(!0)}},t.prototype.getComponents=function(){return this.slider?[this.slider]:[]},t.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},t}(Fk),xM=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeFn=Zd,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=e.ratio,r=n.getValidScrollbarCfg().animate;n.ratio=ud(t,0,1);var i=n.view.getOptions().animate;r||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(i)},n.container=n.view.getLayer(ef.FORE).addGroup(),n.onChangeFn=qd(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(cf.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(cf.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return kp(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(cf.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(cf.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout((function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)}))),this.scrollbar){var t=this.view.coordinateBBox.width,n=this.scrollbar.component.get("padding"),r=this.scrollbar.component.getLayoutBBox(),i=new RT(r.x,r.y,Math.min(r.width,t),r.height).expand(n),a=this.getScrollbarComponentCfg(),o=void 0,s=void 0;if(a.isHorizontal){var l=fM(this.view.viewBBox,i,nf.BOTTOM);l[0];var c=l[1],u=fM(this.view.coordinateBBox,i,nf.BOTTOM),h=u[0];u[1],o=h,s=c}else{var p=fM(this.view.viewBBox,i,nf.RIGHT);p[0];c=p[1];var d=fM(this.view.viewBBox,i,nf.RIGHT);h=d[0];d[1],o=h,s=c}o+=n[3],s+=n[0],this.trackLen?this.scrollbar.component.update(_p(_p({},a),{x:o,y:s,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(_p(_p({},a),{x:o,y:s})),this.view.viewBBox=this.view.viewBBox.cut(i,a.isHorizontal?nf.BOTTOM:nf.RIGHT)}},t.prototype.update=function(){this.render()},t.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},t.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},t.prototype.setValue=function(e){this.onValueChange({ratio:e})},t.prototype.getValue=function(){return this.ratio},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return Yd(e,["components","scrollbar","common"],{})},t.prototype.getScrollbarTheme=function(e){var t=Yd(this.view.getTheme(),["components","scrollbar"]),n=e||{},r=n.thumbHighlightColor,i=Ap(n,["thumbHighlightColor"]);return{default:Rd({},Yd(t,["default","style"],{}),i),hover:Rd({},Yd(t,["hover","style"],{}),{thumbColor:r})}},t.prototype.measureScrollbar=function(){var e=this.view.getXScale(),t=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var n=this.getScrollbarComponentCfg(),r=n.trackLen,i=n.thumbLen;this.trackLen=r,this.thumbLen=i,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=t},t.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*ud(this.ratio,0,1));return[e,Math.min(e+this.step-1,this.cnt-1)]},t.prototype.changeViewData=function(e,t){var n=this,r=e[0],i=e[1],a="vertical"!==this.getValidScrollbarCfg().type,o=nd(this.data,this.xScaleCfg.field),s=a?o:o.reverse();this.yScalesCfg.forEach((function(e){n.view.scale(e.field,{formatter:e.formatter,type:e.type,min:e.min,max:e.max})})),this.view.filter(this.xScaleCfg.field,(function(e){var t=s.indexOf(e);return!(t>-1)||FT(t,r,i)})),this.view.render(!0)},t.prototype.createScrollbar=function(){var e="vertical"!==this.getValidScrollbarCfg().type,t=new yT(_p(_p({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return t.init(),{component:t,layer:ef.FORE,direction:e?nf.BOTTOM:nf.RIGHT,type:af.SCROLLBAR}},t.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),t=this.trackLen?_p(_p({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):_p({},e);return this.scrollbar.component.update(t),this.scrollbar},t.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,t=this.getValidScrollbarCfg(),n=t.type,r=t.categorySize,i="vertical"!==n;return Math.floor((i?e.width:e.height)/r)},t.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),t=this.getScrollbarData();return Jd(nd(t,e.field))},t.prototype.getScrollbarComponentCfg=function(){var e=this.view,t=e.coordinateBBox,n=e.viewBBox,r=this.getValidScrollbarCfg(),i=r.type,a=r.padding,o=r.width,s=r.height,l=r.style,c="vertical"!==i,u=a[0],h=a[1],p=a[2],d=a[3],f=c?{x:t.minX+d,y:n.maxY-s-p}:{x:n.maxX-o-h,y:t.minY+u},m=this.getStep(),g=this.getCnt(),v=c?t.width-d-h:t.height-u-p,y=Math.max(v*ud(m/g,0,1),20);return _p(_p({},this.getThemeOptions()),{x:f.x,y:f.y,size:c?s:o,isHorizontal:c,trackLen:v,thumbLen:y,thumbOffset:0,theme:this.getScrollbarTheme(l)})},t.prototype.getValidScrollbarCfg=function(){var e={type:"horizontal",categorySize:32,width:8,height:8,padding:[0,0,0,0],animate:!0,style:{}};return zp(this.option)&&(e=_p(_p({},e),this.option)),zp(this.option)&&this.option.padding||(e.padding=(e.type,[0,0,0,0])),e},t.prototype.getScrollbarData=function(){var e=this.view.getCoordinate(),t=this.getValidScrollbarCfg(),n=this.view.getOptions().data||[];return e.isReflect("y")&&"vertical"===t.type&&(n=Ip([],n,!0).reverse()),n},t}(Fk),EM={fill:"#CCD6EC",opacity:.3};function bM(e,t,n){var r=function(e,t,n){for(var r=xk(e,t,n),i=0,a=e.views;i<a.length;i++){var o=a[i];r=r.concat(xk(o,t,n))}return r}(e,t,n);if(r.length){for(var i=0,a=r=Wp(r);i<a.length;i++)for(var o=0,s=a[i];o<s.length;o++){var l=s[o],c=l.mappingData,u=c.x,h=c.y;l.x=Bp(u)?u[u.length-1]:u,l.y=Bp(h)?h[h.length-1]:h}if(!1===n.shared&&r.length>1){for(var p=r[0],d=Math.abs(t.y-p[0].y),f=0,m=r;f<m.length;f++){var g=m[f],v=Math.abs(t.y-g[0].y);v<=d&&(p=g,d=v)}r=[p]}return td(Wp(r))}return[]}var CM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.show=function(e){var t=this.context.view,n=this.context.event,r=t.getController("tooltip").getTooltipCfg(),i=bM(t,{x:n.x,y:n.y},r);if(!jd(i,this.items)&&(this.items=i,i.length)){var a=t.getXScale().field,o=i[0].data[a],s=[];if(Hp(t.geometries,(function(e){if("interval"===e.type||"schema"===e.type){var t=e.getElementsBy((function(e){return e.getData()[a]===o}));s=s.concat(t)}})),s.length){var l=t.getCoordinate(),c=s[0].shape.getCanvasBBox(),u=s[0].shape.getCanvasBBox(),h=c;Hp(s,(function(e){var t=e.shape.getCanvasBBox();l.isTransposed?(t.minY<c.minY&&(c=t),t.maxY>u.maxY&&(u=t)):(t.minX<c.minX&&(c=t),t.maxX>u.maxX&&(u=t)),h.x=Math.min(t.minX,h.minX),h.y=Math.min(t.minY,h.minY),h.width=Math.max(t.maxX,h.maxX)-h.x,h.height=Math.max(t.maxY,h.maxY)-h.y}));var p=t.backgroundGroup,d=t.coordinateBBox,f=void 0;if(l.isRect){var m=t.getXScale(),g=e||{},v=g.appendRatio,y=g.appendWidth;Dp(y)&&(v=Dp(v)?m.isLinear?0:.25:v,y=l.isTransposed?v*u.height:v*c.width);var x=void 0,E=void 0,b=void 0,C=void 0;l.isTransposed?(x=d.minX,E=Math.min(u.minY,c.minY)-y,b=d.width,C=h.height+2*y):(x=Math.min(c.minX,u.minX)-y,E=d.minY,b=h.width+2*y,C=d.height),f=[["M",x,E],["L",x+b,E],["L",x+b,E+C],["L",x,E+C],["Z"]]}else{var w=rd(s),T=id(s),S=MT(w.getModel(),l).startAngle,k=MT(T.getModel(),l).endAngle,_=l.getCenter(),A=l.getRadius(),O=l.innerRadius*A;f=OT(_.x,_.y,A,S,k,O)}if(this.regionPath)this.regionPath.attr("path",f),this.regionPath.show();else{var I=Yd(e,"style",EM);this.regionPath=p.addShape({type:"path",name:"active-region",capture:!1,attrs:_p(_p({},I),{path:f})})}}}},t.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},t.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),e.prototype.destroy.call(this)},t}(iS),wM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return kp(t,e),t.prototype.show=function(){var e=this.context,t=e.event,n=e.view;if(!n.isTooltipLocked()){var r=this.timeStamp,i=+new Date;if(i-r>Yd(e.view.getOptions(),"tooltip.showDelay",16)){var a=this.location,o={x:t.x,y:t.y};a&&jd(a,o)||this.showTooltip(n,o),this.timeStamp=i,this.location=o}}},t.prototype.hide=function(){var e=this.context.view,t=e.getController("tooltip"),n=this.context.event,r=n.clientX,i=n.clientY;t.isCursorEntered({x:r,y:i})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},t.prototype.showTooltip=function(e,t){e.showTooltip(t)},t.prototype.hideTooltip=function(e){e.hideTooltip()},t}(iS),TM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.showTooltip=function(e,t){Hp(FS(e),(function(n){var r=LS(e,n,t);n.showTooltip(r)}))},t.prototype.hideTooltip=function(e){Hp(FS(e),(function(e){e.hideTooltip()}))},t}(wM),SM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return kp(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.show=function(){var e=this.context.event,t=this.timeStamp,n=+new Date;if(n-t>16){var r=this.location,i={x:e.x,y:e.y};r&&jd(r,i)||this.showTooltip(i),this.timeStamp=n,this.location=i}},t.prototype.hide=function(){this.hideTooltip(),this.location=null},t.prototype.showTooltip=function(e){var t=this.context.event.target;if(t&&t.get("tip")){this.tooltip||this.renderTooltip();var n=t.get("tip");this.tooltip.update(_p({title:n},e)),this.tooltip.show()}},t.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,t=this.context.view,n=t.canvas,r={start:{x:0,y:0},end:{x:n.get("width"),y:n.get("height")}},i=t.getTheme(),a=Yd(i,["components","tooltip","domStyles"],{}),o=new ST({parent:n.get("el").parentNode,region:r,visible:!1,crosshairs:null,domStyles:_p({},Rd({},a,(e={},e["g2-tooltip"]={"max-width":"50%"},e[Kw]={"word-break":"break-all"},e)))});o.init(),o.setCapture(!1),this.tooltip=o},t}(iS),kM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="",t}return kp(t,e),t.prototype.hasState=function(e){return e.hasState(this.stateName)},t.prototype.setElementState=function(e,t){e.setState(this.stateName,t)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},t.prototype.clearViewState=function(e){var t=this;Hp(kS(e,this.stateName),(function(e){t.setElementState(e,!1)}))},t}(iS);function _M(e){return Yd(e.get("delegateObject"),"item")}var AM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return kp(t,e),t.prototype.isItemIgnore=function(e,t){return!!this.ignoreListItemStates.filter((function(n){return t.hasState(e,n)})).length},t.prototype.setStateByComponent=function(e,t,n){var r=this.context.view,i=e.get("field"),a=SS(r);this.setElementsStateByItem(a,i,t,n)},t.prototype.setStateByElement=function(e,t){this.setElementState(e,t)},t.prototype.isMathItem=function(e,t,n){var r=RS(this.context.view,t),i=_S(e,t);return!Dp(i)&&n.name===r.getText(i)},t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;Hp(e,(function(e){i.isMathItem(e,t,n)&&e.setState(i.stateName,r)}))},t.prototype.setStateEnable=function(e){var t=vS(this.context);if(t)xS(this.context)&&this.setStateByElement(t,e);else{var n=yS(this.context);if(ES(n)){var r=n.item,i=n.component;if(r&&i&&!this.isItemIgnore(r,i)){var a=this.context.event.gEvent;if(a&&a.fromShape&&a.toShape&&_M(a.fromShape)===_M(a.toShape))return;this.setStateByComponent(i,r,e)}}}},t.prototype.toggle=function(){var e=vS(this.context);if(e){var t=e.hasState(this.stateName);this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(kM),OM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return kp(t,e),t.prototype.active=function(){this.setState()},t}(AM),IM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={},t}return kp(t,e),t.prototype.getColorScale=function(e,t){var n=t.geometry.getAttribute("color");return n?e.getScaleByField(n.getFields()[0]):null},t.prototype.getLinkPath=function(e,t){var n=this.context.view.getCoordinate().isTransposed,r=e.shape.getCanvasBBox(),i=t.shape.getCanvasBBox();return n?[["M",r.minX,r.minY],["L",i.minX,i.maxY],["L",i.maxX,i.maxY],["L",r.maxX,r.minY],["Z"]]:[["M",r.maxX,r.minY],["L",i.minX,i.minY],["L",i.minX,i.maxY],["L",r.maxX,r.maxY],["Z"]]},t.prototype.addLinkShape=function(e,t,n,r){var i={opacity:.4,fill:t.shape.attr("fill")};e.addShape({type:"path",attrs:_p(_p({},Rd({},i,Rp(r)?r(i,t):r)),{path:this.getLinkPath(t,n)})})},t.prototype.linkByElement=function(e,t){var n=this,r=this.context.view,i=this.getColorScale(r,e);if(i){var a=_S(e,i.field);if(!this.cache[a]){var o=function(e,t,n){return SS(e).filter((function(e){return _S(e,t)===n}))}(r,i.field,a),s=this.linkGroup.addGroup();this.cache[a]=s;var l=o.length;Hp(o,(function(e,r){if(r<l-1){var i=o[r+1];n.addLinkShape(s,e,i,t)}}))}}},t.prototype.removeLink=function(e){var t=this.getColorScale(this.context.view,e);if(t){var n=_S(e,t.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},t.prototype.link=function(e){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var n=vS(t);n&&this.linkByElement(n,null==e?void 0:e.style)},t.prototype.unlink=function(){var e=vS(this.context);e&&this.removeLink(e)},t.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},t}(iS),MM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return kp(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},t.prototype.getIntersectElements=function(){var e=null;if(CS(this.context))e=wS(this.context,10);else{var t=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!t||!n)return;var r={minX:Math.min(t.x,n.x),minY:Math.min(t.y,n.y),maxX:Math.max(t.x,n.x),maxY:Math.max(t.y,n.y)};e=AS(this.context.view,r)}return e},t.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var t=SS(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,e):this.setElementsState(n,e,t):this.clear()}},t.prototype.setSiblingsStateByRecord=function(e,t){var n=this,r=this.context.view,i=FS(r),a=e.map((function(e){return e.getModel().data})),o=r.getXScale().field,s=r.getYScales()[0].field;Hp(i,(function(e){var r=SS(e),i=r.filter((function(e){var t=e.getModel().data;return PS(a,t,o,s)}));n.setElementsState(i,t,r)}))},t.prototype.setSiblingsState=function(e){var t=this,n=FS(this.context.view);CS(this.context)&&Hp(n,(function(n){var r=SS(n),i=TS(t.context,n,10);i&&i.length?t.setElementsState(i,e,r):t.clearViewState(n)}))},t.prototype.setElementsState=function(e,t,n){var r=this;Hp(n,(function(n){e.includes(n)?r.setElementState(n,t):r.setElementState(n,!1)}))},t.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},t.prototype.clear=function(){var e=this,t=this.context.view;this.effectSiblings?Hp(FS(t),(function(t){e.clearViewState(t)})):this.clearViewState(t)},t}(kM),NM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return kp(t,e),t.prototype.active=function(){this.setState()},t}(MM),FM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.setStateEnable=function(e){var t=vS(this.context);if(t){if(!xS(this.context))return;e?(this.clear(),this.setElementState(t,!0)):this.hasState(t)&&this.setElementState(t,!1)}},t.prototype.toggle=function(){var e=vS(this.context);if(e){var t=this.hasState(e);t||this.clear(),this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(kM),LM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return kp(t,e),t.prototype.active=function(){this.setState()},t}(FM);function PM(e){Hp(SS(e),(function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("inactive")&&e.setState("inactive",!1)}))}function RM(e,t,n){Hp(e,(function(e){t(e)?(e.hasState("inactive")&&e.setState("inactive",!1),e.setState("active",n)):(e.hasState("active")&&e.setState("active",!1),e.setState("inactive",n))}))}var DM,BM,zM=mf.INACTIVE,HM=mf.ACTIVE,jM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName=HM,t}return kp(t,e),t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;this.setHighlightBy(e,(function(e){return i.isMathItem(e,t,n)}),r)},t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(zM)&&e.setState(zM,!1),e.setState(HM,!0)):e.hasState(HM)||e.setState(zM,!0)},t.prototype.setHighlightBy=function(e,t,n){var r=this;if(n)Hp(e,(function(e){r.setElementHighlight(e,t)}));else{var i=kS(this.context.view,HM),a=!0;Hp(i,(function(e){if(!t(e))return a=!1,!1})),a?this.clear():Hp(e,(function(e){t(e)&&(e.hasState(HM)&&e.setState(HM,!1),e.setState(zM,!0))}))}},t.prototype.setElementState=function(e,t){var n=SS(this.context.view);this.setHighlightBy(n,(function(t){return e===t}),t)},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){PM(this.context.view)},t}(AM),GM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=e.geometry.getAttribute("color");if(r){var i=n.getScaleByField(r.getFields()[0]),a=_S(e,i.field),o=SS(n),s=o.filter((function(e){return _S(e,i.field)===a}));this.setHighlightBy(o,(function(e){return s.includes(e)}),t)}},t}(jM),$M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(zM)&&e.setState(zM,!1),e.setState(HM,!0)):(e.setState(zM,!0),e.hasState(HM)&&e.setState(HM,!1))},t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=n.getXScale(),i=_S(e,r.field),a=SS(n),o=a.filter((function(e){return _S(e,r.field)===i}));this.setHighlightBy(a,(function(e){return o.includes(e)}),t)},t.prototype.toggle=function(){var e=vS(this.context);if(e){var t=e.hasState(this.stateName);this.setStateByElement(e,!t)}},t}(jM);(BM=DM||(DM={})).BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",BM.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",BM.BEFORE_CLEAR="element-range-highlight:beforeclear",BM.AFTER_CLEAR="element-range-highlight:afterclear";var YM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return kp(t,e),t.prototype.clearViewState=function(e){PM(e)},t.prototype.highlight=function(){var e=this.context,t=e.view,n={view:t,event:e.event,highlightElements:this.getIntersectElements()};t.emit(DM.BEFORE_HIGHLIGHT,Tk.fromData(t,DM.BEFORE_HIGHLIGHT,n)),this.setState(),t.emit(DM.AFTER_HIGHLIGHT,Tk.fromData(t,DM.AFTER_HIGHLIGHT,n))},t.prototype.clear=function(){var t=this.context.view;t.emit(DM.BEFORE_CLEAR,Tk.fromData(t,DM.BEFORE_CLEAR,{})),e.prototype.clear.call(this),t.emit(DM.AFTER_CLEAR,Tk.fromData(t,DM.AFTER_CLEAR,{}))},t.prototype.setElementsState=function(e,t,n){RM(n,(function(t){return e.indexOf(t)>=0}),t)},t}(MM),UM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return kp(t,e),t.prototype.highlight=function(){this.setState()},t.prototype.setElementState=function(e,t){RM(SS(this.context.view),(function(t){return e===t}),t)},t.prototype.clear=function(){PM(this.context.view)},t}(FM),VM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return kp(t,e),t.prototype.selected=function(){this.setState()},t}(MM),WM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return kp(t,e),t.prototype.selected=function(){this.setState()},t}(AM),XM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return kp(t,e),t.prototype.selected=function(){this.setState()},t}(FM),qM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return kp(t,e),t.prototype.getTriggerListInfo=function(){var e=yS(this.context),t=null;return ES(e)&&(t={item:e.item,list:e.component}),t},t.prototype.getAllowComponents=function(){var e=this,t=IS(this.context.view),n=[];return Hp(t,(function(t){t.isList()&&e.allowSetStateByElement(t)&&n.push(t)})),n},t.prototype.hasState=function(e,t){return e.hasState(t,this.stateName)},t.prototype.clearAllComponentsState=function(){var e=this;Hp(this.getAllowComponents(),(function(t){t.clearItemsState(e.stateName)}))},t.prototype.allowSetStateByElement=function(e){var t=e.get("field");if(!t)return!1;if(this.cfg&&this.cfg.componentNames){var n=e.get("name");if(-1===this.cfg.componentNames.indexOf(n))return!1}var r=RS(this.context.view,t);return r&&r.isCategory},t.prototype.allowSetStateByItem=function(e,t){var n=this.ignoreItemStates;return!n.length||0===n.filter((function(n){return t.hasState(e,n)})).length},t.prototype.setStateByElement=function(e,t,n){var r=e.get("field"),i=RS(this.context.view,r),a=_S(t,r),o=i.getText(a);this.setItemsState(e,o,n)},t.prototype.setStateEnable=function(e){var t=this,n=vS(this.context);if(n){Hp(this.getAllowComponents(),(function(r){t.setStateByElement(r,n,e)}))}else{var r=yS(this.context);if(ES(r)){var i=r.item,a=r.component;this.allowSetStateByElement(a)&&this.allowSetStateByItem(i,a)&&this.setItemState(a,i,e)}}},t.prototype.setItemsState=function(e,t,n){var r=this;Hp(e.getItems(),(function(i){i.name===t&&r.setItemState(e,i,n)}))},t.prototype.setItemState=function(e,t,n){e.setItemState(t,this.stateName,n)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.reset=function(){this.setStateEnable(!1)},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item,r=this.hasState(t,n);this.setItemState(t,n,!r)}},t.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},t}(iS),KM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return kp(t,e),t.prototype.active=function(){this.setState()},t}(qM);var QM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t.ignoreItemStates=["unchecked"],t}return kp(t,e),t.prototype.setItemsState=function(e,t,n){this.setHighlightBy(e,(function(e){return e.name===t}),n)},t.prototype.setItemState=function(e,t,n){e.getItems(),this.setHighlightBy(e,(function(e){return e===t}),n)},t.prototype.setHighlightBy=function(e,t,n){var r=e.getItems();if(n)Hp(r,(function(n){t(n)?(e.hasState(n,"inactive")&&e.setItemState(n,"inactive",!1),e.setItemState(n,"active",!0)):e.hasState(n,"active")||e.setItemState(n,"inactive",!0)}));else{var i=e.getItemsByState("active"),a=!0;Hp(i,(function(e){if(!t(e))return a=!1,!1})),a?this.clear():Hp(r,(function(n){t(n)&&(e.hasState(n,"active")&&e.setItemState(n,"active",!1),e.setItemState(n,"inactive",!0))}))}},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e,t=this.getTriggerListInfo();t?Hp((e=t.list).getItems(),(function(t){e.hasState(t,"active")&&e.setItemState(t,"active",!1),e.hasState(t,"inactive")&&e.setItemState(t,"inactive",!1)})):Hp(this.getAllowComponents(),(function(e){e.clearItemsState("active"),e.clearItemsState("inactive")}))},t}(qM),ZM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return kp(t,e),t.prototype.selected=function(){this.setState()},t}(qM),JM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="unchecked",t}return kp(t,e),t.prototype.unchecked=function(){this.setState()},t}(qM),eN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="checked",t}return kp(t,e),t.prototype.setItemState=function(e,t,n){this.setCheckedBy(e,(function(e){return e===t}),n)},t.prototype.setCheckedBy=function(e,t,n){var r=e.getItems();n&&Hp(r,(function(n){t(n)?(e.hasState(n,"unchecked")&&e.setItemState(n,"unchecked",!1),e.setItemState(n,"checked",!0)):e.hasState(n,"checked")||e.setItemState(n,"unchecked",!0)}))},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item;!od(t.getItems(),(function(e){return t.hasState(e,"unchecked")}))||t.hasState(n,"unchecked")?this.setItemState(t,n,!0):this.reset()}},t.prototype.checked=function(){this.setState()},t.prototype.reset=function(){Hp(this.getAllowComponents(),(function(e){e.clearItemsState("checked"),e.clearItemsState("unchecked")}))},t}(qM),tN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return kp(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.emitEvent=function(e){var t="mask:".concat(e),n=this.context.view,r=this.context.event;n.emit(t,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},t.prototype.createMask=function(){var e=this.context.view,t=this.getMaskAttrs();return e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:_p({fill:"#C5D4EB",opacity:.3},t)})},t.prototype.getMaskPath=function(){return[]},t.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},t.prototype.start=function(e){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(null==e?void 0:e.maskStyle),this.emitEvent("start")},t.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},t.prototype.move=function(){if(this.moving&&this.maskShape){var e=this.getCurrentPoint(),t=this.preMovePoint,n=e.x-t.x,r=e.y-t.y;Hp(this.points,(function(e){e.x+=n,e.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e}},t.prototype.updateMask=function(e){var t=Rd({},this.getMaskAttrs(),e);this.maskShape.attr(t)},t.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},t.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},t.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},t.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},t.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,e.prototype.destroy.call(this)},t}(iS),nN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="circle",t}return kp(t,e),t.prototype.getMaskAttrs=function(){var e=this.points,t=id(this.points),n=0,r=0,i=0;if(e.length){var a=e[0];n=MS(a,t)/2,r=(t.x+a.x)/2,i=(t.y+a.y)/2}return{x:r,y:i,r:n}},t}(tN),rN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="rect",t}return kp(t,e),t.prototype.getRegion=function(){var e=this.points;return{start:rd(e),end:id(e)}},t.prototype.getMaskAttrs=function(){var e=this.getRegion(),t=e.start,n=e.end;return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),width:Math.abs(n.x-t.x),height:Math.abs(n.y-t.y)}},t}(tN);function iN(e){e.x=ud(e.x,0,1),e.y=ud(e.y,0,1)}var aN,oN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return kp(t,e),t.prototype.getRegion=function(){var e=null,t=null,n=this.points,r=this.dim,i=this.context.view.getCoordinate(),a=i.invert(rd(n)),o=i.invert(id(n));return this.inPlot&&(iN(a),iN(o)),"x"===r?(e=i.convert({x:a.x,y:0}),t=i.convert({x:o.x,y:1})):(e=i.convert({x:0,y:a.y}),t=i.convert({x:1,y:o.y})),{start:e,end:t}},t}(rN),sN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getMaskPath=function(){var e=this.points,t=[];return e.length&&(Hp(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t.push(["L",e[0].x,e[0].y])),t},t.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},t.prototype.addPoint=function(){this.resize()},t}(tN),lN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getMaskPath=function(){return function(e,t){if(e.length<=2)return dS(e,!1);var n=e[0],r=[];Hp(e,(function(e){r.push(e.x),r.push(e.y)}));var i=pS(r,t,null);return i.unshift(["M",n.x,n.y]),i}(this.points,!0)},t}(sN),cN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.setCursor=function(e){this.context.view.getCanvas().setCursor(e)},t.prototype.default=function(){this.setCursor("default")},t.prototype.pointer=function(){this.setCursor("pointer")},t.prototype.move=function(){this.setCursor("move")},t.prototype.crosshair=function(){this.setCursor("crosshair")},t.prototype.wait=function(){this.setCursor("wait")},t.prototype.help=function(){this.setCursor("help")},t.prototype.text=function(){this.setCursor("text")},t.prototype.eResize=function(){this.setCursor("e-resize")},t.prototype.wResize=function(){this.setCursor("w-resize")},t.prototype.nResize=function(){this.setCursor("n-resize")},t.prototype.sResize=function(){this.setCursor("s-resize")},t.prototype.neResize=function(){this.setCursor("ne-resize")},t.prototype.nwResize=function(){this.setCursor("nw-resize")},t.prototype.seResize=function(){this.setCursor("se-resize")},t.prototype.swResize=function(){this.setCursor("sw-resize")},t.prototype.nsResize=function(){this.setCursor("ns-resize")},t.prototype.ewResize=function(){this.setCursor("ew-resize")},t}(iS),uN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.filterView=function(e,t,n){var r=this;e.getScaleByField(t)&&e.filter(t,n),e.views&&e.views.length&&Hp(e.views,(function(e){r.filterView(e,t,n)}))},t.prototype.filter=function(){var e=yS(this.context);if(e){var t=this.context.view,n=e.component,r=n.get("field");if(ES(e)){if(r){var i=n.getItemsByState("unchecked"),a=RS(t,r),o=i.map((function(e){return e.name}));o.length?this.filterView(t,r,(function(e){var t=a.getText(e);return!o.includes(t)})):this.filterView(t,r,null),t.render(!0)}}else if(bS(e)){var s=n.getValue(),l=s[0],c=s[1];this.filterView(t,r,(function(e){return e>=l&&e<=c})),t.render(!0)}}},t}(iS);function hN(e,t,n,r){var i=Math.min(n[t],r[t]),a=Math.max(n[t],r[t]),o=e.range,s=o[0],l=o[1];if(i<s&&(i=s),a>l&&(a=l),i===l&&a===l)return null;var c=e.invert(i),u=e.invert(a);if(e.isCategory){var h=e.values.indexOf(c),p=e.values.indexOf(u),d=e.values.slice(h,p+1);return function(e){return d.includes(e)}}return function(e){return e>=c&&e<=u}}!function(e){e.FILTER="brush-filter-processing",e.RESET="brush-filter-reset",e.BEFORE_FILTER="brush-filter:beforefilter",e.AFTER_FILTER="brush-filter:afterfilter",e.BEFORE_RESET="brush-filter:beforereset",e.AFTER_RESET="brush-filter:afterreset"}(aN||(aN={}));var pN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return kp(t,e),t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},t.prototype.filter=function(){var e,t;if(CS(this.context)){var n=this.context.event.target.getCanvasBBox();e={x:n.x,y:n.y},t={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;e=this.startPoint,t=this.context.getCurrentPoint()}if(!(Math.abs(e.x-t.x)<5||Math.abs(e.x-t.y)<5)){var r=this.context,i=r.view,a={view:i,event:r.event,dims:this.dims};i.emit(aN.BEFORE_FILTER,Tk.fromData(i,aN.BEFORE_FILTER,a));var o=i.getCoordinate(),s=o.invert(t),l=o.invert(e);if(this.hasDim("x")){var c=i.getXScale(),u=hN(c,"x",s,l);this.filterView(i,c.field,u)}if(this.hasDim("y")){var h=i.getYScales()[0];u=hN(h,"y",s,l);this.filterView(i,h.field,u)}this.reRender(i,{source:aN.FILTER}),i.emit(aN.AFTER_FILTER,Tk.fromData(i,aN.AFTER_FILTER,a))}},t.prototype.end=function(){this.isStarted=!1},t.prototype.reset=function(){var e=this.context.view;if(e.emit(aN.BEFORE_RESET,Tk.fromData(e,aN.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var t=e.getXScale();this.filterView(e,t.field,null)}if(this.hasDim("y")){var n=e.getYScales()[0];this.filterView(e,n.field,null)}this.reRender(e,{source:aN.RESET}),e.emit(aN.AFTER_RESET,Tk.fromData(e,aN.AFTER_RESET,{}))},t.prototype.filterView=function(e,t,n){e.filter(t,n)},t.prototype.reRender=function(e,t){e.render(!0,t)},t}(iS),dN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.filterView=function(e,t,n){Hp(FS(e),(function(e){e.filter(t,n)}))},t.prototype.reRender=function(e){Hp(FS(e),(function(e){e.render(!0)}))},t}(pN),fN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.filter=function(){var e=yS(this.context),t=this.context.view,n=SS(t);if(CS(this.context)){var r=wS(this.context,10);r&&Hp(n,(function(e){r.includes(e)?e.show():e.hide()}))}else if(e){var i=e.component,a=i.get("field");if(ES(e)){if(a){var o=i.getItemsByState("unchecked"),s=RS(t,a),l=o.map((function(e){return e.name}));Hp(n,(function(e){var t=_S(e,a),n=s.getText(t);l.indexOf(n)>=0?e.hide():e.show()}))}}else if(bS(e)){var c=i.getValue(),u=c[0],h=c[1];Hp(n,(function(e){var t=_S(e,a);t>=u&&t<=h?e.show():e.hide()}))}}},t.prototype.clear=function(){Hp(SS(this.context.view),(function(e){e.show()}))},t.prototype.reset=function(){this.clear()},t}(iS),mN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.byRecord=!1,t}return kp(t,e),t.prototype.filter=function(){CS(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},t.prototype.filterByRecord=function(){var e=this.context.view,t=wS(this.context,10);if(t){var n=e.getXScale().field,r=e.getYScales()[0].field,i=t.map((function(e){return e.getModel().data}));Hp(FS(e),(function(e){Hp(SS(e),(function(e){var t=e.getModel().data;PS(i,t,n,r)?e.show():e.hide()}))}))}},t.prototype.filterByBBox=function(){var e=this;Hp(FS(this.context.view),(function(t){var n=TS(e.context,t,10),r=SS(t);n&&Hp(r,(function(e){n.includes(e)?e.show():e.hide()}))}))},t.prototype.reset=function(){Hp(FS(this.context.view),(function(e){Hp(SS(e),(function(e){e.show()}))}))},t}(iS),gN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return kp(t,e),t.prototype.getButtonCfg=function(){return Rd(this.buttonCfg,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=t.addShape({type:"text",name:"button-text",attrs:_p({text:e.text},e.textStyle)}).getBBox(),r=Ek(e.padding),i=t.addShape({type:"rect",name:"button-rect",attrs:_p({x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},e.style)});i.toBack(),t.on("mouseenter",(function(){i.attr(e.activeStyle)})),t.on("mouseleave",(function(){i.attr(e.style)})),this.buttonGroup=t},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=Qm(null,[["t",e.x-n.width-10,e.y+n.height+5]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(iS),vN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return kp(t,e),t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},t.prototype.drag=function(){if(this.startPoint){var e=this.context.getCurrentPoint(),t=this.context.view,n=this.context.event;this.dragStart?t.emit("drag",{target:n.target,x:n.x,y:n.y}):MS(e,this.startPoint)>4&&(t.emit("dragstart",{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},t.prototype.end=function(){if(this.dragStart){var e=this.context.view,t=this.context.event;e.emit("dragend",{target:t.target,x:t.x,y:t.y})}this.starting=!1,this.dragStart=!1},t}(iS),yN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return kp(t,e),t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},t.prototype.move=function(){if(this.starting){var e=this.startPoint,t=this.context.getCurrentPoint();if(MS(e,t)>5&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,r=Qm(this.startMatrix,[["t",t.x-e.x,t.y-e.y]]);n.backgroundGroup.setMatrix(r),n.foregroundGroup.setMatrix(r),n.middleGroup.setMatrix(r)}}},t.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},t.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},t}(iS),xN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return kp(t,e),t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.getScale=function(e){var t=this.context.view;return"x"===e?t.getXScale():t.getYScales()[0]},t.prototype.resetDim=function(e){var t=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var n=this.getScale(e);t.scale(n.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},t.prototype.reset=function(){this.resetDim("x"),this.resetDim("y"),this.context.view.render(!0)},t}(iS),EN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return kp(t,e),t.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0,Hp(this.dims,(function(t){var n=e.getScale(t),r=n.min,i=n.max,a=n.values;e.startCache[t]={min:r,max:i,values:a}}))},t.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},t.prototype.translate=function(){var e=this;if(this.starting){var t=this.startPoint,n=this.context.view.getCoordinate(),r=this.context.getCurrentPoint(),i=n.invert(t),a=n.invert(r),o=a.x-i.x,s=a.y-i.y,l=this.context.view;Hp(this.dims,(function(t){e.translateDim(t,{x:-1*o,y:-1*s})})),l.render(!0)}},t.prototype.translateDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.translateLinear(e,n,t)}},t.prototype.translateLinear=function(e,t,n){var r=this.context.view,i=this.startCache[e],a=i.min,o=i.max,s=o-a,l=n[e]*s;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:a,max:o}),r.scale(t.field,{nice:!1,min:a+l,max:o+l})},t.prototype.reset=function(){e.prototype.reset.call(this),this.startPoint=null,this.starting=!1},t}(xN),bN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zoomRatio=.05,t}return kp(t,e),t.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},t.prototype.zoom=function(e){var t=this;Hp(this.dims,(function(n){t.zoomDim(n,e)})),this.context.view.render(!0)},t.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},t.prototype.zoomDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.zoomLinear(e,n,t)}},t.prototype.zoomLinear=function(e,t,n){var r=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:t.min,max:t.max});var i=this.cacheScaleDefs[e],a=i.max-i.min,o=t.min,s=t.max,l=n*a,c=o-l,u=s+l,h=(u-c)/a;u>c&&h<100&&h>.01&&r.scale(t.field,{nice:!1,min:o-l,max:s+l})},t}(xN);var CN,wN,TN,SN,kN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.scroll=function(e){var t=this.context,n=t.view,r=t.event;if(n.getOptions().scrollbar){var i=(null==e?void 0:e.wheelDelta)||1,a=n.getController("scrollbar"),o=n.getXScale(),s=n.getOptions().data,l=Jd(nd(s,o.field)),c=Jd(o.values),u=a.getValue(),h=Math.floor((l-c)*u)+(function(e){return e.gEvent.originalEvent.deltaY>0}(r)?i:-i),p=ud(h/(l-c)+i/(l-c)/1e4,0,1);a.setValue(p)}},t}(iS);function _N(e){return e.isInPlot()}function AN(e){return e.gEvent.preventDefault(),e.gEvent.originalEvent.deltaY>0}function ON(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.reduce((function(e,t){return t(e)}),t)}}function IN(e,t){var n={};return null!==e&&"object"==typeof e&&t.forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n}function MN(e,t){return t?Zp(t,(function(e,t,n){return e.replace(new RegExp("{\\s*"+n+"\\s*}","g"),t)}),e):e}CN="dark",wN=KS(U_),ck[bd(CN)]=lk(wN),kf("canvas",tO),kf("svg",$O),Mk("Polygon",cI),Mk("Interval",iI),Mk("Schema",uI),Mk("Path",YO),Mk("Point",lI),Mk("Line",aI),Mk("Area",XO),Mk("Edge",qO),Mk("Heatmap",KO),Mk("Violin",hI),Vk("base",d_),Vk("interval",EI),Vk("pie",wI),Vk("polar",CI),Wk("overlap",(function(e,t,n,r){var i=new SI;Hp(t,(function(e){for(var t=e.find((function(e){return"text"===e.get("type")})),n=t.attr(),r=n.x,a=n.y,o=!1,s=0;s<=8;s++){var l=kI(t,r,a,s);if(i.hasGap(l)){i.fillGap(l),o=!0;break}}o||e.remove(!0)})),i.destroy()})),Wk("distribute",(function(e,t,n,r){if(e.length&&t.length){var i=e[0]?e[0].offset:0,a=t[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=2*(o+i)+28,c={start:a.start,end:a.end},u=[[],[]];e.forEach((function(e){e&&("right"===e.textAlign?u[0].push(e):u[1].push(e))})),u.forEach((function(e,n){var r=l/14;e.length>r&&(e.sort((function(e,t){return t["..percent"]-e["..percent"]})),e.splice(r,e.length-r)),e.sort((function(e,t){return e.y-t.y})),function(e,t,n,r,i,a){var o,s=!0,l=r.start,c=r.end,u=Math.min(l.y,c.y),h=Math.abs(l.y-c.y),p=0,d=Number.MIN_VALUE,f=t.map((function(e){return e.y>p&&(p=e.y),e.y<d&&(d=e.y),{size:n,targets:[e.y-u]}}));for(d-=u,p-u>h&&(h=p-u);s;)for(f.forEach((function(e){var t=(Math.min.apply(d,e.targets)+Math.max.apply(d,e.targets))/2;e.pos=Math.min(Math.max(d,t-e.size/2),h-e.size)})),s=!1,o=f.length;o--;)if(o>0){var m=f[o-1],g=f[o];m.pos+m.size>g.pos&&(m.size+=g.size,m.targets=m.targets.concat(g.targets),m.pos+m.size>h&&(m.pos=h-m.size),f.splice(o,1),s=!0)}o=0,f.forEach((function(e){var r=u+n/2;e.targets.forEach((function(){t[o].y=e.pos+r,r+=n,o++}))}));for(var v={},y=0,x=e;y<x.length;y++){var E=x[y];v[E.get("id")]=E}t.forEach((function(e){var t=e.r*e.r,n=Math.pow(Math.abs(e.y-i.y),2);if(t<n)e.x=i.x;else{var r=Math.sqrt(t-n);e.x=a?i.x+r:i.x-r}var o=v[e.id];o.attr("x",e.x),o.attr("y",e.y);var s=Up(o.getChildren(),(function(e){return"text"===e.get("type")}));s&&(s.attr("y",e.y),s.attr("x",e.x))}))}(t,e,14,c,s,n)}))}Hp(e,(function(e){if(e&&e.labelLine){var t=e.offset,n=e.angle,r=AT(s.x,s.y,o,n),i=AT(s.x,s.y,o+t/2,n),a=e.x+Yd(e,"offsetX",0),l=e.y+Yd(e,"offsetY",0),c={x:a-4*Math.cos(n),y:l-4*Math.sin(n)};zp(e.labelLine)||(e.labelLine={}),e.labelLine.path=["M ".concat(r.x),"".concat(r.y," Q").concat(i.x),"".concat(i.y," ").concat(c.x),c.y].join(",")}}))}})),Wk("fixed-overlap",(function(e,t,n,r){var i=new SI;Hp(t,(function(e){(function(e,t,n){void 0===n&&(n=100);var r,i=e.attr(),a=i.x,o=i.y,s=e.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),c=1,u=0,h=0;if(t.hasGap(s))return t.fillGap(s),!0;for(var p,d,f=!1,m=0,g={};Math.min(Math.abs(u),Math.abs(h))<l&&m<n;)if(p=c+=-1,d=void 0,h=~~(r=[(d=.1*p)*Math.cos(d),d*Math.sin(d)])[1],((u=~~r[0])||h)&&!g["".concat(u,"-").concat(h)]&&(e.attr({x:a+u,y:o+h}),u+h<0&&e.attr("textAlign","right"),m++,t.hasGap(e.getCanvasBBox()))){t.fillGap(e.getCanvasBBox()),f=!0,g["".concat(u,"-").concat(h)]=!0;break}return f})(e.find((function(e){return"text"===e.get("type")})),i)||e.remove(!0)})),i.destroy()})),Wk("hide-overlap",(function(e,t,n,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i].get("visible"))for(var o=i+1;o<t.length;o++){var s=t[o];if(a&&s&&a!==s&&s.get("visible"))PI(l_(a,e[i],Yd(e[i],"background.padding")),l_(s,e[o],Yd(e[o],"background.padding")))&&t[o].set("visible",!1)}}})),Wk("limit-in-shape",(function(e,t,n,r){Hp(t,(function(e,t){var r=e.getCanvasBBox(),i=n[t].getBBox();(r.minX<i.minX||r.minY<i.minY||r.maxX>i.maxX||r.maxY>i.maxY)&&e.remove(!0)}))})),Wk("limit-in-canvas",(function(e,t,n,r){Hp(t,(function(e){var t=r.minX,n=r.minY,i=r.maxX,a=r.maxY,o=e.getCanvasBBox(),s=o.minX,l=o.minY,c=o.maxX,u=o.maxY,h=o.x,p=o.y,d=o.width,f=o.height,m=h,g=p;(s<t||c<t)&&(m=t),(l<n||u<n)&&(g=n),s>i?m=i-d:c>i&&(m-=c-i),l>a?g=a-f:u>a&&(g-=u-a),m===h&&g===p||a_(e,m-h,g-p)}))})),Wk("limit-in-plot",(function(e,t,n,r,i){if(!(t.length<=0)){var a=(null==i?void 0:i.direction)||["top","right","bottom","left"],o=(null==i?void 0:i.action)||"translate",s=(null==i?void 0:i.margin)||0,l=t[0].get("coordinate");if(l){var c=function(e,t){void 0===t&&(t=0);var n=e.start,r=e.end,i=e.getWidth(),a=e.getHeight(),o=Math.min(n.x,r.x),s=Math.min(n.y,r.y);return RT.fromRange(o-t,s-t,o+i+t,s+a+t)}(l,s),u=c.minX,h=c.minY,p=c.maxX,d=c.maxY;Hp(t,(function(e){var t=e.getCanvasBBox(),n=t.minX,r=t.minY,i=t.maxX,s=t.maxY,l=t.x,c=t.y,f=t.width,m=t.height,g=l,v=c;if(a.indexOf("left")>=0&&(n<u||i<u)&&(g=u),a.indexOf("top")>=0&&(r<h||s<h)&&(v=h),a.indexOf("right")>=0&&(n>p?g=p-f:i>p&&(g-=i-p)),a.indexOf("bottom")>=0&&(r>d?v=d-m:s>d&&(v-=s-d)),g!==l||v!==c){var y=g-l;if("translate"===o)a_(e,y,v-c);else if("ellipsis"===o){e.findAll((function(e){return"text"===e.get("type")})).forEach((function(e){var t=Wd(e.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),n=e.getCanvasBBox(),r=function(e,t,n){var r,i=$I("...",n);r=ed(e)?e:Ed(e);var a,o,s=t,l=[];if($I(e,n)<=t)return e;for(;a=r.substr(0,16),!((o=$I(a,n))+i>s&&o>s);)if(l.push(a),s-=o,!(r=r.substr(16)))return l.join("");for(;a=r.substr(0,1),!((o=$I(a,n))+i>s);)if(l.push(a),s-=o,!(r=r.substr(1)))return l.join("");return"".concat(l.join(""),"...")}(e.attr("text"),n.width-Math.abs(y),t);e.attr("text",r)}))}else e.hide()}}))}}})),Wk("pie-outer",(function(e,t,n,r){var i=Fp(e,(function(e){return!Dp(e)})),a=t[0]&&t[0].get("coordinate");if(a){for(var o=a.getCenter(),s=a.getRadius(),l={},c=0,u=t;c<u.length;c++){var h=u[c];l[h.get("id")]=h}var p=Yd(i[0],"labelHeight",14),d=Yd(i[0],"offset",0);if(!(d<=0)){var f="right",m=ld(i,(function(e){return e.x<o.x?"left":f})),g=a.start,v=a.end,y=Math.min(2*(s+d+p),a.getHeight()),x=y/2,E={minX:g.x,maxX:v.x,minY:o.y-x,maxY:o.y+x};Hp(m,(function(e,t){var n=Math.floor(y/p);e.length>n&&(e.sort((function(e,t){return t.percent-e.percent})),Hp(e,(function(e,t){t+1>n&&(l[e.id].set("visible",!1),e.invisible=!0)}))),TI(e,p,E)})),Hp(m,(function(e,t){Hp(e,(function(e){var n=t===f,r=l[e.id].getChildByIndex(0);if(r){var i=s+d,c=e.y-o.y,u=Math.pow(i,2),h=Math.pow(c,2),p=u-h>0?u-h:0,m=Math.sqrt(p),g=Math.abs(Math.cos(e.angle)*i);e.x=n?o.x+Math.max(m,g):o.x-Math.max(m,g)}r&&(r.attr("y",e.y),r.attr("x",e.x)),function(e,t){var n=t.getCenter(),r=t.getRadius();if(e&&e.labelLine){var i=e.angle,a=e.offset,o=AT(n.x,n.y,r,i),s=e.x+Yd(e,"offsetX",0)*(Math.cos(i)>0?1:-1),l=e.y+Yd(e,"offsetY",0)*(Math.sin(i)>0?1:-1),c={x:s-4*Math.cos(i),y:l-4*Math.sin(i)},u=e.labelLine.smooth,h=[],p=c.x-n.x,d=c.y-n.y,f=Math.atan(d/p);if(p<0&&(f+=Math.PI),!1===u){zp(e.labelLine)||(e.labelLine={});var m=0;(i<0&&i>-Math.PI/2||i>1.5*Math.PI)&&c.y>o.y&&(m=1),i>=0&&i<Math.PI/2&&c.y>o.y&&(m=1),i>=Math.PI/2&&i<Math.PI&&o.y>c.y&&(m=1),(i<-Math.PI/2||i>=Math.PI&&i<1.5*Math.PI)&&o.y>c.y&&(m=1);var g=a/2>4?4:Math.max(a/2-1,0),v=AT(n.x,n.y,r+g,i),y=AT(n.x,n.y,r+a/2,f);h.push("M ".concat(o.x," ").concat(o.y)),h.push("L ".concat(v.x," ").concat(v.y)),h.push("A ".concat(n.x," ").concat(n.y," 0 ").concat(0," ").concat(m," ").concat(y.x," ").concat(y.y)),h.push("L ".concat(c.x," ").concat(c.y))}else{v=AT(n.x,n.y,r+(a/2>4?4:Math.max(a/2-1,0)),i);var x=o.x<n.x?1:-1;h.push("M ".concat(c.x," ").concat(c.y));var E=(o.y-n.y)/(o.x-n.x),b=(c.y-n.y)/(c.x-n.x);Math.abs(E-b)>Math.pow(Math.E,-16)&&h.push.apply(h,["C",c.x+4*x,c.y,2*v.x-o.x,2*v.y-o.y,o.x,o.y]),h.push("L ".concat(o.x," ").concat(o.y))}e.labelLine.path=h.join(" ")}}(e,a)}))}))}}})),Wk("adjust-color",(function(e,t,n){if(0!==n.length){var r=n[0].get("element").geometry.theme,i=r.labels||{},a=i.fillColorLight,o=i.fillColorDark;n.forEach((function(e,n){var i=t[n].find((function(e){return"text"===e.get("type")})),s=RT.fromObject(e.getBBox()),l=RT.fromObject(i.getCanvasBBox()),c=!s.contains(l),u=function(e){var t=tx.toRGB(e).toUpperCase();if(DI[t])return DI[t];var n=tx.rgb2arr(t);return(299*n[0]+587*n[1]+114*n[2])/1e3<128}(e.attr("fill"));c?i.attr(r.overflowLabels.style):u?a&&i.attr("fill",a):o&&i.attr("fill",o)}))}})),Wk("interval-adjust-position",(function(e,t,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),a=null==i?void 0:i.geometry;if(a&&"interval"===a.type)BI(a,t,n)&&n.forEach((function(e,n){var r=t[n];!function(e,t,n){var r=e.coordinate,i=RT.fromObject(n.getBBox()),a=s_(t);r.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:"center"}):a.attr({y:i.minY+i.height/2,textBaseline:"middle"})}(a,r,e)}))}})),Wk("interval-hide-overlap",(function(e,t,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),a=null==i?void 0:i.geometry;if(a&&"interval"===a.type){var o,s=function(e){var t=[],n=Math.max(Math.floor(e.length/500),1);return Hp(e,(function(e,r){r%n==0?t.push(e):e.set("visible",!1)})),t}(t),l=a.getXYFields()[0],c=[],u=[],h=ld(s,(function(e){return e.get("data")[l]})),p=td(Gd(s,(function(e){return e.get("data")[l]})));s.forEach((function(e){e.set("visible",!0)}));var d=function(e){e&&(e.length&&u.push(e.pop()),u.push.apply(u,e))};for(Jd(p)>0&&(o=p.shift(),d(h[o])),Jd(p)>0&&(o=p.pop(),d(h[o])),Hp(p.reverse(),(function(e){d(h[e])}));u.length>0;){var f=u.shift();f.get("visible")&&(c_(f,c)?f.set("visible",!1):c.push(f))}}}})),Wk("point-adjust-position",(function(e,t,n,r,i){var a,o;if(0!==n.length){var s=null===(a=n[0])||void 0===a?void 0:a.get("element"),l=null==s?void 0:s.geometry;if(l&&"point"===l.type){var c=l.getXYFields(),u=c[0],h=c[1],p=ld(t,(function(e){return e.get("data")[u]})),d=[],f=i&&i.offset||(null===(o=e[0])||void 0===o?void 0:o.offset)||12;Gd(jp(p).reverse(),(function(e){for(var t=function(e,t){var n=e.getXYFields()[1],r=[],i=t.sort((function(e,t){return e.get("data")[n]-e.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}(l,p[e]);t.length;){var n=t.shift(),r=s_(n);if(zI(d,n,(function(e,t){return e.get("data")[u]===t.get("data")[u]&&e.get("data")[h]===t.get("data")[h]})))r.set("visible",!1);else{var i=!1;HI(d,n)&&(r.attr("y",r.attr("y")+2*f),i=HI(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),Wk("pie-spider",(function(e,t,n,r){var i=t[0]&&t[0].get("coordinate");if(i){for(var a=i.getCenter(),o=i.getRadius(),s={},l=0,c=t;l<c.length;l++){var u=c[l];s[u.get("id")]=u}var h=Yd(e[0],"labelHeight",14),p=Math.max(Yd(e[0],"offset",0),4);Hp(e,(function(e){if(Yd(s,[e.id])){var t=e.x>a.x||e.x===a.x&&e.y>a.y,n=Dp(e.offsetX)?4:e.offsetX,r=AT(a.x,a.y,o+4,e.angle),i=p+n;e.x=a.x+(t?1:-1)*(o+i),e.y=r.y}}));var d=i.start,f=i.end,m="right",g=ld(e,(function(e){return e.x<a.x?"left":m})),v=2*(o+p)+h;Hp(g,(function(e){var t=e.length*h;t>v&&(v=Math.min(t,Math.abs(d.y-f.y)))}));var y={minX:d.x,maxX:f.x,minY:a.y-v/2,maxY:a.y+v/2};Hp(g,(function(e,t){var n=v/h;e.length>n&&(e.sort((function(e,t){return t.percent-e.percent})),Hp(e,(function(e,t){t>n&&(s[e.id].set("visible",!1),e.invisible=!0)}))),TI(e,h,y)}));var x=y.minY,E=y.maxY;Hp(g,(function(e,t){var n=t===m;Hp(e,(function(e){var t=Yd(s,e&&[e.id]);if(t)if(e.y<x||e.y>E)t.set("visible",!1);else{var r=t.getChildByIndex(0),a=r.getCanvasBBox(),o=n?a.x:a.maxX,l=a.y+a.height/2;a_(r,e.x-o,e.y-l),e.labelLine&&function(e,t,n){var r,i=t.getCenter(),a=t.getRadius(),o={x:e.x-(n?4:-4),y:e.y},s=AT(i.x,i.y,a+4,e.angle),l={x:o.x,y:o.y},c={x:s.x,y:s.y},u=AT(i.x,i.y,a,e.angle);if(o.y!==s.y){var h=n?4:-4;l.y=o.y,e.angle<0&&e.angle>=-Math.PI/2&&(l.x=Math.max(s.x,o.x-h),o.y<s.y?c.y=l.y:(c.y=s.y,c.x=Math.max(c.x,l.x-h))),e.angle>0&&e.angle<Math.PI/2&&(l.x=Math.max(s.x,o.x-h),o.y>s.y?c.y=l.y:(c.y=s.y,c.x=Math.max(c.x,l.x-h))),e.angle>Math.PI/2&&(l.x=Math.min(s.x,o.x-h),o.y>s.y?c.y=l.y:(c.y=s.y,c.x=Math.min(c.x,l.x-h))),e.angle<-Math.PI/2&&(l.x=Math.min(s.x,o.x-h),o.y<s.y?c.y=l.y:(c.y=s.y,c.x=Math.min(c.x,l.x-h)))}r=["M ".concat(o.x,",").concat(o.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(c.x,",").concat(c.y),"L ".concat(s.x,",").concat(s.y),"L ".concat(u.x,",").concat(u.y)].join(" "),e.labelLine=Rd({},e.labelLine,{path:r})}(e,i,n)}}))}))}})),Wk("path-adjust-position",(function(e,t,n,r,i){var a,o;if(0!==n.length){var s=null===(a=n[0])||void 0===a?void 0:a.get("element"),l=null==s?void 0:s.geometry;if(l&&!(["path","line","area"].indexOf(l.type)<0)){var c=l.getXYFields(),u=c[0],h=c[1],p=ld(t,(function(e){return e.get("data")[u]})),d=[],f=i&&i.offset||(null===(o=e[0])||void 0===o?void 0:o.offset)||12;Gd(jp(p).reverse(),(function(e){for(var t=function(e,t){var n=e.getXYFields()[1],r=[],i=t.sort((function(e,t){return e.get("data")[n]-e.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}(l,p[e]);t.length;){var n=t.shift(),r=s_(n);if(jI(d,n,(function(e,t){return e.get("data")[u]===t.get("data")[u]&&e.get("data")[h]===t.get("data")[h]})))r.set("visible",!1);else{var i=!1;GI(d,n)&&(r.attr("y",r.attr("y")+2*f),i=GI(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),Dk("fade-in",(function(e,t,n){var r={fillOpacity:Dp(e.attr("fillOpacity"))?1:e.attr("fillOpacity"),strokeOpacity:Dp(e.attr("strokeOpacity"))?1:e.attr("strokeOpacity"),opacity:Dp(e.attr("opacity"))?1:e.attr("opacity")};e.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),e.animate(r,t)})),Dk("fade-out",(function(e,t,n){var r=t.easing,i=t.duration,a=t.delay;e.animate({fillOpacity:0,strokeOpacity:0,opacity:0},i,r,(function(){e.remove(!0)}),a)})),Dk("grow-in-x",(function(e,t,n){YI(e,t,n.coordinate,n.minYPoint,"x")})),Dk("grow-in-xy",(function(e,t,n){YI(e,t,n.coordinate,n.minYPoint,"xy")})),Dk("grow-in-y",(function(e,t,n){YI(e,t,n.coordinate,n.minYPoint,"y")})),Dk("scale-in-x",(function(e,t,n){var r=e.getBBox(),i=e.get("origin").mappingData.points,a=i[0].y-i[1].y>0?r.maxX:r.minX,o=(r.minY+r.maxY)/2;e.applyToMatrix([a,o,1]);var s=Qm(e.getMatrix(),[["t",-a,-o],["s",.01,1],["t",a,o]]);e.setMatrix(s),e.animate({matrix:Qm(e.getMatrix(),[["t",-a,-o],["s",100,1],["t",a,o]])},t)})),Dk("scale-in-y",(function(e,t,n){var r=e.getBBox(),i=e.get("origin").mappingData,a=(r.minX+r.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?r.maxY:r.minY;e.applyToMatrix([a,s,1]);var l=Qm(e.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);e.setMatrix(l),e.animate({matrix:Qm(e.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},t)})),Dk("wave-in",(function(e,t,n){var r=jT(n.coordinate,20),i=r.type,a=r.startState,o=r.endState,s=e.setClip({type:i,attrs:a});s.animate(o,_p(_p({},t),{callback:function(){e&&!e.get("destroyed")&&e.set("clipShape",null),s.remove(!0)}}))})),Dk("zoom-in",(function(e,t,n){XI(e,t,"zoomIn")})),Dk("zoom-out",(function(e,t,n){XI(e,t,"zoomOut")})),Dk("position-update",(function(e,t,n){var r=n.toAttrs,i=r.x,a=r.y;delete r.x,delete r.y,e.attr(r),e.animate({x:i,y:a},t)})),Dk("sector-path-update",(function(e,t,n){var r=n.toAttrs,i=n.coordinate,a=r.path||[],o=a.map((function(e){return e[0]}));if(!(a.length<1)){var s=WI(a),l=s.startAngle,c=s.endAngle,u=s.radius,h=s.innerRadius,p=WI(e.attr("path")),d=p.startAngle,f=p.endAngle,m=i.getCenter(),g=l-d,v=c-f;0!==g||0!==v?e.animate((function(e){var t=d+e*g,n=f+e*v;return _p(_p({},r),{path:jd(o,["M","A","A","Z"])?IT(m.x,m.y,u,t,n):OT(m.x,m.y,u,t,n,h)})}),_p(_p({},t),{callback:function(){e.attr("path",a)}})):e.attr("path",a)}})),Dk("path-in",(function(e,t,n){var r=e.getTotalLength();e.attr("lineDash",[r]),e.animate((function(e){return{lineDashOffset:(1-e)*r}}),t)})),rS("rect",tM),rS("mirror",eM),rS("list",ZI),rS("matrix",JI),rS("circle",QI),rS("tree",nM),Ck("axis",dM),Ck("legend",vM),Ck("tooltip",Lk),Ck("annotation",oM),Ck("slider",yM),Ck("scrollbar",xM),lS("tooltip",wM),lS("sibling-tooltip",TM),lS("ellipsis-text",SM),lS("element-active",OM),lS("element-single-active",LM),lS("element-range-active",NM),lS("element-highlight",jM),lS("element-highlight-by-x",$M),lS("element-highlight-by-color",GM),lS("element-single-highlight",UM),lS("element-range-highlight",YM),lS("element-sibling-highlight",YM,{effectSiblings:!0,effectByRecord:!0}),lS("element-selected",WM),lS("element-single-selected",XM),lS("element-range-selected",VM),lS("element-link-by-color",IM),lS("active-region",CM),lS("list-active",KM),lS("list-selected",ZM),lS("list-highlight",QM),lS("list-unchecked",JM),lS("list-checked",eN),lS("legend-item-highlight",QM,{componentNames:["legend"]}),lS("axis-label-highlight",QM,{componentNames:["axis"]}),lS("rect-mask",rN),lS("x-rect-mask",oN,{dim:"x"}),lS("y-rect-mask",oN,{dim:"y"}),lS("circle-mask",nN),lS("path-mask",sN),lS("smooth-path-mask",lN),lS("cursor",cN),lS("data-filter",uN),lS("brush",pN),lS("brush-x",pN,{dims:["x"]}),lS("brush-y",pN,{dims:["y"]}),lS("sibling-filter",dN),lS("sibling-x-filter",dN),lS("sibling-y-filter",dN),lS("element-filter",fN),lS("element-sibling-filter",mN),lS("element-sibling-filter-record",mN,{byRecord:!0}),lS("view-drag",vN),lS("view-move",yN),lS("scale-translate",EN),lS("scale-zoom",bN),lS("reset-button",gN,{name:"reset-button",text:"reset"}),lS("mousewheel-scroll",kN),XS("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),XS("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),XS("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),XS("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),XS("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),XS("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),XS("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),XS("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),XS("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),XS("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),XS("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),XS("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),XS("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:_N,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:_N,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:_N,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),XS("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),XS("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:_N,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:_N,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:_N,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),XS("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:_N,action:"path-mask:start"},{trigger:"mousedown",isEnable:_N,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),XS("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),XS("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),XS("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),XS("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),XS("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),XS("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),XS("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(e){return AN(e.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(e){return!AN(e.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),XS("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),XS("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]}),(SN=TN||(TN={})).ERROR="error",SN.WARN="warn",SN.INFO="log";function NN(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=0;return"AntV/G2Plot: "+e.replace(/%s/g,(function(){return""+t[r++]}))}function FN(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t||console[e](NN.apply(void 0,Op([n],r)))}function LN(e){if(!e)return{width:0,height:0};var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function PN(e,t){return BN(e).find((function(e){return e.type===t}))}function RN(e){return Zp(e.geometries,(function(e,t){return e.concat(t.elements)}),[])}function DN(e){return Yd(e,["views","length"],0)<=0?RN(e):Zp(e.views,(function(e,t){return e.concat(DN(t))}),RN(e))}function BN(e){return Yd(e,["views","length"],0)<=0?e.geometries:Zp(e.views,(function(e,t){return e.concat(t.geometries)}),e.geometries)}function zN(e,t){return e.views.find((function(e){return e.id===t}))}function HN(e){var t=e.parent;return t?t.views:[]}function jN(e){return HN(e).filter((function(t){return t!==e}))}function GN(e){if(!Pp(e,"Object"))return e;var t=_p({},e);return t.formatter&&!t.content&&(t.content=t.formatter),t}function $N(e,t,n){for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,l,c,u=function(e,t,n,r){var i,a,o,s,l=[],c=!!r;if(c){o=[1/0,1/0],s=[-1/0,-1/0];for(var u=0,h=e.length;u<h;u++)o=Bm([0,0],o,d=e[u]),s=zm([0,0],s,d);o=Bm([0,0],o,r[0]),s=zm([0,0],s,r[1])}u=0;for(var p=e.length;u<p;u++){var d=e[u];if(n)i=e[u?u-1:p-1],a=e[(u+1)%p];else{if(0===u||u===p-1){l.push(d);continue}i=e[u-1],a=e[u+1]}var f=[0,0];f=Hm(f=Vm(f,a,i),f,t);var m=jm(d,i),g=jm(d,a),v=m+g;0!==v&&(m/=v,g/=v);var y=Hm([0,0],f,-m),x=Hm([0,0],f,g),E=Rm([0,0],d,y),b=Rm([0,0],d,x);c&&(E=Bm([0,0],E=zm([0,0],E,o),s),b=Bm([0,0],b=zm([0,0],b,o),s)),l.push(E),l.push(b)}return n&&l.push(l.shift()),l}(i,.4,r,n),h=i.length,p=[];for(a=0;a<h-1;a++)s=u[2*a],l=u[2*a+1],c=i[a+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}var YN={}.toString,UN=function(e,t){return YN.call(e)==="[object "+t+"]"},VN=function(e){return UN(e,"Array")},WN=function(e){if(!function(e){return"object"==typeof e&&null!==e}(e)||!UN(e,"Object"))return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},XN=function(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];a?WN(a)?(WN(e[i])||(e[i]={}),n<r?XN(e[i],a,n+1,r):e[i]=t[i]):VN(a)?(e[i]=[],e[i]=e[i].concat(a)):e[i]=a:e[i]=a}},qN=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)XN(e,t[r]);return e};function KN(e){return e?e.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g).map((function(e){return e.toLowerCase()})).join("-"):e}function QN(e){var t={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];Yd(e,"fill")&&(t.color=e.fill);var r=IN(e,n),i=r.shadowColor,a=r.shadowBlur,o=void 0===a?0:a,s=r.shadowOffsetX,l=void 0===s?0:s,c=r.shadowOffsetY,u=void 0===c?0:c;t["text-shadow"]=""+[i,l+"px",u+"px",o+"px"].join(" ");var h=IN(e,n),p=h.stroke,d=h.lineWidth,f=void 0===d?0:d;return t["-webkit-text-stroke"]=""+[f+"px",p].join(" "),Hp(e,(function(e,r){["fontSize"].includes(r)&&pd(e)?t[KN(r)]=e+"px":r&&!n.includes(r)&&(t[KN(r)]=""+e)})),t}function ZN(e,t){e.style["pointer-events"]="none",Hp(t,(function(t,n){n&&t&&(e.style[n]=t)}))}var JN,eF=function(e,t,n){var r=t.statistic,i=t.plotType,a=r.title,o=r.content;[a,o].forEach((function(t,r){if(t){var s="";s=0===r?o?"translate(-50%, -100%)":"translate(-50%, -50%)":a?"translate(-50%, 0)":"translate(-50%, -50%)";var l=Rp(t.style)?t.style(n):t.style;e.annotation().html(_p({position:["50%","50%"],html:function(e,r){var a=r.getCoordinate(),o=0;if("pie"===i||"ring-progress"===i)o=a.getRadius()*a.innerRadius*2;else if("liquid"===i){var c=Yd(r.geometries,[0,"elements",0,"shape"]);if(c)o=c.find((function(e){return"wrap"===e.get("name")})).getCanvasBBox().width}else o||(o=a.getWidth());ZN(e,_p({width:o+"px",transform:s},QN(l)));var u=r.getData();if(t.customHtml)return t.customHtml(e,r,n,u);var h=t.content;return t.formatter&&(h=t.formatter(n,u)),h?ed(h)?h:""+h:"<div></div>"},key:(0===r?"top":"bottom")+"-statistic"},IN(t,["offsetX","offsetY","rotate","style","formatter"])))}}))};var tF=Ld((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=void 0===r?"sans-serif":r,a=t.fontWeight,o=t.fontStyle,s=t.fontVariant,l=(JN||(JN=document.createElement("canvas").getContext("2d")),JN);return l.font=[o,a,s,n+"px",i].join(" "),l.measureText(ed(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Op([e],xd(t)).join("")}));function nF(e){return"number"==typeof e&&!isNaN(e)}function rF(e,t){if(!e)return{};var n=e.filter((function(e){var n=Yd(e,[t]);return pd(n)&&!isNaN(n)})),r=n.every((function(e){return Yd(e,[t])>=0})),i=n.every((function(e){return Yd(e,[t])<=0}));return r?{min:0}:i?{max:0}:{}}function iF(e,t,n,r,i){if(void 0===i&&(i=[]),!Array.isArray(e))return{nodes:[],links:[]};var a=[],o={},s=-1;return e.forEach((function(e){var l=e[t],c=e[n],u=e[r],h=IN(e,i);o[l]||(o[l]=_p({id:++s,name:l},h)),o[c]||(o[c]=_p({id:++s,name:c},h)),a.push(_p({source:o[l].id,target:o[c].id,value:u},h))})),{nodes:Object.values(o).sort((function(e,t){return e.id-t.id})),links:a}}function aF(e,t){var n=Fp(e,(function(e){var n=e[t];return null===n||"number"==typeof n&&!isNaN(n)}));return FN(TN.WARN,n.length===e.length,"illegal data existed in chart data."),n}function oF(e){if(pd(e))return[e,e,e,e];if(Bp(e)){var t=e.length;if(1===t)return[e[0],e[0],e[0],e[0]];if(2===t)return[e[0],e[1],e[0],e[1]];if(3===t)return[e[0],e[1],e[2],e[1]];if(4===t)return e}return[0,0,0,0]}function sF(e,t,n){void 0===t&&(t="bottom"),void 0===n&&(n=25);var r=oF(e),i=[t.startsWith("top")?n:0,t.startsWith("right")?n:0,t.startsWith("bottom")?n:0,t.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function lF(e){var t=e.map((function(e){return oF(e)})),n=[0,0,0,0];return t.length>0&&(n=n.map((function(e,n){return t.forEach((function(r,i){e+=t[i][n]})),e}))),n}var cF="en-US",uF={};function hF(e,t){uF[e]=t}function pF(e){return{get:function(t,n){return MN(Yd(uF[e],t)||Yd(uF[cF],t)||Yd(uF["en-US"],t)||t,n)}}}var dF={},fF={},mF={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=1;e.default=function(){return"".concat(t++)}}(mF);var gF={},vF={},yF={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){e.apply(r,a)}),t)}}}(yF);var xF={};Object.defineProperty(xF,"__esModule",{value:!0}),xF.SensorTabIndex=xF.SensorClassName=xF.SizeSensorId=void 0;xF.SizeSensorId="size-sensor-id";xF.SensorClassName="size-sensor-object";xF.SensorTabIndex="-1",Object.defineProperty(vF,"__esModule",{value:!0}),vF.createSensor=void 0;var EF,bF=(EF=yF)&&EF.__esModule?EF:{default:EF},CF=xF;vF.createSensor=function(e){var t=void 0,n=[],r=(0,bF.default)((function(){n.forEach((function(t){t(e)}))})),i=function(){t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",r),t.parentNode.removeChild(t),t=void 0,n=[])};return{element:e,bind:function(i){t||(t=function(){"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=document.createElement("object");return t.onload=function(){t.contentDocument.defaultView.addEventListener("resize",r),r()},t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex="-1",t.style.opacity="0",t.setAttribute("class",CF.SensorClassName),t.setAttribute("tabindex",CF.SensorTabIndex),t.type="text/html",e.appendChild(t),t.data="about:blank",t}()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}};var wF={};Object.defineProperty(wF,"__esModule",{value:!0}),wF.createSensor=void 0;var TF=function(e){return e&&e.__esModule?e:{default:e}}(yF);wF.createSensor=function(e){var t=void 0,n=[],r=(0,TF.default)((function(){n.forEach((function(t){t(e)}))})),i=function(){t.disconnect(),n=[],t=void 0};return{element:e,bind:function(i){var a;t||((a=new ResizeObserver(r)).observe(e),r(),t=a),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}},Object.defineProperty(gF,"__esModule",{value:!0}),gF.createSensor=void 0;var SF=vF,kF="undefined"!=typeof ResizeObserver?wF.createSensor:SF.createSensor;gF.createSensor=kF,Object.defineProperty(fF,"__esModule",{value:!0}),fF.removeSensor=fF.getSensor=void 0;var _F=function(e){return e&&e.__esModule?e:{default:e}}(mF),AF=gF,OF=xF;var IF={};fF.getSensor=function(e){var t=e.getAttribute(OF.SizeSensorId);if(t&&IF[t])return IF[t];var n=(0,_F.default)();e.setAttribute(OF.SizeSensorId,n);var r=(0,AF.createSensor)(e);return IF[n]=r,r};fF.removeSensor=function(e){var t=e.element.getAttribute(OF.SizeSensorId);e.element.removeAttribute(OF.SizeSensorId),e.destroy(),t&&IF[t]&&delete IF[t]},Object.defineProperty(dF,"__esModule",{value:!0}),dF.ver=dF.clear=NF=dF.bind=void 0;var MF=fF,NF=dF.bind=function(e,t){var n=(0,MF.getSensor)(e);return n.bind(t),function(){n.unbind(t)}};dF.clear=function(e){var t=(0,MF.getSensor)(e);(0,MF.removeSensor)(t)};dF.ver="1.0.1";var FF=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],LF=function(e){function t(t,n){var r=e.call(this)||this;return r.container="string"==typeof t?document.getElementById(t):t,r.options=qN({},r.getDefaultOptions(),n),r.createG2(),r.bindEvents(),r}return kp(t,e),t.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},t.prototype.createG2=function(){var e=this.options,t=e.width,n=e.height,r=e.defaultInteractions;this.chart=new Nk(_p(_p(_p(_p({container:this.container,autoFit:!1},this.getChartSize(t,n)),{localRefresh:!1}),IN(this.options,FF)),{defaultInteractions:r})),this.container.setAttribute("data-chart-source-type","G2Plot")},t.prototype.getChartSize=function(e,t){var n=LN(this.container);return{width:e||n.width||400,height:t||n.height||400}},t.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",(function(t){(null==t?void 0:t.type)&&e.emit(t.type,t)}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},t.prototype.update=function(e){this.updateOption(e),this.render()},t.prototype.updateOption=function(e){this.options=qN({},this.options,e)},t.prototype.setState=function(e,t,n){void 0===n&&(n=!0),Hp(DN(this.chart),(function(r){t(r.getData())&&r.setState(e,n)}))},t.prototype.getStates=function(){var e=DN(this.chart),t=[];return Hp(e,(function(e){var n=e.getData();Hp(e.getStates(),(function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})}))})),t},t.prototype.changeData=function(e){this.update({data:e})},t.prototype.changeSize=function(e,t){this.chart.changeSize(e,t)},t.prototype.addAnnotations=function(e){var t=Op(e),n=this.chart.getController("annotation"),r=n.getComponents().map((function(e){return e.extra}));n.clear(!0);for(var i=function(e){var i=r[e],a=t.findIndex((function(e){return e.id&&e.id===i.id}));-1!==a&&(i=qN({},i,t[a]),t.splice(a,1)),n.annotation(i)},a=0;a<r.length;a++)i(a);t.forEach((function(e){return n.annotation(e)})),this.chart.render(!0)},t.prototype.removeAnnotations=function(e){var t=this.chart.getController("annotation"),n=t.getComponents().map((function(e){return e.extra}));t.clear(!0);for(var r=function(r){var i=n[r];e.find((function(e){return e.id&&e.id===i.id}))||t.annotation(i)},i=0;i<n.length;i++)r(i);this.chart.render(!0)},t.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute("data-chart-source-type")},t.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor(),t=this.options,n=t.padding,r=t.appendPadding;this.chart.padding=n,this.chart.appendPadding=r,e({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var e=this;if(!this.unbind){var t=this.options.autoFit;(void 0===t||t)&&(this.unbind=NF(this.container,(function(){var t=LN(e.container),n=t.width,r=t.height;n===e.chart.width&&r===e.chart.height||e.triggerResize()})))}},t.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},t}(Pf),PF=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];function RF(){return"object"==typeof window?null===window||void 0===window?void 0:window.devicePixelRatio:2}function DF(e,t){void 0===t&&(t=e);var n=document.createElement("canvas"),r=RF();return n.width=e*r,n.height=t*r,n.style.width=e+"px",n.style.height=t+"px",n.getContext("2d").scale(r,r),n}function BF(e,t,n,r){void 0===r&&(r=n);var i=t.backgroundColor,a=t.opacity;e.globalAlpha=a,e.fillStyle=i,e.beginPath(),e.fillRect(0,0,n,r),e.closePath()}function zF(e,t,n){var r=e+t;return n?2*r:r}function HF(e,t){return t?[[e*(1/4),e*(1/4)],[e*(3/4),e*(3/4)]]:[[.5*e,.5*e]]}function jF(e,t){var n=t*Math.PI/180;return{a:Math.cos(n)*(1/e),b:Math.sin(n)*(1/e),c:-Math.sin(n)*(1/e),d:Math.cos(n)*(1/e),e:0,f:0}}var GF={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function $F(e,t,n,r){var i=t.size,a=t.fill,o=t.lineWidth,s=t.stroke,l=t.fillOpacity;e.beginPath(),e.globalAlpha=l,e.fillStyle=a,e.strokeStyle=s,e.lineWidth=o,e.arc(n,r,i/2,0,2*Math.PI,!1),e.fill(),o&&e.stroke(),e.closePath()}var YF={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function UF(e){var t=qN({},YF,e),n=t.spacing,r=t.rotation,i=t.lineWidth,a=n+i||1,o=n+i||1,s="\n            M 0 0 L "+a+" 0\n            M 0 "+o+" L "+a+" "+o+"\n            ",l=DF(a,o),c=l.getContext("2d");BF(c,t,a,o),function(e,t,n){var r=t.stroke,i=t.lineWidth,a=t.strokeOpacity,o=new Path2D(n);e.globalAlpha=a,e.lineCap="square",e.strokeStyle=i?r:"transparent",e.lineWidth=i,e.stroke(o)}(c,t,s);var u=c.createPattern(l,"repeat");if(u){var h=jF(RF(),r);u.setTransform(h)}return u}var VF={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function WF(e,t,n,r){var i=t.stroke,a=t.size,o=t.fill,s=t.lineWidth,l=t.fillOpacity;e.globalAlpha=l,e.strokeStyle=i,e.lineWidth=s,e.fillStyle=o,e.strokeRect(n-a/2,r-a/2,a,a),e.fillRect(n-a/2,r-a/2,a,a)}function XF(e){var t,n=e.type,r=e.cfg;switch(n){case"dot":t=function(e){var t=qN({},GF,e),n=t.size,r=t.padding,i=t.isStagger,a=t.rotation,o=zF(n,r,i),s=HF(o,i),l=DF(o,o),c=l.getContext("2d");BF(c,t,o);for(var u=0,h=s;u<h.length;u++){var p=h[u];$F(c,t,p[0],p[1])}var d=c.createPattern(l,"repeat");if(d){var f=jF(RF(),a);d.setTransform(f)}return d}(r);break;case"line":t=UF(r);break;case"square":t=function(e){var t=qN({},VF,e),n=t.size,r=t.padding,i=t.isStagger,a=t.rotation,o=zF(n,r,i),s=HF(o,i),l=DF(o,o),c=l.getContext("2d");BF(c,t,o);for(var u=0,h=s;u<h.length;u++){var p=h[u];WF(c,t,p[0],p[1])}var d=c.createPattern(l,"repeat");if(d){var f=jF(RF(),a);d.setTransform(f)}return d}(r)}return t}function qF(e){var t=this;return function(n){var r,i=n.options,a=n.chart,o=i.pattern;if(!o)return n;return qN({},n,{options:(r={},r[e]=function(n){for(var r,s,l,c=[],u=1;u<arguments.length;u++)c[u-1]=arguments[u];var h=a.getTheme().defaultColor,p=h,d=null===(s=null===(r=a.geometries)||void 0===r?void 0:r[0])||void 0===s?void 0:s.getAttribute("color");if(d){var f=d.getFields()[0],m=Yd(n,f);p=F_.getMappingValue(d,m,(null===(l=d.values)||void 0===l?void 0:l[0])||h)}var g=o;"function"==typeof o&&(g=o.call(t,n,p)),g instanceof CanvasPattern==!1&&(g=XF(qN({},{cfg:{backgroundColor:p}},g)));var v=i[e];return _p(_p({},"function"==typeof v?v.call.apply(v,Op([t,n],c)):v||{}),{fill:g||p})},r)})}}function KF(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.seriesField;return!1===r?t.legend(!1):(i||a)&&t.legend(i||a,r),e}function QF(e){var t=e.chart,n=e.options.tooltip;return void 0!==n&&t.tooltip(n),e}function ZF(e){var t=e.chart;return Hp(e.options.interactions,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg||{})})),e}function JF(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),Hp(t.geometries,(function(e){e.animate(n)})),e}function eL(e){var t=e.chart,n=e.options.theme;return n&&t.theme(n),e}function tL(e){var t=e.chart,n=e.options.state;return n&&Hp(t.geometries,(function(e){e.state(n)})),e}function nL(e){var t=e.chart,n=e.options.slider;return t.option("slider",n),e}function rL(e){var t=e.chart,n=e.options.scrollbar;return t.option("scrollbar",n),e}function iL(e,t){return function(n){var r=n.chart,i=n.options,a={};return Hp(e,(function(e,t){a[t]=IN(e,PF)})),a=qN({},t,i.meta,a),r.scale(a),n}}function aL(e){return function(t){var n=t.chart,r=t.options,i=n.getController("annotation");return Hp(Op(r.annotations||[],e||[]),(function(e){i.annotation(e)})),t}}function oL(e){var t=e.chart,n=e.options,r=n.yAxis,i=n.limitInPlot,a=i;return zp(r)&&Dp(i)&&(a=!!Object.values(IN(r,["min","max","minLimit","maxLimit"])).some((function(e){return!Dp(e)}))),t.limitInPlot=a,e}function sL(e,t){if(!1===e)return{fields:!1};var n=Yd(e,"fields"),r=Yd(e,"formatter");return r&&!n&&(n=t),{fields:n,formatter:r}}function lL(e,t){var n=e.type,r=e.xField,i=e.yField,a=e.colorField,o=e.shapeField,s=e.sizeField,l=e.styleField,c=e.rawFields,u=void 0===c?[]:c,h=[];if("color"===t)h=Op([a||r],u);else if("shape"===t)h=Op([o||r],u);else if("size"===t)h=Op([s||r],u);else{h=Op([r,i,a,o,s,l],u);var p=["x","y","color","shape","size","style"].indexOf(t),d=h[p];h.splice(p,1),h.unshift(d)}var f=td(h.filter((function(e){return!!e}))),m="line"===n&&[r,i].includes(f.join("*"))?"":f.join("*");return{mappingFields:f,tileMappingField:m}}function cL(e,t){if(t)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return e.forEach((function(e,t){i[e]=n[t]})),delete i[void 0],t(i)}}function uL(e){var t=e.chart,n=e.options,r=n.type,i=n.args,a=n.mapping,o=n.xField,s=n.yField,l=n.colorField,c=n.shapeField,u=n.sizeField,h=n.tooltipFields,p=n.label,d=n.state,f=n.customInfo;if(!a)return e;var m=a.color,g=a.shape,v=a.size,y=a.style,x=a.tooltip,E=t[r](i).position(o+"*"+s);if(ed(m))l?E.color(l,m):E.color(m);else if(Rp(m)){var b=lL(n,"color"),C=b.mappingFields,w=b.tileMappingField;E.color(w,cL(C,m))}else l&&E.color(l,m);if(ed(g))c?E.shape(c,[g]):E.shape(g);else if(Rp(g)){var T=lL(n,"shape");C=T.mappingFields,w=T.tileMappingField;E.shape(w,cL(C,g))}else c&&E.shape(c,g);if(pd(v))u?E.size(u,v):E.size(v);else if(Rp(v)){var S=lL(n,"size");C=S.mappingFields,w=S.tileMappingField;E.size(w,cL(C,v))}else u&&E.size(u,v);if(Rp(y)){var k=lL(n,"style");C=k.mappingFields,w=k.tileMappingField;E.style(w,cL(C,y))}else zp(y)&&E.style(y);if(!1===h?E.tooltip(!1):zd(h)||E.tooltip(h.join("*"),cL(h,x)),!1===p)E.label(!1);else if(p){var _=p.callback,A=p.fields,O=Ap(p,["callback","fields"]);E.label({fields:A||[s],callback:_,cfg:GN(O)})}return d&&E.state(d),f&&E.customInfo(f),[o,s].filter((function(e){return e!==l})).forEach((function(e){t.legend(e,!1)})),_p(_p({},e),{ext:{geometry:E}})}function hL(e){var t=e.options,n=t.area,r=t.xField,i=t.yField,a=t.seriesField,o=t.smooth,s=sL(t.tooltip,[r,i,a]),l=s.fields,c=s.formatter;return n?uL(qN({},e,{options:{type:"area",colorField:a,tooltipFields:l,mapping:_p({shape:o?"smooth":"area",tooltip:c},n)}})):e}function pL(e){var t=e.options,n=t.line,r=t.stepType,i=t.xField,a=t.yField,o=t.seriesField,s=t.smooth,l=t.connectNulls,c=sL(t.tooltip,[i,a,o]),u=c.fields,h=c.formatter;return n?uL(qN({},e,{options:{type:"line",colorField:o,tooltipFields:u,mapping:Rd({shape:r||(s?"smooth":"line"),tooltip:h},n),args:{connectNulls:l}}})):e}function dL(e){var t=e.options,n=t.point,r=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=t.shapeField,l=sL(t.tooltip,[r,i,a,o,s]),c=l.fields,u=l.formatter;return n?uL(qN({},e,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:c,mapping:_p({tooltip:u},n)}})):e}function fL(e){var t=e.options,n=t.xField,r=t.yField,i=t.interval,a=t.seriesField,o=t.tooltip,s=t.minColumnWidth,l=t.maxColumnWidth,c=t.columnBackground,u=t.dodgePadding,h=t.intervalPadding,p=sL(o,[n,r,a]),d=p.fields,f=p.formatter,m=(i?uL(qN({},e,{options:{type:"interval",colorField:a,tooltipFields:d,mapping:_p({tooltip:f},i),args:{dodgePadding:u,intervalPadding:h,minColumnWidth:s,maxColumnWidth:l,background:c}}})):e).ext;return function(e){var t=e.chart,n=e.options,r=e.ext,i=n.seriesField,a=n.isGroup,o=n.isStack,s=n.marginRatio,l=n.widthRatio,c=n.groupField,u=n.theme,h=[];return i&&(a&&h.push({type:"dodge",dodgeBy:c||i,marginRatio:s}),o&&h.push({type:"stack",marginRatio:s})),h.length&&(null==r?void 0:r.geometry)&&(null==r?void 0:r.geometry).adjust(h),Dp(l)||t.theme(qN({},zp(u)?u:uk(u),{columnWidthRatio:l})),e}(_p(_p({},e),{ext:m}))}function mL(e){var t=e.options,n=t.polygon,r=t.xField,i=t.yField,a=t.seriesField,o=sL(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?uL(qN({},e,{options:{type:"polygon",colorField:a,tooltipFields:s,mapping:_p({tooltip:l},n)}})):e}function gL(e){var t=e.options,n=t.edge,r=t.xField,i=t.yField,a=t.seriesField,o=sL(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?uL(qN({},e,{options:{type:"edge",colorField:a,tooltipFields:s,mapping:_p({tooltip:l},n)}})):e}function vL(e){var t=e.options,n=t.schema,r=t.xField,i=t.yField,a=t.seriesField,o=sL(t.tooltip,[r,i,a]),s=o.fields,l=o.formatter;return n?uL(qN({},e,{options:{type:"schema",colorField:a,tooltipFields:s,mapping:_p({tooltip:l},n)}})):e}var yL=qN({},LF.getDefaultOptions(),{syncViewPadding:!0,tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1});function xL(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.lineStyle,o=n.lineShape,s=n.point,l=n.area,c=n.yField,u=n.seriesField,h=null==s?void 0:s.state;t.data(r);var p=qN({},e,{options:{shapeField:u,line:{color:i,style:a,shape:o},point:s&&_p({color:i,shape:"circle"},s),area:l&&_p({color:i},l),label:void 0}}),d=qN({},p,{options:{tooltip:!1,state:h}});pL(p),hL(d);var f=qN({},p,{options:{tooltip:!1,state:h}});if(s){var m=t.createView({id:"point-view"});m.axis(!1),m.tooltip(!1),m.legend(!1),m.data(r.filter((function(e){return!Dp(e[c])}))),dL(_p(_p({},f),{chart:m}))}return e}function EL(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,c=r.seriesField,u=((t={})[o]={type:"cat",sync:!0,values:td(l.map((function(e){return e[o]})))},t[s]=_p(_p({},rF(l,s)),{sync:!0}),t);return c&&(u[c]={sync:!0}),ON(iL(((n={})[o]=i,n[s]=a,n),u))(e)}function bL(e){var t=e.chart,n=e.options.reflect;if(n){var r=n;Bp(r)||(r=[r]);var i=r.map((function(e){return["reflect",e]}));t.coordinate({type:"rect",actions:i})}return e}function CL(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function wL(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):!1===r&&t.legend(!1),e}function TL(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=PN(t,"line");if(r){var o=r.callback,s=Ap(r,["callback"]);a.label({fields:[i],callback:o,cfg:_p({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},GN(s))})}else a.label(!1);return e}function SL(e){var t=e.chart,n=e.options.isStack,r=BN(t);return n&&Hp(r,(function(e){e.adjust("stack")})),e}function kL(e){return ON(xL,EL,SL,eL,bL,CL,wL,QF,TL,nL,ZF,JF,aL(),oL)(e)}lS("marker-active",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.active=function(){var e=this.getView(),t=this.context.event;if(t.data){var n=t.data.items,r=PN(e,"point");r&&Hp(r.elements,(function(e){var t=-1!==Vp(n,(function(t){return t.data===e.data}));e.setState("active",t)}))}},t.prototype.reset=function(){var e=PN(this.getView(),"point");e&&Hp(e.elements,(function(e){e.setState("active",!1)}))},t.prototype.getView=function(){return this.context.view},t}(iS)),XS("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var _L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t}return kp(t,e),t.getDefaultOptions=function(){return yL},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.yField;EL({chart:t,options:n}),this.chart.changeData(e);var i=zN(this.chart,"point-view");i&&i.changeData(e.filter((function(e){return!Dp(e[r])})))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return kL},t}(LF);function AL(e,t,n,r){var i=Zp(e,(function(e,r){var i=r[n],a=e.has(i)?e.get(i):0,o=r[t];return a=nF(o)?a+o:a,e.set(i,a),e}),new Map);return Gd(e,(function(e){var a,o=e[t],s=e[n],l=nF(o)?o/i.get(s):0;return _p(_p({},e),((a={})[r]=l,a))}))}function OL(e,t,n,r,i){return i?AL(e,t,n,r):e}var IL=qN({},LF.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}});function ML(e){var t=e.chart,n=e.options,r=n.data,i=n.areaStyle,a=n.color,o=n.point,s=n.line,l=n.isPercent,c=n.xField,u=n.yField,h=n.tooltip,p=n.seriesField,d=n.startOnZero,f=null==o?void 0:o.state,m=OL(r,u,c,u,l);t.data(m);var g=l?_p({formatter:function(e){return{name:e[p]||e[c],value:(100*Number(e[u])).toFixed(2)+"%"}}},h):h,v=qN({},e,{options:{area:{color:a,style:i},line:s&&_p({color:a},s),point:o&&_p({color:a},o),tooltip:g,label:void 0,args:{startOnZero:d}}}),y=qN({options:{line:{size:2}}},v,{options:{sizeField:p,tooltip:!1}});hL(v),pL(y);var x=qN({},v,{options:{tooltip:!1,state:f}});if(o){var E=t.createView({id:"point-view"});E.axis(!1),E.tooltip(!1),E.legend(!1),E.data(r.filter((function(e){return!Dp(e[u])}))),dL(_p(_p({},x),{chart:E}))}return e}function NL(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=PN(t,"area");if(r){var o=r.callback,s=Ap(r,["callback"]);a.label({fields:[i],callback:o,cfg:_p({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},GN(s))})}else a.label(!1);return e}function FL(e){var t=e.chart,n=e.options,r=n.isStack,i=n.isPercent,a=n.seriesField;(i||r)&&a&&Hp(BN(t),(function(e){e.adjust("stack")}));return e}function LL(e){return ON(eL,qF("areaStyle"),ML,EL,FL,CL,wL,QF,NL,nL,aL(),ZF,JF,oL)(e)}var PL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="area",t}return kp(t,e),t.getDefaultOptions=function(){return IL},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.isPercent,i=n.xField,a=n.yField;EL({chart:t,options:n});var o=OL(e,a,i,a,r);this.chart.changeData(o);var s=zN(this.chart,"point-view");s&&s.changeData(e.filter((function(e){return!Dp(e[a])})))},t.prototype.getSchemaAdaptor=function(){return LL},t}(LF);function RL(e,t){return pd(e)&&pd(t)?e===t?"100%":0===e?"∞":0===t?"-∞":(100*t/e).toFixed(2)+"%":"-"}function DL(e,t){return qN({size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:!1!==e.arrow&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:!1!==e.text&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:RL}},e)}function BL(e,t){return Gd(t.getModel().points,(function(t){return e.convertPoint(t)}))}function zL(e,t,n){!function(e,t,n){var r=e.view,i=e.geometry,a=e.group,o=e.options,s=e.horizontal,l=o.offset,c=o.size,u=o.arrow,h=r.getCoordinate(),p=BL(h,t)[3],d=BL(h,n)[0],f=d.y-p.y,m=d.x-p.x;if("boolean"!=typeof u){var g,v=u.headSize,y=o.spacing;s?(m-v)/2<y?(y=Math.max(1,(m-v)/2),g=[[p.x+y,p.y-l],[p.x+y,p.y-l-c],[d.x-y,d.y-l-c/2]]):g=[[p.x+y,p.y-l],[p.x+y,p.y-l-c],[d.x-y-v,d.y-l-c],[d.x-y,d.y-l-c/2],[d.x-y-v,d.y-l]]:(f-v)/2<y?(y=Math.max(1,(f-v)/2),g=[[p.x+l,p.y+y],[p.x+l+c,p.y+y],[d.x+l+c/2,d.y-y]]):g=[[p.x+l,p.y+y],[p.x+l+c,p.y+y],[d.x+l+c,d.y-y-v],[d.x+l+c/2,d.y-y],[d.x+l,d.y-y-v]],a.addShape("polygon",{id:r.id+"-conversion-tag-arrow-"+i.getElementId(t.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:t,nextElement:n},attrs:_p(_p({},u.style||{}),{points:g})})}}(e,t,n),function(e,t,n){var r,i,a,o=e.view,s=e.geometry,l=e.group,c=e.options,u=e.field,h=e.horizontal,p=c.offset,d=c.size;if("boolean"!=typeof c.text){var f=o.getCoordinate(),m=(null===(r=c.text)||void 0===r?void 0:r.formatter)&&(null===(i=c.text)||void 0===i?void 0:i.formatter(t.getData()[u],n.getData()[u])),g=BL(f,t)[h?3:0],v=BL(f,n)[h?0:3],y=l.addShape("text",{id:o.id+"-conversion-tag-text-"+s.getElementId(t.getModel().mappingData),name:"conversion-tag-text",origin:{element:t,nextElement:n},attrs:_p(_p({},(null===(a=c.text)||void 0===a?void 0:a.style)||{}),{text:m,x:h?(g.x+v.x)/2:g.x+p+d/2,y:h?g.y-p-d/2:(g.y+v.y)/2})});if(h){var x=v.x-g.x,E=y.getBBox().width;if(E>x){var b=E/m.length,C=Math.max(1,Math.ceil(x/b)-1),w=m.slice(0,C)+"...";y.attr("text",w)}}}}(e,t,n)}var HL={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},jL=function(e,t){return"hover"===e?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:t}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:t}]}]};XS(HL.hover,{start:jL(HL.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),XS(HL.click,{start:jL(HL.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});var GL={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}};function $L(e){return e.isInPlot()}function YL(e,t,n){var r=t||"rect";switch(e){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:$L,action:["brush:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:$L,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:$L,action:["brush:filter","brush:end",r+"-mask:end",r+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:$L,action:["brush-x:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:$L,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:$L,action:["brush-x:filter","brush-x:end",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:$L,action:["brush-y:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:$L,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:$L,action:["brush-y:filter","brush-y:end",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};default:return{}}}lS("brush-reset-button",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=_p({name:"button"},GL),t}return kp(t,e),t.prototype.getButtonCfg=function(){var e=this.context.view,t=Yd(e,["interactions","filter-action","cfg","buttonConfig"]);return qN(this.buttonCfg,t,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=this.drawText(t);this.drawBackground(t,n.getBBox()),this.buttonGroup=t},t.prototype.drawText=function(e){var t,n=this.getButtonCfg();return e.addShape({type:"text",name:"button-text",attrs:_p({text:n.text},null===(t=n.textStyle)||void 0===t?void 0:t.default)})},t.prototype.drawBackground=function(e,t){var n,r=this.getButtonCfg(),i=oF(r.padding),a=e.addShape({type:"rect",name:"button-rect",attrs:_p({x:t.x-i[3],y:t.y-i[0],width:t.width+i[1]+i[3],height:t.height+i[0]+i[2]},null===(n=r.buttonStyle)||void 0===n?void 0:n.default)});return a.toBack(),e.on("mouseenter",(function(){var e;a.attr(null===(e=r.buttonStyle)||void 0===e?void 0:e.active)})),e.on("mouseleave",(function(){var e;a.attr(null===(e=r.buttonStyle)||void 0===e?void 0:e.default)})),a},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=F_.transform(null,[["t",e.x-n.width-10,e.y+n.height+5]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(iS),{name:"brush-reset-button"}),XS("filter-action",{}),XS("brush",YL("brush")),XS("brush-highlight",YL("brush-highlight")),XS("brush-x",YL("brush-x","x-rect")),XS("brush-y",YL("brush-y","y-rect")),XS("brush-x-highlight",YL("brush-x-highlight","x-rect")),XS("brush-y-highlight",YL("brush-y-highlight","y-rect"));var UL=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function VL(e){var t=e.options,n=t.brush,r=Fp(t.interactions||[],(function(e){return-1===UL.indexOf(e.type)}));return(null==n?void 0:n.enabled)&&(UL.forEach((function(e){var t,i=!1;switch(n.type){case"x-rect":i=e===("highlight"===n.action?"brush-x-highlight":"brush-x");break;case"y-rect":i=e===("highlight"===n.action?"brush-y-highlight":"brush-y");break;default:i=e===("highlight"===n.action?"brush-highlight":"brush")}var a={type:e,enable:i};((null===(t=n.mask)||void 0===t?void 0:t.style)||n.type)&&(a.cfg=YL(e,n.type,n.mask)),r.push(a)})),"highlight"!==(null==n?void 0:n.action)&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),qN({},e,{options:{interactions:r}})}function WL(e){var t=e.options,n=t.legend,r=t.seriesField,i=t.isStack;return r?!1!==n&&(n=_p({position:i?"right-top":"top-left"},n)):n=!1,e.options.legend=n,e}function XL(e){var t=e.chart,n=e.options,r=n.data,i=n.columnStyle,a=n.color,o=n.columnWidthRatio,s=n.isPercent,l=n.isGroup,c=n.isStack,u=n.xField,h=n.yField,p=n.seriesField,d=n.groupField,f=n.tooltip,m=n.shape,g=s&&l&&c?function(e,t,n,r){var i=Zp(e,(function(e,r){var i=Zp(n,(function(e,t){return""+e+r[t]}),""),a=e.has(i)?e.get(i):0,o=r[t];return a=nF(o)?a+o:a,e.set(i,a),e}),new Map);return Gd(e,(function(e){var a,o=e[t],s=Zp(n,(function(t,n){return""+t+e[n]}),""),l=nF(o)?o/i.get(s):0;return _p(_p({},e),((a={})[r]=l,a))}))}(r,h,[u,d],h):OL(r,h,u,h,s),v=[];c&&p&&!l?g.forEach((function(e){var t=v.find((function(t){return t[u]===e[u]&&t[p]===e[p]}));t?t[h]+=e[h]||0:v.push(_p({},e))})):v=g,t.data(v);var y=s?_p({formatter:function(e){return{name:l&&c?e[p]+" - "+e[d]:e[p]||e[u],value:(100*Number(e[h])).toFixed(2)+"%"}}},f):f,x=qN({},e,{options:{data:v,widthRatio:o,tooltip:y,interval:{shape:m,style:i,color:a}}});return fL(x),x}function qL(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,c=r.isPercent?{max:1,min:0,minLimit:0,maxLimit:1}:{};return ON(iL(((t={})[o]=i,t[s]=a,t),((n={})[o]={type:"cat"},n[s]=_p(_p({},rF(l,s)),c),n)))(e)}function KL(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function QL(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):!1===r&&t.legend(!1),e}function ZL(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=n.isRange,o=PN(t,"interval");if(r){var s=r.callback,l=Ap(r,["callback"]);o.label({fields:[i],callback:s,cfg:_p({layout:(null==l?void 0:l.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},GN(a?_p({content:function(e){var t;return null===(t=e[i])||void 0===t?void 0:t.join("-")}},l):l))})}else o.label(!1);return e}function JL(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.isGroup,a=n.isStack,o=n.groupField,s=n.data,l=n.xField,c=n.yField,u=n.seriesField;if(!1===r)t.tooltip(!1);else{var h=r;if(i&&a){var p=(null==h?void 0:h.formatter)||function(e){return{name:e[u]+" - "+e[o],value:e[c]}};h=_p(_p({},h),{customItems:function(e){var t=[];return Hp(e,(function(e){Fp(s,(function(t){return Gp(t,IN(e.data,[l,u]))})).forEach((function(n){t.push(_p(_p(_p({},e),{value:n[c],data:n,mappingData:{_origin:n}}),p(n)))}))})),t}})}t.tooltip(h)}return e}function eP(e,t){void 0===t&&(t=!1);var n,r,i,a,o=e.options,s=o.seriesField;return ON(WL,eL,qF("columnStyle"),tL,XL,qL,KL,QL,JL,nL,rL,ZL,VL,ZF,JF,aL(),(r=o.yField,void 0===(i=!t)&&(i=!0),void 0===(a=!!s)&&(a=!1),function(e){var t=e.options,n=e.chart,o=t.conversionTag,s=t.theme;return o&&!a&&(n.theme(qN({},zp(s)?s:uk(s),{columnWidthRatio:1/3})),n.annotation().shape({render:function(e,t){var a=e.addGroup({id:n.id+"-conversion-tag-group",name:"conversion-tag-group"}),s=Up(n.geometries,(function(e){return"interval"===e.type})),l={view:t,geometry:s,group:a,field:r,horizontal:i,options:DL(o,i)},c=s.elements;Hp(c,(function(e,t){t>0&&zL(l,c[t-1],e)}))}})),e}),(void 0===(n=!o.isStack)&&(n=!1),function(e){var t=e.chart,r=e.options.connectedArea,i=function(){t.removeInteraction(HL.hover),t.removeInteraction(HL.click)};if(!n&&r){var a=r.trigger||"hover";i(),t.interaction(HL[a],{start:jL(a,r.style)})}else i();return e}),oL)(e)}var tP=qN({},LF.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),nP=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="column",t}return kp(t,e),t.getDefaultOptions=function(){return tP},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.yField,r=t.xField,i=t.isPercent;qL({chart:this.chart,options:this.options}),this.chart.changeData(OL(e,n,r,n,i))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return eP},t}(LF);function rP(e){var t=e.options,n=t.xField,r=t.yField,i=t.xAxis,a=t.yAxis,o={left:"bottom",right:"top",top:"left",bottom:"right"},s=!1!==a&&_p({position:o[(null==a?void 0:a.position)||"left"]},a),l=!1!==i&&_p({position:o[(null==i?void 0:i.position)||"bottom"]},i);return _p(_p({},e),{options:_p(_p({},t),{xField:r,yField:n,xAxis:s,yAxis:l})})}function iP(e){var t=e.options.label;return t&&!t.position&&(t.position="left",t.layout||(t.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),qN({},e,{options:{label:t}})}function aP(e){var t=e.options,n=t.seriesField,r=t.isStack,i=t.legend;return n?!1!==i&&(i=_p({position:r?"top-left":"right-top"},i||{})):i=!1,qN({},e,{options:{legend:i}})}function oP(e){return e.chart.coordinate({actions:[["transpose"],["reflect","y"]]}),e}function sP(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.barWidthRatio,a=n.minBarWidth,o=n.maxBarWidth,s=n.barBackground;return eP({chart:t,options:_p(_p({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:s})},!0)}function lP(e){return ON(rP,iP,aP,QF,oP,sP)(e)}var cP=qN({},LF.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),uP=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bar",t}return kp(t,e),t.getDefaultOptions=function(){return cP},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart,n=this.options,r=n.xField,i=n.yField,a=n.isPercent;qL({chart:t,options:_p(_p({},n),{xField:i,yField:r})}),t.changeData(OL(e,r,i,r,a))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return lP},t}(LF),hP=qN({},LF.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function pP(e,t){var n;switch(e){case"inner":return n="-30%",ed(t)&&t.endsWith("%")?.01*parseFloat(t)>0?n:t:t<0?t:n;case"outer":return n=12,ed(t)&&t.endsWith("%")?.01*parseFloat(t)<0?n:t:t>0?t:n;default:return t}}function dP(e,t){return ad(aF(e,t),(function(e){return 0===e[t]}))}var fP=[1,0,0,0,1,0,0,0,1];function mP(e,t){var n=Op(t||fP);return F_.transform(n,e)}var gP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getActiveElements=function(){var e=F_.getDelegationObject(this.context);if(e){var t=this.context.view,n=e.component,r=e.item,i=n.get("field");if(i)return t.geometries[0].elements.filter((function(e){return e.getModel().data[i]===r.value}))}return[]},t.prototype.getActiveElementLabels=function(){var e=this.context.view,t=this.getActiveElements();return e.geometries[0].labelsContainer.getChildren().filter((function(e){return t.find((function(t){return jd(t.getData(),e.get("data"))}))}))},t.prototype.transfrom=function(e){void 0===e&&(e=7.5);var t=this.getActiveElements(),n=this.getActiveElementLabels();t.forEach((function(t,r){var i=n[r],a=t.geometry.coordinate;if(a.isPolar&&a.isTransposed){var o=F_.getAngle(t.getModel(),a),s=(o.startAngle+o.endAngle)/2,l=e,c=l*Math.cos(s),u=l*Math.sin(s);t.shape.setMatrix(mP([["t",c,u]])),i.setMatrix(mP([["t",c,u]]))}}))},t.prototype.active=function(){this.transfrom()},t.prototype.reset=function(){this.transfrom(0)},t}(iS);var vP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getAnnotations=function(e){return(e||this.context.view).getController("annotation").option},t.prototype.getInitialAnnotation=function(){return this.initialAnnotation},t.prototype.init=function(){var e=this,t=this.context.view;t.removeInteraction("tooltip"),t.on("afterchangesize",(function(){var n=e.getAnnotations(t);e.initialAnnotation=n}))},t.prototype.change=function(e){var t=this.context,n=t.view,r=t.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var i=Yd(r,["data","data"]);if(r.type.match("legend-item")){var a=F_.getDelegationObject(this.context),o=n.getGroupedFields()[0];if(a&&o){var s=a.item;i=n.getData().find((function(e){return e[o]===s.value}))}}if(i){var l=Yd(e,"annotations",[]),c=Yd(e,"statistic",{});n.getController("annotation").clear(!0),Hp(l,(function(e){"object"==typeof e&&n.annotation()[e.type](e)})),eF(n,{statistic:c,plotType:"pie"},i),n.render(!0)}var u,h,p,d=(u=this.context,(p=u.event.target)&&(h=p.get("element")),h);d&&d.shape.toFront()},t.prototype.reset=function(){var e=this.context.view;e.getController("annotation").clear(!0),Hp(this.getInitialAnnotation(),(function(t){e.annotation()[t.type](t)})),e.render(!0)},t}(iS);function yP(e){var t=e.chart,n=e.options,r=n.data,i=n.angleField,a=n.colorField,o=n.color,s=n.pieStyle,l=aF(r,i);if(dP(l,i)){var c="$$percentage$$";l=l.map((function(e){var t;return _p(_p({},e),((t={}).$$percentage$$=1/l.length,t))})),t.data(l),fL(qN({},e,{options:{xField:"1",yField:c,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}}))}else{t.data(l),fL(qN({},e,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}}))}return e}function xP(e){var t,n=e.chart,r=e.options,i=r.meta,a=r.colorField,o=qN({},i);return n.scale(o,((t={})[a]={type:"cat"},t)),e}function EP(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),e}function bP(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,a=n.angleField,o=t.geometries[0];if(r){var s=r.callback,l=GN(Ap(r,["callback"]));if(l.content){var c=l.content;l.content=function(e,n,r){var o=e[i],s=e[a],l=t.getScaleByField(a),u=null==l?void 0:l.scale(s);return Rp(c)?c(_p(_p({},e),{percent:u}),n,r):ed(c)?MN(c,{value:s,name:o,percentage:pd(u)&&!Dp(s)?(100*u).toFixed(2)+"%":null}):c}}var u=l.type?{inner:"",outer:"pie-outer",spider:"pie-spider"}[l.type]:"pie-outer",h=l.layout?Bp(l.layout)?l.layout:[l.layout]:[];l.layout=(u?[{type:u}]:[]).concat(h),o.label({fields:i?[a,i]:[a],callback:s,cfg:_p(_p({},l),{offset:pP(l.type,l.offset),type:"pie"})})}else o.label(!1);return e}function CP(e){var t=e.innerRadius,n=e.statistic,r=e.angleField,i=e.colorField,a=e.meta,o=pF(e.locale);if(t&&n){var s=qN({},hP.statistic,n),l=s.title,c=s.content;return!1!==l&&(l=qN({},{formatter:function(e){return e?e[i]:Dp(l.content)?o.get(["statistic","total"]):l.content}},l)),!1!==c&&(c=qN({},{formatter:function(e,t){var n=e?e[r]:function(e,t){var n=null;return Hp(e,(function(e){"number"==typeof e[t]&&(n+=e[t])})),n}(t,r),i=Yd(a,[r,"formatter"])||function(e){return e};return e||Dp(c.content)?i(n):c.content}},c)),qN({},{statistic:{title:l,content:c}},e)}return e}function wP(e){var t=e.chart,n=CP(e.options),r=n.innerRadius,i=n.statistic;return t.getController("annotation").clear(!0),ON(aL())(e),r&&i&&eF(t,{statistic:i,plotType:"pie"}),e}function TP(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.colorField,a=n.angleField,o=n.data;if(!1===r)t.tooltip(r);else if(t.tooltip(qN({},r,{shared:!1})),dP(o,a)){var s=Yd(r,"fields"),l=Yd(r,"formatter");zd(Yd(r,"fields"))&&(s=[i,a],l=l||function(e){return{name:e[i],value:Ed(e[a])}}),t.geometries[0].tooltip(s.join("*"),cL(s,l))}return e}function SP(e){var t=e.chart,n=CP(e.options),r=n.interactions,i=n.statistic,a=n.annotations;return Hp(r,(function(e){var n,r;if(!1===e.enable)t.removeInteraction(e.type);else if("pie-statistic-active"===e.type){var o=[];(null===(n=e.cfg)||void 0===n?void 0:n.start)||(o=[{trigger:"element:mouseenter",action:"pie-statistic:change",arg:{statistic:i,annotations:a}}]),Hp(null===(r=e.cfg)||void 0===r?void 0:r.start,(function(e){o.push(_p(_p({},e),{arg:{statistic:i,annotations:a}}))})),t.interaction(e.type,qN({},e.cfg,{start:o}))}else t.interaction(e.type,e.cfg||{})})),e}function kP(e){return ON(qF("pieStyle"),yP,xP,eL,EP,KF,TP,bP,tL,wP,SP,JF)(e)}lS("pie-statistic",vP),XS("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),lS("pie-legend",gP),XS("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var _P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pie",t}return kp(t,e),t.getDefaultOptions=function(){return hP},t.prototype.changeData=function(e){this.chart.emit(cf.BEFORE_CHANGE_DATA,Tk.fromData(this.chart,cf.BEFORE_CHANGE_DATA,null));var t=this.options,n=this.options.angleField,r=aF(t.data,n),i=aF(e,n);dP(r,n)||dP(i,n)?this.update({data:e}):(this.updateOption({data:e}),this.chart.data(i),wP({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(cf.AFTER_CHANGE_DATA,Tk.fromData(this.chart,cf.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return kP},t}(LF);function AP(e){var t=e.chart,n=e.options,r=n.data,i=n.sectorStyle,a=n.color;return t.data(r),ON(fL)(qN({},e,{options:{marginRatio:1,interval:{style:i,color:a}}})),e}function OP(e){var t=e.chart,n=e.options,r=n.label,i=n.xField,a=PN(t,"interval");if(!1===r)a.label(!1);else if(zp(r)){var o=r.callback,s=r.fields,l=Ap(r,["callback","fields"]),c=l.offset,u=l.layout;(void 0===c||c>=0)&&(u=u?Bp(u)?u:[u]:[],l.layout=Fp(u,(function(e){return"limit-in-shape"!==e.type})),l.layout.length||delete l.layout),a.label({fields:s||[i],callback:o,cfg:GN(l)})}else FN(TN.WARN,null===r,"the label option must be an Object."),a.label({fields:[i]});return e}function IP(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return!1===r?t.legend(!1):i&&t.legend(i,r),e}function MP(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),e}function NP(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ON(iL(((t={})[a]=r,t[o]=i,t)))(e)}function FP(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r?t.axis(a,r):t.axis(a,!1),i?t.axis(o,i):t.axis(o,!1),e}function LP(e){ON(qF("sectorStyle"),AP,NP,OP,MP,FP,IP,QF,ZF,JF,eL,aL(),tL)(e)}var PP=qN({},LF.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right"},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rose",t}kp(t,e),t.getDefaultOptions=function(){return PP},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return LP}}(LF);var RP={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function DP(e,t){return function(e,t){var n=function(){var e=[256,256],t=jP,n=$P,r=GP,i=YP,a=UP,o=KP,s=Math.random,l=[],c=1/0,u=HP,h=GP,p=ZP,d={};function f(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=zP/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function m(t,n,r){for(var i,a,l,c=n.x,u=n.y,h=Math.sqrt(e[0]*e[0]+e[1]*e[1]),p=o(e),d=s()<.5?1:-1,f=-d;(i=p(f+=d))&&(a=~~i[0],l=~~i[1],!(Math.min(Math.abs(a),Math.abs(l))>=h));)if(n.x=c+a,n.y=u+l,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1])&&(!r||!WP(n,t,e[0]))&&(!r||qP(n,r))){for(var m=n.sprite,g=n.width>>5,v=e[0]>>5,y=n.x-(g<<4),x=127&y,E=32-x,b=n.y1-n.y0,C=void 0,w=(n.y+n.y0)*v+(y>>5),T=0;T<b;T++){C=0;for(var S=0;S<=g;S++)t[w+S]|=C<<E|(S<g?(C=m[T*g+S])>>>x:0);w+=v}return delete n.sprite,!0}return!1}return d.start=function(){var o=e[0],g=e[1],v=f(p()),y=d.board?d.board:QP((e[0]>>5)*e[1]),x=l.length,E=[],b=l.map((function(e,o,s){return e.text=u.call(this,e,o,s),e.font=t.call(this,e,o,s),e.style=h.call(this,e,o,s),e.weight=r.call(this,e,o,s),e.rotate=i.call(this,e,o,s),e.size=~~n.call(this,e,o,s),e.padding=a.call(this,e,o,s),e})).sort((function(e,t){return t.size-e.size})),C=-1,w=d.board?[{x:0,y:0},{x:o,y:g}]:null;function T(){for(var t=Date.now();Date.now()-t<c&&++C<x;){var n=b[C];n.x=o*(s()+.5)>>1,n.y=g*(s()+.5)>>1,VP(v,n,b,C),n.hasText&&m(y,n,w)&&(E.push(n),w?d.hasImage||XP(w,n):w=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}d._tags=E,d._bounds=w}return T(),d},d.createMask=function(t){var n=document.createElement("canvas"),r=e[0],i=e[1];if(r&&i){var a=r>>5,o=QP((r>>5)*i);n.width=r,n.height=i;var s=n.getContext("2d");s.drawImage(t,0,0,t.width,t.height,0,0,r,i);for(var l=s.getImageData(0,0,r,i).data,c=0;c<i;c++)for(var u=0;u<r;u++){var h=a*c+(u>>5),p=c*r+u<<2,f=l[p]>=250&&l[p+1]>=250&&l[p+2]>=250?1<<31-u%32:0;o[h]|=f}d.board=o,d.hasImage=!0}},d.timeInterval=function(e){c=null==e?1/0:e},d.words=function(e){l=e},d.size=function(t){e=[+t[0],+t[1]]},d.font=function(e){t=JP(e)},d.fontWeight=function(e){r=JP(e)},d.rotate=function(e){i=JP(e)},d.spiral=function(e){o=eR[e]||e},d.fontSize=function(e){n=JP(e)},d.padding=function(e){a=JP(e)},d.random=function(e){s=JP(e)},d}();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach((function(e){Dp(t[e])||n[e](t[e])})),n.words(e),t.imageMask&&n.createMask(t.imageMask);var r=n.start()._tags;r.forEach((function(e){e.x+=t.size[0]/2,e.y+=t.size[1]/2}));var i=t.size,a=i[0],o=i[1];return r.push({text:"",value:0,x:0,y:0,opacity:0}),r.push({text:"",value:0,x:a,y:o,opacity:0}),r}(e,t=Md({},RP,t))}var BP=Math.PI/180,zP=2048;function HP(e){return e.text}function jP(){return"serif"}function GP(){return"normal"}function $P(e){return e.value}function YP(){return 90*~~(2*Math.random())}function UP(){return 1}function VP(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,2048/a,zP/a);var o=0,s=0,l=0,c=n.length;for(--r;++r<c;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font;var u=i.measureText(t.text+"m").width*a,h=t.size<<1;if(t.rotate){var p=Math.sin(t.rotate*BP),d=Math.cos(t.rotate*BP),f=u*d,m=u*p,g=h*d,v=h*p;u=Math.max(Math.abs(f+v),Math.abs(f-v))+31>>5<<5,h=~~Math.max(Math.abs(m+g),Math.abs(m-g))}else u=u+31>>5<<5;if(h>l&&(l=h),o+u>=2048&&(o=0,s+=l,l=0),s+h>=zP)break;i.translate((o+(u>>1))/a,(s+(h>>1))/a),t.rotate&&i.rotate(t.rotate*BP),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=h,t.xoff=o,t.yoff=s,t.x1=u>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=u}for(var y=i.getImageData(0,0,2048/a,zP/a).data,x=[];--r>=0;)if((t=n[r]).hasText){for(var E=(u=t.width)>>5,b=(h=t.y1-t.y0,0);b<h*E;b++)x[b]=0;if(null==(o=t.xoff))return;s=t.yoff;for(var C=0,w=-1,T=0;T<h;T++){for(b=0;b<u;b++){var S=E*T+(b>>5),k=y[2048*(s+T)+(o+b)<<2]?1<<31-b%32:0;x[S]|=k,C|=k}C?w=T:(t.y0++,h--,T--,s++)}t.y1=t.y0+w,t.sprite=x.slice(0,(t.y1-t.y0)*E)}}}function WP(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,l=32-s,c=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),h=0;h<c;h++){r=0;for(var p=0;p<=a;p++)if((r<<l|(p<a?(r=i[h*a+p])>>>s:0))&t[u+p])return!0;u+=n}return!1}function XP(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function qP(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function KP(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function QP(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function ZP(){return document.createElement("canvas")}function JP(e){return Rp(e)?e:function(){return e}}var eR={archimedean:KP,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};function tR(e){var t=e.options,n=e.chart,r=n,i=r.width,a=r.height,o=r.padding,s=r.appendPadding,l=r.ele,c=t.data,u=t.imageMask,h=t.wordField,p=t.weightField,d=t.colorField,f=t.wordStyle,m=t.timeInterval,g=t.random,v=t.spiral,y=t.autoFit,x=void 0===y||y,E=t.placementStrategy;if(!c||!c.length)return[];var b,C=f.fontFamily,w=f.fontWeight,T=f.padding,S=f.fontSize,k=function(e,t){return e.map((function(e){return e[t]})).filter((function(e){return"number"==typeof e&&!isNaN(e)}))}(c,p),_=[(b=k,Math.min.apply(Math,b)),aR(k)],A=c.map((function(e){return{text:e[h],value:e[p],color:e[d],datum:e}})),O={imageMask:u,font:C,fontSize:rR(S,_),fontWeight:w,size:nR({width:i,height:a,padding:o,appendPadding:s,autoFit:x,container:l}),padding:T,timeInterval:m,random:g,spiral:v,rotate:iR(t)};if(Rp(E)){var I=A.map((function(e,t,r){return _p(_p(_p({},e),{hasText:!!e.text,font:JP(O.font)(e,t,r),weight:JP(O.fontWeight)(e,t,r),rotate:JP(O.rotate)(e,t,r),size:JP(O.fontSize)(e,t,r),style:"normal"}),E.call(n,e,t,r))}));return I.push({text:"",value:0,x:0,y:0,opacity:0}),I.push({text:"",value:0,x:O.size[0],y:O.size[1],opacity:0}),I}return DP(A,O)}function nR(e){var t=e.width,n=e.height,r=e.container,i=e.autoFit,a=e.padding,o=e.appendPadding;if(i){var s=LN(r);t=s.width,n=s.height}t=t||400,n=n||400;var l=function(e){var t=oF(e.padding),n=oF(e.appendPadding),r=t[0]+n[0],i=t[1]+n[1],a=t[2]+n[2],o=t[3]+n[3];return[r,i,a,o]}({padding:a,appendPadding:o}),c=l[0],u=l[1],h=l[2];return[t-(l[3]+u),n-(c+h)]}function rR(e,t){if(Rp(e))return e;if(Bp(e)){var n=e[0],r=e[1];if(!t)return function(){return(r+n)/2};var i=t[0],a=t[1];return a===i?function(){return(r+n)/2}:function(e){var t=e.value;return(r-n)/(a-i)*(t-i)+n}}return function(){return e}}function iR(e){var t=function(e){var t=e.wordStyle.rotationSteps;t<1&&(FN(TN.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),t=1);return{rotation:e.wordStyle.rotation,rotationSteps:t}}(e),n=t.rotation,r=t.rotationSteps;if(!Bp(n))return n;var i=n[0],a=n[1],o=1===r?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function aR(e){return Math.max.apply(Math,e)}var oR=qN({},LF.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(e){return{name:e.text,value:e.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}});function sR(e){var t=e.chart,n=e.options,r=n.colorField,i=n.color,a=tR(e);return t.data(a),dL(qN({},e,{options:{xField:"x",yField:"y",seriesField:r&&"color",rawFields:Rp(i)&&Op(Yd(n,"rawFields",[]),["datum"]),point:{color:i,shape:"word-cloud"}}})).ext.geometry.label(!1),t.coordinate().reflect("y"),t.axis(!1),e}function lR(e){return ON(iL({x:{nice:!1},y:{nice:!1}}))(e)}function cR(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField;return!1===r?t.legend(!1):i&&t.legend("color",r),e}function uR(e){ON(sR,lR,QF,cR,ZF,JF,eL,tL)(e)}function hR(e){return{fontSize:e.data.size,text:e.data.text,textAlign:"center",fontFamily:e.data.font,fontWeight:e.data.weight,fill:e.color||e.defaultStyle.stroke,textBaseline:"alphabetic"}}function pR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function dR(e,t,n,r){e=e.filter((function(e,r){var i=t(e,r),a=n(e,r);return null!=i&&isFinite(i)&&null!=a&&isFinite(a)})),r&&e.sort((function(e,n){return t(e)-t(n)}));for(var i,a,o,s=e.length,l=new Float64Array(s),c=new Float64Array(s),u=0,h=0,p=0;p<s;)o=e[p],l[p]=i=+t(o,p,e),c[p]=a=+n(o,p,e),u+=(i-u)/++p,h+=(a-h)/p;for(var d=0;d<s;++d)l[d]-=u,c[d]-=h;return[l,c,u,h]}function fR(e,t,n,r){for(var i=0,a=0,o=e.length;a<o;a++){var s=e[a],l=+t(s,a,e),c=+n(s,a,e);null!=l&&isFinite(l)&&null!=c&&isFinite(c)&&r(l,c,i++)}}function mR(e,t,n,r,i){var a=0,o=0;return fR(e,t,n,(function(e,t){var n=t-i(e),s=t-r;a+=n*n,o+=s*s})),1-a/o}function gR(e){return 180*Math.atan2(e[1][1]-e[0][1],e[1][0]-e[0][0])/Math.PI}function vR(e,t,n){for(var r=Math.log(t-e)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),a=[s(e),s(t)],o=0;l(a)&&o<1e4;);return a;function s(e){return[e,n(e)]}function l(e){o++;for(var t,n=e.length,r=!1,a=0;a<n-1;a++){var l=e[a],c=e[a+1],u=[((t=[l,c])[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2],h=s(u[0]),p=gR([l,u]),d=gR([l,h]);Math.abs(p-d)>i&&(e.splice(a+1,0,h),r=!0)}return r}}function yR(e,t,n,r){var i=r-e*e,a=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-a*e,a]}function xR(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=e?+e[0]:1/0,u=e?+e[1]:-1/0;fR(r,t,n,(function(t,n){++i,a+=(t-a)/i,o+=(n-o)/i,s+=(t*n-s)/i,l+=(t*t-l)/i,e||(t<c&&(c=t),t>u&&(u=t))}));var h=pR(yR(a,o,s,l),2),p=h[0],d=h[1],f=function(e){return d*e+p},m=[[c,f(c)],[u,f(u)]];return m.a=d,m.b=p,m.predict=f,m.rSquared=mR(r,t,n,o,f),m}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r}function ER(e){e.sort((function(e,t){return e-t}));var t=e.length/2;return t%1==0?(e[t-1]+e[t])/2:e[Math.floor(t)]}Zk("point","word-cloud",{draw:function(e,t){var n=e.x,r=e.y,i=t.addShape("text",{attrs:_p(_p({},hR(e)),{x:n,y:r})}),a=e.data.rotate;return"number"==typeof a&&F_.rotate(i,a*Math.PI/180),i}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="word-cloud",t}kp(t,e),t.getDefaultOptions=function(){return oR},t.prototype.changeData=function(e){this.updateOption({data:e}),this.options.imageMask?this.render():this.chart.changeData(tR({chart:this.chart,options:this.options}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){var t=this;return new Promise((function(n){var r=t.options.imageMask;if(!r)return e.prototype.render.call(t),void n();var i,a=function(r){t.options=_p(_p({},t.options),{imageMask:r||null}),e.prototype.render.call(t),n()};(i=r,new Promise((function(e,t){if(i instanceof HTMLImageElement)e(i);else{if(ed(i)){var n=new Image;return n.crossOrigin="anonymous",n.src=i,n.onload=function(){e(n)},void(n.onerror=function(){FN(TN.ERROR,!1,"image %s load failed !!!",i),t()})}FN(TN.WARN,void 0===i,"The type of imageMask option must be String or HTMLImageElement."),t()}}))).then(a).catch(a)}))},t.prototype.getSchemaAdaptor=function(){return uR},t.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout((function(){e.prototype.triggerResize.call(t)})))}}(LF);function bR(e){return(e=1-e*e*e)*e*e}function CR(e,t,n){var r=e[t],i=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>i&&e[a]-r<=r-e[i];)n[0]=++i,n[1]=a,++a}function wR(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i,a,o,s,l=pR(dR(r,t,n),4),c=l[0],u=l[1],h=l[2],p=l[3],d=c.length,f=0,m=0,g=0,v=0,y=0;for(i=0;i<d;)a=c[i],o=u[i++],f+=((s=a*a)-f)/i,m+=(s*a-m)/i,g+=(s*s-g)/i,v+=(a*o-v)/i,y+=(s*o-y)/i;var x=0,E=0,b=e?+e[0]:1/0,C=e?+e[1]:-1/0;fR(r,t,n,(function(t,n){E++,x+=(n-x)/E,e||(t<b&&(b=t),t>C&&(C=t))}));var w=g-f*f,T=f*w-m*m,S=(y*f-v*m)/T,k=(v*w-y*m)/T,_=-S*f,A=function(e){return S*(e-=h)*e+k*e+_+p},O=vR(b,C,A);return O.a=S,O.b=k-2*S*h,O.c=_-k*h+S*h*h+p,O.predict=A,O.rSquared=mR(r,t,n,x,A),O}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r}var TR={exp:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0;fR(r,t,n,(function(t,n){var r=Math.log(n),p=t*n;++i,a+=(n-a)/i,s+=(p-s)/i,c+=(t*p-c)/i,o+=(n*r-o)/i,l+=(p*r-l)/i,e||(t<u&&(u=t),t>h&&(h=t))}));var p=pR(yR(s/a,o/a,l/a,c/a),2),d=p[0],f=p[1];d=Math.exp(d);var m=function(e){return d*Math.exp(f*e)},g=vR(u,h,m);return g.a=d,g.b=f,g.predict=m,g.rSquared=mR(r,t,n,a,m),g}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},linear:xR,loess:function(){var e=function(e){return e[0]},t=function(e){return e[1]},n=.3;function r(r){for(var i=pR(dR(r,e,t,!0),4),a=i[0],o=i[1],s=i[2],l=i[3],c=a.length,u=Math.max(2,~~(n*c)),h=new Float64Array(c),p=new Float64Array(c),d=new Float64Array(c).fill(1),f=-1;++f<=2;){for(var m=[0,u-1],g=0;g<c;++g){for(var v=a[g],y=m[0],x=m[1],E=v-a[y]>a[x]-v?y:x,b=0,C=0,w=0,T=0,S=0,k=1/Math.abs(a[E]-v||1),_=y;_<=x;++_){var A=a[_],O=o[_],I=bR(Math.abs(v-A)*k)*d[_],M=A*I;b+=I,C+=M,w+=O*I,T+=O*M,S+=A*M}var N=pR(yR(C/b,w/b,T/b,S/b),2),F=N[0],L=N[1];h[g]=F+L*v,p[g]=Math.abs(o[g]-h[g]),CR(a,g+1,m)}if(2===f)break;var P=ER(p);if(Math.abs(P)<1e-12)break;for(var R,D,B=0;B<c;++B)R=p[B]/(6*P),d[B]=R>=1?1e-12:(D=1-R*R)*D}return function(e,t,n,r){for(var i,a=e.length,o=[],s=0,l=0,c=[];s<a;++s)i=e[s]+n,c[0]===i?c[1]+=(t[s]-c[1])/++l:(l=0,c[1]+=r,c=[i,t[s]],o.push(c));return c[1]+=r,o}(a,h,s,l)}return r.bandwidth=function(e){return arguments.length?(n=e,r):n},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(e){return arguments.length?(t=e,r):t},r},log:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]},r=Math.E;function i(i){var a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0,p=Math.log(r);fR(i,t,n,(function(t,n){var r=Math.log(t)/p;++a,o+=(r-o)/a,s+=(n-s)/a,l+=(r*n-l)/a,c+=(r*r-c)/a,e||(t<u&&(u=t),t>h&&(h=t))}));var d=pR(yR(o,s,l,c),2),f=d[0],m=d[1],g=function(e){return m*Math.log(e)/p+f},v=vR(u,h,g);return v.a=m,v.b=f,v.predict=g,v.rSquared=mR(i,t,n,s,g),v}return i.domain=function(t){return arguments.length?(e=t,i):e},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.base=function(e){return arguments.length?(r=e,i):r},i},poly:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]},r=3;function i(i){if(1===r){var a=xR().x(t).y(n).domain(e)(i);return a.coefficients=[a.b,a.a],delete a.a,delete a.b,a}if(2===r){var o=wR().x(t).y(n).domain(e)(i);return o.coefficients=[o.c,o.b,o.a],delete o.a,delete o.b,delete o.c,o}var s,l,c,u,h,p=pR(dR(i,t,n),4),d=p[0],f=p[1],m=p[2],g=p[3],v=d.length,y=[],x=[],E=r+1,b=0,C=0,w=e?+e[0]:1/0,T=e?+e[1]:-1/0;for(fR(i,t,n,(function(t,n){++C,b+=(n-b)/C,e||(t<w&&(w=t),t>T&&(T=t))})),s=0;s<E;++s){for(c=0,u=0;c<v;++c)u+=Math.pow(d[c],s)*f[c];for(y.push(u),h=new Float64Array(E),l=0;l<E;++l){for(c=0,u=0;c<v;++c)u+=Math.pow(d[c],s+l);h[l]=u}x.push(h)}x.push(y);var S=function(e){var t,n,r,i,a,o=e.length-1,s=[];for(t=0;t<o;++t){for(i=t,n=t+1;n<o;++n)Math.abs(e[t][n])>Math.abs(e[t][i])&&(i=n);for(r=t;r<o+1;++r)a=e[r][t],e[r][t]=e[r][i],e[r][i]=a;for(n=t+1;n<o;++n)for(r=o;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=o-1;n>=0;--n){for(a=0,r=n+1;r<o;++r)a+=e[r][n]*s[r];s[n]=(e[o][n]-a)/e[n][n]}return s}(x),k=function(e){e-=m;var t=g+S[0]+S[1]*e+S[2]*e*e;for(s=3;s<E;++s)t+=S[s]*Math.pow(e,s);return t},_=vR(w,T,k);return _.coefficients=function(e,t,n,r){var i,a,o,s,l=Array(e);for(i=0;i<e;++i)l[i]=0;for(i=e-1;i>=0;--i)for(o=t[i],s=1,l[i]+=o,a=1;a<=i;++a)s*=(i+1-a)/a,l[i-a]+=o*Math.pow(n,a)*s;return l[0]+=r,l}(E,S,-m,g),_.predict=k,_.rSquared=mR(i,t,n,b,k),_}return i.domain=function(t){return arguments.length?(e=t,i):e},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.order=function(e){return arguments.length?(r=e,i):r},i},pow:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,a=0,o=0,s=0,l=0,c=0,u=e?+e[0]:1/0,h=e?+e[1]:-1/0;fR(r,t,n,(function(t,n){var r=Math.log(t),p=Math.log(n);++i,a+=(r-a)/i,o+=(p-o)/i,s+=(r*p-s)/i,l+=(r*r-l)/i,c+=(n-c)/i,e||(t<u&&(u=t),t>h&&(h=t))}));var p=pR(yR(a,o,s,l),2),d=p[0],f=p[1];d=Math.exp(d);var m=function(e){return d*Math.pow(e,f)},g=vR(u,h,m);return g.a=d,g.b=f,g.predict=m,g.rSquared=mR(r,t,n,c,m),g}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},quad:wR};var SR=function(e,t){var n=t.view,r=t.options,i=r.xField,a=r.yField,o=n.getScaleByField(i),s=n.getScaleByField(a);return function(e,t,n){var r=[],i=e[0],a=null;if(e.length<=2)return function(e,t){var n=[];if(e.length){n.push(["M",e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var a=e[r];n.push(["L",a.x,a.y])}t&&n.push(["Z"])}return n}(e,t);for(var o=0,s=e.length;o<s;o++){var l=e[o];a&&a.x===l.x&&a.y===l.y||(r.push(l.x),r.push(l.y),a=l)}var c=$N(r,t,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}(e.map((function(e){return n.getCoordinate().convert({x:o.scale(e[0]),y:s.scale(e[1])})})),!1)};function kR(e){var t=e.data,n=void 0===t?[]:t,r=e.xField,i=e.yField;if(n.length){for(var a=!0,o=!0,s=n[0],l=void 0,c=1;c<n.length&&(l=n[c],s[r]!==l[r]&&(a=!1),s[i]!==l[i]&&(o=!1),a||o);c++)s=l;var u=[];a&&u.push(r),o&&u.push(i);var h=IN(function(e){var t,n=e.meta,r=void 0===n?{}:n,i=e.xField,a=e.yField,o=e.data,s=o[0][i],l=o[0][a],c=s>0,u=l>0;function h(e,t){var n=Yd(r,[e]);function i(e){return Yd(n,e)}var a={};return"x"===t?(pd(s)&&(pd(i("min"))||(a.min=c?0:2*s),pd(i("max"))||(a.max=c?2*s:0)),a):(pd(l)&&(pd(i("min"))||(a.min=u?0:2*l),pd(i("max"))||(a.max=u?2*l:0)),a)}return _p(_p({},r),((t={})[i]=_p(_p({},r[i]),h(i,"x")),t[a]=_p(_p({},r[a]),h(a,"y")),t))}(e),u);return qN({},e,{meta:h})}return e}function _R(e){var t=e.chart,n=e.options,r=n.data,i=n.type,a=n.color,o=n.shape,s=n.pointStyle,l=n.shapeField,c=n.colorField,u=n.xField,h=n.yField,p=n.sizeField,d=n.size,f=n.tooltip;p&&(d||(d=[2,8]),pd(d)&&(d=[d,d])),f&&!f.fields&&(f=_p(_p({},f),{fields:[u,h,c,p,l]})),t.data(r),dL(qN({},e,{options:{seriesField:c,point:{color:a,shape:o,size:d,style:s},tooltip:f}}));var m=PN(t,"point");return i&&m.adjust(i),e}function AR(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=kR(n);return ON(iL(((t={})[a]=r,t[o]=i,t)))(qN({},e,{options:s}))}function OR(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return t.axis(a,r),t.axis(o,i),e}function IR(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.shapeField,o=n.sizeField,s=n.shapeLegend,l=n.sizeLegend,c=!1!==r;return i&&t.legend(i,!!c&&r),a&&(s?t.legend(a,s):t.legend(a,!1!==s&&r)),o&&t.legend(o,l||!1),c||s||l||t.legend(!1),e}function MR(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=PN(t,"point");if(r){var o=r.callback,s=Ap(r,["callback"]);a.label({fields:[i],callback:o,cfg:GN(s)})}else a.label(!1);return e}function NR(e){var t=e.options.quadrant,n=[];if(t){var r=t.xBaseline,i=void 0===r?0:r,a=t.yBaseline,o=void 0===a?0:a,s=t.labels,l=t.regionStyle,c=t.lineStyle,u=function(e,t){var n=10;return{regionStyle:[{position:{start:[e,"max"],end:["max",t]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[e,t]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",t],end:[e,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[e,t],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",t],offsetX:-10,offsetY:-10,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:n,offsetY:-10,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",t],offsetX:-10,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]}}(i,o);new Array(4).join(",").split(",").forEach((function(e,t){n.push(_p(_p({type:"region",top:!1},u.regionStyle[t].position),{style:qN({},u.regionStyle[t].style,null==l?void 0:l[t])}),_p({type:"text",top:!0},qN({},u.labelStyle[t],null==s?void 0:s[t])))})),n.push({type:"line",top:!1,start:["min",o],end:["max",o],style:qN({},u.lineStyle,c)},{type:"line",top:!1,start:[i,"min"],end:[i,"max"],style:qN({},u.lineStyle,c)})}return ON(aL(n))(e)}function FR(e){var t=e.options,n=e.chart,r=t.regressionLine;if(r){var i=r.style,a=r.top,o=void 0!==a&&a,s={stroke:"#9ba29a",lineWidth:2,opacity:.5};n.annotation().shape({top:o,render:function(e,r){var a=e.addGroup({id:n.id+"-regression-line",name:"regression-line-group"}),o=function(e){var t,n=e.options,r=n.xField,i=n.yField,a=n.data,o=n.regressionLine,s=o.type,l=void 0===s?"linear":s,c=o.algorithm;return t=c?Bp(c)?c:c(a):TR[l]().x((function(e){return e[r]})).y((function(e){return e[i]}))(a),SR(t,e)}({view:r,options:t});a.addShape("path",{name:"regression-line",attrs:_p(_p({path:o},s),i)})}})}return e}function LR(e){var t=e.chart,n=e.options.tooltip;return n?t.tooltip(n):!1===n&&t.tooltip(!1),e}function PR(e){return ON(_R,AR,OR,IR,LR,MR,VL,ZF,NR,JF,eL,FR)(e)}var RR=qN({},LF.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});XS("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var DR,BR,zR,HR,jR=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="scatter",r.on(cf.BEFORE_RENDER,(function(e){var t,n,i=r,a=i.options,o=i.chart;if((null===(t=e.data)||void 0===t?void 0:t.source)===aN.FILTER){var s=r.chart.filterData(r.chart.getData());AR({chart:o,options:_p(_p({},a),{data:s})})}(null===(n=e.data)||void 0===n?void 0:n.source)===aN.RESET&&AR({chart:o,options:a})})),r}return kp(t,e),t.getDefaultOptions=function(){return RR},t.prototype.changeData=function(e){this.updateOption(kR(qN({},this.options,{data:e})));var t=this.options;AR({chart:this.chart,options:t}),this.chart.changeData(e)},t.prototype.getSchemaAdaptor=function(){return PR},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t}(LF);function GR(e){var t=e.chart,n=e.options,r=n.data,i=n.lineStyle,a=n.color,o=n.point,s=n.area;t.data(r);var l=qN({},e,{options:{line:{style:i,color:a},point:o?_p({color:a},o):o,area:s?_p({color:a},s):s,label:void 0}}),c=qN({},l,{options:{tooltip:!1}}),u=(null==o?void 0:o.state)||n.state,h=qN({},l,{options:{tooltip:!1,state:u}});return pL(l),dL(h),hL(c),e}function $R(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ON(iL(((t={})[a]=r,t[o]=i,t)))(e)}function YR(e){var t=e.chart,n=e.options,r=n.radius,i=n.startAngle,a=n.endAngle;return t.coordinate("polar",{radius:r,startAngle:i,endAngle:a}),e}function UR(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis,a=n.yField,o=n.yAxis;return t.axis(r,i),t.axis(a,o),e}function VR(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=PN(t,"line");if(r){var o=r.callback,s=Ap(r,["callback"]);a.label({fields:[i],callback:o,cfg:GN(s)})}else a.label(!1);return e}function WR(e){return ON(GR,$R,eL,YR,UR,KF,QF,VR,ZF,JF,aL())(e)}Ck("radar-tooltip",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),t.prototype.getTooltipItems=function(t){var n=this.getTooltipCfg(),r=n.shared,i=n.title,a=e.prototype.getTooltipItems.call(this,t);if(a.length>0){var o=this.view.geometries[0],s=o.dataArray,l=a[0].name,c=[];return s.forEach((function(e){e.forEach((function(e){var t=F_.getTooltipItems(e,o)[0];if(!r&&t&&t.name===l){var n=Dp(i)?l:i;c.push(_p(_p({},t),{name:t.title,title:n}))}else if(r&&t){n=Dp(i)?t.name||l:i;c.push(_p(_p({},t),{name:t.title,title:n}))}}))})),c}return[]},t}(Lk)),lS("radar-tooltip",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.init=function(){this.context.view.removeInteraction("tooltip")},t.prototype.show=function(){var e=this.context.event;this.getTooltipController().showTooltip({x:e.x,y:e.y})},t.prototype.hide=function(){this.getTooltipController().hideTooltip()},t.prototype.getTooltipController=function(){return this.context.view.getController("radar-tooltip")},t}(iS)),XS("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="radar",t}kp(t,e),t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return qN({},e.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},t.prototype.getSchemaAdaptor=function(){return WR}}(LF),(BR=DR||(DR={})).Left="Left",BR.Right="Right",(HR=zR||(zR={})).Line="line",HR.Column="column";var XR={nice:!0,label:{autoHide:!0,autoRotate:!1}},qR=_p(_p({},XR),{position:"left"}),KR=_p(_p({},XR),{position:"right",grid:null});function QR(e){return Yd(e,"geometry")===zR.Line}function ZR(e){return Yd(e,"geometry")===zR.Column}function JR(e,t,n){return ZR(n)?qN({},{geometry:zR.Column,label:n.label&&n.isRange?{content:function(e){var n;return null===(n=e[t])||void 0===n?void 0:n.join("-")}}:void 0},n):_p({geometry:zR.Line},n)}function eD(e,t){var n=e[0],r=e[1];return Bp(t)?[t[0],t[1]]:[Yd(t,n),Yd(t,r)]}function tD(e,t){return t===DR.Left?!1!==e&&qN({},qR,e):t===DR.Right?!1!==e&&qN({},KR,e):e}function nD(e){var t=e.view,n=e.geometryOption,r=e.yField,i=e.legend,a=Yd(i,"marker"),o=PN(t,QR(n)?"line":"interval");if(!n.seriesField){var s=Yd(t,"options.scales."+r+".alias")||r,l=o.getAttribute("color"),c=t.getTheme().defaultColor;return l&&(c=F_.getMappingValue(l,s,Yd(l,["values",0],c))),[{value:r,name:s,marker:(Rp(a)?a:!zd(a)&&qN({},{style:{stroke:c,fill:c}},a))||(QR(n)?{symbol:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},style:{lineWidth:2,r:6,stroke:c}}:{symbol:"square",style:{fill:c}}),isGeometry:!0,viewId:t.id}]}var u=o.getGroupAttributes();return Zp(u,(function(e,n){var r=F_.getLegendItems(t,o,n,t.getTheme(),a);return e.concat(r)}),[])}var rD=function(e,t){var n=t[0],r=t[1],i=e.getOptions().data,a=e.getXScale(),o=Jd(i);if(a&&o){var s=nd(i,a.field),l=Jd(s),c=Math.floor(n*(l-1)),u=Math.floor(r*(l-1));e.filter(a.field,(function(e){var t=s.indexOf(e);return!(t>-1)||function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}(t,c,u)})),e.render(!0)}};function iD(e){var t,n=e.options,r=n.geometryOptions,i=void 0===r?[]:r,a=n.xField,o=n.yField,s=ad(i,(function(e){var t=e.geometry;return t===zR.Line||void 0===t}));return qN({},{options:{geometryOptions:[],meta:(t={},t[a]={type:"cat",sync:!0,range:s?[0,1]:void 0},t),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},e,{options:{yAxis:eD(o,n.yAxis),geometryOptions:[JR(0,o[0],i[0]),JR(0,o[1],i[1])],annotations:eD(o,n.annotations)}})}function aD(e){var t,n,r=e.chart,i=e.options.geometryOptions,a={line:0,column:1};return[{type:null===(t=i[0])||void 0===t?void 0:t.geometry,id:"left-axes-view"},{type:null===(n=i[1])||void 0===n?void 0:n.geometry,id:"right-axes-view"}].sort((function(e,t){return-a[e.type]+a[t.type]})).forEach((function(e){return r.createView({id:e.id})})),e}function oD(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.geometryOptions,o=n.data,s=n.tooltip;return[_p(_p({},a[0]),{id:"left-axes-view",data:o[0],yField:i[0]}),_p(_p({},a[1]),{id:"right-axes-view",data:o[1],yField:i[1]})].forEach((function(e){var n=e.id,i=e.data,a=e.yField,o=ZR(e)&&e.isPercent,l=o?AL(i,a,r,a):i,c=zN(t,n).data(l),u=o?_p({formatter:function(t){return{name:t[e.seriesField]||a,value:(100*Number(t[a])).toFixed(2)+"%"}}},s):s;!function(e){var t=e.options,n=e.chart,r=t.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,s=r.groupField,l=r.isGroup,c=["xField","yField"];if(QR(r)){pL(qN({},e,{options:_p(_p(_p({},IN(t,c)),r),{line:{color:r.color,style:r.lineStyle}})})),dL(qN({},e,{options:_p(_p(_p({},IN(t,c)),r),{point:r.point&&_p({color:a,shape:"circle"},r.point)})}));var u=[];l&&u.push({type:"dodge",dodgeBy:s||o,customOffset:0}),i&&u.push({type:"stack"}),u.length&&Hp(n.geometries,(function(e){e.adjust(u)}))}ZR(r)&&eP(qN({},e,{options:_p(_p(_p({},IN(t,c)),r),{widthRatio:r.columnWidthRatio,interval:_p(_p({},IN(r,["color"])),{style:r.columnStyle})})}))}({chart:c,options:{xField:r,yField:a,tooltip:u,geometryOption:e}})})),e}function sD(e){var t,n=e.chart,r=e.options.geometryOptions,i=(null===(t=n.getTheme())||void 0===t?void 0:t.colors10)||[],a=0;return n.once("beforepaint",(function(){Hp(r,(function(e,t){var r=zN(n,0===t?"left-axes-view":"right-axes-view");if(!e.color){var o=r.getGroupScales(),s=Yd(o,[0,"values","length"],1),l=i.slice(a,a+s).concat(0===t?[]:i);r.geometries.forEach((function(t){e.seriesField?t.color(e.seriesField,l):t.color(l[0])})),a+=s}})),n.render(!0)})),e}function lD(e){var t,n,r=e.chart,i=e.options,a=i.xAxis,o=i.yAxis,s=i.xField,l=i.yField;return iL(((t={})[s]=a,t[l[0]]=o[0],t))(qN({},e,{chart:zN(r,"left-axes-view")})),iL(((n={})[s]=a,n[l[1]]=o[1],n))(qN({},e,{chart:zN(r,"right-axes-view")})),e}function cD(e){var t=e.chart,n=e.options,r=zN(t,"left-axes-view"),i=zN(t,"right-axes-view"),a=n.xField,o=n.yField,s=n.xAxis,l=n.yAxis;return t.axis(a,!1),t.axis(o[0],!1),t.axis(o[1],!1),r.axis(a,s),r.axis(o[0],tD(l[0],DR.Left)),i.axis(a,!1),i.axis(o[1],tD(l[1],DR.Right)),e}function uD(e){var t=e.chart,n=e.options.tooltip,r=zN(t,"left-axes-view"),i=zN(t,"right-axes-view");return t.tooltip(n),r.tooltip({shared:!0}),i.tooltip({shared:!0}),e}function hD(e){var t=e.chart;return ZF(qN({},e,{chart:zN(t,"left-axes-view")})),ZF(qN({},e,{chart:zN(t,"right-axes-view")})),e}function pD(e){var t=e.chart,n=e.options.annotations,r=Yd(n,[0]),i=Yd(n,[1]);return aL(r)(qN({},e,{chart:zN(t,"left-axes-view"),options:{annotations:r}})),aL(i)(qN({},e,{chart:zN(t,"right-axes-view"),options:{annotations:i}})),e}function dD(e){var t=e.chart;return eL(qN({},e,{chart:zN(t,"left-axes-view")})),eL(qN({},e,{chart:zN(t,"right-axes-view")})),eL(e),e}function fD(e){var t=e.chart;return JF(qN({},e,{chart:zN(t,"left-axes-view")})),JF(qN({},e,{chart:zN(t,"right-axes-view")})),e}function mD(e){var t=e.chart,n=e.options.yAxis;return oL(qN({},e,{chart:zN(t,"left-axes-view"),options:{yAxis:n[0]}})),oL(qN({},e,{chart:zN(t,"right-axes-view"),options:{yAxis:n[1]}})),e}function gD(e){var t=e.chart,n=e.options,r=n.legend,i=n.geometryOptions,a=n.yField,o=n.data,s=zN(t,"left-axes-view"),l=zN(t,"right-axes-view");if(!1===r)t.legend(!1);else if(zp(r)&&!0===r.custom)t.legend(r);else{var c=Yd(i,[0,"legend"],r),u=Yd(i,[1,"legend"],r);t.once("beforepaint",(function(){var e=o[0].length?nD({view:s,geometryOption:i[0],yField:a[0],legend:c}):[],n=o[1].length?nD({view:l,geometryOption:i[1],yField:a[1],legend:u}):[];t.legend(qN({},r,{custom:!0,items:e.concat(n)}))})),i[0].seriesField&&s.legend(i[0].seriesField,c),i[1].seriesField&&l.legend(i[1].seriesField,u),t.on("legend-item:click",(function(e){var n=Yd(e,"gEvent.delegateObject",{});if(n&&n.item){var r=n.item,i=r.value,o=r.isGeometry,s=r.viewId;if(o){if(Vp(a,(function(e){return e===i}))>-1)Hp(Yd(zN(t,s),"geometries"),(function(e){e.changeVisible(!n.item.unchecked)}))}else{var l=Yd(t.getController("legend"),"option.items",[]);Hp(t.views,(function(e){Hp(e.getGroupScales(),(function(t){t.values&&t.values.indexOf(i)>-1&&e.filter(t.field,(function(e){return!Up(l,(function(t){return t.value===e})).unchecked}))})),t.render(!0)}))}}}))}return e}function vD(e){var t=e.chart,n=e.options.slider,r=zN(t,"left-axes-view"),i=zN(t,"right-axes-view");return n&&(r.option("slider",n),r.on("slider:valuechanged",(function(e){var t=e.event,n=t.value,r=t.originValue;jd(n,r)||rD(i,n)})),t.once("afterpaint",(function(){if(!Sd(n)){var e=n.start,t=n.end;(e||t)&&rD(i,[e,t])}}))),e}function yD(e){return ON(iD,aD,dD,oD,lD,cD,mD,uD,hD,pD,fD,sD,gD,vD)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dual-axes",t}kp(t,e),t.prototype.getDefaultOptions=function(){return qN({},e.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},t.prototype.getSchemaAdaptor=function(){return yD}}(LF);var xD={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return""+Yd(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},ED={appendPadding:2,tooltip:_p({},xD),animation:{}};function bD(e){return Gd(e||[],(function(e,t){return{x:""+t,y:e}}))}function CD(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.areaStyle,o=n.point,s=n.line,l=null==o?void 0:o.state,c=bD(r);t.data(c);var u=qN({},e,{options:{xField:"x",yField:"y",area:{color:i,style:a},line:s,point:o}}),h=qN({},u,{options:{tooltip:!1}}),p=qN({},u,{options:{tooltip:!1,state:l}});return hL(u),pL(h),dL(p),t.axis(!1),t.legend(!1),e}function wD(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=bD(r.data);return ON(iL(((t={}).x=i,t.y=a,t),((n={}).x={type:"cat"},n.y=rF(o,"y"),n)))(e)}function TD(e){return ON(qF("areaStyle"),CD,wD,QF,eL,JF,aL())(e)}function SD(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.lineStyle,o=n.point,s=null==o?void 0:o.state,l=bD(r);t.data(l);var c=qN({},e,{options:{xField:"x",yField:"y",line:{color:i,style:a},point:o}}),u=qN({},c,{options:{tooltip:!1,state:s}});return pL(c),dL(u),t.axis(!1),t.legend(!1),e}function kD(e){return ON(SD,wD,eL,QF,JF,aL())(e)}var _D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-line",t}return kp(t,e),t.getDefaultOptions=function(){return ED},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;wD({chart:t,options:this.options}),t.changeData(bD(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return kD},t}(LF);function AD(e){var t=e.chart,n=e.options,r=n.data,i=n.color,a=n.columnStyle,o=n.columnWidthRatio,s=bD(r);return t.data(s),fL(qN({},e,{options:{xField:"x",yField:"y",widthRatio:o,interval:{style:a,color:i}}})),t.axis(!1),t.legend(!1),t.interaction("element-active"),e}function OD(e){return ON(eL,qF("columnStyle"),AD,wD,QF,JF,aL())(e)}var ID={appendPadding:2,tooltip:_p({},{showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return""+Yd(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}}),animation:{}},MD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-column",t}return kp(t,e),t.getDefaultOptions=function(){return ID},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;wD({chart:t,options:this.options}),t.changeData(bD(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return OD},t}(LF),ND={appendPadding:2,tooltip:_p({},xD),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},FD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-area",t}return kp(t,e),t.getDefaultOptions=function(){return ND},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;wD({chart:t,options:this.options}),t.changeData(bD(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return TD},t}(LF);function LD(e,t,n){if(1===n)return[0,t];var r=Math.floor(e/t);return[t*r,t*(r+1)]}function PD(e,t,n,r,i){var a=Nd(e);!function(e,t){var n;if(Rp(t))n=function(e,n){return t(e)-t(n)};else{var r=[];ed(t)?r.push(t):Bp(t)&&(r=t),n=function(e,t){for(var n=0;n<r.length;n+=1){var i=r[n];if(e[i]>t[i])return 1;if(e[i]<t[i])return-1}return 0}}e.sort(n)}(a,t);var o=nd(a,t),s=Kp(o),l=s.max-s.min,c=n;if(!n&&r&&(c=r>1?l/(r-1):s.max),!n&&!r){var u=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}(o);c=l/u}var h={},p=ld(a,i);zd(p)?Hp(a,(function(e){var n=LD(e[t],c,r),i=n[0]+"-"+n[1];yd(h,i)||(h[i]={range:n,count:0}),h[i].count+=1})):Object.keys(p).forEach((function(e){Hp(p[e],(function(n){var a=LD(n[t],c,r),o=a[0]+"-"+a[1]+"-"+e;yd(h,o)||(h[o]={range:a,count:0},h[o][i]=e),h[o].count+=1}))}));var d=[];return Hp(h,(function(e){d.push(e)})),d}var RD=qN({},LF.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function DD(e){var t=e.chart,n=e.options,r=n.data,i=n.binField,a=n.binNumber,o=n.binWidth,s=n.color,l=n.stackField,c=n.legend,u=n.columnStyle,h=PD(r,i,o,a,l);return t.data(h),fL(qN({},e,{options:{xField:"range",yField:"count",seriesField:l,isStack:!0,interval:{color:s,style:u}}})),c&&l&&t.legend(l,c),e}function BD(e){var t,n=e.options,r=n.xAxis,i=n.yAxis;return ON(iL(((t={}).range=r,t.count=i,t)))(e)}function zD(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis;return!1===r?t.axis("range",!1):t.axis("range",r),!1===i?t.axis("count",!1):t.axis("count",i),e}function HD(e){var t=e.chart,n=e.options.label,r=PN(t,"interval");if(n){var i=n.callback,a=Ap(n,["callback"]);r.label({fields:["count"],callback:i,cfg:GN(a)})}else r.label(!1);return e}function jD(e){return ON(eL,qF("columnStyle"),DD,BD,zD,tL,HD,QF,ZF,JF)(e)}var GD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="histogram",t}return kp(t,e),t.getDefaultOptions=function(){return RD},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.binField,r=t.binNumber,i=t.binWidth,a=t.stackField;this.chart.changeData(PD(e,n,i,r,a))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return jD},t}(LF),$D=["#FAAD14","#E8EDF3"],YD={percent:.2,color:$D,animation:{}};function UD(e){var t=ud(nF(e)?e:0,0,1);return[{type:"current",percent:t},{type:"target",percent:1-t}]}function VD(e){var t=e.chart,n=e.options,r=n.percent,i=n.progressStyle,a=n.color,o=n.barWidthRatio;return t.data(UD(r)),fL(qN({},e,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:o,interval:{style:i,color:ed(a)?[a,$D[1]]:a},args:{zIndexReversed:!0}}})),t.tooltip(!1),t.axis(!1),t.legend(!1),e}function WD(e){return e.chart.coordinate("rect").transpose(),e}function XD(e){return ON(VD,iL({}),WD,JF,eL,aL())(e)}var qD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="process",t}return kp(t,e),t.getDefaultOptions=function(){return YD},t.prototype.changeData=function(e){this.updateOption({percent:e}),this.chart.changeData(UD(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return XD},t}(LF);function KD(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius;return t.coordinate("theta",{innerRadius:r,radius:i}),e}function QD(e,t){var n=e.chart,r=e.options,i=r.innerRadius,a=r.statistic,o=r.percent,s=r.meta;if(n.getController("annotation").clear(!0),i&&a){var l=Yd(s,["percent","formatter"])||function(e){return(100*e).toFixed(2)+"%"},c=a.content;c&&(c=qN({},c,{content:Dp(c.content)?l(o):c.content})),eF(n,{statistic:_p(_p({},a),{content:c}),plotType:"ring-progress"},{percent:o})}return t&&n.render(!0),e}function ZD(e){return ON(VD,iL({}),KD,QD,JF,eL,aL())(e)}var JD={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},eB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ring-process",t}return kp(t,e),t.getDefaultOptions=function(){return JD},t.prototype.changeData=function(e){this.chart.emit(cf.BEFORE_CHANGE_DATA,Tk.fromData(this.chart,cf.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(UD(e)),QD({chart:this.chart,options:this.options},!0),this.chart.emit(cf.AFTER_CHANGE_DATA,Tk.fromData(this.chart,cf.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ZD},t}(LF);function tB(e){var t=e.chart,n=e.options,r=n.data,i=n.type,a=n.xField,o=n.yField,s=n.colorField,l=n.sizeField,c=n.sizeRatio,u=n.shape,h=n.color,p=n.tooltip,d=n.heatmapStyle;t.data(r);var f="polygon";"density"===i&&(f="heatmap");var m=sL(p,[a,o,s]),g=m.fields,v=m.formatter,y=1;return(c||0===c)&&(u||l?c<0||c>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):y=c:console.warn("sizeRatio is not in effect: Must define shape or sizeField first")),uL(qN({},e,{options:{type:f,colorField:s,tooltipFields:g,shapeField:l||"",label:void 0,mapping:{tooltip:v,shape:u&&(l?function(e){var t=r.map((function(e){return e[l]})),n=Math.min.apply(Math,t),i=Math.max.apply(Math,t);return[u,(Yd(e,l)-n)/(i-n),y]}:function(){return[u,1,y]}),color:h||s&&t.getTheme().sequenceColors.join("-"),style:d}}})),e}function nB(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ON(iL(((t={})[a]=r,t[o]=i,t)))(e)}function rB(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(o,!1):t.axis(o,i),e}function iB(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,a=n.sizeField,o=n.sizeLegend,s=!1!==r;return i&&t.legend(i,!!s&&r),a&&t.legend(a,void 0===o?r:o),s||o||t.legend(!1),e}function aB(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,a=PN(t,"density"===n.type?"heatmap":"polygon");if(r){if(i){var o=r.callback,s=Ap(r,["callback"]);a.label({fields:[i],callback:o,cfg:GN(s)})}}else a.label(!1);return e}function oB(e){var t=e.chart,n=e.options,r=n.coordinate,i=n.reflect;return r&&t.coordinate({type:r.type||"rect",cfg:r.cfg}),i&&t.coordinate().reflect(i),e}function sB(e){return ON(eL,qF("heatmapStyle"),nB,oB,tB,rB,iB,QF,aB,aL(),ZF,JF,tL)(e)}var lB,cB=qN({},LF.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});Zk("polygon","circle",{draw:function(e,t){var n,r,i=e.x,a=e.y,o=this.parsePoints(e.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l)/2,u=Number(e.shape[1]),h=Number(e.shape[2]),p=c*Math.sqrt(h)*Math.sqrt(u),d=(null===(n=e.style)||void 0===n?void 0:n.fill)||e.color||(null===(r=e.defaultStyle)||void 0===r?void 0:r.fill);return t.addShape("circle",{attrs:_p(_p(_p({x:i,y:a,r:p},e.defaultStyle),e.style),{fill:d})})}}),Zk("polygon","square",{draw:function(e,t){var n,r,i=e.x,a=e.y,o=this.parsePoints(e.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l),u=Number(e.shape[1]),h=Number(e.shape[2]),p=c*Math.sqrt(h)*Math.sqrt(u),d=(null===(n=e.style)||void 0===n?void 0:n.fill)||e.color||(null===(r=e.defaultStyle)||void 0===r?void 0:r.fill);return t.addShape("rect",{attrs:_p(_p(_p({x:i-p/2,y:a-p/2,width:p,height:p},e.defaultStyle),e.style),{fill:d})})}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t}kp(t,e),t.getDefaultOptions=function(){return cB},t.prototype.getSchemaAdaptor=function(){return sB},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(LF);var uB=qN({},LF.getDefaultOptions(),{meta:(lB={},lB.$$range$$={min:0,alias:"low-q1-median-q3-high"},lB),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),hB=function(e,t){var n=e;if(Array.isArray(t)){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4];n=Gd(e,(function(e){return e.$$range$$=[e[r],e[i],e[a],e[o],e[s]],e}))}return n};function pB(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.groupField,o=n.color,s=n.tooltip,l=n.boxStyle;t.data(hB(n.data,i));var c=Bp(i)?"$$range$$":i,u=i?Bp(i)?i:[i]:[],h=s;!1!==h&&(h=qN({},{fields:Bp(i)?i:[]},h));var p=vL(qN({},e,{options:{xField:r,yField:c,seriesField:a,tooltip:h,rawFields:u,label:!1,schema:{shape:"box",color:o,style:l}}})).ext;return a&&p.geometry.adjust("dodge"),e}function dB(e){var t=e.chart,n=e.options,r=n.xField,i=n.data,a=n.outliersField,o=n.outliersStyle,s=n.padding,l=n.label;if(!a)return e;var c=t.createView({padding:s,id:"outliers_view"}),u=i.reduce((function(e,t){return t[a].forEach((function(n){var r;return e.push(_p(_p({},t),((r={})[a]=n,r)))})),e}),[]);return c.data(u),dL({chart:c,options:{xField:r,yField:a,point:{shape:"circle",style:o},label:l}}),c.axis(!1),e}function fB(e){var t,n,r=e.chart,i=e.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=i.outliersField,h=Array.isArray(c)?"$$range$$":c,p={};if(u){var d="$$y_outliers$$";(t={})[u]={sync:d,nice:!0},t[h]={sync:d,nice:!0},p=t}var f=qN(p,a,((n={})[l]=IN(o,PF),n[h]=IN(s,PF),n));return r.scale(f),e}function mB(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=Array.isArray(o)?"$$range$$":o;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis("$$range$$",!1):t.axis(s,i),e}function gB(e){var t=e.chart,n=e.options,r=n.legend,i=n.groupField;return i?r?t.legend(i,r):t.legend(i,{position:"bottom"}):t.legend(!1),e}function vB(e){return ON(pB,dB,fB,mB,gB,QF,ZF,JF,eL)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="box",t}kp(t,e),t.getDefaultOptions=function(){return uB},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField,n=this.chart.views.find((function(e){return"outliers_view"===e.id}));n&&n.data(e),this.chart.changeData(hB(e,t))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return vB}}(LF);var yB,xB,EB={exports:{}},bB={exports:{}};xB=(yB=bB).exports,yB.exports.isNumber=function(e){return"number"==typeof e},yB.exports.findMin=function(e){if(0===e.length)return 1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.min(t,e[n]);return t},yB.exports.findMax=function(e){if(0===e.length)return-1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.max(t,e[n]);return t},yB.exports.findMinMulti=function(e){for(var t=xB.findMin(e[0]),n=1;n<e.length;n++)t=Math.min(t,xB.findMin(e[n]));return t},yB.exports.findMaxMulti=function(e){for(var t=xB.findMax(e[0]),n=1;n<e.length;n++)t=Math.max(t,xB.findMax(e[n]));return t},yB.exports.inside=function(e,t,n){return e<=n&&n<=t},function(e){var t=Math.log(2),n=e.exports,r=bB.exports;function i(e){return 1-Math.abs(e)}e.exports.getUnifiedMinMax=function(e,t){return n.getUnifiedMinMaxMulti([e],t)},e.exports.getUnifiedMinMaxMulti=function(e,t){t=t||{};var n=!1,i=!1,a=r.isNumber(t.width)?t.width:2,o=r.isNumber(t.size)?t.size:50,s=r.isNumber(t.min)?t.min:(n=!0,r.findMinMulti(e)),l=r.isNumber(t.max)?t.max:(i=!0,r.findMaxMulti(e)),c=(l-s)/(o-1);return n&&(s-=2*a*c),i&&(l+=2*a*c),{min:s,max:l}},e.exports.create=function(e,t){if(t=t||{},!e||0===e.length)return[];var a=r.isNumber(t.size)?t.size:50,o=r.isNumber(t.width)?t.width:2,s=n.getUnifiedMinMax(e,{size:a,width:o,min:t.min,max:t.max}),l=s.min,c=s.max-l,u=c/(a-1);if(0===c)return[{x:l,y:1}];for(var h=[],p=0;p<a;p++)h.push({x:l+p*u,y:0});var d=function(e,t){for(var n={},r=0,i=-t;i<=t;i++)r+=e(i/t),n[i]=r;return n}(i,o),f=d[o],m=d[o-1]-d[o-2],g=0;e.forEach((function(e){var t=function(e){return Math.floor((e-l)/u)}(e);if(!(t+o<0||t-o>=h.length)){var n=Math.max(t-o,0),i=t,a=Math.min(t+o,h.length-1),s=n-(t-o),c=t+o-a,p=d[-o-1+s]||0,v=d[-o-1+c]||0,y=f/(f-p-v);s>0&&(g+=y*(s-1)*m);var x=Math.max(0,t-o+1);r.inside(0,h.length-1,x)&&(h[x].y+=1*y*m),r.inside(0,h.length-1,i+1)&&(h[i+1].y-=2*y*m),r.inside(0,h.length-1,a+1)&&(h[a+1].y+=1*y*m)}}));var v=g,y=0,x=0;return h.forEach((function(e){y+=e.y,v+=y,e.y=v,x+=v})),x>0&&h.forEach((function(e){e.y/=x})),h},e.exports.getExpectedValueFromPdf=function(e){if(e&&0!==e.length){var t=0;return e.forEach((function(e){t+=e.x*e.y})),t}},e.exports.getXWithLeftTailArea=function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=0;i<e.length&&(r=i,!((n+=e[i].y)>=t));i++);return e[r].x}},e.exports.getPerplexity=function(e){if(e&&0!==e.length){var n=0;return e.forEach((function(e){var t=Math.log(e.y);isFinite(t)&&(n+=e.y*t)})),n=-n/t,Math.pow(2,n)}}}(EB);var CB=EB.exports;function wB(e,t){var n=e.length*t;if(0===e.length)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function TB(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function SB(e,t,n,r){for(n=n||0,r=r||e.length-1;r>n;){if(r-n>600){var i=r-n+1,a=t-n+1,o=Math.log(i),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(l*=-1),SB(e,t,Math.max(n,Math.floor(t-a*s/i+l)),Math.min(r,Math.floor(t+(i-a)*s/i+l)))}var c=e[t],u=n,h=r;for(TB(e,n,t),e[r]>c&&TB(e,n,r);u<h;){for(TB(e,u,h),u++,h--;e[u]<c;)u++;for(;e[h]>c;)h--}e[n]===c?TB(e,n,h):TB(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function kB(e,t){var n=e.slice();if(Array.isArray(t)){!function(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(OB(e.length,t[r]));n.push(e.length-1),n.sort(AB);var i=[0,n.length-1];for(;i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);_B(e,n[s],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,s,s,a)}}}(n,t);for(var r=[],i=0;i<t.length;i++)r[i]=wB(n,t[i]);return r}return _B(n,OB(n.length,t),0,n.length-1),wB(n,t)}function _B(e,t,n,r){t%1==0?SB(e,t,n,r):(SB(e,t=Math.floor(t),n,r),SB(e,t+1,t+1,r))}function AB(e,t){return e-t}function OB(e,t){var n=e*t;return 1===t?e-1:0===t?0:n%1!=0?Math.ceil(n)-1:e%2==0?n-.5:n}var IB=function(e){return{low:qp(e),high:Xp(e),q1:kB(e,.25),q3:kB(e,.75),median:kB(e,[.5]),minMax:[qp(e),Xp(e)],quantile:[kB(e,.25),kB(e,.75)]}},MB=function(e,t){var n=CB.create(e,t);return{violinSize:n.map((function(e){return e.y})),violinY:n.map((function(e){return e.x}))}},NB=function(e){var t=e.xField,n=e.yField,r=e.seriesField,i=e.data,a=e.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var s=ld(i,t);return Object.keys(s).map((function(e){var t=s[e].map((function(e){return e[n]}));return _p(_p({x:e},MB(t,o)),IB(t))}))}var l=[],c=ld(i,r);return Object.keys(c).forEach((function(e){var i=ld(c[e],t);return Object.keys(i).forEach((function(t){var a,s=i[t].map((function(e){return e[n]}));l.push(_p(_p(((a={x:t})[r]=e,a),MB(s,o)),IB(s)))}))})),l},FB=qN({},LF.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),LB=["low","high","q1","q3","median"],PB=[{type:"dodge",marginRatio:1/32}];function RB(e){var t=e.chart,n=e.options;return t.data(NB(n)),e}function DB(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,a=n.shape,o=void 0===a?"violin":a,s=n.violinStyle,l=n.tooltip,c=n.state,u=t.createView({id:"violin_view"});return function(e){var t=e.options,n=t.violin,r=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=sL(t.tooltip,[r,i,a,o]),l=s.fields,c=s.formatter;n&&uL(qN({},e,{options:{type:"violin",colorField:a,tooltipFields:l,mapping:_p({tooltip:c},n)}}))}({chart:u,options:{xField:"x",yField:"violinY",seriesField:r||"x",sizeField:"violinSize",tooltip:_p({fields:LB},l),violin:{style:s,color:i,shape:o},state:c}}),u.geometries[0].adjust(PB),e}function BB(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,a=n.tooltip,o=n.box;if(!1===o)return e;var s=t.createView({id:"min_max_view"});fL({chart:s,options:{xField:"x",yField:"minMax",seriesField:r||"x",tooltip:_p({fields:LB},a),state:"object"==typeof o?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(PB);var l=t.createView({id:"quantile_view"});fL({chart:l,options:{xField:"x",yField:"quantile",seriesField:r||"x",tooltip:_p({fields:LB},a),state:"object"==typeof o?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(PB);var c=t.createView({id:"median_view"});return dL({chart:c,options:{xField:"x",yField:"median",seriesField:r||"x",tooltip:_p({fields:LB},a),state:"object"==typeof o?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),c.geometries[0].adjust(PB),l.axis(!1),s.axis(!1),c.axis(!1),c.legend(!1),s.legend(!1),l.legend(!1),e}function zB(e){var t,n=e.chart,r=e.options,i=r.meta,a=r.xAxis,o=r.yAxis,s=qN({},i,((t={}).x=_p(_p({sync:!0},IN(a,PF)),{type:"cat"}),t.violinY=_p({sync:!0},IN(o,PF)),t.minMax=_p({sync:"violinY"},IN(o,PF)),t.quantile=_p({sync:"violinY"},IN(o,PF)),t.median=_p({sync:"violinY"},IN(o,PF)),t));return n.scale(s),e}function HB(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=zN(t,"violin_view");return!1===r?a.axis("x",!1):a.axis("x",r),!1===i?a.axis("violinY",!1):a.axis("violinY",i),t.axis(!1),e}function jB(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField,a=n.shape;if(!1===r)t.legend(!1);else{var o=i||"x",s=Xd(r,["selected"]);a&&a.startsWith("hollow")||Yd(s,["marker","style","lineWidth"])||Ud(s,["marker","style","lineWidth"],0),t.legend(o,s),Yd(r,"selected")&&Hp(t.views,(function(e){return e.legend(o,r)}))}return e}function GB(e){var t=zN(e.chart,"violin_view");return aL()(_p(_p({},e),{chart:t})),e}function $B(e){var t=e.chart,n=e.options.animation;return Hp(t.views,(function(e){"boolean"==typeof n?e.animate(n):e.animate(!0),Hp(e.geometries,(function(e){e.animate(n)}))})),e}function YB(e){return ON(eL,RB,DB,BB,zB,QF,HB,jB,ZF,GB,$B)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="violin",t}kp(t,e),t.getDefaultOptions=function(){return FB},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(NB(this.options))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return YB}}(LF);var UB={normal:function(e){return e},multiply:function(e,t){return e*t/255},screen:function(e,t){return 255*(1-(1-e/255)*(1-t/255))},overlay:function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},darken:function(e,t){return e>t?t:e},lighten:function(e,t){return e>t?e:t},dodge:function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e},burn:function(e,t){return 255===t?255:0===e?0:255*(1-Math.min(1,(1-t/255)/(e/255)))}};function VB(e,t,n){void 0===n&&(n="normal");var r,i=(r=function(e){if(!UB[e])throw new Error("unknown blend mode "+e);return UB[e]}(n),function(e,t){var n=[];return n[0]=r(e[0],t[0]),n[1]=r(e[1],t[1]),n[2]=r(e[2],t[2]),n})(WB(e),WB(t)),a=WB(e),o=a[0],s=a[1],l=a[2],c=a[3],u=WB(t),h=u[0],p=u[1],d=u[2],f=u[3],m=Number((c+f*(1-c)).toFixed(2));return"rgba("+Math.round((c*(1-f)*(o/255)+c*f*(i[0]/255)+(1-c)*f*(h/255))/m*255)+", "+Math.round((c*(1-f)*(s/255)+c*f*(i[1]/255)+(1-c)*f*(p/255))/m*255)+", "+Math.round((c*(1-f)*(l/255)+c*f*(i[2]/255)+(1-c)*f*(d/255))/m*255)+", "+m+")"}function WB(e){var t,n=e.replace("/s+/g","");return"string"!=typeof n||n.startsWith("rgba")||n.startsWith("#")?(n.startsWith("rgba")&&(t=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(t=tx.rgb2arr(n).concat([1])),t.map((function(e,t){return 3===t?Number(e):0|e}))):tx.rgb2arr(tx.toRGB(n)).concat([1])}function XB(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function qB(e,t){return XB(e).map((function(){return XB(t)}))}function KB(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function QB(e){return Math.sqrt(KB(e,e))}function ZB(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function JB(e,t,n,r,i){for(var a=0;a<e.length;++a)e[a]=t*n[a]+r*i[a]}function ez(e,t,n){var r,i=(n=n||{}).maxIterations||200*t.length,a=n.nonZeroDelta||1.05,o=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,l=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,u=void 0!==n.chi?n.chi:2,h=void 0!==n.psi?n.psi:-.5,p=void 0!==n.sigma?n.sigma:.5,d=t.length,f=new Array(d+1);f[0]=t,f[0].fx=e(t),f[0].id=0;for(var m=0;m<d;++m){var g=t.slice();g[m]=g[m]?g[m]*a:o,f[m+1]=g,f[m+1].fx=e(g),f[m+1].id=m+1}function v(e){for(var t=0;t<e.length;t++)f[d][t]=e[t];f[d].fx=e.fx}for(var y=function(e,t){return e.fx-t.fx},x=t.slice(),E=t.slice(),b=t.slice(),C=t.slice(),w=0;w<i;++w){if(f.sort(y),n.history){var T=f.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));T.sort((function(e,t){return e.id-t.id})),n.history.push({x:f[0].slice(),fx:f[0].fx,simplex:T})}for(r=0,m=0;m<d;++m)r=Math.max(r,Math.abs(f[0][m]-f[1][m]));if(Math.abs(f[0].fx-f[d].fx)<s&&r<l)break;for(m=0;m<d;++m){x[m]=0;for(var S=0;S<d;++S)x[m]+=f[S][m];x[m]/=d}var k=f[d];if(JB(E,1+c,x,-c,k),E.fx=e(E),E.fx<f[0].fx)JB(C,1+u,x,-u,k),C.fx=e(C),C.fx<E.fx?v(C):v(E);else if(E.fx>=f[d-1].fx){var _=!1;if(E.fx>k.fx?(JB(b,1+h,x,-h,k),b.fx=e(b),b.fx<k.fx?v(b):_=!0):(JB(b,1-h*c,x,h*c,k),b.fx=e(b),b.fx<E.fx?v(b):_=!0),_){if(p>=1)break;for(m=1;m<f.length;++m)JB(f[m],1-p,f[0],p,f[m]),f[m].fx=e(f[m])}}else v(E)}return f.sort(y),{fx:f[0].fx,x:f[0]}}function tz(e,t,n,r,i,a,o){var s=n.fx,l=KB(n.fxprime,t),c=s,u=s,h=l,p=0;function d(u,p,d){for(var f=0;f<16;++f)if(i=(u+p)/2,JB(r.x,1,n.x,i,t),c=r.fx=e(r.x,r.fxprime),h=KB(r.fxprime,t),c>s+a*i*l||c>=d)p=i;else{if(Math.abs(h)<=-o*l)return i;h*(p-u)>=0&&(p=u),u=i,d=c}return 0}i=i||1,a=a||1e-6,o=o||.1;for(var f=0;f<10;++f){if(JB(r.x,1,n.x,i,t),c=r.fx=e(r.x,r.fxprime),h=KB(r.fxprime,t),c>s+a*i*l||f&&c>=u)return d(p,i,u);if(Math.abs(h)<=-o*l)return i;if(h>=0)return d(i,p,c);u=c,p=i,i*=2}return i}function nz(e,t,n){var r,i,a,o={x:t.slice(),fx:0,fxprime:t.slice()},s={x:t.slice(),fx:0,fxprime:t.slice()},l=t.slice(),c=1;a=(n=n||{}).maxIterations||20*t.length,o.fx=e(o.x,o.fxprime),ZB(r=o.fxprime.slice(),o.fxprime,-1);for(var u=0;u<a;++u){if(c=tz(e,r,o,s,c),n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:c}),c){JB(l,1,s.fxprime,-1,o.fxprime);var h=KB(o.fxprime,o.fxprime);JB(r,Math.max(0,KB(l,s.fxprime)/h),r,-1,s.fxprime),i=o,o=s,s=i}else ZB(r,o.fxprime,-1);if(QB(o.fxprime)<=1e-5)break}return n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:c}),o}function rz(e,t){var n,r=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var i=sz(e[n],e[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],t.push(o)}return t}(e),i=r.filter((function(t){return function(e,t){for(var n=0;n<t.length;++n)if(az(e,t[n])>t[n].radius+1e-10)return!1;return!0}(t,e)})),a=0,o=0,s=[];if(i.length>1){var l=lz(i);for(n=0;n<i.length;++n){var c=i[n];c.angle=Math.atan2(c.x-l.x,c.y-l.y)}i.sort((function(e,t){return t.angle-e.angle}));var u=i[i.length-1];for(n=0;n<i.length;++n){var h=i[n];o+=(u.x+h.x)*(h.y-u.y);for(var p={x:(h.x+u.x)/2,y:(h.y+u.y)/2},d=null,f=0;f<h.parentIndex.length;++f)if(u.parentIndex.indexOf(h.parentIndex[f])>-1){var m=e[h.parentIndex[f]],g=Math.atan2(h.x-m.x,h.y-m.y),v=Math.atan2(u.x-m.x,u.y-m.y),y=v-g;y<0&&(y+=2*Math.PI);var x=v-y/2,E=az(p,{x:m.x+m.radius*Math.sin(x),y:m.y+m.radius*Math.cos(x)});E>2*m.radius&&(E=2*m.radius),(null===d||d.width>E)&&(d={circle:m,width:E,p1:h,p2:u})}null!==d&&(s.push(d),a+=iz(d.circle.radius,d.width),u=h)}}else{var b=e[0];for(n=1;n<e.length;++n)e[n].radius<b.radius&&(b=e[n]);var C=!1;for(n=0;n<e.length;++n)if(az(e[n],b)>Math.abs(b.radius-e[n].radius)){C=!0;break}C?a=o=0:(a=b.radius*b.radius*Math.PI,s.push({circle:b,p1:{x:b.x,y:b.y+b.radius},p2:{x:b.x-1e-10,y:b.y+b.radius},width:2*b.radius}))}return o/=2,t&&(t.area=a+o,t.arcArea=a,t.polygonArea=o,t.arcs=s,t.innerPoints=i,t.intersectionPoints=r),a+o}function iz(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function az(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function oz(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=t-(n*n-e*e+t*t)/(2*n);return iz(e,e-(n*n-t*t+e*e)/(2*n))+iz(t,r)}function sz(e,t){var n=az(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),s=e.x+a*(t.x-e.x)/n,l=e.y+a*(t.y-e.y)/n,c=-(t.y-e.y)*(o/n),u=-(t.x-e.x)*(o/n);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function lz(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function cz(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+1e-10?Math.abs(e-t):function(e,t,n,r){var i=(r=r||{}).maxIterations||100,a=r.tolerance||1e-10,o=e(t),s=e(n),l=n-t;if(o*s>0)throw"Initial bisect points must have opposite signs";if(0===o)return t;if(0===s)return n;for(var c=0;c<i;++c){var u=t+(l/=2),h=e(u);if(h*o>=0&&(t=u),Math.abs(l)<a||0===h)return u}return t+l}((function(r){return oz(e,t,r)-n}),0,e+t)}function uz(e,t){var n=function(e,t){for(var n,r=t&&t.lossFunction?t.lossFunction:hz,i={},a={},o=0;o<e.length;++o){var s=e[o];1==s.sets.length&&(n=s.sets[0],i[n]={x:1e10,y:1e10,rowid:Object.keys(i).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},a[n]=[])}e=e.filter((function(e){return 2==e.sets.length}));for(o=0;o<e.length;++o){var l=e[o],c=l.hasOwnProperty("weight")?l.weight:1,u=l.sets[0],h=l.sets[1];l.size+1e-10>=Math.min(i[u].size,i[h].size)&&(c=0),a[u].push({set:h,size:l.size,weight:c}),a[h].push({set:u,size:l.size,weight:c})}var p=[];for(n in a)if(a.hasOwnProperty(n)){var d=0;for(o=0;o<a[n].length;++o)d+=a[n][o].size*a[n][o].weight;p.push({set:n,size:d})}function f(e,t){return t.size-e.size}p.sort(f);var m={};function g(e){return e.set in m}function v(e,t){i[t].x=e.x,i[t].y=e.y,m[t]=!0}v({x:0,y:0},p[0].set);for(o=1;o<p.length;++o){var y=p[o].set,x=a[y].filter(g);if(n=i[y],x.sort(f),0===x.length)throw"ERROR: missing pairwise overlap information";for(var E=[],b=0;b<x.length;++b){var C=i[x[b].set],w=cz(n.radius,C.radius,x[b].size);E.push({x:C.x+w,y:C.y}),E.push({x:C.x-w,y:C.y}),E.push({y:C.y+w,x:C.x}),E.push({y:C.y-w,x:C.x});for(var T=b+1;T<x.length;++T)for(var S=i[x[T].set],k=cz(n.radius,S.radius,x[T].size),_=sz({x:C.x,y:C.y,radius:w},{x:S.x,y:S.y,radius:k}),A=0;A<_.length;++A)E.push(_[A])}var O=1e50,I=E[0];for(b=0;b<E.length;++b){i[y].x=E[b].x,i[y].y=E[b].y;var M=r(i,e);M<O&&(O=M,I=E[b])}v(I,y)}return i}(e,t),r=t.lossFunction||hz;if(e.length>=8){var i=function(e,t){var n,r=(t=t||{}).restarts||10,i=[],a={};for(n=0;n<e.length;++n){var o=e[n];1==o.sets.length&&(a[o.sets[0]]=i.length,i.push(o))}var s=function(e,t,n){var r=qB(t.length,t.length),i=qB(t.length,t.length);return e.filter((function(e){return 2==e.sets.length})).map((function(e){var a=n[e.sets[0]],o=n[e.sets[1]],s=cz(Math.sqrt(t[a].size/Math.PI),Math.sqrt(t[o].size/Math.PI),e.size);r[a][o]=r[o][a]=s;var l=0;e.size+1e-10>=Math.min(t[a].size,t[o].size)?l=1:e.size<=1e-10&&(l=-1),i[a][o]=i[o][a]=l})),{distances:r,constraints:i}}(e,i,a),l=s.distances,c=s.constraints,u=QB(l.map(QB))/l.length;l=l.map((function(e){return e.map((function(e){return e/u}))}));var h,p,d=function(e,t){return function(e,t,n,r){var i,a=0;for(i=0;i<t.length;++i)t[i]=0;for(i=0;i<n.length;++i)for(var o=e[2*i],s=e[2*i+1],l=i+1;l<n.length;++l){var c=e[2*l],u=e[2*l+1],h=n[i][l],p=r[i][l],d=(c-o)*(c-o)+(u-s)*(u-s),f=Math.sqrt(d),m=d-h*h;p>0&&f<=h||p<0&&f>=h||(a+=2*m*m,t[2*i]+=4*m*(o-c),t[2*i+1]+=4*m*(s-u),t[2*l]+=4*m*(c-o),t[2*l+1]+=4*m*(u-s))}return a}(e,t,l,c)};for(n=0;n<r;++n){p=nz(d,XB(2*l.length).map(Math.random),t),(!h||p.fx<h.fx)&&(h=p)}var f=h.x,m={};for(n=0;n<i.length;++n){var g=i[n];m[g.sets[0]]={x:f[2*n]*u,y:f[2*n+1]*u,radius:Math.sqrt(g.size/Math.PI)}}if(t.history)for(n=0;n<t.history.length;++n)ZB(t.history[n].x,u);return m}(e,t);r(i,e)+1e-8<r(n,e)&&(n=i)}return n}function hz(e,t){var n=0;for(var r=0;r<t.length;++r){var i=t[r],a=void 0;if(1!=i.sets.length){if(2==i.sets.length){var o=e[i.sets[0]],s=e[i.sets[1]];a=oz(o.radius,s.radius,az(o,s))}else a=rz(i.sets.map((function(t){return e[t]})));n+=(i.hasOwnProperty("weight")?i.weight:1)*(a-i.size)*(a-i.size)}}return n}function pz(e,t,n,r){var i=[],a=[];for(var o in e)e.hasOwnProperty(o)&&(a.push(o),i.push(e[o]));t-=2*r,n-=2*r;var s=function(e){var t=function(t){return{max:Math.max.apply(null,e.map((function(e){return e[t]+e.radius}))),min:Math.min.apply(null,e.map((function(e){return e[t]-e.radius})))}};return{xRange:t("x"),yRange:t("y")}}(i),l=s.xRange,c=s.yRange;if(l.max==l.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),e;for(var u=t/(l.max-l.min),h=n/(c.max-c.min),p=Math.min(h,u),d=(t-(l.max-l.min)*p)/2,f=(n-(c.max-c.min)*p)/2,m={},g=0;g<i.length;++g){var v=i[g];m[a[g]]={radius:p*v.radius,x:r+d+(v.x-l.min)*p,y:r+f+(v.y-c.min)*p}}return m}function dz(e,t,n){var r,i,a=t[0].radius-az(t[0],e);for(r=1;r<t.length;++r)(i=t[r].radius-az(t[r],e))<=a&&(a=i);for(r=0;r<n.length;++r)(i=az(n[r],e)-n[r].radius)<=a&&(a=i);return a}function fz(e,t){var n,r=[];for(n=0;n<e.length;++n){var i=e[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var a=r[0],o=dz(r[0],e,t);for(n=1;n<r.length;++n){var s=dz(r[n],e,t);s>=o&&(a=r[n],o=s)}var l=ez((function(n){return-1*dz({x:n[0],y:n[1]},e,t)}),[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:l[0],y:l[1]},u=!0;for(n=0;n<e.length;++n)if(az(c,e[n])>e[n].radius){u=!1;break}for(n=0;n<t.length;++n)if(az(c,t[n])<t[n].radius){u=!1;break}if(!u)if(1==e.length)c={x:e[0].x,y:e[0].y};else{var h={};rz(e,h),c=0===h.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==h.arcs.length?{x:h.arcs[0].circle.x,y:h.arcs[0].circle.y}:t.length?fz(e,[]):lz(h.arcs.map((function(e){return e.p1})))}return c}function mz(e,t){for(var n={},r=function(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var i=0;i<n.length;i++)for(var a=e[n[i]],o=i+1;o<n.length;++o){var s=e[n[o]],l=az(a,s);l+s.radius<=a.radius+1e-10?t[n[o]].push(n[i]):l+a.radius<=s.radius+1e-10&&t[n[i]].push(n[o])}return t}(e),i=0;i<t.length;++i){for(var a=t[i].sets,o={},s={},l=0;l<a.length;++l){o[a[l]]=!0;for(var c=r[a[l]],u=0;u<c.length;++u)s[c[u]]=!0}var h=[],p=[];for(var d in e)d in o?h.push(e[d]):d in s||p.push(e[d]);var f=fz(h,p);n[a]=f,f.disjoint&&t[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return n}var gz={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(e){return{name:e.id,value:e.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]},vz=Ld((function(e,t,n,r){var i=new Map,a=e.length;return t.forEach((function(t,o){if(1===t[r].length)i.set(t.id,e[(o+a)%a]);else{var s=t[r].map((function(e){return i.get(e)}));i.set(t.id,s.slice(1).reduce((function(e,t){return VB(e,t,n)}),s[0]))}})),i}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return JSON.stringify(e)}));function yz(e,t,n,r){void 0===r&&(r=0);var i=e.data,a=e.setsField,o=e.sizeField;if(0===i.length)return FN(TN.WARN,!1,"warn: %s","数据不能为空"),[];var s=i.map((function(e){var t;return _p(_p({},e),((t={sets:e[a]||[],size:e[o]}).path="",t.id="",t))}));s.sort((function(e,t){return e.sets.length-t.sets.length}));var l=pz(function(e,t){(t=t||{}).maxIterations=t.maxIterations||500;var n,r=t.initialLayout||uz,i=t.lossFunction||hz,a=r(e=function(e){e=e.slice();var t,n,r,i,a=[],o={};for(t=0;t<e.length;++t){var s=e[t];1==s.sets.length?a.push(s.sets[0]):2==s.sets.length&&(o[[r=s.sets[0],i=s.sets[1]]]=!0,o[[i,r]]=!0)}for(a.sort((function(e,t){return e>t?1:-1})),t=0;t<a.length;++t)for(r=a[t],n=t+1;n<a.length;++n)[r,i=a[n]]in o||e.push({sets:[r,i],size:0});return e}(e),t),o=[],s=[];for(n in a)a.hasOwnProperty(n)&&(o.push(a[n].x),o.push(a[n].y),s.push(n));for(var l=ez((function(t){for(var n={},r=0;r<s.length;++r){var o=s[r];n[o]={x:t[2*r],y:t[2*r+1],radius:a[o].radius}}return i(n,e)}),o,t).x,c=0;c<s.length;++c)n=s[c],a[n].x=l[2*c],a[n].y=l[2*c+1];return a}(s),t,n,r),c=mz(l,s);return s.forEach((function(e){var t=e.sets,n=t.join(",");e.id=n;var r=function(e){var t={};rz(e,t);var n=t.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return function(e,t,n){var r=[],i=e-n,a=t;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var o=n[a],s=o.circle.radius,l=o.width>s;i.push("\nA",s,s,0,l?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}(t.map((function(e){return l[e]})));/[zZ]$/.test(r)||(r+=" Z"),e.path=r,Md(e,c[n]||{x:0,y:0})})),s}function xz(e){e&&e.geometries[0].elements.forEach((function(e){e.shape.toFront()}))}Zk("schema","venn",{draw:function(e,t){var n=uy(e.data.path),r=function(e){return qN({},e.defaultStyle,{fill:e.color},e.style)}(e),i=t.addGroup({name:"venn-shape"});i.addShape("path",{attrs:_p(_p({},r),{path:n}),name:"venn-path"});var a=e.customInfo,o=a.offsetX,s=a.offsetY,l=F_.transform(null,[["t",o,s]]);return i.setMatrix(l),i},getMarker:function(e){var t=e.color;return{symbol:"circle",style:{lineWidth:0,stroke:t,fill:t,r:4}}}}),Vk("venn",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getLabelPoint=function(e,t,n){var r=e.data,i=r.x,a=r.y,o=e.customLabelInfo,s=o.offsetX,l=o.offsetY;return{content:e.content[n],x:i+s,y:a+l}},t}(d_));var Ez=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.syncElementsPos=function(){xz(this.context.view)},t.prototype.active=function(){e.prototype.active.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(sS("element-active")),bz=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.syncElementsPos=function(){xz(this.context.view)},t.prototype.highlight=function(){e.prototype.highlight.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.clear=function(){e.prototype.clear.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(sS("element-highlight")),Cz=sS("element-selected"),wz=sS("element-single-selected"),Tz=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.syncElementsPos=function(){xz(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(Cz),Sz=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.syncElementsPos=function(){xz(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(wz);lS("venn-element-active",Ez),lS("venn-element-highlight",bz),lS("venn-element-selected",Tz),lS("venn-element-single-selected",Sz),XS("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),XS("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),XS("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),XS("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),XS("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),XS("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});function kz(e,t,n){var r=e.chart,i=e.options,a=i.blendMode,o=i.setsField,s=r.getTheme(),l=s.colors10,c=s.colors20,u=n;Bp(u)||(u=t.filter((function(e){return 1===e[o].length})).length<=10?l:c);var h=vz(u,t,a,o);return function(e){return h.get(e)||u[0]}}function _z(e){var t=e.chart,n=e.options,r=n.legend,i=n.appendPadding,a=n.padding,o=oF(i);return!1!==r&&(o=sF(i,Yd(r,"position"),40)),t.appendPadding=lF([o,a]),e}function Az(e){var t=e.options.data;t||(FN(TN.WARN,!1,"warn: %s","数据不能为空"),t=[]);var n=t.filter((function(e){return 1===e.sets.length})).map((function(e){return e.sets[0]})),r=t.filter((function(e){var t=e.sets;return function(e,t){for(var n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0}(n,t)}));return jd(r,t)||FN(TN.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),Rd({},e,{options:{data:r}})}function Oz(e){var t=e.chart,n=e.options,r=n.pointStyle,i=n.setsField,a=n.sizeField,o=oF(t.appendPadding),s=o[0],l=o[1],c=o[2],u=o[3],h={offsetX:u,offsetY:s},p=t.viewBBox,d=p.width,f=p.height,m=yz(n,Math.max(d-(l+u),0),Math.max(f-(s+c),0),0);t.data(m);var g=vL(qN({},e,{options:{xField:"x",yField:"y",sizeField:a,seriesField:"id",rawFields:[i,a],schema:{shape:"venn",style:r}}})).ext.geometry;g.customInfo(h);var v=function(e,t){var n=e.options.color;if("function"!=typeof n){var r=kz(e,t,"string"==typeof n?[n]:n);return function(e){return r(e.id)}}return n}(e,m);return"function"==typeof v&&g.color("id",(function(t){var n=m.find((function(e){return e.id===t})),r=kz(e,m)(t);return v(n,r)})),e}function Iz(e){var t=e.chart,n=e.options.label,r=oF(t.appendPadding),i=r[0],a={offsetX:r[3],offsetY:i},o=PN(t,"schema");if(n){var s=n.callback,l=Ap(n,["callback"]);o.label({fields:["id"],callback:s,cfg:Rd({},GN(l),{type:"venn",customLabelInfo:a})})}else o.label(!1);return e}function Mz(e){var t=e.chart,n=e.options,r=n.legend,i=n.sizeField;return t.legend("id",r),t.legend(i,!1),e}function Nz(e){return e.chart.axis(!1),e}function Fz(e){var t=e.options,n=e.chart,r=t.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};ZF(qN({},e,{options:{interactions:r.map((function(e){return _p(_p({},e),{type:i[e.type]||e.type})}))}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),e}function Lz(e){return ON(_z,eL,Az,Oz,Iz,iL({}),Mz,Nz,QF,Fz,JF)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="venn",t}kp(t,e),t.getDefaultOptions=function(){return gz},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Lz},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(LF);var Pz,Rz="$$stock-range$$",Dz=qN({},LF.getDefaultOptions(),{tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(e,t,n){var r;if("x"===e){var i=n[0];r=i?i.title:t}else r=t;return{position:"y"===e?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function Bz(e,t){return Gd(e,(function(e){if(Bp(t)){var n=t[0],r=t[1],i=t[2],a=t[3];e.trend=e[n]<=e[r]?"up":"down",e[Rz]=[e[n],e[r],e[i],e[a]]}return e}))}function zz(e){var t=e.chart,n=e.options,r=n.yField,i=n.data,a=n.risingFill,o=n.fallingFill,s=n.tooltip,l=n.stockStyle;t.data(Bz(i,r));var c=s;return!1!==c&&(c=qN({},{fields:r},c)),vL(qN({},e,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:Rz,seriesField:"trend",rawFields:r,tooltip:c}})),e}function Hz(e){var t,n,r=e.chart,i=e.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=((t={})[l]={type:"timeCat",tickCount:6},t.trend={values:["up","down"]},t),u=qN(c,a,((n={})[l]=IN(o,PF),n[Rz]=IN(s,PF),n));return r.scale(u),e}function jz(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?t.axis(Rz,!1):t.axis(Rz,i),e}function Gz(e){var t=e.chart,n=e.options.tooltip;return!1!==n?t.tooltip(n):t.tooltip(!1),e}function $z(e){var t=e.chart,n=e.options.legend;return n?t.legend("trend",n):!1===n&&t.legend(!1),e}function Yz(e){ON(eL,zz,Hz,jz,Gz,$z,ZF,JF,aL(),nL)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="stock",t}kp(t,e),t.getDefaultOptions=function(){return Dz},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Yz},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField;this.chart.changeData(Bz(e,t))}}(LF);var Uz={appendPadding:[0,80],minSize:0,maxSize:1,meta:(Pz={},Pz.$$mappingValue$$={min:0,max:1,nice:!1},Pz),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}};function Vz(e,t,n){var r=n.yField,i=n.maxSize,a=n.minSize,o=Yd(fd(t,r),[r]),s=pd(i)?i:1,l=pd(a)?a:0;return Gd(e,(function(t,n){var i=(t[r]||0)/o;return t.$$percentage$$=i,t.$$mappingValue$$=(s-l)*i+l,t.$$conversion$$=[Yd(e,[n-1,r]),t[r]],t}))}function Wz(e){return function(t){var n=t.chart,r=t.options.conversionTag,i=n.getOptions().data;if(r){var a=r.formatter;i.forEach((function(t,o){if(!(o<=0||Number.isNaN(t.$$mappingValue$$))){var s=e(t,o,i,{top:!0,text:{content:Rp(a)?a(t,i):a,offsetX:r.offsetX,offsetY:r.offsetY,position:"end",autoRotate:!1,style:_p({textAlign:"start",textBaseline:"middle"},r.style)}});n.annotation().line(s)}}))}return t}}function Xz(e){var t=e.chart,n=e.options,r=n.data,i=void 0===r?[]:r,a=Vz(i,i,{yField:n.yField,maxSize:n.maxSize,minSize:n.minSize});return t.data(a),e}function qz(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,l=n.shape,c=void 0===l?"funnel":l,u=n.funnelStyle,h=n.state,p=sL(o,[r,i]),d=p.fields,f=p.formatter;return uL({chart:t,options:{type:"interval",xField:r,yField:"$$mappingValue$$",colorField:r,tooltipFields:Bp(d)&&d.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:c,tooltip:f,color:a,style:u},label:s,state:h}}),PN(e.chart,"interval").adjust("symmetric"),e}function Kz(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),e}function Qz(e){var t=e.options.maxSize;return Wz((function(e,n,r,i){var a=t-(t-e.$$mappingValue$$)/2;return _p(_p({},i),{start:[n-.5,a],end:[n-.5,a+.05]})}))(e),e}function Zz(e){return ON(Xz,qz,Kz,Qz)(e)}function Jz(e){var t,n=e.chart,r=e.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return n.data(a),n.scale(((t={})[o]={sync:!0},t)),e}function eH(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.color,s=n.compareField,l=n.isTransposed,c=n.tooltip,u=n.maxSize,h=n.minSize,p=n.label,d=n.funnelStyle,f=n.state;return t.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],eachView:function(e,t){var n=l?t.rowIndex:t.columnIndex;l||e.coordinate({type:"rect",actions:[["transpose"],["scale",0===n?-1:1,-1]]});var m=Vz(t.data,r,{yField:a,maxSize:u,minSize:h});e.data(m);var g=sL(c,[i,a,s]),v=g.fields,y=g.formatter,x=l?{offset:0===n?10:-23,position:0===n?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:0===n?"end":"start"}};uL({chart:e,options:{type:"interval",xField:i,yField:"$$mappingValue$$",colorField:i,tooltipFields:Bp(v)&&v.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:"funnel",tooltip:y,color:o,style:d},label:!1!==p&&qN({},x,p),state:f}})}}),e}function tH(e){var t=e.chart,n=e.options,r=n.conversionTag,i=n.isTransposed;return t.once("beforepaint",(function(){t.views.forEach((function(e,t){Wz((function(e,n,a,o){var s=0===t?-1:1;return qN({},o,{start:[n-.5,e.$$mappingValue$$],end:[n-.5,e.$$mappingValue$$+.05],text:i?{style:{textAlign:"start"}}:{offsetX:!1!==r?s*r.offsetX:0,style:{textAlign:0===t?"end":"start"}}})}))(qN({},{chart:e,options:n}))}))})),e}function nH(e){var t,n=e.chart,r=e.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return n.data(a),n.scale(((t={})[o]={sync:!0},t)),e}function rH(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.isTransposed;return t.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],eachView:function(t,n){Zz(qN({},e,{chart:t,options:{data:n.data}}))}}),e}function iH(e){var t=e.chart,n=e.options,r=n.data,i=void 0===r?[]:r,a=n.yField,o=Zp(i,(function(e,t){return e+(t[a]||0)}),0),s=fd(i,a)[a],l=Gd(i,(function(e,t){var n=[],r=[];if(e.$$totalPercentage$$=(e[a]||0)/o,t){var l=i[t-1].$$x$$,c=i[t-1].$$y$$;n[0]=l[3],r[0]=c[3],n[1]=l[2],r[1]=c[2]}else n[0]=-.5,r[0]=1,n[1]=.5,r[1]=1;return r[2]=r[1]-e.$$totalPercentage$$,n[2]=(r[2]+1)/4,r[3]=r[2],n[3]=-n[2],e.$$x$$=n,e.$$y$$=r,e.$$percentage$$=(e[a]||0)/s,e.$$conversion$$=[Yd(i,[t-1,a]),e[a]],e}));return t.data(l),e}function aH(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,l=n.funnelStyle,c=n.state,u=sL(o,[r,i]),h=u.fields,p=u.formatter;return uL({chart:t,options:{type:"polygon",xField:"$$x$$",yField:"$$y$$",colorField:r,tooltipFields:Bp(h)&&h.concat(["$$percentage$$","$$conversion$$"]),label:s,state:c,mapping:{tooltip:p,color:a,style:l}}}),e}function oH(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),e}function sH(e){return Wz((function(e,t,n,r){return _p(_p({},r),{start:[e.$$x$$[1],e.$$y$$[1]],end:[e.$$x$$[1]+.05,e.$$y$$[1]]})}))(e),e}function lH(e){var t,n=e.options,r=n.compareField,i=n.xField,a=n.yField,o=n.locale,s=n.funnelStyle,l=n.data,c=pF(o);return(r||s)&&(t=function(e){return qN({},r&&{lineWidth:1,stroke:"#fff"},Rp(s)?s(e):s)}),qN({options:{label:r?{fields:[i,a,r,"$$percentage$$","$$conversion$$"],formatter:function(e){return""+e[a]}}:{fields:[i,a,"$$percentage$$","$$conversion$$"],offset:0,position:"middle",formatter:function(e){return e[i]+" "+e[a]}},tooltip:{title:i,formatter:function(e){return{name:e[i],value:e[a]}}},conversionTag:{formatter:function(e){return c.get(["conversionTag","label"])+": "+RL.apply(void 0,e.$$conversion$$)}}}},e,{options:{funnelStyle:t,data:Nd(l)}})}function cH(e){var t=e.options,n=t.compareField,r=t.dynamicHeight;return t.seriesField?function(e){return ON(nH,rH)(e)}(e):n?function(e){return ON(Jz,eH,tH)(e)}(e):r?function(e){return ON(iH,aH,oH,sH)(e)}(e):Zz(e)}function uH(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ON(iL(((t={})[a]=r,t[o]=i,t)))(e)}function hH(e){return e.chart.axis(!1),e}function pH(e){var t=e.chart,n=e.options.legend;return!1===n?t.legend(!1):t.legend(n),e}function dH(e){return ON(lH,cH,uH,hH,QF,ZF,pH,JF,eL,aL())(e)}var fH=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="funnel",t}return kp(t,e),t.getDefaultOptions=function(){return Uz},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return dH},t.prototype.setState=function(e,t,n){void 0===n&&(n=!0),Hp(DN(this.chart),(function(r){t(r.getData())&&r.setState(e,n)}))},t.prototype.getStates=function(){var e=DN(this.chart),t=[];return Hp(e,(function(e){var n=e.getData();Hp(e.getStates(),(function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})}))})),t},t.CONVERSATION_FIELD="$$conversion$$",t.PERCENT_FIELD="$$percentage$$",t.TOTAL_PERCENT_FIELD="$$totalPercentage$$",t}(LF);function mH(e){return[{percent:e,type:"liquid"}]}function gH(e){var t=e.chart,n=e.options,r=n.percent,i=n.liquidStyle,a=n.radius,o=n.outline,s=n.wave,l=n.shape;t.scale({percent:{min:0,max:1}}),t.data(mH(r));var c=n.color||t.getTheme().defaultColor,u=fL(qN({},e,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:c,style:i,shape:"liquid-fill-gauge"}}})).ext.geometry,h={radius:a,outline:o,wave:s,shape:l,background:t.getTheme().background};return u.customInfo(h),t.legend(!1),t.axis(!1),t.tooltip(!1),e}function vH(e,t){var n=e.chart,r=e.options,i=r.statistic,a=r.percent,o=r.meta;n.getController("annotation").clear(!0);var s=Yd(o,["percent","formatter"])||function(e){return(100*e).toFixed(2)+"%"},l=i.content;return l&&(l=qN({},l,{content:Dp(l.content)?s(a):l.content})),eF(n,{statistic:_p(_p({},i),{content:l}),plotType:"liquid"},{percent:a}),t&&n.render(!0),e}function yH(e){return ON(eL,qF("liquidStyle"),gH,vH,iL({}),JF,ZF)(e)}var xH={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"};function EH(e,t,n){return e+(t-e)*n}function bH(e,t,n,r){return 0===t?[[e+.5*n/Math.PI/2,r/2],[e+.5*n/Math.PI,r],[e+n/4,r]]:1===t?[[e+.5*n/Math.PI/2*(Math.PI-2),r],[e+.5*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:2===t?[[e+.5*n/Math.PI/2,-r/2],[e+.5*n/Math.PI,-r],[e+n/4,-r]]:[[e+.5*n/Math.PI/2*(Math.PI-2),-r],[e+.5*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function CH(e,t,n,r,i,a,o){for(var s=4*Math.ceil(2*e/n*4),l=[],c=r;c<2*-Math.PI;)c+=2*Math.PI;for(;c>0;)c-=2*Math.PI;var u=a-e+(c=c/Math.PI/2*n)-2*e;l.push(["M",u,t]);for(var h=0,p=0;p<s;++p){var d=bH(p*n/4,p%4,n,i);l.push(["C",d[0][0]+u,-d[0][1]+t,d[1][0]+u,-d[1][1]+t,d[2][0]+u,-d[2][1]+t]),p===s-1&&(h=d[2][0])}return l.push(["L",h+u,o+e]),l.push(["L",u,o+e]),l.push(["Z"]),l}function wH(e,t,n,r){var i=2*n/3,a=Math.max(i,r),o=i/2,s=e,l=o+t-a/2,c=Math.asin(o/(.85*(a-o))),u=Math.sin(c)*o,h=Math.cos(c)*o,p=s-h,d=l+u,f=e,m=l+o/Math.sin(c);return"\n      M "+p+" "+d+"\n      A "+o+" "+o+" 0 1 1 "+(p+2*h)+" "+d+"\n      Q "+f+" "+m+" "+e+" "+(t+a/2)+"\n      Q "+f+" "+m+" "+p+" "+d+"\n      Z \n    "}function TH(e,t,n,r){var i=n/2,a=r/2;return"\n      M "+e+" "+(t-a)+" \n      a "+i+" "+a+" 0 1 0 0 "+2*a+"\n      a "+i+" "+a+" 0 1 0 0 "+2*-a+"\n      Z\n    "}function SH(e,t,n,r){var i=r/2,a=n/2;return"\n      M "+e+" "+(t-i)+"\n      L "+(e+a)+" "+t+"\n      L "+e+" "+(t+i)+"\n      L "+(e-a)+" "+t+"\n      Z\n    "}function kH(e,t,n,r){var i=r/2,a=n/2;return"\n      M "+e+" "+(t-i)+"\n      L "+(e+a)+" "+(t+i)+"\n      L "+(e-a)+" "+(t+i)+"\n      Z\n    "}function _H(e,t,n,r){var i=r/2,a=n/2*.618;return"\n      M "+(e-a)+" "+(t-i)+"\n      L "+(e+a)+" "+(t-i)+"\n      L "+(e+a)+" "+(t+i)+"\n      L "+(e-a)+" "+(t+i)+"\n      Z\n    "}function AH(e){var t=e.data,n=e.xField,r=e.measureField,i=e.rangeField,a=e.targetField,o=e.layout,s=[],l=[];t.forEach((function(e,t){var o;e[i].sort((function(e,t){return e-t})),e[i].forEach((function(r,a){var o,l=0===a?r:e[i][a]-e[i][a-1];s.push(((o={rKey:i+"_"+a})[n]=n?e[n]:String(t),o[i]=l,o))})),e[r].forEach((function(i,a){var o;s.push(((o={mKey:e[r].length>1?r+"_"+a:""+r})[n]=n?e[n]:String(t),o[r]=i,o))})),s.push(((o={tKey:""+a})[n]=n?e[n]:String(t),o[a]=e[a],o)),l.push(e[i],e[r],e[a])}));var c=Math.min.apply(Math,l.flat(1/0)),u=Math.max.apply(Math,l.flat(1/0));return c=c>0?0:c,"vertical"===o&&s.reverse(),{min:c,max:u,ds:s}}function OH(e){var t=e.chart,n=e.options,r=n.bulletStyle,i=n.targetField,a=n.rangeField,o=n.measureField,s=n.xField,l=n.color,c=n.layout,u=n.size,h=n.label,p=AH(n),d=p.min,f=p.max,m=p.ds;return t.data(m),fL(qN({},e,{options:{xField:s,yField:a,seriesField:"rKey",isStack:!0,label:Yd(h,"range"),interval:{color:Yd(l,"range"),style:Yd(r,"range"),size:Yd(u,"range")}}})),t.geometries[0].tooltip(!1),fL(qN({},e,{options:{xField:s,yField:o,seriesField:"mKey",isStack:!0,label:Yd(h,"measure"),interval:{color:Yd(l,"measure"),style:Yd(r,"measure"),size:Yd(u,"measure")}}})),dL(qN({},e,{options:{xField:s,yField:i,seriesField:"tKey",label:Yd(h,"target"),point:{color:Yd(l,"target"),style:Yd(r,"target"),size:Rp(Yd(u,"target"))?function(e){return Yd(u,"target")(e)/2}:Yd(u,"target")/2,shape:"horizontal"===c?"line":"hyphen"}}})),"horizontal"===c&&t.coordinate().transpose(),_p(_p({},e),{ext:{data:{min:d,max:f}}})}function IH(e){var t,n,r=e.options,i=e.ext,a=r.xAxis,o=r.yAxis,s=r.targetField,l=r.rangeField,c=r.measureField,u=r.xField,h=i.data;return ON(iL(((t={})[u]=a,t[c]=o,t),((n={})[c]={min:null==h?void 0:h.min,max:null==h?void 0:h.max,sync:!0},n[s]={sync:""+c},n[l]={sync:""+c},n)))(e)}function MH(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.measureField,s=n.rangeField,l=n.targetField;return t.axis(""+s,!1),t.axis(""+l,!1),!1===r?t.axis(""+a,!1):t.axis(""+a,r),!1===i?t.axis(""+o,!1):t.axis(""+o,i),e}function NH(e){var t=e.chart,n=e.options.legend;return t.removeInteraction("legend-filter"),t.legend(n),t.legend("rKey",!1),t.legend("mKey",!1),t.legend("tKey",!1),e}function FH(e){var t=e.chart,n=e.options,r=n.label,i=n.measureField,a=n.targetField,o=n.rangeField,s=t.geometries,l=s[0],c=s[1],u=s[2];return Yd(r,"range")?l.label(""+o,_p({layout:[{type:"limit-in-plot"}]},GN(r.range))):l.label(!1),Yd(r,"measure")?c.label(""+i,_p({layout:[{type:"limit-in-plot"}]},GN(r.measure))):c.label(!1),Yd(r,"target")?u.label(""+a,_p({layout:[{type:"limit-in-plot"}]},GN(r.target))):u.label(!1),e}function LH(e){ON(OH,IH,MH,NH,eL,FH,QF,ZF,JF)(e)}Zk("interval","liquid-fill-gauge",{draw:function(e,t){var n=e.customInfo,r=n,i=r.radius,a=r.shape,o=r.background,s=n.outline,l=n.wave,c=s.border,u=s.distance,h=l.count,p=l.length,d=Zp(e.points,(function(e,t){return Math.min(e,t.x)}),1/0),f=this.parsePoint({x:.5,y:.5}),m=this.parsePoint({x:d,y:.5}),g=f.x-m.x,v=Math.min(g,m.y*i),y=function(e){var t=_p({opacity:1},e.style);return e.color&&!t.fill&&(t.fill=e.color),t}(e),x=function(e){var t=Md({},{fill:"#fff",fillOpacity:0,lineWidth:4},e.style);return e.color&&!t.stroke&&(t.stroke=e.color),pd(e.opacity)&&(t.opacity=t.strokeOpacity=e.opacity),t}(Md({},e,s)),E=v-c/2,b={pin:wH,circle:TH,diamond:SH,triangle:kH,rect:_H},C=("function"==typeof a?a:b[a]||b.circle)(f.x,f.y,2*E,2*E),w=t.addGroup({name:"waves"}),T=w.setClip({type:"path",attrs:{path:C}});return function(e,t,n,r,i,a,o,s,l){for(var c=i.fill,u=i.opacity,h=o.getBBox(),p=h.maxX-h.minX,d=h.maxY-h.minY,f=0;f<r;f++){var m=r<=1?0:f/(r-1),g=a.addShape("path",{name:"waterwave-path",attrs:{path:CH(s,h.minY+d*n,l,0,p/32,e,t),fill:c,opacity:EH(.2,.9,m)*u}});try{var v=mP([["t",l,0]]);g.stopAnimate(),g.animate({matrix:v},{duration:EH(2500,5e3,m),repeat:!0})}catch(Wh){console.warn("off-screen group animate error!")}}}(f.x,f.y,1-e.points[1].y,h,y,w,T,2*v,p),t.addShape("path",{name:"distance",attrs:{path:C,fill:"transparent",lineWidth:c+2*u,stroke:"transparent"===o?"#fff":o}}),t.addShape("path",{name:"wrap",attrs:Md(x,{path:C,fill:"transparent",lineWidth:c})}),t}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="liquid",t}kp(t,e),t.getDefaultOptions=function(){return xH},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.chart.emit(cf.BEFORE_CHANGE_DATA,Tk.fromData(this.chart,cf.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(mH(e)),vH({chart:this.chart,options:this.options},!0),this.chart.emit(cf.AFTER_CHANGE_DATA,Tk.fromData(this.chart,cf.AFTER_CHANGE_DATA,null))},t.prototype.getSchemaAdaptor=function(){return yH}}(LF);var PH=qN({},LF.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bullet",t}kp(t,e),t.getDefaultOptions=function(){return PH},t.prototype.changeData=function(e){this.updateOption({data:e});var t=AH(this.options),n=t.min,r=t.max,i=t.ds;IH({options:this.options,ext:{data:{min:n,max:r}},chart:this.chart}),this.chart.changeData(i)},t.prototype.getSchemaAdaptor=function(){return LH},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(LF);function RH(e,t){var n=e.field,r=e.fields;if(ed(n))return n;if(Bp(n))return console.warn("Invalid field: it must be a string!"),n[0];if(console.warn("Invalid field: it must be a string! will try to get fields instead."),ed(r))return r;if(Bp(r)&&r.length)return r[0];if(t)return t;throw new TypeError("Invalid field: it must be a string!")}function DH(e){var t,n,r=[];e&&e.each?e.each((function(e){var i,a;e.parent!==t?(t=e.parent,n=0):n+=1;var o=Fp(((null===(i=e.ancestors)||void 0===i?void 0:i.call(e))||[]).map((function(e){return r.find((function(t){return t.name===e.name}))||e})),(function(t){var n=t.depth;return n>0&&n<e.depth}));e.nodeAncestor=o,e.childNodeCount=(null===(a=e.children)||void 0===a?void 0:a.length)||0,e.nodeIndex=n,r.push(e)})):e&&e.eachNode&&e.eachNode((function(e){r.push(e)}));return r}var BH=["path","nodeIndex","nodeAncestor","childNodeCount","name","depth","height"],zH=qN({},LF.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),HH={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},jH=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=HH,t}return kp(t,e),t.prototype.click=function(){var e=Yd(this.context,["event","data","data"]);if(!e)return!1;this.drill(e),this.drawBreadCrumb()},t.prototype.resetPosition=function(){if(this.breadCrumbGroup){var e=this.context.view.getCoordinate(),t=this.breadCrumbGroup,n=t.getBBox(),r=this.getButtonCfg().position,i={x:e.start.x,y:e.end.y-(n.height+10)};e.isPolar&&(i={x:0,y:0}),"bottom-left"===r&&(i={x:e.start.x,y:e.start.y});var a=F_.transform(null,[["t",i.x+0,i.y+n.height+5]]);t.setMatrix(a)}},t.prototype.back=function(){Jd(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},t.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},t.prototype.drill=function(e){var t=this.context.view,n=Yd(t,["interactions","drill-down","cfg","transformData"],(function(e){return e})),r=n(_p({data:e.data},e["hierarchy-data-transform-params"]));t.changeData(r);for(var i=[],a=e;a;){var o=a.data;i.unshift({id:o.name+"_"+a.height+"_"+a.depth,name:o.name,children:n(_p({data:o},e["hierarchy-data-transform-params"]))}),a=a.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(i)},t.prototype.backTo=function(e){if(e&&!(e.length<=0)){var t=this.context.view,n=id(e).children;t.changeData(n),e.length>1?(this.historyCache=e,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},t.prototype.getButtonCfg=function(){var e=this.context.view,t=Yd(e,["interactions","drill-down","cfg","drillDownConfig"]);return qN(this.breadCrumbCfg,null==t?void 0:t.breadCrumb,this.cfg)},t.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},t.prototype.drawBreadCrumbGroup=function(){var e=this,t=this.getButtonCfg(),n=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:"drilldown-bread-crumb"});var r=0;n.forEach((function(i,a){var o=e.breadCrumbGroup.addShape({type:"text",id:i.id,name:"drilldown-bread-crumb_"+i.name+"_text",attrs:_p(_p({text:0!==a||Dp(t.rootText)?i.name:t.rootText},t.textStyle),{x:r,y:0})}),s=o.getBBox();if(r+=s.width+4,o.on("click",(function(t){var r,i=t.target.get("id");if(i!==(null===(r=id(n))||void 0===r?void 0:r.id)){var a=n.slice(0,n.findIndex((function(e){return e.id===i}))+1);e.backTo(a)}})),o.on("mouseenter",(function(e){var r;e.target.get("id")!==(null===(r=id(n))||void 0===r?void 0:r.id)?o.attr(t.activeTextStyle):o.attr({cursor:"default"})})),o.on("mouseleave",(function(){o.attr(t.textStyle)})),a<n.length-1){var l=e.breadCrumbGroup.addShape({type:"text",name:t.name+"_"+i.name+"_divider",attrs:_p(_p({text:t.dividerText},t.textStyle),{x:r,y:0})}).getBBox();r+=l.width+4}}))},t.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},t.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),e.prototype.destroy.call(this)},t}(iS);function GH(e,t){return e.parent===t.parent?1:2}function $H(e,t){return e+t.x}function YH(e,t){return Math.max(e,t.y)}function UH(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function VH(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=XH)):void 0===t&&(t=WH);for(var n,r,i,a,o,s=new QH(e),l=[s];n=l.pop();)if((i=t(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)l.push(r=i[a]=new QH(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(KH)}function WH(e){return e.children}function XH(e){return Array.isArray(e)?e[1]:null}function qH(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function KH(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function QH(e){this.data=e,this.depth=this.height=0,this.parent=null}function ZH(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,a=[];r<i;)t=e[r],n&&tj(n,t)?++r:(n=rj(a=JH(a,t)),r=0);return n}function JH(e,t){var n,r;if(nj(t,e))return[t];for(n=0;n<e.length;++n)if(ej(t,e[n])&&nj(ij(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ej(ij(e[n],e[r]),t)&&ej(ij(e[n],t),e[r])&&ej(ij(e[r],t),e[n])&&nj(aj(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ej(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function tj(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function nj(e,t){for(var n=0;n<t.length;++n)if(!tj(e,t[n]))return!1;return!0}function rj(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return ij(e[0],e[1]);case 3:return aj(e[0],e[1],e[2])}var t}function ij(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,s=t.r,l=a-n,c=o-r,u=s-i,h=Math.sqrt(l*l+c*c);return{x:(n+a+l/h*u)/2,y:(r+o+c/h*u)/2,r:(h+i+s)/2}}function aj(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,s=t.y,l=t.r,c=n.x,u=n.y,h=n.r,p=r-o,d=r-c,f=i-s,m=i-u,g=l-a,v=h-a,y=r*r+i*i-a*a,x=y-o*o-s*s+l*l,E=y-c*c-u*u+h*h,b=d*f-p*m,C=(f*E-m*x)/(2*b)-r,w=(m*g-f*v)/b,T=(d*x-p*E)/(2*b)-i,S=(p*v-d*g)/b,k=w*w+S*S-1,_=2*(a+C*w+T*S),A=C*C+T*T-a*a,O=-(k?(_+Math.sqrt(_*_-4*k*A))/(2*k):A/_);return{x:r+C+w*O,y:i+T+S*O,r:O}}function oj(e,t,n){var r,i,a,o,s=e.x-t.x,l=e.y-t.y,c=s*s+l*l;c?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*s-a*l,n.y=e.y-r*l+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*s-a*l,n.y=t.y+r*l+a*s)):(n.x=t.x+n.r,n.y=t.y)}function sj(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function lj(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function cj(e){this._=e,this.next=null,this.previous=null}function uj(e){if(!(a=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,a,o,s,l,c,u,h,p;if((n=e[0]).x=0,n.y=0,!(a>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;oj(r,n,i=e[2]),n=new cj(n),r=new cj(r),i=new cj(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<a;++l){oj(n._,r._,i=e[l]),i=new cj(i),c=r.next,u=n.previous,h=r._.r,p=n._.r;do{if(h<=p){if(sj(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}h+=c._.r,c=c.next}else{if(sj(u._,i._)){(n=u).next=r,r.previous=n,--l;continue e}p+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=lj(n);(i=i.next)!==r;)(s=lj(i))<o&&(n=i,o=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=ZH(n),l=0;l<a;++l)(n=e[l]).x-=i.x,n.y-=i.y;return i.r}function hj(e){return null==e?null:pj(e)}function pj(e){if("function"!=typeof e)throw new Error;return e}function dj(){return 0}function fj(e){return function(){return e}}function mj(e){return Math.sqrt(e.value)}function gj(){var e=null,t=1,n=1,r=dj;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(vj(e)).eachAfter(yj(r,.5)).eachBefore(xj(1)):i.eachBefore(vj(mj)).eachAfter(yj(dj,1)).eachAfter(yj(r,i.r/Math.min(t,n))).eachBefore(xj(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=hj(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:fj(+e),i):r},i}function vj(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function yj(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,s=e(n)*t||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=uj(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function xj(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Ej(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function bj(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,c=e.value&&(r-t)/e.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}function Cj(){var e=1,t=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(function(e,t){return function(r){r.children&&bj(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(t,a)),r&&i.eachBefore(Ej),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}QH.prototype=VH.prototype={constructor:QH,count:function(){return this.eachAfter(UH)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,a=this,o=[a],s=[],l=-1;a=o.pop();)if(s.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=s.pop();)e.call(t,a,++l,this);return this},eachBefore:function(e,t){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(e.call(t,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return VH(this).eachBefore(qH)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,a=[i];do{for(e=a.reverse(),a=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n])}while(a.length)}};var wj={depth:-1},Tj={};function Sj(e){return e.id}function kj(e){return e.parentId}function _j(e,t){return e.parent===t.parent?1:2}function Aj(e){var t=e.children;return t?t[0]:e.t}function Oj(e){var t=e.children;return t?t[t.length-1]:e.t}function Ij(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Mj(e,t,n){return e.a.parent===t.parent?e.a:n}function Nj(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Fj(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,c=e.value&&(i-n)/e.value;++s<l;)(a=o[s]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}Nj.prototype=Object.create(QH.prototype);var Lj=(1+Math.sqrt(5))/2;function Pj(e,t,n,r,i,a){for(var o,s,l,c,u,h,p,d,f,m,g,v=[],y=t.children,x=0,E=0,b=y.length,C=t.value;x<b;){l=i-n,c=a-r;do{u=y[E++].value}while(!u&&E<b);for(h=p=u,g=u*u*(m=Math.max(c/l,l/c)/(C*e)),f=Math.max(p/g,g/h);E<b;++E){if(u+=s=y[E].value,s<h&&(h=s),s>p&&(p=s),g=u*u*m,(d=Math.max(p/g,g/h))>f){u-=s;break}f=d}v.push(o={value:u,dice:l<c,children:y.slice(x,E)}),o.dice?bj(o,n,r,i,C?r+=c*u/C:a):Fj(o,n,r,C?n+=l*u/C:i,a),C-=u,x=E}return v}var Rj=function e(t){function n(e,n,r,i,a){Pj(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Lj);function Dj(){var e=Rj,t=!1,n=1,r=1,i=[0],a=dj,o=dj,s=dj,l=dj,c=dj;function u(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(h),i=[0],t&&e.eachBefore(Ej),e}function h(t){var n=i[t.depth],r=t.x0+n,u=t.y0+n,h=t.x1-n,p=t.y1-n;h<r&&(r=h=(r+h)/2),p<u&&(u=p=(u+p)/2),t.x0=r,t.y0=u,t.x1=h,t.y1=p,t.children&&(n=i[t.depth+1]=a(t)/2,r+=c(t)-n,u+=o(t)-n,(h-=s(t)-n)<r&&(r=h=(r+h)/2),(p-=l(t)-n)<u&&(u=p=(u+p)/2),e(t,r,u,h,p))}return u.round=function(e){return arguments.length?(t=!!e,u):t},u.size=function(e){return arguments.length?(n=+e[0],r=+e[1],u):[n,r]},u.tile=function(t){return arguments.length?(e=pj(t),u):e},u.padding=function(e){return arguments.length?u.paddingInner(e).paddingOuter(e):u.paddingInner()},u.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:fj(+e),u):a},u.paddingOuter=function(e){return arguments.length?u.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):u.paddingTop()},u.paddingTop=function(e){return arguments.length?(o="function"==typeof e?e:fj(+e),u):o},u.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:fj(+e),u):s},u.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:fj(+e),u):l},u.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:fj(+e),u):c},u}var Bj=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,s,l,c,u,h=-1,p=o.length,d=e.value;++h<p;){for(l=(s=o[h]).children,c=s.value=0,u=l.length;c<u;++c)s.value+=l[c].value;s.dice?bj(s,n,r,i,d?r+=(a-r)*s.value/d:a):Fj(s,n,r,d?n+=(i-n)*s.value/d:i,a),d-=s.value}else e._squarify=o=Pj(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Lj),zj=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",cluster:function(){var e=GH,t=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce($H,0)/e.length}(n),t.y=function(e){return 1+e.reduce(YH,0)}(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),l=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),c=s.x-e(s,l)/2,u=l.x+e(l,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-c)/(u-c)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},hierarchy:VH,pack:gj,packSiblings:function(e){return uj(e),e},packEnclose:ZH,partition:Cj,stratify:function(){var e=Sj,t=kj;function n(n){var r,i,a,o,s,l,c,u=Array.from(n),h=u.length,p=new Map;for(i=0;i<h;++i)r=u[i],s=u[i]=new QH(r),null!=(l=e(r,i,n))&&(l+="")&&(c=s.id=l,p.set(c,p.has(c)?Tj:s)),null!=(l=t(r,i,n))&&(l+="")&&(s.parent=l);for(i=0;i<h;++i)if(l=(s=u[i]).parent){if(!(o=p.get(l)))throw new Error("missing: "+l);if(o===Tj)throw new Error("ambiguous: "+l);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=wj,a.eachBefore((function(e){e.depth=e.parent.depth+1,--h})).eachBefore(KH),a.parent=null,h>0)throw new Error("cycle");return a}return n.id=function(t){return arguments.length?(e=pj(t),n):e},n.parentId=function(e){return arguments.length?(t=pj(e),n):t},n},tree:function(){var e=_j,t=1,n=1,r=null;function i(i){var l=function(e){for(var t,n,r,i,a,o=new Nj(e,0),s=[o];t=s.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=t.children[i]=new Nj(r[i],i)),n.parent=t;return(o.parent=new Nj(null,0)).children=[o],o}(i);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),r)i.eachBefore(s);else{var c=i,u=i,h=i;i.eachBefore((function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>h.depth&&(h=e)}));var p=c===u?1:e(c,u)/2,d=p-c.x,f=t/(u.x+p+d),m=n/(h.depth||1);i.eachBefore((function(e){e.x=(e.x+d)*f,e.y=e.depth*m}))}return i}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,a=t,o=t,s=n,l=a.parent.children[0],c=a.m,u=o.m,h=s.m,p=l.m;s=Oj(s),a=Aj(a),s&&a;)l=Aj(l),(o=Oj(o)).a=t,(i=s.z+h-a.z-c+e(s._,a._))>0&&(Ij(Mj(s,t,r),t,i),c+=i,u+=i),h+=s.m,c+=a.m,p+=l.m,u+=o.m;s&&!Oj(o)&&(o.t=s,o.m+=h-u),a&&!Aj(l)&&(l.t=a,l.m+=c-p,r=t)}return r}(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},treemap:Dj,treemapBinary:function(e,t,n,r,i){var a,o,s=e.children,l=s.length,c=new Array(l+1);for(c[0]=o=a=0;a<l;++a)c[a+1]=o+=s[a].value;!function e(t,n,r,i,a,o,l){if(t>=n-1){var u=s[t];return u.x0=i,u.y0=a,u.x1=o,void(u.y1=l)}var h=c[t],p=r/2+h,d=t+1,f=n-1;for(;d<f;){var m=d+f>>>1;c[m]<p?d=m+1:f=m}p-c[d-1]<c[d]-p&&t+1<d&&--d;var g=c[d]-h,v=r-g;if(o-i>l-a){var y=r?(i*v+o*g)/r:o;e(t,d,g,i,a,y,l),e(d,n,v,y,a,o,l)}else{var x=r?(a*v+l*g)/r:l;e(t,d,g,i,a,o,x),e(d,n,v,i,x,o,l)}}(0,l,e.value,t,n,r,i)},treemapDice:bj,treemapSlice:Fj,treemapSliceDice:function(e,t,n,r,i){(1&e.depth?Fj:bj)(e,t,n,r,i)},treemapSquarify:Rj,treemapResquarify:Bj}),Hj={field:"value",size:[1,1],round:!1,padding:0,sort:function(e,t){return t.value-e.value},as:["x","y"],ignoreParentValue:!0};function jj(e,t){var n,r=(t=Md({},Hj,t)).as;if(!Bp(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=RH(t)}catch(Wh){console.warn(Wh)}var i,a=(i=e,Cj().size(t.size).round(t.round).padding(t.padding)(VH(i).sum((function(e){return Jd(e.children)?t.ignoreParentValue?0:e[n]-Zp(e.children,(function(e,t){return e+t[n]}),0):e[n]})).sort(t.sort))),o=r[0],s=r[1];return a.each((function(e){var t,n;e[o]=[e.x0,e.x1,e.x1,e.x0],e[s]=[e.y1,e.y1,e.y0,e.y0],e.name=e.name||(null===(t=e.data)||void 0===t?void 0:t.name)||(null===(n=e.data)||void 0===n?void 0:n.label),e.data.name=e.name,["x0","x1","y0","y1"].forEach((function(t){-1===r.indexOf(t)&&delete e[t]}))})),DH(a)}var Gj,$j={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(e,t){return t.value-e.value},ratio:.5*(1+Math.sqrt(5))};function Yj(e,t){var n,r=(t=Md({},$j,t)).as;if(!Bp(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=RH(t)}catch(Wh){console.warn(Wh)}var i,a,o,s=(i=t.tile,a=t.ratio,"treemapSquarify"===i?zj[i].ratio(a):zj[i]),l=(o=e,Dj().tile(s).size(t.size).round(t.round).padding(t.padding).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(VH(o).sum((function(e){return t.ignoreParentValue&&e.children?0:e[n]})).sort(t.sort))),c=r[0],u=r[1];return l.each((function(e){e[c]=[e.x0,e.x1,e.x1,e.x0],e[u]=[e.y1,e.y1,e.y0,e.y0],["x0","x1","y0","y1"].forEach((function(t){-1===r.indexOf(t)&&delete e[t]}))})),DH(l)}function Uj(e){var t=e.data,n=e.colorField,r=e.rawFields,i=e.hierarchyConfig,a=void 0===i?{}:i,o=a.activeDepth,s={partition:jj,treemap:Yj},l=e.seriesField,c=e.type||"partition",u=s[c](t,_p(_p({field:l||"value"},Xd(a,["activeDepth"])),{type:"hierarchy."+c,as:["x","y"]})),h=[];return u.forEach((function(e){var t,i,s,c,u,p;if(0===e.depth)return null;if(o>0&&e.depth>o)return null;for(var d=e.data.name,f=_p({},e);f.depth>1;)d=(null===(i=f.parent.data)||void 0===i?void 0:i.name)+" / "+d,f=f.parent;var m=_p(_p(_p({},IN(e.data,Op(r||[],[a.field]))),((t={}).path=d,t["ancestor-node"]=f.data.name,t)),e);l&&(m[l]=e.data[l]||(null===(c=null===(s=e.parent)||void 0===s?void 0:s.data)||void 0===c?void 0:c[l])),n&&(m[n]=e.data[n]||(null===(p=null===(u=e.parent)||void 0===u?void 0:u.data)||void 0===p?void 0:p[n])),m.ext=a,m["hierarchy-data-transform-params"]={hierarchyConfig:a,colorField:n,rawFields:r},h.push(m)})),h}function Vj(e){var t,n=e.chart,r=e.options,i=r.color,a=r.colorField,o=void 0===a?"ancestor-node":a,s=r.sunburstStyle,l=r.rawFields,c=void 0===l?[]:l,u=Uj(r);return n.data(u),s&&(t=function(e){return qN({},{fillOpacity:Math.pow(.85,e.depth)},Rp(s)?s(e):s)}),mL(qN({},e,{options:{xField:"x",yField:"y",seriesField:o,rawFields:td(Op(BH,c)),polygon:{color:i,style:t}}})),e}function Wj(e){return e.chart.axis(!1),e}function Xj(e){var t=e.chart,n=e.options.label,r=PN(t,"polygon");if(n){var i=n.fields,a=void 0===i?["name"]:i,o=n.callback,s=Ap(n,["fields","callback"]);r.label({fields:a,callback:o,cfg:GN(s)})}else r.label(!1);return e}function qj(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius,a=n.reflect,o=t.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),e}function Kj(e){var t,n=e.options,r=n.hierarchyConfig,i=n.meta;return ON(iL({},((t={}).value=Yd(i,Yd(r,["field"],"value")),t)))(e)}function Qj(e){var t=e.chart,n=e.options.tooltip;if(!1===n)t.tooltip(!1);else{var r=n;Yd(n,"fields")||(r=qN({},{customItems:function(e){return e.map((function(e){var n=Yd(t.getOptions(),"scales"),r=Yd(n,["path","formatter"],(function(e){return e})),i=Yd(n,["value","formatter"],(function(e){return e}));return _p(_p({},e),{name:r(e.data.path),value:i(e.data.value)})}))}},r)),t.tooltip(r)}return e}function Zj(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return(null==t?void 0:t.enabled)?qN({},e,{interactions:Op(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:Uj}}])}):e}function Jj(e){var t=e.chart,n=e.options,r=n.drilldown;return ZF({chart:t,options:Zj(n)}),(null==r?void 0:r.enabled)&&(t.appendPadding=sF(t.appendPadding,Yd(r,["breadCrumb","position"]))),e}function eG(e){return ON(eL,qF("sunburstStyle"),Vj,Wj,Kj,KF,qj,Qj,Xj,Jj,JF,aL())(e)}function tG(e){var t=Yd(e,["event","data","data"],{});return Bp(t.children)&&t.children.length>0}function nG(e){var t=e.view.getCoordinate(),n=t.innerRadius;if(n){var r=e.event,i=r.x,a=r.y,o=t.center,s=o.x,l=o.y,c=t.getRadius()*n;return Math.sqrt(Math.pow(s-i,2)+Math.pow(l-a,2))<c}return!1}lS("drill-down-action",jH),XS("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:tG},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:nG}],start:[{trigger:"element:click",isEnable:tG,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:nG,action:["drill-down-action:back"]}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="sunburst",t}kp(t,e),t.getDefaultOptions=function(){return zH},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return eG},t.SUNBURST_ANCESTOR_FIELD="ancestor-node",t.SUNBURST_PATH_FIELD="path",t.NODE_ANCESTORS_FIELD="nodeAncestor"}(LF);var rG={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(Gj={},Gj.range={sync:"v"},Gj.percent={sync:"v",tickCount:5,tickInterval:.2},Gj),animation:!1};function iG(e){var t;return[(t={},t.percent=ud(e,0,1),t)]}function aG(e,t){var n=Yd(t,["ticks"],[]);return function(e,t){return e.map((function(n,r){var i;return(i={}).range=n-(e[r-1]||0),i.type=""+r,i.percent=t,i})).filter((function(e){return!!e.range}))}(Jd(n)?n:[0,ud(e,0,1),1],e)}function oG(e){var t=e.chart,n=e.options,r=n.percent,i=n.range,a=n.radius,o=n.innerRadius,s=n.startAngle,l=n.endAngle,c=n.axis,u=n.indicator,h=n.gaugeStyle,p=n.type,d=n.meter,f=i.color,m=i.width;if(u){var g=iG(r),v=t.createView({id:"indicator-view"});v.data(g),v.point().position("percent*1").shape(u.shape||"gauge-indicator").customInfo({defaultColor:t.getTheme().defaultColor,indicator:u}),v.coordinate("polar",{startAngle:s,endAngle:l,radius:o*a}),v.axis("percent",c),v.scale("percent",IN(c,PF))}var y=aG(r,n.range),x=t.createView({id:"range-view"});return x.data(y),fL({chart:x,options:{xField:"1",yField:"range",seriesField:"type",rawFields:["percent"],isStack:!0,interval:{color:ed(f)?[f,"#f0f0f0"]:f,style:h,shape:"meter"===p?"meter-gauge":null},args:{zIndexReversed:!0},minColumnWidth:m,maxColumnWidth:m}}).ext.geometry.customInfo({meter:d}),x.coordinate("polar",{innerRadius:o,radius:a,startAngle:s,endAngle:l}).transpose(),e}function sG(e){var t;return ON(iL(((t={range:{min:0,max:1,maxLimit:1,minLimit:0}}).percent={},t)))(e)}function lG(e,t){var n=e.chart,r=e.options,i=r.statistic,a=r.percent;if(n.getController("annotation").clear(!0),i){var o=i.content,s=void 0;o&&(s=qN({},{content:(100*a).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),function(e,t,n){var r=t.statistic;[r.title,r.content].forEach((function(t){if(t){var r=Rp(t.style)?t.style(n):t.style;e.annotation().html(_p({position:["50%","100%"],html:function(e,i){var a=i.getCoordinate(),o=i.views[0].getCoordinate(),s=o.getCenter(),l=o.getRadius(),c=Math.max(Math.sin(o.startAngle),Math.sin(o.endAngle))*l,u=s.y+c-a.y.start-parseFloat(Yd(r,"fontSize",0)),h=a.getRadius()*a.innerRadius*2;ZN(e,_p({width:h+"px",transform:"translate(-50%, "+u+"px)"},QN(r)));var p=i.getData();if(t.customHtml)return t.customHtml(e,i,n,p);var d=t.content;return t.formatter&&(d=t.formatter(n,p)),d?ed(d)?d:""+d:"<div></div>"}},IN(t,["offsetX","offsetY","rotate","style","formatter"])))}}))}(n,{statistic:_p(_p({},i),{content:s})},{percent:a})}return t&&n.render(!0),e}function cG(e){var t=e.chart;return t.legend(!1),t.tooltip(!1),e}function uG(e){return ON(eL,JF,oG,sG,lG,ZF,aL(),cG)(e)}Zk("point","gauge-indicator",{draw:function(e,t){var n=e.customInfo,r=n.indicator,i=n.defaultColor,a=r,o=a.pointer,s=a.pin,l=t.addGroup(),c=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:_p({x1:c.x,y1:c.y,x2:e.x,y2:e.y,stroke:i},o.style)}),s&&l.addShape("circle",{name:"pin",attrs:_p({x:c.x,y:c.y,stroke:i},s.style)}),l}}),Zk("interval","meter-gauge",{draw:function(e,t){var n=e.customInfo.meter,r=void 0===n?{}:n,i=r.steps,a=void 0===i?50:i,o=r.stepRatio,s=void 0===o?.5:o;a=a<1?1:a,s=ud(s,0,1);var l=this.coordinate,c=l.startAngle,u=l.endAngle,h=0;s>0&&s<1&&(h=(u-c)/a/(s/(1-s)+1-1/a));for(var p=h/(1-s)*s,d=t.addGroup(),f=this.coordinate.getCenter(),m=this.coordinate.getRadius(),g=F_.getAngle(e,this.coordinate),v=g.startAngle,y=g.endAngle,x=v;x<y;){var E=void 0,b=(x-c)%(p+h);E=b<p?x+(p-b):(x+=p+h-b)+p;var C=F_.getSectorPath(f.x,f.y,m,x,Math.min(E,y),m*this.coordinate.innerRadius);d.addShape("path",{name:"meter-gauge",attrs:{path:C,fill:e.color,stroke:e.color,lineWidth:.5}}),x=E+h}return d}});var hG=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="gauge",t}return kp(t,e),t.getDefaultOptions=function(){return rG},t.prototype.changeData=function(e){this.chart.emit(cf.BEFORE_CHANGE_DATA,Tk.fromData(this.chart,cf.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e});var t=this.chart.views.find((function(e){return"indicator-view"===e.id}));t&&t.data(iG(e));var n=this.chart.views.find((function(e){return"range-view"===e.id}));n&&n.data(aG(e,this.options.range)),lG({chart:this.chart,options:this.options},!0),this.chart.emit(cf.AFTER_CHANGE_DATA,Tk.fromData(this.chart,cf.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return uG},t}(LF),pG="$$yField$$",dG={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function fG(e,t,n,r){return function(e,t,n,r,i){var a,o=[];if(Zp(e,(function(e,t){var i;FN(TN.WARN,pd(t[n]),t[n]+" is not a valid number");var a=Ad(t[n])?null:t[n];return o.push(_p(_p({},t),((i={})[r]=[e,e+a],i))),e+a}),0),o.length&&i){var s=Yd(o,[[e.length-1],r,[1]]);o.push(((a={})[t]=i.label,a[n]=s,a[r]=[0,s],a))}return o}(e,t,n,pG,r).map((function(t,n){var r;return zp(t)?_p(_p({},t),((r={}).$$absoluteField$$=t.$$yField$$[1],r.$$diffField$$=t.$$yField$$[1]-t.$$yField$$[0],r.$$isTotal$$=n===e.length,r)):t}))}function mG(e){var t=e.options,n=t.locale,r=t.total,i=pF(n).get(["waterfall","total"]);return r&&"string"!=typeof r.label&&i&&(e.options.total.label=i),e}function gG(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,a=n.yField,o=n.total,s=n.leaderLine,l=n.columnWidthRatio,c=n.waterfallStyle,u=n.risingFill,h=n.fallingFill,p=n.color;return t.data(fG(r,i,a,o)),fL(qN({},e,{options:{xField:i,yField:pG,seriesField:i,rawFields:[a,"$$diffField$$","$$isTotal$$",pG],widthRatio:l,interval:{style:c,shape:"waterfall",color:p||function(e){return Yd(e,["$$isTotal$$"])?Yd(o,["style","fill"],""):Yd(e,[pG,1])-Yd(e,[pG,0])>0?u:h}}}})).ext.geometry.customInfo({leaderLine:s}),e}function vG(e){var t,n,r=e.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.meta,c=qN({},{alias:s},Yd(l,s));return ON(iL(((t={})[o]=i,t[s]=a,t.$$yField$$=a,t),qN({},l,((n={}).$$yField$$=c,n.$$diffField$$=c,n.$$absoluteField$$=c,n))))(e)}function yG(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?t.axis(a,!1):t.axis(a,r),!1===i?(t.axis(o,!1),t.axis(pG,!1)):(t.axis(o,i),t.axis(pG,i)),e}function xG(e){var t=e.chart,n=e.options,r=n.legend,i=n.total,a=n.risingFill,o=n.fallingFill,s=pF(n.locale);if(!1===r)t.legend(!1);else{var l=[{name:s.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:s.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&l.push({name:i.label||"",value:"total",marker:{symbol:"square",style:qN({},{r:5},Yd(i,"style"))}}),t.legend(qN({},{custom:!0,position:"top",items:l},r)),t.removeInteraction("legend-filter")}return e}function EG(e){var t=e.chart,n=e.options,r=n.label,i=n.labelMode,a=n.xField,o=PN(t,"interval");if(r){var s=r.callback,l=Ap(r,["callback"]);o.label({fields:"absolute"===i?["$$absoluteField$$",a]:["$$diffField$$",a],callback:s,cfg:GN(l)})}else o.label(!1);return e}function bG(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.xField,a=n.yField;if(!1!==r){t.tooltip(_p({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=t.geometries[0];(null==r?void 0:r.formatter)?o.tooltip(i+"*"+a,r.formatter):o.tooltip(a)}else t.tooltip(!1);return e}function CG(e){return ON(mG,eL,gG,vG,yG,xG,bG,EG,tL,ZF,JF,aL())(e)}function wG(e,t,n){var r=n.map((function(e){return e[t]})).filter((function(e){return void 0!==e})),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(e)%360;return a?360*i/a:i}function TG(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.color,a=n.tooltip,o=n.colorField,s=n.type,l=n.xField,c=n.yField,u=aF(n.data,c);return t.data(u),fL(qN({},e,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:"line"===s?"line":"intervel"},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}})),"line"===s&&dL({chart:t,options:{xField:l,yField:c,seriesField:o,point:{shape:"circle",color:i}}}),e}function SG(e){var t,n=e.options,r=n.yField,i=n.xField,a=n.data,o=n.isStack,s=n.isGroup,l=n.colorField,c=n.maxAngle,u=aF(o&&!s&&l?function(e,t,n){var r=[];return e.forEach((function(e){var i=r.find((function(n){return n[t]===e[t]}));i?i[n]+=e[n]||null:r.push(_p({},e))})),r}(a,i,r):a,r);return ON(iL(((t={})[r]={min:0,max:wG(c,r,u)},t)))(e)}function kG(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return t.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),e}function _G(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis;return t.axis(r,i),e}function AG(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,a=PN(t,"interval");if(r){var o=r.callback,s=Ap(r,["callback"]);a.label({fields:[i],callback:o,cfg:_p(_p({},GN(s)),{type:"polar"})})}else a.label(!1);return e}function OG(e){return ON(qF("barStyle"),TG,SG,_G,kG,ZF,JF,eL,QF,KF,aL(),AG)(e)}Zk("interval","waterfall",{draw:function(e,t){var n=e.customInfo,r=e.points,i=e.nextPoints,a=t.addGroup(),o=this.parsePath(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=0===n?"M":"L";t.push([i,r.x,r.y])}}var a=e[0];return t.push(["L",a.x,a.y]),t.push(["z"]),t}(r)),s=function(e){return qN({},e.defaultStyle,e.style,{fill:e.color})}(e);a.addShape("path",{attrs:_p(_p({},s),{path:o})});var l=Yd(n,"leaderLine");if(l&&i){var c=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(c[1]=["L",i[1].x,i[1].y]),c=this.parsePath(c),a.addShape("path",{attrs:_p({path:c},l.style||{})})}return a}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="waterfall",t}kp(t,e),t.getDefaultOptions=function(){return dG},t.prototype.changeData=function(e){var t=this.options,n=t.xField,r=t.yField,i=t.total;this.updateOption({data:e}),this.chart.changeData(fG(e,n,r,i))},t.prototype.getSchemaAdaptor=function(){return CG},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(LF);var IG=qN({},LF.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="radial-bar",t}kp(t,e),t.getDefaultOptions=function(){return IG},t.prototype.changeData=function(e){this.updateOption({data:e}),SG({chart:this.chart,options:this.options}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return OG}}(LF);function MG(e,t,n,r,i){var a=[];t.forEach((function(t){r.forEach((function(r){var i,o=((i={})[e]=r[e],i[n]=t,i[t]=r[t],i);a.push(o)}))}));var o=Object.values(ld(a,n)),s=o[0],l=void 0===s?[]:s,c=o[1],u=void 0===c?[]:c;return i?[l.reverse(),u.reverse()]:[l,u]}function NG(e){return"vertical"!==e}function FG(e,t,n){var r=t[0],i=t[1],a=r.autoPadding,o=i.autoPadding,s=e.__axisPosition,l=s.layout,c=s.position;if(NG(l)&&"top"===c&&(r.autoPadding=n.instance(a.top,0,a.bottom,a.left),i.autoPadding=n.instance(o.top,a.left,o.bottom,0)),NG(l)&&"bottom"===c&&(r.autoPadding=n.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=n.instance(o.top,o.right,o.bottom,a.right/2+5)),!NG(l)&&"bottom"===c){var u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,a.bottom/2+5,u),i.autoPadding=n.instance(a.bottom/2+5,o.right,o.bottom,u)}if(!NG(l)&&"top"===c){u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,0,u),i.autoPadding=n.instance(0,o.right,a.top,u)}}function LG(e){var t,n,r=e.chart,i=e.options,a=i.data,o=i.xField,s=i.yField,l=i.color,c=i.barStyle,u=i.widthRatio,h=i.legend,p=i.layout,d=MG(o,s,"series-field-key",a,NG(p));h?r.legend("series-field-key",h):!1===h&&r.legend(!1);var f=d[0],m=d[1];return NG(p)?((t=r.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:"first-axes-view"})).coordinate().transpose().reflect("x"),(n=r.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().transpose(),t.data(f),n.data(m)):(t=r.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:"first-axes-view"}),(n=r.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().reflect("y"),t.data(f),n.data(m)),fL(qN({},e,{chart:t,options:{widthRatio:u,xField:o,yField:s[0],seriesField:"series-field-key",interval:{color:l,style:c}}})),fL(qN({},e,{chart:n,options:{xField:o,yField:s[1],seriesField:"series-field-key",widthRatio:u,interval:{color:l,style:c}}})),e}function PG(e){var t,n,r,i=e.options,a=e.chart,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=zN(a,"first-axes-view"),h=zN(a,"second-axes-view"),p={};return jp((null==i?void 0:i.meta)||{}).map((function(e){Yd(null==i?void 0:i.meta,[e,"alias"])&&(p[e]=i.meta[e].alias)})),a.scale(((t={})["series-field-key"]={sync:!0,formatter:function(e){return Yd(p,e,e)}},t)),iL(((n={})[l]=o,n[c[0]]=s[c[0]],n))(qN({},e,{chart:u})),iL(((r={})[l]=o,r[c[1]]=s[c[1]],r))(qN({},e,{chart:h})),e}function RG(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=n.layout,l=zN(t,"first-axes-view"),c=zN(t,"second-axes-view");return"bottom"===(null==r?void 0:r.position)?c.axis(a,_p(_p({},r),{label:{formatter:function(){return""}}})):c.axis(a,!1),!1===r?l.axis(a,!1):l.axis(a,_p({position:NG(s)?"top":"bottom"},r)),!1===i?(l.axis(o[0],!1),c.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),c.axis(o[1],i[o[1]])),t.__axisPosition={position:l.getOptions().axes[a].position,layout:s},e}function DG(e){var t=e.chart;return ZF(qN({},e,{chart:zN(t,"first-axes-view")})),ZF(qN({},e,{chart:zN(t,"second-axes-view")})),e}function BG(e){var t=e.chart,n=e.options,r=n.yField,i=n.yAxis;return oL(qN({},e,{chart:zN(t,"first-axes-view"),options:{yAxis:i[r[0]]}})),oL(qN({},e,{chart:zN(t,"second-axes-view"),options:{yAxis:i[r[1]]}})),e}function zG(e){var t=e.chart;return eL(qN({},e,{chart:zN(t,"first-axes-view")})),eL(qN({},e,{chart:zN(t,"second-axes-view")})),e}function HG(e){var t=e.chart;return JF(qN({},e,{chart:zN(t,"first-axes-view")})),JF(qN({},e,{chart:zN(t,"second-axes-view")})),e}function jG(e){var t,n,r=this,i=e.chart,a=e.options,o=a.label,s=a.yField,l=a.layout,c=zN(i,"first-axes-view"),u=zN(i,"second-axes-view"),h=PN(c,"interval"),p=PN(u,"interval");if(o){var d=o.callback,f=Ap(o,["callback"]);f.position||(f.position="middle"),void 0===f.offset&&(f.offset=2);var m=_p({},f);if(NG(l)){var g=(null===(t=m.style)||void 0===t?void 0:t.textAlign)||("middle"===f.position?"center":"left");f.style=qN({},f.style,{textAlign:g});m.style=qN({},m.style,{textAlign:{left:"right",right:"left",center:"center"}[g]})}else{var v={top:"bottom",bottom:"top",middle:"middle"};"string"==typeof f.position?f.position=v[f.position]:"function"==typeof f.position&&(f.position=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return v[f.position.apply(r,e)]});var y=(null===(n=m.style)||void 0===n?void 0:n.textBaseline)||"bottom";m.style=qN({},m.style,{textBaseline:y});f.style=qN({},f.style,{textBaseline:{top:"bottom",bottom:"top",middle:"middle"}[y]})}h.label({fields:[s[0]],callback:d,cfg:GN(m)}),p.label({fields:[s[1]],callback:d,cfg:GN(f)})}else h.label(!1),p.label(!1);return e}function GG(e){return ON(LG,PG,RG,BG,zG,jG,QF,DG,HG)(e)}function $G(e,t){if(Bp(e))return e.find((function(e){return e.type===t}))}function YG(e,t){var n=$G(e,t);return n&&!1!==n.enable}function UG(e){var t=e.interactions,n=e.drilldown;return Yd(n,"enabled")||YG(t,"treemap-drill-down")}function VG(e){var t=e.data,n=e.colorField,r=e.enableDrillDown,i=e.hierarchyConfig,a=Yj(t,_p(_p({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach((function(e){if(0===e.depth)return null;if(r&&1!==e.depth)return null;if(!r&&e.children)return null;var a=e.ancestors().map((function(e){return{data:e.data,height:e.height,value:e.value}})),s=r&&Bp(t.path)?a.concat(t.path.slice(1)):a,l=Object.assign({},e.data,_p({x:e.x,y:e.y,depth:e.depth,value:e.value,path:s},e));if(!e.data[n]&&e.parent){var c=e.ancestors().find((function(e){return e.data[n]}));l[n]=null==c?void 0:c.data[n]}else l[n]=e.data[n];l["hierarchy-data-transform-params"]={hierarchyConfig:i,colorField:n,enableDrillDown:r},o.push(l)})),o}function WG(e){var t=e.options.colorField;return qN({options:{rawFields:["value"],tooltip:{fields:["name","value",t,"path"],formatter:function(e){return{name:e.name,value:e.value}}}}},e)}function XG(e){var t=e.chart,n=e.options,r=n.color,i=n.colorField,a=n.rectStyle,o=n.hierarchyConfig,s=n.rawFields,l=VG({data:n.data,colorField:n.colorField,enableDrillDown:UG(n),hierarchyConfig:o});return t.data(l),mL(qN({},e,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:r,style:a}}})),t.coordinate().reflect("y"),e}function qG(e){return e.chart.axis(!1),e}function KG(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return UG(e)?qN({},e,{interactions:Op(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:VG}}])}):e}function QG(e){var t=e.chart,n=e.options,r=n.interactions,i=n.drilldown;ZF({chart:t,options:KG(n)});var a=$G(r,"view-zoom");return a&&(!1!==a.enable?t.getCanvas().on("mousewheel",(function(e){e.preventDefault()})):t.getCanvas().off("mousewheel")),UG(n)&&(t.appendPadding=sF(t.appendPadding,Yd(i,["breadCrumb","position"]))),e}function ZG(e){return ON(WG,eL,qF("rectStyle"),XG,qG,KF,QF,QG,JF,aL())(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bidirectional-bar",t}kp(t,e),t.getDefaultOptions=function(){return qN({},e.getDefaultOptions.call(this),{syncViewPadding:FG})},t.prototype.changeData=function(e){void 0===e&&(e=[]),this.chart.emit(cf.BEFORE_CHANGE_DATA,Tk.fromData(this.chart,cf.BEFORE_CHANGE_DATA,null)),this.updateOption({data:e});var t=this.options,n=MG(t.xField,t.yField,"series-field-key",e,NG(t.layout)),r=n[0],i=n[1],a=zN(this.chart,"first-axes-view"),o=zN(this.chart,"second-axes-view");a.data(r),o.data(i),this.chart.render(!0),this.chart.emit(cf.AFTER_CHANGE_DATA,Tk.fromData(this.chart,cf.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return GG},t.SERIES_FIELD_KEY="series-field-key"}(LF);var JG={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};function e$(e){return e.target.depth}function t$(e,t){return e.sourceLinks.length?e.depth:t-1}function n$(e){return function(){return e}}function r$(e,t){for(var n=0,r=0;r<e.length;r++)n+=t(e[r]);return n}function i$(e,t){for(var n=-1/0,r=0;r<e.length;r++)n=Math.max(t(e[r]),n);return n}function a$(e,t){return s$(e.source,t.source)||e.index-t.index}function o$(e,t){return s$(e.target,t.target)||e.index-t.index}function s$(e,t){return e.y0-t.y0}function l$(e){return e.value}function c$(e){return e.index}function u$(e){return e.nodes}function h$(e){return e.links}function p$(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function d$(e){for(var t=0,n=e.nodes;t<n.length;t++){for(var r=n[t],i=r.y0,a=i,o=0,s=r.sourceLinks;o<s.length;o++){(u=s[o]).y0=i+u.width/2,i+=u.width}for(var l=0,c=r.targetLinks;l<c.length;l++){var u;(u=c[l]).y1=a+u.width/2,a+=u.width}}}function f$(){var e,t,n,r,i=0,a=0,o=1,s=1,l=24,c=8,u=c$,h=t$,p=u$,d=h$,f=6;function m(m){var y={nodes:p(m),links:d(m)};return function(e){var t=e.nodes,n=e.links;t.forEach((function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]}));var i=new Map(t.map((function(e){return[u(e),e]})));if(n.forEach((function(e,t){e.index=t;var n=e.source,r=e.target;"object"!=typeof n&&(n=e.source=p$(i,n)),"object"!=typeof r&&(r=e.target=p$(i,r)),n.sourceLinks.push(e),r.targetLinks.push(e)})),null!=r)for(var a=0,o=t;a<o.length;a++){var s=o[a],l=s.sourceLinks,c=s.targetLinks;l.sort(r),c.sort(r)}}(y),function(e){for(var t=e.nodes,n=0,r=t;n<r.length;n++){var i=r[n];i.value=void 0===i.fixedValue?Math.max(r$(i.sourceLinks,l$),r$(i.targetLinks,l$)):i.fixedValue}}(y),function(e){var n=e.nodes,r=n.length,i=new Set(n),a=new Set,o=0;for(;i.size;){if(i.forEach((function(e){e.depth=o;for(var t=0,n=e.sourceLinks;t<n.length;t++){var r=n[t].target;a.add(r)}})),++o>r)throw new Error("circular link");i=a,a=new Set}if(t)for(var s=Math.max(i$(n,(function(e){return e.depth}))+1,0),l=void 0,c=0;c<n.length;c++)(l=n[c]).depth=t.call(null,l,s)}(y),function(e){var t=e.nodes,n=t.length,r=new Set(t),i=new Set,a=0;for(;r.size;){if(r.forEach((function(e){e.height=a;for(var t=0,n=e.targetLinks;t<n.length;t++){var r=n[t].source;i.add(r)}})),++a>n)throw new Error("circular link");r=i,i=new Set}}(y),function(t){var r=function(e){for(var t=e.nodes,r=Math.max(i$(t,(function(e){return e.depth}))+1,0),a=(o-i-l)/(r-1),s=new Array(r).fill(0).map((function(){return[]})),c=0,u=t;c<u.length;c++){var p=u[c],d=Math.max(0,Math.min(r-1,Math.floor(h.call(null,p,r))));p.layer=d,p.x0=i+d*a,p.x1=p.x0+l,s[d]?s[d].push(p):s[d]=[p]}if(n)for(var f=0,m=s;f<m.length;f++){m[f].sort(n)}return s}(t);e=Math.min(c,(s-a)/(i$(r,(function(e){return e.length}))-1)),function(t){for(var n=function(e,t){for(var n=1/0,r=0;r<e.length;r++)n=Math.min(t(e[r]),n);return n}(t,(function(t){return(s-a-(t.length-1)*e)/r$(t,l$)})),r=0,i=t;r<i.length;r++){for(var o=i[r],l=a,c=0,u=o;c<u.length;c++){(m=u[c]).y0=l,m.y1=l+m.value*n,l=m.y1+e;for(var h=0,p=m.sourceLinks;h<p.length;h++){var d=p[h];d.width=d.value*n}}l=(s-l+e)/(o.length+1);for(var f=0;f<o.length;++f){var m;(m=o[f]).y0+=l*(f+1),m.y1+=l*(f+1)}C(o)}}(r);for(var u=0;u<f;++u){var p=Math.pow(.99,u),d=Math.max(1-p,(u+1)/f);v(r,p,d),g(r,p,d)}}(y),d$(y),y}function g(e,t,r){for(var i=1,a=e.length;i<a;++i){for(var o=e[i],s=0,l=o;s<l.length;s++){for(var c=l[s],u=0,h=0,p=0,d=c.targetLinks;p<d.length;p++){var f=d[p],m=f.source,g=f.value*(c.layer-m.layer);u+=w(m,c)*g,h+=g}if(h>0){var v=(u/h-c.y0)*t;c.y0+=v,c.y1+=v,b(c)}}void 0===n&&o.sort(s$),o.length&&y(o,r)}}function v(e,t,r){for(var i=e.length-2;i>=0;--i){for(var a=e[i],o=0,s=a;o<s.length;o++){for(var l=s[o],c=0,u=0,h=0,p=l.sourceLinks;h<p.length;h++){var d=p[h],f=d.target,m=d.value*(f.layer-l.layer);c+=T(l,f)*m,u+=m}if(u>0){var g=(c/u-l.y0)*t;l.y0+=g,l.y1+=g,b(l)}}void 0===n&&a.sort(s$),a.length&&y(a,r)}}function y(t,n){var r=t.length>>1,i=t[r];E(t,i.y0-e,r-1,n),x(t,i.y1+e,r+1,n),E(t,s,t.length-1,n),x(t,a,0,n)}function x(t,n,r,i){for(;r<t.length;++r){var a=t[r],o=(n-a.y0)*i;o>1e-6&&(a.y0+=o,a.y1+=o),n=a.y1+e}}function E(t,n,r,i){for(;r>=0;--r){var a=t[r],o=(a.y1-n)*i;o>1e-6&&(a.y0-=o,a.y1-=o),n=a.y0-e}}function b(e){var t=e.sourceLinks,n=e.targetLinks;if(void 0===r){for(var i=0,a=n;i<a.length;i++){a[i].source.sourceLinks.sort(o$)}for(var o=0,s=t;o<s.length;o++){s[o].target.targetLinks.sort(a$)}}}function C(e){if(void 0===r)for(var t=0,n=e;t<n.length;t++){var i=n[t],a=i.sourceLinks,o=i.targetLinks;a.sort(o$),o.sort(a$)}}function w(t,n){for(var r=t.y0-(t.sourceLinks.length-1)*e/2,i=0,a=t.sourceLinks;i<a.length;i++){var o=a[i],s=o.target,l=o.width;if(s===n)break;r+=l+e}for(var c=0,u=n.targetLinks;c<u.length;c++){var h=u[c];s=h.source,l=h.width;if(s===t)break;r-=l}return r}function T(t,n){for(var r=n.y0-(n.targetLinks.length-1)*e/2,i=0,a=n.targetLinks;i<a.length;i++){var o=a[i],s=o.source,l=o.width;if(s===t)break;r+=l+e}for(var c=0,u=t.sourceLinks;c<u.length;c++){var h=u[c];s=h.target,l=h.width;if(s===n)break;r-=l}return r}return m.update=function(e){return d$(e),e},m.nodeId=function(e){return arguments.length?(u="function"==typeof e?e:n$(e),m):u},m.nodeAlign=function(e){return arguments.length?(h="function"==typeof e?e:n$(e),m):h},m.nodeDepth=function(e){return arguments.length?(t=e,m):t},m.nodeSort=function(e){return arguments.length?(n=e,m):n},m.nodeWidth=function(e){return arguments.length?(l=+e,m):l},m.nodePadding=function(t){return arguments.length?(c=e=+t,m):c},m.nodes=function(e){return arguments.length?(p="function"==typeof e?e:n$(e),m):p},m.links=function(e){return arguments.length?(d="function"==typeof e?e:n$(e),m):d},m.linkSort=function(e){return arguments.length?(r=e,m):r},m.size=function(e){return arguments.length?(i=a=0,o=+e[0],s=+e[1],m):[o-i,s-a]},m.extent=function(e){return arguments.length?(i=+e[0][0],o=+e[1][0],a=+e[0][1],s=+e[1][1],m):[[i,a],[o,s]]},m.iterations=function(e){return arguments.length?(f=+e,m):f},m}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="treemap",t}kp(t,e),t.getDefaultOptions=function(){return JG},t.prototype.changeData=function(e){var t=this.options,n=t.colorField,r=t.interactions,i=t.hierarchyConfig;this.updateOption({data:e});var a,o,s=VG({data:e,colorField:n,enableDrillDown:YG(r,"treemap-drill-down"),hierarchyConfig:i});this.chart.changeData(s),a=this.chart,(o=a.interactions["drill-down"])&&o.context.actions.find((function(e){return"drill-down-action"===e.name})).reset()},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ZG}}(LF);var m$={left:function(e){return e.depth},right:function(e,t){return t-1-e.height},center:function(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?function(e,t){if(Bp(e)){for(var n,r=1/0,i=0;i<e.length;i++){var a=e[i],o=Rp(t)?t(a):a[t];o<r&&(n=a,r=o)}return n}}(e.sourceLinks,e$)-1:0},justify:t$},g$={nodeId:function(e){return e.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function v$(e,t){var n=function(e){return Md({},g$,e)}(e),r=n.nodeId,i=n.nodeSort,a=n.nodeAlign,o=n.nodeWidth,s=n.nodePadding,l=n.nodeDepth,c=f$().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(l).nodeAlign(function(e){return(ed(e)?m$[e]:Rp(e)?e:null)||t$}(a)).extent([[0,0],[1,1]]).nodeId(r)(t);return c.nodes.forEach((function(e){var t=e.x0,n=e.x1,r=e.y0,i=e.y1;e.x=[t,n,n,t],e.y=[r,r,i,i]})),c.links.forEach((function(e){var t=e.source,n=e.target,r=t.x1,i=n.x0;e.x=[r,r,i,i];var a=e.width/2;e.y=[e.y0+a,e.y0-a,e.y1+a,e.y1-a]})),c}function y$(e,t,n){if(!Bp(e))return[];var r=[],i=function(e,t,n){var r=[];return e.forEach((function(e){var i=e[t],a=e[n];r.includes(i)||r.push(i),r.includes(a)||r.push(a)})),r}(e,t,n),a=function(e,t,n,r){var i={};return t.forEach((function(e){i[e]={},t.forEach((function(t){i[e][t]=0}))})),e.forEach((function(e){i[e[n]][e[r]]=1})),i}(e,i,t,n),o={};function s(e){o[e]=1,i.forEach((function(t){if(0!=a[e][t])if(1==o[t])r.push(e+"_"+t);else{if(-1==o[t])return;s(t)}})),o[e]=-1}return i.forEach((function(e){o[e]=0})),i.forEach((function(e){-1!=o[e]&&s(e)})),0!==r.length&&console.warn("sankey data contains circle, "+r.length+" records removed.",r),e.filter((function(e){return r.findIndex((function(r){return r===e[t]+"_"+e[n]}))<0}))}function x$(e,t,n){return nF(e)?e/n:t}function E$(e,t,n){return nF(e)?e/n:t}function b$(e,t,n){var r,i=e.dataType,a=e.data,o=e.sourceField,s=e.targetField,l=e.weightField,c=e.nodeAlign,u=e.nodeSort,h=e.nodePadding,p=e.nodePaddingRatio,d=e.nodeWidth,f=e.nodeWidthRatio,m=e.nodeDepth,g=e.rawFields,v=void 0===g?[]:g;r=function(e){return"node-link"===e}(i)?a:iF(y$(a,o,s),o,s,l,v);var y=v$({nodeAlign:c,nodePadding:E$(h,p,n),nodeWidth:x$(d,f,t),nodeSort:u,nodeDepth:m},r),x=y.nodes,E=y.links;return{nodes:x.map((function(e){return _p(_p({},IN(e,Op(["x","y","name"],v))),{isNode:!0})})),edges:E.map((function(e){return _p(_p({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},IN(e,Op(["x","y","value"],v))),{isNode:!1})}))}}function C$(e){var t=e.options.rawFields,n=void 0===t?[]:t;return qN({},{options:{tooltip:{fields:td(Op(["name","source","target","value","isNode"],n))},label:{fields:td(Op(["x","name"],n))}}},e)}function w$(e){var t=e.chart,n=e.options,r=n.color,i=n.nodeStyle,a=n.edgeStyle,o=n.label,s=n.tooltip,l=n.nodeState,c=n.edgeState;t.legend(!1),t.tooltip(s),t.axis(!1),t.coordinate().reflect("y");var u=b$(n,t.width,t.height),h=u.nodes,p=u.edges,d=t.createView({id:"edges"});d.data(p),gL({chart:d,options:{xField:"x",yField:"y",seriesField:"name",edge:{color:r,style:a,shape:"arc"},tooltip:s,state:c}});var f=t.createView({id:"nodes"});return f.data(h),mL({chart:f,options:{xField:"x",yField:"y",seriesField:"name",polygon:{color:r,style:i},label:o,tooltip:s,state:l}}),t.interaction("element-active"),t.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),e}function T$(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),Op(t.views[0].geometries,t.views[1].geometries).forEach((function(e){e.animate(n)})),e}function S$(e){var t=e.chart,n="sankey-node-draggable";return e.options.nodeDraggable?t.interaction(n):t.removeInteraction(n),e}function k$(e){return ON(C$,w$,ZF,S$,T$,eL)(e)}lS("sankey-node-drag",function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDragging=!1,t}return kp(t,e),t.prototype.isNodeElement=function(){var e=Yd(this.context,"event.target");if(e){var t=e.get("element");return t&&t.getModel().data.isNode}return!1},t.prototype.getNodeView=function(){return zN(this.context.view,"nodes")},t.prototype.getEdgeView=function(){return zN(this.context.view,"edges")},t.prototype.getCurrentDatumIdx=function(e){return this.getNodeView().geometries[0].elements.indexOf(e)},t.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:Yd(this.context,"event.x"),y:Yd(this.context,"event.y")};var e=this.context.event.target.get("element"),t=this.getCurrentDatumIdx(e);if(-1===t)return;this.currentElementIdx=t,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},t.prototype.translate=function(){if(this.isDragging){var e=this.context.view,t={x:Yd(this.context,"event.x"),y:Yd(this.context,"event.y")},n=t.x-this.prevPoint.x,r=t.y-this.prevPoint.y,i=this.getNodeView(),a=i.geometries[0].elements[this.currentElementIdx];if(a&&a.getModel()){var o=a.getModel().data,s=i.getOptions().data,l=i.getCoordinate(),c={x:n/l.getWidth(),y:r/l.getHeight()},u=_p(_p({},o),{x:o.x.map((function(e){return e+c.x})),y:o.y.map((function(e){return e+c.y}))}),h=Op(s);h[this.currentElementIdx]=u,i.data(h);var p=o.name,d=this.getEdgeView(),f=d.getOptions().data;f.forEach((function(e){e.source===p&&(e.x[0]+=c.x,e.x[1]+=c.x,e.y[0]+=c.y,e.y[1]+=c.y),e.target===p&&(e.x[2]+=c.x,e.x[3]+=c.x,e.y[2]+=c.y,e.y[3]+=c.y)})),d.data(f),this.prevPoint=t,e.render(!0)}}},t.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},t}(iS)),XS("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(e){return e.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="sankey",t}kp(t,e),t.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(e){return e.name},callback:function(e){var t=1===e[1];return{style:{fill:"#545454",textAlign:t?"end":"start"},offsetX:t?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(e){return!Yd(e,[0,"data","isNode"])},formatter:function(e){return{name:e.source+" -> "+e.target,value:e.value}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},t.prototype.changeData=function(e){this.updateOption({data:e});var t=b$(this.options,this.chart.width,this.chart.height),n=t.nodes,r=t.edges,i=zN(this.chart,"nodes"),a=zN(this.chart,"edges");i.changeData(n),a.changeData(r)},t.prototype.getSchemaAdaptor=function(){return k$},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(LF);var _$={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(e){return e.id},source:function(e){return e.source},target:function(e){return e.target},sourceWeight:function(e){return e.value||1},targetWeight:function(e){return e.value||1},sortBy:null};function A$(e,t){var n=function(e){return Md({},_$,e)}(e),r={},i=t.nodes,a=t.links;return i.forEach((function(e){var t=n.id(e);r[t]=e})),function(e,t,n){Hp(e,(function(e,r){e.inEdges=t.filter((function(e){return""+n.target(e)==""+r})),e.outEdges=t.filter((function(e){return""+n.source(e)==""+r})),e.edges=e.outEdges.concat(e.inEdges),e.frequency=e.edges.length,e.value=0,e.inEdges.forEach((function(t){e.value+=n.targetWeight(t)})),e.outEdges.forEach((function(t){e.value+=n.sourceWeight(t)}))}))}(r,a,n),function(e,t){var n={weight:function(e,t){return t.value-e.value},frequency:function(e,t){return t.frequency-e.frequency},id:function(e,n){return(""+t.id(e)).localeCompare(""+t.id(n))}}[t.sortBy];!n&&Rp(t.sortBy)&&(n=t.sortBy),n&&e.sort(n)}(i,n),{nodes:function(e,t){var n=e.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(t.weight){var r=t.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),a=t.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;e.forEach((function(e){o+=e.value})),e.forEach((function(e){e.weight=e.value/o,e.width=e.weight*(1-r),e.height=a})),e.forEach((function(n,r){for(var o=0,s=r-1;s>=0;s--)o+=e[s].width+2*i;var l=n.minX=i+o,c=n.maxX=n.minX+n.width,u=n.minY=t.y-a/2,h=n.maxY=u+a;n.x=[l,c,c,l],n.y=[u,u,h,h]}))}else{var s=1/n;e.forEach((function(e,n){e.x=(n+.5)*s,e.y=t.y}))}return e}(i,n),links:function(e,t,n){if(n.weight){var r={};Hp(e,(function(e,t){r[t]=e.value})),t.forEach((function(t){var i=n.source(t),a=n.target(t),o=e[i],s=e[a];if(o&&s){var l=r[i],c=n.sourceWeight(t),u=o.minX+(o.value-l)/o.value*o.width,h=u+c/o.value*o.width;r[i]-=c;var p=r[a],d=n.targetWeight(t),f=s.minX+(s.value-p)/s.value*s.width,m=f+d/s.value*s.width;r[a]-=d;var g=n.y;t.x=[u,h,f,m],t.y=[g,g,g,g],t.source=o,t.target=s}}))}else t.forEach((function(t){var r=e[n.source(t)],i=e[n.target(t)];r&&i&&(t.x=[r.x,i.x],t.y=[r.y,i.y],t.source=r,t.target=i)}));return t}(r,a,n)}}var O$={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(e,t){return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:(e[0]+e[1])/2>.5?-4:4,content:t}}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(e){return!Yd(e,[0,"data","isNode"])},formatter:function(e){return{name:e.source+" -> "+e.target,value:e.value}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function I$(e){var t=e.options,n=t.data,r=t.sourceField,i=t.targetField,a=t.weightField,o=t.nodePaddingRatio,s=t.nodeWidthRatio,l=t.rawFields,c=void 0===l?[]:l,u=A$({weight:!0,nodePaddingRatio:o,nodeWidthRatio:s},iF(n,r,i,a)),h=u.nodes,p=u.links,d=h.map((function(e){return _p(_p({},IN(e,Op(["id","x","y","name"],c))),{isNode:!0})})),f=p.map((function(e){return _p(_p({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},IN(e,Op(["x","y","value"],c))),{isNode:!1})}));return _p(_p({},e),{ext:_p(_p({},e.ext),{chordData:{nodesData:d,edgesData:f}})})}function M$(e){var t;return e.chart.scale(((t={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}}).name={sync:"color"},t.source={sync:"color"},t)),e}function N$(e){return e.chart.axis(!1),e}function F$(e){return e.chart.legend(!1),e}function L$(e){var t=e.chart,n=e.options.tooltip;return t.tooltip(n),e}function P$(e){return e.chart.coordinate("polar").reflect("y"),e}function R$(e){var t=e.chart,n=e.options,r=e.ext.chordData.nodesData,i=n.nodeStyle,a=n.label,o=n.tooltip,s=t.createView();return s.data(r),mL({chart:s,options:{xField:"x",yField:"y",seriesField:"name",polygon:{style:i},label:a,tooltip:o}}),e}function D$(e){var t=e.chart,n=e.options,r=e.ext.chordData.edgesData,i=n.edgeStyle,a=n.tooltip,o=t.createView();return o.data(r),gL({chart:o,options:{xField:"x",yField:"y",seriesField:"source",edge:{style:i,shape:"arc"},tooltip:a}}),e}function B$(e){var t=e.chart,n=e.options.animation;return"boolean"==typeof n?t.animate(n):t.animate(!0),Hp(BN(t),(function(e){e.animate(n)})),e}function z$(e){return ON(eL,I$,P$,M$,N$,F$,L$,D$,R$,ZF,tL,B$)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="chord",t}kp(t,e),t.getDefaultOptions=function(){return O$},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return z$}}(LF);var H$={field:"value",as:["x","y","r"],sort:function(e,t){return t.value-e.value}};function j$(e){var t=e.data,n=e.hierarchyConfig,r=e.rawFields,i=void 0===r?[]:r,a=e.enableDrillDown,o=function(e,t){var n,r=(t=Md({},H$,t)).as;if(!Bp(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');try{n=RH(t)}catch(Wh){console.warn(Wh)}var i,a=(i=e,gj().size(t.size).padding(t.padding)(VH(i).sum((function(e){return e[n]})).sort(t.sort))),o=r[0],s=r[1],l=r[2];return a.each((function(e){e[o]=e.x,e[s]=e.y,e[l]=e.r})),DH(a)}(t,_p(_p({},n),{field:"value",as:["x","y","r"]})),s=[];return o.forEach((function(e){for(var t,r=e.data.name,o=_p({},e);o.depth>1;)r=(null===(t=o.parent.data)||void 0===t?void 0:t.name)+" / "+r,o=o.parent;if(a&&e.depth>2)return null;var l=qN({},e.data,_p(_p(_p({},IN(e.data,i)),{path:r}),e));l.ext=n,l["hierarchy-data-transform-params"]={hierarchyConfig:n,rawFields:i,enableDrillDown:a},s.push(l)})),s}function G$(e,t,n){var r=lF([e,t]),i=r[0],a=r[1],o=r[2],s=r[3],l=n.width-(s+a),c=n.height-(i+o),u=Math.min(l,c),h=(l-u)/2,p=(c-u)/2;return{finalPadding:[i+p,a+h,o+p,s+h],finalSize:u<0?0:u}}var $$=["x","y","r","name","value","path","depth"],Y$={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}};function U$(e){var t=e.chart,n=Math.min(t.viewBBox.width,t.viewBBox.height);return qN({options:{size:function(e){return e.r*n}}},e)}function V$(e){var t=e.options,n=e.chart,r=n.viewBBox,i=t.padding,a=t.appendPadding,o=t.drilldown,s=a;(null==o?void 0:o.enabled)&&(s=lF([sF(n.appendPadding,Yd(o,["breadCrumb","position"])),a]));var l=G$(i,s,r).finalPadding;return n.padding=l,n.appendPadding=0,e}function W$(e){var t=e.chart,n=e.options,r=t.padding,i=t.appendPadding,a=n.color,o=n.colorField,s=n.pointStyle,l=n.hierarchyConfig,c=n.sizeField,u=n.rawFields,h=void 0===u?[]:u,p=n.drilldown,d=j$({data:n.data,hierarchyConfig:l,enableDrillDown:null==p?void 0:p.enabled,rawFields:h});t.data(d);var f=G$(r,i,t.viewBBox).finalSize,m=function(e){return e.r*f};return c&&(m=function(e){return e[c]*f}),dL(qN({},e,{options:{xField:"x",yField:"y",seriesField:o,sizeField:c,rawFields:Op($$,h),point:{color:a,style:s,shape:"circle",size:m}}})),e}function X$(e){return ON(iL({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(e)}function q$(e){var t=e.chart,n=e.options.tooltip;if(!1===n)t.tooltip(!1);else{var r=n;Yd(n,"fields")||(r=qN({},{customItems:function(e){return e.map((function(e){var n=Yd(t.getOptions(),"scales"),r=Yd(n,["name","formatter"],(function(e){return e})),i=Yd(n,["value","formatter"],(function(e){return e}));return _p(_p({},e),{name:r(e.data.name),value:i(e.data.value)})}))}},r)),t.tooltip(r)}return e}function K$(e){return e.chart.axis(!1),e}function Q$(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return(null==t?void 0:t.enabled)?qN({},e,{interactions:Op(r,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:j$,enableDrillDown:!0}}])}):e}function Z$(e){return ZF({chart:e.chart,options:Q$(e.options)}),e}function J$(e){return ON(qF("pointStyle"),U$,V$,eL,X$,W$,K$,KF,q$,Z$,JF,aL())(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle-packing",t}kp(t,e),t.getDefaultOptions=function(){return Y$},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return J$},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(LF),function(e){function t(t,n,r,i){var a=e.call(this,t,qN({},i,n))||this;return a.type="g2-plot",a.defaultOptions=i,a.adaptor=r,a}kp(t,e),t.prototype.getDefaultOptions=function(){return this.defaultOptions},t.prototype.getSchemaAdaptor=function(){return this.adaptor}}(LF);var eY={line:kL,pie:kP,column:eP,bar:lP,area:LL,gauge:uG,"tiny-line":kD,"tiny-column":OD,"tiny-area":TD,"ring-progress":ZD,progress:XD,scatter:PR,histogram:jD,funnel:dH},tY={line:_L,pie:_P,column:nP,bar:uP,area:PL,gauge:hG,"tiny-line":_D,"tiny-column":MD,"tiny-area":FD,"ring-progress":eB,progress:qD,scatter:jR,histogram:GD,funnel:fH},nY={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function rY(e,t,n){var r=tY[e];r?(0,eY[e])({chart:t,options:qN({},r.getDefaultOptions(),Yd(nY,e,{}),n)}):console.error("could not find "+e+" plot")}function iY(e){var t=e.chart,n=e.options,r=n.views,i=n.legend;return Hp(r,(function(e){var n=e.region,r=e.data,i=e.meta,a=e.axes,o=e.coordinate,s=e.interactions,l=e.annotations,c=e.tooltip,u=e.geometries,h=t.createView({region:n});h.data(r);var p={};a&&Hp(a,(function(e,t){p[t]=IN(e,PF)})),p=qN({},i,p),h.scale(p),a?Hp(a,(function(e,t){h.axis(t,e)})):h.axis(!1),h.coordinate(o),Hp(u,(function(e){var t=uL({chart:h,options:e}).ext,n=e.adjust;n&&t.geometry.adjust(n)})),Hp(s,(function(e){!1===e.enable?h.removeInteraction(e.type):h.interaction(e.type,e.cfg)})),Hp(l,(function(e){h.annotation()[e.type](_p({},e))})),"boolean"==typeof e.animation?h.animate(!1):(h.animate(!0),Hp(h.geometries,(function(t){t.animate(e.animation)}))),c&&(h.interaction("tooltip"),h.tooltip(c))})),i?Hp(i,(function(e,n){t.legend(n,e)})):t.legend(!1),t.tooltip(n.tooltip),e}function aY(e){var t=e.chart;return Hp(e.options.plots,(function(e){var n=e.type,r=e.region,i=e.options,a=void 0===i?{}:i,o=a.tooltip,s=t.createView(_p({region:r},IN(a,FF)));o&&s.interaction("tooltip"),rY(n,s,a)})),e}function oY(e){return ON(JF,iY,aY,ZF,JF,eL,QF)(e)}lS("association",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kp(t,e),t.prototype.getAssociationItems=function(e,t){var n,r=this.context.event,i=t||{},a=i.linkField,o=i.dim,s=[];if(null===(n=r.data)||void 0===n?void 0:n.data){var l=r.data.data;Hp(e,(function(e){var t,n,r=a;if("x"===o?r=e.getXScale().field:"y"===o?r=null===(t=e.getYScales().find((function(e){return e.field===r})))||void 0===t?void 0:t.field:r||(r=null===(n=e.getGroupScales()[0])||void 0===n?void 0:n.field),r){var i=Gd(RN(e),(function(t){var n=!1,i=!1,a=Bp(l)?Yd(l[0],r):Yd(l,r);return function(e,t){var n=e.getModel().data;return Bp(n)?n[0][t]:n[t]}(t,r)===a?n=!0:i=!0,{element:t,view:e,active:n,inactive:i}}));s.push.apply(s,i)}}))}return s},t.prototype.showTooltip=function(e){var t=jN(this.context.view);Hp(this.getAssociationItems(t,e),(function(e){if(e.active){var t=e.element.shape.getCanvasBBox();e.view.showTooltip({x:t.minX+t.width/2,y:t.minY+t.height/2})}}))},t.prototype.hideTooltip=function(){Hp(jN(this.context.view),(function(e){e.hideTooltip()}))},t.prototype.active=function(e){var t=HN(this.context.view);Hp(this.getAssociationItems(t,e),(function(e){var t=e.active,n=e.element;t&&n.setState("active",!0)}))},t.prototype.selected=function(e){var t=HN(this.context.view);Hp(this.getAssociationItems(t,e),(function(e){var t=e.active,n=e.element;t&&n.setState("selected",!0)}))},t.prototype.highlight=function(e){var t=HN(this.context.view);Hp(this.getAssociationItems(t,e),(function(e){var t=e.inactive,n=e.element;t&&n.setState("inactive",!0)}))},t.prototype.reset=function(){Hp(HN(this.context.view),(function(e){Hp(RN(e),(function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("selected")&&e.setState("selected",!1),e.hasState("inactive")&&e.setState("inactive",!1)}))}))},t}(iS)),XS("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),XS("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),XS("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),XS("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var sY=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="mix",t}return kp(t,e),t.prototype.getSchemaAdaptor=function(){return oY},t}(LF);function lY(e){var t=e.chart,n=e.options,r=n.type,i=n.data,a=n.fields,o=n.eachView,s=Xd(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return t.data(i),t.facet(r,_p(_p({},s),{fields:a,eachView:function(e,t){var n=o(e,t);if(n.geometries)!function(e,t){var n=t.data,r=t.coordinate,i=t.interactions,a=t.annotations,o=t.animation,s=t.tooltip,l=t.axes,c=t.meta,u=t.geometries;n&&e.data(n);var h={};l&&Hp(l,(function(e,t){h[t]=IN(e,PF)})),h=qN({},c,h),e.scale(h),r&&e.coordinate(r),!1===l?e.axis(!1):Hp(l,(function(t,n){e.axis(n,t)})),Hp(u,(function(t){var n=uL({chart:e,options:t}).ext,r=t.adjust;r&&n.geometry.adjust(r)})),Hp(i,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg)})),Hp(a,(function(t){e.annotation()[t.type](_p({},t))})),"boolean"==typeof o?e.animate(!1):(e.animate(!0),Hp(e.geometries,(function(e){e.animate(o)}))),s?(e.interaction("tooltip"),e.tooltip(s)):!1===s&&e.removeInteraction("tooltip")}(e,n);else{var r=n,i=r.options;i.tooltip&&e.interaction("tooltip"),rY(r.type,e,i)}}})),e}function cY(e){var t=e.chart,n=e.options,r=n.axes,i=n.meta,a=n.tooltip,o=n.coordinate,s=n.theme,l=n.legend,c=n.interactions,u=n.annotations,h={};return r&&Hp(r,(function(e,t){h[t]=IN(e,PF)})),h=qN({},i,h),t.scale(h),t.coordinate(o),r?Hp(r,(function(e,n){t.axis(n,e)})):t.axis(!1),a?(t.interaction("tooltip"),t.tooltip(a)):!1===a&&t.removeInteraction("tooltip"),t.legend(l),s&&t.theme(s),Hp(c,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg)})),Hp(u,(function(e){t.annotation()[e.type](_p({},e))})),e}function uY(e){return ON(eL,lY,cY)(e)}var hY,pY,dY={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="area",t}kp(t,e),t.getDefaultOptions=function(){return dY},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return uY}}(LF),(pY=hY||(hY={})).DEV="DEV",pY.BETA="BETA",pY.STABLE="STABLE",function(){function e(){}Object.defineProperty(e,"MultiView",{get:function(){var e,t;return e=hY.STABLE,t="MultiView",console.warn(e===hY.DEV?"Plot '"+t+"' is in DEV stage, just give us issues.":e===hY.BETA?"Plot '"+t+"' is in BETA stage, DO NOT use it in production env.":e===hY.STABLE?"Plot '"+t+"' is in STABLE stage, import it by \"import { "+t+" } from '@antv/g2plot'\".":"invalid Stage type."),sY},enumerable:!1,configurable:!0})}(),hF("en-US",{locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}}),hF("zh-CN",{locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}});var fY=function(e,t){var n=document.createElement("div");return"tooltip"===t&&(n.className="g2-tooltip"),q.render(e,n),n},mY=function(e,t){return{}.toString.call(e)==="[object ".concat(t,"]")},gY=function(e){return Object.prototype.toString.call(e).slice(8,-1)},vY=function(e){if(!e)return e;var t=new e.constructor;for(var n in e)e.hasOwnProperty(n)&&(t[n]="Object"===gY(e[n])||"Array"===gY(e[n])?vY(e[n]):e[n]);return t},yY=function(e,t){for(var n=e,r=0;r<t.length;r+=1){if(!(null==n?void 0:n[t[r]])){n=void 0;break}n=n[t[r]]}return n},xY=function(){return(xY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},EY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function bY(e,t){var n=f.exports.useRef(),r=f.exports.useRef(),i=f.exports.useRef(null),a=t.onReady,o=t.onEvent,s=function(e,t,n){var r=yY(e,t);!function(e,t,n){if(!e)return e;var r=e;t.forEach((function(e,i){i<t.length-1?r=r[e]:r[e]=n}))}(e,t,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=mY(r,"Function")?r.apply(void 0,e):r;return mY(i,"String")||mY(i,"Number")||mY(i,"HTMLDivElement")?i:fY(i,n)}))},l=function(){yY(t,["statistic","content","customHtml"])&&s(t,["statistic","content","customHtml"]),yY(t,["statistic","title","customHtml"])&&s(t,["statistic","title","customHtml"]),"object"==typeof t.tooltip&&(yY(t,["tooltip","container"])&&s(t,["tooltip","container"],"tooltip"),yY(t,["tooltip","customContent"])&&s(t,["tooltip","customContent"],"tooltip"))};return f.exports.useEffect((function(){if(n.current&&!jd(r.current,t)){var e=!1;if(r.current){var i=r.current;i.data,i.value,i.percent;var a=EY(i,["data","value","percent"]);t.data,t.value,t.percent;var o=EY(t,["data","value","percent"]);e=jd(a,o)}if(e&&"Mix"!==Yd(t,"chartType")){var s="data",c=Object.keys(t);["percent"].forEach((function(e){c.includes(e)&&(s=e)})),n.current.changeData((null==t?void 0:t[s])||[])}else l(),n.current.update(t);r.current=vY(t)}}),[t]),f.exports.useEffect((function(){if(!i.current)return function(){return null};l();var s=new e(i.current,xY({},t));e.__proto__.toDataURL=function(e,t){return function(e,t){var r;return void 0===e&&(e="image/png"),null===(r=n.current)||void 0===r?void 0:r.chart.canvas.cfg.el.toDataURL(e,t)}(e,t)},e.prototype.downloadImage=function(e,t,r){return function(e,t,r){var i;void 0===e&&(e="download"),void 0===t&&(t="image/png");var a=e;-1===e.indexOf(".")&&(a="".concat(e,".").concat(t.split("/")[1]));var o=null===(i=n.current)||void 0===i?void 0:i.chart.canvas.cfg.el.toDataURL(t,r),s=document.createElement("a");return s.href=o,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),s=null,a}(e,t,r)},s.render(),r.current||(r.current=vY(t)),n.current=function(e){if(!e)return e;var t={};for(var n in e)t[n]=e[n];return t}(s),a&&a(s);var c=function(e){o&&o(s,e)};return s.on("*",c),function(){n.current&&(n.current.destroy(),n.current.off("*",c),n.current=void 0)}}),[]),{chart:n,container:i}}var CY=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wY=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1},t.renderError=function(e){var n=t.props.errorTemplate;return n&&"function"==typeof n?n(e):d.createElement("h5",null,"组件出错了，请核查后重试： ",e.message)},t}return CY(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0,error:e}},t.getDerivedStateFromProps=function(e,t){return t.children!==e.children?{children:e.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):d.createElement(f.exports.Fragment,null,this.props.children)},t}(d.Component),TY=function(){return(TY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var SY=function(e){var t=e.animate,n=e.backgroundColor,r=e.backgroundOpacity,i=e.baseUrl,a=e.children,o=e.foregroundColor,s=e.foregroundOpacity,l=e.gradientRatio,c=e.uniqueKey,u=e.interval,h=e.rtl,p=e.speed,d=e.style,m=e.title,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),v=c||Math.random().toString(36).substring(6),y=v+"-diff",x=v+"-animated-diff",E=v+"-aria",b=h?{transform:"scaleX(-1)"}:null,C="0; "+u+"; 1",w=p+"s";return f.exports.createElement("svg",TY({"aria-labelledby":E,role:"img",style:TY(TY({},d),b)},g),m?f.exports.createElement("title",{id:E},m):null,f.exports.createElement("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+i+"#"+y+")",style:{fill:"url("+i+"#"+x+")"}}),f.exports.createElement("defs",{role:"presentation"},f.exports.createElement("clipPath",{id:y},a),f.exports.createElement("linearGradient",{id:x},f.exports.createElement("stop",{offset:"0%",stopColor:n,stopOpacity:r},t&&f.exports.createElement("animate",{attributeName:"offset",values:-l+"; "+-l+"; 1",keyTimes:C,dur:w,repeatCount:"indefinite"})),f.exports.createElement("stop",{offset:"50%",stopColor:o,stopOpacity:s},t&&f.exports.createElement("animate",{attributeName:"offset",values:-l/2+"; "+-l/2+"; "+(1+l/2),keyTimes:C,dur:w,repeatCount:"indefinite"})),f.exports.createElement("stop",{offset:"100%",stopColor:n,stopOpacity:r},t&&f.exports.createElement("animate",{attributeName:"offset",values:"0; 0; "+(1+l),keyTimes:C,dur:w,repeatCount:"indefinite"})))))};SY.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var kY=function(e){return e.children?f.exports.createElement(SY,TY({},e)):f.exports.createElement(_Y,TY({},e))},_Y=function(e){return f.exports.createElement(kY,TY({viewBox:"0 0 476 124"},e),f.exports.createElement("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),f.exports.createElement("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),f.exports.createElement("circle",{cx:"20",cy:"20",r:"20"}))},AY=function(e){var t=e.loadingTemplate;return d.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},t||d.createElement(kY,{viewBox:"0 0 400 180",width:200,height:90,speed:1},d.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),d.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),d.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),d.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),d.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),d.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),d.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),d.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),d.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),d.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"})))},OY=f.exports.forwardRef((function(e,t){var n=e.chartRef,r=e.style,i=void 0===r?{height:"inherit"}:r,a=e.className,o=e.loading,s=e.loadingTemplate,l=e.errorTemplate,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),u=bY(_P,c),h=u.chart,p=u.container;return f.exports.useEffect((function(){!function(e,t){e&&(Rp(e)?e(t):e.current=t)}(n,h.current)}),[h.current]),f.exports.useImperativeHandle(t,(function(){return{getChart:function(){return h.current}}})),d.createElement(wY,{errorTemplate:l},o&&d.createElement(AY,{loadingTemplate:s}),d.createElement("div",{className:a,style:i,ref:p}))}));function IY(e,t,n){e-=20;const r=tF(t,n),i=e/2.5;let a=1;e<r&&(a=Math.min(Math.sqrt(Math.abs(Math.pow(i,2)/(Math.pow(r/2,2)+Math.pow(12,2)))),1));return`<div style="${`width:${e}px;`};font-size:${a}em;line-height:${a<1?1:"inherit"};">${t}</div>`}const MY=e=>{const{data:t,positon:n,hidden:r,labelWithName:i,themeMode:a,donut:o}=e,l={padding:[16,8,16,8],appendPadding:10,data:t,angleField:"value",colorField:"name",radius:.9,innerRadius:o?.6:0,label:{type:"spider",content:e=>`${i?`${e.name}: `:""}${(100*e.percent).toFixed(0)}%`,style:{fontSize:12,textAlign:"center",fillStyle:"dark"===a?"#fff":"#333"}},statistic:{title:{offsetY:16,style:{color:"dark"===a?"#ABADBA":"unset"},customHtml:(e,t,n)=>{const{width:r,height:i}=e.getBoundingClientRect();return IY(Math.sqrt(Math.pow(r/2,2)+Math.pow(i/2,2)),n?n.name:"总计",{fontSize:28})}},content:{offsetY:-16,style:{color:"dark"===a?"#fff":"unset"},customHtml:(e,t,n,r)=>{const{width:i}=e.getBoundingClientRect();let a=n?`${n.value}`:`${null==r?void 0:r.reduce(((e,t)=>e+t.value),0)}`;return a=w.toNumber(a).toFixed(3),IY(i,a,{fontSize:36})}}},interactions:[{type:"element-selected"},{type:"element-active"}],tooltip:{fields:["name","value"],formatter:e=>({name:e.name,value:`${e.value.toFixed(3)}`})},legend:!r&&{position:n}};return d.createElement(OY,s({},l))};function NY(e){var t,n;const{values:r,series:i,themeMode:a}=e,{custom:o,options:s}=r,{calc:l,legengPosition:c,max:u,labelWithName:h,donut:p=!1}=o,f=up(i,l,{unit:null==(t=null==s?void 0:s.standardOptions)?void 0:t.util,decimals:null==(n=null==s?void 0:s.standardOptions)?void 0:n.decimals},null==s?void 0:s.valueMappings).sort(((e,t)=>t.value-e.value)),m=u&&f.length>u?f.slice(0,u).map((e=>({name:e.name,value:e.stat}))).concat({name:"其他",value:f.slice(u).reduce(((e,t)=>t.stat+e),0)}):f.map((e=>({name:e.name,value:e.stat})));return d.createElement("div",{className:"renderer-pie-container"},d.createElement(MY,{themeMode:a,data:m,positon:"hidden"!==c?c:void 0,hidden:"hidden"===c,labelWithName:h,donut:p}))}var FY=Math.PI/3,LY=[0,FY,2*FY,3*FY,4*FY,5*FY];function PY(e){return e[0]}function RY(e){return e[1]}const DY={fontWeight:"normal",fontSize:"12px",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono"},BY=(e=DY)=>`${e.fontWeight} ${e.fontSize} ${e.fontFamily}`;function zY(e,t=BY()){const n=document.createElement("canvas").getContext("2d");n.font=t;return n.measureText(e).width}function HY(e,t,n,r){return function(e,t,n){let r=zY(e,BY(l(s({},DY),{fontSize:"24px"})));if(r<=(t*=.95)&&24<=n)return 24;for(let i=24;i>=6;i--)if(r=zY(e,BY(l(s({},DY),{fontSize:i+"px"}))),r<t&&i<=n)return Math.ceil(i);return 0}(e,n,r/t)}const jY=ce("body").append((function(){return document.createElement("div")})).attr("class","hexbin-tooltip").style("opacity",0);function GY(e,t,{width:n,height:r,fontAutoScale:i=!0,fontSize:a=12,themeMode:o}){const s=xe().duration(750),{columns:l,rows:c}=function(e,t,n){let r=0,i=0;const a=Math.sqrt(n);return e>t?(r=Math.ceil(e/t*a*.75),r<1?r=1:r>n&&(r=n),i=Math.ceil(n/r),i<1&&(i=1)):(i=Math.ceil(t/e*a*.75),i<1?i=1:i>n&&(i=n),r=Math.ceil(n/i),r<1&&(r=1)),{columns:r,rows:i}}(n,r,t.length),u=Math.floor(Ee([n/((l+.5)*Math.sqrt(3)),r/(1.5*(c+1/3)),n/7])),h=Math.sin(60*Math.PI/180)*u*2,p=function(e,t,n,r){let i=[];for(let a=0,o=0;a<e;a++)for(let e=0;e<t&&o<=n-1;e++,o++)i.push([r*e*1.75,r*a*1.5]);return i}(c,l,t.length,u);let d=(n-h*l)/2+h/2;p.length>=2*l&&(d=(n-h*l-h/2)/2+h/2);const f=(r-function(e,t){let n=0;for(let r=1;r<=e;r++)n+=r===e&&1!==r?1.5:r%2==1?2:1;return n*t}(c,u))/2+u,m=function(){var e,t,n,r=0,i=0,a=1,o=1,s=PY,l=RY;function c(e){var r,i={},a=[],o=e.length;for(r=0;r<o;++r)if(!isNaN(u=+s.call(null,c=e[r],r,e))&&!isNaN(h=+l.call(null,c,r,e))){var c,u,h,p=Math.round(h/=n),d=Math.round(u=u/t-(1&p)/2),f=h-p;if(3*Math.abs(f)>1){var m=u-d,g=d+(u<d?-1:1)/2,v=p+(h<p?-1:1),y=u-g,x=h-v;m*m+f*f>y*y+x*x&&(d=g+(1&p?1:-1)/2,p=v)}var E=d+"-"+p,b=i[E];b?b.push(c):(a.push(b=i[E]=[c]),b.x=(d+(1&p)/2)*t,b.y=p*n)}return a}function u(e){var t=0,n=0;return LY.map((function(r){var i=Math.sin(r)*e,a=-Math.cos(r)*e,o=i-t,s=a-n;return t=i,n=a,[o,s]}))}return c.hexagon=function(t){return"m"+u(null==t?e:+t).join("l")+"z"},c.centers=function(){for(var s=[],l=Math.round(i/n),c=Math.round(r/t),u=l*n;u<o+e;u+=n,++l)for(var h=c*t+(1&l)*t/2;h<a+t/2;h+=t)s.push([h,u]);return s},c.mesh=function(){var t=u(e).slice(0,4).join("l");return c.centers().map((function(e){return"M"+e+"m"+t})).join("")},c.x=function(e){return arguments.length?(s=e,c):s},c.y=function(e){return arguments.length?(l=e,c):l},c.radius=function(r){return arguments.length?(t=2*(e=+r)*Math.sin(FY),n=1.5*e,c):e},c.size=function(e){return arguments.length?(r=i=0,a=+e[0],o=+e[1],c):[a-r,o-i]},c.extent=function(e){return arguments.length?(r=+e[0][0],i=+e[0][1],a=+e[1][0],o=+e[1][1],c):[[r,i],[a,o]]},c.radius(1)}().radius(u),g=d,v=f,y=m(p),x=u,E=.9*h;let b=a,C=a,T=!1,S=0;if(i){let e="",n="";for(let r=0;r<t.length;r++)t[r].name.length>e.length&&(e=t[r].name),w.toString(t[r].value).length>n.length&&(n=w.toString(t[r].value));b=HY(e,2,E,x),C=HY(n,2,E,x),b<6&&(T=!0,S=18,e=e.substring(0,S+2),b=HY(e,2,E,x),b<6&&(S=10,e=e.substring(0,S+2),b=HY(e,2,E,x),b<6&&(S=6,e=e.substring(0,S+2),b=HY(e,2,E,x))))}const k=x/2/2,_=-x/2/2;e.attr("width",n).attr("height",r).attr("transform",`translate(${g},${v})`);const A=e.selectAll(".hexagon").data(y);A.enter().append((function(){return document.createElementNS("http://www.w3.org/2000/svg","path")})).attr("class","hexagon").on("mousemove",(function(n,r){var i,a;const s=null==(i=t[r])?void 0:i.metric,l=`${`<div><strong>${(null==s?void 0:s.__name__)||"value"}: ${null==(a=t[r])?void 0:a.value}</strong></div>`}${w.map(w.omit(s,"__name__"),((e,t)=>`<div>${t}: ${e}</div>`)).join("")}`;jY.style("opacity",.9),jY.html(l).style("left",ue.pageX+10+"px").style("top",ue.pageY-28+"px");e.selectAll(".hexagon").nodes()[r].setAttribute("stroke","dark"===o?"#fff":"#2A2D3C")})).on("mouseout",(function(n,r){var i;jY.style("opacity",0);e.selectAll(".hexagon").nodes()[r].setAttribute("stroke",null==(i=t[r])?void 0:i.color)})).attr("stroke",((e,n)=>{var r;return null==(r=t[n])?void 0:r.color})).attr("stroke-width","2px").style("fill",((e,n)=>{var r;return null==(r=t[n])?void 0:r.color})).style("fill-opacity",1).transition(s).attr("d",(function(e){return"M"+e.x+","+e.y+m.hexagon([u-3])})),A.enter().append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y+_})).text((function(e,n){var r;let i=null==(r=t[n])?void 0:r.name;return T?(i=i.substring(0,S)+"...",i):i})).attr("text-anchor","middle").attr("alignment-baseline","central").style("pointer-events","none").style("font-size",b+"px").style("fill","black").each((function(e){e.bbox=this.getBBox()})),A.enter().append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y+k})).text((function(e,n){var r;return null==(r=t[n])?void 0:r.value})).attr("text-anchor","middle").attr("alignment-baseline","central").style("font-size",C+"px").style("fill","black").style("pointer-events","none").each((function(e){e.bbox=this.getBBox()}))}function $Y(e,{width:t,height:n,parentGroupEl:r,themeMode:i}){const a=ce(r).attr("width",t).attr("height",n),o=function(e,t,n){let r=e;for(let i=1,a=1/0;i<=e;i+=1){const o=Math.floor(t/i),s=2*o/3,l=Math.abs(t*n-e*o*s);l<a&&(a=l,r=i)}return r}(1,t,n);GY(a,e,{width:Math.floor(t/o),height:n/Math.ceil(1/o),themeMode:i})}const YY=e=>{const{values:t,series:n,themeMode:r}=e,{custom:i={},options:a}=t,{calc:o,colorRange:c=[],reverseColorOrder:u=!1,colorDomainAuto:h,colorDomain:p}=i,d=f.exports.useRef(null),m=f.exports.useRef(null),g=fe(m);return f.exports.useEffect((()=>{var e,t;const i=up(n,o,{unit:null==(e=null==a?void 0:a.standardOptions)?void 0:e.util,decimals:null==(t=null==a?void 0:a.standardOptions)?void 0:t.decimals},null==a?void 0:a.valueMappings),f=ie().domain(function(e,t,n){if(!t&&(null==n?void 0:n.length))return[n[0],(n[0]+n[1])/2,n[1]];const r=w.get(w.minBy(e,"stat"),"stat"),i=w.get(w.maxBy(e,"stat"),"stat");return void 0!==r&&void 0!==i?[r,(i+r)/2,i]:[]}(i,h,p)).range(u?w.reverse(w.slice(c)):c);if((null==g?void 0:g.width)&&(null==g?void 0:g.height)){const e={width:null==g?void 0:g.width,height:null==g?void 0:g.height,parentGroupEl:d.current,themeMode:r},t=w.map(i,(e=>l(s({},e),{value:e.text,color:e.color||f(e.stat)||"#3399CC"})));ce(d.current).selectAll("*").remove(),t.length&&$Y(t,e)}}),[JSON.stringify(n),JSON.stringify(a),null==g?void 0:g.width,null==g?void 0:g.height,o,c,u,h,p]),f.exports.createElement("div",{ref:m,style:{width:"100%",height:"100%"}},f.exports.createElement("svg",{style:{width:"100%",height:"100%"}},f.exports.createElement("g",{ref:d})))};function UY(e){const{item:t,custom:n,themeMode:r,maxValue:i}=e,{baseColor:a="#FF656B",displayMode:o="basic",serieWidth:s=20}=n,l=t.color?t.color:a,c=f.exports.useRef(null),u=fe(c),h=f.exports.useRef(null),p=fe(h);return d.createElement("div",{className:"renderer-bar-gauge-item",key:t.name},d.createElement(kt,{title:t.name},d.createElement("div",{className:"renderer-bar-gauge-item-name",style:{width:`${s}%`}},t.name)),d.createElement("div",{className:"renderer-bar-gauge-item-value",style:{width:100-s+"%"}},d.createElement("div",{className:"renderer-bar-gauge-item-value-bg",style:{backgroundColor:"dark"===r?"#20222E":"#F6F6F6"}}),d.createElement("div",{ref:c,className:"renderer-bar-gauge-item-value-color-bg",style:{color:"dark"===r?"#fff":"#20222E",borderRight:`2px solid ${l}`,backgroundColor:te(l).alpha("basic"===o?.2:1).rgb().string(),width:t.value/i*100+"%"}},"basic"===o&&d.createElement("div",{ref:h,className:"renderer-bar-gauge-item-value-text",style:{color:l,right:(null==u?void 0:u.width)&&(null==p?void 0:p.width)&&(null==u?void 0:u.width)<(null==p?void 0:p.width)+8?-(null==p?void 0:p.width)-8:0}},t.text))))}function VY(e){var t,n,r;const{values:i,series:a,themeMode:o}=e,{custom:s,options:l}=i,{calc:c,maxValue:u,sortOrder:h="desc"}=s;let p=up(a,c,{unit:null==(t=null==l?void 0:l.standardOptions)?void 0:t.util,decimals:null==(n=null==l?void 0:l.standardOptions)?void 0:n.decimals},null==l?void 0:l.valueMappings);h&&"none"!==h&&(p=w.orderBy(p,["value"],[h]));const f=void 0!==u?u:(null==(r=w.maxBy(p,"value"))?void 0:r.value)||0;return d.createElement("div",{className:"renderer-bar-gauge-container"},d.createElement("div",{className:"renderer-bar-gauge scroll-container"},w.map(p,(e=>d.createElement(UY,{key:e.id,item:e,custom:s,themeMode:o,maxValue:f})))))}const WY=["http","https","mailto","tel"];function XY(e){return e&&"object"==typeof e?"position"in e||"type"in e?KY(e.position):"start"in e||"end"in e?KY(e):"line"in e||"column"in e?qY(e):"":""}function qY(e){return QY(e&&e.line)+":"+QY(e&&e.column)}function KY(e){return qY(e&&e.start)+"-"+qY(e&&e.end)}function QY(e){return e&&"number"==typeof e?e:1}class ZY extends Error{constructor(e,t,n){const r=[null,null];let i={start:{line:null,column:null},end:{line:null,column:null}};if(super(),"string"==typeof t&&(n=t,t=void 0),"string"==typeof n){const e=n.indexOf(":");-1===e?r[1]=n:(r[0]=n.slice(0,e),r[1]=n.slice(e+1))}t&&("type"in t||"position"in t?t.position&&(i=t.position):"start"in t||"end"in t?i=t:("line"in t||"column"in t)&&(i.start=t)),this.name=XY(t)||"1:1",this.message="object"==typeof e?e.message:e,this.stack="object"==typeof e?e.stack:"",this.reason=this.message,this.fatal,this.line=i.start.line,this.column=i.start.column,this.source=r[0],this.ruleId=r[1],this.position=i,this.actual,this.expected,this.file,this.url,this.note}}ZY.prototype.file="",ZY.prototype.name="",ZY.prototype.reason="",ZY.prototype.message="",ZY.prototype.stack="",ZY.prototype.fatal=null,ZY.prototype.column=null,ZY.prototype.line=null,ZY.prototype.source=null,ZY.prototype.ruleId=null,ZY.prototype.position=null;const JY={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');eU(e);let n,r=0,i=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.charCodeAt(a)){if(n){r=a+1;break}}else i<0&&(n=!0,i=a+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let o=-1,s=t.length-1;for(;a--;)if(47===e.charCodeAt(a)){if(n){r=a+1;break}}else o<0&&(n=!0,o=a+1),s>-1&&(e.charCodeAt(a)===t.charCodeAt(s--)?s<0&&(i=a):(s=-1,i=o));r===i?i=o:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(eU(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.charCodeAt(0)?"/":".":1===n&&47===e.charCodeAt(0)?"//":e.slice(0,n)},extname:function(e){eU(e);let t,n=e.length,r=-1,i=0,a=-1,o=0;for(;n--;){const s=e.charCodeAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?a<0?a=n:1!==o&&(o=1):a>-1&&(o=-1);else if(t){i=n+1;break}}if(a<0||r<0||0===o||1===o&&a===r-1&&a===i+1)return"";return e.slice(a,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)eU(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){eU(e);const t=47===e.charCodeAt(0);let n=function(e,t){let n,r,i="",a=0,o=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(o===l-1||1===s);else if(o!==l-1&&2===s){if(i.length<2||2!==a||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){if(r=i.lastIndexOf("/"),r!==i.length-1){r<0?(i="",a=0):(i=i.slice(0,r),a=i.length-1-i.lastIndexOf("/")),o=l,s=0;continue}}else if(i.length>0){i="",a=0,o=l,s=0;continue}t&&(i=i.length>0?i+"/..":"..",a=2)}else i.length>0?i+="/"+e.slice(o+1,l):i=e.slice(o+1,l),a=l-o-1;o=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.charCodeAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function eU(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const tU={cwd:function(){return"/"}};function nU(e){return null!==e&&"object"==typeof e&&e.href&&e.origin}function rU(e){if("string"==typeof e)e=new URL(e);else if(!nU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.charCodeAt(n)&&50===t.charCodeAt(n+1)){const e=t.charCodeAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const iU=["history","path","basename","stem","extname","dirname"];class aU{constructor(e){let t;t=e?"string"==typeof e||function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)?{value:e}:nU(e)?{path:e}:e:{},this.data={},this.messages=[],this.history=[],this.cwd=tU.cwd(),this.value,this.stored,this.result,this.map;let n,r=-1;for(;++r<iU.length;){const e=iU[r];e in t&&void 0!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)iU.includes(n)||(this[n]=t[n])}get path(){return this.history[this.history.length-1]}set path(e){nU(e)&&(e=rU(e)),sU(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return"string"==typeof this.path?JY.dirname(this.path):void 0}set dirname(e){lU(this.basename,"dirname"),this.path=JY.join(e||"",this.basename)}get basename(){return"string"==typeof this.path?JY.basename(this.path):void 0}set basename(e){sU(e,"basename"),oU(e,"basename"),this.path=JY.join(this.dirname||"",e)}get extname(){return"string"==typeof this.path?JY.extname(this.path):void 0}set extname(e){if(oU(e,"extname"),lU(this.dirname,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=JY.join(this.dirname,this.stem+(e||""))}get stem(){return"string"==typeof this.path?JY.basename(this.path,this.extname):void 0}set stem(e){sU(e,"stem"),oU(e,"stem"),this.path=JY.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e)}message(e,t,n){const r=new ZY(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=null,r}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}}function oU(e,t){if(e&&e.includes(JY.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+JY.sep+"`")}function sU(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function lU(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function cU(e){if(e)throw e}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var uU=Object.prototype.hasOwnProperty,hU=Object.prototype.toString,pU=Object.defineProperty,dU=Object.getOwnPropertyDescriptor,fU=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===hU.call(e)},mU=function(e){if(!e||"[object Object]"!==hU.call(e))return!1;var t,n=uU.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&uU.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||uU.call(e,t)},gU=function(e,t){pU&&"__proto__"===t.name?pU(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},vU=function(e,t){if("__proto__"===t){if(!uU.call(e,t))return;if(dU)return dU(e,t).value}return e[t]},yU=function e(){var t,n,r,i,a,o,s=arguments[0],l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),(null==s||"object"!=typeof s&&"function"!=typeof s)&&(s={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)r=vU(s,n),s!==(i=vU(t,n))&&(u&&i&&(mU(i)||(a=fU(i)))?(a?(a=!1,o=r&&fU(r)?r:[]):o=r&&mU(r)?r:{},gU(s,{name:n,newValue:e(u,o,i)})):void 0!==i&&gU(s,{name:n,newValue:i}));return s};function xU(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function EU(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function i(a,...o){const s=e[++n];let l=-1;if(a)r(a);else{for(;++l<t.length;)null!==o[l]&&void 0!==o[l]||(o[l]=t[l]);t=o,s?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let s;r&&t.push(i);try{s=e.apply(this,t)}catch(a){const t=a;if(r&&n)throw t;return i(t)}r||(s instanceof Promise?s.then(o,i):s instanceof Error?i(s):o(s))}function i(e,...r){n||(n=!0,t(e,...r))}function o(e){i(null,e)}}(s,i)(...o):r(null,...o)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const bU=function e(){const t=EU(),n=[];let r,i={},a=-1;return o.data=function(e,t){if("string"==typeof e)return 2===arguments.length?(kU("data",r),i[e]=t,o):CU.call(i,e)&&i[e]||null;if(e)return kU("data",r),i=e,o;return i},o.Parser=void 0,o.Compiler=void 0,o.freeze=function(){if(r)return o;for(;++a<n.length;){const[e,...r]=n[a];if(!1===r[0])continue;!0===r[0]&&(r[0]=void 0);const i=e.call(o,...r);"function"==typeof i&&t.use(i)}return r=!0,a=Number.POSITIVE_INFINITY,o},o.attachers=n,o.use=function(e,...t){let a;if(kU("use",r),null==e);else if("function"==typeof e)u(e,...t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?c(e):l(e)}a&&(i.settings=Object.assign(i.settings||{},a));return o;function s(e){if("function"==typeof e)u(e);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;u(t,...n)}else l(e)}}function l(e){c(e.plugins),e.settings&&(a=Object.assign(a||{},e.settings))}function c(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function u(e,t){let r,i=-1;for(;++i<n.length;)if(n[i][0]===e){r=n[i];break}r?(xU(r[1])&&xU(t)&&(t=yU(!0,r[1],t)),r[1]=t):n.push([...arguments])}},o.parse=function(e){o.freeze();const t=OU(e),n=o.Parser;if(TU("parse",n),wU(n,"parse"))return new n(String(t),t).parse();return n(String(t),t)},o.stringify=function(e,t){o.freeze();const n=OU(t),r=o.Compiler;if(SU("stringify",r),_U(e),wU(r,"compile"))return new r(e,n).compile();return r(e,n)},o.run=function(e,n,r){_U(e),o.freeze(),r||"function"!=typeof n||(r=n,n=void 0);if(!r)return new Promise(i);function i(i,a){function o(t,n,o){n=n||e,t?a(t):i?i(n):r(null,n,o)}t.run(e,OU(n),o)}i(null,r)},o.runSync=function(e,t){let n,r;return o.run(e,t,i),AU("runSync","run",r),n;function i(e,t){cU(e),n=t,r=!0}},o.process=function(e,t){if(o.freeze(),TU("process",o.Parser),SU("process",o.Compiler),!t)return new Promise(n);function n(n,r){const i=OU(e);function a(e,i){e||!i?r(e):n?n(i):t(null,i)}o.run(o.parse(i),i,((e,t,n)=>{if(!e&&t&&n){const r=o.stringify(t,n);null==r||(!function(e){return"string"==typeof e||function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)}(r)?n.result=r:n.value=r),a(e,n)}else a(e)}))}n(null,t)},o.processSync=function(e){let t;o.freeze(),TU("processSync",o.Parser),SU("processSync",o.Compiler);const n=OU(e);return o.process(n,r),AU("processSync","process",t),n;function r(e){t=!0,cU(e)}},o;function o(){const t=e();let r=-1;for(;++r<n.length;)t.use(...n[r]);return t.data(yU(!0,{},i)),t}}().freeze(),CU={}.hasOwnProperty;function wU(e,t){return"function"==typeof e&&e.prototype&&(function(e){let t;for(t in e)if(CU.call(e,t))return!0;return!1}(e.prototype)||t in e.prototype)}function TU(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `Parser`")}function SU(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `Compiler`")}function kU(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _U(e){if(!xU(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function AU(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function OU(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new aU(e)}function IU(e,t){return e&&"object"==typeof e&&(e.value||(t?e.alt:"")||"children"in e&&MU(e.children,t)||Array.isArray(e)&&MU(e,t))||""}function MU(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=IU(e[r],t);return n.join("")}function NU(e,t,n,r){const i=e.length;let a,o=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),[].splice.apply(e,a);else for(n&&[].splice.apply(e,[t,n]);o<r.length;)a=r.slice(o,o+1e4),a.unshift(t,0),[].splice.apply(e,a),o+=1e4,t+=1e4}function FU(e,t){return e.length>0?(NU(e,e.length,0,t),e):t}const LU={}.hasOwnProperty;function PU(e,t){let n;for(n in t){const r=(LU.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;for(a in i){LU.call(r,a)||(r[a]=[]);const e=i[a];RU(r[a],Array.isArray(e)?e:e?[e]:[])}}}function RU(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);NU(e,0,0,r)}const DU=qU(/[A-Za-z]/),BU=qU(/\d/),zU=qU(/[\dA-Fa-f]/),HU=qU(/[\dA-Za-z]/),jU=qU(/[!-/:-@[-`{-~]/),GU=qU(/[#-'*+\--9=?A-Z^-~]/);function $U(e){return null!==e&&(e<32||127===e)}function YU(e){return null!==e&&(e<0||32===e)}function UU(e){return null!==e&&e<-2}function VU(e){return-2===e||-1===e||32===e}const WU=qU(/\s/),XU=qU(/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/);function qU(e){return function(t){return null!==t&&e.test(String.fromCharCode(t))}}function KU(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return function(r){if(VU(r))return e.enter(n),o(r);return t(r)};function o(r){return VU(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}}const QU={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),KU(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):UU(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const ZU={tokenize:function(e){const t=this,n=[];let r,i,a,o=0;return s;function s(r){if(o<n.length){const i=n[o];return t.containerState=i[1],e.attempt(i[0].continuation,l,c)(r)}return c(r)}function l(e){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let i,a=n;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){i=t.events[a][1].end;break}v(o);let s=n;for(;s<t.events.length;)t.events[s][1].end=Object.assign({},i),s++;return NU(t.events,a+1,0,t.events.slice(n)),t.events.length=s,c(e)}return s(e)}function c(i){if(o===n.length){if(!r)return p(i);if(r.currentConstruct&&r.currentConstruct.concrete)return f(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(JU,u,h)(i)}function u(e){return r&&y(),v(o),p(e)}function h(e){return t.parser.lazy[t.now().line]=o!==n.length,a=t.now().offset,f(e)}function p(n){return t.containerState={},e.attempt(JU,d,f)(n)}function d(e){return o++,n.push([t.currentConstruct,t.containerState]),p(e)}function f(n){return null===n?(r&&y(),v(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:r}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),v(0),void e.consume(n)):UU(n)?(e.consume(n),g(e.exit("chunkFlow")),o=0,t.interrupt=void 0,s):(e.consume(n),m)}function g(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<a&&(!r.events[e][1].end||r.events[e][1].end.offset>a))return;const n=t.events.length;let i,s,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){s=t.events[l][1].end;break}i=!0}for(v(o),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},s),e++;NU(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function v(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},JU={tokenize:function(e,t,n){return KU(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function eV(e){return null===e||YU(e)||WU(e)?1:XU(e)?2:void 0}function tV(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const nV={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=eV(r);let a;return function(t){return e.enter("attentionSequence"),a=t,o(t)};function o(s){if(s===a)return e.consume(s),o;const l=e.exit("attentionSequence"),c=eV(s),u=!c||2===c&&i||n.includes(s),h=!i||2===i&&c||n.includes(r);return l._open=Boolean(42===a?u:u&&(i||!h)),l._close=Boolean(42===a?h:h&&(c||!u)),t(s)}},resolveAll:function(e,t){let n,r,i,a,o,s,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const h=Object.assign({},e[n][1].end),p=Object.assign({},e[u][1].start);rV(h,-s),rV(p,s),a={type:s>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},e[n][1].end)},o={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:p},i={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},e[n][1].end=Object.assign({},a.start),e[u][1].start=Object.assign({},o.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=FU(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=FU(l,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",i,t]]),l=FU(l,tV(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=FU(l,[["exit",i,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=FU(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,NU(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function rV(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const iV={name:"autolink",tokenize:function(e,t,n){let r=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return DU(t)?(e.consume(t),a):GU(t)?l(t):n(t)}function a(e){return 43===e||45===e||46===e||HU(e)?o(e):l(e)}function o(t){return 58===t?(e.consume(t),s):(43===t||45===t||46===t||HU(t))&&r++<32?(e.consume(t),o):l(t)}function s(t){return 62===t?(e.exit("autolinkProtocol"),p(t)):null===t||32===t||60===t||$U(t)?n(t):(e.consume(t),s)}function l(t){return 64===t?(e.consume(t),r=0,c):GU(t)?(e.consume(t),l):n(t)}function c(e){return HU(e)?u(e):n(e)}function u(t){return 46===t?(e.consume(t),r=0,c):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",p(t)):h(t)}function h(t){return(45===t||HU(t))&&r++<63?(e.consume(t),45===t?h:u):n(t)}function p(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}};const aV={tokenize:function(e,t,n){return KU(e,(function(e){return null===e||UU(e)?t(e):n(e)}),"linePrefix")},partial:!0};const oV={name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return VU(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return KU(e,e.attempt(oV,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},exit:function(e){e.exit("blockQuote")}};const sV={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return jU(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const lV=document.createElement("i");function cV(e){const t="&"+e+";";lV.innerHTML=t;const n=lV.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const uV={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,a,o=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,a=HU,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=zU,c):(e.enter("characterReferenceValue"),i=7,a=BU,c(t))}function c(s){let l;return 59===s&&o?(l=e.exit("characterReferenceValue"),a!==HU||cV(r.sliceSerialize(l))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)):a(s)&&o++<i?(e.consume(s),c):n(s)}}};const hV={name:"codeFenced",tokenize:function(e,t,n){const r=this,i={tokenize:function(e,t,n){let r=0;return KU(e,i,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function i(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),a(t)}function a(t){return t===l?(e.consume(t),r++,a):r<c?n(t):(e.exit("codeFencedFenceSequence"),KU(e,o,"whitespace")(t))}function o(r){return null===r||UU(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},a={tokenize:function(e,t,n){const r=this;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a}function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},o=this.events[this.events.length-1],s=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0;let l,c=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=t,u(t)};function u(t){return t===l?(e.consume(t),c++,u):(e.exit("codeFencedFenceSequence"),c<3?n(t):KU(e,h,"whitespace")(t))}function h(t){return null===t||UU(t)?m(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||YU(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),KU(e,d,"whitespace")(t)):96===t&&t===l?n(t):(e.consume(t),p)}function d(t){return null===t||UU(t)?m(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||UU(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(t)):96===t&&t===l?n(t):(e.consume(t),f)}function m(n){return e.exit("codeFencedFence"),r.interrupt?t(n):g(n)}function g(t){return null===t?y(t):UU(t)?e.attempt(a,e.attempt(i,y,s?KU(e,g,"linePrefix",s+1):g),y)(t):(e.enter("codeFlowValue"),v(t))}function v(t){return null===t||UU(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),v)}function y(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const pV={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),KU(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?a(e):n(e)}function a(t){return null===t?s(t):UU(t)?e.attempt(dV,a,s)(t):(e.enter("codeFlowValue"),o(t))}function o(t){return null===t||UU(t)?(e.exit("codeFlowValue"),a(t)):(e.consume(t),o)}function s(n){return e.exit("codeIndented"),t(n)}}},dV={tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):UU(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):KU(e,a,"linePrefix",5)(t)}function a(e){const a=r.events[r.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):UU(e)?i(e):n(e)}},partial:!0};const fV={name:"codeText",tokenize:function(e,t,n){let r,i,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),o(t)};function o(t){return 96===t?(e.consume(t),a++,o):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):96===t?(i=e.enter("codeTextSequence"),r=0,c(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):UU(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||UU(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}},resolve:function(e){let t,n,r=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};function mV(e){const t={};let n,r,i,a,o,s,l,c=-1;for(;++c<e.length;){for(;c in t;)c=t[c];if(n=e[c],c&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[c-1][1].type&&(s=n[1]._tokenizer.events,i=0,i<s.length&&"lineEndingBlank"===s[i][1].type&&(i+=2),i<s.length&&"content"===s[i][1].type))for(;++i<s.length&&"content"!==s[i][1].type;)"chunkText"===s[i][1].type&&(s[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,gV(e,c)),c=t[c],l=!0);else if(n[1]._container){for(i=c,r=void 0;i--&&(a=e[i],"lineEnding"===a[1].type||"lineEndingBlank"===a[1].type);)"enter"===a[0]&&(r&&(e[r][1].type="lineEndingBlank"),a[1].type="lineEnding",r=i);r&&(n[1].end=Object.assign({},e[r][1].start),o=e.slice(r,c),o.unshift(n),NU(e,r,c-r+1,o))}}return!l}function gV(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const a=[],o=n._tokenizer||r.parser[n.contentType](n.start),s=o.events,l=[],c={};let u,h,p=-1,d=n,f=0,m=0;const g=[m];for(;d;){for(;e[++i][1]!==d;);a.push(i),d._tokenizer||(u=r.sliceStream(d),d.next||u.push(null),h&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=n;++p<s.length;)"exit"===s[p][0]&&"enter"===s[p-1][0]&&s[p][1].type===s[p-1][1].type&&s[p][1].start.line!==s[p][1].end.line&&(m=p+1,g.push(m),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):g.pop(),p=g.length;p--;){const t=s.slice(g[p],g[p+1]),n=a.pop();l.unshift([n,n+t.length-1]),NU(e,n,2,t)}for(p=-1;++p<l.length;)c[f+l[p][0]]=f+l[p][1],f+=l[p][1]-l[p][0]-1;return c}const vV={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):UU(t)?e.check(yV,a,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return mV(e),e}},yV={tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),KU(e,i,"linePrefix")};function i(i){if(null===i||UU(i))return n(i);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}},partial:!0};function xV(e,t,n,r,i,a,o,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(a),e.consume(t),e.exit(a),h;if(null===t||41===t||$U(t))return n(t);return e.enter(r),e.enter(o),e.enter(s),e.enter("chunkString",{contentType:"string"}),f(t)};function h(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return 62===t?(e.exit("chunkString"),e.exit(s),h(t)):null===t||60===t||UU(t)?n(t):(e.consume(t),92===t?d:p)}function d(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function f(i){return 40===i?++u>c?n(i):(e.consume(i),f):41===i?u--?(e.consume(i),f):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):null===i||YU(i)?u?n(i):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):$U(i)?n(i):(e.consume(i),92===i?m:f)}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function EV(e,t,n,r,i,a){const o=this;let s,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(a),c};function c(h){return null===h||91===h||93===h&&!s||94===h&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs||l>999?n(h):93===h?(e.exit(a),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):UU(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(t){return null===t||91===t||93===t||UU(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),s=s||!VU(t),92===t?h:u)}function h(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function bV(e,t,n,r,i,a){let o;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),o=40===t?41:t,s};function s(n){return n===o?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(a),l(n))}function l(t){return t===o?(e.exit(a),s(o)):null===t?n(t):UU(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),KU(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===o||null===t||UU(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===o||92===t?(e.consume(t),c):c(t)}}function CV(e,t){let n;return function r(i){if(UU(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(VU(i))return KU(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}function wV(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const TV={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),EV.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function a(t){return i=wV(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),CV(e,xV(e,e.attempt(SV,KU(e,o,"whitespace"),KU(e,o,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function o(a){return null===a||UU(a)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(a)):n(a)}}},SV={tokenize:function(e,t,n){return function(t){return YU(t)?CV(e,r)(t):n(t)};function r(t){return 34===t||39===t||40===t?bV(e,KU(e,i,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function i(e){return null===e||UU(e)?t(e):n(e)}},partial:!0};const kV={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return UU(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}};const _V={name:"headingAtx",tokenize:function(e,t,n){const r=this;let i=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),a(t)};function a(s){return 35===s&&i++<6?(e.consume(s),a):null===s||YU(s)?(e.exit("atxHeadingSequence"),r.interrupt?t(s):o(s)):n(s)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),s(n)):null===n||UU(n)?(e.exit("atxHeading"),t(n)):VU(n)?KU(e,o,"whitespace")(n):(e.enter("atxHeadingText"),l(n))}function s(t){return 35===t?(e.consume(t),s):(e.exit("atxHeadingSequence"),o(t))}function l(t){return null===t||35===t||YU(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),l)}},resolve:function(e,t){let n,r,i=e.length-2,a=3;"whitespace"===e[a][1].type&&(a+=2);i-2>a&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(a===i-1||i-4>a&&"whitespace"===e[i-2][1].type)&&(i-=a+1===i?2:4);i>a&&(n={type:"atxHeadingText",start:e[a][1].start,end:e[i][1].end},r={type:"chunkText",start:e[a][1].start,end:e[i][1].end,contentType:"text"},NU(e,a,i-a+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};const AV=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],OV=["pre","script","style","textarea"],IV={name:"htmlFlow",tokenize:function(e,t,n){const r=this;let i,a,o,s,l;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c};function c(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),d):63===s?(e.consume(s),i=3,r.interrupt?t:L):DU(s)?(e.consume(s),o=String.fromCharCode(s),a=!0,f):n(s)}function u(a){return 45===a?(e.consume(a),i=2,h):91===a?(e.consume(a),i=5,o="CDATA[",s=0,p):DU(a)?(e.consume(a),i=4,r.interrupt?t:L):n(a)}function h(i){return 45===i?(e.consume(i),r.interrupt?t:L):n(i)}function p(i){return i===o.charCodeAt(s++)?(e.consume(i),s===o.length?r.interrupt?t:k:p):n(i)}function d(t){return DU(t)?(e.consume(t),o=String.fromCharCode(t),f):n(t)}function f(s){return null===s||47===s||62===s||YU(s)?47!==s&&a&&OV.includes(o.toLowerCase())?(i=1,r.interrupt?t(s):k(s)):AV.includes(o.toLowerCase())?(i=6,47===s?(e.consume(s),m):r.interrupt?t(s):k(s)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):a?v(s):g(s)):45===s||HU(s)?(e.consume(s),o+=String.fromCharCode(s),f):n(s)}function m(i){return 62===i?(e.consume(i),r.interrupt?t:k):n(i)}function g(t){return VU(t)?(e.consume(t),g):T(t)}function v(t){return 47===t?(e.consume(t),T):58===t||95===t||DU(t)?(e.consume(t),y):VU(t)?(e.consume(t),v):T(t)}function y(t){return 45===t||46===t||58===t||95===t||HU(t)?(e.consume(t),y):x(t)}function x(t){return 61===t?(e.consume(t),E):VU(t)?(e.consume(t),x):v(t)}function E(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,b):VU(t)?(e.consume(t),E):(l=null,C(t))}function b(t){return null===t||UU(t)?n(t):t===l?(e.consume(t),w):(e.consume(t),b)}function C(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||YU(t)?x(t):(e.consume(t),C)}function w(e){return 47===e||62===e||VU(e)?v(e):n(e)}function T(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return VU(t)?(e.consume(t),S):null===t||UU(t)?k(t):n(t)}function k(t){return 45===t&&2===i?(e.consume(t),I):60===t&&1===i?(e.consume(t),M):62===t&&4===i?(e.consume(t),P):63===t&&3===i?(e.consume(t),L):93===t&&5===i?(e.consume(t),F):!UU(t)||6!==i&&7!==i?null===t||UU(t)?_(t):(e.consume(t),k):e.check(MV,P,_)(t)}function _(t){return e.exit("htmlFlowData"),A(t)}function A(t){return null===t?R(t):UU(t)?e.attempt({tokenize:O,partial:!0},A,R)(t):(e.enter("htmlFlowData"),k(t))}function O(e,t,n){return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}function I(t){return 45===t?(e.consume(t),L):k(t)}function M(t){return 47===t?(e.consume(t),o="",N):k(t)}function N(t){return 62===t&&OV.includes(o.toLowerCase())?(e.consume(t),P):DU(t)&&o.length<8?(e.consume(t),o+=String.fromCharCode(t),N):k(t)}function F(t){return 93===t?(e.consume(t),L):k(t)}function L(t){return 62===t?(e.consume(t),P):45===t&&2===i?(e.consume(t),L):k(t)}function P(t){return null===t||UU(t)?(e.exit("htmlFlowData"),R(t)):(e.consume(t),P)}function R(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},MV={tokenize:function(e,t,n){return function(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(aV,t,n)}},partial:!0};const NV={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,a,o,s;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l};function l(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),C):63===t?(e.consume(t),E):DU(t)?(e.consume(t),S):n(t)}function c(t){return 45===t?(e.consume(t),u):91===t?(e.consume(t),a="CDATA[",o=0,m):DU(t)?(e.consume(t),x):n(t)}function u(t){return 45===t?(e.consume(t),h):n(t)}function h(t){return null===t||62===t?n(t):45===t?(e.consume(t),p):d(t)}function p(e){return null===e||62===e?n(e):d(e)}function d(t){return null===t?n(t):45===t?(e.consume(t),f):UU(t)?(s=d,F(t)):(e.consume(t),d)}function f(t){return 45===t?(e.consume(t),P):d(t)}function m(t){return t===a.charCodeAt(o++)?(e.consume(t),o===a.length?g:m):n(t)}function g(t){return null===t?n(t):93===t?(e.consume(t),v):UU(t)?(s=g,F(t)):(e.consume(t),g)}function v(t){return 93===t?(e.consume(t),y):g(t)}function y(t){return 62===t?P(t):93===t?(e.consume(t),y):g(t)}function x(t){return null===t||62===t?P(t):UU(t)?(s=x,F(t)):(e.consume(t),x)}function E(t){return null===t?n(t):63===t?(e.consume(t),b):UU(t)?(s=E,F(t)):(e.consume(t),E)}function b(e){return 62===e?P(e):E(e)}function C(t){return DU(t)?(e.consume(t),w):n(t)}function w(t){return 45===t||HU(t)?(e.consume(t),w):T(t)}function T(t){return UU(t)?(s=T,F(t)):VU(t)?(e.consume(t),T):P(t)}function S(t){return 45===t||HU(t)?(e.consume(t),S):47===t||62===t||YU(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),P):58===t||95===t||DU(t)?(e.consume(t),_):UU(t)?(s=k,F(t)):VU(t)?(e.consume(t),k):P(t)}function _(t){return 45===t||46===t||58===t||95===t||HU(t)?(e.consume(t),_):A(t)}function A(t){return 61===t?(e.consume(t),O):UU(t)?(s=A,F(t)):VU(t)?(e.consume(t),A):k(t)}function O(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,I):UU(t)?(s=O,F(t)):VU(t)?(e.consume(t),O):(e.consume(t),i=void 0,N)}function I(t){return t===i?(e.consume(t),M):null===t?n(t):UU(t)?(s=I,F(t)):(e.consume(t),I)}function M(e){return 62===e||47===e||YU(e)?k(e):n(e)}function N(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||YU(t)?k(t):(e.consume(t),N)}function F(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),KU(e,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function L(t){return e.enter("htmlTextData"),s(t)}function P(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}}};const FV={name:"labelEnd",tokenize:function(e,t,n){const r=this;let i,a,o=r.events.length;for(;o--;)if(("labelImage"===r.events[o][1].type||"labelLink"===r.events[o][1].type)&&!r.events[o][1]._balanced){i=r.events[o][1];break}return function(t){if(!i)return n(t);return i._inactive?l(t):(a=r.parser.defined.includes(wV(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s)};function s(n){return 40===n?e.attempt(LV,t,a?t:l)(n):91===n?e.attempt(PV,t,a?e.attempt(RV,t,l):l)(n):a?t(n):l(n)}function l(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,i,a,o=e.length,s=0;for(;o--;)if(n=e[o][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[o][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[o][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=o,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=o);const l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[i-2][1].start)};return a=[["enter",l,t],["enter",c,t]],a=FU(a,e.slice(r+1,r+s+3)),a=FU(a,[["enter",u,t]]),a=FU(a,tV(t.parser.constructs.insideSpan.null,e.slice(r+s+4,i-3),t)),a=FU(a,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),a=FU(a,e.slice(i+1)),a=FU(a,[["exit",l,t]]),NU(e,r,e.length,a),e},resolveAll:function(e){let t,n=-1;for(;++n<e.length;)t=e[n][1],"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},LV={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),CV(e,r)};function r(t){return 41===t?o(t):xV(e,i,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return YU(t)?CV(e,a)(t):o(t)}function a(t){return 34===t||39===t||40===t?bV(e,CV(e,o),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):o(t)}function o(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},PV={tokenize:function(e,t,n){const r=this;return function(t){return EV.call(r,e,i,n,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(wV(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}}},RV={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const DV={name:"labelStartImage",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:FV.resolveAll};const BV={name:"labelStartLink",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:FV.resolveAll};const zV={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),KU(e,t,"linePrefix")}}};const HV={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),r=t,a(t)};function a(s){return s===r?(e.enter("thematicBreakSequence"),o(s)):VU(s)?KU(e,a,"whitespace")(s):i<3||null!==s&&!UU(s)?n(s):(e.exit("thematicBreak"),t(s))}function o(t){return t===r?(e.consume(t),i++,o):(e.exit("thematicBreakSequence"),a(t))}}};const jV={name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,o=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:BU(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(HV,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return BU(t)&&++o<10?(e.consume(t),s):(!r.interrupt||o<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(aV,r.interrupt?n:c,e.attempt(GV,h,u))}function c(e){return r.containerState.initialBlankLine=!0,a++,h(e)}function u(t){return VU(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),h):n(t)}function h(n){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(aV,i,a);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,KU(e,t,"listItemIndent",r.containerState.size+1)(n)}function a(n){return r.containerState.furtherBlankLines||!VU(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt($V,t,o)(n))}function o(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,KU(e,e.attempt(jV,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},GV={tokenize:function(e,t,n){const r=this;return KU(e,(function(e){const i=r.events[r.events.length-1];return!VU(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},$V={tokenize:function(e,t,n){const r=this;return KU(e,(function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};const YV={name:"setextUnderline",tokenize:function(e,t,n){const r=this;let i,a,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){a="paragraph"===r.events[o][1].type;break}return function(t){if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),i=t,s(t);return n(t)};function s(t){return t===i?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),KU(e,l,"lineSuffix")(t))}function l(r){return null===r||UU(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,i,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),i||"definition"!==e[a][1].type||(i=a);const o={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=o;return e.push(["exit",o,t]),e}};const UV={tokenize:function(e){const t=this,n=e.attempt(aV,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,KU(e,e.attempt(this.parser.constructs.flow,r,e.attempt(vV,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const VV={resolveAll:KV()},WV=qV("string"),XV=qV("text");function qV(e){return{tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,a,o);return a;function a(e){return l(e)?i(e):o(e)}function o(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:KV("text"===e?QV:void 0)}}function KV(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function QV(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let a,o=i.length,s=-1,l=0;for(;o--;){const e=i[o];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)a=!0,l++;else if(-1!==e){o++;break}}if(l){const i={type:n===e.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+o,_bufferIndex:o?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}function ZV(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},a=[];let o=[],s=[];const l={consume:function(e){UU(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,y()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=p(),c.events.push(["enter",n,c]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=p(),c.events.push(["exit",t,c]),t},attempt:g((function(e,t){v(e,t.from)})),check:g(m),interrupt:g(m,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if("string"==typeof a)o=a;else switch(a){case-5:o="\r";break;case-4:o="\n";break;case-3:o="\r\n";break;case-2:o=t?" ":"\t";break;case-1:if(!t&&i)continue;o=" ";break;default:o=String.fromCharCode(a)}i=-2===a,r.push(o)}return r.join("")}(h(e),t)},now:p,defineSkip:function(e){i[e.line]=e.column,y()},write:function(e){if(o=FU(o,e),d(),null!==o[o.length-1])return[];return v(t,0),c.events=tV(a,c.events,c),c.events}};let u=t.tokenize.call(c,l);return t.resolveAll&&a.push(t),c;function h(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;n===i?o=[e[n].slice(r,a)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),a>0&&o.push(e[i].slice(0,a)));return o}(o,e)}function p(){return Object.assign({},r)}function d(){let e;for(;r._index<o.length;){const t=o[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)f(t.charCodeAt(r._bufferIndex));else f(t)}}function f(e){u=u(e)}function m(e,t){t.restore()}function g(e,t){return function(n,i,a){let o,u,h,d;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function f(e){return o=e,u=0,0===e.length?a:m(e[u])}function m(e){return function(n){d=function(){const e=p(),t=c.previous,n=c.currentConstruct,i=c.events.length,a=Array.from(s);return{restore:o,from:i};function o(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=i,s=a,y()}}(),h=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return v();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,v)(n)}}function g(t){return e(h,d),i}function v(e){return d.restore(),++u<o.length?m(o[u]):a}}}function v(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&NU(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function y(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}const JV={42:jV,43:jV,45:jV,48:jV,49:jV,50:jV,51:jV,52:jV,53:jV,54:jV,55:jV,56:jV,57:jV,62:oV},eW={91:TV},tW={[-2]:pV,[-1]:pV,32:pV},nW={35:_V,42:HV,45:[YV,HV],60:IV,61:YV,95:HV,96:hV,126:hV},rW={38:uV,92:sV},iW={[-5]:zV,[-4]:zV,[-3]:zV,33:DV,38:uV,42:nV,60:[iV,NV],91:BV,92:[kV,sV],93:FV,95:nV,96:fV},aW={null:[nV,VV]};var oW=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",document:JV,contentInitial:eW,flowInitial:tW,flow:nW,string:rW,text:iW,insideSpan:aW,attentionMarkers:{null:[42,95]},disable:{null:[]}});function sW(e={}){const t={defined:[],lazy:{},constructs:function(e){const t={};let n=-1;for(;++n<e.length;)PU(t,e[n]);return t}([oW].concat(e.extensions||[])),content:n(QU),document:n(ZU),flow:n(UV),string:n(WV),text:n(XV)};return t;function n(e){return function(n){return ZV(t,e,n)}}}const lW=/[\0\t\n\r]/g;function cW(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535==(65535&n)||65534==(65535&n)||n>1114111?"�":String.fromCharCode(n)}const uW=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function hW(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return cW(n.slice(t?2:1),t?16:10)}return cV(n)||e}const pW={}.hasOwnProperty,dW=function(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e={}){const t=fW({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(re),autolinkProtocol:A,autolinkEmail:A,atxHeading:l(J),blockQuote:l(X),characterEscape:A,characterReference:A,codeFenced:l(q),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(q,c),codeText:l(K,c),codeTextData:A,data:A,codeFlowValue:A,definition:l(Q),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l(Z),hardBreakEscape:l(ee),hardBreakTrailing:l(ee),htmlFlow:l(te,c),htmlFlowData:A,htmlText:l(te,c),htmlTextData:A,image:l(ne),label:c,link:l(re),listItem:l(ae),listItemValue:m,listOrdered:l(ie,f),listUnordered:l(ie),paragraph:l(oe),reference:G,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(J),strong:l(se),thematicBreak:l(ce)},exit:{atxHeading:h(),atxHeadingSequence:T,autolink:h(),autolinkEmail:W,autolinkProtocol:V,blockQuote:h(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:Y,characterReferenceMarkerNumeric:Y,characterReferenceValue:U,codeFenced:h(x),codeFencedFence:y,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:O,codeIndented:h(E),codeText:h(L),codeTextData:O,data:O,definition:h(),definitionDestinationString:w,definitionLabelString:b,definitionTitleString:C,emphasis:h(),hardBreakEscape:h(M),hardBreakTrailing:h(M),htmlFlow:h(N),htmlFlowData:O,htmlText:h(F),htmlTextData:O,image:h(R),label:B,labelText:D,lineEnding:I,link:h(P),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:$,resourceDestinationString:z,resourceTitleString:H,resource:j,setextHeading:h(_),setextHeadingLineSequence:k,setextHeadingText:S,strong:h(),thematicBreak:h()}},e.mdastExtensions||[]),n={};return r;function r(e){let n={type:"root",children:[]};const r=[],l=[],h={stack:[n],tokenStack:r,config:t,enter:u,exit:p,buffer:c,resume:d,setData:a,getData:o};let f=-1;for(;++f<e.length;)if("listOrdered"===e[f][1].type||"listUnordered"===e[f][1].type)if("enter"===e[f][0])l.push(f);else{f=i(e,l.pop(),f)}for(f=-1;++f<e.length;){const n=t[e[f][0]];pW.call(n,e[f][1].type)&&n[e[f][1].type].call(Object.assign({sliceSerialize:e[f][2].sliceSerialize},h),e[f][1])}if(r.length>0){const e=r[r.length-1];(e[1]||gW).call(h,void 0,e[0])}for(n.position={start:s(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:s(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},f=-1;++f<t.transforms.length;)n=t.transforms[f](n)||n;return n}function i(e,t,n){let r,i,a,o,s=t-1,l=-1,c=!1;for(;++s<=n;){const t=e[s];if("listUnordered"===t[1].type||"listOrdered"===t[1].type||"blockQuote"===t[1].type?("enter"===t[0]?l++:l--,o=void 0):"lineEndingBlank"===t[1].type?"enter"===t[0]&&(!r||o||l||a||(a=s),o=void 0):"linePrefix"===t[1].type||"listItemValue"===t[1].type||"listItemMarker"===t[1].type||"listItemPrefix"===t[1].type||"listItemPrefixWhitespace"===t[1].type||(o=void 0),!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let o=s;for(i=void 0;o--;){const t=e[o];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=o}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}a&&(!i||a<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",r,t[2]]),s++,n++}"listItemPrefix"===t[1].type&&(r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start)},e.splice(s,0,["enter",r,t[2]]),s++,n++,a=void 0,o=!0)}}return e[t][1]._spread=c,n}function a(e,t){n[e]=t}function o(e){return n[e]}function s(e){return{line:e.line,column:e.column,offset:e.offset}}function l(e,t){return n;function n(n){u.call(this,e(n),n),t&&t.call(this,n)}}function c(){this.stack.push({type:"fragment",children:[]})}function u(e,t,n){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:s(t.start)},e}function h(e){return t;function t(t){e&&e.call(this,t),p.call(this,t)}}function p(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+XY({start:e.start,end:e.end})+"): it’s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||gW).call(this,e,r[0])}return n.position.end=s(e.end),n}function d(){return function(e,t){var{includeImageAlt:n=!0}=t||{};return IU(e,n)}(this.stack.pop())}function f(){a("expectingFirstListItemValue",!0)}function m(e){if(o("expectingFirstListItemValue")){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),a("expectingFirstListItemValue")}}function g(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function v(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function y(){o("flowCodeInside")||(this.buffer(),a("flowCodeInside",!0))}function x(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),a("flowCodeInside")}function E(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function b(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=wV(this.sliceSerialize(e)).toLowerCase()}function C(){const e=this.resume();this.stack[this.stack.length-1].title=e}function w(){const e=this.resume();this.stack[this.stack.length-1].url=e}function T(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function S(){a("setextHeadingSlurpLineEnding",!0)}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function _(){a("setextHeadingSlurpLineEnding")}function A(e){const t=this.stack[this.stack.length-1];let n=t.children[t.children.length-1];n&&"text"===n.type||(n=le(),n.position={start:s(e.start)},t.children.push(n)),this.stack.push(n)}function O(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=s(e.end)}function I(e){const n=this.stack[this.stack.length-1];if(o("atHardBreak")){return n.children[n.children.length-1].position.end=s(e.end),void a("atHardBreak")}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(n.type)&&(A.call(this,e),O.call(this,e))}function M(){a("atHardBreak",!0)}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function F(){const e=this.resume();this.stack[this.stack.length-1].value=e}function L(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.stack[this.stack.length-1];o("inReference")?(e.type+="Reference",e.referenceType=o("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),a("referenceType")}function R(){const e=this.stack[this.stack.length-1];o("inReference")?(e.type+="Reference",e.referenceType=o("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),a("referenceType")}function D(e){const t=this.stack[this.stack.length-2],n=this.sliceSerialize(e);t.label=function(e){return e.replace(uW,hW)}(n),t.identifier=wV(n).toLowerCase()}function B(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];a("inReference",!0),"link"===n.type?n.children=e.children:n.alt=t}function z(){const e=this.resume();this.stack[this.stack.length-1].url=e}function H(){const e=this.resume();this.stack[this.stack.length-1].title=e}function j(){a("inReference")}function G(){a("referenceType","collapsed")}function $(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=wV(this.sliceSerialize(e)).toLowerCase(),a("referenceType","full")}function Y(e){a("characterReferenceType",e.type)}function U(e){const t=this.sliceSerialize(e),n=o("characterReferenceType");let r;n?(r=cW(t,"characterReferenceMarkerNumeric"===n?10:16),a("characterReferenceType")):r=cV(t);const i=this.stack.pop();i.value+=r,i.position.end=s(e.end)}function V(e){O.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){O.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function X(){return{type:"blockquote",children:[]}}function q(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Z(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:void 0,children:[]}}function ee(){return{type:"break"}}function te(){return{type:"html",value:""}}function ne(){return{type:"image",title:null,url:"",alt:null}}function re(){return{type:"link",title:null,url:"",children:[]}}function ie(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ae(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function oe(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function le(){return{type:"text",value:""}}function ce(){return{type:"thematicBreak"}}}(n)(function(e){for(;!mV(e););return e}(sW(n).document().write(function(){let e,t=1,n="",r=!0;return function(i,a,o){const s=[];let l,c,u,h,p;for(i=n+i.toString(a),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(lW.lastIndex=u,l=lW.exec(i),h=l&&void 0!==l.index?l.index:i.length,p=i.charCodeAt(h),!l){n=i.slice(u);break}if(10===p&&u===h&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),u<h&&(s.push(i.slice(u,h)),t+=h-u),p){case 0:s.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),s.push(-2);t++<c;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}u=h+1}return o&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))};function fW(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?fW(e,r):mW(e,r)}return e}function mW(e,t){let n;for(n in t)if(pW.call(t,n)){const r="canContainEols"===n||"transforms"===n,i=(pW.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),a=t[n];a&&(r?e[n]=[...i,...a]:Object.assign(i,a))}}function gW(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+XY({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+XY({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+XY({start:t.start,end:t.end})+") is still open")}function vW(e){Object.assign(this,{Parser:t=>{const n=this.data("settings");return dW(t,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var yW=function(e,t,n){var r={type:String(e)};return null!=n||"string"!=typeof t&&!Array.isArray(t)?Object.assign(r,t):n=t,Array.isArray(n)?r.children=n:null!=n&&(r.value=String(n)),r};const xW={}.hasOwnProperty;function EW(e,t){const n=t.data||{};return"value"in t&&!(xW.call(n,"hName")||xW.call(n,"hProperties")||xW.call(n,"hChildren"))?e.augment(t,yW("text",t.value)):e(t,"div",wW(e,t))}function bW(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return i=xW.call(e.handlers,r)?e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?CW:e.unknownHandler,("function"==typeof i?i:EW)(e,t,n)}function CW(e,t){return"children"in t?l(s({},t),{children:wW(e,t)}):t}function wW(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const a=bW(e,r[i],t);if(a){if(i&&"break"===r[i-1].type&&(Array.isArray(a)||"text"!==a.type||(a.value=a.value.replace(/^\s+/,"")),!Array.isArray(a)&&"element"===a.type)){const e=a.children[0];e&&"text"===e.type&&(e.value=e.value.replace(/^\s+/,""))}Array.isArray(a)?n.push(...a):n.push(a)}}}return n}const TW=function(e){if(null==e)return kW;if("string"==typeof e)return function(e){return SW(t);function t(t){return t&&t.type===e}}(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=TW(e[n]);return SW(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].call(this,...e))return!0;return!1}}(e):function(e){return SW(t);function t(t){let n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return SW(e);throw new Error("Expected function, string, or object as test")};function SW(e){return function(...t){return Boolean(e.call(this,...t))}}function kW(){return!0}const _W=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null);const i=TW(t),a=r?-1:1;!function e(o,s,l){const c="object"==typeof o&&null!==o?o:{};let u;"string"==typeof c.type&&(u="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0,Object.defineProperty(h,"name",{value:"node ("+c.type+(u?"<"+u+">":"")+")"}));return h;function h(){let c,u,h,p=[];if((!t||i(o,s,l[l.length-1]||null))&&(p=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)),false===p[0]))return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+a,h=l.concat(o);u>-1&&u<o.children.length;){if(c=e(o.children[u],u,h)(),false===c[0])return c;u="number"==typeof c[1]?c[1]:u+a}return p}}(e,null,[])()};const AW=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),_W(e,t,(function(e,t){const r=t[t.length-1];return n(e,r?r.children.indexOf(e):null,r)}),r)};var OW=MW("start"),IW=MW("end");function MW(e){return function(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}const NW=function(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null);var i=TW(t),a=r?-1:1;!function e(o,s,l){var c,u="object"==typeof o&&null!==o?o:{};"string"==typeof u.type&&(c="string"==typeof u.tagName?u.tagName:"string"==typeof u.name?u.name:void 0,Object.defineProperty(h,"name",{value:"node ("+u.type+(c?"<"+c+">":"")+")"}));return h;function h(){var c,u,h,p=[];if((!t||i(o,s,l[l.length-1]||null))&&false===(p=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)))[0])return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+a,h=l.concat(o);u>-1&&u<o.children.length;){if(false===(c=e(o.children[u],u,h)())[0])return c;u="number"==typeof c[1]?c[1]:u+a}return p}}(e,null,[])()};const FW={}.hasOwnProperty;function LW(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");var n,r,i;return r=function(e){const n=PW(e.identifier);n&&!FW.call(t,n)&&(t[n]=e)},"function"==typeof(n="definition")&&"function"!=typeof r&&(i=r,r=n,n=null),NW(e,n,(function(e,t){var n=t[t.length-1];return r(e,n?n.children.indexOf(e):null,n)}),i),function(e){const n=PW(e);return n&&FW.call(t,n)?t[n]:null}}function PW(e){return String(e||"").toUpperCase()}function RW(e,t){return e(t,"hr")}function DW(e,t){const n=[];let r=-1;for(t&&n.push(yW("text","\n"));++r<e.length;)r&&n.push(yW("text","\n")),n.push(e[r]);return t&&e.length>0&&n.push(yW("text","\n")),n}function BW(e,t){const n={},r=t.ordered?"ol":"ul",i=wW(e,t);let a=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++a<i.length;){const e=i[a];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,DW(i,!0))}function zW(e,t){const n=e.footnoteOrder,r=String(t.identifier),i=n.indexOf(r),a=String(-1===i?n.push(r):i+1);return e(t,"a",{href:"#fn"+a,className:["footnote-ref"],id:"fnref"+a,role:"doc-noteref"},[e(t.position,"sup",[yW("text",a)])])}var HW={};function jW(e,t,n){var r,i,a,o,s,l="";for("string"!=typeof t&&(n=t,t=jW.defaultChars),void 0===n&&(n=!0),s=function(e){var t,n,r=HW[e];if(r)return r;for(r=HW[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}(t),r=0,i=e.length;r<i;r++)if(a=e.charCodeAt(r),n&&37===a&&r+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3)))l+=e.slice(r,r+3),r+=2;else if(a<128)l+=s[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&r+1<i&&(o=e.charCodeAt(r+1))>=56320&&o<=57343){l+=encodeURIComponent(e[r]+e[r+1]),r++;continue}l+="%EF%BF%BD"}else l+=encodeURIComponent(e[r]);return l}jW.defaultChars=";/?:@&=+$,-_.!~*'()#",jW.componentChars="-_.!~*'()";var GW=jW;function $W(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return yW("text","!["+t.alt+r);const i=wW(e,t),a=i[0];a&&"text"===a.type?a.value="["+a.value:i.unshift(yW("text","["));const o=i[i.length-1];return o&&"text"===o.type?o.value+=r:i.push(yW("text",r)),i}function YW(e){const t=e.spread;return null==t?e.children.length>1:t}const UW={blockquote:function(e,t){return e(t,"blockquote",DW(wW(e,t),!0))},break:function(e,t){return[e(t,"br"),yW("text","\n")]},code:function(e,t){const n=t.value?t.value+"\n":"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const a=e(t,"code",i,[yW("text",n)]);return t.meta&&(a.data={meta:t.meta}),e(t.position,"pre",[a])},delete:function(e,t){return e(t,"del",wW(e,t))},emphasis:function(e,t){return e(t,"em",wW(e,t))},footnoteReference:zW,footnote:function(e,t){const n=e.footnoteById,r=e.footnoteOrder;let i=1;for(;i in n;)i++;const a=String(i);return r.push(a),n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},zW(e,{type:"footnoteReference",identifier:a,position:t.position})},heading:function(e,t){return e(t,"h"+t.depth,wW(e,t))},html:function(e,t){return e.dangerous?e.augment(t,yW("raw",t.value)):null},imageReference:function(e,t){const n=e.definition(t.identifier);if(!n)return $W(e,t);const r={src:GW(n.url||""),alt:t.alt};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"img",r)},image:function(e,t){const n={src:GW(t.url),alt:t.alt};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"img",n)},inlineCode:function(e,t){return e(t,"code",[yW("text",t.value.replace(/\r?\n|\r/g," "))])},linkReference:function(e,t){const n=e.definition(t.identifier);if(!n)return $W(e,t);const r={href:GW(n.url||"")};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"a",r,wW(e,t))},link:function(e,t){const n={href:GW(t.url)};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"a",n,wW(e,t))},listItem:function(e,t,n){const r=wW(e,t),i=n?function(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=YW(n[r]);return Boolean(t)}(n):YW(t),a={},o=[];if("boolean"==typeof t.checked){let n;r[0]&&"element"===r[0].type&&"p"===r[0].tagName?n=r[0]:(n=e(null,"p",[]),r.unshift(n)),n.children.length>0&&n.children.unshift(yW("text"," ")),n.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&o.push(yW("text","\n")),"element"!==e.type||"p"!==e.tagName||i?o.push(e):o.push(...e.children)}const l=r[r.length-1];return!l||!i&&"tagName"in l&&"p"===l.tagName||o.push(yW("text","\n")),e(t,"li",a,o)},list:BW,paragraph:function(e,t){return e(t,"p",wW(e,t))},root:function(e,t){return e.augment(t,yW("root",DW(wW(e,t))))},strong:function(e,t){return e(t,"strong",wW(e,t))},table:function(e,t){const n=t.children;let r=-1;const i=t.align||[],a=[];for(;++r<n.length;){const o=n[r].children,s=0===r?"th":"td";let l=t.align?i.length:o.length;const c=[];for(;l--;){const t=o[l];c[l]=e(t,s,{align:i[l]},t?wW(e,t):[])}a[r]=e(n[r],"tr",DW(c,!0))}return e(t,"table",DW([e(a[0].position,"thead",DW([a[0]],!0))].concat(a[1]?e({start:OW(a[1]),end:IW(a[a.length-1])},"tbody",DW(a.slice(1),!0)):[]),!0))},text:function(e,t){return e.augment(t,yW("text",String(t.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))},thematicBreak:RW,toml:VW,yaml:VW,definition:VW,footnoteDefinition:VW};function VW(){return null}const WW={}.hasOwnProperty;function XW(e,t){const n=function(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.definition=LW(e),o.footnoteById=i,o.footnoteOrder=[],o.augment=a,o.handlers=s(s({},UW),n.handlers),o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,AW(e,"footnoteDefinition",(e=>{const t=String(e.identifier).toUpperCase();WW.call(i,t)||(i[t]=e)})),o;function a(e,t){if(e&&"data"in e&&e.data){const n=e.data;n.hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=s(s({},t.properties),n.hProperties)),"children"in t&&t.children&&n.hChildren&&(t.children=n.hChildren)}if(e){const r="type"in e?e:{position:e};(n=r)&&n.position&&n.position.start&&n.position.start.line&&n.position.start.column&&n.position.end&&n.position.end.line&&n.position.end.column&&(t.position={start:OW(r),end:IW(r)})}var n;return t}function o(e,t,n,r){return Array.isArray(n)&&(r=n,n={}),a(e,{type:"element",tagName:t,properties:n||{},children:r||[]})}}(e,t),r=bW(n,e,null),i=function(e){const t=e.footnoteById,n=e.footnoteOrder;let r=-1;const i=[];for(;++r<n.length;){const e=t[n[r].toUpperCase()];if(!e)continue;const a=String(r+1),o=[...e.children],s={type:"link",url:"#fnref"+a,data:{hProperties:{className:["footnote-back"],role:"doc-backlink"}},children:[{type:"text",value:"↩"}]},l=o[o.length-1];l&&"paragraph"===l.type?l.children.push(s):o.push(s),i.push({type:"listItem",data:{hProperties:{id:"fn"+a,role:"doc-endnote"}},children:o,position:e.position})}return 0===i.length?null:e(null,"section",{className:["footnotes"],role:"doc-endnotes"},DW([RW(e),BW(e,{type:"list",ordered:!0,children:i})],!0))}(n);return i&&r.children.push(yW("text","\n"),i),Array.isArray(r)?{type:"root",children:r}:r}const qW=function(e,t){return e&&"run"in e?function(e,t){return(n,r,i)=>{e.run(XW(n,t),r,(e=>{i(e)}))}}(e,t):function(e){return t=>XW(t,e)}(e)};class KW{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function QW(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new KW(n,r,t)}function ZW(e){return e.toLowerCase()}KW.prototype.property={},KW.prototype.normal={},KW.prototype.space=null;class JW{constructor(e,t){this.property=e,this.attribute=t}}JW.prototype.space=null,JW.prototype.boolean=!1,JW.prototype.booleanish=!1,JW.prototype.overloadedBoolean=!1,JW.prototype.number=!1,JW.prototype.commaSeparated=!1,JW.prototype.spaceSeparated=!1,JW.prototype.commaOrSpaceSeparated=!1,JW.prototype.mustUseProperty=!1,JW.prototype.defined=!1;let eX=0;const tX=lX(),nX=lX(),rX=lX(),iX=lX(),aX=lX(),oX=lX(),sX=lX();function lX(){return 2**++eX}var cX=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",boolean:tX,booleanish:nX,overloadedBoolean:rX,number:iX,spaceSeparated:aX,commaSeparated:oX,commaOrSpaceSeparated:sX});const uX=Object.keys(cX);class hX extends JW{constructor(e,t,n,r){let i=-1;if(super(e,t),pX(this,"space",r),"number"==typeof n)for(;++i<uX.length;){const e=uX[i];pX(this,uX[i],(n&cX[e])===cX[e])}}}function pX(e,t,n){n&&(e[t]=n)}hX.prototype.defined=!0;const dX={}.hasOwnProperty;function fX(e){const t={},n={};let r;for(r in e.properties)if(dX.call(e.properties,r)){const i=e.properties[r],a=new hX(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[ZW(r)]=r,n[ZW(a.attribute)]=r}return new KW(t,n,e.space)}const mX=fX({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),gX=fX({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function vX(e,t){return t in e?e[t]:t}function yX(e,t){return vX(e,t.toLowerCase())}const xX=fX({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:yX,properties:{xmlns:null,xmlnsXLink:null}}),EX=fX({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:nX,ariaAutoComplete:null,ariaBusy:nX,ariaChecked:nX,ariaColCount:iX,ariaColIndex:iX,ariaColSpan:iX,ariaControls:aX,ariaCurrent:null,ariaDescribedBy:aX,ariaDetails:null,ariaDisabled:nX,ariaDropEffect:aX,ariaErrorMessage:null,ariaExpanded:nX,ariaFlowTo:aX,ariaGrabbed:nX,ariaHasPopup:null,ariaHidden:nX,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:aX,ariaLevel:iX,ariaLive:null,ariaModal:nX,ariaMultiLine:nX,ariaMultiSelectable:nX,ariaOrientation:null,ariaOwns:aX,ariaPlaceholder:null,ariaPosInSet:iX,ariaPressed:nX,ariaReadOnly:nX,ariaRelevant:null,ariaRequired:nX,ariaRoleDescription:aX,ariaRowCount:iX,ariaRowIndex:iX,ariaRowSpan:iX,ariaSelected:nX,ariaSetSize:iX,ariaSort:null,ariaValueMax:iX,ariaValueMin:iX,ariaValueNow:iX,ariaValueText:null,role:null}}),bX=fX({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:yX,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:oX,acceptCharset:aX,accessKey:aX,action:null,allow:null,allowFullScreen:tX,allowPaymentRequest:tX,allowUserMedia:tX,alt:null,as:null,async:tX,autoCapitalize:null,autoComplete:aX,autoFocus:tX,autoPlay:tX,capture:tX,charSet:null,checked:tX,cite:null,className:aX,cols:iX,colSpan:null,content:null,contentEditable:nX,controls:tX,controlsList:aX,coords:iX|oX,crossOrigin:null,data:null,dateTime:null,decoding:null,default:tX,defer:tX,dir:null,dirName:null,disabled:tX,download:rX,draggable:nX,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:tX,formTarget:null,headers:aX,height:iX,hidden:tX,high:iX,href:null,hrefLang:null,htmlFor:aX,httpEquiv:aX,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:tX,itemId:null,itemProp:aX,itemRef:aX,itemScope:tX,itemType:aX,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:tX,low:iX,manifest:null,max:null,maxLength:iX,media:null,method:null,min:null,minLength:iX,multiple:tX,muted:tX,name:null,nonce:null,noModule:tX,noValidate:tX,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:tX,optimum:iX,pattern:null,ping:aX,placeholder:null,playsInline:tX,poster:null,preload:null,readOnly:tX,referrerPolicy:null,rel:aX,required:tX,reversed:tX,rows:iX,rowSpan:iX,sandbox:aX,scope:null,scoped:tX,seamless:tX,selected:tX,shape:null,size:iX,sizes:null,slot:null,span:iX,spellCheck:nX,src:null,srcDoc:null,srcLang:null,srcSet:null,start:iX,step:null,style:null,tabIndex:iX,target:null,title:null,translate:null,type:null,typeMustMatch:tX,useMap:null,value:nX,width:iX,wrap:null,align:null,aLink:null,archive:aX,axis:null,background:null,bgColor:null,border:iX,borderColor:null,bottomMargin:iX,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:tX,declare:tX,event:null,face:null,frame:null,frameBorder:null,hSpace:iX,leftMargin:iX,link:null,longDesc:null,lowSrc:null,marginHeight:iX,marginWidth:iX,noResize:tX,noHref:tX,noShade:tX,noWrap:tX,object:null,profile:null,prompt:null,rev:null,rightMargin:iX,rules:null,scheme:null,scrolling:nX,standby:null,summary:null,text:null,topMargin:iX,valueType:null,version:null,vAlign:null,vLink:null,vSpace:iX,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:tX,disableRemotePlayback:tX,prefix:null,property:null,results:iX,security:null,unselectable:null}}),CX=fX({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:vX,properties:{about:sX,accentHeight:iX,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:iX,amplitude:iX,arabicForm:null,ascent:iX,attributeName:null,attributeType:null,azimuth:iX,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:iX,by:null,calcMode:null,capHeight:iX,className:aX,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:iX,diffuseConstant:iX,direction:null,display:null,dur:null,divisor:iX,dominantBaseline:null,download:tX,dx:null,dy:null,edgeMode:null,editable:null,elevation:iX,enableBackground:null,end:null,event:null,exponent:iX,externalResourcesRequired:null,fill:null,fillOpacity:iX,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:oX,g2:oX,glyphName:oX,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:iX,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:iX,horizOriginX:iX,horizOriginY:iX,id:null,ideographic:iX,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:iX,k:iX,k1:iX,k2:iX,k3:iX,k4:iX,kernelMatrix:sX,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:iX,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:iX,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:iX,overlineThickness:iX,paintOrder:null,panose1:null,path:null,pathLength:iX,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:aX,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:iX,pointsAtY:iX,pointsAtZ:iX,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:sX,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:sX,rev:sX,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:sX,requiredFeatures:sX,requiredFonts:sX,requiredFormats:sX,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:iX,specularExponent:iX,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:iX,strikethroughThickness:iX,string:null,stroke:null,strokeDashArray:sX,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:iX,strokeOpacity:iX,strokeWidth:null,style:null,surfaceScale:iX,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:sX,tabIndex:iX,tableValues:null,target:null,targetX:iX,targetY:iX,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:sX,to:null,transform:null,u1:null,u2:null,underlinePosition:iX,underlineThickness:iX,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:iX,values:null,vAlphabetic:iX,vMathematical:iX,vectorEffect:null,vHanging:iX,vIdeographic:iX,version:null,vertAdvY:iX,vertOriginX:iX,vertOriginY:iX,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:iX,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),wX=/^data[-\w.:]+$/i,TX=/-[a-z]/g,SX=/[A-Z]/g;function kX(e,t){const n=ZW(t);let r=t,i=JW;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&wX.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(TX,AX);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!TX.test(e)){let n=e.replace(SX,_X);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=hX}return new i(r,t)}function _X(e){return"-"+e.toLowerCase()}function AX(e){return e.charAt(1).toUpperCase()}const OX={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},IX=QW([gX,mX,xX,EX,bX],"html"),MX=QW([gX,mX,xX,EX,CX],"svg");function NX(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{AW(t,"element",((t,n,r)=>{const i=r;let a;if(e.allowedElements?a=!e.allowedElements.includes(t.tagName):e.disallowedElements&&(a=e.disallowedElements.includes(t.tagName)),!a&&e.allowElement&&"number"==typeof n&&(a=!e.allowElement(t,n,i)),a&&"number"==typeof n)return e.unwrapDisallowed&&t.children?i.children.splice(n,1,...t.children):i.children.splice(n,1),n}))}}var FX={exports:{}},LX={},PX=60103,RX=60106,DX=60107,BX=60108,zX=60114,HX=60109,jX=60110,GX=60112,$X=60113,YX=60120,UX=60115,VX=60116,WX=60121,XX=60122,qX=60117,KX=60129,QX=60131;if("function"==typeof Symbol&&Symbol.for){var ZX=Symbol.for;PX=ZX("react.element"),RX=ZX("react.portal"),DX=ZX("react.fragment"),BX=ZX("react.strict_mode"),zX=ZX("react.profiler"),HX=ZX("react.provider"),jX=ZX("react.context"),GX=ZX("react.forward_ref"),$X=ZX("react.suspense"),YX=ZX("react.suspense_list"),UX=ZX("react.memo"),VX=ZX("react.lazy"),WX=ZX("react.block"),XX=ZX("react.server.block"),qX=ZX("react.fundamental"),KX=ZX("react.debug_trace_mode"),QX=ZX("react.legacy_hidden")}function JX(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case PX:switch(e=e.type){case DX:case zX:case BX:case $X:case YX:return e;default:switch(e=e&&e.$$typeof){case jX:case GX:case VX:case UX:case HX:return e;default:return t}}case RX:return t}}}var eq=HX,tq=PX,nq=GX,rq=DX,iq=VX,aq=UX,oq=RX,sq=zX,lq=BX,cq=$X;LX.ContextConsumer=jX,LX.ContextProvider=eq,LX.Element=tq,LX.ForwardRef=nq,LX.Fragment=rq,LX.Lazy=iq,LX.Memo=aq,LX.Portal=oq,LX.Profiler=sq,LX.StrictMode=lq,LX.Suspense=cq,LX.isAsyncMode=function(){return!1},LX.isConcurrentMode=function(){return!1},LX.isContextConsumer=function(e){return JX(e)===jX},LX.isContextProvider=function(e){return JX(e)===HX},LX.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===PX},LX.isForwardRef=function(e){return JX(e)===GX},LX.isFragment=function(e){return JX(e)===DX},LX.isLazy=function(e){return JX(e)===VX},LX.isMemo=function(e){return JX(e)===UX},LX.isPortal=function(e){return JX(e)===RX},LX.isProfiler=function(e){return JX(e)===zX},LX.isStrictMode=function(e){return JX(e)===BX},LX.isSuspense=function(e){return JX(e)===$X},LX.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===DX||e===zX||e===KX||e===BX||e===$X||e===YX||e===QX||"object"==typeof e&&null!==e&&(e.$$typeof===VX||e.$$typeof===UX||e.$$typeof===HX||e.$$typeof===jX||e.$$typeof===GX||e.$$typeof===qX||e.$$typeof===WX||e[0]===XX)},LX.typeOf=JX,FX.exports=LX;var uq=FX.exports;function hq(e){var t=e&&"object"==typeof e&&"text"===e.type?e.value||"":e;return"string"==typeof t&&""===t.replace(/[ \t\n\f\r]/g,"")}function pq(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function dq(e){return e.join(" ").trim()}function fq(e){for(var t,n,r=[],i=String(e||""),a=i.indexOf(","),o=0;!t;)-1===a&&(a=i.length,t=!0),!(n=i.slice(o,a).trim())&&t||r.push(n),o=a+1,a=i.indexOf(",",o);return r}function mq(e,t){var n=t||{};return""===e[e.length-1]&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}var gq=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,vq=/\n/g,yq=/^\s*/,xq=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Eq=/^:\s*/,bq=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Cq=/^[;\s]*/,wq=/^\s+|\s+$/g;function Tq(e){return e?e.replace(wq,""):""}var Sq=function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(e){var t=e.match(vq);t&&(n+=t.length);var i=e.lastIndexOf("\n");r=~i?e.length-i:r+e.length}function a(){var e={line:n,column:r};return function(t){return t.position=new o(e),c(),t}}function o(e){this.start=e,this.end={line:n,column:r},this.source=t.source}function s(i){var a=new Error(t.source+":"+n+":"+r+": "+i);if(a.reason=i,a.filename=t.source,a.line=n,a.column=r,a.source=e,!t.silent)throw a}function l(t){var n=t.exec(e);if(n){var r=n[0];return i(r),e=e.slice(r.length),n}}function c(){l(yq)}function u(e){var t;for(e=e||[];t=h();)!1!==t&&e.push(t);return e}function h(){var t=a();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;""!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return s("End of comment missing");var o=e.slice(2,n-2);return r+=2,i(o),e=e.slice(n),r+=2,t({type:"comment",comment:o})}}function p(){var e=a(),t=l(xq);if(t){if(h(),!l(Eq))return s("property missing ':'");var n=l(bq),r=e({type:"declaration",property:Tq(t[0].replace(gq,"")),value:n?Tq(n[0].replace(gq,"")):""});return l(Cq),r}}return o.prototype.content=e,c(),function(){var e,t=[];for(u(t);e=p();)!1!==e&&(t.push(e),u(t));return t}()};var kq=function(e,t){var n,r=null;if(!e||"string"!=typeof e)return r;for(var i,a,o=Sq(e),s="function"==typeof t,l=0,c=o.length;l<c;l++)i=(n=o[l]).property,a=n.value,s?t(i,a,n):a&&(r||(r={}),r[i]=a);return r};const _q={}.hasOwnProperty,Aq=new Set(["table","thead","tbody","tfoot","tr"]);function Oq(e,t){const n=[];let r,i=-1;for(;++i<t.children.length;)r=t.children[i],"element"===r.type?n.push(Iq(e,r,i,t)):"text"===r.type?"element"===t.type&&Aq.has(t.tagName)&&hq(r)||n.push(r.value):"raw"!==r.type||e.options.skipHtml||n.push(r.value);return n}function Iq(e,t,n,r){const i=e.options,a=e.schema,o=t.tagName,s={};let l,c=a;if("html"===a.space&&"svg"===o&&(c=MX,e.schema=c),t.properties)for(l in t.properties)_q.call(t.properties,l)&&Nq(s,l,t.properties[l],e);"ol"!==o&&"ul"!==o||e.listDepth++;const u=Oq(e,t);"ol"!==o&&"ul"!==o||e.listDepth--,e.schema=a;const h=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},p=i.components&&_q.call(i.components,o)?i.components[o]:o,f="string"==typeof p||p===d.Fragment;if(!uq.isValidElementType(p))throw new TypeError(`Component for name \`${o}\` not defined or is not renderable`);if(s.key=[o,h.start.line,h.start.column,n].join("-"),"a"===o&&i.linkTarget&&(s.target="function"==typeof i.linkTarget?i.linkTarget(String(s.href||""),t.children,"string"==typeof s.title?s.title:null):i.linkTarget),"a"===o&&i.transformLinkUri&&(s.href=i.transformLinkUri(String(s.href||""),t.children,"string"==typeof s.title?s.title:null)),f||"code"!==o||"element"!==r.type||"pre"===r.tagName||(s.inline=!0),f||"h1"!==o&&"h2"!==o&&"h3"!==o&&"h4"!==o&&"h5"!==o&&"h6"!==o||(s.level=Number.parseInt(o.charAt(1),10)),"img"===o&&i.transformImageUri&&(s.src=i.transformImageUri(String(s.src||""),String(s.alt||""),"string"==typeof s.title?s.title:null)),!f&&"li"===o&&"element"===r.type){const e=function(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if("element"===n.type&&"input"===n.tagName)return n}return null}(t);s.checked=e&&e.properties?Boolean(e.properties.checked):null,s.index=Mq(r,t),s.ordered="ol"===r.tagName}var m;return f||"ol"!==o&&"ul"!==o||(s.ordered="ol"===o,s.depth=e.listDepth),"td"!==o&&"th"!==o||(s.align&&(s.style||(s.style={}),s.style.textAlign=s.align,delete s.align),f||(s.isHeader="th"===o)),f||"tr"!==o||"element"!==r.type||(s.isHeader=Boolean("thead"===r.tagName)),i.sourcePos&&(s["data-sourcepos"]=[(m=h).start.line,":",m.start.column,"-",m.end.line,":",m.end.column].map((e=>String(e))).join("")),!f&&i.rawSourcePos&&(s.sourcePosition=t.position),!f&&i.includeElementIndex&&(s.index=Mq(r,t),s.siblingCount=Mq(r)),f||(s.node=t),u.length>0?d.createElement(p,s,u):d.createElement(p,s)}function Mq(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)"element"===e.children[n].type&&r++;return r}function Nq(e,t,n,r){const i=kX(r.schema,t);let a=n;null!=a&&a==a&&(Array.isArray(a)&&(a=i.commaSeparated?mq(a):dq(a)),"style"===i.property&&"string"==typeof a&&(a=function(e){const t={};try{kq(e,n)}catch(Wh){}return t;function n(e,n){const r="-ms-"===e.slice(0,4)?`ms-${e.slice(4)}`:e;t[r.replace(/-([a-z])/g,Fq)]=n}}(a)),i.space&&i.property?e[_q.call(OX,i.property)?OX[i.property]:i.property]=a:i.attribute&&(e[i.attribute]=a))}function Fq(e,t){return t.toUpperCase()}const Lq={}.hasOwnProperty,Pq={renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function Rq(e){for(const a in Pq)if(Lq.call(Pq,a)&&Lq.call(e,a)){const e=Pq[a];console.warn(`[react-markdown] Warning: please ${e.to?`use \`${e.to}\` instead of`:"remove"} \`${a}\` (see <https://github.com/remarkjs/react-markdown/blob/main/changelog.md#${e.id}> for more info)`),delete Pq[a]}const t=bU().use(vW).use(e.remarkPlugins||e.plugins||[]).use(qW,{allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(NX,e),n=new aU;"string"==typeof e.children?n.value=e.children:void 0!==e.children&&null!==e.children&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if("root"!==r.type)throw new TypeError("Expected a `root` node");let i=d.createElement(d.Fragment,{},Oq({options:e,schema:IX,listDepth:0},r));return e.className&&(i=d.createElement("div",{className:e.className},i)),i}Rq.defaultProps={transformLinkUri:function(e){const t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;const r=t.indexOf(":");if(-1===r)return t;let i=-1;for(;++i<WY.length;){const e=WY[i];if(r===e.length&&t.slice(0,e.length).toLowerCase()===e)return t}return i=t.indexOf("?"),-1!==i&&r>i?t:(i=t.indexOf("#"),-1!==i&&r>i?t:"javascript:void(0)")}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */},Rq.propTypes={children:ee.string,className:ee.string,allowElement:ee.func,allowedElements:ee.arrayOf(ee.string),disallowedElements:ee.arrayOf(ee.string),unwrapDisallowed:ee.bool,remarkPlugins:ee.arrayOf(ee.oneOfType([ee.object,ee.func,ee.arrayOf(ee.oneOfType([ee.object,ee.func]))])),rehypePlugins:ee.arrayOf(ee.oneOfType([ee.object,ee.func,ee.arrayOf(ee.oneOfType([ee.object,ee.func]))])),sourcePos:ee.bool,rawSourcePos:ee.bool,skipHtml:ee.bool,includeElementIndex:ee.bool,transformLinkUri:ee.oneOfType([ee.func,ee.bool]),linkTarget:ee.oneOfType([ee.func,ee.string]),transformImageUri:ee.func,components:ee.object};var Dq=[].splice;var Bq={}.hasOwnProperty,zq=function(e,t,n,r){var i,a=e.length,o=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),Dq.apply(e,i);else for(n&&Dq.apply(e,[t,n]);o<r.length;)(i=r.slice(o,o+1e4)).unshift(t,0),Dq.apply(e,i),o+=1e4,t+=1e4},Hq=function(e){return null==e?[]:"length"in e?e:[e]};function jq(e,t){var n,r,i,a;for(n in t)for(a in r=Bq.call(e,n)?e[n]:e[n]={},i=t[n])r[a]=Gq(Hq(i[a]),Bq.call(r,a)?r[a]:[])}function Gq(e,t){for(var n=-1,r=[];++n<e.length;)("after"===e[n].add?t:r).push(e[n]);return zq(t,0,0,r),t}var $q=function(e){for(var t={},n=-1;++n<e.length;)jq(t,e[n]);return t},Yq={},Uq=String.fromCharCode;var Vq=function(e){return function(t){return e.test(Uq(t))}},Wq=Vq(/[A-Za-z]/),Xq=Vq(/[\dA-Za-z]/);var qq=function(e){return e<32||127===e};var Kq=function(e){return e<-2},Qq=Vq(/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/),Zq=Vq(/\s/),Jq=Wq,eK=Xq,tK=qq,nK=Kq,rK=Qq,iK=Zq,aK={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return 87===t||t-32==87?(e.consume(t),i):n(t)}function i(t){return 87===t||t-32==87?(e.consume(t),a):n(t)}function a(t){return 46===t?(e.consume(t),o):n(t)}function o(e){return null===e||nK(e)?n(e):t(e)}},partial:!0},oK={tokenize:function(e,t,n){var r,i;return a;function a(t){return 38===t?e.check(cK,s,o)(t):46===t||95===t?e.check(lK,s,o)(t):tK(t)||iK(t)||45!==t&&rK(t)?s(t):(e.consume(t),a)}function o(t){return 46===t?(i=r,r=void 0,e.consume(t),a):(95===t&&(r=!0),e.consume(t),a)}function s(e){return i||r?n(e):t(e)}},partial:!0},sK={tokenize:function(e,t){var n=0;return r;function r(o){return 38===o?e.check(cK,t,i)(o):(40===o&&n++,41===o?e.check(lK,a,i)(o):gK(o)?t(o):mK(o)?e.check(lK,t,i)(o):(e.consume(o),r))}function i(t){return e.consume(t),r}function a(e){return--n<0?t(e):i(e)}},partial:!0},lK={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(i){return mK(i)?(e.consume(i),r):gK(i)?t(i):n(i)}},partial:!0},cK={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return Jq(t)?(e.consume(t),r):59===t?(e.consume(t),i):n(t)}function i(e){return gK(e)?t(e):n(e)}},partial:!0},uK={tokenize:function(e,t,n){var r=this;return function(t){if(87!==t&&t-32!=87||!yK(r.previous)||bK(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(aK,e.attempt(oK,e.attempt(sK,i),n),n)(t)};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:yK},hK={tokenize:function(e,t,n){var r=this;return function(t){if(72!==t&&t-32!=72||!xK(r.previous)||bK(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(t),i};function i(t){return 84===t||t-32==84?(e.consume(t),a):n(t)}function a(t){return 84===t||t-32==84?(e.consume(t),o):n(t)}function o(t){return 80===t||t-32==80?(e.consume(t),s):n(t)}function s(t){return 83===t||t-32==83?(e.consume(t),l):l(t)}function l(t){return 58===t?(e.consume(t),c):n(t)}function c(t){return 47===t?(e.consume(t),u):n(t)}function u(t){return 47===t?(e.consume(t),h):n(t)}function h(t){return tK(t)||iK(t)||rK(t)?n(t):e.attempt(oK,e.attempt(sK,p),n)(t)}function p(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:xK},pK={tokenize:function(e,t,n){var r,i=this;return function(t){if(!vK(t)||!EK(i.previous)||bK(i.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return vK(t)?(e.consume(t),a):64===t?(e.consume(t),o):n(t)}function o(t){return 46===t?e.check(lK,u,s)(t):45===t||95===t?e.check(lK,n,l)(t):eK(t)?(e.consume(t),o):u(t)}function s(t){return e.consume(t),r=!0,o}function l(t){return e.consume(t),c}function c(t){return 46===t?e.check(lK,n,s)(t):o(t)}function u(i){return r?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(i)):n(i)}},previous:EK},dK={};Yq.text=dK;for(var fK=48;fK<123;)dK[fK]=pK,58===++fK?fK=65:91===fK&&(fK=97);function mK(e){return 33===e||34===e||39===e||41===e||42===e||44===e||46===e||58===e||59===e||60===e||63===e||95===e||126===e}function gK(e){return null===e||e<0||32===e||60===e}function vK(e){return 43===e||45===e||46===e||95===e||eK(e)}function yK(e){return null===e||e<0||32===e||40===e||42===e||95===e||126===e}function xK(e){return null===e||!Jq(e)}function EK(e){return 47!==e&&xK(e)}function bK(e){for(var t=e.length;t--;)if(("labelLink"===e[t][1].type||"labelImage"===e[t][1].type)&&!e[t][1]._balanced)return!0}dK[43]=pK,dK[45]=pK,dK[46]=pK,dK[95]=pK,dK[72]=[pK,hK],dK[104]=[pK,hK],dK[87]=[pK,uK],dK[119]=[pK,uK];var CK=Yq;var wK=function(e){return e<0||32===e},TK=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,SK=String.fromCharCode;var kK=function(e){return function(t){return e.test(SK(t))}},_K=kK(TK),AK=kK(/\s/),OK=wK,IK=_K,MK=AK;var NK=function(e){return null===e||OK(e)||MK(e)?1:IK(e)?2:void 0},FK=[].splice;var LK=function(e,t,n,r){var i,a=e.length,o=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),FK.apply(e,i);else for(n&&FK.apply(e,[t,n]);o<r.length;)(i=r.slice(o,o+1e4)).unshift(t,0),FK.apply(e,i),o+=1e4,t+=1e4};var PK=function(e,t,n){for(var r,i=[],a=-1;++a<e.length;)(r=e[a].resolveAll)&&i.indexOf(r)<0&&(t=r(t,n),i.push(r));return t},RK=Object.assign;var DK=function(e){var t=(e||{}).singleTilde,n={tokenize:function(e,n,r){var i=this.previous,a=this.events,o=0;return s;function s(t){return 126!==t||126===i&&"characterEscape"!==a[a.length-1][1].type?r(t):(e.enter("strikethroughSequenceTemporary"),l(t))}function l(a){var s,c,u=BK(i);return 126===a?o>1?r(a):(e.consume(a),o++,l):o<2&&!t?r(a):(s=e.exit("strikethroughSequenceTemporary"),c=BK(a),s._open=!c||2===c&&u,s._close=!u||2===u&&c,n(a))}},resolveAll:function(e,t){var n,r,i,a,o=-1;for(;++o<e.length;)if("enter"===e[o][0]&&"strikethroughSequenceTemporary"===e[o][1].type&&e[o][1]._close)for(i=o;i--;)if("exit"===e[i][0]&&"strikethroughSequenceTemporary"===e[i][1].type&&e[i][1]._open&&e[o][1].end.offset-e[o][1].start.offset==e[i][1].end.offset-e[i][1].start.offset){e[o][1].type="strikethroughSequence",e[i][1].type="strikethroughSequence",n={type:"strikethrough",start:jK(e[i][1].start),end:jK(e[o][1].end)},r={type:"strikethroughText",start:jK(e[i][1].end),end:jK(e[o][1].start)},a=[["enter",n,t],["enter",e[i][1],t],["exit",e[i][1],t],["enter",r,t]],zK(a,a.length,0,HK(t.parser.constructs.insideSpan.null,e.slice(i+1,o),t)),zK(a,a.length,0,[["exit",r,t],["enter",e[o][1],t],["exit",e[o][1],t],["exit",n,t]]),zK(e,i-1,o-i+3,a),o=i+a.length-2;break}return function(e){var t=-1,n=e.length;for(;++t<n;)"strikethroughSequenceTemporary"===e[t][1].type&&(e[t][1].type="data");return e}(e)}};null==t&&(t=!0);return{text:{126:n},insideSpan:{null:n}}},BK=NK,zK=LK,HK=PK,jK=function(e){return RK({},e)};var GK={};var $K=function(e){return-2===e||-1===e||32===e};var YK=function(e,t,n,r){var i=r?r-1:1/0,a=0;return function(r){if($K(r))return e.enter(n),o(r);return t(r)};function o(r){return $K(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}};GK.flow={null:{tokenize:function(e,t,n){var r,i,a=[],o=0;return function(t){if(null===t||-5===t||-4===t||-3===t)return n(t);if(e.enter("table")._align=a,e.enter("tableHead"),e.enter("tableRow"),124===t)return s(t);return o++,e.enter("temporaryTableCellContent"),u(t)};function s(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,l}function l(t){return null===t||-5===t||-4===t||-3===t?function(t){if(null===t)return n(t);return e.exit("tableRow"),e.exit("tableHead"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.check(VK,n,UK(e,p,"linePrefix",4))}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),c):(r&&(r=void 0,o++),124===t?s(t):(e.enter("temporaryTableCellContent"),u(t)))}function c(t){return-2===t||-1===t||32===t?(e.consume(t),c):(e.exit("whitespace"),l(t))}function u(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),l(t)):(e.consume(t),92===t?h:u)}function h(t){return 92===t||124===t?(e.consume(t),u):u(t)}function p(t){return null===t||t<0||32===t?n(t):(e.enter("tableDelimiterRow"),d(t))}function d(t){return null===t||-5===t||-4===t||-3===t?y(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),f):45===t?(e.enter("tableDelimiterFiller"),e.consume(t),i=!0,a.push(null),m):58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),a.push("left"),g):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),d):n(t)}function f(t){return-2===t||-1===t||32===t?(e.consume(t),f):(e.exit("whitespace"),d(t))}function m(t){return 45===t?(e.consume(t),m):(e.exit("tableDelimiterFiller"),58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),a[a.length-1]="left"===a[a.length-1]?"center":"right",v):d(t))}function g(t){return 45===t?(e.enter("tableDelimiterFiller"),e.consume(t),i=!0,m):n(t)}function v(t){return null===t||-5===t||-4===t||-3===t?y(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),f):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),d):n(t)}function y(t){return e.exit("tableDelimiterRow"),i&&o===a.length?null===t?x(t):e.check(WK,x,E)(t):n(t)}function x(n){return e.exit("table"),t(n)}function E(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),UK(e,b,"linePrefix",4)}function b(t){return e.enter("tableBody"),C(t)}function C(t){return e.enter("tableRow"),124===t?w(t):(e.enter("temporaryTableCellContent"),k(t))}function w(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),T}function T(t){return null===t||-5===t||-4===t||-3===t?function(t){if(e.exit("tableRow"),null===t)return A(t);return e.check(WK,A,O)(t)}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),S):124===t?w(t):(e.enter("temporaryTableCellContent"),k(t))}function S(t){return-2===t||-1===t||32===t?(e.consume(t),S):(e.exit("whitespace"),T(t))}function k(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),T(t)):(e.consume(t),92===t?_:k)}function _(t){return 92===t||124===t?(e.consume(t),k):k(t)}function A(t){return e.exit("tableBody"),x(t)}function O(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),UK(e,C,"linePrefix",4)}},resolve:function(e,t){var n,r,i,a,o,s,l,c,u,h,p=e.length,d=-1;for(;++d<p;)n=e[d][1],a&&("temporaryTableCellContent"===n.type&&(c=c||d,u=d),"tableCellDivider"!==n.type&&"tableRow"!==n.type||!u||(s={type:"tableContent",start:e[c][1].start,end:e[u][1].end},l={type:"chunkText",start:s.start,end:s.end,contentType:"text"},e.splice(c,u-c+1,["enter",s,t],["enter",l,t],["exit",l,t],["exit",s,t]),d-=u-c-3,p=e.length,c=void 0,u=void 0)),"exit"===e[d][0]&&h&&h+1<d&&("tableCellDivider"===n.type||"tableRow"===n.type&&(h+3<d||"whitespace"!==e[h][1].type))&&(o={type:i?"tableDelimiter":r?"tableHeader":"tableData",start:e[h][1].start,end:e[d][1].end},e.splice(d+("tableCellDivider"===n.type?1:0),0,["exit",o,t]),e.splice(h,0,["enter",o,t]),d+=2,p=e.length,h=d+1),"tableRow"===n.type&&(a="enter"===e[d][0])&&(h=d+1),"tableDelimiterRow"===n.type&&(i="enter"===e[d][0])&&(h=d+1),"tableHead"===n.type&&(r="enter"===e[d][0]);return e},interruptible:!0}};var UK=YK,VK={tokenize:function(e,t,n){return function(t){if(45!==t)return n(t);return e.enter("setextUnderline"),r(t)};function r(t){return 45===t?(e.consume(t),r):i(t)}function i(r){return-2===r||-1===r||32===r?(e.consume(r),i):null===r||-5===r||-4===r||-3===r?t(r):n(r)}},partial:!0},WK={tokenize:function(e,t,n){var r=0;return function(t){return e.enter("check"),e.consume(t),i};function i(a){return-1===a||32===a?(e.consume(a),4===++r?t:i):null===a||a<0?t(a):n(a)}},partial:!0};var XK=GK,qK={};var KK=function(e){return-2===e||-1===e||32===e};var QK=function(e){for(var t=-1,n=0;++t<e.length;)n+="string"==typeof e[t]?e[t].length:1;return n};var ZK=function(e){return e<0||32===e},JK=function(e,t,n,r){var i=r?r-1:1/0,a=0;return function(r){if(KK(r))return e.enter(n),o(r);return t(r)};function o(r){return KK(r)&&a++<i?(e.consume(r),o):(e.exit(n),t(r))}},eQ=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?QK(n[2].sliceStream(n[1])):0},tQ={tokenize:function(e,t,n){var r=this;return function(t){if(91!==t||null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i};function i(t){return-2===t||32===t?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),a):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),a):n(t)}function a(r){return 93===r?(e.enter("taskListCheckMarker"),e.consume(r),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:nQ},t,n)):n(r)}}};function nQ(e,t,n){var r=this;return JK(e,(function(e){return eQ(r.events,"whitespace")&&null!==e&&!ZK(e)?t(e):n(e)}),"whitespace")}qK.text={91:tQ};var rQ=$q,iQ=CK,aQ=DK,oQ=XK,sQ=qK;var lQ=function(e){return rQ([iQ,aQ(e),oQ,sQ])},cQ={},uQ=function(e,t){var n,r=String(e),i=0;if("string"!=typeof t)throw new Error("Expected character");n=r.indexOf(t);for(;-1!==n;)i++,n=r.indexOf(t,n+t.length);return i};function hQ(e){if(null==e)return pQ;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=hQ(e[n]);return r;function r(){for(var e=-1;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function pQ(){return!0}var dQ=gQ,fQ=hQ,mQ=function(e){return e};function gQ(e,t,n,r){var i,a;"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),a=fQ(t),i=r?-1:1,function e(o,s,l){var c,u="object"==typeof o&&null!==o?o:{};"string"==typeof u.type&&(c="string"==typeof u.tagName?u.tagName:"string"==typeof u.name?u.name:void 0,h.displayName="node ("+mQ(u.type+(c?"<"+c+">":""))+")");return h;function h(){var c,u,h=l.concat(o),p=[];if((!t||a(o,s,l[l.length-1]||null))&&false===(p=function(e){if(null!==e&&"object"==typeof e&&"length"in e)return e;if("number"==typeof e)return[true,e];return[e]}(n(o,l)))[0])return p;if(o.children&&"skip"!==p[0])for(u=(r?o.children.length:-1)+i;u>-1&&u<o.children.length;){if(false===(c=e(o.children[u],u,h)())[0])return c;u="number"==typeof c[1]?c[1]:u+i}return p}}(e,null,[])()}function vQ(e){if(null==e)return yQ;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=vQ(e[n]);return r;function r(){for(var e=-1;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function yQ(){return!0}gQ.CONTINUE=true,gQ.SKIP="skip",gQ.EXIT=false;var xQ=function(e,t,n,r){var i,a;"string"==typeof t||t&&"function"==typeof t.exec?a=[[t,n]]:(a=t,r=n);return TQ(e,i=r||{},function e(t){var n=t[0];return r;function r(r,a){var o,s,l,c,u=n[0],h=n[1],p=[],d=0,f=a.children.indexOf(r);for(u.lastIndex=0,s=u.exec(r.value);s&&(o=s.index,!1!==(c=h.apply(null,[].concat(s,{index:s.index,input:s.input})))&&(d!==o&&p.push({type:"text",value:r.value.slice(d,o)}),"string"==typeof c&&c.length>0&&(c={type:"text",value:c}),c&&(p=[].concat(p,c)),d=o+s[0].length),u.global);)s=u.exec(r.value);if(void 0===o?(p=[r],f--):(d<r.value.length&&p.push({type:"text",value:r.value.slice(d)}),p.unshift(f,1),wQ.apply(a.children,p)),t.length>1)for(l=e(t.slice(1)),o=-1;++o<p.length;)"text"===(r=p[o]).type?l(r,a):TQ(r,i,l);return f+p.length+1}}(function(e){var t,n,r=[];if("object"!=typeof e)throw new Error("Expected array or object as schema");if("length"in e)for(n=-1;++n<e.length;)r.push([SQ(e[n][0]),kQ(e[n][1])]);else for(t in e)r.push([SQ(t),kQ(e[t])]);return r}(a))),e},EQ=dQ,bQ=vQ,CQ=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},wQ=[].splice;function TQ(e,t,n){var r=bQ(t.ignore||[]);return EQ(e,"text",(function(e,t){var i,a,o=-1;for(;++o<t.length;){if(i=t[o],r(i,a?a.children.indexOf(i):void 0,a))return;a=i}return n(e,a)})),[]}function SQ(e){return"string"==typeof e?new RegExp(CQ(e),"g"):e}function kQ(e){return"function"==typeof e?e:function(){return e}}var _Q=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,AQ=String.fromCharCode;var OQ=function(e){return function(t){return e.test(AQ(t))}},IQ=OQ(_Q),MQ=OQ(/\s/),NQ=uQ,FQ=xQ,LQ=IQ,PQ=MQ;function RQ(e){this.config.enter.autolinkProtocol.call(this,e)}function DQ(e,t,n,r,i){var a,o,s="";return!!zQ(i)&&(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!!function(e){var t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n)&&(!!(a=function(e){var t,n,r,i=/[!"&'),.:;<>?\]}]+$/.exec(e);if(i)for(e=e.slice(0,i.index),t=(i=i[0]).indexOf(")"),n=NQ(e,"("),r=NQ(e,")");-1!==t&&n>r;)e+=i.slice(0,t+1),t=(i=i.slice(t+1)).indexOf(")"),r++;return[e,i]}(n+r))[0]&&(o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]},a[1]&&(o=[o,{type:"text",value:a[1]}]),o)))}function BQ(e,t,n,r){return!(!zQ(r,!0)||/[_-]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function zQ(e,t){var n=e.input.charCodeAt(e.index-1);return(n!=n||PQ(n)||LQ(n))&&(!t||47!==n)}cQ.transforms=[function(e){FQ(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/i,DQ],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/,BQ]],{ignore:["link","linkReference"]})}],cQ.enter={literalAutolink:function(e){this.enter({type:"link",title:null,url:"",children:[]},e)},literalAutolinkEmail:RQ,literalAutolinkHttp:RQ,literalAutolinkWww:RQ},cQ.exit={literalAutolink:function(e){this.exit(e)},literalAutolinkEmail:function(e){this.config.exit.autolinkEmail.call(this,e)},literalAutolinkHttp:function(e){this.config.exit.autolinkProtocol.call(this,e)},literalAutolinkWww:function(e){this.config.exit.data.call(this,e),this.stack[this.stack.length-1].url="http://"+this.sliceSerialize(e)}};var HQ={};HQ.canContainEols=["delete"],HQ.enter={strikethrough:function(e){this.enter({type:"delete",children:[]},e)}},HQ.exit={strikethrough:function(e){this.exit(e)}};var jQ={};function GQ(e){this.exit(e)}function $Q(e){this.enter({type:"tableCell",children:[]},e)}function YQ(e,t){return"|"===t?t:e}jQ.enter={table:function(e){this.enter({type:"table",align:e._align,children:[]},e),this.setData("inTable",!0)},tableData:$Q,tableHeader:$Q,tableRow:function(e){this.enter({type:"tableRow",children:[]},e)}},jQ.exit={codeText:function(e){var t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,YQ));this.stack[this.stack.length-1].value=t,this.exit(e)},table:function(e){this.exit(e),this.setData("inTable")},tableData:GQ,tableHeader:GQ,tableRow:GQ};var UQ={};function VQ(e){this.stack[this.stack.length-2].checked="taskListCheckValueChecked"===e.type}UQ.exit={taskListCheckValueChecked:VQ,taskListCheckValueUnchecked:VQ,paragraph:function(e){var t,n=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1],i=n.children,a=r.children[0],o=-1;if(n&&"listItem"===n.type&&"boolean"==typeof n.checked&&a&&"text"===a.type){for(;++o<i.length;)if("paragraph"===i[o].type){t=i[o];break}t===r&&(a.value=a.value.slice(1),0===a.value.length?r.children.shift():(a.position.start.column++,a.position.start.offset++,r.position.start=Object.assign({},a.position.start)))}this.exit(e)}};var WQ={}.hasOwnProperty,XQ=function(e){var t={transforms:[],canContainEols:[]},n=e.length,r=-1;for(;++r<n;)qQ(t,e[r]);return t}([cQ,HQ,jQ,UQ]);function qQ(e,t){var n,r,i;for(n in t)r=WQ.call(e,n)?e[n]:e[n]={},i=t[n],"canContainEols"===n||"transforms"===n?e[n]=[].concat(r,i):Object.assign(r,i)}var KQ={},QQ=["autolink","link","image","label"];KQ.unsafe=[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:"phrasing",notInConstruct:QQ},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:"phrasing",notInConstruct:QQ},{character:":",before:"[ps]",after:"\\/",inConstruct:"phrasing",notInConstruct:QQ}];var ZQ={},JQ=function(e,t,n){var r,i,a,o=e.children||[],s=[],l=-1,c=n.before;for(;++l<o.length;)a=o[l],l+1<o.length?((i=t.handle.handlers[o[l+1].type])&&i.peek&&(i=i.peek),r=i?i(o[l+1],e,t,{before:"",after:""}).charAt(0):""):r=n.after,s.length>0&&("\r"===c||"\n"===c)&&"html"===a.type&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),c=" "),s.push(t.handle(a,e,t,{before:c,after:r})),c=s[s.length-1].slice(-1);return s.join("")};var eZ=JQ;function tZ(e,t,n){var r=n.enter("emphasis"),i=eZ(e,n,{before:"~",after:"~"});return r(),"~~"+i+"~~"}ZQ.unsafe=[{character:"~",inConstruct:"phrasing"}],ZQ.handlers={delete:tZ},tZ.peek=function(){return"~"};var nZ=function(e){var t,n;e._compiled||(t=e.before?"(?:"+e.before+")":"",n=e.after?"(?:"+e.after+")":"",e.atBreak&&(t="[\\r\\n][\\t ]*"+t),e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(n||""),"g"));return e._compiled};var rZ=aZ;aZ.peek=function(){return"`"}
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */;var iZ=nZ;function aZ(e,t,n){for(var r,i,a,o,s=e.value||"",l="`",c=-1;new RegExp("(^|[^`])"+l+"([^`]|$)").test(s);)l+="`";for(/[^ \r\n]/.test(s)&&(/[ \r\n`]/.test(s.charAt(0))||/[ \r\n`]/.test(s.charAt(s.length-1)))&&(s=" "+s+" ");++c<n.unsafe.length;)if((r=n.unsafe[c]).atBreak)for(i=iZ(r);a=i.exec(s);)o=a.index,10===s.charCodeAt(o)&&13===s.charCodeAt(o-1)&&o--,s=s.slice(0,o)+" "+s.slice(a.index+1);return l+s+l}var oZ,sZ="",lZ=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(oZ!==e||void 0===oZ)oZ=e,sZ="";else if(sZ.length>=n)return sZ.substr(0,n);for(;n>sZ.length&&t>1;)1&t&&(sZ+=e),t>>=1,e+=e;return sZ=(sZ+=e).substr(0,n)};var cZ=lZ,uZ=function(e,t){var n,r,i,a,o,s,l,c,u,h,p,d=t||{},f=!1!==d.padding,m=!1!==d.delimiterStart,g=!1!==d.delimiterEnd,v=(d.align||[]).concat(),y=!1!==d.alignDelimiters,x=[],E=d.stringLength||fZ,b=-1,C=e.length,w=[],T=[],S=[],k=[],_=[],A=0;for(;++b<C;){for(n=e[b],r=-1,i=n.length,S=[],k=[],i>A&&(A=i);++r<i;)s=dZ(n[r]),!0===y&&(o=E(s),k[r]=o,(void 0===(a=_[r])||o>a)&&(_[r]=o)),S.push(s);w[b]=S,T[b]=k}if(r=-1,i=A,"object"==typeof v&&"length"in v)for(;++r<i;)x[r]=mZ(v[r]);else for(p=mZ(v);++r<i;)x[r]=p;r=-1,i=A,S=[],k=[];for(;++r<i;)p=x[r],u="",h="",108===p?u=":":p===pZ?h=":":99===p&&(u=":",h=":"),o=y?Math.max(1,_[r]-u.length-h.length):1,s=u+cZ("-",o)+h,!0===y&&((o=u.length+o+h.length)>_[r]&&(_[r]=o),k[r]=o),S[r]=s;w.splice(1,0,S),T.splice(1,0,k),b=-1,C=w.length,l=[];for(;++b<C;){for(S=w[b],k=T[b],r=-1,i=A,c=[];++r<i;)s=S[r]||"",u="",h="",!0===y&&(o=_[r]-(k[r]||0),(p=x[r])===pZ?u=cZ(" ",o):99===p?o%2==0?(u=cZ(" ",o/2),h=u):(u=cZ(" ",o/2+.5),h=cZ(" ",o/2-.5)):h=cZ(" ",o)),!0===m&&0===r&&c.push("|"),!0!==f||!1===y&&""===s||!0!==m&&0===r||c.push(" "),!0===y&&c.push(u),c.push(s),!0===y&&c.push(h),!0===f&&c.push(" "),!0!==g&&r===i-1||c.push("|");c=c.join(""),!1===g&&(c=c.replace(hZ,"")),l.push(c)}return l.join("\n")},hZ=/ +$/,pZ=114;function dZ(e){return null==e?"":String(e)}function fZ(e){return e.length}function mZ(e){var t="string"==typeof e?e.charCodeAt(0):0;return 76===t||108===t?108:82===t||t===pZ?pZ:67===t||99===t?99:0}var gZ=JQ,vZ=rZ,yZ=uZ,xZ=function(e){var t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:function(e,t,n){return s(function(e,t){var n=e.children,r=-1,i=n.length,a=[],o=t.enter("table");for(;++r<i;)a[r]=l(n[r],t);return o(),a}(e,n),e.align)},tableRow:function(e,t,n){var r=s([l(e,n)]);return r.slice(0,r.indexOf("\n"))},tableCell:o,inlineCode:function(e,t,n){var r=vZ(e,t,n);-1!==n.stack.indexOf("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r}}};function o(e,t,n){var r=n.enter("tableCell"),i=gZ(e,n,{before:a,after:a});return r(),i}function s(e,t){return yZ(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function l(e,t){for(var n=e.children,r=-1,i=n.length,a=[],s=t.enter("tableRow");++r<i;)a[r]=o(n[r],0,t);return s(),a}};var EZ={};var bZ=function(e,t){var n,r=e.children||[],i=[],a=-1;for(;++a<r.length;)n=r[a],i.push(t.handle(n,e,t,{before:"\n",after:"\n"})),a+1<r.length&&i.push(o(n,r[a+1]));return i.join("");function o(n,r){for(var i,a=-1;++a<t.join.length&&!0!==(i=t.join[a](n,r,e,t))&&1!==i;){if("number"==typeof i)return CZ("\n",1+Number(i));if(!1===i)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}},CZ=lZ;var wZ=function(e,t){var n,r=[],i=0,a=0;for(;n=TZ.exec(e);)o(e.slice(i,n.index)),r.push(n[0]),i=n.index+n[0].length,a++;return o(e.slice(i)),r.join("");function o(e){r.push(t(e,a,!e))}},TZ=/\r?\n|\r/g;var SZ=function(e,t,n){var r,i,a,o=_Z(n),s=AZ(n);t&&t.ordered&&(o=(t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+".");r=o.length+1,("tab"===s||"mixed"===s&&(t&&t.spread||e.spread))&&(r=4*Math.ceil(r/4));return a=n.enter("listItem"),i=IZ(OZ(e,n),(function(e,t,n){if(t)return(n?"":kZ(" ",r))+e;return(n?o:o+kZ(" ",r-o.length))+e})),a(),i},kZ=lZ,_Z=function(e){var t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t},AZ=function(e){var t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t},OZ=bZ,IZ=wZ;var MZ=SZ;EZ.unsafe=[{atBreak:!0,character:"-",after:"[:|-]"}],EZ.handlers={listItem:function(e,t,n){var r=MZ(e,t,n),i=e.children[0];"boolean"==typeof e.checked&&i&&"paragraph"===i.type&&(r=r.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(t){return t+"["+(e.checked?"x":" ")+"] "})));return r}};var NZ=KQ,FZ=ZQ,LZ=xZ,PZ=EZ,RZ=function e(t,n){var r,i=-1;if(n.extensions)for(;++i<n.extensions.length;)e(t,n.extensions[i]);for(r in n)"extensions"===r||("unsafe"===r||"join"===r?t[r]=t[r].concat(n[r]||[]):"handlers"===r?t[r]=Object.assign(t[r],n[r]||{}):t.options[r]=n[r]);return t};var DZ,BZ=lQ,zZ=XQ,HZ=function(e){var t=RZ({handlers:{},join:[],unsafe:[],options:{}},{extensions:[NZ,FZ,LZ(e),PZ]});return Object.assign(t.options,{handlers:t.handlers,join:t.join,unsafe:t.unsafe})},jZ=function(e){var t=this.data();!DZ&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(DZ=!0,console.warn("[remark-gfm] Warning: please upgrade to remark 13 to use this plugin"));function n(e,n){t[e]?t[e].push(n):t[e]=[n]}n("micromarkExtensions",BZ(e)),n("fromMarkdownExtensions",zZ),n("toMarkdownExtensions",HZ(e))};var GZ={};const $Z=[65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111];GZ.REPLACEMENT_CHARACTER="�",GZ.CODE_POINTS={EOF:-1,NULL:0,TABULATION:9,CARRIAGE_RETURN:13,LINE_FEED:10,FORM_FEED:12,SPACE:32,EXCLAMATION_MARK:33,QUOTATION_MARK:34,NUMBER_SIGN:35,AMPERSAND:38,APOSTROPHE:39,HYPHEN_MINUS:45,SOLIDUS:47,DIGIT_0:48,DIGIT_9:57,SEMICOLON:59,LESS_THAN_SIGN:60,EQUALS_SIGN:61,GREATER_THAN_SIGN:62,QUESTION_MARK:63,LATIN_CAPITAL_A:65,LATIN_CAPITAL_F:70,LATIN_CAPITAL_X:88,LATIN_CAPITAL_Z:90,RIGHT_SQUARE_BRACKET:93,GRAVE_ACCENT:96,LATIN_SMALL_A:97,LATIN_SMALL_F:102,LATIN_SMALL_X:120,LATIN_SMALL_Z:122,REPLACEMENT_CHARACTER:65533},GZ.CODE_POINT_SEQUENCES={DASH_DASH_STRING:[45,45],DOCTYPE_STRING:[68,79,67,84,89,80,69],CDATA_START_STRING:[91,67,68,65,84,65,91],SCRIPT_STRING:[115,99,114,105,112,116],PUBLIC_STRING:[80,85,66,76,73,67],SYSTEM_STRING:[83,89,83,84,69,77]},GZ.isSurrogate=function(e){return e>=55296&&e<=57343},GZ.isSurrogatePair=function(e){return e>=56320&&e<=57343},GZ.getSurrogatePairCodePoint=function(e,t){return 1024*(e-55296)+9216+t},GZ.isControlCodePoint=function(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159},GZ.isUndefinedCodePoint=function(e){return e>=64976&&e<=65007||$Z.indexOf(e)>-1};var YZ={controlCharacterInInputStream:"control-character-in-input-stream",noncharacterInInputStream:"noncharacter-in-input-stream",surrogateInInputStream:"surrogate-in-input-stream",nonVoidHtmlElementStartTagWithTrailingSolidus:"non-void-html-element-start-tag-with-trailing-solidus",endTagWithAttributes:"end-tag-with-attributes",endTagWithTrailingSolidus:"end-tag-with-trailing-solidus",unexpectedSolidusInTag:"unexpected-solidus-in-tag",unexpectedNullCharacter:"unexpected-null-character",unexpectedQuestionMarkInsteadOfTagName:"unexpected-question-mark-instead-of-tag-name",invalidFirstCharacterOfTagName:"invalid-first-character-of-tag-name",unexpectedEqualsSignBeforeAttributeName:"unexpected-equals-sign-before-attribute-name",missingEndTagName:"missing-end-tag-name",unexpectedCharacterInAttributeName:"unexpected-character-in-attribute-name",unknownNamedCharacterReference:"unknown-named-character-reference",missingSemicolonAfterCharacterReference:"missing-semicolon-after-character-reference",unexpectedCharacterAfterDoctypeSystemIdentifier:"unexpected-character-after-doctype-system-identifier",unexpectedCharacterInUnquotedAttributeValue:"unexpected-character-in-unquoted-attribute-value",eofBeforeTagName:"eof-before-tag-name",eofInTag:"eof-in-tag",missingAttributeValue:"missing-attribute-value",missingWhitespaceBetweenAttributes:"missing-whitespace-between-attributes",missingWhitespaceAfterDoctypePublicKeyword:"missing-whitespace-after-doctype-public-keyword",missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:"missing-whitespace-between-doctype-public-and-system-identifiers",missingWhitespaceAfterDoctypeSystemKeyword:"missing-whitespace-after-doctype-system-keyword",missingQuoteBeforeDoctypePublicIdentifier:"missing-quote-before-doctype-public-identifier",missingQuoteBeforeDoctypeSystemIdentifier:"missing-quote-before-doctype-system-identifier",missingDoctypePublicIdentifier:"missing-doctype-public-identifier",missingDoctypeSystemIdentifier:"missing-doctype-system-identifier",abruptDoctypePublicIdentifier:"abrupt-doctype-public-identifier",abruptDoctypeSystemIdentifier:"abrupt-doctype-system-identifier",cdataInHtmlContent:"cdata-in-html-content",incorrectlyOpenedComment:"incorrectly-opened-comment",eofInScriptHtmlCommentLikeText:"eof-in-script-html-comment-like-text",eofInDoctype:"eof-in-doctype",nestedComment:"nested-comment",abruptClosingOfEmptyComment:"abrupt-closing-of-empty-comment",eofInComment:"eof-in-comment",incorrectlyClosedComment:"incorrectly-closed-comment",eofInCdata:"eof-in-cdata",absenceOfDigitsInNumericCharacterReference:"absence-of-digits-in-numeric-character-reference",nullCharacterReference:"null-character-reference",surrogateCharacterReference:"surrogate-character-reference",characterReferenceOutsideUnicodeRange:"character-reference-outside-unicode-range",controlCharacterReference:"control-character-reference",noncharacterCharacterReference:"noncharacter-character-reference",missingWhitespaceBeforeDoctypeName:"missing-whitespace-before-doctype-name",missingDoctypeName:"missing-doctype-name",invalidCharacterSequenceAfterDoctypeName:"invalid-character-sequence-after-doctype-name",duplicateAttribute:"duplicate-attribute",nonConformingDoctype:"non-conforming-doctype",missingDoctype:"missing-doctype",misplacedDoctype:"misplaced-doctype",endTagWithoutMatchingOpenElement:"end-tag-without-matching-open-element",closingOfElementWithOpenChildElements:"closing-of-element-with-open-child-elements",disallowedContentInNoscriptInHead:"disallowed-content-in-noscript-in-head",openElementsLeftAfterEof:"open-elements-left-after-eof",abandonedHeadElementChild:"abandoned-head-element-child",misplacedStartTagForHeadElement:"misplaced-start-tag-for-head-element",nestedNoscriptInHead:"nested-noscript-in-head",eofInElementThatCanContainOnlyText:"eof-in-element-that-can-contain-only-text"};const UZ=GZ,VZ=YZ,WZ=UZ.CODE_POINTS;var XZ=class{constructor(){this.html=null,this.pos=-1,this.lastGapPos=-1,this.lastCharPos=-1,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536}_err(){}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.lastCharPos){const t=this.html.charCodeAt(this.pos+1);if(UZ.isSurrogatePair(t))return this.pos++,this._addGap(),UZ.getSurrogatePairCodePoint(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,WZ.EOF;return this._err(VZ.surrogateInInputStream),e}dropParsedChunk(){this.pos>this.bufferWaterline&&(this.lastCharPos-=this.pos,this.html=this.html.substring(this.pos),this.pos=0,this.lastGapPos=-1,this.gapStack=[])}write(e,t){this.html?this.html+=e:this.html=e,this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1,this.html.length),this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1}advance(){if(this.pos++,this.pos>this.lastCharPos)return this.endOfChunkHit=!this.lastChunkWritten,WZ.EOF;let e=this.html.charCodeAt(this.pos);if(this.skipNextNewLine&&e===WZ.LINE_FEED)return this.skipNextNewLine=!1,this._addGap(),this.advance();if(e===WZ.CARRIAGE_RETURN)return this.skipNextNewLine=!0,WZ.LINE_FEED;this.skipNextNewLine=!1,UZ.isSurrogate(e)&&(e=this._processSurrogate(e));return e>31&&e<127||e===WZ.LINE_FEED||e===WZ.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e}_checkForProblematicCharacters(e){UZ.isControlCodePoint(e)?this._err(VZ.controlCharacterInInputStream):UZ.isUndefinedCodePoint(e)&&this._err(VZ.noncharacterInInputStream)}retreat(){this.pos===this.lastGapPos&&(this.lastGapPos=this.gapStack.pop(),this.pos--),this.pos--}},qZ=new Uint16Array([4,52,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,106,303,412,810,1432,1701,1796,1987,2114,2360,2420,2484,3170,3251,4140,4393,4575,4610,5106,5512,5728,6117,6274,6315,6345,6427,6516,7002,7910,8733,9323,9870,10170,10631,10893,11318,11386,11467,12773,13092,14474,14922,15448,15542,16419,17666,18166,18611,19004,19095,19298,19397,4,16,69,77,97,98,99,102,103,108,109,110,111,112,114,115,116,117,140,150,158,169,176,194,199,210,216,222,226,242,256,266,283,294,108,105,103,5,198,1,59,148,1,198,80,5,38,1,59,156,1,38,99,117,116,101,5,193,1,59,167,1,193,114,101,118,101,59,1,258,4,2,105,121,182,191,114,99,5,194,1,59,189,1,194,59,1,1040,114,59,3,55349,56580,114,97,118,101,5,192,1,59,208,1,192,112,104,97,59,1,913,97,99,114,59,1,256,100,59,1,10835,4,2,103,112,232,237,111,110,59,1,260,102,59,3,55349,56632,112,108,121,70,117,110,99,116,105,111,110,59,1,8289,105,110,103,5,197,1,59,264,1,197,4,2,99,115,272,277,114,59,3,55349,56476,105,103,110,59,1,8788,105,108,100,101,5,195,1,59,292,1,195,109,108,5,196,1,59,301,1,196,4,8,97,99,101,102,111,114,115,117,321,350,354,383,388,394,400,405,4,2,99,114,327,336,107,115,108,97,115,104,59,1,8726,4,2,118,119,342,345,59,1,10983,101,100,59,1,8966,121,59,1,1041,4,3,99,114,116,362,369,379,97,117,115,101,59,1,8757,110,111,117,108,108,105,115,59,1,8492,97,59,1,914,114,59,3,55349,56581,112,102,59,3,55349,56633,101,118,101,59,1,728,99,114,59,1,8492,109,112,101,113,59,1,8782,4,14,72,79,97,99,100,101,102,104,105,108,111,114,115,117,442,447,456,504,542,547,569,573,577,616,678,784,790,796,99,121,59,1,1063,80,89,5,169,1,59,454,1,169,4,3,99,112,121,464,470,497,117,116,101,59,1,262,4,2,59,105,476,478,1,8914,116,97,108,68,105,102,102,101,114,101,110,116,105,97,108,68,59,1,8517,108,101,121,115,59,1,8493,4,4,97,101,105,111,514,520,530,535,114,111,110,59,1,268,100,105,108,5,199,1,59,528,1,199,114,99,59,1,264,110,105,110,116,59,1,8752,111,116,59,1,266,4,2,100,110,553,560,105,108,108,97,59,1,184,116,101,114,68,111,116,59,1,183,114,59,1,8493,105,59,1,935,114,99,108,101,4,4,68,77,80,84,591,596,603,609,111,116,59,1,8857,105,110,117,115,59,1,8854,108,117,115,59,1,8853,105,109,101,115,59,1,8855,111,4,2,99,115,623,646,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8754,101,67,117,114,108,121,4,2,68,81,658,671,111,117,98,108,101,81,117,111,116,101,59,1,8221,117,111,116,101,59,1,8217,4,4,108,110,112,117,688,701,736,753,111,110,4,2,59,101,696,698,1,8759,59,1,10868,4,3,103,105,116,709,717,722,114,117,101,110,116,59,1,8801,110,116,59,1,8751,111,117,114,73,110,116,101,103,114,97,108,59,1,8750,4,2,102,114,742,745,59,1,8450,111,100,117,99,116,59,1,8720,110,116,101,114,67,108,111,99,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8755,111,115,115,59,1,10799,99,114,59,3,55349,56478,112,4,2,59,67,803,805,1,8915,97,112,59,1,8781,4,11,68,74,83,90,97,99,101,102,105,111,115,834,850,855,860,865,888,903,916,921,1011,1415,4,2,59,111,840,842,1,8517,116,114,97,104,100,59,1,10513,99,121,59,1,1026,99,121,59,1,1029,99,121,59,1,1039,4,3,103,114,115,873,879,883,103,101,114,59,1,8225,114,59,1,8609,104,118,59,1,10980,4,2,97,121,894,900,114,111,110,59,1,270,59,1,1044,108,4,2,59,116,910,912,1,8711,97,59,1,916,114,59,3,55349,56583,4,2,97,102,927,998,4,2,99,109,933,992,114,105,116,105,99,97,108,4,4,65,68,71,84,950,957,978,985,99,117,116,101,59,1,180,111,4,2,116,117,964,967,59,1,729,98,108,101,65,99,117,116,101,59,1,733,114,97,118,101,59,1,96,105,108,100,101,59,1,732,111,110,100,59,1,8900,102,101,114,101,110,116,105,97,108,68,59,1,8518,4,4,112,116,117,119,1021,1026,1048,1249,102,59,3,55349,56635,4,3,59,68,69,1034,1036,1041,1,168,111,116,59,1,8412,113,117,97,108,59,1,8784,98,108,101,4,6,67,68,76,82,85,86,1065,1082,1101,1189,1211,1236,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8751,111,4,2,116,119,1089,1092,59,1,168,110,65,114,114,111,119,59,1,8659,4,2,101,111,1107,1141,102,116,4,3,65,82,84,1117,1124,1136,114,114,111,119,59,1,8656,105,103,104,116,65,114,114,111,119,59,1,8660,101,101,59,1,10980,110,103,4,2,76,82,1149,1177,101,102,116,4,2,65,82,1158,1165,114,114,111,119,59,1,10232,105,103,104,116,65,114,114,111,119,59,1,10234,105,103,104,116,65,114,114,111,119,59,1,10233,105,103,104,116,4,2,65,84,1199,1206,114,114,111,119,59,1,8658,101,101,59,1,8872,112,4,2,65,68,1218,1225,114,114,111,119,59,1,8657,111,119,110,65,114,114,111,119,59,1,8661,101,114,116,105,99,97,108,66,97,114,59,1,8741,110,4,6,65,66,76,82,84,97,1264,1292,1299,1352,1391,1408,114,114,111,119,4,3,59,66,85,1276,1278,1283,1,8595,97,114,59,1,10515,112,65,114,114,111,119,59,1,8693,114,101,118,101,59,1,785,101,102,116,4,3,82,84,86,1310,1323,1334,105,103,104,116,86,101,99,116,111,114,59,1,10576,101,101,86,101,99,116,111,114,59,1,10590,101,99,116,111,114,4,2,59,66,1345,1347,1,8637,97,114,59,1,10582,105,103,104,116,4,2,84,86,1362,1373,101,101,86,101,99,116,111,114,59,1,10591,101,99,116,111,114,4,2,59,66,1384,1386,1,8641,97,114,59,1,10583,101,101,4,2,59,65,1399,1401,1,8868,114,114,111,119,59,1,8615,114,114,111,119,59,1,8659,4,2,99,116,1421,1426,114,59,3,55349,56479,114,111,107,59,1,272,4,16,78,84,97,99,100,102,103,108,109,111,112,113,115,116,117,120,1466,1470,1478,1489,1515,1520,1525,1536,1544,1593,1609,1617,1650,1664,1668,1677,71,59,1,330,72,5,208,1,59,1476,1,208,99,117,116,101,5,201,1,59,1487,1,201,4,3,97,105,121,1497,1503,1512,114,111,110,59,1,282,114,99,5,202,1,59,1510,1,202,59,1,1069,111,116,59,1,278,114,59,3,55349,56584,114,97,118,101,5,200,1,59,1534,1,200,101,109,101,110,116,59,1,8712,4,2,97,112,1550,1555,99,114,59,1,274,116,121,4,2,83,86,1563,1576,109,97,108,108,83,113,117,97,114,101,59,1,9723,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9643,4,2,103,112,1599,1604,111,110,59,1,280,102,59,3,55349,56636,115,105,108,111,110,59,1,917,117,4,2,97,105,1624,1640,108,4,2,59,84,1631,1633,1,10869,105,108,100,101,59,1,8770,108,105,98,114,105,117,109,59,1,8652,4,2,99,105,1656,1660,114,59,1,8496,109,59,1,10867,97,59,1,919,109,108,5,203,1,59,1675,1,203,4,2,105,112,1683,1689,115,116,115,59,1,8707,111,110,101,110,116,105,97,108,69,59,1,8519,4,5,99,102,105,111,115,1713,1717,1722,1762,1791,121,59,1,1060,114,59,3,55349,56585,108,108,101,100,4,2,83,86,1732,1745,109,97,108,108,83,113,117,97,114,101,59,1,9724,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9642,4,3,112,114,117,1770,1775,1781,102,59,3,55349,56637,65,108,108,59,1,8704,114,105,101,114,116,114,102,59,1,8497,99,114,59,1,8497,4,12,74,84,97,98,99,100,102,103,111,114,115,116,1822,1827,1834,1848,1855,1877,1882,1887,1890,1896,1978,1984,99,121,59,1,1027,5,62,1,59,1832,1,62,109,109,97,4,2,59,100,1843,1845,1,915,59,1,988,114,101,118,101,59,1,286,4,3,101,105,121,1863,1869,1874,100,105,108,59,1,290,114,99,59,1,284,59,1,1043,111,116,59,1,288,114,59,3,55349,56586,59,1,8921,112,102,59,3,55349,56638,101,97,116,101,114,4,6,69,70,71,76,83,84,1915,1933,1944,1953,1959,1971,113,117,97,108,4,2,59,76,1925,1927,1,8805,101,115,115,59,1,8923,117,108,108,69,113,117,97,108,59,1,8807,114,101,97,116,101,114,59,1,10914,101,115,115,59,1,8823,108,97,110,116,69,113,117,97,108,59,1,10878,105,108,100,101,59,1,8819,99,114,59,3,55349,56482,59,1,8811,4,8,65,97,99,102,105,111,115,117,2005,2012,2026,2032,2036,2049,2073,2089,82,68,99,121,59,1,1066,4,2,99,116,2018,2023,101,107,59,1,711,59,1,94,105,114,99,59,1,292,114,59,1,8460,108,98,101,114,116,83,112,97,99,101,59,1,8459,4,2,112,114,2055,2059,102,59,1,8461,105,122,111,110,116,97,108,76,105,110,101,59,1,9472,4,2,99,116,2079,2083,114,59,1,8459,114,111,107,59,1,294,109,112,4,2,68,69,2097,2107,111,119,110,72,117,109,112,59,1,8782,113,117,97,108,59,1,8783,4,14,69,74,79,97,99,100,102,103,109,110,111,115,116,117,2144,2149,2155,2160,2171,2189,2194,2198,2209,2245,2307,2329,2334,2341,99,121,59,1,1045,108,105,103,59,1,306,99,121,59,1,1025,99,117,116,101,5,205,1,59,2169,1,205,4,2,105,121,2177,2186,114,99,5,206,1,59,2184,1,206,59,1,1048,111,116,59,1,304,114,59,1,8465,114,97,118,101,5,204,1,59,2207,1,204,4,3,59,97,112,2217,2219,2238,1,8465,4,2,99,103,2225,2229,114,59,1,298,105,110,97,114,121,73,59,1,8520,108,105,101,115,59,1,8658,4,2,116,118,2251,2281,4,2,59,101,2257,2259,1,8748,4,2,103,114,2265,2271,114,97,108,59,1,8747,115,101,99,116,105,111,110,59,1,8898,105,115,105,98,108,101,4,2,67,84,2293,2300,111,109,109,97,59,1,8291,105,109,101,115,59,1,8290,4,3,103,112,116,2315,2320,2325,111,110,59,1,302,102,59,3,55349,56640,97,59,1,921,99,114,59,1,8464,105,108,100,101,59,1,296,4,2,107,109,2347,2352,99,121,59,1,1030,108,5,207,1,59,2358,1,207,4,5,99,102,111,115,117,2372,2386,2391,2397,2414,4,2,105,121,2378,2383,114,99,59,1,308,59,1,1049,114,59,3,55349,56589,112,102,59,3,55349,56641,4,2,99,101,2403,2408,114,59,3,55349,56485,114,99,121,59,1,1032,107,99,121,59,1,1028,4,7,72,74,97,99,102,111,115,2436,2441,2446,2452,2467,2472,2478,99,121,59,1,1061,99,121,59,1,1036,112,112,97,59,1,922,4,2,101,121,2458,2464,100,105,108,59,1,310,59,1,1050,114,59,3,55349,56590,112,102,59,3,55349,56642,99,114,59,3,55349,56486,4,11,74,84,97,99,101,102,108,109,111,115,116,2508,2513,2520,2562,2585,2981,2986,3004,3011,3146,3167,99,121,59,1,1033,5,60,1,59,2518,1,60,4,5,99,109,110,112,114,2532,2538,2544,2548,2558,117,116,101,59,1,313,98,100,97,59,1,923,103,59,1,10218,108,97,99,101,116,114,102,59,1,8466,114,59,1,8606,4,3,97,101,121,2570,2576,2582,114,111,110,59,1,317,100,105,108,59,1,315,59,1,1051,4,2,102,115,2591,2907,116,4,10,65,67,68,70,82,84,85,86,97,114,2614,2663,2672,2728,2735,2760,2820,2870,2888,2895,4,2,110,114,2620,2633,103,108,101,66,114,97,99,107,101,116,59,1,10216,114,111,119,4,3,59,66,82,2644,2646,2651,1,8592,97,114,59,1,8676,105,103,104,116,65,114,114,111,119,59,1,8646,101,105,108,105,110,103,59,1,8968,111,4,2,117,119,2679,2692,98,108,101,66,114,97,99,107,101,116,59,1,10214,110,4,2,84,86,2699,2710,101,101,86,101,99,116,111,114,59,1,10593,101,99,116,111,114,4,2,59,66,2721,2723,1,8643,97,114,59,1,10585,108,111,111,114,59,1,8970,105,103,104,116,4,2,65,86,2745,2752,114,114,111,119,59,1,8596,101,99,116,111,114,59,1,10574,4,2,101,114,2766,2792,101,4,3,59,65,86,2775,2777,2784,1,8867,114,114,111,119,59,1,8612,101,99,116,111,114,59,1,10586,105,97,110,103,108,101,4,3,59,66,69,2806,2808,2813,1,8882,97,114,59,1,10703,113,117,97,108,59,1,8884,112,4,3,68,84,86,2829,2841,2852,111,119,110,86,101,99,116,111,114,59,1,10577,101,101,86,101,99,116,111,114,59,1,10592,101,99,116,111,114,4,2,59,66,2863,2865,1,8639,97,114,59,1,10584,101,99,116,111,114,4,2,59,66,2881,2883,1,8636,97,114,59,1,10578,114,114,111,119,59,1,8656,105,103,104,116,97,114,114,111,119,59,1,8660,115,4,6,69,70,71,76,83,84,2922,2936,2947,2956,2962,2974,113,117,97,108,71,114,101,97,116,101,114,59,1,8922,117,108,108,69,113,117,97,108,59,1,8806,114,101,97,116,101,114,59,1,8822,101,115,115,59,1,10913,108,97,110,116,69,113,117,97,108,59,1,10877,105,108,100,101,59,1,8818,114,59,3,55349,56591,4,2,59,101,2992,2994,1,8920,102,116,97,114,114,111,119,59,1,8666,105,100,111,116,59,1,319,4,3,110,112,119,3019,3110,3115,103,4,4,76,82,108,114,3030,3058,3070,3098,101,102,116,4,2,65,82,3039,3046,114,114,111,119,59,1,10229,105,103,104,116,65,114,114,111,119,59,1,10231,105,103,104,116,65,114,114,111,119,59,1,10230,101,102,116,4,2,97,114,3079,3086,114,114,111,119,59,1,10232,105,103,104,116,97,114,114,111,119,59,1,10234,105,103,104,116,97,114,114,111,119,59,1,10233,102,59,3,55349,56643,101,114,4,2,76,82,3123,3134,101,102,116,65,114,114,111,119,59,1,8601,105,103,104,116,65,114,114,111,119,59,1,8600,4,3,99,104,116,3154,3158,3161,114,59,1,8466,59,1,8624,114,111,107,59,1,321,59,1,8810,4,8,97,99,101,102,105,111,115,117,3188,3192,3196,3222,3227,3237,3243,3248,112,59,1,10501,121,59,1,1052,4,2,100,108,3202,3213,105,117,109,83,112,97,99,101,59,1,8287,108,105,110,116,114,102,59,1,8499,114,59,3,55349,56592,110,117,115,80,108,117,115,59,1,8723,112,102,59,3,55349,56644,99,114,59,1,8499,59,1,924,4,9,74,97,99,101,102,111,115,116,117,3271,3276,3283,3306,3422,3427,4120,4126,4137,99,121,59,1,1034,99,117,116,101,59,1,323,4,3,97,101,121,3291,3297,3303,114,111,110,59,1,327,100,105,108,59,1,325,59,1,1053,4,3,103,115,119,3314,3380,3415,97,116,105,118,101,4,3,77,84,86,3327,3340,3365,101,100,105,117,109,83,112,97,99,101,59,1,8203,104,105,4,2,99,110,3348,3357,107,83,112,97,99,101,59,1,8203,83,112,97,99,101,59,1,8203,101,114,121,84,104,105,110,83,112,97,99,101,59,1,8203,116,101,100,4,2,71,76,3389,3405,114,101,97,116,101,114,71,114,101,97,116,101,114,59,1,8811,101,115,115,76,101,115,115,59,1,8810,76,105,110,101,59,1,10,114,59,3,55349,56593,4,4,66,110,112,116,3437,3444,3460,3464,114,101,97,107,59,1,8288,66,114,101,97,107,105,110,103,83,112,97,99,101,59,1,160,102,59,1,8469,4,13,59,67,68,69,71,72,76,78,80,82,83,84,86,3492,3494,3517,3536,3578,3657,3685,3784,3823,3860,3915,4066,4107,1,10988,4,2,111,117,3500,3510,110,103,114,117,101,110,116,59,1,8802,112,67,97,112,59,1,8813,111,117,98,108,101,86,101,114,116,105,99,97,108,66,97,114,59,1,8742,4,3,108,113,120,3544,3552,3571,101,109,101,110,116,59,1,8713,117,97,108,4,2,59,84,3561,3563,1,8800,105,108,100,101,59,3,8770,824,105,115,116,115,59,1,8708,114,101,97,116,101,114,4,7,59,69,70,71,76,83,84,3600,3602,3609,3621,3631,3637,3650,1,8815,113,117,97,108,59,1,8817,117,108,108,69,113,117,97,108,59,3,8807,824,114,101,97,116,101,114,59,3,8811,824,101,115,115,59,1,8825,108,97,110,116,69,113,117,97,108,59,3,10878,824,105,108,100,101,59,1,8821,117,109,112,4,2,68,69,3666,3677,111,119,110,72,117,109,112,59,3,8782,824,113,117,97,108,59,3,8783,824,101,4,2,102,115,3692,3724,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3709,3711,3717,1,8938,97,114,59,3,10703,824,113,117,97,108,59,1,8940,115,4,6,59,69,71,76,83,84,3739,3741,3748,3757,3764,3777,1,8814,113,117,97,108,59,1,8816,114,101,97,116,101,114,59,1,8824,101,115,115,59,3,8810,824,108,97,110,116,69,113,117,97,108,59,3,10877,824,105,108,100,101,59,1,8820,101,115,116,101,100,4,2,71,76,3795,3812,114,101,97,116,101,114,71,114,101,97,116,101,114,59,3,10914,824,101,115,115,76,101,115,115,59,3,10913,824,114,101,99,101,100,101,115,4,3,59,69,83,3838,3840,3848,1,8832,113,117,97,108,59,3,10927,824,108,97,110,116,69,113,117,97,108,59,1,8928,4,2,101,105,3866,3881,118,101,114,115,101,69,108,101,109,101,110,116,59,1,8716,103,104,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3900,3902,3908,1,8939,97,114,59,3,10704,824,113,117,97,108,59,1,8941,4,2,113,117,3921,3973,117,97,114,101,83,117,4,2,98,112,3933,3952,115,101,116,4,2,59,69,3942,3945,3,8847,824,113,117,97,108,59,1,8930,101,114,115,101,116,4,2,59,69,3963,3966,3,8848,824,113,117,97,108,59,1,8931,4,3,98,99,112,3981,4e3,4045,115,101,116,4,2,59,69,3990,3993,3,8834,8402,113,117,97,108,59,1,8840,99,101,101,100,115,4,4,59,69,83,84,4015,4017,4025,4037,1,8833,113,117,97,108,59,3,10928,824,108,97,110,116,69,113,117,97,108,59,1,8929,105,108,100,101,59,3,8831,824,101,114,115,101,116,4,2,59,69,4056,4059,3,8835,8402,113,117,97,108,59,1,8841,105,108,100,101,4,4,59,69,70,84,4080,4082,4089,4100,1,8769,113,117,97,108,59,1,8772,117,108,108,69,113,117,97,108,59,1,8775,105,108,100,101,59,1,8777,101,114,116,105,99,97,108,66,97,114,59,1,8740,99,114,59,3,55349,56489,105,108,100,101,5,209,1,59,4135,1,209,59,1,925,4,14,69,97,99,100,102,103,109,111,112,114,115,116,117,118,4170,4176,4187,4205,4212,4217,4228,4253,4259,4292,4295,4316,4337,4346,108,105,103,59,1,338,99,117,116,101,5,211,1,59,4185,1,211,4,2,105,121,4193,4202,114,99,5,212,1,59,4200,1,212,59,1,1054,98,108,97,99,59,1,336,114,59,3,55349,56594,114,97,118,101,5,210,1,59,4226,1,210,4,3,97,101,105,4236,4241,4246,99,114,59,1,332,103,97,59,1,937,99,114,111,110,59,1,927,112,102,59,3,55349,56646,101,110,67,117,114,108,121,4,2,68,81,4272,4285,111,117,98,108,101,81,117,111,116,101,59,1,8220,117,111,116,101,59,1,8216,59,1,10836,4,2,99,108,4301,4306,114,59,3,55349,56490,97,115,104,5,216,1,59,4314,1,216,105,4,2,108,109,4323,4332,100,101,5,213,1,59,4330,1,213,101,115,59,1,10807,109,108,5,214,1,59,4344,1,214,101,114,4,2,66,80,4354,4380,4,2,97,114,4360,4364,114,59,1,8254,97,99,4,2,101,107,4372,4375,59,1,9182,101,116,59,1,9140,97,114,101,110,116,104,101,115,105,115,59,1,9180,4,9,97,99,102,104,105,108,111,114,115,4413,4422,4426,4431,4435,4438,4448,4471,4561,114,116,105,97,108,68,59,1,8706,121,59,1,1055,114,59,3,55349,56595,105,59,1,934,59,1,928,117,115,77,105,110,117,115,59,1,177,4,2,105,112,4454,4467,110,99,97,114,101,112,108,97,110,101,59,1,8460,102,59,1,8473,4,4,59,101,105,111,4481,4483,4526,4531,1,10939,99,101,100,101,115,4,4,59,69,83,84,4498,4500,4507,4519,1,8826,113,117,97,108,59,1,10927,108,97,110,116,69,113,117,97,108,59,1,8828,105,108,100,101,59,1,8830,109,101,59,1,8243,4,2,100,112,4537,4543,117,99,116,59,1,8719,111,114,116,105,111,110,4,2,59,97,4555,4557,1,8759,108,59,1,8733,4,2,99,105,4567,4572,114,59,3,55349,56491,59,1,936,4,4,85,102,111,115,4585,4594,4599,4604,79,84,5,34,1,59,4592,1,34,114,59,3,55349,56596,112,102,59,1,8474,99,114,59,3,55349,56492,4,12,66,69,97,99,101,102,104,105,111,114,115,117,4636,4642,4650,4681,4704,4763,4767,4771,5047,5069,5081,5094,97,114,114,59,1,10512,71,5,174,1,59,4648,1,174,4,3,99,110,114,4658,4664,4668,117,116,101,59,1,340,103,59,1,10219,114,4,2,59,116,4675,4677,1,8608,108,59,1,10518,4,3,97,101,121,4689,4695,4701,114,111,110,59,1,344,100,105,108,59,1,342,59,1,1056,4,2,59,118,4710,4712,1,8476,101,114,115,101,4,2,69,85,4722,4748,4,2,108,113,4728,4736,101,109,101,110,116,59,1,8715,117,105,108,105,98,114,105,117,109,59,1,8651,112,69,113,117,105,108,105,98,114,105,117,109,59,1,10607,114,59,1,8476,111,59,1,929,103,104,116,4,8,65,67,68,70,84,85,86,97,4792,4840,4849,4905,4912,4972,5022,5040,4,2,110,114,4798,4811,103,108,101,66,114,97,99,107,101,116,59,1,10217,114,111,119,4,3,59,66,76,4822,4824,4829,1,8594,97,114,59,1,8677,101,102,116,65,114,114,111,119,59,1,8644,101,105,108,105,110,103,59,1,8969,111,4,2,117,119,4856,4869,98,108,101,66,114,97,99,107,101,116,59,1,10215,110,4,2,84,86,4876,4887,101,101,86,101,99,116,111,114,59,1,10589,101,99,116,111,114,4,2,59,66,4898,4900,1,8642,97,114,59,1,10581,108,111,111,114,59,1,8971,4,2,101,114,4918,4944,101,4,3,59,65,86,4927,4929,4936,1,8866,114,114,111,119,59,1,8614,101,99,116,111,114,59,1,10587,105,97,110,103,108,101,4,3,59,66,69,4958,4960,4965,1,8883,97,114,59,1,10704,113,117,97,108,59,1,8885,112,4,3,68,84,86,4981,4993,5004,111,119,110,86,101,99,116,111,114,59,1,10575,101,101,86,101,99,116,111,114,59,1,10588,101,99,116,111,114,4,2,59,66,5015,5017,1,8638,97,114,59,1,10580,101,99,116,111,114,4,2,59,66,5033,5035,1,8640,97,114,59,1,10579,114,114,111,119,59,1,8658,4,2,112,117,5053,5057,102,59,1,8477,110,100,73,109,112,108,105,101,115,59,1,10608,105,103,104,116,97,114,114,111,119,59,1,8667,4,2,99,104,5087,5091,114,59,1,8475,59,1,8625,108,101,68,101,108,97,121,101,100,59,1,10740,4,13,72,79,97,99,102,104,105,109,111,113,115,116,117,5134,5150,5157,5164,5198,5203,5259,5265,5277,5283,5374,5380,5385,4,2,67,99,5140,5146,72,99,121,59,1,1065,121,59,1,1064,70,84,99,121,59,1,1068,99,117,116,101,59,1,346,4,5,59,97,101,105,121,5176,5178,5184,5190,5195,1,10940,114,111,110,59,1,352,100,105,108,59,1,350,114,99,59,1,348,59,1,1057,114,59,3,55349,56598,111,114,116,4,4,68,76,82,85,5216,5227,5238,5250,111,119,110,65,114,114,111,119,59,1,8595,101,102,116,65,114,114,111,119,59,1,8592,105,103,104,116,65,114,114,111,119,59,1,8594,112,65,114,114,111,119,59,1,8593,103,109,97,59,1,931,97,108,108,67,105,114,99,108,101,59,1,8728,112,102,59,3,55349,56650,4,2,114,117,5289,5293,116,59,1,8730,97,114,101,4,4,59,73,83,85,5306,5308,5322,5367,1,9633,110,116,101,114,115,101,99,116,105,111,110,59,1,8851,117,4,2,98,112,5329,5347,115,101,116,4,2,59,69,5338,5340,1,8847,113,117,97,108,59,1,8849,101,114,115,101,116,4,2,59,69,5358,5360,1,8848,113,117,97,108,59,1,8850,110,105,111,110,59,1,8852,99,114,59,3,55349,56494,97,114,59,1,8902,4,4,98,99,109,112,5395,5420,5475,5478,4,2,59,115,5401,5403,1,8912,101,116,4,2,59,69,5411,5413,1,8912,113,117,97,108,59,1,8838,4,2,99,104,5426,5468,101,101,100,115,4,4,59,69,83,84,5440,5442,5449,5461,1,8827,113,117,97,108,59,1,10928,108,97,110,116,69,113,117,97,108,59,1,8829,105,108,100,101,59,1,8831,84,104,97,116,59,1,8715,59,1,8721,4,3,59,101,115,5486,5488,5507,1,8913,114,115,101,116,4,2,59,69,5498,5500,1,8835,113,117,97,108,59,1,8839,101,116,59,1,8913,4,11,72,82,83,97,99,102,104,105,111,114,115,5536,5546,5552,5567,5579,5602,5607,5655,5695,5701,5711,79,82,78,5,222,1,59,5544,1,222,65,68,69,59,1,8482,4,2,72,99,5558,5563,99,121,59,1,1035,121,59,1,1062,4,2,98,117,5573,5576,59,1,9,59,1,932,4,3,97,101,121,5587,5593,5599,114,111,110,59,1,356,100,105,108,59,1,354,59,1,1058,114,59,3,55349,56599,4,2,101,105,5613,5631,4,2,114,116,5619,5627,101,102,111,114,101,59,1,8756,97,59,1,920,4,2,99,110,5637,5647,107,83,112,97,99,101,59,3,8287,8202,83,112,97,99,101,59,1,8201,108,100,101,4,4,59,69,70,84,5668,5670,5677,5688,1,8764,113,117,97,108,59,1,8771,117,108,108,69,113,117,97,108,59,1,8773,105,108,100,101,59,1,8776,112,102,59,3,55349,56651,105,112,108,101,68,111,116,59,1,8411,4,2,99,116,5717,5722,114,59,3,55349,56495,114,111,107,59,1,358,4,14,97,98,99,100,102,103,109,110,111,112,114,115,116,117,5758,5789,5805,5823,5830,5835,5846,5852,5921,5937,6089,6095,6101,6108,4,2,99,114,5764,5774,117,116,101,5,218,1,59,5772,1,218,114,4,2,59,111,5781,5783,1,8607,99,105,114,59,1,10569,114,4,2,99,101,5796,5800,121,59,1,1038,118,101,59,1,364,4,2,105,121,5811,5820,114,99,5,219,1,59,5818,1,219,59,1,1059,98,108,97,99,59,1,368,114,59,3,55349,56600,114,97,118,101,5,217,1,59,5844,1,217,97,99,114,59,1,362,4,2,100,105,5858,5905,101,114,4,2,66,80,5866,5892,4,2,97,114,5872,5876,114,59,1,95,97,99,4,2,101,107,5884,5887,59,1,9183,101,116,59,1,9141,97,114,101,110,116,104,101,115,105,115,59,1,9181,111,110,4,2,59,80,5913,5915,1,8899,108,117,115,59,1,8846,4,2,103,112,5927,5932,111,110,59,1,370,102,59,3,55349,56652,4,8,65,68,69,84,97,100,112,115,5955,5985,5996,6009,6026,6033,6044,6075,114,114,111,119,4,3,59,66,68,5967,5969,5974,1,8593,97,114,59,1,10514,111,119,110,65,114,114,111,119,59,1,8645,111,119,110,65,114,114,111,119,59,1,8597,113,117,105,108,105,98,114,105,117,109,59,1,10606,101,101,4,2,59,65,6017,6019,1,8869,114,114,111,119,59,1,8613,114,114,111,119,59,1,8657,111,119,110,97,114,114,111,119,59,1,8661,101,114,4,2,76,82,6052,6063,101,102,116,65,114,114,111,119,59,1,8598,105,103,104,116,65,114,114,111,119,59,1,8599,105,4,2,59,108,6082,6084,1,978,111,110,59,1,933,105,110,103,59,1,366,99,114,59,3,55349,56496,105,108,100,101,59,1,360,109,108,5,220,1,59,6115,1,220,4,9,68,98,99,100,101,102,111,115,118,6137,6143,6148,6152,6166,6250,6255,6261,6267,97,115,104,59,1,8875,97,114,59,1,10987,121,59,1,1042,97,115,104,4,2,59,108,6161,6163,1,8873,59,1,10982,4,2,101,114,6172,6175,59,1,8897,4,3,98,116,121,6183,6188,6238,97,114,59,1,8214,4,2,59,105,6194,6196,1,8214,99,97,108,4,4,66,76,83,84,6209,6214,6220,6231,97,114,59,1,8739,105,110,101,59,1,124,101,112,97,114,97,116,111,114,59,1,10072,105,108,100,101,59,1,8768,84,104,105,110,83,112,97,99,101,59,1,8202,114,59,3,55349,56601,112,102,59,3,55349,56653,99,114,59,3,55349,56497,100,97,115,104,59,1,8874,4,5,99,101,102,111,115,6286,6292,6298,6303,6309,105,114,99,59,1,372,100,103,101,59,1,8896,114,59,3,55349,56602,112,102,59,3,55349,56654,99,114,59,3,55349,56498,4,4,102,105,111,115,6325,6330,6333,6339,114,59,3,55349,56603,59,1,926,112,102,59,3,55349,56655,99,114,59,3,55349,56499,4,9,65,73,85,97,99,102,111,115,117,6365,6370,6375,6380,6391,6405,6410,6416,6422,99,121,59,1,1071,99,121,59,1,1031,99,121,59,1,1070,99,117,116,101,5,221,1,59,6389,1,221,4,2,105,121,6397,6402,114,99,59,1,374,59,1,1067,114,59,3,55349,56604,112,102,59,3,55349,56656,99,114,59,3,55349,56500,109,108,59,1,376,4,8,72,97,99,100,101,102,111,115,6445,6450,6457,6472,6477,6501,6505,6510,99,121,59,1,1046,99,117,116,101,59,1,377,4,2,97,121,6463,6469,114,111,110,59,1,381,59,1,1047,111,116,59,1,379,4,2,114,116,6483,6497,111,87,105,100,116,104,83,112,97,99,101,59,1,8203,97,59,1,918,114,59,1,8488,112,102,59,1,8484,99,114,59,3,55349,56501,4,16,97,98,99,101,102,103,108,109,110,111,112,114,115,116,117,119,6550,6561,6568,6612,6622,6634,6645,6672,6699,6854,6870,6923,6933,6963,6974,6983,99,117,116,101,5,225,1,59,6559,1,225,114,101,118,101,59,1,259,4,6,59,69,100,105,117,121,6582,6584,6588,6591,6600,6609,1,8766,59,3,8766,819,59,1,8767,114,99,5,226,1,59,6598,1,226,116,101,5,180,1,59,6607,1,180,59,1,1072,108,105,103,5,230,1,59,6620,1,230,4,2,59,114,6628,6630,1,8289,59,3,55349,56606,114,97,118,101,5,224,1,59,6643,1,224,4,2,101,112,6651,6667,4,2,102,112,6657,6663,115,121,109,59,1,8501,104,59,1,8501,104,97,59,1,945,4,2,97,112,6678,6692,4,2,99,108,6684,6688,114,59,1,257,103,59,1,10815,5,38,1,59,6697,1,38,4,2,100,103,6705,6737,4,5,59,97,100,115,118,6717,6719,6724,6727,6734,1,8743,110,100,59,1,10837,59,1,10844,108,111,112,101,59,1,10840,59,1,10842,4,7,59,101,108,109,114,115,122,6753,6755,6758,6762,6814,6835,6848,1,8736,59,1,10660,101,59,1,8736,115,100,4,2,59,97,6770,6772,1,8737,4,8,97,98,99,100,101,102,103,104,6790,6793,6796,6799,6802,6805,6808,6811,59,1,10664,59,1,10665,59,1,10666,59,1,10667,59,1,10668,59,1,10669,59,1,10670,59,1,10671,116,4,2,59,118,6821,6823,1,8735,98,4,2,59,100,6830,6832,1,8894,59,1,10653,4,2,112,116,6841,6845,104,59,1,8738,59,1,197,97,114,114,59,1,9084,4,2,103,112,6860,6865,111,110,59,1,261,102,59,3,55349,56658,4,7,59,69,97,101,105,111,112,6886,6888,6891,6897,6900,6904,6908,1,8776,59,1,10864,99,105,114,59,1,10863,59,1,8778,100,59,1,8779,115,59,1,39,114,111,120,4,2,59,101,6917,6919,1,8776,113,59,1,8778,105,110,103,5,229,1,59,6931,1,229,4,3,99,116,121,6941,6946,6949,114,59,3,55349,56502,59,1,42,109,112,4,2,59,101,6957,6959,1,8776,113,59,1,8781,105,108,100,101,5,227,1,59,6972,1,227,109,108,5,228,1,59,6981,1,228,4,2,99,105,6989,6997,111,110,105,110,116,59,1,8755,110,116,59,1,10769,4,16,78,97,98,99,100,101,102,105,107,108,110,111,112,114,115,117,7036,7041,7119,7135,7149,7155,7219,7224,7347,7354,7463,7489,7786,7793,7814,7866,111,116,59,1,10989,4,2,99,114,7047,7094,107,4,4,99,101,112,115,7058,7064,7073,7080,111,110,103,59,1,8780,112,115,105,108,111,110,59,1,1014,114,105,109,101,59,1,8245,105,109,4,2,59,101,7088,7090,1,8765,113,59,1,8909,4,2,118,119,7100,7105,101,101,59,1,8893,101,100,4,2,59,103,7113,7115,1,8965,101,59,1,8965,114,107,4,2,59,116,7127,7129,1,9141,98,114,107,59,1,9142,4,2,111,121,7141,7146,110,103,59,1,8780,59,1,1073,113,117,111,59,1,8222,4,5,99,109,112,114,116,7167,7181,7188,7193,7199,97,117,115,4,2,59,101,7176,7178,1,8757,59,1,8757,112,116,121,118,59,1,10672,115,105,59,1,1014,110,111,117,59,1,8492,4,3,97,104,119,7207,7210,7213,59,1,946,59,1,8502,101,101,110,59,1,8812,114,59,3,55349,56607,103,4,7,99,111,115,116,117,118,119,7241,7262,7288,7305,7328,7335,7340,4,3,97,105,117,7249,7253,7258,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,4,3,100,112,116,7270,7275,7281,111,116,59,1,10752,108,117,115,59,1,10753,105,109,101,115,59,1,10754,4,2,113,116,7294,7300,99,117,112,59,1,10758,97,114,59,1,9733,114,105,97,110,103,108,101,4,2,100,117,7318,7324,111,119,110,59,1,9661,112,59,1,9651,112,108,117,115,59,1,10756,101,101,59,1,8897,101,100,103,101,59,1,8896,97,114,111,119,59,1,10509,4,3,97,107,111,7362,7436,7458,4,2,99,110,7368,7432,107,4,3,108,115,116,7377,7386,7394,111,122,101,110,103,101,59,1,10731,113,117,97,114,101,59,1,9642,114,105,97,110,103,108,101,4,4,59,100,108,114,7411,7413,7419,7425,1,9652,111,119,110,59,1,9662,101,102,116,59,1,9666,105,103,104,116,59,1,9656,107,59,1,9251,4,2,49,51,7442,7454,4,2,50,52,7448,7451,59,1,9618,59,1,9617,52,59,1,9619,99,107,59,1,9608,4,2,101,111,7469,7485,4,2,59,113,7475,7478,3,61,8421,117,105,118,59,3,8801,8421,116,59,1,8976,4,4,112,116,119,120,7499,7504,7517,7523,102,59,3,55349,56659,4,2,59,116,7510,7512,1,8869,111,109,59,1,8869,116,105,101,59,1,8904,4,12,68,72,85,86,98,100,104,109,112,116,117,118,7549,7571,7597,7619,7655,7660,7682,7708,7715,7721,7728,7750,4,4,76,82,108,114,7559,7562,7565,7568,59,1,9559,59,1,9556,59,1,9558,59,1,9555,4,5,59,68,85,100,117,7583,7585,7588,7591,7594,1,9552,59,1,9574,59,1,9577,59,1,9572,59,1,9575,4,4,76,82,108,114,7607,7610,7613,7616,59,1,9565,59,1,9562,59,1,9564,59,1,9561,4,7,59,72,76,82,104,108,114,7635,7637,7640,7643,7646,7649,7652,1,9553,59,1,9580,59,1,9571,59,1,9568,59,1,9579,59,1,9570,59,1,9567,111,120,59,1,10697,4,4,76,82,108,114,7670,7673,7676,7679,59,1,9557,59,1,9554,59,1,9488,59,1,9484,4,5,59,68,85,100,117,7694,7696,7699,7702,7705,1,9472,59,1,9573,59,1,9576,59,1,9516,59,1,9524,105,110,117,115,59,1,8863,108,117,115,59,1,8862,105,109,101,115,59,1,8864,4,4,76,82,108,114,7738,7741,7744,7747,59,1,9563,59,1,9560,59,1,9496,59,1,9492,4,7,59,72,76,82,104,108,114,7766,7768,7771,7774,7777,7780,7783,1,9474,59,1,9578,59,1,9569,59,1,9566,59,1,9532,59,1,9508,59,1,9500,114,105,109,101,59,1,8245,4,2,101,118,7799,7804,118,101,59,1,728,98,97,114,5,166,1,59,7812,1,166,4,4,99,101,105,111,7824,7829,7834,7846,114,59,3,55349,56503,109,105,59,1,8271,109,4,2,59,101,7841,7843,1,8765,59,1,8909,108,4,3,59,98,104,7855,7857,7860,1,92,59,1,10693,115,117,98,59,1,10184,4,2,108,109,7872,7885,108,4,2,59,101,7879,7881,1,8226,116,59,1,8226,112,4,3,59,69,101,7894,7896,7899,1,8782,59,1,10926,4,2,59,113,7905,7907,1,8783,59,1,8783,4,15,97,99,100,101,102,104,105,108,111,114,115,116,117,119,121,7942,8021,8075,8080,8121,8126,8157,8279,8295,8430,8446,8485,8491,8707,8726,4,3,99,112,114,7950,7956,8007,117,116,101,59,1,263,4,6,59,97,98,99,100,115,7970,7972,7977,7984,7998,8003,1,8745,110,100,59,1,10820,114,99,117,112,59,1,10825,4,2,97,117,7990,7994,112,59,1,10827,112,59,1,10823,111,116,59,1,10816,59,3,8745,65024,4,2,101,111,8013,8017,116,59,1,8257,110,59,1,711,4,4,97,101,105,117,8031,8046,8056,8061,4,2,112,114,8037,8041,115,59,1,10829,111,110,59,1,269,100,105,108,5,231,1,59,8054,1,231,114,99,59,1,265,112,115,4,2,59,115,8069,8071,1,10828,109,59,1,10832,111,116,59,1,267,4,3,100,109,110,8088,8097,8104,105,108,5,184,1,59,8095,1,184,112,116,121,118,59,1,10674,116,5,162,2,59,101,8112,8114,1,162,114,100,111,116,59,1,183,114,59,3,55349,56608,4,3,99,101,105,8134,8138,8154,121,59,1,1095,99,107,4,2,59,109,8146,8148,1,10003,97,114,107,59,1,10003,59,1,967,114,4,7,59,69,99,101,102,109,115,8174,8176,8179,8258,8261,8268,8273,1,9675,59,1,10691,4,3,59,101,108,8187,8189,8193,1,710,113,59,1,8791,101,4,2,97,100,8200,8223,114,114,111,119,4,2,108,114,8210,8216,101,102,116,59,1,8634,105,103,104,116,59,1,8635,4,5,82,83,97,99,100,8235,8238,8241,8246,8252,59,1,174,59,1,9416,115,116,59,1,8859,105,114,99,59,1,8858,97,115,104,59,1,8861,59,1,8791,110,105,110,116,59,1,10768,105,100,59,1,10991,99,105,114,59,1,10690,117,98,115,4,2,59,117,8288,8290,1,9827,105,116,59,1,9827,4,4,108,109,110,112,8305,8326,8376,8400,111,110,4,2,59,101,8313,8315,1,58,4,2,59,113,8321,8323,1,8788,59,1,8788,4,2,109,112,8332,8344,97,4,2,59,116,8339,8341,1,44,59,1,64,4,3,59,102,108,8352,8354,8358,1,8705,110,59,1,8728,101,4,2,109,120,8365,8371,101,110,116,59,1,8705,101,115,59,1,8450,4,2,103,105,8382,8395,4,2,59,100,8388,8390,1,8773,111,116,59,1,10861,110,116,59,1,8750,4,3,102,114,121,8408,8412,8417,59,3,55349,56660,111,100,59,1,8720,5,169,2,59,115,8424,8426,1,169,114,59,1,8471,4,2,97,111,8436,8441,114,114,59,1,8629,115,115,59,1,10007,4,2,99,117,8452,8457,114,59,3,55349,56504,4,2,98,112,8463,8474,4,2,59,101,8469,8471,1,10959,59,1,10961,4,2,59,101,8480,8482,1,10960,59,1,10962,100,111,116,59,1,8943,4,7,100,101,108,112,114,118,119,8507,8522,8536,8550,8600,8697,8702,97,114,114,4,2,108,114,8516,8519,59,1,10552,59,1,10549,4,2,112,115,8528,8532,114,59,1,8926,99,59,1,8927,97,114,114,4,2,59,112,8545,8547,1,8630,59,1,10557,4,6,59,98,99,100,111,115,8564,8566,8573,8587,8592,8596,1,8746,114,99,97,112,59,1,10824,4,2,97,117,8579,8583,112,59,1,10822,112,59,1,10826,111,116,59,1,8845,114,59,1,10821,59,3,8746,65024,4,4,97,108,114,118,8610,8623,8663,8672,114,114,4,2,59,109,8618,8620,1,8631,59,1,10556,121,4,3,101,118,119,8632,8651,8656,113,4,2,112,115,8639,8645,114,101,99,59,1,8926,117,99,99,59,1,8927,101,101,59,1,8910,101,100,103,101,59,1,8911,101,110,5,164,1,59,8670,1,164,101,97,114,114,111,119,4,2,108,114,8684,8690,101,102,116,59,1,8630,105,103,104,116,59,1,8631,101,101,59,1,8910,101,100,59,1,8911,4,2,99,105,8713,8721,111,110,105,110,116,59,1,8754,110,116,59,1,8753,108,99,116,121,59,1,9005,4,19,65,72,97,98,99,100,101,102,104,105,106,108,111,114,115,116,117,119,122,8773,8778,8783,8821,8839,8854,8887,8914,8930,8944,9036,9041,9058,9197,9227,9258,9281,9297,9305,114,114,59,1,8659,97,114,59,1,10597,4,4,103,108,114,115,8793,8799,8805,8809,103,101,114,59,1,8224,101,116,104,59,1,8504,114,59,1,8595,104,4,2,59,118,8816,8818,1,8208,59,1,8867,4,2,107,108,8827,8834,97,114,111,119,59,1,10511,97,99,59,1,733,4,2,97,121,8845,8851,114,111,110,59,1,271,59,1,1076,4,3,59,97,111,8862,8864,8880,1,8518,4,2,103,114,8870,8876,103,101,114,59,1,8225,114,59,1,8650,116,115,101,113,59,1,10871,4,3,103,108,109,8895,8902,8907,5,176,1,59,8900,1,176,116,97,59,1,948,112,116,121,118,59,1,10673,4,2,105,114,8920,8926,115,104,116,59,1,10623,59,3,55349,56609,97,114,4,2,108,114,8938,8941,59,1,8643,59,1,8642,4,5,97,101,103,115,118,8956,8986,8989,8996,9001,109,4,3,59,111,115,8965,8967,8983,1,8900,110,100,4,2,59,115,8975,8977,1,8900,117,105,116,59,1,9830,59,1,9830,59,1,168,97,109,109,97,59,1,989,105,110,59,1,8946,4,3,59,105,111,9009,9011,9031,1,247,100,101,5,247,2,59,111,9020,9022,1,247,110,116,105,109,101,115,59,1,8903,110,120,59,1,8903,99,121,59,1,1106,99,4,2,111,114,9048,9053,114,110,59,1,8990,111,112,59,1,8973,4,5,108,112,116,117,119,9070,9076,9081,9130,9144,108,97,114,59,1,36,102,59,3,55349,56661,4,5,59,101,109,112,115,9093,9095,9109,9116,9122,1,729,113,4,2,59,100,9102,9104,1,8784,111,116,59,1,8785,105,110,117,115,59,1,8760,108,117,115,59,1,8724,113,117,97,114,101,59,1,8865,98,108,101,98,97,114,119,101,100,103,101,59,1,8966,110,4,3,97,100,104,9153,9160,9172,114,114,111,119,59,1,8595,111,119,110,97,114,114,111,119,115,59,1,8650,97,114,112,111,111,110,4,2,108,114,9184,9190,101,102,116,59,1,8643,105,103,104,116,59,1,8642,4,2,98,99,9203,9211,107,97,114,111,119,59,1,10512,4,2,111,114,9217,9222,114,110,59,1,8991,111,112,59,1,8972,4,3,99,111,116,9235,9248,9252,4,2,114,121,9241,9245,59,3,55349,56505,59,1,1109,108,59,1,10742,114,111,107,59,1,273,4,2,100,114,9264,9269,111,116,59,1,8945,105,4,2,59,102,9276,9278,1,9663,59,1,9662,4,2,97,104,9287,9292,114,114,59,1,8693,97,114,59,1,10607,97,110,103,108,101,59,1,10662,4,2,99,105,9311,9315,121,59,1,1119,103,114,97,114,114,59,1,10239,4,18,68,97,99,100,101,102,103,108,109,110,111,112,113,114,115,116,117,120,9361,9376,9398,9439,9444,9447,9462,9495,9531,9585,9598,9614,9659,9755,9771,9792,9808,9826,4,2,68,111,9367,9372,111,116,59,1,10871,116,59,1,8785,4,2,99,115,9382,9392,117,116,101,5,233,1,59,9390,1,233,116,101,114,59,1,10862,4,4,97,105,111,121,9408,9414,9430,9436,114,111,110,59,1,283,114,4,2,59,99,9421,9423,1,8790,5,234,1,59,9428,1,234,108,111,110,59,1,8789,59,1,1101,111,116,59,1,279,59,1,8519,4,2,68,114,9453,9458,111,116,59,1,8786,59,3,55349,56610,4,3,59,114,115,9470,9472,9482,1,10906,97,118,101,5,232,1,59,9480,1,232,4,2,59,100,9488,9490,1,10902,111,116,59,1,10904,4,4,59,105,108,115,9505,9507,9515,9518,1,10905,110,116,101,114,115,59,1,9191,59,1,8467,4,2,59,100,9524,9526,1,10901,111,116,59,1,10903,4,3,97,112,115,9539,9544,9564,99,114,59,1,275,116,121,4,3,59,115,118,9554,9556,9561,1,8709,101,116,59,1,8709,59,1,8709,112,4,2,49,59,9571,9583,4,2,51,52,9577,9580,59,1,8196,59,1,8197,1,8195,4,2,103,115,9591,9594,59,1,331,112,59,1,8194,4,2,103,112,9604,9609,111,110,59,1,281,102,59,3,55349,56662,4,3,97,108,115,9622,9635,9640,114,4,2,59,115,9629,9631,1,8917,108,59,1,10723,117,115,59,1,10865,105,4,3,59,108,118,9649,9651,9656,1,949,111,110,59,1,949,59,1,1013,4,4,99,115,117,118,9669,9686,9716,9747,4,2,105,111,9675,9680,114,99,59,1,8790,108,111,110,59,1,8789,4,2,105,108,9692,9696,109,59,1,8770,97,110,116,4,2,103,108,9705,9710,116,114,59,1,10902,101,115,115,59,1,10901,4,3,97,101,105,9724,9729,9734,108,115,59,1,61,115,116,59,1,8799,118,4,2,59,68,9741,9743,1,8801,68,59,1,10872,112,97,114,115,108,59,1,10725,4,2,68,97,9761,9766,111,116,59,1,8787,114,114,59,1,10609,4,3,99,100,105,9779,9783,9788,114,59,1,8495,111,116,59,1,8784,109,59,1,8770,4,2,97,104,9798,9801,59,1,951,5,240,1,59,9806,1,240,4,2,109,114,9814,9822,108,5,235,1,59,9820,1,235,111,59,1,8364,4,3,99,105,112,9834,9838,9843,108,59,1,33,115,116,59,1,8707,4,2,101,111,9849,9859,99,116,97,116,105,111,110,59,1,8496,110,101,110,116,105,97,108,101,59,1,8519,4,12,97,99,101,102,105,106,108,110,111,112,114,115,9896,9910,9914,9921,9954,9960,9967,9989,9994,10027,10036,10164,108,108,105,110,103,100,111,116,115,101,113,59,1,8786,121,59,1,1092,109,97,108,101,59,1,9792,4,3,105,108,114,9929,9935,9950,108,105,103,59,1,64259,4,2,105,108,9941,9945,103,59,1,64256,105,103,59,1,64260,59,3,55349,56611,108,105,103,59,1,64257,108,105,103,59,3,102,106,4,3,97,108,116,9975,9979,9984,116,59,1,9837,105,103,59,1,64258,110,115,59,1,9649,111,102,59,1,402,4,2,112,114,1e4,10005,102,59,3,55349,56663,4,2,97,107,10011,10016,108,108,59,1,8704,4,2,59,118,10022,10024,1,8916,59,1,10969,97,114,116,105,110,116,59,1,10765,4,2,97,111,10042,10159,4,2,99,115,10048,10155,4,6,49,50,51,52,53,55,10062,10102,10114,10135,10139,10151,4,6,50,51,52,53,54,56,10076,10083,10086,10093,10096,10099,5,189,1,59,10081,1,189,59,1,8531,5,188,1,59,10091,1,188,59,1,8533,59,1,8537,59,1,8539,4,2,51,53,10108,10111,59,1,8532,59,1,8534,4,3,52,53,56,10122,10129,10132,5,190,1,59,10127,1,190,59,1,8535,59,1,8540,53,59,1,8536,4,2,54,56,10145,10148,59,1,8538,59,1,8541,56,59,1,8542,108,59,1,8260,119,110,59,1,8994,99,114,59,3,55349,56507,4,17,69,97,98,99,100,101,102,103,105,106,108,110,111,114,115,116,118,10206,10217,10247,10254,10268,10273,10358,10363,10374,10380,10385,10406,10458,10464,10470,10497,10610,4,2,59,108,10212,10214,1,8807,59,1,10892,4,3,99,109,112,10225,10231,10244,117,116,101,59,1,501,109,97,4,2,59,100,10239,10241,1,947,59,1,989,59,1,10886,114,101,118,101,59,1,287,4,2,105,121,10260,10265,114,99,59,1,285,59,1,1075,111,116,59,1,289,4,4,59,108,113,115,10283,10285,10288,10308,1,8805,59,1,8923,4,3,59,113,115,10296,10298,10301,1,8805,59,1,8807,108,97,110,116,59,1,10878,4,4,59,99,100,108,10318,10320,10324,10345,1,10878,99,59,1,10921,111,116,4,2,59,111,10332,10334,1,10880,4,2,59,108,10340,10342,1,10882,59,1,10884,4,2,59,101,10351,10354,3,8923,65024,115,59,1,10900,114,59,3,55349,56612,4,2,59,103,10369,10371,1,8811,59,1,8921,109,101,108,59,1,8503,99,121,59,1,1107,4,4,59,69,97,106,10395,10397,10400,10403,1,8823,59,1,10898,59,1,10917,59,1,10916,4,4,69,97,101,115,10416,10419,10434,10453,59,1,8809,112,4,2,59,112,10426,10428,1,10890,114,111,120,59,1,10890,4,2,59,113,10440,10442,1,10888,4,2,59,113,10448,10450,1,10888,59,1,8809,105,109,59,1,8935,112,102,59,3,55349,56664,97,118,101,59,1,96,4,2,99,105,10476,10480,114,59,1,8458,109,4,3,59,101,108,10489,10491,10494,1,8819,59,1,10894,59,1,10896,5,62,6,59,99,100,108,113,114,10512,10514,10527,10532,10538,10545,1,62,4,2,99,105,10520,10523,59,1,10919,114,59,1,10874,111,116,59,1,8919,80,97,114,59,1,10645,117,101,115,116,59,1,10876,4,5,97,100,101,108,115,10557,10574,10579,10599,10605,4,2,112,114,10563,10570,112,114,111,120,59,1,10886,114,59,1,10616,111,116,59,1,8919,113,4,2,108,113,10586,10592,101,115,115,59,1,8923,108,101,115,115,59,1,10892,101,115,115,59,1,8823,105,109,59,1,8819,4,2,101,110,10616,10626,114,116,110,101,113,113,59,3,8809,65024,69,59,3,8809,65024,4,10,65,97,98,99,101,102,107,111,115,121,10653,10658,10713,10718,10724,10760,10765,10786,10850,10875,114,114,59,1,8660,4,4,105,108,109,114,10668,10674,10678,10684,114,115,112,59,1,8202,102,59,1,189,105,108,116,59,1,8459,4,2,100,114,10690,10695,99,121,59,1,1098,4,3,59,99,119,10703,10705,10710,1,8596,105,114,59,1,10568,59,1,8621,97,114,59,1,8463,105,114,99,59,1,293,4,3,97,108,114,10732,10748,10754,114,116,115,4,2,59,117,10741,10743,1,9829,105,116,59,1,9829,108,105,112,59,1,8230,99,111,110,59,1,8889,114,59,3,55349,56613,115,4,2,101,119,10772,10779,97,114,111,119,59,1,10533,97,114,111,119,59,1,10534,4,5,97,109,111,112,114,10798,10803,10809,10839,10844,114,114,59,1,8703,116,104,116,59,1,8763,107,4,2,108,114,10816,10827,101,102,116,97,114,114,111,119,59,1,8617,105,103,104,116,97,114,114,111,119,59,1,8618,102,59,3,55349,56665,98,97,114,59,1,8213,4,3,99,108,116,10858,10863,10869,114,59,3,55349,56509,97,115,104,59,1,8463,114,111,107,59,1,295,4,2,98,112,10881,10887,117,108,108,59,1,8259,104,101,110,59,1,8208,4,15,97,99,101,102,103,105,106,109,110,111,112,113,115,116,117,10925,10936,10958,10977,10990,11001,11039,11045,11101,11192,11220,11226,11237,11285,11299,99,117,116,101,5,237,1,59,10934,1,237,4,3,59,105,121,10944,10946,10955,1,8291,114,99,5,238,1,59,10953,1,238,59,1,1080,4,2,99,120,10964,10968,121,59,1,1077,99,108,5,161,1,59,10975,1,161,4,2,102,114,10983,10986,59,1,8660,59,3,55349,56614,114,97,118,101,5,236,1,59,10999,1,236,4,4,59,105,110,111,11011,11013,11028,11034,1,8520,4,2,105,110,11019,11024,110,116,59,1,10764,116,59,1,8749,102,105,110,59,1,10716,116,97,59,1,8489,108,105,103,59,1,307,4,3,97,111,112,11053,11092,11096,4,3,99,103,116,11061,11065,11088,114,59,1,299,4,3,101,108,112,11073,11076,11082,59,1,8465,105,110,101,59,1,8464,97,114,116,59,1,8465,104,59,1,305,102,59,1,8887,101,100,59,1,437,4,5,59,99,102,111,116,11113,11115,11121,11136,11142,1,8712,97,114,101,59,1,8453,105,110,4,2,59,116,11129,11131,1,8734,105,101,59,1,10717,100,111,116,59,1,305,4,5,59,99,101,108,112,11154,11156,11161,11179,11186,1,8747,97,108,59,1,8890,4,2,103,114,11167,11173,101,114,115,59,1,8484,99,97,108,59,1,8890,97,114,104,107,59,1,10775,114,111,100,59,1,10812,4,4,99,103,112,116,11202,11206,11211,11216,121,59,1,1105,111,110,59,1,303,102,59,3,55349,56666,97,59,1,953,114,111,100,59,1,10812,117,101,115,116,5,191,1,59,11235,1,191,4,2,99,105,11243,11248,114,59,3,55349,56510,110,4,5,59,69,100,115,118,11261,11263,11266,11271,11282,1,8712,59,1,8953,111,116,59,1,8949,4,2,59,118,11277,11279,1,8948,59,1,8947,59,1,8712,4,2,59,105,11291,11293,1,8290,108,100,101,59,1,297,4,2,107,109,11305,11310,99,121,59,1,1110,108,5,239,1,59,11316,1,239,4,6,99,102,109,111,115,117,11332,11346,11351,11357,11363,11380,4,2,105,121,11338,11343,114,99,59,1,309,59,1,1081,114,59,3,55349,56615,97,116,104,59,1,567,112,102,59,3,55349,56667,4,2,99,101,11369,11374,114,59,3,55349,56511,114,99,121,59,1,1112,107,99,121,59,1,1108,4,8,97,99,102,103,104,106,111,115,11404,11418,11433,11438,11445,11450,11455,11461,112,112,97,4,2,59,118,11413,11415,1,954,59,1,1008,4,2,101,121,11424,11430,100,105,108,59,1,311,59,1,1082,114,59,3,55349,56616,114,101,101,110,59,1,312,99,121,59,1,1093,99,121,59,1,1116,112,102,59,3,55349,56668,99,114,59,3,55349,56512,4,23,65,66,69,72,97,98,99,100,101,102,103,104,106,108,109,110,111,112,114,115,116,117,118,11515,11538,11544,11555,11560,11721,11780,11818,11868,12136,12160,12171,12203,12208,12246,12275,12327,12509,12523,12569,12641,12732,12752,4,3,97,114,116,11523,11528,11532,114,114,59,1,8666,114,59,1,8656,97,105,108,59,1,10523,97,114,114,59,1,10510,4,2,59,103,11550,11552,1,8806,59,1,10891,97,114,59,1,10594,4,9,99,101,103,109,110,112,113,114,116,11580,11586,11594,11600,11606,11624,11627,11636,11694,117,116,101,59,1,314,109,112,116,121,118,59,1,10676,114,97,110,59,1,8466,98,100,97,59,1,955,103,4,3,59,100,108,11615,11617,11620,1,10216,59,1,10641,101,59,1,10216,59,1,10885,117,111,5,171,1,59,11634,1,171,114,4,8,59,98,102,104,108,112,115,116,11655,11657,11669,11673,11677,11681,11685,11690,1,8592,4,2,59,102,11663,11665,1,8676,115,59,1,10527,115,59,1,10525,107,59,1,8617,112,59,1,8619,108,59,1,10553,105,109,59,1,10611,108,59,1,8610,4,3,59,97,101,11702,11704,11709,1,10923,105,108,59,1,10521,4,2,59,115,11715,11717,1,10925,59,3,10925,65024,4,3,97,98,114,11729,11734,11739,114,114,59,1,10508,114,107,59,1,10098,4,2,97,107,11745,11758,99,4,2,101,107,11752,11755,59,1,123,59,1,91,4,2,101,115,11764,11767,59,1,10635,108,4,2,100,117,11774,11777,59,1,10639,59,1,10637,4,4,97,101,117,121,11790,11796,11811,11815,114,111,110,59,1,318,4,2,100,105,11802,11807,105,108,59,1,316,108,59,1,8968,98,59,1,123,59,1,1083,4,4,99,113,114,115,11828,11832,11845,11864,97,59,1,10550,117,111,4,2,59,114,11840,11842,1,8220,59,1,8222,4,2,100,117,11851,11857,104,97,114,59,1,10599,115,104,97,114,59,1,10571,104,59,1,8626,4,5,59,102,103,113,115,11880,11882,12008,12011,12031,1,8804,116,4,5,97,104,108,114,116,11895,11913,11935,11947,11996,114,114,111,119,4,2,59,116,11905,11907,1,8592,97,105,108,59,1,8610,97,114,112,111,111,110,4,2,100,117,11925,11931,111,119,110,59,1,8637,112,59,1,8636,101,102,116,97,114,114,111,119,115,59,1,8647,105,103,104,116,4,3,97,104,115,11959,11974,11984,114,114,111,119,4,2,59,115,11969,11971,1,8596,59,1,8646,97,114,112,111,111,110,115,59,1,8651,113,117,105,103,97,114,114,111,119,59,1,8621,104,114,101,101,116,105,109,101,115,59,1,8907,59,1,8922,4,3,59,113,115,12019,12021,12024,1,8804,59,1,8806,108,97,110,116,59,1,10877,4,5,59,99,100,103,115,12043,12045,12049,12070,12083,1,10877,99,59,1,10920,111,116,4,2,59,111,12057,12059,1,10879,4,2,59,114,12065,12067,1,10881,59,1,10883,4,2,59,101,12076,12079,3,8922,65024,115,59,1,10899,4,5,97,100,101,103,115,12095,12103,12108,12126,12131,112,112,114,111,120,59,1,10885,111,116,59,1,8918,113,4,2,103,113,12115,12120,116,114,59,1,8922,103,116,114,59,1,10891,116,114,59,1,8822,105,109,59,1,8818,4,3,105,108,114,12144,12150,12156,115,104,116,59,1,10620,111,111,114,59,1,8970,59,3,55349,56617,4,2,59,69,12166,12168,1,8822,59,1,10897,4,2,97,98,12177,12198,114,4,2,100,117,12184,12187,59,1,8637,4,2,59,108,12193,12195,1,8636,59,1,10602,108,107,59,1,9604,99,121,59,1,1113,4,5,59,97,99,104,116,12220,12222,12227,12235,12241,1,8810,114,114,59,1,8647,111,114,110,101,114,59,1,8990,97,114,100,59,1,10603,114,105,59,1,9722,4,2,105,111,12252,12258,100,111,116,59,1,320,117,115,116,4,2,59,97,12267,12269,1,9136,99,104,101,59,1,9136,4,4,69,97,101,115,12285,12288,12303,12322,59,1,8808,112,4,2,59,112,12295,12297,1,10889,114,111,120,59,1,10889,4,2,59,113,12309,12311,1,10887,4,2,59,113,12317,12319,1,10887,59,1,8808,105,109,59,1,8934,4,8,97,98,110,111,112,116,119,122,12345,12359,12364,12421,12446,12467,12474,12490,4,2,110,114,12351,12355,103,59,1,10220,114,59,1,8701,114,107,59,1,10214,103,4,3,108,109,114,12373,12401,12409,101,102,116,4,2,97,114,12382,12389,114,114,111,119,59,1,10229,105,103,104,116,97,114,114,111,119,59,1,10231,97,112,115,116,111,59,1,10236,105,103,104,116,97,114,114,111,119,59,1,10230,112,97,114,114,111,119,4,2,108,114,12433,12439,101,102,116,59,1,8619,105,103,104,116,59,1,8620,4,3,97,102,108,12454,12458,12462,114,59,1,10629,59,3,55349,56669,117,115,59,1,10797,105,109,101,115,59,1,10804,4,2,97,98,12480,12485,115,116,59,1,8727,97,114,59,1,95,4,3,59,101,102,12498,12500,12506,1,9674,110,103,101,59,1,9674,59,1,10731,97,114,4,2,59,108,12517,12519,1,40,116,59,1,10643,4,5,97,99,104,109,116,12535,12540,12548,12561,12564,114,114,59,1,8646,111,114,110,101,114,59,1,8991,97,114,4,2,59,100,12556,12558,1,8651,59,1,10605,59,1,8206,114,105,59,1,8895,4,6,97,99,104,105,113,116,12583,12589,12594,12597,12614,12635,113,117,111,59,1,8249,114,59,3,55349,56513,59,1,8624,109,4,3,59,101,103,12606,12608,12611,1,8818,59,1,10893,59,1,10895,4,2,98,117,12620,12623,59,1,91,111,4,2,59,114,12630,12632,1,8216,59,1,8218,114,111,107,59,1,322,5,60,8,59,99,100,104,105,108,113,114,12660,12662,12675,12680,12686,12692,12698,12705,1,60,4,2,99,105,12668,12671,59,1,10918,114,59,1,10873,111,116,59,1,8918,114,101,101,59,1,8907,109,101,115,59,1,8905,97,114,114,59,1,10614,117,101,115,116,59,1,10875,4,2,80,105,12711,12716,97,114,59,1,10646,4,3,59,101,102,12724,12726,12729,1,9667,59,1,8884,59,1,9666,114,4,2,100,117,12739,12746,115,104,97,114,59,1,10570,104,97,114,59,1,10598,4,2,101,110,12758,12768,114,116,110,101,113,113,59,3,8808,65024,69,59,3,8808,65024,4,14,68,97,99,100,101,102,104,105,108,110,111,112,115,117,12803,12809,12893,12908,12914,12928,12933,12937,13011,13025,13032,13049,13052,13069,68,111,116,59,1,8762,4,4,99,108,112,114,12819,12827,12849,12887,114,5,175,1,59,12825,1,175,4,2,101,116,12833,12836,59,1,9794,4,2,59,101,12842,12844,1,10016,115,101,59,1,10016,4,2,59,115,12855,12857,1,8614,116,111,4,4,59,100,108,117,12869,12871,12877,12883,1,8614,111,119,110,59,1,8615,101,102,116,59,1,8612,112,59,1,8613,107,101,114,59,1,9646,4,2,111,121,12899,12905,109,109,97,59,1,10793,59,1,1084,97,115,104,59,1,8212,97,115,117,114,101,100,97,110,103,108,101,59,1,8737,114,59,3,55349,56618,111,59,1,8487,4,3,99,100,110,12945,12954,12985,114,111,5,181,1,59,12952,1,181,4,4,59,97,99,100,12964,12966,12971,12976,1,8739,115,116,59,1,42,105,114,59,1,10992,111,116,5,183,1,59,12983,1,183,117,115,4,3,59,98,100,12995,12997,13e3,1,8722,59,1,8863,4,2,59,117,13006,13008,1,8760,59,1,10794,4,2,99,100,13017,13021,112,59,1,10971,114,59,1,8230,112,108,117,115,59,1,8723,4,2,100,112,13038,13044,101,108,115,59,1,8871,102,59,3,55349,56670,59,1,8723,4,2,99,116,13058,13063,114,59,3,55349,56514,112,111,115,59,1,8766,4,3,59,108,109,13077,13079,13087,1,956,116,105,109,97,112,59,1,8888,97,112,59,1,8888,4,24,71,76,82,86,97,98,99,100,101,102,103,104,105,106,108,109,111,112,114,115,116,117,118,119,13142,13165,13217,13229,13247,13330,13359,13414,13420,13508,13513,13579,13602,13626,13631,13762,13767,13855,13936,13995,14214,14285,14312,14432,4,2,103,116,13148,13152,59,3,8921,824,4,2,59,118,13158,13161,3,8811,8402,59,3,8811,824,4,3,101,108,116,13173,13200,13204,102,116,4,2,97,114,13181,13188,114,114,111,119,59,1,8653,105,103,104,116,97,114,114,111,119,59,1,8654,59,3,8920,824,4,2,59,118,13210,13213,3,8810,8402,59,3,8810,824,105,103,104,116,97,114,114,111,119,59,1,8655,4,2,68,100,13235,13241,97,115,104,59,1,8879,97,115,104,59,1,8878,4,5,98,99,110,112,116,13259,13264,13270,13275,13308,108,97,59,1,8711,117,116,101,59,1,324,103,59,3,8736,8402,4,5,59,69,105,111,112,13287,13289,13293,13298,13302,1,8777,59,3,10864,824,100,59,3,8779,824,115,59,1,329,114,111,120,59,1,8777,117,114,4,2,59,97,13316,13318,1,9838,108,4,2,59,115,13325,13327,1,9838,59,1,8469,4,2,115,117,13336,13344,112,5,160,1,59,13342,1,160,109,112,4,2,59,101,13352,13355,3,8782,824,59,3,8783,824,4,5,97,101,111,117,121,13371,13385,13391,13407,13411,4,2,112,114,13377,13380,59,1,10819,111,110,59,1,328,100,105,108,59,1,326,110,103,4,2,59,100,13399,13401,1,8775,111,116,59,3,10861,824,112,59,1,10818,59,1,1085,97,115,104,59,1,8211,4,7,59,65,97,100,113,115,120,13436,13438,13443,13466,13472,13478,13494,1,8800,114,114,59,1,8663,114,4,2,104,114,13450,13454,107,59,1,10532,4,2,59,111,13460,13462,1,8599,119,59,1,8599,111,116,59,3,8784,824,117,105,118,59,1,8802,4,2,101,105,13484,13489,97,114,59,1,10536,109,59,3,8770,824,105,115,116,4,2,59,115,13503,13505,1,8708,59,1,8708,114,59,3,55349,56619,4,4,69,101,115,116,13523,13527,13563,13568,59,3,8807,824,4,3,59,113,115,13535,13537,13559,1,8817,4,3,59,113,115,13545,13547,13551,1,8817,59,3,8807,824,108,97,110,116,59,3,10878,824,59,3,10878,824,105,109,59,1,8821,4,2,59,114,13574,13576,1,8815,59,1,8815,4,3,65,97,112,13587,13592,13597,114,114,59,1,8654,114,114,59,1,8622,97,114,59,1,10994,4,3,59,115,118,13610,13612,13623,1,8715,4,2,59,100,13618,13620,1,8956,59,1,8954,59,1,8715,99,121,59,1,1114,4,7,65,69,97,100,101,115,116,13647,13652,13656,13661,13665,13737,13742,114,114,59,1,8653,59,3,8806,824,114,114,59,1,8602,114,59,1,8229,4,4,59,102,113,115,13675,13677,13703,13725,1,8816,116,4,2,97,114,13684,13691,114,114,111,119,59,1,8602,105,103,104,116,97,114,114,111,119,59,1,8622,4,3,59,113,115,13711,13713,13717,1,8816,59,3,8806,824,108,97,110,116,59,3,10877,824,4,2,59,115,13731,13734,3,10877,824,59,1,8814,105,109,59,1,8820,4,2,59,114,13748,13750,1,8814,105,4,2,59,101,13757,13759,1,8938,59,1,8940,105,100,59,1,8740,4,2,112,116,13773,13778,102,59,3,55349,56671,5,172,3,59,105,110,13787,13789,13829,1,172,110,4,4,59,69,100,118,13800,13802,13806,13812,1,8713,59,3,8953,824,111,116,59,3,8949,824,4,3,97,98,99,13820,13823,13826,59,1,8713,59,1,8951,59,1,8950,105,4,2,59,118,13836,13838,1,8716,4,3,97,98,99,13846,13849,13852,59,1,8716,59,1,8958,59,1,8957,4,3,97,111,114,13863,13892,13899,114,4,4,59,97,115,116,13874,13876,13883,13888,1,8742,108,108,101,108,59,1,8742,108,59,3,11005,8421,59,3,8706,824,108,105,110,116,59,1,10772,4,3,59,99,101,13907,13909,13914,1,8832,117,101,59,1,8928,4,2,59,99,13920,13923,3,10927,824,4,2,59,101,13929,13931,1,8832,113,59,3,10927,824,4,4,65,97,105,116,13946,13951,13971,13982,114,114,59,1,8655,114,114,4,3,59,99,119,13961,13963,13967,1,8603,59,3,10547,824,59,3,8605,824,103,104,116,97,114,114,111,119,59,1,8603,114,105,4,2,59,101,13990,13992,1,8939,59,1,8941,4,7,99,104,105,109,112,113,117,14011,14036,14060,14080,14085,14090,14106,4,4,59,99,101,114,14021,14023,14028,14032,1,8833,117,101,59,1,8929,59,3,10928,824,59,3,55349,56515,111,114,116,4,2,109,112,14045,14050,105,100,59,1,8740,97,114,97,108,108,101,108,59,1,8742,109,4,2,59,101,14067,14069,1,8769,4,2,59,113,14075,14077,1,8772,59,1,8772,105,100,59,1,8740,97,114,59,1,8742,115,117,4,2,98,112,14098,14102,101,59,1,8930,101,59,1,8931,4,3,98,99,112,14114,14157,14171,4,4,59,69,101,115,14124,14126,14130,14133,1,8836,59,3,10949,824,59,1,8840,101,116,4,2,59,101,14141,14144,3,8834,8402,113,4,2,59,113,14151,14153,1,8840,59,3,10949,824,99,4,2,59,101,14164,14166,1,8833,113,59,3,10928,824,4,4,59,69,101,115,14181,14183,14187,14190,1,8837,59,3,10950,824,59,1,8841,101,116,4,2,59,101,14198,14201,3,8835,8402,113,4,2,59,113,14208,14210,1,8841,59,3,10950,824,4,4,103,105,108,114,14224,14228,14238,14242,108,59,1,8825,108,100,101,5,241,1,59,14236,1,241,103,59,1,8824,105,97,110,103,108,101,4,2,108,114,14254,14269,101,102,116,4,2,59,101,14263,14265,1,8938,113,59,1,8940,105,103,104,116,4,2,59,101,14279,14281,1,8939,113,59,1,8941,4,2,59,109,14291,14293,1,957,4,3,59,101,115,14301,14303,14308,1,35,114,111,59,1,8470,112,59,1,8199,4,9,68,72,97,100,103,105,108,114,115,14332,14338,14344,14349,14355,14369,14376,14408,14426,97,115,104,59,1,8877,97,114,114,59,1,10500,112,59,3,8781,8402,97,115,104,59,1,8876,4,2,101,116,14361,14365,59,3,8805,8402,59,3,62,8402,110,102,105,110,59,1,10718,4,3,65,101,116,14384,14389,14393,114,114,59,1,10498,59,3,8804,8402,4,2,59,114,14399,14402,3,60,8402,105,101,59,3,8884,8402,4,2,65,116,14414,14419,114,114,59,1,10499,114,105,101,59,3,8885,8402,105,109,59,3,8764,8402,4,3,65,97,110,14440,14445,14468,114,114,59,1,8662,114,4,2,104,114,14452,14456,107,59,1,10531,4,2,59,111,14462,14464,1,8598,119,59,1,8598,101,97,114,59,1,10535,4,18,83,97,99,100,101,102,103,104,105,108,109,111,112,114,115,116,117,118,14512,14515,14535,14560,14597,14603,14618,14643,14657,14662,14701,14741,14747,14769,14851,14877,14907,14916,59,1,9416,4,2,99,115,14521,14531,117,116,101,5,243,1,59,14529,1,243,116,59,1,8859,4,2,105,121,14541,14557,114,4,2,59,99,14548,14550,1,8858,5,244,1,59,14555,1,244,59,1,1086,4,5,97,98,105,111,115,14572,14577,14583,14587,14591,115,104,59,1,8861,108,97,99,59,1,337,118,59,1,10808,116,59,1,8857,111,108,100,59,1,10684,108,105,103,59,1,339,4,2,99,114,14609,14614,105,114,59,1,10687,59,3,55349,56620,4,3,111,114,116,14626,14630,14640,110,59,1,731,97,118,101,5,242,1,59,14638,1,242,59,1,10689,4,2,98,109,14649,14654,97,114,59,1,10677,59,1,937,110,116,59,1,8750,4,4,97,99,105,116,14672,14677,14693,14698,114,114,59,1,8634,4,2,105,114,14683,14687,114,59,1,10686,111,115,115,59,1,10683,110,101,59,1,8254,59,1,10688,4,3,97,101,105,14709,14714,14719,99,114,59,1,333,103,97,59,1,969,4,3,99,100,110,14727,14733,14736,114,111,110,59,1,959,59,1,10678,117,115,59,1,8854,112,102,59,3,55349,56672,4,3,97,101,108,14755,14759,14764,114,59,1,10679,114,112,59,1,10681,117,115,59,1,8853,4,7,59,97,100,105,111,115,118,14785,14787,14792,14831,14837,14841,14848,1,8744,114,114,59,1,8635,4,4,59,101,102,109,14802,14804,14817,14824,1,10845,114,4,2,59,111,14811,14813,1,8500,102,59,1,8500,5,170,1,59,14822,1,170,5,186,1,59,14829,1,186,103,111,102,59,1,8886,114,59,1,10838,108,111,112,101,59,1,10839,59,1,10843,4,3,99,108,111,14859,14863,14873,114,59,1,8500,97,115,104,5,248,1,59,14871,1,248,108,59,1,8856,105,4,2,108,109,14884,14893,100,101,5,245,1,59,14891,1,245,101,115,4,2,59,97,14901,14903,1,8855,115,59,1,10806,109,108,5,246,1,59,14914,1,246,98,97,114,59,1,9021,4,12,97,99,101,102,104,105,108,109,111,114,115,117,14948,14992,14996,15033,15038,15068,15090,15189,15192,15222,15427,15441,114,4,4,59,97,115,116,14959,14961,14976,14989,1,8741,5,182,2,59,108,14968,14970,1,182,108,101,108,59,1,8741,4,2,105,108,14982,14986,109,59,1,10995,59,1,11005,59,1,8706,121,59,1,1087,114,4,5,99,105,109,112,116,15009,15014,15019,15024,15027,110,116,59,1,37,111,100,59,1,46,105,108,59,1,8240,59,1,8869,101,110,107,59,1,8241,114,59,3,55349,56621,4,3,105,109,111,15046,15057,15063,4,2,59,118,15052,15054,1,966,59,1,981,109,97,116,59,1,8499,110,101,59,1,9742,4,3,59,116,118,15076,15078,15087,1,960,99,104,102,111,114,107,59,1,8916,59,1,982,4,2,97,117,15096,15119,110,4,2,99,107,15103,15115,107,4,2,59,104,15110,15112,1,8463,59,1,8462,118,59,1,8463,115,4,9,59,97,98,99,100,101,109,115,116,15140,15142,15148,15151,15156,15168,15171,15179,15184,1,43,99,105,114,59,1,10787,59,1,8862,105,114,59,1,10786,4,2,111,117,15162,15165,59,1,8724,59,1,10789,59,1,10866,110,5,177,1,59,15177,1,177,105,109,59,1,10790,119,111,59,1,10791,59,1,177,4,3,105,112,117,15200,15208,15213,110,116,105,110,116,59,1,10773,102,59,3,55349,56673,110,100,5,163,1,59,15220,1,163,4,10,59,69,97,99,101,105,110,111,115,117,15244,15246,15249,15253,15258,15334,15347,15367,15416,15421,1,8826,59,1,10931,112,59,1,10935,117,101,59,1,8828,4,2,59,99,15264,15266,1,10927,4,6,59,97,99,101,110,115,15280,15282,15290,15299,15303,15329,1,8826,112,112,114,111,120,59,1,10935,117,114,108,121,101,113,59,1,8828,113,59,1,10927,4,3,97,101,115,15311,15319,15324,112,112,114,111,120,59,1,10937,113,113,59,1,10933,105,109,59,1,8936,105,109,59,1,8830,109,101,4,2,59,115,15342,15344,1,8242,59,1,8473,4,3,69,97,115,15355,15358,15362,59,1,10933,112,59,1,10937,105,109,59,1,8936,4,3,100,102,112,15375,15378,15404,59,1,8719,4,3,97,108,115,15386,15392,15398,108,97,114,59,1,9006,105,110,101,59,1,8978,117,114,102,59,1,8979,4,2,59,116,15410,15412,1,8733,111,59,1,8733,105,109,59,1,8830,114,101,108,59,1,8880,4,2,99,105,15433,15438,114,59,3,55349,56517,59,1,968,110,99,115,112,59,1,8200,4,6,102,105,111,112,115,117,15462,15467,15472,15478,15485,15491,114,59,3,55349,56622,110,116,59,1,10764,112,102,59,3,55349,56674,114,105,109,101,59,1,8279,99,114,59,3,55349,56518,4,3,97,101,111,15499,15520,15534,116,4,2,101,105,15506,15515,114,110,105,111,110,115,59,1,8461,110,116,59,1,10774,115,116,4,2,59,101,15528,15530,1,63,113,59,1,8799,116,5,34,1,59,15540,1,34,4,21,65,66,72,97,98,99,100,101,102,104,105,108,109,110,111,112,114,115,116,117,120,15586,15609,15615,15620,15796,15855,15893,15931,15977,16001,16039,16183,16204,16222,16228,16285,16312,16318,16363,16408,16416,4,3,97,114,116,15594,15599,15603,114,114,59,1,8667,114,59,1,8658,97,105,108,59,1,10524,97,114,114,59,1,10511,97,114,59,1,10596,4,7,99,100,101,110,113,114,116,15636,15651,15656,15664,15687,15696,15770,4,2,101,117,15642,15646,59,3,8765,817,116,101,59,1,341,105,99,59,1,8730,109,112,116,121,118,59,1,10675,103,4,4,59,100,101,108,15675,15677,15680,15683,1,10217,59,1,10642,59,1,10661,101,59,1,10217,117,111,5,187,1,59,15694,1,187,114,4,11,59,97,98,99,102,104,108,112,115,116,119,15721,15723,15727,15739,15742,15746,15750,15754,15758,15763,15767,1,8594,112,59,1,10613,4,2,59,102,15733,15735,1,8677,115,59,1,10528,59,1,10547,115,59,1,10526,107,59,1,8618,112,59,1,8620,108,59,1,10565,105,109,59,1,10612,108,59,1,8611,59,1,8605,4,2,97,105,15776,15781,105,108,59,1,10522,111,4,2,59,110,15788,15790,1,8758,97,108,115,59,1,8474,4,3,97,98,114,15804,15809,15814,114,114,59,1,10509,114,107,59,1,10099,4,2,97,107,15820,15833,99,4,2,101,107,15827,15830,59,1,125,59,1,93,4,2,101,115,15839,15842,59,1,10636,108,4,2,100,117,15849,15852,59,1,10638,59,1,10640,4,4,97,101,117,121,15865,15871,15886,15890,114,111,110,59,1,345,4,2,100,105,15877,15882,105,108,59,1,343,108,59,1,8969,98,59,1,125,59,1,1088,4,4,99,108,113,115,15903,15907,15914,15927,97,59,1,10551,100,104,97,114,59,1,10601,117,111,4,2,59,114,15922,15924,1,8221,59,1,8221,104,59,1,8627,4,3,97,99,103,15939,15966,15970,108,4,4,59,105,112,115,15950,15952,15957,15963,1,8476,110,101,59,1,8475,97,114,116,59,1,8476,59,1,8477,116,59,1,9645,5,174,1,59,15975,1,174,4,3,105,108,114,15985,15991,15997,115,104,116,59,1,10621,111,111,114,59,1,8971,59,3,55349,56623,4,2,97,111,16007,16028,114,4,2,100,117,16014,16017,59,1,8641,4,2,59,108,16023,16025,1,8640,59,1,10604,4,2,59,118,16034,16036,1,961,59,1,1009,4,3,103,110,115,16047,16167,16171,104,116,4,6,97,104,108,114,115,116,16063,16081,16103,16130,16143,16155,114,114,111,119,4,2,59,116,16073,16075,1,8594,97,105,108,59,1,8611,97,114,112,111,111,110,4,2,100,117,16093,16099,111,119,110,59,1,8641,112,59,1,8640,101,102,116,4,2,97,104,16112,16120,114,114,111,119,115,59,1,8644,97,114,112,111,111,110,115,59,1,8652,105,103,104,116,97,114,114,111,119,115,59,1,8649,113,117,105,103,97,114,114,111,119,59,1,8605,104,114,101,101,116,105,109,101,115,59,1,8908,103,59,1,730,105,110,103,100,111,116,115,101,113,59,1,8787,4,3,97,104,109,16191,16196,16201,114,114,59,1,8644,97,114,59,1,8652,59,1,8207,111,117,115,116,4,2,59,97,16214,16216,1,9137,99,104,101,59,1,9137,109,105,100,59,1,10990,4,4,97,98,112,116,16238,16252,16257,16278,4,2,110,114,16244,16248,103,59,1,10221,114,59,1,8702,114,107,59,1,10215,4,3,97,102,108,16265,16269,16273,114,59,1,10630,59,3,55349,56675,117,115,59,1,10798,105,109,101,115,59,1,10805,4,2,97,112,16291,16304,114,4,2,59,103,16298,16300,1,41,116,59,1,10644,111,108,105,110,116,59,1,10770,97,114,114,59,1,8649,4,4,97,99,104,113,16328,16334,16339,16342,113,117,111,59,1,8250,114,59,3,55349,56519,59,1,8625,4,2,98,117,16348,16351,59,1,93,111,4,2,59,114,16358,16360,1,8217,59,1,8217,4,3,104,105,114,16371,16377,16383,114,101,101,59,1,8908,109,101,115,59,1,8906,105,4,4,59,101,102,108,16394,16396,16399,16402,1,9657,59,1,8885,59,1,9656,116,114,105,59,1,10702,108,117,104,97,114,59,1,10600,59,1,8478,4,19,97,98,99,100,101,102,104,105,108,109,111,112,113,114,115,116,117,119,122,16459,16466,16472,16572,16590,16672,16687,16746,16844,16850,16924,16963,16988,17115,17121,17154,17206,17614,17656,99,117,116,101,59,1,347,113,117,111,59,1,8218,4,10,59,69,97,99,101,105,110,112,115,121,16494,16496,16499,16513,16518,16531,16536,16556,16564,16569,1,8827,59,1,10932,4,2,112,114,16505,16508,59,1,10936,111,110,59,1,353,117,101,59,1,8829,4,2,59,100,16524,16526,1,10928,105,108,59,1,351,114,99,59,1,349,4,3,69,97,115,16544,16547,16551,59,1,10934,112,59,1,10938,105,109,59,1,8937,111,108,105,110,116,59,1,10771,105,109,59,1,8831,59,1,1089,111,116,4,3,59,98,101,16582,16584,16587,1,8901,59,1,8865,59,1,10854,4,7,65,97,99,109,115,116,120,16606,16611,16634,16642,16646,16652,16668,114,114,59,1,8664,114,4,2,104,114,16618,16622,107,59,1,10533,4,2,59,111,16628,16630,1,8600,119,59,1,8600,116,5,167,1,59,16640,1,167,105,59,1,59,119,97,114,59,1,10537,109,4,2,105,110,16659,16665,110,117,115,59,1,8726,59,1,8726,116,59,1,10038,114,4,2,59,111,16679,16682,3,55349,56624,119,110,59,1,8994,4,4,97,99,111,121,16697,16702,16716,16739,114,112,59,1,9839,4,2,104,121,16708,16713,99,121,59,1,1097,59,1,1096,114,116,4,2,109,112,16724,16729,105,100,59,1,8739,97,114,97,108,108,101,108,59,1,8741,5,173,1,59,16744,1,173,4,2,103,109,16752,16770,109,97,4,3,59,102,118,16762,16764,16767,1,963,59,1,962,59,1,962,4,8,59,100,101,103,108,110,112,114,16788,16790,16795,16806,16817,16828,16832,16838,1,8764,111,116,59,1,10858,4,2,59,113,16801,16803,1,8771,59,1,8771,4,2,59,69,16812,16814,1,10910,59,1,10912,4,2,59,69,16823,16825,1,10909,59,1,10911,101,59,1,8774,108,117,115,59,1,10788,97,114,114,59,1,10610,97,114,114,59,1,8592,4,4,97,101,105,116,16860,16883,16891,16904,4,2,108,115,16866,16878,108,115,101,116,109,105,110,117,115,59,1,8726,104,112,59,1,10803,112,97,114,115,108,59,1,10724,4,2,100,108,16897,16900,59,1,8739,101,59,1,8995,4,2,59,101,16910,16912,1,10922,4,2,59,115,16918,16920,1,10924,59,3,10924,65024,4,3,102,108,112,16932,16938,16958,116,99,121,59,1,1100,4,2,59,98,16944,16946,1,47,4,2,59,97,16952,16954,1,10692,114,59,1,9023,102,59,3,55349,56676,97,4,2,100,114,16970,16985,101,115,4,2,59,117,16978,16980,1,9824,105,116,59,1,9824,59,1,8741,4,3,99,115,117,16996,17028,17089,4,2,97,117,17002,17015,112,4,2,59,115,17009,17011,1,8851,59,3,8851,65024,112,4,2,59,115,17022,17024,1,8852,59,3,8852,65024,117,4,2,98,112,17035,17062,4,3,59,101,115,17043,17045,17048,1,8847,59,1,8849,101,116,4,2,59,101,17056,17058,1,8847,113,59,1,8849,4,3,59,101,115,17070,17072,17075,1,8848,59,1,8850,101,116,4,2,59,101,17083,17085,1,8848,113,59,1,8850,4,3,59,97,102,17097,17099,17112,1,9633,114,4,2,101,102,17106,17109,59,1,9633,59,1,9642,59,1,9642,97,114,114,59,1,8594,4,4,99,101,109,116,17131,17136,17142,17148,114,59,3,55349,56520,116,109,110,59,1,8726,105,108,101,59,1,8995,97,114,102,59,1,8902,4,2,97,114,17160,17172,114,4,2,59,102,17167,17169,1,9734,59,1,9733,4,2,97,110,17178,17202,105,103,104,116,4,2,101,112,17188,17197,112,115,105,108,111,110,59,1,1013,104,105,59,1,981,115,59,1,175,4,5,98,99,109,110,112,17218,17351,17420,17423,17427,4,9,59,69,100,101,109,110,112,114,115,17238,17240,17243,17248,17261,17267,17279,17285,17291,1,8834,59,1,10949,111,116,59,1,10941,4,2,59,100,17254,17256,1,8838,111,116,59,1,10947,117,108,116,59,1,10945,4,2,69,101,17273,17276,59,1,10955,59,1,8842,108,117,115,59,1,10943,97,114,114,59,1,10617,4,3,101,105,117,17299,17335,17339,116,4,3,59,101,110,17308,17310,17322,1,8834,113,4,2,59,113,17317,17319,1,8838,59,1,10949,101,113,4,2,59,113,17330,17332,1,8842,59,1,10955,109,59,1,10951,4,2,98,112,17345,17348,59,1,10965,59,1,10963,99,4,6,59,97,99,101,110,115,17366,17368,17376,17385,17389,17415,1,8827,112,112,114,111,120,59,1,10936,117,114,108,121,101,113,59,1,8829,113,59,1,10928,4,3,97,101,115,17397,17405,17410,112,112,114,111,120,59,1,10938,113,113,59,1,10934,105,109,59,1,8937,105,109,59,1,8831,59,1,8721,103,59,1,9834,4,13,49,50,51,59,69,100,101,104,108,109,110,112,115,17455,17462,17469,17476,17478,17481,17496,17509,17524,17530,17536,17548,17554,5,185,1,59,17460,1,185,5,178,1,59,17467,1,178,5,179,1,59,17474,1,179,1,8835,59,1,10950,4,2,111,115,17487,17491,116,59,1,10942,117,98,59,1,10968,4,2,59,100,17502,17504,1,8839,111,116,59,1,10948,115,4,2,111,117,17516,17520,108,59,1,10185,98,59,1,10967,97,114,114,59,1,10619,117,108,116,59,1,10946,4,2,69,101,17542,17545,59,1,10956,59,1,8843,108,117,115,59,1,10944,4,3,101,105,117,17562,17598,17602,116,4,3,59,101,110,17571,17573,17585,1,8835,113,4,2,59,113,17580,17582,1,8839,59,1,10950,101,113,4,2,59,113,17593,17595,1,8843,59,1,10956,109,59,1,10952,4,2,98,112,17608,17611,59,1,10964,59,1,10966,4,3,65,97,110,17622,17627,17650,114,114,59,1,8665,114,4,2,104,114,17634,17638,107,59,1,10534,4,2,59,111,17644,17646,1,8601,119,59,1,8601,119,97,114,59,1,10538,108,105,103,5,223,1,59,17664,1,223,4,13,97,98,99,100,101,102,104,105,111,112,114,115,119,17694,17709,17714,17737,17742,17749,17754,17860,17905,17957,17964,18090,18122,4,2,114,117,17700,17706,103,101,116,59,1,8982,59,1,964,114,107,59,1,9140,4,3,97,101,121,17722,17728,17734,114,111,110,59,1,357,100,105,108,59,1,355,59,1,1090,111,116,59,1,8411,108,114,101,99,59,1,8981,114,59,3,55349,56625,4,4,101,105,107,111,17764,17805,17836,17851,4,2,114,116,17770,17786,101,4,2,52,102,17777,17780,59,1,8756,111,114,101,59,1,8756,97,4,3,59,115,118,17795,17797,17802,1,952,121,109,59,1,977,59,1,977,4,2,99,110,17811,17831,107,4,2,97,115,17818,17826,112,112,114,111,120,59,1,8776,105,109,59,1,8764,115,112,59,1,8201,4,2,97,115,17842,17846,112,59,1,8776,105,109,59,1,8764,114,110,5,254,1,59,17858,1,254,4,3,108,109,110,17868,17873,17901,100,101,59,1,732,101,115,5,215,3,59,98,100,17884,17886,17898,1,215,4,2,59,97,17892,17894,1,8864,114,59,1,10801,59,1,10800,116,59,1,8749,4,3,101,112,115,17913,17917,17953,97,59,1,10536,4,4,59,98,99,102,17927,17929,17934,17939,1,8868,111,116,59,1,9014,105,114,59,1,10993,4,2,59,111,17945,17948,3,55349,56677,114,107,59,1,10970,97,59,1,10537,114,105,109,101,59,1,8244,4,3,97,105,112,17972,17977,18082,100,101,59,1,8482,4,7,97,100,101,109,112,115,116,17993,18051,18056,18059,18066,18072,18076,110,103,108,101,4,5,59,100,108,113,114,18009,18011,18017,18032,18035,1,9653,111,119,110,59,1,9663,101,102,116,4,2,59,101,18026,18028,1,9667,113,59,1,8884,59,1,8796,105,103,104,116,4,2,59,101,18045,18047,1,9657,113,59,1,8885,111,116,59,1,9708,59,1,8796,105,110,117,115,59,1,10810,108,117,115,59,1,10809,98,59,1,10701,105,109,101,59,1,10811,101,122,105,117,109,59,1,9186,4,3,99,104,116,18098,18111,18116,4,2,114,121,18104,18108,59,3,55349,56521,59,1,1094,99,121,59,1,1115,114,111,107,59,1,359,4,2,105,111,18128,18133,120,116,59,1,8812,104,101,97,100,4,2,108,114,18143,18154,101,102,116,97,114,114,111,119,59,1,8606,105,103,104,116,97,114,114,111,119,59,1,8608,4,18,65,72,97,98,99,100,102,103,104,108,109,111,112,114,115,116,117,119,18204,18209,18214,18234,18250,18268,18292,18308,18319,18343,18379,18397,18413,18504,18547,18553,18584,18603,114,114,59,1,8657,97,114,59,1,10595,4,2,99,114,18220,18230,117,116,101,5,250,1,59,18228,1,250,114,59,1,8593,114,4,2,99,101,18241,18245,121,59,1,1118,118,101,59,1,365,4,2,105,121,18256,18265,114,99,5,251,1,59,18263,1,251,59,1,1091,4,3,97,98,104,18276,18281,18287,114,114,59,1,8645,108,97,99,59,1,369,97,114,59,1,10606,4,2,105,114,18298,18304,115,104,116,59,1,10622,59,3,55349,56626,114,97,118,101,5,249,1,59,18317,1,249,4,2,97,98,18325,18338,114,4,2,108,114,18332,18335,59,1,8639,59,1,8638,108,107,59,1,9600,4,2,99,116,18349,18374,4,2,111,114,18355,18369,114,110,4,2,59,101,18363,18365,1,8988,114,59,1,8988,111,112,59,1,8975,114,105,59,1,9720,4,2,97,108,18385,18390,99,114,59,1,363,5,168,1,59,18395,1,168,4,2,103,112,18403,18408,111,110,59,1,371,102,59,3,55349,56678,4,6,97,100,104,108,115,117,18427,18434,18445,18470,18475,18494,114,114,111,119,59,1,8593,111,119,110,97,114,114,111,119,59,1,8597,97,114,112,111,111,110,4,2,108,114,18457,18463,101,102,116,59,1,8639,105,103,104,116,59,1,8638,117,115,59,1,8846,105,4,3,59,104,108,18484,18486,18489,1,965,59,1,978,111,110,59,1,965,112,97,114,114,111,119,115,59,1,8648,4,3,99,105,116,18512,18537,18542,4,2,111,114,18518,18532,114,110,4,2,59,101,18526,18528,1,8989,114,59,1,8989,111,112,59,1,8974,110,103,59,1,367,114,105,59,1,9721,99,114,59,3,55349,56522,4,3,100,105,114,18561,18566,18572,111,116,59,1,8944,108,100,101,59,1,361,105,4,2,59,102,18579,18581,1,9653,59,1,9652,4,2,97,109,18590,18595,114,114,59,1,8648,108,5,252,1,59,18601,1,252,97,110,103,108,101,59,1,10663,4,15,65,66,68,97,99,100,101,102,108,110,111,112,114,115,122,18643,18648,18661,18667,18847,18851,18857,18904,18909,18915,18931,18937,18943,18949,18996,114,114,59,1,8661,97,114,4,2,59,118,18656,18658,1,10984,59,1,10985,97,115,104,59,1,8872,4,2,110,114,18673,18679,103,114,116,59,1,10652,4,7,101,107,110,112,114,115,116,18695,18704,18711,18720,18742,18754,18810,112,115,105,108,111,110,59,1,1013,97,112,112,97,59,1,1008,111,116,104,105,110,103,59,1,8709,4,3,104,105,114,18728,18732,18735,105,59,1,981,59,1,982,111,112,116,111,59,1,8733,4,2,59,104,18748,18750,1,8597,111,59,1,1009,4,2,105,117,18760,18766,103,109,97,59,1,962,4,2,98,112,18772,18791,115,101,116,110,101,113,4,2,59,113,18784,18787,3,8842,65024,59,3,10955,65024,115,101,116,110,101,113,4,2,59,113,18803,18806,3,8843,65024,59,3,10956,65024,4,2,104,114,18816,18822,101,116,97,59,1,977,105,97,110,103,108,101,4,2,108,114,18834,18840,101,102,116,59,1,8882,105,103,104,116,59,1,8883,121,59,1,1074,97,115,104,59,1,8866,4,3,101,108,114,18865,18884,18890,4,3,59,98,101,18873,18875,18880,1,8744,97,114,59,1,8891,113,59,1,8794,108,105,112,59,1,8942,4,2,98,116,18896,18901,97,114,59,1,124,59,1,124,114,59,3,55349,56627,116,114,105,59,1,8882,115,117,4,2,98,112,18923,18927,59,3,8834,8402,59,3,8835,8402,112,102,59,3,55349,56679,114,111,112,59,1,8733,116,114,105,59,1,8883,4,2,99,117,18955,18960,114,59,3,55349,56523,4,2,98,112,18966,18981,110,4,2,69,101,18973,18977,59,3,10955,65024,59,3,8842,65024,110,4,2,69,101,18988,18992,59,3,10956,65024,59,3,8843,65024,105,103,122,97,103,59,1,10650,4,7,99,101,102,111,112,114,115,19020,19026,19061,19066,19072,19075,19089,105,114,99,59,1,373,4,2,100,105,19032,19055,4,2,98,103,19038,19043,97,114,59,1,10847,101,4,2,59,113,19050,19052,1,8743,59,1,8793,101,114,112,59,1,8472,114,59,3,55349,56628,112,102,59,3,55349,56680,59,1,8472,4,2,59,101,19081,19083,1,8768,97,116,104,59,1,8768,99,114,59,3,55349,56524,4,14,99,100,102,104,105,108,109,110,111,114,115,117,118,119,19125,19146,19152,19157,19173,19176,19192,19197,19202,19236,19252,19269,19286,19291,4,3,97,105,117,19133,19137,19142,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,116,114,105,59,1,9661,114,59,3,55349,56629,4,2,65,97,19163,19168,114,114,59,1,10234,114,114,59,1,10231,59,1,958,4,2,65,97,19182,19187,114,114,59,1,10232,114,114,59,1,10229,97,112,59,1,10236,105,115,59,1,8955,4,3,100,112,116,19210,19215,19230,111,116,59,1,10752,4,2,102,108,19221,19225,59,3,55349,56681,117,115,59,1,10753,105,109,101,59,1,10754,4,2,65,97,19242,19247,114,114,59,1,10233,114,114,59,1,10230,4,2,99,113,19258,19263,114,59,3,55349,56525,99,117,112,59,1,10758,4,2,112,116,19275,19281,108,117,115,59,1,10756,114,105,59,1,9651,101,101,59,1,8897,101,100,103,101,59,1,8896,4,8,97,99,101,102,105,111,115,117,19316,19335,19349,19357,19362,19367,19373,19379,99,4,2,117,121,19323,19332,116,101,5,253,1,59,19330,1,253,59,1,1103,4,2,105,121,19341,19346,114,99,59,1,375,59,1,1099,110,5,165,1,59,19355,1,165,114,59,3,55349,56630,99,121,59,1,1111,112,102,59,3,55349,56682,99,114,59,3,55349,56526,4,2,99,109,19385,19389,121,59,1,1102,108,5,255,1,59,19395,1,255,4,10,97,99,100,101,102,104,105,111,115,119,19419,19426,19441,19446,19462,19467,19472,19480,19486,19492,99,117,116,101,59,1,378,4,2,97,121,19432,19438,114,111,110,59,1,382,59,1,1079,111,116,59,1,380,4,2,101,116,19452,19458,116,114,102,59,1,8488,97,59,1,950,114,59,3,55349,56631,99,121,59,1,1078,103,114,97,114,114,59,1,8669,112,102,59,3,55349,56683,99,114,59,3,55349,56527,4,2,106,110,19498,19501,59,1,8205,106,59,1,8204]);const KZ=XZ,QZ=GZ,ZZ=qZ,JZ=YZ,eJ=QZ.CODE_POINTS,tJ=QZ.CODE_POINT_SEQUENCES,nJ={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},rJ="DATA_STATE";function iJ(e){return e===eJ.SPACE||e===eJ.LINE_FEED||e===eJ.TABULATION||e===eJ.FORM_FEED}function aJ(e){return e>=eJ.DIGIT_0&&e<=eJ.DIGIT_9}function oJ(e){return e>=eJ.LATIN_CAPITAL_A&&e<=eJ.LATIN_CAPITAL_Z}function sJ(e){return e>=eJ.LATIN_SMALL_A&&e<=eJ.LATIN_SMALL_Z}function lJ(e){return sJ(e)||oJ(e)}function cJ(e){return lJ(e)||aJ(e)}function uJ(e){return e>=eJ.LATIN_CAPITAL_A&&e<=eJ.LATIN_CAPITAL_F}function hJ(e){return e>=eJ.LATIN_SMALL_A&&e<=eJ.LATIN_SMALL_F}function pJ(e){return e+32}function dJ(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(e>>>10&1023|55296)+String.fromCharCode(56320|1023&e))}function fJ(e){return String.fromCharCode(pJ(e))}function mJ(e,t){const n=ZZ[++e];let r=++e,i=r+n-1;for(;r<=i;){const e=r+i>>>1,a=ZZ[e];if(a<t)r=e+1;else{if(!(a>t))return ZZ[e+n];i=e-1}}return-1}class gJ{constructor(){this.preprocessor=new KZ,this.tokenQueue=[],this.allowCDATA=!1,this.state=rJ,this.returnState="",this.charRefCode=-1,this.tempBuff=[],this.lastStartTagName="",this.consumedAfterSnapshot=-1,this.active=!1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr=null}_err(){}_errOnNextCodePoint(e){this._consume(),this._err(e),this._unconsume()}getNextToken(){for(;!this.tokenQueue.length&&this.active;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this[this.state](e)}return this.tokenQueue.shift()}write(e,t){this.active=!0,this.preprocessor.write(e,t)}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e)}_ensureHibernation(){if(this.preprocessor.endOfChunkHit){for(;this.consumedAfterSnapshot>0;this.consumedAfterSnapshot--)this.preprocessor.retreat();return this.active=!1,this.tokenQueue.push({type:gJ.HIBERNATION_TOKEN}),!0}return!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(){this.consumedAfterSnapshot--,this.preprocessor.retreat()}_reconsumeInState(e){this.state=e,this._unconsume()}_consumeSequenceIfMatch(e,t,n){let r=0,i=!0;const a=e.length;let o,s=0,l=t;for(;s<a;s++){if(s>0&&(l=this._consume(),r++),l===eJ.EOF){i=!1;break}if(o=e[s],l!==o&&(n||l!==pJ(o))){i=!1;break}}if(!i)for(;r--;)this._unconsume();return i}_isTempBufferEqualToScriptString(){if(this.tempBuff.length!==tJ.SCRIPT_STRING.length)return!1;for(let e=0;e<this.tempBuff.length;e++)if(this.tempBuff[e]!==tJ.SCRIPT_STRING[e])return!1;return!0}_createStartTagToken(){this.currentToken={type:gJ.START_TAG_TOKEN,tagName:"",selfClosing:!1,ackSelfClosing:!1,attrs:[]}}_createEndTagToken(){this.currentToken={type:gJ.END_TAG_TOKEN,tagName:"",selfClosing:!1,attrs:[]}}_createCommentToken(){this.currentToken={type:gJ.COMMENT_TOKEN,data:""}}_createDoctypeToken(e){this.currentToken={type:gJ.DOCTYPE_TOKEN,name:e,forceQuirks:!1,publicId:null,systemId:null}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t}}_createEOFToken(){this.currentToken={type:gJ.EOF_TOKEN}}_createAttr(e){this.currentAttr={name:e,value:""}}_leaveAttrName(e){null===gJ.getTokenAttr(this.currentToken,this.currentAttr.name)?this.currentToken.attrs.push(this.currentAttr):this._err(JZ.duplicateAttribute),this.state=e}_leaveAttrValue(e){this.state=e}_emitCurrentToken(){this._emitCurrentCharacterToken();const e=this.currentToken;this.currentToken=null,e.type===gJ.START_TAG_TOKEN?this.lastStartTagName=e.tagName:e.type===gJ.END_TAG_TOKEN&&(e.attrs.length>0&&this._err(JZ.endTagWithAttributes),e.selfClosing&&this._err(JZ.endTagWithTrailingSolidus)),this.tokenQueue.push(e)}_emitCurrentCharacterToken(){this.currentCharacterToken&&(this.tokenQueue.push(this.currentCharacterToken),this.currentCharacterToken=null)}_emitEOFToken(){this._createEOFToken(),this._emitCurrentToken()}_appendCharToCurrentCharacterToken(e,t){this.currentCharacterToken&&this.currentCharacterToken.type!==e&&this._emitCurrentCharacterToken(),this.currentCharacterToken?this.currentCharacterToken.chars+=t:this._createCharacterToken(e,t)}_emitCodePoint(e){let t=gJ.CHARACTER_TOKEN;iJ(e)?t=gJ.WHITESPACE_CHARACTER_TOKEN:e===eJ.NULL&&(t=gJ.NULL_CHARACTER_TOKEN),this._appendCharToCurrentCharacterToken(t,dJ(e))}_emitSeveralCodePoints(e){for(let t=0;t<e.length;t++)this._emitCodePoint(e[t])}_emitChars(e){this._appendCharToCurrentCharacterToken(gJ.CHARACTER_TOKEN,e)}_matchNamedCharacterReference(e){let t=null,n=1,r=mJ(0,e);for(this.tempBuff.push(e);r>-1;){const e=ZZ[r],i=e<7;i&&1&e&&(t=2&e?[ZZ[++r],ZZ[++r]]:[ZZ[++r]],n=0);const a=this._consume();if(this.tempBuff.push(a),n++,a===eJ.EOF)break;r=i?4&e?mJ(r,a):-1:a===e?++r:-1}for(;n--;)this.tempBuff.pop(),this._unconsume();return t}_isCharacterReferenceInAttribute(){return"ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE"===this.returnState||"ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE"===this.returnState||"ATTRIBUTE_VALUE_UNQUOTED_STATE"===this.returnState}_isCharacterReferenceAttributeQuirk(e){if(!e&&this._isCharacterReferenceInAttribute()){const e=this._consume();return this._unconsume(),e===eJ.EQUALS_SIGN||cJ(e)}return!1}_flushCodePointsConsumedAsCharacterReference(){if(this._isCharacterReferenceInAttribute())for(let e=0;e<this.tempBuff.length;e++)this.currentAttr.value+=dJ(this.tempBuff[e]);else this._emitSeveralCodePoints(this.tempBuff);this.tempBuff=[]}[rJ](e){this.preprocessor.dropParsedChunk(),e===eJ.LESS_THAN_SIGN?this.state="TAG_OPEN_STATE":e===eJ.AMPERSAND?(this.returnState=rJ,this.state="CHARACTER_REFERENCE_STATE"):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this._emitCodePoint(e)):e===eJ.EOF?this._emitEOFToken():this._emitCodePoint(e)}RCDATA_STATE(e){this.preprocessor.dropParsedChunk(),e===eJ.AMPERSAND?(this.returnState="RCDATA_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===eJ.LESS_THAN_SIGN?this.state="RCDATA_LESS_THAN_SIGN_STATE":e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this._emitChars(QZ.REPLACEMENT_CHARACTER)):e===eJ.EOF?this._emitEOFToken():this._emitCodePoint(e)}RAWTEXT_STATE(e){this.preprocessor.dropParsedChunk(),e===eJ.LESS_THAN_SIGN?this.state="RAWTEXT_LESS_THAN_SIGN_STATE":e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this._emitChars(QZ.REPLACEMENT_CHARACTER)):e===eJ.EOF?this._emitEOFToken():this._emitCodePoint(e)}SCRIPT_DATA_STATE(e){this.preprocessor.dropParsedChunk(),e===eJ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_LESS_THAN_SIGN_STATE":e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this._emitChars(QZ.REPLACEMENT_CHARACTER)):e===eJ.EOF?this._emitEOFToken():this._emitCodePoint(e)}PLAINTEXT_STATE(e){this.preprocessor.dropParsedChunk(),e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this._emitChars(QZ.REPLACEMENT_CHARACTER)):e===eJ.EOF?this._emitEOFToken():this._emitCodePoint(e)}TAG_OPEN_STATE(e){e===eJ.EXCLAMATION_MARK?this.state="MARKUP_DECLARATION_OPEN_STATE":e===eJ.SOLIDUS?this.state="END_TAG_OPEN_STATE":lJ(e)?(this._createStartTagToken(),this._reconsumeInState("TAG_NAME_STATE")):e===eJ.QUESTION_MARK?(this._err(JZ.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE")):e===eJ.EOF?(this._err(JZ.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken()):(this._err(JZ.invalidFirstCharacterOfTagName),this._emitChars("<"),this._reconsumeInState(rJ))}END_TAG_OPEN_STATE(e){lJ(e)?(this._createEndTagToken(),this._reconsumeInState("TAG_NAME_STATE")):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.missingEndTagName),this.state=rJ):e===eJ.EOF?(this._err(JZ.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken()):(this._err(JZ.invalidFirstCharacterOfTagName),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE"))}TAG_NAME_STATE(e){iJ(e)?this.state="BEFORE_ATTRIBUTE_NAME_STATE":e===eJ.SOLIDUS?this.state="SELF_CLOSING_START_TAG_STATE":e===eJ.GREATER_THAN_SIGN?(this.state=rJ,this._emitCurrentToken()):oJ(e)?this.currentToken.tagName+=fJ(e):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentToken.tagName+=QZ.REPLACEMENT_CHARACTER):e===eJ.EOF?(this._err(JZ.eofInTag),this._emitEOFToken()):this.currentToken.tagName+=dJ(e)}RCDATA_LESS_THAN_SIGN_STATE(e){e===eJ.SOLIDUS?(this.tempBuff=[],this.state="RCDATA_END_TAG_OPEN_STATE"):(this._emitChars("<"),this._reconsumeInState("RCDATA_STATE"))}RCDATA_END_TAG_OPEN_STATE(e){lJ(e)?(this._createEndTagToken(),this._reconsumeInState("RCDATA_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("RCDATA_STATE"))}RCDATA_END_TAG_NAME_STATE(e){if(oJ(e))this.currentToken.tagName+=fJ(e),this.tempBuff.push(e);else if(sJ(e))this.currentToken.tagName+=dJ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(iJ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===eJ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===eJ.GREATER_THAN_SIGN)return this.state=rJ,void this._emitCurrentToken()}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("RCDATA_STATE")}}RAWTEXT_LESS_THAN_SIGN_STATE(e){e===eJ.SOLIDUS?(this.tempBuff=[],this.state="RAWTEXT_END_TAG_OPEN_STATE"):(this._emitChars("<"),this._reconsumeInState("RAWTEXT_STATE"))}RAWTEXT_END_TAG_OPEN_STATE(e){lJ(e)?(this._createEndTagToken(),this._reconsumeInState("RAWTEXT_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("RAWTEXT_STATE"))}RAWTEXT_END_TAG_NAME_STATE(e){if(oJ(e))this.currentToken.tagName+=fJ(e),this.tempBuff.push(e);else if(sJ(e))this.currentToken.tagName+=dJ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(iJ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===eJ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===eJ.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=rJ)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("RAWTEXT_STATE")}}SCRIPT_DATA_LESS_THAN_SIGN_STATE(e){e===eJ.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_END_TAG_OPEN_STATE"):e===eJ.EXCLAMATION_MARK?(this.state="SCRIPT_DATA_ESCAPE_START_STATE",this._emitChars("<!")):(this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_STATE"))}SCRIPT_DATA_END_TAG_OPEN_STATE(e){lJ(e)?(this._createEndTagToken(),this._reconsumeInState("SCRIPT_DATA_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("SCRIPT_DATA_STATE"))}SCRIPT_DATA_END_TAG_NAME_STATE(e){if(oJ(e))this.currentToken.tagName+=fJ(e),this.tempBuff.push(e);else if(sJ(e))this.currentToken.tagName+=dJ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(iJ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===eJ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===eJ.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=rJ)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("SCRIPT_DATA_STATE")}}SCRIPT_DATA_ESCAPE_START_STATE(e){e===eJ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPE_START_DASH_STATE",this._emitChars("-")):this._reconsumeInState("SCRIPT_DATA_STATE")}SCRIPT_DATA_ESCAPE_START_DASH_STATE(e){e===eJ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):this._reconsumeInState("SCRIPT_DATA_STATE")}SCRIPT_DATA_ESCAPED_STATE(e){e===eJ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_STATE",this._emitChars("-")):e===eJ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this._emitChars(QZ.REPLACEMENT_CHARACTER)):e===eJ.EOF?(this._err(JZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}SCRIPT_DATA_ESCAPED_DASH_STATE(e){e===eJ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):e===eJ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitChars(QZ.REPLACEMENT_CHARACTER)):e===eJ.EOF?(this._err(JZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_ESCAPED_DASH_DASH_STATE(e){e===eJ.HYPHEN_MINUS?this._emitChars("-"):e===eJ.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":e===eJ.GREATER_THAN_SIGN?(this.state="SCRIPT_DATA_STATE",this._emitChars(">")):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitChars(QZ.REPLACEMENT_CHARACTER)):e===eJ.EOF?(this._err(JZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE(e){e===eJ.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE"):lJ(e)?(this.tempBuff=[],this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE")):(this._emitChars("<"),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE"))}SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE(e){lJ(e)?(this._createEndTagToken(),this._reconsumeInState("SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE")):(this._emitChars("</"),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE"))}SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE(e){if(oJ(e))this.currentToken.tagName+=fJ(e),this.tempBuff.push(e);else if(sJ(e))this.currentToken.tagName+=dJ(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(iJ(e))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(e===eJ.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(e===eJ.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=rJ)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE")}}SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE(e){iJ(e)||e===eJ.SOLIDUS||e===eJ.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?"SCRIPT_DATA_DOUBLE_ESCAPED_STATE":"SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(e)):oJ(e)?(this.tempBuff.push(pJ(e)),this._emitCodePoint(e)):sJ(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE")}SCRIPT_DATA_DOUBLE_ESCAPED_STATE(e){e===eJ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE",this._emitChars("-")):e===eJ.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this._emitChars(QZ.REPLACEMENT_CHARACTER)):e===eJ.EOF?(this._err(JZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE(e){e===eJ.HYPHEN_MINUS?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE",this._emitChars("-")):e===eJ.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitChars(QZ.REPLACEMENT_CHARACTER)):e===eJ.EOF?(this._err(JZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE(e){e===eJ.HYPHEN_MINUS?this._emitChars("-"):e===eJ.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChars("<")):e===eJ.GREATER_THAN_SIGN?(this.state="SCRIPT_DATA_STATE",this._emitChars(">")):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitChars(QZ.REPLACEMENT_CHARACTER)):e===eJ.EOF?(this._err(JZ.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e))}SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE(e){e===eJ.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE",this._emitChars("/")):this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPED_STATE")}SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE(e){iJ(e)||e===eJ.SOLIDUS||e===eJ.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?"SCRIPT_DATA_ESCAPED_STATE":"SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(e)):oJ(e)?(this.tempBuff.push(pJ(e)),this._emitCodePoint(e)):sJ(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPED_STATE")}BEFORE_ATTRIBUTE_NAME_STATE(e){iJ(e)||(e===eJ.SOLIDUS||e===eJ.GREATER_THAN_SIGN||e===eJ.EOF?this._reconsumeInState("AFTER_ATTRIBUTE_NAME_STATE"):e===eJ.EQUALS_SIGN?(this._err(JZ.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state="ATTRIBUTE_NAME_STATE"):(this._createAttr(""),this._reconsumeInState("ATTRIBUTE_NAME_STATE")))}ATTRIBUTE_NAME_STATE(e){iJ(e)||e===eJ.SOLIDUS||e===eJ.GREATER_THAN_SIGN||e===eJ.EOF?(this._leaveAttrName("AFTER_ATTRIBUTE_NAME_STATE"),this._unconsume()):e===eJ.EQUALS_SIGN?this._leaveAttrName("BEFORE_ATTRIBUTE_VALUE_STATE"):oJ(e)?this.currentAttr.name+=fJ(e):e===eJ.QUOTATION_MARK||e===eJ.APOSTROPHE||e===eJ.LESS_THAN_SIGN?(this._err(JZ.unexpectedCharacterInAttributeName),this.currentAttr.name+=dJ(e)):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentAttr.name+=QZ.REPLACEMENT_CHARACTER):this.currentAttr.name+=dJ(e)}AFTER_ATTRIBUTE_NAME_STATE(e){iJ(e)||(e===eJ.SOLIDUS?this.state="SELF_CLOSING_START_TAG_STATE":e===eJ.EQUALS_SIGN?this.state="BEFORE_ATTRIBUTE_VALUE_STATE":e===eJ.GREATER_THAN_SIGN?(this.state=rJ,this._emitCurrentToken()):e===eJ.EOF?(this._err(JZ.eofInTag),this._emitEOFToken()):(this._createAttr(""),this._reconsumeInState("ATTRIBUTE_NAME_STATE")))}BEFORE_ATTRIBUTE_VALUE_STATE(e){iJ(e)||(e===eJ.QUOTATION_MARK?this.state="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE":e===eJ.APOSTROPHE?this.state="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE":e===eJ.GREATER_THAN_SIGN?(this._err(JZ.missingAttributeValue),this.state=rJ,this._emitCurrentToken()):this._reconsumeInState("ATTRIBUTE_VALUE_UNQUOTED_STATE"))}ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE(e){e===eJ.QUOTATION_MARK?this.state="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE":e===eJ.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentAttr.value+=QZ.REPLACEMENT_CHARACTER):e===eJ.EOF?(this._err(JZ.eofInTag),this._emitEOFToken()):this.currentAttr.value+=dJ(e)}ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE(e){e===eJ.APOSTROPHE?this.state="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE":e===eJ.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentAttr.value+=QZ.REPLACEMENT_CHARACTER):e===eJ.EOF?(this._err(JZ.eofInTag),this._emitEOFToken()):this.currentAttr.value+=dJ(e)}ATTRIBUTE_VALUE_UNQUOTED_STATE(e){iJ(e)?this._leaveAttrValue("BEFORE_ATTRIBUTE_NAME_STATE"):e===eJ.AMPERSAND?(this.returnState="ATTRIBUTE_VALUE_UNQUOTED_STATE",this.state="CHARACTER_REFERENCE_STATE"):e===eJ.GREATER_THAN_SIGN?(this._leaveAttrValue(rJ),this._emitCurrentToken()):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentAttr.value+=QZ.REPLACEMENT_CHARACTER):e===eJ.QUOTATION_MARK||e===eJ.APOSTROPHE||e===eJ.LESS_THAN_SIGN||e===eJ.EQUALS_SIGN||e===eJ.GRAVE_ACCENT?(this._err(JZ.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=dJ(e)):e===eJ.EOF?(this._err(JZ.eofInTag),this._emitEOFToken()):this.currentAttr.value+=dJ(e)}AFTER_ATTRIBUTE_VALUE_QUOTED_STATE(e){iJ(e)?this._leaveAttrValue("BEFORE_ATTRIBUTE_NAME_STATE"):e===eJ.SOLIDUS?this._leaveAttrValue("SELF_CLOSING_START_TAG_STATE"):e===eJ.GREATER_THAN_SIGN?(this._leaveAttrValue(rJ),this._emitCurrentToken()):e===eJ.EOF?(this._err(JZ.eofInTag),this._emitEOFToken()):(this._err(JZ.missingWhitespaceBetweenAttributes),this._reconsumeInState("BEFORE_ATTRIBUTE_NAME_STATE"))}SELF_CLOSING_START_TAG_STATE(e){e===eJ.GREATER_THAN_SIGN?(this.currentToken.selfClosing=!0,this.state=rJ,this._emitCurrentToken()):e===eJ.EOF?(this._err(JZ.eofInTag),this._emitEOFToken()):(this._err(JZ.unexpectedSolidusInTag),this._reconsumeInState("BEFORE_ATTRIBUTE_NAME_STATE"))}BOGUS_COMMENT_STATE(e){e===eJ.GREATER_THAN_SIGN?(this.state=rJ,this._emitCurrentToken()):e===eJ.EOF?(this._emitCurrentToken(),this._emitEOFToken()):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentToken.data+=QZ.REPLACEMENT_CHARACTER):this.currentToken.data+=dJ(e)}MARKUP_DECLARATION_OPEN_STATE(e){this._consumeSequenceIfMatch(tJ.DASH_DASH_STRING,e,!0)?(this._createCommentToken(),this.state="COMMENT_START_STATE"):this._consumeSequenceIfMatch(tJ.DOCTYPE_STRING,e,!1)?this.state="DOCTYPE_STATE":this._consumeSequenceIfMatch(tJ.CDATA_START_STRING,e,!0)?this.allowCDATA?this.state="CDATA_SECTION_STATE":(this._err(JZ.cdataInHtmlContent),this._createCommentToken(),this.currentToken.data="[CDATA[",this.state="BOGUS_COMMENT_STATE"):this._ensureHibernation()||(this._err(JZ.incorrectlyOpenedComment),this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE"))}COMMENT_START_STATE(e){e===eJ.HYPHEN_MINUS?this.state="COMMENT_START_DASH_STATE":e===eJ.GREATER_THAN_SIGN?(this._err(JZ.abruptClosingOfEmptyComment),this.state=rJ,this._emitCurrentToken()):this._reconsumeInState("COMMENT_STATE")}COMMENT_START_DASH_STATE(e){e===eJ.HYPHEN_MINUS?this.state="COMMENT_END_STATE":e===eJ.GREATER_THAN_SIGN?(this._err(JZ.abruptClosingOfEmptyComment),this.state=rJ,this._emitCurrentToken()):e===eJ.EOF?(this._err(JZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState("COMMENT_STATE"))}COMMENT_STATE(e){e===eJ.HYPHEN_MINUS?this.state="COMMENT_END_DASH_STATE":e===eJ.LESS_THAN_SIGN?(this.currentToken.data+="<",this.state="COMMENT_LESS_THAN_SIGN_STATE"):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentToken.data+=QZ.REPLACEMENT_CHARACTER):e===eJ.EOF?(this._err(JZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.data+=dJ(e)}COMMENT_LESS_THAN_SIGN_STATE(e){e===eJ.EXCLAMATION_MARK?(this.currentToken.data+="!",this.state="COMMENT_LESS_THAN_SIGN_BANG_STATE"):e===eJ.LESS_THAN_SIGN?this.currentToken.data+="!":this._reconsumeInState("COMMENT_STATE")}COMMENT_LESS_THAN_SIGN_BANG_STATE(e){e===eJ.HYPHEN_MINUS?this.state="COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE":this._reconsumeInState("COMMENT_STATE")}COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE(e){e===eJ.HYPHEN_MINUS?this.state="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE":this._reconsumeInState("COMMENT_END_DASH_STATE")}COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE(e){e!==eJ.GREATER_THAN_SIGN&&e!==eJ.EOF&&this._err(JZ.nestedComment),this._reconsumeInState("COMMENT_END_STATE")}COMMENT_END_DASH_STATE(e){e===eJ.HYPHEN_MINUS?this.state="COMMENT_END_STATE":e===eJ.EOF?(this._err(JZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState("COMMENT_STATE"))}COMMENT_END_STATE(e){e===eJ.GREATER_THAN_SIGN?(this.state=rJ,this._emitCurrentToken()):e===eJ.EXCLAMATION_MARK?this.state="COMMENT_END_BANG_STATE":e===eJ.HYPHEN_MINUS?this.currentToken.data+="-":e===eJ.EOF?(this._err(JZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--",this._reconsumeInState("COMMENT_STATE"))}COMMENT_END_BANG_STATE(e){e===eJ.HYPHEN_MINUS?(this.currentToken.data+="--!",this.state="COMMENT_END_DASH_STATE"):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.incorrectlyClosedComment),this.state=rJ,this._emitCurrentToken()):e===eJ.EOF?(this._err(JZ.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--!",this._reconsumeInState("COMMENT_STATE"))}DOCTYPE_STATE(e){iJ(e)?this.state="BEFORE_DOCTYPE_NAME_STATE":e===eJ.GREATER_THAN_SIGN?this._reconsumeInState("BEFORE_DOCTYPE_NAME_STATE"):e===eJ.EOF?(this._err(JZ.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(JZ.missingWhitespaceBeforeDoctypeName),this._reconsumeInState("BEFORE_DOCTYPE_NAME_STATE"))}BEFORE_DOCTYPE_NAME_STATE(e){iJ(e)||(oJ(e)?(this._createDoctypeToken(fJ(e)),this.state="DOCTYPE_NAME_STATE"):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this._createDoctypeToken(QZ.REPLACEMENT_CHARACTER),this.state="DOCTYPE_NAME_STATE"):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.missingDoctypeName),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=rJ):e===eJ.EOF?(this._err(JZ.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._createDoctypeToken(dJ(e)),this.state="DOCTYPE_NAME_STATE"))}DOCTYPE_NAME_STATE(e){iJ(e)?this.state="AFTER_DOCTYPE_NAME_STATE":e===eJ.GREATER_THAN_SIGN?(this.state=rJ,this._emitCurrentToken()):oJ(e)?this.currentToken.name+=fJ(e):e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentToken.name+=QZ.REPLACEMENT_CHARACTER):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.name+=dJ(e)}AFTER_DOCTYPE_NAME_STATE(e){iJ(e)||(e===eJ.GREATER_THAN_SIGN?(this.state=rJ,this._emitCurrentToken()):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this._consumeSequenceIfMatch(tJ.PUBLIC_STRING,e,!1)?this.state="AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE":this._consumeSequenceIfMatch(tJ.SYSTEM_STRING,e,!1)?this.state="AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE":this._ensureHibernation()||(this._err(JZ.invalidCharacterSequenceAfterDoctypeName),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE(e){iJ(e)?this.state="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===eJ.QUOTATION_MARK?(this._err(JZ.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===eJ.APOSTROPHE?(this._err(JZ.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE"):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=rJ,this._emitCurrentToken()):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(JZ.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE(e){iJ(e)||(e===eJ.QUOTATION_MARK?(this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===eJ.APOSTROPHE?(this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE"):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=rJ,this._emitCurrentToken()):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(JZ.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE(e){e===eJ.QUOTATION_MARK?this.state="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentToken.publicId+=QZ.REPLACEMENT_CHARACTER):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=rJ):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=dJ(e)}DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE(e){e===eJ.APOSTROPHE?this.state="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE":e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentToken.publicId+=QZ.REPLACEMENT_CHARACTER):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=rJ):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=dJ(e)}AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE(e){iJ(e)?this.state="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE":e===eJ.GREATER_THAN_SIGN?(this.state=rJ,this._emitCurrentToken()):e===eJ.QUOTATION_MARK?(this._err(JZ.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===eJ.APOSTROPHE?(this._err(JZ.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(JZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE(e){iJ(e)||(e===eJ.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=rJ):e===eJ.QUOTATION_MARK?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===eJ.APOSTROPHE?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(JZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE(e){iJ(e)?this.state="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===eJ.QUOTATION_MARK?(this._err(JZ.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===eJ.APOSTROPHE?(this._err(JZ.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=rJ,this._emitCurrentToken()):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(JZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE"))}BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE(e){iJ(e)||(e===eJ.QUOTATION_MARK?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):e===eJ.APOSTROPHE?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=rJ,this._emitCurrentToken()):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(JZ.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE(e){e===eJ.QUOTATION_MARK?this.state="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentToken.systemId+=QZ.REPLACEMENT_CHARACTER):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=rJ):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=dJ(e)}DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE(e){e===eJ.APOSTROPHE?this.state="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE":e===eJ.NULL?(this._err(JZ.unexpectedNullCharacter),this.currentToken.systemId+=QZ.REPLACEMENT_CHARACTER):e===eJ.GREATER_THAN_SIGN?(this._err(JZ.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=rJ):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=dJ(e)}AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE(e){iJ(e)||(e===eJ.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=rJ):e===eJ.EOF?(this._err(JZ.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(JZ.unexpectedCharacterAfterDoctypeSystemIdentifier),this._reconsumeInState("BOGUS_DOCTYPE_STATE")))}BOGUS_DOCTYPE_STATE(e){e===eJ.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=rJ):e===eJ.NULL?this._err(JZ.unexpectedNullCharacter):e===eJ.EOF&&(this._emitCurrentToken(),this._emitEOFToken())}CDATA_SECTION_STATE(e){e===eJ.RIGHT_SQUARE_BRACKET?this.state="CDATA_SECTION_BRACKET_STATE":e===eJ.EOF?(this._err(JZ.eofInCdata),this._emitEOFToken()):this._emitCodePoint(e)}CDATA_SECTION_BRACKET_STATE(e){e===eJ.RIGHT_SQUARE_BRACKET?this.state="CDATA_SECTION_END_STATE":(this._emitChars("]"),this._reconsumeInState("CDATA_SECTION_STATE"))}CDATA_SECTION_END_STATE(e){e===eJ.GREATER_THAN_SIGN?this.state=rJ:e===eJ.RIGHT_SQUARE_BRACKET?this._emitChars("]"):(this._emitChars("]]"),this._reconsumeInState("CDATA_SECTION_STATE"))}CHARACTER_REFERENCE_STATE(e){this.tempBuff=[eJ.AMPERSAND],e===eJ.NUMBER_SIGN?(this.tempBuff.push(e),this.state="NUMERIC_CHARACTER_REFERENCE_STATE"):cJ(e)?this._reconsumeInState("NAMED_CHARACTER_REFERENCE_STATE"):(this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}NAMED_CHARACTER_REFERENCE_STATE(e){const t=this._matchNamedCharacterReference(e);if(this._ensureHibernation())this.tempBuff=[eJ.AMPERSAND];else if(t){const e=this.tempBuff[this.tempBuff.length-1]===eJ.SEMICOLON;this._isCharacterReferenceAttributeQuirk(e)||(e||this._errOnNextCodePoint(JZ.missingSemicolonAfterCharacterReference),this.tempBuff=t),this._flushCodePointsConsumedAsCharacterReference(),this.state=this.returnState}else this._flushCodePointsConsumedAsCharacterReference(),this.state="AMBIGUOS_AMPERSAND_STATE"}AMBIGUOS_AMPERSAND_STATE(e){cJ(e)?this._isCharacterReferenceInAttribute()?this.currentAttr.value+=dJ(e):this._emitCodePoint(e):(e===eJ.SEMICOLON&&this._err(JZ.unknownNamedCharacterReference),this._reconsumeInState(this.returnState))}NUMERIC_CHARACTER_REFERENCE_STATE(e){this.charRefCode=0,e===eJ.LATIN_SMALL_X||e===eJ.LATIN_CAPITAL_X?(this.tempBuff.push(e),this.state="HEXADEMICAL_CHARACTER_REFERENCE_START_STATE"):this._reconsumeInState("DECIMAL_CHARACTER_REFERENCE_START_STATE")}HEXADEMICAL_CHARACTER_REFERENCE_START_STATE(e){!function(e){return aJ(e)||uJ(e)||hJ(e)}(e)?(this._err(JZ.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)):this._reconsumeInState("HEXADEMICAL_CHARACTER_REFERENCE_STATE")}DECIMAL_CHARACTER_REFERENCE_START_STATE(e){aJ(e)?this._reconsumeInState("DECIMAL_CHARACTER_REFERENCE_STATE"):(this._err(JZ.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}HEXADEMICAL_CHARACTER_REFERENCE_STATE(e){uJ(e)?this.charRefCode=16*this.charRefCode+e-55:hJ(e)?this.charRefCode=16*this.charRefCode+e-87:aJ(e)?this.charRefCode=16*this.charRefCode+e-48:e===eJ.SEMICOLON?this.state="NUMERIC_CHARACTER_REFERENCE_END_STATE":(this._err(JZ.missingSemicolonAfterCharacterReference),this._reconsumeInState("NUMERIC_CHARACTER_REFERENCE_END_STATE"))}DECIMAL_CHARACTER_REFERENCE_STATE(e){aJ(e)?this.charRefCode=10*this.charRefCode+e-48:e===eJ.SEMICOLON?this.state="NUMERIC_CHARACTER_REFERENCE_END_STATE":(this._err(JZ.missingSemicolonAfterCharacterReference),this._reconsumeInState("NUMERIC_CHARACTER_REFERENCE_END_STATE"))}NUMERIC_CHARACTER_REFERENCE_END_STATE(){if(this.charRefCode===eJ.NULL)this._err(JZ.nullCharacterReference),this.charRefCode=eJ.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(JZ.characterReferenceOutsideUnicodeRange),this.charRefCode=eJ.REPLACEMENT_CHARACTER;else if(QZ.isSurrogate(this.charRefCode))this._err(JZ.surrogateCharacterReference),this.charRefCode=eJ.REPLACEMENT_CHARACTER;else if(QZ.isUndefinedCodePoint(this.charRefCode))this._err(JZ.noncharacterCharacterReference);else if(QZ.isControlCodePoint(this.charRefCode)||this.charRefCode===eJ.CARRIAGE_RETURN){this._err(JZ.controlCharacterReference);const e=nJ[this.charRefCode];e&&(this.charRefCode=e)}this.tempBuff=[this.charRefCode],this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)}}gJ.CHARACTER_TOKEN="CHARACTER_TOKEN",gJ.NULL_CHARACTER_TOKEN="NULL_CHARACTER_TOKEN",gJ.WHITESPACE_CHARACTER_TOKEN="WHITESPACE_CHARACTER_TOKEN",gJ.START_TAG_TOKEN="START_TAG_TOKEN",gJ.END_TAG_TOKEN="END_TAG_TOKEN",gJ.COMMENT_TOKEN="COMMENT_TOKEN",gJ.DOCTYPE_TOKEN="DOCTYPE_TOKEN",gJ.EOF_TOKEN="EOF_TOKEN",gJ.HIBERNATION_TOKEN="HIBERNATION_TOKEN",gJ.MODE={DATA:rJ,RCDATA:"RCDATA_STATE",RAWTEXT:"RAWTEXT_STATE",SCRIPT_DATA:"SCRIPT_DATA_STATE",PLAINTEXT:"PLAINTEXT_STATE"},gJ.getTokenAttr=function(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null};var vJ=gJ,yJ={};const xJ=yJ.NAMESPACES={HTML:"http://www.w3.org/1999/xhtml",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"};yJ.ATTRS={TYPE:"type",ACTION:"action",ENCODING:"encoding",PROMPT:"prompt",NAME:"name",COLOR:"color",FACE:"face",SIZE:"size"},yJ.DOCUMENT_MODE={NO_QUIRKS:"no-quirks",QUIRKS:"quirks",LIMITED_QUIRKS:"limited-quirks"};const EJ=yJ.TAG_NAMES={A:"a",ADDRESS:"address",ANNOTATION_XML:"annotation-xml",APPLET:"applet",AREA:"area",ARTICLE:"article",ASIDE:"aside",B:"b",BASE:"base",BASEFONT:"basefont",BGSOUND:"bgsound",BIG:"big",BLOCKQUOTE:"blockquote",BODY:"body",BR:"br",BUTTON:"button",CAPTION:"caption",CENTER:"center",CODE:"code",COL:"col",COLGROUP:"colgroup",DD:"dd",DESC:"desc",DETAILS:"details",DIALOG:"dialog",DIR:"dir",DIV:"div",DL:"dl",DT:"dt",EM:"em",EMBED:"embed",FIELDSET:"fieldset",FIGCAPTION:"figcaption",FIGURE:"figure",FONT:"font",FOOTER:"footer",FOREIGN_OBJECT:"foreignObject",FORM:"form",FRAME:"frame",FRAMESET:"frameset",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HEAD:"head",HEADER:"header",HGROUP:"hgroup",HR:"hr",HTML:"html",I:"i",IMG:"img",IMAGE:"image",INPUT:"input",IFRAME:"iframe",KEYGEN:"keygen",LABEL:"label",LI:"li",LINK:"link",LISTING:"listing",MAIN:"main",MALIGNMARK:"malignmark",MARQUEE:"marquee",MATH:"math",MENU:"menu",META:"meta",MGLYPH:"mglyph",MI:"mi",MO:"mo",MN:"mn",MS:"ms",MTEXT:"mtext",NAV:"nav",NOBR:"nobr",NOFRAMES:"noframes",NOEMBED:"noembed",NOSCRIPT:"noscript",OBJECT:"object",OL:"ol",OPTGROUP:"optgroup",OPTION:"option",P:"p",PARAM:"param",PLAINTEXT:"plaintext",PRE:"pre",RB:"rb",RP:"rp",RT:"rt",RTC:"rtc",RUBY:"ruby",S:"s",SCRIPT:"script",SECTION:"section",SELECT:"select",SOURCE:"source",SMALL:"small",SPAN:"span",STRIKE:"strike",STRONG:"strong",STYLE:"style",SUB:"sub",SUMMARY:"summary",SUP:"sup",TABLE:"table",TBODY:"tbody",TEMPLATE:"template",TEXTAREA:"textarea",TFOOT:"tfoot",TD:"td",TH:"th",THEAD:"thead",TITLE:"title",TR:"tr",TRACK:"track",TT:"tt",U:"u",UL:"ul",SVG:"svg",VAR:"var",WBR:"wbr",XMP:"xmp"};yJ.SPECIAL_ELEMENTS={[xJ.HTML]:{[EJ.ADDRESS]:!0,[EJ.APPLET]:!0,[EJ.AREA]:!0,[EJ.ARTICLE]:!0,[EJ.ASIDE]:!0,[EJ.BASE]:!0,[EJ.BASEFONT]:!0,[EJ.BGSOUND]:!0,[EJ.BLOCKQUOTE]:!0,[EJ.BODY]:!0,[EJ.BR]:!0,[EJ.BUTTON]:!0,[EJ.CAPTION]:!0,[EJ.CENTER]:!0,[EJ.COL]:!0,[EJ.COLGROUP]:!0,[EJ.DD]:!0,[EJ.DETAILS]:!0,[EJ.DIR]:!0,[EJ.DIV]:!0,[EJ.DL]:!0,[EJ.DT]:!0,[EJ.EMBED]:!0,[EJ.FIELDSET]:!0,[EJ.FIGCAPTION]:!0,[EJ.FIGURE]:!0,[EJ.FOOTER]:!0,[EJ.FORM]:!0,[EJ.FRAME]:!0,[EJ.FRAMESET]:!0,[EJ.H1]:!0,[EJ.H2]:!0,[EJ.H3]:!0,[EJ.H4]:!0,[EJ.H5]:!0,[EJ.H6]:!0,[EJ.HEAD]:!0,[EJ.HEADER]:!0,[EJ.HGROUP]:!0,[EJ.HR]:!0,[EJ.HTML]:!0,[EJ.IFRAME]:!0,[EJ.IMG]:!0,[EJ.INPUT]:!0,[EJ.LI]:!0,[EJ.LINK]:!0,[EJ.LISTING]:!0,[EJ.MAIN]:!0,[EJ.MARQUEE]:!0,[EJ.MENU]:!0,[EJ.META]:!0,[EJ.NAV]:!0,[EJ.NOEMBED]:!0,[EJ.NOFRAMES]:!0,[EJ.NOSCRIPT]:!0,[EJ.OBJECT]:!0,[EJ.OL]:!0,[EJ.P]:!0,[EJ.PARAM]:!0,[EJ.PLAINTEXT]:!0,[EJ.PRE]:!0,[EJ.SCRIPT]:!0,[EJ.SECTION]:!0,[EJ.SELECT]:!0,[EJ.SOURCE]:!0,[EJ.STYLE]:!0,[EJ.SUMMARY]:!0,[EJ.TABLE]:!0,[EJ.TBODY]:!0,[EJ.TD]:!0,[EJ.TEMPLATE]:!0,[EJ.TEXTAREA]:!0,[EJ.TFOOT]:!0,[EJ.TH]:!0,[EJ.THEAD]:!0,[EJ.TITLE]:!0,[EJ.TR]:!0,[EJ.TRACK]:!0,[EJ.UL]:!0,[EJ.WBR]:!0,[EJ.XMP]:!0},[xJ.MATHML]:{[EJ.MI]:!0,[EJ.MO]:!0,[EJ.MN]:!0,[EJ.MS]:!0,[EJ.MTEXT]:!0,[EJ.ANNOTATION_XML]:!0},[xJ.SVG]:{[EJ.TITLE]:!0,[EJ.FOREIGN_OBJECT]:!0,[EJ.DESC]:!0}};const bJ=yJ,CJ=bJ.TAG_NAMES,wJ=bJ.NAMESPACES;function TJ(e){switch(e.length){case 1:return e===CJ.P;case 2:return e===CJ.RB||e===CJ.RP||e===CJ.RT||e===CJ.DD||e===CJ.DT||e===CJ.LI;case 3:return e===CJ.RTC;case 6:return e===CJ.OPTION;case 8:return e===CJ.OPTGROUP}return!1}function SJ(e){switch(e.length){case 1:return e===CJ.P;case 2:return e===CJ.RB||e===CJ.RP||e===CJ.RT||e===CJ.DD||e===CJ.DT||e===CJ.LI||e===CJ.TD||e===CJ.TH||e===CJ.TR;case 3:return e===CJ.RTC;case 5:return e===CJ.TBODY||e===CJ.TFOOT||e===CJ.THEAD;case 6:return e===CJ.OPTION;case 7:return e===CJ.CAPTION;case 8:return e===CJ.OPTGROUP||e===CJ.COLGROUP}return!1}function kJ(e,t){switch(e.length){case 2:if(e===CJ.TD||e===CJ.TH)return t===wJ.HTML;if(e===CJ.MI||e===CJ.MO||e===CJ.MN||e===CJ.MS)return t===wJ.MATHML;break;case 4:if(e===CJ.HTML)return t===wJ.HTML;if(e===CJ.DESC)return t===wJ.SVG;break;case 5:if(e===CJ.TABLE)return t===wJ.HTML;if(e===CJ.MTEXT)return t===wJ.MATHML;if(e===CJ.TITLE)return t===wJ.SVG;break;case 6:return(e===CJ.APPLET||e===CJ.OBJECT)&&t===wJ.HTML;case 7:return(e===CJ.CAPTION||e===CJ.MARQUEE)&&t===wJ.HTML;case 8:return e===CJ.TEMPLATE&&t===wJ.HTML;case 13:return e===CJ.FOREIGN_OBJECT&&t===wJ.SVG;case 14:return e===CJ.ANNOTATION_XML&&t===wJ.MATHML}return!1}var _J=class{constructor(e,t){this.stackTop=-1,this.items=[],this.current=e,this.currentTagName=null,this.currentTmplContent=null,this.tmplCount=0,this.treeAdapter=t}_indexOf(e){let t=-1;for(let n=this.stackTop;n>=0;n--)if(this.items[n]===e){t=n;break}return t}_isInTemplate(){return this.currentTagName===CJ.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===wJ.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagName=this.current&&this.treeAdapter.getTagName(this.current),this.currentTmplContent=this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):null}push(e){this.items[++this.stackTop]=e,this._updateCurrentElement(),this._isInTemplate()&&this.tmplCount++}pop(){this.stackTop--,this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this._updateCurrentElement()}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&this._updateCurrentElement()}insertAfter(e,t){const n=this._indexOf(e)+1;this.items.splice(n,0,t),n===++this.stackTop&&this._updateCurrentElement()}popUntilTagNamePopped(e){for(;this.stackTop>-1;){const t=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),t===e&&n===wJ.HTML)break}}popUntilElementPopped(e){for(;this.stackTop>-1;){const t=this.current;if(this.pop(),t===e)break}}popUntilNumberedHeaderPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===CJ.H1||e===CJ.H2||e===CJ.H3||e===CJ.H4||e===CJ.H5||e===CJ.H6&&t===wJ.HTML)break}}popUntilTableCellPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===CJ.TD||e===CJ.TH&&t===wJ.HTML)break}}popAllUpToHtmlElement(){this.stackTop=0,this._updateCurrentElement()}clearBackToTableContext(){for(;this.currentTagName!==CJ.TABLE&&this.currentTagName!==CJ.TEMPLATE&&this.currentTagName!==CJ.HTML||this.treeAdapter.getNamespaceURI(this.current)!==wJ.HTML;)this.pop()}clearBackToTableBodyContext(){for(;this.currentTagName!==CJ.TBODY&&this.currentTagName!==CJ.TFOOT&&this.currentTagName!==CJ.THEAD&&this.currentTagName!==CJ.TEMPLATE&&this.currentTagName!==CJ.HTML||this.treeAdapter.getNamespaceURI(this.current)!==wJ.HTML;)this.pop()}clearBackToTableRowContext(){for(;this.currentTagName!==CJ.TR&&this.currentTagName!==CJ.TEMPLATE&&this.currentTagName!==CJ.HTML||this.treeAdapter.getNamespaceURI(this.current)!==wJ.HTML;)this.pop()}remove(e){for(let t=this.stackTop;t>=0;t--)if(this.items[t]===e){this.items.splice(t,1),this.stackTop--,this._updateCurrentElement();break}}tryPeekProperlyNestedBodyElement(){const e=this.items[1];return e&&this.treeAdapter.getTagName(e)===CJ.BODY?e:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){let t=this._indexOf(e);return--t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.currentTagName===CJ.HTML}hasInScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===wJ.HTML)return!0;if(kJ(n,r))return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]),n=this.treeAdapter.getNamespaceURI(this.items[e]);if((t===CJ.H1||t===CJ.H2||t===CJ.H3||t===CJ.H4||t===CJ.H5||t===CJ.H6)&&n===wJ.HTML)return!0;if(kJ(t,n))return!1}return!0}hasInListItemScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===wJ.HTML)return!0;if((n===CJ.UL||n===CJ.OL)&&r===wJ.HTML||kJ(n,r))return!1}return!0}hasInButtonScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===wJ.HTML)return!0;if(n===CJ.BUTTON&&r===wJ.HTML||kJ(n,r))return!1}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===wJ.HTML){if(n===e)return!0;if(n===CJ.TABLE||n===CJ.TEMPLATE||n===CJ.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]);if(this.treeAdapter.getNamespaceURI(this.items[e])===wJ.HTML){if(t===CJ.TBODY||t===CJ.THEAD||t===CJ.TFOOT)return!0;if(t===CJ.TABLE||t===CJ.HTML)return!1}}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===wJ.HTML){if(n===e)return!0;if(n!==CJ.OPTION&&n!==CJ.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;TJ(this.currentTagName);)this.pop()}generateImpliedEndTagsThoroughly(){for(;SJ(this.currentTagName);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;TJ(this.currentTagName)&&this.currentTagName!==e;)this.pop()}};class AJ{constructor(e){this.length=0,this.entries=[],this.treeAdapter=e,this.bookmark=null}_getNoahArkConditionCandidates(e){const t=[];if(this.length>=3){const n=this.treeAdapter.getAttrList(e).length,r=this.treeAdapter.getTagName(e),i=this.treeAdapter.getNamespaceURI(e);for(let e=this.length-1;e>=0;e--){const a=this.entries[e];if(a.type===AJ.MARKER_ENTRY)break;const o=a.element,s=this.treeAdapter.getAttrList(o);this.treeAdapter.getTagName(o)===r&&this.treeAdapter.getNamespaceURI(o)===i&&s.length===n&&t.push({idx:e,attrs:s})}}return t.length<3?[]:t}_ensureNoahArkCondition(e){const t=this._getNoahArkConditionCandidates(e);let n=t.length;if(n){const r=this.treeAdapter.getAttrList(e),i=r.length,a=Object.create(null);for(let e=0;e<i;e++){const t=r[e];a[t.name]=t.value}for(let e=0;e<i;e++)for(let r=0;r<n;r++){const i=t[r].attrs[e];if(a[i.name]!==i.value&&(t.splice(r,1),n--),t.length<3)return}for(let e=n-1;e>=2;e--)this.entries.splice(t[e].idx,1),this.length--}}insertMarker(){this.entries.push({type:AJ.MARKER_ENTRY}),this.length++}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.push({type:AJ.ELEMENT_ENTRY,element:e,token:t}),this.length++}insertElementAfterBookmark(e,t){let n=this.length-1;for(;n>=0&&this.entries[n]!==this.bookmark;n--);this.entries.splice(n+1,0,{type:AJ.ELEMENT_ENTRY,element:e,token:t}),this.length++}removeEntry(e){for(let t=this.length-1;t>=0;t--)if(this.entries[t]===e){this.entries.splice(t,1),this.length--;break}}clearToLastMarker(){for(;this.length;){const e=this.entries.pop();if(this.length--,e.type===AJ.MARKER_ENTRY)break}}getElementEntryInScopeWithTagName(e){for(let t=this.length-1;t>=0;t--){const n=this.entries[t];if(n.type===AJ.MARKER_ENTRY)return null;if(this.treeAdapter.getTagName(n.element)===e)return n}return null}getElementEntry(e){for(let t=this.length-1;t>=0;t--){const n=this.entries[t];if(n.type===AJ.ELEMENT_ENTRY&&n.element===e)return n}return null}}AJ.MARKER_ENTRY="MARKER_ENTRY",AJ.ELEMENT_ENTRY="ELEMENT_ENTRY";var OJ=AJ;class IJ{constructor(e){const t={},n=this._getOverriddenMethods(this,t);for(const r of Object.keys(n))"function"==typeof n[r]&&(t[r]=e[r],e[r]=n[r])}_getOverriddenMethods(){throw new Error("Not implemented")}}IJ.install=function(e,t,n){e.__mixins||(e.__mixins=[]);for(let i=0;i<e.__mixins.length;i++)if(e.__mixins[i].constructor===t)return e.__mixins[i];const r=new t(e,n);return e.__mixins.push(r),r};var MJ=IJ;const NJ=MJ;var FJ=class extends NJ{constructor(e){super(e),this.preprocessor=e,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.offset=0,this.col=0,this.line=1}_getOverriddenMethods(e,t){return{advance(){const n=this.pos+1,r=this.html[n];return e.isEol&&(e.isEol=!1,e.line++,e.lineStartPos=n),("\n"===r||"\r"===r&&"\n"!==this.html[n+1])&&(e.isEol=!0),e.col=n-e.lineStartPos+1,e.offset=e.droppedBufferSize+n,t.advance.call(this)},retreat(){t.retreat.call(this),e.isEol=!1,e.col=this.pos-e.lineStartPos+1},dropParsedChunk(){const n=this.pos;t.dropParsedChunk.call(this);const r=n-this.pos;e.lineStartPos-=r,e.droppedBufferSize+=r,e.offset=e.droppedBufferSize+this.pos}}}};const LJ=MJ,PJ=vJ,RJ=FJ;var DJ=class extends LJ{constructor(e){super(e),this.tokenizer=e,this.posTracker=LJ.install(e.preprocessor,RJ),this.currentAttrLocation=null,this.ctLoc=null}_getCurrentLocation(){return{startLine:this.posTracker.line,startCol:this.posTracker.col,startOffset:this.posTracker.offset,endLine:-1,endCol:-1,endOffset:-1}}_attachCurrentAttrLocationInfo(){this.currentAttrLocation.endLine=this.posTracker.line,this.currentAttrLocation.endCol=this.posTracker.col,this.currentAttrLocation.endOffset=this.posTracker.offset;const e=this.tokenizer.currentToken,t=this.tokenizer.currentAttr;e.location.attrs||(e.location.attrs=Object.create(null)),e.location.attrs[t.name]=this.currentAttrLocation}_getOverriddenMethods(e,t){const n={_createStartTagToken(){t._createStartTagToken.call(this),this.currentToken.location=e.ctLoc},_createEndTagToken(){t._createEndTagToken.call(this),this.currentToken.location=e.ctLoc},_createCommentToken(){t._createCommentToken.call(this),this.currentToken.location=e.ctLoc},_createDoctypeToken(n){t._createDoctypeToken.call(this,n),this.currentToken.location=e.ctLoc},_createCharacterToken(n,r){t._createCharacterToken.call(this,n,r),this.currentCharacterToken.location=e.ctLoc},_createEOFToken(){t._createEOFToken.call(this),this.currentToken.location=e._getCurrentLocation()},_createAttr(n){t._createAttr.call(this,n),e.currentAttrLocation=e._getCurrentLocation()},_leaveAttrName(n){t._leaveAttrName.call(this,n),e._attachCurrentAttrLocationInfo()},_leaveAttrValue(n){t._leaveAttrValue.call(this,n),e._attachCurrentAttrLocationInfo()},_emitCurrentToken(){const n=this.currentToken.location;this.currentCharacterToken&&(this.currentCharacterToken.location.endLine=n.startLine,this.currentCharacterToken.location.endCol=n.startCol,this.currentCharacterToken.location.endOffset=n.startOffset),this.currentToken.type===PJ.EOF_TOKEN?(n.endLine=n.startLine,n.endCol=n.startCol,n.endOffset=n.startOffset):(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col+1,n.endOffset=e.posTracker.offset+1),t._emitCurrentToken.call(this)},_emitCurrentCharacterToken(){const n=this.currentCharacterToken&&this.currentCharacterToken.location;n&&-1===n.endOffset&&(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col,n.endOffset=e.posTracker.offset),t._emitCurrentCharacterToken.call(this)}};return Object.keys(PJ.MODE).forEach((r=>{const i=PJ.MODE[r];n[i]=function(n){e.ctLoc=e._getCurrentLocation(),t[i].call(this,n)}})),n}};const BJ=MJ;const zJ=MJ,HJ=vJ,jJ=DJ,GJ=class extends BJ{constructor(e,t){super(e),this.onItemPop=t.onItemPop}_getOverriddenMethods(e,t){return{pop(){e.onItemPop(this.current),t.pop.call(this)},popAllUpToHtmlElement(){for(let t=this.stackTop;t>0;t--)e.onItemPop(this.items[t]);t.popAllUpToHtmlElement.call(this)},remove(n){e.onItemPop(this.current),t.remove.call(this,n)}}}},$J=yJ.TAG_NAMES;var YJ=class extends zJ{constructor(e){super(e),this.parser=e,this.treeAdapter=this.parser.treeAdapter,this.posTracker=null,this.lastStartTagToken=null,this.lastFosterParentingLocation=null,this.currentToken=null}_setStartLocation(e){let t=null;this.lastStartTagToken&&(t=Object.assign({},this.lastStartTagToken.location),t.startTag=this.lastStartTagToken.location),this.treeAdapter.setNodeSourceCodeLocation(e,t)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),i={};t.type===HJ.END_TAG_TOKEN&&r===t.tagName?(i.endTag=Object.assign({},n),i.endLine=n.endLine,i.endCol=n.endCol,i.endOffset=n.endOffset):(i.endLine=n.startLine,i.endCol=n.startCol,i.endOffset=n.startOffset),this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}_getOverriddenMethods(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),e.lastStartTagToken=null,e.lastFosterParentingLocation=null,e.currentToken=null;const i=zJ.install(this.tokenizer,jJ);e.posTracker=i.posTracker,zJ.install(this.openElements,GJ,{onItemPop:function(t){e._setEndLocation(t,e.currentToken)}})},_runParsingLoop(n){t._runParsingLoop.call(this,n);for(let t=this.openElements.stackTop;t>=0;t--)e._setEndLocation(this.openElements.items[t],e.currentToken)},_processTokenInForeignContent(n){e.currentToken=n,t._processTokenInForeignContent.call(this,n)},_processToken(n){e.currentToken=n,t._processToken.call(this,n);if(n.type===HJ.END_TAG_TOKEN&&(n.tagName===$J.HTML||n.tagName===$J.BODY&&this.openElements.hasInScope($J.BODY)))for(let t=this.openElements.stackTop;t>=0;t--){const r=this.openElements.items[t];if(this.treeAdapter.getTagName(r)===n.tagName){e._setEndLocation(r,n);break}}},_setDocumentType(e){t._setDocumentType.call(this,e);const n=this.treeAdapter.getChildNodes(this.document),r=n.length;for(let t=0;t<r;t++){const r=n[t];if(this.treeAdapter.isDocumentTypeNode(r)){this.treeAdapter.setNodeSourceCodeLocation(r,e.location);break}}},_attachElementToTree(n){e._setStartLocation(n),e.lastStartTagToken=null,t._attachElementToTree.call(this,n)},_appendElement(n,r){e.lastStartTagToken=n,t._appendElement.call(this,n,r)},_insertElement(n,r){e.lastStartTagToken=n,t._insertElement.call(this,n,r)},_insertTemplate(n){e.lastStartTagToken=n,t._insertTemplate.call(this,n);const r=this.treeAdapter.getTemplateContent(this.openElements.current);this.treeAdapter.setNodeSourceCodeLocation(r,null)},_insertFakeRootElement(){t._insertFakeRootElement.call(this),this.treeAdapter.setNodeSourceCodeLocation(this.openElements.current,null)},_appendCommentNode(e,n){t._appendCommentNode.call(this,e,n);const r=this.treeAdapter.getChildNodes(n),i=r[r.length-1];this.treeAdapter.setNodeSourceCodeLocation(i,e.location)},_findFosterParentingLocation(){return e.lastFosterParentingLocation=t._findFosterParentingLocation.call(this),e.lastFosterParentingLocation},_insertCharacters(n){t._insertCharacters.call(this,n);const r=this._shouldFosterParentOnInsertion(),i=r&&e.lastFosterParentingLocation.parent||this.openElements.currentTmplContent||this.openElements.current,a=this.treeAdapter.getChildNodes(i),o=r&&e.lastFosterParentingLocation.beforeElement?a.indexOf(e.lastFosterParentingLocation.beforeElement)-1:a.length-1,s=a[o];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:e,endCol:t,endOffset:r}=n.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:e,endCol:t,endOffset:r})}else this.treeAdapter.setNodeSourceCodeLocation(s,n.location)}}}};const UJ=MJ;var VJ=class extends UJ{constructor(e,t){super(e),this.posTracker=null,this.onParseError=t.onParseError}_setErrorLocation(e){e.startLine=e.endLine=this.posTracker.line,e.startCol=e.endCol=this.posTracker.col,e.startOffset=e.endOffset=this.posTracker.offset}_reportError(e){const t={code:e,startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1};this._setErrorLocation(t),this.onParseError(t)}_getOverriddenMethods(e){return{_err(t){e._reportError(t)}}}};const WJ=VJ,XJ=FJ,qJ=MJ;const KJ=VJ,QJ=class extends WJ{constructor(e,t){super(e,t),this.posTracker=qJ.install(e,XJ),this.lastErrOffset=-1}_reportError(e){this.lastErrOffset!==this.posTracker.offset&&(this.lastErrOffset=this.posTracker.offset,super._reportError(e))}},ZJ=MJ;const JJ=VJ,e1=class extends KJ{constructor(e,t){super(e,t);const n=ZJ.install(e.preprocessor,QJ,t);this.posTracker=n.posTracker}},t1=DJ,n1=MJ;var r1=class extends JJ{constructor(e,t){super(e,t),this.opts=t,this.ctLoc=null,this.locBeforeToken=!1}_setErrorLocation(e){this.ctLoc&&(e.startLine=this.ctLoc.startLine,e.startCol=this.ctLoc.startCol,e.startOffset=this.ctLoc.startOffset,e.endLine=this.locBeforeToken?this.ctLoc.startLine:this.ctLoc.endLine,e.endCol=this.locBeforeToken?this.ctLoc.startCol:this.ctLoc.endCol,e.endOffset=this.locBeforeToken?this.ctLoc.startOffset:this.ctLoc.endOffset)}_getOverriddenMethods(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),n1.install(this.tokenizer,e1,e.opts),n1.install(this.tokenizer,t1)},_processInputToken(n){e.ctLoc=n.location,t._processInputToken.call(this,n)},_err(t,n){e.locBeforeToken=n&&n.beforeToken,e._reportError(t)}}}},i1={};const{DOCUMENT_MODE:a1}=yJ;i1.createDocument=function(){return{nodeName:"#document",mode:a1.NO_QUIRKS,childNodes:[]}},i1.createDocumentFragment=function(){return{nodeName:"#document-fragment",childNodes:[]}},i1.createElement=function(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},i1.createCommentNode=function(e){return{nodeName:"#comment",data:e,parentNode:null}};const o1=function(e){return{nodeName:"#text",value:e,parentNode:null}},s1=i1.appendChild=function(e,t){e.childNodes.push(t),t.parentNode=e},l1=i1.insertBefore=function(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e};i1.setTemplateContent=function(e,t){e.content=t},i1.getTemplateContent=function(e){return e.content},i1.setDocumentType=function(e,t,n,r){let i=null;for(let a=0;a<e.childNodes.length;a++)if("#documentType"===e.childNodes[a].nodeName){i=e.childNodes[a];break}i?(i.name=t,i.publicId=n,i.systemId=r):s1(e,{nodeName:"#documentType",name:t,publicId:n,systemId:r})},i1.setDocumentMode=function(e,t){e.mode=t},i1.getDocumentMode=function(e){return e.mode},i1.detachNode=function(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},i1.insertText=function(e,t){if(e.childNodes.length){const n=e.childNodes[e.childNodes.length-1];if("#text"===n.nodeName)return void(n.value+=t)}s1(e,o1(t))},i1.insertTextBefore=function(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&"#text"===r.nodeName?r.value+=t:l1(e,o1(t),n)},i1.adoptAttributes=function(e,t){const n=[];for(let r=0;r<e.attrs.length;r++)n.push(e.attrs[r].name);for(let r=0;r<t.length;r++)-1===n.indexOf(t[r].name)&&e.attrs.push(t[r])},i1.getFirstChild=function(e){return e.childNodes[0]},i1.getChildNodes=function(e){return e.childNodes},i1.getParentNode=function(e){return e.parentNode},i1.getAttrList=function(e){return e.attrs},i1.getTagName=function(e){return e.tagName},i1.getNamespaceURI=function(e){return e.namespaceURI},i1.getTextNodeContent=function(e){return e.value},i1.getCommentNodeContent=function(e){return e.data},i1.getDocumentTypeNodeName=function(e){return e.name},i1.getDocumentTypeNodePublicId=function(e){return e.publicId},i1.getDocumentTypeNodeSystemId=function(e){return e.systemId},i1.isTextNode=function(e){return"#text"===e.nodeName},i1.isCommentNode=function(e){return"#comment"===e.nodeName},i1.isDocumentTypeNode=function(e){return"#documentType"===e.nodeName},i1.isElementNode=function(e){return!!e.tagName},i1.setNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=t},i1.getNodeSourceCodeLocation=function(e){return e.sourceCodeLocation},i1.updateNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=Object.assign(e.sourceCodeLocation,t)};var c1={};const{DOCUMENT_MODE:u1}=yJ,h1=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],p1=h1.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]),d1=["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"],f1=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],m1=f1.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]);function g1(e){const t=-1!==e.indexOf('"')?"'":'"';return t+e+t}function v1(e,t){for(let n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return!0;return!1}c1.isConforming=function(e){return"html"===e.name&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)},c1.getDocumentMode=function(e){if("html"!==e.name)return u1.QUIRKS;const t=e.systemId;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return u1.QUIRKS;let n=e.publicId;if(null!==n){if(n=n.toLowerCase(),d1.indexOf(n)>-1)return u1.QUIRKS;let e=null===t?p1:h1;if(v1(n,e))return u1.QUIRKS;if(e=null===t?f1:m1,v1(n,e))return u1.LIMITED_QUIRKS}return u1.NO_QUIRKS},c1.serializeContent=function(e,t,n){let r="!DOCTYPE ";return e&&(r+=e),t?r+=" PUBLIC "+g1(t):n&&(r+=" SYSTEM"),null!==n&&(r+=" "+g1(n)),r};var y1={};const x1=vJ,E1=yJ,b1=E1.TAG_NAMES,C1=E1.NAMESPACES,w1=E1.ATTRS,T1="text/html",S1="application/xhtml+xml",k1={attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},_1={"xlink:actuate":{prefix:"xlink",name:"actuate",namespace:C1.XLINK},"xlink:arcrole":{prefix:"xlink",name:"arcrole",namespace:C1.XLINK},"xlink:href":{prefix:"xlink",name:"href",namespace:C1.XLINK},"xlink:role":{prefix:"xlink",name:"role",namespace:C1.XLINK},"xlink:show":{prefix:"xlink",name:"show",namespace:C1.XLINK},"xlink:title":{prefix:"xlink",name:"title",namespace:C1.XLINK},"xlink:type":{prefix:"xlink",name:"type",namespace:C1.XLINK},"xml:base":{prefix:"xml",name:"base",namespace:C1.XML},"xml:lang":{prefix:"xml",name:"lang",namespace:C1.XML},"xml:space":{prefix:"xml",name:"space",namespace:C1.XML},xmlns:{prefix:"",name:"xmlns",namespace:C1.XMLNS},"xmlns:xlink":{prefix:"xmlns",name:"xlink",namespace:C1.XMLNS}},A1=y1.SVG_TAG_NAMES_ADJUSTMENT_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},O1={[b1.B]:!0,[b1.BIG]:!0,[b1.BLOCKQUOTE]:!0,[b1.BODY]:!0,[b1.BR]:!0,[b1.CENTER]:!0,[b1.CODE]:!0,[b1.DD]:!0,[b1.DIV]:!0,[b1.DL]:!0,[b1.DT]:!0,[b1.EM]:!0,[b1.EMBED]:!0,[b1.H1]:!0,[b1.H2]:!0,[b1.H3]:!0,[b1.H4]:!0,[b1.H5]:!0,[b1.H6]:!0,[b1.HEAD]:!0,[b1.HR]:!0,[b1.I]:!0,[b1.IMG]:!0,[b1.LI]:!0,[b1.LISTING]:!0,[b1.MENU]:!0,[b1.META]:!0,[b1.NOBR]:!0,[b1.OL]:!0,[b1.P]:!0,[b1.PRE]:!0,[b1.RUBY]:!0,[b1.S]:!0,[b1.SMALL]:!0,[b1.SPAN]:!0,[b1.STRONG]:!0,[b1.STRIKE]:!0,[b1.SUB]:!0,[b1.SUP]:!0,[b1.TABLE]:!0,[b1.TT]:!0,[b1.U]:!0,[b1.UL]:!0,[b1.VAR]:!0};y1.causesExit=function(e){const t=e.tagName;return!!(t===b1.FONT&&(null!==x1.getTokenAttr(e,w1.COLOR)||null!==x1.getTokenAttr(e,w1.SIZE)||null!==x1.getTokenAttr(e,w1.FACE)))||O1[t]},y1.adjustTokenMathMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}},y1.adjustTokenSVGAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=k1[e.attrs[t].name];n&&(e.attrs[t].name=n)}},y1.adjustTokenXMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=_1[e.attrs[t].name];n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}},y1.adjustTokenSVGTagName=function(e){const t=A1[e.tagName];t&&(e.tagName=t)},y1.isIntegrationPoint=function(e,t,n,r){return!(r&&r!==C1.HTML||!function(e,t,n){if(t===C1.MATHML&&e===b1.ANNOTATION_XML)for(let r=0;r<n.length;r++)if(n[r].name===w1.ENCODING){const e=n[r].value.toLowerCase();return e===T1||e===S1}return t===C1.SVG&&(e===b1.FOREIGN_OBJECT||e===b1.DESC||e===b1.TITLE)}(e,t,n))||!(r&&r!==C1.MATHML||!function(e,t){return t===C1.MATHML&&(e===b1.MI||e===b1.MO||e===b1.MN||e===b1.MS||e===b1.MTEXT)}(e,t))};const I1=vJ,M1=_J,N1=OJ,F1=YJ,L1=r1,P1=MJ,R1=i1,D1=function(e,t){return[e,t=t||Object.create(null)].reduce(((e,t)=>(Object.keys(t).forEach((n=>{e[n]=t[n]})),e)),Object.create(null))},B1=c1,z1=y1,H1=YZ,j1=GZ,G1=yJ,$1=G1.TAG_NAMES,Y1=G1.NAMESPACES,U1=G1.ATTRS,V1={scriptingEnabled:!0,sourceCodeLocationInfo:!1,onParseError:null,treeAdapter:R1},W1="IN_TABLE_MODE",X1={[$1.TR]:"IN_ROW_MODE",[$1.TBODY]:"IN_TABLE_BODY_MODE",[$1.THEAD]:"IN_TABLE_BODY_MODE",[$1.TFOOT]:"IN_TABLE_BODY_MODE",[$1.CAPTION]:"IN_CAPTION_MODE",[$1.COLGROUP]:"IN_COLUMN_GROUP_MODE",[$1.TABLE]:W1,[$1.BODY]:"IN_BODY_MODE",[$1.FRAMESET]:"IN_FRAMESET_MODE"},q1={[$1.CAPTION]:W1,[$1.COLGROUP]:W1,[$1.TBODY]:W1,[$1.TFOOT]:W1,[$1.THEAD]:W1,[$1.COL]:"IN_COLUMN_GROUP_MODE",[$1.TR]:"IN_TABLE_BODY_MODE",[$1.TD]:"IN_ROW_MODE",[$1.TH]:"IN_ROW_MODE"},K1={INITIAL_MODE:{[I1.CHARACTER_TOKEN]:h0,[I1.NULL_CHARACTER_TOKEN]:h0,[I1.WHITESPACE_CHARACTER_TOKEN]:a0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:function(e,t){e._setDocumentType(t);const n=t.forceQuirks?G1.DOCUMENT_MODE.QUIRKS:B1.getDocumentMode(t);B1.isConforming(t)||e._err(H1.nonConformingDoctype);e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode="BEFORE_HTML_MODE"},[I1.START_TAG_TOKEN]:h0,[I1.END_TAG_TOKEN]:h0,[I1.EOF_TOKEN]:h0},BEFORE_HTML_MODE:{[I1.CHARACTER_TOKEN]:p0,[I1.NULL_CHARACTER_TOKEN]:p0,[I1.WHITESPACE_CHARACTER_TOKEN]:a0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){t.tagName===$1.HTML?(e._insertElement(t,Y1.HTML),e.insertionMode="BEFORE_HEAD_MODE"):p0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n!==$1.HTML&&n!==$1.HEAD&&n!==$1.BODY&&n!==$1.BR||p0(e,t)},[I1.EOF_TOKEN]:p0},BEFORE_HEAD_MODE:{[I1.CHARACTER_TOKEN]:d0,[I1.NULL_CHARACTER_TOKEN]:d0,[I1.WHITESPACE_CHARACTER_TOKEN]:a0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:o0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.HTML?M0(e,t):n===$1.HEAD?(e._insertElement(t,Y1.HTML),e.headElement=e.openElements.current,e.insertionMode="IN_HEAD_MODE"):d0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.HEAD||n===$1.BODY||n===$1.HTML||n===$1.BR?d0(e,t):e._err(H1.endTagWithoutMatchingOpenElement)},[I1.EOF_TOKEN]:d0},IN_HEAD_MODE:{[I1.CHARACTER_TOKEN]:g0,[I1.NULL_CHARACTER_TOKEN]:g0,[I1.WHITESPACE_CHARACTER_TOKEN]:c0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:o0,[I1.START_TAG_TOKEN]:f0,[I1.END_TAG_TOKEN]:m0,[I1.EOF_TOKEN]:g0},IN_HEAD_NO_SCRIPT_MODE:{[I1.CHARACTER_TOKEN]:v0,[I1.NULL_CHARACTER_TOKEN]:v0,[I1.WHITESPACE_CHARACTER_TOKEN]:c0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:o0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.HTML?M0(e,t):n===$1.BASEFONT||n===$1.BGSOUND||n===$1.HEAD||n===$1.LINK||n===$1.META||n===$1.NOFRAMES||n===$1.STYLE?f0(e,t):n===$1.NOSCRIPT?e._err(H1.nestedNoscriptInHead):v0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.NOSCRIPT?(e.openElements.pop(),e.insertionMode="IN_HEAD_MODE"):n===$1.BR?v0(e,t):e._err(H1.endTagWithoutMatchingOpenElement)},[I1.EOF_TOKEN]:v0},AFTER_HEAD_MODE:{[I1.CHARACTER_TOKEN]:y0,[I1.NULL_CHARACTER_TOKEN]:y0,[I1.WHITESPACE_CHARACTER_TOKEN]:c0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:o0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.HTML?M0(e,t):n===$1.BODY?(e._insertElement(t,Y1.HTML),e.framesetOk=!1,e.insertionMode="IN_BODY_MODE"):n===$1.FRAMESET?(e._insertElement(t,Y1.HTML),e.insertionMode="IN_FRAMESET_MODE"):n===$1.BASE||n===$1.BASEFONT||n===$1.BGSOUND||n===$1.LINK||n===$1.META||n===$1.NOFRAMES||n===$1.SCRIPT||n===$1.STYLE||n===$1.TEMPLATE||n===$1.TITLE?(e._err(H1.abandonedHeadElementChild),e.openElements.push(e.headElement),f0(e,t),e.openElements.remove(e.headElement)):n===$1.HEAD?e._err(H1.misplacedStartTagForHeadElement):y0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.BODY||n===$1.HTML||n===$1.BR?y0(e,t):n===$1.TEMPLATE?m0(e,t):e._err(H1.endTagWithoutMatchingOpenElement)},[I1.EOF_TOKEN]:y0},IN_BODY_MODE:{[I1.CHARACTER_TOKEN]:E0,[I1.NULL_CHARACTER_TOKEN]:a0,[I1.WHITESPACE_CHARACTER_TOKEN]:x0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:M0,[I1.END_TAG_TOKEN]:P0,[I1.EOF_TOKEN]:R0},TEXT_MODE:{[I1.CHARACTER_TOKEN]:c0,[I1.NULL_CHARACTER_TOKEN]:c0,[I1.WHITESPACE_CHARACTER_TOKEN]:c0,[I1.COMMENT_TOKEN]:a0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:a0,[I1.END_TAG_TOKEN]:function(e,t){t.tagName===$1.SCRIPT&&(e.pendingScript=e.openElements.current);e.openElements.pop(),e.insertionMode=e.originalInsertionMode},[I1.EOF_TOKEN]:function(e,t){e._err(H1.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e._processToken(t)}},[W1]:{[I1.CHARACTER_TOKEN]:D0,[I1.NULL_CHARACTER_TOKEN]:D0,[I1.WHITESPACE_CHARACTER_TOKEN]:D0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:B0,[I1.END_TAG_TOKEN]:z0,[I1.EOF_TOKEN]:R0},IN_TABLE_TEXT_MODE:{[I1.CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0},[I1.NULL_CHARACTER_TOKEN]:a0,[I1.WHITESPACE_CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t)},[I1.COMMENT_TOKEN]:j0,[I1.DOCTYPE_TOKEN]:j0,[I1.START_TAG_TOKEN]:j0,[I1.END_TAG_TOKEN]:j0,[I1.EOF_TOKEN]:j0},IN_CAPTION_MODE:{[I1.CHARACTER_TOKEN]:E0,[I1.NULL_CHARACTER_TOKEN]:a0,[I1.WHITESPACE_CHARACTER_TOKEN]:x0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.CAPTION||n===$1.COL||n===$1.COLGROUP||n===$1.TBODY||n===$1.TD||n===$1.TFOOT||n===$1.TH||n===$1.THEAD||n===$1.TR?e.openElements.hasInTableScope($1.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($1.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=W1,e._processToken(t)):M0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.CAPTION||n===$1.TABLE?e.openElements.hasInTableScope($1.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($1.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=W1,n===$1.TABLE&&e._processToken(t)):n!==$1.BODY&&n!==$1.COL&&n!==$1.COLGROUP&&n!==$1.HTML&&n!==$1.TBODY&&n!==$1.TD&&n!==$1.TFOOT&&n!==$1.TH&&n!==$1.THEAD&&n!==$1.TR&&P0(e,t)},[I1.EOF_TOKEN]:R0},IN_COLUMN_GROUP_MODE:{[I1.CHARACTER_TOKEN]:G0,[I1.NULL_CHARACTER_TOKEN]:G0,[I1.WHITESPACE_CHARACTER_TOKEN]:c0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.HTML?M0(e,t):n===$1.COL?(e._appendElement(t,Y1.HTML),t.ackSelfClosing=!0):n===$1.TEMPLATE?f0(e,t):G0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.COLGROUP?e.openElements.currentTagName===$1.COLGROUP&&(e.openElements.pop(),e.insertionMode=W1):n===$1.TEMPLATE?m0(e,t):n!==$1.COL&&G0(e,t)},[I1.EOF_TOKEN]:R0},IN_TABLE_BODY_MODE:{[I1.CHARACTER_TOKEN]:D0,[I1.NULL_CHARACTER_TOKEN]:D0,[I1.WHITESPACE_CHARACTER_TOKEN]:D0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.TR?(e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Y1.HTML),e.insertionMode="IN_ROW_MODE"):n===$1.TH||n===$1.TD?(e.openElements.clearBackToTableBodyContext(),e._insertFakeElement($1.TR),e.insertionMode="IN_ROW_MODE",e._processToken(t)):n===$1.CAPTION||n===$1.COL||n===$1.COLGROUP||n===$1.TBODY||n===$1.TFOOT||n===$1.THEAD?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=W1,e._processToken(t)):B0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.TBODY||n===$1.TFOOT||n===$1.THEAD?e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=W1):n===$1.TABLE?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=W1,e._processToken(t)):(n!==$1.BODY&&n!==$1.CAPTION&&n!==$1.COL&&n!==$1.COLGROUP||n!==$1.HTML&&n!==$1.TD&&n!==$1.TH&&n!==$1.TR)&&z0(e,t)},[I1.EOF_TOKEN]:R0},IN_ROW_MODE:{[I1.CHARACTER_TOKEN]:D0,[I1.NULL_CHARACTER_TOKEN]:D0,[I1.WHITESPACE_CHARACTER_TOKEN]:D0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.TH||n===$1.TD?(e.openElements.clearBackToTableRowContext(),e._insertElement(t,Y1.HTML),e.insertionMode="IN_CELL_MODE",e.activeFormattingElements.insertMarker()):n===$1.CAPTION||n===$1.COL||n===$1.COLGROUP||n===$1.TBODY||n===$1.TFOOT||n===$1.THEAD||n===$1.TR?e.openElements.hasInTableScope($1.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):B0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.TR?e.openElements.hasInTableScope($1.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE"):n===$1.TABLE?e.openElements.hasInTableScope($1.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):n===$1.TBODY||n===$1.TFOOT||n===$1.THEAD?(e.openElements.hasInTableScope(n)||e.openElements.hasInTableScope($1.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)):(n!==$1.BODY&&n!==$1.CAPTION&&n!==$1.COL&&n!==$1.COLGROUP||n!==$1.HTML&&n!==$1.TD&&n!==$1.TH)&&z0(e,t)},[I1.EOF_TOKEN]:R0},IN_CELL_MODE:{[I1.CHARACTER_TOKEN]:E0,[I1.NULL_CHARACTER_TOKEN]:a0,[I1.WHITESPACE_CHARACTER_TOKEN]:x0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.CAPTION||n===$1.COL||n===$1.COLGROUP||n===$1.TBODY||n===$1.TD||n===$1.TFOOT||n===$1.TH||n===$1.THEAD||n===$1.TR?(e.openElements.hasInTableScope($1.TD)||e.openElements.hasInTableScope($1.TH))&&(e._closeTableCell(),e._processToken(t)):M0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.TD||n===$1.TH?e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode="IN_ROW_MODE"):n===$1.TABLE||n===$1.TBODY||n===$1.TFOOT||n===$1.THEAD||n===$1.TR?e.openElements.hasInTableScope(n)&&(e._closeTableCell(),e._processToken(t)):n!==$1.BODY&&n!==$1.CAPTION&&n!==$1.COL&&n!==$1.COLGROUP&&n!==$1.HTML&&P0(e,t)},[I1.EOF_TOKEN]:R0},IN_SELECT_MODE:{[I1.CHARACTER_TOKEN]:c0,[I1.NULL_CHARACTER_TOKEN]:a0,[I1.WHITESPACE_CHARACTER_TOKEN]:c0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:$0,[I1.END_TAG_TOKEN]:Y0,[I1.EOF_TOKEN]:R0},IN_SELECT_IN_TABLE_MODE:{[I1.CHARACTER_TOKEN]:c0,[I1.NULL_CHARACTER_TOKEN]:a0,[I1.WHITESPACE_CHARACTER_TOKEN]:c0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.CAPTION||n===$1.TABLE||n===$1.TBODY||n===$1.TFOOT||n===$1.THEAD||n===$1.TR||n===$1.TD||n===$1.TH?(e.openElements.popUntilTagNamePopped($1.SELECT),e._resetInsertionMode(),e._processToken(t)):$0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.CAPTION||n===$1.TABLE||n===$1.TBODY||n===$1.TFOOT||n===$1.THEAD||n===$1.TR||n===$1.TD||n===$1.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped($1.SELECT),e._resetInsertionMode(),e._processToken(t)):Y0(e,t)},[I1.EOF_TOKEN]:R0},IN_TEMPLATE_MODE:{[I1.CHARACTER_TOKEN]:E0,[I1.NULL_CHARACTER_TOKEN]:a0,[I1.WHITESPACE_CHARACTER_TOKEN]:x0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;if(n===$1.BASE||n===$1.BASEFONT||n===$1.BGSOUND||n===$1.LINK||n===$1.META||n===$1.NOFRAMES||n===$1.SCRIPT||n===$1.STYLE||n===$1.TEMPLATE||n===$1.TITLE)f0(e,t);else{const r=q1[n]||"IN_BODY_MODE";e._popTmplInsertionMode(),e._pushTmplInsertionMode(r),e.insertionMode=r,e._processToken(t)}},[I1.END_TAG_TOKEN]:function(e,t){t.tagName===$1.TEMPLATE&&m0(e,t)},[I1.EOF_TOKEN]:U0},AFTER_BODY_MODE:{[I1.CHARACTER_TOKEN]:V0,[I1.NULL_CHARACTER_TOKEN]:V0,[I1.WHITESPACE_CHARACTER_TOKEN]:x0,[I1.COMMENT_TOKEN]:function(e,t){e._appendCommentNode(t,e.openElements.items[0])},[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){t.tagName===$1.HTML?M0(e,t):V0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){t.tagName===$1.HTML?e.fragmentContext||(e.insertionMode="AFTER_AFTER_BODY_MODE"):V0(e,t)},[I1.EOF_TOKEN]:u0},IN_FRAMESET_MODE:{[I1.CHARACTER_TOKEN]:a0,[I1.NULL_CHARACTER_TOKEN]:a0,[I1.WHITESPACE_CHARACTER_TOKEN]:c0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.HTML?M0(e,t):n===$1.FRAMESET?e._insertElement(t,Y1.HTML):n===$1.FRAME?(e._appendElement(t,Y1.HTML),t.ackSelfClosing=!0):n===$1.NOFRAMES&&f0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){t.tagName!==$1.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagName===$1.FRAMESET||(e.insertionMode="AFTER_FRAMESET_MODE"))},[I1.EOF_TOKEN]:u0},AFTER_FRAMESET_MODE:{[I1.CHARACTER_TOKEN]:a0,[I1.NULL_CHARACTER_TOKEN]:a0,[I1.WHITESPACE_CHARACTER_TOKEN]:c0,[I1.COMMENT_TOKEN]:s0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.HTML?M0(e,t):n===$1.NOFRAMES&&f0(e,t)},[I1.END_TAG_TOKEN]:function(e,t){t.tagName===$1.HTML&&(e.insertionMode="AFTER_AFTER_FRAMESET_MODE")},[I1.EOF_TOKEN]:u0},AFTER_AFTER_BODY_MODE:{[I1.CHARACTER_TOKEN]:W0,[I1.NULL_CHARACTER_TOKEN]:W0,[I1.WHITESPACE_CHARACTER_TOKEN]:x0,[I1.COMMENT_TOKEN]:l0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){t.tagName===$1.HTML?M0(e,t):W0(e,t)},[I1.END_TAG_TOKEN]:W0,[I1.EOF_TOKEN]:u0},AFTER_AFTER_FRAMESET_MODE:{[I1.CHARACTER_TOKEN]:a0,[I1.NULL_CHARACTER_TOKEN]:a0,[I1.WHITESPACE_CHARACTER_TOKEN]:x0,[I1.COMMENT_TOKEN]:l0,[I1.DOCTYPE_TOKEN]:a0,[I1.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===$1.HTML?M0(e,t):n===$1.NOFRAMES&&f0(e,t)},[I1.END_TAG_TOKEN]:a0,[I1.EOF_TOKEN]:u0}};var Q1=class{constructor(e){this.options=D1(V1,e),this.treeAdapter=this.options.treeAdapter,this.pendingScript=null,this.options.sourceCodeLocationInfo&&P1.install(this,F1),this.options.onParseError&&P1.install(this,L1,{onParseError:this.options.onParseError})}parse(e){const t=this.treeAdapter.createDocument();return this._bootstrap(t,null),this.tokenizer.write(e,!0),this._runParsingLoop(null),t}parseFragment(e,t){t||(t=this.treeAdapter.createElement($1.TEMPLATE,Y1.HTML,[]));const n=this.treeAdapter.createElement("documentmock",Y1.HTML,[]);this._bootstrap(n,t),this.treeAdapter.getTagName(t)===$1.TEMPLATE&&this._pushTmplInsertionMode("IN_TEMPLATE_MODE"),this._initTokenizerForFragmentParsing(),this._insertFakeRootElement(),this._resetInsertionMode(),this._findFormInFragmentContext(),this.tokenizer.write(e,!0),this._runParsingLoop(null);const r=this.treeAdapter.getFirstChild(n),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(r,i),i}_bootstrap(e,t){this.tokenizer=new I1(this.options),this.stopped=!1,this.insertionMode="INITIAL_MODE",this.originalInsertionMode="",this.document=e,this.fragmentContext=t,this.headElement=null,this.formElement=null,this.openElements=new M1(this.document,this.treeAdapter),this.activeFormattingElements=new N1(this.treeAdapter),this.tmplInsertionModeStack=[],this.tmplInsertionModeStackTop=-1,this.currentTmplInsertionMode=null,this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1}_err(){}_runParsingLoop(e){for(;!this.stopped;){this._setupTokenizerCDATAMode();const t=this.tokenizer.getNextToken();if(t.type===I1.HIBERNATION_TOKEN)break;if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.type===I1.WHITESPACE_CHARACTER_TOKEN&&"\n"===t.chars[0])){if(1===t.chars.length)continue;t.chars=t.chars.substr(1)}if(this._processInputToken(t),e&&this.pendingScript)break}}runParsingLoopForCurrentChunk(e,t){if(this._runParsingLoop(t),t&&this.pendingScript){const e=this.pendingScript;return this.pendingScript=null,void t(e)}e&&e()}_setupTokenizerCDATAMode(){const e=this._getAdjustedCurrentElement();this.tokenizer.allowCDATA=e&&e!==this.document&&this.treeAdapter.getNamespaceURI(e)!==Y1.HTML&&!this._isIntegrationPoint(e)}_switchToTextParsing(e,t){this._insertElement(e,Y1.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode="TEXT_MODE"}switchToPlaintextParsing(){this.insertionMode="TEXT_MODE",this.originalInsertionMode="IN_BODY_MODE",this.tokenizer.state=I1.MODE.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;do{if(this.treeAdapter.getTagName(e)===$1.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}while(e)}_initTokenizerForFragmentParsing(){if(this.treeAdapter.getNamespaceURI(this.fragmentContext)===Y1.HTML){const e=this.treeAdapter.getTagName(this.fragmentContext);e===$1.TITLE||e===$1.TEXTAREA?this.tokenizer.state=I1.MODE.RCDATA:e===$1.STYLE||e===$1.XMP||e===$1.IFRAME||e===$1.NOEMBED||e===$1.NOFRAMES||e===$1.NOSCRIPT?this.tokenizer.state=I1.MODE.RAWTEXT:e===$1.SCRIPT?this.tokenizer.state=I1.MODE.SCRIPT_DATA:e===$1.PLAINTEXT&&(this.tokenizer.state=I1.MODE.PLAINTEXT)}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",r=e.systemId||"";this.treeAdapter.setDocumentType(this.document,t,n,r)}_attachElementToTree(e){if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n),this.openElements.push(n)}_insertFakeElement(e){const t=this.treeAdapter.createElement(e,Y1.HTML,[]);this._attachElementToTree(t),this.openElements.push(t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,Y1.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t),this.openElements.push(t)}_insertFakeRootElement(){const e=this.treeAdapter.createElement($1.HTML,Y1.HTML,[]);this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n)}_insertCharacters(e){if(this._shouldFosterParentOnInsertion())this._fosterParentText(e.chars);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.insertText(t,e.chars)}}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_shouldProcessTokenInForeignContent(e){const t=this._getAdjustedCurrentElement();if(!t||t===this.document)return!1;const n=this.treeAdapter.getNamespaceURI(t);if(n===Y1.HTML)return!1;if(this.treeAdapter.getTagName(t)===$1.ANNOTATION_XML&&n===Y1.MATHML&&e.type===I1.START_TAG_TOKEN&&e.tagName===$1.SVG)return!1;const r=e.type===I1.CHARACTER_TOKEN||e.type===I1.NULL_CHARACTER_TOKEN||e.type===I1.WHITESPACE_CHARACTER_TOKEN;return(!(e.type===I1.START_TAG_TOKEN&&e.tagName!==$1.MGLYPH&&e.tagName!==$1.MALIGNMARK)&&!r||!this._isIntegrationPoint(t,Y1.MATHML))&&((e.type!==I1.START_TAG_TOKEN&&!r||!this._isIntegrationPoint(t,Y1.HTML))&&e.type!==I1.EOF_TOKEN)}_processToken(e){K1[this.insertionMode][e.type](this,e)}_processTokenInBodyMode(e){K1.IN_BODY_MODE[e.type](this,e)}_processTokenInForeignContent(e){e.type===I1.CHARACTER_TOKEN?function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e):e.type===I1.NULL_CHARACTER_TOKEN?function(e,t){t.chars=j1.REPLACEMENT_CHARACTER,e._insertCharacters(t)}(this,e):e.type===I1.WHITESPACE_CHARACTER_TOKEN?c0(this,e):e.type===I1.COMMENT_TOKEN?s0(this,e):e.type===I1.START_TAG_TOKEN?function(e,t){if(z1.causesExit(t)&&!e.fragmentContext){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Y1.HTML&&!e._isIntegrationPoint(e.openElements.current);)e.openElements.pop();e._processToken(t)}else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Y1.MATHML?z1.adjustTokenMathMLAttrs(t):r===Y1.SVG&&(z1.adjustTokenSVGTagName(t),z1.adjustTokenSVGAttrs(t)),z1.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):e.type===I1.END_TAG_TOKEN&&function(e,t){for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Y1.HTML){e._processToken(t);break}if(e.treeAdapter.getTagName(r).toLowerCase()===t.tagName){e.openElements.popUntilElementPopped(r);break}}}(this,e)}_processInputToken(e){this._shouldProcessTokenInForeignContent(e)?this._processTokenInForeignContent(e):this._processToken(e),e.type===I1.START_TAG_TOKEN&&e.selfClosing&&!e.ackSelfClosing&&this._err(H1.nonVoidHtmlElementStartTagWithTrailingSolidus)}_isIntegrationPoint(e,t){const n=this.treeAdapter.getTagName(e),r=this.treeAdapter.getNamespaceURI(e),i=this.treeAdapter.getAttrList(e);return z1.isIntegrationPoint(n,r,i,t)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.length;if(e){let t=e,n=null;do{if(t--,n=this.activeFormattingElements.entries[t],n.type===N1.MARKER_ENTRY||this.openElements.contains(n.element)){t++;break}}while(t>0);for(let r=t;r<e;r++)n=this.activeFormattingElements.entries[r],this._insertElement(n.token,this.treeAdapter.getNamespaceURI(n.element)),n.element=this.openElements.current}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode="IN_ROW_MODE"}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion($1.P),this.openElements.popUntilTagNamePopped($1.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop,t=!1;e>=0;e--){let n=this.openElements.items[e];0===e&&(t=!0,this.fragmentContext&&(n=this.fragmentContext));const r=this.treeAdapter.getTagName(n),i=X1[r];if(i){this.insertionMode=i;break}if(!(t||r!==$1.TD&&r!==$1.TH)){this.insertionMode="IN_CELL_MODE";break}if(!t&&r===$1.HEAD){this.insertionMode="IN_HEAD_MODE";break}if(r===$1.SELECT){this._resetInsertionModeForSelect(e);break}if(r===$1.TEMPLATE){this.insertionMode=this.currentTmplInsertionMode;break}if(r===$1.HTML){this.insertionMode=this.headElement?"AFTER_HEAD_MODE":"BEFORE_HEAD_MODE";break}if(t){this.insertionMode="IN_BODY_MODE";break}}}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.items[t],n=this.treeAdapter.getTagName(e);if(n===$1.TEMPLATE)break;if(n===$1.TABLE)return void(this.insertionMode="IN_SELECT_IN_TABLE_MODE")}this.insertionMode="IN_SELECT_MODE"}_pushTmplInsertionMode(e){this.tmplInsertionModeStack.push(e),this.tmplInsertionModeStackTop++,this.currentTmplInsertionMode=e}_popTmplInsertionMode(){this.tmplInsertionModeStack.pop(),this.tmplInsertionModeStackTop--,this.currentTmplInsertionMode=this.tmplInsertionModeStack[this.tmplInsertionModeStackTop]}_isElementCausesFosterParenting(e){const t=this.treeAdapter.getTagName(e);return t===$1.TABLE||t===$1.TBODY||t===$1.TFOOT||t===$1.THEAD||t===$1.TR}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.current)}_findFosterParentingLocation(){const e={parent:null,beforeElement:null};for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t],r=this.treeAdapter.getTagName(n),i=this.treeAdapter.getNamespaceURI(n);if(r===$1.TEMPLATE&&i===Y1.HTML){e.parent=this.treeAdapter.getTemplateContent(n);break}if(r===$1.TABLE){e.parent=this.treeAdapter.getParentNode(n),e.parent?e.beforeElement=n:e.parent=this.openElements.items[t-1];break}}return e.parent||(e.parent=this.openElements.items[0]),e}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_fosterParentText(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertTextBefore(t.parent,e,t.beforeElement):this.treeAdapter.insertText(t.parent,e)}_isSpecialElement(e){const t=this.treeAdapter.getTagName(e),n=this.treeAdapter.getNamespaceURI(e);return G1.SPECIAL_ELEMENTS[n][t]}};function Z1(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagName)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):L0(e,t),n}function J1(e,t){let n=null;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i)&&(n=i)}return n||(e.openElements.popUntilElementPopped(t.element),e.activeFormattingElements.removeEntry(t)),n}function e0(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let a=0,o=i;o!==n;a++,o=i){i=e.openElements.getCommonAncestor(o);const n=e.activeFormattingElements.getElementEntry(o),s=n&&a>=3;!n||s?(s&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(o)):(o=t0(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function t0(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function n0(e,t,n){if(e._isElementCausesFosterParenting(t))e._fosterParentElement(n);else{const r=e.treeAdapter.getTagName(t),i=e.treeAdapter.getNamespaceURI(t);r===$1.TEMPLATE&&i===Y1.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function r0(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),i=n.token,a=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,n.token),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,a)}function i0(e,t){let n;for(let r=0;r<8&&(n=Z1(e,t),n);r++){const t=J1(e,n);if(!t)break;e.activeFormattingElements.bookmark=n;const r=e0(e,t,n.element),i=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(r),n0(e,i,r),r0(e,t,n)}}function a0(){}function o0(e){e._err(H1.misplacedDoctype)}function s0(e,t){e._appendCommentNode(t,e.openElements.currentTmplContent||e.openElements.current)}function l0(e,t){e._appendCommentNode(t,e.document)}function c0(e,t){e._insertCharacters(t)}function u0(e){e.stopped=!0}function h0(e,t){e._err(H1.missingDoctype,{beforeToken:!0}),e.treeAdapter.setDocumentMode(e.document,G1.DOCUMENT_MODE.QUIRKS),e.insertionMode="BEFORE_HTML_MODE",e._processToken(t)}function p0(e,t){e._insertFakeRootElement(),e.insertionMode="BEFORE_HEAD_MODE",e._processToken(t)}function d0(e,t){e._insertFakeElement($1.HEAD),e.headElement=e.openElements.current,e.insertionMode="IN_HEAD_MODE",e._processToken(t)}function f0(e,t){const n=t.tagName;n===$1.HTML?M0(e,t):n===$1.BASE||n===$1.BASEFONT||n===$1.BGSOUND||n===$1.LINK||n===$1.META?(e._appendElement(t,Y1.HTML),t.ackSelfClosing=!0):n===$1.TITLE?e._switchToTextParsing(t,I1.MODE.RCDATA):n===$1.NOSCRIPT?e.options.scriptingEnabled?e._switchToTextParsing(t,I1.MODE.RAWTEXT):(e._insertElement(t,Y1.HTML),e.insertionMode="IN_HEAD_NO_SCRIPT_MODE"):n===$1.NOFRAMES||n===$1.STYLE?e._switchToTextParsing(t,I1.MODE.RAWTEXT):n===$1.SCRIPT?e._switchToTextParsing(t,I1.MODE.SCRIPT_DATA):n===$1.TEMPLATE?(e._insertTemplate(t,Y1.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode="IN_TEMPLATE_MODE",e._pushTmplInsertionMode("IN_TEMPLATE_MODE")):n===$1.HEAD?e._err(H1.misplacedStartTagForHeadElement):g0(e,t)}function m0(e,t){const n=t.tagName;n===$1.HEAD?(e.openElements.pop(),e.insertionMode="AFTER_HEAD_MODE"):n===$1.BODY||n===$1.BR||n===$1.HTML?g0(e,t):n===$1.TEMPLATE&&e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagName!==$1.TEMPLATE&&e._err(H1.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped($1.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode()):e._err(H1.endTagWithoutMatchingOpenElement)}function g0(e,t){e.openElements.pop(),e.insertionMode="AFTER_HEAD_MODE",e._processToken(t)}function v0(e,t){const n=t.type===I1.EOF_TOKEN?H1.openElementsLeftAfterEof:H1.disallowedContentInNoscriptInHead;e._err(n),e.openElements.pop(),e.insertionMode="IN_HEAD_MODE",e._processToken(t)}function y0(e,t){e._insertFakeElement($1.BODY),e.insertionMode="IN_BODY_MODE",e._processToken(t)}function x0(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function E0(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function b0(e,t){e.openElements.hasInButtonScope($1.P)&&e._closePElement(),e._insertElement(t,Y1.HTML)}function C0(e,t){e.openElements.hasInButtonScope($1.P)&&e._closePElement(),e._insertElement(t,Y1.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function w0(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Y1.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function T0(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Y1.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function S0(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Y1.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function k0(e,t){e._appendElement(t,Y1.HTML),t.ackSelfClosing=!0}function _0(e,t){e._switchToTextParsing(t,I1.MODE.RAWTEXT)}function A0(e,t){e.openElements.currentTagName===$1.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Y1.HTML)}function O0(e,t){e.openElements.hasInScope($1.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Y1.HTML)}function I0(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Y1.HTML)}function M0(e,t){const n=t.tagName;switch(n.length){case 1:n===$1.I||n===$1.S||n===$1.B||n===$1.U?w0(e,t):n===$1.P?b0(e,t):n===$1.A?function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName($1.A);n&&(i0(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Y1.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):I0(e,t);break;case 2:n===$1.DL||n===$1.OL||n===$1.UL?b0(e,t):n===$1.H1||n===$1.H2||n===$1.H3||n===$1.H4||n===$1.H5||n===$1.H6?function(e,t){e.openElements.hasInButtonScope($1.P)&&e._closePElement();const n=e.openElements.currentTagName;n!==$1.H1&&n!==$1.H2&&n!==$1.H3&&n!==$1.H4&&n!==$1.H5&&n!==$1.H6||e.openElements.pop(),e._insertElement(t,Y1.HTML)}(e,t):n===$1.LI||n===$1.DD||n===$1.DT?function(e,t){e.framesetOk=!1;const n=t.tagName;for(let r=e.openElements.stackTop;r>=0;r--){const t=e.openElements.items[r],i=e.treeAdapter.getTagName(t);let a=null;if(n===$1.LI&&i===$1.LI?a=$1.LI:n!==$1.DD&&n!==$1.DT||i!==$1.DD&&i!==$1.DT||(a=i),a){e.openElements.generateImpliedEndTagsWithExclusion(a),e.openElements.popUntilTagNamePopped(a);break}if(i!==$1.ADDRESS&&i!==$1.DIV&&i!==$1.P&&e._isSpecialElement(t))break}e.openElements.hasInButtonScope($1.P)&&e._closePElement(),e._insertElement(t,Y1.HTML)}(e,t):n===$1.EM||n===$1.TT?w0(e,t):n===$1.BR?S0(e,t):n===$1.HR?function(e,t){e.openElements.hasInButtonScope($1.P)&&e._closePElement(),e._appendElement(t,Y1.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t):n===$1.RB?O0(e,t):n===$1.RT||n===$1.RP?function(e,t){e.openElements.hasInScope($1.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion($1.RTC),e._insertElement(t,Y1.HTML)}(e,t):n!==$1.TH&&n!==$1.TD&&n!==$1.TR&&I0(e,t);break;case 3:n===$1.DIV||n===$1.DIR||n===$1.NAV?b0(e,t):n===$1.PRE?C0(e,t):n===$1.BIG?w0(e,t):n===$1.IMG||n===$1.WBR?S0(e,t):n===$1.XMP?function(e,t){e.openElements.hasInButtonScope($1.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,I1.MODE.RAWTEXT)}(e,t):n===$1.SVG?function(e,t){e._reconstructActiveFormattingElements(),z1.adjustTokenSVGAttrs(t),z1.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,Y1.SVG):e._insertElement(t,Y1.SVG),t.ackSelfClosing=!0}(e,t):n===$1.RTC?O0(e,t):n!==$1.COL&&I0(e,t);break;case 4:n===$1.HTML?function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t):n===$1.BASE||n===$1.LINK||n===$1.META?f0(e,t):n===$1.BODY?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t):n===$1.MAIN||n===$1.MENU?b0(e,t):n===$1.FORM?function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope($1.P)&&e._closePElement(),e._insertElement(t,Y1.HTML),n||(e.formElement=e.openElements.current))}(e,t):n===$1.CODE||n===$1.FONT?w0(e,t):n===$1.NOBR?function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope($1.NOBR)&&(i0(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Y1.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):n===$1.AREA?S0(e,t):n===$1.MATH?function(e,t){e._reconstructActiveFormattingElements(),z1.adjustTokenMathMLAttrs(t),z1.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,Y1.MATHML):e._insertElement(t,Y1.MATHML),t.ackSelfClosing=!0}(e,t):n===$1.MENU?function(e,t){e.openElements.hasInButtonScope($1.P)&&e._closePElement(),e._insertElement(t,Y1.HTML)}(e,t):n!==$1.HEAD&&I0(e,t);break;case 5:n===$1.STYLE||n===$1.TITLE?f0(e,t):n===$1.ASIDE?b0(e,t):n===$1.SMALL?w0(e,t):n===$1.TABLE?function(e,t){e.treeAdapter.getDocumentMode(e.document)!==G1.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope($1.P)&&e._closePElement(),e._insertElement(t,Y1.HTML),e.framesetOk=!1,e.insertionMode=W1}(e,t):n===$1.EMBED?S0(e,t):n===$1.INPUT?function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Y1.HTML);const n=I1.getTokenAttr(t,U1.TYPE);n&&"hidden"===n.toLowerCase()||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t):n===$1.PARAM||n===$1.TRACK?k0(e,t):n===$1.IMAGE?function(e,t){t.tagName=$1.IMG,S0(e,t)}(e,t):n!==$1.FRAME&&n!==$1.TBODY&&n!==$1.TFOOT&&n!==$1.THEAD&&I0(e,t);break;case 6:n===$1.SCRIPT?f0(e,t):n===$1.CENTER||n===$1.FIGURE||n===$1.FOOTER||n===$1.HEADER||n===$1.HGROUP||n===$1.DIALOG?b0(e,t):n===$1.BUTTON?function(e,t){e.openElements.hasInScope($1.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($1.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Y1.HTML),e.framesetOk=!1}(e,t):n===$1.STRIKE||n===$1.STRONG?w0(e,t):n===$1.APPLET||n===$1.OBJECT?T0(e,t):n===$1.KEYGEN?S0(e,t):n===$1.SOURCE?k0(e,t):n===$1.IFRAME?function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,I1.MODE.RAWTEXT)}(e,t):n===$1.SELECT?function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Y1.HTML),e.framesetOk=!1,e.insertionMode===W1||"IN_CAPTION_MODE"===e.insertionMode||"IN_TABLE_BODY_MODE"===e.insertionMode||"IN_ROW_MODE"===e.insertionMode||"IN_CELL_MODE"===e.insertionMode?e.insertionMode="IN_SELECT_IN_TABLE_MODE":e.insertionMode="IN_SELECT_MODE"}(e,t):n===$1.OPTION?A0(e,t):I0(e,t);break;case 7:n===$1.BGSOUND?f0(e,t):n===$1.DETAILS||n===$1.ADDRESS||n===$1.ARTICLE||n===$1.SECTION||n===$1.SUMMARY?b0(e,t):n===$1.LISTING?C0(e,t):n===$1.MARQUEE?T0(e,t):n===$1.NOEMBED?_0(e,t):n!==$1.CAPTION&&I0(e,t);break;case 8:n===$1.BASEFONT?f0(e,t):n===$1.FRAMESET?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Y1.HTML),e.insertionMode="IN_FRAMESET_MODE")}(e,t):n===$1.FIELDSET?b0(e,t):n===$1.TEXTAREA?function(e,t){e._insertElement(t,Y1.HTML),e.skipNextNewLine=!0,e.tokenizer.state=I1.MODE.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode="TEXT_MODE"}(e,t):n===$1.TEMPLATE?f0(e,t):n===$1.NOSCRIPT?e.options.scriptingEnabled?_0(e,t):I0(e,t):n===$1.OPTGROUP?A0(e,t):n!==$1.COLGROUP&&I0(e,t);break;case 9:n===$1.PLAINTEXT?function(e,t){e.openElements.hasInButtonScope($1.P)&&e._closePElement(),e._insertElement(t,Y1.HTML),e.tokenizer.state=I1.MODE.PLAINTEXT}(e,t):I0(e,t);break;case 10:n===$1.BLOCKQUOTE||n===$1.FIGCAPTION?b0(e,t):I0(e,t);break;default:I0(e,t)}}function N0(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function F0(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function L0(e,t){const n=t.tagName;for(let r=e.openElements.stackTop;r>0;r--){const t=e.openElements.items[r];if(e.treeAdapter.getTagName(t)===n){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilElementPopped(t);break}if(e._isSpecialElement(t))break}}function P0(e,t){const n=t.tagName;switch(n.length){case 1:n===$1.A||n===$1.B||n===$1.I||n===$1.S||n===$1.U?i0(e,t):n===$1.P?function(e){e.openElements.hasInButtonScope($1.P)||e._insertFakeElement($1.P),e._closePElement()}(e):L0(e,t);break;case 2:n===$1.DL||n===$1.UL||n===$1.OL?N0(e,t):n===$1.LI?function(e){e.openElements.hasInListItemScope($1.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion($1.LI),e.openElements.popUntilTagNamePopped($1.LI))}(e):n===$1.DD||n===$1.DT?function(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t):n===$1.H1||n===$1.H2||n===$1.H3||n===$1.H4||n===$1.H5||n===$1.H6?function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e):n===$1.BR?function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement($1.BR),e.openElements.pop(),e.framesetOk=!1}(e):n===$1.EM||n===$1.TT?i0(e,t):L0(e,t);break;case 3:n===$1.BIG?i0(e,t):n===$1.DIR||n===$1.DIV||n===$1.NAV||n===$1.PRE?N0(e,t):L0(e,t);break;case 4:n===$1.BODY?function(e){e.openElements.hasInScope($1.BODY)&&(e.insertionMode="AFTER_BODY_MODE")}(e):n===$1.HTML?function(e,t){e.openElements.hasInScope($1.BODY)&&(e.insertionMode="AFTER_BODY_MODE",e._processToken(t))}(e,t):n===$1.FORM?function(e){const t=e.openElements.tmplCount>0,n=e.formElement;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope($1.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped($1.FORM):e.openElements.remove(n))}(e):n===$1.CODE||n===$1.FONT||n===$1.NOBR?i0(e,t):n===$1.MAIN||n===$1.MENU?N0(e,t):L0(e,t);break;case 5:n===$1.ASIDE?N0(e,t):n===$1.SMALL?i0(e,t):L0(e,t);break;case 6:n===$1.CENTER||n===$1.FIGURE||n===$1.FOOTER||n===$1.HEADER||n===$1.HGROUP||n===$1.DIALOG?N0(e,t):n===$1.APPLET||n===$1.OBJECT?F0(e,t):n===$1.STRIKE||n===$1.STRONG?i0(e,t):L0(e,t);break;case 7:n===$1.ADDRESS||n===$1.ARTICLE||n===$1.DETAILS||n===$1.SECTION||n===$1.SUMMARY||n===$1.LISTING?N0(e,t):n===$1.MARQUEE?F0(e,t):L0(e,t);break;case 8:n===$1.FIELDSET?N0(e,t):n===$1.TEMPLATE?m0(e,t):L0(e,t);break;case 10:n===$1.BLOCKQUOTE||n===$1.FIGCAPTION?N0(e,t):L0(e,t);break;default:L0(e,t)}}function R0(e,t){e.tmplInsertionModeStackTop>-1?U0(e,t):e.stopped=!0}function D0(e,t){const n=e.openElements.currentTagName;n===$1.TABLE||n===$1.TBODY||n===$1.TFOOT||n===$1.THEAD||n===$1.TR?(e.pendingCharacterTokens=[],e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode="IN_TABLE_TEXT_MODE",e._processToken(t)):H0(e,t)}function B0(e,t){const n=t.tagName;switch(n.length){case 2:n===$1.TD||n===$1.TH||n===$1.TR?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement($1.TBODY),e.insertionMode="IN_TABLE_BODY_MODE",e._processToken(t)}(e,t):H0(e,t);break;case 3:n===$1.COL?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement($1.COLGROUP),e.insertionMode="IN_COLUMN_GROUP_MODE",e._processToken(t)}(e,t):H0(e,t);break;case 4:n===$1.FORM?function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,Y1.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t):H0(e,t);break;case 5:n===$1.TABLE?function(e,t){e.openElements.hasInTableScope($1.TABLE)&&(e.openElements.popUntilTagNamePopped($1.TABLE),e._resetInsertionMode(),e._processToken(t))}(e,t):n===$1.STYLE?f0(e,t):n===$1.TBODY||n===$1.TFOOT||n===$1.THEAD?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Y1.HTML),e.insertionMode="IN_TABLE_BODY_MODE"}(e,t):n===$1.INPUT?function(e,t){const n=I1.getTokenAttr(t,U1.TYPE);n&&"hidden"===n.toLowerCase()?e._appendElement(t,Y1.HTML):H0(e,t),t.ackSelfClosing=!0}(e,t):H0(e,t);break;case 6:n===$1.SCRIPT?f0(e,t):H0(e,t);break;case 7:n===$1.CAPTION?function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Y1.HTML),e.insertionMode="IN_CAPTION_MODE"}(e,t):H0(e,t);break;case 8:n===$1.COLGROUP?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Y1.HTML),e.insertionMode="IN_COLUMN_GROUP_MODE"}(e,t):n===$1.TEMPLATE?f0(e,t):H0(e,t);break;default:H0(e,t)}}function z0(e,t){const n=t.tagName;n===$1.TABLE?e.openElements.hasInTableScope($1.TABLE)&&(e.openElements.popUntilTagNamePopped($1.TABLE),e._resetInsertionMode()):n===$1.TEMPLATE?m0(e,t):n!==$1.BODY&&n!==$1.CAPTION&&n!==$1.COL&&n!==$1.COLGROUP&&n!==$1.HTML&&n!==$1.TBODY&&n!==$1.TD&&n!==$1.TFOOT&&n!==$1.TH&&n!==$1.THEAD&&n!==$1.TR&&H0(e,t)}function H0(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,e._processTokenInBodyMode(t),e.fosterParentingEnabled=n}function j0(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)H0(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}function G0(e,t){e.openElements.currentTagName===$1.COLGROUP&&(e.openElements.pop(),e.insertionMode=W1,e._processToken(t))}function $0(e,t){const n=t.tagName;n===$1.HTML?M0(e,t):n===$1.OPTION?(e.openElements.currentTagName===$1.OPTION&&e.openElements.pop(),e._insertElement(t,Y1.HTML)):n===$1.OPTGROUP?(e.openElements.currentTagName===$1.OPTION&&e.openElements.pop(),e.openElements.currentTagName===$1.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Y1.HTML)):n===$1.INPUT||n===$1.KEYGEN||n===$1.TEXTAREA||n===$1.SELECT?e.openElements.hasInSelectScope($1.SELECT)&&(e.openElements.popUntilTagNamePopped($1.SELECT),e._resetInsertionMode(),n!==$1.SELECT&&e._processToken(t)):n!==$1.SCRIPT&&n!==$1.TEMPLATE||f0(e,t)}function Y0(e,t){const n=t.tagName;if(n===$1.OPTGROUP){const t=e.openElements.items[e.openElements.stackTop-1],n=t&&e.treeAdapter.getTagName(t);e.openElements.currentTagName===$1.OPTION&&n===$1.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagName===$1.OPTGROUP&&e.openElements.pop()}else n===$1.OPTION?e.openElements.currentTagName===$1.OPTION&&e.openElements.pop():n===$1.SELECT&&e.openElements.hasInSelectScope($1.SELECT)?(e.openElements.popUntilTagNamePopped($1.SELECT),e._resetInsertionMode()):n===$1.TEMPLATE&&m0(e,t)}function U0(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped($1.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode(),e._processToken(t)):e.stopped=!0}function V0(e,t){e.insertionMode="IN_BODY_MODE",e._processToken(t)}function W0(e,t){e.insertionMode="IN_BODY_MODE",e._processToken(t)}var X0=/[#.]/g;const q0=new Set(["menu","submit","reset","button"]),K0={}.hasOwnProperty;function Q0(e,t,n){const r=n&&function(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}(n);return function(n,i,...a){let o,s=-1;if(null==n)o={type:"root",children:[]},a.unshift(i);else if(o=function(e,t="div"){for(var n,r,i,a=e||"",o={},s=0;s<a.length;)X0.lastIndex=s,i=X0.exec(a),(n=a.slice(s,i?i.index:a.length))&&(r?"#"===r?o.id=n:Array.isArray(o.className)?o.className.push(n):o.className=[n]:t=n,s+=n.length),i&&(r=i[0],s++);return{type:"element",tagName:t,properties:o,children:[]}}(n,t),o.tagName=o.tagName.toLowerCase(),r&&K0.call(r,o.tagName)&&(o.tagName=r[o.tagName]),function(e,t){if(null==e||"object"!=typeof e||Array.isArray(e))return!1;if("input"===t||!e.type||"string"!=typeof e.type)return!0;if("children"in e&&Array.isArray(e.children))return!1;if("button"===t)return q0.has(e.type.toLowerCase());return!("value"in e)}(i,o.tagName)){let t;for(t in i)K0.call(i,t)&&Z0(e,o.properties,t,i[t])}else a.unshift(i);for(;++s<a.length;)J0(o.children,a[s]);return"element"===o.type&&"template"===o.tagName&&(o.content={type:"root",children:o.children},o.children=[]),o}}function Z0(e,t,n,r){const i=kX(e,n);let a,o=-1;if(null!=r){if("number"==typeof r){if(Number.isNaN(r))return;a=r}else a="boolean"==typeof r?r:"string"==typeof r?i.spaceSeparated?pq(r):i.commaSeparated?fq(r):i.commaOrSpaceSeparated?pq(fq(r).join(" ")):e5(i,i.property,r):Array.isArray(r)?r.concat():"style"===i.property?function(e){const t=[];let n;for(n in e)K0.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}(r):String(r);if(Array.isArray(a)){const e=[];for(;++o<a.length;)e[o]=e5(i,i.property,a[o]);a=e}"className"===i.property&&Array.isArray(t.className)&&(a=t.className.concat(a)),t[i.property]=a}}function J0(e,t){let n=-1;if(null==t);else if("string"==typeof t||"number"==typeof t)e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)J0(e,t[n]);else{if("object"!=typeof t||!("type"in t))throw new Error("Expected node, nodes, or string, got `"+t+"`");"root"===t.type?J0(e,t.children):e.push(t)}}function e5(e,t,n){if("string"==typeof n){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(""===n||ZW(n)===ZW(t)))return!0}return n}const t5=Q0(IX,"div"),n5=Q0(MX,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]);const r5={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},i5={}.hasOwnProperty,a5={"#document":s5,"#document-fragment":s5,"#text":function(e,t){return{type:"text",value:t.value}},"#comment":function(e,t){return{type:"comment",value:t.data}},"#documentType":function(){return{type:"doctype"}}};function o5(e,t){const n=e.schema,r=i5.call(a5,t.nodeName)?a5[t.nodeName]:l5;let i;"tagName"in t&&(e.schema=t.namespaceURI===r5.svg?MX:IX),"childNodes"in t&&(i=function(e,t){let n=-1;const r=[];for(;++n<t.length;)r[n]=o5(e,t[n]);return r}(e,t.childNodes));const a=r(e,t,i);if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const n=function(e,t,n){const r=c5(n);if("element"===t.type){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const r={};let i;for(i in n.attrs)i5.call(n.attrs,i)&&(r[kX(e.schema,i).property]=c5(n.attrs[i]));t.data={position:{opening:c5(n.startTag),closing:n.endTag?c5(n.endTag):null,properties:r}}}}return r}(e,a,t.sourceCodeLocation);n&&(e.location=!0,a.position=n)}return e.schema=n,a}function s5(e,t,n){const r={type:"root",children:n,data:{quirksMode:"quirks"===t.mode||"limited-quirks"===t.mode}};if(e.file&&e.location){const t=String(e.file),n=function(e){for(var t=String(e),n=[],r=/\r?\n|\r/g;r.test(t);)n.push(r.lastIndex);return n.push(t.length+1),{toPoint:function(e){var t=-1;if(e>-1&&e<n[n.length-1])for(;++t<n.length;)if(n[t]>e)return{line:t+1,column:e-(n[t-1]||0)+1,offset:e};return{line:void 0,column:void 0,offset:void 0}},toOffset:function(e){var t,r=e&&e.line,i=e&&e.column;return"number"!=typeof r||"number"!=typeof i||Number.isNaN(r)||Number.isNaN(i)||!(r-1 in n)||(t=(n[r-2]||0)+i-1||0),t>-1&&t<n[n.length-1]?t:-1}}}(t);r.position={start:n.toPoint(0),end:n.toPoint(t.length)}}return r}function l5(e,t,n){const r="svg"===e.schema.space?n5:t5;let i=-1;const a={};for(;++i<t.attrs.length;){const e=t.attrs[i];a[(e.prefix?e.prefix+":":"")+e.name]=e.value}const o=r(t.tagName,a,n);if("template"===o.tagName&&"content"in t){const n=t.sourceCodeLocation,r=n&&n.startTag&&c5(n.startTag),i=n&&n.endTag&&c5(n.endTag),a=o5(e,t.content);r&&i&&e.file&&(a.position={start:r.end,end:i.start}),o.content=a}return o}function c5(e){const t=u5({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=u5({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:null}function u5(e){return e.line&&e.column?e:null}const h5=r5,p5=OX,d5={}.hasOwnProperty,f5=TW("root"),m5=TW("element"),g5=TW("text");function v5(e,t,n){if("function"!=typeof e)throw new TypeError("h is not a function");const r=function(e){const t=e("div",{});return Boolean(t&&("_owner"in t||"_store"in t)&&(void 0===t.key||null===t.key))}(e),i=function(e){const t=e("div",{});return Boolean(t&&t.context&&t.context._isVue)}(e),a=function(e){return"VirtualNode"===e("div",{}).type}(e);let o,s;if("string"==typeof n||"boolean"==typeof n?(o=n,n={}):(n||(n={}),o=n.prefix),f5(t))s=1===t.children.length&&m5(t.children[0])?t.children[0]:{type:"element",tagName:"div",properties:{},children:t.children};else{if(!m5(t))throw new Error("Expected root or element, not `"+(t&&t.type||t)+"`");s=t}return y5(e,s,{schema:"svg"===n.space?MX:IX,prefix:null==o?r||i||a?"h-":null:"string"==typeof o?o:o?"h-":null,key:0,react:r,vue:i,vdom:a,hyperscript:E5(e)})}function y5(e,t,n){const r=n.schema;let i=r,a=t.tagName;const o={},s=[];let l,c=-1;for(l in"html"===r.space&&"svg"===a.toLowerCase()&&(i=MX,n.schema=i),t.properties)t.properties&&d5.call(t.properties,l)&&x5(o,l,t.properties[l],n,a);if(n.vdom&&("html"===i.space?a=a.toUpperCase():i.space&&(o.namespace=h5[i.space])),n.prefix&&(n.key++,o.key=n.prefix+n.key),t.children)for(;++c<t.children.length;){const r=t.children[c];m5(r)?s.push(y5(e,r,n)):g5(r)&&s.push(r.value)}return n.schema=r,s.length>0?e.call(t,a,o,s):e.call(t,a,o)}function x5(e,t,n,r,i){const a=kX(r.schema,t);let o;null==n||"number"==typeof n&&Number.isNaN(n)||!1===n&&(r.vue||r.vdom||r.hyperscript)||!n&&a.boolean&&(r.vue||r.vdom||r.hyperscript)||(Array.isArray(n)&&(n=a.commaSeparated?mq(n):dq(n)),a.boolean&&r.hyperscript&&(n=""),"style"===a.property&&"string"==typeof n&&(r.react||r.vue||r.vdom)&&(n=function(e,t){const n={};try{kq(e,((e,t)=>{"-ms-"===e.slice(0,4)&&(e="ms-"+e.slice(4)),n[e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))]=t}))}catch(r){throw r.message=t+"[style]"+r.message.slice("undefined".length),r}return n}(n,i)),r.vue?"style"!==a.property&&(o="attrs"):a.mustUseProperty||(r.vdom?"style"!==a.property&&(o="attributes"):r.hyperscript&&(o="attrs")),o?e[o]=Object.assign(e[o]||{},{[a.attribute]:n}):a.space&&r.react?e[p5[a.property]||a.property]=n:e[a.attribute]=n)}function E5(e){return"context"in e&&"cleanup"in e}var b5={}.hasOwnProperty;function C5(e,t){var n=t||{};function r(t){var n=r.invalid,i=r.handlers;if(t&&b5.call(t,e)&&(n=b5.call(i,t[e])?i[t[e]]:r.unknown),n)return n.apply(this,arguments)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}var w5={}.hasOwnProperty,T5=C5("type",{handlers:{root:function(e,t){var n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=S5(e.children,n,t),k5(e,n)},element:function(e,t){var n=t.space;return v5((function(n,r){var i,a,o,s,l,c=[];for(o in r)w5.call(r,o)&&!1!==r[o]&&((i=kX(t,o)).boolean&&!r[o]||(a={name:o,value:!0===r[o]?"":String(r[o])},i.space&&"html"!==i.space&&"svg"!==i.space&&((s=o.indexOf(":"))<0?a.prefix="":(a.name=o.slice(s+1),a.prefix=o.slice(0,s)),a.namespace=r5[i.space]),c.push(a)));"html"===t.space&&"svg"===e.tagName&&(t=MX);(l=k5(e,{nodeName:n,tagName:n,attrs:c,namespaceURI:r5[t.space],childNodes:[],parentNode:void 0})).childNodes=S5(e.children,l,t),"template"===n&&(l.content=function(e,t){var n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=S5(e.children,n,t),k5(e,n)}(e.content,t));return l}),Object.assign({},e,{children:[]}),{space:n})},text:function(e){return k5(e,{nodeName:"#text",value:e.value,parentNode:void 0})},comment:function(e){return k5(e,{nodeName:"#comment",data:e.value,parentNode:void 0})},doctype:function(e){return k5(e,{nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:void 0})}}});function S5(e,t,n){var r,i=-1,a=[];if(e)for(;++i<e.length;)(r=T5(e[i],n)).parentNode=t,a.push(r);return a}function k5(e,t){var n=e.position;return n&&n.start&&n.end&&(t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset}),t}const _5=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"],A5={sourceCodeLocationInfo:!0,scriptingEnabled:!1},O5=function(e,t,n){let r=-1;const i=new Q1(A5),a=C5("type",{handlers:{root:function(e){f(e.children)},element:function(e){v(),i._processToken(I5(e),r5.html),f(e.children),_5.includes(e.tagName)||(v(),i._processToken(function(e){const t=Object.assign(F5(e));return t.startTag=Object.assign({},t),{type:"END_TAG_TOKEN",tagName:e.tagName,attrs:[],location:t}}(e)))},text:function(e){v(),i._processToken({type:"CHARACTER_TOKEN",chars:e.value,location:F5(e)})},comment:m,doctype:function(e){v(),i._processToken({type:"DOCTYPE_TOKEN",name:"html",forceQuirks:!1,publicId:"",systemId:"",location:F5(e)})},raw:function(e){const t=OW(e),n=t.line||1,r=t.column||1,a=t.offset||0;if(!u)throw new Error("Expected `preprocessor`");if(!c)throw new Error("Expected `tokenizer`");if(!h)throw new Error("Expected `posTracker`");if(!p)throw new Error("Expected `locationTracker`");u.html=void 0,u.pos=-1,u.lastGapPos=-1,u.lastCharPos=-1,u.gapStack=[],u.skipNextNewLine=!1,u.lastChunkWritten=!1,u.endOfChunkHit=!1,h.isEol=!1,h.lineStartPos=1-r,h.droppedBufferSize=a,h.offset=0,h.col=1,h.line=n,p.currentAttrLocation=void 0,p.ctLoc=F5(e),c.write(e.value),i._runParsingLoop(null),("NAMED_CHARACTER_REFERENCE_STATE"===c.state||"NUMERIC_CHARACTER_REFERENCE_END_STATE"===c.state)&&(u.lastChunkWritten=!0,c[c.state](c._consume()));const o=c.currentCharacterToken;o&&(o.location.endLine=h.line,o.location.endCol=h.col+1,o.location.endOffset=h.offset+1,i._processToken(o))}},unknown:N5});let o,c,u,h,p;if(function(e){return Boolean(e&&!("message"in e&&"messages"in e))}(t)&&(n=t,t=void 0),n&&n.passThrough)for(;++r<n.passThrough.length;)a.handlers[n.passThrough[r]]=g;const d=function(e,t={}){let n,r;return function(e){return"messages"in e}(t)?(r=t,n={}):(r=t.file,n=t),o5({schema:"svg"===n.space?MX:IX,file:r,verbose:n.verbose,location:!1},e)}(function(e){const t="root"===e.type?e.children[0]:e;return Boolean(t&&("doctype"===t.type||"element"===t.type&&"html"===t.tagName))}(e)?function(){const t=i.treeAdapter.createDocument();if(i._bootstrap(t,void 0),c=i.tokenizer,!c)throw new Error("Expected `tokenizer`");return u=c.preprocessor,p=c.__mixins[0],h=p.posTracker,a(e),t}():function(){const t={nodeName:"template",tagName:"template",attrs:[],namespaceURI:r5.html,childNodes:[]},n={nodeName:"documentmock",tagName:"documentmock",attrs:[],namespaceURI:r5.html,childNodes:[]},r={nodeName:"#document-fragment",childNodes:[]};if(i._bootstrap(n,t),i._pushTmplInsertionMode("IN_TEMPLATE_MODE"),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),c=i.tokenizer,!c)throw new Error("Expected `tokenizer`");return u=c.preprocessor,p=c.__mixins[0],h=p.posTracker,a(e),i._adoptNodes(n.childNodes[0],r),r}(),t);return o&&AW(d,"comment",((e,t,n)=>{const r=e;if(r.value.stitch&&null!==n&&null!==t)return n.children[t]=r.value.stitch,t})),"root"!==e.type&&"root"===d.type&&1===d.children.length?d.children[0]:d;function f(e){let t=-1;if(e)for(;++t<e.length;)a(e[t])}function m(e){v(),i._processToken({type:"COMMENT_TOKEN",data:e.value,location:F5(e)})}function g(e){let r;o=!0,r="children"in e?l(s({},e),{children:O5({type:"root",children:e.children},t,n).children}):s({},e),m({type:"comment",value:{stitch:r}})}function v(){if(!c)throw new Error("Expected `tokenizer`");c.tokenQueue=[],c.state="DATA_STATE",c.returnState="",c.charRefCode=-1,c.tempBuff=[],c.lastStartTagName="",c.consumedAfterSnapshot=-1,c.active=!1,c.currentCharacterToken=void 0,c.currentToken=void 0,c.currentAttr=void 0}};function I5(e){const t=Object.assign(F5(e));return t.startTag=Object.assign({},t),{type:"START_TAG_TOKEN",tagName:e.tagName,selfClosing:!1,attrs:M5(e),location:t}}function M5(e){return(t={tagName:e.tagName,type:"element",properties:e.properties,children:[]},T5(t,"svg"===n?MX:IX)).attrs;var t,n}function N5(e){throw new Error("Cannot compile `"+e.type+"` node")}function F5(e){const t=OW(e),n=IW(e);return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function L5(e={}){return(t,n)=>O5(t,n,e)}const P5=({content:e,style:t={}})=>d.createElement("div",{className:"markdown-wrapper",style:t},d.createElement(Rq,{remarkPlugins:[jZ],children:e,rehypePlugins:[L5]}));function R5(e){const{values:t}=e,{custom:n}=t,{content:r,textColor:i,bgColor:a,textSize:o,justifyContent:s,alignItems:l}=n;return d.createElement(P5,{content:r,style:{height:"100%",padding:10,fontSize:o,color:i,backgroundColor:a,border:`1px solid ${te("#fff").alpha(.2).rgb().string()}`,display:"unset"!==s&&"unset"!==l?"flex":"block",justifyContent:s,alignItems:l}})}f.exports.createContext({}),Ci.Common;const D5=(e,t)=>{const n=Eu(t),r=A(n.start).unix(),i=A(n.end).unix();if("label_names()"===e)return(a={start:r,end:i},Si("/api/n9e/prometheus/api/v1/labels",{method:yi.Get,params:s({},a)})).then((e=>e.data));if(e.startsWith("label_values(")){if(e.includes(",")){let t=e.substring("label_values(".length,e.length-1).split(",");const n=t.pop();return function(e){return Si("/api/n9e/prometheus/api/v1/series",{method:yi.Get,params:s({},e)})}({"match[]":t.join(", ").trim(),start:r,end:i}).then((e=>Array.from(new Set(e.data.map((e=>e[n.trim()]))))))}return function(e,t){return Si(`/api/n9e/prometheus/api/v1/label/${e}/values`,{method:yi.Get,params:s({},t)})}(e.substring("label_values(".length,e.length-1),{start:r,end:i}).then((e=>e.data))}if(e.startsWith("metrics(")){const t=e.substring("metrics(".length,e.length-1);return function(e={}){return Si("/api/n9e/prometheus/api/v1/label/__name__/values",{method:yi.Get,params:s({},e)})}({start:r,end:i}).then((e=>e.data.filter((e=>e.includes(t)))))}if(e.startsWith("query_result(")){return function(e){return Si("/api/n9e/prometheus/api/v1/query",{method:yi.Get,params:s({},e)})}({query:e.substring("query_result(".length,e.length-1),start:r,end:i}).then((e=>e.data.result.map((({metric:e,value:t})=>`${e.__name__||""} {${Object.keys(e).filter((e=>"__name__"!==e)).map((t=>`${t}="${e[t]}"`))}} ${t.join(" ")}`))))}var a;return Promise.resolve(e.length>0?e.split(",").map((e=>e.trim())):"")},B5=(e,t,n)=>{let r=e;for(;r.includes(t);)r=r.replace(t,n);return r};function z5(e,t,n,r=!1){void 0!==t&&(localStorage.setItem(`dashboard_${n}_${e}`,JSON.stringify(t)),r&&function(e,t){const{protocol:n,host:r,pathname:i,search:a}=window.location;var o=new URLSearchParams(a);o.set(e,t);var s=`${n}//${r}${i}?${o.toString()}`;window.history.replaceState({path:s},"",s)}(e,JSON.stringify(t)))}function H5(e,t){const{search:n}=window.location;const r=new URLSearchParams(n).get(e)||localStorage.getItem(`dashboard_${t}_${e}`);return null===r?null:r?JSON.parse(r):""}const j5=(e,t,n,r)=>{var i=e;const a=i?i.match(/\$[0-9a-zA-Z_]+/g):[];if(a&&a.length>0)for(let o=0;o<n;o++)if(t[o]){const{name:e,options:n,reg:s,allValue:l}=t[o],c=H5(e,r);a.includes("$"+e)&&c&&(Array.isArray(c)?i=c.includes("all")&&n?B5(i,"$"+e,l||`(${n.filter((e=>!s||!G5(s)||G5(s).test(e))).join("|")})`):B5(i,"$"+e,`(${c.join("|")})`):"string"==typeof c&&(i=B5(i,"$"+e,c)))}return i};function G5(e){if(!function(e){return!!e&&"/"===e[0]}(e))return new RegExp(`^${e}$`);const t=e.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));return!!t&&new RegExp(t[1],t[2])}function $5(e,t){let n=w.map((r=e,Array.from(r.matchAll(/{{([\s0-9a-zA-Z_]+?)}}/g)).map((e=>e.length>0?e[1]:e[0]))),w.trim);var r,i=e;return n.forEach((e=>{const n=new RegExp(`{{\\s?${e}\\s?}}`,"g");i=i.replace(n,t[e]?t[e]:"")})),i}function Y5(e,t){const n=[];return w.forEach(t,((t,r)=>{if(r>0){const r=n[n.length-1];r[0]+e<t[0]&&n.push([r[0]+e,null])}n.push(t)})),n}const U5=(e,t)=>{let n=e.__name__||"";return w.forEach(w.omit(e,"__name__"),((e,t)=>{n+=` ${t}: ${e}`})),w.trim(n)},V5=(e,t)=>Math.max(Math.floor((t-e)/240),1);function W5(e){const{id:t,dashboardId:n,time:r,step:i,targets:a,variableConfig:o,inViewPort:c}=e,[u,h]=f.exports.useState([]),[p,d]=f.exports.useState(!1),m=w.map(o,(e=>H5(e.name,n))),g=f.exports.useRef(!1),[v,y]=f.exports.useState({}),x=()=>{if(!v.start)return;const e=[];let{start:r,end:i,step:s}=v,l=[],c=[],u=[],p=`${t}`;a&&(w.forEach(a,(e=>{if(e.time){if(e.time.unit){const{start:t,end:n}=$h(e.time);r=t,i=n}else{const t=Eu(e.time);r=A(t.start).unix(),i=A(t.end).unix()}s=V5(r,i),e.step&&(s=e.step)}r-=r%s,i-=i%s;const t=o?j5(e.expr,o,o.length,n):e.expr;t&&(l.push({end:i,query:t,start:r,step:s}),c.push(e.expr),u.push(e.refId),p+=`-${e.expr}`)})),d(!0),((e,t)=>{const n=new AbortController,{signal:r}=n;return t&&sh[t]&&sh[t].abort&&sh[t].abort(),sh[t]=n,Si("/api/n9e/query-range-batch",{method:yi.Post,data:e,signal:r}).finally((()=>{delete sh[t]}))})({queries:l},p).then((t=>{for(let r=0;r<t.dat.length;r++){var n={result:t.dat[r],expr:c[r],refId:u[r]};const i=w.find(a,(e=>e.expr===n.expr));w.forEach(n.result,(t=>{e.push({id:w.uniqueId("series_"),refId:n.refId,name:(null==i?void 0:i.legend)?$5(null==i?void 0:i.legend,t.metric):U5(t.metric),metric:t.metric,expr:n.expr,data:Y5(s,t.values)})}))}h(e)})).finally((()=>{d(!1)})))};return f.exports.useEffect((()=>{const e=Eu(r);let t=A(e.start).unix(),n=A(e.end).unix(),a=i;i||(a=V5(t,n)),t-=t%a,n-=n%a,y({start:t,end:n,step:a})}),[JSON.stringify(r)]),f.exports.useEffect((()=>{c?x():g.current=!1}),[JSON.stringify(w.map(a,"expr")),JSON.stringify(v),i,JSON.stringify(o),JSON.stringify(m)]),f.exports.useEffect((()=>{c&&!g.current&&(g.current=!0,x())}),[c]),f.exports.useEffect((()=>{const e=w.map(u,(e=>{const t=w.find(a,(t=>t.expr===e.expr));return l(s({},e),{name:(null==t?void 0:t.legend)?$5(null==t?void 0:t.legend,e.metric):U5(e.metric,e.expr)})}));h(e)}),[JSON.stringify(w.map(a,"legend"))]),{series:u,loading:p}}var X5=d.memo((function(e){const{themeMode:t,dashboardId:n,id:r,step:i,type:a,variableConfig:o,isPreview:c,onCloneClick:u,onShareClick:h,onEditClick:p,onDeleteClick:m}=e,[g,v]=f.exports.useState(e.time),[y,x]=f.exports.useState(!1),E=w.cloneDeep(e.values),b=f.exports.useRef(null),[C]=be(b),{series:T,loading:S}=W5({id:r,dashboardId:n,time:g,step:i,targets:E.targets,variableConfig:o,inViewPort:c||C}),k=E.description||!w.isEmpty(E.links);if(f.exports.useEffect((()=>{v(e.time)}),[JSON.stringify(e.time)]),w.isEmpty(E))return null;"string"==typeof w.get(E,"custom.colorRange")&&w.set(E,"custom.colorRange",w.split(w.get(E,"custom.colorRange"),","));const _={values:E,series:T},A={timeseries:()=>d.createElement(pp,l(s({},_),{themeMode:t})),stat:()=>d.createElement(mp,l(s({},_),{containerRef:b,themeMode:t})),table:()=>d.createElement(Tp,l(s({},_),{themeMode:t})),pie:()=>d.createElement(NY,l(s({},_),{themeMode:t})),hexbin:()=>d.createElement(YY,l(s({},_),{themeMode:t})),barGauge:()=>d.createElement(VY,l(s({},_),{themeMode:t})),text:()=>d.createElement(R5,s({},_))};return d.createElement("div",{className:P({"renderer-container":!0,"renderer-container-no-title":!E.name}),ref:b},d.createElement("div",{className:"renderer-header graph-header dashboards-panels-item-drag-handle"},d.createElement("div",{className:"renderer-header-desc"},k?d.createElement(kt,{placement:"top",overlayInnerStyle:{width:300},getPopupContainer:()=>b.current,title:d.createElement("div",null,d.createElement(P5,{content:E.description}),w.map(E.links,((e,t)=>d.createElement("div",{key:t},d.createElement("a",{href:e.url,target:e.targetBlank?"_blank":"_self"},e.title)))))},d.createElement("div",{className:"renderer-header-desc"},E.description?d.createElement(R,null):d.createElement(Ce,null))):null),d.createElement("div",{className:"renderer-header-content"},d.createElement(kt,{title:E.name,getPopupContainer:()=>b.current},d.createElement("div",{className:"renderer-header-title"},E.name))),d.createElement("div",{className:"renderer-header-loading"},S?d.createElement(Z,{spin:!0}):!c&&d.createElement(_t,{trigger:["click"],placement:"bottomCenter",getPopupContainer:()=>b.current,overlayStyle:{minWidth:"100px"},visible:y,onVisibleChange:e=>{x(e)},overlay:d.createElement(bt,null,d.createElement(bt.Item,{onClick:()=>{x(!0),v(l(s({},g),{refreshFlag:w.uniqueId("refreshFlag_ ")}))},key:"0"},d.createElement(kt,{title:`刷新间隔小于 step(${Iu(g,i)}s) 将不会更新数据`,placement:"left"},d.createElement("div",null,d.createElement(Z,{style:{marginRight:8}}),"刷新"))),d.createElement(bt.Item,{onClick:()=>{x(!1),p&&p()},key:"1"},d.createElement(L,{style:{marginRight:8}}),"编辑"),d.createElement(bt.Item,{onClick:()=>{x(!1),u&&u()},key:"2"},d.createElement(z,{style:{marginRight:8}}),"克隆"),d.createElement(bt.Item,{onClick:()=>{x(!1),h&&h()},key:"3"},d.createElement(pe,{style:{marginRight:8}}),"分享"),d.createElement(bt.Item,{onClick:()=>{x(!1),m&&m()},key:"4"},d.createElement(we,{style:{marginRight:8}}),"删除"))},d.createElement(Te,{className:"renderer-header-more"})))),d.createElement("div",{className:"renderer-body",style:{height:E.name?"calc(100% - 47px)":"100%"}},A[a]?A[a]():d.createElement("div",{className:"unknown-type"},`无效的图表类型 ${a}`)))}));function q5(){var e;const{t:t}=Hr(),{ids:n}=X(),[r,i]=f.exports.useState([]),[a,o]=f.exports.useState({start:"now-1h",end:"now"}),[c,u]=f.exports.useState(null),[h,p]=f.exports.useState(th.Line),{clusters:m}=ri((e=>e.common)),[g,v]=f.exports.useState("");f.exports.useEffect((()=>{y()}),[]);const y=()=>{(function(e){return Si(`/api/n9e/share-charts?ids=${e}`,{method:yi.Get})})(n).then((e=>{let t=e.dat.filter((e=>!!e)).map((e=>l(s({},JSON.parse(e.configs)),{ref:d.createRef()})));const n=t[0].curCluster;p(t[0].dataProps.chartType||th.Line),u(t[0].dataProps.step),o(t[0].dataProps.range),v(n),localStorage.setItem("curCluster",n),i(t)}))},x=d.createElement(bt,{selectedKeys:[g]},m.map((e=>d.createElement(bt.Item,{key:e,onClick:t=>{v(e),localStorage.setItem("curCluster",e),r.forEach((e=>e.ref.current.refresh()))}},e))));return d.createElement("div",{className:"chart-container"},r&&r.length>0&&g?d.createElement(d.Fragment,null,d.createElement("div",{className:"chart-container-header"},d.createElement("div",{className:"left"}),d.createElement("div",{className:"right"},d.createElement(Ht,null,d.createElement("div",null,d.createElement("span",null,"集群："),d.createElement(_t,{overlay:x},d.createElement(Ct,null,g," ",d.createElement(I,null)))),d.createElement(_u,{refreshTooltip:`刷新间隔小于 step(${Iu(a,c)}s) 将不会更新数据`,onChange:o,value:a}),d.createElement(Ku,{onChange:e=>u(e),initialValue:c}),!$c.valid(null==(e=r[0].dataProps)?void 0:e.version)&&d.createElement(Bt.Group,{options:[{label:d.createElement(E,null),value:th.Line},{label:d.createElement(Se,null),value:th.StackArea}],onChange:e=>{e.preventDefault(),p(e.target.value)},value:h,optionType:"button",buttonStyle:"solid"})))),r.map(((e,t)=>{var n,r;if($c.valid(null==(n=e.dataProps)?void 0:n.version))return d.createElement("div",{style:{height:740,border:"1px solid #efefef"}},d.createElement(X5,{dashboardId:e.id,key:t,time:a,step:c,type:null==(r=e.dataProps)?void 0:r.type,values:w.merge({},e.dataProps,{options:{legend:{displayMode:"table"}}}),isPreview:!0}));const i=l(s({},e.dataProps),{range:a,step:c,chartType:h,title:d.createElement(kt,{placement:"bottomLeft",title:()=>{var t;return d.createElement("div",null,null==(t=e.dataProps.promqls)?void 0:t.map((e=>d.createElement("div",null,e.current?e.current:e))))}},d.createElement(Ct,{size:"small",type:"link"},"promql 语句"))});return d.createElement(Vh,{ref:e.ref,key:t,data:s({},i),graphConfigInnerVisible:!1,isShowShare:!1,highLevelConfig:e.highLevelConfig||{}})}))):d.createElement("h2",{className:"holder"},d.createElement(ke,{style:{fontSize:"30px"}}),d.createElement("span",null,t("该分享链接无图表数据"))))}function K5(e){const{id:t,expression:n,onChange:r}=e,{name:i,multi:a,allOption:o,options:s,type:l}=n,[c,u]=f.exports.useState(H5(i,t));return f.exports.useEffect((()=>{u(H5(i,t))}),[JSON.stringify(H5(i,t))]),d.createElement("div",{className:"tag-content-close-item"},d.createElement(St.Group,null,d.createElement("span",{className:"ant-input-group-addon"},i),"query"===l?d.createElement(Lt,{mode:a?"tags":void 0,style:{width:"180px"},maxTagCount:"responsive",onChange:e=>{let n=e;if(a&&o&&n.includes("all"))n=["all"];else if(a&&!o){let e=n.indexOf("all");-1!==e&&n.splice(e,1)}z5(i,n,t,!0),u(n),r()},defaultActiveFirstOption:!1,showSearch:!0,value:c,dropdownClassName:"overflow-586"},o&&d.createElement(Lt.Option,{key:"all",value:"all"},"all"),s&&s.map((e=>d.createElement(Lt.Option,{key:e,value:e},e)))):d.createElement(St,{value:c,onBlur:e=>{let n=e.target.value;z5(i,n,t,!0),r()},onKeyDown:e=>{if("Enter"===e.code){let n=e.target.value;z5(i,n,t,!0),r()}},onChange:e=>{let t=e.target.value;u(t)}})))}function Q5(e){const{visible:t,onChange:n,value:r,range:i,id:a}=e,{t:o}=Hr(),[u]=Tt.useForm(),h=e=>{const t=u.getFieldValue(["var",e,"reg"]),n=u.getFieldValue(["var",e,"definition"]);if((!t||new RegExp("^/(.*?)/(g?i?m?y?)$").test(t))&&n){const o=u.getFieldsValue();var r=j5(n,o,e,a);D5(r,i).then((n=>{const r=n.filter((e=>!t||!G5(t)||G5(t).test(e)));r.length>0&&z5(o.var[e].name,r[0],a)}))}};return d.createElement(Ft,{title:o("大盘变量"),width:1200,visible:t,onOk:async()=>{await u.validateFields();const e=u.getFieldsValue();n(e.var)},onCancel:()=>{n()},wrapClassName:"variable-modal"},d.createElement(Tt,{autoComplete:"off",preserve:!1,form:u,initialValues:{var:r}},d.createElement(Ot,{gutter:[6,6],className:"tag-header"},d.createElement(It,{span:3},o("类型")),d.createElement(It,{span:4},o("变量名")),d.createElement(It,{span:5},o("变量定义"),d.createElement(_e,{style:{marginLeft:5},onClick:()=>window.open("https://grafana.com/docs/grafana/latest/datasources/prometheus/#query-variable","_blank")})),d.createElement(It,{span:3},o("筛值正则")),d.createElement(It,{span:1},o("Multi")),d.createElement(It,{span:2},o("All Option")),d.createElement(It,{span:3},o("All Value")),d.createElement(It,{span:3},o("操作"))),d.createElement(Tt.List,{name:"var"},((e,{add:t,remove:n,move:r})=>d.createElement(d.Fragment,null,e.map((i=>{var a=i,{key:p,name:f,fieldKey:m}=a,g=c(a,["key","name","fieldKey"]);return d.createElement(Ot,{gutter:[6,6],className:"tag-content-item",key:p},d.createElement(It,{span:3},d.createElement(Tt.Item,l(s({},g),{name:[f,"type"],fieldKey:[m,"type"],rules:[{required:!0,message:o("请选择变量类型")}]}),d.createElement(Lt,{style:{width:"100%"}},d.createElement(Lt.Option,{value:"query"},"Query"),d.createElement(Lt.Option,{value:"textbox"},"Text box")))),d.createElement(It,{span:4},d.createElement(Tt.Item,l(s({},g),{name:[f,"name"],fieldKey:[m,"name"],rules:[{required:!0,message:o("请输入变量名")},{pattern:/^[0-9a-zA-Z_]+$/,message:o("仅支持数字和字符下划线")}]}),d.createElement(St,null))),d.createElement(It,{span:5},d.createElement(Tt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>"query"===e(["var",m,"type"])?d.createElement(Tt.Item,l(s({},g),{name:[f,"definition"],fieldKey:[m,"definition"],rules:[{required:!0,message:o("请输入变量定义")}]}),d.createElement(St,{onBlur:e=>h(f)})):d.createElement(Tt.Item,l(s({},g),{name:[f,"defaultValue"],fieldKey:[m,"defaultValue"]}),d.createElement(St,{onBlur:e=>h(f),placeholder:"默认值"}))))),d.createElement(It,{span:3},d.createElement(Tt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>"query"===e(["var",m,"type"])?d.createElement(Tt.Item,l(s({},g),{name:[f,"reg"],fieldKey:[m,"reg"],rules:[{pattern:new RegExp("^/(.*?)/(g?i?m?y?)$"),message:o("格式不对")}]}),d.createElement(St,{placeholder:"/*.hna/",onBlur:e=>h(f)})):null))),d.createElement(It,{span:1},d.createElement(Tt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>"query"===e(["var",m,"type"])?d.createElement(Tt.Item,l(s({},g),{name:[f,"multi"],fieldKey:[m,"multi"],valuePropName:"checked"}),d.createElement(Dt,null)):null))),d.createElement(It,{span:2},d.createElement(Tt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>"query"===e(["var",m,"type"])&&u.getFieldValue(["var",f,"multi"])?d.createElement(Tt.Item,l(s({},g),{name:[f,"allOption"],fieldKey:[m,"allOption"],valuePropName:"checked"}),d.createElement(Dt,null)):null))),d.createElement(It,{span:3},d.createElement(Tt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:e})=>"query"===e(["var",m,"type"])&&u.getFieldValue(["var",f,"multi"])&&u.getFieldValue(["var",f,"allOption"])?d.createElement(Tt.Item,l(s({},g),{name:[f,"allValue"],fieldKey:[m,"allValue"]}),d.createElement(St,{placeholder:".*"})):null))),d.createElement(It,{span:3},d.createElement(Ct,{type:"link",size:"small",onClick:()=>r(f,f+1),disabled:f===e.length-1},d.createElement(Ae,null)),d.createElement(Ct,{type:"link",size:"small",onClick:()=>r(f,f-1),disabled:0===f},d.createElement(Oe,null)),d.createElement(Ct,{type:"link",size:"small",onClick:()=>{const e=u.getFieldValue(["var",f]);t(l(s({},e),{name:"copy_of_"+e.name}))}},d.createElement(z,null)),d.createElement(Ct,{type:"link",size:"small",onClick:()=>n(f)},d.createElement(we,null))))})),d.createElement(Tt.Item,null,d.createElement(Ct,{type:"dashed",onClick:()=>t(),block:!0,icon:d.createElement(Ie,null)},o("新增变量"))))))))}var Z5=d.memo((function(e){const{id:t,cluster:n,editable:r=!0,range:i,onChange:a,onOpenFire:o}=e,[c,u]=f.exports.useState(!1),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState(w.uniqueId("refreshFlag_")),v=w.map(e.value,(e=>l(s({},e),{type:e.type||"query"})));return f.exports.useEffect((()=>{if(v){const e=[];try{(async()=>{for(let n=0;n<v.length;n++){const r=w.cloneDeep(v[n]);if("query"===r.type&&r.definition){const a=n>0?j5(r.definition,e,n,t):r.definition,o=await D5(a,i),s=w.filter(o,(e=>!!e&&(!r.reg||!G5(r.reg)||G5(r.reg).test(e))));e[n]=r,e[n].fullDefinition=a,e[n].options=w.sortBy(s);if(null===H5(r.name,t)){const e=null==s?void 0:s[0],n=r.multi?e?[e]:[]:e;z5(r.name,n,t,!0)}}else if("textbox"===r.type){e[n]=r;null===H5(r.name,t)&&z5(r.name,r.defaultValue,t,!0)}}p(e),a(v,!1,e)})()}catch(Wh){console.log(Wh)}}}),[JSON.stringify(v),n,m]),d.createElement("div",{className:"tag-area"},d.createElement("div",{className:P("tag-content","tag-content-close")},w.map(h,(e=>d.createElement(K5,{key:e.name,id:t,expression:e,onChange:()=>{g(w.uniqueId("refreshFlag_"))}}))),r&&d.createElement(Me,{className:"icon",onClick:()=>{u(!0),o&&o()}}),(!h||0===(null==h?void 0:h.length))&&r&&d.createElement("div",{className:"add-variable-tips",onClick:()=>{u(!0),o&&o()}},"添加大盘变量")),d.createElement(Q5,{visible:c,onChange:e=>{e&&(a(e,!0),p(e)),u(!1)},value:v,range:i,id:t}))}));function J5(e){return function(t){const n=document.createElement("div");function r(){q.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),q.render(d.createElement(Ne,null,d.createElement(e,s({},i))),n),{destroy:r}}}var e9=J5((function(e){const{visible:t,initialValues:n}=e,[r]=Tt.useForm();return d.createElement(Ft,{width:800,title:"大盘链接设置",style:{top:10,padding:0},visible:t,closable:!1,onOk:()=>{r.validateFields().then((t=>{e.onOk(t.links),e.destroy()}))},onCancel:()=>{e.destroy()},bodyStyle:{padding:"10px 24px 24px 24px"}},d.createElement(Tt,{layout:"vertical",initialValues:{links:n},form:r},d.createElement(Tt.List,{name:"links"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(Ht,{key:r,style:{alignItems:"flex-start"}},d.createElement(Tt.Item,l(s({},a),{name:[i,"title"],rules:[{required:!0,message:"链接名称"}]}),d.createElement(St,{placeholder:"链接名称",style:{width:192}})),d.createElement(Tt.Item,l(s({},a),{name:[i,"url"],rules:[{required:!0,message:"链接地址"}]}),d.createElement(St,{style:{width:460},placeholder:"链接地址"})),d.createElement(kt,{title:"是否新窗口打开"},d.createElement(Tt.Item,l(s({},a),{name:[i,"targetBlank"],valuePropName:"checked"}),d.createElement(Dt,null))),d.createElement(Ct,{icon:d.createElement(we,null),onClick:()=>{n(i)}}))})),d.createElement(Ct,{type:"dashed",style:{width:"100%",marginBottom:10},onClick:()=>{t({})}},d.createElement(Ie,null)," 新增链接"))))))}));function t9(e){const{editable:t=!0,value:n}=e;return d.createElement(Ht,{align:"baseline"},d.createElement(_t,{overlay:d.createElement(bt,null,w.isEmpty(n)?d.createElement("div",{style:{textAlign:"center"}},"暂无数据"):w.map(n,((e,t)=>d.createElement(bt.Item,{key:t},d.createElement("a",{href:e.url,target:e.targetBlank?"_blank":"_self"},e.title)))))},d.createElement(Ct,null,"大盘链接 ",d.createElement(I,null))),t&&d.createElement(Me,{style:{fontSize:18},className:"icon",onClick:()=>{e9({initialValues:n,onOk:t=>{e.onChange(t)}})}}))}function n9(e){return w.map(e,(e=>l(s({},e.layout),{i:w.toString(e.layout.i),isResizable:"row"!==e.type})))}function r9(e){return e.sort(((e,t)=>e.layout.y===t.layout.y?e.layout.x-t.layout.x:e.layout.y-t.layout.y))}function i9(e,t){return w.map(e,(e=>{const n=s({},e),r=w.find(t,{i:n.layout.i});return r&&(n.layout=w.pick(r,["h","w","x","y","i","isResizable"])),n}))}function a9(e,t){return w.findIndex(e,{id:t})}function o9(e,t){const n=[];for(let r=a9(e,t)+1;r<e.length;r++){const t=e[r];if("row"===t.type)break;n.push(t)}return n}function s9(e,t){var n;let r=w.cloneDeep(e);const i=a9(r,t.id),a=t.panels;if(a&&a.length>0){const e=(null!=(n=a[0].layout.y)?n:t.layout.y)-(t.layout.y+t.layout.h);let o=i+1,s=t.layout.y;for(const n of a)null!=n.layout.y||(n.layout.y=t.layout.y),n.layout.y-=e,r.splice(o,0,n),o+=1,s=Math.max(s,n.layout.y+n.layout.h);const l=s-t.layout.y-1;for(let t=o;t<r.length;t++)r[t].layout.y+=l;r=w.unionBy(r,"id");w.find(r,{id:t.id}).panels=[]}return r}function l9(e,t){let n=w.cloneDeep(e);const r=o9(n,t.id);if(r.length>0){n=w.filter(n,(e=>!w.find(r,{id:e.id})));w.find(n,{id:t.id}).panels=r}return n}function c9(e,t){return w.map(e,(e=>e.id===t.id?t:e))}function u9(e,t,n){const r="row"===n?24:12,i="row"===n?1:4,a=w.maxBy(e,(e=>e.layout.y+e.layout.h)),o=l(s({},t),{layout:{x:0,y:a?a.layout.y+a.layout.h:0,w:r,h:i,i:t.id}});return w.concat([...e],o)}function h9(e,t,n){const r=function(e,t){let n;for(let r=a9(e,t)+1;r<e.length;r++){const t=e[r];if("row"===t.type){n=t;break}}return n}(e,t);let i;(null==r?void 0:r.id)&&(i=a9(e,null==r?void 0:r.id));const a=function(e,t){const n=o9(e,t),r=w.find(e,{id:t});let i=r.layout.y+r.layout.h;return w.forEach(n,(e=>{e.layout.y+e.layout.h>i&&(i=e.layout.y+e.layout.h)})),i}(e,t),o=l(s({},n),{layout:{x:0,y:a,w:12,h:4,i:n.id}}),c=w.map(e,((e,t)=>t>=i?l(s({},e),{layout:l(s({},e.layout),{y:e.layout.y+4})}):e));return w.concat(o,c)}function p9(e,t){const n=Ou(e);return n.panels=t,JSON.stringify(n)}function d9(e){const{name:t,row:n,onToggle:r,onAddClick:i,onEditClick:a,onDeleteClick:o}=e,[c,u]=f.exports.useState(!1),[h,p]=f.exports.useState(),[m,g]=f.exports.useState(!1);return d.createElement("div",{className:"dashboards-panels-row"},d.createElement("div",{className:"dashboards-panels-row-name",onClick:()=>{r()}},d.createElement("span",{style:{paddingRight:6}},t),n.collapsed?d.createElement(H,null):d.createElement(Fe,null)),d.createElement(Ht,null,d.createElement(ep,{onClick:()=>{i()}}),d.createElement(L,{onClick:()=>{u(!0),p(t)}}),d.createElement(we,{onClick:()=>{g(!0)}}),!1===n.collapsed&&d.createElement(Le,{className:"dashboards-panels-item-drag-handle"})),d.createElement(Ft,{title:"编辑分组",visible:c,onCancel:()=>{u(!1)},onOk:()=>{a(l(s({},n),{name:h})),u(!1)}},d.createElement("div",null,"分组名称",d.createElement(St,{value:h,onChange:e=>{p(e.target.value)},onPressEnter:()=>{a(l(s({},n),{name:h})),u(!1)}}))),d.createElement(Ft,{closable:!1,visible:m,onCancel:()=>{g(!1)},footer:[d.createElement(Ct,{key:"cancel",onClick:()=>{g(!1)}},"取消"),d.createElement(Ct,{key:"ok",type:"primary",onClick:()=>{o("self"),g(!1)}},"仅删除分组"),d.createElement(Ct,{key:"all",type:"primary",danger:!0,onClick:()=>{o("withPanels"),g(!1)}},"删除分组和图表")]},d.createElement("div",null,d.createElement("h3",{style:{fontSize:16}},d.createElement(R,{style:{color:"#faad14",marginRight:10,fontSize:22,position:"relative",top:4}})," 删除分组"),d.createElement("div",{style:{marginLeft:38,fontSize:14}},"确定删除该分组吗？"))))}function f9(e){return d.createElement("div",{className:"n9e-collapse"},e.children)}const m9=function(e){const[t,n]=f.exports.useState(e.isActive||!0);return d.createElement("div",{className:P({"n9e-collapse-item":!0,"n9e-collapse-item-active":t,"n9e-collapse-item-inner":e.isInner})},d.createElement("div",{className:"n9e-collapse-header",onClick:()=>{n(!t)}},t?d.createElement(I,{className:"n9e-collapse-arrow"}):d.createElement(F,{className:"n9e-collapse-arrow"}),e.header,d.createElement("div",{className:"n9e-collapse-extra",onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},e.extra)),d.createElement("div",{className:P({"n9e-collapse-content":!0,"n9e-collapse-content-hidden":!t})},d.createElement("div",{className:"n9e-collapse-content-box"},e.children)))};function g9(){const e=["options","tooltip"];return d.createElement(m9,{header:"Tooltip"},d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"模式",name:[...e,"mode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"single"},"single"),d.createElement(Bt.Button,{value:"all"},"all")))),d.createElement(It,{span:12},d.createElement(Tt.Item,{noStyle:!0,shouldUpdate:(t,n)=>w.get(t,[...e,"mode"])!==w.get(n,[...e,"mode"])},(({getFieldValue:t})=>"all"===t([...e,"mode"])?d.createElement(Tt.Item,{label:"排序",name:[...e,"sort"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"none"},"none"),d.createElement(Bt.Button,{value:"asc"},"asc"),d.createElement(Bt.Button,{value:"desc"},"desc"))):null)))))}function v9(){const e=["options","legend"];return d.createElement(m9,{header:"Legend"},d.createElement(Ot,null,d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"显示模式",name:[...e,"displayMode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"table"},"表格"),d.createElement(Bt.Button,{value:"list"},"列表"),d.createElement(Bt.Button,{value:"hidden"},"关闭")))),d.createElement(It,{span:12},d.createElement(Tt.Item,{noStyle:!0,shouldUpdate:(t,n)=>w.get(t,[...e,"displayMode"])!==w.get(n,[...e,"displayMode"])},(({getFieldValue:t})=>"list"===t([...e,"displayMode"])?d.createElement(Tt.Item,{label:"位置",name:[...e,"placement"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"bottom"},"bottom"),d.createElement(Bt.Button,{value:"right"},"right"))):null)))))}function y9(){const e=["custom"];return d.createElement(m9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:"绘制模式",name:[...e,"drawStyle"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"lines"},"lines"),d.createElement(Bt.Button,{value:"bars"},"bars"))),d.createElement(Tt.Item,{noStyle:!0,shouldUpdate:(t,n)=>w.get(t,[...e,"drawStyle"])!==w.get(n,[...e,"drawStyle"])},(({getFieldValue:t})=>{const n=t([...e,"drawStyle"]);return"lines"===n||"bars"===n?d.createElement(d.Fragment,null,"lines"===n?d.createElement(Tt.Item,{label:"线插值",name:[...e,"lineInterpolation"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"linear"},"linear"),d.createElement(Bt.Button,{value:"smooth"},"smooth"))):null):null})),d.createElement(Tt.Item,{label:"曲线宽度",name:[...e,"lineWidth"]},d.createElement(Kt,{min:0,max:10,step:1})),d.createElement(Tt.Item,{label:"透明度",name:[...e,"fillOpacity"]},d.createElement(Kt,{min:0,max:1,step:.01})),d.createElement(Tt.Item,{label:"渐变",name:[...e,"gradientMode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"opacity"},"开启"),d.createElement(Bt.Button,{value:"none"},"关闭"))),d.createElement(Tt.Item,{label:"堆叠",name:[...e,"stack"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"noraml"},"开启"),d.createElement(Bt.Button,{value:"off"},"关闭")))))}const{Option:x9,OptGroup:E9}=Lt;function b9(e){const{preNamePrefix:t=[],namePrefix:n=["options","standardOptions"]}=e;return d.createElement(m9,{header:"高级设置"},d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:d.createElement("div",null,"单位"," ",d.createElement(kt,{overlayInnerStyle:{width:500},getTooltipContainer:()=>document.body,title:d.createElement("div",null,d.createElement("div",null,"默认会做 SI Prefixes 处理，如不想默认的处理可选择 none 关闭"),d.createElement("div",null,"Data(SI): 基数为 1000, 单位为 B、kB、MB、GB、TB、PB、EB、ZB、YB"),d.createElement("div",null,"Data(IEC): 基数为 1024, 单位为 B、KiB、MiB、GiB、TiB、PiB、EiB、ZiB、YiB"),d.createElement("div",null,"bits: b"),d.createElement("div",null,"bytes: B"))},d.createElement(R,null))),name:[...n,"util"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),placeholder:"auto",allowClear:!0},d.createElement(x9,{value:"none"},"none"),d.createElement(E9,{label:"Data(SI)"},d.createElement(x9,{value:"bitsSI"},"bits(SI)"),d.createElement(x9,{value:"bytesSI"},"bytes(SI)")),d.createElement(E9,{label:"Data(IEC)"},d.createElement(x9,{value:"bitsIEC"},"bits(IEC)"),d.createElement(x9,{value:"bytesIEC"},"bytes(IEC)")),d.createElement(E9,{label:"百分比"},d.createElement(x9,{value:"percent"},"百分比(0-100)"),d.createElement(x9,{value:"percentUnit"},"百分比(0.0-1.0)")),d.createElement(E9,{label:"时间"},d.createElement(x9,{value:"seconds"},"seconds"),d.createElement(x9,{value:"milliseconds"},"milliseconds"),d.createElement(x9,{value:"humantimeSeconds"},"humanize(seconds)"),d.createElement(x9,{value:"humantimeMilliseconds"},"humanize(milliseconds)")))),d.createElement(Ot,{gutter:10},d.createElement(It,{span:8},d.createElement(Tt.Item,{label:"最小值",name:[...n,"min"]},d.createElement(zt,{placeholder:"auto",style:{width:"100%"}}))),d.createElement(It,{span:8},d.createElement(Tt.Item,{label:"最大值",name:[...n,"max"]},d.createElement(zt,{placeholder:"auto",style:{width:"100%"}}))),d.createElement(It,{span:8},d.createElement(Tt.Item,{label:"小数点",name:[...n,"decimals"]},d.createElement(zt,{placeholder:"auto",style:{width:"100%"}}))))))}var C9={},w9={},T9=Pe,S9=Re,k9=De;var _9=function(e){return"string"==typeof e||!S9(e)&&k9(e)&&"[object String]"==T9(e)},A9=Nn;var O9=Fn,I9=function(e){return"function"==typeof e?e:A9};var M9=function(e,t){return e&&O9(e,I9(t))};Object.defineProperty(w9,"__esModule",{value:!0}),w9.flattenNames=void 0;var N9=R9(_9),F9=R9(M9),L9=R9(Ln),P9=R9(Pn);function R9(e){return e&&e.__esModule?e:{default:e}}var D9=w9.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,P9.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,L9.default)(t)?(0,F9.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,N9.default)(t)&&n.push(t)})),n};w9.default=D9;var B9={},z9=Rn;var H9=function(e){return z9(e,5)};Object.defineProperty(B9,"__esModule",{value:!0}),B9.mergeClasses=void 0;var j9=Y9(M9),G9=Y9(H9),$9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Y9(e){return e&&e.__esModule?e:{default:e}}var U9=B9.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,G9.default)(e.default)||{};return t.map((function(t){var r=e[t];return r&&(0,j9.default)(r,(function(e,t){n[t]||(n[t]={}),n[t]=$9({},n[t],r[t])})),t})),n};B9.default=U9;var V9={};Object.defineProperty(V9,"__esModule",{value:!0}),V9.autoprefix=void 0;var W9=function(e){return e&&e.__esModule?e:{default:e}}(M9),X9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var q9={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},K9=V9.autoprefix=function(e){var t={};return(0,W9.default)(e,(function(e,n){var r={};(0,W9.default)(e,(function(e,t){var n=q9[t];n?r=X9({},r,n(e)):r[t]=e})),t[n]=r})),t};V9.default=K9;var Q9={};Object.defineProperty(Q9,"__esModule",{value:!0}),Q9.hover=void 0;var Z9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J9=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);function e2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t2(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n2(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r2=Q9.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,a;e2(this,r);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return i=a=t2(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return J9.default.createElement(t,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},J9.default.createElement(e,Z9({},a.props,a.state)))},t2(a,i)}return n2(r,J9.default.Component),r}()};Q9.default=r2;var i2={};Object.defineProperty(i2,"__esModule",{value:!0}),i2.active=void 0;var a2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o2=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);function s2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l2(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c2(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u2=i2.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,a;s2(this,r);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return i=a=l2(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return o2.default.createElement(t,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},o2.default.createElement(e,a2({},a.props,a.state)))},l2(a,i)}return c2(r,o2.default.Component),r}()};i2.default=u2;var h2={};Object.defineProperty(h2,"__esModule",{value:!0});h2.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n},Object.defineProperty(C9,"__esModule",{value:!0}),C9.ReactCSS=C9.loop=C9.handleActive=x2=C9.handleHover=C9.hover=void 0;var p2=y2(w9),d2=y2(B9),f2=y2(V9),m2=y2(Q9),g2=y2(i2),v2=y2(h2);function y2(e){return e&&e.__esModule?e:{default:e}}C9.hover=m2.default;var x2=C9.handleHover=m2.default;C9.handleActive=g2.default,C9.loop=v2.default;var E2=C9.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=(0,p2.default)(n),a=(0,d2.default)(e,i);return(0,f2.default)(a)},b2=C9.default=E2,C2=function(e,t,n,r,i){var a=i.clientWidth,o=i.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h=void 0;if(h=u<0?0:u>o?1:Math.round(100*u/o)/100,t.a!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}else{var p=void 0;if(r!==(p=c<0?0:c>a?1:Math.round(100*c/a)/100))return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}return null},w2={},T2=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":"");if(w2[i])return w2[i];var a=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var a=i.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,i.width,i.height),a.fillStyle=t,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),i.toDataURL()):null}(e,t,n,r);return w2[i]=a,a},S2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k2=function(e){var t=e.white,n=e.grey,r=e.size,i=e.renderers,a=e.borderRadius,o=e.boxShadow,s=e.children,l=b2({default:{grid:{borderRadius:a,boxShadow:o,absolute:"0px 0px 0px 0px",background:"url("+T2(t,n,r,i.canvas)+") center left"}}});return f.exports.isValidElement(s)?d.cloneElement(s,S2({},s.props,{style:S2({},s.props.style,l.grid)})):d.createElement("div",{style:l.grid})};k2.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var _2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A2=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function O2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I2(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var M2=function(e){function t(){var e,n,r;O2(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=I2(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=C2(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},I2(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),A2(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=b2({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:_2({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return d.createElement("div",{style:n.alpha},d.createElement("div",{style:n.checkboard},d.createElement(k2,{renderers:this.props.renderers})),d.createElement("div",{style:n.gradient}),d.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.createElement("div",{style:n.pointer},this.props.pointer?d.createElement(this.props.pointer,this.props):d.createElement("div",{style:n.slider}))))}}]),t}(),N2=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var F2=[38,40],L2=1,P2=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,F2.indexOf(t)>-1)){var i=n.getArrowOffset(),a=38===e.keyCode?r+i:r-i;n.setUpdatedValue(a,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+L2++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),N2(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=b2({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return d.createElement("div",{style:t.wrap},d.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?d.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(),R2=function(e,t,n,r){var i=r.clientWidth,a=r.clientHeight,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(c<0)u=359;else if(c>a)u=0;else{u=360*(-100*c/a+100)/100}if(n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h=void 0;if(l<0)h=0;else if(l>i)h=359;else{h=360*(100*l/i)/100}if(n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},D2=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function B2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z2(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var H2=function(e){function t(){var e,n,r;B2(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=z2(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=R2(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},z2(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),D2(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=b2({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return d.createElement("div",{style:r.hue},d.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),d.createElement("div",{style:r.pointer},this.props.pointer?d.createElement(this.props.pointer,this.props):d.createElement("div",{style:r.slider}))))}}]),t}();function j2(e,t){return e===t||e!=e&&t!=t}function G2(e,t){for(var n=e.length;n--;)if(j2(e[n][0],t))return n;return-1}var $2=Array.prototype.splice;function Y2(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Y2.prototype.clear=function(){this.__data__=[],this.size=0},Y2.prototype.delete=function(e){var t=this.__data__,n=G2(t,e);return!(n<0)&&(n==t.length-1?t.pop():$2.call(t,n,1),--this.size,!0)},Y2.prototype.get=function(e){var t=this.__data__,n=G2(t,e);return n<0?void 0:t[n][1]},Y2.prototype.has=function(e){return G2(this.__data__,e)>-1},Y2.prototype.set=function(e,t){var n=this.__data__,r=G2(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var U2="object"==typeof global&&global&&global.Object===Object&&global,V2="object"==typeof self&&self&&self.Object===Object&&self,W2=U2||V2||Function("return this")(),X2=W2.Symbol,q2=Object.prototype,K2=q2.hasOwnProperty,Q2=q2.toString,Z2=X2?X2.toStringTag:void 0;var J2=Object.prototype.toString;var e4=X2?X2.toStringTag:void 0;function t4(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":e4&&e4 in Object(e)?function(e){var t=K2.call(e,Z2),n=e[Z2];try{e[Z2]=void 0;var r=!0}catch(Wh){}var i=Q2.call(e);return r&&(t?e[Z2]=n:delete e[Z2]),i}(e):function(e){return J2.call(e)}(e)}function n4(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function r4(e){if(!n4(e))return!1;var t=t4(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var i4,a4=W2["__core-js_shared__"],o4=(i4=/[^.]+$/.exec(a4&&a4.keys&&a4.keys.IE_PROTO||""))?"Symbol(src)_1."+i4:"";var s4=Function.prototype.toString;function l4(e){if(null!=e){try{return s4.call(e)}catch(Wh){}try{return e+""}catch(Wh){}}return""}var c4=/^\[object .+?Constructor\]$/,u4=Function.prototype,h4=Object.prototype,p4=u4.toString,d4=h4.hasOwnProperty,f4=RegExp("^"+p4.call(d4).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m4(e){return!(!n4(e)||(t=e,o4&&o4 in t))&&(r4(e)?f4:c4).test(l4(e));var t}function g4(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return m4(n)?n:void 0}var v4=g4(W2,"Map"),y4=g4(Object,"create");var x4=Object.prototype.hasOwnProperty;var E4=Object.prototype.hasOwnProperty;function b4(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function C4(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function w4(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}b4.prototype.clear=function(){this.__data__=y4?y4(null):{},this.size=0},b4.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},b4.prototype.get=function(e){var t=this.__data__;if(y4){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return x4.call(t,e)?t[e]:void 0},b4.prototype.has=function(e){var t=this.__data__;return y4?void 0!==t[e]:E4.call(t,e)},b4.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=y4&&void 0===t?"__lodash_hash_undefined__":t,this},w4.prototype.clear=function(){this.size=0,this.__data__={hash:new b4,map:new(v4||Y2),string:new b4}},w4.prototype.delete=function(e){var t=C4(this,e).delete(e);return this.size-=t?1:0,t},w4.prototype.get=function(e){return C4(this,e).get(e)},w4.prototype.has=function(e){return C4(this,e).has(e)},w4.prototype.set=function(e,t){var n=C4(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function T4(e){var t=this.__data__=new Y2(e);this.size=t.size}T4.prototype.clear=function(){this.__data__=new Y2,this.size=0},T4.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},T4.prototype.get=function(e){return this.__data__.get(e)},T4.prototype.has=function(e){return this.__data__.has(e)},T4.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Y2){var r=n.__data__;if(!v4||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new w4(r)}return n.set(e,t),this.size=n.size,this};var S4=function(){try{var e=g4(Object,"defineProperty");return e({},"",{}),e}catch(Wh){}}();function k4(e,t,n){"__proto__"==t&&S4?S4(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function _4(e,t,n){(void 0!==n&&!j2(e[t],n)||void 0===n&&!(t in e))&&k4(e,t,n)}var A4,O4=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),o=a.length;o--;){var s=a[A4?o:++r];if(!1===t(i[s],s,i))break}return e},I4="object"==typeof exports&&exports&&!exports.nodeType&&exports,M4=I4&&"object"==typeof module&&module&&!module.nodeType&&module,N4=M4&&M4.exports===I4?W2.Buffer:void 0,F4=N4?N4.allocUnsafe:void 0;var L4=W2.Uint8Array;function P4(e,t){var n,r,i=t?(n=e.buffer,r=new n.constructor(n.byteLength),new L4(r).set(new L4(n)),r):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var R4=Object.create,D4=function(){function e(){}return function(t){if(!n4(t))return{};if(R4)return R4(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function B4(e,t){return function(n){return e(t(n))}}var z4=B4(Object.getPrototypeOf,Object),H4=Object.prototype;function j4(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||H4)}function G4(e){return null!=e&&"object"==typeof e}function $4(e){return G4(e)&&"[object Arguments]"==t4(e)}var Y4=Object.prototype,U4=Y4.hasOwnProperty,V4=Y4.propertyIsEnumerable,W4=$4(function(){return arguments}())?$4:function(e){return G4(e)&&U4.call(e,"callee")&&!V4.call(e,"callee")},X4=Array.isArray;function q4(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function K4(e){return null!=e&&q4(e.length)&&!r4(e)}var Q4="object"==typeof exports&&exports&&!exports.nodeType&&exports,Z4=Q4&&"object"==typeof module&&module&&!module.nodeType&&module,J4=Z4&&Z4.exports===Q4?W2.Buffer:void 0,e8=(J4?J4.isBuffer:void 0)||function(){return!1},t8=Function.prototype,n8=Object.prototype,r8=t8.toString,i8=n8.hasOwnProperty,a8=r8.call(Object);var o8={};o8["[object Float32Array]"]=o8["[object Float64Array]"]=o8["[object Int8Array]"]=o8["[object Int16Array]"]=o8["[object Int32Array]"]=o8["[object Uint8Array]"]=o8["[object Uint8ClampedArray]"]=o8["[object Uint16Array]"]=o8["[object Uint32Array]"]=!0,o8["[object Arguments]"]=o8["[object Array]"]=o8["[object ArrayBuffer]"]=o8["[object Boolean]"]=o8["[object DataView]"]=o8["[object Date]"]=o8["[object Error]"]=o8["[object Function]"]=o8["[object Map]"]=o8["[object Number]"]=o8["[object Object]"]=o8["[object RegExp]"]=o8["[object Set]"]=o8["[object String]"]=o8["[object WeakMap]"]=!1;var s8,l8="object"==typeof exports&&exports&&!exports.nodeType&&exports,c8=l8&&"object"==typeof module&&module&&!module.nodeType&&module,u8=c8&&c8.exports===l8&&U2.process,h8=function(){try{var e=c8&&c8.require&&c8.require("util").types;return e||u8&&u8.binding&&u8.binding("util")}catch(Wh){}}(),p8=h8&&h8.isTypedArray,d8=p8?(s8=p8,function(e){return s8(e)}):function(e){return G4(e)&&q4(e.length)&&!!o8[t4(e)]};function f8(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var m8=Object.prototype.hasOwnProperty;function g8(e,t,n){var r=e[t];m8.call(e,t)&&j2(r,n)&&(void 0!==n||t in e)||k4(e,t,n)}var v8=/^(?:0|[1-9]\d*)$/;function y8(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&v8.test(e))&&e>-1&&e%1==0&&e<t}var x8=Object.prototype.hasOwnProperty;function E8(e,t){var n=X4(e),r=!n&&W4(e),i=!n&&!r&&e8(e),a=!n&&!r&&!i&&d8(e),o=n||r||i||a,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!x8.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||y8(c,l))||s.push(c);return s}var b8=Object.prototype.hasOwnProperty;function C8(e){if(!n4(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=j4(e),n=[];for(var r in e)("constructor"!=r||!t&&b8.call(e,r))&&n.push(r);return n}function w8(e){return K4(e)?E8(e,!0):C8(e)}function T8(e){return function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?k4(n,s,l):g8(n,s,l)}return n}(e,w8(e))}function S8(e,t,n,r,i,a,o){var s=f8(e,n),l=f8(t,n),c=o.get(l);if(c)_4(e,n,c);else{var u=a?a(s,l,n+"",e,t,o):void 0,h=void 0===u;if(h){var p=X4(l),d=!p&&e8(l),f=!p&&!d&&d8(l);u=l,p||d||f?X4(s)?u=s:!function(e){return G4(e)&&K4(e)}(s)?d?(h=!1,u=function(e,t){if(t)return e.slice();var n=e.length,r=F4?F4(n):new e.constructor(n);return e.copy(r),r}(l,!0)):f?(h=!1,u=P4(l,!0)):u=[]:u=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):function(e){if(!G4(e)||"[object Object]"!=t4(e))return!1;var t=z4(e);if(null===t)return!0;var n=i8.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&r8.call(n)==a8}(l)||W4(l)?(u=s,W4(s)?u=T8(s):n4(s)&&!r4(s)||(u=function(e){return"function"!=typeof e.constructor||j4(e)?{}:D4(z4(e))}(l))):h=!1}h&&(o.set(l,u),i(u,l,r,a,o),o.delete(l)),_4(e,n,u)}}function k8(e,t,n,r,i){e!==t&&O4(t,(function(a,o){if(i||(i=new T4),n4(a))S8(e,t,o,n,k8,r,i);else{var s=r?r(f8(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),_4(e,o,s)}}),w8)}function _8(e){return e}function A8(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var O8=Math.max;function I8(e){return function(){return e}}var M8=S4?function(e,t){return S4(e,"toString",{configurable:!0,enumerable:!1,value:I8(t),writable:!0})}:_8,N8=Date.now;var F8=function(e){var t=0,n=0;return function(){var r=N8(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(M8);function L8(e,t){return F8(function(e,t,n){return t=O8(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=O8(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),A8(e,this,s)}}(e,t,_8),e+"")}var P8,R8=(P8=function(e,t,n){k8(e,t,n)},L8((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=P8.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!n4(n))return!1;var r=typeof t;return!!("number"==r?K4(n)&&y8(t,n.length):"string"==r&&t in n)&&j2(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&P8(e,o,n,i)}return e}))),D8=function(e){var t=e.zDepth,n=e.radius,r=e.background,i=e.children,a=e.styles,o=b2(R8({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},void 0===a?{}:a),{"zDepth-1":1===t});return d.createElement("div",{style:o.wrap},d.createElement("div",{style:o.bg}),d.createElement("div",{style:o.content},i))};D8.propTypes={background:ee.string,zDepth:ee.oneOf([0,1,2,3,4,5]),radius:ee.number,styles:ee.object},D8.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var B8=function(){return W2.Date.now()},z8=/\s/;var H8=/^\s+/;function j8(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&z8.test(e.charAt(t)););return t}(e)+1).replace(H8,""):e}function G8(e){return"symbol"==typeof e||G4(e)&&"[object Symbol]"==t4(e)}var $8=/^[-+]0x[0-9a-f]+$/i,Y8=/^0b[01]+$/i,U8=/^0o[0-7]+$/i,V8=parseInt;function W8(e){if("number"==typeof e)return e;if(G8(e))return NaN;if(n4(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n4(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=j8(e);var n=Y8.test(e);return n||U8.test(e)?V8(e.slice(2),n?2:8):$8.test(e)?NaN:+e}var X8=Math.max,q8=Math.min;function K8(e,t,n){var r,i,a,o,s,l,c=0,u=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function f(e){return c=e,s=setTimeout(g,t),u?d(e):o}function m(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=a}function g(){var e=B8();if(m(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-l);return h?q8(n,a-(e-c)):n}(e))}function v(e){return s=void 0,p&&r?d(e):(r=i=void 0,o)}function y(){var e=B8(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return f(l);if(h)return clearTimeout(s),s=setTimeout(g,t),d(l)}return void 0===s&&(s=setTimeout(g,t)),o}return t=W8(t)||0,n4(n)&&(u=!!n.leading,a=(h="maxWait"in n)?X8(W8(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?o:v(B8())},y}var Q8=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Z8=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,a=r.height,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),c<0?c=0:c>a&&(c=a);var u=l/i,h=1-c/a;return{h:t.h,s:u,v:h,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return n4(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),K8(e,t,{leading:r,maxWait:t,trailing:i})}((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.exports.PureComponent||f.exports.Component),Q8(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,i=t.black,a=t.pointer,o=t.circle,s=b2({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:i,pointer:a,circle:o}},{custom:!!this.props.style});return d.createElement("div",{style:s.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),d.createElement("div",{style:s.white,className:"saturation-white"},d.createElement("div",{style:s.black,className:"saturation-black"}),d.createElement("div",{style:s.pointer},this.props.pointer?d.createElement(this.props.pointer,this.props):d.createElement("div",{style:s.circle}))))}}]),t}();function J8(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var e6=B4(Object.keys,Object),t6=Object.prototype.hasOwnProperty;function n6(e){return K4(e)?E8(e):function(e){if(!j4(e))return e6(e);var t=[];for(var n in Object(e))t6.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var r6=function(e,t){return function(n,r){if(null==n)return n;if(!K4(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}((function(e,t){return e&&O4(e,t,n6)}));function i6(e,t){return(X4(e)?J8:r6)(e,function(e){return"function"==typeof e?e:_8}(t))}var a6={exports:{}};!function(e){!function(t){var n=/^\s+/,r=/\s+$/,i=0,a=t.round,o=t.min,s=t.max,l=t.random;function c(e,l){if(l=l||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,l);var u=function(e){var i={r:0,g:0,b:0},a=1,l=null,c=null,u=null,h=!1,p=!1;"string"==typeof e&&(e=function(e){e=e.replace(n,"").replace(r,"").toLowerCase();var t,i=!1;if(_[e])e=_[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=H.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=H.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=H.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=H.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=H.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=H.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=H.hex8.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),a:R(t[4]),format:i?"name":"hex8"};if(t=H.hex6.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),format:i?"name":"hex"};if(t=H.hex4.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),a:R(t[4]+""+t[4]),format:i?"name":"hex8"};if(t=H.hex3.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),format:i?"name":"hex"};return!1}(e));"object"==typeof e&&(j(e.r)&&j(e.g)&&j(e.b)?(d=e.r,f=e.g,m=e.b,i={r:255*I(d,255),g:255*I(f,255),b:255*I(m,255)},h=!0,p="%"===String(e.r).substr(-1)?"prgb":"rgb"):j(e.h)&&j(e.s)&&j(e.v)?(l=L(e.s),c=L(e.v),i=function(e,n,r){e=6*I(e,360),n=I(n,100),r=I(r,100);var i=t.floor(e),a=e-i,o=r*(1-n),s=r*(1-a*n),l=r*(1-(1-a)*n),c=i%6;return{r:255*[r,s,o,o,l,r][c],g:255*[l,r,r,s,o,o][c],b:255*[o,o,l,r,r,s][c]}}(e.h,l,c),h=!0,p="hsv"):j(e.h)&&j(e.s)&&j(e.l)&&(l=L(e.s),u=L(e.l),i=function(e,t,n){var r,i,a;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=I(e,360),t=I(t,100),n=I(n,100),0===t)r=i=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=o(l,s,e+1/3),i=o(l,s,e),a=o(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,l,u),h=!0,p="hsl"),e.hasOwnProperty("a")&&(a=e.a));var d,f,m;return a=O(a),{ok:h,format:e.format||p,r:o(255,s(i.r,0)),g:o(255,s(i.g,0)),b:o(255,s(i.b,0)),a:a}}(e);this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=a(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=u.ok,this._tc_id=i++}function u(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,a=s(e,t,n),l=o(e,t,n),c=(a+l)/2;if(a==l)r=i=0;else{var u=a-l;switch(i=c>.5?u/(2-a-l):u/(a+l),a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,l:c}}function h(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,a=s(e,t,n),l=o(e,t,n),c=a,u=a-l;if(i=0===a?0:u/a,a==l)r=0;else{switch(a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,v:c}}function p(e,t,n,r){var i=[F(a(e).toString(16)),F(a(t).toString(16)),F(a(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(e,t,n,r){return[F(P(r)),F(a(e).toString(16)),F(a(t).toString(16)),F(a(n).toString(16))].join("")}function f(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=M(n.s),c(n)}function m(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=M(n.s),c(n)}function g(e){return c(e).desaturate(100)}function v(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=M(n.l),c(n)}function y(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=s(0,o(255,n.r-a(-t/100*255))),n.g=s(0,o(255,n.g-a(-t/100*255))),n.b=s(0,o(255,n.b-a(-t/100*255))),c(n)}function x(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=M(n.l),c(n)}function E(e,t){var n=c(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,c(n)}function b(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function C(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function w(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function S(e,t,n){t=t||6,n=n||30;var r=c(e).toHsl(),i=360/n,a=[c(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(c(r));return a}function k(e,t){t=t||6;for(var n=c(e).toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/t;t--;)o.push(c({h:r,s:i,v:a})),a=(a+s)%1;return o}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,r,i=this.toRgb();return e=i.r/255,n=i.g/255,r=i.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=O(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),r=a(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),r=a(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return p(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[F(a(e).toString(16)),F(a(t).toString(16)),F(a(n).toString(16)),F(P(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*I(this._r,255))+"%",g:a(100*I(this._g,255))+"%",b:a(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*I(this._r,255))+"%, "+a(100*I(this._g,255))+"%, "+a(100*I(this._b,255))+"%)":"rgba("+a(100*I(this._r,255))+"%, "+a(100*I(this._g,255))+"%, "+a(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+d(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=c(e);n="#"+d(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(E,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:L(e[r]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(e,t,n){n=0===n?0:n||50;var r=c(e).toRgb(),i=c(t).toRgb(),a=n/100;return c({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},c.readability=function(e,n){var r=c(e),i=c(n);return(t.max(r.getLuminance(),i.getLuminance())+.05)/(t.min(r.getLuminance(),i.getLuminance())+.05)},c.isReadable=function(e,t,n){var r,i,a=c.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},c.mostReadable=function(e,t,n){var r,i,a,o,s=null,l=0;i=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var u=0;u<t.length;u++)(r=c.readability(e,t[u]))>l&&(l=r,s=c(t[u]));return c.isReadable(e,s,{level:a,size:o})||!i?s:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var _=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(_);function O(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function I(e,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=o(n,s(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function M(e){return o(1,s(0,e))}function N(e){return parseInt(e,16)}function F(e){return 1==e.length?"0"+e:""+e}function L(e){return e<=1&&(e=100*e+"%"),e}function P(e){return t.round(255*parseFloat(e)).toString(16)}function R(e){return N(e)/255}var D,B,z,H=(B="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",z="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+B),rgba:new RegExp("rgba"+z),hsl:new RegExp("hsl"+B),hsla:new RegExp("hsla"+z),hsv:new RegExp("hsv"+B),hsva:new RegExp("hsva"+z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function j(e){return!!H.CSS_UNIT.exec(e)}e.exports?e.exports=c:window.tinycolor=c}(Math)}(a6);var o6=a6.exports,s6=function(e){var t=0,n=0;return i6(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e},l6=function(e,t){var n=e.hex?o6(e.hex):o6(e),r=n.toHsl(),i=n.toHsv(),a=n.toRgb(),o=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===o&&0===a.a?"transparent":"#"+o,rgb:a,hsv:i,oldHue:e.h||t||r.h,source:e.source}},c6=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&o6(e).isValid()},u6=function(e){if(!e)return"#fff";var t=l6(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},h6=function(e,t){var n=e.replace("°","");return o6(t+" ("+n+")")._ok},p6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d6=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var f6=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(s6(e)){var r=l6(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(s6(e)){var r=l6(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=p6({},l6(e.color,0)),t.debounce=K8((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,f.exports.PureComponent||f.exports.Component),d6(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),d.createElement(e,p6({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return p6({},l6(e.color,t.oldHue))}}]),n}();return t.propTypes=p6({},e.propTypes),t.defaultProps=p6({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},m6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g6=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function v6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y6(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x6(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b6=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;v6(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n=y6(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(a))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},y6(n,t)}return x6(r,d.Component),g6(r,[{key:"render",value:function(){return d.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},d.createElement(e,m6({},this.props,this.state)))}}]),r}()}((function(e){var t=e.color,n=e.style,r=e.onClick,i=void 0===r?function(){}:r,a=e.onHover,o=e.title,s=void 0===o?t:o,l=e.children,c=e.focus,u=e.focusStyle,h="transparent"===t,p=b2({default:{swatch:E6({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,c?void 0===u?{}:u:{})}}),f={};return a&&(f.onMouseOver=function(e){return a(t,e)}),d.createElement("div",E6({style:p.swatch,onClick:function(e){return i(t,e)},title:s,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&i(t,e)}},f),l,h&&d.createElement(k2,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))})),C6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w6=function(e){var t=e.rgb,n=e.hsl,r=e.width,i=e.height,a=e.onChange,o=e.direction,s=e.style,l=e.renderers,c=e.pointer,u=e.className,h=void 0===u?"":u,p=b2({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:s}}});return d.createElement("div",{style:p.picker,className:"alpha-picker "+h},d.createElement(M2,C6({},p.alpha,{rgb:t,hsl:n,pointer:c,renderers:l,onChange:a,direction:o})))};function T6(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}w6.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=b2({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return d.createElement("div",{style:n.picker})}},f6(w6);function S6(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new w4;++t<n;)this.add(e[t])}function k6(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}S6.prototype.add=S6.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},S6.prototype.has=function(e){return this.__data__.has(e)};function _6(e,t,n,r,i,a){var o=1&n,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var h=-1,p=!0,d=2&n?new S6:void 0;for(a.set(e,t),a.set(t,e);++h<s;){var f=e[h],m=t[h];if(r)var g=o?r(m,f,h,t,e,a):r(f,m,h,e,t,a);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!k6(t,(function(e,t){if(o=t,!d.has(o)&&(f===e||i(f,e,n,r,a)))return d.push(t);var o}))){p=!1;break}}else if(f!==m&&!i(f,m,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function A6(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function O6(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var I6=X2?X2.prototype:void 0,M6=I6?I6.valueOf:void 0;var N6=Object.prototype.propertyIsEnumerable,F6=Object.getOwnPropertySymbols,L6=F6?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(F6(e),(function(t){return N6.call(e,t)})))}:function(){return[]};function P6(e){return function(e,t,n){var r=t(e);return X4(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,n6,L6)}var R6=Object.prototype.hasOwnProperty;var D6=g4(W2,"DataView"),B6=g4(W2,"Promise"),z6=g4(W2,"Set"),H6=g4(W2,"WeakMap"),j6=l4(D6),G6=l4(v4),$6=l4(B6),Y6=l4(z6),U6=l4(H6),V6=t4;(D6&&"[object DataView]"!=V6(new D6(new ArrayBuffer(1)))||v4&&"[object Map]"!=V6(new v4)||B6&&"[object Promise]"!=V6(B6.resolve())||z6&&"[object Set]"!=V6(new z6)||H6&&"[object WeakMap]"!=V6(new H6))&&(V6=function(e){var t=t4(e),n="[object Object]"==t?e.constructor:void 0,r=n?l4(n):"";if(r)switch(r){case j6:return"[object DataView]";case G6:return"[object Map]";case $6:return"[object Promise]";case Y6:return"[object Set]";case U6:return"[object WeakMap]"}return t});var W6=V6,X6="[object Object]",q6=Object.prototype.hasOwnProperty;function K6(e,t,n,r,i,a){var o=X4(e),s=X4(t),l=o?"[object Array]":W6(e),c=s?"[object Array]":W6(t),u=(l="[object Arguments]"==l?X6:l)==X6,h=(c="[object Arguments]"==c?X6:c)==X6,p=l==c;if(p&&e8(e)){if(!e8(t))return!1;o=!0,u=!1}if(p&&!u)return a||(a=new T4),o||d8(e)?_6(e,t,n,r,i,a):function(e,t,n,r,i,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new L4(e),new L4(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return j2(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=A6;case"[object Set]":var l=1&r;if(s||(s=O6),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=_6(s(e),s(t),r,i,a,o);return o.delete(e),u;case"[object Symbol]":if(M6)return M6.call(e)==M6.call(t)}return!1}(e,t,l,n,r,i,a);if(!(1&n)){var d=u&&q6.call(e,"__wrapped__"),f=h&&q6.call(t,"__wrapped__");if(d||f){var m=d?e.value():e,g=f?t.value():t;return a||(a=new T4),i(m,g,n,r,a)}}return!!p&&(a||(a=new T4),function(e,t,n,r,i,a){var o=1&n,s=P6(e),l=s.length;if(l!=P6(t).length&&!o)return!1;for(var c=l;c--;){var u=s[c];if(!(o?u in t:R6.call(t,u)))return!1}var h=a.get(e),p=a.get(t);if(h&&p)return h==t&&p==e;var d=!0;a.set(e,t),a.set(t,e);for(var f=o;++c<l;){var m=e[u=s[c]],g=t[u];if(r)var v=o?r(g,m,u,t,e,a):r(m,g,u,e,t,a);if(!(void 0===v?m===g||i(m,g,n,r,a):v)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var y=e.constructor,x=t.constructor;y==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x||(d=!1)}return a.delete(e),a.delete(t),d}(e,t,n,r,i,a))}function Q6(e,t,n,r,i){return e===t||(null==e||null==t||!G4(e)&&!G4(t)?e!=e&&t!=t:K6(e,t,n,r,Q6,i))}function Z6(e){return e==e&&!n4(e)}function J6(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function e3(e){var t=function(e){for(var t=n6(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Z6(i)]}return t}(e);return 1==t.length&&t[0][2]?J6(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=n[i])[0],c=e[l],u=s[1];if(o&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new T4;if(r)var p=r(c,u,l,e,t,h);if(!(void 0===p?Q6(u,c,3,r,h):p))return!1}}return!0}(n,e,t)}}var t3=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n3=/^\w*$/;function r3(e,t){if(X4(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!G8(e))||(n3.test(e)||!t3.test(e)||null!=t&&e in Object(t))}function i3(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i3.Cache||w4),n}i3.Cache=w4;var a3=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o3=/\\(\\)?/g,s3=function(e){var t=i3(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a3,(function(e,n,r,i){t.push(r?i.replace(o3,"$1"):n||e)})),t})),l3=X2?X2.prototype:void 0,c3=l3?l3.toString:void 0;function u3(e){if("string"==typeof e)return e;if(X4(e))return T6(e,u3)+"";if(G8(e))return c3?c3.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function h3(e,t){return X4(e)?e:r3(e,t)?[e]:s3(function(e){return null==e?"":u3(e)}(e))}function p3(e){if("string"==typeof e||G8(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function d3(e,t){for(var n=0,r=(t=h3(t,e)).length;null!=e&&n<r;)e=e[p3(t[n++])];return n&&n==r?e:void 0}function f3(e,t){return null!=e&&t in Object(e)}function m3(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=h3(t,e)).length,a=!1;++r<i;){var o=p3(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&q4(i)&&y8(o,i)&&(X4(e)||W4(e))}(e,t,f3)}function g3(e,t){return r3(e)&&Z6(t)?J6(p3(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:d3(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?m3(n,e):Q6(t,r,3)}}function v3(e){return r3(e)?(t=p3(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return d3(t,e)}}(e);var t}function y3(e,t){var n=-1,r=K4(e)?Array(e.length):[];return r6(e,(function(e,i,a){r[++n]=t(e,i,a)})),r}function x3(e,t){return(X4(e)?T6:y3)(e,function(e){return"function"==typeof e?e:null==e?_8:"object"==typeof e?X4(e)?g3(e[0],e[1]):e3(e):v3(e)}(t))}var E3=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,i=b2({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return d.createElement("div",{style:i.swatches},x3(t,(function(e){return d.createElement(b6,{key:e,color:e,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),d.createElement("div",{style:i.clear}))},b3=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,a=e.width,o=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h="transparent"===r,p=function(e,n){c6(e)&&t({hex:e,source:"hex"},n)},f=b2(R8({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:u6(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},l),{"hide-triangle":"hide"===o});return d.createElement("div",{style:f.card,className:"block-picker "+u},d.createElement("div",{style:f.triangle}),d.createElement("div",{style:f.head},h&&d.createElement(k2,{borderRadius:"6px 6px 0 0"}),d.createElement("div",{style:f.label},r)),d.createElement("div",{style:f.body},d.createElement(E3,{colors:i,onClick:p,onSwatchHover:n}),d.createElement(P2,{style:{input:f.input},value:r,onChange:p})))};b3.propTypes={width:ee.oneOfType([ee.string,ee.number]),colors:ee.arrayOf(ee.string),triangle:ee.oneOf(["top","hide"]),styles:ee.object},b3.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},f6(b3);var C3="#ffcdd2",w3="#e57373",T3="#f44336",S3="#d32f2f",k3="#b71c1c",_3="#f8bbd0",A3="#f06292",O3="#e91e63",I3="#c2185b",M3="#880e4f",N3="#e1bee7",F3="#ba68c8",L3="#9c27b0",P3="#7b1fa2",R3="#4a148c",D3="#d1c4e9",B3="#9575cd",z3="#673ab7",H3="#512da8",j3="#311b92",G3="#c5cae9",$3="#7986cb",Y3="#3f51b5",U3="#303f9f",V3="#1a237e",W3="#bbdefb",X3="#64b5f6",q3="#2196f3",K3="#1976d2",Q3="#0d47a1",Z3="#b3e5fc",J3="#4fc3f7",e7="#03a9f4",t7="#0288d1",n7="#01579b",r7="#b2ebf2",i7="#4dd0e1",a7="#00bcd4",o7="#0097a7",s7="#006064",l7="#b2dfdb",c7="#4db6ac",u7="#009688",h7="#00796b",p7="#004d40",d7="#c8e6c9",f7="#81c784",m7="#4caf50",g7="#388e3c",v7="#dcedc8",y7="#aed581",x7="#8bc34a",E7="#689f38",b7="#33691e",C7="#f0f4c3",w7="#dce775",T7="#cddc39",S7="#afb42b",k7="#827717",_7="#fff9c4",A7="#fff176",O7="#ffeb3b",I7="#fbc02d",M7="#f57f17",N7="#ffecb3",F7="#ffd54f",L7="#ffc107",P7="#ffa000",R7="#ff6f00",D7="#ffe0b2",B7="#ffb74d",z7="#ff9800",H7="#f57c00",j7="#e65100",G7="#ffccbc",$7="#ff8a65",Y7="#ff5722",U7="#e64a19",V7="#bf360c",W7="#d7ccc8",X7="#a1887f",q7="#795548",K7="#5d4037",Q7="#3e2723",Z7="#cfd8dc",J7="#90a4ae",eee="#607d8b",tee="#455a64",nee="#263238",ree=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,i=e.hover,a=e.active,o=e.circleSize,s=e.circleSpacing,l=b2({default:{swatch:{width:o,height:o,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:a});return d.createElement("div",{style:l.swatch},d.createElement(b6,{style:l.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+t}}))};ree.defaultProps={circleSize:28,circleSpacing:14};var iee=x2(ree),aee=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,i=e.colors,a=e.hex,o=e.circleSize,s=e.styles,l=void 0===s?{}:s,c=e.circleSpacing,u=e.className,h=void 0===u?"":u,p=b2(R8({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},l)),f=function(e,t){return n({hex:e,source:"hex"},t)};return d.createElement("div",{style:p.card,className:"circle-picker "+h},x3(i,(function(e){return d.createElement(iee,{key:e,color:e,onClick:f,onSwatchHover:r,active:a===e.toLowerCase(),circleSize:o,circleSpacing:c})})))};function oee(e){return void 0===e}aee.propTypes={width:ee.oneOfType([ee.string,ee.number]),circleSize:ee.number,circleSpacing:ee.number,styles:ee.object},aee.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[T3,O3,L3,z3,Y3,q3,e7,a7,u7,m7,x7,T7,O7,L7,z7,Y7,q7,eee],styles:{}},f6(aee);var see={};Object.defineProperty(see,"__esModule",{value:!0});var lee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cee=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);var uee=see.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,a=e.height,o=void 0===a?24:a,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return cee.default.createElement("svg",lee({viewBox:"0 0 24 24",style:lee({fill:n,width:i,height:o},l)},c),cee.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},hee=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var pee=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?c6(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(oee(e.s)?n.props.hsl.s:e.s),l:Number(oee(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),hee(t,[{key:"render",value:function(){var e=this,t=b2({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=d.createElement("div",{style:t.fields,className:"flexbox-fix"},d.createElement("div",{style:t.field},d.createElement(P2,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=d.createElement("div",{style:t.fields,className:"flexbox-fix"},d.createElement("div",{style:t.field},d.createElement(P2,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(P2,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(P2,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),d.createElement("div",{style:t.alpha},d.createElement(P2,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=d.createElement("div",{style:t.fields,className:"flexbox-fix"},d.createElement("div",{style:t.field},d.createElement(P2,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(P2,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),d.createElement("div",{style:t.field},d.createElement(P2,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),d.createElement("div",{style:t.alpha},d.createElement(P2,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),d.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,d.createElement("div",{style:t.toggle},d.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},d.createElement(uee,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}();pee.defaultProps={view:"hex"};var dee=function(){var e=b2({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return d.createElement("div",{style:e.picker})},fee=function(){var e=b2({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return d.createElement("div",{style:e.picker})},mee=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,i=e.rgb,a=e.hsl,o=e.hsv,s=e.hex,l=e.renderers,c=e.styles,u=void 0===c?{}:c,h=e.className,p=void 0===h?"":h,f=e.defaultView,m=b2(R8({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:r});return d.createElement("div",{style:m.picker,className:"chrome-picker "+p},d.createElement("div",{style:m.saturation},d.createElement(Z8,{style:m.Saturation,hsl:a,hsv:o,pointer:fee,onChange:n})),d.createElement("div",{style:m.body},d.createElement("div",{style:m.controls,className:"flexbox-fix"},d.createElement("div",{style:m.color},d.createElement("div",{style:m.swatch},d.createElement("div",{style:m.active}),d.createElement(k2,{renderers:l}))),d.createElement("div",{style:m.toggles},d.createElement("div",{style:m.hue},d.createElement(H2,{style:m.Hue,hsl:a,pointer:dee,onChange:n})),d.createElement("div",{style:m.alpha},d.createElement(M2,{style:m.Alpha,rgb:i,hsl:a,pointer:dee,renderers:l,onChange:n})))),d.createElement(pee,{rgb:i,hsl:a,hex:s,view:f,onChange:n,disableAlpha:r})))};mee.propTypes={width:ee.oneOfType([ee.string,ee.number]),disableAlpha:ee.bool,styles:ee.object,defaultView:ee.oneOf(["hex","rgb","hsl"])},mee.defaultProps={width:225,disableAlpha:!1,styles:{}},f6(mee);var gee=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,a=e.active,o=b2({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:u6(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return d.createElement(b6,{style:o.color,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},d.createElement("div",{style:o.dot}))},vee=function(e){var t=e.hex,n=e.rgb,r=e.onChange,i=b2({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return d.createElement("div",{style:i.fields,className:"flexbox-fix"},d.createElement("div",{style:i.active}),d.createElement(P2,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:a}),d.createElement(P2,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:a}),d.createElement(P2,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:a}),d.createElement(P2,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:a}))},yee=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,i=e.hex,a=e.rgb,o=e.styles,s=void 0===o?{}:o,l=e.className,c=void 0===l?"":l,u=b2(R8({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},s)),h=function(e,n){e.hex?c6(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return d.createElement(D8,{style:u.Compact,styles:s},d.createElement("div",{style:u.compact,className:"compact-picker "+c},d.createElement("div",null,x3(r,(function(e){return d.createElement(gee,{key:e,color:e,active:e.toLowerCase()===i,onClick:h,onSwatchHover:n})})),d.createElement("div",{style:u.clear})),d.createElement(vee,{hex:i,rgb:a,onChange:h})))};yee.propTypes={colors:ee.arrayOf(ee.string),styles:ee.object},yee.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},f6(yee);var xee=x2((function(e){var t=e.hover,n=e.color,r=e.onClick,i=e.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=b2({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:t});return d.createElement("div",{style:o.swatch},d.createElement(b6,{color:n,onClick:r,onHover:i,focusStyle:a}))})),Eee=function(e){var t=e.width,n=e.colors,r=e.onChange,i=e.onSwatchHover,a=e.triangle,o=e.styles,s=void 0===o?{}:o,l=e.className,c=void 0===l?"":l,u=b2(R8({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},s),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a,"bottom-left-triangle":"bottom-left"===a,"bottom-right-triangle":"bottom-right"===a}),h=function(e,t){return r({hex:e,source:"hex"},t)};return d.createElement("div",{style:u.card,className:"github-picker "+c},d.createElement("div",{style:u.triangleShadow}),d.createElement("div",{style:u.triangle}),x3(n,(function(e){return d.createElement(xee,{color:e,key:e,onClick:h,onSwatchHover:i})})))};Eee.propTypes={width:ee.oneOfType([ee.string,ee.number]),colors:ee.arrayOf(ee.string),triangle:ee.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:ee.object},Eee.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},f6(Eee);var bee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cee=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.hsl,a=e.direction,o=e.pointer,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=b2(R8({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},l));return d.createElement("div",{style:h.picker,className:"hue-picker "+u},d.createElement(H2,bee({},h.hue,{hsl:i,pointer:o,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:a})))};Cee.propTypes={styles:ee.object},Cee.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=b2({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return d.createElement("div",{style:n.picker})},styles:{}},f6(Cee);f6((function(e){var t=e.onChange,n=e.hex,r=e.rgb,i=e.styles,a=void 0===i?{}:i,o=e.className,s=void 0===o?"":o,l=b2(R8({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),c=function(e,n){e.hex?c6(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return d.createElement(D8,{styles:a},d.createElement("div",{style:l.material,className:"material-picker "+s},d.createElement(P2,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:n,onChange:c}),d.createElement("div",{style:l.split,className:"flexbox-fix"},d.createElement("div",{style:l.third},d.createElement(P2,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:r.r,onChange:c})),d.createElement("div",{style:l.third},d.createElement(P2,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:r.g,onChange:c})),d.createElement("div",{style:l.third},d.createElement(P2,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:r.b,onChange:c})))))}));var wee=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,i=e.hex,a=b2({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(e,i){e["#"]?c6(e["#"])&&t({hex:e["#"],source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},i):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},i)};return d.createElement("div",{style:a.fields},d.createElement(P2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(r.h),onChange:o}),d.createElement(P2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:o}),d.createElement(P2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:o}),d.createElement("div",{style:a.divider}),d.createElement(P2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:n.r,onChange:o}),d.createElement(P2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:n.g,onChange:o}),d.createElement(P2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:n.b,onChange:o}),d.createElement("div",{style:a.divider}),d.createElement(P2,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:i.replace("#",""),onChange:o}),d.createElement("div",{style:a.fieldSymbols},d.createElement("div",{style:a.symbol},"°"),d.createElement("div",{style:a.symbol},"%"),d.createElement("div",{style:a.symbol},"%")))},Tee=function(e){var t=e.hsl,n=b2({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return d.createElement("div",{style:n.picker})},See=function(){var e=b2({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return d.createElement("div",{style:e.pointer},d.createElement("div",{style:e.left},d.createElement("div",{style:e.leftInside})),d.createElement("div",{style:e.right},d.createElement("div",{style:e.rightInside})))},kee=function(e){var t=e.onClick,n=e.label,r=e.children,i=e.active,a=b2({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return d.createElement("div",{style:a.button,onClick:t},n||r)},_ee=function(e){var t=e.rgb,n=e.currentColor,r=b2({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return d.createElement("div",null,d.createElement("div",{style:r.label},"new"),d.createElement("div",{style:r.swatches},d.createElement("div",{style:r.new}),d.createElement("div",{style:r.current})),d.createElement("div",{style:r.label},"current"))},Aee=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Oee=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),Aee(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,i=void 0===r?"":r,a=b2(R8({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return d.createElement("div",{style:a.picker,className:"photoshop-picker "+i},d.createElement("div",{style:a.head},this.props.header),d.createElement("div",{style:a.body,className:"flexbox-fix"},d.createElement("div",{style:a.saturation},d.createElement(Z8,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Tee,onChange:this.props.onChange})),d.createElement("div",{style:a.hue},d.createElement(H2,{direction:"vertical",hsl:this.props.hsl,pointer:See,onChange:this.props.onChange})),d.createElement("div",{style:a.controls},d.createElement("div",{style:a.top,className:"flexbox-fix"},d.createElement("div",{style:a.previews},d.createElement(_ee,{rgb:this.props.rgb,currentColor:this.state.currentColor})),d.createElement("div",{style:a.actions},d.createElement(kee,{label:"OK",onClick:this.props.onAccept,active:!0}),d.createElement(kee,{label:"Cancel",onClick:this.props.onCancel}),d.createElement(wee,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}();Oee.propTypes={header:ee.string,styles:ee.object},Oee.defaultProps={header:"Color Picker",styles:{}},f6(Oee);var Iee=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,a=e.disableAlpha,o=b2({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),s=function(e,i){e.hex?c6(e.hex)&&t({hex:e.hex,source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},i):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},i))};return d.createElement("div",{style:o.fields,className:"flexbox-fix"},d.createElement("div",{style:o.double},d.createElement(P2,{style:{input:o.input,label:o.label},label:"hex",value:i.replace("#",""),onChange:s})),d.createElement("div",{style:o.single},d.createElement(P2,{style:{input:o.input,label:o.label},label:"r",value:n.r,onChange:s,dragLabel:"true",dragMax:"255"})),d.createElement("div",{style:o.single},d.createElement(P2,{style:{input:o.input,label:o.label},label:"g",value:n.g,onChange:s,dragLabel:"true",dragMax:"255"})),d.createElement("div",{style:o.single},d.createElement(P2,{style:{input:o.input,label:o.label},label:"b",value:n.b,onChange:s,dragLabel:"true",dragMax:"255"})),d.createElement("div",{style:o.alpha},d.createElement(P2,{style:{input:o.input,label:o.label},label:"a",value:Math.round(100*n.a),onChange:s,dragLabel:"true",dragMax:"100"})))},Mee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nee=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,a=b2({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),o=function(e,t){r({hex:e,source:"hex"},t)};return d.createElement("div",{style:a.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return d.createElement("div",{key:n,style:a.swatchWrap},d.createElement(b6,Mee({},t,{style:a.swatch,onClick:o,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};Nee.propTypes={colors:ee.arrayOf(ee.oneOfType([ee.string,ee.shape({color:ee.string,title:ee.string})])).isRequired};var Fee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lee=function(e){var t=e.width,n=e.rgb,r=e.hex,i=e.hsv,a=e.hsl,o=e.onChange,s=e.onSwatchHover,l=e.disableAlpha,c=e.presetColors,u=e.renderers,h=e.styles,p=void 0===h?{}:h,f=e.className,m=void 0===f?"":f,g=b2(R8({default:Fee({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:l});return d.createElement("div",{style:g.picker,className:"sketch-picker "+m},d.createElement("div",{style:g.saturation},d.createElement(Z8,{style:g.Saturation,hsl:a,hsv:i,onChange:o})),d.createElement("div",{style:g.controls,className:"flexbox-fix"},d.createElement("div",{style:g.sliders},d.createElement("div",{style:g.hue},d.createElement(H2,{style:g.Hue,hsl:a,onChange:o})),d.createElement("div",{style:g.alpha},d.createElement(M2,{style:g.Alpha,rgb:n,hsl:a,renderers:u,onChange:o}))),d.createElement("div",{style:g.color},d.createElement(k2,null),d.createElement("div",{style:g.activeColor}))),d.createElement(Iee,{rgb:n,hsl:a,hex:r,onChange:o,disableAlpha:l}),d.createElement(Nee,{colors:c,onClick:o,onSwatchHover:s}))};Lee.propTypes={disableAlpha:ee.bool,width:ee.oneOfType([ee.string,ee.number]),styles:ee.object},Lee.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};var Pee=f6(Lee),Ree=function(e){var t=e.hsl,n=e.offset,r=e.onClick,i=void 0===r?function(){}:r,a=e.active,o=e.first,s=e.last,l=b2({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:o,last:s});return d.createElement("div",{style:l.swatch,onClick:function(e){return i({h:t.h,s:.5,l:n,source:"hsl"},e)}})},Dee=function(e){var t=e.onClick,n=e.hsl,r=b2({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return d.createElement("div",{style:r.swatches},d.createElement("div",{style:r.swatch},d.createElement(Ree,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:t,first:!0})),d.createElement("div",{style:r.swatch},d.createElement(Ree,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:t})),d.createElement("div",{style:r.swatch},d.createElement(Ree,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:t})),d.createElement("div",{style:r.swatch},d.createElement(Ree,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:t})),d.createElement("div",{style:r.swatch},d.createElement(Ree,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:t,last:!0})),d.createElement("div",{style:r.clear}))},Bee=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,i=e.styles,a=void 0===i?{}:i,o=e.className,s=void 0===o?"":o,l=b2(R8({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return d.createElement("div",{style:l.wrap||{},className:"slider-picker "+s},d.createElement("div",{style:l.hue},d.createElement(H2,{style:l.Hue,hsl:t,pointer:r,onChange:n})),d.createElement("div",{style:l.swatches},d.createElement(Dee,{hsl:t,onClick:n})))};Bee.propTypes={styles:ee.object},Bee.defaultProps={pointer:function(){var e=b2({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return d.createElement("div",{style:e.picker})},styles:{}},f6(Bee);var zee={};Object.defineProperty(zee,"__esModule",{value:!0});var Hee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jee=function(e){return e&&e.__esModule?e:{default:e}}(f.exports);var Gee=zee.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,a=e.height,o=void 0===a?24:a,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return jee.default.createElement("svg",Hee({viewBox:"0 0 24 24",style:Hee({fill:n,width:i,height:o},l)},c),jee.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},$ee=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,a=e.first,o=e.last,s=e.active,l=b2({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:u6(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:o,active:s,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return d.createElement(b6,{color:t,style:l.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},d.createElement("div",{style:l.check},d.createElement(Gee,null)))},Yee=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,i=e.active,a=b2({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return d.createElement("div",{style:a.group},x3(r,(function(e,a){return d.createElement($ee,{key:e,color:e,active:e.toLowerCase()===i,first:0===a,last:a===r.length-1,onClick:t,onSwatchHover:n})})))},Uee=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.onSwatchHover,a=e.colors,o=e.hex,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=b2(R8({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},l)),p=function(e,t){return r({hex:e,source:"hex"},t)};return d.createElement("div",{style:h.picker,className:"swatches-picker "+u},d.createElement(D8,null,d.createElement("div",{style:h.overflow},d.createElement("div",{style:h.body},x3(a,(function(e){return d.createElement(Yee,{key:e.toString(),group:e,active:o,onClick:p,onSwatchHover:i})})),d.createElement("div",{style:h.clear})))))};Uee.propTypes={width:ee.oneOfType([ee.string,ee.number]),height:ee.oneOfType([ee.string,ee.number]),colors:ee.arrayOf(ee.arrayOf(ee.string)),styles:ee.object},Uee.defaultProps={width:320,height:240,colors:[[k3,S3,T3,w3,C3],[M3,I3,O3,A3,_3],[R3,P3,L3,F3,N3],[j3,H3,z3,B3,D3],[V3,U3,Y3,$3,G3],[Q3,K3,q3,X3,W3],[n7,t7,e7,J3,Z3],[s7,o7,a7,i7,r7],[p7,h7,u7,c7,l7],["#194D33",g7,m7,f7,d7],[b7,E7,x7,y7,v7],[k7,S7,T7,w7,C7],[M7,I7,O7,A7,_7],[R7,P7,L7,F7,N7],[j7,H7,z7,B7,D7],[V7,U7,Y7,$7,G7],[Q7,K7,q7,X7,W7],[nee,tee,eee,J7,Z7],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},f6(Uee);var Vee=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,a=e.width,o=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=b2(R8({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},l),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o}),p=function(e,n){c6(e)&&t({hex:e,source:"hex"},n)};return d.createElement("div",{style:h.card,className:"twitter-picker "+u},d.createElement("div",{style:h.triangleShadow}),d.createElement("div",{style:h.triangle}),d.createElement("div",{style:h.body},x3(i,(function(e,t){return d.createElement(b6,{key:t,color:e,hex:e,style:h.swatch,onClick:p,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),d.createElement("div",{style:h.hash},"#"),d.createElement(P2,{label:null,style:{input:h.input},value:r.replace("#",""),onChange:p}),d.createElement("div",{style:h.clear})))};Vee.propTypes={width:ee.oneOfType([ee.string,ee.number]),triangle:ee.oneOf(["hide","top-left","top-right"]),colors:ee.arrayOf(ee.string),styles:ee.object},Vee.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},f6(Vee);var Wee=function(e){var t=b2({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return d.createElement("div",{style:t.picker})};Wee.propTypes={hsl:ee.shape({h:ee.number,s:ee.number,l:ee.number,a:ee.number})},Wee.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Xee=function(e){var t=b2({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return d.createElement("div",{style:t.picker})};Xee.propTypes={hsl:ee.shape({h:ee.number,s:ee.number,l:ee.number,a:ee.number})},Xee.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var qee=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,a=e.hsv,o=function(e,n){if(e.hex)c6(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");h6(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var i=e.hsv.split(",");h6(e.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("°",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},n))}else if(e.hsl){var a=e.hsl.split(",");h6(e.hsl,"hsl")&&(a[2]=a[2].replace("%",""),a[1]=a[1].replace("%",""),a[0]=a[0].replace("°",""),1==u[1]?u[1]=.01:1==u[2]&&(u[2]=.01),t({h:Number(a[0]),s:Number(a[1]),v:Number(a[2]),source:"hsl"},n))}},s=b2({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),l=n.r+", "+n.g+", "+n.b,c=Math.round(r.h)+"°, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",u=Math.round(a.h)+"°, "+Math.round(100*a.s)+"%, "+Math.round(100*a.v)+"%";return d.createElement("div",{style:s.wrap,className:"flexbox-fix"},d.createElement("div",{style:s.fields},d.createElement("div",{style:s.double},d.createElement(P2,{style:{input:s.input,label:s.label},label:"hex",value:i,onChange:o})),d.createElement("div",{style:s.column},d.createElement("div",{style:s.single},d.createElement(P2,{style:{input:s.input2,label:s.label2},label:"rgb",value:l,onChange:o})),d.createElement("div",{style:s.single},d.createElement(P2,{style:{input:s.input2,label:s.label2},label:"hsv",value:u,onChange:o})),d.createElement("div",{style:s.single},d.createElement(P2,{style:{input:s.input2,label:s.label2},label:"hsl",value:c,onChange:o})))))},Kee=function(e){var t=e.width,n=e.onChange,r=e.rgb,i=e.hsl,a=e.hsv,o=e.hex,s=e.header,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p=b2(R8({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return d.createElement("div",{style:p.picker,className:"google-picker "+h},d.createElement("div",{style:p.head},s),d.createElement("div",{style:p.swatch}),d.createElement("div",{style:p.saturation},d.createElement(Z8,{hsl:i,hsv:a,pointer:Wee,onChange:n})),d.createElement("div",{style:p.body},d.createElement("div",{style:p.controls,className:"flexbox-fix"},d.createElement("div",{style:p.hue},d.createElement(H2,{style:p.Hue,hsl:i,radius:"4px",pointer:Xee,onChange:n}))),d.createElement(qee,{rgb:r,hsl:i,hex:o,hsv:a,onChange:n})))};Kee.propTypes={width:ee.oneOfType([ee.string,ee.number]),styles:ee.object,header:ee.string},Kee.defaultProps={width:652,styles:{},header:"Color picker"},f6(Kee);function Qee(e){const{value:t="#000",onChange:n}=e,[r,i]=f.exports.useState(!1),a=f.exports.useRef(null);var o,s;return o=a,s=()=>{i(!1)},f.exports.useEffect((()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&s(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[o,s]),d.createElement(Yt,{trigger:"click",placement:"left",visible:r,overlayClassName:"color-picker-popover",content:d.createElement("div",{ref:a,onMouseLeave:()=>{i(!1)}},d.createElement(Pee,{color:t,presetColors:["#FF656B","#FF8286","#CE4F52","#FF9919","#FFAE39","#CE7B00","#E6C627","#ECD245","#B99F00","#3FC453","#61D071","#2C9D3D","#9470FF","#634CD9","#51566B","#FFFFFF"],onChange:e=>{n&&n(e.hex)}}))},d.createElement("div",{style:{background:t,width:32,height:32,borderRadius:2,cursor:"pointer",border:"1px solid #d9d9d9"},onClick:()=>{i(!r)}}))}function Zee(){return d.createElement(m9,{header:"阈值"},d.createElement(Tt.List,{name:["options","thresholds","steps"]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement(Ct,{style:{width:"100%",marginBottom:10},onClick:()=>{t({value:0})}},"添加"),e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(St.Group,{key:r,compact:!0,style:{marginBottom:5}},d.createElement(Tt.Item,l(s({noStyle:!0},a),{name:[i,"color"]}),d.createElement(Qee,null)),d.createElement(Tt.Item,l(s({noStyle:!0},a),{name:[i,"value"]}),d.createElement(zt,{style:{width:430}})),d.createElement(Ct,{style:{width:50},icon:d.createElement(we,null),onClick:()=>{n(i)}}))}))))))}function Jee(){return d.createElement(d.Fragment,null,d.createElement(g9,null),d.createElement(v9,null),d.createElement(y9,null),d.createElement(b9,null),d.createElement(Zee,null))}const ete=[1,2,3,4,5,6,7,8,9,10];function tte(){const e=["custom"];return d.createElement(m9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"显示内容",name:[...e,"textMode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"valueAndName"},"名称和值"),d.createElement(Bt.Button,{value:"value"},"值")))),d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"颜色模式",name:[...e,"colorMode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"value"},"值"),d.createElement(Bt.Button,{value:"background"},"背景"))))),d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"取值计算",name:[...e,"calc"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},w.map(Jc,((e,t)=>d.createElement(Lt.Option,{key:t,value:t},e.name)))))),d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"每行最多显示",name:[...e,"colSpan"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},w.map(ete,(e=>d.createElement(Lt.Option,{key:e,value:e},e))))))),d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"标题字体大小",name:[...e,"textSize","title"]},d.createElement(zt,{placeholder:"auto",style:{width:"100%"},min:12,max:100}))),d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"值字体大小",name:[...e,"textSize","value"]},d.createElement(zt,{placeholder:"auto",style:{width:"100%"},min:12,max:100}))))))}function nte(e){const{preNamePrefix:t=[],namePrefix:n=["options","valueMappings"]}=e;return d.createElement(m9,{header:"值映射"},d.createElement(Tt.List,{name:n},((e,{add:r,remove:i})=>d.createElement(d.Fragment,null,d.createElement(Ct,{style:{width:"100%",marginBottom:10},onClick:()=>{r({type:"special",result:{color:"#000000"}})}},"添加"),w.isEmpty(e)?null:d.createElement(Ot,{gutter:10},d.createElement(It,{flex:"290px"},d.createElement(kt,{overlayInnerStyle:{width:300},title:d.createElement("div",null,d.createElement("div",null,"范围值说明: from >= value <= to"),d.createElement("div",null,"范围值默认值: from=-Infinity; to=Infinity "),d.createElement("div",null,"特殊值Null说明: 匹配值为 null 或 undefined 或 no data"))},"条件 ",d.createElement(R,null))),d.createElement(It,{flex:"210"},"显示文字"),d.createElement(It,{flex:"45"},"颜色"),d.createElement(It,{flex:"50"},"操作")),e.map((e=>{var r=e,{key:a,name:o}=r,u=c(r,["key","name"]);return d.createElement(Ot,{key:a,gutter:10,style:{marginBottom:10}},d.createElement(It,{flex:"290px"},d.createElement(Ot,{gutter:10},d.createElement(It,{flex:"80px"},d.createElement(Tt.Item,l(s({noStyle:!0},u),{name:[o,"type"]}),d.createElement(Lt,{suffixIcon:d.createElement(H,null),style:{width:80}},d.createElement(Lt.Option,{value:"special"},"固定值"),d.createElement(Lt.Option,{value:"range"},"范围值"),d.createElement(Lt.Option,{value:"specialValue"},"特殊值")))),d.createElement(It,{flex:"1"},d.createElement(Tt.Item,l(s({noStyle:!0},u),{shouldUpdate:!0}),(({getFieldValue:e})=>{const r=e([...t,...n,o,"type"]);return"special"===r?d.createElement(Tt.Item,l(s({noStyle:!0},u),{name:[o,"match","special"]}),d.createElement(zt,{style:{width:"100%"}})):"range"===r?d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,l(s({noStyle:!0},u),{name:[o,"match","from"]}),d.createElement(zt,{placeholder:"from"}))),d.createElement(It,{span:12},d.createElement(Tt.Item,l(s({noStyle:!0},u),{name:[o,"match","to"]}),d.createElement(zt,{placeholder:"to"})))):"specialValue"===r?d.createElement(Tt.Item,l(s({noStyle:!0},u),{name:[o,"match","specialValue"]}),d.createElement(Lt,{suffixIcon:d.createElement(H,null),style:{width:"100%"}},d.createElement(Lt.Option,{value:"null"},"Null"),d.createElement(Lt.Option,{value:"empty"},"Empty string"))):null}))))),d.createElement(It,{flex:"210"},d.createElement(Tt.Item,l(s({noStyle:!0},u),{name:[o,"result","text"]}),d.createElement(St,{placeholder:"可选"}))),d.createElement(It,{flex:"45"},d.createElement(Tt.Item,l(s({noStyle:!0},u),{name:[o,"result","color"]}),d.createElement(Qee,null))),d.createElement(It,{flex:"50"},d.createElement(Ct,{onClick:()=>{i(o)},icon:d.createElement(we,null)})))}))))))}function rte(){return d.createElement(d.Fragment,null,d.createElement(tte,null),d.createElement(nte,null),d.createElement(b9,null))}function ite({chartForm:e}){const t=["custom"],{state:n}=f.exports.useContext(yp);return d.createElement(m9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"显示表头",name:[...t,"showHeader"],valuePropName:"checked"},d.createElement(Dt,{size:"small"}))),d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"颜色模式",name:[...t,"colorMode"]},d.createElement(Bt.Group,{buttonStyle:"solid"},d.createElement(Bt.Button,{value:"value"},"值"),d.createElement(Bt.Button,{value:"background"},"背景"))))),d.createElement(Tt.Item,{label:"取值计算",name:[...t,"calc"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},w.map(Jc,((e,t)=>d.createElement(Lt.Option,{key:t,value:t},e.name))))),d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"显示模式",name:[...t,"displayMode"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},d.createElement(Lt.Option,{value:"seriesToRows"},"每行展示 serie 的值"),d.createElement(Lt.Option,{value:"labelsOfSeriesToRows"},"每行展示 labels 的值"),d.createElement(Lt.Option,{value:"labelValuesToRows"},"每行展示指定聚合维度的值")))),d.createElement(Tt.Item,{noStyle:!0,shouldUpdate:(e,n)=>w.get(e,[...t,"displayMode"])!==w.get(n,[...t,"displayMode"])},(({getFieldValue:e})=>"labelsOfSeriesToRows"===e([...t,"displayMode"])?d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"显示列",name:[...t,"columns"]},d.createElement(Lt,{mode:"multiple",placeholder:"默认全选",suffixIcon:d.createElement(H,null)},w.map(w.concat(n.metric,"value"),(e=>d.createElement(Lt.Option,{key:e,value:e},e)))))):"labelValuesToRows"===e([...t,"displayMode"])?d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"显示维度",name:[...t,"aggrDimension"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},w.map(n.metric,(e=>d.createElement(Lt.Option,{key:e,value:e},e)))))):null))),d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,{noStyle:!0,shouldUpdate:!0},(({getFieldValue:r})=>{const i=r([...t,"displayMode"]),a=r([...t,"columns"])?r([...t,"columns"]):w.concat(n.metric,"value"),o=r([...t,"aggrDimension"]);let s=[];return"seriesToRows"===i?s=["name","value"]:"labelsOfSeriesToRows"===i?s=a:"labelValuesToRows"===i&&(s=[o||"name","value"]),d.createElement(Tt.Item,{label:"默认排序列",name:[...t,"sortColumn"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),allowClear:!0,onChange:()=>{if(!e.getFieldValue([...t,"sortOrder"])){const t=e.getFieldValue("custom");w.set(t,"sortOrder","ascend"),e.setFieldsValue({custom:t})}}},w.map(s,(e=>d.createElement(Lt.Option,{key:e,value:e},e)))))}))),d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"默认排序顺序",name:[...t,"sortOrder"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),allowClear:!0},d.createElement(Lt.Option,{value:"ascend"},"asc"),d.createElement(Lt.Option,{value:"descend"},"desc")))))))}function ate({targets:e}){const t=["overrides"];return d.createElement(Tt.List,{name:t},((n,{add:r,remove:i})=>n.map((a=>{var o=a,{key:u,name:h}=o,p=c(o,["key","name"]);return d.createElement(m9,{key:u,isInner:!0,header:"override",extra:d.createElement(Ht,null,d.createElement($,{onClick:()=>{r({type:"special"})}}),n.length>1&&d.createElement(Y,{onClick:()=>{i(h)}}))},d.createElement(Tt.Item,l(s({label:"查询条件名称"},p),{name:[h,"matcher","value"]}),d.createElement(Lt,{suffixIcon:d.createElement(H,null),allowClear:!0},w.map(e,(e=>d.createElement(Lt.Option,{key:e.refId,value:e.refId},e.refId))))),d.createElement(nte,{preNamePrefix:t,namePrefix:[h,"properties","valueMappings"]}),d.createElement(b9,{preNamePrefix:t,namePrefix:[h,"properties","standardOptions"]}))}))))}function ote({targets:e,chartForm:t}){return d.createElement(d.Fragment,null,d.createElement(ite,{chartForm:t}),d.createElement(nte,null),d.createElement(b9,null),d.createElement(ate,{targets:e}))}function ste(){const e=["custom"];return d.createElement(m9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"取值计算",name:[...e,"calc"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},w.map(Jc,((e,t)=>d.createElement(Lt.Option,{key:t,value:t},e.name)))))),d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"图例位置",name:[...e,"legengPosition"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},nu.map((e=>d.createElement(Lt.Option,{key:e,value:e},e)))))),d.createElement(It,{span:9},d.createElement(Tt.Item,{label:"最多展示块数",name:[...e,"max"],tooltip:"超过的块数则合并展示为其他"},d.createElement(zt,{style:{width:"100%"}}))),d.createElement(It,{span:3},d.createElement(Tt.Item,{label:"环图模式",name:[...e,"donut"],valuePropName:"checked"},d.createElement(Dt,null))),d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"label是否包含名称",name:[...e,"labelWithName"],valuePropName:"checked"},d.createElement(Dt,null))))))}function lte(){return d.createElement(d.Fragment,null,d.createElement(ste,null))}function cte(){const e=["custom"];return d.createElement(m9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:10},d.createElement(It,{span:10},d.createElement(Tt.Item,{label:"取值计算",name:[...e,"calc"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},w.map(Jc,((e,t)=>d.createElement(Lt.Option,{key:t,value:t},e.name)))))),d.createElement(It,{span:10},d.createElement(Tt.Item,{label:"颜色",name:[...e,"colorRange"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),dropdownClassName:"color-scales",optionLabelProp:"label"},w.map(Qc,(e=>d.createElement(Lt.Option,{key:e.value,label:e.label,value:w.join(e.value,",")},d.createElement("span",{className:"color-scales-menu-colors"},w.map(e.value,(e=>d.createElement("span",{key:e,style:{backgroundColor:e}})))),e.label)))))),d.createElement(It,{span:4},d.createElement(Tt.Item,{label:"反转颜色",name:[...e,"reverseColorOrder"],valuePropName:"checked"},d.createElement(Dt,null)))),d.createElement(Ot,{gutter:10},d.createElement(It,{span:8},d.createElement(Tt.Item,{label:"自动 min/max 值",tooltip:"默认自动从 series 里面取 min max 值",name:[...e,"colorDomainAuto"],valuePropName:"checked"},d.createElement(Dt,null))),d.createElement(Tt.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:t})=>{if(!t([...e,"colorDomainAuto"]))return d.createElement(d.Fragment,null,d.createElement(It,{span:8},d.createElement(Tt.Item,{label:"min",name:[...e,"colorDomain",0]},d.createElement(zt,{style:{width:"100%"}}))),d.createElement(It,{span:8},d.createElement(Tt.Item,{label:"max",name:[...e,"colorDomain",1]},d.createElement(zt,{style:{width:"100%"}}))))})))))}function ute(){return d.createElement(d.Fragment,null,d.createElement(cte,null),d.createElement(b9,null))}function hte(){const e=["custom"];return d.createElement(m9,{header:"图表样式"},d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"取值计算",name:[...e,"calc"]},d.createElement(Lt,{suffixIcon:d.createElement(H,null)},w.map(Jc,((e,t)=>d.createElement(Lt.Option,{key:t,value:t},e.name)))))),d.createElement(It,{span:8},d.createElement(Tt.Item,{label:"最大值",name:[...e,"maxValue"]},d.createElement(zt,{placeholder:"auto",style:{width:"100%"}}))),d.createElement(It,{span:3},d.createElement(Tt.Item,{label:"基础颜色",name:[...e,"baseColor"]},d.createElement(Qee,null)))),d.createElement(Ot,{gutter:10},d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"序列名宽度"},d.createElement(St.Group,null,d.createElement(Tt.Item,{noStyle:!0,name:[...e,"serieWidth"]},d.createElement(zt,{style:{width:"100%"},placeholder:"auto"})),d.createElement("span",{className:"ant-input-group-addon"},"%")))),d.createElement(It,{span:12},d.createElement(Tt.Item,{label:"排序",name:[...e,"sortOrder"]},d.createElement(Lt,null,d.createElement(Lt.Option,{value:"none"},"none"),d.createElement(Lt.Option,{value:"asc"},"asc"),d.createElement(Lt.Option,{value:"desc"},"desc")))))))}function pte(){return d.createElement(d.Fragment,null,d.createElement(hte,null),d.createElement(nte,null),d.createElement(b9,null))}function dte(){const e=["custom"];return d.createElement(m9,{header:"图表样式"},d.createElement(Ot,{gutter:10},d.createElement(It,{span:3},d.createElement(Tt.Item,{label:"文字颜色",name:[...e,"textColor"]},d.createElement(Qee,null))),d.createElement(It,{span:3},d.createElement(Tt.Item,{label:"背景色",name:[...e,"bgColor"]},d.createElement(Qee,null))),d.createElement(It,{span:6},d.createElement(Tt.Item,{label:"字体大小",name:[...e,"textSize"]},d.createElement(zt,null))),d.createElement(It,{span:6},d.createElement(Tt.Item,{label:"左右对齐",name:[...e,"justifyContent"]},d.createElement(Lt,null,d.createElement(Lt.Option,{value:"unset"},"不设置"),d.createElement(Lt.Option,{value:"flexStart"},"左对齐"),d.createElement(Lt.Option,{value:"center"},"居中对齐"),d.createElement(Lt.Option,{value:"flexEnd"},"右对齐")))),d.createElement(It,{span:6},d.createElement(Tt.Item,{label:"上下对齐",name:[...e,"alignItems"]},d.createElement(Lt,null,d.createElement(Lt.Option,{value:"unset"},"不设置"),d.createElement(Lt.Option,{value:"flexStart"},"上对齐"),d.createElement(Lt.Option,{value:"center"},"居中对齐"),d.createElement(Lt.Option,{value:"flexEnd"},"下对齐"))))),d.createElement(Tt.Item,{label:"内容",tooltip:"支持 Markdown 和 HTML",name:[...e,"content"]},d.createElement(St.TextArea,{placeholder:"支持 Markdown 和 HTML"})))}function fte(){return d.createElement(d.Fragment,null,d.createElement(dte,null))}function mte({type:e,targets:t,chartForm:n}){return{timeseries:d.createElement(Jee,null),stat:d.createElement(rte,null),table:d.createElement(ote,{targets:t,chartForm:n}),pie:d.createElement(lte,null),hexbin:d.createElement(ute,null),barGauge:d.createElement(pte,null),text:d.createElement(fte,null)}[e]||`无效的图表类型 ${e}`}const gte="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split(""),vte=e=>{for(let t=0;t<gte.length;t++){const n=gte[t];if(!w.includes(e,n))return n}return"Z"},yte="ABCDEFGHIGKLMNOPQRSTUVWXYZ".split("");function xte(e){const{chartForm:t,setChangedFlag:n,initialValues:r,type:i,cluster:a,render:o,range:u,id:h}=e,[p,m]=f.exports.useState(e.variableConfigWithOptions);return eu.custom=tu[w.get(r,"type")||eu.type],w.forEach(r.targets,(e=>{w.get(e,"time.unit")&&delete e.time})),f.exports.useEffect((()=>{m(e.variableConfigWithOptions)}),[JSON.stringify(e.variableConfigWithOptions)]),d.createElement(Tt,{layout:"vertical",form:t,initialValues:w.merge({},eu,r),onValuesChange:()=>{n(w.uniqueId("xxx_"))}},d.createElement("div",{style:{height:"calc(100vh - 173px)"}},d.createElement(Ot,{gutter:20,style:{flexWrap:"nowrap",height:"100%"}},d.createElement(It,{flex:1,style:{minWidth:100}},d.createElement("div",{style:{marginBottom:10}},o(p)),"text"!==i&&d.createElement("div",{style:{height:"calc(100% - 310px)",overflowY:"auto"}},d.createElement("div",{style:{marginBottom:10}},d.createElement(Z5,{onChange:(e,t,n)=>{m(n||[])},value:p,editable:!1,cluster:a,range:u,id:h})),d.createElement(Tt.List,{name:"targets"},((e,{add:n,remove:r},{errors:i})=>d.createElement(d.Fragment,null,d.createElement(f9,null,w.map(e,(({name:n},i)=>d.createElement(m9,{header:d.createElement(Tt.Item,{noStyle:!0,shouldUpdate:!0},(({getFieldValue:e})=>e(["targets",n,"refId"])||yte[i])),key:i,extra:d.createElement("div",null,e.length>1?d.createElement(we,{style:{marginLeft:10},onClick:()=>{r(n)}}):null)},d.createElement(Tt.Item,{noStyle:!0,name:[n,"refId"]},d.createElement("div",null)),d.createElement("div",{style:{display:"flex",alignItems:"center"}},d.createElement(Tt.Item,{label:"PromQL",name:[n,"expr"],validateTrigger:["onBlur"],rules:[{required:!0,message:"请输入PromQL"}],style:{flex:1}},d.createElement(lo,{validateTrigger:["onBlur"],url:"/api/n9e/prometheus",headers:{"X-Cluster":localStorage.getItem("curCluster")||"DEFAULT",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`}}))),d.createElement(Ot,{gutter:10},d.createElement(It,{flex:"auto"},d.createElement(Tt.Item,{label:"Legend",name:[n,"legend"],tooltip:{getPopupContainer:()=>document.body,title:"Controls the name of the time series, using name or pattern. For example {{hostname}} will be replaced with label value for the label hostname."}},d.createElement(St,null))),d.createElement(It,{flex:"116px"},d.createElement(Tt.Item,{label:"时间选择",name:[n,"time"],tooltip:{getPopupContainer:()=>document.body,title:"可指定时间范围，默认为大盘全局时间范围"},normalize:e=>({start:fu(e.start)?e.start:A(e.start).format("YYYY-MM-DD HH:mm:ss"),end:fu(e.end)?e.end:A(e.end).format("YYYY-MM-DD HH:mm:ss")})},d.createElement(Au,{dateFormat:"YYYY-MM-DD HH:mm:ss",allowClear:!0,onClear:()=>{const e=t.getFieldValue("targets"),r=w.cloneDeep(e);w.set(r,[n,"time"],void 0),t.setFieldsValue({targets:r})}}))),d.createElement(It,{flex:"72px"},d.createElement(Tt.Item,{label:"Step",name:[n,"step"],tooltip:{getPopupContainer:()=>document.body,title:"可指定 step，默认为大盘全局 step"}},d.createElement(Ku,null))))))),d.createElement(Tt.ErrorList,{errors:i})),d.createElement(Ct,{style:{width:"100%",marginTop:10},onClick:()=>{n({expr:"",refId:vte(w.map(t.getFieldValue("targets"),"refId"))})}},"+ add query")))))),d.createElement(It,{flex:"600px",style:{overflowY:"auto"}},d.createElement(f9,null,d.createElement(m9,{header:"面板配置"},d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:"标题",name:"name"},d.createElement(St,null)),d.createElement(Tt.Item,{label:"下钻链接"},d.createElement(Tt.List,{name:"links"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement(Ct,{style:{width:"100%",marginBottom:10},onClick:()=>{t({})}},"添加"),e.map((e=>{var t=e,{key:r,name:i}=t,a=c(t,["key","name"]);return d.createElement(Ht,{key:r,style:{alignItems:"flex-start"}},d.createElement(Tt.Item,l(s({},a),{name:[i,"title"],rules:[{required:!0,message:"链接名称"}]}),d.createElement(St,{placeholder:"链接名称"})),d.createElement(Tt.Item,l(s({},a),{name:[i,"url"],rules:[{required:!0,message:"链接地址"}]}),d.createElement(St,{style:{width:260},placeholder:"链接地址"})),d.createElement(kt,{title:"是否新窗口打开"},d.createElement(Tt.Item,l(s({},a),{name:[i,"targetBlank"],valuePropName:"checked"}),d.createElement(Dt,null))),d.createElement(Ct,{icon:d.createElement(we,null),onClick:()=>{n(i)}}))}))))),d.createElement(Tt.Item,{label:"备注",name:"description"},d.createElement(St.TextArea,{placeholder:"支持 markdown"}))))),d.createElement(Tt.Item,{shouldUpdate:(e,t)=>!w.isEqual(e.targets,t.targets)},(({getFieldValue:e})=>d.createElement(mte,{type:i,targets:e("targets"),chartForm:t}))))))))}var Ete=J5((function(e){var t;const{t:n}=Hr(),{visible:r,variableConfigWithOptions:i,cluster:a,id:o,time:s}=e,l=w.cloneDeep(e.initialValues),[c]=Tt.useForm(),[u,h]=f.exports.useState(s),p=w.get(l,"type")||eu.type,[m,g]=f.exports.useState(p),[v,y]=f.exports.useState(null),[x,E]=f.exports.useState(w.uniqueId("xxx_")),[b,C]=f.exports.useState(c.getFieldsValue());return"hexbin"===l.type&&(null==(t=null==l?void 0:l.custom)?void 0:t.colorRange)&&w.isArray(l.custom.colorRange)&&w.set(l,"custom.colorRange",w.join(l.custom.colorRange,",")),f.exports.useEffect((()=>{C(c.getFieldsValue())}),[x]),d.createElement(Ft,{width:"100%",title:d.createElement("div",{style:{display:"flex",alignItems:"center"}},d.createElement("div",null,n(l?"编辑图表":"新建图表")),d.createElement(Ht,{style:{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"center",fontSize:12,lineHeight:"20px"}},d.createElement(Lt,{dropdownMatchSelectWidth:!1,value:m,onChange:e=>{g(e),c.setFieldsValue({custom:tu[e]}),setTimeout((()=>{E(w.uniqueId("xxx_"))}),100)}},w.map(Zc,(e=>d.createElement(Lt.Option,{value:e.type,key:e.type},e.name)))),d.createElement(Au,{dateFormat:"YYYY-MM-DD HH:mm:ss",value:u,onChange:e=>{h(e)}}),d.createElement(Ku,{onChange:e=>y(e),initialValue:v}),d.createElement(Be,{style:{fontSize:18},onClick:()=>{e.destroy()}}))),style:{top:10,padding:0},visible:r,closable:!1,footer:[d.createElement(Ct,{key:"cancel",onClick:()=>{e.destroy()}},"取消"),d.createElement(Ct,{key:"ok",type:"primary",onClick:()=>{(async()=>{c.validateFields().then((async t=>{"hexbin"===m&&w.set(t,"custom.colorRange",w.split(t.custom.colorRange,","));let n=Object.assign(t,{version:"2.0.0",type:m,layout:null==l?void 0:l.layout});l&&l.id?n.id=l.id:n.id=Kc(),e.onOK(n),e.destroy()}))})()}},"确认")],onCancel:()=>{e.destroy()},bodyStyle:{padding:"10px 24px 24px 24px"}},d.createElement(bp,null,d.createElement(xte,{chartForm:c,setChangedFlag:E,initialValues:l,type:m,variableConfigWithOptions:i,cluster:a,range:u,id:o,render:e=>d.createElement("div",{style:{height:300}},d.createElement(X5,{dashboardId:o,time:u,step:v,type:m,values:b,variableConfig:e,isPreview:!0}))})))}));const bte=ze.exports.WidthProvider(He);var Cte=d.memo((function(e){const{profile:t}=ri((e=>e.account)),n=g(),{themeMode:r}=ii.parse(n.search),{editable:i,curCluster:a,dashboard:o,range:c,step:u,variableConfig:h,panels:p,setPanels:m,onShareClick:v,onUpdated:y}=e,x=f.exports.useRef(!1),E=f.exports.useRef(!1),b=(e,n)=>{const r=w.get(t,"roles",[]),a=!w.some(r,(e=>"Guest"===e));return i||xt.warning("大盘已经被别人修改，为避免相互覆盖，请刷新大盘查看最新配置和数据"),a&&i?jo(e,n):Promise.reject()};return d.createElement("div",{className:"dashboards-panels scroll-container"},d.createElement(bte,s({layout:n9(p),onLayoutChange:e=>{if(x.current){const t=r9(i9(p,e));w.isEqual(p,t)||(m(t),E.current&&(E.current=!1,b(o.id,{configs:p9(o.configs,t)}).then((e=>{y(e)}))))}x.current=!0},onDragStop:e=>{const t=r9(i9(p,e));w.isEqual(p,t)||b(o.id,{configs:p9(o.configs,t)}).then((e=>{y(e)}))},onResizeStop:e=>{const t=r9(i9(p,e));w.isEqual(p,t)||b(o.id,{configs:p9(o.configs,t)}).then((e=>{y(e)}))}},{rowHeight:40,cols:24,useCSSTransforms:!1,draggableHandle:".dashboards-panels-item-drag-handle"}),w.map(p,(e=>d.createElement("div",{key:e.layout.i,"data-id":e.layout.i},"row"!==e.type?$c.valid(e.version)?d.createElement(X5,{themeMode:r,dashboardId:w.toString(o.id),id:e.id,time:c,step:u,type:e.type,values:e,variableConfig:h,onCloneClick:()=>{const t=function(e,t){return w.concat(e,t)}(p,l(s({},e),{id:Kc(),layout:l(s({},e.layout),{i:Kc()})}));m(t),E.current=!0},onShareClick:()=>{v(e)},onEditClick:()=>{Ete({visible:!0,variableConfigWithOptions:h,cluster:a,id:e.id,time:c,initialValues:l(s({},e),{id:e.id}),onOK:e=>{const t=c9(p,e);m(t),b(o.id,{configs:p9(o.configs,t)}).then((e=>{y(e)}))}})},onDeleteClick:()=>{Ft.confirm({title:`是否删除图表：${e.name}`,onOk:async()=>{const t=w.filter(p,(t=>t.id!==e.id));E.current=!0,m(t),b(o.id,{configs:p9(o.configs,t)}).then((e=>{y(e)}))}})}}):d.createElement("div",{className:"dashboards-panels-item-invalid"},d.createElement("div",null,d.createElement("div",null,"无效的图表配置"),d.createElement("a",{onClick:()=>{const t=w.filter(p,(t=>t.id!==e.id));E.current=!0,m(t),b(o.id,{configs:p9(o.configs,t)}).then((e=>{y(e)}))}},"删除"))):d.createElement(d9,{name:e.name,row:e,onToggle:()=>{const t=function(e,t,n){let r=w.cloneDeep(t);return r=e?s9(r,n):l9(r,n),w.find(r,{id:n.id}).collapsed=e,r}(!e.collapsed,p,w.cloneDeep(e));m(t),b(o.id,{configs:p9(o.configs,t)}).then((e=>{y(e)}))},onAddClick:()=>{Ete({visible:!0,variableConfigWithOptions:h,cluster:a,id:e.id,time:c,initialValues:{type:"timeseries",targets:[{refId:"A",expr:""}]},onOK:t=>{const n=h9(p,e.id,t);m(n),b(o.id,{configs:p9(o.configs,n)}).then((e=>{y(e)}))}})},onEditClick:e=>{const t=c9(p,e);m(t),b(o.id,{configs:p9(o.configs,t)}).then((e=>{y(e)}))},onDeleteClick:t=>{let n=w.cloneDeep(p);"self"===t?(n=s9(n,e),n=w.filter(n,(t=>t.id!==e.id))):(n=l9(n,e),n=w.filter(n,(t=>t.id!==e.id))),E.current=!0,m(n),b(o.id,{configs:p9(o.configs,n)}).then((e=>{y(e)}))}}))))))}));function wte(e){const{curCluster:t,clusters:n,setCurCluster:r,dashboard:i,setDashboard:a,refresh:o,range:c,setRange:u,step:h,setStep:p,refreshRef:m,onAddPanel:v}=e,{id:y,name:x}=i,E=C(),b=g(),T=ii.parse(b.search),{viewMode:S,themeMode:k}=T,[_,A]=f.exports.useState(!1),M=f.exports.useRef(null),N=async e=>{Ho(y,l(s({},i),{name:e})).then((()=>{a(l(s({},i),{name:e})),A(!1)}))};return d.createElement("div",{className:"dashboard-detail-header"},d.createElement("div",{className:"dashboard-detail-header-left"},d.createElement(O,{className:"back",onClick:()=>E.push("/dashboards")}),_?d.createElement(St,{ref:M,defaultValue:x,onPressEnter:e=>{N(e.target.value)}}):d.createElement("div",{className:"title"},i.name),_?d.createElement(d.Fragment,null,d.createElement(Ct,{size:"small",style:{marginRight:5,marginLeft:5},onClick:()=>A(!1)},"取消"),d.createElement(Ct,{size:"small",type:"primary",onClick:()=>{N(M.current.state.value)}},"保存")):d.createElement(Me,{className:"edit",onClick:()=>{A(!_)}})),d.createElement("div",{className:"dashboard-detail-header-right"},d.createElement(Ht,null,d.createElement("div",null,d.createElement(_t,{trigger:["click"],overlay:d.createElement(bt,null,w.map([{type:"row",name:"分组"},...Zc],(e=>d.createElement(bt.Item,{key:e.type,onClick:()=>{v(e.type)}},e.name))))},d.createElement(Ct,{type:"primary",icon:d.createElement(ep,null)},"添加图表"))),d.createElement("div",{style:{display:"flex",alignItems:"center"}},"集群：",d.createElement(_t,{overlay:d.createElement(bt,{selectedKeys:[t]},n.map((e=>d.createElement(bt.Item,{key:e,onClick:t=>{r(e),localStorage.setItem("curCluster",e),o(!0)}},e))))},d.createElement(Ct,null,t," ",d.createElement(I,null)))),d.createElement(_u,{localKey:Tte,dateFormat:"YYYY-MM-DD HH:mm:ss",refreshTooltip:`刷新间隔小于 step(${Iu(c,h)}s) 将不会更新数据`,value:c,onChange:u}),d.createElement(Ku,{onChange:e=>p(e),initialValue:h}),d.createElement(Ct,{onClick:()=>{const e=w.omit(T,["viewMode","themeMode"]);S||(e.viewMode="fullscreen"),E.replace({pathname:b.pathname,search:ii.stringify(e)}),setTimeout((()=>{window.dispatchEvent(new Event("resize"))}),500)}},"fullscreen"===S?"关闭全屏":"全屏"),"fullscreen"===S&&d.createElement(Dt,{checkedChildren:"dark",unCheckedChildren:"light",checked:"dark"===k,onChange:e=>{const t=w.omit(T,["themeMode"]);e&&(t.themeMode="dark"),E.replace({pathname:b.pathname,search:ii.stringify(t)})}}))))}const Tte="dashboard-timeRangePicker-value";function Ste(){const{search:e}=g(),t=ii.parse(e);w.get(t,"__cluster")&&localStorage.setItem("curCluster",w.get(t,"__cluster"));const n=localStorage.getItem("curCluster"),{id:r}=X(),i=f.exports.useRef(),{clusters:a}=ri((e=>e.common)),[o,c]=f.exports.useState(n||a[0]),[u,h]=f.exports.useState({create_by:"",favorite:0,id:0,name:"",tags:"",update_at:0,update_by:""}),[p,m]=f.exports.useState(),[v,y]=f.exports.useState(),[x,E]=f.exports.useState(),[b,C]=f.exports.useState([]),[T,S]=f.exports.useState(function(e,t){const n=localStorage.getItem(e);if(n)try{return JSON.parse(n)}catch(Wh){return t}return t}(Tte,{start:"now-1h",end:"now"})),[k,_]=f.exports.useState(null),[A,O]=f.exports.useState(!0);let I=f.exports.useRef();const M=()=>{zo(r).then((e=>{if(I.current=e.update_at,h(e),e.configs){const t=Ou(e.configs),n=t.var?t:l(s({},t),{var:[]});m(w.map(n.var,(e=>w.omit(e,"options")))),E(t.links),C(r9(t.panels))}}))},N=(e,t)=>{jo(e,t).then((e=>{I.current=e.update_at,M()}))};return f.exports.useEffect((()=>{M()}),[r]),je((()=>{(function(e){return Si(`/api/n9e/board/${e}/pure`,{method:yi.Get}).then((e=>e.dat))})(r).then((e=>{I.current&&e.update_at>I.current?A&&O(!1):O(!0)}))}),2e3),d.createElement(ia,{customArea:d.createElement(wte,{curCluster:o,clusters:a,setCurCluster:c,dashboard:u,setDashboard:h,refresh:e=>{e&&M()},range:T,setRange:e=>{S(e)},step:k,setStep:_,refreshRef:i,onAddPanel:e=>{if("row"===e){const e=u9(b,{type:"row",id:Kc(),name:"分组",collapsed:!0},"row");C(e),N(u.id,{configs:p9(u.configs,e)})}else Ete({visible:!0,variableConfigWithOptions:v,cluster:o,id:r,time:T,initialValues:{type:e,targets:[{refId:"A",expr:""}],custom:tu[e]},onOK:e=>{const t=u9(b,e,"chart");C(t),N(u.id,{configs:p9(u.configs,t)})}})}})},d.createElement("div",null,d.createElement("div",{className:"dashboard-detail-content"},!A&&d.createElement("div",{style:{padding:"5px 10px"}},d.createElement(Wt,{type:"warning",message:"大盘已经被别人修改，为避免相互覆盖，请刷新大盘查看最新配置和数据"})),d.createElement("div",{className:"dashboard-detail-content-header"},d.createElement("div",{className:"variable-area"},p&&d.createElement(Z5,{onChange:(e,t,n)=>{const i=Ou(u.configs);i.var=e,t&&N(r,{configs:JSON.stringify(i)}),n&&y(n)},value:p,cluster:o,range:T,id:r,onOpenFire:()=>{var e;null==(e=i.current)||e.closeRefresh()}})),d.createElement(t9,{value:x,onChange:e=>{const t=Ou(u.configs);t.links=e,N(r,{configs:JSON.stringify(t)}),E(e)}})),v&&d.createElement(Cte,{editable:A,panels:b,setPanels:C,curCluster:o,dashboard:u,range:T,step:k,variableConfig:v,onShareClick:e=>{const t={dataProps:l(s({},e),{targets:w.map(e.targets,(e=>{const t=v?j5(e.expr,v,v.length,r):e.expr;return l(s({},e),{expr:t})})),step:k,range:T}),curCluster:localStorage.getItem("curCluster")};Xu([{configs:JSON.stringify(t)}]).then((e=>{const t=e.dat;window.open("/chart/"+t)}))},onUpdated:e=>{I.current=e.update_at,M()}}))))}const kte={labelCol:{span:4},wrapperCol:{span:20}},{Option:_te}=Lt,Ate=d.forwardRef(((e,t)=>{const{t:n}=Hr(),{userId:r}=e,[i]=Tt.useForm(),[a,o]=f.exports.useState(),[u,h]=f.exports.useState(!0),[p,m]=f.exports.useState([]),[g,v]=f.exports.useState([]);f.exports.useImperativeHandle(t,(()=>({form:i}))),f.exports.useEffect((()=>{r?x(r):h(!1),y(),Si("/api/n9e/roles",{method:yi.Get}).then((e=>e&&e.dat)).then((e=>v(e)))}),[]);const y=()=>{ro().then((e=>{m(e)}))},x=e=>{(function(e){return Si(`/api/n9e/user/${e}/profile`,{method:yi.Get}).then((e=>e&&e.dat))})(e).then((e=>{let t=[];e.contacts&&Object.keys(e.contacts).forEach((n=>{let r={key:n,value:e.contacts[n]};t.push(r)})),o(Object.assign({},e,{contacts:t})),h(!1)}))};return u?null:d.createElement(Tt,l(s({},kte),{form:i,initialValues:a,preserve:!1}),!r&&d.createElement(Tt.Item,{label:n("用户名"),name:"username",rules:[{required:!0,message:n("用户名不能为空！")}]},d.createElement(St,null)),d.createElement(Tt.Item,{label:n("显示名"),name:"nickname"},d.createElement(St,null)),!r&&d.createElement(d.Fragment,null,d.createElement(Tt.Item,{name:"password",label:n("密码"),rules:[{required:!0,message:n("请输入密码!")}],hasFeedback:!0},d.createElement(St.Password,null)),d.createElement(Tt.Item,{name:"confirm",label:n("确认密码"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:n("请确认密码!")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("password")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(St.Password,null))),d.createElement(Tt.Item,{label:n("角色"),name:"roles",rules:[{required:!0,message:n("角色不能为空！")}]},d.createElement(Lt,{mode:"multiple"},g.map(((e,t)=>d.createElement(_te,{value:e.name,key:t},d.createElement("div",null,d.createElement("div",null,e.name),d.createElement("div",{style:{color:"#8c8c8c"}},e.note))))))),d.createElement(Tt.Item,{label:n("邮箱"),name:"email"},d.createElement(St,null)),d.createElement(Tt.Item,{label:n("手机"),name:"phone"},d.createElement(St,null)),d.createElement(Tt.Item,{label:n("更多联系方式")},d.createElement(Tt.List,{name:"contacts"},((e,{add:t,remove:r})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:i,name:a,fieldKey:o}=t,u=c(t,["key","name","fieldKey"]);return d.createElement(Ht,{key:i,style:{display:"flex"},align:"baseline"},d.createElement(Tt.Item,l(s({style:{width:"180px"}},u),{name:[a,"key"],fieldKey:[o,"key"],rules:[{required:!0,message:n("联系方式不能为空")}]}),d.createElement(Lt,{suffixIcon:d.createElement(H,null),placeholder:n("请选择联系方式")},p.map(((e,t)=>d.createElement(_te,{value:e.key,key:t},e.label))))),d.createElement(Tt.Item,l(s({},u),{style:{width:"170px"},name:[a,"value"],fieldKey:[o,"value"],rules:[{required:!0,message:n("值不能为空")}]}),d.createElement(St,{placeholder:n("请输入值")})),d.createElement(Y,{className:"control-icon-normal",onClick:()=>r(a)}))})),d.createElement($,{className:"control-icon-normal",onClick:()=>t()}))))))})),Ote=d.forwardRef(((e,t)=>{const{t:n}=Hr(),{teamId:r}=e,[i]=Tt.useForm(),[a,o]=f.exports.useState(),[c,u]=f.exports.useState(!0);f.exports.useImperativeHandle(t,(()=>({form:i}))),f.exports.useEffect((()=>{r?h(r):u(!1)}),[]);const h=e=>{to(e).then((e=>{o(e.user_group),u(!1)}))};return c?null:d.createElement(Tt,l(s({},kte),{form:i,initialValues:a,preserve:!1}),d.createElement(Tt.Item,{label:n("团队名称"),name:"name",rules:[{required:!0,message:n("团队名称不能为空！")}]},d.createElement(St,null)),d.createElement(Tt.Item,{label:n("备注"),name:"note"},d.createElement(St,null)))}));var Ite,Mte,Nte,Fte,Lte,Pte;(Mte=Ite||(Ite={})).User="用户",Mte.Team="团队",(Fte=Nte||(Nte={})).CreateUser="创建用户",Fte.CreateTeam="创建团队",Fte.CreateBusiness="创建业务组",Fte.AddBusinessMember="添加业务组成员",Fte.EditBusiness="编辑业务组",Fte.EditUser="编辑用户信息",Fte.EditTeam="编辑团队信息",Fte.Reset="重置密码",Fte.Disable="禁用",Fte.Undisable="启用",Fte.AddUser="添加成员",(Pte=Lte||(Lte={})).Admin="管理员",Pte.Standard="普通用户",Pte.Guest="游客";const{Option:Rte}=Lt,Dte=d.forwardRef(((e,t)=>{const{t:n}=Hr(),{businessId:r,action:i}=e,[a]=Tt.useForm(),[o,u]=f.exports.useState([]),[h,p]=f.exports.useState({label_enable:!1,label_value:"",members:[{perm_flag:!0}],name:""}),[m,g]=f.exports.useState(!0),[v,y]=f.exports.useState(!0);f.exports.useImperativeHandle(t,(()=>({form:a}))),f.exports.useEffect((()=>{r&&i===Nte.EditBusiness?x(r):g(!1)}),[]);const x=e=>{eo(e).then((e=>{p({name:e.name,label_enable:1===e.label_enable,label_value:e.label_value,members:e.user_groups.map((e=>({perm_flag:"rw"===e.perm_flag,user_group_id:e.user_group.id})))}),g(!1)}))};f.exports.useEffect((()=>{E("")}),[]);const E=e=>{Za({query:e}).then((e=>{u(e.dat)}))},b=f.exports.useCallback(U.exports.debounce(E,800),[]);return m?null:d.createElement(Tt,l(s({},kte),{form:a,initialValues:h,preserve:!1,layout:"horizontal"}),i!==Nte.AddBusinessMember&&d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("业务组名称"),name:"name",rules:[{required:!0,message:n("业务组名称不能为空！")}]},d.createElement(St,null)),d.createElement(Tt.Item,{label:n("作为标签使用"),name:"label_enable",valuePropName:"checked",tooltip:{title:"系统会自动把业务组的英文标识作为标签附到该业务组下辖监控对象的时序数据上",getPopupContainer:()=>document.body}},d.createElement(Dt,null)),d.createElement(Tt.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.label_enable!==t.label_enable},(({getFieldValue:e})=>e("label_enable")&&d.createElement(Tt.Item,{label:n("英文标识"),name:"label_value",rules:[{required:!0}],tooltip:{title:d.createElement("span",null,"尽量用英文，不能与其他业务组标识重复，系统会自动生成 ",d.createElement(Nt,{color:"purple"},"busigroup=",a.getFieldValue("label_value"))," 的标签"),getPopupContainer:()=>document.body}},d.createElement(St,{onChange:e=>{y(!v)}}))))),(i===Nte.CreateBusiness||i===Nte.AddBusinessMember)&&d.createElement(Tt.Item,{label:n("团队"),required:!0},d.createElement(Tt.List,{name:"members"},((e,{add:t,remove:r})=>d.createElement(d.Fragment,null,e.map((e=>{var t=e,{key:i,name:a,fieldKey:u}=t,h=c(t,["key","name","fieldKey"]);return d.createElement(Ht,{key:i,style:{display:"flex",marginBottom:8},align:"baseline"},d.createElement(Tt.Item,l(s({style:{width:450}},h),{name:[a,"user_group_id"],fieldKey:[u,"user_group_id"],rules:[{required:!0,message:n("业务组团队不能为空！")}]}),d.createElement(Lt,{suffixIcon:d.createElement(H,null),style:{width:"100%"},filterOption:!1,onSearch:e=>b(e),showSearch:!0,onBlur:()=>E("")},o.map((e=>d.createElement(Rte,{key:e.id,value:e.id},e.name))))),d.createElement(Tt.Item,l(s({},h),{name:[a,"perm_flag"],fieldKey:[u,"perm_flag"],valuePropName:"checked"}),d.createElement(Dt,{checkedChildren:"读写",unCheckedChildren:"只读"})),d.createElement(Y,{onClick:()=>r(a)}))})),d.createElement(Tt.Item,null,d.createElement(Ct,{type:"dashed",onClick:()=>t(),block:!0,icon:d.createElement(Ie,null)},"添加团队")))))))})),Bte=d.forwardRef(((e,t)=>{const{t:n}=Hr(),[r]=Tt.useForm();return f.exports.useImperativeHandle(t,(()=>({form:r}))),d.createElement(Tt,l(s({},kte),{form:r}),d.createElement(Tt.Item,{name:"password",label:n("密码"),rules:[{required:!0,message:n("请输入密码!")}],hasFeedback:!0},d.createElement(St.Password,null)),d.createElement(Tt.Item,{name:"confirm",label:n("确认密码"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:n("请确认密码!")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("password")!==n?Promise.reject(new Error("密码不一致!")):Promise.resolve()})]},d.createElement(St.Password,null)))}));var zte=d.forwardRef((function(e,t){var n=e,{fetchHandle:r,fetchParams:i={},needPagination:a=!0,pageSize:o,feQueryKey:u="query",feFixedKey:h="id",feQueryParams:p=[],fePaging:m=!1,autoFetch:g=!0,initFetch:v=!1,onFetchList:y,paginationProps:x}=n,E=c(n,["fetchHandle","fetchParams","needPagination","pageSize","feQueryKey","feFixedKey","feQueryParams","fePaging","autoFetch","initFetch","onFetchList","paginationProps"]);Hr();const[b,C]=f.exports.useState([]),[w,T]=f.exports.useState([]),[S,k]=f.exports.useState([]),[_,A]=f.exports.useState(!1),[O,I]=f.exports.useState(1),[M,N]=f.exports.useState(!1),[F,L]=f.exports.useState(0),[P,R]=f.exports.useState((()=>o||15)),[D,B]=f.exports.useState({});f.exports.useEffect((()=>{g&&(z(),A(!0))}),[]),f.exports.useEffect((()=>{!g&&v&&(z(),A(!0))}),[v]),f.exports.useEffect((()=>{if(_)if(m){const e=w.slice((O-1)*P,O*P);k(e),y&&y(e)}else z()}),[O,P]),f.exports.useEffect((()=>{m?(D[h]&&D[h]===i[h]?(H(b),I(1)):1===O?_&&z():I(1),B(i)):1===O?_&&z():I(1)}),[JSON.stringify(i)]);const z=async()=>{N(!0);const{success:e,dat:t}=await r(l(s({},i),{p:O,limit:P}));var n;e&&(!m&&(n=t,Array.isArray(n.list))?(C(t.list||[]),L(t.total),y&&y(t.list||[])):(C(t||[]),H(t||[]))),N(!1)},H=e=>{if(Array.isArray(e)){const t=i[u]||"",n=e.filter((e=>{let n=!1;return""!==t&&Array.isArray(p)&&0!==p.length?(p.forEach((r=>{const i=j(r,e);"string"==typeof i&&(n=n||-1!==i.indexOf(t))})),n):(n=!0,n)}));T(n),L(n.length);const r=n.slice((O-1)*P,O*P);k(r),y&&y(r)}else T([]),L(0),k([]),y&&y([])},j=(e,t)=>{const n=()=>{const n=e.indexOf("."),r=e.slice(0,n);return t[r]?j(e.slice(n+1,e.length),t[r]):""},r=()=>{let n=e.indexOf("[");if(n<=0)return"";let r=e.indexOf("]");const i=e.slice(0,n),a=t[i];if(Array.isArray(a)&&a.length){if(-1!==r){const n=e.match(/\[(\w+)\]/);if(n.length<2)return"";{const i=n[1];return a[i]?r===e.length-1?a[i]:j(e.slice(r+1,e.length),t[i]):""}}return""}return""};return-1!==e.indexOf(".")&&-1!==e.indexOf("[")?e.indexOf(".")<e.indexOf("[")?n():r():-1!==e.indexOf(".")?n():-1!==e.indexOf("[")?r():t[e]||""},G=()=>{z()};return f.exports.useImperativeHandle(t,(()=>({refreshList:G}))),d.createElement(Rt,s({dataSource:m?S:b,pagination:s({showTotal:e=>`Total ${e} items`,current:O,pageSize:P,onChange:I,total:F,showSizeChanger:!0,onShowSizeChange:(e,t)=>{R(t),I(1)}},x),loading:M},E))}));const Hte=e=>{const{t:t}=Hr(),{teamId:n,onSelect:r}=e,[i,a]=f.exports.useState(),[o,s]=f.exports.useState([]),[l,c]=f.exports.useState([]),[u,h]=f.exports.useState(""),p=[{title:t("用户名"),dataIndex:"username",ellipsis:!0},{title:t("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:t("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:t("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}];f.exports.useEffect((()=>{m()}),[]);const m=()=>{n&&to(n).then((e=>{a(e.user_group)}))};return d.createElement("div",null,d.createElement("div",null,d.createElement("span",null,t("团队名称"),"："),i&&i.name),d.createElement("div",{style:{margin:"20px 0 16px"}},o.length>0&&d.createElement("span",null,t("已选择"),o.length,t("项"),"："),l.map(((e,t)=>d.createElement(Nt,{style:{marginBottom:"4px"},closable:!0,onClose:()=>(e=>{let t=l.filter((t=>t.id!==e.id)),n=t.map((e=>e.id));c(t),s(n)})(e),key:e.id},e.username)))),d.createElement(St,{className:"searchInput",prefix:d.createElement(M,null),placeholder:t("用户名、邮箱或电话"),onPressEnter:e=>{h(e.target.value)}}),d.createElement(zte,{fetchHandle:Qa,columns:p,rowKey:"id",needPagination:!0,pageSize:5,fetchParams:{query:u},rowSelection:{preserveSelectedRowKeys:!0,selectedRowKeys:o,onChange:(e,t)=>{r(e),s(e),c(t)}}}))},jte=e=>{const{t:t}=Hr(),{visible:n,userType:r,onClose:i,action:a,userId:o,teamId:c,onSearch:u,width:h}=e,[p,m]=f.exports.useState(),g=f.exports.useRef(null),v=f.exports.useRef(null),y=f.exports.useRef(null),x="business"===r&&(a===Nte.CreateBusiness||a===Nte.AddBusinessMember||a===Nte.EditBusiness),E=(a===Nte.CreateUser||a===Nte.EditUser)&&r===Ite.User,b=(a===Nte.CreateTeam||a===Nte.EditTeam)&&r===Ite.Team,C=a===Nte.Reset,w=a===Nte.AddUser,T=async e=>{if(E){let e=g.current.form;const r=await e.validateFields();let c={};r.contacts&&r.contacts.forEach((e=>{c[e.key]=e.value}));let u=l(s({},r),{contacts:c,confirm:void 0});a===Nte.CreateUser&&(n=u,Si("/api/n9e/users",{method:yi.Post,data:n}).then((e=>e&&e.dat))).then((e=>{xt.success(t("用户创建成功")),i(!0)})),a===Nte.EditUser&&o&&function(e,t){return Si(`/api/n9e/user/${e}/profile`,{method:yi.Put,data:t}).then((e=>e&&e.dat))}(o,u).then((e=>{xt.success(t("用户信息修改成功")),i(!0)}))}var n;if(b){let n=v.current.form;const r=await n.validateFields();let o=s({},r);a===Nte.CreateTeam&&function(e){return Si("/api/n9e/user-groups",{method:yi.Post,data:e}).then((e=>e&&e.dat))}(o).then((n=>{xt.success(t("团队创建成功")),i(!0),"search"===e&&u(o.name)})),a===Nte.EditTeam&&c&&function(e,t){return Si(`/api/n9e/user-group/${e}`,{method:yi.Put,data:t}).then((e=>e&&e.dat))}(c,o).then((e=>{xt.success(t("团队信息修改成功")),i("updateName")}))}if(C&&o){let e=y.current.form;const n=await e.validateFields();let r=s({},n);(function(e,t){return Si(`/api/n9e/user/${e}/password`,{method:yi.Put,data:t}).then((e=>e&&e.dat))})(o,r).then((e=>{xt.success(t("密码重置成功")),i()}))}if(w&&c){(function(e,t){return Si(`/api/n9e/user-group/${e}/members`,{method:yi.Post,data:t}).then((e=>e&&e.dat))})(c,{ids:p}).then((e=>{xt.success(t("添加成功")),i("updateMember")}))}if(x){let e=v.current.form;const{name:n,members:r,label_enable:o,label_value:s}=await e.validateFields();let l={name:n,label_enable:o?1:0,label_value:s,members:r?r.map((({perm_flag:e,user_group_id:t})=>({user_group_id:t,perm_flag:e?"rw":"ro"}))):void 0};if(a===Nte.CreateBusiness&&function(e){return Si("/api/n9e/busi-groups",{method:yi.Post,data:e}).then((e=>e&&e.dat))}(l).then((e=>{xt.success(t("业务组创建成功")),i("create"),u(e)})),a===Nte.EditBusiness&&c&&function(e,t){return Si(`/api/n9e/busi-group/${e}`,{method:yi.Put,data:t}).then((e=>e&&e.dat))}(c,l).then((e=>{xt.success(t("业务组信息修改成功")),i("update")})),a===Nte.AddBusinessMember&&c){const e=r.map((({perm_flag:e,user_group_id:t})=>({user_group_id:t,perm_flag:e?"rw":"ro",busi_group_id:c})));(function(e,t){return Si(`/api/n9e/busi-group/${e}/members`,{method:yi.Post,data:t}).then((e=>e&&e.dat))})(c,e).then((e=>{xt.success(t("业务组成员添加成功")),i("addMember")}))}}};return d.createElement(Ft,{title:a===Nte.CreateUser?t("创建用户"):a===Nte.CreateTeam?t("创建团队"):a===Nte.CreateBusiness?t("创建业务组"):a===Nte.AddBusinessMember?t("添加业务组成员"):a===Nte.EditBusiness?t("编辑业务组"):a===Nte.EditUser?t("编辑用户信息"):a===Nte.EditTeam?t("编辑团队信息"):a===Nte.Reset?t("重置密码"):a===Nte.Disable?t("禁用"):a===Nte.Undisable?t("启用"):a===Nte.AddUser?t("添加成员"):void 0,visible:n,width:h||700,onCancel:i,destroyOnClose:!0,footer:[d.createElement(Ct,{key:"back",onClick:i},t("取消")),d.createElement(Ct,{key:"submit",type:"primary",onClick:()=>T()},t("确定")),a===Nte.CreateTeam&&d.createElement(Ct,{type:"primary",onClick:()=>T("search")},t("确定并搜索"))]},E&&d.createElement(Ate,{ref:g,userId:o}),b&&d.createElement(Ote,{ref:v,teamId:c}),x&&d.createElement(Dte,{ref:v,businessId:c,action:a}),C&&d.createElement(Bte,{ref:y,userId:o}),w&&d.createElement(Hte,{teamId:c,onSelect:e=>m(e)}))};const{confirm:Gte}=Ft,$te=()=>{const{t:e}=Hr();X();const[t,n]=f.exports.useState(Ite.Team),[r,i]=f.exports.useState(!1),[a,o]=f.exports.useState(),[s,l]=f.exports.useState(""),[c,u]=f.exports.useState(""),[h,p]=f.exports.useState(""),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState([]),[x,E]=f.exports.useState(),[b,C]=f.exports.useState([]),[w,T]=f.exports.useState(!1),[S,_]=f.exports.useState(""),[A,O]=f.exports.useState("");f.exports.useRef(null),ri((e=>e.account));const I=[...[{title:e("用户名"),dataIndex:"username",ellipsis:!0},{title:e("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:e("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:e("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}],{title:e("操作"),width:"100px",render:(t,n)=>d.createElement("a",{style:{color:"red"},onClick:()=>{let t={ids:[n.id]};Gte({title:e("是否删除该成员"),onOk:()=>{var n,r;(n=c,r=t,Si(`/api/n9e/user-group/${n}/members`,{method:yi.Delete,data:r}).then((e=>e&&e.dat))).then((t=>{xt.success(e("成员删除成功")),B("updateMember")}))},onCancel:()=>{}})}},e("删除"))}];f.exports.useEffect((()=>{N(!0)}),[]),f.exports.useEffect((()=>{c&&L(c)}),[c]);const N=(e=!1)=>{F("",e)},F=(e,t)=>{Za({query:e||""}).then((e=>{C(e.dat||[]),(!c||t)&&e.dat.length>0&&u(e.dat[0].id)}))},L=e=>{T(!0),to(e).then((e=>{E(e.user_group),g(e.users),y(e.users),T(!1)}))},P=(e,t)=>{if("team"===e)F(t);else if(t){T(!0);let e=v.filter((e=>-1!==e.username.indexOf(t)||-1!==e.nickname.indexOf(t)||-1!==e.id.toString().indexOf(t)||-1!==e.phone.indexOf(t)||-1!==e.email.indexOf(t)));g(e),T(!1)}else L(c)},D=(e,t,n)=>{u(t||""),p(n||""),o(e),i(!0)},B=(e=!1)=>{i(!1),S?P("team",S):"updateMember"!==e&&N("updateName"!==e),!c||"update"!==e&&"updateMember"!==e&&"updateName"!==e||L(c)};return d.createElement(ia,{title:e("团队管理"),icon:d.createElement(k,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{style:{display:"flex",height:"100%"}},d.createElement("div",{className:"left-tree-area"},d.createElement("div",{className:"sub-title"},e("团队列表"),d.createElement(Ct,{style:{height:"30px"},size:"small",type:"link",onClick:()=>{D(Nte.CreateTeam)}},e("新建团队"))),d.createElement("div",{style:{display:"flex",margin:"5px 0px 12px"}},d.createElement(St,{prefix:d.createElement(M,null),value:S,onChange:e=>{_(e.target.value)},placeholder:e("搜索团队名称"),onPressEnter:e=>{F(e.target.value)},onBlur:e=>{F(e.target.value)}})),d.createElement(Qt,{style:{marginBottom:"12px",flex:1,overflow:"auto"},dataSource:b,size:"small",renderItem:e=>d.createElement(Qt.Item,{key:e.id,className:c===e.id?"is-active":"",onClick:()=>u(e.id)},e.name)})),b.length>0?d.createElement("div",{className:"resource-table-content"},d.createElement(Ot,{className:"team-info"},d.createElement(It,{span:"24",style:{color:"#000",fontSize:"14px",fontWeight:"bold",display:"inline"}},x&&x.name,d.createElement(Me,{title:e("刷新"),style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>D(Nte.EditTeam,c)}),d.createElement(we,{style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>{Gte({title:e("是否删除该团队"),onOk:()=>{var t;(t=c,Si(`/api/n9e/user-group/${t}`,{method:yi.Delete}).then((e=>e&&e.dat))).then((t=>{xt.success(e("团队删除成功")),B(!0)}))},onCancel:()=>{}})}})),d.createElement(It,{style:{marginTop:"8px",color:"#666"}},e("备注"),"：",x&&x.note?x.note:"-")),d.createElement(Ot,{justify:"space-between",align:"middle"},d.createElement(It,{span:"12"},d.createElement(St,{prefix:d.createElement(M,null),value:A,className:"searchInput",onChange:e=>O(e.target.value),placeholder:e("用户名、显示名、邮箱或手机"),onPressEnter:e=>P("member",A)})),d.createElement(Ct,{type:"primary",ghost:!0,onClick:()=>{D(Nte.AddUser,c)}},e("添加成员"))),d.createElement(Rt,{rowKey:"id",columns:I,dataSource:m,loading:w})):d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(R,{style:{color:"#1473ff"}})," ",e("提示信息")),d.createElement("p",null,"没有与您相关的团队，请先 ",d.createElement("a",{onClick:()=>D(Nte.CreateTeam)},"创建团队")))),d.createElement(jte,{visible:r,action:a,width:500,userType:t,onClose:B,onSearch:e=>{_(e),P("team",e)},userId:s,teamId:c,memberId:h})))},{confirm:Yte}=Ft,Ute=()=>{const{t:e}=Hr(),[t,n]=f.exports.useState(Ite.User),[r,i]=f.exports.useState(!1),[a,o]=f.exports.useState(),[s,l]=f.exports.useState(""),[c,u]=f.exports.useState(""),[h,p]=f.exports.useState("");f.exports.useState([]),f.exports.useState([]);const[m,g]=f.exports.useState("");f.exports.useState("");const v=f.exports.useRef(null);let{profile:y}=ri((e=>e.account));const x=[...[{title:e("用户名"),dataIndex:"username",ellipsis:!0},{title:e("显示名"),dataIndex:"nickname",ellipsis:!0,render:(e,t)=>t.nickname||"-"},{title:e("邮箱"),dataIndex:"email",render:(e,t)=>t.email||"-"},{title:e("手机"),dataIndex:"phone",render:(e,t)=>t.phone||"-"}],{title:e("角色"),dataIndex:"roles",render:(e,t)=>e.join(", ")},{title:e("操作"),width:"240px",render:(t,n)=>d.createElement(d.Fragment,null,d.createElement(Ct,{className:"oper-name",type:"link",onClick:()=>E(Nte.EditUser,n.id)},e("编辑")),d.createElement(Ct,{className:"oper-name",type:"link",onClick:()=>E(Nte.Reset,n.id)},e("重置密码")),d.createElement("a",{style:{color:"red",marginLeft:"16px"},onClick:()=>{Yte({title:e("是否删除该用户"),onOk:()=>{var t;(t=n.id,Si(`/api/n9e/user/${t}`,{method:yi.Delete}).then((e=>e&&e.dat))).then((t=>{xt.success(e("用户删除成功")),b()}))},onCancel:()=>{}})}},e("删除")))}];y.roles.includes("Admin")||x.pop();const E=(e,n,r)=>{n?t===Ite.User?l(n):u(n):t===Ite.User?l(""):u(""),p(r||""),o(e),i(!0)},b=()=>{i(!1),v.current.refreshList()};return d.createElement(ia,{title:e("用户管理"),icon:d.createElement(k,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{className:"user-content"},d.createElement(Ot,{className:"event-table-search"},d.createElement("div",{className:"event-table-search-left"},d.createElement(St,{className:"searchInput",prefix:d.createElement(M,null),onPressEnter:e=>{let t=e.target.value;g(t)},placeholder:e("用户名、邮箱或手机")})),d.createElement("div",{className:"event-table-search-right"},t===Ite.User&&y.roles.includes("Admin")&&d.createElement("div",{className:"user-manage-operate"},d.createElement(Ct,{type:"primary",onClick:()=>E(t===Ite.User?Nte.CreateUser:e("创建团队")),ghost:!0},e("创建用户"))))),d.createElement(zte,{ref:v,fetchHandle:Qa,columns:x,rowKey:"id",needPagination:!0,fetchParams:{query:m}})),d.createElement(jte,{visible:r,action:a,width:t===Ite.User?500:700,userType:t,onClose:b,userId:s,teamId:c,memberId:h})))};const{confirm:Vte}=Ft,Wte=()=>{const{t:e}=Hr(),t=vi().get("id"),[n,r]=f.exports.useState(!1),[i,a]=f.exports.useState(),[o,s]=f.exports.useState(t||""),[l,c]=f.exports.useState(""),[u,h]=f.exports.useState([]);f.exports.useState(0),f.exports.useState([]);const[p,m]=f.exports.useState(),[g,v]=f.exports.useState([]);f.exports.useState("");const[y,x]=f.exports.useState(!1),[E,b]=f.exports.useState(""),[C,w]=f.exports.useState("");f.exports.useRef(null),ri((e=>e.account));const T=Jr(),S=[{title:e("团队名称"),dataIndex:["user_group","name"],ellipsis:!0},{title:e("团队备注"),dataIndex:["user_group","note"],ellipsis:!0,render:(e,t)=>t.user_group.note||"-"},{title:e("权限"),dataIndex:"perm_flag"},{title:e("操作"),width:"100px",render:(t,n)=>d.createElement("a",{style:{color:u.length>1?"red":"#00000040"},onClick:()=>{if(u.length<=1)return;let t=[{user_group_id:n.user_group.id,busi_group_id:o}];Vte({title:e("是否删除该团队"),onOk:()=>{(function(e,t){return Si(`/api/n9e/busi-group/${e}/members`,{method:yi.Delete,data:t}).then((e=>e&&e.dat))})(o,t).then((t=>{xt.success(e("团队删除成功")),I("deleteMember")}))},onCancel:()=>{}})}},e("删除"))}];f.exports.useEffect((()=>{o&&A(o)}),[o]),f.exports.useEffect((()=>{_()}),[]);const _=(e,t)=>{Ja({query:void 0===e?E:e,limit:200}).then((e=>{v(e.dat||[]),(!o||t)&&e.dat.length>0&&s(e.dat[0].id)}))},A=e=>{x(!0),eo(e).then((e=>{T({type:"common/saveData",prop:"curBusiItem",data:e}),m(e),h(e.user_groups),x(!1)}))},O=(e,t,n)=>{c(n||""),a(e),r(!0)},I=e=>{r(!1),["create","delete","update"].includes(e)&&((e=>{_(void 0,"delete"===e)})(e),T({type:"common/getBusiGroups"})),o&&["update","addMember","deleteMember"].includes(e)&&A(o)};return d.createElement(ia,{title:e("业务组管理"),icon:d.createElement(k,null),hideCluster:!0},d.createElement("div",{className:"user-manage-content"},d.createElement("div",{style:{display:"flex",height:"100%"}},d.createElement("div",{className:"left-tree-area"},d.createElement("div",{className:"sub-title"},e("业务组列表"),d.createElement(Ct,{style:{height:"30px"},size:"small",type:"link",onClick:()=>{O(Nte.CreateBusiness)}},e("新建业务组"))),d.createElement("div",{style:{display:"flex",margin:"5px 0px 12px"}},d.createElement(St,{prefix:d.createElement(M,null),placeholder:e("搜索业务组名称"),onPressEnter:e=>{_(e.target.value)},onBlur:e=>{_(e.target.value)}})),d.createElement(Qt,{style:{marginBottom:"12px",flex:1,overflow:"auto"},dataSource:g,size:"small",renderItem:e=>d.createElement(Qt.Item,{key:e.id,className:o==e.id?"is-active":"",onClick:()=>s(e.id)},e.name)})),g.length>0?d.createElement("div",{className:"resource-table-content"},d.createElement(Ot,{className:"team-info"},d.createElement(It,{span:"24",style:{color:"#000",fontSize:"14px",fontWeight:"bold",display:"inline"}},p&&p.name,d.createElement(Me,{title:e("刷新"),style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>O(Nte.EditBusiness)}),d.createElement(we,{style:{marginLeft:"8px",fontSize:"14px"},onClick:()=>{Vte({title:e("是否删除该业务组"),onOk:()=>{(function(e){return Si(`/api/n9e/busi-group/${e}`,{method:yi.Delete}).then((e=>e&&e.dat))})(o).then((t=>{xt.success(e("业务组删除成功")),I("delete")}))},onCancel:()=>{}})}})),d.createElement(It,{style:{marginTop:"8px",color:"#666"}},e("备注"),"：",e("告警规则，告警事件，监控对象，自愈脚本等都归属业务组，是一个在系统里可以自闭环的组织"))),d.createElement(Ot,{justify:"space-between",align:"middle"},d.createElement(It,{span:"12"},d.createElement(St,{prefix:d.createElement(M,null),value:C,className:"searchInput",onChange:e=>w(e.target.value),placeholder:e("搜索团队名称")})),d.createElement(Ct,{type:"primary",ghost:!0,onClick:()=>{O(Nte.AddBusinessMember)}},e("添加团队"))),d.createElement(Rt,{rowKey:"id",columns:S,dataSource:u&&u.length>0?u.filter((e=>e.user_group&&-1!==e.user_group.name.indexOf(C))):[],loading:y})):d.createElement("div",{className:"blank-busi-holder"},d.createElement("p",{style:{textAlign:"left",fontWeight:"bold"}},d.createElement(R,{style:{color:"#1473ff"}})," ",e("提示信息")),d.createElement("p",null,"业务组（监控对象、监控大盘、告警规则、自愈脚本都要归属某个业务组）为空，请先 ",d.createElement("a",{onClick:()=>O(Nte.CreateBusiness)},"创建业务组"))))),d.createElement(jte,{visible:n,action:i,userType:"business",onClose:I,teamId:o,onSearch:e=>{s(e)}}))},Xte=(e,t,n)=>Si(e,{method:yi.Get,params:t,headers:n,silence:!0}).then((e=>e.data));function qte(e){const{url:t,datasourceId:n,datasourceIdRequired:r,promql:i,setQueryStats:a,setErrorContent:o,contentMaxHeight:s,timestamp:l,setTimestamp:c,refreshFlag:u}=e,[h,p]=f.exports.useState(!1),[m,g]=f.exports.useState({resultType:"matrix",result:[]});return f.exports.useEffect((()=>{if(r?n&&i:i){const e=Date.now();p(!0),Xte(`${t}/api/v1/query`,{time:l||A().unix(),query:i},r?{"X-Data-Source-Id":n}:{}).then((t=>{const{resultType:n}=t;let{result:r}=t,i=!1,s=0;r&&(r.length>1e4&&(i=!0,s=r.length,r=r.slice(1e4)),r.forEach((e=>{e.values&&e.values.length>1e4&&(i=!0,e.values.length>s&&(s=e.values.length),e.values=e.values.slice(1e4))}))),o(i?`Warning：Fetched ${s} metrics, only displaying first 10000`:""),g("scalar"===n||"string"===n?{resultType:n,result:[r]}:{resultType:n,result:r}),a({loadTime:Date.now()-e,resultSeries:r.length})})).catch((e=>{const t=w.get(e,"data.error");o(`Error executing query: ${t}`)})).finally((()=>{p(!1)}))}}),[l,n,i,u]),d.createElement("div",{className:"prom-graph-table-container"},d.createElement("div",{className:"prom-graph-table-controls"},d.createElement(St.Group,null,d.createElement("span",{className:"ant-input-group-addon"},"Time"),d.createElement(qt,{value:l?A.unix(l):void 0,onChange:e=>{c(e?e.unix():void 0)},showTime:!0,placeholder:"Evaluation time",getPopupContainer:()=>document.body,disabledDate:e=>e>A()}))),d.createElement(Qt,{className:"prom-graph-table-list",style:{maxHeight:s},size:"small",loading:h,dataSource:m?m.result:[],renderItem:e=>{return d.createElement(Qt.Item,null,d.createElement("div",null,function(e,t){const{metric:n}=t;if("scalar"===e)return"scalar";if("string"===e)return"string";const r=null==n?void 0:n.__name__,i=w.keys(n).filter((e=>"__name__"!==e)).map(((e,t,r)=>d.createElement("span",{key:t},d.createElement("strong",null,e),'="',n[e],'"',t===r.length-1?"":", ")));return d.createElement(d.Fragment,null,r,"{",i,"}")}(null==m?void 0:m.resultType,e)),d.createElement("div",null,(t=null==m?void 0:m.resultType,n=e,"scalar"===t||"string"===t?w.get(n,"[1]")||"-":"vector"===t?w.get(n,"value[1]","-"):"matrix"===t?w.map(w.get(n,"values"),((e,t)=>d.createElement("div",{key:t},w.get(e,"[1]","-")," @",w.get(e,"[0]","-")))):void 0)));var t,n}}))}const Kte=[{label:"none",value:"none"},{label:"bits(SI)",value:"bitsSI"},{label:"bytes(SI)",value:"bytesSI"},{label:"bits(IEC)",value:"bitsIEC"},{label:"bytes(IEC)",value:"bytesIEC"},{label:"百分比(0-100)",value:"percent"},{label:"百分比(0.0-1.0)",value:"percentUnit"},{label:"seconds",value:"seconds"},{label:"milliseconds",value:"milliseconds"},{label:"humanize(seconds)",value:"humantimeSeconds"},{label:"humanize(milliseconds)",value:"humantimeMilliseconds"}];function Qte(e){const{highLevelConfig:t,setHighLevelConfig:n}=e,r=d.createElement(bt,{onClick:e=>{n(l(s({},t),{sharedSortDirection:e.key}))},selectedKeys:[t.sharedSortDirection]},d.createElement(bt.Item,{key:"desc"},"desc"),d.createElement(bt.Item,{key:"asc"},"asc")),i=d.createElement(bt,{onClick:e=>{n(l(s({},t),{unit:e.key}))},selectedKeys:[t.unit]},w.map(Kte,(e=>d.createElement(bt.Item,{key:e.value},e.label))));return d.createElement("div",null,d.createElement(At,{checked:t.shared,onChange:e=>{n(l(s({},t),{shared:e.target.checked}))}},"Multi Series in Tooltip, order value"),d.createElement(_t,{overlay:r},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},t.sharedSortDirection," ",d.createElement(I,null))),d.createElement("br",null),d.createElement(At,{checked:t.legend,onChange:e=>{n(l(s({},t),{legend:e.target.checked}))}},"Show Legend"),d.createElement("br",null),"Value format with:"," ",d.createElement(_t,{overlay:i},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},w.get(w.find(Kte,{value:t.unit}),"label")," ",d.createElement(I,null))))}var Zte;!function(e){e.Line="line",e.StackArea="stackArea"}(Zte||(Zte={}));const Jte=e=>{const t=(null==e?void 0:e.__name__)||"",n=w.keys(e).filter((e=>"__name__"!==e)).map((t=>`${t}="${e[t]}"`));return`${t}{${w.join(n,",")}}`};function ene(e){const{url:t,datasourceId:n,datasourceIdRequired:r,promql:i,setQueryStats:a,setErrorContent:o,contentMaxHeight:c,range:u,setRange:h,step:p,setStep:m,graphOperates:g}=e,[v,y]=f.exports.useState([]),[x,b]=f.exports.useState({shared:!0,sharedSortDirection:"desc",legend:!0,unit:"none",reverseColorOrder:!1,colorDomainAuto:!0,colorDomain:[],chartheight:300}),[C,T]=f.exports.useState(Zte.Line),S={custom:{drawStyle:"lines",fillOpacity:C===Zte.Line?0:.5,stack:C===Zte.Line?"hidden":"noraml",lineInterpolation:"smooth"},options:{legend:{displayMode:x.legend?"table":"hidden"},tooltip:{mode:x.shared?"all":"single",sort:x.sharedSortDirection},standardOptions:{util:x.unit}}};return f.exports.useEffect((()=>{if(r?n&&i:i){const e=Eu(u),r=A(e.start).unix(),s=A(e.end).unix();let l=p;p||(l=Math.max(Math.floor((s-r)/240),1));const c=Date.now();Xte(`${t}/api/v1/query_range`,{query:i,start:A(e.start).unix(),end:A(e.end).unix(),step:l},n?{"X-Data-Source-Id":n}:{}).then((e=>{const t=w.map(null==e?void 0:e.result,(e=>({id:w.uniqueId("series_"),name:Jte(e.metric),metric:e.metric,data:e.values})));a({loadTime:Date.now()-c,resolution:p,resultSeries:t.length}),y(t)})).catch((e=>{const t=w.get(e,"data.error");o(`Error executing query: ${t}`)}))}}),[JSON.stringify(u),p,n,i]),d.createElement("div",{className:"prom-graph-graph-container"},d.createElement("div",{className:"prom-graph-graph-controls"},d.createElement(Ht,null,d.createElement(Au,{value:u,onChange:h}),d.createElement(zt,{placeholder:"Res. (s)",value:p,onKeyDown:e=>{"Enter"===e.code&&m(w.toNumber(e.target.value))},onBlur:e=>{m(w.toNumber(e.target.value))}}),d.createElement(Bt.Group,{options:[{label:d.createElement(E,null),value:Zte.Line},{label:d.createElement(Se,null),value:Zte.StackArea}],onChange:e=>{e.preventDefault(),T(e.target.value)},value:C,optionType:"button",buttonStyle:"solid"}),g.enabled&&d.createElement(d.Fragment,null,d.createElement(Yt,{placement:"left",content:d.createElement(Qte,{highLevelConfig:x,setHighLevelConfig:b}),trigger:"click",autoAdjustOverflow:!1,getPopupContainer:()=>document.body},d.createElement(Ct,{icon:d.createElement(L,null)})),d.createElement(Ct,{icon:d.createElement(pe,{onClick:()=>{const e=localStorage.getItem("curCluster"),t=l(s({type:"timeseries",version:"2.0.0",name:i,step:p,range:u},S),{targets:[{expr:i}]});(function(e){return Si("/api/n9e/share-charts",{method:yi.Post,data:e})})([{configs:JSON.stringify({curCluster:e,dataProps:t})}]).then((e=>{const t=e.dat;window.open("/chart/"+t)}))}})})))),d.createElement(pp,{inDashboard:!1,values:S,series:v}))}const tne=e=>{const{loadTime:t,resolution:n,resultSeries:r}=e;return d.createElement("div",{className:"query-stats"},d.createElement("span",null,"Load time: ",t,"ms  ",n&&`Resolution: ${n}s `," Result series: ",r))},nne=({url:e,datasourceId:t,datasourceIdRequired:n,show:r,updateShow:i,insertAtCursor:a})=>{const[o,s]=f.exports.useState([]),[l,c]=f.exports.useState(o);return f.exports.useEffect((()=>{r&&Xte(`${e}/api/v1/label/__name__/values`,{},n?{"X-Data-Source-Id":t}:{}).then((e=>{s(e),c(e)}))}),[r]),d.createElement(Ft,{className:"prom-graph-metrics-explorer-modal",width:540,visible:r,title:"Metrics Explorer",footer:null,onCancel:()=>i(!1),getContainer:!1},d.createElement(St,{prefix:d.createElement(M,null),onPressEnter:e=>{e.preventDefault();const t=e.currentTarget.value;c(o.filter((e=>e.includes(t))))}}),d.createElement("div",{className:"prom-graph-metrics-explorer-list",onClick:e=>function(e){a(e),i(!1)}(e.target.innerText)},l.map((e=>d.createElement("div",{className:"prom-graph-metrics-explorer-list-item",key:e},e)))))};const rne=$t.TabPane;function ine(e){const{url:t="/api/v1/datasource/prometheus",datasourceId:n,datasourceIdRequired:r,promQL:i,contentMaxHeight:a=300,type:o="table",defaultTime:l,graphOperates:c={enabled:!1},globalOperates:u={enabled:!1}}=e,[h,p]=f.exports.useState(i),[m,g]=f.exports.useState(i),[v,y]=f.exports.useState(null),[x,E]=f.exports.useState(""),[b,C]=f.exports.useState(o),[T,S]=f.exports.useState(),[k,_]=f.exports.useState(w.uniqueId("refreshFlag_")),[O,I]=f.exports.useState({start:"now-1h",end:"now"}),[M,N]=f.exports.useState(),[F,L]=f.exports.useState(!1),[P,R]=f.exports.useState(!0),D=f.exports.useRef(null);return f.exports.useEffect((()=>{if("number"==typeof l)"table"==b&&S(l);else if((null==l?void 0:l.start)&&(null==l?void 0:l.end)){const e=Eu(O),t=A(e.end).unix();S(t),I(l)}}),[]),f.exports.useEffect((()=>{p(m),g(m)}),[m]),d.createElement("div",{className:"prom-graph-container"},u.enabled&&d.createElement("div",{className:"prom-graph-global-operate"},d.createElement(At,{checked:P,onChange:e=>{R(e.target.checked)}},"Enable autocomplete")),d.createElement("div",{className:"prom-graph-expression-input"},d.createElement(St.Group,null,d.createElement("span",{className:"ant-input-affix-wrapper"},d.createElement(lo,{ref:D,url:t,headers:r?{"X-Data-Source-Id":w.toString(n)}:{"X-Cluster":localStorage.getItem("curCluster")||"DEFAULT",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},value:h,onChange:p,executeQuery:e=>{g(e)},completeEnabled:P}),d.createElement("span",{className:"ant-input-suffix"},d.createElement(Ge,{className:"prom-graph-metrics-target",onClick:()=>{L(!0)}}))),d.createElement("span",{className:"ant-input-group-addon",style:{border:0,padding:"0 0 0 10px",background:"none"}},d.createElement(Ct,{type:"primary",onClick:()=>{_(w.uniqueId("refreshFlag_")),g(h)}},"Execute")))),x&&d.createElement(Wt,{style:{marginBottom:16},message:x,type:"error"}),d.createElement($t,{destroyInactiveTabPane:!0,tabBarGutter:0,activeKey:b,onChange:e=>{C(e),E(""),y(null)},type:"card",tabBarExtraContent:v&&d.createElement(tne,s({},v))},d.createElement(rne,{tab:"Table",key:"table"},d.createElement(qte,{url:t,contentMaxHeight:a,datasourceId:n,datasourceIdRequired:r,promql:m,setQueryStats:y,setErrorContent:E,timestamp:T,setTimestamp:S,refreshFlag:k})),d.createElement(rne,{tab:"Graph",key:"graph"},d.createElement(ene,{url:t,contentMaxHeight:a,datasourceId:n,datasourceIdRequired:r,promql:m,setQueryStats:y,setErrorContent:E,range:O,setRange:I,step:M,setStep:N,graphOperates:c}))),d.createElement(nne,{url:t,datasourceId:n,datasourceIdRequired:r,show:F,updateShow:L,insertAtCursor:e=>{if(null!==D.current){const{from:t,to:n}=D.current.state.selection.ranges[0];D.current.dispatch(D.current.state.update({changes:{from:t,to:n,insert:e}}))}}}))}function ane(e){let t=new RegExp(`.*?${e}=([^&]*)`),n=(location.search||"").match(t);return n?n[1]:""}const one=()=>{const[e,t]=f.exports.useState([{id:gi(),defaultPromQL:decodeURIComponent(ane("promql"))}]);return d.createElement(d.Fragment,null,e.map((({id:n,defaultPromQL:r=""})=>d.createElement(jt,{key:n,bodyStyle:{padding:16},className:"panel"},d.createElement(ine,{url:"/api/n9e/prometheus",promQL:r,datasourceIdRequired:!1,graphOperates:{enabled:!0},globalOperates:{enabled:!0}}),d.createElement("span",{className:"remove-panel-btn",onClick:()=>{!function(n){t(e.reduce(((e,t)=>t.id!==n?[...e,s({},t)]:e),[]))}(n)}},d.createElement(G,null))))),d.createElement("div",{className:"add-prometheus-panel"},d.createElement(Ct,{size:"large",onClick:function(){t((t=>[...e,{id:gi()}]))}},d.createElement(Ie,null),"新增一个查询面板")))},sne=()=>{const[e,t]=f.exports.useState(w.uniqueId("rerenderFlag_"));return d.createElement(ia,{title:"即时查询",icon:d.createElement(E,null),hideCluster:!1,onChangeCluster:()=>{t(w.uniqueId("rerenderFlag_"))}},d.createElement("div",{className:"prometheus-page",key:e},d.createElement(one,null)))},lne=function(e,t,n){const r=s({},bu(t));return n&&(r["match[]"]=n),Si(`/api/n9e/prometheus/api/v1/label/${e}/values`,{method:yi.Get,params:r}).then((e=>null==e?void 0:e.data))},cne=function(e,t){const n=s({},bu(t));return e&&(n["match[]"]=e),Si("/api/n9e/prometheus/api/v1/labels",{method:yi.Get,params:n}).then((e=>null==e?void 0:e.data))};function une(e){const{isAggr:t,aggrFunc:n,calcArr:r,metric:i,match:a,offset:o,aggrGroups:s}=e;return`${t?n+"(":""}${r[0]?r[0]+"(":""}${i}${a}${r[1]?`[${r[1]}]`:""}${o?` offset ${o}`:""}${r[0]?")":""}${t?`) by (${w.join(s,", ")})`:""}`}const hne=e=>{let t=e.__name__||"";return w.forEach(w.omit(e,"__name__"),((e,n)=>{t+=` ${n}: ${e}`})),w.trim(t)},pne=e=>{const{metric:t,match:n,calcFunc:r,comparison:i,aggrFunc:a,aggrGroups:o}=e,s=w.split(r,"_"),l=o.length>0;return[une({isAggr:l,aggrFunc:a,calcArr:s,metric:t,match:n,offset:"",aggrGroups:o}),...w.map(i,(e=>une({isAggr:l,aggrFunc:a,calcArr:s,metric:t,match:n,offset:e,aggrGroups:o})))]};function dne(e){const t=w.compact(w.map(e,(e=>e.label&&e.value?`${e.label}${e.oper}"${e.value}"`:"")));return w.join(w.compact(t),",")}function fne(e){const t=w.map(e.dimensionLabels,(e=>w.isEmpty(e.value)?"":`${e.label}=~"${w.join(e.value,"|")}"`)),n=w.join(w.compact(t),",");return n?`{${n}}`:""}const mne={add:"新建快捷视图",edit:"编辑快捷视图"},{TabPane:gne}=$t;var vne=$o((function(e){const{t:t}=Hr(),{action:n,visible:r,initialValues:i,destroy:a,range:o,onOk:l,admin:c}=e,[u]=Tt.useForm(),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState(!1),[x,E]=f.exports.useState(!1),[b,C]=f.exports.useState([]),[T,S]=f.exports.useState("form"),k=e=>w.map(e,(e=>d.createElement(Lt.Option,{key:e,value:e},e)));return f.exports.useEffect((()=>{cne("",o).then((e=>{p(e),g(e)}))}),[JSON.stringify(o)]),d.createElement(Ft,{className:"n9e-metric-views-modal",title:d.createElement($t,{className:"custom-import-title",activeKey:T,onChange:S},d.createElement(gne,{tab:mne[n],key:"form"}),"add"===n&&d.createElement(gne,{tab:"导入快捷视图",key:"import"})),visible:r,onCancel:()=>{a()},onOk:()=>{u.validateFields().then((e=>{let t=w.cloneDeep(e);if("form"===T&&(t.dynamicLabels=w.map(t.dynamicLabels,(e=>({label:e,value:""}))),t.dimensionLabels=w.map(t.dimensionLabels,(e=>({label:e,value:""})))),"import"===T)try{const n=JSON.parse(e.import);t=s({name:e.name,cate:e.cate},n)}catch(Wh){return void console.log(Wh)}const{name:r,cate:o}=t,c={name:r,cate:o?0:1,configs:JSON.stringify(w.omit(t,["name","cate"]))};"add"===n?function(e){return Si("/api/n9e/metric-views",{method:yi.Post,data:e}).then((e=>null==e?void 0:e.dat))}(c).then((e=>{xt.success("添加成功"),l(e),a()})):"edit"===n&&(c.id=i.id,function(e){return Si("/api/n9e/metric-views",{method:yi.Put,data:e}).then((e=>null==e?void 0:e.dat))}(c).then((()=>{xt.success("修改成功"),l(),a()})))}))}},"form"===T&&d.createElement(Tt,{layout:"vertical",initialValues:i||{cate:!1},form:u,onValuesChange:(e,t)=>{if(e.filters){const e=dne(t.filters);cne(""+(e?`{${e}}`:""),o).then((e=>{g(e)}))}}},d.createElement(Tt.Item,{label:"视图名称",name:"name",rules:[{required:!0}]},d.createElement(St,null)),c&&d.createElement(Tt.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Dt,null)),d.createElement(Tt.List,{name:"filters"},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,d.createElement("div",{style:{paddingBottom:8}},"前置过滤条件"," ",d.createElement($,{onClick:()=>{t({oper:"="})}})),e.map((({key:e,name:t})=>d.createElement(Ht,{key:e},d.createElement(Tt.Item,{name:[t,"label"],rules:[{required:!0}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),allowClear:!0,showSearch:!0,style:{width:170}},k(h))),d.createElement(Tt.Item,{name:[t,"oper"],rules:[{required:!0}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),style:{width:60}},d.createElement(Lt.Option,{value:"="},"="),d.createElement(Lt.Option,{value:"!="},"!="),d.createElement(Lt.Option,{value:"=~"},"=~"),d.createElement(Lt.Option,{value:"!~"},"!~"))),d.createElement(Tt.Item,{name:[t,"value"],rules:[{required:!0}]},d.createElement(St,{style:{width:200}})),d.createElement(Tt.Item,null,d.createElement(Y,{onClick:()=>{n(t)}})))))))),d.createElement(Tt.Item,{label:"动态过滤标签",name:"dynamicLabels"},d.createElement(Lt,{allowClear:!0,showSearch:!0,mode:"multiple"},k(m))),d.createElement(Tt.Item,{label:"展开维度标签",name:"dimensionLabels",rules:[{required:!0}]},d.createElement(Lt,{allowClear:!0,showSearch:!0,mode:"multiple"},k(m))),d.createElement("div",{style:{textAlign:"right",marginBottom:10}},d.createElement(Ct,{onClick:()=>{const e=u.getFieldsValue();y(!0),E(!0);const t=dne(e.filters),n=w.compact(w.concat(e.dynamicLabels,e.dimensionLabels)),r=w.map(n,(e=>lne(e,o,t?`{${t}}`:"")));Promise.all(r).then((e=>{const t=w.map(n,((t,n)=>({label:t,values:e[n]})));C(t),E(!1)}))}},"预览")),v&&d.createElement(Rt,{size:"small",rowKey:"label",columns:[{title:"Lable Key",dataIndex:"label"},{title:"Lable Value 数量",dataIndex:"values",render:e=>e.length},{title:"Lable Value 样例",dataIndex:"values",render:e=>d.createElement(kt,{placement:"right",title:d.createElement("div",null,w.map(e,(e=>d.createElement("div",{key:e},e))))},`${w.head(e)}...`)}],dataSource:b,loading:x})),"import"===T&&d.createElement(Tt,{form:u,preserve:!1,layout:"vertical",initialValues:i||{cate:!1}},d.createElement(Tt.Item,{label:"视图名称",name:"name",rules:[{required:!0}]},d.createElement(St,null)),c&&d.createElement(Tt.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Dt,null)),d.createElement(Tt.Item,{label:"配置JSON：",name:"import",rules:[{required:!0,message:t("请输入配置"),validateTrigger:"trigger"}]},d.createElement(St.TextArea,{className:"code-area",placeholder:t("请输入配置"),rows:4}))))}));var yne=$o((function(e){const{visible:t,destroy:n,data:r}=e,{t:i}=Hr();let a=r;try{a=JSON.stringify(JSON.parse(r),null,4)}catch(Wh){console.log(Wh)}return d.createElement(Ft,{title:"导出配置",visible:t,onCancel:()=>{n()},footer:null},d.createElement(d.Fragment,null,d.createElement("div",{style:{marginBottom:10}},d.createElement("a",{onClick:()=>{di([r],"download.json")}},"Download.json"),d.createElement("a",{style:{float:"right"},onClick:()=>fi(r,i)},d.createElement(z,null),"复制JSON内容到剪贴板")),d.createElement(St.TextArea,{value:a,rows:10})))}));function xne(e){const[t,n]=f.exports.useState([]),[r,i]=f.exports.useState(),[a,o]=f.exports.useState(""),[l,c]=f.exports.useState(w.uniqueId("refreshFlag_")),{profile:u}=ri((e=>e.account));return f.exports.useEffect((()=>{const t=null!==localStorage.getItem("metric-view-id")?Number(localStorage.getItem("metric-view-id")):null;Si("/api/n9e/metric-views",{method:yi.Get}).then((e=>null==e?void 0:e.dat)).then((r=>{let a;if(n(r),a=t&&w.find(r,{id:t})?t:w.get(w.head(r),"id"),a){i(a);const t=w.find(r,{id:a});let n={};try{n=JSON.parse(t.configs),n.id=a,n.refreshFlag=l}catch(Wh){console.error(Wh)}e.onSelect(s({},n))}}))}),[l]),d.createElement("div",{className:"n9e-metric-views-list"},d.createElement("div",{className:"n9e-metric-views-list-header"},d.createElement("div",{className:"metric-page-title"},"快捷视图列表"),d.createElement("a",null,d.createElement($e,{onClick:()=>{vne({admin:u.admin,action:"add",visible:!0,range:e.range,onOk:e=>{localStorage.setItem("metric-view-id",e.id),c(w.uniqueId("refreshFlag_"))}})}}))),d.createElement(St,{prefix:d.createElement(M,null),value:a,onChange:e=>{o(e.target.value)}}),d.createElement("div",{className:"n9e-metric-views-list-content"},w.isEmpty(t)?"暂无数据":w.map(w.filter(t,(e=>{if(a){let t=!0;try{t=new RegExp(a,"gi").test(e.name)}catch(Wh){console.log(Wh)}return t}return!0})),(n=>d.createElement("div",{className:P({"n9e-metric-views-list-content-item":!0,active:n.id===r}),key:n.id,onClick:()=>{i(n.id),localStorage.setItem("metric-view-id",n.id);const r=w.find(t,{id:n.id});let a={};try{a=JSON.parse(r.configs),a.id=n.id}catch(Wh){console.error(Wh)}e.onSelect(s({},a))}},d.createElement("span",{className:"name"},n.name),1===n.cate||u.admin?d.createElement("span",null,0===n.cate&&d.createElement("span",{className:"n9e-metric-views-list-content-item-cate",style:{color:"#ccc"}},"公开"),d.createElement("div",{className:"n9e-metric-views-list-content-item-opes"},d.createElement(Me,{onClick:t=>{t.stopPropagation();let r={};try{r=JSON.parse(n.configs),r.dynamicLabels=w.map(r.dynamicLabels,"label"),r.dimensionLabels=w.map(r.dimensionLabels,"label")}catch(a){console.error(a)}const i=s({id:n.id,name:n.name,cate:0===n.cate},r);vne({admin:u.admin,action:"edit",visible:!0,range:e.range,initialValues:i,onOk:()=>{localStorage.setItem("metric-view-id",n.id),c(w.uniqueId("refreshFlag_"))}})}}),d.createElement(we,{onClick:e=>{e.stopPropagation(),Ft.confirm({title:"是否要删除？",onOk:()=>{var e;(e={ids:[n.id]},Si("/api/n9e/metric-views",{method:yi.Delete,data:e}).then((e=>null==e?void 0:e.dat))).then((()=>{xt.success("删除成功"),c(w.uniqueId("refreshFlag_"))}))}})}}),d.createElement(kt,{title:"导出配置",placement:"right"},d.createElement(Ye,{onClick:()=>{yne({visible:!0,data:n.configs})}})))):d.createElement("span",{style:{color:"#ccc"}},"公开"))))))}function Ene(e){const{value:t,range:n,onChange:r}=e,{id:i,refreshFlag:a,filters:o,dynamicLabels:c,dimensionLabels:u}=t,[h,p]=f.exports.useState({}),[m,g]=f.exports.useState({}),[v,y]=f.exports.useState({}),x=dne(o),E=function(e){const t=w.map(e,(e=>e.value?`${e.label}="${e.value}"`:""));return w.join(w.compact(t),",")}(c),[b,C]=f.exports.useState({filters:!1,dynamicLabels:!0});return f.exports.useEffect((()=>{const e=w.map(c,(e=>lne(e.label,n,x?`{${x}}`:"")));Promise.all(e).then((e=>{const t={};w.forEach(e,((e,n)=>{t[c[n].label]=e})),p(t)}))}),[x]),f.exports.useEffect((()=>{const e=w.join(w.compact(w.concat(x,E)),","),i=w.map(u,(t=>lne(t.label,n,e?`{${e}}`:"")));Promise.all(i).then((e=>{const n={};w.forEach(e,((e,t)=>{n[u[t].label]=e})),g(n),w.every(u,(e=>w.isEmpty(e.value)))&&r(l(s({},t),{dimensionLabels:w.map(u,((e,t)=>0===t?{label:e.label,value:w.slice(n[e.label],0,10)}:e))}))}))}),[x,E,i,a]),d.createElement("div",{className:"n9e-metric-views-labels-values"},!w.isEmpty(x)&&d.createElement("div",{className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title",style:{cursor:"pointer"},onClick:()=>{C(l(s({},b),{filters:!b.filters}))}},"前置过滤条件 ",b.filters?d.createElement(Q,null):d.createElement(I,null)),b.filters&&d.createElement("div",{className:"n9e-metric-views-filters"},x||"暂无数据")),!w.isEmpty(c)&&d.createElement("div",{className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title",style:{cursor:"pointer"},onClick:()=>{C(l(s({},b),{dynamicLabels:!b.dynamicLabels}))}},"动态过滤条件 ",b.dynamicLabels?d.createElement(Q,null):d.createElement(I,null)),b.dynamicLabels&&d.createElement("div",{className:"n9e-metric-views-dynamicLabels"},w.isEmpty(c)?d.createElement("div",{style:{marginBottom:10}},"暂无数据"):w.map(c,(e=>d.createElement("div",{key:e.label,className:"n9e-metric-views-dynamicLabels-item"},d.createElement("div",{className:"n9e-metric-views-dynamicLabels-item-label"},e.label,":"),d.createElement(Lt,{allowClear:!0,showSearch:!0,style:{width:"100%"},value:e.value,onChange:n=>{const i=w.map(c,(t=>e.label===t.label?l(s({},t),{value:n}):t));r(l(s({},t),{dynamicLabels:i,dimensionLabels:w.map(u,((e,t)=>0===t?{label:e.label,value:[]}:e))}))}},w.map(h[e.label],(e=>d.createElement(Lt.Option,{key:e,value:e},e))))))))),w.map(u,(e=>{const n=m[e.label];return d.createElement("div",{key:e.label,className:"n9e-metric-views-labels-values-item"},d.createElement("div",{className:"page-title"},d.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",width:220}},d.createElement(kt,{title:e.label,placement:"left"},d.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"calc(100% - 30px)"}},e.label)),d.createElement("a",{style:{fontSize:12,fontWeight:"normal"},onClick:()=>{r(l(s({},t),{dimensionLabels:w.map(u,(t=>t.label===e.label?l(s({},t),{value:n}):t))}))}},"全选"))),d.createElement("div",{className:"n9e-metric-views-dimensionLabel"},d.createElement(St.Group,{compact:!0},d.createElement(St,{style:{width:"calc(100% - 32px)"},prefix:d.createElement(M,null),value:v[e.label],onChange:t=>{y(l(s({},v),{[e.label]:t.target.value}))}}),d.createElement(kt,{title:"清空已选的值",placement:"right",getTooltipContainer:()=>document.body},d.createElement(Ct,{icon:d.createElement(Ue,null),onClick:()=>{r(l(s({},t),{dimensionLabels:w.map(u,(t=>t.label===e.label?l(s({},t),{value:[]}):t))}))}}))),d.createElement("div",{className:"n9e-metric-views-dimensionLabel-content"},w.isEmpty(n)?"暂无数据":d.createElement("div",null,w.map(w.filter(n,(t=>{let n=!0;if(v[e.label])try{n=new RegExp(v[e.label],"gi").test(t)}catch(Wh){console.log(Wh)}return n})),(n=>d.createElement("div",{key:n,className:P({"n9e-metric-views-dimensionLabel-content-item":!0,active:w.includes(e.value,n)}),onClick:()=>{const i=w.includes(e.value,n)?w.without(e.value,n):w.concat(e.value,n),a=w.map(u,(t=>t.label===e.label?l(s({},t),{value:w.compact(i)}):l(s({},t),{value:[]})));r(l(s({},t),{dimensionLabels:a}))}},n)))))))})))}const bne=()=>d.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1269",width:"1em",height:"1em",fill:"currentColor"},d.createElement("path",{d:"M85.333333 85.333333h85.333334v768h768v85.333334H85.333333V85.333333m512 533.333334L512 768H338.773333l-86.186666-149.333333L338.773333 469.333333H512l85.333333 149.333334m3.413334-341.333334L514.56 426.666667H341.333333L256 277.333333 341.333333 128h173.226667l86.186667 149.333333m305.92 170.666667L820.48 597.333333h-172.373333l-86.186667-149.333333L648.106667 298.666667h172.373333l86.186667 149.333333z",fill:"","p-id":"1270"})),Cne=e=>d.createElement(x,s({component:bne},e)),wne=[{label:"none",value:"none"},{label:"bits(SI)",value:"bitsSI"},{label:"bytes(SI)",value:"bytesSI"},{label:"bits(IEC)",value:"bitsIEC"},{label:"bytes(IEC)",value:"bytesIEC"},{label:"百分比(0-100)",value:"percent"},{label:"百分比(0.0-1.0)",value:"percentUnit"},{label:"seconds",value:"seconds"},{label:"milliseconds",value:"milliseconds"},{label:"humanize(seconds)",value:"humantimeSeconds"},{label:"humanize(milliseconds)",value:"humantimeMilliseconds"}];function Tne(e){const{highLevelConfig:t,setHighLevelConfig:n}=e,r=d.createElement(bt,{onClick:e=>{n(l(s({},t),{sharedSortDirection:e.key}))},selectedKeys:[t.sharedSortDirection]},d.createElement(bt.Item,{key:"desc"},"desc"),d.createElement(bt.Item,{key:"asc"},"asc")),i=d.createElement(bt,{onClick:e=>{n(l(s({},t),{unit:e.key}))},selectedKeys:[t.unit]},w.map(wne,(e=>d.createElement(bt.Item,{key:e.value},e.label))));return d.createElement("div",null,d.createElement(At,{checked:t.shared,onChange:e=>{n(l(s({},t),{shared:e.target.checked}))}},"Multi Series in Tooltip, order value"),d.createElement(_t,{overlay:r},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},t.sharedSortDirection," ",d.createElement(I,null))),d.createElement("br",null),d.createElement(At,{checked:t.legend,onChange:e=>{n(l(s({},t),{legend:e.target.checked}))}},"Show Legend"),d.createElement("br",null),"Value format with:"," ",d.createElement(_t,{overlay:i},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},w.get(w.find(wne,{value:t.unit}),"label")," ",d.createElement(I,null))))}function Sne(e){const{onClick:t,selectedKeys:n}=e;return d.createElement(bt,{prefixCls:"ant-dropdown-menu",onClick:t,selectedKeys:n,className:"color-scales"},w.map(Qc,(e=>d.createElement(bt.Item,{key:e.value,className:"color-scales-menu-item"},d.createElement("span",{className:"color-scales-menu-colors"},w.map(e.value,(e=>d.createElement("span",{key:e,style:{backgroundColor:e}})))),e.label))))}function kne(e){const{highLevelConfig:t,setHighLevelConfig:n}=e,r=d.createElement(bt,{onClick:e=>{n(l(s({},t),{unit:e.key}))},selectedKeys:[t.unit]},w.map(wne,(e=>d.createElement(bt.Item,{key:e.value},e.label))));return d.createElement("div",null,d.createElement("div",{style:{marginBottom:5}},"Height:"," ",d.createElement(zt,{size:"small",value:t.chartheight,onBlur:e=>{n(l(s({},t),{chartheight:w.toNumber(e.target.value)}))}})),d.createElement("div",{style:{marginBottom:5}},"Color:"," ",d.createElement(_t,{overlay:d.createElement(Sne,{onClick:e=>{n(l(s({},t),{colorRange:w.split(e.key,",")}))},selectedKeys:[w.join(t.colorRange,",")]})},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},w.get(w.find(Qc,(e=>w.isEqual(e.value,t.colorRange))),"label")," ",d.createElement(I,null)))),d.createElement("div",{style:{marginBottom:5}},"Reverse color order:"," ",d.createElement(Dt,{size:"small",checked:t.reverseColorOrder,onChange:e=>{n(l(s({},t),{reverseColorOrder:e}))}})),d.createElement("div",{style:{marginBottom:5}},"Auto min/max color values:"," ",d.createElement(Dt,{size:"small",checked:t.colorDomainAuto,onChange:e=>{n(l(s({},t),{colorDomainAuto:e,colorDomain:[0,100]}))}})),!t.colorDomainAuto&&d.createElement("div",{style:{marginBottom:5}},d.createElement(Ot,{gutter:8},d.createElement(It,{span:12},d.createElement(zt,{size:"small",addonBefore:"min",style:{width:110},value:t.colorDomain[0],onChange:e=>{n(l(s({},t),{colorDomain:[e,t.colorDomain[1]]}))}})),d.createElement(It,{span:12},d.createElement(zt,{size:"small",addonBefore:"max",style:{width:110},value:t.colorDomain[1],onChange:e=>{n(l(s({},t),{colorDomain:[t.colorDomain[0],e]}))}})))),d.createElement("div",null,"Value format with:"," ",d.createElement(_t,{overlay:r},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},w.get(w.find(wne,{value:t.unit}),"label")," ",d.createElement(I,null)))))}function _ne(e){var t;const{metric:n,match:r,range:i,step:a,onClose:o}=e,c=w.map(w.filter(r.dimensionLabels,(e=>!w.isEmpty(e.value))),"label"),[u,h]=f.exports.useState(w.uniqueId("refreshFlag_")),[p,m]=f.exports.useState(""),[g,v]=f.exports.useState([]),[y,x]=f.exports.useState("avg"),[b,C]=f.exports.useState(c),[T,S]=f.exports.useState([]),[k,_]=f.exports.useState([]),[A,O]=f.exports.useState({shared:!0,sharedSortDirection:"desc",legend:!0,unit:"none",colorRange:Qc[0].value,reverseColorOrder:!1,colorDomainAuto:!0,colorDomain:[],chartheight:300}),[M,N]=f.exports.useState("line"),[F,R]=f.exports.useState("last"),D={custom:{drawStyle:"lines",fillOpacity:0,stack:"hidden",lineInterpolation:"smooth"},options:{legend:{displayMode:A.legend?"table":"hidden"},tooltip:{mode:A.shared?"all":"single",sort:A.sharedSortDirection},standardOptions:{util:A.unit}}},B={custom:{calc:F,colorRange:A.colorRange,reverseColorOrder:A.reverseColorOrder,colorDomainAuto:A.colorDomainAuto,colorDomain:A.colorDomain},options:{standardOptions:{util:A.unit}}},z={line:d.createElement(Tne,{highLevelConfig:A,setHighLevelConfig:O}),hexbin:d.createElement(kne,{highLevelConfig:A,setHighLevelConfig:O})};return f.exports.useEffect((()=>{C(c)}),[JSON.stringify(c)]),f.exports.useEffect((()=>{const e=fne(r);cne(`${n}${e}`,i).then((e=>{S(e)}))}),[u,JSON.stringify(r),JSON.stringify(i)]),f.exports.useEffect((()=>{(function(e){const{metric:t,match:n,range:r,step:i,calcFunc:a,comparison:o,aggrFunc:s,aggrGroups:l}=e;let{start:c,end:u}=bu(r),h=i;i||(h=Math.max(Math.floor((u-c)/240),1));const p=pne({metric:t,match:n,calcFunc:a,comparison:o,aggrFunc:s,aggrGroups:l}),d=w.map(p,(e=>Si("/api/n9e/prometheus/api/v1/query_range",{method:yi.Get,params:{start:c-c%h,end:u-u%h,step:h,query:e}})));return Promise.all(d).then((e=>{const t=[];return w.forEach(["current",...o],((n,r)=>{var i,a;const o=((null==(i=e[r])?void 0:i.data)?null==(a=e[r])?void 0:a.data:e[r]).result||[];w.forEach(o,(e=>{t.push({metric:e.metric,color:e.color,offset:n,name:`${hne(e.metric)}${"current"!==n?` offset ${n}`:""}`,id:w.uniqueId("series_"),data:e.values})}))})),t}))})({metric:n,match:fne(r),range:i,step:a,aggrFunc:y,aggrGroups:b,calcFunc:p,comparison:g}).then((e=>{_(e)}))}),[u,n,JSON.stringify(r),JSON.stringify(i),a,p,g,y,b]),d.createElement(jt,{size:"small",style:{marginBottom:10},title:n,className:"n9e-metric-views-metrics-graph",extra:d.createElement(Ht,null,d.createElement(Ht,{size:0,style:{marginRight:10}},d.createElement(E,{className:P({"button-link-icon":!0,active:"line"===M}),onClick:()=>{N("line")}}),d.createElement(Pt,{type:"vertical"}),d.createElement(Cne,{className:P({"button-link-icon":!0,active:"hexbin"===M}),onClick:()=>{N("hexbin")}})),d.createElement(Yt,{placement:"left",content:z[M],trigger:"click",autoAdjustOverflow:!1,getPopupContainer:()=>document.body},d.createElement("a",{className:"a-icon"},d.createElement(L,null))),d.createElement("a",{className:"a-icon"},d.createElement(Z,{onClick:()=>{h(w.uniqueId("refreshFlag_"))}})),d.createElement("a",{className:"a-icon"},d.createElement(pe,{onClick:()=>{const e=localStorage.getItem("curCluster"),t=l(s({type:"timeseries",version:"2.0.0",name:n,step:a,range:i},D),{targets:w.map(pne({metric:n,match:fne(r),aggrFunc:y,aggrGroups:b,calcFunc:p,comparison:g}),(e=>({expr:e})))});var o;(o=[{configs:JSON.stringify({curCluster:e,dataProps:t})}],Si("/api/n9e/share-charts",{method:yi.Post,data:o})).then((e=>{const t=e.dat;window.open("/chart/"+t)}))}})),d.createElement("a",{className:"a-icon"},d.createElement(G,{onClick:o})))},d.createElement("div",null,d.createElement(Ht,{size:"large"},d.createElement("div",null,"计算函数：",d.createElement(_t,{overlay:d.createElement(bt,{onClick:e=>m("clear"===e.key?"":e.key),selectedKeys:[p]},d.createElement(bt.Item,{key:"rate_1m"},"rate_1m"),d.createElement(bt.Item,{key:"rate_5m"},"rate_5m"),d.createElement(bt.Item,{key:"increase_1m"},"increase_1m"),d.createElement(bt.Item,{key:"increase_5m"},"increase_5m"),d.createElement(bt.Divider,null),d.createElement(bt.Item,{key:"clear"},"clear"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},p||"无"," ",d.createElement(I,null)))),d.createElement("div",null,"环比：",g.map((e=>d.createElement(Nt,{key:e,closable:!0,onClose:()=>{v(w.without(g,e))}},e))),d.createElement(_t,{overlay:d.createElement(bt,{style:{maxHeight:"200px",overflowY:"auto"},onClick:e=>{-1===g.indexOf(e.key)?v([...g,e.key]):v(w.without(g,e.key))},selectedKeys:g},d.createElement(bt.Item,{key:"1d"},"1d"),d.createElement(bt.Item,{key:"7d"},"7d"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement($,null)))),d.createElement("div",null,"聚合函数：",d.createElement(_t,{overlay:d.createElement(bt,{onClick:e=>x(e.key),selectedKeys:[y]},d.createElement(bt.Item,{key:"sum"},"sum"),d.createElement(bt.Item,{key:"avg"},"avg"),d.createElement(bt.Item,{key:"max"},"max"),d.createElement(bt.Item,{key:"min"},"min"))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},y," ",d.createElement(I,null)))),y?d.createElement("div",{className:"graph-config-inner-item"},"聚合维度：",b.map((e=>d.createElement(Nt,{key:e,closable:!0,onClose:()=>{C(w.without(b,e))}},e))),d.createElement(_t,{overlay:d.createElement(bt,{style:{maxHeight:"200px",overflowY:"auto"},onClick:e=>{-1===b.indexOf(e.key)?C([...b,e.key]):C(w.without(b,e.key))},selectedKeys:b},w.map(w.filter(T,(e=>"__name__"!==e)),(e=>d.createElement(bt.Item,{key:e},e))))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},d.createElement($,null)))):null,"hexbin"===M&&d.createElement("div",null,"取值计算：",d.createElement(_t,{overlay:d.createElement(bt,{onClick:e=>R(e.key),selectedKeys:[F]},w.map(Jc,((e,t)=>d.createElement(bt.Item,{key:t},e.name))))},d.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},null==(t=Jc[F])?void 0:t.name," ",d.createElement(I,null)))))),d.createElement("div",null,"line"===M&&d.createElement(pp,{inDashboard:!1,values:D,series:k}),"hexbin"===M&&d.createElement("div",{style:{padding:"20px 0 0 0",height:A.chartheight}},d.createElement(YY,{values:B,series:k}))))}function Ane(e){const{range:t,setRange:n,match:r}=e,[i,a]=f.exports.useState(w.uniqueId("refreshFlag_")),[o,c]=f.exports.useState(""),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState({}),[g,v]=f.exports.useState("all"),[y,x]=f.exports.useState([]),[E,b]=f.exports.useState([]),[C,T]=f.exports.useState(),S=fne(r);return f.exports.useEffect((()=>{S&&function(e,t){return Si("/api/n9e/prometheus/api/v1/label/__name__/values",{method:yi.Get,params:l(s({},bu(t)),{"match[]":e})}).then((e=>null==e?void 0:e.data))}(S,t).then((e=>{const t=w.union(e),n=w.union(w.compact(w.map(t,(e=>w.get(w.split(e,"_"),"[0]")))));var r;h(t),x(n),(r=t,Si("/api/n9e/metrics/desc",{method:yi.Post,data:r,silence:!0}).then((e=>null==e?void 0:e.dat))).then((e=>{m(e)}))}))}),[i,S]),f.exports.useEffect((()=>{b([]),v("all"),h([])}),[r.id,S]),d.createElement("div",{className:"n9e-metric-views-metrics"},d.createElement("div",null,d.createElement("div",{className:"n9e-metric-views-metrics-header"},d.createElement("div",{className:"metric-page-title"},"监控指标"),d.createElement(St,{prefix:d.createElement(M,null),value:o,onChange:e=>{c(e.target.value)},placeholder:"搜索，空格分隔多个关键字",addonAfter:d.createElement(Z,{style:{cursor:"pointer"},onClick:()=>{a(w.uniqueId("refreshFlag_"))}})})),d.createElement("div",null,u.length>0?d.createElement(d.Fragment,null,d.createElement(jt,{size:"small",style:{width:"100%"},tabList:w.map(["all",...y],(e=>({key:e,tab:e}))),activeTabKey:g,onTabChange:v},d.createElement("div",null,((e=[],t)=>{const n=w.filter(e,(e=>{let n=!0;if(n="all"===t||0===e.indexOf(t),n&&o)try{n=new RegExp(o,"gi").test(e)}catch(Wh){n=!1}return n}));return d.createElement("div",{className:"tabPane",style:{height:240,overflow:"auto"}},n.length?d.createElement("ul",{className:"n9e-metric-views-metrics-content",style:{border:"none"}},w.map(n,((e,t)=>d.createElement("li",{className:"item",key:t,onClick:()=>{b(w.union(w.concat(e,E)))}},d.createElement("span",null,e),w.find(E,(t=>t===e))?d.createElement("span",{style:{marginLeft:8}},"+1"):null,p[e]?d.createElement(kt,{title:p[e]},d.createElement("span",{className:"desc"},p[e])):null)))):d.createElement("div",{style:{textAlign:"center"}},"No data"))})(u,g))),d.createElement(Ot,{style:{padding:"10px 0"}},d.createElement(It,{span:8},d.createElement(Ht,null,d.createElement(Au,{value:t,onChange:e=>{n(e)}}),d.createElement(Ku,{onChange:e=>{T(null===e?void 0:e)},initialValue:C}),d.createElement(Ct,{style:{padding:"4px 8px"},onClick:()=>{n(l(s({},t),{refreshFlag:w.uniqueId("refreshFlag_")}))},icon:d.createElement(Z,null)}))),d.createElement(It,{span:16,style:{textAlign:"right"}},d.createElement(Ct,{onClick:()=>{b([])},disabled:!E.length,style:{background:"#fff"}},"清空图表"))),w.map(E,((e,n)=>d.createElement(_ne,{key:e,metric:e,match:r,range:t,step:C,onClose:()=>{const e=[...E];e.splice(n,1),b(e)}})))):d.createElement("div",{style:{marginTop:12}},"暂无指标数据，请选择左侧 Lables"))))}function One(){const[e,t]=f.exports.useState(),[n,r]=f.exports.useState({start:"now-1h",end:"now"}),[i,a]=f.exports.useState(w.uniqueId("rerenderFlag_"));return d.createElement(ia,{title:"快捷视图",icon:d.createElement(E,null),hideCluster:!1,onChangeCluster:()=>{a(w.uniqueId("rerenderFlag_"))}},d.createElement("div",{className:"n9e-metric-views",key:i},d.createElement(xne,{onSelect:e=>{t(e)},range:n}),e?d.createElement(d.Fragment,null,d.createElement(Ene,{range:n,value:e,onChange:e=>{t(e)}}),d.createElement(Ane,{range:n,setRange:r,match:e})):null))}const Ine=function(e){return Si("/api/n9e/metric-descriptions",{method:yi.Get,params:e})};const{confirm:Mne}=Ft,{TextArea:Nne}=St,Fne=()=>{const{t:e}=Hr(),[t]=Tt.useForm(),n=f.exports.useRef(null),r=f.exports.useRef(null),[i,a]=f.exports.useState(!1),[o,l]=f.exports.useState("create"),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState({}),[m,g]=f.exports.useState(""),v=C(),y={import:e("导入"),edit:e("编辑"),export:e("导出"),create:e("创建")},x=()=>{a(!1)},E=t=>{var r;(r=[t.id],Si("/api/n9e/metric-descriptions",{method:yi.Delete,data:{ids:r}})).then((async t=>{await n.current.refreshList(),xt.success(e("删除指标成功"))}))},[b,w]=f.exports.useState(e("更多操作")),T=t=>{switch(t){case"import":a(!0),l("import");break;case"export":c.length<=0?xt.warning(e("请勾选需要导出的指标")):(a(!0),l("export"),setTimeout((()=>{r.current&&r.current.focus()})))}w(t)},S=(e,t,n,r)=>t.id===h.id?d.createElement(St,{defaultValue:e,onPressEnter:()=>k("save"),onChange:e=>((e,t,n,r)=>{let i=Object.assign({},t);i[r]=e.target.value,p(i)})(e,t,0,r)}):d.createElement("span",null,e),k=async(t="")=>{if("save"===t){let t=h.id||-1;await function(e,t){return Si(`/api/n9e/metric-description/${e}`,{method:yi.Put,data:t})}(t,{description:h.description,metric:h.metric}),xt.success(e("编辑成功")),n.current.refreshList()}p({})},_=[{title:e("指标名称"),dataIndex:"metric",key:"metric",render:(e,t)=>d.createElement("a",{onClick:()=>{let n={pathname:"/metric/explorer",state:{name:e,description:t.description}};v.push(n)}},e)},{title:e("释义"),dataIndex:"description",width:"40%",key:"description",render:(e,t,n)=>S(e,t,0,"description")},{title:e("操作"),dataIndex:"",key:"operations",width:"15%",render:(t,n)=>d.createElement("div",{className:"operations"},n.id!==h.id?d.createElement("div",null,d.createElement("span",{className:"operation-item edit",onClick:()=>(e=>{p(e)})(n)},e("编辑")),d.createElement("div",{className:"table-operator-area-warning",style:{display:"inline-block",marginLeft:10},onClick:()=>{Mne({title:e("确定删除该指标?"),icon:d.createElement(Ve,null),onOk:()=>{E(n)}})}},e("删除"))):d.createElement("div",null,d.createElement("span",{className:"operation-item edit-save",onClick:()=>k("save")},e("保存")),d.createElement("span",{className:"operation-item edit-cancel",onClick:()=>k("cancel")},e("取消"))))}],A={onChange:(e,t)=>{let n=[];t.map((e=>{n.push(`${e.metric}:${e.description}`)})),u(n)}};return d.createElement(ia,{title:e("指标释义"),icon:d.createElement(We,null)},d.createElement("div",{className:"indicator-index"},d.createElement("div",{className:"indicator-operations"},d.createElement(St,{className:"searchInput",onPressEnter:e=>{let t=e.target.value;g(t)},prefix:d.createElement(M,null),placeholder:e("指标名称或释义")}),d.createElement("div",{className:"operations"},d.createElement(Ct.Group,null,d.createElement(Ct,{size:"middle",type:"default",icon:d.createElement(Xe,null),onClick:()=>T("import")},e("导入")),d.createElement(Ct,{size:"middle",type:"default",icon:d.createElement(qe,null),onClick:()=>T("export")},e("导出"))))),d.createElement("div",{className:"indicator-main"},d.createElement(zte,{fetchHandle:Ine,ref:n,fetchParams:{query:m},rowSelection:s({},A),rowKey:e=>e.id,columns:_}))),d.createElement(Ft,{title:y[o],destroyOnClose:!0,footer:"export"!==o&&[d.createElement(Ct,{key:"delete",onClick:x},e("取消")),d.createElement(Ct,{key:"submit",type:"primary",onClick:async()=>{try{const i=await t.validateFields();(r=i.metrics||"",Si("/api/n9e/metric-descriptions",{method:yi.Post,data:{data:r}})).then((async t=>{t&&t.success&&(await n.current.refreshList(),a(!1),xt.success(e("创建指标成功")))}))}catch(Wh){}var r}},e("确定"))],onCancel:x,visible:i},d.createElement("p",{style:{color:"#999"}},"export"===o?d.createElement("a",{onClick:()=>{di(c)}},"Download.txt"):d.createElement("span",null,e("一行一个"))),(()=>{switch(o){case"export":return d.createElement("div",{contentEditable:"true",suppressContentEditableWarning:!0,ref:r,style:{height:"200px",border:"1px solid #d9d9d9",overflow:"auto",padding:"10px"}},c.map(((e,t)=>d.createElement("div",{key:t},e))));case"import":case"create":return d.createElement(Tt,{name:o+"-dialog",form:t,preserve:!1},d.createElement(Tt.Item,{name:"metrics",key:"metrics",rules:[{required:!0,message:e("不能为空"),validateTrigger:"trigger"}]},d.createElement(Nne,{placeholder:"name:description",rows:4})))}})()))};const Lne=()=>{const{t:e}=Hr();return d.createElement(ia,{title:e("告警规则"),showBack:!0,hideCluster:!0},d.createElement(go,null))},Pne=()=>{const{t:e}=Hr(),t=vi().get("mode"),n=X(),r=f.exports.useMemo((()=>n.id),[n]),[i,a]=f.exports.useState({});f.exports.useEffect((()=>(o(),()=>{})),[r]);const o=async()=>{const e=await(t=r,Si(`/api/n9e/alert-rule/${t}`,{method:yi.Get}));var t;a(e.dat||{})};return d.createElement(ia,{title:e("告警规则"),showBack:!0,hideCluster:!0},i.id&&d.createElement(go,{detail:i,type:t?2:1}))};function Rne(e){const{series:t}=e;return d.createElement("div",{style:{height:200}},d.createElement(pp,{values:{custom:{drawStyle:"lines",fillOpacity:0,stack:"hidden",lineInterpolation:"smooth"},options:{legend:{displayMode:"hidden"},tooltip:{mode:"all"}}},series:t}))}const Dne={origin:"#573BA7",upper_bound:"#1A94FF",lower_bound:"#2ACA96",anomaly:"red"};function Bne(e){const{rid:t,uuid:n,promql:r,visible:i,setVisible:a}=e,[o,s]=f.exports.useState({start:"now-1h",end:"now"}),[l,c]=f.exports.useState(15),[u,h]=f.exports.useState([]);return f.exports.useEffect((()=>{const e=Eu(o),r=A(e.start).unix(),i=A(e.end).unix();let a=l;l||(a=Math.max(Math.floor((i-r)/240),1)),t&&n&&na({rid:t,uuid:n,start:r,end:i,step:a}).then((e=>{const t=w.map(w.filter(e.data,(e=>"predict"!==e.metric.value_type)),(e=>{const t=e.metric.value_type;return{name:`${t}`,data:e.values,color:Dne[t],lineDash:"origin"===t||"anomaly"===t?[]:[4,4]}})),n=[],r=w.cloneDeep(w.find(t,{name:"origin"})),i=w.find(t,{name:"lower_bound"}),a=w.find(t,{name:"upper_bound"});n.push({name:"lower_upper_bound",data:w.map(null==i?void 0:i.data,((e,t)=>a?[...e,null==a?void 0:a.data[t][1]]:[])),color:"#ddd",opacity:.5}),r&&n.push(r),h(n)}))}),[t,n,JSON.stringify(o),l]),d.createElement(Zt,{title:"曲线详情",width:800,placement:"right",onClose:()=>{a(!1)},visible:i},d.createElement("div",null,d.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},d.createElement(lo,{readonly:!0,url:"/api/n9e/prometheus",value:r}),d.createElement(Ht,null,d.createElement(_u,{value:o,onChange:s,refreshTooltip:`刷新间隔小于 step(${Iu(o,l)}s) 将不会更新数据`}),d.createElement(Ku,{value:l,onChange:e=>c(e),initialValue:l}))),d.createElement(Rne,{series:u})))}const zne={total:{border:"#9684C6",bg:"#EBE8F2",text:"总曲线数",title:"所有曲线"},success:{border:"#83D35C",bg:"#E8F4E3",text:"训练成功",title:"训练成功",status:1},fail:{border:"#EE5A52",bg:"#FCE7E6",text:"训练失败",title:"训练失败",status:2},training:{border:"#CCCCCC",bg:"#F4F4F4",text:"训练中",title:"训练中",status:0}};function Hne(){const[e,t]=f.exports.useState({}),[n,r]=f.exports.useState([]),[i,a]=f.exports.useState(""),[o,c]=f.exports.useState({}),[u,h]=f.exports.useState("total"),p=X();return f.exports.useEffect((()=>{var e;(e=p.id,Si("/api/fc-brain/jobs",{method:yi.Get,params:{id:e}}).then((e=>e.data))).then((e=>{t({total:e.total,success:e.success,fail:e.fail,training:e.training}),r(e.jobs)}))}),[p.id]),d.createElement(ia,{title:"训练结果",showBack:!0,hideCluster:!0},d.createElement("div",{className:"strategy-jobs-content"},d.createElement("div",{style:{padding:16}},d.createElement(Ot,{gutter:16},w.map(e,((t,n)=>d.createElement(It,{key:n,span:6},d.createElement("div",{style:{border:`1px solid ${zne[n].border}`,borderRadius:2,background:zne[n].bg,height:86,display:"flex",gap:16,alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>{h(n)}},d.createElement(Jt,{width:60,type:"circle",percent:t/e.total*100,strokeColor:zne[n].border,strokeWidth:12,trailColor:"#FFFFFF",format:()=>null}),d.createElement("div",null,d.createElement("div",{style:{fontSize:24,color:"#333",fontWeight:500}},t),d.createElement("div",{style:{color:"#666"}},zne[n].text))))))),d.createElement(Rt,{style:{marginTop:6},rowKey:"uuid",showHeader:!0,title:()=>d.createElement("h3",null,zne[u].title),dataSource:w.filter(n,(e=>i?e.promql.indexOf(i)>-1:"total"===u||e.status===zne[u].status)),columns:[{title:d.createElement(Ht,null,d.createElement("span",null,"PromQL"),d.createElement(St,{size:"small",prefix:d.createElement(M,null),value:i,onChange:e=>{a(e.target.value)}})),dataIndex:"promql",key:"promql"},{title:"结果",dataIndex:"train_detail",key:"train_detail"},{title:"操作",render:e=>2===e.status?null:d.createElement("a",{onClick:()=>{c({visible:!0,uuid:e.uuid,promql:e.promql})}},"曲线详情")}],locale:{emptyText:()=>0===e.total||0!==e.total&&0!==e.training?d.createElement("div",{style:{padding:"20px 0"}},d.createElement(Ke,{style:{fontSize:24}}),d.createElement("div",null,"曲线模型训练中")):d.createElement(en,{image:en.PRESENTED_IMAGE_SIMPLE})}}))),d.createElement(Bne,l(s({rid:p.id},o),{setVisible:e=>{c(l(s({},o),{visible:e}))}})))}const{confirm:jne}=Ft,Gne=()=>{const{t:e}=Hr(),t=C(),n=Jr(),[r,i]=f.exports.useState(""),{curBusiItem:a}=ri((e=>e.common)),[o,s]=f.exports.useState(void 0),[l,c]=f.exports.useState([]),[u,h]=f.exports.useState([]),[p,m]=f.exports.useState([]),[g,v]=f.exports.useState(!1),y=[{title:e("集群"),dataIndex:"cluster",render:e=>{const t=e.split(" ")||[];return t.length&&t.map(((e,t)=>d.createElement(Ua,{text:e,key:t})))||d.createElement("div",null)}},{title:e("标签"),dataIndex:"tags",render:e=>d.createElement(d.Fragment,null,e?e.map(((e,t)=>e?d.createElement("div",{key:t,style:{lineHeight:"16px"}},`${e.key} ${e.func} ${"in"===e.func?e.value.split(" ").join(", "):e.value}`):null)):"")},{title:e("屏蔽原因"),dataIndex:"cause",render:(e,t)=>d.createElement(d.Fragment,null,d.createElement(kt,{placement:"topLeft",title:e},d.createElement("div",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"16px"}},e)),"by ",t.create_by)},{title:e("屏蔽时间"),dataIndex:"btime",render:(t,n)=>d.createElement("div",{className:"shield-time"},d.createElement("div",null,e("开始:"),W(1e3*(null==n?void 0:n.btime)).format("YYYY-MM-DD HH:mm:ss")),d.createElement("div",null,e("结束:"),W(1e3*(null==n?void 0:n.etime)).format("YYYY-MM-DD HH:mm:ss")))},{title:e("操作"),width:"98px",dataIndex:"operation",render:(r,i)=>d.createElement(d.Fragment,null,d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{n({type:"shield/setCurShieldData",data:i}),(null==a?void 0:a.id)&&t.push(`/alert-mutes/edit/${i.id}?mode=clone`)}},e("克隆")),d.createElement("div",{className:"table-operator-area-warning",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{jne({title:e("确定删除该告警屏蔽?"),icon:d.createElement(Ve,null),onOk:()=>{x(i.id)},onCancel(){}})}},e("删除"))))}];f.exports.useEffect((()=>{b()}),[a]),f.exports.useEffect((()=>{E()}),[r,l,u]);const x=t=>{var n,r;(n={ids:[t]},r=a.id,Si(`/api/n9e/busi-group/${r}/alert-mutes`,{method:yi.Delete,data:n})).then((t=>{w(),t.err?xt.success(t.err):xt.success(e("删除成功"))}))},E=()=>{const e=JSON.parse(JSON.stringify(u)).filter((e=>{const t=e.tags.find((e=>e.key.indexOf(r)>-1||e.value.indexOf(r)>-1||e.func.indexOf(r)>-1));return(e.cause.indexOf(r)>-1||!!t)&&(l&&(null==l?void 0:l.indexOf(e.cluster))>-1||0===(null==l?void 0:l.length))}));m(e||[])},b=async()=>{if(a.id){v(!0);const{success:t,dat:n}=await(e={id:a.id},Si(`/api/n9e/busi-group/${e.id}/alert-mutes`,{method:yi.Get}));t&&(h(n||[]),v(!1))}var e},w=()=>{b()};return d.createElement(ia,{title:e("屏蔽规则"),icon:d.createElement(G,null),hideCluster:!0},d.createElement("div",{className:"shield-content"},d.createElement(Oa,{busiGroup:{onChange:e=>{s(e)}}}),(null==a?void 0:a.id)?d.createElement("div",{className:"shield-index"},d.createElement("div",{className:"header"},d.createElement("div",{className:"header-left"},d.createElement(Ya,{className:"strategy-table-search-left-refresh",onClick:()=>{w()}}),d.createElement(So,{onClusterChange:e=>c(e)}),d.createElement(St,{onPressEnter:e=>{let t=e.target.value;i(t)},className:"searchInput",prefix:d.createElement(M,null),placeholder:e("搜索标签、屏蔽原因")})),d.createElement("div",{className:"header-right"},d.createElement(Ct,{type:"primary",className:"add",ghost:!0,onClick:()=>{t.push("/alert-mutes/add")}},e("新增屏蔽规则")))),d.createElement(Rt,{rowKey:"id",pagination:{total:p.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:Ga,defaultPageSize:30},loading:g,dataSource:p,columns:y})):d.createElement(Ia,{text:"屏蔽规则"})))},{Option:$ne}=Lt,Yne=({field:e,remove:t,form:n})=>{const{t:r}=Hr(),[i,a]=f.exports.useState(""),[o,s]=f.exports.useState("==");f.exports.useEffect((()=>{const t=n.getFieldValue("tags");l(t[e.name].func)}),[e]);const l=e=>{let t="";"in"===e?t="可以输入多个值，用回车分割":"=~"===e&&(t="请输入正则表达式匹配标签value"),s(e),a(t)};return d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:[10,10],style:{marginBottom:"10px"}},d.createElement(It,{span:5},d.createElement(Tt.Item,{style:{marginBottom:0},name:[e.name,"key"],fieldKey:[e.name,"key"],rules:[{required:!0,message:r("key不能为空")}]},d.createElement(St,{placeholder:r("请输入屏蔽事件标签key")}))),d.createElement(It,{span:3},d.createElement(Tt.Item,{style:{marginBottom:0},name:[e.name,"func"],fieldKey:[e.name,"func"],initialValue:"=="},d.createElement(Lt,{suffixIcon:d.createElement(H,null),onChange:l},d.createElement($ne,{value:"=="},"=="),d.createElement($ne,{value:"=~"},"=~"),d.createElement($ne,{value:"in"},"in"),d.createElement($ne,{value:"not in"},"not in"),d.createElement($ne,{value:"!="},"!="),d.createElement($ne,{value:"!~"},"!~")))),d.createElement(It,{span:15},d.createElement(Tt.Item,{style:{marginBottom:0},name:[e.name,"value"],fieldKey:[e.name,"value"],rules:[{required:!0,message:r("value不能为空")}]},["not in","in"].includes(o)?d.createElement(Lt,{mode:"tags",open:!1,style:{width:"100%"},placeholder:r(i),tokenSeparators:[" "]}):d.createElement(St,{className:"ant-input",placeholder:r(i)}))),d.createElement(It,null,d.createElement(Y,{style:{marginTop:"8px"},onClick:()=>t(e.name)}))))},{Option:Une}=Lt,{TextArea:Vne}=St,Wne=({detail:e={},type:t,tagsObj:n={}})=>{const r=(new Date).getTime(),i=(new Date).getTime()+36e5,{t:a,i18n:o}=Hr(),{clusters:c}=ri((e=>e.common)),[u]=Tt.useForm(null),h=C(),[p,m]=f.exports.useState(!1),[g,v]=f.exports.useState("1h"),{curBusiItem:y,busiGroups:x}=ri((e=>e.common)),[E,b]=f.exports.useState(x);f.exports.useEffect((()=>{E.length||b(x)}),[JSON.stringify(x)]),f.exports.useEffect((()=>{const e=u.getFieldValue("btime"),t=u.getFieldValue("etime");return t&&e&&(A.duration(t-e).days(),A.duration(t-e).hours(),A.duration(t-e).minutes(),A.duration(t-e).seconds()),y?u.setFieldsValue({busiGroup:y.id}):E.length>0?u.setFieldsValue({busiGroup:E[0].id}):(xt.warning("无可用业务组"),h.push("/alert-mutes")),()=>{}}),[u]),f.exports.useEffect((()=>{var e;if((null==n?void 0:n.tags)&&(null==n?void 0:n.tags.length)>0){const t=null==(e=null==n?void 0:n.tags)?void 0:e.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));u.setFieldsValue({tags:t||[{}],cluster:[n.cluster],busiGroup:n.group_id})}}),[n]);const T=()=>{const e=u.getFieldValue("btime"),t=u.getFieldValue("etime");if(t&&e){const n=Math.floor(A.duration(t-e).asDays()),r=Math.floor(A.duration(t-e).hours()),i=Math.floor(A.duration(t-e).minutes()),a=Math.floor(A.duration(t-e).seconds());v(`${n?`${n}d `:""}${r?`${r}h `:""}${i?`${i}m `:""}${a?`${a}s`:""}`)}},[S,k]=f.exports.useState(!1),_=f.exports.useRef(0),O=f.exports.useMemo((()=>w.debounce((e=>{_.current+=1;const t=_.current;b([]),k(!0),ki(e).then((e=>{t===_.current&&(b(e.dat||[]),k(!1))}))}),500)),[]),I=d.createElement(Tt,l(s({form:u},{labelCol:{span:24},wrapperCol:{span:24}}),{layout:"vertical",className:"operate-form",onFinish:e=>{var t;m(!0);const n=null==(t=null==e?void 0:e.tags)?void 0:t.map((e=>l(s({},e),{value:Array.isArray(e.value)?e.value.join(" "):e.value}))),r=l(s({},e),{cluster:e.cluster.join(" "),btime:A(e.btime).unix(),etime:A(e.etime).unix(),tags:n}),i=u.getFieldValue("busiGroup");var o,c;(o=r,c=i,Si(`/api/n9e/busi-group/${c}/alert-mutes`,{method:yi.Post,data:o})).then((e=>{xt.success(a("新建告警屏蔽成功")),h.push("/alert-mutes")})).finally((()=>{m(!1)}))},onFinishFailed:()=>{m(!1)},initialValues:l(s({},e),{btime:(null==e?void 0:e.btime)?A(1e3*e.btime):A(r),etime:(null==e?void 0:e.etime)?A(1e3*e.etime):A(i),cluster:e.cluster?e.cluster.split(" "):c||["Default"]})}),d.createElement(jt,null,d.createElement(Tt.Item,{label:a("业务组："),name:"busiGroup"},d.createElement(Lt,{showSearch:!0,filterOption:!1,suffixIcon:d.createElement(H,null),onSearch:O,notFoundContent:S?d.createElement(tn,{size:"small"}):null},w.map(E,(e=>d.createElement(Une,{value:e.id,key:e.id},e.name))))),d.createElement(Tt.Item,{label:a("生效集群："),name:"cluster",rules:[{required:!0,message:a("生效集群不能为空")}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:e=>{e.includes("$all")&&u.setFieldsValue({cluster:["$all"]})}},d.createElement(Une,{value:"$all",key:"$all"},"$all"),null==c?void 0:c.map((e=>d.createElement(Une,{value:e,key:e},e))))),d.createElement(Ot,{gutter:10},d.createElement(It,{span:8},d.createElement(Tt.Item,{label:a("屏蔽开始时间："),name:"btime"},d.createElement(qt,{showTime:!0,onChange:T}))),d.createElement(It,{span:8},d.createElement(Tt.Item,{label:a("屏蔽时长：")},d.createElement(Lt,{suffixIcon:d.createElement(H,null),placeholder:a("请选择屏蔽时长"),onChange:e=>{v(e);const t=(new Date).getTime();if("forever"===e){const e=6048e9;return void u.setFieldsValue({btime:A(t),etime:A(t).add({seconds:e})})}const n=e.charAt(e.length-1),r=e.substr(0,e.length-1);u.setFieldsValue({btime:A(t),etime:A(t).add({[n]:r})})},value:g},$a.map(((e,t)=>d.createElement(Une,{key:t,value:e.value},e.value)))))),d.createElement(It,{span:8},d.createElement(Tt.Item,{label:a("屏蔽结束时间："),name:"etime"},d.createElement(qt,{showTime:!0,onChange:T})))),d.createElement(Ot,{gutter:[10,10],style:{marginBottom:"8px"}},d.createElement(It,{span:5},a("屏蔽事件标签Key："),d.createElement(kt,{title:a("这里的标签是指告警事件的标签，通过如下标签匹配规则过滤告警事件")},d.createElement(V,null))),d.createElement(It,{span:3},a("运算符：")),d.createElement(It,{span:16},a("标签Value："))),d.createElement(Tt.List,{name:"tags",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map(((e,t)=>d.createElement(Yne,{field:e,key:t,remove:n,form:u}))),d.createElement(Tt.Item,null,d.createElement($,{className:"control-icon-normal",onClick:()=>t()}))))),d.createElement(Tt.Item,{label:a("屏蔽原因"),name:"cause",rules:[{required:!0,message:a("请填写屏蔽原因")}]},d.createElement(Vne,{rows:3})),d.createElement(Tt.Item,s({},{labelCol:{span:0},wrapperCol:{span:24}}),d.createElement(Ot,{gutter:[10,10]},d.createElement(It,{span:1},d.createElement(Ct,{type:"primary",htmlType:"submit"},a(2===t?"克隆":"创建"))),d.createElement(It,{span:1,style:{marginLeft:40}},d.createElement(Ct,{onClick:()=>window.history.back()},a("取消")))))));return d.createElement("div",{className:"operate-form-index"},I)},Xne=()=>{const{t:e}=Hr(),t=g(),[n,r]=f.exports.useState(t.state);return d.createElement(ia,{title:e("告警屏蔽"),showBack:!0,hideCluster:!0},d.createElement("div",{className:"shield-add"},d.createElement(Wne,{tagsObj:n||void 0})))};const qne=()=>{const{t:e}=Hr(),t=C();ri((e=>e.common));const{curShieldData:n}=ri((e=>e.shield));n.id||t.push("/alert-mutes");const r=function(){const{search:e}=g();return d.useMemo((()=>new URLSearchParams(e)),[e])}().get("mode"),i=X();return f.exports.useMemo((()=>i.id),[i]),d.createElement(ia,{title:e("告警屏蔽"),showBack:!0,hideCluster:!0},d.createElement("div",{className:"shield-add"},n.id&&d.createElement(Wne,{detail:n,type:r?2:1})))},Kne=function(e,t){return Si(`/api/n9e/busi-group/${t}/alert-subscribes`,{method:yi.Delete,data:e})};const{confirm:Qne}=Ft,Zne=()=>{const{t:e}=Hr(),t=C(),[n,r]=f.exports.useState(""),{curBusiItem:i}=ri((e=>e.common)),[a,o]=f.exports.useState(void 0),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState(!1),v=[{title:e("集群"),dataIndex:"cluster",render:e=>{const t=e.split(" ")||[];return t.length&&t.map(((e,t)=>d.createElement(Ua,{text:e,key:t})))||d.createElement("div",null)}},{title:e("告警规则"),dataIndex:"rule_name",render:e=>d.createElement("div",null,e)},{title:e("订阅标签"),dataIndex:"tags",render:e=>d.createElement(d.Fragment,null,e?e.map(((e,t)=>e?d.createElement("div",{key:t},`${e.key} ${e.func} ${"in"===e.func?e.value.split(" ").join(", "):e.value}`):null)):"")},{title:e("告警接收组"),dataIndex:"user_groups",render:(e,t)=>{var n;return d.createElement(d.Fragment,null,null==(n=t.user_groups)?void 0:n.map((e=>d.createElement(Ua,{text:e.name,key:e.id}))))}},{title:e("编辑人"),ellipsis:!0,dataIndex:"update_by"},{title:e("操作"),width:"128px",dataIndex:"operation",render:(n,r)=>d.createElement(d.Fragment,null,d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{(null==i?void 0:i.id)&&t.push(`/alert-subscribes/edit/${r.id}`)}},e("编辑")),d.createElement("div",{className:"table-operator-area-normal",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{(null==i?void 0:i.id)&&t.push(`/alert-subscribes/edit/${r.id}?mode=clone`)}},e("克隆")),d.createElement("div",{className:"table-operator-area-warning",style:{cursor:"pointer",display:"inline-block"},onClick:()=>{Qne({title:e("确定删除该订阅规则?"),icon:d.createElement(Ve,null),onOk:()=>{y(r.id)},onCancel(){}})}},e("删除"))))}];f.exports.useEffect((()=>{E()}),[i]),f.exports.useEffect((()=>{x()}),[n,s,c]);const y=t=>{Kne({ids:[t]},i.id).then((t=>{b(),t.err?xt.success(t.err):xt.success(e("删除成功"))}))},x=()=>{const e=JSON.parse(JSON.stringify(c)).filter((e=>{var t,r,i;const a=null==(t=null==e?void 0:e.tags)?void 0:t.find((e=>e.key.indexOf(n)>-1||e.value.indexOf(n)>-1||e.func.indexOf(n)>-1)),o=null==(r=null==e?void 0:e.user_groups)?void 0:r.find((e=>{var t;return(null==(t=null==e?void 0:e.name)?void 0:t.indexOf(n))>-1}));return((null==(i=null==e?void 0:e.rule_name)?void 0:i.indexOf(n))>-1||!!a||!!o)&&(s&&(null==s?void 0:s.indexOf(e.cluster))>-1||0===(null==s?void 0:s.length))}));p(e||[])},E=async()=>{if(i.id){g(!0);const{success:t,dat:n}=await(e={id:i.id},Si(`/api/n9e/busi-group/${e.id}/alert-subscribes`,{method:yi.Get}));t&&(u(n||[]),g(!1))}var e},b=()=>{E()};return d.createElement(ia,{title:e("订阅规则"),icon:d.createElement(z,null),hideCluster:!0},d.createElement("div",{className:"shield-content"},d.createElement(Oa,{busiGroup:{onChange:e=>{o(e)}}}),(null==i?void 0:i.id)?d.createElement("div",{className:"shield-index"},d.createElement("div",{className:"header"},d.createElement("div",{className:"header-left"},d.createElement(Ya,{className:"strategy-table-search-left-refresh",onClick:()=>{b()}}),d.createElement(So,{onClusterChange:e=>l(e)}),d.createElement(St,{onPressEnter:e=>{let t=e.target.value;r(t)},className:"searchInput",prefix:d.createElement(M,null),placeholder:e("搜索规则、标签、接收组")})),d.createElement("div",{className:"header-right"},d.createElement(Ct,{type:"primary",className:"add",ghost:!0,onClick:()=>{t.push("/alert-subscribes/add")}},e("新增订阅规则")))),d.createElement(Rt,{rowKey:"id",pagination:{total:h.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:Ga,defaultPageSize:30},loading:m,dataSource:h,columns:v})):d.createElement(Ia,{text:"订阅规则"})))},{Option:Jne}=Lt,ere=({visible:e,ruleModalClose:t,subscribe:n})=>{const{t:r}=Hr(),{curBusiItem:i}=ri((e=>e.common)),[a,o]=f.exports.useState([]),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState(i.id),[m,g]=f.exports.useState("");f.exports.useEffect((()=>{p(i.id)}),[i]),f.exports.useEffect((()=>{x()}),[h]),f.exports.useEffect((()=>{v("")}),[]),f.exports.useEffect((()=>{E()}),[m,s]);const v=e=>{console.log(111),Ja({all:1,query:e,limit:200}).then((e=>{o(e.dat||[])}))},y=f.exports.useCallback(U.exports.debounce(v,400),[]),x=async()=>{const{success:e,dat:t}=await Yi({id:h});e&&l(t||[])},E=()=>{const e=JSON.parse(JSON.stringify(s)).filter((e=>e.name.indexOf(m)>-1||e.append_tags.join(" ").indexOf(m)>-1));u(e||[])},b=[{title:r("集群"),dataIndex:"cluster",render:e=>d.createElement("div",null,e)},{title:r("级别"),dataIndex:"severity",render:e=>d.createElement(Nt,{color:Hi[e-1]},"S",e)},{title:r("名称"),dataIndex:"name",render:(e,t)=>d.createElement("div",{className:"table-active-text",onClick:()=>{}},e)},{title:r("告警接收者"),dataIndex:"notify_groups_obj",render:(e,t)=>e.length&&e.map(((e,t)=>d.createElement(Ua,{text:e.nickname||e.username||e.name,key:t})))||d.createElement("div",null)},{title:r("附加标签"),dataIndex:"append_tags",render:e=>{const t=e||[];return t.length&&t.map(((e,t)=>d.createElement(Ua,{text:e,key:t})))||d.createElement("div",null)}},{title:r("更新时间"),dataIndex:"update_at",render:e=>W(1e3*Number(e)).format("YYYY-MM-DD HH:mm:ss")},{title:r("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Dt,{checked:e===La.Enable,disabled:!0,size:"small",onChange:()=>{}})},{title:r("操作"),dataIndex:"operator",fixed:"right",width:100,render:(e,t)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{C(t)}},r("订阅")))}],C=e=>{n(e)};return d.createElement(d.Fragment,null,d.createElement(Ft,{title:r("订阅告警规则"),footer:"",forceRender:!0,visible:e,onCancel:()=>{t()},width:"80%"},d.createElement("div",null,d.createElement(Lt,{style:{width:"280px"},value:h,onChange:e=>{p(e)},showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>y(e),onBlur:()=>v("")},a.map((e=>d.createElement(Jne,{value:e.id,key:e.id},e.name)))),d.createElement(St,{style:{marginLeft:10,width:"280px"},onPressEnter:e=>{let t=e.target.value;g(t)},prefix:d.createElement(M,null),placeholder:r("规则名称、附加标签")})),d.createElement("div",{className:"rule_modal_table"},d.createElement(Rt,{rowKey:"id",pagination:{total:c.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:Ga,defaultPageSize:30},dataSource:c,columns:b}))))},{Option:tre}=Lt,nre=({field:e,remove:t,form:n})=>{const{t:r}=Hr(),[i,a]=f.exports.useState(""),[o,s]=f.exports.useState("==");f.exports.useEffect((()=>{const t=n.getFieldValue("tags");l(t[e.name].func)}),[]);const l=e=>{let t="";"in"===e?t="可以输入多个值，用回车分割":"=~"===e&&(t="请输入正则表达式匹配标签value"),s(e),a(t)};return d.createElement(d.Fragment,null,d.createElement(Ot,{gutter:[10,10],style:{marginBottom:"10px"}},d.createElement(It,{span:5},d.createElement(Tt.Item,{style:{marginBottom:0},name:[e.name,"key"],fieldKey:[e.name,"key"],rules:[{required:!0,message:r("key不能为空")}]},d.createElement(St,{placeholder:r("请输入订阅事件标签key")}))),d.createElement(It,{span:3},d.createElement(Tt.Item,{style:{marginBottom:0},name:[e.name,"func"],fieldKey:[e.name,"func"],initialValue:"=="},d.createElement(Lt,{suffixIcon:d.createElement(H,null),onChange:l},d.createElement(tre,{value:"=="},"=="),d.createElement(tre,{value:"=~"},"=~"),d.createElement(tre,{value:"in"},"in"),d.createElement(tre,{value:"not in"},"not in"),d.createElement(tre,{value:"!="},"!="),d.createElement(tre,{value:"!~"},"!~")))),d.createElement(It,{span:15},d.createElement(Tt.Item,{style:{marginBottom:0},name:[e.name,"value"],fieldKey:[e.name,"value"],rules:[{required:!0,message:r("value不能为空")}]},["not in","in"].includes(o)?d.createElement(Lt,{mode:"tags",open:!1,style:{width:"100%"},placeholder:r(i),tokenSeparators:[" "]}):d.createElement(St,{className:"ant-input",placeholder:r(i)}))),d.createElement(It,null,d.createElement(Y,{style:{marginTop:"8px"},onClick:()=>t(e.name)}))))},{Option:rre}=Lt,ire=({detail:e={},type:t})=>{var n,r;const{t:i,i18n:a}=Hr(),{clusters:o}=ri((e=>e.common)),[c]=Tt.useForm(null),u=C(),{curBusiItem:h}=ri((e=>e.common)),[p,m]=f.exports.useState(!1),[g,v]=f.exports.useState(!1),[y,x]=f.exports.useState(),[E,b]=f.exports.useState([]),[T,S]=f.exports.useState(!0),[k,_]=f.exports.useState([]);f.exports.useEffect((()=>{O(),I("")}),[]),f.exports.useEffect((()=>{x({id:e.rule_id||0,name:e.rule_name})}),[e.rule_id]);const A=(e.user_groups?e.user_groups.filter((e=>!k.find((t=>e.id===t.id)))):[]).concat(k).map((e=>d.createElement(rre,{value:String(e.id),key:e.id},e.name))),O=async()=>{const e=await no();b(e||[])},I=async e=>{const t=await Za({query:e}),n=t.dat||t;_(n||[])},M=f.exports.useCallback(w.debounce(I,800),[]),N=e=>{v(!1),x(e),c.setFieldsValue({rile_id:e.id||0})};return d.createElement(d.Fragment,null,d.createElement("div",{className:"operate-form-index",id:T?"littleAffect":""},d.createElement(Tt,l(s({form:c},{labelCol:{span:24},wrapperCol:{span:24}}),{layout:"vertical",className:"operate-form",onFinish:n=>{var r;m(!0);const a=null==(r=null==n?void 0:n.tags)?void 0:r.map((e=>l(s({},e),{value:Array.isArray(e.value)?e.value.join(" "):e.value}))),o=l(s({},n),{tags:a,redefine_severity:n.redefine_severity?1:0,redefine_channels:n.redefine_channels?1:0,rule_id:y.id,user_group_ids:n.user_group_ids?n.user_group_ids.join(" "):"",new_channels:n.new_channels?n.new_channels.join(" "):"",cluster:n.cluster.join(" ")});var c,p;1===t?(c=[l(s({},o),{id:e.id})],p=h.id,Si(`/api/n9e/busi-group/${p}/alert-subscribes`,{method:yi.Put,data:c})).then((e=>{xt.success(i("编辑订阅规则成功")),u.push("/alert-subscribes")})).finally((()=>{m(!1)})):function(e,t){return Si(`/api/n9e/busi-group/${t}/alert-subscribes`,{method:yi.Post,data:e})}(o,h.id).then((e=>{xt.success(i("新建订阅规则成功")),u.push("/alert-subscribes")})).finally((()=>{m(!1)}))},onFinishFailed:()=>{m(!1)},initialValues:l(s({},e),{cluster:e.cluster?e.cluster.split(" "):o||["Default"],redefine_severity:!!(null==e?void 0:e.redefine_severity),redefine_channels:!!(null==e?void 0:e.redefine_channels),user_group_ids:(null==e?void 0:e.user_group_ids)?null==(n=null==e?void 0:e.user_group_ids)?void 0:n.split(" "):[],new_channels:null==(r=null==e?void 0:e.new_channels)?void 0:r.split(" ")})}),d.createElement(jt,null,d.createElement(Tt.Item,{label:i("生效集群："),name:"cluster",rules:[{required:!0,message:i("生效集群不能为空")}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:e=>{e.includes("$all")&&c.setFieldsValue({cluster:["$all"]})}},d.createElement(rre,{value:"$all",key:"$all"},"$all"),null==o?void 0:o.map(((e,t)=>d.createElement(rre,{value:e,key:t},e))))),d.createElement(Tt.Item,{label:i("订阅告警规则：")},!!(null==y?void 0:y.id)&&d.createElement(Ct,{type:"primary",ghost:!0,style:{marginRight:"8px"},onClick:()=>{(null==y?void 0:y.id)&&u.push(`/alert-rules/edit/${null==y?void 0:y.id}`)}},null==y?void 0:y.name),d.createElement(Me,{style:{cursor:"pointer",fontSize:"18px"},onClick:()=>{v(!0)}}),!!(null==y?void 0:y.id)&&d.createElement(we,{style:{cursor:"pointer",fontSize:"18px",marginLeft:5},onClick:()=>N({})})),d.createElement(Ot,{gutter:[10,10],style:{marginBottom:"8px"}},d.createElement(It,{span:5},i("订阅事件标签Key："),d.createElement(kt,{title:i("这里的标签是指告警事件的标签，通过如下标签匹配规则过滤告警事件")},d.createElement(V,null))),d.createElement(It,{span:3},i("运算符：")),d.createElement(It,{span:16},i("标签Value："))),d.createElement(Tt.List,{name:"tags",initialValue:[{}]},((e,{add:t,remove:n})=>d.createElement(d.Fragment,null,e.map(((r,i)=>d.createElement(nre,{field:r,fields:e,key:i,remove:n,add:t,form:c}))),d.createElement(Tt.Item,null,d.createElement($,{className:"control-icon-normal",onClick:()=>t()}))))),d.createElement(Tt.Item,{label:i("告警级别："),name:"redefine_severity",valuePropName:"checked"},d.createElement(At,{value:1,style:{lineHeight:"32px"},onChange:e=>{c.setFieldsValue({redefine_severity:e.target.checked?1:0}),S(!T)}},i("重新定义"))),d.createElement(Tt.Item,{label:i("新的告警级别："),name:"new_severity",initialValue:2,style:{display:c.getFieldValue("redefine_severity")?"block":"none"}},d.createElement(Bt.Group,null,d.createElement(Bt,{key:1,value:1},i("一级报警")),d.createElement(Bt,{key:2,value:2},i("二级报警")),d.createElement(Bt,{key:3,value:3},i("三级报警")))),d.createElement(Tt.Item,{label:i("通知媒介："),name:"redefine_channels",valuePropName:"checked"},d.createElement(At,{value:1,style:{lineHeight:"32px"},onChange:e=>{c.setFieldsValue({redefine_channels:e.target.checked?1:0}),S(!T)}},i("重新定义"))),d.createElement(Tt.Item,{label:i("新的通知媒介："),name:"new_channels",style:{display:c.getFieldValue("redefine_channels")?"block":"none"}},d.createElement(At.Group,null,E.map((e=>d.createElement(At,{value:e.key,key:e.label},e.label))))),d.createElement(Tt.Item,{label:i("订阅告警接收组："),name:"user_group_ids",rules:[{required:!0,message:i("告警接收组不能为空")}]},d.createElement(Lt,{mode:"multiple",showSearch:!0,optionFilterProp:"children",filterOption:!1,onSearch:e=>M(e),onBlur:()=>I("")},A)),d.createElement(Tt.Item,s({},{labelCol:{span:24},wrapperCol:{span:24}}),d.createElement(Ct,{type:"primary",htmlType:"submit",style:{marginRight:"8px"}},i(1===t?"编辑":2===t?"克隆":"创建")),1===t&&d.createElement(Ct,{danger:!0,style:{marginRight:"8px"},onClick:()=>{Ft.confirm({title:i("是否删除该告警规则?"),onOk:()=>{(null==e?void 0:e.id)&&Kne({ids:[e.id]},h.id).then((()=>{xt.success(i("删除成功")),u.push("/alert-subscribes")}))},onCancel(){}})}},i("删除")),d.createElement(Ct,{onClick:()=>window.history.back()},i("取消"))))),d.createElement(ere,{visible:g,ruleModalClose:()=>{v(!1)},subscribe:N})))},are=()=>{const{t:e}=Hr();return d.createElement(ia,{title:e("订阅规则"),showBack:!0},d.createElement("div",{className:"shield-add"},d.createElement(ire,null)))};const ore=()=>{const{t:e}=Hr();C(),ri((e=>e.common));const[t,n]=f.exports.useState(),r=function(){const{search:e}=g();return d.useMemo((()=>new URLSearchParams(e)),[e])}().get("mode"),i=X(),a=f.exports.useMemo((()=>i.id),[i]);f.exports.useEffect((()=>{o()}),[a]);const o=async()=>{const{dat:e}=await(t=a,Si(`/api/n9e/alert-subscribe/${t}`,{method:yi.Get}));var t;const r=e.tags.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));n(l(s({},e),{tags:r}))};return d.createElement(ia,{title:e("订阅规则"),showBack:!0},d.createElement("div",{className:"shield-add"},(null==t?void 0:t.id)&&d.createElement(ire,{detail:t,type:r?2:1})))};var sre={exports:{}},lre=de(sre.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));t.default=r.default,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){return e&&e.__esModule?e:{default:e}}t.default=c;var a=n(3),o=i(n(4)),s=n(14),l=i(n(15));function c(e){var t=e.activeClassName,n=void 0===t?"":t,i=e.activeIndex,o=void 0===i?-1:i,c=e.activeStyle,u=e.autoEscape,h=e.caseSensitive,p=void 0!==h&&h,d=e.className,f=e.findChunks,m=e.highlightClassName,g=void 0===m?"":m,v=e.highlightStyle,y=void 0===v?{}:v,x=e.highlightTag,E=void 0===x?"mark":x,b=e.sanitize,C=e.searchWords,w=e.textToHighlight,T=e.unhighlightClassName,S=void 0===T?"":T,k=e.unhighlightStyle,_=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightClassName","unhighlightStyle"]),A=(0,a.findAll)({autoEscape:u,caseSensitive:p,findChunks:f,sanitize:b,searchWords:C,textToHighlight:w}),O=E,I=-1,M="",N=void 0,F=(0,l.default)((function(e){var t={};for(var n in e)t[n.toLowerCase()]=e[n];return t}));return(0,s.createElement)("span",r({className:d},_,{children:A.map((function(e,t){var r=w.substr(e.start,e.end-e.start);if(e.highlight){I++;var i=void 0;i="object"==typeof g?p?g[r]:(g=F(g))[r.toLowerCase()]:g;var a=I===+o;M=i+" "+(a?n:""),N=!0===a&&null!=c?Object.assign({},y,c):y;var l={children:r,className:M,key:t,style:N};return"string"!=typeof O&&(l.highlightIndex=I),(0,s.createElement)(O,l)}return(0,s.createElement)("span",{children:r,className:S,key:t,style:k})}))}))}c.propTypes={activeClassName:o.default.string,activeIndex:o.default.number,activeStyle:o.default.object,autoEscape:o.default.bool,className:o.default.string,findChunks:o.default.func,highlightClassName:o.default.oneOfType([o.default.object,o.default.string]),highlightStyle:o.default.object,highlightTag:o.default.oneOfType([o.default.node,o.default.func,o.default.string]),sanitize:o.default.func,searchWords:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.instanceOf(RegExp)])).isRequired,textToHighlight:o.default.string.isRequired,unhighlightClassName:o.default.string,unhighlightStyle:o.default.object},e.exports=t.default},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return r.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return r.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return r.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return r.findChunks}})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=function(e){var t=e.autoEscape,a=e.caseSensitive,o=void 0!==a&&a,s=e.findChunks,l=void 0===s?r:s,c=e.sanitize,u=e.searchWords,h=e.textToHighlight;return i({chunksToHighlight:n({chunks:l({autoEscape:t,caseSensitive:o,sanitize:c,searchWords:u,textToHighlight:h})}),totalLength:h?h.length:0})};var n=t.combineChunks=function(e){var t=e.chunks;return t=t.sort((function(e,t){return e.start-t.start})).reduce((function(e,t){if(0===e.length)return[t];var n=e.pop();if(t.start<=n.end){var r=Math.max(n.end,t.end);e.push({start:n.start,end:r})}else e.push(n,t);return e}),[])},r=function(e){var t=e.autoEscape,n=e.caseSensitive,r=e.sanitize,i=void 0===r?a:r,o=e.searchWords,s=e.textToHighlight;return s=i(s),o.filter((function(e){return e})).reduce((function(e,r){r=i(r),t&&(r=r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));for(var a=new RegExp(r,n?"g":"gi"),o=void 0;o=a.exec(s);){var l=o.index,c=a.lastIndex;c>l&&e.push({start:l,end:c}),o.index==a.lastIndex&&a.lastIndex++}return e}),[])};t.findChunks=r;var i=t.fillInChunks=function(e){var t=e.chunksToHighlight,n=e.totalLength,r=[],i=function(e,t,n){t-e>0&&r.push({start:e,end:t,highlight:n})};if(0===t.length)i(0,n,!1);else{var a=0;t.forEach((function(e){i(a,e.start,!1),i(e.start,e.end,!0),a=e.end})),i(a,n,!1)}return r};function a(e){return e}}])},function(e,t,n){(function(t){e.exports=n(13)()}).call(t,n(5))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(Wh){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(Wh){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(Wh){r=o}}();var l,c=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(Wh){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(t){var r=n(7),i=n(8),a=n(9),o=n(10),s=n(11),l=n(12);e.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,c="<<anonymous>>",u={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:d(r.thatReturnsNull),arrayOf:function(e){return d((function(t,n,r,i,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var o=t[n];if(!Array.isArray(o))return new p("Invalid "+i+" `"+a+"` of type `"+g(o)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<o.length;l++){var c=e(o,l,r,i,a+"["+l+"]",s);if(c instanceof Error)return c}return null}))},element:d((function(t,n,r,i,a){var o=t[n];return e(o)?null:new p("Invalid "+i+" `"+a+"` of type `"+g(o)+"` supplied to `"+r+"`, expected a single ReactElement.")})),instanceOf:function(e){return d((function(t,n,r,i,a){if(!(t[n]instanceof e)){var o=e.name||c;return new p("Invalid "+i+" `"+a+"` of type `"+((s=t[n]).constructor&&s.constructor.name?s.constructor.name:c)+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}var s;return null}))},node:d((function(e,t,n,r,i){return m(e[t])?null:new p("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return d((function(t,n,r,i,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var o=t[n],l=g(o);if("object"!==l)return new p("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in o)if(o.hasOwnProperty(c)){var u=e(o,c,r,i,a+"."+c,s);if(u instanceof Error)return u}return null}))},oneOf:function(e){return Array.isArray(e)?d((function(t,n,r,i,a){for(var o=t[n],s=0;s<e.length;s++)if(h(o,e[s]))return null;return new p("Invalid "+i+" `"+a+"` of value `"+o+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")})):r.thatReturnsNull},oneOfType:function(e){if(!Array.isArray(e))return r.thatReturnsNull;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return a(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",y(n),t),r.thatReturnsNull}return d((function(t,n,r,i,a){for(var o=0;o<e.length;o++)if(null==(0,e[o])(t,n,r,i,a,s))return null;return new p("Invalid "+i+" `"+a+"` supplied to `"+r+"`.")}))},shape:function(e){return d((function(t,n,r,i,a){var o=t[n],l=g(o);if("object"!==l)return new p("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var h=u(o,c,r,i,a+"."+c,s);if(h)return h}}return null}))},exact:function(e){return d((function(t,n,r,i,a){var l=t[n],c=g(l);if("object"!==c)return new p("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var u=o({},t[n],e);for(var h in u){var d=e[h];if(!d)return new p("Invalid "+i+" `"+a+"` key `"+h+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=d(l,h,r,i,a+"."+h,s);if(f)return f}return null}))}};function h(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e){this.message=e,this.stack=""}function d(e){function n(n,r,a,o,l,u,h){return o=o||c,u=u||a,h!==s&&t&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),null==r[a]?n?null===r[a]?new p("The "+l+" `"+u+"` is marked as required in `"+o+"`, but its value is `null`."):new p("The "+l+" `"+u+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(r,a,o,l,u)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function f(e){return d((function(t,n,r,i,a,o){var s=t[n];return g(s)!==e?new p("Invalid "+i+" `"+a+"` of type `"+v(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,a=r.call(t);if(r!==t.entries){for(;!(i=a.next()).done;)if(!m(i.value))return!1}else for(;!(i=a.next()).done;){var o=i.value;if(o&&!m(o[1]))return!1}return!0;default:return!1}}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function v(e){if(null==e)return""+e;var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function y(e){var t=v(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return p.prototype=Error.prototype,u.checkPropTypes=l,u.PropTypes=u,u}}).call(t,n(5))},function(e,t){function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){(function(t){e.exports=function(e,t,n,r,i,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}}).call(t,n(5))},function(e,t,n){(function(t){var r=n(7);e.exports=r}).call(t,n(5))},function(e,t){var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var o,s,l=a(e),c=1;c<arguments.length;c++){for(var u in o=Object(arguments[c]))r.call(o,u)&&(l[u]=o[u]);if(n){s=n(o);for(var h=0;h<s.length;h++)i.call(o,s[h])&&(l[s[h]]=o[s[h]])}}return l}},function(e,t){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){(function(t){e.exports=function(e,t,n,r,i){}}).call(t,n(5))},function(e,t,n){var r=n(7),i=n(8),a=n(11);e.exports=function(){function e(e,t,n,r,o,s){s!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t){e.exports=f.exports},function(e,t){var n=function(e,t){return e===t};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=void 0,i=[],a=void 0,o=!1,s=function(e,n){return t(e,i[n])},l=function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];return o&&r===this&&n.length===i.length&&n.every(s)?a:(o=!0,r=this,i=n,a=e.apply(this,n))};return l}}]));function cre(e,t){const[n,r]=f.exports.useState(e);return f.exports.useEffect((()=>{const n=setTimeout((()=>{r(e)}),t);return()=>{clearTimeout(n)}}),[e,t]),n}var ure={"zh-CN":{back:"返回","table.search.placeholder":"模糊搜索表格内容(多个关键词请用空格分隔。如：key1 key2)","table.sort.ascend":"升序","table.sort.descend":"降序","table.total.prefix":"共","table.total.suffix":"条","table.select.num":"已选择: ","table.filter.search.placeholder":"请输入要搜索的内容","table.filter.search.btn.ok":"搜索","table.filter.search.btn.cancel":"清空","table.filter.header.title":"过滤条件:","table.filter.header.search":":搜索","table.filter.header.filter":":过滤","table.filter.header.btn.clear":"清空","form.item.key.title":"自定义Key","form.item.value.title":"自定义Value","form.detail.nodata":"暂无数据","form.item.key.placeholder":"请输入Key","form.item.value.placeholder":"请输入Value","form.item.add":"增加自定义参数","form.placeholder.prefix":"请输入","form.selectplaceholder.prefix":"请选择","queryform.reset":"重置","queryform.search":"查询","queryform.collapsed":"收起","queryform.expand":"展开","color.placeholder":"请选择颜色"},"en-US":{back:"Back","table.search.placeholder":"Fuzzy search table content (multiple keywords separated by Spaces. Such as: key1 key2)","table.sort.ascend":"Ascend","table.sort.descend":"Descend","table.total.prefix":"Total","table.total.suffix":"Items","table.select.num":"Selected: ","table.filter.search.placeholder":"Please enter keywords","table.filter.search.btn.ok":"Search","table.filter.search.btn.cancel":"Clear","table.filter.header.title":"Filtration Conditions:","table.filter.header.search":": Search","table.filter.header.filter":": Filter","table.filter.header.btn.clear":"Clear","form.item.key.title":"Custom Key","form.item.value.title":"Custom Value","form.detail.nodata":"No Data","form.item.key.placeholder":"Please enter key","form.item.value.placeholder":"Please enter value","form.item.add":"Add Custom Parameters","form.placeholder.prefix":"Please enter","form.selectplaceholder.prefix":"Please select","queryform.reset":"Clear","queryform.search":"Search","queryform.collapsed":"Collapsed","queryform.expand":"Expand","color.placeholder":"Please select color"}};const hre=e=>ure["zh-CN"][e],pre="object"==typeof window,dre=(e,t=!1)=>{const[n,r]=f.exports.useState(pre?()=>window.matchMedia(e).matches:t);return f.exports.useEffect((()=>{let t=!0;const n=window.matchMedia(e),i=()=>{t&&r(!!n.matches)};return n.addListener(i),r(n.matches),()=>{t=!1,n.removeListener(i)}}),[e]),n},fre={xs:"(max-width: 575px)",sm:"(min-width: 576px) and (max-width: 767px)",md:"(min-width: 768px) and (max-width: 991px)",lg:"(min-width: 992px) and (max-width: 1199px)",xl:"(min-width: 1200px) and (max-width: 1599px)",xxl:"(min-width: 1600px)"},mre=()=>{const e=dre(fre.md),t=dre(fre.lg),n=dre(fre.xxl),r=dre(fre.xl),i=dre(fre.sm),a=dre(fre.xs),[o,s]=f.exports.useState((()=>{let e="md";return"undefined"==typeof window||(e=Object.keys(fre).find((e=>{const t=fre[e];return!!window.matchMedia(t).matches}))),e})());return f.exports.useEffect((()=>{s(n?"xxl":r?"xl":t?"lg":e?"md":i?"sm":a?"xs":"md")}),[e,t,n,r,i,a]),o};var gre="undefined"!=typeof Element,vre="function"==typeof Map,yre="function"==typeof Set,xre="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function Ere(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,r,i,a;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!Ere(e[r],t[r]))return!1;return!0}if(vre&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;for(a=e.entries();!(r=a.next()).done;)if(!Ere(r.value[1],t.get(r.value[0])))return!1;return!0}if(yre&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(xre&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(gre&&e instanceof Element)return!1;for(r=n;0!=r--;)if(("_owner"!==i[r]&&"__v"!==i[r]&&"__o"!==i[r]||!e.$$typeof)&&!Ere(e[i[r]],t[i[r]]))return!1;return!0}return e!=e&&t!=t}const bre=function(e,t){try{return Ere(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}},Cre=(e,t)=>{((e,t,n)=>{const r=f.exports.useRef(void 0);r.current&&n(t,r.current)||(r.current=t),f.exports.useEffect(e,r.current)})(e,t,bre)},wre=Tt.Item,{Option:Tre}=Lt,Sre={xs:24,sm:24,md:12,lg:12,xl:8,xxl:6},kre={labelCol:{xs:{span:5},sm:{span:5},md:{span:7},lg:{span:7},xl:{span:8},xxl:{span:8}},wrapperCol:{xs:{span:19},sm:{span:19},md:{span:17},lg:{span:17},xl:{span:16},xxl:{span:16}}},_re=(e,t)=>{if("number"==typeof e)return e;return s(s({},Sre),e)[t]},Are=(e,t=8)=>{const n=24/t;return(n-1-e%n)*t},Ore=e=>{const t=`${e.prefixCls||"dantd"}-query-form`,n=hre,{className:r,style:i,colConfig:a,searchText:o,resetText:c,showOptionBtns:u=!0,showCollapseButton:h=!0,defaultCollapse:p=!1,isResetClearAll:m=!1,onChange:g,onSearch:v,onReset:y,getFormInstance:x,columns:E=[],mode:b="full",colMode:C="grid",columnStyleHideNumber:w=1,defaultColStyle:T={width:"300px"}}=e,S=P(t,r),k=P({[`${t}-formitem`]:!0,[`${t}-formitem-full`]:"full"===b}),_=mre(),A=a||Sre,[O,M]=f.exports.useState(_re(A||8,_)),[N]=Tt.useForm(),{validateFields:F,getFieldsValue:L,resetFields:R,setFieldsValue:D}=N,[B,z]=f.exports.useState(p),H=L();f.exports.useEffect((()=>{M(_re(A||8,_))}),[_]),f.exports.useEffect((()=>{x&&x(N)}),[]),Cre((()=>{g&&Object.keys(H).length>0&&g(H,N)}),[H]);const j={6:3,8:2,12:1,24:1}[_re(A||8,_)]||1;const G=()=>{F().then((e=>{v&&v(e,N)}))},$=()=>{if(m){const e=E.reduce(((e,t)=>t.dataIndex?l(s({},e),{[Array.isArray(t.dataIndex)?t.dataIndex.join("."):t.dataIndex]:void 0}):s({},e)),{});D(e)}else R();setTimeout((()=>{y&&y(L(),N)}))},Y=()=>{G()};return d.createElement(nn,s({},e.antConfig),d.createElement("div",{className:S,style:i},d.createElement(Tt,{form:N,layout:"inline"},d.createElement(Ot,{gutter:[12,12]},E.map(((e,t)=>{let r=B&&j<=t,i={};return"style"===C&&(i=e.colStyle||T,B&&t>=w&&(r=!0)),i=l(s({},i),{display:r?"none":"block"}),d.createElement(It,s({style:i,key:`query-form-col-${e.dataIndex}-${t}`},A),"input"===e.type&&(e=>{const{initialValue:t,dataIndex:r,title:i,required:a,componentProps:o={},placeholder:c,isInputPressEnterCallSearch:u,formItemLayout:h,rules:p,size:f="default"}=e,m=c||n("form.placeholder.prefix");let g=[];a&&(g=[{required:!0,message:m}]);const v=h||"align"===b?kre:{};return d.createElement(wre,l(s({name:r,label:i,className:k},v),{initialValue:t,rules:p||g}),d.createElement(St,s({"data-testid":"field-input",size:f,maxLength:255,placeholder:m,onPressEnter:u?Y:()=>{}},o)))})(e),"select"===e.type&&(e=>{const{initialValue:t,dataIndex:r,title:i,required:a,placeholder:o,selectMode:c="single",rules:u,formItemLayout:h,options:p=[],componentProps:f={},size:m="default"}=e,g=o||d.createElement(d.Fragment,null,n("form.selectplaceholder.prefix")," ",i);let v=[];a&&(v=[{required:!0,message:g}]);const y=h||"align"===b?kre:{};return d.createElement(wre,l(s({name:r,label:i,className:k},y),{initialValue:t,rules:u||v}),d.createElement(Lt,s({"data-testid":"select",mode:c,size:m,allowClear:!0,placeholder:g,showSearch:!0,optionFilterProp:"children",style:{width:"100%"}},f),p.map((e=>d.createElement(Tre,{key:`query-form-select-option-${e.value}`,"data-testid":"select-option",value:e.value},e.title)))))})(e),"custom"===e.type&&(e=>{const{initialValue:t,formItemLayout:r,dataIndex:i,title:a,required:o,placeholder:c,rules:u,valuePropName:h="value",component:p}=e,f=c||d.createElement(d.Fragment,null,n("form.placeholder.prefix")," ",a);let m=[];o&&(m=[{required:!0,message:f}]);const g=r||"align"===b?kre:{};return d.createElement(wre,l(s({name:i,label:a,className:k},g),{initialValue:t,rules:u||m,valuePropName:h}),p)})(e))})),u&&(()=>{const e=B?E.length<=j?Are(E.length,O):Are(j,O):Are(E.length,O);let r={};return"style"===C&&(r={position:"absolute",width:280,bottom:0,right:0,marginLeft:0}),d.createElement(It,l(s({},A),{offset:e,key:"option",className:`${t}-option`,style:s({},r)}),d.createElement(Tt.Item,null,d.createElement("span",null,d.createElement(Ct,{onClick:$},c||n("queryform.reset")),d.createElement(Ct,{onClick:G,style:{marginLeft:10},type:"primary",htmlType:"submit"},o||n("queryform.search")),h&&d.createElement("a",{style:{marginLeft:10,display:"inline-block"},onClick:()=>{z(!B)}},n(B?"queryform.expand":"queryform.collapsed"),d.createElement(I,null)))))})()))))},Ire=["10","20","50","100"];function Mre(e,t){switch(t.type){case"update":return l(s({},e),{[t.dataIndex]:l(s({},e[t.dataIndex]),{dataIndex:t.dataIndex,type:t.updateType,value:t.value})});case"clear":return s({},t.initialState);default:return e}}function Nre(e,t){switch(t.type){case"update":return s({},t.value);case"clear":return{};default:return e}}var Fre=d.forwardRef((function(e,t){const n=`${e.prefixCls||"dantd"}-data-table`,r=e.filterType||"half",i=f.exports.useRef(),a=hre,{fetchOptions:o={},searchParams:c,showFilter:u=!0,showReloadBtn:h=!0,showQueryOptionBtns:p=!0,showQueryCollapseButton:m=!0,isQuerySearchOnChange:g=!0,showBodyBg:v=!1,queryFormProps:y={},url:x,queryMode:E="default",reloadBtnPos:b="right",searchPos:C="full",reloadBtnType:T="icon",queryFormColumns:S,pageParams:k,antProps:_={rowKey:"id"}}=e,A=P(n,e.className),O=P({[`${n}-table-content`]:!0,[`${n}-table-content-noborder`]:e.hideContentBorder}),I=P({[`${n}-body`]:!!S||v,[`${n}-body-compact`]:"compact"===E}),N=P({[`${n}-query`]:!!S,[`${n}-query-compact`]:"compact"===E}),F=f.exports.useMemo((()=>{const t={};return e.columns&&e.columns.length>0&&e.columns.forEach((e=>{e.dataIndex&&(t[e.dataIndex]=l(s({},e),{value:null}))})),t}),[e.columns]),[L,R]=f.exports.useState({}),[D,z]=f.exports.useState(!1),H=f.exports.useRef(!1),j=f.exports.useRef({}),G=f.exports.useRef({}),[$,Y]=f.exports.useState([]),[U,V]=f.exports.useState(!1),[W,X]=f.exports.useReducer(Nre,{}),[q,K]=f.exports.useState(!1),[Q,Z]=f.exports.useState(),J=e.rowSelection,ee=J?J.selectedRowKeys&&J.selectedRowKeys.length:-1,te={ascend:a("table.sort.ascend"),descend:a("table.sort.descend")},ne=!!c,re=ne&&"full"===C,ie="full"===C&&h&&"right"===b,ae=(!ne||"full"!==C)&&h&&"right"===b,oe=h&&"left"===b,se=c?c.placeholder:a("table.search.placeholder"),[le,ce]=f.exports.useState(s({current:1,pageSize:10,total:0},k)),[ue,he]=f.exports.useReducer(Mre,F),pe=cre(Q,300),de=cre(JSON.stringify(L),300),fe=JSON.stringify({pageSize:le.pageSize,current:le.current}),me=JSON.stringify(s(s({},ue),W));async function ge(t){let n=x,r=null;if(-1!==n.indexOf("?")){const e=n.split("?");n=e[0],r=ii.parse(e[1],{arrayFormat:"comma"})}let i={[k.curPageName]:t.current,[k.pageSizeName]:t.pageSize};r&&(i=s(s({},r),i)),0===k.startPage&&(i[k.curPageName]-=1),e.columns.forEach((e=>{e.dataIndex&&t[e.dataIndex]&&(i[e.dataIndex]=t[e.dataIndex]),e.apiSearch&&t[e.apiSearch.name]&&(i[e.apiSearch.name]=t[e.apiSearch.name]),e.apiFilter&&t[e.apiFilter.name]&&(i[e.apiFilter.name]=t[e.apiFilter.name]),e.apiSorter&&t[e.apiSorter.name]&&(i[e.apiSorter.name]=t[e.apiSorter.name])})),c&&t[c.apiName]&&(i[c.apiName]=t[c.apiName]),S&&L&&Object.keys(L).length>0&&(i=s(s({},L),i)),e.customQueryCallback&&(i=e.customQueryCallback(s({},i))),n=`${n}?${ii.stringify(i,{arrayFormat:"comma"})}`,e.customFetchUrlCallback&&(n=e.customFetchUrlCallback(n)),V(!0);let a=s({},o);o.method&&"post"===o.method.toLowerCase()&&(a.data=i);const u=Si(n,a);e.rowSelection&&e.rowSelection.onChange&&e.rowSelection.onChange([]),(u.status<200||u.status>=300)&&e.apiErrorCallback?(e.apiErrorCallback(u),V(!1)):u.then((async t=>{let n=t;e.apiCallback&&(n=e.apiCallback(t)),e.apiAsyncCallback&&(n=await e.apiAsyncCallback(t)),Y(n.data);const r=l(s({},le),{total:n.total});ce(r),V(!1)})).catch((()=>{e.apiErrorCallback&&e.apiErrorCallback(u),V(!1)}))}f.exports.useEffect((()=>{if(x&&i.current!==x){ge(be()),setTimeout((()=>{i.current=x}))}}),[x]),f.exports.useEffect((()=>{if(!i.current)return;let t=be();t[le.curPageName]=1,c&&pe&&pe.trim()&&(t[c.apiName]=pe.trim()),e.onSearch&&e.onSearch(pe?pe.trim():pe),ge(t)}),[pe]),f.exports.useEffect((()=>{if(!i.current)return;if(!S||L&&0===Object.keys(L).length)return;let e=be();e[le.curPageName]=1,ge(e)}),[de]),f.exports.useEffect((()=>{if(!i.current)return;ge(be())}),[me]),f.exports.useEffect((()=>{if(!i.current||!le.pageSize)return;if(H.current)return void(H.current=!1);ge(be())}),[fe]);const ve=f.exports.useCallback(((e,t,n)=>{t&&t(),e&&n&&he({type:"update",dataIndex:n,updateType:"search",value:e[0]})}),[]),ye=f.exports.useCallback(((e,t)=>{e&&e([]),t&&he({type:"update",dataIndex:t})}),[]),xe=()=>{X({type:"clear"}),he({type:"clear",initialState:F}),K(!1),setTimeout((()=>{Object.values(G.current).forEach((e=>{e&&e.clearFilters&&e.clearFilters([])}))}))},Ee=()=>{X({type:"clear"}),Te(null,{})},be=()=>{let e=s({},le);return W&&W.order&&(e[W.column.apiSorter.name]=W.column.apiSorter[W.order]),Object.values(ue).forEach((t=>{const n=t.dataIndex,r=t.value;if(t.apiFilter&&r){let i=F[n].apiFilter?F[n].apiFilter.name:n;e[i]=r,t.apiFilter.callback&&(e[i]=F[n].apiFilter.callback(r))}if(t.apiSearch&&r){const t=F[n].apiSearch?F[n].apiSearch.name:n;e[t]=Array.isArray(r)?r[0]:r}})),c&&Q&&(e[c.apiName]=Q),(S||L&&Object.keys(L).length>0)&&(e=s(s({},L),e)),e},Ce=()=>{ge(be())},we=e=>{const t=e.target.value;Z(t),ce(l(s({},le),{current:1}))},Te=(e,t,n)=>{const r=t||W,i=e||ue,a=n||ue,o=Object.values(a).some((e=>!("search"!==e.type||!e.value)));let s=!1;s=e?Object.values(i).some((e=>e&&e.length>0)):Object.values(i).some((e=>!!("filter"===e.type&&e.value&&e.value.length>0)));const l=!!r.column;K(o||s||l)},Se=Object.values(ue).some((e=>!("search"!==e.type||!e.value))),ke=Object.values(ue).some((e=>!!("filter"===e.type&&e.value&&e.value.length>0)));f.exports.useImperativeHandle(t,(()=>({handleReload:Ce,goToFirstPage:()=>{ce(l(s({},le),{current:1}))}})));const _e=e=>u?d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("b",{style:{marginTop:4,display:"inline-block"}},a("table.filter.header.title"))),(Se||ke)&&Object.values(ue).map((t=>{if("search"===t.type&&t.value)return d.createElement("div",{key:`search-header-${t.dataIndex}`,className:`${e.headerClsPrefix}-item`},d.createElement(kt,{title:d.createElement("span",null,t.title,":"," ",t.value)},d.createElement(Ct,{size:"small",className:"table-header-item-btn",onClick:()=>(e=>{he({type:"update",dataIndex:e.dataIndex}),G.current[e.dataIndex]&&G.current[e.dataIndex].clearFilters&&G.current[e.dataIndex].clearFilters([]),Te(null,W,l(s({},ue),{[e.dataIndex]:{title:ue[e.dataIndex].title,dataIndex:ue[e.dataIndex].dataIndex,value:null}}))})(t)},d.createElement("span",{className:"table-header-item-btn-content"},t.title,":"," ",t.value),d.createElement(Be,null))));if("filter"===t.type&&t.value&&t.value.length>0){const n=(F[t.dataIndex]?F[t.dataIndex].filters:[]).reduce(((e,t)=>l(s({},e),{[t.value]:[t.text]})),{}),r=t.value.map((e=>n&&n[e]?n[e]:e));return d.createElement("div",{key:`search-header-${t.dataIndex}`,className:`${e.headerClsPrefix}-item`},d.createElement(kt,{title:d.createElement("span",null,t.title,":"," ",r.join(","))},d.createElement(Ct,{size:"small",className:"table-header-item-btn",onClick:()=>(e=>{he({type:"update",dataIndex:e.dataIndex,value:[]});const t=Object.values(ue).map((t=>t.dataIndex===e.dataIndex?{[t.dataIndex]:[]}:{[t.dataIndex]:t.value||[]}));Te(t,W,ue)})(t)},d.createElement("span",{className:"table-header-item-btn-content"},t.title,":"," ",r.join(",")),d.createElement(Be,null))))}return null})),W.columnKey&&W.column&&d.createElement("div",{className:`${e.headerClsPrefix}-item`},d.createElement(kt,{title:d.createElement("span",null,F[W.columnKey].title,`: ${te[W.order]}`)},d.createElement(Ct,{size:"small",className:"table-header-item-btn",onClick:Ee},d.createElement("span",{className:"table-header-item-btn-content"},F[W.columnKey].title,`: ${te[W.order]}`),d.createElement(Be,null)))),d.createElement("div",{className:`${e.headerClsPrefix}-item`},d.createElement(Ct,{size:"small",type:"link","data-testid":"btn-clearall",onClick:xe},a("table.filter.header.btn.clear")))):null,Ae=()=>d.createElement(kt,{placement:"topLeft",title:se},d.createElement(St,{"data-testid":"search-input",prefix:"right"===b&&d.createElement(M,{style:{color:"rgba(0,0,0,.25)"}}),suffix:"left"===b&&d.createElement(M,{style:{color:"rgba(0,0,0,.25)"}}),allowClear:!0,value:Q,onChange:we,placeholder:se})),Oe=()=>{if("icon"===T){const e=P({[`${n}-header-loadbtn`]:!0,[`${n}-header-loadbtn-icon`]:!0,[`${n}-header-loadbtn-right`]:"right"===b,[`${n}-header-loadbtn-left`]:"left"===b});return d.createElement(B,{onClick:Ce,spin:U,className:e,type:"reload"})}if("btn"===T){const e=P({[`${n}-header-loadbtn`]:!0,[`${n}-header-loadbtn-btn`]:!0,[`${n}-header-loadbtn-right`]:"right"===b,[`${n}-header-loadbtn-left`]:"left"===b});return d.createElement(Ct,{className:e,loading:U,icon:d.createElement(B,null),"data-testid":"reload-btn",onClick:Ce})}};return d.createElement(nn,s({},e.antConfig),d.createElement("div",{className:A,style:e.style},S&&d.createElement("div",{className:N},d.createElement(Ore,s({onChange:g?e=>{H.current=!0,ce(l(s({},le),{current:1})),R(e)}:e=>{D||(R(e),z(!0))},onReset:e=>{H.current=!0,ce(l(s({},le),{current:1})),R(e)},onSearch:e=>{le.current>1?(H.current=!0,ce(l(s({},le),{current:1})),R(e)):R(e)},columns:S,showOptionBtns:p,showCollapseButton:m},y))),d.createElement("div",{className:I},!!e.tableTitle&&d.createElement("h3",null," ",e.tableTitle," "),e.customHeader&&d.createElement("div",{"data-testid":"custom-header",className:`${n}-header-custom`},e.customHeader),re&&d.createElement(Ot,{type:"flex",className:`${n}-header-search`},ne?Ae():d.createElement("div",null),ie&&Oe()),"flex"===r&&d.createElement("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"10px"}},oe&&Oe(),e.leftHeader),"none"===r&&"right"!==C&&d.createElement(Ot,{className:`${n}-header-filter`},oe&&Oe(),d.createElement(It,{"data-testid":"left-header",className:P(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`)},e.leftHeader),ae&&Oe()),"none"===r&&ne&&"right"===C&&d.createElement(Ot,{className:`${n}-header-filter`},d.createElement(It,{"data-testid":"left-header",className:P(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`),span:14},oe&&Oe(),e.leftHeader),d.createElement(It,{"data-testid":"right-header",className:`${n}-header-filter-right`,span:10},Ae()),ae&&Oe()),"line"===r&&d.createElement(Ot,{className:`${n}-header-filter`},oe&&Oe(),d.createElement(It,{"data-testid":"right-header",className:`${n}-header-filter-line`,span:24},q&&_e({headerClsPrefix:`${n}-header-filter-line`})),ae&&Oe()),"half"===r&&d.createElement(Ot,{className:`${n}-header-filter`},oe&&Oe(),d.createElement(It,{"data-testid":"left-header",className:P(`${n}-header-filter-left`,void 0!==e.leftHeader&&`${n}-header-filter-left-minh`),span:12},e.leftHeader),d.createElement(It,{"data-testid":"right-header",className:`${n}-header-filter-right`,span:12},q&&_e({headerClsPrefix:`${n}-header-filter-right`})),ae&&Oe()),d.createElement("div",{className:`${n}-table-wrapper`},d.createElement("div",{className:O},d.createElement(Rt,s({loading:U,columns:e.columns.map((e=>{const t=w.cloneDeep(e);if(t.apiFilter&&(t.filterIcon=()=>d.createElement(Qe,null),t.filteredValue=ue[e.dataIndex].value),t.apiSorter&&(t.sortOrder=W.columnKey===t.dataIndex&&W.order),t.apiSearch){t.filterIcon=()=>d.createElement(M,null),t.onFilterDropdownVisibleChange=e=>{e&&j.current&&j.current.select&&setTimeout((()=>(j.current&&j.current.select&&j.current.select(),null)))},t.filterDropdown=({setSelectedKeys:e,selectedKeys:n,confirm:r,clearFilters:i})=>(G.current[t.dataIndex]={clearFilters:i},d.createElement("div",{style:{padding:8}},d.createElement(St,{"data-testid":"filter-search-input",autoFocus:!0,ref:e=>{j.current=e},placeholder:a("table.filter.search.placeholder"),value:n&&n[0],onChange:t=>e?e(t.target.value?[t.target.value]:[]):[],onPressEnter:()=>ve(n,r,t.dataIndex),style:{width:188,marginBottom:8,display:"block"}}),d.createElement(Ct,{type:"primary",onClick:()=>ve(n,r,t.dataIndex),icon:"search",size:"small","data-testid":"search-btn-ok",style:{width:90,marginRight:8}},a("table.filter.search.btn.ok")),d.createElement(Ct,{onClick:()=>ye(i,t.dataIndex),size:"small",style:{width:90}},a("table.filter.search.btn.cancel"))));let e=[];const n=ue[t.dataIndex].value;"string"==typeof n&&(e=[n]),Array.isArray(n)&&"string"==typeof n[0]&&(e=[n[0]]),t.onFilter=(e,n)=>n[t.dataIndex].toString().toLowerCase().includes(e.toLowerCase()),t.render||(t.render=(n,r,i)=>t.searchRender?t.searchRender(n,r,i,d.createElement(lre,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:e,autoEscape:!0,textToHighlight:String(n)})):d.createElement(lre,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:e,autoEscape:!0,textToHighlight:String(n)}))}return t})),dataSource:$,bordered:!1,rowSelection:J,onChange:(e,t,n)=>{i.current&&(Object.keys(n).length>0&&n.column?X({type:"update",value:l(s({},n),{column:{apiSorter:n.column.apiSorter}})}):X({type:"update",value:{}}),Object.entries(t).forEach((([e,t])=>{F[e].filters&&he({type:"update",dataIndex:e,updateType:"filter",value:t})})),H.current=!1,ce(e),Te(t,n))},pagination:s(s({showTotal:e=>`${a("table.total.prefix")} ${e} ${a("table.total.suffix")}`,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:Ire},e.pagination),le)},_)),J&&void 0!==ee&&ee>0&&d.createElement("div",{className:`${n}-table-content-select-num`},a("table.select.num"),ee))))))}));function Lre(e){const{onRefreshRule:t}=e,[n]=Tt.useForm(),[r,i]=f.exports.useState(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState(),h=localStorage.getItem("selectedAlertRule"),[p,m]=f.exports.useState(h?Number(h):0),[g,v]=f.exports.useState(""),{profile:y}=ri((e=>e.account));function x(e){e&&(m(e),localStorage.setItem("selectedAlertRule",String(e)))}f.exports.useEffect((()=>{E(!0).then((e=>{if(p&&e&&e.length>0){const n=null==e?void 0:e.find((e=>e.id===p));n?t(n.rule):x(e[0].id)}}))}),[]),f.exports.useEffect((()=>{if(p&&r&&r.length>0){const e=null==r?void 0:r.find((e=>e.id===p));e?t(e.rule):x(r[0].id)}}),[p]);const E=(e=!1)=>Si("/api/n9e/alert-aggr-views",{method:yi.Get}).then((t=>{const n=t.dat.sort(((e,t)=>e.cate-t.cate));return i(n),e&&n.length>0&&!n.find((e=>e.id===p))&&x(n[0].id),n})),b=e=>{Ft.confirm({title:`确定要删除聚合策略 ${e.name} 吗？`,onOk:async()=>{var t;await(t=[e.id],Si("/api/n9e/alert-aggr-views",{method:yi.Delete,data:{ids:t}})),xt.success("删除成功"),E(!0)},onCancel:()=>{}})};return d.createElement("div",{className:"left-area",style:{width:240,background:"#fff"}},d.createElement("div",{className:"event-page-title"},d.createElement("span",null,"聚合规则"),d.createElement("a",{onClick:()=>o(!0)},d.createElement($e,null))),d.createElement(St,{style:{margin:"10px 0"},prefix:d.createElement(M,null),value:g,onChange:e=>{v(e.target.value)}}),null==r?void 0:r.filter((e=>e.name.includes(g))).map((e=>d.createElement("div",{className:e.id===p?"card-menu-item is-active":"card-menu-item",onClick:()=>x(e.id),key:e.id},d.createElement("div",{className:"label-area"},d.createElement("div",{className:"title"},e.name)),1===e.cate||y.admin?d.createElement("div",null,0===e.cate&&d.createElement("div",{className:"default-holder"},"公开"),d.createElement("div",{className:"icon-area"},d.createElement(Me,{onClick:()=>{u(e),o(!0),n.setFieldsValue(l(s({},e),{cate:0===e.cate})),t(e.rule)}}),d.createElement(we,{onClick:t=>{t.stopPropagation(),b(e)}}))):d.createElement("div",{className:"default-holder"},"公开")))),d.createElement(Ft,{title:(c?"编辑":"新增")+"聚合规则",visible:a,onOk:async()=>{await n.validateFields();const e=c?ta:ea,t=n.getFieldsValue(),r=await e(l(s({},t),{cate:t.cate?0:1}));o(!1),await E(),x(c?c.id:r.dat.id)},onCancel:()=>{o(!1),u(void 0)},destroyOnClose:!0},d.createElement(Tt,{form:n,layout:"vertical",preserve:!1,initialValues:{cate:!1}},d.createElement(Tt.Item,{label:"Name",name:"name",rules:[({getFieldValue:e})=>({validator:(e,t)=>t&&0!==t.length?Promise.resolve():Promise.reject(new Error("请输入聚合规则名称"))})]},d.createElement(St,null)),d.createElement(Tt.Item,{name:"id",hidden:!0},d.createElement(St,null)),d.createElement(Tt.Item,{label:"Rule",name:"rule",rules:[({getFieldValue:e})=>({validator:(e,t)=>t&&0!==t.length?Promise.resolve():Promise.reject(new Error("请输入Rule"))})]},d.createElement(St,null)),y.admin&&d.createElement(Tt.Item,{label:"是否公开",name:"cate",rules:[{required:!0}],valuePropName:"checked"},d.createElement(Dt,null)))))}var Pre=d.forwardRef((function(e,t){const{t:n}=Hr(),{filter:r,header:i}=e,a=f.exports.useRef(null),o=C(),[c,u]=f.exports.useState(4),[h,p]=f.exports.useState(),[m,g]=f.exports.useState(),[v,y]=f.exports.useState(),[x,E]=f.exports.useState([]),[b,w]=f.exports.useState(),[T,S]=f.exports.useState(!1);f.exports.useEffect((()=>{k()}),[r,h]);const k=()=>{var e;h&&(e=l(s({},r),{rule:h}),Si("/api/n9e/alert-cur-events/card",{method:yi.Get,params:e})).then((e=>{g(e.dat)}))};f.exports.useLayoutEffect((()=>{function e(){var e;const t=null==(e=a.current)?void 0:e.offsetWidth;t&&u(function(e){return e>1500?4:e>1e3?6:e>850?8:12}(t))}const t=U.exports.throttle(e,400);return window.addEventListener("resize",t),e(),()=>window.removeEventListener("resize",t)}),[]);const _=[{title:n("集群"),dataIndex:"cluster",width:120},{title:n("规则标题&事件标签"),dataIndex:"rule_name",render(e,{id:t,tags:n}){const r=n&&n.map((e=>d.createElement(Nt,{color:"purple",key:e},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>o.push(`/alert-cur-events/${t}`)},e)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},r)))}},{title:n("触发时间"),dataIndex:"trigger_time",width:120,render:e=>A(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{title:n("操作"),dataIndex:"operate",width:120,render:(e,t)=>d.createElement(d.Fragment,null,d.createElement(Ct,{size:"small",type:"link",onClick:()=>{o.push("/alert-mutes/add",{group_id:t.group_id,cluster:t.cluster,tags:t.tags?t.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}})):[]})}},"屏蔽"),d.createElement(Ct,{size:"small",type:"link",danger:!0,onClick:()=>Bre(void 0,[t.id],(()=>{E(x.filter((e=>e!==t.id))),O(v)}))},"删除"))}],O=e=>{var t;S(!0),y(e),(t=e.event_ids,Si("/api/n9e/alert-cur-events/card/details",{method:yi.Post,data:{ids:t}})).then((e=>{w(e.dat)}))};return f.exports.useImperativeHandle(t,(()=>({reloadCard:k}))),d.createElement("div",{style:{display:"flex",height:"100%"},ref:a},d.createElement(Lre,{onRefreshRule:p}),d.createElement("div",{style:{background:"#fff",flex:1,padding:16}},i,d.createElement(Ot,{gutter:[16,16],style:{marginTop:16}},null==m?void 0:m.map(((e,t)=>d.createElement(It,{span:c,key:t},d.createElement("div",{className:`event-card ${Dre[e.severity-1]} ${Dre[e.severity-1]}-left-border`,onClick:()=>O(e)},d.createElement("div",{className:"event-card-title"},e.title),d.createElement("div",{className:"event-card-num"},e.total))))))),d.createElement(Zt,{title:d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},d.createElement("span",null,null==v?void 0:v.title),d.createElement(Ct,{danger:!0,disabled:0===x.length,onClick:()=>Bre(void 0,x,(()=>{E([]),O(v)}))},"批量删除")),placement:"right",onClose:()=>{S(!1)},visible:T,width:960},d.createElement(Rt,{rowKey:"id",className:"card-event-drawer",rowClassName:(e,t)=>Dre[e.severity-1]+"-left-border",rowSelection:{selectedRowKeys:x,onChange(e,t){E(e.map((e=>Number(e))))}},dataSource:b,columns:_})))}));const{confirm:Rre}=Ft,Dre=["red","orange","yellow","green"];function Bre(e,t,n=(()=>{})){Rre({title:"删除告警事件",icon:d.createElement(Ve,null),content:"通常只有在确定监控数据永远不再上报的情况下（比如调整了监控数据标签，或者机器下线）才删除告警事件，因为相关告警事件永远无法自动恢复了，您确定要这么做吗？",okText:"确认删除",maskClosable:!0,okButtonProps:{danger:!0},zIndex:1001,onOk:()=>function(e,t){return Si("/api/n9e/alert-cur-events",{method:yi.Delete,data:{ids:t}})}(0,t).then((e=>{xt.success("删除成功"),n()})),onCancel(){}})}const zre=()=>{const e=C(),{t:t}=Hr(),[n,r]=f.exports.useState("card"),i=Jr(),[a,o]=f.exports.useState(),[s,l]=f.exports.useState([]),{hourRange:c,queryContent:u}=ri((e=>e.event)),h=f.exports.useMemo((()=>[{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:2,unit:"days",description:t("天")},{num:3,unit:"days",description:t("天")},{num:7,unit:"days",description:t("天")},{num:14,unit:"days",description:t("天")},{num:30,unit:"days",description:t("天")},{num:60,unit:"days",description:t("天")},{num:90,unit:"days",description:t("天")}]),[]),p=f.exports.useRef({handleReload(){}}),m=f.exports.useRef({reloadCard(){}}),g=f.exports.useRef(!1),[v,y]=f.exports.useState(-1),[x,E]=f.exports.useState([]),[b,w]=f.exports.useState(0);je((()=>{"list"===n?p.current.handleReload():m.current.reloadCard()}),b>0?1e3*b:void 0);const T=[{title:t("集群"),dataIndex:"cluster",width:120},{title:t("规则标题&事件标签"),dataIndex:"rule_name",render(t,{id:n,tags:r}){const i=r&&r.map((e=>d.createElement(Nt,{color:"purple",key:e,onClick:t=>{u.includes(e)||(g.current=!0,S("queryContent",u?`${u.trim()} ${e}`:e))}},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>e.push(`/alert-cur-events/${n}`)},t)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},i)))}},{title:t("触发时间"),dataIndex:"trigger_time",width:120,render:e=>A(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{title:t("操作"),dataIndex:"operate",width:120,render:(t,r)=>d.createElement(d.Fragment,null,d.createElement(Ct,{size:"small",type:"link",onClick:()=>{e.push("/alert-mutes/add",{group_id:r.group_id,cluster:r.cluster,tags:r.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}}))})}},"屏蔽"),d.createElement(Ct,{size:"small",type:"link",danger:!0,onClick:()=>Bre(0,[r.id],(()=>{E(x.filter((e=>e!==r.id))),"list"===n&&p.current.handleReload()}))},"删除"))}];function S(e,t){i({type:"event/saveData",prop:e,data:t})}function k(){const e=d.createElement(bt,{onClick:e=>{w(e.key)}},[{num:0,unit:"second",description:"off"},{num:5,unit:"seconds",description:"s"},{num:30,unit:"seconds",description:"s"},{num:60,unit:"seconds",description:"s"}].map((({num:e,description:t})=>d.createElement(bt.Item,{key:e},e>0&&d.createElement("span",{className:"num"},e),t))));return d.createElement("div",{className:"table-operate-box",style:{background:"#fff"}},d.createElement("div",{className:"left"},d.createElement(Ct,{icon:d.createElement(Je,null),onClick:()=>r("card")}),d.createElement(Ct,{icon:d.createElement(et,null),onClick:()=>r("list"),style:{marginLeft:8,marginRight:8}}),d.createElement(Yh,{showRight:!1,leftList:h,value:c,onChange:e=>{e.num===c.num&&e.unit===c.unit||S("hourRange",e)}}),d.createElement(So,{onSeverityChange:e=>o(e),onBusiGroupChange:e=>y("number"==typeof e?e:-1),onClusterChange:e=>l(e)}),d.createElement(St,{className:"search-input",prefix:d.createElement(M,null),placeholder:"模糊搜索规则和标签(多个关键词请用空格分隔)",value:u,onChange:e=>S("queryContent",e.target.value),onPressEnter:e=>"list"===n&&p.current.handleReload()})),d.createElement("div",{className:"right"},"list"===n&&d.createElement(Ct,{danger:!0,style:{marginRight:8},disabled:0===x.length,onClick:()=>Bre(0,x,(()=>{E([]),"list"===n&&p.current.handleReload()}))},"批量删除"),d.createElement(Ya,{onClick:()=>{"list"===n&&p.current.handleReload(),"card"===n&&m.current.reloadCard()}}),d.createElement(_t,{overlay:e},d.createElement(Ct,{className:"interval-btn",icon:d.createElement(I,null)},b>0?b+"s":"off"))))}return f.exports.useEffect((()=>{g.current&&("list"===n&&p.current.handleReload(),g.current=!1)}),[u]),f.exports.useEffect((()=>{"list"===n&&p.current.handleReload()}),[s,a,c,v,n]),d.createElement(ia,{icon:d.createElement(Ze,null),title:t("活跃告警"),hideCluster:!0},d.createElement("div",{className:"event-content cur-events"},d.createElement("div",{className:"table-area",style:{padding:"card"===n?0:void 0}},"card"===n?d.createElement("div",{style:{width:"100%",height:"100%",background:"#eee"}},d.createElement(Pre,{ref:m,header:k(),filter:Object.assign({hours:"hours"!==c.unit?24*c.num:c.num},s.length?{clusters:s.join(",")}:{},a?{severity:a}:{},u?{query:u}:{},{bgid:v})})):d.createElement(Fre,{ref:p,antProps:{rowKey:"id",rowClassName:(e,t)=>Dre[e.severity-1]+"-left-border",rowSelection:{selectedRowKeys:x,onChange(e,t){E(e.map((e=>Number(e))))}}},url:"/api/n9e/alert-cur-events/list",customQueryCallback:e=>Object.assign(e,{hours:"hours"!==c.unit?24*c.num:c.num},s.length?{clusters:s.join(",")}:{},a?{severity:a}:{},u?{query:u}:{},{bgid:v}),pageParams:{curPageName:"p",pageSizeName:"limit",pageSize:30,pageSizeOptions:["30","100","200","500"]},apiCallback:({dat:{list:e,total:t}})=>({data:e,total:t}),columns:T,reloadBtnType:"btn",reloadBtnPos:"right",showReloadBtn:!0,filterType:"flex",leftHeader:k()}))))};const{Paragraph:Hre}=rn,jre=e=>{let t="";return w.forEach(e,(e=>{const n=w.split(e,"uuid=");n[1]&&(t=n[1])})),t},Gre={origin:"#573BA7",upper_bound:"#1A94FF",lower_bound:"#2ACA96",anomaly:"red"},$re=()=>{const{busiId:e,eventId:t}=X(),{busiGroups:n}=ri((e=>e.common));f.exports.useEffect((()=>{}),[n]);const r=C(),[i,a]=f.exports.useState(r.location.pathname.includes("alert-his-events")),[o,s]=f.exports.useState(),[l,c]=f.exports.useState([{label:"规则标题",key:"rule_name",render:(e,{rule_id:t})=>d.createElement(Ct,{size:"small",type:"link",className:"rule-link-btn",onClick:()=>{r.push(`/alert-rules/edit/${t}`)}},e)},{label:"业务组",key:"group_name",render:(e,{group_id:t})=>d.createElement(Ct,{size:"small",type:"link",className:"rule-link-btn",onClick:()=>{return e=t,void(n.find((t=>t.id===e))?r.push(`/alert-rules?id=${e}`):xt.error("该业务组已删除或无查看权限"));var e}},e)},{label:"规则备注",key:"rule_note"},{label:"所属集群",key:"cluster"},{label:"告警级别",key:"severity",render:e=>d.createElement(Nt,{color:Hi[e-1]},"S",e)},{label:"事件状态",key:"is_recovered",render:e=>d.createElement(Nt,{color:e?"green":"red"},e?"Recovered":"Triggered")},{label:"事件标签",key:"tags",render:e=>e?e.map((e=>d.createElement(Nt,{color:"purple",key:e},e))):""},{label:"对象备注",key:"target_note"},{label:"触发时间",key:"trigger_time",render:e=>A(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{label:"触发时值",key:"trigger_value"},{label:"恢复时间",key:"recover_time",render:e=>A(1e3*(e||0)).format("YYYY-MM-DD HH:mm:ss")},{label:"告警方式",key:"rule_algo",render:e=>e?"智能告警":"阈值告警"},{label:"PromQL",key:"prom_ql",render:e=>d.createElement(Ot,{className:"promql-row"},d.createElement(It,{span:20},d.createElement(lo,{value:e,url:"/api/n9e/prometheus",readonly:!0})),d.createElement(It,{span:4},d.createElement(Ct,{className:"run-btn",type:"link",onClick:()=>{window.open(`${location.origin}/metric/explorer?promql=${encodeURIComponent(e)}`)}},d.createElement(tt,{className:"run-con"}))))},{label:"执行频率",key:"prom_eval_interval",render:e=>`${e} 秒`},{label:"持续时长",key:"prom_for_duration",render:e=>`${e} 秒`},{label:"通知媒介",key:"notify_channels",render:e=>e.join(" ")},{label:"告警接收组",key:"notify_groups_obj",render:e=>e?e.map((e=>d.createElement(Nt,{color:"purple"},e.name))):""},{label:"回调地址",key:"callbacks",render:e=>e?e.map((e=>d.createElement(Nt,null,d.createElement(Hre,{copyable:!0,style:{margin:0}},e)))):""},{label:"预案链接",key:"runbook_url",render:e=>d.createElement("a",{href:e,target:"_balank"},e)}]),[u,h]=f.exports.useState({start:"now-1h",end:"now"}),[p,m]=f.exports.useState(15),[g,v]=f.exports.useState([]);return f.exports.useEffect((()=>{(i?function(e,t){return Si(`/api/n9e/alert-his-event/${t}`,{method:yi.Get})}(0,t):function(e,t){return Si(`/api/n9e/alert-cur-event/${t}`,{method:yi.Get})}(0,t)).then((e=>{s(e.dat)}))}),[e,t]),f.exports.useEffect((()=>{if(o&&o.rule_algo){const e=Eu(u),t=A(e.start).unix(),n=A(e.end).unix();let r=p;p||(r=Math.max(Math.floor((n-t)/240),1)),na({rid:o.rule_id,uuid:jre(o.tags),start:t,end:n,step:r}).then((e=>{const t=w.map(w.filter(e.data,(e=>"predict"!==e.metric.value_type)),(e=>{const t=e.metric.value_type;return{name:`${t}`,data:e.values,color:Gre[t],lineDash:"origin"===t||"anomaly"===t?[]:[4,4]}})),n=[],r=w.cloneDeep(w.find(t,{name:"origin"})),i=w.find(t,{name:"lower_bound"}),a=w.find(t,{name:"upper_bound"});n.push({name:"lower_upper_bound",data:w.map(i.data,((e,t)=>[...e,a.data[t][1]])),color:"#ddd",opacity:.5}),n.push(r),v(n)}))}}),[JSON.stringify(o),JSON.stringify(u),p]),d.createElement(ia,{title:"告警详情",showBack:!0,hideCluster:!0},d.createElement("div",{className:"event-detail-container"},d.createElement(tn,{spinning:!o},d.createElement(jt,{className:"desc-container",title:"告警事件详情",actions:[d.createElement("div",{className:"action-btns"},d.createElement(Ht,null,d.createElement(Ct,{type:"primary",onClick:()=>{r.push("/alert-mutes/add",{group_id:o.group_id,cluster:o.cluster,tags:o.tags?o.tags.map((e=>{const[t,n]=e.split("=");return{func:"==",key:t,value:n}})):[]})}},"屏蔽"),!i&&d.createElement(Ct,{danger:!0,onClick:()=>{o.group_id?Bre(o.group_id,[Number(t)],(()=>{r.replace("/alert-cur-events")})):xt.warn("该告警未返回业务组ID")}},"删除")))]},o&&d.createElement("div",null,o.rule_algo&&d.createElement("div",null,d.createElement(Ht,null,d.createElement(_u,{value:u,onChange:h,refreshTooltip:`刷新间隔小于 step(${Iu(u,p)}s) 将不会更新数据`}),d.createElement(Ku,{value:p,onChange:e=>m(e),initialValue:p})),d.createElement(Rne,{series:g})),l.filter((e=>!!o.is_recovered||"recover_time"!==e.key)).map((({label:e,key:t,render:n},r)=>d.createElement("div",{className:"desc-row",key:t+r},d.createElement("div",{className:"desc-label"},e,"："),d.createElement("div",{className:"desc-content"},n?n(o[t],o):o[t])))))))))},Yre=()=>{const e=C(),{t:t}=Hr(),n=Jr(),r=f.exports.useRef({handleReload(){}}),{hisHourRange:i,hisQueryContent:a}=ri((e=>e.event)),[o,s]=f.exports.useState(),[l,c]=f.exports.useState(),[u,h]=f.exports.useState([]),p=f.exports.useRef(!1),[m,g]=f.exports.useState(-1),v=f.exports.useMemo((()=>[{num:6,unit:"hours",description:t("hours")},{num:12,unit:"hours",description:t("hours")},{num:1,unit:"day",description:t("天")},{num:2,unit:"days",description:t("天")},{num:3,unit:"days",description:t("天")},{num:7,unit:"days",description:t("天")},{num:14,unit:"days",description:t("天")},{num:30,unit:"days",description:t("天")},{num:60,unit:"days",description:t("天")},{num:90,unit:"days",description:t("天")}]),[]),y=[{title:t("集群"),dataIndex:"cluster",width:120},{title:t("规则标题&事件标签"),dataIndex:"rule_name",render(t,{id:n,tags:r}){const i=r&&r.map((e=>d.createElement(Nt,{color:"purple",key:e,onClick:t=>{a.includes(e)||(p.current=!0,x("hisQueryContent",a?`${a.trim()} ${e}`:e))}},e)));return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("a",{style:{padding:0},onClick:()=>e.push(`/alert-his-events/${n}`)},t)),d.createElement("div",null,d.createElement("span",{className:"event-tags"},i)))}},{title:t("计算时间"),dataIndex:"last_eval_time",width:120,render:e=>A(1e3*(e||0)).format("YYYY-MM-DD HH:mm:ss")}];function x(e,t){n({type:"event/saveData",prop:e,data:t})}return f.exports.useEffect((()=>{p.current&&(r.current.handleReload(),p.current=!1)}),[a]),f.exports.useEffect((()=>{r.current.handleReload()}),[u,o,i,l,m]),d.createElement(ia,{icon:d.createElement(Ze,null),title:t("历史告警"),hideCluster:!0},d.createElement("div",{className:"event-content"},d.createElement("div",{className:"table-area"},d.createElement(Fre,{ref:r,antProps:{rowKey:"id",rowClassName:(e,t)=>Dre[e.is_recovered?3:e.severity-1]+"-left-border"},url:"/api/n9e/alert-his-events/list",customQueryCallback:e=>Object.assign(e,{hours:"hours"!==i.unit?24*i.num:i.num},u.length?{clusters:u.join(",")}:{},void 0!==o?{severity:o}:{},a?{query:a}:{},void 0!==l?{is_recovered:l}:{},{bgid:m}),pageParams:{curPageName:"p",pageSizeName:"limit",pageSize:30,pageSizeOptions:["30","100","200","500"]},apiCallback:({dat:{list:e,total:t}})=>({data:e,total:t}),columns:y,reloadBtnType:"btn",reloadBtnPos:"left",filterType:"flex",leftHeader:d.createElement("div",{className:"table-operate-box"},d.createElement("div",{className:"left"},d.createElement(Yh,{showRight:!1,leftList:v,value:i,onChange:e=>{e.num===i.num&&e.unit===i.unit||x("hisHourRange",e)}}),d.createElement(So,{onSeverityChange:e=>s(e),onEventTypeChange:e=>c(e),onBusiGroupChange:e=>g("number"==typeof e?e:-1),onClusterChange:e=>h(e)}),d.createElement(St,{className:"search-input",prefix:d.createElement(M,null),placeholder:"模糊搜索规则和标签(多个关键词请用空格分隔)",value:a,onChange:e=>x("hisQueryContent",e.target.value),onPressEnter:e=>r.current.handleReload()})))}))))};function Ure(e){return Wre(!0,e)}function Vre(e){return Wre(!1,e)}function Wre(e,t){return Si("/api/n9e/targets/tags",{method:e?yi.Post:yi.Delete,data:t})}function Xre(e){return Si("/api/n9e/targets/bgid",{method:yi.Put,data:Object.assign({bgid:0},e)})}function qre(e){return Si("/api/n9e/targets/note",{method:yi.Put,data:e})}function Kre(e){return Si("/api/n9e/targets",{method:yi.Delete,data:e})}var Qre,Zre;(Zre=Qre||(Qre={})).BindTag="bindTag",Zre.UnbindTag="unbindTag",Zre.UpdateBusi="updateBusi",Zre.RemoveBusi="removeBusi",Zre.UpdateNote="updateNote",Zre.Delete="delete",Zre.None="none";function Jre(e){const{t:t,i18n:n}=Hr(),{curBusiId:r,setSelectedIdents:i,selectedRowKeys:a,setSelectedRowKeys:o,refreshFlag:c,setRefreshFlag:u,setOperateType:h}=e,p=f.exports.useRef(!1),m=f.exports.useRef({handleReload(){}}),[g,v]=f.exports.useState(""),[y,x]=f.exports.useState([]),E=[{title:"集群",dataIndex:"cluster",width:100,fixed:"left"},{title:d.createElement("span",null,"标识"," ",d.createElement(z,{style:{cursor:"pointer"},onClick:()=>{const e=w.map(b.dataSource,(e=>e.ident)),r=w.join(e,"\n");(function(e){const t=document.createElement("textarea");t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style.left="-9999px";const n=window.pageYOffset||document.documentElement.scrollTop;let r;t.style.top=`${n}px`,t.setAttribute("readonly",""),t.value=e,document.body.appendChild(t),t.select();try{r=document.execCommand("copy")}catch(i){r=!1}return r&&document.body.removeChild(t),r})(r)?"zh"===n.language?xt.success(`复制成功${e.length}条记录`):"en"===n.language&&xt.success(`Successful copy ${e.length} items`):Ft.warning({title:t("host.copy.error"),content:d.createElement(St.TextArea,{defaultValue:r})})}})),dataIndex:"ident"},{title:"标签",dataIndex:"tags",ellipsis:{showTitle:!1},render(e){const t=e&&e.map((e=>d.createElement(Nt,{color:"purple",key:e,onClick:t=>{g.includes(e)||(p.current=!0,v(g?`${g.trim()} ${e}`:e))}},e)));return e&&d.createElement(kt,{title:t,placement:"topLeft",getPopupContainer:()=>document.body,overlayClassName:"mon-manage-table-tooltip"},t)}},{title:"业务组",dataIndex:"group_obj",render:e=>e?e.name:"未归组"},{title:"状态",width:100,dataIndex:"target_up",sorter:(e,t)=>e.target_up-t.target_up,render:e=>e>0?d.createElement("div",{className:"table-td-fullBG",style:{backgroundColor:"#3FC453"}},"UP"):e<1?d.createElement("div",{className:"table-td-fullBG",style:{backgroundColor:"#FF656B"}},"DOWN"):null},{title:"单核负载",width:100,dataIndex:"load_per_core",sorter:(e,t)=>e.load_per_core-t.load_per_core,render(e){let t="#3FC453";return e>2&&(t="#FF9919"),e>4&&(t="#FF656B"),d.createElement("div",{className:"table-td-fullBG",style:{backgroundColor:t}},w.floor(e,1))}},{title:"内存",width:100,dataIndex:"mem_util",sorter:(e,t)=>e.mem_util-t.mem_util,render(e){let t="#3FC453";return e>70&&(t="#FF9919"),e>85&&(t="#FF656B"),d.createElement("div",{className:"table-td-fullBG",style:{backgroundColor:t}},w.floor(e,1),"%")}},{title:"根分区",width:100,dataIndex:"disk_util",sorter:(e,t)=>e.disk_util-t.disk_util,render(e){if(void 0===e)return"";let t="#3FC453";return e>85&&(t="#FF9919"),e>95&&(t="#FF656B"),d.createElement("div",{className:"table-td-fullBG",style:{backgroundColor:t}},w.floor(e,1),"%")}},{title:"备注",dataIndex:"note",ellipsis:{showTitle:!1},render:e=>d.createElement(kt,{title:e,placement:"topLeft",getPopupContainer:()=>document.body},e)}],{tableProps:b}=nt((({current:e,pageSize:t})=>{const n={query:g,bgid:r,clusters:w.join(y,","),limit:t,p:e};return(i=n,Si("/api/n9e/targets",{method:yi.Get,params:i})).then((e=>({total:e.dat.total,list:e.dat.list})));var i}),{refreshDeps:[JSON.stringify(y),g,r,c],defaultPageSize:30});return d.createElement("div",null,d.createElement("div",{className:"table-operate-box"},d.createElement(Ht,null,d.createElement(Ct,{icon:d.createElement(B,null),onClick:()=>{u(w.uniqueId("refreshFlag_"))}}),d.createElement(So,{noLeftPadding:!0,onClusterChange:e=>x(e)}),d.createElement(St,{className:"search-input",prefix:d.createElement(M,null),placeholder:"模糊搜索表格内容(多个关键词请用空格分隔)",value:g,onChange:e=>v(e.target.value),onPressEnter:e=>m.current.handleReload()})),d.createElement(_t,{trigger:["click"],overlay:d.createElement(bt,{onClick:({key:e})=>{h(e)}},d.createElement(bt.Item,{key:Qre.BindTag},"绑定标签"),d.createElement(bt.Item,{key:Qre.UnbindTag},"解绑标签"),d.createElement(bt.Item,{key:Qre.UpdateBusi},"修改业务组"),d.createElement(bt.Item,{key:Qre.RemoveBusi},"移出业务组"),d.createElement(bt.Item,{key:Qre.UpdateNote},"修改备注"),d.createElement(bt.Item,{key:Qre.Delete},"批量删除"))},d.createElement(Ct,null,"批量操作 ",d.createElement(I,null)))),d.createElement(Rt,l(s({rowKey:"id",columns:E},b),{rowSelection:{type:"checkbox",selectedRowKeys:a,onChange(e,t){o(e),i(t?t.map((({ident:e})=>e)):[])}},pagination:l(s({},b.pagination),{showTotal:e=>`共 ${e} 条`,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:Ire})})))}var eie;!function(e){e.BindTag="bindTag",e.UnbindTag="unbindTag",e.UpdateBusi="updateBusi",e.RemoveBusi="removeBusi",e.UpdateNote="updateNote",e.Delete="delete",e.None="none"}(eie||(eie={}));const{TextArea:tie}=St,nie=()=>{function e(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function t(t){const{isCorrectFormat:n,isLengthAllowed:r}=e(t.value);return n&&r?d.createElement(Nt,{closable:t.closable,onClose:t.onClose},t.value):d.createElement(kt,{title:n?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Nt,{color:"error",closable:t.closable,onClose:t.onClose,style:{marginTop:"2px"}},t.value))}function n(){return{validator:(t,n)=>n.some((t=>{const{isCorrectFormat:n,isLengthAllowed:r}=e(t);if(!n||!r)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}return{operateTitle:"绑定标签",requestFunc:Ure,isFormItem:!0,render:()=>d.createElement(Tt.Item,{label:"标签",name:"tags",rules:[{required:!0,message:"请填写至少一项标签！"},n]},d.createElement(Lt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:t}))}},rie=e=>({operateTitle:"解绑标签",requestFunc:Vre,isFormItem:!0,render:()=>d.createElement(Tt.Item,{label:"标签",name:"tags",rules:[{required:!0,message:"请选择至少一项标签！"}]},d.createElement(Lt,{mode:"multiple",showArrow:!0,placeholder:"请选择要解绑的标签",options:e.map((e=>({label:e,value:e})))}))}),iie=()=>({operateTitle:"移出业务组",requestFunc:Xre,isFormItem:!1,render:()=>d.createElement(Wt,{message:"提示信息：移出所属业务组，该业务组的管理人员将不再有权限操作这些监控对象！您可能需要提前清空这批监控对象的标签和备注信息！",type:"error"})}),aie=()=>({operateTitle:"修改备注",requestFunc:qre,isFormItem:!0,render:()=>d.createElement(Tt.Item,{label:"备注信息",name:"note"},d.createElement(St,{maxLength:64,placeholder:"内容如果为空，表示清空备注信息"}))}),oie=()=>({operateTitle:"批量删除",requestFunc:Kre,isFormItem:!1,render:()=>d.createElement(Wt,{message:"提示信息：该操作会把监控对象从系统内中彻底删除，非常危险，慎重操作！",type:"error"})}),sie=({operateType:e,setOperateType:t,idents:n,reloadList:r})=>{const{busiGroups:i}=ri((e=>e.common)),[a]=Tt.useForm(),[o,s]=f.exports.useState(!1),[l,c]=f.exports.useState(n),[u,h]=f.exports.useState([]),p=e===eie.UnbindTag?u:i,m={bindTagDetail:nie,unbindTagDetail:rie,updateBusiDetail:e=>({operateTitle:"修改业务组",requestFunc:Xre,isFormItem:!0,render:()=>d.createElement(Tt.Item,{label:"归属业务组",name:"bgid",rules:[{required:!0,message:"请选择归属业务组！"}]},d.createElement(Lt,{showSearch:!0,style:{width:"100%"},placeholder:"请选择归属业务组",options:E.map((({id:e,name:t})=>({label:t,value:e}))),optionFilterProp:"label",filterOption:!1,onSearch:C,onFocus:()=>{ki("").then((e=>{b(e.dat||[])}))},onClear:()=>{ki("").then((e=>{b(e.dat||[])}))}}))}),removeBusiDetail:iie,updateNoteDetail:aie,deleteDetail:oie,noneDetail:()=>({operateTitle:"",requestFunc:()=>Promise.resolve(),isFormItem:!1,render(){}})},{operateTitle:g,requestFunc:v,isFormItem:y,render:x}=m[`${e}Detail`](p),[E,b]=f.exports.useState(i);f.exports.useEffect((()=>{E.length||b(i)}),[i]);const C=f.exports.useCallback(U.exports.debounce((e=>{ki(e).then((e=>{b(e.dat||[])}))}),800),[]);return f.exports.useEffect((()=>{e!==eie.None&&(c(n),a.setFieldsValue({idents:n.join("\n")}))}),[e,n]),f.exports.useEffect((()=>{var t;e===eie.UnbindTag&&l.length&&(t={idents:l.join(",")},Si("/api/n9e/targets/tags",{method:yi.Get,params:t})).then((({dat:e})=>{const t=a.getFieldValue("tags")||[];a.setFieldsValue({tags:t.filter((t=>e.includes(t)))}),h(e)}))}),[e,l]),d.createElement(Ft,{visible:"none"!==e,title:g,confirmLoading:o,okButtonProps:{danger:e===eie.RemoveBusi||e===eie.Delete},okText:e===eie.RemoveBusi?"移出":e===eie.Delete?"删除":"确定",onOk:function(){a.validateFields().then((e=>{s(!0),e.idents=e.idents.split("\n"),v(e).then((()=>{xt.success(`${g}成功！`),t(eie.None),r(),a.resetFields(),s(!1)})).catch((()=>s(!1)))}))},onCancel:()=>{t(eie.None),a.resetFields()}},d.createElement(Tt,{form:a,labelCol:{span:4},wrapperCol:{span:20}},d.createElement(Tt.Item,{label:"监控对象",name:"idents",rules:[{required:!0,message:"请填写监控对象指标"}]},d.createElement(tie,{autoSize:{minRows:3,maxRows:10},placeholder:"请填写监控对象的指标，一行一个",onBlur:function(){const e=a.getFieldValue("idents"),t=e.split(/[ ,\n]+/).filter((e=>e)),n=t.join("\n");e!==n&&a.setFieldsValue({idents:n}),l.sort().join("\n")!==t.sort().join("\n")&&c(t)}})),y&&x()),!y&&x())},lie=()=>{const{t:e}=Hr(),[t,n]=f.exports.useState(eie.None),[r,i]=f.exports.useState(-2),[a,o]=f.exports.useState([]),[s,l]=f.exports.useState([]),[c,u]=f.exports.useState(w.uniqueId("refreshFlag_"));return d.createElement(ia,{icon:d.createElement(rt,null),title:e("对象列表"),hideCluster:!0},d.createElement("div",{className:"object-manage-page-content"},d.createElement(Oa,{busiGroup:{showNotGroupItem:!0,onChange(e){i("number"==typeof e?e:-1),o([]),l([])}}}),d.createElement("div",{className:"table-area"},d.createElement(Jre,{curBusiId:r,selectedIdents:s,setSelectedIdents:l,selectedRowKeys:a,setSelectedRowKeys:o,refreshFlag:c,setRefreshFlag:u,setOperateType:n}))),d.createElement(sie,{operateType:t,setOperateType:n,idents:s,reloadList:()=>{u(w.uniqueId("refreshFlag_"))}}))},cie=ln.theme({"&":{"&.cm-focused":{outline:"none",outline_fallback:"none"},"&.cm-editor.cm-focused":{outline:"none"}},".cm-scroller":{overflow:"hidden",fontFamily:"verdana, Microsoft YaHei, Consolas, Deja Vu Sans Mono, Bitstream Vera Sans Mono;"},".cm-placeholder":{},".cm-matchingBracket":{color:"#000",backgroundColor:"#dedede",fontWeight:"bold",outline:"1px dashed transparent"},".cm-nonmatchingBracket":{borderColor:"red"},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{maxHeight:"350px",fontFamily:'"DejaVu Sans Mono", monospace',maxWidth:"unset"},"& > ul > li":{padding:"2px 1em 2px 3px"},minWidth:"30%"},".cm-completionDetail":{float:"right",color:"#999"},".cm-tooltip.cm-completionInfo":{marginTop:"-11px",padding:"10px",fontFamily:"'Open Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;",border:"none",minWidth:"250px",maxWidth:"min-content"},".cm-completionInfo.cm-completionInfo-right":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",left:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginLeft:"12px"},".cm-completionInfo.cm-completionInfo-left":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",right:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginRight:"12px"},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold",color:"#0066bf"},".cm-selectionMatch":{backgroundColor:"#e6f3ff"},".cm-diagnostic":{"&.cm-diagnostic-error":{borderLeft:"3px solid #e65013"}},".cm-completionIcon":{boxSizing:"content-box",fontSize:"16px",lineHeight:"1",marginRight:"10px",verticalAlign:"top","&:after":{content:"'\\ea88'"},fontFamily:"codicon",paddingRight:"0",opacity:"1",color:"#007acc"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\ea8c'"},color:"#652d90"},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\eb5f'"},color:"#007acc"},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\eb62'"},color:"#616161"},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'\\ea95'"},color:"#ee9d28"}});function uie(e){const{onChange:t,value:n,className:r,style:i={},editable:a=!0,xCluster:o}=e,[l,c]=f.exports.useState(),u=f.exports.useRef(null);const h=(new hn).setComplete({remote:{fetchFn:function(e,t={}){return fetch(e,s({method:"Get",headers:new Headers({"X-Cluster":o,Authorization:`Bearer ${localStorage.getItem("access_token")||""}`})},t))},url:"/api/n9e/prometheus"}});return f.exports.useEffect((()=>{const e=new ln({state:pn.create({doc:n,extensions:[cie,Dn,h.asExtension(),ln.updateListener.of((e=>{null==t||t(e.state.doc.toString())})),ln.editable.of(a)]}),parent:u.current});c(e)}),[]),d.createElement("div",{ref:u,className:r,style:Object.assign({fontSize:12},i)})}ln.theme({".cm-tooltip":{backgroundColor:"#f8f8f8",borderColor:"rgba(52, 79, 113, 0.2)"},".cm-tooltip.cm-tooltip-autocomplete":{"& li:hover":{backgroundColor:"#ddd"},"& > ul > li[aria-selected]":{backgroundColor:"#d6ebff",color:"unset"}},".cm-tooltip.cm-completionInfo":{backgroundColor:"#d6ebff"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#d6ebff"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#d6ebff"}},".cm-line":{"&::selection":{backgroundColor:"#add6ff"},"& > span::selection":{backgroundColor:"#add6ff"}}},{dark:!1}),ln.theme({".cm-content":{caretColor:"#fff"},".cm-tooltip.cm-completionInfo":{backgroundColor:"#333338"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#333338"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#333338"}},".cm-line":{"&::selection":{backgroundColor:"#767676"},"& > span::selection":{backgroundColor:"#767676"}}},{dark:!0}),cn.define([{tag:un.name,color:"#000"},{tag:un.number,color:"#09885a"},{tag:un.string,color:"#a31515"},{tag:un.keyword,color:"#008080"},{tag:un.function(un.variableName),color:"#008080"},{tag:un.labelName,color:"#800000"},{tag:un.operator},{tag:un.modifier,color:"#008080"},{tag:un.paren},{tag:un.squareBracket},{tag:un.brace},{tag:un.invalid,color:"red"},{tag:un.comment,color:"#888",fontStyle:"italic"}]);const{Panel:hie}=an;function pie(){const[e,t]=f.exports.useState("Default");return d.createElement("div",null,d.createElement(an,{defaultActiveKey:"3"},d.createElement(hie,{header:"PromqlEditor",key:"1"},d.createElement(Ot,{style:{marginBottom:20}},d.createElement("p",null,"PromqlEditor 的自动闭合及联想功能不支持动态切换集群，xCluster变化后自己销毁并重新初始化组件"),d.createElement(uie,{style:{width:"100%"},xCluster:e}))),d.createElement(hie,{header:"G2PieChart",key:"2"},d.createElement(Ot,null,d.createElement(So,null))),d.createElement(hie,{header:"Honeycomb",key:"3"},d.createElement(Ot,null,d.createElement("div",{style:{height:500,width:"100%"}})))))}function die(e){return t=>`/api/n9e/busi-group/${t}${e}`}const fie={tasktpls:die("/task-tpls"),tasktpl:die("/task-tpl"),tasks:die("/tasks"),task:die("/task"),perms:die("/builtin-perms")};var mie={},gie={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0}(gie);var vie={};Object.defineProperty(vie,"__esModule",{value:!0}),vie.default=void 0;vie.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};var yie={},xie={exports:{}};!function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(xie);var Eie={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};e.default=t}(Eie),function(e){var t=gie.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(xie.exports),r=t(su),i=t(Eie),a={lang:(0,n.default)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},r.default),timePickerLocale:(0,n.default)({},i.default)};a.lang.ok="确定";var o=a;e.default=o}(yie);var bie={};!function(e){var t=gie.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(yie).default;e.default=n}(bie),function(e){var t=gie.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(vie),r=t(yie),i=t(Eie),a=t(bie),o="${label}不是一个有效的${type}",s={locale:"zh-cn",Pagination:n.default,DatePicker:r.default,TimePicker:i.default,Calendar:a.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};e.default=s}(mie);var Cie=de(mie),wie={},Tie={},Sie={};Object.defineProperty(Sie,"__esModule",{value:!0}),Sie.default=void 0;Sie.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var kie={},_ie={};Object.defineProperty(_ie,"__esModule",{value:!0}),_ie.default=void 0;var Aie={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};_ie.default=Aie;var Oie={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};e.default=t}(Oie),function(e){var t=gie.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(xie.exports),r=t(_ie),i=t(Oie),a={lang:(0,n.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},r.default),timePickerLocale:(0,n.default)({},i.default)};e.default=a}(kie);var Iie={};!function(e){var t=gie.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(kie).default;e.default=n}(Iie),function(e){var t=gie.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Sie),r=t(kie),i=t(Oie),a=t(Iie),o="${label} is not a valid ${type}",s={locale:"en",Pagination:n.default,DatePicker:r.default,TimePicker:i.default,Calendar:a.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e.default=s}(Tie),function(e){var t=gie.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Tie).default;e.default=n}(wie);var Mie=de(wie);function Nie(e){return function(t){const n=document.createElement("div");function r(){q.unmountComponentAtNode(n)&&n.parentNode&&n.parentNode.removeChild(n)}var i;return document.body.appendChild(n),i=l(s({},t),{visible:!0,destroy:r}),q.render(d.createElement(nn,{locale:"en"===t.language?Mie:Cie},d.createElement(e,s({},i))),n),{destroy:r}}}const Fie=Tt.Item,Lie=e=>{const{t:t}=Hr(),[n]=Tt.useForm(),{visible:r}=e;return d.createElement(Ft,{title:t("tpl.tag.bind.title"),visible:r,onOk:()=>{const{selectedIds:r}=e;n.validateFields().then((n=>{Si(`${fie.tasktpls(e.busiId)}/tags`,{method:"POST",body:JSON.stringify({tags:n.tags,ids:r})}).then((()=>{xt.success(t("tpl.tag.bind.success")),e.onOk(),e.destroy()}))}))},onCancel:()=>{e.destroy()}},d.createElement(Tt,{form:n},d.createElement(Fie,{label:t("tpl.tag.bind.field"),required:!0,name:"tags",rules:[{required:!0,message:"请选择！"}]},d.createElement(Lt,{mode:"tags",open:!1}))))};Lie.defaultProps={visible:!0,onOk:w.noop,destroy:w.noop};var Pie=Nie(Lie);const Rie=Tt.Item,{Option:Die}=Lt,Bie=e=>{const{t:t}=Hr(),[n]=Tt.useForm(),{visible:r,uniqueTags:i}=e;return d.createElement(Ft,{title:t("tpl.tag.unbind.title"),visible:r,onOk:()=>{const{selectedIds:r}=e;n.validateFields().then((n=>{Si(`${fie.tasktpl(e.busiId)}s/tags`,{method:"DELETE",body:JSON.stringify({tags:n.tags,ids:r})}).then((()=>{xt.success(t("tpl.tag.unbind.success")),e.onOk(),e.destroy()}))}))},onCancel:()=>{e.destroy()}},d.createElement(Tt,{form:n},d.createElement(Rie,{label:t("tpl.tag.unbind.field"),required:!0,name:"tags",rules:[{required:!0}]},d.createElement(Lt,{mode:"tags"},w.map(i,(e=>d.createElement(Die,{key:e,value:e},e)))))))};Bie.defaultProps={visible:!0,onOk:w.noop,destroy:w.noop};var zie=Nie(Bie);const Hie=e=>{const{t:t,i18n:n}=Hr(),r=f.exports.useRef(null),[i,a]=f.exports.useState(""),{curBusiItem:o}=ri((e=>e.common)),c=o.id,[u,h]=f.exports.useState([]),{tableProps:p,refresh:m}=nt((e=>function(e,t,n){return t?Si(`${fie.tasktpls(t)}?limit=${e.pageSize}&p=${e.current}&query=${n}`).then((e=>({list:e.dat.list,total:e.dat.total}))):Promise.resolve({list:[],total:0})}(e,c,i)),{refreshDeps:[c,i]});const g=[{title:"ID",dataIndex:"id"},{title:t("tpl.title"),dataIndex:"title",render:(e,t)=>d.createElement(D,{to:{pathname:`/job-tpls/${t.id}/detail`}},e)},{title:t("tpl.tags"),dataIndex:"tags",render:e=>w.map(e,(e=>d.createElement(Nt,{color:"purple",key:e,onClick:()=>function(e){var t;if(!w.includes(i,e)){const n=i?`${i} ${e}`:e;a(n),null==(t=r.current)||t.setValue(n)}}(e)},e)))},{title:t("tpl.creator"),dataIndex:"create_by",width:100},{title:t("tpl.last_updated"),dataIndex:"update_at",width:160,render:e=>A.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:t("table.operations"),width:220,render:(e,n)=>d.createElement("span",null,d.createElement(D,{to:{pathname:"/job-tpls/add/task",search:`tpl=${n.id}`}},t("task.create")),d.createElement(Pt,{type:"vertical"}),d.createElement(D,{to:{pathname:`/job-tpls/${n.id}/modify`}},t("table.modify")),d.createElement(Pt,{type:"vertical"}),d.createElement(D,{to:{pathname:`/job-tpls/${n.id}/clone`}},t("table.clone")),d.createElement(Pt,{type:"vertical"}),d.createElement(on,{title:d.createElement("div",{style:{width:100}},t("table.delete.sure")),onConfirm:()=>{var e;e=n.id,c&&Si(`${fie.tasktpl(c)}/${e}`,{method:"DELETE"}).then((()=>{xt.success(t("msg.delete.success")),m()}))}},d.createElement("a",{style:{color:"red"}},t("table.delete"))))}];return d.createElement(ia,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(b,null),t("自愈脚本"))},d.createElement("div",{style:{display:"flex"}},d.createElement(Oa,null),c?d.createElement("div",{style:{flex:1,padding:20}},d.createElement(Ot,null,d.createElement(It,{span:14,className:"mb10"},d.createElement(St,{style:{width:200},ref:r,prefix:d.createElement(M,null),defaultValue:i,onPressEnter:e=>{a(e.currentTarget.value)},placeholder:"搜索标题、标签"})),d.createElement(It,{span:10,className:"textAlignRight"},d.createElement(D,{to:{pathname:"/job-tpls/add"}},d.createElement(Ct,{icon:d.createElement(Ie,null),style:{marginRight:10},type:"primary",ghost:!0},t("tpl.create"))),d.createElement(_t,{overlay:d.createElement(bt,null,d.createElement(bt.Item,null,d.createElement(Ct,{type:"link",disabled:0===u.length,onClick:()=>{w.isEmpty(u)||Pie({language:n.language,selectedIds:u,busiId:c,onOk:()=>{m()}})}},t("tpl.tag.bind"))),d.createElement(bt.Item,null,d.createElement(Ct,{type:"link",disabled:0===u.length,onClick:()=>{!function(){if(!w.isEmpty(u)){let e=[];w.each(p.dataSource,(t=>{const n=t.tags;e=w.union(e,n)})),zie({language:n.language,selectedIds:u,uniqueTags:e,busiId:c,onOk:()=>{m()}})}}()}},t("tpl.tag.unbind"))))},d.createElement(Ct,{icon:d.createElement(I,null)},t("table.batch.operations"))))),d.createElement(Rt,l(s({rowKey:"id",columns:g},p),{rowSelection:{selectedRowKeys:u,onChange:e=>{h(e)}},pagination:l(s({},p.pagination),{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==n.language?`Total ${e} items`:`共 ${e} 条`})}))):d.createElement(Ia,{text:"自愈脚本"})))};!function(e,t){ace.define("ace/mode/sh_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,a=t.reservedKeywords="!|{|}|case|do|done|elif|else|esac|fi|for|if|in|then|until|while|&|;|export|local|read|typeset|unset|elif|select|set|function|declare|readonly",o=t.languageConstructs="[|]|alias|bg|bind|break|builtin|cd|command|compgen|complete|continue|dirs|disown|echo|enable|eval|exec|exit|fc|fg|getopts|hash|help|history|jobs|kill|let|logout|popd|printf|pushd|pwd|return|set|shift|shopt|source|suspend|test|times|trap|type|ulimit|umask|unalias|wait",s=function(){var e=this.createKeywordMapper({keyword:a,"support.function.builtin":o,"invalid.deprecated":"debugger"},"identifier");this.$rules={start:[{token:"constant",regex:/\\./},{token:["text","comment"],regex:/(^|\s)(#.*)$/},{token:"string.start",regex:'"',push:[{token:"constant.language.escape",regex:/\\(?:[$`"\\]|$)/},{include:"variables"},{token:"keyword.operator",regex:/`/},{token:"string.end",regex:'"',next:"pop"},{defaultToken:"string"}]},{token:"string",regex:"\\$'",push:[{token:"constant.language.escape",regex:/\\(?:[abeEfnrtv\\'"]|x[a-fA-F\d]{1,2}|u[a-fA-F\d]{4}([a-fA-F\d]{4})?|c.|\d{1,3})/},{token:"string",regex:"'",next:"pop"},{defaultToken:"string"}]},{regex:"<<<",token:"keyword.operator"},{stateName:"heredoc",regex:"(<<-?)(\\s*)(['\"`]?)([\\w\\-]+)(['\"`]?)",onMatch:function(e,t,n){var r="-"==e[2]?"indentedHeredoc":"heredoc",i=e.split(this.splitRegex);return n.push(r,i[4]),[{type:"constant",value:i[1]},{type:"text",value:i[2]},{type:"string",value:i[3]},{type:"support.class",value:i[4]},{type:"string",value:i[5]}]},rules:{heredoc:[{onMatch:function(e,t,n){return e===n[1]?(n.shift(),n.shift(),this.next=n[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^\t+"},{onMatch:function(e,t,n){return e===n[1]?(n.shift(),n.shift(),this.next=n[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(e,t){return"heredoc"===t[0]||"indentedHeredoc"===t[0]?t[0]:e}},{token:["keyword","text","text","text","variable"],regex:/(declare|local|readonly)(\s+)(?:(-[fixar]+)(\s+))?([a-zA-Z_][a-zA-Z0-9_]*\b)/},{token:"variable.language",regex:"(?:\\$(?:SHLVL|\\$|\\!|\\?))"},{token:"variable",regex:"(?:[a-zA-Z_][a-zA-Z0-9_]*(?==))"},{include:"variables"},{token:"support.function",regex:"(?:[a-zA-Z_][a-zA-Z0-9_]*\\s*\\(\\))"},{token:"support.function",regex:"(?:&(?:\\d+))"},{token:"string",start:"'",end:"'"},{token:"constant.numeric",regex:"(?:(?:(?:(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.))|(?:\\d+)))|(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.)))"},{token:"constant.numeric",regex:"(?:(?:[1-9]\\d*)|(?:0))\\b"},{token:e,regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|~|<|>|<=|=>|=|!=|[%&|`]"},{token:"punctuation.operator",regex:";"},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]]"},{token:"paren.rparen",regex:"[\\)\\}]",next:"pop"}],variables:[{token:"variable",regex:/(\$)(\w+)/},{token:["variable","paren.lparen"],regex:/(\$)(\()/,push:"start"},{token:["variable","paren.lparen","keyword.operator","variable","keyword.operator"],regex:/(\$)(\{)([#!]?)(\w+|[*@#?\-$!0_])(:[?+\-=]?|##?|%%?|,,?\/|\^\^?)?/,push:"start"},{token:"variable",regex:/\$[*@#?\-$!0_]/},{token:["variable","paren.lparen"],regex:/(\$)(\{)/,push:"start"}]},this.normalizeRules()};r.inherits(s,i),t.ShHighlightRules=s})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){var r=e("../../lib/oop"),i=e("../../range").Range,a=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(o,a),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var i=this._getFoldWidgetBase(e,t,n);return!i&&this.startRegionRe.test(r)?"start":i},this.getFoldWidgetRange=function(e,t,n,r){var i,a=e.getLine(n);if(this.startRegionRe.test(a))return this.getCommentRegionBlock(e,a,n);if(i=a.match(this.foldingStartMarker)){var o=i.index;if(i[1])return this.openingBracketBlock(e,i[1],n,o);var s=e.getCommentFoldRange(n,o+i[0].length,1);return s&&!s.isMultiLine()&&(r?s=this.getSectionRange(e,n):"all"!=t&&(s=null)),s}if("markbegin"!==t&&(i=a.match(this.foldingStopMarker))){o=i.index+i[0].length;return i[1]?this.closingBracketBlock(e,i[1],n,o):e.getCommentFoldRange(n,o,-1)}},this.getSectionRange=function(e,t){for(var n=e.getLine(t),r=n.search(/\S/),a=t,o=n.length,s=t+=1,l=e.getLength();++t<l;){var c=(n=e.getLine(t)).search(/\S/);if(-1!==c){if(r>c)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=a)break;if(u.isMultiLine())t=u.end.row;else if(r==c)break}s=t}}return new i(a,o,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,n){for(var r=t.search(/\s*$/),a=e.getLength(),o=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<a;){t=e.getLine(n);var c=s.exec(t);if(c&&(c[1]?l--:l++,!l))break}if(n>o)return new i(o,r,n,t.length)}}.call(o.prototype)})),ace.define("ace/mode/sh",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sh_highlight_rules","ace/range","ace/mode/folding/cstyle","ace/mode/behaviour/cstyle"],(function(e,t,n){var r=e("../lib/oop"),i=e("./text").Mode,a=e("./sh_highlight_rules").ShHighlightRules,o=e("../range").Range,s=e("./folding/cstyle").FoldMode,l=e("./behaviour/cstyle").CstyleBehaviour,c=function(){this.HighlightRules=a,this.foldingRules=new s,this.$behaviour=new l};r.inherits(c,i),function(){this.lineCommentStart="#",this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e).tokens;if(i.length&&"comment"==i[i.length-1].type)return r;"start"==e&&(t.match(/^.*[\{\(\[:]\s*$/)&&(r+=n));return r};var e={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(t,n,r){if("\r\n"!==r&&"\r"!==r&&"\n"!==r)return!1;var i=this.getTokenizer().getLineTokens(n.trim(),t).tokens;if(!i)return!1;do{var a=i.pop()}while(a&&("comment"==a.type||"text"==a.type&&a.value.match(/^\s+$/)));return!!a&&("keyword"==a.type&&e[a.value])},this.autoOutdent=function(e,t,n){n+=1;var r=this.$getIndent(t.getLine(n)),i=t.getTabString();r.slice(-i.length)==i&&t.remove(new o(n,r.length-i.length,n,r.length))},this.$id="ace/mode/sh",this.snippetFileId="ace/snippets/sh"}.call(c.prototype),t.Mode=c})),ace.require(["ace/mode/sh"],(function(t){e&&(e.exports=t)}))}({exports:{}});!function(e,t){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/monokai"],(function(t){e&&(e.exports=t)}))}({exports:{}});function jie(e){return d.createElement(Bn,{placeholder:"Placeholder Text",style:{width:"100%"},height:e.height,mode:"sh",theme:"kuroir",name:"blah2",fontSize:14,showPrintMargin:!1,showGutter:!0,readOnly:e.readOnly,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2},value:e.value,onChange:t=>{e.onChange&&e.onChange(t)}})}!function(e,t){ace.define("ace/theme/kuroir",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!1,t.cssClass="ace-kuroir",t.cssText=".ace-kuroir .ace_gutter {background: #e8e8e8;color: #333;}.ace-kuroir .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-kuroir {background-color: #E8E9E8;color: #363636;}.ace-kuroir .ace_cursor {color: #202020;}.ace-kuroir .ace_marker-layer .ace_selection {background: rgba(245, 170, 0, 0.57);}.ace-kuroir.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #E8E9E8;}.ace-kuroir .ace_marker-layer .ace_step {background: rgb(198, 219, 174);}.ace-kuroir .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(0, 0, 0, 0.29);}.ace-kuroir .ace_marker-layer .ace_active-line {background: rgba(203, 220, 47, 0.22);}.ace-kuroir .ace_gutter-active-line {background-color: rgba(203, 220, 47, 0.22);}.ace-kuroir .ace_marker-layer .ace_selected-word {border: 1px solid rgba(245, 170, 0, 0.57);}.ace-kuroir .ace_invisible {color: #BFBFBF}.ace-kuroir .ace_fold {border-color: #363636;}.ace-kuroir .ace_constant{color:#CD6839;}.ace-kuroir .ace_constant.ace_numeric{color:#9A5925;}.ace-kuroir .ace_support{color:#104E8B;}.ace-kuroir .ace_support.ace_function{color:#005273;}.ace-kuroir .ace_support.ace_constant{color:#CF6A4C;}.ace-kuroir .ace_storage{color:#A52A2A;}.ace-kuroir .ace_invalid.ace_illegal{color:#FD1224;background-color:rgba(255, 6, 0, 0.15);}.ace-kuroir .ace_invalid.ace_deprecated{text-decoration:underline;font-style:italic;color:#FD1732;background-color:#E8E9E8;}.ace-kuroir .ace_string{color:#639300;}.ace-kuroir .ace_string.ace_regexp{color:#417E00;background-color:#C9D4BE;}.ace-kuroir .ace_comment{color:rgba(148, 148, 148, 0.91);background-color:rgba(220, 220, 220, 0.56);}.ace-kuroir .ace_variable{color:#009ACD;}.ace-kuroir .ace_meta.ace_tag{color:#005273;}.ace-kuroir .ace_markup.ace_heading{color:#B8012D;background-color:rgba(191, 97, 51, 0.051);}.ace-kuroir .ace_markup.ace_list{color:#8F5B26;}",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/kuroir"],(function(t){e&&(e.exports=t)}))}({exports:{}}),jie.defaultProps={readOnly:!1,height:"500px"};const Gie=Tt.Item,{TextArea:$ie}=St,Yie=e=>{const{t:t}=Hr(),[n]=Tt.useForm();f.exports.useEffect((()=>{}));const{initialValues:r,type:i}=e;return d.createElement("div",{className:"job-tpl-form"},d.createElement(Tt,{onFinish:t=>{e.onSubmit(l(s({},t),{hosts:w.split(t.hosts,"\n")}))},form:n,layout:"vertical"},d.createElement(Gie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Title:"),t("tpl"===i?"tpl.title.tpl.help":"tpl.title.task.help")),name:"title",initialValue:r.title,rules:[{required:!0,message:"必填项！"}]},d.createElement(St,null)),"tpl"===i?d.createElement(Gie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Tags:"),t("tpl.tags.help")),name:"tags",initialValue:r.tags},d.createElement(Lt,{mode:"tags",open:!1,style:{width:"100%"}})):null,d.createElement(Gie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Account:"),t("tpl.account.help")),name:"account",initialValue:r.account,rules:[{required:!0,message:"必填项！"}]},d.createElement(St,null)),d.createElement(Gie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Batch:"),t("tpl.batch.help")),name:"batch",initialValue:r.batch,rules:[{required:!0,message:"必填项！"}]},d.createElement(zt,{min:0})),d.createElement(Gie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Tolerance:"),t("tpl.tolerance.help")),name:"tolerance",initialValue:r.tolerance,rules:[{required:!0,message:"必填项！"}]},d.createElement(zt,{min:0})),d.createElement(Gie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Timeout:"),t("tpl.timeout.help")),name:"timeout",initialValue:r.timeout},d.createElement(zt,{min:0})),d.createElement(Gie,{label:d.createElement("span",null,d.createElement("strong",null,"Pause:"),t("tpl.pause.help")),name:"pause",initialValue:r.pause},d.createElement(St,null)),d.createElement(Gie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Host:"),t("tpl.host.help")),name:"hosts",initialValue:w.join(r.hosts,"\n"),rules:[{required:"tpl"!==i,message:"必填项！"}]},d.createElement($ie,{autoSize:{minRows:3,maxRows:8}})),d.createElement(Gie,{label:d.createElement(d.Fragment,null,d.createElement("strong",null,"Script:"),t("tpl.script.help")),name:"script",initialValue:r.script,rules:[{required:!0,message:"必填项！"}]},d.createElement(jie,null)),d.createElement(Gie,{label:d.createElement("span",null,d.createElement("strong",null,"Args:"),t("tpl.args.help")),name:"args",initialValue:r.args},d.createElement(St,null)),d.createElement(Gie,null,e.footer)))};Yie.defaultProps={type:"tpl",initialValues:{title:"",batch:0,tolerance:0,timeout:30,pause:"",script:"#!/bin/bash\n# e.g.\nexport PATH=/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:~/bin\nss -tln",args:"",tags:void 0,account:"root",hosts:[],treeData:[]},onSubmit:()=>{}};var Uie=it(Yie);const Vie=e=>{const t=C(),{curBusiItem:n}=ri((e=>e.common)),{t:r}=Hr();return d.createElement(ia,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(jt,{title:"创建自愈脚本"},d.createElement(Uie,{onSubmit:t=>{Si(`${fie.tasktpls(n.id)}`,{method:"POST",body:JSON.stringify(t)}).then((()=>{xt.success(r("msg.create.success")),e.history.push({pathname:"/job-tpls"})}))},footer:d.createElement("div",null,d.createElement(Ct,{type:"primary",htmlType:"submit",style:{marginRight:8}},r("form.submit")))}))))},Wie=e=>{const t=C(),n=w.get(e,"match.params.id"),{curBusiItem:r}=ri((e=>e.common)),{t:i}=Hr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),Si(`${fie.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(ia,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(jt,{title:"自愈脚本详情"},d.createElement(tn,{spinning:a},d.createElement("div",{className:"job-task-table"},d.createElement("div",{className:"ant-table ant-table-default ant-table-bordered"},d.createElement("div",{className:"ant-table-content"},d.createElement("div",{className:"ant-table-body"},d.createElement("table",null,d.createElement("colgroup",null,d.createElement("col",{style:{width:100,minWidth:100}}),d.createElement("col",null)),d.createElement("tbody",{className:"ant-table-tbody"},d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.title")),d.createElement("td",null,c.title)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("tpl.creator")),d.createElement("td",null,c.create_by)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("tpl.last_updated")),d.createElement("td",null,A.unix(c.update_at).format("YYYY-MM-DD HH:mm:ss"))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.control.params")),d.createElement("td",null,i("task.account"),"：",c.account,d.createElement(Pt,{type:"vertical"}),i("task.batch"),"：",c.batch,d.createElement(Pt,{type:"vertical"}),i("task.tolerance"),"：",c.tolerance,d.createElement(Pt,{type:"vertical"}),i("task.timeout"),"：",c.timeout)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,d.createElement("div",{style:{height:"100%"}},i("task.script"))),d.createElement("td",null,d.createElement(jie,{value:c.script,readOnly:!0,height:"200px"}))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.script.args")),d.createElement("td",null,c.args)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.pause")),d.createElement("td",null,c.pause)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,i("task.host.list")),d.createElement("td",null,w.map(c.hosts,(e=>d.createElement("div",{key:e},e))))))))))),d.createElement("div",{style:{marginTop:10}},d.createElement(D,{to:{pathname:`/job-tpls/${n}/modify`}},d.createElement(Ct,{type:"primary",style:{marginRight:10}},i("tpl.modify"))),d.createElement(D,{to:{pathname:"/job-tpls/add/task",search:`tpl=${n}`}},d.createElement(Ct,{type:"primary"},i("tpl.create.task"))))))))},Xie=e=>{const t=C(),n=w.get(e,"match.params.id"),{curBusiItem:r}=ri((e=>e.common)),{t:i}=Hr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),Si(`${fie.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(ia,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(jt,{title:"修改自愈脚本"},d.createElement(tn,{spinning:a},c.title?d.createElement(Uie,{onSubmit:t=>{Si(`${fie.tasktpl(r.id)}/${n}`,{method:"PUT",body:JSON.stringify(t)}).then((()=>{xt.success(i("msg.modify.success")),e.history.push({pathname:"/job-tpls"})}))},initialValues:c,footer:d.createElement(Ct,{type:"primary",htmlType:"submit"},i("form.submit"))}):null))))},qie=e=>{const t=C(),n=w.get(e,"match.params.id"),{curBusiItem:r}=ri((e=>e.common)),{t:i}=Hr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{n&&(o(!0),Si(`${fie.tasktpl(r.id)}/${n}`).then((e=>{const{dat:t}=e;u(l(s({},t.tpl),{hosts:t.hosts,grp:t.grp}))})).finally((()=>{o(!1)})))}),[n,r.id]),d.createElement(ia,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本")},d.createElement("div",{style:{padding:10}},d.createElement(jt,{title:"克隆自愈脚本"},d.createElement(tn,{spinning:a},c.title?d.createElement(Uie,{onSubmit:t=>{Si(`${fie.tasktpls(r.id)}`,{method:"POST",body:JSON.stringify(t)}).then((()=>{xt.success(i("msg.create.success")),e.history.push({pathname:"/job-tpls"})}))},initialValues:c,footer:d.createElement("div",null,d.createElement(Ct,{type:"primary",htmlType:"submit",style:{marginRight:8}},i("form.submit")))}):null))))};const Kie=e=>{const t=C(),{t:n,i18n:r}=Hr(),[i,a]=f.exports.useState(""),[o,c]=f.exports.useState(!0),[u,h]=f.exports.useState(7),{curBusiItem:p}=ri((e=>e.common)),{tableProps:m}=nt((e=>function(e,t,n,r,i){return t?Si(`${fie.tasks(t)}?limit=${e.pageSize}&p=${e.current}&query=${n}&mine=${r?1:0}&days=${i}`).then((e=>({list:e.dat.list,total:e.dat.total}))):Promise.resolve({list:[],total:0})}(e,p.id,i,o,u)),{refreshDeps:[p.id,i,o,u]}),g=[{title:"ID",dataIndex:"id",width:100},{title:n("task.title"),dataIndex:"title",width:200,render:(e,t)=>d.createElement(D,{to:{pathname:`/job-tasks/${t.id}/result`}},e)},{title:n("table.operations"),width:150,render:(e,t)=>d.createElement("span",null,d.createElement(D,{to:{pathname:"/job-tasks/add",search:`task=${t.id}`}},n("task.clone")),d.createElement(Pt,{type:"vertical"}),d.createElement(D,{to:{pathname:`/job-tasks/${t.id}/detail`}},n("task.meta")))},{title:n("task.creator"),dataIndex:"create_by",width:100},{title:n("task.created"),dataIndex:"create_at",width:160,render:e=>A.unix(e).format("YYYY-MM-DD HH:mm:ss")}];return d.createElement(ia,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(b,null),n("执行历史"))},d.createElement("div",{style:{display:"flex"}},d.createElement(Oa,null),p.id?d.createElement("div",{style:{flex:1,padding:10}},d.createElement(Ot,null,d.createElement(It,{span:16,className:"mb10"},d.createElement(St,{style:{width:200,marginRight:10},prefix:d.createElement(M,null),defaultValue:i,onPressEnter:e=>{a(e.currentTarget.value)},placeholder:"搜索标题"}),d.createElement(Lt,{style:{marginRight:10},value:u,onChange:e=>{h(e)}},d.createElement(Lt.Option,{value:7},n("last.7.days")),d.createElement(Lt.Option,{value:15},n("last.15.days")),d.createElement(Lt.Option,{value:30},n("last.30.days")),d.createElement(Lt.Option,{value:60},n("last.60.days")),d.createElement(Lt.Option,{value:90},n("last.90.days"))),d.createElement(At,{checked:o,onChange:e=>{c(e.target.checked)}},n("task.only.mine"))),d.createElement(It,{span:8,style:{textAlign:"right"}},d.createElement(Ct,{type:"primary",ghost:!0,onClick:()=>{t.push("/job-tasks/add")}},n("task.temporary.create")))),d.createElement(Rt,l(s({rowKey:"id",columns:g},m),{pagination:l(s({},m.pagination),{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==r.language?`Total ${e} items`:`共 ${e} 条`})}))):d.createElement(Ia,{text:n("执行历史")})))},Qie=e=>{const t=C(),n=ii.parse(w.get(e,"location.search")),{curBusiItem:r}=ri((e=>e.common)),{t:i}=Hr(),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState(),[h,p]=f.exports.useState("");return f.exports.useEffect((()=>{w.isPlainObject(n)&&(void 0!==n.tpl?(o(!0),Si(`${fie.tasktpl(r.id)}/${n.tpl}`,{}).then((e=>{u(l(s({},e.dat.tpl),{hosts:e.dat.hosts}))})).finally((()=>{o(!1)}))):void 0!==n.task&&(o(!0),Si(`${fie.task(r.id)}/${n.task}`,{}).then((e=>{u(l(s({},e.dat.meta),{hosts:w.map(e.dat.hosts,(e=>e.host))}))})).finally((()=>{o(!1)}))))}),[]),d.createElement(ia,{hideCluster:!0,title:n.tpl?d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tpls")}),"自愈脚本"):d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{background:"none"}},d.createElement(Ot,{gutter:20},d.createElement(It,{span:18},d.createElement(jt,{title:n.tpl?"创建任务":n.task?"克隆任务":"创建临时任务"},d.createElement(tn,{spinning:a},c||!n.tpl&&!n.task?d.createElement(Uie,{type:"task",initialValues:c,onSubmit:t=>{h&&Si(fie.tasks(r.id),{method:"POST",body:JSON.stringify(l(s({},t),{action:h}))}).then((t=>{xt.success(i("msg.create.success")),e.history.push({pathname:`/job-tasks/${t.dat}/result`})}))},footer:d.createElement("div",null,d.createElement(Ct,{type:"primary",htmlType:"submit",style:{marginRight:10},onClick:()=>{p("pause")}},"保存暂不执行"),d.createElement(Ct,{type:"primary",htmlType:"submit",onClick:()=>{p("start")}},"保存立刻执行"))}):null))),d.createElement(It,{span:6},d.createElement(Wt,{showIcon:!0,message:"提示信息",description:"如果你的角色是管理员，则可以在任意机器执行脚本；否则，只能对有管理权限的业务组下的机器执行脚本",type:"warning"}))))))};const Zie=e=>{const{t:t,i18n:n}=Hr(),r=async(r,i)=>{const{data:a}=e;let o=[];if("all"===i&&(o=w.map(a,(e=>e[r]))),w.isEmpty(o))return void xt.warning(t("host.copy.empty"));const s=w.join(o,"\n");(function(e){const t=document.createElement("textarea");t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style.left="-9999px";const n=window.pageYOffset||document.documentElement.scrollTop;let r;t.style.top=`${n}px`,t.setAttribute("readonly",""),t.value=e,document.body.appendChild(t),t.select();try{r=document.execCommand("copy")}catch(i){r=!1}return r&&document.body.removeChild(t),r})(s)?"zh"===n.language?xt.success(`复制成功${o.length}条记录`):"en"===n.language&&xt.success(`Successful copy ${o.length} items`):Ft.warning({title:t("host.copy.error"),content:d.createElement(St.TextArea,{defaultValue:s})})},{dataIndex:i}=e;return d.createElement("span",null,"Host",d.createElement(z,{className:"pointer",style:{paddingLeft:5},onClick:()=>r(i,"all")}))};Zie.defaultProps={data:[],selected:[],hasSelected:!0};const Jie=e=>{const t=C(),{curBusiItem:n}=ri((e=>e.common)),{params:r}=e.match,i=r.id,{t:a,i18n:o}=Hr(),[c,u]=f.exports.useState(),[h,p]=f.exports.useState({}),[m,g]=f.exports.useState([]),[v,y]=f.exports.useState(!1),x=()=>(y(!0),Si(`${fie.task(n.id)}/${r.id}`).then((e=>{p(l(s({},e.dat.meta),{action:e.dat.action})),g(e.dat.hosts)})).finally((()=>{y(!1)})));f.exports.useEffect((()=>{x()}),[]);let E=w.cloneDeep(m);c&&(E=w.filter(E,(e=>w.includes(c,e.status))));const b=(e,t)=>{Si(`${fie.task(n.id)}/${i}/host/${e}/action`,{method:"PUT",body:JSON.stringify({action:t})}).then((()=>{x()}))},T=e=>{Si(`${fie.task(n.id)}/${i}/action`,{method:"PUT",body:JSON.stringify({action:e})}).then((()=>{x()}))},S=[{title:d.createElement(Zie,{dataIndex:"host",hasSelected:!1,data:E}),dataIndex:"host"},{title:a("task.status"),dataIndex:"status",filters:(()=>{const e=w.groupBy(m,"status");return w.map(e,((e,t)=>({text:`${t} (${e.length})`,value:t})))})(),onFilter:(e,t)=>t.status===e,render:e=>"success"===e?d.createElement(Nt,{color:"#87d068"},e):"cancelled"===e||"ignored"===e?d.createElement(Nt,{color:"#ec971f"},e):"failed"===e||"killfailed"===e||"timeout"===e?d.createElement(Nt,{color:"#f50"},e):d.createElement(Nt,null,e)},{title:a("task.output"),render:(e,t)=>d.createElement("span",null,d.createElement(D,{to:`/job-task/${n.id}/output/${r.id}/${t.host}/stdout`,target:"_blank"},"stdout"),d.createElement(Pt,{type:"vertical"}),d.createElement("a",{href:`/job-task/${n.id}/output/${r.id}/${t.host}/stderr`,target:"_blank"},"stderr"))}];return h.done||S.push({title:a("table.operations"),render:(e,t)=>d.createElement("span",null,d.createElement("a",{onClick:()=>b(t.host,"ignore")},"ignore"),d.createElement(Pt,{type:"vertical"}),d.createElement("a",{onClick:()=>b(t.host,"redo")},"redo"),d.createElement(Pt,{type:"vertical"}),d.createElement("a",{onClick:()=>b(t.host,"kill")},"kill"))}),d.createElement(ia,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10},className:"job-task-result"},d.createElement(jt,{title:h.title,extra:d.createElement("a",{onClick:()=>{x()}},a("task.refresh"))},d.createElement(Ot,{style:{marginBottom:20}},d.createElement(It,{span:18},d.createElement("div",null,d.createElement("a",{href:`/job-task/${n.id}/output/${i}/stdout`,target:"_blank"},"stdouts"),d.createElement(Pt,{type:"vertical"}),d.createElement("a",{href:`/job-task/${n.id}/output/${i}/stderr`,target:"_blank"},"stderrs"),d.createElement(Pt,{type:"vertical"}),d.createElement(D,{to:{pathname:`/job-tasks/${i}/detail`}},a("task.meta")),d.createElement(Pt,{type:"vertical"}),d.createElement(D,{to:{pathname:"/job-tasks/add",search:`task=${i}`}},a("task.clone")))),d.createElement(It,{span:6,className:"textAlignRight"},h.done?null:d.createElement("span",null,"start"===h.action?d.createElement(Ct,{className:"success-btn",onClick:()=>T("pause")},"Pause"):d.createElement(Ct,{className:"success-btn",onClick:()=>T("start")},"Start"),d.createElement(Ct,{className:"ml10 warning-btn",onClick:()=>T("cancel")},"Cancel"),d.createElement(Ct,{className:"ml10 danger-btn",onClick:()=>T("kill")},"Kill")))),d.createElement(Rt,{rowKey:"host",columns:S,dataSource:m,loading:v,pagination:{showSizeChanger:!0,pageSizeOptions:["10","50","100","500","1000"],showTotal:e=>"en"==o.language?`Total ${e} items`:`共 ${e} 条`},onChange:(e,t,n,r)=>{u(t.status)}}))))};const eae=e=>{const t=C(),{curBusiItem:n}=ri((e=>e.common)),{t:r}=Hr(),i=w.get(e,"match.params.id"),[a,o]=f.exports.useState(!1),[c,u]=f.exports.useState({});return f.exports.useEffect((()=>{void 0!==i&&(o(!0),Si(`${fie.task(n.id)}/${i}`).then((e=>{u(l(s({},e.dat.meta),{hosts:w.map(e.dat.hosts,(e=>e.host))}))})).finally((()=>{o(!1)})))}),[i]),d.createElement(ia,{hideCluster:!0,title:d.createElement(d.Fragment,null,d.createElement(O,{className:"back",onClick:()=>t.push("/job-tasks")}),"执行历史")},d.createElement("div",{style:{padding:10}},d.createElement(jt,{title:c.title},d.createElement(tn,{spinning:a},d.createElement("div",{className:"job-task-table"},d.createElement("div",{className:"ant-table ant-table-default ant-table-bordered"},d.createElement("div",{className:"ant-table-content"},d.createElement("div",{className:"ant-table-body"},d.createElement("table",null,d.createElement("colgroup",null,d.createElement("col",{style:{width:100,minWidth:100}}),d.createElement("col",null)),d.createElement("tbody",{className:"ant-table-tbody"},d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.title")),d.createElement("td",null,c.title)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.creator")),d.createElement("td",null,c.creator," @ ",A(c.created).format("YYYY-MM-DD HH:mm:ss"))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.control.params")),d.createElement("td",null,r("task.account"),"：",c.account,d.createElement(Pt,{type:"vertical"}),r("task.batch"),"：",c.batch,d.createElement(Pt,{type:"vertical"}),r("task.tolerance"),"：",c.tolerance,d.createElement(Pt,{type:"vertical"}),r("task.timeout"),"：",c.timeout)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.script")),d.createElement("td",null,d.createElement(jie,{value:c.script,readOnly:!0,height:"200px"}))),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.script.args")),d.createElement("td",null,c.args)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.pause")),d.createElement("td",null,c.pause)),d.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},d.createElement("td",null,r("task.host.list")),d.createElement("td",null,w.map(c.hosts,(e=>d.createElement("div",{key:e},e))))))))))),d.createElement("div",{style:{marginTop:10}},d.createElement(D,{to:{pathname:"/job-tasks/add",search:`task=${i}`}},d.createElement(Ct,{type:"primary"},r("task.clone.new"))),d.createElement(D,{style:{marginLeft:8},to:{pathname:"/job-tasks"}},d.createElement(Ct,null,"返回")))))))};function tae(){return f.exports.createElement("svg",{t:1638430671795,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":2334,xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em"},f.exports.createElement("defs",null,f.exports.createElement("style",{type:"text/css"})),f.exports.createElement("path",{d:"M724 839c15.464 0 28 12.536 28 28s-12.536 28-28 28H300c-15.464 0-28-12.536-28-28s12.536-28 28-28h424z m116-709c66.274 0 120 53.726 120 120v402c0 66.274-53.726 120-120 120H184c-66.274 0-120-53.726-120-120V250c0-66.274 53.726-120 120-120h656z m0 56H184c-34.993 0-63.426 28.084-63.991 62.942L120 250v402c0 34.993 28.084 63.426 62.942 63.991L184 716h656c34.993 0 63.426-28.084 63.991-62.942L904 652V250c0-34.993-28.084-63.426-62.942-63.991L840 186zM298 512c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32-17.673 0-32-14.327-32-32 0-17.673 14.327-32 32-32z m433 4c15.464 0 28 12.536 28 28s-12.536 28-28 28H387c-15.464 0-28-12.536-28-28s12.536-28 28-28h344zM298 327c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32-17.673 0-32-14.327-32-32 0-17.673 14.327-32 32-32z m433 4c15.464 0 28 12.536 28 28s-12.536 28-28 28H387c-15.464 0-28-12.536-28-28s12.536-28 28-28h344z","p-id":2335,fill:"currentColor"}))}var nae="5.9.1";function rae(){const[e,t]=f.exports.useState("");return f.exports.useEffect((()=>{fetch("/api/n9e/version").then((e=>e.text())).then((e=>{t(e)}))}),[]),d.createElement(ia,{title:d.createElement(d.Fragment,null,d.createElement(x,{component:tae})," 系统版本"),hideCluster:!0},d.createElement("div",{style:{padding:10}},d.createElement("ul",{style:{padding:"20px 30px"}},d.createElement("li",null,"前端版本：",nae),d.createElement("li",null,"后端版本：",e))))}function iae(){const[e,t]=f.exports.useState(4701),[n,r]=f.exports.useState(95);return f.exports.useEffect((()=>{fetch("https://api.github.com/repos/ccfos/nightingale").then((e=>{e.json().then((e=>{t(e.stargazers_count)}))})),fetch("https://api.github.com/repos/n9e/fe-v5").then((e=>{e.json().then((e=>{r(e.stargazers_count)}))}))}),[]),d.createElement(ia,{title:d.createElement(d.Fragment,null,d.createElement(x,{component:tae})," 联系我们"),hideCluster:!0},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{padding:20}},d.createElement("ul",{style:{paddingLeft:10,marginBottom:10}},d.createElement("li",{style:{display:"flex",height:20}},"文档地址：",d.createElement("a",{href:"https://n9e.github.io/",target:"_blank"},"https://n9e.github.io/"))),d.createElement("div",{style:{paddingLeft:10,marginBottom:16}},"欢迎大家在github上关注夜莺项目，及时获取项目更新动态，有任何问题，也欢迎提交 issue，当然，如果能直接 PR 就更好了，开源软件，就是需要大家一起参与才能有蓬勃的生命力。"),d.createElement("ul",{style:{paddingLeft:10}},d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"后端代码仓库：",d.createElement("a",{href:"https://github.com/ccfos/nightingale",target:"_blank",style:{marginRight:8}},"https://github.com/ccfos/nightingale"),d.createElement("span",{className:"github-widget"},d.createElement("a",{className:"github-icon",href:"https://github.com/ccfos/nightingale",target:"_blank"},d.createElement(at,null)," Star"),d.createElement("a",{className:"github-star",href:"https://github.com/ccfos/nightingale/stargazers",target:"_blank"},e))),d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"后端代码仓库：",d.createElement("a",{href:"https://www.gitlink.org.cn/ccfos/nightingale",target:"_blank",style:{marginRight:8}},"https://www.gitlink.org.cn/ccfos/nightingale")),d.createElement("li",{style:{display:"flex",height:20,marginBottom:10}},"前端代码仓库：",d.createElement("a",{href:"https://github.com/n9e/fe-v5",target:"_blank",style:{marginRight:8}},"https://github.com/n9e/fe-v5"),d.createElement("span",{className:"github-widget"},d.createElement("a",{className:"github-icon",href:"https://github.com/n9e/fe-v5",target:"_blank"},d.createElement(at,null)," Star"),d.createElement("a",{className:"github-star",href:"https://github.com/n9e/fe-v5/stargazers",target:"_blank"},n)))),d.createElement(sn,{style:{border:"1px solid #efefef",height:250},preview:!1,src:"/image/wx_n9e.jpg"}))))}function aae(){const[e,t]=f.exports.useState([]),[n,r]=f.exports.useState(w.uniqueId("tableKey_")),i=f.exports.useRef({}),[a,o]=f.exports.useState(!1);return f.exports.useEffect((()=>{Si("/api/n9e/dashboards",{method:yi.Get}).then((e=>{t(e.dat)}))}),[]),d.createElement("div",null,d.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.createElement(Ct,{type:"primary",onClick:async()=>{w.forEach(e,(e=>{i.current[e.id]="migrating"})),r(w.uniqueId("tableKey_"));try{const t=w.groupBy(e,"group_id");for(const n of w.keys(t)){const a=t[n],s=await Bo(n,w.map(a,"id"));for(const t of s){const n=w.find(w.cloneDeep(e),{name:t.name}),a=w.get(n,"id");await Go(a,ou(t)).catch((e=>{throw i.current[a]="failed",r(w.uniqueId("tableKey_")),{id:n,err:e.message}})),i.current[a]="migrated",r(w.uniqueId("tableKey_"))}o(!0)}}catch(t){console.error(t)}},disabled:a},"大盘迁移")),d.createElement(Rt,{key:n,rowKey:"id",pagination:!1,dataSource:e,columns:[{title:"大盘名称",dataIndex:"name",key:"name"},{title:"业务组",dataIndex:"group_id"},{title:"更新时间",dataIndex:"update_at",key:"update_at",render:e=>A.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:"发布人",dataIndex:"update_by",key:"update_by"},{title:"状态",render:e=>i.current[e.id]}]}))}const{TabPane:oae}=$t;function sae(){return d.createElement(ia,{title:d.createElement(d.Fragment,null,d.createElement(ot,null)," 管理员迁移"),hideCluster:!0},d.createElement("div",{style:{padding:10}},d.createElement("div",{style:{padding:20}},d.createElement($t,{defaultActiveKey:"boards"},d.createElement(oae,{tab:"大盘迁移",key:"boards"},d.createElement(aae,null))))))}const lae=function(e,t,n){return Si(`/api/n9e/busi-group/${t}/recording-rules`,{method:n,data:e})},cae=function(e,t){return Si(`/api/n9e/busi-group/${t}/recording-rules`,{method:yi.Delete,data:{ids:e}})},uae=function(e,t){return Si(`/api/n9e/busi-group/${t}/recording-rules/fields`,{method:yi.Put,data:e})},{Option:hae}=Lt,pae={labelCol:{span:3},wrapperCol:{span:20}},dae=[{id:2,field:"cluster",name:"集群"},{id:5,field:"prom_eval_interval",name:"执行频率"},{id:4,field:"disabled",name:"启用"},{id:12,field:"append_tags",name:"附加标签"}];function fae(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function mae(e){const{isCorrectFormat:t,isLengthAllowed:n}=fae(e.value);return t&&n?d.createElement(Nt,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(kt,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Nt,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function gae(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=fae(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const vae=({isModalVisible:e,editModalFinish:t})=>{const{t:n}=Hr(),[r]=Tt.useForm(),{clusters:i}=ri((e=>e.common)),[a,o]=f.exports.useState("cluster"),[c,u]=f.exports.useState(!0),h=e=>{e.includes("$all")&&r.setFieldsValue({cluster:["$all"]})};return d.createElement(d.Fragment,null,d.createElement(Ft,{title:n("批量更新"),visible:e,onOk:()=>{r.validateFields().then((async e=>{const n=s({},e);delete n.field,"disabled"===e.field&&(n.disabled=e.enable_status?0:1,delete n.enable_status),"cluster"===e.field&&(n.cluster=e.cluster.join(" ")),Object.keys(n).forEach((e=>{void 0===n[e]&&(n[e]=""),Array.isArray(n[e])&&(n[e]=n[e].join(" "))})),t(!0,n)}))},onCancel:()=>{t(!1)}},d.createElement(Tt,l(s({},pae),{form:r,className:"strategy-form",layout:"horizontal",initialValues:{prom_eval_interval:15,cluster:i||["Default"],field:"cluster",enable_status:!0}}),d.createElement(Tt.Item,{label:n("字段："),name:"field",rules:[{required:!1}]},d.createElement(Lt,{style:{width:"100%"},onChange:e=>{o(e)}},dae.map((e=>d.createElement(hae,{key:e.id,value:e.field},e.name))))),(()=>{switch(a){case"note":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"note",rules:[{required:!1}]},d.createElement(St,{placeholder:n("请输入规则备注")})));case"cluster":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"cluster",rules:[{required:!1,message:n("生效集群不能为空")}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:h},d.createElement(hae,{value:"$all",key:"$all"},"$all"),null==i?void 0:i.map((e=>d.createElement(hae,{value:e,key:e},e))))));case"prom_eval_interval":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),rules:[{required:!1,message:n("执行频率不能为空")}]},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:15,wrapperCol:{span:10}},d.createElement(zt,{min:1,onChange:()=>{u(!c)}})),"秒",d.createElement(kt,{title:n(`promql 执行频率，每隔 ${r.getFieldValue("prom_eval_interval")} 秒查询时序库，查到的结果重新命名写回时序库`)},d.createElement(V,null)))));case"disabled":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:n("改为："),name:"enable_status",valuePropName:"checked"},d.createElement(Dt,null)));case"append_tags":return d.createElement(d.Fragment,null,d.createElement(Tt.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},gae]},d.createElement(Lt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:mae})));default:return null}})())))},{confirm:yae}=Ft,xae=["30","50","100","300"],Eae={id:void 0,group_id:void 0,cluster:void 0,create_at:void 0,create_by:void 0,update_at:void 0,update_by:void 0},bae=({bgid:e})=>{const[t]=f.exports.useState(),[n,r]=f.exports.useState([]),{t:i}=Hr(),a=C(),[o,l]=f.exports.useState(Xa.None),[c,u]=f.exports.useState([]),[h,p]=f.exports.useState([]),[m,g]=f.exports.useState(""),{curBusiItem:v}=ri((e=>e.common)),[y,x]=f.exports.useState(""),[E,b]=f.exports.useState(!1),[w,T]=f.exports.useState([]),[S,k]=f.exports.useState([]),[_,A]=f.exports.useState(!1);f.exports.useEffect((()=>{O()}),[e,t]),f.exports.useEffect((()=>{M()}),[y,n,w]);const O=async()=>{if(!e)return;A(!0);const{success:n,dat:r}=await(i=v.id,Si(`/api/n9e/busi-group/${i}/recording-rules`,{method:yi.Get}));var i;n&&(T(r.filter((e=>!t||e.severity===t))||[]),A(!1))},M=()=>{const e=JSON.parse(JSON.stringify(w)).filter((e=>{const t=y.toLowerCase();return(e.name.toLowerCase().indexOf(t)>-1||e.append_tags.join(" ").toLowerCase().indexOf(t)>-1)&&(n&&((e,t)=>{for(let n=0;n<t.length;n++)if(e.includes(t[n]))return!0;return!1})(e.cluster,n)||0===(null==n?void 0:n.length))}));k(e||[])},N=(e,t=!1)=>{(null==v?void 0:v.id)&&a.push(`/recording-rules/edit/${e}${t?"?mode=clone":""}`)},F=()=>{O()},L=[{title:i("集群"),dataIndex:"cluster",render:e=>{const t=e.split(" ")||[];return t.length&&t.map(((e,t)=>d.createElement(Ua,{text:e,key:t})))||d.createElement("div",null)}},{title:i("名称"),dataIndex:"name",render:(e,t)=>d.createElement("div",{className:"table-active-text",onClick:()=>{N(t.id)}},e)},{title:i("计算周期"),dataIndex:"prom_eval_interval",render:(e,t)=>e+"s"},{title:i("附加标签"),dataIndex:"append_tags",render:e=>{const t=e||[];return t.length&&t.map(((e,t)=>d.createElement(Ua,{text:e,key:t})))||d.createElement("div",null)}},{title:i("更新时间"),dataIndex:"update_at",render:e=>W(1e3*Number(e)).format("YYYY-MM-DD HH:mm:ss")},{title:i("启用"),dataIndex:"disabled",render:(e,t)=>d.createElement(Dt,{checked:e===La.Enable,size:"small",onChange:()=>{const{id:e,disabled:n}=t;uae({ids:[e],fields:{disabled:n?0:1}},v.id).then((()=>{F()}))}})},{title:i("操作"),dataIndex:"operator",render:(e,t)=>d.createElement("div",{className:"table-operator-area"},d.createElement("div",{className:"table-operator-area-normal",onClick:()=>{N(t.id,!0)}},i("克隆")),d.createElement("div",{className:"table-operator-area-warning",onClick:()=>{yae({title:i("是否删除该记录规则?"),onOk:()=>{cae([t.id],v.id).then((()=>{xt.success(i("删除成功")),F()}))},onCancel(){}})}},i("删除")))}],P=f.exports.useMemo((()=>d.createElement("ul",{className:"ant-dropdown-menu"},d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>l(Xa.Import)},d.createElement("span",null,i("导入记录规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{if(h.length){const e=h.map((e=>s(s({},e),Eae)));g(JSON.stringify(e,null,2)),l(Xa.Export)}else xt.warning(i("未选择任何规则"))}},d.createElement("span",null,i("导出记录规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{c.length?yae({title:i("是否批量删除记录规则?"),onOk:()=>{cae(c,v.id).then((()=>{xt.success(i("删除成功")),F()}))},onCancel(){}}):xt.warning(i("未选择任何规则"))}},d.createElement("span",null,i("批量删除规则"))),d.createElement("li",{className:"ant-dropdown-menu-item",onClick:()=>{i("批量更新规则"),0!=c.length?b(!0):xt.warning(i("请先选择策略"))}},d.createElement("span",null,i("批量更新规则"))))),[c,i]);return d.createElement("div",{className:"strategy-table-content"},d.createElement("div",{className:"strategy-table-search table-handle"},d.createElement("div",{className:"strategy-table-search-left"},d.createElement(Ya,{className:"strategy-table-search-left-refresh",onClick:()=>{F()}}),d.createElement(So,{noLeftPadding:!0,noRightPadding:!1,onClusterChange:e=>r(e)}),d.createElement(Ma,{className:"searchInput",placeholder:i("搜索名称或标签"),onSearch:x,allowClear:!0})),d.createElement("div",{className:"strategy-table-search-right"},d.createElement(Ct,{type:"primary",onClick:()=>{(null==v?void 0:v.id)&&a.push(`/recording-rules/add/${v.id}`)},className:"strategy-table-search-right-create"},i("新增记录规则")),d.createElement("div",{className:"table-more-options"},d.createElement(_t,{overlay:P,trigger:["click"]},d.createElement(Ct,{onClick:e=>e.stopPropagation()},i("更多操作"),d.createElement(I,{style:{marginLeft:2}})))))),d.createElement(Rt,{rowKey:"id",pagination:{total:S.length,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`,pageSizeOptions:xae,defaultPageSize:30},loading:_,dataSource:S,rowSelection:{selectedRowKeys:h.map((e=>e.id)),onChange:(e,t)=>{u(e),p(t)}},columns:L}),d.createElement(Ka,{status:o,onClose:()=>{l(Xa.None)},onSuccess:()=>{O()},onSubmit:async e=>{const{dat:t}=await lae(e,v.id,"Post");return t||{}},title:i("记录规则"),exportData:m}),E&&d.createElement(vae,{isModalVisible:E,editModalFinish:async(e,t)=>{if(e){const e=await uae({ids:c,fields:t},v.id);e.err?xt.error(e.err):(xt.success("修改成功！"),F(),b(!1))}else b(!1)}}))},Cae=()=>{const{t:e}=Hr(),t=vi(),n=C(),r=t.get("id");return d.createElement(ia,{title:e("记录规则"),icon:d.createElement(L,null),hideCluster:!0},d.createElement("div",{className:"strategy-content"},d.createElement(Oa,{busiGroup:{defaultSelect:r?Number(r):void 0,onChange:e=>{n.push(`/recording-rules?id=${e}`)}}}),r?d.createElement(bae,{bgid:Number(r)}):d.createElement(Ia,{text:"记录规则"})))},{Option:wae}=Lt,Tae={labelCol:{span:3},wrapperCol:{span:21}};function Sae(e){return{isCorrectFormat:/^[a-zA-Z_][\w]*={1}[^=]+$/.test(e.toString()),isLengthAllowed:e.toString().length<=64}}function kae(e){const{isCorrectFormat:t,isLengthAllowed:n}=Sae(e.value);return t&&n?d.createElement(Nt,{closable:e.closable,onClose:e.onClose},e.value):d.createElement(kt,{title:t?"标签长度应小于等于 64 位":"标签格式应为 key=value。且 key 以字母或下划线开头，由字母、数字和下划线组成。"},d.createElement(Nt,{color:"error",closable:e.closable,onClose:e.onClose,style:{marginTop:"2px"}},e.value))}function _ae(){return{validator:(e,t)=>t&&t.some((e=>{const{isCorrectFormat:t,isLengthAllowed:n}=Sae(e);if(!t||!n)return!0}))?Promise.reject(new Error("标签格式不正确，请检查！")):Promise.resolve()}}const Aae=({type:e,detail:t={}})=>{const{t:n}=Hr(),r=C(),[i]=Tt.useForm(),{clusters:a}=ri((e=>e.common)),[o,c]=f.exports.useState({}),[u,h]=f.exports.useState(!0);f.exports.useState(a[0]);const{curBusiItem:p}=ri((e=>e.common)),m=X(),g=f.exports.useMemo((()=>m.id),[m]);f.exports.useEffect((()=>{const e=s({},t);c(e)}),[JSON.stringify(t)]);return d.createElement("div",{className:"operate_con"},d.createElement(Tt,l(s({},Tae),{form:i,className:"strategy-form",layout:"horizontal",initialValues:l(s({prom_eval_interval:30},t),{cluster:t.cluster?t.cluster.split(" "):a||["Default"]})}),d.createElement(Ht,{direction:"vertical",style:{width:"100%"}},d.createElement(jt,{title:n("基本配置")},d.createElement(Tt.Item,{required:!0,label:n("指标名称：")},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0,width:500},name:"name",rules:[{required:!0,message:n("指标名称不能为空")},{pattern:new RegExp(/^[0-9a-zA-Z_:]{1,}$/,"g"),message:"指标名称非法"}]},d.createElement(St,{placeholder:n("请输入指标名称")})),d.createElement(kt,{title:n("promql周期性计算，会生成新的指标，这里填写新的指标的名字")},d.createElement(V,null)))),d.createElement(Tt.Item,{label:n("规则备注："),name:"note",rules:[{required:!1}]},d.createElement(St,{placeholder:n("请输入规则备注")})),d.createElement(Tt.Item,{label:n("生效集群"),name:"cluster",rules:[{required:!0,message:n("生效集群不能为空")}]},d.createElement(Lt,{suffixIcon:d.createElement(H,null),mode:"multiple",onChange:e=>{e.includes("$all")&&i.setFieldsValue({cluster:["$all"]})}},d.createElement(wae,{value:"$all",key:"$all"},"$all"),null==a?void 0:a.map((e=>d.createElement(wae,{value:e,key:e},e))))),d.createElement(Tt.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.cluster!==t.cluster},(({getFieldValue:e,validateFields:t})=>d.createElement(Tt.Item,{label:"PromQL",className:"Promeql-content",required:!0},d.createElement(Tt.Item,{name:"prom_ql",validateTrigger:["onBlur"],trigger:"onChange",rules:[{required:!0,message:n("请输入PromQL")}]},d.createElement(lo,{url:"/api/n9e/prometheus",headers:{"X-Cluster":i.getFieldValue("cluster").includes("$all")&&a.length>0?a[0]:i.getFieldValue("cluster")[0]||"",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},onChange:e=>{e&&t(["prom_ql"])}}))))),d.createElement(Tt.Item,{required:!0,label:n("执行频率")},d.createElement(Ht,null,d.createElement(Tt.Item,{style:{marginBottom:0},name:"prom_eval_interval",initialValue:30,wrapperCol:{span:10},rules:[{required:!0,message:n("执行频率不能为空")}]},d.createElement(zt,{min:1,onChange:()=>{h(!u)}})),"秒",d.createElement(kt,{title:n(`promql 执行频率，每隔 ${i.getFieldValue("prom_eval_interval")} 秒查询时序库，查到的结果重新命名写回时序库`)},d.createElement(V,null)))),d.createElement(Tt.Item,{label:"附加标签",name:"append_tags",rules:[{required:!1,message:"请填写至少一项标签！"},_ae]},d.createElement(Lt,{mode:"tags",tokenSeparators:[" "],open:!1,placeholder:"标签格式为 key=value ，使用回车或空格分隔",tagRender:kae}))),d.createElement(Tt.Item,{style:{marginTop:20}},d.createElement(Ct,{type:"primary",onClick:()=>{i.validateFields().then((async t=>{const i=t.cluster.includes("$all")&&a.length>0?a[0]:t.cluster[0]||"",o=await qi({query:t.prom_ql},i);if(o.error)return Et.error({message:o.error}),!1;const c=l(s({},t),{cluster:t.cluster.join(" ")});let u,h="Post";if(1===e){u=c,h="Put";const e=await function(e,t,n){return Si(`/api/n9e/busi-group/${t}/recording-rule/${n}`,{method:yi.Put,data:e})}(u,p.id,g);e.err?xt.error(e.error):(xt.success(n("编辑成功！")),r.push("/recording-rules"))}else{u=[c];const{dat:t}=await lae(u,p.id,h);let i=0;const a=Object.keys(t).map((e=>(t[e]&&i++,t[e])));i?xt.error(n(a)):(xt.success(`${n(2===e?"记录规则克隆成功":"记录规则创建成功")}`),r.push("/recording-rules"))}}))},style:{marginRight:"8px"}},n(1===e?"编辑":2===e?"克隆":"创建")),1===e&&d.createElement(Ct,{danger:!0,style:{marginRight:"8px"},onClick:()=>{Ft.confirm({title:n("是否删除该记录规则?"),onOk:()=>{cae([t.id],p.id).then((()=>{xt.success(n("删除成功")),r.push("/recording-rules")}))},onCancel(){}})}},n("删除")),d.createElement(Ct,{onClick:()=>{r.push("/recording-rules")}},n("取消"))))))};const Oae=()=>{const{t:e}=Hr();return d.createElement(ia,{title:e("记录规则"),showBack:!0,hideCluster:!0},d.createElement(Aae,null))},Iae=()=>{const{t:e}=Hr(),t=vi().get("mode"),n=X(),r=f.exports.useMemo((()=>n.id),[n]),[i,a]=f.exports.useState({});f.exports.useEffect((()=>(o(),()=>{})),[r]);const o=async()=>{const e=await(t=r,Si(`/api/n9e/recording-rule/${t}`,{method:yi.Get}));var t;a(e.dat||{})};return d.createElement(ia,{title:e("记录规则"),showBack:!0,hideCluster:!0},i.id&&d.createElement(Aae,{detail:i,type:t?2:1}))};let Mae=mi().reduce(((e,t)=>e.concat(t.routes)),[]);function Nae(e){return d.createElement(lt,{path:e.path,render:t=>d.createElement(e.component,l(s({},t),{routes:e.routes}))})}function Fae(){let{profile:e}=ri((e=>e.account));const t=g(),n=Jr();e.id||"/login"==t.pathname||t.pathname.startsWith("/callback")||(n({type:"common/getClusters"}),t.pathname.startsWith("/chart/")||t.pathname.startsWith("/alert-cur-events/")||t.pathname.startsWith("/alert-his-events/")||t.pathname.startsWith("/callback")||(n({type:"account/getProfile"}),n({type:"common/getBusiGroups"})));let r="";if(0===t.pathname.indexOf("/dashboard")){const e=ii.parse(t.search);"fullscreen"===(null==e?void 0:e.viewMode)&&"dark"===(null==e?void 0:e.themeMode)&&(r="theme-dark")}return d.createElement("div",{className:`content ${r}`},d.createElement(st,null,d.createElement(lt,{path:"/demo",component:pie}),d.createElement(lt,{path:"/overview",component:Di}),d.createElement(lt,{path:"/login",component:Ri,exact:!0}),d.createElement(lt,{path:"/callback",component:Bi,exact:!0}),d.createElement(lt,{path:"/metric/explorer",component:sne,exact:!0}),d.createElement(lt,{path:"/object/explorer",component:One,exact:!0}),d.createElement(lt,{path:"/busi-groups",component:Wte}),d.createElement(lt,{path:"/users",component:Ute}),d.createElement(lt,{path:"/user-groups",component:$te}),d.createElement(lt,{path:"/account/profile/:tab",component:Po}),d.createElement(lt,{path:"/dashboard/:id",exact:!0,component:Ste}),d.createElement(lt,{path:"/dashboards/:id",exact:!0,component:Ste}),d.createElement(lt,{path:"/dashboards",component:Wu}),d.createElement(lt,{path:"/chart/:ids",component:q5}),d.createElement(lt,{path:"/indicator",component:Fne}),d.createElement(lt,{exact:!0,path:"/alert-rules/add/:group_id",component:Lne}),d.createElement(lt,{exact:!0,path:"/alert-rules/edit/:id",component:Pne}),d.createElement(lt,{exact:!0,path:"/alert-rules/:id?",component:Io}),d.createElement(lt,{exact:!0,path:"/alert-rules/brain/:id",component:Hne}),d.createElement(lt,{exact:!0,path:"/alert-mutes",component:Gne}),d.createElement(lt,{exact:!0,path:"/alert-mutes/add/:from?",component:Xne}),d.createElement(lt,{exact:!0,path:"/alert-mutes/edit/:id",component:qne}),d.createElement(lt,{exact:!0,path:"/alert-subscribes",component:Zne}),d.createElement(lt,{exact:!0,path:"/alert-subscribes/add",component:are}),d.createElement(lt,{exact:!0,path:"/alert-subscribes/edit/:id",component:ore}),d.createElement(lt,{exact:!0,path:"/recording-rules/:id?",component:Cae}),d.createElement(lt,{exact:!0,path:"/recording-rules/add/:group_id",component:Oae}),d.createElement(lt,{exact:!0,path:"/recording-rules/edit/:id",component:Iae}),d.createElement(lt,{exact:!0,path:"/alert-cur-events",component:zre}),d.createElement(lt,{exact:!0,path:"/alert-his-events",component:Yre}),d.createElement(lt,{exact:!0,path:"/alert-cur-events/:eventId",component:$re}),d.createElement(lt,{exact:!0,path:"/alert-his-events/:eventId",component:$re}),d.createElement(lt,{exact:!0,path:"/targets",component:lie}),d.createElement(lt,{exact:!0,path:"/job-tpls",component:Hie}),d.createElement(lt,{exact:!0,path:"/job-tpls/add",component:Vie}),d.createElement(lt,{exact:!0,path:"/job-tpls/add/task",component:Qie}),d.createElement(lt,{exact:!0,path:"/job-tpls/:id/detail",component:Wie}),d.createElement(lt,{exact:!0,path:"/job-tpls/:id/modify",component:Xie}),d.createElement(lt,{exact:!0,path:"/job-tpls/:id/clone",component:qie}),d.createElement(lt,{exact:!0,path:"/job-tasks",component:Kie}),d.createElement(lt,{exact:!0,path:"/job-tasks/add",component:Qie}),d.createElement(lt,{exact:!0,path:"/job-tasks/:id/result",component:Jie}),d.createElement(lt,{exact:!0,path:"/job-tasks/:id/detail",component:eae}),d.createElement(lt,{exact:!0,path:"/help/version",component:rae}),d.createElement(lt,{exact:!0,path:"/help/contact",component:iae}),d.createElement(lt,{exact:!0,path:"/help/migrate",component:sae}),Mae.map(((e,t)=>d.createElement(Nae,s({key:t},e)))),d.createElement(lt,{path:"/",exact:!0},d.createElement(ct,{to:"/metric/explorer"})),d.createElement(lt,{path:"/403",component:Pi}),d.createElement(lt,{path:"/404",component:Li}),d.createElement(lt,{path:"*",component:Li})))}function Lae(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Pae="function"==typeof Symbol&&Symbol.observable||"@@observable",Rae=function(){return Math.random().toString(36).substring(7).split("").join(".")},Dae={INIT:"@@redux/INIT"+Rae(),REPLACE:"@@redux/REPLACE"+Rae(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Rae()}};function Bae(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function zae(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Lae(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Lae(1));return n(zae)(e,t)}if("function"!=typeof e)throw new Error(Lae(2));var i=e,a=t,o=[],s=o,l=!1;function c(){s===o&&(s=o.slice())}function u(){if(l)throw new Error(Lae(3));return a}function h(e){if("function"!=typeof e)throw new Error(Lae(4));if(l)throw new Error(Lae(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(Lae(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function p(e){if(!Bae(e))throw new Error(Lae(7));if(void 0===e.type)throw new Error(Lae(8));if(l)throw new Error(Lae(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!=typeof e)throw new Error(Lae(10));i=e,p({type:Dae.REPLACE})}function f(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Lae(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Pae]=function(){return this},e}return p({type:Dae.INIT}),(r={dispatch:p,subscribe:h,getState:u,replaceReducer:d})[Pae]=f,r}function Hae(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Dae.INIT}))throw new Error(Lae(12));if(void 0===n(void 0,{type:Dae.PROBE_UNKNOWN_ACTION()}))throw new Error(Lae(13))}))}(n)}catch(Wh){a=Wh}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var l=o[s],c=n[l],u=e[l],h=c(u,t);if(void 0===h)throw t&&t.type,new Error(Lae(14));i[l]=h,r=r||h!==u}return(r=r||o.length!==Object.keys(e).length)?i:e}}function jae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var Gae=function(e){return"@@redux-saga/"+e},$ae=Gae("CANCEL_PROMISE"),Yae=Gae("CHANNEL_END"),Uae=Gae("IO"),Vae=Gae("MATCH"),Wae=Gae("MULTICAST"),Xae=Gae("SAGA_ACTION"),qae=Gae("SELF_CANCELLATION"),Kae=Gae("TASK"),Qae=Gae("TASK_CANCEL"),Zae=Gae("TERMINATE"),Jae=Gae("LOCATION"),eoe=function(e){return null==e},toe=function(e){return null!=e},noe=function(e){return"function"==typeof e},roe=function(e){return"string"==typeof e},ioe=Array.isArray,aoe=function(e){return e&&noe(e.then)},ooe=function(e){return e&&noe(e.next)&&noe(e.throw)},soe=function e(t){return t&&(roe(t)||uoe(t)||noe(t)||ioe(t)&&t.every(e))},loe=function(e){return e&&noe(e.take)&&noe(e.close)},coe=function(e){return noe(e)&&e.hasOwnProperty("toString")},uoe=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};function hoe(e,t){var n;void 0===t&&(t=!0);var r=new Promise((function(r){n=setTimeout(r,e,t)}));return r[$ae]=function(){clearTimeout(n)},r}var poe=function(e){return function(){return e}}(!0),doe=function(){},foe=function(e){return e},moe=function(e,t){ht(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function goe(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var voe=function(e){throw e},yoe=function(e){return{value:e,done:!0}};function xoe(e,t,n){void 0===t&&(t=voe),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:yoe,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function Eoe(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var boe=function(e){return Array.apply(null,new Array(e))},Coe=function(e){return function(t){return e(Object.defineProperty(t,Xae,{value:!0}))}},woe=function(e){return e===Zae},Toe=function(e){return e===Qae},Soe=function(e){return woe(e)||Toe(e)};function koe(e,t){var n,r=Object.keys(e),i=r.length,a=0,o=ioe(e)?boe(i):{},s={};return r.forEach((function(e){var r=function(r,s){n||(s||Soe(r)?(t.cancel(),t(r,s)):(o[e]=r,++a===i&&(n=!0,t(o))))};r.cancel=doe,s[e]=r})),t.cancel=function(){n||(n=!0,r.forEach((function(e){return s[e].cancel()})))},s}function _oe(e){return{name:e.name||"anonymous",location:Aoe(e)}}function Aoe(e){return e[Jae]}function Ooe(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,a=0,o=function(t){n[i]=t,i=(i+1)%e,r++},s=function(){if(0!=r){var t=n[a];return n[a]=null,r--,a=(a+1)%e,t}},l=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var c;if(r<e)o(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=s,a=i=(i+1)%e;break;case 4:c=2*e,n=l(),r=n.length,i=n.length,a=0,n.length=c,e=c,o(s)}},take:s,flush:l}}var Ioe=function(e){return Ooe(e,3)},Moe=Object.freeze({__proto__:null,TAKE:"TAKE",PUT:"PUT",ALL:"ALL",RACE:"RACE",CALL:"CALL",CPS:"CPS",FORK:"FORK",JOIN:"JOIN",CANCEL:"CANCEL",SELECT:"SELECT",ACTION_CHANNEL:"ACTION_CHANNEL",CANCELLED:"CANCELLED",FLUSH:"FLUSH",GET_CONTEXT:"GET_CONTEXT",SET_CONTEXT:"SET_CONTEXT"}),Noe=function(e,t){var n;return(n={})[Uae]=!0,n.combinator=!1,n.type=e,n.payload=t,n},Foe=function(e){return Noe("FORK",ht({},e.payload,{detached:!0}))};function Loe(e,t){return void 0===e&&(e="*"),soe(e)?Noe("TAKE",{pattern:e}):loe(n=e)&&n[Wae]&&toe(t)&&soe(t)?Noe("TAKE",{channel:e,pattern:t}):loe(e)?Noe("TAKE",{channel:e}):void 0;var n}function Poe(e,t){return eoe(t)&&(t=e,e=void 0),Noe("PUT",{channel:e,action:t})}function Roe(e){var t=Noe("RACE",e);return t.combinator=!0,t}function Doe(e,t){var n,r=null;return noe(e)?n=e:(ioe(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&roe(n)&&noe(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function Boe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Noe("CALL",Doe(e,n))}function zoe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Noe("FORK",Doe(e,n))}function Hoe(e){return void 0===e&&(e=qae),Noe("CANCEL",e)}function joe(e,t){return Noe("ACTION_CHANNEL",{pattern:e,buffer:t})}var Goe=Boe.bind(null,hoe);var $oe=[],Yoe=0;function Uoe(e){try{Xoe(),e()}finally{qoe()}}function Voe(e){$oe.push(e),Yoe||(Xoe(),Koe())}function Woe(e){try{return Xoe(),e()}finally{Koe()}}function Xoe(){Yoe++}function qoe(){Yoe--}function Koe(){var e;for(qoe();!Yoe&&void 0!==(e=$oe.shift());)Uoe(e)}var Qoe=function(e){return function(t){return e.some((function(e){return nse(e)(t)}))}},Zoe=function(e){return function(t){return e(t)}},Joe=function(e){return function(t){return t.type===String(e)}},ese=function(e){return function(t){return t.type===e}},tse=function(){return poe};function nse(e){var t="*"===e?tse:roe(e)?Joe:ioe(e)?Qoe:coe(e)?Joe:noe(e)?Zoe:uoe(e)?ese:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var rse={type:Yae},ise=function(e){return e&&e.type===Yae};function ase(e){var t;void 0===e&&(e=Ooe(t,4));var n=!1,r=[];return{take:function(t){n&&e.isEmpty()?t(rse):e.isEmpty()?(r.push(t),t.cancel=function(){goe(r,t)}):t(e.take())},put:function(t){if(!n){if(0===r.length)return e.put(t);r.shift()(t)}},flush:function(t){n&&e.isEmpty()?t(rse):t(e.flush())},close:function(){if(!n){n=!0;var e=r;r=[];for(var t=0,i=e.length;t<i;t++){(0,e[t])(rse)}}}}}function ose(){var e,t,n,r,i,a,o=(t=!1,r=n=[],i=function(){r===n&&(r=n.slice())},a=function(){t=!0;var e=n=r;r=[],e.forEach((function(e){e(rse)}))},(e={})[Wae]=!0,e.put=function(e){if(!t)if(ise(e))a();else for(var i=n=r,o=0,s=i.length;o<s;o++){var l=i[o];l[Vae](e)&&(l.cancel(),l(e))}},e.take=function(e,n){var a,o;void 0===n&&(n=tse),t?e(rse):(e[Vae]=n,i(),r.push(e),e.cancel=(a=function(){i(),goe(r,e)},o=!1,function(){o||(o=!0,a())}))},e.close=a,e),s=o.put;return o.put=function(e){e[Xae]?s(e):Voe((function(){s(e)}))},o}function sse(e,t){var n=e[$ae];noe(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var lse,cse=0,use=function(){return++cse};function hse(e){e.isRunning()&&e.cancel()}var pse=((lse={}).TAKE=function(e,t,n){var r=t.channel,i=void 0===r?e.channel:r,a=t.pattern,o=t.maybe,s=function(e){e instanceof Error?n(e,!0):!ise(e)||o?n(e):n(Zae)};try{i.take(s,toe(a)?nse(a):null)}catch(l){return void n(l,!0)}n.cancel=s.cancel},lse.PUT=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;Voe((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(o){return void n(o,!0)}a&&aoe(t)?sse(t,n):n(t)}))},lse.ALL=function(e,t,n,r){var i=r.digestEffect,a=cse,o=Object.keys(t);if(0!==o.length){var s=koe(t,n);o.forEach((function(e){i(t[e],a,s[e],e)}))}else n(ioe(t)?[]:{})},lse.RACE=function(e,t,n,r){var i=r.digestEffect,a=cse,o=Object.keys(t),s=ioe(t)?boe(o.length):{},l={},c=!1;o.forEach((function(e){var t=function(t,r){c||(r||Soe(t)?(n.cancel(),n(t,r)):(n.cancel(),c=!0,s[e]=t,n(s)))};t.cancel=doe,l[e]=t})),n.cancel=function(){c||(c=!0,o.forEach((function(e){return l[e].cancel()})))},o.forEach((function(e){c||i(t[e],a,l[e],e)}))},lse.CALL=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,s=r.task;try{var l=a.apply(i,o);if(aoe(l))return void sse(l,n);if(ooe(l))return void Ese(e,l,s.context,cse,_oe(a),!1,n);n(l)}catch(c){n(c,!0)}},lse.CPS=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var o=function(e,t){eoe(e)?n(t):n(e,!0)};i.apply(r,a.concat(o)),o.cancel&&(n.cancel=o.cancel)}catch(s){n(s,!0)}},lse.FORK=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,s=t.detached,l=r.task,c=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if(ooe(i))return i;var a=!1;return xoe((function(e){return a?{value:e,done:!0}:(a=!0,{value:i,done:!aoe(i)})}))}catch(o){return xoe((function(){throw o}))}}({context:i,fn:a,args:o}),u=function(e,t){return e.isSagaIterator?{name:e.meta.name}:_oe(t)}(c,a);Woe((function(){var t=Ese(e,c,l.context,cse,u,s,void 0);s?n(t):t.isRunning()?(l.queue.addTask(t),n(t)):t.isAborted()?l.queue.abort(t.error()):n(t)}))},lse.JOIN=function(e,t,n,r){var i=r.task,a=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&goe(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(ioe(t)){if(0===t.length)return void n([]);var o=koe(t,n);t.forEach((function(e,t){a(e,o[t])}))}else a(t,n)},lse.CANCEL=function(e,t,n,r){var i=r.task;t===qae?hse(i):ioe(t)?t.forEach(hse):hse(t),n()},lse.SELECT=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(a){n(a,!0)}},lse.ACTION_CHANNEL=function(e,t,n){var r=t.pattern,i=ase(t.buffer),a=nse(r),o=function t(n){ise(n)||e.channel.take(t,a),i.put(n)},s=i.close;i.close=function(){o.cancel(),s()},e.channel.take(o,a),n(i)},lse.CANCELLED=function(e,t,n,r){n(r.task.isCancelled())},lse.FLUSH=function(e,t,n){t.flush(n)},lse.GET_CONTEXT=function(e,t,n,r){n(r.task.context[t])},lse.SET_CONTEXT=function(e,t,n,r){var i=r.task;moe(i.context,t),n()},lse);function dse(e,t){return e+"?"+t}function fse(e){var t=e.name,n=e.location;return n?t+"  "+dse(n.fileName,n.lineNumber):t}var mse=null,gse=[],vse=function(){mse=null,gse.length=0},yse=function(){var e,t,n,r,i,a,o,s=gse[0],l=gse.slice(1),c=s.crashedEffect?(e=s.crashedEffect,(t=Aoe(e))?t.code+"  "+dse(t.fileName,t.lineNumber):""):null;return["The above error occurred in task "+fse(s.meta)+(c?" \n when executing effect "+c:"")].concat(l.map((function(e){return"    created by "+fse(e.meta)})),[(n=gse,r=function(e){return e.cancelledTasks},i=n,o=(a=[]).concat.apply(a,i.map(r)),o.length?["Tasks cancelled due to error:"].concat(o).join("\n"):"")]).join("\n")};function xse(e,t,n,r,i,a,o){var s;void 0===o&&(o=doe);var l,c,u=0,h=null,p=[],d=Object.create(n),f=function(e,t,n){var r,i=[],a=!1;function o(e){t(),l(),n(e,!0)}function s(t){i.push(t),t.cont=function(s,l){a||(goe(i,t),t.cont=doe,l?o(s):(t===e&&(r=s),i.length||(a=!0,n(r))))}}function l(){a||(a=!0,i.forEach((function(e){e.cont=doe,e.cancel()})),i=[])}return s(e),{addTask:s,cancelAll:l,abort:o,getTasks:function(){return i}}}(t,(function(){p.push.apply(p,f.getTasks().map((function(e){return e.meta.name})))}),m);function m(t,n){if(n){if(u=2,(a={meta:i,cancelledTasks:p}).crashedEffect=mse,gse.push(a),g.isRoot){var r=yse();vse(),e.onError(t,{sagaStack:r})}c=t,h&&h.reject(t)}else t===Qae?u=1:1!==u&&(u=3),l=t,h&&h.resolve(t);var a;g.cont(t,n),g.joiners.forEach((function(e){e.cb(t,n)})),g.joiners=null}var g=((s={})[Kae]=!0,s.id=r,s.meta=i,s.isRoot=a,s.context=d,s.joiners=[],s.queue=f,s.cancel=function(){0===u&&(u=1,f.cancelAll(),m(Qae,!1))},s.cont=o,s.end=m,s.setContext=function(e){moe(d,e)},s.toPromise=function(){return h||((e={}).promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),h=e,2===u?h.reject(c):0!==u&&h.resolve(l)),h.promise;var e},s.isRunning=function(){return 0===u},s.isCancelled=function(){return 1===u||0===u&&1===t.status},s.isAborted=function(){return 2===u},s.result=function(){return l},s.error=function(){return c},s);return g}function Ese(e,t,n,r,i,a,o){var s=e.finalizeRunEffect((function(t,n,r){if(aoe(t))sse(t,r);else if(ooe(t))Ese(e,t,c.context,n,i,!1,r);else if(t&&t[Uae]){(0,pse[t.type])(e,t.payload,r,u)}else r(t)}));h.cancel=doe;var l={meta:i,cancel:function(){0===l.status&&(l.status=1,h(Qae))},status:0},c=xse(e,l,n,r,i,a,o),u={task:c,digestEffect:p};return o&&(o.cancel=c.cancel),h(),c;function h(e,n){try{var i;n?(i=t.throw(e),vse()):Toe(e)?(l.status=1,h.cancel(),i=noe(t.return)?t.return(Qae):{done:!0,value:Qae}):i=woe(e)?noe(t.return)?t.return():{done:!0}:t.next(e),i.done?(1!==l.status&&(l.status=3),l.cont(i.value)):p(i.value,r,h)}catch(a){if(1===l.status)throw a;l.status=2,l.cont(a,!0)}}function p(t,n,r,i){void 0===i&&(i="");var a,o=use();function l(n,i){a||(a=!0,r.cancel=doe,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),i&&function(e){mse=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:i,effect:t}),l.cancel=doe,r.cancel=function(){a||(a=!0,l.cancel(),l.cancel=doe,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},s(t,o,l)}}function bse(e,t){for(var n=e.channel,r=void 0===n?ose():n,i=e.dispatch,a=e.getState,o=e.context,s=void 0===o?{}:o,l=e.sagaMonitor,c=e.effectMiddlewares,u=e.onError,h=void 0===u?Eoe:u,p=arguments.length,d=new Array(p>2?p-2:0),f=2;f<p;f++)d[f-2]=arguments[f];var m,g=t.apply(void 0,d),v=use();if(l&&(l.rootSagaStarted=l.rootSagaStarted||doe,l.effectTriggered=l.effectTriggered||doe,l.effectResolved=l.effectResolved||doe,l.effectRejected=l.effectRejected||doe,l.effectCancelled=l.effectCancelled||doe,l.actionDispatched=l.actionDispatched||doe,l.rootSagaStarted({effectId:v,saga:t,args:d})),c){var y=jae.apply(void 0,c);m=function(e){return function(t,n,r){return y((function(t){return e(t,n,r)}))(t)}}}else m=foe;var x={channel:r,dispatch:Coe(i),getState:a,sagaMonitor:l,onError:h,finalizeRunEffect:m};return Woe((function(){var e=Ese(x,g,s,v,_oe(t),!0,void 0);return l&&l.effectResolved(v,e),e}))}function Cse(e){var t,n=void 0===e?{}:e,r=n.context,i=void 0===r?{}:r,a=n.channel,o=void 0===a?ose():a,s=n.sagaMonitor,l=pt(n,["context","channel","sagaMonitor"]);function c(e){var n=e.getState,r=e.dispatch;return t=bse.bind(null,ht({},l,{context:i,channel:o,dispatch:r,getState:n,sagaMonitor:s})),function(e){return function(t){s&&s.actionDispatched&&s.actionDispatched(t);var n=e(t);return o.put(t),n}}}return c.run=function(){return t.apply(void 0,arguments)},c.setContext=function(e){moe(i,e)},c}var wse=function(e){return{done:!0,value:e}},Tse={};function Sse(e){return loe(e)?"channel":coe(e)?String(e):noe(e)?e.name:String(e)}function kse(e,t,n){var r,i,a,o=t;function s(t,n){if(o===Tse)return wse(t);if(n&&!i)throw o=Tse,n;r&&r(t);var s=n?e[i](n):e[o]();return o=s.nextState,a=s.effect,r=s.stateUpdater,i=s.errorState,o===Tse?wse(t):a}return xoe(s,(function(e){return s(null,e)}),n)}function _se(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o={done:!1,value:Loe(e)},s=function(e){return{done:!1,value:zoe.apply(void 0,[t].concat(r,[e]))}},l=function(e){return a=e};return kse({q1:function(){return{nextState:"q2",effect:o,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(a)}}},"q1","takeEvery("+Sse(e)+", "+t.name+")")}function Ase(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o,s={done:!1,value:Loe(e)},l=function(e){return{done:!1,value:zoe.apply(void 0,[t].concat(r,[e]))}},c=function(e){return{done:!1,value:Hoe(e)}},u=function(e){return a=e},h=function(e){return o=e};return kse({q1:function(){return{nextState:"q2",effect:s,stateUpdater:h}},q2:function(){return a?{nextState:"q3",effect:c(a)}:{nextState:"q1",effect:l(o),stateUpdater:u}},q3:function(){return{nextState:"q1",effect:l(o),stateUpdater:u}}},"q1","takeLatest("+Sse(e)+", "+t.name+")")}function Ose(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o={done:!1,value:Loe(e)},s=function(e){return{done:!1,value:Boe.apply(void 0,[t].concat(r,[e]))}},l=function(e){return a=e};return kse({q1:function(){return{nextState:"q2",effect:o,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(a)}}},"q1","takeLeading("+Sse(e)+", "+t.name+")")}function Ise(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s,l={done:!1,value:joe(t,Ioe(1))},c=function(){return{done:!1,value:Loe(s)}},u=function(e){return{done:!1,value:zoe.apply(void 0,[n].concat(i,[e]))}},h={done:!1,value:Goe(e)},p=function(e){return o=e},d=function(e){return s=e};return kse({q1:function(){return{nextState:"q2",effect:l,stateUpdater:d}},q2:function(){return{nextState:"q3",effect:c(),stateUpdater:p}},q3:function(){return{nextState:"q4",effect:u(o)}},q4:function(){return{nextState:"q2",effect:h}}},"q1","throttle("+Sse(t)+", "+n.name+")")}function Mse(e,t,n){for(var r=e,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s={done:!1,value:Boe.apply(void 0,[n].concat(a))},l={done:!1,value:Goe(t)};return kse({q1:function(){return{nextState:"q2",effect:s,errorState:"q10"}},q2:function(){return{nextState:Tse}},q10:function(e){if((r-=1)<=0)throw e;return{nextState:"q1",effect:l}}},"q1","retry("+n.name+")")}function Nse(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s,l={done:!1,value:Loe(t)},c={done:!1,value:Roe({action:Loe(t),debounce:Goe(e)})},u=function(e){return{done:!1,value:zoe.apply(void 0,[n].concat(i,[e]))}},h=function(e){return{done:!1,value:e}},p=function(e){return o=e},d=function(e){return s=e};return kse({q1:function(){return{nextState:"q2",effect:l,stateUpdater:p}},q2:function(){return{nextState:"q3",effect:c,stateUpdater:d}},q3:function(){return s.debounce?{nextState:"q1",effect:u(o)}:{nextState:"q2",effect:h(s.action),stateUpdater:p}}},"q1","debounce("+Sse(t)+", "+n.name+")")}function Fse(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return zoe.apply(void 0,[_se,e,t].concat(r))}var Lse=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",actionChannel:joe,all:function(e){var t=Noe("ALL",e);return t.combinator=!0,t},apply:function(e,t,n){return void 0===n&&(n=[]),Noe("CALL",Doe([e,t],n))},call:Boe,cancel:Hoe,cancelled:function(){return Noe("CANCELLED",{})},cps:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Noe("CPS",Doe(e,n))},delay:Goe,effectTypes:Moe,flush:function(e){return Noe("FLUSH",e)},fork:zoe,getContext:function(e){return Noe("GET_CONTEXT",e)},join:function(e){return Noe("JOIN",e)},put:Poe,putResolve:function(){var e=Poe.apply(void 0,arguments);return e.payload.resolve=!0,e},race:Roe,select:function(e){void 0===e&&(e=foe);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Noe("SELECT",{selector:e,args:n})},setContext:function(e){return Noe("SET_CONTEXT",e)},spawn:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Foe(zoe.apply(void 0,[e].concat(n)))},take:Loe,takeMaybe:function(){var e=Loe.apply(void 0,arguments);return e.payload.maybe=!0,e},debounce:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return zoe.apply(void 0,[Nse,e,t,n].concat(i))},retry:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return Boe.apply(void 0,[Mse,e,t,n].concat(i))},takeEvery:Fse,takeLatest:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return zoe.apply(void 0,[Ase,e,t].concat(r))},takeLeading:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return zoe.apply(void 0,[Ose,e,t].concat(r))},throttle:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return zoe.apply(void 0,[Ise,e,t,n].concat(i))}});const Pse="@@DVA_LOADING/SHOW",Rse="@@DVA_LOADING/HIDE";function Dse(e){return()=>t=>n=>{const{type:r}=n;return function(t){if(!t||"string"!=typeof t)return!1;const[n]=t.split("/"),r=e._models.filter((e=>e.namespace===n))[0];if(r&&r.effects&&r.effects[t])return!0;return!1}(r)?new Promise(((e,r)=>{t(s({__dva_resolve:e,__dva_reject:r},n))})):t(n)}}const Bse=new class{constructor(e){this.hooks=e.reduce(((e,t)=>(e[t]=[],e)),{})}use(e){const{hooks:t}=this;for(let n in e)t[n].push(e[n])}get(e){return"extraReducers"===e?Object.assign({},...this.hooks[e]):this.hooks[e]}}(["onEffect","extraReducers"]),zse=new class{constructor(e){this.noop=e=>{},this._models=[],this.store={},this.plugin=e}addModel(e){const t=this.prefixResolve(e);this._models.push(t)}removeModel(){}prefixResolve(e){return e.reducers&&(e.reducers=this.prefix(e.reducers,e.namespace)),e.effects&&(e.effects=this.prefix(e.effects,e.namespace)),e}prefix(e,t){return Object.keys(e).reduce(((n,r)=>(n[t+"/"+r]=e[r],n)),{})}getReducer(){let e={};for(let n of this._models)e[n.namespace]=function(e=n.state,t){let r=n.reducers[t.type];return r?r(e,t):e};let t=this.plugin.get("extraReducers");return Hae(s(s({},e),t))}getSagas(){let e=[];const t=this;for(let n of this._models)e.push((function*(){for(const e in n.effects){const r=t.getWatcher(e,n.effects[e],n,t.plugin.get("onEffect"));yield zoe(r)}}));return e}prefixType(e,t){return-1===e.indexOf("/")?t.namespace+"/"+e:e}getWatcher(e,t,n,r){const i=this,a=e=>Poe(l(s({},e),{type:this.prefixType(e.type,n)}));return function*(){yield Fse(e,(function*(o){if(r)for(const i of r)t=i(t,l(s({},Lse),{put:a}),n,e);const{__dva_resolve:c=i.noop}=o||{};try{c(yield t(o,l(s({},Lse),{put:a})))}catch(u){console.error(u)}}))}}start(){let e=this.getReducer(),t=this.getSagas(),n=Cse();this.store=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Lae(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=jae.apply(void 0,a)(n.dispatch),ut(ut({},n),{},{dispatch:r})}}}(Dse(this),n)(zae)(e),t.forEach(n.run)}}(Bse);zse.plugin.use(function(){let e={effects:{}};return{onEffect:function(e,{put:t},n,r){const{namespace:i}=n;return function*(...n){try{return yield t({type:Pse,payload:{namespace:i,actionType:r}}),yield e(...n)}finally{yield t({type:Rse,payload:{namespace:i,actionType:r}})}}},extraReducers:{loading(t=e,{type:n,payload:r}){let{actionType:i}=r||{};switch(n){case Pse:return{effects:l(s({},t.effects),{[i]:!0})};case Rse:return{effects:l(s({},t.effects),{[i]:!1})};default:return t}}}}}());const Hse={namespace:"common",state:{clusters:[],curClusterItems:JSON.parse(localStorage.getItem("curClusterItems")||"[]"),busiGroups:[],curBusiItem:JSON.parse(localStorage.getItem("curBusiItem")||"{}")},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*getClusters({},{put:e,select:t}){const{curClusterItems:n}=yield t((e=>e.common)),{dat:r}=yield Si("/api/n9e/clusters",{method:yi.Get}),i=r||[],a=n.filter((e=>i.includes(e)));yield e({type:"saveData",prop:"curClusterItems",data:a}),localStorage.setItem("curClusterItems",JSON.stringify(a)),i.includes(localStorage.getItem("curCluster"))||localStorage.removeItem("curCluster"),yield e({type:"saveData",prop:"clusters",data:i})},*getBusiGroups({query:e},{put:t,select:n}){const{curBusiItem:r}=yield n((e=>e.common)),{dat:i}=yield ki(e),a=i||[];r.id&&a.every((e=>e.id!==r.id))&&(yield t({type:"saveData",prop:"curBusiItem",data:{}}),localStorage.removeItem("curBusiItem")),yield t({type:"saveData",prop:"busiGroups",data:a})}}};var jse,Gse,$se,Yse,Use,Vse;(Gse=jse||(jse={}))[Gse.Need=1]="Need",Gse[Gse.UnNeed=0]="UnNeed",(Yse=$se||($se={})).CmdLine="cmdline",Yse.Name="name",(Vse=Use||(Use={})).TCP="tcp",Vse.UDP="udp";const Wse=function(e,t=1){return Si("/api/n9e/classpaths",{method:yi.Get,params:{query:e,limit:30,p:t}})},Xse=function(e){return Si(`/api/n9e/classpath/${e}/favorites`,{method:yi.Post,data:{id:e}})},qse=function(e){return Si(`/api/n9e/classpath/${e}/favorites`,{method:yi.Delete,data:{id:e}})},Kse=function(e){return Si(`/api/n9e/classpath/${e}`,{method:yi.Delete})},Qse=function(e){return Si(`/api/n9e/classpath/${e.id}`,{method:yi.Put,data:e})},Zse=function(e){return Si(`/api/n9e/resource/${e}`,{method:yi.Get})},Jse={namespace:"resource",state:{tableData:[],pageNumber:1,group:{favorite:[],common:[],currentPage:1,commonTotal:0},currentGroup:null,prefix:jse.UnNeed,resourceData:{resourceDetail:null,resourceDetailLoading:!1}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data}),saveResourceGroupData:(e,{data:t})=>l(s({},e),{group:s(s({},e.group),t)}),saveResourceData:(e,{data:t})=>l(s({},e),{resourceData:s(s({},e.resourceData),t)})},effects:{*updatePrefix({data:e},{put:t}){yield t({type:"saveData",prop:"prefix",data:e})},*chooseGroupItem({data:e},{put:t,select:n}){const{currentGroup:r}=yield n((e=>e.resource));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentGroup",data:e})))},*getResourceItem({id:e},{call:t,put:n}){yield n({type:"saveResourceData",data:{resourceDetailLoading:!0}});const{success:r,dat:i}=yield t(Zse,e);r&&(yield n({type:"saveResourceData",data:{resourceDetail:i}})),yield n({type:"saveResourceData",data:{resourceDetailLoading:!1}})},*getGroup({sign:e,data:t=""},{put:n,select:r,call:i}){var a,o,c;const{currentGroup:u}=yield r((e=>e.resource));if("init"===e||"refresh"===e){const[r,i]=yield Promise.all([Wse("",1),Si("/api/n9e/classpaths/favorites",{method:yi.Get})]);if(r.success){const h=(null==(a=null==i?void 0:i.dat)?void 0:a.map((e=>l(s({},e),{isFavorite:!0,isBelongIn:Ci.Favorite}))))||[],p=(null==(o=null==r?void 0:r.dat)?void 0:o.list.map((e=>l(s({},e),{isFavorite:!!h.find((t=>t.id===e.id)),isBelongIn:Ci.Common}))))||[],d=(null==(c=null==r?void 0:r.dat)?void 0:c.total)||0;if(yield n({type:"saveResourceGroupData",data:{favorite:h,common:p,commonTotal:d,currentPage:1}}),"init"===e&&t&&""!==t){const e=p.find((e=>e.id===Number(t)));yield n({type:"saveData",prop:"currentGroup",data:e})}else if(u){const e=p.find((e=>e.id===u.id));e?yield n({type:"saveData",prop:"currentGroup",data:e}):yield n({type:"saveData",prop:"currentGroup",data:p[0]})}else yield n({type:"saveData",prop:"currentGroup",data:p[0]})}}else if("search"===e){const{group:{favorite:e}}=yield r((e=>e.resource)),{success:a,dat:o}=yield i(Wse,t);if(a){const t=(null==o?void 0:o.total)||0,r=(null==o?void 0:o.list.map((t=>l(s({},t),{isFavorite:!!e.find((e=>e.id===t.id)),isBelongIn:Ci.Common}))))||[];yield n({type:"saveResourceGroupData",data:{common:r,commonTotal:t,currentPage:1}}),(u||u.id)&&e.find((e=>e.id===u.id))&&r.find((e=>e.id===u.id))||(yield n({type:"saveData",prop:"currentGroup",data:r[0]}))}}else if("append"===e){const{group:{common:e,favorite:t,currentPage:a}}=yield r((e=>e.resource)),{success:o,dat:c}=yield i(Wse,"",a+1);if(o){const r=(null==c?void 0:c.total)||0,i=(null==c?void 0:c.list.map((e=>l(s({},e),{isFavorite:!!t.find((t=>t.id===e.id)),isBelongIn:Ci.Common}))))||[];yield n({type:"saveResourceGroupData",data:{common:e.concat(i),commonTotal:r,currentPage:a+1}})}}},*changeGroupFavorite({id:e,favorType:t},{put:n,call:r}){const i=t===Ei.Add?Xse:qse,{success:a}=yield r(i,e);a&&(yield n({type:"getGroup",sign:"refresh"}))},*deleteGroup({id:e},{call:t,put:n}){const{success:r}=yield t(Kse,e);r&&(yield n({type:"getGroup",sign:"refresh"}))},*updateGroup({id:e,data:t},{call:n,put:r}){const{success:i}=yield n(Qse,l(s({},t),{id:e}));i&&(yield r({type:"getGroup",sign:"refresh"}))}}},ele=function(e){return Si("/api/n9e/self/profile",{method:yi.Put,data:e})},tle=function(){return Si("/api/n9e/self/profile",{method:yi.Get})},nle={namespace:"account",state:{num:0,profile:{nickname:"",role:"",roles:[],username:"",email:"",phone:"",id:0,portrait:"",contacts:{}},csrfToken:""},reducers:{SET_PROFILE:(e,t)=>l(s({},e),{profile:t.profile})},effects:{*login({username:e,password:t},{put:n,call:r,select:i}){const{dat:a,err:o}=yield r(Ti,e,t);yield n({type:"SET_PROFILE",profile:a.user});const{access_token:s,refresh_token:l}=a;return localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",l),yield n({type:"common/getClusters"}),yield n({type:"common/getBusiGroups"}),o},*getProfile({},{put:e,call:t,select:n}){const{dat:r,err:i}=yield t(tle);return yield e({type:"SET_PROFILE",profile:r}),i},*updateProfile({data:e},{put:t,call:n,select:r}){const{dat:i,err:a}=yield n(ele,e);return yield t({type:"SET_PROFILE",profile:e}),a}}},rle={namespace:"strategy",state:{group:{favorite:[],common:[],currentPage:1,commonTotal:0},currentGroup:{id:1}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data}),saveStrategyGroupData:(e,{data:t})=>l(s({},e),{group:s(s({},e.group),t)})},effects:{*chooseGroupItem({data:e},{put:t,select:n}){const{currentGroup:r}=yield n((e=>e.strategy));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentGroup",data:e})))},*getGroup({sign:e,data:t=""},{put:n,select:r,call:i}){var a,o,c;const{currentGroup:u}=yield r((e=>e.strategy));if("init"===e||"refresh"===e){const[r,i]=yield Promise.all([ji("",1),Si("/api/n9e/alert-rule-groups/favorites",{method:yi.Get})]);if(r.success){const h=(null==(a=null==i?void 0:i.dat)?void 0:a.map((e=>l(s({},e),{isFavorite:!0,isBelongIn:Ci.Favorite}))))||[],p=(null==(o=null==r?void 0:r.dat)?void 0:o.list.map((e=>l(s({},e),{isFavorite:!!h.find((t=>t.id===e.id)),isBelongIn:Ci.Common}))))||[],d=(null==(c=null==r?void 0:r.dat)?void 0:c.total)||0;if(yield n({type:"saveStrategyGroupData",data:{favorite:h,common:p,commonTotal:d,currentPage:1}}),"init"===e&&t&&""!==t){const e=p.find((e=>e.id===Number(t)));yield n({type:"saveData",prop:"currentGroup",data:e})}else if(u){const e=p.find((e=>e.id===u.id));e?yield n({type:"saveData",prop:"currentGroup",data:e}):yield n({type:"saveData",prop:"currentGroup",data:p[0]})}else yield n({type:"saveData",prop:"currentGroup",data:p[0]})}}else if("search"===e){const{group:{favorite:e}}=yield r((e=>e.strategy)),{success:a,dat:o}=yield i(ji,t);if(a){const t=(null==o?void 0:o.total)||0,r=(null==o?void 0:o.list.map((t=>l(s({},t),{isFavorite:!!e.find((e=>e.id===t.id)),isBelongIn:Ci.Common}))))||[];yield n({type:"saveStrategyGroupData",data:{common:r,commonTotal:t,currentPage:1}}),(u||u.id)&&e.find((e=>e.id===u.id))&&r.find((e=>e.id===u.id))||(yield n({type:"saveData",prop:"currentGroup",data:r[0]}))}}else if("append"===e){const{group:{common:e,favorite:t,currentPage:a}}=yield r((e=>e.strategy)),{success:o,dat:c}=yield i(ji,"",a+1);if(o){const r=(null==c?void 0:c.total)||0,i=(null==c?void 0:c.list.map((e=>l(s({},e),{isFavorite:!!t.find((t=>t.id===e.id)),isBelongIn:Ci.Common}))))||[];yield n({type:"saveStrategyGroupData",data:{common:e.concat(i),commonTotal:r,currentPage:a+1}})}}},*changeGroupFavorite({id:e,favorType:t},{put:n,call:r}){const i=t===Ei.Add?Ui:Vi,{success:a}=yield r(i,e);a&&(yield n({type:"getGroup",sign:"refresh"}))},*deleteGroup({id:e},{call:t,put:n}){const{success:r}=yield t(Gi,e);r&&(yield n({type:"getGroup",sign:"refresh"}))},*updateGroup({id:e,data:t},{call:n,put:r}){const{success:i}=yield n($i,e,t);i&&(yield r({type:"getGroup",sign:"refresh"}))}}},ile={namespace:"shield",state:{curShieldData:{}},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*setCurShieldData({data:e},{put:t}){const n=e.tags.map((e=>l(s({},e),{value:"in"===e.func?e.value.split(" "):e.value})));yield t({type:"saveData",prop:"curShieldData",data:l(s({},e),{tags:n})})}}},ale={namespace:"event",state:{currentEdit:null,alertings:{},severity:void 0,hourRange:{num:6,unit:"hours",description:"hours"},queryContent:"",hisSeverity:void 0,hisEventType:void 0,hisHourRange:{num:6,unit:"hours",description:"hours"},hisQueryContent:""},reducers:{saveData:(e,t)=>l(s({},e),{[t.prop]:t.data})},effects:{*editItem({data:e},{put:t,select:n}){const{currentEdit:r}=yield n((e=>e.event));e&&e.id&&(r&&r.id===e.id||(yield t({type:"saveData",prop:"currentEdit",data:e})))},*refreshAlertings({ids:e},{put:t,call:n}){const{dat:r}=yield n(Qi,e);yield t({type:"saveData",prop:"alertings",data:r})}}},ole=mi();for(let hle of ole)hle.module&&zse.addModel(hle.module);zse.addModel(Hse),zse.addModel(Jse),zse.addModel(nle),zse.addModel(rle),zse.addModel(ile),zse.addModel(ale),zse.start();var sle=zse.store;class lle extends f.exports.Component{constructor(e){super(e),u(this,"componentDidMount",(()=>{this.fetchData(),document.title="任务输出",document.body.style.backgroundColor="#fff",document.body.style.color="#000"})),u(this,"componentWillMount",(()=>{document.body.style.backgroundColor="#f0f2f5",document.body.style.color="rgba(0, 0, 0, 0.65)"})),this.state={loading:!1,data:[]}}fetchData(){const e=w.get(this.props,"match.params.busiId"),t=w.get(this.props,"match.params.taskId"),n=w.get(this.props,"match.params.outputType");void 0!==t&&void 0!==n&&(this.setState({loading:!0}),Si(`${fie.task(e)}/${t}/${n}`).then((e=>{this.setState({data:e.dat})})).finally((()=>{this.setState({loading:!1})})))}getOutput(){const e=w.get(this.props,"match.params.outputType"),{data:t}=this.state;let n="";return w.each(t,(t=>{n+=`${t.host}\n`,n+=`${t[e]}\n\n`})),n}render(){const{loading:e}=this.state,t=this.getOutput();return d.createElement(tn,{spinning:e},d.createElement("pre",{style:{fontSize:12,padding:10,height:"100vh"}},t))}}class cle extends f.exports.Component{constructor(e){super(e),u(this,"componentDidMount",(()=>{this.fetchData(),document.title="任务输出",document.body.style.backgroundColor="#fff",document.body.style.color="#000"})),u(this,"componentWillMount",(()=>{document.body.style.backgroundColor="#f0f2f5",document.body.style.color="rgba(0, 0, 0, 0.65)"})),this.state={loading:!1,data:""}}fetchData(){const e=w.get(this.props,"match.params.busiId"),t=w.get(this.props,"match.params.taskId"),n=w.get(this.props,"match.params.host"),r=w.get(this.props,"match.params.outputType");void 0!==t&&void 0!==n&&(this.setState({loading:!0}),Si(`${fie.task(e)}/${t}/host/${n}/${r}`).then((e=>{this.setState({data:e.dat})})).finally((()=>{this.setState({loading:!1})})))}getOutput(){const e=w.get(this.props,"match.params.host"),{data:t}=this.state;let n="";return n+=`${e}\n`,n+=`${t}\n\n`,n}render(){const{loading:e}=this.state,t=this.getOutput();return d.createElement(tn,{spinning:e},d.createElement("pre",{style:{fontSize:12,padding:10,height:"100vh"}},t))}}function ule(){const{t:e,i18n:t}=Hr();return d.createElement("div",{className:"App"},d.createElement(nn,{locale:"en"==t.language?Mie:Cie,renderEmpty:()=>d.createElement("div",{style:{padding:20}},d.createElement("img",{src:"/image/empty.png",width:"64"}),d.createElement("div",{className:"ant-empty-description"},e("无数据")))},d.createElement(Xr,{store:sle},d.createElement(Ne,null,d.createElement(st,null,d.createElement(lt,{exact:!0,path:"/job-task/:busiId/output/:taskId/:outputType",component:lle}),d.createElement(lt,{exact:!0,path:"/job-task/:busiId/output/:taskId/:host/:outputType",component:cle}),d.createElement(d.Fragment,null,d.createElement(Fi,null),d.createElement(Fae,null)))))))}q.render(d.createElement(ule,null),document.getElementById("root"));
//# sourceMappingURL=index.1ac4f5fe.js.map
