var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,d=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o,s=(e,l)=>{for(var a in l||(l={}))t.call(l,a)&&d(e,a,l[a]);if(o)for(var a of o(l))r.call(l,a)&&d(e,a,l[a]);return e};import{F as u,S as n}from"./element-plus.59d69a7b.js";import{q as i,b as p,e as c}from"./system.a06a3236.js";import{j as m,z as b,f,h as v,o as h,c as w,w as y,a4 as g,a as V,n as j,$ as L,s as k}from"./vue.3e76d0e4.js";import"./index.16c626da.js";const x={class:"dialog-footer"},O=k("取 消"),_=k("确 定"),N={props:{fun:Function},setup(e,{expose:o}){const t=e,r=m(!1),d=b({value:"add"}),k=m(null),N=m(null),P=m(),U=b({userName:"",password:"",phone:"",menuId:""}),q=m([6]),C=b({children:"children",label:"label"}),F=b([{id:1,label:"Level one 1",children:[{id:4,label:"Level two 1-1",children:[{id:9,label:"Level three 1-1-1"},{id:10,label:"Level three 1-1-2"}]}]},{id:2,label:"Level one 2",children:[{id:5,label:"Level two 2-1"},{id:6,label:"Level two 2-2"}]},{id:3,label:"Level one 3",children:[{id:7,label:"Level two 3-1"},{id:8,label:"Level two 3-2"}]}]),I=b({userName:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),B=()=>{k.value.resetFields(),r.value=!1,P.value="",q.value=[],t.fun&&t.fun(),console.log(q.value)},S=()=>{U.menuId=N.value.getCheckedKeys(),console.log(s({},U)),k.value.validate((e=>{var o,t;e?P.value?c((o=s({},U),t={id:P.value},l(o,a(t)))).then((e=>{e&&"200"===e.code&&u.alert("修改成功!","提示",{confirmButtonText:"确认",type:"success"}).then((()=>{B()})).catch((()=>{}))})):p(s({},U)).then((e=>{e&&"200"===e.code&&u.alert("新增成功!","提示",{confirmButtonText:"确认",type:"success"}).then((()=>{B()})).catch((()=>{}))})):n.error("请输入用户名和密码")}))};return o({init:e=>{r.value=!0,e.id&&(d.value="edit",P.value=e.id,i(e.id).then((e=>{"200"===e.code&&(U.userName=e.data.userName||"",U.password=e.data.password||"",U.phone=e.data.phone||"")})))}}),(e,l)=>{const a=f("el-input"),o=f("el-form-item"),t=f("el-tree"),s=f("el-form"),u=f("el-button"),n=f("el-dialog"),i=v("loading");return h(),w(n,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value=e),title:"add"==L(d).value?"添加分类":"修改分类",width:"1200px"},{footer:y((()=>[g("span",x,[V(u,{onClick:B},{default:y((()=>[O])),_:1}),V(u,{type:"primary",onClick:S},{default:y((()=>[_])),_:1})])])),default:y((()=>[j(V(s,{ref:k,model:L(U),rules:L(I),"label-width":"80px"},{default:y((()=>[V(o,{prop:"userName",label:"账号"},{default:y((()=>[V(a,{modelValue:L(U).userName,"onUpdate:modelValue":l[0]||(l[0]=e=>L(U).userName=e)},null,8,["modelValue"])])),_:1}),V(o,{prop:"password",label:"密码"},{default:y((()=>[V(a,{modelValue:L(U).password,"onUpdate:modelValue":l[1]||(l[1]=e=>L(U).password=e)},null,8,["modelValue"])])),_:1}),V(o,{prop:"phone",label:"电话"},{default:y((()=>[V(a,{modelValue:L(U).phone,"onUpdate:modelValue":l[2]||(l[2]=e=>L(U).phone=e)},null,8,["modelValue"])])),_:1}),V(o,{label:"菜单权限"},{default:y((()=>[V(t,{data:L(F),"show-checkbox":"",ref:N,"node-key":"id","empty-text":"加载中，请稍后",props:L(C),"default-checked-keys":q.value},null,8,["data","props","default-checked-keys"])])),_:1})])),_:1},8,["model","rules"]),[[i,e.formLoading]])])),_:1},8,["modelValue","title"])}}};export{N as default};
