base_props: &base_props
  - name: name
    label: 名称
    required: true
    type: input
  - name: ip
    label: IP地址
    required: true
    type: input
  - name: type
    label: 类型
    required: true
    type: select
    options:
      - label: 主机
        value: 主机
  - name: manufacturers
    label: 厂商
    required: false
    type: input
  - name: position
    label: 位置
    required: false
    type: input
  - name: status
    label: 状态
    required: true
    type: select
    options:
      - label: 正常
        value: 正常
      - label: 下线
        value: 下线

config:
  - name: 主机设备
    category: "设备资产"
    plugin: host
    metrics:
      - name: CPU使用率
        metrics: "cpu_usage_active{cpu=\"cpu-total\"}"
        unit: "percent"
        label: "{{cpu}}"
        rules:
          - name: "CPU使用率大于90%"
            relation: ">"
            value: 90
            serverity: 3
      - name: 内存使用率
        metrics: "mem_used_percent"
        unit: "percent"
        label: "mem_used_percent"
        rules:
          - name: "CPU使用率大于80%"
            relation: ">"
            value: 80
            serverity: 3
      - name: 网卡入流量
        metrics: 'sum(rate(net_bits_recv[1m])) by (interface)'
        unit: "bitsSI"
        label: "{{interface}}"
      - name: 网卡出流量
        metrics: "sum(rate(net_bits_sent[1m])) by (interface)"
        unit: "bitsSI"
        label: "{{interface}}"
      - name: 分区使用率
        metrics: "disk_used_percent"
        unit: "percent"
        label: "{{path}}"
        rules:
          - name: "分区使用率大于80%"
            relation: ">"
            value: 80
            serverity: 3
    dashboard: "/dashboards-built-in/detail?__built-in-cate=Linux&__built-in-name=Linux%20Server&id=${id}&viewMode=fullscreen"
    form: []
    unique: true
    base_props: *base_props
    extra_props:
      cpu:
        label: CPU信息
        sort: 1
        props:
          - name: cpu
            label: CPU信息
            type: list
            items_limit: 8
            items:
            - name: model
              label: 型号
              required: true
              type: input
            - name: arch
              label: 架构
              type: input
            - name: core_count
              label: 物理核数量
              type: input
            - name: thread_count
              label: 逻辑核数量
              type: input
            - name: max_frequency
              label: 最大主频(Mhz)
              type: input
            - name: frequency
              label: 主频(Mhz)
              type: input

      memory:
        label: 内存信息
        sort: 2
        props:
          - name: memory
            label: 内存信息
            type: list
            items_limit: 128
            items:
            - name: brand
              label: 品牌
              type: input
            - name: type
              label: 类型
              type: input
            - name: frequency
              label: 主频(Mhz)
              type: input
            - name: capacity
              label: 容量(M)
              type: input
              unit: byte
        
      disk:
        label: 磁盘信息
        sort: 3
        props:
          - name: disk
            label: 磁盘信息
            type: list
            items_limit: 64
            items:
              - name: name
                label: 名称
                type: input
              - name: type
                label: 类型
                type: input
              - name: capacity
                label: 容量
                type: input
                unit: byte

      net:
        label: 网络信息
        sort: 4
        props:
          - name: interface
            label: 网络接口
            type: list
            items_limit: 128
            items:
              - name: name
                label: 名称
                type: input
              - name: type
                label: 类型
                type: input
              - name: address
                label: 接口地址
                type: input
              - name: mac
                label: mac地址
                type: input
              - name: gateway
                label: 网关地址
                type: input
              
      board:
        label: 主板信息
        sort: 5
        props:
          - name: board
            label: 主板信息
            type: list
            items_limit: 1
            items:
              - name: manufacturers
                label: 厂商
                type: input
              - name: serial_num
                label: 序列号
                type: input
              - name: version
                label: 版本
                type: input

      bios:
        label: 固件信息
        sort: 6
        props:
          - name: bios
            label: 固件信息
            type: list
            items_limit: 1
            items:
              - name: manufacturers
                label: 厂商
                type: input
              - name: version
                label: 版本
                type: input
              - name: release_date
                label: 发行日期
                type: input

      bus:
        label: 主机控制器
        sort: 7
        props:
          - name: devices
            label: 控制器
            type: list
            items_limit: 32
            items:
              - name: name
                label: 名称
                type: input
              - name: vendor
                label: 制造商
                type: input
              - name: product
                label: 设备名称
                type: input

      os:
        label: 操作系统
        sort: 8
        props:
          - name: os
            label: 操作系统
            type: list
            items_limit: 1
            items:
              - name: name
                label: 名称
                type: input
              - name: version
                label: 版本
                type: input
              - name: vendor
                label: 厂商
                type: input
              - name: env
                label: 环境变量
                type: input

      power:
        label: 电源信息
        sort: 9
        props:
          - name: power_supply
            label: 电源
            type: list
            items_limit: 8
            items:
              - name: type
                label: 类型
                type: input
              - name: sensor
                label: 名称
                type: input

  - name: 网络设备
    category: "设备资产"
    plugin: switch_legacy
    metrics:
      - name: 运行时间
        metrics: switch_legacy_uptime
        unit: seconds
      - name: CPU使用率
        metrics: switch_legacy_cpu_util
        unit: "percent"
      - name: 内存使用率
        metrics: switch_legacy_mem_util
        unit: "percent"
      - name: 吞吐率
        metrics: "sum(rate(switch_legacy_if_out[5m]))"
        unit: "bitsSI"
    dashboard: "/dashboards-built-in/detail?__built-in-cate=SNMP&__built-in-name=Switch&id=${id}&viewMode=fullscreen"
    form:
      - label: 地址
        name: address
        type: input
        required: true
      - label: 团体字
        name: community
        type: password
        required: true
    unique: true
    base_props: *base_props
    extra_props:
      device:
        label: 接口信息
        sort: 1
        props:
          - name: interface
            label: 网络接口
            type: list
            items_limit: 256
            items:
              - name: name
                label: 名称
                type: input
              - name: speed
                label: 速率
                type: input
              - name: ip
                label: ip地址
                type: input
              - name: mac
                label: 物理地址
                type: input
              - name: admin_status
                label: 管理状态
                type: select
                options: 
                  - label: up
                    value: 1 
                  - label: down
                    value: 2
                  - label: testing
                    value: 3
              - name: oper_status
                label: 业务状态
                type: select
                options:  
                  - label: up
                    value: 1
                  - label: down
                    value: 2
                  - label: testing
                    value: 3
                  - label: unkonwn
                    value: 4
                  - label: dormant
                    value: 5
                  - label: notPresent
                    value: 6
                  - label: lowerLayerDown
                    value: 7

  - name: MySQL
    category: "数据库"
    plugin: mysql
    metrics:
      - name: QPS
        metrics: rate(mysql_global_status_queries[1m])
      - name: 连接数
        metrics: mysql_global_status_threads_connected
      - name: 活动线程数
        metrics: mysql_global_status_threads_connected
    form:
      - name: address
        label: 地址
        type: input
      - name: port
        label: 端口
        type: input
      - name: username
        label: 用户名
        type: input
      - name: password
        label: 密码
        type: password
    unique: false
    dashboard: "/dashboards-built-in/detail?__built-in-cate=MySQL&__built-in-name=MySQL&id=${id}&viewMode=fullscreen"
    base_props: *base_props
    
  - name: Redis
    category: "数据库"
    plugin: redis
    metrics:
      - name: 连接数
        metrics: redis_connected_clients
      - name: 内存使用率
        metrics: redis_used_memory/redis_maxmemory
        unit: "percentUnit"
    dashboard: "/dashboards-built-in/detail?__built-in-cate=Redis&__built-in-name=Redis&id=${id}&viewMode=fullscreen"
    form:
      - label: 地址
        name: address
        type: input
        required: true
      - label: 端口
        name: port
        type: input
        required: true
      - label: 用户名
        name: user
        type: input
        required: true
      - label: 密码
        required: true
        name: password
        type: password
    unique: false

  - name: HTTP服务
    category: "应用服务"
    plugin: http_response
    metrics:
      - name: 返回状态码
        metrics: http_response_result_code
      - name: 响应时间
        metrics: http_response_response_time
        unit: "seconds"
    dashboard: "/dashboards-built-in/detail?__built-in-cate=HTTP&__built-in-name=WebAPI&id=${id}&viewMode=fullscreen"
    form:
      - label: 服务地址
        name: url
        type: input
        required: true
      - label: 请求类型
        name: method
        type: select
        required: true
        options:
          - label: 'GET'
            value: 'GET'
          - label: 'POST'
            value: 'POST'
      - label: 请求体
        name: body
        type: input
      - label: 使用SSL/TLS
        name: use_tls
        type: checkbox
      - label: basic认证用户名
        name: username
        type: input
      - label: basic认证密码
        name: password
        type: password
    unique: false

  - name: 网络端点
    category: "应用服务"
    plugin: ping
    metrics:
      - name: 返回状态码
        metrics: ping_result_code
      - name: 丢包率
        metrics: ping_percent_packet_loss
        unit: "percent"
      - name: 时延
        metrics: ping_maximum_response_ms
        unit: "milliseconds"
    form:
      - label: IP地址
        name: address
        type: input
        required: true
    unique: false

  - name: 网络服务
    category: "应用服务"
    plugin: net_response
    metrics:
      - name: 端口状态
        metrics: net_response_result_code
      - name: 连接时长
        metrics: net_response_response_time
        unit: "seconds"
    form:
      - label: 协议
        name: protocol
        type: select
        required: true
        options: 
          - label: tcp
            value: tcp
          - label: udp
            value: udp
      - label: 地址
        name: address
        type: input
        required: true
      - label: 端口
        name: port
        type: input
        required: true
    unique: false

  - name: 安全设备
    category: "安全设备"
    plugin: switch_legacy
    metrics:
      - name: 运行时间
        metrics: switch_legacy_uptime
        unit: seconds
    form:
      - label: 地址
        name: address
        type: input
        required: true
      - label: 团体字
        name: community
        type: password
        required: true
    unique: true