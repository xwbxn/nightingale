(self["webpackChunk_gcpaas_data_room_ui"]=self["webpackChunk_gcpaas_data_room_ui"]||[]).push([[667],{11460:function(t,e,a){"use strict";a.r(e);var o=a(87854),i=a.n(o),s=a(95348),n=a.n(s),r=new(i())({id:"icon-00dataSourceSet",use:"icon-00dataSourceSet-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-00dataSourceSet"><path d="M314.092 920.145l36.877-65.537c48.098 27.064 102.405 41.48 158.895 41.48 55.117 0 108.162-13.722 155.41-39.547l36.067 65.986c-58.24 31.833-123.676 48.761-191.477 48.761-69.493 0-136.487-17.784-195.772-51.143z m568.94-205.15l-70.2-26.962c14.104-36.72 21.426-75.894 21.426-116.137 0-179.042-145.232-324.193-324.394-324.193-179.163 0-324.394 145.151-324.394 324.193 0 42.375 8.119 83.56 23.711 121.922l-69.665 28.316C120.284 674.816 110.27 624.02 110.27 571.896c0-220.583 178.909-399.393 399.594-399.393s399.594 178.81 399.594 399.393c0 49.498-9.03 97.808-26.425 143.1z m-97.617 256.293c-87.402 0-158.264-70.822-158.264-158.197s70.862-158.198 158.264-158.198c87.403 0 158.265 70.823 158.265 158.198 0 87.375-70.862 158.197-158.265 158.197z m0-75.2c45.88 0 83.065-37.164 83.065-82.997 0-45.834-37.185-82.998-83.065-82.998-45.88 0-83.064 37.164-83.064 82.998 0 45.833 37.184 82.997 83.064 82.997z m-547.047 75.2C150.966 971.288 80.104 900.466 80.104 813.091s70.862-158.198 158.264-158.198c87.403 0 158.265 70.823 158.265 158.198 0 87.375-70.862 158.197-158.265 158.197z m0-75.2c45.88 0 83.065-37.164 83.065-82.997 0-45.834-37.185-82.998-83.065-82.998-45.88 0-83.064 37.164-83.064 82.998 0 45.833 37.184 82.997 83.064 82.997z" fill="#4CA7FF" p-id="4209" /><path d="M510.5 209.5m-158.5 0a158.5 158.5 0 1 0 317 0 158.5 158.5 0 1 0-317 0Z" fill="#A5E8D0" p-id="4210" /></symbol>'});n().add(r);e["default"]=r},65667:function(t,e,a){"use strict";a.r(e);var o=a(87854),i=a.n(o),s=a(95348),n=a.n(s),r=new(i())({id:"icon-01datasetConfig",use:"icon-01datasetConfig-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-01datasetConfig"><path d="M920.6 564.1v235.4c-12.1 75.6-190 143.9-407 143.9s-395-60-407-135.7V564.1" fill="#FFFFFF" p-id="5602" /><path d="M513.6 959.3c-106.4 0-207.8-14.3-285.4-40.3-38.6-12.9-69.9-28.2-93-45.4-25.8-19.3-40.8-40.6-44.4-63.4-0.1-0.8-0.2-1.7-0.2-2.5V564.1c0-8.8 7.2-16 16-16s16 7.2 16 16v242.2c2.6 13.7 13.6 28.1 31.7 41.7 20.3 15.2 48.6 28.9 84 40.7 74.5 24.9 172.3 38.6 275.3 38.6 101.5 0 199.1-15.1 274.9-42.6 67.1-24.3 110.4-56.7 116.1-86.6v-234c0-8.8 7.2-16 16-16s16 7.2 16 16v235.4c0 0.8-0.1 1.7-0.2 2.5-6.9 43.2-55.5 83.3-137 112.8-79.2 28.7-180.7 44.5-285.8 44.5z" fill="#00365B" p-id="5603" /><path d="M106.6 564.1c0 79.5 182.2 143.9 407 143.9s407-64.4 407-143.9-182.2-143.9-407-143.9-407 64.4-407 143.9z m0 0" fill="#FFFFFF" p-id="5604" /><path d="M513.6 724c-110.5 0-214.6-15.3-293.1-43.1-39.2-13.9-70.2-30.2-92.2-48.5-25-20.9-37.7-43.9-37.7-68.3s12.7-47.4 37.7-68.3c22-18.4 53-34.7 92.2-48.5 78.5-27.8 182.6-43 293.1-43 110.5 0 214.6 15.3 293.1 43.1 39.2 13.9 70.2 30.2 92.2 48.5 25 20.9 37.7 43.9 37.7 68.3s-12.7 47.4-37.7 68.3c-22 18.4-53 34.7-92.2 48.5-78.5 27.7-182.6 43-293.1 43z m0-287.8c-107 0-207.3 14.6-282.5 41.2-35.1 12.4-63.5 27.2-82.3 42.9-17.4 14.6-26.2 29.3-26.2 43.7 0 14.5 8.8 29.2 26.2 43.7 18.8 15.7 47.2 30.5 82.3 42.9 75.2 26.6 175.5 41.2 282.5 41.2s207.3-14.6 282.5-41.2c35.1-12.4 63.5-27.2 82.3-42.9 17.4-14.6 26.2-29.3 26.2-43.7s-8.8-29.2-26.2-43.7c-18.8-15.7-47.2-30.5-82.3-42.9-75.2-26.5-175.6-41.2-282.5-41.2z" fill="#00365B" p-id="5605" /><path d="M920.6 224.8v235.4c-12.1 75.6-190 143.9-407 143.9s-395-60-407-135.7V224.8" fill="#FFFFFF" p-id="5606" /><path d="M513.6 620.1c-106.4 0-207.8-14.3-285.4-40.3-38.6-12.9-69.9-28.2-93-45.4-25.8-19.3-40.8-40.6-44.4-63.4-0.1-0.8-0.2-1.7-0.2-2.5V224.8c0-8.8 7.2-16 16-16s16 7.2 16 16V467c2.6 13.7 13.6 28.1 31.7 41.7 20.3 15.2 48.6 28.9 84 40.7 74.5 24.9 172.3 38.6 275.3 38.6 101.5 0 199.1-15.1 274.9-42.6 67.1-24.3 110.4-56.7 116.1-86.6v-234c0-8.8 7.2-16 16-16s16 7.2 16 16v235.4c0 0.8-0.1 1.7-0.2 2.5-6.9 43.2-55.5 83.3-137 112.8-79.2 28.8-180.7 44.6-285.8 44.6z" fill="#00365B" p-id="5607" /><path d="M106.6 224.8c0 79.5 182.2 143.9 407 143.9s407-64.4 407-143.9-182.2-143.9-407-143.9-407 64.4-407 143.9z m0 0" fill="#FFFFFF" p-id="5608" /><path d="M513.6 384.7c-110.5 0-214.6-15.3-293.1-43.1-39.2-13.9-70.2-30.2-92.2-48.5-25-20.9-37.7-43.9-37.7-68.3s12.7-47.4 37.7-68.3c22-18.4 53-34.7 92.2-48.5C299 80.2 403.1 65 513.6 65c110.5 0 214.6 15.3 293.1 43.1 39.2 13.9 70.2 30.2 92.2 48.5 25 20.9 37.7 43.9 37.7 68.3s-12.7 47.4-37.7 68.3c-22 18.4-53 34.7-92.2 48.5-78.5 27.7-182.6 43-293.1 43z m0-287.8c-107 0-207.3 14.6-282.5 41.2-35.1 12.4-63.5 27.2-82.3 42.9-17.4 14.6-26.2 29.3-26.2 43.7 0 14.5 8.8 29.2 26.2 43.7 18.8 15.7 47.2 30.5 82.3 42.9 75.2 26.6 175.5 41.2 282.5 41.2s207.3-14.6 282.5-41.2c35.1-12.4 63.5-27.2 82.3-42.9 17.4-14.6 26.2-29.3 26.2-43.7s-8.8-29.2-26.2-43.7c-18.8-15.7-47.2-30.5-82.3-42.9-75.2-26.5-175.6-41.2-282.5-41.2z" fill="#00365B" p-id="5609" /><path d="M783.2 792.7m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z" fill="#53B28F" p-id="5610" /><path d="M783.2 446m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z" fill="#53B28F" p-id="5611" /><path d="M237.4 223.8c0 36.7 122.6 66.5 273.9 66.5 151.3 0 273.9-29.8 273.9-66.5s-122.6-66.5-273.9-66.5c-151.3 0.1-273.9 29.8-273.9 66.5z m0 0" fill="#53B28F" p-id="5612" /></symbol>'});n().add(r);e["default"]=r},60667:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return U}});a(34284);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bs-manage-main-wrap"},[a("side-menu",{on:{getPageInfo:t.getPageInfo}}),a("menu-content",{attrs:{"catalog-info":t.catalogInfo,type:t.type}})],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"side-catalog-wrap"},[a("el-scrollbar",{staticClass:"side-catalog-box"},[a("div",{staticClass:"side-catalog-all side-catalog-item",class:{"active-catalog":t.isAll},on:{click:function(e){return t.clickAllCatalog()}}},[t._v(" 全部 ")]),t._l(t.catalogList,(function(e,o){return a("div",{key:o,staticClass:"side-catalog-item",class:{"active-catalog":t.activeCatalog.code===e.code&&!t.isAll},on:{mouseenter:function(a){return t.mouseenter(e.code)},mouseleave:t.mouseleave,click:function(a){return t.clickCatalog(e)}}},[a("span",{staticClass:"catalog-name"},[t._v(t._s(e.name))]),a("el-dropdown",{staticClass:"page-list-dropdown",class:{"dropdown-show":t.showDropdown&&t.hoverItem===e.code||t.activeCatalog.code===e.code},attrs:{placement:"bottom-start","node-key":"id",trigger:"click"}},[a("span",{staticClass:"el-dropdown-link menu-dropdown-link"},[a("i",{staticClass:"el-icon-more",class:{"active-icon-more":t.activeCatalog.code===e.code&&!t.isAll}}),a("el-dropdown-menu",{staticClass:"dropdown-menu-box bs-el-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.catalogEdit()}}},[t._v(" 编辑 ")]),a("el-dropdown-item",{staticClass:"delete-item",nativeOn:{click:function(a){return t.catalogDel(e)}}},[t._v(" 删除 ")])],1)],1)])],1)}))],2),a("div",{staticClass:"add-catalog-box",on:{click:t.catalogAdd}},[a("i",{staticClass:"el-icon-plus"}),a("div",[t._v("新增分组")])]),a("el-dialog",{staticClass:"bs-dialog-wrap bs-el-dialog",attrs:{title:t.currentCatalog.code?"编辑分组":"新增分组",visible:t.catalogVisible,"custom-class":"bs-el-dialog",width:"30%"},on:{"update:visible":function(e){t.catalogVisible=e},close:t.handleClose}},[a("el-form",{ref:"form",staticClass:"bs-el-form",attrs:{model:t.currentCatalog,"label-width":"80px",rules:t.formRules}},[a("el-form-item",{attrs:{label:"分组名称",prop:"name"}},[a("el-input",{staticClass:"bs-el-input",attrs:{clearable:""},model:{value:t.currentCatalog.name,callback:function(e){t.$set(t.currentCatalog,"name","string"===typeof e?e.trim():e)},expression:"currentCatalog.name"}})],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{staticClass:"bs-el-input-number",attrs:{min:0,max:3e4,"controls-position":"right"},model:{value:t.currentCatalog.orderNum,callback:function(e){t.$set(t.currentCatalog,"orderNum",e)},expression:"currentCatalog.orderNum"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"bs-el-button-default",on:{click:function(e){t.catalogVisible=!1}}},[t._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addOrEditCatalog}},[t._v(" 确定 ")])],1)],1)],1)},n=[],r=a(50124),l=a(95082),c=a(48534),d=(a(60228),a(73964),a(36409),a(21057),a(68932),a(50361)),u=a.n(d),p={components:{},data:function(){var t=this,e=function(e,a,o){t.$dataRoomAxios.post("/bigScreen/type/nameRepeat",{id:t.currentCatalog.id,name:a,type:"resourceCatalog"},!0).then((function(t){t.data?o(new Error("分组名称已存在")):o()}))};return{showDropdown:!1,hoverItem:null,isAll:!0,catalogList:[{name:"LOGO",code:"LOGO"},{name:"商务科技",code:"商务科技"},{name:"卡通手绘",code:"卡通手绘"},{name:"简约背景",code:"简约背景"},{name:"大屏背景",code:"大屏背景"}],catalogVisible:!1,activeCatalog:{name:"",id:"",code:""},currentCatalog:{name:"",id:"",code:""},formRules:{name:[{required:!0,message:"分组名称不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]}}},mounted:function(){this.getCatalogList()},methods:{catalogAdd:function(){this.catalogVisible=!0,this.currentCatalog={name:"",id:"",code:"",orderNum:0}},mouseenter:function(t){this.showDropdown=!0,this.hoverItem=t},mouseleave:function(){this.showDropdown=!1},clickAllCatalog:function(){this.isAll=!0,this.$emit("getPageInfo",{isAll:!0,page:{id:"",code:"",name:""}})},handleClose:function(){this.catalogVisible=!1,this.$refs.form.clearValidate()},addOrEditCatalog:function(){var t=this;this.$refs.form.validate(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(a){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:t.currentCatalog.id?t.$dataRoomAxios.post("/bigScreen/type/update",(0,l.Z)((0,l.Z)({},t.currentCatalog),{},{type:"resourceCatalog"})).then((function(e){t.catalogVisible=!1,t.getCatalogList()})).catch((function(){})):t.$dataRoomAxios.post("/bigScreen/type/add",(0,l.Z)((0,l.Z)({},t.currentCatalog),{},{type:"resourceCatalog"})).then((function(e){t.catalogVisible=!1,t.getCatalogList(),t.flag=!0,t.closePageMenuDialog()})).catch((function(){}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},clickCatalog:function(t){this.currentCatalog=u()(t),this.activeCatalog=u()(t),this.isAll=!1,this.$emit("getPageInfo",{isAll:!1,page:t})},catalogEdit:function(){this.currentCatalog=u()(this.currentCatalog),this.catalogVisible=!0},catalogDel:function(t){var e=this;this.$confirm("分组删除后，分组下的资源会被归纳至全部中，确定删除该分组？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"bs-el-message-box"}).then((0,c.Z)((0,r.Z)().mark((function a(){return(0,r.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$dataRoomAxios.post("/bigScreen/type/delete/".concat(t.id)).then((function(){e.$message({type:"success",message:"删除成功"}),e.getCatalogList()})).catch((function(){e.$message({type:"error",message:"删除失败!"})}));case 1:case"end":return a.stop()}}),a)})))).catch()},getCatalogList:function(){var t=this;this.pageLoading=!0,this.$dataRoomAxios.get("/bigScreen/type/list/resourceCatalog").then((function(e){t.catalogList=e})).catch((function(){})).finally((function(){t.pageLoading=!1}))}}},m=p,g=a(1001),f=(0,g.Z)(m,s,n,!1,null,"6f383c8d",null),h=f.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right-screen-list-wrap"},[a("SourceList",{attrs:{"catalog-info":t.catalogInfo,type:t.type}})],1)},b=[],C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"big-screen-list-wrap"},[a("div",{staticClass:"internal-box"},[a("div",{staticClass:"top-search-wrap"},[a("el-input",{staticClass:"bs-el-input",attrs:{clearable:"",placeholder:"请输入图片名称","prefix-icon":"el-icon-search"},on:{clear:t.reSearch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.reSearch(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),a("el-select",{staticClass:"bs-el-select",attrs:{clearable:"",placeholder:"请选择图片格式","popper-class":"bs-el-select"},on:{change:t.reSearch},model:{value:t.extend,callback:function(e){t.extend=e},expression:"extend"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:t.reSearch}},[t._v(" 搜索 ")]),a("el-upload",{staticClass:"upload-demo",attrs:{action:t.upLoadUrl,"before-upload":t.beforeUpload,data:{module:t.code},"file-list":t.fileList,headers:t.headers,"on-error":t.uploadError,"on-success":t.uploadSuccess,"show-file-list":!1,multiple:""}},[a("el-button",{attrs:{type:"primary"}},[t._v(" 上传资源 ")])],1)],1),0!==t.list.length?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-wrap bs-scrollbar",style:{display:t.gridComputed?"grid":"flex",justifyContent:t.gridComputed?"space-around":"flex-start"},attrs:{"element-loading-text":"加载中"}},t._l(t.list,(function(e){return a("div",{key:e.id,staticClass:"big-screen-card-wrap",style:{width:t.gridComputed?"auto":"290px"}},[a("div",{staticClass:"big-screen-card-inner"},[a("div",{staticClass:"screen-card__hover"},[a("div",{staticClass:"screen-card__hover-box"},[a("div",{staticClass:"preview"},[a("div",{staticClass:"screen-card__oper-label circle",on:{click:function(a){return t.preview(e)}}},[a("span",[t._v("预览")])]),a("div",{staticClass:"circle",on:{click:function(a){return t.downLoad(e)}}},[a("span",[t._v("下载")])]),a("div",{staticClass:"circle",on:{click:function(a){return t.del(e)}}},[a("span",[t._v("删除")])]),a("div",{staticClass:"circle",on:{click:function(a){return t.copy(e)}}},[a("span",[t._v("链接")])])])])]),t.imgExtends.includes(e.extension)?a("div",{staticClass:"big-screen-card-img"},[a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.getCoverPicture(e.url),fit:"contain"}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中··· ")])])],1):a("div",{staticClass:"big-screen-card-img"},[a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.getUrl(e),fit:"contain"}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中··· ")])])],1),a("div",{staticClass:"big-screen-bottom"},[a("div",{staticClass:"left-bigscreen-title",attrs:{title:e.originalName}},[t._v(" "+t._s(e.originalName)+" ")])])])])})),0):a("div",{staticClass:"empty"},[t._v(" 暂无数据 ")]),a("div",{staticClass:"footer-pagination-wrap"},[a("div",{staticClass:"bs-pagination"},[a("el-pagination",{staticClass:"bs-el-pagination",attrs:{"current-page":t.current,"page-size":t.size,"page-sizes":[10,20,50,100],total:t.totalCount,background:"",layout:"total, prev, pager, next, sizes","next-text":"下一页","popper-class":"bs-el-pagination","prev-text":"上一页"},on:{"current-change":t.currentChangeHandle,"size-change":t.sizeChangeHandle}})],1)])]),a("EditForm",{ref:"EditForm",on:{refreshData:t.reSearch}})],1)},F=[],w=(a(76801),a(43843),a(70560),a(49693),a(47522),a(5661)),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"bs-dialog-wrap bs-el-dialog",attrs:{"close-on-click-modal":!1,title:t.title?"编辑":"新增",visible:t.formVisible,"append-to-body":!0},on:{"update:visible":function(e){t.formVisible=e},close:t.closeAddDialog}},[a("el-form",{ref:"dataForm",staticClass:"bs-el-form",attrs:{model:t.dataForm,rules:t.dataFormRules,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{staticClass:"bs-el-input",attrs:{autocomplete:"off",placeholder:"请输入名称",clearable:"",maxlength:"30"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"推荐分辨率"}},[a("el-select",{staticClass:"bs-el-select",attrs:{"popper-class":"bs-el-select",placeholder:"请选择分辨率",clearable:""},model:{value:t.resolutionRatioValue,callback:function(e){t.resolutionRatioValue=e},expression:"resolutionRatioValue"}},t._l(t.resolutionRatioOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"大屏宽度"}},[a("el-input-number",{staticClass:"bs-el-input-number",attrs:{min:100,max:8e3},model:{value:t.resolutionRatio.w,callback:function(e){t.$set(t.resolutionRatio,"w",e)},expression:"resolutionRatio.w"}})],1),a("el-form-item",{attrs:{label:"大屏高度"}},[a("el-input-number",{staticClass:"bs-el-input-number",attrs:{min:100,max:8e3},model:{value:t.resolutionRatio.h,callback:function(e){t.$set(t.resolutionRatio,"h",e)},expression:"resolutionRatio.h"}})],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{staticClass:"bs-el-input-number",attrs:{min:0,max:3e4,"controls-position":"right"},model:{value:t.dataForm.orderNum,callback:function(e){t.$set(t.dataForm,"orderNum",e)},expression:"dataForm.orderNum"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"bs-el-button-default",on:{click:t.closeAddDialog}},[t._v(" 取消 ")]),t.title?a("el-button",{attrs:{type:"primary",loading:t.toDesignLoading,disabled:t.toDesignDisabled},on:{click:function(e){return t.addOrUpdate(!0)}}},[t._v(" 设计 ")]):t._e(),a("el-button",{attrs:{type:"primary",loading:t.sureLoading,disabled:t.sureDisabled},on:{click:function(e){return t.addOrUpdate(!t.title)}}},[t._v(" 确定 ")])],1)],1)],1)},y=[],$=(a(34338),a(15089)),k={name:"EditForm",components:{},props:{},data:function(){return{resolutionRatioValue:"1920*1080",resolutionRatio:{w:1920,h:1080},resolutionRatioOptions:[{value:"1024*768",label:"1024*768"},{value:"1280*720",label:"1280*720"},{value:"1920*1080",label:"1920*1080"},{value:"2560*1440",label:"2560*1440"},{value:"3840*2160",label:"3840*2160"},{value:"5120*2880",label:"5120*2880"},{value:"7680*4320",label:"7680*4320"}],formVisible:!1,title:"",dataForm:{id:"",type:"bigScreen",name:"",icon:"",code:"",remark:"",iconColor:"#007aff",components:"",style:"",formType:"",formConfig:"",pageTemplateId:""},dataFormRules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}]},sureLoading:!1,toDesignLoading:!1,sureDisabled:!1,toDesignDisabled:!1}},computed:{},watch:{resolutionRatioValue:function(t){t?(this.resolutionRatio.w=t.split("*")[0],this.resolutionRatio.h=t.split("*")[1]):(this.resolutionRatio.w=1920,this.resolutionRatio.h=1080)}},mounted:function(){},methods:{closeAddDialog:function(){this.formVisible=!1,this.$refs.dataForm.resetFields()},init:function(t,e){var a=this;this.title="";var o=t?t.code:"";this.formVisible=!0,this.$nextTick((function(){o?a.$dataRoomAxios.get("/bigScreen/design/info/code/".concat(o)).then((function(e){if(a.$set(a,"title",e.name),a.$set(a.dataForm,"name",e.name),a.$set(a.dataForm,"chartList",e.chartList),a.$set(a.dataForm,"code",e.code),a.$set(a.dataForm,"icon",e.icon),a.$set(a.dataForm,"iconColor",e.iconColor),a.$set(a.dataForm,"id",e.id),a.$set(a.dataForm,"parentCode","0"===e.parentCode?"":e.parentCode),a.$set(a.dataForm,"remark",e.remark),a.$set(a.dataForm,"style",e.style),a.$set(a.dataForm,"type",e.type),a.$set(a.dataForm,"orderNum",t.orderNum),a.$set(a.dataForm,"pageTemplateId",null===e||void 0===e?void 0:e.pageTemplateId),a.$set(a.dataForm,"pageConfig",null===e||void 0===e?void 0:e.pageConfig),"bigScreen"===a.dataForm.type){var o=e.pageConfig,i=o.w,s=o.h;a.resolutionRatio.w=i,a.resolutionRatio.h=s,a.resolutionRatioValue="".concat(i,"*").concat(s)}})):(a.$set(a.dataForm,"name",""),a.$set(a.dataForm,"chartList",[]),a.$set(a.dataForm,"code",""),a.$set(a.dataForm,"icon",$.Z.getNameList()[0]),a.$set(a.dataForm,"iconColor","#007aff"),a.$set(a.dataForm,"id",""),a.$set(a.dataForm,"parentCode",e.code),a.$set(a.dataForm,"remark",""),a.$set(a.dataForm,"style",""),a.$set(a.dataForm,"type",a.dataForm.type),a.$set(a.dataForm,"orderNum",0),a.$set(a.dataForm,"pageTemplateId",""),a.$set(a.dataForm,"pageConfig",{w:"1920",h:"1080",bgColor:"#151a26",opacity:100,customTheme:"auto",bg:null,lightBgColor:"#f5f7fa",lightBg:null}),"bigScreen"===a.dataForm.type&&(a.resolutionRatio.w="1920",a.resolutionRatio.h="1080"))}))},addOrUpdate:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addOrUpdateBigScreen(t)},addOrUpdateBigScreen:function(t){var e=this;return(0,c.Z)((0,r.Z)().mark((function a(){return(0,r.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$refs.dataForm.validate(function(){var a=(0,c.Z)((0,r.Z)().mark((function a(o){var i,s;return(0,r.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o){a.next=2;break}return a.abrupt("return");case 2:i=e.dataForm.code?function(t){return e.$dataRoomAxios.post("/bigScreen/design/update",t)}:function(t){return e.$dataRoomAxios.post("/bigScreen/design/add",t)},s={className:"com.gccloud.dataroom.core.module.manage.dto.DataRoomPageDTO",chartList:e.dataForm.chartList,code:e.dataForm.code,icon:e.dataForm.icon,iconColor:e.dataForm.iconColor,id:e.dataForm.id,name:e.dataForm.name,parentCode:e.dataForm.parentCode,remark:e.dataForm.remark,style:e.dataForm.style,type:"bigScreen",orderNum:e.dataForm.orderNum,pageConfig:e.dataForm.pageConfig,pageTemplateId:e.dataForm.pageTemplateId},t?(e.toDesignLoading=!0,e.sureDisabled=!0):(e.sureLoading=!0,e.toDesignDisabled=!0),i(s).then((function(a){e.formVisible=!1;var o=e.dataForm.code?"更新成功":"新建成功";e.$message.success(o),e.$emit("refreshData",s,e.dataForm.id),t?(e.toDesignLoading=!1,e.sureDisabled=!1,s.code=a||e.dataForm.code,e.toDesign((0,l.Z)({},s))):(e.sureLoading=!1,e.toDesignDisabled=!1)})).catch((function(){e.sureLoading=!1,e.toDesignLoading=!1,e.sureDisabled=!1,e.toDesignDisabled=!1}));case 6:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},toDesign:function(t){var e,a;this.$router.push({path:(null===(e=window.BS_CONFIG)||void 0===e||null===(a=e.routers)||void 0===a?void 0:a.designUrl)||"/big-screen/design",query:{code:t.code}})}}},_=k,S=(0,g.Z)(_,x,y,!1,null,"76ca3204",null),L=S.exports,D=a(7651),R={name:"BigScreenList",mixins:[w.a],props:{type:{type:String,default:"bigScreen"},catalogInfo:{type:Object,default:function(){}}},components:{EditForm:L},data:function(){var t,e,a,o,i;return{upLoadUrl:(null===(t=window.BS_CONFIG)||void 0===t||null===(e=t.httpConfigs)||void 0===e?void 0:e.baseURL)+"/bigScreen/file/upload",searchKey:"",extend:"",sourceExtends:(null===(a=window.BS_CONFIG)||void 0===a?void 0:a.sourceExtends)||["jpg","jpeg","png","gif","bmp","svg","webp","ico","xls","xlsx","csv"],options:[],list:[],fileUploadParam:{},headers:(0,l.Z)({},null===(o=window.BS_CONFIG)||void 0===o||null===(i=o.httpConfigs)||void 0===i?void 0:i.headers),fileList:[],loading:!1,imgExtends:["jpg","jpeg","png","gif","bmp","svg","webp","ico"],otherExtends:{video:["mp4","avi","mov","wmv","flv","f4v","rmvb","rm","3gp","dat","ts","mts","vob"],audio:["mp3","wav","wma","ogg","aac","flac","ape","m4a","m4r","amr","ac3"],excel:["xls","xlsx","csv"],word:["doc","docx"],ppt:["ppt","pptx"],pdf:["pdf"]}}},computed:{code:function(){var t,e;return null===(t=this.catalogInfo)||void 0===t||null===(e=t.page)||void 0===e?void 0:e.code},gridComputed:function(){return this.list.length>3}},watch:{code:function(t){this.current=1,this.getDataList()}},mounted:function(){this.getOptions(),this.getDataList()},methods:{getUrl:function(t){var e=t.extension;return this.otherExtends.video.includes(e)?a(9959):this.otherExtends.audio.includes(e)?a(17878):this.otherExtends.excel.includes(e)?a(98508):this.otherExtends.word.includes(e)?a(76463):this.otherExtends.ppt.includes(e)?a(87630):this.otherExtends.pdf.includes(e)?a(1633):a(81643)},uploadError:function(){this.$message({type:"error",message:"上传失败"})},beforeUpload:function(t){var e=t.name.split(".").pop(),a=this.sourceExtends.includes(e);return a||this.$message.error("不支持的文件类型："+e),a},uploadSuccess:function(t,e,a){200===t.code?(this.$message({type:"success",message:"上传成功"}),this.getDataList()):this.$message({type:"error",message:t.msg})},getOptions:function(){var t=this;this.options=[],this.options.push({label:"全部",value:""}),this.sourceExtends.forEach((function(e){return t.options.push({label:e,value:e})}))},getDataList:function(){var t=this;this.loading=!0,this.$dataRoomAxios.get("/bigScreen/file",{module:this.catalogInfo.page.code,current:this.current,size:this.size,extension:this.extend,searchKey:this.searchKey}).then((function(e){t.list=e.list,t.totalCount=e.totalCount})).finally((function(){t.loading=!1}))},preview:function(t){window.open((0,D.q)(t.url),"_blank")},downLoad:function(t){this.$dataRoomAxios.download("/bigScreen/file/download/".concat(t.id))},del:function(t){var e=this;this.$confirm("确定删除该资源？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"bs-el-message-box"}).then((0,c.Z)((0,r.Z)().mark((function a(){return(0,r.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$dataRoomAxios.post("/bigScreen/file/delete/".concat(t.id)).then((function(){e.$message({type:"success",message:"删除成功"}),e.getDataList()})).catch((function(){e.$message({type:"error",message:"删除失败!"})}));case 1:case"end":return a.stop()}}),a)})))).catch()},copy:function(t){this.$message.success("复制成功");var e=document.createElement("input");document.body.appendChild(e),e.value=(0,D.q)(t.url),e.focus(),e.select(),document.execCommand("copy")&&document.execCommand("copy"),e.blur(),e.style.display="none"},getCoverPicture:function(t){return(0,D.q)(t)}}},M=R,O=(0,g.Z)(M,C,F,!1,null,"0ca89a1f",null),E=O.exports,Z={name:"",props:{catalogInfo:{type:Object,default:function(){return{isAll:!1,page:{}}}},type:{type:String,default:"bigScreen"}},components:{SourceList:E},data:function(){return{}}},A=Z,I=(0,g.Z)(A,v,b,!1,null,"76f59f56",null),V=I.exports,z={name:"",props:{type:{type:String,default:"bigScreen"}},components:{SideMenu:h,MenuContent:V},data:function(){return{catalogInfo:{isAll:!0,page:{id:null,code:null,type:""}}}},mounted:function(){},methods:{getPageInfo:function(t){this.catalogInfo=t}}},B=z,N=(0,g.Z)(B,o,i,!1,null,"615d6b95",null),T=N.exports;T.install=function(t){t.component(T.name,T)};var U=T},15089:function(t,e,a){"use strict";a(60228),a(76265),a(50886),a(752);var o,i=a(67292),s=null===i||void 0===i||null===(o=i.keys())||void 0===o?void 0:o.map((function(t){return i(t)}));e.Z={getNameList:function(){return null===s||void 0===s?void 0:s.map((function(t){var e,a;return null===t||void 0===t||null===(e=t.default)||void 0===e||null===(a=e.id)||void 0===a?void 0:a.split("-")[1]}))}}},5661:function(t,e,a){"use strict";a.d(e,{a:function(){return o}});var o={data:function(){return{current:1,size:10,totalPage:0,totalCount:0,prevText:"",nextText:"",sortForm:{sortFieldMap:{},sortFieldOrderList:[],columnCacheMap:{}},enableMultiFieldOrder:!1,sortFieldHeaderTipMap:{}}},watch:{"sortForm.sortFieldMap":{handler:function(t,e){for(var a in t){var o=t[a];o?"ascending"===o?this.$set(this.sortFieldHeaderTipMap,a,"点击降序"):"descending"===o?this.$set(this.sortFieldHeaderTipMap,a,"取消排序"):this.$set(this.sortFieldHeaderTipMap,a,"点击升序"):this.$set(this.sortFieldHeaderTipMap,a,"点击升序")}},deep:!0}},methods:{initSortField:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e)for(var a in e){var o=e[a];this.$set(this.sortForm.sortFieldMap,a,o)}for(var i=0;i<t.length;i++){var s=t[i],n=this.sortForm.sortFieldMap[s];n||this.$set(this.sortForm.sortFieldMap,s,"")}this.sortForm.sortFieldOrderList=t},sortStyle:function(t){t.row;var e=t.column,a=(t.rowIndex,t.columnIndex,this.sortForm.sortFieldMap[e.property]);a&&(e.order=a),this.sortForm.columnCacheMap[e.property]=e},reSort:function(t){if(!this.enableMultiFieldOrder){for(var e in this.sortForm.columnCacheMap){var a=this.sortForm.columnCacheMap[e];a.order=""}for(var o in this.sortForm.sortFieldMap)this.sortForm.sortFieldMap[o]=""}this.$set(this.sortForm.sortFieldMap,t.prop,t.order),this.reSearch()},reSearch:function(){this.current=1,this.getDataList()},getDataList:function(){console.error("你应该重写getDataList方法")},sizeChangeHandle:function(t){this.size=t,this.current=1,this.getDataList()},currentChangeHandle:function(t){this.current=t,this.getDataList()},getSortForm:function(){return{sortFieldMap:this.sortForm.sortFieldMap,sortFieldOrderList:this.sortForm.sortFieldOrderList}}}}},7651:function(t,e,a){"use strict";a.d(e,{q:function(){return o}});a(64043),a(7409),a(34338);function o(t){var e,a;return t?/^http/.test(t)?t:(/^\//.test(t)||(t="/".concat(t)),"".concat(null===(e=window.BS_CONFIG)||void 0===e||null===(a=e.httpConfigs)||void 0===a?void 0:a.fileUrlPrefix).concat(t)):t}},67292:function(t,e,a){var o={"./00dataSourceSet.svg":11460,"./01datasetConfig.svg":65667};function i(t){var e=s(t);return a(e)}function s(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=s,t.exports=i,i.id=67292},17878:function(t,e,a){"use strict";t.exports=a.p+"static/img/audio.9b1e449b.svg"},98508:function(t,e,a){"use strict";t.exports=a.p+"static/img/excel.23744af6.svg"},1633:function(t,e,a){"use strict";t.exports=a.p+"static/img/pdf.70a32240.svg"},87630:function(t,e,a){"use strict";t.exports=a.p+"static/img/ppt.5b71776f.svg"},81643:function(t,e,a){"use strict";t.exports=a.p+"static/img/unknown.f4428f75.svg"},9959:function(t,e,a){"use strict";t.exports=a.p+"static/img/video.f1c7f1ff.svg"},76463:function(t,e,a){"use strict";t.exports=a.p+"static/img/word.bff832e6.svg"}}]);