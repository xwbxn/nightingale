(self["webpackChunk_gcpaas_data_room_ui"]=self["webpackChunk_gcpaas_data_room_ui"]||[]).push([[32],{11460:function(t,e,a){"use strict";a.r(e);var o=a(87854),i=a.n(o),n=a(95348),s=a.n(n),r=new(i())({id:"icon-00dataSourceSet",use:"icon-00dataSourceSet-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-00dataSourceSet"><path d="M314.092 920.145l36.877-65.537c48.098 27.064 102.405 41.48 158.895 41.48 55.117 0 108.162-13.722 155.41-39.547l36.067 65.986c-58.24 31.833-123.676 48.761-191.477 48.761-69.493 0-136.487-17.784-195.772-51.143z m568.94-205.15l-70.2-26.962c14.104-36.72 21.426-75.894 21.426-116.137 0-179.042-145.232-324.193-324.394-324.193-179.163 0-324.394 145.151-324.394 324.193 0 42.375 8.119 83.56 23.711 121.922l-69.665 28.316C120.284 674.816 110.27 624.02 110.27 571.896c0-220.583 178.909-399.393 399.594-399.393s399.594 178.81 399.594 399.393c0 49.498-9.03 97.808-26.425 143.1z m-97.617 256.293c-87.402 0-158.264-70.822-158.264-158.197s70.862-158.198 158.264-158.198c87.403 0 158.265 70.823 158.265 158.198 0 87.375-70.862 158.197-158.265 158.197z m0-75.2c45.88 0 83.065-37.164 83.065-82.997 0-45.834-37.185-82.998-83.065-82.998-45.88 0-83.064 37.164-83.064 82.998 0 45.833 37.184 82.997 83.064 82.997z m-547.047 75.2C150.966 971.288 80.104 900.466 80.104 813.091s70.862-158.198 158.264-158.198c87.403 0 158.265 70.823 158.265 158.198 0 87.375-70.862 158.197-158.265 158.197z m0-75.2c45.88 0 83.065-37.164 83.065-82.997 0-45.834-37.185-82.998-83.065-82.998-45.88 0-83.064 37.164-83.064 82.998 0 45.833 37.184 82.997 83.064 82.997z" fill="#4CA7FF" p-id="4209" /><path d="M510.5 209.5m-158.5 0a158.5 158.5 0 1 0 317 0 158.5 158.5 0 1 0-317 0Z" fill="#A5E8D0" p-id="4210" /></symbol>'});s().add(r);e["default"]=r},65667:function(t,e,a){"use strict";a.r(e);var o=a(87854),i=a.n(o),n=a(95348),s=a.n(n),r=new(i())({id:"icon-01datasetConfig",use:"icon-01datasetConfig-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-01datasetConfig"><path d="M920.6 564.1v235.4c-12.1 75.6-190 143.9-407 143.9s-395-60-407-135.7V564.1" fill="#FFFFFF" p-id="5602" /><path d="M513.6 959.3c-106.4 0-207.8-14.3-285.4-40.3-38.6-12.9-69.9-28.2-93-45.4-25.8-19.3-40.8-40.6-44.4-63.4-0.1-0.8-0.2-1.7-0.2-2.5V564.1c0-8.8 7.2-16 16-16s16 7.2 16 16v242.2c2.6 13.7 13.6 28.1 31.7 41.7 20.3 15.2 48.6 28.9 84 40.7 74.5 24.9 172.3 38.6 275.3 38.6 101.5 0 199.1-15.1 274.9-42.6 67.1-24.3 110.4-56.7 116.1-86.6v-234c0-8.8 7.2-16 16-16s16 7.2 16 16v235.4c0 0.8-0.1 1.7-0.2 2.5-6.9 43.2-55.5 83.3-137 112.8-79.2 28.7-180.7 44.5-285.8 44.5z" fill="#00365B" p-id="5603" /><path d="M106.6 564.1c0 79.5 182.2 143.9 407 143.9s407-64.4 407-143.9-182.2-143.9-407-143.9-407 64.4-407 143.9z m0 0" fill="#FFFFFF" p-id="5604" /><path d="M513.6 724c-110.5 0-214.6-15.3-293.1-43.1-39.2-13.9-70.2-30.2-92.2-48.5-25-20.9-37.7-43.9-37.7-68.3s12.7-47.4 37.7-68.3c22-18.4 53-34.7 92.2-48.5 78.5-27.8 182.6-43 293.1-43 110.5 0 214.6 15.3 293.1 43.1 39.2 13.9 70.2 30.2 92.2 48.5 25 20.9 37.7 43.9 37.7 68.3s-12.7 47.4-37.7 68.3c-22 18.4-53 34.7-92.2 48.5-78.5 27.7-182.6 43-293.1 43z m0-287.8c-107 0-207.3 14.6-282.5 41.2-35.1 12.4-63.5 27.2-82.3 42.9-17.4 14.6-26.2 29.3-26.2 43.7 0 14.5 8.8 29.2 26.2 43.7 18.8 15.7 47.2 30.5 82.3 42.9 75.2 26.6 175.5 41.2 282.5 41.2s207.3-14.6 282.5-41.2c35.1-12.4 63.5-27.2 82.3-42.9 17.4-14.6 26.2-29.3 26.2-43.7s-8.8-29.2-26.2-43.7c-18.8-15.7-47.2-30.5-82.3-42.9-75.2-26.5-175.6-41.2-282.5-41.2z" fill="#00365B" p-id="5605" /><path d="M920.6 224.8v235.4c-12.1 75.6-190 143.9-407 143.9s-395-60-407-135.7V224.8" fill="#FFFFFF" p-id="5606" /><path d="M513.6 620.1c-106.4 0-207.8-14.3-285.4-40.3-38.6-12.9-69.9-28.2-93-45.4-25.8-19.3-40.8-40.6-44.4-63.4-0.1-0.8-0.2-1.7-0.2-2.5V224.8c0-8.8 7.2-16 16-16s16 7.2 16 16V467c2.6 13.7 13.6 28.1 31.7 41.7 20.3 15.2 48.6 28.9 84 40.7 74.5 24.9 172.3 38.6 275.3 38.6 101.5 0 199.1-15.1 274.9-42.6 67.1-24.3 110.4-56.7 116.1-86.6v-234c0-8.8 7.2-16 16-16s16 7.2 16 16v235.4c0 0.8-0.1 1.7-0.2 2.5-6.9 43.2-55.5 83.3-137 112.8-79.2 28.8-180.7 44.6-285.8 44.6z" fill="#00365B" p-id="5607" /><path d="M106.6 224.8c0 79.5 182.2 143.9 407 143.9s407-64.4 407-143.9-182.2-143.9-407-143.9-407 64.4-407 143.9z m0 0" fill="#FFFFFF" p-id="5608" /><path d="M513.6 384.7c-110.5 0-214.6-15.3-293.1-43.1-39.2-13.9-70.2-30.2-92.2-48.5-25-20.9-37.7-43.9-37.7-68.3s12.7-47.4 37.7-68.3c22-18.4 53-34.7 92.2-48.5C299 80.2 403.1 65 513.6 65c110.5 0 214.6 15.3 293.1 43.1 39.2 13.9 70.2 30.2 92.2 48.5 25 20.9 37.7 43.9 37.7 68.3s-12.7 47.4-37.7 68.3c-22 18.4-53 34.7-92.2 48.5-78.5 27.7-182.6 43-293.1 43z m0-287.8c-107 0-207.3 14.6-282.5 41.2-35.1 12.4-63.5 27.2-82.3 42.9-17.4 14.6-26.2 29.3-26.2 43.7 0 14.5 8.8 29.2 26.2 43.7 18.8 15.7 47.2 30.5 82.3 42.9 75.2 26.6 175.5 41.2 282.5 41.2s207.3-14.6 282.5-41.2c35.1-12.4 63.5-27.2 82.3-42.9 17.4-14.6 26.2-29.3 26.2-43.7s-8.8-29.2-26.2-43.7c-18.8-15.7-47.2-30.5-82.3-42.9-75.2-26.5-175.6-41.2-282.5-41.2z" fill="#00365B" p-id="5609" /><path d="M783.2 792.7m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z" fill="#53B28F" p-id="5610" /><path d="M783.2 446m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z" fill="#53B28F" p-id="5611" /><path d="M237.4 223.8c0 36.7 122.6 66.5 273.9 66.5 151.3 0 273.9-29.8 273.9-66.5s-122.6-66.5-273.9-66.5c-151.3 0.1-273.9 29.8-273.9 66.5z m0 0" fill="#53B28F" p-id="5612" /></symbol>'});s().add(r);e["default"]=r},17839:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Q}});a(34284);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bs-manage-main-wrap"},[a("side-menu",{on:{getPageInfo:t.getPageInfo}}),a("menu-content",{attrs:{"catalog-info":t.catalogInfo}})],1)},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"side-catalog-wrap"},[a("el-scrollbar",{staticClass:"side-catalog-box"},t._l(t.componentList,(function(e,o){return a("div",{key:o,staticClass:"component-item-box",class:{"active-catalog":t.activeType===e.type},on:{click:function(a){return t.componentHandle(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)],1)},s=[],r={components:{},data:function(){return{componentList:[{name:"自定义组件",type:"component"},{name:"业务组件",type:"bizComponent"},{name:"系统组件",type:"system"}],activeType:"component"}},watch:{$route:{handler:function(t){var e=this.$router.app.$options.globalData;null!==e&&void 0!==e&&e.componentsManagementType&&(this.activeType=e.componentsManagementType,this.$emit("getPageInfo",e.componentsManagementType),delete e.componentsManagementType)},immediate:!0}},created:function(){},methods:{componentHandle:function(t){this.activeType=t.type,this.$emit("getPageInfo",t.type)}}},l=r,c=a(1001),d=(0,c.Z)(l,n,s,!1,null,"35211a38",null),u=d.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right-screen-list-wrap"},[a("ComponentList",{attrs:{"catalog-info":t.catalogInfo}})],1)},p=[],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"big-screen-list-wrap"},[a("div",{staticClass:"internal-box"},[a("div",{staticClass:"top-search-wrap"},["system"!==t.catalogInfo?a("el-select",{staticClass:"bs-el-select",attrs:{"popper-class":"bs-el-select",placeholder:"请选择分组",filterable:"",clearable:""},on:{change:t.reSearch},model:{value:t.catalogCode,callback:function(e){t.catalogCode=e},expression:"catalogCode"}},t._l(t.catalogList,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1):t._e(),a("el-input",{staticClass:"bs-el-input",attrs:{placeholder:"请输入组件名称","prefix-icon":"el-icon-search",clearable:""},on:{clear:t.reSearch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.reSearch(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.reSearch}},[t._v(" 搜索 ")]),"system"!==t.catalogInfo?a("el-button",{attrs:{type:"primary"},on:{click:t.catalogManage}},[t._v(" 分组管理 ")]):t._e()],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-wrap bs-scrollbar",style:{display:t.gridComputed?"grid":"flex",justifyContent:t.gridComputed?"space-around":"flex-start"},attrs:{"element-loading-text":"加载中"}},["system"!==t.catalogInfo?a("div",{staticClass:"big-screen-card-wrap",style:{width:t.gridComputed?"auto":"290px"},on:{click:t.add}},[t._m(0)]):t._e(),t._l(t.list,(function(e){return a("div",{key:e.id,staticClass:"big-screen-card-wrap",style:{width:t.gridComputed?"auto":"290px"}},[a("div",{staticClass:"big-screen-card-inner"},[a("div",{staticClass:"screen-card__hover"},[a("div",{staticClass:"screen-card__hover-box"},[a("div",{staticClass:"preview"},[a("div",{staticClass:"screen-card__oper-label circle",on:{click:function(a){return t.preview(e)}}},[a("span",[t._v("预览")])]),"system"!==t.catalogInfo?a("div",{staticClass:"circle",on:{click:function(a){return t.design(e)}}},[a("span",[t._v("设计")])]):t._e(),"system"!==t.catalogInfo?a("div",{staticClass:"circle",on:{click:function(a){return t.edit(e)}}},[a("span",[t._v("编辑")])]):t._e(),"system"!==t.catalogInfo?a("div",{staticClass:"circle",on:{click:function(a){return t.copy(e)}}},[a("span",[t._v("复制")])]):t._e(),"system"!==t.catalogInfo?a("div",{staticClass:"circle",on:{click:function(a){return t.del(e)}}},[a("span",[t._v("删除")])]):t._e()])])]),a("div",{staticClass:"big-screen-card-img"},[a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"system"!==t.catalogInfo?t.getCoverPicture(e.coverPicture):e.img,fit:"fill"}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中··· ")]),a("div",{staticClass:"image-slot",staticStyle:{"font-size":"20px"},attrs:{slot:"error"},slot:"error"},[a("div",{staticClass:"error-img-text"},[t._v(" "+t._s("system"!==t.catalogInfo?e.name:e.title)+" ")])])])],1),a("div",{staticClass:"big-screen-bottom"},[a("div",{staticClass:"left-bigscreen-title",attrs:{title:"system"!==t.catalogInfo?e.name:e.title}},[t._v(" "+t._s("system"!==t.catalogInfo?e.name:e.title)+" ")])])])])}))],2),"system"!==t.catalogInfo?a("div",{staticClass:"footer-pagination-wrap"},[a("div",{staticClass:"bs-pagination"},[a("el-pagination",{staticClass:"bs-el-pagination",attrs:{"popper-class":"bs-el-pagination",background:"",layout:"total, prev, pager, next, sizes","page-size":t.size,"prev-text":"上一页","next-text":"下一页",total:t.totalCount,"page-sizes":[10,20,50,100],"current-page":t.current},on:{"current-change":t.currentChangeHandle,"size-change":t.sizeChangeHandle}})],1)]):t._e()]),"system"!==t.catalogInfo?a("EditForm",{ref:"EditForm",attrs:{type:t.catalogInfo},on:{refreshData:t.reSearch}}):t._e(),"system"!==t.catalogInfo?a("CatalogEditForm",{ref:"CatalogEditForm",attrs:{"catalog-type":t.catalogType},on:{updateCatalogList:t.updateCatalogList}}):t._e()],1)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"big-screen-card-inner big-screen-card-inner-add"},[a("div",{staticClass:"add-big-screen-card"},[a("div",{staticClass:"add-big-screen-card-inner"},[a("div",{staticClass:"add-big-screen-card-text"},[t._v(" 新增组件 ")])])])])}],h=a(50124),b=a(48534),v=a(89584),C=(a(34338),a(38077),a(60228),a(97195),a(70560),a(73964),a(36409),a(5661)),y=a(7651),F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"bs-dialog-wrap bs-el-dialog",attrs:{"close-on-click-modal":!1,title:t.title?"编辑组件":"新增组件",visible:t.formVisible,"append-to-body":!0},on:{"update:visible":function(e){t.formVisible=e},close:t.closeAddDialog}},[a("el-form",{ref:"dataForm",staticClass:"bs-el-form",attrs:{model:t.dataForm,rules:t.dataFormRules,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{staticClass:"bs-el-input",attrs:{autocomplete:"off",placeholder:"请输入名称",clearable:"",maxlength:"30"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),"bizComponent"!==t.type||t.title?t._e():a("el-form-item",{attrs:{label:"组件类型"}},[a("el-select",{staticClass:"bs-el-select",attrs:{"popper-class":"bs-el-select",placeholder:"请选择组件类型",clearable:""},model:{value:t.bizType,callback:function(e){t.bizType=e},expression:"bizType"}},t._l(t.BizList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),"component"===t.type?a("el-form-item",{attrs:{label:"推荐分辨率"}},[a("el-select",{staticClass:"bs-el-select",attrs:{"popper-class":"bs-el-select",placeholder:"请选择分辨率",clearable:""},model:{value:t.resolutionRatioValue,callback:function(e){t.resolutionRatioValue=e},expression:"resolutionRatioValue"}},t._l(t.resolutionRatioOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),"component"===t.type?a("el-form-item",{attrs:{label:"大屏宽度"}},[a("el-input-number",{staticClass:"bs-el-input-number",attrs:{min:100,max:8e3},model:{value:t.resolutionRatio.w,callback:function(e){t.$set(t.resolutionRatio,"w",e)},expression:"resolutionRatio.w"}})],1):t._e(),"component"===t.type?a("el-form-item",{attrs:{label:"大屏高度"}},[a("el-input-number",{staticClass:"bs-el-input-number",attrs:{min:100,max:8e3},model:{value:t.resolutionRatio.h,callback:function(e){t.$set(t.resolutionRatio,"h",e)},expression:"resolutionRatio.h"}})],1):t._e(),a("el-form-item",{attrs:{label:"分组"}},["component"===t.type?a("div",[a("el-select",{staticClass:"bs-el-select",attrs:{"popper-class":"bs-el-select",clearable:"",filterable:""},model:{value:t.dataForm.parentCode,callback:function(e){t.$set(t.dataForm,"parentCode",e)},expression:"dataForm.parentCode"}},t._l(t.catalogList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})})),1)],1):a("div",[a("el-select",{staticClass:"bs-el-select",attrs:{"popper-class":"bs-el-select",clearable:"",filterable:""},model:{value:t.dataForm.type,callback:function(e){t.$set(t.dataForm,"type",e)},expression:"dataForm.type"}},t._l(t.catalogList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})})),1)],1)]),a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{staticClass:"bs-el-input-number",attrs:{min:0,max:3e4,"controls-position":"right"},model:{value:t.dataForm.orderNum,callback:function(e){t.$set(t.dataForm,"orderNum",e)},expression:"dataForm.orderNum"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"bs-el-button-default",on:{click:t.closeAddDialog}},[t._v(" 取消 ")]),t.title?a("el-button",{attrs:{type:"primary",loading:t.toDesignLoading,disabled:t.toDesignDisabled},on:{click:function(e){return t.addOrUpdate(!0)}}},[t._v(" 设计 ")]):t._e(),a("el-button",{attrs:{type:"primary",loading:t.sureLoading,disabled:t.sureDisabled},on:{click:function(e){return t.addOrUpdate(!t.title)}}},[t._v(" 确定 ")])],1)],1)],1)},w=[],$=a(95082),x=(a(21057),a(68932),a(15089)),_={name:"EditForm",components:{},props:{type:{type:String,default:""}},data:function(){var t=this;return{bizType:"native",resolutionRatioValue:"",resolutionRatio:{},catalogList:[],BizList:[{label:"echarts组件",value:"echart"},{label:"g2Plot组件",value:"g2plot"},{label:"基础组件",value:"native"}],resolutionRatioOptions:[{value:"1024*768",label:"1024*768"},{value:"1280*720",label:"1280*720"},{value:"1920*1080",label:"1920*1080"},{value:"2560*1440",label:"2560*1440"},{value:"3840*2160",label:"3840*2160"},{value:"5120*2880",label:"5120*2880"},{value:"7680*4320",label:"7680*4320"}],formVisible:!1,title:"",dataForm:{id:"",type:"",name:"",icon:"",code:"",parentCode:"",remark:"",iconColor:"#007aff",components:"",style:"",formType:"",formConfig:"",pageTemplateId:""},dataFormRules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"},{validator:function(e,a,o){if(a){var i={component:"/bigScreen/design/name/repeat",bizComponent:"/bigScreen/bizComponent/name/repeat"};t.$dataRoomAxios.post(i[t.type],{name:a,type:t.type,id:t.dataForm.id}).then((function(t){t?o(new Error("名称已存在")):o()}))}else o()},trigger:["blur","change"]}]},sureLoading:!1,toDesignLoading:!1,sureDisabled:!1,toDesignDisabled:!1}},computed:{},watch:{resolutionRatioValue:function(t){t?(this.resolutionRatio.w=t.split("*")[0],this.resolutionRatio.h=t.split("*")[1]):(this.resolutionRatio.w="component"===this.type?1024:1920,this.resolutionRatio.h="component"===this.type?768:1080)}},mounted:function(){this.initResolution()},methods:{initResolution:function(){this.resolutionRatioValue="component"===this.type?"1024*768":"1920*1080","component"===this.type?this.resolutionRatio={w:1024,h:768}:this.resolutionRatio={w:1920,h:1080}},closeAddDialog:function(){this.formVisible=!1,this.$refs.dataForm.resetFields(),this.bizType="native"},init:function(t,e){"component"===this.type?this.comInit(t,e):this.bizInit(t,e)},bizInit:function(t,e){var a=this;this.title="";var o=t?t.code:"";this.formVisible=!0,this.$nextTick((function(){a.$dataRoomAxios.get("/bigScreen/type/list/bizComponentCatalog").then((function(t){a.catalogList=t})),o?a.$dataRoomAxios.get("/bigScreen/bizComponent/info/".concat(o)).then((function(e){a.$set(a,"title",e.name),a.$set(a.dataForm,"name",e.name),a.$set(a.dataForm,"code",e.code),a.$set(a.dataForm,"orderNum",t.orderNum),a.$set(a.dataForm,"type",e.type),a.$set(a.dataForm,"id",e.id),a.$set(a.dataForm,"parentCode",e.parentCode)})):(a.$set(a.dataForm,"name",""),a.$set(a.dataForm,"code",""),a.$set(a.dataForm,"type",e),a.$set(a.dataForm,"orderNum",0),a.$set(a.dataForm,"id",""),a.$set(a.dataForm,"parentCode",e))}))},comInit:function(t,e){var a=this;this.title="";var o=t?t.code:"";this.formVisible=!0,this.$nextTick((function(){a.$dataRoomAxios.get("/bigScreen/type/list/componentCatalog").then((function(t){a.catalogList=t})),o?a.$dataRoomAxios.get("/bigScreen/design/info/code/".concat(o)).then((function(e){a.$set(a,"title",e.name),a.$set(a.dataForm,"name",e.name),a.$set(a.dataForm,"chartList",e.chartList),a.$set(a.dataForm,"code",e.code),a.$set(a.dataForm,"icon",e.icon),a.$set(a.dataForm,"iconColor",e.iconColor),a.$set(a.dataForm,"id",e.id),a.$set(a.dataForm,"parentCode","0"===e.parentCode?"":e.parentCode),a.$set(a.dataForm,"remark",e.remark),a.$set(a.dataForm,"style",e.style),a.$set(a.dataForm,"type",e.type),a.$set(a.dataForm,"orderNum",t.orderNum),a.$set(a.dataForm,"pageTemplateId",null===e||void 0===e?void 0:e.pageTemplateId),a.$set(a.dataForm,"pageConfig",null===e||void 0===e?void 0:e.pageConfig),a.$set(a.dataForm,"parentCode",null===e||void 0===e?void 0:e.parentCode);var o=e.pageConfig,i=o.w,n=o.h;a.resolutionRatio.w=i,a.resolutionRatio.h=n,a.resolutionRatioValue="".concat(i,"*").concat(n)})):(a.$set(a.dataForm,"name",""),a.$set(a.dataForm,"chartList",[]),a.$set(a.dataForm,"code",""),a.$set(a.dataForm,"icon",x.Z.getNameList()[0]),a.$set(a.dataForm,"iconColor","#007aff"),a.$set(a.dataForm,"id",""),a.$set(a.dataForm,"parentCode",e),a.$set(a.dataForm,"remark",""),a.$set(a.dataForm,"style",""),a.$set(a.dataForm,"type",a.type),a.$set(a.dataForm,"orderNum",0),a.$set(a.dataForm,"pageTemplateId",""),a.$set(a.dataForm,"pageConfig",{w:"component"===a.type?1024:1920,h:"component"===a.type?768:1080,bgColor:"#151a26",opacity:100,customTheme:"dark",bg:null,lightBgColor:"#f5f7fa",lightBg:null,fitMode:"auto"}),a.resolutionRatio.w="component"===a.type?1024:1920,a.resolutionRatio.h="component"===a.type?768:1080)}))},addOrUpdate:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"component"===this.type?this.addOrUpdateBigScreen(t):this.addOrUpdateBizComponent(t)},addOrUpdateBizComponent:function(t){var e=this;this.$refs.dataForm.validate(function(){var a=(0,b.Z)((0,h.Z)().mark((function a(o){var i,n;return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o){a.next=2;break}return a.abrupt("return");case 2:i=e.dataForm.code?function(t){return e.$dataRoomAxios.post("/bigScreen/bizComponent/update",t)}:function(t){return e.$dataRoomAxios.post("/bigScreen/bizComponent/add",t)},n={className:"com.gccloud.dataroom.core.module.manage.dto.DataRoomPageDTO",id:e.dataForm.id,code:e.dataForm.code,name:e.dataForm.name,type:e.dataForm.type,orderNum:e.dataForm.orderNum},t?(e.toDesignLoading=!0,e.sureDisabled=!0):(e.sureLoading=!0,e.toDesignDisabled=!0),i(n).then((function(a){e.formVisible=!1;var o=e.dataForm.code?"更新成功":"新增成功";e.$message.success(o),e.$emit("refreshData",n,e.dataForm.id),t?(e.toDesignLoading=!1,e.sureDisabled=!1,n.code=a||e.dataForm.code,e.toDesign((0,$.Z)({},n))):(e.sureLoading=!1,e.toDesignDisabled=!1)})).catch((function(){e.sureLoading=!1,e.toDesignLoading=!1,e.sureDisabled=!1,e.toDesignDisabled=!1}));case 6:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())},addOrUpdateBigScreen:function(t){var e=this;this.$refs.dataForm.validate(function(){var a=(0,b.Z)((0,h.Z)().mark((function a(o){var i,n;return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o){a.next=2;break}return a.abrupt("return");case 2:i=e.dataForm.code?function(t){return e.$dataRoomAxios.post("/bigScreen/design/update",t)}:function(t){return e.$dataRoomAxios.post("/bigScreen/design/add",t)},n={className:"com.gccloud.dataroom.core.module.manage.dto.DataRoomPageDTO",chartList:e.dataForm.chartList,code:e.dataForm.code,icon:e.dataForm.icon,iconColor:e.dataForm.iconColor,id:e.dataForm.id,name:e.dataForm.name,parentCode:e.dataForm.parentCode,remark:e.dataForm.remark,style:e.dataForm.style,orderNum:e.dataForm.orderNum,pageConfig:(0,$.Z)((0,$.Z)({},e.dataForm.pageConfig),{},{w:e.resolutionRatio.w,h:e.resolutionRatio.h}),pageTemplateId:e.dataForm.pageTemplateId,type:e.type||"component"},t?(e.toDesignLoading=!0,e.sureDisabled=!0):(e.sureLoading=!0,e.toDesignDisabled=!0),i(n).then((function(a){e.formVisible=!1;var o=e.dataForm.code?"更新成功":"新增成功";e.$message.success(o),e.$emit("refreshData",n,e.dataForm.id),t?(e.toDesignLoading=!1,e.sureDisabled=!1,n.code=a||e.dataForm.code,e.toDesign((0,$.Z)({},n))):(e.sureLoading=!1,e.toDesignDisabled=!1)})).catch((function(){e.sureLoading=!1,e.toDesignLoading=!1,e.sureDisabled=!1,e.toDesignDisabled=!1}));case 6:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())},toDesign:function(t){var e,a,o="component"===this.type?(null===(e=window.BS_CONFIG)||void 0===e||null===(a=e.routers)||void 0===a?void 0:a.designUrl)||"/big-screen/design":"big-screen-biz-component-design";"bizComponent"===this.type?this.$router.push({path:o,query:{code:t.code,type:this.bizType}}):this.$router.push({path:o,query:{code:t.code}})}}},k=_,L=(0,c.Z)(k,F,w,!1,null,"996fc12c",null),S=L.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"bs-dialog-wrap bs-el-dialog catalog-edit-wrap",attrs:{"close-on-click-modal":!1,title:"分组管理",visible:t.formVisible,"append-to-body":!0,"custom-class":"bs-el-dialog","destroy-on-close":""},on:{"update:visible":function(e){t.formVisible=e}}},[t.formVisible?a("el-form",{ref:"dataForm",staticClass:"bs-el-form",attrs:{"label-position":"right","label-width":"100px"}},[a("div",{staticClass:"top-search-wrap"},[a("el-input",{staticClass:"bs-el-input",attrs:{placeholder:"请输入分组名称","prefix-icon":"el-icon-search",clearable:""},on:{clear:t.reSearch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.reSearch(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.reSearch}},[t._v(" 搜索 ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addCatalog}},[t._v(" 新增 ")])],1),a("el-table",{key:t.randomKey,staticClass:"bs-el-table",attrs:{"max-height":"400",data:t.tableList}},[a("el-empty"),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"分组名称",prop:"name",align:"center"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"排序",prop:"orderNum",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.editCatalog(e.row)}}},[t._v(" 编辑 ")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.catalogDel(e.row)}}},[t._v(" 删除 ")])]}}],null,!1,3861582886)})],1)],1):t._e()],1),a("el-dialog",{staticClass:"bs-dialog-wrap bs-el-dialog",attrs:{title:t.currentCatalog.code?"编辑分组":"新增分组",visible:t.catalogVisible,"custom-class":"bs-el-dialog",width:"30%"},on:{"update:visible":function(e){t.catalogVisible=e},close:t.handleClose}},[a("el-form",{ref:"form",staticClass:"bs-el-form",attrs:{model:t.currentCatalog,"label-width":"80px",rules:t.formRules}},[a("el-form-item",{attrs:{label:"分组名称",prop:"name"}},[a("el-input",{staticClass:"bs-el-input",attrs:{clearable:""},model:{value:t.currentCatalog.name,callback:function(e){t.$set(t.currentCatalog,"name","string"===typeof e?e.trim():e)},expression:"currentCatalog.name"}})],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{staticClass:"bs-el-input-number",attrs:{min:0,max:3e4,"controls-position":"right"},model:{value:t.currentCatalog.orderNum,callback:function(e){t.$set(t.currentCatalog,"orderNum",e)},expression:"currentCatalog.orderNum"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"bs-el-button-default",on:{click:function(e){t.catalogVisible=!1}}},[t._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addOrEditCatalog}},[t._v(" 确定 ")])],1)],1)],1)},D=[],R=a(50361),I=a.n(R),T={name:"CatalogEditForm",components:{},props:{catalogType:{type:String,default:""}},data:function(){var t=this,e=function(e,a,o){t.$dataRoomAxios.post("/bigScreen/type/nameRepeat",{id:t.currentCatalog.id,name:a,type:t.catalogType},!0).then((function(t){t.data?o(new Error("分组名称已存在")):o()}))};return{dataList:[],tableList:[],randomKey:"",searchKey:"",catalogVisible:!1,currentCatalog:{},formVisible:!1,formRules:{name:[{required:!0,message:"分组名称不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]}}},computed:{},watch:{catalogType:function(){this.getCatalogList()}},mounted:function(){this.getCatalogList()},methods:{reSearch:function(){var t=this,e=this.dataList;this.tableList=null===e||void 0===e?void 0:e.filter((function(e){var a;return-1!==(null===(a=e.name)||void 0===a?void 0:a.indexOf(t.searchKey))}))},getCatalogList:function(){var t=this;this.$dataRoomAxios.get("/bigScreen/type/list/".concat(this.catalogType)).then((function(e){t.tableList=e,t.dataList=e,t.$emit("updateCatalogList",e)})).catch((function(){}))},addOrEditCatalog:function(){var t=this;this.$refs.form.validate(function(){var e=(0,b.Z)((0,h.Z)().mark((function e(a){return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:t.currentCatalog.id?t.$dataRoomAxios.post("/bigScreen/type/update",(0,$.Z)((0,$.Z)({},t.currentCatalog),{},{type:t.catalogType})).then((function(e){t.catalogVisible=!1,t.getCatalogList()})).catch((function(){})):t.$dataRoomAxios.post("/bigScreen/type/add",(0,$.Z)((0,$.Z)({},t.currentCatalog),{},{type:t.catalogType})).then((function(e){t.catalogVisible=!1,t.getCatalogList()})).catch((function(){}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addCatalog:function(){this.currentCatalog={name:"",id:"",code:"",orderNum:0},this.catalogVisible=!0},editCatalog:function(t){this.currentCatalog=I()(t),this.catalogVisible=!0},catalogDel:function(t){var e=this;this.$confirm("分组删除后，分组下的组件会被归纳至全部中，确定删除该分组?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"bs-el-message-box"}).then((0,b.Z)((0,h.Z)().mark((function a(){return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$dataRoomAxios.post("/bigScreen/type/delete/".concat(t.id)).then((function(){e.$message({type:"success",message:"删除成功"}),e.getCatalogList()})).catch((function(){e.$message({type:"error",message:"删除失败!"})}));case 1:case"end":return a.stop()}}),a)})))).catch()},handleClose:function(){this.catalogVisible=!1,this.$refs.form.clearValidate()}}},M=T,Z=(0,c.Z)(M,z,D,!1,null,"8a6744b4",null),V=Z.exports,O=a(46889),N={name:"BigScreenList",mixins:[C.a],props:{catalogInfo:{type:String,default:""}},components:{EditForm:S,CatalogEditForm:V},data:function(){return{name:"",catalogVisible:!1,templateLoading:!1,searchKey:"",list:[],loading:!1,catalogList:[],catalogCode:""}},computed:{catalogType:function(){return"component"===this.catalogInfo?"componentCatalog":"bizComponentCatalog"},code:function(){return""},gridComputed:function(){return this.list.length>2}},watch:{catalogInfo:function(){this.reset(),this.init()},catalogCode:function(t){this.reSearch()}},mounted:function(){this.init()},methods:{reset:function(){this.searchKey="",this.current=1,this.size=10,this.catalogCode="",this.init()},init:function(){"system"!==this.catalogInfo?(this.getDataList(),this.getCatalogList()):(this.list=[],this.list=[].concat((0,v.Z)(O.ZP),(0,v.Z)((0,O.uz)())))},updateCatalogList:function(t){this.catalogList=t},reSearch:function(){var t=this;if("system"!==this.catalogInfo)this.current=1,this.getDataList();else{var e=[].concat((0,v.Z)(O.ZP),(0,v.Z)((0,O.uz)()));this.list=null===e||void 0===e?void 0:e.filter((function(e){return-1!==e.title.indexOf(t.searchKey)}))}},catalogManage:function(){this.$refs.CatalogEditForm.formVisible=!0},getCatalogList:function(){var t=this;this.$dataRoomAxios.get("/bigScreen/type/list/".concat(this.catalogType)).then((function(e){t.catalogList=e})).catch((function(){}))},getDataList:function(){var t=this;this.loading=!0,"component"===this.catalogInfo?this.$dataRoomAxios.get("/bigScreen/design/page",{parentCode:this.catalogCode||null,current:this.current,size:this.size,searchKey:this.searchKey,type:"component"}).then((function(e){t.list=e.list,t.totalCount=e.totalCount})).finally((function(){t.loading=!1})):this.$dataRoomAxios.get("/bigScreen/bizComponent/page",{current:this.current,size:this.size,name:this.searchKey,type:this.catalogCode||null}).then((function(e){t.list=e.list,t.totalCount=e.totalCount})).finally((function(){t.loading=!1}))},preview:function(t){var e,a,o,i,n="",s={code:t.code};"component"===this.catalogInfo?n=(null===(e=window.BS_CONFIG)||void 0===e||null===(a=e.routers)||void 0===a?void 0:a.previewUrl)||"/big-screen/preview":n=(null===(o=window.BS_CONFIG)||void 0===o||null===(i=o.routers)||void 0===i?void 0:i.bizComponentPreviewUrl)||"big-screen-biz-component-preview";"system"===this.catalogInfo&&(s={dirName:t.customize.vueSysComponentDirName});var r=this.$router.resolve({path:n,query:s}),l=r.href;window.open(l,"_blank")},design:function(t){var e,a,o,i,n="component"===this.catalogInfo?(null===(e=window.BS_CONFIG)||void 0===e||null===(a=e.routers)||void 0===a?void 0:a.designUrl)||"/big-screen/design":(null===(o=window.BS_CONFIG)||void 0===o||null===(i=o.routers)||void 0===i?void 0:i.bizComponentDesignUrl)||"big-screen-biz-component-design";this.$router.push({path:n,query:{code:t.code}})},add:function(){var t={code:"",type:"component"===this.catalogInfo?"bigScreen":"bizComponent"};this.$refs.EditForm.init(t,this.catalogCode)},edit:function(t){this.$refs.EditForm.init(t,this.catalogCode)},del:function(t){var e=this;this.$confirm("确定删除该组件","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"bs-el-message-box"}).then((0,b.Z)((0,h.Z)().mark((function a(){var o;return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:o="component"===e.catalogInfo?"/bigScreen/design/delete/".concat(t.code):"/bigScreen/bizComponent/delete/".concat(t.id),e.$dataRoomAxios.post(o).then((function(){e.$message({type:"success",message:"删除成功"}),e.getDataList()})).catch((function(){e.$message({type:"error",message:"删除失败!"})}));case 2:case"end":return a.stop()}}),a)})))).catch()},copy:function(t){var e=this,a="component"===this.catalogInfo?"/bigScreen/design/copy/".concat(t.code):"/bigScreen/bizComponent/copy/".concat(t.code);this.$confirm("确定复制该组件","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"bs-el-message-box"}).then((0,b.Z)((0,h.Z)().mark((function t(){return(0,h.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$dataRoomAxios.post(a).then((function(){e.$message({type:"success",message:"复制成功"}),e.getDataList()})).catch((function(){e.$message({type:"error",message:"复制失败!"})}));case 1:case"end":return t.stop()}}),t)})))).catch((function(t){console.error(t)}))},getCoverPicture:function(t){return(0,y.q)(t)}}},B=N,E=(0,c.Z)(B,g,f,!1,null,"2dab962f",null),A=E.exports,K={name:"",props:{catalogInfo:{type:String,default:"component"}},components:{ComponentList:A},data:function(){return{}}},P=K,U=(0,c.Z)(P,m,p,!1,null,"11d43a02",null),H=U.exports,q={name:"",props:{},components:{SideMenu:u,MenuContent:H},data:function(){return{catalogInfo:"component"}},mounted:function(){},methods:{getPageInfo:function(t){this.catalogInfo=t}}},G=q,j=(0,c.Z)(G,o,i,!1,null,"57710681",null),J=j.exports;J.install=function(t){t.component(J.name,J)};var Q=J},15089:function(t,e,a){"use strict";a(60228),a(76265),a(50886),a(752);var o,i=a(67292),n=null===i||void 0===i||null===(o=i.keys())||void 0===o?void 0:o.map((function(t){return i(t)}));e.Z={getNameList:function(){return null===n||void 0===n?void 0:n.map((function(t){var e,a;return null===t||void 0===t||null===(e=t.default)||void 0===e||null===(a=e.id)||void 0===a?void 0:a.split("-")[1]}))}}},5661:function(t,e,a){"use strict";a.d(e,{a:function(){return o}});var o={data:function(){return{current:1,size:10,totalPage:0,totalCount:0,prevText:"",nextText:"",sortForm:{sortFieldMap:{},sortFieldOrderList:[],columnCacheMap:{}},enableMultiFieldOrder:!1,sortFieldHeaderTipMap:{}}},watch:{"sortForm.sortFieldMap":{handler:function(t,e){for(var a in t){var o=t[a];o?"ascending"===o?this.$set(this.sortFieldHeaderTipMap,a,"点击降序"):"descending"===o?this.$set(this.sortFieldHeaderTipMap,a,"取消排序"):this.$set(this.sortFieldHeaderTipMap,a,"点击升序"):this.$set(this.sortFieldHeaderTipMap,a,"点击升序")}},deep:!0}},methods:{initSortField:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e)for(var a in e){var o=e[a];this.$set(this.sortForm.sortFieldMap,a,o)}for(var i=0;i<t.length;i++){var n=t[i],s=this.sortForm.sortFieldMap[n];s||this.$set(this.sortForm.sortFieldMap,n,"")}this.sortForm.sortFieldOrderList=t},sortStyle:function(t){t.row;var e=t.column,a=(t.rowIndex,t.columnIndex,this.sortForm.sortFieldMap[e.property]);a&&(e.order=a),this.sortForm.columnCacheMap[e.property]=e},reSort:function(t){if(!this.enableMultiFieldOrder){for(var e in this.sortForm.columnCacheMap){var a=this.sortForm.columnCacheMap[e];a.order=""}for(var o in this.sortForm.sortFieldMap)this.sortForm.sortFieldMap[o]=""}this.$set(this.sortForm.sortFieldMap,t.prop,t.order),this.reSearch()},reSearch:function(){this.current=1,this.getDataList()},getDataList:function(){console.error("你应该重写getDataList方法")},sizeChangeHandle:function(t){this.size=t,this.current=1,this.getDataList()},currentChangeHandle:function(t){this.current=t,this.getDataList()},getSortForm:function(){return{sortFieldMap:this.sortForm.sortFieldMap,sortFieldOrderList:this.sortForm.sortFieldOrderList}}}}},7651:function(t,e,a){"use strict";a.d(e,{q:function(){return o}});a(64043),a(7409),a(34338);function o(t){var e,a;return t?/^http/.test(t)?t:(/^\//.test(t)||(t="/".concat(t)),"".concat(null===(e=window.BS_CONFIG)||void 0===e||null===(a=e.httpConfigs)||void 0===a?void 0:a.fileUrlPrefix).concat(t)):t}},67292:function(t,e,a){var o={"./00dataSourceSet.svg":11460,"./01datasetConfig.svg":65667};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=n,t.exports=i,i.id=67292}}]);